[{"commit":"7a654cbbdd81529d5efbc6b4930480e28ec2b284","repository":"https://github.com/Erishion-Games-LLC/Total-Selling-Price-Runelite-Plugin.git","internalName":"total-selling-price","files":[{"fileName":"inventoryType.java","content":"/* BSD 2-Clause License\n * Copyright (c) 2023, Erishion Games LLC \u003chttps://github.com/Erishion-Games-LLC\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.erishiongamesllc.totalsellingprice;\n\npublic enum inventoryType\n{\n\tSHOP_INVENTORY,\n\tPLAYER_INVENTORY,\n\tNONE,\n}","filePath":"src\\main\\java\\com\\erishiongamesllc\\totalsellingprice\\inventoryType.java"},{"fileName":"ItemData.java","content":"/* BSD 2-Clause License\n * Copyright (c) 2023, Erishion Games LLC \u003chttps://github.com/Erishion-Games-LLC\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.erishiongamesllc.totalsellingprice;\n\n\npublic class ItemData {\n    private int id;\n    private int value;\n    private String name;\n    private double lowAlchValue;\n\tprivate double highAlchValue;\n\n    public ItemData(int id, int value, String name)\n\t{\n        this.id \u003d id;\n        this.value \u003d value;\n        this.name \u003d name;\n        lowAlchValue \u003d value * 0.4;\n\t\thighAlchValue \u003d value * 0.6;\n    }\n\n    public ItemData()\n\t{\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id \u003d id;\n    }\n\n    public int getValue() {\n        return value;\n    }\n\n    public void setValue(int value) {\n        this.value \u003d value;\n\t\tlowAlchValue \u003d value * 0.4;\n\t\thighAlchValue \u003d value * 0.6;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name \u003d name;\n    }\n\n    public double getLowAlchValue() {\n        return lowAlchValue;\n    }\n\n    public void setLowAlchValue(int lowAlchValue) {\n        this.lowAlchValue \u003d lowAlchValue;\n\t\tvalue \u003d (lowAlchValue * 5) / 2;\n\t\thighAlchValue \u003d value * 0.6;\n    }\n\n\tpublic double getHighAlchValue()\n\t{\n\t\treturn highAlchValue;\n\t}\n\n\tpublic void setHighAlchValue(int highAlchValue)\n\t{\n\t\tthis.highAlchValue \u003d highAlchValue;\n\t\tvalue \u003d (highAlchValue * 5) / 3;\n\t\tlowAlchValue \u003d value * 0.4;\n\t}\n}","filePath":"src\\main\\java\\com\\erishiongamesllc\\totalsellingprice\\ItemData.java"},{"fileName":"ShopCalculator.java","content":"/* BSD 2-Clause License\n * Copyright (c) 2023, Erishion Games LLC \u003chttps://github.com/Erishion-Games-LLC\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.erishiongamesllc.totalsellingprice;\n\nimport javax.inject.Inject;\n\npublic class ShopCalculator\n{\n\t@Inject\n\tprivate TotalSellingPriceConfig config;\n\n\t@Inject\n\tprivate WidgetHandler widgetHandler;\n\n\tpublic void calculateAllGoldSellingOptions()\n\t{\n\t\tif (config \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (config.sell10())\n\t\t{\n\t\t\tcalculateGoldEarnedFromSelling(10);\n\t\t}\n\t\tif (config.sell20())\n\t\t{\n\t\t\tcalculateGoldEarnedFromSelling(20);\n\t\t}\n\t\tif (config.sell30())\n\t\t{\n\t\t\tcalculateGoldEarnedFromSelling(30);\n\t\t}\n\t\tif (config.sell40())\n\t\t{\n\t\t\tcalculateGoldEarnedFromSelling(40);\n\t\t}\n\t\tif (config.sell50())\n\t\t{\n\t\t\tcalculateGoldEarnedFromSelling(50);\n\t\t}\n\t\tif (config.sellAll())\n\t\t{\n\t\t\tcalculateGoldEarnedFromSelling(widgetHandler.getAmountOfItemInPlayerInventory());\n\t\t}\n\t\tif (config.sellCustom() )\n\t\t{\n\t\t\tcalculateGoldEarnedFromSelling(config.amountPerWorldToSell());\n\t\t}\n\t}\n\n\tprivate void calculateGoldEarnedFromSelling(int amountPerWorld)\n\t{\n\t\tint amountOfItemInShopInventory \u003d widgetHandler.getAmountOfItemInShopInventory();\n\t\tint amountOfItemInPlayerInventory \u003d widgetHandler.getAmountOfItemInPlayerInventory();\n\n\t\tint goldPerWorld \u003d calculateGoldPerWorld(amountPerWorld, amountOfItemInShopInventory);\n\n\t\tint totalGold \u003d (int) Math.floor(goldPerWorld * ((double) amountOfItemInPlayerInventory / amountPerWorld));\n\t\tint averageGold \u003d (goldPerWorld / amountPerWorld);\n\n\t\tdouble percentOfMaxGold \u003d calculateMaxGoldPercent(totalGold, amountOfItemInPlayerInventory);\n\n\t\tString colorAmountPerWorld \u003d colorMessage(String.format(\"%,d\", amountPerWorld));\n\t\tString colorGoldPerWorld \u003d colorMessage(String.format(\"%,d\", goldPerWorld));\n\t\tString colorAverageGold \u003d colorMessage(String.format(\"%,d\", averageGold));\n\t\tString colorTotalGold \u003d colorMessage(String.format(\"%,d\", totalGold));\n\t\tString colorPercent \u003d colorMessage(String.format(\"%.2f\", percentOfMaxGold));\n\n\t\twidgetHandler.createChatMessage(\"Sell \" + colorAmountPerWorld + \": \" + colorGoldPerWorld + \" gold. Average: \" + colorAverageGold + \". Total: \" + colorTotalGold + \". Percent: \" + colorPercent + \".\");\n\n\t\tdisplayAmountOfWorldHopsNeeded(amountPerWorld);\n\t}\n\n\tprivate int calculateGoldPerWorld(int amountPerWorld, int amountInInventory)\n\t{\n\t\tint amountInShopInventory \u003d amountInInventory;\n\n\t\tShopInfo currentShop \u003d widgetHandler.getCurrentShop();\n\t\tint currentGold \u003d 0;\n\t\tfloat shopChange \u003d currentShop.getChangePercent();\n\n\t\tfor (int i \u003d 0; i \u003c amountPerWorld; i++)\n\t\t{\n\t\t\tfloat buyPercent \u003d currentShop.getBuyPercent() - (shopChange * amountInShopInventory);\n\n\t\t\t//if try buy for less than 10%, buy for 10%\n\t\t\tif (buyPercent \u003c .1f)\n\t\t\t{\n\t\t\t\tbuyPercent \u003d .1f;\n\t\t\t}\n\n\t\t\tint shopBuyPrice \u003d (int) Math.floor(buyPercent * widgetHandler.getItemData().getValue());\n\n\t\t\tcurrentGold +\u003d shopBuyPrice;\n\t\t\tamountInShopInventory +\u003d 1;\n\t\t}\n\t\treturn currentGold;\n\t}\n\n\tprivate float calculateMaxGoldPercent(int totalGold, int amountInPlayerInventory)\n\t{\n\t\t//calculate the max amount of gold possible\n\t\tint maxGoldPossible \u003d calculateGoldPerWorld(1, 0) * amountInPlayerInventory;\n\n\t\treturn (float) totalGold / maxGoldPossible;\n\n\t}\n\n\tprivate void displayAmountOfWorldHopsNeeded(int amountPerWorld)\n\t{\n\t\tif (!config.calculateAmountOfWorldHopsNeeded())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tint hopsNeeded \u003d (widgetHandler.getAmountOfItemInPlayerInventory() / amountPerWorld);\n\t\tString colorHopsNeeded \u003d colorMessage(String.format(\"%,d\", hopsNeeded));\n\t\twidgetHandler.createChatMessage(\"World hops needed: \" + colorHopsNeeded);\n\t}\n\n\tpublic String colorMessage(String message)\n\t{\n\t\tString color \u003d Integer.toHexString(config.highlightColor().getRGB()).substring(2);\n\t\treturn \"\u003ccol\u003d\" + color + \"\u003e\" + message + \"\u003c/col\u003e\";\n\t}\n}","filePath":"src\\main\\java\\com\\erishiongamesllc\\totalsellingprice\\ShopCalculator.java"},{"fileName":"ShopInfo.java","content":"/* BSD 2-Clause License\n * Copyright (c) 2023, Erishion Games LLC \u003chttps://github.com/Erishion-Games-LLC\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.erishiongamesllc.totalsellingprice;\n\npublic enum ShopInfo\n{\n\tBANDIT_DUTY_FREE_GENERAL_STORE(\"Bandit Duty Free\", 0.9f, 0.6f, 0.03f),\n\tMARTIN_THWAITS_LOST_AND_FOUND(\"Martin Thwait\u0027s Lost and Found.\", 1.0f, 0.6f, 0.02f),\n\tWEST_ARDOUGNE_GENERAL_STORE(\"West Ardougne General Store\", 1.2f, 0.55f, 0.02f),\n\tPOLLNIVNEACH_GENERAL_STORE(\"Pollnivneach general store.\", 1.0f, 0.55f, 0.01f),\n\tLEGENDS_GUILD_GENERAL_STORE(\"Legends Guild General Store.\", 1.55f, 0.55f, 0.01f),\n\t;\n\n\n\tprivate final String name;\n\tprivate final float sellPercent;\n\tprivate final float buyPercent;\n\tprivate final float changePercent;\n\n\tShopInfo(String name, float sellPercent, float buyPercent, float changePercent)\n\t{\n\t\tthis.name \u003d name;\n\t\tthis.sellPercent \u003d sellPercent;\n\t\tthis.buyPercent \u003d buyPercent;\n\t\tthis.changePercent \u003d changePercent;\n\t}\n\n\tpublic String getName()\n\t{\n\t\treturn name;\n\t}\n\n\tpublic float getSellPercent()\n\t{\n\t\treturn sellPercent;\n\t}\n\n\tpublic float getBuyPercent()\n\t{\n\t\treturn buyPercent;\n\t}\n\n\tpublic float getChangePercent()\n\t{\n\t\treturn changePercent;\n\t}\n}","filePath":"src\\main\\java\\com\\erishiongamesllc\\totalsellingprice\\ShopInfo.java"},{"fileName":"TotalSellingPriceConfig.java","content":"/* BSD 2-Clause License\n * Copyright (c) 2023, Erishion Games LLC \u003chttps://github.com/Erishion-Games-LLC\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.erishiongamesllc.totalsellingprice;\n\nimport java.awt.Color;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\n\n@ConfigGroup(TotalSellingPricePlugin.CONFIG_GROUP)\npublic interface TotalSellingPriceConfig extends Config\n{\n\t@ConfigSection\n\t(\n\t\tname \u003d \"Sell amounts\",\n\t\tdescription \u003d \"Choose what amounts you wish to see when calculating gold earned per world\",\n\t\tposition \u003d 0\n\t)\n\t\tString sellAmounts \u003d \"Sell Amounts\";\n\n\t@ConfigItem\n\t(\n\t\tkeyName \u003d \"sell10\",\n\t\tname \u003d \"Sell 10 per world\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 0,\n\t\tsection \u003d sellAmounts\n\t)\n\t\tdefault boolean sell10()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem\n\t\t(\n\t\t\tkeyName \u003d \"sell20\",\n\t\t\tname \u003d \"Sell 20 per world\",\n\t\t\tdescription \u003d \"\",\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d sellAmounts\n\t\t)\n\tdefault boolean sell20()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem\n\t\t(\n\t\t\tkeyName \u003d \"sell30\",\n\t\t\tname \u003d \"Sell 30 per world\",\n\t\t\tdescription \u003d \"\",\n\t\t\tposition \u003d 2,\n\t\t\tsection \u003d sellAmounts\n\t\t)\n\tdefault boolean sell30()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem\n\t\t(\n\t\t\tkeyName \u003d \"sell40\",\n\t\t\tname \u003d \"Sell 40 per world\",\n\t\t\tdescription \u003d \"\",\n\t\t\tposition \u003d 3,\n\t\t\tsection \u003d sellAmounts\n\t\t)\n\tdefault boolean sell40()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem\n\t\t(\n\t\t\tkeyName \u003d \"sell50\",\n\t\t\tname \u003d \"Sell 50 per world\",\n\t\t\tdescription \u003d \"\",\n\t\t\tposition \u003d 4,\n\t\t\tsection \u003d sellAmounts\n\t\t)\n\tdefault boolean sell50()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem\n\t\t(\n\t\t\tkeyName \u003d \"sellAll\",\n\t\t\tname \u003d \"Sell all per world\",\n\t\t\tdescription \u003d \"\",\n\t\t\tposition \u003d 5,\n\t\t\tsection \u003d sellAmounts\n\t\t)\n\tdefault boolean sellAll()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem\n\t\t(\n\t\t\tkeyName \u003d \"sellCustom\",\n\t\t\tname \u003d \"Sell custom amount per world\",\n\t\t\tdescription \u003d \"\",\n\t\t\tposition \u003d 6,\n\t\t\tsection \u003d sellAmounts\n\t\t)\n\tdefault boolean sellCustom()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem\n\t\t(\n\t\t\tkeyName \u003d \"amountPerWorldToSell\",\n\t\t\tname \u003d \"Amount to sell per world\",\n\t\t\tdescription \u003d \"\",\n\t\t\tposition \u003d 7,\n\t\t\tsection \u003d sellAmounts\n\t\t)\n\tdefault int amountPerWorldToSell()\n\t{\n\t\treturn 1;\n\t}\n\n\t@ConfigItem\n\t\t(\n\t\t\tkeyName \u003d \"calculateAmountOfWorldHopsNeeded\",\n\t\t\tname \u003d \"Calculate amount of world hops to sell stack?\",\n\t\t\tdescription \u003d \"\",\n\t\t\tposition \u003d 1\n\t\t)\n\tdefault boolean calculateAmountOfWorldHopsNeeded()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem\n\t(\n\t\tkeyName \u003d \"highlightColor\",\n\t\tname \u003d \"Highlight Color\",\n\t\tdescription \u003d \"The desired color for messages\",\n\t\tposition \u003d 2\n\t)\n\tdefault Color highlightColor()\n\t{\n\t\treturn Color.BLUE;\n\t}\n}","filePath":"src\\main\\java\\com\\erishiongamesllc\\totalsellingprice\\TotalSellingPriceConfig.java"},{"fileName":"TotalSellingPricePlugin.java","content":"/* BSD 2-Clause License\n * Copyright (c) 2023, Erishion Games LLC \u003chttps://github.com/Erishion-Games-LLC\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.erishiongamesllc.totalsellingprice;\n\nimport static com.erishiongamesllc.totalsellingprice.TotalSellingPricePlugin.PLUGIN_NAME;\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d PLUGIN_NAME\n)\npublic class TotalSellingPricePlugin extends Plugin {\n\tpublic static final String PLUGIN_NAME \u003d \"Total Selling Price\";\n\tpublic static final String CONFIG_GROUP \u003d \"totalsellingprice\";\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate WidgetHandler widgetHandler;\n\n\t@Inject\n\tprivate ShopCalculator shopCalculator;\n\n\t@Inject\n\tprivate TotalSellingPriceConfig config;\n\n\t@Inject\n\tprivate EventBus eventBus;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\teventBus.register(widgetHandler);\n\t\teventBus.register(shopCalculator);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\teventBus.unregister(widgetHandler);\n\t\teventBus.unregister(shopCalculator);\n\t}\n\n\t@Provides\n\tTotalSellingPriceConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(TotalSellingPriceConfig.class);\n\t}\n}","filePath":"src\\main\\java\\com\\erishiongamesllc\\totalsellingprice\\TotalSellingPricePlugin.java"},{"fileName":"WidgetHandler.java","content":"/* BSD 2-Clause License\n * Copyright (c) 2023, Erishion Games LLC \u003chttps://github.com/Erishion-Games-LLC\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.erishiongamesllc.totalsellingprice;\n\nimport lombok.Getter;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.MenuOptionClicked;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetInfo;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.util.Text;\nimport javax.inject.Inject;\nimport java.util.Objects;\n\npublic class WidgetHandler {\n    public static final int SHOP_WIDGET_ID \u003d 19660801;\n    public static final int SHOP_WIDGET_CHILD_TEXT_FIELD \u003d 1;\n    public static final int SHOP_INVENTORY_WIDGET_ID \u003d 19660816;\n    public static final int SHOP_PLAYER_INVENTORY_WIDGET_ID \u003d 19726336;\n    private Widget clickedWidget \u003d null;\n    private int clickedWidgetID \u003d 0;\n    private  MenuOptionClicked menuOptionClicked \u003d null;\n    private inventoryType clickedInventory \u003d inventoryType.NONE;\n    private String currentShopName \u003d null;\n\n\tprivate ItemComposition itemComposition \u003d null;\n\n\tprivate Widget[] shopItems \u003d null;\n\tprivate Widget[] playerItems \u003d null;\n\n\n\t@Getter\n\tprivate ItemData itemData \u003d new ItemData();\n\t@Getter\n\tprivate ShopInfo currentShop \u003d null;\n\t@Getter\n\tprivate int amountOfItemInShopInventory \u003d 0;\n\t@Getter\n\tprivate int amountOfItemInPlayerInventory \u003d 0;\n\n\t@Inject\n    private Client client;\n\n\t@Inject\n\tprivate TotalSellingPricePlugin totalSellingPricePlugin;\n\n    @Inject\n    private ItemManager itemManager;\n\n\t@Inject\n\tprivate TotalSellingPriceConfig config;\n\n\t@Inject\n\tprivate ShopCalculator shopCalculator;\n\n\t@Subscribe\n\tpublic void onMenuOptionClicked(MenuOptionClicked clicked)\n\t{\n\t\tmenuOptionClicked \u003d clicked;\n\n\t\tif(!isShopOpen() || !isCheckingValue())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tcurrentShopName \u003d getCurrentShopName();\n\t\tcurrentShop \u003d getCurrentShopValue();\n\n\t\tif (currentShop \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tassignWidgetVariables();\n\n\t\tif (clickedInventory \u003d\u003d inventoryType.NONE)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (clickedInventory \u003d\u003d inventoryType.SHOP_INVENTORY)\n\t\t{\n\t\t\tcreateChatMessage(\"Buying from shops is not supported right now\");\n\t\t\treturn;\n\t\t}\n\n\t\tassignItemVariables();\n\n\t\tamountOfItemInPlayerInventory \u003d findAmountOfItemInInventory(playerItems);\n\t\tamountOfItemInShopInventory \u003d findAmountOfItemInInventory(shopItems);\n\n\t\tshopCalculator.calculateAllGoldSellingOptions();\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick gameTick)\n\t{\n\t\tif(currentShop !\u003d null \u0026\u0026 !isShopOpen())\n\t\t{\n\t\t\tresetVariables();\n\t\t}\n\t}\n\n    private void assignWidgetVariables()\n\t{\n        clickedWidget \u003d menuOptionClicked.getWidget();\n\t\tassert clickedWidget !\u003d null;\n\n\t\tclickedWidgetID \u003d clickedWidget.getId();\n\t\tclickedInventory \u003d getClickedInventory(clickedWidgetID);\n    }\n\n\tprivate void assignItemVariables()\n\t{\n\t\titemComposition \u003d itemManager.getItemComposition(menuOptionClicked.getItemId());\n\n\t\titemData.setName(itemComposition.getName());\n\t\titemData.setId(itemComposition.getId());\n\t\titemData.setValue(itemComposition.getPrice());\n\t\tshopItems \u003d Objects.requireNonNull(client.getWidget(SHOP_INVENTORY_WIDGET_ID)).getChildren();\n\t\tplayerItems \u003d Objects.requireNonNull(client.getWidget(SHOP_PLAYER_INVENTORY_WIDGET_ID)).getChildren();\n\t}\n\n\tprivate void resetVariables()\n\t{\n\t\tclickedWidget \u003d null;\n\t\tclickedWidgetID \u003d 0;\n\t\tmenuOptionClicked \u003d null;\n\t\tclickedInventory \u003d inventoryType.NONE;\n\t\tcurrentShopName \u003d null;\n\t\tcurrentShop \u003d null;\n\t\titemComposition \u003d null;\n\t\titemData \u003d new ItemData();\n\t\tshopItems \u003d null;\n\t\tplayerItems \u003d null;\n\t\tamountOfItemInShopInventory \u003d 0;\n\t\tamountOfItemInPlayerInventory \u003d 0;\n\t}\n\n\tprivate boolean isShopOpen()\n\t{\n\t\treturn client.getWidget(WidgetInfo.SHOP_INVENTORY_ITEMS_CONTAINER) !\u003d null;\n\t}\n\n\tprivate boolean isCheckingValue()\n\t{\n\t\treturn Text.removeTags(menuOptionClicked.getMenuOption()).equals(\"Value\");\n\t}\n\n    private String getCurrentShopName()\n\t{\n        return Objects.requireNonNull(client.getWidget(SHOP_WIDGET_ID)).getChild(SHOP_WIDGET_CHILD_TEXT_FIELD).getText();\n    }\n\n    private inventoryType getClickedInventory(int widgetID)\n\t{\n        switch(widgetID)\n\t\t{\n            case SHOP_INVENTORY_WIDGET_ID: return inventoryType.SHOP_INVENTORY;\n            case SHOP_PLAYER_INVENTORY_WIDGET_ID: return inventoryType.PLAYER_INVENTORY;\n        }\n        return inventoryType.NONE;\n    }\n\n\tprivate ShopInfo getCurrentShopValue()\n\t{\n\t\tfor (ShopInfo shopInfo : ShopInfo.values())\n\t\t{\n\t\t\tif (shopInfo.getName().equals(currentShopName))\n\t\t\t{\n\t\t\t\treturn shopInfo;\n\t\t\t}\n\t\t}\n\t\tcreateChatMessage(\"this shop is not supported right now\");\n\t\treturn null;\n\t}\n\n\tprivate int findAmountOfItemInInventory(Widget[] inventory)\n\t{\n\t\tfor (Widget item: inventory)\n\t\t{\n\t\t\tif (item.getName().contains(itemData.getName()))\n\t\t\t{\n\t\t\t\treturn item.getItemQuantity();\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\n\n\n\n\n\n\n\tpublic void createChatMessage(String message)\n\t{\n\t\tclient.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", message, null);\n\t}\n}","filePath":"src\\main\\java\\com\\erishiongamesllc\\totalsellingprice\\WidgetHandler.java"},{"fileName":"TotalSellingPricePluginTest.java","content":"package com.erishiongamesllc.totalsellingprice;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class TotalSellingPricePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(TotalSellingPricePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\erishiongamesllc\\totalsellingprice\\TotalSellingPricePluginTest.java"}]},{"commit":"7ec419eed23dbd8f3970c40bbe0b03d5b951a0dd","repository":"https://github.com/TheStonedTurtle/Mahogany-Homes.git","internalName":"mahogany-homes","files":[{"fileName":"Home.java","content":"/*\n * Copyright (c) 2020, TheStonedTurtle \u003chttps://github.com/TheStonedTurtle\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage thestonedturtle.mahoganyhomes;\n\nimport com.google.common.collect.ImmutableSet;\nimport lombok.Getter;\nimport net.runelite.api.NpcID;\nimport net.runelite.api.coords.WorldArea;\nimport net.runelite.api.coords.WorldPoint;\nimport org.apache.commons.text.WordUtils;\n\n@Getter\nenum Home\n{\n\t// area is based on bounds of house not area at which stuff loads in for the homes\n\t// Ardy\n\tJESS(new WorldArea(2611, 3290, 14, 7, 0), \"Upstairs of the building south of the church in East Ardougne\",\n\t\tNpcID.JESS, new WorldPoint(2621, 3292, 0), TeleportItems.JESS, RequiredMaterialsByTier.JESS, HotspotObjects.JESS, true, 17026, 16685),\n\tNOELLA(new WorldArea(2652, 3317, 15, 8, 0), \"North of East Ardougne market\",\n\t\tNpcID.NOELLA, new WorldPoint(2659, 3322, 0), TeleportItems.NOELLA, RequiredMaterialsByTier.NOELLA, HotspotObjects.NOELLA, 17026, 16685, 15645, 15648),\n\tROSS(new WorldArea(2609, 3313, 11, 9, 0), \"North of the church in East Ardougne\",\n\t\tNpcID.ROSS, new WorldPoint(2613, 3316, 0), TeleportItems.ROSS, RequiredMaterialsByTier.ROSS, HotspotObjects.ROSS, 16683, 16679),\n\n\t// Falador\n\tLARRY(new WorldArea(3033, 3360, 10, 9, 0), \"North of the fountain in Falador\",\n\t\tNpcID.LARRY_10418, new WorldPoint(3038, 3364, 0), TeleportItems.LARRY, RequiredMaterialsByTier.LARRY, HotspotObjects.LARRY, 24075, 24076),\n\tNORMAN(new WorldArea(3034, 3341, 8, 8, 0), \"South of the fountain in Falador\",\n\t\tNpcID.NORMAN, new WorldPoint(3038, 3344, 0), TeleportItems.NORMAN, RequiredMaterialsByTier.NORMAN, HotspotObjects.NORMAN, true, 24082, 24085),\n\tTAU(new WorldArea(3043, 3340, 10, 11, 0), \"South east of the fountain in Falador\",\n\t\tNpcID.TAU, new WorldPoint(3047, 3345, 0), TeleportItems.TAU, RequiredMaterialsByTier.TAU, HotspotObjects.TAU),\n\n\t// Hosidus\n\tBARBARA(new WorldArea(1746, 3531, 10, 11, 0), \"South of Hosidius, near the mill\",\n\t\tNpcID.BARBARA, new WorldPoint(1750, 3534, 0), TeleportItems.BARBARA, RequiredMaterialsByTier.BARBARA, HotspotObjects.BARBARA),\n\tLEELA(new WorldArea(1781, 3589, 9, 8, 0), \"East of the town market in Hosidius\",\n\t\tNpcID.LEELA_10423, new WorldPoint(1785, 3592, 0), TeleportItems.LEELA, RequiredMaterialsByTier.LEELA, HotspotObjects.LEELA, 11794, 11802),\n\tMARIAH(new WorldArea(1762, 3618, 10, 7, 0), \"West of the estate agents in Hosidius\",\n\t\tNpcID.MARIAH, new WorldPoint(1766, 3621, 0), TeleportItems.MARIAH, RequiredMaterialsByTier.MARIAH, HotspotObjects.MARIAH, 11794, 11802),\n\n\t// Varrock\n\tBOB(new WorldArea(3234, 3482, 10, 10, 0), \"North-east Varrock, opposite the church\",\n\t\tNpcID.BOB_10414, new WorldPoint(3238, 3486, 0), TeleportItems.BOB, RequiredMaterialsByTier.BOB, HotspotObjects.BOB, 11797, 11799),\n\tJEFF(new WorldArea(3235, 3445, 10, 12, 0), \"Middle of Varrock, west of the museum\",\n\t\tNpcID.JEFF_10415, new WorldPoint(3239, 3450, 0), TeleportItems.JEFF, RequiredMaterialsByTier.JEFF, HotspotObjects.JEFF, 11789, 11793),\n\tSARAH(new WorldArea(3232, 3381, 8, 7, 0), \"Along the south wall of Varrock\",\n\t\tNpcID.SARAH_10416, new WorldPoint(3235, 3384, 0), TeleportItems.SARAH, RequiredMaterialsByTier.SARAH, HotspotObjects.SARAH);\n\n\tprivate final WorldArea area;\n\tprivate final String hint;\n\tprivate final int npcId;\n\tprivate final WorldPoint location;\n\tprivate final Integer[] ladders;\n\tprivate final TeleportItems teleportItems;\n\tprivate final RequiredMaterialsByTier requiredMaterialsByTier;\n\tprivate final boolean npcUpstairs;\n\tprivate final HotspotObjects hotspotObjects;\n\n\tHome(final WorldArea area, final String hint, final int npcId, final WorldPoint location, final TeleportItems teleportItems,\n\t\tfinal RequiredMaterialsByTier requiredMaterials, final HotspotObjects hotspotObjects, final Integer... ladders)\n\t{\n\t\tthis(area, hint, npcId, location, teleportItems, requiredMaterials, hotspotObjects, false, ladders);\n\t}\n\n\tHome(final WorldArea area, final String hint, final int npcId, final WorldPoint location, final TeleportItems teleportItems,\n\t\tfinal RequiredMaterialsByTier requiredMaterials, final HotspotObjects hotspotObjects, final boolean npcUpstairs, final Integer... ladders)\n\t{\n\t\tthis.area \u003d area;\n\t\tthis.hint \u003d hint;\n\t\tthis.npcId \u003d npcId;\n\t\tthis.location \u003d location;\n\t\tthis.ladders \u003d ladders;\n\t\tthis.teleportItems \u003d teleportItems;\n\t\tthis.hotspotObjects \u003d hotspotObjects;\n\t\tthis.requiredMaterialsByTier \u003d requiredMaterials;\n\t\tthis.npcUpstairs \u003d npcUpstairs;\n\t}\n\n\tString getName()\n\t{\n\t\treturn WordUtils.capitalize(name().toLowerCase());\n\t}\n\n\tprivate static final ImmutableSet\u003cInteger\u003e LADDERS;\n\tstatic\n\t{\n\t\tfinal ImmutableSet.Builder\u003cInteger\u003e b \u003d new ImmutableSet.Builder\u003c\u003e();\n\t\tfor (final Home h : values())\n\t\t{\n\t\t\tb.add(h.getLadders());\n\t\t}\n\t\tLADDERS \u003d b.build();\n\t}\n\n\tstatic boolean isLadder(final int objID)\n\t{\n\t\treturn LADDERS.contains(objID);\n\t}\n}\n","filePath":"src\\main\\java\\thestonedturtle\\mahoganyhomes\\Home.java"},{"fileName":"Hotspot.java","content":"/*\n * Copyright (c) 2020, TheStonedTurtle \u003chttps://github.com/TheStonedTurtle\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage thestonedturtle.mahoganyhomes;\n\nimport com.google.common.collect.ImmutableMap;\nimport com.google.common.collect.ImmutableSet;\nimport javax.annotation.Nullable;\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\n\n@Getter\n@AllArgsConstructor\nenum Hotspot\n{\n\tMAHOGANY_HOMES_HOTSPOT_1(10554,\n\t\tImmutableSet.of(39981, 39989, 39997, 40002, 40007, 40011, 40083, 40156, 40164, 40171, 40296, 40297)),\n\tMAHOGANY_HOMES_HOTSPOT_2(10555,\n\t\tImmutableSet.of(39982, 39990, 39998, 40008, 40084, 40089, 40095, 40157, 40165, 40172, 40287, 40293)),\n\tMAHOGANY_HOMES_HOTSPOT_3(10556,\n\t\tImmutableSet.of(39983, 39991, 39999, 40003, 40012, 40085, 40090, 40096, 40158, 40166, 40173, 40290)),\n\tMAHOGANY_HOMES_HOTSPOT_4(10557,\n\t\tImmutableSet.of(39984, 39992, 40000, 40086, 40091, 40097, 40159, 40167, 40174, 40288, 40291, 40294)),\n\tMAHOGANY_HOMES_HOTSPOT_5(10558,\n\t\tImmutableSet.of(39985, 39993, 40004, 40009, 40013, 40087, 40092, 40160, 40168, 40175, 40286, 40298)),\n\tMAHOGANY_HOMES_HOTSPOT_6(10559,\n\t\tImmutableSet.of(39986, 39994, 40001, 40005, 40010, 40014, 40088, 40093, 40098, 40161, 40169, 40176)),\n\tMAHOGANY_HOMES_HOTSPOT_7(10560,\n\t\tImmutableSet.of(39987, 39995, 40006, 40015, 40094, 40099, 40162, 40170, 40177, 40292, 40295)),\n\tMAHOGANY_HOMES_HOTSPOT_8(10561,\n\t\tImmutableSet.of(39988, 39996, 40163, 40289, 40299)),\n\t;\n\n\tprivate final int varb;\n\tprivate final ImmutableSet\u003cInteger\u003e objectIds;\n\n\tprivate static final ImmutableMap\u003cInteger, Hotspot\u003e HOTSPOT_BY_OBJECT_ID;\n\tstatic\n\t{\n\t\tfinal ImmutableMap.Builder\u003cInteger, Hotspot\u003e objects \u003d new ImmutableMap.Builder\u003c\u003e();\n\t\tfor (final Hotspot hotspot : values())\n\t\t{\n\t\t\thotspot.getObjectIds().forEach(id -\u003e objects.put(id, hotspot));\n\t\t}\n\t\tHOTSPOT_BY_OBJECT_ID \u003d objects.build();\n\t}\n\n\t@Nullable\n\tstatic Hotspot getByObjectId(final int objectId)\n\t{\n\t\treturn HOTSPOT_BY_OBJECT_ID.get(objectId);\n\t}\n\n\tstatic boolean isHotspotObject(final int id)\n\t{\n\t\treturn HOTSPOT_BY_OBJECT_ID.containsKey(id);\n\t}\n}\n","filePath":"src\\main\\java\\thestonedturtle\\mahoganyhomes\\Hotspot.java"},{"fileName":"HotspotObjects.java","content":"/*\n * Copyright (c) 2022, TheStonedTurtle \u003chttps://github.com/TheStonedTurtle\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage thestonedturtle.mahoganyhomes;\n\nimport java.util.Set;\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\n\npublic enum HotspotObjects\n{\n\t// East Ardy\n\tJESS(new HotspotObject(40171, HotspotType.B2),\n\t\tnew HotspotObject(40172, HotspotType.B2),\n\t\tnew HotspotObject(40173, HotspotType.B2),\n\t\tnew HotspotObject(40174, HotspotType.B2),\n\t\tnew HotspotObject(40175, HotspotType.B3),\n\t\tnew HotspotObject(40176, HotspotType.B3),\n\t\tnew HotspotObject(40177, HotspotType.RP),\n\t\tnew HotspotObject(40299, HotspotType.SB)),\n\tNOELLA(new HotspotObject(40156, HotspotType.B2),\n\t\tnew HotspotObject(40157, HotspotType.B2),\n\t\tnew HotspotObject(40158, HotspotType.RP),\n\t\tnew HotspotObject(40159, HotspotType.RP),\n\t\tnew HotspotObject(40160, HotspotType.B2),\n\t\tnew HotspotObject(40161, HotspotType.B3),\n\t\tnew HotspotObject(40162, HotspotType.B3),\n\t\tnew HotspotObject(40163, HotspotType.RP)),\n\tROSS(new HotspotObject(40164, HotspotType.SB),\n\t\tnew HotspotObject(40165, HotspotType.B2),\n\t\tnew HotspotObject(40166, HotspotType.B2),\n\t\tnew HotspotObject(40167, HotspotType.B3),\n\t\tnew HotspotObject(40168, HotspotType.RP),\n\t\tnew HotspotObject(40169, HotspotType.B2),\n\t\tnew HotspotObject(40170, HotspotType.RP)),\n\n\t// Falador\n\tLARRY(new HotspotObject(40297, HotspotType.SB),\n\t\tnew HotspotObject(40095, HotspotType.B2),\n\t\tnew HotspotObject(40096, HotspotType.B2),\n\t\tnew HotspotObject(40097, HotspotType.B3),\n\t\tnew HotspotObject(40298, HotspotType.RP),\n\t\tnew HotspotObject(40098, HotspotType.B3),\n\t\tnew HotspotObject(40099, HotspotType.RP)),\n\tNORMAN(new HotspotObject(40296, HotspotType.SB),\n\t\tnew HotspotObject(40089, HotspotType.RP),\n\t\tnew HotspotObject(40090, HotspotType.B3),\n\t\tnew HotspotObject(40091, HotspotType.B3),\n\t\tnew HotspotObject(40092, HotspotType.B2),\n\t\tnew HotspotObject(40093, HotspotType.B2),\n\t\tnew HotspotObject(40094, HotspotType.B2)),\n\tTAU(new HotspotObject(40083, HotspotType.SB),\n\t\tnew HotspotObject(40084, HotspotType.B3),\n\t\tnew HotspotObject(40085, HotspotType.B3),\n\t\tnew HotspotObject(40086, HotspotType.B2),\n\t\tnew HotspotObject(40087, HotspotType.B2),\n\t\tnew HotspotObject(40088, HotspotType.B2),\n\t\tnew HotspotObject(40295, HotspotType.RP)),\n\n\t// Hosidius\n\tBARBARA(new HotspotObject(40011, HotspotType.RP),\n\t\tnew HotspotObject(40293, HotspotType.SB),\n\t\tnew HotspotObject(40012, HotspotType.B3),\n\t\tnew HotspotObject(40294, HotspotType.B2),\n\t\tnew HotspotObject(40013, HotspotType.B2),\n\t\tnew HotspotObject(40014, HotspotType.B1),\n\t\tnew HotspotObject(40015, HotspotType.B1)),\n\tLEELA(new HotspotObject(40007, HotspotType.B2),\n\t\tnew HotspotObject(40008, HotspotType.B2),\n\t\tnew HotspotObject(40290, HotspotType.SB),\n\t\tnew HotspotObject(40291, HotspotType.B3),\n\t\tnew HotspotObject(40009, HotspotType.B3),\n\t\tnew HotspotObject(40010, HotspotType.RP),\n\t\tnew HotspotObject(40292, HotspotType.B2)),\n\tMARIAH(new HotspotObject(40002, HotspotType.B3),\n\t\tnew HotspotObject(40287, HotspotType.SB),\n\t\tnew HotspotObject(40003, HotspotType.B2),\n\t\tnew HotspotObject(40288, HotspotType.B2),\n\t\tnew HotspotObject(40004, HotspotType.B2),\n\t\tnew HotspotObject(40005, HotspotType.B2),\n\t\tnew HotspotObject(40006, HotspotType.B2),\n\t\tnew HotspotObject(40289, HotspotType.RP)),\n\n\n\t// Varrock\n\tBOB(new HotspotObject(39981, HotspotType.B4),\n\t\tnew HotspotObject(39982, HotspotType.RP),\n\t\tnew HotspotObject(39983, HotspotType.B2),\n\t\tnew HotspotObject(39984, HotspotType.B2),\n\t\tnew HotspotObject(39985, HotspotType.B2),\n\t\tnew HotspotObject(39986, HotspotType.B2),\n\t\tnew HotspotObject(39987, HotspotType.B2),\n\t\tnew HotspotObject(39988, HotspotType.B2)),\n\tJEFF(new HotspotObject(39989, HotspotType.B3),\n\t\tnew HotspotObject(39990, HotspotType.B2),\n\t\tnew HotspotObject(39991, HotspotType.B2),\n\t\tnew HotspotObject(39992, HotspotType.B3),\n\t\tnew HotspotObject(39993, HotspotType.B2),\n\t\tnew HotspotObject(39994, HotspotType.B2),\n\t\tnew HotspotObject(39995, HotspotType.RP),\n\t\tnew HotspotObject(39996, HotspotType.B1)),\n\tSARAH(new HotspotObject(39997, HotspotType.B3),\n\t\tnew HotspotObject(39998, HotspotType.B2),\n\t\tnew HotspotObject(39999, HotspotType.B2),\n\t\tnew HotspotObject(40000, HotspotType.B2),\n\t\tnew HotspotObject(40286, HotspotType.SB),\n\t\tnew HotspotObject(40001, HotspotType.B2))\n\t;\n\n\tpublic final HotspotObject[] objects;\n\n\tHotspotObjects(HotspotObject... objects)\n\t{\n\t\tthis.objects \u003d objects;\n\t}\n\n\tRequiredMaterials getRequiredMaterialsForVarbs(Set\u003cInteger\u003e repairableVarbs)\n\t{\n\t\tfinal RequiredMaterials required \u003d new RequiredMaterials(0, 0, 0, 0);\n\n\t\tfinal int startingVarb \u003d Hotspot.MAHOGANY_HOMES_HOTSPOT_1.getVarb();\n\t\tfor (int i \u003d 0; i \u003c this.objects.length; i++)\n\t\t{\n\t\t\t// hotspotObjects are added in order where it\u0027s index in the array is the offset from the starting varb\n\t\t\tif (!repairableVarbs.contains(startingVarb + i))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfinal HotspotType type \u003d this.objects[i].getType();\n\t\t\tswitch (type.getMaterial())\n\t\t\t{\n\t\t\t\tcase PLANK:\n\t\t\t\t{\n\t\t\t\t\tint n \u003d required.MinPlanks + type.getNumOfMaterial();\n\t\t\t\t\trequired.setMinPlanks(n);\n\t\t\t\t\trequired.setMaxPlanks(n);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase STEEL_BAR:\n\t\t\t\t{\n\t\t\t\t\tint n \u003d required.MinSteelBars + type.getNumOfMaterial();\n\t\t\t\t\trequired.setMinSteelBars(n);\n\t\t\t\t\trequired.setMaxSteelBars(n);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn required;\n\t}\n\n\t@AllArgsConstructor\n\t@Getter\n\tpublic static class HotspotObject\n\t{\n\t\tprivate final int objectId;\n\t\tprivate final HotspotType type;\n\t}\n\n\tpublic enum MaterialType\n\t{\n\t\tPLANK,\n\t\tSTEEL_BAR\n\t}\n\n\t@AllArgsConstructor\n\t@Getter\n\tpublic enum HotspotType\n\t{\n\t\t//Remove \u0026 Build Furniture (1 plank)\n\t\tB1(MaterialType.PLANK, 1),\n\t\t//Remove \u0026 Build Furniture (2 plank)\n\t\tB2(MaterialType.PLANK, 2),\n\t\t//Remove \u0026 Build Furniture (3 plank)\n\t\tB3(MaterialType.PLANK, 3),\n\t\t//Remove \u0026 Build Furniture (4 plank)\n\t\tB4(MaterialType.PLANK, 4),\n\t\t//Repair Furniture (1 plank)\n\t\tRP(MaterialType.PLANK, 1),\n\t\t//Repair Furniture (1 steel bar)\n\t\tSB(MaterialType.STEEL_BAR, 1);\n\n\t\tprivate final MaterialType material;\n\t\tprivate final int numOfMaterial;\n\t}\n}\n","filePath":"src\\main\\java\\thestonedturtle\\mahoganyhomes\\HotspotObjects.java"},{"fileName":"MahoganyHomesConfig.java","content":"/*\n * Copyright (c) 2020, TheStonedTurtle \u003chttps://github.com/TheStonedTurtle\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage thestonedturtle.mahoganyhomes;\n\nimport java.awt.Color;\nimport net.runelite.client.config.Alpha;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\nimport net.runelite.client.config.Range;\n\n@ConfigGroup(MahoganyHomesConfig.GROUP_NAME)\npublic interface MahoganyHomesConfig extends Config\n{\n\tString GROUP_NAME \u003d \"MahoganyHomes\";\n\tString HOME_KEY \u003d \"currentHome\";\n\tString TIER_KEY \u003d \"currentTier\";\n\tString WORLD_MAP_KEY \u003d \"worldMapIcon\";\n\tString HINT_ARROW_KEY \u003d \"displayHintArrows\";\n\tString SESSION_TIMEOUT_KEY \u003d \"sessionTimeout\";\n\tString SHORTEST_PATH_KEY \u003d \"shortestPath\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d WORLD_MAP_KEY,\n\t\tname \u003d \"Display World Map Icon\",\n\t\tdescription \u003d \"Configures whether an icon will be displayed on the world map showing where to go for your current contract\",\n\t\tposition \u003d 0\n\t)\n\tdefault boolean worldMapIcon()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d HINT_ARROW_KEY,\n\t\tname \u003d \"Display Hint Arrows\",\n\t\tdescription \u003d \"Configures whether or not to display the hint arrows\",\n\t\tposition \u003d 1\n\t)\n\tdefault boolean displayHintArrows()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showRequiredMaterials\",\n\t\tname \u003d \"Display Required Materials\",\n\t\tdescription \u003d \"Configures whether or not to display the required materials for your current task\",\n\t\tposition \u003d 2\n\t)\n\tdefault boolean showRequiredMaterials()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"shortestPath\",\n\t\t\tname \u003d \"Use \u0027Shortest Path\u0027 plugin\",\n\t\t\tdescription \u003d \"Draws the shortest path to the assigned house on the map.\u003cbr/\u003e\" +\n\t\t\t\t\t\"The plugin \u0027Shortest Path\u0027 needs to be enabled for this to work\",\n\t\t\tposition \u003d 3\n\t)\n\tdefault boolean useShortestPath()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigSection(\n\t\tname \u003d \"Highlight Options\",\n\t\tdescription \u003d \"Settings related to the highlighting of objects and items\",\n\t\tposition \u003d 100,\n\t\tclosedByDefault \u003d true\n\t)\n\tString highlightSection \u003d \"highlightSection\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"highlightHotspots\",\n\t\tname \u003d \"Highlight Building Hotspots\",\n\t\tdescription \u003d \"Configures whether or not the building hotspots will be highlighted\",\n\t\tsection \u003d highlightSection,\n\t\tposition \u003d 0\n\t)\n\tdefault boolean highlightHotspots()\n\t{\n\t\treturn true;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"highlightHotspotColor\",\n\t\tname \u003d \"Building Hotspot Highlight Color\",\n\t\tdescription \u003d \"Configures the color the hotspots will be highlighted\",\n\t\tsection \u003d highlightSection,\n\t\tposition \u003d 1\n\t)\n\tdefault Color highlightHotspotColor()\n\t{\n\t\treturn new Color(0, 255, 0, 50);\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"highlightStairs\",\n\t\tname \u003d \"Highlight Stairs\",\n\t\tdescription \u003d \"Configures whether or not the stairs will be highlighted\",\n\t\tsection \u003d highlightSection,\n\t\tposition \u003d 2\n\t)\n\tdefault boolean highlightStairs()\n\t{\n\t\treturn true;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"highlightStairsColor\",\n\t\tname \u003d \"Stairs Highlight Color\",\n\t\tdescription \u003d \"Configures the color the stairs will be highlighted\",\n\t\tsection \u003d highlightSection,\n\t\tposition \u003d 3\n\t)\n\tdefault Color highlightStairsColor()\n\t{\n\t\treturn new Color(0, 255, 0, 20);\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"highlightTeleports\",\n\t\tname \u003d \"Highlight Teleport Items\",\n\t\tdescription \u003d \"Configures whether or not the teleport items will be highlighted\",\n\t\tsection \u003d highlightSection,\n\t\tposition \u003d 4\n\t)\n\tdefault boolean highlightTeleports()\n\t{\n\t\treturn true;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"highlightTeleportsColor\",\n\t\tname \u003d \"Teleport Item Highlight Color\",\n\t\tdescription \u003d \"Configures the color your teleports will be highlighted\",\n\t\tsection \u003d highlightSection,\n\t\tposition \u003d 5\n\t)\n\tdefault Color highlightTeleportsColor()\n\t{\n\t\treturn new Color(0, 255, 255, 50);\n\t}\n\n\t@ConfigSection(\n\t\tname \u003d \"Overlay Options\",\n\t\tdescription \u003d \"Settings related to the overlay boxes\",\n\t\tposition \u003d 200,\n\t\tclosedByDefault \u003d true\n\t)\n\tString overlaySection \u003d \"overlaySection\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"textOverlay\",\n\t\tname \u003d \"Display Text Overlay\",\n\t\tdescription \u003d \"Configures whether or not the text overlay will be displayed for your current contract\",\n\t\tsection \u003d overlaySection,\n\t\tposition \u003d 0\n\t)\n\tdefault boolean textOverlay()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showSessionStats\",\n\t\tname \u003d \"Display Session Stats\",\n\t\tdescription \u003d \"Configures whether or not the amount of contracts and the points received from those contracts is displayed inside the overlay\u003cbr/\u003e\" +\n\t\t\t\"\u0027Display Text Overlay\u0027 must be enabled for this to work\",\n\t\tsection \u003d overlaySection,\n\t\tposition \u003d 1\n\t)\n\tdefault boolean showSessionStats()\n\t{\n\t\treturn true;\n\t}\n\n\t@Range(\n\t\tmin \u003d 1,\n\t\tmax \u003d 60\n\t)\n\t@ConfigItem(\n\t\tkeyName \u003d SESSION_TIMEOUT_KEY,\n\t\tname \u003d \"Session Timeout\",\n\t\tdescription \u003d \"Configures how many minutes must pass before the session timeouts after not having any activity.\u003cbr/\u003e\" +\n\t\t\t\"Value must be between 1 and 60 minute(s)\",\n\t\tsection \u003d overlaySection,\n\t\tposition \u003d 2\n\t)\n\tdefault int sessionTimeout()\n\t{\n\t\treturn 5;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"checkSupplies\",\n\t\tname \u003d \"Check Supplies\",\n\t\tdescription \u003d \"Checks if you have enough supplies in your inventory to complete your current contract.\u003cbr/\u003e\" +\n            \"If the plank sack is in your inventory, this will include planks of the correct type that are stored within it.\",\n\t\tposition \u003d 10\n\t)\n\tdefault boolean checkSupplies()\n\t{\n\t\treturn true;\n\t}\n}\n","filePath":"src\\main\\java\\thestonedturtle\\mahoganyhomes\\MahoganyHomesConfig.java"},{"fileName":"MahoganyHomesHighlightOverlay.java","content":"/*\n * Copyright (c) 2020, TheStonedTurtle \u003chttps://github.com/TheStonedTurtle\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage thestonedturtle.mahoganyhomes;\n\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport javax.inject.Inject;\nimport net.runelite.api.Player;\nimport net.runelite.api.TileObject;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\n\nclass MahoganyHomesHighlightOverlay extends Overlay\n{\n\tpublic static final Color CLICKBOX_BORDER_COLOR \u003d Color.ORANGE;\n\tpublic static final Color CLICKBOX_HOVER_BORDER_COLOR \u003d CLICKBOX_BORDER_COLOR.darker();\n\n\tprivate final MahoganyHomesPlugin plugin;\n\tprivate final MahoganyHomesConfig config;\n\n\t@Inject\n\tMahoganyHomesHighlightOverlay(MahoganyHomesPlugin plugin, MahoganyHomesConfig config)\n\t{\n\t\tsuper(plugin);\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tfinal Home home \u003d plugin.getCurrentHome();\n\t\tfinal Player player \u003d plugin.getClient().getLocalPlayer();\n\t\tif (plugin.isPluginTimedOut() || home \u003d\u003d null || player \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\t// Player is not at the home yet, do not render anything\n\t\tif (plugin.distanceBetween(home.getArea(), plugin.getClient().getLocalPlayer().getWorldLocation()) \u003e 0)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tfinal int playerPlane \u003d plugin.getClient().getTopLevelWorldView().getPlane();\n\t\tint countOnFloor \u003d 0;\n\t\tfor (TileObject gameObject : plugin.getObjectsToMark())\n\t\t{\n\t\t\tif (gameObject.getPlane() !\u003d playerPlane)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (plugin.distanceBetween(home.getArea(), gameObject.getWorldLocation()) \u003e 0)\n\t\t\t{\n\t\t\t\t// Object not inside area for this house.\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfinal Hotspot spot \u003d Hotspot.getByObjectId(gameObject.getId());\n\t\t\tif (spot \u003d\u003d null)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Do not highlight if it doesn\u0027t require attention\n\t\t\tif (!plugin.doesHotspotRequireAttention(spot.getVarb()))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tcountOnFloor++;\n\t\t\t// Do not highlight the hotspot if the config is disabled. Because of countOnFloor we still need this loop.\n\t\t\tif (!config.highlightHotspots())\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfinal net.runelite.api.Point mousePosition \u003d plugin.getClient().getMouseCanvasPosition();\n\t\t\tOverlayUtil.renderHoverableArea(graphics, gameObject.getClickbox(), mousePosition,\n\t\t\t\tconfig.highlightHotspotColor(), CLICKBOX_BORDER_COLOR, CLICKBOX_HOVER_BORDER_COLOR);\n\t\t}\n\n\t\tif (config.highlightStairs())\n\t\t{\n\t\t\tfor (TileObject gameObject : plugin.getLaddersToMark())\n\t\t\t{\n\t\t\t\t// Object is on a different floor somehow?\n\t\t\t\tif (gameObject.getPlane() !\u003d playerPlane)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Object not inside area for this house.\n\t\t\t\tif (plugin.distanceBetween(home.getArea(), gameObject.getWorldLocation()) \u003e 0)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfinal boolean onSameFloorAsNpc \u003d home.isNpcUpstairs() ? playerPlane \u003e 0 : playerPlane \u003d\u003d 0;\n\t\t\t\tfinal int remainingTasks \u003d plugin.getCompletedCount();\n\n\t\t\t\t// If all remaining tasks are on this floor there\u0027s no need to highlight stairs\n\t\t\t\t// However if we\u0027re not on the same floor we need to highlight the stairs when there\u0027s no tasks left\n\t\t\t\tif (countOnFloor \u003d\u003d remainingTasks \u0026\u0026 (onSameFloorAsNpc || countOnFloor \u003e 0))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfinal net.runelite.api.Point mousePosition \u003d plugin.getClient().getMouseCanvasPosition();\n\t\t\t\tOverlayUtil.renderHoverableArea(graphics, gameObject.getClickbox(), mousePosition,\n\t\t\t\t\tconfig.highlightStairsColor(), CLICKBOX_BORDER_COLOR, CLICKBOX_HOVER_BORDER_COLOR);\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n}\n","filePath":"src\\main\\java\\thestonedturtle\\mahoganyhomes\\MahoganyHomesHighlightOverlay.java"},{"fileName":"MahoganyHomesOverlay.java","content":"/*\n * Copyright (c) 2020, TheStonedTurtle \u003chttps://github.com/TheStonedTurtle\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage thestonedturtle.mahoganyhomes;\n\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport javax.inject.Inject;\nimport static net.runelite.api.MenuAction.RUNELITE_OVERLAY;\nimport static net.runelite.api.MenuAction.RUNELITE_OVERLAY_CONFIG;\nimport net.runelite.api.Player;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport static net.runelite.client.ui.overlay.OverlayManager.OPTION_CONFIGURE;\nimport net.runelite.client.ui.overlay.OverlayMenuEntry;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\nimport net.runelite.client.ui.overlay.components.LineComponent;\n\nclass MahoganyHomesOverlay extends OverlayPanel\n{\n\tstatic final String RESET_SESSION_OPTION \u003d \"Reset\";\n\tstatic final String CLEAR_OPTION \u003d \"Clear\";\n\tstatic final String TIMEOUT_OPTION \u003d \"Timeout\";\n\n\tprivate static final String UNICODE_CHECK_MARK \u003d \"\\u2713\";\n\tprivate static final String UNICODE_BALLOT_X \u003d \"\\u2717\";\n\n\tprivate final MahoganyHomesPlugin plugin;\n\tprivate final MahoganyHomesConfig config;\n\n\t@Inject\n\tMahoganyHomesOverlay(MahoganyHomesPlugin plugin, MahoganyHomesConfig config)\n\t{\n\t\tsuper(plugin);\n\t\tsetPosition(OverlayPosition.TOP_LEFT);\n\t\tsetPriority(OverlayPriority.LOW);\n\t\tsetLayer(OverlayLayer.UNDER_WIDGETS);\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\n\t\tgetMenuEntries().add(new OverlayMenuEntry(RUNELITE_OVERLAY_CONFIG, OPTION_CONFIGURE, \"Mahogany Homes Overlay\"));\n\t\tgetMenuEntries().add(new OverlayMenuEntry(RUNELITE_OVERLAY, TIMEOUT_OPTION, \"Mahogany Homes Plugin\"));\n\t\tgetMenuEntries().add(new OverlayMenuEntry(RUNELITE_OVERLAY, RESET_SESSION_OPTION, \"Session Data\"));\n\t\tgetMenuEntries().add(new OverlayMenuEntry(RUNELITE_OVERLAY, CLEAR_OPTION, \"Contract\"));\n\t}\n\n\t// Adds a line to the panel describing a material. type is the\n\t// un-pluralized name of the material, min and max are the range\n\t// required, and have is the number in the player\u0027s inventory.\n\tvoid addMaterialLine(String type, int min, int max, int have)\n\t{\n\t\tif (min \u003d\u003d 0 \u0026\u0026 max \u003d\u003d 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tLineComponent.LineComponentBuilder line \u003d LineComponent.builder();\n\n\t\tif (min \u003d\u003d max)\n\t\t{\n\t\t\tString plural \u003d min \u003e 1 ? \"s\" : \"\";\n\t\t\tline \u003d line.left(String.format(\"%d %s%s\", min, type, plural));\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Always pluralize by adding an \"s\"\n\t\t\tline \u003d line.left(String.format(\"%d - %d %ss\", min, max, type));\n\t\t}\n\n\t\t// If asked for, add a colored symbol on the right depicting if\n\t\t// the player has enough supplies.\n\t\tif (config.checkSupplies())\n\t\t{\n\t\t\tif (have \u003e\u003d max)\n\t\t\t{\n\t\t\t\tline \u003d line.right(UNICODE_CHECK_MARK).rightColor(Color.GREEN);\n\t\t\t}\n\t\t\telse if (have \u003e\u003d min)\n\t\t\t{\n\t\t\t\t// Player has between max and min, so it\u0027s not\n\t\t\t\t// certain if they have enough.\n\t\t\t\tline \u003d line.right(\"?\").rightColor(Color.YELLOW);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tline \u003d line.right(UNICODE_BALLOT_X).rightColor(Color.RED);\n\t\t\t}\n\t\t\t// Ensure font used to render symbols properly across platforms.\n\t\t\tline \u003d line.rightFont(FontManager.getDefaultFont());\n\t\t}\n\t\tpanelComponent.getChildren().add(line.build());\n\t}\n\n\t// Adds lines to the panel describing the materials required.\n\tvoid addRequiredMaterials(RequiredMaterials mats)\n\t{\n\t\tif (mats \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\taddMaterialLine(\"Plank\", mats.MinPlanks, mats.MaxPlanks, plugin.getNumPlanksInInventory());\n\t\taddMaterialLine(\"Steel Bar\", mats.MinSteelBars, mats.MaxSteelBars, plugin.getNumSteelBarsInInventory());\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tfinal Home home \u003d plugin.getCurrentHome();\n\t\tfinal Player player \u003d plugin.getClient().getLocalPlayer();\n\t\tif (plugin.isPluginTimedOut() || !config.textOverlay() || player \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (home !\u003d null)\n\t\t{\n\t\t\taddLine(home.getName());\n\t\t\taddLine(home.getHint());\n\n\t\t\tif (plugin.distanceBetween(home.getArea(), player.getWorldLocation()) \u003e 0)\n\t\t\t{\n\t\t\t\tif (config.showRequiredMaterials() \u0026\u0026 plugin.getContractTier() \u003e 0)\n\t\t\t\t{\n\t\t\t\t\taddLine(\"\");\n\n\t\t\t\t\taddRequiredMaterials(home.getRequiredMaterialsByTier().getByTier(plugin.getContractTier()));\n\t\t\t\t}\n\n\t\t\t\tif (config.worldMapIcon())\n\t\t\t\t{\n\t\t\t\t\taddLine(\"\");\n\t\t\t\t\taddLine(\"Click the house icon on your world map to see where to go\");\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (config.showRequiredMaterials() \u0026\u0026 plugin.getContractTier() \u003e 0)\n\t\t\t\t{\n\t\t\t\t\tfinal RequiredMaterials requiredMaterials \u003d home.getHotspotObjects().getRequiredMaterialsForVarbs(plugin.getRepairableVarbs());\n\t\t\t\t\t// We only want to add an empty line if there\u0027s something to be displayed\n\t\t\t\t\tif (requiredMaterials.MinPlanks \u003e 0 || requiredMaterials.MinSteelBars \u003e 0)\n\t\t\t\t\t{\n\t\t\t\t\t\taddLine(\"\");\n\t\t\t\t\t}\n\n\t\t\t\t\taddRequiredMaterials(requiredMaterials);\n\t\t\t\t}\n\n\t\t\t\taddLine(\"\");\n\t\t\t\tfinal int count \u003d plugin.getCompletedCount();\n\t\t\t\tif (count \u003e 0)\n\t\t\t\t{\n\t\t\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t\t\t.left(count + \" task(s) remaining\")\n\t\t\t\t\t\t.leftColor(Color.RED)\n\t\t\t\t\t\t.build());\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t\t\t.left(\"All tasks completed, speak to \" + home.getName())\n\t\t\t\t\t\t.leftColor(Color.GREEN)\n\t\t\t\t\t\t.build());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (config.showSessionStats() \u0026\u0026 plugin.getSessionContracts() \u003e 0)\n\t\t{\n\t\t\tif (home !\u003d null)\n\t\t\t{\n\t\t\t\taddLine(\"\");\n\t\t\t}\n\t\t\taddLine(\"Contracts Done: \" + plugin.getSessionContracts());\n\t\t\taddLine(\"Points Earned: \" + plugin.getSessionPoints());\n\t\t}\n\n\t\treturn super.render(graphics);\n\t}\n\n\tprivate void addLine(final String left)\n\t{\n\t\tpanelComponent.getChildren().add(LineComponent.builder().left(left).build());\n\t}\n}\n","filePath":"src\\main\\java\\thestonedturtle\\mahoganyhomes\\MahoganyHomesOverlay.java"},{"fileName":"MahoganyHomesPlugin.java","content":"package thestonedturtle.mahoganyhomes;\n\nimport com.google.common.annotations.VisibleForTesting;\nimport com.google.inject.Provides;\nimport java.awt.image.BufferedImage;\nimport java.time.Duration;\nimport java.time.Instant;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Optional;\nimport java.util.Set;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\nimport java.util.stream.Collectors;\nimport javax.inject.Inject;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameObject;\nimport net.runelite.api.GameState;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.ItemContainer;\nimport net.runelite.api.ItemID;\nimport net.runelite.api.NPC;\nimport net.runelite.api.coords.WorldArea;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GameObjectDespawned;\nimport net.runelite.api.events.GameObjectSpawned;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.ItemContainerChanged;\nimport net.runelite.api.events.UsernameChanged;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.api.gameval.VarbitID;\nimport net.runelite.api.widgets.ComponentID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.events.OverlayMenuClicked;\nimport net.runelite.client.events.PluginMessage;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.ui.overlay.worldmap.WorldMapPointManager;\nimport net.runelite.client.util.ImageUtil;\nimport net.runelite.client.util.Text;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Mahogany Homes\"\n)\npublic class MahoganyHomesPlugin extends Plugin\n{\n\t@VisibleForTesting\n\tstatic final Pattern CONTRACT_PATTERN \u003d Pattern.compile(\"(Please could you g|G)o see (\\\\w*)[ ,][\\\\w\\\\s,-]*[?.] You can get another job once you have furnished \\\\w* home\\\\.\");\n\t@VisibleForTesting\n\tstatic final Pattern REMINDER_PATTERN \u003d Pattern.compile(\"You\u0027re currently on an? (\\\\w*) Contract\\\\. Go see (\\\\w*)[ ,][\\\\w\\\\s,-]*\\\\. You can get another job once you have furnished \\\\w* home\\\\.\");\n\tprivate static final Pattern CONTRACT_FINISHED \u003d Pattern.compile(\"You have completed [\\\\d,]* contracts with a total of [\\\\d,]* points?\\\\.\");\n\tprivate static final Pattern CONTRACT_ASSIGNED \u003d Pattern.compile(\"(\\\\w*) Contract: Go see [\\\\w\\\\s,-]*\\\\.\");\n\tprivate static final Pattern REQUEST_CONTACT_TIER \u003d Pattern.compile(\"Could I have an? (\\\\w*) contract please\\\\?\");\n\n\tprivate static final List\u003cInteger\u003e PLANK_IDS \u003d Arrays.asList(ItemID.PLANK, ItemID.OAK_PLANK, ItemID.TEAK_PLANK, ItemID.MAHOGANY_PLANK);\n\n\t@Getter\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Inject\n\tprivate MahoganyHomesConfig config;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate MahoganyHomesOverlay textOverlay;\n\n\t@Inject\n\tprivate MahoganyHomesHighlightOverlay highlightOverlay;\n\n\t@Inject\n\tprivate TeleportItemOverlay teleportItemOverlay;\n\n\t@Inject\n\tprivate WorldMapPointManager worldMapPointManager;\n\n\t@Inject\n\tprivate EventBus eventBus;\n\n\t@Provides\n\tMahoganyHomesConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(MahoganyHomesConfig.class);\n\t}\n\n\t@Getter\n\tprivate final List\u003cGameObject\u003e objectsToMark \u003d new ArrayList\u003c\u003e();\n\t@Getter\n\tprivate final List\u003cGameObject\u003e laddersToMark \u003d new ArrayList\u003c\u003e();\n\t// Varb values: 0\u003ddefault, 1\u003dNeeds repair, 2\u003dRepaired, 3\u003dRemove 4\u003dBulld 5-8\u003dBuilt Tiers\n\tprivate final HashMap\u003cInteger, Integer\u003e varbMap \u003d new HashMap\u003c\u003e();\n\n\tprivate BufferedImage mapIcon;\n\tprivate BufferedImage mapArrow;\n\n\t@Getter\n\tprivate Home currentHome;\n\tprivate boolean varbChange;\n    private boolean plankSackVarbChange;\n\tprivate boolean wasTimedOut;\n\t@Getter\n\tprivate int contractTier \u003d 0;\n\n\t@Getter\n\tpublic TeleportItem teleportItem;\n\n\t@Getter\n\tprivate int numPlanksInInventory \u003d 0;\n\t@Getter\n\tprivate int numSteelBarsInInventory \u003d 0;\n\n\t// Used to auto disable plugin if nothing has changed recently.\n\tprivate Instant lastChanged;\n\tprivate int lastCompletedCount \u003d -1;\n\n\t@Getter\n\tprivate int sessionContracts \u003d 0;\n\t@Getter\n\tprivate int sessionPoints \u003d 0;\n\n\tprivate Duration pluginTimeoutDuration \u003d Duration.ofMinutes(5);\n\n\t@Override\n\tpublic void startUp()\n\t{\n\t\toverlayManager.add(textOverlay);\n\t\toverlayManager.add(highlightOverlay);\n\t\toverlayManager.add(teleportItemOverlay);\n\t\tif (client.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tclientThread.invoke(this::loadFromConfig);\n\t\t\tclientThread.invoke(this::updateVarbMap);\n\t\t}\n\t\tlastChanged \u003d Instant.now();\n\t\tlastCompletedCount \u003d 0;\n\t\tpluginTimeoutDuration \u003d Duration.ofMinutes(config.sessionTimeout());\n\t}\n\n\t@Override\n\tpublic void shutDown()\n\t{\n\t\toverlayManager.remove(textOverlay);\n\t\toverlayManager.remove(highlightOverlay);\n\t\toverlayManager.remove(teleportItemOverlay);\n\t\tworldMapPointManager.removeIf(MahoganyHomesWorldPoint.class::isInstance);\n\t\tclient.clearHintArrow();\n\t\tvarbMap.clear();\n\t\tobjectsToMark.clear();\n\t\tladdersToMark.clear();\n\t\tcurrentHome \u003d null;\n\t\tmapIcon \u003d null;\n\t\tmapArrow \u003d null;\n\t\tteleportItem \u003d null;\n\t\tlastChanged \u003d null;\n\t\tlastCompletedCount \u003d -1;\n\t\tcontractTier \u003d 0;\n\t\tnumPlanksInInventory \u003d 0;\n\t\tnumSteelBarsInInventory \u003d 0;\n\t\twasTimedOut \u003d false;\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged c)\n\t{\n\t\tif (!c.getGroup().equals(MahoganyHomesConfig.GROUP_NAME))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (c.getKey().equals(MahoganyHomesConfig.WORLD_MAP_KEY))\n\t\t{\n\t\t\tworldMapPointManager.removeIf(MahoganyHomesWorldPoint.class::isInstance);\n\t\t\tif (config.worldMapIcon() \u0026\u0026 currentHome !\u003d null)\n\t\t\t{\n\t\t\t\tworldMapPointManager.add(new MahoganyHomesWorldPoint(currentHome.getLocation(), this));\n\t\t\t}\n\t\t}\n\t\telse if (c.getKey().equals(MahoganyHomesConfig.HINT_ARROW_KEY))\n\t\t{\n\t\t\tclient.clearHintArrow();\n\t\t\tif (client.getLocalPlayer() !\u003d null)\n\t\t\t{\n\t\t\t\trefreshHintArrow(client.getLocalPlayer().getWorldLocation());\n\t\t\t}\n\t\t}\n\t\telse if (c.getKey().equals(MahoganyHomesConfig.SESSION_TIMEOUT_KEY))\n\t\t{\n\t\t\tpluginTimeoutDuration \u003d Duration.ofMinutes(config.sessionTimeout());\n\t\t}\n\t\telse if (c.getKey().equals(MahoganyHomesConfig.SHORTEST_PATH_KEY))\n\t\t{\n\n\t\t\tif (config.useShortestPath() \u0026\u0026 currentHome !\u003d null \u0026\u0026 client.getLocalPlayer() !\u003d null)\n\t\t\t{\n\t\t\t\tsetShortestPath(client.getLocalPlayer().getWorldLocation(), currentHome.getLocation());\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onVarbitChanged(VarbitChanged event)\n\t{\n\t\t// Defer to game tick for better performance\n\t\tvarbChange \u003d true;\n        switch (event.getVarbitId())\n        {   // Limit unnecessary resource recalculations\n            // if the varbit isn\u0027t a plank sack value\n            case VarbitID.PLANK_SACK_PLAIN:\n            case VarbitID.PLANK_SACK_OAK:\n            case VarbitID.PLANK_SACK_TEAK:\n            case VarbitID.PLANK_SACK_MAHOGANY:\n                plankSackVarbChange \u003d true;\n        }\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged e)\n\t{\n\t\tif (e.getGameState() \u003d\u003d GameState.LOADING)\n\t\t{\n\t\t\tobjectsToMark.clear();\n\t\t\tladdersToMark.clear();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onUsernameChanged(UsernameChanged e)\n\t{\n\t\tloadFromConfig();\n\t}\n\n\t@Subscribe\n\tpublic void onGameObjectSpawned(GameObjectSpawned event)\n\t{\n\t\tprocessGameObjects(event.getGameObject(), null);\n\t}\n\n\t@Subscribe\n\tpublic void onGameObjectDespawned(GameObjectDespawned event)\n\t{\n\t\tprocessGameObjects(null, event.getGameObject());\n\t}\n\n\t@Subscribe\n\tpublic void onOverlayMenuClicked(OverlayMenuClicked e)\n\t{\n\t\tif (!e.getOverlay().equals(textOverlay))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (e.getEntry().getOption().equals(MahoganyHomesOverlay.CLEAR_OPTION))\n\t\t{\n\t\t\tsetCurrentHome(null);\n\t\t\tupdateConfig();\n\t\t\tlastChanged \u003d null;\n\t\t}\n\n\t\tif (e.getEntry().getOption().equals(MahoganyHomesOverlay.TIMEOUT_OPTION))\n\t\t{\n\t\t\tlastChanged \u003d Instant.now().minus(pluginTimeoutDuration);\n\t\t\t// Remove worldPoint and clear hint arrow when plugin times out\n\t\t\tworldMapPointManager.removeIf(MahoganyHomesWorldPoint.class::isInstance);\n\t\t\tclient.clearHintArrow();\n\t\t\twasTimedOut \u003d true;\n\t\t}\n\n\t\tif (e.getEntry().getOption().equals(MahoganyHomesOverlay.RESET_SESSION_OPTION))\n\t\t{\n\t\t\tsessionContracts \u003d 0;\n\t\t\tsessionPoints \u003d 0;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick t)\n\t{\n\t\tif (contractTier \u003d\u003d 0 || currentHome \u003d\u003d null)\n\t\t{\n\t\t\tcheckForContractTierDialog();\n\t\t}\n\n\t\tcheckForAssignmentDialog();\n\n\t\tif (currentHome \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (varbChange)\n\t\t{\n\t\t\tvarbChange \u003d false;\n\t\t\tupdateVarbMap();\n\n\t\t\t// If we couldn\u0027t find their contract tier recalculate it when they get close\n\t\t\tif (contractTier \u003d\u003d 0)\n\t\t\t{\n\t\t\t\tcalculateContractTier();\n\t\t\t}\n\n\t\t\tfinal int completed \u003d getCompletedCount();\n\t\t\tif (completed !\u003d lastCompletedCount)\n\t\t\t{\n\t\t\t\tif (wasTimedOut)\n\t\t\t\t{\n\t\t\t\t\t// Refreshes hint arrow and world map icon if necessary\n\t\t\t\t\tsetCurrentHome(currentHome);\n\t\t\t\t\tupdateVarbMap();\n\t\t\t\t\twasTimedOut \u003d false;\n\t\t\t\t}\n\n\t\t\t\tlastCompletedCount \u003d completed;\n\t\t\t\tlastChanged \u003d Instant.now();\n\t\t\t}\n\t\t}\n\n\t\t// The plugin automatically disables after 5 minutes of inactivity.\n\t\tif (isPluginTimedOut())\n\t\t{\n\t\t\tif (!wasTimedOut)\n\t\t\t{\n\t\t\t\t// Remove worldPoint and clear hint arrow when plugin times out\n\t\t\t\tworldMapPointManager.removeIf(MahoganyHomesWorldPoint.class::isInstance);\n\t\t\t\tclient.clearHintArrow();\n\t\t\t}\n\t\t\twasTimedOut \u003d true;\n\t\t\treturn;\n\t\t}\n\n\t\tWorldPoint playerLocation \u003d client.getLocalPlayer().getWorldLocation();\n\n\t\trefreshHintArrow(playerLocation);\n\t\trefreshTeleportItem(playerLocation);\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage e)\n\t{\n\t\tif (!e.getType().equals(ChatMessageType.GAMEMESSAGE))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal Matcher matcher \u003d CONTRACT_ASSIGNED.matcher(Text.removeTags(e.getMessage()));\n\t\tif (matcher.matches())\n\t\t{\n\t\t\tfinal String type \u003d matcher.group(1).toLowerCase();\n\t\t\tsetContactTierFromString(type);\n\t\t\tupdateResourcesInInventory();\n\t\t}\n\n\t\tif (CONTRACT_FINISHED.matcher(Text.removeTags(e.getMessage())).matches())\n\t\t{\n\t\t\tsessionContracts++;\n\t\t\tsessionPoints +\u003d getPointsForCompletingTask();\n\t\t\tsetCurrentHome(null);\n\t\t\tupdateConfig();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onItemContainerChanged(ItemContainerChanged event)\n\t{\n\t\tif (contractTier \u003d\u003d 0 || isPluginTimedOut())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (event.getContainerId() \u003d\u003d InventoryID.INVENTORY.getId())\n\t\t{\n\t\t\tupdateResourcesInInventory();\n\t\t}\n\t}\n\n\n\tprivate void checkForContractTierDialog()\n\t{\n\t\tfinal Widget dialog \u003d client.getWidget(ComponentID.DIALOG_PLAYER_TEXT);\n\t\tif (dialog \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal String text \u003d Text.sanitizeMultilineText(dialog.getText());\n\t\tfinal Matcher matcher \u003d REQUEST_CONTACT_TIER.matcher(text);\n\t\tif (matcher.matches())\n\t\t{\n\t\t\tfinal String type \u003d matcher.group(1).toLowerCase();\n\t\t\tsetContactTierFromString(type);\n\t\t\tupdateResourcesInInventory();\n\t\t}\n\t}\n\n\tprivate void setContactTierFromString (String tier)\n\t{\n\t\tswitch (tier)\n\t\t{\n\t\t\tcase \"beginner\":\n\t\t\t\tcontractTier \u003d 1;\n\t\t\t\tbreak;\n\t\t\tcase \"novice\":\n\t\t\t\tcontractTier \u003d 2;\n\t\t\t\tbreak;\n\t\t\tcase \"adept\":\n\t\t\t\tcontractTier \u003d 3;\n\t\t\t\tbreak;\n\t\t\tcase \"expert\":\n\t\t\t\tcontractTier \u003d 4;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Check for NPC dialog assigning or reminding us of a contract\n\tprivate void checkForAssignmentDialog()\n\t{\n\t\tfinal Widget dialog \u003d client.getWidget(ComponentID.DIALOG_NPC_TEXT);\n\t\tif (dialog \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal String npcText \u003d Text.sanitizeMultilineText(dialog.getText());\n\t\tfinal Matcher startContractMatcher \u003d CONTRACT_PATTERN.matcher(npcText);\n\t\tfinal Matcher reminderContract \u003d REMINDER_PATTERN.matcher(npcText);\n\t\tString name \u003d null;\n\t\tint tier \u003d -1;\n\t\tif (startContractMatcher.matches())\n\t\t{\n\t\t\tname \u003d startContractMatcher.group(2);\n\t\t}\n\t\telse if (reminderContract.matches())\n\t\t{\n\t\t\tname \u003d reminderContract.group(2);\n\t\t\ttier \u003d getTierByText(reminderContract.group(1));\n\t\t}\n\n\t\tif (name !\u003d null)\n\t\t{\n\t\t\t// They may have asked for a contract but already had one, check the configs\n\t\t\tif (contractTier \u003d\u003d 0)\n\t\t\t{\n\t\t\t\tloadFromConfig();\n\t\t\t\t// If the config matches the assigned value then do nothing\n\t\t\t\tif (currentHome !\u003d null \u0026\u0026 currentHome.getName().equalsIgnoreCase(name))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If we could parse the tier from the message (only for reminders) make sure the current tier matches it\n\t\t\t// update the tier and config with the parsed value\n\t\t\tif (tier !\u003d -1)\n\t\t\t{\n\t\t\t\tcontractTier \u003d tier;\n\t\t\t}\n\t\t\tupdateResourcesInInventory();\n\n\t\t\tfor (final Home h : Home.values())\n\t\t\t{\n\t\t\t\tif (h.getName().equalsIgnoreCase(name) \u0026\u0026 (currentHome !\u003d h || isPluginTimedOut()))\n\t\t\t\t{\n\t\t\t\t\tsetCurrentHome(h);\n\t\t\t\t\tupdateConfig();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void setCurrentHome(final Home h)\n\t{\n\t\tcurrentHome \u003d h;\n\t\tclient.clearHintArrow();\n\t\tlastChanged \u003d Instant.now();\n\t\tlastCompletedCount \u003d 0;\n\t\tvarbMap.clear();\n\n\t\tif (currentHome \u003d\u003d null)\n\t\t{\n\t\t\tworldMapPointManager.removeIf(MahoganyHomesWorldPoint.class::isInstance);\n\t\t\tcontractTier \u003d 0;\n\t\t\tteleportItem \u003d null;\n\t\t\tnumPlanksInInventory \u003d 0;\n\t\t\tnumSteelBarsInInventory \u003d 0;\n\t\t\treturn;\n\t\t}\n\n\t\tif (config.worldMapIcon())\n\t\t{\n\t\t\tworldMapPointManager.removeIf(MahoganyHomesWorldPoint.class::isInstance);\n\t\t\tworldMapPointManager.add(new MahoganyHomesWorldPoint(h.getLocation(), this));\n\t\t}\n\n\t\tif (config.useShortestPath() \u0026\u0026 client.getLocalPlayer() !\u003d null)\n\t\t{\n\t\t\tWorldPoint playerWp \u003d client.getLocalPlayer().getWorldLocation();\n\t\t\tsetShortestPath(playerWp, h.getLocation());\n\t\t}\n\n\t\tif (config.displayHintArrows() \u0026\u0026 client.getLocalPlayer() !\u003d null)\n\t\t{\n\t\t\trefreshHintArrow(client.getLocalPlayer().getWorldLocation());\n\t\t}\n\n\t\tif (config.highlightTeleports() \u0026\u0026 client.getLocalPlayer() !\u003d null)\n\t\t{\n\t\t\tclientThread.invoke(this::updateTeleportItem);\n\t\t}\n\t}\n\n\tprivate void updateTeleportItem()\n\t{\n\t\tteleportItem \u003d currentHome.getTeleportItems().getClosestTeleportItemOnPlayer(client);\n\t}\n\n\tprivate void processGameObjects(final GameObject cur, final GameObject prev)\n\t{\n\t\tobjectsToMark.remove(prev);\n\t\tladdersToMark.remove(prev);\n\n\t\tif (cur \u003d\u003d null || (!Hotspot.isHotspotObject(cur.getId()) \u0026\u0026 !Home.isLadder(cur.getId())))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (Hotspot.isHotspotObject(cur.getId()))\n\t\t{\n\t\t\tobjectsToMark.add(cur);\n\t\t\treturn;\n\t\t}\n\n\t\tif (Home.isLadder(cur.getId()))\n\t\t{\n\t\t\tladdersToMark.add(cur);\n\t\t}\n\t}\n\n\tprivate void updateVarbMap()\n\t{\n\t\tvarbMap.clear();\n\n\t\tfor (final Hotspot spot : Hotspot.values())\n\t\t{\n\t\t\tvarbMap.put(spot.getVarb(), client.getVarbitValue(spot.getVarb()));\n\t\t}\n        if (plankSackVarbChange)\n        {\n            updateResourcesInInventory();\n            plankSackVarbChange \u003d false;\n        }\n\t}\n\n\tprivate void loadFromConfig()\n\t{\n\t\tfinal String group \u003d MahoganyHomesConfig.GROUP_NAME + \".\" + client.getAccountHash();\n\t\tfinal String name \u003d configManager.getConfiguration(group, MahoganyHomesConfig.HOME_KEY);\n\t\tif (name \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\ttry\n\t\t{\n\t\t\tfinal Home h \u003d Home.valueOf(name.trim().toUpperCase());\n\t\t\tsetCurrentHome(h);\n\t\t}\n\t\tcatch (IllegalArgumentException e)\n\t\t{\n\t\t\tlog.warn(\"Stored unrecognized home: {}\", name);\n\t\t\tcurrentHome \u003d null;\n\t\t\tconfigManager.setConfiguration(group, MahoganyHomesConfig.HOME_KEY, null);\n\t\t}\n\n\t\t// Get contract tier from config if home was loaded successfully\n\t\tif (currentHome \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal String tier \u003d configManager.getConfiguration(group, MahoganyHomesConfig.TIER_KEY);\n\t\tif (tier \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\ttry\n\t\t{\n\t\t\tcontractTier \u003d Integer.parseInt(tier);\n\t\t}\n\t\tcatch (IllegalArgumentException e)\n\t\t{\n\t\t\tlog.warn(\"Stored unrecognized contract tier: {}\", tier);\n\t\t\tcontractTier \u003d 0;\n\t\t\tconfigManager.unsetConfiguration(group, MahoganyHomesConfig.TIER_KEY);\n\t\t}\n\t\tupdateResourcesInInventory();\n\t}\n\n\tprivate void updateConfig()\n\t{\n\t\tfinal String group \u003d MahoganyHomesConfig.GROUP_NAME + \".\" + client.getAccountHash();\n\t\tif (currentHome \u003d\u003d null)\n\t\t{\n\t\t\tconfigManager.unsetConfiguration(group, MahoganyHomesConfig.HOME_KEY);\n\t\t\tconfigManager.unsetConfiguration(group, MahoganyHomesConfig.TIER_KEY);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconfigManager.setConfiguration(group, MahoganyHomesConfig.HOME_KEY, currentHome.getName());\n\t\t\tconfigManager.setConfiguration(group, MahoganyHomesConfig.TIER_KEY, contractTier);\n\t\t}\n\t}\n\n\tprivate void refreshHintArrow(final WorldPoint playerPos)\n\t{\n\t\tclient.clearHintArrow();\n\t\tif (currentHome \u003d\u003d null || !config.displayHintArrows())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (distanceBetween(currentHome.getArea(), playerPos) \u003e 0)\n\t\t{\n\t\t\tclient.setHintArrow(currentHome.getLocation());\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// We are really close to house, only display a hint arrow if we are done.\n\t\t\tif (getCompletedCount() !\u003d 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfinal Optional\u003cNPC\u003e npc \u003d client.getNpcs().stream().filter(n -\u003e n.getId() \u003d\u003d currentHome.getNpcId()).findFirst();\n\t\t\tif (npc.isPresent())\n\t\t\t{\n\t\t\t\tclient.setHintArrow(npc.get());\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Couldn\u0027t find the NPC, find the closest ladder to player\n\t\t\tWorldPoint location \u003d null;\n\t\t\tint distance \u003d Integer.MAX_VALUE;\n\t\t\tfor (final GameObject obj : laddersToMark)\n\t\t\t{\n\t\t\t\t// Ensure ladder isn\u0027t in a nearby home.\n\t\t\t\tif (distanceBetween(currentHome.getArea(), obj.getWorldLocation()) \u003e 0)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tint diff \u003d obj.getWorldLocation().distanceTo(client.getLocalPlayer().getWorldLocation());\n\t\t\t\tif (diff \u003c distance)\n\t\t\t\t{\n\t\t\t\t\tdistance \u003d diff;\n\t\t\t\t\tlocation \u003d obj.getWorldLocation();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (location !\u003d null)\n\t\t\t{\n\t\t\t\tclient.setHintArrow(location);\n\t\t\t}\n\t\t}\n\t}\n\n\tint getCompletedCount()\n\t{\n\t\tif (currentHome \u003d\u003d null)\n\t\t{\n\t\t\treturn -1;\n\t\t}\n\n\t\tint count \u003d 0;\n\t\tfor (final Hotspot hotspot : Hotspot.values())\n\t\t{\n\t\t\tfinal boolean requiresAttention \u003d doesHotspotRequireAttention(hotspot.getVarb());\n\t\t\tif (!requiresAttention)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tcount++;\n\t\t}\n\n\t\treturn count;\n\t}\n\n\tboolean doesHotspotRequireAttention(final int varb)\n\t{\n\t\tfinal Integer val \u003d varbMap.get(varb);\n\t\tif (val \u003d\u003d null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn val \u003d\u003d 1 || val \u003d\u003d 3 || val \u003d\u003d 4;\n\t}\n\n\t// This check assumes objects are on the same plane as the WorldArea (ignores plane differences)\n\tint distanceBetween(final WorldArea area, final WorldPoint point)\n\t{\n\t\treturn area.distanceTo(new WorldPoint(point.getX(), point.getY(), area.getPlane()));\n\t}\n\n\tBufferedImage getMapIcon()\n\t{\n\t\tif (mapIcon !\u003d null)\n\t\t{\n\t\t\treturn mapIcon;\n\t\t}\n\n\t\tmapIcon \u003d ImageUtil.getResourceStreamFromClass(getClass(), \"map-icon.png\");\n\t\treturn mapIcon;\n\t}\n\n\tBufferedImage getMapArrow()\n\t{\n\t\tif (mapArrow !\u003d null)\n\t\t{\n\t\t\treturn mapArrow;\n\t\t}\n\n\t\tmapArrow \u003d ImageUtil.getResourceStreamFromClass(getClass(), \"map-arrow-icon.png\");\n\t\treturn mapArrow;\n\t}\n\n\tboolean isPluginTimedOut()\n\t{\n\t\treturn lastChanged !\u003d null \u0026\u0026 Duration.between(lastChanged, Instant.now()).compareTo(pluginTimeoutDuration) \u003e\u003d 0;\n\t}\n\n\tint getPointsForCompletingTask()\n\t{\n\t\t// Contracts reward 2-5 points depending on tier\n\t\treturn getContractTier() + 1;\n\t}\n\n\tprivate void calculateContractTier()\n\t{\n\t\tint tier \u003d 0;\n\t\t// Values 5-8 are the tier of contract completed\n\t\tfor (int val : varbMap.values())\n\t\t{\n\t\t\ttier \u003d Math.max(tier, val);\n\t\t}\n\n\t\t// Normalizes tier from 5-8 to 1-4\n\t\ttier -\u003d 4;\n\t\tcontractTier \u003d Math.max(tier, 0);\n\t}\n\n\tpublic Set\u003cInteger\u003e getRepairableVarbs()\n\t{\n\t\treturn varbMap.keySet()\n\t\t\t.stream()\n\t\t\t.filter(this::doesHotspotRequireAttention)\n\t\t\t.collect(Collectors.toSet());\n\t}\n\n\tprivate void refreshTeleportItem(final WorldPoint playerPos)\n\t{\n\t\tif (currentHome \u003d\u003d null || teleportItem \u003d\u003d null || !config.highlightTeleports())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (distanceBetween(currentHome.getArea(), playerPos) - teleportItem.Distance \u003c 10)\n\t\t{\n\t\t\tteleportItem \u003d null;\n\t\t}\n\t}\n\n\tprivate int getTierByText(final String tierText)\n\t{\n\t\tswitch (tierText)\n\t\t{\n\t\t\tcase \"Beginner\":\n\t\t\t\treturn 1;\n\t\t\tcase \"Novice\":\n\t\t\t\treturn 2;\n\t\t\tcase \"Adept\":\n\t\t\t\treturn 3;\n\t\t\tcase \"Expert\":\n\t\t\t\treturn 4;\n\t\t\tdefault:\n\t\t\t\treturn -1;\n\t\t}\n\t}\n\n\tvoid updateResourcesInInventory()\n\t{\n\t\tif (contractTier \u003d\u003d 0)\n\t\t{\n\t\t\tthis.numPlanksInInventory \u003d 0;\n\t\t\tthis.numSteelBarsInInventory \u003d 0;\n\t\t\treturn;\n\t\t}\n\n\t\tItemContainer inventoryContainer \u003d client.getItemContainer(InventoryID.INVENTORY.getId());\n\t\tif (inventoryContainer \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n        int plankId \u003d PLANK_IDS.get(contractTier - 1);\n\t\tint num_planks \u003d inventoryContainer.count(plankId);\n        if (inventoryContainer.contains(ItemID.PLANK_SACK))\n        {\n            num_planks +\u003d countPlankSackVarb(plankId);\n        }\n\t\tthis.numPlanksInInventory \u003d num_planks;\n\t\tthis.numSteelBarsInInventory \u003d inventoryContainer.count(ItemID.STEEL_BAR);;\n\t}\n\n    int countPlankSackVarb(int plankID)\n    {\n        switch (plankID)\n        {\n            case ItemID.PLANK:\n                return client.getVarbitValue(VarbitID.PLANK_SACK_PLAIN);\n            case ItemID.OAK_PLANK:\n                return client.getVarbitValue(VarbitID.PLANK_SACK_OAK);\n            case ItemID.TEAK_PLANK:\n                return client.getVarbitValue(VarbitID.PLANK_SACK_TEAK);\n            case ItemID.MAHOGANY_PLANK:\n                return client.getVarbitValue(VarbitID.PLANK_SACK_MAHOGANY);\n        }\n        return 0;\n    }\n\n\tvoid setShortestPath(final WorldPoint start, final WorldPoint target)\n\t{\n\t\tif (config.useShortestPath() \u0026\u0026 start !\u003d null \u0026\u0026 target !\u003d null)\n\t\t{\n\t\t\tMap\u003cString, Object\u003e data \u003d new HashMap\u003c\u003e();\n\t\t\tdata.put(\"start\", start);\n\t\t\tdata.put(\"target\", target);\n\t\t\teventBus.post(new PluginMessage(\"shortestpath\", \"path\", data));\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\thestonedturtle\\mahoganyhomes\\MahoganyHomesPlugin.java"},{"fileName":"MahoganyHomesWorldPoint.java","content":"/*\n * Copyright (c) 2020, TheStonedTurtle \u003chttps://github.com/TheStonedTurtle\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage thestonedturtle.mahoganyhomes;\n\nimport java.awt.image.BufferedImage;\nimport net.runelite.api.Point;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.ui.overlay.worldmap.WorldMapPoint;\n\nclass MahoganyHomesWorldPoint extends WorldMapPoint\n{\n\tprivate final MahoganyHomesPlugin plugin;\n\tprivate final Point point;\n\n\tMahoganyHomesWorldPoint(final WorldPoint worldPoint, final MahoganyHomesPlugin plugin)\n\t{\n\t\tsuper(worldPoint, null);\n\t\tthis.plugin \u003d plugin;\n\n\t\tfinal BufferedImage image \u003d plugin.getMapArrow();\n\t\tpoint \u003d new Point(image.getWidth() / 2, image.getHeight());\n\n\t\tthis.setSnapToEdge(true);\n\t\tthis.setJumpOnClick(true);\n\t\tthis.setImage(image);\n\t\tthis.setImagePoint(point);\n\t\tthis.setName(\"Mahogany Homes Contract\");\n\t}\n\n\t@Override\n\tpublic void onEdgeSnap()\n\t{\n\t\tthis.setImage(plugin.getMapIcon());\n\t\tthis.setImagePoint(null);\n\t}\n\n\t@Override\n\tpublic void onEdgeUnsnap()\n\t{\n\t\tthis.setImage(plugin.getMapArrow());\n\t\tthis.setImagePoint(point);\n\t}\n}\n","filePath":"src\\main\\java\\thestonedturtle\\mahoganyhomes\\MahoganyHomesWorldPoint.java"},{"fileName":"RequiredMaterials.java","content":"package thestonedturtle.mahoganyhomes;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Setter;\n\n@AllArgsConstructor\n@Setter\npublic class RequiredMaterials\n{\n\tpublic int MinPlanks;\n\tpublic int MaxPlanks;\n\tpublic int MinSteelBars;\n\tpublic int MaxSteelBars;\n}\n","filePath":"src\\main\\java\\thestonedturtle\\mahoganyhomes\\RequiredMaterials.java"},{"fileName":"RequiredMaterialsByTier.java","content":"/*\n * Copyright (c) 2022, TheStonedTurtle \u003chttps://github.com/TheStonedTurtle\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage thestonedturtle.mahoganyhomes;\n\nimport lombok.AllArgsConstructor;\n\n@AllArgsConstructor\npublic enum RequiredMaterialsByTier\n{\n\t// East Ardy\n\tJESS(new RequiredMaterials(9, 11, 0, 1),\n\t\tnew RequiredMaterials(9, 11, 0, 1),\n\t\tnew RequiredMaterials(12, 15, 0, 1),\n\t\tnew RequiredMaterials(14, 15, 0, 1)),\n\tNOELLA(new RequiredMaterials(11, 12, 0, 0),\n\t\tnew RequiredMaterials(11, 12, 0, 0),\n\t\tnew RequiredMaterials(11, 15, 0, 0),\n\t\tnew RequiredMaterials(12, 15, 0, 0)),\n\tROSS(new RequiredMaterials(8, 11, 0, 1),\n\t\tnew RequiredMaterials(8, 11, 0, 1),\n\t\tnew RequiredMaterials(8, 11, 1, 1),\n\t\tnew RequiredMaterials(10, 11, 0, 1)),\n\n\t// Falador\n\tLARRY(new RequiredMaterials(8, 12, 0, 1),\n\t\tnew RequiredMaterials(8, 12, 0, 1),\n\t\tnew RequiredMaterials(9, 12, 0, 1),\n\t\tnew RequiredMaterials(12, 12, 0, 1)),\n\tNORMAN(new RequiredMaterials(11, 11, 0, 1),\n\t\tnew RequiredMaterials(10, 11, 0, 1),\n\t\tnew RequiredMaterials(9, 13, 0, 1),\n\t\tnew RequiredMaterials(12, 13, 0, 1)),\n\tTAU(new RequiredMaterials(8, 12, 0, 1),\n\t\tnew RequiredMaterials(8, 12, 0, 1),\n\t\tnew RequiredMaterials(9, 13, 0, 1),\n\t\tnew RequiredMaterials(12, 13, 0, 1)),\n\n\t// Hosidius\n\tBARBARA(new RequiredMaterials(3, 8, 0, 1),\n\t\tnew RequiredMaterials(3, 8, 0, 1),\n\t\tnew RequiredMaterials(9, 10, 0, 1),\n\t\tnew RequiredMaterials(9, 10, 0, 1)),\n\tLEELA(new RequiredMaterials(8, 9, 0, 1),\n\t\tnew RequiredMaterials(8, 9, 0, 1),\n\t\tnew RequiredMaterials(9, 10, 0, 1),\n\t\tnew RequiredMaterials(12, 13, 0, 1)),\n\tMARIAH(new RequiredMaterials(7, 11, 0, 1),\n\t\tnew RequiredMaterials(7, 11, 0, 1),\n\t\tnew RequiredMaterials(11, 14, 0, 1),\n\t\tnew RequiredMaterials(13, 14, 0, 1)),\n\n\t// Varrock\n\tBOB(new RequiredMaterials(13, 14, 0, 0),\n\t\tnew RequiredMaterials(13, 14, 0, 0),\n\t\tnew RequiredMaterials(13, 17, 0, 0),\n\t\tnew RequiredMaterials(16, 17, 0, 0)),\n\tJEFF(new RequiredMaterials(11, 13, 0, 0),\n\t\tnew RequiredMaterials(11, 13, 0, 0),\n\t\tnew RequiredMaterials(11, 16, 0, 0),\n\t\tnew RequiredMaterials(15, 16, 0, 0)),\n\tSARAH(new RequiredMaterials(11, 11, 0, 1),\n\t\tnew RequiredMaterials(11, 11, 0, 1),\n\t\tnew RequiredMaterials(11, 11, 0, 1),\n\t\tnew RequiredMaterials(11, 11, 0, 1)),\n\t;\n\n\tprivate final RequiredMaterials beginner;\n\tprivate final RequiredMaterials novice;\n\tprivate final RequiredMaterials adept;\n\tprivate final RequiredMaterials expert;\n\n\tpublic RequiredMaterials getByTier(final int tier)\n\t{\n\t\tswitch (tier)\n\t\t{\n\t\t\tcase 1:\n\t\t\t\treturn beginner;\n\t\t\tcase 2:\n\t\t\t\treturn novice;\n\t\t\tcase 3:\n\t\t\t\treturn adept;\n\t\t\tcase 4:\n\t\t\t\treturn expert;\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\thestonedturtle\\mahoganyhomes\\RequiredMaterialsByTier.java"},{"fileName":"TeleportItem.java","content":"package thestonedturtle.mahoganyhomes;\n\nimport lombok.AllArgsConstructor;\n\n@AllArgsConstructor\npublic class TeleportItem\n{\n\tpublic int ItemId;\n\tpublic int Distance;\n}\n","filePath":"src\\main\\java\\thestonedturtle\\mahoganyhomes\\TeleportItem.java"},{"fileName":"TeleportItemOverlay.java","content":"package thestonedturtle.mahoganyhomes;\n\nimport java.awt.Color;\nimport java.awt.Graphics2D;\nimport java.awt.Image;\nimport java.awt.image.BufferedImage;\nimport java.awt.Rectangle;\nimport javax.inject.Inject;\nimport net.runelite.api.widgets.WidgetItem;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.overlay.WidgetItemOverlay;\nimport net.runelite.client.util.ImageUtil;\n\nclass TeleportItemOverlay extends WidgetItemOverlay\n{\n\tprivate final ItemManager itemManager;\n\tprivate final MahoganyHomesPlugin plugin;\n\tprivate final MahoganyHomesConfig config;\n\n\t@Inject\n\tprivate TeleportItemOverlay(ItemManager itemManager, MahoganyHomesPlugin plugin, MahoganyHomesConfig config)\n\t{\n\t\tthis.itemManager \u003d itemManager;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t\tshowOnInventory();\n\t\tshowOnEquipment();\n\t}\n\n\t@Override\n\tpublic void renderItemOverlay(Graphics2D graphics, int itemId, WidgetItem itemWidget)\n\t{\n\t\tTeleportItem teleportItem \u003d plugin.teleportItem;\n\n\t\tif (teleportItem \u003d\u003d null || itemId !\u003d teleportItem.ItemId || !config.highlightTeleports())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tColor color \u003d config.highlightTeleportsColor();\n\n\t\tif (color \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tRectangle bounds \u003d itemWidget.getCanvasBounds();\n\n\t\tfinal BufferedImage outline \u003d itemManager.getItemOutline(teleportItem.ItemId, itemWidget.getQuantity(), new Color(color.getRGB()));\n\t\tgraphics.drawImage(outline, (int) bounds.getX(), (int) bounds.getY(), null);\n\n\t\tImage image \u003d ImageUtil.fillImage(itemManager.getImage(teleportItem.ItemId, itemWidget.getQuantity(), false), color);\n\t\tgraphics.drawImage(image, (int) bounds.getX(), (int) bounds.getY(), null);\n\t}\n}\n","filePath":"src\\main\\java\\thestonedturtle\\mahoganyhomes\\TeleportItemOverlay.java"},{"fileName":"TeleportItems.java","content":"package thestonedturtle.mahoganyhomes;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.ItemContainer;\nimport net.runelite.api.ItemID;\n\npublic enum TeleportItems\n{\n\t// East Ardy\n\tJESS(new TeleportItem(ItemID.ARDOUGNE_TELEPORT, 38),\n\t\tnew TeleportItem(ItemID.ACHIEVEMENT_DIARY_CAPE, 40),\n\t\tnew TeleportItem(ItemID.ACHIEVEMENT_DIARY_CAPE_T, 40),\n\t\tnew TeleportItem(ItemID.ARDOUGNE_CLOAK_4, 70),\n\t\tnew TeleportItem(ItemID.ARDOUGNE_CLOAK_3, 70),\n\t\tnew TeleportItem(ItemID.ARDOUGNE_CLOAK_2, 70),\n\t\tnew TeleportItem(ItemID.ARDOUGNE_CLOAK_1, 70)),\n\tNOELLA(new TeleportItem(ItemID.ARDOUGNE_TELEPORT, 16),\n\t\tnew TeleportItem(ItemID.ARDOUGNE_CLOAK_4, 96),\n\t\tnew TeleportItem(ItemID.ARDOUGNE_CLOAK_3, 96),\n\t\tnew TeleportItem(ItemID.ARDOUGNE_CLOAK_2, 96),\n\t\tnew TeleportItem(ItemID.ARDOUGNE_CLOAK_1, 96),\n\t\tnew TeleportItem(ItemID.ACHIEVEMENT_DIARY_CAPE, 100),\n\t\tnew TeleportItem(ItemID.ACHIEVEMENT_DIARY_CAPE_T, 100)),\n\tROSS(new TeleportItem(ItemID.ACHIEVEMENT_DIARY_CAPE, 56),\n\t\tnew TeleportItem(ItemID.ACHIEVEMENT_DIARY_CAPE_T, 56),\n\t\tnew TeleportItem(ItemID.ARDOUGNE_TELEPORT, 60),\n\t\tnew TeleportItem(ItemID.ARDOUGNE_CLOAK_4, 92),\n\t\tnew TeleportItem(ItemID.ARDOUGNE_CLOAK_3, 92),\n\t\tnew TeleportItem(ItemID.ARDOUGNE_CLOAK_2, 92),\n\t\tnew TeleportItem(ItemID.ARDOUGNE_CLOAK_1, 92)),\n\n\t// Falador\n\tLARRY(new TeleportItem(ItemID.RING_OF_WEALTH_I5, 37),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_I4, 37),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_I3, 37),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_I2, 37),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_I1, 37),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_5, 37),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_4, 37),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_3, 37),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_2, 37),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_1, 37),\n\t\tnew TeleportItem(ItemID.SKILLS_NECKLACE6, 38),\n\t\tnew TeleportItem(ItemID.SKILLS_NECKLACE5, 38),\n\t\tnew TeleportItem(ItemID.SKILLS_NECKLACE4, 38),\n\t\tnew TeleportItem(ItemID.SKILLS_NECKLACE3, 38),\n\t\tnew TeleportItem(ItemID.SKILLS_NECKLACE2, 38),\n\t\tnew TeleportItem(ItemID.SKILLS_NECKLACE1, 38),\n\t\tnew TeleportItem(ItemID.FALADOR_TELEPORT, 67),\n\t\tnew TeleportItem(ItemID.ACHIEVEMENT_DIARY_CAPE, 80),\n\t\tnew TeleportItem(ItemID.ACHIEVEMENT_DIARY_CAPE_T, 80)),\n\tNORMAN(new TeleportItem(ItemID.RING_OF_WEALTH_I5, 38),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_I4, 38),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_I3, 38),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_I2, 38),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_I1, 38),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_5, 38),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_4, 38),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_3, 38),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_2, 38),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_1, 38),\n\t\tnew TeleportItem(ItemID.SKILLS_NECKLACE6, 39),\n\t\tnew TeleportItem(ItemID.SKILLS_NECKLACE5, 39),\n\t\tnew TeleportItem(ItemID.SKILLS_NECKLACE4, 39),\n\t\tnew TeleportItem(ItemID.SKILLS_NECKLACE3, 39),\n\t\tnew TeleportItem(ItemID.SKILLS_NECKLACE2, 39),\n\t\tnew TeleportItem(ItemID.SKILLS_NECKLACE1, 39),\n\t\tnew TeleportItem(ItemID.FALADOR_TELEPORT, 70),\n\t\tnew TeleportItem(ItemID.ACHIEVEMENT_DIARY_CAPE, 71),\n\t\tnew TeleportItem(ItemID.ACHIEVEMENT_DIARY_CAPE_T, 71)),\n\tTAU(new TeleportItem(ItemID.SKILLS_NECKLACE6, 45),\n\t\tnew TeleportItem(ItemID.SKILLS_NECKLACE5, 45),\n\t\tnew TeleportItem(ItemID.SKILLS_NECKLACE4, 45),\n\t\tnew TeleportItem(ItemID.SKILLS_NECKLACE3, 45),\n\t\tnew TeleportItem(ItemID.SKILLS_NECKLACE2, 45),\n\t\tnew TeleportItem(ItemID.SKILLS_NECKLACE1, 45),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_I5, 47),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_I4, 47),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_I3, 47),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_I2, 47),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_I1, 47),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_5, 47),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_4, 47),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_3, 47),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_2, 47),\n\t\tnew TeleportItem(ItemID.RING_OF_WEALTH_1, 47),\n\t\tnew TeleportItem(ItemID.FALADOR_TELEPORT, 78),\n\t\tnew TeleportItem(ItemID.ACHIEVEMENT_DIARY_CAPE, 79),\n\t\tnew TeleportItem(ItemID.ACHIEVEMENT_DIARY_CAPE_T, 79)),\n\n\t// Hosidius\n\tBARBARA(new TeleportItem(ItemID.TELEPORT_TO_HOUSE, 14),\n\t\tnew TeleportItem(ItemID.HOSIDIUS_TELEPORT, 14),\n\t\tnew TeleportItem(ItemID.CONSTRUCT_CAPE, 14),\n\t\tnew TeleportItem(ItemID.CONSTRUCT_CAPET, 14),\n\t\tnew TeleportItem(ItemID.XERICS_TALISMAN, 27),\n\t\tnew TeleportItem(ItemID.KHAREDSTS_MEMOIRS, 70),\n\t\tnew TeleportItem(ItemID.BOOK_OF_THE_DEAD, 70)),\n\tLEELA(new TeleportItem(ItemID.XERICS_TALISMAN, 30),\n\t\tnew TeleportItem(ItemID.KHAREDSTS_MEMOIRS, 67),\n\t\tnew TeleportItem(ItemID.BOOK_OF_THE_DEAD, 67),\n\t\tnew TeleportItem(ItemID.TELEPORT_TO_HOUSE, 72),\n\t\tnew TeleportItem(ItemID.HOSIDIUS_TELEPORT, 72)),\n\tMARIAH(new TeleportItem(ItemID.XERICS_TALISMAN, 50),\n\t\tnew TeleportItem(ItemID.KHAREDSTS_MEMOIRS, 56),\n\t\tnew TeleportItem(ItemID.BOOK_OF_THE_DEAD, 56),\n\t\tnew TeleportItem(ItemID.TELEPORT_TO_HOUSE, 100),\n\t\tnew TeleportItem(ItemID.HOSIDIUS_TELEPORT, 100)),\n\n\t// Varrock\n\tBOB(new TeleportItem(ItemID.VARROCK_TELEPORT, 60),\n\t\tnew TeleportItem(ItemID.ACHIEVEMENT_DIARY_CAPE, 100),\n\t\tnew TeleportItem(ItemID.ACHIEVEMENT_DIARY_CAPE_T, 100)),\n\tJEFF(new TeleportItem(ItemID.VARROCK_TELEPORT, 23),\n\t\tnew TeleportItem(ItemID.ACHIEVEMENT_DIARY_CAPE, 30),\n\t\tnew TeleportItem(ItemID.ACHIEVEMENT_DIARY_CAPE_T, 30)),\n\tSARAH(new TeleportItem(ItemID.ACHIEVEMENT_DIARY_CAPE, 28),\n\t\tnew TeleportItem(ItemID.ACHIEVEMENT_DIARY_CAPE_T, 28),\n\t\tnew TeleportItem(ItemID.VARROCK_TELEPORT, 37));\n\n\tprivate final TeleportItem[] teleportItems;\n\n\tTeleportItems(TeleportItem... items)\n\t{\n\t\tthis.teleportItems \u003d items;\n\t}\n\n\tpublic TeleportItem getClosestTeleportItemOnPlayer(Client client)\n\t{\n\t\tItemContainer inventoryContainer \u003d client.getItemContainer(InventoryID.INVENTORY.getId());\n\t\tItemContainer equipmentContainer \u003d client.getItemContainer(InventoryID.EQUIPMENT.getId());\n\n\t\tfor (TeleportItem teleportItem : teleportItems)\n\t\t{\n\t\t\tif (inventoryContainer !\u003d null \u0026\u0026 inventoryContainer.contains(teleportItem.ItemId))\n\t\t\t{\n\t\t\t\treturn teleportItem;\n\t\t\t}\n\n\t\t\tif (equipmentContainer !\u003d null \u0026\u0026 equipmentContainer.contains(teleportItem.ItemId))\n\t\t\t{\n\t\t\t\treturn teleportItem;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n}\n","filePath":"src\\main\\java\\thestonedturtle\\mahoganyhomes\\TeleportItems.java"},{"fileName":"MahoganyHomesPluginTest.java","content":"package thestonedturtle.mahoganyhomes;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class MahoganyHomesPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(MahoganyHomesPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\thestonedturtle\\mahoganyhomes\\MahoganyHomesPluginTest.java"},{"fileName":"MahoganyHomesTest.java","content":"/*\n * Copyright (c) 2020, TheStonedTurtle \u003chttps://github.com/TheStonedTurtle\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage thestonedturtle.mahoganyhomes;\n\nimport java.util.regex.Matcher;\nimport static org.junit.Assert.assertEquals;\nimport static org.junit.Assert.assertTrue;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.junit.MockitoJUnitRunner;\n\n@RunWith(MockitoJUnitRunner.class)\npublic class MahoganyHomesTest\n{\n\t@Test\n\tpublic void testAssignmentRegexPattern()\n\t{\n\t\tmatchContractAssignment(\"Jess\", \"Please could you go see Jess, upstairs of the building south of the church in East Ardougne? You can get another job once you have furnished her home.\");\n\t\tmatchContractAssignment(\"Jess\", \"Go see Jess, upstairs of the building south of the church in East Ardougne. You can get another job once you have furnished her home.\");\n\n\t\tmatchContractAssignment(\"Sarah\", \"Please could you go see Sarah along the south wall of Varrock? You can get another job once you have furnished her home.\");\n\t\tmatchContractAssignment(\"Sarah\", \"Go see Sarah along the south wall of Varrock. You can get another job once you have furnished her home.\");\n\n\t\tmatchContractAssignment(\"Bob\", \"Please could you go see Bob in north-east Varrock, opposite the church? You can get another job once you have furnished his home.\");\n\t\tmatchContractAssignment(\"Bob\", \"Go see Bob in north-east Varrock, opposite the church. You can get another job once you have furnished his home.\");\n\n\t\tmatchContractAssignment(\"Barbara\", \"Please could you go see Barbara, south of Hosidius, near the mill for us? You can get another job once you have furnished her home.\");\n\t}\n\n\tprivate void matchContractAssignment(final String name, final String message)\n\t{\n\t\tfinal Matcher matcher \u003d MahoganyHomesPlugin.CONTRACT_PATTERN.matcher(message);\n\t\tassertTrue(matcher.matches());\n\t\tassertEquals(name, matcher.group(2));\n\t}\n\n\t@Test\n\tpublic void testReminderRegexPattern()\n\t{\n\t\tmatchReminderContract(\"Expert\", \"Ross\", \"You\u0027re currently on an Expert Contract. Go see Ross, north of the church in East Ardounge. You can get another job once you have furnished his home.\");\n\t\tmatchReminderContract(\"Expert\", \"Jess\", \"You\u0027re currently on an Expert Contract. Go see Jess, upstairs of the building south of the church in East Ardougne. You can get another job once you have furnished her home.\");\n\t\tmatchReminderContract(\"Expert\", \"Barbara\", \"You\u0027re currently on an Expert Contract. Go see Barbara, south of Hosidius, near the mill. You can get another job once you have furnished her home.\");\n\t\tmatchReminderContract(\"Hard\", \"Bob\", \"You\u0027re currently on a Hard Contract. Go see Bob in north-east Varrock, opposite the church. You can get another job once you have furnished his home.\");\n        matchReminderContract(\"Novice\", \"Barbara\", \"You\u0027re currently on a Novice Contract. Go see Barbara, south of Hosidius, near the mill. You can get another job once you have furnished her home.\");\n\t}\n\n\tprivate void matchReminderContract(final String tier, final String name, final String message)\n\t{\n\t\tfinal Matcher matcher \u003d MahoganyHomesPlugin.REMINDER_PATTERN.matcher(message);\n\t\tassertTrue(matcher.matches());\n\t\tassertEquals(tier, matcher.group(1));\n\t\tassertEquals(name, matcher.group(2));\n\t}\n}\n","filePath":"src\\test\\java\\thestonedturtle\\mahoganyhomes\\MahoganyHomesTest.java"}]},{"commit":"79b6fcd98728b3be5fd8b222a738fb89d19a1093","repository":"https://github.com/Dazuzi/salve-reminder.git","internalName":"salve-reminder","files":[{"fileName":"ReminderManager.java","content":"package com.salvereminder.core;\n\nimport com.salvereminder.SalveReminderConfig;\nimport com.salvereminder.data.SalveData;\nimport lombok.Getter;\nimport net.runelite.api.*;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.InteractingChanged;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\n\n@Singleton\npublic class ReminderManager {\n    private static final int FLASH_DURATION_TICKS \u003d 1;\n    private static final int EQUIPMENT_CONTAINER_ID \u003d 94;\n    private static final String SLAYER_PLUGIN_GROUP \u003d \"slayer\";\n    private static final String SLAYER_TASK_NAME_KEY \u003d \"taskName\";\n    @Inject\n    @SuppressWarnings(\"unused\")\n    private Client client;\n    @Inject\n    @SuppressWarnings(\"unused\")\n    private EventBus eventBus;\n    @Inject\n    @SuppressWarnings(\"unused\")\n    private SalveReminderConfig config;\n    @Inject\n    @SuppressWarnings(\"unused\")\n    private ConfigManager configManager;\n    @Getter\n    private boolean showAlert \u003d false;\n    @Getter\n    private boolean flash \u003d false;\n    @Getter\n    private String tooltipReason \u003d null;\n    @Getter\n    private int conflictingHeadgearId \u003d -1;\n    @Getter\n    private boolean isStackingWarningActive \u003d false;\n    private Actor lastTarget \u003d null;\n    private int flashTickCounter \u003d 0;\n    private int ticksSinceInteractionEnd \u003d -1;\n    public void start() {\n        eventBus.register(this);\n    }\n    public void stop() {\n        eventBus.unregister(this);\n        reset();\n    }\n    private void reset() {\n        resetAlert();\n        lastTarget \u003d null;\n        ticksSinceInteractionEnd \u003d -1;\n    }\n    private void resetAlert() {\n        showAlert \u003d false;\n        tooltipReason \u003d null;\n        conflictingHeadgearId \u003d -1;\n        isStackingWarningActive \u003d false;\n    }\n    @Subscribe\n    @SuppressWarnings(\"unused\")\n    public void onGameStateChanged(GameStateChanged event) {\n        if (event.getGameState() !\u003d GameState.LOGGED_IN) {\n            reset();\n        }\n    }\n    @Subscribe\n    @SuppressWarnings(\"unused\")\n    public void onInteractingChanged(InteractingChanged event) {\n        if (event.getSource() !\u003d client.getLocalPlayer()) {\n            return;\n        }\n        Actor target \u003d event.getTarget();\n        if (target !\u003d null) {\n            lastTarget \u003d target;\n            ticksSinceInteractionEnd \u003d -1;\n        } else {\n            if (lastTarget !\u003d null) {\n                ticksSinceInteractionEnd \u003d 0;\n            }\n        }\n    }\n    @Subscribe\n    @SuppressWarnings(\"unused\")\n    public void onGameTick(GameTick tick) {\n        if (ticksSinceInteractionEnd !\u003d -1) {\n            ticksSinceInteractionEnd++;\n        }\n        updateAlertState();\n        updateFlash();\n    }\n    private void updateAlertState() {\n        if (lastTarget \u003d\u003d null || (ticksSinceInteractionEnd !\u003d -1 \u0026\u0026 ticksSinceInteractionEnd \u003e config.hideAlertDelay())) {\n            reset();\n            if (ticksSinceInteractionEnd \u003e config.hideAlertDelay()) {\n                lastTarget \u003d null;\n            }\n            return;\n        }\n        if (!(lastTarget instanceof NPC)) {\n            resetAlert();\n            return;\n        }\n        isStackingWarningActive \u003d false;\n        NPC npc \u003d (NPC) lastTarget;\n        int npcId \u003d npc.getId();\n        if (npcId \u003d\u003d -1) {\n            resetAlert();\n            return;\n        }\n        boolean isUndead \u003d SalveData.UNDEAD_NPCS.contains(npcId);\n        boolean isRelevantSlayerTask \u003d isSlayerTaskReminderActive();\n        boolean wearingSalve \u003d isWearingSalveAmulet();\n        int wornSlayerHelmId \u003d getWornSlayerHelmOrBlackMaskId();\n        boolean wearingSlayerHelm \u003d wornSlayerHelmId !\u003d -1;\n        if (config.showStackingWarning() \u0026\u0026 wearingSalve \u0026\u0026 wearingSlayerHelm \u0026\u0026 (isUndead || isRelevantSlayerTask)) {\n            showAlert \u003d true;\n            tooltipReason \u003d \"Salve amulet and Black mask/Slayer helmet effects do not stack.\";\n            conflictingHeadgearId \u003d wornSlayerHelmId;\n            isStackingWarningActive \u003d true;\n            return;\n        }\n        if (config.warnOnUselessSalve() \u0026\u0026 wearingSalve \u0026\u0026 !isUndead) {\n            showAlert \u003d true;\n            tooltipReason \u003d \"Salve amulet is ineffective against non-undead monsters.\";\n            return;\n        }\n        if (!wearingSalve \u0026\u0026 (isRelevantSlayerTask || (config.alertOnUndeadCombat() \u0026\u0026 isUndead))) {\n            showAlert \u003d true;\n            if (isRelevantSlayerTask \u0026\u0026 !isUndead) {\n                tooltipReason \u003d \"On a slayer task where Salve amulet is effective.\";\n            } else {\n                tooltipReason \u003d \"Attacking an undead monster without Salve amulet.\";\n            }\n            return;\n        }\n        resetAlert();\n    }\n    private void updateFlash() {\n        if (!showAlert) {\n            flash \u003d false;\n            flashTickCounter \u003d 0;\n            return;\n        }\n        flashTickCounter++;\n        if (flashTickCounter \u003e\u003d FLASH_DURATION_TICKS) {\n            flash \u003d !flash;\n            flashTickCounter \u003d 0;\n        }\n    }\n    private int getWornSlayerHelmOrBlackMaskId() {\n        ItemContainer equipment \u003d client.getItemContainer(EQUIPMENT_CONTAINER_ID);\n        if (equipment \u003d\u003d null) {\n            return -1;\n        }\n        Item helmet \u003d equipment.getItem(EquipmentInventorySlot.HEAD.getSlotIdx());\n        if (helmet \u003d\u003d null) {\n            return -1;\n        }\n        int helmetId \u003d helmet.getId();\n        if (SalveData.BLACK_MASK_IDS.contains(helmetId) || SalveData.SLAYER_HELMET_IDS.contains(helmetId)) {\n            return helmetId;\n        }\n        return -1;\n    }\n    private boolean isSlayerTaskReminderActive() {\n        if (!config.slayerTaskReminderEnabled()) {\n            return false;\n        }\n        String taskName \u003d configManager.getRSProfileConfiguration(SLAYER_PLUGIN_GROUP, SLAYER_TASK_NAME_KEY);\n        if (taskName \u003d\u003d null || taskName.isEmpty()) {\n            return false;\n        }\n        taskName \u003d taskName.toLowerCase();\n        if (SalveData.MANDATORY_SLAYER_TASKS.contains(taskName)) {\n            return true;\n        }\n        if (config.remindOnBlueDragonsTask() \u0026\u0026 SalveData.BLUE_DRAGON_TASKS.contains(taskName)) {\n            return true;\n        }\n        return config.remindOnOgresTask() \u0026\u0026 SalveData.OGRE_TASKS.contains(taskName);\n    }\n    private boolean isWearingSalveAmulet() {\n        ItemContainer equipment \u003d client.getItemContainer(EQUIPMENT_CONTAINER_ID);\n        if (equipment \u003d\u003d null) {\n            return false;\n        }\n        Item amulet \u003d equipment.getItem(EquipmentInventorySlot.AMULET.getSlotIdx());\n        return amulet !\u003d null \u0026\u0026 SalveData.SALVE_AMULET_IDS.contains(amulet.getId());\n    }\n}","filePath":"src\\main\\java\\com\\salvereminder\\core\\ReminderManager.java"},{"fileName":"SalveData.java","content":"package com.salvereminder.data;\n\nimport com.google.common.collect.ImmutableSet;\n\nimport java.util.Set;\npublic final class SalveData {\n    public static final Set\u003cInteger\u003e SALVE_AMULET_IDS \u003d ImmutableSet.of(\n            4081,  // Salve amulet\n            10588, // Salve amulet (e)\n            12017, // Salve amulet (i)\n            12018, // Salve amulet (ei)\n            25250, // Salve amulet (i)\n            25278, // Salve amulet (ei)\n            26763, // Salve amulet (i)\n            26782  // Salve amulet (ei)\n    );\n    public static final Set\u003cInteger\u003e SLAYER_HELMET_IDS \u003d ImmutableSet.of(\n            11864, 11865, 19639, 19641, 19643, 19645, 19647, 19649, 21264, 21266,\n            21888, 21890, 23073, 23075, 24370, 24444, 25177, 25179, 25181, 25183,\n            25185, 25187, 25189, 25191, 25898, 25900, 25902, 25904, 25906, 25908,\n            25910, 25912, 25914, 26674, 26675, 26676, 26677, 26678, 26679, 26680,\n            26681, 26682, 26683, 26684, 29816, 29818, 29820, 29822\n    );\n    public static final Set\u003cInteger\u003e BLACK_MASK_IDS \u003d ImmutableSet.of(\n            8901, 8903, 8905, 8907, 8909, 8911, 8913, 8915, 8917, 8919, 8921,\n            11774, 11775, 11776, 11777, 11778, 11779, 11780, 11781, 11782, 11783,\n            11784, 25266, 25267, 25268, 25269, 25270, 25271, 25272, 25273, 25274,\n            25275, 25276, 26771, 26772, 26773, 26774, 26775, 26776, 26777, 26778,\n            26779, 26780, 26781\n    );\n    public static final Set\u003cString\u003e MANDATORY_SLAYER_TASKS \u003d ImmutableSet.of(\n            \"aberrant spectres\", \"ankou\", \"crawling hands\", \"ghosts\", \"revenants\",\n            \"shades\", \"skeletons\", \"vet\u0027ion\", \"vorkath\", \"zombies\"\n    );\n    public static final Set\u003cString\u003e BLUE_DRAGON_TASKS \u003d ImmutableSet.of(\"blue dragons\");\n    public static final Set\u003cString\u003e OGRE_TASKS \u003d ImmutableSet.of(\"ogres\");\n    public static final Set\u003cInteger\u003e UNDEAD_NPCS \u003d ImmutableSet.of(\n            2, 3, 4, 5, 6, 7,                                                                // Aberrant spectre\n            7402,                                                                            // Abhorrent spectre\n            2514, 2515, 2516, 2517, 2518, 2519, 6608, 7257, 7864,                            // Ankou\n            12720, 12721, 12722, 12723, 12724, 12725, 12726, 12727, 12728, 12729, 12730,     // Armoured zombie\n            12731, 12732, 12733, 12734, 12735, 12736, 12737, 12738, 12739, 12755, 12756,\n            12757, 12758, 12759, 12760, 12761, 12762, 12763, 12764, 14113, 14114, 14115,\n            14116, 14117, 14118, 14119, 14120, 14121, 14122, 14135, 14136,\n            1284,                                                                            // Asyn Shade\n            1283, 5632,                                                                      // Asyn Shadow\n            414,                                                                             // Banshee\n            12540,                                                                           // Bloodthirsty banshee\n            12574,                                                                           // Bloodthirsty Repugnant spectre\n            12573,                                                                           // Bloodthirsty spectre\n            12542,                                                                           // Bloodthirsty twisted banshee\n            11993, 11994,                                                                    // Calvar\u0027ion\n            448, 449, 450, 451, 452, 453, 454, 455, 456, 457,                                // Crawling Hand\n            7388,                                                                            // Crushing hand\n            7296,                                                                            // Dark Ankou\n            7279,                                                                            // Deviant spectre\n            1286,                                                                            // Fiyr Shade\n            1285,                                                                            // Fiyr Shadow\n            10523, 10524, 10525, 10526, 10534, 10535, 10536, 10537, 10544, 10545,            // Forgotten Soul\n            6698, 11205,                                                                     // Ghost guard\n            85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 472, 473, 474, 505,  // Ghost\n            506, 507, 2527, 2528, 2529, 2530, 2531, 2532, 2533, 2534, 3625, 3975, 3976,\n            3977, 3978, 3979, 5370, 7263, 7264, 12254,\n            680, 681, 6440,                                                                  // Giant skeleton\n            6614, 12108,                                                                     // Greater Skeleton Hellhound\n            10492, 10493, 10506,                                                             // Headless Beast\n            1277,                                                                            // Loar Shade\n            1276,                                                                            // Loar Shadow\n            5281, 5282, 5283,                                                                // Monkey Zombie\n            6477,                                                                            // Mutant tarn\n            8359, 10812, 10813,                                                              // Pestilent Bloat\n            1280,                                                                            // Phrin Shade\n            1279,                                                                            // Phrin Shadow\n            7403,                                                                            // Repugnant spectre\n            7934,                                                                            // Revenant cyclops\n            7938,                                                                            // Revenant dark beast\n            7936,                                                                            // Revenant demon\n            7940,                                                                            // Revenant dragon\n            7931,                                                                            // Revenant goblin\n            7935,                                                                            // Revenant hellhound\n            7933,                                                                            // Revenant hobgoblin\n            7881,                                                                            // Revenant imp\n            7939,                                                                            // Revenant knight\n            11246,                                                                           // Revenant maledictus\n            7937,                                                                            // Revenant ork\n            7932,                                                                            // Revenant pyrefiend\n            1282,                                                                            // Riyl Shade\n            1281, 5631,                                                                      // Riyl Shadow\n            7390,                                                                            // Screaming banshee\n            7391,                                                                            // Screaming twisted banshee\n            5633, 6740, 7258,                                                                // Shade\n            7604, 7605, 7606,                                                                // Skeletal Mystic\n            1538,                                                                            // Skeleton brute\n            3358,                                                                            // Skeleton Champion\n            4491, 4492, 4493, 4494, 4495, 4496, 4497, 4498, 4499,                            // Skeleton fremennik\n            1540,                                                                            // Skeleton heavy\n            5054, 6326, 6387, 6613, 12107,                                                   // Skeleton Hellhound\n            1537,                                                                            // Skeleton hero\n            84, 4319,                                                                        // Skeleton Mage\n            1541,                                                                            // Skeleton thug\n            1539,                                                                            // Skeleton warlord\n            70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 130, 924, 1685, 1686,    // Skeleton\n            1687, 1688, 2520, 2521, 2522, 2523, 2524, 2525, 2526, 3565, 3972, 3973, 3974,\n            5237, 6441, 6442, 6443, 6444, 6445, 6446, 6447, 6448, 6467, 6468, 7265, 8070,\n            8071, 8072, 10717, 10718, 10719, 10720, 10721, 13476, 13477, 13478, 13479,\n            13495, 13496, 13497, 13498, 13499, 13500, 13501, 14426, 14427, 14428,\n            872, 878, 879,                                                                   // Skogre\n            882,                                                                             // Slash Bash\n            69,                                                                              // Summoned Zombie\n            6476,                                                                            // Tarn\n            3922,                                                                            // The Draugen\n            8512, 8513,                                                                      // Tormented Soul\n            2999,                                                                            // Tortured soul\n            8514, 8528, 8529,                                                                // Trapped Soul\n            1163, 6319, 6380,                                                                // Tree spirit\n            3616, 6298, 6359,                                                                // Treus Dayth\n            7272,                                                                            // Twisted Banshee\n            4500,                                                                            // Ulfric\n            2993,                                                                            // Undead chicken\n            2992,                                                                            // Undead cow\n            2145,                                                                            // Undead Druid\n            5648, 5649, 5650, 5651, 5652, 5653, 5654, 5655, 5656, 5657, 5658, 5659, 5660,    // Undead Lumberjack\n            5661, 5662, 5663, 5665, 5666, 5667, 5668, 5669, 5670, 5671, 5672, 5673, 5674,\n            5675, 5676, 5677, 5678, 5679, 5680, 5681, 5682, 5683, 5684, 5685, 5686, 5687,\n            5688, 5689, 5690, 5691, 5692, 5693, 5694, 5695, 5696, 5697, 5698, 5699, 5700,\n            5701, 5702, 5703, 5704, 5705, 5706, 5707, 5708, 5709, 5710, 5711, 5712, 5713,\n            5714, 5715, 5716, 5717, 5718, 5719, 5720,\n            5342, 5343, 5344, 5345, 5346, 5347, 5348, 5349, 5350, 5351,                      // Undead one\n            10591, 10592,                                                                    // Undead Zealot\n            10589,                                                                           // Urium Shade\n            6611, 6612,                                                                      // Vet\u0027ion\n            8060, 8061,                                                                      // Vorkath\n            866, 867, 868, 869, 870, 871, 873, 874, 875, 876, 877,                           // Zogre\n            563, 564, 565, 566, 567, 568, 569, 570, 571, 572, 573, 574, 575, 576, 577,       // Zombie pirate\n            578, 579, 580, 581, 582, 583, 584, 585, 586, 587, 588, 589, 590, 591, 592,\n            593, 594, 595, 596, 597, 598, 599, 613, 614, 615, 616, 617, 618, 13489, 13490,\n            13491, 13492, 13493,\n            3969, 3970, 3971,                                                                // Zombie rat\n            619, 620, 621, 622, 623, 624,                                                    // Zombie swab\n            26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45,  // Zombie\n            46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65,\n            66, 67, 68, 880, 2501, 2502, 2503, 2504, 2505, 2506, 2507, 2508, 2509, 3980,\n            3981, 5647, 6449, 6450, 6451, 6452, 6453, 6454, 6455, 6456, 6457, 6458, 6459,\n            6460, 6461, 6462, 6463, 6464, 6465, 6466, 6596, 6597, 6598, 6741, 7485, 7486,\n            7487, 7488, 8067, 8068, 8069,\n            3359,                                                                            // Zombies Champion\n            8062, 8063                                                                       // Zombified Spawn\n    );\n    private SalveData() {}\n}","filePath":"src\\main\\java\\com\\salvereminder\\data\\SalveData.java"},{"fileName":"SalveReminderOverlay.java","content":"package com.salvereminder.overlay;\n\nimport com.salvereminder.SalveReminderConfig;\nimport com.salvereminder.SalveReminderPlugin;\nimport com.salvereminder.core.ReminderManager;\nimport net.runelite.api.Client;\nimport net.runelite.api.MenuAction;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.ImageComponent;\nimport net.runelite.client.ui.overlay.tooltip.Tooltip;\nimport net.runelite.client.ui.overlay.tooltip.TooltipManager;\n\nimport javax.inject.Inject;\nimport java.awt.*;\nimport java.awt.image.BufferedImage;\n\nimport static net.runelite.client.ui.overlay.OverlayManager.OPTION_CONFIGURE;\n\npublic class SalveReminderOverlay extends OverlayPanel {\n    private final Client client;\n    private final SalveReminderConfig config;\n    private final ReminderManager reminderManager;\n    private final ItemManager itemManager;\n    private final TooltipManager tooltipManager;\n    @Inject\n    public SalveReminderOverlay(Client client, SalveReminderConfig config, ReminderManager reminderManager, ItemManager itemManager, TooltipManager tooltipManager, SalveReminderPlugin plugin) {\n        super(plugin);\n        this.client \u003d client;\n        this.config \u003d config;\n        this.reminderManager \u003d reminderManager;\n        this.itemManager \u003d itemManager;\n        this.tooltipManager \u003d tooltipManager;\n        setPosition(OverlayPosition.ABOVE_CHATBOX_RIGHT);\n        setResizable(false);\n        setResettable(true);\n        addMenuEntry(MenuAction.RUNELITE_OVERLAY_CONFIG, OPTION_CONFIGURE, \"Salve Reminder\");\n    }\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        if (!reminderManager.isShowAlert()) {\n            return null;\n        }\n        panelComponent.getChildren().clear();\n        final boolean useFlash \u003d config.flashBackground() \u0026\u0026 reminderManager.isFlash();\n        Color bgColor \u003d useFlash ? config.flashBackgroundColor() : config.backgroundColor();\n        panelComponent.setBackgroundColor(bgColor);\n        int itemIDToDisplay \u003d config.displayIcon().getItemID();\n        if (reminderManager.isStackingWarningActive() \u0026\u0026 useFlash) {\n            int conflictingId \u003d reminderManager.getConflictingHeadgearId();\n            if (conflictingId !\u003d -1) {\n                itemIDToDisplay \u003d conflictingId;\n            }\n        }\n        final BufferedImage iconImage \u003d itemManager.getImage(itemIDToDisplay);\n        if (iconImage !\u003d null) {\n            panelComponent.getChildren().add(new ImageComponent(iconImage));\n        }\n        Rectangle bounds \u003d getBounds();\n        if (bounds !\u003d null \u0026\u0026 bounds.contains(client.getMouseCanvasPosition().getX(), client.getMouseCanvasPosition().getY())) {\n            final String tooltip \u003d reminderManager.getTooltipReason();\n            if (tooltip !\u003d null) {\n                tooltipManager.add(new Tooltip(tooltip));\n            }\n        }\n        return super.render(graphics);\n    }\n}","filePath":"src\\main\\java\\com\\salvereminder\\overlay\\SalveReminderOverlay.java"},{"fileName":"SalveReminderConfig.java","content":"package com.salvereminder;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.client.config.*;\n\nimport java.awt.*;\n\n@ConfigGroup(\"salvereminder\")\npublic interface SalveReminderConfig extends Config {\n    @Getter\n    @RequiredArgsConstructor\n    enum SalveIcon {\n        @SuppressWarnings(\"unused\")\n        SALVE_AMULET(\"Salve amulet\", 4081),\n        @SuppressWarnings(\"unused\")\n        SALVE_AMULET_E(\"Salve amulet (e)\", 10588),\n        SALVE_AMULET_EI(\"Salve amulet (ei)\", 12018);\n        private final String name;\n        private final int itemID;\n        @Override\n        public String toString() {\n            return name;\n        }\n    }\n\n    @ConfigItem(\n            keyName \u003d \"alertOnUndeadCombat\",\n            name \u003d \"Alert while fighting undead\",\n            description \u003d \"Toggles the reminder when attacking undead monsters without a Salve Amulet.\",\n            position \u003d 0\n    )\n    default boolean alertOnUndeadCombat() { return true; }\n\n    @ConfigItem(\n            keyName \u003d \"showStackingWarning\",\n            name \u003d \"Show Stacking Warning\",\n            description \u003d \"Warns you when wearing both a Slayer Helmet/Black Mask and a Salve Amulet, as their effects do not stack.\",\n            position \u003d 1\n    )\n    default boolean showStackingWarning() { return true; }\n\n    @ConfigItem(\n            keyName \u003d \"warnOnUselessSalve\",\n            name \u003d \"Warn on useless Salve\",\n            description \u003d \"Warns you when wearing a Salve Amulet while fighting non-undead monsters.\",\n            position \u003d 2\n    )\n    default boolean warnOnUselessSalve() { return true; }\n\n    @ConfigSection(\n            name \u003d \"Slayer Task Reminders\",\n            description \u003d \"Settings for showing the reminder during an undead slayer task.\",\n            position \u003d 3\n    )\n    String slayerTaskSection \u003d \"slayerTaskSection\";\n\n    @ConfigItem(\n            keyName \u003d \"slayerTaskReminderEnabled\",\n            name \u003d \"Enable Slayer Task Reminder\",\n            description \u003d \"Shows a reminder if you\u0027re wearing a slayer helmet or black mask on an undead task.\",\n            section \u003d slayerTaskSection,\n            position \u003d 0\n    )\n    default boolean slayerTaskReminderEnabled() { return true; }\n\n    @ConfigItem(\n            keyName \u003d \"remindOnBlueDragonsTask\",\n            name \u003d \"Blue Dragons (Vorkath)\",\n            description \u003d \"Show the reminder on a Blue Dragons task, as killing Vorkath is an option.\",\n            section \u003d slayerTaskSection,\n            position \u003d 1\n    )\n    default boolean remindOnBlueDragonsTask() { return true; }\n\n    @ConfigItem(\n            keyName \u003d \"remindOnOgresTask\",\n            name \u003d \"Ogres (Zogres/Skogres)\",\n            description \u003d \"Show the reminder on an Ogres task, as killing Zogres or Skogres is an option.\",\n            section \u003d slayerTaskSection,\n            position \u003d 2\n    )\n    default boolean remindOnOgresTask() { return true; }\n\n    @ConfigSection(\n            name \u003d \"Appearance\",\n            description \u003d \"Settings for the reminder overlay\u0027s appearance.\",\n            position \u003d 4\n    )\n    String appearanceSection \u003d \"appearanceSection\";\n\n    @ConfigItem(\n            keyName \u003d \"displayIcon\",\n            name \u003d \"Display Icon\",\n            description \u003d \"The icon to display in the reminder overlay.\",\n            section \u003d appearanceSection,\n            position \u003d 0\n    )\n    default SalveIcon displayIcon() { return SalveIcon.SALVE_AMULET_EI; }\n\n    @ConfigItem(\n            keyName \u003d \"flashBackground\",\n            name \u003d \"Flash Background\",\n            description \u003d \"Toggles the flashing of the overlay\u0027s background.\",\n            section \u003d appearanceSection,\n            position \u003d 1\n    )\n    default boolean flashBackground() { return true; }\n\n    @Alpha\n    @ConfigItem(\n            keyName \u003d \"backgroundColor\",\n            name \u003d \"Background Color\",\n            description \u003d \"The background color of the reminder overlay.\",\n            section \u003d appearanceSection,\n            position \u003d 2\n    )\n    default Color backgroundColor() { return new Color(36, 33, 30, 150); }\n\n    @Alpha\n    @ConfigItem(\n            keyName \u003d \"flashBackgroundColor\",\n            name \u003d \"Flash Background Color\",\n            description \u003d \"The color the background will flash to.\",\n            section \u003d appearanceSection,\n            position \u003d 3\n    )\n    default Color flashBackgroundColor() { return new Color(150, 0, 0, 150); }\n\n    @ConfigItem(\n            keyName \u003d \"hideAlertDelay\",\n            name \u003d \"Hide Delay (ticks)\",\n            description \u003d \"How many ticks the reminder stays visible after combat ends.\",\n            section \u003d appearanceSection,\n            position \u003d 4\n    )\n    @Range(max \u003d 512)\n    default int hideAlertDelay() { return 10; }\n}","filePath":"src\\main\\java\\com\\salvereminder\\SalveReminderConfig.java"},{"fileName":"SalveReminderPlugin.java","content":"package com.salvereminder;\n\nimport com.google.inject.Provides;\nimport com.salvereminder.core.ReminderManager;\nimport com.salvereminder.overlay.SalveReminderOverlay;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\nimport javax.inject.Inject;\n\n@Slf4j\n@PluginDescriptor(\n\t\tname \u003d \"Salve Reminder\"\n)\npublic class SalveReminderPlugin extends Plugin {\n\t@Inject\n\t@SuppressWarnings(\"unused\")\n\tprivate OverlayManager overlayManager;\n\t@Inject\n\t@SuppressWarnings(\"unused\")\n\tprivate ReminderManager reminderManager;\n\t@Inject\n\t@SuppressWarnings(\"unused\")\n\tprivate SalveReminderOverlay salveReminderOverlay;\n\t@Override\n\tprotected void startUp() {\n\t\treminderManager.start();\n\t\toverlayManager.add(salveReminderOverlay);\n\t}\n\t@Override\n\tprotected void shutDown() {\n\t\treminderManager.stop();\n\t\toverlayManager.remove(salveReminderOverlay);\n\t}\n\t@Provides\n\t@SuppressWarnings(\"unused\")\n\tSalveReminderConfig provideConfig(ConfigManager configManager) {\n\t\treturn configManager.getConfig(SalveReminderConfig.class);\n\t}\n}","filePath":"src\\main\\java\\com\\salvereminder\\SalveReminderPlugin.java"},{"fileName":"SalveReminderPluginTest.java","content":"package com.salvereminder;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class SalveReminderPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(SalveReminderPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\salvereminder\\SalveReminderPluginTest.java"}]},{"commit":"fe25110e73149009eb750c80d99213ad87adc324","repository":"https://github.com/jdpriest/new-game-plus.git","internalName":"newgameplus","files":[{"fileName":"NewGamePlusConfig.java","content":"package com.newgameplus;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.Range;\n\n@ConfigGroup(\"newgameplus\")\npublic interface NewGamePlusConfig extends Config {\n\n    @ConfigItem(\n            keyName \u003d \"inventoryOpacity\",\n            name \u003d \"Inventory dim opacity\",\n            description \u003d \"Opacity (0-255) used to dim locked items in the inventory\"\n    )\n    @Range(min \u003d 0, max \u003d 255)\n    default int inventoryOpacity() {\n        return 165; // ~50%\n    }\n\n    @ConfigItem(\n            keyName \u003d \"bankOpacity\",\n            name \u003d \"Bank dim opacity\",\n            description \u003d \"Opacity (0-255) used to dim locked items in the bank\"\n    )\n    @Range(min \u003d 0, max \u003d 255)\n    default int bankOpacity() {\n        return 165; // ~50%\n    }\n\n\n    @ConfigItem(\n            keyName \u003d \"showUnlockPopup\",\n            name \u003d \"Show unlock popup\",\n            description \u003d \"Show a popup with the item icon and name when an item is unlocked\"\n    )\n    default boolean showUnlockPopup() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"playUnlockSound\",\n            name \u003d \"Play unlock sound\",\n            description \u003d \"Play a custom sound located at /.runelite/new-game-plus/new-game-plus-unlock.wav when an item is unlocked.\"\n    )\n    default boolean playUnlockSound() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"unlockSoundVolume\",\n            name \u003d \"Unlock sound volume\",\n            description \u003d \"Volume for the unlock sound (0-100)\"\n    )\n    @Range(min \u003d 0, max \u003d 100)\n    default int unlockSoundVolume() {\n        return 100;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"screenshotOnUnlock\",\n            name \u003d \"Screenshot on unlock\",\n            description \u003d \"Take a screenshot when a new item is unlocked (saved to the RuneLite screenshots folder).\"\n    )\n    default boolean screenshotOnUnlock() {\n        return false;\n    }\n}\n","filePath":"src\\main\\java\\com\\newgameplus\\NewGamePlusConfig.java"},{"fileName":"NewGamePlusOverlay.java","content":"package com.newgameplus;\n\nimport net.runelite.client.ui.overlay.WidgetItemOverlay;\nimport net.runelite.api.widgets.WidgetItem;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.ComponentID;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.awt.Color;\nimport java.awt.Graphics2D;\nimport java.awt.Rectangle;\nimport java.awt.Image;\nimport java.awt.image.BufferedImage;\n\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.util.ColorUtil;\nimport net.runelite.client.util.ImageUtil;\n\n@Singleton\nclass NewGamePlusOverlay extends WidgetItemOverlay {\n    private final NewGamePlusPlugin plugin;\n    private final ItemManager itemManager;\n    private final NewGamePlusConfig config;\n\n    @Inject\n    private NewGamePlusOverlay(ItemManager itemManager, NewGamePlusPlugin plugin, NewGamePlusConfig config) {\n        this.itemManager \u003d itemManager;\n        this.plugin \u003d plugin;\n        this.config \u003d config;\n        // Apply to inventory and bank\n        showOnInventory();\n        showOnBank();\n    }\n\n    @Override\n    public void renderItemOverlay(Graphics2D graphics, int itemId, WidgetItem item) {\n        if (!plugin.isLocked(itemId)) {\n            return;\n        }\n\n        Rectangle bounds \u003d item.getCanvasBounds();\n        if (bounds \u003d\u003d null) {\n            return;\n        }\n\n        // Draw a tinted image that matches the item icon shape\n        final int qty \u003d item.getQuantity();\n        final Image icon \u003d itemManager.getImage(itemId, qty, false);\n        if (icon \u003d\u003d null) {\n            return;\n        }\n\n        // Choose opacity based on context: bank items vs inventory (including side inventory)\n        int groupId \u003d 0;\n        Widget w \u003d item.getWidget();\n        if (w !\u003d null) {\n            // Extract interface group id from component id (top 16 bits)\n            groupId \u003d w.getId() \u003e\u003e\u003e 16;\n        }\n        final boolean isBankItems \u003d groupId \u003d\u003d (ComponentID.BANK_ITEM_CONTAINER \u003e\u003e\u003e 16); // bank main items container\n        final int alpha \u003d isBankItems ? config.bankOpacity() : config.inventoryOpacity();\n        final Color dimColor \u003d ColorUtil.colorWithAlpha(Color.BLACK, alpha);\n        final BufferedImage iconBi \u003d ImageUtil.bufferedImageFromImage(icon);\n        final BufferedImage dimmed \u003d ImageUtil.fillImage(iconBi, dimColor);\n        graphics.drawImage(dimmed, (int) bounds.getX(), (int) bounds.getY(), null);\n    }\n}\n","filePath":"src\\main\\java\\com\\newgameplus\\NewGamePlusOverlay.java"},{"fileName":"NewGamePlusPanel.java","content":"package com.newgameplus;\n\nimport net.runelite.api.Client;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.PluginPanel;\n\nimport javax.swing.BorderFactory;\nimport javax.swing.DefaultListModel;\nimport javax.swing.JButton;\nimport javax.swing.JLabel;\nimport javax.swing.JList;\nimport javax.swing.JOptionPane;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\nimport javax.swing.ListSelectionModel;\nimport javax.swing.SwingUtilities;\nimport javax.swing.ListCellRenderer;\nimport java.awt.BorderLayout;\nimport java.awt.Component;\nimport java.awt.Dimension;\nimport java.awt.FlowLayout;\nimport java.awt.GridBagConstraints;\nimport java.awt.GridBagLayout;\nimport java.awt.Insets;\nimport java.awt.image.BufferedImage;\nimport java.util.ArrayList;\nimport java.util.Comparator;\nimport java.util.List;\nimport java.util.Map;\n\nclass NewGamePlusPanel extends PluginPanel {\n    private final NewGamePlusPlugin plugin;\n    private final ItemManager itemManager;\n    private final Client client;\n\n    private final DefaultListModel\u003cUnlockEntry\u003e model \u003d new DefaultListModel\u003c\u003e();\n    private final JList\u003cUnlockEntry\u003e list \u003d new JList\u003c\u003e(model);\n\n    // No direct text input; we open a chatbox search in-game for adding items\n\n    NewGamePlusPanel(NewGamePlusPlugin plugin, ItemManager itemManager, Client client) {\n        super(false); // no scrolling container, we add our own\n        this.plugin \u003d plugin;\n        this.itemManager \u003d itemManager;\n        this.client \u003d client;\n\n        setLayout(new BorderLayout());\n        setPreferredSize(new Dimension(300, 0));\n\n        // Header\n        JLabel header \u003d new JLabel(\"Unlocked Items\");\n        header.setBorder(BorderFactory.createEmptyBorder(8, 8, 8, 8));\n        add(header, BorderLayout.NORTH);\n\n        // Center list with custom renderer\n        list.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);\n        list.setCellRenderer(new UnlockRenderer());\n        JScrollPane scroll \u003d new JScrollPane(list);\n        add(scroll, BorderLayout.CENTER);\n\n        // Footer controls\n        JPanel controls \u003d new JPanel(new GridBagLayout());\n        controls.setBorder(BorderFactory.createEmptyBorder(8, 8, 8, 8));\n        GridBagConstraints gc \u003d new GridBagConstraints();\n        gc.insets \u003d new Insets(2, 2, 2, 2);\n\n        JButton addBtn \u003d new JButton(\"Add\");\n        gc.gridy \u003d 0;\n        gc.gridx \u003d 0;\n        gc.gridwidth \u003d 1;\n        gc.weightx \u003d 1;\n        gc.fill \u003d GridBagConstraints.HORIZONTAL;\n        controls.add(addBtn, gc);\n\n        JButton removeBtn \u003d new JButton(\"Remove Selected\");\n        gc.gridy \u003d 1;\n        gc.gridx \u003d 0;\n        gc.gridwidth \u003d 1;\n        gc.weightx \u003d 1;\n        gc.fill \u003d GridBagConstraints.HORIZONTAL;\n        controls.add(removeBtn, gc);\n\n        JButton clearBtn \u003d new JButton(\"Delete All Unlocks\");\n        gc.gridy \u003d 2;\n        gc.gridx \u003d 0;\n        gc.gridwidth \u003d 1;\n        gc.weightx \u003d 1;\n        gc.fill \u003d GridBagConstraints.HORIZONTAL;\n        controls.add(clearBtn, gc);\n\n        add(controls, BorderLayout.SOUTH);\n\n        // Actions\n        addBtn.addActionListener(e -\u003e onAdd());\n        removeBtn.addActionListener(e -\u003e onRemove());\n        clearBtn.addActionListener(e -\u003e onClearAll());\n\n        refreshFromPlugin();\n    }\n\n    void refreshFromPlugin() {\n        // Ask plugin to build entries on the client thread, then callback into setEntries()\n        plugin.refreshPanelAsync(this);\n    }\n\n    // Called by plugin on the Swing thread to update entries\n    void setEntries(Map\u003cInteger, String\u003e idToName) {\n        if (!SwingUtilities.isEventDispatchThread()) {\n            SwingUtilities.invokeLater(() -\u003e setEntries(idToName));\n            return;\n        }\n        model.clear();\n        List\u003cUnlockEntry\u003e entries \u003d new ArrayList\u003c\u003e();\n        for (Map.Entry\u003cInteger, String\u003e e : idToName.entrySet()) {\n            entries.add(new UnlockEntry(e.getKey(), e.getValue()));\n        }\n        entries.sort(Comparator.comparing(a -\u003e a.name.toLowerCase()));\n        for (UnlockEntry e : entries) {\n            model.addElement(e);\n        }\n    }\n\n    private void onAdd() {\n        // Open in-game chatbox search input; selection will add and refresh\n        plugin.openAddItemSearch();\n    }\n\n    private void onRemove() {\n        List\u003cUnlockEntry\u003e selected \u003d list.getSelectedValuesList();\n        if (selected \u003d\u003d null || selected.isEmpty()) {\n            return;\n        }\n        for (UnlockEntry e : selected) {\n            plugin.removeUnlock(e.id);\n        }\n        refreshFromPlugin();\n    }\n\n    private void onClearAll() {\n        int res \u003d JOptionPane.showConfirmDialog(this,\n                \"Are you sure you want to delete all unlocks?\",\n                \"Confirm Delete All\",\n                JOptionPane.OK_CANCEL_OPTION,\n                JOptionPane.WARNING_MESSAGE);\n        if (res \u003d\u003d JOptionPane.OK_OPTION) {\n            plugin.clearAllUnlocks();\n        }\n    }\n\n    private final class UnlockRenderer implements ListCellRenderer\u003cUnlockEntry\u003e {\n        @Override\n        public Component getListCellRendererComponent(JList\u003c? extends UnlockEntry\u003e jList, UnlockEntry value, int index, boolean isSelected, boolean cellHasFocus) {\n            JPanel row \u003d new JPanel(new FlowLayout(FlowLayout.LEFT, 8, 4));\n            row.setOpaque(true);\n            if (isSelected) {\n                row.setBackground(jList.getSelectionBackground());\n                row.setForeground(jList.getSelectionForeground());\n            } else {\n                row.setBackground(jList.getBackground());\n                row.setForeground(jList.getForeground());\n            }\n\n            BufferedImage icon \u003d itemManager.getImage(value.id, 1, false);\n            JLabel iconLabel \u003d new JLabel(icon !\u003d null ? new javax.swing.ImageIcon(icon) : null);\n            JLabel textLabel \u003d new JLabel(value.name);\n            row.add(iconLabel);\n            row.add(textLabel);\n            return row;\n        }\n    }\n\n    private static final class UnlockEntry {\n        final int id;\n        final String name;\n\n        UnlockEntry(int id, String name) {\n            this.id \u003d id;\n            this.name \u003d name;\n        }\n\n        @Override\n        public String toString() {\n            return name;\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\newgameplus\\NewGamePlusPanel.java"},{"fileName":"NewGamePlusPlugin.java","content":"package com.newgameplus;\n\nimport com.google.inject.Provides;\n\nimport javax.inject.Inject;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.Item;\nimport net.runelite.api.ItemContainer;\nimport net.runelite.api.MenuEntry;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.ClientTick;\nimport net.runelite.api.events.ItemContainerChanged;\nimport net.runelite.api.events.MenuOptionClicked;\nimport net.runelite.api.events.MenuEntryAdded;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.ClientUI;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.util.ImageUtil;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.util.ColorUtil;\nimport net.runelite.client.util.Text;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.api.events.ScriptCallbackEvent;\n\nimport java.awt.Color;\nimport java.awt.image.BufferedImage;\nimport java.io.BufferedReader;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.io.IOException;\nimport java.nio.charset.StandardCharsets;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.List;\nimport java.util.ArrayList;\nimport java.util.regex.Pattern;\n\nimport net.runelite.client.game.chatbox.ChatboxItemSearch;\nimport net.runelite.client.events.ServerNpcLoot;\nimport net.runelite.client.plugins.loottracker.LootReceived;\nimport net.runelite.http.api.loottracker.LootRecordType;\nimport net.runelite.client.audio.AudioPlayer;\nimport net.runelite.client.ui.DrawManager;\nimport net.runelite.client.util.ImageCapture;\n\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.concurrent.TimeUnit;\n\nimport net.runelite.client.RuneLite;\n\n@Slf4j\n@PluginDescriptor(\n        name \u003d \"New Game Plus\"\n)\npublic class NewGamePlusPlugin extends Plugin {\n    @Inject\n    private Client client;\n\n    @Inject\n    private NewGamePlusConfig config;\n\n    @Inject\n    private ClientThread clientThread;\n\n    @Inject\n    private OverlayManager overlayManager;\n\n    @Inject\n    private NewGamePlusOverlay overlay;\n\n    @Inject\n    private NewGamePlusUnlockOverlay unlockOverlay;\n\n    @Inject\n    private ConfigManager configManager;\n\n    @Inject\n    private ClientToolbar clientToolbar;\n\n    @Inject\n    private ClientUI clientUI;\n\n    @Inject\n    private ItemManager itemManager;\n\n    @Inject\n    private ChatboxItemSearch chatboxItemSearch;\n\n    @Inject\n    private DrawManager drawManager;\n\n    @Inject\n    private ImageCapture imageCapture;\n\n    private NavigationButton navButton;\n    private NewGamePlusPanel panel;\n\n    // Background executor for playing custom unlock sounds\n    private ExecutorService audioExecutor;\n\n    // Background executor for saving screenshots (scheduled to allow delayed capture)\n    private ScheduledExecutorService screenshotExecutor;\n\n    // In-memory set of unlocked item IDs. Initially empty -\u003e everything is locked.\n    private final Set\u003cInteger\u003e unlockedItemIds \u003d new HashSet\u003c\u003e();\n\n    // Snapshot of inventory counts used to detect newly added items (treated as picked up -\u003e unlock)\n    private final Map\u003cInteger, Integer\u003e inventoryCounts \u003d new HashMap\u003c\u003e();\n\n    // Guard to avoid treating the initial inventory load as \"picked up\"\n    private boolean inventorySnapshotInitialized \u003d false;\n\n    // Compiled patterns representing unlocked name families (variants)\n    private final List\u003cPattern\u003e unlockedNamePatterns \u003d new ArrayList\u003c\u003e();\n\n    // Compiled patterns for default-locked name families loaded from resources\n    private final List\u003cPattern\u003e defaultLockedPatterns \u003d new ArrayList\u003c\u003e();\n\n    @Override\n    protected void startUp() throws Exception {\n        // Load persisted unlocks\n        loadUnlockedFromConfig();\n        rebuildUnlockedNames();\n        loadDefaultLockedNames();\n        inventorySnapshotInitialized \u003d false;\n        // Defer inventory snapshot to when we are LOGGED_IN, on the client thread\n        clientThread.invoke(() -\u003e {\n            if (client.getGameState() \u003d\u003d GameState.LOGGED_IN) {\n                initializeInventorySnapshot();\n            }\n        });\n\n        // Register overlay to dim inventory items\n        overlayManager.add(overlay);\n        // Register unlock popup overlay\n        overlayManager.add(unlockOverlay);\n\n        // Prepare audio executor and ensure custom sound directory exists\n        audioExecutor \u003d Executors.newSingleThreadExecutor(r -\u003e {\n            Thread t \u003d new Thread(r, \"ngp-audio\");\n            t.setDaemon(true);\n            return t;\n        });\n        try {\n            Path dir \u003d RuneLite.RUNELITE_DIR.toPath().resolve(\"new-game-plus\");\n            Files.createDirectories(dir);\n        } catch (IOException ignored) {\n        }\n\n        // Prepare screenshot executor (scheduled) for delayed capture\n        screenshotExecutor \u003d Executors.newSingleThreadScheduledExecutor(r -\u003e {\n            Thread t \u003d new Thread(r, \"ngp-screenshot\");\n            t.setDaemon(true);\n            return t;\n        });\n\n        // Create and add sidebar panel\n        panel \u003d new NewGamePlusPanel(this, itemManager, client);\n        BufferedImage icon \u003d null;\n        try {\n            icon \u003d ImageUtil.loadImageResource(NewGamePlusPlugin.class, \"/newgameplus-icon.png\");\n            if (icon !\u003d null \u0026\u0026 (icon.getWidth() !\u003d 16 || icon.getHeight() !\u003d 16)) {\n                icon \u003d ImageUtil.resizeImage(icon, 16, 16);\n            }\n        } catch (Exception e) {\n            // ignore and fallback below\n        }\n        if (icon \u003d\u003d null) {\n            icon \u003d new BufferedImage(16, 16, BufferedImage.TYPE_INT_ARGB);\n        }\n        navButton \u003d NavigationButton.builder()\n                .tooltip(\"New Game Plus\")\n                .icon(icon)\n                .priority(7)\n                .panel(panel)\n                .build();\n        clientToolbar.addNavigation(navButton);\n        // Ensure the panel reflects any unlocks just loaded from config\n        if (panel !\u003d null) {\n            panel.refreshFromPlugin();\n        }\n    }\n\n    @Override\n    protected void shutDown() throws Exception {\n        unlockedItemIds.clear();\n        inventoryCounts.clear();\n        inventorySnapshotInitialized \u003d false;\n        overlayManager.remove(overlay);\n        if (unlockOverlay !\u003d null) {\n            overlayManager.remove(unlockOverlay);\n            unlockOverlay.clear();\n        }\n        if (audioExecutor !\u003d null) {\n            audioExecutor.shutdownNow();\n            audioExecutor \u003d null;\n        }\n        if (screenshotExecutor !\u003d null) {\n            screenshotExecutor.shutdownNow();\n            screenshotExecutor \u003d null;\n        }\n        if (navButton !\u003d null) {\n            clientToolbar.removeNavigation(navButton);\n            navButton \u003d null;\n            panel \u003d null;\n        }\n    }\n\n    @Subscribe\n    public void onServerNpcLoot(final ServerNpcLoot event) {\n\n\n        final java.util.Collection\u003cnet.runelite.client.game.ItemStack\u003e items \u003d event.getItems();\n        if (items \u003d\u003d null || items.isEmpty()) {\n            return;\n        }\n\n        boolean changed \u003d false;\n        for (net.runelite.client.game.ItemStack is : items) {\n            if (is \u003d\u003d null) {\n                continue;\n            }\n            int id \u003d is.getId();\n            if (id \u003c\u003d 0) {\n                continue;\n            }\n            // Only auto-unlock if the item is currently locked\n            if (isLocked(id) \u0026\u0026 unlockedItemIds.add(id)) {\n                changed \u003d true;\n                // If the item was locked, unlock it and notify the user with selected configuration notifications\n                try {\n                    String name \u003d itemManager.getItemComposition(id).getName();\n                    postGameMessage(ColorUtil.prependColorTag(\"NG+: Unlocked \" + name + \"!\", new Color(197, 27, 138)));\n                    showUnlockPopup(id);\n                    playUnlockSound();\n                    takeUnlockScreenshot(name);\n                } catch (Exception ignored) {\n                }\n            }\n        }\n\n        if (changed) {\n            saveUnlockedToConfig();\n            rebuildUnlockedNames();\n            if (panel !\u003d null) {\n                panel.refreshFromPlugin();\n            }\n        }\n    }\n\n    @Subscribe\n    public void onLootReceived(final LootReceived event) {\n\n\n        final LootRecordType type \u003d event.getType();\n        // Only handle chest-style/non-NPC rewards; NPC kills handled by onServerNpcLoot\n        if (type !\u003d LootRecordType.EVENT) {\n            return;\n        }\n\n        final java.util.Collection\u003cnet.runelite.client.game.ItemStack\u003e items \u003d event.getItems();\n        if (items \u003d\u003d null || items.isEmpty()) {\n            return;\n        }\n\n        boolean changed \u003d false;\n        for (net.runelite.client.game.ItemStack is : items) {\n            if (is \u003d\u003d null) {\n                continue;\n            }\n            final int id \u003d is.getId();\n            if (id \u003c\u003d 0) {\n                continue;\n            }\n            if (isLocked(id) \u0026\u0026 unlockedItemIds.add(id)) {\n                changed \u003d true;\n                try {\n                    String name \u003d itemManager.getItemComposition(id).getName();\n                    postGameMessage(ColorUtil.prependColorTag(\"NG+: Unlocked \" + name + \"!\", new Color(197, 27, 138)));\n                    showUnlockPopup(id);\n                    playUnlockSound();\n                    takeUnlockScreenshot(name);\n                } catch (Exception ignored) {\n                }\n            }\n        }\n\n        if (changed) {\n            saveUnlockedToConfig();\n            rebuildUnlockedNames();\n            if (panel !\u003d null) {\n                panel.refreshFromPlugin();\n            }\n        }\n    }\n\n    @Subscribe\n    public void onGameStateChanged(GameStateChanged gameStateChanged) {\n        if (gameStateChanged.getGameState() \u003d\u003d GameState.LOGGED_IN) {\n            // Reset and initialize snapshot on the client thread after login\n            inventorySnapshotInitialized \u003d false;\n            clientThread.invoke(this::initializeInventorySnapshot);\n        }\n    }\n\n    @Subscribe\n    public void onConfigChanged(ConfigChanged event) {\n        if (!\"newgameplus\".equals(event.getGroup())) {\n            return;\n        }\n        if (\"unlockedItemIds\".equals(event.getKey())) {\n            loadUnlockedFromConfig();\n            rebuildUnlockedNames();\n            if (panel !\u003d null) {\n                panel.refreshFromPlugin();\n            }\n        }\n    }\n\n    @Subscribe\n    public void onClientTick(ClientTick tick) {\n        // Keep blocked entries visible but faded (deprioritized); leave allowed entries (e.g., Take/Examine/Cancel) as-is\n        MenuEntry[] entries \u003d client.getMenuEntries();\n        if (entries \u003d\u003d null || entries.length \u003d\u003d 0) {\n            return;\n        }\n\n        boolean mutated \u003d false;\n        for (MenuEntry entry : entries) {\n            if (!allowMenuEntry(entry)) {\n                // Fade out disallowed entries on locked items\n                entry.setDeprioritized(true);\n                String option \u003d entry.getOption();\n                if (option !\u003d null \u0026\u0026 !isColored(option)) {\n                    entry.setOption(ColorUtil.prependColorTag(option, Color.GRAY));\n                }\n                String target \u003d entry.getTarget();\n                if (target !\u003d null) {\n                    entry.setTarget(ColorUtil.prependColorTag(Text.removeTags(target), Color.GRAY));\n                }\n                mutated \u003d true;\n            }\n        }\n\n        if (mutated) {\n            client.setMenuEntries(entries);\n        }\n    }\n\n    @Subscribe\n    public void onMenuEntryAdded(MenuEntryAdded event) {\n        final int itemId \u003d event.getItemId();\n        final String option \u003d event.getOption();\n        if (itemId \u003c\u003d 0 || option \u003d\u003d null) {\n            return;\n        }\n\n        if (allowOption(itemId, option)) {\n            return;\n        }\n\n        MenuEntry[] entries \u003d client.getMenuEntries();\n        if (entries \u003d\u003d null || entries.length \u003d\u003d 0) {\n            return;\n        }\n        MenuEntry last \u003d entries[entries.length - 1];\n        last.setDeprioritized(true);\n        String lastOpt \u003d last.getOption();\n        if (lastOpt !\u003d null \u0026\u0026 !isColored(lastOpt)) {\n            last.setOption(ColorUtil.prependColorTag(lastOpt, Color.GRAY));\n        }\n        String target \u003d last.getTarget();\n        if (target !\u003d null) {\n            last.setTarget(ColorUtil.prependColorTag(Text.removeTags(target), Color.GRAY));\n        }\n        client.setMenuEntries(entries);\n    }\n\n    @Subscribe\n    public void onScriptCallbackEvent(ScriptCallbackEvent event)\n    {\n        // Integrate with bank search filtering. When the user searches exactly \"unlocked\" (or \"locked\"),\n        // filter bank items by our lock state.\n        if (!\"bankSearchFilter\".equals(event.getEventName()))\n        {\n            return;\n        }\n\n        // Stack layout mirrors BankPlugin\u0027s usage: top of int stack has itemId,\n        // and writing 1 to intStack[intStackSize - 2] signals a match.\n        int[] intStack \u003d client.getIntStack();\n        Object[] objectStack \u003d client.getObjectStack();\n        int intStackSize \u003d client.getIntStackSize();\n        int objectStackSize \u003d client.getObjectStackSize();\n\n        if (intStackSize \u003c 2 || objectStackSize \u003c 1)\n        {\n            return;\n        }\n\n        final int itemId \u003d intStack[intStackSize - 1];\n        final Object searchObj \u003d objectStack[objectStackSize - 1];\n        if (!(searchObj instanceof String))\n        {\n            return;\n        }\n        final String searchRaw \u003d (String) searchObj;\n        final String search \u003d Text.removeTags(searchRaw).toLowerCase().trim();\n\n        if (search.equals(\"is:unlocked\"))\n        {\n            // Only include items that were default-locked by the plugin and are now unlocked\n            if (wasDefaultLocked(itemId) \u0026\u0026 !isLocked(itemId))\n            {\n                intStack[intStackSize - 2] \u003d 1; // match\n            }\n        }\n        else if (search.equals(\"is:locked\"))\n        {\n            if (isLocked(itemId))\n            {\n                intStack[intStackSize - 2] \u003d 1; // match\n            }\n        }\n    }\n\n    @Subscribe\n    public void onMenuOptionClicked(MenuOptionClicked event) {\n        MenuEntry entry \u003d event.getMenuEntry();\n        if (entry \u003d\u003d null) {\n            return;\n        }\n\n        final String option \u003d entry.getOption();\n        final int itemId \u003d entry.getItemId();\n        // Only consume item interactions that are not allowed for locked items.\n        if (itemId \u003e 0 \u0026\u0026 !allowOption(itemId, option)) {\n            event.consume();\n        }\n    }\n\n    @Subscribe\n    public void onItemContainerChanged(ItemContainerChanged event) {\n        if (event.getContainerId() !\u003d InventoryID.INVENTORY.getId()) {\n            return;\n        }\n\n        ItemContainer container \u003d event.getItemContainer();\n        if (container \u003d\u003d null) {\n            return;\n        }\n\n        // On the first inventory container load after login, build the baseline snapshot and do NOT unlock items\n        if (!inventorySnapshotInitialized) {\n            inventoryCounts.clear();\n            for (Item item : container.getItems()) {\n                if (item \u003d\u003d null) {\n                    continue;\n                }\n                int id \u003d item.getId();\n                if (id \u003c\u003d 0) {\n                    continue;\n                }\n                inventoryCounts.merge(id, item.getQuantity(), Integer::sum);\n            }\n            inventorySnapshotInitialized \u003d true;\n            return;\n        }\n\n        // Detect newly added items and unlock those item IDs\n        Map\u003cInteger, Integer\u003e newCounts \u003d new HashMap\u003c\u003e();\n        for (Item item : container.getItems()) {\n            if (item \u003d\u003d null) {\n                continue;\n            }\n            int id \u003d item.getId();\n            if (id \u003c\u003d 0) {\n                continue;\n            }\n            newCounts.merge(id, item.getQuantity(), Integer::sum);\n        }\n\n        for (Map.Entry\u003cInteger, Integer\u003e e : newCounts.entrySet()) {\n            int id \u003d e.getKey();\n            int newQty \u003d e.getValue();\n            int oldQty \u003d inventoryCounts.getOrDefault(id, 0);\n            if (newQty \u003e oldQty) {\n                if (isLocked(id) \u0026\u0026 unlockedItemIds.add(id)) {\n                    log.debug(\"Unlocked item id {} via inventory increase ({} -\u003e {})\", id, oldQty, newQty);\n                    try {\n                        String name \u003d itemManager.getItemComposition(id).getName();\n                        postGameMessage(ColorUtil.prependColorTag(\"NG+: Unlocked \" + name + \"!\", new Color(197, 27, 138)));\n                        showUnlockPopup(id);\n                        playUnlockSound();\n                        takeUnlockScreenshot(name);\n                    } catch (Exception ignored) {\n                    }\n                    saveUnlockedToConfig();\n                    rebuildUnlockedNames();\n                    if (panel !\u003d null) {\n                        panel.refreshFromPlugin();\n                    }\n                }\n            }\n        }\n\n        // Update snapshot\n        inventoryCounts.clear();\n        inventoryCounts.putAll(newCounts);\n    }\n\n    private void initializeInventorySnapshot() {\n        // Rebuild snapshot fresh each time\n        inventoryCounts.clear();\n        ItemContainer inv \u003d client.getItemContainer(InventoryID.INVENTORY);\n        if (inv \u003d\u003d null) {\n            return;\n        }\n        for (Item item : inv.getItems()) {\n            if (item \u003d\u003d null) {\n                continue;\n            }\n            int id \u003d item.getId();\n            if (id \u003c\u003d 0) {\n                continue;\n            }\n            inventoryCounts.merge(id, item.getQuantity(), Integer::sum);\n        }\n        inventorySnapshotInitialized \u003d true;\n    }\n\n    private boolean allowMenuEntry(MenuEntry entry) {\n        // Only consider entries tied to an item id\n        int itemId \u003d entry.getItemId();\n        if (itemId \u003c\u003d 0) {\n            return true; // not an item interaction\n        }\n\n        return allowOption(itemId, entry.getOption());\n    }\n\n    private boolean allowOption(int itemId, String option) {\n        // If item is unlocked, allow normal behavior\n        if (!isLocked(itemId)) {\n            return true;\n        }\n\n        // Blacklist approach: disallow specific actions on locked items; allow everything else\n        if (option \u003d\u003d null) {\n            return true; // not an actionable verb we recognize; allow\n        }\n\n        // Compare without any color tags, case-insensitive\n        String opt \u003d Text.removeTags(option).toLowerCase();\n\n        // Disallowed verbs for locked items\n        // - wear, wield, use, check, revert\n        // - withdraw and all variants (withdraw-1, withdraw-5, withdraw-all, withdraw-all but one, etc.)\n        if (opt.equals(\"wear\")\n                || opt.equals(\"wield\")\n                || opt.equals(\"use\")\n                || opt.equals(\"check\")\n                || opt.equals(\"revert\")\n                || opt.startsWith(\"withdraw\")) {\n            return false;\n        }\n\n        // Everything else is allowed (e.g. take, examine, cancel, view/select, deposit, etc.)\n        return true;\n    }\n\n    // Determine if an item is locked considering user unlocks (by id and by name) and default-locked names\n    public boolean isLocked(int itemId) {\n        if (itemId \u003c\u003d 0) {\n            return false;\n        }\n        // Explicit user unlocks by id\n        if (unlockedItemIds.contains(itemId)) {\n            return false;\n        }\n        // Resolve name for name-based checks\n        String normName;\n        try {\n            String name \u003d itemManager.getItemComposition(itemId).getName();\n            normName \u003d normalizeName(name);\n        } catch (Exception e) {\n            // If we cannot resolve the name, do not over-lock\n            return false;\n        }\n\n        // User unlocks by name families (variant unlocking via wildcard patterns)\n        for (Pattern p : unlockedNamePatterns) {\n            if (p.matcher(normName).matches()) {\n                return false;\n            }\n        }\n\n        // Apply default locks (name families via wildcard patterns)\n        for (Pattern p : defaultLockedPatterns) {\n            if (p.matcher(normName).matches()) {\n                return true;\n            }\n        }\n\n        // Otherwise unlocked by default\n        return false;\n    }\n\n    // Determine if an item would be considered default-locked based on name families\n    private boolean wasDefaultLocked(int itemId)\n    {\n        if (itemId \u003c\u003d 0)\n        {\n            return false;\n        }\n        String normName;\n        try\n        {\n            String name \u003d itemManager.getItemComposition(itemId).getName();\n            normName \u003d normalizeName(name);\n        }\n        catch (Exception e)\n        {\n            return false;\n        }\n        for (Pattern p : defaultLockedPatterns)\n        {\n            if (p.matcher(normName).matches())\n            {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    private boolean isColored(String s) {\n        if (s \u003d\u003d null) {\n            return false;\n        }\n        String lower \u003d s.toLowerCase();\n        return lower.contains(\"\u003ccol\u003d\") || lower.contains(\"\u003c/col\u003e\");\n    }\n\n    private String normalizeName(String name) {\n        if (name \u003d\u003d null) {\n            return \"\";\n        }\n        return Text.removeTags(name).toLowerCase().trim();\n    }\n\n    private void rebuildUnlockedNames() {\n        // Ensure we run on the client thread since ItemManager access requires it\n        clientThread.invoke(this::rebuildUnlockedNamesUnsafe);\n    }\n\n    private void rebuildUnlockedNamesUnsafe() {\n        unlockedNamePatterns.clear();\n        for (int id : unlockedItemIds) {\n            try {\n                String nm \u003d itemManager.getItemComposition(id).getName();\n                String norm \u003d normalizeName(nm);\n\n                boolean mapped \u003d false;\n                // If this unlocked name falls under any default-locked family, unlock that family\n                for (Pattern p : defaultLockedPatterns) {\n                    if (p.matcher(norm).matches()) {\n                        unlockedNamePatterns.add(p);\n                        mapped \u003d true;\n                    }\n                }\n                // Otherwise, unlock its own family compiled from the name\n                if (!mapped) {\n                    unlockedNamePatterns.add(compileNameFamilyPattern(norm));\n                }\n            } catch (Exception ignored) {\n            }\n        }\n    }\n\n    private void postGameMessage(String message) {\n        if (message \u003d\u003d null) {\n            return;\n        }\n        clientThread.invoke(() -\u003e client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", message, null));\n    }\n\n    private void showUnlockPopup(int itemId) {\n        if (!config.showUnlockPopup() || unlockOverlay \u003d\u003d null) {\n            return;\n        }\n        clientThread.invoke(() -\u003e\n        {\n            String nm;\n            try {\n                nm \u003d client.getItemDefinition(itemId).getName();\n            } catch (Exception e) {\n                nm \u003d \"Unknown item\";\n            }\n            unlockOverlay.enqueueUnlock(itemId, nm);\n        });\n    }\n\n    private void playUnlockSound() {\n        if (audioExecutor \u003d\u003d null || !config.playUnlockSound()) {\n            return;\n        }\n        final Path soundPath \u003d RuneLite.RUNELITE_DIR.toPath()\n                .resolve(\"new-game-plus\")\n                .resolve(\"new-game-plus-unlock.wav\");\n        if (!Files.exists(soundPath)) {\n            return;\n        }\n\n        audioExecutor.submit(() -\u003e\n        {\n            try {\n                int vol \u003d Math.max(0, Math.min(100, config.unlockSoundVolume()));\n                // Map 0..100 volume to a reasonable dB range (-80dB \u003d silent, 0dB \u003d no boost)\n                float gainDb \u003d -80.0f + (vol / 100.0f) * 80.0f;\n                new AudioPlayer().play(soundPath.toFile(), gainDb);\n            } catch (Throwable t) {\n                log.debug(\"NG+: unlock sound failed: {}\", t.getMessage());\n            }\n        });\n    }\n\n    private void takeUnlockScreenshot(String itemName) {\n        if (!config.screenshotOnUnlock()) {\n            return;\n        }\n        if (client.getGameState() \u003d\u003d GameState.LOGIN_SCREEN) {\n            return;\n        }\n\n        final String base \u003d \"Unlock (\" + (itemName \u003d\u003d null ? \"item\" : itemName) + \")\";\n        final String fileName \u003d sanitizeFilename(base);\n\n        // Delay to allow the notification/popup to render before capture\n        if (screenshotExecutor !\u003d null) {\n            screenshotExecutor.schedule(() -\u003e {\n                // Capture next frame and save asynchronously\n                drawManager.requestNextFrameListener(image -\u003e {\n                    if (screenshotExecutor \u003d\u003d null) {\n                        return;\n                    }\n                    screenshotExecutor.submit(() -\u003e {\n                        try {\n                            BufferedImage bi \u003d ImageUtil.bufferedImageFromImage(image);\n                            imageCapture.saveScreenshot(bi, fileName, \"New Game Plus\", false, false);\n                        } catch (Exception e) {\n                            log.debug(\"NG+: screenshot failed: {}\", e.getMessage());\n                        }\n                    });\n                });\n            }, 1300, TimeUnit.MILLISECONDS);\n        }\n    }\n\n    private String sanitizeFilename(String s) {\n        if (s \u003d\u003d null) {\n            return \"unlock\";\n        }\n        s \u003d Text.removeTags(s).trim();\n        return s.replaceAll(\"[\\\\\\\\/:*?\\\"\u003c\u003e|]\", \"_\");\n    }\n\n    // Load default-locked name families (always enabled)\n    private void loadDefaultLockedNames() {\n        defaultLockedPatterns.clear();\n        readDefaultNamesResource(\"/default-locks/bosses.txt\");\n        readDefaultNamesResource(\"/default-locks/raids.txt\");\n        readDefaultNamesResource(\"/default-locks/slayer.txt\");\n        // Rebuild unlocked name patterns to map unlocks to the current default families\n        rebuildUnlockedNames();\n    }\n\n    private void readDefaultNamesResource(String resourcePath) {\n        try (InputStream is \u003d NewGamePlusPlugin.class.getResourceAsStream(resourcePath)) {\n            if (is \u003d\u003d null) {\n                log.debug(\"Default lock resource not found: {}\", resourcePath);\n                return;\n            }\n            try (BufferedReader br \u003d new BufferedReader(new InputStreamReader(is, StandardCharsets.UTF_8))) {\n                String line;\n                while ((line \u003d br.readLine()) !\u003d null) {\n                    String trimmed \u003d line.trim();\n                    if (trimmed.isEmpty() || trimmed.startsWith(\"#\")) {\n                        continue;\n                    }\n                    String norm \u003d normalizeName(trimmed);\n                    defaultLockedPatterns.add(compileNameFamilyPattern(norm));\n                }\n            }\n        } catch (Exception e) {\n            log.warn(\"Failed reading default lock resource {}\", resourcePath, e);\n        }\n    }\n\n    // Build a regex that matches any name containing the tokens (in order), allowing extra words/prefixes/suffixes\n    private Pattern compileNameFamilyPattern(String base) {\n        if (base \u003d\u003d null) {\n            base \u003d \"\";\n        }\n        String[] tokens \u003d base.toLowerCase().split(\"[^a-z0-9]+\");\n        StringBuilder re \u003d new StringBuilder();\n        re.append(\".*\");\n        for (String tk : tokens) {\n            if (tk.isEmpty()) {\n                continue;\n            }\n            re.append(\"\\\\b\").append(java.util.regex.Pattern.quote(tk)).append(\"\\\\b\").append(\".*\");\n        }\n        return java.util.regex.Pattern.compile(re.toString());\n    }\n\n    private void loadUnlockedFromConfig() {\n        String csv \u003d configManager.getConfiguration(\"newgameplus\", \"unlockedItemIds\");\n        unlockedItemIds.clear();\n        if (csv \u003d\u003d null || csv.isEmpty()) {\n            return;\n        }\n        String[] parts \u003d csv.split(\",\");\n        for (String p : parts) {\n            try {\n                int id \u003d Integer.parseInt(p.trim());\n                if (id \u003e 0) {\n                    unlockedItemIds.add(id);\n                }\n            } catch (NumberFormatException ignored) {\n            }\n        }\n    }\n\n    private void saveUnlockedToConfig() {\n        StringBuilder sb \u003d new StringBuilder();\n        for (Integer id : unlockedItemIds) {\n            if (sb.length() \u003e 0) {\n                sb.append(\u0027,\u0027);\n            }\n            sb.append(id);\n        }\n        configManager.setConfiguration(\"newgameplus\", \"unlockedItemIds\", sb.toString());\n    }\n\n    // Read unlocked IDs directly from persisted config\n    public java.util.Set\u003cInteger\u003e getUnlockedItemIdsFromConfig() {\n        java.util.Set\u003cInteger\u003e ids \u003d new java.util.HashSet\u003c\u003e();\n        String csv \u003d configManager.getConfiguration(\"newgameplus\", \"unlockedItemIds\");\n        if (csv \u003d\u003d null || csv.isEmpty()) {\n            return ids;\n        }\n        String[] parts \u003d csv.split(\",\");\n        for (String p : parts) {\n            try {\n                int id \u003d Integer.parseInt(p.trim());\n                if (id \u003e 0) {\n                    ids.add(id);\n                }\n            } catch (NumberFormatException ignored) {\n            }\n        }\n        return ids;\n    }\n\n    // Expose helpers for panel\n    public java.util.Set\u003cInteger\u003e getUnlockedItemIds() {\n        return new java.util.HashSet\u003c\u003e(unlockedItemIds);\n    }\n\n    public void addUnlock(int id) {\n        if (id \u003c\u003d 0) {\n            return;\n        }\n        if (unlockedItemIds.add(id)) {\n            saveUnlockedToConfig();\n            rebuildUnlockedNames();\n            if (panel !\u003d null) {\n                panel.refreshFromPlugin();\n            }\n        }\n    }\n\n    public void removeUnlock(int id) {\n        if (unlockedItemIds.remove(id)) {\n            saveUnlockedToConfig();\n            rebuildUnlockedNames();\n            if (panel !\u003d null) {\n                panel.refreshFromPlugin();\n            }\n        }\n    }\n\n    public void clearAllUnlocks() {\n        if (unlockedItemIds.isEmpty()) {\n            return;\n        }\n        unlockedItemIds.clear();\n        saveUnlockedToConfig();\n        rebuildUnlockedNames();\n        if (panel !\u003d null) {\n            panel.refreshFromPlugin();\n        }\n        postGameMessage(\"NG+: Cleared all unlocks\");\n    }\n\n    public String getItemName(int id) {\n        try {\n            return itemManager.getItemComposition(id).getName();\n        } catch (Exception e) {\n            return \"Unknown item\";\n        }\n    }\n\n    // Build the panel entries on the client thread to satisfy item definition access\n    public void refreshPanelAsync(NewGamePlusPanel targetPanel) {\n        clientThread.invoke(() -\u003e\n        {\n            Map\u003cInteger, String\u003e idToName \u003d new HashMap\u003c\u003e();\n            for (int id : getUnlockedItemIdsFromConfig()) {\n                String name;\n                try {\n                    name \u003d client.getItemDefinition(id).getName();\n                } catch (Exception e) {\n                    name \u003d \"Unknown item\";\n                }\n                idToName.put(id, name);\n            }\n            if (targetPanel !\u003d null) {\n                targetPanel.setEntries(idToName);\n            }\n        });\n    }\n\n    // Open an in-game chatbox search to add an unlocked item by name\n    public void openAddItemSearch() {\n        clientThread.invoke(() -\u003e\n        {\n            // Ensure the RuneLite client (and chatbox input) has keyboard focus after clicking the sidebar button\n            if (clientUI !\u003d null) {\n                clientUI.requestFocus();\n            }\n\n            chatboxItemSearch\n                    .tooltipText(\"Click a lockable item to add to unlocks\")\n                    .onItemSelected(id -\u003e\n                    {\n                        if (id !\u003d null \u0026\u0026 id \u003e 0) {\n                            // Only accept items that belong to a default-locked family\n                            boolean lockable \u003d false;\n                            try {\n                                String nm \u003d client.getItemDefinition(id).getName();\n                                String norm \u003d normalizeName(nm);\n                                for (java.util.regex.Pattern p : defaultLockedPatterns) {\n                                    if (p.matcher(norm).matches()) {\n                                        lockable \u003d true;\n                                        break;\n                                    }\n                                }\n                            } catch (Exception ignored) {\n                            }\n                            if (!lockable) {\n                                postGameMessage(\"NG+: That item is not in the lockable lists. Pick another.\");\n                                // Reopen the restricted search to try again\n                                openAddItemSearch();\n                                return;\n                            }\n\n                            addUnlock(id);\n                            String name;\n                            try {\n                                name \u003d client.getItemDefinition(id).getName();\n                            } catch (Exception e) {\n                                name \u003d \"Unknown item\";\n                            }\n                            postGameMessage(\"NG+: Added \" + name + \" to unlocks\");\n                        }\n                    })\n                    .prompt(\"Search lockable item to unlock\")\n                    .build();\n        });\n    }\n\n    @Provides\n    NewGamePlusConfig provideConfig(ConfigManager configManager) {\n        return configManager.getConfig(NewGamePlusConfig.class);\n    }\n}\n","filePath":"src\\main\\java\\com\\newgameplus\\NewGamePlusPlugin.java"},{"fileName":"NewGamePlusUnlockOverlay.java","content":"package com.newgameplus;\n\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\n\nimport javax.inject.Inject;\nimport java.awt.AlphaComposite;\nimport java.awt.BasicStroke;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Font;\nimport java.awt.FontMetrics;\nimport java.awt.Graphics2D;\nimport java.awt.RenderingHints;\nimport java.awt.image.BufferedImage;\nimport java.time.Duration;\nimport java.util.ArrayDeque;\nimport java.util.Deque;\n\n// Overlay that displays a center-top popup with the unlocked item\u0027s icon and name\npublic class NewGamePlusUnlockOverlay extends Overlay {\n    private static final int PADDING \u003d 8;\n    private static final int SPACING \u003d 8;\n    private static final int ARC \u003d 8;\n    // Timing: fade-in, hold full opacity ~5s, fade-out\n    private static final long FADE_IN_MS \u003d 400;\n    private static final long FULL_MS \u003d Duration.ofSeconds(4).toMillis();\n    private static final long FADE_OUT_MS \u003d 400;\n    private static final long TOTAL_MS \u003d FADE_IN_MS + FULL_MS + FADE_OUT_MS;\n\n    private final ItemManager itemManager;\n    private final Deque\u003cNotification\u003e queue \u003d new ArrayDeque\u003c\u003e();\n    private Notification current;\n    private long currentStart;\n\n    @Inject\n    public NewGamePlusUnlockOverlay(ItemManager itemManager) {\n        this.itemManager \u003d itemManager;\n        setLayer(OverlayLayer.ABOVE_WIDGETS);\n        setPriority(OverlayPriority.HIGH);\n        setPosition(OverlayPosition.TOP_CENTER);\n    }\n\n    public void enqueueUnlock(int itemId, String itemName) {\n        if (itemId \u003c\u003d 0) {\n            return;\n        }\n        queue.add(new Notification(itemId, itemName));\n    }\n\n    public void clear() {\n        queue.clear();\n        current \u003d null;\n        currentStart \u003d 0L;\n    }\n\n    @Override\n    public Dimension render(Graphics2D g) {\n        long now \u003d System.currentTimeMillis();\n        if (current \u003d\u003d null) {\n            current \u003d queue.pollFirst();\n            currentStart \u003d now;\n        } else if (now - currentStart \u003e TOTAL_MS) {\n            current \u003d queue.pollFirst();\n            currentStart \u003d now;\n        }\n\n        if (current \u003d\u003d null) {\n            return null;\n        }\n\n        // Resolve image lazily\n        if (current.image \u003d\u003d null) {\n            try {\n                current.image \u003d itemManager.getImage(current.itemId);\n            } catch (Exception ignored) {\n            }\n        }\n\n        BufferedImage img \u003d current.image;\n        int imgW \u003d img !\u003d null ? img.getWidth() : 0;\n        int imgH \u003d img !\u003d null ? img.getHeight() : 0;\n\n        // Rendering setup\n        g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n        g.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);\n        g.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);\n        g.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\n\n        // Use RuneLite\u0027s standard fonts for crisp overlay text\n        Font titleFont \u003d FontManager.getRunescapeBoldFont();\n        Font nameFont \u003d FontManager.getRunescapeFont();\n\n        // Strings\n        String title \u003d \"NG+: New unlock\";\n        String name \u003d current.itemName !\u003d null ? current.itemName : \"Unknown item\";\n\n        // Measure\n        g.setFont(titleFont);\n        FontMetrics fmTitle \u003d g.getFontMetrics();\n        int titleW \u003d fmTitle.stringWidth(title);\n        int titleH \u003d fmTitle.getAscent();\n\n        g.setFont(nameFont);\n        FontMetrics fmName \u003d g.getFontMetrics();\n        int nameW \u003d fmName.stringWidth(name);\n        int nameH \u003d fmName.getAscent();\n\n        int rightColW \u003d Math.max(titleW, nameW);\n        int contentW \u003d imgW + (imgW \u003e 0 ? SPACING : 0) + rightColW;\n        int contentH \u003d Math.max(imgH, titleH + 4 + nameH);\n\n        int boxW \u003d contentW + PADDING * 2;\n        int boxH \u003d contentH + PADDING * 2;\n\n        // Compute alpha for fade-in/out\n        long elapsed \u003d now - currentStart;\n        float alpha;\n        if (elapsed \u003c FADE_IN_MS) {\n            alpha \u003d Math.max(0f, Math.min(1f, (float) elapsed / (float) FADE_IN_MS));\n        } else if (elapsed \u003c FADE_IN_MS + FULL_MS) {\n            alpha \u003d 1f;\n        } else {\n            long t \u003d elapsed - (FADE_IN_MS + FULL_MS);\n            alpha \u003d 1f - Math.max(0f, Math.min(1f, (float) t / (float) FADE_OUT_MS));\n        }\n\n        // Use RuneLite color scheme for a clean, native look\n        Color bg \u003d ColorScheme.DARKER_GRAY_COLOR;\n        Color border \u003d ColorScheme.DARK_GRAY_COLOR;\n        Color titleColor \u003d new Color(210, 180, 64); // gold-ish accent similar to OSRS\n\n        g.setComposite(AlphaComposite.SrcOver.derive(alpha));\n\n        // Subtle drop shadow\n        g.setColor(new Color(0, 0, 0, 90));\n        g.fillRoundRect(2, 3, boxW, boxH, ARC, ARC);\n\n        // Panel background and border\n        g.setColor(bg);\n        g.fillRoundRect(0, 0, boxW, boxH, ARC, ARC);\n        g.setColor(border);\n        g.setStroke(new BasicStroke(1.5f));\n        g.drawRoundRect(0, 0, boxW, boxH, ARC, ARC);\n\n        int x \u003d PADDING;\n        int y \u003d PADDING;\n\n        // Draw item image\n        if (img !\u003d null) {\n            int imgY \u003d y + (contentH - imgH) / 2;\n            g.drawImage(img, x, imgY, null);\n            x +\u003d imgW + (imgW \u003e 0 ? SPACING : 0);\n        }\n\n        // Draw title and name stacked\n        g.setFont(titleFont);\n        g.setColor(titleColor);\n        int titleY \u003d y + fmTitle.getAscent();\n        g.drawString(title, x, titleY);\n\n        g.setFont(nameFont);\n        g.setColor(Color.WHITE);\n        int nameY \u003d titleY + 4 + fmName.getAscent();\n        g.drawString(name, x, nameY);\n\n        return new Dimension(boxW, boxH);\n    }\n\n    private static class Notification {\n        final int itemId;\n        final String itemName;\n        BufferedImage image;\n\n        Notification(int itemId, String itemName) {\n            this.itemId \u003d itemId;\n            this.itemName \u003d itemName;\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\newgameplus\\NewGamePlusUnlockOverlay.java"},{"fileName":"NewGamePlusPluginTest.java","content":"package com.newgameplus;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class NewGamePlusPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(NewGamePlusPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\newgameplus\\NewGamePlusPluginTest.java"}]},{"commit":"bbd7986bd83fda93c79482e655e386573bd8586b","repository":"https://github.com/Newbcake/Surge-Potion-Notifier.git","internalName":"surge-potion-notifier","files":[{"fileName":"SurgePotionNotifierConfig.java","content":"package com.surgepotionnotifier;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.Range;\n\nimport java.awt.*;\n\n@ConfigGroup(\"surgepotionnotifier\")\npublic interface SurgePotionNotifierConfig extends Config\n{\n\t@ConfigItem(\n\t\tposition \u003d 0,\n\t\tkeyName \u003d \"highlightColor\",\n\t\tname \u003d \"Highlight Color\",\n\t\tdescription \u003d \"Color to highlight your surge potion when it\u0027s ready to drink\"\n\t)\n\tdefault Color getHighlightColor()\n\t{\n\t\treturn new Color(0, 231, 255);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"fillSurgePotion\",\n\t\t\tname \u003d \"Fill Surge Potion\",\n\t\t\tdescription \u003d \"Fill in the surge potion with the highlight color\"\n\t)\n\tdefault boolean fillSurgePotion() {\n\t\treturn false;\n\t}\n\n\t@Range(\n\t\t\tmax \u003d 255\n\t)\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d  \"fillSurgePotiontOpacity\",\n\t\t\tname \u003d \"Fill Opacity\",\n\t\t\tdescription \u003d \"The opacity of the highlight color when filling in the Surge potion\"\n\t)\n\tdefault int fillSurgePotionOpacity() {\n\t\treturn 50;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 3,\n\t\t\tkeyName \u003d \"outlineSurgePotion\",\n\t\t\tname \u003d \"Outline Surge Potion\",\n\t\t\tdescription \u003d \"Outline the surge potion with the highlight color\"\n\t)\n\tdefault boolean outlineSurgePotion() {\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 4,\n\t\t\tkeyName \u003d \"enableNotifier\",\n\t\t\tname \u003d \"Enable Notifier\",\n\t\t\tdescription \u003d \"Enable a system notifier when your surge potion is ready to be used\"\n\t)\n\tdefault boolean enableNotifier() {\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\com\\surgepotionnotifier\\SurgePotionNotifierConfig.java"},{"fileName":"SurgePotionNotifierOverlay.java","content":"package com.surgepotionnotifier;\n\nimport net.runelite.api.widgets.WidgetItem;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.overlay.WidgetItemOverlay;\nimport net.runelite.client.util.ColorUtil;\nimport net.runelite.client.util.ImageUtil;\n\nimport javax.inject.Inject;\nimport java.awt.*;\nimport java.awt.image.BufferedImage;\n\nclass SurgePotionNotifierOverlay extends WidgetItemOverlay {\n    private final ItemManager itemManager;\n    private final SurgePotionNotifierPlugin plugin;\n    private final SurgePotionNotifierConfig config;\n\n    @Inject\n    private SurgePotionNotifierOverlay(ItemManager itemManager, SurgePotionNotifierPlugin plugin, SurgePotionNotifierConfig config) {\n        this.itemManager \u003d itemManager;\n        this.plugin \u003d plugin;\n        this.config \u003d config;\n        showOnInventory();\n    }\n\n    @Override\n    public void renderItemOverlay(Graphics2D graphics, int itemId, WidgetItem itemWidget) {\n        if (plugin.getSurgePotionVariationIds().contains(itemId) \u0026\u0026 !plugin.isSurgeOnCooldown()) {\n            Color color \u003d config.getHighlightColor();\n            if (color !\u003d null) {\n                Rectangle bounds \u003d itemWidget.getCanvasBounds();\n                if (config.outlineSurgePotion()) {\n                    final BufferedImage outline \u003d itemManager.getItemOutline(itemId, itemWidget.getQuantity(), color);\n                    graphics.drawImage(outline, (int) bounds.getX(), (int) bounds.getY(), null);\n                }\n\n                if (config.fillSurgePotion()) {\n                    final Color fillColor \u003d ColorUtil.colorWithAlpha(color, config.fillSurgePotionOpacity());\n                    Image image \u003d ImageUtil.fillImage(itemManager.getImage(itemId, itemWidget.getQuantity(), false), fillColor);\n                    graphics.drawImage(image, (int) bounds.getX(), (int) bounds.getY(), null);\n                }\n            }\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\surgepotionnotifier\\SurgePotionNotifierOverlay.java"},{"fileName":"SurgePotionNotifierPlugin.java","content":"package com.surgepotionnotifier;\n\nimport com.google.inject.Provides;\nimport lombok.extern.slf4j.Slf4j;\nimport java.util.Collection;\nimport java.util.List;\nimport java.util.stream.Collectors;\nimport net.runelite.api.Client;\nimport net.runelite.api.ItemContainer;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.MenuOptionClicked;\nimport net.runelite.api.gameval.ItemID;\nimport net.runelite.api.gameval.InventoryID;\nimport net.runelite.api.gameval.VarbitID;\nimport net.runelite.client.Notifier;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.game.ItemVariationMapping;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\nimport javax.inject.Inject;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Surge Potion Notifier\"\n)\npublic class SurgePotionNotifierPlugin extends Plugin {\n\tprivate Collection\u003cInteger\u003e SURGE_POTION_VARIATION_IDS;\n\tprivate final List\u003cInteger\u003e SURGE_POTION_ITEM_IDS \u003d List.of(\n\t\t\tItemID._1DOSESURGE,\n\t\t\tItemID._2DOSESURGE,\n\t\t\tItemID._3DOSESURGE,\n\t\t\tItemID._4DOSESURGE\n\t);\n\n\tprivate Collection\u003cInteger\u003e getAllVariations(List\u003cInteger\u003e itemIds) {\n\t\treturn itemIds.stream()\n\t\t\t\t.map(ItemVariationMapping::getVariations)\n\t\t\t\t.flatMap(Collection::stream)\n\t\t\t\t.collect(Collectors.toList());\n\t}\n\n\tpublic Collection\u003cInteger\u003e getSurgePotionVariationIds() {\n\t\treturn SURGE_POTION_VARIATION_IDS;\n\t}\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate SurgePotionNotifierConfig config;\n\n\t@Inject\n\tprivate SurgePotionNotifierOverlay overlay;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate Notifier notifier;\n\n\tprivate int surgePotionTimer \u003d -1;\n\tprivate boolean hasNotified \u003d false;\n\n\n\t@Override\n\tprotected void startUp() throws Exception {\n\t\tSURGE_POTION_VARIATION_IDS \u003d getAllVariations(SURGE_POTION_ITEM_IDS);\n\t\toverlayManager.add(overlay);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception {\n\t\toverlayManager.remove(overlay);\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOptionClicked(MenuOptionClicked event) {\n\t\tif (event.getMenuOption().contains(\"Drink\") \u0026\u0026 event.getMenuTarget().contains(\"Surge potion\")) {\n\t\t\tint actualCooldown \u003d client.getVarbitValue(VarbitID.SURGE_POTION_TIMER);\n\n\t\t\tif (actualCooldown \u003d\u003d 0 \u0026\u0026 surgePotionTimer \u003c\u003d 0) {\n\t\t\t\tsurgePotionTimer \u003d 50;\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event) {\n\t\t\tsurgePotionTimer \u003d client.getVarbitValue(VarbitID.SURGE_POTION_TIMER);\n\n\t\tif (surgePotionTimer \u003d\u003d 0) {\n\t\t\tif (!hasNotified) {\n\t\t\t\tnotifyUser();\n\t\t\t\thasNotified \u003d true;\n\t\t\t}\n\t\t} else {\n\t\t\thasNotified \u003d false;\n\t\t}\n\t}\n\n\tpublic boolean isSurgeOnCooldown() {\n\t\treturn surgePotionTimer \u003e 0;\n\t}\n\n\t@Provides\n\tSurgePotionNotifierConfig provideConfig(ConfigManager configManager) {\n\t\treturn configManager.getConfig(SurgePotionNotifierConfig.class);\n\t}\n\n\tprivate void notifyUser() {\n\t\tif (config.enableNotifier()) {\n\t\t\tItemContainer playerInventory \u003d client.getItemContainer(InventoryID.INV);\n\n\t\t\tif (playerInventory !\u003d null \u0026\u0026 SURGE_POTION_VARIATION_IDS.stream().anyMatch(playerInventory::contains)) {\n\t\t\t\tnotifier.notify(\"You can drink another dose of a surge potion\");\n\t\t\t}\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\surgepotionnotifier\\SurgePotionNotifierPlugin.java"},{"fileName":"SurgePotionNotifierTest.java","content":"package com.surgepotionnotifier;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class SurgePotionNotifierTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(SurgePotionNotifierPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\surgepotionnotifier\\SurgePotionNotifierTest.java"}]},{"commit":"3f0e352cbcfd7282bd6cf15df42df57ed3bf6ee2","repository":"https://github.com/Im2be/afk-countdown.git","internalName":"afk-countdown","files":[{"fileName":"AfkCountdownConfig.java","content":"package im2be.afkcountdown;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(AfkCountdownConfig.GROUP)\npublic interface AfkCountdownConfig  extends Config {\n\n    String GROUP \u003d \"AfkCountdown\";\n\n    @ConfigItem(\n            keyName \u003d \"renderOnLogoutStone\",\n            name \u003d \"Render on logout stone\",\n            description \u003d \"Disable for infobox, enable for text overlay on logout tab stone\"\n    )\n    default boolean renderOnLogoutStone() {\n        return false;\n    }\n\n}\n","filePath":"src\\main\\java\\im2be\\afkcountdown\\AfkCountdownConfig.java"},{"fileName":"AfkCountdownOverlay.java","content":"package im2be.afkcountdown;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Point;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetInfo;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.config.FontType;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\nimport net.runelite.client.ui.overlay.OverlayUtil;\n\nimport javax.inject.Inject;\nimport java.awt.*;\nimport java.time.Duration;\nimport java.time.Instant;\nimport java.time.temporal.ChronoUnit;\n\n@Slf4j\npublic class AfkCountdownOverlay extends Overlay {\n\n    private final Client client;\n    private final AfkCountdownConfig config;\n    private final ConfigManager configManager;\n\n    private Instant endTime;\n\n    @Inject\n    public AfkCountdownOverlay(Client client, AfkCountdownPlugin plugin, AfkCountdownConfig config, ConfigManager configManager) {\n        super(plugin);\n        setPosition(OverlayPosition.DYNAMIC);\n        setLayer(OverlayLayer.ABOVE_WIDGETS);\n        setPriority(OverlayPriority.HIGH);\n        this.client \u003d client;\n        this.config \u003d config;\n        this.configManager \u003d configManager;\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        if (!config.renderOnLogoutStone()) return null;\n\n        Widget toDrawOn;\n        if (client.isResized()) {\n\n            // Default to classic layout logout button\n            toDrawOn \u003d client.getWidget(WidgetInfo.RESIZABLE_VIEWPORT_LOGOUT_TAB);\n\n            // else try classic while-bank-is-open logout button (or where it would be, at least)\n            if (toDrawOn \u003d\u003d null || toDrawOn.isHidden())\n                toDrawOn \u003d client.getWidget(WidgetInfo.RESIZABLE_VIEWPORT_INVENTORY_PARENT);\n\n            // else try logout button next to minimap for modern layout\n            if (toDrawOn \u003d\u003d null || toDrawOn.isHidden())\n                toDrawOn \u003d client.getWidget(WidgetInfo.RESIZABLE_MINIMAP_LOGOUT_BUTTON);\n\n        } else {\n            toDrawOn \u003d client.getWidget(WidgetInfo.FIXED_VIEWPORT_LOGOUT_TAB);\n        }\n        if (toDrawOn \u003d\u003d null || toDrawOn.isHidden()) return null;\n\n        Duration timeLeft \u003d Duration.between(Instant.now(), endTime);\n        if (timeLeft.isNegative()) return null;\n\n        String textToDraw \u003d textFrom(timeLeft);\n        FontType infoboxFontType \u003d configManager.getConfiguration(\"runelite\", \"infoboxFontType\", FontType.class);\n        graphics.setFont(infoboxFontType.getFont()); // make sure we do this before calculating drawLocation\n\n        Rectangle bounds \u003d toDrawOn.getBounds();\n        Point drawLocation \u003d new Point((int) bounds.getCenterX() - (graphics.getFontMetrics().stringWidth(textToDraw) / 2), (int) bounds.getMaxY());\n        OverlayUtil.renderTextLocation(graphics, drawLocation, textToDraw, textColor(timeLeft));\n\n        return null;\n    }\n\n    public void setTimer(long period) {\n        endTime \u003d Instant.now().plus(Duration.of(period, ChronoUnit.MILLIS));\n    }\n\n    private Color textColor(Duration timeLeft) {\n        if (timeLeft.getSeconds() \u003c 60)\n            return Color.RED.brighter();\n        return Color.WHITE;\n    }\n\n    private String textFrom(Duration duration) {\n        int seconds \u003d (int) (duration.toMillis() / 1000L);\n\n        int minutes \u003d (seconds % 3600) / 60;\n        int secs \u003d seconds % 60;\n\n        return String.format(\"%d:%02d\", minutes, secs);\n    }\n}\n","filePath":"src\\main\\java\\im2be\\afkcountdown\\AfkCountdownOverlay.java"},{"fileName":"AfkCountdownPlugin.java","content":"package im2be.afkcountdown;\n\nimport javax.inject.Inject;\n\nimport com.google.inject.Provides;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Constants;\nimport net.runelite.api.GameState;\nimport net.runelite.api.events.ClientTick;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.ui.overlay.infobox.InfoBoxManager;\nimport net.runelite.client.util.ImageUtil;\nimport java.awt.image.BufferedImage;\nimport java.time.Duration;\nimport java.time.Instant;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"AFK Countdown\",\n\tdescription \u003d \"Shows you exactly how many seconds it will take before you log out due to inactivity\",\n\ttags \u003d {\"afk\", \"timer\", \"countdown\", \"log\", \"logout\"}\n)\npublic class AfkCountdownPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Getter\n\tprivate AfkCountdownTimer currentTimer;\n\n\t@Getter Instant timerStartTime;\n\n\t@Inject\n\tprivate InfoBoxManager infoBoxManager;\n\n\t@Inject\n\tprivate AfkCountdownOverlay overlay;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate AfkCountdownConfig config;\n\n\tprivate static final BufferedImage LOGOUT_IMAGE;\n\tprivate boolean active \u003d false;\n\n\tprivate long lastIdleDuration \u003d -1;\n\n\tstatic\n\t{\n\t\tLOGOUT_IMAGE \u003d ImageUtil.loadImageResource(AfkCountdownPlugin.class, \"logout_icon.png\");\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tactive \u003d true;\n\t\tif (config.renderOnLogoutStone())\n\t\t\toverlayManager.add(overlay);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tactive \u003d false;\n\t\tlastIdleDuration \u003d -1;\n\t\tremoveTimer();\n\t\toverlayManager.remove(overlay);\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event) {\n\t\tif (!AfkCountdownConfig.GROUP.equals(event.getGroup())) return;\n\n\t\tif (\"renderOnLogoutStone\".equals(event.getKey())) {\n\t\t\tif (config.renderOnLogoutStone()) {\n\t\t\t\toverlayManager.add(overlay);\n\t\t\t\tremoveTimer();\n\t\t\t} else {\n\t\t\t\toverlayManager.remove(overlay);\n\n\t\t\t\t// emulate infobox timer creation similar to onClientTick does\n\t\t\t\tsetTimer(Duration.ofMillis(getDurationMillis()));\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate long getDurationMillis()\n\t{\n\t\treturn Constants.CLIENT_TICK_LENGTH * (client.getIdleTimeout() - getIdleTicks()) + 999;\n\t}\n\n\t@Provides\n\tAfkCountdownConfig provideConfig(ConfigManager configManager) {\n\t\treturn configManager.getConfig(AfkCountdownConfig.class);\n\t}\n\n\tprivate int getIdleTicks()\n\t{\n\t\treturn Math.min(client.getKeyboardIdleTicks(), client.getMouseIdleTicks());\n\t}\n\n\t@Subscribe\n\tpublic void onClientTick(ClientTick clientTick)\n\t{\n\t\tif (!active)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (client.getGameState() !\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal long durationMillis \u003d getDurationMillis();\n\n\t\tif (durationMillis \u003c 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (lastIdleDuration \u003d\u003d -1 || durationMillis \u003c lastIdleDuration)\n\t\t{\n\n\t\t\tif (durationMillis \u003e\u003d 0)\n\t\t\t{\n\t\t\t\tsetTimer(Duration.ofMillis(durationMillis));\n\t\t\t\toverlay.setTimer(durationMillis);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tremoveTimer();\n\t\t\t}\n\t\t}\n\n\t\tlastIdleDuration \u003d durationMillis;\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged)\n\t{\n\t\tif (gameStateChanged.getGameState() !\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tremoveTimer();\n\t\t\tlastIdleDuration \u003d -1;\n\t\t}\n\t}\n\n\n\tprivate void removeTimer()\n\t{\n\t\tinfoBoxManager.removeInfoBox(currentTimer);\n\t\tcurrentTimer \u003d null;\n\t\ttimerStartTime \u003d null;\n\t}\n\n\tprivate void setTimer(Duration duration)\n\t{\n\t\tif (config.renderOnLogoutStone()) return;\n\n\t\tfinal Instant now \u003d Instant.now();\n\t\tif (currentTimer \u003d\u003d null)\n\t\t{\n\t\t\tcurrentTimer \u003d new AfkCountdownTimer(duration, LOGOUT_IMAGE, this);\n\t\t\ttimerStartTime \u003d now;\n\t\t\tinfoBoxManager.addInfoBox(currentTimer);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfinal Duration newDuration \u003d duration.plus(Duration.between(timerStartTime, now));\n\t\t\tcurrentTimer.setDuration(newDuration);\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\im2be\\afkcountdown\\AfkCountdownPlugin.java"},{"fileName":"AfkCountdownTimer.java","content":"package im2be.afkcountdown;\n\nimport lombok.Getter;\nimport lombok.Setter;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.ui.overlay.infobox.Timer;\n\nimport java.awt.*;\nimport java.awt.image.BufferedImage;\nimport java.time.Duration;\nimport java.time.Instant;\nimport java.time.temporal.ChronoUnit;\n\npublic class AfkCountdownTimer extends Timer\n{\n\n    AfkCountdownTimer(Duration duration, BufferedImage image, Plugin plugin)\n    {\n        super(duration.toMillis(), ChronoUnit.MILLIS, image, plugin);\n        setTooltip(\"Time until you log out due to inactivity\");\n    }\n\n    @Override\n    public Color getTextColor()\n    {\n        Duration timeLeft \u003d Duration.between(Instant.now(), getEndTime());\n\n        if (timeLeft.getSeconds() \u003c 60)\n        {\n            return Color.RED.brighter();\n        }\n\n        return Color.WHITE;\n    }\n}\n","filePath":"src\\main\\java\\im2be\\afkcountdown\\AfkCountdownTimer.java"},{"fileName":"AfkCountdownPluginTest.java","content":"package im2be.afkcountdown;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class AfkCountdownPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(AfkCountdownPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\im2be\\afkcountdown\\AfkCountdownPluginTest.java"}]},{"commit":"a1bfb57740500e27de7318dfab21461da7c83a48","repository":"https://github.com/LuxOG/crabs-for-dummies.git","internalName":"crabs-for-dummies","files":[{"fileName":"CrabsForDummiesPlugin.java","content":"package com.crabsfordummies;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.ItemContainer;\nimport net.runelite.api.MenuEntry;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.MenuEntryAdded;\nimport net.runelite.api.events.MenuOptionClicked;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.util.Text;\n\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"CrabsForDummies\"\n)\npublic class CrabsForDummiesPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t// Track when we\u0027re about to equip Elder Maul\n\tprivate int justClickedWield;\n\t// Track when we\u0027re about to equip something else (to revert to Attack)\n\tprivate int justClickedWieldOther;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tlog.info(\"Crab stun plugin started\");\n\t\tjustClickedWield \u003d 0;\n\t\tjustClickedWieldOther \u003d 0;\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event) {\n\t\t// Clear the flags after processing\n\t\tif (justClickedWield \u003e 0) {\n\t\t\tjustClickedWield--;\n\t\t}\n\t\tif (justClickedWieldOther \u003e 0) {\n\t\t\tjustClickedWieldOther--;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOptionClicked(MenuOptionClicked event) {\n\t\t// Check if player clicked to equip something\n\t\tif (\"Wield\".equals(event.getMenuOption())) {\n\t\t\tString target \u003d event.getMenuEntry().getTarget();\n\n\t\t\t// Check if it\u0027s Elder Maul or Dragon Warhammer\n\t\t\tif (target.contains(\"Elder maul\") || target.contains(\"Dragon warhammer\")) {\n\t\t\t\tlog.info(\"Player clicked to equip Elder Maul/Dragon Warhammer\");\n\t\t\t\tjustClickedWield \u003d 2;\n\t\t\t\tjustClickedWieldOther \u003d 0; // Clear the other flag\n\t\t\t} else {\n\t\t\t\t// Player is wielding something else - should revert to Attack priority\n\t\t\t\tlog.info(\"Player clicked to equip something else: \" + target);\n\t\t\t\tjustClickedWieldOther \u003d 2;\n\t\t\t\tjustClickedWield \u003d 0; // Clear the maul flag\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onMenuEntryAdded(MenuEntryAdded event) {\n\t\tif (client.getGameState() !\u003d GameState.LOGGED_IN || !isInChambers()) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if this is a crab\n\t\tif (!isCrab(event.getTarget())) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Handle prioritizing Smash when we have Elder Maul\n\t\tif (\"Attack\".equals(event.getOption()) \u0026\u0026 hasMaulEquippedOrAboutTo() \u0026\u0026 !shouldRevertToAttack()) {\n\t\t\tlog.info(\"Swapping Smash to top for crab\");\n\t\t\tlog.info(String.valueOf(justClickedWield));\n\n\t\t\t// Apply the original swapping logic immediately\n\t\t\tMenuEntry[] menuEntries \u003d client.getMenu().getMenuEntries();\n\t\t\tint smashIdx \u003d -1;\n\t\t\tint topIdx \u003d menuEntries.length - 1;\n\n\t\t\t// Find the Smash option\n\t\t\tfor (int i \u003d 0; i \u003c topIdx; i++) {\n\t\t\t\tif (Text.removeTags(menuEntries[i].getOption()).equals(\"Smash\") \u0026\u0026\n\t\t\t\t\tisCrab(menuEntries[i].getTarget())) {\n\t\t\t\t\tsmashIdx \u003d i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (smashIdx \u003d\u003d -1) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Swap the Smash option to the top position\n\t\t\tMenuEntry smashEntry \u003d menuEntries[smashIdx];\n\t\t\tMenuEntry topEntry \u003d menuEntries[topIdx];\n\n\t\t\tmenuEntries[smashIdx] \u003d topEntry;\n\t\t\tmenuEntries[topIdx] \u003d smashEntry;\n\n\t\t\tclient.setMenuEntries(menuEntries);\n\t\t}\n\t}\n\n\tprivate boolean shouldRevertToAttack() {\n\t\t// We should revert to Attack if:\n\t\t// 1. We just clicked to wield something else (non-maul weapon), OR\n\t\t// 2. We don\u0027t have a maul equipped and didn\u0027t just click to wield one\n\t\treturn justClickedWieldOther \u003e 0 || (!hasMaulEquipped() \u0026\u0026 justClickedWield \u003d\u003d 0);\n\t}\n\n\tprivate boolean hasMaulEquipped() {\n\t\tItemContainer equipment \u003d client.getItemContainer(InventoryID.EQUIPMENT);\n\t\treturn equipment !\u003d null \u0026\u0026 (equipment.contains(21003) || equipment.contains(13576));\n\t}\n\n\tprivate boolean hasMaulEquippedOrAboutTo() {\n\t\t// Check if we just clicked to wield the maul\n\t\tif (justClickedWield \u003e 0) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Check if we already have it equipped\n\t\treturn hasMaulEquipped();\n\t}\n\n\tprivate boolean isInChambers() {\n\t\t// Chamber of Xeric region IDs\n\t\tint[] chamberRegions \u003d {12889, 13136, 13137, 13138, 13139, 13140, 13141, 13145, 13393, 13394, 13395, 13396, 13397, 13398, 13399};\n\t\tint[] mapRegions \u003d client.getMapRegions();\n\n\t\tif (mapRegions \u003d\u003d null) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (int region : mapRegions) {\n\t\t\tfor (int chamberRegion : chamberRegions) {\n\t\t\t\tif (region \u003d\u003d chamberRegion) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate boolean isCrab(String target) {\n\t\t// Remove color tags and check if it\u0027s a crab\n\t\tString cleanTarget \u003d Text.removeTags(target).toLowerCase();\n\t\treturn cleanTarget.contains(\"crab\");\n\t}\n\n}","filePath":"src\\main\\java\\com\\crabsfordummies\\CrabsForDummiesPlugin.java"},{"fileName":"CrabsForDummiesTest.java","content":"package com.crabsfordummies;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class CrabsForDummiesTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(CrabsForDummiesPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\crabsfordummies\\CrabsForDummiesTest.java"}]},{"commit":"1bd2e8b2ca9d4a165c90a6053ec17c498fd74b38","repository":"https://github.com/LeeOkeefe/slayer-assistant-plugin.git","internalName":"slayer-assistant","files":[{"fileName":"Icon.java","content":"package com.slayerassistant.domain;\n\nimport com.slayerassistant.SlayerAssistantPlugin;\nimport net.runelite.client.util.ImageUtil;\n\nimport javax.annotation.Nonnull;\nimport javax.swing.*;\nimport java.awt.image.BufferedImage;\nimport java.util.function.UnaryOperator;\n\npublic enum Icon\n{\n    COMBAT(\"/images/combat.png\"),\n    COMPASS(\"/images/compass.png\"),\n    INVENTORY(\"/images/inventory.png\"),\n    SLAYER_SKILL(\"/images/slayer_icon.png\"),\n    WIKI(\"/images/wiki.png\"),\n    ;\n\n    private final String file;\n    Icon(String file)\n    {\n        this.file \u003d file;\n    }\n    \n    public BufferedImage getImage()\n    {\n        return ImageUtil.loadImageResource(SlayerAssistantPlugin.class, file);\n    }\n    \n    public ImageIcon getIcon()\n    {\n        return getIcon(UnaryOperator.identity());\n    }\n    \n    public ImageIcon getIcon(@Nonnull UnaryOperator\u003cBufferedImage\u003e func)\n    {\n        BufferedImage img \u003d func.apply(getImage());\n        return new ImageIcon(img);\n    }\n}\n","filePath":"src\\main\\java\\com\\slayerassistant\\domain\\Icon.java"},{"fileName":"Panel.java","content":"package com.slayerassistant.domain;\n\npublic enum Panel\n{\n    TASK_SEARCH,\n    TASK_SELECTED\n}\n","filePath":"src\\main\\java\\com\\slayerassistant\\domain\\Panel.java"},{"fileName":"Tab.java","content":"package com.slayerassistant.domain;\n\npublic interface Tab\u003cT\u003e \n{\n    void update(T data);\n    void shutDown();\n}","filePath":"src\\main\\java\\com\\slayerassistant\\domain\\Tab.java"},{"fileName":"TabKey.java","content":"package com.slayerassistant.domain;\n\nimport lombok.Getter;\n\n@Getter\npublic enum TabKey \n{\n    LOCATIONS(\"Locations\"),\n    ITEMS_REQUIRED(\"Items\"),\n    COMBAT(\"Combat\"),\n    MASTERS(\"Masters\"),\n    WIKI(\"Wiki\");\n    \n    private final String name;\n    TabKey(String name)\n    {\n        this.name \u003d name;\n    }\n\n}\n","filePath":"src\\main\\java\\com\\slayerassistant\\domain\\TabKey.java"},{"fileName":"Task.java","content":"package com.slayerassistant.domain;\n\nimport java.awt.image.BufferedImage;\n\npublic class Task \n{\n    public String name;\n    public int levelRequired;\n    public String[] itemsRequired;\n    public String[] locations;\n    public String[] attributes;\n    public String[] attackStyles;\n    public String[] variants;\n    public String[] masters;\n    public transient BufferedImage image;\n    public transient WikiLink[] wikiLinks;\n    \n    public Task(\n            String name,\n            int levelRequired,\n            String[] itemsRequired,\n            String[] locations,\n            String[] attributes,\n            String[] attackStyles,\n            String[] variants,\n            String[] masters,\n            BufferedImage image,\n            WikiLink[] wikiLinks) \n    {\n        this.name \u003d name;\n        this.levelRequired \u003d levelRequired;\n        this.itemsRequired \u003d itemsRequired;\n        this.locations \u003d locations;\n        this.attributes \u003d attributes;\n        this.attackStyles \u003d attackStyles;\n        this.variants \u003d variants;\n        this.masters \u003d masters;\n        this.image \u003d image;\n        this.wikiLinks \u003d wikiLinks;\n    }\n}\n","filePath":"src\\main\\java\\com\\slayerassistant\\domain\\Task.java"},{"fileName":"WikiLink.java","content":"package com.slayerassistant.domain;\r\n\r\nimport java.util.Objects;\r\n\r\npublic class WikiLink \r\n{\r\n    public final String name;\r\n    public final String url;\r\n\r\n    public WikiLink(String name, String url) \r\n    {\r\n        this.name \u003d Objects.requireNonNull(name, \"wiki name cannot be null\");\r\n        this.url \u003d Objects.requireNonNull(url, \"wiki url cannot be null\");\r\n    }\r\n}\r\n","filePath":"src\\main\\java\\com\\slayerassistant\\domain\\WikiLink.java"},{"fileName":"TaskServiceModule.java","content":"package com.slayerassistant.modules;\n\nimport com.google.inject.AbstractModule;\nimport com.google.inject.Provides;\nimport com.google.inject.name.Named;\nimport com.slayerassistant.services.TaskService;\nimport com.slayerassistant.services.TaskServiceImpl;\n\npublic class TaskServiceModule extends AbstractModule\n{\n    @Override\n    protected void configure()\n    {\n        bind(TaskService.class).to(TaskServiceImpl.class);\n    }\n\n    @Provides\n    @Named(\"dataPath\")\n    String provideJsonDataPath()\n    {\n        return \"/data/tasks.json\";\n    }\n\n    @Provides\n    @Named(\"baseWikiUrl\")\n    String provideBaseWikiUrl()\n    {\n        return \"https://oldschool.runescape.wiki/w/\";\n    }\n\n    @Provides\n    @Named(\"baseImagesPath\")\n    String provideBaseImagesPath()\n    {\n        return \"/images/monsters/\";\n    }\n}\n","filePath":"src\\main\\java\\com\\slayerassistant\\modules\\TaskServiceModule.java"},{"fileName":"Header.java","content":"package com.slayerassistant.presentation.components;\n\nimport javax.swing.*;\nimport java.awt.*;\n\npublic class Header extends JLabel\n{\n    public Header()\n    {\n        setFont(this.getFont().deriveFont(Font.BOLD, 18f));\n        setForeground(Color.ORANGE);\n        setHorizontalAlignment(SwingConstants.CENTER);\n        setVerticalTextPosition(SwingConstants.TOP);\n        setHorizontalTextPosition(SwingConstants.CENTER);\n        setIconTextGap(10);\n    }\n    \n    public void update(String title, ImageIcon icon)\n    {\n        setText(title);\n        setIcon(icon);\n    }\n}\n","filePath":"src\\main\\java\\com\\slayerassistant\\presentation\\components\\Header.java"},{"fileName":"SearchBar.java","content":"package com.slayerassistant.presentation.components;\n\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.PluginPanel;\nimport net.runelite.client.ui.components.IconTextField;\n\nimport javax.swing.*;\nimport javax.swing.event.DocumentEvent;\nimport javax.swing.event.DocumentListener;\nimport java.awt.*;\nimport java.util.function.Consumer;\n\npublic class SearchBar extends JPanel\n{\n    private final IconTextField searchBar \u003d new IconTextField();\n    private final DocumentListener onChangeListener;\n    \n    public SearchBar(Consumer\u003cString\u003e onChange)\n    {\n        onChangeListener \u003d createDocumentListener(onChange);\n        searchBar.getDocument().addDocumentListener(onChangeListener);\n        \n        initialiseStyles();\n        \n        add(searchBar);\n    }\n    \n    public void shutDown()\n    {\n        searchBar.getDocument().removeDocumentListener(onChangeListener);\n    }\n    \n    private DocumentListener createDocumentListener(Consumer\u003cString\u003e handler)\n    {\n        return new DocumentListener()\n        {\n            @Override\n            public void insertUpdate(DocumentEvent e) { handler.accept(searchBar.getText()); }\n            @Override\n            public void removeUpdate(DocumentEvent e) { handler.accept(searchBar.getText()); }\n            @Override\n            public void changedUpdate(DocumentEvent e) { handler.accept(searchBar.getText()); }\n        };\n    }\n\n    private void initialiseStyles()\n    {\n        searchBar.setIcon(IconTextField.Icon.SEARCH);\n        searchBar.setPreferredSize(new Dimension(PluginPanel.PANEL_WIDTH, 30));\n        searchBar.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        searchBar.setHoverBackgroundColor(ColorScheme.DARKER_GRAY_HOVER_COLOR);\n        searchBar.setMinimumSize(new Dimension(0, 30));\n    }\n}\n","filePath":"src\\main\\java\\com\\slayerassistant\\presentation\\components\\SearchBar.java"},{"fileName":"SelectList.java","content":"package com.slayerassistant.presentation.components;\n\nimport javax.swing.*;\nimport javax.swing.event.ListSelectionListener;\nimport java.awt.event.MouseEvent;\nimport java.awt.event.MouseMotionListener;\nimport java.util.Arrays;\nimport java.util.function.Consumer;\n\npublic class SelectList\u003cT\u003e extends JList\u003cT\u003e\n{\n    public SelectList(ListCellRenderer\u003cT\u003e renderer, Consumer\u003cT\u003e onSelect)\n    {\n        ListSelectionListener onSelectListener \u003d e -\u003e\n        {\n            T selectedValue \u003d getSelectedValue();\n            if (e.getValueIsAdjusting() || selectedValue \u003d\u003d null)\n            {\n                return;\n            }\n            onSelect.accept(selectedValue);\n            clearSelection();\n        };\n\n        setCellRenderer(renderer);\n        addListSelectionListener(onSelectListener);\n    }\n    \n    public SelectList(ListCellRenderer\u003cT\u003e renderer, Consumer\u003cT\u003e onSelect, Consumer\u003cInteger\u003e onHoverHandler)\n    {\n        this(renderer, onSelect);\n        \n        MouseMotionListener onHoverListener \u003d createOnHoverListener(onHoverHandler);\n        addMouseMotionListener(onHoverListener);\n    }\n\n    public void shutDown() \n    {\n        Arrays.stream(getListSelectionListeners())\n                .forEach(this::removeListSelectionListener);\n        \n        Arrays.stream(getMouseMotionListeners())\n                .forEach(this::removeMouseMotionListener);\n\n        setModel(new DefaultListModel\u003c\u003e());\n    }\n    \n    public void update(T[] items)\n    {\n        SwingUtilities.invokeLater(() -\u003e setListData(items));\n    }\n\n    private MouseMotionListener createOnHoverListener(Consumer\u003cInteger\u003e onHoverHandler)\n    {\n        return new MouseMotionListener()\n        {\n            @Override\n            public void mouseDragged(MouseEvent e) { }\n\n            @Override\n            public void mouseMoved(MouseEvent e)\n            {\n                int index \u003d locationToIndex(e.getPoint());\n                onHoverHandler.accept(index);\n                repaint();\n            }\n        };\n    }\n}\n","filePath":"src\\main\\java\\com\\slayerassistant\\presentation\\components\\SelectList.java"},{"fileName":"TableTab.java","content":"package com.slayerassistant.presentation.components.tabs;\n\nimport com.slayerassistant.domain.Tab;\n\nimport javax.swing.*;\nimport javax.swing.border.Border;\nimport javax.swing.table.DefaultTableCellRenderer;\nimport javax.swing.table.DefaultTableModel;\nimport java.awt.*;\n\npublic class TableTab extends JScrollPane implements Tab\u003cObject[][]\u003e\n{\n    private final JTable table \u003d new JTable();\n\n    public TableTab(String[] columnNames)\n    {\n        setTableRenderer(columnNames);\n        setHeaderRenderer();\n        \n        table.setRowHeight(25);\n        table.setFocusable(false);\n        table.setRowSelectionAllowed(false);\n        \n        setFocusable(false);\n        setPreferredSize(new Dimension(table.getWidth(), 150));\n        setViewportView(table);\n    }\n\n    @Override\n    public void update(Object[][] data)\n    {\n        DefaultTableModel model \u003d (DefaultTableModel) table.getModel();\n        model.setRowCount(0);\n\n        int maxRowCount \u003d Math.max(data[0].length, data[1].length);\n        for (int i \u003d 0; i \u003c maxRowCount; i++)\n        {\n            String attackStyle \u003d i \u003c data[0].length ? data[0][i].toString() : \"\";\n            String attribute \u003d i \u003c data[1].length ? data[1][i].toString() : \"\";\n            model.addRow(new Object[]{attackStyle, attribute});\n        }\n    }\n\n    @Override\n    public void shutDown()\n    {\n        DefaultTableModel model \u003d (DefaultTableModel) table.getModel();\n        model.setRowCount(0);\n    }\n\n    private void setTableRenderer(String[] columnNames)\n    {\n        table.setModel(new DefaultTableModel(columnNames, 0)\n        {\n            @Override\n            public boolean isCellEditable(int row, int column)\n            {\n                return false;\n            }\n        });\n    }\n\n    private void setHeaderRenderer()\n    {\n        DefaultTableCellRenderer headerRenderer \u003d new DefaultTableCellRenderer()\n        {\n            @Override\n            public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column)\n            {\n                Component c \u003d super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\n                Border border \u003d BorderFactory.createCompoundBorder(\n                        BorderFactory.createMatteBorder(0, 0, 1, 0, Color.darkGray),\n                        BorderFactory.createEmptyBorder(8, 3, 5, 3)\n                );\n                ((JComponent) c).setBorder(border);\n                return c;\n            }\n        };\n\n        for (int i \u003d 0; i \u003c table.getColumnModel().getColumnCount(); i++)\n        {\n            table.getColumnModel().getColumn(i).setHeaderRenderer(headerRenderer);\n        }\n    }\n}","filePath":"src\\main\\java\\com\\slayerassistant\\presentation\\components\\tabs\\TableTab.java"},{"fileName":"TextTab.java","content":"package com.slayerassistant.presentation.components.tabs;\n\nimport com.slayerassistant.domain.Tab;\nimport net.runelite.client.ui.ColorScheme;\nimport org.apache.commons.lang3.StringUtils;\n\nimport javax.swing.*;\nimport javax.swing.text.*;\nimport java.awt.*;\nimport java.util.Arrays;\n\npublic class TextTab extends JTextPane implements Tab\u003cString[]\u003e\n{\n    public TextTab()\n    {\n        setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        setMargin(new Insets(10, 5, 10, 5));\n        setEditable(false);\n        setLineSpacing();\n    }\n    \n    @Override\n    public void update(String[] data)\n    {\n        resetParagraphs();\n        \n        if (data.length \u003d\u003d 0)\n        {\n            addParagraph(\"None\");\n            return;\n        }\n        Arrays.stream(data).forEach(this::addParagraph);\n    }\n\n    @Override\n    public void shutDown() \n    { \n        resetParagraphs();\n    }\n    \n    private void addParagraph(String text)\n    {\n        StyledDocument doc \u003d getStyledDocument();\n        try\n        {\n            doc.insertString(doc.getLength(), StringUtils.capitalize(text) + \"\\n\", null);\n        }\n        catch (BadLocationException e)\n        {\n            throw new RuntimeException(e);\n        }\n    }\n\n    public void resetParagraphs()\n    {\n        setText(\"\");\n    }\n\n    private void setLineSpacing()\n    {\n        selectAll();\n        MutableAttributeSet set \u003d new SimpleAttributeSet(getParagraphAttributes());\n        StyleConstants.setLineSpacing(set, 0.5f);\n        setParagraphAttributes(set, true);\n    }\n}","filePath":"src\\main\\java\\com\\slayerassistant\\presentation\\components\\tabs\\TextTab.java"},{"fileName":"WikiTab.java","content":"package com.slayerassistant.presentation.components.tabs;\n\nimport com.slayerassistant.domain.Tab;\nimport com.slayerassistant.domain.WikiLink;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.util.LinkBrowser;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\n\n@Slf4j\npublic class WikiTab extends JPanel implements Tab\u003cWikiLink[]\u003e \n{\n    private final List\u003cJButton\u003e buttons \u003d new ArrayList\u003c\u003e();\n\n    public WikiTab() \n    {\n        setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));\n        setBackground(ColorScheme.DARKER_GRAY_COLOR);\n    }\n\n    @Override\n    public void update(WikiLink[] wikiLinks)\n    {\n        removeExistingButtons();\n\n        add(Box.createVerticalStrut(5));\n        \n        for (WikiLink wikiLink : wikiLinks) \n        {\n            JButton button \u003d new JButton(wikiLink.name);\n            button.setBackground(ColorScheme.DARKER_GRAY_HOVER_COLOR);\n            button.setMaximumSize(new Dimension(Integer.MAX_VALUE, button.getMaximumSize().height));\n            button.addActionListener(e -\u003e LinkBrowser.browse(wikiLink.url));\n            buttons.add(button);\n            \n            add(Box.createVerticalStrut(5));\n            add(button);\n            add(Box.createVerticalStrut(5));\n        }\n\n        add(Box.createVerticalStrut(5));\n    }\n\n    @Override\n    public void shutDown() \n    {\n        removeExistingButtons();\n    }\n\n    private void removeExistingButtons() \n    {\n        for (JButton button : buttons)\n        {\n            Arrays.stream(button.getActionListeners())\n                    .forEach(button::removeActionListener);\n        }\n        buttons.clear();\n        removeAll();\n    }\n}","filePath":"src\\main\\java\\com\\slayerassistant\\presentation\\components\\tabs\\WikiTab.java"},{"fileName":"TaskTabs.java","content":"package com.slayerassistant.presentation.components;\n\nimport com.slayerassistant.domain.Icon;\nimport com.slayerassistant.domain.Task;\nimport com.slayerassistant.presentation.components.tabs.TableTab;\nimport com.slayerassistant.domain.Tab;\nimport com.slayerassistant.domain.TabKey;\nimport com.slayerassistant.presentation.components.tabs.TextTab;\nimport com.slayerassistant.presentation.components.tabs.WikiTab;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.ui.laf.RuneLiteTabbedPaneUI;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.util.HashMap;\nimport java.util.Map;\n\n@Slf4j\npublic class TaskTabs extends JTabbedPane \n{\n    private final Map\u003cTabKey, Tab\u003c?\u003e\u003e tabMap \u003d new HashMap\u003c\u003e();\n\n    public TaskTabs() \n    {\n        setUI(new RuneLiteTabbedPaneUI() \n        {\n            @Override\n            protected int calculateTabWidth(int tabPlacement, int tabIndex, FontMetrics metrics)\n            {\n                return getWidth() / getTabCount();\n            }\n        });\n        \n        TabKey locations \u003d TabKey.LOCATIONS;\n        TabKey items \u003d TabKey.ITEMS_REQUIRED;\n        TabKey combat \u003d TabKey.COMBAT;\n        TabKey masters \u003d TabKey.MASTERS;\n        TabKey wiki \u003d TabKey.WIKI;\n        \n        setTab(locations, com.slayerassistant.domain.Icon.COMPASS.getIcon(), new TextTab(), locations.getName());\n        setTab(items, com.slayerassistant.domain.Icon.INVENTORY.getIcon(), new TextTab(), items.getName());\n        setTab(combat, com.slayerassistant.domain.Icon.COMBAT.getIcon(), new TableTab(new String[] { \"Attack Styles\", \"Attributes\" }), combat.getName());\n        setTab(masters, com.slayerassistant.domain.Icon.SLAYER_SKILL.getIcon(), new TextTab(), masters.getName());\n        setTab(wiki, Icon.WIKI.getIcon(), new WikiTab(), wiki.getName());\n    }\n\n    public void shutDown() \n    {\n        tabMap.values().forEach(Tab::shutDown);\n    }\n    \n    public void update(Task task)\n    {\n        updateTab(TabKey.LOCATIONS, task.locations);\n        updateTab(TabKey.ITEMS_REQUIRED, task.itemsRequired);\n        updateTab(TabKey.COMBAT, new Object[][] { task.attackStyles, task.attributes });\n        updateTab(TabKey.MASTERS, task.masters);\n        updateTab(TabKey.WIKI, task.wikiLinks);\n    }\n    \n    private \u003cT\u003e void updateTab(TabKey key, T data) \n    {\n        Tab\u003c?\u003e rawTab \u003d tabMap.get(key);\n\n        if (rawTab \u003d\u003d null) \n        {\n            log.error(\"No tab found with key {}\", key.toString());\n            return;\n        }\n\n        @SuppressWarnings(\"unchecked\")\n        Tab\u003cT\u003e tab \u003d (Tab\u003cT\u003e) rawTab;\n        tab.update(data);\n    }\n\n    private void setTab(TabKey key, ImageIcon icon, Tab\u003c?\u003e tab, String tip) \n    {\n        tabMap.put(key, tab);\n        addTab(null, icon, (Component) tab, tip);\n    }\n}","filePath":"src\\main\\java\\com\\slayerassistant\\presentation\\components\\TaskTabs.java"},{"fileName":"MainPanel.java","content":"package com.slayerassistant.presentation.panels;\n\nimport com.slayerassistant.domain.Panel;\nimport com.slayerassistant.domain.Task;\nimport com.slayerassistant.services.TaskService;\nimport net.runelite.client.ui.PluginPanel;\n\nimport javax.inject.Inject;\nimport javax.swing.*;\nimport java.awt.*;\nimport java.util.Comparator;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class MainPanel extends PluginPanel\n{\n    private final TaskService taskService;\n\n    private final TaskSearchPanel taskSearchPanel \u003d new TaskSearchPanel(this::onSearchBarChanged, this::onTaskSelected);\n    private final TaskSelectedPanel taskSelectedPanel \u003d new TaskSelectedPanel(this::onTaskClosed);\n\n    private final Map\u003cPanel, JPanel\u003e panels \u003d new HashMap\u003c\u003e();\n    private final JPanel currentPanelContainer \u003d new JPanel(new BorderLayout());\n\n    @Inject\n    public MainPanel(TaskService taskService)\n    {\n        this.taskService \u003d taskService;\n        \n        Task[] orderedTasks \u003d taskService.getAll(Comparator.comparing(t -\u003e t.name));\n        taskSearchPanel.updateTaskList(orderedTasks);\n\n        setLayout(new BorderLayout());\n\n        panels.put(Panel.TASK_SEARCH, taskSearchPanel);\n        panels.put(Panel.TASK_SELECTED, taskSelectedPanel);\n\n        add(currentPanelContainer, BorderLayout.CENTER);\n        showPanel(Panel.TASK_SEARCH);\n    }\n\n    public void shutDown()\n    {\n        taskSearchPanel.shutDown();\n        taskSelectedPanel.shutDown();\n    }\n\n    private void onSearchBarChanged(String searchTerm)\n    {\n        Task[] matchedTasks \u003d searchTerm.isBlank()\n                ? taskService.getAll(Comparator.comparing(t -\u003e t.name))\n                : taskService.searchPartialName(searchTerm.trim());\n\n        taskSearchPanel.updateTaskList(matchedTasks);\n    }\n\n    private void onTaskSelected(Task task)\n    {\n        taskSelectedPanel.update(task);\n        showPanel(Panel.TASK_SELECTED);\n    }\n\n    private void onTaskClosed()\n    {\n        showPanel(Panel.TASK_SEARCH);\n    }\n\n    private void showPanel(Panel panel)\n    {\n        SwingUtilities.invokeLater(() -\u003e \n        {\n            currentPanelContainer.removeAll();\n            currentPanelContainer.add(panels.get(panel), BorderLayout.CENTER);\n            revalidate();\n            repaint();\n        });\n    }\n}\n","filePath":"src\\main\\java\\com\\slayerassistant\\presentation\\panels\\MainPanel.java"},{"fileName":"TaskSearchPanel.java","content":"package com.slayerassistant.presentation.panels;\n\nimport com.slayerassistant.domain.Task;\nimport com.slayerassistant.presentation.components.SearchBar;\nimport com.slayerassistant.presentation.components.SelectList;\nimport com.slayerassistant.presentation.SlayerTaskRenderer;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.util.function.Consumer;\n\npublic class TaskSearchPanel extends JPanel\n{\n    private final SearchBar searchBar;\n    private final SelectList\u003cTask\u003e selectList;\n    private final SlayerTaskRenderer taskRenderer \u003d new SlayerTaskRenderer();\n    \n    public TaskSearchPanel(Consumer\u003cString\u003e onSearch, Consumer\u003cTask\u003e onSelect)\n    {\n        searchBar \u003d new SearchBar(onSearch);\n        selectList \u003d new SelectList\u003c\u003e(taskRenderer, onSelect, this::onTaskHover);\n\n        setLayout(new BorderLayout());\n        \n        add(searchBar, BorderLayout.NORTH);\n        add(selectList, BorderLayout.CENTER);\n    }\n    \n    public void shutDown()\n    {\n        searchBar.shutDown();\n        selectList.shutDown();\n    }\n    \n    public void updateTaskList(Task[] tasks)\n    {\n        selectList.update(tasks);\n    }\n\n    private void onTaskHover(int index)\n    {\n        taskRenderer.setHoverIndex(index);\n        if (index !\u003d -1)\n        {\n            setCursor(new Cursor(Cursor.HAND_CURSOR));\n        }\n        else\n        {\n            setCursor(new Cursor(Cursor.DEFAULT_CURSOR));\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\slayerassistant\\presentation\\panels\\TaskSearchPanel.java"},{"fileName":"TaskSelectedPanel.java","content":"package com.slayerassistant.presentation.panels;\n\nimport com.slayerassistant.domain.Task;\nimport com.slayerassistant.presentation.components.Header;\nimport com.slayerassistant.presentation.components.TaskTabs;\n\nimport javax.swing.*;\nimport javax.swing.border.EmptyBorder;\nimport java.awt.*;\nimport java.awt.event.ActionListener;\n\npublic class TaskSelectedPanel extends JPanel \n{\n    private final Header header \u003d new Header();\n    private final TaskTabs taskTabs \u003d new TaskTabs();\n    private final JButton closeButton \u003d new JButton(\"Close\");\n    \n    private final ActionListener onClickListener;\n\n    public TaskSelectedPanel(Runnable onClose)\n    {\n        this.onClickListener \u003d e -\u003e onClose.run();\n        closeButton.addActionListener(this.onClickListener);\n        \n        setLayout(new BorderLayout(0, 10));\n        setBorder(new EmptyBorder(5, 0, 0, 0));\n        \n        add(header, BorderLayout.NORTH);\n        add(taskTabs, BorderLayout.CENTER);\n        add(closeButton, BorderLayout.SOUTH);\n    }\n\n    public void shutDown()\n    {\n        taskTabs.shutDown();\n        closeButton.removeActionListener(onClickListener);\n    }\n    \n    public void update(Task task)\n    {\n        header.update(task.name, new ImageIcon(task.image));\n        SwingUtilities.invokeLater(() -\u003e taskTabs.update(task));\n    }\n}\n\n","filePath":"src\\main\\java\\com\\slayerassistant\\presentation\\panels\\TaskSelectedPanel.java"},{"fileName":"SlayerTaskRenderer.java","content":"package com.slayerassistant.presentation;\n\nimport com.slayerassistant.domain.Task;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.PluginPanel;\n\nimport javax.swing.*;\nimport javax.swing.border.EtchedBorder;\nimport java.awt.*;\n\npublic class SlayerTaskRenderer extends JLabel implements ListCellRenderer\u003cTask\u003e\n{\n    private static int hoverIndex \u003d -1;\n    \n    public void setHoverIndex(int index)\n    {\n        hoverIndex \u003d index;\n    }\n    \n    @Override\n    public Component getListCellRendererComponent(\n            JList\u003c? extends Task\u003e list,\n            Task value,\n            int index,\n            boolean isSelected,\n            boolean cellHasFocus)\n    {\n        setOpaque(true);\n        setPreferredSize(new Dimension(PluginPanel.PANEL_WIDTH, 35));\n        setBorder(BorderFactory.createCompoundBorder(\n                BorderFactory.createEtchedBorder(EtchedBorder.RAISED),\n                BorderFactory.createEmptyBorder(0, 5, 0, 0)\n        ));\n        \n        if (index \u003d\u003d hoverIndex)\n        {\n            setBackground(ColorScheme.DARKER_GRAY_HOVER_COLOR);\n            setForeground(Color.WHITE);\n        }\n        else\n        {\n            setBackground(ColorScheme.DARKER_GRAY_COLOR);\n            setForeground(ColorScheme.TEXT_COLOR);\n        }\n        \n        setText(value.name);\n        return this;\n    }\n}\n","filePath":"src\\main\\java\\com\\slayerassistant\\presentation\\SlayerTaskRenderer.java"},{"fileName":"TaskService.java","content":"package com.slayerassistant.services;\n\nimport com.slayerassistant.domain.Task;\n\nimport java.util.Comparator;\n\npublic interface TaskService \n{\n    Task get(String name);\n\n    Task[] getAll();\n    \n    Task[] getAll(Comparator\u003cTask\u003e comparator);\n\n    Task[] searchPartialName(String text);\n}\n","filePath":"src\\main\\java\\com\\slayerassistant\\services\\TaskService.java"},{"fileName":"TaskServiceImpl.java","content":"package com.slayerassistant.services;\n\nimport com.google.gson.Gson;\nimport com.google.gson.JsonSyntaxException;\nimport com.google.gson.reflect.TypeToken;\n\nimport com.slayerassistant.domain.Task;\nimport com.slayerassistant.domain.WikiLink;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.util.ImageUtil;\n\nimport javax.inject.Inject;\nimport javax.inject.Named;\nimport javax.inject.Singleton;\nimport java.awt.image.BufferedImage;\nimport java.io.*;\nimport java.lang.reflect.Type;\nimport java.util.*;\n\n@Slf4j\n@Singleton\npublic class TaskServiceImpl implements TaskService \n{\n    private final Map\u003cString, Task\u003e tasks \u003d new HashMap\u003c\u003e();\n    private final String baseWikiUrl;\n    private final String baseImagesPath;\n    \n    @Inject\n    public TaskServiceImpl(\n            Gson gson,\n            @Named(\"dataPath\") String dataPath,\n            @Named(\"baseWikiUrl\") String baseWikiUrl,\n            @Named(\"baseImagesPath\") String baseImagesPath)\n    {\n        this.baseWikiUrl \u003d baseWikiUrl;\n        this.baseImagesPath \u003d baseImagesPath;\n        \n        InputStream inputStream \u003d this.getClass().getResourceAsStream(dataPath);\n\n        if (inputStream \u003d\u003d null) \n        {\n            throw new RuntimeException(\"Could not find JSON at path \" + dataPath);\n        }\n        \n        try (Reader reader \u003d new InputStreamReader(inputStream))\n        {\n            Type type \u003d new TypeToken\u003cMap\u003cString, Task\u003e\u003e() {}.getType();\n            Map\u003cString, Task\u003e data \u003d gson.fromJson(reader, type);\n            \n            data.forEach((key, value) -\u003e \n            {\n                value.wikiLinks \u003d createWikiLinks(value);\n                value.image \u003d getImage(value.name);\n                tasks.put(key.toLowerCase(), value);\n            });\n        } \n        catch (JsonSyntaxException e) \n        {\n            log.error(\"JSON syntax error in file {}\", dataPath, e);\n        }\n        catch (IOException e) \n        {\n            log.error(\"Could not read JSON from file {}\", dataPath, e);\n        }\n    }\n    \n    @Override\n    public Task get(String name)\n    {\n        return tasks.get(name.toLowerCase());\n    }\n    \n    @Override\n    public Task[] getAll()\n    {\n        return getAll(null);\n    }\n    \n    @Override\n    public Task[] getAll(Comparator\u003cTask\u003e comparator)\n    {\n        if (comparator \u003d\u003d null) \n        {\n            return tasks.values().toArray(new Task[0]);\n        }\n        \n        return tasks.values().stream()\n                .sorted(comparator)\n                .toArray(Task[]::new);\n    }\n    \n    @Override\n    public Task[] searchPartialName(String text)\n    {\n        if (text \u003d\u003d null || text.isEmpty()) \n        {\n            return new Task[0];\n        }\n        \n        String searchTerm \u003d text.toLowerCase();\n        return tasks\n                .values()\n                .stream()\n                .filter(m -\u003e m.name.toLowerCase().contains(searchTerm))\n                .toArray(Task[]::new);\n    }\n    \n    private WikiLink[] createWikiLinks(Task task)\n    {\n        List\u003cWikiLink\u003e links \u003d new ArrayList\u003c\u003e();\n        \n        links.add(createWikiLink(task.name));\n        \n        for (String variant : task.variants) \n        {\n            links.add(createWikiLink(variant));\n        }\n        \n        return links.toArray(new WikiLink[0]);\n    }\n    \n    private WikiLink createWikiLink(String name)\n    {\n        String url \u003d baseWikiUrl + name.replace(\u0027 \u0027, \u0027_\u0027);\n        \n        return new WikiLink(name, url);\n    }\n    \n    private BufferedImage getImage(String name)\n    {\n        String normalizedName \u003d name.replace(\u0027 \u0027, \u0027_\u0027).toLowerCase();\n        String path \u003d baseImagesPath + normalizedName + \".png\";\n        \n        BufferedImage image \u003d ImageUtil.loadImageResource(getClass(), path);\n        return ImageUtil.resizeImage(image, image.getWidth() / 2, image.getHeight() / 2);\n    }\n}\n","filePath":"src\\main\\java\\com\\slayerassistant\\services\\TaskServiceImpl.java"},{"fileName":"SlayerAssistantPlugin.java","content":"package com.slayerassistant;\n\nimport com.google.inject.Binder;\nimport com.slayerassistant.domain.Icon;\nimport com.slayerassistant.modules.TaskServiceModule;\nimport com.slayerassistant.presentation.panels.MainPanel;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\n\nimport javax.inject.Inject;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Slayer Assistant\",\n\tdescription \u003d \"Assists with slayer task information\",\n\ttags \u003d { \"slay\", \"slayer\", \"assistant\" }\n)\npublic class SlayerAssistantPlugin extends Plugin\n{\n\t@Inject\n\tprivate ClientToolbar clientToolbar;\n\t\n\t@Inject\n\tprivate MainPanel mainPanel;\n\t\n\tprivate NavigationButton navButton;\n\n    @Override\n\tpublic void configure(Binder binder)\n\t{\n\t\tbinder.install(new TaskServiceModule());\n\t}\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\tinjector.injectMembers(this);\n\n\t\tnavButton \u003d getNavButton();\n\n\t\tclientToolbar.addNavigation(navButton);\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\tclientToolbar.removeNavigation(navButton);\n\t\tmainPanel.shutDown();\n\t}\n\n\tprivate NavigationButton getNavButton()\n\t{\n\t\treturn NavigationButton.builder()\n\t\t\t\t.tooltip(\"Slayer Assistant\")\n\t\t\t\t.icon(Icon.SLAYER_SKILL.getImage())\n\t\t\t\t.priority(10)\n\t\t\t\t.panel(mainPanel)\n\t\t\t\t.build();\n\t}\n}\n","filePath":"src\\main\\java\\com\\slayerassistant\\SlayerAssistantPlugin.java"},{"fileName":"SlayerPluginTest.java","content":"package com.slayerassistant;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class SlayerPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(SlayerAssistantPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\slayerassistant\\SlayerPluginTest.java"}]},{"commit":"0e16c79cdce447cfb5fb0bc82754a56ce59bcefb","repository":"https://github.com/Rocket-Money-OSRS/ClueJuggler.git","internalName":"clue-juggler","files":[{"fileName":"ClueJugglerConfig.java","content":"package com.cluejuggler;\n\nimport java.awt.Color;\nimport net.runelite.client.config.Alpha;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\n\n@ConfigGroup(\"cluejuggler\")\npublic interface ClueJugglerConfig extends Config\n{\n\t@ConfigItem(\n\t\tkeyName \u003d \"showIndicator\",\n\t\tname \u003d \"Show Clue Indicator\",\n\t\tdescription \u003d \"Display whether clues are good, bad, or unsure\",\n\t\tposition \u003d 0\n\t)\n\tdefault boolean showIndicator()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigSection(\n\t\tname \u003d \"Clue Highlighter\",\n\t\tdescription \u003d \"Settings for highlighting clue tiles\",\n\t\tposition \u003d 10\n\t)\n\tString clueHighlighterSection \u003d \"clueHighlighterSection\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"clueHighlights\",\n\t\tname \u003d \"Enable Clue Highlights\",\n\t\tdescription \u003d \"Highlight the clue tile and show good/bad/unsure text on top of it\",\n\t\tsection \u003d clueHighlighterSection,\n\t\tposition \u003d 1\n\t)\n\tdefault boolean clueHighlights()\n\t{\n\t\treturn true;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"goodClueTileColor\",\n\t\tname \u003d \"Good Clue Tile Color\",\n\t\tdescription \u003d \"Color for highlighting good clue tiles\",\n\t\tsection \u003d clueHighlighterSection,\n\t\tposition \u003d 2\n\t)\n\tdefault Color goodClueTileColor()\n\t{\n\t\treturn new Color(0, 255, 0, 100);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"badClueTileColor\",\n\t\tname \u003d \"Bad Clue Tile Color\",\n\t\tdescription \u003d \"Color for highlighting bad clue tiles\",\n\t\tsection \u003d clueHighlighterSection,\n\t\tposition \u003d 3\n\t)\n\tdefault Color badClueTileColor()\n\t{\n\t\treturn new Color(255, 0, 0, 100);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"unsureClueTileColor\",\n\t\tname \u003d \"Unsure Clue Tile Color\",\n\t\tdescription \u003d \"Color for highlighting unsure clue tiles\",\n\t\tsection \u003d clueHighlighterSection,\n\t\tposition \u003d 4\n\t)\n\tdefault Color unsureClueTileColor()\n\t{\n\t\treturn new Color(255, 255, 0, 100);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"goodClueTextColor\",\n\t\tname \u003d \"Good Clue Text Color\",\n\t\tdescription \u003d \"Color for good clue text\",\n\t\tsection \u003d clueHighlighterSection,\n\t\tposition \u003d 5\n\t)\n\tdefault Color goodClueTextColor()\n\t{\n\t\treturn Color.GREEN;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"badClueTextColor\",\n\t\tname \u003d \"Bad Clue Text Color\",\n\t\tdescription \u003d \"Color for bad clue text\",\n\t\tsection \u003d clueHighlighterSection,\n\t\tposition \u003d 6\n\t)\n\tdefault Color badClueTextColor()\n\t{\n\t\treturn Color.RED;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"unsureClueTextColor\",\n\t\tname \u003d \"Unsure Clue Text Color\",\n\t\tdescription \u003d \"Color for unsure clue text\",\n\t\tsection \u003d clueHighlighterSection,\n\t\tposition \u003d 7\n\t)\n\tdefault Color unsureClueTextColor()\n\t{\n\t\treturn Color.YELLOW;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"deprioritizeBadClues\",\n\t\tname \u003d \"Deprioritize Bad Clues\",\n\t\tdescription \u003d \"Makes \u0027Walk here\u0027 the default action for bad clues to prevent accidental pickup\",\n\t\tposition \u003d 20\n\t)\n\tdefault boolean deprioritizeBadClues()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"customLists\",\n\t\tname \u003d \"Custom Lists\",\n\t\tdescription \u003d \"JSON string of custom clue lists\",\n\t\thidden \u003d true\n\t)\n\tdefault String customLists()\n\t{\n\t\treturn \"[]\";\n\t}\n}\n\n","filePath":"src\\main\\java\\com\\cluejuggler\\ClueJugglerConfig.java"},{"fileName":"ClueJugglerPlugin.java","content":"package com.cluejuggler;\n\nimport com.cluejuggler.model.ClueList;\nimport com.cluejuggler.overlay.ClueJugglerOverlay;\nimport com.cluejuggler.overlay.ClueJugglerWorldOverlay;\nimport com.cluejuggler.service.ClueListService;\nimport com.cluejuggler.service.ClueLookupService;\nimport com.cluejuggler.service.ClueTextService;\nimport com.cluejuggler.service.ClueTrackingService;\nimport com.cluejuggler.ui.ClueJugglerPanel;\nimport com.google.inject.Provides;\nimport java.awt.image.BufferedImage;\nimport java.util.Map;\nimport javax.inject.Inject;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.api.MenuEntry;\nimport net.runelite.api.TileItem;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.ItemDespawned;\nimport net.runelite.api.events.MenuEntryAdded;\nimport net.runelite.api.events.MenuOptionClicked;\nimport net.runelite.api.events.WidgetLoaded;\nimport net.runelite.api.gameval.InterfaceID;\nimport net.runelite.api.gameval.ItemID;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDependency;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.plugins.cluescrolls.ClueScrollConfig;\nimport net.runelite.client.plugins.cluescrolls.ClueScrollPlugin;\nimport net.runelite.client.plugins.cluescrolls.clues.ClueScroll;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.ImageUtil;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Clue Juggler\",\n\tdescription \u003d \"Track good and bad clue steps for juggling\",\n\ttags \u003d {\"clues\", \"juggling\", \"tracker\"}\n)\n@PluginDependency(ClueScrollPlugin.class)\npublic class ClueJugglerPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientToolbar clientToolbar;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate ItemManager itemManager;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate ClueJugglerOverlay overlay;\n\n\t@Inject\n\tprivate ClueJugglerWorldOverlay worldOverlay;\n\n\t@Inject\n\tprivate ClueScrollPlugin clueScrollPlugin;\n\n\t@Inject\n\t@Getter\n\tprivate ClueJugglerConfig config;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Inject\n\t@Getter\n\tprivate ClueTextService textService;\n\n\t@Inject\n\t@Getter\n\tprivate ClueTrackingService trackingService;\n\n\t@Inject\n\t@Getter\n\tprivate ClueListService listService;\n\n\t@Inject\n\t@Getter\n\tprivate ClueLookupService lookupService;\n\n\t@Getter\n\tprivate ClueJugglerPanel panel;\n\tprivate NavigationButton navButton;\n\tprivate String currentClueText \u003d null;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tpanel \u003d injector.getInstance(ClueJugglerPanel.class);\n\t\tpanel.setPlugin(this);\n\n\t\tBufferedImage icon \u003d ImageUtil.loadImageResource(getClass(), \"/cluejuggler.png\");\n\n\t\tnavButton \u003d NavigationButton.builder()\n\t\t\t.tooltip(\"Clue Juggler\")\n\t\t\t.icon(icon)\n\t\t\t.priority(5)\n\t\t\t.panel(panel)\n\t\t\t.build();\n\n\t\tclientToolbar.addNavigation(navButton);\n\t\toverlayManager.add(overlay);\n\t\toverlayManager.add(worldOverlay);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tclientToolbar.removeNavigation(navButton);\n\t\toverlayManager.remove(overlay);\n\t\toverlayManager.remove(worldOverlay);\n\t\tcurrentClueText \u003d null;\n\t\ttrackingService.clearTrackedClues();\n\t}\n\n\t@Subscribe\n\tpublic void onWidgetLoaded(WidgetLoaded event)\n\t{\n\t\tif (event.getGroupId() \u003e\u003d InterfaceID.TRAIL_MAP01 \u0026\u0026 event.getGroupId() \u003c\u003d InterfaceID.TRAIL_MAP11)\n\t\t{\n\t\t\tupdateClueTextFromWidget();\n\t\t}\n\t\telse if (event.getGroupId() \u003d\u003d InterfaceID.TRAIL_CLUETEXT)\n\t\t{\n\t\t\tupdateClueTextFromWidget();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event)\n\t{\n\t\tClueScroll clue \u003d clueScrollPlugin.getClue();\n\t\tif (clue !\u003d null \u0026\u0026 clue !\u003d trackingService.getLastProcessedClue())\n\t\t{\n\t\t\ttrackingService.setLastProcessedClue(clue);\n\t\t\ttrackingService.setLastClueWasTracked(false);\n\t\t\tclientThread.invokeLater(this::updateClueTextFromWidget);\n\t\t}\n\t\telse if (clue \u003d\u003d null)\n\t\t{\n\t\t\ttrackingService.setLastProcessedClue(null);\n\t\t\ttrackingService.setLastClueWasTracked(false);\n\t\t}\n\t}\n\n\tprivate void updateClueTextFromWidget()\n\t{\n\t\tClueScroll clue \u003d clueScrollPlugin.getClue();\n\t\tif (clue \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!shouldTrackOnPickup() \u0026\u0026 !trackingService.wasLastClueTracked())\n\t\t{\n\t\t\tnet.runelite.api.ItemContainer inventory \u003d client.getItemContainer(net.runelite.api.gameval.InventoryID.INV);\n\t\t\tif (inventory !\u003d null)\n\t\t\t{\n\t\t\t\tfor (net.runelite.api.Item item : inventory.getItems())\n\t\t\t\t{\n\t\t\t\t\tif (item \u003d\u003d null || item.getId() \u003c\u003d 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tItemComposition itemComp \u003d itemManager.getItemComposition(item.getId());\n\t\t\t\t\tif (itemComp !\u003d null \u0026\u0026 (itemComp.getName().startsWith(\"Clue scroll\")\n\t\t\t\t\t\t|| itemComp.getName().startsWith(\"Challenge scroll\")\n\t\t\t\t\t\t|| itemComp.getName().startsWith(\"Treasure scroll\")))\n\t\t\t\t\t{\n\t\t\t\t\t\tClueScroll foundClue \u003d lookupService.findClueScroll(item.getId());\n\t\t\t\t\t\tboolean shouldTrack \u003d false;\n\n\t\t\t\t\t\tif (foundClue \u003d\u003d clue)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tshouldTrack \u003d true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if ((item.getId() \u003d\u003d ItemID.TRAIL_CLUE_BEGINNER || item.getId() \u003d\u003d 23182) \u0026\u0026\n\t\t\t\t\t\t\t(clue instanceof net.runelite.client.plugins.cluescrolls.clues.BeginnerMapClue ||\n\t\t\t\t\t\t\t clue instanceof net.runelite.client.plugins.cluescrolls.clues.AnagramClue))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tshouldTrack \u003d true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (item.getId() \u003d\u003d ItemID.TRAIL_CLUE_MASTER \u0026\u0026\n\t\t\t\t\t\t\t!(clue instanceof net.runelite.client.plugins.cluescrolls.clues.CrypticClue ||\n\t\t\t\t\t\t\t  clue instanceof net.runelite.client.plugins.cluescrolls.clues.CipherClue ||\n\t\t\t\t\t\t\t  clue instanceof net.runelite.client.plugins.cluescrolls.clues.AnagramClue ||\n\t\t\t\t\t\t\t  clue instanceof net.runelite.client.plugins.cluescrolls.clues.CoordinateClue ||\n\t\t\t\t\t\t\t  clue instanceof net.runelite.client.plugins.cluescrolls.clues.MusicClue ||\n\t\t\t\t\t\t\t  clue instanceof net.runelite.client.plugins.cluescrolls.clues.EmoteClue ||\n\t\t\t\t\t\t\t  clue instanceof net.runelite.client.plugins.cluescrolls.clues.MapClue ||\n\t\t\t\t\t\t\t  clue instanceof net.runelite.client.plugins.cluescrolls.clues.BeginnerMapClue))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tshouldTrack \u003d true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (shouldTrack)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (item.getId() \u003d\u003d ItemID.TRAIL_CLUE_BEGINNER || item.getId() \u003d\u003d ItemID.TRAIL_CLUE_MASTER)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tString clueText \u003d textService.generateClueTextFromClue(clue);\n\t\t\t\t\t\t\t\tif (clueText !\u003d null \u0026\u0026 !clueText.isEmpty())\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttrackingService.trackClueByText(clueText, clue);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttrackingService.trackClue(item.getId(), clue);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttrackingService.setLastClueWasTracked(true);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tclientThread.invokeLater(() -\u003e\n\t\t{\n\t\t\tString difficulty \u003d textService.getClueDifficulty(clue, lookupService, trackingService);\n\t\t\tString formattedText \u003d textService.generateFormattedClueText(clue);\n\n\t\t\tif (formattedText !\u003d null \u0026\u0026 !formattedText.isEmpty())\n\t\t\t{\n\t\t\t\tcurrentClueText \u003d formattedText;\n\t\t\t\tpanel.setCurrentStep(difficulty, formattedText);\n\t\t\t\t\n\t\t\t\tString identifier \u003d lookupService.getClueIdentifier(clue, trackingService);\n\t\t\t\tif (identifier \u003d\u003d null || identifier.isEmpty())\n\t\t\t\t{\n\t\t\t\t\tidentifier \u003d \"text:\" + formattedText.hashCode();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttrackingService.setCurrentlyReadClueText(formattedText);\n\t\t\t\ttrackingService.setCurrentlyReadClueIdentifier(identifier);\n\t\t\t}\n\t\t});\n\t}\n\n\t@Subscribe\n\tpublic void onMenuEntryAdded(MenuEntryAdded event)\n\t{\n\t\tif (!config.deprioritizeBadClues())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!event.getOption().equals(\"Take\"))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tint itemId \u003d event.getIdentifier();\n\t\tif (itemId \u003c\u003d 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tboolean isClueScroll \u003d false;\n\t\tif (itemId \u003d\u003d ItemID.TRAIL_CLUE_BEGINNER || itemId \u003d\u003d ItemID.TRAIL_CLUE_MASTER || itemId \u003d\u003d 23182)\n\t\t{\n\t\t\tisClueScroll \u003d true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tItemComposition itemComposition \u003d itemManager.getItemComposition(itemId);\n\t\t\tif (itemComposition !\u003d null)\n\t\t\t{\n\t\t\t\tString itemName \u003d itemComposition.getName();\n\t\t\t\tif (itemName !\u003d null \u0026\u0026 (itemName.startsWith(\"Clue scroll\")\n\t\t\t\t\t|| itemName.startsWith(\"Challenge scroll\")\n\t\t\t\t\t|| itemName.startsWith(\"Treasure scroll\")))\n\t\t\t\t{\n\t\t\t\t\tisClueScroll \u003d true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!isClueScroll)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tboolean shouldDeprioritize \u003d false;\n\t\t\n\t\tWorldPoint tilePosition \u003d WorldPoint.fromScene(client, event.getActionParam0(), event.getActionParam1(), client.getPlane());\n\t\tClueTrackingService.DroppedClueInfo info \u003d trackingService.getDroppedClueInfo(tilePosition);\n\t\t\n\t\tif (info !\u003d null)\n\t\t{\n\t\t\tif (info.isGood !\u003d null \u0026\u0026 !info.isGood)\n\t\t\t{\n\t\t\t\tshouldDeprioritize \u003d true;\n\t\t\t}\n\t\t\telse if (info.customList !\u003d null \u0026\u0026 info.customList.isDeprioritize())\n\t\t\t{\n\t\t\t\tshouldDeprioritize \u003d true;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tClueScroll clue \u003d lookupService.findClueScroll(itemId);\n\t\t\tif (clue !\u003d null)\n\t\t\t{\n\t\t\t\tString clueIdentifier \u003d lookupService.getClueIdentifier(clue, trackingService);\n\t\t\t\tif (clueIdentifier !\u003d null \u0026\u0026 !clueIdentifier.isEmpty())\n\t\t\t\t{\n\t\t\t\t\tif (listService.isBadClueByIdentifier(clueIdentifier))\n\t\t\t\t\t{\n\t\t\t\t\t\tshouldDeprioritize \u003d true;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tClueList customList \u003d listService.getCustomListForClue(clueIdentifier);\n\t\t\t\t\t\tif (customList !\u003d null \u0026\u0026 customList.isDeprioritize())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tshouldDeprioritize \u003d true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (shouldDeprioritize)\n\t\t{\n\t\t\tMenuEntry[] menuEntries \u003d client.getMenuEntries();\n\t\t\tint takeIndex \u003d -1;\n\t\t\tint walkHereIndex \u003d -1;\n\n\t\t\tfor (int i \u003d 0; i \u003c menuEntries.length; i++)\n\t\t\t{\n\t\t\t\tMenuEntry entry \u003d menuEntries[i];\n\t\t\t\tif (entry.getIdentifier() \u003d\u003d itemId \u0026\u0026 entry.getOption().equals(\"Take\"))\n\t\t\t\t{\n\t\t\t\t\ttakeIndex \u003d i;\n\t\t\t\t}\n\t\t\t\telse if (entry.getOption().equals(\"Walk here\"))\n\t\t\t\t{\n\t\t\t\t\twalkHereIndex \u003d i;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (takeIndex \u003e\u003d 0 \u0026\u0026 walkHereIndex \u003e\u003d 0 \u0026\u0026 takeIndex \u003c walkHereIndex)\n\t\t\t{\n\t\t\t\tMenuEntry takeEntry \u003d menuEntries[takeIndex];\n\t\t\t\tMenuEntry walkEntry \u003d menuEntries[walkHereIndex];\n\t\t\t\tmenuEntries[takeIndex] \u003d walkEntry;\n\t\t\t\tmenuEntries[walkHereIndex] \u003d takeEntry;\n\t\t\t\tclient.setMenuEntries(menuEntries);\n\t\t\t}\n\t\t\telse if (takeIndex \u003e\u003d 0)\n\t\t\t{\n\t\t\t\tmenuEntries[takeIndex].setDeprioritized(true);\n\t\t\t}\n\t\t}\n\t}\n\n\n\t@Subscribe\n\tpublic void onItemDespawned(ItemDespawned event)\n\t{\n\t\tTileItem item \u003d event.getItem();\n\t\tif (item \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tint itemId \u003d item.getId();\n\t\t\n\t\tboolean isClueScroll \u003d false;\n\t\tif (itemId \u003d\u003d ItemID.TRAIL_CLUE_BEGINNER || itemId \u003d\u003d ItemID.TRAIL_CLUE_MASTER || itemId \u003d\u003d 23182)\n\t\t{\n\t\t\tisClueScroll \u003d true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tItemComposition itemComp \u003d itemManager.getItemComposition(itemId);\n\t\t\tif (itemComp !\u003d null)\n\t\t\t{\n\t\t\t\tString itemName \u003d itemComp.getName();\n\t\t\t\tif (itemName !\u003d null \u0026\u0026 (itemName.startsWith(\"Clue scroll\")\n\t\t\t\t\t|| itemName.startsWith(\"Challenge scroll\")\n\t\t\t\t\t|| itemName.startsWith(\"Treasure scroll\")))\n\t\t\t\t{\n\t\t\t\t\tisClueScroll \u003d true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (!isClueScroll)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tjava.util.List\u003cTileItem\u003e remainingItems \u003d event.getTile().getGroundItems();\n\t\tboolean hasRemainingClues \u003d false;\n\t\t\n\t\tif (remainingItems !\u003d null)\n\t\t{\n\t\t\tfor (TileItem remaining : remainingItems)\n\t\t\t{\n\t\t\t\tif (remaining \u003d\u003d null || remaining \u003d\u003d item)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tint remainingId \u003d remaining.getId();\n\t\t\t\tif (remainingId \u003d\u003d ItemID.TRAIL_CLUE_BEGINNER || remainingId \u003d\u003d ItemID.TRAIL_CLUE_MASTER || remainingId \u003d\u003d 23182)\n\t\t\t\t{\n\t\t\t\t\thasRemainingClues \u003d true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tItemComposition remainingComp \u003d itemManager.getItemComposition(remainingId);\n\t\t\t\tif (remainingComp !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tString remainingName \u003d remainingComp.getName();\n\t\t\t\t\tif (remainingName !\u003d null \u0026\u0026 (remainingName.startsWith(\"Clue scroll\")\n\t\t\t\t\t\t|| remainingName.startsWith(\"Challenge scroll\")\n\t\t\t\t\t\t|| remainingName.startsWith(\"Treasure scroll\")))\n\t\t\t\t\t{\n\t\t\t\t\t\thasRemainingClues \u003d true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (!hasRemainingClues)\n\t\t{\n\t\t\tWorldPoint tilePosition \u003d event.getTile().getWorldLocation();\n\t\t\ttrackingService.clearDroppedClue(tilePosition);\n\t\t\tlog.debug(\"Clue despawned at {}, no more clues on tile\", tilePosition);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOptionClicked(MenuOptionClicked event)\n\t{\n\t\tif (event.getMenuOption() \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tString menuOption \u003d event.getMenuOption();\n\t\t\n\t\tif (menuOption.equals(\"Drop\"))\n\t\t{\n\t\t\tint itemId \u003d event.getItemId();\n\t\t\tif (itemId \u003c\u003d 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tboolean isClueScroll \u003d false;\n\t\t\tif (itemId \u003d\u003d ItemID.TRAIL_CLUE_BEGINNER || itemId \u003d\u003d ItemID.TRAIL_CLUE_MASTER || itemId \u003d\u003d 23182)\n\t\t\t{\n\t\t\t\tisClueScroll \u003d true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tItemComposition itemComp \u003d itemManager.getItemComposition(itemId);\n\t\t\t\tif (itemComp !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tString itemName \u003d itemComp.getName();\n\t\t\t\t\tif (itemName !\u003d null \u0026\u0026 (itemName.startsWith(\"Clue scroll\")\n\t\t\t\t\t\t|| itemName.startsWith(\"Challenge scroll\")\n\t\t\t\t\t\t|| itemName.startsWith(\"Treasure scroll\")))\n\t\t\t\t\t{\n\t\t\t\t\t\tisClueScroll \u003d true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (isClueScroll \u0026\u0026 client.getLocalPlayer() !\u003d null)\n\t\t\t{\n\t\t\t\tString clueText \u003d trackingService.getCurrentlyReadClueText();\n\t\t\t\tString clueIdentifier \u003d trackingService.getCurrentlyReadClueIdentifier();\n\t\t\t\t\n\t\t\t\tif (clueText !\u003d null \u0026\u0026 !clueText.isEmpty() \u0026\u0026 clueIdentifier !\u003d null \u0026\u0026 !clueIdentifier.isEmpty())\n\t\t\t\t{\n\t\t\t\t\tWorldPoint playerPosition \u003d client.getLocalPlayer().getWorldLocation();\n\t\t\t\t\t\n\t\t\t\t\tlistService.ensureListsLoaded();\n\t\t\t\t\tboolean isGood \u003d listService.isGoodClueByIdentifier(clueIdentifier);\n\t\t\t\t\tboolean isBad \u003d listService.isBadClueByIdentifier(clueIdentifier);\n\t\t\t\t\tClueList customList \u003d null;\n\t\t\t\t\tif (!isGood \u0026\u0026 !isBad)\n\t\t\t\t\t{\n\t\t\t\t\t\tcustomList \u003d listService.getCustomListForClue(clueIdentifier);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tBoolean goodBadStatus \u003d null;\n\t\t\t\t\tif (isGood)\n\t\t\t\t\t{\n\t\t\t\t\t\tgoodBadStatus \u003d true;\n\t\t\t\t\t}\n\t\t\t\t\telse if (isBad)\n\t\t\t\t\t{\n\t\t\t\t\t\tgoodBadStatus \u003d false;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\ttrackingService.markDroppedClue(playerPosition, clueText, goodBadStatus, customList);\n\t\t\t\t\tlog.debug(\"Clue dropped via menu at {}: identifier\u003d{}, isGood\u003d{}, isBad\u003d{}, customList\u003d{}\", \n\t\t\t\t\t\tplayerPosition, clueIdentifier, isGood, isBad, customList !\u003d null ? customList.getName() : \"null\");\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tboolean shouldTrack \u003d false;\n\n\t\tif (menuOption.equals(\"Take\") \u0026\u0026 shouldTrackOnPickup())\n\t\t{\n\t\t\tshouldTrack \u003d true;\n\t\t}\n\t\telse if (menuOption.equals(\"Read\") \u0026\u0026 !shouldTrackOnPickup())\n\t\t{\n\t\t\tshouldTrack \u003d true;\n\t\t\ttrackingService.setLastClueWasTracked(false);\n\t\t\tclientThread.invokeLater(this::updateClueTextFromWidget);\n\t\t}\n\n\t\tif (shouldTrack)\n\t\t{\n\t\t\tint itemId \u003d event.getItemId();\n\t\t\tif (itemId \u003c\u003d 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tItemComposition itemComposition \u003d itemManager.getItemComposition(itemId);\n\t\t\tif (itemComposition !\u003d null \u0026\u0026 (itemComposition.getName().startsWith(\"Clue scroll\")\n\t\t\t\t|| itemComposition.getName().startsWith(\"Challenge scroll\")\n\t\t\t\t|| itemComposition.getName().startsWith(\"Treasure scroll\")))\n\t\t\t{\n\t\t\t\tif (menuOption.equals(\"Take\"))\n\t\t\t\t{\n\t\t\t\t\tClueScroll clue \u003d lookupService.findClueScroll(itemId);\n\t\t\t\t\tif (clue !\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\ttrackingService.trackClue(itemId, clue);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate boolean shouldTrackOnPickup()\n\t{\n\t\tClueScrollConfig clueScrollConfig \u003d configManager.getConfig(ClueScrollConfig.class);\n\t\treturn clueScrollConfig.identify() \u003d\u003d ClueScrollConfig.IdentificationMode.ON_PICKUP;\n\t}\n\n\tpublic String getCurrentClueText()\n\t{\n\t\treturn currentClueText;\n\t}\n\n\tpublic ClueScrollPlugin getClueScrollPlugin()\n\t{\n\t\treturn clueScrollPlugin;\n\t}\n\n\tpublic Client getClient()\n\t{\n\t\treturn client;\n\t}\n\n\tpublic ClientThread getClientThread()\n\t{\n\t\treturn clientThread;\n\t}\n\n\tpublic ItemManager getItemManager()\n\t{\n\t\treturn itemManager;\n\t}\n\n\t@Provides\n\tClueJugglerConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(ClueJugglerConfig.class);\n\t}\n\n\t// Legacy methods for backward compatibility with panel and overlays\n\tpublic String generateClueTextFromClue(ClueScroll clue)\n\t{\n\t\treturn textService.generateClueTextFromClue(clue);\n\t}\n\n\tpublic String getClueIdentifier(ClueScroll clue)\n\t{\n\t\treturn lookupService.getClueIdentifier(clue, trackingService);\n\t}\n\n\tpublic Map\u003cInteger, ClueScroll\u003e getTrackedClues()\n\t{\n\t\treturn trackingService.getTrackedClues();\n\t}\n\n\tpublic Map\u003cString, ClueScroll\u003e getTrackedCluesByText()\n\t{\n\t\treturn trackingService.getTrackedCluesByText();\n\t}\n\n\tpublic void ensureClueTracked()\n\t{\n\t\tif (!client.isClientThread())\n\t\t{\n\t\t\tclientThread.invokeLater(this::ensureClueTracked);\n\t\t\treturn;\n\t\t}\n\n\t\tnet.runelite.api.ItemContainer inventory \u003d client.getItemContainer(net.runelite.api.gameval.InventoryID.INV);\n\t\tif (inventory \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfor (net.runelite.api.Item item : inventory.getItems())\n\t\t{\n\t\t\tif (item \u003d\u003d null || item.getId() \u003c\u003d 0)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tItemComposition itemComp \u003d itemManager.getItemComposition(item.getId());\n\t\t\tif (itemComp \u003d\u003d null)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tString itemName \u003d itemComp.getName();\n\t\t\tif (itemName !\u003d null \u0026\u0026 (itemName.startsWith(\"Clue scroll\")\n\t\t\t\t|| itemName.startsWith(\"Challenge scroll\")\n\t\t\t\t|| itemName.startsWith(\"Treasure scroll\")))\n\t\t\t{\n\t\t\t\tClueScroll foundClue \u003d lookupService.findClueScroll(item.getId());\n\t\t\t\tif (foundClue !\u003d null)\n\t\t\t\t{\n\t\t\t\t\ttrackingService.trackClue(item.getId(), foundClue);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluejuggler\\ClueJugglerPlugin.java"},{"fileName":"ClueList.java","content":"package com.cluejuggler.model;\n\nimport java.awt.Color;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\npublic class ClueList\n{\n\tprivate String name;\n\tprivate int textColorRGB;\n\tprivate int tileColorRGB;\n\tprivate int overlayTextColorRGB;\n\tprivate boolean deprioritize \u003d false;\n\tprivate final List\u003cString\u003e clues \u003d new ArrayList\u003c\u003e();\n\tprivate final Map\u003cString, String\u003e clueIdentifiers \u003d new HashMap\u003c\u003e();\n\t\n\tpublic ClueList()\n\t{\n\t}\n\t\n\tpublic ClueList(String name, Color textColor, Color tileColor, Color overlayTextColor)\n\t{\n\t\tthis.name \u003d name;\n\t\tthis.textColorRGB \u003d textColor !\u003d null ? textColor.getRGB() : Color.WHITE.getRGB();\n\t\tthis.tileColorRGB \u003d tileColor !\u003d null ? tileColor.getRGB() : new Color(255, 255, 255, 100).getRGB();\n\t\tthis.overlayTextColorRGB \u003d overlayTextColor !\u003d null ? overlayTextColor.getRGB() : Color.WHITE.getRGB();\n\t\tthis.deprioritize \u003d false;\n\t}\n\t\n\tpublic boolean isDeprioritize()\n\t{\n\t\treturn deprioritize;\n\t}\n\t\n\tpublic void setDeprioritize(boolean deprioritize)\n\t{\n\t\tthis.deprioritize \u003d deprioritize;\n\t}\n\t\n\tpublic String getName()\n\t{\n\t\treturn name;\n\t}\n\t\n\tpublic void setName(String name)\n\t{\n\t\tthis.name \u003d name;\n\t}\n\t\n\tpublic Color getTextColor()\n\t{\n\t\treturn new Color(textColorRGB);\n\t}\n\t\n\tpublic void setTextColor(Color textColor)\n\t{\n\t\tthis.textColorRGB \u003d textColor !\u003d null ? textColor.getRGB() : Color.WHITE.getRGB();\n\t}\n\t\n\tpublic Color getTileColor()\n\t{\n\t\treturn new Color(tileColorRGB, true);\n\t}\n\t\n\tpublic void setTileColor(Color tileColor)\n\t{\n\t\tif (tileColor !\u003d null)\n\t\t{\n\t\t\tint r \u003d tileColor.getRed();\n\t\t\tint g \u003d tileColor.getGreen();\n\t\t\tint b \u003d tileColor.getBlue();\n\t\t\tint a \u003d tileColor.getAlpha();\n\t\t\tthis.tileColorRGB \u003d (a \u003c\u003c 24) | (r \u003c\u003c 16) | (g \u003c\u003c 8) | b;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.tileColorRGB \u003d new Color(255, 255, 255, 100).getRGB();\n\t\t}\n\t}\n\t\n\tpublic Color getOverlayTextColor()\n\t{\n\t\treturn new Color(overlayTextColorRGB);\n\t}\n\t\n\tpublic void setOverlayTextColor(Color overlayTextColor)\n\t{\n\t\tthis.overlayTextColorRGB \u003d overlayTextColor !\u003d null ? overlayTextColor.getRGB() : Color.WHITE.getRGB();\n\t}\n\t\n\tpublic List\u003cString\u003e getClues()\n\t{\n\t\treturn clues;\n\t}\n\t\n\tpublic Map\u003cString, String\u003e getClueIdentifiers()\n\t{\n\t\treturn clueIdentifiers;\n\t}\n\t\n\tpublic int getTextColorRGB()\n\t{\n\t\treturn textColorRGB;\n\t}\n\t\n\tpublic void setTextColorRGB(int rgb)\n\t{\n\t\tthis.textColorRGB \u003d rgb;\n\t}\n\t\n\tpublic int getTileColorRGB()\n\t{\n\t\treturn tileColorRGB;\n\t}\n\t\n\tpublic void setTileColorRGB(int rgb)\n\t{\n\t\tthis.tileColorRGB \u003d rgb;\n\t}\n\t\n\tpublic int getOverlayTextColorRGB()\n\t{\n\t\treturn overlayTextColorRGB;\n\t}\n\t\n\tpublic void setOverlayTextColorRGB(int rgb)\n\t{\n\t\tthis.overlayTextColorRGB \u003d rgb;\n\t}\n}\n\n","filePath":"src\\main\\java\\com\\cluejuggler\\model\\ClueList.java"},{"fileName":"ClueStatus.java","content":"package com.cluejuggler.model;\n\npublic enum ClueStatus\n{\n\tGOOD(1),\n\tBAD(-1),\n\tUNSURE(0),\n\tCUSTOM(2);\n\t\n\tprivate final int value;\n\t\n\tClueStatus(int value)\n\t{\n\t\tthis.value \u003d value;\n\t}\n\t\n\tpublic int getValue()\n\t{\n\t\treturn value;\n\t}\n\t\n\tpublic static ClueStatus fromValue(int value)\n\t{\n\t\tfor (ClueStatus status : values())\n\t\t{\n\t\t\tif (status.value \u003d\u003d value)\n\t\t\t{\n\t\t\t\treturn status;\n\t\t\t}\n\t\t}\n\t\treturn UNSURE;\n\t}\n}\n\n","filePath":"src\\main\\java\\com\\cluejuggler\\model\\ClueStatus.java"},{"fileName":"TrackedClue.java","content":"package com.cluejuggler.model;\n\nimport net.runelite.client.plugins.cluescrolls.clues.ClueScroll;\n\npublic class TrackedClue\n{\n\tprivate final int itemId;\n\tprivate final String clueText;\n\tprivate final String identifier;\n\tprivate final ClueScroll clueScroll;\n\tprivate ClueStatus status;\n\tprivate ClueList customList;\n\t\n\tpublic TrackedClue(int itemId, String clueText, String identifier, ClueScroll clueScroll)\n\t{\n\t\tthis.itemId \u003d itemId;\n\t\tthis.clueText \u003d clueText;\n\t\tthis.identifier \u003d identifier;\n\t\tthis.clueScroll \u003d clueScroll;\n\t\tthis.status \u003d ClueStatus.UNSURE;\n\t}\n\t\n\tpublic int getItemId()\n\t{\n\t\treturn itemId;\n\t}\n\t\n\tpublic String getClueText()\n\t{\n\t\treturn clueText;\n\t}\n\t\n\tpublic String getIdentifier()\n\t{\n\t\treturn identifier;\n\t}\n\t\n\tpublic ClueScroll getClueScroll()\n\t{\n\t\treturn clueScroll;\n\t}\n\t\n\tpublic ClueStatus getStatus()\n\t{\n\t\treturn status;\n\t}\n\t\n\tpublic void setStatus(ClueStatus status)\n\t{\n\t\tthis.status \u003d status;\n\t}\n\t\n\tpublic ClueList getCustomList()\n\t{\n\t\treturn customList;\n\t}\n\t\n\tpublic void setCustomList(ClueList customList)\n\t{\n\t\tthis.customList \u003d customList;\n\t\tif (customList !\u003d null)\n\t\t{\n\t\t\tthis.status \u003d ClueStatus.CUSTOM;\n\t\t}\n\t}\n\t\n\tpublic boolean isBeginnerOrMaster()\n\t{\n\t\treturn identifier !\u003d null \u0026\u0026 (identifier.startsWith(\"beginner:\") || identifier.startsWith(\"master:\"));\n\t}\n}\n\n","filePath":"src\\main\\java\\com\\cluejuggler\\model\\TrackedClue.java"},{"fileName":"ClueJugglerOverlay.java","content":"package com.cluejuggler.overlay;\n\nimport com.cluejuggler.ClueJugglerPlugin;\nimport com.cluejuggler.model.ClueList;\nimport com.cluejuggler.service.ClueListService;\nimport com.cluejuggler.service.ClueLookupService;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport javax.inject.Inject;\nimport net.runelite.client.plugins.cluescrolls.ClueScrollPlugin;\nimport net.runelite.client.plugins.cluescrolls.clues.ClueScroll;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.LineComponent;\n\npublic class ClueJugglerOverlay extends OverlayPanel\n{\n\tprivate final ClueJugglerPlugin plugin;\n\n\t@Inject\n\tprivate ClueJugglerOverlay(ClueJugglerPlugin plugin)\n\t{\n\t\tsuper(plugin);\n\t\tthis.plugin \u003d plugin;\n\t\tsetPosition(OverlayPosition.TOP_LEFT);\n\t\tsetPriority(PRIORITY_HIGH);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (!plugin.getConfig().showIndicator())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tClueScrollPlugin clueScrollPlugin \u003d plugin.getClueScrollPlugin();\n\t\tif (clueScrollPlugin \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tClueScroll clue \u003d clueScrollPlugin.getClue();\n\t\tif (clue \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tClueListService listService \u003d plugin.getListService();\n\t\tClueLookupService lookupService \u003d plugin.getLookupService();\n\t\t\n\t\tString clueIdentifier \u003d lookupService.getClueIdentifier(clue, plugin.getTrackingService());\n\t\t\n\t\tboolean isGood \u003d false;\n\t\tboolean isBad \u003d false;\n\t\tClueList customList \u003d null;\n\t\t\n\t\tif (clueIdentifier !\u003d null \u0026\u0026 !clueIdentifier.isEmpty())\n\t\t{\n\t\t\tisGood \u003d listService.isGoodClueByIdentifier(clueIdentifier);\n\t\t\tisBad \u003d listService.isBadClueByIdentifier(clueIdentifier);\n\t\t\tif (!isGood \u0026\u0026 !isBad)\n\t\t\t{\n\t\t\t\tcustomList \u003d listService.getCustomListForClue(clueIdentifier);\n\t\t\t}\n\t\t}\n\n\t\tString text;\n\t\tColor color;\n\t\t\n\t\tif (customList !\u003d null)\n\t\t{\n\t\t\ttext \u003d customList.getName();\n\t\t\tcolor \u003d customList.getTextColor();\n\t\t}\n\t\telse if (isGood)\n\t\t{\n\t\t\ttext \u003d \"Good Clue\";\n\t\t\tcolor \u003d Color.GREEN;\n\t\t}\n\t\telse if (isBad)\n\t\t{\n\t\t\ttext \u003d \"Bad Clue\";\n\t\t\tcolor \u003d Color.RED;\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttext \u003d \"Unsure\";\n\t\t\tcolor \u003d Color.YELLOW;\n\t\t}\n\n\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t.left(\"Clue Status:\")\n\t\t\t.right(text)\n\t\t\t.rightColor(color)\n\t\t\t.build());\n\n\t\treturn super.render(graphics);\n\t}\n}\n\n","filePath":"src\\main\\java\\com\\cluejuggler\\overlay\\ClueJugglerOverlay.java"},{"fileName":"ClueJugglerWorldOverlay.java","content":"package com.cluejuggler.overlay;\n\nimport com.cluejuggler.ClueJugglerConfig;\nimport com.cluejuggler.ClueJugglerPlugin;\nimport com.cluejuggler.model.ClueList;\nimport com.cluejuggler.service.ClueListService;\nimport com.cluejuggler.service.ClueTrackingService;\nimport com.cluejuggler.service.ClueTrackingService.DroppedClueInfo;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.FontMetrics;\nimport java.awt.Graphics2D;\nimport java.awt.Polygon;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Scene;\nimport net.runelite.api.Tile;\nimport net.runelite.api.TileItem;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.gameval.ItemID;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\n\npublic class ClueJugglerWorldOverlay extends Overlay\n{\n\tprivate final ClueJugglerPlugin plugin;\n\tprivate final Client client;\n\n\t@Inject\n\tprivate ClueJugglerWorldOverlay(ClueJugglerPlugin plugin, Client client)\n\t{\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\n\t\tthis.plugin \u003d plugin;\n\t\tthis.client \u003d client;\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (!plugin.getConfig().clueHighlights())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tClueTrackingService trackingService \u003d plugin.getTrackingService();\n\t\tClueListService listService \u003d plugin.getListService();\n\t\tClueJugglerConfig config \u003d plugin.getConfig();\n\t\t\n\t\tif (trackingService.getDroppedClues().isEmpty())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tScene scene \u003d client.getScene();\n\t\tif (scene \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tTile[][][] tiles \u003d scene.getTiles();\n\t\tif (tiles \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tint plane \u003d client.getPlane();\n\n\t\tfor (int x \u003d 0; x \u003c 104; x++)\n\t\t{\n\t\t\tfor (int y \u003d 0; y \u003c 104; y++)\n\t\t\t{\n\t\t\t\tTile tile \u003d tiles[plane][x][y];\n\t\t\t\tif (tile \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tjava.util.List\u003cTileItem\u003e groundItems \u003d tile.getGroundItems();\n\t\t\t\tif (groundItems \u003d\u003d null || groundItems.isEmpty())\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tboolean hasClueOnTile \u003d false;\n\t\t\t\tfor (TileItem item : groundItems)\n\t\t\t\t{\n\t\t\t\t\tif (item \u003d\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tint itemId \u003d item.getId();\n\t\t\t\t\tif (itemId \u003d\u003d ItemID.TRAIL_CLUE_BEGINNER || \n\t\t\t\t\t\titemId \u003d\u003d ItemID.TRAIL_CLUE_MASTER ||\n\t\t\t\t\t\titemId \u003d\u003d 23182)\n\t\t\t\t\t{\n\t\t\t\t\t\thasClueOnTile \u003d true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tItemComposition itemComp \u003d client.getItemDefinition(itemId);\n\t\t\t\t\tif (itemComp !\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tString itemName \u003d itemComp.getName();\n\t\t\t\t\t\tif (itemName !\u003d null \u0026\u0026 (itemName.startsWith(\"Clue scroll\")\n\t\t\t\t\t\t\t|| itemName.startsWith(\"Challenge scroll\")\n\t\t\t\t\t\t\t|| itemName.startsWith(\"Treasure scroll\")))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thasClueOnTile \u003d true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (!hasClueOnTile)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tWorldPoint tileWorldPoint \u003d tile.getWorldLocation();\n\t\t\t\tDroppedClueInfo info \u003d trackingService.getDroppedClueInfo(tileWorldPoint);\n\t\t\t\t\n\t\t\t\tif (info \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tColor tileColor;\n\t\t\t\tColor textColor;\n\t\t\t\tString text;\n\t\t\t\t\n\t\t\t\tif (info.customList !\u003d null)\n\t\t\t\t{\n\t\t\t\t\ttileColor \u003d info.customList.getTileColor();\n\t\t\t\t\ttextColor \u003d info.customList.getOverlayTextColor();\n\t\t\t\t\ttext \u003d info.customList.getName();\n\t\t\t\t}\n\t\t\t\telse if (info.isGood !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tif (info.isGood)\n\t\t\t\t\t{\n\t\t\t\t\t\ttileColor \u003d config.goodClueTileColor();\n\t\t\t\t\t\ttextColor \u003d config.goodClueTextColor();\n\t\t\t\t\t\ttext \u003d \"Good\";\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\ttileColor \u003d config.badClueTileColor();\n\t\t\t\t\t\ttextColor \u003d config.badClueTextColor();\n\t\t\t\t\t\ttext \u003d \"Bad\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttileColor \u003d config.unsureClueTileColor();\n\t\t\t\t\ttextColor \u003d config.unsureClueTextColor();\n\t\t\t\t\ttext \u003d \"Unsure\";\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (!tileWorldPoint.isInScene(client))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tLocalPoint localPoint \u003d LocalPoint.fromWorld(client, tileWorldPoint);\n\t\t\t\tif (localPoint \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tPolygon tilePoly \u003d Perspective.getCanvasTilePoly(client, localPoint);\n\t\t\t\tif (tilePoly !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tOverlayUtil.renderPolygon(graphics, tilePoly, tileColor);\n\t\t\t\t}\n\n\t\t\t\tnet.runelite.api.Point textPoint \u003d Perspective.localToCanvas(client, localPoint, client.getPlane(), 50);\n\t\t\t\tif (textPoint !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tFontMetrics fontMetrics \u003d graphics.getFontMetrics();\n\t\t\t\t\tint textWidth \u003d fontMetrics.stringWidth(text);\n\t\t\t\t\tnet.runelite.api.Point centeredTextPoint \u003d new net.runelite.api.Point(\n\t\t\t\t\t\ttextPoint.getX() - textWidth / 2,\n\t\t\t\t\t\ttextPoint.getY()\n\t\t\t\t\t);\n\t\t\t\t\tOverlayUtil.renderTextLocation(graphics, centeredTextPoint, text, textColor);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\n","filePath":"src\\main\\java\\com\\cluejuggler\\overlay\\ClueJugglerWorldOverlay.java"},{"fileName":"ClueListService.java","content":"package com.cluejuggler.service;\n\nimport com.cluejuggler.model.ClueList;\nimport com.google.gson.Gson;\nimport com.google.gson.JsonObject;\nimport java.io.BufferedReader;\nimport java.io.BufferedWriter;\nimport java.io.File;\nimport java.io.FileReader;\nimport java.io.FileWriter;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.concurrent.ConcurrentHashMap;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.config.ConfigManager;\n\n@Slf4j\n@Singleton\npublic class ClueListService\n{\n\tprivate final ConfigManager configManager;\n\tprivate final Gson gson;\n\t\n\t@Getter\n\tprivate final Map\u003cString, String\u003e goodClueIdentifiers \u003d new ConcurrentHashMap\u003c\u003e();\n\t@Getter\n\tprivate final Map\u003cString, String\u003e badClueIdentifiers \u003d new ConcurrentHashMap\u003c\u003e();\n\t@Getter\n\tprivate final List\u003cClueList\u003e customLists \u003d new ArrayList\u003c\u003e();\n\t\n\tprivate boolean listsLoaded \u003d false;\n\tprivate boolean customListsLoaded \u003d false;\n\t\n\t@Inject\n\tpublic ClueListService(ConfigManager configManager, Gson gson)\n\t{\n\t\tthis.configManager \u003d configManager;\n\t\tthis.gson \u003d gson;\n\t}\n\t\n\tpublic void loadLists()\n\t{\n\t\tif (configManager \u003d\u003d null || listsLoaded)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tString goodStepsData \u003d configManager.getConfiguration(\"cluejuggler\", \"goodSteps\");\n\t\tString badStepsData \u003d configManager.getConfiguration(\"cluejuggler\", \"badSteps\");\n\t\t\n\t\tgoodClueIdentifiers.clear();\n\t\tbadClueIdentifiers.clear();\n\t\t\n\t\tif (goodStepsData !\u003d null \u0026\u0026 !goodStepsData.isEmpty())\n\t\t{\n\t\t\tparseListData(goodStepsData, goodClueIdentifiers);\n\t\t}\n\t\t\n\t\tif (badStepsData !\u003d null \u0026\u0026 !badStepsData.isEmpty())\n\t\t{\n\t\t\tparseListData(badStepsData, badClueIdentifiers);\n\t\t}\n\t\t\n\t\tlistsLoaded \u003d true;\n\t}\n\t\n\tprivate void parseListData(String data, Map\u003cString, String\u003e targetMap)\n\t{\n\t\tString[] items \u003d data.split(\"\\\\|\");\n\t\tfor (String item : items)\n\t\t{\n\t\t\titem \u003d item.trim();\n\t\t\tif (!item.isEmpty())\n\t\t\t{\n\t\t\t\tString[] parts \u003d item.split(\"::\", 2);\n\t\t\t\tString text;\n\t\t\t\tString identifier;\n\t\t\t\tif (parts.length \u003d\u003d 2)\n\t\t\t\t{\n\t\t\t\t\ttext \u003d parts[0].trim();\n\t\t\t\t\tidentifier \u003d parts[1].trim();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttext \u003d item;\n\t\t\t\t\tidentifier \u003d \"text:\" + text.hashCode();\n\t\t\t\t}\n\t\t\t\tif (!text.isEmpty() \u0026\u0026 !identifier.isEmpty())\n\t\t\t\t{\n\t\t\t\t\ttargetMap.put(identifier, text);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tpublic void saveLists()\n\t{\n\t\tif (configManager \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tString goodData \u003d buildListData(goodClueIdentifiers);\n\t\tString badData \u003d buildListData(badClueIdentifiers);\n\t\t\n\t\tconfigManager.setConfiguration(\"cluejuggler\", \"goodSteps\", goodData);\n\t\tconfigManager.setConfiguration(\"cluejuggler\", \"badSteps\", badData);\n\t}\n\t\n\tprivate String buildListData(Map\u003cString, String\u003e sourceMap)\n\t{\n\t\tStringBuilder builder \u003d new StringBuilder();\n\t\tboolean first \u003d true;\n\t\tfor (Map.Entry\u003cString, String\u003e entry : sourceMap.entrySet())\n\t\t{\n\t\t\tif (!first)\n\t\t\t{\n\t\t\t\tbuilder.append(\"|\");\n\t\t\t}\n\t\t\tfirst \u003d false;\n\t\t\tbuilder.append(entry.getValue()).append(\"::\").append(entry.getKey());\n\t\t}\n\t\treturn builder.toString();\n\t}\n\t\n\tpublic void loadCustomLists()\n\t{\n\t\tif (configManager \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif (customListsLoaded \u0026\u0026 !customLists.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif (customListsLoaded \u0026\u0026 customLists.isEmpty())\n\t\t{\n\t\t\tString customListsJson \u003d configManager.getConfiguration(\"cluejuggler\", \"customLists\");\n\t\t\tif (customListsJson !\u003d null \u0026\u0026 !customListsJson.isEmpty() \u0026\u0026 !customListsJson.equals(\"[]\"))\n\t\t\t{\n\t\t\t\tcustomListsLoaded \u003d false;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (customListsLoaded)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tString customListsJson \u003d configManager.getConfiguration(\"cluejuggler\", \"customLists\");\n\t\tif (customListsJson \u003d\u003d null || customListsJson.isEmpty())\n\t\t{\n\t\t\tcustomListsJson \u003d \"[]\";\n\t\t}\n\t\t\n\t\ttry\n\t\t{\n\t\t\tClueList[] loaded \u003d gson.fromJson(customListsJson, ClueList[].class);\n\t\t\tif (loaded !\u003d null)\n\t\t\t{\n\t\t\t\tcustomLists.clear();\n\t\t\t\tcustomLists.addAll(Arrays.asList(loaded));\n\t\t\t}\n\t\t\tcustomListsLoaded \u003d true;\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\tlog.warn(\"Failed to load custom lists\", e);\n\t\t\tcustomLists.clear();\n\t\t\tcustomListsLoaded \u003d true;\n\t\t}\n\t}\n\t\n\tpublic void saveCustomLists()\n\t{\n\t\tif (configManager \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\ttry\n\t\t{\n\t\t\tString json \u003d gson.toJson(customLists);\n\t\t\tconfigManager.setConfiguration(\"cluejuggler\", \"customLists\", json);\n\t\t\tcustomListsLoaded \u003d true;\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\tlog.warn(\"Failed to save custom lists\", e);\n\t\t}\n\t}\n\t\n\tpublic void ensureListsLoaded()\n\t{\n\t\tif (!listsLoaded)\n\t\t{\n\t\t\tloadLists();\n\t\t}\n\t\tif (!customListsLoaded)\n\t\t{\n\t\t\tloadCustomLists();\n\t\t}\n\t}\n\t\n\tpublic void addGoodClue(String identifier, String text)\n\t{\n\t\tensureListsLoaded();\n\t\tremoveFromBad(identifier);\n\t\tremoveFromCustomLists(identifier);\n\t\tgoodClueIdentifiers.put(identifier, text);\n\t\tsaveLists();\n\t}\n\t\n\tpublic void addBadClue(String identifier, String text)\n\t{\n\t\tensureListsLoaded();\n\t\tremoveFromGood(identifier);\n\t\tremoveFromCustomLists(identifier);\n\t\tbadClueIdentifiers.put(identifier, text);\n\t\tsaveLists();\n\t}\n\t\n\tpublic void addToCustomList(ClueList list, String identifier, String text)\n\t{\n\t\tensureListsLoaded();\n\t\tremoveFromGood(identifier);\n\t\tremoveFromBad(identifier);\n\t\tremoveFromCustomLists(identifier);\n\t\tlist.getClueIdentifiers().put(identifier, text);\n\t\tlist.getClues().add(text);\n\t\tsaveCustomLists();\n\t}\n\t\n\tpublic void removeFromGood(String identifier)\n\t{\n\t\tgoodClueIdentifiers.remove(identifier);\n\t}\n\t\n\tpublic void removeFromBad(String identifier)\n\t{\n\t\tbadClueIdentifiers.remove(identifier);\n\t}\n\t\n\tpublic void removeFromCustomLists(String identifier)\n\t{\n\t\tfor (ClueList list : customLists)\n\t\t{\n\t\t\tString text \u003d list.getClueIdentifiers().remove(identifier);\n\t\t\tif (text !\u003d null)\n\t\t\t{\n\t\t\t\tlist.getClues().remove(text);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tpublic boolean isGoodClue(String clueText)\n\t{\n\t\tensureListsLoaded();\n\t\treturn goodClueIdentifiers.containsValue(clueText);\n\t}\n\t\n\tpublic boolean isBadClue(String clueText)\n\t{\n\t\tensureListsLoaded();\n\t\treturn badClueIdentifiers.containsValue(clueText);\n\t}\n\t\n\tpublic boolean isGoodClueByIdentifier(String identifier)\n\t{\n\t\tensureListsLoaded();\n\t\treturn goodClueIdentifiers.containsKey(identifier);\n\t}\n\t\n\tpublic boolean isBadClueByIdentifier(String identifier)\n\t{\n\t\tensureListsLoaded();\n\t\treturn badClueIdentifiers.containsKey(identifier);\n\t}\n\t\n\tpublic ClueList getCustomListForClue(String identifier)\n\t{\n\t\tensureListsLoaded();\n\t\tfor (ClueList list : customLists)\n\t\t{\n\t\t\tif (list.getClueIdentifiers().containsKey(identifier))\n\t\t\t{\n\t\t\t\treturn list;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\t\n\tpublic ClueList getCustomListForClueByText(String clueText)\n\t{\n\t\tensureListsLoaded();\n\t\tfor (ClueList list : customLists)\n\t\t{\n\t\t\tif (list.getClues().contains(clueText))\n\t\t\t{\n\t\t\t\treturn list;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\t\n\tpublic ClueList findCustomListByName(String name)\n\t{\n\t\tensureListsLoaded();\n\t\tfor (ClueList list : customLists)\n\t\t{\n\t\t\tif (list.getName().equals(name))\n\t\t\t{\n\t\t\t\treturn list;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\t\n\tpublic void createCustomList(String name, java.awt.Color textColor, java.awt.Color tileColor, java.awt.Color overlayTextColor)\n\t{\n\t\tensureListsLoaded();\n\t\tClueList newList \u003d new ClueList(name, textColor, tileColor, overlayTextColor);\n\t\tcustomLists.add(newList);\n\t\tsaveCustomLists();\n\t}\n\t\n\tpublic void deleteCustomList(ClueList list)\n\t{\n\t\tcustomLists.remove(list);\n\t\tsaveCustomLists();\n\t}\n\t\n\tpublic boolean hasAnyCluesInLists()\n\t{\n\t\tensureListsLoaded();\n\t\tif (!goodClueIdentifiers.isEmpty() || !badClueIdentifiers.isEmpty())\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\tfor (ClueList list : customLists)\n\t\t{\n\t\t\tif (!list.getClueIdentifiers().isEmpty())\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\t\n\tpublic String exportListsToJson()\n\t{\n\t\tensureListsLoaded();\n\t\t\n\t\tjava.util.Map\u003cString, Object\u003e exportData \u003d new java.util.HashMap\u003c\u003e();\n\t\texportData.put(\"goodClues\", goodClueIdentifiers);\n\t\texportData.put(\"badClues\", badClueIdentifiers);\n\t\texportData.put(\"customLists\", customLists);\n\t\t\n\t\treturn gson.toJson(exportData);\n\t}\n\t\n\tpublic void importListsFromJson(String json)\n\t{\n\t\ttry\n\t\t{\n\t\t\tJsonObject importData \u003d gson.fromJson(json, JsonObject.class);\n\t\t\t\n\t\t\tif (importData.has(\"goodClues\"))\n\t\t\t{\n\t\t\t\tJsonObject goodData \u003d importData.getAsJsonObject(\"goodClues\");\n\t\t\t\tgoodClueIdentifiers.clear();\n\t\t\t\tfor (String key : goodData.keySet())\n\t\t\t\t{\n\t\t\t\t\tgoodClueIdentifiers.put(key, goodData.get(key).getAsString());\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (importData.has(\"badClues\"))\n\t\t\t{\n\t\t\t\tJsonObject badData \u003d importData.getAsJsonObject(\"badClues\");\n\t\t\t\tbadClueIdentifiers.clear();\n\t\t\t\tfor (String key : badData.keySet())\n\t\t\t\t{\n\t\t\t\t\tbadClueIdentifiers.put(key, badData.get(key).getAsString());\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (importData.has(\"customLists\"))\n\t\t\t{\n\t\t\t\tString customListsJson \u003d importData.get(\"customLists\").toString();\n\t\t\t\tClueList[] imported \u003d gson.fromJson(customListsJson, ClueList[].class);\n\t\t\t\tif (imported !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tcustomLists.clear();\n\t\t\t\t\tcustomLists.addAll(Arrays.asList(imported));\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tsaveLists();\n\t\t\tsaveCustomLists();\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\tlog.warn(\"Failed to import lists from JSON\", e);\n\t\t}\n\t}\n\t\n\tpublic void exportToFile(File file)\n\t{\n\t\ttry (BufferedWriter writer \u003d new BufferedWriter(new FileWriter(file)))\n\t\t{\n\t\t\twriter.write(exportListsToJson());\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\tlog.warn(\"Failed to export lists to file\", e);\n\t\t}\n\t}\n\t\n\tpublic void importFromFile(File file)\n\t{\n\t\ttry (BufferedReader reader \u003d new BufferedReader(new FileReader(file)))\n\t\t{\n\t\t\tStringBuilder sb \u003d new StringBuilder();\n\t\t\tString line;\n\t\t\twhile ((line \u003d reader.readLine()) !\u003d null)\n\t\t\t{\n\t\t\t\tsb.append(line);\n\t\t\t}\n\t\t\timportListsFromJson(sb.toString());\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\tlog.warn(\"Failed to import lists from file\", e);\n\t\t}\n\t}\n\t\n\tpublic void clearGoodSteps()\n\t{\n\t\tgoodClueIdentifiers.clear();\n\t\tsaveLists();\n\t}\n\t\n\tpublic void clearBadSteps()\n\t{\n\t\tbadClueIdentifiers.clear();\n\t\tsaveLists();\n\t}\n\t\n\tpublic void forceReload()\n\t{\n\t\tlistsLoaded \u003d false;\n\t\tcustomListsLoaded \u003d false;\n\t\tloadLists();\n\t\tloadCustomLists();\n\t}\n}\n\n","filePath":"src\\main\\java\\com\\cluejuggler\\service\\ClueListService.java"},{"fileName":"ClueLookupService.java","content":"package com.cluejuggler.service;\n\nimport java.util.Map;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport net.runelite.api.Client;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.api.gameval.ItemID;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.plugins.cluescrolls.ClueScrollPlugin;\nimport net.runelite.client.plugins.cluescrolls.clues.AnagramClue;\nimport net.runelite.client.plugins.cluescrolls.clues.BeginnerMapClue;\nimport net.runelite.client.plugins.cluescrolls.clues.CipherClue;\nimport net.runelite.client.plugins.cluescrolls.clues.ClueScroll;\nimport net.runelite.client.plugins.cluescrolls.clues.CoordinateClue;\nimport net.runelite.client.plugins.cluescrolls.clues.CrypticClue;\nimport net.runelite.client.plugins.cluescrolls.clues.EmoteClue;\nimport net.runelite.client.plugins.cluescrolls.clues.FairyRingClue;\nimport net.runelite.client.plugins.cluescrolls.clues.MapClue;\nimport net.runelite.client.plugins.cluescrolls.clues.MusicClue;\n\n@Singleton\npublic class ClueLookupService\n{\n\tprivate final Client client;\n\tprivate final ItemManager itemManager;\n\tprivate final ClueScrollPlugin clueScrollPlugin;\n\tprivate final ClueTextService textService;\n\t\n\t@Inject\n\tpublic ClueLookupService(Client client, ItemManager itemManager, ClueScrollPlugin clueScrollPlugin, ClueTextService textService)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.itemManager \u003d itemManager;\n\t\tthis.clueScrollPlugin \u003d clueScrollPlugin;\n\t\tthis.textService \u003d textService;\n\t}\n\t\n\tpublic ClueScroll findClueScroll(int itemId)\n\t{\n\t\tif (itemId \u003d\u003d ItemID.TRAIL_CLUE_BEGINNER || itemId \u003d\u003d ItemID.TRAIL_CLUE_MASTER)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\t\n\t\tClueScroll clue \u003d MapClue.forItemId(itemId);\n\t\tif (clue !\u003d null)\n\t\t{\n\t\t\treturn clue;\n\t\t}\n\t\t\n\t\tclue \u003d MusicClue.forItemId(itemId);\n\t\tif (clue !\u003d null)\n\t\t{\n\t\t\treturn clue;\n\t\t}\n\t\t\n\t\tclue \u003d CoordinateClue.forItemId(itemId);\n\t\tif (clue !\u003d null)\n\t\t{\n\t\t\treturn clue;\n\t\t}\n\t\t\n\t\tclue \u003d AnagramClue.forItemId(itemId);\n\t\tif (clue !\u003d null)\n\t\t{\n\t\t\treturn clue;\n\t\t}\n\t\t\n\t\tclue \u003d CipherClue.forItemId(itemId);\n\t\tif (clue !\u003d null)\n\t\t{\n\t\t\treturn clue;\n\t\t}\n\t\t\n\t\tclue \u003d CrypticClue.forItemId(itemId);\n\t\tif (clue !\u003d null)\n\t\t{\n\t\t\treturn clue;\n\t\t}\n\t\t\n\t\tclue \u003d EmoteClue.forItemId(itemId);\n\t\tif (clue !\u003d null)\n\t\t{\n\t\t\treturn clue;\n\t\t}\n\t\t\n\t\tclue \u003d FairyRingClue.forItemId(itemId);\n\t\tif (clue !\u003d null)\n\t\t{\n\t\t\treturn clue;\n\t\t}\n\t\t\n\t\treturn null;\n\t}\n\t\n\tpublic String getClueIdentifier(ClueScroll clue, ClueTrackingService trackingService)\n\t{\n\t\tif (clue \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\t\n\t\tint itemId \u003d getCurrentClueItemId(trackingService);\n\t\tif (itemId \u003e 0 \u0026\u0026 itemId !\u003d ItemID.TRAIL_CLUE_BEGINNER \u0026\u0026 itemId !\u003d ItemID.TRAIL_CLUE_MASTER)\n\t\t{\n\t\t\treturn \"item:\" + itemId;\n\t\t}\n\t\t\n\t\tif (clue instanceof BeginnerMapClue)\n\t\t{\n\t\t\tString clueText \u003d textService.generateClueTextFromClue(clue);\n\t\t\tif (clueText !\u003d null \u0026\u0026 !clueText.isEmpty())\n\t\t\t{\n\t\t\t\treturn \"beginner:\" + clueText.hashCode();\n\t\t\t}\n\t\t\treturn \"beginner:\" + Integer.toHexString(clue.hashCode());\n\t\t}\n\t\t\n\t\tString clueText \u003d textService.generateClueTextFromClue(clue);\n\t\tif (clueText !\u003d null \u0026\u0026 !clueText.isEmpty())\n\t\t{\n\t\t\treturn \"master:\" + clueText.hashCode();\n\t\t}\n\t\t\n\t\treturn \"clue:\" + Integer.toHexString(clue.hashCode());\n\t}\n\t\n\tpublic int getCurrentClueItemId(ClueTrackingService trackingService)\n\t{\n\t\tif (!client.isClientThread())\n\t\t{\n\t\t\treturn -1;\n\t\t}\n\t\t\n\t\tif (clueScrollPlugin \u003d\u003d null)\n\t\t{\n\t\t\treturn -1;\n\t\t}\n\t\t\n\t\tClueScroll currentClue \u003d clueScrollPlugin.getClue();\n\t\tif (currentClue \u003d\u003d null)\n\t\t{\n\t\t\treturn -1;\n\t\t}\n\t\t\n\t\tif (currentClue instanceof BeginnerMapClue)\n\t\t{\n\t\t\tnet.runelite.api.ItemContainer inventory \u003d client.getItemContainer(net.runelite.api.gameval.InventoryID.INV);\n\t\t\tif (inventory !\u003d null)\n\t\t\t{\n\t\t\t\tfor (net.runelite.api.Item item : inventory.getItems())\n\t\t\t\t{\n\t\t\t\t\tif (item \u003d\u003d null || item.getId() \u003c\u003d 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (item.getId() \u003d\u003d ItemID.TRAIL_CLUE_BEGINNER || item.getId() \u003d\u003d 23182)\n\t\t\t\t\t{\n\t\t\t\t\t\tItemComposition itemComp \u003d itemManager.getItemComposition(item.getId());\n\t\t\t\t\t\tif (itemComp !\u003d null \u0026\u0026 (itemComp.getName().startsWith(\"Clue scroll\")\n\t\t\t\t\t\t\t|| itemComp.getName().startsWith(\"Challenge scroll\")\n\t\t\t\t\t\t\t|| itemComp.getName().startsWith(\"Treasure scroll\")))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn item.getId();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn ItemID.TRAIL_CLUE_BEGINNER;\n\t\t}\n\t\t\n\t\tString currentClueText \u003d textService.generateClueTextFromClue(currentClue);\n\t\tif (currentClueText !\u003d null \u0026\u0026 !currentClueText.isEmpty() \u0026\u0026 trackingService.isTrackedByText(currentClueText))\n\t\t{\n\t\t\tfor (Map.Entry\u003cInteger, ClueScroll\u003e entry : trackingService.getTrackedClues().entrySet())\n\t\t\t{\n\t\t\t\tClueScroll trackedClue \u003d entry.getValue();\n\t\t\t\tif (trackedClue \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tString trackedClueText \u003d textService.generateClueTextFromClue(trackedClue);\n\t\t\t\tif (trackedClueText !\u003d null \u0026\u0026 trackedClueText.equals(currentClueText))\n\t\t\t\t{\n\t\t\t\t\treturn entry.getKey();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (currentClueText \u003d\u003d null || currentClueText.isEmpty())\n\t\t{\n\t\t\treturn -1;\n\t\t}\n\t\t\n\t\tfor (Map.Entry\u003cInteger, ClueScroll\u003e entry : trackingService.getTrackedClues().entrySet())\n\t\t{\n\t\t\tClueScroll trackedClue \u003d entry.getValue();\n\t\t\tif (trackedClue \u003d\u003d null)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t\n\t\t\tString trackedClueText \u003d textService.generateClueTextFromClue(trackedClue);\n\t\t\tif (trackedClueText !\u003d null \u0026\u0026 trackedClueText.equals(currentClueText))\n\t\t\t{\n\t\t\t\treturn entry.getKey();\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn -1;\n\t}\n\t\n\tpublic boolean isClueScrollItem(int itemId)\n\t{\n\t\tif (itemId \u003d\u003d ItemID.TRAIL_CLUE_BEGINNER || \n\t\t\titemId \u003d\u003d ItemID.TRAIL_CLUE_MASTER || \n\t\t\titemId \u003d\u003d 23182)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\tItemComposition itemComp \u003d itemManager.getItemComposition(itemId);\n\t\tif (itemComp !\u003d null)\n\t\t{\n\t\t\tString itemName \u003d itemComp.getName();\n\t\t\tif (itemName !\u003d null \u0026\u0026 (itemName.startsWith(\"Clue scroll\")\n\t\t\t\t|| itemName.startsWith(\"Challenge scroll\")\n\t\t\t\t|| itemName.startsWith(\"Treasure scroll\")))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tpublic boolean isBeginnerOrMasterClue(int itemId)\n\t{\n\t\treturn itemId \u003d\u003d ItemID.TRAIL_CLUE_BEGINNER || \n\t\t\titemId \u003d\u003d ItemID.TRAIL_CLUE_MASTER || \n\t\t\titemId \u003d\u003d 23182;\n\t}\n\t\n\tpublic ClueScroll getCurrentClue()\n\t{\n\t\treturn clueScrollPlugin !\u003d null ? clueScrollPlugin.getClue() : null;\n\t}\n}\n\n","filePath":"src\\main\\java\\com\\cluejuggler\\service\\ClueLookupService.java"},{"fileName":"ClueTextService.java","content":"package com.cluejuggler.service;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport net.runelite.api.Client;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.api.gameval.ItemID;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.plugins.cluescrolls.ClueScrollPlugin;\nimport net.runelite.client.plugins.cluescrolls.clues.ClueScroll;\nimport net.runelite.client.plugins.cluescrolls.clues.AnagramClue;\nimport net.runelite.client.plugins.cluescrolls.clues.BeginnerMapClue;\nimport net.runelite.client.plugins.cluescrolls.clues.CipherClue;\nimport net.runelite.client.plugins.cluescrolls.clues.CoordinateClue;\nimport net.runelite.client.plugins.cluescrolls.clues.CrypticClue;\nimport net.runelite.client.plugins.cluescrolls.clues.EmoteClue;\nimport net.runelite.client.plugins.cluescrolls.clues.FaloTheBardClue;\nimport net.runelite.client.plugins.cluescrolls.clues.HotColdClue;\nimport net.runelite.client.plugins.cluescrolls.clues.MapClue;\nimport net.runelite.client.plugins.cluescrolls.clues.MusicClue;\nimport net.runelite.client.plugins.cluescrolls.clues.SkillChallengeClue;\nimport net.runelite.client.plugins.cluescrolls.clues.ThreeStepCrypticClue;\nimport net.runelite.client.plugins.cluescrolls.clues.item.ItemRequirement;\n\n@Singleton\npublic class ClueTextService\n{\n\tprivate final Client client;\n\tprivate final ItemManager itemManager;\n\tprivate final ClueScrollPlugin clueScrollPlugin;\n\t\n\t@Inject\n\tpublic ClueTextService(Client client, ItemManager itemManager, ClueScrollPlugin clueScrollPlugin)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.itemManager \u003d itemManager;\n\t\tthis.clueScrollPlugin \u003d clueScrollPlugin;\n\t}\n\t\n\tpublic String generateClueTextFromClue(ClueScroll clue)\n\t{\n\t\tString clueType \u003d getClueTypeName(clue);\n\t\tString description \u003d null;\n\t\t\n\t\tif (clue instanceof CrypticClue)\n\t\t{\n\t\t\tdescription \u003d ((CrypticClue) clue).getText();\n\t\t}\n\t\telse if (clue instanceof CipherClue)\n\t\t{\n\t\t\tdescription \u003d ((CipherClue) clue).getText();\n\t\t}\n\t\telse if (clue instanceof FaloTheBardClue)\n\t\t{\n\t\t\tdescription \u003d ((FaloTheBardClue) clue).getText();\n\t\t}\n\t\telse if (clue instanceof ThreeStepCrypticClue)\n\t\t{\n\t\t\tdescription \u003d ((ThreeStepCrypticClue) clue).getText();\n\t\t}\n\t\telse if (clue instanceof EmoteClue)\n\t\t{\n\t\t\tdescription \u003d ((EmoteClue) clue).getText();\n\t\t}\n\t\telse if (clue instanceof BeginnerMapClue || clue instanceof MapClue)\n\t\t{\n\t\t\tdescription \u003d generateMapClueText(clue);\n\t\t}\n\t\t\n\t\tif (description !\u003d null \u0026\u0026 !description.isEmpty())\n\t\t{\n\t\t\tString shortDesc \u003d description.length() \u003e 50 ? description.substring(0, 47) + \"...\" : description;\n\t\t\treturn clueType + \": \" + shortDesc;\n\t\t}\n\t\t\n\t\treturn clueType;\n\t}\n\t\n\tpublic String generateFormattedClueText(ClueScroll clue)\n\t{\n\t\tStringBuilder sb \u003d new StringBuilder();\n\t\t\n\t\tString clueType \u003d getClueTypeName(clue);\n\t\tsb.append(clueType);\n\t\t\n\t\tString npcName \u003d getNpcName(clue);\n\t\tif (npcName !\u003d null \u0026\u0026 !npcName.isEmpty())\n\t\t{\n\t\t\tsb.append(\"\\n\").append(\"NPC: \").append(npcName);\n\t\t}\n\t\t\n\t\tString locationText \u003d getLocationText(clue);\n\t\tif (locationText !\u003d null \u0026\u0026 !locationText.isEmpty())\n\t\t{\n\t\t\tsb.append(\"\\n\").append(locationText);\n\t\t}\n\t\t\n\t\tString itemRequirements \u003d getItemRequirements(clue);\n\t\tif (itemRequirements !\u003d null \u0026\u0026 !itemRequirements.isEmpty())\n\t\t{\n\t\t\tsb.append(\"\\n\").append(itemRequirements);\n\t\t}\n\t\t\n\t\treturn sb.toString();\n\t}\n\t\n\tpublic String getClueDifficulty(ClueScroll clue, ClueLookupService lookupService, ClueTrackingService trackingService)\n\t{\n\t\tif (clueScrollPlugin \u003d\u003d null)\n\t\t{\n\t\t\treturn \"Unknown\";\n\t\t}\n\t\t\n\t\tif (clue instanceof BeginnerMapClue)\n\t\t{\n\t\t\treturn \"Beginner\";\n\t\t}\n\t\t\n\t\tif (!client.isClientThread())\n\t\t{\n\t\t\treturn \"Unknown\";\n\t\t}\n\t\t\n\t\tint itemId \u003d -1;\n\t\tnet.runelite.api.ItemContainer inventory \u003d client.getItemContainer(net.runelite.api.gameval.InventoryID.INV);\n\t\tif (inventory !\u003d null)\n\t\t{\n\t\t\tfor (net.runelite.api.Item item : inventory.getItems())\n\t\t\t{\n\t\t\t\tif (item \u003d\u003d null || item.getId() \u003c\u003d 0)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tItemComposition itemComp \u003d itemManager.getItemComposition(item.getId());\n\t\t\t\tif (itemComp !\u003d null \u0026\u0026 (itemComp.getName().startsWith(\"Clue scroll\")\n\t\t\t\t\t|| itemComp.getName().startsWith(\"Challenge scroll\")\n\t\t\t\t\t|| itemComp.getName().startsWith(\"Treasure scroll\")))\n\t\t\t\t{\n\t\t\t\t\tClueScroll foundClue \u003d lookupService.findClueScroll(item.getId());\n\t\t\t\t\tif (foundClue \u003d\u003d clue)\n\t\t\t\t\t{\n\t\t\t\t\t\titemId \u003d item.getId();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\telse if (item.getId() \u003d\u003d ItemID.TRAIL_CLUE_BEGINNER || item.getId() \u003d\u003d 23182)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (clue instanceof BeginnerMapClue)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titemId \u003d item.getId();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tString itemName \u003d itemComp.getName();\n\t\t\t\t\t\tif (itemName !\u003d null \u0026\u0026 itemName.toLowerCase().contains(\"beginner\"))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titemId \u003d item.getId();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (itemId \u003c\u003d 0)\n\t\t{\n\t\t\titemId \u003d lookupService.getCurrentClueItemId(trackingService);\n\t\t}\n\t\t\n\t\tif (itemId \u003e 0)\n\t\t{\n\t\t\tif (itemId \u003d\u003d ItemID.TRAIL_CLUE_BEGINNER || itemId \u003d\u003d 23182)\n\t\t\t{\n\t\t\t\treturn \"Beginner\";\n\t\t\t}\n\t\t\t\n\t\t\tItemComposition itemComp \u003d itemManager.getItemComposition(itemId);\n\t\t\tif (itemComp !\u003d null)\n\t\t\t{\n\t\t\t\tString itemName \u003d itemComp.getName();\n\t\t\t\tif (itemName !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tif (itemName.toLowerCase().contains(\"beginner\"))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn \"Beginner\";\n\t\t\t\t\t}\n\t\t\t\t\telse if (itemName.contains(\"(easy)\"))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn \"Easy\";\n\t\t\t\t\t}\n\t\t\t\t\telse if (itemName.contains(\"(medium)\"))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn \"Medium\";\n\t\t\t\t\t}\n\t\t\t\t\telse if (itemName.contains(\"(hard)\"))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn \"Hard\";\n\t\t\t\t\t}\n\t\t\t\t\telse if (itemName.contains(\"(elite)\"))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn \"Elite\";\n\t\t\t\t\t}\n\t\t\t\t\telse if (itemName.contains(\"(master)\"))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn \"Master\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (inventory !\u003d null)\n\t\t{\n\t\t\tfor (net.runelite.api.Item item : inventory.getItems())\n\t\t\t{\n\t\t\t\tif (item \u003d\u003d null || item.getId() \u003c\u003d 0)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tItemComposition itemComp \u003d itemManager.getItemComposition(item.getId());\n\t\t\t\tif (itemComp !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tString itemName \u003d itemComp.getName();\n\t\t\t\t\tif (itemName !\u003d null \u0026\u0026 (itemName.startsWith(\"Clue scroll\")\n\t\t\t\t\t\t|| itemName.startsWith(\"Challenge scroll\")\n\t\t\t\t\t\t|| itemName.startsWith(\"Treasure scroll\")))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (itemName.toLowerCase().contains(\"beginner\"))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn \"Beginner\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tString currentClueText \u003d generateClueTextFromClue(clue);\n\t\tif (currentClueText !\u003d null \u0026\u0026 trackingService.isTrackedByText(currentClueText))\n\t\t{\n\t\t\tfor (java.util.Map.Entry\u003cInteger, ClueScroll\u003e entry : trackingService.getTrackedClues().entrySet())\n\t\t\t{\n\t\t\t\tClueScroll trackedClue \u003d entry.getValue();\n\t\t\t\tif (trackedClue \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tString trackedClueText \u003d generateClueTextFromClue(trackedClue);\n\t\t\t\tif (trackedClueText !\u003d null \u0026\u0026 trackedClueText.equals(currentClueText))\n\t\t\t\t{\n\t\t\t\t\treturn \"Unknown\";\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn \"Master\";\n\t\t}\n\t\t\n\t\treturn \"Unknown\";\n\t}\n\t\n\tpublic String getClueTypeName(ClueScroll clue)\n\t{\n\t\tif (clue instanceof BeginnerMapClue)\n\t\t{\n\t\t\treturn \"Beginner Clue\";\n\t\t}\n\t\telse if (clue instanceof MapClue)\n\t\t{\n\t\t\treturn \"Map Clue\";\n\t\t}\n\t\telse if (clue instanceof CrypticClue)\n\t\t{\n\t\t\treturn \"Cryptic Clue\";\n\t\t}\n\t\telse if (clue instanceof CipherClue)\n\t\t{\n\t\t\treturn \"Cipher Clue\";\n\t\t}\n\t\telse if (clue instanceof EmoteClue)\n\t\t{\n\t\t\treturn \"Emote Clue\";\n\t\t}\n\t\telse if (clue instanceof FaloTheBardClue)\n\t\t{\n\t\t\treturn \"Falo Clue\";\n\t\t}\n\t\telse if (clue instanceof ThreeStepCrypticClue)\n\t\t{\n\t\t\treturn \"Three Step\";\n\t\t}\n\t\telse if (clue instanceof AnagramClue)\n\t\t{\n\t\t\treturn \"Anagram Clue\";\n\t\t}\n\t\telse if (clue instanceof CoordinateClue)\n\t\t{\n\t\t\treturn \"Coordinate Clue\";\n\t\t}\n\t\telse if (clue instanceof MusicClue)\n\t\t{\n\t\t\treturn \"Music Clue\";\n\t\t}\n\t\telse if (clue instanceof HotColdClue)\n\t\t{\n\t\t\treturn \"Hot/Cold Clue\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn \"Clue\";\n\t\t}\n\t}\n\t\n\tpublic String getNpcName(ClueScroll clue)\n\t{\n\t\tif (clue instanceof AnagramClue)\n\t\t{\n\t\t\tAnagramClue anagramClue \u003d (AnagramClue) clue;\n\t\t\ttry\n\t\t\t{\n\t\t\t\tString[] npcs \u003d anagramClue.getNpcs(clueScrollPlugin);\n\t\t\t\tif (npcs !\u003d null \u0026\u0026 npcs.length \u003e 0 \u0026\u0026 npcs[0] !\u003d null \u0026\u0026 !npcs[0].isEmpty())\n\t\t\t\t{\n\t\t\t\t\treturn npcs[0];\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (Exception e)\n\t\t\t{\n\t\t\t}\n\t\t}\n\t\telse if (clue instanceof CipherClue)\n\t\t{\n\t\t\tCipherClue cipherClue \u003d (CipherClue) clue;\n\t\t\ttry\n\t\t\t{\n\t\t\t\tString[] npcs \u003d cipherClue.getNpcs(clueScrollPlugin);\n\t\t\t\tif (npcs !\u003d null \u0026\u0026 npcs.length \u003e 0 \u0026\u0026 npcs[0] !\u003d null \u0026\u0026 !npcs[0].isEmpty())\n\t\t\t\t{\n\t\t\t\t\treturn npcs[0];\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (Exception e)\n\t\t\t{\n\t\t\t}\n\t\t}\n\t\telse if (clue instanceof CrypticClue)\n\t\t{\n\t\t\tCrypticClue crypticClue \u003d (CrypticClue) clue;\n\t\t\ttry\n\t\t\t{\n\t\t\t\tString[] npcs \u003d crypticClue.getNpcs(clueScrollPlugin);\n\t\t\t\tif (npcs !\u003d null \u0026\u0026 npcs.length \u003e 0 \u0026\u0026 npcs[0] !\u003d null \u0026\u0026 !npcs[0].isEmpty())\n\t\t\t\t{\n\t\t\t\t\treturn npcs[0];\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (Exception e)\n\t\t\t{\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn null;\n\t}\n\t\n\tpublic String getLocationText(ClueScroll clue)\n\t{\n\t\tif (clue instanceof MapClue || clue instanceof BeginnerMapClue)\n\t\t{\n\t\t\treturn generateMapClueText(clue);\n\t\t}\n\t\telse if (clue instanceof CrypticClue)\n\t\t{\n\t\t\tCrypticClue crypticClue \u003d (CrypticClue) clue;\n\t\t\tString solution \u003d crypticClue.getSolution(clueScrollPlugin);\n\t\t\tif (solution !\u003d null \u0026\u0026 !solution.isEmpty())\n\t\t\t{\n\t\t\t\treturn solution;\n\t\t\t}\n\t\t\treturn crypticClue.getText();\n\t\t}\n\t\telse if (clue instanceof CipherClue)\n\t\t{\n\t\t\tCipherClue cipherClue \u003d (CipherClue) clue;\n\t\t\ttry\n\t\t\t{\n\t\t\t\tnet.runelite.api.coords.WorldPoint location \u003d cipherClue.getLocation(clueScrollPlugin);\n\t\t\t\tif (location !\u003d null)\n\t\t\t\t{\n\t\t\t\t\treturn location.getX() + \", \" + location.getY();\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (Exception e)\n\t\t\t{\n\t\t\t}\n\t\t\treturn cipherClue.getText();\n\t\t}\n\t\telse if (clue instanceof AnagramClue)\n\t\t{\n\t\t\tAnagramClue anagramClue \u003d (AnagramClue) clue;\n\t\t\tnet.runelite.api.coords.WorldPoint location \u003d anagramClue.getLocation(clueScrollPlugin);\n\t\t\tif (location !\u003d null)\n\t\t\t{\n\t\t\t\treturn \"Location: \" + location.getX() + \", \" + location.getY();\n\t\t\t}\n\t\t\treturn \"Anagram Clue\";\n\t\t}\n\t\telse if (clue instanceof CoordinateClue)\n\t\t{\n\t\t\tCoordinateClue coordClue \u003d (CoordinateClue) clue;\n\t\t\tnet.runelite.api.coords.WorldPoint location \u003d coordClue.getLocation(clueScrollPlugin);\n\t\t\tif (location !\u003d null)\n\t\t\t{\n\t\t\t\treturn location.getX() + \", \" + location.getY();\n\t\t\t}\n\t\t}\n\t\telse if (clue instanceof MusicClue)\n\t\t{\n\t\t\tMusicClue musicClue \u003d (MusicClue) clue;\n\t\t\treturn musicClue.getSong();\n\t\t}\n\t\telse if (clue instanceof EmoteClue)\n\t\t{\n\t\t\tEmoteClue emoteClue \u003d (EmoteClue) clue;\n\t\t\treturn emoteClue.getText();\n\t\t}\n\t\t\n\t\treturn null;\n\t}\n\t\n\tpublic String getItemRequirements(ClueScroll clue)\n\t{\n\t\tif (clue instanceof EmoteClue)\n\t\t{\n\t\t\tEmoteClue emoteClue \u003d (EmoteClue) clue;\n\t\t\tItemRequirement[] requirements \u003d emoteClue.getItemRequirements();\n\t\t\tif (requirements !\u003d null \u0026\u0026 requirements.length \u003e 0)\n\t\t\t{\n\t\t\t\tStringBuilder sb \u003d new StringBuilder();\n\t\t\t\tfor (int i \u003d 0; i \u003c requirements.length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (i \u003e 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tsb.append(\", \");\n\t\t\t\t\t}\n\t\t\t\t\tsb.append(requirements[i].getCollectiveName(clueScrollPlugin.getClient()));\n\t\t\t\t}\n\t\t\t\treturn sb.toString();\n\t\t\t}\n\t\t}\n\t\telse if (clue instanceof SkillChallengeClue)\n\t\t{\n\t\t\tSkillChallengeClue skillClue \u003d (SkillChallengeClue) clue;\n\t\t\tItemRequirement[] requirements \u003d skillClue.getItemRequirements();\n\t\t\tif (requirements !\u003d null \u0026\u0026 requirements.length \u003e 0)\n\t\t\t{\n\t\t\t\tStringBuilder sb \u003d new StringBuilder();\n\t\t\t\tfor (int i \u003d 0; i \u003c requirements.length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (i \u003e 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tsb.append(\", \");\n\t\t\t\t\t}\n\t\t\t\t\tsb.append(requirements[i].getCollectiveName(clueScrollPlugin.getClient()));\n\t\t\t\t}\n\t\t\t\treturn sb.toString();\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (clue.isRequiresSpade())\n\t\t{\n\t\t\treturn \"Requires: Spade\";\n\t\t}\n\t\t\n\t\treturn null;\n\t}\n\t\n\tpublic String generateMapClueText(ClueScroll clue)\n\t{\n\t\tif (clue instanceof MapClue)\n\t\t{\n\t\t\tMapClue mapClue \u003d (MapClue) clue;\n\t\t\tnet.runelite.api.coords.WorldPoint location \u003d mapClue.getLocation(clueScrollPlugin);\n\t\t\tif (location !\u003d null)\n\t\t\t{\n\t\t\t\treturn \"Map: \" + location.getX() + \", \" + location.getY();\n\t\t\t}\n\t\t}\n\t\telse if (clue instanceof BeginnerMapClue)\n\t\t{\n\t\t\tBeginnerMapClue beginnerMapClue \u003d (BeginnerMapClue) clue;\n\t\t\tnet.runelite.api.coords.WorldPoint location \u003d beginnerMapClue.getLocation(clueScrollPlugin);\n\t\t\tif (location !\u003d null)\n\t\t\t{\n\t\t\t\treturn \"Map: \" + location.getX() + \", \" + location.getY();\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn \"Map Clue\";\n\t}\n}\n\n","filePath":"src\\main\\java\\com\\cluejuggler\\service\\ClueTextService.java"},{"fileName":"ClueTrackingService.java","content":"package com.cluejuggler.service;\n\nimport com.cluejuggler.model.ClueList;\nimport java.util.Map;\nimport java.util.concurrent.ConcurrentHashMap;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport lombok.Getter;\nimport lombok.Setter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.plugins.cluescrolls.clues.ClueScroll;\n\n@Slf4j\n@Singleton\npublic class ClueTrackingService\n{\n\tprivate final Client client;\n\tprivate final ClientThread clientThread;\n\t\n\t@Getter\n\tprivate final Map\u003cInteger, ClueScroll\u003e trackedClues \u003d new ConcurrentHashMap\u003c\u003e();\n\t\n\t@Getter\n\tprivate final Map\u003cString, ClueScroll\u003e trackedCluesByText \u003d new ConcurrentHashMap\u003c\u003e();\n\t\n\tprivate final Map\u003cObject, Object\u003e clueStatusCache \u003d new ConcurrentHashMap\u003c\u003e();\n\tprivate final Map\u003cInteger, String\u003e itemIdToIdentifier \u003d new ConcurrentHashMap\u003c\u003e();\n\tprivate final Map\u003cWorldPoint, DroppedClueInfo\u003e droppedClues \u003d new ConcurrentHashMap\u003c\u003e();\n\t\n\t@Getter @Setter\n\tprivate String currentlyReadClueText \u003d null;\n\t@Getter @Setter\n\tprivate String currentlyReadClueIdentifier \u003d null;\n\t\n\tpublic static class DroppedClueInfo\n\t{\n\t\tpublic final String clueText;\n\t\tpublic final Boolean isGood; // true\u003dgood, false\u003dbad, null\u003dunsure or custom\n\t\tpublic final ClueList customList; // non-null if in custom list\n\t\t\n\t\tpublic DroppedClueInfo(String clueText, Boolean isGood, ClueList customList)\n\t\t{\n\t\t\tthis.clueText \u003d clueText;\n\t\t\tthis.isGood \u003d isGood;\n\t\t\tthis.customList \u003d customList;\n\t\t}\n\t}\n\t\n\tprivate ClueScroll lastProcessedClue \u003d null;\n\tprivate boolean lastClueWasTracked \u003d false;\n\t\n\t@Inject\n\tpublic ClueTrackingService(Client client, ClientThread clientThread)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.clientThread \u003d clientThread;\n\t}\n\t\n\tpublic void trackClue(int itemId, ClueScroll clue)\n\t{\n\t\tif (itemId \u003e 0 \u0026\u0026 clue !\u003d null)\n\t\t{\n\t\t\ttrackedClues.put(itemId, clue);\n\t\t}\n\t}\n\t\n\tpublic void trackClueByText(String clueText, ClueScroll clue)\n\t{\n\t\tif (clueText !\u003d null \u0026\u0026 !clueText.isEmpty() \u0026\u0026 clue !\u003d null)\n\t\t{\n\t\t\ttrackedCluesByText.put(clueText, clue);\n\t\t}\n\t}\n\t\n\tpublic boolean isTrackedByText(String clueText)\n\t{\n\t\treturn clueText !\u003d null \u0026\u0026 trackedCluesByText.containsKey(clueText);\n\t}\n\t\n\tpublic void clearTrackedClues()\n\t{\n\t\ttrackedClues.clear();\n\t\ttrackedCluesByText.clear();\n\t\tdroppedClues.clear();\n\t}\n\t\n\tpublic ClueScroll getLastProcessedClue()\n\t{\n\t\treturn lastProcessedClue;\n\t}\n\t\n\tpublic void setLastProcessedClue(ClueScroll clue)\n\t{\n\t\tthis.lastProcessedClue \u003d clue;\n\t}\n\t\n\tpublic boolean wasLastClueTracked()\n\t{\n\t\treturn lastClueWasTracked;\n\t}\n\t\n\tpublic void setLastClueWasTracked(boolean tracked)\n\t{\n\t\tthis.lastClueWasTracked \u003d tracked;\n\t}\n\t\n\tpublic void markDroppedClue(WorldPoint position, String clueText, Boolean isGood, ClueList customList)\n\t{\n\t\tif (position !\u003d null \u0026\u0026 clueText !\u003d null)\n\t\t{\n\t\t\tdroppedClues.put(position, new DroppedClueInfo(clueText, isGood, customList));\n\t\t\tlog.debug(\"Marked dropped clue at {}: text\u003d{}, isGood\u003d{}, customList\u003d{}\", \n\t\t\t\tposition, clueText, isGood, customList !\u003d null ? customList.getName() : \"null\");\n\t\t}\n\t}\n\t\n\tpublic DroppedClueInfo getDroppedClueInfo(WorldPoint position)\n\t{\n\t\tif (position \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\treturn droppedClues.get(position);\n\t}\n\t\n\tpublic void clearDroppedClue(WorldPoint position)\n\t{\n\t\tif (position !\u003d null)\n\t\t{\n\t\t\tdroppedClues.remove(position);\n\t\t}\n\t}\n\t\n\tpublic Map\u003cWorldPoint, DroppedClueInfo\u003e getDroppedClues()\n\t{\n\t\treturn droppedClues;\n\t}\n\t\n\tpublic void clearAllDroppedClues()\n\t{\n\t\tdroppedClues.clear();\n\t}\n\t\n\tpublic void clearClueStatusCache()\n\t{\n\t\tclueStatusCache.clear();\n\t}\n\t\n\tpublic Integer getCachedClueStatus(Object key)\n\t{\n\t\tObject value \u003d clueStatusCache.get(key);\n\t\tif (value instanceof Integer)\n\t\t{\n\t\t\treturn (Integer) value;\n\t\t}\n\t\treturn null;\n\t}\n\t\n\tpublic Object getCachedClueStatusObject(Object key)\n\t{\n\t\treturn clueStatusCache.get(key);\n\t}\n\t\n\tpublic void cacheClueStatus(Object key, Object status)\n\t{\n\t\tclueStatusCache.put(key, status);\n\t}\n\t\n\tpublic void clearClueStatusCacheEntry(Object key)\n\t{\n\t\tclueStatusCache.remove(key);\n\t}\n\t\n\tpublic void cacheItemIdToIdentifier(int itemId, String identifier)\n\t{\n\t\tif (itemId \u003e 0 \u0026\u0026 identifier !\u003d null \u0026\u0026 !identifier.isEmpty())\n\t\t{\n\t\t\titemIdToIdentifier.put(itemId, identifier);\n\t\t}\n\t}\n\t\n\tpublic String getIdentifierForItemId(int itemId)\n\t{\n\t\treturn itemIdToIdentifier.get(itemId);\n\t}\n\t\n}\n\n","filePath":"src\\main\\java\\com\\cluejuggler\\service\\ClueTrackingService.java"},{"fileName":"ClueJugglerPanel.java","content":"package com.cluejuggler.ui;\n\nimport com.cluejuggler.ClueJugglerPlugin;\nimport com.cluejuggler.model.ClueList;\nimport com.cluejuggler.service.ClueListService;\nimport com.cluejuggler.ui.panel.CurrentStepPanel;\nimport com.cluejuggler.ui.panel.HeaderPanel;\nimport com.cluejuggler.ui.panel.ListsSectionPanel;\nimport com.cluejuggler.ui.view.BadListView;\nimport com.cluejuggler.ui.view.CustomListView;\nimport com.cluejuggler.ui.view.GoodListView;\nimport com.cluejuggler.ui.view.SettingsView;\nimport java.awt.BorderLayout;\nimport java.awt.CardLayout;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.FlowLayout;\nimport java.io.File;\nimport javax.inject.Inject;\nimport javax.swing.Box;\nimport javax.swing.BoxLayout;\nimport javax.swing.JButton;\nimport javax.swing.JColorChooser;\nimport javax.swing.JFileChooser;\nimport javax.swing.JLabel;\nimport javax.swing.JOptionPane;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\nimport javax.swing.JTextField;\nimport javax.swing.border.EmptyBorder;\nimport javax.swing.border.LineBorder;\nimport javax.swing.filechooser.FileNameExtensionFilter;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.ui.PluginPanel;\n\npublic class ClueJugglerPanel extends PluginPanel\n{\n\tprivate static final String MAIN_VIEW \u003d \"MAIN\";\n\tprivate static final String SETTINGS_VIEW \u003d \"SETTINGS\";\n\tprivate static final String GOOD_LIST_VIEW \u003d \"GOOD_LIST\";\n\tprivate static final String BAD_LIST_VIEW \u003d \"BAD_LIST\";\n\tprivate static final String CUSTOM_LIST_VIEW \u003d \"CUSTOM_LIST\";\n\t\n\tprivate final CardLayout cardLayout \u003d new CardLayout();\n\tprivate final JPanel cardPanel \u003d new JPanel(cardLayout);\n\t\n\tprivate ClueJugglerPlugin plugin;\n\t\n\t@Inject\n\tprivate ConfigManager configManager;\n\t\n\tprivate HeaderPanel headerPanel;\n\tprivate CurrentStepPanel currentStepPanel;\n\tprivate ListsSectionPanel listsSectionPanel;\n\tprivate GoodListView goodListView;\n\tprivate BadListView badListView;\n\tprivate CustomListView customListView;\n\tprivate SettingsView settingsView;\n\t\n\tprivate boolean initialized \u003d false;\n\n\tpublic ClueJugglerPanel()\n\t{\n\t\tsuper();\n\t\tsetLayout(new BorderLayout());\n\t\tsetBorder(new EmptyBorder(5, 0, 5, 0));\n\t\tsetBackground(new Color(26, 26, 26));\n\t}\n\t\n\tpublic void setPlugin(ClueJugglerPlugin plugin)\n\t{\n\t\tthis.plugin \u003d plugin;\n\t\tinitializeUI();\n\t}\n\t\n\tprivate void initializeUI()\n\t{\n\t\tif (initialized || plugin \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tClueListService listService \u003d plugin.getListService();\n\t\t\n\t\tJPanel mainPanel \u003d new JPanel();\n\t\tmainPanel.setLayout(new BoxLayout(mainPanel, BoxLayout.Y_AXIS));\n\t\tmainPanel.setBackground(new Color(26, 26, 26));\n\t\t\n\t\theaderPanel \u003d new HeaderPanel();\n\t\theaderPanel.setAlignmentX(0.0f);\n\t\theaderPanel.setOnSettingsClick(() -\u003e {\n\t\t\tsettingsView.refresh();\n\t\t\tcardLayout.show(cardPanel, SETTINGS_VIEW);\n\t\t});\n\t\tmainPanel.add(headerPanel);\n\t\t\n\t\tcurrentStepPanel \u003d new CurrentStepPanel();\n\t\tcurrentStepPanel.setOnGoodClick((text, identifier) -\u003e addToGoodList(text, identifier));\n\t\tcurrentStepPanel.setOnBadClick((text, identifier) -\u003e addToBadList(text, identifier));\n\t\tmainPanel.add(currentStepPanel);\n\t\t\n\t\tlistsSectionPanel \u003d new ListsSectionPanel();\n\t\tlistsSectionPanel.setOnGoodListClick(() -\u003e {\n\t\t\tgoodListView.refresh();\n\t\t\tcardLayout.show(cardPanel, GOOD_LIST_VIEW);\n\t\t});\n\t\tlistsSectionPanel.setOnBadListClick(() -\u003e {\n\t\t\tbadListView.refresh();\n\t\t\tcardLayout.show(cardPanel, BAD_LIST_VIEW);\n\t\t});\n\t\tlistsSectionPanel.setOnAddListClick(this::showCreateListDialog);\n\t\tlistsSectionPanel.setOnCustomListClick(list -\u003e {\n\t\t\tcustomListView.setList(list);\n\t\t\tcardLayout.show(cardPanel, CUSTOM_LIST_VIEW);\n\t\t});\n\t\tlistsSectionPanel.setOnDeleteCustomList(list -\u003e {\n\t\t\tint result \u003d javax.swing.JOptionPane.showConfirmDialog(\n\t\t\t\t\t\tthis,\n\t\t\t\t\"Delete list \u0027\" + list.getName() + \"\u0027?\",\n\t\t\t\t\"Confirm Delete\",\n\t\t\t\tjavax.swing.JOptionPane.YES_NO_OPTION\n\t\t\t);\n\t\t\tif (result \u003d\u003d javax.swing.JOptionPane.YES_OPTION)\n\t\t\t{\n\t\t\t\tplugin.getListService().deleteCustomList(list);\n\t\t\t\tlistsSectionPanel.refreshCustomLists(plugin.getListService().getCustomLists());\n\t\t\t\trefreshCustomListButtons();\n\t\t\t}\n\t\t});\n\t\tmainPanel.add(listsSectionPanel);\n\t\t\n\t\tmainPanel.add(Box.createVerticalStrut(5));\n\t\t\n\t\tJPanel importExportPanel \u003d new JPanel(new FlowLayout(FlowLayout.LEFT, 5, 0));\n\t\timportExportPanel.setBackground(new Color(26, 26, 26));\n\t\timportExportPanel.setAlignmentX(0.0f);\n\t\timportExportPanel.setMaximumSize(new Dimension(Integer.MAX_VALUE, 35));\n\t\t\n\t\tJButton exportButton \u003d new JButton(\"Export\");\n\t\texportButton.setBackground(new Color(60, 60, 60));\n\t\texportButton.setForeground(Color.WHITE);\n\t\texportButton.setFocusPainted(false);\n\t\texportButton.addActionListener(e -\u003e exportLists());\n\t\timportExportPanel.add(exportButton);\n\t\t\n\t\tJButton importButton \u003d new JButton(\"Import\");\n\t\timportButton.setBackground(new Color(60, 60, 60));\n\t\timportButton.setForeground(Color.WHITE);\n\t\timportButton.setFocusPainted(false);\n\t\timportButton.addActionListener(e -\u003e importLists());\n\t\timportExportPanel.add(importButton);\n\t\t\n\t\tmainPanel.add(importExportPanel);\n\t\t\n\t\tJScrollPane mainScrollPane \u003d new JScrollPane(mainPanel);\n\t\tmainScrollPane.setBackground(new Color(26, 26, 26));\n\t\tmainScrollPane.getViewport().setBackground(new Color(26, 26, 26));\n\t\tmainScrollPane.setBorder(null);\n\t\tmainScrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);\n\t\t\n\t\tgoodListView \u003d new GoodListView(listService);\n\t\tgoodListView.setOnBackClick(() -\u003e cardLayout.show(cardPanel, MAIN_VIEW));\n\t\t\n\t\tbadListView \u003d new BadListView(listService);\n\t\tbadListView.setOnBackClick(() -\u003e cardLayout.show(cardPanel, MAIN_VIEW));\n\t\t\n\t\tcustomListView \u003d new CustomListView(listService);\n\t\tcustomListView.setOnBackClick(() -\u003e {\n\t\t\tlistsSectionPanel.refreshCustomLists(listService.getCustomLists());\n\t\t\tcardLayout.show(cardPanel, MAIN_VIEW);\n\t\t});\n\t\t\n\t\tsettingsView \u003d new SettingsView(listService, configManager);\n\t\tsettingsView.setOnBackClick(() -\u003e cardLayout.show(cardPanel, MAIN_VIEW));\n\t\t\n\t\tcardPanel.add(mainScrollPane, MAIN_VIEW);\n\t\tcardPanel.add(goodListView, GOOD_LIST_VIEW);\n\t\tcardPanel.add(badListView, BAD_LIST_VIEW);\n\t\tcardPanel.add(customListView, CUSTOM_LIST_VIEW);\n\t\tcardPanel.add(settingsView, SETTINGS_VIEW);\n\t\tcardPanel.setBackground(new Color(26, 26, 26));\n\t\t\n\t\tadd(cardPanel, BorderLayout.CENTER);\n\t\t\n\t\tlistService.ensureListsLoaded();\n\t\tlistsSectionPanel.refreshCustomLists(listService.getCustomLists());\n\t\trefreshCustomListButtons();\n\t\t\n\t\tinitialized \u003d true;\n\t}\n\t\n\tprivate void addToGoodList(String text, String identifier)\n\t{\n\t\tif (text \u003d\u003d null || text.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tClueListService listService \u003d plugin.getListService();\n\t\tif (identifier \u003d\u003d null || identifier.isEmpty())\n\t\t{\n\t\t\tidentifier \u003d \"text:\" + text.hashCode();\n\t\t}\n\t\t\n\t\tlistService.addGoodClue(identifier, text);\n\t\tplugin.getTrackingService().clearClueStatusCacheEntry(identifier);\n\t\tplugin.getTrackingService().clearClueStatusCache();\n\t\tupdateButtonStates(text);\n\t}\n\t\n\tprivate void addToBadList(String text, String identifier)\n\t{\n\t\tif (text \u003d\u003d null || text.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tClueListService listService \u003d plugin.getListService();\n\t\t\tif (identifier \u003d\u003d null || identifier.isEmpty())\n\t\t\t{\n\t\t\t\tidentifier \u003d \"text:\" + text.hashCode();\n\t\t\t}\n\t\t\t\n\t\tlistService.addBadClue(identifier, text);\n\t\tplugin.getTrackingService().clearClueStatusCacheEntry(identifier);\n\t\tplugin.getTrackingService().clearClueStatusCache();\n\t\tupdateButtonStates(text);\n\t}\n\t\n\tprivate void updateButtonStates(String text)\n\t{\n\t\tif (text \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tClueListService listService \u003d plugin.getListService();\n\t\tboolean isGood \u003d listService.isGoodClue(text);\n\t\tboolean isBad \u003d listService.isBadClue(text);\n\t\tClueList customList \u003d listService.getCustomListForClueByText(text);\n\t\t\n\t\tcurrentStepPanel.updateButtonStates(isGood, isBad, customList);\n\t}\n\t\n\tprivate void refreshCustomListButtons()\n\t{\n\t\tif (currentStepPanel !\u003d null \u0026\u0026 plugin !\u003d null)\n\t\t{\n\t\t\tClueListService listService \u003d plugin.getListService();\n\t\t\tcurrentStepPanel.refreshCustomListButtons(listService.getCustomLists(), (list, identifier) -\u003e {\n\t\t\t\tString text \u003d currentStepPanel.getCurrentClueText();\n\t\tif (text !\u003d null \u0026\u0026 !text.isEmpty())\n\t\t{\n\t\t\tif (identifier \u003d\u003d null || identifier.isEmpty())\n\t\t\t{\n\t\t\t\tidentifier \u003d \"text:\" + text.hashCode();\n\t\t\t}\n\t\t\t\t\tlistService.addToCustomList(list, identifier, text);\n\t\t\t\t\tplugin.getTrackingService().clearClueStatusCacheEntry(identifier);\n\t\t\t\t\tplugin.getTrackingService().clearClueStatusCache();\n\t\t\tupdateButtonStates(text);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate void showCreateListDialog()\n\t{\n\t\tJPanel dialogPanel \u003d new JPanel();\n\t\tdialogPanel.setLayout(new BoxLayout(dialogPanel, BoxLayout.Y_AXIS));\n\t\tdialogPanel.setBorder(new EmptyBorder(10, 10, 10, 10));\n\t\tdialogPanel.setBackground(new Color(26, 26, 26));\n\n\t\tJLabel nameLabel \u003d new JLabel(\"List Name:\");\n\t\tnameLabel.setForeground(Color.WHITE);\n\t\tdialogPanel.add(nameLabel);\n\n\t\tJTextField nameField \u003d new JTextField(20);\n\t\tnameField.setBackground(new Color(20, 20, 20));\n\t\tnameField.setForeground(Color.WHITE);\n\t\tnameField.setBorder(new EmptyBorder(5, 5, 5, 5));\n\t\tdialogPanel.add(nameField);\n\t\tdialogPanel.add(Box.createVerticalStrut(10));\n\n\t\tJLabel textColorLabel \u003d new JLabel(\"Text Color:\");\n\t\ttextColorLabel.setForeground(Color.WHITE);\n\t\tdialogPanel.add(textColorLabel);\n\n\t\tfinal Color[] selectedTextColor \u003d {Color.WHITE};\n\t\tjavax.swing.JButton textColorButton \u003d new javax.swing.JButton();\n\t\ttextColorButton.setPreferredSize(new Dimension(60, 30));\n\t\ttextColorButton.setMaximumSize(new Dimension(60, 30));\n\t\ttextColorButton.setBackground(selectedTextColor[0]);\n\t\ttextColorButton.setBorder(new LineBorder(Color.WHITE, 1));\n\t\ttextColorButton.setFocusPainted(false);\n\t\ttextColorButton.addActionListener(e -\u003e {\n\t\t\tColor newColor \u003d JColorChooser.showDialog(dialogPanel, \"Choose Text Color\", selectedTextColor[0]);\n\t\t\tif (newColor !\u003d null)\n\t\t\t{\n\t\t\t\ttextColorButton.setBackground(newColor);\n\t\t\t\tselectedTextColor[0] \u003d newColor;\n\t\t\t}\n\t\t});\n\t\tdialogPanel.add(textColorButton);\n\t\tdialogPanel.add(Box.createVerticalStrut(10));\n\n\t\tJLabel tileColorLabel \u003d new JLabel(\"Tile Color:\");\n\t\ttileColorLabel.setForeground(Color.WHITE);\n\t\tdialogPanel.add(tileColorLabel);\n\n\t\tfinal Color[] selectedTileColor \u003d {new Color(255, 255, 255, 100)};\n\t\tjavax.swing.JButton tileColorButton \u003d new javax.swing.JButton();\n\t\ttileColorButton.setPreferredSize(new Dimension(60, 30));\n\t\ttileColorButton.setMaximumSize(new Dimension(60, 30));\n\t\ttileColorButton.setBackground(selectedTileColor[0]);\n\t\ttileColorButton.setBorder(new LineBorder(Color.WHITE, 1));\n\t\ttileColorButton.setFocusPainted(false);\n\t\ttileColorButton.addActionListener(e -\u003e {\n\t\t\tColor newColor \u003d JColorChooser.showDialog(dialogPanel, \"Choose Tile Color\", selectedTileColor[0]);\n\t\t\tif (newColor !\u003d null)\n\t\t\t{\n\t\t\t\tint alpha \u003d selectedTileColor[0].getAlpha();\n\t\t\t\tif (alpha \u003d\u003d 255)\n\t\t\t\t{\n\t\t\t\t\talpha \u003d 100;\n\t\t\t\t}\n\t\t\t\tColor colorWithAlpha \u003d new Color(newColor.getRed(), newColor.getGreen(), newColor.getBlue(), alpha);\n\t\t\t\ttileColorButton.setBackground(colorWithAlpha);\n\t\t\t\tselectedTileColor[0] \u003d colorWithAlpha;\n\t\t\t}\n\t\t});\n\t\tdialogPanel.add(tileColorButton);\n\n\t\tint result \u003d JOptionPane.showConfirmDialog(\n\t\t\tthis,\n\t\t\tdialogPanel,\n\t\t\t\"Create New List\",\n\t\t\tJOptionPane.OK_CANCEL_OPTION,\n\t\t\tJOptionPane.PLAIN_MESSAGE\n\t\t);\n\n\t\tif (result \u003d\u003d JOptionPane.OK_OPTION)\n\t\t{\n\t\t\tString listName \u003d nameField.getText().trim();\n\t\t\tif (listName.isEmpty())\n\t\t\t{\n\t\t\t\tJOptionPane.showMessageDialog(this, \"List name cannot be empty!\", \"Error\", JOptionPane.ERROR_MESSAGE);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tClueListService listService \u003d plugin.getListService();\n\t\t\tif (listService.findCustomListByName(listName) !\u003d null)\n\t\t\t{\n\t\t\t\tJOptionPane.showMessageDialog(this, \"A list with that name already exists!\", \"Error\", JOptionPane.ERROR_MESSAGE);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlistService.createCustomList(listName, selectedTextColor[0], selectedTileColor[0], selectedTextColor[0]);\n\t\t\tlistsSectionPanel.refreshCustomLists(listService.getCustomLists());\n\t\t\trefreshCustomListButtons();\n\t\t}\n\t}\n\n\tprivate void exportLists()\n\t{\n\t\tif (plugin \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tJFileChooser fileChooser \u003d new JFileChooser();\n\t\tfileChooser.setDialogTitle(\"Export All Lists\");\n\t\tfileChooser.setFileFilter(new FileNameExtensionFilter(\"JSON Files\", \"json\"));\n\t\tfileChooser.setSelectedFile(new File(\"cluejuggler-lists.json\"));\n\t\t\n\t\tif (fileChooser.showSaveDialog(this) \u003d\u003d JFileChooser.APPROVE_OPTION)\n\t\t{\n\t\t\tFile file \u003d fileChooser.getSelectedFile();\n\t\t\tif (!file.getName().endsWith(\".json\"))\n\t\t\t{\n\t\t\t\tfile \u003d new File(file.getAbsolutePath() + \".json\");\n\t\t\t}\n\t\t\tplugin.getListService().exportToFile(file);\n\t\t\tJOptionPane.showMessageDialog(this, \"Export successful!\", \"Success\", JOptionPane.INFORMATION_MESSAGE);\n\t\t}\n\t}\n\t\n\tprivate void importLists()\n\t{\n\t\tif (plugin \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tJFileChooser fileChooser \u003d new JFileChooser();\n\t\tfileChooser.setDialogTitle(\"Import Lists\");\n\t\tfileChooser.setFileFilter(new FileNameExtensionFilter(\"JSON Files\", \"json\"));\n\t\t\n\t\tif (fileChooser.showOpenDialog(this) \u003d\u003d JFileChooser.APPROVE_OPTION)\n\t\t{\n\t\t\tFile file \u003d fileChooser.getSelectedFile();\n\t\t\tplugin.getListService().importFromFile(file);\n\t\t\tlistsSectionPanel.refreshCustomLists(plugin.getListService().getCustomLists());\n\t\t\trefreshCustomListButtons();\n\t\t\tJOptionPane.showMessageDialog(this, \"Import successful!\", \"Success\", JOptionPane.INFORMATION_MESSAGE);\n\t\t}\n\t}\n\n\tpublic void setCurrentStep(String difficulty, String clueText)\n\t{\n\t\tif (currentStepPanel !\u003d null)\n\t\t{\n\t\t\tcurrentStepPanel.setCurrentStep(difficulty, clueText);\n\t\t\t\n\t\t\tif (plugin !\u003d null)\n\t\t\t{\n\t\t\t\tnet.runelite.client.plugins.cluescrolls.clues.ClueScroll clue \u003d plugin.getClueScrollPlugin().getClue();\n\t\t\t\t\t\t\tif (clue !\u003d null)\n\t\t\t\t\t\t\t{\n\t\t\t\t\tString identifier \u003d plugin.getClueIdentifier(clue);\n\t\t\t\t\tcurrentStepPanel.setCurrentClueIdentifier(identifier);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tupdateButtonStates(clueText);\n\t\t}\n\t}\n\t\n\tpublic void setCurrentStep(String clueText)\n\t{\n\t\tsetCurrentStep(\"Unknown\", clueText);\n\t}\n\t\n\tpublic boolean isGoodClue(String clueText)\n\t{\n\t\treturn plugin !\u003d null \u0026\u0026 plugin.getListService().isGoodClue(clueText);\n\t}\n\t\n\tpublic boolean isBadClue(String clueText)\n\t{\n\t\treturn plugin !\u003d null \u0026\u0026 plugin.getListService().isBadClue(clueText);\n\t}\n\t\n\tpublic boolean isGoodClueByIdentifier(String identifier)\n\t{\n\t\treturn plugin !\u003d null \u0026\u0026 plugin.getListService().isGoodClueByIdentifier(identifier);\n\t}\n\t\n\tpublic boolean isBadClueByIdentifier(String identifier)\n\t{\n\t\treturn plugin !\u003d null \u0026\u0026 plugin.getListService().isBadClueByIdentifier(identifier);\n\t}\n\t\n\tpublic ClueList getCustomListForClue(String identifier)\n\t{\n\t\treturn plugin !\u003d null ? plugin.getListService().getCustomListForClue(identifier) : null;\n\t}\n\t\n\tpublic ClueList getCustomListForClueByText(String clueText)\n\t{\n\t\treturn plugin !\u003d null ? plugin.getListService().getCustomListForClueByText(clueText) : null;\n\t}\n\t\n\tpublic boolean hasAnyCluesInLists()\n\t{\n\t\treturn plugin !\u003d null \u0026\u0026 plugin.getListService().hasAnyCluesInLists();\n\t}\n\t\n\tpublic void ensureListsLoaded()\n\t{\n\t\tif (plugin !\u003d null)\n\t\t{\n\t\t\tplugin.getListService().ensureListsLoaded();\n\t\t}\n\t}\n\t\n\tpublic void ensureCustomListsLoaded()\n\t{\n\t\t\tif (plugin !\u003d null)\n\t\t\t{\n\t\t\tplugin.getListService().loadCustomLists();\n\t\t}\n\t}\n}\n\n","filePath":"src\\main\\java\\com\\cluejuggler\\ui\\ClueJugglerPanel.java"},{"fileName":"ClueTableComponent.java","content":"package com.cluejuggler.ui.component;\n\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.util.function.BiConsumer;\nimport javax.swing.JMenuItem;\nimport javax.swing.JPanel;\nimport javax.swing.JPopupMenu;\nimport javax.swing.JScrollPane;\nimport javax.swing.JTable;\nimport javax.swing.table.DefaultTableModel;\nimport javax.swing.table.TableColumn;\n\npublic class ClueTableComponent extends JPanel\n{\n\tprivate final JTable table;\n\tprivate final DefaultTableModel model;\n\tprivate BiConsumer\u003cString, String\u003e onDeleteClue;\n\tprivate BiConsumer\u003cString, String\u003e onMoveClue;\n\t\n\tpublic ClueTableComponent()\n\t{\n\t\tsetLayout(new BorderLayout());\n\t\tsetBackground(new Color(26, 26, 26));\n\t\t\n\t\tmodel \u003d new DefaultTableModel(new String[]{\"Clue\", \"Identifier\"}, 0);\n\t\ttable \u003d new JTable(model);\n\t\ttable.setBackground(new Color(20, 20, 20));\n\t\ttable.setForeground(Color.WHITE);\n\t\ttable.setGridColor(new Color(40, 40, 40));\n\t\ttable.getTableHeader().setBackground(new Color(30, 30, 30));\n\t\ttable.getTableHeader().setForeground(Color.WHITE);\n\t\ttable.setRowHeight(25);\n\t\t\n\t\tTableColumn identifierColumn \u003d table.getColumnModel().getColumn(1);\n\t\tidentifierColumn.setPreferredWidth(0);\n\t\tidentifierColumn.setMinWidth(0);\n\t\tidentifierColumn.setMaxWidth(0);\n\t\tidentifierColumn.setWidth(0);\n\t\t\n\t\tsetupContextMenu();\n\t\t\n\t\tJScrollPane scrollPane \u003d new JScrollPane(table);\n\t\tscrollPane.setBackground(new Color(26, 26, 26));\n\t\tscrollPane.getViewport().setBackground(new Color(20, 20, 20));\n\t\tadd(scrollPane, BorderLayout.CENTER);\n\t}\n\t\n\tprivate void setupContextMenu()\n\t{\n\t\tJPopupMenu contextMenu \u003d new JPopupMenu();\n\t\t\n\t\tJMenuItem deleteItem \u003d new JMenuItem(\"Delete\");\n\t\tdeleteItem.addActionListener(e -\u003e {\n\t\t\tint selectedRow \u003d table.getSelectedRow();\n\t\t\tif (selectedRow \u003e\u003d 0)\n\t\t\t{\n\t\t\t\tString text \u003d (String) model.getValueAt(selectedRow, 0);\n\t\t\t\tString identifier \u003d (String) model.getValueAt(selectedRow, 1);\n\t\t\t\tif (onDeleteClue !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tonDeleteClue.accept(text, identifier);\n\t\t\t\t}\n\t\t\t\tmodel.removeRow(selectedRow);\n\t\t\t}\n\t\t});\n\t\tcontextMenu.add(deleteItem);\n\t\t\n\t\ttable.addMouseListener(new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mousePressed(MouseEvent e)\n\t\t\t{\n\t\t\t\tif (e.isPopupTrigger())\n\t\t\t\t{\n\t\t\t\t\tshowPopup(e);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t@Override\n\t\t\tpublic void mouseReleased(MouseEvent e)\n\t\t\t{\n\t\t\t\tif (e.isPopupTrigger())\n\t\t\t\t{\n\t\t\t\t\tshowPopup(e);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tprivate void showPopup(MouseEvent e)\n\t\t\t{\n\t\t\t\tint row \u003d table.rowAtPoint(e.getPoint());\n\t\t\t\tif (row \u003e\u003d 0 \u0026\u0026 row \u003c table.getRowCount())\n\t\t\t\t{\n\t\t\t\t\ttable.setRowSelectionInterval(row, row);\n\t\t\t\t\tcontextMenu.show(e.getComponent(), e.getX(), e.getY());\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\t\n\tpublic void addRow(String text, String identifier)\n\t{\n\t\tmodel.addRow(new Object[]{text, identifier});\n\t}\n\t\n\tpublic void removeRow(int index)\n\t{\n\t\tif (index \u003e\u003d 0 \u0026\u0026 index \u003c model.getRowCount())\n\t\t{\n\t\t\tmodel.removeRow(index);\n\t\t}\n\t}\n\t\n\tpublic void clear()\n\t{\n\t\tmodel.setRowCount(0);\n\t}\n\t\n\tpublic int getRowCount()\n\t{\n\t\treturn model.getRowCount();\n\t}\n\t\n\tpublic String getTextAt(int row)\n\t{\n\t\treturn (String) model.getValueAt(row, 0);\n\t}\n\t\n\tpublic String getIdentifierAt(int row)\n\t{\n\t\treturn (String) model.getValueAt(row, 1);\n\t}\n\t\n\tpublic DefaultTableModel getModel()\n\t{\n\t\treturn model;\n\t}\n\t\n\tpublic JTable getTable()\n\t{\n\t\treturn table;\n\t}\n\t\n\tpublic void setOnDeleteClue(BiConsumer\u003cString, String\u003e onDeleteClue)\n\t{\n\t\tthis.onDeleteClue \u003d onDeleteClue;\n\t}\n\t\n\tpublic void setOnMoveClue(BiConsumer\u003cString, String\u003e onMoveClue)\n\t{\n\t\tthis.onMoveClue \u003d onMoveClue;\n\t}\n}\n\n","filePath":"src\\main\\java\\com\\cluejuggler\\ui\\component\\ClueTableComponent.java"},{"fileName":"ColorPickerRow.java","content":"package com.cluejuggler.ui.component;\n\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.FlowLayout;\nimport java.util.function.Consumer;\nimport javax.swing.JButton;\nimport javax.swing.JColorChooser;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\nimport javax.swing.border.LineBorder;\n\npublic class ColorPickerRow extends JPanel\n{\n\tprivate final JButton colorButton;\n\tprivate Color currentColor;\n\tprivate final Consumer\u003cColor\u003e onColorChange;\n\t\n\tpublic ColorPickerRow(String name, String description, Color initialColor, Consumer\u003cColor\u003e onColorChange)\n\t{\n\t\tthis.currentColor \u003d initialColor;\n\t\tthis.onColorChange \u003d onColorChange;\n\t\t\n\t\tsetLayout(new FlowLayout(FlowLayout.LEFT, 0, 0));\n\t\tsetBackground(new Color(26, 26, 26));\n\t\tsetBorder(new EmptyBorder(5, 0, 5, 0));\n\t\tsetMaximumSize(new Dimension(Integer.MAX_VALUE, 40));\n\t\tsetAlignmentX(0.0f);\n\t\t\n\t\tJLabel nameLabel \u003d new JLabel(name + \": \");\n\t\tnameLabel.setForeground(Color.WHITE);\n\t\tnameLabel.setToolTipText(description);\n\t\tadd(nameLabel);\n\t\t\n\t\tcolorButton \u003d new JButton();\n\t\tcolorButton.setPreferredSize(new Dimension(30, 20));\n\t\tcolorButton.setBackground(initialColor);\n\t\tcolorButton.setBorder(new LineBorder(Color.WHITE, 1));\n\t\tcolorButton.setFocusPainted(false);\n\t\tcolorButton.addActionListener(e -\u003e showColorChooser());\n\t\tadd(colorButton);\n\t}\n\t\n\tprivate void showColorChooser()\n\t{\n\t\tColor newColor \u003d JColorChooser.showDialog(this, \"Choose Color\", currentColor);\n\t\tif (newColor !\u003d null)\n\t\t{\n\t\t\tif (currentColor.getAlpha() !\u003d 255)\n\t\t\t{\n\t\t\t\tnewColor \u003d new Color(newColor.getRed(), newColor.getGreen(), newColor.getBlue(), currentColor.getAlpha());\n\t\t\t}\n\t\t\tcurrentColor \u003d newColor;\n\t\t\tcolorButton.setBackground(currentColor);\n\t\t\tif (onColorChange !\u003d null)\n\t\t\t{\n\t\t\t\tonColorChange.accept(currentColor);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tpublic Color getCurrentColor()\n\t{\n\t\treturn currentColor;\n\t}\n\t\n\tpublic void setCurrentColor(Color color)\n\t{\n\t\tthis.currentColor \u003d color;\n\t\tcolorButton.setBackground(color);\n\t}\n}\n\n","filePath":"src\\main\\java\\com\\cluejuggler\\ui\\component\\ColorPickerRow.java"},{"fileName":"ListCardComponent.java","content":"package com.cluejuggler.ui.component;\n\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Cursor;\nimport java.awt.Dimension;\nimport java.awt.FlowLayout;\nimport java.awt.Font;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.awt.image.BufferedImage;\nimport javax.swing.ImageIcon;\nimport javax.swing.JButton;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\nimport net.runelite.client.util.ImageUtil;\n\npublic class ListCardComponent extends JPanel\n{\n\tprivate final JLabel titleLabel;\n\tprivate Runnable onClick;\n\tprivate Runnable onDelete;\n\tprivate boolean isCustomList;\n\t\n\tpublic ListCardComponent(String title, Color titleColor, boolean isCustomList)\n\t{\n\t\tthis.isCustomList \u003d isCustomList;\n\t\tsetLayout(new BorderLayout());\n\t\tsetBorder(new EmptyBorder(8, 8, 8, 8));\n\t\tsetBackground(new Color(40, 40, 40));\n\t\tsetCursor(new Cursor(Cursor.HAND_CURSOR));\n\t\tsetMaximumSize(new Dimension(Integer.MAX_VALUE, 40));\n\t\tsetPreferredSize(new Dimension(190, 40));\n\t\t\n\t\ttitleLabel \u003d new JLabel(title);\n\t\ttitleLabel.setForeground(titleColor);\n\t\ttitleLabel.setFont(new Font(titleLabel.getFont().getName(), Font.BOLD, 13));\n\t\tadd(titleLabel, BorderLayout.WEST);\n\t\t\n\t\tJPanel rightPanel \u003d new JPanel(new FlowLayout(FlowLayout.RIGHT, 5, 0));\n\t\trightPanel.setOpaque(false);\n\t\t\n\t\tif (isCustomList)\n\t\t{\n\t\t\tJButton deleteButton \u003d new JButton();\n\t\t\ttry\n\t\t\t{\n\t\t\t\tBufferedImage deleteIcon \u003d ImageUtil.loadImageResource(getClass(), \"/delete.png\");\n\t\t\t\tif (deleteIcon !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tdeleteButton.setIcon(new ImageIcon(deleteIcon));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdeleteButton.setText(\"\");\n\t\t\t\t\tdeleteButton.setFont(new Font(deleteButton.getFont().getName(), Font.BOLD, 10));\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (Exception ex)\n\t\t\t{\n\t\t\t\tdeleteButton.setText(\"\");\n\t\t\t\tdeleteButton.setFont(new Font(deleteButton.getFont().getName(), Font.BOLD, 10));\n\t\t\t}\n\t\t\tdeleteButton.setForeground(new Color(180, 80, 80));\n\t\t\tdeleteButton.setBackground(new Color(60, 60, 60));\n\t\t\tdeleteButton.setBorderPainted(false);\n\t\t\tdeleteButton.setFocusPainted(false);\n\t\t\tdeleteButton.setContentAreaFilled(false);\n\t\t\tdeleteButton.setCursor(new Cursor(Cursor.HAND_CURSOR));\n\t\t\tdeleteButton.addActionListener(e -\u003e {\n\t\t\t\tif (onDelete !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tonDelete.run();\n\t\t\t\t}\n\t\t\t});\n\t\t\trightPanel.add(deleteButton);\n\t\t}\n\t\t\n\t\tJLabel arrow \u003d new JLabel();\n\t\ttry\n\t\t{\n\t\t\tBufferedImage arrowIcon \u003d ImageUtil.loadImageResource(getClass(), \"/open_arrow.png\");\n\t\t\tif (arrowIcon !\u003d null)\n\t\t\t{\n\t\t\t\tarrow.setIcon(new ImageIcon(arrowIcon));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tarrow.setText(\"\");\n\t\t\t\tarrow.setForeground(new Color(120, 120, 120));\n\t\t\t}\n\t\t}\n\t\tcatch (Exception ex)\n\t\t{\n\t\t\tarrow.setText(\"\");\n\t\t\tarrow.setForeground(new Color(120, 120, 120));\n\t\t}\n\t\trightPanel.add(arrow);\n\t\t\n\t\tadd(rightPanel, BorderLayout.EAST);\n\t\t\n\t\taddMouseListener(new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mouseClicked(MouseEvent e)\n\t\t\t{\n\t\t\t\tif (onClick !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tonClick.run();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t@Override\n\t\t\tpublic void mouseEntered(MouseEvent e)\n\t\t\t{\n\t\t\t\tsetBackground(new Color(50, 50, 50));\n\t\t\t}\n\t\t\t\n\t\t\t@Override\n\t\t\tpublic void mouseExited(MouseEvent e)\n\t\t\t{\n\t\t\t\tsetBackground(new Color(40, 40, 40));\n\t\t\t}\n\t\t});\n\t}\n\t\n\tpublic void setOnClick(Runnable onClick)\n\t{\n\t\tthis.onClick \u003d onClick;\n\t}\n\t\n\tpublic void setOnDelete(Runnable onDelete)\n\t{\n\t\tthis.onDelete \u003d onDelete;\n\t}\n\t\n\tpublic void setTitle(String title)\n\t{\n\t\ttitleLabel.setText(title);\n\t}\n\t\n\tpublic void setTitleColor(Color color)\n\t{\n\t\ttitleLabel.setForeground(color);\n\t}\n\t\n\tpublic String getTitle()\n\t{\n\t\treturn titleLabel.getText();\n\t}\n\t\n\tpublic boolean isCustomList()\n\t{\n\t\treturn isCustomList;\n\t}\n}\n\n","filePath":"src\\main\\java\\com\\cluejuggler\\ui\\component\\ListCardComponent.java"},{"fileName":"CurrentStepPanel.java","content":"package com.cluejuggler.ui.panel;\n\nimport com.cluejuggler.model.ClueList;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.FlowLayout;\nimport java.awt.Font;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.function.BiConsumer;\nimport javax.swing.BoxLayout;\nimport javax.swing.JButton;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.JTextArea;\nimport javax.swing.border.EmptyBorder;\n\npublic class CurrentStepPanel extends JPanel\n{\n\tprivate final JLabel clueTypeLabel;\n\tprivate final JTextArea currentStepArea;\n\tprivate final JButton goodButton;\n\tprivate final JButton badButton;\n\tprivate final JPanel buttonPanel;\n\tprivate final Map\u003cString, JButton\u003e customListButtons \u003d new HashMap\u003c\u003e();\n\t\n\tprivate String currentClueText;\n\tprivate String currentClueIdentifier;\n\tprivate BiConsumer\u003cString, String\u003e onGoodClick;\n\tprivate BiConsumer\u003cString, String\u003e onBadClick;\n\t\n\tpublic CurrentStepPanel()\n\t{\n\t\tsetLayout(new BoxLayout(this, BoxLayout.Y_AXIS));\n\t\tsetBackground(new Color(26, 26, 26));\n\t\tsetBorder(new EmptyBorder(0, 0, 5, 0));\n\t\tsetAlignmentX(0.0f);\n\t\t\n\t\tJLabel headerLabel \u003d new JLabel(\"Current Step\");\n\t\theaderLabel.setForeground(Color.WHITE);\n\t\theaderLabel.setFont(new Font(headerLabel.getFont().getName(), Font.BOLD, 14));\n\t\theaderLabel.setBorder(new EmptyBorder(0, 0, 8, 0));\n\t\theaderLabel.setAlignmentX(0.0f);\n\t\tadd(headerLabel);\n\t\t\n\t\tclueTypeLabel \u003d new JLabel(\"Clue Type: Unknown\");\n\t\tclueTypeLabel.setForeground(new Color(180, 180, 180));\n\t\tclueTypeLabel.setFont(new Font(clueTypeLabel.getFont().getName(), Font.PLAIN, 12));\n\t\tclueTypeLabel.setBorder(new EmptyBorder(0, 0, 5, 0));\n\t\tclueTypeLabel.setAlignmentX(0.0f);\n\t\tadd(clueTypeLabel);\n\t\t\n\t\tcurrentStepArea \u003d new JTextArea(4, 20);\n\t\tcurrentStepArea.setEditable(false);\n\t\tcurrentStepArea.setLineWrap(true);\n\t\tcurrentStepArea.setWrapStyleWord(true);\n\t\tcurrentStepArea.setBackground(new Color(20, 20, 20));\n\t\tcurrentStepArea.setForeground(Color.WHITE);\n\t\tcurrentStepArea.setBorder(new EmptyBorder(8, 8, 8, 8));\n\t\tcurrentStepArea.setText(\"Read a clue scroll to see the current step here.\");\n\t\tcurrentStepArea.setAlignmentX(0.0f);\n\t\tcurrentStepArea.setMaximumSize(new Dimension(Integer.MAX_VALUE, 100));\n\t\tadd(currentStepArea);\n\t\t\n\t\tbuttonPanel \u003d new JPanel(new FlowLayout(FlowLayout.LEFT, 3, 3));\n\t\tbuttonPanel.setBackground(new Color(26, 26, 26));\n\t\tbuttonPanel.setAlignmentX(0.0f);\n\t\tbuttonPanel.setMaximumSize(new Dimension(Integer.MAX_VALUE, 60));\n\t\t\n\t\tgoodButton \u003d new JButton(\"Good\");\n\t\tgoodButton.setBackground(new Color(0, 100, 0));\n\t\tgoodButton.setForeground(Color.WHITE);\n\t\tgoodButton.setFocusPainted(false);\n\t\tgoodButton.setPreferredSize(new Dimension(60, 24));\n\t\tgoodButton.addActionListener(e -\u003e {\n\t\t\tif (onGoodClick !\u003d null \u0026\u0026 currentClueText !\u003d null)\n\t\t\t{\n\t\t\t\tonGoodClick.accept(currentClueText, currentClueIdentifier);\n\t\t\t}\n\t\t});\n\t\tbuttonPanel.add(goodButton);\n\t\t\n\t\tbadButton \u003d new JButton(\"Bad\");\n\t\tbadButton.setBackground(new Color(100, 0, 0));\n\t\tbadButton.setForeground(Color.WHITE);\n\t\tbadButton.setFocusPainted(false);\n\t\tbadButton.setPreferredSize(new Dimension(60, 24));\n\t\tbadButton.addActionListener(e -\u003e {\n\t\t\tif (onBadClick !\u003d null \u0026\u0026 currentClueText !\u003d null)\n\t\t\t{\n\t\t\t\tonBadClick.accept(currentClueText, currentClueIdentifier);\n\t\t\t}\n\t\t});\n\t\tbuttonPanel.add(badButton);\n\t\t\n\t\tadd(buttonPanel);\n\t}\n\t\n\tpublic void setCurrentStep(String difficulty, String clueText)\n\t{\n\t\tthis.currentClueText \u003d clueText;\n\t\tclueTypeLabel.setText(\"Clue Type: \" + difficulty);\n\t\tcurrentStepArea.setText(clueText);\n\t}\n\t\n\tpublic void setCurrentClueIdentifier(String identifier)\n\t{\n\t\tthis.currentClueIdentifier \u003d identifier;\n\t}\n\t\n\tpublic void setOnGoodClick(BiConsumer\u003cString, String\u003e onGoodClick)\n\t{\n\t\tthis.onGoodClick \u003d onGoodClick;\n\t}\n\t\n\tpublic void setOnBadClick(BiConsumer\u003cString, String\u003e onBadClick)\n\t{\n\t\tthis.onBadClick \u003d onBadClick;\n\t}\n\t\n\tpublic void updateButtonStates(boolean isGood, boolean isBad, ClueList customList)\n\t{\n\t\tif (isGood)\n\t\t{\n\t\t\tgoodButton.setBackground(new Color(0, 150, 0));\n\t\t\tbadButton.setBackground(new Color(100, 0, 0));\n\t\t}\n\t\telse if (isBad)\n\t\t{\n\t\t\tgoodButton.setBackground(new Color(0, 100, 0));\n\t\t\tbadButton.setBackground(new Color(150, 0, 0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tgoodButton.setBackground(new Color(0, 100, 0));\n\t\t\tbadButton.setBackground(new Color(100, 0, 0));\n\t\t}\n\t\t\n\t\tfor (Map.Entry\u003cString, JButton\u003e entry : customListButtons.entrySet())\n\t\t{\n\t\t\tJButton button \u003d entry.getValue();\n\t\t\tif (customList !\u003d null \u0026\u0026 customList.getName().equals(entry.getKey()))\n\t\t\t{\n\t\t\t\tbutton.setBackground(customList.getTextColor().brighter());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tbutton.setBackground(new Color(60, 60, 60));\n\t\t\t}\n\t\t}\n\t}\n\t\n\tpublic void refreshCustomListButtons(java.util.List\u003cClueList\u003e customLists, java.util.function.BiConsumer\u003cClueList, String\u003e onCustomListClick)\n\t{\n\t\tfor (JButton button : customListButtons.values())\n\t\t{\n\t\t\tbuttonPanel.remove(button);\n\t\t}\n\t\tcustomListButtons.clear();\n\t\t\n\t\tfor (ClueList list : customLists)\n\t\t{\n\t\t\tJButton listButton \u003d new JButton(list.getName());\n\t\t\tlistButton.setBackground(new Color(60, 60, 60));\n\t\t\tlistButton.setForeground(list.getTextColor());\n\t\t\tlistButton.setFocusPainted(false);\n\t\t\tlistButton.setPreferredSize(new Dimension(60, 24));\n\t\t\tlistButton.addActionListener(e -\u003e {\n\t\t\t\tif (onCustomListClick !\u003d null \u0026\u0026 currentClueText !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tonCustomListClick.accept(list, currentClueIdentifier);\n\t\t\t\t}\n\t\t\t});\n\t\t\tcustomListButtons.put(list.getName(), listButton);\n\t\t\tbuttonPanel.add(listButton);\n\t\t}\n\t\t\n\t\tbuttonPanel.revalidate();\n\t\tbuttonPanel.repaint();\n\t}\n\t\n\tpublic String getCurrentClueText()\n\t{\n\t\treturn currentClueText;\n\t}\n\t\n\tpublic String getCurrentClueIdentifier()\n\t{\n\t\treturn currentClueIdentifier;\n\t}\n}\n\n","filePath":"src\\main\\java\\com\\cluejuggler\\ui\\panel\\CurrentStepPanel.java"},{"fileName":"HeaderPanel.java","content":"package com.cluejuggler.ui.panel;\n\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Font;\nimport java.awt.image.BufferedImage;\nimport javax.swing.ImageIcon;\nimport javax.swing.JButton;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\nimport net.runelite.client.util.ImageUtil;\n\npublic class HeaderPanel extends JPanel\n{\n\tprivate final JLabel headerLabel;\n\tprivate final JButton settingsButton;\n\tprivate Runnable onSettingsClick;\n\t\n\tpublic HeaderPanel()\n\t{\n\t\tsetLayout(new BorderLayout());\n\t\tsetBorder(new EmptyBorder(0, 0, 8, 0));\n\t\tsetBackground(new Color(26, 26, 26));\n\t\tsetMaximumSize(new Dimension(Integer.MAX_VALUE, 48));\n\t\tsetPreferredSize(new Dimension(190, 48));\n\t\t\n\t\tJPanel leftPanel \u003d new JPanel(new BorderLayout());\n\t\tleftPanel.setBackground(new Color(26, 26, 26));\n\t\t\n\t\ttry\n\t\t{\n\t\t\tBufferedImage iconImage \u003d ImageUtil.loadImageResource(getClass(), \"/cluejuggler.png\");\n\t\t\tif (iconImage !\u003d null)\n\t\t\t{\n\t\t\t\tImageIcon icon \u003d new ImageIcon(iconImage.getScaledInstance(32, 32, java.awt.Image.SCALE_SMOOTH));\n\t\t\t\tJLabel iconLabel \u003d new JLabel(icon);\n\t\t\t\ticonLabel.setBorder(new EmptyBorder(0, 0, 0, 10));\n\t\t\t\tleftPanel.add(iconLabel, BorderLayout.WEST);\n\t\t\t}\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t}\n\t\t\n\t\tJPanel titlePanel \u003d new JPanel(new BorderLayout());\n\t\ttitlePanel.setBackground(new Color(26, 26, 26));\n\t\t\n\t\theaderLabel \u003d new JLabel(\"Clue Juggler\");\n\t\theaderLabel.setFont(new Font(headerLabel.getFont().getName(), Font.BOLD, 18));\n\t\theaderLabel.setForeground(Color.WHITE);\n\t\ttitlePanel.add(headerLabel, BorderLayout.NORTH);\n\t\t\n\t\tJLabel creditLabel \u003d new JLabel(\"by: [RSN] Rocket Money\");\n\t\tcreditLabel.setFont(new Font(creditLabel.getFont().getName(), Font.PLAIN, 11));\n\t\tcreditLabel.setForeground(new Color(150, 150, 150));\n\t\tcreditLabel.setBorder(new EmptyBorder(2, 0, 0, 0));\n\t\ttitlePanel.add(creditLabel, BorderLayout.CENTER);\n\t\t\n\t\tleftPanel.add(titlePanel, BorderLayout.CENTER);\n\t\tadd(leftPanel, BorderLayout.CENTER);\n\t\t\n\t\tsettingsButton \u003d new JButton();\n\t\ttry\n\t\t{\n\t\t\tBufferedImage settingsIcon \u003d ImageUtil.loadImageResource(getClass(), \"/settings.png\");\n\t\t\tif (settingsIcon !\u003d null)\n\t\t\t{\n\t\t\t\tsettingsButton.setIcon(new ImageIcon(settingsIcon.getScaledInstance(20, 20, java.awt.Image.SCALE_SMOOTH)));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsettingsButton.setText(\"\");\n\t\t\t}\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\tsettingsButton.setText(\"\");\n\t\t}\n\t\tsettingsButton.setBackground(new Color(60, 60, 60));\n\t\tsettingsButton.setForeground(Color.WHITE);\n\t\tsettingsButton.setFocusPainted(false);\n\t\tsettingsButton.setBorderPainted(false);\n\t\tsettingsButton.setContentAreaFilled(false);\n\t\tsettingsButton.setPreferredSize(new Dimension(24, 24));\n\t\tsettingsButton.addActionListener(e -\u003e {\n\t\t\tif (onSettingsClick !\u003d null)\n\t\t\t{\n\t\t\t\tonSettingsClick.run();\n\t\t\t}\n\t\t});\n\t\t\n\t\tJPanel settingsPanel \u003d new JPanel(new BorderLayout());\n\t\tsettingsPanel.setBackground(new Color(26, 26, 26));\n\t\tsettingsPanel.setBorder(new EmptyBorder(0, 0, 0, 5));\n\t\tsettingsPanel.add(settingsButton, BorderLayout.CENTER);\n\t\tadd(settingsPanel, BorderLayout.EAST);\n\t}\n\t\n\tpublic void setOnSettingsClick(Runnable onSettingsClick)\n\t{\n\t\tthis.onSettingsClick \u003d onSettingsClick;\n\t}\n\t\n\tpublic void setHeaderText(String text)\n\t{\n\t\theaderLabel.setText(text);\n\t}\n}\n\n","filePath":"src\\main\\java\\com\\cluejuggler\\ui\\panel\\HeaderPanel.java"},{"fileName":"ListsSectionPanel.java","content":"package com.cluejuggler.ui.panel;\n\nimport com.cluejuggler.model.ClueList;\nimport com.cluejuggler.ui.component.ListCardComponent;\nimport java.awt.Color;\nimport java.awt.Font;\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.swing.Box;\nimport javax.swing.BoxLayout;\nimport javax.swing.JButton;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\n\npublic class ListsSectionPanel extends JPanel\n{\n\tprivate final List\u003cListCardComponent\u003e customListCards \u003d new ArrayList\u003c\u003e();\n\tprivate final List\u003cjava.awt.Component\u003e customListSpacers \u003d new ArrayList\u003c\u003e();\n\tprivate JButton addListButton;\n\tprivate java.awt.Component buttonSpacer;\n\tprivate Runnable onGoodListClick;\n\tprivate Runnable onBadListClick;\n\tprivate Runnable onAddListClick;\n\tprivate java.util.function.Consumer\u003cClueList\u003e onCustomListClick;\n\tprivate java.util.function.Consumer\u003cClueList\u003e onDeleteCustomList;\n\t\n\tpublic ListsSectionPanel()\n\t{\n\t\tsetLayout(new BoxLayout(this, BoxLayout.Y_AXIS));\n\t\tsetBackground(new Color(26, 26, 26));\n\t\tsetAlignmentX(0.0f);\n\t\t\n\t\tJLabel headerLabel \u003d new JLabel(\"Lists\");\n\t\theaderLabel.setForeground(Color.WHITE);\n\t\theaderLabel.setFont(new Font(headerLabel.getFont().getName(), Font.BOLD, 14));\n\t\theaderLabel.setBorder(new EmptyBorder(0, 0, 8, 0));\n\t\theaderLabel.setAlignmentX(0.0f);\n\t\tadd(headerLabel);\n\t\t\n\t\tListCardComponent goodCard \u003d new ListCardComponent(\"Good Steps\", new Color(0, 150, 0), false);\n\t\tgoodCard.setAlignmentX(0.0f);\n\t\tgoodCard.setOnClick(() -\u003e {\n\t\t\tif (onGoodListClick !\u003d null)\n\t\t\t{\n\t\t\t\tonGoodListClick.run();\n\t\t\t}\n\t\t});\n\t\tadd(goodCard);\n\t\t\n\t\tadd(Box.createVerticalStrut(5));\n\t\t\n\t\tListCardComponent badCard \u003d new ListCardComponent(\"Bad Steps\", new Color(150, 0, 0), false);\n\t\tbadCard.setAlignmentX(0.0f);\n\t\tbadCard.setOnClick(() -\u003e {\n\t\t\tif (onBadListClick !\u003d null)\n\t\t\t{\n\t\t\t\tonBadListClick.run();\n\t\t\t}\n\t\t});\n\t\tadd(badCard);\n\t\t\n\t\tbuttonSpacer \u003d Box.createVerticalStrut(10);\n\t\tadd(buttonSpacer);\n\t\t\n\t\taddListButton \u003d new JButton(\"+ Add List\");\n\t\taddListButton.setBackground(new Color(60, 60, 60));\n\t\taddListButton.setForeground(Color.WHITE);\n\t\taddListButton.setFocusPainted(false);\n\t\taddListButton.setAlignmentX(0.0f);\n\t\taddListButton.addActionListener(e -\u003e {\n\t\t\tif (onAddListClick !\u003d null)\n\t\t\t{\n\t\t\t\tonAddListClick.run();\n\t\t\t}\n\t\t});\n\t\tadd(addListButton);\n\t}\n\t\n\tpublic void setOnGoodListClick(Runnable onGoodListClick)\n\t{\n\t\tthis.onGoodListClick \u003d onGoodListClick;\n\t}\n\t\n\tpublic void setOnBadListClick(Runnable onBadListClick)\n\t{\n\t\tthis.onBadListClick \u003d onBadListClick;\n\t}\n\t\n\tpublic void setOnAddListClick(Runnable onAddListClick)\n\t{\n\t\tthis.onAddListClick \u003d onAddListClick;\n\t}\n\t\n\tpublic void setOnCustomListClick(java.util.function.Consumer\u003cClueList\u003e onCustomListClick)\n\t{\n\t\tthis.onCustomListClick \u003d onCustomListClick;\n\t}\n\t\n\tpublic void setOnDeleteCustomList(java.util.function.Consumer\u003cClueList\u003e onDeleteCustomList)\n\t{\n\t\tthis.onDeleteCustomList \u003d onDeleteCustomList;\n\t}\n\t\n\tpublic void refreshCustomLists(List\u003cClueList\u003e customLists)\n\t{\n\t\tfor (ListCardComponent card : customListCards)\n\t\t{\n\t\t\tremove(card);\n\t\t}\n\t\tcustomListCards.clear();\n\t\t\n\t\tfor (java.awt.Component spacer : customListSpacers)\n\t\t{\n\t\t\tremove(spacer);\n\t\t}\n\t\tcustomListSpacers.clear();\n\t\t\n\t\tremove(buttonSpacer);\n\t\tremove(addListButton);\n\t\t\n\t\tfor (ClueList list : customLists)\n\t\t{\n\t\t\tjava.awt.Component spacer \u003d Box.createVerticalStrut(5);\n\t\t\tcustomListSpacers.add(spacer);\n\t\t\tadd(spacer);\n\t\t\t\n\t\t\tListCardComponent card \u003d new ListCardComponent(list.getName(), list.getTextColor(), true);\n\t\t\tcard.setAlignmentX(0.0f);\n\t\t\tcard.setOnClick(() -\u003e {\n\t\t\t\tif (onCustomListClick !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tonCustomListClick.accept(list);\n\t\t\t\t}\n\t\t\t});\n\t\t\tcard.setOnDelete(() -\u003e {\n\t\t\t\tif (onDeleteCustomList !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tonDeleteCustomList.accept(list);\n\t\t\t\t}\n\t\t\t});\n\t\t\tcustomListCards.add(card);\n\t\t\tadd(card);\n\t\t}\n\t\t\n\t\tbuttonSpacer \u003d Box.createVerticalStrut(10);\n\t\tadd(buttonSpacer);\n\t\tadd(addListButton);\n\t\t\n\t\trevalidate();\n\t\trepaint();\n\t}\n}\n\n","filePath":"src\\main\\java\\com\\cluejuggler\\ui\\panel\\ListsSectionPanel.java"},{"fileName":"BadListView.java","content":"package com.cluejuggler.ui.view;\n\nimport com.cluejuggler.service.ClueListService;\nimport com.cluejuggler.ui.component.ClueTableComponent;\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.FlowLayout;\nimport java.awt.Font;\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport javax.swing.ImageIcon;\nimport javax.swing.JButton;\nimport javax.swing.JFileChooser;\nimport javax.swing.JLabel;\nimport javax.swing.JOptionPane;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\nimport javax.swing.filechooser.FileNameExtensionFilter;\nimport net.runelite.client.util.ImageUtil;\n\npublic class BadListView extends JPanel\n{\n\tprivate final ClueTableComponent tableComponent;\n\tprivate final ClueListService listService;\n\tprivate Runnable onBackClick;\n\t\n\tpublic BadListView(ClueListService listService)\n\t{\n\t\tthis.listService \u003d listService;\n\t\tsetLayout(new BorderLayout());\n\t\tsetBorder(new EmptyBorder(5, 0, 5, 0));\n\t\tsetBackground(new Color(26, 26, 26));\n\t\t\n\t\tJPanel headerPanel \u003d new JPanel(new BorderLayout());\n\t\theaderPanel.setBorder(new EmptyBorder(0, 0, 10, 0));\n\t\theaderPanel.setBackground(new Color(26, 26, 26));\n\t\t\n\t\tJPanel leftPanel \u003d new JPanel(new BorderLayout());\n\t\tleftPanel.setBackground(new Color(26, 26, 26));\n\t\t\n\t\ttry\n\t\t{\n\t\t\tBufferedImage iconImage \u003d ImageUtil.loadImageResource(getClass(), \"/cluejuggler.png\");\n\t\t\tif (iconImage !\u003d null)\n\t\t\t{\n\t\t\t\tImageIcon icon \u003d new ImageIcon(iconImage.getScaledInstance(32, 32, java.awt.Image.SCALE_SMOOTH));\n\t\t\t\tJLabel iconLabel \u003d new JLabel(icon);\n\t\t\t\ticonLabel.setBorder(new EmptyBorder(0, 0, 0, 10));\n\t\t\t\tleftPanel.add(iconLabel, BorderLayout.WEST);\n\t\t\t}\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t}\n\t\t\n\t\tJLabel titleLabel \u003d new JLabel(\"Bad Steps\");\n\t\ttitleLabel.setFont(new Font(titleLabel.getFont().getName(), Font.BOLD, 18));\n\t\ttitleLabel.setForeground(new Color(150, 0, 0));\n\t\tleftPanel.add(titleLabel, BorderLayout.CENTER);\n\t\t\n\t\theaderPanel.add(leftPanel, BorderLayout.CENTER);\n\t\t\n\t\tJButton backButton \u003d new JButton(\" Back\");\n\t\tbackButton.setBackground(new Color(60, 60, 60));\n\t\tbackButton.setForeground(Color.WHITE);\n\t\tbackButton.setFocusPainted(false);\n\t\tbackButton.addActionListener(e -\u003e {\n\t\t\tif (onBackClick !\u003d null)\n\t\t\t{\n\t\t\t\tonBackClick.run();\n\t\t\t}\n\t\t});\n\t\theaderPanel.add(backButton, BorderLayout.EAST);\n\t\t\n\t\tadd(headerPanel, BorderLayout.NORTH);\n\t\t\n\t\ttableComponent \u003d new ClueTableComponent();\n\t\ttableComponent.setOnDeleteClue((text, identifier) -\u003e {\n\t\t\tlistService.removeFromBad(identifier);\n\t\t\tlistService.saveLists();\n\t\t});\n\t\tadd(tableComponent, BorderLayout.CENTER);\n\t\t\n\t\tJPanel buttonPanel \u003d new JPanel(new FlowLayout(FlowLayout.LEFT));\n\t\tbuttonPanel.setBackground(new Color(26, 26, 26));\n\t\t\n\t\tJButton exportButton \u003d new JButton(\"Export\");\n\t\texportButton.setBackground(new Color(60, 60, 60));\n\t\texportButton.setForeground(Color.WHITE);\n\t\texportButton.setFocusPainted(false);\n\t\texportButton.addActionListener(e -\u003e exportList());\n\t\tbuttonPanel.add(exportButton);\n\t\t\n\t\tJButton importButton \u003d new JButton(\"Import\");\n\t\timportButton.setBackground(new Color(60, 60, 60));\n\t\timportButton.setForeground(Color.WHITE);\n\t\timportButton.setFocusPainted(false);\n\t\timportButton.addActionListener(e -\u003e importList());\n\t\tbuttonPanel.add(importButton);\n\t\t\n\t\tJButton clearButton \u003d new JButton(\"Clear All\");\n\t\tclearButton.setBackground(new Color(100, 0, 0));\n\t\tclearButton.setForeground(Color.WHITE);\n\t\tclearButton.setFocusPainted(false);\n\t\tclearButton.addActionListener(e -\u003e clearList());\n\t\tbuttonPanel.add(clearButton);\n\t\t\n\t\tadd(buttonPanel, BorderLayout.SOUTH);\n\t}\n\t\n\tpublic void setOnBackClick(Runnable onBackClick)\n\t{\n\t\tthis.onBackClick \u003d onBackClick;\n\t}\n\t\n\tpublic void refresh()\n\t{\n\t\ttableComponent.clear();\n\t\tfor (java.util.Map.Entry\u003cString, String\u003e entry : listService.getBadClueIdentifiers().entrySet())\n\t\t{\n\t\t\ttableComponent.addRow(entry.getValue(), entry.getKey());\n\t\t}\n\t}\n\t\n\tprivate void exportList()\n\t{\n\t\tJFileChooser fileChooser \u003d new JFileChooser();\n\t\tfileChooser.setDialogTitle(\"Export Bad Steps\");\n\t\tfileChooser.setFileFilter(new FileNameExtensionFilter(\"JSON Files\", \"json\"));\n\t\t\n\t\tif (fileChooser.showSaveDialog(this) \u003d\u003d JFileChooser.APPROVE_OPTION)\n\t\t{\n\t\t\tFile file \u003d fileChooser.getSelectedFile();\n\t\t\tif (!file.getName().endsWith(\".json\"))\n\t\t\t{\n\t\t\t\tfile \u003d new File(file.getAbsolutePath() + \".json\");\n\t\t\t}\n\t\t\tlistService.exportToFile(file);\n\t\t\tJOptionPane.showMessageDialog(this, \"Export successful!\", \"Success\", JOptionPane.INFORMATION_MESSAGE);\n\t\t}\n\t}\n\t\n\tprivate void importList()\n\t{\n\t\tJFileChooser fileChooser \u003d new JFileChooser();\n\t\tfileChooser.setDialogTitle(\"Import Bad Steps\");\n\t\tfileChooser.setFileFilter(new FileNameExtensionFilter(\"JSON Files\", \"json\"));\n\t\t\n\t\tif (fileChooser.showOpenDialog(this) \u003d\u003d JFileChooser.APPROVE_OPTION)\n\t\t{\n\t\t\tFile file \u003d fileChooser.getSelectedFile();\n\t\t\tlistService.importFromFile(file);\n\t\t\trefresh();\n\t\t\tJOptionPane.showMessageDialog(this, \"Import successful!\", \"Success\", JOptionPane.INFORMATION_MESSAGE);\n\t\t}\n\t}\n\t\n\tprivate void clearList()\n\t{\n\t\tint result \u003d JOptionPane.showConfirmDialog(this, \"Are you sure you want to clear all bad steps?\", \"Confirm Clear\", JOptionPane.YES_NO_OPTION);\n\t\tif (result \u003d\u003d JOptionPane.YES_OPTION)\n\t\t{\n\t\t\tlistService.clearBadSteps();\n\t\t\ttableComponent.clear();\n\t\t}\n\t}\n}\n\n","filePath":"src\\main\\java\\com\\cluejuggler\\ui\\view\\BadListView.java"},{"fileName":"CustomListView.java","content":"package com.cluejuggler.ui.view;\n\nimport com.cluejuggler.model.ClueList;\nimport com.cluejuggler.service.ClueListService;\nimport com.cluejuggler.ui.component.ClueTableComponent;\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.FlowLayout;\nimport java.awt.Font;\nimport java.awt.image.BufferedImage;\nimport javax.swing.BoxLayout;\nimport javax.swing.ImageIcon;\nimport javax.swing.JButton;\nimport javax.swing.JCheckBox;\nimport javax.swing.JLabel;\nimport javax.swing.JOptionPane;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\nimport net.runelite.client.util.ImageUtil;\n\npublic class CustomListView extends JPanel\n{\n\tprivate final ClueTableComponent tableComponent;\n\tprivate final ClueListService listService;\n\tprivate final JLabel titleLabel;\n\tprivate final JCheckBox deprioritizeCheckbox;\n\tprivate ClueList currentList;\n\tprivate Runnable onBackClick;\n\t\n\tpublic CustomListView(ClueListService listService)\n\t{\n\t\tthis.listService \u003d listService;\n\t\tsetLayout(new BorderLayout());\n\t\tsetBorder(new EmptyBorder(5, 0, 5, 0));\n\t\tsetBackground(new Color(26, 26, 26));\n\t\t\n\t\tJPanel topPanel \u003d new JPanel();\n\t\ttopPanel.setLayout(new BoxLayout(topPanel, BoxLayout.Y_AXIS));\n\t\ttopPanel.setBackground(new Color(26, 26, 26));\n\t\t\n\t\tJPanel headerPanel \u003d new JPanel(new BorderLayout());\n\t\theaderPanel.setBorder(new EmptyBorder(0, 0, 10, 0));\n\t\theaderPanel.setBackground(new Color(26, 26, 26));\n\t\t\n\t\tJPanel leftPanel \u003d new JPanel(new BorderLayout());\n\t\tleftPanel.setBackground(new Color(26, 26, 26));\n\t\t\n\t\ttry\n\t\t{\n\t\t\tBufferedImage iconImage \u003d ImageUtil.loadImageResource(getClass(), \"/cluejuggler.png\");\n\t\t\tif (iconImage !\u003d null)\n\t\t\t{\n\t\t\t\tImageIcon icon \u003d new ImageIcon(iconImage.getScaledInstance(32, 32, java.awt.Image.SCALE_SMOOTH));\n\t\t\t\tJLabel iconLabel \u003d new JLabel(icon);\n\t\t\t\ticonLabel.setBorder(new EmptyBorder(0, 0, 0, 10));\n\t\t\t\tleftPanel.add(iconLabel, BorderLayout.WEST);\n\t\t\t}\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t}\n\t\t\n\t\ttitleLabel \u003d new JLabel(\"Custom List\");\n\t\ttitleLabel.setFont(new Font(titleLabel.getFont().getName(), Font.BOLD, 18));\n\t\ttitleLabel.setForeground(Color.WHITE);\n\t\tleftPanel.add(titleLabel, BorderLayout.CENTER);\n\t\t\n\t\theaderPanel.add(leftPanel, BorderLayout.CENTER);\n\t\t\n\t\tJButton backButton \u003d new JButton(\" Back\");\n\t\tbackButton.setBackground(new Color(60, 60, 60));\n\t\tbackButton.setForeground(Color.WHITE);\n\t\tbackButton.setFocusPainted(false);\n\t\tbackButton.addActionListener(e -\u003e {\n\t\t\tif (onBackClick !\u003d null)\n\t\t\t{\n\t\t\t\tonBackClick.run();\n\t\t\t}\n\t\t});\n\t\theaderPanel.add(backButton, BorderLayout.EAST);\n\t\t\n\t\ttopPanel.add(headerPanel);\n\t\t\n\t\tJPanel optionsPanel \u003d new JPanel(new FlowLayout(FlowLayout.LEFT, 0, 0));\n\t\toptionsPanel.setBackground(new Color(26, 26, 26));\n\t\toptionsPanel.setBorder(new EmptyBorder(0, 0, 10, 0));\n\t\t\n\t\tdeprioritizeCheckbox \u003d new JCheckBox(\"Deprioritize (treat as bad)\");\n\t\tdeprioritizeCheckbox.setBackground(new Color(26, 26, 26));\n\t\tdeprioritizeCheckbox.setForeground(Color.WHITE);\n\t\tdeprioritizeCheckbox.setFocusPainted(false);\n\t\tdeprioritizeCheckbox.addActionListener(e -\u003e {\n\t\t\tif (currentList !\u003d null)\n\t\t\t{\n\t\t\t\tcurrentList.setDeprioritize(deprioritizeCheckbox.isSelected());\n\t\t\t\tlistService.saveCustomLists();\n\t\t\t}\n\t\t});\n\t\toptionsPanel.add(deprioritizeCheckbox);\n\t\t\n\t\ttopPanel.add(optionsPanel);\n\t\t\n\t\tadd(topPanel, BorderLayout.NORTH);\n\t\t\n\t\ttableComponent \u003d new ClueTableComponent();\n\t\ttableComponent.setOnDeleteClue((text, identifier) -\u003e {\n\t\t\tif (currentList !\u003d null)\n\t\t\t{\n\t\t\t\tcurrentList.getClueIdentifiers().remove(identifier);\n\t\t\t\tcurrentList.getClues().remove(text);\n\t\t\t\tlistService.saveCustomLists();\n\t\t\t}\n\t\t});\n\t\tadd(tableComponent, BorderLayout.CENTER);\n\t\t\n\t\tJPanel buttonPanel \u003d new JPanel(new FlowLayout(FlowLayout.LEFT));\n\t\tbuttonPanel.setBackground(new Color(26, 26, 26));\n\t\t\n\t\tJButton clearButton \u003d new JButton(\"Clear All\");\n\t\tclearButton.setBackground(new Color(100, 0, 0));\n\t\tclearButton.setForeground(Color.WHITE);\n\t\tclearButton.setFocusPainted(false);\n\t\tclearButton.addActionListener(e -\u003e clearList());\n\t\tbuttonPanel.add(clearButton);\n\t\t\n\t\tJButton deleteListButton \u003d new JButton(\"Delete List\");\n\t\tdeleteListButton.setBackground(new Color(100, 0, 0));\n\t\tdeleteListButton.setForeground(Color.WHITE);\n\t\tdeleteListButton.setFocusPainted(false);\n\t\tdeleteListButton.addActionListener(e -\u003e deleteList());\n\t\tbuttonPanel.add(deleteListButton);\n\t\t\n\t\tadd(buttonPanel, BorderLayout.SOUTH);\n\t}\n\t\n\tpublic void setOnBackClick(Runnable onBackClick)\n\t{\n\t\tthis.onBackClick \u003d onBackClick;\n\t}\n\t\n\tpublic void setList(ClueList list)\n\t{\n\t\tthis.currentList \u003d list;\n\t\tif (list !\u003d null)\n\t\t{\n\t\t\ttitleLabel.setText(list.getName());\n\t\t\ttitleLabel.setForeground(list.getTextColor());\n\t\t\tdeprioritizeCheckbox.setSelected(list.isDeprioritize());\n\t\t\trefresh();\n\t\t}\n\t}\n\t\n\tpublic void refresh()\n\t{\n\t\ttableComponent.clear();\n\t\tif (currentList !\u003d null)\n\t\t{\n\t\t\tfor (java.util.Map.Entry\u003cString, String\u003e entry : currentList.getClueIdentifiers().entrySet())\n\t\t\t{\n\t\t\t\ttableComponent.addRow(entry.getValue(), entry.getKey());\n\t\t\t}\n\t\t}\n\t}\n\t\n\tprivate void clearList()\n\t{\n\t\tif (currentList \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tint result \u003d JOptionPane.showConfirmDialog(this, \"Are you sure you want to clear all clues from \" + currentList.getName() + \"?\", \"Confirm Clear\", JOptionPane.YES_NO_OPTION);\n\t\tif (result \u003d\u003d JOptionPane.YES_OPTION)\n\t\t{\n\t\t\tcurrentList.getClueIdentifiers().clear();\n\t\t\tcurrentList.getClues().clear();\n\t\t\tlistService.saveCustomLists();\n\t\t\ttableComponent.clear();\n\t\t}\n\t}\n\t\n\tprivate void deleteList()\n\t{\n\t\tif (currentList \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tint result \u003d JOptionPane.showConfirmDialog(this, \"Are you sure you want to delete the list \u0027\" + currentList.getName() + \"\u0027?\", \"Confirm Delete\", JOptionPane.YES_NO_OPTION);\n\t\tif (result \u003d\u003d JOptionPane.YES_OPTION)\n\t\t{\n\t\t\tlistService.deleteCustomList(currentList);\n\t\t\tif (onBackClick !\u003d null)\n\t\t\t{\n\t\t\t\tonBackClick.run();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tpublic ClueList getCurrentList()\n\t{\n\t\treturn currentList;\n\t}\n}\n\n","filePath":"src\\main\\java\\com\\cluejuggler\\ui\\view\\CustomListView.java"},{"fileName":"GoodListView.java","content":"package com.cluejuggler.ui.view;\n\nimport com.cluejuggler.service.ClueListService;\nimport com.cluejuggler.ui.component.ClueTableComponent;\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.FlowLayout;\nimport java.awt.Font;\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport javax.swing.ImageIcon;\nimport javax.swing.JButton;\nimport javax.swing.JFileChooser;\nimport javax.swing.JLabel;\nimport javax.swing.JOptionPane;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\nimport javax.swing.filechooser.FileNameExtensionFilter;\nimport net.runelite.client.util.ImageUtil;\n\npublic class GoodListView extends JPanel\n{\n\tprivate final ClueTableComponent tableComponent;\n\tprivate final ClueListService listService;\n\tprivate Runnable onBackClick;\n\t\n\tpublic GoodListView(ClueListService listService)\n\t{\n\t\tthis.listService \u003d listService;\n\t\tsetLayout(new BorderLayout());\n\t\tsetBorder(new EmptyBorder(5, 0, 5, 0));\n\t\tsetBackground(new Color(26, 26, 26));\n\t\t\n\t\tJPanel headerPanel \u003d new JPanel(new BorderLayout());\n\t\theaderPanel.setBorder(new EmptyBorder(0, 0, 10, 0));\n\t\theaderPanel.setBackground(new Color(26, 26, 26));\n\t\t\n\t\tJPanel leftPanel \u003d new JPanel(new BorderLayout());\n\t\tleftPanel.setBackground(new Color(26, 26, 26));\n\t\t\n\t\ttry\n\t\t{\n\t\t\tBufferedImage iconImage \u003d ImageUtil.loadImageResource(getClass(), \"/cluejuggler.png\");\n\t\t\tif (iconImage !\u003d null)\n\t\t\t{\n\t\t\t\tImageIcon icon \u003d new ImageIcon(iconImage.getScaledInstance(32, 32, java.awt.Image.SCALE_SMOOTH));\n\t\t\t\tJLabel iconLabel \u003d new JLabel(icon);\n\t\t\t\ticonLabel.setBorder(new EmptyBorder(0, 0, 0, 10));\n\t\t\t\tleftPanel.add(iconLabel, BorderLayout.WEST);\n\t\t\t}\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t}\n\t\t\n\t\tJLabel titleLabel \u003d new JLabel(\"Good Steps\");\n\t\ttitleLabel.setFont(new Font(titleLabel.getFont().getName(), Font.BOLD, 18));\n\t\ttitleLabel.setForeground(new Color(0, 150, 0));\n\t\tleftPanel.add(titleLabel, BorderLayout.CENTER);\n\t\t\n\t\theaderPanel.add(leftPanel, BorderLayout.CENTER);\n\t\t\n\t\tJButton backButton \u003d new JButton(\" Back\");\n\t\tbackButton.setBackground(new Color(60, 60, 60));\n\t\tbackButton.setForeground(Color.WHITE);\n\t\tbackButton.setFocusPainted(false);\n\t\tbackButton.addActionListener(e -\u003e {\n\t\t\tif (onBackClick !\u003d null)\n\t\t\t{\n\t\t\t\tonBackClick.run();\n\t\t\t}\n\t\t});\n\t\theaderPanel.add(backButton, BorderLayout.EAST);\n\t\t\n\t\tadd(headerPanel, BorderLayout.NORTH);\n\t\t\n\t\ttableComponent \u003d new ClueTableComponent();\n\t\ttableComponent.setOnDeleteClue((text, identifier) -\u003e {\n\t\t\tlistService.removeFromGood(identifier);\n\t\t\tlistService.saveLists();\n\t\t});\n\t\tadd(tableComponent, BorderLayout.CENTER);\n\t\t\n\t\tJPanel buttonPanel \u003d new JPanel(new FlowLayout(FlowLayout.LEFT));\n\t\tbuttonPanel.setBackground(new Color(26, 26, 26));\n\t\t\n\t\tJButton exportButton \u003d new JButton(\"Export\");\n\t\texportButton.setBackground(new Color(60, 60, 60));\n\t\texportButton.setForeground(Color.WHITE);\n\t\texportButton.setFocusPainted(false);\n\t\texportButton.addActionListener(e -\u003e exportList());\n\t\tbuttonPanel.add(exportButton);\n\t\t\n\t\tJButton importButton \u003d new JButton(\"Import\");\n\t\timportButton.setBackground(new Color(60, 60, 60));\n\t\timportButton.setForeground(Color.WHITE);\n\t\timportButton.setFocusPainted(false);\n\t\timportButton.addActionListener(e -\u003e importList());\n\t\tbuttonPanel.add(importButton);\n\t\t\n\t\tJButton clearButton \u003d new JButton(\"Clear All\");\n\t\tclearButton.setBackground(new Color(100, 0, 0));\n\t\tclearButton.setForeground(Color.WHITE);\n\t\tclearButton.setFocusPainted(false);\n\t\tclearButton.addActionListener(e -\u003e clearList());\n\t\tbuttonPanel.add(clearButton);\n\t\t\n\t\tadd(buttonPanel, BorderLayout.SOUTH);\n\t}\n\t\n\tpublic void setOnBackClick(Runnable onBackClick)\n\t{\n\t\tthis.onBackClick \u003d onBackClick;\n\t}\n\t\n\tpublic void refresh()\n\t{\n\t\ttableComponent.clear();\n\t\tfor (java.util.Map.Entry\u003cString, String\u003e entry : listService.getGoodClueIdentifiers().entrySet())\n\t\t{\n\t\t\ttableComponent.addRow(entry.getValue(), entry.getKey());\n\t\t}\n\t}\n\t\n\tprivate void exportList()\n\t{\n\t\tJFileChooser fileChooser \u003d new JFileChooser();\n\t\tfileChooser.setDialogTitle(\"Export Good Steps\");\n\t\tfileChooser.setFileFilter(new FileNameExtensionFilter(\"JSON Files\", \"json\"));\n\t\t\n\t\tif (fileChooser.showSaveDialog(this) \u003d\u003d JFileChooser.APPROVE_OPTION)\n\t\t{\n\t\t\tFile file \u003d fileChooser.getSelectedFile();\n\t\t\tif (!file.getName().endsWith(\".json\"))\n\t\t\t{\n\t\t\t\tfile \u003d new File(file.getAbsolutePath() + \".json\");\n\t\t\t}\n\t\t\tlistService.exportToFile(file);\n\t\t\tJOptionPane.showMessageDialog(this, \"Export successful!\", \"Success\", JOptionPane.INFORMATION_MESSAGE);\n\t\t}\n\t}\n\t\n\tprivate void importList()\n\t{\n\t\tJFileChooser fileChooser \u003d new JFileChooser();\n\t\tfileChooser.setDialogTitle(\"Import Good Steps\");\n\t\tfileChooser.setFileFilter(new FileNameExtensionFilter(\"JSON Files\", \"json\"));\n\t\t\n\t\tif (fileChooser.showOpenDialog(this) \u003d\u003d JFileChooser.APPROVE_OPTION)\n\t\t{\n\t\t\tFile file \u003d fileChooser.getSelectedFile();\n\t\t\tlistService.importFromFile(file);\n\t\t\trefresh();\n\t\t\tJOptionPane.showMessageDialog(this, \"Import successful!\", \"Success\", JOptionPane.INFORMATION_MESSAGE);\n\t\t}\n\t}\n\t\n\tprivate void clearList()\n\t{\n\t\tint result \u003d JOptionPane.showConfirmDialog(this, \"Are you sure you want to clear all good steps?\", \"Confirm Clear\", JOptionPane.YES_NO_OPTION);\n\t\tif (result \u003d\u003d JOptionPane.YES_OPTION)\n\t\t{\n\t\t\tlistService.clearGoodSteps();\n\t\t\ttableComponent.clear();\n\t\t}\n\t}\n}\n\n","filePath":"src\\main\\java\\com\\cluejuggler\\ui\\view\\GoodListView.java"},{"fileName":"SettingsView.java","content":"package com.cluejuggler.ui.view;\n\nimport com.cluejuggler.model.ClueList;\nimport com.cluejuggler.service.ClueListService;\nimport com.cluejuggler.ui.component.ColorPickerRow;\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Font;\nimport java.awt.image.BufferedImage;\nimport java.util.List;\nimport javax.swing.Box;\nimport javax.swing.BoxLayout;\nimport javax.swing.ImageIcon;\nimport javax.swing.JButton;\nimport javax.swing.JCheckBox;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\nimport javax.swing.border.EmptyBorder;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.util.ImageUtil;\n\npublic class SettingsView extends JPanel\n{\n\tprivate final ClueListService listService;\n\tprivate final ConfigManager configManager;\n\tprivate final JPanel contentPanel;\n\tprivate Runnable onBackClick;\n\t\n\tpublic SettingsView(ClueListService listService, ConfigManager configManager)\n\t{\n\t\tthis.listService \u003d listService;\n\t\tthis.configManager \u003d configManager;\n\t\t\n\t\tsetLayout(new BorderLayout());\n\t\tsetBorder(new EmptyBorder(5, 0, 5, 0));\n\t\tsetBackground(new Color(26, 26, 26));\n\t\t\n\t\tJPanel headerPanel \u003d new JPanel(new BorderLayout());\n\t\theaderPanel.setBorder(new EmptyBorder(0, 0, 10, 0));\n\t\theaderPanel.setBackground(new Color(26, 26, 26));\n\t\t\n\t\tJPanel leftPanel \u003d new JPanel(new BorderLayout());\n\t\tleftPanel.setBackground(new Color(26, 26, 26));\n\t\t\n\t\ttry\n\t\t{\n\t\t\tBufferedImage iconImage \u003d ImageUtil.loadImageResource(getClass(), \"/cluejuggler.png\");\n\t\t\tif (iconImage !\u003d null)\n\t\t\t{\n\t\t\t\tImageIcon icon \u003d new ImageIcon(iconImage.getScaledInstance(32, 32, java.awt.Image.SCALE_SMOOTH));\n\t\t\t\tJLabel iconLabel \u003d new JLabel(icon);\n\t\t\t\ticonLabel.setBorder(new EmptyBorder(0, 0, 0, 10));\n\t\t\t\tleftPanel.add(iconLabel, BorderLayout.WEST);\n\t\t\t}\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t}\n\t\t\n\t\tJLabel titleLabel \u003d new JLabel(\"Settings\");\n\t\ttitleLabel.setFont(new Font(titleLabel.getFont().getName(), Font.BOLD, 18));\n\t\ttitleLabel.setForeground(Color.WHITE);\n\t\tleftPanel.add(titleLabel, BorderLayout.CENTER);\n\t\t\n\t\theaderPanel.add(leftPanel, BorderLayout.CENTER);\n\t\t\n\t\tJButton backButton \u003d new JButton(\" Back\");\n\t\tbackButton.setBackground(new Color(60, 60, 60));\n\t\tbackButton.setForeground(Color.WHITE);\n\t\tbackButton.setFocusPainted(false);\n\t\tbackButton.addActionListener(e -\u003e {\n\t\t\tif (onBackClick !\u003d null)\n\t\t\t{\n\t\t\t\tonBackClick.run();\n\t\t\t}\n\t\t});\n\t\theaderPanel.add(backButton, BorderLayout.EAST);\n\t\t\n\t\tadd(headerPanel, BorderLayout.NORTH);\n\t\t\n\t\tcontentPanel \u003d new JPanel();\n\t\tcontentPanel.setLayout(new BoxLayout(contentPanel, BoxLayout.Y_AXIS));\n\t\tcontentPanel.setBackground(new Color(26, 26, 26));\n\t\t\n\t\tJScrollPane scrollPane \u003d new JScrollPane(contentPanel);\n\t\tscrollPane.setBackground(new Color(26, 26, 26));\n\t\tscrollPane.getViewport().setBackground(new Color(26, 26, 26));\n\t\tscrollPane.setBorder(null);\n\t\tadd(scrollPane, BorderLayout.CENTER);\n\t}\n\t\n\tpublic void setOnBackClick(Runnable onBackClick)\n\t{\n\t\tthis.onBackClick \u003d onBackClick;\n\t}\n\t\n\tpublic void refresh()\n\t{\n\t\tcontentPanel.removeAll();\n\t\t\n\t\tJLabel generalLabel \u003d new JLabel(\"General\");\n\t\tgeneralLabel.setFont(new Font(generalLabel.getFont().getName(), Font.BOLD, 14));\n\t\tgeneralLabel.setForeground(Color.WHITE);\n\t\tgeneralLabel.setBorder(new EmptyBorder(0, 0, 10, 0));\n\t\tcontentPanel.add(generalLabel);\n\t\t\n\t\tJCheckBox showIndicatorCheck \u003d new JCheckBox(\"Show Clue Indicator\");\n\t\tshowIndicatorCheck.setBackground(new Color(26, 26, 26));\n\t\tshowIndicatorCheck.setForeground(Color.WHITE);\n\t\tshowIndicatorCheck.setSelected(getBooleanConfig(\"showIndicator\", true));\n\t\tshowIndicatorCheck.addActionListener(e -\u003e \n\t\t\tconfigManager.setConfiguration(\"cluejuggler\", \"showIndicator\", showIndicatorCheck.isSelected()));\n\t\tcontentPanel.add(showIndicatorCheck);\n\t\t\n\t\tJCheckBox deprioritizeCheck \u003d new JCheckBox(\"Deprioritize Bad Clues\");\n\t\tdeprioritizeCheck.setBackground(new Color(26, 26, 26));\n\t\tdeprioritizeCheck.setForeground(Color.WHITE);\n\t\tdeprioritizeCheck.setSelected(getBooleanConfig(\"deprioritizeBadClues\", true));\n\t\tdeprioritizeCheck.addActionListener(e -\u003e \n\t\t\tconfigManager.setConfiguration(\"cluejuggler\", \"deprioritizeBadClues\", deprioritizeCheck.isSelected()));\n\t\tcontentPanel.add(deprioritizeCheck);\n\t\t\n\t\tcontentPanel.add(Box.createVerticalStrut(20));\n\t\t\n\t\tJLabel highlighterLabel \u003d new JLabel(\"Clue Highlighter\");\n\t\thighlighterLabel.setFont(new Font(highlighterLabel.getFont().getName(), Font.BOLD, 14));\n\t\thighlighterLabel.setForeground(Color.WHITE);\n\t\thighlighterLabel.setBorder(new EmptyBorder(0, 0, 10, 0));\n\t\tcontentPanel.add(highlighterLabel);\n\t\t\n\t\tJCheckBox enableHighlightsCheck \u003d new JCheckBox(\"Enable Clue Highlights\");\n\t\tenableHighlightsCheck.setBackground(new Color(26, 26, 26));\n\t\tenableHighlightsCheck.setForeground(Color.WHITE);\n\t\tenableHighlightsCheck.setSelected(getBooleanConfig(\"clueHighlights\", true));\n\t\tenableHighlightsCheck.addActionListener(e -\u003e \n\t\t\tconfigManager.setConfiguration(\"cluejuggler\", \"clueHighlights\", enableHighlightsCheck.isSelected()));\n\t\tcontentPanel.add(enableHighlightsCheck);\n\t\t\n\t\tcontentPanel.add(Box.createVerticalStrut(10));\n\t\t\n\t\tColorPickerRow goodTileColor \u003d new ColorPickerRow(\"Good Tile Color\", \"Color for good clue tiles\", \n\t\t\tgetColorConfig(\"goodClueTileColor\", new Color(0, 255, 0, 100)),\n\t\t\tcolor -\u003e setColorConfig(\"goodClueTileColor\", color));\n\t\tcontentPanel.add(goodTileColor);\n\t\t\n\t\tColorPickerRow badTileColor \u003d new ColorPickerRow(\"Bad Tile Color\", \"Color for bad clue tiles\", \n\t\t\tgetColorConfig(\"badClueTileColor\", new Color(255, 0, 0, 100)),\n\t\t\tcolor -\u003e setColorConfig(\"badClueTileColor\", color));\n\t\tcontentPanel.add(badTileColor);\n\t\t\n\t\tColorPickerRow unsureTileColor \u003d new ColorPickerRow(\"Unsure Tile Color\", \"Color for unsure clue tiles\", \n\t\t\tgetColorConfig(\"unsureClueTileColor\", new Color(255, 255, 0, 100)),\n\t\t\tcolor -\u003e setColorConfig(\"unsureClueTileColor\", color));\n\t\tcontentPanel.add(unsureTileColor);\n\t\t\n\t\tcontentPanel.add(Box.createVerticalStrut(10));\n\t\t\n\t\tColorPickerRow goodTextColor \u003d new ColorPickerRow(\"Good Text Color\", \"Color for good clue text\", \n\t\t\tgetColorConfig(\"goodClueTextColor\", Color.GREEN),\n\t\t\tcolor -\u003e setColorConfig(\"goodClueTextColor\", color));\n\t\tcontentPanel.add(goodTextColor);\n\t\t\n\t\tColorPickerRow badTextColor \u003d new ColorPickerRow(\"Bad Text Color\", \"Color for bad clue text\", \n\t\t\tgetColorConfig(\"badClueTextColor\", Color.RED),\n\t\t\tcolor -\u003e setColorConfig(\"badClueTextColor\", color));\n\t\tcontentPanel.add(badTextColor);\n\t\t\n\t\tColorPickerRow unsureTextColor \u003d new ColorPickerRow(\"Unsure Text Color\", \"Color for unsure clue text\", \n\t\t\tgetColorConfig(\"unsureClueTextColor\", Color.YELLOW),\n\t\t\tcolor -\u003e setColorConfig(\"unsureClueTextColor\", color));\n\t\tcontentPanel.add(unsureTextColor);\n\t\t\n\t\tList\u003cClueList\u003e customLists \u003d listService.getCustomLists();\n\t\tif (!customLists.isEmpty())\n\t\t{\n\t\t\tcontentPanel.add(Box.createVerticalStrut(20));\n\t\t\t\n\t\t\tJLabel customListsLabel \u003d new JLabel(\"Custom Lists\");\n\t\t\tcustomListsLabel.setFont(new Font(customListsLabel.getFont().getName(), Font.BOLD, 14));\n\t\t\tcustomListsLabel.setForeground(Color.WHITE);\n\t\t\tcustomListsLabel.setBorder(new EmptyBorder(0, 0, 10, 0));\n\t\t\tcontentPanel.add(customListsLabel);\n\t\t\t\n\t\t\tfor (ClueList list : customLists)\n\t\t\t{\n\t\t\t\tJLabel listNameLabel \u003d new JLabel(list.getName());\n\t\t\t\tlistNameLabel.setForeground(list.getTextColor());\n\t\t\t\tlistNameLabel.setBorder(new EmptyBorder(5, 0, 5, 0));\n\t\t\t\tcontentPanel.add(listNameLabel);\n\t\t\t\t\n\t\t\t\tColorPickerRow listTileColor \u003d new ColorPickerRow(\"Tile Color\", \"Tile color for \" + list.getName(), \n\t\t\t\t\tlist.getTileColor(),\n\t\t\t\t\tcolor -\u003e {\n\t\t\t\t\t\tlist.setTileColor(color);\n\t\t\t\t\t\tlistService.saveCustomLists();\n\t\t\t\t\t});\n\t\t\t\tcontentPanel.add(listTileColor);\n\t\t\t\t\n\t\t\t\tColorPickerRow listTextColor \u003d new ColorPickerRow(\"Text Color\", \"Text color for \" + list.getName(), \n\t\t\t\t\tlist.getTextColor(),\n\t\t\t\t\tcolor -\u003e {\n\t\t\t\t\t\tlist.setTextColor(color);\n\t\t\t\t\t\tlist.setOverlayTextColor(color);\n\t\t\t\t\t\tlistService.saveCustomLists();\n\t\t\t\t\t});\n\t\t\t\tcontentPanel.add(listTextColor);\n\t\t\t}\n\t\t}\n\t\t\n\t\tcontentPanel.revalidate();\n\t\tcontentPanel.repaint();\n\t}\n\t\n\tprivate boolean getBooleanConfig(String key, boolean defaultValue)\n\t{\n\t\tString value \u003d configManager.getConfiguration(\"cluejuggler\", key);\n\t\tif (value \u003d\u003d null)\n\t\t{\n\t\t\treturn defaultValue;\n\t\t}\n\t\treturn Boolean.parseBoolean(value);\n\t}\n\t\n\tprivate Color getColorConfig(String key, Color defaultValue)\n\t{\n\t\tString value \u003d configManager.getConfiguration(\"cluejuggler\", key);\n\t\tif (value \u003d\u003d null)\n\t\t{\n\t\t\treturn defaultValue;\n\t\t}\n\t\ttry\n\t\t{\n\t\t\treturn Color.decode(value);\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\treturn defaultValue;\n\t\t}\n\t}\n\t\n\tprivate void setColorConfig(String key, Color color)\n\t{\n\t\tString value \u003d String.format(\"#%02x%02x%02x\", color.getRed(), color.getGreen(), color.getBlue());\n\t\tconfigManager.setConfiguration(\"cluejuggler\", key, value);\n\t}\n}\n\n","filePath":"src\\main\\java\\com\\cluejuggler\\ui\\view\\SettingsView.java"},{"fileName":"ClueJugglerPluginTest.java","content":"package com.cluejuggler;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ClueJugglerPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(ClueJugglerPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}\n\n","filePath":"src\\test\\java\\com\\cluejuggler\\ClueJugglerPluginTest.java"}]},{"commit":"5107bb355d7d267bd8ef39e74af16a1340bb315e","repository":"https://github.com/poi56iop/easy-arceuus-runecrafting.git","internalName":"easy-arceuus-runecrafting","files":[{"fileName":"EasyArceuusRunecraftingConfig.java","content":"package com.foo;\n\nimport java.awt.Color;\n\nimport net.runelite.client.config.*;\n\n\n@ConfigGroup(\"easyarceuusrunecrafting\")\npublic interface EasyArceuusRunecraftingConfig extends Config\n{\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Highlight Next Action\",\n\t\t\tdescription \u003d \"Highlight the clickbox of the next thing to click.\",\n\t\t\tposition \u003d 3\n\t)\n\tString sectionAction \u003d \"action\";\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Idle Screen Tint\",\n\t\t\tdescription \u003d \"Tint the whole screen when idle.\",\n\t\t\tposition \u003d 4\n\t)\n\tString sectionIdleTint \u003d \"idleTint\";\n\t@ConfigSection(\n\t\t\tname \u003d \"Active Screen Tint\",\n\t\t\tdescription \u003d \"Tint the whole screen when active.\",\n\t\t\tposition \u003d 5,\n\t\t\tclosedByDefault \u003d true\n\t)\n\tString sectionActiveTint \u003d \"activeTint\";\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"whichRunes\",\n\t\t\tname \u003d \"Enabled\",\n\t\t\tdescription \u003d \"Highlight the clickbox of the next thing to click.\",\n\t\t\tposition \u003d 1\n\t)\n\tdefault RuneType whichRunes()\n\t{\n\t\treturn RuneType.BLOOD;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"suggestRun\",\n\t\t\tname \u003d \"Suggest Enabling Run\",\n\t\t\tdescription \u003d \"Highlight the Run Minimap Orb when run is off and energy is over 50.\",\n\t\t\tposition \u003d 2\n\t)\n\tdefault boolean suggestRun()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"actionEnabled\",\n\t\t\tname \u003d \"Enabled\",\n\t\t\tdescription \u003d \"Highlight the clickbox of the next thing to click.\",\n\t\t\tsection \u003d sectionAction,\n\t\t\tposition \u003d 1\n\t)\n\tdefault boolean actionEnabled()\n\t{\n\t\treturn true;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"actionColor\",\n\t\t\tname \u003d \"Color\",\n\t\t\tdescription \u003d \"Color used.\",\n\t\t\tsection \u003d sectionAction,\n\t\t\tposition \u003d 2\n\t)\n\tdefault Color actionColor()\n\t{\n\t\treturn new Color(Color.YELLOW.getRed(),Color.YELLOW.getGreen(),Color.YELLOW.getBlue(), 128);\n\t}\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"actionFlash\",\n\t\t\tname \u003d \"Flashing\",\n\t\t\tdescription \u003d \"Flash between two colors.\",\n\t\t\tsection \u003d sectionAction,\n\t\t\tposition \u003d 3\n\t)\n\tdefault boolean actionFlash()\n\t{\n\t\treturn true;\n\t}\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"actionColor2\",\n\t\t\tname \u003d \"Color 2\",\n\t\t\tdescription \u003d \"Second color used when flashing.\",\n\t\t\tsection \u003d sectionAction,\n\t\t\tposition \u003d 4\n\t)\n\tdefault Color actionColor2()\n\t{\n\t\treturn new Color(Color.CYAN.getRed(),Color.CYAN.getGreen(),Color.CYAN.getBlue(), 128);\n\t}\n\t@Range(min \u003d 1)\n\t@Units(value \u003d Units.MILLISECONDS)\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"actionColor1Time\",\n\t\t\tname \u003d \"Color 1 Time\",\n\t\t\tdescription \u003d \"Milliseconds to show color 1 when flashing.\",\n\t\t\tsection \u003d sectionAction,\n\t\t\tposition \u003d 5\n\t)\n\tdefault int actionColor1Time()\n\t{\n\t\treturn 100;\n\t}\n\t@Range(min \u003d 1)\n\t@Units(value \u003d Units.MILLISECONDS)\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"actionColor2Time\",\n\t\t\tname \u003d \"Color 2 Time\",\n\t\t\tdescription \u003d \"Milliseconds to show color 2 when flashing.\",\n\t\t\tsection \u003d sectionAction,\n\t\t\tposition \u003d 6\n\t)\n\tdefault int actionColor2Time()\n\t{\n\t\treturn 100;\n\t}\n//\t@Alpha\n//\t@ConfigItem( // TODO implement?\n//\t\t\tkeyName \u003d \"actionHoverColor\",\n//\t\t\tname \u003d \"Hover Color\",\n//\t\t\tdescription \u003d \"Color used for a hovered action\u0027s highlight.\",\n//\t\t\tsection \u003d sectionAction,\n//\t\t\tposition \u003d 7\n//\t)\n//\tdefault Color actionHoverColor()\n//\t{\n//\t\treturn new Color(Color.GREEN.getRed(),Color.GREEN.getGreen(),Color.GREEN.getBlue(), 128);\n//\t}\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"idleTint\",\n\t\t\tname \u003d \"Enabled\",\n\t\t\tdescription \u003d \"Tint the whole screen when idle.\",\n\t\t\tsection \u003d sectionIdleTint,\n\t\t\tposition \u003d 1\n\t)\n\tdefault boolean idleTint()\n\t{\n\t\treturn true;\n\t}\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"idleTintColor\",\n\t\t\tname \u003d \"Color\",\n\t\t\tdescription \u003d \"Color used.\",\n\t\t\tsection \u003d sectionIdleTint,\n\t\t\tposition \u003d 2\n\t)\n\tdefault Color idleTintColor()\n\t{\n\t\treturn new Color(Color.PINK.getRed(),Color.PINK.getGreen(),Color.PINK.getBlue(), 64);\n\t}\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"idleTintFlash\",\n\t\t\tname \u003d \"Flashing\",\n\t\t\tdescription \u003d \"Flash between two colors.\",\n\t\t\tsection \u003d sectionIdleTint,\n\t\t\tposition \u003d 3\n\t)\n\tdefault boolean idleTintFlash()\n\t{\n\t\treturn true;\n\t}\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"idleTintColor2\",\n\t\t\tname \u003d \"Color 2\",\n\t\t\tdescription \u003d \"Second color used when flashing.\",\n\t\t\tsection \u003d sectionIdleTint,\n\t\t\tposition \u003d 4\n\t)\n\tdefault Color idleTintColor2()\n\t{\n\t\treturn new Color(Color.BLACK.getRed(),Color.BLACK.getGreen(),Color.BLACK.getBlue(), 64);\n\t}\n\t@Range(min \u003d 1)\n\t@Units(value \u003d Units.MILLISECONDS)\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"idleTintColor1Time\",\n\t\t\tname \u003d \"Color 1 Time\",\n\t\t\tdescription \u003d \"Milliseconds to show color 1 when flashing.\",\n\t\t\tsection \u003d sectionIdleTint,\n\t\t\tposition \u003d 5\n\t)\n\tdefault int idleTintColor1Time()\n\t{\n\t\treturn 600;\n\t}\n\t@Range(min \u003d 1)\n\t@Units(value \u003d Units.MILLISECONDS)\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"idleTintColor2Time\",\n\t\t\tname \u003d \"Color 2 Time\",\n\t\t\tdescription \u003d \"Milliseconds to show color 2 when flashing.\",\n\t\t\tsection \u003d sectionIdleTint,\n\t\t\tposition \u003d 6\n\t)\n\tdefault int idleTintColor2Time()\n\t{\n\t\treturn 600;\n\t}\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"activeTint\",\n\t\t\tname \u003d \"Enabled\",\n\t\t\tdescription \u003d \"Tint the whole screen when active.\",\n\t\t\tsection \u003d sectionActiveTint,\n\t\t\tposition \u003d 1\n\t)\n\tdefault boolean activeTint()\n\t{\n\t\treturn false;\n\t}\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"activeTintColor\",\n\t\t\tname \u003d \"Color\",\n\t\t\tdescription \u003d \"Color used.\",\n\t\t\tsection \u003d sectionActiveTint,\n\t\t\tposition \u003d 2\n\t)\n\tdefault Color activeTintColor()\n\t{\n\t\treturn new Color(Color.GREEN.getRed(),Color.GREEN.getGreen(),Color.GREEN.getBlue(), 64);\n\t}\n}\n","filePath":"src\\main\\java\\com\\foo\\EasyArceuusRunecraftingConfig.java"},{"fileName":"EasyArceuusRunecraftingPlugin.java","content":"package com.foo;\n\nimport com.google.inject.Provides;\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.*;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetInfo;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\nimport javax.inject.Inject;\nimport java.awt.*;\nimport java.time.Duration;\nimport java.time.Instant;\nimport java.util.Arrays;\nimport java.util.HashSet;\nimport java.util.Set;\n\nimport static net.runelite.api.AnimationID.IDLE;\n\n// TODO instead of highlighting specific floor tiles, highlight some at the edge of the rendered range towards the goal location.\n// TODO highlight tiles on the way to soul altar etc.\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Easy Arceuus Runecrafting\"\n)\npublic class EasyArceuusRunecraftingPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate EasyArceuusRunecraftingConfig config;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate NextActionOverlay nextActionOverlay;\n\n\t@Inject\n\tprivate NextItemOverlay nextItemOverlay;\n\t@Inject\n\tprivate TintOverlay tintOverlay;\n\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate TileObject nextActionClick;\n\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate int nextItemClick;\n\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate int nextOtherClick; // TODO do this way better lol\n\n\tprivate Instant lastActive \u003d Instant.now();\n\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate boolean playerInArea;\n\n\tprivate boolean inventoryFull;\n\n\tprivate boolean heldEssenceDense;\n\n\tprivate boolean heldEssenceDark;\n\n\tprivate boolean heldEssenceFragments;\n\tprivate boolean heldOnlyInactiveBloodEssence;\n\tprivate boolean heldMaxEssenceFragments \u003d false; // TODO implement this. Doesn\u0027t use item quantity or bits that show up with the var inspector.\n\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate boolean idle \u003d true; // TODO make different levels of idle for different durations.\n\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate boolean disableTintForLevel \u003d false;\n\n\tprivate static final Set\u003cInteger\u003e chunks \u003d new HashSet\u003c\u003e(Arrays.asList(6460, 6716, 6972, 7228, 6715, 6971));\n\n\tprivate static final int RUNESTONE_SOUTH_ID \u003d NullObjectID.NULL_10796;\n\tprivate static final int RUNESTONE_NORTH_ID \u003d NullObjectID.NULL_8981;\n\n\tprivate TileObject runestoneSouth;\n\n\tprivate TileObject runestoneNorth;\n\n\tprivate TileObject altarDark;\n\n\tprivate TileObject altarBlood;\n\n\tprivate TileObject altarSoul;\n\n\tprivate TileObject shortcut73; // West of runestones. (Return from Blood Altar.)\n\n\tprivate TileObject shortcut69; // North of runestones. (Return to/from Dark Altar.)\n\n\tprivate TileObject shortcut52Inner; // East of runestones; Western half.\n\n\tprivate TileObject shortcut52Outer; // East of runestones; Eastern half.\n\n\tprivate TileObject shortcut49; // North of runestones, farther. (Return from Soul Altar.)\n\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\toverlayManager.add(nextActionOverlay);\n\t\toverlayManager.add(nextItemOverlay);\n\t\toverlayManager.add(tintOverlay);\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif (event.getGroup().equals(\"easyarceuusrunecrafting\"))\n\t\t{\n\t\t\t// TODO add constraints to flash times?\n\t\t}\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(nextActionOverlay);\n\t\toverlayManager.remove(nextItemOverlay);\n\t\toverlayManager.remove(tintOverlay);\n\t\trunestoneNorth \u003d null;\n\t\trunestoneSouth \u003d null;\n\t\taltarDark \u003d null;\n\t\taltarBlood \u003d null;\n\t\taltarSoul \u003d null;\n\t\tshortcut73 \u003d null;\n\t\tshortcut69 \u003d null;\n\t\tshortcut52Outer \u003d null;\n\t\tshortcut52Inner \u003d null;\n\t\tshortcut49 \u003d null;\n\t\tnextItemClick \u003d -2;\n\t\tnextOtherClick \u003d 0;\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged event)\n\t{\n\t\tGameState gameState \u003d event.getGameState();\n\t\tswitch (gameState)\n\t\t{\n\t\t\tcase LOADING:\n\t\t\t\trunestoneNorth \u003d null;\n\t\t\t\trunestoneSouth \u003d null;\n\t\t\t\taltarDark \u003d null;\n\t\t\t\taltarBlood \u003d null;\n\t\t\t\taltarSoul \u003d null;\n\t\t\t\tshortcut73 \u003d null;\n\t\t\t\tshortcut69 \u003d null;\n\t\t\t\tshortcut52Outer \u003d null;\n\t\t\t\tshortcut52Inner \u003d null;\n\t\t\t\tshortcut49 \u003d null;\n\t\t\t\tnextActionClick \u003d null;\n\t\t\t\tbreak;\n\t\t\tcase CONNECTION_LOST:\n\t\t\tcase HOPPING:\n\t\t\tcase LOGIN_SCREEN:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t@Provides\n\tEasyArceuusRunecraftingConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(EasyArceuusRunecraftingConfig.class);\n\t}\n\n\t@Subscribe\n\tpublic void onItemContainerChanged(ItemContainerChanged event)\n\t{\n\t\tif (!playerInArea) {return;}\n\t\t// TODO need to run this on plugin start too?\n\t\tif (event.getItemContainer() \u003d\u003d client.getItemContainer(InventoryID.INVENTORY))\n\t\t{\n\t\t\tItem[] items \u003d event.getItemContainer().getItems();\n\t\t\tif (client.getWidget(WidgetInfo.BANK_CONTAINER) \u003d\u003d null)\n\t\t\t{\n\t\t\t\tboolean hasEssenceDense \u003d false;\n\t\t\t\tboolean hasEssenceDark \u003d false;\n\t\t\t\tboolean hasEssenceFragments \u003d false;\n\t\t\t\tboolean hasBloodEssenceInactive \u003d false;\n\t\t\t\tboolean hasBloodEssenceActive \u003d false;\n\t\t\t\tboolean hasSpace \u003d false;\n\n\t\t\t\tfor (Item i : items) {\n\t\t\t\t\tswitch (i.getId()) {\n\t\t\t\t\t\tcase ItemID.DENSE_ESSENCE_BLOCK:\n\t\t\t\t\t\t\thasEssenceDense \u003d true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase ItemID.DARK_ESSENCE_BLOCK:\n\t\t\t\t\t\t\thasEssenceDark \u003d true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase ItemID.DARK_ESSENCE_FRAGMENTS:\n\t\t\t\t\t\t\thasEssenceFragments \u003d true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase ItemID.BLOOD_ESSENCE:\n\t\t\t\t\t\t\thasBloodEssenceInactive \u003d true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase ItemID.BLOOD_ESSENCE_ACTIVE:\n\t\t\t\t\t\t\thasBloodEssenceActive \u003d true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase -1:\n\t\t\t\t\t\t\thasSpace \u003d true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\theldEssenceDense \u003d hasEssenceDense;\n\t\t\t\theldEssenceDark \u003d hasEssenceDark;\n\t\t\t\theldEssenceFragments \u003d hasEssenceFragments;\n\t\t\t\theldOnlyInactiveBloodEssence \u003d (hasBloodEssenceInactive \u0026\u0026 !hasBloodEssenceActive);\n\t\t\t\tinventoryFull \u003d !hasSpace;\n\n\t\t\t\tif (items.length \u003c 28) {hasSpace \u003d true;} // NOTE: this can happen after logging in when there\u0027s nothing in the last inventory slot.\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameObjectSpawned(GameObjectSpawned event)\n\t{\n\t\tonTileObject(null, event.getGameObject());\n\t}\n\n\t@Subscribe\n\tpublic void onGameObjectDespawned(GameObjectDespawned event)\n\t{\n\t\tonTileObject(event.getGameObject(), null);\n\t}\n\n\t@Subscribe\n\tpublic void onGroundObjectSpawned(GroundObjectSpawned event)\n\t{\n\t\tonTileObject(null, event.getGroundObject());\n\t}\n\n\t@Subscribe\n\tpublic void onGroundObjectDespawned(GroundObjectDespawned event)\n\t{\n\t\tonTileObject(event.getGroundObject(), null);\n\t}\n\n\t@Subscribe\n\tpublic void onWallObjectSpawned(WallObjectSpawned event)\n\t{\n\t\tonTileObject(null, event.getWallObject());\n\t}\n\n\t@Subscribe\n\tpublic void onWallObjectDespawned(WallObjectDespawned event)\n\t{\n\t\tonTileObject(event.getWallObject(), null);\n\t}\n\n\t@Subscribe\n\tpublic void onDecorativeObjectSpawned(DecorativeObjectSpawned event)\n\t{\n\t\tonTileObject(null, event.getDecorativeObject());\n\t}\n\n\t@Subscribe\n\tpublic void onDecorativeObjectDespawned(DecorativeObjectDespawned event)\n\t{\n\t\tonTileObject(event.getDecorativeObject(), null);\n\t}\n\n\tprivate void onTileObject(TileObject oldObject, TileObject newObject)\n\t{\n\t\tif (!playerInArea) {return;}\n\t\tint id;\n\t\tif (oldObject \u003d\u003d null) {\n\t\t\tid \u003d newObject.getId();\n\t\t} else {\n\t\t\tid \u003d oldObject.getId();\n\t\t}\n\n\t\tswitch (id)\n\t\t{\n\t\t\tcase RUNESTONE_SOUTH_ID:\n\t\t\t\trunestoneSouth \u003d newObject;\n\t\t\t\tbreak;\n\t\t\tcase RUNESTONE_NORTH_ID:\n\t\t\t\trunestoneNorth \u003d newObject;\n\t\t\t\tbreak;\n\t\t\tcase ObjectID.DARK_ALTAR:\n\t\t\t\taltarDark \u003d newObject;\n\t\t\t\tbreak;\n\t\t\tcase ObjectID.BLOOD_ALTAR:\n\t\t\t\taltarBlood \u003d newObject;\n\t\t\t\tbreak;\n\t\t\tcase ObjectID.SOUL_ALTAR:\n\t\t\t\taltarSoul \u003d newObject;\n\t\t\t\tbreak;\n\t\t\tcase ObjectID.ROCKS_27984:\n\t\t\t\tshortcut73 \u003d newObject;\n\t\t\t\tbreak;\n\t\t\tcase ObjectID.ROCKS_34741:\n\t\t\t\tshortcut69 \u003d newObject;\n\t\t\t\tbreak;\n\t\t\tcase ObjectID.ROCKS_27987:\n\t\t\t\tshortcut52Outer \u003d newObject;\n\t\t\t\tbreak;\n\t\t\tcase ObjectID.ROCKS_27988:\n\t\t\t\tshortcut52Inner \u003d newObject;\n\t\t\t\tbreak;\n\t\t\tcase ObjectID.BOULDER_27990:\n\t\t\t\tshortcut49 \u003d newObject;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\n\n\t@Subscribe\n\tpublic void onClientTick(ClientTick tick) {\n\t\tif (!playerInArea) {return;}\n\t\tPlayer localPlayer \u003d client.getLocalPlayer();\n\t\tint idlePose \u003d localPlayer.getIdlePoseAnimation();\n\t\tint pose \u003d localPlayer.getPoseAnimation();\n\t\tint animation \u003d localPlayer.getAnimation();\n\n\t\tif (!(animation \u003d\u003d IDLE \u0026\u0026 pose \u003d\u003d idlePose)) {\n\t\t\tlastActive \u003d Instant.now();\n\t\t\tidle \u003d false;\n\t\t\treturn;\n\t\t}\n\n\t\tfinal Duration alarmDelay \u003d Duration.ofMillis(300);\n\n\t\tif (Instant.now().compareTo(lastActive.plus(alarmDelay)) \u003e\u003d 0) {\n\t\t\tidle \u003d true;\n\t\t} else {\n\t\t\tidle \u003d false; // TODO needed?\n\t\t}\n\t}\n\t@Subscribe\n\tpublic void onGameTick(GameTick event)\n\t{\n\t\tif (checkPlayerInArea()) {\n\t\t\tdisableTintForLevel \u003d (client.getWidget(WidgetInfo.LEVEL_UP_LEVEL) !\u003d null);\n\t\t\tfindNextAction();\n\t\t}\n\t}\n\n\tprivate boolean checkPlayerInArea() {\n\t\tplayerInArea \u003d chunks.contains(client.getLocalPlayer().getWorldLocation().getRegionID());\n\t\treturn playerInArea;\n\t}\n\n\tprivate void findNextAction() {\n\t\tnextItemClick \u003d -2;\n\t\tnextOtherClick \u003d 0;\n\t\tnextActionClick \u003d null;\n\n\t\tif (!idle) {\n\t\t\treturn;\n\t\t}\n\n\t\tWorldPoint ploc \u003d client.getLocalPlayer().getWorldLocation();\n\n\t\tboolean runEnabled \u003d client.getVarpValue(173)\u003d\u003d1;\n\t\tif (!runEnabled) {\n\t\t\tif (config.suggestRun()) {\n\t\t\t\tif (client.getEnergy() \u003e 50*100) {\n\t\t\t\t\tif (client.getWidget(WidgetInfo.MINIMAP_TOGGLE_RUN_ORB) !\u003d null) {\n\t\t\t\t\t\tnextOtherClick \u003d 3;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (heldOnlyInactiveBloodEssence) {\n\t\t\tnextItemClick \u003d ItemID.BLOOD_ESSENCE;\n\t\t\treturn;\n\t\t}\n\n\t\tif (inventoryFull) {\n\t\t\tif (heldEssenceDense) {\n\t\t\t\tnextDarkAltar(ploc);\n\t\t\t} else if (heldEssenceDark) {\n\t\t\t\tif (heldEssenceFragments) {\n\t\t\t\t\tnextRuneAltar(ploc);\n\t\t\t\t} else {\n\t\t\t\t\tnextChiseling();\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (heldEssenceDark) {\n\t\t\t\tif (heldMaxEssenceFragments) {\n\t\t\t\t\tnextRuneAltar(ploc);\n\t\t\t\t} else {\n\t\t\t\t\tnextChiseling();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (heldEssenceFragments \u0026\u0026 playerNearbyTo(ploc, altarChosen(), 15)) {\n\t\t\t\t\tnextActionClick \u003d altarChosen();\n\t\t\t\t} else {\n\t\t\t\t\tnextMining(ploc);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate TileObject altarChosen() {\n\t\tif (config.whichRunes().isBlood()) {\n\t\t\treturn altarBlood;\n\t\t}\n\t\treturn altarSoul;\n\t}\n\n\tprivate boolean playerNearbyTo(WorldPoint ploc, TileObject object, int maxDistance) {\n\t\tif (object \u003d\u003d null) {return false;}\n\t\treturn ploc.distanceTo(object.getWorldLocation()) \u003c\u003d maxDistance;\n\t}\n\n\tprivate void nextChiseling() {\n\t\tWidget selected \u003d client.getSelectedWidget();\n\t\tint id \u003d (selected \u003d\u003d null) ? 0 : selected.getItemId();\n\t\tswitch (id) {\n\t\t\tcase ItemID.CHISEL:\n\t\t\t\tnextItemClick \u003d ItemID.DARK_ESSENCE_BLOCK;\n\t\t\t\tbreak;\n\t\t\tcase ItemID.DARK_ESSENCE_BLOCK:\n\t\t\tdefault:\n\t\t\t\tnextItemClick \u003d ItemID.CHISEL;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprivate void nextDarkAltar(WorldPoint ploc) {\n\t\tif ((ploc.getX()\u003c1753 \u0026\u0026 ploc.getY()\u003e3867) || (ploc.getX()\u003c1770 \u0026\u0026 ploc.getY()\u003e3872)) {\n\t\t\tnextActionClick \u003d altarDark;\n\t\t} else {\n\t\t\tif (client.getBoostedSkillLevel(Skill.AGILITY)\u003e\u003d69) {\n\t\t\t\tnextActionClick \u003d shortcut69;\n\t\t\t} else if (client.getBoostedSkillLevel(Skill.AGILITY)\u003e\u003d52 \u0026\u0026 ploc.getX()\u003c1770) {\n\t\t\t\tnextActionClick \u003d shortcut52Inner;\n\t\t\t} else {\n\t\t\t\tnextOtherClick \u003d 2;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void nextRuneAltar(WorldPoint ploc) {\n\t\t// TODO setup shortcuts and souls?\n\t\tif (config.whichRunes().isBlood()) {\n\t\t\tif ((ploc.getX()\u003c1720 || ploc.getY()\u003e3867) \u0026\u0026 !(ploc.getY()\u003c3836)) {\n\t\t\t\tnextOtherClick \u003d 1;\n\t\t\t} else {\n\t\t\t\tnextActionClick \u003d altarBlood;\n\t\t\t}\n\t\t} else {\n\t\t\tnextActionClick \u003d altarSoul;\n\t\t}\n\t}\n\n\tprivate void nextMining(WorldPoint ploc) {\n\t\tif (ploc.getX()\u003c1743 \u0026\u0026 ploc.getY()\u003c3860) {\n\t\t\t//returning from blood altar\n\t\t\tif (client.getBoostedSkillLevel(Skill.AGILITY)\u003e\u003d73) {\n\t\t\t\tnextActionClick \u003d shortcut73;\n\t\t\t} else {\n\t\t\t\tnextOtherClick \u003d 2;\n\t\t\t}\n\t\t} else if (ploc.getX()\u003e1789 || (ploc.getY()\u003e3883)) {\n\t\t\t// returning from soul altar\n\t\t\tnextActionClick \u003d shortcut49; // TODO handle those who can\u0027t use these shortcuts.\n\t\t} else if ((ploc.getX()\u003c1753 \u0026\u0026 ploc.getY()\u003e3867) || (ploc.getX()\u003c1768 \u0026\u0026 ploc.getY()\u003e3872)) {\n\t\t\t//returning from dark altar\n\t\t\tif (ploc.getX()\u003c1740) {\n\t\t\t\tnextOtherClick \u003d 2;\n\t\t\t} else {\n\t\t\t\tif (client.getBoostedSkillLevel(Skill.AGILITY)\u003e\u003d69) {\n\t\t\t\t\tnextActionClick \u003d shortcut69;\n\t\t\t\t} else if (client.getBoostedSkillLevel(Skill.AGILITY)\u003e\u003d52) {\n\t\t\t\t\t// TODO stopping halfway along this path will highlight the runestones before taking the shortcut.\n\t\t\t\t\tnextActionClick \u003d shortcut52Outer;\n\t\t\t\t} else {\n\t\t\t\t\tchooseRunestone(ploc);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tchooseRunestone(ploc);\n\t\t}\n\t}\n\n\tprivate void chooseRunestone(WorldPoint ploc) {\n\t\tboolean runestoneNorthDense \u003d client.getVarbitValue(4927) \u003d\u003d 0;\n\t\tboolean runestoneSouthDense \u003d client.getVarbitValue(4928) \u003d\u003d 0;\n\t\tif (runestoneNorthDense \u0026\u0026 runestoneSouthDense) {\n\t\t\tif (playerNearbyTo(ploc, runestoneNorth, 4)) {\n\t\t\t\tnextActionClick \u003d runestoneNorth;\n\t\t\t} else {\n\t\t\t\tnextActionClick \u003d runestoneSouth;\n\t\t\t}\n\t\t} else if (runestoneSouthDense) {\n\t\t\tnextActionClick \u003d runestoneSouth;\n\t\t} else if (runestoneNorthDense) {\n\t\t\tnextActionClick \u003d runestoneNorth;\n\t\t}\n\t}\n\n\tpublic Color currentHighlightColor() {\n\t\tif (config.actionFlash()) {\n\t\t\tint ms_in_cycle \u003d (int) (System.currentTimeMillis() % (config.actionColor1Time() + config.actionColor2Time()));\n\t\t\tif (ms_in_cycle \u003e\u003d config.actionColor1Time()) {\n\t\t\t\treturn config.actionColor2();\n\t\t\t}\n\t\t}\n\t\treturn config.actionColor();\n\t}\n\n\tpublic Color currentidleTintColor() {\n\t\tif (config.idleTintFlash()) {\n\t\t\tint ms_in_cycle \u003d (int) (System.currentTimeMillis() % (config.idleTintColor1Time() + config.idleTintColor2Time()));\n\t\t\tif (ms_in_cycle \u003e\u003d config.idleTintColor1Time()) {\n\t\t\t\treturn config.idleTintColor2();\n\t\t\t}\n\t\t}\n\t\treturn config.idleTintColor();\n\t}\n}\n","filePath":"src\\main\\java\\com\\foo\\EasyArceuusRunecraftingPlugin.java"},{"fileName":"NextActionOverlay.java","content":"package com.foo;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Point;\nimport net.runelite.api.TileObject;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetInfo;\nimport net.runelite.client.ui.overlay.*;\n\nimport javax.inject.Inject;\nimport java.awt.*;\n\n@Slf4j\npublic class NextActionOverlay extends Overlay {\n    private final Client client;\n    private final EasyArceuusRunecraftingPlugin plugin;\n    private final EasyArceuusRunecraftingConfig config;\n\n    @Inject\n    private NextActionOverlay(\n            Client client, EasyArceuusRunecraftingPlugin plugin, EasyArceuusRunecraftingConfig config)\n    {\n        this.client \u003d client;\n        this.plugin \u003d plugin;\n        this.config \u003d config;\n\n        setPosition(OverlayPosition.DYNAMIC);\n        setPriority(OverlayPriority.HIGH);\n        setLayer(OverlayLayer.ALWAYS_ON_TOP);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics)\n    {\n        if (!plugin.isPlayerInArea()) {return null;}\n        switch (plugin.getNextOtherClick()) {\n            case 1: // between dark altar and blood altar\n                highlightWorldPoints(graphics, 1720, 3854, 5, 5);\n                break;\n            case 2: // between dark altar and essence\n                highlightWorldPoints(graphics, 1751, 3873, 5, 5);\n                break;\n            case 3:\n                Widget runOrb \u003d client.getWidget(WidgetInfo.MINIMAP_TOGGLE_RUN_ORB);\n                if (runOrb !\u003d null) {\n                    OverlayUtil.renderPolygon(graphics, runOrb.getBounds(), plugin.currentHighlightColor(), plugin.currentHighlightColor(), new BasicStroke());\n                }\n                break;\n            case 4: // first segment from dark altar to soul altar\n                highlightWorldPoints(graphics, 1764, 3895, 4, 4);\n                break;\n            case 5: // second segment from dark altar to soul altar\n                highlightWorldPoints(graphics, 1808, 3890, 4, 4);\n                break;\n            case 6: // third segment from dark altar to soul altar\n                highlightWorldPoints(graphics, 1826, 3874, 4, 4);\n                break;\n            default:\n                renderNextAction(graphics, plugin.getNextActionClick());\n                break;\n        }\n        return null;\n    }\n\n    private void highlightWorldPoints(Graphics2D graphics, int SWX, int SWY, int w, int h) {\n        WorldPoint ploc \u003d client.getLocalPlayer().getWorldLocation(); // How else can I make these?\n        WorldPoint origin \u003d ploc.dx(-1 * ploc.getX()).dy(-1 * ploc.getY()); // How else can I make these?\n        WorldPoint SWP \u003d origin.dx(SWX).dy(SWY); // How else can I make these?\n\n        int dx \u003d 0;\n        while (dx \u003c w) {\n            int dy \u003d 0;\n            while (dy \u003c h) {\n                highlightWorldPoint(graphics, SWP.dx(dx).dy(dy));\n                dy+\u003d1;\n            }\n            dx+\u003d1;\n        }\n    }\n\n    private void highlightWorldPoint(Graphics2D graphics, WorldPoint wp) {\n        final LocalPoint lp \u003d LocalPoint.fromWorld(client, wp);\n        if (lp \u003d\u003d null) {return;}\n        final Polygon poly \u003d Perspective.getCanvasTilePoly(client, lp);\n        if (poly \u003d\u003d null) {return;}\n        Color color \u003d plugin.currentHighlightColor();\n        OverlayUtil.renderPolygon(graphics, poly, color, color, new BasicStroke((float) 1));\n    }\n\n    private void renderNextAction(Graphics2D graphics, TileObject tileObject)\n    {\n        if (tileObject !\u003d null) {\n            if (config.actionEnabled()) {\n                Shape clickbox \u003d tileObject.getClickbox();\n                Point mousePosition \u003d client.getMouseCanvasPosition();\n                Color color \u003d plugin.currentHighlightColor();\n                OverlayUtil.renderHoverableArea(graphics, clickbox, mousePosition, color, color, color);\n            }\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\foo\\NextActionOverlay.java"},{"fileName":"NextItemOverlay.java","content":"package com.foo;\n\n\nimport com.google.inject.Inject;\nimport net.runelite.api.widgets.WidgetItem;\nimport net.runelite.client.ui.overlay.WidgetItemOverlay;\n\nimport java.awt.*;\n\npublic class NextItemOverlay extends WidgetItemOverlay {\n    private final EasyArceuusRunecraftingPlugin plugin;\n    private final EasyArceuusRunecraftingConfig config;\n\n    @Inject\n    NextItemOverlay(EasyArceuusRunecraftingPlugin plugin, EasyArceuusRunecraftingConfig config)\n    {\n        this.config \u003d config;\n        this.plugin \u003d plugin;\n        showOnInventory();\n    }\n\n    @Override\n    public void renderItemOverlay(Graphics2D graphics, int itemId, WidgetItem widgetItem)\n    {\n        if (!plugin.isPlayerInArea()) {return;}\n        if (itemId \u003d\u003d plugin.getNextItemClick()) {\n            highlightItem(graphics, widgetItem);\n        }\n    }\n\n    private void highlightItem(Graphics2D graphics, WidgetItem widgetItem)\n    {\n        Rectangle bounds \u003d widgetItem.getCanvasBounds();\n        graphics.setColor(plugin.currentHighlightColor());\n        graphics.fillRect((int) bounds.getX(), (int) bounds.getY(), (int) bounds.getWidth(), (int) bounds.getHeight());\n    }\n}\n","filePath":"src\\main\\java\\com\\foo\\NextItemOverlay.java"},{"fileName":"RuneType.java","content":"package com.foo;\n\nimport java.util.Objects;\n\npublic enum RuneType {\n    BLOOD(\"Blood\"),\n    SOUL(\"Soul\"),\n\n    ;\n\n    final String name;\n\n    RuneType(String name) {\n        this.name \u003d name;\n    }\n\n    public String toString() {\n        return this.name;\n    }\n\n    public boolean isBlood() {\n        return (Objects.equals(this.name, \"Blood\"));\n    }\n\n    public boolean isSoul() {\n        return (Objects.equals(this.name, \"Soul\"));\n    }\n}\n","filePath":"src\\main\\java\\com\\foo\\RuneType.java"},{"fileName":"TintOverlay.java","content":"package com.foo;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.widgets.WidgetInfo;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\n\nimport javax.inject.Inject;\nimport java.awt.*;\n\n@Slf4j\npublic class TintOverlay extends OverlayPanel {\n    private final Client client;\n    private final EasyArceuusRunecraftingPlugin plugin;\n    private final EasyArceuusRunecraftingConfig config;\n\n\n    @Inject\n    private TintOverlay(\n            Client client, EasyArceuusRunecraftingPlugin plugin, EasyArceuusRunecraftingConfig config)\n    {\n        this.client \u003d client;\n        this.plugin \u003d plugin;\n        this.config \u003d config;\n\n        setPosition(OverlayPosition.DYNAMIC);\n        setPriority(OverlayPriority.LOW);\n        setLayer(OverlayLayer.MANUAL);\n        drawAfterLayer(WidgetInfo.INVENTORY);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics)\n    {\n        if (!plugin.isPlayerInArea()) {return null;}\n        if (plugin.isIdle()) {\n            if (config.idleTint()) {\n                tintWithColor(graphics, plugin.currentidleTintColor());\n            }\n        } else {\n            if (config.activeTint()) {\n                tintWithColor(graphics, config.activeTintColor());\n            }\n        }\n        return null;\n    }\n\n    private void tintWithColor(Graphics2D graphics, Color color) {\n        if (plugin.isDisableTintForLevel()) {return;}\n        graphics.setColor(color);\n        graphics.fillRect(0, 0, client.getCanvasWidth(), client.getCanvasHeight());\n    }\n\n}\n","filePath":"src\\main\\java\\com\\foo\\TintOverlay.java"},{"fileName":"EasyArceuusRunecraftingPluginTest.java","content":"package com.foo;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class EasyArceuusRunecraftingPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(EasyArceuusRunecraftingPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\foo\\EasyArceuusRunecraftingPluginTest.java"}]},{"commit":"9e0b9e4a0aa5f9224378f32a3e6683f51c20003d","repository":"https://github.com/UmaLPZ/OSRS-Flipper-2.git","internalName":"flipper","files":[{"fileName":"BuysController.java","content":"package com.flipper2.controllers;\n\nimport java.io.IOException;\n\nimport com.flipper2.FlipperConfig;\nimport com.flipper2.helpers.Persistor;\n\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.game.ItemManager;\n\npublic class BuysController extends TransactionController\n{\n\n\n\tpublic BuysController(ItemManager itemManager, FlipperConfig config, ClientThread clientThread) throws IOException\n\t{\n\t\tsuper(\"Buy\", itemManager, config.isPromptDeleteBuy(), clientThread);\n\t}\n\n\n\t@Override\n\tpublic void loadTransactions() throws IOException\n\t{\n\t\tthis.transactions \u003d Persistor.loadBuys();\n\t\tthis.filteredTransactions \u003d this.transactions;\n\t\tthis.buildView();\n\t}\n\n\t@Override\n\tpublic void saveTransactions()\n\t{\n\t\tPersistor.saveBuys(this.transactions);\n\t}\n}","filePath":"src\\main\\java\\com\\flipper2\\controllers\\BuysController.java"},{"fileName":"FlipsController.java","content":"package com.flipper2.controllers;\n\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.ListIterator;\nimport java.util.UUID;\nimport java.util.function.Consumer;\n\nimport javax.swing.SwingUtilities;\n\nimport com.flipper2.helpers.GrandExchange;\nimport com.flipper2.helpers.Log;\nimport com.flipper2.helpers.Persistor;\nimport com.flipper2.helpers.UiUtilities;\nimport com.flipper2.models.Flip;\nimport com.flipper2.models.Transaction;\nimport com.flipper2.views.components.Pagination;\nimport com.flipper2.views.flips.FlipPage;\nimport com.flipper2.views.flips.FlipPanel;\nimport com.flipper2.FlipperConfig;\n\nimport lombok.Getter;\nimport lombok.Setter;\n\nimport java.awt.BorderLayout;\n\nimport net.runelite.api.ItemComposition;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.game.ItemManager;\n\npublic class FlipsController\n{\n\t@Getter\n\t@Setter\n\tprivate List\u003cFlip\u003e flips \u003d new ArrayList\u003cFlip\u003e();\n\tprivate List\u003cFlip\u003e filteredFlips \u003d new ArrayList\u003cFlip\u003e();\n\tprivate FlipPage flipPage;\n\tprivate Consumer\u003cUUID\u003e removeFlipConsumer;\n\tprivate Runnable refreshFlipsRunnable;\n\tprivate String totalProfit \u003d \"0\";\n\tprivate Pagination pagination;\n\tprivate String searchText;\n\tprivate ItemManager itemManager;\n\tprivate Consumer\u003cString\u003e onSearchTextChangedCallback;\n\tprivate boolean isTrackingFlips \u003d true;\n\tprivate ClientThread cThread;\n\n\tpublic FlipsController(ItemManager itemManager, FlipperConfig config, ClientThread cThread) throws IOException\n\t{\n\t\tthis.itemManager \u003d itemManager;\n\t\tthis.cThread \u003d cThread;\n\t\tthis.removeFlipConsumer \u003d id -\u003e this.removeFlip(id);\n\t\tthis.refreshFlipsRunnable \u003d () -\u003e this.loadFlips();\n\t\tthis.onSearchTextChangedCallback \u003d (searchText) -\u003e this.onSearchTextChanged(searchText);\n\n\n\t\tthis.flipPage \u003d new FlipPage(\n\t\t\trefreshFlipsRunnable,\n\t\t\tthis.onSearchTextChangedCallback,\n\t\t\tthis::toggleIsTrackingFlips,\n\t\t\tthis.isTrackingFlips\n\t\t);\n\n\n\t\tConsumer\u003cObject\u003e renderItemCallback \u003d (Object flip) -\u003e {\n\t\t\tFlipPanel flipPanel \u003d new FlipPanel(\n\t\t\t\t(Flip) flip,\n\t\t\t\titemManager,\n\t\t\t\tthis.removeFlipConsumer,\n\t\t\t\tconfig.isPromptDeleteFlip()\n\t\t\t);\n\t\t\tthis.flipPage.addFlipPanel(flipPanel);\n\t\t};\n\n\t\tRunnable buildViewCallback \u003d () -\u003e this.buildView();\n\n\t\tthis.pagination \u003d new Pagination(renderItemCallback, UiUtilities.ITEMS_PER_PAGE, buildViewCallback);\n\t\tthis.loadFlips();\n\t}\n\n\tprivate void toggleIsTrackingFlips()\n\t{\n\t\tthis.isTrackingFlips \u003d !this.isTrackingFlips;\n\t}\n\n\tpublic void onSearchTextChanged(String searchText)\n\t{\n\t\tthis.searchText \u003d searchText;\n\t\tthis.pagination.resetPage();\n\t\tthis.buildView();\n\t}\n\n\tpublic void addFlip(Flip flip)\n\t{\n\t\tif (this.isTrackingFlips)\n\t\t{\n\t\t\tthis.flips.add(0, flip);\n\t\t\tthis.totalProfit \u003d calculateTotalProfit(flips);\n\t\t\tPersistor.saveFlips(this.flips);\n\t\t\tgetFlipNamesAndBuild();\n\t\t}\n\t}\n\n\n\tpublic void removeFlip(UUID flipId)\n\t{\n\t\tIterator\u003cFlip\u003e flipsIter \u003d this.flips.iterator();\n\t\twhile (flipsIter.hasNext())\n\t\t{\n\t\t\tFlip flip \u003d flipsIter.next();\n\t\t\tif (flip.getFlipId().equals(flipId))\n\t\t\t{\n\t\t\t\tflipsIter.remove();\n\t\t\t\tthis.totalProfit \u003d calculateTotalProfit(flips);\n\t\t\t\tPersistor.saveFlips(this.flips);\n\t\t\t\tthis.buildView();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic FlipPage getPage()\n\t{\n\t\treturn this.flipPage;\n\t}\n\n\tpublic void loadFlips()\n\t{\n\t\ttry\n\t\t{\n\t\t\tthis.flips \u003d Persistor.loadFlips();\n\t\t\tthis.totalProfit \u003d calculateTotalProfit(flips);\n\t\t\tthis.filteredFlips \u003d new ArrayList\u003c\u003e(this.flips);\n\t\t\tgetFlipNamesAndBuild();\n\t\t}\n\t\tcatch (IOException e)\n\t\t{\n\t\t\tLog.info(\"Failed to load flips from file: \" + e.getMessage());\n\t\t\tthis.flips \u003d new ArrayList\u003c\u003e();\n\t\t\tthis.filteredFlips \u003d new ArrayList\u003c\u003e();\n\t\t}\n\t}\n\n\tpublic void getFlipNamesAndBuild()\n\t{\n\t\tcThread.invoke(() -\u003e {\n\t\t\tfor (Flip flip : flips)\n\t\t\t{\n\t\t\t\tif (flip.getItemName() \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tflip.setItemName(itemManager.getItemComposition(flip.getItemId()).getName());\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.buildView();\n\t\t});\n\t}\n\n\n\tprivate String calculateTotalProfit(List\u003cFlip\u003e flipList)\n\t{\n\t\tint total \u003d 0;\n\t\tfor (Flip flip : flipList)\n\t\t{\n\t\t\ttotal +\u003d flip.getTotalProfit();\n\t\t}\n\t\treturn String.valueOf(total);\n\t}\n\n\tprivate void updateFlip(Transaction sell, Transaction buy, Flip flip)\n\t{\n\t\tflip.setSellPrice(sell.getFinPricePer());\n\t\tflip.setBuyPrice(buy.getFinPricePer());\n\t\tflip.setQuantity(sell.getQuantity());\n\t\tflip.setItemId(sell.getItemId());\n\t\tflip.setItemName(sell.getItemName());\n\t\tthis.totalProfit \u003d calculateTotalProfit(flips);\n\t\tPersistor.saveFlips(this.flips);\n\t\tgetFlipNamesAndBuild();\n\t}\n\n\tprivate boolean isRender(Flip flip)\n\t{\n\n\t\tif (flip.getItemName() \u003d\u003d null)\n\t\t{\n\t\t\tItemComposition itemComp \u003d itemManager.getItemComposition(flip.getItemId());\n\t\t\tflip.setItemName(itemComp.getName());\n\t\t}\n\t\tString itemName \u003d flip.getItemName();\n\n\t\tif (this.searchText !\u003d null \u0026\u0026\n\t\t\titemName.toLowerCase().contains(this.searchText.toLowerCase()))\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\telse if (this.searchText !\u003d null \u0026\u0026 !this.searchText.isEmpty())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Potentially creates a flip if the sell is complete and has a corresponding\n\t * buy. This logic remains largely the same, but it now interacts with the local\n\t * lists instead of the API.\n\t */\n\tpublic Flip upsertFlip(Transaction sell, List\u003cTransaction\u003e buys)\n\t{\n\t\tListIterator\u003cTransaction\u003e buysIterator \u003d buys.listIterator(buys.size());\n\n\n\t\tif (sell.isFlipped())\n\t\t{\n\t\t\tListIterator\u003cFlip\u003e flipsIterator \u003d flips.listIterator();\n\t\t\twhile (flipsIterator.hasNext())\n\t\t\t{\n\t\t\t\tFlip flip \u003d flipsIterator.next();\n\t\t\t\tif (flip.getSellId().equals(sell.getId()))\n\t\t\t\t{\n\n\t\t\t\t\twhile (buysIterator.hasPrevious())\n\t\t\t\t\t{\n\t\t\t\t\t\tTransaction buy \u003d buysIterator.previous();\n\t\t\t\t\t\tif (buy.getId().equals(flip.getBuyId()))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tupdateFlip(sell, buy, flip);\n\t\t\t\t\t\t\treturn flip;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\n\t\t\tif (this.isTrackingFlips)\n\t\t\t{\n\t\t\t\twhile (buysIterator.hasPrevious())\n\t\t\t\t{\n\t\t\t\t\tTransaction buy \u003d buysIterator.previous();\n\t\t\t\t\tif (GrandExchange.checkIsSellAFlipOfBuy(sell, buy))\n\t\t\t\t\t{\n\t\t\t\t\t\tFlip flip \u003d new Flip(buy, sell);\n\t\t\t\t\t\tif (!flip.isMarginCheck())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.addFlip(flip);\n\t\t\t\t\t\t\tbuy.setIsFlipped(true);\n\t\t\t\t\t\t\tsell.setIsFlipped(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn flip;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic void filterList()\n\t{\n\t\tif (this.searchText \u003d\u003d null || this.searchText.isEmpty())\n\t\t{\n\t\t\tthis.filteredFlips \u003d new ArrayList\u003c\u003e(this.flips);\n\t\t}\n\t\telse\n\t\t{\n\n\t\t\tthis.filteredFlips \u003d new ArrayList\u003c\u003e();\n\t\t\tfor (Flip flip : this.flips)\n\t\t\t{\n\t\t\t\tif (isRender(flip))\n\t\t\t\t{\n\t\t\t\t\tfilteredFlips.add(flip);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic void buildView()\n\t{\n\n\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\tthis.filterList();\n\t\t\tthis.flipPage.resetContainer(isTrackingFlips);\n\t\t\tthis.flipPage.add(\n\t\t\t\tthis.pagination.getComponent(this.filteredFlips),\n\t\t\t\tBorderLayout.SOUTH\n\t\t\t);\n\t\t\tthis.pagination.renderFromBeginning(this.filteredFlips);\n\t\t\tthis.flipPage.setTotalProfit(totalProfit);\n\t\t\tthis.flipPage.revalidate();\n\t\t\tthis.flipPage.repaint();\n\t\t});\n\t}\n\n\tpublic void saveTransactions()\n\t{\n\t\tPersistor.saveFlips(this.flips);\n\t}\n}","filePath":"src\\main\\java\\com\\flipper2\\controllers\\FlipsController.java"},{"fileName":"SellsController.java","content":"package com.flipper2.controllers;\n\nimport java.io.IOException;\n\nimport com.flipper2.FlipperConfig;\nimport com.flipper2.helpers.Persistor;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.callback.ClientThread;\n\npublic class SellsController extends TransactionController\n{\n\tpublic SellsController(ItemManager itemManager, FlipperConfig config, ClientThread clientThread) throws IOException\n\t{\n\t\tsuper(\"Sell\", itemManager, config.isPromptDeleteSell(), clientThread);\n\t}\n\n\t@Override\n\tpublic void loadTransactions() throws IOException\n\t{\n\t\tthis.transactions \u003d Persistor.loadSells();\n\t\tthis.filteredTransactions \u003d this.transactions;\n\t\tthis.buildView();\n\t}\n\n\t@Override\n\tpublic void saveTransactions()\n\t{\n\t\tPersistor.saveSells(this.transactions);\n\t}\n}","filePath":"src\\main\\java\\com\\flipper2\\controllers\\SellsController.java"},{"fileName":"TransactionController.java","content":"\npackage com.flipper2.controllers;\n\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.ListIterator;\nimport java.util.UUID;\nimport java.util.function.Consumer;\nimport java.awt.BorderLayout;\n\nimport javax.swing.JButton;\nimport javax.swing.SwingUtilities;\n\nimport com.flipper2.helpers.GrandExchange;\nimport com.flipper2.helpers.UiUtilities;\nimport com.flipper2.models.Transaction;\nimport com.flipper2.views.transactions.TransactionPanel;\nimport com.google.common.base.Supplier;\nimport com.flipper2.views.transactions.TransactionPage;\nimport com.flipper2.views.components.Pagination;\n\nimport lombok.Getter;\nimport lombok.Setter;\nimport net.runelite.api.GrandExchangeOffer;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.callback.ClientThread;\n\npublic class TransactionController\n{\n\t@Getter\n\t@Setter\n\tprotected List\u003cTransaction\u003e transactions \u003d new ArrayList\u003cTransaction\u003e();\n\tprotected List\u003cTransaction\u003e filteredTransactions \u003d new ArrayList\u003cTransaction\u003e();\n\tprotected TransactionPage transactionPage;\n\tprotected ItemManager itemManager;\n\tprotected Pagination pagination;\n\tprotected Consumer\u003cUUID\u003e removeTransactionConsumer;\n\tprotected JButton extraComponent;\n\tprotected boolean isPrompt;\n\tprotected String searchText;\n\tprotected Consumer\u003cString\u003e onSearchTextChangedCallback;\n\tprotected ClientThread clientThread;\n\n\tpublic TransactionController(String name, ItemManager itemManager, boolean isPrompt, ClientThread clientThread) throws IOException\n\t{\n\t\tthis.isPrompt \u003d isPrompt;\n\t\tthis.itemManager \u003d itemManager;\n\t\tthis.clientThread \u003d clientThread;\n\t\tthis.removeTransactionConsumer \u003d id -\u003e this.removeTransaction(id);\n\n\t\tSupplier\u003cJButton\u003e renderExtraComponentSupplier \u003d () -\u003e {\n\t\t\treturn renderExtraComponent();\n\t\t};\n\t\tConsumer\u003cTransaction\u003e extraComponentPressedConsumer \u003d (transaction) -\u003e {\n\t\t\tthis.extraComponentPressed(transaction);\n\t\t};\n\t\tConsumer\u003cObject\u003e renderItemCallback \u003d (Object sell) -\u003e {\n\t\t\tTransactionPanel transactionPanel \u003d new TransactionPanel(\n\t\t\t\tname,\n\t\t\t\t(Transaction) sell,\n\t\t\t\titemManager,\n\t\t\t\tthis.removeTransactionConsumer,\n\t\t\t\tisPrompt\n\t\t\t);\n\t\t\tthis.transactionPage.addTransactionPanel(transactionPanel);\n\t\t};\n\t\tRunnable buildViewCallback \u003d () -\u003e this.buildView();\n\t\tthis.pagination \u003d new Pagination(\n\t\t\trenderItemCallback,\n\t\t\tUiUtilities.ITEMS_PER_PAGE,\n\t\t\tbuildViewCallback\n\t\t);\n\t\tthis.onSearchTextChangedCallback \u003d (searchText) -\u003e this.onSearchTextChanged(searchText);\n\t\tthis.transactionPage \u003d new TransactionPage(this.onSearchTextChangedCallback);\n\t\tthis.loadTransactions();\n\t}\n\n\tpublic void onSearchTextChanged(String searchText)\n\t{\n\t\tthis.searchText \u003d searchText;\n\t\tthis.pagination.resetPage();\n\t\tthis.buildView();\n\t}\n\n\tpublic void addTransaction(Transaction transaction)\n\t{\n\t\tthis.transactions.add(transaction);\n\t\tthis.buildView();\n\t}\n\n\tpublic Transaction upsertTransaction(GrandExchangeOffer offer, int slot)\n\t{\n\n\t\tListIterator\u003cTransaction\u003e transactionsIter \u003d transactions.listIterator(transactions.size());\n\t\twhile (transactionsIter.hasPrevious())\n\t\t{\n\t\t\tTransaction transaction \u003d transactionsIter.previous();\n\n\t\t\tif (GrandExchange.checkIsOfferPartOfTransaction(transaction, offer, slot))\n\t\t\t{\n\t\t\t\tTransaction updatedTransaction \u003d transaction.updateTransaction(offer);\n\t\t\t\ttransactionsIter.set(updatedTransaction);\n\t\t\t\tthis.buildView();\n\t\t\t\treturn updatedTransaction;\n\t\t\t}\n\t\t}\n\n\n\t\tTransaction newTransaction \u003d GrandExchange.createTransactionFromOffer(offer, itemManager, slot);\n\t\tthis.addTransaction(newTransaction);\n\t\treturn newTransaction;\n\t}\n\n\n\tpublic void removeTransaction(UUID id)\n\t{\n\t\tListIterator\u003cTransaction\u003e transactionIter \u003d this.transactions.listIterator(this.transactions.size());\n\t\twhile (transactionIter.hasPrevious())\n\t\t{\n\t\t\tTransaction transaction \u003d transactionIter.previous();\n\t\t\tif (transaction.id.equals(id))\n\t\t\t{\n\t\t\t\ttransactionIter.remove();\n\t\t\t\tthis.buildView();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic void extraComponentPressed(Transaction transaction)\n\t{\n\t}\n\n\t;\n\n\tpublic JButton renderExtraComponent()\n\t{\n\t\treturn null;\n\t}\n\n\tpublic void loadTransactions() throws IOException\n\t{\n\t}\n\n\t;\n\n\tpublic void saveTransactions()\n\t{\n\t}\n\n\t;\n\n\tpublic TransactionPage getPage()\n\t{\n\t\treturn this.transactionPage;\n\t}\n\n\tprivate boolean isRender(Transaction transaction)\n\t{\n\t\tString itemName \u003d transaction.getItemName();\n\n\t\tif (\n\t\t\tthis.searchText !\u003d null \u0026\u0026\n\t\t\t\titemName.toLowerCase().contains(this.searchText.toLowerCase())\n\t\t)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\telse if (this.searchText !\u003d null \u0026\u0026 this.searchText !\u003d \"\")\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tpublic void filterList()\n\t{\n\t\tif (this.searchText \u003d\u003d \"\" || this.searchText \u003d\u003d null)\n\t\t{\n\t\t\tthis.filteredTransactions \u003d this.transactions;\n\t\t}\n\t\telse\n\t\t{\n\n\t\t\tIterator\u003cTransaction\u003e transactionIter \u003d this.transactions.iterator();\n\t\t\tthis.filteredTransactions \u003d new ArrayList\u003cTransaction\u003e();\n\t\t\twhile (transactionIter.hasNext())\n\t\t\t{\n\t\t\t\tTransaction currentTransaction \u003d transactionIter.next();\n\t\t\t\tif (this.isRender(currentTransaction))\n\t\t\t\t{\n\t\t\t\t\tfilteredTransactions.add(currentTransaction);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic void buildView()\n\t{\n\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\tthis.filterList();\n\t\t\tthis.transactionPage.resetContainer();\n\t\t\tthis.transactionPage.add(\n\t\t\t\tthis.pagination.getComponent(this.filteredTransactions),\n\t\t\t\tBorderLayout.SOUTH\n\t\t\t);\n\t\t\tthis.pagination.renderList(this.filteredTransactions);\n\t\t});\n\t}\n}","filePath":"src\\main\\java\\com\\flipper2\\controllers\\TransactionController.java"},{"fileName":"FlipperConfig.java","content":"package com.flipper2;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"Flipper2\")\npublic interface FlipperConfig extends Config\n{\n\t@ConfigItem(\n\t\tkeyName \u003d \"isPromptDeleteBuy\",\n\t\tname \u003d \"Delete Buy Prompt\",\n\t\tdescription \u003d \"Shows confirmation prompt before deleting buy\"\n\t)\n\tdefault boolean isPromptDeleteBuy()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"isPromptDeleteSell\",\n\t\tname \u003d \"Delete Sell Prompt\",\n\t\tdescription \u003d \"Shows confirmation prompt before deleting sell\"\n\t)\n\tdefault boolean isPromptDeleteSell()\n\t{\n\t\treturn true;\n\t}\n\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"isPromptDeleteFlip\",\n\t\tname \u003d \"Delete Flip Prompt\",\n\t\tdescription \u003d \"Shows confirmation prompt before deleting flip\"\n\t)\n\tdefault boolean isPromptDeleteFlip()\n\t{\n\t\treturn true;\n\t}\n\n\n}\n","filePath":"src\\main\\java\\com\\flipper2\\FlipperConfig.java"},{"fileName":"FlipperPlugin.java","content":"/*\n * Copyright (c) 2020, Kyle Richardson \u003chttps://github.com/Sir-Kyle-Richardson\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.flipper2;\n\nimport com.flipper2.controllers.BuysController;\nimport com.flipper2.controllers.FlipsController;\nimport com.flipper2.controllers.SellsController;\nimport com.flipper2.helpers.GrandExchange;\nimport com.flipper2.helpers.Log;\nimport com.flipper2.helpers.Persistor;\nimport com.flipper2.helpers.UiUtilities;\nimport com.flipper2.models.Transaction;\nimport com.flipper2.views.TabManager;\nimport com.flipper2.views.inprogress.InProgressPage;\nimport com.google.gson.Gson;\nimport com.google.inject.Provides;\n\nimport java.io.IOException;\nimport java.util.List;\n\nimport javax.inject.Inject;\nimport javax.swing.SwingUtilities;\n\nimport net.runelite.api.GrandExchangeOffer;\nimport net.runelite.api.GrandExchangeOfferState;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GrandExchangeOfferChanged;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ClientShutdown;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.util.ImageUtil;\nimport net.runelite.api.GameState;\nimport net.runelite.api.Client;\nimport net.runelite.api.ItemComposition;\nimport java.awt.image.BufferedImage;\n\n@PluginDescriptor(name \u003d \"Flipper2\")\npublic class FlipperPlugin extends Plugin\n{\n\t@Inject\n\tprivate ClientToolbar clientToolbar;\n\t@Inject\n\tprivate ItemManager itemManager;\n\t@Inject\n\tprivate FlipperConfig config;\n\t@Inject\n\tprivate ClientThread cThread;\n\t@Inject\n\tprivate Client client;\n\tprivate BuysController buysController;\n\tprivate SellsController sellsController;\n\tprivate FlipsController flipsController;\n\n\tprivate NavigationButton navButton;\n\tprivate TabManager tabManager;\n\tprivate InProgressPage inProgressPage;\n\t@Inject\n\tprivate Gson gson;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\ttry\n\t\t{\n\t\t\tPersistor.setUp();\n\t\t\tPersistor.gson \u003d this.gson;\n\t\t\tthis.tabManager \u003d new TabManager();\n\t\t\tthis.setUpNavigationButton();\n\t\t\tthis.inProgressPage \u003d new InProgressPage();\n\t\t\tthis.buysController \u003d new BuysController(itemManager, config, cThread);\n\t\t\tthis.sellsController \u003d new SellsController(itemManager, config, cThread);\n\t\t\tthis.flipsController \u003d new FlipsController(itemManager, config, cThread);\n\t\t\tthis.changeToLoggedInView();\n\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\tLog.info(\"Flipper2 failed to start: \" + e.getMessage());\n\t\t}\n\t}\n\n\tprivate void setUpNavigationButton()\n\t{\n\t\tnavButton \u003d NavigationButton\n\t\t\t.builder()\n\t\t\t.tooltip(\"Flipper2\")\n\t\t\t.icon(\n\t\t\t\tImageUtil.loadImageResource(\n\t\t\t\t\tgetClass(),\n\t\t\t\t\tUiUtilities.flipperNavIcon\n\t\t\t\t)\n\t\t\t)\n\t\t\t.priority(4)\n\t\t\t.panel(tabManager).build();\n\t\tclientToolbar.addNavigation(navButton);\n\t}\n\n\tprivate void changeToLoggedInView()\n\t{\n\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\tthis.tabManager.renderLoggedInView(\n\t\t\t\tbuysController.getPage(),\n\t\t\t\tsellsController.getPage(),\n\t\t\t\tflipsController.getPage(),\n\t\t\t\tinProgressPage\n\t\t\t);\n\t\t});\n\t}\n\n\tprivate void saveAll()\n\t{\n\t\ttry\n\t\t{\n\t\t\tbuysController.saveTransactions();\n\t\t\tsellsController.saveTransactions();\n\t\t\tflipsController.saveTransactions();\n\t\t}\n\t\tcatch (Exception error)\n\t\t{\n\t\t\tLog.info(\"Failed to save Flipper2 files\");\n\t\t}\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tclientToolbar.removeNavigation(navButton);\n\t\tthis.saveAll();\n\t}\n\n\t@Subscribe\n\tpublic void onClientShutdown(ClientShutdown clientShutdownEvent) throws IOException\n\t{\n\t\tthis.saveAll();\n\t}\n\n\t@Subscribe\n\tpublic void onGrandExchangeOfferChanged(GrandExchangeOfferChanged newOfferEvent)\n\t{\n\t\tint slot \u003d newOfferEvent.getSlot();\n\t\tGrandExchangeOffer offer \u003d newOfferEvent.getOffer();\n\t\tGrandExchangeOfferState offerState \u003d offer.getState();\n\n\t\tif (offerState \u003d\u003d GrandExchangeOfferState.EMPTY \u0026\u0026 client.getGameState() !\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (GrandExchange.checkIsBuy(offerState))\n\t\t{\n\t\t\tif (offerState \u003d\u003d GrandExchangeOfferState.BOUGHT ||\n\t\t\t\t(offerState \u003d\u003d GrandExchangeOfferState.CANCELLED_BUY \u0026\u0026 offer.getQuantitySold() \u003e 0))\n\t\t\t{\n\t\t\t\tTransaction buy \u003d buysController.upsertTransaction(offer, slot);\n\t\t\t\tif (buy !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tbuysController.saveTransactions();\n\t\t\t\t\tList\u003cTransaction\u003e sells \u003d sellsController.getTransactions();\n\t\t\t\t\tflipsController.upsertFlip(buy, sells);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (offerState \u003d\u003d GrandExchangeOfferState.SOLD ||\n\t\t\t\t(offerState \u003d\u003d GrandExchangeOfferState.CANCELLED_SELL \u0026\u0026 offer.getQuantitySold() \u003e 0))\n\t\t\t{\n\t\t\t\tTransaction sell \u003d sellsController.upsertTransaction(offer, slot);\n\t\t\t\tif (sell !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tsellsController.saveTransactions();\n\t\t\t\t\tList\u003cTransaction\u003e buys \u003d buysController.getTransactions();\n\t\t\t\t\tflipsController.upsertFlip(sell, buys);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tupdatePanel(slot, offer);\n\t}\n\n\tprivate void updatePanel(int slot, GrandExchangeOffer offer)\n\t{\n\t\tcThread.invoke(() -\u003e {\n\t\t\tItemComposition offerItem \u003d itemManager.getItemComposition(offer.getItemId());\n\t\t\tBufferedImage itemImage \u003d itemManager.getImage(offer.getItemId(), 1, false);\n\t\t\tSwingUtilities.invokeLater(() -\u003e inProgressPage.updateOffer(offerItem, itemImage, offer, slot));\n\t\t});\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged)\n\t{\n\t\tif (gameStateChanged.getGameState() \u003d\u003d GameState.LOGIN_SCREEN)\n\t\t{\n\t\t\tinProgressPage.resetOffers();\n\t\t}\n\t}\n\n\t@Provides\n\tFlipperConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(FlipperConfig.class);\n\t}\n}","filePath":"src\\main\\java\\com\\flipper2\\FlipperPlugin.java"},{"fileName":"CustomPanel.java","content":"package com.flipper2.helpers;\n\nimport javax.swing.*;\nimport javax.swing.border.Border;\nimport java.awt.*;\nimport net.runelite.client.ui.ColorScheme;\n\npublic class CustomPanel extends JPanel\n{\n\tprivate static final Border DEFAULT_BOTTOM_BORDER \u003d BorderFactory.createMatteBorder(0, 0, 1, 0, Color.BLACK);\n\tprivate static final Color DEFAULT_BACKGROUND \u003d ColorScheme.DARK_GRAY_COLOR;\n\n\tpublic CustomPanel(LayoutManager layout, boolean addBottomBorder)\n\t{\n\t\tthis(layout, addBottomBorder, null);\n\t}\n\n\tpublic CustomPanel(LayoutManager layout, boolean addBottomBorder, Color backgroundOverride)\n\t{\n\t\tsuper(layout);\n\n\t\tif (addBottomBorder)\n\t\t{\n\t\t\tsetBorder(DEFAULT_BOTTOM_BORDER);\n\t\t}\n\n\t\tsetBackground(backgroundOverride !\u003d null ? backgroundOverride : DEFAULT_BACKGROUND);\n\t}\n}","filePath":"src\\main\\java\\com\\flipper2\\helpers\\CustomPanel.java"},{"fileName":"GrandExchange.java","content":"\npackage com.flipper2.helpers;\n\nimport com.flipper2.models.Transaction;\n\nimport net.runelite.api.GrandExchangeOffer;\nimport net.runelite.api.GrandExchangeOfferState;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.client.game.ItemManager;\n\n/**\n * Handles GrandExchange events\n */\npublic class GrandExchange\n{\n\tpublic static boolean checkIsBuy(GrandExchangeOfferState state)\n\t{\n\t\treturn state \u003d\u003d GrandExchangeOfferState.BOUGHT ||\n\t\t\tstate \u003d\u003d GrandExchangeOfferState.CANCELLED_BUY ||\n\t\t\tstate \u003d\u003d GrandExchangeOfferState.BUYING;\n\t}\n\n\tpublic static boolean checkIsActive(GrandExchangeOfferState state)\n\t{\n\t\treturn state \u003d\u003d GrandExchangeOfferState.BUYING ||\n\t\t\tstate \u003d\u003d GrandExchangeOfferState.SELLING;\n\t}\n\n\tpublic static boolean checkIsComplete(GrandExchangeOfferState state)\n\t{\n\t\treturn state \u003d\u003d GrandExchangeOfferState.BOUGHT ||\n\t\t\tstate \u003d\u003d GrandExchangeOfferState.SOLD ||\n\t\t\tstate \u003d\u003d GrandExchangeOfferState.CANCELLED_SELL ||\n\t\t\tstate \u003d\u003d GrandExchangeOfferState.CANCELLED_BUY;\n\t}\n\n\tpublic static boolean checkIsBoughtSold(GrandExchangeOfferState state)\n\t{\n\t\treturn state \u003d\u003d GrandExchangeOfferState.BOUGHT ||\n\t\t\tstate \u003d\u003d GrandExchangeOfferState.SOLD;\n\t}\n\n\tpublic static boolean checkIsCancelState(GrandExchangeOfferState state)\n\t{\n\t\treturn state \u003d\u003d GrandExchangeOfferState.CANCELLED_BUY ||\n\t\t\tstate \u003d\u003d GrandExchangeOfferState.CANCELLED_SELL;\n\t}\n\n\t/**\n\t * Potentially creates a transaction based on the GrandExchange event\n\t *\n\t * @param newOfferEvent\n\t * @return null or newly created transaction\n\t */\n\tpublic static Transaction createTransactionFromOffer(GrandExchangeOffer offer, ItemManager itemManager, int slot)\n\t{\n\t\tGrandExchangeOfferState state \u003d offer.getState();\n\t\tboolean isBuy \u003d checkIsBuy(state);\n\t\tboolean isComplete \u003d checkIsComplete(state);\n\n\t\tItemComposition itemComposition \u003d itemManager.getItemComposition(offer.getItemId());\n\t\treturn new Transaction(\n\t\t\toffer.getQuantitySold(),\n\t\t\toffer.getTotalQuantity(),\n\t\t\toffer.getItemId(),\n\t\t\toffer.getSpent() / (offer.getQuantitySold() \u003e 0 ? offer.getQuantitySold() : 1),\n\t\t\toffer.getPrice(),\n\t\t\tslot,\n\t\t\titemComposition.getName(),\n\t\t\tisBuy,\n\t\t\tisComplete\n\t\t);\n\t}\n\n\tpublic static boolean checkIsOfferPartOfTransaction(Transaction transaction, GrandExchangeOffer offer, int slot)\n\t{\n\t\treturn\n\t\t\t(!transaction.isComplete() || (transaction.isComplete() \u0026\u0026 GrandExchange.checkIsComplete(offer.getState()))) \u0026\u0026\n\t\t\t\ttransaction.getSlot() \u003d\u003d slot \u0026\u0026\n\t\t\t\ttransaction.getItemId() \u003d\u003d offer.getItemId() \u0026\u0026\n\t\t\t\ttransaction.getTotalQuantity() \u003d\u003d offer.getTotalQuantity();\n\t}\n\n\tpublic static boolean checkIsSellAFlipOfBuy(Transaction sell, Transaction buy)\n\t{\n\t\tboolean isSameItem \u003d sell.getItemId() \u003d\u003d buy.getItemId();\n\t\tboolean hasTransactionsBeenFlipped \u003d sell.isFlipped() \u0026\u0026 buy.isFlipped();\n\t\treturn isSameItem \u0026\u0026 !hasTransactionsBeenFlipped;\n\t}\n}","filePath":"src\\main\\java\\com\\flipper2\\helpers\\GrandExchange.java"},{"fileName":"Log.java","content":"package com.flipper2.helpers;\n\nimport lombok.extern.slf4j.Slf4j;\n\n/**\n * Prevents plugin from logging unless in DEV_MODE \u003d true\n * ^not accurate but original dev set this so keeping it anyways\n * modified the Log class since changing DEV_MODE here does nothing\n * Now just acts as a way to log when in debug mode\n */\n@Slf4j\npublic class Log\n{\n\tpublic static void info(String message)\n\t{\n\t\tlog.debug(\"FLIPPER PLUGIN: \" + message);\n\t}\n}","filePath":"src\\main\\java\\com\\flipper2\\helpers\\Log.java"},{"fileName":"Numbers.java","content":"package com.flipper2.helpers;\n\nimport java.math.BigInteger;\nimport java.text.NumberFormat;\n\npublic class Numbers\n{\n\tpublic static String numberWithCommas(int number)\n\t{\n\t\treturn NumberFormat.getIntegerInstance().format(number);\n\t}\n\n\tpublic static String numberWithCommas(String number)\n\t{\n\t\tif (number \u003d\u003d \"0\")\n\t\t{\n\t\t\treturn \"0\";\n\t\t}\n\n\t\tBigInteger numberAsBigInt \u003d new BigInteger(number);\n\t\treturn String.format(\"%,d\", numberAsBigInt);\n\t}\n\n\t/**\n\t * Shortens a number for display, adding \"K\", \"M\", or \"B\" suffixes as appropriate,\n\t * rounding to one decimal place, and omitting the decimal if it\u0027s .0.\n\t * Correctly handles negative numbers.\n\t *\n\t * @param number The number to shorten.\n\t * @return The shortened number string.\n\t */\n\tpublic static String toShortNumber(int number)\n\t{\n\t\tif (number \u003e -100000 \u0026\u0026 number \u003c 100000)\n\t\t{\n\n\t\t\treturn numberWithCommas(number);\n\t\t}\n\n\n\t\tString sign \u003d number \u003c 0 ? \"-\" : \"\";\n\t\tnumber \u003d Math.abs(number);\n\n\t\tdouble shortNumber;\n\t\tString suffix;\n\n\t\tif (number \u003c 1000000)\n\t\t{\n\t\t\tshortNumber \u003d number / 1000.0;\n\t\t\tsuffix \u003d \"K\";\n\t\t}\n\t\telse if (number \u003c 1000000000)\n\t\t{\n\t\t\tshortNumber \u003d number / 1000000.0;\n\t\t\tsuffix \u003d \"M\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\tshortNumber \u003d number / 1000000000.0;\n\t\t\tsuffix \u003d \"B\";\n\t\t}\n\n\t\tshortNumber \u003d Math.round(shortNumber * 10.0) / 10.0;\n\n\t\tif (shortNumber \u003d\u003d (int) shortNumber)\n\t\t{\n\t\t\treturn String.format(\"%s%d%s\", sign, (int) shortNumber, suffix);\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn String.format(\"%s%.1f%s\", sign, shortNumber, suffix);\n\t\t}\n\t}\n}","filePath":"src\\main\\java\\com\\flipper2\\helpers\\Numbers.java"},{"fileName":"Persistor.java","content":"package com.flipper2.helpers;\n\nimport com.flipper2.models.Flip;\nimport com.flipper2.models.Transaction;\n\nimport net.runelite.client.RuneLite;\nimport com.google.gson.Gson;\nimport com.google.gson.reflect.TypeToken;\nimport java.io.File;\nimport java.io.IOException;\nimport java.lang.reflect.Type;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\nimport java.util.ArrayList;\nimport java.util.List;\n\n/**\n * Read/Writes information to json file for storage\n */\npublic class Persistor\n{\n\tpublic static Gson gson;\n\tpublic static final File PARENT_DIRECTORY \u003d new File(RuneLite.RUNELITE_DIR, \"flipper2\");\n\tpublic static File directory;\n\tpublic static final String SELLS_JSON_FILE \u003d \"flipper2-sells.json\";\n\tpublic static final String BUYS_JSON_FILE \u003d \"flipper2-buys.json\";\n\tpublic static final String FLIPS_JSON_FILE \u003d \"flipper2-flips.json\";\n\n\tpublic static void setUp(String directoryPath) throws IOException\n\t{\n\t\tdirectory \u003d new File(directoryPath);\n\t\tcreateDirectory(directory);\n\t\tcreateRequiredFiles();\n\t}\n\n\tpublic static void setUp() throws IOException\n\t{\n\t\tdirectory \u003d PARENT_DIRECTORY;\n\t\tcreateDirectory(PARENT_DIRECTORY);\n\t\tcreateRequiredFiles();\n\t}\n\n\t/**\n\t * Creates the required json files\n\t */\n\tprivate static void createRequiredFiles() throws IOException\n\t{\n\t\tgenerateFileIfDoesNotExist(SELLS_JSON_FILE);\n\t\tgenerateFileIfDoesNotExist(BUYS_JSON_FILE);\n\t\tgenerateFileIfDoesNotExist(FLIPS_JSON_FILE);\n\t}\n\n\tprivate static void generateFileIfDoesNotExist(String filename) throws IOException\n\t{\n\t\tFile file \u003d new File(directory, filename);\n\t\tif (!file.exists())\n\t\t{\n\t\t\tif (!file.createNewFile())\n\t\t\t{\n\t\t\t\tLog.info(\"Failed to generate file \" + file.getPath());\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate static void createDirectory(File directory) throws IOException\n\t{\n\t\tif (!directory.exists())\n\t\t{\n\t\t\tLog.info(\"Creating flipper2 directory\");\n\t\t\tif (!directory.mkdir())\n\t\t\t{\n\t\t\t\tthrow new IOException(\"unable to create parent directory!\");\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic static void saveJson(List\u003c?\u003e list, String filename) throws IOException\n\t{\n\t\tFile file \u003d new File(directory, filename);\n\t\tfinal String json \u003d gson.toJson(list);\n\t\tFiles.write(file.toPath(), json.getBytes());\n\t}\n\n\tprivate static String getFileContent(String filename) throws IOException\n\t{\n\t\tPath filePath \u003d Paths.get(directory.getAbsolutePath(), filename);\n\t\tbyte[] fileBytes \u003d Files.readAllBytes(filePath);\n\t\treturn new String(fileBytes);\n\t}\n\n\tpublic static boolean saveBuys(List\u003cTransaction\u003e buys)\n\t{\n\t\ttry\n\t\t{\n\t\t\tsaveJson(buys, BUYS_JSON_FILE);\n\t\t\treturn true;\n\t\t}\n\t\tcatch (Exception error)\n\t\t{\n\t\t\tLog.info(\"Failed to save buys \" + error.toString());\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tpublic static boolean saveSells(List\u003cTransaction\u003e sells)\n\t{\n\t\ttry\n\t\t{\n\t\t\tsaveJson(sells, SELLS_JSON_FILE);\n\t\t\treturn true;\n\t\t}\n\t\tcatch (Exception error)\n\t\t{\n\t\t\tLog.info(\"Failed to save sells \" + error.toString());\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tpublic static List\u003cTransaction\u003e loadBuys() throws IOException\n\t{\n\t\tString jsonString \u003d getFileContent(BUYS_JSON_FILE);\n\t\tType type \u003d new TypeToken\u003cList\u003cTransaction\u003e\u003e()\n\t\t{\n\t\t}.getType();\n\t\tList\u003cTransaction\u003e buys \u003d gson.fromJson(jsonString, type);\n\t\tif (buys \u003d\u003d null)\n\t\t{\n\t\t\treturn new ArrayList\u003cTransaction\u003e();\n\t\t}\n\t\treturn buys;\n\t}\n\n\tpublic static List\u003cTransaction\u003e loadSells() throws IOException\n\t{\n\t\tString jsonString \u003d getFileContent(SELLS_JSON_FILE);\n\t\tType type \u003d new TypeToken\u003cList\u003cTransaction\u003e\u003e()\n\t\t{\n\t\t}.getType();\n\t\tList\u003cTransaction\u003e sells \u003d gson.fromJson(jsonString, type);\n\t\tif (sells \u003d\u003d null)\n\t\t{\n\t\t\treturn new ArrayList\u003cTransaction\u003e();\n\t\t}\n\t\treturn sells;\n\t}\n\n\tpublic static boolean saveFlips(List\u003cFlip\u003e flips)\n\t{\n\t\ttry\n\t\t{\n\t\t\tsaveJson(flips, FLIPS_JSON_FILE);\n\t\t\treturn true;\n\t\t}\n\t\tcatch (IOException e)\n\t\t{\n\t\t\tLog.info(\"Failed to save flips: \" + e.getMessage());\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tpublic static List\u003cFlip\u003e loadFlips() throws IOException\n\t{\n\t\tString jsonString \u003d getFileContent(FLIPS_JSON_FILE);\n\t\tType type \u003d new TypeToken\u003cList\u003cFlip\u003e\u003e()\n\t\t{\n\t\t}.getType();\n\t\tList\u003cFlip\u003e flips \u003d gson.fromJson(jsonString, type);\n\t\tif (flips \u003d\u003d null)\n\t\t{\n\t\t\treturn new ArrayList\u003c\u003e();\n\t\t}\n\t\treturn flips;\n\t}\n}","filePath":"src\\main\\java\\com\\flipper2\\helpers\\Persistor.java"},{"fileName":"Timestamps.java","content":"package com.flipper2.helpers;\n\nimport java.sql.Timestamp;\nimport java.time.Instant;\nimport java.time.LocalDateTime;\nimport java.time.ZoneId;\nimport java.time.format.DateTimeFormatter;\n\npublic class Timestamps\n{\n\tpublic static String format(Timestamp timestamp)\n\t{\n\t\tLocalDateTime localDateTime \u003d timestamp.toInstant().atZone(ZoneId.systemDefault()).toLocalDateTime();\n\t\treturn Timestamps.format(localDateTime);\n\t}\n\n\tpublic static String format(Instant instant)\n\t{\n\t\tLocalDateTime localDateTime \u003d instant.atZone(ZoneId.systemDefault()).toLocalDateTime();\n\t\treturn Timestamps.format(localDateTime);\n\t}\n\n\tpublic static String format(LocalDateTime localDateTime)\n\t{\n\t\treturn localDateTime.format(DateTimeFormatter.ofPattern(\"d MMM h:mm a\"));\n\t}\n}\n","filePath":"src\\main\\java\\com\\flipper2\\helpers\\Timestamps.java"},{"fileName":"UiUtilities.java","content":"package com.flipper2.helpers;\n\nimport java.awt.Color;\nimport java.awt.Dimension;\n\nimport javax.swing.BorderFactory;\nimport javax.swing.border.Border;\nimport javax.swing.border.CompoundBorder;\n\nimport net.runelite.client.ui.ColorScheme;\n\npublic class UiUtilities\n{\n\tpublic static final Dimension ICON_SIZE \u003d new Dimension(32, 32);\n\tpublic static final Border ITEM_INFO_BORDER \u003d new CompoundBorder(\n\t\tBorderFactory.createMatteBorder(0, 0, 0, 0, ColorScheme.DARK_GRAY_COLOR),\n\t\tBorderFactory.createLineBorder(ColorScheme.DARKER_GRAY_COLOR.darker(), 4));\n\n\n\tpublic static String truncateString(String string, int length)\n\t{\n\t\tif (string.length() \u003e length)\n\t\t{\n\t\t\treturn string.substring(0, length) + \"...\";\n\t\t}\n\t\treturn string;\n\t}\n\n\tpublic static final String flipperNavIcon \u003d \"/flipper_nav_button.png\";\n\tpublic static final String deleteX \u003d \"/delete_x.png\";\n\tpublic static final String refreshIcon \u003d \"/refresh.png\";\n\tpublic static final String githubIcon \u003d \"/github.png\";\n\tpublic static final int ITEMS_PER_PAGE \u003d 15;\n\n\n}","filePath":"src\\main\\java\\com\\flipper2\\helpers\\UiUtilities.java"},{"fileName":"Flip.java","content":"package com.flipper2.models;\n\nimport java.sql.Timestamp;\nimport java.util.UUID;\n\nimport lombok.Data;\n\n/**\n * Represents a buy and sell (flip) of an item\n */\n@Data\npublic class Flip\n{\n\tpublic static final double TAX_RATE \u003d 0.01;\n\n\tpublic UUID flipId;\n\tpublic UUID userId;\n\tpublic UUID buyId;\n\tpublic UUID sellId;\n\tpublic int itemId;\n\tString itemName;\n\tpublic int quantity;\n\tpublic int buyPrice;\n\tpublic int sellPrice;\n\tprivate Timestamp updatedAt;\n\tprivate Timestamp createdAt;\n\n\tpublic Flip()\n\t{\n\t}\n\n\tpublic Flip(Transaction buy, Transaction sell)\n\t{\n\t\tthis.flipId \u003d UUID.randomUUID();\n\t\tthis.buyId \u003d buy.id;\n\t\tthis.sellId \u003d sell.id;\n\t\tthis.itemId \u003d sell.getItemId();\n\t\tthis.itemName \u003d sell.getItemName();\n\t\tthis.quantity \u003d sell.getQuantity();\n\t\tthis.buyPrice \u003d buy.getFinPricePer();\n\t\tthis.sellPrice \u003d sell.getFinPricePer();\n\n\t\tthis.updatedAt \u003d new Timestamp(System.currentTimeMillis());\n\t\tthis.createdAt \u003d new Timestamp(System.currentTimeMillis());\n\t}\n\n\t/**\n\t * We know a flip is a margin check when only 1 is bought and it\u0027s bought for a\n\t * greater to or equal price than sold for\n\t */\n\tpublic boolean isMarginCheck()\n\t{\n\t\treturn quantity \u003d\u003d 1 \u0026\u0026 buyPrice \u003e\u003d sellPrice;\n\t}\n\n\tpublic String describeFlip()\n\t{\n\t\treturn String.valueOf(quantity) + \" \" + this.itemName + \"(s)\";\n\t}\n\n\t/**\n\t * We only concern ourselves with the amount sold (ignore extra bought and kept)\n\t *\n\t * @return profit of flip\n\t */\n\n\t/**\n\t * The GE floors tax per item.\n\t *\n\t * @return tax per item of flip\n\t */\n\tpublic int getTax()\n\t{\n\t\tint taxPerItem \u003d (int) Math.floor((double) this.sellPrice * TAX_RATE);\n\t\treturn Math.min(taxPerItem, Transaction.MAX_TAX);\n\t}\n\n\t/**\n\t * Gets the total tax of the sale\n\t *\n\t * @return total tax of sale\n\t */\n\tpublic int getTotalTax()\n\t{\n\t\treturn getTax() * quantity;\n\t}\n\n\tpublic int getTotalProfit()\n\t{\n\t\treturn (sellPrice - buyPrice) * quantity - getTotalTax();\n\t}\n\n\tpublic int getTotalBuy()\n\t{\n\t\treturn buyPrice * quantity;\n\t}\n\n\tpublic int getTotalSell()\n\t{\n\t\treturn sellPrice * quantity;\n\t}\n}","filePath":"src\\main\\java\\com\\flipper2\\models\\Flip.java"},{"fileName":"Transaction.java","content":"package com.flipper2.models;\n\nimport lombok.Data;\nimport net.runelite.api.GrandExchangeOffer;\nimport net.runelite.api.GrandExchangeOfferState;\n\nimport java.time.Instant;\nimport java.util.UUID;\n\nimport com.flipper2.helpers.GrandExchange;\n\n/**\n * Represents either a buy or sell of an item(s) on the GE\n */\n@Data\npublic class Transaction\n{\n\tpublic static final double TAX_RATE \u003d 0.01;\n\tpublic static final int MAX_TAX \u003d 5000000;\n\n\tpublic final UUID id;\n\tprivate int quantity;\n\tprivate int totalQuantity;\n\tprivate int itemId;\n\tprivate int finPricePer;\n\tprivate int initPricePer;\n\tprivate int slot;\n\tprivate String itemName;\n\tprivate boolean isBuy;\n\tprivate boolean isComplete;\n\tprivate boolean isFlipped;\n\tprivate boolean isAlched;\n\tprivate Instant completedTime;\n\tprivate Instant createdTime;\n\tprivate boolean hasCancelledOnce \u003d false;\n\tprivate GrandExchangeOfferState currentState;\n\n\tpublic Transaction(\n\t\tint quantity,\n\t\tint totalQuantity,\n\t\tint itemId,\n\t\tint finPricePer,\n\t\tint initPricePer,\n\t\tint slot,\n\t\tString itemName,\n\t\tboolean isBuy,\n\t\tboolean isComplete\n\t)\n\t{\n\t\tid \u003d UUID.randomUUID();\n\t\tthis.quantity \u003d quantity;\n\t\tthis.totalQuantity \u003d totalQuantity;\n\t\tthis.itemId \u003d itemId;\n\t\tthis.finPricePer \u003d finPricePer;\n\t\tthis.initPricePer \u003d initPricePer;\n\t\tthis.slot \u003d slot;\n\t\tthis.itemName \u003d itemName;\n\t\tthis.isBuy \u003d isBuy;\n\t\tthis.isComplete \u003d isComplete;\n\t\tthis.createdTime \u003d Instant.now();\n\t\tthis.isFlipped \u003d false;\n\t\tthis.hasCancelledOnce \u003d false;\n\t}\n\n\tpublic Transaction updateTransaction(GrandExchangeOffer offer)\n\t{\n\t\tthis.quantity \u003d offer.getQuantitySold();\n\t\tthis.currentState \u003d offer.getState();\n\n\t\tif (offer.getQuantitySold() \u003e 0)\n\t\t{\n\t\t\tthis.finPricePer \u003d offer.getSpent() / offer.getQuantitySold();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.finPricePer \u003d 0;\n\t\t}\n\n\t\tboolean isCancelState \u003d GrandExchange.checkIsCancelState(offer.getState());\n\n\t\tif (!isCancelState || (this.hasCancelledOnce \u0026\u0026 isCancelState))\n\t\t{\n\t\t\tthis.isComplete \u003d GrandExchange.checkIsComplete(offer.getState());\n\t\t}\n\n\t\tif (isCancelState)\n\t\t{\n\t\t\tthis.hasCancelledOnce \u003d true;\n\t\t}\n\n\t\tif (this.isComplete)\n\t\t{\n\t\t\tcompletedTime \u003d Instant.now();\n\t\t}\n\t\treturn this;\n\t}\n\n\tpublic String describeTransaction()\n\t{\n\t\treturn String.valueOf(this.quantity) + \" \" + this.itemName + \"(s)\";\n\t}\n\n\tpublic void setIsFlipped(boolean isFlipped)\n\t{\n\t\tthis.isFlipped \u003d isFlipped;\n\t}\n\n\n\tpublic int getTax()\n\t{\n\t\tif (this.isBuy)\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\n\t\tint tax \u003d (int) Math.floor(this.finPricePer * TAX_RATE);\n\t\treturn Math.min(tax, MAX_TAX);\n\t}\n\n\tpublic int getTotalTax()\n\t{\n\t\treturn getTax() * this.quantity;\n\t}\n}","filePath":"src\\main\\java\\com\\flipper2\\models\\Transaction.java"},{"fileName":"DeleteButton.java","content":"package com.flipper2.views.components;\n\nimport javax.swing.ImageIcon;\nimport javax.swing.JButton;\n\nimport com.flipper2.helpers.UiUtilities;\n\nimport net.runelite.client.util.ImageUtil;\nimport java.awt.event.*;\n\npublic class DeleteButton extends JButton\n{\n\tpublic DeleteButton(ActionListener onClick)\n\t{\n\t\tImageIcon deleteIcon \u003d new ImageIcon(ImageUtil.loadImageResource(getClass(), UiUtilities.deleteX));\n\t\tsetIcon(deleteIcon);\n\t\tsetBorderPainted(false);\n\t\tsetContentAreaFilled(false);\n\t\tsetFocusPainted(true);\n\t\tsetOpaque(false);\n\t\taddActionListener(onClick);\n\t}\n}\n","filePath":"src\\main\\java\\com\\flipper2\\views\\components\\DeleteButton.java"},{"fileName":"InProgressHeader.java","content":"package com.flipper2.views.components;\n\nimport javax.swing.*;\nimport javax.swing.border.EmptyBorder;\n\nimport java.awt.BorderLayout;\nimport java.awt.Component;\nimport java.awt.Color;\nimport java.awt.image.BufferedImage;\n\nimport com.flipper2.helpers.UiUtilities;\n\nimport net.runelite.api.GrandExchangeOffer;\nimport net.runelite.api.GrandExchangeOfferState;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.api.ItemComposition;\n\nimport static com.flipper2.helpers.GrandExchange.checkIsBuy;\nimport static com.flipper2.helpers.UiUtilities.truncateString;\n\npublic class InProgressHeader extends JPanel\n{\n\n\tpublic InProgressHeader(ItemComposition item, BufferedImage itemImage, GrandExchangeOffer offer)\n\t{\n\t\tthis.setLayout(new BorderLayout());\n\t\tthis.setBackground(ColorScheme.DARKER_GRAY_COLOR.darker());\n\n\t\tJPanel itemIconPanel \u003d constructItemIcon(itemImage);\n\t\tJLabel itemNameLabel \u003d constructItemName(item.getName());\n\t\tJLabel offerTypeLabel \u003d constructOfferTypeLabel(offer);\n\n\n\t\tthis.add(itemIconPanel, BorderLayout.WEST);\n\t\tthis.add(itemNameLabel, BorderLayout.CENTER);\n\t\tthis.add(offerTypeLabel, BorderLayout.EAST);\n\n\t\tthis.setBorder(new EmptyBorder(2, 1, 2, 5));\n\t}\n\n\tprivate JPanel constructItemIcon(BufferedImage itemImage)\n\t{\n\t\tJLabel itemIcon \u003d new JLabel();\n\t\titemIcon.setAlignmentX(Component.LEFT_ALIGNMENT);\n\t\titemIcon.setPreferredSize(UiUtilities.ICON_SIZE);\n\t\titemIcon.setIcon(new ImageIcon(itemImage));\n\t\tJPanel itemIconPanel \u003d new JPanel(new BorderLayout());\n\t\titemIconPanel.setBackground(ColorScheme.DARKER_GRAY_COLOR.darker());\n\t\titemIconPanel.add(itemIcon, BorderLayout.WEST);\n\t\treturn itemIconPanel;\n\t}\n\n\tprivate JLabel constructItemName(String itemName)\n\t{\n\t\tJLabel itemNameLabel \u003d new JLabel(truncateString(itemName, 20), SwingConstants.CENTER);\n\t\titemNameLabel.setForeground(Color.WHITE);\n\t\titemNameLabel.setFont(FontManager.getRunescapeBoldFont());\n\t\titemNameLabel.setToolTipText(itemName);\n\t\treturn itemNameLabel;\n\t}\n\n\tprivate JLabel constructOfferTypeLabel(GrandExchangeOffer offer)\n\t{\n\t\tGrandExchangeOfferState state \u003d offer.getState();\n\t\tboolean isBuy \u003d checkIsBuy(state);\n\t\tString offerType \u003d (isBuy ? \"Buy\" : \"Sell\");\n\t\tJLabel offerTypeLabel \u003d new JLabel(offerType);\n\t\tofferTypeLabel.setHorizontalAlignment(JLabel.RIGHT);\n\n\t\tif (isBuy)\n\t\t{\n\t\t\tofferTypeLabel.setForeground(ColorScheme.GRAND_EXCHANGE_ALCH);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tofferTypeLabel.setForeground(ColorScheme.GRAND_EXCHANGE_PRICE);\n\t\t}\n\t\treturn offerTypeLabel;\n\t}\n}","filePath":"src\\main\\java\\com\\flipper2\\views\\components\\InProgressHeader.java"},{"fileName":"ItemHeader.java","content":"package com.flipper2.views.components;\n\nimport javax.swing.JButton;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.SwingConstants;\nimport javax.swing.border.EmptyBorder;\n\nimport java.awt.BorderLayout;\nimport java.awt.Component;\nimport java.awt.Color;\nimport java.awt.Dimension;\n\nimport com.flipper2.helpers.Numbers;\nimport com.flipper2.helpers.UiUtilities;\n\nimport static com.flipper2.helpers.UiUtilities.truncateString;\n\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.util.AsyncBufferedImage;\n\nimport java.awt.event.*;\n\n/**\n * Item header: Item Icon / Item Name / Number bought/soul out of total\n */\npublic class ItemHeader extends JPanel\n{\n\tprivate ItemManager itemManager;\n\tprivate int itemId;\n\tprivate int pricePer;\n\tprivate String itemName;\n\tprivate JPanel topRightContainer;\n\tprivate JLabel costPerLabel;\n\n\tpublic ItemHeader(\n\t\tint itemId,\n\t\tint pricePer,\n\t\tString itemName,\n\t\tItemManager itemManager,\n\t\tboolean isAddCostPer,\n\t\tJButton hoverButton\n\t)\n\t{\n\t\tthis.itemId \u003d itemId;\n\t\tthis.pricePer \u003d pricePer;\n\t\tthis.itemName \u003d itemName;\n\t\tthis.itemManager \u003d itemManager;\n\t\tthis.setLayout(new BorderLayout());\n\t\ttopRightContainer \u003d new JPanel();\n\t\ttopRightContainer.setBackground(ColorScheme.DARKER_GRAY_COLOR.darker());\n\n\t\tJPanel itemIconPanel \u003d constructItemIcon();\n\t\tJLabel itemNameLabel \u003d constructItemName();\n\t\tif (isAddCostPer)\n\t\t{\n\t\t\tthis.costPerLabel \u003d constructCostPerLabel();\n\t\t\ttopRightContainer.add(costPerLabel);\n\t\t}\n\n\t\thoverButton.setVisible(false);\n\t\ttopRightContainer.add(hoverButton);\n\n\t\tadd(topRightContainer, BorderLayout.EAST);\n\t\tsetBackground(ColorScheme.DARKER_GRAY_COLOR.darker());\n\t\tadd(itemIconPanel, BorderLayout.WEST);\n\t\tadd(itemNameLabel, BorderLayout.CENTER);\n\t\tsetBorder(new EmptyBorder(2, 1, 2, 5));\n\n\t\tthis.addMouseListener(new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mouseEntered(MouseEvent me)\n\t\t\t{\n\t\t\t\thoverButton.setVisible(true);\n\t\t\t\tif (isAddCostPer)\n\t\t\t\t{\n\t\t\t\t\tcostPerLabel.setVisible(false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseExited(MouseEvent me)\n\t\t\t{\n\t\t\t\tif (isAddCostPer)\n\t\t\t\t{\n\t\t\t\t\tcostPerLabel.setVisible(true);\n\t\t\t\t}\n\t\t\t\thoverButton.setVisible(false);\n\t\t\t}\n\t\t});\n\n\t\thoverButton.addMouseListener(new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mouseEntered(MouseEvent me)\n\t\t\t{\n\t\t\t\thoverButton.setVisible(true);\n\t\t\t\tif (isAddCostPer)\n\t\t\t\t{\n\t\t\t\t\tcostPerLabel.setVisible(false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseExited(MouseEvent me)\n\t\t\t{\n\t\t\t\tif (isAddCostPer)\n\t\t\t\t{\n\t\t\t\t\tcostPerLabel.setVisible(true);\n\t\t\t\t}\n\t\t\t\thoverButton.setVisible(false);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate JPanel constructItemIcon()\n\t{\n\t\tAsyncBufferedImage itemImage \u003d itemManager.getImage(this.itemId);\n\t\tJLabel itemIcon \u003d new JLabel();\n\t\titemIcon.setAlignmentX(Component.LEFT_ALIGNMENT);\n\t\titemIcon.setPreferredSize(UiUtilities.ICON_SIZE);\n\t\tif (itemImage !\u003d null)\n\t\t{\n\t\t\titemImage.addTo(itemIcon);\n\t\t}\n\t\tJPanel itemIconPanel \u003d new JPanel(new BorderLayout());\n\t\titemIconPanel.setBackground(ColorScheme.DARKER_GRAY_COLOR.darker());\n\t\titemIconPanel.add(itemIcon, BorderLayout.WEST);\n\t\treturn itemIconPanel;\n\t}\n\n\tprivate JLabel constructItemName()\n\t{\n\t\tJLabel itemName \u003d new JLabel(truncateString(this.itemName, 20), SwingConstants.CENTER);\n\t\titemName.setForeground(Color.WHITE);\n\t\titemName.setFont(FontManager.getRunescapeBoldFont());\n\t\titemName.setPreferredSize(new Dimension(0, 0));\n\t\titemName.setToolTipText(this.itemName);\n\t\treturn itemName;\n\t}\n\n\tprivate JLabel constructCostPerLabel()\n\t{\n\t\tString costPerString \u003d Numbers.numberWithCommas(this.pricePer);\n\t\tJLabel costPerLabel \u003d new JLabel(costPerString + \" gp\");\n\t\tcostPerLabel.setForeground(ColorScheme.GRAND_EXCHANGE_ALCH);\n\t\treturn costPerLabel;\n\t}\n}","filePath":"src\\main\\java\\com\\flipper2\\views\\components\\ItemHeader.java"},{"fileName":"Pagination.java","content":"package com.flipper2.views.components;\n\nimport java.awt.event.MouseEvent;\nimport java.awt.event.MouseAdapter;\nimport java.awt.BorderLayout;\n\nimport java.util.List;\nimport java.util.function.Consumer;\n\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\n\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\n\npublic class Pagination\n{\n\tprivate Consumer\u003cObject\u003e renderItemCallback;\n\tprivate Runnable buildViewCallback;\n\tprivate int itemsPerPage;\n\tprivate int page;\n\n\tpublic Pagination(\n\t\tConsumer\u003cObject\u003e renderItemCallback,\n\t\tint itemsPerPage,\n\t\tRunnable buildViewCallback\n\t)\n\t{\n\t\tthis.itemsPerPage \u003d itemsPerPage;\n\t\tthis.renderItemCallback \u003d renderItemCallback;\n\t\tthis.page \u003d 1;\n\t\tthis.buildViewCallback \u003d buildViewCallback;\n\t}\n\n\tpublic void resetPage()\n\t{\n\t\tthis.page \u003d 1;\n\t}\n\n\tpublic \u003cT\u003e void renderList(List\u003cT\u003e items)\n\t{\n\t\tint endIndex \u003d items.size() - (page * itemsPerPage) - 1;\n\t\tif (endIndex \u003c 0)\n\t\t{\n\t\t\tendIndex \u003d -1;\n\t\t}\n\t\tint startIndex \u003d items.size() - ((page - 1) * itemsPerPage) - 1;\n\t\tfor (int i \u003d startIndex; i \u003e endIndex; i--)\n\t\t{\n\t\t\tthis.renderItemCallback.accept(items.get(i));\n\t\t}\n\t}\n\n\tpublic \u003cT\u003e void renderFromBeginning(List\u003cT\u003e items)\n\t{\n\t\tint startIndex \u003d (page - 1) * itemsPerPage;\n\t\tint endIndex \u003d (page * itemsPerPage) - 1;\n\n\t\tif (endIndex \u003e items.size())\n\t\t{\n\t\t\tendIndex \u003d items.size();\n\t\t}\n\n\t\tfor (int i \u003d startIndex; i \u003c endIndex; i++)\n\t\t{\n\t\t\tthis.renderItemCallback.accept(items.get(i));\n\t\t}\n\t}\n\n\tpublic \u003cT\u003e JPanel getComponent(List\u003cT\u003e items)\n\t{\n\t\tJPanel container \u003d new JPanel(new BorderLayout());\n\n\t\tint numberOfPages \u003d (int) Math.round(\n\t\t\tMath.ceil(\n\t\t\t\titems.size() * 1.0 / this.itemsPerPage\n\t\t\t)\n\t\t);\n\n\t\tJLabel previous \u003d new JLabel(\"\u003c\");\n\t\tprevious.setFont(FontManager.getRunescapeBoldFont());\n\t\tprevious.setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n\t\tprevious.addMouseListener(new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mouseClicked(MouseEvent e)\n\t\t\t{\n\t\t\t\tif (page !\u003d 1)\n\t\t\t\t{\n\t\t\t\t\tpage--;\n\t\t\t\t\tbuildViewCallback.run();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tpage \u003d numberOfPages;\n\t\t\t\t\tbuildViewCallback.run();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseEntered(MouseEvent e)\n\t\t\t{\n\t\t\t\tprevious.setForeground(ColorScheme.BRAND_ORANGE);\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseExited(MouseEvent e)\n\t\t\t{\n\t\t\t\tprevious.setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n\t\t\t}\n\t\t});\n\n\t\tJLabel pageLabel \u003d new JLabel(page + \" of \" + numberOfPages);\n\t\tpageLabel.setHorizontalAlignment(JLabel.CENTER);\n\n\t\tJLabel next \u003d new JLabel(\"\u003e\");\n\t\tnext.setFont(FontManager.getRunescapeBoldFont());\n\t\tnext.setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n\t\tnext.addMouseListener(new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mouseClicked(MouseEvent e)\n\t\t\t{\n\t\t\t\tif (page \u003c numberOfPages)\n\t\t\t\t{\n\t\t\t\t\tpage++;\n\t\t\t\t\tbuildViewCallback.run();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tpage \u003d 1;\n\t\t\t\t\tbuildViewCallback.run();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseEntered(MouseEvent e)\n\t\t\t{\n\t\t\t\tnext.setForeground(ColorScheme.BRAND_ORANGE);\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseExited(MouseEvent e)\n\t\t\t{\n\t\t\t\tnext.setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n\t\t\t}\n\t\t});\n\n\t\tcontainer.add(previous, BorderLayout.WEST);\n\t\tcontainer.add(pageLabel, BorderLayout.CENTER);\n\t\tcontainer.add(next, BorderLayout.EAST);\n\t\tcontainer.setBackground(ColorScheme.DARKER_GRAY_COLOR.darker());\n\n\t\treturn container;\n\t}\n}","filePath":"src\\main\\java\\com\\flipper2\\views\\components\\Pagination.java"},{"fileName":"SearchBar.java","content":"package com.flipper2.views.components;\n\nimport java.util.function.Consumer;\n\nimport javax.swing.JTextField;\n\nimport net.runelite.client.input.KeyListener;\n\nimport javax.swing.Timer;\n\nimport java.awt.event.ActionEvent;\nimport java.awt.event.KeyEvent;\n\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.RenderingHints;\n\npublic class SearchBar extends JTextField\n{\n\tprivate Timer timer;\n\tprivate final String ph \u003d \"Search\";\n\n\tpublic SearchBar(Consumer\u003cString\u003e onSearchTextChanged)\n\t{\n\t\tsuper();\n\t\tthis.addKeyListener(new KeyListener()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void keyTyped(KeyEvent event)\n\t\t\t{\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void keyReleased(KeyEvent event)\n\t\t\t{\n\t\t\t\tif (timer \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\ttimer \u003d new Timer(500, (ActionEvent action) -\u003e {\n\t\t\t\t\t\tString text \u003d getText();\n\t\t\t\t\t\tonSearchTextChanged.accept(text);\n\t\t\t\t\t});\n\t\t\t\t\ttimer.setRepeats(false);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttimer.restart();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void keyPressed(KeyEvent event)\n\t\t\t{\n\t\t\t}\n\t\t});\n\t}\n\n\t@Override\n\tpublic void paintComponent(Graphics g)\n\t{\n\t\tsuper.paintComponent(g);\n\n\t\tif (super.getText().length() \u003e 0 || ph \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tGraphics2D g2 \u003d (Graphics2D) g;\n\n\t\tg2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n\t\tg2.setColor(super.getDisabledTextColor());\n\t\tg2.drawString(ph, getInsets().left, g.getFontMetrics().getMaxAscent() + getInsets().top);\n\t}\n}\n","filePath":"src\\main\\java\\com\\flipper2\\views\\components\\SearchBar.java"},{"fileName":"Tab.java","content":"package com.flipper2.views.components;\n\nimport com.google.common.base.Strings;\nimport java.awt.Color;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.util.function.BooleanSupplier;\nimport javax.swing.BorderFactory;\nimport javax.swing.ImageIcon;\nimport javax.swing.JComponent;\nimport javax.swing.SwingConstants;\nimport javax.swing.border.Border;\nimport javax.swing.border.CompoundBorder;\nimport lombok.Getter;\nimport lombok.Setter;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.components.materialtabs.MaterialTab;\nimport net.runelite.client.ui.components.materialtabs.MaterialTabGroup;\n\npublic class Tab extends MaterialTab\n{\n\tprivate static final Border SELECTED_BORDER \u003d new CompoundBorder(\n\t\tBorderFactory.createMatteBorder(0, 0, 1, 0, ColorScheme.BRAND_ORANGE),\n\t\tBorderFactory.createEmptyBorder(5, 5, 4, 5));\n\n\tprivate static final Border UNSELECTED_BORDER \u003d BorderFactory\n\t\t.createEmptyBorder(5, 5, 5, 5);\n\n\t/* The tab\u0027s containing group */\n\tprivate final MaterialTabGroup group;\n\n\t/* The tab\u0027s associated content display */\n\t@Getter\n\tprivate final JComponent content;\n\n\t/* To be executed when the tab is selected */\n\t@Setter\n\tprivate BooleanSupplier onSelectEvent;\n\n\t@Getter\n\tprivate boolean selected;\n\n\tpublic Tab(String string, MaterialTabGroup group, JComponent content)\n\t{\n\t\tsuper(string, group, content);\n\n\t\tthis.group \u003d group;\n\t\tthis.content \u003d content;\n\n\t\tif (selected)\n\t\t{\n\t\t\tselect();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tunselect();\n\t\t}\n\n\t\taddMouseListener(new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mousePressed(MouseEvent mouseEvent)\n\t\t\t{\n\t\t\t\tgroup.select(Tab.this);\n\t\t\t}\n\t\t});\n\n\t\tif (!Strings.isNullOrEmpty(string))\n\t\t{\n\t\t\taddMouseListener(new MouseAdapter()\n\t\t\t{\n\t\t\t\t@Override\n\t\t\t\tpublic void mouseEntered(MouseEvent e)\n\t\t\t\t{\n\t\t\t\t\tTab tab \u003d (Tab) e.getSource();\n\t\t\t\t\ttab.setForeground(Color.WHITE);\n\t\t\t\t}\n\n\t\t\t\t@Override\n\t\t\t\tpublic void mouseExited(MouseEvent e)\n\t\t\t\t{\n\t\t\t\t\tTab tab \u003d (Tab) e.getSource();\n\t\t\t\t\tif (!tab.isSelected())\n\t\t\t\t\t{\n\t\t\t\t\t\ttab.setForeground(Color.GRAY);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic Tab(ImageIcon icon, MaterialTabGroup group, JComponent content)\n\t{\n\t\tthis(\"\", group, content);\n\t\tsetIcon(icon);\n\t\tsetOpaque(true);\n\t\tsetVerticalAlignment(SwingConstants.CENTER);\n\t\tsetHorizontalAlignment(SwingConstants.CENTER);\n\t\tsetBackground(ColorScheme.DARKER_GRAY_COLOR);\n\n\t\taddMouseListener(new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mouseEntered(MouseEvent e)\n\t\t\t{\n\t\t\t\tTab tab \u003d (Tab) e.getSource();\n\t\t\t\ttab.setBackground(ColorScheme.DARKER_GRAY_HOVER_COLOR);\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseExited(MouseEvent e)\n\t\t\t{\n\t\t\t\tTab tab \u003d (Tab) e.getSource();\n\t\t\t\ttab.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\t\t}\n\t\t});\n\n\t}\n\n\t@Override\n\tpublic boolean select()\n\t{\n\t\tif (onSelectEvent !\u003d null)\n\t\t{\n\t\t\tif (!onSelectEvent.getAsBoolean())\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tsetBorder(SELECTED_BORDER);\n\t\tsetForeground(Color.WHITE);\n\t\treturn selected \u003d true;\n\t}\n\n\t@Override\n\tpublic void unselect()\n\t{\n\t\tsetBorder(UNSELECTED_BORDER);\n\t\tsetForeground(Color.GRAY);\n\t\tselected \u003d false;\n\t}\n}","filePath":"src\\main\\java\\com\\flipper2\\views\\components\\Tab.java"},{"fileName":"Toggle.java","content":"package com.flipper2.views.components;\n\nimport javax.swing.JCheckBox;\nimport java.awt.event.*;\n\npublic class Toggle extends JCheckBox\n{\n\tpublic Toggle(String label, Boolean isToggled, Runnable onToggleRunnable)\n\t{\n\t\tsuper(label, isToggled);\n\t\tsetBounds(100, 100, 50, 50);\n\n\t\taddItemListener(new ItemListener()\n\t\t{\n\t\t\tpublic void itemStateChanged(ItemEvent event)\n\t\t\t{\n\t\t\t\tonToggleRunnable.run();\n\t\t\t}\n\t\t});\n\t}\n}\n","filePath":"src\\main\\java\\com\\flipper2\\views\\components\\Toggle.java"},{"fileName":"FlipPage.java","content":"package com.flipper2.views.flips;\n\nimport javax.swing.BoxLayout;\nimport javax.swing.ImageIcon;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\nimport javax.swing.border.EmptyBorder;\nimport javax.swing.*;\nimport javax.swing.SwingConstants;\n\nimport java.awt.*;\n\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.util.function.Consumer;\n\nimport com.flipper2.helpers.Numbers;\nimport com.flipper2.helpers.UiUtilities;\nimport com.flipper2.views.components.SearchBar;\nimport com.flipper2.views.components.Toggle;\n\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.util.ImageUtil;\n\npublic class FlipPage extends JPanel\n{\n\tprivate JPanel container;\n\tprivate JLabel totalProfitValueLabel;\n\tprivate JCheckBox shortenProfitCheckbox;\n\n\tprivate Consumer\u003cString\u003e onSearchTextChanged;\n\tprivate Runnable refreshFlipsRunnable;\n\tprivate Runnable toggleIsTrackingFlipsRunnable;\n\tprivate Toggle trackFlipsToggle;\n\n\tpublic FlipPage(\n\t\tRunnable refreshFlipsRunnable,\n\t\tConsumer\u003cString\u003e onSearchTextChanged,\n\t\tRunnable toggleIsTrackingFlipsRunnable,\n\t\tBoolean isTrackingFlips\n\t)\n\t{\n\t\tthis.refreshFlipsRunnable \u003d refreshFlipsRunnable;\n\t\tthis.onSearchTextChanged \u003d onSearchTextChanged;\n\t\tthis.toggleIsTrackingFlipsRunnable \u003d toggleIsTrackingFlipsRunnable;\n\t\tthis.setLayout(new BorderLayout());\n\t\tthis.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tconstructTotalProfitContainer();\n\t\tthis.build(isTrackingFlips);\n\t\tsetTotalProfit(\"0\", true);\n\t}\n\n\tpublic void addFlipPanel(FlipPanel flipPanel)\n\t{\n\t\tcontainer.add(flipPanel, BorderLayout.CENTER);\n\t\tthis.revalidate();\n\t}\n\n\tpublic void resetContainer(boolean isTrackingFlips)\n\t{\n\t\ttrackFlipsToggle.setSelected(isTrackingFlips);\n\t\ttrackFlipsToggle.revalidate();\n\t\tcontainer.removeAll();\n\t}\n\n\tprivate void constructTotalProfitContainer()\n\t{\n\t\tJPanel container \u003d new JPanel();\n\t\tcontainer.setLayout(new BorderLayout());\n\t\tJPanel totalProfitContainer \u003d new JPanel(new BorderLayout());\n\t\ttotalProfitContainer.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\n\t\tJPanel totalProfitHeader \u003d new JPanel(new BorderLayout());\n\t\ttotalProfitHeader.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\ttotalProfitHeader.setBorder(new EmptyBorder(2, 2, 0, 2));\n\n\t\tJLabel totalProfitLabel \u003d new JLabel(\"Flip Profit\");\n\t\ttotalProfitLabel.setFont(FontManager.getRunescapeBoldFont());\n\t\ttotalProfitLabel.setHorizontalAlignment(JLabel.CENTER);\n\t\ttotalProfitLabel.setForeground(Color.WHITE);\n\n\t\tImageIcon refreshIcon \u003d new ImageIcon(ImageUtil.loadImageResource(getClass(), UiUtilities.refreshIcon));\n\t\tJLabel refreshFlips \u003d new JLabel();\n\t\trefreshFlips.setToolTipText(\"Refresh flips\");\n\t\trefreshFlips.setIcon(refreshIcon);\n\t\trefreshFlips.addMouseListener(new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mouseClicked(MouseEvent e)\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\trefreshFlipsRunnable.run();\n\t\t\t\t}\n\t\t\t\tcatch (Exception error)\n\t\t\t\t{\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\ttotalProfitHeader.add(totalProfitLabel, BorderLayout.CENTER);\n\t\ttotalProfitContainer.add(totalProfitHeader, BorderLayout.NORTH);\n\n\t\ttotalProfitValueLabel \u003d new JLabel();\n\t\ttotalProfitValueLabel.setFont(FontManager.getRunescapeFont());\n\t\ttotalProfitValueLabel.setHorizontalAlignment(JLabel.CENTER);\n\t\ttotalProfitValueLabel.setForeground(ColorScheme.GRAND_EXCHANGE_ALCH);\n\t\ttotalProfitValueLabel.setBorder(new EmptyBorder(2, 0, 0, 0));\n\t\ttotalProfitContainer.add(totalProfitValueLabel, BorderLayout.CENTER);\n\n\t\tJPanel checkboxPanel \u003d new JPanel(new BorderLayout());\n\t\tcheckboxPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tcheckboxPanel.setBorder(new EmptyBorder(0, 2, 0, 2));\n\t\tshortenProfitCheckbox \u003d new JCheckBox(\"Use ShortHand\");\n\t\tshortenProfitCheckbox.setSelected(true);\n\t\tshortenProfitCheckbox.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tshortenProfitCheckbox.setForeground(Color.WHITE);\n\n\t\tshortenProfitCheckbox.setHorizontalTextPosition(SwingConstants.LEFT);\n\n\t\tshortenProfitCheckbox.addActionListener(e -\u003e {\n\t\t\tString currentTotalProfit \u003d totalProfitValueLabel.getToolTipText();\n\t\t\tif (currentTotalProfit !\u003d null)\n\t\t\t{\n\t\t\t\tsetTotalProfit(currentTotalProfit, shortenProfitCheckbox.isSelected());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsetTotalProfit(\"0\", shortenProfitCheckbox.isSelected());\n\t\t\t}\n\t\t});\n\t\tcheckboxPanel.add(shortenProfitCheckbox, BorderLayout.EAST);\n\t\tcheckboxPanel.add(refreshFlips, BorderLayout.WEST);\n\t\ttotalProfitContainer.add(checkboxPanel, BorderLayout.SOUTH);\n\t\ttotalProfitContainer.setBorder(UiUtilities.ITEM_INFO_BORDER);\n\t\tcontainer.add(totalProfitContainer, BorderLayout.NORTH);\n\n\t\tSearchBar searchBar \u003d new SearchBar(this.onSearchTextChanged);\n\t\tcontainer.add(searchBar, BorderLayout.CENTER);\n\n\t\tthis.trackFlipsToggle \u003d new Toggle(\"Track Flips\", true, this.toggleIsTrackingFlipsRunnable);\n\t\tcontainer.add(trackFlipsToggle, BorderLayout.SOUTH);\n\n\t\tcontainer.setBorder(new EmptyBorder(0, 0, 3, 0));\n\t\tthis.add(container, BorderLayout.NORTH);\n\n\t}\n\n\t/**\n\t * Sets the total profit label, formatting it according to the useShortFormat flag.\n\t *\n\t * @param totalProfitStr The total profit value (as a String).\n\t * @param useShortFormat Whether to use the shortened number format.\n\t */\n\tpublic void setTotalProfit(String totalProfitStr, boolean useShortFormat)\n\t{\n\t\ttry\n\t\t{\n\t\t\tint totalProfit \u003d Integer.parseInt(totalProfitStr.replace(\",\", \"\"));\n\t\t\tString formattedProfit \u003d useShortFormat\n\t\t\t\t? Numbers.toShortNumber(totalProfit)\n\t\t\t\t: Numbers.numberWithCommas(totalProfit);\n\t\t\ttotalProfitValueLabel.setText(formattedProfit);\n\t\t\ttotalProfitValueLabel.setToolTipText(Numbers.numberWithCommas(totalProfit));\n\n\t\t\tif (totalProfit \u003e\u003d 0)\n\t\t\t{\n\t\t\t\ttotalProfitValueLabel.setForeground(ColorScheme.GRAND_EXCHANGE_ALCH);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttotalProfitValueLabel.setForeground(ColorScheme.PROGRESS_ERROR_COLOR);\n\t\t\t}\n\t\t}\n\t\tcatch (NumberFormatException e)\n\t\t{\n\t\t\ttotalProfitValueLabel.setText(\"Error\");\n\t\t\ttotalProfitValueLabel.setToolTipText(null);\n\t\t}\n\t}\n\n\t/**\n\t * Overload setTotalProfit to use existing checkbox\n\t *\n\t * @param totalProfitStr The total profit value (as a String).\n\t */\n\tpublic void setTotalProfit(String totalProfitStr)\n\t{\n\t\tsetTotalProfit(totalProfitStr, this.shortenProfitCheckbox.isSelected());\n\t}\n\n\tpublic void build(Boolean isTrackingFlips)\n\t{\n\t\tJPanel scrollContainer \u003d new JPanel();\n\t\tscrollContainer.setLayout(new BorderLayout());\n\t\tcontainer \u003d new JPanel();\n\t\tcontainer.setLayout(new BoxLayout(container, BoxLayout.PAGE_AXIS));\n\t\tcontainer.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJScrollPane scrollPane \u003d new JScrollPane(scrollContainer);\n\t\tscrollPane.setBackground(ColorScheme.LIGHT_GRAY_COLOR);\n\t\tscrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);\n\n\t\tscrollContainer.add(container, BorderLayout.PAGE_START);\n\t\tthis.add(scrollPane, BorderLayout.CENTER);\n\n\t\tthis.trackFlipsToggle.setSelected(isTrackingFlips);\n\t}\n}","filePath":"src\\main\\java\\com\\flipper2\\views\\flips\\FlipPage.java"},{"fileName":"FlipPanel.java","content":"package com.flipper2.views.flips;\n\nimport java.awt.Dimension;\nimport javax.swing.JLabel;\nimport javax.swing.JOptionPane;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\n\nimport java.awt.BorderLayout;\nimport java.awt.GridLayout;\nimport java.util.UUID;\nimport java.util.function.Consumer;\nimport java.awt.Color;\nimport java.awt.event.*;\nimport java.awt.FlowLayout;\n\nimport com.flipper2.helpers.Numbers;\nimport com.flipper2.helpers.Timestamps;\nimport com.flipper2.helpers.UiUtilities;\nimport com.flipper2.helpers.CustomPanel;\nimport com.flipper2.models.Flip;\nimport com.flipper2.views.components.DeleteButton;\nimport com.flipper2.views.components.ItemHeader;\n\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.game.ItemManager;\n\npublic class FlipPanel extends JPanel\n{\n\tprivate Flip flip;\n\tprivate JPanel container;\n\tprivate JPanel itemInfoContainer;\n\n\tpublic FlipPanel(\n\t\tFlip flip,\n\t\tItemManager itemManager,\n\t\tConsumer\u003cUUID\u003e removeFlipConsumer,\n\t\tboolean isPrompt\n\t)\n\t{\n\t\tthis.flip \u003d flip;\n\t\tsetLayout(new BorderLayout());\n\t\tsetBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tcontainer \u003d new JPanel(new BorderLayout());\n\t\tcontainer.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tDeleteButton deleteFlipButton \u003d new DeleteButton((ActionEvent action) -\u003e {\n\t\t\tString describedBuy \u003d flip.describeFlip();\n\t\t\tint input \u003d isPrompt\n\t\t\t\t? JOptionPane.showConfirmDialog(null, \"Delete flip of \" + describedBuy + \"?\")\n\t\t\t\t: 0;\n\t\t\tif (input \u003d\u003d 0)\n\t\t\t{\n\t\t\t\tremoveFlipConsumer.accept(flip.getFlipId());\n\t\t\t\tsetVisible(false);\n\t\t\t}\n\t\t});\n\n\t\tJPanel itemHeader \u003d new ItemHeader(\n\t\t\tflip.getItemId(),\n\t\t\tflip.getSellPrice(),\n\t\t\tflip.getItemName(),\n\t\t\titemManager,\n\t\t\tfalse,\n\t\t\tdeleteFlipButton\n\t\t);\n\t\tcontainer.add(itemHeader, BorderLayout.NORTH);\n\n\t\tJPanel centerPanel \u003d new JPanel(new BorderLayout());\n\t\tcenterPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel titlePanel \u003d new JPanel(new FlowLayout(FlowLayout.CENTER, 0, 0));\n\t\ttitlePanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\ttitlePanel.setBorder(new EmptyBorder(4, 0, 4, 0));\n\n\t\tString amountFlippedText \u003d \"Amount Flipped: \";\n\t\tJLabel amountFlippedTextLabel \u003d new JLabel(amountFlippedText);\n\t\tamountFlippedTextLabel.setForeground(Color.white);\n\n\t\tString amountFlippedInt \u003d Integer.toString(this.flip.getQuantity());\n\t\tJLabel amountFlippedIntLabel \u003d new JLabel(Numbers.toShortNumber(Integer.parseInt(amountFlippedInt)));\n\t\tamountFlippedIntLabel.setToolTipText(Numbers.numberWithCommas(amountFlippedInt));\n\t\tamountFlippedIntLabel.setForeground(ColorScheme.GRAND_EXCHANGE_PRICE);\n\n\t\ttitlePanel.setOpaque(false);\n\t\ttitlePanel.add(amountFlippedTextLabel);\n\t\ttitlePanel.add(amountFlippedIntLabel);\n\n\t\tcenterPanel.add(titlePanel, BorderLayout.NORTH);\n\n\t\tJPanel colTitlePanel \u003d new JPanel(new GridLayout(1, 3, 0, 0));\n\t\tcolTitlePanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJLabel blankLabel \u003d new JLabel(\"\");\n\t\tcolTitlePanel.add(blankLabel);\n\n\t\tJLabel initialLabel \u003d new JLabel(\"Per\");\n\t\tinitialLabel.setHorizontalAlignment(JLabel.CENTER);\n\t\tinitialLabel.setForeground(Color.white);\n\t\tcolTitlePanel.add(initialLabel);\n\n\t\tJLabel finalLabel \u003d new JLabel(\"Total\");\n\t\tfinalLabel.setHorizontalAlignment(JLabel.CENTER);\n\t\tfinalLabel.setForeground(Color.white);\n\t\tcolTitlePanel.add(finalLabel);\n\n\t\tcenterPanel.add(colTitlePanel, BorderLayout.CENTER);\n\n\t\tconstructItemInfo();\n\t\tcenterPanel.add(itemInfoContainer, BorderLayout.SOUTH);\n\n\t\tcontainer.add(centerPanel, BorderLayout.CENTER);\n\n\t\tJPanel datePanel \u003d new JPanel(new FlowLayout(FlowLayout.CENTER, 0, 0));\n\t\tdatePanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tdatePanel.setBorder(new EmptyBorder(4, 0, 4, 0));\n\n\t\tString dateTextString \u003d \"Date: \";\n\t\tJLabel dateTextLabel \u003d new JLabel(dateTextString);\n\t\tdateTextLabel.setForeground(Color.white);\n\n\t\tString dateString \u003d Timestamps.format(flip.getCreatedAt());\n\t\tJLabel dateLabel \u003d new JLabel(dateString);\n\t\tdateLabel.setForeground(ColorScheme.GRAND_EXCHANGE_ALCH);\n\n\t\tdatePanel.setOpaque(false);\n\t\tdatePanel.add(dateTextLabel);\n\t\tdatePanel.add(dateLabel);\n\n\t\tcontainer.add(datePanel, BorderLayout.SOUTH);\n\n\t\tcontainer.setBorder(UiUtilities.ITEM_INFO_BORDER);\n\t\tthis.add(container, BorderLayout.NORTH);\n\t\tthis.setBorder(new EmptyBorder(0, 5, 3, 0));\n\t}\n\n\tprivate JLabel newLeftLabel(String text)\n\t{\n\t\tJLabel newLeftJLabel \u003d new JLabel(text);\n\t\tnewLeftJLabel.setVerticalAlignment(JLabel.CENTER);\n\t\tnewLeftJLabel.setForeground(Color.white);\n\t\tnewLeftJLabel.setBorder(new EmptyBorder(2, 2, 2, 2));\n\t\treturn newLeftJLabel;\n\t}\n\n\tprivate JLabel newRightLabel(String value, Color fontColor)\n\t{\n\t\tJLabel newRightLabel \u003d new JLabel(value);\n\t\tnewRightLabel.setHorizontalAlignment(JLabel.CENTER);\n\t\tnewRightLabel.setVerticalAlignment(JLabel.CENTER);\n\t\tnewRightLabel.setForeground(fontColor);\n\t\tnewRightLabel.setBorder(new EmptyBorder(2, 2, 2, 2));\n\t\treturn newRightLabel;\n\t}\n\n\tprivate void constructItemInfo()\n\t{\n\t\titemInfoContainer \u003d new JPanel(new GridLayout(1, 3, 0, 0));\n\t\titemInfoContainer.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel labelColumn \u003d new JPanel(new BorderLayout());\n\t\tlabelColumn.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel labelPanel \u003d new JPanel(new GridLayout(0, 1));\n\t\tlabelPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel buyColPanel \u003d new CustomPanel(new BorderLayout(), true);\n\t\tJLabel buyColLabel \u003d newLeftLabel(\"Buy Price:\");\n\t\tbuyColPanel.add(buyColLabel, BorderLayout.WEST);\n\t\tlabelPanel.add(buyColPanel);\n\n\t\tJPanel sellColPanel \u003d new CustomPanel(new BorderLayout(), true);\n\t\tJLabel sellColLabel \u003d newLeftLabel(\"Sell Price:\");\n\t\tsellColPanel.add(sellColLabel, BorderLayout.WEST);\n\t\tlabelPanel.add(sellColPanel);\n\n\t\tJPanel profitColPanel \u003d new CustomPanel(new BorderLayout(), true);\n\t\tJLabel profitColLabel \u003d newLeftLabel(\"Profit:\");\n\t\tprofitColPanel.add(profitColLabel, BorderLayout.WEST);\n\t\tlabelPanel.add(profitColPanel);\n\n\t\tJPanel taxColPanel \u003d new CustomPanel(new BorderLayout(), true);\n\t\tJLabel taxColLabel \u003d newLeftLabel(\"Tax:\");\n\t\ttaxColPanel.add(taxColLabel, BorderLayout.WEST);\n\t\tlabelPanel.add(taxColPanel);\n\n\t\tlabelColumn.add(labelPanel, BorderLayout.CENTER);\n\n\t\tJPanel column1 \u003d new JPanel(new BorderLayout());\n\t\tcolumn1.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel contentPanel1 \u003d new JPanel(new GridLayout(0, 1));\n\t\tcontentPanel1.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel buyPerPricePanel \u003d new CustomPanel(new BorderLayout(), true);\n\t\tint buyPerPrice \u003d flip.getBuyPrice();\n\t\tJLabel buyPerPriceValue \u003d newRightLabel(Numbers.toShortNumber(buyPerPrice), ColorScheme.GRAND_EXCHANGE_ALCH);\n\t\tbuyPerPriceValue.setToolTipText(Numbers.numberWithCommas(buyPerPrice));\n\t\tbuyPerPricePanel.add(buyPerPriceValue, BorderLayout.CENTER);\n\t\tcontentPanel1.add(buyPerPricePanel);\n\n\t\tJPanel sellPerPricePanel \u003d new CustomPanel(new BorderLayout(), true);\n\t\tint SellPerPrice \u003d flip.getSellPrice();\n\t\tJLabel sellPerPriceValue \u003d newRightLabel(Numbers.toShortNumber(SellPerPrice), ColorScheme.GRAND_EXCHANGE_ALCH);\n\t\tsellPerPriceValue.setToolTipText(Numbers.numberWithCommas(SellPerPrice));\n\t\tsellPerPricePanel.add(sellPerPriceValue, BorderLayout.CENTER);\n\t\tcontentPanel1.add(sellPerPricePanel);\n\n\t\tJPanel profitPerPanel \u003d new CustomPanel(new BorderLayout(), true);\n\t\tint profitPer \u003d flip.getSellPrice() - flip.getBuyPrice() - flip.getTax();\n\t\tColor profitPerColor \u003d profitPer \u003e 0 ? ColorScheme.GRAND_EXCHANGE_ALCH : ColorScheme.PROGRESS_ERROR_COLOR;\n\t\tJLabel profitPerValue \u003d newRightLabel(Numbers.toShortNumber(profitPer), profitPerColor);\n\t\tprofitPerValue.setToolTipText(Numbers.numberWithCommas(profitPer));\n\t\tprofitPerPanel.add(profitPerValue, BorderLayout.CENTER);\n\t\tcontentPanel1.add(profitPerPanel);\n\n\t\tJPanel taxPerPanel \u003d new CustomPanel(new BorderLayout(), true);\n\t\tint taxPer \u003d flip.getTax();\n\t\tString taxPerText \u003d Numbers.toShortNumber(taxPer);\n\t\tJLabel taxPerValue \u003d newRightLabel(taxPerText, ColorScheme.PROGRESS_ERROR_COLOR);\n\t\ttaxPerValue.setToolTipText(Numbers.numberWithCommas(taxPer));\n\t\ttaxPerPanel.add(taxPerValue, BorderLayout.CENTER);\n\t\tcontentPanel1.add(taxPerPanel);\n\n\t\tcolumn1.add(contentPanel1, BorderLayout.CENTER);\n\n\t\tJPanel column2 \u003d new JPanel(new BorderLayout());\n\t\tcolumn2.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel contentPanel2 \u003d new JPanel(new GridLayout(0, 1));\n\t\tcontentPanel2.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel buyPricePanel \u003d new CustomPanel(new BorderLayout(), true);\n\t\tint buyPrice \u003d flip.getTotalBuy();\n\t\tJLabel buyPriceValue \u003d newRightLabel(Numbers.toShortNumber(buyPrice), ColorScheme.GRAND_EXCHANGE_ALCH);\n\t\tbuyPriceValue.setToolTipText(Numbers.numberWithCommas(buyPrice));\n\t\tbuyPricePanel.add(buyPriceValue, BorderLayout.CENTER);\n\t\tcontentPanel2.add(buyPricePanel);\n\n\t\tJPanel sellPricePanel \u003d new CustomPanel(new BorderLayout(), true);\n\t\tint sellPrice \u003d flip.getTotalSell();\n\t\tJLabel sellPriceValue \u003d newRightLabel(Numbers.toShortNumber(sellPrice), ColorScheme.GRAND_EXCHANGE_ALCH);\n\t\tsellPriceValue.setToolTipText(Numbers.numberWithCommas(sellPrice));\n\t\tsellPricePanel.add(sellPriceValue, BorderLayout.CENTER);\n\t\tcontentPanel2.add(sellPricePanel);\n\n\t\tJPanel totalProfitPanel \u003d new CustomPanel(new BorderLayout(), true);\n\t\tint totalProfit \u003d flip.getTotalProfit();\n\t\tColor profitColor \u003d totalProfit \u003e 0 ? ColorScheme.GRAND_EXCHANGE_ALCH : ColorScheme.PROGRESS_ERROR_COLOR;\n\t\tJLabel totalProfitValue \u003d newRightLabel(Numbers.toShortNumber(totalProfit), profitColor);\n\t\ttotalProfitValue.setToolTipText(Numbers.numberWithCommas(totalProfit));\n\t\ttotalProfitPanel.add(totalProfitValue, BorderLayout.CENTER);\n\t\tcontentPanel2.add(totalProfitPanel);\n\n\t\tJPanel totalTaxPanel \u003d new CustomPanel(new BorderLayout(), true);\n\t\tint totalTax \u003d flip.getTotalTax();\n\t\tJLabel totalTaxValue \u003d newRightLabel(Numbers.toShortNumber(totalTax), ColorScheme.PROGRESS_ERROR_COLOR);\n\t\ttotalTaxValue.setToolTipText(Numbers.numberWithCommas(totalTax));\n\t\ttotalTaxPanel.add(totalTaxValue, BorderLayout.CENTER);\n\t\tcontentPanel2.add(totalTaxPanel);\n\n\t\tcolumn2.add(contentPanel2, BorderLayout.CENTER);\n\n\t\titemInfoContainer.add(labelColumn);\n\t\titemInfoContainer.add(column1);\n\t\titemInfoContainer.add(column2);\n\t}\n\n\t@Override\n\tpublic Dimension getPreferredSize()\n\t{\n\t\tDimension preferredSize \u003d super.getPreferredSize();\n\t\treturn new Dimension(container.getPreferredSize().width, preferredSize.height);\n\t}\n}","filePath":"src\\main\\java\\com\\flipper2\\views\\flips\\FlipPanel.java"},{"fileName":"InProgressPage.java","content":"package com.flipper2.views.inprogress;\n\nimport javax.swing.BoxLayout;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\nimport javax.swing.border.EmptyBorder;\n\nimport java.awt.BorderLayout;\n\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.api.GrandExchangeOffer;\nimport net.runelite.api.ItemComposition;\nimport java.awt.image.BufferedImage;\nimport java.util.Arrays;\n\n\npublic class InProgressPage extends JPanel\n{\n\tprivate JPanel container;\n\tprivate static final int MAX_OFFERS \u003d 8;\n\tprivate InProgressPanel[] inProgressPanels \u003d new InProgressPanel[MAX_OFFERS];\n\n\tpublic InProgressPage()\n\t{\n\t\tthis.setLayout(new BorderLayout());\n\t\tthis.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tthis.build();\n\t}\n\n\tpublic void resetOffers()\n\t{\n\t\tcontainer.removeAll();\n\t\tArrays.fill(inProgressPanels, null);\n\t\trevalidate();\n\t\trepaint();\n\t}\n\n\tpublic void build()\n\t{\n\t\tJPanel scrollContainer \u003d new JPanel();\n\t\tscrollContainer.setLayout(new BorderLayout());\n\t\tcontainer \u003d new JPanel();\n\t\tcontainer.setBorder(new EmptyBorder(2, 0, 0, 0));\n\t\tcontainer.setLayout(new BoxLayout(container, BoxLayout.PAGE_AXIS));\n\t\tcontainer.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJScrollPane scrollPane \u003d new JScrollPane(scrollContainer);\n\t\tscrollPane.setBackground(ColorScheme.LIGHT_GRAY_COLOR);\n\t\tscrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);\n\n\t\tscrollContainer.add(container, BorderLayout.PAGE_START);\n\t\tthis.add(scrollPane, BorderLayout.CENTER);\n\t}\n\n\tpublic void updateOffer(ItemComposition item, BufferedImage itemImage, GrandExchangeOffer newOffer, int slot)\n\t{\n\t\t/* If slot was previously filled, and is now empty, remove it from the list */\n\t\tif (newOffer \u003d\u003d null || newOffer.getState() \u003d\u003d net.runelite.api.GrandExchangeOfferState.EMPTY)\n\t\t{\n\t\t\tif (inProgressPanels[slot] !\u003d null)\n\t\t\t{\n\t\t\t\tcontainer.remove(inProgressPanels[slot]);\n\t\t\t\tinProgressPanels[slot] \u003d null;\n\t\t\t\trevalidate();\n\t\t\t\trepaint();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t/* If slot was empty, and is now filled, add it to the list */\n\t\tInProgressPanel offerSlot \u003d inProgressPanels[slot];\n\t\tif (offerSlot \u003d\u003d null)\n\t\t{\n\t\t\tofferSlot \u003d new InProgressPanel(item, itemImage, newOffer);\n\t\t\tinProgressPanels[slot] \u003d offerSlot;\n\t\t\tcontainer.add(offerSlot);\n\t\t}\n\n\t\tofferSlot.updateOffer(item, itemImage, newOffer);\n\n\t\trevalidate();\n\t\trepaint();\n\t}\n}","filePath":"src\\main\\java\\com\\flipper2\\views\\inprogress\\InProgressPage.java"},{"fileName":"InProgressPanel.java","content":"package com.flipper2.views.inprogress;\n\nimport java.awt.Dimension;\nimport javax.swing.*;\nimport javax.swing.border.EmptyBorder;\n\nimport java.awt.BorderLayout;\nimport java.awt.GridLayout;\nimport java.awt.Color;\nimport java.awt.image.BufferedImage;\n\nimport com.flipper2.helpers.Numbers;\nimport com.flipper2.helpers.UiUtilities;\nimport com.flipper2.helpers.CustomPanel;\nimport com.flipper2.views.components.InProgressHeader;\n\nimport net.runelite.api.GrandExchangeOffer;\nimport net.runelite.api.GrandExchangeOfferState;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.api.ItemComposition;\n\nimport static com.flipper2.helpers.GrandExchange.checkIsActive;\nimport static com.flipper2.helpers.GrandExchange.checkIsBoughtSold;\nimport static com.flipper2.helpers.GrandExchange.checkIsBuy;\nimport static com.flipper2.helpers.GrandExchange.checkIsCancelState;\n\npublic class InProgressPanel extends JPanel\n{\n\tprivate JPanel container;\n\tprivate JPanel itemInfoContainer;\n\tprivate JLabel quantityProgressLabel;\n\tprivate JProgressBar progressBar;\n\n\tpublic InProgressPanel(ItemComposition item, BufferedImage itemImage, GrandExchangeOffer offer)\n\t{\n\t\tsetLayout(new BorderLayout());\n\t\tsetBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tcontainer \u003d new JPanel(new BorderLayout());\n\t\tcontainer.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tquantityProgressLabel \u003d new JLabel();\n\t\tquantityProgressLabel.setForeground(ColorScheme.GRAND_EXCHANGE_PRICE);\n\t\tquantityProgressLabel.setBorder(new EmptyBorder(3, 0, 3, 0));\n\t\tquantityProgressLabel.setHorizontalAlignment(JLabel.CENTER);\n\n\t\tprogressBar \u003d new JProgressBar(0, 100);\n\t\tprogressBar.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tprogressBar.setForeground(ColorScheme.PROGRESS_INPROGRESS_COLOR);\n\t\tprogressBar.setStringPainted(true);\n\n\t\tconstructItemInfo();\n\n\t\tcontainer.setBorder(UiUtilities.ITEM_INFO_BORDER);\n\t\tthis.add(container, BorderLayout.NORTH);\n\t\tthis.setBorder(new EmptyBorder(3, 5, 3, 5));\n\t}\n\n\tprivate JLabel newLeftLabel(String text)\n\t{\n\t\tJLabel newLeftJLabel \u003d new JLabel(text);\n\t\tnewLeftJLabel.setVerticalAlignment(JLabel.CENTER);\n\t\tnewLeftJLabel.setVerticalAlignment(JLabel.CENTER);\n\t\tnewLeftJLabel.setForeground(Color.white);\n\t\tnewLeftJLabel.setBorder(new EmptyBorder(4, 2, 3, 2));\n\t\treturn newLeftJLabel;\n\t}\n\n\tprivate JLabel newRightLabel(String value, Color fontColor)\n\t{\n\t\tJLabel newRightLabel \u003d new JLabel(value);\n\t\tnewRightLabel.setHorizontalAlignment(JLabel.CENTER);\n\t\tnewRightLabel.setVerticalAlignment(JLabel.CENTER);\n\t\tnewRightLabel.setForeground(fontColor);\n\t\tnewRightLabel.setBorder(new EmptyBorder(4, 2, 3, 2));\n\t\treturn newRightLabel;\n\t}\n\n\tprivate void constructItemInfo()\n\t{\n\t\titemInfoContainer \u003d new JPanel(new GridLayout(1, 3, 0, 0));\n\t\titemInfoContainer.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel column1 \u003d new JPanel(new BorderLayout());\n\t\tcolumn1.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel labelPanel \u003d new JPanel(new GridLayout(0, 1));\n\t\tlabelPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel offerTotalPanelLabel \u003d new CustomPanel(new BorderLayout(), true);\n\t\tofferTotalPanelLabel.add(newLeftLabel(\"Offer Total:\"), BorderLayout.WEST);\n\t\tlabelPanel.add(offerTotalPanelLabel);\n\n\t\tJPanel pricePerPanelLabel \u003d new CustomPanel(new BorderLayout(), true);\n\t\tpricePerPanelLabel.add(newLeftLabel(\"Price/Per:\"), BorderLayout.WEST);\n\t\tlabelPanel.add(pricePerPanelLabel);\n\n\t\tcolumn1.add(labelPanel, BorderLayout.CENTER);\n\n\n\t\tJPanel column2 \u003d new JPanel(new BorderLayout());\n\t\tcolumn2.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel contentPanel1 \u003d new JPanel(new GridLayout(0, 1));\n\t\tcontentPanel1.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel totalValuePanel \u003d new CustomPanel(new BorderLayout(), true);\n\t\ttotalValuePanel.add(newRightLabel(\"0\", ColorScheme.GRAND_EXCHANGE_ALCH));\n\n\t\tcontentPanel1.add(totalValuePanel);\n\n\t\tJPanel pricePerPanel \u003d new CustomPanel(new BorderLayout(), true);\n\t\tpricePerPanel.add(newRightLabel(\"0\", ColorScheme.GRAND_EXCHANGE_ALCH));\n\t\tcontentPanel1.add(pricePerPanel);\n\n\t\tcolumn2.add(contentPanel1, BorderLayout.CENTER);\n\n\t\tJPanel column3 \u003d new JPanel(new BorderLayout());\n\t\tcolumn3.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel contentPanel2 \u003d new JPanel(new GridLayout(0, 1));\n\t\tcontentPanel2.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel spentPanel \u003d new CustomPanel(new BorderLayout(), true);\n\t\tspentPanel.add(newRightLabel(\"0\", ColorScheme.GRAND_EXCHANGE_ALCH));\n\t\tcontentPanel2.add(spentPanel);\n\n\t\tJPanel spentPerPanel \u003d new CustomPanel(new BorderLayout(), true);\n\t\tspentPerPanel.add(newRightLabel(\"0\", ColorScheme.GRAND_EXCHANGE_ALCH));\n\t\tcontentPanel2.add(spentPerPanel);\n\n\t\tcolumn3.add(contentPanel2, BorderLayout.CENTER);\n\n\t\titemInfoContainer.add(column1);\n\t\titemInfoContainer.add(column2);\n\t\titemInfoContainer.add(column3);\n\t}\n\n\tpublic void updateOffer(ItemComposition offerItem, BufferedImage itemImage, GrandExchangeOffer offer)\n\t{\n\t\tGrandExchangeOfferState state \u003d offer.getState();\n\t\tboolean isBuy \u003d checkIsBuy(state);\n\t\tboolean isActive \u003d checkIsActive(state);\n\t\tboolean isBoughtSold \u003d checkIsBoughtSold(state);\n\t\tboolean isCancelled \u003d checkIsCancelState(state);\n\n\t\tif (container.getComponentCount() \u003d\u003d 3)\n\t\t{\n\t\t\tcontainer.remove(2);\n\t\t\tcontainer.remove(1);\n\t\t\tcontainer.remove(0);\n\t\t}\n\t\tInProgressHeader header \u003d new InProgressHeader(offerItem, itemImage, offer);\n\t\tcontainer.add(header, BorderLayout.NORTH);\n\n\t\tJPanel titlePanel \u003d new JPanel(new GridLayout(1, 3, 0, 0));\n\t\ttitlePanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\ttitlePanel.setBorder(new EmptyBorder(2, 2, 2, 2));\n\n\n\t\tString offerType;\n\t\tColor offerColor;\n\t\tif (isActive)\n\t\t{\n\t\t\tofferType \u003d \"Active\";\n\t\t\tofferColor \u003d ColorScheme.PROGRESS_INPROGRESS_COLOR;\n\t\t}\n\t\telse if (isBoughtSold)\n\t\t{\n\t\t\tofferType \u003d \"Complete\";\n\t\t\tofferColor \u003d ColorScheme.PROGRESS_COMPLETE_COLOR;\n\t\t}\n\t\telse if (isCancelled)\n\t\t{\n\t\t\tofferType \u003d \"Cancelled\";\n\t\t\tofferColor \u003d ColorScheme.PROGRESS_ERROR_COLOR;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tofferType \u003d \"Error\";\n\t\t\tofferColor \u003d ColorScheme.PROGRESS_ERROR_COLOR;\n\t\t}\n\n\t\tJLabel offerTypeLabel \u003d new JLabel(offerType);\n\t\tofferTypeLabel.setHorizontalAlignment(JLabel.LEFT);\n\t\tofferTypeLabel.setForeground(offerColor);\n\n\t\tString offerInit \u003d (\"Offered\");\n\t\tJLabel offerInitLabel \u003d new JLabel(offerInit);\n\t\tofferInitLabel.setHorizontalAlignment(JLabel.CENTER);\n\t\tofferInitLabel.setForeground(Color.white);\n\n\t\tString offerCurrent \u003d (isBuy ? \"Spent\" : \"Received\");\n\t\tJLabel offerCurrentLabel \u003d new JLabel(offerCurrent);\n\t\tofferCurrentLabel.setHorizontalAlignment(JLabel.CENTER);\n\t\tofferCurrentLabel.setForeground(Color.white);\n\n\t\ttitlePanel.add(offerTypeLabel);\n\t\ttitlePanel.add(offerInitLabel);\n\t\ttitlePanel.add(offerCurrentLabel);\n\n\n\t\tJPanel centerPanel \u003d new JPanel(new BorderLayout());\n\t\tcenterPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tcenterPanel.add(titlePanel, BorderLayout.NORTH);\n\t\tconstructItemInfo();\n\t\tcenterPanel.add(itemInfoContainer, BorderLayout.CENTER);\n\t\tcontainer.add(centerPanel, BorderLayout.CENTER);\n\n\t\tJPanel bottomPanel \u003d new JPanel(new BorderLayout());\n\t\tbottomPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tbottomPanel.add(quantityProgressLabel, BorderLayout.NORTH);\n\t\tbottomPanel.add(progressBar, BorderLayout.SOUTH);\n\t\tcontainer.add(bottomPanel, BorderLayout.SOUTH);\n\n\t\tint quantitySold \u003d offer.getQuantitySold();\n\t\tint totalQuantity \u003d offer.getTotalQuantity();\n\t\tint spent \u003d offer.getSpent();\n\t\tint price \u003d offer.getPrice();\n\n\t\tquantityProgressLabel.setText(Numbers.toShortNumber(quantitySold) + \" / \" + Numbers.toShortNumber(totalQuantity));\n\t\tquantityProgressLabel.setToolTipText(Numbers.numberWithCommas(quantitySold) + \" / \" + Numbers.numberWithCommas(totalQuantity));\n\n\t\tint percentage \u003d totalQuantity \u003e 0 ? (int) (((double) quantitySold / totalQuantity) * 100) : 0;\n\t\tprogressBar.setValue(percentage);\n\t\tprogressBar.setString(percentage + \"%\");\n\t\tif (isActive \u0026\u0026 percentage \u003c\u003d 49)\n\t\t{\n\t\t\tprogressBar.setForeground(ColorScheme.PROGRESS_INPROGRESS_COLOR);\n\t\t}\n\t\telse if (isActive \u0026\u0026 percentage \u003e\u003d 50 \u0026\u0026 percentage \u003c\u003d 99)\n\t\t{\n\t\t\tprogressBar.setForeground(ColorScheme.PROGRESS_COMPLETE_COLOR.brighter());\n\t\t}\n\t\telse if (isBoughtSold \u0026\u0026 percentage \u003d\u003d 100)\n\t\t{\n\t\t\tprogressBar.setForeground(ColorScheme.PROGRESS_COMPLETE_COLOR);\n\t\t}\n\t\telse if (isCancelled)\n\t\t{\n\t\t\tprogressBar.setForeground(ColorScheme.PROGRESS_ERROR_COLOR);\n\t\t}\n\n\n\t\tJPanel contentPanel1 \u003d (JPanel) ((JPanel) itemInfoContainer.getComponent(1)).getComponent(0);\n\t\tJPanel contentPanel2 \u003d (JPanel) ((JPanel) itemInfoContainer.getComponent(2)).getComponent(0);\n\n\t\tJLabel totalValueValue \u003d (JLabel) ((JPanel) contentPanel1.getComponent(0)).getComponent(0);\n\t\tint totalValue \u003d totalQuantity * price;\n\t\ttotalValueValue.setText(Numbers.toShortNumber(totalValue));\n\t\ttotalValueValue.setToolTipText(Numbers.numberWithCommas(totalValue));\n\n\n\t\tJLabel pricePerValue \u003d (JLabel) ((JPanel) contentPanel1.getComponent(1)).getComponent(0);\n\t\tpricePerValue.setText(Numbers.toShortNumber(price));\n\t\tpricePerValue.setToolTipText(Numbers.numberWithCommas(price));\n\n\n\t\tJLabel spentValue \u003d (JLabel) ((JPanel) contentPanel2.getComponent(0)).getComponent(0);\n\t\tspentValue.setText(Numbers.toShortNumber(spent));\n\t\tspentValue.setToolTipText(Numbers.numberWithCommas(spent));\n\n\t\tint spentPer \u003d (quantitySold \u003e 0) ? spent / quantitySold : 0;\n\t\tJLabel spentPerValue \u003d (JLabel) ((JPanel) contentPanel2.getComponent(1)).getComponent(0);\n\t\tspentPerValue.setText(Numbers.toShortNumber(spentPer));\n\t\tspentPerValue.setToolTipText(Numbers.numberWithCommas(spentPer));\n\n\t\trevalidate();\n\t\trepaint();\n\t}\n\n\t@Override\n\tpublic Dimension getPreferredSize()\n\t{\n\t\tDimension preferredSize \u003d super.getPreferredSize();\n\t\treturn new Dimension(container.getPreferredSize().width, preferredSize.height);\n\t}\n\n\tpublic void reset()\n\t{\n\t\tcontainer.removeAll();\n\t\trevalidate();\n\t\trepaint();\n\t}\n}","filePath":"src\\main\\java\\com\\flipper2\\views\\inprogress\\InProgressPanel.java"},{"fileName":"TabManager.java","content":"package com.flipper2.views;\n\nimport java.awt.BorderLayout;\nimport java.awt.GridLayout;\nimport java.awt.Desktop;\n\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.net.URI;\n\nimport javax.swing.ImageIcon;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.SwingUtilities;\nimport javax.swing.border.EmptyBorder;\n\nimport com.flipper2.helpers.UiUtilities;\nimport com.flipper2.views.components.Tab;\nimport com.flipper2.views.inprogress.InProgressPage;\nimport com.flipper2.views.transactions.TransactionPage;\nimport com.flipper2.views.flips.FlipPage;\n\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.PluginPanel;\nimport net.runelite.client.ui.components.materialtabs.MaterialTabGroup;\nimport net.runelite.client.util.ImageUtil;\n\npublic class TabManager extends PluginPanel\n{\n\n\tpublic TabManager()\n\t{\n\t\tsuper(false);\n\t\tthis.setLayout(new BorderLayout());\n\t}\n\n\tprivate JPanel constructTopBar()\n\t{\n\t\tJPanel container \u003d new JPanel();\n\t\tcontainer.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tcontainer.setLayout(new BorderLayout());\n\t\tcontainer.setBorder(new EmptyBorder(0, 0, 5, 0));\n\t\tJPanel topBar \u003d new JPanel();\n\t\ttopBar.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tint columns \u003d 1;\n\t\ttopBar.setLayout(new GridLayout(1, columns));\n\n\t\tJLabel github \u003d new JLabel();\n\t\tgithub.setToolTipText(\"Flipper2 Pluggin Github\");\n\t\tgithub.setHorizontalAlignment(JLabel.RIGHT);\n\t\tgithub.addMouseListener(new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mouseClicked(MouseEvent e)\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tDesktop desktop \u003d Desktop.getDesktop();\n\t\t\t\t\tURI githubUri \u003d new URI(\"https://github.com/UmaLPZ/OSRS-Flipper-2\");\n\t\t\t\t\tdesktop.browse(githubUri);\n\t\t\t\t}\n\t\t\t\tcatch (Exception error)\n\t\t\t\t{\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tImageIcon githubIcon \u003d new ImageIcon(ImageUtil.loadImageResource(getClass(), UiUtilities.githubIcon));\n\t\tgithub.setIcon(githubIcon);\n\t\ttopBar.add(github);\n\n\t\tcontainer.add(topBar);\n\t\tcontainer.setBorder(new EmptyBorder(0, 0, 5, 5));\n\t\treturn container;\n\t}\n\n\tpublic void renderLoggedInView(\n\t\tTransactionPage buyPage,\n\t\tTransactionPage sellPage,\n\t\tFlipPage flipPage,\n\t\tInProgressPage inProgressPage\n\t)\n\t{\n\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\tthis.removeAll();\n\t\t\tJPanel topBar \u003d this.constructTopBar();\n\t\t\tJPanel display \u003d new JPanel();\n\t\t\tJPanel header \u003d new JPanel(new BorderLayout());\n\t\t\theader.setBorder(new EmptyBorder(5, 0, 0, 0));\n\t\t\tMaterialTabGroup tabGroup \u003d new MaterialTabGroup(display);\n\t\t\tTab buysTab \u003d new Tab(\"Buys\", tabGroup, buyPage);\n\t\t\tTab sellsTab \u003d new Tab(\"Sells\", tabGroup, sellPage);\n\t\t\tTab flipsTab \u003d new Tab(\"Flips\", tabGroup, flipPage);\n\t\t\tTab inProgressTab \u003d new Tab(\"In Progress\", tabGroup, inProgressPage);\n\t\t\ttabGroup.setBorder(new EmptyBorder(5, 0, 2, 0));\n\t\t\ttabGroup.addTab(buysTab);\n\t\t\ttabGroup.addTab(sellsTab);\n\t\t\ttabGroup.addTab(flipsTab);\n\t\t\ttabGroup.addTab(inProgressTab);\n\t\t\ttabGroup.select(buysTab);\n\t\t\tJPanel tabGroupContainer \u003d new JPanel();\n\t\t\ttabGroupContainer.setBackground(ColorScheme.DARKER_GRAY_COLOR.darker());\n\t\t\ttabGroupContainer.add(tabGroup);\n\t\t\theader.add(topBar, BorderLayout.NORTH);\n\t\t\theader.add(tabGroupContainer, BorderLayout.CENTER);\n\t\t\tadd(header, BorderLayout.NORTH);\n\t\t\tadd(display, BorderLayout.CENTER);\n\t\t\tthis.revalidate();\n\t\t});\n\t}\n}","filePath":"src\\main\\java\\com\\flipper2\\views\\TabManager.java"},{"fileName":"TransactionPage.java","content":"package com.flipper2.views.transactions;\n\nimport javax.swing.BoxLayout;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\nimport javax.swing.border.EmptyBorder;\n\nimport com.flipper2.views.components.SearchBar;\n\nimport java.awt.BorderLayout;\nimport java.util.function.Consumer;\n\nimport net.runelite.client.ui.ColorScheme;\n\npublic class TransactionPage extends JPanel\n{\n\tprivate JPanel container;\n\n\tpublic TransactionPage(Consumer\u003cString\u003e onSearchTextChanged)\n\t{\n\t\tthis.setLayout(new BorderLayout());\n\t\tthis.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tthis.addSearchText(onSearchTextChanged);\n\t\tthis.build();\n\t}\n\n\tprivate void addSearchText(Consumer\u003cString\u003e onSearchTextChanged)\n\t{\n\t\tSearchBar searchBar \u003d new SearchBar(onSearchTextChanged);\n\t\tthis.add(searchBar, BorderLayout.NORTH);\n\t}\n\n\tpublic void resetContainer()\n\t{\n\t\tcontainer.removeAll();\n\t}\n\n\tpublic void build()\n\t{\n\t\tJPanel scrollContainer \u003d new JPanel();\n\t\tscrollContainer.setLayout(new BorderLayout());\n\t\tcontainer \u003d new JPanel();\n\t\tcontainer.setBorder(new EmptyBorder(5, 0, 0, 0));\n\t\tcontainer.setLayout(new BoxLayout(container, BoxLayout.PAGE_AXIS));\n\t\tcontainer.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJScrollPane scrollPane \u003d new JScrollPane(scrollContainer);\n\t\tscrollPane.setBackground(ColorScheme.LIGHT_GRAY_COLOR);\n\t\tscrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);\n\n\t\tscrollContainer.add(container, BorderLayout.PAGE_START);\n\t\tthis.add(scrollPane, BorderLayout.CENTER);\n\t}\n\n\tpublic void addTransactionPanel(TransactionPanel transactionPanel)\n\t{\n\t\tcontainer.add(transactionPanel, BorderLayout.CENTER);\n\t\tthis.revalidate();\n\t}\n}","filePath":"src\\main\\java\\com\\flipper2\\views\\transactions\\TransactionPage.java"},{"fileName":"TransactionPanel.java","content":"package com.flipper2.views.transactions;\n\nimport javax.swing.JLabel;\nimport javax.swing.JOptionPane;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\n\nimport java.awt.BorderLayout;\nimport java.awt.FlowLayout;\nimport java.awt.GridLayout;\nimport java.awt.Color;\nimport java.awt.event.*;\nimport java.awt.Dimension;\n\nimport com.flipper2.helpers.UiUtilities;\nimport com.flipper2.helpers.Numbers;\nimport com.flipper2.helpers.Timestamps;\nimport com.flipper2.helpers.CustomPanel;\nimport com.flipper2.models.Transaction;\nimport com.flipper2.views.components.DeleteButton;\nimport com.flipper2.views.components.ItemHeader;\n\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.ColorScheme;\n\nimport java.util.UUID;\nimport java.util.function.Consumer;\n\npublic class TransactionPanel extends JPanel\n{\n\tprivate Transaction transaction;\n\tprivate JPanel container;\n\tprivate JPanel itemInfoContainer;\n\n\tpublic TransactionPanel(\n\t\tString name,\n\t\tTransaction transaction,\n\t\tItemManager itemManager,\n\t\tConsumer\u003cUUID\u003e removeTransactionConsumer,\n\t\tboolean isPrompt\n\t)\n\t{\n\t\tinit(\n\t\t\tname,\n\t\t\ttransaction,\n\t\t\titemManager,\n\t\t\tremoveTransactionConsumer,\n\t\t\tisPrompt\n\t\t);\n\t}\n\n\tprivate void init(\n\t\tString name,\n\t\tTransaction transaction,\n\t\tItemManager itemManager,\n\t\tConsumer\u003cUUID\u003e removeTransactionConsumer,\n\t\tboolean isPrompt\n\t)\n\t{\n\t\tthis.transaction \u003d transaction;\n\t\tsetLayout(new BorderLayout());\n\t\tsetBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tDeleteButton deleteTransactionButton \u003d new DeleteButton((ActionEvent action) -\u003e {\n\t\t\tString describeTransaction \u003d transaction.describeTransaction();\n\t\t\tint input \u003d isPrompt\n\t\t\t\t? JOptionPane.showConfirmDialog(\n\t\t\t\tnull,\n\t\t\t\t\"Delete \" + name + \" of \" + describeTransaction + \"?\"\n\t\t\t)\n\t\t\t\t: 0;\n\t\t\tif (input \u003d\u003d 0)\n\t\t\t{\n\t\t\t\tremoveTransactionConsumer.accept(transaction.getId());\n\t\t\t\tsetVisible(false);\n\t\t\t}\n\t\t});\n\n\t\tcontainer \u003d new JPanel(new BorderLayout());\n\t\tcontainer.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel itemHeader \u003d new ItemHeader(\n\t\t\ttransaction.getItemId(),\n\t\t\ttransaction.getFinPricePer(),\n\t\t\ttransaction.getItemName(),\n\t\t\titemManager,\n\t\t\tfalse,\n\t\t\tdeleteTransactionButton\n\t\t);\n\t\tcontainer.add(itemHeader, BorderLayout.NORTH);\n\n\t\tJPanel centerPanel \u003d new JPanel(new BorderLayout());\n\t\tcenterPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel titlePanel \u003d new JPanel(new GridLayout(1, 3, 0, 0));\n\t\ttitlePanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJLabel blankLabel \u003d new JLabel(\"\");\n\t\ttitlePanel.add(blankLabel);\n\n\t\tJLabel initialLabel \u003d new JLabel(\"Initial\");\n\t\tinitialLabel.setHorizontalAlignment(JLabel.CENTER);\n\t\tinitialLabel.setForeground(Color.white);\n\t\ttitlePanel.add(initialLabel);\n\n\t\tJLabel finalLabel \u003d new JLabel(\"Final\");\n\t\tfinalLabel.setHorizontalAlignment(JLabel.CENTER);\n\t\tfinalLabel.setForeground(Color.white);\n\t\ttitlePanel.add(finalLabel);\n\n\t\tcenterPanel.add(titlePanel, BorderLayout.NORTH);\n\n\t\tconstructItemInfo();\n\t\tcenterPanel.add(itemInfoContainer, BorderLayout.CENTER);\n\n\t\tcontainer.add(centerPanel, BorderLayout.CENTER);\n\n\t\tJPanel datePanel \u003d new JPanel(new FlowLayout(FlowLayout.CENTER, 0, 0));\n\t\tdatePanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tdatePanel.setBorder(new EmptyBorder(4, 0, 4, 0));\n\n\t\tString dateTextString \u003d \"Date: \";\n\t\tJLabel dateTextLabel \u003d new JLabel(dateTextString);\n\t\tdateTextLabel.setForeground(Color.white);\n\n\t\tString dateString \u003d Timestamps.format(transaction.getCreatedTime());\n\t\tJLabel dateLabel \u003d new JLabel(dateString);\n\t\tdateLabel.setForeground(ColorScheme.GRAND_EXCHANGE_ALCH);\n\n\t\tdatePanel.setOpaque(false);\n\t\tdatePanel.add(dateTextLabel);\n\t\tdatePanel.add(dateLabel);\n\n\t\tcontainer.add(datePanel, BorderLayout.SOUTH);\n\n\t\tcontainer.setBorder(UiUtilities.ITEM_INFO_BORDER);\n\t\tthis.add(container, BorderLayout.NORTH);\n\t\tthis.setBorder(new EmptyBorder(1, 5, 1, 0));\n\t}\n\n\tprivate JLabel newLeftLabel(String text)\n\t{\n\t\tJLabel newLeftJLabel \u003d new JLabel(text);\n\t\tnewLeftJLabel.setVerticalAlignment(JLabel.CENTER);\n\t\tnewLeftJLabel.setForeground(Color.white);\n\t\tnewLeftJLabel.setBorder(new EmptyBorder(3, 2, 2, 2));\n\t\treturn newLeftJLabel;\n\t}\n\n\tprivate JLabel newRightLabel(String value, Color fontColor)\n\t{\n\t\tJLabel newRightLabel \u003d new JLabel(value);\n\t\tnewRightLabel.setHorizontalAlignment(JLabel.CENTER);\n\t\tnewRightLabel.setVerticalAlignment(JLabel.CENTER);\n\t\tnewRightLabel.setForeground(fontColor);\n\t\tnewRightLabel.setBorder(new EmptyBorder(3, 2, 2, 2));\n\t\treturn newRightLabel;\n\t}\n\n\tprivate int calculateTax(int pricePer)\n\t{\n\t\tint tax \u003d (int) Math.floor(pricePer * Transaction.TAX_RATE);\n\t\treturn Math.min(tax, Transaction.MAX_TAX);\n\t}\n\n\tprivate void constructItemInfo()\n\t{\n\t\titemInfoContainer \u003d new JPanel(new GridLayout(1, 3, 0, 0));\n\t\titemInfoContainer.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel labelColumn \u003d new JPanel(new BorderLayout());\n\t\tlabelColumn.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel labelPanel \u003d new JPanel(new GridLayout(0, 1));\n\t\tlabelPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel initQuantityLabel \u003d new CustomPanel(new BorderLayout(), true);\n\t\tJLabel quantityLabelInit \u003d newLeftLabel(\"Quantity:\");\n\t\tinitQuantityLabel.add(quantityLabelInit, BorderLayout.WEST);\n\t\tlabelPanel.add(initQuantityLabel);\n\n\t\tJPanel initPriceLabel \u003d new CustomPanel(new BorderLayout(), true);\n\t\tJLabel priceLabelInit \u003d newLeftLabel(\"Price/Per:\");\n\t\tinitPriceLabel.add(priceLabelInit, BorderLayout.WEST);\n\t\tlabelPanel.add(initPriceLabel);\n\n\t\tif (!transaction.isBuy())\n\t\t{\n\t\t\tJPanel taxPanelLabel \u003d new CustomPanel(new BorderLayout(), true);\n\t\t\tJLabel taxLabel \u003d newLeftLabel(\"Tax/Per:\");\n\t\t\ttaxPanelLabel.add(taxLabel, BorderLayout.WEST);\n\t\t\tlabelPanel.add(taxPanelLabel);\n\t\t}\n\n\t\tJPanel initTotalLabel \u003d new CustomPanel(new BorderLayout(), true);\n\t\tJLabel totalLabelInit \u003d newLeftLabel(\"Total Value:\");\n\t\tinitTotalLabel.add(totalLabelInit, BorderLayout.WEST);\n\t\tlabelPanel.add(initTotalLabel);\n\n\t\tlabelColumn.add(labelPanel, BorderLayout.CENTER);\n\n\t\tJPanel column1 \u003d new JPanel(new BorderLayout());\n\t\tcolumn1.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel contentPanel1 \u003d new JPanel(new GridLayout(0, 1));\n\t\tcontentPanel1.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\n\t\tJPanel initQuantityPanel \u003d new CustomPanel(new BorderLayout(), true);\n\t\tString quantityValueTextInit \u003d Numbers.numberWithCommas(transaction.getTotalQuantity());\n\n\t\tJLabel quantityValueLabelInit \u003d newRightLabel(quantityValueTextInit, ColorScheme.GRAND_EXCHANGE_ALCH);\n\n\t\tinitQuantityPanel.add(quantityValueLabelInit, BorderLayout.CENTER);\n\t\tcontentPanel1.add(initQuantityPanel);\n\n\t\tJPanel initPricePanel \u003d new CustomPanel(new BorderLayout(), true);\n\t\tint initPricePer \u003d transaction.getInitPricePer();\n\t\tString initPricePerText \u003d Numbers.toShortNumber(initPricePer);\n\n\t\tJLabel pricePerValueLabelInit \u003d newRightLabel(initPricePerText, ColorScheme.GRAND_EXCHANGE_ALCH);\n\t\tpricePerValueLabelInit.setToolTipText(Numbers.numberWithCommas(initPricePer));\n\n\t\tinitPricePanel.add(pricePerValueLabelInit, BorderLayout.CENTER);\n\t\tcontentPanel1.add(initPricePanel);\n\n\t\tif (!transaction.isBuy())\n\t\t{\n\t\t\tJPanel taxPanel \u003d new CustomPanel(new BorderLayout(), true);\n\t\t\tint initialTax \u003d calculateTax(transaction.getInitPricePer());\n\t\t\tString initialTaxText \u003d Numbers.toShortNumber(initialTax);\n\n\t\t\tJLabel taxValueLabel \u003d newRightLabel(initialTaxText, ColorScheme.PROGRESS_ERROR_COLOR);\n\t\t\ttaxValueLabel.setToolTipText(Numbers.numberWithCommas(initialTax));\n\n\t\t\ttaxPanel.add(taxValueLabel, BorderLayout.CENTER);\n\t\t\tcontentPanel1.add(taxPanel);\n\t\t}\n\n\t\tJPanel initTotalPanel \u003d new CustomPanel(new BorderLayout(), true);\n\t\tint initTotalValue;\n\t\tif (!transaction.isBuy())\n\t\t{\n\t\t\tinitTotalValue \u003d transaction.getInitPricePer() * transaction.getQuantity() - calculateTax(transaction.getInitPricePer());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tinitTotalValue \u003d transaction.getInitPricePer() * transaction.getQuantity();\n\n\t\t}\n\t\tString initTotalValueText \u003d Numbers.toShortNumber(initTotalValue);\n\t\tJLabel totalValueValueLabelInit \u003d newRightLabel(initTotalValueText, ColorScheme.GRAND_EXCHANGE_ALCH);\n\t\ttotalValueValueLabelInit.setToolTipText(Numbers.numberWithCommas(initTotalValue));\n\t\tinitTotalPanel.add(totalValueValueLabelInit, BorderLayout.CENTER);\n\t\tcontentPanel1.add(initTotalPanel);\n\n\t\tcolumn1.add(contentPanel1, BorderLayout.CENTER);\n\n\t\tJPanel column2 \u003d new JPanel(new BorderLayout());\n\t\tcolumn2.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tJPanel contentPanel2 \u003d new JPanel(new GridLayout(0, 1));\n\t\tcontentPanel2.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel finQuantityPanel \u003d new CustomPanel(new BorderLayout(), true);\n\t\tString quantityValueTextFin \u003d Numbers.numberWithCommas(transaction.getQuantity());\n\t\tJLabel quantityValueLabelFin \u003d newRightLabel(quantityValueTextFin, ColorScheme.GRAND_EXCHANGE_ALCH);\n\t\tfinQuantityPanel.add(quantityValueLabelFin, BorderLayout.CENTER);\n\t\tcontentPanel2.add(finQuantityPanel);\n\n\t\tJPanel finPricePanel \u003d new CustomPanel(new BorderLayout(), true);\n\t\tint finPricePer \u003d transaction.getFinPricePer();\n\t\tString finPricePerText \u003d Numbers.toShortNumber(finPricePer);\n\t\tJLabel pricePerValueLabelFin \u003d newRightLabel(finPricePerText, ColorScheme.GRAND_EXCHANGE_ALCH);\n\t\tpricePerValueLabelFin.setToolTipText(Numbers.numberWithCommas(finPricePer));\n\t\tfinPricePanel.add(pricePerValueLabelFin, BorderLayout.CENTER);\n\t\tcontentPanel2.add(finPricePanel);\n\n\t\tif (!transaction.isBuy())\n\t\t{\n\t\t\tJPanel taxPanel \u003d new CustomPanel(new BorderLayout(), true);\n\t\t\tint finalTax \u003d calculateTax(transaction.getFinPricePer());\n\t\t\tString finalTaxText \u003d Numbers.toShortNumber(finalTax);\n\t\t\tJLabel taxValueLabel \u003d newRightLabel(finalTaxText, ColorScheme.PROGRESS_ERROR_COLOR);\n\t\t\ttaxValueLabel.setToolTipText(Numbers.numberWithCommas(finalTax));\n\t\t\ttaxPanel.add(taxValueLabel, BorderLayout.CENTER);\n\t\t\tcontentPanel2.add(taxPanel);\n\t\t}\n\n\t\tJPanel finTotalPanel \u003d new CustomPanel(new BorderLayout(), true);\n\t\tint finTotalValue;\n\t\tif (!transaction.isBuy())\n\t\t{\n\t\t\tfinTotalValue \u003d transaction.getFinPricePer() * transaction.getQuantity() - calculateTax(transaction.getFinPricePer());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfinTotalValue \u003d transaction.getFinPricePer() * transaction.getQuantity();\n\t\t}\n\t\tString finTotalValueText \u003d Numbers.toShortNumber(finTotalValue);\n\t\tJLabel totalValueValueLabelFin \u003d newRightLabel(finTotalValueText, ColorScheme.GRAND_EXCHANGE_ALCH);\n\t\ttotalValueValueLabelFin.setToolTipText(Numbers.numberWithCommas(finTotalValue));\n\t\tfinTotalPanel.add(totalValueValueLabelFin, BorderLayout.CENTER);\n\t\tcontentPanel2.add(finTotalPanel);\n\n\t\tcolumn2.add(contentPanel2, BorderLayout.CENTER);\n\n\n\t\titemInfoContainer.add(labelColumn);\n\t\titemInfoContainer.add(column1);\n\t\titemInfoContainer.add(column2);\n\t}\n\n\t@Override\n\tpublic Dimension getPreferredSize()\n\t{\n\t\tDimension preferredSize \u003d super.getPreferredSize();\n\t\treturn new Dimension(container.getPreferredSize().width, preferredSize.height);\n\t}\n}","filePath":"src\\main\\java\\com\\flipper2\\views\\transactions\\TransactionPanel.java"},{"fileName":"FlipperPluginTest.java","content":"package com.flipper2;\n\nimport java.io.IOException;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class FlipperPluginTest\n{\n\t/**\n\t * Loads plugin with mock data from mocks/*.json\n\t *\n\t * @param args\n\t * @throws Exception\n\t */\n\tpublic static void main(String[] args) throws Exception, IOException\n\t{\n\t\tExternalPluginManager.loadBuiltin(FlipperPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\flipper2\\FlipperPluginTest.java"},{"fileName":"TestUtilities.java","content":"//package com.flipper2;\n//\n//import java.io.File;\n//import java.nio.file.Path;\n//import java.nio.file.Paths;\n//\n//import com.flipper2.helpers.Persistor;\n//\n//public class TestUtilities {\n//    public static void cleanTestResultFiles() {\n//        Path currentRelativePath \u003d Paths.get(\"\");\n//        String testFilePath \u003d currentRelativePath.toAbsolutePath().toString()\n//                + \"\\\\src\\\\test\\\\java\\\\com\\\\flipper2\\\\test-result-files\";\n//        // Delete any generated test-result-files\n//        File deleteBuys \u003d new File(testFilePath + \"\\\\\" + Persistor.BUYS_JSON_FILE);\n//        File deleteSells \u003d new File(testFilePath + \"\\\\\" + Persistor.SELLS_JSON_FILE);\n//        deleteBuys.delete();\n//        deleteSells.delete();\n//\n//    }\n//\n//}","filePath":"src\\test\\java\\com\\flipper2\\TestUtilities.java"}]},{"commit":"371c40e2bcb86c66c26b7cec966ac653935de448","repository":"https://github.com/Hyftar/party-defence-tracker.git","internalName":"party-defence-tracker","files":[{"fileName":"BossInfo.java","content":"package com.partydefencetracker;\n\nimport lombok.Getter;\n\nenum BossInfo\n{\n\tABYSSAL_PORTAL(\"Abyssal portal\", 176, 176, 0),\n\tABYSSAL_SIRE(\"Abyssal Sire\", 250, 200, 0),\n\tAKKHA(\"Akkha\", 80, 100, 0),\n\tAKKHAS_SHADOW(\"Akkha\u0027s Shadow\", 30, 100, 0),\n\tALCHEMICAL_HYDRA(\"Alchemical Hydra\", 100, 260, 0),\n\tARTIO(\"Artio\", 150, 90, 0),\n\tBA_BA(\"Ba-Ba\", 80, 100, 60),\n\tCALLISTO(\"Callisto\", 225, 140, 0),\n\tCALVARION(\"Calvar\u0027ion\", 225, 178, 0),\n\tCERBERUS(\"Cerberus\", 110, 220, 0),\n\tCHAOS_ELEMENTAL(\"Chaos Elemental\", 270, 270, 0),\n\tCOMMANDER_ZILYANA(\"Commander Zilyana\", 300, 300, 0),\n\tCORE(\"\u003ccol\u003d00ffff\u003eCore\u003c/col\u003e\", 0, 0, 0),\n\tCORPOREAL_BEAST(\"Corporeal Beast\", 310, 350, 0),\n\tDAGANNOTH_PRIME(\"Dagannoth Prime\", 255, 255, 0),\n\tDAGANNOTH_REX(\"Dagannoth Rex\", 255, 0, 0),\n\tDAGANNOTH_SUPREME(\"Dagannoth Supreme\", 128, 244, 0),\n\tDEATHLY_MAGE(\"Deathly mage\", 155, 210, 0),\n\tDEATHLY_RANGER(\"Deathly ranger\", 155, 155, 0),\n\tELIDINIS_WARDEN(\"Elidinis\u0027 Warden\", 150, 190, 120),\n\tGENERAL_GRAARDOR(\"General Graardor\", 250, 150, 0),\n\tGIANT_MOLE(\"Giant Mole\", 200, 200, 0),\n\tGREAT_OLM(\"Great Olm\", 150, 250, 0),\n\tGREAT_OLM_LEFT_CLAW(\"Great Olm (Left claw)\", 175, 175, 0),\n\tGREAT_OLM_RIGHT_CLAW(\"Great Olm (Right claw)\", 175, 87, 0),\n\tICE_DEMON(\"Ice Demon\", 160, 390, 0),\n\tKALPHITE_QUEEN(\"Kalphite Queen\", 300, 150, 0),\n\tKEPHRI(\"Kephri\", 80, 125, 60),\n\tKING_BLACK_DRAGON(\"King Black Dragon\", 240, 240, 0),\n\tKREE_ARRA(\"Kree\u0027arra\", 260, 200, 0),\n\tKRIL_TSUTSAROTH(\"K\u0027ril Tsutsaroth\", 270, 200, 0),\n\tLIZARDMAN_SHAMAN(\"Lizardman shaman\", 210, 130, 0),\n\tNEX(\"Nex\", 260, 230, 0),\n\tNYLOCAS_VASILIAS(\"Nylocas Vasilias\", 50, 50, 0),\n\tOBELISK(\"\u003ccol\u003d00ffff\u003eObelisk\u003c/col\u003e\", 100, 100, 60),\n\tPESTILENT_BLOAT(\"Pestilent Bloat\", 100, 150, 0),\n\tPHANTOM_MUSPAH(\"Phantom Muspah\", 200, 150, 0), //180 shielded\n\tSARACHNIS(\"Sarachnis\", 150, 150, 0),\n\tSCORPIA(\"Scorpia\", 180, 1, 0),\n\tSKELETAL_MYSTIC(\"Skeletal Mystic\", 187, 140, 0),\n\tSKOTIZO(\"Skotizo\", 200, 280, 0),\n\tSOTETSEG(\"Sotetseg\", 200, 250, 100),\n\tSPINDEL(\"Spindel\", 225, 235, 0),\n\tTEKTON(\"Tekton\", 205, 205, 0),\n\tTEKTON_ENRAGED(\"Tekton (enraged)\", 205, 205, 0),\n\tTHE_MAIDEN_OF_SUGADINTI(\"The Maiden of Sugadinti\", 200, 350, 0),\n\tTUMEKENS_WARDEN(\"Tumeken\u0027s Warden\", 150, 190, 120),\n\tTZKAL_ZUK(\"TzKal-Zuk\", 260, 150, 0),\n\tTZTOK_JAD(\"TzTok-Jad\", 480, 480, 0),\n\tVASA(\"Vasa Nistirio\", 175, 230, 0),\n\tVENENATIS(\"Venenatis\", 321, 300, 0),\n\tVETION(\"Vet\u0027ion\", 395, 300, 0),\n\tVORKATH(\"Vorkath\", 214, 150, 0),\n\tXARPUS(\"Xarpus\", 250, 22, 0),\n\tYAMA(\"Yama\", 225, 250, 145),\n\tZEBAK(\"Zebak\", 70, 100, 50),\n\tZULRAH(\"Zulrah\", 300, 30, 0);\n\n\t@Getter\n\tprivate final String name;\n\t@Getter\n\tprivate final double baseDef;\n\t@Getter\n\tprivate final double baseMagic;\n\t@Getter\n\tprivate final double minDef;\n\n\tBossInfo(String name, double baseDef, double baseMagic, double minDef)\n\t{\n\t\tthis.name \u003d name;\n\t\tthis.baseDef \u003d baseDef;\n\t\tthis.baseMagic \u003d baseMagic;\n\t\tthis.minDef \u003d minDef;\n\t}\n\n\tstatic BossInfo getBoss(String bossName)\n\t{\n\t\tfor (BossInfo boss : values())\n\t\t{\n\t\t\tif (boss.name.contains(bossName))\n\t\t\t{\n\t\t\t\treturn boss;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic double getBaseDefence(String bossName)\n\t{\n\t\tBossInfo boss \u003d getBoss(bossName);\n\t\tif (boss !\u003d null)\n\t\t{\n\t\t\treturn boss.baseDef;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tstatic double getBaseMagic(String bossName)\n\t{\n\t\tBossInfo boss \u003d getBoss(bossName);\n\t\tif(boss !\u003d null)\n\t\t{\n\t\t\treturn boss.baseMagic;\n\t\t}\n\t\treturn 0;\n\t}\n}\n","filePath":"src\\main\\java\\com\\partydefencetracker\\BossInfo.java"},{"fileName":"CoXLayoutSolver.java","content":"/*\n * Copyright (c) 2022, l2- \u003chttps://github.com/l2-\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.partydefencetracker;\n\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Constants;\nimport net.runelite.api.GameState;\nimport net.runelite.api.InstanceTemplates;\nimport net.runelite.api.NullObjectID;\nimport net.runelite.api.Point;\nimport net.runelite.api.Tile;\nimport net.runelite.api.VarPlayer;\nimport net.runelite.api.Varbits;\nimport net.runelite.api.WorldView;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.client.plugins.raids.Raid;\nimport net.runelite.client.plugins.raids.RaidRoom;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\n\nimport static net.runelite.api.Perspective.SCENE_SIZE;\n\n// Mostly copied from the core RaidsPlugin\n@Slf4j\n@Singleton\npublic class CoXLayoutSolver\n{\n\tstatic final int ROOM_MAX_SIZE \u003d 32;\n\tprivate static final int LOBBY_PLANE \u003d 3;\n\tprivate static final int SECOND_FLOOR_PLANE \u003d 2;\n\tprivate static final int ROOMS_PER_PLANE \u003d 8;\n\tprivate static final int AMOUNT_OF_ROOMS_PER_X_AXIS_PER_PLANE \u003d 4;\n\tprivate static final WorldPoint TEMP_LOCATION \u003d new WorldPoint(3360, 5152, 2);\n\tprivate static final String CM_RAID_CODE \u003d \"SPCFPC#CFP SPC#\";\n\n\tprivate final Client client;\n\tboolean checkInRaid;\n\tprivate boolean loggedIn;\n\tprivate boolean inRaidChambers;\n\tprivate int raidPartyID;\n\t@Getter\n\tprivate Raid raid;\n\n\t@Inject\n\tpublic CoXLayoutSolver(Client client)\n\t{\n\t\tthis.client \u003d client;\n\t}\n\n\tpublic boolean isCM()\n\t{\n\t\treturn raid !\u003d null \u0026\u0026 CM_RAID_CODE.equals(raid.toCode());\n\t}\n\n\tpublic void onVarbitChanged(VarbitChanged event)\n\t{\n\t\tif (event.getVarpId() \u003d\u003d VarPlayer.IN_RAID_PARTY)\n\t\t{\n\t\t\tboolean tempInRaid \u003d client.getVarbitValue(Varbits.IN_RAID) \u003d\u003d 1;\n\t\t\tif (loggedIn \u0026\u0026 !tempInRaid)\n\t\t\t{\n\t\t\t\traid \u003d null;\n\t\t\t}\n\n\t\t\traidPartyID \u003d event.getValue();\n\t\t}\n\n\t\tif (event.getVarbitId() \u003d\u003d Varbits.IN_RAID)\n\t\t{\n\t\t\tboolean tempInRaid \u003d event.getValue() \u003d\u003d 1;\n\t\t\tif (tempInRaid \u0026\u0026 loggedIn)\n\t\t\t{\n\t\t\t\tcheckRaidPresence();\n\t\t\t}\n\n\t\t\tinRaidChambers \u003d tempInRaid;\n\t\t}\n\t}\n\n\tpublic void onGameTick(GameTick event)\n\t{\n\t\tif (checkInRaid)\n\t\t{\n\t\t\tloggedIn \u003d true;\n\t\t\tcheckInRaid \u003d false;\n\n\t\t\tif (inRaidChambers)\n\t\t\t{\n\t\t\t\tcheckRaidPresence();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (raidPartyID \u003d\u003d -1)\n\t\t\t\t{\n\t\t\t\t\traid \u003d null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic void onGameStateChanged(GameStateChanged event)\n\t{\n\t\tif (client.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tif (client.getLocalPlayer() \u003d\u003d null\n\t\t\t\t|| client.getLocalPlayer().getWorldLocation().equals(TEMP_LOCATION))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcheckInRaid \u003d true;\n\t\t}\n\t\telse if (client.getGameState() \u003d\u003d GameState.LOGIN_SCREEN\n\t\t\t|| client.getGameState() \u003d\u003d GameState.CONNECTION_LOST)\n\t\t{\n\t\t\tloggedIn \u003d false;\n\t\t}\n\t\telse if (client.getGameState() \u003d\u003d GameState.HOPPING)\n\t\t{\n\t\t\traid \u003d null;\n\t\t}\n\t}\n\n\tprivate void checkRaidPresence()\n\t{\n\t\tif (client.getGameState() !\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tinRaidChambers \u003d client.getVarbitValue(Varbits.IN_RAID) \u003d\u003d 1;\n\n\t\tif (!inRaidChambers)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\traid \u003d buildRaid(raid);\n\t}\n\n\tprivate Raid buildRaid(Raid from)\n\t{\n\t\tWorldView wv \u003d client.getTopLevelWorldView();\n\t\tRaid raid \u003d from;\n\n\t\tif (raid \u003d\u003d null)\n\t\t{\n\t\t\tPoint gridBase \u003d findLobbyBase();\n\n\t\t\tif (gridBase \u003d\u003d null)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tInteger lobbyIndex \u003d findLobbyIndex(gridBase);\n\n\t\t\tif (lobbyIndex \u003d\u003d null)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\traid \u003d new Raid(\n\t\t\t\tnew WorldPoint(wv.getBaseX() + gridBase.getX(), wv.getBaseY() + gridBase.getY(), LOBBY_PLANE),\n\t\t\t\tlobbyIndex\n\t\t\t);\n\t\t}\n\n\t\tint baseX \u003d raid.getLobbyIndex() % AMOUNT_OF_ROOMS_PER_X_AXIS_PER_PLANE;\n\t\tint baseY \u003d raid.getLobbyIndex() % ROOMS_PER_PLANE \u003e (AMOUNT_OF_ROOMS_PER_X_AXIS_PER_PLANE - 1) ? 1 : 0;\n\n\t\tfor (int i \u003d 0; i \u003c raid.getRooms().length; i++)\n\t\t{\n\t\t\tint x \u003d i % AMOUNT_OF_ROOMS_PER_X_AXIS_PER_PLANE;\n\t\t\tint y \u003d i % ROOMS_PER_PLANE \u003e (AMOUNT_OF_ROOMS_PER_X_AXIS_PER_PLANE - 1) ? 1 : 0;\n\t\t\tint plane \u003d i \u003e (ROOMS_PER_PLANE - 1) ? SECOND_FLOOR_PLANE : LOBBY_PLANE;\n\n\t\t\tx \u003d x - baseX;\n\t\t\ty \u003d y - baseY;\n\n\t\t\tx \u003d raid.getGridBase().getX() + x * ROOM_MAX_SIZE;\n\t\t\ty \u003d raid.getGridBase().getY() - y * ROOM_MAX_SIZE;\n\n\t\t\tx \u003d x - wv.getBaseX();\n\t\t\ty \u003d y - wv.getBaseY();\n\n\t\t\tif (x \u003c (1 - ROOM_MAX_SIZE) || x \u003e\u003d SCENE_SIZE)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\telse if (x \u003c 1)\n\t\t\t{\n\t\t\t\tx \u003d 1;\n\t\t\t}\n\n\t\t\tif (y \u003c 1)\n\t\t\t{\n\t\t\t\ty \u003d 1;\n\t\t\t}\n\n\t\t\tTile tile \u003d wv.getScene().getTiles()[plane][x][y];\n\n\t\t\tif (tile \u003d\u003d null)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tRaidRoom room \u003d determineRoom(tile);\n\t\t\traid.setRoom(room, i);\n\t\t}\n\n\t\treturn raid;\n\t}\n\n\tprivate Point findLobbyBase()\n\t{\n\t\tTile[][] tiles \u003d client.getTopLevelWorldView().getScene().getTiles()[LOBBY_PLANE];\n\n\t\tfor (int x \u003d 0; x \u003c SCENE_SIZE; x++)\n\t\t{\n\t\t\tfor (int y \u003d 0; y \u003c SCENE_SIZE; y++)\n\t\t\t{\n\t\t\t\tif (tiles[x][y] \u003d\u003d null || tiles[x][y].getWallObject() \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (tiles[x][y].getWallObject().getId() \u003d\u003d NullObjectID.NULL_12231)\n\t\t\t\t{\n\t\t\t\t\treturn tiles[x][y].getSceneLocation();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate RaidRoom determineRoom(Tile base)\n\t{\n\t\tint chunkData \u003d client.getTopLevelWorldView().getInstanceTemplateChunks()[base.getPlane()][(base.getSceneLocation().getX()) / 8][base.getSceneLocation().getY() / 8];\n\t\tInstanceTemplates template \u003d InstanceTemplates.findMatch(chunkData);\n\n\t\tif (template \u003d\u003d null)\n\t\t{\n\t\t\treturn RaidRoom.EMPTY;\n\t\t}\n\n\t\tswitch (template)\n\t\t{\n\t\t\tcase RAIDS_LOBBY:\n\t\t\tcase RAIDS_START:\n\t\t\t\treturn RaidRoom.START;\n\t\t\tcase RAIDS_END:\n\t\t\t\treturn RaidRoom.END;\n\t\t\tcase RAIDS_SCAVENGERS:\n\t\t\tcase RAIDS_SCAVENGERS2:\n\t\t\t\treturn RaidRoom.SCAVENGERS;\n\t\t\tcase RAIDS_SHAMANS:\n\t\t\t\treturn RaidRoom.SHAMANS;\n\t\t\tcase RAIDS_VASA:\n\t\t\t\treturn RaidRoom.VASA;\n\t\t\tcase RAIDS_VANGUARDS:\n\t\t\t\treturn RaidRoom.VANGUARDS;\n\t\t\tcase RAIDS_ICE_DEMON:\n\t\t\t\treturn RaidRoom.ICE_DEMON;\n\t\t\tcase RAIDS_THIEVING:\n\t\t\t\treturn RaidRoom.THIEVING;\n\t\t\tcase RAIDS_FARMING:\n\t\t\tcase RAIDS_FARMING2:\n\t\t\t\treturn RaidRoom.FARMING;\n\t\t\tcase RAIDS_MUTTADILES:\n\t\t\t\treturn RaidRoom.MUTTADILES;\n\t\t\tcase RAIDS_MYSTICS:\n\t\t\t\treturn RaidRoom.MYSTICS;\n\t\t\tcase RAIDS_TEKTON:\n\t\t\t\treturn RaidRoom.TEKTON;\n\t\t\tcase RAIDS_TIGHTROPE:\n\t\t\t\treturn RaidRoom.TIGHTROPE;\n\t\t\tcase RAIDS_GUARDIANS:\n\t\t\t\treturn RaidRoom.GUARDIANS;\n\t\t\tcase RAIDS_CRABS:\n\t\t\t\treturn RaidRoom.CRABS;\n\t\t\tcase RAIDS_VESPULA:\n\t\t\t\treturn RaidRoom.VESPULA;\n\t\t\tdefault:\n\t\t\t\treturn RaidRoom.EMPTY;\n\t\t}\n\t}\n\n\tprivate Integer findLobbyIndex(Point gridBase)\n\t{\n\t\tif (Constants.SCENE_SIZE \u003c\u003d gridBase.getX() + ROOM_MAX_SIZE\n\t\t\t|| Constants.SCENE_SIZE \u003c\u003d gridBase.getY() + ROOM_MAX_SIZE)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\tint x;\n\t\tint y;\n\t\tTile[][] tiles \u003d client.getTopLevelWorldView().getScene().getTiles()[LOBBY_PLANE];\n\t\tif (tiles[gridBase.getX()][gridBase.getY() + ROOM_MAX_SIZE] \u003d\u003d null)\n\t\t{\n\t\t\ty \u003d 0;\n\t\t}\n\t\telse\n\t\t{\n\t\t\ty \u003d 1;\n\t\t}\n\t\tif (tiles[gridBase.getX() + ROOM_MAX_SIZE][gridBase.getY()] \u003d\u003d null)\n\t\t{\n\t\t\tx \u003d 3;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor (x \u003d 0; x \u003c 3; x++)\n\t\t\t{\n\t\t\t\tint sceneX \u003d gridBase.getX() - 1 - ROOM_MAX_SIZE * x;\n\t\t\t\tif (sceneX \u003c 0 || tiles[sceneX][gridBase.getY()] \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn x + y * AMOUNT_OF_ROOMS_PER_X_AXIS_PER_PLANE;\n\t}\n}\n","filePath":"src\\main\\java\\com\\partydefencetracker\\CoXLayoutSolver.java"},{"fileName":"DefenceInfoBox.java","content":"package com.partydefencetracker;\n\nimport java.awt.Color;\nimport java.awt.image.BufferedImage;\n\nimport lombok.Getter;\nimport lombok.Setter;\nimport lombok.ToString;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.ui.overlay.infobox.InfoBox;\nimport javax.inject.Inject;\n\n@ToString\npublic class DefenceInfoBox extends InfoBox\n{\n    @Inject\n    private final DefenceTrackerConfig config;\n\n    @Getter\n    private final long minimumDefence;\n\n    @Getter\n    @Setter\n    private long currentDefence;\n\n    public DefenceInfoBox(BufferedImage image, Plugin plugin, long minimumDefence, long currentDefence, DefenceTrackerConfig config)\n    {\n        super(image, plugin);\n        this.currentDefence \u003d currentDefence;\n        this.minimumDefence \u003d minimumDefence;\n        this.config \u003d config;\n    }\n\n    @Override\n    public String getText()\n    {\n        long displayedDefence \u003d\n            config.displayFullDefenceLevel()\n                ? currentDefence\n                : currentDefence - minimumDefence;\n\n        return Long.toString(displayedDefence);\n    }\n\n    @Override\n    public Color getTextColor()\n    {\n\t\tif (config.disableIBColor())\n\t\t{\n\t\t\treturn Color.WHITE;\n\t\t}\n\n        long relativeDefence \u003d Math.max(currentDefence - minimumDefence, 0);\n\n        if (relativeDefence \u003d\u003d 0)\n        {\n            return config.cappedDefColor();\n        }\n\n        if (relativeDefence \u003c\u003d config.lowDef())\n        {\n            return config.lowDefColor();\n        }\n\n        return config.highDefColor();\n    }\n}","filePath":"src\\main\\java\\com\\partydefencetracker\\DefenceInfoBox.java"},{"fileName":"DefenceTrackerConfig.java","content":"/*\n * Copyright (c) 2022, Buchus \u003chttp://github.com/MoreBuchus\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.partydefencetracker;\n\nimport java.awt.Color;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"defencetracker\")\npublic interface DefenceTrackerConfig extends Config\n{\n\t@ConfigItem(\n\t\t\tname \u003d \"Low Defence Threshold\",\n\t\t\tkeyName \u003d \"lowDef\",\n\t\t\tdescription \u003d \"Sets when you want the defence to appear as low defence\",\n\t\t\tposition \u003d 1\n\t)\n\tdefault int lowDef()\n\t{\n\t\treturn 10;\n\t}\n\n\t@ConfigItem(\n\t\tname \u003d \"High Defence Color\",\n\t\tkeyName \u003d \"highDefColor\",\n\t\tdescription \u003d \"Color of the infobox text when the defence is above the low defence threshold\",\n\t\tposition \u003d 2\n\t)\n\tdefault Color highDefColor()\n\t{\n\t\treturn Color.WHITE;\n\t}\n\n\t@ConfigItem(\n\t\tname \u003d \"Low Defence Color\",\n\t\tkeyName \u003d \"lowDefColor\",\n\t\tdescription \u003d \"Color of the infobox text when the defence is beneath the low defence threshold\",\n\t\tposition \u003d 3\n\t)\n\tdefault Color lowDefColor()\n\t{\n\t\treturn Color.YELLOW;\n\t}\n\n\t@ConfigItem(\n\t\tname \u003d \"Capped Defence Color\",\n\t\tkeyName \u003d \"cappedDefColor\",\n\t\tdescription \u003d \"Color of the infobox text when the defence is at the lowest possible amount for that NPC\",\n\t\tposition \u003d 4\n\t)\n\tdefault Color cappedDefColor()\n\t{\n\t\treturn Color.GREEN;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"disableIBColor\",\n\t\tname \u003d \"Disable Infobox Text Color\",\n\t\tdescription \u003d \"Defence infobox text will always be set to White\",\n\t\tposition \u003d 5\n\t)\n\tdefault boolean disableIBColor()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"vulnerability\",\n\t\t\tname \u003d \"Show Vulnerability\",\n\t\t\tdescription \u003d \"Displays an infobox when you successfully land vulnerability\",\n\t\t\tposition \u003d 6\n\t)\n\tdefault boolean vulnerability()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"shadowBarrage\",\n\t\t\tname \u003d \"Show Shadow Barrage\",\n\t\t\tdescription \u003d \"Displays an infobox when you successfully land a shadow barrage whilst wearing the shadow ancient sceptre\",\n\t\t\tposition \u003d 7\n\t)\n\tdefault boolean shadowBarrage() { return true; }\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"redKeris\",\n\t\tname \u003d \"Show Red Keris\",\n\t\tdescription \u003d \"Displays an infobox when you successfully land a Red Keris (Corruption) special attack\",\n\t\tposition \u003d 8\n\t)\n\tdefault boolean redKeris()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tname \u003d \"Display full defence level\",\n\t\t\tkeyName \u003d \"displayFullDefence\",\n\t\t\tdescription \u003d \"For NPCs with a minimum defence, display their full defence level instead of the reduction relative to their minimum\",\n\t\t\tposition \u003d 9\n\t)\n\tdefault boolean displayFullDefenceLevel() { return false; }\n}\n","filePath":"src\\main\\java\\com\\partydefencetracker\\DefenceTrackerConfig.java"},{"fileName":"DefenceTrackerPlugin.java","content":"/*\n * Copyright (c) 2022, Buchus \u003chttp://github.com/MoreBuchus\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.partydefencetracker;\n\nimport com.google.inject.Provides;\nimport java.awt.Color;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Objects;\nimport java.util.Optional;\nimport java.util.Set;\nimport javax.inject.Inject;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Actor;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.Hitsplat;\nimport net.runelite.api.IndexDataBase;\nimport net.runelite.api.ItemID;\nimport net.runelite.api.NPC;\nimport net.runelite.api.Player;\nimport net.runelite.api.Skill;\nimport net.runelite.api.SpritePixels;\nimport net.runelite.api.VarPlayer;\nimport net.runelite.api.Varbits;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.ActorDeath;\nimport net.runelite.api.events.AnimationChanged;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.GraphicChanged;\nimport net.runelite.api.events.HitsplatApplied;\nimport net.runelite.api.events.NpcSpawned;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.api.kit.KitType;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.game.SkillIconManager;\nimport net.runelite.client.party.PartyService;\nimport net.runelite.client.party.WSClient;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDependency;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.plugins.PluginInstantiationException;\nimport net.runelite.client.plugins.PluginManager;\nimport net.runelite.client.plugins.party.PartyPlugin;\nimport net.runelite.client.plugins.specialcounter.SpecialCounterUpdate;\nimport net.runelite.client.plugins.specialcounter.SpecialWeapon;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.ui.overlay.infobox.InfoBoxManager;\nimport net.runelite.client.util.ColorUtil;\nimport net.runelite.client.util.Text;\nimport org.apache.commons.lang3.ObjectUtils;\n\n@PluginDescriptor(\n\tname \u003d \"Party Defence Tracker\",\n\tdescription \u003d \"Calculates the defence based off party specs\",\n\ttags \u003d {\"party\", \"defence\", \"tracker\", \"boosting\", \"special\", \"counter\"}\n)\n@Slf4j\n@PluginDependency(PartyPlugin.class)\npublic class DefenceTrackerPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate PartyService partyService;\n\n\t@Inject\n\tprivate WSClient wsClient;\n\n\t@Inject\n\tprivate DefenceTrackerConfig config;\n\n\t@Inject\n\tprivate SkillIconManager skillIconManager;\n\n\t@Inject\n\tprivate ItemManager itemManager;\n\n\t@Inject\n\tprivate PluginManager pluginManager;\n\n\t@Inject\n\tprivate InfoBoxManager infoBoxManager;\n\n\t@Inject\n\tprivate CoXLayoutSolver layoutSolver;\n\n\tprivate static final int COX_SCALED_PARTY_SIZE_VARBIT \u003d 9540;\n\n\tprivate String boss \u003d \"\";\n\tprivate int bossIndex \u003d 0;\n\tprivate double bossDef \u003d -1;\n\tprivate DefenceInfoBox box \u003d null;\n\tprivate VulnerabilityInfoBox vulnBox \u003d null;\n\tprivate SpritePixels vuln \u003d null;\n\tprivate ShadowBarrageInfoBox shadowBarrageBox \u003d null;\n\tprivate SpritePixels shadowBarrage \u003d null;\n\tprivate boolean shadowBarrageHit \u003d false;\n\n\tprivate RedKerisInfoBox redKerisBox \u003d null;\n\t@Getter\n\tprivate int redKerisTicks \u003d 0;\n\n\t//Copied from special counter\n\t//Expected tick the hitsplat will happen on\n\tprivate int hitsplatTick;\n\tprivate Hitsplat lastSpecHitsplat;\n\tprivate NPC lastSpecTarget;\n\tprivate double lastSpecPercent \u003d -1;\n\n\tprivate boolean hmXarpus \u003d false;\n\tprivate boolean bloatDown \u003d false;\n\n\tprivate boolean inCm;\n\tprivate boolean coxModeSet \u003d false;\n\n\tprivate QueuedNpc queuedNpc \u003d null;\n\n\tprivate final List\u003cSpecialCounterUpdate\u003e specialList \u003d new ArrayList\u003c\u003e();\n\n\tMap\u003cString, ArrayList\u003cInteger\u003e\u003e bossRegions \u003d new HashMap\u003c\u003e()\n\t{{\n\t\tput(\"The Maiden of Sugadinti\", new ArrayList\u003c\u003e(Collections.singletonList(12613)));\n\t\tput(\"Pestilent Bloat\", new ArrayList\u003c\u003e(Collections.singletonList(13125)));\n\t\tput(\"Nylocas Vasilias\", new ArrayList\u003c\u003e(Collections.singletonList(13122)));\n\t\tput(\"Sotetseg\", new ArrayList\u003c\u003e(Arrays.asList(13123, 13379)));\n\t\tput(\"Xarpus\", new ArrayList\u003c\u003e(Collections.singletonList(12612)));\n\t\tput(\"Zebak\", new ArrayList\u003c\u003e(Collections.singletonList(15700)));\n\t\tput(\"Kephri\", new ArrayList\u003c\u003e(Collections.singletonList(14164)));\n\t\tput(\"Ba-Ba\", new ArrayList\u003c\u003e(Collections.singletonList(15188)));\n\t\tput(\"Akkha\", new ArrayList\u003c\u003e(Collections.singletonList(14676)));\n\t\tput(\"Akkha\u0027s Shadow\", new ArrayList\u003c\u003e(Collections.singletonList(14676)));\n\t\tput(\"\u003ccol\u003d00ffff\u003eObelisk\u003c/col\u003e\", new ArrayList\u003c\u003e(Collections.singletonList(15184)));\n\t\tput(\"Tumeken\u0027s Warden\", new ArrayList\u003c\u003e(Collections.singletonList(15696)));\n\t\tput(\"Elidinis\u0027 Warden\", new ArrayList\u003c\u003e(Collections.singletonList(15696)));\n\t\tput(\"\u003ccol\u003d00ffff\u003eCore\u003c/col\u003e\", new ArrayList\u003c\u003e(Arrays.asList(15184, 15696)));\n\t\tput(\"Alchemical Hydra\", new ArrayList\u003c\u003e(Collections.singletonList(5536)));\n\t\tput(\"Nex\", new ArrayList\u003c\u003e(Collections.singletonList(11601)));\n\t\tput(\"Phantom Muspah\", new ArrayList\u003c\u003e(Collections.singletonList(11330)));\n\t\tput(\"Skotizo\", new ArrayList\u003c\u003e(Collections.singletonList(9048)));\n\t\tput(\"TzKal-Zuk\", new ArrayList\u003c\u003e(Collections.singletonList(9043)));\n\t\tput(\"TzTok-Jad\", new ArrayList\u003c\u003e(Collections.singletonList(9551)));\n\t\tput(\"Vorkath\", new ArrayList\u003c\u003e(Collections.singletonList(9023)));\n\t\tput(\"Yama\", new ArrayList\u003c\u003e(Collections.singletonList(6045)));\n\t\tput(\"Zulrah\", new ArrayList\u003c\u003e(Arrays.asList(9007, 9008)));\n\t}};\n\n\tprivate final Set\u003cString\u003e coxBosses \u003d new HashSet\u003c\u003e(List.of(\"Abyssal portal\", \"Deathly mage\", \"Deathly ranger\", \"Great Olm\", \"Great Olm (Left claw)\", \"Great Olm (Right claw\", \"Ice demon\", \"Skeletal Mystic\", \"Tekton\", \"Vasa Nistirio\", \"Lizardman shaman\"));\n  \tprivate final Set\u003cString\u003e coxBossesSpecialOffensiveScaling \u003d new HashSet\u003c\u003e(List.of(\"Abyssal portal\", \"Deathly ranger\"));\n\n\t@Provides\n\tDefenceTrackerConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(DefenceTrackerConfig.class);\n\t}\n\n\tprotected void startUp() throws Exception\n\t{\n\t\treset();\n\t\tenableRequiredPlugins(\"Party\");\n\t\tenableRequiredPlugins(\"Special Attack Counter\");\n\t\twsClient.registerMessage(DefenceTrackerUpdate.class);\n\t}\n\n\tprotected void shutDown() throws Exception\n\t{\n\t\treset();\n\t\twsClient.unregisterMessage(DefenceTrackerUpdate.class);\n\t}\n\n\tprotected void reset()\n\t{\n\t\tinfoBoxManager.removeInfoBox(box);\n\t\tinfoBoxManager.removeInfoBox(vulnBox);\n\t\tinfoBoxManager.removeInfoBox(redKerisBox);\n\t\tinfoBoxManager.removeInfoBox(shadowBarrageBox);\n\t\tboss \u003d \"\";\n\t\tbossIndex \u003d 0;\n\t\tbossDef \u003d -1;\n\t\tbox \u003d null;\n\t\tvulnBox \u003d null;\n\t\tvuln \u003d null;\n\t\tredKerisBox \u003d null;\n\t\tredKerisTicks \u003d 0;\n\t\tshadowBarrageBox \u003d null;\n\t\tshadowBarrage \u003d null;\n\t\tshadowBarrageHit \u003d false;\n\t\tbloatDown \u003d false;\n\t\tqueuedNpc \u003d null;\n\t}\n\n\t@Subscribe\n\tpublic void onAnimationChanged(AnimationChanged e)\n\t{\n\t\tint animation \u003d e.getActor().getAnimation();\n\n\t\tif (e.getActor() instanceof Player \u0026\u0026 e.getActor() !\u003d null \u0026\u0026 client.getLocalPlayer() !\u003d null \u0026\u0026 e.getActor().getName() !\u003d null)\n\t\t{\n\t\t\tif (e.getActor().getName().equals(client.getLocalPlayer().getName()))\n\t\t\t{\n\t\t\t\tif (animation \u003d\u003d 1816 \u0026\u0026 boss.equalsIgnoreCase(\"sotetseg\") \u0026\u0026 inBossRegion())\n\t\t\t\t{\n\t\t\t\t\tinfoBoxManager.removeInfoBox(box);\n\t\t\t\t\tbossDef \u003d 200;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (e.getActor() instanceof NPC \u0026\u0026 e.getActor().getName() !\u003d null)\n\t\t{\n\t\t\tif (e.getActor().getName().equalsIgnoreCase(\"pestilent bloat\"))\n\t\t\t{\n\t\t\t\tbloatDown \u003d animation \u003d\u003d 8082;\n\t\t\t}\n\t\t\t//Enraged Wardens\n\t\t\telse if (animation \u003d\u003d 9685 \u0026\u0026 (boss.equalsIgnoreCase(\"Tumeken\u0027s Warden\") || boss.equalsIgnoreCase(\"Elidinis\u0027 Warden\")))\n\t\t\t{\n\t\t\t\tinfoBoxManager.removeInfoBox(box);\n\t\t\t\tbossDef \u003d 60;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void processSpecialAttack(SpecialCounterUpdate e)\n\t{\n\t\tint hit \u003d e.getHit();\n\t\tint world \u003d e.getWorld();\n\t\tSpecialWeapon weapon \u003d e.getWeapon();\n\t\tint index \u003d e.getNpcIndex();\n\t\tNPC npc \u003d client.getTopLevelWorldView().npcs().byIndex(index);\n\n\t\tclientThread.invoke(() -\u003e\n\t\t{\n\t\t\tif ((npc !\u003d null \u0026\u0026 npc.getName() !\u003d null \u0026\u0026 BossInfo.getBoss(npc.getName()) !\u003d null) || bossIndex \u003d\u003d index)\n\t\t\t{\n\t\t\t\tif (bossIndex !\u003d index)\n\t\t\t\t{\n\t\t\t\t\tString bossName \u003d npc.getName();\n\n\t\t\t\t\tif (!boss.equalsIgnoreCase(bossName) || (bossName.contains(\"Tekton\") \u0026\u0026 !boss.equalsIgnoreCase(\"Tekton\")))\n\t\t\t\t\t{\n\t\t\t\t\t\tbaseDefence(bossName, index);\n\t\t\t\t\t\tcalculateQueue(index);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (inBossRegion() \u0026\u0026 world \u003d\u003d client.getWorld())\n\t\t\t\t{\n\t\t\t\t\tcalculateDefence(weapon, hit);\n\t\t\t\t\tupdateDefInfobox();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (queuedNpc \u003d\u003d null || queuedNpc.index !\u003d index)\n\t\t\t\t{\n\t\t\t\t\tqueuedNpc \u003d new QueuedNpc(index);\n\t\t\t\t}\n\t\t\t\tqueuedNpc.queuedSpecs.add(new QueuedNpc.QueuedSpec(weapon, hit));\n\t\t\t}\n\t\t});\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick e)\n\t{\n\t\tfor (SpecialCounterUpdate specialCounterUpdate : specialList)\n\t\t{\n\t\t\tprocessSpecialAttack(specialCounterUpdate);\n\t\t}\n\t\tspecialList.clear();\n\t\tif (partyService.isInParty())\n\t\t{\n\t\t\tfor (NPC n : client.getTopLevelWorldView().npcs())\n\t\t\t{\n\t\t\t\tif (n !\u003d null \u0026\u0026 n.getName() !\u003d null \u0026\u0026 (n.getName().equalsIgnoreCase(boss) || (n.getName().contains(\"Tekton\") \u0026\u0026 boss.equalsIgnoreCase(\"Tekton\")))\n\t\t\t\t\t\u0026\u0026 (n.isDead() || n.getHealthRatio() \u003d\u003d 0))\n\t\t\t\t{\n\t\t\t\t\tpartyService.send(new DefenceTrackerUpdate(n.getName(), n.getIndex(), false, client.getWorld(), \"\"));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlayoutSolver.onGameTick(e);\n\n\t\tif (!coxModeSet \u0026\u0026 client.getVarbitValue(Varbits.IN_RAID) \u003d\u003d 1)\n\t\t{\n\t\t\tinCm \u003d layoutSolver.isCM();\n\t\t\tcoxModeSet \u003d true;\n\t\t}\n\n\t\tif (redKerisTicks \u003e 0)\n\t\t{\n\t\t\tredKerisTicks--;\n\t\t\tif (redKerisTicks \u003d\u003d 0)\n\t\t\t{\n\t\t\t\tinfoBoxManager.removeInfoBox(redKerisBox);\n\t\t\t}\n\t\t}\n\n\t\t//Copied from special counter\n\t\tif (lastSpecHitsplat !\u003d null \u0026\u0026 lastSpecTarget !\u003d null)\n\t\t{\n\t\t\tif (lastSpecHitsplat.getAmount() \u003e 0 \u0026\u0026 partyService.isInParty())\n\t\t\t{\n\t\t\t\tpartyService.send(new DefenceTrackerUpdate(lastSpecTarget.getName(), lastSpecTarget.getIndex(), true, client.getWorld(), \"keris\"));\n\t\t\t}\n\t\t\tlastSpecHitsplat \u003d null;\n\t\t\tlastSpecTarget \u003d null;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onHitsplatApplied(HitsplatApplied e)\n\t{\n\t\tActor target \u003d e.getActor();\n\t\tHitsplat hitsplat \u003d e.getHitsplat();\n\t\tif (hitsplat.isMine() \u0026\u0026 target instanceof NPC \u0026\u0026 lastSpecTarget !\u003d null \u0026\u0026 hitsplatTick \u003d\u003d client.getTickCount())\n\t\t{\n\t\t\tNPC npc \u003d (NPC) target;\n\t\t\tString name \u003d npc.getName();\n\t\t\tif (name !\u003d null \u0026\u0026 (BossInfo.getBoss(name) !\u003d null || bossIndex \u003d\u003d npc.getIndex()))\n\t\t\t{\n\t\t\t\t// The weapon hitsplat is always last, after other hitsplats which occur on the same tick such as from venge or thralls.\n\t\t\t\tlastSpecHitsplat \u003d hitsplat;\n\t\t\t}\n\t\t}\n\t}\n\n\n\t@Subscribe\n\tpublic void onNpcSpawned(NpcSpawned e)\n\t{\n\t\tNPC npc \u003d e.getNpc();\n\t\tif (npc.getName() !\u003d null \u0026\u0026 BossInfo.getBoss(npc.getName()) !\u003d null)\n\t\t{\n\t\t\thmXarpus \u003d npc.getId() \u003e\u003d 10770 \u0026\u0026 npc.getId() \u003c\u003d 10772;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onActorDeath(ActorDeath e)\n\t{\n\t\tif (e.getActor() instanceof NPC \u0026\u0026 e.getActor().getName() !\u003d null \u0026\u0026 client.getLocalPlayer() !\u003d null \u0026\u0026 partyService.isInParty())\n\t\t{\n\t\t\tif (e.getActor().getName().equalsIgnoreCase(boss) || (e.getActor().getName().contains(\"Tekton\") \u0026\u0026 boss.equalsIgnoreCase(\"Tekton\")))\n\t\t\t{\n\t\t\t\tpartyService.send(new DefenceTrackerUpdate(e.getActor().getName(), ((NPC) e.getActor()).getIndex(), false, client.getWorld(), \"\"));\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onSpecialCounterUpdate(SpecialCounterUpdate e)\n\t{\n\t\tif (e.getWeapon() \u003d\u003d SpecialWeapon.ELDER_MAUL)\n\t\t{\n\t\t\tspecialList.add(0, e);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tspecialList.add(e);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onDefenceTrackerUpdate(DefenceTrackerUpdate e)\n\t{\n\t\tint world \u003d e.getWorld();\n\t\tclientThread.invoke(() -\u003e\n\t\t{\n\t\t\tif (!e.isAlive())\n\t\t\t{\n\t\t\t\treset();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (inBossRegion() \u0026\u0026 world \u003d\u003d client.getWorld())\n\t\t\t\t{\n\t\t\t\t\tif (e.getWeapon().equals(\"vuln\"))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!boss.equalsIgnoreCase(e.getBoss()) || (e.getBoss().contains(\"Tekton\") \u0026\u0026 !boss.equalsIgnoreCase(\"Tekton\")))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbaseDefence(e.getBoss(), e.getIndex());\n\t\t\t\t\t\t\tcalculateQueue(e.getIndex());\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (config.vulnerability())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tinfoBoxManager.removeInfoBox(vulnBox);\n\t\t\t\t\t\t\tIndexDataBase sprite \u003d client.getIndexSprites();\n\t\t\t\t\t\t\tvuln \u003d Objects.requireNonNull(client.getSprites(sprite, 56, 0))[0];\n\t\t\t\t\t\t\tvulnBox \u003d new VulnerabilityInfoBox(vuln.toBufferedImage(), this);\n\t\t\t\t\t\t\tvulnBox.setTooltip(ColorUtil.wrapWithColorTag(Text.removeTags(boss), Color.WHITE));\n\t\t\t\t\t\t\tinfoBoxManager.addInfoBox(vulnBox);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbossDef -\u003d bossDef * .1;\n\n\t\t\t\t\t\tupdateDefInfobox();\n\t\t\t\t\t}\n\t\t\t\t\telse if (e.getWeapon().equals(\"keris\"))\n\t\t\t\t\t{\n\t\t\t\t\t\tredKerisTicks \u003d 9;\n\t\t\t\t\t\tif (config.redKeris())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tinfoBoxManager.removeInfoBox(redKerisBox);\n\t\t\t\t\t\t\tredKerisBox \u003d new RedKerisInfoBox(itemManager.getImage(ItemID.KERIS_PARTISAN_OF_CORRUPTION), this);\n\t\t\t\t\t\t\tredKerisBox.setTooltip(ColorUtil.wrapWithColorTag(e.getBoss(), Color.WHITE));\n\t\t\t\t\t\t\tinfoBoxManager.addInfoBox(redKerisBox);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (e.getWeapon().equals(\"shadowBarrage\") \u0026\u0026 !shadowBarrageHit)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!boss.equalsIgnoreCase(e.getBoss()) || (e.getBoss().contains(\"Tekton\") \u0026\u0026 !boss.equalsIgnoreCase(\"Tekton\")))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbaseDefence(e.getBoss(), e.getIndex());\n\t\t\t\t\t\t\tcalculateQueue(e.getIndex());\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (config.shadowBarrage())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tinfoBoxManager.removeInfoBox(shadowBarrageBox);\n\t\t\t\t\t\t\tshadowBarrageBox \u003d new ShadowBarrageInfoBox(itemManager.getImage(ItemID.SHADOW_ANCIENT_SCEPTRE), this);\n\t\t\t\t\t\t\tshadowBarrageBox.setTooltip(ColorUtil.wrapWithColorTag(e.getBoss(), Color.WHITE));\n\t\t\t\t\t\t\tinfoBoxManager.addInfoBox(shadowBarrageBox);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshadowBarrageHit \u003d true; // non-stackable reduction\n\t\t\t\t\t\tbossDef -\u003d bossDef * .165;\n\n\t\t\t\t\t\tupdateDefInfobox();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage event)\n\t{\n\t\tif (event.getType() \u003d\u003d ChatMessageType.FRIENDSCHATNOTIFICATION)\n\t\t{\n\t\t\tif (Text.removeTags(event.getMessage()).equals(\"The raid has begun!\") \u0026\u0026 client.getVarbitValue(Varbits.IN_RAID) \u003d\u003d 1)\n\t\t\t{\n\t\t\t\t// Determine if in challege mode or regular\n\t\t\t\tinCm \u003d layoutSolver.isCM();\n\t\t\t\tcoxModeSet \u003d true;\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tprivate void onVarbitChanged(VarbitChanged e)\n\t{\n\t\tif (!inBossRegion())\n\t\t{\n\t\t\treset();\n\t\t}\n\n\t\tif (client.getVarbitValue(Varbits.IN_RAID) !\u003d 1 \u0026\u0026 isInCoxLobby())\n\t\t{\n\t\t\tinCm \u003d false;\n\t\t\tcoxModeSet \u003d false;\n\t\t}\n\n\t\tlayoutSolver.onVarbitChanged(e);\n\n\t\t//Copied from special counter plugin\n\t\tif (e.getVarpId() \u003d\u003d VarPlayer.SPECIAL_ATTACK_PERCENT)\n\t\t{\n\t\t\tif (client.getLocalPlayer() !\u003d null \u0026\u0026 client.getLocalPlayer().getPlayerComposition() !\u003d null)\n\t\t\t{\n\t\t\t\tint weapon \u003d client.getLocalPlayer().getPlayerComposition().getEquipmentId(KitType.WEAPON);\n\t\t\t\tif (weapon \u003d\u003d ItemID.KERIS_PARTISAN_OF_CORRUPTION \u0026\u0026 (e.getValue() \u003d\u003d lastSpecPercent - 750 || e.getValue() \u003d\u003d lastSpecPercent - 375))\n\t\t\t\t{\n\t\t\t\t\t// This event runs prior to player and npc updating, making getInteracting() too early to call..\n\t\t\t\t\t// defer this with invokeLater(), but note that this will run after incrementing the server tick counter\n\t\t\t\t\t// so we capture the current server tick counter here for use in computing the final hitsplat tick\n\t\t\t\t\tfinal int serverTicks \u003d client.getTickCount();\n\t\t\t\t\tclientThread.invokeLater(() -\u003e\n\t\t\t\t\t{\n\t\t\t\t\t\tActor target \u003d client.getLocalPlayer().getInteracting();\n\t\t\t\t\t\tlastSpecTarget \u003d target instanceof NPC ? (NPC) target : null;\n\t\t\t\t\t\thitsplatTick \u003d serverTicks + 1; //red keris has hit delay 1\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tlastSpecPercent \u003d e.getValue();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGraphicChanged(GraphicChanged e)\n\t{\n\t\tif (!(e.getActor() instanceof NPC) || e.getActor().getName() \u003d\u003d null || !partyService.isInParty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tNPC npc \u003d (NPC) e.getActor();\n\n\t\tBossInfo bossName \u003d BossInfo.getBoss(npc.getName());\n\t\tif (bossName \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal int VULNERABILITY_SPOT_ANIM \u003d 169;\n\t\tfinal int SHADOW_SCEPTRE_SPOT_ANIM \u003d 383;\n\t\tfinal int SHADOW_SCEPTRE_ID \u003d ItemID.SHADOW_ANCIENT_SCEPTRE_28266;\n\n\t\tif (npc.hasSpotAnim(VULNERABILITY_SPOT_ANIM))\n\t\t{\n\t\t\tpartyService.send(new DefenceTrackerUpdate(npc.getName(), npc.getIndex(), true, client.getWorld(), \"vuln\"));\n\t\t}\n\t\telse if (npc.hasSpotAnim(SHADOW_SCEPTRE_SPOT_ANIM))\n\t\t{\n\t\t\tint equippedWeapon \u003d ObjectUtils.defaultIfNull(\n\t\t\t\t\tclient.getLocalPlayer().getPlayerComposition().getEquipmentId(KitType.WEAPON), -1\n\t\t\t);\n\t\t\tif (equippedWeapon \u003d\u003d SHADOW_SCEPTRE_ID)\n\t\t\t{\n\t\t\t\tpartyService.send(new DefenceTrackerUpdate(npc.getName(), npc.getIndex(), true, client.getWorld(), \"shadowBarrage\"));\n\t\t\t}\n\t\t}\n\t}\n\n\n\n\t@Subscribe\n\tprotected void onGameStateChanged(GameStateChanged e)\n\t{\n\t\tlayoutSolver.onGameStateChanged(e);\n\t}\n\n\tprivate void baseDefence(String bossName, int index)\n\t{\n\t\tboss \u003d bossName;\n\t\tbossIndex \u003d index;\n\t\tbossDef \u003d BossInfo.getBaseDefence(boss);\n\n\t\tif (boss.equalsIgnoreCase(\"Xarpus\") \u0026\u0026 hmXarpus)\n\t\t{\n\t\t\tbossDef \u003d 200;\n\t\t}\n\t\telse if (coxBosses.contains(boss))\n\t\t{\n\t\t\tbossDef \u003d getCoxScaledDefenceLevel(bossName, (int) bossDef);\n\t\t}\n\t}\n\n\tprivate int getCoxScaledDefenceLevel(String bossName, int baseDef)\n\t{\n\t\tint partySize \u003d getCoxPartySize();\n\t\tbaseDef \u003d (int) (baseDef * (((int) Math.sqrt(partySize - 1) + ((partySize - 1) * 7 / 10 + 100)) / 100.0));\n\t\tif (inCm)\n\t\t{\n\t\t\tbaseDef \u003d (int) (baseDef * (bossName.contains(\"Tekton\") ? partySize \u003e 3 ? 1.35 : 1.2 : 1.5));\n\t\t}\n\t\treturn baseDef;\n\t}\n\n\tprivate int getScaledMagicLevel()\n\t{\n\t\tint scaledMagicLevel \u003d (int) BossInfo.getBaseMagic(boss);\n\t\tif (coxBosses.contains(boss))\n\t\t{\n\t\t\tint partySize \u003d getCoxPartySize();\n\t\t\tif (coxBossesSpecialOffensiveScaling.contains(boss))\n\t\t\t{\n\t\t\t\tscaledMagicLevel \u003d (int) (scaledMagicLevel * (((int) Math.sqrt(partySize - 1) + ((partySize - 1) * 7 / 10 + 100)) / 100.0));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tscaledMagicLevel \u003d scaledMagicLevel * (((int) (Math.sqrt(partySize - 1))) * 7 + partySize + 99) / 100;\n\t\t\t}\n\t\t\tif (inCm)\n\t\t\t{\n\t\t\t\tscaledMagicLevel \u003d (int) (1.5 * scaledMagicLevel);\n\t\t\t}\n\t\t}\n\t\treturn scaledMagicLevel;\n\t}\n\n\tprivate void calculateDefence(SpecialWeapon weapon, int hit)\n\t{\n\t\tswitch (weapon)\n\t\t{\n\t\t\tcase DRAGON_WARHAMMER:\n\t\t\t\tif (hit \u003d\u003d 0)\n\t\t\t\t{\n\t\t\t\t\tif (client.getVarbitValue(Varbits.IN_RAID) \u003d\u003d 1 \u0026\u0026 boss.equalsIgnoreCase(\"Tekton\"))\n\t\t\t\t\t{\n\t\t\t\t\t\tbossDef -\u003d bossDef * .05;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tbossDef -\u003d bossDef * .30;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase ELDER_MAUL:\n\t\t\t\tif (hit \u003d\u003d 0)\n\t\t\t\t{\n\t\t\t\t\tif (client.getVarbitValue(Varbits.IN_RAID) \u003d\u003d 1 \u0026\u0026 boss.equalsIgnoreCase(\"Tekton\"))\n\t\t\t\t\t{\n\t\t\t\t\t\tbossDef -\u003d bossDef * .05;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tbossDef -\u003d bossDef * .35;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase BANDOS_GODSWORD:\n\t\t\t\tif (hit \u003d\u003d 0)\n\t\t\t\t{\n\t\t\t\t\tif (client.getVarbitValue(Varbits.IN_RAID) \u003d\u003d 1 \u0026\u0026 boss.equalsIgnoreCase(\"Tekton\"))\n\t\t\t\t\t{\n\t\t\t\t\t\tbossDef -\u003d 10;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (boss.equalsIgnoreCase(\"Corporeal Beast\") || (inBossRegion() \u0026\u0026 boss.equalsIgnoreCase(\"Pestilent Bloat\") \u0026\u0026 !bloatDown))\n\t\t\t\t\t{\n\t\t\t\t\t\tbossDef -\u003d hit * 2;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tbossDef -\u003d hit;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase ARCLIGHT:\n\t\t\tcase DARKLIGHT:\n\t\t\t\tif (hit \u003e 0)\n\t\t\t\t{\n\t\t\t\t\tif (boss.equalsIgnoreCase(\"K\u0027ril Tsutsaroth\") || boss.equalsIgnoreCase(\"Abyssal Sire\") || boss.equalsIgnoreCase(\"Yama\"))\n\t\t\t\t\t{\n\t\t\t\t\t\tbossDef -\u003d BossInfo.getBaseDefence(boss) * .10;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tbossDef -\u003d BossInfo.getBaseDefence(boss) * .05;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase EMBERLIGHT:\n\t\t\t\tif (hit \u003e 0)\n\t\t\t\t{\n\t\t\t\t\tif (boss.equalsIgnoreCase(\"K\u0027ril Tsutsaroth\") || boss.equalsIgnoreCase(\"Abyssal Sire\") || boss.equalsIgnoreCase(\"Yama\"))\n\t\t\t\t\t{\n\t\t\t\t\t\tbossDef -\u003d BossInfo.getBaseDefence(boss) * .15;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tbossDef -\u003d BossInfo.getBaseDefence(boss) * .05;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase BARRELCHEST_ANCHOR:\n\t\t\t\tbossDef -\u003d hit * .10;\n\t\t\t\tbreak;\n\t\t\tcase BONE_DAGGER:\n\t\t\tcase DORGESHUUN_CROSSBOW:\n\t\t\t\tif (bossDef \u003e\u003d BossInfo.getBaseDefence(boss))\n\t\t\t\t{\n\t\t\t\t\tbossDef -\u003d hit;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase ACCURSED_SCEPTRE:\n\t\t\t\tif (hit \u003e 0)\n\t\t\t\t{\n\t\t\t\t\tif (bossDef \u003e (BossInfo.getBaseDefence(boss) * .85))\n\t\t\t\t\t{\n\t\t\t\t\t\tbossDef \u003d BossInfo.getBaseDefence(boss) * .85;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase TONALZTICS_OF_RALOS:\n\t\t\t\tfor (int i \u003d 0; i \u003c hit; i++)\n\t\t\t\t{\n\t\t\t\t\tbossDef -\u003d (int) (getScaledMagicLevel() * .1);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\tBossInfo bossInfo \u003d BossInfo.getBoss(boss);\n\n\t\tbossDef \u003d Math.max(bossDef, (bossInfo !\u003d null ? bossInfo.getMinDef() : 0));\n\t}\n\n\tprivate void calculateQueue(int index)\n\t{\n        if (queuedNpc \u003d\u003d null)\n\t\t{\n            return;\n        }\n\n        if (queuedNpc.index !\u003d index)\n\t\t{\n\t\t\tqueuedNpc \u003d null;\n\t\t\treturn;\n\t\t}\n\n\t\tfor (QueuedNpc.QueuedSpec spec : queuedNpc.queuedSpecs)\n\t\t{\n\t\t\tcalculateDefence(spec.weapon, spec.hit);\n\t\t}\n\n        queuedNpc \u003d null;\n    }\n\n\tprivate void updateDefInfobox()\n\t{\n\t\tinfoBoxManager.removeInfoBox(box);\n\n\t\tBossInfo bossInfo \u003d BossInfo.getBoss(boss);\n\n\t\tbox \u003d\n\t\t\tnew DefenceInfoBox(\n\t\t\t\tskillIconManager.getSkillImage(Skill.DEFENCE),\n\t\t\t\tthis,\n\t\t\t\t(bossInfo !\u003d null ? Math.round(bossInfo.getMinDef()) : 0),\n\t\t\t\tMath.round(bossDef),\n\t\t\t\tconfig\n\t\t\t);\n\n\t\tbox.setTooltip(ColorUtil.wrapWithColorTag(boss, Color.WHITE));\n\t\tinfoBoxManager.addInfoBox(box);\n\t}\n\n\tprivate boolean inBossRegion()\n\t{\n\t\tif (client.getLocalPlayer() !\u003d null \u0026\u0026 bossRegions.containsKey(boss))\n\t\t{\n\t\t\tWorldPoint wp \u003d WorldPoint.fromLocalInstance(client, client.getLocalPlayer().getLocalLocation());\n\t\t\tif (wp !\u003d null)\n\t\t\t{\n\t\t\t\treturn bossRegions.get(boss).contains(wp.getRegionID());\n\t\t\t}\n\t\t}\n\t\treturn client.getVarbitValue(Varbits.IN_RAID) \u003d\u003d 1 || !coxBosses.contains(boss);\n\t}\n\n\tpublic boolean isInCoxLobby()\n\t{\n\t\tint[] regions \u003d client.getTopLevelWorldView().getMapRegions();\n\t\treturn regions !\u003d null \u0026\u0026 regions.length \u003e 0 \u0026\u0026 Arrays.stream(regions).anyMatch((s) -\u003e s \u003d\u003d 4919);\n\t}\n\n\tprivate int getCoxPartySize()\n\t{\n\t\treturn client.getVarbitValue(COX_SCALED_PARTY_SIZE_VARBIT);\n\t}\n\n\tpublic void enableRequiredPlugins(String pluginName)\n\t{\n\t\ttry\n\t\t{\n\t\t\tfinal Optional\u003cPlugin\u003e plugin \u003d pluginManager.getPlugins().stream().filter(p -\u003e p.getName().equals(pluginName)).findFirst();\n\t\t\tif (plugin.isPresent() \u0026\u0026 !pluginManager.isPluginEnabled(plugin.get()))\n\t\t\t{\n\t\t\t\tpluginManager.setPluginEnabled(plugin.get(), true);\n\t\t\t\tpluginManager.startPlugin(plugin.get());\n\t\t\t}\n\t\t}\n\t\tcatch (PluginInstantiationException ex)\n\t\t{\n\t\t\tlog.error(\"error starting \" + pluginName + \" plugin\", ex);\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\partydefencetracker\\DefenceTrackerPlugin.java"},{"fileName":"DefenceTrackerUpdate.java","content":"package com.partydefencetracker;\n\nimport lombok.AllArgsConstructor;\nimport lombok.EqualsAndHashCode;\nimport lombok.Value;\nimport net.runelite.client.party.messages.PartyMemberMessage;\n\n@Value\n@AllArgsConstructor\n@EqualsAndHashCode(callSuper \u003d true)\npublic class DefenceTrackerUpdate extends PartyMemberMessage\n{\n\tString boss;\n\tint index;\n\tboolean alive;\n\tint world;\n\tString weapon;\n}\n","filePath":"src\\main\\java\\com\\partydefencetracker\\DefenceTrackerUpdate.java"},{"fileName":"QueuedNpc.java","content":"package com.partydefencetracker;\n\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport net.runelite.client.plugins.specialcounter.SpecialWeapon;\n\nimport java.util.ArrayList;\n\n@Getter(AccessLevel.PACKAGE)\npublic class QueuedNpc\n{\n\tpublic int index;\n\tpublic ArrayList\u003cQueuedSpec\u003e queuedSpecs;\n\n\tQueuedNpc(int index)\n\t{\n\t\tthis.index \u003d index;\n\t\tthis.queuedSpecs \u003d new ArrayList\u003c\u003e();\n\t}\n\n\tpublic static class QueuedSpec\n\t{\n\t\tpublic SpecialWeapon weapon;\n\t\tpublic int hit;\n\n\t\tQueuedSpec(SpecialWeapon weapon, int hit)\n\t\t{\n\t\t\tthis.weapon \u003d weapon;\n\t\t\tthis.hit \u003d hit;\n\t\t}\n\t}\n}","filePath":"src\\main\\java\\com\\partydefencetracker\\QueuedNpc.java"},{"fileName":"RedKerisInfoBox.java","content":"package com.partydefencetracker;\n\nimport net.runelite.client.ui.overlay.infobox.InfoBox;\nimport java.awt.*;\nimport java.awt.image.BufferedImage;\n\npublic class RedKerisInfoBox extends InfoBox\n{\n\tprivate DefenceTrackerPlugin plugin;\n\n\tRedKerisInfoBox(BufferedImage image, DefenceTrackerPlugin plugin)\n\t{\n\t\tsuper(image, plugin);\n\t\tthis.plugin \u003d plugin;\n\t}\n\n\t@Override\n\tpublic String getText()\n\t{\n\t\treturn String.valueOf(plugin.getRedKerisTicks());\n\t}\n\n\t@Override\n\tpublic Color getTextColor()\n\t{\n\t\treturn plugin.getRedKerisTicks() \u003c\u003d 3 ? Color.RED : Color.WHITE;\n\t}\n}\n","filePath":"src\\main\\java\\com\\partydefencetracker\\RedKerisInfoBox.java"},{"fileName":"ShadowBarrageInfoBox.java","content":"package com.partydefencetracker;\n\nimport java.awt.Color;\nimport java.awt.image.BufferedImage;\n\nimport net.runelite.client.ui.overlay.infobox.InfoBox;\n\npublic class ShadowBarrageInfoBox extends InfoBox\n{\n    private DefenceTrackerPlugin plugin;\n\n    ShadowBarrageInfoBox(BufferedImage image, DefenceTrackerPlugin plugin)\n    {\n        super(image, plugin);\n        this.plugin \u003d plugin;\n    }\n\n    public String getText()\n    {\n        return null;\n    }\n\n    public Color getTextColor()\n    {\n        return Color.WHITE;\n    }\n}\n","filePath":"src\\main\\java\\com\\partydefencetracker\\ShadowBarrageInfoBox.java"},{"fileName":"VulnerabilityInfoBox.java","content":"package com.partydefencetracker;\n\nimport java.awt.Color;\nimport java.awt.image.BufferedImage;\n\nimport net.runelite.client.ui.overlay.infobox.InfoBox;\n\npublic class VulnerabilityInfoBox extends InfoBox\n{\n\tprivate DefenceTrackerPlugin plugin;\n\n\tVulnerabilityInfoBox(BufferedImage image, DefenceTrackerPlugin plugin)\n\t{\n\t\tsuper(image, plugin);\n\t\tthis.plugin \u003d plugin;\n\t}\n\n\tpublic String getText()\n\t{\n\t\treturn null;\n\t}\n\n\tpublic Color getTextColor()\n\t{\n\t\treturn Color.WHITE;\n\t}\n}\n","filePath":"src\\main\\java\\com\\partydefencetracker\\VulnerabilityInfoBox.java"},{"fileName":"ExamplePluginTest.java","content":"package com.partydefencetracker;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ExamplePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(DefenceTrackerPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\partydefencetracker\\ExamplePluginTest.java"}]},{"commit":"b637c77cc98476f78f91791b24f579f5e2ca8778","repository":"https://github.com/Aethdae/no-more-resources.git","internalName":"resources-no-more","files":[{"fileName":"ResourcesNoMoreConfig.java","content":"package com.resources.ResourcesNoMore;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\nimport java.awt.*;\n\n@ConfigGroup(\"ResourcesNoMore\")\npublic interface ResourcesNoMoreConfig extends Config\n{\n\t@ConfigItem(\n\t\tkeyName \u003d \"removeRocks\",\n\t\tname \u003d \"Remove Rocks\",\n\t\tdescription \u003d \"Whether to remove rocks\"\n\t)\n\tdefault boolean removeRocks()\n\t{\n\t\treturn true;\n\t}\n    @ConfigItem(\n            keyName \u003d \"removeTree\",\n            name \u003d \"Remove Trees\",\n            description \u003d \"Whether to remove trees\"\n    )\n    default boolean removeTrees()\n    {\n        return true;\n    }\n    @ConfigItem(\n            keyName \u003d \"tileColor\",\n            name \u003d \"Tile Color\",\n            description \u003d \"Color of the bottom tile\"\n    )\n    default Color tileColor()\n    {\n        return Color.GRAY;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"removeTiles\",\n            name \u003d \"Remove Tile Outline\",\n            description \u003d \"Remove tile outline of depleted objects\"\n    )\n    default boolean removeTiles()\n    {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"outline\",\n            name \u003d \"Show Object Outline\",\n            description \u003d \"Show outline of depleted objects\"\n    )\n    default boolean outline()\n    {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"outlineColor\",\n            name \u003d \"Model Outline Color\",\n            description \u003d \"Color around depleted models\"\n    )\n    default Color modelOutlineColor()\n    {\n        return Color.GRAY;\n    }\n    @ConfigItem(\n            keyName \u003d \"maxDistance\",\n            name \u003d \"Max Render Distance\",\n            description \u003d \"Max tiles to render away from the player\"\n    )\n    default int maxDistance()\n    {\n        return 40;\n    }\n}\n","filePath":"src\\main\\java\\com\\resources\\ResourcesNoMore\\ResourcesNoMoreConfig.java"},{"fileName":"ResourcesNoMoreOverlay.java","content":"package com.resources.ResourcesNoMore;\n\n\nimport javax.inject.Inject;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\n\nimport com.google.common.collect.Multimap;\nimport net.runelite.api.*;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\nimport net.runelite.client.ui.overlay.outline.ModelOutlineRenderer;\n\nimport java.awt.*;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class ResourcesNoMoreOverlay extends Overlay\n{\n\n    private final Client client;\n    private final ResourcesNoMorePlugin plugin;\n    private final ResourcesNoMoreConfig config;\n    private final ModelOutlineRenderer modelOutlineRenderer;\n\n    @Inject\n    ResourcesNoMoreOverlay(Client client, ResourcesNoMorePlugin plugin, ResourcesNoMoreConfig config, ModelOutlineRenderer modelOutlineRenderer) {\n        setPosition(OverlayPosition.DYNAMIC);\n        setLayer(OverlayLayer.ABOVE_SCENE);\n        this.client \u003d client;\n        this.plugin \u003d plugin;\n        this.config \u003d config;\n        this.modelOutlineRenderer \u003d modelOutlineRenderer;\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        final int maxDistance \u003d config.maxDistance();\n        final Multimap\u003cWorldView, ResourceTile\u003e depletedTrees \u003d plugin.getDepletedTrees();\n        final Multimap\u003cWorldView, ResourceTile\u003e depletedRocks \u003d plugin.getDepletedRocks();\n        final ArrayList\u003cTile\u003e treeTiles \u003d plugin.treeTiles;\n        final ArrayList\u003cTile\u003e rockTiles \u003d plugin.rockTiles;\n        final Player player \u003d client.getLocalPlayer();\n        if (player \u003d\u003d null) {\n            return null;\n        }\n        if (config.removeRocks()) {\n            for (Tile tile : rockTiles) {\n                for(WorldView wV : depletedRocks.keySet())\n                {\n                    if (wV.contains(tile.getWorldLocation()))\n                    {\n                        if (player.getWorldLocation().distanceTo(tile.getWorldLocation()) \u003c maxDistance)\n                        {\n                            renderRocks(graphics, tile);\n                        }\n                    }\n                }\n            }\n        }\n        if (config.removeTrees()) {\n            for (Tile tile : treeTiles) {\n                for(WorldView wV : depletedTrees.keySet())\n                {\n                    if (wV.contains(tile.getWorldLocation()))\n                    {\n                        if (player.getWorldLocation().distanceTo(tile.getWorldLocation()) \u003c maxDistance) {\n                            renderTrees(graphics, tile);\n                        }\n                    }\n                }\n            }\n        }\n\n        return null;\n    }\n\n        /*\n        Leaving this old abomination in as an example of what you don\u0027t do. I was tired and frustrated and settled on a\n        working brute force method, but that is not the correct way.\n         */\n            /*\n            for (WorldView worldView : depletedTrees.keySet()) {\n                for (final ResourceTile rtile : depletedTrees.get(worldView)) {\n                    Scene scene \u003d worldView.getScene();\n                    Tile[][][] tiles \u003d scene.getTiles();\n                    WorldPoint worldPoint \u003d WorldPoint.fromRegion(rtile.regionId, rtile.regionX, rtile.regionY, rtile.z);\n                    int z \u003d worldView.getPlane();\n\n                    if (worldPoint.getPlane() !\u003d worldView.getPlane())\n                    {\n                        continue;\n                    }\n\n                    for (int x \u003d 0; x \u003c tiles[z].length; ++x)\n                    {\n                        for (int y \u003d 0; y \u003c tiles[z][x].length; ++y)\n                        {\n                            Tile tile \u003d tiles[z][x][y];\n                            if (tile \u003d\u003d null)\n                            {\n                                continue;\n                            }\n                            //for some reason just comparing the world points doesn\u0027t actually work? I am at a loss and\n                            //now have this abomination:\n                            if (worldPoint.getX() \u003d\u003d tile.getWorldLocation().getX() \u0026\u0026 worldPoint.getY() \u003d\u003d tile.getWorldLocation().getY() \u0026\u0026 worldPoint.getPlane() \u003d\u003d tile.getPlane())\n                            {\n                                renderTrees(graphics, tile);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n             */\n\n    private void renderRocks ( final Graphics2D graphics, Tile tile)\n    {\n        GameObject[] gameObjects \u003d tile.getGameObjects();\n        if (gameObjects !\u003d null) {\n            for (GameObject gameObject : gameObjects) {\n                if (gameObject !\u003d null \u0026\u0026 gameObject.getSceneMinLocation().equals(tile.getSceneLocation())) {\n                    if (!config.removeTiles()) {\n                        OverlayUtil.renderTileOverlay(graphics, gameObject, \"\", config.tileColor());\n                    }\n                    if (config.outline()) {\n                        modelOutlineRenderer.drawOutline(gameObject, 3, config.modelOutlineColor(), 2);\n                    }\n                }\n            }\n        }\n    }\n\n    private void renderTrees ( final Graphics2D graphics, Tile tile)\n    {\n        GameObject[] gameObjects \u003d tile.getGameObjects();\n        if (gameObjects !\u003d null) {\n            for (GameObject gameObject : gameObjects) {\n                if (gameObject !\u003d null \u0026\u0026 gameObject.getSceneMinLocation().equals(tile.getSceneLocation())) {\n                    if (!config.removeTiles()) {\n                        OverlayUtil.renderTileOverlay(graphics, gameObject, \"\", config.tileColor());\n                    }\n                    if (config.outline()) {\n                        modelOutlineRenderer.drawOutline(gameObject, 3, config.modelOutlineColor(), 2);\n                    }\n                }\n            }\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\resources\\ResourcesNoMore\\ResourcesNoMoreOverlay.java"},{"fileName":"ResourcesNoMorePlugin.java","content":"package com.resources.ResourcesNoMore;\n\nimport com.google.common.collect.ArrayListMultimap;\nimport com.google.common.collect.Multimap;\nimport com.google.common.reflect.TypeToken;\nimport com.google.gson.Gson;\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\n\nimport joptsimple.internal.Strings;\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\n\nimport java.util.*;\n\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.*;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Resources No More\"\n)\npublic class ResourcesNoMorePlugin extends Plugin {\n    @Getter(AccessLevel.PACKAGE)\n    public final Multimap\u003cWorldView, ResourceTile\u003e depletedTrees \u003d ArrayListMultimap.create();\n\n    @Getter(AccessLevel.PACKAGE)\n    public final Multimap\u003cWorldView, ResourceTile\u003e depletedRocks \u003d ArrayListMultimap.create();\n\n    public final ArrayList\u003cTile\u003e treeTiles \u003d new ArrayList\u003c\u003e();\n    public final ArrayList\u003cTile\u003e rockTiles \u003d new ArrayList\u003c\u003e();\n\n    private static final String CONFIG_GROUP \u003d \"resourceGroundMarker\";\n    private static final String ROCK_GROUP \u003d \"_Rock\";\n    private static final String TREE_GROUP \u003d \"_Tree\";\n    private static final String REGION_PREFIX \u003d \"resourceRegion_\";\n\n    boolean canAddTree \u003d false;\n    boolean canAddOre \u003d false;\n    boolean canAddTile \u003d false;\n\n    @Inject\n    private Gson gson;\n\n    @Inject\n    private OverlayManager overlayManager;\n\n    @Inject\n    private ConfigManager configManager;\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private ResourcesNoMoreConfig config;\n\n    @Inject\n    ResourcesNoMoreOverlay overlay;\n\n\n    @Override\n    protected void startUp() throws Exception {\n        log.debug(\"Loading at start of RNM...\");\n        overlayManager.add(overlay);\n        loadTrees();\n        loadRocks();\n    }\n\n    @Override\n    protected void shutDown() throws Exception {\n        log.debug(\"RNM is shutting down!\");\n        overlayManager.remove(overlay);\n        depletedTrees.clear();\n        depletedRocks.clear();\n        treeTiles.clear();\n        rockTiles.clear();\n    }\n\n    @Subscribe\n    public void onWorldViewLoaded(WorldViewLoaded event) {\n        loadTrees(event.getWorldView());\n        loadRocks(event.getWorldView());\n    }\n\n    @Subscribe\n    public void onWorldViewUnloaded(WorldViewUnloaded event) {\n        depletedRocks.removeAll(event.getWorldView());\n        depletedTrees.removeAll(event.getWorldView());\n        rockTiles.clear();\n        treeTiles.clear();\n    }\n\n    @Subscribe\n    public void onGameStateChanged(GameStateChanged event)\n    {\n        if (event.getGameState() \u003d\u003d GameState.HOPPING || event.getGameState() \u003d\u003d GameState.LOADING)\n        {\n            treeTiles.clear();\n            rockTiles.clear();\n        }\n    }\n\n    @Subscribe\n    public void onChatMessage(ChatMessage event) {\n        var chatType \u003d event.getType();\n        if (chatType !\u003d ChatMessageType.GAMEMESSAGE \u0026\u0026 chatType !\u003d ChatMessageType.SPAM\n                \u0026\u0026 chatType !\u003d ChatMessageType.MESBOX) {\n            return;\n        }\n\n        final String message \u003d event.getMessage();\n        if (message.contains(\"You manage to mine\")) {\n            canAddOre \u003d true;\n        }\n\n        if (message.contains(\"You get\")) {\n            canAddTree \u003d true;\n        }\n    }\n    @Subscribe\n    public void onItemContainerChanged(ItemContainerChanged event)\n    {\n        if (client.getItemContainer(InventoryID.INVENTORY) \u003d\u003d event.getItemContainer())\n        {\n            canAddTile \u003d true;\n        }\n    }\n\n    @Subscribe\n    public void onGameObjectDespawned(GameObjectDespawned event) {\n        if (client.getGameState() !\u003d GameState.LOGGED_IN) {\n            return;\n        }\n\n        final GameObject object \u003d event.getGameObject();\n\n        int regionID \u003d object.getWorldLocation().getRegionID();\n        Tile tile \u003d event.getTile();\n\n        if (client.getLocalPlayer().getWorldLocation().distanceTo(event.getTile().getWorldLocation()) \u003e 2)\n        {\n            return;\n        }\n        if (canAddTile) {\n            if (canAddOre) {\n                canAddOre \u003d false;\n                List\u003cResourceTile\u003e depletedRockCollection \u003d new ArrayList\u003c\u003e(getDepletedRocksInRegion(regionID));\n\n                ResourceTile resourceTile \u003d new ResourceTile(regionID, tile.getWorldLocation().getRegionX(), tile.getWorldLocation().getRegionY(), tile.getPlane());\n                if (!depletedRockCollection.contains(resourceTile)) {\n                    depletedRockCollection.add(resourceTile);\n                }\n\n                log.debug(resourceTile.toString());\n                String json \u003d gson.toJson(depletedRockCollection);\n                configManager.setConfiguration(CONFIG_GROUP + ROCK_GROUP, REGION_PREFIX + regionID, json);\n                loadRocks();\n            }\n\n            if (canAddTree) {\n                canAddTree \u003d false;\n                List\u003cResourceTile\u003e depletedTreeCollection \u003d new ArrayList\u003c\u003e(getDepletedTreesInRegion(regionID));\n\n                ResourceTile resourceTile \u003d new ResourceTile(regionID, tile.getWorldLocation().getRegionX(), tile.getWorldLocation().getRegionY(), tile.getPlane());\n\n                if (!depletedTreeCollection.contains(resourceTile)) {\n                    depletedTreeCollection.add(resourceTile);\n                }\n                log.debug(tile.toString());\n                String json \u003d gson.toJson(depletedTreeCollection);\n                configManager.setConfiguration(CONFIG_GROUP + TREE_GROUP, REGION_PREFIX + regionID, json);\n                loadTrees();\n            }\n            canAddTile \u003d false;\n        }\n    }\n    @Subscribe\n    public void onGameObjectSpawned(GameObjectSpawned event)\n    {\n        Tile eventTile \u003d event.getTile();\n        int region \u003d eventTile.getWorldLocation().getRegionID();\n        for (ResourceTile tile : getDepletedRocksInRegion(region))\n        {\n            WorldPoint point \u003d WorldPoint.fromRegion(tile.regionId, tile.regionX, tile.regionY, tile.z);\n            if (eventTile.getWorldLocation().equals(point) \u0026\u0026 !rockTiles.contains(eventTile))\n            {\n                rockTiles.add(eventTile);\n            }\n        }\n        for (ResourceTile tile : getDepletedTreesInRegion(region))\n        {\n            WorldPoint point \u003d WorldPoint.fromRegion(tile.regionId, tile.regionX, tile.regionY, tile.z);\n            if (eventTile.getWorldLocation().equals(point) \u0026\u0026 !treeTiles.contains(eventTile))\n            {\n                treeTiles.add(eventTile);\n            }\n        }\n    }\n\n    void loadTrees() {\n        depletedTrees.clear();\n\n        WorldView wv \u003d client.getTopLevelWorldView();\n        if (wv \u003d\u003d null) {\n            return;\n        }\n\n        loadTrees(wv);\n\n        for (WorldEntity we : wv.worldEntities()) {\n            loadTrees(we.getWorldView());\n        }\n    }\n\n    void loadTrees(WorldView wv) {\n        depletedTrees.removeAll(wv);\n\n        int[] regions \u003d wv.getMapRegions();\n        if (regions \u003d\u003d null) {\n            return;\n        }\n\n        for (int regionId : regions) {\n            // load points for region\n            log.debug(\"Loading points for region {}\", regionId);\n            Collection\u003cResourceTile\u003e trees \u003d getDepletedTreesInRegion(regionId);\n            depletedTrees.putAll(wv, trees);\n        }\n    }\n\n    void loadRocks() {\n        depletedRocks.clear();\n\n        WorldView wv \u003d client.getTopLevelWorldView();\n        if (wv \u003d\u003d null) {\n            return;\n        }\n\n        loadRocks(wv);\n\n        for (WorldEntity we : wv.worldEntities()) {\n            loadRocks(we.getWorldView());\n        }\n    }\n\n    void loadRocks(WorldView wv) {\n        depletedRocks.removeAll(wv);\n\n        int[] regions \u003d wv.getMapRegions();\n        if (regions \u003d\u003d null) {\n            return;\n        }\n\n        for (int regionId : regions) {\n            // load points for region\n            log.debug(\"Loading points for region {}\", regionId);\n            Collection\u003cResourceTile\u003e rocks \u003d getDepletedRocksInRegion(regionId);\n            depletedRocks.putAll(wv, rocks);\n        }\n    }\n\n    Collection\u003cResourceTile\u003e getDepletedTreesInRegion(int regionId) {\n        String json \u003d configManager.getConfiguration(CONFIG_GROUP + TREE_GROUP, REGION_PREFIX + regionId);\n        if (Strings.isNullOrEmpty(json)) {\n            return Collections.emptyList();\n        }\n\n        return gson.fromJson(json, new TypeToken\u003cList\u003cResourceTile\u003e\u003e() {\n        }.getType());\n    }\n\n    Collection\u003cResourceTile\u003e getDepletedRocksInRegion(int regionId) {\n        String json \u003d configManager.getConfiguration(CONFIG_GROUP + ROCK_GROUP, REGION_PREFIX + regionId);\n        if (Strings.isNullOrEmpty(json)) {\n            return Collections.emptyList();\n        }\n        return gson.fromJson(json, new TypeToken\u003cList\u003cResourceTile\u003e\u003e() {\n        }.getType());\n    }\n\n    @Provides\n    ResourcesNoMoreConfig provideConfig(ConfigManager configManager) {\n        return configManager.getConfig(ResourcesNoMoreConfig.class);\n    }\n}","filePath":"src\\main\\java\\com\\resources\\ResourcesNoMore\\ResourcesNoMorePlugin.java"},{"fileName":"ResourceTile.java","content":"package com.resources.ResourcesNoMore;\n\nimport lombok.EqualsAndHashCode;\nimport lombok.Getter;\nimport lombok.Setter;\nimport lombok.Value;\nimport net.runelite.api.coords.WorldPoint;\n\n\n@Value\n@EqualsAndHashCode\npublic class ResourceTile {\n    @Getter\n    @Setter\n    public int regionId;\n    @Getter\n    @Setter\n    public int regionX;\n    @Getter\n    @Setter\n    public int regionY;\n    @Getter\n    @Setter\n    public int z;\n\n    public String toString()\n    {\n        return regionId + \" region, at \" + regionX + \", \" + regionY + \" on plane \" + z + \".\";\n    }\n\n    public ResourceTile(int id, int x, int y, int plane)\n    {\n        this.regionId \u003d id;\n        this.regionX \u003d x;\n        this.regionY \u003d y;\n        this.z \u003d plane;\n    }\n\n}\n","filePath":"src\\main\\java\\com\\resources\\ResourcesNoMore\\ResourceTile.java"},{"fileName":"ResourcesNoMorePluginTest.java","content":"package com.resources.ResourcesNoMore;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ResourcesNoMorePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(ResourcesNoMorePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\resources\\ResourcesNoMore\\ResourcesNoMorePluginTest.java"}]},{"commit":"d7d0443cbefe93996dddf30a73b3d0deb0451d9f","repository":"https://github.com/Rubueno/zmi.git","internalName":"zmi","files":[{"fileName":"ZmiPlugin.java","content":"package com.rubueno.zmi;\n\nimport com.google.common.collect.ImmutableSet;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport org.apache.commons.lang3.ArrayUtils;\n\nimport javax.inject.Inject;\nimport java.util.Arrays;\nimport java.util.HashSet;\nimport java.util.Set;\n\n@PluginDescriptor(\n        name \u003d \"ZMI\",\n        description \u003d \"Removes scenery from ZMI to improve performance\"\n)\n@Slf4j\npublic class ZmiPlugin extends Plugin {\n    private static final Set\u003cInteger\u003e HIDE \u003d ImmutableSet.of(\n            21011, 21012, // bench\n            29630, 29629, // lava pool\n            29633, 29632, // lava bubbles\n            34780, 34781, 34794, // altar pillar\n            25052, // stone pillar\n            25087, 25088, 25089 // skeleton\n            // 25092, 25093, 24094, 25095, 25096, 25097, 25098 // floor rubble\n            // need help hiding this\n    );\n\n    private static final Set\u003cInteger\u003e ZmiMapRegions \u003d ImmutableSet.of(\n        12118, 12119, 12374, 12375\n    );\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private ClientThread clientThread;\n\n    @Override\n    protected void startUp() {\n        if (client.getGameState() \u003d\u003d GameState.LOGGED_IN) {\n            clientThread.invoke(this::hide);\n        }\n    }\n\n    @Override\n    protected void shutDown() {\n        clientThread.invoke(() -\u003e\n        {\n            if (client.getGameState() \u003d\u003d GameState.LOGGED_IN) {\n                client.setGameState(GameState.LOADING);\n            }\n        });\n    }\n\n    @Subscribe\n    public void onGameStateChanged(GameStateChanged gameStateChanged) {\n        if (gameStateChanged.getGameState() \u003d\u003d GameState.LOGGED_IN) {\n            hide();\n        }\n    }\n\n    private void hide() {\n        if (!isInZmi()) {\n            return;\n        }\n        Scene scene \u003d client.getScene();\n        Tile[][] tiles \u003d scene.getTiles()[0];\n        Player player \u003d client.getLocalPlayer();\n        int cnt \u003d 0;\n        for (int x \u003d 0; x \u003c Constants.SCENE_SIZE; ++x) {\n            for (int y \u003d 0; y \u003c Constants.SCENE_SIZE; ++y) {\n                Tile tile \u003d tiles[x][y];\n                if (tile \u003d\u003d null) {\n                    continue;\n                }\n\n\n                for (GameObject gameObject : tile.getGameObjects()) {\n                    if (gameObject \u003d\u003d null) {\n                        continue;\n                    }\n\n                    if (HIDE.contains(gameObject.getId())) {\n                        scene.removeGameObject(gameObject);\n                        ++cnt;\n                        break;\n                    }\n                }\n            }\n        }\n\n        log.debug(\"Removed {} objects\", cnt);\n    }\n\n    private boolean isInZmi() {\n        Integer[] asd \u003d ArrayUtils.toObject(client.getMapRegions());\n        Set\u003cInteger\u003e currentRegions \u003d new HashSet\u003cInteger\u003e(Arrays.asList(asd));\n        currentRegions.retainAll(ZmiMapRegions);\n        return currentRegions.stream().count() \u003e 0;\n    }\n}\n","filePath":"src\\main\\java\\com\\rubueno\\zmi\\ZmiPlugin.java"},{"fileName":"ExamplePluginTest.java","content":"package com.example;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ExamplePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(ExamplePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\example\\ExamplePluginTest.java"}]},{"commit":"2effa2c2d2900696679488294cb453af94149d22","repository":"https://github.com/Adam-/runelite-plugins.git","internalName":"player-outline","files":[{"fileName":"PlayerOutlineConfig.java","content":"/*\n * Copyright (c) 2021, neilrush\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.playeroutline;\n\nimport java.awt.Color;\nimport net.runelite.client.config.Alpha;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.Range;\n\n@ConfigGroup(\"playeroutline\")\npublic interface PlayerOutlineConfig extends Config\n{\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"playerOutlineColor\",\n\t\tname \u003d \"Outline Color\",\n\t\tdescription \u003d \"The color for the players outline\",\n\t\tposition \u003d 0\n\t)\n\tdefault Color playerOutlineColor()\n\t{\n\t\treturn new Color(0x3D000000, true);\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"borderWidth\",\n\t\tname \u003d \"Border Width\",\n\t\tdescription \u003d \"Width of the player outline border\",\n\t\tposition \u003d 1\n\t)\n\tdefault int borderWidth()\n\t{\n\t\treturn 4;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"outlineFeather\",\n\t\tname \u003d \"Outline Feather\",\n\t\tdescription \u003d \"Specify between 0-4 how much the player outline should be faded\",\n\t\tposition \u003d 2\n\t)\n\t@Range(\n\t\tmax \u003d 4\n\t)\n\tdefault int outlineFeather()\n\t{\n\t\treturn 4;\n\t}\n}\n","filePath":"src\\main\\java\\com\\playeroutline\\PlayerOutlineConfig.java"},{"fileName":"PlayerOutlineOverlay.java","content":"/*\n * Copyright (c) 2021, neilrush\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.playeroutline;\n\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\nimport net.runelite.client.ui.overlay.outline.ModelOutlineRenderer;\n\npublic class PlayerOutlineOverlay extends Overlay\n{\n\n\tprivate final Client client;\n\tprivate final PlayerOutlineConfig config;\n\tprivate final ModelOutlineRenderer modelOutlineRenderer;\n\n\t@Inject\n\tpublic PlayerOutlineOverlay(Client client, PlayerOutlineConfig config, ModelOutlineRenderer modelOutlineRenderer)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.config \u003d config;\n\t\tthis.modelOutlineRenderer \u003d modelOutlineRenderer;\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\n\t\tsetPriority(OverlayPriority.HIGH);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tmodelOutlineRenderer.drawOutline(client.getLocalPlayer(), config.borderWidth(), config.playerOutlineColor(), config.outlineFeather());\n\t\treturn null;\n\t}\n\n}\n","filePath":"src\\main\\java\\com\\playeroutline\\PlayerOutlineOverlay.java"},{"fileName":"PlayerOutlinePlugin.java","content":"/*\n * Copyright (c) 2021, neilrush\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.playeroutline;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Player Outline\",\n\tdescription \u003d \"A simple plugin that outlines the player allowing you to see the player behind objects.\",\n\ttags \u003d \"highlight, player, outline, color\"\n)\npublic class PlayerOutlinePlugin extends Plugin\n{\n\t@Inject\n\tPlayerOutlineOverlay playerOutlineOverlay;\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\toverlayManager.add(playerOutlineOverlay);\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\toverlayManager.remove(playerOutlineOverlay);\n\t}\n\n\t@Provides\n\tPlayerOutlineConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(PlayerOutlineConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\playeroutline\\PlayerOutlinePlugin.java"},{"fileName":"PlayerOutlinePluginTest.java","content":"package com.playeroutline;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class PlayerOutlinePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(PlayerOutlinePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\playeroutline\\PlayerOutlinePluginTest.java"}]},{"commit":"2aaaba9244e2f8523b0aa738e7fad463b857c9fb","repository":"https://github.com/14manj01/QuestCapeHelper.git","internalName":"questcapehelper","files":[{"fileName":"IronmanPathConfig.java","content":"package com.ironpath;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"ironmanpath\")\npublic interface IronmanPathConfig extends Config\n{\n    @ConfigItem(\n            keyName \u003d \"showActiveStepOverlay\",\n            name \u003d \"Show active step overlay\",\n            description \u003d \"Show the current active step (next unfinished route step) as an overlay in the top-right of the game view.\"\n    )\n    default boolean showActiveStepOverlay()\n    {\n        return false;\n    }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\IronmanPathConfig.java"},{"fileName":"IronmanPathPlugin.java","content":"package com.ironpath;\n\nimport com.google.inject.Provides;\nimport com.ironpath.service.QuestRouteService;\nimport com.ironpath.service.ProgressionPlanService;\nimport com.ironpath.overlay.ActiveStepOverlay;\nimport com.ironpath.ui.IronmanPathPanel;\nimport java.awt.image.BufferedImage;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.game.SpriteManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.ImageUtil;\n\nimport javax.swing.SwingUtilities;\n\n@Slf4j\n@PluginDescriptor(\n        name \u003d \"Optimal Quest Order\",\n        description \u003d \"Quest-first ironman progression panel (quest cape route, readiness, search).\",\n        tags \u003d {\"ironman\", \"quest\", \"route\", \"efficiency\"}\n)\npublic class IronmanPathPlugin extends Plugin\n{\n    @Inject private Client client;\n    @Inject private ClientThread clientThread;\n    @Inject private ClientToolbar clientToolbar;\n    @Inject private SpriteManager spriteManager;\n\n    @Inject private QuestRouteService questRouteService;\n    @Inject private ProgressionPlanService progressionPlanService;\n\n    @Inject private OverlayManager overlayManager;\n    @Inject private ActiveStepOverlay activeStepOverlay;\n\n    @Inject private IronmanPathConfig config;\n\n    private IronmanPathPanel panel;\n    private NavigationButton navButton;\n\n    // Delay the first refresh after login so skills/quests/varbits settle and we avoid UI thrash.\n    private int refreshInTicks \u003d 0;\n\n    // Varbits can change extremely frequently (run energy, timers, etc.).\n    // Mark the panel as dirty and refresh at a low, human-friendly rate.\n    private boolean panelDirty \u003d false;\n    private int varbitRefreshCooldownTicks \u003d 0;\n\n    @Provides\n    IronmanPathConfig provideConfig(ConfigManager configManager)\n    {\n        return configManager.getConfig(IronmanPathConfig.class);\n    }\n\n    @Override\n    protected void startUp()\n    {\n        panel \u003d new IronmanPathPanel(questRouteService, progressionPlanService, clientThread, spriteManager);\n\n        final BufferedImage icon \u003d ImageUtil.loadImageResource(getClass(), \"/com/ironpath/icon.png\");\n\n        navButton \u003d NavigationButton.builder()\n                .tooltip(\"Ironman Path\")\n                .icon(icon)\n                .priority(5)\n                .panel(panel)\n                .build();\n\n        clientToolbar.addNavigation(navButton);\n\n        // Overlay in the game view (toggled via config).\n        overlayManager.add(activeStepOverlay);\n        log.info(\"Ironman Path started\");\n    }\n\n    @Override\n    protected void shutDown()\n    {\n        if (overlayManager !\u003d null \u0026\u0026 activeStepOverlay !\u003d null)\n        {\n            overlayManager.remove(activeStepOverlay);\n        }\n\n        if (navButton !\u003d null)\n        {\n            clientToolbar.removeNavigation(navButton);\n            navButton \u003d null;\n        }\n        panel \u003d null;\n        log.info(\"Ironman Path stopped\");\n    }\n\n    @Subscribe\n    public void onGameStateChanged(GameStateChanged event)\n    {\n        if (panel \u003d\u003d null)\n        {\n            return;\n        }\n\n        if (event.getGameState() \u003d\u003d GameState.LOGGED_IN)\n        {\n            // Wait a couple ticks so quest state/skills/varbits are populated.\n            refreshInTicks \u003d 2;\n            panelDirty \u003d false;\n            varbitRefreshCooldownTicks \u003d 0;\n            panel.showLoading();\n            return;\n        }\n\n        if (event.getGameState() \u003d\u003d GameState.LOGIN_SCREEN || event.getGameState() \u003d\u003d GameState.HOPPING)\n        {\n            refreshInTicks \u003d 0;\n            panelDirty \u003d false;\n            varbitRefreshCooldownTicks \u003d 0;\n        }\n    }\n\n    @Subscribe\n    public void onGameTick(GameTick tick)\n    {\n        if (panel \u003d\u003d null)\n        {\n            return;\n        }\n\n        if (refreshInTicks \u003e 0)\n        {\n            refreshInTicks--;\n            if (refreshInTicks \u003d\u003d 0)\n            {\n                requestRefreshIfPanelShowing();\n            }\n        }\n\n        // Rate-limit refreshes caused by frequent varbit changes.\n        if (varbitRefreshCooldownTicks \u003e 0)\n        {\n            varbitRefreshCooldownTicks--;\n        }\n\n        if (panelDirty \u0026\u0026 varbitRefreshCooldownTicks \u003d\u003d 0)\n        {\n            panelDirty \u003d false;\n            // ~1.8s at 0.6s per tick. Keeps UI responsive without constant rebuilds.\n            varbitRefreshCooldownTicks \u003d 3;\n            requestRefreshIfPanelShowing();\n        }\n    }\n\n    @Subscribe\n    public void onVarbitChanged(VarbitChanged event)\n    {\n        if (panel \u003d\u003d null)\n        {\n            return;\n        }\n\n        // Varbits change very frequently. Mark dirty and refresh on a short tick-based cadence.\n        // This avoids constant panel rebuilds (and prevents icon flicker).\n        panelDirty \u003d true;\n    }\n\n    @Subscribe\n    public void onConfigChanged(ConfigChanged event)\n    {\n        if (panel \u003d\u003d null)\n        {\n            return;\n        }\n\n        requestRefreshIfPanelShowing();\n    }\n\n    private void requestRefreshIfPanelShowing()\n    {\n        // Only rebuild the sidebar when it\u0027s actually visible.\n        // This prevents background varbit churn from constantly recreating cards.\n        SwingUtilities.invokeLater(() -\u003e\n        {\n            if (panel !\u003d null \u0026\u0026 panel.isShowing())\n            {\n                panel.requestRefresh();\n            }\n        });\n    }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\IronmanPathPlugin.java"},{"fileName":"InfoPlanStep.java","content":"package com.ironpath.model;\n\nimport net.runelite.api.Skill;\n\n/**\n * A non-quest plan step that cannot be verified automatically by the client.\n *\n * The planner assumes the user completes these steps when they appear, and uses them\n * primarily for guidance and for simulated state (e.g., training or lamp allocation).\n */\npublic final class InfoPlanStep implements PlanStep\n{\n    private final PlanStepType type;\n    private final String title;\n    private final String detail;\n    private final String wikiUrl;\n\n    // Optional fields (used by TRAIN/LAMP/DIARY guidance)\n    private final Skill skill;\n    private final Integer fromLevel;\n    private final Integer toLevel;\n    private final Integer xp; // best-effort, may be null\n\n    private InfoPlanStep(Builder b)\n    {\n        this.type \u003d b.type;\n        this.title \u003d b.title;\n        this.detail \u003d b.detail;\n        this.wikiUrl \u003d b.wikiUrl;\n        this.skill \u003d b.skill;\n        this.fromLevel \u003d b.fromLevel;\n        this.toLevel \u003d b.toLevel;\n        this.xp \u003d b.xp;\n    }\n\n    @Override\n    public PlanStepType getType()\n    {\n        return type;\n    }\n\n    public String getTitle()\n    {\n        return title;\n    }\n\n    public String getDetail()\n    {\n        return detail;\n    }\n\n    public String getWikiUrl()\n    {\n        return wikiUrl;\n    }\n\n    public Skill getSkill()\n    {\n        return skill;\n    }\n\n    public Integer getFromLevel()\n    {\n        return fromLevel;\n    }\n\n    public Integer getToLevel()\n    {\n        return toLevel;\n    }\n\n    public Integer getXp()\n    {\n        return xp;\n    }\n\n    public static Builder builder(PlanStepType type)\n    {\n        return new Builder(type);\n    }\n\n    public static final class Builder\n    {\n        private final PlanStepType type;\n        private String title;\n        private String detail;\n        private String wikiUrl;\n        private Skill skill;\n        private Integer fromLevel;\n        private Integer toLevel;\n        private Integer xp;\n\n        private Builder(PlanStepType type)\n        {\n            this.type \u003d type;\n        }\n\n        public Builder title(String title)\n        {\n            this.title \u003d title;\n            return this;\n        }\n\n        public Builder detail(String detail)\n        {\n            this.detail \u003d detail;\n            return this;\n        }\n\n        public Builder wikiUrl(String wikiUrl)\n        {\n            this.wikiUrl \u003d wikiUrl;\n            return this;\n        }\n\n        public Builder skill(Skill skill)\n        {\n            this.skill \u003d skill;\n            return this;\n        }\n\n        public Builder fromLevel(Integer fromLevel)\n        {\n            this.fromLevel \u003d fromLevel;\n            return this;\n        }\n\n        public Builder toLevel(Integer toLevel)\n        {\n            this.toLevel \u003d toLevel;\n            return this;\n        }\n\n        public Builder xp(Integer xp)\n        {\n            this.xp \u003d xp;\n            return this;\n        }\n\n        public InfoPlanStep build()\n        {\n            return new InfoPlanStep(this);\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\model\\InfoPlanStep.java"},{"fileName":"PlanSnapshot.java","content":"package com.ironpath.model;\n\nimport java.util.Collections;\nimport java.util.List;\n\npublic final class PlanSnapshot\n{\n    private final int completed;\n    private final int total;\n    private final QuestRow recommended;\n    private final List\u003cQuestRow\u003e inProgress;\n    private final List\u003cQuestRow\u003e ready;\n    private final List\u003cQuestRow\u003e blocked;\n    private final List\u003cQuestRow\u003e done;\n\n    public PlanSnapshot(int completed, int total, QuestRow recommended,\n                        List\u003cQuestRow\u003e inProgress, List\u003cQuestRow\u003e ready, List\u003cQuestRow\u003e blocked, List\u003cQuestRow\u003e done)\n    {\n        this.completed \u003d completed;\n        this.total \u003d total;\n        this.recommended \u003d recommended;\n        this.inProgress \u003d inProgress \u003d\u003d null ? List.of() : Collections.unmodifiableList(inProgress);\n        this.ready \u003d ready \u003d\u003d null ? List.of() : Collections.unmodifiableList(ready);\n        this.blocked \u003d blocked \u003d\u003d null ? List.of() : Collections.unmodifiableList(blocked);\n        this.done \u003d done \u003d\u003d null ? List.of() : Collections.unmodifiableList(done);\n    }\n\n    public int getCompleted() { return completed; }\n    public int getTotal() { return total; }\n    public QuestRow getRecommended() { return recommended; }\n    public List\u003cQuestRow\u003e getInProgress() { return inProgress; }\n    public List\u003cQuestRow\u003e getReady() { return ready; }\n    public List\u003cQuestRow\u003e getBlocked() { return blocked; }\n    public List\u003cQuestRow\u003e getDone() { return done; }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\model\\PlanSnapshot.java"},{"fileName":"PlanStep.java","content":"package com.ironpath.model;\n\n/**\n * A single actionable step in the progression plan.\n *\n * Steps are either a quest to complete or a skill level to train to.\n */\npublic interface PlanStep\n{\n    PlanStepType getType();\n}\n","filePath":"src\\main\\java\\com\\ironpath\\model\\PlanStep.java"},{"fileName":"PlanStepType.java","content":"package com.ironpath.model;\n\npublic enum PlanStepType\n{\n    QUEST,\n    TRAIN,\n    MINIQUEST,\n    UNLOCK,\n    LAMP,\n    DIARY,\n    NOTE\n}\n","filePath":"src\\main\\java\\com\\ironpath\\model\\PlanStepType.java"},{"fileName":"QuestBlocker.java","content":"package com.ironpath.model;\n\nimport net.runelite.api.Skill;\n\npublic final class QuestBlocker\n{\n    public enum Type\n    {\n        PREREQUISITE_QUEST,\n        SKILL_LEVEL\n    }\n\n    private final Type type;\n    private final String questName;\n    private final Skill skill;\n    private final int have;\n    private final int need;\n\n    private QuestBlocker(Type type, String questName, Skill skill, int have, int need)\n    {\n        this.type \u003d type;\n        this.questName \u003d questName;\n        this.skill \u003d skill;\n        this.have \u003d have;\n        this.need \u003d need;\n    }\n\n    public static QuestBlocker prereqQuest(String questName)\n    {\n        return new QuestBlocker(Type.PREREQUISITE_QUEST, questName, null, 0, 0);\n    }\n\n    public static QuestBlocker skill(Skill skill, int have, int need)\n    {\n        return new QuestBlocker(Type.SKILL_LEVEL, null, skill, have, need);\n    }\n\n    public Type getType()\n    {\n        return type;\n    }\n\n    public String getQuestName()\n    {\n        return questName;\n    }\n\n    public Skill getSkill()\n    {\n        return skill;\n    }\n\n    public int getHave()\n    {\n        return have;\n    }\n\n    public int getNeed()\n    {\n        return need;\n    }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\model\\QuestBlocker.java"},{"fileName":"QuestEntry.java","content":"package com.ironpath.model;\n\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.LinkedHashSet;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\nimport net.runelite.api.Quest;\nimport net.runelite.api.Skill;\n\n/**\n * Data model for a single quest in the route.\n *\n * This plugin intentionally keeps requirements conservative. Fields can be expanded over time.\n */\npublic final class QuestEntry\n{\n    /**\n     * Canonical quest identifier from the RuneLite API.\n     *\n     * This is the source of truth for quest state and is intentionally NOT derived from user-provided strings.\n     * Using {@link Quest} avoids brittle name matching issues (e.g. \"Vampyre\" vs \"Vampire\").\n     */\n    private final Quest quest;\n\n    /**\n     * Fallback display name for any temporary/legacy entries that are not backed by a {@link Quest}.\n     * Prefer {@link #quest} wherever possible.\n     */\n    private final String questName;\n    private final String shortWhy;\n    private final String wikiUrl;\n\n    /** Minimum tracked skill requirements (subset). */\n    private final Map\u003cSkill, Integer\u003e minSkills;\n\n    /** Tracked prerequisite quests by display name (subset). */\n    private final List\u003cString\u003e prereqQuestNames;\n\n    /** Optional XP reward weights (subset). */\n    private final Map\u003cSkill, Integer\u003e xpRewards;\n\n    /** Tags used for scoring and grouping. */\n    private final Set\u003cString\u003e tags;\n\n    public QuestEntry(Quest quest, String shortWhy)\n    {\n        this(quest, shortWhy, null, Map.of(), List.of(), Map.of(), Set.of());\n    }\n\n    public QuestEntry(Quest quest, String shortWhy, String wikiUrl)\n    {\n        this(quest, shortWhy, wikiUrl, Map.of(), List.of(), Map.of(), Set.of());\n    }\n\n    public QuestEntry(Quest quest, String shortWhy, Map\u003cSkill, Integer\u003e minSkills)\n    {\n        this(quest, shortWhy, null, minSkills, List.of(), Map.of(), Set.of());\n    }\n\n    public QuestEntry(\n            Quest quest,\n            String shortWhy,\n            String wikiUrl,\n            Map\u003cSkill, Integer\u003e minSkills,\n            List\u003cString\u003e prereqQuestNames,\n            Map\u003cSkill, Integer\u003e xpRewards,\n            Set\u003cString\u003e tags)\n    {\n        this.quest \u003d quest;\n        this.questName \u003d quest !\u003d null ? quest.getName() : \"\";\n        this.shortWhy \u003d shortWhy;\n        this.wikiUrl \u003d wikiUrl;\n        this.minSkills \u003d minSkills \u003d\u003d null ? Collections.emptyMap() : Collections.unmodifiableMap(minSkills);\n        this.prereqQuestNames \u003d prereqQuestNames \u003d\u003d null ? List.of() : Collections.unmodifiableList(new ArrayList\u003c\u003e(prereqQuestNames));\n        this.xpRewards \u003d xpRewards \u003d\u003d null ? Collections.emptyMap() : Collections.unmodifiableMap(xpRewards);\n        this.tags \u003d tags \u003d\u003d null ? Set.of() : Collections.unmodifiableSet(new LinkedHashSet\u003c\u003e(tags));\n    }\n\n    public QuestEntry(String questName, String shortWhy)\n    {\n        this(null, questName, shortWhy, null, Map.of(), List.of(), Map.of(), Set.of());\n    }\n\n    public QuestEntry(String questName, String shortWhy, Map\u003cSkill, Integer\u003e minSkills)\n    {\n        this(null, questName, shortWhy, null, minSkills, List.of(), Map.of(), Set.of());\n    }\n\n    public QuestEntry(\n            String questName,\n            String shortWhy,\n            Map\u003cSkill, Integer\u003e minSkills,\n            List\u003cString\u003e prereqQuestNames,\n            Map\u003cSkill, Integer\u003e xpRewards,\n            Set\u003cString\u003e tags)\n    {\n        this(null, questName, shortWhy, null, minSkills, prereqQuestNames, xpRewards, tags);\n    }\n\n    private QuestEntry(\n            Quest quest,\n            String questName,\n            String shortWhy,\n            String wikiUrl,\n            Map\u003cSkill, Integer\u003e minSkills,\n            List\u003cString\u003e prereqQuestNames,\n            Map\u003cSkill, Integer\u003e xpRewards,\n            Set\u003cString\u003e tags)\n    {\n        this.quest \u003d quest;\n        this.questName \u003d questName;\n        this.shortWhy \u003d shortWhy;\n        this.wikiUrl \u003d wikiUrl;\n        this.minSkills \u003d minSkills \u003d\u003d null ? Collections.emptyMap() : Collections.unmodifiableMap(minSkills);\n        this.prereqQuestNames \u003d prereqQuestNames \u003d\u003d null ? List.of() : Collections.unmodifiableList(new ArrayList\u003c\u003e(prereqQuestNames));\n        this.xpRewards \u003d xpRewards \u003d\u003d null ? Collections.emptyMap() : Collections.unmodifiableMap(xpRewards);\n        this.tags \u003d tags \u003d\u003d null ? Set.of() : Collections.unmodifiableSet(new LinkedHashSet\u003c\u003e(tags));\n    }\n\n    public Quest getQuest()\n    {\n        return quest;\n    }\n\n    public String getQuestName()\n    {\n        return quest !\u003d null ? quest.getName() : questName;\n    }\n\n    public String getShortWhy()\n    {\n        return shortWhy;\n    }\n\n    public String getWikiUrl()\n    {\n        return wikiUrl;\n    }\n\n    public Map\u003cSkill, Integer\u003e getMinSkills()\n    {\n        return minSkills;\n    }\n\n    public List\u003cString\u003e getPrereqQuestNames()\n    {\n        return prereqQuestNames;\n    }\n\n    public Map\u003cSkill, Integer\u003e getXpRewards()\n    {\n        return xpRewards;\n    }\n\n    public Set\u003cString\u003e getTags()\n    {\n        return tags;\n    }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\model\\QuestEntry.java"},{"fileName":"QuestPlanStep.java","content":"package com.ironpath.model;\n\nimport net.runelite.api.QuestState;\n\n/**\n * A plan step representing a quest to complete.\n */\npublic final class QuestPlanStep implements PlanStep\n{\n    private final QuestEntry entry;\n    private final QuestState state;\n\n    public QuestPlanStep(QuestEntry entry, QuestState state)\n    {\n        this.entry \u003d entry;\n        this.state \u003d state;\n    }\n\n    @Override\n    public PlanStepType getType()\n    {\n        return PlanStepType.QUEST;\n    }\n\n    public QuestEntry getEntry()\n    {\n        return entry;\n    }\n\n    public QuestState getState()\n    {\n        return state;\n    }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\model\\QuestPlanStep.java"},{"fileName":"QuestReadiness.java","content":"package com.ironpath.model;\n\npublic enum QuestReadiness\n{\n    DONE,\n    IN_PROGRESS,\n    READY,\n    BLOCKED\n}\n","filePath":"src\\main\\java\\com\\ironpath\\model\\QuestReadiness.java"},{"fileName":"QuestRow.java","content":"package com.ironpath.model;\n\nimport java.util.Collections;\nimport java.util.List;\nimport net.runelite.api.QuestState;\n\npublic final class QuestRow\n{\n    private final QuestEntry entry;\n    private final QuestState questState;\n    private final QuestReadiness readiness;\n    private final List\u003cQuestBlocker\u003e blockers;\n    private final double score;\n    private final int routeIndex;\n\n    public QuestRow(QuestEntry entry, QuestState questState, QuestReadiness readiness,\n                    List\u003cQuestBlocker\u003e blockers, double score, int routeIndex)\n    {\n        this.entry \u003d entry;\n        this.questState \u003d questState;\n        this.readiness \u003d readiness;\n        this.blockers \u003d blockers \u003d\u003d null ? List.of() : Collections.unmodifiableList(blockers);\n        this.score \u003d score;\n        this.routeIndex \u003d routeIndex;\n    }\n\n    public QuestEntry getEntry() { return entry; }\n    public QuestState getQuestState() { return questState; }\n    public QuestReadiness getReadiness() { return readiness; }\n    public List\u003cQuestBlocker\u003e getBlockers() { return blockers; }\n    public double getScore() { return score; }\n    public int getRouteIndex() { return routeIndex; }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\model\\QuestRow.java"},{"fileName":"QuestStatus.java","content":"package com.ironpath.model;\n\nimport net.runelite.api.Quest;\nimport net.runelite.api.QuestState;\n\npublic final class QuestStatus\n{\n    private final Quest quest;\n    private final QuestState state;\n\n    public QuestStatus(Quest quest, QuestState state)\n    {\n        this.quest \u003d quest;\n        this.state \u003d state;\n    }\n\n    public Quest getQuest()\n    {\n        return quest;\n    }\n\n    public QuestState getState()\n    {\n        return state;\n    }\n\n    public boolean isCompleted()\n    {\n        return state \u003d\u003d QuestState.FINISHED;\n    }\n\n    public boolean isInProgress()\n    {\n        return state \u003d\u003d QuestState.IN_PROGRESS;\n    }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\model\\QuestStatus.java"},{"fileName":"RouteStep.java","content":"package com.ironpath.model;\n\nimport java.util.Collections;\nimport java.util.Map;\nimport java.util.Set;\nimport net.runelite.api.Quest;\nimport net.runelite.api.Skill;\n\n/**\n * A single row in the canonical route spine.\n *\n * This represents the *order* of progression and can include non-quest steps\n * like miniquests, unlock activities, lamps/diary rewards, and explicit training guidance.\n *\n * Runtime planning produces {@link PlanStep} instances from this spine by\n * simulating completion and inserting required gates.\n */\npublic final class RouteStep\n{\n    private final PlanStepType type;\n\n    // QUEST\n    private final Quest quest;\n\n    // TRAIN\n    private final Skill skill;\n    private final Integer toLevel;\n\n    // Generic display\n    private final String displayName;\n    private final String why;\n    private final String wikiUrl;\n\n    // Optional overrides; primarily used for filler tagging for appended quests.\n    private final Set\u003cString\u003e tagsOverride;\n    private final Map\u003cSkill, Integer\u003e minSkillsOverride;\n\n    private RouteStep(Builder b)\n    {\n        this.type \u003d b.type;\n        this.quest \u003d b.quest;\n        this.skill \u003d b.skill;\n        this.toLevel \u003d b.toLevel;\n        this.displayName \u003d b.displayName;\n        this.why \u003d b.why;\n        this.wikiUrl \u003d b.wikiUrl;\n        this.tagsOverride \u003d b.tagsOverride \u003d\u003d null ? Set.of() : Collections.unmodifiableSet(b.tagsOverride);\n        this.minSkillsOverride \u003d b.minSkillsOverride \u003d\u003d null ? Map.of() : Collections.unmodifiableMap(b.minSkillsOverride);\n    }\n\n    public PlanStepType getType()\n    {\n        return type;\n    }\n\n    public Quest getQuest()\n    {\n        return quest;\n    }\n\n    public Skill getSkill()\n    {\n        return skill;\n    }\n\n    public Integer getToLevel()\n    {\n        return toLevel;\n    }\n\n    public String getDisplayName()\n    {\n        return displayName;\n    }\n\n    public String getWhy()\n    {\n        return why;\n    }\n\n    public String getWikiUrl()\n    {\n        return wikiUrl;\n    }\n\n    public Set\u003cString\u003e getTagsOverride()\n    {\n        return tagsOverride;\n    }\n\n    public Map\u003cSkill, Integer\u003e getMinSkillsOverride()\n    {\n        return minSkillsOverride;\n    }\n\n    public static Builder builder(PlanStepType type)\n    {\n        return new Builder(type);\n    }\n\n    public static final class Builder\n    {\n        private final PlanStepType type;\n\n        private Quest quest;\n        private Skill skill;\n        private Integer toLevel;\n        private String displayName;\n        private String why;\n        private String wikiUrl;\n        private Set\u003cString\u003e tagsOverride;\n        private Map\u003cSkill, Integer\u003e minSkillsOverride;\n\n        private Builder(PlanStepType type)\n        {\n            this.type \u003d type;\n        }\n\n        public Builder quest(Quest quest)\n        {\n            this.quest \u003d quest;\n            return this;\n        }\n\n        public Builder skill(Skill skill)\n        {\n            this.skill \u003d skill;\n            return this;\n        }\n\n        public Builder toLevel(Integer toLevel)\n        {\n            this.toLevel \u003d toLevel;\n            return this;\n        }\n\n        public Builder displayName(String displayName)\n        {\n            this.displayName \u003d displayName;\n            return this;\n        }\n\n        public Builder why(String why)\n        {\n            this.why \u003d why;\n            return this;\n        }\n\n        public Builder wikiUrl(String wikiUrl)\n        {\n            this.wikiUrl \u003d wikiUrl;\n            return this;\n        }\n\n        public Builder tagsOverride(Set\u003cString\u003e tagsOverride)\n        {\n            this.tagsOverride \u003d tagsOverride;\n            return this;\n        }\n\n        public Builder minSkillsOverride(Map\u003cSkill, Integer\u003e minSkillsOverride)\n        {\n            this.minSkillsOverride \u003d minSkillsOverride;\n            return this;\n        }\n\n        public RouteStep build()\n        {\n            return new RouteStep(this);\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\model\\RouteStep.java"},{"fileName":"SpineStepView.java","content":"package com.ironpath.model;\n\n/**\n * UI metadata wrapper for a plan step that preserves its absolute position within the wiki route spine.\n * This keeps Option A behavior intact: the planner still follows the spine, we just display context.\n */\npublic final class SpineStepView\n{\n    private final PlanStep step;\n    private final int spineIndex; // 0-based index in wiki_route spine\n    private final int spineTotal;\n\n    public SpineStepView(PlanStep step, int spineIndex, int spineTotal)\n    {\n        this.step \u003d step;\n        this.spineIndex \u003d spineIndex;\n        this.spineTotal \u003d spineTotal;\n    }\n\n    public PlanStep getStep()\n    {\n        return step;\n    }\n\n    public int getSpineIndex()\n    {\n        return spineIndex;\n    }\n\n    public int getSpineTotal()\n    {\n        return spineTotal;\n    }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\model\\SpineStepView.java"},{"fileName":"TrainPlanStep.java","content":"package com.ironpath.model;\n\nimport net.runelite.api.Skill;\n\n/**\n * A plan step representing manual skilling needed to unlock the next quest.\n */\npublic final class TrainPlanStep implements PlanStep\n{\n    private final Skill skill;\n    private final int fromLevel;\n    private final int toLevel;\n    private final String reason;\n\n    public TrainPlanStep(Skill skill, int fromLevel, int toLevel, String reason)\n    {\n        this.skill \u003d skill;\n        this.fromLevel \u003d fromLevel;\n        this.toLevel \u003d toLevel;\n        this.reason \u003d reason;\n    }\n\n    @Override\n    public PlanStepType getType()\n    {\n        return PlanStepType.TRAIN;\n    }\n\n    public Skill getSkill()\n    {\n        return skill;\n    }\n\n    public int getFromLevel()\n    {\n        return fromLevel;\n    }\n\n    public int getToLevel()\n    {\n        return toLevel;\n    }\n\n    public String getReason()\n    {\n        return reason;\n    }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\model\\TrainPlanStep.java"},{"fileName":"ActiveStepOverlay.java","content":"package com.ironpath.overlay;\n\nimport com.ironpath.IronmanPathConfig;\nimport com.ironpath.model.InfoPlanStep;\nimport com.ironpath.model.PlanStep;\nimport com.ironpath.model.SpineStepView;\nimport com.ironpath.model.PlanStepType;\nimport com.ironpath.model.QuestPlanStep;\nimport com.ironpath.model.TrainPlanStep;\nimport com.ironpath.service.ProgressionPlanService;\nimport com.ironpath.service.QuestRouteService;\nimport java.awt.Dimension;\nimport java.awt.Font;\nimport java.awt.FontMetrics;\nimport java.awt.Graphics2D;\nimport java.awt.RenderingHints;\nimport java.awt.image.BufferedImage;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.concurrent.ConcurrentHashMap;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.QuestState;\nimport net.runelite.api.SpriteID;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.game.SpriteManager;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.PanelComponent;\n\nimport java.util.ArrayList;\n\n/**\n * Displays the current active step (first step in the Next N list) in the game view.\n *\n * This intentionally reuses the same PlanStep fields that the sidebar cards render\n * (QuestEntry.shortWhy, TrainPlanStep.reason, InfoPlanStep.detail). No new model accessors.\n */\npublic class ActiveStepOverlay extends OverlayPanel\n{\n    private static final int MAX_WIDTH \u003d 240;\n    private static final int WRAP_CHARS \u003d 44;\n\n    private static final int PAD \u003d 8;\n    private static final int ICON_SIZE \u003d 16;\n    private static final int ICON_GAP \u003d 6;\n    private static final int LINE_GAP \u003d 3;\n\n    // Cache OSRS sprites for overlay rendering to avoid flicker on refresh.\n    private static final Map\u003cInteger, BufferedImage\u003e SPRITE_CACHE \u003d new ConcurrentHashMap\u003c\u003e();\n    private static final Set\u003cInteger\u003e SPRITE_IN_FLIGHT \u003d ConcurrentHashMap.newKeySet();\n\n    private final Client client;\n    private final IronmanPathConfig config;\n    private final QuestRouteService routeService;\n    private final ProgressionPlanService planService;\n\n    private final ClientThread clientThread;\n    private final SpriteManager spriteManager;\n\n    @Inject\n    public ActiveStepOverlay(\n            Client client,\n            IronmanPathConfig config,\n            QuestRouteService routeService,\n            ProgressionPlanService planService,\n            ClientThread clientThread,\n            SpriteManager spriteManager)\n    {\n        this.client \u003d client;\n        this.config \u003d config;\n        this.routeService \u003d routeService;\n        this.planService \u003d planService;\n        this.clientThread \u003d clientThread;\n        this.spriteManager \u003d spriteManager;\n\n        setPosition(OverlayPosition.TOP_RIGHT);\n        setLayer(OverlayLayer.ABOVE_WIDGETS);\n\n        PanelComponent pc \u003d getPanelComponent();\n        pc.setBackgroundColor(ColorScheme.DARKER_GRAY_COLOR);\n        pc.setPreferredSize(new Dimension(MAX_WIDTH, 0));\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics)\n    {\n        if (!config.showActiveStepOverlay())\n        {\n            return null;\n        }\n\n        if (client.getGameState() !\u003d GameState.LOGGED_IN)\n        {\n            return null;\n        }\n\n        final List\u003cSpineStepView\u003e next \u003d planService.buildNextStepViews(routeService.getSpine(), 1);\n        if (next.isEmpty())\n        {\n            return null;\n        }\n\n        final SpineStepView view \u003d next.get(0);\n        final PlanStep step \u003d view.getStep();\n        final PanelComponent pc \u003d getPanelComponent();\n        // We draw a custom overlay that mirrors the quest card layout:\n        // Row 1: [icon] Title\n        // Row 2: \"Step X of Y\" (left) and \"Quest Guide\" (right)\n        // Body: why text wrapped\n        pc.getChildren().clear();\n\n        final int stepNum \u003d view.getSpineIndex() + 1;\n        final int total \u003d view.getSpineTotal();\n\n        String title;\n        String why \u003d null;\n        boolean showQuestIcon \u003d false;\n\n        if (step instanceof QuestPlanStep)\n        {\n            QuestPlanStep q \u003d (QuestPlanStep) step;\n            title \u003d q.getEntry().getQuestName();\n            why \u003d q.getEntry().getShortWhy();\n            showQuestIcon \u003d true;\n        }\n        else if (step instanceof TrainPlanStep)\n        {\n            TrainPlanStep t \u003d (TrainPlanStep) step;\n            title \u003d \"Train \" + t.getSkill().getName() + \" to \" + t.getToLevel();\n            why \u003d t.getReason();\n        }\n        else if (step instanceof InfoPlanStep)\n        {\n            InfoPlanStep s \u003d (InfoPlanStep) step;\n            String label \u003d labelFor(s.getType());\n            String t \u003d s.getTitle() \u003d\u003d null ? \"\" : s.getTitle();\n            title \u003d label.isEmpty() ? t : (label + \": \" + t);\n            why \u003d s.getDetail();\n        }\n        else\n        {\n            title \u003d step.getType().name();\n        }\n\n        // Render\n        graphics.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);\n        graphics.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n\n        final Font base \u003d graphics.getFont();\n        final Font titleFont \u003d base.deriveFont(Font.BOLD, base.getSize2D());\n        final Font bodyFont \u003d base.deriveFont(Font.PLAIN, base.getSize2D());\n\n        final int width \u003d MAX_WIDTH;\n        int x \u003d PAD;\n        int y \u003d PAD;\n\n        // Pre-wrap body\n        final List\u003cString\u003e wrapped \u003d (why \u003d\u003d null || why.isBlank()) ? new ArrayList\u003c\u003e() : wrap(why);\n\n        // Measure\n        graphics.setFont(titleFont);\n        FontMetrics titleFm \u003d graphics.getFontMetrics();\n        int titleLineH \u003d titleFm.getHeight();\n\n        graphics.setFont(bodyFont);\n        FontMetrics bodyFm \u003d graphics.getFontMetrics();\n        int bodyLineH \u003d bodyFm.getHeight();\n\n        int headerH \u003d titleLineH + LINE_GAP + bodyLineH;\n        int bodyH \u003d wrapped.size() * bodyLineH;\n        int height \u003d PAD + headerH + (wrapped.isEmpty() ? 0 : (LINE_GAP + bodyH)) + PAD;\n\n        // Background box (match sidebar card feel)\n        graphics.setColor(ColorScheme.DARKER_GRAY_COLOR);\n        graphics.fillRoundRect(0, 0, width, height, 10, 10);\n\n        // Icon\n        BufferedImage icon \u003d null;\n        if (showQuestIcon)\n        {\n            icon \u003d getOrRequestSprite(SpriteID.QUESTS_PAGE_ICON_BLUE_QUESTS);\n        }\n\n        graphics.setColor(java.awt.Color.WHITE);\n\n        // Row 1: icon + title\n        int titleBaseline \u003d y + titleFm.getAscent();\n        int titleX \u003d x;\n        if (icon !\u003d null)\n        {\n            // Nudge icon up to match the card alignment\n            int iconY \u003d y - 4;\n            graphics.drawImage(icon, x, iconY, ICON_SIZE, ICON_SIZE, null);\n            titleX +\u003d ICON_SIZE + ICON_GAP;\n        }\n\n        graphics.setFont(titleFont);\n        graphics.drawString(title, titleX, titleBaseline);\n\n        // Row 2: Step X of Y (left) and Quest Guide (right)\n        y +\u003d titleLineH + LINE_GAP;\n        graphics.setFont(bodyFont);\n        int row2Baseline \u003d y + bodyFm.getAscent();\n\n        String stepText \u003d \"Step \" + stepNum + \" of \" + total;\n        graphics.drawString(stepText, x, row2Baseline);\n\n        // Mirror the card\u0027s right-side \"Quest Guide\" affordance for quest steps.\n        if (showQuestIcon)\n        {\n            String guide \u003d \"Quest Guide\";\n            int guideW \u003d bodyFm.stringWidth(guide);\n            graphics.drawString(guide, width - PAD - guideW, row2Baseline);\n        }\n\n        // Body why text\n        if (!wrapped.isEmpty())\n        {\n            y +\u003d bodyLineH + LINE_GAP;\n            int lineY \u003d y + bodyFm.getAscent();\n            for (String line : wrapped)\n            {\n                graphics.drawString(line, x, lineY);\n                lineY +\u003d bodyLineH;\n            }\n        }\n\n        return new Dimension(width, height);\n    }\n\n    private static List\u003cString\u003e wrap(String text)\n    {\n        final ArrayList\u003cString\u003e lines \u003d new ArrayList\u003c\u003e();\n        if (text \u003d\u003d null)\n        {\n            return lines;\n        }\n\n        String remaining \u003d text.trim();\n        while (remaining.length() \u003e WRAP_CHARS)\n        {\n            int split \u003d remaining.lastIndexOf(\u0027 \u0027, WRAP_CHARS);\n            if (split \u003c\u003d 0)\n            {\n                split \u003d WRAP_CHARS;\n            }\n\n            lines.add(remaining.substring(0, split).trim());\n            remaining \u003d remaining.substring(split).trim();\n        }\n\n        if (!remaining.isEmpty())\n        {\n            lines.add(remaining);\n        }\n        return lines;\n    }\n\n    private static String labelFor(PlanStepType t)\n    {\n        if (t \u003d\u003d null)\n        {\n            return \"\";\n        }\n\n        switch (t)\n        {\n            case MINIQUEST:\n                return \"Miniquest\";\n            case DIARY:\n                return \"Diary\";\n            case TRAIN:\n                return \"Train\";\n            case NOTE:\n                return \"Note\";\n            case UNLOCK:\n                return \"Unlock\";\n            case LAMP:\n                return \"Lamp\";\n            default:\n                return \"\";\n        }\n    }\n\n    private BufferedImage getOrRequestSprite(int spriteId)\n    {\n        BufferedImage cached \u003d SPRITE_CACHE.get(spriteId);\n        if (cached !\u003d null)\n        {\n            return cached;\n        }\n\n        if (spriteManager \u003d\u003d null)\n        {\n            return null;\n        }\n\n        if (!SPRITE_IN_FLIGHT.add(spriteId))\n        {\n            return null;\n        }\n\n        Runnable request \u003d () -\u003e\n        {\n            BufferedImage img \u003d spriteManager.getSprite(spriteId, 0);\n            if (img !\u003d null)\n            {\n                SPRITE_CACHE.put(spriteId, img);\n                SPRITE_IN_FLIGHT.remove(spriteId);\n                return;\n            }\n\n            spriteManager.getSpriteAsync(spriteId, 0, sprite -\u003e\n            {\n                if (sprite !\u003d null)\n                {\n                    SPRITE_CACHE.put(spriteId, sprite);\n                }\n                SPRITE_IN_FLIGHT.remove(spriteId);\n            });\n        };\n\n        if (clientThread !\u003d null)\n        {\n            clientThread.invokeLater(request);\n        }\n        else\n        {\n            request.run();\n        }\n\n        return null;\n    }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\overlay\\ActiveStepOverlay.java"},{"fileName":"ProgressionPlanService.java","content":"package com.ironpath.service;\n\nimport com.google.inject.Singleton;\nimport com.ironpath.model.InfoPlanStep;\nimport com.ironpath.model.PlanStep;\nimport com.ironpath.model.SpineStepView;\nimport com.ironpath.model.PlanStepType;\nimport com.ironpath.model.QuestEntry;\nimport com.ironpath.model.QuestPlanStep;\nimport com.ironpath.model.RouteStep;\nimport com.ironpath.model.TrainPlanStep;\nimport java.util.ArrayList;\nimport java.util.EnumMap;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Locale;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.api.Quest;\nimport net.runelite.api.QuestState;\nimport net.runelite.api.Skill;\nimport com.ironpath.service.QuestDatabase;\n\n/**\n * Builds an actionable \"next steps\" plan from the canonical route spine.\n *\n * Behavior:\n * - Produces a deterministic list of up to N steps.\n * - Steps are either a quest, an explicit training gate, or a non-quest informational step.\n * - Simulates completion in sequence to produce a coherent list.\n *\n * Simulation details:\n * - Finished quests are detected via {@link QuestStatusService}.\n * - Non-quest steps are not verifiable; the planner assumes completion once shown.\n * - Quest XP rewards (from {@link QuestDatabase}) are applied to simulated levels so that\n *   later requirements can be satisfied by earlier quest rewards.\n */\n@Singleton\npublic class ProgressionPlanService\n{\n    /**\n     * When a user is behind the spine\u0027s expected skill levels, avoid inserting a single massive training wall.\n     * Instead, emit catch-up training in small chunks so the plan stays readable and motivational.\n     */\n    private static final int CATCH_UP_MAX_LEVEL_DELTA_PER_STEP \u003d 5;\n\n    private static final Pattern LAMP_ON_PATTERN \u003d Pattern.compile(\"(?i)\\\\blamp\\\\s+on\\\\s+([a-z ]+)\\\\b\");\n\n    private final Client client;\n    private final QuestStatusService statusService;\n    private final QuestDatabase questDatabase;\n    private final StepCompletionService completionService;\n\n\n    @Inject\n    public ProgressionPlanService(Client client, QuestStatusService statusService, QuestDatabase questDatabase, StepCompletionService completionService)\n    {\n        this.client \u003d client;\n        this.statusService \u003d statusService;\n        this.questDatabase \u003d questDatabase;\n        this.completionService \u003d completionService;\n    }\n\n    \n    public List\u003cPlanStep\u003e buildNextSteps(List\u003cRouteStep\u003e spine, int maxSteps)\n    {\n        List\u003cSpineStepView\u003e views \u003d buildNextStepViews(spine, maxSteps);\n        List\u003cPlanStep\u003e steps \u003d new ArrayList\u003c\u003e(views.size());\n        for (SpineStepView v : views)\n        {\n            steps.add(v.getStep());\n        }\n        return steps;\n    }\n\n    public List\u003cSpineStepView\u003e buildNextStepViews(List\u003cRouteStep\u003e spine, int maxSteps)\n    {\n        final List\u003cSpineStepView\u003e steps \u003d new ArrayList\u003c\u003e();\n        if (spine \u003d\u003d null || spine.isEmpty() || maxSteps \u003c\u003d 0)\n        {\n            return steps;\n        }\n\n        for (int i \u003d 0; i \u003c spine.size() \u0026\u0026 steps.size() \u003c maxSteps; i++)\n        {\n            final RouteStep step \u003d spine.get(i);\n            if (step \u003d\u003d null)\n            {\n                continue;\n            }\n\n            final PlanStepType type \u003d step.getType();\n\n            // QUEST steps: only skip if the journal says finished.\n            if (type \u003d\u003d PlanStepType.QUEST \u0026\u0026 step.getQuest() !\u003d null)\n            {\n                final Quest q \u003d step.getQuest();\n                final QuestState state \u003d statusService.getState(new QuestEntry(q, mergedWhy(step), resolveWikiUrl(step, q.getName())));\n                if (state \u003d\u003d QuestState.FINISHED)\n                {\n                    continue;\n                }\n\n                final QuestEntry qe \u003d new QuestEntry(q, mergedWhy(step), resolveWikiUrl(step, q.getName()));\n                steps.add(new SpineStepView(new QuestPlanStep(qe, state), i, spine.size()));\n                continue;\n            }\n\n            // Non-quest steps: use explicit completion checks where available.\n            if (completionService.isComplete(step))\n            {\n                continue;\n            }\n\n            // TRAIN steps: skip if current level meets the target.\n            if (type \u003d\u003d PlanStepType.TRAIN \u0026\u0026 step.getSkill() !\u003d null)\n            {\n                final Skill skill \u003d step.getSkill();\n                // Use real levels only; temporary boosts should not suppress TRAIN steps.\n                final int have \u003d safeRealLevel(skill);\n                final int target \u003d step.getToLevel();\n                if (have \u003e\u003d target)\n                {\n                    continue;\n                }\n\n                steps.add(new SpineStepView(new TrainPlanStep(skill, have, target, mergedWhy(step)), i, spine.size()));\n                continue;\n            }\n\n            // Generic informational step.\n            final String why \u003d mergedWhy(step);\n            steps.add(new SpineStepView(InfoPlanStep.builder(type)\n                .title(step.getDisplayName())\n                .detail(why)\n                .wikiUrl(step.getWikiUrl())\n                .build(), i, spine.size()));\n\n            // If the step text includes lamp instructions, surface them explicitly.\n            final String lamp \u003d extractLampInstruction(why);\n            if (lamp !\u003d null)\n            {\n                steps.add(new SpineStepView(InfoPlanStep.builder(PlanStepType.LAMP)\n                    .title(\"Use lamp\")\n                    .detail(lamp)\n                    .build(), i, spine.size()));\n            }\n        }\n\n        return steps;\n    }\n\n\n    private static String safeTitle(RouteStep s)\n    {\n        if (s.getDisplayName() !\u003d null \u0026\u0026 !s.getDisplayName().trim().isEmpty())\n        {\n            return s.getDisplayName().trim();\n        }\n        if (s.getType() \u003d\u003d PlanStepType.QUEST \u0026\u0026 s.getQuest() !\u003d null)\n        {\n            return s.getQuest().getName();\n        }\n        if (s.getType() \u003d\u003d PlanStepType.TRAIN \u0026\u0026 s.getSkill() !\u003d null \u0026\u0026 s.getToLevel() !\u003d null)\n        {\n            return \"Train \" + s.getSkill().getName() + \" to \" + s.getToLevel();\n        }\n        return s.getType().name();\n    }\n\n    private int safeRealLevel(Skill skill)\n    {\n        if (skill \u003d\u003d null)\n        {\n            return 1;\n        }\n\n        try\n        {\n            return Math.max(1, client.getRealSkillLevel(skill));\n        }\n        catch (Exception e)\n        {\n            return 1;\n        }\n    }\n\n\n    private RouteStep nextUnfinished(List\u003cRouteStep\u003e spine, int startIdx,\n                                     Set\u003cQuest\u003e simulatedFinished,\n                                     Map\u003cSkill, Integer\u003e simulatedLevels)\n    {\n        for (int i \u003d startIdx; i \u003c spine.size(); i++)\n        {\n            RouteStep s \u003d spine.get(i);\n            if (s \u003d\u003d null)\n            {\n                continue;\n            }\n\n            if (s.getType() \u003d\u003d PlanStepType.QUEST \u0026\u0026 s.getQuest() !\u003d null)\n            {\n                if (!simulatedFinished.contains(s.getQuest()))\n                {\n                    return s;\n                }\n            }\n            else if (s.getType() \u003d\u003d PlanStepType.TRAIN \u0026\u0026 s.getSkill() !\u003d null \u0026\u0026 s.getToLevel() !\u003d null)\n            {\n                int have \u003d simulatedLevels.getOrDefault(s.getSkill(), 1);\n                if (have \u003c s.getToLevel())\n                {\n                    return s;\n                }\n                // else already done\n            }\n            else\n            {\n                // Non-quest steps are not verifiable, but a small subset can be inferred from account state.\n                // If inferred complete, skip it so the quest spine remains clean.\n                if (completionService.isComplete(s))\n                {\n                    continue;\n                }\n\n                // Otherwise treat as unfinished until shown.\n                return s;\n            }\n        }\n        return null;\n    }\n\n    private static int indexOf(List\u003cRouteStep\u003e spine, RouteStep step)\n    {\n        // RouteStep is immutable and small; linear search is OK at plugin scale.\n        for (int i \u003d 0; i \u003c spine.size(); i++)\n        {\n            if (spine.get(i) \u003d\u003d step)\n            {\n                return i;\n            }\n        }\n        return 0;\n    }\n\n    private QuestState stateFor(Quest q, Set\u003cQuest\u003e simulatedFinished)\n    {\n        return simulatedFinished.contains(q) ? QuestState.FINISHED : QuestState.NOT_STARTED;\n    }\n\n    private void applyQuestXp(Quest q, Map\u003cSkill, Integer\u003e simulatedLevels)\n    {\n        Map\u003cSkill, Integer\u003e xp \u003d questDatabase.getXpRewards(q);\n        if (xp \u003d\u003d null || xp.isEmpty())\n        {\n            return;\n        }\n\n        // MVP: approximate XP -\u003e level by assuming reward is enough to reach at least the requirement gate\n        // if the level delta is small. Exact XP tables can be added later.\n        for (Map.Entry\u003cSkill, Integer\u003e en : xp.entrySet())\n        {\n            Skill s \u003d en.getKey();\n            int addXp \u003d en.getValue() \u003d\u003d null ? 0 : en.getValue();\n            if (s \u003d\u003d null || addXp \u003c\u003d 0)\n            {\n                continue;\n            }\n\n            int curLevel \u003d simulatedLevels.getOrDefault(s, 1);\n            int baseXp \u003d com.ironpath.util.XpTable.xpForLevel(curLevel);\n            int bumped \u003d com.ironpath.util.XpTable.levelForXp(baseXp + addXp);\n            if (bumped \u003e curLevel)\n            {\n                simulatedLevels.put(s, bumped);\n            }\n        }\n    }\n\n    private Map\u003cSkill, Integer\u003e mergedMinSkills(RouteStep step)\n    {\n        Map\u003cSkill, Integer\u003e base \u003d questDatabase.getMinSkills(step.getQuest());\n        if (step.getMinSkillsOverride() \u003d\u003d null || step.getMinSkillsOverride().isEmpty())\n        {\n            return base \u003d\u003d null ? Map.of() : base;\n        }\n\n        Map\u003cSkill, Integer\u003e out \u003d new EnumMap\u003c\u003e(Skill.class);\n        if (base !\u003d null)\n        {\n            out.putAll(base);\n        }\n        out.putAll(step.getMinSkillsOverride());\n        return out;\n    }\n\n    private String mergedWhy(RouteStep step)\n    {\n        final Quest q \u003d step \u003d\u003d null ? null : step.getQuest();\n        String base \u003d null;\n\n        if (q !\u003d null)\n        {\n            base \u003d questDatabase.getWhy(q);\n        }\n\n        final String candidate \u003d base !\u003d null ? base : (step \u003d\u003d null ? null : step.getWhy());\n        if (candidate !\u003d null \u0026\u0026 !candidate.trim().isEmpty())\n        {\n            return candidate.trim();\n        }\n\n        if (step \u003d\u003d null || step.getType() \u003d\u003d null)\n        {\n            return null;\n        }\n\n        // Fallback copy when the quest DB does not have an entry yet.\n        switch (step.getType())\n        {\n            case QUEST:\n                return \"Complete this quest in the Optimal Quest Guide order to minimise extra training.\";\n            case MINIQUEST:\n                return \"Complete this quest in the Optimal Quest Guide order to minimise extra training.\";\n            case UNLOCK:\n                return \"Recommended unlock.\";\n            case DIARY:\n                return \"Recommended diary step in the Optimal Quest Order.\";\n            case TRAIN:\n                return \"Recommended training checkpoint in the Optimal Quest Order.\";\n            default:\n                return \"Complete this  in the Optimal Quest Guide order to minimise extra training.\";\n        }\n    }\n\n    private String resolveWikiUrl(RouteStep step, String questName)\n    {\n        String url \u003d step \u003d\u003d null ? null : step.getWikiUrl();\n        if (url !\u003d null \u0026\u0026 !url.trim().isEmpty())\n        {\n            return url.trim();\n        }\n\n        if (questName \u003d\u003d null || questName.trim().isEmpty())\n        {\n            return \"https://oldschool.runescape.wiki/\";\n        }\n\n        // Default to the OSRS Wiki article URL for the quest name.\n        // Replace spaces with underscores and URL-encode reserved characters (apostrophes, etc.).\n        final String slug \u003d questName.trim().replace(\u0027 \u0027, \u0027_\u0027);\n        try\n        {\n            return \"https://oldschool.runescape.wiki/w/\" + java.net.URLEncoder.encode(slug, java.nio.charset.StandardCharsets.UTF_8)\n                    .replace(\"+\", \"%20\");\n        }\n        catch (Exception e)\n        {\n            return \"https://oldschool.runescape.wiki/\";\n        }\n    }\n\n    private static List\u003cTrainPlanStep\u003e missingSkills(RouteStep target, Map\u003cSkill, Integer\u003e req, Map\u003cSkill, Integer\u003e simulatedLevels, int maxDeltaPerStep)\n    {\n        final List\u003cTrainPlanStep\u003e out \u003d new ArrayList\u003c\u003e();\n        if (req \u003d\u003d null || req.isEmpty())\n        {\n            return out;\n        }\n\n        String title \u003d target.getDisplayName();\n        if (title \u003d\u003d null || title.isEmpty())\n        {\n            title \u003d target.getQuest() !\u003d null ? target.getQuest().getName() : \"next quest\";\n        }\n\n        for (Map.Entry\u003cSkill, Integer\u003e en : req.entrySet())\n        {\n            final Skill s \u003d en.getKey();\n            final int need \u003d en.getValue() \u003d\u003d null ? 1 : en.getValue();\n            final int have \u003d simulatedLevels.getOrDefault(s, 1);\n            if (have \u003c need)\n            {\n                final int to \u003d maxDeltaPerStep \u003e 0 ? Math.min(need, have + maxDeltaPerStep) : need;\n                out.add(new TrainPlanStep(s, have, to, \"Required for \" + title + \".\"));\n            }\n        }\n\n        // Stable ordering: biggest deficit first, then skill name.\n        out.sort((a, b) -\u003e\n        {\n            int da \u003d a.getToLevel() - a.getFromLevel();\n            int db \u003d b.getToLevel() - b.getFromLevel();\n            if (da !\u003d db)\n            {\n                return Integer.compare(db, da);\n            }\n            return a.getSkill().name().compareToIgnoreCase(b.getSkill().name());\n        });\n\n        return out;\n    }\n\n\n    private static String extractLampInstruction(String why)\n    {\n        if (why \u003d\u003d null || why.isBlank())\n        {\n            return null;\n        }\n\n        final Matcher m \u003d LAMP_ON_PATTERN.matcher(why);\n        if (!m.find())\n        {\n            return null;\n    }\n\n        return why.substring(m.start()).trim();\n    }\n\n    private boolean shouldSkip(RouteStep step)\n    {\n        if (step \u003d\u003d null || step.getType() \u003d\u003d null)\n        {\n            return true;\n        }\n\n        switch (step.getType())\n        {\n            case QUEST:\n            case MINIQUEST:\n                return step.getQuest() \u003d\u003d null;\n\n            case TRAIN:\n                return step.getSkill() \u003d\u003d null || step.getToLevel() \u003d\u003d null;\n\n            case DIARY:\n            case NOTE:\n                return step.getDisplayName() \u003d\u003d null || step.getDisplayName().trim().isEmpty();\n\n            default:\n                return false;\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\service\\ProgressionPlanService.java"},{"fileName":"QuestDatabase.java","content":"package com.ironpath.service;\n\nimport com.google.gson.Gson;\nimport com.google.gson.reflect.TypeToken;\nimport com.google.inject.Singleton;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.lang.reflect.Type;\nimport java.nio.charset.StandardCharsets;\nimport java.util.Collections;\nimport java.util.EnumMap;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.Map;\nimport java.util.Set;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Quest;\nimport net.runelite.api.Skill;\n\n/**\n * Central, data-driven quest metadata store.\n *\n * The canonical route defines order; this database defines facts:\n * - minimum skill requirements (for readiness gates)\n * - XP rewards (for simulation)\n * - tags (e.g., filler/capstone/unlock)\n * - \"why\" blurbs\n *\n * All data is loaded from resources so it can evolve without code changes.\n */\n@Slf4j\n@Singleton\npublic class QuestDatabase\n{\n    private static final String RESOURCE_PATH \u003d \"/com/ironpath/quest_db.json\";\n\n    private final Gson gson;\n\n    private final Map\u003cQuest, QuestMeta\u003e metaByQuest;\n\n    @Inject\n    public QuestDatabase(final Gson gson)\n    {\n        this.gson \u003d gson;\n        this.metaByQuest \u003d Collections.unmodifiableMap(load());\n    }\n\n    public Map\u003cSkill, Integer\u003e getMinSkills(Quest quest)\n    {\n        QuestMeta m \u003d metaByQuest.get(quest);\n        return m \u003d\u003d null ? Map.of() : m.minSkills;\n    }\n\n    public Map\u003cSkill, Integer\u003e getXpRewards(Quest quest)\n    {\n        QuestMeta m \u003d metaByQuest.get(quest);\n        return m \u003d\u003d null ? Map.of() : m.xpRewards;\n    }\n\n    public Set\u003cString\u003e getTags(Quest quest)\n    {\n        QuestMeta m \u003d metaByQuest.get(quest);\n        return m \u003d\u003d null ? Set.of() : m.tags;\n    }\n\n    public String getWhy(Quest quest)\n    {\n        QuestMeta m \u003d metaByQuest.get(quest);\n        return m \u003d\u003d null ? null : m.why;\n    }\n\n    private Map\u003cQuest, QuestMeta\u003e load()\n    {\n        InputStream in \u003d QuestDatabase.class.getResourceAsStream(RESOURCE_PATH);\n        if (in \u003d\u003d null)\n        {\n            log.warn(\"Quest DB resource not found at {}. Using empty metadata.\", RESOURCE_PATH);\n            return Map.of();\n        }\n\n        try (InputStreamReader r \u003d new InputStreamReader(in, StandardCharsets.UTF_8))\n        {\n            Type t \u003d new TypeToken\u003cMap\u003cString, QuestMetaJson\u003e\u003e() {}.getType();\n            Map\u003cString, QuestMetaJson\u003e raw \u003d gson.fromJson(r, t);\n            if (raw \u003d\u003d null || raw.isEmpty())\n            {\n                return Map.of();\n            }\n\n            Map\u003cQuest, QuestMeta\u003e out \u003d new EnumMap\u003c\u003e(Quest.class);\n            int unresolved \u003d 0;\n\n            for (Map.Entry\u003cString, QuestMetaJson\u003e en : raw.entrySet())\n            {\n                Quest q \u003d resolveQuestEnum(en.getKey());\n                if (q \u003d\u003d null)\n                {\n                    unresolved++;\n                    continue;\n                }\n\n                QuestMetaJson j \u003d en.getValue();\n                QuestMeta meta \u003d new QuestMeta();\n                meta.why \u003d j.why;\n\n                meta.tags \u003d j.tags \u003d\u003d null ? Set.of() : Collections.unmodifiableSet(new HashSet\u003c\u003e(j.tags));\n\n                // minSkills\n                Map\u003cSkill, Integer\u003e req \u003d new EnumMap\u003c\u003e(Skill.class);\n                if (j.minSkills !\u003d null)\n                {\n                    for (Map.Entry\u003cString, Number\u003e rs : j.minSkills.entrySet())\n                    {\n                        Skill s \u003d resolveSkillEnum(rs.getKey());\n                        if (s !\u003d null \u0026\u0026 rs.getValue() !\u003d null)\n                        {\n                            req.put(s, rs.getValue().intValue());\n                        }\n                    }\n                }\n                meta.minSkills \u003d Collections.unmodifiableMap(req);\n\n                // xpRewards\n                Map\u003cSkill, Integer\u003e xp \u003d new EnumMap\u003c\u003e(Skill.class);\n                if (j.xpRewards !\u003d null)\n                {\n                    for (Map.Entry\u003cString, Number\u003e xs : j.xpRewards.entrySet())\n                    {\n                        Skill s \u003d resolveSkillEnum(xs.getKey());\n                        if (s !\u003d null \u0026\u0026 xs.getValue() !\u003d null)\n                        {\n                            xp.put(s, xs.getValue().intValue());\n                        }\n                    }\n                }\n                meta.xpRewards \u003d Collections.unmodifiableMap(xp);\n\n                out.put(q, meta);\n            }\n\n            if (unresolved \u003e 0)\n            {\n                log.warn(\"Quest DB had {} entries that did not map to a RuneLite Quest enum.\", unresolved);\n            }\n\n            return out;\n        }\n        catch (Exception e)\n        {\n            log.warn(\"Failed to load quest metadata; using empty metadata.\", e);\n            return Map.of();\n        }\n    }\n\n    private static Quest resolveQuestEnum(String s)\n    {\n        if (s \u003d\u003d null)\n        {\n            return null;\n        }\n        String key \u003d s.trim();\n        if (key.isEmpty())\n        {\n            return null;\n        }\n\n        try\n        {\n            return Quest.valueOf(key);\n        }\n        catch (IllegalArgumentException ignored)\n        {\n            // Not an enum constant name.\n        }\n\n        // Best-effort: match by Quest.getName()\n        String norm \u003d normalizeName(key);\n        for (Quest q : Quest.values())\n        {\n            if (normalizeName(q.getName()).equals(norm))\n            {\n                return q;\n            }\n        }\n        return null;\n    }\n\n    private static Skill resolveSkillEnum(String s)\n    {\n        if (s \u003d\u003d null)\n        {\n            return null;\n        }\n        String key \u003d s.trim();\n        if (key.isEmpty())\n        {\n            return null;\n        }\n        try\n        {\n            return Skill.valueOf(key);\n        }\n        catch (IllegalArgumentException ignored)\n        {\n            // not enum name\n        }\n\n        // Best-effort common variants.\n        String upper \u003d key.toUpperCase();\n        upper \u003d upper.replace(\u0027 \u0027, \u0027_\u0027).replace(\u0027-\u0027, \u0027_\u0027);\n        try\n        {\n            return Skill.valueOf(upper);\n        }\n        catch (IllegalArgumentException ignored)\n        {\n            return null;\n        }\n    }\n\n    private static String normalizeName(String s)\n    {\n        String lower \u003d s \u003d\u003d null ? \"\" : s.toLowerCase();\n        lower \u003d lower.replaceAll(\"[^a-z0-9]\", \"\");\n        return lower;\n    }\n\n    private static final class QuestMeta\n    {\n        private Map\u003cSkill, Integer\u003e minSkills \u003d Map.of();\n        private Map\u003cSkill, Integer\u003e xpRewards \u003d Map.of();\n        private Set\u003cString\u003e tags \u003d Set.of();\n        private String why;\n    }\n\n    private static final class QuestMetaJson\n    {\n        private Map\u003cString, Number\u003e minSkills;\n        private Map\u003cString, Number\u003e xpRewards;\n        private Set\u003cString\u003e tags;\n        private String why;\n    }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\service\\QuestDatabase.java"},{"fileName":"QuestPlannerService.java","content":"package com.ironpath.service;\n\nimport com.google.inject.Singleton;\nimport com.ironpath.model.PlanSnapshot;\nimport com.ironpath.model.QuestBlocker;\nimport com.ironpath.model.QuestEntry;\nimport com.ironpath.model.QuestReadiness;\nimport com.ironpath.model.QuestRow;\nimport java.util.ArrayList;\nimport java.util.Comparator;\nimport java.util.List;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.api.QuestState;\nimport net.runelite.api.Skill;\n\n@Singleton\npublic class QuestPlannerService\n{\n    private final Client client;\n    private final QuestStatusService statusService;\n\n    @Inject\n    public QuestPlannerService(Client client, QuestStatusService statusService)\n    {\n        this.client \u003d client;\n        this.statusService \u003d statusService;\n    }\n\n    public PlanSnapshot compute(List\u003cQuestEntry\u003e route)\n    {\n        final List\u003cQuestRow\u003e inProgress \u003d new ArrayList\u003c\u003e();\n        final List\u003cQuestRow\u003e ready \u003d new ArrayList\u003c\u003e();\n        final List\u003cQuestRow\u003e blocked \u003d new ArrayList\u003c\u003e();\n        final List\u003cQuestRow\u003e done \u003d new ArrayList\u003c\u003e();\n\n        int completed \u003d 0;\n        int i \u003d 0;\n        for (QuestEntry e : route)\n        {\n            final QuestState qs \u003d statusService.getState(e);\n            if (qs \u003d\u003d QuestState.FINISHED)\n            {\n                completed++;\n            }\n\n            final List\u003cQuestBlocker\u003e blockersForQuest \u003d computeBlockers(e);\n            final QuestReadiness readiness \u003d computeReadiness(qs, blockersForQuest);\n            final double score \u003d score(e, qs, readiness, blockersForQuest, i);\n            final QuestRow row \u003d new QuestRow(e, qs, readiness, blockersForQuest, score, i);\n\n            switch (readiness)\n            {\n                case DONE:\n                    done.add(row);\n                    break;\n                case IN_PROGRESS:\n                    inProgress.add(row);\n                    break;\n                case READY:\n                    ready.add(row);\n                    break;\n                case BLOCKED:\n                default:\n                    blocked.add(row);\n                    break;\n            }\n            i++;\n        }\n\n        // Choose recommended quest: in-progress first, else best scored READY, else best scored BLOCKED.\n        QuestRow recommended \u003d null;\n        if (!inProgress.isEmpty())\n        {\n            recommended \u003d inProgress.stream().max(Comparator.comparingDouble(QuestRow::getScore)).orElse(null);\n        }\n        if (recommended \u003d\u003d null)\n        {\n            recommended \u003d ready.stream().max(Comparator.comparingDouble(QuestRow::getScore)).orElse(null);\n        }\n        if (recommended \u003d\u003d null)\n        {\n            recommended \u003d blocked.stream().max(Comparator.comparingDouble(QuestRow::getScore)).orElse(null);\n        }\n\n        // Sort each bucket for stable UX.\n        final Comparator\u003cQuestRow\u003e byPriority \u003d Comparator\n                .comparingDouble(QuestRow::getScore).reversed()\n                .thenComparingInt(QuestRow::getRouteIndex);\n\n        inProgress.sort(byPriority);\n        ready.sort(byPriority);\n        blocked.sort(byPriority);\n        done.sort(Comparator.comparingInt(QuestRow::getRouteIndex));\n\n        return new PlanSnapshot(completed, route.size(), recommended, inProgress, ready, blocked, done);\n    }\n\n    private List\u003cQuestBlocker\u003e computeBlockers(QuestEntry entry)\n    {\n        final List\u003cQuestBlocker\u003e blockers \u003d new ArrayList\u003c\u003e();\n\n        // Prerequisite quests (tracked subset).\n        for (String prereq : entry.getPrereqQuestNames())\n        {\n            if (prereq \u003d\u003d null || prereq.isBlank())\n            {\n                continue;\n            }\n            final QuestState st \u003d statusService.getStateByName(prereq);\n            if (st !\u003d QuestState.FINISHED)\n            {\n                blockers.add(QuestBlocker.prereqQuest(prereq));\n            }\n        }\n\n        // Skill requirements (tracked subset).\n        for (var req : entry.getMinSkills().entrySet())\n        {\n            final Skill s \u003d req.getKey();\n            final int need \u003d req.getValue() \u003d\u003d null ? 0 : req.getValue();\n            if (need \u003c\u003d 0)\n            {\n                continue;\n            }\n            final int have \u003d client.getRealSkillLevel(s);\n            if (have \u003c need)\n            {\n                blockers.add(QuestBlocker.skill(s, have, need));\n            }\n        }\n\n        return blockers;\n    }\n\n    private static QuestReadiness computeReadiness(QuestState questState, List\u003cQuestBlocker\u003e blockers)\n    {\n        if (questState \u003d\u003d QuestState.FINISHED)\n        {\n            return QuestReadiness.DONE;\n        }\n        if (questState \u003d\u003d QuestState.IN_PROGRESS)\n        {\n            return QuestReadiness.IN_PROGRESS;\n        }\n        if (blockers \u003d\u003d null || blockers.isEmpty())\n        {\n            return QuestReadiness.READY;\n        }\n        return QuestReadiness.BLOCKED;\n    }\n\n    private static double score(QuestEntry e, QuestState qs, QuestReadiness readiness, List\u003cQuestBlocker\u003e blockers, int routeIndex)\n    {\n        // Base bias: earlier in the route is generally better for the MVP.\n        double score \u003d 10000 - routeIndex;\n\n        // State bias.\n        if (qs \u003d\u003d QuestState.IN_PROGRESS)\n        {\n            score +\u003d 1000;\n        }\n\n        // Readiness bias.\n        switch (readiness)\n        {\n            case READY:\n                score +\u003d 500;\n                break;\n            case BLOCKED:\n                score -\u003d 250;\n                break;\n            case DONE:\n                score -\u003d 10_000;\n                break;\n            case IN_PROGRESS:\n                score +\u003d 750;\n                break;\n            default:\n                break;\n        }\n\n        // Penalty for missing levels, scaled by deficit.\n        int deficit \u003d 0;\n        if (blockers !\u003d null)\n        {\n            for (QuestBlocker b : blockers)\n            {\n                if (b.getType() \u003d\u003d QuestBlocker.Type.SKILL_LEVEL)\n                {\n                    deficit +\u003d Math.max(0, b.getNeed() - b.getHave());\n                }\n                else\n                {\n                    deficit +\u003d 3; // rough cost per missing prerequisite\n                }\n            }\n        }\n        score -\u003d deficit * 40;\n\n        // Tags bias.\n        if (e.getTags().contains(\"combatxp\")) score +\u003d 200;\n        if (e.getTags().contains(\"unlock\")) score +\u003d 200;\n        if (e.getTags().contains(\"capstone\")) score -\u003d 150;\n        if (e.getTags().contains(\"grandmaster\")) score -\u003d 100;\n        if (e.getTags().contains(\"early\")) score +\u003d 100;\n\n        return score;\n    }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\service\\QuestPlannerService.java"},{"fileName":"QuestRouteService.java","content":"package com.ironpath.service;\n\nimport com.google.gson.Gson;\nimport com.google.gson.reflect.TypeToken;\nimport com.google.inject.Singleton;\nimport com.ironpath.model.PlanStepType;\nimport com.ironpath.model.RouteStep;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.lang.reflect.Type;\nimport java.nio.charset.StandardCharsets;\nimport java.util.ArrayList;\nimport java.util.Comparator;\nimport java.util.EnumSet;\nimport java.util.LinkedHashSet;\nimport java.util.List;\nimport java.util.Locale;\nimport java.util.Map;\nimport java.util.Set;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Quest;\nimport net.runelite.api.Skill;\n\n/**\n * Provides the canonical progression spine.\n *\n * The spine is loaded from a resource file (wiki_route.json) and then completed by appending\n * any missing RuneLite quests so the plugin always remains quest-cape complete.\n *\n * Important: this service provides *order*. Facts (requirements, XP rewards, tags, why) come\n * from {@link QuestDatabase}.\n */\n@Slf4j\n@Singleton\npublic class QuestRouteService\n{\n    private static final String ROUTE_RESOURCE \u003d \"/com/ironpath/wiki_route.json\";\n    private static final String TAG_FILLER \u003d \"filler\";\n\n    private final Gson gson;\n\n    private final List\u003cRouteStep\u003e spine;\n\n    @Inject\n    public QuestRouteService(final Gson gson)\n    {\n        this.gson \u003d gson;\n        this.spine \u003d buildSpine();\n    }\n\n    public List\u003cRouteStep\u003e getSpine()\n    {\n        return spine;\n    }\n\n    private List\u003cRouteStep\u003e buildSpine()\n    {\n        final List\u003cRouteStep\u003e out \u003d new ArrayList\u003c\u003e();\n        final Set\u003cQuest\u003e addedQuests \u003d new LinkedHashSet\u003c\u003e();\n\n        // 1) Load route steps from JSON.\n        List\u003cRouteStepJson\u003e raw \u003d loadJson();\n        if (raw !\u003d null)\n        {\n            Map\u003cString, Quest\u003e questIndex \u003d indexByNormalizedName();\n\n            for (RouteStepJson r : raw)\n            {\n                if (r \u003d\u003d null || r.type \u003d\u003d null)\n                {\n                    continue;\n                }\n\n                PlanStepType type;\n                try\n                {\n                    type \u003d PlanStepType.valueOf(r.type.trim().toUpperCase(Locale.ROOT));\n                }\n                catch (Exception e)\n                {\n                    continue;\n                }\n\n                RouteStep.Builder b \u003d RouteStep.builder(type);\n\n                if (type \u003d\u003d PlanStepType.QUEST)\n                {\n                    Quest q \u003d null;\n\n                    // Prefer explicit enum name\n                    if (r.quest !\u003d null \u0026\u0026 !r.quest.trim().isEmpty())\n                    {\n                        try\n                        {\n                            q \u003d Quest.valueOf(r.quest.trim());\n                        }\n                        catch (Exception ignored)\n                        {\n                            // fall through\n                        }\n                    }\n\n                    // Fallback: resolve via normalized display name\n                    if (q \u003d\u003d null \u0026\u0026 r.displayName !\u003d null)\n                    {\n                        q \u003d questIndex.get(normalize(r.displayName));\n                    }\n\n                    if (q \u003d\u003d null)\n                    {\n                        // If we cannot resolve to a RuneLite quest, degrade it to NOTE\n                        // so the spine order remains visible and deterministic.\n                        out.add(RouteStep.builder(PlanStepType.NOTE)\n                                .displayName(r.displayName \u003d\u003d null ? \"Unresolved quest\" : r.displayName)\n                                .why(r.why \u003d\u003d null ? \"Unresolved quest row from wiki route.\" : r.why)\n                                .build());\n                        continue;\n                    }\n\n                    if (addedQuests.contains(q))\n                    {\n                        continue;\n                    }\n\n                    b.quest(q)\n                            .displayName(r.displayName !\u003d null ? r.displayName : q.getName())\n                            .why(r.why);\n\n                    if (r.tags !\u003d null \u0026\u0026 !r.tags.isEmpty())\n                    {\n                        b.tagsOverride(Set.copyOf(r.tags));\n                    }\n                    if (r.minSkills !\u003d null \u0026\u0026 !r.minSkills.isEmpty())\n                    {\n                        b.minSkillsOverride(parseSkillMap(r.minSkills));\n                    }\n\n                    out.add(b.build());\n                    addedQuests.add(q);\n                }\n                else if (type \u003d\u003d PlanStepType.TRAIN)\n                {\n                    Skill s \u003d parseSkill(r.skill);\n                    if (s \u003d\u003d null || r.toLevel \u003d\u003d null || r.toLevel \u003c 1)\n                    {\n                        continue;\n                    }\n                    out.add(b.skill(s)\n                            .toLevel(r.toLevel)\n                            .displayName(r.displayName !\u003d null ? r.displayName : (\"Train \" + s.getName()))\n                            .why(r.why)\n                            .wikiUrl(r.wikiUrl)\n                            .build());\n                }\n                else\n                {\n                    out.add(b.displayName(r.displayName).why(r.why).wikiUrl(r.wikiUrl).build());\n                }\n            }\n        }\n\n                // 2) Option A: Do NOT append non-wiki steps or remaining quests here.\n\nreturn out;\n    }\n\n\n    private List\u003cRouteStepJson\u003e loadJson()\n    {\n        try (InputStream in \u003d QuestRouteService.class.getResourceAsStream(ROUTE_RESOURCE))\n        {\n            if (in \u003d\u003d null)\n            {\n                log.warn(\"Route resource not found: {}\", ROUTE_RESOURCE);\n                return null;\n            }\n\n            Type type \u003d new TypeToken\u003cList\u003cRouteStepJson\u003e\u003e() {}.getType();\n            return gson.fromJson(new InputStreamReader(in, StandardCharsets.UTF_8), type);\n        }\n        catch (Exception e)\n        {\n            log.warn(\"Failed to load route JSON: {}\", ROUTE_RESOURCE, e);\n            return null;\n        }\n    }\n\n    private static Map\u003cString, Quest\u003e indexByNormalizedName()\n    {\n        // LinkedHashMap to preserve deterministic iteration if ever needed\n        java.util.LinkedHashMap\u003cString, Quest\u003e map \u003d new java.util.LinkedHashMap\u003c\u003e();\n        for (Quest q : Quest.values())\n        {\n            String name \u003d q.getName();\n            if (name !\u003d null)\n            {\n                map.put(normalize(name), q);\n            }\n\n            // Also index by enum constant formatting as a fallback.\n            map.putIfAbsent(normalize(q.name().replace(\u0027_\u0027, \u0027 \u0027)), q);\n            map.putIfAbsent(normalize(q.name()), q);\n        }\n        return map;\n    }\n\n    private static String normalize(String s)\n    {\n        if (s \u003d\u003d null)\n        {\n            return \"\";\n        }\n\n        String t \u003d s.trim().toLowerCase(Locale.ROOT);\n        // Keep letters/digits only to be resilient to punctuation differences (e.g., apostrophes, dashes).\n        t \u003d t.replaceAll(\"[^a-z0-9]+\", \"\");\n        return t;\n    }\n\n    private static Map\u003cSkill, Integer\u003e parseSkillMap(Map\u003cString, Number\u003e raw)\n    {\n        java.util.EnumMap\u003cSkill, Integer\u003e out \u003d new java.util.EnumMap\u003c\u003e(Skill.class);\n        if (raw \u003d\u003d null)\n        {\n            return out;\n        }\n\n        for (Map.Entry\u003cString, Number\u003e e : raw.entrySet())\n        {\n            Skill s \u003d parseSkill(e.getKey());\n            if (s \u003d\u003d null || e.getValue() \u003d\u003d null)\n            {\n                continue;\n            }\n            out.put(s, e.getValue().intValue());\n        }\n        return out;\n    }\n\n    private static Skill parseSkill(String raw)\n    {\n        if (raw \u003d\u003d null)\n        {\n            return null;\n        }\n\n        String key \u003d raw.trim().toUpperCase(Locale.ROOT).replace(\u0027 \u0027, \u0027_\u0027);\n        // Common aliases found in wiki / JSON exports\n        if (\"HP\".equals(key))\n        {\n            key \u003d \"HITPOINTS\";\n        }\n        if (\"HITPOINT\".equals(key))\n        {\n            key \u003d \"HITPOINTS\";\n        }\n        if (\"RUNECRAFTING\".equals(key))\n        {\n            key \u003d \"RUNECRAFT\";\n        }\n\n        try\n        {\n            return Skill.valueOf(key);\n        }\n        catch (IllegalArgumentException ex)\n        {\n            log.debug(\"Unknown skill in route JSON: {}\", raw);\n            return null;\n        }\n    }\n\n\n    private static final class RouteStepJson\n    {\n        private String type;\n        private String quest;\n        private String displayName;\n        private String why;\n        private String wikiUrl;\n\n        private String skill;\n        private Integer toLevel;\n\n        private java.util.Set\u003cString\u003e tags;\n        private Map\u003cString, Number\u003e minSkills;\n    }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\service\\QuestRouteService.java"},{"fileName":"QuestStatusService.java","content":"package com.ironpath.service;\n\nimport com.google.inject.Singleton;\nimport com.ironpath.model.QuestEntry;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Locale;\nimport java.util.Map;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.api.Quest;\nimport net.runelite.api.QuestState;\n\n@Singleton\npublic class QuestStatusService\n{\n    private final Client client;\n    private final Map\u003cString, Quest\u003e byNormalizedName \u003d new HashMap\u003c\u003e();\n\n    @Inject\n    public QuestStatusService(Client client)\n    {\n        this.client \u003d client;\n\n        for (Quest q : Quest.values())\n        {\n            byNormalizedName.put(normalize(q.getName()), q);\n        }\n    }\n\n    /**\n     * Resolves a quest name (legacy string) to the canonical RuneLite Quest enum.\n     * This exists only as a bridge while prereqs are still stored as strings.\n     */\n    public Quest resolveQuest(String questName)\n    {\n        if (questName \u003d\u003d null)\n        {\n            return null;\n        }\n        return byNormalizedName.get(normalize(questName));\n    }\n\n    public QuestState getState(QuestEntry entry)\n    {\n        if (entry \u003d\u003d null)\n        {\n            return QuestState.NOT_STARTED;\n        }\n\n        final Quest direct \u003d entry.getQuest();\n        if (direct !\u003d null)\n        {\n            return direct.getState(client);\n        }\n\n        // Legacy fallback only. Route entries should be backed by Quest to avoid localization issues.\n        final Quest q \u003d resolveQuest(entry.getQuestName());\n        return q \u003d\u003d null ? QuestState.NOT_STARTED : q.getState(client);\n    }\n\n    public QuestState getStateByName(String questName)\n    {\n        final Quest q \u003d resolveQuest(questName);\n        return q \u003d\u003d null ? QuestState.NOT_STARTED : q.getState(client);\n    }\n\n    public int countCompleted(List\u003cQuestEntry\u003e route)\n    {\n        int done \u003d 0;\n        for (QuestEntry e : route)\n        {\n            if (getState(e) \u003d\u003d QuestState.FINISHED)\n            {\n                done++;\n            }\n        }\n        return done;\n    }\n\n    public QuestEntry findNext(List\u003cQuestEntry\u003e route)\n    {\n        for (QuestEntry e : route)\n        {\n            final QuestState state \u003d getState(e);\n            if (state !\u003d QuestState.FINISHED)\n            {\n                return e;\n            }\n        }\n        return null;\n    }\n\n    private static String normalize(String s)\n    {\n        if (s \u003d\u003d null)\n        {\n            return \"\";\n        }\n\n        final String lower \u003d s.toLowerCase(Locale.ROOT);\n        final StringBuilder sb \u003d new StringBuilder(lower.length());\n\n        for (int i \u003d 0; i \u003c lower.length(); i++)\n        {\n            final char c \u003d lower.charAt(i);\n            if (Character.isLetterOrDigit(c))\n            {\n                sb.append(c);\n            }\n        }\n\n        return sb.toString();\n    }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\service\\QuestStatusService.java"},{"fileName":"StepCompletionService.java","content":"package com.ironpath.service;\n\nimport com.google.inject.Singleton;\nimport com.ironpath.model.PlanStepType;\nimport com.ironpath.model.RouteStep;\nimport java.util.Locale;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.api.Varbits;\n\n/**\n * Centralized completion checks for non-quest progression steps.\n *\n * Plugin Hub compliance: uses only in-client varps/varbits (no networking, no disk).\n */\n@Singleton\npublic class StepCompletionService\n{\n    private final Client client;\n\n    @Inject\n    public StepCompletionService(Client client)\n    {\n        this.client \u003d client;\n    }\n\n    public boolean isComplete(RouteStep step)\n    {\n        if (step \u003d\u003d null)\n        {\n            return false;\n        }\n\n        final PlanStepType type \u003d step.getType();\n        final String name \u003d step.getDisplayName();\n        final String normalized \u003d name \u003d\u003d null ? \"\" : name.trim().toLowerCase(Locale.ROOT);\n\n        // Tutorial Island is represented as a NOTE/UNLOCK in some spines.\n        if (normalized.contains(\"tutorial island\"))\n        {\n            return isTutorialIslandComplete();\n        }\n\n        if (type \u003d\u003d PlanStepType.DIARY)\n        {\n            return isAchievementDiaryTierComplete(normalized);\n        }\n\n        // Optional: combat achievements tier completion (if you add steps for it).\n        if (normalized.contains(\"combat achievements\") || normalized.contains(\"combat achievement\"))\n        {\n            return isCombatAchievementTierComplete(normalized);\n        }\n\n        return false;\n    }\n\n    private boolean isTutorialIslandComplete()\n    {\n        // Tutorial progress varp is 281 and completion is 1000.\n        final int tutorialProgress \u003d client.getVarpValue(281);\n        return tutorialProgress \u003e\u003d 1000;\n    }\n\n    private boolean isAchievementDiaryTierComplete(String normalizedDisplayName)\n    {\n        final Tier tier \u003d Tier.parse(normalizedDisplayName);\n        final Region region \u003d Region.parse(normalizedDisplayName);\n        if (tier \u003d\u003d null || region \u003d\u003d null)\n        {\n            return false;\n        }\n\n        final int varbitId \u003d diaryVarbitId(region, tier);\n        if (varbitId \u003c\u003d 0)\n        {\n            return false;\n        }\n\n        // Diary tier completion varbits are typically 1 when rewards are claimed.\n        return client.getVarbitValue(varbitId) \u003e\u003d 1;\n    }\n\n    private static int diaryVarbitId(Region region, Tier tier)\n    {\n        switch (region)\n        {\n            case ARDOUGNE:\n                return tier.pick(Varbits.DIARY_ARDOUGNE_EASY, Varbits.DIARY_ARDOUGNE_MEDIUM, Varbits.DIARY_ARDOUGNE_HARD, Varbits.DIARY_ARDOUGNE_ELITE);\n            case DESERT:\n                return tier.pick(Varbits.DIARY_DESERT_EASY, Varbits.DIARY_DESERT_MEDIUM, Varbits.DIARY_DESERT_HARD, Varbits.DIARY_DESERT_ELITE);\n            case FALADOR:\n                return tier.pick(Varbits.DIARY_FALADOR_EASY, Varbits.DIARY_FALADOR_MEDIUM, Varbits.DIARY_FALADOR_HARD, Varbits.DIARY_FALADOR_ELITE);\n            case FREMENNIK:\n                return tier.pick(Varbits.DIARY_FREMENNIK_EASY, Varbits.DIARY_FREMENNIK_MEDIUM, Varbits.DIARY_FREMENNIK_HARD, Varbits.DIARY_FREMENNIK_ELITE);\n            case KANDARIN:\n                return tier.pick(Varbits.DIARY_KANDARIN_EASY, Varbits.DIARY_KANDARIN_MEDIUM, Varbits.DIARY_KANDARIN_HARD, Varbits.DIARY_KANDARIN_ELITE);\n            case KARAMJA:\n                return tier.pick(Varbits.DIARY_KARAMJA_EASY, Varbits.DIARY_KARAMJA_MEDIUM, Varbits.DIARY_KARAMJA_HARD, Varbits.DIARY_KARAMJA_ELITE);\n            case KOUREND_KEBOS:\n                return tier.pick(Varbits.DIARY_KOUREND_EASY, Varbits.DIARY_KOUREND_MEDIUM, Varbits.DIARY_KOUREND_HARD, Varbits.DIARY_KOUREND_ELITE);\n            case LUMBRIDGE_DRAYNOR:\n                return tier.pick(Varbits.DIARY_LUMBRIDGE_EASY, Varbits.DIARY_LUMBRIDGE_MEDIUM, Varbits.DIARY_LUMBRIDGE_HARD, Varbits.DIARY_LUMBRIDGE_ELITE);\n            case MORYTANIA:\n                return tier.pick(Varbits.DIARY_MORYTANIA_EASY, Varbits.DIARY_MORYTANIA_MEDIUM, Varbits.DIARY_MORYTANIA_HARD, Varbits.DIARY_MORYTANIA_ELITE);\n            case VARROCK:\n                return tier.pick(Varbits.DIARY_VARROCK_EASY, Varbits.DIARY_VARROCK_MEDIUM, Varbits.DIARY_VARROCK_HARD, Varbits.DIARY_VARROCK_ELITE);\n            case WESTERN:\n                return tier.pick(Varbits.DIARY_WESTERN_EASY, Varbits.DIARY_WESTERN_MEDIUM, Varbits.DIARY_WESTERN_HARD, Varbits.DIARY_WESTERN_ELITE);\n            case WILDERNESS:\n                return tier.pick(Varbits.DIARY_WILDERNESS_EASY, Varbits.DIARY_WILDERNESS_MEDIUM, Varbits.DIARY_WILDERNESS_HARD, Varbits.DIARY_WILDERNESS_ELITE);\n            default:\n                return -1;\n        }\n    }\n\n    private boolean isCombatAchievementTierComplete(String normalizedDisplayName)\n    {\n        final Tier tier \u003d Tier.parse(normalizedDisplayName);\n        if (tier \u003d\u003d null)\n        {\n            return false;\n        }\n\n        final int varbitId;\n        switch (tier)\n        {\n            case EASY:\n                varbitId \u003d Varbits.COMBAT_ACHIEVEMENT_TIER_EASY;\n                break;\n            case MEDIUM:\n                varbitId \u003d Varbits.COMBAT_ACHIEVEMENT_TIER_MEDIUM;\n                break;\n            case HARD:\n                varbitId \u003d Varbits.COMBAT_ACHIEVEMENT_TIER_HARD;\n                break;\n            case ELITE:\n                varbitId \u003d Varbits.COMBAT_ACHIEVEMENT_TIER_ELITE;\n                break;\n            case MASTER:\n                varbitId \u003d Varbits.COMBAT_ACHIEVEMENT_TIER_MASTER;\n                break;\n            case GRANDMASTER:\n                varbitId \u003d Varbits.COMBAT_ACHIEVEMENT_TIER_GRANDMASTER;\n                break;\n            default:\n                return false;\n        }\n\n        return client.getVarbitValue(varbitId) \u003e\u003d 1;\n    }\n\n    private enum Tier\n    {\n        EASY, MEDIUM, HARD, ELITE, MASTER, GRANDMASTER;\n\n        static Tier parse(String normalized)\n        {\n            if (normalized \u003d\u003d null)\n            {\n                return null;\n            }\n            if (normalized.contains(\"grandmaster\"))\n            {\n                return GRANDMASTER;\n            }\n            if (normalized.contains(\"master\"))\n            {\n                return MASTER;\n            }\n            if (normalized.contains(\"elite\"))\n            {\n                return ELITE;\n            }\n            if (normalized.contains(\"hard\"))\n            {\n                return HARD;\n            }\n            if (normalized.contains(\"medium\"))\n            {\n                return MEDIUM;\n            }\n            if (normalized.contains(\"easy\"))\n            {\n                return EASY;\n            }\n            return null;\n        }\n\n        int pick(int easy, int medium, int hard, int elite)\n        {\n            switch (this)\n            {\n                case EASY:\n                    return easy;\n                case MEDIUM:\n                    return medium;\n                case HARD:\n                    return hard;\n                case ELITE:\n                    return elite;\n                default:\n                    return -1;\n            }\n        }\n    }\n\n    private enum Region\n    {\n        ARDOUGNE,\n        DESERT,\n        FALADOR,\n        FREMENNIK,\n        KANDARIN,\n        KARAMJA,\n        KOUREND_KEBOS,\n        LUMBRIDGE_DRAYNOR,\n        MORYTANIA,\n        VARROCK,\n        WESTERN,\n        WILDERNESS;\n\n        static Region parse(String normalized)\n        {\n            if (normalized \u003d\u003d null)\n            {\n                return null;\n            }\n\n            if (normalized.contains(\"ardougne\"))\n            {\n                return ARDOUGNE;\n            }\n            if (normalized.contains(\"desert\"))\n            {\n                return DESERT;\n            }\n            if (normalized.contains(\"falador\"))\n            {\n                return FALADOR;\n            }\n            if (normalized.contains(\"fremennik\"))\n            {\n                return FREMENNIK;\n            }\n            if (normalized.contains(\"kandarin\"))\n            {\n                return KANDARIN;\n            }\n            if (normalized.contains(\"karamja\"))\n            {\n                return KARAMJA;\n            }\n            if (normalized.contains(\"kourend\") || normalized.contains(\"kebos\"))\n            {\n                return KOUREND_KEBOS;\n            }\n            if (normalized.contains(\"lumbridge\") || normalized.contains(\"draynor\"))\n            {\n                return LUMBRIDGE_DRAYNOR;\n            }\n            if (normalized.contains(\"morytania\"))\n            {\n                return MORYTANIA;\n            }\n            if (normalized.contains(\"varrock\"))\n            {\n                return VARROCK;\n            }\n            if (normalized.contains(\"western\"))\n            {\n                return WESTERN;\n            }\n            if (normalized.contains(\"wilderness\"))\n            {\n                return WILDERNESS;\n            }\n\n            return null;\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\service\\StepCompletionService.java"},{"fileName":"ChipButton.java","content":"package com.ironpath.ui;\n\nimport java.awt.Color;\nimport java.awt.Font;\nimport javax.swing.BorderFactory;\nimport javax.swing.JButton;\nimport net.runelite.client.ui.ColorScheme;\n\nfinal class ChipButton extends JButton\n{\n    ChipButton(String text)\n    {\n        super(text);\n        setFocusable(false);\n        setFont(getFont().deriveFont(Font.PLAIN, 11f));\n        setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n        setBorder(BorderFactory.createCompoundBorder(\n                BorderFactory.createLineBorder(ColorScheme.DARK_GRAY_COLOR),\n                BorderFactory.createEmptyBorder(4, 10, 4, 10)\n        ));\n        setOpaque(true);\n        super.setSelected(false);\n        updateBackground();\n\n        addActionListener(e -\u003e\n        {\n            setSelected(!isSelected());\n        });\n    }\n\n    @Override\n    public boolean isSelected()\n    {\n        return super.isSelected();\n    }\n\n    @Override\n    public void setSelected(boolean selected)\n    {\n        super.setSelected(selected);\n        updateBackground();\n    }\n\n    private void updateBackground()\n    {\n        final Color bg \u003d isSelected() ? ColorScheme.DARKER_GRAY_COLOR : new Color(54, 54, 54);\n        setBackground(bg);\n        repaint();\n    }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\ui\\ChipButton.java"},{"fileName":"CollapsibleSection.java","content":"package com.ironpath.ui;\n\nimport java.awt.BorderLayout;\nimport java.awt.Component;\nimport java.awt.Dimension;\nimport java.awt.FlowLayout;\nimport javax.swing.BorderFactory;\nimport javax.swing.JButton;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\n\npublic class CollapsibleSection\u003cT\u003e extends JPanel\n{\n    private final JPanel bodyWrap \u003d new JPanel(new BorderLayout());\n    private boolean expanded \u003d true;\n\n    public CollapsibleSection(String title, int count, JPanel body)\n    {\n        setLayout(new BorderLayout());\n        setOpaque(false);\n\n        JPanel header \u003d new JPanel(new BorderLayout());\n        header.setOpaque(false);\n        header.setBorder(BorderFactory.createEmptyBorder(6, 0, 6, 0));\n\n        JLabel label \u003d new JLabel(title + \" (\" + count + \")\");\n        label.setAlignmentX(Component.LEFT_ALIGNMENT);\n        header.add(label, BorderLayout.WEST);\n\n        JButton toggle \u003d new JButton(\"Hide\");\n        toggle.addActionListener(e -\u003e\n        {\n            expanded \u003d !expanded;\n            bodyWrap.setVisible(expanded);\n            toggle.setText(expanded ? \"Hide\" : \"Show\");\n            revalidate();\n            repaint();\n        });\n        header.add(toggle, BorderLayout.EAST);\n\n        add(header, BorderLayout.NORTH);\n\n        bodyWrap.setOpaque(false);\n        bodyWrap.add(body, BorderLayout.CENTER);\n        add(bodyWrap, BorderLayout.CENTER);\n\n        forceFillWidth(this);\n    }\n\n    private static void forceFillWidth(JPanel panel)\n    {\n        panel.setAlignmentX(Component.LEFT_ALIGNMENT);\n        Dimension pref \u003d panel.getPreferredSize();\n        panel.setMaximumSize(new Dimension(Integer.MAX_VALUE, pref.height));\n    }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\ui\\CollapsibleSection.java"},{"fileName":"IronmanPathPanel.java","content":"package com.ironpath.ui;\n\nimport com.ironpath.model.PlanStep;\nimport com.ironpath.model.SpineStepView;\nimport com.ironpath.model.RouteStep;\nimport com.ironpath.service.ProgressionPlanService;\nimport com.ironpath.service.QuestRouteService;\nimport java.awt.BorderLayout;\nimport java.awt.Component;\nimport java.awt.Dimension;\nimport java.util.List;\nimport javax.swing.BorderFactory;\nimport javax.swing.Box;\nimport javax.swing.BoxLayout;\nimport javax.swing.JButton;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\nimport javax.swing.SwingUtilities;\nimport javax.swing.Timer;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.game.SpriteManager;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.PluginPanel;\n\npublic class IronmanPathPanel extends PluginPanel\n{\n    private static final int NEXT_STEPS \u003d 10;\n    private static final int REFRESH_DEBOUNCE_MS \u003d 150;\n\n    private final QuestRouteService routeService;\n    private final ProgressionPlanService planService;\n    private final ClientThread clientThread;\n    private final SpriteManager spriteManager;\n\n    private final JButton refreshButton \u003d new JButton(\"Refresh\");\n\n    private final JPanel content \u003d new ScrollablePanel();\n\n    // Coalesce refresh requests to avoid layout thrash on login and varbit bursts.\n    private final Timer refreshTimer;\n\n    public IronmanPathPanel(QuestRouteService routeService,\n                            ProgressionPlanService planService,\n                            ClientThread clientThread,\n                            SpriteManager spriteManager)\n    {\n        super();\n        setLayout(new BorderLayout());\n        this.routeService \u003d routeService;\n        this.planService \u003d planService;\n        this.clientThread \u003d clientThread;\n        this.spriteManager \u003d spriteManager;\n\n        setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n        add(buildHeader(), BorderLayout.NORTH);\n        add(buildBody(), BorderLayout.CENTER);\n\n        refreshTimer \u003d new Timer(REFRESH_DEBOUNCE_MS, e -\u003e refreshNow());\n        refreshTimer.setRepeats(false);\n\n        refreshButton.addActionListener(e -\u003e requestRefresh());\n\n        requestRefresh();\n    }\n\n    /**\n     * Request a UI refresh. Multiple calls within a short window are coalesced into a single rebuild.\n     */\n    public void requestRefresh()\n    {\n        if (!SwingUtilities.isEventDispatchThread())\n        {\n            SwingUtilities.invokeLater(this::requestRefresh);\n            return;\n        }\n\n        refreshTimer.restart();\n    }\n\n    /**\n     * Show a stable placeholder while the client state settles (login bursts).\n     */\n    public void showLoading()\n    {\n        SwingUtilities.invokeLater(() -\u003e\n        {\n            content.setVisible(false);\n            content.removeAll();\n\n            JPanel body \u003d new JPanel();\n            body.setOpaque(false);\n            body.setLayout(new BoxLayout(body, BoxLayout.Y_AXIS));\n\n            JLabel label \u003d new JLabel(\"Loading player state...\");\n            label.setAlignmentX(Component.LEFT_ALIGNMENT);\n            body.add(label);\n\n            content.add(buildSection(\"Next 10 steps\", body));\n            content.setVisible(true);\n            content.revalidate();\n            content.repaint();\n        });\n    }\n\n    private void refreshNow()\n    {\n        clientThread.invokeLater(() -\u003e\n        {\n            List\u003cRouteStep\u003e spine \u003d routeService.getSpine();\n            List\u003cSpineStepView\u003e next \u003d planService.buildNextStepViews(spine, NEXT_STEPS);\n\n            SwingUtilities.invokeLater(() -\u003e\n            {\n                content.setVisible(false);\n                content.removeAll();\n                content.add(buildSection(\"Next 10 steps\", renderNext(next)));\n                content.setVisible(true);\n                content.revalidate();\n                content.repaint();\n            });\n        });\n    }\n\n    private JPanel buildHeader()\n    {\n        JPanel header \u003d new JPanel(new BorderLayout());\n        header.setBackground(ColorScheme.DARK_GRAY_COLOR);\n        header.setBorder(BorderFactory.createEmptyBorder(8, 8, 8, 8));\n\n        JPanel left \u003d new JPanel();\n        left.setOpaque(false);\n        left.setLayout(new BoxLayout(left, BoxLayout.Y_AXIS));\n\n        JLabel title \u003d new JLabel(\"Optimal Quest Order\");\n        title.setForeground(ColorScheme.BRAND_ORANGE);\n\n        JLabel subtitle \u003d new JLabel(\"Order is optimized following OSRS Wiki.\");\n        subtitle.setForeground(ColorScheme.MEDIUM_GRAY_COLOR);\n        subtitle.setFont(FontManager.getRunescapeSmallFont());\n\n        title.setAlignmentX(Component.LEFT_ALIGNMENT);\n        subtitle.setAlignmentX(Component.LEFT_ALIGNMENT);\n        refreshButton.setAlignmentX(Component.LEFT_ALIGNMENT);\n\n        left.add(title);\n        left.add(Box.createVerticalStrut(2));\n        left.add(subtitle);\n        left.add(Box.createVerticalStrut(6));\n        left.add(refreshButton);\n\n        header.add(left, BorderLayout.WEST);\n        return header;\n    }\n\n    private JScrollPane buildBody()\n    {\n        content.setLayout(new BoxLayout(content, BoxLayout.Y_AXIS));\n        content.setOpaque(false);\n        content.setBorder(BorderFactory.createEmptyBorder(8, 8, 8, 8));\n\n        JScrollPane scroll \u003d new JScrollPane(content);\n        scroll.setBorder(null);\n        scroll.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);\n        scroll.getVerticalScrollBar().setUnitIncrement(16);\n        return scroll;\n    }\n\n    private JPanel buildSection(String title, JPanel body)\n    {\n        JPanel section \u003d new JPanel();\n        section.setOpaque(false);\n        section.setLayout(new BoxLayout(section, BoxLayout.Y_AXIS));\n\n        JLabel label \u003d new JLabel(title);\n        label.setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n        label.setAlignmentX(Component.LEFT_ALIGNMENT);\n\n        section.add(label);\n        section.add(Box.createVerticalStrut(6));\n        section.add(body);\n\n        return section;\n    }\n\n    private JPanel renderNext(List\u003cSpineStepView\u003e steps)\n    {\n        JPanel body \u003d new JPanel();\n        body.setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 0));\n        body.setOpaque(false);\n        body.setLayout(new BoxLayout(body, BoxLayout.Y_AXIS));\n\n        for (SpineStepView v : steps)\n        {\n            PlanStep s \u003d v.getStep();\n            if (s \u003d\u003d null)\n            {\n                continue;\n            }\n\n            JPanel card \u003d PlanStepCard.compact(spriteManager, clientThread, v);\n            forceFillWidth(card);\n            body.add(card);\n            body.add(Box.createVerticalStrut(6));\n        }\n\n        if (steps.isEmpty())\n        {\n            JLabel none \u003d new JLabel(\"No remaining steps.\");\n            none.setAlignmentX(Component.LEFT_ALIGNMENT);\n            body.add(none);\n        }\n\n        return body;\n    }\n\n    private static void forceFillWidth(JPanel panel)\n    {\n        panel.setAlignmentX(Component.LEFT_ALIGNMENT);\n        // Allow BoxLayout to compute height naturally (wrapped text needs a real width before preferred height is correct).\n        panel.setMaximumSize(new Dimension(Integer.MAX_VALUE, Integer.MAX_VALUE));\n    }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\ui\\IronmanPathPanel.java"},{"fileName":"MiniquestCard.java","content":"package com.ironpath.ui;\n\nimport java.awt.Dimension;\nimport java.awt.Font;\nimport java.awt.FlowLayout;\nimport java.awt.GridBagConstraints;\nimport java.awt.GridBagLayout;\nimport java.awt.Insets;\nimport java.awt.Image;\nimport javax.swing.BorderFactory;\nimport javax.swing.ImageIcon;\nimport javax.swing.JButton;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.JTextArea;\nimport javax.swing.SwingUtilities;\nimport java.awt.image.BufferedImage;\nimport net.runelite.api.SpriteID;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.game.SpriteManager;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.util.LinkBrowser;\n\n/**\n * Quest-like card styling for MINIQUEST steps.\n * Pure UI component: does not change planner behavior.\n */\npublic final class MiniquestCard\n{\n    private static final int ICON_SIZE \u003d 16;\n\n    // Fallback icon only. Real icons are pulled from the OSRS cache via SpriteManager.\n    // If the resource is missing, the layout still reserves space and stays stable.\n    private static final ImageIcon FALLBACK_MINIQUEST_ICON \u003d loadIcon(\"icons/miniquest.png\");\n\n    private MiniquestCard() {}\n\n    public static JPanel compact(String titleText, String detail, int spineIndex, int spineTotal)\n    {\n        return compact(null, titleText, detail, null, spineIndex, spineTotal);\n    }\n\n    public static JPanel compact(SpriteManager spriteManager, String titleText, String detail, String wikiUrl, int spineIndex, int spineTotal)\n    {\n        return compact(spriteManager, null, titleText, detail, wikiUrl, spineIndex, spineTotal);\n    }\n\n    public static JPanel compact(SpriteManager spriteManager, ClientThread clientThread, String titleText, String detail, String wikiUrl, int spineIndex, int spineTotal)\n    {\n        // Use the quests page icon sprite from the OSRS cache.\n        return compact(spriteManager, clientThread, titleText, detail, wikiUrl, spineIndex, spineTotal, SpriteID.QUESTS_PAGE_ICON_BLUE_QUESTS);\n    }\n\n    public static JPanel compact(String titleText, String detail, String wikiUrl, int spineIndex, int spineTotal)\n    {\n        return compact(null, titleText, detail, wikiUrl, spineIndex, spineTotal);\n    }\n\n    private static JPanel compact(SpriteManager spriteManager, ClientThread clientThread, String titleText, String detail, String wikiUrl, int spineIndex, int spineTotal, int spriteId)\n    {\n        JPanel card \u003d baseCard();\n        card.setLayout(new GridBagLayout());\n\n        GridBagConstraints c \u003d new GridBagConstraints();\n\n        // Row 1: icon + title (tight)\n        c.gridx \u003d 0;\n        c.gridy \u003d 0;\n        c.gridwidth \u003d 2;\n        c.weightx \u003d 1;\n        c.fill \u003d GridBagConstraints.HORIZONTAL;\n        c.anchor \u003d GridBagConstraints.NORTHWEST;\n        c.insets \u003d new Insets(0, 0, 0, 0);\n        card.add(iconTitleRow(spriteManager, clientThread, spriteId, FALLBACK_MINIQUEST_ICON, titleText \u003d\u003d null ? \"\" : titleText), c);\n\n        // Row 2: \"Step X of Y\" (left) + Quest Guide (right, if present)\n        String stepLine \u003d formatProgressLong(spineIndex, spineTotal);\n\n        c.gridwidth \u003d 1;\n        c.gridy \u003d 1;\n        c.insets \u003d new Insets(2, 0, 0, 0);\n\n        c.gridx \u003d 0;\n        c.weightx \u003d 1;\n        c.fill \u003d GridBagConstraints.HORIZONTAL;\n        JLabel step \u003d new JLabel(stepLine);\n        step.setFont(step.getFont().deriveFont(Font.PLAIN, 10.5f));\n        step.setForeground(ColorScheme.MEDIUM_GRAY_COLOR);\n        card.add(step, c);\n\n        if (wikiUrl !\u003d null \u0026\u0026 !wikiUrl.trim().isEmpty())\n        {\n            c.gridx \u003d 1;\n            c.weightx \u003d 0;\n            c.fill \u003d GridBagConstraints.NONE;\n            c.anchor \u003d GridBagConstraints.NORTHEAST;\n            card.add(wikiPill(wikiUrl), c);\n        }\n\n        // Detail text (full width)\n        if (detail !\u003d null \u0026\u0026 !detail.isBlank())\n        {\n            c.gridx \u003d 0;\n            c.gridy \u003d 2;\n            c.gridwidth \u003d 2;\n            c.weightx \u003d 1;\n            c.fill \u003d GridBagConstraints.HORIZONTAL;\n            c.anchor \u003d GridBagConstraints.NORTHWEST;\n            c.insets \u003d new Insets(6, 0, 0, 0);\n\n            card.add(wrapTextFlush(detail, 11f, false), c);\n        }\n\n        return card;\n    }\n\n    private static String formatProgressCompact(int spineIndex, int spineTotal)\n    {\n        if (spineIndex \u003c 0 || spineTotal \u003c\u003d 0)\n        {\n            return \"\";\n        }\n        return (spineIndex + 1) + \" / \" + spineTotal;\n    }\n\n    private static String formatProgressLong(int spineIndex, int spineTotal)\n    {\n        if (spineIndex \u003c 0 || spineTotal \u003c\u003d 0)\n        {\n            return \"\";\n        }\n        return \"Step \" + (spineIndex + 1) + \" of \" + spineTotal;\n    }\n\n    private static JPanel baseCard()\n    {\n        JPanel p \u003d new JPanel();\n        p.setOpaque(true);\n        p.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        p.setBorder(BorderFactory.createCompoundBorder(\n            BorderFactory.createLineBorder(ColorScheme.DARK_GRAY_COLOR),\n            BorderFactory.createEmptyBorder(10, 10, 10, 10)\n        ));\n        p.setMaximumSize(new Dimension(Integer.MAX_VALUE, Integer.MAX_VALUE));\n        return p;\n    }\n\n    private static JTextArea wrapTextFlush(String text, float fontSize, boolean bold)\n    {\n        JTextArea area \u003d new JTextArea(text);\n        area.setRows(1);\n        area.setOpaque(false);\n        area.setEditable(false);\n        area.setFocusable(false);\n\n        area.setLineWrap(true);\n        area.setWrapStyleWord(true);\n\n        Font f \u003d new JLabel().getFont().deriveFont(bold ? Font.BOLD : Font.PLAIN, fontSize);\n        area.setFont(f);\n        area.setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n\n        area.setMargin(new Insets(0, 0, 0, 0));\n        area.setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 8));\n        // Keep preferred width small so the card never exceeds the sidebar.\n        area.setColumns(1);\n\n        return area;\n    }\n\n    private static JPanel iconTitleRow(SpriteManager spriteManager, ClientThread clientThread, int spriteId, ImageIcon fallbackIcon, String titleText)\n    {\n        JPanel row \u003d new JPanel(new GridBagLayout());\n        row.setOpaque(false);\n\n        GridBagConstraints r \u003d new GridBagConstraints();\n        r.gridy \u003d 0;\n        r.anchor \u003d GridBagConstraints.NORTHWEST;\n        r.insets \u003d new Insets(0, 0, 0, 6);\n\n        JLabel iconLabel \u003d buildSpriteIconLabel(spriteManager, clientThread, spriteId, fallbackIcon);\n        // OSRS cache sprites often include a small amount of transparent padding.\n        // Nudge the icon up slightly so it aligns better with the title text.\n        iconLabel.setBorder(BorderFactory.createEmptyBorder(-2, 0, 0, 0));\n        iconLabel.setPreferredSize(new Dimension(ICON_SIZE, ICON_SIZE));\n        iconLabel.setMinimumSize(new Dimension(ICON_SIZE, ICON_SIZE));\n        iconLabel.setMaximumSize(new Dimension(ICON_SIZE, ICON_SIZE));\n\n        r.gridx \u003d 0;\n        r.weightx \u003d 0;\n        row.add(iconLabel, r);\n\n        r.gridx \u003d 1;\n        r.weightx \u003d 1;\n        r.fill \u003d GridBagConstraints.HORIZONTAL;\n        r.insets \u003d new Insets(0, 0, 0, 0);\n        JTextArea title \u003d wrapTextFlush(titleText \u003d\u003d null ? \"\" : titleText, 12f, true);\n        title.setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 0));\n        row.add(title, r);\n\n        return row;\n    }\n\n    private static JLabel buildSpriteIconLabel(SpriteManager spriteManager, ClientThread clientThread, int spriteId, ImageIcon fallbackIcon)\n    {\n        JLabel label \u003d new JLabel();\n        label.setOpaque(false);\n\n        if (spriteManager \u003d\u003d null)\n        {\n            if (fallbackIcon !\u003d null)\n            {\n                label.setIcon(fallbackIcon);\n            }\n            return label;\n        }\n\n        // Always set fallback first so the layout is stable even if sprite loading is delayed.\n        if (fallbackIcon !\u003d null)\n        {\n            label.setIcon(fallbackIcon);\n        }\n\n        // SpriteManager access is safest from the client thread.\n        Runnable request \u003d () -\u003e\n        {\n            BufferedImage img \u003d spriteManager.getSprite(spriteId, 0);\n            if (img !\u003d null)\n            {\n                SwingUtilities.invokeLater(() -\u003e\n                {\n                    label.setIcon(new ImageIcon(scale(img)));\n                    label.revalidate();\n                    label.repaint();\n                });\n                return;\n            }\n\n            spriteManager.getSpriteAsync(spriteId, 0, sprite -\u003e\n            {\n                if (sprite \u003d\u003d null)\n                {\n                    return;\n                }\n\n                SwingUtilities.invokeLater(() -\u003e\n                {\n                    label.setIcon(new ImageIcon(scale(sprite)));\n                    label.revalidate();\n                    label.repaint();\n                });\n            });\n        };\n\n        if (clientThread !\u003d null)\n        {\n            clientThread.invokeLater(request);\n        }\n        else\n        {\n            request.run();\n        }\n        return label;\n    }\n\n    private static Image scale(BufferedImage img)\n    {\n        return img.getScaledInstance(ICON_SIZE, ICON_SIZE, Image.SCALE_SMOOTH);\n    }\n\n    private static JPanel wikiPill(String wikiUrl)\n    {\n        JButton b \u003d new JButton(\"Quest Guide\");\n        b.setFocusable(false);\n        b.setFont(FontManager.getRunescapeSmallFont());\n        b.setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n        b.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        b.setBorder(BorderFactory.createCompoundBorder(\n                BorderFactory.createLineBorder(ColorScheme.MEDIUM_GRAY_COLOR, 1),\n                BorderFactory.createEmptyBorder(2, 6, 2, 6)\n        ));\n        b.addActionListener(e -\u003e LinkBrowser.browse(wikiUrl.trim()));\n\n        JPanel wrap \u003d new JPanel(new FlowLayout(FlowLayout.RIGHT, 0, 0));\n        wrap.setOpaque(false);\n        wrap.add(b);\n\n        Dimension pref \u003d wrap.getPreferredSize();\n        wrap.setMaximumSize(new Dimension(pref.width, pref.height));\n        return wrap;\n    }\n\n    private static ImageIcon loadIcon(String relPath)\n    {\n        try\n        {\n            java.net.URL u \u003d MiniquestCard.class.getResource(relPath.startsWith(\"/\") ? relPath : \"/com/ironpath/ui/\" + relPath);\n            if (u \u003d\u003d null)\n            {\n                return null;\n            }\n\n            Image img \u003d javax.imageio.ImageIO.read(u);\n            if (img \u003d\u003d null)\n            {\n                return null;\n            }\n\n            Image scaled \u003d img.getScaledInstance(ICON_SIZE, ICON_SIZE, Image.SCALE_SMOOTH);\n            return new ImageIcon(scaled);\n        }\n        catch (Exception ignored)\n        {\n            return null;\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\ui\\MiniquestCard.java"},{"fileName":"PlanStepCard.java","content":"package com.ironpath.ui;\n\nimport com.ironpath.model.InfoPlanStep;\nimport com.ironpath.model.PlanStep;\nimport com.ironpath.model.SpineStepView;\nimport com.ironpath.model.PlanStepType;\nimport com.ironpath.model.QuestPlanStep;\nimport com.ironpath.model.TrainPlanStep;\nimport java.awt.BorderLayout;\nimport java.awt.Component;\nimport java.awt.Dimension;\nimport javax.swing.BorderFactory;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.JTextArea;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.game.SpriteManager;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\n\n/**\n * Renders a {@link PlanStep} as a compact sidebar-safe card.\n */\npublic final class PlanStepCard\n{\n    private PlanStepCard() {}\n\n    public static JPanel compact(SpriteManager spriteManager, ClientThread clientThread, SpineStepView view)\n    {\n        if (view \u003d\u003d null)\n        {\n            return empty(\"Unknown step\", -1, -1);\n        }\n\n        return compact(spriteManager, clientThread, view.getStep(), view.getSpineIndex(), view.getSpineTotal());\n    }\n\n    public static JPanel compact(SpriteManager spriteManager, ClientThread clientThread, PlanStep step, int spineIndex, int spineTotal)\n    {\n        if (step \u003d\u003d null)\n        {\n            return empty(\"Unknown step\", spineIndex, spineTotal);\n        }\n\n        if (step.getType() \u003d\u003d PlanStepType.QUEST \u0026\u0026 step instanceof QuestPlanStep)\n        {\n            QuestPlanStep q \u003d (QuestPlanStep) step;\n            return QuestCard.compact(spriteManager, clientThread, q.getEntry(), q.getState(), spineIndex, spineTotal);\n        }\n\n        if (step.getType() \u003d\u003d PlanStepType.TRAIN \u0026\u0026 step instanceof TrainPlanStep)\n        {\n            return train((TrainPlanStep) step, spineIndex, spineTotal);\n        }\n\n        if (step instanceof InfoPlanStep)\n        {\n            return info(spriteManager, clientThread, (InfoPlanStep) step, spineIndex, spineTotal);\n        }\n\n        return empty(step.getType().name(), spineIndex, spineTotal);\n    }\n\n    private static JPanel train(TrainPlanStep t, int spineIndex, int spineTotal)\n    {\n        JPanel p \u003d base();\n        String title \u003d \"Train \" + t.getSkill().getName() + \" to \" + t.getToLevel();\n\n        p.add(buildHeader(title, spineIndex, spineTotal, true), BorderLayout.NORTH);\n\n        JTextArea body \u003d bodyArea(t.getReason());\n        p.add(body, BorderLayout.CENTER);\n        return p;\n    }\n\n    private static JPanel info(SpriteManager spriteManager, ClientThread clientThread, InfoPlanStep s, int spineIndex, int spineTotal)\n    {\n        // Render MINIQUEST with quest-like card styling for consistency.\n        if (s.getType() \u003d\u003d PlanStepType.MINIQUEST)\n        {\n            String title \u003d s.getTitle() \u003d\u003d null ? \"Miniquest\" : s.getTitle();\n            String detail \u003d s.getDetail();\n            return MiniquestCard.compact(spriteManager, clientThread, title, detail, s.getWikiUrl(), spineIndex, spineTotal);\n        }\n\n        JPanel p \u003d base();\n\n        String label \u003d labelFor(s.getType());\n        String title \u003d s.getTitle() \u003d\u003d null ? label : s.getTitle();\n        String headerTitle \u003d label + \": \" + title;\n\n        p.add(buildHeader(headerTitle, spineIndex, spineTotal, true), BorderLayout.NORTH);\n\n        JTextArea body \u003d bodyArea(s.getDetail());\n        body.setFont(FontManager.getRunescapeSmallFont());\n        body.setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n        p.add(body, BorderLayout.CENTER);\n        return p;\n    }\n\n\n    private static String labelFor(PlanStepType t)\n    {\n        if (t \u003d\u003d null)\n        {\n            return \"\";\n        }\n\n        switch (t)\n        {\n            case QUEST: return \"\";\n            case MINIQUEST: return \"Miniquest\";\n            case DIARY: return \"Diary\";\n            case TRAIN: return \"Train\";\n            case NOTE: return \"\";\n            default: return \"\";\n        }\n    }\n\n    private static JPanel empty(String title, int spineIndex, int spineTotal)\n    {\n        JPanel p \u003d base();\n        p.add(buildHeader(title, spineIndex, spineTotal, true), BorderLayout.NORTH);\n        return p;\n    }\n\n    private static JPanel base()\n    {\n        JPanel panel \u003d new JPanel(new BorderLayout());\n        panel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        panel.setBorder(BorderFactory.createCompoundBorder(\n                BorderFactory.createMatteBorder(1, 1, 1, 1, ColorScheme.DARK_GRAY_COLOR),\n                BorderFactory.createEmptyBorder(8, 8, 8, 8)\n        ));\n        panel.setAlignmentX(Component.LEFT_ALIGNMENT);\n        return panel;\n    }\n\n    \n    private static JPanel buildHeader(String leftTitle, int spineIndex, int spineTotal, boolean showLongLine)\n    {\n        JPanel header \u003d new JPanel();\n        header.setOpaque(false);\n        header.setLayout(new javax.swing.BoxLayout(header, javax.swing.BoxLayout.Y_AXIS));\n\n        // Row 1: title (left) + progress (right)\n        JPanel row1 \u003d new JPanel(new BorderLayout());\n        row1.setOpaque(false);\n\n        JLabel title \u003d new JLabel(leftTitle \u003d\u003d null ? \"\" : leftTitle);\n        title.setAlignmentX(Component.LEFT_ALIGNMENT);\n        title.setFont(FontManager.getRunescapeSmallFont());\n        title.setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n\n        JLabel progress \u003d new JLabel(formatProgressCompact(spineIndex, spineTotal));\n        progress.setFont(FontManager.getRunescapeSmallFont());\n        progress.setForeground(ColorScheme.MEDIUM_GRAY_COLOR);\n\n        row1.add(title, BorderLayout.WEST);\n        row1.add(progress, BorderLayout.EAST);\n\n        header.add(row1);\n\n        if (showLongLine)\n        {\n            // Row 2: \"Step X of Y\"\n            JLabel stepLine \u003d new JLabel(formatProgressLong(spineIndex, spineTotal));\n            stepLine.setFont(FontManager.getRunescapeSmallFont());\n            stepLine.setForeground(ColorScheme.MEDIUM_GRAY_COLOR);\n            stepLine.setAlignmentX(Component.LEFT_ALIGNMENT);\n            stepLine.setBorder(BorderFactory.createEmptyBorder(2, 0, 0, 0));\n            header.add(stepLine);\n        }\n        return header;\n    }\n\n    private static String formatProgressCompact(int spineIndex, int spineTotal)\n    {\n        if (spineIndex \u003c 0 || spineTotal \u003c\u003d 0)\n        {\n            return \"\";\n        }\n        return (spineIndex + 1) + \" / \" + spineTotal;\n    }\n\n    private static String formatProgressLong(int spineIndex, int spineTotal)\n    {\n        if (spineIndex \u003c 0 || spineTotal \u003c\u003d 0)\n        {\n            return \"\";\n        }\n        return \"Step \" + (spineIndex + 1) + \" of \" + spineTotal;\n    }\n\n\nprivate static JTextArea bodyArea(String text)\n    {\n        JTextArea ta \u003d new JTextArea(text \u003d\u003d null ? \"\" : text);\n        ta.setLineWrap(true);\n        ta.setWrapStyleWord(true);\n        ta.setEditable(false);\n        ta.setFocusable(false);\n        ta.setOpaque(false);\n        // Keep preferred width small so the card never exceeds the sidebar.\n        ta.setColumns(1);\n        ta.setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 8));\n        ta.setAlignmentX(Component.LEFT_ALIGNMENT);\n        return ta;\n    }\n}","filePath":"src\\main\\java\\com\\ironpath\\ui\\PlanStepCard.java"},{"fileName":"QuestCard.java","content":"package com.ironpath.ui;\n\nimport com.ironpath.model.QuestEntry;\nimport java.awt.Component;\nimport java.awt.Dimension;\nimport java.awt.FlowLayout;\nimport java.awt.Font;\nimport java.awt.GridBagConstraints;\nimport java.awt.GridBagLayout;\nimport java.awt.Insets;\nimport java.awt.Image;\nimport javax.swing.BorderFactory;\nimport javax.swing.ImageIcon;\nimport javax.swing.JButton;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.JTextArea;\nimport net.runelite.api.QuestState;\nimport net.runelite.api.SpriteID;\nimport net.runelite.client.game.SpriteManager;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.util.LinkBrowser;\nimport java.awt.image.BufferedImage;\nimport javax.swing.SwingUtilities;\n\npublic final class QuestCard\n{\n    private static final int PAD \u003d 10;\n    private static final int ICON_SIZE \u003d 16;\n\n    // Fallback icon only. Real icons are pulled from the OSRS cache via SpriteManager.\n    // If the resource is missing, the layout still reserves space and stays stable.\n    private static final ImageIcon FALLBACK_QUEST_ICON \u003d loadIcon(\"icons/quest.png\");\n\n    private QuestCard() {}\n\n    public static JPanel summary(int completed, int total, QuestEntry recommended, QuestState state)\n    {\n        JPanel card \u003d baseCard();\n        card.setLayout(new GridBagLayout());\n\n        GridBagConstraints c \u003d new GridBagConstraints();\n        c.gridx \u003d 0;\n        c.gridy \u003d 0;\n        c.weightx \u003d 1;\n        c.fill \u003d GridBagConstraints.HORIZONTAL;\n        c.anchor \u003d GridBagConstraints.NORTHWEST;\n        c.insets \u003d new Insets(0, 0, 0, 0);\n\n        // Progress line (left)\n        JTextArea progress \u003d wrapTextFlush(\"Progress: \" + completed + \" / \" + total, 13f, true);\n        card.add(progress, c);\n\n        // Pill (right)\n        if (recommended !\u003d null)\n        {\n            c.gridx \u003d 1;\n            c.gridy \u003d 0;\n            c.weightx \u003d 0;\n            c.fill \u003d GridBagConstraints.NONE;\n            c.anchor \u003d GridBagConstraints.NORTHEAST;\n            card.add(wikiPill(recommended), c);\n        }\n\n        // Title + reason\n        c.gridx \u003d 0;\n        c.gridy \u003d 1;\n        c.gridwidth \u003d 2;\n        c.weightx \u003d 1;\n        c.fill \u003d GridBagConstraints.HORIZONTAL;\n        c.anchor \u003d GridBagConstraints.NORTHWEST;\n        c.insets \u003d new Insets(8, 0, 0, 0);\n\n        if (recommended \u003d\u003d null)\n        {\n            card.add(wrapTextFlush(\"Quest cape achieved.\", 11f, false), c);\n        }\n        else\n        {\n            JPanel body \u003d new JPanel();\n            body.setOpaque(false);\n            body.setLayout(new GridBagLayout());\n\n            GridBagConstraints b \u003d new GridBagConstraints();\n            b.gridx \u003d 0;\n            b.gridy \u003d 0;\n            b.weightx \u003d 1;\n            b.fill \u003d GridBagConstraints.HORIZONTAL;\n            b.anchor \u003d GridBagConstraints.NORTHWEST;\n            b.insets \u003d new Insets(0, 0, 0, 0);\n\n            body.add(wrapTextFlush(recommended.getQuestName(), 13f, true), b);\n\n            String why \u003d recommended.getShortWhy();\n            if (why \u003d\u003d null || why.isBlank())\n            {\n                why \u003d \"Next best quest in your route.\";\n            }\n\n            b.gridy \u003d 1;\n            b.insets \u003d new Insets(4, 0, 0, 0);\n            body.add(wrapTextFlush(why, 11f, false), b);\n\n            card.add(body, c);\n        }\n\n        forceFillWidth(card);\n        return card;\n    }\n\n    public static JPanel compact(QuestEntry entry, QuestState state)\n    {\n        return compact(null, entry, state, -1, -1);\n    }\n\n    public static JPanel compact(QuestEntry entry, QuestState state, int spineIndex, int spineTotal)\n    {\n        return compact(null, entry, state, spineIndex, spineTotal);\n    }\n\n    public static JPanel compact(SpriteManager spriteManager, QuestEntry entry, QuestState state, int spineIndex, int spineTotal)\n    {\n        return compact(spriteManager, null, entry, state, spineIndex, spineTotal);\n    }\n\n    public static JPanel compact(SpriteManager spriteManager, ClientThread clientThread, QuestEntry entry, QuestState state, int spineIndex, int spineTotal)\n    {\n        JPanel card \u003d baseCard();\n        card.setLayout(new GridBagLayout());\n\n        GridBagConstraints c \u003d new GridBagConstraints();\n        // Row 1: icon + title (tight)\n        c.gridx \u003d 0;\n        c.gridy \u003d 0;\n        c.gridwidth \u003d 2;\n        c.weightx \u003d 1;\n        c.fill \u003d GridBagConstraints.HORIZONTAL;\n        c.anchor \u003d GridBagConstraints.NORTHWEST;\n        c.insets \u003d new Insets(0, 0, 0, 0);\n        // RuneLite SpriteID doesn\u0027t expose a consistent \"QUESTS_TAB\" constant across versions.\n        // Use the quests page icon sprite, which is stable and matches the in-game quests UI.\n        card.add(iconTitleRow(spriteManager, clientThread, SpriteID.QUESTS_PAGE_ICON_BLUE_QUESTS, FALLBACK_QUEST_ICON, entry.getQuestName()), c);\n\n        // Row 2: \"Step X of Y\" (left) + Quest Guide (right)\n        String stepLine \u003d formatProgressLong(spineIndex, spineTotal);\n\n        c.gridwidth \u003d 1;\n        c.gridy \u003d 1;\n        c.insets \u003d new Insets(2, 0, 0, 0);\n\n        c.gridx \u003d 0;\n        c.weightx \u003d 1;\n        c.fill \u003d GridBagConstraints.HORIZONTAL;\n        JLabel step \u003d new JLabel(stepLine);\n        step.setFont(step.getFont().deriveFont(Font.PLAIN, 10.5f));\n        step.setForeground(ColorScheme.MEDIUM_GRAY_COLOR);\n        card.add(step, c);\n\n        c.gridx \u003d 1;\n        c.weightx \u003d 0;\n        c.fill \u003d GridBagConstraints.NONE;\n        c.anchor \u003d GridBagConstraints.NORTHEAST;\n        card.add(wikiPill(entry), c);\n\n        // Reason (full width under step line)\n        String why \u003d entry.getShortWhy();\n        if (why !\u003d null \u0026\u0026 !why.isBlank())\n        {\n            c.gridx \u003d 0;\n            c.gridy \u003d 2;\n            c.gridwidth \u003d 2;\n            c.weightx \u003d 1;\n            c.fill \u003d GridBagConstraints.HORIZONTAL;\n            c.anchor \u003d GridBagConstraints.NORTHWEST;\n            c.insets \u003d new Insets(6, 0, 0, 0);\n\n            card.add(wrapTextFlush(why, 11f, false), c);\n        }\n\n        forceFillWidth(card);\n        return card;\n    }\n\n    private static String formatProgressCompact(int spineIndex, int spineTotal)\n    {\n        if (spineIndex \u003c 0 || spineTotal \u003c\u003d 0)\n        {\n            return \"\";\n        }\n        return (spineIndex + 1) + \" / \" + spineTotal;\n    }\n\n    private static String formatProgressLong(int spineIndex, int spineTotal)\n    {\n        if (spineIndex \u003c 0 || spineTotal \u003c\u003d 0)\n        {\n            return \"\";\n        }\n        return \"Step \" + (spineIndex + 1) + \" of \" + spineTotal;\n    }\n\n    private static JPanel baseCard()\n    {\n        JPanel p \u003d new JPanel();\n        p.setOpaque(true);\n        p.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        p.setBorder(BorderFactory.createCompoundBorder(\n                BorderFactory.createLineBorder(ColorScheme.DARK_GRAY_COLOR, 1, true),\n                BorderFactory.createEmptyBorder(PAD, PAD, PAD, PAD)\n        ));\n        p.setAlignmentX(Component.LEFT_ALIGNMENT);\n        return p;\n    }\n\n\n    private static String resolveWikiUrl(QuestEntry entry)\n    {\n        if (entry !\u003d null)\n        {\n            String u \u003d entry.getWikiUrl();\n            if (u !\u003d null \u0026\u0026 !u.trim().isEmpty())\n            {\n                return u.trim();\n            }\n\n            String name \u003d entry.getQuestName();\n            if (name !\u003d null \u0026\u0026 !name.trim().isEmpty())\n            {\n                final String slug \u003d name.trim().replace(\u0027 \u0027, \u0027_\u0027);\n                try\n                {\n                    return \"https://oldschool.runescape.wiki/w/\" + java.net.URLEncoder.encode(slug, java.nio.charset.StandardCharsets.UTF_8)\n                            .replace(\"+\", \"%20\");\n                }\n                catch (Exception ignored)\n                {\n                    // fall through\n                }\n            }\n        }\n        return \"https://oldschool.runescape.wiki/\";\n    }\n    private static JTextArea wrapTextFlush(String text, float fontSize, boolean bold)\n    {\n        JTextArea area \u003d new JTextArea(text \u003d\u003d null ? \"\" : text);\n        area.setRows(1);\n        area.setOpaque(false);\n        area.setEditable(false);\n        area.setFocusable(false);\n\n        area.setLineWrap(true);\n        area.setWrapStyleWord(true);\n\n        Font f \u003d new JLabel().getFont().deriveFont(bold ? Font.BOLD : Font.PLAIN, fontSize);\n        area.setFont(f);\n        area.setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n\n        area.setMargin(new Insets(0, 0, 0, 0));\n        area.setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 8));\n        // Keep preferred width small so the card never exceeds the sidebar.\n        area.setColumns(1);\n\n        return area;\n    }\n\n    private static JPanel wikiPill(QuestEntry entry)\n    {\n        final String url \u003d resolveWikiUrl(entry);\n\n        JButton b \u003d new JButton(\"Quest Guide\");\n        b.setFocusable(false);\n        b.setFont(FontManager.getRunescapeSmallFont());\n        b.setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n        b.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        b.setBorder(BorderFactory.createCompoundBorder(\n                BorderFactory.createLineBorder(ColorScheme.MEDIUM_GRAY_COLOR, 1),\n                BorderFactory.createEmptyBorder(2, 6, 2, 6)\n        ));\n        b.addActionListener(e -\u003e LinkBrowser.browse(url));\n\n        JPanel wrap \u003d new JPanel(new FlowLayout(FlowLayout.RIGHT, 0, 0));\n        wrap.setOpaque(false);\n        wrap.add(b);\n\n        Dimension pref \u003d wrap.getPreferredSize();\n        wrap.setMaximumSize(new Dimension(pref.width, pref.height));\n        return wrap;\n    }\n\n    private static JPanel iconTitleRow(SpriteManager spriteManager, ClientThread clientThread, int spriteId, ImageIcon fallbackIcon, String titleText)\n    {\n        JPanel row \u003d new JPanel(new GridBagLayout());\n        row.setOpaque(false);\n\n        GridBagConstraints r \u003d new GridBagConstraints();\n        r.gridy \u003d 0;\n        r.anchor \u003d GridBagConstraints.NORTHWEST;\n        r.insets \u003d new Insets(0, 0, 0, 6);\n\n        // Icon (fixed slot, prevents text jitter)\n        JLabel iconLabel \u003d buildSpriteIconLabel(spriteManager, clientThread, spriteId, fallbackIcon);\n        // OSRS cache sprites often include a small amount of transparent padding.\n        // Nudge the icon up slightly so it aligns better with the title text.\n        iconLabel.setBorder(BorderFactory.createEmptyBorder(-2, 0, 0, 0));\n        iconLabel.setPreferredSize(new Dimension(ICON_SIZE, ICON_SIZE));\n        iconLabel.setMinimumSize(new Dimension(ICON_SIZE, ICON_SIZE));\n        iconLabel.setMaximumSize(new Dimension(ICON_SIZE, ICON_SIZE));\n        r.gridx \u003d 0;\n        r.weightx \u003d 0;\n        row.add(iconLabel, r);\n\n        // Title (wrapping)\n        r.gridx \u003d 1;\n        r.weightx \u003d 1;\n        r.fill \u003d GridBagConstraints.HORIZONTAL;\n        r.insets \u003d new Insets(0, 0, 0, 0);\n        JTextArea title \u003d wrapTextFlush(titleText \u003d\u003d null ? \"\" : titleText, 12f, true);\n        // Title row is tight, so no extra right padding.\n        title.setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 0));\n        row.add(title, r);\n\n        return row;\n    }\n\n    private static JLabel buildSpriteIconLabel(SpriteManager spriteManager, ClientThread clientThread, int spriteId, ImageIcon fallbackIcon)\n    {\n        JLabel label \u003d new JLabel();\n        label.setOpaque(false);\n\n        if (spriteManager \u003d\u003d null)\n        {\n            if (fallbackIcon !\u003d null)\n            {\n                label.setIcon(fallbackIcon);\n            }\n            return label;\n        }\n\n        // Always set fallback first so the layout is stable even if sprite loading is delayed.\n        if (fallbackIcon !\u003d null)\n        {\n            label.setIcon(fallbackIcon);\n        }\n\n        // SpriteManager access is safest from the client thread.\n        Runnable request \u003d () -\u003e\n        {\n            BufferedImage img \u003d spriteManager.getSprite(spriteId, 0);\n            if (img !\u003d null)\n            {\n                SwingUtilities.invokeLater(() -\u003e\n                {\n                    label.setIcon(new ImageIcon(scale(img)));\n                    label.revalidate();\n                    label.repaint();\n                });\n                return;\n            }\n\n            spriteManager.getSpriteAsync(spriteId, 0, sprite -\u003e\n            {\n                if (sprite \u003d\u003d null)\n                {\n                    return;\n                }\n\n                SwingUtilities.invokeLater(() -\u003e\n                {\n                    label.setIcon(new ImageIcon(scale(sprite)));\n                    label.revalidate();\n                    label.repaint();\n                });\n            });\n        };\n\n        if (clientThread !\u003d null)\n        {\n            clientThread.invokeLater(request);\n        }\n        else\n        {\n            // Best-effort if clientThread isn\u0027t available.\n            request.run();\n        }\n        return label;\n    }\n\n    private static Image scale(java.awt.image.BufferedImage img)\n    {\n        return img.getScaledInstance(ICON_SIZE, ICON_SIZE, Image.SCALE_SMOOTH);\n    }\n\n    private static ImageIcon loadIcon(String relPath)\n    {\n        try\n        {\n            java.net.URL u \u003d QuestCard.class.getResource(relPath.startsWith(\"/\") ? relPath : \"/com/ironpath/ui/\" + relPath);\n            if (u \u003d\u003d null)\n            {\n                return null;\n            }\n\n            Image img \u003d javax.imageio.ImageIO.read(u);\n            if (img \u003d\u003d null)\n            {\n                return null;\n            }\n\n            Image scaled \u003d img.getScaledInstance(ICON_SIZE, ICON_SIZE, Image.SCALE_SMOOTH);\n            return new ImageIcon(scaled);\n        }\n        catch (Exception ignored)\n        {\n            return null;\n        }\n    }\n\n\n    private static void forceFillWidth(JPanel panel)\n    {\n        panel.setAlignmentX(Component.LEFT_ALIGNMENT);\n        panel.setMaximumSize(new Dimension(Integer.MAX_VALUE, Integer.MAX_VALUE));\n    }\n}","filePath":"src\\main\\java\\com\\ironpath\\ui\\QuestCard.java"},{"fileName":"ScrollablePanel.java","content":"package com.ironpath.ui;\n\nimport java.awt.Dimension;\nimport java.awt.Rectangle;\nimport javax.swing.JPanel;\nimport javax.swing.Scrollable;\n\n/**\n * A JPanel that tracks the viewport width inside a JScrollPane.\n *\n * This prevents horizontal clipping when child components report a wide\n * preferred size (e.g., wrapped JTextArea + BoxLayout in the RuneLite sidebar).\n */\npublic class ScrollablePanel extends JPanel implements Scrollable\n{\n    @Override\n    public Dimension getPreferredScrollableViewportSize()\n    {\n        // RuneLite\u0027s sidebar layout can honor a scrollpane\u0027s preferred size. During a refresh\n        // (e.g., after removeAll() and before all cards are re-added), our preferred height can\n        // momentarily shrink to a single card, causing the entire list area to collapse.\n        //\n        // Provide a stable minimum viewport height so the scroll area stays full-sized.\n        Dimension pref \u003d getPreferredSize();\n\n        int minH \u003d 400;\n        if (getParent() !\u003d null)\n        {\n            // If we\u0027re already inside a viewport, prefer its current height.\n            minH \u003d Math.max(minH, getParent().getHeight());\n        }\n\n        return new Dimension(pref.width, Math.max(pref.height, minH));\n    }\n\n    @Override\n    public int getScrollableUnitIncrement(Rectangle visibleRect, int orientation, int direction)\n    {\n        return 16;\n    }\n\n    @Override\n    public int getScrollableBlockIncrement(Rectangle visibleRect, int orientation, int direction)\n    {\n        return Math.max(visibleRect.height - 32, 32);\n    }\n\n    @Override\n    public boolean getScrollableTracksViewportWidth()\n    {\n        return true;\n    }\n\n    @Override\n    public boolean getScrollableTracksViewportHeight()\n    {\n        return false;\n    }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\ui\\ScrollablePanel.java"},{"fileName":"SpriteIconCache.java","content":"package com.ironpath.ui;\n\nimport java.awt.Image;\nimport java.awt.image.BufferedImage;\nimport java.lang.ref.WeakReference;\nimport java.util.Iterator;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.concurrent.ConcurrentHashMap;\nimport java.util.concurrent.CopyOnWriteArrayList;\nimport javax.swing.ImageIcon;\nimport javax.swing.JLabel;\nimport javax.swing.SwingUtilities;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.game.SpriteManager;\n\n/**\n * Small UI-only cache for OSRS cache sprites (via RuneLite SpriteManager).\n *\n * Goals:\n * - Avoid repeated fallback-\u003esprite swapping across frequent panel rebuilds.\n * - Ensure sprite requests occur on the client thread.\n * - Update any labels that are currently showing the sprite when it becomes available.\n */\nfinal class SpriteIconCache\n{\n    private static final Map\u003cInteger, ImageIcon\u003e CACHE \u003d new ConcurrentHashMap\u003c\u003e();\n    private static final Set\u003cInteger\u003e IN_FLIGHT \u003d ConcurrentHashMap.newKeySet();\n    private static final Map\u003cInteger, CopyOnWriteArrayList\u003cWeakReference\u003cJLabel\u003e\u003e\u003e WATCHERS \u003d new ConcurrentHashMap\u003c\u003e();\n\n    private SpriteIconCache()\n    {\n    }\n\n    static void attach(JLabel label, SpriteManager spriteManager, ClientThread clientThread, int spriteId, int size)\n    {\n        if (label \u003d\u003d null)\n        {\n            return;\n        }\n\n        ImageIcon cached \u003d CACHE.get(spriteId);\n        if (cached !\u003d null)\n        {\n            label.setIcon(cached);\n            return;\n        }\n\n        if (spriteManager \u003d\u003d null)\n        {\n            // No sprite manager available; leave icon empty but preserve slot sizing in the caller.\n            return;\n        }\n\n        // Register the label so it will be updated when the sprite is available.\n        WATCHERS.computeIfAbsent(spriteId, k -\u003e new CopyOnWriteArrayList\u003c\u003e()).add(new WeakReference\u003c\u003e(label));\n\n        // Only one load per spriteId.\n        if (!IN_FLIGHT.add(spriteId))\n        {\n            return;\n        }\n\n        Runnable request \u003d () -\u003e\n        {\n            BufferedImage img \u003d spriteManager.getSprite(spriteId, 0);\n            if (img !\u003d null)\n            {\n                publish(spriteId, img, size);\n                return;\n            }\n\n            spriteManager.getSpriteAsync(spriteId, 0, sprite -\u003e\n            {\n                if (sprite !\u003d null)\n                {\n                    publish(spriteId, sprite, size);\n                }\n                else\n                {\n                    IN_FLIGHT.remove(spriteId);\n                }\n            });\n        };\n\n        if (clientThread !\u003d null)\n        {\n            clientThread.invokeLater(request);\n        }\n        else\n        {\n            request.run();\n        }\n    }\n\n    private static void publish(int spriteId, BufferedImage img, int size)\n    {\n        ImageIcon icon \u003d new ImageIcon(scale(img, size));\n        CACHE.put(spriteId, icon);\n        IN_FLIGHT.remove(spriteId);\n\n        CopyOnWriteArrayList\u003cWeakReference\u003cJLabel\u003e\u003e list \u003d WATCHERS.get(spriteId);\n        if (list \u003d\u003d null)\n        {\n            return;\n        }\n\n        SwingUtilities.invokeLater(() -\u003e\n        {\n            Iterator\u003cWeakReference\u003cJLabel\u003e\u003e it \u003d list.iterator();\n            while (it.hasNext())\n            {\n                JLabel l \u003d it.next().get();\n                if (l \u003d\u003d null)\n                {\n                    it.remove();\n                    continue;\n                }\n                l.setIcon(icon);\n                l.revalidate();\n                l.repaint();\n            }\n        });\n    }\n\n    private static Image scale(BufferedImage img, int size)\n    {\n        return img.getScaledInstance(size, size, Image.SCALE_SMOOTH);\n    }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\ui\\SpriteIconCache.java"},{"fileName":"StatusPill.java","content":"package com.ironpath.ui;\n\nimport com.ironpath.model.QuestReadiness;\nimport com.ironpath.model.QuestRow;\nimport java.awt.Color;\nimport java.awt.Font;\nimport javax.swing.BorderFactory;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport net.runelite.client.ui.ColorScheme;\n\nfinal class StatusPill\n{\n    private StatusPill() {}\n\n    static JPanel build(QuestRow row)\n    {\n        final String text;\n        final Color bg;\n\n        final QuestReadiness r \u003d row.getReadiness();\n        switch (r)\n        {\n            case DONE:\n                text \u003d \"Done\";\n                bg \u003d new Color(54, 94, 64);\n                break;\n            case IN_PROGRESS:\n                text \u003d \"In progress\";\n                bg \u003d new Color(88, 86, 58);\n                break;\n            case BLOCKED:\n                text \u003d \"Blocked\";\n                bg \u003d new Color(92, 64, 64);\n                break;\n            case READY:\n            default:\n                text \u003d \"Ready\";\n                bg \u003d new Color(56, 76, 94);\n                break;\n        }\n\n        final JLabel label \u003d new JLabel(text);\n        label.setFont(label.getFont().deriveFont(Font.BOLD, 11f));\n        label.setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n\n        final JPanel pill \u003d new JPanel();\n        pill.setBackground(bg);\n        pill.setBorder(BorderFactory.createCompoundBorder(\n                BorderFactory.createLineBorder(ColorScheme.DARK_GRAY_COLOR),\n                BorderFactory.createEmptyBorder(3, 8, 3, 8)\n        ));\n        pill.add(label);\n        return pill;\n    }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\ui\\StatusPill.java"},{"fileName":"XpTable.java","content":"package com.ironpath.util;\n\n/**\n * OSRS experience table helpers.\n *\n * RuneLite\u0027s API does not expose exact per-skill XP for an Ironman plan simulation,\n * so we convert from a conservative baseline: the minimum XP for the current real level.\n *\n * This still improves correctness over heuristics when applying quest XP rewards.\n */\npublic final class XpTable\n{\n    private static final int MAX_LEVEL \u003d 126;\n    private static final int[] XP_FOR_LEVEL \u003d build();\n\n    private XpTable() {}\n\n    public static int xpForLevel(int level)\n    {\n        int l \u003d clamp(level, 1, MAX_LEVEL);\n        return XP_FOR_LEVEL[l];\n    }\n\n    public static int levelForXp(int xp)\n    {\n        int x \u003d Math.max(0, xp);\n        int lo \u003d 1;\n        int hi \u003d MAX_LEVEL;\n\n        while (lo \u003c hi)\n        {\n            int mid \u003d (lo + hi + 1) \u003e\u003e\u003e 1;\n            if (XP_FOR_LEVEL[mid] \u003c\u003d x)\n            {\n                lo \u003d mid;\n            }\n            else\n            {\n                hi \u003d mid - 1;\n            }\n        }\n\n        return lo;\n    }\n\n    private static int[] build()\n    {\n        // Standard RuneScape formula. Index 0 unused; XP_FOR_LEVEL[level] \u003d minimum XP for that level.\n        int[] xp \u003d new int[MAX_LEVEL + 1];\n        int points \u003d 0;\n\n        xp[1] \u003d 0;\n        for (int lvl \u003d 2; lvl \u003c\u003d MAX_LEVEL; lvl++)\n        {\n            points +\u003d (int) Math.floor(lvl - 1 + 300.0 * Math.pow(2.0, (lvl - 1) / 7.0));\n            xp[lvl] \u003d points / 4;\n        }\n        return xp;\n    }\n\n    private static int clamp(int v, int lo, int hi)\n    {\n        if (v \u003c lo) return lo;\n        if (v \u003e hi) return hi;\n        return v;\n    }\n}\n","filePath":"src\\main\\java\\com\\ironpath\\util\\XpTable.java"}]},{"commit":"59bc4e7bd2d0c8cbbc6102319aa882a9e366d38a","repository":"https://github.com/Un4gott3n/BH-Pages.git","internalName":"bh-pages","files":[{"fileName":"BHP_autoComplete.java","content":"/*\n * Copyright (c) 2018, John Pettenger\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n//thanks \u0026 credits to hiscores plugin!\npackage com.BHPages;\n\nimport com.google.common.collect.EvictingQueue;\nimport com.google.inject.Inject;\nimport java.awt.event.KeyEvent;\nimport java.awt.event.KeyListener;\nimport java.util.Arrays;\nimport java.util.Objects;\nimport java.util.Optional;\nimport java.util.regex.Pattern;\nimport javax.inject.Singleton;\nimport javax.swing.SwingUtilities;\nimport javax.swing.text.BadLocationException;\nimport javax.swing.text.Document;\nimport javax.swing.text.JTextComponent;\nimport lombok.NonNull;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Friend;\nimport net.runelite.api.FriendsChatManager;\nimport net.runelite.api.Nameable;\nimport net.runelite.api.NameableContainer;\nimport net.runelite.api.Player;\nimport net.runelite.api.WorldView;\nimport net.runelite.api.clan.ClanID;\nimport net.runelite.api.clan.ClanMember;\nimport net.runelite.api.clan.ClanSettings;\n\n@Slf4j\n@Singleton\nclass NameAutocompleter implements KeyListener\n{\n    /**\n     * Non-breaking space character.\n     */\n    private static final String NBSP \u003d Character.toString((char)160);\n\n    /**\n     * Character class for characters that cannot be in an RSN.\n     */\n    private static final Pattern INVALID_CHARS \u003d Pattern.compile(\"[^a-zA-Z0-9_ -]\");\n\n    private static final int MAX_SEARCH_HISTORY \u003d 25;\n\n    private final Client client;\n    private final BHP_Config BHPconfig;\n\n    private final EvictingQueue\u003cString\u003e searchHistory \u003d EvictingQueue.create(MAX_SEARCH_HISTORY);\n\n    /**\n     * The name currently being autocompleted.\n     */\n    private String autocompleteName;\n\n    /**\n     * Pattern for the name currently being autocompleted.\n     */\n    private Pattern autocompleteNamePattern;\n\n    @Inject\n    private NameAutocompleter(Client client, BHP_Config config)\n    {\n        this.client \u003d client;\n        this.BHPconfig \u003d config;\n    }\n\n    @Override\n    public void keyPressed(KeyEvent e)\n    {\n\n    }\n\n    @Override\n    public void keyReleased(KeyEvent e)\n    {\n\n    }\n\n    @Override\n    public void keyTyped(KeyEvent e)\n    {\n        if (!BHPconfig.autocomplete())\n        {\n            return;\n        }\n\n        final JTextComponent input \u003d (JTextComponent)e.getSource();\n        final String inputText \u003d input.getText();\n\n        // Only autocomplete if the selection end is at the end of the text.\n        if (input.getSelectionEnd() !\u003d inputText.length())\n        {\n            return;\n        }\n\n        // Character to be inserted at the selection start.\n        final String charToInsert \u003d Character.toString(e.getKeyChar());\n\n        // Don\u0027t attempt to autocomplete if the name is invalid.\n        // This condition is also true when the user presses a key like backspace.\n        if (INVALID_CHARS.matcher(charToInsert).find()\n                || INVALID_CHARS.matcher(inputText).find())\n        {\n            return;\n        }\n\n        // Check if we are already autocompleting.\n        if (autocompleteName !\u003d null \u0026\u0026 autocompleteNamePattern.matcher(inputText).matches())\n        {\n            if (isExpectedNext(input, charToInsert))\n            {\n                try\n                {\n                    // Insert the character and move the selection.\n                    final int insertIndex \u003d input.getSelectionStart();\n                    Document doc \u003d input.getDocument();\n                    doc.remove(insertIndex, 1);\n                    doc.insertString(insertIndex, charToInsert, null);\n                    input.select(insertIndex + 1, input.getSelectionEnd());\n                }\n                catch (BadLocationException ex)\n                {\n                    log.warn(\"Could not insert character.\", ex);\n                }\n\n                // Prevent default behavior.\n                e.consume();\n            }\n            else // Character to insert does not match current autocompletion. Look for another name.\n            {\n                newAutocomplete(e);\n            }\n        }\n        else // Search for a name to autocomplete\n        {\n            newAutocomplete(e);\n        }\n    }\n\n    private void newAutocomplete(KeyEvent e)\n    {\n        final JTextComponent input \u003d (JTextComponent)e.getSource();\n        final String inputText \u003d input.getText();\n        final String nameStart \u003d inputText.substring(0, input.getSelectionStart()) + e.getKeyChar();\n\n        if (findAutocompleteName(nameStart))\n        {\n            // Assert this.autocompleteName !\u003d null\n            final String name \u003d this.autocompleteName;\n            SwingUtilities.invokeLater(() -\u003e\n            {\n                try\n                {\n                    input.getDocument().insertString(\n                            nameStart.length(),\n                            name.substring(nameStart.length()),\n                            null);\n                    input.select(nameStart.length(), name.length());\n                }\n                catch (BadLocationException ex)\n                {\n                    log.warn(\"Could not autocomplete name.\", ex);\n                }\n            });\n        }\n    }\n\n    private boolean findAutocompleteName(String nameStart)\n    {\n        final Pattern pattern;\n        Optional\u003cString\u003e autocompleteName;\n\n        // Pattern to match names that start with nameStart.\n        // Allows spaces to be represented as common whitespaces, underscores,\n        // hyphens, or non-breaking spaces.\n        // Matching non-breaking spaces is necessary because the API\n        // returns non-breaking spaces when a name has whitespace.\n        pattern \u003d Pattern.compile(\n                \"(?i)^\" + nameStart.replaceAll(\"[ _-]\", \"[ _\" + NBSP + \"-]\") + \".+?\");\n\n        // Search all previous successful queries\n        autocompleteName \u003d searchHistory.stream()\n                .filter(n -\u003e pattern.matcher(n).matches())\n                .findFirst();\n\n        // Search friends if previous searches weren\u0027t matched\n        if (!autocompleteName.isPresent())\n        {\n            NameableContainer\u003cFriend\u003e friendContainer \u003d client.getFriendContainer();\n            if (friendContainer !\u003d null)\n            {\n                autocompleteName \u003d Arrays.stream(friendContainer.getMembers())\n                        .map(Nameable::getName)\n                        .filter(n -\u003e pattern.matcher(n).matches())\n                        .findFirst();\n            }\n        }\n\n        // Search friends chat if a friend wasn\u0027t found\n        if (!autocompleteName.isPresent())\n        {\n            final FriendsChatManager friendsChatManager \u003d client.getFriendsChatManager();\n            if (friendsChatManager !\u003d null)\n            {\n                autocompleteName \u003d Arrays.stream(friendsChatManager.getMembers())\n                        .map(Nameable::getName)\n                        .filter(n -\u003e pattern.matcher(n).matches())\n                        .findFirst();\n            }\n        }\n\n        // Search clans\n        if (!autocompleteName.isPresent())\n        {\n            final ClanSettings[] clanSettings \u003d {\n                    client.getClanSettings(ClanID.CLAN),\n                    client.getClanSettings(ClanID.GROUP_IRONMAN),\n                    client.getGuestClanSettings()\n            };\n            autocompleteName \u003d Arrays.stream(clanSettings)\n                    .filter(Objects::nonNull)\n                    .flatMap(cs -\u003e cs.getMembers().stream())\n                    .map(ClanMember::getName)\n                    .filter(n -\u003e pattern.matcher(n).matches())\n                    .findFirst();\n        }\n\n        // Search cached players if a friend wasn\u0027t found\n        if (!autocompleteName.isPresent())\n        {\n            WorldView wv \u003d client.getTopLevelWorldView();\n            autocompleteName \u003d wv.players().stream()\n                    .filter(Objects::nonNull)\n                    .map(Player::getName)\n                    .filter(Objects::nonNull)\n                    .filter(n -\u003e pattern.matcher(n).matches())\n                    .findFirst();\n        }\n\n        if (autocompleteName.isPresent())\n        {\n            this.autocompleteName \u003d autocompleteName.get().replace(NBSP, \" \");\n            this.autocompleteNamePattern \u003d Pattern.compile(\n                    \"(?i)^\" + this.autocompleteName.replaceAll(\"[ _-]\", \"[ _-]\") + \"$\");\n        }\n        else\n        {\n            this.autocompleteName \u003d null;\n            this.autocompleteNamePattern \u003d null;\n        }\n\n        return autocompleteName.isPresent();\n    }\n\n    void addToSearchHistory(@NonNull String name)\n    {\n        if (!searchHistory.contains(name))\n        {\n            searchHistory.offer(name);\n        }\n    }\n\n    private boolean isExpectedNext(JTextComponent input, String nextChar)\n    {\n        String expected;\n        if (input.getSelectionStart() \u003c input.getSelectionEnd())\n        {\n            try\n            {\n                expected \u003d input.getText(input.getSelectionStart(), 1);\n            }\n            catch (BadLocationException ex)\n            {\n                log.warn(\"Could not get first character from input selection.\", ex);\n                return false;\n            }\n        }\n        else\n        {\n            expected \u003d \"\";\n        }\n        return nextChar.equalsIgnoreCase(expected);\n    }\n}","filePath":"src\\main\\java\\com\\BHPages\\BHP_autoComplete.java"},{"fileName":"BHP_changelogPanel.java","content":"package com.BHPages;\n\nimport net.runelite.client.ui.ColorScheme;\n\nimport javax.swing.*;\nimport java.awt.*;\n\npublic class BHP_changelogPanel extends JPanel\n{\n    public final JPanel changelogPanel \u003d new JPanel();\n    public final JLabel changelogTextArea \u003d new JLabel();\n\n    public BHP_changelogPanel()\n    {\n        setLayout(new BorderLayout());\n        setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n        changelogPanel.setLayout(new BorderLayout());\n        changelogPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n        String changelogHtml \u003d\n                \"\u003chtml\u003e\" +\n                        \"\u003cbody style\u003d\u0027width:180px;\u0027\u003e\" +\n                        \"\u003cb\u003eChange Log\u003c/b\u003e\u003cbr\u003e\u003cbr\u003e\" +\n\n                        \"\u003cb\u003eVersion 1.0\u003c/b\u003e\" +\n                        \"\u003cul style\u003d\u0027margin-left:0; padding-left:10px;\u0027\u003e\" +\n                        \"\u003cli\u003e\u003cfont color\u003d\u0027green\u0027\u003eAdded:\u003c/font\u003e Automatic Activation when target is assigned.\u003c/li\u003e\" +\n                        \"\u003cli\u003e\u003cfont color\u003d\u0027green\u0027\u003eAdded:\u003c/font\u003e Notepad for keeping track of opponent behaviours / traits.\u003c/li\u003e\" +\n                        \"\u003cli\u003e\u003cfont color\u003d\u0027green\u0027\u003eAdded:\u003c/font\u003e Combat level \u0026 Total level listed.\u003c/li\u003e\" +\n                        \"\u003cli\u003e\u003cfont color\u003d\u0027green\u0027\u003eAdded:\u003c/font\u003e Skill levels listed.\u003c/li\u003e\" +\n                        \"\u003cli\u003e\u003cfont color\u003d\u0027green\u0027\u003eAdded:\u003c/font\u003e Ability to make surge potion (81 herb - Yes/No).\u003c/li\u003e\" +\n                        \"\u003cli\u003e\u003cfont color\u003d\u0027green\u0027\u003eAdded:\u003c/font\u003e BH \u0026 LMS kill counts listed.\u003c/li\u003e\" +\n                        \"\u003c/ul\u003e\" +\n\n                        \"\u003cb\u003eVersion 1.1\u003c/b\u003e\" +\n                        \"\u003cul style\u003d\u0027margin-left:0; padding-left:10px;\u0027\u003e\" +\n                        \"\u003cli\u003e\u003cfont color\u003d\u0027green\u0027\u003eAdded:\u003c/font\u003e Name Autocomplete to search function.\u003c/li\u003e\" +\n                        \"\u003cli\u003e\u003cfont color\u003d\u0027red\u0027\u003eRemoved:\u003c/font\u003e Save button in favour of FocusChanged Autosave.\u003c/li\u003e\" +\n                        \"\u003cli\u003e\u003cfont color\u003d\u0027green\u0027\u003eAdded:\u003c/font\u003e A note to inform users how autosave works if no player note is present.\u003c/li\u003e\" +\n                        \"\u003cli\u003e\u003cfont color\u003d\u0027orange\u0027\u003eFixed:\u003c/font\u003e Save space data corruption that comes from player names.\u003c/li\u003e\" +\n                        \"\u003cli\u003e\u003cfont color\u003d\u0027green\u0027\u003eAdded:\u003c/font\u003e Merged any duplicate notes using \\\"---\\\" as a splitter.\u003c/li\u003e\" +\n                        \"\u003c/ul\u003e\" +\n\n                        \"\u003cb\u003eVersion 1.2\u003c/b\u003e\" +\n                        \"\u003cul style\u003d\u0027margin-left:0; padding-left:10px;\u0027\u003e\" +\n                        \"\u003cli\u003e\u003cfont color\u003d\u0027green\u0027\u003eAdded:\u003c/font\u003e Tabs for a notes panel \u0026 target history panel.\u003c/li\u003e\" +\n                        \"\u003cli\u003e\u003cfont color\u003d\u0027green\u0027\u003eAdded:\u003c/font\u003e Buttons for Changelog (here), Discord, Github \u0026 Donations.\u003c/li\u003e\" +\n                        \"\u003cli\u003e\u003cfont color\u003d\u0027green\u0027\u003eAdded:\u003c/font\u003e History Log - tiles with player name, last seen \u0026 view in notes (eye icon).\u003c/li\u003e\" +\n                        \"\u003cli\u003e\u003cfont color\u003d\u0027green\u0027\u003eAdded:\u003c/font\u003e Right click support \\\"BH Lookup\\\" to show note \u0026 skills of players.\u003c/li\u003e\" +\n                        \"\u003cli\u003e\u003cfont color\u003d\u0027orange\u0027\u003eFixed:\u003c/font\u003e Issue where new lines or tabs were being removed from note data.\u003c/li\u003e\" +\n                        \"\u003cli\u003e\u003cfont color\u003d\u0027orange\u0027\u003eFixed:\u003c/font\u003e Issue where names had \\\"-\\\" or \\\"_\\\" characters removed.\u003c/li\u003e\" +\n                        \"\u003c/ul\u003e\" +\n                        \"\u003c/body\u003e\" +\n                        \"\u003c/html\u003e\";\n\n\n        changelogTextArea.setText(changelogHtml);\n\n        changelogPanel.add(changelogTextArea);\n        add(changelogPanel);\n\n    }\n\n    public void rebuild()\n    {\n        changelogPanel.removeAll();\n\n        changelogPanel.add(changelogTextArea);\n        add(changelogPanel);\n    }\n}\n","filePath":"src\\main\\java\\com\\BHPages\\BHP_changelogPanel.java"},{"fileName":"BHP_Config.java","content":"package com.BHPages;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"BH Pages\")\npublic interface BHP_Config extends Config\n{\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"virtualLevels\",\n\t\t\tname \u003d \"Display virtual levels\",\n\t\t\tdescription \u003d \"Display levels over 99 in the hiscore panel.\"\n\t)\n\tdefault boolean virtualLevels()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d \"autocomplete\",\n\t\t\tname \u003d \"Autocomplete\",\n\t\t\tdescription \u003d \"Predict names when typing a name to lookup.\"\n\t)\n\tdefault boolean autocomplete()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 3,\n\t\t\tkeyName \u003d \"playerOption\",\n\t\t\tname \u003d \"Player lookup option\",\n\t\t\tdescription \u003d \"Add BH Lookup option to players.\"\n\t)\n\tdefault boolean playerOption()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 4,\n\t\t\tkeyName \u003d \"bossPanel\",\n\t\t\tname \u003d \"Show boss kc on lookups\",\n\t\t\tdescription \u003d \"Add the boss kc panel below LMS/BH kc\"\n\t)\n\tdefault boolean bossPanel()\n\t{\n\t\treturn false;\n\t}\n\n}\n","filePath":"src\\main\\java\\com\\BHPages\\BHP_Config.java"},{"fileName":"BHP_donatorinfoPanel.java","content":"package com.BHPages;\n\nimport net.runelite.client.ui.ColorScheme;\n\nimport javax.swing.*;\nimport javax.swing.border.EmptyBorder;\nimport java.awt.*;\nimport java.awt.datatransfer.Clipboard;\nimport java.awt.datatransfer.StringSelection;\n\npublic class BHP_donatorinfoPanel extends JPanel\n{\n    private final JPanel donatorinfoPanel \u003d new JPanel();\n\n    public BHP_donatorinfoPanel()\n    {\n        setLayout(new BorderLayout());\n        setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n        // Main content panel\n        donatorinfoPanel.setLayout(new BoxLayout(donatorinfoPanel, BoxLayout.Y_AXIS));\n        donatorinfoPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n        donatorinfoPanel.setBorder(new EmptyBorder(10, 10, 10, 10));\n\n        addLabel(\"Thank you for any donations!\");\n\n        addSpacer();\n\n        addLabel(\"Crypto Wallet:\");\n        addLabel(\"0x18bcfffD1656B1dA70B\u003cbr\u003eE5f055B005c5848AEBBCC\");  //added \u003cbr\u003e to ensure its all displayed\n        addCopyButton(\"Copy Address\", \"0x18bcfffD1656B1dA70BE5f055B005c5848AEBBCC\");\n\n        addSpacer();\n\n        addLabel(\"Network:\");\n        addLabel(\"ERC20 (Ethereum)\");\n        addCopyButton(\"Copy Network\", \"ERC20\");\n\n        addSpacer();\n\n        addLabel(\"Buy me a coffee?\");\n        addLabel(\"https://coff.ee/un4gott3n\");\n        addCopyButton(\"Copy Coffee Link\", \"https://coff.ee/un4gott3n\");\n\n        addSpacer();\n\n        addLabel(\"Patreon:\");\n        addLabel(\"https://patreon.com/Un4gott3n\");\n        addCopyButton(\"Copy Patreon Link\", \"https://patreon.com/Un4gott3n\");\n\n        add(donatorinfoPanel, BorderLayout.CENTER);\n    }\n\n    private void addLabel(String htmlText)\n    {\n        JLabel label \u003d new JLabel(\"\u003chtml\u003e\" + htmlText + \"\u003c/html\u003e\");\n        label.setForeground(Color.LIGHT_GRAY);\n        label.setAlignmentX(Component.LEFT_ALIGNMENT);\n        label.setBorder(new EmptyBorder(0, 0, 4, 0));\n        donatorinfoPanel.add(label);\n    }\n\n    private void addCopyButton(String text, String content)\n    {\n        JButton copyButton \u003d new JButton(text);\n        copyButton.setToolTipText(\"Copy to clipboard\");\n        copyButton.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        copyButton.setAlignmentX(Component.LEFT_ALIGNMENT);\n        copyButton.addActionListener(e -\u003e copyToClipboard(content));\n        donatorinfoPanel.add(copyButton);\n    }\n\n    private void addSpacer()\n    {\n        donatorinfoPanel.add(Box.createVerticalStrut(10));\n    }\n\n    private void copyToClipboard(String text)\n    {\n        StringSelection str \u003d new StringSelection(text);\n        Clipboard clipboard \u003d Toolkit.getDefaultToolkit().getSystemClipboard();\n        clipboard.setContents(str, null);\n    }\n}\n","filePath":"src\\main\\java\\com\\BHPages\\BHP_donatorinfoPanel.java"},{"fileName":"BHP_HistoryPanel.java","content":"package com.BHPages;\nimport com.BHPages.session.IconHandler;\n\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.util.ImageUtil;\nimport net.runelite.client.util.LinkBrowser;\nimport net.runelite.client.util.SwingUtil;\n\nimport javax.inject.Inject;\nimport javax.swing.*;\nimport javax.swing.plaf.basic.BasicButtonUI;\nimport java.awt.*;\nimport java.util.List;\nimport java.util.LinkedList;\n\n\nclass BHP_HistoryPanel extends JPanel\n{\n    private final BHP_Plugin plugin;\n    private final BHP_changelogPanel BHPchangelog \u003d new BHP_changelogPanel();\n    private final BHP_donatorinfoPanel BHPdonator \u003d new BHP_donatorinfoPanel();\n\n    //buttons\n    private final JPanel buttonPanel;\n    private final JButton changelogBtn;\n    private final JButton githubpageBtn;\n    private final JButton discordnameBtn;\n    private final JButton donatorBtn;\n\n    //history panel\n    private final JPanel historyPanel;\n    class historyEntry //for usage with our history tiles.\n    {\n        final String playerName;\n        final String timeStamp;\n\n        historyEntry(String name, String time)\n        {\n            this.playerName \u003d name;\n            this.timeStamp \u003d time;\n        }\n    }\n    private final List\u003chistoryEntry\u003e historyEntryList \u003d new LinkedList\u003c\u003e();\n\n    private final JScrollPane scrollableContainer;\n\n    private static final ImageIcon CHANGELOG_ICON;\n    private static final ImageIcon GITHUB_ICON;\n    private static final ImageIcon DISCORD_ICON;\n    private static final ImageIcon DONATORADDR_ICON;\n\n\n    static\n    {\n        CHANGELOG_ICON \u003d IconHandler.CHANGELOG.getIcon(img -\u003e ImageUtil.resizeImage(img, 16, 16));\n        GITHUB_ICON \u003d IconHandler.GITHUB.getIcon(img -\u003e ImageUtil.resizeImage(img, 16, 16));\n        DISCORD_ICON \u003d IconHandler.DISCORD.getIcon(img -\u003e ImageUtil.resizeImage(img, 16, 16));\n        DONATORADDR_ICON \u003d IconHandler.DONATORADDR.getIcon(img -\u003e ImageUtil.resizeImage(img, 16, 16));\n    }\n\n    @Inject\n    BHP_HistoryPanel(BHP_Plugin plugin, BHP_changelogPanel BHPchangelog, BHP_donatorinfoPanel BHPdonator, BHP_Config BHPconfig)\n    {\n        this.plugin \u003d plugin;\n\n        setBorder(BorderFactory.createEmptyBorder(10, 0, 0, 0));\n        setBackground(ColorScheme.DARK_GRAY_COLOR);\n        setLayout(new BorderLayout(0, 5));\n\n        /* BUTTONS */\n        buttonPanel \u003d new JPanel();\n        buttonPanel.setLayout(new GridLayout(1, 3, 10, 0));\n        buttonPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n        changelogBtn \u003d new JButton();\n        SwingUtil.removeButtonDecorations(changelogBtn);\n        changelogBtn.setIcon(CHANGELOG_ICON);\n        changelogBtn.setToolTipText(\"Change Log\");\n        changelogBtn.setBackground(ColorScheme.DARK_GRAY_COLOR);\n        changelogBtn.setUI(new BasicButtonUI());\n        changelogBtn.addActionListener((ev) -\u003e {\n            BHPchangelog.rebuild();\n\n            if(changelogActive())\n            {\n                changelogBtn.setBackground(ColorScheme.LIGHT_GRAY_COLOR);\n                changelogClose();\n            }\n            else\n            {\n                changelogBtn.setBackground(ColorScheme.DARK_GRAY_COLOR);\n                changelogOpen();\n            }\n        });\n        changelogBtn.addMouseListener(new java.awt.event.MouseAdapter()\n        {\n            public void mouseEntered(java.awt.event.MouseEvent evt)\n            {\n                changelogBtn.setBackground(ColorScheme.DARK_GRAY_HOVER_COLOR);\n            }\n\n            public void mouseExited(java.awt.event.MouseEvent evt)\n            {\n                if(changelogActive())\n                {\n                    changelogBtn.setBackground(ColorScheme.LIGHT_GRAY_COLOR);\n                }\n                else\n                {\n                    changelogBtn.setBackground(ColorScheme.DARK_GRAY_HOVER_COLOR);\n                }\n            }\n        });\n\n        buttonPanel.add(changelogBtn);\n\n        githubpageBtn \u003d new JButton();\n        SwingUtil.removeButtonDecorations(githubpageBtn);\n        githubpageBtn.setIcon(GITHUB_ICON);\n        githubpageBtn.setToolTipText(\"Report issues or contribute on Github\");\n        githubpageBtn.setBackground(ColorScheme.DARK_GRAY_COLOR);\n        githubpageBtn.setUI(new BasicButtonUI());\n        githubpageBtn.addActionListener((ev) -\u003e LinkBrowser.browse(\"https://github.com/Un4gott3n/BH-Pages\"));\n        githubpageBtn.addMouseListener(new java.awt.event.MouseAdapter()\n        {\n            public void mouseEntered(java.awt.event.MouseEvent evt)\n            {\n                githubpageBtn.setBackground(ColorScheme.DARK_GRAY_HOVER_COLOR);\n            }\n\n            public void mouseExited(java.awt.event.MouseEvent evt)\n            {\n                githubpageBtn.setBackground(ColorScheme.DARK_GRAY_COLOR);\n            }\n        });\n\n        buttonPanel.add(githubpageBtn);\n\n        discordnameBtn \u003d new JButton();\n        SwingUtil.removeButtonDecorations(discordnameBtn);\n        discordnameBtn.setIcon(DISCORD_ICON);\n        discordnameBtn.setToolTipText(\"Join BH Pages Discord!\");\n        discordnameBtn.setBackground(ColorScheme.DARK_GRAY_COLOR);\n        discordnameBtn.setUI(new BasicButtonUI());\n        discordnameBtn.addActionListener((ev) -\u003e LinkBrowser.browse(\"https://discord.gg/E8Xu3QAps7\"));  //Offical BH Pages Discord\n        discordnameBtn.addMouseListener(new java.awt.event.MouseAdapter()\n        {\n            public void mouseEntered(java.awt.event.MouseEvent evt)\n            {\n                discordnameBtn.setBackground(ColorScheme.DARK_GRAY_HOVER_COLOR);\n            }\n\n            public void mouseExited(java.awt.event.MouseEvent evt)\n            {\n                discordnameBtn.setBackground(ColorScheme.DARK_GRAY_COLOR);\n            }\n        });\n        buttonPanel.add(discordnameBtn);\n\n        donatorBtn \u003d new JButton();\n        SwingUtil.removeButtonDecorations(donatorBtn);\n        donatorBtn.setIcon(DONATORADDR_ICON);\n        donatorBtn.setToolTipText(\"Any tips/donations appreciated\");\n        donatorBtn.setBackground(ColorScheme.DARK_GRAY_COLOR);\n        donatorBtn.setUI(new BasicButtonUI());\n        donatorBtn.addActionListener((ev) -\u003e {\n            if(donatorActive())\n            {\n                donatorBtn.setBackground(ColorScheme.LIGHT_GRAY_COLOR);\n                donatorClose();\n            }\n            else\n            {\n                donatorBtn.setBackground(ColorScheme.DARK_GRAY_COLOR);\n                donatorOpen();\n            }\n        });\n\n        donatorBtn.addMouseListener(new java.awt.event.MouseAdapter()\n        {\n            public void mouseEntered(java.awt.event.MouseEvent evt)\n            {\n                donatorBtn.setBackground(ColorScheme.DARK_GRAY_COLOR);\n            }\n\n            public void mouseExited(java.awt.event.MouseEvent evt)\n            {\n                if(donatorActive())\n                {\n                    donatorBtn.setBackground(ColorScheme.LIGHT_GRAY_COLOR);\n                }\n                else\n                {\n                    donatorBtn.setBackground(ColorScheme.DARK_GRAY_COLOR);\n                }\n            }\n        });\n\n        buttonPanel.add(donatorBtn);\n        /* BUTTONS END */\n\n        /* HISTORY PANEL */\n        historyPanel \u003d new JPanel();\n        historyPanel.setLayout(new BoxLayout(historyPanel, BoxLayout.Y_AXIS));\n        historyPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n        scrollableContainer \u003d new JScrollPane();\n        scrollableContainer.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);\n        scrollableContainer.getVerticalScrollBar().setUnitIncrement(12);\n        scrollableContainer.setBorder(null);\n        scrollableContainer.setViewportView(historyPanel); //default view\n        /* HISTORY PANEL END */\n\n        add(buttonPanel, BorderLayout.NORTH);\n        add(scrollableContainer, BorderLayout.CENTER);\n    }\n\n    private boolean changelogActive()\n    {\n        return scrollableContainer.getViewport().getView() \u003d\u003d BHPchangelog;\n    }\n    private boolean donatorActive()\n    {\n        return scrollableContainer.getViewport().getView() \u003d\u003d BHPdonator;\n    }\n\n    private void changelogClose()\n    {\n        scrollableContainer.setViewportView(historyPanel);\n        historyPanel.setVisible(true);\n\n        repaint();\n        revalidate();\n    }\n\n    private void donatorClose()\n    {\n        scrollableContainer.setViewportView(historyPanel);\n        historyPanel.setVisible(true);\n\n        repaint();\n        revalidate();\n    }\n\n    private void changelogOpen()\n    {\n        scrollableContainer.setViewportView(BHPchangelog);\n        historyPanel.setVisible(false);\n\n        repaint();\n        revalidate();\n    }\n\n    private void donatorOpen()\n    {\n        scrollableContainer.setViewportView(BHPdonator);\n        historyPanel.setVisible(false);\n\n        repaint();\n        revalidate();\n    }\n\n    public void addHistoryTile(String name, String datestamp)\n    {\n        if(datestamp.isEmpty())\n        {\n            return;\n        }\n\n        historyPanel.removeAll(); //delete all entries\n\n        historyEntryList.add(0, new historyEntry(name, datestamp)); //Add new entry to the top of the list\n\n        for(historyEntry entry : historyEntryList)\n        {\n            JPanel tile \u003d new historyTilePanel(entry.playerName, entry.timeStamp, this::triggerLookup);\n            historyPanel.add(tile);\n        }\n        repaint();\n        revalidate();\n\n    }\n\n    private void triggerLookup(String name)\n    {\n        plugin.lookupPlayerName(name, \"\"); //ensure new entry isn\u0027t added to history by passing blank datetime\n    }\n\n    public JPanel getHistoryPanel()\n    {\n        return historyPanel;\n    }\n\n\n}\n","filePath":"src\\main\\java\\com\\BHPages\\BHP_HistoryPanel.java"},{"fileName":"BHP_NotesPanel.java","content":"package com.BHPages;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport javax.swing.*;\nimport javax.swing.border.EmptyBorder;\n\nimport com.BHPages.session.SessionHandler;\nimport com.google.common.annotations.VisibleForTesting;\nimport com.google.common.collect.ImmutableList;\nimport com.google.common.base.Strings;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Experience;\nimport net.runelite.client.game.SpriteManager;\nimport net.runelite.client.hiscore.*;\n\nimport static net.runelite.api.SpriteID.TAB_COMBAT;\nimport static net.runelite.client.hiscore.HiscoreSkill.*;\n\n\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.components.IconTextField;\nimport net.runelite.client.util.ImageUtil;\n\nimport java.awt.*;\nimport java.awt.event.FocusAdapter;\nimport java.awt.event.FocusEvent;\nimport java.awt.event.KeyListener;\nimport java.awt.image.BufferedImage;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\nimport net.runelite.client.util.QuantityFormatter;\nimport org.apache.commons.lang3.StringUtils;\n\n@Slf4j\n@Singleton\npublic class BHP_NotesPanel extends JPanel\n{\n\n    private final BHP_Plugin BHPplugin;\n    private final BHP_Config BHPconfig;\n    private final NameAutocompleter nameAutocompleter;\n    private final HiscoreClient hiscoreClient;\n    private final SessionHandler sessionHandler;\n    //group to hold all the skill levels \u0026 cmb level\n    private final SpriteManager spriteManager;\n\n    //panel assets\n    private final JPanel BHP_NotesPanel \u003d new JPanel(new GridBagLayout());\n    private final IconTextField opp_nameText;\n    private final JButton opp_search_button;\n    private final JTextArea notesEditor;\n    private final JPanel totalPanel;\n    private final JPanel statsPanel;\n    private final JLabel surgePot;\n    private final JLabel surgeDash;\n    private final JLabel surgeNo;\n    private final JLabel surgeYes;\n    private final JPanel minigamePanel;\n    private final JPanel bosskcPanel;\n\n    //Runescape character usernames are limited to 12 chars\n    int MAX_USERNAME_LENGTH \u003d 12;\n\n    //Making string scope bigger for cleaner code\n    String autosaveMessage \u003d \"Click outside of the textbox to trigger AutoSave for your target notes!\";\n\n    // Not an enummap because we need null keys for combat\n    private final Map\u003cHiscoreSkill, JLabel\u003e skillLabels \u003d new HashMap\u003c\u003e();\n\n    //the skills to show\n    private static final List\u003cHiscoreSkill\u003e SKILLS \u003d ImmutableList.of(\n            ATTACK, HITPOINTS, MINING,\n            STRENGTH, AGILITY, SMITHING,\n            DEFENCE, HERBLORE, FISHING,\n            RANGED, THIEVING, COOKING,\n            PRAYER, CRAFTING, FIREMAKING,\n            MAGIC, FLETCHING, WOODCUTTING,\n            RUNECRAFT, SLAYER, FARMING,\n            CONSTRUCTION, HUNTER\n    );\n\n    //For the boss display panel, same order as hiscore\n    private static final List\u003cHiscoreSkill\u003e BOSSES \u003d ImmutableList.of(\n            ABYSSAL_SIRE, ALCHEMICAL_HYDRA, AMOXLIATL,\n            ARAXXOR, ARTIO, BARROWS_CHESTS,\n            BRYOPHYTA, CALLISTO, CALVARION,\n            CERBERUS, CHAMBERS_OF_XERIC, CHAMBERS_OF_XERIC_CHALLENGE_MODE,\n            CHAOS_ELEMENTAL, CHAOS_FANATIC, COMMANDER_ZILYANA,\n            CORPOREAL_BEAST, CRAZY_ARCHAEOLOGIST, DAGANNOTH_PRIME,\n            DAGANNOTH_REX, DAGANNOTH_SUPREME, DERANGED_ARCHAEOLOGIST,\n            DOOM_OF_MOKHAIOTL, DUKE_SUCELLUS, GENERAL_GRAARDOR,\n            GIANT_MOLE, GROTESQUE_GUARDIANS, HESPORI,\n            KALPHITE_QUEEN, KING_BLACK_DRAGON, KRAKEN,\n            KREEARRA, KRIL_TSUTSAROTH, LUNAR_CHESTS,\n            MIMIC, NEX, NIGHTMARE,\n            PHOSANIS_NIGHTMARE, OBOR, PHANTOM_MUSPAH,\n            SARACHNIS, SCORPIA, SCURRIUS,\n            SKOTIZO, SOL_HEREDIT, SPINDEL,\n            TEMPOROSS, THE_GAUNTLET, THE_CORRUPTED_GAUNTLET,\n            THE_HUEYCOATL, THE_LEVIATHAN, THE_ROYAL_TITANS,\n            THE_WHISPERER, THEATRE_OF_BLOOD, THEATRE_OF_BLOOD_HARD_MODE,\n            THERMONUCLEAR_SMOKE_DEVIL, TOMBS_OF_AMASCUT, TOMBS_OF_AMASCUT_EXPERT,\n            TZKAL_ZUK, TZTOK_JAD, VARDORVIS,\n            VENENATIS, VETION, VORKATH,\n            WINTERTODT, YAMA, ZALCANO,\n            ZULRAH\n    );\n\n    /* The currently selected endpoint */\n    private HiscoreEndpoint selectedEndPoint;\n\n    /* Used to prevent users from switching endpoint tabs while the results are loading */\n    private boolean loading \u003d false;\n\n    @Inject\n    BHP_NotesPanel(Client client,\n                   BHP_Plugin plugin,\n                   BHP_Config config,\n                   NameAutocompleter nameAutocompleter,\n                   HiscoreClient hiscoreClient,\n                   SessionHandler sessionHandler,\n                   SpriteManager spriteManager )\n    {\n        this.BHPplugin \u003d plugin;\n        this.BHPconfig \u003d config;\n        this.nameAutocompleter \u003d nameAutocompleter;\n        this.hiscoreClient \u003d hiscoreClient;\n        this.sessionHandler \u003d sessionHandler;\n        this.spriteManager \u003d spriteManager;\n\n        setBorder(BorderFactory.createEmptyBorder(10, 0, 0, 0));\n        setBackground(ColorScheme.DARK_GRAY_COLOR);\n        setLayout(new GridBagLayout());\n\n        GridBagConstraints c \u003d new GridBagConstraints();\n\n        c.insets \u003d new Insets(0, 0, 10, 0);\n\n        //player name / search bar\n        opp_nameText \u003d new IconTextField();\n        opp_nameText.setIcon(IconTextField.Icon.SEARCH);\n        opp_nameText.setPreferredSize(new Dimension(205,30));\n        opp_nameText.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        opp_nameText.setHoverBackgroundColor(ColorScheme.DARK_GRAY_HOVER_COLOR);\n        opp_nameText.setMinimumSize(new Dimension(0, 30));\n        opp_nameText.addActionListener(evt -\u003e\n        {\n            String searchName \u003d opp_nameText.getText();\n            lookup(searchName);\n        });\n        opp_nameText.addClearListener(() -\u003e\n        {\n            opp_nameText.setIcon(IconTextField.Icon.SEARCH);\n            opp_nameText.setEditable(true);\n\n        });\n        c.fill \u003d GridBagConstraints.HORIZONTAL;\n        c.weightx \u003d 1;\n        c.gridwidth \u003d 2;\n        c.gridx \u003d 0;\n        c.gridy \u003d 0;\n        add(opp_nameText, c);\n\n        //search button to display players\n        opp_search_button \u003d new JButton(\"Search\");\n        opp_search_button.addActionListener(evt -\u003e\n        {\n            String searchName \u003d opp_nameText.getText();\n            lookup(searchName);\n        });\n        c.weightx \u003d 1;\n        c.gridwidth \u003d 2;\n        c.fill \u003d GridBagConstraints.HORIZONTAL;\n        c.gridx \u003d 0;\n        c.gridy \u003d 1;\n        add(opp_search_button, c);\n\n        notesEditor \u003d new JTextArea();\n        notesEditor.setForeground(Color.WHITE);\n        notesEditor.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        notesEditor.setLineWrap(true);\n        notesEditor.setWrapStyleWord(true);\n        notesEditor.setTabSize(2);\n        notesEditor.setRows(7);\n        notesEditor.addFocusListener(new FocusAdapter()\n        {\n            @Override\n            public void focusGained(FocusEvent e)\n            {\n                String note \u003d notesEditor.getText();\n                if(note.equals(autosaveMessage))\n                {\n                    notesEditor.setForeground(Color.WHITE);\n                    notesEditor.setText(\"\");\n                }\n            }\n\n            @Override\n            public void focusLost(FocusEvent e)\n            {\n                String note \u003d notesEditor.getText();\n                String playerName \u003d opp_nameText.getText();\n\n                //ensure we aren\u0027t saving this message as the note\n                if(note.equals(autosaveMessage)) return;\n\n                if(!note.isEmpty() \u0026\u0026 !playerName.isEmpty())\n                {\n                    sessionHandler.updateNote(playerName, note);\n                    postSaveMsg(\"[+]BH Pages: Note for \" + playerName + \" has been updated.\");\n                }\n            }\n        });\n        c.weightx \u003d 1;\n        c.gridwidth \u003d 2;\n        c.fill \u003d GridBagConstraints.HORIZONTAL;\n        c.gridx \u003d 0;\n        c.gridy \u003d 2;\n        add(notesEditor, c);\n\n        //Display total combat level and combined levels on acc.\n        totalPanel \u003d new JPanel();\n        totalPanel.setLayout(new GridLayout(1, 2));\n        totalPanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\n        totalPanel.add(makeHiscorePanel(null)); //combat has no hiscore skill, referred to as null\n        totalPanel.add(makeHiscorePanel(OVERALL)); //total level holder\n\n        c.weightx \u003d 1;\n        c.gridwidth \u003d 2;\n        c.fill \u003d GridBagConstraints.HORIZONTAL;\n        c.gridx \u003d 0;\n        c.gridy \u003d 3;\n        add(totalPanel, c);\n\n        // Panel that holds skill icons\n        statsPanel \u003d new JPanel();\n        statsPanel.setLayout(new GridLayout(8, 3));\n        statsPanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        statsPanel.setBorder(new EmptyBorder(5, 0, 5, 0));\n\n        // For each skill on the ingame skill panel, create a Label and add it to the UI\n        for (HiscoreSkill skill : SKILLS)\n        {\n            JPanel panel \u003d makeHiscorePanel(skill);\n            statsPanel.add(panel);\n        }\n\n        c.weightx \u003d 1;\n        c.gridwidth \u003d 2;\n        c.fill \u003d GridBagConstraints.HORIZONTAL;\n        c.gridx \u003d 0;\n        c.gridy \u003d 4;\n        add(statsPanel, c);\n\n        //Can use a Surge pot?\n        surgePot \u003d new JLabel(\"Can use Surge Potion?\");\n        c.weightx \u003d 1;\n        c.gridwidth \u003d 1;\n        c.fill \u003d GridBagConstraints.HORIZONTAL;\n        c.gridx \u003d 0;\n        c.gridy \u003d 5;\n        add(surgePot, c);\n\n        //I draw all assets on screen with only dash visible on default state\n        //easier to turn on and off with setVisible() true/false later on when lookup() runs.\n        surgeDash \u003d new JLabel(\"-\", JLabel.CENTER);\n        surgeDash.setForeground(Color.white);\n        c.weightx \u003d 1;\n        c.gridwidth \u003d 1;\n        c.fill \u003d GridBagConstraints.HORIZONTAL;\n        c.gridx \u003d 1;\n        c.gridy \u003d 5;\n        add(surgeDash, c);\n\n        surgeNo \u003d new JLabel(\"No\", JLabel.CENTER);\n        surgeNo.setForeground(Color.red);\n        surgeNo.setVisible(false);\n        c.weightx \u003d 1;\n        c.gridwidth \u003d 1;\n        c.fill \u003d GridBagConstraints.HORIZONTAL;\n        c.gridx \u003d 1;\n        c.gridy \u003d 5;\n        add(surgeNo, c);\n\n        surgeYes \u003d new JLabel(\"Yes\", JLabel.CENTER);\n        surgeYes.setForeground(Color.green);\n        surgeYes.setVisible(false);\n        c.weightx \u003d 1;\n        c.gridwidth \u003d 1;\n        c.fill \u003d GridBagConstraints.HORIZONTAL;\n        c.gridx \u003d 1;\n        c.gridy \u003d 5;\n        add(surgeYes, c);\n\n        //panel to display LMS, BH Rouge (nontarget) \u0026 BH Hunter (target)\n        minigamePanel \u003d new JPanel();\n        minigamePanel.setLayout(new GridLayout(0, 3));\n        minigamePanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\n        minigamePanel.add(makeHiscorePanel(LAST_MAN_STANDING));\n        minigamePanel.add(makeHiscorePanel(BOUNTY_HUNTER_ROGUE));\n        minigamePanel.add(makeHiscorePanel(BOUNTY_HUNTER_HUNTER));\n\n        c.weightx \u003d 1;\n        c.gridwidth \u003d 2;\n        c.fill \u003d GridBagConstraints.HORIZONTAL;\n        c.gridx \u003d 0;\n        c.gridy \u003d 6;\n        add(minigamePanel, c);\n\n        bosskcPanel \u003d new JPanel();\n        bosskcPanel.setLayout(new GridLayout(0, 3));\n        bosskcPanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        bosskcPanel.setVisible(false); // set to invisible unless config changed.\n\n        // For each boss on the ingame boss panel, create a Label and add it to the UI\n        for (HiscoreSkill skill : BOSSES)\n        {\n            JPanel panel \u003d makeHiscorePanel(skill);\n            bosskcPanel.add(panel);\n        }\n\n        c.weightx \u003d 1;\n        c.gridwidth \u003d 2;\n        c.fill \u003d GridBagConstraints.HORIZONTAL;\n        c.gridx \u003d 0;\n        c.gridy \u003d 7;\n        add(bosskcPanel, c);\n\n\n        addInputKeyListener(nameAutocompleter);\n    }\n\n    void shutdown()\n    {\n        removeInputKeyListener(nameAutocompleter);\n    }\n//asset functions\n\n    public void lookup(String username)\n    {\n        opp_nameText.setText(username); //set the username in cases where playername is from BH chat message\n\n        String cleanUsername \u003d sanitize(username); //sanitize bad characters from the name before note search\n        String note \u003d sessionHandler.getNoteForPlayer(cleanUsername);\n        if(note.isEmpty())\n        {\n            notesEditor.setForeground(Color.GRAY);\n            notesEditor.setText(autosaveMessage);\n        }\n        else\n        {\n            notesEditor.setForeground(Color.WHITE);\n            notesEditor.setText(note);\n        }\n        lookup();\n    }\n\n    private void lookup()\n    {\n        final String lookup \u003d sanitize(opp_nameText.getText());\n\n        if(Strings.isNullOrEmpty(lookup))\n        {\n            return;\n        }\n\n        if(lookup.length() \u003e MAX_USERNAME_LENGTH)\n        {\n            opp_nameText.setIcon(IconTextField.Icon.ERROR);\n            loading \u003d false;\n            return;\n        }\n\n        repaint();\n\n        opp_nameText.setEditable(false);\n        opp_nameText.setIcon(IconTextField.Icon.LOADING_DARKER);\n        loading \u003d true;\n\n        for (Map.Entry\u003cHiscoreSkill, JLabel\u003e entry : skillLabels.entrySet())\n        {\n            HiscoreSkill skill \u003d entry.getKey();\n            JLabel label \u003d entry.getValue();\n            HiscoreSkillType skillType \u003d skill \u003d\u003d null ? HiscoreSkillType.SKILL : skill.getType();\n\n            label.setText(pad(\"--\", skillType));\n            label.setToolTipText(skill \u003d\u003d null ? \"Combat\" : skill.getName());\n        }\n\n        //set endpoint to normal (change later?)\n        selectedEndPoint \u003d HiscoreEndpoint.NORMAL;\n\n        hiscoreClient.lookupAsync(lookup, selectedEndPoint).whenCompleteAsync((result, ex) -\u003e\n                SwingUtilities.invokeLater(() -\u003e\n                {\n                    if (!sanitize(opp_nameText.getText()).equals(lookup))\n                    {\n                        // search has changed in the meantime\n                        return;\n                    }\n\n                    if (result \u003d\u003d null || ex !\u003d null)\n                    {\n                        if (ex !\u003d null)\n                        {\n                            postSaveMsg(\"Error fetching Hiscore data \" + ex.getMessage());\n                        }\n\n                        opp_nameText.setIcon(IconTextField.Icon.ERROR);\n                        opp_nameText.setEditable(true);\n                        loading \u003d false;\n                        return;\n                    }\n\n                    //successful player search\n                    opp_nameText.setIcon(IconTextField.Icon.SEARCH);\n                    opp_nameText.setEditable(true);\n                    loading \u003d false;\n\n                    applyHiscoreResult(result);\n                }));\n\n    }\n\n    private void applyHiscoreResult(HiscoreResult result)\n    {\n        assert SwingUtilities.isEventDispatchThread();\n        repaint();\n\n        nameAutocompleter.addToSearchHistory(result.getPlayer().toLowerCase());\n\n        for (Map.Entry\u003cHiscoreSkill, JLabel\u003e entry : skillLabels.entrySet())\n        {\n            HiscoreSkill skill \u003d entry.getKey();\n            JLabel label \u003d entry.getValue();\n            Skill s;\n\n            if (skill \u003d\u003d null)\n            {\n                if (result.getPlayer() !\u003d null)\n                {\n                    int combatLevel \u003d Experience.getCombatLevel(\n                            result.getSkill(ATTACK).getLevel(),\n                            result.getSkill(STRENGTH).getLevel(),\n                            result.getSkill(DEFENCE).getLevel(),\n                            result.getSkill(HITPOINTS).getLevel(),\n                            result.getSkill(MAGIC).getLevel(),\n                            result.getSkill(RANGED).getLevel(),\n                            result.getSkill(PRAYER).getLevel()\n                    );\n                    label.setText(Integer.toString(combatLevel));\n                }\n            }\n            else if ((s \u003d result.getSkill(skill)) !\u003d null)\n            {\n                final long exp \u003d s.getExperience();\n                final boolean isSkill \u003d skill.getType() \u003d\u003d HiscoreSkillType.SKILL;\n                int level \u003d -1;\n\n                if(result.getSkill(HERBLORE).getLevel() \u003e\u003d 81)\n                {\n                    surgeDash.setVisible(false);\n                    surgeNo.setVisible(false);\n                    surgeYes.setVisible(true);\n                }\n                else\n                {\n                    surgeDash.setVisible(false);\n                    surgeYes.setVisible(false);\n                    surgeNo.setVisible(true);\n                }\n\n                if (BHPconfig.virtualLevels() \u0026\u0026 isSkill \u0026\u0026 exp \u003e -1L)\n                {\n                    level \u003d Experience.getLevelForXp((int) exp);\n                }\n                else if (!isSkill || exp !\u003d -1L)\n                {\n                    // for skills, level is only valid if exp is not -1\n                    // otherwise level is always valid\n                    level \u003d s.getLevel();\n                }\n\n                if (level !\u003d -1)\n                {\n                    label.setText(pad(formatLevel(level), skill.getType()));\n                }\n            }\n\n            label.setToolTipText(detailsHtml(result, skill));\n        }\n    }\n\n    private JPanel makeHiscorePanel(HiscoreSkill skill)\n    {\n        HiscoreSkillType skillType \u003d skill \u003d\u003d null ? HiscoreSkillType.SKILL : skill.getType();\n\n        JLabel label \u003d new JLabel();\n        label.setToolTipText(skill \u003d\u003d null ? \"Combat\" : skill.getName());\n        label.setFont(FontManager.getRunescapeSmallFont());\n        label.setText(pad(\"--\", skillType));\n\n        spriteManager.getSpriteAsync(skill \u003d\u003d null ? TAB_COMBAT : skill.getSpriteId(), 0, (sprite) -\u003e\n                SwingUtilities.invokeLater(() -\u003e\n                {\n                    // Icons are all 25x25 or smaller, so they\u0027re fit into a 25x25 canvas to give them a consistent size for\n                    // better alignment. Further, they are then scaled down to 20x20 to not be overly large in the panel.\n                    final BufferedImage scaledSprite \u003d ImageUtil.resizeImage(ImageUtil.resizeCanvas(sprite, 25, 25), 20, 20);\n                    label.setIcon(new ImageIcon(scaledSprite));\n                }));\n\n        boolean totalLabel \u003d skill \u003d\u003d OVERALL || skill \u003d\u003d null; //overall or combat\n        label.setIconTextGap(totalLabel ? 10 : 4);\n\n        JPanel skillPanel \u003d new JPanel();\n        skillPanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        skillPanel.setBorder(new EmptyBorder(2, 0, 2, 0));\n        skillLabels.put(skill, label);\n        skillPanel.add(label);\n\n        return skillPanel;\n    }\n\n    void addInputKeyListener(KeyListener l)\n    {\n        this.opp_nameText.addKeyListener(l);\n    }\n\n    void removeInputKeyListener(KeyListener l)\n    {\n        this.opp_nameText.removeKeyListener(l);\n    }\n\n    private String detailsHtml(HiscoreResult result, HiscoreSkill skill)\n    {\n        String openingTags \u003d \"\u003chtml\u003e\u003cbody style \u003d \u0027padding: 5px;color:#989898\u0027\u003e\";\n        String closingTags \u003d \"\u003c/html\u003e\u003cbody\u003e\";\n\n        String content \u003d \"\";\n\n        if (skill \u003d\u003d null)\n        {\n            double combatLevel \u003d Experience.getCombatLevelPrecise(\n                    result.getSkill(ATTACK).getLevel(),\n                    result.getSkill(STRENGTH).getLevel(),\n                    result.getSkill(DEFENCE).getLevel(),\n                    result.getSkill(HITPOINTS).getLevel(),\n                    result.getSkill(MAGIC).getLevel(),\n                    result.getSkill(RANGED).getLevel(),\n                    result.getSkill(PRAYER).getLevel()\n            );\n\n            double combatExperience \u003d result.getSkill(ATTACK).getExperience()\n                    + result.getSkill(STRENGTH).getExperience() + result.getSkill(DEFENCE).getExperience()\n                    + result.getSkill(HITPOINTS).getExperience() + result.getSkill(MAGIC).getExperience()\n                    + result.getSkill(RANGED).getExperience() + result.getSkill(PRAYER).getExperience();\n\n            content +\u003d \"\u003cp\u003e\u003cspan style \u003d \u0027color:white\u0027\u003eCombat\u003c/span\u003e\u003c/p\u003e\";\n            content +\u003d \"\u003cp\u003e\u003cspan style \u003d \u0027color:white\u0027\u003eExact Combat Level:\u003c/span\u003e \" + QuantityFormatter.formatNumber(combatLevel) + \"\u003c/p\u003e\";\n            content +\u003d \"\u003cp\u003e\u003cspan style \u003d \u0027color:white\u0027\u003eExperience:\u003c/span\u003e \" + QuantityFormatter.formatNumber(combatExperience) + \"\u003c/p\u003e\";\n        }\n        else\n        {\n            switch (skill)\n            {\n                case CLUE_SCROLL_ALL:\n                {\n                    content +\u003d \"\u003cp\u003e\u003cspan style \u003d \u0027color:white\u0027\u003eClues\u003c/span\u003e\u003c/p\u003e\";\n                    content +\u003d buildClueLine(result, \"All\", CLUE_SCROLL_ALL);\n                    content +\u003d buildClueLine(result, \"Beginner\", CLUE_SCROLL_BEGINNER);\n                    content +\u003d buildClueLine(result, \"Easy\", CLUE_SCROLL_EASY);\n                    content +\u003d buildClueLine(result, \"Medium\", CLUE_SCROLL_MEDIUM);\n                    content +\u003d buildClueLine(result, \"Hard\", CLUE_SCROLL_HARD);\n                    content +\u003d buildClueLine(result, \"Elite\", CLUE_SCROLL_ELITE);\n                    content +\u003d buildClueLine(result, \"Master\", CLUE_SCROLL_MASTER);\n                    break;\n                }\n                case BOUNTY_HUNTER_ROGUE:\n                case BOUNTY_HUNTER_HUNTER:\n                case PVP_ARENA_RANK:\n                case LAST_MAN_STANDING:\n                case SOUL_WARS_ZEAL:\n                case RIFTS_CLOSED:\n                case COLOSSEUM_GLORY:\n                case COLLECTIONS_LOGGED:\n                {\n                    content +\u003d buildMinigameTooltip(result.getSkill(skill), skill);\n                    break;\n                }\n                case LEAGUE_POINTS:\n                {\n                    Skill leaguePoints \u003d result.getSkill(LEAGUE_POINTS);\n                    String rank \u003d (leaguePoints.getRank() \u003d\u003d -1) ? \"Unranked\" : QuantityFormatter.formatNumber(leaguePoints.getRank());\n                    content +\u003d \"\u003cp\u003e\u003cspan style \u003d \u0027color:white\u0027\u003eLeague Points\u003c/span\u003e\u003c/p\u003e\";\n                    content +\u003d \"\u003cp\u003e\u003cspan style \u003d \u0027color:white\u0027\u003eRank:\u003c/span\u003e \" + rank + \"\u003c/p\u003e\";\n                    if (leaguePoints.getLevel() \u003e -1)\n                    {\n                        content +\u003d \"\u003cp\u003e\u003cspan style \u003d \u0027color:white\u0027\u003ePoints:\u003c/span\u003e \" + QuantityFormatter.formatNumber(leaguePoints.getLevel()) + \"\u003c/p\u003e\";\n                    }\n                    break;\n                }\n                case OVERALL:\n                {\n                    Skill requestedSkill \u003d result.getSkill(skill);\n                    String rank \u003d (requestedSkill.getRank() \u003d\u003d -1) ? \"Unranked\" : QuantityFormatter.formatNumber(requestedSkill.getRank());\n                    String exp \u003d (requestedSkill.getExperience() \u003d\u003d -1L) ? \"Unranked\" : QuantityFormatter.formatNumber(requestedSkill.getExperience());\n                    content +\u003d \"\u003cp\u003e\u003cspan style \u003d \u0027color:white\u0027\u003e\" + skill.getName() + \"\u003c/span\u003e\u003c/p\u003e\";\n                    content +\u003d \"\u003cp\u003e\u003cspan style \u003d \u0027color:white\u0027\u003eRank:\u003c/span\u003e \" + rank + \"\u003c/p\u003e\";\n                    content +\u003d \"\u003cp\u003e\u003cspan style \u003d \u0027color:white\u0027\u003eExperience:\u003c/span\u003e \" + exp + \"\u003c/p\u003e\";\n                    break;\n                }\n                default:\n                {\n                    if (skill.getType() \u003d\u003d HiscoreSkillType.BOSS)\n                    {\n                        String rank \u003d \"Unranked\";\n                        String lvl \u003d null;\n                        Skill requestedSkill \u003d result.getSkill(skill);\n                        if (requestedSkill !\u003d null)\n                        {\n                            if (requestedSkill.getRank() \u003e -1)\n                            {\n                                rank \u003d QuantityFormatter.formatNumber(requestedSkill.getRank());\n                            }\n                            if (requestedSkill.getLevel() \u003e -1)\n                            {\n                                lvl \u003d QuantityFormatter.formatNumber(requestedSkill.getLevel());\n                            }\n                        }\n\n                        content +\u003d \"\u003cp\u003e\u003cspan style \u003d \u0027color:white\u0027\u003eBoss:\u003c/span\u003e \" + skill.getName() + \"\u003c/p\u003e\";\n                        content +\u003d \"\u003cp\u003e\u003cspan style \u003d \u0027color:white\u0027\u003eRank:\u003c/span\u003e \" + rank + \"\u003c/p\u003e\";\n                        if (lvl !\u003d null)\n                        {\n                            content +\u003d \"\u003cp\u003e\u003cspan style \u003d \u0027color:white\u0027\u003eKC:\u003c/span\u003e \" + lvl + \"\u003c/p\u003e\";\n                        }\n                    }\n                    else\n                    {\n                        Skill requestedSkill \u003d result.getSkill(skill);\n                        final long experience \u003d requestedSkill.getExperience();\n\n                        String rank \u003d (requestedSkill.getRank() \u003d\u003d -1) ? \"Unranked\" : QuantityFormatter.formatNumber(requestedSkill.getRank());\n                        String exp \u003d (experience \u003d\u003d -1L) ? \"Unranked\" : QuantityFormatter.formatNumber(experience);\n                        String remainingXp;\n                        if (experience \u003d\u003d -1L)\n                        {\n                            remainingXp \u003d \"Unranked\";\n                        }\n                        else\n                        {\n                            int currentLevel \u003d Experience.getLevelForXp((int) experience);\n                            remainingXp \u003d (currentLevel + 1 \u003c\u003d Experience.MAX_VIRT_LEVEL) ? QuantityFormatter.formatNumber(Experience.getXpForLevel(currentLevel + 1) - experience) : \"0\";\n                        }\n\n                        content +\u003d \"\u003cp\u003e\u003cspan style \u003d \u0027color:white\u0027\u003eSkill:\u003c/span\u003e \" + skill.getName() + \"\u003c/p\u003e\";\n                        content +\u003d \"\u003cp\u003e\u003cspan style \u003d \u0027color:white\u0027\u003eRank:\u003c/span\u003e \" + rank + \"\u003c/p\u003e\";\n                        content +\u003d \"\u003cp\u003e\u003cspan style \u003d \u0027color:white\u0027\u003eExperience:\u003c/span\u003e \" + exp + \"\u003c/p\u003e\";\n                        content +\u003d \"\u003cp\u003e\u003cspan style \u003d \u0027color:white\u0027\u003eRemaining XP:\u003c/span\u003e \" + remainingXp + \"\u003c/p\u003e\";\n                    }\n                    break;\n                }\n            }\n        }\n\n        // Add a html progress bar to the hover information\n        if (skill !\u003d null \u0026\u0026 skill.getType() \u003d\u003d HiscoreSkillType.SKILL)\n        {\n            long experience \u003d result.getSkill(skill).getExperience();\n            if (experience \u003e\u003d 0)\n            {\n                int currentXp \u003d (int) experience;\n                int currentLevel \u003d Experience.getLevelForXp(currentXp);\n                int xpForCurrentLevel \u003d Experience.getXpForLevel(currentLevel);\n                int xpForNextLevel \u003d currentLevel + 1 \u003c\u003d Experience.MAX_VIRT_LEVEL ? Experience.getXpForLevel(currentLevel + 1) : -1;\n\n                double xpGained \u003d currentXp - xpForCurrentLevel;\n                double xpGoal \u003d xpForNextLevel !\u003d -1 ? xpForNextLevel - xpForCurrentLevel : 100;\n                int progress \u003d (int) ((xpGained / xpGoal) * 100f);\n\n                // had to wrap the bar with an empty div, if i added the margin directly to the bar, it would mess up\n                content +\u003d \"\u003cdiv style \u003d \u0027margin-top:3px\u0027\u003e\"\n                        + \"\u003cdiv style \u003d \u0027background: #070707; border: 1px solid #070707; height: 6px; width: 100%;\u0027\u003e\"\n                        + \"\u003cdiv style \u003d \u0027height: 6px; width: \" + progress + \"%; background: #dc8a00;\u0027\u003e\"\n                        + \"\u003c/div\u003e\"\n                        + \"\u003c/div\u003e\"\n                        + \"\u003c/div\u003e\";\n            }\n        }\n\n        return openingTags + content + closingTags;\n    }\n\n    private static String buildMinigameTooltip(Skill s, HiscoreSkill hiscoreSkill)\n    {\n        String rank \u003d (s.getRank() \u003d\u003d -1) ? \"Unranked\" : QuantityFormatter.formatNumber(s.getRank());\n        String content \u003d \"\";\n        content +\u003d \"\u003cp\u003e\u003cspan style \u003d \u0027color:white\u0027\u003e\" + hiscoreSkill.getName() + \"\u003c/span\u003e\u003c/p\u003e\";\n        content +\u003d \"\u003cp\u003e\u003cspan style \u003d \u0027color:white\u0027\u003eRank:\u003c/span\u003e \" + rank + \"\u003c/p\u003e\";\n        if (s.getLevel() \u003e -1)\n        {\n            content +\u003d \"\u003cp\u003e\u003cspan style \u003d \u0027color:white\u0027\u003eScore:\u003c/span\u003e \" + QuantityFormatter.formatNumber(s.getLevel()) + \"\u003c/p\u003e\";\n        }\n        return content;\n    }\n\n    private static String buildClueLine(HiscoreResult result, String name, HiscoreSkill skill)\n    {\n        Skill sk \u003d result.getSkill(skill);\n        String count \u003d sk.getLevel() \u003d\u003d -1\n                ? \"0\"\n                : QuantityFormatter.formatNumber(sk.getLevel());\n        String rank \u003d sk.getRank() \u003d\u003d -1\n                ? \"Unranked\"\n                : QuantityFormatter.formatNumber(sk.getRank());\n        return \"\u003cp\u003e\u003cspan style \u003d \u0027color:white\u0027\u003e\" + name + \":\u003c/span\u003e \" + count + \" \u003cspan style \u003d \u0027color:white\u0027\u003eRank:\u003c/span\u003e \" + rank + \"\u003c/p\u003e\";\n    }\n\n    private static String sanitize(String lookup)\n    {\n        return lookup\n                .replace(\u0027\\u00A0\u0027, \u0027 \u0027);\n    }\n\n    @VisibleForTesting\n    static String formatLevel(int level)\n    {\n        if (level \u003c 10000)\n        {\n            return Integer.toString(level);\n        }\n        else\n        {\n            return (level / 1000) + \"k\";\n        }\n    }\n\n    private static String pad(String str, HiscoreSkillType type)\n    {\n        // Left pad label text to keep labels aligned\n        int pad \u003d type \u003d\u003d HiscoreSkillType.BOSS ? 4 : 2;\n        return StringUtils.leftPad(str, pad);\n    }\n\n\n    private void postSaveMsg(String msg)\n    {\n        BHPplugin.chatGameMessage(msg);\n    }\n\n    public void showBossPanel(Boolean option)\n    {\n        if(option)\n        {\n            bosskcPanel.setVisible(true);\n        }\n        else\n        {\n            bosskcPanel.setVisible(false);\n        }\n    }\n\n}\n","filePath":"src\\main\\java\\com\\BHPages\\BHP_NotesPanel.java"},{"fileName":"BHP_PanelContainer.java","content":"package com.BHPages;\n\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.PluginPanel;\nimport net.runelite.client.ui.components.materialtabs.MaterialTab;\nimport net.runelite.client.ui.components.materialtabs.MaterialTabGroup;\n\nimport javax.swing.*;\nimport javax.swing.border.EmptyBorder;\nimport java.awt.*;\nimport javax.inject.Inject;\n\nclass BHP_PanelContainer extends PluginPanel\n{\n    private final JPanel BHP_Panel \u003d new JPanel();\n\n    private final MaterialTabGroup tabGroup \u003d new MaterialTabGroup(BHP_Panel);\n    private final MaterialTab historyTab;\n    private final MaterialTab notesTab;\n\n\n    private final BHP_NotesPanel notesPanel;\n    //@Getter\n    private final BHP_HistoryPanel historyPanel;\n\n    @Inject\n    private  BHP_PanelContainer(BHP_NotesPanel notesPanel, BHP_HistoryPanel historyPanel)\n    {\n        this.notesPanel \u003d notesPanel;\n        this.historyPanel \u003d historyPanel;\n\n        setLayout(new BorderLayout(0,0));\n\n        setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n        notesTab \u003d new MaterialTab(\"Notes\", tabGroup, notesPanel);\n        historyTab \u003d new MaterialTab(\"History\", tabGroup, historyPanel);\n\n        tabGroup.setBorder(new EmptyBorder(10, 0, 0, 0));\n        tabGroup.addTab(notesTab);\n        tabGroup.addTab(historyTab);\n        tabGroup.select(notesTab);\n\n        add(tabGroup, BorderLayout.NORTH);\n        add(BHP_Panel, BorderLayout.CENTER);\n    }\n\n    void showHistory()\n    {\n        if(historyPanel.isShowing())\n        {\n            return;\n        }\n\n        tabGroup.select(historyTab);\n        revalidate();\n    }\n\n    void showNotes()\n    {\n        if(notesPanel.isShowing())\n        {\n            return;\n        }\n\n        tabGroup.select(notesTab);\n        revalidate();\n    }\n\n    public BHP_NotesPanel getNotesPanel()\n    {\n        return notesPanel;\n    }\n\n    public BHP_HistoryPanel getHistoryPanel(){ return historyPanel; }\n\n}\n","filePath":"src\\main\\java\\com\\BHPages\\BHP_PanelContainer.java"},{"fileName":"BHP_Plugin.java","content":"package com.BHPages;\n\nimport javax.inject.Inject;\nimport javax.inject.Provider;\nimport javax.swing.*;\n\nimport com.BHPages.session.SessionHandler;\n\nimport com.google.inject.Provides;\nimport lombok.extern.slf4j.Slf4j;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.MenuAction;\nimport net.runelite.api.Player;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.MenuEntryAdded;\nimport net.runelite.api.events.MenuOptionClicked;\nimport net.runelite.api.gameval.InterfaceID;\nimport net.runelite.api.widgets.WidgetUtil;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\n\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.hiscore.HiscoreEndpoint;\nimport net.runelite.client.menus.MenuManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.util.ImageUtil;\nimport net.runelite.client.util.Text;\n\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\n\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\nimport static net.runelite.api.ChatMessageType.GAMEMESSAGE;\n\n\n@Slf4j\n@PluginDescriptor(\n\t\tname \u003d \"BH Pages\",\n\t\tdescription \u003d \"Keep track of your opponents in Bounty Hunter.\",\n\t\ttags \u003d {\"Bounty\", \"Hunter\", \"bounty\", \"hunter\", \"BH\", \"bh\", \"pvp\"}\n)\n\npublic class BHP_Plugin extends Plugin {\n\n\tprivate static final String LOOKUP \u003d \"BH Lookup\";\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate Provider\u003cMenuManager\u003e menuManager;\n\n\t@Inject\n\tprivate ClientToolbar clientToolbar;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate BHP_Config config;\n\n\t@Inject\n\tprivate SessionHandler sessionHandler;\n\n\tprivate NavigationButton navButton;\n\tprivate BHP_NotesPanel BHPNotesPanel;\n\tprivate BHP_PanelContainer BHPPanelContainer;\n\tprivate BHP_HistoryPanel BHPHistoryPanel;\n\n\t//regex for opponent player name extraction (onChatMessage)\n\tprivate static final Pattern BOUNTY_PATTERN \u003d Pattern.compile(\"You have been assigned a new target: \u003ccol\u003d[0-9a-f]+\u003e(.*)\u003c/col\u003e\");\n\n\t//to be used in a debug message to trigger plugin.\n\t//Openmessage + name + Closemessage\n\t//Regex matcher for command in chat\n\tprivate final String gamemessagePlayerOpenString \u003d \"You have been assigned a new target: \u003ccol\u003de00a19\u003e\";\n\tprivate final String getGamemessagePlayerCloseString \u003d \"\u003c/col\u003e\";\n\tprivate static final Pattern BHPAGES_DEBUG_CMD \u003d Pattern.compile(\"^!Bhpages\\\\s+([A-Za-z0-9 ]{1,12})$\");\n\n\t@Provides\n\tBHP_Config provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(BHP_Config.class);\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tBHPPanelContainer \u003d injector.getInstance(BHP_PanelContainer.class);\n\t\tBHPNotesPanel \u003d BHPPanelContainer.getNotesPanel();\n\t\tBHPHistoryPanel \u003d BHPPanelContainer.getHistoryPanel();\n\n\t\tnavButton \u003d NavigationButton.builder()\n\t\t\t\t.tooltip(\"BH Pages\")\n\t\t\t\t.icon(ImageUtil.loadImageResource(getClass(), \"/BHP_Panel_Icon.png\"))\n\t\t\t\t.priority(99)\n\t\t\t\t.panel(BHPPanelContainer)\n\t\t\t\t.build();\n\n\t\tclientToolbar.addNavigation(navButton);\n\n\t\tif (config.playerOption())\n\t\t{\n\t\t\tmenuManager.get().addPlayerMenuItem(LOOKUP);\n\t\t}\n\n\t\tsessionHandler.loadNotes();\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception {\n\n\t\tsessionHandler.saveNotes();\n\t\tBHPNotesPanel.shutdown();\n\t\tclientToolbar.removeNavigation(navButton);\n\t\tmenuManager.get().removePlayerMenuItem(LOOKUP);\n\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif (event.getGroup().equals(\"BH Pages\"))\n\t\t{\n\t\t\t//remove these options to avoid duplicates\n\t\t\tmenuManager.get().removePlayerMenuItem(LOOKUP);\n\n\t\t\tif (config.playerOption())\n\t\t\t{\n\t\t\t\tmenuManager.get().addPlayerMenuItem(LOOKUP);\n\t\t\t}\n\n\t\t\tif(config.bossPanel())\n\t\t\t{\n\t\t\t\tBHPNotesPanel.showBossPanel(true);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBHPNotesPanel.showBossPanel(false);\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onMenuEntryAdded(MenuEntryAdded event)\n\t{\n\t\tif ((event.getType() !\u003d MenuAction.CC_OP.getId() \u0026\u0026 event.getType() !\u003d MenuAction.CC_OP_LOW_PRIORITY.getId()) || !config.playerOption())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal String option \u003d event.getOption();\n\t\tfinal int componentId \u003d event.getActionParam1();\n\t\tfinal int groupId \u003d WidgetUtil.componentToInterface(componentId);\n\n\t\tif (groupId \u003d\u003d InterfaceID.FRIENDS \u0026\u0026 option.equals(\"Delete\")\n\t\t\t\t|| groupId \u003d\u003d InterfaceID.CHATCHANNEL_CURRENT \u0026\u0026 (option.equals(\"Add ignore\") || option.equals(\"Remove friend\"))\n\t\t\t\t|| groupId \u003d\u003d InterfaceID.CHATBOX \u0026\u0026 (option.equals(\"Add ignore\") || option.equals(\"Message\"))\n\t\t\t\t|| groupId \u003d\u003d InterfaceID.IGNORE \u0026\u0026 option.equals(\"Delete\")\n\t\t\t\t|| (componentId \u003d\u003d InterfaceID.ClansSidepanel.PLAYERLIST || componentId \u003d\u003d InterfaceID.ClansGuestSidepanel.PLAYERLIST) \u0026\u0026 (option.equals(\"Add ignore\") || option.equals(\"Remove friend\"))\n\t\t\t\t|| groupId \u003d\u003d InterfaceID.PM_CHAT \u0026\u0026 (option.equals(\"Add ignore\") || option.equals(\"Message\"))\n\t\t\t\t|| groupId \u003d\u003d InterfaceID.GIM_SIDEPANEL \u0026\u0026 (option.equals(\"Add friend\") || option.equals(\"Remove friend\") || option.equals(\"Remove ignore\"))\n\t\t)\n\t\t{\n\t\t\tclient.createMenuEntry(-2)\n\t\t\t\t\t.setOption(LOOKUP)\n\t\t\t\t\t.setTarget(event.getTarget())\n\t\t\t\t\t.setType(MenuAction.RUNELITE)\n\t\t\t\t\t.setIdentifier(event.getIdentifier())\n\t\t\t\t\t.onClick(e -\u003e\n\t\t\t\t\t{\n\t\t\t\t\t\tString target \u003d Text.removeTags(e.getTarget());\n\t\t\t\t\t\tif(target.isEmpty())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlookupPlayerName(target, \"\");\n\n\t\t\t\t\t});\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOptionClicked(MenuOptionClicked event)\n\t{\n\t\tif (event.getMenuAction() \u003d\u003d MenuAction.RUNELITE_PLAYER \u0026\u0026 event.getMenuOption().equals(LOOKUP))\n\t\t{\n\t\t\tPlayer player \u003d event.getMenuEntry().getPlayer();\n\t\t\tif (player \u003d\u003d null)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tString target \u003d player.getName();\n\t\t\t\n\t\t\tlookupPlayerName(target, \"\"); //blank datetime to ensure history is NOT added.\n\t\t}\n\t}\n\n\t@Subscribe(priority \u003d -2) // run after ChatMessageManager\n\tpublic void onChatMessage(ChatMessage chatMessage)\n\t{\n\t\tif (chatMessage.getType() \u003d\u003d GAMEMESSAGE)\n\t\t{\n\t\t\tString date_t \u003d getCurrentTimestamp();\n\t\t\tString message \u003d chatMessage.getMessage();\n\t\t\tMatcher match \u003d BOUNTY_PATTERN.matcher(message);\n\t\t\tif (match.matches())\n\t\t\t{\n\t\t\t\tlookupPlayerName(match.group(1), date_t);\n\t\t\t}\n\t\t}\n\n\t}\n\n\tvoid lookupPlayerName(String playerName, String datetime)\n\t{\n\t\tSwingUtilities.invokeLater(() -\u003e\n\t\t{\n\t\t\tclientToolbar.openPanel(navButton);\n\t\t\tBHPPanelContainer.showNotes();\n\t\t\tBHPNotesPanel.lookup(playerName);\n\t\t\tBHPHistoryPanel.addHistoryTile(playerName, datetime);\n\t\t});\n\t}\n\n\tHiscoreEndpoint getWorldEndpoint()\n\t{\n\t\treturn HiscoreEndpoint.fromWorldTypes(client.getWorldType());\n\t}\n\n\tvoid chatGameMessage(String message) //function without\n\t{\n\t\tclientThread.invokeLater(() -\u003e\n\t\t{\n\t\t\tclient.addChatMessage(GAMEMESSAGE, \"\", message, null);\n\t\t});\n\n\t}\n\n\n\n\tprivate String getCurrentTimestamp()\n\t{\n\t\tString format \u003d \"MMM/dd HH:mm\";\n\t\tSimpleDateFormat dateFormat \u003d new SimpleDateFormat(format);\n\t\treturn dateFormat.format(new Date());\n\t}\n}","filePath":"src\\main\\java\\com\\BHPages\\BHP_Plugin.java"},{"fileName":"historyTilePanel.java","content":"package com.BHPages;\n\nimport com.BHPages.session.IconHandler;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.util.ImageUtil;\n\nimport javax.swing.*;\nimport javax.swing.border.EmptyBorder;\nimport javax.swing.border.MatteBorder;\nimport java.awt.*;\nimport java.util.function.Consumer;\n\npublic class historyTilePanel extends JPanel\n{\n\n    private final JPanel topLine;\n    private final JPanel controlLine;\n    private final JLabel playerName;\n    private final JLabel dateTime;\n    private final JButton lookupButton;\n\n    private static final ImageIcon EYE_ICON;\n\n    static\n    {\n        EYE_ICON \u003d IconHandler.EYEICON.getIcon(img -\u003e ImageUtil.resizeImage(img, 16, 16));\n    }\n\n\n    historyTilePanel(String name, String date, Consumer\u003cString\u003e onLookup)\n    {\n        setLayout(new BorderLayout());\n        setBorder(new EmptyBorder(3, 2, 3, 2));\n\n        topLine \u003d new JPanel(new BorderLayout());\n        topLine.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        topLine.setBorder(new EmptyBorder(2, 4, 1, 4));\n        add(topLine, BorderLayout.NORTH);\n\n        playerName \u003d new JLabel(name);\n        playerName.setForeground(Color.WHITE);\n        playerName.setFont(playerName.getFont().deriveFont(Font.BOLD));\n        topLine.add(playerName, BorderLayout.WEST);\n\n        controlLine \u003d new JPanel(new BorderLayout());\n        controlLine.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        controlLine.setBorder(new MatteBorder(1, 0, 0, 0, ColorScheme.DARK_GRAY_COLOR));\n        add(controlLine, BorderLayout.SOUTH);\n\n        lookupButton \u003d new JButton();\n        lookupButton.setIcon(EYE_ICON);\n        lookupButton.setPreferredSize(new Dimension(22, 22));\n        lookupButton.setToolTipText(\"Lookup player in Notes tab\");\n        lookupButton.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        lookupButton.setFocusable(false);\n        lookupButton.setBorderPainted(false);\n        lookupButton.setContentAreaFilled(false);\n        lookupButton.setOpaque(false);\n        lookupButton.addActionListener(e -\u003e\n                SwingUtilities.invokeLater(() -\u003e onLookup.accept(name))\n        );\n\n        controlLine.add(lookupButton, BorderLayout.WEST);\n\n        dateTime \u003d new JLabel(\"Last Seen: \" + date);\n        dateTime.setForeground(Color.LIGHT_GRAY);\n        controlLine.add(dateTime, BorderLayout.EAST);\n    }\n\n}\n","filePath":"src\\main\\java\\com\\BHPages\\historyTilePanel.java"},{"fileName":"IconHandler.java","content":"package com.BHPages.session;\n\nimport com.BHPages.BHP_Plugin;\nimport net.runelite.client.util.ImageUtil;\n\nimport javax.annotation.Nonnull;\nimport javax.swing.*;\nimport java.awt.image.BufferedImage;\nimport java.util.function.UnaryOperator;\n\npublic enum IconHandler\n{\n    CHANGELOG(\"/changelog.png\"),\n    GITHUB(\"/github.png\"),\n    DISCORD(\"/discord.png\"),\n    DONATORADDR(\"/bitcoin_clear.png\"),\n    EYEICON(\"/eye_icon.png\");\n\n    private final String file;\n\n    IconHandler(String file)\n    {\n        this.file \u003d file;\n    }\n\n    public BufferedImage getImage()\n    {\n        return ImageUtil.loadImageResource(BHP_Plugin.class, file);\n    }\n\n    public ImageIcon getIcon()\n    {\n        return getIcon(UnaryOperator.identity());\n    }\n\n    public ImageIcon getIcon(@Nonnull UnaryOperator\u003cBufferedImage\u003e func)\n    {\n        BufferedImage img \u003d func.apply(getImage());\n        return new ImageIcon(img);\n    }\n}\n","filePath":"src\\main\\java\\com\\BHPages\\session\\IconHandler.java"},{"fileName":"SessionHandler.java","content":"package com.BHPages.session;\n\nimport com.google.gson.Gson;\nimport com.google.gson.reflect.TypeToken;\nimport net.runelite.client.RuneLite;\n\nimport javax.inject.Inject;\nimport java.io.*;\nimport java.lang.reflect.Type;\nimport java.nio.charset.StandardCharsets;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class SessionHandler\n{\n    private static final String FILE_NAME \u003d \"player_notes.json\";\n    private final File notesFile;\n    private final Gson gson;\n    private Map\u003cString, String\u003e playerNotes \u003d new HashMap\u003c\u003e();\n\n    @Inject\n    public SessionHandler(Gson gson)\n    {\n        this.gson \u003d gson;\n\n        File pluginDir \u003d new File(RuneLite.RUNELITE_DIR, \"bhpages\");\n        if (!pluginDir.exists())\n        {\n            pluginDir.mkdirs();\n        }\n\n        this.notesFile \u003d new File(pluginDir, FILE_NAME);\n        loadNotes(); // Load on init\n    }\n\n    public void loadNotes()\n    {\n        if (!notesFile.exists()) return;\n\n        try (Reader reader \u003d new InputStreamReader(new FileInputStream(notesFile), StandardCharsets.UTF_8))\n        {\n            Type type \u003d new TypeToken\u003cMap\u003cString, String\u003e\u003e() {}.getType();\n            Map\u003cString, String\u003e rawNotes \u003d gson.fromJson(reader, type);\n\n            boolean changed \u003d false;\n            Map\u003cString, String\u003e cleaned \u003d new HashMap\u003c\u003e();\n\n            for (Map.Entry\u003cString, String\u003e entry : rawNotes.entrySet())\n            {\n                String rawName \u003d entry.getKey();\n                String rawNote \u003d entry.getValue();\n\n                String cleanName \u003d sanitize(rawName);\n                String cleanNote \u003d sanitizeNote(rawNote);\n\n                if (cleaned.containsKey(cleanName))\n                {\n                    String existingNote \u003d cleaned.get(cleanName);\n\n                    // Merge if note is different and not already part of the current one\n                    if (!existingNote.equals(cleanNote) \u0026\u0026 !cleanNote.isEmpty())\n                    {\n                        if (!existingNote.toLowerCase().contains(cleanNote.toLowerCase()))\n                        {\n                            String mergedNote \u003d existingNote + \" --- \" + cleanNote;\n                            cleaned.put(cleanName, mergedNote);\n                            changed \u003d true;\n                        }\n                    }\n                }\n                else\n                {\n                    cleaned.put(cleanName, cleanNote);\n                    if (!cleanName.equals(rawName) || !cleanNote.equals(rawNote))\n                    {\n                        changed \u003d true;\n                    }\n                }\n            }\n\n            this.playerNotes \u003d cleaned;\n\n            if (changed)\n            {\n                saveNotes(); // Re-save fixed file\n            }\n        }\n        catch (IOException e)\n        {\n            e.printStackTrace();\n        }\n    }\n\n\n    public void saveNotes()\n    {\n        try (Writer writer \u003d new OutputStreamWriter(new FileOutputStream(notesFile), StandardCharsets.UTF_8))\n        {\n            gson.toJson(playerNotes, writer);\n        }\n        catch (IOException e)\n        {\n            e.printStackTrace();\n        }\n    }\n\n    public Map\u003cString, String\u003e getAllNotes()\n    {\n        return new HashMap\u003c\u003e(playerNotes);\n    }\n\n    public String getNoteForPlayer(String playerName)\n    {\n        return playerNotes.getOrDefault(playerName, \"\");\n    }\n\n    private String sanitize(String input)\n    {\n        if (input \u003d\u003d null)\n        {\n            return \"\";\n        }\n\n        return input\n                .replace(\u0027\\uFFFD\u0027, \u0027 \u0027)             // Replace the replacement character with a space\n                .replace(\u0027\\u00A0\u0027, \u0027 \u0027)             // Replace non-breaking spaces with regular space\n                .replaceAll(\"[^-A-Za-z0-9_ ]\", \"\")     // Keep \"-\" char, A-Z, a-z, 0-9, underscore and spaces only\n                .replaceAll(\"\\\\s{2,}\", \" \")          // Collapse multiple spaces into a single space\n                .trim();\n    }\n\n    private String sanitizeNote(String note)\n    {\n        if (note \u003d\u003d null)\n        {\n            return \"\";\n        }\n\n        return note\n                .replace(\u0027\\u00A0\u0027, \u0027 \u0027)   // Replace non-breaking space\n                .replaceAll(\"[\\\\p{C}\u0026\u0026[^\\\\n\\\\t]]\", \"\") // Remove control characters\n                //.replaceAll(\"\\\\p{C}\", \"\") // Remove control characters\n                .trim();\n    }\n\n\n    public void updateNote(String playerName, String note)\n    {\n        playerName \u003d sanitize(playerName);\n        note \u003d sanitizeNote(note);\n\n        if (note.isEmpty())\n        {\n            playerNotes.remove(playerName);\n        }\n        else\n        {\n            playerNotes.put(playerName, note);\n        }\n\n        saveNotes();\n    }\n\n}\n","filePath":"src\\main\\java\\com\\BHPages\\session\\SessionHandler.java"},{"fileName":"BHP_PluginTest.java","content":"package com.BHPages;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class BHP_PluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(BHP_Plugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\BHPages\\BHP_PluginTest.java"}]},{"commit":"84d0102835e69bfb00aac89eb5ed20eea9fb3f0d","repository":"https://github.com/pwatts6060/runelite-plugins.git","internalName":"ent-trimmer","files":[{"fileName":"DiscordWebhook.java","content":"package com.ent.discord;\n\nimport com.ent.EntConfig;\nimport com.google.common.base.Strings;\nimport java.awt.image.BufferedImage;\nimport java.io.ByteArrayOutputStream;\nimport java.io.IOException;\nimport javax.imageio.ImageIO;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.client.ui.DrawManager;\nimport static net.runelite.http.api.RuneLiteAPI.GSON;\nimport okhttp3.Call;\nimport okhttp3.Callback;\nimport okhttp3.HttpUrl;\nimport okhttp3.MediaType;\nimport okhttp3.MultipartBody;\nimport okhttp3.OkHttpClient;\nimport okhttp3.Request;\nimport okhttp3.RequestBody;\nimport okhttp3.Response;\n\n@Slf4j\npublic class DiscordWebhook\n{\n\tprivate final Client client;\n\tprivate final EntConfig config;\n\tprivate OkHttpClient okHttpClient;\n\tprivate DrawManager drawManager;\n\n\t@Inject\n\tDiscordWebhook(Client client, EntConfig config, OkHttpClient okHttpClient, DrawManager drawManager) {\n\t\tthis.client \u003d client;\n\t\tthis.config \u003d config;\n\t\tthis.okHttpClient \u003d okHttpClient;\n\t\tthis.drawManager \u003d drawManager;\n\t}\n\n\tpublic void sendWebhook(DiscordWebhookBody discordWebhookBody, boolean sendScreenshot)\n\t{\n\t\tString configUrl \u003d config.discordWebhookUrl();\n\t\tif (Strings.isNullOrEmpty(configUrl)) { return; }\n\n\t\tHttpUrl url \u003d HttpUrl.parse(configUrl);\n\t\tMultipartBody.Builder requestBodyBuilder \u003d new MultipartBody.Builder()\n\t\t\t.setType(MultipartBody.FORM)\n\t\t\t.addFormDataPart(\"payload_json\", GSON.toJson(discordWebhookBody));\n\n\t\tif (sendScreenshot)\n\t\t{\n\t\t\tsendWebhookWithScreenshot(url, requestBodyBuilder);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tbuildRequestAndSend(url, requestBodyBuilder);\n\t\t}\n\t}\n\n\tvoid sendWebhookWithScreenshot(HttpUrl url, MultipartBody.Builder requestBodyBuilder)\n\t{\n\t\tdrawManager.requestNextFrameListener(image -\u003e\n\t\t{\n\t\t\tBufferedImage bufferedImage \u003d (BufferedImage) image;\n\t\t\tbyte[] imageBytes;\n\t\t\ttry\n\t\t\t{\n\t\t\t\timageBytes \u003d convertImageToByteArray(bufferedImage);\n\t\t\t}\n\t\t\tcatch (IOException e)\n\t\t\t{\n\t\t\t\tlog.warn(\"Error converting image to byte array\", e);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\trequestBodyBuilder.addFormDataPart(\"file\", \"image.png\",\n\t\t\t\tRequestBody.create(MediaType.parse(\"image/png\"), imageBytes));\n\t\t\tbuildRequestAndSend(url, requestBodyBuilder);\n\t\t});\n\t}\n\n\tprivate void buildRequestAndSend(HttpUrl url, MultipartBody.Builder requestBodyBuilder)\n\t{\n\t\tRequestBody requestBody \u003d requestBodyBuilder.build();\n\t\tRequest request \u003d new Request.Builder()\n\t\t\t.url(url)\n\t\t\t.post(requestBody)\n\t\t\t.build();\n\t\tsendRequest(request);\n\t}\n\n\tprivate void sendRequest(Request request)\n\t{\n\t\tokHttpClient.newCall(request).enqueue(new Callback()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void onFailure(Call call, IOException e)\n\t\t\t{\n\t\t\t\tlog.debug(\"Error submitting webhook\", e);\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void onResponse(Call call, Response response) throws IOException\n\t\t\t{\n\t\t\t\tresponse.close();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate static byte[] convertImageToByteArray(BufferedImage bufferedImage) throws IOException\n\t{\n\t\tByteArrayOutputStream byteArrayOutputStream \u003d new ByteArrayOutputStream();\n\t\tsynchronized (ImageIO.class)\n\t\t{\n\t\t\tImageIO.write(bufferedImage, \"png\", byteArrayOutputStream);\n\t\t}\n\t\treturn byteArrayOutputStream.toByteArray();\n\t}\n\n}\n","filePath":"src\\main\\java\\com\\ent\\discord\\DiscordWebhook.java"},{"fileName":"DiscordWebhookBody.java","content":"package com.ent.discord;\n\nimport lombok.Data;\n\n@Data\npublic\nclass DiscordWebhookBody\n{\n\tprivate String content;\n\tprivate Embed embed;\n\n\t@Data\n\tstatic class Embed\n\t{\n\t\tfinal UrlEmbed image;\n\t}\n\n\t@Data\n\tstatic class UrlEmbed\n\t{\n\t\tfinal String url;\n\t}\n}","filePath":"src\\main\\java\\com\\ent\\discord\\DiscordWebhookBody.java"},{"fileName":"Ent.java","content":"package com.ent;\n\nimport net.runelite.api.NPC;\nimport net.runelite.api.NpcID;\n\npublic class Ent\n{\n\tpublic int trims;\n\tpublic TrimType trimType;\n\tpublic boolean perfect;\n\tpublic NPC npc;\n\n\tpublic Ent(NPC npc)\n\t{\n\t\tthis.trims \u003d 0;\n\t\tthis.trimType \u003d null;\n\t\tthis.npc \u003d npc;\n\t\tthis.perfect \u003d npc.getId() \u003d\u003d NpcID.PRUNED_ENTLING;\n\t}\n}\n","filePath":"src\\main\\java\\com\\ent\\Ent.java"},{"fileName":"EntClassification.java","content":"package com.ent;\n\npublic enum EntClassification\n{\n\tPERFECT,\n\tPRIORITY,\n\tNONPRIORITY,\n\t;\n}\n","filePath":"src\\main\\java\\com\\ent\\EntClassification.java"},{"fileName":"EntConfig.java","content":"package com.ent;\n\nimport java.awt.Color;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\n\n@ConfigGroup(\"ent-trimmer\")\npublic interface EntConfig extends Config\n{\n\t@ConfigItem(\n\t\tkeyName \u003d \"highlightPriority\",\n\t\tname \u003d \"Highlight Priority Ents\",\n\t\tdescription \u003d \"Established priority order is Top/Mullet/Back and Sides/Back. Top cuts first, then back cuts.\",\n\t\tposition \u003d 0\n\t)\n\tdefault boolean highlightPriority()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"priorityColor\",\n\t\tname \u003d \"Priority Highlight Color\",\n\t\tdescription \u003d \"The color to highlight the priority ents\",\n\t\tposition \u003d 1\n\t)\n\tdefault Color priorityColor()\n\t{\n\t\treturn Color.CYAN;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"hideNonPriority\",\n\t\tname \u003d \"Hide Non-Priority Ents\",\n\t\tdescription \u003d \"Hide the NPCs so non-priority ents can\u0027t be clicked until priority ents are perfect. No ents are hidden until you cut at least one.\",\n\t\tposition \u003d 2\n\t)\n\tdefault boolean hideNonPriority()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"hidePerfect\",\n\t\tname \u003d \"Hide Perfect Ents\",\n\t\tdescription \u003d \"Hide the NPCs so non-priority ents can\u0027t be clicked until priority ents are perfect. No ents are hidden until you cut at least one.\",\n\t\tposition \u003d 3\n\t)\n\tdefault boolean hidePerfect()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"displayCutOption\",\n\t\tname \u003d \"Display Trim options\",\n\t\tdescription \u003d \"Display the correct trim options above ents\",\n\t\tposition \u003d 4\n\t)\n\tdefault boolean displayTrimOptions()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"displayTrimCount\",\n\t\tname \u003d \"Display Trim Count\",\n\t\tdescription \u003d \"Display the number of total trims above ents\",\n\t\tposition \u003d 5\n\t)\n\tdefault boolean displayTrimCount()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"displayTextOnHiddenEnts\",\n\t\tname \u003d \"Display Text on Hidden Ents\",\n\t\tdescription \u003d \"Whether to keep the text display above hidden ents\",\n\t\tposition \u003d 7\n\t)\n\tdefault boolean displayTextOnHiddenEnts()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigSection(\n\t\tname \u003d \"Advanced\",\n\t\tdescription \u003d \"Advanced settings that can be safely ignored\",\n\t\tposition \u003d 8,\n\t\tclosedByDefault \u003d true\n\t)\n\tString advanced \u003d \"Advanced\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"discordWebhook\",\n\t\tname \u003d \"Discord webhook url\",\n\t\tdescription \u003d \"Webhook to post ent statistics too\",\n\t\tsection \u003d advanced,\n\t\tposition \u003d 9\n\t)\n\tdefault String discordWebhookUrl()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"includeScreenshot\",\n\t\tname \u003d \"Include Screenshot\",\n\t\tdescription \u003d \"Whether to post an ingame screenshot for webhook posts\",\n\t\tsection \u003d advanced,\n\t\tposition \u003d 10\n\t)\n\tdefault boolean includeScreenshot()\n\t{\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\com\\ent\\EntConfig.java"},{"fileName":"EntOverlay2D.java","content":"package com.ent;\n\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.LineComponent;\nimport net.runelite.client.ui.overlay.components.TitleComponent;\n\npublic class EntOverlay2D extends OverlayPanel\n{\n\tprivate final Client client;\n\tprivate final EntPlugin plugin;\n\tprivate final EntConfig config;\n\n\t@Inject\n\tprivate EntOverlay2D(Client client, EntPlugin plugin, EntConfig config)\n\t{\n\t\tthis.setPosition(OverlayPosition.BOTTOM_LEFT);\n\t\tthis.client \u003d client;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (plugin.entStats.ents.isEmpty()) {\n\t\t\treturn null;\n\t\t}\n\n\t\tpanelComponent.getChildren().add(TitleComponent.builder().text(\"Ent Trimmer\").build());\n\t\tlong perfectCuts \u003d plugin.entStats.getPerfectCutCount();\n\t\tpanelComponent.getChildren().add(\n\t\t\tLineComponent.builder().left(\"Perfectly Cut: \").right(perfectCuts + \"/5\").build()\n\t\t);\n\t\tpanelComponent.getChildren().add(\n\t\t\tLineComponent.builder().left(\"Ticks seen: \").right(Integer.toString(plugin.entStats.ticksAlive)).build()\n\t\t);\n\t\tif (plugin.entStats.ttg) {\n\t\t\tpanelComponent.getChildren().add(\n\t\t\t\tLineComponent.builder().left(\"Almost time to go!\").build()\n\t\t\t);\n\t\t\tpanelComponent.getChildren().add(\n\t\t\t\tLineComponent.builder().left(\"Despawn in: \").right(Integer.toString(plugin.entStats.despawnTime)).build()\n\t\t\t);\n\t\t}\n\t\treturn super.render(graphics);\n\t}\n}\n","filePath":"src\\main\\java\\com\\ent\\EntOverlay2D.java"},{"fileName":"EntOverlay3D.java","content":"package com.ent;\n\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Shape;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\n\npublic class EntOverlay3D extends Overlay\n{\n\tprivate final Client client;\n\tprivate final EntPlugin plugin;\n\tprivate final EntConfig config;\n\n\t@Inject\n\tprivate EntOverlay3D(Client client, EntPlugin plugin, EntConfig config)\n\t{\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\n\t\tthis.client \u003d client;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tint highestPriority \u003d 0;\n\t\tfor (Ent ent : plugin.entStats.ents.values()) {\n\t\t\tif (!ent.perfect \u0026\u0026 ent.trimType !\u003d null \u0026\u0026 ent.trimType.priority \u003e highestPriority) {\n\t\t\t\thighestPriority \u003d ent.trimType.priority;\n\t\t\t}\n\t\t}\n\n\t\tfor (Ent ent : plugin.entStats.ents.values()) {\n\t\t\tboolean hidden \u003d plugin.hideEnt(ent, highestPriority);\n\n\t\t\tString text \u003d \"\";\n\t\t\tif (config.displayTrimOptions()) {\n\t\t\t\ttext \u003d ent.trimType \u003d\u003d null ? \"n/a\" : ent.trimType.shortText;\n\t\t\t}\n\t\t\tif (config.displayTrimCount()) {\n\t\t\t\tif (!text.isEmpty()) {\n\t\t\t\t\ttext +\u003d \": \";\n\t\t\t\t}\n\t\t\t\ttext +\u003d ent.trims;\n\t\t\t}\n\n\t\t\tif (!text.isEmpty() \u0026\u0026 (config.displayTextOnHiddenEnts() || !hidden)) {\n\t\t\t\tColor color;\n\t\t\t\tif (ent.perfect) {\n\t\t\t\t\tcolor \u003d Color.RED;\n\t\t\t\t} else if (config.highlightPriority() \u0026\u0026 ent.trimType !\u003d null \u0026\u0026 ent.trimType.priority \u003d\u003d highestPriority) {\n\t\t\t\t\tcolor \u003d config.priorityColor();\n\t\t\t\t} else {\n\t\t\t\t\tcolor \u003d Color.GREEN;\n\t\t\t\t}\n\t\t\t\tOverlayUtil.renderTextLocation(graphics, ent.npc.getCanvasTextLocation(graphics, text, 0), text, color);\n\t\t\t}\n\n\t\t\tif (!hidden) {\n\t\t\t\tif (ent.perfect) {\n\t\t\t\t\tOverlayUtil.renderActorOverlay(graphics, ent.npc, \"\", Color.RED);\n\t\t\t\t} else if (config.highlightPriority() \u0026\u0026 ent.trimType !\u003d null \u0026\u0026 ent.trimType.priority \u003d\u003d highestPriority) {\n\t\t\t\t\tShape shape \u003d ent.npc.getConvexHull();\n\t\t\t\t\tOverlayUtil.renderPolygon(graphics, shape, config.priorityColor());\n\t\t\t\t\tOverlayUtil.renderActorOverlay(graphics, ent.npc, \"\", config.priorityColor());\n\t\t\t\t} else {\n\t\t\t\t\tOverlayUtil.renderActorOverlay(graphics, ent.npc, \"\", Color.GREEN);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n}\n","filePath":"src\\main\\java\\com\\ent\\EntOverlay3D.java"},{"fileName":"EntPlugin.java","content":"package com.ent;\n\nimport com.ent.discord.DiscordWebhook;\nimport com.ent.discord.DiscordWebhookBody;\nimport com.google.inject.Provides;\nimport java.time.LocalTime;\nimport java.time.ZoneOffset;\nimport java.time.format.DateTimeFormatter;\nimport java.time.temporal.ChronoUnit;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Actor;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.NPC;\nimport net.runelite.api.NpcID;\nimport net.runelite.api.Player;\nimport net.runelite.api.Renderable;\nimport net.runelite.api.events.AnimationChanged;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.InteractingChanged;\nimport net.runelite.api.events.NpcChanged;\nimport net.runelite.api.events.NpcDespawned;\nimport net.runelite.api.events.NpcSpawned;\nimport net.runelite.api.events.OverheadTextChanged;\nimport net.runelite.client.callback.Hooks;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.Text;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Ent Trimmer\"\n)\npublic class EntPlugin extends Plugin\n{\n\tprivate static final int TRIM_ANIM \u003d 10505;\n\tprivate static final int STUN_ANIM \u003d 848;\n\tprivate static final int ENT_FINISH_ANIM \u003d 10540;\n\tprivate static final String TIME_TO_GO_MSG \u003d \"Almost time to go!\";\n\tprivate static final String PERFECT_MSG \u003d \"My cut is perfect, leave it alone!\";\n\tprivate static final int TTG_DESPAWN_TIME \u003d 45; // 45 ticks\n\tprivate static final Pattern pattern \u003d Pattern.compile(\"Well done, you\u0027ve given (\\\\d) entlings haircuts!\");\n//\tprivate static final String LOGGED_OFF_ENT_MSG \u003d \"As you were not present when the entlings appeared you are not eligible for rewards.\";\n\n\tpublic EntStats entStats \u003d new EntStats();\n\tprivate double lastEntUniqueId;\n\tprivate final Hooks.RenderableDrawListener drawListener \u003d this::shouldDraw;\n\n\t@Inject\n\n\tprivate Client client;\n\t@Inject\n\tprivate EntConfig config;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate EntOverlay3D overlay3D;\n\n\t@Inject\n\tprivate EntOverlay2D overlay2D;\n\n\t@Inject\n\tprivate Hooks hooks;\n\n\t@Inject\n\tprivate DiscordWebhook discordWebhook;\n\n\tprivate boolean shouldDraw(Renderable renderable, boolean drawingUI) {\n\t\tif (!(renderable instanceof NPC))\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\tNPC npc \u003d (NPC) renderable;\n\t\tEnt ent \u003d entStats.ents.get(npc);\n\t\tif (ent \u003d\u003d null) {\n\t\t\treturn true;\n\t\t}\n\n\t\tint highestPriority \u003d 0;\n\t\tfor (Ent e : entStats.ents.values()) {\n\t\t\tif (e.perfect)\n\t\t\t\tcontinue;\n\t\t\tif (e.trimType !\u003d null \u0026\u0026 e.trimType.priority \u003e highestPriority) {\n\t\t\t\thighestPriority \u003d e.trimType.priority;\n\t\t\t}\n\t\t}\n\n\t\treturn !hideEnt(ent, highestPriority);\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\toverlayManager.add(overlay3D);\n\t\toverlayManager.add(overlay2D);\n\t\thooks.registerRenderableDrawListener(drawListener);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(overlay3D);\n\t\toverlayManager.remove(overlay2D);\n\t\thooks.unregisterRenderableDrawListener(drawListener);\n\t\tentStats.clear();\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged e)\n\t{\n\t\tGameState gameState \u003d e.getGameState();\n\t\tif (gameState \u003d\u003d GameState.LOGIN_SCREEN || gameState \u003d\u003d GameState.CONNECTION_LOST || gameState \u003d\u003d GameState.HOPPING)\n\t\t{\n\t\t\tentStats.clear();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onNpcSpawned(NpcSpawned e)\n\t{\n\t\tNPC npc \u003d e.getNpc();\n\t\tif (npc.getId() \u003d\u003d NpcID.ENTLING || npc.getId() \u003d\u003d NpcID.PRUNED_ENTLING)\n\t\t{\n\t\t\tentStats.add(npc);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onNpcDespawned(NpcDespawned e)\n\t{\n\t\tif (entStats.ents.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tentStats.remove(e.getNpc());\n\t}\n\n\t@Subscribe\n\tpublic void onNpcChanged(NpcChanged e)\n\t{\n\t\tif (entStats.ents.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (e.getNpc().getId() \u003d\u003d NpcID.PRUNED_ENTLING \u0026\u0026 entStats.ents.containsKey(e.getNpc()))\n\t\t{\n\t\t\tentStats.ents.get(e.getNpc()).perfect \u003d true;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick e)\n\t{\n\t\tif (entStats.ticksAlive \u003e\u003d 0)\n\t\t{\n\t\t\tentStats.ticksAlive++;\n\t\t}\n\t\tif (entStats.despawnTime \u003e 0)\n\t\t{\n\t\t\tentStats.despawnTime--;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onOverheadTextChanged(OverheadTextChanged e)\n\t{\n\t\tif (entStats.ents.isEmpty() || !(e.getActor() instanceof NPC))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tNPC npc \u003d (NPC) e.getActor();\n\t\tEnt ent \u003d entStats.ents.get(npc);\n\t\tif (ent \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tString text \u003d Text.removeTags(e.getOverheadText());\n\t\tif (text.equals(TIME_TO_GO_MSG))\n\t\t{\n\t\t\tentStats.ttg \u003d true;\n\t\t\tentStats.despawnTime \u003d TTG_DESPAWN_TIME;\n\t\t}\n\t\telse if (text.equals(PERFECT_MSG))\n\t\t{\n\t\t\tent.perfect \u003d true;\n\t\t}\n\t\telse if (ent.trimType \u003d\u003d null)\n\t\t{\n\t\t\tfor (TrimType trimType : TrimType.values)\n\t\t\t{\n\t\t\t\tif (text.equals(trimType.overheadText))\n\t\t\t\t{\n\t\t\t\t\tent.trimType \u003d trimType;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onInteractingChanged(InteractingChanged e)\n\t{\n\t\tif (entStats.ents.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (e.getSource() instanceof Player \u0026\u0026 e.getTarget() instanceof NPC)\n\t\t{\n\t\t\tNPC target \u003d (NPC) e.getTarget();\n\t\t\tif (target.getId() !\u003d NpcID.ENTLING)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tEnt ent \u003d entStats.ents.get(target);\n\t\t\tif (ent \u003d\u003d null)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tentStats.playerEntMap.put((Player) e.getSource(), ent);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onAnimationChanged(AnimationChanged e)\n\t{\n\t\tif (entStats.ents.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tActor a \u003d e.getActor();\n\n\t\tif (a instanceof NPC) {\n\t\t\tonNpcAnim(a);\n\t\t} else if (a instanceof Player) {\n\t\t\tonPlayerAnim(a);\n\t\t}\n\t}\n\n\tprivate void onPlayerAnim(Actor a)\n\t{\n\t\tif (a.getInteracting() !\u003d null \u0026\u0026 a.getInteracting() instanceof Player)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tEnt ent;\n\t\tif (a.getInteracting() \u003d\u003d null)\n\t\t{\n\t\t\tent \u003d entStats.playerEntMap.get((Player) a);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tNPC npc \u003d (NPC) a.getInteracting();\n\t\t\tent \u003d entStats.ents.get(npc);\n\t\t}\n\n\t\tif (ent \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (a.getAnimation() \u003d\u003d TRIM_ANIM)\n\t\t{\n\t\t\tent.trims++;\n\t\t\tif (a \u003d\u003d client.getLocalPlayer()) {\n\t\t\t\tentStats.eligible \u003d true;\n\t\t\t}\n\t\t}\n\t\telse if (a.getAnimation() \u003d\u003d STUN_ANIM \u0026\u0026 a \u003d\u003d client.getLocalPlayer())\n\t\t{\n\t\t\tentStats.eligible \u003d true;\n\t\t}\n\t}\n\n\tprivate void onNpcAnim(Actor a)\n\t{\n\t\tNPC npc \u003d (NPC) a;\n\t\tif (npc.getId() !\u003d NpcID.PRUNED_ENTLING \u0026\u0026 npc.getId() !\u003d NpcID.ENTLING)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (npc.getAnimation() !\u003d ENT_FINISH_ANIM) {\n\t\t\treturn;\n\t\t}\n\n\t\tEnt ent \u003d entStats.ents.get(npc);\n\t\tif (ent \u003d\u003d null) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!entStats.eligible) {\n\t\t\t/*\n\t\t\tpreference for waiting for the game chat message.\n\t\t\tOnly use anim + perfect npc id count if there won\u0027t be a game chat message.\n\t\t\tWith a very late final cut close to despawn time it\u0027s possible to get the anim before the game chat msg\n\t\t\twhich detects 4/5 but is actually 5/5.\n\t\t\t*/\n\t\t\tdiscordEntStats(entStats.getPerfectCutCount());\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage e) {\n\t\tif (!e.getType().equals(ChatMessageType.GAMEMESSAGE) || entStats.ents.isEmpty()) {\n\t\t\treturn;\n\t\t}\n\n\t\tString msg \u003d Text.removeTags(e.getMessage());\n\n\t\tMatcher matcher \u003d pattern.matcher(msg);\n\t\tif (matcher.find()) {\n\t\t\ttry {\n\t\t\t\tint count \u003d Integer.parseInt(matcher.group(1));\n\t\t\t\tdiscordEntStats(count);\n\t\t\t} catch (NumberFormatException exception) {\n\t\t\t\texception.printStackTrace();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void discordEntStats(int count)\n\t{\n\t\tif (config.discordWebhookUrl().isEmpty() || lastEntUniqueId \u003d\u003d entStats.uniqueId)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tStringBuffer sb \u003d new StringBuffer();\n\n\t\t// UTC time\n\t\t// Get current UTC time\n\t\tLocalTime utcTime \u003d LocalTime.now(ZoneOffset.UTC).minusSeconds(entStats.ticksAlive * 6 / 10).truncatedTo(ChronoUnit.SECONDS); // Truncate to seconds to remove fractional seconds\n\t\t// Define the desired format\n\t\tDateTimeFormatter formatter \u003d DateTimeFormatter.ofPattern(\"HH:mm:ss\");\n\t\t// Format the time as \"HH:mm:ss\"\n\t\tString formattedTime \u003d utcTime.format(formatter);\n\t\t// Output the formatted UTC time\n\t\tsb.append(formattedTime + \"\\n\");\n\n\t\t// total cut\n\t\tsb.append(count + \"/\" + entStats.ents.size() + \"\\n\");\n\n\t\t// times\n\t\tsb.append(\"Ticks seen: \" + entStats.ticksAlive + \"\\n\");\n\t\tsb.append(entStats.ttg ? (\"TTG reached - Ticks until despawn: \" + entStats.despawnTime + \"\\n\") : \"TTG/despawn time unknown\\n\");\n\n\t\t// average ent position\n\t\tint x \u003d 0;\n\t\tint y \u003d 0;\n\t\tfor (Ent e : entStats.ents.values()) {\n\t\t\tx +\u003d e.npc.getWorldLocation().getX();\n\t\t\ty +\u003d e.npc.getWorldLocation().getY();\n\t\t}\n\t\tx /\u003d entStats.ents.size();\n\t\ty /\u003d entStats.ents.size();\n\t\tString locUrl \u003d \"https://explv.github.io/?centreX\u003d\"+x+\"\u0026centreY\u003d\"+y+\"\u0026centreZ\u003d0\u0026zoom\u003d11\";\n\t\tsb.append(locUrl).append(\"\\n\");\n\n\t\t// Cut types and counts\n\t\tfor (Ent e : entStats.ents.values()) {\n\t\t\tsb.append(e.trimType \u003d\u003d null ? \"n/a\" : e.trimType.shortText).append(\" \")\n\t\t\t\t.append(e.trims).append(\" \")\n\t\t\t\t.append(e.perfect ? \"Yes\" : \"No\").append(\"\\n\");\n\t\t}\n\n\t\tlastEntUniqueId \u003d entStats.uniqueId;\n\t\tDiscordWebhookBody discordWebhookBody \u003d new DiscordWebhookBody();\n\t\tdiscordWebhookBody.setContent(sb.toString());\n\t\tdiscordWebhook.sendWebhook(discordWebhookBody, config.includeScreenshot());\n\t}\n\n\t@Provides\n\tEntConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(EntConfig.class);\n\t}\n\n\tpublic boolean hideEnt(Ent ent, int highestPriority)\n\t{\n\t\tif (entStats.eligible) {\n\t\t\t// don\u0027t hide any ents until player has cut or stalled on at least one\n\t\t\tif (ent.perfect \u0026\u0026 config.hidePerfect()) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (config.hideNonPriority() \u0026\u0026 (ent.perfect || ent.trimType !\u003d null \u0026\u0026 ent.trimType.priority !\u003d highestPriority)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\com\\ent\\EntPlugin.java"},{"fileName":"EntStats.java","content":"package com.ent;\n\nimport java.util.HashMap;\nimport java.util.Map;\nimport net.runelite.api.NPC;\nimport net.runelite.api.Player;\n\npublic class EntStats\n{\n\tpublic boolean eligible \u003d false;\n\tMap\u003cNPC, Ent\u003e ents;\n\tboolean ttg \u003d false;\n\tint ticksAlive \u003d -1;\n\tint despawnTime \u003d -1;\n\tMap\u003cPlayer, Ent\u003e playerEntMap;\n\tdouble uniqueId;\n\n\tpublic EntStats()\n\t{\n\t\tthis.playerEntMap \u003d new HashMap\u003c\u003e();\n\t\tthis.ents \u003d new HashMap\u003c\u003e();\n\t}\n\n\tpublic void clear()\n\t{\n\t\tents.clear();\n\t\tttg \u003d false;\n\t\tticksAlive \u003d -1;\n\t\tdespawnTime \u003d -1;\n\t\tplayerEntMap.clear();\n\t\teligible \u003d false;\n\t}\n\n\tpublic int getPerfectCutCount() {\n\t\treturn (int) ents.values().stream().filter(ent -\u003e ent.perfect).count();\n\t}\n\n\tpublic void add(NPC npc)\n\t{\n\t\tif (ents.isEmpty())\n\t\t{\n\t\t\tticksAlive \u003d 0;\n\t\t\tuniqueId \u003d Math.random() * Integer.MAX_VALUE;\n\t\t}\n\t\tents.put(npc, new Ent(npc));\n\t}\n\n\tpublic void remove(NPC npc)\n\t{\n\t\tents.remove(npc);\n\t\tif (ents.isEmpty())\n\t\t{\n\t\t\tclear();\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\ent\\EntStats.java"},{"fileName":"TrimType.java","content":"package com.ent;\n\npublic enum TrimType\n{\n\tTOP(4, \"Short on top!\", \"Top\"),\n\tMULLET(3, \"A leafy mullet!\", \"Top/Sides\"),\n\tBACK_AND_SIDES(2, \"Short back and sides!\", \"Back/Sides\"),\n\tBACK(1, \"Breezy at the back!\", \"Back\"),\n\t;\n\n\tfinal int priority;\n\tfinal String overheadText;\n\tfinal String shortText;\n\n\n\tTrimType(int priority, String overheadText, String shortText)\n\t{\n\t\tthis.priority \u003d priority;\n\t\tthis.overheadText \u003d overheadText;\n\t\tthis.shortText \u003d shortText;\n\t}\n\n\tpublic static final TrimType[] values \u003d TrimType.values();\n}\n","filePath":"src\\main\\java\\com\\ent\\TrimType.java"},{"fileName":"EntPluginTest.java","content":"package com.ent;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class EntPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(EntPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\ent\\EntPluginTest.java"}]},{"commit":"0d61ef2063307b81059e12c2c38739995f13781f","repository":"https://github.com/LuxOG/wildernesswarnings.git","internalName":"wilderness-warnings","files":[{"fileName":"WildernessWarningsConfig.java","content":"package com.wildernesswarnings;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"wildernesswarnings\")\npublic interface WildernessWarningsConfig extends Config\n{\n\n}\n","filePath":"src\\main\\java\\com\\wildernesswarnings\\WildernessWarningsConfig.java"},{"fileName":"WildernessWarningsPlugin.java","content":"package com.wildernesswarnings;\n\nimport com.google.inject.Provides;\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.List;\nimport java.util.function.Supplier;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.callback.ClientThread;\nimport javax.inject.Inject;\nimport lombok.EqualsAndHashCode;\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport lombok.ToString;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.MenuEntry;\nimport net.runelite.api.events.ClientTick;\nimport net.runelite.api.events.MenuOptionClicked;\nimport net.runelite.api.events.WidgetLoaded;\nimport net.runelite.client.Notifier;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDependency;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.plugins.menuentryswapper.MenuEntrySwapperPlugin;\nimport net.runelite.client.util.Text;\nimport net.runelite.client.util.WildcardMatcher;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Wilderness Warnings\"\n)\n@PluginDependency(MenuEntrySwapperPlugin.class)\npublic class WildernessWarningsPlugin extends Plugin\n{\n\n\tstatic final String WILDERNESS_ACCESS_MENU_ENTRIES \u003d \"rub,Burning*\\nChaos*,Burning*\\nBandit*,Burning*\" +\n\t\t\"\\nLava*,Burning*\\nBreak,Annakarl*\\nBreak,Dareeyak*\\nBreak,Carrallanger*\\nBreak,Ghorrock*\\nBreak,Wilderness*\\n\" +\n\t\t\"Break,Ice Plateau*\\nTeleport,Revenant Cave*\\nTeleport,Wilderness*\\nCross,Wilderness*\\nTravel to Wilderness*,*\\n\" +\n\t\t\"Travel to Ferox*,*\\nHunter Cape*,Teleport\\nPass-Through,Barrier\\nblack chin*,*\\nEnter,Annakarl*\\nEnter,Carrallanger*\\n\" +\n\t\t\"Enter,Dareeyak*\\nEnter,Ice Plateau*\\nEnter,Ghorrock\\nActivate,Obelisk\\nTeleport to Destination,Obelisk\\nCast,Ghorrock*\\nCast,Annakarl\\n\" +\n\t\t\"Cast,Carrallanger\\nCast,Dareeyak\\nCast, Ice Plat*\\nEnter Wilderness\\n\";\n\n\tstatic final String EDGEVILLE_AND_ARDOUGNE_LEVER \u003d \"Pull,Lever\\n\";\n\tstatic final String CORP_BEAST_CAVE_EXIT \u003d \"Exit,Cave exit\\n\";\n\tfinal List\u003cCustomSwap\u003e customHides \u003d new ArrayList\u003c\u003e();\n\n\t@Inject\n\tprivate Notifier notifier;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate WildernessWarningsConfig config;\n\n\t@Getter\n\t@ToString\n\t@RequiredArgsConstructor\n\t@EqualsAndHashCode\n\tstatic class CustomSwap\n\t{\n\t\tprivate final String option;\n\t\tprivate final String target;\n\t\tprivate final String topOption;\n\t\tprivate final String topTarget;\n\n\t\tCustomSwap(String option, String target)\n\t\t{\n\t\t\tthis(option, target, null, null);\n\t\t}\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tcustomHides.clear();\n\t\tcustomHides.addAll(loadCustomSwaps(WILDERNESS_ACCESS_MENU_ENTRIES));\n\t}\n\n\tprivate Collection\u003c? extends CustomSwap\u003e loadCustomSwaps(String customSwaps)\n\t{\n\t\tif (client.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\t//Edgeville or Ardougne Level\n\t\t\tif (client.getLocalPlayer().getWorldLocation().getRegionID() \u003d\u003d 12342\n\t\t\t\t|| client.getLocalPlayer().getWorldLocation().getRegionID() \u003d\u003d 10291)\n\t\t\t{\n\t\t\t\tcustomSwaps +\u003d EDGEVILLE_AND_ARDOUGNE_LEVER;\n\t\t\t}\n\t\t\t//Corporeal Beast Cave\n\t\t\telse if (client.getLocalPlayer().getWorldLocation().getRegionID() \u003d\u003d 11842)\n\t\t\t{\n\t\t\t\tcustomSwaps +\u003d CORP_BEAST_CAVE_EXIT;\n\t\t\t}\n\t\t}\n\t\tList\u003cCustomSwap\u003e swaps \u003d new ArrayList\u003c\u003e();\n\t\tfor (String customSwap : customSwaps.split(\"\\n\"))\n\t\t{\n\t\t\tif (customSwap.trim().equals(\"\"))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tString[] split \u003d customSwap.split(\",\");\n\t\t\tswaps.add(new CustomSwap(\n\t\t\t\tsplit[0].toLowerCase().trim(),\n\t\t\t\tsplit.length \u003e 1 ? split[1].toLowerCase().trim() : \"\",\n\t\t\t\tsplit.length \u003e 2 ? split[2].toLowerCase().trim() : null,\n\t\t\t\tsplit.length \u003e 3 ? split[3].toLowerCase().trim() : null\n\t\t\t));\n\t\t}\n\t\treturn swaps;\n\t}\n\n\tpublic void customSwaps()\n\t{\n\t\tif (client.getWorld() \u003d\u003d 474 || client.getWorld() \u003d\u003d 533 || client.getWorld() \u003d\u003d 365)\n\t\t{\n\t\t\tMenuEntry[] menuEntries \u003d client.getMenuEntries();\n\t\t\tif (menuEntries.length \u003d\u003d 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tmenuEntries \u003d filterEntries(menuEntries);\n\n\t\t\tclient.setMenuEntries(menuEntries);\n\n\t\t}\n\t}\n\n\tprivate MenuEntry[] filterEntries(MenuEntry[] menuEntries)\n\t{\n\t\tArrayList\u003cMenuEntry\u003e filtered \u003d new ArrayList\u003c\u003e();\n\t\tfor (MenuEntry entry : menuEntries)\n\t\t{\n\t\t\tString option \u003d Text.standardize(Text.removeTags(entry.getOption()));\n\t\t\tString target \u003d Text.standardize(Text.removeTags(entry.getTarget()));\n\t\t\tif (matches(option, target, menuEntries, customHides) \u003d\u003d -1)\n\t\t\t{\n\t\t\t\tfiltered.add(entry);\n\t\t\t}\n\t\t}\n\t\treturn filtered.toArray(new MenuEntry[0]);\n\t}\n\n\tprivate int matches(String entryOption, String entryTarget, MenuEntry[] entries, List\u003cCustomSwap\u003e swaps)\n\t{\n\t\tint topEntryIndex \u003d getTopMenuEntryIndex(entries);\n\t\tMenuEntry topEntry \u003d entries[topEntryIndex];\n\t\tString target \u003d Text.standardize(topEntry.getTarget());\n\t\tString option \u003d Text.standardize(topEntry.getOption());\n\t\tfor (int i \u003d 0; i \u003c swaps.size(); i++)\n\t\t{\n\t\t\tCustomSwap _configEntry \u003d swaps.get(i);\n\t\t\tif (\n\t\t\t\t(\n\t\t\t\t\t_configEntry.option.equals(entryOption)\n\t\t\t\t\t\t|| WildcardMatcher.matches(_configEntry.option, entryOption)\n\t\t\t\t)\n\t\t\t\t\t\u0026\u0026 (\n\t\t\t\t\t_configEntry.target.equals(entryTarget)\n\t\t\t\t\t\t|| WildcardMatcher.matches(_configEntry.target, entryTarget)\n\t\t\t\t)\n\t\t\t)\n\t\t\t{\n\t\t\t\tboolean a \u003d (_configEntry.topOption \u003d\u003d null);\n\t\t\t\tboolean b \u003d (_configEntry.topTarget \u003d\u003d null);\n\t\t\t\tSupplier\u003cBoolean\u003e c \u003d () -\u003e (_configEntry.topOption.equals(option) || WildcardMatcher\n\t\t\t\t\t.matches(_configEntry.topOption, option));\n\t\t\t\tSupplier\u003cBoolean\u003e d \u003d () -\u003e (_configEntry.topTarget.equals(target) || WildcardMatcher\n\t\t\t\t\t.matches(_configEntry.topTarget, target));\n\t\t\t\tif (a || b || (c.get() \u0026\u0026 d.get()))\n\t\t\t\t{\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n\n\tprivate int getTopMenuEntryIndex(MenuEntry[] menuEntries)\n\t{\n\t\tfor (int i \u003d menuEntries.length - 1; i \u003e\u003d 0; i--)\n\t\t{\n\t\t\tif (menuEntries[i].getType().getId() \u003c 1000 \u0026\u0026 !menuEntries[i].isDeprioritized())\n\t\t\t{\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn menuEntries.length - 1;\n\t}\n\n\n\t@Provides\n\tWildernessWarningsConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(WildernessWarningsConfig.class);\n\t}\n\n\t@Subscribe(priority \u003d -1)\n\t// This will run after the normal menu entry swapper, so it won\u0027t interfere with this plugin.\n\tpublic void onClientTick(ClientTick clientTick)\n\t{\n\t\t// The menu is not rebuilt when it is open, so don\u0027t swap or else it will\n\t\t// repeatedly swap entries\n\t\tif (client.getGameState() !\u003d GameState.LOGGED_IN || client.isMenuOpen())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (client.getLocalPlayer().getWorldLocation().getRegionID() \u003d\u003d 12342\n\t\t\t|| client.getLocalPlayer().getWorldLocation().getRegionID() \u003d\u003d 10291\n\t\t\t|| client.getLocalPlayer().getWorldLocation().getRegionID() \u003d\u003d 11842)\n\t\t{\n\t\t\tcustomHides.clear();\n\t\t\tcustomHides.addAll(loadCustomSwaps(WILDERNESS_ACCESS_MENU_ENTRIES));\n\t\t}\n\t\tcustomSwaps();\n\n\t}\n}\n","filePath":"src\\main\\java\\com\\wildernesswarnings\\WildernessWarningsPlugin.java"},{"fileName":"WildernessWarningsPluginTest.java","content":"package com.wildernesswarnings;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class WildernessWarningsPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(WildernessWarningsPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\wildernesswarnings\\WildernessWarningsPluginTest.java"}]},{"commit":"527f5faee6aeb2cf923029dd0bce16268fd27b43","repository":"https://github.com/petertalbanese/SoundSwapper.git","internalName":"sound-swapper","files":[{"fileName":"Sound.java","content":"/*\n * Copyright (c) 2023, petertalbanese \u003chttps://github.com/petertalbanese\u003e\n * Copyright (c) 2023, damencs \u003chttps://github.com/damencs\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.soundswapper;\n\nimport javax.sound.sampled.AudioFormat;\n\npublic class Sound\n{\n    private byte[] bytes;\n    private AudioFormat format;\n    private int numBytes;\n\n    Sound(byte[] bytes, AudioFormat format, int numBytes)\n    {\n        this.bytes \u003d bytes;\n        this.format \u003d format;\n        this.numBytes \u003d numBytes;\n    }\n\n    public byte[] getBytes()\n    {\n        return bytes;\n    }\n\n    public AudioFormat getFormat()\n    {\n        return format;\n    }\n\n    public int getNumBytes()\n    {\n        return numBytes;\n    }\n}\n","filePath":"src\\main\\java\\com\\soundswapper\\Sound.java"},{"fileName":"SoundEffectOverlay.java","content":"/*\n * Copyright (c) 2018, WooxSolo \u003chttps://github.com/WooxSolo\u003e\n * Copyright (c) 2023, damencs \u003chttps://github.com/damencs\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.soundswapper;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Player;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.events.AreaSoundEffectPlayed;\nimport net.runelite.api.events.SoundEffectPlayed;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.LineComponent;\n\nimport javax.inject.Inject;\nimport java.awt.*;\n\n@Slf4j\nclass SoundEffectOverlay extends OverlayPanel\n{\n    private final static int MAX_LINES \u003d 10;\n    private final static Color COLOR_SOUND_EFFECT \u003d Color.WHITE;\n    private final static Color COLOR_AREA_SOUND_EFFECT \u003d Color.YELLOW;\n    private final static Color COLOR_SILENT_SOUND_EFFECT \u003d Color.GRAY;\n    private final static Color COLOR_ALLOWED \u003d Color.GREEN;\n    private final static Color COLOR_CONSUMED \u003d Color.RED;\n    private final static Color COLOR_CUSTOM \u003d Color.PINK;\n    private final static Color COLOR_BLACKLISTED \u003d Color.ORANGE;\n    private final static Color COLOR_WHITELISTED \u003d Color.WHITE;\n\n    public static final String ALLOWED \u003d \"Allowed\";\n    public static final String BLACKLISTED \u003d \"Blacklisted\";\n    public static final String CONSUMED \u003d \"Consumed\";\n    public static final String CUSTOM \u003d \"Custom\";\n    public static final String WHITELISTED \u003d \"Whitelisted\";\n\n    private final Client client;\n    private SoundSwapperPlugin plugin;\n\n    private SoundSwapperConfig config;\n\n    @Inject\n    SoundEffectOverlay(Client client, SoundSwapperPlugin plugin, SoundSwapperConfig config)\n    {\n        this.client \u003d client;\n        this.plugin \u003d plugin;\n        this.config \u003d config;\n\n        panelComponent.getChildren().add(LineComponent.builder()\n                .left(\"Sound Effects\")\n                .leftColor(Color.CYAN)\n                .build());\n\n        setClearChildren(false);\n        setPosition(OverlayPosition.TOP_LEFT);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics)\n    {\n        if (!config.debugSoundEffects())\n        {\n            return null;\n        }\n\n        return super.render(graphics);\n    }\n\n    @Subscribe\n    public void onSoundEffectPlayed(SoundEffectPlayed event)\n    {\n        if (!config.debugSoundEffects())\n        {\n            return;\n        }\n\n        int soundId \u003d event.getSoundId();\n\n        String text \u003d \"G: \" + soundId;\n\n        String action \u003d ALLOWED;\n        Color actionColor \u003d COLOR_ALLOWED;\n\n        if (config.consumeSoundEffects())\n        {\n            action \u003d CONSUMED;\n            actionColor \u003d COLOR_CONSUMED;\n        }\n\n        if (plugin.blacklistedSounds.contains(soundId))\n        {\n            action \u003d BLACKLISTED;\n            actionColor \u003d COLOR_BLACKLISTED;\n        }\n\n        if (plugin.whitelistedSounds.contains(soundId))\n        {\n            action \u003d WHITELISTED;\n            actionColor \u003d COLOR_WHITELISTED;\n        }\n\n        if (plugin.customSounds.containsKey(soundId))\n        {\n            action \u003d CUSTOM;\n            actionColor \u003d COLOR_CUSTOM;\n        }\n\n        panelComponent.getChildren().add(LineComponent.builder()\n                .left(text)\n                .leftColor(COLOR_SOUND_EFFECT)\n                .right(action)\n                .rightColor(actionColor)\n                .build());\n\n        checkMaxLines();\n    }\n\n    @Subscribe\n    public void onAreaSoundEffectPlayed(AreaSoundEffectPlayed event)\n    {\n        if (!config.debugSoundEffects())\n        {\n            return;\n        }\n\n        Color textColor \u003d COLOR_AREA_SOUND_EFFECT;\n        Color actionColor \u003d COLOR_ALLOWED;\n\n        int soundId \u003d event.getSoundId();\n        String text \u003d \"A: \" + soundId;\n        String action \u003d ALLOWED;\n\n        // Check if the player is within range to hear the sound\n        Player localPlayer \u003d client.getLocalPlayer();\n        if (localPlayer !\u003d null)\n        {\n            LocalPoint lp \u003d localPlayer.getLocalLocation();\n            if (lp !\u003d null)\n            {\n                int sceneX \u003d lp.getSceneX();\n                int sceneY \u003d lp.getSceneY();\n                int distance \u003d Math.abs(sceneX - event.getSceneX()) + Math.abs(sceneY - event.getSceneY());\n                if (distance \u003e event.getRange())\n                {\n                    textColor \u003d COLOR_SILENT_SOUND_EFFECT;\n                    text \u003d \"SA: \" + soundId;\n                }\n            }\n        }\n\n        if (config.consumeAreaSounds())\n        {\n            action \u003d CONSUMED;\n            actionColor \u003d COLOR_CONSUMED;\n        }\n\n        if (plugin.blacklistedAreaSounds.contains(soundId))\n        {\n            action \u003d BLACKLISTED;\n            actionColor \u003d COLOR_BLACKLISTED;\n        }\n\n        if (plugin.whitelistedAreaSounds.contains(soundId))\n        {\n            action \u003d WHITELISTED;\n            actionColor \u003d COLOR_WHITELISTED;\n        }\n\n        if (plugin.customAreaSounds.containsKey(soundId))\n        {\n            action \u003d CUSTOM;\n            actionColor \u003d COLOR_CUSTOM;\n        }\n\n        panelComponent.getChildren().add(LineComponent.builder()\n                .left(text)\n                .leftColor(textColor)\n                .right(action)\n                .rightColor(actionColor)\n                .build());\n\n        checkMaxLines();\n    }\n\n    private void checkMaxLines()\n    {\n        while (panelComponent.getChildren().size() \u003e MAX_LINES)\n        {\n            panelComponent.getChildren().remove(1);\n        }\n    }\n\n    public void resetLines()\n    {\n        panelComponent.getChildren().clear();\n        panelComponent.getChildren().add(LineComponent.builder()\n                .left(\"Sound Effects\")\n                .leftColor(Color.CYAN)\n                .build());\n    }\n}\n","filePath":"src\\main\\java\\com\\soundswapper\\SoundEffectOverlay.java"},{"fileName":"SoundSwapperConfig.java","content":"/*\n * Copyright (c) 2023, petertalbanese \u003chttps://github.com/petertalbanese\u003e\n * Copyright (c) 2023, damencs \u003chttps://github.com/damencs\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.soundswapper;\n\nimport net.runelite.client.config.*;\n\n@ConfigGroup(\"soundswapper\")\npublic interface SoundSwapperConfig extends Config\n{\n    /**\n     * Sections\n     */\n    @ConfigSection(\n            name \u003d \"Sound Effects\",\n            description \u003d \"Configuration settings for Sound Effects\",\n            position \u003d 1\n    )\n    String SOUND_EFFECTS_SECTION \u003d \"soundEffects\";\n\n    @ConfigSection(\n            name \u003d \"Area Sound Effects\",\n            description \u003d \"Configuration settings for Area Sound Effects\",\n            position \u003d 2\n    )\n    String AREA_SOUND_EFFECTS_SECTION \u003d \"areaSoundEffects\";\n\n    /**\n     * Config Items\n     */\n    @ConfigItem(\n            keyName \u003d \"soundEffects\",\n            name \u003d \"Swap Sound Effects\",\n            description \u003d \"Swap sound effects with custom sounds\",\n            position \u003d 1,\n            section \u003d SOUND_EFFECTS_SECTION\n    )\n    default boolean soundEffects() { return false; }\n\n    @ConfigItem(\n            keyName \u003d \"customSounds\",\n            name \u003d \"Custom Sounds\",\n            description \u003d \"Area Sounds to replace with your own custom .wav files. Separate with comma.\u003cbr\u003e\" +\n                    \"Sound List: https://oldschool.runescape.wiki/w/List_of_in-game_sound_IDs\",\n            position \u003d 2,\n            section \u003d SOUND_EFFECTS_SECTION\n    )\n    default String customSounds()\n    {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d \"consumeSoundEffects\",\n            name \u003d \"Consume Sounds Effects\",\n            description \u003d \"Consume any game sound effect that is not custom\",\n            position \u003d 3,\n            section \u003d SOUND_EFFECTS_SECTION\n    )\n    default boolean consumeSoundEffects() { return false; }\n\n    @ConfigItem(\n            keyName \u003d \"whitelistSounds\",\n            name \u003d \"Whitelist Sounds\",\n            description \u003d \"Sound ids allowed to bypass the \u0027Consume Sound Effects\u0027 config option\u003cbr\u003e\" +\n                    \"Format: 123,456,789\",\n            position \u003d 4,\n            section \u003d SOUND_EFFECTS_SECTION\n    )\n    default String whitelistSounds()\n    {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d \"blacklistedSounds\",\n            name \u003d \"Blacklist Sounds\",\n            description \u003d \"Sound ids consumed regardless of the \u0027Consume Sound Effects\u0027 config option being enabled\u003cbr\u003e\" +\n                    \"Format: 123,456,789\",\n            position \u003d 5,\n            section \u003d SOUND_EFFECTS_SECTION\n    )\n    default String blacklistedSounds()\n    {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d \"enableCustomSoundsVolume\",\n            name \u003d \"Enable Custom Volume\",\n            description \u003d \"Enable the ability to set the volume of custom sound effects\",\n            position \u003d 6,\n            section \u003d SOUND_EFFECTS_SECTION\n    )\n    default boolean enableCustomSoundsVolume() { return false; }\n\n    @Range(max \u003d 100)\n    @ConfigItem(\n            name \u003d \"Custom Sounds Volume\",\n            keyName \u003d \"customSoundsVolume\",\n            description \u003d \"Sets the volume of the sound clips for Sound Effects\",\n            position \u003d 7,\n            section \u003d SOUND_EFFECTS_SECTION\n    )\n    default int customSoundsVolume()\n    {\n        return 65;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"areaSoundEffects\",\n            name \u003d \"Swap Area Sounds\",\n            description \u003d \"Swap area sound effects with custom sounds\",\n            position \u003d 1,\n            section \u003d AREA_SOUND_EFFECTS_SECTION\n    )\n    default boolean areaSoundEffects() { return false; }\n\n    @ConfigItem(\n            keyName \u003d \"customAreaSounds\",\n            name \u003d \"Custom Area Sounds\",\n            description \u003d \"Area Sounds to replace with your own custom .wav files. Separate with comma.\u003cbr\u003e\" +\n                    \"Sound List: https://oldschool.runescape.wiki/w/List_of_in-game_sound_IDs\",\n            position \u003d 2,\n            section \u003d AREA_SOUND_EFFECTS_SECTION\n    )\n    default String customAreaSounds()\n    {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d \"consumeAreaSounds\",\n            name \u003d \"Consume Area Sounds\",\n            description \u003d \"Consume any area sound effect that is not custom\u003cbr\u003e\" +\n                    \"(Must have a custom sound file in the folder to allow this to work)\",\n            position \u003d 3,\n            section \u003d AREA_SOUND_EFFECTS_SECTION\n    )\n    default boolean consumeAreaSounds() { return false; }\n\n    @ConfigItem(\n            keyName \u003d \"whitelistAreaSounds\",\n            name \u003d \"Whitelist Area Sounds\",\n            description \u003d \"Sound ids allowed to bypass the \u0027Consume Area Sound Effects\u0027 config option\u003cbr\u003e\" +\n                    \"Format: 123,456,789\",\n            position \u003d 4,\n            section \u003d AREA_SOUND_EFFECTS_SECTION\n    )\n    default String whitelistAreaSounds()\n    {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d \"blacklistedAreaSounds\",\n            name \u003d \"Blacklist Area Sounds\",\n            description \u003d \"Sound ids consumed regardless of the \u0027Consume Area Sound Effects\u0027 config option being enabled\u003cbr\u003e\" +\n                    \"Format: 123,456,789\",\n            position \u003d 5,\n            section \u003d AREA_SOUND_EFFECTS_SECTION\n    )\n    default String blacklistedAreaSounds()\n    {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d \"enableCustomAreaSoundsVolume\",\n            name \u003d \"Enable Custom Volume\",\n            description \u003d \"Enable the ability to set the volume of custom sound effects\",\n            position \u003d 6,\n            section \u003d AREA_SOUND_EFFECTS_SECTION\n    )\n    default boolean enableCustomAreaSoundsVolume() { return false; }\n\n    @Range(max \u003d 100)\n    @ConfigItem(\n            name \u003d \"Custom Sounds Volume\",\n            keyName \u003d \"customAreaSoundsVolume\",\n            description \u003d \"Sets the volume of the sound clips for Sound Effects\",\n            position \u003d 7,\n            section \u003d AREA_SOUND_EFFECTS_SECTION\n    )\n    default int customAreaSoundsVolume()\n    {\n        return 65;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"consumeAmbientSounds\",\n            name \u003d \"Consume Ambient Sounds\",\n            description \u003d \"Consume any ambient sound effects while in-game AoE sounds are enabled\",\n            position \u003d 8,\n            section \u003d AREA_SOUND_EFFECTS_SECTION\n    )\n    default boolean consumeAmbientSounds() { return false; }\n\n    @ConfigItem(\n            keyName \u003d \"debugSoundEffects\",\n            name \u003d \"Debug Sounds Effects\",\n            description \u003d \"Display the sound effects that play (max 10 lines displayed)\u003cbr\u003e\u003cbr\u003e\" +\n                    \"White: Sound Effect (G)\u003cbr\u003e\" +\n                    \"Yellow: Area Sound Effect (A)\u003cbr\u003e\" +\n                    \"Gray: Silent Area Sound Effect (SA)\",\n            position \u003d 98\n    )\n    default boolean debugSoundEffects() { return false; }\n}\n","filePath":"src\\main\\java\\com\\soundswapper\\SoundSwapperConfig.java"},{"fileName":"SoundSwapperPlugin.java","content":"/*\n * Copyright (c) 2023, petertalbanese \u003chttps://github.com/petertalbanese\u003e\n * Copyright (c) 2023, damencs \u003chttps://github.com/damencs\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.soundswapper;\n\nimport com.google.inject.Provides;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.events.AreaSoundEffectPlayed;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.SoundEffectPlayed;\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.Text;\n\nimport javax.inject.Inject;\nimport javax.sound.sampled.*;\nimport java.io.*;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\n\n@Slf4j\n@PluginDescriptor(\n        name \u003d \"Sound Swapper\",\n        description \u003d \"Allows the user to replace any sound effect.\u003cbr\u003e\u003cbr\u003e\" +\n                \"To replace a sound, add its ID to the list in the plugin menu, then place a .wav file with the same name in your root\u003cbr\u003e\" +\n                \"RuneLite folder. The plugin will grab the sound and use it instead!\"\n)\npublic class SoundSwapperPlugin extends Plugin\n{\n    @Inject\n    private Client client;\n\n    @Inject\n    private ClientThread clientThread;\n\n    @Inject\n    private EventBus eventBus;\n\n    @Inject\n    private SoundSwapperConfig config;\n\n    @Inject\n    private OverlayManager overlayManager;\n\n    @Inject\n    private SoundEffectOverlay soundEffectOverlay;\n\n    public HashMap\u003cInteger, Sound\u003e customSounds \u003d new HashMap\u003c\u003e();\n\n    public HashMap\u003cInteger, Sound\u003e customAreaSounds \u003d new HashMap\u003c\u003e();\n\n    public List\u003cInteger\u003e whitelistedSounds \u003d new ArrayList\u003c\u003e();\n    public List\u003cInteger\u003e whitelistedAreaSounds \u003d new ArrayList\u003c\u003e();\n    public List\u003cInteger\u003e blacklistedSounds \u003d new ArrayList\u003c\u003e();\n    public List\u003cInteger\u003e blacklistedAreaSounds \u003d new ArrayList\u003c\u003e();\n\n    private static final File SOUND_DIR \u003d new File(RuneLite.RUNELITE_DIR, \"SoundSwapper\");\n\n    private static final String CONFIG_GROUP \u003d \"soundswapper\";\n\n    @Provides\n    SoundSwapperConfig provideConfig(ConfigManager configManager)\n    {\n        return configManager.getConfig(SoundSwapperConfig.class);\n    }\n\n    @Override\n    protected void startUp() throws Exception\n    {\n        try\n        {\n            if (!SOUND_DIR.exists())\n            {\n                SOUND_DIR.mkdir();\n            }\n        }\n        catch (SecurityException securityException)\n        {\n            log.error(\"Attempted to create SoundSwapper directory and a security exception prompted a fault\");\n        }\n\n        updateLists();\n\n        overlayManager.add(soundEffectOverlay);\n        eventBus.register(soundEffectOverlay);\n    }\n\n    @Override\n    protected void shutDown() throws Exception\n    {\n        eventBus.unregister(soundEffectOverlay);\n        overlayManager.remove(soundEffectOverlay);\n        reset();\n    }\n\n    @Subscribe\n    public void onConfigChanged(ConfigChanged event)\n    {\n        if (!CONFIG_GROUP.equals(event.getGroup()))\n        {\n            return;\n        }\n\n        switch (event.getKey())\n        {\n            case \"customSounds\":\n            {\n                updateSoundList(customSounds, event.getNewValue());\n                break;\n            }\n\n            case \"customAreaSounds\":\n            {\n                updateSoundList(customAreaSounds, event.getNewValue());\n                break;\n            }\n\n            case \"whitelistSounds\":\n            {\n                whitelistedSounds \u003d getIds(event.getNewValue());\n                break;\n            }\n\n            case \"whitelistAreaSounds\":\n            {\n                whitelistedAreaSounds \u003d getIds(event.getNewValue());\n                break;\n            }\n\n            case \"blacklistedSounds\":\n            {\n                blacklistedSounds \u003d getIds(event.getNewValue());\n                break;\n            }\n\n            case \"blacklistedAreaSounds\":\n            {\n                blacklistedAreaSounds \u003d getIds(event.getNewValue());\n                break;\n            }\n\n            case \"consumeAmbientSounds\": {\n                clientThread.invokeLater(() -\u003e\n                {\n                    // Reload the scene to reapply ambient sounds\n                    if (client.getGameState() \u003d\u003d GameState.LOGGED_IN)\n                    {\n                        client.setGameState(GameState.LOADING);\n                    }\n                });\n                break;\n            }\n        }\n\n        soundEffectOverlay.resetLines();\n    }\n\n    void updateLists()\n    {\n        if (!config.customSounds().isEmpty())\n        {\n            updateSoundList(customSounds, config.customSounds());\n        }\n\n        if (!config.customAreaSounds().isEmpty())\n        {\n            updateSoundList(customAreaSounds, config.customAreaSounds());\n        }\n\n        if (!config.whitelistSounds().isEmpty())\n        {\n            whitelistedSounds \u003d getIds(config.whitelistSounds());\n        }\n\n        if (!config.whitelistAreaSounds().isEmpty())\n        {\n            whitelistedAreaSounds \u003d getIds(config.whitelistAreaSounds());\n        }\n\n        if (!config.blacklistedSounds().isEmpty())\n        {\n            blacklistedSounds \u003d getIds(config.blacklistedSounds());\n        }\n\n        if (!config.blacklistedAreaSounds().isEmpty())\n        {\n            blacklistedAreaSounds \u003d getIds(config.blacklistedAreaSounds());\n        }\n    }\n\n    @Subscribe\n    public void onSoundEffectPlayed(SoundEffectPlayed event)\n    {\n        int soundId \u003d event.getSoundId();\n\n        if (config.soundEffects())\n        {\n            if (customSounds.containsKey(soundId))\n            {\n                event.consume();\n                playCustomSound(customSounds.get(soundId), (config.enableCustomSoundsVolume() ? config.customSoundsVolume() : -1));\n                return;\n            }\n        }\n\n        if (config.consumeSoundEffects() || blacklistedSounds.contains(soundId))\n        {\n            if (!whitelistedSounds.isEmpty() \u0026\u0026 whitelistedSounds.contains(soundId))\n            {\n                log.debug(\"whitelisted other sound effect passed: {}\", soundId);\n                return;\n            }\n\n            log.debug(\"consumed other sound effect: {}\", soundId);\n            event.consume();\n        }\n    }\n\n    @Subscribe\n    public void onAreaSoundEffectPlayed(AreaSoundEffectPlayed event)\n    {\n        int soundId \u003d event.getSoundId();\n\n        if (config.areaSoundEffects())\n        {\n            if (customAreaSounds.containsKey(soundId))\n            {\n                event.consume();\n                playCustomSound(customAreaSounds.get(soundId), (config.enableCustomAreaSoundsVolume() ? config.customAreaSoundsVolume() : -1));\n                return;\n            }\n        }\n\n        if (config.consumeAreaSounds() || blacklistedAreaSounds.contains(soundId))\n        {\n            if (!whitelistedAreaSounds.isEmpty() \u0026\u0026 whitelistedAreaSounds.contains(soundId))\n            {\n                log.debug(\"whitelisted area sound effect passed: {}\", soundId);\n                return;\n            }\n\n            log.debug(\"consumed area sound effect: {}\", soundId);\n            event.consume();\n        }\n    }\n\n    @Subscribe\n    public void onGameStateChanged(GameStateChanged gameStateChanged)\n    {\n        GameState gameState \u003d gameStateChanged.getGameState();\n        if (gameState \u003d\u003d GameState.LOGGED_IN)\n        {\n            if (config.consumeAmbientSounds())\n            {\n                client.getAmbientSoundEffects().clear();\n            }\n        }\n    }\n\n    private boolean tryLoadSound(HashMap\u003cInteger, Sound\u003e sounds, String sound_name, Integer sound_id)\n    {\n        File sound_file \u003d new File(SOUND_DIR, sound_name + \".wav\");\n\n        if (sound_file.exists())\n        {\n            try\n            {\n                InputStream fileStream \u003d new BufferedInputStream(new FileInputStream(sound_file));\n                AudioInputStream stream \u003d AudioSystem.getAudioInputStream(fileStream);\n\n                int streamLen \u003d (int)stream.getFrameLength() * stream.getFormat().getFrameSize();\n                byte[] bytes \u003d new byte[streamLen];\n                stream.read(bytes);\n\n                Sound sound \u003d new Sound(bytes, stream.getFormat(), streamLen);\n                sounds.put(sound_id, sound);\n\n                return true;\n            }\n            catch (UnsupportedAudioFileException | IOException e)\n            {\n                log.warn(\"Unable to load custom sound \" + sound_name, e);\n            }\n        }\n\n        return false;\n    }\n\n    private void updateSoundList(HashMap\u003cInteger, Sound\u003e sounds, String configText)\n    {\n        sounds.clear();\n\n        for (String s : Text.fromCSV(configText))\n        {\n            try\n            {\n                int id \u003d Integer.parseInt(s);\n                tryLoadSound(sounds, s, id);\n            } catch (NumberFormatException e)\n            {\n                log.warn(\"Invalid sound ID: {}\", s);\n            }\n        }\n    }\n\n    private List\u003cInteger\u003e getIds(String configText)\n    {\n        if (configText \u003d\u003d null || configText.isEmpty())\n        {\n            return List.of();\n        }\n\n        List\u003cInteger\u003e ids \u003d new ArrayList\u003c\u003e();\n        for (String s : Text.fromCSV(configText))\n        {\n            try\n            {\n                int id \u003d Integer.parseInt(s);\n                ids.add(id);\n            }\n            catch (NumberFormatException e)\n            {\n                log.warn(\"Invalid id when parsing {}: {}\", configText, s);\n            }\n        }\n\n        return ids;\n    }\n\n    private void playCustomSound(Sound sound, int volume)\n    {\n        try\n        {\n            Clip clip \u003d AudioSystem.getClip();\n            clip.addLineListener(event -\u003e {\n                if (event.getType() \u003d\u003d LineEvent.Type.STOP) {\n                    clip.close();\n                }\n            });\n            clip.open(sound.getFormat(), sound.getBytes(), 0, sound.getNumBytes());\n\n            if (volume !\u003d -1)\n            {\n                FloatControl control \u003d (FloatControl) clip.getControl(FloatControl.Type.MASTER_GAIN);\n\n                if (control !\u003d null)\n                {\n                    control.setValue((float)(volume / 2 - 45));\n                }\n            }\n\n            clip.setFramePosition(0);\n            clip.start();\n        } catch (LineUnavailableException e)\n        {\n            log.warn(\"Failed to play custom sound\");\n        }\n    }\n\n    private void reset()\n    {\n        customSounds \u003d new HashMap\u003c\u003e();\n        customAreaSounds \u003d new HashMap\u003c\u003e();\n        whitelistedSounds \u003d new ArrayList\u003c\u003e();\n        whitelistedAreaSounds \u003d new ArrayList\u003c\u003e();\n        blacklistedSounds \u003d new ArrayList\u003c\u003e();\n        blacklistedAreaSounds \u003d new ArrayList\u003c\u003e();\n        soundEffectOverlay.resetLines();\n    }\n}\n","filePath":"src\\main\\java\\com\\soundswapper\\SoundSwapperPlugin.java"},{"fileName":"SoundSwapperPluginTest.java","content":"package com.soundswapper;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class SoundSwapperPluginTest\n{\n    public static void main(String[] args) throws Exception\n    {\n        ExternalPluginManager.loadBuiltin(SoundSwapperPlugin.class);\n        RuneLite.main(args);\n    }\n}","filePath":"src\\test\\java\\com\\soundswapper\\SoundSwapperPluginTest.java"}]},{"commit":"1b0c70566c85b451afa29af6e469937c9d99f064","repository":"https://github.com/joseccandido/lower-chat-box.git","internalName":"lower-chat-box","files":[{"fileName":"LowerChatBox.java","content":"package com.lcb;\n\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.events.WidgetLoaded;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Lower Chat Box\",\n\tdescription \u003d \"Lowers chat box and hides chat buttons.\",\n\ttags \u003d {\"chat\", \"lower\", \"hide\", \"button\"}\n)\npublic class LowerChatBox extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tClientThread clientThread;\n\n\tpublic static final int CHAT_ID \u003d 162;\n\tpublic static final int CHAT_CHILD_ID \u003d 0;\n\n\tpublic static final int CHAT_LOWER_DISTANCE \u003d 23;\n\n\t@Override\n\tprotected void startUp() {\n\t\ttoggleLowerChatBox(true);\n\t}\n\n\t@Override\n\tprotected void shutDown() {\n\t\ttoggleLowerChatBox(false);\n\t}\n\n\t@Subscribe\n\tpublic void onWidgetLoaded(WidgetLoaded event) {\n\t\tif (event.getGroupId() \u003d\u003d CHAT_ID) {\n\t\t\ttoggleLowerChatBox(true);\n\t\t}\n\t}\n\n\tprivate void toggleLowerChatBox(Boolean lower){\n\t\tWidget chat \u003d client.getWidget(CHAT_ID, CHAT_CHILD_ID);\n\n\t\tif(chat !\u003d null) {\n\t\t\tint y;\n\n\t\t\tif(lower)\ty \u003d CHAT_LOWER_DISTANCE;\n\t\t\telse\t\ty \u003d 0;\n\n\t\t\tclientThread.invoke(() -\u003e {\n\t\t\t\tchat.setOriginalY(y);\n\t\t\t\tchat.setPos(chat.getRelativeX(), y);\n\t\t\t\tchat.revalidate();\n\t\t\t});\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\lcb\\LowerChatBox.java"},{"fileName":"LowerChatBoxTest.java","content":"package com.lcb;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class LowerChatBoxTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(LowerChatBox.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\lcb\\LowerChatBoxTest.java"}]},{"commit":"a3608a6513a10bba51d7b176c0e132063767939b","repository":"https://github.com/Dazuzi/fog-of-war.git","internalName":"entity-render-distance","files":[{"fileName":"FogOfWarMinimapOverlay.java","content":"package com.fogofwar.box;\n\nimport com.fogofwar.FogOfWarConfig;\nimport com.fogofwar.util.AreaManager;\nimport com.fogofwar.util.ClientState;\nimport com.fogofwar.util.DynamicRenderDistance;\nimport com.fogofwar.util.MinimapUtil;\nimport net.runelite.api.Client;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Point;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\n\nimport javax.inject.Inject;\nimport java.awt.*;\nimport java.awt.geom.Area;\nimport java.awt.geom.Ellipse2D;\nimport java.awt.geom.GeneralPath;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.stream.Collectors;\n\npublic class FogOfWarMinimapOverlay extends Overlay {\n    private final Client client;\n    private final FogOfWarConfig config;\n    private final ClientState clientState;\n    private final DynamicRenderDistance dynamicRenderDistance;\n    private final AreaManager areaManager;\n    private static final int MINIMAP_GROUP_ID \u003d 164;\n    private static final int HEALTH_ORB_CHILD_ID \u003d 16;\n    private static final int PRAYER_ORB_CHILD_ID \u003d 17;\n    private static final int RUN_ORB_CHILD_ID \u003d 18;\n    private static final int SPEC_ORB_CHILD_ID \u003d 19;\n    private static final int ORBS_GROUP_ID \u003d 160;\n    private static final int WORLD_MAP_ORB_CHILD_ID \u003d 48;\n    private static final int HALF_TILE_OFFSET \u003d 64;\n    @Inject\n    public FogOfWarMinimapOverlay(Client client, FogOfWarConfig config, ClientState clientState, DynamicRenderDistance dynamicRenderDistance, AreaManager areaManager) {\n        this.client \u003d client;\n        this.config \u003d config;\n        this.clientState \u003d clientState;\n        this.dynamicRenderDistance \u003d dynamicRenderDistance;\n        this.areaManager \u003d areaManager;\n        setPosition(OverlayPosition.DYNAMIC);\n        setPriority(Overlay.PRIORITY_LOW);\n        setLayer(OverlayLayer.ABOVE_WIDGETS);\n    }\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        if (areaManager.isPlayerInExcludedArea() || clientState.isClientNotReady() || (config.onlyInWilderness() \u0026\u0026 clientState.isNotInWilderness())) {\n            return null;\n        }\n        Widget minimap \u003d MinimapUtil.getMinimapWidget(client);\n        if (minimap \u003d\u003d null || minimap.isHidden()) return null;\n        Shape minimapClipShape \u003d getMinimapClipShape(minimap);\n        Shape oldClip \u003d graphics.getClip();\n        graphics.setClip(minimapClipShape);\n        int radius \u003d dynamicRenderDistance.getCurrentRenderDistance();\n        WorldPoint centerWp \u003d client.getLocalPlayer().getWorldLocation();\n        List\u003cPoint\u003e boundaryPoints \u003d getBoundaryPointsWithNulls(centerWp, radius);\n        GeneralPath fogPath \u003d createClippedRenderAreaPath(boundaryPoints, minimap.getBounds());\n        if (fogPath \u003d\u003d null) {\n            graphics.setClip(oldClip);\n            return null;\n        }\n        if (config.showMinimapFog()) {\n            renderMinimapFog(graphics, minimapClipShape, fogPath);\n        }\n        if (config.showMinimapBorder()) {\n            GeneralPath borderPath \u003d createMinimapBorderPath(boundaryPoints);\n            renderMinimapBorder(graphics, borderPath);\n        }\n        graphics.setClip(oldClip);\n        return null;\n    }\n    private Shape getMinimapClipShape(Widget minimapWidget) {\n        Rectangle bounds \u003d minimapWidget.getBounds();\n        Area clipArea \u003d new Area(new Ellipse2D.Double(bounds.getX() - 1, bounds.getY() - 1, bounds.getWidth() + 2, bounds.getHeight() + 2));\n        int[] orbChildIds \u003d {HEALTH_ORB_CHILD_ID, PRAYER_ORB_CHILD_ID, RUN_ORB_CHILD_ID, SPEC_ORB_CHILD_ID};\n        for (int childId : orbChildIds) {\n            Widget orb \u003d client.getWidget(MINIMAP_GROUP_ID, childId);\n            if (orb !\u003d null \u0026\u0026 !orb.isHidden()) {\n                Rectangle orbBounds \u003d orb.getBounds();\n                clipArea.subtract(new Area(new Ellipse2D.Double(orbBounds.getX(), orbBounds.getY(), orbBounds.getWidth(), orbBounds.getHeight())));\n            }\n        }\n        Widget worldMapOrb \u003d client.getWidget(ORBS_GROUP_ID, WORLD_MAP_ORB_CHILD_ID);\n        if (worldMapOrb !\u003d null \u0026\u0026 !worldMapOrb.isHidden()) {\n            Rectangle orbBounds \u003d worldMapOrb.getBounds();\n            clipArea.subtract(new Area(new Ellipse2D.Double(orbBounds.getX(), orbBounds.getY(), orbBounds.getWidth(), orbBounds.getHeight())));\n        }\n        return clipArea;\n    }\n    private void renderMinimapBorder(Graphics2D graphics, GeneralPath borderPath) {\n        graphics.setColor(config.minimapBorderColour());\n        graphics.setStroke(new BasicStroke(config.minimapBorderThickness()));\n        graphics.draw(borderPath);\n    }\n    private GeneralPath createMinimapBorderPath(List\u003cPoint\u003e boundaryPoints) {\n        GeneralPath path \u003d new GeneralPath();\n        for (int i \u003d 0; i \u003c boundaryPoints.size(); i++) {\n            Point p1 \u003d boundaryPoints.get(i);\n            Point p2 \u003d boundaryPoints.get((i + 1) % boundaryPoints.size());\n            if (p1 !\u003d null \u0026\u0026 p2 !\u003d null) {\n                path.moveTo(p1.getX(), p1.getY());\n                path.lineTo(p2.getX(), p2.getY());\n            }\n        }\n        return path;\n    }\n    private void renderMinimapFog(Graphics2D graphics, Shape minimapClipShape, GeneralPath renderAreaPath) {\n        Area renderArea \u003d new Area(renderAreaPath);\n        if (renderArea.contains(minimapClipShape.getBounds2D())) {\n            return;\n        }\n        Area fogArea \u003d new Area(minimapClipShape);\n        fogArea.subtract(renderArea);\n        graphics.setColor(config.minimapFogColour());\n        graphics.fill(fogArea);\n    }\n    private GeneralPath createClippedRenderAreaPath(List\u003cPoint\u003e boundaryPoints, Rectangle minimapBounds) {\n        List\u003cPoint\u003e visiblePoints \u003d boundaryPoints.stream().filter(Objects::nonNull).collect(Collectors.toList());\n        if (visiblePoints.isEmpty()) return createFullMinimapCoveragePath(minimapBounds);\n        if (visiblePoints.size() \u003d\u003d boundaryPoints.size()) {\n            GeneralPath path \u003d new GeneralPath();\n            Point first \u003d visiblePoints.get(0);\n            path.moveTo(first.getX(), first.getY());\n            for (int i \u003d 1; i \u003c visiblePoints.size(); i++) {\n                path.lineTo(visiblePoints.get(i).getX(), visiblePoints.get(i).getY());\n            }\n            path.closePath();\n            return path;\n        }\n        int firstVisible \u003d -1;\n        for (int i \u003d 0; i \u003c boundaryPoints.size(); i++) {\n            if (boundaryPoints.get(i) !\u003d null) {\n                firstVisible \u003d i;\n                break;\n            }\n        }\n        if (firstVisible \u003d\u003d -1) return null;\n        GeneralPath path \u003d new GeneralPath();\n        path.moveTo(boundaryPoints.get(firstVisible).getX(), boundaryPoints.get(firstVisible).getY());\n        int n \u003d boundaryPoints.size();\n        for (int i \u003d 0; i \u003c n; i++) {\n            int currentIndex \u003d (firstVisible + i) % n;\n            int nextIndex \u003d (firstVisible + i + 1) % n;\n            Point p1 \u003d boundaryPoints.get(currentIndex);\n            Point p2 \u003d boundaryPoints.get(nextIndex);\n            if (p1 !\u003d null) {\n                if (p2 !\u003d null) {\n                    path.lineTo(p2.getX(), p2.getY());\n                } else {\n                    int nextVisibleIndex \u003d -1;\n                    for (int j \u003d 2; j \u003c n; j++) {\n                        if (boundaryPoints.get((currentIndex + j) % n) !\u003d null) {\n                            nextVisibleIndex \u003d (currentIndex + j) % n;\n                            break;\n                        }\n                    }\n                    if (nextVisibleIndex !\u003d -1) {\n                        Point nextVisiblePoint \u003d boundaryPoints.get(nextVisibleIndex);\n                        addArcToPath(path, p1, nextVisiblePoint, minimapBounds);\n                    }\n                }\n            }\n        }\n        path.closePath();\n        return path;\n    }\n    private void addArcToPath(GeneralPath path, Point p1, Point p2, Rectangle minimapBounds) {\n        double centerX \u003d minimapBounds.getCenterX();\n        double centerY \u003d minimapBounds.getCenterY();\n        double radius \u003d minimapBounds.width / 2.0 + 1;\n        double startAngle \u003d Math.toDegrees(Math.atan2(p1.getY() - centerY, p1.getX() - centerX));\n        double endAngle \u003d Math.toDegrees(Math.atan2(p2.getY() - centerY, p2.getX() - centerX));\n        double sweep \u003d endAngle - startAngle;\n        if (sweep \u003c\u003d -180) { sweep +\u003d 360; } else if (sweep \u003e 180) { sweep -\u003d 360; }\n        int numSteps \u003d (int) (Math.abs(sweep) / 10) + 1;\n        for (int i \u003d 1; i \u003c\u003d numSteps; i++) {\n            double currentAngleRad \u003d Math.toRadians(startAngle + (sweep * i / numSteps));\n            float x \u003d (float) (centerX + radius * Math.cos(currentAngleRad));\n            float y \u003d (float) (centerY + radius * Math.sin(currentAngleRad));\n            path.lineTo(x, y);\n        }\n    }\n    private List\u003cPoint\u003e getBoundaryPointsWithNulls(WorldPoint center, int radius) {\n        List\u003cPoint\u003e boundaryPoints \u003d new ArrayList\u003c\u003e();\n        int sampleRate \u003d Math.max(1, radius / 12);\n        boundaryPoints.add(getMinimapPointWithOffset(new WorldPoint(center.getX() - radius, center.getY() - radius, center.getPlane()), -HALF_TILE_OFFSET, -HALF_TILE_OFFSET));\n        for (int x \u003d -radius; x \u003c\u003d radius; x +\u003d sampleRate) { boundaryPoints.add(getMinimapPointWithOffset(new WorldPoint(center.getX() + x, center.getY() - radius, center.getPlane()), 0, -HALF_TILE_OFFSET)); }\n        boundaryPoints.add(getMinimapPointWithOffset(new WorldPoint(center.getX() + radius, center.getY() - radius, center.getPlane()), HALF_TILE_OFFSET, -HALF_TILE_OFFSET));\n        for (int y \u003d -radius; y \u003c\u003d radius; y +\u003d sampleRate) { boundaryPoints.add(getMinimapPointWithOffset(new WorldPoint(center.getX() + radius, center.getY() + y, center.getPlane()), HALF_TILE_OFFSET, 0)); }\n        boundaryPoints.add(getMinimapPointWithOffset(new WorldPoint(center.getX() + radius, center.getY() + radius, center.getPlane()), HALF_TILE_OFFSET, HALF_TILE_OFFSET));\n        for (int x \u003d radius; x \u003e\u003d -radius; x -\u003d sampleRate) { boundaryPoints.add(getMinimapPointWithOffset(new WorldPoint(center.getX() + x, center.getY() + radius, center.getPlane()), 0, HALF_TILE_OFFSET)); }\n        boundaryPoints.add(getMinimapPointWithOffset(new WorldPoint(center.getX() - radius, center.getY() + radius, center.getPlane()), -HALF_TILE_OFFSET, HALF_TILE_OFFSET));\n        for (int y \u003d radius; y \u003e\u003d -radius; y -\u003d sampleRate) { boundaryPoints.add(getMinimapPointWithOffset(new WorldPoint(center.getX() - radius, center.getY() + y, center.getPlane()), -HALF_TILE_OFFSET, 0)); }\n        return boundaryPoints;\n    }\n    private Point getMinimapPointWithOffset(WorldPoint worldPoint, int xOffset, int yOffset) {\n        LocalPoint lp \u003d LocalPoint.fromWorld(client.getTopLevelWorldView(), worldPoint);\n        if (lp \u003d\u003d null) return null;\n        LocalPoint offsetLp \u003d new LocalPoint(lp.getX() + xOffset, lp.getY() + yOffset, client.getTopLevelWorldView());\n        return Perspective.localToMinimap(client, offsetLp);\n    }\n    private GeneralPath createFullMinimapCoveragePath(Rectangle minimapBounds) {\n        GeneralPath fullPath \u003d new GeneralPath();\n        double centerX \u003d minimapBounds.getCenterX();\n        double centerY \u003d minimapBounds.getCenterY();\n        double radius \u003d Math.max(minimapBounds.width, minimapBounds.height);\n        int numSegments \u003d 32;\n        for (int i \u003d 0; i \u003c numSegments; i++) {\n            double angle \u003d 2 * Math.PI * i / numSegments;\n            double x \u003d centerX + radius * Math.cos(angle);\n            double y \u003d centerY + radius * Math.sin(angle);\n            if (i \u003d\u003d 0) {\n                fullPath.moveTo(x, y);\n            } else {\n                fullPath.lineTo(x, y);\n            }\n        }\n        fullPath.closePath();\n        return fullPath;\n    }\n}","filePath":"src\\main\\java\\com\\fogofwar\\box\\FogOfWarMinimapOverlay.java"},{"fileName":"FogOfWarWorldOverlay.java","content":"package com.fogofwar.box;\n\nimport com.fogofwar.FogOfWarConfig;\nimport com.fogofwar.util.AreaManager;\nimport com.fogofwar.util.ClientState;\nimport com.fogofwar.util.DynamicRenderDistance;\nimport net.runelite.api.*;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\n\nimport javax.inject.Inject;\nimport java.awt.*;\nimport java.awt.geom.Area;\nimport java.awt.geom.GeneralPath;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class FogOfWarWorldOverlay extends Overlay {\n    private final Client client;\n    private final FogOfWarConfig config;\n    private final ClientState clientState;\n    private final DynamicRenderDistance dynamicRenderDistance;\n    private final AreaManager areaManager;\n    private final List\u003cnet.runelite.api.Point\u003e boundaryPoints \u003d new ArrayList\u003c\u003e();\n    private final GeneralPath path \u003d new GeneralPath();\n    @Inject\n    public FogOfWarWorldOverlay(Client client, FogOfWarConfig config, ClientState clientState, DynamicRenderDistance dynamicRenderDistance, AreaManager areaManager) {\n        this.client \u003d client;\n        this.config \u003d config;\n        this.clientState \u003d clientState;\n        this.dynamicRenderDistance \u003d dynamicRenderDistance;\n        this.areaManager \u003d areaManager;\n        setPosition(OverlayPosition.DYNAMIC);\n        setPriority(Overlay.PRIORITY_LOW);\n        setLayer(OverlayLayer.ABOVE_SCENE);\n    }\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        if (areaManager.isPlayerInExcludedArea() || clientState.isClientNotReady() || (config.onlyInWilderness() \u0026\u0026 clientState.isNotInWilderness())) {\n            return null;\n        }\n        int radius \u003d dynamicRenderDistance.getCurrentRenderDistance();\n        WorldPoint playerLocation \u003d client.getLocalPlayer().getWorldLocation();\n        GeneralPath renderAreaBoundary \u003d createRenderAreaBoundary(playerLocation, radius);\n        if (renderAreaBoundary \u003d\u003d null) {\n            if (config.showWorldFog()) {\n                Rectangle viewport \u003d new Rectangle(client.getViewportXOffset(), client.getViewportYOffset(), client.getViewportWidth(), client.getViewportHeight());\n                graphics.setColor(config.worldFogColour());\n                graphics.fill(viewport);\n            }\n            return null;\n        }\n        if (config.showWorldFog()) {\n            renderWorldFog(graphics, renderAreaBoundary);\n        }\n        if (config.showWorldBorder()) {\n            renderWorldBorder(graphics, renderAreaBoundary);\n        }\n        return null;\n    }\n    private void subtractEntitiesFromFog(Area fogArea) {\n        WorldView worldView \u003d client.getTopLevelWorldView();\n        for (Player player : worldView.players()) {\n            if (player \u003d\u003d null) continue;\n            Shape convexHull \u003d player.getConvexHull();\n            if (convexHull !\u003d null) {\n                fogArea.subtract(new Area(convexHull));\n            }\n        }\n        for (NPC npc : worldView.npcs()) {\n            if (npc \u003d\u003d null) continue;\n            Shape convexHull \u003d npc.getConvexHull();\n            if (convexHull !\u003d null) {\n                fogArea.subtract(new Area(convexHull));\n            }\n        }\n    }\n    private void renderWorldFog(Graphics2D graphics, GeneralPath renderAreaBoundary) {\n        Rectangle viewport \u003d new Rectangle(\n                client.getViewportXOffset(),\n                client.getViewportYOffset(),\n                client.getViewportWidth(),\n                client.getViewportHeight()\n        );\n        Area screenArea \u003d new Area(viewport);\n        screenArea.subtract(new Area(renderAreaBoundary));\n        if (config.excludeEntities()) {\n            subtractEntitiesFromFog(screenArea);\n        }\n        graphics.setColor(config.worldFogColour());\n        graphics.fill(screenArea);\n    }\n    private void renderWorldBorder(Graphics2D graphics, GeneralPath renderAreaBoundary) {\n        graphics.setColor(config.worldBorderColour());\n        graphics.setStroke(new BasicStroke(config.worldBorderThickness()));\n        graphics.draw(renderAreaBoundary);\n    }\n    private GeneralPath createRenderAreaBoundary(WorldPoint centerWp, int radius) {\n        LocalPoint centerLp \u003d LocalPoint.fromWorld(client.getTopLevelWorldView(), centerWp);\n        if (centerLp \u003d\u003d null) return null;\n        boundaryPoints.clear();\n        int localRadius \u003d radius * 128 + 64;\n        int plane \u003d centerWp.getPlane();\n        int sampleCount \u003d Math.max(1, radius / 4) * 4;\n        int step \u003d (localRadius * 2) / sampleCount;\n        for (int i \u003d 0; i \u003c sampleCount; i++) { addPoint(boundaryPoints, centerLp.getX() - localRadius + (i * step), centerLp.getY() + localRadius, plane); }\n        for (int i \u003d 0; i \u003c sampleCount; i++) { addPoint(boundaryPoints, centerLp.getX() + localRadius, centerLp.getY() + localRadius - (i * step), plane); }\n        for (int i \u003d 0; i \u003c sampleCount; i++) { addPoint(boundaryPoints, centerLp.getX() + localRadius - (i * step), centerLp.getY() - localRadius, plane); }\n        for (int i \u003d 0; i \u003c sampleCount; i++) { addPoint(boundaryPoints, centerLp.getX() - localRadius, centerLp.getY() - localRadius + (i * step), plane); }\n        return createPathFromPoints(boundaryPoints);\n    }\n    private void addPoint(List\u003cnet.runelite.api.Point\u003e points, int localX, int localY, int plane) {\n        LocalPoint lp \u003d new LocalPoint(localX, localY, client.getTopLevelWorldView());\n        net.runelite.api.Point canvasPoint \u003d Perspective.localToCanvas(client, lp, plane);\n        if (canvasPoint !\u003d null) {\n            points.add(canvasPoint);\n        }\n    }\n    private GeneralPath createPathFromPoints(List\u003cnet.runelite.api.Point\u003e points) {\n        if (points.isEmpty()) return null;\n        path.reset();\n        path.moveTo(points.get(0).getX(), points.get(0).getY());\n        for (int i \u003d 1; i \u003c points.size(); i++) {\n            path.lineTo(points.get(i).getX(), points.get(i).getY());\n        }\n        path.closePath();\n        return path;\n    }\n}","filePath":"src\\main\\java\\com\\fogofwar\\box\\FogOfWarWorldOverlay.java"},{"fileName":"PlaneDisplayOverlay.java","content":"package com.fogofwar.debug;\n\nimport com.fogofwar.FogOfWarConfig;\nimport com.fogofwar.util.ClientState;\nimport net.runelite.api.Client;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.LineComponent;\nimport javax.inject.Inject;\nimport java.awt.*;\n\npublic class PlaneDisplayOverlay extends OverlayPanel {\n    private final Client client;\n    private final FogOfWarConfig config;\n    private final ClientState clientState;\n    @Inject\n    public PlaneDisplayOverlay(Client client, FogOfWarConfig config, ClientState clientState) {\n        this.client \u003d client;\n        this.config \u003d config;\n        this.clientState \u003d clientState;\n        setPosition(OverlayPosition.TOP_LEFT);\n    }\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        if (!config.showPlaneDisplay() || clientState.isClientNotReady()) {\n            return null;\n        }\n        int plane \u003d client.getLocalPlayer().getWorldLocation().getPlane();\n        panelComponent.getChildren().add(LineComponent.builder()\n                .left(\"Current plane:\")\n                .right(String.valueOf(plane))\n                .build());\n        return super.render(graphics);\n    }\n}","filePath":"src\\main\\java\\com\\fogofwar\\debug\\PlaneDisplayOverlay.java"},{"fileName":"FadingPlayer.java","content":"package com.fogofwar.fade;\n\nimport lombok.Getter;\nimport lombok.Setter;\nimport net.runelite.api.Player;\nimport net.runelite.api.coords.WorldPoint;\n\n@Getter\nclass FadingPlayer {\n    private final Player player;\n    @Setter\n    private WorldPoint lastLocation;\n    private final WorldPoint velocity;\n    @Setter\n    private int ticksSinceDisappeared \u003d 0;\n    FadingPlayer(Player player, WorldPoint velocity) {\n        this.player \u003d player;\n        this.velocity \u003d velocity;\n        this.lastLocation \u003d player.getWorldLocation();\n    }\n}","filePath":"src\\main\\java\\com\\fogofwar\\fade\\FadingPlayer.java"},{"fileName":"FadingPlayerManager.java","content":"package com.fogofwar.fade;\n\nimport com.fogofwar.FogOfWarConfig;\nimport com.fogofwar.util.AreaManager;\nimport com.fogofwar.util.DynamicRenderDistance;\nimport lombok.Getter;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.Player;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.Map;\nimport java.util.Set;\n\n@Singleton\npublic class FadingPlayerManager {\n    @Inject\n    @SuppressWarnings(\"unused\")\n    private Client client;\n    @Inject\n    @SuppressWarnings(\"unused\")\n    private FogOfWarConfig config;\n    @Inject\n    @SuppressWarnings(\"unused\")\n    private OverlayManager overlayManager;\n    @Inject\n    @SuppressWarnings(\"unused\")\n    private EventBus eventBus;\n    @Inject\n    @SuppressWarnings(\"unused\")\n    private FadingPlayerOverlay fadingPlayerOverlay;\n    @Inject\n    @SuppressWarnings(\"unused\")\n    private FadingPlayerMinimapOverlay fadingPlayerMinimapOverlay;\n    @Inject\n    @SuppressWarnings(\"unused\")\n    private DynamicRenderDistance dynamicRenderDistance;\n    @Inject\n    @SuppressWarnings(\"unused\")\n    private AreaManager areaManager;\n    @Getter\n    private final Map\u003cPlayer, FadingPlayer\u003e fadingPlayers \u003d new HashMap\u003c\u003e();\n    private final Map\u003cPlayer, WorldPoint\u003e lastTickPlayerLocations \u003d new HashMap\u003c\u003e();\n    private final Map\u003cPlayer, WorldPoint\u003e twoTicksAgoPlayerLocations \u003d new HashMap\u003c\u003e();\n    public void start() {\n        overlayManager.add(fadingPlayerOverlay);\n        overlayManager.add(fadingPlayerMinimapOverlay);\n        eventBus.register(this);\n    }\n    public void stop() {\n        overlayManager.remove(fadingPlayerOverlay);\n        overlayManager.remove(fadingPlayerMinimapOverlay);\n        eventBus.unregister(this);\n        clearAllTracking();\n    }\n    @Subscribe\n    @SuppressWarnings(\"unused\")\n    public void onGameStateChanged(GameStateChanged event) {\n        if (event.getGameState() \u003d\u003d GameState.LOADING) clearAllTracking();\n    }\n    @Subscribe\n    @SuppressWarnings(\"unused\")\n    public void onGameTick(GameTick event) {\n        if (client.getGameState() !\u003d GameState.LOGGED_IN) {\n            clearAllTracking();\n            return;\n        }\n        if (areaManager.isPlayerInExcludedArea()) {\n            if (!fadingPlayers.isEmpty()) {\n                clearAllTracking();\n            }\n            return;\n        }\n        if (config.enableFadingPlayers()) {\n            handleFadingPlayers();\n            updatePlayerTracking();\n        } else {\n            clearAllTracking();\n        }\n    }\n    private void clearAllTracking() {\n        fadingPlayers.clear();\n        lastTickPlayerLocations.clear();\n        twoTicksAgoPlayerLocations.clear();\n    }\n    private void handleFadingPlayers() {\n        fadingPlayers.entrySet().removeIf(entry -\u003e {\n            FadingPlayer fp \u003d entry.getValue();\n            fp.setTicksSinceDisappeared(fp.getTicksSinceDisappeared() + 1);\n            if (fp.getTicksSinceDisappeared() \u003e config.fadeDuration()) return true;\n            WorldPoint localPlayerLocation \u003d client.getLocalPlayer().getWorldLocation();\n            if (fp.getTicksSinceDisappeared() \u003e 1 \u0026\u0026 fp.getLastLocation().distanceTo(localPlayerLocation) \u003c\u003d dynamicRenderDistance.getCurrentRenderDistance()) {\n                return true;\n            }\n            if (config.extrapolateMovement()) {\n                WorldPoint nextPos \u003d new WorldPoint(\n                        fp.getLastLocation().getX() + fp.getVelocity().getX(),\n                        fp.getLastLocation().getY() + fp.getVelocity().getY(),\n                        fp.getLastLocation().getPlane()\n                );\n                fp.setLastLocation(nextPos);\n            }\n            return false;\n        });\n    }\n    private void updatePlayerTracking() {\n        Map\u003cPlayer, WorldPoint\u003e currentPlayerLocations \u003d new HashMap\u003c\u003e();\n        Set\u003cString\u003e currentPlayerNames \u003d new HashSet\u003c\u003e();\n        for (Player player : client.getTopLevelWorldView().players()) {\n            if (player !\u003d null \u0026\u0026 player !\u003d client.getLocalPlayer()) {\n                currentPlayerLocations.put(player, player.getWorldLocation());\n                if (player.getName() !\u003d null) {\n                    currentPlayerNames.add(player.getName());\n                }\n            }\n        }\n        Set\u003cPlayer\u003e disappearedPlayers \u003d new HashSet\u003c\u003e(lastTickPlayerLocations.keySet());\n        disappearedPlayers.removeAll(currentPlayerLocations.keySet());\n        WorldPoint currentLocalPlayerLocation \u003d client.getLocalPlayer().getWorldLocation();\n        for (Player player : disappearedPlayers) {\n            if (fadingPlayers.containsKey(player)) continue;\n            WorldPoint lastLocation \u003d lastTickPlayerLocations.get(player);\n            if (lastLocation \u003d\u003d null) continue;\n            WorldPoint twoTicksAgoLocation \u003d twoTicksAgoPlayerLocations.get(player);\n            WorldPoint velocity \u003d (twoTicksAgoLocation !\u003d null)\n                    ? new WorldPoint(lastLocation.getX() - twoTicksAgoLocation.getX(), lastLocation.getY() - twoTicksAgoLocation.getY(), 0)\n                    : new WorldPoint(0, 0, 0);\n            int renderDistance \u003d dynamicRenderDistance.getCurrentRenderDistance();\n            int velocityMagnitude \u003d Math.abs(velocity.getX()) + Math.abs(velocity.getY());\n            int distanceFromPlayer \u003d lastLocation.distanceTo(currentLocalPlayerLocation);\n            boolean isAtRenderLimit \u003d distanceFromPlayer \u003e\u003d renderDistance - 1;\n            boolean isRunningNearLimit \u003d distanceFromPlayer \u003e\u003d renderDistance - 2 \u0026\u0026 velocityMagnitude \u003e\u003d 2;\n            if (config.onlyFadeAtRenderLimit()) {\n                if (!isAtRenderLimit \u0026\u0026 !isRunningNearLimit) {\n                    continue;\n                }\n            }\n            WorldPoint initialFadeLocation;\n            if (config.extrapolateMovement()) {\n                int dx \u003d lastLocation.getX() - currentLocalPlayerLocation.getX();\n                int dy \u003d lastLocation.getY() - currentLocalPlayerLocation.getY();\n                boolean onXEdge \u003d Math.abs(dx) \u003e\u003d renderDistance - 1;\n                boolean onYEdge \u003d Math.abs(dy) \u003e\u003d renderDistance - 1;\n                WorldPoint predictedNextLocation \u003d new WorldPoint(lastLocation.getX() + velocity.getX(), lastLocation.getY() + velocity.getY(), lastLocation.getPlane());\n                boolean isMovingIntoRenderArea \u003d (onXEdge \u0026\u0026 dx * velocity.getX() \u003c 0) || (onYEdge \u0026\u0026 dy * velocity.getY() \u003c 0);\n                if (isMovingIntoRenderArea) {\n                    int pushX \u003d onXEdge ? Integer.signum(dx) : 0;\n                    int pushY \u003d onYEdge ? Integer.signum(dy) : 0;\n                    initialFadeLocation \u003d new WorldPoint(predictedNextLocation.getX() + pushX, predictedNextLocation.getY() + pushY, predictedNextLocation.getPlane());\n                } else {\n                    initialFadeLocation \u003d predictedNextLocation;\n                    if (isAtRenderLimit || isRunningNearLimit) {\n                        while (initialFadeLocation.distanceTo(currentLocalPlayerLocation) \u003c\u003d renderDistance) {\n                            int pushX \u003d 0;\n                            int pushY \u003d 0;\n                            if (Math.abs(dx) \u003e Math.abs(dy)) {\n                                pushX \u003d Integer.signum(dx);\n                            } else if (Math.abs(dy) \u003e Math.abs(dx)) {\n                                pushY \u003d Integer.signum(dy);\n                            } else {\n                                pushX \u003d Integer.signum(dx);\n                                pushY \u003d Integer.signum(dy);\n                            }\n                            initialFadeLocation \u003d new WorldPoint(initialFadeLocation.getX() + pushX, initialFadeLocation.getY() + pushY, initialFadeLocation.getPlane());\n                        }\n                    }\n                }\n            } else {\n                initialFadeLocation \u003d lastLocation;\n            }\n            FadingPlayer fp \u003d new FadingPlayer(player, velocity);\n            fp.setLastLocation(initialFadeLocation);\n            fadingPlayers.put(player, fp);\n        }\n        twoTicksAgoPlayerLocations.clear();\n        twoTicksAgoPlayerLocations.putAll(lastTickPlayerLocations);\n        lastTickPlayerLocations.clear();\n        lastTickPlayerLocations.putAll(currentPlayerLocations);\n        if (!fadingPlayers.isEmpty() \u0026\u0026 !currentPlayerNames.isEmpty()) {\n            fadingPlayers.entrySet().removeIf(entry -\u003e {\n                Player fadingPlayer \u003d entry.getKey();\n                return fadingPlayer.getName() !\u003d null \u0026\u0026 currentPlayerNames.contains(fadingPlayer.getName());\n            });\n        }\n    }\n}","filePath":"src\\main\\java\\com\\fogofwar\\fade\\FadingPlayerManager.java"},{"fileName":"FadingPlayerMinimapOverlay.java","content":"package com.fogofwar.fade;\n\nimport com.fogofwar.FogOfWarConfig;\nimport com.fogofwar.util.ClientState;\nimport com.fogofwar.util.MinimapUtil;\nimport net.runelite.api.Client;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Point;\nimport net.runelite.api.WorldView;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\n\nimport javax.inject.Inject;\nimport java.awt.*;\n\npublic class FadingPlayerMinimapOverlay extends Overlay {\n    private static final int DOT_SIZE \u003d 4;\n    private final Client client;\n    private final FogOfWarConfig config;\n    private final ClientState clientState;\n    private final FadingPlayerManager manager;\n    @Inject\n    protected FadingPlayerMinimapOverlay(Client client, FogOfWarConfig config, ClientState clientState, FadingPlayerManager manager) {\n        this.client \u003d client;\n        this.config \u003d config;\n        this.clientState \u003d clientState;\n        this.manager \u003d manager;\n        setPosition(OverlayPosition.DYNAMIC);\n        setPriority(Overlay.PRIORITY_HIGH);\n        setLayer(OverlayLayer.ABOVE_WIDGETS);\n    }\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        if (!config.enableFadingPlayers() || !config.showFadingOnMinimap() || clientState.isClientNotReady()) return null;\n        if (config.onlyInWilderness() \u0026\u0026 clientState.isNotInWilderness()) return null;\n        Widget minimapWidget \u003d MinimapUtil.getMinimapWidget(client);\n        if (minimapWidget \u003d\u003d null) return null;\n        Shape oldClip \u003d graphics.getClip();\n        graphics.setClip(minimapWidget.getBounds());\n        for (FadingPlayer fadingPlayer : manager.getFadingPlayers().values()) {\n            renderFadingPlayer(graphics, fadingPlayer);\n        }\n        graphics.setClip(oldClip);\n        return null;\n    }\n    private void renderFadingPlayer(Graphics2D graphics, FadingPlayer fadingPlayer) {\n        WorldPoint wp \u003d fadingPlayer.getLastLocation();\n        WorldView wv \u003d client.getTopLevelWorldView();\n        LocalPoint lp \u003d LocalPoint.fromWorld(wv, wp);\n        if (lp \u003d\u003d null) return;\n        Point mp \u003d Perspective.localToMinimap(client, lp);\n        if (mp \u003d\u003d null) return;\n        float fadeDuration \u003d Math.max(1, config.fadeDuration());\n        float remainingTicks \u003d fadeDuration - fadingPlayer.getTicksSinceDisappeared();\n        float opacity \u003d remainingTicks / fadeDuration;\n        Color color \u003d new Color(\n                config.fadeColor().getRed() / 255f,\n                config.fadeColor().getGreen() / 255f,\n                config.fadeColor().getBlue() / 255f,\n                opacity\n        );\n        Color shadedColor \u003d color.darker();\n        int x \u003d mp.getX() - DOT_SIZE / 2;\n        int y \u003d mp.getY() - DOT_SIZE / 2 + 1;\n        graphics.setColor(shadedColor);\n        graphics.fillArc(x, y, DOT_SIZE, DOT_SIZE, 180, 180);\n        graphics.setColor(color);\n        graphics.fillArc(x, y, DOT_SIZE, DOT_SIZE, 0, 180);\n    }\n}","filePath":"src\\main\\java\\com\\fogofwar\\fade\\FadingPlayerMinimapOverlay.java"},{"fileName":"FadingPlayerOverlay.java","content":"package com.fogofwar.fade;\n\nimport com.fogofwar.FogOfWarConfig;\nimport com.fogofwar.util.ClientState;\nimport net.runelite.api.Client;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Point;\nimport net.runelite.api.WorldView;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\n\nimport javax.inject.Inject;\nimport java.awt.*;\npublic class FadingPlayerOverlay extends Overlay {\n    private final Client client;\n    private final FogOfWarConfig config;\n    private final FadingPlayerManager manager;\n    private final ClientState clientState;\n    @Inject\n    protected FadingPlayerOverlay(Client client, FogOfWarConfig config, FadingPlayerManager manager, ClientState clientState) {\n        this.client \u003d client;\n        this.config \u003d config;\n        this.manager \u003d manager;\n        this.clientState \u003d clientState;\n        setPosition(OverlayPosition.DYNAMIC);\n        setPriority(Overlay.PRIORITY_HIGH);\n        setLayer(OverlayLayer.ABOVE_SCENE);\n    }\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        if (!config.enableFadingPlayers() || !config.showFadingInWorld() || clientState.isClientNotReady()) return null;\n        if (config.onlyInWilderness() \u0026\u0026 clientState.isNotInWilderness()) return null;\n        for (FadingPlayer fadingPlayer : manager.getFadingPlayers().values()) {\n            renderFadingPlayer(graphics, fadingPlayer);\n        }\n        return null;\n    }\n    private void renderFadingPlayer(Graphics2D graphics, FadingPlayer fadingPlayer) {\n        WorldPoint wp \u003d fadingPlayer.getLastLocation();\n        WorldView wv \u003d client.getTopLevelWorldView();\n        LocalPoint lp \u003d LocalPoint.fromWorld(wv, wp);\n        if (lp \u003d\u003d null) return;\n        Polygon poly \u003d Perspective.getCanvasTilePoly(client, lp);\n        if (poly \u003d\u003d null) return;\n        float fadeDuration \u003d Math.max(1, config.fadeDuration());\n        float remainingTicks \u003d fadeDuration - fadingPlayer.getTicksSinceDisappeared();\n        float opacity \u003d remainingTicks / fadeDuration;\n        if (opacity \u003c\u003d 0) return;\n        Color base \u003d config.fadeColor();\n        Color color \u003d new Color(\n                base.getRed() / 255f,\n                base.getGreen() / 255f,\n                base.getBlue() / 255f,\n                (base.getAlpha() / 255f) * opacity\n        );\n        graphics.setColor(color);\n        graphics.fill(poly);\n        if (config.showFadeNames()) {\n            String name \u003d fadingPlayer.getPlayer().getName();\n            if (name !\u003d null) {\n                Point textLoc \u003d Perspective.getCanvasTextLocation(client, graphics, lp, name, 0);\n                if (textLoc !\u003d null) OverlayUtil.renderTextLocation(graphics, textLoc, name, color);\n            }\n        }\n    }\n}","filePath":"src\\main\\java\\com\\fogofwar\\fade\\FadingPlayerOverlay.java"},{"fileName":"FogOfWarConfig.java","content":"package com.fogofwar;\n\nimport net.runelite.client.config.*;\n\nimport java.awt.*;\n@ConfigGroup(\"entityrenderdistance\")\npublic interface FogOfWarConfig extends Config {\n    @ConfigItem(\n            keyName \u003d \"onlyInWilderness\",\n            name \u003d \"Only show in Wilderness\",\n            description \u003d \"Only display overlays while in the Wilderness.\",\n            position \u003d 0\n    )\n    default boolean onlyInWilderness() { return false; }\n    @ConfigSection(\n            name \u003d \"World\",\n            description \u003d \"Settings for the world overlay\",\n            position \u003d 2\n    )\n    String worldSection \u003d \"worldSection\";\n    @ConfigItem(\n            keyName \u003d \"showWorldFog\",\n            name \u003d \"Fog of war\",\n            description \u003d \"Shades the area outside of the render distance with a fog effect.\",\n            section \u003d worldSection,\n            position \u003d 0\n    )\n    default boolean showWorldFog() { return true; }\n    @Alpha\n    @ConfigItem(\n            keyName \u003d \"worldFogColour\",\n            name \u003d \"Fog colour\",\n            description \u003d \"The colour of the world\u0027s fog of war effect.\",\n            section \u003d worldSection,\n            position \u003d 1\n    )\n    default Color worldFogColour() { return new Color(0, 0, 0, 125); }\n    @ConfigItem(\n            keyName \u003d \"excludeEntities\",\n            name \u003d \"Exclude Entities from Fog\",\n            description \u003d \"Prevents the fog from drawing on top of players and NPCs. May impact performance in crowded areas.\",\n            section \u003d worldSection,\n            position \u003d 2\n    )\n    default boolean excludeEntities() { return true; }\n    @ConfigItem(\n            keyName \u003d \"showWorldBorder\",\n            name \u003d \"Show border\",\n            description \u003d \"Shows the render distance border in the world view.\",\n            section \u003d worldSection,\n            position \u003d 3\n    )\n    default boolean showWorldBorder() { return false; }\n    @Alpha\n    @ConfigItem(\n            keyName \u003d \"worldBorderColour\",\n            name \u003d \"Border colour\",\n            description \u003d \"The colour of the world render distance border.\",\n            section \u003d worldSection,\n            position \u003d 4\n    )\n    default Color worldBorderColour() { return new Color(0, 0, 0, 125); }\n    @Range(min \u003d 1, max \u003d 16)\n    @ConfigItem(\n            keyName \u003d \"worldBorderThickness\",\n            name \u003d \"Border thickness\",\n            description \u003d \"The thickness of the world render distance border.\",\n            section \u003d worldSection,\n            position \u003d 5\n    )\n    default int worldBorderThickness() { return 1; }\n    @ConfigSection(\n            name \u003d \"Minimap\",\n            description \u003d \"Settings for the minimap overlay\",\n            position \u003d 3\n    )\n    String minimapSection \u003d \"minimapSection\";\n    @ConfigItem(\n            keyName \u003d \"showMinimapFog\",\n            name \u003d \"Fog of war\",\n            description \u003d \"Shades the area outside the render distance on the minimap with a fog effect.\",\n            section \u003d minimapSection,\n            position \u003d 0\n    )\n    default boolean showMinimapFog() { return true; }\n    @Alpha\n    @ConfigItem(\n            keyName \u003d \"minimapFogColour\",\n            name \u003d \"Fog colour\",\n            description \u003d \"The colour of the minimap\u0027s fog of war effect.\",\n            section \u003d minimapSection,\n            position \u003d 1\n    )\n    default Color minimapFogColour() { return new Color(0, 0, 0, 125); }\n    @ConfigItem(\n            keyName \u003d \"showMinimapBorder\",\n            name \u003d \"Show border\",\n            description \u003d \"Shows the render distance border on the minimap.\",\n            section \u003d minimapSection,\n            position \u003d 2\n    )\n    default boolean showMinimapBorder() { return false; }\n    @Alpha\n    @ConfigItem(\n            keyName \u003d \"minimapBorderColour\",\n            name \u003d \"Border colour\",\n            description \u003d \"The colour of the minimap render distance border.\",\n            section \u003d minimapSection,\n            position \u003d 3\n    )\n    default Color minimapBorderColour() { return new Color(0, 0, 0, 125); }\n    @Range(min \u003d 1, max \u003d 16)\n    @ConfigItem(\n            keyName \u003d \"minimapBorderThickness\",\n            name \u003d \"Border thickness\",\n            description \u003d \"The thickness of the minimap render distance border.\",\n            section \u003d minimapSection,\n            position \u003d 4\n    )\n    default int minimapBorderThickness() { return 1; }\n    @ConfigSection(\n            name \u003d \"Fading Players\",\n            description \u003d \"Settings for marking players that leave render distance\",\n            position \u003d 4\n    )\n    String fadingPlayerSection \u003d \"fadingPlayerSection\";\n    @ConfigItem(\n            keyName \u003d \"enableFadingPlayers\",\n            name \u003d \"Enable fading player tiles\",\n            description \u003d \"Mark players that leave render distance with a fading marker.\",\n            section \u003d fadingPlayerSection,\n            position \u003d 0\n    )\n    default boolean enableFadingPlayers() { return false; }\n    @ConfigItem(\n            keyName \u003d \"onlyFadeAtRenderLimit\",\n            name \u003d \"Only fade at the limit\",\n            description \u003d \"Only create a fading marker if the player disappears at the edge of the render distance.\",\n            section \u003d fadingPlayerSection,\n            position \u003d 1\n    )\n    default boolean onlyFadeAtRenderLimit() { return true; }\n    @ConfigItem(\n            keyName \u003d \"extrapolateMovement\",\n            name \u003d \"Extrapolate movement\",\n            description \u003d \"Fading player markers will continue to move based on their last known velocity.\",\n            section \u003d fadingPlayerSection,\n            position \u003d 2\n    )\n    default boolean extrapolateMovement() { return true; }\n    @ConfigItem(\n            keyName \u003d \"showFadeNames\",\n            name \u003d \"Label tiles after players\",\n            description \u003d \"Show the player\u0027s name on the fading marker in the world view.\",\n            section \u003d fadingPlayerSection,\n            position \u003d 3\n    )\n    default boolean showFadeNames() { return true; }\n    @ConfigItem(\n            keyName \u003d \"showFadingInWorld\",\n            name \u003d \"Show in world\",\n            description \u003d \"Show fading player markers in the main game view.\",\n            section \u003d fadingPlayerSection,\n            position \u003d 4\n    )\n    default boolean showFadingInWorld() { return true; }\n    @ConfigItem(\n            keyName \u003d \"showFadingOnMinimap\",\n            name \u003d \"Show on minimap\",\n            description \u003d \"Show fading player markers on the minimap.\",\n            section \u003d fadingPlayerSection,\n            position \u003d 5\n    )\n    default boolean showFadingOnMinimap() { return true; }\n    @Range(min \u003d 1, max \u003d 16)\n    @ConfigItem(\n            keyName \u003d \"fadeDuration\",\n            name \u003d \"Fade duration (ticks)\",\n            description \u003d \"How many game ticks it takes for a marker to completely fade.\",\n            section \u003d fadingPlayerSection,\n            position \u003d 6\n    )\n    default int fadeDuration() { return 2; }\n    @Alpha\n    @ConfigItem(\n            keyName \u003d \"fadeColor\",\n            name \u003d \"Fade marker colour\",\n            description \u003d \"The colour of the fading tile marker.\",\n            section \u003d fadingPlayerSection,\n            position \u003d 7\n    )\n    default Color fadeColor() { return new Color(255, 0, 0, 150); }\n    @ConfigSection(\n            name \u003d \"Tweaks\",\n            description \u003d \"Advanced settings for experimental features.\",\n            position \u003d 5,\n            closedByDefault \u003d true\n    )\n    String tweaksSection \u003d \"tweaksSection\";\n    @Range(min \u003d 1, max \u003d 64)\n    @ConfigItem(\n            keyName \u003d \"renderDistanceRadius\",\n            name \u003d \"Maximum render distance\",\n            description \u003d \"Sets the maximum possible render distance the plugin will use (normally 15).\u003cbr\u003eNote: this does NOT change the game\u0027s render distance. Adjust this only if Jagex changes the render distance in a future game update.\",\n            section \u003d tweaksSection,\n            position \u003d 0\n    )\n    default int renderDistanceRadius() { return 15; }\n    @ConfigItem(\n            keyName \u003d \"enableDynamicRenderDistance\",\n            name \u003d \"Enable dynamic render distance\",\n            description \u003d \"(Experimental) Automatically scales the render distance based on player count in high-population areas.\",\n            section \u003d tweaksSection,\n            position \u003d 1\n    )\n    default boolean enableDynamicRenderDistance() { return false; }\n    @Range(min \u003d 1, max \u003d 500)\n    @ConfigItem(\n            keyName \u003d \"dynamicRenderDistancePlayerThreshold\",\n            name \u003d \"Player count trigger\",\n            description \u003d \"(Experimental) The number of players needed to trigger the dynamic render distance check.\",\n            section \u003d tweaksSection,\n            position \u003d 2\n    )\n    default int dynamicRenderDistancePlayerThreshold() { return 100; }\n    @ConfigItem(\n            keyName \u003d \"showPlaneDisplay\",\n            name \u003d \"Show Plane Display\",\n            description \u003d \"Shows the player\u0027s current plane in an overlay. Useful for debugging.\",\n            section \u003d tweaksSection,\n            position \u003d 3\n    )\n    default boolean showPlaneDisplay() { return false; }\n}","filePath":"src\\main\\java\\com\\fogofwar\\FogOfWarConfig.java"},{"fileName":"FogOfWarPlugin.java","content":"package com.fogofwar;\n\nimport com.fogofwar.box.FogOfWarMinimapOverlay;\nimport com.fogofwar.box.FogOfWarWorldOverlay;\nimport com.fogofwar.debug.PlaneDisplayOverlay;\nimport com.fogofwar.fade.FadingPlayerManager;\nimport com.fogofwar.util.AreaManager;\nimport com.fogofwar.util.DynamicRenderDistance;\nimport com.google.inject.Provides;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\nimport javax.inject.Inject;\n@PluginDescriptor(\n        name \u003d \"Fog of War\",\n        description \u003d \"Applies a fog of war effect outside of the player render distance, in both the world and on the minimap.\",\n        configName \u003d \"EntityRenderDistancePlugin\"\n)\npublic class FogOfWarPlugin extends Plugin {\n    @Inject\n    @SuppressWarnings(\"unused\")\n    private OverlayManager overlayManager;\n    @Inject\n    @SuppressWarnings(\"unused\")\n    private FogOfWarWorldOverlay worldOverlay;\n    @Inject\n    @SuppressWarnings(\"unused\")\n    private FogOfWarMinimapOverlay minimapOverlay;\n    @Inject\n    @SuppressWarnings(\"unused\")\n    private FadingPlayerManager fadingPlayerManager;\n    @Inject\n    @SuppressWarnings(\"unused\")\n    private DynamicRenderDistance dynamicRenderDistance;\n    @Inject\n    @SuppressWarnings(\"unused\")\n    private AreaManager areaManager;\n    @Inject\n    @SuppressWarnings(\"unused\")\n    private PlaneDisplayOverlay planeDisplayOverlay;\n    @Override\n    protected void startUp() {\n        overlayManager.add(worldOverlay);\n        overlayManager.add(minimapOverlay);\n        overlayManager.add(planeDisplayOverlay);\n        fadingPlayerManager.start();\n        dynamicRenderDistance.start();\n        areaManager.start();\n    }\n    @Override\n    protected void shutDown() {\n        overlayManager.remove(worldOverlay);\n        overlayManager.remove(minimapOverlay);\n        overlayManager.remove(planeDisplayOverlay);\n        fadingPlayerManager.stop();\n        dynamicRenderDistance.stop();\n        areaManager.stop();\n    }\n    @Provides\n    @SuppressWarnings(\"unused\")\n    FogOfWarConfig provideConfig(ConfigManager configManager) {\n        return configManager.getConfig(FogOfWarConfig.class);\n    }\n}","filePath":"src\\main\\java\\com\\fogofwar\\FogOfWarPlugin.java"},{"fileName":"AreaManager.java","content":"package com.fogofwar.util;\n\nimport lombok.Getter;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Singleton\npublic class AreaManager {\n    private final Client client;\n    private final EventBus eventBus;\n    private final List\u003cExcludedArea\u003e excludedAreas \u003d new ArrayList\u003c\u003e();\n    @Getter\n    private boolean playerInExcludedArea \u003d false;\n    @Inject\n    public AreaManager(Client client, EventBus eventBus) {\n        this.client \u003d client;\n        this.eventBus \u003d eventBus;\n        excludedAreas.add(new ExcludedArea(2367, 5053, 2432, 5119, 0));         // TzHaar Fight Cave\n        excludedAreas.add(new ExcludedArea(2256, 5328, 2286, 5359, 0));         // Inferno\n        excludedAreas.add(new ExcludedArea(3500, 5100, 4000, 5440, 0, 1));      // Tombs of Amascut\n        excludedAreas.add(new ExcludedArea(3136, 4216, 3366, 4474, 0, 1, 2));   // Theatre of Blood\n        excludedAreas.add(new ExcludedArea(2215, 5935, 2325, 6035, 0, 1, 2));   // Hallowed Sepulchre Floor 1\n        excludedAreas.add(new ExcludedArea(2475, 5935, 2585, 6035, 0, 1, 2));   // Hallowed Sepulchre Floor 2\n        excludedAreas.add(new ExcludedArea(2225, 5795, 2575, 5915, 0, 1, 2));   // Hallowed Sepulchre Floors 3-5\n        excludedAreas.add(new ExcludedArea(3150, 5690, 3380, 5770, 0, 1, 2));   // Chambers of Xeric\n        excludedAreas.add(new ExcludedArea(3250, 5120, 3370, 5700, 0, 1, 2));   // Chambers of Xeric\n    }\n    public void start() {\n        eventBus.register(this);\n        if (client.getGameState() \u003d\u003d GameState.LOGGED_IN) {\n            checkArea();\n        }\n    }\n    public void stop() {\n        eventBus.unregister(this);\n    }\n    @Subscribe\n    @SuppressWarnings(\"unused\")\n    public void onGameStateChanged(GameStateChanged event) {\n        if (event.getGameState() \u003d\u003d GameState.LOGGED_IN) {\n            checkArea();\n        } else if (event.getGameState() \u003d\u003d GameState.LOADING) {\n            playerInExcludedArea \u003d false;\n        }\n    }\n    private void checkArea() {\n        if (client.getLocalPlayer() \u003d\u003d null) {\n            playerInExcludedArea \u003d false;\n            return;\n        }\n        WorldPoint playerPoint \u003d WorldPoint.fromLocalInstance(client, client.getLocalPlayer().getLocalLocation());\n        for (ExcludedArea area : excludedAreas) {\n            if (area.contains(playerPoint)) {\n                playerInExcludedArea \u003d true;\n                return;\n            }\n        }\n        playerInExcludedArea \u003d false;\n    }\n}","filePath":"src\\main\\java\\com\\fogofwar\\util\\AreaManager.java"},{"fileName":"ClientState.java","content":"package com.fogofwar.util;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.gameval.VarbitID;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\n\n@Singleton\npublic class ClientState {\n    private final Client client;\n    @Inject\n    public ClientState(Client client) { this.client \u003d client; }\n    public boolean isNotInWilderness() { return client.getVarbitValue(VarbitID.INSIDE_WILDERNESS) !\u003d 1; }\n    public boolean isClientNotReady() { return client.getGameState() !\u003d GameState.LOGGED_IN || client.getLocalPlayer() \u003d\u003d null; }\n}","filePath":"src\\main\\java\\com\\fogofwar\\util\\ClientState.java"},{"fileName":"DynamicRenderDistance.java","content":"package com.fogofwar.util;\n\nimport com.fogofwar.FogOfWarConfig;\nimport lombok.Getter;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.Player;\nimport net.runelite.api.WorldView;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Singleton\npublic class DynamicRenderDistance {\n    private final Client client;\n    private final FogOfWarConfig config;\n    private final EventBus eventBus;\n    @Getter\n    private int currentRenderDistance;\n    @Inject\n    public DynamicRenderDistance(Client client, FogOfWarConfig config, EventBus eventBus) {\n        this.client \u003d client;\n        this.config \u003d config;\n        this.eventBus \u003d eventBus;\n        this.currentRenderDistance \u003d config.renderDistanceRadius();\n    }\n    public void start() {\n        eventBus.register(this);\n    }\n    public void stop() {\n        eventBus.unregister(this);\n    }\n    @Subscribe\n    @SuppressWarnings(\"unused\")\n    public void onGameTick(GameTick event) {\n        if (client.getGameState() !\u003d GameState.LOGGED_IN || client.getLocalPlayer() \u003d\u003d null) {\n            this.currentRenderDistance \u003d config.renderDistanceRadius();\n            return;\n        }\n        if (!config.enableDynamicRenderDistance()) {\n            this.currentRenderDistance \u003d config.renderDistanceRadius();\n            return;\n        }\n        WorldView worldView \u003d client.getTopLevelWorldView();\n        List\u003cPlayer\u003e players \u003d new ArrayList\u003c\u003e();\n        for (Player p : worldView.players()) {\n            if (p !\u003d null) {\n                players.add(p);\n            }\n        }\n        if (players.size() \u003e\u003d config.dynamicRenderDistancePlayerThreshold()) {\n            int maxDistTiles \u003d 0;\n            WorldPoint playerWorldPoint \u003d client.getLocalPlayer().getWorldLocation();\n            int playerTileX \u003d playerWorldPoint.getX();\n            int playerTileY \u003d playerWorldPoint.getY();\n            for (Player p : players) {\n                WorldPoint wp \u003d p.getWorldLocation();\n                if (wp \u003d\u003d null) continue;\n                int distTiles \u003d Math.max(Math.abs(wp.getX() - playerTileX), Math.abs(wp.getY() - playerTileY));\n                if (distTiles \u003e maxDistTiles) {\n                    maxDistTiles \u003d distTiles;\n                    if (maxDistTiles \u003e\u003d config.renderDistanceRadius()) {\n                        maxDistTiles \u003d config.renderDistanceRadius();\n                        break;\n                    }\n                }\n            }\n            this.currentRenderDistance \u003d maxDistTiles;\n        } else {\n            this.currentRenderDistance \u003d config.renderDistanceRadius();\n        }\n    }\n}","filePath":"src\\main\\java\\com\\fogofwar\\util\\DynamicRenderDistance.java"},{"fileName":"ExcludedArea.java","content":"package com.fogofwar.util;\n\nimport com.google.common.collect.ImmutableSet;\nimport lombok.Value;\nimport net.runelite.api.coords.WorldPoint;\n\nimport java.util.Set;\n\n@Value\npublic class ExcludedArea {\n    int minX;\n    int minY;\n    int maxX;\n    int maxY;\n    Set\u003cInteger\u003e planes;\n\n    public ExcludedArea(int minX, int minY, int maxX, int maxY, Integer... planes) {\n        this.minX \u003d minX;\n        this.minY \u003d minY;\n        this.maxX \u003d maxX;\n        this.maxY \u003d maxY;\n        this.planes \u003d ImmutableSet.copyOf(planes);\n    }\n\n    public boolean contains(WorldPoint point) {\n        return this.planes.contains(point.getPlane()) \u0026\u0026\n                point.getX() \u003e\u003d minX \u0026\u0026 point.getX() \u003c\u003d maxX \u0026\u0026\n                point.getY() \u003e\u003d minY \u0026\u0026 point.getY() \u003c\u003d maxY;\n    }\n}","filePath":"src\\main\\java\\com\\fogofwar\\util\\ExcludedArea.java"},{"fileName":"MinimapUtil.java","content":"package com.fogofwar.util;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.widgets.Widget;\n\npublic final class MinimapUtil {\n    private static final int SIDE_PANELS_ID \u003d 4607;\n    private static final int FIXED_PARENT_ID \u003d 548;\n    private static final int FIXED_CHILD_ID \u003d 21;\n    private static final int STRETCH_PARENT_ID \u003d 161;\n    private static final int STRETCH_CHILD_ID \u003d 30;\n    private static final int PRE_EOC_PARENT_ID \u003d 164;\n    private static final int PRE_EOC_CHILD_ID \u003d 30;\n    private MinimapUtil() {}\n    public static Widget getMinimapWidget(Client client) {\n        if (client.isResized()) {\n            if (client.getVarbitValue(SIDE_PANELS_ID) \u003d\u003d 1) {\n                return client.getWidget(PRE_EOC_PARENT_ID, PRE_EOC_CHILD_ID);\n            }\n            return client.getWidget(STRETCH_PARENT_ID, STRETCH_CHILD_ID);\n        }\n        return client.getWidget(FIXED_PARENT_ID, FIXED_CHILD_ID);\n    }\n}","filePath":"src\\main\\java\\com\\fogofwar\\util\\MinimapUtil.java"},{"fileName":"FogOfWar.java","content":"package com.fogofwar;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class FogOfWar {\n    public static void main(String[] args) throws Exception {\n        ExternalPluginManager.loadBuiltin(FogOfWarPlugin.class);\n        RuneLite.main(args);\n    }\n}","filePath":"src\\test\\java\\com\\fogofwar\\FogOfWar.java"}]},{"commit":"890cefa0a95a734abc15a6b1f0681276c5c78c4d","repository":"https://github.com/chestnut1693/bats-locator.git","internalName":"bats-locator","files":[{"fileName":"BatsLocator.java","content":"/*\n * Copyright (c) 2020, chestnut1693 \u003cchestnut1693@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage chestnut1693.batslocator;\n\nimport java.util.ArrayList;\nimport java.util.Comparator;\nimport static java.util.Comparator.comparing;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.Iterator;\nimport lombok.Getter;\nimport net.runelite.api.Client;\nimport static net.runelite.api.Constants.CHUNK_SIZE;\nimport net.runelite.api.GameObject;\nimport net.runelite.api.ObjectID;\nimport net.runelite.api.coords.WorldPoint;\n\npublic class BatsLocator\n{\n\tstatic final int TROUGH \u003d ObjectID.TROUGH_29746;\n\tstatic final int CLOSED \u003d ObjectID.CHEST_29742;\n\tstatic final int OPENED_POISON_OR_BATS \u003d ObjectID.CHEST_29743;\n\tstatic final int OPENED_WITHOUT_GRUBS \u003d ObjectID.CHEST_29744;\n\tstatic final int OPENED_WITH_GRUBS \u003d ObjectID.CHEST_29745;\n\tstatic final int POISON_SPLAT \u003d 184;\n\n\t@Getter\n\tprivate RoomType roomType;\n\n\t@Getter\n\tprivate HashMap\u003cWorldPoint, Chest\u003e chests \u003d new HashMap\u003c\u003e();\n\n\t@Getter\n\tprivate HashSet\u003cChest\u003e poisonBatsChests \u003d new HashSet\u003c\u003e();\n\n\t@Getter\n\tprivate HashSet\u003cChest\u003e grubsChests \u003d new HashSet\u003c\u003e();\n\n\t@Getter\n\tprivate ArrayList\u003cArrayList\u003cChest\u003e\u003e solutionSets \u003d new ArrayList\u003c\u003e();\n\n\t@Getter\n\tprivate int highestSolutionSetCount \u003d 0;\n\n\t@Getter\n\tprivate boolean drawChestStates \u003d false;\n\n\tprivate Client client;\n\tprivate int rotation \u003d -1;\n\n\tpublic BatsLocator(Client client)\n\t{\n\t\tthis.client \u003d client;\n\t}\n\n\tpublic void troughSpawnEvent(GameObject trough)\n\t{\n\t\tif (roomType \u003d\u003d null \u0026\u0026 rotation \u003d\u003d -1)\n\t\t{\n\t\t\tint plane \u003d trough.getPlane();\n\t\t\tint chunkX \u003d trough.getLocalLocation().getSceneX() / CHUNK_SIZE;\n\t\t\tint chunkY \u003d trough.getLocalLocation().getSceneY() / CHUNK_SIZE;\n\t\t\tint chunkData \u003d client.getInstanceTemplateChunks()[plane][chunkX][chunkY];\n\t\t\tint instanceX \u003d (chunkData \u003e\u003e 14 \u0026 0x3FF) * CHUNK_SIZE;\n\t\t\trotation \u003d chunkData \u003e\u003e 1 \u0026 0x3;\n\t\t\tswitch (instanceX)\n\t\t\t{\n\t\t\t\tcase 3264:\n\t\t\t\tcase 3272:\n\t\t\t\t\troomType \u003d RoomType.LEFT;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3344:\n\t\t\t\t\troomType \u003d RoomType.RIGHT;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3312:\n\t\t\t\t\troomType \u003d RoomType.STRAIGHT;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t//This code is repeated from the chest spawn event since the room type may not have been set when the last chest spawns, same goes for the rotation.\n\t\t\tassignChestNumbersAndGenerateSolutionSets();\n\t\t}\n\t}\n\n\tpublic void chestSpawnEvent(GameObject chestObject)\n\t{\n\t\tWorldPoint chestLocation \u003d chestObject.getWorldLocation();\n\t\tChest chest \u003d chests.get(chestLocation);\n\t\tif (chest \u003d\u003d null)\n\t\t{\n\t\t\tchest \u003d new Chest(chestLocation);\n\t\t\tchests.put(chestLocation, chest);\n\t\t\tswitch (chestObject.getId())\n\t\t\t{\n\t\t\t\tcase OPENED_POISON_OR_BATS:\n\t\t\t\t\tpoisonBatsChests.add(chest);\n\t\t\t\t\tbreak;\n\t\t\t\tcase OPENED_WITHOUT_GRUBS:\n\t\t\t\tcase OPENED_WITH_GRUBS:\n\t\t\t\t\tgrubsChests.add(chest);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t//This code is repeated at the trough spawn event since the room type may not have been set when the last chest spawns, same goes for the rotation.\n\t\t\tassignChestNumbersAndGenerateSolutionSets();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tswitch (chestObject.getId())\n\t\t\t{\n\t\t\t\tcase OPENED_POISON_OR_BATS:\n\t\t\t\t\tpoisonBatsChests.add(chest);\n\t\t\t\t\topenChest(chest, Chest.State.POISON);\n\t\t\t\t\tbreak;\n\t\t\t\tcase OPENED_WITHOUT_GRUBS:\n\t\t\t\tcase OPENED_WITH_GRUBS:\n\t\t\t\t\tgrubsChests.add(chest);\n\t\t\t\t\topenChest(chest, Chest.State.GRUBS);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate ArrayList\u003cArrayList\u003cChest\u003e\u003e solutionSetsContaining(Chest chest)\n\t{\n\t\tArrayList\u003cArrayList\u003cChest\u003e\u003e solutionSets \u003d new ArrayList\u003c\u003e();\n\t\tfor (ArrayList\u003cChest\u003e solutionSet : this.solutionSets)\n\t\t{\n\t\t\tif (solutionSet.contains(chest))\n\t\t\t{\n\t\t\t\tsolutionSets.add(solutionSet);\n\t\t\t}\n\t\t}\n\t\treturn solutionSets;\n\t}\n\n\tprivate boolean solutionSetContains(ArrayList\u003cChest\u003e solutionSet, Chest.State state)\n\t{\n\t\tfor (Chest chest : solutionSet)\n\t\t{\n\t\t\tif (chest.getState() \u003d\u003d state)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate void openChest(Chest openedChest, Chest.State state)\n\t{\n\t\topenedChest.setState(state);\n\n\t\tif (solutionSets.size() \u003d\u003d 0)\n\t\t{\n\t\t\tif (poisonBatsChests.size() \u003d\u003d 4)\n\t\t\t{\n\t\t\t\tfor (Chest chest : chests.values())\n\t\t\t\t{\n\t\t\t\t\tif (!poisonBatsChests.contains(chest))\n\t\t\t\t\t{\n\t\t\t\t\t\tchest.setState(Chest.State.GRUBS);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (state \u003d\u003d Chest.State.POISON || state \u003d\u003d Chest.State.BATS)\n\t\t{\n\t\t\tHashSet\u003cChest\u003e possiblePoisonBatsChests \u003d new HashSet\u003c\u003e();\n\t\t\tfor (ArrayList\u003cChest\u003e solutionSet : solutionSetsContaining(openedChest))\n\t\t\t{\n\t\t\t\tfor (Chest chest : solutionSet)\n\t\t\t\t{\n\t\t\t\t\tif (chest.getState() !\u003d Chest.State.GRUBS)\n\t\t\t\t\t{\n\t\t\t\t\t\tpossiblePoisonBatsChests.add(chest);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (possiblePoisonBatsChests.size() \u003d\u003d 0)\n\t\t\t{\n\t\t\t\tsolutionSets.clear();\n\t\t\t}\n\t\t\tfor (ArrayList\u003cChest\u003e solutionSet : solutionSets)\n\t\t\t{\n\t\t\t\tfor (Chest chest : solutionSet)\n\t\t\t\t{\n\t\t\t\t\tif (!possiblePoisonBatsChests.contains(chest) \u0026\u0026 chest.getState() \u003d\u003d Chest.State.UNVISITED)\n\t\t\t\t\t{\n\t\t\t\t\t\tchest.setState(Chest.State.GRUBS);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tIterator\u003cArrayList\u003cChest\u003e\u003e solutionSets \u003d this.solutionSets.iterator();\n\t\twhile (solutionSets.hasNext())\n\t\t{\n\t\t\tArrayList\u003cChest\u003e solutionSet \u003d solutionSets.next();\n\t\t\tfor (Chest chest : solutionSet)\n\t\t\t{\n\t\t\t\tif (chest.getState() \u003d\u003d Chest.State.UNVISITED)\n\t\t\t\t{\n\t\t\t\t\tboolean setState \u003d true;\n\t\t\t\t\tfor (ArrayList\u003cChest\u003e otherSolutionSet : solutionSetsContaining(chest))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!solutionSetContains(otherSolutionSet, Chest.State.GRUBS))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetState \u003d false;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (setState)\n\t\t\t\t\t{\n\t\t\t\t\t\tchest.setState(Chest.State.GRUBS);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (solutionSetContains(solutionSet, Chest.State.GRUBS))\n\t\t\t{\n\t\t\t\tsolutionSets.remove();\n\t\t\t}\n\t\t}\n\n\t\tif (this.solutionSets.size() \u003d\u003d 1 \u0026\u0026 solutionSetContains(this.solutionSets.get(0), Chest.State.BATS))\n\t\t{\n\t\t\tfor (Chest chest : this.solutionSets.get(0))\n\t\t\t{\n\t\t\t\tif (chest.getState() \u003d\u003d Chest.State.UNVISITED)\n\t\t\t\t{\n\t\t\t\t\tchest.setState(Chest.State.POISON);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.solutionSets.size() \u003d\u003d 0)\n\t\t{\n\t\t\tif (poisonBatsChests.size() \u003d\u003d 4)\n\t\t\t{\n\t\t\t\tfor (Chest chest : chests.values())\n\t\t\t\t{\n\t\t\t\t\tif (!poisonBatsChests.contains(chest))\n\t\t\t\t\t{\n\t\t\t\t\t\tchest.setState(Chest.State.GRUBS);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfor (Chest chest : chests.values())\n\t\t\t\t{\n\t\t\t\t\tif (!poisonBatsChests.contains(chest) \u0026\u0026 !grubsChests.contains(chest))\n\t\t\t\t\t{\n\t\t\t\t\t\tchest.setState(Chest.State.UNVISITED);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfindSolutionSetCounts();\n\t}\n\n\tprivate void findSolutionSetCounts()\n\t{\n\t\thighestSolutionSetCount \u003d 0;\n\t\tfor (Chest chest : chests.values())\n\t\t{\n\t\t\tchest.setSolutionSetCount(0);\n\t\t\tif (chest.getState() !\u003d Chest.State.UNVISITED)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tfor (ArrayList\u003cChest\u003e solutionSet : solutionSetsContaining(chest))\n\t\t\t{\n\t\t\t\tif (!solutionSetContains(solutionSet, Chest.State.GRUBS))\n\t\t\t\t{\n\t\t\t\t\tchest.setSolutionSetCount(chest.getSolutionSetCount() + 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (chest.getSolutionSetCount() \u003e highestSolutionSetCount)\n\t\t\t{\n\t\t\t\thighestSolutionSetCount \u003d chest.getSolutionSetCount();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void assignChestNumbersAndGenerateSolutionSets()\n\t{\n\t\tif (rotation !\u003d -1 \u0026\u0026 roomType !\u003d null \u0026\u0026 chests.size() \u003d\u003d roomType.getChestCount())\n\t\t{\n\t\t\tComparator\u003cChest\u003e comparator;\n\t\t\tswitch (rotation)\n\t\t\t{\n\t\t\t\tcase 0:\n\t\t\t\t\tcomparator \u003d comparing(Chest::getLocation, comparing(WorldPoint::getY).thenComparing(WorldPoint::getX));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\t\tcomparator \u003d comparing(Chest::getLocation, comparing(WorldPoint::getX).reversed().thenComparing(WorldPoint::getY).reversed());\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tcomparator \u003d comparing(Chest::getLocation, comparing(WorldPoint::getY).thenComparing(WorldPoint::getX).reversed());\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\tcomparator \u003d comparing(Chest::getLocation, comparing(WorldPoint::getX).reversed().thenComparing(WorldPoint::getY));\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t//This should never be reached.\n\t\t\t\t\tcomparator \u003d comparing(Chest::getNumber);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tArrayList\u003cChest\u003e chests \u003d new ArrayList\u003c\u003e(this.chests.values());\n\t\t\tchests.sort(comparator);\n\n\t\t\tfor (int i \u003d 0; i \u003c chests.size(); i++)\n\t\t\t{\n\t\t\t\tchests.get(i).setNumber(i);\n\t\t\t}\n\n\t\t\tfor (int[] indices : roomType.getSolutionSets())\n\t\t\t{\n\t\t\t\tArrayList\u003cChest\u003e solutionSet \u003d new ArrayList\u003c\u003e();\n\t\t\t\tfor (int index : indices)\n\t\t\t\t{\n\t\t\t\t\tsolutionSet.add(chests.get(index));\n\t\t\t\t}\n\t\t\t\tsolutionSets.add(solutionSet);\n\t\t\t}\n\n\t\t\tfor (Chest chest : this.chests.values())\n\t\t\t{\n\t\t\t\tif (solutionSetsContaining(chest).size() \u003d\u003d 0)\n\t\t\t\t{\n\t\t\t\t\tchest.setState(Chest.State.GRUBS);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (Chest chest : poisonBatsChests)\n\t\t\t{\n\t\t\t\topenChest(chest, Chest.State.POISON);\n\t\t\t}\n\t\t\tfor (Chest chest : grubsChests)\n\t\t\t{\n\t\t\t\topenChest(chest, Chest.State.GRUBS);\n\t\t\t}\n\n\t\t\tfindSolutionSetCounts();\n\t\t\tdrawChestStates \u003d true;\n\t\t}\n\t}\n\n\tpublic void poisonSplatEvent(WorldPoint worldPoint)\n\t{\n\t\tChest chest \u003d chests.get(worldPoint);\n\t\tif (chest !\u003d null)\n\t\t{\n\t\t\tchest.setTickPoison(client.getTickCount());\n\t\t}\n\t}\n\n\tpublic void gameTickEvent()\n\t{\n\t\tfor (Chest chest : poisonBatsChests)\n\t\t{\n\t\t\tif (chest.getState() \u003d\u003d Chest.State.POISON \u0026\u0026 chest.getTickPoison() \u003d\u003d -1)\n\t\t\t{\n\t\t\t\topenChest(chest, Chest.State.BATS);\n\t\t\t}\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\chestnut1693\\batslocator\\BatsLocator.java"},{"fileName":"BatsLocatorConfig.java","content":"/*\n * Copyright (c) 2020, chestnut1693 \u003cchestnut1693@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage chestnut1693.batslocator;\n\nimport java.awt.Color;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.Range;\n\n@ConfigGroup(\"chestnut1693.batslocator\")\npublic interface BatsLocatorConfig extends Config\n{\n\tenum DisplayMode\n\t{\n\t\tDOTS,\n\t\tNUMBERS\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"unvisitedColor\",\n\t\tname \u003d \"Unvisited chest color\",\n\t\tdescription \u003d \"Configures the color of the unvisited chest dot and number\",\n\t\tposition \u003d 0\n\t)\n\tdefault Color unvisitedColor()\n\t{\n\t\treturn Color.magenta;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"batsColor\",\n\t\tname \u003d \"Bats chest color\",\n\t\tdescription \u003d \"Configures the color of the bats chest dot and number\",\n\t\tposition \u003d 1\n\t)\n\tdefault Color batsColor()\n\t{\n\t\treturn Color.white;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"poisonColor\",\n\t\tname \u003d \"Poison chest color\",\n\t\tdescription \u003d \"Configures the color of the poison chest dot and number\",\n\t\tposition \u003d 2\n\t)\n\tdefault Color poisonColor()\n\t{\n\t\treturn Color.green;\n\t}\n\n\t@Range(\n\t\tmax \u003d 27\n\t)\n\t@ConfigItem(\n\t\tkeyName \u003d \"dotSize\",\n\t\tname \u003d \"Dot size\",\n\t\tdescription \u003d \"Configures the size of the transparent dots, solid dots are one third larger\",\n\t\tposition \u003d 3\n\t)\n\tdefault int dotSize()\n\t{\n\t\treturn 9;\n\t}\n\n\t@Range(\n\t\tmax \u003d 255\n\t)\n\t@ConfigItem(\n\t\tkeyName \u003d \"transparency\",\n\t\tname \u003d \"Transparency\",\n\t\tdescription \u003d \"Configures the transparency of the chest dots and numbers that are not likely to contain poison or bats\",\n\t\tposition \u003d 4\n\t)\n\tdefault int transparency()\n\t{\n\t\treturn 75;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"displayMode\",\n\t\tname \u003d \"Display mode\",\n\t\tdescription \u003d \"Configures displaying chest states as dots or numbers\",\n\t\tposition \u003d 5\n\t)\n\tdefault DisplayMode displayMode()\n\t{\n\t\treturn DisplayMode.DOTS;\n\t}\n}\n","filePath":"src\\main\\java\\chestnut1693\\batslocator\\BatsLocatorConfig.java"},{"fileName":"BatsLocatorPlugin.java","content":"/*\n * Copyright (c) 2020, chestnut1693 \u003cchestnut1693@gmail.com\u003e\n * Copyright (c) 2018, Kamiel\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage chestnut1693.batslocator;\n\nimport static chestnut1693.batslocator.BatsLocator.CLOSED;\nimport static chestnut1693.batslocator.BatsLocator.OPENED_POISON_OR_BATS;\nimport static chestnut1693.batslocator.BatsLocator.OPENED_WITHOUT_GRUBS;\nimport static chestnut1693.batslocator.BatsLocator.OPENED_WITH_GRUBS;\nimport static chestnut1693.batslocator.BatsLocator.POISON_SPLAT;\nimport static chestnut1693.batslocator.BatsLocator.TROUGH;\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameObject;\nimport net.runelite.api.GameState;\nimport net.runelite.api.GraphicsObject;\nimport net.runelite.api.Varbits;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.GameObjectSpawned;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.GraphicsObjectCreated;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Bats Locator\",\n\tdescription \u003d \"Helps locate the chest with bats at the thieving room inside Chambers of Xeric\",\n\ttags \u003d {\"finder\", \"thieving\"},\n\tenabledByDefault \u003d true\n)\npublic class BatsLocatorPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate BatsLocatorConfig config;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate BatsOverlay overlay;\n\n\t@Getter\n\tprivate BatsLocator batsLocator;\n\n\t@Getter\n\tprivate boolean inRaidChambers;\n\n\t@Provides\n\tBatsLocatorConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(BatsLocatorConfig.class);\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\toverlayManager.add(overlay);\n\t\tclientThread.invokeLater(() -\u003e checkRaidPresence(true));\n\t\tbatsLocator \u003d new BatsLocator(client);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(overlay);\n\t\tinRaidChambers \u003d false;\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif (!event.getGroup().equals(\"raids\"))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tclientThread.invokeLater(() -\u003e checkRaidPresence(true));\n\t}\n\n\t@Subscribe\n\tpublic void onVarbitChanged(VarbitChanged event)\n\t{\n\t\tcheckRaidPresence(false);\n\t}\n\n\t@Subscribe\n\tpublic void onGameObjectSpawned(GameObjectSpawned event)\n\t{\n\t\tGameObject gameObject \u003d event.getGameObject();\n\t\tswitch (gameObject.getId())\n\t\t{\n\t\t\tcase TROUGH:\n\t\t\t\tbatsLocator.troughSpawnEvent(gameObject);\n\t\t\t\tbreak;\n\t\t\tcase CLOSED:\n\t\t\tcase OPENED_POISON_OR_BATS:\n\t\t\tcase OPENED_WITHOUT_GRUBS:\n\t\t\tcase OPENED_WITH_GRUBS:\n\t\t\t\tbatsLocator.chestSpawnEvent(gameObject);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGraphicsObjectCreated(GraphicsObjectCreated event)\n\t{\n\t\tif (inRaidChambers)\n\t\t{\n\t\t\tGraphicsObject graphicsObject \u003d event.getGraphicsObject();\n\t\t\tif (graphicsObject.getId() \u003d\u003d POISON_SPLAT)\n\t\t\t{\n\t\t\t\tbatsLocator.poisonSplatEvent(WorldPoint.fromLocal(client, graphicsObject.getLocation()));\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event)\n\t{\n\t\tif (inRaidChambers)\n\t\t{\n\t\t\tbatsLocator.gameTickEvent();\n\t\t}\n\t}\n\n\tprivate void checkRaidPresence(boolean force)\n\t{\n\t\tif (client.getGameState() !\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tboolean setting \u003d client.getVar(Varbits.IN_RAID) \u003d\u003d 1;\n\n\t\tif (force || inRaidChambers !\u003d setting)\n\t\t{\n\t\t\t//A new instance is created when leaving the raid chambers instead of entering the raid chambers.\n\t\t\t//Entering the raid chambers will change the IN_RAID varbit but game objects spawn before the varbit change.\n\t\t\tif (!setting)\n\t\t\t{\n\t\t\t\tbatsLocator \u003d new BatsLocator(client);\n\t\t\t}\n\n\t\t\tinRaidChambers \u003d setting;\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\chestnut1693\\batslocator\\BatsLocatorPlugin.java"},{"fileName":"BatsOverlay.java","content":"/*\n * Copyright (c) 2020, chestnut1693 \u003cchestnut1693@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage chestnut1693.batslocator;\n\nimport com.google.inject.Inject;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport net.runelite.api.Client;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Player;\nimport net.runelite.api.Point;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\nimport net.runelite.client.ui.overlay.components.ProgressPieComponent;\n\npublic class BatsOverlay extends Overlay\n{\n\tprivate BatsLocatorPlugin plugin;\n\tprivate BatsLocatorConfig config;\n\tprivate Client client;\n\tprivate ProgressPieComponent pie \u003d new ProgressPieComponent();\n\n\t@Inject\n\tpublic BatsOverlay(BatsLocatorConfig config, BatsLocatorPlugin plugin, Client client)\n\t{\n\t\tthis.config \u003d config;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.client \u003d client;\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\n\t\tpie.setProgress(100);\n\t\tpie.setBorderColor(Color.black);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tPlayer player \u003d client.getLocalPlayer();\n\t\tWorldPoint playerLocation \u003d player \u003d\u003d null ? null : player.getWorldLocation();\n\n\t\tif (playerLocation \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tBatsLocator batsLocator \u003d plugin.getBatsLocator();\n\n\t\tif (plugin.isInRaidChambers() \u0026\u0026 batsLocator.isDrawChestStates())\n\t\t{\n\t\t\tfor (Chest chest : batsLocator.getChests().values())\n\t\t\t{\n\t\t\t\tif (chest.getState() \u003d\u003d Chest.State.GRUBS)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (playerLocation.distanceTo(chest.getLocation()) \u003c\u003d 25)\n\t\t\t\t{\n\t\t\t\t\tLocalPoint chestLocal \u003d LocalPoint.fromWorld(client, chest.getLocation());\n\n\t\t\t\t\tif (chestLocal !\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tPoint chestCanvas \u003d Perspective.localToCanvas(client, chestLocal, client.getPlane());\n\n\t\t\t\t\t\tif (chestCanvas !\u003d null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tColor color;\n\n\t\t\t\t\t\t\tswitch (chest.getState())\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcase UNVISITED:\n\t\t\t\t\t\t\t\t\tcolor \u003d config.unvisitedColor();\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase BATS:\n\t\t\t\t\t\t\t\t\tcolor \u003d config.batsColor();\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase POISON:\n\t\t\t\t\t\t\t\t\tcolor \u003d config.poisonColor();\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t//This will not happen since only grubs chests reach this but they are skipped earlier on.\n\t\t\t\t\t\t\t\t\tcolor \u003d Color.white;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tString chestNumber \u003d String.valueOf(chest.getNumber());\n\t\t\t\t\t\t\tgraphics.setFont(FontManager.getRunescapeSmallFont());\n\t\t\t\t\t\t\tint stringWidth \u003d graphics.getFontMetrics().stringWidth(chestNumber);\n\t\t\t\t\t\t\tint stringHeight \u003d graphics.getFontMetrics().getHeight();\n\n\t\t\t\t\t\t\tif (batsLocator.getSolutionSets().size() \u003d\u003d 0 \u0026\u0026 (chest.getState() \u003d\u003d Chest.State.POISON || chest.getState() \u003d\u003d Chest.State.BATS))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tchestCanvas \u003d new Point(chestCanvas.getX() - stringWidth / 2, chestCanvas.getY() - stringHeight / 2);\n\t\t\t\t\t\t\t\tOverlayUtil.renderTextLocation(graphics, chestCanvas, chestNumber, color);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (chest.getSolutionSetCount() !\u003d 0 \u0026\u0026 chest.getSolutionSetCount() \u003d\u003d batsLocator.getHighestSolutionSetCount())\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tpie.setDiameter((int)Math.round(config.dotSize() + config.dotSize() / 3.0));\n\t\t\t\t\t\t\t\t\tgraphics.setFont(FontManager.getRunescapeFont());\n\t\t\t\t\t\t\t\t\tstringWidth \u003d graphics.getFontMetrics().stringWidth(chestNumber);\n\t\t\t\t\t\t\t\t\tstringHeight \u003d graphics.getFontMetrics().getHeight();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tpie.setDiameter(config.dotSize());\n\t\t\t\t\t\t\t\t\tcolor \u003d new Color(color.getRed(), color.getGreen(), color.getBlue(), config.transparency());\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tpie.setFill(color);\n\t\t\t\t\t\t\t\tpie.setPosition(new Point(chestCanvas.getX(), chestCanvas.getY()));\n\n\t\t\t\t\t\t\t\tswitch (config.displayMode())\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tcase DOTS:\n\t\t\t\t\t\t\t\t\t\tpie.render(graphics);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase NUMBERS:\n\t\t\t\t\t\t\t\t\t\tchestCanvas \u003d new Point(chestCanvas.getX() - stringWidth / 2, chestCanvas.getY() + stringHeight / 2);\n\t\t\t\t\t\t\t\t\t\tOverlayUtil.renderTextLocation(graphics, chestCanvas, chestNumber, color);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n}\n","filePath":"src\\main\\java\\chestnut1693\\batslocator\\BatsOverlay.java"},{"fileName":"Chest.java","content":"/*\n * Copyright (c) 2020, chestnut1693 \u003cchestnut1693@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage chestnut1693.batslocator;\n\nimport lombok.Getter;\nimport lombok.Setter;\nimport net.runelite.api.coords.WorldPoint;\n\npublic class Chest\n{\n\tpublic enum State\n\t{\n\t\tUNVISITED,\n\t\tGRUBS,\n\t\tPOISON,\n\t\tBATS;\n\t}\n\n\t@Getter\n\t@Setter\n\tprivate State state \u003d State.UNVISITED;\n\n\t@Getter\n\t@Setter\n\tprivate long tickPoison \u003d -1;\n\n\t@Getter\n\t@Setter\n\tprivate int number \u003d -1;\n\n\t@Getter\n\t@Setter\n\tprivate int solutionSetCount \u003d -1;\n\n\t@Getter\n\tprivate WorldPoint location;\n\n\tpublic Chest(WorldPoint location)\n\t{\n\t\tthis.location \u003d location;\n\t}\n}\n","filePath":"src\\main\\java\\chestnut1693\\batslocator\\Chest.java"},{"fileName":"RoomType.java","content":"/*\n * Copyright (c) 2020, chestnut1693 \u003cchestnut1693@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage chestnut1693.batslocator;\n\nimport lombok.Getter;\n\npublic enum RoomType\n{\n\tLEFT(64, new int[][] {\n\t\t{ 0, 15, 16, 54},\n\t\t{ 0, 16, 37, 53},\n\t\t{ 1,  6, 20, 36},\n\t\t{ 2,  4, 18, 29},\n\t\t{ 2, 10, 14, 39},\n\t\t{ 3,  8, 18, 44},\t//Could be instead of (4, 8, 18, 44).\n\t\t{ 3, 21, 26, 45},\n\t\t{ 4,  8, 18, 44},\n\t\t{ 5, 23, 25, 40},\n\t\t{ 5, 25, 31, 51},\n\t\t{ 6, 12, 43, 58},\n\t\t{ 7,  8, 39, 45},\n\t\t{ 7,  9, 27, 32},\n\t\t{ 7, 13, 40, 42},\n\t\t{ 7, 30, 46, 49},\n\t\t{ 9, 29, 31, 58},\n\t\t{ 9, 34, 53, 62},\n\t\t{11, 12, 41, 53},\n\t\t{11, 39, 52, 55},\n\t\t{12, 21, 26, 45},\n\t\t{13, 17, 22, 50},\n\t\t{13, 34, 53, 62},\t//Could be instead of (9, 34, 53, 62).\n\t\t{14, 15, 41, 44},\n\t\t{14, 42, 43, 57},\n\t\t{19, 24, 31, 33},\n\t\t{19, 27, 50, 61},\n\t\t{19, 28, 44, 50},\n\t\t{20, 38, 40, 57},\n\t\t{21, 24, 53, 63},\n\t\t{22, 30, 46, 54},\n\t\t{22, 32, 36, 59},\n\t\t{23, 33, 47, 54},\n\t\t{25, 26, 49, 62},\n\t\t{28, 38, 40, 60},\n\t\t{32, 45, 51, 56},\n\t\t{33, 44, 48, 59},\n\t\t{35, 39, 41, 61},\n\t\t{36, 37, 50, 63},\n\t\t{47, 52, 54, 55},\n\t}),\n\tRIGHT(74, new int[][] {\n\t\t{ 0,  6, 23, 54},\n\t\t{ 0,  9, 20, 34},\n\t\t{ 1, 14, 16, 43},\n\t\t{ 2,  8, 21, 51},\n\t\t{ 2, 10, 20, 33},\n\t\t{ 3, 13, 18, 36},\n\t\t{ 3, 16, 17, 40},\n\t\t{ 4,  7, 29, 60},\n\t\t{ 4, 12, 22, 35},\n\t\t{ 5, 11, 53, 55},\n\t\t{ 5, 12, 26    },\t//Incomplete.\n\t\t{ 6, 23, 41, 72},\n\t\t{ 7,  8, 25, 27},\n\t\t{ 9, 28, 32    },\t//Incomplete.\n\t\t{10, 43, 46, 56},\n\t\t{11, 39, 57, 69},\n\t\t{13, 18, 45, 52},\n\t\t{14, 19, 32, 73},\n\t\t{15, 21, 39, 48},\n\t\t{17, 19, 44, 47},\n\t\t{24, 53, 61, 63},\n\t\t{26, 53, 69, 71},\n\t\t{26, 53, 69    },\t//Incomplete.\n\t\t{27, 29, 57, 67},\n\t\t{27, 36, 70    },\t//Incomplete.\n\t\t{28, 31, 43, 71},\n\t\t{30, 43, 64, 72},\n\t\t{30, 54        },\t//Incomplete.\n\t\t{32, 34, 61, 66},\n\t\t{33, 42, 55, 65},\n\t\t{33, 46, 68, 73},\n\t\t{35, 37, 56, 63},\n\t\t{35, 38, 48, 58},\n\t\t{39, 51, 59, 65},\n\t\t{40, 47, 60, 62},\n\t\t{41, 50, 54, 70},\n\t\t{42, 45, 52, 58},\n\t\t{44, 50, 54, 66},\n\t}),\n\tSTRAIGHT(66, new int[][] {\n\t\t{ 0, 39, 43, 51},\n\t\t{ 1, 15, 20, 53},\n\t\t{ 2, 10, 42, 44},\n\t\t{ 3, 21, 54    },\t//Incomplete.\n\t\t{ 4, 14, 38, 52},\n\t\t{ 5,  6, 35, 41},\n\t\t{ 7, 16, 34, 49},\n\t\t{ 9, 12, 26, 27},\n\t\t{13, 25, 30, 31},\n\t\t{17, 24, 34, 58},\n\t\t{18, 23, 35, 57},\n\t\t{19, 26, 47, 65},\n\t\t{21, 33, 36, 61},\n\t\t{22, 25, 46, 55},\n\t\t{28, 40, 52, 63},\n\t\t{29, 41, 42, 64},\n\t\t{30, 32, 37, 62},\n\t\t{43, 45, 50, 60},\n\t\t{51, 53, 56, 59},\n\t});\n\n\t@Getter\n\tprivate int chestCount;\n\n\t@Getter\n\tprivate int[][] solutionSets;\n\n\tRoomType(int chestCount, int[][] solutionSets)\n\t{\n\t\tthis.chestCount \u003d chestCount;\n\t\tthis.solutionSets \u003d solutionSets;\n\t}\n}\n","filePath":"src\\main\\java\\chestnut1693\\batslocator\\RoomType.java"},{"fileName":"BatsLocatorPluginTest.java","content":"/*\n * Copyright (c) 2020, chestnut1693 \u003cchestnut1693@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage chestnut1693.batslocator;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class BatsLocatorPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(BatsLocatorPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\chestnut1693\\batslocator\\BatsLocatorPluginTest.java"}]},{"commit":"88392fa6837f11c0e8e99bd62e6c0a0f85b98e76","repository":"https://github.com/denaelc/gauntlet-recolor.git","internalName":"cg-recolor","files":[{"fileName":"ModelDataProcessor.java","content":"package com.recolor;\n\nimport net.runelite.api.Model;\nimport lombok.extern.slf4j.Slf4j;\nimport java.awt.*;\nimport java.io.*;\nimport java.util.*;\nimport java.util.List;\n\n\n@Slf4j\npublic class ModelDataProcessor\n{\n    private Map\u003cString, Map\u003cInteger, int[][]\u003e\u003e originalColorData \u003d new HashMap\u003c\u003e();\n    private Map\u003cString, Map\u003cInteger, int[][]\u003e\u003e recoloredColorData \u003d new HashMap\u003c\u003e();\n\n    private static final List\u003cInteger\u003e GREEN_OBJECTS \u003d Arrays.asList(35966, 35969, 35970, 35975, 35976, 35978, 35979, 36003, 36004, 36005, 36006, 36007,36008);\n    private static final int greenReference \u003d 10758;\n    private static final int redReference \u003d 65452;\n\n    public ModelDataProcessor(String filePath, Color newColor, Color secondaryColor, Boolean harmonize) throws IOException\n    {\n        cacheData(filePath);\n        recolorData(newColor, secondaryColor, harmonize);\n    }\n\n    // creates a hashmap with all the facecolors, IDs and types (gameObject, Groundobject etc.)\n    // could be simplified if the .txt gets simplified\n    private void cacheData(String filePath) throws IOException\n    {\n        try (InputStream inputStream \u003d getClass().getResourceAsStream(filePath))\n        {\n            if (inputStream \u003d\u003d null)\n            {\n                throw new FileNotFoundException(\"Resource not found: \" + filePath);\n            }\n            try (BufferedReader reader \u003d new BufferedReader(new InputStreamReader(inputStream)))\n            {\n                String line;\n                String currentType \u003d null;\n                int currentId \u003d -1;\n                int[][] colors \u003d new int[3][];\n\n                while ((line \u003d reader.readLine()) !\u003d null)\n                {\n                    if (line.trim().isEmpty()) continue;\n                    if (line.contains(\" ID: \")) {\n                        if (currentType !\u003d null \u0026\u0026 currentId !\u003d -1)\n                        {\n                            originalColorData.computeIfAbsent(currentType, k -\u003e new HashMap\u003c\u003e()).put(currentId, colors);\n                        }\n                        currentType \u003d line.split(\" \")[0];\n                        currentId \u003d Integer.parseInt(line.split(\": \")[1].split(\" \")[0]);\n                        colors \u003d new int[3][];\n                    }\n                    else if (line.startsWith(\"FaceColors\"))\n                    {\n                        int index \u003d Integer.parseInt(line.substring(10, 11)) - 1;\n                        colors[index] \u003d Arrays.stream(line.split(\": \")[1].replace(\"[\", \"\").replace(\"]\", \"\").split(\", \"))\n                                .mapToInt(Integer::parseInt).toArray();\n                    }\n                }\n                if (currentType !\u003d null \u0026\u0026 currentId !\u003d -1)\n                {\n                    originalColorData.computeIfAbsent(currentType, k -\u003e new HashMap\u003c\u003e()).put(currentId, colors);\n                }\n            }\n        }\n    }\n\n\n    // creates a second hashmap with the recolored values, based of the vanilla hashmap\n    public void recolorData(Color newColor, Color secondaryColor, Boolean harmonize)\n    {\n        recoloredColorData.clear();\n        originalColorData.forEach((type, models) -\u003e\n        {\n            Map\u003cInteger, int[][]\u003e recoloredMap \u003d new HashMap\u003c\u003e();\n            models.forEach((id, colors) -\u003e\n            {\n                int[][] recoloredColors \u003d new int[colors.length][];\n                for (int i \u003d 0; i \u003c colors.length; i++)\n                {\n                    recoloredColors[i] \u003d recolor(colors[i], newColor, secondaryColor, id, harmonize);\n                }\n                recoloredMap.put(id, recoloredColors);\n            });\n            recoloredColorData.put(type, recoloredMap);\n        });\n    }\n\n    // recolors a single array of colors (e.g. facecolors1 of a single model)\n    private int[] recolor(int[] originalColors, Color newColor, Color secondaryColor, int id, Boolean harmonize)\n    {\n        int[] newColors \u003d new int[originalColors.length];\n        for (int i \u003d 0; i \u003c originalColors.length; i++)\n        {\n            // Color needs to be in the relevant range and \u003e 50, else there will be visual bugs\n            if (Math.abs(originalColors[i]) \u003e 50)\n            {\n                newColors[i] \u003d newColorHsb(originalColors[i], newColor, secondaryColor, id, harmonize);\n            }\n            else\n            {\n                newColors[i] \u003d originalColors[i];\n            }\n        }\n        return newColors;\n    }\n\n    // applies the colors to a model\n    public void applyColor(Model model, int[] f1, int[] f2, int[] f3)\n    {\n        int[] faceColors \u003d model.getFaceColors1();\n        int[] faceColors2 \u003d model.getFaceColors2();\n        int[] faceColors3 \u003d model.getFaceColors3();\n\n        if (f1.length \u003c\u003d faceColors.length \u0026\u0026 f2.length \u003c\u003d faceColors2.length \u0026\u0026 f3.length \u003c\u003d faceColors3.length)\n        {\n            System.arraycopy(f1, 0, faceColors, 0, f1.length);\n            System.arraycopy(f2, 0, faceColors2, 0, f2.length);\n            System.arraycopy(f3, 0, faceColors3, 0, f3.length);\n        }\n        else\n        {\n            log.debug(\"FaceColor has the wrong length.\");\n        }\n    }\n\n    // returns the new color in the rs2hsb format\n    public int newColorHsb(int faceColor, Color newColor, Color secondaryColor, int id, Boolean harmonize)\n    {\n\n        // \u003e 60k are mostly the very bright colors.\n        if(faceColor \u003e 60000)\n        {\n            if(!secondaryColor.equals(newColor))\n            {\n                return brightColors(faceColor, secondaryColor);\n            }\n            return brightColors(faceColor, newColor);\n        }\n\n        // all other colors should only be Hue shifted. This prevents normally unlit models from becoming too bright or too dark\n        if(harmonize)\n        {\n            if(id \u003d\u003d 36048)\n            {\n                return hueShift(faceColor, newColor, redReference); // can\u0027t ever harmonize the damaging floor or it will be practically invisible\n            }\n            return hueShift(faceColor, newColor, faceColor);    // if the referenceColor equals the faceColor, the Hue of the newColor will be applied\n        }\n        return hueShift(faceColor, newColor, redReference);\n    }\n\n    // Method is functional, but has a lot of variables. Will likely be adressed in a future iteration.\n    //\n    // General Idea: calculate the distance of the vanilla facecolor to a reference color (65452) and then apply that distance\n    // to the new (reference) color, to get a similar shifted color.\n    public int brightColors(int faceColor, Color newColor)\n    {\n        int newColorHsb \u003d colorToRs2hsb(newColor);\n\n        // values of the facecolor\n        int hueFace \u003d extractHsbValues(faceColor, 6, 11);\n        int saturationFace \u003d extractHsbValues(faceColor, 3, 8);\n        int brightnessFace \u003d extractHsbValues(faceColor, 7, 1);\n        // values of the new reference color\n        int hueRef \u003d extractHsbValues(newColorHsb, 6, 11);\n        int saturationRef \u003d extractHsbValues(newColorHsb, 3, 8);\n        int brightnessRef \u003d extractHsbValues(newColorHsb, 7, 1);\n        // pre-calculated values for the current reference color (65452)\n        int referenceHue \u003d 63;\n        int referenceSat \u003d 7;\n        int referenceBright \u003d 44;\n\n        int hueDiff \u003d referenceHue - hueFace;\n        int satDiff \u003d referenceSat - saturationFace;\n        int brightDiff \u003d referenceBright - brightnessFace;\n\n        int newHue \u003d hueRef - hueDiff;\n        newHue \u003d (newHue % 64 + 64) % 64;\n\n        int newSat \u003d saturationRef - satDiff;\n        newSat \u003d (newSat % 8 + 8) % 8;\n\n        int newBright \u003d brightnessRef - brightDiff / 4;     // reducing the brightness difference before applying it, to prevent complete white/black results\n        newBright -\u003d Math.min(newSat, newBright / 2);\n        // making sure that the new brightness is never below 0 or above 127\n        if(newBright \u003c 0)\n        {\n            newBright \u003d 0;\n        }\n        if(newBright \u003e 127)\n        {\n            newBright \u003d 127;\n        }\n\n        return (newHue \u003c\u003c 10) + (newSat \u003c\u003c 7) + newBright;\n    }\n\n    // same concept as brightColors, but only shifts Hue\n    public int hueShift(int faceColor, Color newColor, int referenceColor)\n    {\n        int newColorHsb \u003d colorToRs2hsb(newColor);\n\n        // values of the facecolor\n        int hueFace \u003d extractHsbValues(faceColor, 6, 11);\n        int saturationFace \u003d extractHsbValues(faceColor, 3, 8);\n        int brightnessFace \u003d extractHsbValues(faceColor, 7, 1);\n        // value of the new reference color\n        int hueRef \u003d extractHsbValues(newColorHsb, 6, 11);\n        // value for the current reference color\n        int referenceHue \u003d extractHsbValues(referenceColor, 6, 11);\n\n        int hueDiff \u003d referenceHue - hueFace;\n\n        int newHue \u003d hueRef - hueDiff;\n        newHue \u003d (newHue % 64 + 64) % 64;\n\n        return (newHue \u003c\u003c 10) + (saturationFace \u003c\u003c 7) + brightnessFace;\n    }\n\n    // Returns the hsb values\n    static int extractHsbValues(int hsbColor, int k, int p)\n    {\n        return (((1 \u003c\u003c k) - 1) \u0026 (hsbColor \u003e\u003e (p - 1)));\n    }\n\n    // not my method, I don\u0027t know who to give credit for it, but I took it from AnkouOSRS, https://github.com/AnkouOSRS/cox-light-colors/blob/master/src/main/java/com/coxlightcolors/CoxLightColorsPlugin.java\n    private int colorToRs2hsb(Color color)\n    {\n        float[] hsbVals \u003d Color.RGBtoHSB(color.getRed(), color.getGreen(), color.getBlue(), null);\n        // \"Correct\" the brightness level to avoid going to white at full saturation, or having a low brightness at\n        // low saturation\n        hsbVals[2] -\u003d Math.min(hsbVals[1], hsbVals[2] / 2);\n        int encode_hue \u003d (int)(hsbVals[0] * 63);\n        int encode_saturation \u003d (int)(hsbVals[1] * 7);\n        int encode_brightness \u003d (int)(hsbVals[2] * 127);\n        return (encode_hue \u003c\u003c 10) + (encode_saturation \u003c\u003c 7) + (encode_brightness);\n    }\n\n    // applies either the vanilla or the recolored hashmap data to a given model\n    public void applyColors(int objectId, String type, Model model, boolean useRecolored)\n    {\n        Map\u003cInteger, int[][]\u003e data \u003d useRecolored ? recoloredColorData.getOrDefault(type, Collections.emptyMap()) : originalColorData.getOrDefault(type, Collections.emptyMap());\n        int[][] colors \u003d data.get(objectId);\n        if (colors !\u003d null \u0026\u0026 colors[0] !\u003d null \u0026\u0026 colors[1] !\u003d null \u0026\u0026 colors[2] !\u003d null)\n        {\n            applyColor(model, colors[0], colors[1], colors[2]);\n        }\n    }\n\n    // deletes the hashmaps\n    public void cleanUp()\n    {\n        originalColorData.clear();\n        recoloredColorData.clear();\n    }\n}","filePath":"src\\main\\java\\com\\recolor\\ModelDataProcessor.java"},{"fileName":"RecolorCG.java","content":"package com.recolor;\n\nimport javax.inject.Inject;\nimport com.google.inject.Provides;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.*;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport java.awt.*;\nimport java.util.*;\nimport java.util.List;\n\n@Slf4j\n@PluginDescriptor(\n\t\tname \u003d \"CG recolor\",\n\t\tdescription \u003d \"Escape the red prison today!\",\n\t\tconflicts \u003d \"117 HD\"\t// might be adressed in a future update of this plugin, but currently not compatible\n)\npublic class RecolorCG extends Plugin\n{\n\n\t// Declarations\n\tprivate static final List\u003cInteger\u003e OBJECT_IDS \u003d Arrays.asList(35965, 35966, 35967, 35968, 35968, 35969, 35970, 35971, 35972, 35972, 35973, 35974, 35975, 35976, 35977, 35978, 35979, 35980, 35992, 35994, 35994, 35995, 35996, 35997, 35998, 35999, 36000, 36001, 36002, 36003, 36004, 36005, 36006, 36007, 36008, 37337);\n\tprivate static final List\u003cInteger\u003e GROUND_IDS \u003d Arrays.asList(36046, 36047, 36048, 36052, 36053, 36054, 36055, 36056, 36057, 36058, 36059);\n\tprivate static final List\u003cInteger\u003e NPC_IDS \u003d Arrays.asList(9035, 9036, 9037, 9038, 9039, 9040, 9041, 9042, 9043, 9044, 9045, 9046, 9047, 9048);\n\tprivate static final List\u003cInteger\u003e PROJECTILE_IDS \u003d Arrays.asList(1702, 1708, 1712, 1714, 1723);\n\tprivate static final int REGION_ID_GAUNTLET_LOBBY \u003d 12127;\n\tprivate static final int REGION_ID_GAUNTLET_CORRUPTED \u003d 7768;\n\t//private static final int REGION_ID_GAUNTLET_NORMAL \u003d 7512;\n\n\t// Will likely use the ITEM_IDS in a future update of this plugin\n\t//private static final List\u003cInteger\u003e ITEM_IDS \u003d Arrays.asList(23824, 23834, 23821, 23822, 23823, 23820, 23835, 23837, 23838, 23585, 23582, 23583, 23584, 23849, 23850, 23851, 23855, 23856, 23857);\n\n\n\tModelDataProcessor dataProcessor;\n\tRandom rand;\n\tint regionId;\n\tColor randomColor1;\n\tColor randomColor2;\n\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate RecolorCGConfig config;\n\n\t@Provides\n\tRecolorCGConfig getConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(RecolorCGConfig.class);\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tlog.debug(\"Recolor started!\");\n\t\trand \u003d new Random();\n\t\trandomColor1 \u003d new Color(rand.nextInt(256), rand.nextInt(256), rand.nextInt(256));\n\t\trandomColor2 \u003d new Color(rand.nextInt(256), rand.nextInt(256), rand.nextInt(256));\n\n\t\t// Vanilla model facecolors are stored in a .txt -\u003e the new model colors can be calculated before the models even appear making the spawnEvents less expensive\n\t\tif(config.secondcolor_active() \u0026\u0026 config.random())\n\t\t{\n\t\t\tthis.dataProcessor \u003d new ModelDataProcessor(\"/model_facecolors.txt\", randomColor1, randomColor2, config.harmonize());\n\t\t}\n\t\telse if (config.secondcolor_active() \u0026\u0026 !config.random())\n\t\t{\n\t\t\tthis.dataProcessor \u003d new ModelDataProcessor(\"/model_facecolors.txt\", config.color(), config.secondcolor(), config.harmonize());\n\t\t}\n\t\telse if (!config.secondcolor_active() \u0026\u0026 config.random())\n\t\t{\n\t\t\tthis.dataProcessor \u003d new ModelDataProcessor(\"/model_facecolors.txt\", randomColor1, randomColor1, config.harmonize());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.dataProcessor \u003d new ModelDataProcessor(\"/model_facecolors.txt\", config.color(), config.color(), config.harmonize());\n\t\t}\n\n\t\t// If the user is already logged in AND inside the gauntlet, Hun still needs to be recolored\n\t\t// Hun gets recolored on GamestateChanges\n\t\tif(client.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tregionId \u003d WorldPoint.fromLocalInstance(client, client.getLocalPlayer().getLocalLocation()).getRegionID();\n\t\t\tif(regionId \u003d\u003d REGION_ID_GAUNTLET_CORRUPTED)\n\t\t\t{\n\t\t\t\tclientThread.invoke(()-\u003e\n\t\t\t\t{\n\t\t\t\t\tclient.setGameState(GameState.LOADING);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\tclientThread.invoke(() -\u003e\n\t\t{\n\t\t\trand \u003d null;\n\n\t\t\tif(client.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t\t{\n\t\t\t\tclient.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"Some game models may still be affected by the plugin. Please re-log to ensure that everything is properly reset.\", null);\n\t\t\t\tclearAll();\n\t\t\t\tclient.setGameState(GameState.LOADING);\n\t\t\t}\n\n\t\t\tsynchronized (dataProcessor)\n\t\t\t{\n\t\t\t\tdataProcessor.cleanUp();\n\t\t\t\tdataProcessor \u003d null;\n\t\t\t}\n\t\t});\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif(event.getGroup().equals(\"recolorCG\"))\n\t\t{\n\t\t\tif(event.getKey().equals(\"random\"))\n\t\t\t{\n\t\t\t\trandomColor1 \u003d new Color(rand.nextInt(256), rand.nextInt(256), rand.nextInt(256));\n\t\t\t\trandomColor2 \u003d new Color(rand.nextInt(256), rand.nextInt(256), rand.nextInt(256));\n\t\t\t}\n\t\t\tif (!config.random())\n\t\t\t{\n\t\t\t\tif (config.secondcolor_active())\n\t\t\t\t{\n\t\t\t\t\tsynchronized (dataProcessor)\n\t\t\t\t\t{\n\t\t\t\t\t\tdataProcessor.recolorData(config.color(), config.secondcolor(), config.harmonize());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tsynchronized (dataProcessor)\n\t\t\t\t\t{\n\t\t\t\t\t\tdataProcessor.recolorData(config.color(), config.color(), config.harmonize());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(config.secondcolor_active())\n\t\t\t\t{\n\t\t\t\t\tsynchronized (dataProcessor)\n\t\t\t\t\t{\n\t\t\t\t\t\tdataProcessor.recolorData(randomColor1, randomColor2, config.harmonize());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tsynchronized (dataProcessor)\n\t\t\t\t\t{\n\t\t\t\t\t\tdataProcessor.recolorData(randomColor1, randomColor1, config.harmonize());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tclientThread.invoke(() -\u003e\n\t\t\t{\n\t\t\t\trecolorNPCs(true);\n\t\t\t\tclient.setGameState(GameState.LOADING);\n\t\t\t});\n\t\t}\n\n\t}\n\n\t@Subscribe\n\tpublic void onGameObjectSpawned(GameObjectSpawned event)\n\t{\n\t\tif (OBJECT_IDS.contains(event.getGameObject().getId()))\n\t\t{\n\t\t\trecolorGameObject(event.getGameObject(), false, true);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGroundObjectSpawned(GroundObjectSpawned event)\n\t{\n\t\tif (GROUND_IDS.contains(event.getGroundObject().getId()))\n\t\t{\n\t\t\trecolorGroundObject(event.getGroundObject(), false);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onNpcSpawned(NpcSpawned event)\n\t{\n\t\tif (NPC_IDS.contains(event.getNpc().getId()))\n\t\t{\n\t\t\trecolorNPC(event.getNpc(), true);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onNpcChanged(NpcChanged event)\n\t{\n\t\tif (NPC_IDS.contains(event.getNpc().getId()))\n\t\t{\n\t\t\trecolorNPC(event.getNpc(), true);\n\t\t}\n\t}\n\n\n\t@Subscribe\n\tpublic void onProjectileMoved(ProjectileMoved event)\n\t{\n\t\tif(PROJECTILE_IDS.contains(event.getProjectile().getId()))\n\t\t{\n\t\t\trecolorProjectile(event.getProjectile());\n\t\t}\n\t}\n\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged event)\n\t{\n\t\tif(event.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tregionId \u003d WorldPoint.fromLocalInstance(client, client.getLocalPlayer().getLocalLocation()).getRegionID();\n\t\t\tif(regionId \u003d\u003d REGION_ID_GAUNTLET_LOBBY)\n\t\t\t{\n\t\t\t\tif (config.random())\n\t\t\t\t{\n\t\t\t\t\trandomColor1 \u003d new Color(rand.nextInt(256), rand.nextInt(256), rand.nextInt(256));\n\t\t\t\t\trandomColor2 \u003d new Color(rand.nextInt(256), rand.nextInt(256), rand.nextInt(256));\n\t\t\t\t\tif(config.secondcolor_active())\n\t\t\t\t\t{\n\t\t\t\t\t\tsynchronized (dataProcessor)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdataProcessor.recolorData(randomColor1, randomColor2, config.harmonize());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tsynchronized (dataProcessor)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdataProcessor.recolorData(randomColor1, randomColor1, config.harmonize());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onVarbitChanged(VarbitChanged event)\n\t{\n\t\tif(event.getVarbitId() \u003d\u003d 9177 \u0026\u0026 event.getValue() \u003d\u003d 1)\t// varbit 9177 is 1 if player is in the boss room\n\t\t{\n\t\t\tclientThread.invoke(() -\u003e\n\t\t\t{\n\t\t\t\tclient.setGameState(GameState.LOADING);\n\t\t\t});\n\t\t}\n\t}\n\n\n\t@Subscribe\n\tpublic void onPreMapLoad(PreMapLoad event)\n\t{\n\t\tregionId \u003d WorldPoint.fromLocalInstance(client, client.getLocalPlayer().getLocalLocation()).getRegionID();\n\t\tif(regionId \u003d\u003d REGION_ID_GAUNTLET_CORRUPTED || regionId \u003d\u003d REGION_ID_GAUNTLET_LOBBY) {\n\t\t\tScene scene \u003d event.getScene();\n\t\t\tTile[][][] sceneTiles \u003d scene.getTiles();\n\t\t\tfor (Tile[][] tiles : sceneTiles) {\n\t\t\t\tfor (Tile[] tiles1 : tiles) {\n\t\t\t\t\tfor (Tile tile : tiles1) {\n\t\t\t\t\t\tif (tile \u003d\u003d null)\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\tGameObject[] gameObjects \u003d tile.getGameObjects();\n\t\t\t\t\t\tGroundObject groundObject \u003d tile.getGroundObject();\n\t\t\t\t\t\tfor (GameObject object : gameObjects) {\n\t\t\t\t\t\t\tif (object \u003d\u003d null) {\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tint ID \u003d object.getId();\n\t\t\t\t\t\t\tif (OBJECT_IDS.contains(ID)) {\n\t\t\t\t\t\t\t\trecolorGameObject(object, true, true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (groundObject !\u003d null) {\n\t\t\t\t\t\t\tint ID \u003d groundObject.getId();\n\t\t\t\t\t\t\tif (GROUND_IDS.contains(ID)) {\n\t\t\t\t\t\t\t\trecolorGroundObject(groundObject, true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic void recolorGameObject(GameObject gameObject, Boolean preMapLoad, Boolean useRecolored)\n\t{\n\n\t\tRenderable renderable \u003d gameObject.getRenderable();\n\t\tModel model;\n\n\t\tif(preMapLoad)\n\t\t{\n\t\t\tmodel \u003d verifyPreMapLoadModel(renderable);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmodel \u003d verifyModel(renderable);\n\t\t}\n\n\t\tif (model \u003d\u003d null)\n\t\t{\n\t\t\tif(!preMapLoad)\n\t\t\t{\n\t\t\t\tlog.debug(\"recolorGameObject returned null!\" + \" , PreMapLoad: \" + preMapLoad);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tsynchronized (dataProcessor)\n\t\t{\n\t\t\tdataProcessor.applyColors(gameObject.getId(), \"GameObject\", model, useRecolored);\n\t\t}\n\t}\n\n\tpublic void recolorGroundObject(GroundObject groundObject, Boolean preMapLoad)\n\t{\n\n\t\tRenderable renderable \u003d groundObject.getRenderable();\n\t\tModel model;\n\n\t\tif(preMapLoad)\n\t\t{\n\t\t\tmodel \u003d verifyPreMapLoadModel(renderable);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmodel \u003d verifyModel(renderable);\n\t\t}\n\n\t\tif (model \u003d\u003d null)\n\t\t{\n\t\t\tlog.debug(\"recolorGroundObject returned null!\");\n\t\t\treturn;\n\t\t}\n\t\tif(groundObject.getId() \u003d\u003d 36047 || groundObject.getId() \u003d\u003d 36048)\n\t\t{\t//Damaging ground recolor depends on config\n\t\t\tif(!config.groundRecolor())\n\t\t\t{\n\t\t\t\tdataProcessor.applyColors(groundObject.getId(), \"GroundObject\", model, false);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdataProcessor.applyColors(groundObject.getId(), \"GroundObject\", model, true);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tsynchronized (dataProcessor)\n\t\t{\n\t\t\tdataProcessor.applyColors(groundObject.getId(), \"GroundObject\", model, true);\n\t\t}\n\n\t}\n\n\tpublic void recolorNPC(NPC npc, Boolean useRecolored)\n\t{\n\t\tif(!useRecolored)\n\t\t{\n\t\t\tif (npc.getModel() \u003d\u003d null)\n\t\t\t{\n\t\t\t\tlog.debug(\"recolorAll returned null! - NPC\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsynchronized (dataProcessor)\n\t\t\t{\n\t\t\t\tdataProcessor.applyColors(npc.getId(), \"NPC\", npc.getModel(), false);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t// Spotanim needs to be set if we mage the npc that has to be recolored\n\t\tif (client.getLocalPlayer().getInteracting() !\u003d null)\n\t\t{\n\t\t\tif(client.getLocalPlayer().getInteracting().hasSpotAnim(1724) || client.getLocalPlayer().getInteracting().hasSpotAnim(85))\n\t\t\t{\n\t\t\t\tclient.getLocalPlayer().getInteracting().createSpotAnim(0,-1,0,0);\n\t\t\t}\n\t\t}\n\n\t\tif (config.tornado())\n\t\t{\n\t\t\tif (config.npcRecolor())    // tornados AND npcs are to be recolored - we can use the same call for both\n\t\t\t{\n\t\t\t\tif (npc.getModel() \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tlog.debug(\"recolorAll returned null! - NPC\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tsynchronized (dataProcessor)\n\t\t\t\t{\n\t\t\t\t\tdataProcessor.applyColors(npc.getId(), \"NPC\", npc.getModel(), true);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\t// tornados are to be recolored, npcs not - we need to differentiate\n\t\t\t{\n\t\t\t\tif(npc.getModel() \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tlog.debug(\"recolorAll returned null! - NPC\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tsynchronized (dataProcessor)\n\t\t\t\t{\n\t\t\t\t\tif(npc.getId() \u003d\u003d 9039)\n\t\t\t\t\t{\n\t\t\t\t\t\tdataProcessor.applyColors(npc.getId(), \"NPC\", npc.getModel(), true);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tdataProcessor.applyColors(npc.getId(), \"NPC\", npc.getModel(), false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\t// if-case inverted\n\t\t{\n\t\t\tif(config.npcRecolor())\t// tornados are NOT to be recolored, npcs are - we need to differentiate\n\t\t\t{\n\t\t\t\tif(npc.getModel() \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tlog.debug(\"recolorAll returned null! - NPC\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tsynchronized (dataProcessor)\n\t\t\t\t{\n\t\t\t\t\tif(npc.getId() \u003d\u003d 9039)\n\t\t\t\t\t{\n\t\t\t\t\t\tdataProcessor.applyColors(npc.getId(), \"NPC\", npc.getModel(), false);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tdataProcessor.applyColors(npc.getId(), \"NPC\", npc.getModel(), true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\t//tornados AND npcs are NOT to be recolored - we can use the same call for both\n\t\t\t{\n\t\t\t\tif(npc.getModel() \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tlog.debug(\"recolorAll returned null! - NPC\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tsynchronized (dataProcessor)\n\t\t\t\t{\n\t\t\t\t\tdataProcessor.applyColors(npc.getId(), \"NPC\", npc.getModel(), false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic void recolorProjectile(Projectile projectile)\n\t{\n\t\tModel model \u003d projectile.getModel();\n\t\tif (model \u003d\u003d null)\n\t\t{\n\t\t\tlog.debug(\"recolorProjectile returned null!\");\n\t\t\treturn;\n\t\t}\n\n\t\tif(config.projectileRecolor())\n\t\t{\n\t\t\tsynchronized (dataProcessor)\n\t\t\t{\n\t\t\t\tdataProcessor.applyColors(projectile.getId(), \"Projectile\", model, true);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsynchronized (dataProcessor)\n\t\t\t{\n\t\t\t\tdataProcessor.applyColors(projectile.getId(), \"Projectile\", model, false);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic void recolorNPCs(Boolean useRecolor)\n\t{\n\t\tIndexedObjectSet\u003c? extends NPC\u003e npcs \u003d client.getWorldView(-1).npcs();\n\t\tfor (NPC npc:npcs) {\n\t\t\trecolorNPC(npc, useRecolor);\n\t\t}\n\t}\n\n\t// Model.getModel() returns null, therefore we need to do an instanceof check\n\tprivate Model verifyModel(Renderable renderable)\n\t{\n\t\tif (renderable instanceof Model)\n\t\t{\n\t\t\treturn (Model) renderable;\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tModel model \u003d renderable.getModel();\n\t\t\t\tif (model \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tlog.debug(\"verifyModel returned null!\");\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\treturn model;\n\t\t\t}\n\t\t\tcatch (NullPointerException e)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate Model verifyPreMapLoadModel(Renderable renderable)\n\t{\n\t\tif (renderable instanceof Model)\n\t\t{\n\t\t\treturn (Model) renderable;\n\t\t}\n\t\treturn null;\n\t}\n\n\n\tpublic void clearAll()\n\t{\n\t\tScene scene \u003d client.getTopLevelWorldView().getScene();\n\t\tTile[][][] sceneTiles \u003d scene.getTiles();\n\t\trecolorNPCs(false);\n\t\tfor (Tile[][] tiles : sceneTiles)\n\t\t{\n\t\t\tfor (Tile[] tiles1 : tiles)\n\t\t\t{\n\t\t\t\tfor (Tile tile : tiles1)\n\t\t\t\t{\n\t\t\t\t\tif (tile \u003d\u003d null)\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\tGameObject[] gameObjects \u003d tile.getGameObjects();\n\t\t\t\t\tfor (GameObject object : gameObjects) {\n\t\t\t\t\t\tif(object \u003d\u003d null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tint ID \u003d object.getId();\n\t\t\t\t\t\tif (OBJECT_IDS.contains(ID)) {\n\t\t\t\t\t\t\trecolorGameObject(object, false, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}","filePath":"src\\main\\java\\com\\recolor\\RecolorCG.java"},{"fileName":"RecolorCGConfig.java","content":"package com.recolor;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\n\nimport java.awt.*;\n\n@ConfigGroup(\"recolorCG\")\npublic interface RecolorCGConfig extends Config\n{\n\t@ConfigSection(\n\t\t\tname \u003d \"Colors\",\n\t\t\tdescription \u003d \"General color settings\",\n\t\t\tposition \u003d 0\n\t)\n\tString colorsSection \u003d \"colors\";\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Toggles\",\n\t\t\tdescription \u003d \"Toggle different recolors on or off\",\n\t\t\tposition \u003d 1\n\t)\n\tString togglesSection \u003d \"toggles\";\n\n\t//\n\t// Begin of color section\n\t//\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"color\",\n\t\t\tname \u003d \"Color\",\n\t\t\tdescription \u003d \"Recolor the Corrupted Gauntlet with this color.\",\n\t\t\tposition \u003d 0,\n\t\t\tsection \u003d colorsSection\n\t)\n\tdefault Color color()\n\t{\n\t\treturn new Color(25, 45, 135);\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"secondcolor\",\n\t\t\tname \u003d \"Secondary color\",\n\t\t\tdescription \u003d \"Recolor certain parts of the gauntlet differently.\",\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d colorsSection\n\t)\n\tdefault Color secondcolor()\n\t{\n\t\treturn new Color(165, 210, 10);\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"secondcolor_active\",\n\t\t\tname \u003d \"Use secondary color\",\n\t\t\tdescription \u003d \"If activated, the secondary color will be applied.\",\n\t\t\tposition \u003d 2,\n\t\t\tsection \u003d colorsSection\n\t)\n\tdefault boolean secondcolor_active()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"random\",\n\t\t\tname \u003d \"Random color each run\",\n\t\t\tdescription \u003d \"Every time you enter the corrupted gauntlet, it will be a random color. To randomise both first and secondary color, activate the \u0027Use secondary color\u0027 feature.\",\n\t\t\tposition \u003d 3,\n\t\t\tsection \u003d colorsSection\n\t)\n\tdefault boolean random()\n\t{\n\t\treturn false;\n\t}\n\n\t//\n\t// Begin of toggle section\n\t//\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"npcRecolor\",\n\t\t\tname \u003d \"Recolor NPCs\",\n\t\t\tdescription \u003d \"Recolor all the NPCs in the corrupted gauntlet.\",\n\t\t\tposition \u003d 0,\n\t\t\tsection \u003d togglesSection\n\t)\n\tdefault boolean npcRecolor()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"projectileRecolor\",\n\t\t\tname \u003d \"Recolor projectiles\",\n\t\t\tdescription \u003d \"Recolor all the projectiles from NPCs in the corrupted gauntlet.\",\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d togglesSection\n\t)\n\tdefault boolean projectileRecolor()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"groundRecolor\",\n\t\t\tname \u003d \"Recolor damaging floor\",\n\t\t\tdescription \u003d \"Recolor the floor that damages you during the Hunllef fight.\",\n\t\t\tposition \u003d 2,\n\t\t\tsection \u003d togglesSection\n\t)\n\tdefault boolean groundRecolor()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"tornado\",\n\t\t\tname \u003d \"Recolor Hunleff\u0027s tornadoes\",\n\t\t\tdescription \u003d \"Recolor the tornadoes that spawn during the hunllef fight.\",\n\t\t\tposition \u003d 3,\n\t\t\tsection \u003d togglesSection\n\t)\n\tdefault boolean tornado()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"harmonize\",\n\t\t\tname \u003d \"Harmonize colors\",\n\t\t\tdescription \u003d \"Adjusts colors for a unified look.\",\n\t\t\tposition \u003d 4,\n\t\t\tsection \u003d togglesSection\n\t)\n\tdefault boolean harmonize()\n\t{\n\t\treturn true;\n\t}\n\n}\n","filePath":"src\\main\\java\\com\\recolor\\RecolorCGConfig.java"},{"fileName":"PluginLauncher.java","content":"package com.recolor;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class PluginLauncher\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(RecolorCG.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\recolor\\PluginLauncher.java"}]},{"commit":"bd747c75a80c8394554c626a3820a66943734688","repository":"https://github.com/salvite/prestige-levelling.git","internalName":"prestige","files":[{"fileName":"LevelUpDisplayInput.java","content":"/*\n * Copyright (c) 2020, Jordan \u003cnightfirecat@protonmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.prestige.levelUp;\n\nimport java.awt.Color;\nimport java.awt.event.KeyEvent;\nimport java.util.List;\n\nimport com.prestige.PrestigePlugin;\nimport com.prestige.model.SkillModel;\nimport lombok.Getter;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Experience;\nimport net.runelite.api.FontID;\nimport net.runelite.api.Player;\nimport net.runelite.api.Skill;\nimport net.runelite.api.widgets.*;\nimport net.runelite.client.chat.QueuedMessage;\nimport net.runelite.client.game.chatbox.ChatboxInput;\nimport net.runelite.client.input.KeyListener;\n\npublic class LevelUpDisplayInput extends ChatboxInput implements KeyListener\n{\n    private static final int X_OFFSET \u003d 13;\n    private static final int Y_OFFSET \u003d 16;\n\n    private final PrestigePlugin plugin;\n    private final Skill skill;\n    private final int level;\n\n    @Getter\n    private boolean closeMessage;\n\n    public LevelUpDisplayInput(PrestigePlugin plugin, Skill skill, int level) {\n        this.plugin \u003d plugin;\n        this.skill \u003d skill;\n        this.level \u003d level;\n    }\n\n    @Override\n    public void open() {\n        final Widget chatboxContainer \u003d plugin.getChatboxPanelManager().getContainerWidget();\n\n        final String skillName \u003d skill.getName();\n        final int skillExperience \u003d plugin.getClient().getSkillExperience(skill);\n        final List\u003cSkillModel\u003e skillModels \u003d SkillModel.getSKILL_MODELS(skill);\n        final String prefix \u003d (skill \u003d\u003d Skill.AGILITY || skill \u003d\u003d Skill.ATTACK) ? \"an \" : \"a \";\n\n        final Widget levelUpHeader \u003d chatboxContainer.createChild(-1, WidgetType.TEXT);\n        final Widget levelUpText \u003d chatboxContainer.createChild(-1, WidgetType.TEXT);\n        final Widget levelUpContinue \u003d chatboxContainer.createChild(-1, WidgetType.TEXT);\n\n        final String levelUpMessage;\n        if (skillExperience \u003e\u003d Experience.MAX_SKILL_XP) {\n            plugin.getClientThread().invoke(() -\u003e this.setFireworksGraphic(LevelUpFireworks.NINETY_NINE));\n            levelUpMessage \u003d \"Congratulations, you just maxed your \" + skillName + \" skill.\";\n        } else {\n            plugin.getClientThread().invoke(() -\u003e this.setFireworksGraphic(LevelUpFireworks.NORMAL));\n            levelUpMessage \u003d \"Congratulations, you just advanced \" + prefix + skillName + \" prestige level.\";\n        }\n        levelUpHeader.setText(levelUpMessage);\n        levelUpHeader.setTextColor(Color.BLUE.getRGB());\n        levelUpHeader.setFontId(FontID.QUILL_8);\n        levelUpHeader.setXPositionMode(WidgetPositionMode.ABSOLUTE_TOP);\n        levelUpHeader.setOriginalX(73 + X_OFFSET);\n        levelUpHeader.setYPositionMode(WidgetPositionMode.ABSOLUTE_TOP);\n        levelUpHeader.setOriginalY(15 + Y_OFFSET);\n        levelUpHeader.setOriginalWidth(390);\n        levelUpHeader.setOriginalHeight(30);\n        levelUpHeader.setXTextAlignment(WidgetTextAlignment.CENTER);\n        levelUpHeader.setYTextAlignment(WidgetTextAlignment.LEFT);\n        levelUpHeader.setWidthMode(WidgetSizeMode.ABSOLUTE);\n        levelUpHeader.revalidate();\n\n        final String levelUpTextMessage;\n        if (skillExperience \u003d\u003d Experience.MAX_SKILL_XP) {\n            levelUpTextMessage \u003d \"You have reached maximum experience in \" + skillName;\n        } else {\n            levelUpTextMessage \u003d (skill \u003d\u003d Skill.HITPOINTS\n                    ? \"Your Hitpoints prestige is now \" + level\n                    : \"Your \" + skillName + \" prestige level is now \" + level)\n                    + \u0027.\u0027;\n        }\n        levelUpText.setText(levelUpTextMessage);\n        levelUpText.setFontId(FontID.QUILL_8);\n        levelUpText.setXPositionMode(WidgetPositionMode.ABSOLUTE_TOP);\n        levelUpText.setOriginalX(73 + X_OFFSET);\n        levelUpText.setYPositionMode(WidgetPositionMode.ABSOLUTE_TOP);\n        levelUpText.setOriginalY(44 + Y_OFFSET);\n        levelUpText.setOriginalWidth(390);\n        levelUpText.setOriginalHeight(30);\n        levelUpText.setXTextAlignment(WidgetTextAlignment.CENTER);\n        levelUpText.setYTextAlignment(WidgetTextAlignment.LEFT);\n        levelUpText.setWidthMode(WidgetSizeMode.ABSOLUTE);\n        levelUpText.revalidate();\n\n        levelUpContinue.setText(\"Click here to continue\");\n        levelUpContinue.setTextColor(Color.BLUE.getRGB());\n        levelUpContinue.setFontId(FontID.QUILL_8);\n        levelUpContinue.setXPositionMode(WidgetPositionMode.ABSOLUTE_TOP);\n        levelUpContinue.setOriginalX(73 + X_OFFSET);\n        levelUpContinue.setYPositionMode(WidgetPositionMode.ABSOLUTE_TOP);\n        levelUpContinue.setOriginalY(74 + Y_OFFSET);\n        levelUpContinue.setOriginalWidth(390);\n        levelUpContinue.setOriginalHeight(17);\n        levelUpContinue.setXTextAlignment(WidgetTextAlignment.CENTER);\n        levelUpContinue.setYTextAlignment(WidgetTextAlignment.LEFT);\n        levelUpContinue.setWidthMode(WidgetSizeMode.ABSOLUTE);\n        levelUpContinue.setAction(0, \"Continue\");\n        levelUpContinue.setOnOpListener((JavaScriptCallback) ev -\u003e triggerCloseViaMessage());\n        levelUpContinue.setOnMouseOverListener((JavaScriptCallback) ev -\u003e levelUpContinue.setTextColor(Color.WHITE.getRGB()));\n        levelUpContinue.setOnMouseLeaveListener((JavaScriptCallback) ev -\u003e levelUpContinue.setTextColor(Color.BLUE.getRGB()));\n        levelUpContinue.setHasListener(true);\n        levelUpContinue.revalidate();\n\n        for (SkillModel skillModel : skillModels) {\n            buildWidgetModel(chatboxContainer, skillModel);\n        }\n\n        plugin.getChatMessageManager().queue(QueuedMessage.builder()\n                .type(ChatMessageType.GAMEMESSAGE)\n                .runeLiteFormattedMessage(skillExperience \u003d\u003d Experience.MAX_SKILL_XP\n                        ? \"Congratulations, you\u0027ve just reached max experience in \" + skillName + \u0027!\u0027\n                        : \"Congratulations, you\u0027ve just advanced your \" + skillName + \" prestige level. You are now prestige level \" + level + \u0027.\u0027)\n                .build());\n    }\n\n    @Override\n    public void keyTyped(KeyEvent e) {\n        if (e.getKeyChar() !\u003d \u0027 \u0027) {\n            return;\n        }\n\n        triggerCloseViaMessage();\n\n        e.consume();\n    }\n\n    @Override\n    public void keyPressed(KeyEvent e) {\n    }\n\n    @Override\n    public void keyReleased(KeyEvent e) {\n    }\n\n    public void closeIfTriggered() {\n        if (closeMessage \u0026\u0026 plugin.getChatboxPanelManager().getCurrentInput() \u003d\u003d this) {\n            plugin.getChatboxPanelManager().close();\n        }\n    }\n\n    void triggerClose() {\n        closeMessage \u003d true;\n    }\n\n    private void triggerCloseViaMessage() {\n        final Widget levelUpContinue \u003d plugin.getClient().getWidget(ComponentID.CHATBOX_CONTAINER).getChild(2);\n        levelUpContinue.setText(\"Please wait...\");\n\n        closeMessage \u003d true;\n    }\n\n    private static void buildWidgetModel(Widget chatboxContainer, SkillModel model) {\n        final Widget levelUpModel \u003d chatboxContainer.createChild(-1, WidgetType.MODEL);\n\n        levelUpModel.setModelId(model.getModelId());\n        levelUpModel.setXPositionMode(WidgetPositionMode.ABSOLUTE_TOP);\n        levelUpModel.setOriginalX(model.getOriginalX() + X_OFFSET);\n        levelUpModel.setYPositionMode(WidgetPositionMode.ABSOLUTE_TOP);\n        levelUpModel.setOriginalY(model.getOriginalY() + Y_OFFSET);\n        levelUpModel.setOriginalWidth(model.getIconWidth());\n        levelUpModel.setOriginalHeight(model.getIconHeight());\n        levelUpModel.setRotationX(model.getRotationX());\n        levelUpModel.setRotationY(model.getRotationY());\n        levelUpModel.setRotationZ(model.getRotationZ());\n        levelUpModel.setModelZoom(model.getModelZoom());\n        levelUpModel.revalidate();\n    }\n\n    private void setFireworksGraphic(LevelUpFireworks firework) {\n        final Player localPlayer \u003d plugin.getClient().getLocalPlayer();\n        if (localPlayer \u003d\u003d null) {\n            return;\n        }\n\n        final int fireworksGraphic \u003d firework.getGraphicId();\n\n        if (fireworksGraphic \u003d\u003d -1) {\n            return;\n        }\n\n        localPlayer.setGraphic(fireworksGraphic);\n        localPlayer.setSpotAnimFrame(0);\n    }\n}\n","filePath":"src\\main\\java\\com\\prestige\\levelUp\\LevelUpDisplayInput.java"},{"fileName":"LevelUpFireworks.java","content":"/*\n * Copyright (c) 2020, Jordan \u003cnightfirecat@protonmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.prestige.levelUp;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\n\n@AllArgsConstructor\n@Getter\npublic enum LevelUpFireworks {\n    NONE(\"None\", -1),\n    NORMAL(\"Normal\", 199),\n    NINETY_NINE(\"99\", 1388),\n    MAX_TOTAL(\"Max total\", 1389);\n\n    private final String name;\n    private final int graphicId;\n\n    @Override\n    public String toString() {\n        return getName();\n    }\n}\n","filePath":"src\\main\\java\\com\\prestige\\levelUp\\LevelUpFireworks.java"},{"fileName":"ModelId.java","content":"/*\n * Copyright (c) 2020, Jordan \u003cnightfirecat@protonmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.prestige.model;\n\nfinal class ModelId\n{\n    static final int ANVIL \u003d 1251;\n    static final int WILLOW_TREE \u003d 1570;\n    static final int SLAYER_SKILL_MODEL \u003d 1733;\n    static final int FIREMAKING_SKILL_MODEL \u003d 2260;\n    static final int STEEL_KITESHIELD \u003d 2339;\n    static final int PURE_ESSENCE \u003d 2349;\n    static final int RAW_TUNA \u003d 2355;\n    static final int CLEAN_HERB \u003d 2364;\n    static final int HAMMER \u003d 2376;\n    static final int BLUE_WIZARD_HAT \u003d 2483;\n    static final int CHISEL \u003d 2489;\n    static final int HIGHWAYMAN_MASK \u003d 2500;\n    static final int STEEL_PICKAXE \u003d 2529;\n    static final int SHORTBOW \u003d 2562;\n    static final int STEEL_LONGSWORD \u003d 2602;\n    static final int STEEL_SWORD \u003d 2604;\n    static final int STEEL_ARROW \u003d 2711;\n    static final int PRAYER_SKILL_MODEL \u003d 3325;\n    static final int STRENGTH_SKILL_MODEL \u003d 3327;\n    static final int AGILITY_SKILL_MODEL \u003d 3328;\n    static final int HEARTH \u003d 3326;\n    static final int WATERING_CAN \u003d 7331;\n    static final int SAW \u003d 12309;\n    static final int FOOTPRINT \u003d 19980;\n    static final int COOKING_SKILL_MODEL \u003d 27611;\n}","filePath":"src\\main\\java\\com\\prestige\\model\\ModelId.java"},{"fileName":"SkillModel.java","content":"/*\n * Copyright (c) 2020, Jordan \u003cnightfirecat@protonmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.prestige.model;\n\nimport com.google.common.collect.ArrayListMultimap;\nimport com.google.common.collect.ListMultimap;\nimport lombok.Getter;\nimport net.runelite.api.Skill;\n\nimport java.util.List;\n\n@Getter\npublic enum SkillModel\n{\n    CONSTRUCTION1(Skill.CONSTRUCTION, ModelId.HAMMER, 10, 14, 669, 0, 15, 329),\n    CONSTRUCTION2(Skill.CONSTRUCTION, ModelId.SAW, 11, 14, 615, 0, 111, 451),\n    COOKING(Skill.COOKING, ModelId.COOKING_SKILL_MODEL, 31, 59, 169, 0, 1593, 963),\n    CRAFTING1(Skill.CRAFTING, ModelId.HAMMER, 30, 24, 418, 0, 14, 496),\n    CRAFTING2(Skill.CRAFTING, ModelId.CHISEL, 39, 45, 353, 0, 18, 400),\n    DEFENCE(Skill.DEFENCE, ModelId.STEEL_KITESHIELD, 34, 37, 337, 0, 1074, 598),\n    FARMING(Skill.FARMING, ModelId.WATERING_CAN, 31, 52, 118, 0, 1278, 451),\n    FIREMAKING(Skill.FIREMAKING, ModelId.FIREMAKING_SKILL_MODEL, 29, 55, 115, 0, 1689, 771),\n    FISHING(Skill.FISHING, ModelId.RAW_TUNA, 33, 30, 351, 0, 1865, 517),\n    FLETCHING1(Skill.FLETCHING, ModelId.STEEL_ARROW, 43, 19, 254, 0, 1257, 408),\n    FLETCHING2(Skill.FLETCHING, ModelId.STEEL_ARROW, 46, 44, 223, 0, 177, 444),\n    HERBLORE(Skill.HERBLORE, ModelId.CLEAN_HERB, 20, 35, 550, 0, 2024, 344),\n    HITPOINTS(Skill.HITPOINTS, ModelId.HEARTH, 35, 58, 538, 0, 0, 250),\n    MAGIC(Skill.MAGIC, ModelId.BLUE_WIZARD_HAT, 29, 50, 131, 0, 1913, 344),\n    MINING(Skill.MINING, ModelId.STEEL_PICKAXE, 38, 33, 292, 0, 1166, 413),\n    PRAYER(Skill.PRAYER, ModelId.PRAYER_SKILL_MODEL, 29, 27, 582, 0, 504, 505),\n    RANGED1(Skill.RANGED, ModelId.STEEL_ARROW, 28, 34, 206, 0, 195, 405),\n    RANGED2(Skill.RANGED, ModelId.SHORTBOW, 42, 17, 422, 0, 1618, 397),\n    RUNECRAFT(Skill.RUNECRAFT, ModelId.PURE_ESSENCE, 35, 38, 242, 0, 1979, 328),\n    SLAYER(Skill.SLAYER, ModelId.SLAYER_SKILL_MODEL, 34, 60, 221, 0, 1944, 649),\n    SMITHING(Skill.SMITHING, ModelId.ANVIL, 34, 53, 97, 0, 1868, 716),\n    STRENGTH(Skill.STRENGTH, ModelId.STRENGTH_SKILL_MODEL, 35, 23, 512, 0, 14, 631),\n    AGILITY(Skill.AGILITY, ModelId.AGILITY_SKILL_MODEL, 29, 29, 533, 0, 2040, 685),\n    THIEVING(Skill.THIEVING, ModelId.HIGHWAYMAN_MASK, 42, 31, 366, 0, 55, 155),\n    WOODCUTTING(Skill.WOODCUTTING, ModelId.WILLOW_TREE, 20, 69, 116, 0, 1978, 1800),\n    ATTACK1(Skill.ATTACK, ModelId.STEEL_SWORD, 65, 38, 234, 0, 148, 444),\n    ATTACK2(Skill.ATTACK, ModelId.STEEL_LONGSWORD, 27, 29, 198, 0, 1419, 330),\n    HUNTER(Skill.HUNTER, ModelId.FOOTPRINT, 45, 48, 512, 0, 0, 1000);\n\n    private static final ListMultimap\u003cSkill, SkillModel\u003e SKILL_MODELS \u003d  ArrayListMultimap.create();\n\n    private final Skill skill;\n    private final int modelId;\n    private final int originalX;\n    private final int originalY;\n    private final int rotationX;\n    private final int rotationY;\n    private final int rotationZ;\n    private final int modelZoom;\n    private final int iconWidth;\n    private final int iconHeight;\n\n    SkillModel(Skill skill, int modelId, int originalX, int originalY, int rotationX, int rotationY, int rotationZ, int modelZoom)\n    {\n        this.skill \u003d skill;\n        this.modelId \u003d modelId;\n        this.originalX \u003d originalX;\n        this.originalY \u003d originalY;\n        this.rotationX \u003d rotationX;\n        this.rotationY \u003d rotationY;\n        this.rotationZ \u003d rotationZ;\n        this.modelZoom \u003d modelZoom;\n        this.iconWidth \u003d skill \u003d\u003d Skill.CONSTRUCTION ? 49 : 32;\n        this.iconHeight \u003d skill \u003d\u003d Skill.CONSTRUCTION ? 61 : 32;\n    }\n\n    static\n    {\n        for (SkillModel skillModel : values())\n        {\n            SKILL_MODELS.put(skillModel.skill, skillModel);\n        }\n    }\n\n    public static List\u003cSkillModel\u003e getSKILL_MODELS(Skill skill)\n    {\n        return SKILL_MODELS.get(skill);\n    }\n}","filePath":"src\\main\\java\\com\\prestige\\model\\SkillModel.java"},{"fileName":"PrestigeConfig.java","content":"package com.prestige;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.Range;\n\n@ConfigGroup(\"prestige\")\npublic interface PrestigeConfig extends Config {\n    @ConfigItem(\n            keyName \u003d \"showRealLevels\",\n            name \u003d \"Show real levels\",\n            description \u003d \"When enabled, your real level will display if it\u0027s closer to levelling-up than your prestige level\",\n            position \u003d 1\n    )\n    default boolean showRealLevels() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"showVirtualLevels\",\n            name \u003d \"Show virtual levels\",\n            description \u003d \"When enabled, this will show your virtual levels and count them in your total level.\",\n            position \u003d 2\n    )\n    default boolean showVirtualLevels() {\n        return false;\n    }\n\n    @Range(max \u003d 126, min \u003d 1)\n    @ConfigItem(\n            keyName \u003d \"goalLevel\",\n            name \u003d \"Goal Level\",\n            description \u003d \"Max level you\u0027re trying to achieve - Half of this will be the level at which you prestige\",\n            position \u003d 3\n    )\n    default int goalLevel() {\n        return 99;\n    }\n\n    @Range(max \u003d 100, min \u003d 2)\n    @ConfigItem(\n            keyName \u003d \"xpFactor\",\n            name \u003d \"XP Factor\",\n            description \u003d \"The rate at which xp is multiplied. Prestige when you have (1 / XP Factor) remaining. XP Factor of 2 means you prestige at half (1/2) xp remaining, for example.\",\n            position \u003d 4\n    )\n    default int xpFactor() {\n        return 2;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"enableHP\",\n            name \u003d \"Enable HP Prestige\",\n            description \u003d \"Enables prestige levels for HP NOTE: This may not work well with boosts or HP tracking\",\n            position \u003d 5\n    )\n    default boolean enableHP() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"enablePrayer\",\n            name \u003d \"Enable Prayer Prestige\",\n            description \u003d \"Enables prestige levels for Prayer  NOTE: This may not work well with boosts or prayer tracking\",\n            position \u003d 6\n    )\n    default boolean enablePrayer() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"enableCombat\",\n            name \u003d \"Enable Combat Prestige\",\n            description \u003d \"Enables prestige levels for combat skills (Attack, Strength, Defense, Ranged, Magic) NOTE: This may not work well with boosts\",\n            position \u003d 7\n    )\n    default boolean enableCombat() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"enableNonCombat\",\n            name \u003d \"Enable Non-Combat Prestige\",\n            description \u003d \"Enables prestige levels for non-combat skills\",\n            position \u003d 8\n    )\n    default boolean enableNonCombat() {\n        return true;\n    }\n}\n","filePath":"src\\main\\java\\com\\prestige\\PrestigeConfig.java"},{"fileName":"PrestigePlugin.java","content":"package com.prestige;\n\nimport javax.inject.Inject;\n\nimport com.google.inject.Provides;\nimport com.prestige.levelUp.LevelUpDisplayInput;\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.ScriptCallbackEvent;\nimport net.runelite.api.events.StatChanged;\nimport net.runelite.api.gameval.InterfaceID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetInfo;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.game.chatbox.ChatboxPanelManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\n\nimport java.util.*;\n\n@Slf4j\n@PluginDescriptor(\n        name \u003d \"Prestige\",\n        description \u003d \"Resets xp to 0 and doubles xp rate between levels 92 and 99\",\n        tags \u003d {\"levelling\", \"reset\", \"99\", \"92\"}\n)\npublic class PrestigePlugin extends Plugin {\n    private static final String TOTAL_LEVEL_TEXT_PREFIX \u003d \"Total level:\u003cbr\u003e\";\n    private int xpFactor \u003d 2;\n    private int maxXp \u003d Experience.getXpForLevel(99);\n    private int prestigeXP \u003d maxXp - (maxXp / xpFactor);\n    private static final List\u003cSkill\u003e COMBAT_SKILLS \u003d Arrays.asList(Skill.ATTACK, Skill.DEFENCE, Skill.STRENGTH, Skill.MAGIC, Skill.RANGED);\n    private static final Map\u003cSkill, Integer\u003e ACTUAL_SKILL_XP \u003d new HashMap\u003c\u003e();\n    private static final Map\u003cSkill, Integer\u003e ACTUAL_SKILL_BOOST \u003d new HashMap\u003c\u003e();\n\n    @Inject\n    @Getter(AccessLevel.PUBLIC)\n    private Client client;\n\n    @Inject\n    @Getter(AccessLevel.PUBLIC)\n    private ClientThread clientThread;\n\n    @Inject\n    @Getter(AccessLevel.PUBLIC)\n    private ChatboxPanelManager chatboxPanelManager;\n\n    @Inject\n    @Getter(AccessLevel.PUBLIC)\n    private ChatMessageManager chatMessageManager;\n\n    @Inject\n    private PrestigeConfig config;\n\n    private LevelUpDisplayInput input;\n\n    @Provides\n    PrestigeConfig provideConfig(ConfigManager configManager) {\n        return configManager.getConfig(PrestigeConfig.class);\n    }\n\n    private final Map\u003cSkill, Integer\u003e updatedSkills \u003d new HashMap\u003c\u003e();\n    private final List\u003cSkill\u003e levelledSkills \u003d new ArrayList\u003c\u003e();\n\n    @Subscribe\n    public void onGameTick(GameTick event) {\n        if (input !\u003d null) {\n            input.closeIfTriggered();\n        }\n\n        if (levelledSkills.isEmpty() || !chatboxPanelManager.getContainerWidget().isHidden()) {\n            return;\n        }\n\n        final Skill skill \u003d levelledSkills.remove(0);\n\n        int xp \u003d client.getSkillExperience(skill);\n\n        // Reset the skill\n        // Set xp rate to the xp modifier\n        if (isPrestiged(xp)) {\n            xp \u003d prestigeXP(xp);\n        }\n\n        input \u003d new LevelUpDisplayInput(this, skill, Experience.getLevelForXp(xp));\n        chatboxPanelManager.openInput(input);\n    }\n\n    @Override\n    protected void shutDown() {\n        this.resetSkills(true);\n    }\n\n    @Subscribe\n    public void onConfigChanged(ConfigChanged configChanged) {\n        if (!configChanged.getGroup().equals(\"prestige\")) {\n            return;\n        }\n\n        this.calculatePrestigeRange();\n        this.resetSkills(false);\n        this.updateAllStats();\n    }\n\n    @Subscribe\n    public void onScriptCallbackEvent(ScriptCallbackEvent e) {\n\n        if (e.getEventName().equals(\"skillTabTotalLevel\")) {\n            int level \u003d 0;\n\n            for (Skill s : Skill.values()) {\n                if (s \u003d\u003d Skill.OVERALL) {\n                    continue;\n                }\n\n                level +\u003d Math.min(Experience.getLevelForXp(client.getSkillExperience(s)), getMaxLevel(false));\n            }\n\n            Widget totalWidget \u003d client.getWidget(InterfaceID.Stats.TOTAL);\n\n            if(totalWidget \u003d\u003d null)\n                return;\n\n            Widget[] totalWidgetComponents \u003d totalWidget.getStaticChildren();\n\n            if(totalWidgetComponents \u003d\u003d null || totalWidgetComponents.length \u003c 2)\n                return;\n\n            Widget widgetText \u003d totalWidgetComponents[2];\n            widgetText.setText(TOTAL_LEVEL_TEXT_PREFIX + level);\n        }\n    }\n\n    @Override\n    protected void startUp() {\n        for (Skill skill : Skill.values()) {\n            if (skill !\u003d Skill.OVERALL) {\n                ACTUAL_SKILL_XP.put(skill, client.getSkillExperience(skill));\n                ACTUAL_SKILL_BOOST.put(skill, client.getBoostedSkillLevel(skill));\n            }\n        }\n\n        this.calculatePrestigeRange();\n\n        this.updateAllStats();\n    }\n\n    private void updateAllStats() {\n        for (Skill skill : Skill.values()) {\n            if (skill !\u003d Skill.OVERALL) {\n                changeStat(skill, client.getRealSkillLevel(skill), ACTUAL_SKILL_BOOST.get(skill), true);\n                client.queueChangedSkill(skill);\n            }\n        }\n    }\n\n    @Subscribe\n    public void onStatChanged(StatChanged statChanged) {\n        this.changeStat(statChanged.getSkill(), statChanged.getLevel(), statChanged.getBoostedLevel(), false);\n    }\n\n    private void resetSkills(boolean shutdown) {\n        for (Skill skill : Skill.values()) {\n            if (skill !\u003d Skill.OVERALL) {\n                int xp \u003d ACTUAL_SKILL_XP.get(skill);\n\n                client.getRealSkillLevels()[skill.ordinal()] \u003d Math.min(Experience.getLevelForXp(xp), getMaxLevel(shutdown));\n                client.getSkillExperiences()[skill.ordinal()] \u003d xp;\n                client.getBoostedSkillLevels()[skill.ordinal()] \u003d ACTUAL_SKILL_BOOST.get(skill);\n\n                client.queueChangedSkill(skill);\n            }\n        }\n    }\n\n    private int getMaxLevel(boolean shutdown) {\n        return config.showVirtualLevels() \u0026\u0026 !shutdown ? 120 : 99;\n    }\n\n    private void changeStat(Skill skill, int level, int boostedLevel, boolean ignoreLevels) {\n        int xp \u003d client.getSkillExperience(skill);\n\n        ACTUAL_SKILL_XP.put(skill, xp);\n        ACTUAL_SKILL_BOOST.put(skill, boostedLevel);\n\n        if (COMBAT_SKILLS.contains(skill)) {\n            // Player doesn\u0027t want to show prestige for combat skills\n            if (!config.enableCombat()) {\n                return;\n            }\n        } else if (Skill.HITPOINTS \u003d\u003d skill) {\n            // Player doesn\u0027t want to show prestige for HP\n            if (!config.enableHP()) {\n                return;\n            }\n        } else if (Skill.PRAYER \u003d\u003d skill) {\n            // Player doesn\u0027t want to show prestige for Prayer\n            if (!config.enablePrayer()) {\n                return;\n            }\n        } else {\n            // Player doesn\u0027t want to show prestige for non-combat skills\n            if (!config.enableNonCombat()) {\n                return;\n            }\n        }\n\n        // Reset the skill\n        // Set xp rate to the xp modifier\n        if (isPrestiged(xp)) {\n            if (!config.showRealLevels() || isPrestigeLevelCloser(xp)) {\n                int prestigeXp \u003d prestigeXP(xp);\n                int newLevel \u003d Experience.getLevelForXp(prestigeXp);\n                int boostDiff \u003d boostedLevel - Experience.getLevelForXp(ACTUAL_SKILL_XP.get(skill));\n\n                // Set the prestige level and xp\n                client.getRealSkillLevels()[skill.ordinal()] \u003d newLevel;\n                client.getSkillExperiences()[skill.ordinal()] \u003d prestigeXp;\n                client.getBoostedSkillLevels()[skill.ordinal()] \u003d newLevel + boostDiff;\n\n                int oldLevel \u003d updatedSkills.get(skill) !\u003d null ? updatedSkills.get(skill) : level;\n\n                if (!ignoreLevels \u0026\u0026 oldLevel \u003c newLevel) {\n                    levelledSkills.add(skill);\n                }\n\n                updatedSkills.put(skill, newLevel);\n            }\n        }\n    }\n\n    // Determines if the player\u0027s level is between 92 and 99, and is therefore prestiged\n    private boolean isPrestiged(int xp) {\n        return xp \u003e prestigeXP \u0026\u0026 xp \u003c maxXp;\n    }\n\n    // Determines if the player\u0027s real skill level is closer to levelling up than their prestige level\n    private boolean isPrestigeLevelCloser(int xp) {\n        int prestigeXp \u003d prestigeXP(xp);\n        int level \u003d Experience.getLevelForXp(xp);\n        int remaining \u003d Experience.getXpForLevel(level + 1) - xp;\n        int prestigeRemaining \u003d Experience.getXpForLevel(Experience.getLevelForXp(prestigeXp) + 1) - prestigeXp;\n\n        return (prestigeRemaining / xpFactor) \u003c remaining;\n    }\n\n    private int prestigeXP(int xp) {\n        return (xp - prestigeXP) * xpFactor;\n    }\n\n    private void calculatePrestigeRange() {\n        xpFactor \u003d config.xpFactor();\n        maxXp \u003d Experience.getXpForLevel(config.goalLevel());\n        prestigeXP \u003d maxXp - (maxXp / xpFactor);\n    }\n}\n","filePath":"src\\main\\java\\com\\prestige\\PrestigePlugin.java"},{"fileName":"SkillData.java","content":"package com.prestige;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport net.runelite.api.Skill;\nimport net.runelite.api.SpriteID;\n\n@Getter\n@AllArgsConstructor\nenum SkillData {\n    ATTACK(Skill.ATTACK, SpriteID.SKILL_ATTACK),\n    STRENGTH(Skill.STRENGTH, SpriteID.SKILL_STRENGTH),\n    DEFENCE(Skill.DEFENCE, SpriteID.SKILL_DEFENCE),\n    RANGED(Skill.RANGED, SpriteID.SKILL_RANGED),\n    PRAYER(Skill.PRAYER, SpriteID.SKILL_PRAYER),\n    MAGIC(Skill.MAGIC, SpriteID.SKILL_MAGIC),\n    RUNECRAFT(Skill.RUNECRAFT, SpriteID.SKILL_RUNECRAFT),\n    CONSTRUCTION(Skill.CONSTRUCTION, SpriteID.SKILL_CONSTRUCTION),\n    HITPOINTS(Skill.HITPOINTS, SpriteID.SKILL_HITPOINTS),\n    AGILITY(Skill.AGILITY, SpriteID.SKILL_AGILITY),\n    HERBLORE(Skill.HERBLORE, SpriteID.SKILL_HERBLORE),\n    THIEVING(Skill.THIEVING, SpriteID.SKILL_THIEVING),\n    CRAFTING(Skill.CRAFTING, SpriteID.SKILL_CRAFTING),\n    FLETCHING(Skill.FLETCHING, SpriteID.SKILL_FLETCHING),\n    SLAYER(Skill.SLAYER, SpriteID.SKILL_SLAYER),\n    HUNTER(Skill.HUNTER, SpriteID.SKILL_HUNTER),\n    MINING(Skill.MINING, SpriteID.SKILL_MINING),\n    SMITHING(Skill.SMITHING, SpriteID.SKILL_SMITHING),\n    FISHING(Skill.FISHING, SpriteID.SKILL_FISHING),\n    COOKING(Skill.COOKING, SpriteID.SKILL_COOKING),\n    FIREMAKING(Skill.FIREMAKING, SpriteID.SKILL_FIREMAKING),\n    WOODCUTTING(Skill.WOODCUTTING, SpriteID.SKILL_WOODCUTTING),\n    FARMING(Skill.FARMING, SpriteID.SKILL_FARMING);\n\n    private final Skill skill;\n    private final int sprite;\n\n    static SkillData get(int sprite) {\n        for (SkillData skill : values()) {\n            if (skill.sprite \u003d\u003d sprite) {\n                return skill;\n            }\n        }\n\n        return null;\n    }\n}\n","filePath":"src\\main\\java\\com\\prestige\\SkillData.java"},{"fileName":"PrestigePluginTest.java","content":"package com.prestige;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class PrestigePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(PrestigePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\prestige\\PrestigePluginTest.java"}]},{"commit":"3c8a143b79e797f24ff3ca4d01bee4c7fa33bb18","repository":"https://github.com/jpeter17/easy-empty.git","internalName":"easy-empty","files":[{"fileName":"EasyEmptyConfig.java","content":"/*\n * Copyright (c) 2022, Jacob Petersen \u003cjakepetersen1221@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.easyEmpty;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"easyempty\")\npublic interface EasyEmptyConfig extends Config\n{\n    @ConfigItem(keyName \u003d \"emptyPouches\", name \u003d \"Empty pouches near altar\", description \u003d \"Left-click empty pouches near altar\", position \u003d 1)\n    default boolean emptyPouches()\n    {\n        return true;\n    }\n\n    @ConfigItem(keyName \u003d \"bankFill\", name \u003d \"Fill pouches from bank\", description \u003d \"Left-click fill pouches from bank menu\", position \u003d 2)\n    default boolean bankFill()\n    {\n        return true;\n    }\n\n    @ConfigItem(keyName \u003d \"swapStam\", name \u003d \"Stamina Potion(1) swaps\", description \u003d \"Left-click drink/withdraw-1 from bank menu\", position \u003d 3)\n    default boolean swapStam()\n    {\n        return true;\n    }\n\n    @ConfigItem(keyName \u003d \"swapNeck\", name \u003d \"Binding Necklace swaps\", description \u003d \"Left-click wear/withdraw-1 from bank menu\", position \u003d 4)\n    default boolean swapNeck()\n    {\n        return true;\n    }\n}\n","filePath":"src\\main\\java\\com\\easyEmpty\\EasyEmptyConfig.java"},{"fileName":"EasyEmptyPlugin.java","content":"/*\n * Copyright (c) 2022, Jacob Petersen \u003cjakepetersen1221@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.easyEmpty;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.coords.WorldArea;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.ClientTick;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetInfo;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.util.Text;\nimport org.apache.commons.lang3.ArrayUtils;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Runecrafting Utilities\",\n\tdescription \u003d \"Provides various menu swaps to improve runecrafting\",\n\ttags \u003d {\"swap\",\"swapper\",\"menu\",\"entry\",\"menu entry swapper\",\"runecrafting\",\"pouch\",\"essence\",\"easy\",\"empty\"}\n)\npublic class EasyEmptyPlugin extends Plugin\n{\n\tint[] altars \u003d {\n\t\t10571, // Earth\n\t\t10315, // Fire\n\t\t10827, // Water\n\t\t11339, // Air\n\t\t10059, // Body\n\t\t11083, // Mind\n\t\t8523,  // Cosmic\n\t\t9035,  // Chaos\n\t\t9803,  // Law\n\t\t9547,  // Nature\n\t\t8779,  // Death\n\t\t9291, // Wrath\n\t\t8508, // Astral\n\t\t12875 // Blood\n\t};\n\n\tint[] pouches \u003d {\n\t\t\tItemID.SMALL_POUCH,\n\t\t\tItemID.MEDIUM_POUCH,\n\t\t\tItemID.LARGE_POUCH,\n\t\t\tItemID.GIANT_POUCH,\n\t\t\tItemID.COLOSSAL_POUCH,\n\t\t\tItemID.MEDIUM_POUCH_5511,\n\t\t\tItemID.LARGE_POUCH_5513,\n\t\t\tItemID.GIANT_POUCH_5515,\n\t\t\tItemID.COLOSSAL_POUCH_26786\n\t};\n\n\tprivate static final WorldArea zmi \u003d new WorldArea(new WorldPoint(3050, 5573, 0), 20, 20);\n\n\tboolean bankFill, swapStam, swapNeck, emptyPouches;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate EasyEmptyConfig config;\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\tbankFill \u003d config.bankFill();\n\t\tswapStam \u003d config.swapStam();\n\t\tswapNeck \u003d config.swapNeck();\n\t\temptyPouches \u003d config.emptyPouches();\n\t\tlog.info(\"Easy Empty  started!\");\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\tlog.info(\"Easy Empty  stopped!\");\n\t}\n\n\t@Subscribe\n\tpublic void onClientTick(ClientTick event)\n\t{\n\t\tif (client.getGameState() !\u003d GameState.LOGGED_IN || client.isMenuOpen() || client.isKeyPressed(KeyCode.KC_SHIFT))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (client.getWidget(WidgetInfo.BANK_CONTAINER) !\u003d null) {\n\t\t\tMenuEntry[] menuEntries \u003d client.getMenuEntries();\n\t\t\tfor (int i \u003d menuEntries.length - 1; i \u003e\u003d 0; i--) {\n\t\t\t\tWidget widget \u003d menuEntries[i].getWidget();\n\t\t\t\tMenuAction entryType \u003d menuEntries[i].getType();\n\t\t\t\tString entryOption \u003d menuEntries[i].getOption();\n\n\t\t\t\tif (widget !\u003d null \u0026\u0026 (entryType \u003d\u003d MenuAction.CC_OP_LOW_PRIORITY || entryType \u003d\u003d MenuAction.CC_OP) \u0026\u0026\n\t\t\t\t\t((bankFill \u0026\u0026 entryOption.startsWith(\"Fill\") \u0026\u0026 ArrayUtils.contains(pouches, widget.getItemId())) ||\n\t\t\t\t\t(swapStam \u0026\u0026 entryOption.matches(\"Drink|Withdraw-1\") \u0026\u0026 widget.getItemId() \u003d\u003d ItemID.STAMINA_POTION1) ||\n\t\t\t\t\t(swapNeck \u0026\u0026 entryOption.matches(\"Wear|Withdraw-1\") \u0026\u0026 widget.getItemId() \u003d\u003d ItemID.BINDING_NECKLACE))) {\n\t\t\t\t\tMenuEntry entry \u003d menuEntries[i];\n\n\t\t\t\t\tentry.setType(MenuAction.CC_OP);\n\t\t\t\t\tmenuEntries[i] \u003d menuEntries[menuEntries.length - 1];\n\t\t\t\t\tmenuEntries[menuEntries.length - 1] \u003d entry;\n\n\t\t\t\t\tclient.setMenuEntries(menuEntries);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tboolean atAltar \u003d false;\n\t\tWorldPoint playerLoc \u003d client.getLocalPlayer().getWorldLocation();\n\n\t\tif (zmi.contains2D(playerLoc)) {\n\t\t\tatAltar \u003d true;\n\t\t}\n\t\telse {\n\t\t\tfor (int altarRegion : altars) {\n\t\t\t\tif (altarRegion \u003d\u003d playerLoc.getRegionID()) {\n\t\t\t\t\tatAltar \u003d true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (atAltar) {\n\t\t\tMenuEntry[] menuEntries \u003d client.getMenuEntries();\n\t\t\tif (emptyPouches \u0026\u0026 ArrayUtils.contains(pouches, menuEntries[menuEntries.length -1].getItemId())) {\n\t\t\t\tint emptyIdx \u003d -1;\n\t\t\t\tint topIdx \u003d menuEntries.length - 1;\n\t\t\t\tfor (int i \u003d 0; i \u003c topIdx; i++) {\n\n\t\t\t\t\tif (Text.removeTags(menuEntries[i].getOption()).equals(\"Empty\")) {\n\t\t\t\t\t\temptyIdx \u003d i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (emptyIdx \u003d\u003d -1) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tMenuEntry entry1 \u003d menuEntries[emptyIdx];\n\t\t\t\tMenuEntry entry2 \u003d menuEntries[topIdx];\n\n\t\t\t\tmenuEntries[emptyIdx] \u003d entry2;\n\t\t\t\tmenuEntries[topIdx] \u003d entry1;\n\n\t\t\t\tclient.setMenuEntries(menuEntries);\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif (event.getGroup().equals(\"easyempty\")) {\n\t\t\tswitch (event.getKey()) {\n\t\t\t\tcase \"bankFill\":\tbankFill \u003d config.bankFill();\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\tcase \"swapNeck\":\tswapNeck \u003d config.swapNeck();\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\tcase \"swapStam\":\tswapStam \u003d config.swapStam();\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\tcase \"emptyPouches\":emptyPouches \u003d config.emptyPouches();\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t@Provides\n\tEasyEmptyConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(EasyEmptyConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\easyEmpty\\EasyEmptyPlugin.java"},{"fileName":"EasyEmptyPluginTest.java","content":"package com.easyEmpty;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class EasyEmptyPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(EasyEmptyPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\easyEmpty\\EasyEmptyPluginTest.java"}]},{"commit":"86efee6dfa16d4312d421416afe86437bcb041dd","repository":"https://github.com/chocobo-s/Slaughter-bracelet-reminder.git","internalName":"bracelet-reminder","files":[{"fileName":"BraceletOverlayStyle.java","content":"package com.braceletreminder;\n\npublic enum BraceletOverlayStyle {\n    LONG_TEXT,\n    SHORT_TEXT,\n}\n","filePath":"src\\main\\java\\com\\braceletreminder\\BraceletOverlayStyle.java"},{"fileName":"BraceletReminderConfig.java","content":"package com.braceletreminder;\n\nimport net.runelite.client.config.Alpha;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport java.awt.*;\n\n@ConfigGroup(\"BraceletReminder\")\npublic interface BraceletReminderConfig extends Config {\n\t@ConfigItem(keyName \u003d \"slaughter\", name \u003d \"Bracelet of Slaughter\", description \u003d \"Highlights Bracelets of Slaughter.\", position \u003d 1)\n\tdefault boolean slaughter() {\n\t\treturn true;\n\t}\n\n\t@ConfigItem(keyName \u003d \"expeditious\", name \u003d \"Expeditious Bracelet\", description \u003d \"Highlights Expeditious Bracelets.\", position \u003d 2)\n\tdefault boolean expeditious() {\n\t\treturn true;\n\t}\n\n\t@ConfigItem(keyName \u003d \"LowHPThreshold\", name \u003d \"Health Threshold\", description \u003d \"Choose what HP threshold you want to be notified to wear your bracelet.\", position \u003d 7)\n\n\tdefault int healthThreshold() {\n\t\treturn 15;\n\t}\n\n\t@ConfigItem(keyName \u003d \"shouldFlash\", name \u003d \"Disco Mode\", description \u003d \"make the popup box flash between two colours of your choosing.\", position \u003d 3)\n\tdefault boolean shouldFlash() { return false; }\n\n\t@Alpha\n\t@ConfigItem(keyName \u003d \"flashColor1\", name \u003d \"Main Colour\", description \u003d \"pick the main colour of the popup reminder.\", position \u003d 4)\n\tdefault Color flashColor1() {\n\t\treturn new Color(23, 255, 177, 150);\n\t}\n\t@Alpha\n\t@ConfigItem(keyName \u003d \"flashColor2\", name \u003d \"Secondary Colour\", description \u003d \"pick the secondary colour if you have toggled the reminder to flash.\", position \u003d 5)\n\tdefault Color flashColor2() {\n\t\treturn new Color(151, 88, 221, 150);\n\t}\n\t@ConfigItem(keyName \u003d \"ReminderStyle\", name \u003d \"Reminder Style\", description \u003d \"Changes the style of the reminder overlay.\", position \u003d 6)\n\tdefault BraceletOverlayStyle reminderStyle() { return BraceletOverlayStyle.LONG_TEXT;}\n\t@ConfigItem(keyName \u003d \"overlayDuration\", name \u003d \"Overlay Duration\", description \u003d \"How long the overlay will stay up in seconds.\", position \u003d 8)\n\tdefault int overlayDuration() {return 10;}\n}\n","filePath":"src\\main\\java\\com\\braceletreminder\\BraceletReminderConfig.java"},{"fileName":"BraceletReminderOverlay.java","content":"// BSD 2-Clause License\n//\n//Copyright (c) 2021, PortAGuy\n//All rights reserved.\n//\n//Redistribution and use in source and binary forms, with or without\n//modification, are permitted provided that the following conditions are met:\n//\n//1. Redistributions of source code must retain the above copyright notice, this\n//   list of conditions and the following disclaimer.\n//\n//2. Redistributions in binary form must reproduce the above copyright notice,\n//   this list of conditions and the following disclaimer in the documentation\n//   and/or other materials provided with the distribution.\n//\n//THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n//AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n//IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n//DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n//FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n//DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n//SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n//CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n//OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n//OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\npackage com.braceletreminder;\n\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.LineComponent;\nimport net.runelite.client.ui.overlay.components.PanelComponent;\n\npublic class BraceletReminderOverlay extends OverlayPanel {\n    private final BraceletReminderConfig config;\n    private final Client client;\n    private final BraceletReminderPlugin plugin;\n    private final String LONG_TEXT \u003d \"You\u0027re not wearing a bracelet\";\n    private final String SHORT_TEXT \u003d \"Bracelet\";\n\n    @Inject\n    private BraceletReminderOverlay(BraceletReminderConfig config, BraceletReminderPlugin plugin, Client client) {\n        this.config \u003d config;\n        this.plugin \u003d plugin;\n        this.client \u003d client;\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        if (panelComponent \u003d\u003d null) {\n            return null;\n        }\n        panelComponent.getChildren().clear();\n        switch (config.reminderStyle()) {\n            case LONG_TEXT:\n                panelComponent.getChildren().add((LineComponent.builder())\n                        .left(LONG_TEXT)\n                        .build());\n\n                panelComponent.setPreferredSize(new Dimension(graphics.getFontMetrics().stringWidth(LONG_TEXT) - 20, 0));\n                break;\n            case SHORT_TEXT:\n                panelComponent.getChildren().add((LineComponent.builder())\n                        .left(SHORT_TEXT)\n                        .build());\n                panelComponent.setPreferredSize(new Dimension(graphics.getFontMetrics().stringWidth(SHORT_TEXT) + 10, 0));\n                break;\n\n        }\n        if (config.shouldFlash()) {\n            if (client.getGameCycle() % 40 \u003e\u003d 20) {\n                panelComponent.setBackgroundColor(config.flashColor1());\n            } else {\n                panelComponent.setBackgroundColor(config.flashColor2());\n            }\n        } else {\n            panelComponent.setBackgroundColor(config.flashColor1());\n        }\n\n        setPosition(OverlayPosition.ABOVE_CHATBOX_RIGHT);\n        return panelComponent.render(graphics);\n    }\n}","filePath":"src\\main\\java\\com\\braceletreminder\\BraceletReminderOverlay.java"},{"fileName":"BraceletReminderPlugin.java","content":"package com.braceletreminder;\n\nimport javax.inject.Inject;\n\nimport com.google.inject.Provides;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.gameval.InventoryID;\nimport net.runelite.api.gameval.ItemID;\nimport net.runelite.api.events.*;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.game.ItemVariationMapping;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport java.time.Duration;\nimport java.time.Instant;\n\n\n@Slf4j\n@PluginDescriptor(name \u003d \"Bracelet Reminder\")\n\npublic class BraceletReminderPlugin extends Plugin {\n\n\tprivate int overlayVisible;\n\n\tprivate static final int BRACELET_OF_SLAUGHTER \u003d ItemID.BRACELET_OF_SLAUGHTER;\n\tprivate static final int EXPEDITIOUS_BRACELET \u003d ItemID.EXPEDITIOUS_BRACELET;\n\tprivate static final int SALVE_AMULETEI \u003d ItemID.NZONE_SALVE_AMULET_E;\n\tprivate static final int SALVE_AMULET_E \u003d ItemID.LOTR_CRYSTALSHARD_NECKLACE_UPGRADE;\n\tprivate static final int AMULET_OF_AVARICE \u003d ItemID.WILD_CAVE_AMULET;\n\tprivate static final int SLAYER_HELMET \u003d ItemID.SLAYER_HELM;\n\tprivate static final int BLACK_MASK \u003d ItemID.HARMLESS_BLACK_MASK;\n\tprivate static final int BLACK_MASK_I \u003d ItemID.NZONE_BLACK_MASK;\n\tprivate static final int SPINY_HELMET \u003d ItemID.WALLBEAST_SPIKE_HELMET;\n\tprivate static final int NOSE_PEG \u003d ItemID.SLAYER_NOSEPEG;\n\tprivate static final int FACEMASK \u003d ItemID.SLAYER_FACEMASK;\n\tprivate static final int EARMUFFS \u003d ItemID.SLAYER_EARMUFFS;\n\tprivate static final int REINFORCED_GOGGLES  \u003d ItemID.SLAYER_REINFORCED_GOGGLES;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate BraceletReminderOverlay braceletOverlay;\n\n\t@Inject\n\tprivate BraceletReminderConfig config;\n\n\t@Provides\n\tBraceletReminderConfig provideConfig(ConfigManager configManager) {\n\t\treturn configManager.getConfig(BraceletReminderConfig.class);\n\t}\n\n\tboolean checkBracelet() {\n\t\tfinal ItemContainer equipment \u003d client.getItemContainer(InventoryID.WORN);\n\t\tif (equipment \u003d\u003d null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\treturn equipment.contains(BRACELET_OF_SLAUGHTER) || equipment.contains(EXPEDITIOUS_BRACELET);\n\t}\n\n\tboolean checkInventory() {\n\t\tfinal ItemContainer inventory \u003d client.getItemContainer(InventoryID.INV);\n\t\tif (inventory \u003d\u003d null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\treturn (config.slaughter() \u0026\u0026 inventory.contains(BRACELET_OF_SLAUGHTER)) || (config.expeditious() \u0026\u0026 inventory.contains(EXPEDITIOUS_BRACELET));\n\t}\n\tboolean checkAmulet() {\n\t\tItemContainer equipment \u003d client.getItemContainer(InventoryID.WORN);\n\t\tItem neck \u003d equipment !\u003d null ? equipment.getItem(EquipmentInventorySlot.AMULET.getSlotIdx()) : null;\n\t\tif (neck \u003d\u003d null) {\n\t\t\treturn false;\n\t\t}\n\t\tboolean amuletEquipped \u003d ItemVariationMapping.getVariations(SALVE_AMULETEI).contains(neck.getId());\n\t\tboolean amuletEquipped2 \u003d ItemVariationMapping.getVariations(SALVE_AMULET_E).contains(neck.getId());\n\t\tboolean amuletEquipped3 \u003d ItemVariationMapping.getVariations(AMULET_OF_AVARICE).contains(neck.getId());\n\t\treturn (amuletEquipped || amuletEquipped2 || amuletEquipped3);\n\n\t}\n\n\tboolean checkHelmet() {\n\t\tItemContainer equipment \u003d client.getItemContainer(InventoryID.WORN);\n\t\tItem hat \u003d equipment !\u003d null ? equipment.getItem(EquipmentInventorySlot.HEAD.getSlotIdx()) : null;\n\t\tif (hat \u003d\u003d null) {\n\t\t\treturn false;\n\t\t}\n\t\tboolean slayerHelmEquipped \u003d ItemVariationMapping.getVariations(SLAYER_HELMET).contains(hat.getId());\n\t\tboolean blackMaskEquipped \u003d ItemVariationMapping.getVariations(BLACK_MASK).contains(hat.getId());\n\t\tboolean blackMaskiEquipped \u003d ItemVariationMapping.getVariations(BLACK_MASK_I).contains(hat.getId());\n\t\tboolean spinyHelmEquipped \u003d ItemVariationMapping.getVariations(SPINY_HELMET).contains(hat.getId());\n\t\tboolean nosePegEquipped \u003d ItemVariationMapping.getVariations(NOSE_PEG).contains(hat.getId());\n\t\tboolean faceMaskEquipped \u003d ItemVariationMapping.getVariations(FACEMASK).contains(hat.getId());\n\t\tboolean earMuffsEquipped \u003d ItemVariationMapping.getVariations(EARMUFFS).contains(hat.getId());\n\t\tboolean gogglesEquipped \u003d ItemVariationMapping.getVariations(REINFORCED_GOGGLES).contains(hat.getId());\n\t\treturn (slayerHelmEquipped || blackMaskEquipped || blackMaskiEquipped || spinyHelmEquipped || nosePegEquipped || faceMaskEquipped || earMuffsEquipped || gogglesEquipped);\n\t}\n\n\tprivate Actor lastOpponent \u003d null;\n\tprivate Instant lastTime \u003d Instant.now();\n\n\t@Subscribe\n\tpublic void onInteractingChanged(InteractingChanged event) {\n\t\tif (event.getSource() !\u003d client.getLocalPlayer()) {\n\t\t\treturn;\n\t\t}\n\n\t\tActor opponent \u003d event.getTarget();\n\n\t\tif (opponent \u003d\u003d null) {\n\t\t\tlastTime \u003d Instant.now();\n\t\t\tlastOpponent \u003d null;\n\t\t\treturn;\n\t\t}\n\n\t\tif (opponent instanceof NPC) {\n\t\t\tNPC npc \u003d (NPC) opponent;\n\t\t\tint combatLevel \u003d npc.getCombatLevel();\n\t\t\tif (combatLevel \u003e\u003d 1) {\n\t\t\t\tlastOpponent \u003d opponent;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic double getOpponentHealth() {\n\t\tint healthRatio \u003d lastOpponent.getHealthRatio();\n\t\tint healthScale \u003d lastOpponent.getHealthScale();\n\t\treturn (healthRatio / (double) healthScale) * 100;\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick gameTick) {\n\t\tif (lastTime !\u003d null \u0026\u0026 Duration.between(lastTime, Instant.now()).getSeconds() \u003e\u003d config.overlayDuration()) {\n\t\t\tlastOpponent \u003d null;\n\t\t\tlastTime \u003d null;\n\t\t}\n\t\tif (overlayVisible !\u003d -1) {\n\t\t\tcheckOverlay();\n\t\t}\n\n\t\tItemContainer equipment \u003d client.getItemContainer(InventoryID.WORN);\n\t\tItem gloves \u003d equipment !\u003d null ? equipment.getItem(EquipmentInventorySlot.GLOVES.getSlotIdx()) : null;\n\t\tboolean shouldAddOverlay \u003d\n\t\t\t\t(gloves \u003d\u003d null \u0026\u0026 checkInventory() \u0026\u0026 lastOpponent !\u003d null) ||\n\t\t\t\t\t\t(lastOpponent !\u003d null \u0026\u0026 getOpponentHealth() \u003c (double) config.healthThreshold() \u0026\u0026 !checkBracelet() \u0026\u0026 (checkAmulet() || checkHelmet()) \u0026\u0026 checkInventory());\n\n\t\tif (shouldAddOverlay) {\n\t\t\tif (overlayVisible \u003d\u003d -1) {\n\t\t\t\taddOverlay();\n\t\t\t}\n\t\t} else {\n\t\t\tif (overlayVisible !\u003d -1) {\n\t\t\t\tremoveOverlay();\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onNpcDespawned(NpcDespawned event) {\n\t\tif (lastOpponent !\u003d null \u0026\u0026 event.getActor().equals(lastOpponent)) {\n\t\t\tlastOpponent \u003d null;\n\t\t}\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception {\n\t\toverlayVisible \u003d -1;\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception {\n\t\tif (overlayManager !\u003d null)\n\t\t\toverlayManager.remove(braceletOverlay);\n\n\n\t}\n\n\tprivate void addOverlay() {\n\t\tif (overlayManager !\u003d null) {\n\t\t\toverlayManager.add(braceletOverlay);\n\t\t\toverlayVisible \u003d client.getTickCount();\n\t\t}\n\t}\n\n\tprivate void removeOverlay() {\n\n\t\toverlayManager.remove(braceletOverlay);\n\t\toverlayVisible \u003d -1;\n\t}\n\n\tprivate void checkOverlay() {\n\t\tif (checkBracelet() \u0026\u0026 lastOpponent \u003d\u003d null) {\n\t\t\tremoveOverlay();\n\t\t}\n\t}\n}","filePath":"src\\main\\java\\com\\braceletreminder\\BraceletReminderPlugin.java"},{"fileName":"BraceletReminder.java","content":"package com.braceletreminder;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class BraceletReminder\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(BraceletReminderPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\braceletreminder\\BraceletReminder.java"}]},{"commit":"23c8d0afad954af44de614c01237c232bfa0603a","repository":"https://github.com/JarateKing/histogram.git","internalName":"histogram","files":[{"fileName":"EventType.java","content":"package com.histogram;\n\npublic enum EventType {\n    TICK,\n    IDEAL_TICK,\n    PRAYER,\n    EQUIP,\n    EAT,\n    MOVE,\n    ATTACK,\n    SPECIAL_ATTACK,\n    USE,\n\n    CUSTOM_1,\n    CUSTOM_2,\n    CUSTOM_3,\n    CUSTOM_4,\n    CUSTOM_5,\n}\n","filePath":"src\\main\\java\\com\\histogram\\EventType.java"},{"fileName":"HistogramConfig.java","content":"package com.histogram;\n\nimport java.awt.*;\n\nimport net.runelite.client.config.*;\n\n@ConfigGroup(\"histogram\")\npublic interface HistogramConfig extends Config\n{\n\t@ConfigSection(\n\t\t\tname \u003d \"Panel\",\n\t\t\tdescription \u003d \"Panel Settings\",\n\t\t\tposition \u003d 0,\n\t\t\tclosedByDefault \u003d false\n\t)\n\tString panelSection \u003d \"Panel\";\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Events\",\n\t\t\tdescription \u003d \"Events Settings\",\n\t\t\tposition \u003d 1,\n\t\t\tclosedByDefault \u003d false\n\t)\n\tString eventSection \u003d \"Events\";\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Custom\",\n\t\t\tdescription \u003d \"Additional Inputs\",\n\t\t\tposition \u003d 2,\n\t\t\tclosedByDefault \u003d true\n\t)\n\tString customSection \u003d \"Custom Inputs\";\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Advanced\",\n\t\t\tdescription \u003d \"Advanced Settings\",\n\t\t\tposition \u003d 3,\n\t\t\tclosedByDefault \u003d true\n\t)\n\tString advancedSection \u003d \"Advanced\";\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"panelsize\",\n\t\t\tname \u003d \"Panel size\",\n\t\t\tdescription \u003d \"Dimensions of the entire histogram panel (horizontal x vertical)\",\n\t\t\tsection \u003d panelSection\n\t)\n\tdefault Dimension panelSize()\n\t{\n\t\treturn new Dimension(100, 10);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"bgcolor\",\n\t\t\tname \u003d \"Background Color\",\n\t\t\tdescription \u003d \"Color of the background panel\",\n\t\t\tsection \u003d panelSection\n\t)\n\tdefault Color bgColor()\n\t{\n\t\treturn new Color(0, 0, 0, 175);\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"duration\",\n\t\t\tname \u003d \"Duration\",\n\t\t\tdescription \u003d \"How long (in milliseconds) it takes for events to traverse the histogram\",\n\t\t\tsection \u003d panelSection\n\t)\n\tdefault int durationMS()\n\t{\n\t\treturn 1800;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"linewidth\",\n\t\t\tname \u003d \"Line Width\",\n\t\t\tdescription \u003d \"How wide (in pixels) should each tick/input marker be\",\n\t\t\tsection \u003d panelSection\n\t)\n\tdefault int linewidth()\n\t{\n\t\treturn 2;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"antialiasing\",\n\t\t\tname \u003d \"Anti-aliasing\",\n\t\t\tdescription \u003d \"Should event indicators be anti-aliased\",\n\t\t\tsection \u003d panelSection\n\t)\n\tdefault boolean antialiasing()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"idealticks\",\n\t\t\tname \u003d \"Show Ideal Tickrate\",\n\t\t\tdescription \u003d \"Should we display ideal 0.6s interval ticks as well as actual ticks\",\n\t\t\tsection \u003d panelSection\n\t)\n\tdefault boolean useIdealTicks()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"inputlag\",\n\t\t\tname \u003d \"Show Clientside Input\",\n\t\t\tdescription \u003d \"Display the range from the clientside input event to it being fully processed.\",\n\t\t\tsection \u003d panelSection,\n\t\t\tposition \u003d 3\n\t)\n\tdefault boolean showInputLag()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"inputlagalpha\",\n\t\t\tname \u003d \"Clientside Input Alpha\",\n\t\t\tdescription \u003d \"Alpha value of input range.\",\n\t\t\tsection \u003d panelSection,\n\t\t\tposition \u003d 4\n\t)\n\tdefault int inputLagAlpha()\n\t{\n\t\treturn 50;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"serverlag\",\n\t\t\tname \u003d \"Show Serverside Processing\",\n\t\t\tdescription \u003d \"Display the range from when the server receives the event to it being fully processed.\",\n\t\t\tsection \u003d panelSection,\n\t\t\tposition \u003d 5\n\t)\n\tdefault boolean showServerLag()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"serverlagalpha\",\n\t\t\tname \u003d \"Serverside Processing Alpha\",\n\t\t\tdescription \u003d \"Alpha value of server processing range.\",\n\t\t\tsection \u003d panelSection,\n\t\t\tposition \u003d 6\n\t)\n\tdefault int serverLagAlpha()\n\t{\n\t\treturn 50;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"tick\",\n\t\t\tname \u003d \"Tick Color\",\n\t\t\tdescription \u003d \"Color of the gametick event\",\n\t\t\tsection \u003d eventSection,\n\t\t\tposition \u003d 0\n\t)\n\tdefault Color tickColor()\n\t{\n\t\treturn new Color(0, 255, 255, 255);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"idealtick\",\n\t\t\tname \u003d \"Ideal Tick Color\",\n\t\t\tdescription \u003d \"Color of the simulated ideal gametick timing\",\n\t\t\tsection \u003d eventSection,\n\t\t\tposition \u003d 1\n\t)\n\tdefault Color idealTickColor()\n\t{\n\t\treturn new Color(127, 255, 255, 127);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"equip\",\n\t\t\tname \u003d \"Equip Color\",\n\t\t\tdescription \u003d \"Color of the equip event\",\n\t\t\tsection \u003d eventSection,\n\t\t\tposition \u003d 2\n\t)\n\tdefault Color equipColor()\n\t{\n\t\treturn new Color(255, 255, 0, 255);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"eat\",\n\t\t\tname \u003d \"Eat Color\",\n\t\t\tdescription \u003d \"Color of the eat event\",\n\t\t\tsection \u003d eventSection,\n\t\t\tposition \u003d 2\n\t)\n\tdefault Color eatColor()\n\t{\n\t\treturn new Color(0, 255, 0, 255);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"move\",\n\t\t\tname \u003d \"Move Color\",\n\t\t\tdescription \u003d \"Color of the walk/run events\",\n\t\t\tsection \u003d eventSection,\n\t\t\tposition \u003d 2\n\t)\n\tdefault Color moveColor()\n\t{\n\t\treturn new Color(255, 0, 255, 255);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"use\",\n\t\t\tname \u003d \"Use Color\",\n\t\t\tdescription \u003d \"Color of the use events\",\n\t\t\tsection \u003d eventSection,\n\t\t\tposition \u003d 2\n\t)\n\tdefault Color useColor()\n\t{\n\t\treturn new Color(255, 255, 255, 255);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"attack\",\n\t\t\tname \u003d \"Attack Color\",\n\t\t\tdescription \u003d \"Color of the attack events\",\n\t\t\tsection \u003d eventSection,\n\t\t\tposition \u003d 2\n\t)\n\tdefault Color attackColor()\n\t{\n\t\treturn new Color(255, 0, 0, 255);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"spec\",\n\t\t\tname \u003d \"Special Attack Color\",\n\t\t\tdescription \u003d \"Color of special attack events\",\n\t\t\tsection \u003d eventSection,\n\t\t\tposition \u003d 2\n\t)\n\tdefault Color specColor()\n\t{\n\t\treturn new Color(255, 127, 0, 255);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"prayer\",\n\t\t\tname \u003d \"Prayer Color\",\n\t\t\tdescription \u003d \"Color of the prayer events\",\n\t\t\tsection \u003d eventSection,\n\t\t\tposition \u003d 2\n\t)\n\tdefault Color prayerColor()\n\t{\n\t\treturn new Color(85, 85, 255, 255);\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"pingmax\",\n\t\t\tname \u003d \"Ping Delay Maximum\",\n\t\t\tdescription \u003d \"The maximum delay due to ping (in milliseconds). Doesn\u0027t interrupt pings, just limits the value returned.\",\n\t\t\tsection \u003d advancedSection,\n\t\t\tposition \u003d 0\n\t)\n\tdefault int pingMax()\n\t{\n\t\treturn 10000;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"pingcount\",\n\t\t\tname \u003d \"Ping Every nth\",\n\t\t\tdescription \u003d \"How many gameticks occur before re-pinging\",\n\t\t\tsection \u003d advancedSection,\n\t\t\tposition \u003d 1\n\t)\n\tdefault int pingCount()\n\t{\n\t\treturn 5;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"delaymoveconst\",\n\t\t\tname \u003d \"Move Delay Constant\",\n\t\t\tdescription \u003d \"The value to add to ping to delay move inputs (in milliseconds)\",\n\t\t\tsection \u003d advancedSection,\n\t\t\tposition \u003d 2\n\t)\n\tdefault int moveConst()\n\t{\n\t\treturn 60;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"delaymovemult\",\n\t\t\tname \u003d \"Move Delay Mult\",\n\t\t\tdescription \u003d \"The value to add to ping to delay move inputs, multiplied by playercount (x1000)\",\n\t\t\tsection \u003d advancedSection,\n\t\t\tposition \u003d 2\n\t)\n\tdefault int moveMult()\n\t{\n\t\treturn 60;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"delayprayerconst\",\n\t\t\tname \u003d \"Prayer Delay Constant\",\n\t\t\tdescription \u003d \"The value to add to ping to delay prayer inputs (in milliseconds)\",\n\t\t\tsection \u003d advancedSection,\n\t\t\tposition \u003d 2\n\t)\n\tdefault int prayerConst()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"delayprayermult\",\n\t\t\tname \u003d \"Prayer Delay Mult\",\n\t\t\tdescription \u003d \"The value to add to ping to delay prayer inputs, multiplied by playercount (x1000)\",\n\t\t\tsection \u003d advancedSection,\n\t\t\tposition \u003d 2\n\t)\n\tdefault int prayerMult()\n\t{\n\t\treturn 60;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"delayattackconst\",\n\t\t\tname \u003d \"Attack Delay Constant\",\n\t\t\tdescription \u003d \"The value to add to ping to delay attack inputs (in milliseconds)\",\n\t\t\tsection \u003d advancedSection,\n\t\t\tposition \u003d 2\n\t)\n\tdefault int attackConst()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"delayattackmult\",\n\t\t\tname \u003d \"Attack Delay Mult\",\n\t\t\tdescription \u003d \"The value to add to ping to delay attack inputs, multiplied by playercount (x1000)\",\n\t\t\tsection \u003d advancedSection,\n\t\t\tposition \u003d 2\n\t)\n\tdefault int attackMult()\n\t{\n\t\treturn 90;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"delayspecialattackconst\",\n\t\t\tname \u003d \"Special Attack Delay Constant\",\n\t\t\tdescription \u003d \"The value to add to ping to delay specialattack inputs (in milliseconds)\",\n\t\t\tsection \u003d advancedSection,\n\t\t\tposition \u003d 2\n\t)\n\tdefault int specialattackConst()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"delayspecialattackmult\",\n\t\t\tname \u003d \"Special Attack Delay Mult\",\n\t\t\tdescription \u003d \"The value to add to ping to delay specialattack inputs, multiplied by playercount (x1000)\",\n\t\t\tsection \u003d advancedSection,\n\t\t\tposition \u003d 2\n\t)\n\tdefault int specialattackMult()\n\t{\n\t\treturn 90;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"delayeatconst\",\n\t\t\tname \u003d \"Eat Delay Constant\",\n\t\t\tdescription \u003d \"The value to add to ping to delay eat inputs (in milliseconds)\",\n\t\t\tsection \u003d advancedSection,\n\t\t\tposition \u003d 2\n\t)\n\tdefault int eatConst()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"delayeatmult\",\n\t\t\tname \u003d \"Eat Delay Mult\",\n\t\t\tdescription \u003d \"The value to add to ping to delay eat inputs, multiplied by playercount (x1000)\",\n\t\t\tsection \u003d advancedSection,\n\t\t\tposition \u003d 2\n\t)\n\tdefault int eatMult()\n\t{\n\t\treturn 90;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"delayuseconst\",\n\t\t\tname \u003d \"Use Delay Constant\",\n\t\t\tdescription \u003d \"The value to add to ping to delay use inputs (in milliseconds)\",\n\t\t\tsection \u003d advancedSection,\n\t\t\tposition \u003d 2\n\t)\n\tdefault int useConst()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"delayusemult\",\n\t\t\tname \u003d \"Use Delay Mult\",\n\t\t\tdescription \u003d \"The value to add to ping to delay use inputs, multiplied by playercount (x1000)\",\n\t\t\tsection \u003d advancedSection,\n\t\t\tposition \u003d 2\n\t)\n\tdefault int useMult()\n\t{\n\t\treturn 90;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"delayequipconst\",\n\t\t\tname \u003d \"Equip Delay Constant\",\n\t\t\tdescription \u003d \"The value to add to ping to delay equip inputs (in milliseconds)\",\n\t\t\tsection \u003d advancedSection,\n\t\t\tposition \u003d 2\n\t)\n\tdefault int equipConst()\n\t{\n\t\treturn 30;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"delayequipmult\",\n\t\t\tname \u003d \"Equip Delay Mult\",\n\t\t\tdescription \u003d \"The value to add to ping to delay equip inputs, multiplied by playercount (x1000)\",\n\t\t\tsection \u003d advancedSection,\n\t\t\tposition \u003d 2\n\t)\n\tdefault int equipMult()\n\t{\n\t\treturn 90;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"custom1color\",\n\t\t\tname \u003d \"Custom 1 Color\",\n\t\t\tdescription \u003d \"Color of custom events\",\n\t\t\tsection \u003d customSection,\n\t\t\tposition \u003d 0\n\t)\n\tdefault Color custom1Color()\n\t{\n\t\treturn new Color(255, 255, 255, 255);\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"custom1interaction\",\n\t\t\tname \u003d \"Custom 1 Interaction\",\n\t\t\tdescription \u003d \"Event to use for custom 1\",\n\t\t\tsection \u003d customSection,\n\t\t\tposition \u003d 0\n\t)\n\tdefault String custom1Interaction()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"custom1target\",\n\t\t\tname \u003d \"Custom 1 Target\",\n\t\t\tdescription \u003d \"Interaction target to use for custom 1\",\n\t\t\tsection \u003d customSection,\n\t\t\tposition \u003d 0\n\t)\n\tdefault String custom1Target()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"delaycustom1const\",\n\t\t\tname \u003d \"Custom 1 Delay Constant\",\n\t\t\tdescription \u003d \"The value to add to ping to delay custom 1 inputs (in milliseconds)\",\n\t\t\tsection \u003d advancedSection,\n\t\t\tposition \u003d 3\n\t)\n\tdefault int custom1Const()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"delaycustom1mult\",\n\t\t\tname \u003d \"Custom 1 Delay Mult\",\n\t\t\tdescription \u003d \"The value to add to ping to delay custom 1 inputs, multiplied by playercount (x1000)\",\n\t\t\tsection \u003d advancedSection,\n\t\t\tposition \u003d 3\n\t)\n\tdefault int custom1Mult()\n\t{\n\t\treturn 60;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"custom2color\",\n\t\t\tname \u003d \"Custom 2 Color\",\n\t\t\tdescription \u003d \"Color of custom events\",\n\t\t\tsection \u003d customSection,\n\t\t\tposition \u003d 0\n\t)\n\tdefault Color custom2Color()\n\t{\n\t\treturn new Color(255, 255, 255, 255);\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"custom2interaction\",\n\t\t\tname \u003d \"Custom 2 Interaction\",\n\t\t\tdescription \u003d \"Event to use for Custom 2\",\n\t\t\tsection \u003d customSection,\n\t\t\tposition \u003d 0\n\t)\n\tdefault String custom2Interaction()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"custom2target\",\n\t\t\tname \u003d \"Custom 2 Target\",\n\t\t\tdescription \u003d \"Interaction target to use for Custom 2\",\n\t\t\tsection \u003d customSection,\n\t\t\tposition \u003d 0\n\t)\n\tdefault String custom2Target()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"delaycustom2const\",\n\t\t\tname \u003d \"Custom 2 Delay Constant\",\n\t\t\tdescription \u003d \"The value to add to ping to delay Custom 2 inputs (in milliseconds)\",\n\t\t\tsection \u003d advancedSection,\n\t\t\tposition \u003d 3\n\t)\n\tdefault int custom2Const()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"delaycustom2mult\",\n\t\t\tname \u003d \"Custom 2 Delay Mult\",\n\t\t\tdescription \u003d \"The value to add to ping to delay Custom 2 inputs, multiplied by playercount (x1000)\",\n\t\t\tsection \u003d advancedSection,\n\t\t\tposition \u003d 3\n\t)\n\tdefault int custom2Mult()\n\t{\n\t\treturn 60;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"custom3color\",\n\t\t\tname \u003d \"Custom 3 Color\",\n\t\t\tdescription \u003d \"Color of custom events\",\n\t\t\tsection \u003d customSection,\n\t\t\tposition \u003d 0\n\t)\n\tdefault Color custom3Color()\n\t{\n\t\treturn new Color(255, 255, 255, 255);\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"custom3interaction\",\n\t\t\tname \u003d \"Custom 3 Interaction\",\n\t\t\tdescription \u003d \"Event to use for Custom 3\",\n\t\t\tsection \u003d customSection,\n\t\t\tposition \u003d 0\n\t)\n\tdefault String custom3Interaction()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"custom3target\",\n\t\t\tname \u003d \"Custom 3 Target\",\n\t\t\tdescription \u003d \"Interaction target to use for Custom 3\",\n\t\t\tsection \u003d customSection,\n\t\t\tposition \u003d 0\n\t)\n\tdefault String custom3Target()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"delaycustom3const\",\n\t\t\tname \u003d \"Custom 3 Delay Constant\",\n\t\t\tdescription \u003d \"The value to add to ping to delay Custom 3 inputs (in milliseconds)\",\n\t\t\tsection \u003d advancedSection,\n\t\t\tposition \u003d 3\n\t)\n\tdefault int custom3Const()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"delaycustom3mult\",\n\t\t\tname \u003d \"Custom 3 Delay Mult\",\n\t\t\tdescription \u003d \"The value to add to ping to delay Custom 3 inputs, multiplied by playercount (x1000)\",\n\t\t\tsection \u003d advancedSection,\n\t\t\tposition \u003d 3\n\t)\n\tdefault int custom3Mult()\n\t{\n\t\treturn 60;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"custom4color\",\n\t\t\tname \u003d \"Custom 4 Color\",\n\t\t\tdescription \u003d \"Color of custom events\",\n\t\t\tsection \u003d customSection,\n\t\t\tposition \u003d 0\n\t)\n\tdefault Color custom4Color()\n\t{\n\t\treturn new Color(255, 255, 255, 255);\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"custom4interaction\",\n\t\t\tname \u003d \"Custom 4 Interaction\",\n\t\t\tdescription \u003d \"Event to use for Custom 4\",\n\t\t\tsection \u003d customSection,\n\t\t\tposition \u003d 0\n\t)\n\tdefault String custom4Interaction()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"custom4target\",\n\t\t\tname \u003d \"Custom 4 Target\",\n\t\t\tdescription \u003d \"Interaction target to use for Custom 4\",\n\t\t\tsection \u003d customSection,\n\t\t\tposition \u003d 0\n\t)\n\tdefault String custom4Target()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"delaycustom4const\",\n\t\t\tname \u003d \"Custom 4 Delay Constant\",\n\t\t\tdescription \u003d \"The value to add to ping to delay Custom 4 inputs (in milliseconds)\",\n\t\t\tsection \u003d advancedSection,\n\t\t\tposition \u003d 3\n\t)\n\tdefault int custom4Const()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"delaycustom4mult\",\n\t\t\tname \u003d \"Custom 4 Delay Mult\",\n\t\t\tdescription \u003d \"The value to add to ping to delay Custom 4 inputs, multiplied by playercount (x1000)\",\n\t\t\tsection \u003d advancedSection,\n\t\t\tposition \u003d 3\n\t)\n\tdefault int custom4Mult()\n\t{\n\t\treturn 60;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"custom5color\",\n\t\t\tname \u003d \"Custom 5 Color\",\n\t\t\tdescription \u003d \"Color of custom events\",\n\t\t\tsection \u003d customSection,\n\t\t\tposition \u003d 0\n\t)\n\tdefault Color custom5Color()\n\t{\n\t\treturn new Color(255, 255, 255, 255);\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"custom5interaction\",\n\t\t\tname \u003d \"Custom 5 Interaction\",\n\t\t\tdescription \u003d \"Event to use for Custom 5\",\n\t\t\tsection \u003d customSection,\n\t\t\tposition \u003d 0\n\t)\n\tdefault String custom5Interaction()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"custom5target\",\n\t\t\tname \u003d \"Custom 5 Target\",\n\t\t\tdescription \u003d \"Interaction target to use for Custom 5\",\n\t\t\tsection \u003d customSection,\n\t\t\tposition \u003d 0\n\t)\n\tdefault String custom5Target()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"delaycustom5const\",\n\t\t\tname \u003d \"Custom 5 Delay Constant\",\n\t\t\tdescription \u003d \"The value to add to ping to delay Custom 5 inputs (in milliseconds)\",\n\t\t\tsection \u003d advancedSection,\n\t\t\tposition \u003d 3\n\t)\n\tdefault int custom5Const()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"delaycustom5mult\",\n\t\t\tname \u003d \"Custom 5 Delay Mult\",\n\t\t\tdescription \u003d \"The value to add to ping to delay Custom 5 inputs, multiplied by playercount (x1000)\",\n\t\t\tsection \u003d advancedSection,\n\t\t\tposition \u003d 3\n\t)\n\tdefault int custom5Mult()\n\t{\n\t\treturn 60;\n\t}\n}\n","filePath":"src\\main\\java\\com\\histogram\\HistogramConfig.java"},{"fileName":"HistogramOverlay.java","content":"package com.histogram;\n\nimport net.runelite.client.ui.overlay.Overlay;\nimport java.awt.*;\nimport java.util.*;\n\nclass HistogramOverlay extends Overlay\n{\n    private class Event\n    {\n        public EventType type;\n        public float time;\n        public float inputOffset;\n        public float serverOffset;\n\n        Event(EventType type)\n        {\n            this.type \u003d type;\n            this.time \u003d 0;\n            this.inputOffset \u003d 0;\n            this.serverOffset \u003d 0;\n        }\n    }\n\n    private ArrayDeque\u003cEvent\u003e events;\n\n    private HistogramConfig config;\n\n    private long lastnano;\n    private float delta;\n\n    HistogramOverlay(HistogramConfig config)\n    {\n        this.config \u003d config;\n\n        events \u003d new ArrayDeque\u003c\u003e();\n        lastnano \u003d System.nanoTime();\n    }\n\n    public void addEvent(EventType type)\n    {\n        Event event \u003d new Event(type);\n        events.add(event);\n    }\n\n    public void addEvent(EventType type, float delay)\n    {\n        Event event \u003d new Event(type);\n        event.time -\u003d delay;\n        events.add(event);\n    }\n\n    public void addEvent(EventType type, float pingdelay, float serverdelay)\n    {\n        Event event \u003d new Event(type);\n        event.time -\u003d pingdelay + serverdelay;\n        event.serverOffset \u003d serverdelay;\n        event.inputOffset \u003d pingdelay + serverdelay;\n        events.add(event);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        graphics.setColor(config.bgColor());\n        graphics.fillRect(0, 0, config.panelSize().width, config.panelSize().height);\n\n        updateDelta();\n        updateEvents();\n        drawEvents(graphics);\n\n        return config.panelSize();\n    }\n\n    private void drawEvents(Graphics2D graphics)\n    {\n        for (Event event : events)\n        {\n            drawBar(graphics, event.time, event.type);\n\n            if (event.inputOffset !\u003d 0 \u0026\u0026 event.serverOffset !\u003d 0)\n            {\n                if (config.showInputLag())\n                {\n                    drawRange(graphics, event.time + event.inputOffset, event.time, event.type, config.inputLagAlpha());\n                }\n\n                if (config.showServerLag())\n                {\n                    drawRange(graphics, event.time + event.serverOffset, event.time, event.type, config.serverLagAlpha());\n                }\n            }\n        }\n    }\n\n    private void drawBar(Graphics2D graphics, float time, EventType type)\n    {\n        Color color \u003d typeToColor(type);\n        float xpos \u003d lerp(config.panelSize().width, 0, time / (config.durationMS() / 1000f));\n\n        int fullbarwidth \u003d config.linewidth() - ((config.antialiasing()) ? 1 : 0);\n        int fullbaroffset \u003d (int)xpos + ((config.antialiasing() ? 1 : 0));\n        drawRect(graphics, color, fullbaroffset, fullbarwidth);\n\n        if (config.antialiasing())\n        {\n            float subpixel \u003d xpos % 1 + ((xpos \u003c 0) ? 1 : 0);\n\n            Color left \u003d new Color(color.getRed(), color.getGreen(), color.getBlue(), (int) (color.getAlpha() * (1 - subpixel)));\n            Color right \u003d new Color(color.getRed(), color.getGreen(), color.getBlue(), (int) (color.getAlpha() * subpixel));\n\n            drawRect(graphics, left, (int)xpos, 1);\n            drawRect(graphics, right, (int)xpos + config.linewidth(), 1);\n        }\n    }\n\n    private void drawRange(Graphics2D graphics, float start, float end, EventType type, int alpha)\n    {\n        Color originalColor \u003d typeToColor(type);\n        Color color \u003d new Color(originalColor.getRed(), originalColor.getGreen(), originalColor.getBlue(), (int)(originalColor.getAlpha() * (alpha / 255f)));\n\n        float xpos \u003d lerp(config.panelSize().width, 0, start / (config.durationMS() / 1000f));\n        float width \u003d lerp(config.panelSize().width, 0, end / (config.durationMS() / 1000f)) - xpos;\n        float subpixel \u003d xpos % 1 + ((xpos \u003c 0) ? 1 : 0);\n\n        int fullbarwidth \u003d (int)(width + subpixel + 1);\n        int fullbaroffset \u003d (int)xpos + ((config.antialiasing() ? 1 : 0));\n        drawRect(graphics, color, fullbaroffset, fullbarwidth);\n\n        if (config.antialiasing())\n        {\n            Color left \u003d new Color(color.getRed(), color.getGreen(), color.getBlue(), (int) (color.getAlpha() * (1 - subpixel)));\n            drawRect(graphics, left, (int)xpos, 1);\n        }\n    }\n\n    private void drawRect(Graphics2D graphics, Color color, int xpos, int width)\n    {\n        if (width \u003c\u003d 0)\n            return;\n\n        if (xpos + width \u003c 0 || xpos \u003e\u003d config.panelSize().width)\n            return;\n\n        if (color.getAlpha() \u003d\u003d 0)\n            return;\n\n        int boundedx \u003d Math.max(xpos, 0);\n        int boundedw \u003d Math.min(xpos + width, config.panelSize().width) - boundedx;\n\n        graphics.setColor(color);\n        graphics.fillRect(boundedx, 0, boundedw, config.panelSize().height);\n    }\n\n    private Color typeToColor(EventType type)\n    {\n        switch (type)\n        {\n            case TICK:\n                return config.tickColor();\n            case IDEAL_TICK:\n                return config.idealTickColor();\n            case EQUIP:\n                return config.equipColor();\n            case EAT:\n                return config.eatColor();\n            case MOVE:\n                return config.moveColor();\n            case USE:\n                return config.useColor();\n            case ATTACK:\n                return config.attackColor();\n            case SPECIAL_ATTACK:\n                return config.specColor();\n            case PRAYER:\n                return config.prayerColor();\n            case CUSTOM_1:\n                return config.custom1Color();\n            case CUSTOM_2:\n                return config.custom2Color();\n            case CUSTOM_3:\n                return config.custom3Color();\n            case CUSTOM_4:\n                return config.custom4Color();\n            case CUSTOM_5:\n                return config.custom5Color();\n            default:\n                return config.tickColor();\n        }\n    }\n\n    private float lerp(float a, float b, float t)\n    {\n        return a * (1 - t) + b * t;\n    }\n\n    private void updateDelta()\n    {\n        long nano \u003d System.nanoTime();\n        delta \u003d (nano - lastnano) / 1000000000f;\n        lastnano \u003d nano;\n    }\n\n    public void updateEvents()\n    {\n        for (Event event : events)\n        {\n            event.time +\u003d delta;\n        }\n\n        // events in the deque aren\u0027t strictly ordered by time, because of ping delays\n        // this \"assumes\" that they are to strictly ordered to remove them as soon as possible\n        // as it is some events will persist longer than they need to because of these delays\n        // however, all events will eventually surpass the max duration, so it\u0027s not an issue\n        // the maximum duration, if kept at sane levels, shouldn\u0027t ever result in much buildup\n        float extratime \u003d 1 + (float)config.linewidth() / (float)config.panelSize().width;\n        while (!events.isEmpty() \u0026\u0026 events.peek().time \u003e (config.durationMS() / 1000f * extratime))\n        {\n            events.removeFirst();\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\histogram\\HistogramOverlay.java"},{"fileName":"HistogramPlugin.java","content":"package com.histogram;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.plugins.worldhopper.ping.Ping;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.api.events.*;\nimport net.runelite.client.game.WorldService;\n\nimport java.awt.*;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.concurrent.TimeUnit;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Histogram\"\n)\npublic class HistogramPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate HistogramConfig config;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate WorldService worldService;\n\n\tprivate HistogramOverlay histogramOverlay;\n\tprivate ScheduledExecutorService pingThreads;\n\n\tprivate int ping \u003d -1;\n\tprivate int checksTilPing \u003d 0;\n\n\tprivate static final int HOP_GAMESTATE \u003d 45;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\thistogramOverlay \u003d new HistogramOverlay(config);\n\t\toverlayManager.add(histogramOverlay);\n\n\t\tpingThreads \u003d Executors.newScheduledThreadPool(20);\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\toverlayManager.remove(histogramOverlay);\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick tick)\n\t{\n\t\thistogramOverlay.addEvent(EventType.TICK);\n\n\t\tif (config.useIdealTicks()) {\n\t\t\thistogramOverlay.addEvent(EventType.IDEAL_TICK, 0.600f);\n\t\t}\n\n\t\tpingThreads.schedule(this::updatePing, 0, TimeUnit.SECONDS);\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOptionClicked(MenuOptionClicked e) {\n\t\tString menuOption \u003d removeFormatting(e.getMenuOption());\n\t\tString menuTarget \u003d removeFormatting(e.getMenuTarget());\n\n\t\tif (menuOption.equals(\"Wield\") || menuOption.equals(\"Wear\") || menuOption.equals(\"Remove\") || menuOption.equals(\"Hold\")) {\n\t\t\thistogramOverlay.addEvent(EventType.EQUIP, getInputDelay(EventType.EQUIP), getServerDelay(EventType.EQUIP));\n\t\t\treturn;\n\t\t}\n\n\t\tif (menuOption.equals(\"Eat\") || menuOption.equals(\"Drink\")) {\n\t\t\thistogramOverlay.addEvent(EventType.EAT, getInputDelay(EventType.EAT), getServerDelay(EventType.EAT));\n\t\t\treturn;\n\t\t}\n\n\t\tif (menuOption.equals(\"Walk here\")) {\n\t\t\thistogramOverlay.addEvent(EventType.MOVE, getInputDelay(EventType.MOVE), getServerDelay(EventType.MOVE));\n\t\t\treturn;\n\t\t}\n\n\t\tif (menuOption.equals(\"Use\")) {\n\t\t\tif (menuTarget.equals(\"Special Attack\")) {\n\t\t\t\thistogramOverlay.addEvent(EventType.SPECIAL_ATTACK, getInputDelay(EventType.SPECIAL_ATTACK), getServerDelay(EventType.SPECIAL_ATTACK));\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse {\n\t\t\t\thistogramOverlay.addEvent(EventType.USE, getInputDelay(EventType.USE), getServerDelay(EventType.USE));\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (removeFormatting(menuOption).equals(\"Use Special Attack\")) {\n\t\t\thistogramOverlay.addEvent(EventType.SPECIAL_ATTACK, getInputDelay(EventType.SPECIAL_ATTACK), getServerDelay(EventType.SPECIAL_ATTACK));\n\t\t\treturn;\n\t\t}\n\n\t\tif (menuOption.equals(\"Attack\")) {\n\t\t\thistogramOverlay.addEvent(EventType.ATTACK, getInputDelay(EventType.ATTACK), getServerDelay(EventType.ATTACK));\n\t\t\treturn;\n\t\t}\n\n\t\tif (menuOption.equals(\"Activate\") || menuOption.equals(\"Deactivate\")) {\n\t\t\thistogramOverlay.addEvent(EventType.PRAYER, getInputDelay(EventType.PRAYER), getServerDelay(EventType.PRAYER));\n\t\t\treturn;\n\t\t}\n\n\t\tif (handleCustomConfig(menuOption, menuTarget, config.custom1Interaction(), config.custom1Target(), EventType.CUSTOM_1))\n\t\t\treturn;\n\t\tif (handleCustomConfig(menuOption, menuTarget, config.custom2Interaction(), config.custom2Target(), EventType.CUSTOM_2))\n\t\t\treturn;\n\t\tif (handleCustomConfig(menuOption, menuTarget, config.custom3Interaction(), config.custom3Target(), EventType.CUSTOM_3))\n\t\t\treturn;\n\t\tif (handleCustomConfig(menuOption, menuTarget, config.custom4Interaction(), config.custom4Target(), EventType.CUSTOM_4))\n\t\t\treturn;\n\t\tif (handleCustomConfig(menuOption, menuTarget, config.custom5Interaction(), config.custom5Target(), EventType.CUSTOM_5))\n\t\t\treturn;\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged)\n\t{\n\t\tif (gameStateChanged.getGameState().getState() \u003d\u003d HOP_GAMESTATE)\n\t\t{\n\t\t\tchecksTilPing \u003d 0;\n\t\t}\n\t}\n\n\t@Provides\n\tHistogramConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(HistogramConfig.class);\n\t}\n\n\tprivate float getInputDelay(EventType event)\n\t{\n\t\tfloat delay \u003d (ping / 1000f);\n\t\treturn Math.min(delay, (config.pingMax() / 1000f));\n\t}\n\n\tprivate void updatePing()\n\t{\n\t\tif (checksTilPing \u003d\u003d 0)\n\t\t{\n\t\t\tint currentping \u003d sendPing();\n\n\t\t\tif (currentping !\u003d -1)\n\t\t\t{\n\t\t\t\tping \u003d currentping;\n\t\t\t\tchecksTilPing \u003d config.pingCount() - 1;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tchecksTilPing--;\n\t\t}\n\t}\n\n\tprivate int sendPing()\n\t{\n\t\treturn Ping.ping(worldService.getWorlds().findWorld(client.getWorld()));\n\t}\n\n\tprivate int getPlayerCount()\n\t{\n\t\treturn worldService.getWorlds().findWorld(client.getWorld()).getPlayers();\n\t}\n\n\tprivate String removeFormatting(String raw)\n\t{\n\t\treturn raw.replaceAll(\"\u003c[^\u003e]*\u003e\", \"\");\n\t}\n\n\tprivate float getServerDelay(EventType type)\n\t{\n\t\tint playercount \u003d getPlayerCount();\n\n\t\tswitch (type)\n\t\t{\n\t\t\tcase EQUIP:\n\t\t\t\treturn config.equipConst() / 1000f + (config.equipMult() / 1000f * playercount / 1000f);\n\t\t\tcase EAT:\n\t\t\t\treturn config.eatConst() / 1000f + (config.eatMult() / 1000f * playercount / 1000f);\n\t\t\tcase MOVE:\n\t\t\t\treturn config.moveConst() / 1000f + (config.moveMult() / 1000f * playercount / 1000f);\n\t\t\tcase USE:\n\t\t\t\treturn config.useConst() / 1000f + (config.useMult() / 1000f * playercount / 1000f);\n\t\t\tcase ATTACK:\n\t\t\t\treturn config.attackConst() / 1000f + (config.attackMult() / 1000f * playercount / 1000f);\n\t\t\tcase SPECIAL_ATTACK:\n\t\t\t\treturn config.specialattackConst() / 1000f + (config.specialattackMult() / 1000f * playercount / 1000f);\n\t\t\tcase PRAYER:\n\t\t\t\treturn config.prayerConst() / 1000f + (config.prayerMult() / 1000f * playercount / 1000f);\n\t\t\tcase CUSTOM_1:\n\t\t\t\treturn config.custom1Const() / 1000f + (config.custom1Mult() / 1000f * playercount / 1000f);\n\t\t\tcase CUSTOM_2:\n\t\t\t\treturn config.custom2Const() / 1000f + (config.custom2Mult() / 1000f * playercount / 1000f);\n\t\t\tcase CUSTOM_3:\n\t\t\t\treturn config.custom3Const() / 1000f + (config.custom3Mult() / 1000f * playercount / 1000f);\n\t\t\tcase CUSTOM_4:\n\t\t\t\treturn config.custom4Const() / 1000f + (config.custom4Mult() / 1000f * playercount / 1000f);\n\t\t\tcase CUSTOM_5:\n\t\t\t\treturn config.custom5Const() / 1000f + (config.custom5Mult() / 1000f * playercount / 1000f);\n\t\t\tdefault:\n\t\t\t\treturn 0;\n\t\t}\n\t}\n\n\tprivate boolean handleCustomConfig(String menuOption, String menuTarget, String option, String target, EventType type)\n\t{\n\t\tif (option.isEmpty() \u0026\u0026 target.isEmpty())\n\t\t\treturn false;\n\n\t\tif (option.isEmpty() || option.equals(menuOption))\n\t\t{\n\t\t\tif (target.isEmpty() || target.equals(menuTarget))\n\t\t\t{\n\t\t\t\thistogramOverlay.addEvent(type, getInputDelay(type), getServerDelay(type));\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\com\\histogram\\HistogramPlugin.java"},{"fileName":"HistogramPluginTest.java","content":"package com.histogram;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class HistogramPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\ttry {\n\t\t\tExternalPluginManager.loadBuiltin(HistogramPlugin.class);\n\t\t\tRuneLite.main(args);\n\t\t}\n\t\tcatch (Exception e) {\n\t\t\te.printStackTrace();\n\t\t}\n\t}\n}","filePath":"src\\test\\java\\com\\histogram\\HistogramPluginTest.java"}]},{"commit":"141f4cc20ef096c81aa21650e961cf78e705d0ac","repository":"https://github.com/Adam-/runelite-plugins.git","internalName":"deathindicator","files":[{"fileName":"DeathIndicatorConfig.java","content":"/*\n * Copyright (c) 2018, Danny \u003cDannysPVM@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage info.sigterm.plugins.deathindicator;\n\nimport java.time.Instant;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"deathIndicator\")\npublic interface DeathIndicatorConfig extends Config\n{\n\t@ConfigItem(\n\t\tposition \u003d 1,\n\t\tkeyName \u003d \"deathHintArrow\",\n\t\tname \u003d \"Death Hint Arrow\",\n\t\tdescription \u003d \"Configures whether or not to show a hint arrow to death location\"\n\t)\n\tdefault boolean showDeathHintArrow()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 2,\n\t\tkeyName \u003d \"deathInfoBox\",\n\t\tname \u003d \"Death InfoBox\",\n\t\tdescription \u003d \"Configures whether or not to show item reclaim timer and death world infobox\"\n\t)\n\tdefault boolean showDeathInfoBox()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 3,\n\t\tkeyName \u003d \"deathOnWorldMap\",\n\t\tname \u003d \"Mark on World Map\",\n\t\tdescription \u003d \"Configures whether or not to show death location on the world map\"\n\t)\n\tdefault boolean showDeathOnWorldMap()\n\t{\n\t\treturn true;\n\t}\n\n\t// Stored Data\n\t@ConfigItem(\n\t\tkeyName \u003d \"deathWorld\",\n\t\tname \u003d \"\",\n\t\tdescription \u003d \"\",\n\t\thidden \u003d true\n\t)\n\tdefault int deathWorld()\n\t{\n\t\treturn -1;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"deathWorld\",\n\t\tname \u003d \"\",\n\t\tdescription \u003d \"\"\n\t)\n\tvoid deathWorld(int deathWorld);\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"deathLocationX\",\n\t\tname \u003d \"\",\n\t\tdescription \u003d \"\",\n\t\thidden \u003d true\n\t)\n\tdefault int deathLocationX()\n\t{\n\t\treturn -1;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"deathLocationX\",\n\t\tname \u003d \"\",\n\t\tdescription \u003d \"\"\n\t)\n\tvoid deathLocationX(int deathLocationX);\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"deathLocationY\",\n\t\tname \u003d \"\",\n\t\tdescription \u003d \"\",\n\t\thidden \u003d true\n\t)\n\tdefault int deathLocationY()\n\t{\n\t\treturn -1;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"deathLocationY\",\n\t\tname \u003d \"\",\n\t\tdescription \u003d \"\"\n\t)\n\tvoid deathLocationY(int deathLocationY);\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"deathLocationPlane\",\n\t\tname \u003d \"\",\n\t\tdescription \u003d \"\",\n\t\thidden \u003d true\n\t)\n\tdefault int deathLocationPlane()\n\t{\n\t\treturn -1;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"deathLocationPlane\",\n\t\tname \u003d \"\",\n\t\tdescription \u003d \"\"\n\t)\n\tvoid deathLocationPlane(int deathLocationPlane);\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"timeOfDeath\",\n\t\tname \u003d \"\",\n\t\tdescription \u003d \"\",\n\t\thidden \u003d true\n\t)\n\tInstant timeOfDeath();\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"timeOfDeath\",\n\t\tname \u003d \"\",\n\t\tdescription \u003d \"\"\n\t)\n\tvoid timeOfDeath(Instant timeOfDeath);\n}\n","filePath":"src\\main\\java\\info\\sigterm\\plugins\\deathindicator\\DeathIndicatorConfig.java"},{"fileName":"DeathIndicatorPlugin.java","content":"/*\n * Copyright (c) 2018, Danny \u003cDannysPVM@gmail.com\u003e\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage info.sigterm.plugins.deathindicator;\n\nimport com.google.common.collect.ImmutableSet;\nimport com.google.inject.Provides;\nimport java.awt.image.BufferedImage;\nimport java.time.Duration;\nimport java.time.Instant;\nimport java.time.temporal.ChronoUnit;\nimport java.util.Set;\nimport javax.inject.Inject;\nimport javax.inject.Named;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.ItemID;\nimport net.runelite.api.MenuAction;\nimport net.runelite.api.Tile;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.ActorDeath;\nimport net.runelite.api.events.CommandExecuted;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.events.InfoBoxMenuClicked;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayMenuEntry;\nimport net.runelite.client.ui.overlay.infobox.InfoBoxManager;\nimport net.runelite.client.ui.overlay.infobox.Timer;\nimport net.runelite.client.ui.overlay.worldmap.WorldMapPointManager;\nimport net.runelite.client.util.ImageUtil;\n\n@PluginDescriptor(\n\tname \u003d \"Death Indicator\",\n\tdescription \u003d \"Show where you last died, and on what world\",\n\ttags \u003d {\"arrow\", \"hints\", \"world\", \"map\", \"overlay\"}\n)\n@Slf4j\npublic class DeathIndicatorPlugin extends Plugin\n{\n\tprivate static final String DEATH_TIMER_CLEAR \u003d \"Clear\";\n\tprivate static final Set\u003cInteger\u003e RESPAWN_REGIONS \u003d ImmutableSet.of(\n\t\t6457, // Kourend\n\t\t12850, // Lumbridge\n\t\t11828, // Falador\n\t\t12342, // Edgeville\n\t\t11062, // Camelot\n\t\t13150, // Prifddinas (it\u0027s possible to spawn in 2 adjacent regions)\n\t\t12894 // Prifddinas\n\t);\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate DeathIndicatorConfig config;\n\n\t@Inject\n\tprivate WorldMapPointManager worldMapPointManager;\n\n\t@Inject\n\tprivate InfoBoxManager infoBoxManager;\n\n\t@Inject\n\tprivate ItemManager itemManager;\n\n\t@Inject\n\t@Named(\"developerMode\")\n\tboolean developerMode;\n\n\tprivate BufferedImage mapArrow;\n\n\tprivate Timer deathTimer;\n\n\tprivate WorldPoint lastDeath;\n\tprivate Instant lastDeathTime;\n\tprivate int lastDeathWorld;\n\n\t@Provides\n\tDeathIndicatorConfig deathIndicatorConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(DeathIndicatorConfig.class);\n\t}\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\tif (!hasDied())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tresetInfobox();\n\n\t\tif (client.getWorld() !\u003d config.deathWorld())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (config.showDeathHintArrow())\n\t\t{\n\t\t\tif (!client.hasHintArrow())\n\t\t\t{\n\t\t\t\tclient.setHintArrow(new WorldPoint(config.deathLocationX(), config.deathLocationY(), config.deathLocationPlane()));\n\t\t\t}\n\t\t}\n\n\t\tif (config.showDeathOnWorldMap())\n\t\t{\n\t\t\tworldMapPointManager.removeIf(DeathWorldMapPoint.class::isInstance);\n\t\t\tworldMapPointManager.add(new DeathWorldMapPoint(new WorldPoint(config.deathLocationX(), config.deathLocationY(), config.deathLocationPlane()), this));\n\t\t}\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\tif (client.hasHintArrow())\n\t\t{\n\t\t\tclient.clearHintArrow();\n\t\t}\n\n\t\tif (deathTimer !\u003d null)\n\t\t{\n\t\t\tinfoBoxManager.removeInfoBox(deathTimer);\n\t\t\tdeathTimer \u003d null;\n\t\t}\n\n\t\tworldMapPointManager.removeIf(DeathWorldMapPoint.class::isInstance);\n\t}\n\n\t@Subscribe\n\tpublic void onActorDeath(ActorDeath actorDeath)\n\t{\n\t\tif (client.isInInstancedRegion() || actorDeath.getActor() !\u003d client.getLocalPlayer())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlastDeath \u003d client.getLocalPlayer().getWorldLocation();\n\t\tlastDeathWorld \u003d client.getWorld();\n\t\tlastDeathTime \u003d Instant.now();\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event)\n\t{\n\t\t// Check if player respawned in a death respawn location\n\t\tif (lastDeath !\u003d null \u0026\u0026 !client.getLocalPlayer().getWorldLocation().equals(lastDeath))\n\t\t{\n\t\t\tif (!RESPAWN_REGIONS.contains(client.getLocalPlayer().getWorldLocation().getRegionID()))\n\t\t\t{\n\t\t\t\tlog.debug(\"Died, but did not respawn in a known respawn location: {}\",\n\t\t\t\t\tclient.getLocalPlayer().getWorldLocation().getRegionID());\n\n\t\t\t\tlastDeath \u003d null;\n\t\t\t\tlastDeathTime \u003d null;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlog.debug(\"Died! Grave at {}\", lastDeath);\n\n\t\t\tdie(lastDeath, lastDeathTime, lastDeathWorld);\n\n\t\t\tlastDeath \u003d null;\n\t\t\tlastDeathTime \u003d null;\n\t\t}\n\n\t\tif (!hasDied() || client.getWorld() !\u003d config.deathWorld())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// timer up?\n\t\tboolean reset \u003d deathTimer !\u003d null \u0026\u0026 deathTimer.cull();\n\n\t\t// no more items on the ground?\n\t\tWorldPoint deathPoint \u003d new WorldPoint(config.deathLocationX(), config.deathLocationY(), config.deathLocationPlane());\n\t\tLocalPoint localPoint \u003d LocalPoint.fromWorld(client, deathPoint);\n\t\tif (localPoint !\u003d null)\n\t\t{\n\t\t\tTile[][][] tiles \u003d client.getScene().getTiles();\n\t\t\tTile tile \u003d tiles[client.getPlane()][localPoint.getSceneX()][localPoint.getSceneY()];\n\t\t\tif (tile \u003d\u003d null || tile.getGroundItems() \u003d\u003d null || tile.getGroundItems().isEmpty())\n\t\t\t{\n\t\t\t\treset \u003d true;\n\t\t\t}\n\t\t}\n\n\t\tif (reset)\n\t\t{\n\t\t\treset();\n\n\t\t\tresetDeathConfig();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onCommandExecuted(CommandExecuted commandExecuted)\n\t{\n\t\tif (developerMode \u0026\u0026 commandExecuted.getCommand().equals(\"die\"))\n\t\t{\n\t\t\tdie(client.getLocalPlayer().getWorldLocation(), Instant.now(), client.getWorld());\n\t\t}\n\t}\n\n\tprivate void die(WorldPoint location, Instant time, int world)\n\t{\n\t\t// Save death to config\n\t\tconfig.deathLocationX(location.getX());\n\t\tconfig.deathLocationY(location.getY());\n\t\tconfig.deathLocationPlane(location.getPlane());\n\t\tconfig.timeOfDeath(time);\n\t\tconfig.deathWorld(world);\n\n\t\tif (config.showDeathHintArrow())\n\t\t{\n\t\t\tclient.setHintArrow(location);\n\t\t}\n\n\t\tif (config.showDeathOnWorldMap())\n\t\t{\n\t\t\tworldMapPointManager.removeIf(DeathWorldMapPoint.class::isInstance);\n\t\t\tworldMapPointManager.add(new DeathWorldMapPoint(location, this));\n\t\t}\n\n\t\tresetInfobox();\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif (event.getGroup().equals(\"deathIndicator\"))\n\t\t{\n\t\t\tif (!config.showDeathHintArrow() \u0026\u0026 hasDied())\n\t\t\t{\n\t\t\t\tclient.clearHintArrow();\n\t\t\t}\n\n\t\t\tif (!config.showDeathInfoBox() \u0026\u0026 deathTimer !\u003d null)\n\t\t\t{\n\t\t\t\tinfoBoxManager.removeInfoBox(deathTimer);\n\t\t\t\tdeathTimer \u003d null;\n\t\t\t}\n\n\t\t\tif (!config.showDeathOnWorldMap())\n\t\t\t{\n\t\t\t\tworldMapPointManager.removeIf(DeathWorldMapPoint.class::isInstance);\n\t\t\t}\n\n\t\t\tif (!hasDied())\n\t\t\t{\n\t\t\t\tclient.clearHintArrow();\n\n\t\t\t\tresetInfobox();\n\n\t\t\t\tworldMapPointManager.removeIf(DeathWorldMapPoint.class::isInstance);\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged event)\n\t{\n\t\tif (!hasDied())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tif (client.getWorld() \u003d\u003d config.deathWorld())\n\t\t\t{\n\t\t\t\tWorldPoint deathPoint \u003d new WorldPoint(config.deathLocationX(), config.deathLocationY(), config.deathLocationPlane());\n\n\t\t\t\tif (config.showDeathHintArrow())\n\t\t\t\t{\n\t\t\t\t\tclient.setHintArrow(deathPoint);\n\t\t\t\t}\n\n\t\t\t\tif (config.showDeathOnWorldMap())\n\t\t\t\t{\n\t\t\t\t\tworldMapPointManager.removeIf(DeathWorldMapPoint.class::isInstance);\n\t\t\t\t\tworldMapPointManager.add(new DeathWorldMapPoint(deathPoint, this));\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tworldMapPointManager.removeIf(DeathWorldMapPoint.class::isInstance);\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onInfoBoxMenuClicked(InfoBoxMenuClicked infoBoxMenuClicked)\n\t{\n\t\tif (infoBoxMenuClicked.getInfoBox() \u003d\u003d deathTimer)\n\t\t{\n\t\t\treset();\n\t\t}\n\t}\n\n\tprivate boolean hasDied()\n\t{\n\t\treturn config.timeOfDeath() !\u003d null;\n\t}\n\n\tprivate void reset()\n\t{\n\t\tclient.clearHintArrow();\n\n\t\tif (deathTimer !\u003d null)\n\t\t{\n\t\t\tinfoBoxManager.removeInfoBox(deathTimer);\n\t\t\tdeathTimer \u003d null;\n\t\t}\n\n\t\tworldMapPointManager.removeIf(DeathWorldMapPoint.class::isInstance);\n\t}\n\n\tprivate void resetDeathConfig()\n\t{\n\t\tconfig.deathLocationX(0);\n\t\tconfig.deathLocationY(0);\n\t\tconfig.deathLocationPlane(0);\n\t\tconfig.deathWorld(0);\n\t\tconfig.timeOfDeath(null);\n\t}\n\n\tprivate void resetInfobox()\n\t{\n\t\tif (deathTimer !\u003d null)\n\t\t{\n\t\t\tinfoBoxManager.removeInfoBox(deathTimer);\n\t\t\tdeathTimer \u003d null;\n\t\t}\n\n\t\tif (hasDied() \u0026\u0026 config.showDeathInfoBox())\n\t\t{\n\t\t\tInstant now \u003d Instant.now();\n\t\t\tDuration timeLeft \u003d Duration.ofHours(1).minus(Duration.between(config.timeOfDeath(), now));\n\t\t\tif (!timeLeft.isNegative() \u0026\u0026 !timeLeft.isZero())\n\t\t\t{\n\t\t\t\tdeathTimer \u003d new Timer(timeLeft.getSeconds(), ChronoUnit.SECONDS, getBonesImage(), this);\n\t\t\t\tdeathTimer.setTooltip(\"Died on world: \" + config.deathWorld());\n\t\t\t\tdeathTimer.getMenuEntries().add(new OverlayMenuEntry(MenuAction.RUNELITE_INFOBOX, DEATH_TIMER_CLEAR, \"Death Timer\"));\n\t\t\t\tinfoBoxManager.addInfoBox(deathTimer);\n\t\t\t}\n\t\t}\n\t}\n\n\tBufferedImage getMapArrow()\n\t{\n\t\tif (mapArrow !\u003d null)\n\t\t{\n\t\t\treturn mapArrow;\n\t\t}\n\n\t\tmapArrow \u003d ImageUtil.getResourceStreamFromClass(getClass(), \"/util/clue_arrow.png\");\n\n\t\treturn mapArrow;\n\t}\n\n\tBufferedImage getBonesImage()\n\t{\n\t\treturn itemManager.getImage(ItemID.BONES);\n\t}\n}\n","filePath":"src\\main\\java\\info\\sigterm\\plugins\\deathindicator\\DeathIndicatorPlugin.java"},{"fileName":"DeathWorldMapPoint.java","content":"/*\n * Copyright (c) 2018, Danny \u003cDannysPVM@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage info.sigterm.plugins.deathindicator;\n\nimport java.awt.Graphics;\nimport java.awt.image.BufferedImage;\nimport net.runelite.api.Point;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.ui.overlay.worldmap.WorldMapPoint;\n\nclass DeathWorldMapPoint extends WorldMapPoint\n{\n\tprivate final DeathIndicatorPlugin plugin;\n\tprivate final BufferedImage worldmapHintArrow;\n\tprivate final Point worldmapHintArrowPoint;\n\n\tDeathWorldMapPoint(final WorldPoint worldPoint, final DeathIndicatorPlugin plugin)\n\t{\n\t\tsuper(worldPoint, null);\n\n\t\tworldmapHintArrow \u003d new BufferedImage(plugin.getMapArrow().getWidth(), plugin.getMapArrow().getHeight(), BufferedImage.TYPE_INT_ARGB);\n\t\tGraphics graphics \u003d worldmapHintArrow.getGraphics();\n\t\tgraphics.drawImage(plugin.getMapArrow(), 0, 0, null);\n\t\tgraphics.drawImage(plugin.getBonesImage(), 0, 0, null);\n\t\tworldmapHintArrowPoint \u003d new Point(\n\t\t\tworldmapHintArrow.getWidth() / 2,\n\t\t\tworldmapHintArrow.getHeight());\n\n\t\tthis.plugin \u003d plugin;\n\t\tthis.setSnapToEdge(true);\n\t\tthis.setJumpOnClick(true);\n\t\tthis.setImage(worldmapHintArrow);\n\t\tthis.setImagePoint(worldmapHintArrowPoint);\n\t\tthis.setTooltip(\"Death Location\");\n\t}\n\n\t@Override\n\tpublic void onEdgeSnap()\n\t{\n\t\tthis.setImage(plugin.getBonesImage());\n\t\tthis.setImagePoint(null);\n\t\tthis.setTooltip(null);\n\t}\n\n\t@Override\n\tpublic void onEdgeUnsnap()\n\t{\n\t\tthis.setImage(worldmapHintArrow);\n\t\tthis.setImagePoint(worldmapHintArrowPoint);\n\t\tthis.setTooltip(\"Death Location\");\n\t}\n}\n","filePath":"src\\main\\java\\info\\sigterm\\plugins\\deathindicator\\DeathWorldMapPoint.java"},{"fileName":"ExamplePluginTest.java","content":"package com.example;\n\nimport info.sigterm.plugins.deathindicator.DeathIndicatorPlugin;\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ExamplePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(DeathIndicatorPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\example\\ExamplePluginTest.java"}]},{"commit":"6c791bd09995b928dbd5d2d56a508f4d3f9d1312","repository":"https://github.com/HerbRuns/petreminder.git","internalName":"petreminder","files":[{"fileName":"PetReminderConfig.java","content":"package com.herbruns.petreminder;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"petreminder\")\npublic interface PetReminderConfig extends Config\n{\n    @ConfigItem(\n            keyName \u003d \"deathMessageEnabled\",\n            name \u003d \"Remind of pet loss on death\",\n            description \u003d \"If enabled, sends a chat message when you die\",\n            position \u003d 1\n    )\n    default boolean deathMessageEnabled()\n    {\n        return false;\n    }\n}\n","filePath":"src\\main\\java\\com\\herbruns\\petreminder\\PetReminderConfig.java"},{"fileName":"PetReminderOverlay.java","content":"package com.herbruns.petreminder;\n\nimport net.runelite.api.Client;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.ImageComponent;\nimport net.runelite.client.util.AsyncBufferedImage;\n\nimport javax.inject.Inject;\nimport java.awt.*;\n\npublic class PetReminderOverlay extends OverlayPanel\n{\n    private static final int CAT_ITEM_ID \u003d 1555; // Regular cat icon\n\n    private AsyncBufferedImage petImage;\n    private boolean isPetOut \u003d false;\n\n    //private final Client client;\n    private final ItemManager itemManager;\n\n    @Inject\n    public PetReminderOverlay(/*Client client, */ItemManager itemManager)\n    {\n        //this.client \u003d client;\n        this.itemManager \u003d itemManager;\n\n        petImage \u003d itemManager.getImage(CAT_ITEM_ID, 1, false);\n\n        setPosition(OverlayPosition.TOP_LEFT);\n        setResizable(false);\n        setMovable(true);\n    }\n\n    public void setIsPetOut(boolean petOut)\n    {\n        this.isPetOut \u003d petOut;\n\n        if (petOut)\n        {\n            // Always fetch the cat icon for display if we do not have it already\n            if (petImage \u003d\u003d null) {\n                petImage \u003d itemManager.getImage(CAT_ITEM_ID, 1, false);\n            }\n        }\n        else\n        {\n            petImage \u003d null;\n        }\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics)\n    {\n        panelComponent.getChildren().clear();\n\n        if (!isPetOut || petImage \u003d\u003d null)\n        {\n            return null; // nothing to draw\n        }\n\n        panelComponent.getChildren().add(new ImageComponent(petImage));\n        return super.render(graphics);\n    }\n}\n","filePath":"src\\main\\java\\com\\herbruns\\petreminder\\PetReminderOverlay.java"},{"fileName":"PetReminderPlugin.java","content":"package com.herbruns.petreminder;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.ActorDeath;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\n@Slf4j\n@PluginDescriptor(\n        name \u003d \"Pet Reminder\",\n        description \u003d \"Shows an overlay when you have a pet out\",\n        tags \u003d {\"pet\", \"reminder\", \"overlay\"}\n)\npublic class PetReminderPlugin extends Plugin\n{\n    @Inject\n    private Client client;\n\n    @Inject\n    private PetReminderConfig config;\n\n    @Inject\n    private OverlayManager overlayManager;\n\n    @Inject\n    private PetReminderOverlay overlay;\n\n    private boolean isPetOut \u003d false;\n    private boolean playerDidDie \u003d false;\n\n    private final int FOLLOWER_VARBIT \u003d 447;\n\n    @Override\n    protected void startUp() throws Exception\n    {\n        overlayManager.add(overlay);\n    }\n\n    @Override\n    protected void shutDown() throws Exception\n    {\n        overlayManager.remove(overlay);\n    }\n\n    @Subscribe\n    public void onGameTick(GameTick tick)\n    {\n        // PATCH:\n        // rewritten to use VarPlayer value instead to track pet disappearing but still following\n        // i.e going in and out of ToA, for example\n        int followerNpcId \u003d client.getVarpValue(FOLLOWER_VARBIT);\n        boolean overlayCache \u003d isPetOut;\n\n        // You have a pet following\n        isPetOut \u003d followerNpcId !\u003d -1;\n\n        // if we are not the same state as last tick, change the overlay\n        if (overlayCache !\u003d isPetOut) {\n            overlay.setIsPetOut(isPetOut);\n        }\n    }\n\n    @Subscribe\n    public void onActorDeath(ActorDeath event)\n    {\n        Actor actor \u003d event.getActor();\n        if (!(actor instanceof Player)) {\n            return;\n        }\n\n        if (event.getActor() \u003d\u003d client.getLocalPlayer())\n        {\n            playerDidDie \u003d true;\n        }\n    }\n\n    @Subscribe\n    public void onGameStateChanged(GameStateChanged event)\n    {\n        if (event.getGameState() \u003d\u003d GameState.LOGGED_IN \u0026\u0026 playerDidDie)\n        {\n            int followerNpcId \u003d client.getVarpValue(FOLLOWER_VARBIT);\n            if (followerNpcId \u003d\u003d -1 \u0026\u0026 isPetOut)\n            {\n                if (config.deathMessageEnabled())\n                {\n                    String chatMsg \u003d \"Noooo, you forgot about your pet :(\";\n                    client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", chatMsg, null);\n                }\n\n                // force overwrite the var and overlay as death will guarantee loss\n                // next tick will then start to monitor again for us automatically\n                isPetOut \u003d false;\n                overlay.setIsPetOut(isPetOut);\n            }\n            playerDidDie \u003d false;\n        }\n    }\n\n    @Provides\n    PetReminderConfig provideConfig(ConfigManager configManager)\n    {\n        return configManager.getConfig(PetReminderConfig.class);\n    }\n}\n","filePath":"src\\main\\java\\com\\herbruns\\petreminder\\PetReminderPlugin.java"},{"fileName":"PetReminderPluginTest.java","content":"package com.herbruns.petreminder;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class PetReminderPluginTest\n{\n    public static void main(String[] args) throws Exception\n    {\n        ExternalPluginManager.loadBuiltin(PetReminderPlugin.class);\n        RuneLite.main(args);\n    }\n}","filePath":"src\\test\\java\\com\\herbruns\\petreminder\\PetReminderPluginTest.java"}]},{"commit":"5f4061692111af1d0a0d00d784ed285de602253c","repository":"https://github.com/while-loop/runelite-plugins.git","internalName":"runewatch","files":[{"fileName":"Case.java","content":"package com.runewatch;\n\nimport com.google.gson.annotations.SerializedName;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\n\nimport java.time.ZoneId;\nimport java.time.format.DateTimeFormatter;\nimport java.util.Date;\n\n@Data\n@AllArgsConstructor\npublic class Case {\n    private static final DateTimeFormatter DATE_FORMAT \u003d DateTimeFormatter.ofPattern(\"MMM d, yyyy\");\n\n    // \"Zezima\"\n    @SerializedName(\"accused_rsn\")\n    private String rsn;\n\n    // \"2019-03-10 13:35:34\" GMT\n    @SerializedName(\"published_date\")\n    private Date date;\n\n    // \"a0a6200\"\n    @SerializedName(\"short_code\")\n    private String code;\n\n    // \"Accused Of Stealing Borrowed Items\"\n    private String reason;\n\n    // \"4\"\n    @SerializedName(\"evidence_rating\")\n    private String rating;\n\n    // \"RW\" / \"WDR\" / null\n    @SerializedName(\"source\")\n    private String source;\n\n    public String niceDate() {\n        return date.toInstant().atZone(ZoneId.systemDefault()).toLocalDate().format(DATE_FORMAT);\n    }\n\n    public String getSource(){\n        return (source \u003d\u003d null) ? \"RW\" : source;\n    }\n\n    public boolean isRW(){\n        return !getSource().toLowerCase().equals(\"wdr\");\n    }\n\n    public String niceSourcePossessive() {\n        switch (getSource().toLowerCase()) {\n            case \"rw\": return \"RuneWatch\u0027s\";\n            case \"wdr\": return \"We Do Raids\u0027\";\n            default: return \"Unknown\u0027s\";\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\runewatch\\Case.java"},{"fileName":"CaseManager.java","content":"package com.runewatch;\n\nimport com.google.gson.*;\nimport com.google.gson.reflect.TypeToken;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.annotations.VisibleForDevtools;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.util.Text;\nimport okhttp3.*;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.lang.reflect.Type;\nimport java.text.DateFormat;\nimport java.text.ParseException;\nimport java.text.SimpleDateFormat;\nimport java.time.Instant;\nimport java.util.Comparator;\nimport java.util.Date;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.concurrent.ConcurrentHashMap;\nimport java.util.function.Consumer;\n\n@Slf4j\n@Singleton\npublic class CaseManager {\n    private static final HttpUrl RUNEWATCH_LIST_URL \u003d HttpUrl.parse(\"https://raw.githubusercontent.com/while-loop/runelite-plugins/runewatch-updater/mixedlist.json\");\n\n    private static final DateFormat df \u003d new SimpleDateFormat(\"yyyy-MM-dd hh:mm:ss\");\n    private static final Type typeToken \u003d new TypeToken\u003cList\u003cCase\u003e\u003e() {\n    }.getType();\n\n    private final OkHttpClient client;\n    private final Gson gson;\n    private final Map\u003cString, Case\u003e rwCases \u003d new ConcurrentHashMap\u003c\u003e();\n    private final Map\u003cString, Case\u003e wdrCases \u003d new ConcurrentHashMap\u003c\u003e();\n    private final ClientThread clientThread;\n    private final RuneWatchConfig config;\n\n    @Inject\n    private CaseManager(OkHttpClient client, ClientThread clientThread, RuneWatchConfig config, Gson gson) {\n        this.client \u003d client;\n        this.clientThread \u003d clientThread;\n        this.config \u003d config;\n        this.gson \u003d gson.newBuilder().registerTypeAdapter(Date.class, (JsonDeserializer\u003cDate\u003e) (json, typeOfT, context) -\u003e {\n            try {\n                // Allow handling of the occasional empty string as a date.\n                return df.parse(json.getAsString());\n            } catch (ParseException e) {\n                return Date.from(Instant.ofEpochSecond(0));\n            }\n        }).create();;\n    }\n\n    /**\n     * @param onComplete called once the list has been refreshed. Called on the client thread\n     */\n    public void refresh(Runnable onComplete) {\n        Request rwReq \u003d new Request.Builder().url(RUNEWATCH_LIST_URL).build();\n\n        // call on background thread\n        client.newCall(rwReq).enqueue(new Callback() {\n            @Override\n            public void onFailure(Call call, IOException e) {\n                log.error(\"failed to get runewatch list: {}\", e.toString());\n            }\n\n            @Override\n            public void onResponse(Call call, Response response) {\n                try {\n                    if (response.code() \u003c 200 || response.code() \u003e\u003d 400) {\n                        log.error(\"failed to get watchlist. status: {}\", response.code());\n                    } else {\n                        List\u003cCase\u003e cases \u003d gson.fromJson(new InputStreamReader(response.body().byteStream()), typeToken);\n                        rwCases.clear();\n                        wdrCases.clear();\n                        for (Case c : cases) {\n                            String rsn \u003d c.getRsn().toLowerCase();\n                            Map\u003cString, Case\u003e sourceCases \u003d (c.getSource().toLowerCase().equals(\"wdr\")) ? wdrCases : rwCases;\n\n                            Case old \u003d sourceCases.get(rsn);\n                            // keep the newest case\n                            if (old \u003d\u003d null || old.getDate().before(c.getDate())) {\n                                sourceCases.put(rsn, c);\n                            }\n                        }\n                        log.debug(\"saved {}/{} rw cases\", rwCases.size(), cases.size());\n                        log.debug(\"saved {}/{} wdr cases\", wdrCases.size(), cases.size());\n                    }\n                } finally {\n                    response.close();\n                    if (onComplete !\u003d null) {\n                        clientThread.invokeLater(onComplete);\n                    }\n                }\n\n            }\n        });\n    }\n\n    /**\n     * Get a RuneWatch case from the cached list\n     *\n     * @param rsn\n     * @return\n     */\n    public Case get(String rsn) {\n        String cleanRsn \u003d Text.removeTags(Text.toJagexName(rsn)).toLowerCase();\n        if (config.useRW()) {\n            Case c \u003d rwCases.get(cleanRsn);\n            if (c !\u003d null) {\n                return c;\n            }\n        }\n\n        if (config.useWDR()) {\n            Case c \u003d wdrCases.get(cleanRsn);\n            if (c !\u003d null) {\n                return c;\n            }\n        }\n\n        return null;\n    }\n\n    /**\n     * Lookup a non-cached RuneWatch case.\n     *\n     * @param rsn\n     * @param onComplete function returning the Case (mullable) if found. Called on the client thread\n     * @return\n     */\n    public void get(String rsn, Consumer\u003cCase\u003e onComplete) {\n        refresh(() -\u003e onComplete.accept(get(rsn)));\n    }\n\n    @VisibleForDevtools\n    void put(String rsn, String source) {\n        if (source.toLowerCase().equals(\"rw\")) {\n            rwCases.put(rsn.toLowerCase(), new Case(rsn, new Date(), \"aaa\", \"debugging\", \"3\", source));\n        } else {\n            wdrCases.put(rsn.toLowerCase(), new Case(rsn, new Date(), \"aaa\", \"debugging\", \"3\", source));\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\runewatch\\CaseManager.java"},{"fileName":"RuneWatchConfig.java","content":"package com.runewatch;\n\nimport net.runelite.client.config.*;\nimport net.runelite.client.util.ImageUploadStyle;\n\nimport java.awt.*;\n\n@ConfigGroup(RuneWatchConfig.CONFIG_GROUP)\npublic interface RuneWatchConfig extends Config {\n    String CONFIG_GROUP \u003d \"runewatch\";\n    String PLAYER_OPTION \u003d \"playerOption\";\n    String PLAYER_TEXT_COLOR \u003d \"playerTextColor\";\n\n    @ConfigSection(\n            name \u003d \"Screenshot\",\n            description \u003d \"All the options for screenshot behavior\",\n            position \u003d 80\n    )\n    String SCREENSHOT_SECTION \u003d \"Screenshot\";\n\n    @ConfigItem(\n            position \u003d 1,\n            keyName \u003d \"screenshotTrades\",\n            name \u003d \"Screenshot Trades\",\n            description \u003d \"Enable screenshots on accepted trades\",\n            section \u003d SCREENSHOT_SECTION\n    )\n    default boolean screenshotTrades() {\n        return true;\n    }\n\n    @ConfigItem(\n            position \u003d 2,\n            keyName \u003d \"notifyWhenScreenshotTaken\",\n            name \u003d \"Notify When Taken\",\n            description \u003d \"Configures whether or not you are notified when a screenshot has been taken\",\n            section \u003d SCREENSHOT_SECTION\n    )\n    default boolean notifyWhenScreenshotTaken() {\n        return true;\n    }\n\n    @ConfigItem(\n            position \u003d 2,\n            keyName \u003d \"screenshotToClipboard\",\n            name \u003d \"Upload\",\n            description \u003d \"Configures whether or not screenshots are placed on your clipboard\",\n            section \u003d SCREENSHOT_SECTION\n    )\n    default boolean screenshotToClipboard() {\n        return false;\n    }\n\n    @ConfigSection(\n            name \u003d \"Menu\",\n            description \u003d \"All the options for menu behavior\",\n            position \u003d 99\n    )\n    String MENU_SECTION \u003d \"Menu\";\n\n    @ConfigItem(\n            position \u003d 3,\n            keyName \u003d PLAYER_OPTION,\n            name \u003d \"Player option\",\n            description \u003d \"Add investigate option to players\",\n            section \u003d MENU_SECTION\n    )\n    default boolean playerOption() {\n        return true;\n    }\n\n    @ConfigItem(\n            position \u003d 4,\n            keyName \u003d \"menuOption\",\n            name \u003d \"Menu option\",\n            description \u003d \"Show investigate option in menus\",\n            section \u003d MENU_SECTION\n    )\n    default boolean menuOption() {\n        return true;\n    }\n\n    @ConfigItem(\n            position \u003d 5,\n            keyName \u003d \"useHotkey\",\n            name \u003d \"Require Shift-Click\",\n            description \u003d \"Require Shift-Right-Click to view investigate option in menus\",\n            section \u003d MENU_SECTION\n    )\n    default boolean useHotkey() {\n        return false;\n    }\n\n    @ConfigItem(\n            position \u003d 6,\n            keyName \u003d PLAYER_TEXT_COLOR,\n            name \u003d \"Highlight color\",\n            description \u003d \"Allows you to change the color of the reported player\u0027s rsn in most player lists\"\n    )\n    default Color playerTextColor() {\n        return new Color(255, 77, 0);\n    }\n\n    @ConfigSection(\n            name \u003d \"Notifications\",\n            description \u003d \"All the notification options\",\n            position \u003d 70\n    )\n    String NOTIFICATIONS_SECTION \u003d \"Notifications\";\n\n    @ConfigItem(\n            position \u003d 7,\n            keyName \u003d \"notifyOnJoin\",\n            name \u003d \"Alert On Join\",\n            description \u003d \"Send an alert message when a player on the watchlist enters a Clan/Friends Chat\",\n            section \u003d NOTIFICATIONS_SECTION\n    )\n    default boolean notifyOnJoin() {\n        return true;\n    }\n\n    @ConfigItem(\n            position \u003d 8,\n            keyName \u003d \"notifyOnNearby\",\n            name \u003d \"Alert On Nearby\",\n            description \u003d \"Send an alert message when you\u0027re nearby a player on the watch list\",\n            section \u003d NOTIFICATIONS_SECTION\n    )\n    default boolean notifyOnNearby() {\n        return true;\n    }\n\n    @ConfigItem(\n            position \u003d 9,\n            keyName \u003d \"notificationCooldown\",\n            name \u003d \"Cooldown\",\n            description \u003d \"How many minutes should pass before re-alerting when a player is on a watch list (0 always notifies)\",\n            section \u003d NOTIFICATIONS_SECTION\n    )\n    @Units(Units.MINUTES)\n    default int notificationCooldown()\n    {\n        return 60;\n    }\n\n    @ConfigSection(\n            name \u003d \"Sources\",\n            description \u003d \"Configure sources for investigating reported players\",\n            position \u003d 50\n    )\n    String SOURCES_SECTION \u003d \"Sources\";\n\n    @ConfigItem(\n            position \u003d 9,\n            keyName \u003d \"useRW\",\n            name \u003d \"Use RuneWatch\",\n            description \u003d \"Check for reported players against the RuneWatch watchlist\",\n            section \u003d SOURCES_SECTION\n    )\n    default boolean useRW() {\n        return true;\n    }\n\n    @ConfigItem(\n            position \u003d 10,\n            keyName \u003d \"useWDR\",\n            name \u003d \"Use We Do Raids\",\n            description \u003d \"Check for reported players against the We Do Raids banlist\",\n            section \u003d SOURCES_SECTION\n    )\n    default boolean useWDR() {\n        return true;\n    }\n}\n","filePath":"src\\main\\java\\com\\runewatch\\RuneWatchConfig.java"},{"fileName":"RuneWatchInputListener.java","content":"/*\n * Copyright (c) 2018, TheLonelyDev \u003chttps://github.com/TheLonelyDev\u003e\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.runewatch;\n\nimport net.runelite.client.input.KeyListener;\n\nimport javax.inject.Inject;\nimport java.awt.event.KeyEvent;\n\npublic class RuneWatchInputListener implements KeyListener {\n    private static final int HOTKEY \u003d KeyEvent.VK_SHIFT;\n\n    private final RuneWatchPlugin plugin;\n\n    @Inject\n    private RuneWatchInputListener(RuneWatchPlugin plugin) {\n        this.plugin \u003d plugin;\n    }\n\n    @Override\n    public void keyTyped(KeyEvent e) {\n\n    }\n\n    @Override\n    public void keyPressed(KeyEvent e) {\n        if (e.getKeyCode() \u003d\u003d HOTKEY) {\n            plugin.setHotKeyPressed(true);\n        }\n    }\n\n    @Override\n    public void keyReleased(KeyEvent e) {\n        if (e.getKeyCode() \u003d\u003d HOTKEY) {\n            plugin.setHotKeyPressed(false);\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\runewatch\\RuneWatchInputListener.java"},{"fileName":"RuneWatchOverlay.java","content":"/*\n * Copyright (c) 2018, Lotto \u003chttps://github.com/devLotto\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *   list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *   this list of conditions and the following disclaimer in the documentation\n *   and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.runewatch;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.MainBufferProvider;\nimport net.runelite.client.ui.DrawManager;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\n\nimport javax.inject.Inject;\nimport java.awt.*;\nimport java.awt.image.BufferedImage;\nimport java.text.DateFormat;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\nimport java.util.Queue;\nimport java.util.concurrent.ConcurrentLinkedQueue;\nimport java.util.function.Consumer;\n\nclass RuneWatchOverlay extends Overlay {\n    private static final DateFormat DATE_FORMAT \u003d new SimpleDateFormat(\"MMM. dd, yyyy\");\n    private static final int REPORT_BUTTON_X_OFFSET \u003d 404;\n\n    private final Client client;\n    private final DrawManager drawManager;\n    private final RuneWatchPlugin plugin;\n\n    private final Queue\u003cConsumer\u003cImage\u003e\u003e consumers \u003d new ConcurrentLinkedQueue\u003c\u003e();\n\n    @Inject\n    private RuneWatchOverlay(Client client, DrawManager drawManager, RuneWatchPlugin plugin) {\n        setPosition(OverlayPosition.DYNAMIC);\n        setPriority(OverlayPriority.HIGH);\n        setLayer(OverlayLayer.ABOVE_WIDGETS);\n        this.client \u003d client;\n        this.drawManager \u003d drawManager;\n        this.plugin \u003d plugin;\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        if (consumers.isEmpty()) {\n            return null;\n        }\n\n        final MainBufferProvider bufferProvider \u003d (MainBufferProvider) client.getBufferProvider();\n        final int imageHeight \u003d ((BufferedImage) bufferProvider.getImage()).getHeight();\n        final int y \u003d imageHeight - plugin.getReportButton().getHeight() - 1;\n\n        graphics.drawImage(plugin.getReportButton(), REPORT_BUTTON_X_OFFSET, y, null);\n\n        graphics.setFont(FontManager.getRunescapeSmallFont());\n        FontMetrics fontMetrics \u003d graphics.getFontMetrics();\n\n        String date \u003d DATE_FORMAT.format(new Date());\n        final int dateWidth \u003d fontMetrics.stringWidth(date);\n        final int dateHeight \u003d fontMetrics.getHeight();\n\n        final int textX \u003d REPORT_BUTTON_X_OFFSET + plugin.getReportButton().getWidth() / 2 - dateWidth / 2;\n        final int textY \u003d y + plugin.getReportButton().getHeight() / 2 + dateHeight / 2;\n\n        graphics.setColor(Color.BLACK);\n        graphics.drawString(date, textX + 1, textY + 1);\n\n        graphics.setColor(Color.WHITE);\n        graphics.drawString(date, textX, textY);\n\n        // Request the queued screenshots to be taken,\n        // now that the timestamp is visible.\n        Consumer\u003cImage\u003e consumer;\n        while ((consumer \u003d consumers.poll()) !\u003d null) {\n            drawManager.requestNextFrameListener(consumer);\n        }\n\n        return null;\n    }\n\n    void queueForTimestamp(Consumer\u003cImage\u003e screenshotConsumer) {\n        if (plugin.getReportButton() \u003d\u003d null) {\n            return;\n        }\n\n        consumers.add(screenshotConsumer);\n    }\n}\n","filePath":"src\\main\\java\\com\\runewatch\\RuneWatchOverlay.java"},{"fileName":"RuneWatchPlugin.java","content":"package com.runewatch;\n\nimport com.google.common.collect.ImmutableList;\nimport com.google.inject.Provides;\nimport joptsimple.internal.Strings;\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport lombok.Setter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.*;\nimport net.runelite.api.widgets.ComponentID;\nimport net.runelite.api.widgets.InterfaceID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.chat.ChatColorType;\nimport net.runelite.client.chat.ChatMessageBuilder;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.chat.QueuedMessage;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.game.SpriteManager;\nimport net.runelite.client.input.KeyManager;\nimport net.runelite.client.menus.MenuManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.task.Schedule;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.ImageCapture;\nimport net.runelite.client.util.Text;\n\nimport javax.inject.Inject;\nimport javax.inject.Named;\nimport java.awt.*;\nimport java.awt.image.BufferedImage;\nimport java.time.Instant;\nimport java.time.temporal.ChronoUnit;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.concurrent.ConcurrentHashMap;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\n@Slf4j\n@PluginDescriptor(name \u003d \"RuneWatch\")\npublic class RuneWatchPlugin extends Plugin {\n    private static final String INVESTIGATE \u003d \"Investigate\";\n    private static final String FOLDER_NAME \u003d \"Trades\";\n\n    private static final String NBSP \u003d Character.toString((char) 160);\n\n    private static final String ACCEPTED_TRADE_MSG \u003d \"Accepted trade.\";\n    private static final String DECLINED_TRADE_MSG \u003d \"Other player declined trade.\";\n    private static final String DECLINE_MSG \u003d \"Decline\";\n\n    private static final Pattern TRADING_WITH_PATTERN \u003d Pattern.compile(\"Trading [W|w]ith:(\u003cbr\u003e|\\\\s)(.*)\");\n\n    private static final int PLAYER_TRADE_OFFER_GROUP_ID \u003d 335;\n    private static final int PLAYER_TRADE_OFFER_TRADING_WITH \u003d 31;\n    private static final int PLAYER_TRADE_OFFER_TRADE_MODIFIED_ME \u003d 26;\n    private static final int PLAYER_TRADE_OFFER_TRADE_MODIFIED_THEM \u003d 29;\n\n    private static final int PLAYER_TRADE_CONFIRMATION_GROUP_ID \u003d 334;\n    private static final int PLAYER_TRADE_CONFIRMATION_TRADING_WITH \u003d 30;\n    private static final int PLAYER_TRADE_CONFIRMATION_TRADE_MODIFIED_THEM \u003d 31;\n\n    private static final int COX_PARTY_LIST_GROUP_ID \u003d 499;\n    private static final int TOB_PARTY_LIST_GROUP_ID \u003d 364;\n    private static final int COX_PARTY_DETAILS_GROUP_ID \u003d 507;\n    private static final int TOB_PARTY_DETAILS_GROUP_ID \u003d 50;\n\n    // https://raw.githubusercontent.com/RuneStar/cache-names/master/names.tsv\n    private static final int SCRIPT_ID_TOB_HUD_DRAW \u003d 2297;\n    private static final int SCRIPT_ID_RAIDS_SIDEPANEL_ENTRY_SETUP \u003d 1550;\n\n    private static final List\u003cInteger\u003e TRADE_SCREEN_GROUP_IDS \u003d Arrays.asList(\n            PLAYER_TRADE_OFFER_GROUP_ID,\n            PLAYER_TRADE_CONFIRMATION_GROUP_ID\n    );\n\n    private static final List\u003cInteger\u003e MENU_WIDGET_IDS \u003d ImmutableList.of(\n            InterfaceID.FRIEND_LIST,\n            InterfaceID.IGNORE_LIST,\n\n            ComponentID.CHATBOX_FRAME,\n            InterfaceID.FRIENDS_CHAT,\n            InterfaceID.PRIVATE_CHAT,\n\n            InterfaceID.RAIDING_PARTY,\n            COX_PARTY_DETAILS_GROUP_ID,\n            TOB_PARTY_DETAILS_GROUP_ID,\n\n            ComponentID.CLAN_MEMBERS,\n            ComponentID.CLAN_GUEST_MEMBERS\n    );\n\n    private static final ImmutableList\u003cString\u003e AFTER_OPTIONS \u003d ImmutableList.of(\n            \"Message\", \"Add ignore\", \"Remove friend\", \"Delete\", \"Kick\", \"Reject\"\n    );\n\n    private enum AlertType {\n        NONE(\"\"),\n        FRIENDS_CHAT(\"Friends chat member, \"),\n        CLAN_CHAT(\"Clan chat member, \"),\n        NEARBY(\"Nearby player, \");\n\n        private final String message;\n\n        AlertType(String message) {\n            this.message \u003d message;\n        }\n\n        public String getMessage() {\n            return message;\n        }\n    }\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private RuneWatchConfig config;\n\n    @Inject\n    private ChatMessageManager chatMessageManager;\n\n    @Inject\n    private MenuManager menuManager;\n\n    @Inject\n    private ImageCapture imageCapture;\n\n    @Inject\n    private ScheduledExecutorService executor;\n\n    @Inject\n    private RuneWatchOverlay screenshotOverlay;\n\n    @Getter(AccessLevel.PACKAGE)\n    private BufferedImage reportButton;\n\n    @Inject\n    private SpriteManager spriteManager;\n\n    @Inject\n    private OverlayManager overlayManager;\n\n    @Inject\n    CaseManager caseManager;\n\n    @Inject\n    ClientThread clientThread;\n\n    @Inject\n    @Named(\"developerMode\")\n    boolean developerMode;\n\n    @Inject\n    RuneWatchInputListener hotkeyListener;\n\n    @Inject\n    KeyManager keyManager;\n\n    @Getter(AccessLevel.PACKAGE)\n    @Setter(AccessLevel.PACKAGE)\n    private boolean hotKeyPressed;\n\n    private Image tradeImage;\n    private String trader;\n\n    private static Map\u003cString, Instant\u003e lastNotified \u003d new ConcurrentHashMap\u003c\u003e();\n\n    @Provides\n    RuneWatchConfig provideConfig(ConfigManager configManager) {\n        return configManager.getConfig(RuneWatchConfig.class);\n    }\n\n    @Override\n    protected void startUp() {\n        if (config.playerOption() \u0026\u0026 client !\u003d null) {\n            menuManager.addPlayerMenuItem(INVESTIGATE);\n        }\n\n        keyManager.registerKeyListener(hotkeyListener);\n        spriteManager.getSpriteAsync(SpriteID.CHATBOX_REPORT_BUTTON, 0, s -\u003e reportButton \u003d s);\n        overlayManager.add(screenshotOverlay);\n        caseManager.refresh(this::colorAll);\n    }\n\n    @Override\n    protected void shutDown() {\n        if (config.playerOption() \u0026\u0026 client !\u003d null) {\n            menuManager.removePlayerMenuItem(INVESTIGATE);\n        }\n        keyManager.unregisterKeyListener(hotkeyListener);\n        overlayManager.remove(screenshotOverlay);\n    }\n\n    @Subscribe\n    public void onConfigChanged(ConfigChanged event) {\n        if (!event.getGroup().equals(RuneWatchConfig.CONFIG_GROUP)) {\n            return;\n        }\n\n        if (event.getKey().equals(RuneWatchConfig.PLAYER_OPTION)) {\n            if (!Boolean.parseBoolean(event.getOldValue()) \u0026\u0026 Boolean.parseBoolean(event.getNewValue())) {\n                menuManager.addPlayerMenuItem(INVESTIGATE);\n            } else if (Boolean.parseBoolean(event.getOldValue()) \u0026\u0026 !Boolean.parseBoolean(event.getNewValue())) {\n                menuManager.removePlayerMenuItem(INVESTIGATE);\n            }\n        } else if (event.getKey().equals(RuneWatchConfig.PLAYER_TEXT_COLOR)) {\n            colorAll();\n        }\n    }\n\n    @Subscribe\n    public void onFocusChanged(FocusChanged focusChanged) {\n        if (!focusChanged.isFocused()) {\n            hotKeyPressed \u003d false;\n        }\n    }\n\n    private void colorAll() {\n        clientThread.invokeLater(() -\u003e {\n            colorFriendsChat();\n            colorClanChat();\n            colorGuestClanChat();\n\n            colorRaidsSidePanel();\n            colorRaidsPartyList();\n            colorRaidsParty();\n\n            colorTobHud();\n            colorTobParty();\n            colorTobPartyList();\n        });\n    }\n\n    @Subscribe\n    public void onPlayerSpawned(PlayerSpawned playerSpawned) {\n        if (!config.notifyOnNearby()) {\n            return;\n        }\n        String name \u003d playerSpawned.getPlayer().getName();\n        this.alertPlayerWarning(name, false, AlertType.NEARBY);\n    }\n\n    @Subscribe\n    public void onMenuEntryAdded(MenuEntryAdded event) {\n        if (!config.menuOption() || (!hotKeyPressed \u0026\u0026 config.useHotkey())) {\n            return;\n        }\n\n        int groupId \u003d RuneWatchPlugin.TO_GROUP(event.getActionParam1());\n        String option \u003d event.getOption();\n\n        if (!MENU_WIDGET_IDS.contains(groupId) || !AFTER_OPTIONS.contains(option)) {\n            return;\n        }\n\n        for (MenuEntry me : client.getMenuEntries()) {\n            // don\u0027t add menu option if we\u0027ve already added investigate\n            if (INVESTIGATE.equals(me.getOption())) {\n                return;\n            }\n        }\n\n\n        client.createMenuEntry(-1)\n                .setOption(INVESTIGATE)\n                .setTarget(event.getTarget())\n                .setType(MenuAction.RUNELITE)\n                .setParam0(event.getActionParam0())\n                .setParam1(event.getActionParam1())\n                .setIdentifier(event.getIdentifier());\n    }\n\n    @Subscribe\n    public void onScriptPostFired(ScriptPostFired event) {\n        Runnable color \u003d null;\n        switch (event.getScriptId()) {\n            case ScriptID.FRIENDS_CHAT_CHANNEL_REBUILD:\n                color \u003d this::colorFriendsChat;\n                break;\n            case SCRIPT_ID_TOB_HUD_DRAW:\n                color \u003d this::colorTobHud;\n                break;\n            case SCRIPT_ID_RAIDS_SIDEPANEL_ENTRY_SETUP:\n                color \u003d this::colorRaidsSidePanel;\n                break;\n        }\n\n        if (color !\u003d null) {\n            clientThread.invokeLater(color);\n        }\n    }\n\n    @Subscribe\n    public void onGameTick(GameTick event) {\n        // check trade screens on tick. When a player removes/adds items, the warning message gets recreated\n        for (int gid : TRADE_SCREEN_GROUP_IDS) {\n            Widget w \u003d client.getWidget(gid, 0);\n            if (w !\u003d null) {\n                showTradeWarning(gid);\n            }\n        }\n    }\n\n    @Subscribe\n    public void onFriendsChatMemberJoined(FriendsChatMemberJoined event) {\n        if (!config.notifyOnJoin()) {\n            return;\n        }\n        String rsn \u003d Text.toJagexName(event.getMember().getName());\n        String local \u003d client.getLocalPlayer().getName();\n        if (rsn.equals(local)) {\n            return;\n        }\n\n        alertPlayerWarning(rsn, false, AlertType.FRIENDS_CHAT);\n    }\n\n    @Subscribe\n    public void onClanMemberJoined(ClanMemberJoined event) {\n        if (!config.notifyOnJoin()) {\n            return;\n        }\n        String rsn \u003d Text.toJagexName(event.getClanMember().getName());\n        String local \u003d client.getLocalPlayer().getName();\n        if (rsn.equals(local)) {\n            return;\n        }\n\n        alertPlayerWarning(rsn, false, AlertType.CLAN_CHAT);\n    }\n\n    @Subscribe\n    public void onMenuOptionClicked(MenuOptionClicked event) {\n        int groupId \u003d RuneWatchPlugin.TO_GROUP(event.getParam1());\n        String option \u003d event.getMenuOption();\n        MenuAction action \u003d event.getMenuAction();\n\n        if (TRADE_SCREEN_GROUP_IDS.contains(groupId)) {\n            if (option.equals(DECLINE_MSG)) {\n                clearScreenshot();\n            }\n        }\n\n        // https://github.com/runelite/runelite/blob/f6c68eefc8a3c5415451bdbd6190b1f745ed5489/runelite-client/src/main/java/net/runelite/client/plugins/hiscore/HiscorePlugin.java#L178\n        if ((action \u003d\u003d MenuAction.RUNELITE || action \u003d\u003d MenuAction.RUNELITE_PLAYER) \u0026\u0026 option.equals(INVESTIGATE)) {\n            final String target;\n            if (action \u003d\u003d MenuAction.RUNELITE_PLAYER) {\n                // The player id is included in the event, so we can use that to get the player name,\n                // which avoids having to parse out the combat level and any icons preceding the name.\n                Player player \u003d client.getTopLevelWorldView().players().byIndex(event.getId());\n                if (player !\u003d null) {\n                    target \u003d player.getName();\n                } else {\n                    target \u003d null;\n                }\n            } else {\n                target \u003d Text.removeTags(event.getMenuTarget());\n            }\n\n            if (target !\u003d null) {\n                caseManager.get(event.getMenuTarget(), (rwCase) -\u003e alertPlayerWarning(target, true, AlertType.NONE));\n            }\n        }\n    }\n\n    @Subscribe\n    public void onWidgetLoaded(final WidgetLoaded event) {\n        int groupId \u003d event.getGroupId();\n        Runnable task \u003d null;\n        switch (groupId) {\n            case PLAYER_TRADE_CONFIRMATION_GROUP_ID:\n                task \u003d this::takeScreenshot;\n                break;\n            case COX_PARTY_LIST_GROUP_ID:\n                task \u003d this::colorRaidsPartyList;\n                break;\n            case COX_PARTY_DETAILS_GROUP_ID:\n                task \u003d this::colorRaidsParty;\n                break;\n            case TOB_PARTY_DETAILS_GROUP_ID:\n                task \u003d this::colorTobParty;\n                break;\n            case TOB_PARTY_LIST_GROUP_ID:\n                task \u003d this::colorTobPartyList;\n                break;\n        }\n\n        if (task !\u003d null) {\n            clientThread.invokeLater(task);\n        }\n    }\n\n    @Subscribe\n    public void onChatMessage(ChatMessage event) {\n\n        ChatMessageType chatType \u003d event.getType();\n        if (chatType \u003d\u003d ChatMessageType.TRADE) {\n            String msg \u003d event.getMessage();\n            switch (msg) {\n                case ACCEPTED_TRADE_MSG:\n                    saveScreenshot();\n                    break;\n                case DECLINED_TRADE_MSG:\n                    clearScreenshot();\n            }\n        }\n    }\n\n    @Schedule(period \u003d 15, unit \u003d ChronoUnit.MINUTES)\n    public void refreshList() {\n        caseManager.refresh(this::colorAll);\n    }\n\n    @Subscribe\n    public void onCommandExecuted(CommandExecuted ce) {\n        // ::rwd rw \u003cusername\u003e\n        if (developerMode \u0026\u0026 ce.getCommand().equals(\"rwd\")) {\n            caseManager.refresh(() -\u003e {\n                if (ce.getArguments().length \u003e 0) {\n                    // refresh is async, so wait a bit before adding the test rsn\n                    caseManager.put(\n                            String.join(\" \", Arrays.copyOfRange(ce.getArguments(), 1, ce.getArguments().length)),\n                            ce.getArguments()[0].toUpperCase()\n                    );\n                }\n                colorAll();\n            });\n        } else if (ce.getCommand().equals(\"rw\")) {\n            final String rsn \u003d String.join(\" \", ce.getArguments());\n            caseManager.get(rsn, (c) -\u003e alertPlayerWarning(rsn, true, AlertType.NONE));\n        }\n    }\n\n    private void clearScreenshot() {\n        tradeImage \u003d null;\n        trader \u003d null;\n    }\n\n    private void takeScreenshot() {\n        screenshotOverlay.queueForTimestamp(image -\u003e {\n            Widget nameWidget \u003d client.getWidget(PLAYER_TRADE_CONFIRMATION_GROUP_ID, PLAYER_TRADE_CONFIRMATION_TRADING_WITH);\n            trader \u003d \"unknown\";\n            if (nameWidget !\u003d null) {\n                Matcher m \u003d TRADING_WITH_PATTERN.matcher(nameWidget.getText());\n                if (m.matches()) {\n                    trader \u003d m.group(2);\n                }\n            }\n\n            tradeImage \u003d image;\n        });\n    }\n\n    private void saveScreenshot() {\n        String otherRsn \u003d trader;\n        Image image \u003d tradeImage;\n\n        // Draw the game onto the screenshot off of the game thread\n        if (config.screenshotTrades()) {\n            executor.submit(() -\u003e {\n                BufferedImage screenshot \u003d new BufferedImage(image.getWidth(null), image.getHeight(null), BufferedImage.TYPE_INT_ARGB);\n                Graphics graphics \u003d screenshot.getGraphics();\n                int gameOffsetX \u003d 0;\n                int gameOffsetY \u003d 0;\n\n                graphics.drawImage(image, gameOffsetX, gameOffsetY, null);\n                imageCapture.saveScreenshot(screenshot, otherRsn, FOLDER_NAME, config.notifyWhenScreenshotTaken(), config.screenshotToClipboard());\n            });\n        } else {\n            clearScreenshot();\n        }\n    }\n\n    private void showTradeWarning(int groupId) {\n        int tradeModifiedId \u003d PLAYER_TRADE_CONFIRMATION_TRADE_MODIFIED_THEM;\n        int tradeModifiedMeId \u003d PLAYER_TRADE_CONFIRMATION_TRADING_WITH;\n        int tradingWithId \u003d PLAYER_TRADE_CONFIRMATION_TRADING_WITH;\n        if (groupId \u003d\u003d PLAYER_TRADE_OFFER_GROUP_ID) {\n            tradeModifiedId \u003d PLAYER_TRADE_OFFER_TRADE_MODIFIED_THEM;\n            tradingWithId \u003d PLAYER_TRADE_OFFER_TRADING_WITH;\n            tradeModifiedMeId \u003d PLAYER_TRADE_OFFER_TRADE_MODIFIED_ME;\n        }\n\n        Widget tradeModified \u003d client.getWidget(groupId, tradeModifiedId);\n        Widget tradingWith \u003d client.getWidget(groupId, tradingWithId);\n        Widget tradeModifiedMe \u003d client.getWidget(groupId, tradeModifiedMeId);\n        if (tradingWith \u003d\u003d null || tradeModified \u003d\u003d null) {\n            log.warn(\"no trading with widget found\");\n            return;\n        }\n\n        Matcher m \u003d TRADING_WITH_PATTERN.matcher(tradingWith.getText());\n        if (!m.matches()) {\n            log.warn(\"no rsn found in trading with widget: \" + tradingWith.getText());\n            return;\n        }\n        String trader \u003d m.group(2);\n        Case rwCase \u003d caseManager.get(trader);\n        if (rwCase \u003d\u003d null) {\n            return;\n        }\n\n        String wText \u003d tradeModified.getText();\n        if (!wText.contains(\"WARNING\")) {\n            String warningMsg \u003d String.format(\"\u003cbr\u003eWARNING: %s is on %s list.\", trader, rwCase.niceSourcePossessive());\n            String msg \u003d wText + warningMsg;\n            tradeModified.setText(msg);\n\n            // check if this is the first time we\u0027ve offset x/y\n            if (tradeModified.getOriginalY() \u003d\u003d tradeModifiedMe.getOriginalY()) {\n                tradeModified.setOriginalY(tradeModified.getOriginalY() - 10);\n                tradeModified.setOriginalX(tradeModified.getOriginalX() - 20);\n            }\n            tradeModified.setHidden(false);\n            tradeModified.revalidate();\n        }\n    }\n\n    private void alertPlayerWarning(String rsn, boolean playerExecuted, AlertType alertType) {\n        rsn \u003d Text.toJagexName(rsn);\n        Case rwCase \u003d caseManager.get(rsn);\n        ChatMessageBuilder response \u003d new ChatMessageBuilder();\n        response.append(alertType.getMessage())\n                .append(ChatColorType.HIGHLIGHT)\n                .append(rsn)\n                .append(ChatColorType.NORMAL);\n\n        if (rwCase \u003d\u003d null \u0026\u0026 !playerExecuted) {\n            return;\n        } else if (rwCase \u003d\u003d null) {\n            response.append(\" is not on any watchlist.\");\n        } else {\n            response.append(String.format(\" is on %s list for \", rwCase.niceSourcePossessive()))\n                    .append(ChatColorType.HIGHLIGHT)\n                    .append(rwCase.getReason());\n            if (rwCase.getDate().getTime() \u003e 0) {\n                response.append(\" \")\n                        .append(ChatColorType.NORMAL)\n                        .append(\"on \" + rwCase.niceDate())\n                        .append(\".\");\n            } else {\n                response.append(ChatColorType.NORMAL)\n                        .append(\".\");\n            }\n\n            // Don\u0027t send a message in chat if the investigate action was a background task\n            // and we\u0027ve already notified about this player.\n            if (!playerExecuted) {\n                if (isNotifyOnCooldown(rsn)) {\n                    return;\n                } else {\n                    lastNotified.put(rsn, Instant.now());\n                }\n            }\n        }\n\n        chatMessageManager.queue(QueuedMessage.builder()\n                .type(ChatMessageType.CONSOLE)\n                .runeLiteFormattedMessage(response.build())\n                .build());\n    }\n\n    boolean isNotifyOnCooldown(String rsn) {\n        Instant last \u003d lastNotified.get(rsn);\n        if (last \u003d\u003d null) {\n            return false;\n        }\n\n\n        return last.plus(config.notificationCooldown(), ChronoUnit.MINUTES).isAfter(Instant.now());\n    }\n\n    private void colorFriendsChat() {\n        Widget ccList \u003d client.getWidget(ComponentID.FRIENDS_CHAT_LIST);\n        if (ccList !\u003d null) {\n            illiteratePlayerWidgets(ccList);\n        }\n    }\n\n    private void colorClanChat() {\n        Widget clanChatList \u003d client.getWidget(ComponentID.CLAN_MEMBERS);\n        if (clanChatList !\u003d null) {\n            illiteratePlayerWidgets(clanChatList);\n        }\n    }\n\n    private void colorGuestClanChat() {\n        Widget guestClanChatList \u003d client.getWidget(ComponentID.CLAN_MEMBERS);\n        if (guestClanChatList !\u003d null) {\n            illiteratePlayerWidgets(guestClanChatList);\n        }\n    }\n\n    private void illiteratePlayerWidgets(Widget chatWidget) {\n        Widget[] players \u003d chatWidget.getDynamicChildren();\n        for (int i \u003d 0; i \u003c players.length; i +\u003d 3) {\n            Widget player \u003d players[i];\n            if (player \u003d\u003d null) {\n                continue;\n            }\n\n            Case rwCase \u003d caseManager.get(player.getText());\n            if (rwCase \u003d\u003d null) {\n                continue;\n            }\n\n            player.setTextColor(config.playerTextColor().getRGB());\n            player.revalidate();\n        }\n    }\n\n    private void colorRaidsSidePanel() {\n        Widget raidsList \u003d client.getWidget(InterfaceID.RAIDING_PARTY, 10);\n        if (raidsList !\u003d null) {\n            colorTable(raidsList, 4);\n        }\n    }\n\n    private void colorRaidsParty() {\n        Widget table \u003d client.getWidget(COX_PARTY_DETAILS_GROUP_ID, 11);\n        if (table !\u003d null) {\n            colorTable(table, 5);\n        }\n    }\n\n    private void colorRaidsPartyList() {\n        Widget list \u003d client.getWidget(COX_PARTY_LIST_GROUP_ID, 14);\n        if (list !\u003d null) {\n            colorList(list, 3);\n        }\n    }\n\n    private void colorTobHud() {\n        // top right corner widget\n        Widget hud \u003d client.getWidget(28, 9);\n        if (hud \u003d\u003d null) {\n            return;\n        }\n\n        String names \u003d hud.getText(); // user1\u003cbr\u003euser2\u003cbr\u003e-\u003cbr\u003e-\u003cbr\u003e-\n        if (!Strings.isNullOrEmpty(names)) {\n            List\u003cString\u003e newNames \u003d new ArrayList\u003c\u003e();\n            for (String name : names.split(\"\u003cbr\u003e\")) {\n                if (name.equals(\"-\")) {\n                    newNames.add(\"-\");\n                    continue;\n                }\n\n                String stripped \u003d Text.removeTags(name);\n                Case rwCase \u003d caseManager.get(stripped);\n                if (rwCase \u003d\u003d null) {\n                    newNames.add(name);\n                    continue;\n                }\n\n                String colored \u003d new ChatMessageBuilder().append(config.playerTextColor(), stripped).build();\n                newNames.add(colored);\n            }\n            hud.setText(String.join(\"\u003cbr\u003e\", newNames));\n        }\n    }\n\n    private void colorTobParty() {\n        // current party members\n        Widget table \u003d client.getWidget(TOB_PARTY_DETAILS_GROUP_ID, 26);\n        if (table !\u003d null) {\n            // idx \u003d 0 whole row, 1/12/23/... \u003d rsn cell\n            colorTable(table, 11);\n        }\n\n        // get current party application list\n        table \u003d client.getWidget(TOB_PARTY_DETAILS_GROUP_ID, 41);\n        if (table !\u003d null) {\n            // idx \u003d 0 whole row, 0-18 \u003d cells,1 \u003d name\n            colorTable(table, 18);\n        }\n    }\n\n    private void colorTobPartyList() {\n        Widget list \u003d client.getWidget(TOB_PARTY_LIST_GROUP_ID, 16);\n        if (list !\u003d null) {\n            colorList(list, 3);\n        }\n    }\n\n    private void colorTable(Widget table, int inc) {\n        Widget[] players \u003d table.getDynamicChildren();\n        for (int i \u003d 1; i \u003c players.length; i +\u003d inc) {\n            Widget player \u003d players[i];\n            if (player \u003d\u003d null) {\n                continue;\n            }\n\n            Case rwCase \u003d caseManager.get(Text.removeTags(player.getText()));\n            if (rwCase \u003d\u003d null) {\n                continue;\n            }\n\n            player.setTextColor(config.playerTextColor().getRGB());\n            player.setText(Text.removeTags(player.getText()));\n            player.revalidate();\n        }\n    }\n\n    private void colorList(Widget list, int nameIdx) {\n        for (Widget row : list.getStaticChildren()) {\n            Widget name \u003d row.getChild(nameIdx);\n            if (name \u003d\u003d null) {\n                continue;\n            }\n\n            if (caseManager.get(name.getText()) !\u003d null) {\n                name.setTextColor(config.playerTextColor().getRGB());\n                name.setText(Text.removeTags(name.getText())); // `col` is set on the name too\n                name.revalidate();\n            }\n        }\n    }\n\n    /*\n        Copy of {WidgetInfo.TO_GROUP\n     */\n    public static int TO_GROUP(int id) {\n        return id \u003e\u003e\u003e 16;\n    }\n}\n","filePath":"src\\main\\java\\com\\runewatch\\RuneWatchPlugin.java"},{"fileName":"RuneWatchPluginTest.java","content":"package com.runewatch;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class RuneWatchPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(RuneWatchPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\runewatch\\RuneWatchPluginTest.java"}]},{"commit":"1cb3b285c995fb7f4229a172033fcb6020d445cf","repository":"https://github.com/mcgeer/WastedBankSpace.git","internalName":"wasted-bank-space","files":[{"fileName":"ArmourCase.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace.model.locations;\n\nimport com.wastedbankspace.model.StorableItem;\nimport lombok.Getter;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.api.ItemID;\n\n@Getter\npublic enum ArmourCase implements StorableItem\n{\n    // Adventurer\u0027s outfit (tier 1)\n    ADVENTURERS_HOOD_T1(ItemID.ADVENTURERS_HOOD_T1),\n    ADVENTURERS_TOP_T1(ItemID.ADVENTURERS_TOP_T1),\n    ADVENTURERS_TROUSERS_T1(ItemID.ADVENTURERS_TROUSERS_T1),\n    ADVENTURERS_BOOTS_T1(ItemID.ADVENTURERS_BOOTS_T1),\n    // Adventurer\u0027s outfit (tier 2)\n    ADVENTURERS_HOOD_T2(ItemID.ADVENTURERS_HOOD_T2),\n    ADVENTURERS_TOP_T2(ItemID.ADVENTURERS_TOP_T2),\n    ADVENTURERS_TROUSERS_T2(ItemID.ADVENTURERS_TROUSERS_T2),\n    ADVENTURERS_BOOTS_T2(ItemID.ADVENTURERS_BOOTS_T2),\n    // Adventurer\u0027s outfit (tier 3)\n    ADVENTURERS_HOOD_T3(ItemID.ADVENTURERS_HOOD_T3),\n    ADVENTURERS_TOP_T3(ItemID.ADVENTURERS_TOP_T3),\n    ADVENTURERS_TROUSERS_T3(ItemID.ADVENTURERS_TROUSERS_T3),\n    ADVENTURERS_BOOTS_T3(ItemID.ADVENTURERS_BOOTS_T3),\n    // Aux Adventurer\u0027s outfit\n    ADVENTURERS_VAMBRACERS(ItemID.ADVENTURERS_VAMBRACES),\n    ADVENTURERS_CAPE(ItemID.ADVENTURERS_CAPE),\n    // Alchemist\u0027s outfit\n    PRESCRIPTION_GOGGLES(ItemID.PRESCRIPTION_GOGGLES, true),\n    PRESCRIPTION_GOGGLES_29976(ItemID.PRESCRIPTION_GOGGLES_29976, true),\n    ALCHEMIST_LABCOAT(ItemID.ALCHEMIST_LABCOAT),\n    ALCHEMIST_LABCOAT_29980(ItemID.ALCHEMIST_LABCOAT_29980),\n    ALCHEMIST_PANTS(ItemID.ALCHEMIST_PANTS),\n    ALCHEMIST_PANTS_29984(ItemID.ALCHEMIST_PANTS_29984),\n    ALCHEMIST_GLOVES(ItemID.ALCHEMIST_GLOVES),\n    // Angler outfit is storable in the tackle box\n    // Spirit angler outfit is storable in the tackle box\n    ARDOUGNE_KNIGHT_HELM(ItemID.ARDOUGNE_KNIGHT_HELM),\n    ARDOUGNE_KNIGHT_PLATEBODY(ItemID.ARDOUGNE_KNIGHT_PLATEBODY),\n    ARDOUGNE_KNIGHT_PLATELEGS(ItemID.ARDOUGNE_KNIGHT_PLATELEGS),\n    // Bomber jacket costume\n    BOMBER_CAP(ItemID.BOMBER_CAP),\n    CAP_AND_GOGGLES(ItemID.CAP_AND_GOGGLES),\n    BOMBER_JACKET(ItemID.BOMBER_JACKET),\n    // Builder\u0027s costume\n    HARD_HAT(ItemID.HARD_HAT),\n    BUILDERS_SHIRT(ItemID.BUILDERS_SHIRT),\n    BUILDERS_TROUSERS(ItemID.BUILDERS_TROUSERS),\n    BUILDERS_BOOTS(ItemID.BUILDERS_BOOTS),\n    // Butler\u0027s uniform\n    BUTLERS_UNIFORM(ItemID.BUTLERS_UNIFORM),\n    BUTLERS_UNIFORM_29915(ItemID.BUTLERS_UNIFORM_29915),\n    BUTLERS_UNIFORM_29916(ItemID.BUTLERS_UNIFORM_29916),\n    BUTLERS_UNIFORM_29918(ItemID.BUTLERS_UNIFORM_29918),\n    // Desert camo outfit\n    DESERT_CAMO_TOP(ItemID.DESERT_CAMO_TOP),\n    DESERT_CAMO_LEGS(ItemID.DESERT_CAMO_LEGS),\n    // Jungle camo outfit\n    JUNGLE_CAMO_TOP(ItemID.JUNGLE_CAMO_TOP),\n    JUNGLE_CAMO_LEGS(ItemID.JUNGLE_CAMO_LEGS),\n    // Polar camo outfit\n    POLAR_CAMO_TOP(ItemID.POLAR_CAMO_TOP),\n    POLAR_CAMO_LEGS(ItemID.POLAR_CAMO_LEGS),\n    // Woodland camo outfit\n    WOOD_CAMO_TOP(ItemID.WOOD_CAMO_TOP),\n    WOOD_CAMO_LEGS(ItemID.WOOD_CAMO_LEGS),\n    // Leagues Canes\n    RAGING_ECHOES_CANE(ItemID.RAGING_ECHOES_CANE),\n    SHATTERED_CANE(ItemID.SHATTERED_CANE),\n    TRAILBLAZER_CANE(ItemID.TRAILBLAZER_CANE),\n    TWISTED_CANE(ItemID.TWISTED_CANE),\n    // Castle Wars armour (1)\n    DECORATIVE_HELM(ItemID.DECORATIVE_HELM),\n    DECORATIVE_FULL_HELM(ItemID.DECORATIVE_FULL_HELM),\n    DECORATIVE_ARMOUR(ItemID.DECORATIVE_ARMOUR),\n    DECORATIVE_ARMOUR_4070(ItemID.DECORATIVE_ARMOUR_4070),\n    DECORATIVE_ARMOUR_11893(ItemID.DECORATIVE_ARMOUR_11893),\n    DECORATIVE_SHIELD(ItemID.DECORATIVE_SHIELD),\n    DECORATIVE_BOOTS(ItemID.DECORATIVE_BOOTS),\n    // Castle Wars armour (2)\n    DECORATIVE_HELM_4506(ItemID.DECORATIVE_HELM_4506),\n    DECORATIVE_FULL_HELM_25169(ItemID.DECORATIVE_FULL_HELM_25169),\n    DECORATIVE_ARMOUR_4504(ItemID.DECORATIVE_ARMOUR_4504),\n    DECORATIVE_ARMOUR_4505(ItemID.DECORATIVE_ARMOUR_4505),\n    DECORATIVE_ARMOUR_11894(ItemID.DECORATIVE_ARMOUR_11894),\n    DECORATIVE_SHIELD_4507(ItemID.DECORATIVE_SHIELD_4507),\n    DECORATIVE_BOOTS_25167(ItemID.DECORATIVE_BOOTS_25167),\n    // Castle Wars armour (3)\n    DECORATIVE_HELM_4511(ItemID.DECORATIVE_HELM_4511),\n    DECORATIVE_FULL_HELM_25174(ItemID.DECORATIVE_FULL_HELM_25174),\n    DECORATIVE_ARMOUR_4509(ItemID.DECORATIVE_ARMOUR_4509),\n    DECORATIVE_ARMOUR_4510(ItemID.DECORATIVE_ARMOUR_4510),\n    DECORATIVE_ARMOUR_11895(ItemID.DECORATIVE_ARMOUR_11895),\n    DECORATIVE_SHIELD_4512(ItemID.DECORATIVE_SHIELD_4512),\n    DECORATIVE_BOOTS_25171(ItemID.DECORATIVE_BOOTS_25171),\n    // Castle Wars sword (1)\n    DECORATIVE_SWORD(ItemID.DECORATIVE_SWORD),\n    // Castle Wars sword (2)\n    DECORATIVE_SWORD_4503(ItemID.DECORATIVE_SWORD_4503),\n    // Castle Wars sword (3)\n    DECORATIVE_SWORD_4508(ItemID.DECORATIVE_SWORD_4508),\n    // Castle Wars mage armour\n    DECORATIVE_ARMOUR_11896(ItemID.DECORATIVE_ARMOUR_11896),\n    DECORATIVE_ARMOUR_MAGIC_LEGS(ItemID.DECORATIVE_ARMOUR_11897),\n    DECORATIVE_ARMOUR_11898(ItemID.DECORATIVE_ARMOUR_11898),\n    // Castle Wars ranger armour\n    DECORATIVE_ARMOUR_11899(ItemID.DECORATIVE_ARMOUR_11899),\n    DECORATIVE_ARMOUR_11900(ItemID.DECORATIVE_ARMOUR_11900),\n    DECORATIVE_ARMOUR_11901(ItemID.DECORATIVE_ARMOUR_11901),\n    //Chompy Bird Hunting Hats\n    CHOMPY_BIRD_HAT(ItemID.CHOMPY_BIRD_HAT),\n    CHOMPY_BIRD_HAT_2979(ItemID.CHOMPY_BIRD_HAT_2979),\n    CHOMPY_BIRD_HAT_2980(ItemID.CHOMPY_BIRD_HAT_2980),\n    CHOMPY_BIRD_HAT_2981(ItemID.CHOMPY_BIRD_HAT_2981),\n    CHOMPY_BIRD_HAT_2982(ItemID.CHOMPY_BIRD_HAT_2982),\n    CHOMPY_BIRD_HAT_2983(ItemID.CHOMPY_BIRD_HAT_2983),\n    CHOMPY_BIRD_HAT_2984(ItemID.CHOMPY_BIRD_HAT_2984),\n    CHOMPY_BIRD_HAT_2985(ItemID.CHOMPY_BIRD_HAT_2985),\n    CHOMPY_BIRD_HAT_2986(ItemID.CHOMPY_BIRD_HAT_2986),\n    CHOMPY_BIRD_HAT_2987(ItemID.CHOMPY_BIRD_HAT_2987),\n    CHOMPY_BIRD_HAT_2988(ItemID.CHOMPY_BIRD_HAT_2988),\n    CHOMPY_BIRD_HAT_2989(ItemID.CHOMPY_BIRD_HAT_2989),\n    CHOMPY_BIRD_HAT_2990(ItemID.CHOMPY_BIRD_HAT_2990),\n    CHOMPY_BIRD_HAT_2991(ItemID.CHOMPY_BIRD_HAT_2991),\n    CHOMPY_BIRD_HAT_2992(ItemID.CHOMPY_BIRD_HAT_2992),\n    CHOMPY_BIRD_HAT_2993(ItemID.CHOMPY_BIRD_HAT_2993),\n    CHOMPY_BIRD_HAT_2994(ItemID.CHOMPY_BIRD_HAT_2994),\n    CHOMPY_BIRD_HAT_2995(ItemID.CHOMPY_BIRD_HAT_2995),\n    // Clue hunter outfit\n    CLUE_HUNTER_GARB(ItemID.CLUE_HUNTER_GARB),\n    CLUE_HUNTER_TROUSERS(ItemID.CLUE_HUNTER_TROUSERS),\n    CLUE_HUNTER_GLOVES(ItemID.CLUE_HUNTER_GLOVES),\n    CLUE_HUNTER_BOOTS(ItemID.CLUE_HUNTER_BOOTS),\n    CLUE_HUNTER_CLOAK(ItemID.CLUE_HUNTER_CLOAK),\n    // Corrupted armour\n    CORRUPTED_HELM(ItemID.CORRUPTED_HELM),\n    CORRUPTED_PLATEBODY(ItemID.CORRUPTED_PLATEBODY),\n    CORRUPTED_PLATELEGS(ItemID.CORRUPTED_PLATELEGS),\n    CORRUPTED_PLATESKIRT(ItemID.CORRUPTED_PLATESKIRT),\n    CORRUPTED_KITESHIELD(ItemID.CORRUPTED_KITESHIELD),\n    // Deadman armour\n    DEADMANS_CHEST(ItemID.DEADMANS_CHEST),\n    DEADMANS_LEGS(ItemID.DEADMANS_LEGS),\n    DEADMANS_CAPE(ItemID.DEADMANS_CAPE),\n    // Dragonstone armour\n    DRAGONSTONE_FULL_HELM(ItemID.DRAGONSTONE_FULL_HELM),\n    DRAGONSTONE_PLATEBODY(ItemID.DRAGONSTONE_PLATEBODY),\n    DRAGONSTONE_PLATELEGS(ItemID.DRAGONSTONE_PLATELEGS),\n    DRAGONSTONE_BOOTS(ItemID.DRAGONSTONE_BOOTS),\n    DRAGONSTONE_GAUNTLETS(ItemID.DRAGONSTONE_GAUNTLETS),\n    // Elite black armour\n    ELITE_BLACK_FULL_HELM(ItemID.ELITE_BLACK_FULL_HELM),\n    ELITE_BLACK_PLATEBODY(ItemID.ELITE_BLACK_PLATEBODY),\n    ELITE_BLACK_PLATELEGS(ItemID.ELITE_BLACK_PLATELEGS),\n    // Farmer\u0027s outfit\n    FARMERS_STRAWHAT(ItemID.FARMERS_STRAWHAT),\n    FARMERS_STRAWHAT_13647(ItemID.FARMERS_STRAWHAT_13647),\n    FARMERS_JACKET(ItemID.FARMERS_JACKET),\n    FARMERS_SHIRT(ItemID.FARMERS_SHIRT),\n    FARMERS_BORO_TROUSERS(ItemID.FARMERS_BORO_TROUSERS),\n    FARMERS_BORO_TROUSERS_13641(ItemID.FARMERS_BORO_TROUSERS_13641),\n    FARMERS_BOOTS(ItemID.FARMERS_BOOTS),\n    FARMERS_BOOTS_13645(ItemID.FARMERS_BOOTS_13645),\n    // Crazy Archaeologist\u0027s Fedora\n    FEDORA(ItemID.FEDORA),\n    // Speed running stopwatch\n    GIANT_STOPWATCH(ItemID.GIANT_STOPWATCH),\n    // Ham outfit\n    HAM_HOOD(ItemID.HAM_HOOD),\n    HAM_SHIRT(ItemID.HAM_SHIRT),\n    HAM_ROBE(ItemID.HAM_ROBE),\n    HAM_GLOVES(ItemID.HAM_GLOVES),\n    HAM_BOOTS(ItemID.HAM_BOOTS),\n    HAM_CLOAK(ItemID.HAM_CLOAK),\n    HAM_LOGO(ItemID.HAM_LOGO),\n    // Halos\n    ANCIENT_HALO(ItemID.ANCIENT_HALO),\n    ARMADYL_HALO(ItemID.ARMADYL_HALO),\n    BANDOS_HALO(ItemID.BANDOS_HALO),\n    BRASSICA_HALO(ItemID.BRASSICA_HALO),\n    GUTHIX_HALO(ItemID.GUTHIX_HALO),\n    SARADOMIN_HALO(ItemID.SARADOMIN_HALO),\n    SEREN_HALO(ItemID.SEREN_HALO),\n    ZAMORAK_HALO(ItemID.ZAMORAK_HALO),\n    // Clue hunter helmet\n    HELM_OF_RAEDWALD(ItemID.HELM_OF_RAEDWALD),\n    // Hunter outfits\n    GRAAHK_HEADDRESS(ItemID.GRAAHK_HEADDRESS),\n    GRAAHK_TOP(ItemID.GRAAHK_TOP),\n    GRAAHK_LEGS(ItemID.GRAAHK_LEGS),\n    KYATT_HAT(ItemID.KYATT_HAT),\n    KYATT_TOP(ItemID.KYATT_TOP),\n    KYATT_LEGS(ItemID.KYATT_LEGS),\n    LARUPIA_HAT(ItemID.LARUPIA_HAT),\n    LARUPIA_TOP(ItemID.LARUPIA_TOP),\n    LARUPIA_LEGS(ItemID.LARUPIA_LEGS),\n    // Guild Hunter outfit is storable in the hunter kit\n    // Inquisitor\u0027s armour\n    INQUISITORS_GREAT_HELM(ItemID.INQUISITORS_GREAT_HELM, true),\n    INQUISITORS_HAUBERK(ItemID.INQUISITORS_HAUBERK, true),\n    INQUISITORS_PLATESKIRT(ItemID.INQUISITORS_PLATESKIRT, true),\n    // Justiciar armour\n    JUSTICIAR_FACEGUARD(ItemID.JUSTICIAR_FACEGUARD, true),\n    JUSTICIAR_CHESTGUARD(ItemID.JUSTICIAR_CHESTGUARD, true),\n    JUSTICIAR_LEGGUARDS(ItemID.JUSTICIAR_LEGGUARDS, true),\n    // Lumberjack outfit - can be stored in FORESTRY_KIT, FORESTRY_BASKET, or OPEN_FORESTRY_BASKET, if CLOTHES_POUCH is installed on any of them\n    LUMBERJACK_HAT_AC(ItemID.LUMBERJACK_HAT),\n    LUMBERJACK_TOP_AC(ItemID.LUMBERJACK_TOP),\n    LUMBERJACK_LEGS_AC(ItemID.LUMBERJACK_LEGS),\n    LUMBERJACK_BOOTS_AC(ItemID.LUMBERJACK_BOOTS),\n    // Forestry Outfit\n    FORESTRY_HAT_AC(ItemID.FORESTRY_HAT),\n    FORESTRY_TOP_AC(ItemID.FORESTRY_TOP),\n    FORESTRY_LEGS_AC(ItemID.FORESTRY_LEGS),\n    FORESTRY_BOOTS_AC(ItemID.FORESTRY_BOOTS),\n    // Masori armour\n    MASORI_MASK(ItemID.MASORI_MASK, true),\n    MASORI_BODY(ItemID.MASORI_BODY, true),\n    MASORI_CHAPS(ItemID.MASORI_CHAPS, true),\n    // Masori armour (fortified)\n    MASORI_MASK_F(ItemID.MASORI_MASK_F, true),\n    MASORI_BODY_F(ItemID.MASORI_BODY_F, true),\n    MASORI_CHAPS_F(ItemID.MASORI_CHAPS_F, true),\n    // Mining gloves\n    MINING_GLOVES(ItemID.MINING_GLOVES),\n    SUPERIOR_MINING_GLOVES(ItemID.SUPERIOR_MINING_GLOVES),\n    EXPERT_MINING_GLOVES(ItemID.EXPERT_MINING_GLOVES),\n    // Mixed hide armour\n    MIXED_HIDE_TOP(ItemID.MIXED_HIDE_TOP),\n    MIXED_HIDE_LEGS(ItemID.MIXED_HIDE_LEGS),\n    MIXED_HIDE_BOOTS(ItemID.MIXED_HIDE_BOOTS),\n    MIXED_HIDE_CAPE(ItemID.MIXED_HIDE_CAPE),\n    // Mourner gear\n    GAS_MASK(ItemID.GAS_MASK),\n    MOURNER_TOP(ItemID.MOURNER_TOP),\n    MOURNER_TROUSERS(ItemID.MOURNER_TROUSERS),\n    MOURNER_BOOTS(ItemID.MOURNER_BOOTS),\n    MOURNER_GLOVES(ItemID.MOURNER_GLOVES),\n    MOURNER_CLOAK(ItemID.MOURNER_CLOAK),\n    // Oathplate armour\n    OATHPLATE_HELM(ItemID.OATHPLATE_HELM, true),\n    OATHPLATE_CHEST(ItemID.OATHPLATE_CHEST, true),\n    OATHPLATE_LEGS(ItemID.OATHPLATE_LEGS, true),\n    // Obsidian armour\n    OBSIDIAN_HELMET(ItemID.OBSIDIAN_HELMET, true),\n    OBSIDIAN_PLATEBODY(ItemID.OBSIDIAN_PLATEBODY, true),\n    OBSIDIAN_PLATELEGS(ItemID.OBSIDIAN_PLATELEGS, true),\n    // Ornate armour\n    ORNATE_HELM(ItemID.ORNATE_HELM),\n    ORNATE_TOP(ItemID.ORNATE_TOP),\n    ORNATE_LEGS(ItemID.ORNATE_LEGS),\n    ORNATE_GLOVES(ItemID.ORNATE_GLOVES),\n    ORNATE_BOOTS(ItemID.ORNATE_BOOTS),\n    ORNATE_CAPE(ItemID.ORNATE_CAPE),\n    // Barbarian Assault armour\n    FIGHTER_HAT(ItemID.FIGHTER_HAT),\n    FIGHTER_TORSO(ItemID.FIGHTER_TORSO),\n    PENANCE_GLOVES(ItemID.PENANCE_GLOVES),\n    HEALER_HAT(ItemID.HEALER_HAT),\n    RANGER_HAT(ItemID.RANGER_HAT),\n    RUNNER_BOOTS(ItemID.RUNNER_BOOTS),\n    RUNNER_HAT(ItemID.RUNNER_HAT),\n    PENANCE_SKIRT(ItemID.PENANCE_SKIRT),\n    // Prospector outfit\n    PROSPECTOR_HELMET(ItemID.PROSPECTOR_HELMET),\n    PROSPECTOR_JACKET(ItemID.PROSPECTOR_JACKET),\n    PROSPECTOR_LEGS(ItemID.PROSPECTOR_LEGS),\n    PROSPECTOR_BOOTS(ItemID.PROSPECTOR_BOOTS),\n    GOLDEN_PROSPECTOR_HELMET(ItemID.GOLDEN_PROSPECTOR_HELMET),\n    GOLDEN_PROSPECTOR_JACKET(ItemID.GOLDEN_PROSPECTOR_JACKET),\n    GOLDEN_PROSPECTOR_LEGS(ItemID.GOLDEN_PROSPECTOR_LEGS),\n    GOLDEN_PROSPECTOR_BOOTS(ItemID.GOLDEN_PROSPECTOR_BOOTS),\n    // Radiant oathplate armour\n    RADIANT_OATHPLATE_HELM(ItemID.RADIANT_OATHPLATE_HELM),\n    RADIANT_OATHPLATE_CHEST(ItemID.RADIANT_OATHPLATE_CHEST),\n    RADIANT_OATHPLATE_LEGS(ItemID.RADIANT_OATHPLATE_LEGS),\n    // Raging Echoes Relic Hunter (T1)\n    RAGING_ECHOES_HAT_T1(ItemID.RAGING_ECHOES_HAT_T1),\n\tRAGING_ECHOES_TOP_T1(ItemID.RAGING_ECHOES_TOP_T1),\n\tRAGING_ECHOES_ROBESKIRT_T1(ItemID.RAGING_ECHOES_ROBESKIRT_T1),\n\tRAGING_ECHOES_BOOTS_T1(ItemID.RAGING_ECHOES_BOOTS_T1),\n    // Raging Echoes Relic Hunter (T2)\n\tRAGING_ECHOES_HAT_T2(ItemID.RAGING_ECHOES_HAT_T2),\n\tRAGING_ECHOES_TOP_T2(ItemID.RAGING_ECHOES_TOP_T2),\n\tRAGING_ECHOES_ROBESKIRT_T2(ItemID.RAGING_ECHOES_ROBESKIRT_T2),\n\tRAGING_ECHOES_BOOTS_T2(ItemID.RAGING_ECHOES_BOOTS_T2),\n    // Raging Echoes Relic Hunter (T3)\n\tRAGING_ECHOES_HAT_T3(ItemID.RAGING_ECHOES_HAT_T3),\n\tRAGING_ECHOES_TOP_T3(ItemID.RAGING_ECHOES_TOP_T3),\n\tRAGING_ECHOES_ROBESKIRT_T3(ItemID.RAGING_ECHOES_ROBESKIRT_T3),\n\tRAGING_ECHOES_BOOTS_T3(ItemID.RAGING_ECHOES_BOOTS_T3),\n    // Rockshell armour\n    ROCKSHELL_HELM(ItemID.ROCKSHELL_HELM),\n    ROCKSHELL_PLATE(ItemID.ROCKSHELL_PLATE),\n    ROCKSHELL_LEGS(ItemID.ROCKSHELL_LEGS),\n    ROCKSHELL_GLOVES(ItemID.ROCKSHELL_GLOVES),\n    ROCKSHELL_BOOTS(ItemID.ROCKSHELL_BOOTS),\n    // Rogue equipment\n    ROGUE_MASK(ItemID.ROGUE_MASK),\n    ROGUE_TOP(ItemID.ROGUE_TOP),\n    ROGUE_GLOVES(ItemID.ROGUE_GLOVES),\n    ROGUE_TROUSERS(ItemID.ROGUE_TROUSERS),\n    ROGUE_BOOTS(ItemID.ROGUE_BOOTS),\n    // Shattered Relic Hunter (T1)\n    SHATTERED_HOOD_T1(ItemID.SHATTERED_HOOD_T1),\n    SHATTERED_TOP_T1(ItemID.SHATTERED_TOP_T1),\n    SHATTERED_TROUSERS_T1(ItemID.SHATTERED_TROUSERS_T1),\n    SHATTERED_BOOTS_T1(ItemID.SHATTERED_BOOTS_T1),\n    // Shattered Relic Hunter (T2)\n    SHATTERED_HOOD_T2(ItemID.SHATTERED_HOOD_T2),\n    SHATTERED_TOP_T2(ItemID.SHATTERED_TOP_T2),\n    SHATTERED_TROUSERS_T2(ItemID.SHATTERED_TROUSERS_T2),\n    SHATTERED_BOOTS_T2(ItemID.SHATTERED_BOOTS_T2),\n    // Shattered Relic Hunter (T3)\n    SHATTERED_HOOD_T3(ItemID.SHATTERED_HOOD_T3),\n    SHATTERED_TOP_T3(ItemID.SHATTERED_TOP_T3),\n    SHATTERED_TROUSERS_T3(ItemID.SHATTERED_TROUSERS_T3),\n    SHATTERED_BOOTS_T3(ItemID.SHATTERED_BOOTS_T3),\n    // Shayzien armour (tier 1)\n    SHAYZIEN_HELM_1(ItemID.SHAYZIEN_HELM_1),\n    SHAYZIEN_PLATEBODY_1(ItemID.SHAYZIEN_PLATEBODY_1),\n    SHAYZIEN_GREAVES_1(ItemID.SHAYZIEN_GREAVES_1),\n    SHAYZIEN_GLOVES_1(ItemID.SHAYZIEN_GLOVES_1),\n    SHAYZIEN_BOOTS_1(ItemID.SHAYZIEN_BOOTS_1),\n    // Shayzien armour (tier 2)\n    SHAYZIEN_HELM_2(ItemID.SHAYZIEN_HELM_2),\n    SHAYZIEN_PLATEBODY_2(ItemID.SHAYZIEN_PLATEBODY_2),\n    SHAYZIEN_GREAVES_2(ItemID.SHAYZIEN_GREAVES_2),\n    SHAYZIEN_GLOVES_2(ItemID.SHAYZIEN_GLOVES_2),\n    SHAYZIEN_BOOTS_2(ItemID.SHAYZIEN_BOOTS_2),\n    // Shayzien armour (tier 3)\n    SHAYZIEN_HELM_3(ItemID.SHAYZIEN_HELM_3),\n    SHAYZIEN_PLATEBODY_3(ItemID.SHAYZIEN_PLATEBODY_3),\n    SHAYZIEN_GREAVES_3(ItemID.SHAYZIEN_GREAVES_3),\n    SHAYZIEN_GLOVES_3(ItemID.SHAYZIEN_GLOVES_3),\n    SHAYZIEN_BOOTS_3(ItemID.SHAYZIEN_BOOTS_3),\n    // Shayzien armour (tier 4)\n    SHAYZIEN_HELM_4(ItemID.SHAYZIEN_HELM_4),\n    SHAYZIEN_PLATEBODY_4(ItemID.SHAYZIEN_PLATEBODY_4),\n    SHAYZIEN_GREAVES_4(ItemID.SHAYZIEN_GREAVES_4),\n    SHAYZIEN_GLOVES_4(ItemID.SHAYZIEN_GLOVES_4),\n    SHAYZIEN_BOOTS_4(ItemID.SHAYZIEN_BOOTS_4),\n    // Shayzien armour (tier 5)\n    SHAYZIEN_HELM_5(ItemID.SHAYZIEN_HELM_5),\n    SHAYZIEN_PLATEBODY_5(ItemID.SHAYZIEN_BODY_5),\n    SHAYZIEN_GREAVES_5(ItemID.SHAYZIEN_GREAVES_5),\n    SHAYZIEN_GLOVES_5(ItemID.SHAYZIEN_GLOVES_5),\n    SHAYZIEN_BOOTS_5(ItemID.SHAYZIEN_BOOTS_5),\n    // Snakeskin armour\n    SNAKESKIN_BANDANA(ItemID.SNAKESKIN_BANDANA),\n    SNAKESKIN_BODY(ItemID.SNAKESKIN_BODY),\n    SNAKESKIN_BOOTS(ItemID.SNAKESKIN_BOOTS),\n    SNAKESKIN_CHAPS(ItemID.SNAKESKIN_CHAPS),\n    SNAKESKIN_VAMBRACES(ItemID.SNAKESKIN_VAMBRACES),\n    // Spined armour\n    SPINED_HELM(ItemID.SPINED_HELM),\n    SPINED_BODY(ItemID.SPINED_BODY),\n    SPINED_CHAPS(ItemID.SPINED_CHAPS),\n    SPINED_GLOVES(ItemID.SPINED_GLOVES),\n    SPINED_BOOTS(ItemID.SPINED_BOOTS),\n    // Stronghold of Security Boots\n    FANCY_BOOTS(ItemID.FANCY_BOOTS),\n    FIGHTING_BOOTS(ItemID.FIGHTING_BOOTS),\n    FANCIER_BOOTS(ItemID.FANCIER_BOOTS),\n    // Sunfire fanatic armour\n    SUNFIRE_FANATIC_HELM(ItemID.SUNFIRE_FANATIC_HELM, true),\n    SUNFIRE_FANATIC_CUIRASS(ItemID.SUNFIRE_FANATIC_CUIRASS, true),\n    SUNFIRE_FANATIC_CHAUSSES(ItemID.SUNFIRE_FANATIC_CHAUSSES, true),\n    // Swift blade\n    SWIFT_BLADE(ItemID.SWIFT_BLADE, true),\n    // Initiate armour\n    INITIATE_SALLET(ItemID.INITIATE_SALLET),\n    INITIATE_HAUBERK(ItemID.INITIATE_HAUBERK),\n    INITIATE_CUISSE(ItemID.INITIATE_CUISSE),\n    // Proselyte armour\n    PROSELYTE_SALLET(ItemID.PROSELYTE_SALLET),\n    PROSELYTE_TASSET(ItemID.PROSELYTE_TASSET),\n    PROSELYTE_HAUBERK(ItemID.PROSELYTE_HAUBERK),\n    PROSELYTE_CUISSE(ItemID.PROSELYTE_CUISSE),\n    // Trailblazer Relic Hunter (T1)\n    TRAILBLAZER_HOOD_T1(ItemID.TRAILBLAZER_HOOD_T1),\n    TRAILBLAZER_TOP_T1(ItemID.TRAILBLAZER_TOP_T1),\n    TRAILBLAZER_TROUSERS_T1(ItemID.TRAILBLAZER_TROUSERS_T1),\n    TRAILBLAZER_BOOTS_T1(ItemID.TRAILBLAZER_BOOTS_T1),\n    // Trailblazer Relic Hunter (T2)\n    TRAILBLAZER_HOOD_T2(ItemID.TRAILBLAZER_HOOD_T2),\n    TRAILBLAZER_TOP_T2(ItemID.TRAILBLAZER_TOP_T2),\n    TRAILBLAZER_TROUSERS_T2(ItemID.TRAILBLAZER_TROUSERS_T2),\n    TRAILBLAZER_BOOTS_T2(ItemID.TRAILBLAZER_BOOTS_T2),\n    // Trailblazer Relic Hunter (T3)\n    TRAILBLAZER_HOOD_T3(ItemID.TRAILBLAZER_HOOD_T3),\n    TRAILBLAZER_TOP_T3(ItemID.TRAILBLAZER_TOP_T3),\n    TRAILBLAZER_TROUSERS_T3(ItemID.TRAILBLAZER_TROUSERS_T3),\n    TRAILBLAZER_BOOTS_T3(ItemID.TRAILBLAZER_BOOTS_T3),\n    // Tribal masks\n    TRIBAL_MASK(ItemID.TRIBAL_MASK),\n    TRIBAL_MASK_6337(ItemID.TRIBAL_MASK_6337),\n    TRIBAL_MASK_6339(ItemID.TRIBAL_MASK_6339),\n    // Twisted Relic Hunter (T1)\n    TWISTED_HAT_T1(ItemID.TWISTED_HAT_T1),\n    TWISTED_COAT_T1(ItemID.TWISTED_COAT_T1),\n    TWISTED_TROUSERS_T1(ItemID.TWISTED_TROUSERS_T1),\n    TWISTED_BOOTS_T1(ItemID.TWISTED_BOOTS_T1),\n    // Twisted Relic Hunter (T2)\n    TWISTED_HAT_T2(ItemID.TWISTED_HAT_T2),\n    TWISTED_COAT_T2(ItemID.TWISTED_COAT_T2),\n    TWISTED_TROUSERS_T2(ItemID.TWISTED_TROUSERS_T2),\n    TWISTED_BOOTS_T2(ItemID.TWISTED_BOOTS_T2),\n    // Twisted Relic Hunter (T3)\n    TWISTED_HAT_T3(ItemID.TWISTED_HAT_T3),\n    TWISTED_COAT_T3(ItemID.TWISTED_COAT_T3),\n    TWISTED_TROUSERS_T3(ItemID.TWISTED_TROUSERS_T3),\n    TWISTED_BOOTS_T3(ItemID.TWISTED_BOOTS_T3),\n    // Void knight armour\n    VOID_KNIGHT_TOP(ItemID.VOID_KNIGHT_TOP, true),\n    VOID_KNIGHT_ROBE(ItemID.VOID_KNIGHT_ROBE, true),\n    VOID_KNIGHT_GLOVES(ItemID.VOID_KNIGHT_GLOVES, true),\n    // Void knight (Shattered relics ornament kit)\n    VOID_KNIGHT_TOP_OR(ItemID.VOID_KNIGHT_TOP_OR, true),\n    VOID_KNIGHT_ROBE_OR(ItemID.VOID_KNIGHT_ROBE_OR, true),\n    VOID_KNIGHT_GLOVES_OR(ItemID.VOID_KNIGHT_GLOVES_OR, true),\n    // Elite void knight\n    ELITE_VOID_TOP(ItemID.ELITE_VOID_TOP, true),\n    ELITE_VOID_ROBE(ItemID.ELITE_VOID_ROBE, true),\n    // Elite void knight (Shattered relics ornament kit)\n    ELITE_VOID_TOP_OR(ItemID.ELITE_VOID_TOP_OR, true),\n    ELITE_VOID_ROBE_OR(ItemID.ELITE_VOID_ROBE_OR, true),\n    // Void mage/melee/ranger helmets\n    VOID_MAGE_HELM(ItemID.VOID_MAGE_HELM, true),\n    VOID_MAGE_HELM_OR(ItemID.VOID_MAGE_HELM_OR, true),\n    VOID_MELEE_HELM(ItemID.VOID_MELEE_HELM, true),\n    VOID_MELEE_HELM_OR(ItemID.VOID_MELEE_HELM_OR, true),\n    VOID_RANGER_HELM(ItemID.VOID_RANGER_HELM, true),\n    VOID_RANGER_HELM_OR(ItemID.VOID_RANGER_HELM_OR, true),\n    // Vyre noble outfit\n    VYRE_NOBLE_TOP(ItemID.VYRE_NOBLE_TOP),\n    VYRE_NOBLE_LEGS(ItemID.VYRE_NOBLE_LEGS),\n    VYRE_NOBLE_SHOES(ItemID.VYRE_NOBLE_SHOES),\n    // White Knight equipment\n    WHITE_FULL_HELM(ItemID.WHITE_FULL_HELM),\n    WHITE_PLATEBODY(ItemID.WHITE_PLATEBODY),\n    WHITE_PLATESKIRT(ItemID.WHITE_PLATESKIRT),\n    WHITE_PLATELEGS(ItemID.WHITE_PLATELEGS),\n    WHITE_GLOVES(ItemID.WHITE_GLOVES),\n    WHITE_BOOTS(ItemID.WHITE_BOOTS),\n    WHITE_KITESHIELD(ItemID.WHITE_KITESHIELD),\n    // Xerician robes\n    XERICIAN_HAT(ItemID.XERICIAN_HAT),\n    XERICIAN_TOP(ItemID.XERICIAN_TOP),\n    XERICIAN_ROBE(ItemID.XERICIAN_ROBE);\n\n    private final int itemID;\n    @Getter\n    private final String location \u003d \"Armour Case\";\n\n    @Getter\n    private final boolean isBis;\n\n\n    ArmourCase(int itemID) {\n        this.itemID \u003d itemID; this.isBis \u003d false;\n    }\n\n    ArmourCase(int itemID, boolean isBis) {\n        this.itemID \u003d itemID; this.isBis \u003d isBis;\n    }\n}\n","filePath":"src\\main\\java\\com\\wastedbankspace\\model\\locations\\ArmourCase.java"},{"fileName":"Bookcase.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace.model.locations;\n\nimport com.wastedbankspace.model.StorableItem;\nimport lombok.Getter;\nimport net.runelite.api.ItemID;\n\n@Getter\npublic enum Bookcase implements StorableItem {\n    A_DEAR_FRIEND(ItemID.A_DEAR_FRIEND),\n    A_HANDWRITTEN_BOOK(ItemID.A_HANDWRITTEN_BOOK),\n    A_TASTE_OF_HOPE(ItemID.A_TASTE_OF_HOPE),\n    ABLENKIANS_ESCAPE(ItemID.ABLENKIANS_ESCAPE),\n    ABYSSAL_BOOK(ItemID.ABYSSAL_BOOK),\n    AIVAS_DIARY(ItemID.AIVAS_DIARY),\n    AKILAS_JOURNAL(ItemID.AKILAS_JOURNAL),\n    ANCIENT_DIARY(ItemID.ANCIENT_DIARY),\n    APMEKENS_CAPTURE(ItemID.APMEKENS_CAPTURE),\n    ARACHNIDS_OF_VAMPYRIUM(ItemID.ARACHNIDS_OF_VAMPYRIUM),\n    ARCHAEOLOGISTS_DIARY(ItemID.ARCHAEOLOGISTS_DIARY),\n    ARENA_BOOK(ItemID.ARENA_BOOK),\n    ASTRONOMY_BOOK(ItemID.ASTRONOMY_BOOK),\n    ATLAXS_DIARY(ItemID.ATLAXS_DIARY),\n    AUBURN_VALLEY_ECOLOGICAL_REPORTS(ItemID.AUBURN_VALLEY_ECOLOGICAL_REPORTS),\n    BALLAD_OF_THE_BASILISK(ItemID.BALLAD_OF_THE_BASILISK),\n    BATTERED_BOOK(ItemID.BATTERED_BOOK),\n    BEATEN_BOOK(ItemID.BEATEN_BOOK),\n    BIG_BOOK_OF_BANGS(ItemID.BIG_BOOK_OF_BANGS),\n    BINDING_BOOK(ItemID.BINDING_BOOK),\n    BIRD_BOOK(ItemID.BIRD_BOOK),\n    BLOODY_DIARY(ItemID.BLOODY_DIARY),\n    BLOODY_NOTES(ItemID.BLOODY_NOTES),\n    BOOK(ItemID.BOOK),\n    BOOK_6767(ItemID.BOOK_6767),\n    BOOK_O_PIRACY(ItemID.BOOK_O_PIRACY),\n    BOOK_OF_SPYOLOGY(ItemID.BOOK_OF_SPYOLOGY),\n    BOOK_ON_BAXTORIAN(ItemID.BOOK_ON_BAXTORIAN),\n    BOOK_ON_CHEMICALS(ItemID.BOOK_ON_CHEMICALS),\n    BREWIN_GUIDE(ItemID.BREWIN_GUIDE),\n    BURNT_DIARY(ItemID.BURNT_DIARY),\n    CADARN_LINEAGE(ItemID.CADARN_LINEAGE),\n    CLOCKWORK_BOOK(ItemID.CLOCKWORK_BOOK),\n    COCKTAIL_GUIDE(ItemID.COCKTAIL_GUIDE),\n    COLLECTION_LOG(ItemID.COLLECTION_LOG),\n    CONSTRUCTION_GUIDE(ItemID.CONSTRUCTION_GUIDE),\n    CRAZED_SCRIBBLES(ItemID.CRAZED_SCRIBBLES),\n    CREATURE_KEEPERS_JOURNAL(ItemID.CREATURE_KEEPERS_JOURNAL),\n    CRONDIS_CAPTURE(ItemID.CRONDIS_CAPTURE),\n    CRUMBLING_TOME(ItemID.CRUMBLING_TOME),\n    CRYSTAL_SINGING_FOR_BEGINNERS(ItemID.CRYSTAL_SINGING_FOR_BEGINNERS),\n    DAGONHAI_HISTORY(ItemID.DAGONHAI_HISTORY),\n    DARK_JOURNAL(ItemID.DARK_JOURNAL),\n    DEMONIC_TOME(ItemID.DEMONIC_TOME),\n    DIARY(ItemID.DIARY),\n    DIARY_3395(ItemID.DIARY_3395),\n    DIARY_3846(ItemID.DIARY_3846),\n    DWARVEN_LORE(ItemID.DWARVEN_LORE),\n    EASTERN_DISCOVERY(ItemID.EASTERN_DISCOVERY),\n    EASTERN_SETTLEMENT(ItemID.EASTERN_SETTLEMENT),\n    EBRILLS_JOURNAL(ItemID.EBRILLS_JOURNAL),\n    EDERNS_JOURNAL(ItemID.EDERNS_JOURNAL),\n    EMBALMING_MANUAL(ItemID.EMBALMING_MANUAL),\n    ENTOMOLOGISTS_DIARY(ItemID.ENTOMOLOGISTS_DIARY),\n    EXPLORERS_NOTES(ItemID.EXPLORERS_NOTES),\n    FARMING_MANUAL(ItemID.FARMING_MANUAL),\n    FEATHERED_JOURNAL(ItemID.FEATHERED_JOURNAL),\n    FOSSIL_ISLAND_NOTE_BOOK(ItemID.FOSSIL_ISLAND_NOTE_BOOK),\n    GAME_BOOK(ItemID.GAME_BOOK),\n    GHRIMS_BOOK(ItemID.GHRIMS_BOOK),\n    GIANNES_COOK_BOOK(ItemID.GIANNES_COOK_BOOK),\n    GIELINORS_FLORA__ALLOTMENTS(ItemID.GIELINORS_FLORA__ALLOTMENTS),\n    GIELINORS_FLORA__BUSHES(ItemID.GIELINORS_FLORA__BUSHES),\n    GIELINORS_FLORA__FLOWERS(ItemID.GIELINORS_FLORA__FLOWERS),\n    GIELINORS_FLORA__FRUIT(ItemID.GIELINORS_FLORA__FRUIT),\n    GIELINORS_FLORA__HERBS(ItemID.GIELINORS_FLORA__HERBS),\n    GIELINORS_FLORA__HOPS(ItemID.GIELINORS_FLORA__HOPS),\n    GIELINORS_FLORA__TREES(ItemID.GIELINORS_FLORA__TREES),\n    GLASSBLOWING_BOOK(ItemID.GLASSBLOWING_BOOK),\n    GLOUGHS_JOURNAL(ItemID.GLOUGHS_JOURNAL),\n    GOBLIN_BOOK(ItemID.GOBLIN_BOOK),\n    GOBLIN_SYMBOL_BOOK(ItemID.GOBLIN_SYMBOL_BOOK),\n    GOLLWYNS_FINAL_STATEMENT(ItemID.GOLLWYNS_FINAL_STATEMENT),\n    GUIDE_BOOK(ItemID.GUIDE_BOOK),\n    HARMONY(ItemID.HARMONY),\n    HERMANS_BOOK(ItemID.HERMANS_BOOK),\n    HETS_CAPTURE(ItemID.HETS_CAPTURE),\n    HISTORIES_OF_THE_HALLOWLAND(ItemID.HISTORIES_OF_THE_HALLOWLAND),\n    HISTORY_OF_IBAN(ItemID.HISTORY_OF_IBAN),\n    HOUNDMASTERS_DIARY(ItemID.HOUNDMASTERS_DIARY),\n    IMAFORES_BETRAYAL(ItemID.IMAFORES_BETRAYAL),\n    IMCANDORIAS_FALL(ItemID.IMCANDORIAS_FALL),\n    INSTRUCTION_MANUAL(ItemID.INSTRUCTION_MANUAL),\n    JOURNAL_3845(ItemID.JOURNAL_3845),\n    JOURNAL_6755(ItemID.JOURNAL_6755),\n    KASONDES_JOURNAL(ItemID.KASONDES_JOURNAL),\n    LEGENDS_OF_THE_MOUNTAIN(ItemID.LEGENDS_OF_THE_MOUNTAIN),\n    LITHKREN_VAULT_NOTES(ItemID.LITHKREN_VAULT_NOTES),\n    LUTWIDGE_AND_THE_MOONFLY(ItemID.LUTWIDGE_AND_THE_MOONFLY),\n    MALUMACS_JOURNAL(ItemID.MALUMACS_JOURNAL),\n    MANUAL(ItemID.MANUAL),\n    MODERN_DAY_MORYTANIA(ItemID.MODERN_DAY_MORYTANIA),\n    MOONCLAN_MANUAL(ItemID.MOONCLAN_MANUAL),\n    MOONRISE_WINES(ItemID.MOONRISE_WINES),\n    MOUNT_KARUULM_DIARY(ItemID.MOUNT_KARUULM_DIARY),\n    MOVARIOS_NOTES_VOLUME_1(ItemID.MOVARIOS_NOTES_VOLUME_1),\n    MOVARIOS_NOTES_VOLUME_2(ItemID.MOVARIOS_NOTES_VOLUME_2),\n    MY_NOTES(ItemID.MY_NOTES),\n    NEILANS_JOURNAL(ItemID.NEILANS_JOURNAL),\n    NIFF__HARRY(ItemID.NIFF__HARRY),\n    NISTIRIOS_MANIFESTO(ItemID.NISTIRIOS_MANIFESTO),\n    ODE_TO_ETERNITY(ItemID.ODE_TO_ETERNITY),\n    OHNS_DIARY(ItemID.OHNS_DIARY),\n    OLD_DIARY(ItemID.OLD_DIARY),\n    OLD_JOURNAL(ItemID.OLD_JOURNAL),\n    ON_LEPRECHAUNS(ItemID.ON_LEPRECHAUNS),\n    ON_MIGRATION_PATTERNS(ItemID.ON_MIGRATION_PATTERNS),\n    OVERSEERS_BOOK(ItemID.OVERSEERS_BOOK),\n    PIE_RECIPE_BOOK(ItemID.PIE_RECIPE_BOOK),\n    PRAYER_BOOK(ItemID.PRAYER_BOOK),\n    PRIFDDINAS_HISTORY(ItemID.PRIFDDINAS_HISTORY),\n    QUEEN_HELP_BOOK(ItemID.QUEEN_HELP_BOOK),\n    SACRAMENTS_OF_ENT_FOLK(ItemID.SACRAMENTS_OF_ENT_FOLK),\n    SCABARAS_CAPTURE(ItemID.SCABARAS_CAPTURE),\n    SECURITY_BOOK(ItemID.SECURITY_BOOK),\n    SERAFINA(ItemID.SERAFINA),\n    SERAFINAS_DIARY(ItemID.SERAFINAS_DIARY),\n    SHAMANS_TOME(ItemID.SHAMANS_TOME),\n    SINKETHS_DIARY(ItemID.SINKETHS_DIARY),\n    SOGGY_JOURNAL(ItemID.SOGGY_JOURNAL),\n    SOUL_WARS_GUIDE(ItemID.SOUL_WARS_GUIDE),\n    SPIRIT_ANGLERS_RESEARCH_NOTES(ItemID.SPIRIT_ANGLERS_RESEARCH_NOTES),\n    STAINED_JOURNAL(ItemID.STAINED_JOURNAL),\n    STRANGE_HALLOWED_TOME(ItemID.STRANGE_HALLOWED_TOME),\n    STRONGHOLD_NOTES(ItemID.STRONGHOLD_NOTES),\n    TARNS_DIARY(ItemID.TARNS_DIARY),\n    TEKTONS_JOURNAL(ItemID.TEKTONS_JOURNAL),\n    THE_BUTCHER(ItemID.THE_BUTCHER),\n    THE_DESERT_TROUT__SHIPS_LOG(ItemID.THE_DESERT_TROUT__SHIPS_LOG),\n    THE_EIGHT_CLANS(ItemID.THE_EIGHT_CLANS),\n    THE_GREAT_DIVIDE(ItemID.THE_GREAT_DIVIDE),\n    THE_HUEYCOATL(ItemID.THE_HUEYCOATL),\n    THE_JACKALS_TORCH(ItemID.THE_JACKALS_TORCH),\n    THE_LIVING_STATUES(ItemID.THE_LIVING_STATUES),\n    THE_SHADOW_REALM(ItemID.THE_SHADOW_REALM),\n    THE_SLEEPING_SEVEN(ItemID.THE_SLEEPING_SEVEN),\n    THE_SPURNED_DEMON(ItemID.THE_SPURNED_DEMON),\n    THE_TRUTH_BEHIND_THE_MYTH_EXCERPT(ItemID.THE_TRUTH_BEHIND_THE_MYTH_EXCERPT),\n    THE_WARDENS(ItemID.THE_WARDENS),\n    THE_WEEPING(ItemID.THE_WEEPING),\n    THE_WILD_HUNT(ItemID.THE_WILD_HUNT),\n    TOME_OF_THE_MOON(ItemID.TOME_OF_THE_MOON),\n    TOME_OF_THE_SUN(ItemID.TOME_OF_THE_SUN),\n    TOME_OF_THE_TEMPLE(ItemID.TOME_OF_THE_TEMPLE),\n    TRANSDIMENSIONAL_NOTES(ItemID.TRANSDIMENSIONAL_NOTES),\n    TRANSLATION(ItemID.TRANSLATION),\n    TRANSLATION_BOOK(ItemID.TRANSLATION_BOOK),\n    TREE_WIZARDS_JOURNAL(ItemID.TREE_WIZARDS_JOURNAL),\n    UNGAEL_LAB_NOTES(ItemID.UNGAEL_LAB_NOTES),\n    VANGUARD_JUDGEMENT(ItemID.VANGUARD_JUDGEMENT),\n    VARLAMORE_ENVOY(ItemID.VARLAMORE_ENVOY),\n    VARMENS_NOTES(ItemID.VARMENS_NOTES),\n    VERZIK_VITUR__PATIENT_RECORD(ItemID.VERZIK_VITUR__PATIENT_RECORD),\n    WEISS_FIRE_NOTES(ItemID.WEISS_FIRE_NOTES),\n    YEWNOCKS_NOTES(ItemID.YEWNOCKS_NOTES);\n\n    private final int itemID;\n    @Getter\n    private final String location \u003d \"Bookcase\";\n\n    @Getter\n    private final boolean isBis;\n\n    Bookcase(int itemID)\n    {\n        this.itemID \u003d itemID;\n        this.isBis \u003d false;\n    }\n}\n","filePath":"src\\main\\java\\com\\wastedbankspace\\model\\locations\\Bookcase.java"},{"fileName":"CapeRack.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace.model.locations;\n\nimport com.wastedbankspace.model.StorableItem;\nimport lombok.Getter;\nimport net.runelite.api.ItemID;\n\n@Getter\npublic enum CapeRack implements StorableItem {\n    ACHIEVEMENT_DIARY_HOOD(ItemID.ACHIEVEMENT_DIARY_HOOD),\n    ACHIEVEMENT_DIARY_CAPE(ItemID.ACHIEVEMENT_DIARY_CAPE, true),\n    ACHIEVEMENT_DIARY_CAPE_T(ItemID.ACHIEVEMENT_DIARY_CAPE_T, true),\n    AGILITY_HOOD(ItemID.AGILITY_HOOD),\n    AGILITY_CAPE(ItemID.AGILITY_CAPE, true),\n    AGILITY_CAPET(ItemID.AGILITY_CAPET, true),\n    ATTACK_HOOD(ItemID.ATTACK_HOOD),\n    ATTACK_CAPE(ItemID.ATTACK_CAPE, true),\n    ATTACK_CAPET(ItemID.ATTACK_CAPET, true),\n    CHAMPIONS_CAPE(ItemID.CHAMPIONS_CAPE, true),\n    CONSTRUCT_HOOD(ItemID.CONSTRUCT_HOOD),\n    CONSTRUCT_CAPE(ItemID.CONSTRUCT_CAPE, true),\n    CONSTRUCT_CAPET(ItemID.CONSTRUCT_CAPET, true),\n    COOKING_HOOD(ItemID.COOKING_HOOD),\n    COOKING_CAPE(ItemID.COOKING_CAPE, true),\n    COOKING_CAPET(ItemID.COOKING_CAPET, true),\n    CRAFTING_HOOD(ItemID.CRAFTING_HOOD),\n    CRAFTING_CAPE(ItemID.CRAFTING_CAPE, true),\n    CRAFTING_CAPET(ItemID.CRAFTING_CAPET, true),\n    DEFENCE_HOOD(ItemID.DEFENCE_HOOD),\n    DEFENCE_CAPE(ItemID.DEFENCE_CAPE, true),\n    DEFENCE_CAPET(ItemID.DEFENCE_CAPET, true),\n    FARMING_HOOD(ItemID.FARMING_HOOD),\n    FARMING_CAPE(ItemID.FARMING_CAPE, true),\n    FARMING_CAPET(ItemID.FARMING_CAPET, true),\n    FIRE_CAPE(ItemID.FIRE_CAPE, true),\n    // Trouver parchmented Fire cape; can be store alongside regular fire cape\n    FIRE_CAPE_L(ItemID.FIRE_CAPE_L, true),\n    FIREMAKING_HOOD(ItemID.FIREMAKING_HOOD),\n    FIREMAKING_CAPE(ItemID.FIREMAKING_CAPE, true),\n    FIREMAKING_CAPET(ItemID.FIREMAKING_CAPET, true),\n    FISHING_HOOD(ItemID.FISHING_HOOD),\n    FISHING_CAPE(ItemID.FISHING_CAPE, true),\n    FISHING_CAPET(ItemID.FISHING_CAPET, true),\n    FLETCHING_HOOD(ItemID.FLETCHING_HOOD),\n    FLETCHING_CAPE(ItemID.FLETCHING_CAPE, true),\n    FLETCHING_CAPET(ItemID.FLETCHING_CAPET, true),\n    GAUNTLET_CAPE(ItemID.GAUNTLET_CAPE),\n    HERBLORE_HOOD(ItemID.HERBLORE_HOOD),\n    HERBLORE_CAPE(ItemID.HERBLORE_CAPE, true),\n    HERBLORE_CAPET(ItemID.HERBLORE_CAPET, true),\n    HITPOINTS_HOOD(ItemID.HITPOINTS_HOOD),\n    HITPOINTS_CAPE(ItemID.HITPOINTS_CAPE, true),\n    HITPOINTS_CAPET(ItemID.HITPOINTS_CAPET, true),\n    HUNTER_HOOD_PoHCapeRack(ItemID.HUNTER_HOOD),\n    HUNTER_CAPE_PoHCapeRack(ItemID.HUNTER_CAPE, true),\n    HUNTER_CAPET_PoHCapeRack(ItemID.HUNTER_CAPET, true),\n    ICTHLARINS_SHROUD_TIER_1(ItemID.ICTHLARINS_SHROUD_TIER_1),\n    ICTHLARINS_SHROUD_TIER_2(ItemID.ICTHLARINS_SHROUD_TIER_2),\n    ICTHLARINS_SHROUD_TIER_3(ItemID.ICTHLARINS_SHROUD_TIER_3),\n    ICTHLARINS_SHROUD_TIER_4(ItemID.ICTHLARINS_SHROUD_TIER_4),\n    ICTHLARINS_SHROUD_TIER_5(ItemID.ICTHLARINS_SHROUD_TIER_5),\n    INFERNAL_CAPE(ItemID.INFERNAL_CAPE, true),\n    INFERNAL_CAPE_L(ItemID.INFERNAL_CAPE_L, true), // trouver parchmented\n    CAPE_OF_LEGENDS(ItemID.CAPE_OF_LEGENDS),\n    GUTHIX_CAPE(ItemID.GUTHIX_CAPE),\n    IMBUED_GUTHIX_CAPE(ItemID.IMBUED_GUTHIX_CAPE, true),\n    IMBUED_GUTHIX_CAPE_L(ItemID.IMBUED_GUTHIX_CAPE_L, true), // trouver parchmented\n    IMBUED_GUTHIX_CAPE_DEADMAN(ItemID.IMBUED_GUTHIX_CAPE_DEADMAN, true),\n    SARADOMIN_CAPE(ItemID.SARADOMIN_CAPE),\n    IMBUED_SARADOMIN_CAPE(ItemID.IMBUED_SARADOMIN_CAPE, true),\n    IMBUED_SARADOMIN_CAPE_L(ItemID.IMBUED_SARADOMIN_CAPE_L, true), // trouver parchmented\n    IMBUED_SARADOMIN_CAPE_DEADMAN(ItemID.IMBUED_SARADOMIN_CAPE_DEADMAN, true),\n    ZAMORAK_CAPE(ItemID.ZAMORAK_CAPE),\n    IMBUED_ZAMORAK_CAPE(ItemID.IMBUED_ZAMORAK_CAPE, true),\n    IMBUED_ZAMORAK_CAPE_L(ItemID.IMBUED_ZAMORAK_CAPE_L, true), // trouver parchmented\n    IMBUED_ZAMORAK_CAPE_DEADMAN(ItemID.IMBUED_ZAMORAK_CAPE_DEADMAN, true),\n    MAGIC_HOOD(ItemID.MAGIC_HOOD),\n    MAGIC_CAPE(ItemID.MAGIC_CAPE, true),\n    MAGIC_CAPET(ItemID.MAGIC_CAPET, true),\n    // MAX CAPES\n    MAX_HOOD(ItemID.MAX_HOOD),\n    MAX_CAPE(ItemID.MAX_CAPE, true),\n    ARDOUGNE_MAX_HOOD(ItemID.ARDOUGNE_MAX_HOOD),\n    ARDOUGNE_MAX_CAPE(ItemID.ARDOUGNE_MAX_CAPE, true),\n    ACCUMULATOR_MAX_HOOD(ItemID.ACCUMULATOR_MAX_HOOD),\n    ACCUMULATOR_MAX_CAPE(ItemID.ACCUMULATOR_MAX_CAPE, true),\n    ASSEMBLER_MAX_HOOD(ItemID.ASSEMBLER_MAX_HOOD),\n    ASSEMBLER_MAX_CAPE(ItemID.ASSEMBLER_MAX_CAPE, true),\n    ASSEMBLER_MAX_CAPE_L(ItemID.ASSEMBLER_MAX_CAPE_L, true), // trouver parchmented\n    DIZANAS_MAX_HOOD(ItemID.DIZANAS_MAX_HOOD),\n    DIZANAS_MAX_CAPE(ItemID.DIZANAS_MAX_CAPE, true),\n    FIRE_MAX_HOOD(ItemID.FIRE_MAX_HOOD),\n    FIRE_MAX_CAPE(ItemID.FIRE_MAX_CAPE, true),\n    FIRE_MAX_CAPE_L(ItemID.FIRE_MAX_CAPE_L, true), // trouver parchmented\n    INFERNAL_MAX_HOOD(ItemID.INFERNAL_MAX_HOOD),\n    INFERNAL_MAX_CAPE(ItemID.INFERNAL_MAX_CAPE, true),\n    INFERNAL_MAX_CAPE_L(ItemID.INFERNAL_MAX_CAPE_L, true), // trouver parchmented\n    IMBUED_GUTHIX_MAX_HOOD(ItemID.IMBUED_GUTHIX_MAX_HOOD),\n    IMBUED_GUTHIX_MAX_CAPE(ItemID.IMBUED_GUTHIX_MAX_CAPE, true),\n    IMBUED_GUTHIX_MAX_CAPE_L(ItemID.IMBUED_GUTHIX_MAX_CAPE_L, true), // trouver parchmented\n    IMBUED_SARADOMIN_MAX_HOOD(ItemID.IMBUED_SARADOMIN_MAX_HOOD),\n    IMBUED_SARADOMIN_MAX_CAPE(ItemID.IMBUED_SARADOMIN_MAX_CAPE, true),\n    IMBUED_SARADOMIN_MAX_CAPE_L(ItemID.IMBUED_SARADOMIN_MAX_CAPE_L, true), // trouver parchmented\n    IMBUED_ZAMORAK_MAX_HOOD(ItemID.IMBUED_ZAMORAK_MAX_HOOD),\n    IMBUED_ZAMORAK_MAX_CAPE(ItemID.IMBUED_ZAMORAK_MAX_CAPE, true),\n    IMBUED_ZAMORAK_MAX_CAPE_L(ItemID.IMBUED_ZAMORAK_MAX_CAPE_L, true), // trouver parchmented\n    MASORI_ASSEMBLER_MAX_HOOD(ItemID.MASORI_ASSEMBLER_MAX_HOOD),\n    MASORI_ASSEMBLER_MAX_CAPE(ItemID.MASORI_ASSEMBLER_MAX_CAPE, true),\n    MASORI_ASSEMBLER_MAX_CAPE_L(ItemID.MASORI_ASSEMBLER_MAX_CAPE_L, true), // trouver parchmented\n    MYTHICAL_MAX_HOOD(ItemID.MYTHICAL_MAX_HOOD),\n    MYTHICAL_MAX_CAPE(ItemID.MYTHICAL_MAX_CAPE, true),\n    GUTHIX_MAX_HOOD(ItemID.GUTHIX_MAX_HOOD),\n    GUTHIX_MAX_CAPE(ItemID.GUTHIX_MAX_CAPE, true),\n    SARADOMIN_MAX_HOOD_MAX_CAPE(ItemID.SARADOMIN_MAX_HOOD),\n    SARADOMIN_MAX_CAPE(ItemID.SARADOMIN_MAX_CAPE, true),\n    ZAMORAK_MAX_HOOD(ItemID.ZAMORAK_MAX_HOOD),\n    ZAMORAK_MAX_CAPE(ItemID.ZAMORAK_MAX_CAPE, true),\n\n    MINING_HOOD(ItemID.MINING_HOOD),\n    MINING_CAPE(ItemID.MINING_CAPE, true),\n    MINING_CAPET(ItemID.MINING_CAPET, true),\n    MUSIC_HOOD(ItemID.MUSIC_HOOD),\n    MUSIC_CAPE(ItemID.MUSIC_CAPE, true),\n    MUSIC_CAPET(ItemID.MUSIC_CAPET, true),\n    MYTHICAL_CAPE(ItemID.MYTHICAL_CAPE, true),\n    OBSIDIAN_CAPE(ItemID.OBSIDIAN_CAPE),\n    PRAYER_HOOD(ItemID.PRAYER_HOOD),\n    PRAYER_CAPE(ItemID.PRAYER_CAPE, true),\n    PRAYER_CAPET(ItemID.PRAYER_CAPET, true),\n    QUEST_POINT_HOOD(ItemID.QUEST_POINT_HOOD),\n    QUEST_POINT_CAPE(ItemID.QUEST_POINT_CAPE, true),\n    QUEST_POINT_CAPE_T(ItemID.QUEST_POINT_CAPE_T, true),\n    RANGING_HOOD(ItemID.RANGING_HOOD),\n    RANGING_CAPE(ItemID.RANGING_CAPE, true),\n    RANGING_CAPET(ItemID.RANGING_CAPET, true),\n    RUNECRAFT_HOOD(ItemID.RUNECRAFT_HOOD),\n    RUNECRAFT_CAPE(ItemID.RUNECRAFT_CAPE, true),\n    RUNECRAFT_CAPET(ItemID.RUNECRAFT_CAPET, true),\n    SINHAZA_SHROUD_TIER_1(ItemID.SINHAZA_SHROUD_TIER_1),\n    SINHAZA_SHROUD_TIER_2(ItemID.SINHAZA_SHROUD_TIER_2),\n    SINHAZA_SHROUD_TIER_3(ItemID.SINHAZA_SHROUD_TIER_3),\n    SINHAZA_SHROUD_TIER_4(ItemID.SINHAZA_SHROUD_TIER_4),\n    SINHAZA_SHROUD_TIER_5(ItemID.SINHAZA_SHROUD_TIER_5),\n    SLAYER_HOOD(ItemID.SLAYER_HOOD),\n    SLAYER_CAPE(ItemID.SLAYER_CAPE, true),\n    SLAYER_CAPET(ItemID.SLAYER_CAPET, true),\n    SMITHING_HOOD(ItemID.SMITHING_HOOD),\n    SMITHING_CAPE(ItemID.SMITHING_CAPE, true),\n    SMITHING_CAPET(ItemID.SMITHING_CAPET, true),\n    SOUL_CAPE(ItemID.SOUL_CAPE),\n    SOUL_CAPE_25346(ItemID.SOUL_CAPE_25346),\n    SPOTTED_CAPE(ItemID.SPOTTED_CAPE),\n    SPOTTIER_CAPE(ItemID.SPOTTIER_CAPE),\n    STRENGTH_HOOD(ItemID.STRENGTH_HOOD),\n    STRENGTH_CAPE(ItemID.STRENGTH_CAPE, true),\n    STRENGTH_CAPET(ItemID.STRENGTH_CAPET, true),\n    THIEVING_HOOD(ItemID.THIEVING_HOOD),\n    THIEVING_CAPE(ItemID.THIEVING_CAPE, true),\n    THIEVING_CAPET(ItemID.THIEVING_CAPET, true),\n    VICTORS_CAPE_1(ItemID.VICTORS_CAPE_1),\n    VICTORS_CAPE_10(ItemID.VICTORS_CAPE_10),\n    VICTORS_CAPE_50(ItemID.VICTORS_CAPE_50),\n    VICTORS_CAPE_100(ItemID.VICTORS_CAPE_100),\n    VICTORS_CAPE_500(ItemID.VICTORS_CAPE_500),\n    VICTORS_CAPE_1000(ItemID.VICTORS_CAPE_1000),\n    // TEAM CAPE, only one team cape can be stored\n    TEAM1_CAPE(ItemID.TEAM1_CAPE),\n    TEAM2_CAPE(ItemID.TEAM2_CAPE),\n    TEAM3_CAPE(ItemID.TEAM3_CAPE),\n    TEAM4_CAPE(ItemID.TEAM4_CAPE),\n    TEAM5_CAPE(ItemID.TEAM5_CAPE),\n    TEAM6_CAPE(ItemID.TEAM6_CAPE),\n    TEAM7_CAPE(ItemID.TEAM7_CAPE),\n    TEAM8_CAPE(ItemID.TEAM8_CAPE),\n    TEAM9_CAPE(ItemID.TEAM9_CAPE),\n    TEAM10_CAPE(ItemID.TEAM10_CAPE),\n    TEAM11_CAPE(ItemID.TEAM11_CAPE),\n    TEAM12_CAPE(ItemID.TEAM12_CAPE),\n    TEAM13_CAPE(ItemID.TEAM13_CAPE),\n    TEAM14_CAPE(ItemID.TEAM14_CAPE),\n    TEAM15_CAPE(ItemID.TEAM15_CAPE),\n    TEAM16_CAPE(ItemID.TEAM16_CAPE),\n    TEAM17_CAPE(ItemID.TEAM17_CAPE),\n    TEAM18_CAPE(ItemID.TEAM18_CAPE),\n    TEAM19_CAPE(ItemID.TEAM19_CAPE),\n    TEAM20_CAPE(ItemID.TEAM20_CAPE),\n    TEAM21_CAPE(ItemID.TEAM21_CAPE),\n    TEAM22_CAPE(ItemID.TEAM22_CAPE),\n    TEAM23_CAPE(ItemID.TEAM23_CAPE),\n    TEAM24_CAPE(ItemID.TEAM24_CAPE),\n    TEAM25_CAPE(ItemID.TEAM25_CAPE),\n    TEAM26_CAPE(ItemID.TEAM26_CAPE),\n    TEAM27_CAPE(ItemID.TEAM27_CAPE),\n    TEAM28_CAPE(ItemID.TEAM28_CAPE),\n    TEAM29_CAPE(ItemID.TEAM29_CAPE),\n    TEAM30_CAPE(ItemID.TEAM30_CAPE),\n    TEAM31_CAPE(ItemID.TEAM31_CAPE),\n    TEAM32_CAPE(ItemID.TEAM32_CAPE),\n    TEAM33_CAPE(ItemID.TEAM33_CAPE),\n    TEAM34_CAPE(ItemID.TEAM34_CAPE),\n    TEAM35_CAPE(ItemID.TEAM35_CAPE),\n    TEAM36_CAPE(ItemID.TEAM36_CAPE),\n    TEAM37_CAPE(ItemID.TEAM37_CAPE),\n    TEAM38_CAPE(ItemID.TEAM38_CAPE),\n    TEAM39_CAPE(ItemID.TEAM39_CAPE),\n    TEAM40_CAPE(ItemID.TEAM40_CAPE),\n    TEAM41_CAPE(ItemID.TEAM41_CAPE),\n    TEAM42_CAPE(ItemID.TEAM42_CAPE),\n    TEAM43_CAPE(ItemID.TEAM43_CAPE),\n    TEAM44_CAPE(ItemID.TEAM44_CAPE),\n    TEAM45_CAPE(ItemID.TEAM45_CAPE),\n    TEAM46_CAPE(ItemID.TEAM46_CAPE),\n    TEAM47_CAPE(ItemID.TEAM47_CAPE),\n    TEAM48_CAPE(ItemID.TEAM48_CAPE),\n    TEAM49_CAPE(ItemID.TEAM49_CAPE),\n    TEAM50_CAPE(ItemID.TEAM50_CAPE),\n\n    TEAM_CAPE_ZERO(ItemID.TEAM_CAPE_ZERO),\n    TEAM_CAPE_I(ItemID.TEAM_CAPE_I),\n    TEAM_CAPE_X(ItemID.TEAM_CAPE_X),\n\n    WOODCUTTING_HOOD(ItemID.WOODCUTTING_HOOD),\n    WOODCUTTING_CAPE_2(ItemID.WOODCUTTING_CAPE, true),\n    WOODCUTTING_CAPE_T(ItemID.WOODCUT_CAPET, true),\n\n    XERICS_CHAMPION(ItemID.XERICS_CHAMPION),\n    XERICS_GENERAL(ItemID.XERICS_GENERAL),\n    XERICS_GUARD(ItemID.XERICS_GUARD),\n    XERICS_SENTINEL(ItemID.XERICS_SENTINEL),\n    XERICS_WARRIOR(ItemID.XERICS_WARRIOR);\n\n    private final int itemID;\n    @Getter\n    private final String location \u003d \"Cape Rack\";\n\n    @Getter\n    private final boolean isBis;\n\n    CapeRack(int itemID) {\n        this.itemID \u003d itemID;\n        this.isBis \u003d false;\n    }\n    CapeRack(int itemID, boolean isBis) {\n        this.itemID \u003d itemID; this.isBis \u003d isBis;\n    }\n}\n","filePath":"src\\main\\java\\com\\wastedbankspace\\model\\locations\\CapeRack.java"},{"fileName":"ElnockInquisitor.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace.model.locations;\n\nimport com.wastedbankspace.model.StorableItem;\nimport lombok.Getter;\nimport net.runelite.api.ItemID;\n\n@Getter\npublic enum ElnockInquisitor implements StorableItem {\n    BUTTERFLY_NET(ItemID.BUTTERFLY_NET),\n    MAGIC_BUTTERFLY_NET(ItemID.MAGIC_BUTTERFLY_NET),\n    IMPLING_JAR(ItemID.IMPLING_JAR),\n    IMP_REPELLENT(ItemID.IMP_REPELLENT);\n    private final int itemID;\n    @Getter\n    private final String location \u003d \"Elnock Inquisitor\";\n    @Getter\n    private final boolean isBis;\n\n    ElnockInquisitor(int itemID) {\n        this.itemID \u003d itemID;\n        this.isBis \u003d false;\n    }\n}","filePath":"src\\main\\java\\com\\wastedbankspace\\model\\locations\\ElnockInquisitor.java"},{"fileName":"FancyDressBox.java","content":"\n/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace.model.locations;\n\nimport com.wastedbankspace.model.StorableItem;\nimport lombok.Getter;\nimport net.runelite.api.ItemID;\n\n@Getter\npublic enum FancyDressBox implements StorableItem {\n    BEEKEEPERS_BOOTS(ItemID.BEEKEEPERS_BOOTS),\n    BEEKEEPERS_GLOVES(ItemID.BEEKEEPERS_GLOVES),\n    BEEKEEPERS_HAT(ItemID.BEEKEEPERS_HAT),\n    BEEKEEPERS_LEGS(ItemID.BEEKEEPERS_LEGS),\n    BEEKEEPERS_TOP(ItemID.BEEKEEPERS_TOP),\n    CAMO_BOTTOMS(ItemID.CAMO_BOTTOMS),\n    CAMO_HELMET(ItemID.CAMO_HELMET),\n    CAMO_TOP(ItemID.CAMO_TOP),\n    FROG_MASK(ItemID.FROG_MASK),\n    ROYAL_FROG_BLOUSE(ItemID.ROYAL_FROG_BLOUSE),\n    ROYAL_FROG_LEGGINGS(ItemID.ROYAL_FROG_LEGGINGS),\n    ROYAL_FROG_SKIRT(ItemID.ROYAL_FROG_SKIRT),\n    ROYAL_FROG_TUNIC(ItemID.ROYAL_FROG_TUNIC),\n    LEDERHOSEN_HAT(ItemID.LEDERHOSEN_HAT),\n    LEDERHOSEN_SHORTS(ItemID.LEDERHOSEN_SHORTS),\n    LEDERHOSEN_TOP(ItemID.LEDERHOSEN_TOP),\n    MIME_BOOTS(ItemID.MIME_BOOTS),\n    MIME_GLOVES(ItemID.MIME_GLOVES),\n    MIME_LEGS(ItemID.MIME_LEGS),\n    MIME_MASK(ItemID.MIME_MASK),\n    MIME_TOP(ItemID.MIME_TOP),\n    SHADE_ROBE(ItemID.SHADE_ROBE),\n    SHADE_ROBE_TOP(ItemID.SHADE_ROBE_TOP),\n    STALE_BAGUETTE(ItemID.STALE_BAGUETTE),\n    ZOMBIE_BOOTS(ItemID.ZOMBIE_BOOTS),\n    ZOMBIE_GLOVES(ItemID.ZOMBIE_GLOVES),\n    ZOMBIE_MASK(ItemID.ZOMBIE_MASK),\n    ZOMBIE_SHIRT(ItemID.ZOMBIE_SHIRT),\n    ZOMBIE_TROUSERS(ItemID.ZOMBIE_TROUSERS);\n\n    private final int itemID;\n    @Getter\n    private final String location \u003d \"Fancy Dress Box\";\n    @Getter\n    private final boolean isBis;\n\n    FancyDressBox(int itemID) {\n        this.itemID \u003d itemID;\n        this.isBis \u003d false;\n    }\n}\n","filePath":"src\\main\\java\\com\\wastedbankspace\\model\\locations\\FancyDressBox.java"},{"fileName":"FlamtaerBag.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace.model.locations;\n\nimport com.wastedbankspace.model.StorableItem;\nimport lombok.Getter;\nimport net.runelite.api.ItemID;\n\n@Getter\npublic enum FlamtaerBag implements StorableItem {\n    TIMBER_BEAMS(ItemID.TIMBER_BEAM),\n    LIMESTONE_BRICK(ItemID.LIMESTONE_BRICK),\n    SWAMP_PASTE(ItemID.SWAMP_PASTE);\n\n    private final int itemID;\n    @Getter\n    private final String location \u003d \"Flamtaer Bag\";\n    @Getter\n    private final boolean isBis;\n\n    FlamtaerBag(int itemID) {\n        this.itemID \u003d itemID;\n        this.isBis \u003d false;\n    }\n}","filePath":"src\\main\\java\\com\\wastedbankspace\\model\\locations\\FlamtaerBag.java"},{"fileName":"ForestryKit.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace.model.locations;\n\nimport com.wastedbankspace.model.StorableItem;\nimport lombok.Getter;\nimport net.runelite.api.ItemID;\n\n@Getter\npublic enum ForestryKit implements StorableItem {\n    ANIMAINFUSED_BARK(ItemID.ANIMAINFUSED_BARK),\n    FORESTERS_RATION(ItemID.FORESTERS_RATION),\n    SECATEURS_ATTACHMENT(ItemID.SECATEURS_ATTACHMENT),\n    NATURE_OFFERINGS(ItemID.NATURE_OFFERINGS),\n    WOODCUTTING_CAPE(ItemID.WOODCUTTING_CAPE),\n    LUMBERJACK_TOP(ItemID.LUMBERJACK_TOP),\n    LUMBERJACK_HAT(ItemID.LUMBERJACK_HAT),\n    LUMBERJACK_BOOTS(ItemID.LUMBERJACK_BOOTS),\n    LUMBERJACK_LEGS(ItemID.LUMBERJACK_LEGS),\n    FORESTRY_TOP(ItemID.FORESTRY_TOP),\n    FORESTRY_HAT(ItemID.FORESTRY_HAT),\n    FORESTRY_BOOTS(ItemID.FORESTRY_BOOTS),\n    FORESTRY_LEGS(ItemID.FORESTRY_LEGS),\n    BEE_ON_A_STICK(ItemID.BEE_ON_A_STICK),\n    LEPRECHAUN_CHARM(ItemID.LEPRECHAUN_CHARM),\n    PADDED_SPOON(ItemID.PADDED_SPOON),\n    PETAL_CIRCLET(ItemID.PETAL_CIRCLET),\n    SMOKER_CANISTER(ItemID.SMOKER_CANISTER),\n    TRAP_DISARMER(ItemID.TRAP_DISARMER),\n    MAGIC_LEAVES(ItemID.MAGIC_LEAVES),\n    YEW_LEAVES(ItemID.YEW_LEAVES),\n    MAPLE_LEAVES(ItemID.MAPLE_LEAVES),\n    WILLOW_LEAVES(ItemID.WILLOW_LEAVES),\n    OAK_LEAVES(ItemID.OAK_LEAVES),\n    LEAVES(ItemID.LEAVES);\n\n    private final int itemID;\n    @Getter\n    private final String location \u003d \"Forestry Kit\";\n    @Getter\n    private final boolean isBis;\n\n    ForestryKit(int itemID) {\n        this.itemID \u003d itemID;\n        this.isBis \u003d false;\n    }\n}\n","filePath":"src\\main\\java\\com\\wastedbankspace\\model\\locations\\ForestryKit.java"},{"fileName":"FossilStorage.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace.model.locations;\n\nimport com.wastedbankspace.model.StorableItem;\nimport lombok.Getter;\nimport net.runelite.api.ItemID;\n\n@Getter\npublic enum FossilStorage implements StorableItem {\n    UNIDENTIFIED_SMALL_FOSSIL(ItemID.UNIDENTIFIED_SMALL_FOSSIL),\n    SMALL_FOSSILISED_LIMBS(ItemID.SMALL_FOSSILISED_LIMBS),\n    SMALL_FOSSILISED_SPINE(ItemID.SMALL_FOSSILISED_SPINE),\n    SMALL_FOSSILISED_RIBS(ItemID.SMALL_FOSSILISED_RIBS),\n    SMALL_FOSSILISED_PELVIS(ItemID.SMALL_FOSSILISED_PELVIS),\n    SMALL_FOSSILISED_SKULL(ItemID.SMALL_FOSSILISED_SKULL),\n    UNIDENTIFIED_MEDIUM_FOSSIL(ItemID.UNIDENTIFIED_MEDIUM_FOSSIL),\n    MEDIUM_FOSSILISED_LIMBS(ItemID.MEDIUM_FOSSILISED_LIMBS),\n    MEDIUM_FOSSILISED_SPINE(ItemID.MEDIUM_FOSSILISED_SPINE),\n    MEDIUM_FOSSILISED_RIBS(ItemID.MEDIUM_FOSSILISED_RIBS),\n    MEDIUM_FOSSILISED_PELVIS(ItemID.MEDIUM_FOSSILISED_PELVIS),\n    MEDIUM_FOSSILISED_SKULL(ItemID.MEDIUM_FOSSILISED_SKULL),\n    UNIDENTIFIED_LARGE_FOSSIL(ItemID.UNIDENTIFIED_LARGE_FOSSIL),\n    LARGE_FOSSILISED_LIMBS(ItemID.LARGE_FOSSILISED_LIMBS),\n    LARGE_FOSSILISED_SPINE(ItemID.LARGE_FOSSILISED_SPINE),\n    LARGE_FOSSILISED_RIBS(ItemID.LARGE_FOSSILISED_RIBS),\n    LARGE_FOSSILISED_PELVIS(ItemID.LARGE_FOSSILISED_PELVIS),\n    LARGE_FOSSILISED_SKULL(ItemID.LARGE_FOSSILISED_SKULL),\n    FOSSILISED_ROOTS(ItemID.FOSSILISED_ROOTS),\n    FOSSILISED_STUMP(ItemID.FOSSILISED_STUMP),\n    FOSSILISED_BRANCH(ItemID.FOSSILISED_BRANCH),\n    FOSSILISED_LEAF(ItemID.FOSSILISED_LEAF),\n    FOSSILISED_MUSHROOM(ItemID.FOSSILISED_MUSHROOM),\n    UNIDENTIFIED_RARE_FOSSIL(ItemID.UNIDENTIFIED_RARE_FOSSIL),\n    RARE_FOSSILISED_LIMBS(ItemID.RARE_FOSSILISED_LIMBS),\n    RARE_FOSSILISED_PELVIS(ItemID.RARE_FOSSILISED_PELVIS),\n    RARE_FOSSILISED_RIBS(ItemID.RARE_FOSSILISED_RIBS),\n    RARE_FOSSILISED_SKULL(ItemID.RARE_FOSSILISED_SKULL),\n    RARE_FOSSILISED_SPINE(ItemID.RARE_FOSSILISED_SPINE),\n    RARE_FOSSILISED_TUSK(ItemID.RARE_FOSSILISED_TUSK);\n\n    private final int itemID;\n    @Getter\n    private final String location \u003d \"Fossil Storage\";\n    @Getter\n    private final boolean isBis;\n\n    FossilStorage(int itemID) {\n        this.itemID \u003d itemID;\n        this.isBis \u003d false;\n    }\n}\n","filePath":"src\\main\\java\\com\\wastedbankspace\\model\\locations\\FossilStorage.java"},{"fileName":"HuntsmansKit.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace.model.locations;\n\nimport com.wastedbankspace.model.StorableItem;\nimport lombok.Getter;\nimport net.runelite.api.ItemID;\n\n@Getter\npublic enum HuntsmansKit implements StorableItem {\n    BIRD_SNARE(ItemID.BIRD_SNARE),\n    NOOSE_WAND(ItemID.NOOSE_WAND),\n    BUTTERFLY_NET_(ItemID.BUTTERFLY_NET),\n    MAGIC_BUTTERFLY_NET_(ItemID.MAGIC_BUTTERFLY_NET),\n    BUTTERFLY_JAR_(ItemID.BUTTERFLY_JAR),\n    BOX_TRAP(ItemID.BOX_TRAP),\n    RABBIT_SNARE(ItemID.RABBIT_SNARE),\n    UNLIT_TORCH(ItemID.UNLIT_TORCH),\n    SMALL_FISHING_NET_(ItemID.SMALL_FISHING_NET),\n    ROPE(ItemID.ROPE),\n    MAGIC_BOX(ItemID.MAGIC_BOX),\n    IMPINABOX1(ItemID.IMPINABOX1),\n    IMPINABOX2(ItemID.IMPINABOX2),\n    TEASING_STICK(ItemID.TEASING_STICK),\n    HUNTERS_SPEAR(ItemID.HUNTERS_SPEAR),\n    WOOD_CAMO_TOP_(ItemID.WOOD_CAMO_TOP),\n    WOOD_CAMO_LEGS_(ItemID.WOOD_CAMO_LEGS),\n    POLAR_CAMO_TOP_(ItemID.POLAR_CAMO_TOP),\n    POLAR_CAMO_LEGS_(ItemID.POLAR_CAMO_LEGS),\n    JUNGLE_CAMO_TOP_(ItemID.JUNGLE_CAMO_TOP),\n    JUNGLE_CAMO_LEGS_(ItemID.JUNGLE_CAMO_LEGS),\n    DESERT_CAMO_TOP_(ItemID.DESERT_CAMO_TOP),\n    DESERT_CAMO_LEGS_(ItemID.DESERT_CAMO_LEGS),\n    LARUPIA_HAT_(ItemID.LARUPIA_HAT),\n    LARUPIA_TOP_(ItemID.LARUPIA_TOP),\n    LARUPIA_LEGS_(ItemID.LARUPIA_LEGS),\n    GRAAKH_HEADDRESS(ItemID.GRAAHK_HEADDRESS),\n    GRAAKH_TOP(ItemID.GRAAHK_TOP),\n    GRAAKH_LEGS(ItemID.GRAAHK_LEGS),\n    KYATT_HAT_(ItemID.KYATT_HAT),\n    KYATT_TOP_(ItemID.KYATT_TOP),\n    KYATT_LEGS_(ItemID.KYATT_LEGS),\n    HUNTER_HOOD(ItemID.HUNTER_HOOD),\n    HUNTER_CAPE(ItemID.HUNTER_CAPE),\n    HUNTER_CAPET(ItemID.HUNTER_CAPET),\n    GUILD_HUNTER_HEADWEAR(ItemID.GUILD_HUNTER_HEADWEAR),\n    GUILD_HUNTER_TOP(ItemID.GUILD_HUNTER_TOP),\n    GUILD_HUNTER_LEGS(ItemID.GUILD_HUNTER_LEGS),\n    GUILD_HUNTER_BOOTS(ItemID.GUILD_HUNTER_BOOTS),\n    RING_OF_PURSUIT(ItemID.RING_OF_PURSUIT),\n    IMPLING_JAR_(ItemID.IMPLING_JAR);\n\n    private final int itemID;\n    @Getter\n    private final String location \u003d \"Huntsman\u0027s Kit\";\n    @Getter\n    private final boolean isBis;\n\n    HuntsmansKit(int itemID) {\n        this.itemID \u003d itemID;\n        this.isBis \u003d false;\n    }\n}\n","filePath":"src\\main\\java\\com\\wastedbankspace\\model\\locations\\HuntsmansKit.java"},{"fileName":"MagicWardrobe.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace.model.locations;\n\nimport com.wastedbankspace.model.StorableItem;\nimport lombok.Getter;\nimport net.runelite.api.ItemID;\n\n@Getter\npublic enum MagicWardrobe implements StorableItem {\n    // Amy\u0027s Saw\n    AMYS_SAW(ItemID.AMYS_SAW, true),\n    AMYS_SAW_OFFHAND(ItemID.AMYS_SAW_OFFHAND, true),\n    // Ancestral Robes\n    ANCESTRAL_HAT(ItemID.ANCESTRAL_HAT, true),\n    ANCESTRAL_ROBE_BOTTOM(ItemID.ANCESTRAL_ROBE_BOTTOM, true),\n    ANCESTRAL_ROBE_TOP(ItemID.ANCESTRAL_ROBE_TOP, true),\n    // TwistedAncestral Robes\n    TWISTED_ANCESTRAL_HAT(ItemID.TWISTED_ANCESTRAL_HAT, true),\n    TWISTED_ANCESTRAL_ROBE_BOTTOM(ItemID.TWISTED_ANCESTRAL_ROBE_BOTTOM, true),\n    TWISTED_ANCESTRAL_ROBE_TOP(ItemID.TWISTED_ANCESTRAL_ROBE_TOP, true),\n    // Ancient ceremonial robes\n    ANCIENT_CEREMONIAL_BOOTS(ItemID.ANCIENT_CEREMONIAL_BOOTS),\n    ANCIENT_CEREMONIAL_GLOVES(ItemID.ANCIENT_CEREMONIAL_GLOVES),\n    ANCIENT_CEREMONIAL_LEGS(ItemID.ANCIENT_CEREMONIAL_LEGS),\n    ANCIENT_CEREMONIAL_MASK(ItemID.ANCIENT_CEREMONIAL_MASK),\n    ANCIENT_CEREMONIAL_TOP(ItemID.ANCIENT_CEREMONIAL_TOP),\n    // Bloodbark armour\n    BLOODBARK_BODY(ItemID.BLOODBARK_BODY),\n    BLOODBARK_BOOTS(ItemID.BLOODBARK_BOOTS),\n    BLOODBARK_GAUNTLETS(ItemID.BLOODBARK_GAUNTLETS),\n    BLOODBARK_HELM(ItemID.BLOODBARK_HELM),\n    BLOODBARK_LEGS(ItemID.BLOODBARK_LEGS),\n    // Bounty hunter hats\n    BOUNTY_HUNTER_HAT_TIER_1(ItemID.BOUNTY_HUNTER_HAT_TIER_1),\n    BOUNTY_HUNTER_HAT_TIER_2(ItemID.BOUNTY_HUNTER_HAT_TIER_2),\n    BOUNTY_HUNTER_HAT_TIER_3(ItemID.BOUNTY_HUNTER_HAT_TIER_3),\n    BOUNTY_HUNTER_HAT_TIER_4(ItemID.BOUNTY_HUNTER_HAT_TIER_4),\n    BOUNTY_HUNTER_HAT_TIER_5(ItemID.BOUNTY_HUNTER_HAT_TIER_5),\n    BOUNTY_HUNTER_HAT_TIER_6(ItemID.BOUNTY_HUNTER_HAT_TIER_6),\n    BRUMA_TORCH(ItemID.BRUMA_TORCH),\n    BRUMA_TORCH_OFFHAND(ItemID.BRUMA_TORCH_OFFHAND),\n    // Carpenter outfit\n    CARPENTERS_BOOTS(ItemID.CARPENTERS_BOOTS),\n    CARPENTERS_HELMET(ItemID.CARPENTERS_HELMET),\n    CARPENTERS_SHIRT(ItemID.CARPENTERS_SHIRT),\n    CARPENTERS_TROUSERS(ItemID.CARPENTERS_TROUSERS),\n    // Dagon\u0027hai robes\n    DAGONHAI_HAT(ItemID.DAGONHAI_HAT),\n    DAGONHAI_ROBE_TOP(ItemID.DAGONHAI_ROBE_TOP),\n    DAGONHAI_ROBE_BOTTOM(ItemID.DAGONHAI_ROBE_BOTTOM),\n    // Dark flippers\n    DARK_FLIPPERS_MAGIC_WARDROBE(ItemID.DARK_FLIPPERS),\n    // Dark Squall robes\n    DARK_SQUALL_HOOD(ItemID.DARK_SQUALL_HOOD),\n    DARK_SQUALL_ROBE_TOP(ItemID.DARK_SQUALL_ROBE_TOP),\n    DARK_SQUALL_ROBE_BOTTOM(ItemID.DARK_SQUALL_ROBE_BOTTOM),\n    // Elder chaos robes\n    ELDER_CHAOS_HOOD(ItemID.ELDER_CHAOS_HOOD),\n    ELDER_CHAOS_ROBE(ItemID.ELDER_CHAOS_ROBE),\n    ELDER_CHAOS_TOP(ItemID.ELDER_CHAOS_TOP),\n    // Elder chaos robes (ornate)\n    ELDER_CHAOS_TOP_OR(ItemID.ELDER_CHAOS_TOP_OR),\n    ELDER_CHAOS_ROBE_OR(ItemID.ELDER_CHAOS_ROBE_OR),\n    ELDER_CHAOS_HOOD_OR(ItemID.ELDER_CHAOS_HOOD_OR),\n    // Evil chicken outfit\n    EVIL_CHICKEN_FEET(ItemID.EVIL_CHICKEN_FEET),\n    EVIL_CHICKEN_HEAD(ItemID.EVIL_CHICKEN_HEAD),\n    EVIL_CHICKEN_LEGS(ItemID.EVIL_CHICKEN_LEGS),\n    EVIL_CHICKEN_WINGS(ItemID.EVIL_CHICKEN_WINGS),\n    // Fish sack\n    FISH_SACK(ItemID.FISH_SACK),\n    FISH_SACK_BARREL(ItemID.FISH_SACK_BARREL, true),\n    OPEN_FISH_SACK_BARREL(ItemID.OPEN_FISH_SACK_BARREL, true),\n    // Trouble Brewing flags, ordered by item id\n    CUTTHROAT_FLAG(ItemID.CUTTHROAT_FLAG),\n    GILDED_SMILE_FLAG(ItemID.GILDED_SMILE_FLAG),\n    BRONZE_FIST_FLAG(ItemID.BRONZE_FIST_FLAG),\n    LUCKY_SHOT_FLAG(ItemID.LUCKY_SHOT_FLAG),\n    TREASURE_FLAG(ItemID.TREASURE_FLAG),\n    PHASMATYS_FLAG(ItemID.PHASMATYS_FLAG),\n    // Varlamore Totems\n    FLETCHING_KNIFE(ItemID.FLETCHING_KNIFE, true),\n    // Forestry Kit, Forestry Basket\n    FORESTRY_KIT(ItemID.FORESTRY_KIT, true),\n    FORESTRY_BASKET(ItemID.FORESTRY_BASKET, true),\n    OPEN_FORESTRY_BASKET(ItemID.OPEN_FORESTRY_BASKET, true),\n    // Ghostly robes\n    GHOSTLY_BOOTS(ItemID.GHOSTLY_BOOTS),\n    GHOSTLY_CLOAK(ItemID.GHOSTLY_CLOAK),\n    GHOSTLY_HOOD(ItemID.GHOSTLY_HOOD),\n    GHOSTLY_ROBE(ItemID.GHOSTLY_ROBE),\n    GHOSTLY_GLOVES(ItemID.GHOSTLY_GLOVES),\n    GHOSTLY_ROBE_6108(ItemID.GHOSTLY_ROBE_6108),\n    // Golden tench\n    GOLDEN_TENCH(ItemID.GOLDEN_TENCH),\n    // Graceful\n    // Greenman masks\n    GREENMAN_MASK(ItemID.GREENMAN_MASK),\n    GREENMAN_MASK_NORMAL(ItemID.GREENMAN_MASK_NORMAL),\n    GREENMAN_MASK_OAK(ItemID.GREENMAN_MASK_OAK),\n    GREENMAN_MASK_WILLOW(ItemID.GREENMAN_MASK_WILLOW),\n    GREENMAN_MASK_MAPLE(ItemID.GREENMAN_MASK_MAPLE),\n    GREENMAN_MASK_YEW(ItemID.GREENMAN_MASK_YEW),\n    GREENMAN_MASK_MAGIC(ItemID.GREENMAN_MASK_MAGIC),\n    IMCANDO_HAMMER(ItemID.IMCANDO_HAMMER, true),\n    IMCANDO_HAMMER_OFFHAND(ItemID.IMCANDO_HAMMER_OFFHAND, true),\n    INFINITY_BOOTS(ItemID.INFINITY_BOOTS),\n    INFINITY_BOTTOMS(ItemID.INFINITY_BOTTOMS),\n    INFINITY_HAT(ItemID.INFINITY_HAT),\n    INFINITY_TOP(ItemID.INFINITY_TOP),\n    INFINITY_GLOVES(ItemID.INFINITY_GLOVES),\n    DARK_INFINITY_BOTTOMS(ItemID.DARK_INFINITY_BOTTOMS),\n    DARK_INFINITY_HAT(ItemID.DARK_INFINITY_HAT),\n    DARK_INFINITY_TOP(ItemID.DARK_INFINITY_TOP),\n    LIGHT_INFINITY_BOTTOMS(ItemID.LIGHT_INFINITY_BOTTOMS),\n    LIGHT_INFINITY_HAT(ItemID.LIGHT_INFINITY_HAT),\n    LIGHT_INFINITY_TOP(ItemID.LIGHT_INFINITY_TOP),\n    // Log basket\n    LOG_BASKET(ItemID.LOG_BASKET, true),\n    OPEN_LOG_BASKET(ItemID.OPEN_LOG_BASKET, true),\n    // Lunar equipment\n    LUNAR_HELM(ItemID.LUNAR_HELM),\n    LUNAR_CAPE(ItemID.LUNAR_CAPE),\n    LUNAR_AMULET(ItemID.LUNAR_AMULET),\n    LUNAR_BOOTS(ItemID.LUNAR_BOOTS),\n    LUNAR_GLOVES(ItemID.LUNAR_GLOVES),\n    LUNAR_LEGS(ItemID.LUNAR_LEGS),\n    LUNAR_RING(ItemID.LUNAR_RING),\n    LUNAR_TORSO(ItemID.LUNAR_TORSO),\n    // Tombs of Amascut\n    MASK_OF_REBIRTH(ItemID.MASK_OF_REBIRTH),\n    // Moonclan robes\n    MOONCLAN_HELM(ItemID.MOONCLAN_HELM),\n    MOONCLAN_CAPE(ItemID.MOONCLAN_CAPE),\n    MOONCLAN_BOOTS(ItemID.MOONCLAN_BOOTS),\n    MOONCLAN_GLOVES(ItemID.MOONCLAN_GLOVES),\n    MOONCLAN_ARMOUR(ItemID.MOONCLAN_ARMOUR),\n    MOONCLAN_SKIRT(ItemID.MOONCLAN_SKIRT),\n    // Mudskipper kit\n    MUDSKIPPER_HAT(ItemID.MUDSKIPPER_HAT),\n    FLIPPERS_MAGIC_WARDROBE(ItemID.FLIPPERS),\n    // Mystic robes\n    MYSTIC_BOOTS(ItemID.MYSTIC_BOOTS),\n    MYSTIC_HAT(ItemID.MYSTIC_HAT),\n    MYSTIC_ROBE_BOTTOM(ItemID.MYSTIC_ROBE_BOTTOM),\n    MYSTIC_ROBE_TOP(ItemID.MYSTIC_ROBE_TOP),\n    MYSTIC_GLOVES(ItemID.MYSTIC_GLOVES),\n    MYSTIC_BOOTS_DARK(ItemID.MYSTIC_BOOTS_DARK),\n    MYSTIC_HAT_DARK(ItemID.MYSTIC_HAT_DARK),\n    MYSTIC_ROBE_BOTTOM_DARK(ItemID.MYSTIC_ROBE_BOTTOM_DARK),\n    MYSTIC_ROBE_TOP_DARK(ItemID.MYSTIC_ROBE_TOP_DARK),\n    MYSTIC_GLOVES_DARK(ItemID.MYSTIC_GLOVES_DARK),\n    MYSTIC_BOOTS_LIGHT(ItemID.MYSTIC_BOOTS_LIGHT),\n    MYSTIC_HAT_LIGHT(ItemID.MYSTIC_HAT_LIGHT),\n    MYSTIC_ROBE_BOTTOM_LIGHT(ItemID.MYSTIC_ROBE_BOTTOM_LIGHT),\n    MYSTIC_ROBE_TOP_LIGHT(ItemID.MYSTIC_ROBE_TOP_LIGHT),\n    MYSTIC_GLOVES_LIGHT(ItemID.MYSTIC_GLOVES_LIGHT),\n    MYSTIC_BOOTS_DUSK(ItemID.MYSTIC_BOOTS_DUSK),\n    MYSTIC_HAT_DUSK(ItemID.MYSTIC_HAT_DUSK),\n    MYSTIC_ROBE_BOTTOM_DUSK(ItemID.MYSTIC_ROBE_BOTTOM_DUSK),\n    MYSTIC_ROBE_TOP_DUSK(ItemID.MYSTIC_ROBE_TOP_DUSK),\n    MYSTIC_GLOVES_DUSK(ItemID.MYSTIC_GLOVES_DUSK),\n    MYSTIC_BOOTS_OR(ItemID.MYSTIC_BOOTS_OR),\n    MYSTIC_HAT_OR(ItemID.MYSTIC_HAT_OR),\n    MYSTIC_ROBE_BOTTOM_OR(ItemID.MYSTIC_ROBE_BOTTOM_OR),\n    MYSTIC_ROBE_TOP_OR(ItemID.MYSTIC_ROBE_TOP_OR),\n    MYSTIC_GLOVES_OR(ItemID.MYSTIC_GLOVES_OR),\n    // Naval outfits\n    BLACK_NAVAL_SHIRT(ItemID.BLACK_NAVAL_SHIRT),\n    BLACK_NAVY_SLACKS(ItemID.BLACK_NAVY_SLACKS),\n    BLACK_TRICORN_HAT(ItemID.BLACK_TRICORN_HAT),\n    BLUE_NAVAL_SHIRT(ItemID.BLUE_NAVAL_SHIRT),\n    BLUE_NAVY_SLACKS(ItemID.BLUE_NAVY_SLACKS),\n    BLUE_TRICORN_HAT(ItemID.BLUE_TRICORN_HAT),\n    BROWN_NAVAL_SHIRT(ItemID.BROWN_NAVAL_SHIRT),\n    BROWN_NAVY_SLACKS(ItemID.BROWN_NAVY_SLACKS),\n    BROWN_TRICORN_HAT(ItemID.BROWN_TRICORN_HAT),\n    GREEN_NAVAL_SHIRT(ItemID.GREEN_NAVAL_SHIRT),\n    GREEN_NAVY_SLACKS(ItemID.GREEN_NAVY_SLACKS),\n    GREEN_TRICORN_HAT(ItemID.GREEN_TRICORN_HAT),\n    GREY_NAVAL_SHIRT(ItemID.GREY_NAVAL_SHIRT),\n    GREY_NAVY_SLACKS(ItemID.GREY_NAVY_SLACKS),\n    GREY_TRICORN_HAT(ItemID.GREY_TRICORN_HAT),\n    PURPLE_NAVAL_SHIRT(ItemID.PURPLE_NAVAL_SHIRT),\n    PURPLE_NAVY_SLACKS(ItemID.PURPLE_NAVY_SLACKS),\n    PURPLE_TRICORN_HAT(ItemID.PURPLE_TRICORN_HAT),\n    RED_NAVAL_SHIRT(ItemID.RED_NAVAL_SHIRT),\n    RED_NAVY_SLACKS(ItemID.RED_NAVY_SLACKS),\n    RED_TRICORN_HAT(ItemID.RED_TRICORN_HAT),\n    // Varlamore orange hat\n    ORANGE_31117(ItemID.ORANGE_31117),\n    // Aerial fishing rods\n    OILY_PEARL_FISHING_ROD_MAGIC_WARDROBE(ItemID.OILY_PEARL_FISHING_ROD),\n    PEARL_BARBARIAN_ROD_MAGIC_WARDROBE(ItemID.PEARL_BARBARIAN_ROD),\n    PEARL_FISHING_ROD_MAGIC_WARDROBE(ItemID.PEARL_FISHING_ROD),\n    PEARL_FLY_FISHING_ROD_MAGIC_WARDROBE(ItemID.PEARL_FLY_FISHING_ROD),\n    // Pheasant costume\n    PHEASANT_CAPE(ItemID.PHEASANT_CAPE),\n    PHEASANT_BOOTS(ItemID.PHEASANT_BOOTS),\n    PHEASANT_HAT(ItemID.PHEASANT_HAT),\n    PHEASANT_LEGS(ItemID.PHEASANT_LEGS),\n    // Pyromancer outfit\n    PYROMANCER_BOOTS(ItemID.PYROMANCER_BOOTS),\n    PYROMANCER_GARB(ItemID.PYROMANCER_GARB),\n    PYROMANCER_HOOD(ItemID.PYROMANCER_HOOD),\n    PYROMANCER_ROBE(ItemID.PYROMANCER_ROBE),\n    // Raiments of the Eye outfits\n    HAT_OF_THE_EYE(ItemID.HAT_OF_THE_EYE),\n    ROBE_TOP_OF_THE_EYE(ItemID.ROBE_TOP_OF_THE_EYE),\n    ROBE_BOTTOMS_OF_THE_EYE(ItemID.ROBE_BOTTOMS_OF_THE_EYE),\n    BOOTS_OF_THE_EYE(ItemID.BOOTS_OF_THE_EYE),\n    HAT_OF_THE_EYE_BLUE(ItemID.HAT_OF_THE_EYE_BLUE),\n    ROBE_TOP_OF_THE_EYE_BLUE(ItemID.ROBE_TOP_OF_THE_EYE_BLUE),\n    ROBE_BOTTOMS_OF_THE_EYE_BLUE(ItemID.ROBE_BOTTOMS_OF_THE_EYE_BLUE),\n    HAT_OF_THE_EYE_GREEN(ItemID.HAT_OF_THE_EYE_GREEN),\n    ROBE_TOP_OF_THE_EYE_GREEN(ItemID.ROBE_TOP_OF_THE_EYE_GREEN),\n    ROBE_BOTTOMS_OF_THE_EYE_GREEN(ItemID.ROBE_BOTTOMS_OF_THE_EYE_GREEN),\n    HAT_OF_THE_EYE_RED(ItemID.HAT_OF_THE_EYE_RED),\n    ROBE_TOP_OF_THE_EYE_RED(ItemID.ROBE_TOP_OF_THE_EYE_RED),\n    ROBE_BOTTOMS_OF_THE_EYE_RED(ItemID.ROBE_BOTTOMS_OF_THE_EYE_RED),\n    // Robes of Ruin\n    HOOD_OF_RUIN(ItemID.HOOD_OF_RUIN),\n    ROBE_TOP_OF_RUIN(ItemID.ROBE_TOP_OF_RUIN),\n    ROBE_BOTTOM_OF_RUIN(ItemID.ROBE_BOTTOM_OF_RUIN),\n    GLOVES_OF_RUIN(ItemID.GLOVES_OF_RUIN),\n    SOCKS_OF_RUIN(ItemID.SOCKS_OF_RUIN),\n    CLOAK_OF_RUIN(ItemID.CLOAK_OF_RUIN),\n    // Skeletal armour\n    SKELETAL_HELM(ItemID.SKELETAL_HELM),\n    SKELETAL_BOTTOMS(ItemID.SKELETAL_BOTTOMS),\n    SKELETAL_BOOTS(ItemID.SKELETAL_BOOTS),\n    SKELETAL_GLOVES(ItemID.SKELETAL_GLOVES),\n    SKELETAL_TOP(ItemID.SKELETAL_TOP),\n    // Smith\u0027s Uniform\n    SMITHS_TUNIC(ItemID.SMITHS_TUNIC),\n    SMITHS_TROUSERS(ItemID.SMITHS_TROUSERS),\n    SMITHS_GLOVES(ItemID.SMITHS_GLOVES),\n    SMITHS_GLOVES_I(ItemID.SMITHS_GLOVES_I),\n    SMITHS_BOOTS(ItemID.SMITHS_BOOTS),\n    // Splitbark armour\n    SPLITBARK_BODY(ItemID.SPLITBARK_BODY),\n    SPLITBARK_BOOTS(ItemID.SPLITBARK_BOOTS),\n    SPLITBARK_HELM(ItemID.SPLITBARK_HELM),\n    SPLITBARK_LEGS(ItemID.SPLITBARK_LEGS),\n    SPLITBARK_GAUNTLETS(ItemID.SPLITBARK_GAUNTLETS),\n    // Swampbark armour\n    SWAMPBARK_BODY(ItemID.SWAMPBARK_BODY),\n    SWAMPBARK_BOOTS(ItemID.SWAMPBARK_BOOTS),\n    SWAMPBARK_HELM(ItemID.SWAMPBARK_HELM),\n    SWAMPBARK_LEGS(ItemID.SWAMPBARK_LEGS),\n    SWAMPBARK_GAUNTLETS(ItemID.SWAMPBARK_GAUNTLETS),\n    // Tribal outfit (blue)\n    TRIBAL_TOP(ItemID.TRIBAL_TOP),\n    VILLAGER_ROBE(ItemID.VILLAGER_ROBE),\n    VILLAGER_HAT(ItemID.VILLAGER_HAT),\n    VILLAGER_ARMBAND(ItemID.VILLAGER_ARMBAND),\n    VILLAGER_SANDALS(ItemID.VILLAGER_SANDALS),\n    // Tribal outfit (brown)\n    TRIBAL_TOP_6351(ItemID.TRIBAL_TOP_6351),\n    VILLAGER_ROBE_6353(ItemID.VILLAGER_ROBE_6353),\n    VILLAGER_HAT_6355(ItemID.VILLAGER_HAT_6355),\n    VILLAGER_SANDALS_6357(ItemID.VILLAGER_SANDALS_6357),\n    VILLAGER_ARMBAND_6359(ItemID.VILLAGER_ARMBAND_6359),\n    // Tribal outfit (pink)\n    TRIBAL_TOP_6361(ItemID.TRIBAL_TOP_6361),\n    VILLAGER_ROBE_6363(ItemID.VILLAGER_ROBE_6363),\n    VILLAGER_HAT_6365(ItemID.VILLAGER_HAT_6365),\n    VILLAGER_SANDALS_6367(ItemID.VILLAGER_SANDALS_6367),\n    VILLAGER_ARMBAND_6369(ItemID.VILLAGER_ARMBAND_6369),\n    // Tribal outfit (yellow)\n    TRIBAL_TOP_6371(ItemID.TRIBAL_TOP_6371),\n    VILLAGER_ROBE_6373(ItemID.VILLAGER_ROBE_6373),\n    VILLAGER_HAT_6375(ItemID.VILLAGER_HAT_6375),\n    VILLAGER_SANDALS_6377(ItemID.VILLAGER_SANDALS_6377),\n    VILLAGER_ARMBAND_6379(ItemID.VILLAGER_ARMBAND_6379),\n    // Twilight Emissary Robes\n    EMISSARY_HOOD(ItemID.EMISSARY_HOOD),\n    EMISSARY_ROBE_TOP(ItemID.EMISSARY_ROBE_TOP),\n    EMISSARY_ROBE_BOTTOM(ItemID.EMISSARY_ROBE_BOTTOM),\n    EMISSARY_SANDALS(ItemID.EMISSARY_SANDALS),\n    // Virtus robes\n    VIRTUS_MASK(ItemID.VIRTUS_MASK, true),\n    VIRTUS_ROBE_BOTTOM(ItemID.VIRTUS_ROBE_BOTTOM, true),\n    VIRTUS_ROBE_TOP(ItemID.VIRTUS_ROBE_TOP, true),\n    // Virtus robes (Echo)\n    ECHO_VIRTUS_MASK(ItemID.ECHO_VIRTUS_MASK, true),\n    ECHO_VIRTUS_ROBE_TOP(ItemID.ECHO_VIRTUS_ROBE_TOP, true),\n    ECHO_VIRTUS_ROBE_BOTTOM(ItemID.ECHO_VIRTUS_ROBE_BOTTOM, true),\n    // Warm gloves\n    WARM_GLOVES(ItemID.WARM_GLOVES),\n    // Zealot\u0027s robes\n    ZEALOTS_BOOTS(ItemID.ZEALOTS_BOOTS),\n    ZEALOTS_HELM(ItemID.ZEALOTS_HELM),\n    ZEALOTS_ROBE_BOTTOM(ItemID.ZEALOTS_ROBE_BOTTOM),\n    ZEALOTS_ROBE_TOP(ItemID.ZEALOTS_ROBE_TOP);\n\n\n    private final int itemID;\n    @Getter\n    private final String location \u003d \"Magic Wardrobe\";\n    @Getter\n    private final boolean isBis;\n\n    MagicWardrobe(int itemID, boolean isBis) {\n        this.itemID \u003d itemID; this.isBis \u003d isBis;\n    }\n    MagicWardrobe(int itemID) {\n        this.itemID \u003d itemID;\n        this.isBis \u003d false;\n    }\n}\n","filePath":"src\\main\\java\\com\\wastedbankspace\\model\\locations\\MagicWardrobe.java"},{"fileName":"MasterScrollBook.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace.model.locations;\n\nimport com.wastedbankspace.model.StorableItem;\nimport lombok.Getter;\nimport net.runelite.api.ItemID;\n\n@Getter\npublic enum MasterScrollBook implements StorableItem {\n    /* https://oldschool.runescape.wiki/w/Teleport_scrolls */\n    /* Treasure Trail Rewards */\n    DIGSITE_TELEPORT(ItemID.DIGSITE_TELEPORT),\n    FELDIP_HILLS_TELEPORT(ItemID.FELDIP_HILLS_TELEPORT),\n    IORWERTH_CAMP_TELEPORT(ItemID.IORWERTH_CAMP_TELEPORT),\n    LUMBERYARD_TELEPORT(ItemID.LUMBERYARD_TELEPORT),\n    LUNAR_ISLE_TELEPORT(ItemID.LUNAR_ISLE_TELEPORT),\n    MORTTON_TELEPORT(ItemID.MORTTON_TELEPORT),\n    MOS_LEHARMLESS_TELEPORT(ItemID.MOS_LEHARMLESS_TELEPORT),\n    NARDAH_TELEPORT(ItemID.NARDAH_TELEPORT),\n    PEST_CONTROL_TELEPORT(ItemID.PEST_CONTROL_TELEPORT),\n    PISCATORIS_TELEPORT(ItemID.PISCATORIS_TELEPORT),\n    TAI_BWO_WANNAI_TELEPORT(ItemID.TAI_BWO_WANNAI_TELEPORT),\n    /* Other */\n    CHASM_TELEPORT_SCROLL(ItemID.CHASM_TELEPORT_SCROLL),\n    COLOSSAL_WYRM_TELEPORT_SCROLL(ItemID.COLOSSAL_WYRM_TELEPORT_SCROLL),\n    GUTHIXIAN_TEMPLE_TELEPORT(ItemID.GUTHIXIAN_TEMPLE_TELEPORT),\n    KEY_MASTER_TELEPORT(ItemID.KEY_MASTER_TELEPORT),\n    REVENANT_CAVE_TELEPORT(ItemID.REVENANT_CAVE_TELEPORT),\n    SPIDER_CAVE_TELEPORT(ItemID.SPIDER_CAVE_TELEPORT),\n    WATSON_TELEPORT(ItemID.WATSON_TELEPORT),\n    ZULANDRA_TELEPORT(ItemID.ZULANDRA_TELEPORT);\n\n    private final int itemID;\n    @Getter\n    private final String location \u003d \"Master Scroll Book\";\n    @Getter\n    private final boolean isBis;\n\n    MasterScrollBook(int itemID) {\n        this.itemID \u003d itemID;\n        this.isBis \u003d false;\n    }\n}\n","filePath":"src\\main\\java\\com\\wastedbankspace\\model\\locations\\MasterScrollBook.java"},{"fileName":"MysteriousStranger.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace.model.locations;\n\nimport com.wastedbankspace.model.StorableItem;\nimport lombok.Getter;\nimport net.runelite.api.ItemID;\n\n@Getter\npublic enum MysteriousStranger implements StorableItem {\n    HALLOWED_GRAPPLE(ItemID.HALLOWED_GRAPPLE),\n    HALLOWED_HAMMER(ItemID.HALLOWED_HAMMER),\n    HALLOWED_FOCUS(ItemID.HALLOWED_FOCUS),\n    HALLOWED_SYMBOL(ItemID.HALLOWED_SYMBOL),\n    HALLOWED_RING(ItemID.HALLOWED_RING),\n    HALLOWED_TOKEN(ItemID.HALLOWED_TOKEN);\n\n    private final int itemID;\n    @Getter\n    private final String location \u003d \"Mysterious Stranger\";\n    @Getter\n    private final boolean isBis;\n\n    MysteriousStranger(int itemID) {\n        this.itemID \u003d itemID;\n        this.isBis \u003d false;\n    }\n}\n","filePath":"src\\main\\java\\com\\wastedbankspace\\model\\locations\\MysteriousStranger.java"},{"fileName":"NightmareZone.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace.model.locations;\n\nimport com.wastedbankspace.model.StorableItem;\nimport lombok.Getter;\nimport net.runelite.api.ItemID;\n\n@Getter\npublic enum NightmareZone implements StorableItem {\n    ABSORPTION_1(ItemID.ABSORPTION_1),\n    ABSORPTION_2(ItemID.ABSORPTION_2),\n    ABSORPTION_3(ItemID.ABSORPTION_3),\n    ABSORPTION_4(ItemID.ABSORPTION_4),\n    OVERLOAD_1(ItemID.OVERLOAD_1),\n    OVERLOAD_2(ItemID.OVERLOAD_2),\n    OVERLOAD_3(ItemID.OVERLOAD_3),\n    OVERLOAD_4(ItemID.OVERLOAD_4),\n    SUPER_MAGIC_POTION_1(ItemID.SUPER_MAGIC_POTION_1),\n    SUPER_MAGIC_POTION_2(ItemID.SUPER_MAGIC_POTION_2),\n    SUPER_MAGIC_POTION_3(ItemID.SUPER_MAGIC_POTION_3),\n    SUPER_MAGIC_POTION_4(ItemID.SUPER_MAGIC_POTION_4),\n    SUPER_RANGING_1(ItemID.SUPER_RANGING_1),\n    SUPER_RANGING_2(ItemID.SUPER_RANGING_2),\n    SUPER_RANGING_3(ItemID.SUPER_RANGING_3),\n    SUPER_RANGING_4(ItemID.SUPER_RANGING_4);\n\n    private final int itemID;\n    @Getter\n    private final String location \u003d \"Nightmare Zone\";\n    @Getter\n    private final boolean isBis;\n    NightmareZone(int itemID) {\n        this.itemID \u003d itemID;\n        this.isBis \u003d false;\n    }\n}\n","filePath":"src\\main\\java\\com\\wastedbankspace\\model\\locations\\NightmareZone.java"},{"fileName":"PetHouse.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace.model.locations;\n\nimport com.wastedbankspace.model.StorableItem;\nimport lombok.Getter;\nimport net.runelite.api.Item;\nimport net.runelite.api.ItemID;\n\n@Getter\npublic enum PetHouse implements StorableItem {\n    //PVM and Minigame Pets\n    PET_CHAOS_ELEMENTAL(ItemID.PET_CHAOS_ELEMENTAL),\n    PET_DAGANNOTH_SUPREME(ItemID.PET_DAGANNOTH_SUPREME),\n    PET_DAGANNOTH_PRIME(ItemID.PET_DAGANNOTH_PRIME),\n    PET_DAGANNOTH_REX(ItemID.PET_DAGANNOTH_REX),\n    PET_PENANCE_QUEEN(ItemID.PET_PENANCE_QUEEN),\n    PET_KREEARRA(ItemID.PET_KREEARRA),\n    PET_GENERAL_GRAARDOR(ItemID.PET_GENERAL_GRAARDOR),\n    PET_ZILYANA(ItemID.PET_ZILYANA),\n    PET_KRIL_TSUTAROTH(ItemID.PET_KRIL_TSUTSAROTH),\n    PET_BABY_MOLE(ItemID.BABY_MOLE),\n    PET_PRINCE_BLACK_DRAGON(ItemID.PRINCE_BLACK_DRAGON),\n    PET_KALPHITE_PRINCESS(ItemID.KALPHITE_PRINCESS),\n    KALPHITE_PRINCESS_12654(ItemID.KALPHITE_PRINCESS_12654), //KQ Transmog FLying\n    PET_SMOKE_DEVIL(ItemID.PET_SMOKE_DEVIL),\n    PET_KRAKEN(ItemID.PET_KRAKEN),\n    PET_DARK_CORE(ItemID.PET_DARK_CORE),\n    CORPOREAL_CRITTER(ItemID.PET_CORPOREAL_CRITTER),\n    PET_SNAKELING(ItemID.PET_SNAKELING),\n    PET_SNAKELING_12939(ItemID.PET_SNAKELING_12939),\n    PET_SNAKELING_12940(ItemID.PET_SNAKELING_12940),\n    CHOMPY_CHICK(ItemID.CHOMPY_CHICK),\n    VENENATIS_SPIDERLING(ItemID.VENENATIS_SPIDERLING),\n    VENENATIS_SPIDERLING_27648(ItemID.VENENATIS_SPIDERLING_27648),\n    CALLISTO_CUB(ItemID.CALLISTO_CUB),\n    CALLISTO_CUB_27649(ItemID.CALLISTO_CUB_27649),\n    VETION_JR(ItemID.VETION_JR),\n    VETION_JR_13180(ItemID.VETION_JR_13180),\n    VETION_JR_27650(ItemID.VETION_JR_27650),\n    VETION_JR_27651(ItemID.VETION_JR_27651),\n    SCORPIAS_OFFSPRING(ItemID.SCORPIAS_OFFSPRING),\n    TZREKJAD(ItemID.TZREKJAD),\n    JALREKJA(ItemID.JALREKJAD),\n    HELLPUPPY(ItemID.HELLPUPPY),\n    ABYSSAL_ORPHAN(ItemID.ABYSSAL_ORPHAN),\n    OLMLET(ItemID.OLMLET),\n    PUPPADILE(ItemID.PUPPADILE),\n    TEKTINY(ItemID.TEKTINY),\n    ENRAGED_TEKTINY(ItemID.ENRAGED_TEKTINY),\n    VANGUARD(ItemID.VANGUARD),\n    VASA_MINIRIO(ItemID.VASA_MINIRIO),\n    VESPINA(ItemID.VESPINA),\n    FLYING_VESPINA(ItemID.FLYING_VESPINA),\n    SKOTOS(ItemID.SKOTOS),\n    JALNIBREK(ItemID.JALNIBREK),\n    TZREKZUK(ItemID.TZREKZUK),\n    HERBI(ItemID.HERBI),\n    NOON(ItemID.NOON),\n    VORKI(ItemID.VORKI),\n    LIL_ZIK(ItemID.LIL_ZIK),\n    LIL_MAIDEN(ItemID.LIL_MAIDEN),\n    LIL_BLOAT(ItemID.LIL_BLOAT),\n    LIL_NYLO(ItemID.LIL_NYLO),\n    LIL_SOT(ItemID.LIL_SOT),\n    LIL_XARP(ItemID.LIL_XARP),\n    IKKLE_HYDRA(ItemID.IKKLE_HYDRA),\n    IKKLE_HYDRA_22748(ItemID.IKKLE_HYDRA_22748),\n    IKKLE_HYDRA_22750(ItemID.IKKLE_HYDRA_22750),\n    IKKLE_HYDRA_22752(ItemID.IKKLE_HYDRA_22752),\n    SRARACHA(ItemID.SRARACHA),\n    SRARACHA_25842(ItemID.SRARACHA_25842),\n    SRARACHA_25843(ItemID.SRARACHA_25843),\n    YOUNGLLEF(ItemID.YOUNGLLEF),\n    CORRUPTED_YOUNGLLEF(ItemID.CORRUPTED_YOUNGLLEF),\n    SMOLCANO(ItemID.SMOLCANO),\n    LITTLE_NIGHTMARE(ItemID.LITTLE_NIGHTMARE),\n    LITTLE_PARASITE(ItemID.LITTLE_PARASITE),\n    LIL_CREATOR(ItemID.LIL_CREATOR),\n    LIL_DESTRUCTOR(ItemID.LIL_DESTRUCTOR),\n    TINY_TEMPOR(ItemID.TINY_TEMPOR),\n    NEXLING(ItemID.NEXLING),\n    ABYSSAL_PROTECTOR(ItemID.ABYSSAL_PROTECTOR),\n    TUMEKENS_GUARDIAN(ItemID.TUMEKENS_GUARDIAN),\n    TUMEKENS_DAMAGED_GUARDIAN(ItemID.TUMEKENS_DAMAGED_GUARDIAN),\n    ELIDINIS_GUARDIAN(ItemID.ELIDINIS_GUARDIAN),\n    ELIDINIS_DAMAGED_GUARDIAN(ItemID.ELIDINIS_DAMAGED_GUARDIAN),\n    AKKHITO(ItemID.AKKHITO),\n    BABI(ItemID.BABI),\n    KEPHRITI(ItemID.KEPHRITI),\n    ZEBO(ItemID.ZEBO),\n    MUPHIN(ItemID.MUPHIN),\n    WISP(ItemID.WISP),\n    BUTCH(ItemID.BUTCH),\n    LILVIATHAN(ItemID.LILVIATHAN),\n    BARON(ItemID.BARON),\n    SCURRY(ItemID.SCURRY),\n    SMOL_HEREDIT(ItemID.SMOL_HEREDIT),\n    QUETZIN(ItemID.QUETZIN),\n    NID(ItemID.NID),\n    RAX(ItemID.RAX),    //NID Transmog\n    HUBERTE(ItemID.HUBERTE),\n    MOXI(ItemID.MOXI),\n    BRAN(ItemID.BRAN),\n    RIC(ItemID.RIC),    //BRAN Transmog\n    YAMI(ItemID.YAMI),\n    DOM(ItemID.DOM),\n\n    //Skilling Pets\n    HERON(ItemID.HERON),\n    GREAT_BLUE_HERON(ItemID.GREAT_BLUE_HERON),\n    ROCK_GOLEM(ItemID.ROCK_GOLEM),\n    ROCK_GOLEM_21188(ItemID.ROCK_GOLEM_21188),\n    ROCK_GOLEM_21189(ItemID.ROCK_GOLEM_21189),\n    ROCK_GOLEM_21190(ItemID.ROCK_GOLEM_21190),\n    ROCK_GOLEM_21187(ItemID.ROCK_GOLEM_21187),\n    ROCK_GOLEM_21191(ItemID.ROCK_GOLEM_21191),\n    ROCK_GOLEM_21192(ItemID.ROCK_GOLEM_21192),\n    ROCK_GOLEM_21193(ItemID.ROCK_GOLEM_21193),\n    ROCK_GOLEM_21194(ItemID.ROCK_GOLEM_21194),\n    ROCK_GOLEM_21195(ItemID.ROCK_GOLEM_21195),\n    ROCK_GOLEM_21196(ItemID.ROCK_GOLEM_21196),\n    ROCK_GOLEM_21197(ItemID.ROCK_GOLEM_21197),\n    ROCK_GOLEM_21340(ItemID.ROCK_GOLEM_21340),\n    ROCK_GOLEM_21358(ItemID.ROCK_GOLEM_21358),\n    ROCK_GOLEM_21359(ItemID.ROCK_GOLEM_21359),\n    ROCK_GOLEM_21360(ItemID.ROCK_GOLEM_21360),\n    BEAVER(ItemID.BEAVER),\n    BEAVER_28229(ItemID.BEAVER_28229),\n    BEAVER_28230(ItemID.BEAVER_28230),\n    BEAVER_28231(ItemID.BEAVER_28231),\n    BEAVER_28232(ItemID.BEAVER_28232),\n    BEAVER_28233(ItemID.BEAVER_28233),\n    BEAVER_28234(ItemID.BEAVER_28234),\n    BEAVER_28235(ItemID.BEAVER_28235),\n    BEAVER_28236(ItemID.BEAVER_28236),\n    BEAVER_28237(ItemID.BEAVER_28237),\n    FOX_28670(ItemID.FOX_28670),\n    PHEASANT(ItemID.PHEASANT),\n    BABY_CHINCHOMPA(ItemID.BABY_CHINCHOMPA),\n    BABY_CHINCHOMPA_13324(ItemID.BABY_CHINCHOMPA_13324),\n    BABY_CHINCHOMPA_13325(ItemID.BABY_CHINCHOMPA_13325),\n    BABY_CHINCHOMPA_13326(ItemID.BABY_CHINCHOMPA_13326),\n    BLOODHOUND(ItemID.BLOODHOUND),\n    GIANT_SQUIRREL(ItemID.GIANT_SQUIRREL),\n    DARK_SQUIRREL(ItemID.DARK_SQUIRREL),\n    BONE_SQUIRREL(ItemID.BONE_SQUIRREL),\n    TANGLEROOT(ItemID.TANGLEROOT),\n    TANGLEROOT_24555(ItemID.TANGLEROOT_24555),\n    TANGLEROOT_24557(ItemID.TANGLEROOT_24557),\n    TANGLEROOT_24559(ItemID.TANGLEROOT_24559),\n    TANGLEROOT_24561(ItemID.TANGLEROOT_24561),\n    TANGLEROOT_24563(ItemID.TANGLEROOT_24563),\n    RIFT_GUARDIAN(ItemID.RIFT_GUARDIAN),\n    RIFT_GUARDIAN_20667(ItemID.RIFT_GUARDIAN_20667),\n    RIFT_GUARDIAN_20669(ItemID.RIFT_GUARDIAN_20669),\n    RIFT_GUARDIAN_20671(ItemID.RIFT_GUARDIAN_20671),\n    RIFT_GUARDIAN_20673(ItemID.RIFT_GUARDIAN_20673),\n    RIFT_GUARDIAN_20675(ItemID.RIFT_GUARDIAN_20675),\n    RIFT_GUARDIAN_20677(ItemID.RIFT_GUARDIAN_20677),\n    RIFT_GUARDIAN_20679(ItemID.RIFT_GUARDIAN_20679),\n    RIFT_GUARDIAN_20681(ItemID.RIFT_GUARDIAN_20681),\n    RIFT_GUARDIAN_20683(ItemID.RIFT_GUARDIAN_20683),\n    RIFT_GUARDIAN_20685(ItemID.RIFT_GUARDIAN_20685),\n    RIFT_GUARDIAN_20687(ItemID.RIFT_GUARDIAN_20687),\n    RIFT_GUARDIAN_20689(ItemID.RIFT_GUARDIAN_20689),\n    RIFT_GUARDIAN_21990(ItemID.RIFT_GUARDIAN_21990),\n    RIFT_GUARDIAN_20691(ItemID.RIFT_GUARDIAN_20691),\n    GREATISH_GUARDIAN(ItemID.GREATISH_GUARDIAN),\n    ROCKY(ItemID.ROCKY),\n    RED(ItemID.RED),\n    ZIGGY(ItemID.ZIGGY),\n    PHOENIX(ItemID.PHOENIX),\n    PHOENIX_24483(ItemID.PHOENIX_24483),\n    PHOENIX_24484(ItemID.PHOENIX_24484),\n    PHOENIX_24485(ItemID.PHOENIX_24485),\n    PHOENIX_24486(ItemID.PHOENIX_24486),\n\n    // Extras\n    PET_KITTEN(ItemID.PET_KITTEN),\n    PET_KITTEN_1556(ItemID.PET_KITTEN_1556),\n    PET_KITTEN_1557(ItemID.PET_KITTEN_1557),\n    PET_KITTEN_1558(ItemID.PET_KITTEN_1558),\n    PET_KITTEN_1559(ItemID.PET_KITTEN_1559),\n    PET_KITTEN_1560(ItemID.PET_KITTEN_1560),\n    PET_CAT(ItemID.PET_CAT),\n    PET_CAT_1562(ItemID.PET_CAT_1562),\n    PET_CAT_1563(ItemID.PET_CAT_1563),\n    PET_CAT_1564(ItemID.PET_CAT_1564),\n    PET_CAT_1565(ItemID.PET_CAT_1565),\n    PET_CAT_1566(ItemID.PET_CAT_1566),\n    PET_CAT_1567(ItemID.PET_CAT_1567), // overgrown\n    PET_CAT_1568(ItemID.PET_CAT_1568), // overgrown\n    PET_CAT_1569(ItemID.PET_CAT_1569), // overgrown\n    PET_CAT_1570(ItemID.PET_CAT_1570), // overgrown\n    PET_CAT_1571(ItemID.PET_CAT_1571), // overgrown\n    PET_CAT_1572(ItemID.PET_CAT_1572), // overgrown\n    WILY_CAT(ItemID.WILY_CAT),\n    WILY_CAT_6556(ItemID.WILY_CAT_6556),\n    WILY_CAT_6557(ItemID.WILY_CAT_6557),\n    WILY_CAT_6558(ItemID.WILY_CAT_6558),\n    WILY_CAT_6559(ItemID.WILY_CAT_6559),\n    WILY_CAT_6560(ItemID.WILY_CAT_6560),\n    LAZY_CAT(ItemID.LAZY_CAT),\n    LAZY_CAT_6550(ItemID.LAZY_CAT_6550),\n    LAZY_CAT_6551(ItemID.LAZY_CAT_6551),\n    LAZY_CAT_6552(ItemID.LAZY_CAT_6552),\n    LAZY_CAT_6553(ItemID.LAZY_CAT_6553),\n    LAZY_CAT_6554(ItemID.LAZY_CAT_6554),\n    HELLKITTEN(ItemID.HELLKITTEN),\n    HELL_CAT(ItemID.HELL_CAT),\n    OVERGROWN_HELLCAT(ItemID.OVERGROWN_HELLCAT),\n    WILY_HELLCAT(ItemID.WILY_HELLCAT),\n    LAZY_HELL_CAT(ItemID.LAZY_HELL_CAT),\n    TOY_CAT(ItemID.TOY_CAT),\n    FISHBOWL_6670(ItemID.FISHBOWL_6670),\n    FISHBOWL_6671(ItemID.FISHBOWL_6671),\n    FISHBOWL_6672(ItemID.FISHBOWL_6672),\n    PET_ROCK(ItemID.PET_ROCK),\n    EGG_30970(ItemID.EGG_30970), //Humphry Dumphry\n    BROAV(ItemID.BROAV);\n\n    private final int itemID;\n    @Getter\n    private final String location \u003d \"Pet House\";\n    @Getter\n    private final boolean isBis;\n    PetHouse(int itemID) {\n        this.itemID \u003d itemID;\n        this.isBis \u003d false;\n    }\n}\n","filePath":"src\\main\\java\\com\\wastedbankspace\\model\\locations\\PetHouse.java"},{"fileName":"SeedVault.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace.model.locations;\n\nimport com.wastedbankspace.model.StorableItem;\nimport lombok.Getter;\nimport net.runelite.api.ItemID;\n\n@Getter\npublic enum SeedVault implements StorableItem {\n    // Allotment Seeds\n    POTATO_SEED(ItemID.POTATO_SEED),\n    ONION_SEED(ItemID.ONION_SEED),\n    CABBAGE_SEED(ItemID.CABBAGE_SEED),\n    TOMATO_SEED(ItemID.TOMATO_SEED),\n    SWEETCORN_SEED(ItemID.SWEETCORN_SEED),\n    STRAWBERRY_SEED(ItemID.STRAWBERRY_SEED),\n    WATERMELON_SEED(ItemID.WATERMELON_SEED),\n    SNAPE_GRASS_SEED(ItemID.SNAPE_GRASS_SEED),\n\n    // Flower Seeds\n    MARIGOLD_SEED(ItemID.MARIGOLD_SEED),\n    ROSEMARY_SEED(ItemID.ROSEMARY_SEED),\n    NASTURTIUM_SEED(ItemID.NASTURTIUM_SEED),\n    WOAD_SEED(ItemID.WOAD_SEED),\n    LIMPWURT_SEED(ItemID.LIMPWURT_SEED),\n    WHITE_LILY_SEED(ItemID.WHITE_LILY_SEED),\n\n    // Herb Seeds\n    GUAM_SEED(ItemID.GUAM_SEED),\n    MARRENTILL_SEED(ItemID.MARRENTILL_SEED),\n    TARROMIN_SEED(ItemID.TARROMIN_SEED),\n    HARRALANDER_SEED(ItemID.HARRALANDER_SEED),\n    RANARR_SEED(ItemID.RANARR_SEED),\n    TOADFLAX_SEED(ItemID.TOADFLAX_SEED),\n    IRIT_SEED(ItemID.IRIT_SEED),\n    AVANTOE_SEED(ItemID.AVANTOE_SEED),\n    KWUARM_SEED(ItemID.KWUARM_SEED),\n    SNAPDRAGON_SEED(ItemID.SNAPDRAGON_SEED),\n    HUASCA_SEED(ItemID.HUASCA_SEED),\n    CADANTINE_SEED(ItemID.CADANTINE_SEED),\n    LANTADYME_SEED(ItemID.LANTADYME_SEED),\n    DWARF_WEED_SEED(ItemID.DWARF_WEED_SEED),\n    TORSTOL_SEED(ItemID.TORSTOL_SEED),\n\n    // Hop Seeds\n    BARLEY_SEED(ItemID.BARLEY_SEED),\n    HAMMERSTONE_SEED(ItemID.HAMMERSTONE_SEED),\n    ASGARNIAN_SEED(ItemID.ASGARNIAN_SEED),\n    JUTE_SEED(ItemID.JUTE_SEED),\n    YANILLIAN_SEED(ItemID.YANILLIAN_SEED),\n    KRANDORIAN_SEED(ItemID.KRANDORIAN_SEED),\n    WILDBLOOD_SEED(ItemID.WILDBLOOD_SEED),\n\n    // Bush Seeds\n    REDBERRY_SEED(ItemID.REDBERRY_SEED),\n    CADAVABERRY_SEED(ItemID.CADAVABERRY_SEED),\n    DWELLBERRY_SEED(ItemID.DWELLBERRY_SEED),\n    JANGERBERRY_SEED(ItemID.JANGERBERRY_SEED),\n    WHITEBERRY_SEED(ItemID.WHITEBERRY_SEED),\n    POISON_IVY_SEED(ItemID.POISON_IVY_SEED),\n\n    // Tree Seeds\n    ACORN(ItemID.ACORN),\n    WILLOW_SEED(ItemID.WILLOW_SEED),\n    TEAK_SEED(ItemID.TEAK_SEED),\n    MAPLE_SEED(ItemID.MAPLE_SEED),\n    MAHOGANY_SEED(ItemID.MAHOGANY_SEED),\n    YEW_SEED(ItemID.YEW_SEED),\n    MAGIC_SEED(ItemID.MAGIC_SEED),\n    REDWOOD_TREE_SEED(ItemID.REDWOOD_TREE_SEED),\n\n    // Fruit Tree Seeds\n    APPLE_TREE_SEED(ItemID.APPLE_TREE_SEED),\n    BANANA_TREE_SEED(ItemID.BANANA_TREE_SEED),\n    ORANGE_TREE_SEED(ItemID.ORANGE_TREE_SEED),\n    CURRY_TREE_SEED(ItemID.CURRY_TREE_SEED),\n    PINEAPPLE_SEED(ItemID.PINEAPPLE_SEED),\n    PAPAYA_TREE_SEED(ItemID.PAPAYA_TREE_SEED),\n    PALM_TREE_SEED(ItemID.PALM_TREE_SEED),\n    DRAGONFRUIT_TREE_SEED(ItemID.DRAGONFRUIT_TREE_SEED),\n\n    // Exotic Seeds\n    SEAWEED_SPORE(ItemID.SEAWEED_SPORE),\n    GRAPE_SEED(ItemID.GRAPE_SEED),\n    MUSHROOM_SPORE(ItemID.MUSHROOM_SPORE),\n    CACTUS_SEED(ItemID.CACTUS_SEED),\n    BELLADONNA_SEED(ItemID.BELLADONNA_SEED),\n    POTATO_CACTUS_SEED(ItemID.POTATO_CACTUS_SEED),\n    HESPORI_SEED(ItemID.HESPORI_SEED),\n    CALQUAT_TREE_SEED(ItemID.CALQUAT_TREE_SEED),\n    SPIRIT_SEED(ItemID.SPIRIT_SEED),\n    CELASTRUS_SEED(ItemID.CELASTRUS_SEED),\n    CRYSTAL_ACORN(ItemID.CRYSTAL_ACORN),\n\n    // Anima Seeds\n    ATTAS_SEED(ItemID.ATTAS_SEED),\n    IASOR_SEED(ItemID.IASOR_SEED),\n    KRONOS_SEED(ItemID.KRONOS_SEED),\n\n    // Saplings\n    OAK_SAPLING(ItemID.OAK_SAPLING),\n    APPLE_SAPLING(ItemID.APPLE_SAPLING),\n    WILLOW_SAPLING(ItemID.WILLOW_SAPLING),\n    BANANA_SAPLING(ItemID.BANANA_SAPLING),\n    TEAK_SAPLING(ItemID.TEAK_SAPLING),\n    ORANGE_SAPLING(ItemID.ORANGE_SAPLING),\n    CURRY_SAPLING(ItemID.CURRY_SAPLING),\n    MAPLE_SAPLING(ItemID.MAPLE_SAPLING),\n    PINEAPPLE_SAPLING(ItemID.PINEAPPLE_SAPLING),\n    MAHOGANY_SAPLING(ItemID.MAHOGANY_SAPLING),\n    PAPAYA_SAPLING(ItemID.PAPAYA_SAPLING),\n    YEW_SAPLING(ItemID.YEW_SAPLING),\n    PALM_SAPLING(ItemID.PALM_SAPLING),\n    CALQUAT_SAPLING(ItemID.CALQUAT_SAPLING),\n    MAGIC_SAPLING(ItemID.MAGIC_SAPLING),\n    DRAGONFRUIT_SAPLING(ItemID.DRAGONFRUIT_SAPLING),\n    SPIRIT_SAPLING(ItemID.SPIRIT_SAPLING),\n    CELASTRUS_SAPLING(ItemID.CELASTRUS_SAPLING),\n    REDWOOD_SAPLING(ItemID.REDWOOD_SAPLING),\n    CRYSTAL_SAPLING(ItemID.CRYSTAL_SAPLING);\n\n    private final int itemID;\n    @Getter\n    private final String location \u003d \"Seed vault\";\n    @Getter\n    private final boolean isBis;\n    SeedVault(int itemID) {\n        this.itemID \u003d itemID;\n        this.isBis \u003d false;\n    }\n}\n","filePath":"src\\main\\java\\com\\wastedbankspace\\model\\locations\\SeedVault.java"},{"fileName":"SpiceRack.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace.model.locations;\n\nimport com.wastedbankspace.model.StorableItem;\nimport lombok.Getter;\nimport net.runelite.api.ItemID;\n\n@Getter\npublic enum SpiceRack implements StorableItem {\n    ORANGE_SPICE_1(ItemID.ORANGE_SPICE_1),\n    ORANGE_SPICE_2(ItemID.ORANGE_SPICE_2),\n    ORANGE_SPICE_3(ItemID.ORANGE_SPICE_3),\n    ORANGE_SPICE_4(ItemID.ORANGE_SPICE_4),\n    RED_SPICE_1(ItemID.RED_SPICE_1),\n    RED_SPICE_2(ItemID.RED_SPICE_2),\n    RED_SPICE_3(ItemID.RED_SPICE_3),\n    RED_SPICE_4(ItemID.RED_SPICE_4),\n    YELLOW_SPICE_1(ItemID.YELLOW_SPICE_1),\n    YELLOW_SPICE_2(ItemID.YELLOW_SPICE_2),\n    YELLOW_SPICE_3(ItemID.YELLOW_SPICE_3),\n    YELLOW_SPICE_4(ItemID.YELLOW_SPICE_4),\n    BROWN_SPICE_1(ItemID.BROWN_SPICE_1),\n    BROWN_SPICE_2(ItemID.BROWN_SPICE_2),\n    BROWN_SPICE_3(ItemID.BROWN_SPICE_3),\n    BROWN_SPICE_4(ItemID.BROWN_SPICE_4);\n\n    private final int itemID;\n    @Getter\n    private final String location \u003d \"Spice Rack\";\n    @Getter\n    private final boolean isBis;\n    SpiceRack(int itemID) {\n        this.itemID \u003d itemID;\n        this.isBis \u003d false;\n    }\n}\n","filePath":"src\\main\\java\\com\\wastedbankspace\\model\\locations\\SpiceRack.java"},{"fileName":"SteelKeyRing.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace.model.locations;\n\nimport com.wastedbankspace.model.StorableItem;\nimport lombok.Getter;\nimport net.runelite.api.ItemID;\n\n@Getter\npublic enum SteelKeyRing implements StorableItem {\n    ANCESTREAL_KEY(ItemID.ANCESTRAL_KEY),\n    BATTERED_KEY(ItemID.BATTERED_KEY),\n    BONE_KEY(ItemID.BONE_KEY),\n    BRASS_KEY(ItemID.BRASS_KEY),\n    CRYSTALMINE_KEY(ItemID.CRYSTALMINE_KEY),\n    DUSTY_KEY(ItemID.DUSTY_KEY),\n    ENCHANTED_KEY(ItemID.ENCHANTED_KEY),\n    WEAPON_STORE_KEY(ItemID.WEAPON_STORE_KEY),\n    MAZE_KEY(ItemID.MAZE_KEY),\n    METAL_KEY(ItemID.METAL_KEY),\n    NEW_KEY(ItemID.NEW_KEY),\n    SHINY_KEY(ItemID.SHINY_KEY),\n    WROUGHT_IRON_KEY(ItemID.WROUGHT_IRON_KEY);\n\n    private final int itemID;\n    @Getter\n    private final String location \u003d \"Steel Key Ring\";\n    @Getter\n    private final boolean isBis;\n    SteelKeyRing(int itemID) {\n        this.itemID \u003d itemID;\n        this.isBis \u003d false;\n    }\n}\n","filePath":"src\\main\\java\\com\\wastedbankspace\\model\\locations\\SteelKeyRing.java"},{"fileName":"TackleBox.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace.model.locations;\n\nimport com.wastedbankspace.model.StorableItem;\nimport lombok.Getter;\nimport net.runelite.api.ItemID;\n\n@Getter\npublic enum TackleBox implements StorableItem {\n    //Equipment\n    ANGLER_BOOTS(ItemID.ANGLER_BOOTS),\n    ANGLER_HAT(ItemID.ANGLER_HAT),\n    ANGLER_TOP(ItemID.ANGLER_TOP),\n    ANGLER_WADERS(ItemID.ANGLER_WADERS),\n\n    SPIRIT_ANGLER_BOOTS(ItemID.SPIRIT_ANGLER_BOOTS),\n    SPIRIT_ANGLER_HEADBAND(ItemID.SPIRIT_ANGLER_HEADBAND),\n    SPIRIT_ANGLER_TOP(ItemID.SPIRIT_ANGLER_TOP),\n    SPIRIT_ANGLER_WADERS(ItemID.SPIRIT_ANGLER_WADERS),\n\n    FISHBOWL_HELMET(ItemID.FISHBOWL_HELMET),\n    FLIPPERS(ItemID.FLIPPERS),\n    DARK_FLIPPERS(ItemID.DARK_FLIPPERS),\n    DIVING_APPARATUS(ItemID.DIVING_APPARATUS),\n\n    RADAS_BLESSING_1(ItemID.RADAS_BLESSING_1),\n    RADAS_BLESSING_2(ItemID.RADAS_BLESSING_2),\n    RADAS_BLESSING_3(ItemID.RADAS_BLESSING_3),\n    RADAS_BLESSING_4(ItemID.RADAS_BLESSING_4),\n\n    TINY_NET(ItemID.TINY_NET),\n    HARPOON(ItemID.HARPOON),\n    BARBTAIL_HARPOON(ItemID.BARBTAIL_HARPOON),\n    DRAGON_HARPOON(ItemID.DRAGON_HARPOON),\n    INFERNAL_HARPOON(ItemID.INFERNAL_HARPOON),\n    DRAGON_HARPOON_OR(ItemID.DRAGON_HARPOON_OR),\n    INFERNAL_HARPOON_OR(ItemID.INFERNAL_HARPOON_OR),\n    CRYSTAL_HARPOON(ItemID.CRYSTAL_HARPOON),\n    MERFOLK_TRIDENT(ItemID.MERFOLK_TRIDENT),\n    FISHING_ROD(ItemID.FISHING_ROD),\n    FLY_FISHING_ROD(ItemID.FLY_FISHING_ROD),\n    OILY_FISHING_ROD(ItemID.OILY_FISHING_ROD),\n    BARBARIAN_ROD(ItemID.BARBARIAN_ROD),\n    PEARL_FISHING_ROD(ItemID.PEARL_FISHING_ROD),\n    PEARL_FLY_FISHING_ROD(ItemID.PEARL_FLY_FISHING_ROD),\n    OILY_PEARL_FISHING_ROD(ItemID.OILY_PEARL_FISHING_ROD),\n    PEARL_BARBARIAN_ROD(ItemID.PEARL_BARBARIAN_ROD),\n    SMALL_FISHING_NET(ItemID.SMALL_FISHING_NET),\n    BIG_FISHING_NET(ItemID.BIG_FISHING_NET),\n    DRIFT_NET(ItemID.DRIFT_NET),\n    LOBSTER_POT(ItemID.LOBSTER_POT),\n    KARAMBWAN_VESSEL(ItemID.KARAMBWAN_VESSEL),\n    KARAMBWAN_VESSEL_FILLED(ItemID.KARAMBWAN_VESSEL_3159),\n\n    //Bait\n    SPIRIT_FLAKES(ItemID.SPIRIT_FLAKES),\n    FEATHERS(ItemID.FEATHER),\n    RAW_KARAMBWANJI(ItemID.RAW_KARAMBWANJI),\n    FISHING_BAIT(ItemID.FISHING_BAIT),\n    DARK_FISHING_BAIT(ItemID.DARK_FISHING_BAIT),\n    SANDWORMS(ItemID.SANDWORMS),\n    FISH_OFFCUTS(ItemID.FISH_OFFCUTS),\n    FISH_CHUNKS(22818), /* FISH_CHUNKS */\n    //Misc\n    FISHING_POTION1(ItemID.FISHING_POTION1),\n    FISHING_POTION2(ItemID.FISHING_POTION2),\n    FISHING_POTION3(ItemID.FISHING_POTION3),\n    FISHING_POTION4(ItemID.FISHING_POTION4),\n    MOLCH_PEARLS(ItemID.MOLCH_PEARL);\n\n    private final int itemID;\n    @Getter\n    private final String location \u003d \"Tackle Box\";\n    @Getter\n    private final boolean isBis;\n    TackleBox(int itemID) {\n        this.itemID \u003d itemID;\n        this.isBis \u003d false;\n    }\n}\n","filePath":"src\\main\\java\\com\\wastedbankspace\\model\\locations\\TackleBox.java"},{"fileName":"ToolLeprechaun.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace.model.locations;\n\nimport com.wastedbankspace.model.StorableItem;\nimport lombok.Getter;\nimport net.runelite.api.ItemID;\n\n@Getter\npublic enum ToolLeprechaun implements StorableItem {\n    RAKE(ItemID.RAKE),\n    SPADE(ItemID.SPADE),\n    SEED_DIBBER(ItemID.SEED_DIBBER),\n    SECATEURS(ItemID.SECATEURS),\n    MAGIC_SECATEURS(ItemID.MAGIC_SECATEURS),\n    GARDENING_TROWEL(ItemID.GARDENING_TROWEL),\n    BOTOMLESS_COMPOST(ItemID.BOTTOMLESS_COMPOST_BUCKET),\n    BOTTOMLESS_COMPOST_BUCKET_22997(ItemID.BOTTOMLESS_COMPOST_BUCKET_22997),\n    PLANT_CURE(ItemID.PLANT_CURE),\n    PLANT_CURE_6468(ItemID.PLANT_CURE_6468),\n    COMPOST(ItemID.COMPOST),\n    SUPERCOMPOST(ItemID.SUPERCOMPOST),\n    ULTRACOMPOST(ItemID.ULTRACOMPOST),\n    WATERING_CAN(ItemID.WATERING_CAN),\n    WATERING_CAN1(ItemID.WATERING_CAN1),\n    WATERING_CAN2(ItemID.WATERING_CAN2),\n    WATERING_CAN3(ItemID.WATERING_CAN3),\n    WATERING_CAN4(ItemID.WATERING_CAN4),\n    WATERING_CAN5(ItemID.WATERING_CAN5),\n    WATERING_CAN6(ItemID.WATERING_CAN6),\n    WATERING_CAN7(ItemID.WATERING_CAN7),\n    WATERING_CAN8(ItemID.WATERING_CAN8),\n    GRICOLLERS_CAN(ItemID.GRICOLLERS_CAN);\n\n    private final int itemID;\n    @Getter\n    private final String location \u003d \"Tool Leprechaun\";\n    @Getter\n    private final boolean isBis;\n    ToolLeprechaun(int itemID) {\n        this.itemID \u003d itemID;\n        this.isBis \u003d false;\n    }\n}\n","filePath":"src\\main\\java\\com\\wastedbankspace\\model\\locations\\ToolLeprechaun.java"},{"fileName":"ToyBox.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace.model.locations;\n\nimport com.wastedbankspace.model.StorableItem;\nimport lombok.Getter;\nimport net.runelite.api.ItemID;\n\n@Getter\npublic enum ToyBox implements StorableItem {\n    BUNNY_EARS(ItemID.BUNNY_EARS),\n    SCYTHE(ItemID.SCYTHE),\n    YOYO(ItemID.YOYO),\n    EASTER_BASKET(ItemID.EASTER_BASKET),\n    RED_MARIONETTE(ItemID.RED_MARIONETTE),\n    BLUE_MARIONETTE(ItemID.BLUE_MARIONETTE),\n    GREEN_MARIONETTE(ItemID.GREEN_MARIONETTE),\n    RUBBER_CHICKEN(ItemID.RUBBER_CHICKEN),\n    BOBBLE_HAT(ItemID.BOBBLE_HAT),\n    JESTER_HAT(ItemID.JESTER_HAT),\n    TRIJESTER_HAT(ItemID.TRIJESTER_HAT),\n    WOOLLY_HAT(ItemID.WOOLLY_HAT),\n    BOBBLE_SCARF(ItemID.BOBBLE_SCARF),\n    JESTER_SCARF(ItemID.JESTER_SCARF),\n    TRIJESTER_SCARF(ItemID.TRIJESTER_SCARF),\n    WOOLLY_SCARF(ItemID.WOOLLY_SCARF),\n    ZOMBIE_HEAD(ItemID.ZOMBIE_HEAD),\n    JACK_LANTERN_MASK(ItemID.JACK_LANTERN_MASK),\n    REINDEER_HAT(ItemID.REINDEER_HAT),\n    EASTER_RING(ItemID.EASTER_RING),\n    SKELETON_MASK(ItemID.SKELETON_MASK),\n    SKELETON_SHIRT(ItemID.SKELETON_SHIRT),\n    SKELETON_LEGGINGS(ItemID.SKELETON_LEGGINGS),\n    SKELETON_GLOVES(ItemID.SKELETON_GLOVES),\n    SKELETON_BOOTS(ItemID.SKELETON_BOOTS),\n    CHICKEN_HEAD(ItemID.CHICKEN_HEAD),\n    CHICKEN_WINGS(ItemID.CHICKEN_WINGS),\n    CHICKEN_LEGS(ItemID.CHICKEN_LEGS),\n    CHICKEN_FEET(ItemID.CHICKEN_FEET),\n    GRIM_REAPER_HOOD(ItemID.GRIM_REAPER_HOOD),\n    BLACK_HWEEN_MASK(ItemID.BLACK_HWEEN_MASK),\n    BLACK_PARTY_HAT(ItemID.BLACK_PARTYHAT),\n    RAINBOW_PARTY_HAT(ItemID.RAINBOW_PARTYHAT),\n    COW_MASK(ItemID.COW_MASK),\n    COW_TOP(ItemID.COW_TOP),\n    COW_TROUSERS(ItemID.COW_TROUSERS),\n    COW_GLOVES(ItemID.COW_GLOVES),\n    COW_SHOES(ItemID.COW_SHOES),\n    ANTISANTA_MASK(ItemID.ANTISANTA_MASK),\n    ANTISANTA_JACKET(ItemID.ANTISANTA_JACKET),\n    ANTISANTA_PANTALOONS(ItemID.ANTISANTA_PANTALOONS),\n    ANTISANTA_GLOVES(ItemID.ANTISANTA_GLOVES),\n    ANTISANTA_BOOTS(ItemID.ANTISANTA_BOOTS),\n    DRUIDIC_WREATH(ItemID.DRUIDIC_WREATH),\n    SANTA_MASK(ItemID.SANTA_MASK),\n    SANTA_JACKET(ItemID.SANTA_JACKET),\n    SANTA_PANTALOONS(ItemID.SANTA_PANTALOONS),\n    SANTA_GLOVES(ItemID.SANTA_GLOVES),\n    SANTA_BOOTS(ItemID.SANTA_BOOTS),\n    BUNNY_TOP(ItemID.BUNNY_TOP),\n    BUNNY_LEGS(ItemID.BUNNY_LEGS),\n    BUNNY_PAWS(ItemID.BUNNY_PAWS),\n    BUNNY_FEET(ItemID.BUNNY_FEET),\n    ANTIPANTIES(ItemID.ANTIPANTIES),\n    BLACK_SANTA_HAT(ItemID.BLACK_SANTA_HAT),\n    INVERTED_SANTA_HAT(ItemID.INVERTED_SANTA_HAT),\n    MASK_OF_BALANCE(ItemID.MASK_OF_BALANCE),\n    TIGER_TOY(ItemID.TIGER_TOY),\n    LION_TOY(ItemID.LION_TOY),\n    SNOW_LEOPARD_TOY(ItemID.SNOW_LEOPARD_TOY),\n    AMUR_LEOPARAD_TOY(ItemID.AMUR_LEOPARD_TOY),\n    GRAVEDIGGER_MASK(ItemID.GRAVEDIGGER_MASK),\n    GRAVEDIGGER_TOP(ItemID.GRAVEDIGGER_TOP),\n    GRAVEDIGGER_LEGGINGS(ItemID.GRAVEDIGGER_LEGGINGS),\n    GRAVEDIGGER_GLOVES(ItemID.GRAVEDIGGER_GLOVES),\n    GRAVEDIGGER_BOOTS(ItemID.GRAVEDIGGER_BOOTS),\n    CABBAGE_CAPE(ItemID.CABBAGE_CAPE),\n    CRUCIFERROUS_CODEX(ItemID.CRUCIFEROUS_CODEX),\n    GIANT_PRESENT(ItemID.GIANT_PRESENT),\n    GNOME_CHILD_HAT(ItemID.GNOME_CHILD_HAT),\n    HORNWOOD_HELM(ItemID.HORNWOOD_HELM),\n    BANSHEE_MASK(ItemID.BANSHEE_MASK),\n    BANSHEE_TOP(ItemID.BANSHEE_TOP),\n    BANSHEE_ROBE(ItemID.BANSHEE),\n    HUNTING_KNIFE(ItemID.HUNTING_KNIFE),\n    SACK_OF_PRESENTS(ItemID.SACK_OF_PRESENTS),\n    SNOW_GLOBE(ItemID.SNOW_GLOBE),\n    _4TH_BIRTHDAY_HAT(ItemID._4TH_BIRTHDAY_HAT),\n    BIRTHDAY_BALLOONS(ItemID.BIRTHDAY_BALLOONS),\n    EASTER_EGG_HELM(ItemID.EASTER_EGG_HELM),\n    HAND_FAN(ItemID.HAND_FAN),\n    JONAS_MASK(ItemID.JONAS_MASK),\n    RAINBOW_SCARF(ItemID.RAINBOW_SCARF),\n    RUNEFEST_SHIELD(ItemID.RUNEFEST_SHIELD),\n    SNOW_IMP_COSTUME_HEAD(ItemID.SNOW_IMP_COSTUME_HEAD),\n    SNOW_IMP_COSTUME_BODY(ItemID.SNOW_IMP_COSTUME_BODY),\n    SNOW_IMP_COSTUME_LEGS(ItemID.SNOW_IMP_COSTUME_LEGS),\n    SNOW_IMP_COSTUME_TAIL(ItemID.SNOW_IMP_COSTUME_TAIL),\n    SNOW_IMP_COSTUME_GLOVES(ItemID.SNOW_IMP_COSTUME_GLOVES),\n    SNOW_IMP_COSTUME_FEET(ItemID.SNOW_IMP_COSTUME_FEET),\n    WISE_OLD_MANS_SANTA_HAT(ItemID.WISE_OLD_MANS_SANTA_HAT),\n    PROP_SWORD(ItemID.PROP_SWORD),\n    STARFACE(ItemID.STARFACE),\n    TREE_TOP(ItemID.TREE_TOP),\n    TREE_SKIRT(ItemID.TREE_SKIRT),\n    CANDY_CANE(ItemID.CANDY_CANE),\n    CLOWN_MASK(ItemID.CLOWN_MASK),\n    CLOWN_GOWN(ItemID.CLOWN_GOWN),\n    CLOW_BOW_TIE(ItemID.CLOWN_BOW_TIE),\n    CLOWN_TROUSERS(ItemID.CLOWN_TROUSERS),\n    CLOWN_SHOES(ItemID.CLOWN_SHOES),\n    EEK(ItemID.EEK),\n    EGGSHELL_PLATEBODY(ItemID.EGGSHELL_PLATEBODY),\n    EGGSHELL_PLATELEGS(ItemID.EGGSHELL_PLATELEGS),\n    BIRTHDAY_CAKE(ItemID.BIRTHDAY_CAKE),\n    BUNNYMAN_MASK(ItemID.BUNNYMAN_MASK),\n    GIANT_EASTER_EGG(ItemID.GIANT_EASTER_EGG),\n    GREEN_GINGERBREAD_SHIELD(ItemID.GREEN_GINGERBREAD_SHIELD),\n    PUMPKIN_LANTERN(ItemID.PUMPKIN_LANTERN),\n    SKELETON_LANTERN(ItemID.SKELETON_LANTERN),\n    SPOOKIER_HOOD(ItemID.SPOOKIER_HOOD),\n    SPOOKIER_ROBE(ItemID.SPOOKIER_ROBE),\n    SPOOKIER_SKIRT(ItemID.SPOOKIER_SKIRT),\n    SPOOKIER_GLOVES(ItemID.SPOOKIER_GLOVES),\n    SPOOKIER_BOOTS(ItemID.SPOOKIER_BOOTS),\n    SPOOKY_HOOD(ItemID.SPOOKY_HOOD),\n    SPOOKY_ROBE(ItemID.SPOOKY_ROBE),\n    SPOOKY_SKIRT(ItemID.SPOOKY_SKIRT),\n    SPOOKY_GLOVES(ItemID.SPOOKY_GLOVES),\n    SPOOKY_BOOTS(ItemID.SPOOKY_BOOTS),\n    CAT_EARS(ItemID.CAT_EARS),\n    GIANT_BOULDER(ItemID.GIANT_BOULDER),\n    CARROT_SWORD(ItemID.CARROT_SWORD),\n    _24CARAT_SWORD(ItemID._24CARAT_SWORD),\n    MAGIC_EGG_BALL(ItemID.MAGIC_EGG_BALL),\n    GOBLIN_DECORATIONS(ItemID.GOBLIN_DECORATIONS),\n    HEADLESS_HEAD(ItemID.HEADLESS_HEAD),\n    MAGICAL_PUMPKIN(ItemID.MAGICAL_PUMPKIN),\n    _20th_ANNIVERSARY_HAT(ItemID._20TH_ANNIVERSARY_HAT),\n    _20th_ANNIVERSARY_TOP(ItemID._20TH_ANNIVERSARY_TOP),\n    _20th_ANNIVERSARY_BOTTOM(ItemID._20TH_ANNIVERSARY_BOTTOM),\n    _20th_ANNIVERSARY_NECKLACE(ItemID._20TH_ANNIVERSARY_NECKLACE),\n    _20th_ANNIVERSARY_CAPE(ItemID._20TH_ANNIVERSARY_CAPE),\n    _20th_ANNIVERSARY_GLOVES(ItemID._20TH_ANNIVERSARY_GLOVES),\n    _20th_ANNIVERSARY_BOOTS(ItemID._20TH_ANNIVERSARY_BOOTS),\n    BANANA_CAPE(ItemID.BANANA_CAPE),\n    BANANA_HAT(ItemID.BANANA_HAT),\n    CURSED_BANANA(ItemID.CURSED_BANANA),\n    FESTIVE_ELF_HAT(ItemID.FESTIVE_ELF_HAT), // find ID\n    FESTIVE_ELF_SLIPPERS(ItemID.FESTIVE_ELF_SLIPPERS),\n    GNOME_CHILD_MASK(ItemID.GNOME_CHILD_MASK),\n    GNOME_CHILD_ICON(ItemID.GNOME_CHILD_ICON),\n    GREGGS_EASTDOOR(ItemID.GREGGS_EASTDOOR),\n    HAUNTED_WINE_BOTTLE(ItemID.HAUNTED_WINE_BOTTLE),\n    SNOWMAN_RING(ItemID.SNOWMAN_RING),\n    PROPELLER_HAT(ItemID.PROPELLER_HAT),\n    SAUCEPAN(ItemID.SAUCEPAN),\n    SECRET_SANTA_PRESENT_RED(ItemID.SECRET_SANTA_PRESENT_RED),\n    SECRET_SANTA_PRESENT_BLUE(ItemID.SECRET_SANTA_PRESENT_BLUE),\n    SECRET_SANTA_PRESENT_GREEN(ItemID.SECRET_SANTA_PRESENT_GREEN),\n    SECRET_SANTA_PRESENT_BLACK(ItemID.SECRET_SANTA_PRESENT_BLACK),\n    SECRET_SANTA_PRESENT_GOLD(ItemID.SECRET_SANTA_PRESENT_GOLD),\n    ORANGE_HALLOWEEN_JUMPER(ItemID.UGLY_HALLOWEEN_JUMPER_ORANGE),\n    BLACK_HALLOWEEN_JUMPER(ItemID.UGLY_HALLOWEEN_JUMPER_BLACK),\n    SACK_OF_COAL(ItemID.SACK_OF_COAL),\n    CRATE_RING(ItemID.CRATE_RING),\n    EASTER_HAT(ItemID.EASTER_HAT),\n    FESTIVE_GAMES_CROWN(ItemID.FESTIVE_GAMES_CROWN),\n    CHRISTMAS_JUMPER(ItemID.CHRISTMAS_JUMPER),\n    HALLOWEEN_WIG(ItemID.HALLOWEEN_WIG),\n    HALLOWEEN_WIG_27499(ItemID.HALLOWEEN_WIG_27499),\n    HALLOWEEN_WIG_27501(ItemID.HALLOWEEN_WIG_27501),\n    HALLOWEEN_WIG_27503(ItemID.HALLOWEEN_WIG_27503),\n    HALLOWEEN_WIG_27505(ItemID.HALLOWEEN_WIG_27505),\n    HALLOWEEN_WIG_27507(ItemID.HALLOWEEN_WIG_27507),\n    FESTIVE_NUTCRACKER_HAT(ItemID.FESTIVE_NUTCRACKER_HAT ),\n    FEFSTIVE_NUTCRACKER_TOP(ItemID.FESTIVE_NUTCRACKER_TOP),\n    FEFSTIVE_NUTCRACKER_TROUSERS(ItemID.FESTIVE_NUTCRACKER_TROUSERS),\n    FEFSTIVE_NUTCRACKER_BOOTS(ItemID.FESTIVE_NUTCRACKER_BOOTS),\n    FEFSTIVE_NUTCRACKER_STAFF(ItemID.FESTIVE_NUTCRACKER_STAFF),\n    SWEET_NUTCRACKER_HAT(ItemID.SWEET_NUTCRACKER_HAT),\n    SWEET_NUTCRACKER_TOP(ItemID.SWEET_NUTCRACKER_TOP),\n    SWEET_NUTCRACKER_TROUSERS(ItemID.SWEET_NUTCRACKER_TROUSERS),\n    SWEET_NUTCRACKER_BOOTS(ItemID.SWEET_NUTCRACKER_BOOTS),\n    SWEET_NUTCRACKER_STAFF(ItemID.SWEET_NUTCRACKER_STAFF),\n    FLOWER_CROWN(ItemID.FLOWER_CROWN),\n    FLOWER_CROWN_27141(ItemID.FLOWER_CROWN_27141),\n    FLOWER_CROWN_27143(ItemID.FLOWER_CROWN_27143),\n    FLOWER_CROWN_27145(ItemID.FLOWER_CROWN_27145),\n    FLOWER_CROWN_27147(ItemID.FLOWER_CROWN_27147),\n    FLOWER_CROWN_27149(ItemID.FLOWER_CROWN_27149),\n    FLOWER_CROWN_27151(ItemID.FLOWER_CROWN_27151),\n    FLOWER_CROWN_27153(ItemID.FLOWER_CROWN_27153),\n    FLOWER_CROWN_27155(ItemID.FLOWER_CROWN_27155),\n    SKIS(ItemID.SKIS),\n    SANTAS_LIST(ItemID.SANTAS_LIST),\n    SNOW_GOGGLES__HAT(ItemID.SNOW_GOGGLES__HAT),\n    TREAT_CAULDRON(ItemID.TREAT_CAULDRON),\n    TREAT_CAULDRON_27465(ItemID.TREAT_CAULDRON_27465),\n    TREAT_CAULDRON_27467(ItemID.TREAT_CAULDRON_27467),\n    TREAT_CAULDRON_27469(ItemID.TREAT_CAULDRON_27469),\n    TREAT_CAULDRON_27471(ItemID.TREAT_CAULDRON_27471),\n    WITCH_HAT(ItemID.WITCH_HAT),\n    WITCH_TOP(ItemID.WITCH_TOP),\n    WITCH_ROBES(ItemID.WITCH_ROBES),\n    WITCH_BOOTS(ItemID.WITCH_BOOTS),\n    WITCH_CAPE(ItemID.WITCH_CAPE),\n    _10TH_BIRTHDAY_CAPE(ItemID._10TH_BIRTHDAY_CAPE),\n    _10TH_BIRTHDAY_BALLOONS(ItemID._10TH_BIRTHDAY_BALLOONS),\n    CAKE_HAT(ItemID.CAKE_HAT),\n    OLDSCHOOL_JUMPER(ItemID.OLDSCHOOL_JUMPER),\n    OLDSCHOOL_JUMPER_27823(ItemID.OLDSCHOOL_JUMPER_27823),\n    OLDSCHOOL_JUMPER_27824(ItemID.OLDSCHOOL_JUMPER_27824),\n    OLDSCHOOL_JUMPER_27825(ItemID.OLDSCHOOL_JUMPER_27825),\n    OLDSCHOOL_JUMPER_27826(ItemID.OLDSCHOOL_JUMPER_27826),\n    OLDSCHOOL_JUMPER_27827(ItemID.OLDSCHOOL_JUMPER_27827),\n    GNOME_CHILD_PLUSH(ItemID.GNOME_CHILD_PLUSH),\n    STRAY_DOG_PLUSH(ItemID.STRAY_DOG_PLUSH),\n    JAD_PLUSH(ItemID.JAD_PLUSH),\n    BOB_THE_CAT_SLIPPERS(ItemID.BOB_THE_CAT_SLIPPERS),\n    JAD_SLIPPERS(ItemID.JAD_SLIPPERS),\n    DRAGON_CANDLE_DAGGER(ItemID.DRAGON_CANDLE_DAGGER),\n    GNOME_CHILD_BACKPACK(ItemID.GNOME_CHILD_BACKPACK),\n    MYSTIC_CARDS(ItemID.MYSTIC_CARDS),\n    SILVER_PARTYHAT(ItemID.SILVER_PARTYHAT),\n    WAR_SHIP(ItemID.WAR_SHIP),\n    GIANT_BRONZE_DAGGER(ItemID.GIANT_BRONZE_DAGGER),\n    EASTFLOOR_SPADE(ItemID.EASTFLOOR_SPADE),\n    NEST_HAT(ItemID.NEST_HAT),\n    NEST_HAT_27877(ItemID.NEST_HAT_27877),\n    LOVE_CROSSBOW(ItemID.LOVE_CROSSBOW),\n    POETS_JACKET(ItemID.POETS_JACKET),\n    RAINBOW_JUMPER(ItemID.RAINBOW_JUMPER),\n    COBWEB_CAPE(ItemID.COBWEB_CAPE),\n    SPIDER_HAT(ItemID.SPIDER_HAT),\n    SPIDER_HAT_28605(ItemID.SPIDER_HAT_28605),\n    SPIDER_HAT_28607(ItemID.SPIDER_HAT_28607),\n    SPIDER_HAT_28609(ItemID.SPIDER_HAT_28609),\n    SPIDER_HAT_28611(ItemID.SPIDER_HAT_28611),\n    ICY_JUMPER(ItemID.ICY_JUMPER),\n    SNOWGLOBE_HELMET(ItemID.SNOWGLOBE_HELMET),\n    BOOK_OF_EGG(ItemID.BOOK_OF_EGG),\n    EGG_PRIEST_ROBE_TOP(ItemID.EGG_PRIEST_ROBE_TOP),\n    EGG_PRIEST_ROBE(ItemID.EGG_PRIEST_ROBE),\n    EGG_PRIEST_MITRE(ItemID.EGG_PRIEST_MITRE),\n    EGG_PRIEST_NECKLACE(ItemID.EGG_PRIEST_NECKLACE),\n    COLOURFUL_CAPE(ItemID.COLOURFUL_CAPE),\n    COLOURFUL_CAPE_29493(ItemID.COLOURFUL_CAPE_29493),\n    COLOURFUL_CAPE_29497(ItemID.COLOURFUL_CAPE_29497),\n    COLOURFUL_CAPE_29501(ItemID.COLOURFUL_CAPE_29501),\n    COLOURFUL_CAPE_29495(ItemID.COLOURFUL_CAPE_29495),\n    COLOURFUL_CAPE_29499(ItemID.COLOURFUL_CAPE_29499),\n    COLOURFUL_CAPE_29503(ItemID.COLOURFUL_CAPE_29503),\n    COLOURFUL_CAPE_29505(ItemID.COLOURFUL_CAPE_29505),\n    RAINBOW_CAPE(ItemID.RAINBOW_CAPE),\n    RAINBOW_CROWN_SHIRT(ItemID.RAINBOW_CROWN_SHIRT),\n    COLOURFUL_CROWN_SHIRT(ItemID.COLOURFUL_CROWN_SHIRT),\n    COLOURFUL_CROWN_SHIRT_29510(ItemID.COLOURFUL_CROWN_SHIRT_29510),\n    COLOURFUL_CROWN_SHIRT_29511(ItemID.COLOURFUL_CROWN_SHIRT_29511),\n    COLOURFUL_CROWN_SHIRT_29512(ItemID.COLOURFUL_CROWN_SHIRT_29512),\n    COLOURFUL_CROWN_SHIRT_29513(ItemID.COLOURFUL_CROWN_SHIRT_29513),\n    COLOURFUL_CROWN_SHIRT_29514(ItemID.COLOURFUL_CROWN_SHIRT_29514),\n    COLOURFUL_CROWN_SHIRT_29515(ItemID.COLOURFUL_CROWN_SHIRT_29515),\n    COLOURFUL_CROWN_SHIRT_29516(ItemID.COLOURFUL_CROWN_SHIRT_29516),\n    BEIGE_PUMPKIN_ANGRY(ItemID.BEIGE_PUMPKIN_ANGRY),\n    BEIGE_PUMPKIN_DEPRESSED(ItemID.BEIGE_PUMPKIN_DEPRESSED),\n    BEIGE_PUMPKIN_DISGUSTED(ItemID.BEIGE_PUMPKIN_DISGUSTED),\n    BEIGE_PUMPKIN_EVIL(ItemID.BEIGE_PUMPKIN_EVIL),\n    BEIGE_PUMPKIN_HAPPY(ItemID.BEIGE_PUMPKIN_HAPPY),\n    BEIGE_PUMPKIN_LAUGHING(ItemID.BEIGE_PUMPKIN_LAUGHING),\n    BEIGE_PUMPKIN_SAD(ItemID.BEIGE_PUMPKIN_SAD),\n    BEIGE_PUMPKIN_SHOCKED(ItemID.BEIGE_PUMPKIN_SHOCKED),\n    BEIGE_PUMPKIN_SILLY(ItemID.BEIGE_PUMPKIN_SILLY),\n    HALLOWEEN_SCARECROW(ItemID.HALLOWEEN_SCARECROW),\n    SCARECROW_SHIRT(ItemID.SCARECROW_SHIRT),\n    //63 Carved Pumpkin Heads omitted https://oldschool.runescape.wiki/w/Carved_pumpkin_head\n    DOG_BOOTS(ItemID.DOG_BOOTS),\n    DOG_DISGUISE(ItemID.DOG_DISGUISE),\n    FESTIVE_SCARF(ItemID.FESTIVE_SCARF),\n    PRESENT_BOX_HAT(ItemID.PRESENT_BOX_HAT),\n    CLASSIC_IMP_HOOD(ItemID.CLASSIC_IMP_HOOD),\n    CLASSIC_IMP_TAIL(ItemID.CLASSIC_IMP_TAIL),\n    CARROT_COSTUME_HAT(ItemID.CARROT_COSTUME_HAT),\n    CARROT_COSTUME_BODY(ItemID.CARROT_COSTUME_BODY),\n    CARROT_COSTUME_TIGHTS(ItemID.CARROT_COSTUME_TIGHTS),\n    CARROT_COSTUME_GLOVES(ItemID.CARROT_COSTUME_GLOVES);\n\n    private final int itemID;\n    @Getter\n    private final String location \u003d \"Toy Box\";\n    @Getter\n    private final boolean isBis;\n    ToyBox(int itemID) {\n        this.itemID \u003d itemID;\n        this.isBis \u003d false;\n    }\n}\n","filePath":"src\\main\\java\\com\\wastedbankspace\\model\\locations\\ToyBox.java"},{"fileName":"TreasureChest.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace.model.locations;\n\nimport com.wastedbankspace.model.StorableItem;\nimport lombok.Getter;\nimport net.runelite.api.ItemID;\n\n@Getter\npublic enum TreasureChest implements StorableItem {\n    AMULET_OF_DEFENCE_T(ItemID.AMULET_OF_DEFENCE_T),\n    BEAR_FEET(ItemID.BEAR_FEET),\n    DEMON_FEET(ItemID.DEMON_FEET),\n    FROG_SLIPPERS(ItemID.FROG_SLIPPERS),\n    JESTER_CAPE(ItemID.JESTER_CAPE),\n    MOLE_SLIPPERS(ItemID.MOLE_SLIPPERS),\n    MONKS_ROBE_T(ItemID.MONKS_ROBE_T),\n    MONKS_ROBE_TOP_T(ItemID.MONKS_ROBE_TOP_T),\n    RUNE_SCIMITAR_GUTHIX(ItemID.RUNE_SCIMITAR_23330),\n    RUNE_SCIMITAR_ZAMORAK(ItemID.RUNE_SCIMITAR_23332),\n    RUNE_SCIMITAR_SARADOMIN(ItemID.RUNE_SCIMITAR_23334),\n    SANDWICH_LADY_BOTTOM(ItemID.SANDWICH_LADY_BOTTOM),\n    SANDWICH_LADY_HAT(ItemID.SANDWICH_LADY_HAT),\n    SANDWICH_LADY_TOP(ItemID.SANDWICH_LADY_TOP),\n    SHOULDER_PARROT(ItemID.SHOULDER_PARROT),\n    //Easy Clues\n    AMULET_OF_MAGIC_T(ItemID.AMULET_OF_MAGIC_T),\n    AMULET_OF_POWER_T(ItemID.AMULET_OF_POWER_T),\n    BEANIE(ItemID.BEANIE),\n    BLACK_BERET(ItemID.BLACK_BERET),\n    BLUE_BERET(ItemID.BLUE_BERET),\n    RED_BERET(ItemID.RED_BERET),\n    WHITE_BERET(ItemID.WHITE_BERET),\n    BERET_MASK(ItemID.BERET_MASK),\n    BLACK_KITESHIELD_G(ItemID.BLACK_KITESHIELD_G),\n    BLACK_PLATEBODY_G(ItemID.BLACK_PLATEBODY_G),\n    BLACK_PLATELEGS_G(ItemID.BLACK_PLATELEGS_G),\n    BLACK_PLATESKIRT_G(ItemID.BLACK_PLATESKIRT_G),\n    BLACK_FULL_HELM_G(ItemID.BLACK_FULL_HELM_G),\n    BLACK_KITESHIELD_T(ItemID.BLACK_KITESHIELD_T),\n    BLACK_PLATEBODY_T(ItemID.BLACK_PLATEBODY_T),\n    BLACK_PLATELEGS_T(ItemID.BLACK_PLATELEGS_T),\n    BLACK_PLATESKIRT_T(ItemID.BLACK_PLATESKIRT_T),\n    BLACK_FULL_HELM_T(ItemID.BLACK_FULL_HELM_T),\n    BRONZE_KITESHIELD_G(ItemID.BRONZE_KITESHIELD_G),\n    BRONZE_PLATEBODY_G(ItemID.BRONZE_PLATEBODY_G),\n    BRONZE_PLATELEGS_G(ItemID.BRONZE_PLATELEGS_G),\n    BRONZE_PLATESKIRT_G(ItemID.BRONZE_PLATESKIRT_G),\n    BRONZE_FULL_HELM_G(ItemID.BRONZE_FULL_HELM_G),\n    BRONZE_KITESHIELD_T(ItemID.BRONZE_KITESHIELD_T),\n    BRONZE_PLATEBODY_T(ItemID.BRONZE_PLATEBODY_T),\n    BRONZE_PLATELEGS_T(ItemID.BRONZE_PLATELEGS_T),\n    BRONZE_PLATESKIRT_T(ItemID.BRONZE_PLATESKIRT_T),\n    BRONZE_FULL_HELM_T(ItemID.BRONZE_FULL_HELM_T),\n    IRON_KITESHIELD_G(ItemID.IRON_KITESHIELD_G),\n    IRON_PLATEBODY_G(ItemID.IRON_PLATEBODY_G),\n    IRON_PLATELEGS_G(ItemID.IRON_PLATELEGS_G),\n    IRON_PLATESKIRT_G(ItemID.IRON_PLATESKIRT_G),\n    IRON_FULL_HELM_G(ItemID.IRON_FULL_HELM_G),\n    IRON_KITESHIELD_T(ItemID.IRON_KITESHIELD_T),\n    IRON_PLATEBODY_T(ItemID.IRON_PLATEBODY_T),\n    IRON_PLATELEGS_T(ItemID.IRON_PLATELEGS_T),\n    IRON_PLATESKIRT_T(ItemID.IRON_PLATESKIRT_T),\n    IRON_FULL_HELM_T(ItemID.IRON_FULL_HELM_T),\n    STEEL_KITESHIELD_G(ItemID.STEEL_KITESHIELD_G),\n    STEEL_PLATEBODY_G(ItemID.STEEL_PLATEBODY_G),\n    STEEL_PLATELEGS_G(ItemID.STEEL_PLATELEGS_G),\n    STEEL_PLATESKIRT_G(ItemID.STEEL_PLATESKIRT_G),\n    STEEL_FULL_HELM_G(ItemID.STEEL_FULL_HELM_G),\n    STEEL_KITESHIELD_T(ItemID.STEEL_KITESHIELD_T),\n    STEEL_PLATEBODY_T(ItemID.STEEL_PLATEBODY_T),\n    STEEL_PLATELEGS_T(ItemID.STEEL_PLATELEGS_T),\n    STEEL_PLATESKIRT_T(ItemID.STEEL_PLATESKIRT_T),\n    STEEL_FULL_HELM_T(ItemID.STEEL_FULL_HELM_T),\n    BLACK_HELM_H1(ItemID.BLACK_HELM_H1),\n    BLACK_HELM_H2(ItemID.BLACK_HELM_H2),\n    BLACK_HELM_H3(ItemID.BLACK_HELM_H3),\n    BLACK_HELM_H4(ItemID.BLACK_HELM_H4),\n    BLACK_HELM_H5(ItemID.BLACK_HELM_H5),\n    BLACK_SHIELD_H1(ItemID.BLACK_SHIELD_H1),\n    BLACK_SHIELD_H2(ItemID.BLACK_SHIELD_H2),\n    BLACK_SHIELD_H3(ItemID.BLACK_SHIELD_H3),\n    BLACK_SHIELD_H4(ItemID.BLACK_SHIELD_H4),\n    BLACK_SHIELD_H5(ItemID.BLACK_SHIELD_H5),\n    BLACK_PLATEBODY_H1(ItemID.BLACK_PLATEBODY_H1),\n    BLACK_PLATEBODY_H2(ItemID.BLACK_PLATEBODY_H2),\n    BLACK_PLATEBODY_H3(ItemID.BLACK_PLATEBODY_H3),\n    BLACK_PLATEBODY_H4(ItemID.BLACK_PLATEBODY_H4),\n    BLACK_PLATEBODY_H5(ItemID.BLACK_PLATEBODY_H5),\n    BLACK_WIZARD_HAT_G(ItemID.BLACK_WIZARD_HAT_G),\n    BLACK_WIZARD_ROBE_G(ItemID.BLACK_WIZARD_ROBE_G),\n    BLACK_SKIRT_G(ItemID.BLACK_SKIRT_G),\n    BLACK_WIZARD_HAT_T(ItemID.BLACK_WIZARD_HAT_T),\n    BLACK_WIZARD_ROBE_T(ItemID.BLACK_WIZARD_ROBE_T),\n    BLACK_SKIRT_T(ItemID.BLACK_SKIRT_T),\n    ANCIENT_BLESSING(ItemID.ANCIENT_BLESSING),\n    HOLY_BLESSING(ItemID.HOLY_BLESSING),\n    HONOURABLE_BLESSING(ItemID.HONOURABLE_BLESSING),\n    PEACEFUL_BLESSING(ItemID.PEACEFUL_BLESSING),\n    UNHOLY_BLESSING(ItemID.UNHOLY_BLESSING),\n    WAR_BLESSING(ItemID.WAR_BLESSING),\n    BLUE_WIZARD_HAT_G(ItemID.BLUE_WIZARD_HAT_G),\n    BLUE_WIZARD_ROBE_G(ItemID.BLUE_WIZARD_ROBE_G),\n    BLUE_SKIRT_G(ItemID.BLUE_SKIRT_G),\n    BLUE_WIZARD_HAT_T(ItemID.BLUE_WIZARD_HAT_T),\n    BLUE_WIZARD_ROBE_T(ItemID.BLUE_WIZARD_ROBE_T),\n    BLUE_SKIRT_T(ItemID.BLUE_SKIRT_T),\n    BOBS_BLUE_SHIRT(ItemID.BOBS_BLUE_SHIRT),\n    BOBS_BLACK_SHIRT(ItemID.BOBS_BLACK_SHIRT),\n    BOBS_GREEN_SHIRT(ItemID.BOBS_GREEN_SHIRT),\n    BOBS_PURPLE_SHIRT(ItemID.BOBS_PURPLE_SHIRT),\n    BOBS_RED_SHIRT(ItemID.BOBS_RED_SHIRT),\n    BLACK_CANE(ItemID.BLACK_CANE),\n    CAPE_OF_SKULLS(ItemID.CAPE_OF_SKULLS),\n    WILLOW_COMP_BOW(ItemID.WILLOW_COMP_BOW),\n    BLUE_ELEGANT_BLOUSE(ItemID.BLUE_ELEGANT_BLOUSE),\n    BLUE_ELEGANT_LEGS(ItemID.BLUE_ELEGANT_LEGS),\n    BLUE_ELEGANT_SHIRT(ItemID.BLUE_ELEGANT_SHIRT),\n    BLUE_ELEGANT_SKIRT(ItemID.BLUE_ELEGANT_SKIRT),\n    GREEN_ELEGANT_BLOUSE(ItemID.GREEN_ELEGANT_BLOUSE),\n    GREEN_ELEGANT_LEGS(ItemID.GREEN_ELEGANT_LEGS),\n    GREEN_ELEGANT_SHIRT(ItemID.GREEN_ELEGANT_SHIRT),\n    GREEN_ELEGANT_SKIRT(ItemID.GREEN_ELEGANT_SKIRT),\n    RED_ELEGANT_BLOUSE(ItemID.RED_ELEGANT_BLOUSE),\n    RED_ELEGANT_LEGS(ItemID.RED_ELEGANT_LEGS),\n    RED_ELEGANT_SHIRT(ItemID.RED_ELEGANT_SHIRT),\n    RED_ELEGANT_SKIRT(ItemID.RED_ELEGANT_SKIRT),\n    FLARED_TROUSERS(ItemID.FLARED_TROUSERS),\n    GOLDEN_APRON(ItemID.GOLDEN_APRON),\n    GOLDEN_CHEFS_HAT(ItemID.GOLDEN_CHEFS_HAT),\n    HAM_JOINT(ItemID.HAM_JOINT),\n    HIGHWAYMAN_MASK(ItemID.HIGHWAYMAN_MASK),\n    LARGE_SPADE(ItemID.LARGE_SPADE),\n    LEATHER_BODY_G(ItemID.LEATHER_BODY_G),\n    LEATHER_CHAPS_G(ItemID.LEATHER_CHAPS_G),\n    GOBLIN_MASK(ItemID.GOBLIN_MASK),\n    IMP_MASK(ItemID.IMP_MASK),\n    MONKS_ROBE_G(ItemID.MONKS_ROBE_G),\n    MONKS_ROBE_TOP_G(ItemID.MONKS_ROBE_TOP_G),\n    PANTALOONS(ItemID.PANTALOONS),\n    RAIN_BOW(ItemID.RAIN_BOW),\n    SLEEPING_CAP(ItemID.SLEEPING_CAP),\n    STAFF_OF_BOB_THE_CAT(ItemID.STAFF_OF_BOB_THE_CAT),\n    STUDDED_BODY_G(ItemID.STUDDED_BODY_G),\n    STUDDED_CHAPS_G(ItemID.STUDDED_CHAPS_G),\n    STUDDED_BODY_T(ItemID.STUDDED_BODY_T),\n    STUDDED_CHAPS_T(ItemID.STUDDED_CHAPS_T),\n    A_POWDERED_WIG(ItemID.A_POWDERED_WIG),\n    WOODEN_SHIELD_G(ItemID.WOODEN_SHIELD_G),\n    ANCIENT_MITRE(ItemID.ANCIENT_MITRE),\n    ANCIENT_ROBE_TOP(ItemID.ANCIENT_ROBE_TOP),\n    ANCIENT_ROBE_LEGS(ItemID.ANCIENT_ROBE_LEGS),\n    ANCIENT_CLOAK(ItemID.ANCIENT_CLOAK),\n    ANCIENT_STOLE(ItemID.ANCIENT_STOLE),\n    ANCIENT_CROZIER(ItemID.ANCIENT_CROZIER),\n    ARMADYL_MITRE(ItemID.ARMADYL_MITRE),\n    ARMADYL_ROBE_TOP(ItemID.ARMADYL_ROBE_TOP),\n    ARMADYL_ROBE_LEGS(ItemID.ARMADYL_ROBE_LEGS),\n    ARMADYL_CLOAK(ItemID.ARMADYL_CLOAK),\n    ARMADYL_STOLE(ItemID.ARMADYL_STOLE),\n    ARMADYL_CROZIER(ItemID.ARMADYL_CROZIER),\n    BANDOS_MITRE(ItemID.BANDOS_MITRE),\n    BANDOS_ROBE_TOP(ItemID.BANDOS_ROBE_TOP),\n    BANDOS_ROBE_LEGS(ItemID.BANDOS_ROBE_LEGS),\n    BANDOS_CLOAK(ItemID.BANDOS_CLOAK),\n    BANDOS_STOLE(ItemID.BANDOS_STOLE),\n    BANDOS_CROZIER(ItemID.BANDOS_CROZIER),\n    GUTHIX_MITRE(ItemID.GUTHIX_MITRE),\n    GUTHIX_ROBE_TOP(ItemID.GUTHIX_ROBE_TOP),\n    GUTHIX_ROBE_LEGS(ItemID.GUTHIX_ROBE_LEGS),\n    GUTHIX_CLOAK(ItemID.GUTHIX_CLOAK),\n    GUTHIX_STOLE(ItemID.GUTHIX_STOLE),\n    GUTHIX_CROZIER(ItemID.GUTHIX_CROZIER),\n    SARADOMIN_MITRE(ItemID.SARADOMIN_MITRE),\n    SARADOMIN_ROBE_TOP(ItemID.SARADOMIN_ROBE_TOP),\n    SARADOMIN_ROBE_LEGS(ItemID.SARADOMIN_ROBE_LEGS),\n    SARADOMIN_CLOAK(ItemID.SARADOMIN_CLOAK),\n    SARADOMIN_STOLE(ItemID.SARADOMIN_STOLE),\n    SARADOMIN_CROZIER(ItemID.SARADOMIN_CROZIER),\n    ZAMORAK_MITRE(ItemID.ZAMORAK_MITRE),\n    ZAMORAK_ROBE_TOP(ItemID.ZAMORAK_ROBE_TOP),\n    ZAMORAK_ROBE_LEGS(ItemID.ZAMORAK_ROBE_LEGS),\n    ZAMORAK_CLOAK(ItemID.ZAMORAK_CLOAK),\n    ZAMORAK_STOLE(ItemID.ZAMORAK_STOLE),\n    ZAMORAK_CROZIER(ItemID.ZAMORAK_CROZIER),\n\n    //Teak treasure chest\n    ADAMANT_KITESHIELD_G(ItemID.ADAMANT_KITESHIELD_G),\n    ADAMANT_PLATEBODY_G(ItemID.ADAMANT_PLATEBODY_G),\n    ADAMANT_PLATELEGS_G(ItemID.ADAMANT_PLATELEGS_G),\n    ADAMANT_PLATESKIRT_G(ItemID.ADAMANT_PLATESKIRT_G),\n    ADAMANT_FULL_HELM_G(ItemID.ADAMANT_FULL_HELM_G),\n    ADAMANT_KITESHIELD_T(ItemID.ADAMANT_KITESHIELD_T),\n    ADAMANT_PLATEBODY_T(ItemID.ADAMANT_PLATEBODY_T),\n    ADAMANT_PLATELEGS_T(ItemID.ADAMANT_PLATELEGS_T),\n    ADAMANT_PLATESKIRT_T(ItemID.ADAMANT_PLATESKIRT_T),\n    ADAMANT_FULL_HELM_T(ItemID.ADAMANT_FULL_HELM_T),\n    ADAMANT_HELM_H1(ItemID.ADAMANT_HELM_H1),\n    ADAMANT_HELM_H2(ItemID.ADAMANT_HELM_H2),\n    ADAMANT_HELM_H3(ItemID.ADAMANT_HELM_H3),\n    ADAMANT_HELM_H4(ItemID.ADAMANT_HELM_H4),\n    ADAMANT_HELM_H5(ItemID.ADAMANT_HELM_H5),\n    ADAMANT_SHIELD_H1(ItemID.ADAMANT_SHIELD_H1),\n    ADAMANT_SHIELD_H2(ItemID.ADAMANT_SHIELD_H2),\n    ADAMANT_SHIELD_H3(ItemID.ADAMANT_SHIELD_H3),\n    ADAMANT_SHIELD_H4(ItemID.ADAMANT_SHIELD_H4),\n    ADAMANT_SHIELD_H5(ItemID.ADAMANT_SHIELD_H5),\n    ADAMANT_PLATEBODY_H1(ItemID.ADAMANT_PLATEBODY_H1),\n    ADAMANT_PLATEBODY_H2(ItemID.ADAMANT_PLATEBODY_H2),\n    ADAMANT_PLATEBODY_H3(ItemID.ADAMANT_PLATEBODY_H3),\n    ADAMANT_PLATEBODY_H4(ItemID.ADAMANT_PLATEBODY_H4),\n    ADAMANT_PLATEBODY_H5(ItemID.ADAMANT_PLATEBODY_H5),\n    ADAMANT_CANE(ItemID.ADAMANT_CANE),\n    STRENGTH_AMULET_T(ItemID.STRENGTH_AMULET_T),\n    CABBAGE_ROUND_SHIELD(ItemID.CABBAGE_ROUND_SHIELD),\n    CLIMBING_BOOTS_G(ItemID.CLIMBING_BOOTS_G),\n    CLUELESS_SCROLL(ItemID.CLUELESS_SCROLL),\n    YEW_COMP_BOW(ItemID.YEW_COMP_BOW),\n    BLACK_ELEGANT_LEGS(ItemID.BLACK_ELEGANT_LEGS),\n    BLACK_ELEGANT_SHIRT(ItemID.BLACK_ELEGANT_SHIRT),\n    WHITE_ELEGANT_BLOUSE(ItemID.WHITE_ELEGANT_BLOUSE),\n    WHITE_ELEGANT_SKIRT(ItemID.WHITE_ELEGANT_SKIRT),\n    GOLD_ELEGANT_LEGS(ItemID.GOLD_ELEGANT_LEGS),\n    GOLD_ELEGANT_SHIRT(ItemID.GOLD_ELEGANT_SHIRT),\n    GOLD_ELEGANT_BLOUSE(ItemID.GOLD_ELEGANT_BLOUSE),\n    GOLD_ELEGANT_SKIRT(ItemID.GOLD_ELEGANT_SKIRT),\n    PINK_ELEGANT_LEGS(ItemID.PINK_ELEGANT_LEGS),\n    PINK_ELEGANT_SHIRT(ItemID.PINK_ELEGANT_SHIRT),\n    PINK_ELEGANT_BLOUSE(ItemID.PINK_ELEGANT_BLOUSE),\n    PINK_ELEGANT_SKIRT(ItemID.PINK_ELEGANT_SKIRT),\n    PURPLE_ELEGANT_LEGS(ItemID.PURPLE_ELEGANT_LEGS),\n    PURPLE_ELEGANT_SHIRT(ItemID.PURPLE_ELEGANT_SHIRT),\n    PURPLE_ELEGANT_BLOUSE(ItemID.PURPLE_ELEGANT_BLOUSE),\n    PURPLE_ELEGANT_SKIRT(ItemID.PURPLE_ELEGANT_SKIRT),\n    GREEN_DHIDE_BODY_G(ItemID.GREEN_DHIDE_BODY_G),\n    GREEN_DHIDE_CHAPS_G(ItemID.GREEN_DHIDE_CHAPS_G),\n    GREEN_DHIDE_BODY_T(ItemID.GREEN_DHIDE_BODY_T),\n    GREEN_DHIDE_CHAPS_T(ItemID.GREEN_DHIDE_CHAPS_T),\n    BLACK_HEADBAND(ItemID.BLACK_HEADBAND),\n    BLUE_HEADBAND(ItemID.BLUE_HEADBAND),\n    BROWN_HEADBAND(ItemID.BROWN_HEADBAND),\n    GOLD_HEADBAND(ItemID.GOLD_HEADBAND),\n    GREEN_HEADBAND(ItemID.GREEN_HEADBAND),\n    PINK_HEADBAND(ItemID.PINK_HEADBAND),\n    RED_HEADBAND(ItemID.RED_HEADBAND),\n    WHITE_HEADBAND(ItemID.WHITE_HEADBAND),\n    HOLY_SANDALS(ItemID.HOLY_SANDALS),\n    ARCEUUS_BANNER(ItemID.ARCEUUS_BANNER),\n    HOSIDIUS_BANNER(ItemID.HOSIDIUS_BANNER),\n    LOVAKENGJ_BANNER(ItemID.LOVAKENGJ_BANNER),\n    PISCARILIUS_BANNER(ItemID.PISCARILIUS_BANNER),\n    SHAYZIEN_BANNER(ItemID.SHAYZIEN_BANNER),\n    LEPRECHAUN_HAT(ItemID.LEPRECHAUN_HAT),\n    BLACK_LEPRECHAUN_HAT(ItemID.BLACK_LEPRECHAUN_HAT),\n    CAT_MASK(ItemID.CAT_MASK),\n    PENGUIN_MASK(ItemID.PENGUIN_MASK),\n    WHITE_UNICORN_MASK(ItemID.WHITE_UNICORN_MASK),\n    WOLF_MASK(ItemID.WOLF_MASK),\n    MITHRIL_KITESHIELD_G(ItemID.MITHRIL_KITESHIELD_G),\n    MITHRIL_PLATEBODY_G(ItemID.MITHRIL_PLATEBODY_G),\n    MITHRIL_PLATELEGS_G(ItemID.MITHRIL_PLATELEGS_G),\n    MITHRIL_PLATESKIRT_G(ItemID.MITHRIL_PLATESKIRT_G),\n    MITHRIL_FULL_HELM_G(ItemID.MITHRIL_FULL_HELM_G),\n    MITHRIL_KITESHIELD_T(ItemID.MITHRIL_KITESHIELD_T),\n    MITHRIL_PLATEBODY_T(ItemID.MITHRIL_PLATEBODY_T),\n    MITHRIL_PLATELEGS_T(ItemID.MITHRIL_PLATELEGS_T),\n    MITHRIL_PLATESKIRT_T(ItemID.MITHRIL_PLATESKIRT_T),\n    MITHRIL_FULL_HELM_T(ItemID.MITHRIL_FULL_HELM_T),\n    RANGER_BOOTS(ItemID.RANGER_BOOTS),\n    SPIKED_MANACLES(ItemID.SPIKED_MANACLES),\n    BLACK_BOATER(ItemID.BLACK_BOATER),\n    BLUE_BOATER(ItemID.BLUE_BOATER),\n    GREEN_BOATER(ItemID.GREEN_BOATER),\n    ORANGE_BOATER(ItemID.ORANGE_BOATER),\n    PINK_BOATER(ItemID.PINK_BOATER),\n    PURPLE_BOATER(ItemID.PURPLE_BOATER),\n    RED_BOATER(ItemID.RED_BOATER),\n    WHITE_BOATER(ItemID.WHITE_BOATER),\n    CRIER_BELL(ItemID.CRIER_BELL),\n    CRIER_COAT(ItemID.CRIER_COAT),\n    CRIER_HAT(ItemID.CRIER_HAT),\n    WIZARD_BOOTS(ItemID.WIZARD_BOOTS),\n    WOLF_CLOAK(ItemID.WOLF_CLOAK),\n\n    // Mahogany treasure chest\n    _3RD_AGE_AMULET(ItemID._3RD_AGE_AMULET),\n    _3RD_AGE_MAGE_HAT(ItemID._3RD_AGE_MAGE_HAT),\n    _3RD_AGE_ROBE(ItemID._3RD_AGE_ROBE),\n    _3RD_AGE_ROBE_20577(ItemID._3RD_AGE_ROBE_20577),\n    _3RD_AGE_ROBE_TOP(ItemID._3RD_AGE_ROBE_TOP),\n    _3RD_AGE_ROBE_TOP_20576(ItemID._3RD_AGE_ROBE_TOP_20576),\n    _3RD_AGE_FULL_HELMET(ItemID._3RD_AGE_FULL_HELMET),\n    _3RD_AGE_KITESHIELD(ItemID._3RD_AGE_KITESHIELD),\n    _3RD_AGE_PLATEBODY(ItemID._3RD_AGE_PLATEBODY),\n    _3RD_AGE_PLATELEGS(ItemID._3RD_AGE_PLATELEGS),\n    _3RD_AGE_PLATESKIRT(ItemID._3RD_AGE_PLATESKIRT),\n    _3RD_AGE_RANGE_COIF(ItemID._3RD_AGE_RANGE_COIF),\n    _3RD_AGE_RANGE_LEGS(ItemID._3RD_AGE_RANGE_LEGS),\n    _3RD_AGE_RANGE_TOP(ItemID._3RD_AGE_RANGE_TOP),\n    _3RD_AGE_VAMBRACES(ItemID._3RD_AGE_VAMBRACES),\n    AMULET_OF_GLORY_T(ItemID.AMULET_OF_GLORY_T),\n    AMULET_OF_GLORY_T1(ItemID.AMULET_OF_GLORY_T1),\n    AMULET_OF_GLORY_T2(ItemID.AMULET_OF_GLORY_T2),\n    AMULET_OF_GLORY_T3(ItemID.AMULET_OF_GLORY_T3),\n    AMULET_OF_GLORY_T4(ItemID.AMULET_OF_GLORY_T4),\n    AMULET_OF_GLORY_T5(ItemID.AMULET_OF_GLORY_T5),\n    AMULET_OF_GLORY_T6(ItemID.AMULET_OF_GLORY_T6),\n    ANCIENT_DHIDE_BODY(ItemID.ANCIENT_DHIDE_BODY),\n    ANCIENT_DHIDE_BOOTS(ItemID.ANCIENT_DHIDE_BOOTS),\n    ANCIENT_BRACERS(ItemID.ANCIENT_BRACERS),\n    ANCIENT_CHAPS(ItemID.ANCIENT_CHAPS),\n    ANCIENT_COIF(ItemID.ANCIENT_COIF),\n    ANCIENT_DHIDE_SHIELD(ItemID.ANCIENT_DHIDE_SHIELD),\n    ARMADYL_DHIDE_BODY(ItemID.ARMADYL_DHIDE_BODY),\n    ARMADYL_DHIDE_BOOTS(ItemID.ARMADYL_DHIDE_BOOTS),\n    ARMADYL_BRACERS(ItemID.ARMADYL_BRACERS),\n    ARMADYL_CHAPS(ItemID.ARMADYL_CHAPS),\n    ARMADYL_COIF(ItemID.ARMADYL_COIF),\n    ARMADYL_DHIDE_SHIELD(ItemID.ARMADYL_DHIDE_SHIELD),\n    BANDOS_DHIDE_BODY(ItemID.BANDOS_DHIDE_BODY),\n    BANDOS_DHIDE_BOOTS(ItemID.BANDOS_DHIDE_BOOTS),\n    BANDOS_BRACERS(ItemID.BANDOS_BRACERS),\n    BANDOS_CHAPS(ItemID.BANDOS_CHAPS),\n    BANDOS_COIF(ItemID.BANDOS_COIF),\n    BANDOS_DHIDE_SHIELD(ItemID.BANDOS_DHIDE_SHIELD),\n    GUTHIX_DHIDE_BODY(ItemID.GUTHIX_DHIDE_BODY),\n    GUTHIX_DHIDE_BOOTS(ItemID.GUTHIX_DHIDE_BOOTS),\n    GUTHIX_BRACERS(ItemID.GUTHIX_BRACERS),\n    GUTHIX_CHAPS(ItemID.GUTHIX_CHAPS),\n    GUTHIX_COIF(ItemID.GUTHIX_COIF),\n    GUTHIX_DHIDE_SHIELD(ItemID.GUTHIX_DHIDE_SHIELD),\n    SARADOMIN_DHIDE_BODY(ItemID.SARADOMIN_DHIDE_BODY),\n    SARADOMIN_DHIDE_BOOTS(ItemID.SARADOMIN_DHIDE_BOOTS),\n    SARADOMIN_BRACERS(ItemID.SARADOMIN_BRACERS),\n    SARADOMIN_CHAPS(ItemID.SARADOMIN_CHAPS),\n    SARADOMIN_COIF(ItemID.SARADOMIN_COIF),\n    SARADOMIN_DHIDE_SHIELD(ItemID.SARADOMIN_DHIDE_SHIELD),\n    ZAMORAK_DHIDE_BODY(ItemID.ZAMORAK_DHIDE_BODY),\n    ZAMORAK_DHIDE_BOOTS(ItemID.ZAMORAK_DHIDE_BOOTS),\n    ZAMORAK_BRACERS(ItemID.ZAMORAK_BRACERS),\n    ZAMORAK_CHAPS(ItemID.ZAMORAK_CHAPS),\n    ZAMORAK_COIF(ItemID.ZAMORAK_COIF),\n    ZAMORAK_DHIDE_SHIELD(ItemID.ZAMORAK_DHIDE_SHIELD),\n    BLUE_DHIDE_BODY_G(ItemID.BLUE_DHIDE_BODY_G),\n    BLUE_DHIDE_CHAPS_G(ItemID.BLUE_DHIDE_CHAPS_G),\n    BLUE_DHIDE_BODY_T(ItemID.BLUE_DHIDE_BODY_T),\n    BLUE_DHIDE_CHAPS_T(ItemID.BLUE_DHIDE_CHAPS_T),\n    RUNE_CANE(ItemID.RUNE_CANE),\n    BLACK_CAVALIER(ItemID.BLACK_CAVALIER),\n    NAVY_CAVALIER(ItemID.NAVY_CAVALIER),\n    TAN_CAVALIER(ItemID.TAN_CAVALIER),\n    DARK_CAVALIER(ItemID.DARK_CAVALIER),\n    RED_CAVALIER(ItemID.RED_CAVALIER),\n    WHITE_CAVALIER(ItemID.WHITE_CAVALIER),\n    CAVALIER_MASK(ItemID.CAVALIER_MASK),\n    MAGIC_COMP_BOW(ItemID.MAGIC_COMP_BOW),\n    CYCLOPS_HEAD(ItemID.CYCLOPS_HEAD),\n    DRAGON_BOOTS_G(ItemID.DRAGON_BOOTS_G),\n    BLACK_DRAGON_MASK(ItemID.BLACK_DRAGON_MASK),\n    BLUE_DRAGON_MASK(ItemID.BLUE_DRAGON_MASK),\n    GREEN_DRAGON_MASK(ItemID.GREEN_DRAGON_MASK),\n    RED_DRAGON_MASK(ItemID.RED_DRAGON_MASK),\n    NUNCHAKU(ItemID.NUNCHAKU),\n    ENCHANTED_HAT(ItemID.ENCHANTED_HAT),\n    ENCHANTED_ROBE(ItemID.ENCHANTED_ROBE),\n    ENCHANTED_TOP(ItemID.ENCHANTED_TOP),\n    DUAL_SAI(ItemID.DUAL_SAI),\n    EXPLORER_BACKPACK(ItemID.EXPLORER_BACKPACK),\n    PIRATES_HAT(ItemID.PIRATES_HAT),\n    PITH_HELMET(ItemID.PITH_HELMET),\n    RED_DHIDE_BODY_G(ItemID.RED_DHIDE_BODY_G),\n    RED_DHIDE_CHAPS_G(ItemID.RED_DHIDE_CHAPS_G),\n    RED_DHIDE_BODY_T(ItemID.RED_DHIDE_BODY_T),\n    RED_DHIDE_CHAPS_T(ItemID.RED_DHIDE_CHAPS_T),\n    ROBIN_HOOD_HAT(ItemID.ROBIN_HOOD_HAT),\n    GILDED_2H_SWORD(ItemID.GILDED_2H_SWORD),\n    ANCIENT_KITESHIELD(ItemID.ANCIENT_KITESHIELD),\n    ANCIENT_PLATEBODY(ItemID.ANCIENT_PLATEBODY),\n    ANCIENT_PLATELEGS(ItemID.ANCIENT_PLATELEGS),\n    ANCIENT_PLATESKIRT(ItemID.ANCIENT_PLATESKIRT),\n    ANCIENT_FULL_HELM(ItemID.ANCIENT_FULL_HELM),\n    ARMADYL_KITESHIELD(ItemID.ARMADYL_KITESHIELD),\n    ARMADYL_PLATEBODY(ItemID.ARMADYL_PLATEBODY),\n    ARMADYL_PLATELEGS(ItemID.ARMADYL_PLATELEGS),\n    ARMADYL_PLATESKIRT(ItemID.ARMADYL_PLATESKIRT),\n    ARMADYL_FULL_HELM(ItemID.ARMADYL_FULL_HELM),\n    BANDOS_KITESHIELD(ItemID.BANDOS_KITESHIELD),\n    BANDOS_PLATEBODY(ItemID.BANDOS_PLATEBODY),\n    BANDOS_PLATELEGS(ItemID.BANDOS_PLATELEGS),\n    BANDOS_PLATESKIRT(ItemID.BANDOS_PLATESKIRT),\n    BANDOS_FULL_HELM(ItemID.BANDOS_FULL_HELM),\n    GILDED_KITESHIELD(ItemID.GILDED_KITESHIELD),\n    GILDED_PLATEBODY(ItemID.GILDED_PLATEBODY),\n    GILDED_PLATELEGS(ItemID.GILDED_PLATELEGS),\n    GILDED_PLATESKIRT(ItemID.GILDED_PLATESKIRT),\n    GILDED_FULL_HELM(ItemID.GILDED_FULL_HELM),\n    GUTHIX_KITESHIELD(ItemID.GUTHIX_KITESHIELD),\n    GUTHIX_PLATEBODY(ItemID.GUTHIX_PLATEBODY),\n    GUTHIX_PLATELEGS(ItemID.GUTHIX_PLATELEGS),\n    GUTHIX_PLATESKIRT(ItemID.GUTHIX_PLATESKIRT),\n    GUTHIX_FULL_HELM(ItemID.GUTHIX_FULL_HELM),\n    SARADOMIN_KITESHIELD(ItemID.SARADOMIN_KITESHIELD),\n    SARADOMIN_PLATEBODY(ItemID.SARADOMIN_PLATEBODY),\n    SARADOMIN_PLATELEGS(ItemID.SARADOMIN_PLATELEGS),\n    SARADOMIN_PLATESKIRT(ItemID.SARADOMIN_PLATESKIRT),\n    SARADOMIN_FULL_HELM(ItemID.SARADOMIN_FULL_HELM),\n    ZAMORAK_KITESHIELD(ItemID.ZAMORAK_KITESHIELD),\n    ZAMORAK_PLATEBODY(ItemID.ZAMORAK_PLATEBODY),\n    ZAMORAK_PLATELEGS(ItemID.ZAMORAK_PLATELEGS),\n    ZAMORAK_PLATESKIRT(ItemID.ZAMORAK_PLATESKIRT),\n    ZAMORAK_FULL_HELM(ItemID.ZAMORAK_FULL_HELM),\n    RUNE_KITESHIELD_G(ItemID.RUNE_KITESHIELD_G),\n    RUNE_PLATEBODY_G(ItemID.RUNE_PLATEBODY_G),\n    RUNE_PLATELEGS_G(ItemID.RUNE_PLATELEGS_G),\n    RUNE_PLATESKIRT_G(ItemID.RUNE_PLATESKIRT_G),\n    RUNE_FULL_HELM_G(ItemID.RUNE_FULL_HELM_G),\n    RUNE_KITESHIELD_T(ItemID.RUNE_KITESHIELD_T),\n    RUNE_PLATEBODY_T(ItemID.RUNE_PLATEBODY_T),\n    RUNE_PLATELEGS_T(ItemID.RUNE_PLATELEGS_T),\n    RUNE_PLATESKIRT_T(ItemID.RUNE_PLATESKIRT_T),\n    RUNE_FULL_HELM_T(ItemID.RUNE_FULL_HELM_T),\n    GILDED_CHAINBODY(ItemID.GILDED_CHAINBODY),\n    GILDED_HASTA(ItemID.GILDED_HASTA),\n    GILDED_MED_HELM(ItemID.GILDED_MED_HELM),\n    GILDED_SPEAR(ItemID.GILDED_SPEAR),\n    GILDED_SQ_SHIELD(ItemID.GILDED_SQ_SHIELD),\n    RUNE_HELM_H1(ItemID.RUNE_HELM_H1),\n    RUNE_HELM_H2(ItemID.RUNE_HELM_H2),\n    RUNE_HELM_H3(ItemID.RUNE_HELM_H3),\n    RUNE_HELM_H4(ItemID.RUNE_HELM_H4),\n    RUNE_HELM_H5(ItemID.RUNE_HELM_H5),\n    RUNE_SHIELD_H1(ItemID.RUNE_SHIELD_H1),\n    RUNE_SHIELD_H2(ItemID.RUNE_SHIELD_H2),\n    RUNE_SHIELD_H3(ItemID.RUNE_SHIELD_H3),\n    RUNE_SHIELD_H4(ItemID.RUNE_SHIELD_H4),\n    RUNE_SHIELD_H5(ItemID.RUNE_SHIELD_H5),\n    RUNE_PLATEBODY_H1(ItemID.RUNE_PLATEBODY_H1),\n    RUNE_PLATEBODY_H2(ItemID.RUNE_PLATEBODY_H2),\n    RUNE_PLATEBODY_H3(ItemID.RUNE_PLATEBODY_H3),\n    RUNE_PLATEBODY_H4(ItemID.RUNE_PLATEBODY_H4),\n    RUNE_PLATEBODY_H5(ItemID.RUNE_PLATEBODY_H5),\n    THIEVING_BAG(ItemID.THIEVING_BAG),\n    ZOMBIE_HEAD_19912(ItemID.ZOMBIE_HEAD_19912),\n\n    //ELITE CLUES\n    _3RD_AGE_BOW(ItemID._3RD_AGE_BOW),\n    _3RD_AGE_CLOAK(ItemID._3RD_AGE_CLOAK),\n    _3RD_AGE_LONGSWORD(ItemID._3RD_AGE_LONGSWORD),\n    _3RD_AGE_WAND(ItemID._3RD_AGE_WAND),\n    AFRO(ItemID.AFRO),\n    BLACK_DHIDE_BODY_G(ItemID.BLACK_DHIDE_BODY_G),\n    BLACK_DHIDE_CHAPS_G(ItemID.BLACK_DHIDE_CHAPS_G),\n    BLACK_DHIDE_BODY_T(ItemID.BLACK_DHIDE_BODY_T),\n    BLACK_DHIDE_CHAPS_T(ItemID.BLACK_DHIDE_CHAPS_T),\n    BLACKSMITHS_HELM(ItemID.BLACKSMITHS_HELM),\n    BRIEFCASE(ItemID.BRIEFCASE),\n    BUCKET_HELM(ItemID.BUCKET_HELM),\n    DRAGON_CANE(ItemID.DRAGON_CANE),\n    DEERSTALKER(ItemID.DEERSTALKER),\n    DRAGON_KITESHIELD_G(ItemID.DRAGON_KITESHIELD_G),\n    DRAGON_SQ_SHIELD_G(ItemID.DRAGON_SQ_SHIELD_G),\n    DRAGON_PLATEBODY_G(ItemID.DRAGON_PLATEBODY_G),\n    DRAGON_PLATELEGS_G(ItemID.DRAGON_PLATELEGS_G),\n    DRAGON_PLATESKIRT_G(ItemID.DRAGON_PLATESKIRT_G),\n    DRAGON_FULL_HELM_G(ItemID.DRAGON_FULL_HELM_G),\n    ADAMANT_DRAGON_MASK(ItemID.ADAMANT_DRAGON_MASK),\n    RUNE_DRAGON_MASK(ItemID.RUNE_DRAGON_MASK),\n    BRONZE_DRAGON_MASK(ItemID.BRONZE_DRAGON_MASK),\n    IRON_DRAGON_MASK(ItemID.IRON_DRAGON_MASK),\n    LAVA_DRAGON_MASK(ItemID.LAVA_DRAGON_MASK),\n    MITHRIL_DRAGON_MASK(ItemID.MITHRIL_DRAGON_MASK),\n    STEEL_DRAGON_MASK(ItemID.STEEL_DRAGON_MASK),\n    DRAGON_SCIMITAR_OR(ItemID.DRAGON_SCIMITAR_OR),\n    GILDED_DHIDE_BODY(ItemID.GILDED_DHIDE_BODY),\n    GILDED_DHIDE_CHAPS(ItemID.GILDED_DHIDE_CHAPS),\n    GILDED_DHIDE_VAMBRACES(ItemID.GILDED_DHIDE_VAMBRACES),\n    GILDED_COIF(ItemID.GILDED_COIF),\n    FREMENNIK_KILT(ItemID.FREMENNIK_KILT),\n    GIANT_BOOT(ItemID.GIANT_BOOT),\n    HEAVY_CASKET(ItemID.HEAVY_CASKET),\n    HOLY_WRAPS(ItemID.HOLY_WRAPS),\n    KATANA(ItemID.KATANA),\n    ARCEUUS_SCARF(ItemID.ARCEUUS_SCARF),\n    HOSIDIUS_SCARF(ItemID.HOSIDIUS_SCARF),\n    LOVAKENGJ_SCARF(ItemID.LOVAKENGJ_SCARF),\n    PISCARILIUS_SCARF(ItemID.PISCARILIUS_SCARF),\n    SHAYZIEN_SCARF(ItemID.SHAYZIEN_SCARF),\n    MONOCLE(ItemID.MONOCLE),\n    MUSKETEER_HAT(ItemID.MUSKETEER_HAT),\n    MUSKETEER_PANTS(ItemID.MUSKETEER_PANTS),\n    MUSKETEER_TABARD(ItemID.MUSKETEER_TABARD),\n    PARTYHAT__SPECS(ItemID.PARTYHAT__SPECS),\n    PIRATE_HAT__PATCH(ItemID.PIRATE_HAT__PATCH),\n    BIG_PIRATE_HAT(ItemID.BIG_PIRATE_HAT),\n    RANGER_GLOVES(ItemID.RANGER_GLOVES),\n    RANGERS_TIGHTS(ItemID.RANGERS_TIGHTS),\n    RANGERS_TUNIC(ItemID.RANGERS_TUNIC),\n    RING_OF_3RD_AGE(ItemID.RING_OF_3RD_AGE),\n    RING_OF_NATURE(ItemID.RING_OF_NATURE),\n    ROYAL_CROWN(ItemID.ROYAL_CROWN),\n    ROYAL_SCEPTRE(ItemID.ROYAL_SCEPTRE),\n    ROYAL_GOWN_BOTTOM(ItemID.ROYAL_GOWN_BOTTOM),\n    ROYAL_GOWN_TOP(ItemID.ROYAL_GOWN_TOP),\n    GILDED_AXE(ItemID.GILDED_AXE),\n    GILDED_BOOTS(ItemID.GILDED_BOOTS),\n    GILDED_PICKAXE(ItemID.GILDED_PICKAXE),\n    GILDED_SCIMITAR(ItemID.GILDED_SCIMITAR),\n    GILDED_SPADE(ItemID.GILDED_SPADE),\n    SAGACIOUS_SPECTACLES(ItemID.SAGACIOUS_SPECTACLES),\n    TOP_HAT__MONOCLE(ItemID.TOP_HAT__MONOCLE),\n    TOP_HAT(ItemID.TOP_HAT),\n    DARK_TUXEDO_CUFFS(ItemID.DARK_TUXEDO_CUFFS),\n    DARK_TUXEDO_JACKET(ItemID.DARK_TUXEDO_JACKET),\n    DARK_TUXEDO_SHOES(ItemID.DARK_TUXEDO_SHOES),\n    DARK_BOW_TIE(ItemID.DARK_BOW_TIE),\n    DARK_TROUSERS(ItemID.DARK_TROUSERS),\n    LIGHT_TUXEDO_CUFFS(ItemID.LIGHT_TUXEDO_CUFFS),\n    LIGHT_TUXEDO_JACKET(ItemID.LIGHT_TUXEDO_JACKET),\n    LIGHT_TUXEDO_SHOES(ItemID.LIGHT_TUXEDO_SHOES),\n    LIGHT_BOW_TIE(ItemID.LIGHT_BOW_TIE),\n    LIGHT_TROUSERS(ItemID.LIGHT_TROUSERS),\n    URIS_HAT(ItemID.URIS_HAT),\n\n\n    //MASTER CLUES\n    _3RD_AGE_AXE(ItemID._3RD_AGE_AXE),\n    _3RD_AGE_DRUIDIC_CLOAK(ItemID._3RD_AGE_DRUIDIC_CLOAK),\n    _3RD_AGE_DRUIDIC_ROBE_BOTTOMS(ItemID._3RD_AGE_DRUIDIC_ROBE_BOTTOMS),\n    _3RD_AGE_DRUIDIC_ROBE_TOP(ItemID._3RD_AGE_DRUIDIC_ROBE_TOP),\n    _3RD_AGE_DRUIDIC_STAFF(ItemID._3RD_AGE_DRUIDIC_STAFF),\n    _3RD_AGE_PICKAXE(ItemID._3RD_AGE_PICKAXE),\n    ANKOU_GLOVES(ItemID.ANKOU_GLOVES),\n    ANKOU_MASK(ItemID.ANKOU_MASK),\n    ANKOU_SOCKS(ItemID.ANKOU_SOCKS),\n    ANKOU_TOP(ItemID.ANKOU_TOP),\n    ANKOUS_LEGGINGS(ItemID.ANKOUS_LEGGINGS),\n    BOWL_WIG(ItemID.BOWL_WIG),\n    BUCKET_HELM_G(ItemID.BUCKET_HELM_G),\n    LEFT_EYE_PATCH(ItemID.LEFT_EYE_PATCH),\n    FANCY_TIARA(ItemID.FANCY_TIARA),\n    HALF_MOON_SPECTACLES(ItemID.HALF_MOON_SPECTACLES),\n    ARCEUUS_HOOD(ItemID.ARCEUUS_HOOD),\n    HOSIDIUS_HOOD(ItemID.HOSIDIUS_HOOD),\n    LOVAKENGJ_HOOD(ItemID.LOVAKENGJ_HOOD),\n    PISCARILIUS_HOOD(ItemID.PISCARILIUS_HOOD),\n    SHAYZIEN_HOOD(ItemID.SHAYZIEN_HOOD),\n    BLACK_DEMON_MASK(ItemID.BLACK_DEMON_MASK),\n    GREATER_DEMON_MASK(ItemID.GREATER_DEMON_MASK),\n    JUNGLE_DEMON_MASK(ItemID.JUNGLE_DEMON_MASK),\n    LESSER_DEMON_MASK(ItemID.LESSER_DEMON_MASK),\n    OLD_DEMON_MASK(ItemID.OLD_DEMON_MASK),\n    MUMMYS_BODY(ItemID.MUMMYS_BODY),\n    MUMMYS_FEET(ItemID.MUMMYS_FEET),\n    MUMMYS_HANDS(ItemID.MUMMYS_HANDS),\n    MUMMYS_HEAD(ItemID.MUMMYS_HEAD),\n    MUMMYS_LEGS(ItemID.MUMMYS_LEGS),\n    OBSIDIAN_CAPE_R(ItemID.OBSIDIAN_CAPE_R),\n    RING_OF_COINS(ItemID.RING_OF_COINS),\n    HOOD_OF_DARKNESS(ItemID.HOOD_OF_DARKNESS),\n    BOOTS_OF_DARKNESS(ItemID.BOOTS_OF_DARKNESS),\n    GLOVES_OF_DARKNESS(ItemID.GLOVES_OF_DARKNESS),\n    ROBE_BOTTOM_OF_DARKNESS(ItemID.ROBE_BOTTOM_OF_DARKNESS),\n    ROBE_TOP_OF_DARKNESS(ItemID.ROBE_TOP_OF_DARKNESS),\n    SAMURAI_BOOTS(ItemID.SAMURAI_BOOTS),\n    SAMURAI_GLOVES(ItemID.SAMURAI_GLOVES),\n    SAMURAI_GREAVES(ItemID.SAMURAI_GREAVES),\n    SAMURAI_SHIRT(ItemID.SAMURAI_SHIRT),\n    SAMURAI_KASA(ItemID.SAMURAI_KASA),\n    SCROLL_SACK(ItemID.SCROLL_SACK);\n    \n    private final int itemID;\n    @Getter\n    private final String location \u003d \"Treasure Chest\";\n    @Getter\n    private final boolean isBis;\n    TreasureChest(int itemID) {\n        this.itemID \u003d itemID;\n        this.isBis \u003d false;\n    }\n}\n","filePath":"src\\main\\java\\com\\wastedbankspace\\model\\locations\\TreasureChest.java"},{"fileName":"StorableItem.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace.model;\n\npublic interface StorableItem {\n    int getItemID();\n    String getLocation();\n    boolean isBis();\n}\n","filePath":"src\\main\\java\\com\\wastedbankspace\\model\\StorableItem.java"},{"fileName":"StorageLocationEnabler.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace.model;\n\nimport lombok.Getter;\n\nimport java.util.function.Supplier;\n\n@Getter\npublic class StorageLocationEnabler\n{\n\tprivate final Supplier\u003cBoolean\u003e storageLocationEnabled;\n\tprivate final StorableItem[] storableItems;\n\n\tpublic StorageLocationEnabler(Supplier\u003cBoolean\u003e storageLocationEnabled, StorableItem[] storableItems)\n\t{\n\t\tthis.storageLocationEnabled \u003d storageLocationEnabled;\n\t\tthis.storableItems \u003d storableItems;\n\t}\n\n\tpublic StorableItem[] GetStorableItemsIfEnabled()\n\t{\n\t\treturn storageLocationEnabled.get() ? storableItems : new StorableItem[0];\n\t}\n}\n","filePath":"src\\main\\java\\com\\wastedbankspace\\model\\StorageLocationEnabler.java"},{"fileName":"StorageLocations.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace.model;\n\nimport com.wastedbankspace.model.locations.*;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.game.ItemManager;\n\nimport java.util.*;\nimport java.util.stream.Collectors;\n\n@Slf4j\n@Getter\npublic class StorageLocations\n{\n\t/**\n\t * itemNameMap: Maps a storable item ID to the corresponding item name\n\t */\n\tprivate static final Map\u003cInteger, String\u003e itemNameMap \u003d new HashMap\u003c\u003e();\n\n\t/**\n\t *\titemIdMap: Maps item ID to items that are storable (see registerItems)\n\t */\n\t@Getter\n\tprivate static final Map\u003cInteger, StorableItem\u003e itemIdMap \u003d new HashMap\u003c\u003e();\n\n\t/**\n\t *\tmodifiedItemNameMap: Maps item name to item ID after cleaning name string.\n\t *\tNote: Use TreeMap instead of hashmap so that we can use string case-insensitive comparison\n\t *\t\tin order to access values\n\t */\n\t@Getter\n\tprivate static final Map\u003cString, Integer\u003e modifiedItemNameMap \u003d new TreeMap\u003c\u003e(String.CASE_INSENSITIVE_ORDER);\n\n\tstatic\n\t{\n\t\t// Currently just run ([A-Za-z]+)\\.java replaced with registerItems($1.class);\n\t\t// on the ls of the model.locations folder\n\t\tregisterItems(ArmourCase.class);\n\t\tregisterItems(Bookcase.class);\n\t\tregisterItems(CapeRack.class);\n\t\tregisterItems(ElnockInquisitor.class);\n\t\tregisterItems(FancyDressBox.class);\n\t\tregisterItems(FlamtaerBag.class);\n\t\tregisterItems(ForestryKit.class);\n\t\tregisterItems(FossilStorage.class);\n\t\tregisterItems(HuntsmansKit.class);\n\t\tregisterItems(MagicWardrobe.class);\n\t\tregisterItems(MasterScrollBook.class);\n\t\tregisterItems(MysteriousStranger.class);\n\t\tregisterItems(NightmareZone.class);\n\t\tregisterItems(PetHouse.class);\n\t\tregisterItems(SeedVault.class);\n\t\tregisterItems(SpiceRack.class);\n\t\tregisterItems(SteelKeyRing.class);\n\t\tregisterItems(TackleBox.class);\n\t\tregisterItems(ToolLeprechaun.class);\n\t\tregisterItems(ToyBox.class);\n\t\tregisterItems(TreasureChest.class);\n\t}\n\n\tprivate static \u003cE extends Enum\u003cE\u003e \u0026 StorableItem\u003e void registerItems(Class\u003cE\u003e enumClass)\n\t{\n\t\tfor (E item : enumClass.getEnumConstants())\n\t\t{\n\t\t\titemIdMap.put(item.getItemID(), item);\n\t\t}\n\t\tlog.debug(\"Registered items from {}\", enumClass.getSimpleName());\n\t}\n\n\tpublic static void prepareStorableItemNames(ItemManager itemManager)\n\t{\n\t\tlog.debug(\"Starting prepareStorableItemNames()\");\n\t\tlog.debug(\"itemIdMap contents before preparing: {}\", itemIdMap.values());\n\n\t\tfor (StorableItem item : itemIdMap.values())\n\t\t{\n\t\t\tString item_name \u003d itemManager.getItemComposition(item.getItemID()).getName();\n\t\t\titemNameMap.put(item.getItemID(), item_name);\n\t\t\t// Standardize name\u0027s to lowercase and remove spaces for case-insensitive comparison\n\t\t\tString cleaned_item_name \u003d item_name.toLowerCase().replaceAll(\"\\\\s+\", \"\");\n\t\t\tmodifiedItemNameMap.put(cleaned_item_name, item.getItemID());\n\t\t}\n\t\tif (itemIdMap.size() \u003d\u003d itemNameMap.size())\n\t\t{\n\t\t\tlog.debug(\"Successfully prepared storableItemNameMap\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlog.warn(\"prepareStorableItemNames() did not successfully prepare storableItemNameMap\");\n\t\t}\n\t}\n\n\tpublic static boolean isItemStorable(int id)\n\t{\n\t\treturn itemIdMap.containsKey(id);\n\t}\n\n\t/**\n\t * Converts a set of item IDs into a set of their corresponding item names.\n\t *\n\t * @param itemIds A set of item IDs to be converted.\n\t * @return A set of item names corresponding to the provided item IDs.\n\t */\n\tpublic static List\u003cString\u003e itemIdsToString(Set\u003cInteger\u003e itemIds)\n\t{\n\t\treturn itemIds.stream()\n\t\t\t.map(itemNameMap::get)\n\t\t\t.collect(Collectors.toList());\n\t}\n\n\tpublic static StorableItem getStorableItem(Integer id)\n\t{\n\t\treturn itemIdMap.get(id);\n\t}\n\n\tpublic static String getStorableItemName(Integer id)\n\t{\n\t\treturn itemNameMap.get(id);\n\t}\n\n\tpublic static Integer getStorableItemId(String name)\n\t{\n\t\treturn modifiedItemNameMap.get(name);\n\t}\n}\n","filePath":"src\\main\\java\\com\\wastedbankspace\\model\\StorageLocations.java"},{"fileName":"OverlayImage.java","content":"package com.wastedbankspace.ui.overlay;\n\nimport com.wastedbankspace.WastedBankSpacePlugin;\nimport lombok.Getter;\nimport net.runelite.client.ui.overlay.components.ImageComponent;\nimport net.runelite.client.util.ImageUtil;\n\n@Getter\npublic enum OverlayImage {\n    DEFAULT(\"Default\", new ImageComponent(ImageUtil.loadImageResource(WastedBankSpacePlugin.class, \"/000-overlaySmoller.png\"))),\n    X(\"X\", new ImageComponent(ImageUtil.loadImageResource(WastedBankSpacePlugin.class, \"/001-close.png\"))),\n    ARROW(\"Arrow\", new ImageComponent(ImageUtil.loadImageResource(WastedBankSpacePlugin.class, \"/002-arrow-bottom.png\"))),\n    PUMPKIN(\"Spooky\", new ImageComponent(ImageUtil.loadImageResource(WastedBankSpacePlugin.class, \"/003-pumpkin.png\"))),\n    TRASH_1(\"Trash 1\", new ImageComponent(ImageUtil.loadImageResource(WastedBankSpacePlugin.class, \"/004-trash.png\"))),\n    TRASH_2(\"Trash 2\", new ImageComponent(ImageUtil.loadImageResource(WastedBankSpacePlugin.class, \"/005-trash-bin.png\"))),\n    MAX(\"Max\", new ImageComponent(ImageUtil.loadImageResource(WastedBankSpacePlugin.class, \"/006-maximize.png\"))),\n    W(\"W\",new ImageComponent(ImageUtil.loadImageResource(WastedBankSpacePlugin.class, \"/007-letter-w.png\"))),\n    ONE(\"Finger\", new ImageComponent(ImageUtil.loadImageResource(WastedBankSpacePlugin.class, \"/008-one.png\"))),\n    PRETTY_1(\"Pretty 1\", new ImageComponent(ImageUtil.loadImageResource(WastedBankSpacePlugin.class, \"/009-thai-pattern.png\"))),\n    PRETTY_2(\"Pretty 2\", new ImageComponent(ImageUtil.loadImageResource(WastedBankSpacePlugin.class, \"/010-Pretty2.png\"))),\n    PRETTY_3(\"Pretty 3\", new ImageComponent(ImageUtil.loadImageResource(WastedBankSpacePlugin.class, \"/011-Pretty3.png\"))),\n    DOT_BLUE(\"Blue Dot\", new ImageComponent(ImageUtil.loadImageResource(WastedBankSpacePlugin.class, \"/012-Dot_Blue.png\"))),\n    DOT_RED(\"Red Dot\", new ImageComponent(ImageUtil.loadImageResource(WastedBankSpacePlugin.class, \"/013-Dot_Red.png\"))),\n    DOT_GREEN(\"Green Dot\", new ImageComponent(ImageUtil.loadImageResource(WastedBankSpacePlugin.class, \"/014-Dot_green.png\")));\n\n    private final String name;\n    private final ImageComponent image;\n\n    OverlayImage(String name, ImageComponent image)\n    {\n        this.name \u003d name;\n        this.image \u003d image;\n    }\n\n    @Override\n    public String toString()\n    {\n        return getName();\n    }\n\n    public ImageComponent getImage()\n    {\n        return image;\n    }\n}\n","filePath":"src\\main\\java\\com\\wastedbankspace\\ui\\overlay\\OverlayImage.java"},{"fileName":"StorageItemOverlay.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace.ui.overlay;\n\nimport com.google.common.cache.Cache;\nimport com.google.common.cache.CacheBuilder;\nimport com.google.inject.Inject;\nimport com.wastedbankspace.WastedBankSpacePlugin;\nimport com.wastedbankspace.model.StorableItem;\nimport com.wastedbankspace.model.StorageLocations;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.widgets.ComponentID;\nimport net.runelite.api.widgets.WidgetItem;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.overlay.WidgetItemOverlay;\nimport net.runelite.client.ui.overlay.components.ImageComponent;\nimport net.runelite.client.ui.overlay.tooltip.Tooltip;\nimport net.runelite.client.ui.overlay.tooltip.TooltipManager;\nimport net.runelite.client.util.ColorUtil;\n\nimport java.awt.*;\nimport java.awt.image.BufferedImage;\nimport java.util.Set;\nimport java.util.concurrent.TimeUnit;\n\n@Slf4j\npublic class StorageItemOverlay extends WidgetItemOverlay\n{\n\tprivate final Point point;\n\n\tprivate final Client client;\n\tprivate final WastedBankSpacePlugin plugin;\n\tprivate final ItemManager itemManager;\n\tprivate final TooltipManager tooltipManager;\n\n\t@Getter\n\tprivate final Cache\u003cInteger, BufferedImage\u003e wastedSpaceImages \u003d CacheBuilder.newBuilder()\n\t\t.maximumSize(160)\n\t\t.expireAfterWrite(2, TimeUnit.MINUTES)\n\t\t.build();\n\n\t@Inject\n\tStorageItemOverlay(Client client, WastedBankSpacePlugin plugin, ItemManager itemManager, TooltipManager tooltipManager)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.itemManager \u003d itemManager;\n\t\tthis.tooltipManager \u003d tooltipManager;\n\t\tthis.point \u003d new Point();\n\t\tshowOnBank();\n\t}\n\n\t@Override\n\tpublic void renderItemOverlay(Graphics2D graphics, int itemId, WidgetItem itemWidget)\n\t{\n\t\tSet\u003cInteger\u003e items \u003d plugin.getEnabledItems();\n\n\t\tif (items.isEmpty()\n\t\t\t|| itemWidget.getWidget().getParentId() !\u003d ComponentID.BANK_ITEM_CONTAINER\n\t\t\t|| !items.contains(itemId)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tStorableItem item \u003d StorageLocations.getStorableItem(itemId);\n\t\tRectangle bounds \u003d itemWidget.getCanvasBounds();\n\n\t\tif (bounds.contains(client.getMouseCanvasPosition().getX(), client.getMouseCanvasPosition().getY()))\n\t\t{\n\t\t\tTooltip t \u003d new Tooltip(ColorUtil.prependColorTag(\"Store @ \" + item.getLocation(), new Color(238, 238, 238)));\n\t\t\ttooltipManager.add(t);\n\t\t}\n\n\t\trenderRibbon(graphics, plugin.getOverlayImage().getImage(), bounds.x + bounds.width - 12, bounds.y + bounds.height - 12);\n\t}\n\n\tprivate void renderRibbon(Graphics2D graphics, ImageComponent ribbon, int x, int y)\n\t{\n\t\tthis.point.setLocation(x, y);\n\t\tribbon.setPreferredLocation(this.point);\n\t\tribbon.render(graphics);\n\t}\n}","filePath":"src\\main\\java\\com\\wastedbankspace\\ui\\overlay\\StorageItemOverlay.java"},{"fileName":"WastedBankSpacePanel.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace.ui;\n\nimport com.wastedbankspace.WastedBankSpaceConfig;\nimport com.wastedbankspace.model.StorableItem;\nimport com.wastedbankspace.model.StorageLocations;\nimport java.util.Set;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.PluginPanel;\nimport net.runelite.client.ui.overlay.tooltip.TooltipManager;\nimport net.runelite.client.util.Text;\n\nimport javax.swing.*;\nimport javax.swing.border.EmptyBorder;\nimport javax.swing.text.BadLocationException;\nimport javax.swing.text.Document;\nimport java.awt.*;\nimport java.awt.event.FocusEvent;\nimport java.awt.event.FocusListener;\nimport java.awt.event.MouseEvent;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Vector;\nimport java.util.concurrent.CompletableFuture;\nimport java.util.concurrent.Future;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.concurrent.TimeUnit;\nimport java.util.function.Consumer;\nimport java.util.stream.Collectors;\n\n@Slf4j\npublic class WastedBankSpacePanel extends PluginPanel\n{\n\tprivate final WastedBankSpaceConfig config;\n\tprivate final JTextArea filtersEditor;\n\tprivate final JLabel numberOfItemsText;\n\tprivate final JList\u003cString\u003e data;\n\tprivate List\u003cStorableItem\u003e items;\n\tprivate Document filterDoc;\n\tprivate final Consumer\u003cString\u003e filterUiCallback;\n\n\tpublic WastedBankSpacePanel(Client client, TooltipManager tooltipManager, WastedBankSpaceConfig config,\n\t\t\t\t\t\t\t\tItemManager itemManager, Consumer\u003cString\u003e filterUi,\n\t\t\t\t\t\t\t\tScheduledExecutorService scheduledExecutorService)\n\t{\n\t\tsuper();\n\t\tthis.config \u003d config;\n\t\tthis.filterUiCallback \u003d filterUi;\n\n\t\tsetBorder(new EmptyBorder(10, 10, 10, 10));\n\t\tsetLayout(new GridBagLayout());\n\t\tfinal GridBagConstraints c \u003d new GridBagConstraints();\n\t\tc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\tc.weightx \u003d 1;\n\t\tc.gridx \u003d 0;\n\t\tc.gridy \u003d 0;\n\n\t\t/* FILTERS */\n\t\tJLabel filtersLabel \u003d new JLabel(\"Filters\");\n\n\t\tfiltersEditor \u003d new JTextArea();\n\t\tString filterData \u003d config.nonFlaggedItems();\n\t\tfiltersEditor.setText(filterData);\n\t\tfiltersEditor.setRows(6);\n\t\tfiltersEditor.setLineWrap(true);\n\t\tfiltersEditor.addFocusListener(new FocusListener()\n\t\t{\n\t\t\tprivate Future\u003c?\u003e updateFilterFuture \u003d CompletableFuture.completedFuture(null);\n\n\t\t\t@Override\n\t\t\tpublic void focusGained(FocusEvent e)\n\t\t\t{\n\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void focusLost(FocusEvent e)\n\t\t\t{\n\t\t\t\tthis.updateFilterFuture.cancel(false);\n\t\t\t\tthis.updateFilterFuture \u003d scheduledExecutorService.schedule(\n\t\t\t\t\tWastedBankSpacePanel.this::updatePluginFilter,\n\t\t\t\t\t250,\n\t\t\t\t\tTimeUnit.MILLISECONDS);\n\t\t\t}\n\n\t\t});\n\t\tfiltersEditor.setToolTipText(\"Format as comma separated values \" +\n\t\t\t\"\\n Item ID, \u003cOR\u003e name of item ignore case\");\n\t\tadd(filtersLabel, c);\n\t\tc.gridy++;\n\t\tadd(filtersEditor, c);\n\t\tc.gridy +\u003d 6;\n\n\t\t/* WASTED SLOTS PRINT */\n\t\tJLabel statsLabel \u003d new JLabel(\"\\nWasted Space Stats\");\n\t\tnumberOfItemsText \u003d new JLabel(\"Please Visit Your Bank\");\n\n\t\tdata \u003d new JList\u003cString\u003e()\n\t\t{\n\t\t\tpublic String getToolTipText(MouseEvent me)\n\t\t\t{\n\t\t\t\tint index \u003d locationToIndex(me.getPoint());\n\t\t\t\tif (index \u003e -1 \u0026\u0026 items !\u003d null)\n\t\t\t\t{\n\t\t\t\t\treturn items.get(index).getLocation();\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t};\n\t\tdata.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);\n\t\tdata.setSelectedIndex(0);\n\t\tdata.setVisibleRowCount(10);\n\n\t\t/* TIPS */\n\t\tfinal String tipTab \u003d \"    \";\n\t\tfinal String[] tips \u003d new String[]{\n\t\t\t\"\\nTips\",\n\t\t\t\"1: Talk to the Wise Old Man\",\n\t\t\ttipTab + \"to remove Junk Quest Items\",\n\t\t\t\"2: Murky Matt combines \",\n\t\t\ttipTab + \"jewelery charges\",\n\t\t\t\"3: Make item sets at the ge\",\n\t\t\t\"3.1: PHat and Mask can be combined\",\n\t\t\t\"4: Clue items in PoH (future update)\",\n\t\t\t\"5: Costumes, sets, and capes in PoH\",\n\t\t\t\"6: Store bolts in a bolt pouch\"\n\t\t};\n\n\n\t\tadd(numberOfItemsText, c);\n\t\tc.gridy++;\n\t\tadd(data, c);\n\t\tc.gridy++;\n\t\tfor (String tipString : tips)\n\t\t{\n\t\t\tadd(new JLabel(tipString), c);\n\t\t\tc.gridy++;\n\t\t}\n\n\t}\n\n\tpublic void setWastedBankSpaceItems(Set\u003cInteger\u003e item_ids)\n\t{\n\t\tlog.debug(\"setWastedBankSpaceItems() called with items: {}\", item_ids);\n\t\t// use StorageLocations.getItemIdMap() to get an Int/StorableItem list and use items set for all keys to get values\n\t\tlog.debug(\"in setWastedBankSpaceItems, provided item_ids: {}\", item_ids);\n\n\t\t// assign to a previously-null this.items.\n\t\tthis.items \u003d item_ids.stream()\n\t\t\t.map(StorageLocations.getItemIdMap()::get)\n\t\t\t.collect(Collectors.toList());\n\t\t// Update number of items that can be moved\n\t\tnumberOfItemsText.setText(\"Number of Items Wasting Space: \" + this.items.size());\n\t\tdata.setListData(new Vector\u003c\u003e(StorageLocations.itemIdsToString(item_ids)));\n\t\tthis.updateUI();\n\t}\n\n\tpublic void updatePluginFilter()\n\t{\n\t\ttry\n\t\t{\n\t\t\tDocument doc \u003d filtersEditor.getDocument();\n\t\t\tString data \u003d doc.getText(0, doc.getLength());\n\t\t\t// Save data to config\n\t\t\tconfig.nonFlaggedItems(data);\n\n\t\t\t// Update the UI with changed filters\n\t\t\tfilterUiCallback.accept(data);\n\t\t}\n\t\tcatch (BadLocationException ex)\n\t\t{\n\t\t\t// Should not get here\n\t\t}\n\t}\n\n\tpublic void removeFilteredItem(String item, int id)\n\t{\n\t\tDocument doc \u003d filtersEditor.getDocument();\n\t\ttry\n\t\t{\n\t\t\tString data \u003d doc.getText(0, doc.getLength());\n\t\t\tList\u003cString\u003e filtersReadOnly \u003d Text.fromCSV(data);\n\t\t\tList\u003cString\u003e filters \u003d filtersReadOnly.stream().collect(Collectors.toList());\n\t\t\tList\u003cInteger\u003e pop \u003d new ArrayList\u003c\u003e();\n\n\t\t\tfor (int i \u003d 0; i \u003c filters.size(); i++)\n\t\t\t{\n\t\t\t\tif (item.equalsIgnoreCase(filters.get(i))\n\t\t\t\t\t|| Integer.toString(id).equalsIgnoreCase(filters.get(i)))\n\t\t\t\t{\n\t\t\t\t\t// Add to start to loop reverse for no issues when popping\n\t\t\t\t\tpop.add(0, i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (Integer i : pop)\n\t\t\t{\n\t\t\t\tfilters.remove((int) i);\n\t\t\t}\n\n\t\t\tfiltersEditor.setText(String.join(\",\", filters));\n\t\t\tupdatePluginFilter();\n\t\t}\n\t\tcatch (BadLocationException ex)\n\t\t{\n\t\t\t// Should not get here\n\t\t}\n\n\t}\n\n\tpublic void addFilteredItem(String item)\n\t{\n\t\ttry\n\t\t{\n\t\t\t// ID isn\u0027t needed as the tool only adds the name for ease of reading by user\n\t\t\tDocument doc \u003d filtersEditor.getDocument();\n\t\t\tString data \u003d doc.getText(0, doc.getLength());\n\t\t\tfiltersEditor.setText(data + (data.isEmpty() ? \"\" : \",\") + item);\n\t\t\tupdatePluginFilter();\n\t\t}\n\t\tcatch (BadLocationException ex)\n\t\t{\n\t\t\t// Should not get here\n\t\t}\n\t}\n\n\tpublic String getFilterdItemsText(){\n\t\treturn filtersEditor.getText();\n\t}\n}\n","filePath":"src\\main\\java\\com\\wastedbankspace\\ui\\WastedBankSpacePanel.java"},{"fileName":"WastedBankSpaceConfig.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace;\n\nimport com.wastedbankspace.ui.overlay.OverlayImage;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\n\nimport java.util.Set;\n\n@ConfigGroup(WastedBankSpaceConfig.GROUP)\npublic interface WastedBankSpaceConfig extends Config\n{\n\tString GROUP \u003d \"Wasted Bank Space\";\n\t/* Storage Location Keys */\n\tString CLUE_ITEM_CHECK_KEY \u003d \"clueItemCheck\";\n\tString FANCY_DRESS_BOX_KEY \u003d \"poHFancyDressBox\";\n\tString MAGIC_WARDROBE_KEY \u003d \"poHMagicWardrobe\";\n\tString SEED_CHECK_KEY \u003d \"seedCheck\";\n\tString TACKLE_BOX_CHECK_KEY \u003d \"tackleBoxCheck\";\n\tString STEEL_KEY_RING_CHECK_KEY \u003d \"keyRingCheck\";\n\tString TOOL_LEP_CHECK_KEY \u003d \"toolLepCheck\";\n\tString MASTER_SCROLL_BOOK_CHECK_KEY \u003d \"masterScrollBookCheck\";\n\tString FOSSIL_STORAGE_CHECK_KEY \u003d \"fossilStorageCheck\";\n\tString ELNOCK_INQUISITOR_CHECK_KEY \u003d \"elnockInquisitorCheck\";\n\tString FLAMTAER_BAG_CHECK_KEY \u003d \"flamtaerBagCheck\";\n\tString NIGHTMARE_ZONE_CHECK_KEY \u003d \"nightmareZoneCheck\";\n\tString TOY_BOX_CHECK_KEY \u003d \"toyBoxCheck\";\n\tString SPICE_RACK_CHECK_KEY \u003d \"spiceRackCheck\";\n\tString ARMOUR_CASE_CHECK_KEY \u003d \"armourCaseCheck\";\n\tString FORESTRY_KIT_CHECK_KEY \u003d \"forestryKitCheck\";\n\tString MYSTERIOUS_STRANGER_CHECK_KEY \u003d \"mysteriousStrangerCheck\";\n\tString PET_HOUSE_SPACE_CHECK_KEY \u003d \"petHouseSpaceCheck\";\n\tString HOUSE_BOOKCASE_CHECK_KEY \u003d \"bookcaseHouseSpaceCheck\";\n\tString CAPE_RACK_CHECK_KEY \u003d \"capeRackCheck\";\n\tString HUNTSMANS_KIT_SPACE_CHECK_KEY \u003d \"huntsmansKitSpaceCheck\";\n\n\t/* Filtering and Blacklist Flags */\n\tString FILTER_ENABLED_CHECK_KEY \u003d \"filterEnabledCheck\";\n\tString BIS_FILTER_ENABLED_CHECK_KEY \u003d \"bisFilterEnabledCheck\";\n\n\tstatic Set\u003cString\u003e getStorageLocationKeys()\n\t{\n\t\treturn Set.of(\n\t\t\tCLUE_ITEM_CHECK_KEY,\n\t\t\tFANCY_DRESS_BOX_KEY,\n\t\t\tMAGIC_WARDROBE_KEY,\n\t\t\tSEED_CHECK_KEY,\n\t\t\tTACKLE_BOX_CHECK_KEY,\n\t\t\tSTEEL_KEY_RING_CHECK_KEY,\n\t\t\tTOOL_LEP_CHECK_KEY,\n\t\t\tMASTER_SCROLL_BOOK_CHECK_KEY,\n\t\t\tFOSSIL_STORAGE_CHECK_KEY,\n\t\t\tELNOCK_INQUISITOR_CHECK_KEY,\n\t\t\tFLAMTAER_BAG_CHECK_KEY,\n\t\t\tNIGHTMARE_ZONE_CHECK_KEY,\n\t\t\tTOY_BOX_CHECK_KEY,\n\t\t\tSPICE_RACK_CHECK_KEY,\n\t\t\tARMOUR_CASE_CHECK_KEY,\n\t\t\tFORESTRY_KIT_CHECK_KEY,\n\t\t\tMYSTERIOUS_STRANGER_CHECK_KEY,\n\t\t\tPET_HOUSE_SPACE_CHECK_KEY,\n\t\t\tHOUSE_BOOKCASE_CHECK_KEY,\n\t\t\tCAPE_RACK_CHECK_KEY,\n\t\t\tHUNTSMANS_KIT_SPACE_CHECK_KEY);\n\t}\n\n\t@ConfigSection(\n\t\tname \u003d \"General Config\",\n\t\tdescription \u003d \"General plugin config flags\",\n\t\tposition \u003d 0\n\t)\n\tString generalConfig \u003d \"generalConfig\";\n\n\t@ConfigSection(\n\t\tname \u003d \"Non Flagged Items\",\n\t\tdescription \u003d \"Items blacklisted for being flagged\",\n\t\tposition \u003d 1\n\t)\n\tString nonFlaggedItems \u003d \"nonFlaggedItems\";\n\n\t@ConfigSection(\n\t\tname \u003d \"Bank Interface Config\",\n\t\tdescription \u003d \"Configure bank interface changes\",\n\t\tposition \u003d 2\n\t)\n\tString bankInterfaceConfig \u003d \"bankInterfaceConfig\";\n\n\t@ConfigItem(keyName \u003d FILTER_ENABLED_CHECK_KEY,\n\t\tname \u003d \"Enable Filtering\",\n\t\tdescription \u003d \"Enable Item Filters and Blacklist\",\n\t\tposition \u003d 0,\n\t\tsection \u003d nonFlaggedItems\n\t)\n\tdefault boolean filterEnabledCheck()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(keyName \u003d BIS_FILTER_ENABLED_CHECK_KEY,\n\t\tname \u003d \"Never Filter BIS\",\n\t\tdescription \u003d \"Never Filter Best in Slot Items\",\n\t\tposition \u003d 1,\n\t\tsection \u003d nonFlaggedItems\n\t)\n\tdefault boolean bisFilterEnabledCheck()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"nonFlaggedItems\",\n\t\tname \u003d \"\",\n\t\tdescription \u003d \"Configures items to not be flagged as wasted bank space. Format: item, item\",\n\t\tsection \u003d nonFlaggedItems,\n\t\thidden \u003d true\n\t)\n\tdefault String nonFlaggedItems()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"nonFlaggedItems\",\n\t\tname \u003d \"\",\n\t\tdescription \u003d \"Setter for storing notes data\"\n\t)\n\tvoid nonFlaggedItems(String str);\n\n\t@ConfigItem(keyName \u003d CLUE_ITEM_CHECK_KEY,\n\t\tname \u003d \"PoH Clue Item Storage\",\n\t\tdescription \u003d \"Treasure Chest Storage\",\n\t\tposition \u003d 1,\n\t\tsection \u003d generalConfig\n\t)\n\tdefault boolean treasureChestStorageCheck()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(keyName \u003d FANCY_DRESS_BOX_KEY,\n\t\tname \u003d \"PoH Fancy Dress Box\",\n\t\tdescription \u003d \"Random Event Items\",\n\t\tposition \u003d 2,\n\t\tsection \u003d generalConfig\n\t)\n\tdefault boolean fancyDressBoxStorageCheck()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(keyName \u003d MAGIC_WARDROBE_KEY,\n\t\tname \u003d \"PoH Magic Wardrobe Storage\",\n\t\tdescription \u003d \"Magic armour and robe sets\",\n\t\tposition \u003d 3,\n\t\tsection \u003d generalConfig\n\t)\n\tdefault boolean magicWardrobeStorageCheck()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(keyName \u003d SEED_CHECK_KEY,\n\t\tname \u003d \"Seed Box/Vault\",\n\t\tdescription \u003d \"Seeds can be stored in a seed box, saplings and seeds in the vault\",\n\t\tposition \u003d 4,\n\t\tsection \u003d generalConfig\n\t)\n\tdefault boolean seedVaultStorageCheck()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(keyName \u003d TACKLE_BOX_CHECK_KEY,\n\t\tname \u003d \"Tackle Box Items\",\n\t\tdescription \u003d \"Check for items that could be in your tackle box\",\n\t\tposition \u003d 5,\n\t\tsection \u003d generalConfig\n\t)\n\tdefault boolean tackleBoxStorageCheck()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(keyName \u003d STEEL_KEY_RING_CHECK_KEY,\n\t\tname \u003d \"Steel Key Ring\",\n\t\tdescription \u003d \"Stores some keys - One small favor reward\",\n\t\tposition \u003d 6,\n\t\tsection \u003d generalConfig\n\t)\n\tdefault boolean steelKeyRingStorageCheck()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(keyName \u003d TOOL_LEP_CHECK_KEY,\n\t\tname \u003d \"Tool Leprechaun\",\n\t\tdescription \u003d \"Stores farming items, note low limits on many items\",\n\t\tposition \u003d 7,\n\t\tsection \u003d generalConfig\n\t)\n\tdefault boolean toolLeprechaunStorageCheck()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(keyName \u003d MASTER_SCROLL_BOOK_CHECK_KEY,\n\t\tname \u003d \"Master Scroll Book\",\n\t\tdescription \u003d \"Stores teleport scrolls\",\n\t\tposition \u003d 8,\n\t\tsection \u003d generalConfig\n\t)\n\tdefault boolean masterScrollBookStorageCheck()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(keyName \u003d FOSSIL_STORAGE_CHECK_KEY,\n\t\tname \u003d \"Fossil Storage\",\n\t\tdescription \u003d \"Storage for fossils on Fossil Island and in Varrock Museum\",\n\t\tposition \u003d 9,\n\t\tsection \u003d generalConfig\n\t)\n\tdefault boolean fossilStorageStrorageCheck()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(keyName \u003d ELNOCK_INQUISITOR_CHECK_KEY,\n\t\tname \u003d \"Puro Puro Storage\",\n\t\tdescription \u003d \"Elnock Inquisitor will hold some items in Puro Puro\",\n\t\tposition \u003d 10,\n\t\tsection \u003d generalConfig\n\t)\n\tdefault boolean elnockInquisitorStorageCheck()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(keyName \u003d FLAMTAER_BAG_CHECK_KEY,\n\t\tname \u003d \"Flamtaer Bag Storage\",\n\t\tdescription \u003d \"Storage for Shades of Morton (minigame) items\",\n\t\tposition \u003d 11,\n\t\tsection \u003d generalConfig\n\t)\n\tdefault boolean flamtaerBagStorageCheck()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(keyName \u003d NIGHTMARE_ZONE_CHECK_KEY,\n\t\tname \u003d \"Nightmare Zone Potion Storage\",\n\t\tdescription \u003d \"Potion\u0027s which store in the barrels at the nmz (minigame)\",\n\t\tposition \u003d 12,\n\t\tsection \u003d generalConfig\n\t)\n\tdefault boolean nightmareZoneStorageCheck()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(keyName \u003d TOY_BOX_CHECK_KEY,\n\t\tname \u003d \"PoH Toy Box Storage\",\n\t\tdescription \u003d \"Toy and holiday item storage\",\n\t\tposition \u003d 13,\n\t\tsection \u003d generalConfig\n\t)\n\tdefault boolean toyBoxStorageCheck()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(keyName \u003d SPICE_RACK_CHECK_KEY,\n\t\tname \u003d \"Spice rack storage\",\n\t\tdescription \u003d \"Storage for spicy stew spices in the PoH kitchen\",\n\t\tposition \u003d 14,\n\t\tsection \u003d generalConfig\n\t)\n\tdefault boolean spiceRackStorageCheck()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(keyName \u003d FORESTRY_KIT_CHECK_KEY,\n\t\tname \u003d \"Forestry kit storage\",\n\t\tdescription \u003d \"Storage for Forestry-related items\",\n\t\tposition \u003d 15,\n\t\tsection \u003d generalConfig\n\t)\n\tdefault boolean forestryKitStorageCheck()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(keyName \u003d ARMOUR_CASE_CHECK_KEY,\n\t\tname \u003d \"PoH Armour Case storage\",\n\t\tdescription \u003d \"Armour and outfit storage\",\n\t\tposition \u003d 16,\n\t\tsection \u003d generalConfig\n\t)\n\tdefault boolean armourCaseStorageCheck()\n\t{\n\t\treturn false; // Only for people to turn on if they want it on, nobody wants BIS gear with little triangles\n\t}\n\n\t@ConfigItem(keyName \u003d MYSTERIOUS_STRANGER_CHECK_KEY,\n\t\tname \u003d \"Mysterious Stranger\",\n\t\tdescription \u003d \"Storage for Hallowed Sepulchre items\",\n\t\tposition \u003d 17,\n\t\tsection \u003d generalConfig\n\t)\n\tdefault boolean mysteriousStrangerStorageCheck()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(keyName \u003d PET_HOUSE_SPACE_CHECK_KEY,\n\t\tname \u003d \"Pet House Space\",\n\t\tdescription \u003d \"Pet House Space inside the POH\",\n\t\tposition \u003d 18,\n\t\tsection \u003d generalConfig\n\t)\n\tdefault boolean petHouseStorageCheck()\n\t{\n\t\treturn false; // Disabled by Default. Most people don\u0027t lose pets in their bank alike BIS gear.\n\t}\n\n\t@ConfigItem(keyName \u003d HOUSE_BOOKCASE_CHECK_KEY,\n\t\tname \u003d \"PoH Bookcase\",\n\t\tdescription \u003d \"Bookcase inside the PoH\",\n\t\tposition \u003d 19,\n\t\tsection \u003d generalConfig\n\t)\n\tdefault boolean bookcaseStorageCheck()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(keyName \u003d CAPE_RACK_CHECK_KEY,\n\t\tname \u003d \"Cape rack storage\",\n\t\tdescription \u003d \"Storage for capes in the costume room\",\n\t\tposition \u003d 20,\n\t\tsection \u003d generalConfig\n\t)\n\tdefault boolean capeRackStorageCheck()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(keyName \u003d HUNTSMANS_KIT_SPACE_CHECK_KEY,\n\t\tname \u003d \"Huntsman\u0027s Kit\",\n\t\tdescription \u003d \"Check for items that could go in your Huntsman\u0027s kit\",\n\t\tposition \u003d 21,\n\t\tsection \u003d generalConfig\n\t)\n\tdefault boolean huntsmansKitStorageCheck()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"overlayImage\",\n\t\tname \u003d \"Overlay Image\",\n\t\tdescription \u003d \"Configures images to overlay on items wasting space\",\n\t\tposition \u003d 0,\n\t\tsection \u003d bankInterfaceConfig\n\t)\n\tdefault OverlayImage overlayImage()\n\t{\n\t\treturn OverlayImage.DEFAULT;\n\t}\n}\n\n\n","filePath":"src\\main\\java\\com\\wastedbankspace\\WastedBankSpaceConfig.java"},{"fileName":"WastedBankSpacePlugin.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace;\n\nimport com.google.inject.Provides;\nimport com.wastedbankspace.model.StorableItem;\nimport com.wastedbankspace.model.StorageLocationEnabler;\nimport com.wastedbankspace.model.StorageLocations;\nimport com.wastedbankspace.model.locations.*;\nimport com.wastedbankspace.ui.WastedBankSpacePanel;\nimport com.wastedbankspace.ui.overlay.OverlayImage;\nimport com.wastedbankspace.ui.overlay.StorageItemOverlay;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.ItemContainerChanged;\nimport net.runelite.api.events.MenuOpened;\nimport net.runelite.api.widgets.InterfaceID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetUtil;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.ui.overlay.tooltip.TooltipManager;\nimport net.runelite.client.util.ImageUtil;\nimport net.runelite.client.util.Text;\n\nimport javax.inject.Inject;\nimport javax.swing.*;\nimport java.awt.image.BufferedImage;\nimport java.util.*;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.regex.Pattern;\nimport java.util.regex.PatternSyntaxException;\n\nimport static com.wastedbankspace.model.StorageLocations.isItemStorable;\n\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Wasted Bank Space\"\n)\npublic class WastedBankSpacePlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate ClientToolbar clientToolbar;\n\n\t@Inject\n\tprivate ItemManager itemManager;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate StorageItemOverlay storageItemOverlay;\n\n\t@Inject\n\tprivate TooltipManager tooltipManager;\n\n\t@Inject\n\tprivate WastedBankSpaceConfig config;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Inject\n\tprivate ScheduledExecutorService scheduledExecutorService;\n\n\t@Provides\n\tWastedBankSpaceConfig provideConfig(ConfigManager configManager)\n\t{\n\n\t\treturn configManager.getConfig(WastedBankSpaceConfig.class);\n\t}\n\n\tprivate static final BufferedImage ICON \u003d ImageUtil.loadImageResource(WastedBankSpacePlugin.class, \"/overlaySmoll.png\");\n\n\tprivate int bankContentsHash \u003d 0;\n\n\tprivate NavigationButton navButton;\n\tprivate WastedBankSpacePanel panel;\n\n\tprivate boolean isBankOpen \u003d false;\n\tprivate boolean bisFilterEnabled \u003d false;\n\n\tprivate static boolean prepared \u003d false;\n\n\t/**\n\t * List of storage location enablers (sle) in Plugin Configuration. These map a boolean function to the list of\n\t * \tstorable items which they enable.\n\t */\n\tprivate final List\u003cStorageLocationEnabler\u003e storageLocationEnablers \u003d Arrays.asList(\n\t\tnew StorageLocationEnabler(() -\u003e config.tackleBoxStorageCheck(), TackleBox.values()),\n\t\tnew StorageLocationEnabler(() -\u003e config.steelKeyRingStorageCheck(), SteelKeyRing.values()),\n\t\tnew StorageLocationEnabler(() -\u003e config.toolLeprechaunStorageCheck(), ToolLeprechaun.values()),\n\t\tnew StorageLocationEnabler(() -\u003e config.masterScrollBookStorageCheck(), MasterScrollBook.values()),\n\t\tnew StorageLocationEnabler(() -\u003e config.fossilStorageStrorageCheck(), FossilStorage.values()),\n\t\tnew StorageLocationEnabler(() -\u003e config.elnockInquisitorStorageCheck(), ElnockInquisitor.values()),\n\t\tnew StorageLocationEnabler(() -\u003e config.flamtaerBagStorageCheck(), FlamtaerBag.values()),\n\t\tnew StorageLocationEnabler(() -\u003e config.nightmareZoneStorageCheck(), NightmareZone.values()),\n\t\tnew StorageLocationEnabler(() -\u003e config.seedVaultStorageCheck(), SeedVault.values()),\n\t\tnew StorageLocationEnabler(() -\u003e config.treasureChestStorageCheck(), TreasureChest.values()),\n\t\tnew StorageLocationEnabler(() -\u003e config.fancyDressBoxStorageCheck(), FancyDressBox.values()),\n\t\tnew StorageLocationEnabler(() -\u003e config.magicWardrobeStorageCheck(), MagicWardrobe.values()),\n\t\tnew StorageLocationEnabler(() -\u003e config.toyBoxStorageCheck(), ToyBox.values()),\n\t\tnew StorageLocationEnabler(() -\u003e config.spiceRackStorageCheck(), SpiceRack.values()),\n\t\tnew StorageLocationEnabler(() -\u003e config.forestryKitStorageCheck(), ForestryKit.values()),\n\t\tnew StorageLocationEnabler(() -\u003e config.armourCaseStorageCheck(), ArmourCase.values()),\n\t\tnew StorageLocationEnabler(() -\u003e config.mysteriousStrangerStorageCheck(), MysteriousStranger.values()),\n\t\tnew StorageLocationEnabler(() -\u003e config.petHouseStorageCheck(), PetHouse.values()),\n\t\tnew StorageLocationEnabler(() -\u003e config.bookcaseStorageCheck(), Bookcase.values()),\n\t\tnew StorageLocationEnabler(() -\u003e config.capeRackStorageCheck(), CapeRack.values()),\n\t\tnew StorageLocationEnabler(() -\u003e config.huntsmansKitStorageCheck(), HuntsmansKit.values())\n\t);\n\n\n\t/* Note: Static values, will never change once initialized */\n\t/**\n\t * All items possible for all storage locations\n\t * Note: Only set once during Initialize\n\t */\n\tprivate static final Set\u003cInteger\u003e allStorableItems \u003d new HashSet\u003c\u003e();\n\n\t/**\n\t * Hashmap containing all itemIds per category. Used for enabling/disabling specific categories on config change.\n\t * Note: Only set once during Initialize\n\t */\n\tprivate static final Map\u003cString, Set\u003cInteger\u003e\u003e allStorableItemsByCategory \u003d new HashMap\u003c\u003e();\n\n\t/**\n\t * bis (Best in Slot) item ID\u0027s as tagged in each respective Storage Location.\n\t * Note: Only set once during Initialize\n\t */\n\tprivate static final Set\u003cInteger\u003e bisItems \u003d new HashSet\u003c\u003e();\n\n\t/* The Below Sets are dynamic depending on config change (Panel for Ignore items),\n\t items present in bank, filtered, etc. */\n\n\t/**\n\t All Items ID\u0027s found in the players bank\n\t */\n\tprivate final Set\u003cInteger\u003e itemsInBank \u003d new HashSet\u003c\u003e();\n\n\t/**\n\t *  Items populated from enabled storage types\n\t */\n\t@Getter\n\tprivate final Set\u003cInteger\u003e enabledItems \u003d new HashSet\u003c\u003e();\n\n\t/**\n\t * Set of Item IDs which are Ignored regardless of being storable\n\t * \tThis is Managed in the plugin\u0027s panel\n\t */\n\tprivate final Set\u003cInteger\u003e ignoredItemIds \u003d new HashSet\u003c\u003e();\n\n\t/**\n\t * Items matching enabled items that are also present in bank. AKA the Items Wasting Space.\n\t * ID in itemsInBank AND enabledItems AND NOT ignoredItemIds\n\t */\n\tprivate final Set\u003cInteger\u003e storableItemsInBank \u003d new HashSet\u003c\u003e();\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tpanel \u003d new WastedBankSpacePanel(client, tooltipManager, config, itemManager, this::processIgnoreListChanged, scheduledExecutorService);\n\t\tnavButton \u003d NavigationButton.builder()\n\t\t\t.tooltip(\"Wasted Bank Space\")\n\t\t\t.priority(8)\n\t\t\t.icon(ICON)\n\t\t\t.panel(panel)\n\t\t\t.build();\n\t\tclientToolbar.addNavigation(navButton);\n\n\t\toverlayManager.add(storageItemOverlay);\n\n\t\tlog.debug(\"Attempting to prepare WastedBankSpace upon startup.\");\n\t\tif (!prepared)\n\t\t{\n\t\t\tlog.debug(\"Not prepared, invoking clientThread\");\n\t\t\tclientThread.invoke(() -\u003e\n\t\t\t{\n\t\t\t\tswitch (client.getGameState())\n\t\t\t\t{\n\t\t\t\t\tcase LOGIN_SCREEN:\n\t\t\t\t\tcase LOGIN_SCREEN_AUTHENTICATOR:\n\t\t\t\t\tcase LOGGING_IN:\n\t\t\t\t\tcase LOADING:\n\t\t\t\t\tcase LOGGED_IN:\n\t\t\t\t\tcase CONNECTION_LOST:\n\t\t\t\t\tcase HOPPING:\n\t\t\t\t\t\tlog.debug(\"Inside switch case for initializing\");\n\t\t\t\t\t\tStorageLocations.prepareStorableItemNames(itemManager);\n\t\t\t\t\t\tinitializeItemSets();\n\t\t\t\t\t\tbisFilterEnabled \u003d config.bisFilterEnabledCheck();\n\t\t\t\t\t\tpanel.updatePluginFilter();\n\t\t\t\t\t\tprepared \u003d true;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tlog.debug(\"In default case, returning false\");\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tclientToolbar.removeNavigation(navButton);\n\t\toverlayManager.remove(storageItemOverlay);\n\n\t\tnavButton \u003d null;\n\t\tpanel \u003d null;\n\t}\n\n\t/**\n\t * Populate data sets/maps at initialization with items ID\u0027s for what is storable/bis for fast lookups\n\t * @param enumClass StorableItem child see model.locations\n\t * @param configKey\tKey for Storage Location from Plugin Configuration\n\t * @param bisCheck Flag if bis items exist for storage location\n\t * @param \u003cE\u003e enumClass\n\t */\n\tprivate static \u003cE extends Enum\u003cE\u003e \u0026 StorableItem\u003e void populateStorageItemIds(\n\t\t\tClass\u003cE\u003e enumClass, String configKey, boolean bisCheck)\n\t{\n\t\tfor (E item : enumClass.getEnumConstants())\n\t\t{\n\t\t\tint itemId \u003d item.getItemID();\n\t\t\tallStorableItems.add(itemId);\n\t\t\tallStorableItemsByCategory.computeIfAbsent(configKey, val -\u003e new HashSet\u003c\u003e()).add(itemId);\n\t\t\tif (bisCheck \u0026\u0026 item.isBis())\n\t\t\t{\n\t\t\t\tbisItems.add(itemId);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t *\t1. populateStorageItemIds for all items at each storage location\n\t * \t2. Update the initial enabledItems\n\t * \tNote: this function is called only once for setup purposes\n\t */\n\tprivate void initializeItemSets()\n\t{\n\t\t// Get all item ids from each storage category. Those with \u0027true\u0027 contain BIS items and need to identify them.\n\t\tpopulateStorageItemIds(ArmourCase.class, WastedBankSpaceConfig.ARMOUR_CASE_CHECK_KEY, true);\n\t\tpopulateStorageItemIds(Bookcase.class, WastedBankSpaceConfig.HOUSE_BOOKCASE_CHECK_KEY, false);\n\t\tpopulateStorageItemIds(CapeRack.class, WastedBankSpaceConfig.CAPE_RACK_CHECK_KEY, true);\n\t\tpopulateStorageItemIds(ElnockInquisitor.class, WastedBankSpaceConfig.ELNOCK_INQUISITOR_CHECK_KEY, false);\n\t\tpopulateStorageItemIds(FancyDressBox.class, WastedBankSpaceConfig.FANCY_DRESS_BOX_KEY, false);\n\t\tpopulateStorageItemIds(FlamtaerBag.class, WastedBankSpaceConfig.FLAMTAER_BAG_CHECK_KEY, false);\n\t\tpopulateStorageItemIds(ForestryKit.class, WastedBankSpaceConfig.FORESTRY_KIT_CHECK_KEY, false);\n\t\tpopulateStorageItemIds(FossilStorage.class, WastedBankSpaceConfig.FOSSIL_STORAGE_CHECK_KEY, false);\n\t\tpopulateStorageItemIds(HuntsmansKit.class, WastedBankSpaceConfig.HUNTSMANS_KIT_SPACE_CHECK_KEY, false);\n\t\tpopulateStorageItemIds(MagicWardrobe.class, WastedBankSpaceConfig.MAGIC_WARDROBE_KEY, true);\n\t\tpopulateStorageItemIds(MasterScrollBook.class, WastedBankSpaceConfig.MASTER_SCROLL_BOOK_CHECK_KEY, false);\n\t\tpopulateStorageItemIds(MysteriousStranger.class, WastedBankSpaceConfig.MYSTERIOUS_STRANGER_CHECK_KEY, false);\n\t\tpopulateStorageItemIds(NightmareZone.class, WastedBankSpaceConfig.NIGHTMARE_ZONE_CHECK_KEY, false);\n\t\tpopulateStorageItemIds(PetHouse.class, WastedBankSpaceConfig.PET_HOUSE_SPACE_CHECK_KEY, false);\n\t\tpopulateStorageItemIds(SeedVault.class, WastedBankSpaceConfig.SEED_CHECK_KEY, false);\n\t\tpopulateStorageItemIds(SpiceRack.class, WastedBankSpaceConfig.SPICE_RACK_CHECK_KEY, false);\n\t\tpopulateStorageItemIds(SteelKeyRing.class, WastedBankSpaceConfig.STEEL_KEY_RING_CHECK_KEY, false);\n\t\tpopulateStorageItemIds(TackleBox.class, WastedBankSpaceConfig.TACKLE_BOX_CHECK_KEY, false);\n\t\tpopulateStorageItemIds(ToolLeprechaun.class, WastedBankSpaceConfig.TOOL_LEP_CHECK_KEY, false);\n\t\tpopulateStorageItemIds(ToyBox.class, WastedBankSpaceConfig.TOY_BOX_CHECK_KEY, false);\n\t\tpopulateStorageItemIds(TreasureChest.class, WastedBankSpaceConfig.CLUE_ITEM_CHECK_KEY, false);\n\n\t\t// Initialize the enabled item values\n\t\tfor (StorageLocationEnabler sle : storageLocationEnablers)\n\t\t{\n\t\t\tfor (StorableItem item : sle.GetStorableItemsIfEnabled())\n\t\t\t{\n\t\t\t\tif (ignoredItemIds.contains(item.getItemID())\n\t\t\t\t\t|| (item.isBis() \u0026\u0026 config.bisFilterEnabledCheck())\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tenabledItems.add(item.getItemID());\n\t\t\t}\n\t\t}\n\t}\n\n\n\tpublic OverlayImage getOverlayImage()\n\t{\n\t\treturn config.overlayImage();\n\t}\n\n\t@Subscribe\n\tpublic void onItemContainerChanged(ItemContainerChanged event)\n\t{\n\t\tif (event.getContainerId() \u003d\u003d InventoryID.BANK.getId())\n\t\t{\n\t\t\tisBankOpen \u003d true;\n\t\t\tlog.debug(\"isBankOpen set to true\");\n\n\t\t\t// check if bank contents have changed by utilizing hashcode of items array\n\t\t\tItem[] items \u003d event.getItemContainer().getItems();\n\t\t\tint hash \u003d Arrays.hashCode(items);\n\t\t\tif (hash \u003d\u003d bankContentsHash)\n\t\t\t{\n\t\t\t\tlog.debug(\"Bank contents hash matched ({}), not running updateItemsFromBankContainer()\",\n\t\t\t\t\tbankContentsHash);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tbankContentsHash \u003d hash;\n\t\t\tupdateItemsFromBankContainer(event.getItemContainer());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tisBankOpen \u003d false;\n\t\t\tlog.debug(\"isBankOpen set to false\");\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif (!event.getGroup().equals(WastedBankSpaceConfig.GROUP))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tString eventKey \u003d event.getKey();\n\t\tlog.debug(\"onConfigChanged key: {}\", eventKey);\n\n\t\t// only attempt to run updating of enabledItems hashset if event key is one of the keys that affect enabledItems\n\t\tif (WastedBankSpaceConfig.getStorageLocationKeys().contains(eventKey))\n\t\t{\n\t\t\tboolean result;\n\t\t\tif ((event.getNewValue() \u003d\u003d null) || event.getNewValue().equalsIgnoreCase(\"false\"))\n\t\t\t{\n\t\t\t\t// then config group was disabled, so remove them from the enabledItems set\n\t\t\t\tresult \u003d enabledItems.removeAll(allStorableItemsByCategory.getOrDefault(eventKey, new HashSet\u003c\u003e()));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult \u003d enabledItems.addAll(allStorableItemsByCategory.getOrDefault(eventKey, new HashSet\u003c\u003e()));\n\t\t\t}\n\n\t\t\tif (!result)\n\t\t\t{\n\t\t\t\t// enabledItems failed to update from the call above, indicating an issue with\n\t\t\t\tlog.debug(\"onConfigChanged(): Attempted update of enabledItems hashset failed.\\nEvent: {}\\n\", event);\n\t\t\t}\n\t\t\tupdateWastedBankSpace();\n\t\t\tprocessIgnoreListChanged(panel.getFilterdItemsText());\n\t\t} else if(eventKey.equals(WastedBankSpaceConfig.FILTER_ENABLED_CHECK_KEY) || eventKey.equals(WastedBankSpaceConfig.BIS_FILTER_ENABLED_CHECK_KEY)){\n\t\t\t//Moderate jank to reforce filter and BIS check. TODO These should be separated into two functions\n\t\t\tprocessIgnoreListChanged(panel.getFilterdItemsText());\n\t\t} else {\n\t\t\t//Note this currently is hit when Overlay Image is changed but seems to have no effect on the software\n\t\t\tlog.debug(\"onConfigChanged(): Event not handled! \\nEvent: {}\\n\", event);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOpened(final MenuOpened event)\n\t{\n\t\t// TODO: refactor this\n\t\tif (!client.isKeyPressed(KeyCode.KC_SHIFT) || !isBankOpen)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal MenuEntry[] entries \u003d event.getMenuEntries();\n\n\t\tfor (int i \u003d entries.length - 1; i \u003e\u003d 0; i--)\n\t\t{\n\t\t\tfinal MenuEntry entry \u003d entries[i];\n\t\t\tfinal Widget w \u003d entry.getWidget();\n\n\t\t\tif (w !\u003d null \u0026\u0026 (WidgetUtil.componentToInterface(w.getId()) \u003d\u003d InterfaceID.BANK))\n\t\t\t{\n\t\t\t\tfinal int itemId \u003d w.getItemId();\n\t\t\t\tfinal boolean flagged \u003d !ignoredItemIds.contains(itemId);\n\t\t\t\tif (isItemStorable(itemId))\n\t\t\t\t{\n\t\t\t\t\tfinal MenuEntry parent \u003d client.createMenuEntry(i)\n\t\t\t\t\t\t.setOption(flagged ? \"Unflag Item\" : \"Flag Item\")\n\t\t\t\t\t\t.setTarget(entry.getTarget())\n\t\t\t\t\t\t.setType(MenuAction.RUNELITE)\n\t\t\t\t\t\t.onClick(x -\u003e toggleItemInIgnoreList(itemId));\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Toggles whether an item is ignored or not from list of items considered wasting space.\n\t *\n\t * @param id Item Id for the item being toggled for ignore.\n\t */\n\tprivate void toggleItemInIgnoreList(int id)\n\t{\n\t\tif (ignoredItemIds.contains(id))\n\t\t{\n\t\t\tignoredItemIds.remove(id);\n\t\t\tpanel.removeFilteredItem(StorageLocations.getStorableItemName(id), id);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tignoredItemIds.add(id);\n\t\t\tpanel.addFilteredItem(StorageLocations.getStorableItemName(id));\n\t\t}\n\t}\n\n\tprivate void updateItemsFromBankContainer(final ItemContainer c)\n\t{\n\t\t// Check if the contents have changed.\n\t\tif (c \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\titemsInBank.clear();\n\t\tfor (Item item : c.getItems())\n\t\t{\n\t\t\tif (item.getId() \u003d\u003d -1)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Account for noted items, ignore placeholders.\n\t\t\tint itemId \u003d item.getId();\n\t\t\tfinal ItemComposition itemComposition \u003d itemManager.getItemComposition(itemId);\n\t\t\tif (itemComposition.getPlaceholderTemplateId() !\u003d -1)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\titemsInBank.add(itemId);\n\t\t}\n\n\t\tupdateWastedBankSpace();\n\t}\n\n\n\t/**\n\t * Calculate and update the wasted space Panel via the following algorithm:\n\t * Wasted Space \u003d Bank Items Where Item is Storable in an enabled Storable Location AND Item is not Ignored by user\n\t * \tWasted Space \u003d (itemsInBank interset enabledItems) - ignoredItemIds\n\t */\n\tprivate void updateWastedBankSpace()\n\t{\n\t\tlog.debug(\"running updateWastedBankSpace, getting every item after regenerating the enabled item list\");\n\n\t\t// Recalculate storable items in the bank\n\t\tSet\u003cInteger\u003e prevStorableItemsInBank \u003d new HashSet\u003c\u003e(storableItemsInBank);\n\t\tlog.debug(\"prevStorableItemsInBank: {}\", prevStorableItemsInBank);\n\t\tstorableItemsInBank.clear();\n\t\tstorableItemsInBank.addAll(itemsInBank);\n\t\tstorableItemsInBank.retainAll(enabledItems);\n\t\tstorableItemsInBank.removeAll(ignoredItemIds);\n\t\tlog.debug(\"new storableItemsInBank: {}\", storableItemsInBank);\n\n\t\t/* Update the panel UI only if there are changes to storable items in bank,\n\t\t\texcept when empty. (empty will occur on startup, and in edge conditions where everything is disabled) */\n\t\tif (!storableItemsInBank.isEmpty() \u0026\u0026 prevStorableItemsInBank.equals(storableItemsInBank))\n\t\t{\n\t\t\tlog.debug(\"storableItemsInBank matched previous, not updating panel\");\n\t\t\treturn;\n\t\t}\n\t\tSwingUtilities.invokeLater(() -\u003e panel.setWastedBankSpaceItems(storableItemsInBank));\n\t}\n\n\t/**\n\t * Function to be invoked when the Ignore list is modified by the player in the plugin\u0027s panel.\n\t * @param filter Is the Comma Separated String of Item\u0027s to ignore.\n\t *               Acceptable format ItemName Ignore CASE and Spaces, Item ID Number, Item Name with \u0027*\u0027 wild cards\n\t *\n\t *               Example 1: Mystic robe top, Mysticrobetop,Mysticrobetop,Mystic robe     top, mySTicrObETop\n\t *               are all the same\n\t *               Example 2: 12345 will try and add Item ID 12345 to the set of ignorable items if it exists\n\t *               Example 3: *Mystic robe top* can be used to match ALL Mystic robe top variants\n\t */\n\tprivate void processIgnoreListChanged(String filter)\n\t{\n\t\tlog.debug(\"Starting processIgnoreListChanged() with filter: {}\", filter);\n\t\tlog.debug(\"Contents of StorageLocations.getItemNameMap(): {}\", StorageLocations.getModifiedItemNameMap());\n\n\t\tList\u003cString\u003e ignoredItemList \u003d Text.fromCSV(filter);\n\t\tlog.debug(\"processIgnoreListChanged() - ignoredItemList: {}\", ignoredItemList);\n\n\t\tignoredItemIds.clear();\n\t\tif(config.filterEnabledCheck()) {\n\t\t\t/* 1. Loop each comma separated ignore Item\n\t\t\t * 2. If a number, add the item ID directly\n\t\t\t * 3.1. If a wild card exists\n\t\t\t * 3.1.1. loop all items and try to match the wildcard pattern to the name, on hit add the\n\t\t\t * \t\tID to the ignore list\n\t\t\t * 3.2. Otherwise, try and find the name of the item ignore case and space in the map of items\n\t\t\t * 3.2.1. Add the ID if found\n\t\t\t * */\n\t\t\tfor (String ignoredItem : ignoredItemList) {\n\t\t\t\tlog.debug(\"processIgnoreListChanged - ignoredItem: {}\", ignoredItem);\n\t\t\t\tString cleanedIgnoredItem \u003d ignoredItem.replaceAll(\"\\\\s+\", \"\");\n\t\t\t\tlog.debug(\"Original value: {}, ModValue: {}\", ignoredItem, cleanedIgnoredItem);\n\n\t\t\t\t// Check if is only digits, i.e. an itemId\n\t\t\t\tif (cleanedIgnoredItem.matches(\"^\\\\d+$\")) {\n\t\t\t\t\tignoredItemIds.add(Integer.parseInt(ignoredItem));\n\t\t\t\t}\n\t\t\t\t// Check if cleanedIgnoredItem has a corresponding itemId in the modifiedItemNameMap\n\t\t\t\telse {\n\t\t\t\t\tif(cleanedIgnoredItem.contains(\"*\")) {\n\t\t\t\t\t\t/* Process Wild Card Ignores */\n\t\t\t\t\t\tcleanedIgnoredItem \u003d cleanedIgnoredItem.replaceAll(\"\\\\(\", \"\\\\\\\\(\")\n\t\t\t\t\t\t\t\t.replaceAll(\"\\\\)\", \"\\\\\\\\)\")\n\t\t\t\t\t\t\t\t.replaceAll(\"\\\\*\",\"(.*)\");\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t/* Test with Item with brackets in name (*) like watering can(7) */\n\t\t\t\t\t\t\tPattern p \u003d Pattern.compile(cleanedIgnoredItem, Pattern.CASE_INSENSITIVE);\n\t\t\t\t\t\t\t/* Check all items against the wildcard regex. */\n\t\t\t\t\t\t\tStorageLocations.getModifiedItemNameMap().entrySet().stream()\n\t\t\t\t\t\t\t\t\t.filter(e -\u003e p.matcher(e.getKey()).matches())\n\t\t\t\t\t\t\t\t\t.forEach(e -\u003e ignoredItemIds.add(e.getValue()));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch(PatternSyntaxException e) {\n\t\t\t\t\t\t\tlog.debug(\"Invalid Pattern {}\", ignoredItem);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t/* Do we have a matching name? */\n\t\t\t\t\t\tInteger itemId \u003d StorageLocations.getStorableItemId(cleanedIgnoredItem);\n\t\t\t\t\t\tif (itemId !\u003d null) {\n\t\t\t\t\t\t\tignoredItemIds.add(itemId);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Recalculate enabled items\n\t\tenabledItems.clear();\n\t\tfor (StorageLocationEnabler sle : storageLocationEnablers)\n\t\t{\n\t\t\tfor (StorableItem item : sle.GetStorableItemsIfEnabled())\n\t\t\t{\n\t\t\t\tif (!ignoredItemIds.contains(item.getItemID()) \u0026\u0026\n\t\t\t\t\t(!item.isBis() || !config.bisFilterEnabledCheck()))\n\t\t\t\t{\n\t\t\t\t\tenabledItems.add(item.getItemID());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tupdateWastedBankSpace();\n\t}\n}\n","filePath":"src\\main\\java\\com\\wastedbankspace\\WastedBankSpacePlugin.java"},{"fileName":"WastedBankSpacePluginTest.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Riley McGee\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.wastedbankspace;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class WastedBankSpacePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(WastedBankSpacePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\wastedbankspace\\WastedBankSpacePluginTest.java"}]},{"commit":"69258f39f2f422ba487f66f1f3366a8fc9c5d02d","repository":"https://github.com/skeldoor/cool-2h.git","internalName":"cool-2h","files":[{"fileName":"Cool2hPlugin.java","content":"package com.skeldoor.cool2h;\n\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.BeforeRender;\nimport net.runelite.api.events.ClientTick;\nimport net.runelite.api.kit.KitType;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\n\nimport java.util.stream.IntStream;\n\n@Slf4j\n@PluginDescriptor(\n\t\tname \u003d \"Cool 2h\",\n\t\tdescription \u003d \"Fix your posture and look cooler while using two-handed weapons\"\n)\npublic class Cool2hPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t// Bronze Iron Steel Black Mithril Adamant Rune White Dragon Gilded\n\tint[] rune2hItemId \u003d {1307, 1309, 1311, 1313, 1315, 1317, 1319, 6609, 7158, 20155};\n\n\tint superCool2hAnimationIdIdle \u003d 7053;\n\tint superCool2hAnimationIdIdleRotateLeft \u003d 7044;\n\tint superCool2hAnimationIdIdleRotateRight \u003d 7044;\n\tint superCool2hAnimationIdWalking \u003d 7052;\n\tint superCool2hAnimationIdWalkingRotate180 \u003d 7052;\n\tint superCool2hAnimationIdWalkingRotateLeft \u003d 7048;\n\tint superCool2hAnimationIdWalkingRotateRight \u003d 7047;\n\tint superCool2hAnimationIdRunning \u003d 7043;\n\n\t// Run before the current frame is rendered to stop glitchy animation blending\n\t@Subscribe(priority \u003d -1000.0f)\n\tpublic void onBeforeRender(BeforeRender e) {\n\t\tif (client.getGameState() !\u003d GameState.LOGGED_IN) return;\n\t\tPlayer local \u003d client.getLocalPlayer();\n\t\tif (local \u003d\u003d null) return;\n\t\tPlayerComposition localComp \u003d local.getPlayerComposition();\n\t\tif (localComp \u003d\u003d null) return;\n\t\tint weaponId \u003d localComp.getEquipmentId(KitType.WEAPON);\n\t\tif (IntStream.of(rune2hItemId).anyMatch(x -\u003e x \u003d\u003d weaponId)) {\n\t\t\tswapPlayerAnimation(local);\n\t\t}\n\t}\n\n\tprivate void swapPlayerAnimation(Player local)\n\t{\n\t\tlocal.setIdlePoseAnimation(superCool2hAnimationIdIdle);\n\t\tlocal.setIdleRotateLeft(superCool2hAnimationIdIdleRotateLeft);\n\t\tlocal.setIdleRotateRight(superCool2hAnimationIdIdleRotateRight);\n\t\tlocal.setWalkAnimation(superCool2hAnimationIdWalking);\n\t\tlocal.setWalkRotate180(superCool2hAnimationIdWalkingRotate180);\n\t\tlocal.setWalkRotateLeft(superCool2hAnimationIdWalkingRotateLeft);\n\t\tlocal.setWalkRotateRight(superCool2hAnimationIdWalkingRotateRight);\n\t\tlocal.setRunAnimation(superCool2hAnimationIdRunning);\n\t}\n}\n","filePath":"src\\main\\java\\com\\skeldoor\\cool2h\\Cool2hPlugin.java"},{"fileName":"Cool2hPluginTest.java","content":"package com.skeldoor.cool2h;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class Cool2hPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(Cool2hPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\skeldoor\\cool2h\\Cool2hPluginTest.java"}]},{"commit":"51b7fd099f09c38d0e1a930bc243cacebb97e310","repository":"https://github.com/HSJ-OSRS/theatreofbloodstats.git","internalName":"theatre-of-blood-stats","files":[{"fileName":"InfoBoxText.java","content":"package hsj.external.theatreofbloodstats;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum InfoBoxText\n{\n\tDAMAGE_PERCENT(\"Damage Percent\"),\n\tTIME(\"Room Time\"),\n\tNONE(\"None\");\n\n\tprivate final String type;\n\n\t@Override\n\tpublic String toString()\n\t{\n\t\treturn type;\n\t}\n}\n","filePath":"src\\main\\java\\hsj\\external\\theatreofbloodstats\\InfoBoxText.java"},{"fileName":"TheatreOfBloodStatsConfig.java","content":"package hsj.external.theatreofbloodstats;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\n\n@ConfigGroup(\"theatreofbloodstats\")\npublic interface TheatreOfBloodStatsConfig extends Config\n{\n\t@ConfigSection(\n\t\tname \u003d \"Chatbox Messages\",\n\t\tdescription \u003d \"Settings for messages in the chatbox\",\n\t\tposition \u003d 0\n\t)\n\tString chatSettings \u003d \"chatSettings\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"chatboxDmg\",\n\t\tname \u003d \"Print Damage To Chat\",\n\t\tdescription \u003d \"Print personal damage and percentage of total to chat\",\n\t\tsection \u003d chatSettings,\n\t\tposition \u003d 0\n\t)\n\tdefault boolean chatboxDmg()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"chatboxHealed\",\n\t\tname \u003d \"Print Heals To Chat\",\n\t\tdescription \u003d \"Print amount healed to chat\",\n\t\tsection \u003d chatSettings,\n\t\tposition \u003d 1\n\t)\n\tdefault boolean chatboxHealed()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"chatboxSplits\",\n\t\tname \u003d \"Print Splits To Chat\",\n\t\tdescription \u003d \"Print detailed room splits to chat\",\n\t\tsection \u003d chatSettings,\n\t\tposition \u003d 2\n\t)\n\tdefault boolean chatboxSplits()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigSection(\n\t\tname \u003d \"Info Boxes\",\n\t\tdescription \u003d \"Settings for the infoboxes\",\n\t\tposition \u003d 1\n\t)\n\tString infoBoxSettings \u003d \"infoBoxSettings\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showInfoBoxes\",\n\t\tname \u003d \"Info Boxes\",\n\t\tdescription \u003d \"Show info boxes\",\n\t\tsection \u003d infoBoxSettings,\n\t\tposition \u003d 1\n\t)\n\tdefault boolean showInfoBoxes()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"infoBoxText\",\n\t\tname \u003d \"Info Box Text\",\n\t\tdescription \u003d \"The text displayed on the info box\",\n\t\tsection \u003d infoBoxSettings,\n\t\tposition \u003d 1\n\t)\n\tdefault InfoBoxText infoBoxText()\n\t{\n\t\treturn InfoBoxText.TIME;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"infoBoxTooltip\",\n\t\tname \u003d \"Info Box Tooltip\",\n\t\tdescription \u003d \"Display info box tooltip\",\n\t\tsection \u003d infoBoxSettings,\n\t\tposition \u003d 2\n\t)\n\tdefault boolean infoBoxTooltip()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"infoBoxTooltipDmg\",\n\t\tname \u003d \"Info Box Tooltip Damage\",\n\t\tdescription \u003d \"Display damage info in the info box tooltip\",\n\t\tsection \u003d infoBoxSettings,\n\t\tposition \u003d 3\n\t)\n\tdefault boolean infoBoxTooltipDmg()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"infoBoxTooltipHealed\",\n\t\tname \u003d \"Info Box Tooltip Healed\",\n\t\tdescription \u003d \"Display amount healed in the info box tooltip\",\n\t\tsection \u003d infoBoxSettings,\n\t\tposition \u003d 4\n\t)\n\tdefault boolean infoBoxTooltipHealed()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"infoBoxTooltipSplits\",\n\t\tname \u003d \"Info Box Tooltip Splits\",\n\t\tdescription \u003d \"Display splits in the info box tooltip\",\n\t\tsection \u003d infoBoxSettings,\n\t\tposition \u003d 5\n\t)\n\tdefault boolean infoBoxTooltipSplits()\n\t{\n\t\treturn true;\n\t}\n}\n","filePath":"src\\main\\java\\hsj\\external\\theatreofbloodstats\\TheatreOfBloodStatsConfig.java"},{"fileName":"TheatreOfBloodStatsInfoBox.java","content":"package hsj.external.theatreofbloodstats;\n\nimport java.awt.Color;\nimport java.awt.image.BufferedImage;\nimport lombok.Getter;\nimport net.runelite.client.ui.overlay.infobox.InfoBox;\nimport net.runelite.client.ui.overlay.infobox.InfoBoxPriority;\nimport org.apache.commons.lang3.StringUtils;\n\n@Getter\npublic class TheatreOfBloodStatsInfoBox extends InfoBox\n{\n\n\tprivate final String room;\n\tprivate final String time;\n\tprivate final String percent;\n\tprivate final String damage;\n\tprivate final String splits;\n\tprivate final String healed;\n\tprivate final TheatreOfBloodStatsConfig config;\n\n\n\tTheatreOfBloodStatsInfoBox(\n\t\tBufferedImage image,\n\t\tTheatreOfBloodStatsConfig config,\n\t\tTheatreOfBloodStatsPlugin plugin,\n\t\tString room,\n\t\tString time,\n\t\tString percent,\n\t\tString damage,\n\t\tString splits,\n\t\tString healed\n\t)\n\t{\n\t\tsuper(image, plugin);\n\t\tthis.config \u003d config;\n\t\tthis.room \u003d room;\n\t\tthis.time \u003d time;\n\t\tthis.percent \u003d percent;\n\t\tthis.damage \u003d damage;\n\t\tthis.splits \u003d splits;\n\t\tthis.healed \u003d healed;\n\t\tsetPriority(InfoBoxPriority.LOW);\n\t}\n\n\t@Override\n\tpublic String getText()\n\t{\n\t\tswitch (config.infoBoxText())\n\t\t{\n\t\t\tcase NONE:\n\t\t\t\treturn \"\";\n\t\t\tcase TIME:\n\t\t\t\treturn StringUtils.substringBefore(time, \".\");\n\t\t\tcase DAMAGE_PERCENT:\n\t\t\t\treturn Math.round(Double.parseDouble(percent)) + \"%\";\n\t\t}\n\t\treturn \"\";\n\t}\n\n\t@Override\n\tpublic Color getTextColor()\n\t{\n\t\treturn Color.GREEN;\n\t}\n\n\t@Override\n\tpublic String getTooltip()\n\t{\n\t\tif (!config.infoBoxTooltip())\n\t\t{\n\t\t\treturn \"\";\n\t\t}\n\n\t\tStringBuilder sb \u003d new StringBuilder();\n\t\tsb.append(room);\n\t\tsb.append(\"\u003c/br\u003e\");\n\n\t\tif (config.infoBoxTooltipSplits() \u0026\u0026 !StringUtils.isEmpty(splits))\n\t\t{\n\t\t\tsb.append(splits);\n\t\t\tif (config.infoBoxTooltipDmg() || config.infoBoxTooltipHealed())\n\t\t\t{\n\t\t\t\tsb.append(\"\u003c/br\u003e\");\n\t\t\t}\n\t\t}\n\n\t\tif (config.infoBoxTooltipDmg() \u0026\u0026 !StringUtils.isEmpty(damage) \u0026\u0026 !damage.equals(\"0\"))\n\t\t{\n\t\t\tsb.append(damage).append(\" (\").append(percent).append(\"%)\");\n\t\t\tif (config.infoBoxTooltipHealed())\n\t\t\t{\n\t\t\t\tsb.append(\"\u003c/br\u003e\");\n\t\t\t}\n\t\t}\n\n\t\tif (config.infoBoxTooltipHealed() \u0026\u0026 !StringUtils.isEmpty(healed))\n\t\t{\n\t\t\tsb.append(healed);\n\t\t}\n\n\t\treturn sb.toString();\n\t}\n\n\t@Override\n\tpublic boolean render()\n\t{\n\t\treturn config.showInfoBoxes();\n\t}\n}\n","filePath":"src\\main\\java\\hsj\\external\\theatreofbloodstats\\TheatreOfBloodStatsInfoBox.java"},{"fileName":"TheatreOfBloodStatsPlugin.java","content":"/*\n * Copyright (c) 2020, HSJ\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage hsj.external.theatreofbloodstats;\n\nimport com.google.common.collect.ImmutableSet;\nimport com.google.inject.Provides;\nimport java.awt.Color;\nimport java.awt.image.BufferedImage;\nimport java.text.DecimalFormat;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.concurrent.TimeUnit;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\nimport javax.inject.Inject;\nimport net.runelite.api.Actor;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.Hitsplat;\nimport net.runelite.api.HitsplatID;\nimport net.runelite.api.NPC;\nimport net.runelite.api.NpcID;\nimport net.runelite.api.NullNpcID;\nimport net.runelite.api.Point;\nimport net.runelite.api.Varbits;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.HitsplatApplied;\nimport net.runelite.api.events.NpcChanged;\nimport net.runelite.api.events.NpcDespawned;\nimport net.runelite.api.events.NpcSpawned;\nimport net.runelite.api.events.OverheadTextChanged;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.client.chat.ChatColorType;\nimport net.runelite.client.chat.ChatMessageBuilder;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.chat.QueuedMessage;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.infobox.InfoBoxManager;\nimport net.runelite.client.util.Text;\n\n@PluginDescriptor(\n\tname \u003d \"Theatre of Blood Stats\",\n\tdescription \u003d \"Theatre of Blood room splits and damage\",\n\ttags \u003d {\"combat\", \"raid\", \"pve\", \"pvm\", \"bosses\", \"tob\"},\n\tenabledByDefault \u003d false\n)\npublic class TheatreOfBloodStatsPlugin extends Plugin\n{\n\tprivate static final DecimalFormat DMG_FORMAT \u003d new DecimalFormat(\"#,##0\");\n\tprivate static final DecimalFormat DECIMAL_FORMAT \u003d new DecimalFormat(\"##0.0\");\n\tprivate static final int PRECISE_TIMER \u003d 11866;\n\tprivate static final int THEATRE_OF_BLOOD_ROOM_STATUS \u003d 6447;\n\tprivate static final int TOB_LOBBY \u003d 14642;\n\tprivate static final int NYLOCAS_REGION \u003d 13122;\n\tprivate static final int SOTETSEG_MAZE_REGION \u003d 13379;\n\tprivate static final int NYLOCAS_WAVES_TOTAL \u003d 31;\n\tprivate static final int TICK_LENGTH \u003d 600;\n\tprivate static final int MAIDEN_ID \u003d 25748;\n\tprivate static final int BLOAT_ID \u003d 25749;\n\tprivate static final int NYLOCAS_ID \u003d 25750;\n\tprivate static final int SOTETSEG_ID \u003d 25751;\n\tprivate static final int XARPUS_ID \u003d 25752;\n\tprivate static final int VERZIK_ID \u003d 22473;\n\tprivate static final Pattern MAIDEN_WAVE \u003d Pattern.compile(\"Wave \u0027The Maiden of Sugadinti\u0027 \\\\(.*\\\\) complete!\");\n\tprivate static final Pattern BLOAT_WAVE \u003d Pattern.compile(\"Wave \u0027The Pestilent Bloat\u0027 \\\\(.*\\\\) complete!Duration: (\\\\d+):(\\\\d+)\\\\.?(\\\\d+)\");\n\tprivate static final Pattern NYLOCAS_WAVE \u003d Pattern.compile(\"Wave \u0027The Nylocas\u0027 \\\\(.*\\\\) complete!\");\n\tprivate static final Pattern SOTETSEG_WAVE \u003d Pattern.compile(\"Wave \u0027Sotetseg\u0027 \\\\(.*\\\\) complete!\");\n\tprivate static final Pattern XARPUS_WAVE \u003d Pattern.compile(\"Wave \u0027Xarpus\u0027 \\\\(.*\\\\) complete!\");\n\tprivate static final Pattern COMPLETION \u003d Pattern.compile(\"Theatre of Blood total completion time:\");\n\tprivate static final Set\u003cInteger\u003e NYLOCAS_IDS \u003d ImmutableSet.of(\n\t\tNpcID.NYLOCAS_HAGIOS, NpcID.NYLOCAS_HAGIOS_8347, NpcID.NYLOCAS_HAGIOS_8350, NpcID.NYLOCAS_HAGIOS_8353,\n\t\tNpcID.NYLOCAS_HAGIOS_10776, NpcID.NYLOCAS_HAGIOS_10779, NpcID.NYLOCAS_HAGIOS_10782, NpcID.NYLOCAS_HAGIOS_10785,\n\t\tNpcID.NYLOCAS_HAGIOS_10793, NpcID.NYLOCAS_HAGIOS_10796, NpcID.NYLOCAS_HAGIOS_10799, NpcID.NYLOCAS_HAGIOS_10802,\n\t\tNpcID.NYLOCAS_TOXOBOLOS_8343, NpcID.NYLOCAS_TOXOBOLOS_8346, NpcID.NYLOCAS_TOXOBOLOS_8349, NpcID.NYLOCAS_TOXOBOLOS_8352,\n\t\tNpcID.NYLOCAS_TOXOBOLOS_10775, NpcID.NYLOCAS_TOXOBOLOS_10778, NpcID.NYLOCAS_TOXOBOLOS_10781, NpcID.NYLOCAS_TOXOBOLOS_10784,\n\t\tNpcID.NYLOCAS_TOXOBOLOS_10792, NpcID.NYLOCAS_TOXOBOLOS_10795, NpcID.NYLOCAS_TOXOBOLOS_10798, NpcID.NYLOCAS_TOXOBOLOS_10801,\n\t\tNpcID.NYLOCAS_ISCHYROS_8342, NpcID.NYLOCAS_ISCHYROS_8345, NpcID.NYLOCAS_ISCHYROS_8348, NpcID.NYLOCAS_ISCHYROS_8351,\n\t\tNpcID.NYLOCAS_ISCHYROS_10774, NpcID.NYLOCAS_ISCHYROS_10777, NpcID.NYLOCAS_ISCHYROS_10780, NpcID.NYLOCAS_ISCHYROS_10783,\n\t\tNpcID.NYLOCAS_ISCHYROS_10791, NpcID.NYLOCAS_ISCHYROS_10794, NpcID.NYLOCAS_ISCHYROS_10797, NpcID.NYLOCAS_ISCHYROS_10800\n\t);\n\tprivate static final Set\u003cPoint\u003e NYLOCAS_VALID_SPAWNS \u003d ImmutableSet.of(\n\t\tnew Point(17, 24), new Point(17, 25), new Point(18, 24), new Point(18, 25),\n\t\tnew Point(31, 9), new Point(31, 10), new Point(32, 9), new Point(32, 10),\n\t\tnew Point(46, 24), new Point(46, 25), new Point(47, 24), new Point(47, 25)\n\t);\n\tprivate static final Set\u003cString\u003e BOSS_NAMES \u003d ImmutableSet.of(\n\t\t\"The Maiden of Sugadinti\", \"Pestilent Bloat\", \"Nylocas Vasilias\", \"Sotetseg\", \"Xarpus\", \"Verzik Vitur\"\n\t);\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate TheatreOfBloodStatsConfig config;\n\n\t@Inject\n\tprivate ChatMessageManager chatMessageManager;\n\n\t@Inject\n\tprivate InfoBoxManager infoBoxManager;\n\n\t@Inject\n\tprivate ItemManager itemManager;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\tprivate TheatreOfBloodStatsInfoBox maidenInfoBox;\n\tprivate TheatreOfBloodStatsInfoBox bloatInfoBox;\n\tprivate TheatreOfBloodStatsInfoBox nyloInfoBox;\n\tprivate TheatreOfBloodStatsInfoBox soteInfoBox;\n\tprivate TheatreOfBloodStatsInfoBox xarpusInfoBox;\n\tprivate TheatreOfBloodStatsInfoBox verzikInfoBox;\n\n\tprivate int prevRegion;\n\tprivate boolean tobInside;\n\tprivate boolean instanced;\n\tprivate boolean preciseTimers;\n\n\tprivate int maidenStartTick \u003d -1;\n\tprivate int maiden70time;\n\tprivate int maiden50time;\n\tprivate int maiden30time;\n\n\tprivate int nyloStartTick \u003d -1;\n\tprivate int currentNylos;\n\tprivate boolean nyloWavesFinished;\n\tprivate boolean nyloCleanupFinished;\n\tprivate boolean waveThisTick \u003d false;\n\tprivate int waveTime;\n\tprivate int cleanupTime;\n\tprivate int bossSpawnTime;\n\tprivate int nyloWave \u003d 0;\n\n\tprivate int soteStartTick \u003d -1;\n\tprivate boolean sote66;\n\tprivate int sote66time;\n\tprivate boolean sote33;\n\tprivate int sote33time;\n\n\tprivate int xarpusStartTick \u003d -1;\n\tprivate int xarpusAcidTime;\n\tprivate int xarpusRecoveryTime;\n\tprivate int xarpusPreScreech;\n\tprivate int xarpusPreScreechTotal;\n\n\tprivate int verzikStartTick \u003d -1;\n\tprivate int verzikP1time;\n\tprivate int verzikP2time;\n\tprivate double verzikP1personal;\n\tprivate double verzikP1total;\n\tprivate double verzikP2personal;\n\tprivate double verzikP2total;\n\tprivate double verzikP2healed;\n\n\tprivate final Map\u003cString, Integer\u003e personalDamage \u003d new HashMap\u003c\u003e();\n\tprivate final Map\u003cString, Integer\u003e totalDamage \u003d new HashMap\u003c\u003e();\n\tprivate final Map\u003cString, Integer\u003e totalHealing \u003d new HashMap\u003c\u003e();\n\n\t@Provides\n\tTheatreOfBloodStatsConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(TheatreOfBloodStatsConfig.class);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tresetAll();\n\t\tresetAllInfoBoxes();\n\t}\n\n\t@Subscribe\n\tpublic void onVarbitChanged(VarbitChanged event)\n\t{\n\t\tif (client.getLocalPlayer() \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tint tobVar \u003d client.getVarbitValue(Varbits.THEATRE_OF_BLOOD);\n\t\ttobInside \u003d tobVar \u003d\u003d 2 || tobVar \u003d\u003d 3;\n\n\t\tint preciseTimerVar \u003d client.getVarbitValue(PRECISE_TIMER);\n\t\tpreciseTimers \u003d preciseTimerVar \u003d\u003d 1 ;\n\n\t\tif (!tobInside)\n\t\t{\n\t\t\tresetAll();\n\t\t}\n\n\t\tint region \u003d WorldPoint.fromLocalInstance(client, client.getLocalPlayer().getLocalLocation()).getRegionID();\n\t\tint status \u003d client.getVarbitValue(THEATRE_OF_BLOOD_ROOM_STATUS);\n\n\t\tif (status \u003d\u003d 1 \u0026\u0026 region !\u003d prevRegion \u0026\u0026 region !\u003d SOTETSEG_MAZE_REGION)\n\t\t{\n\t\t\tprevRegion \u003d region;\n\t\t}\n\n\t\tif (region \u003d\u003d TOB_LOBBY)\n\t\t{\n\t\t\tresetMaiden();\n\t\t\tresetBloat();\n\t\t\tresetNylo();\n\t\t\tresetSote();\n\t\t\tresetXarpus();\n\t\t\tresetVerzik();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage event)\n\t{\n\t\tif (!tobInside || event.getType() !\u003d ChatMessageType.GAMEMESSAGE)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tString strippedMessage \u003d Text.removeTags(event.getMessage());\n\t\tList\u003cString\u003e messages \u003d new ArrayList\u003c\u003e(Collections.emptyList());\n\n\t\tif (MAIDEN_WAVE.matcher(strippedMessage).find())\n\t\t{\n\t\t\tdouble personal \u003d personalDamage.getOrDefault(\"The Maiden of Sugadinti\", 0);\n\t\t\tdouble total \u003d totalDamage.getOrDefault(\"The Maiden of Sugadinti\", 0);\n\t\t\tint healed \u003d totalHealing.getOrDefault(\"The Maiden of Sugadinti\", 0);\n\t\t\tString healing \u003d \"Total Healing - \" + DMG_FORMAT.format(healed);\n\t\t\tdouble percent \u003d (personal / total) * 100;\n\t\t\tint roomTicks;\n\t\t\tString roomTime \u003d \"\";\n\t\t\tString splits \u003d \"\";\n\t\t\tString damage \u003d \"\";\n\t\t\tmessages.clear();\n\n\t\t\tif (maidenStartTick \u003e 0)\n\t\t\t{\n\t\t\t\troomTicks \u003d client.getTickCount() - maidenStartTick;\n\t\t\t\troomTime \u003d formatTime(roomTicks);\n\t\t\t\tsplits \u003d \"70% - \" + formatTime(maiden70time) +\n\t\t\t\t\t\"\u003c/br\u003e\" +\n\t\t\t\t\t\"50% - \" + formatTime(maiden50time) + \" (\" + formatTime(maiden50time - maiden70time) + \")\" +\n\t\t\t\t\t\"\u003c/br\u003e\" +\n\t\t\t\t\t\"30% - \" + formatTime(maiden30time) + \" (\" + formatTime(maiden30time - maiden50time) + \")\" +\n\t\t\t\t\t\"\u003c/br\u003e\" +\n\t\t\t\t\t\"Room Complete - \" + roomTime + \" (\" + formatTime(roomTicks - maiden30time) + \")\";\n\n\t\t\t\tif (config.chatboxSplits())\n\t\t\t\t{\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"70% - \")\n\t\t\t\t\t\t\t.append(Color.RED, formatTime(maiden70time))\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"50% - \")\n\t\t\t\t\t\t\t.append(Color.RED, formatTime(maiden50time) + \" (\" + formatTime(maiden50time - maiden70time) + \")\")\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"30% - \")\n\t\t\t\t\t\t\t.append(Color.RED, formatTime(maiden30time) + \" (\" + formatTime(maiden30time - maiden50time) + \")\")\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"Room Complete - \")\n\t\t\t\t\t\t\t.append(Color.RED, roomTime + \" (\" + formatTime(roomTicks - maiden30time) + \")\")\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (personal \u003e 0)\n\t\t\t{\n\t\t\t\tdamage \u003d \"Personal Boss Damage - \" + DMG_FORMAT.format(personal);\n\t\t\t\tif (config.chatboxDmg())\n\t\t\t\t{\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"Personal Boss Damage - \")\n\t\t\t\t\t\t\t.append(Color.RED, DMG_FORMAT.format(personal) + \" (\" + DECIMAL_FORMAT.format(percent) + \"%)\")\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (config.chatboxHealed())\n\t\t\t{\n\t\t\t\tmessages.add(\n\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t.append(\"Total Healing - \")\n\t\t\t\t\t\t.append(Color.RED, DMG_FORMAT.format(healed))\n\t\t\t\t\t\t.build()\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tmaidenInfoBox \u003d createInfoBox(MAIDEN_ID, \"Maiden\", roomTime, DECIMAL_FORMAT.format(percent), damage, splits, healing);\n\t\t\tinfoBoxManager.addInfoBox(maidenInfoBox);\n\t\t\tresetMaiden();\n\t\t}\n\t\telse if (BLOAT_WAVE.matcher(strippedMessage).find())\n\t\t{\n\t\t\tdouble personal \u003d personalDamage.getOrDefault(\"Pestilent Bloat\", 0);\n\t\t\tdouble total \u003d totalDamage.getOrDefault(\"Pestilent Bloat\", 0);\n\t\t\tdouble percent \u003d (personal / total) * 100;\n\t\t\tMatcher m \u003d BLOAT_WAVE.matcher(strippedMessage);\n\t\t\tString roomTime \u003d \"\";\n\t\t\tif (m.find())\n\t\t\t{\n\t\t\t\tif (preciseTimers)\n\t\t\t\t{\n\t\t\t\t\troomTime \u003d m.group(1) + \":\" + m.group(2) + \".\" + m.group(3).charAt(0);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\troomTime \u003d m.group(1) + \":\" + m.group(2);\n\t\t\t\t}\n\t\t\t}\n\t\t\tString damage \u003d \"\";\n\t\t\tmessages.clear();\n\n\t\t\tif (personal \u003e 0)\n\t\t\t{\n\t\t\t\tdamage \u003d \"Personal Boss Damage - \" + DMG_FORMAT.format(personal);\n\t\t\t\tif (config.chatboxDmg())\n\t\t\t\t{\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"Personal Boss Damage - \")\n\t\t\t\t\t\t\t.append(Color.RED, DMG_FORMAT.format(personal) + \" (\" + DECIMAL_FORMAT.format(percent) + \"%)\")\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tbloatInfoBox \u003d createInfoBox(BLOAT_ID, \"Bloat\", roomTime, DECIMAL_FORMAT.format(percent), damage, \"Room Complete - \" + roomTime, \"\");\n\t\t\tinfoBoxManager.addInfoBox(bloatInfoBox);\n\t\t\tresetBloat();\n\t\t}\n\t\telse if (NYLOCAS_WAVE.matcher(strippedMessage).find())\n\t\t{\n\t\t\tdouble personal \u003d personalDamage.getOrDefault(\"Nylocas Vasilias\", 0);\n\t\t\tdouble total \u003d totalDamage.getOrDefault(\"Nylocas Vasilias\", 0);\n\t\t\tint healed \u003d totalHealing.getOrDefault(\"Nylocas Vasilias\", 0);\n\t\t\tString healing \u003d \"Total Healing - \" + DMG_FORMAT.format(healed);\n\t\t\tdouble percent \u003d (personal / total) * 100;\n\t\t\tint roomTicks;\n\t\t\tString roomTime \u003d \"\";\n\t\t\tString splits \u003d \"\";\n\t\t\tString damage \u003d \"\";\n\t\t\tmessages.clear();\n\n\t\t\tif (nyloStartTick \u003e 0)\n\t\t\t{\n\t\t\t\troomTicks \u003d client.getTickCount() - nyloStartTick;\n\t\t\t\troomTime \u003d formatTime(roomTicks);\n\t\t\t\tsplits \u003d \"Waves - \" + formatTime(waveTime) +\n\t\t\t\t\t\"\u003c/br\u003e\" +\n\t\t\t\t\t\"Cleanup - \" + formatTime(cleanupTime) + \" (\" + formatTime(cleanupTime - waveTime) + \")\" +\n\t\t\t\t\t\"\u003c/br\u003e\" +\n\t\t\t\t\t\"Boss Spawn - \" + formatTime(bossSpawnTime) + \" (\" + formatTime(bossSpawnTime - cleanupTime) + \")\" +\n\t\t\t\t\t\"\u003c/br\u003e\" +\n\t\t\t\t\t\"Room Complete - \" + roomTime + \" (\" + formatTime(roomTicks - bossSpawnTime) + \")\";\n\n\t\t\t\tif (config.chatboxSplits())\n\t\t\t\t{\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"Waves - \")\n\t\t\t\t\t\t\t.append(Color.RED, formatTime(waveTime))\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"Cleanup - \")\n\t\t\t\t\t\t\t.append(Color.RED, formatTime(cleanupTime) + \" (\" + formatTime(cleanupTime - waveTime) + \")\")\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"Boss Spawn - \")\n\t\t\t\t\t\t\t.append(Color.RED, formatTime(bossSpawnTime) + \" (\" + formatTime(bossSpawnTime - cleanupTime) + \")\")\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"Room Complete - \")\n\t\t\t\t\t\t\t.append(Color.RED, roomTime + \" (\" + formatTime(roomTicks - bossSpawnTime) + \")\")\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (personal \u003e 0)\n\t\t\t{\n\t\t\t\tdamage \u003d \"Personal Boss Damage - \" + DMG_FORMAT.format(personal);\n\t\t\t\tif (config.chatboxDmg())\n\t\t\t\t{\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"Personal Boss Damage - \")\n\t\t\t\t\t\t\t.append(Color.RED, DMG_FORMAT.format(personal) + \" (\" + DECIMAL_FORMAT.format(percent) + \"%)\")\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (config.chatboxHealed())\n\t\t\t{\n\t\t\t\tmessages.add(\n\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t.append(\"Total Healing - \")\n\t\t\t\t\t\t.append(Color.RED, DMG_FORMAT.format(healed))\n\t\t\t\t\t\t.build()\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tnyloInfoBox \u003d createInfoBox(NYLOCAS_ID, \"Nylocas\", roomTime, DECIMAL_FORMAT.format(percent), damage, splits, healing);\n\t\t\tinfoBoxManager.addInfoBox(nyloInfoBox);\n\t\t\tresetNylo();\n\t\t}\n\t\telse if (SOTETSEG_WAVE.matcher(strippedMessage).find())\n\t\t{\n\t\t\tdouble personal \u003d personalDamage.getOrDefault(\"Sotetseg\", 0);\n\t\t\tdouble total \u003d totalDamage.getOrDefault(\"Sotetseg\", 0);\n\t\t\tdouble percent \u003d (personal / total) * 100;\n\t\t\tint roomTicks;\n\t\t\tString roomTime \u003d \"\";\n\t\t\tString splits \u003d \"\";\n\t\t\tString damage \u003d \"\";\n\t\t\tmessages.clear();\n\n\t\t\tif (soteStartTick \u003e 0)\n\t\t\t{\n\t\t\t\troomTicks \u003d client.getTickCount() - soteStartTick;\n\t\t\t\troomTime \u003d formatTime(roomTicks);\n\t\t\t\tsplits \u003d \"66% - \" + formatTime(sote66time) +\n\t\t\t\t\t\"\u003c/br\u003e\" +\n\t\t\t\t\t\"33% - \" + formatTime(sote33time) + \" (\" + formatTime(sote33time - sote66time) + \")\" +\n\t\t\t\t\t\"\u003c/br\u003e\" +\n\t\t\t\t\t\"Room Complete - \" + roomTime + \" (\" + formatTime(roomTicks - sote33time) + \")\";\n\n\t\t\t\tif (config.chatboxSplits())\n\t\t\t\t{\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"66% - \")\n\t\t\t\t\t\t\t.append(Color.RED, formatTime(sote66time))\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"33% - \")\n\t\t\t\t\t\t\t.append(Color.RED, formatTime(sote33time) + \" (\" + formatTime(sote33time - sote66time) + \")\")\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"Room Complete - \")\n\t\t\t\t\t\t\t.append(Color.RED, roomTime + \" (\" + formatTime(roomTicks - sote33time) + \")\")\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (personal \u003e 0)\n\t\t\t{\n\t\t\t\tdamage \u003d \"Personal Boss Damage - \" + DMG_FORMAT.format(personal);\n\t\t\t\tif (config.chatboxDmg())\n\t\t\t\t{\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"Personal Boss Damage - \")\n\t\t\t\t\t\t\t.append(Color.RED, DMG_FORMAT.format(personal) + \" (\" + DECIMAL_FORMAT.format(percent) + \"%)\")\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsoteInfoBox \u003d createInfoBox(SOTETSEG_ID, \"Sotetseg\", roomTime, DECIMAL_FORMAT.format(percent), damage, splits, \"\");\n\t\t\tinfoBoxManager.addInfoBox(soteInfoBox);\n\t\t\tresetSote();\n\t\t}\n\t\telse if (XARPUS_WAVE.matcher(strippedMessage).find())\n\t\t{\n\t\t\tdouble personal \u003d personalDamage.getOrDefault(\"Xarpus\", 0);\n\t\t\tdouble total \u003d totalDamage.getOrDefault(\"Xarpus\", 0);\n\t\t\tint healed \u003d totalHealing.getOrDefault(\"Xarpus\", 0);\n\t\t\tString healing \u003d \"Total Healing - \" + DMG_FORMAT.format(healed);\n\t\t\tdouble xarpusPostScreech \u003d personal - xarpusPreScreech;\n\t\t\tdouble personalPercent \u003d (personal / total) * 100;\n\t\t\tdouble preScreechPercent \u003d ((double) xarpusPreScreech / (double) xarpusPreScreechTotal) * 100;\n\t\t\tdouble postScreechPercent \u003d (xarpusPostScreech / (total - xarpusPreScreechTotal)) * 100;\n\t\t\tint roomTicks;\n\t\t\tString roomTime \u003d \"\";\n\t\t\tString splits \u003d \"\";\n\t\t\tString damage \u003d \"\";\n\t\t\tmessages.clear();\n\n\t\t\tif (xarpusStartTick \u003e 0)\n\t\t\t{\n\t\t\t\troomTicks \u003d client.getTickCount() - xarpusStartTick;\n\t\t\t\troomTime \u003d formatTime(roomTicks);\n\t\t\t\tsplits \u003d \"Recovery Phase - \" + formatTime(xarpusRecoveryTime) +\n\t\t\t\t\t\"\u003c/br\u003e\" +\n\t\t\t\t\t\"Screech Time - \" + formatTime(xarpusAcidTime) + \" (\" + formatTime(xarpusAcidTime - xarpusRecoveryTime) + \")\" +\n\t\t\t\t\t\"\u003c/br\u003e\" +\n\t\t\t\t\t\"Room Complete - \" + roomTime + \" (\" + formatTime(roomTicks - xarpusAcidTime) + \")\";\n\n\t\t\t\tif (config.chatboxSplits())\n\t\t\t\t{\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"Recovery Phase - \")\n\t\t\t\t\t\t\t.append(Color.RED, formatTime(xarpusRecoveryTime))\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"Screech Time - \")\n\t\t\t\t\t\t\t.append(Color.RED, formatTime(xarpusAcidTime) + \" (\" + formatTime(xarpusAcidTime - xarpusRecoveryTime) + \")\")\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"Room Complete - \")\n\t\t\t\t\t\t\t.append(Color.RED, roomTime + \" (\" + formatTime(roomTicks - xarpusAcidTime) + \")\")\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (xarpusPreScreech \u003e 0)\n\t\t\t{\n\t\t\t\tdamage +\u003d \"Pre Screech Damage - \" + DMG_FORMAT.format(xarpusPreScreech) + \" (\" + DECIMAL_FORMAT.format(preScreechPercent) + \"%)\" + \"\u003c/br\u003e\";\n\t\t\t\tif (config.chatboxDmg())\n\t\t\t\t{\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"Pre Screech Damage - \")\n\t\t\t\t\t\t\t.append(Color.RED, DMG_FORMAT.format(xarpusPreScreech) + \" (\" + DECIMAL_FORMAT.format(preScreechPercent) + \"%)\")\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (xarpusPostScreech \u003e 0)\n\t\t\t{\n\t\t\t\tdamage +\u003d \"Post Screech Damage - \" + DMG_FORMAT.format(xarpusPostScreech) + \" (\" + DECIMAL_FORMAT.format(postScreechPercent) + \"%)\" + \"\u003c/br\u003e\";\n\t\t\t\tif (config.chatboxDmg())\n\t\t\t\t{\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"Post Screech Damage - \")\n\t\t\t\t\t\t\t.append(Color.RED, DMG_FORMAT.format(xarpusPostScreech) + \" (\" + DECIMAL_FORMAT.format(postScreechPercent) + \"%)\")\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (personal \u003e 0)\n\t\t\t{\n\t\t\t\tdamage +\u003d \"Personal Boss Damage - \" + DMG_FORMAT.format(personal);\n\t\t\t\tif (config.chatboxDmg())\n\t\t\t\t{\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"Personal Boss Damage - \")\n\t\t\t\t\t\t\t.append(Color.RED, DMG_FORMAT.format(personal) + \" (\" + DECIMAL_FORMAT.format(personalPercent) + \"%)\")\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (config.chatboxHealed())\n\t\t\t{\n\t\t\t\tmessages.add(\n\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t.append(\"Total Healed - \")\n\t\t\t\t\t\t.append(Color.RED, DMG_FORMAT.format(healed))\n\t\t\t\t\t\t.build()\n\t\t\t\t);\n\t\t\t}\n\n\t\t\txarpusInfoBox \u003d createInfoBox(XARPUS_ID, \"Xarpus\", roomTime, DECIMAL_FORMAT.format(personalPercent), damage, splits, healing);\n\t\t\tinfoBoxManager.addInfoBox(xarpusInfoBox);\n\t\t\tresetXarpus();\n\t\t}\n\t\telse if (COMPLETION.matcher(strippedMessage).find())\n\t\t{\n\t\t\tdouble personal \u003d personalDamage.getOrDefault(\"Verzik Vitur\", 0) ;\n\t\t\tdouble total \u003d totalDamage.getOrDefault(\"Verzik Vitur\", 0);\n\t\t\tdouble p3personal \u003d personalDamage.getOrDefault(\"Verzik Vitur\", 0) - (verzikP1personal + verzikP2personal);\n\t\t\tdouble p3total \u003d totalDamage.getOrDefault(\"Verzik Vitur\", 0) - (verzikP1total + verzikP2total);\n\t\t\tdouble p3healed \u003d totalHealing.getOrDefault(\"Verzik Vitur\", 0) - verzikP2healed;\n\t\t\tdouble healed \u003d totalHealing.getOrDefault(\"Verzik Vitur\", 0);\n\t\t\tdouble p3percent \u003d (p3personal / p3total) * 100;\n\t\t\tdouble p1percent \u003d (verzikP1personal / verzikP1total) * 100;\n\t\t\tdouble p2percent \u003d (verzikP2personal / verzikP2total) * 100;\n\t\t\tdouble percent \u003d (personal / total) * 100;\n\t\t\tint roomTicks;\n\t\t\tString roomTime \u003d \"\";\n\t\t\tString splits \u003d \"\";\n\t\t\tString damage \u003d \"\";\n\t\t\tString healing \u003d \"P2 Healed - \" + DMG_FORMAT.format(verzikP2healed) +\n\t\t\t\t\"\u003c/br\u003e\" +\n\t\t\t\t\"P3 Healed - \" + DMG_FORMAT.format(p3healed) +\n\t\t\t\t\"\u003c/br\u003e\" +\n\t\t\t\t\"Total Healed - \" + DMG_FORMAT.format(healed);\n\t\t\tmessages.clear();\n\n\t\t\tif (verzikStartTick \u003e 0)\n\t\t\t{\n\t\t\t\troomTicks \u003d client.getTickCount() - verzikStartTick;\n\t\t\t\troomTime \u003d formatTime(roomTicks);\n\t\t\t\tsplits \u003d \"P1 - \" + formatTime(verzikP1time) +\n\t\t\t\t\t\"\u003c/br\u003e\" +\n\t\t\t\t\t\"P2 - \" + formatTime(verzikP2time) + \" (\" + formatTime(verzikP2time - verzikP1time) + \")\" +\n\t\t\t\t\t\"\u003c/br\u003e\" +\n\t\t\t\t\t\"P3 - \" + roomTime + \" (\" + formatTime(roomTicks - verzikP2time) + \")\";\n\n\t\t\t\tif (config.chatboxSplits())\n\t\t\t\t{\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"P1 - \")\n\t\t\t\t\t\t\t.append(Color.RED, formatTime(verzikP1time))\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"P2 - \")\n\t\t\t\t\t\t\t.append(Color.RED, formatTime(verzikP2time) + \" (\" + formatTime(verzikP2time - verzikP1time) + \")\")\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"P3 - \")\n\t\t\t\t\t\t\t.append(Color.RED, roomTime + \" (\" + formatTime(roomTicks - verzikP2time) + \")\")\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (verzikP1personal \u003e 0)\n\t\t\t{\n\t\t\t\tdamage +\u003d \"P1 Personal Damage - \" + DMG_FORMAT.format(verzikP1personal) + \" (\" + DECIMAL_FORMAT.format(p1percent) + \"%)\" + \"\u003c/br\u003e\";\n\t\t\t\tif (config.chatboxDmg())\n\t\t\t\t{\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"P1 Personal Damage - \")\n\t\t\t\t\t\t\t.append(Color.RED, DMG_FORMAT.format(verzikP1personal) + \" (\" + DECIMAL_FORMAT.format(p1percent) + \"%)\")\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (verzikP2personal \u003e 0)\n\t\t\t{\n\t\t\t\tdamage +\u003d \"P2 Personal Damage - \" + DMG_FORMAT.format(verzikP2personal) + \" (\" + DECIMAL_FORMAT.format(p2percent) + \"%)\" + \"\u003c/br\u003e\";\n\t\t\t\tif (config.chatboxDmg())\n\t\t\t\t{\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"P2 Personal Damage - \")\n\t\t\t\t\t\t\t.append(Color.RED, DMG_FORMAT.format(verzikP2personal) + \" (\" + DECIMAL_FORMAT.format(p2percent) + \"%)\")\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (p3personal \u003e 0)\n\t\t\t{\n\t\t\t\tdamage +\u003d \"P3 Personal Damage - \" + DMG_FORMAT.format(p3personal) + \" (\" + DECIMAL_FORMAT.format(p3percent) + \"%)\" + \"\u003c/br\u003e\";\n\t\t\t\tif (config.chatboxDmg())\n\t\t\t\t{\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"P3 Personal Damage - \")\n\t\t\t\t\t\t\t.append(Color.RED, DMG_FORMAT.format(p3personal) + \" (\" + DECIMAL_FORMAT.format(p3percent) + \"%)\")\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (personal \u003e 0)\n\t\t\t{\n\t\t\t\tdamage +\u003d \"Total Personal Damage - \" + DMG_FORMAT.format(personal);\n\t\t\t\tif (config.chatboxDmg())\n\t\t\t\t{\n\t\t\t\t\tmessages.add(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t.append(\"Total Personal Damage - \")\n\t\t\t\t\t\t\t.append(Color.RED, DMG_FORMAT.format(personal) + \" (\" + DECIMAL_FORMAT.format(percent) + \"%)\")\n\t\t\t\t\t\t\t.build()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (config.chatboxHealed())\n\t\t\t{\n\t\t\t\tmessages.add(\n\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t.append(\"P2 Healed - \")\n\t\t\t\t\t\t.append(Color.RED, DMG_FORMAT.format(verzikP2healed))\n\t\t\t\t\t\t.build()\n\t\t\t\t);\n\n\t\t\t\tmessages.add(\n\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t.append(\"P3 Healed - \")\n\t\t\t\t\t\t.append(Color.RED, DMG_FORMAT.format(p3healed))\n\t\t\t\t\t\t.build()\n\t\t\t\t);\n\n\t\t\t\tmessages.add(\n\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t.append(\"Total Healed - \")\n\t\t\t\t\t\t.append(Color.RED, DMG_FORMAT.format(healed))\n\t\t\t\t\t\t.build()\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tverzikInfoBox \u003d createInfoBox(VERZIK_ID, \"Verzik\", roomTime, DECIMAL_FORMAT.format(percent), damage, splits, healing);\n\t\t\tinfoBoxManager.addInfoBox(verzikInfoBox);\n\t\t\tresetVerzik();\n\t\t}\n\n\t\tif (!messages.isEmpty())\n\t\t{\n\t\t\tfor (String m : messages)\n\t\t\t{\n\t\t\t\tchatMessageManager.queue(QueuedMessage.builder()\n\t\t\t\t\t.type(ChatMessageType.GAMEMESSAGE)\n\t\t\t\t\t.runeLiteFormattedMessage(m)\n\t\t\t\t\t.build());\n\t\t\t}\n\t\t\tmessages.clear();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onNpcChanged(NpcChanged event)\n\t{\n\t\tif (!tobInside)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tNPC npc \u003d event.getNpc();\n\t\tint npcId \u003d npc.getId();\n\n\t\tswitch (npcId)\n\t\t{\n\t\t\tcase NpcID.THE_MAIDEN_OF_SUGADINTI_8361:\n\t\t\tcase NpcID.THE_MAIDEN_OF_SUGADINTI_10815:\n\t\t\tcase NpcID.THE_MAIDEN_OF_SUGADINTI_10823:\n\t\t\t\tif (maidenStartTick !\u003d -1)\n\t\t\t\t{\n\t\t\t\t\tmaiden70time \u003d client.getTickCount() - maidenStartTick;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase NpcID.THE_MAIDEN_OF_SUGADINTI_8362:\n\t\t\tcase NpcID.THE_MAIDEN_OF_SUGADINTI_10816:\n\t\t\tcase NpcID.THE_MAIDEN_OF_SUGADINTI_10824:\n\t\t\t\tif (maidenStartTick !\u003d -1)\n\t\t\t\t{\n\t\t\t\t\tmaiden50time \u003d client.getTickCount() - maidenStartTick;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase NpcID.THE_MAIDEN_OF_SUGADINTI_8363:\n\t\t\tcase NpcID.THE_MAIDEN_OF_SUGADINTI_10817:\n\t\t\tcase NpcID.THE_MAIDEN_OF_SUGADINTI_10825:\n\t\t\t\tif (maidenStartTick !\u003d -1)\n\t\t\t\t{\n\t\t\t\t\tmaiden30time \u003d client.getTickCount() - maidenStartTick;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase NpcID.SOTETSEG_8388:\n\t\t\tcase NpcID.SOTETSEG_10865:\n\t\t\tcase NpcID.SOTETSEG_10868:\n\t\t\t\tif (soteStartTick \u003d\u003d -1)\n\t\t\t\t{\n\t\t\t\t\tsoteStartTick \u003d client.getTickCount();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase NpcID.SOTETSEG:\n\t\t\tcase NpcID.SOTETSEG_10864:\n\t\t\tcase NpcID.SOTETSEG_10867:\n\t\t\t\tif (soteStartTick !\u003d -1)\n\t\t\t\t{\n\t\t\t\t\tif (!sote66)\n\t\t\t\t\t{\n\t\t\t\t\t\tsote66time \u003d client.getTickCount() - soteStartTick;\n\t\t\t\t\t\tsote66 \u003d true;\n\t\t\t\t\t}\n\t\t\t\t\telse if (!sote33)\n\t\t\t\t\t{\n\t\t\t\t\t\tsote33time \u003d client.getTickCount() - soteStartTick;\n\t\t\t\t\t\tsote33 \u003d true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase NpcID.XARPUS_8339:\n\t\t\tcase NpcID.XARPUS_10767:\n\t\t\tcase NpcID.XARPUS_10771:\n\t\t\t\txarpusStartTick \u003d client.getTickCount();\n\t\t\t\tbreak;\n\t\t\tcase NpcID.XARPUS_8340:\n\t\t\tcase NpcID.XARPUS_10768:\n\t\t\tcase NpcID.XARPUS_10772:\n\t\t\t\txarpusRecoveryTime \u003d client.getTickCount() - xarpusStartTick;\n\t\t\t\tbreak;\n\t\t\tcase NpcID.VERZIK_VITUR_8370:\n\t\t\tcase NpcID.VERZIK_VITUR_10831:\n\t\t\tcase NpcID.VERZIK_VITUR_10848:\n\t\t\t\tverzikStartTick \u003d client.getTickCount();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onNpcSpawned(NpcSpawned event)\n\t{\n\t\tif (!tobInside)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tNPC npc \u003d event.getNpc();\n\t\tint npcId \u003d npc.getId();\n\n\t\tswitch (npcId)\n\t\t{\n\t\t\tcase NpcID.THE_MAIDEN_OF_SUGADINTI:\n\t\t\tcase NpcID.THE_MAIDEN_OF_SUGADINTI_10814:\n\t\t\tcase NpcID.THE_MAIDEN_OF_SUGADINTI_10822:\n\t\t\t\tmaidenStartTick \u003d client.getTickCount();\n\t\t\t\tbreak;\n\t\t\tcase NullNpcID.NULL_8358:\n\t\t\tcase NullNpcID.NULL_10790:\n\t\t\tcase NullNpcID.NULL_10811:\n\t\t\t\tnyloStartTick \u003d client.getTickCount();\n\t\t\t\tbreak;\n\t\t\tcase NpcID.NYLOCAS_VASILIAS:\n\t\t\tcase NpcID.NYLOCAS_VASILIAS_10786:\n\t\t\tcase NpcID.NYLOCAS_VASILIAS_10807:\n\t\t\t\tbossSpawnTime \u003d client.getTickCount() - nyloStartTick;\n\t\t\t\tbreak;\n\t\t\tcase NpcID.VERZIK_VITUR_8371:\n\t\t\tcase NpcID.VERZIK_VITUR_10832:\n\t\t\tcase NpcID.VERZIK_VITUR_10849:\n\t\t\t\tverzikP1time \u003d client.getTickCount() - verzikStartTick;\n\t\t\t\tverzikP1personal \u003d personalDamage.getOrDefault(\"Verzik Vitur\", 0);\n\t\t\t\tverzikP1total \u003d totalDamage.getOrDefault(\"Verzik Vitur\", 0);\n\t\t\t\tbreak;\n\t\t\tcase NpcID.VERZIK_VITUR_8373:\n\t\t\tcase NpcID.VERZIK_VITUR_10834:\n\t\t\tcase NpcID.VERZIK_VITUR_10851:\n\t\t\t\tverzikP2time \u003d client.getTickCount() - verzikStartTick;\n\t\t\t\tverzikP2personal \u003d personalDamage.getOrDefault(\"Verzik Vitur\", 0) - verzikP1personal;\n\t\t\t\tverzikP2total \u003d totalDamage.getOrDefault(\"Verzik Vitur\", 0) - verzikP1total;\n\t\t\t\tverzikP2healed \u003d totalHealing.getOrDefault(\"Verzik Vitur\", 0);\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (!NYLOCAS_IDS.contains(npcId) || prevRegion !\u003d NYLOCAS_REGION)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tcurrentNylos++;\n\t\tWorldPoint worldPoint \u003d WorldPoint.fromLocalInstance(client, npc.getLocalLocation());\n\t\tPoint spawnLoc \u003d new Point(worldPoint.getRegionX(), worldPoint.getRegionY());\n\n\t\tif (!NYLOCAS_VALID_SPAWNS.contains(spawnLoc))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!waveThisTick)\n\t\t{\n\t\t\tnyloWave++;\n\t\t\twaveThisTick \u003d true;\n\t\t}\n\n\t\tif (nyloWave \u003d\u003d NYLOCAS_WAVES_TOTAL \u0026\u0026 !nyloWavesFinished)\n\t\t{\n\t\t\twaveTime \u003d client.getTickCount() - nyloStartTick;\n\t\t\tnyloWavesFinished \u003d true;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onNpcDespawned(NpcDespawned event)\n\t{\n\t\tif (!tobInside)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tNPC npc \u003d event.getNpc();\n\t\tint npcId \u003d npc.getId();\n\n\t\tif (!NYLOCAS_IDS.contains(npcId) || prevRegion !\u003d NYLOCAS_REGION)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tcurrentNylos--;\n\n\t\tif (nyloWavesFinished \u0026\u0026 !nyloCleanupFinished \u0026\u0026 currentNylos \u003d\u003d 0)\n\t\t{\n\t\t\tcleanupTime \u003d client.getTickCount() - nyloStartTick;\n\t\t\tnyloCleanupFinished \u003d true;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event)\n\t{\n\t\tif (!tobInside)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (waveThisTick)\n\t\t{\n\t\t\twaveThisTick \u003d false;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged event)\n\t{\n\t\tif (event.getGameState() !\u003d GameState.LOADING)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tboolean prevInstance \u003d instanced;\n\t\tinstanced \u003d client.isInInstancedRegion();\n\t\tif (prevInstance \u0026\u0026 !instanced)\n\t\t{\n\t\t\tresetAll();\n\t\t\tresetAllInfoBoxes();\n\t\t}\n\t\telse if (!prevInstance \u0026\u0026 instanced)\n\t\t{\n\t\t\tresetAll();\n\t\t\tresetAllInfoBoxes();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onHitsplatApplied(HitsplatApplied event)\n\t{\n\t\tif (!tobInside)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tActor actor \u003d event.getActor();\n\t\tif (!(actor instanceof NPC))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tNPC npc \u003d (NPC) actor;\n\t\tString npcName \u003d npc.getName();\n\t\tif (npcName \u003d\u003d null || !(BOSS_NAMES.contains(npcName)))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tnpcName \u003d Text.removeTags(npcName);\n\t\tHitsplat hitsplat \u003d event.getHitsplat();\n\n\t\tif (hitsplat.isMine())\n\t\t{\n\t\t\tint myDmg \u003d personalDamage.getOrDefault(npcName, 0);\n\t\t\tint totalDmg \u003d totalDamage.getOrDefault(npcName, 0);\n\t\t\tmyDmg +\u003d hitsplat.getAmount();\n\t\t\ttotalDmg +\u003d hitsplat.getAmount();\n\t\t\tpersonalDamage.put(npcName, myDmg);\n\t\t\ttotalDamage.put(npcName, totalDmg);\n\t\t}\n\t\telse if (hitsplat.isOthers())\n\t\t{\n\t\t\tint totalDmg \u003d totalDamage.getOrDefault(npcName, 0);\n\t\t\ttotalDmg +\u003d hitsplat.getAmount();\n\t\t\ttotalDamage.put(npcName, totalDmg);\n\t\t}\n\t\telse if (hitsplat.getHitsplatType() \u003d\u003d HitsplatID.HEAL)\n\t\t{\n\t\t\tint healed \u003d totalHealing.getOrDefault(npcName, 0);\n\t\t\thealed +\u003d hitsplat.getAmount();\n\t\t\ttotalHealing.put(npcName, healed);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onOverheadTextChanged(OverheadTextChanged event)\n\t{\n\t\tActor npc \u003d event.getActor();\n\t\tif (!(npc instanceof NPC) || !tobInside)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tString overheadText \u003d event.getOverheadText();\n\t\tString npcName \u003d npc.getName();\n\t\tif (npcName !\u003d null \u0026\u0026 npcName.equals(\"Xarpus\") \u0026\u0026 overheadText.equals(\"Screeeeech!\"))\n\t\t{\n\t\t\txarpusAcidTime \u003d client.getTickCount() - xarpusStartTick;\n\t\t\txarpusPreScreech \u003d personalDamage.getOrDefault(npcName, 0);\n\t\t\txarpusPreScreechTotal \u003d totalDamage.getOrDefault(npcName, 0);\n\t\t}\n\t}\n\n\tprivate TheatreOfBloodStatsInfoBox createInfoBox(int itemId, String room, String time, String percent, String damage, String splits, String healed)\n\t{\n\t\tBufferedImage image \u003d itemManager.getImage(itemId);\n\t\treturn new TheatreOfBloodStatsInfoBox(image, config, this, room, time, percent, damage, splits, healed);\n\t}\n\n\tprivate String formatTime(int ticks)\n\t{\n\t\tint millis \u003d ticks * TICK_LENGTH;\n\t\tString hundredths \u003d String.valueOf(millis % 1000).substring(0, 1);\n\n\t\tif (preciseTimers)\n\t\t{\n\t\t\treturn String.format(\"%d:%02d.%s\",\n\t\t\t\tTimeUnit.MILLISECONDS.toMinutes(millis) % TimeUnit.HOURS.toMinutes(1),\n\t\t\t\tTimeUnit.MILLISECONDS.toSeconds(millis) % TimeUnit.MINUTES.toSeconds(1),\n\t\t\t\thundredths);\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn String.format(\"%d:%02d\",\n\t\t\t\tTimeUnit.MILLISECONDS.toMinutes(millis) % TimeUnit.HOURS.toMinutes(1),\n\t\t\t\tTimeUnit.MILLISECONDS.toSeconds(millis) % TimeUnit.MINUTES.toSeconds(1));\n\t\t}\n\t}\n\n\tprivate void resetMaiden()\n\t{\n\t\tmaidenStartTick \u003d -1;\n\t\tmaiden70time \u003d 0;\n\t\tmaiden50time \u003d 0;\n\t\tmaiden30time \u003d 0;\n\t\tpersonalDamage.remove(\"The Maiden of Sugadinti\");\n\t\ttotalDamage.remove(\"The Maiden of Sugadinti\");\n\t\ttotalHealing.remove(\"The Maiden of Sugadinti\");\n\t}\n\n\tprivate void resetBloat()\n\t{\n\t\tpersonalDamage.remove(\"Pestilent Bloat\");\n\t\ttotalDamage.remove(\"Pestilent Bloat\");\n\t}\n\n\tprivate void resetNylo()\n\t{\n\t\tnyloStartTick \u003d -1;\n\t\tcurrentNylos \u003d 0;\n\t\tnyloWavesFinished \u003d false;\n\t\tnyloCleanupFinished \u003d false;\n\t\twaveTime \u003d 0;\n\t\tcleanupTime \u003d 0;\n\t\tbossSpawnTime \u003d 0;\n\t\twaveThisTick \u003d false;\n\t\tnyloWave \u003d 0;\n\t\tpersonalDamage.remove(\"Nylocas Vasilias\");\n\t\ttotalDamage.remove(\"Nylocas Vasilias\");\n\t}\n\n\tprivate void resetSote()\n\t{\n\t\tsoteStartTick \u003d -1;\n\t\tsote66 \u003d false;\n\t\tsote66time \u003d 0;\n\t\tsote33 \u003d false;\n\t\tsote33time \u003d 0;\n\t\tpersonalDamage.remove(\"Sotetseg\");\n\t\ttotalDamage.remove(\"Sotetseg\");\n\t}\n\n\tprivate void resetXarpus()\n\t{\n\t\txarpusStartTick \u003d -1;\n\t\txarpusRecoveryTime \u003d 0;\n\t\txarpusAcidTime \u003d 0;\n\t\txarpusPreScreech \u003d 0;\n\t\txarpusPreScreechTotal \u003d 0;\n\t\tpersonalDamage.remove(\"Xarpus\");\n\t\ttotalDamage.remove(\"Xarpus\");\n\t\ttotalHealing.remove(\"Xarpus\");\n\t}\n\n\tprivate void resetVerzik()\n\t{\n\t\tverzikStartTick \u003d -1;\n\t\tverzikP1time \u003d 0;\n\t\tverzikP2time \u003d 0;\n\t\tverzikP1personal \u003d 0;\n\t\tverzikP1total \u003d 0;\n\t\tverzikP2personal \u003d 0;\n\t\tverzikP2total \u003d 0;\n\t\tverzikP2healed \u003d 0;\n\t\tpersonalDamage.clear();\n\t\ttotalDamage.clear();\n\t\ttotalHealing.clear();\n\t}\n\n\tprivate void resetAll()\n\t{\n\t\tresetMaiden();\n\t\tresetBloat();\n\t\tresetNylo();\n\t\tresetSote();\n\t\tresetXarpus();\n\t\tresetVerzik();\n\t}\n\n\tprivate void resetAllInfoBoxes()\n\t{\n\t\tinfoBoxManager.removeInfoBox(maidenInfoBox);\n\t\tinfoBoxManager.removeInfoBox(bloatInfoBox);\n\t\tinfoBoxManager.removeInfoBox(nyloInfoBox);\n\t\tinfoBoxManager.removeInfoBox(soteInfoBox);\n\t\tinfoBoxManager.removeInfoBox(xarpusInfoBox);\n\t\tinfoBoxManager.removeInfoBox(verzikInfoBox);\n\t}\n}\n","filePath":"src\\main\\java\\hsj\\external\\theatreofbloodstats\\TheatreOfBloodStatsPlugin.java"},{"fileName":"TheatreOfBloodStatsTest.java","content":"package hsj.external.theatreofbloodstats;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class TheatreOfBloodStatsTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(TheatreOfBloodStatsPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\hsj\\external\\theatreofbloodstats\\TheatreOfBloodStatsTest.java"}]},{"commit":"18aa1751888fa0068cc2f1664dd39890b446e88b","repository":"https://github.com/Mike-U5/npc-dialogue-replacer.git","internalName":"npc-dialogue-replacer","files":[{"fileName":"CustomDialogStorage.java","content":"package com.npcdialoguereplacement;\n\nimport java.io.File;\nimport java.util.ArrayList;\nimport java.util.Random;\nimport java.util.Scanner;\n\npublic class CustomDialogStorage\n{\n\tprivate static final ArrayList\u003cString\u003e customText \u003d new ArrayList\u003cString\u003e();\n\n\tpublic static void load(final String path)\n\t{\n\t\tcustomText.clear();\n\n\t\tif (path !\u003d null \u0026\u0026 !path.isEmpty()) {\n\t\t\ttry {\n\t\t\t\tfinal Scanner scanner \u003d new Scanner(new File(path));\n\n\t\t\t\twhile (scanner.hasNextLine()) {\n\t\t\t\t\tfinal String line \u003d scanner.nextLine();\n\t\t\t\t\tif (!line.isEmpty() \u0026\u0026 !line.startsWith(\"#\") \u0026\u0026 !line.startsWith(\"//\")) {\n\t\t\t\t\t\tcustomText.add(line);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tscanner.close();\n\t\t\t} catch (Exception e) {\n\t\t\t\tSystem.out.println(\"File not found.\");\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic static String getRandom()\n\t{\n\t\treturn customText.get(new Random().nextInt(customText.size()));\n\t}\n\n\tpublic static boolean hasText()\n\t{\n\t\treturn !customText.isEmpty();\n\t}\n}\n","filePath":"src\\main\\java\\com\\npcdialoguereplacement\\CustomDialogStorage.java"},{"fileName":"NpcDialogueReplacementConfig.java","content":"package com.npcdialoguereplacement;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"npcdialoguereplacement\")\npublic interface NpcDialogueReplacementConfig extends Config\n{\n\t@ConfigItem(keyName \u003d \"uriDialogFilePath\", name \u003d \"Uri dialog file path\", description \u003d \"Path to the txt file that stores lines that Uri can possibly say\")\n\tdefault String uriDialogFilePath()\n\t{\n\t\treturn \"\";\n\t}\n}\n","filePath":"src\\main\\java\\com\\npcdialoguereplacement\\NpcDialogueReplacementConfig.java"},{"fileName":"NpcDialogueReplacementPlugin.java","content":"package com.npcdialoguereplacement;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.events.BeforeRender;\nimport net.runelite.api.events.WidgetLoaded;\nimport net.runelite.api.widgets.ComponentID;\nimport net.runelite.api.widgets.InterfaceID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport org.apache.commons.lang3.StringUtils;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"NPC dialog replacer\",\n\ttags \u003d {\"uri\", \"clues\", \"npc\", \"dialogue\", \"changer\"}\n)\npublic class NpcDialogueReplacementPlugin extends Plugin\n{\n\t@Inject\n\tprivate NpcDialogueReplacementConfig config;\n\t@Inject\n\tprivate Client client;\n\n\tprivate static String activeDialog \u003d null;\n\tprivate static boolean dialogueOpened \u003d false;\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\tCustomDialogStorage.load(this.config.uriDialogFilePath());\n\t}\n\n\t@Subscribe\n\tpublic void onBeforeRender(final BeforeRender event)\n\t{\n\t\tif (dialogueOpened) {\n\t\t\tfinal Widget dialog \u003d this.client.getWidget(ComponentID.DIALOG_NPC_TEXT);\n\n\t\t\tif (dialog !\u003d null \u0026\u0026 !dialog.getText().equals(activeDialog)) {\n\t\t\t\tactiveDialog \u003d dialog.getText();\n\t\t\t\tfinal Widget name \u003d this.client.getWidget(ComponentID.DIALOG_NPC_NAME);\n\n\t\t\t\tif (name !\u003d null) {\n\t\t\t\t\t// Uri - Clue Steps\n\t\t\t\t\tif (name.getText().equals(\"Uri\") \u0026\u0026  !activeDialog.equalsIgnoreCase(\"I do not believe we have any business, Comrade.\") \u0026\u0026 CustomDialogStorage.hasText()) {\n\t\t\t\t\t\tfinal String customText \u003d CustomDialogStorage.getRandom();\n\t\t\t\t\t\tdialog.setLineHeight(getLineHeight(customText));\n\t\t\t\t\t\tdialog.setText(customText);\n\t\t\t\t\t\tactiveDialog \u003d null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdialogueOpened \u003d false;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(final ConfigChanged event)\n\t{\n\t\tif (event.getGroup().equals(\"npcdialoguereplacement\")) {\n\t\t\tif (event.getKey().equals(\"uriDialogFilePath\")) {\n\t\t\t\tCustomDialogStorage.load(event.getNewValue());\n\t\t\t\tdialogueOpened \u003d false;\n\t\t\t\tactiveDialog \u003d null;\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onWidgetLoaded(final WidgetLoaded event)\n\t{\n\t\tif (event.getGroupId() \u003d\u003d InterfaceID.DIALOG_NPC) {\n\t\t\tdialogueOpened \u003d true;\n\t\t}\n\t}\n\n\tprivate int getLineHeight(final String text)\n\t{\n\t\tfinal int count \u003d StringUtils.countMatches(text, \"\u003cbr\u003e\");\n\n\t\tif (count \u003d\u003d 1) {\n\t\t\treturn 28;\n\t\t} else if (count \u003d\u003d 2) {\n\t\t\treturn 20;\n\t\t} else if (count \u003e\u003d 4) {\n\t\t\treturn 14;\n\t\t}\n\n\t\treturn 16;\n\t}\n\n\t@Provides\n\tNpcDialogueReplacementConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(NpcDialogueReplacementConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\npcdialoguereplacement\\NpcDialogueReplacementPlugin.java"},{"fileName":"NpcDialogueReplacementPluginTest.java","content":"package com.npcdialoguereplacement;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class NpcDialogueReplacementPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(NpcDialogueReplacementPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\npcdialoguereplacement\\NpcDialogueReplacementPluginTest.java"}]},{"commit":"57860f7ab196ee6adacda529579a96ede88a933c","repository":"https://github.com/pwatts6060/runelite-plugins.git","internalName":"looting-bag-value","files":[{"fileName":"GeUntradables.java","content":"package com.lootingbag;\n\nimport java.util.Arrays;\nimport java.util.HashSet;\nimport java.util.stream.Collectors;\nimport static net.runelite.api.gameval.ItemID.*;\n\npublic class GeUntradables\n{\n\n\t/**\n\t * All ItemIDs for items that are tradeable but cannot be bought/sold on the Grand Exchange\n\t * Scraped from \u003ca href\u003d\"https://oldschool.runescape.wiki/w/Grand_Exchange/Non-tradeable_items\"/\u003e\n\t */\n\tprivate static final int[] ITEM_IDS \u003d new int[]\n\t{\n\t\tCOINS,\n\n\t\t// Burnt/inedible food\n\t\tBURNTFISH1, BURNTFISH2, BURNTFISH3,\n\t\tBURNTFISH4, BURNTFISH5, BURNT_SWORDFISH,\n\t\tBURNT_LOBSTER, BURNT_SHARK,\n\t\tBURNT_MANTARAY, BURNT_SEATURTLE,\n\t\tBURNT_CAKE, BURNT_STEW,\n\t\tBURNT_CURRY, BURNT_CHICKEN, BURNT_MEAT,\n\t\tBURNT_GNOMEBOWL, BURNT_CRUNCHIES, BURNT_BATTA,\n\t\tBURNT_PIZZA, BURNT_BREAD, BURNT_PIE, BURNT_OOMLIE,\n\t\tBURNT_OOMLIE, TBWT_BURNT_KARAMBWAN, BURNT_SNAIL, BURNT_EEL,\n\t\tBURNT_CAVE_EEL, SWEETCORN_BURNT, TBW_SPIDER_ON_STICK_BURNT, POTATO_BURNT,\n\t\tBOWL_EGG_BURNT, BOWL_ONION_BURNT, BOWL_MUSHROOM_BURNT,\n\t\tSPIT_BURNED_RABBIT_MEAT,\n\t\t_100_JUBBLY_MEAT_BURNED,\n\t\tBURNT_MONKFISH, BURNT_SHRIMP, SPIT_BURNED_BIRD_MEAT, SPIT_BURNED_BEAST_MEAT,\n\t\tHUNTING_RAW_FISH_SPECIAL_BURNT,\n\t\tBURNT_DARK_CRAB, BURNT_ANGLERFISH,\n\t\tRAIDS_FISH_BURNT, RAIDS_BAT_BURNT,\n\t\tRUINED_CHOMPY, ROTTEN_TOMATO, ROTTEN_FOOD,\n\t\tTBW_SPIDER_ON_SHAFT_BURNT, FAVOUR_HERBTEA_RUINED, UGTHANKI_KEBAB,\n\n\t\t// Item Packs\n\t\tPACK_VIAL_WATER,\n\t\tPACK_FEATHER, PACK_FISHING_BAIT,  PACK_AIRRUNE,\n\t\tPACK_WATERRUNE, PACK_EARTHRUNE, PACK_FIRERUNE,\n\t\tPACK_MINDRUNE, PACK_CHAOSRUNE,\n\t\tPACK_OJIBWAY_BIRD_SNARE, PACK_BOX_TRAP, PACK_MAGIC_IMP_BOX,\n\t\tPLATINUM, PACK_PLANT_POT_COMPOST, PACK_SACK,\n\t\tPACK_BASKET,\n\t\tPACK_AIRRUNE_TZHAAR, PACK_WATERRUNE_TZHAAR, PACK_EARTHRUNE_TZHAAR,\n\t\tPACK_FIRERUNE_TZHAAR,\n\n\t\t// Fire Arrows\n\t\tUNLITARROW, LITARROW, IRON_UNLITARROW, IRON_LITARROW,\n\t\tSTEEL_UNLITARROW, STEEL_LITARROW, MITHRIL_UNLITARROW, MITHRIL_LITARROW,\n\t\tADAMANT_UNLITARROW, ADAMANT_LITARROW, RUNE_UNLITARROW,\n\t\tRUNE_LITARROW, DRAGON_UNLITARROW, DRAGON_LITARROW,\n\n\t\t// Satchels\n\t\tTOL_PLAIN_SACK_DUMMY, TOL_GREEN_SACK_DUMMY,\n\t\tTOL_RED_SACK_DUMMY, TOL_BLACK_SACK_DUMMY, TOL_GOLD_SACK_DUMMY, TOL_RUNE_SACK_DUMMY,\n\n\t\t// Books\n\t\tNEWCOMER_MAP, BOOK_OF_ASTROLOGY, FLIER, FLIER_PRIF,\n\t\tROVING_CRYSTAL_BOOK, ROVING_CADARN_BOOK,\n\t\tQIP_SOA_NEWSPAPER2, ARRAVCERTIFICATE_LFT, ARRAVCERTIFICATE_RHT,\n\t\tOBSERVATORY_GLASSBLOWING_BOOK,\n\n\t\t// Cosmetics\n\t\tEASTER18_HANDEGG_LIGHT, EASTER18_HANDEGG_BALANCE, EASTER18_HANDEGG_CHAOS,\n\n\t\t// Quest items\n\t\tPHOENIXKEY2, PHOENIX_CROSSBOW, MISC_KEY,\n\t\tMM_REINITIALISATION_HINT, DAMP_TINDERBOX,\n\t\tRAW_BEEF_UNDEAD, RAW_CHICKEN_UNDEAD, COOKED_CHICKEN_UNDEAD, COOKED_MEAT_UNDEAD,\n\t\tBURGH_RUBBLE_BUCKET_1, BURGH_RUBBLE_BUCKET_2, BURGH_RUBBLE_BUCKET_3,\n\t\tBURGH_GENERALSTORE_CRATE, EMPTY_FISHFOOD_BOX,\n\t\tMDAUGHTER_MUD, MDAUGHTER_ROCK, MDAUGHTER_BROKEN_STICK,\n\t\tPETECANDLESTICK,\n\t\tBOWL_EMPTY_FILLIMAN,\n\n\t\t// Castle wars\n\t\tCASTLEWARS_BANDAGES, CASTLEWARS_TOOLKIT, CASTLEWARS_BARRICADE,\n\t\tCASTLEWARS_EXPLOSIVES_POTION, CASTLEWARS_CLIMBING_ROPE, CASTLEWARS_CATAPULT_ROCK,\n\n\t\t// Trouble Brewing\n\t\tBREW_BLUE_FLOWER, BREW_RED_FLOWER,\n\n\t\t// Misc.\n\t\tOGRE_POTION, OYSTEREMPTY, BUCKET_BAILING, BUCKET_BAILINGFULL,\n\t\tSMASHED_GLASS, ROOFTILE, ROCK,\n\t\tFELINEMEDAL,\n\t\tCRUSHED_GEMSTONE,\n\t\tRAWSWAMPPASTE,\n\t\tGROUND_BAT_BONES,\n\t\tREGICIDE_SULPHAR, REGICIDE_CLOTH, EMPTY_DYE_BOTTLE,\n\t\tVIKING_TANKARD_EMPTY, IRON_SICKLE,\n\t\tCOCONUT_HALF, COCONUT_SHELL,\n\t\tBURGH_UNFINISHED_GUTHIX_BALANCE_1, POH_TEA_LEAVES, PEST_FIELD_RATION,\n\t\tII_ANCHOVY_PASTE,\n\t\tBIRD_NEST_DECENTSEEDS,\n\t\tTEMPOROSS_DAMP_EGG, TOA_LOOT_POO, HW22_TRICK_BANANA,\n\t\tHW22_TRICK_SOCK, HW22_TRICK_EGG, HW22_TRICK_WOOL\n\t};\n\n\tpublic static HashSet\u003cInteger\u003e ItemIds \u003d new HashSet\u003c\u003e(\n\t\tArrays.stream(ITEM_IDS)\n\t\t\t.boxed()\n\t\t\t.collect(Collectors.toList())\n\t);\n}\n","filePath":"src\\main\\java\\com\\lootingbag\\GeUntradables.java"},{"fileName":"LootingBag.java","content":"package com.lootingbag;\n\nimport com.google.common.collect.ImmutableSet;\nimport java.util.Arrays;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Set;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.api.ItemContainer;\nimport net.runelite.api.Varbits;\nimport net.runelite.client.game.ItemManager;\n\n@Slf4j\npublic class LootingBag\n{\n\tprivate static final int LOOTING_BAG_SIZE \u003d 28;\n\n\tprivate static final Set\u003cInteger\u003e FEROX_REGION \u003d ImmutableSet.of(12600, 12344);\n\n\tprivate final ItemManager itemManager;\n\n\tprivate final Client client;\n\n\tprivate final Map\u003cInteger, Integer\u003e items;\n\n\tprivate final LootingBagConfig config;\n\n\t@Getter\n\tprivate boolean isSynced;\n\n\t@Getter\n\tprivate boolean isQuantityOfItemsAccurate \u003d true;\n\n\t@Getter\n\tprivate long valueOfItems \u003d 0;\n\n\tpublic LootingBag(Client client, ItemManager itemManager, LootingBagConfig config)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.itemManager \u003d itemManager;\n\t\tthis.config \u003d config;\n\t\tthis.items \u003d new HashMap\u003c\u003e();\n\t\tthis.isSynced \u003d false;\n\t}\n\n\tpublic void addItem(\n\t\t\tint itemId,\n\t\t\tint quantity) {\n\t\taddItem(itemId, quantity, true);\n\t}\n\n\tpublic void addItem(\n\t\t\tint itemId,\n\t\t\tint quantity,\n\t\t\tboolean isQuantityConfirmed) {\n\n\t\t// Check that we can deposit any item into looting bag\n\t\t// \t\tE.g. We\u0027re in the wilderness\n\t\tif (!canDepositItems()) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Check that the item can go in the looting bag\n\t\t//\t\tE.g. It\u0027s tradeable\n\t\tif (!canItemGoInLootingBag(itemId)) {\n\t\t\tlog.debug(\"Item can not go in looting bag: \" + itemManager.getItemComposition(itemId).getName());\n\t\t\treturn;\n\t\t}\n\n\t\tItemComposition itemComposition \u003d itemManager.getItemComposition(itemId);\n\n\t\t// Check that we have room in the looting bag\n\t\tif (getFreeSlots() \u003d\u003d 0\n\t\t\t\t\u0026\u0026 (!itemComposition.isStackable() || !items.containsKey(itemId))) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!isQuantityConfirmed) {\n\t\t\tisQuantityOfItemsAccurate \u003d false;\n\t\t}\n\n\t\tlog.debug(\"Successfully added item to looting bag: \" + itemComposition.getName() + \"x\" + quantity);\n\t\titems.merge(itemId, quantity, Integer::sum);\n\t\tcalculateValueOfItems();\n\t}\n\n\tpublic int getFreeSlots()\n\t{\n\t\treturn LOOTING_BAG_SIZE -\n\t\t\titems.keySet().stream()\n\t\t\t\t.mapToInt(itemId -\u003e\n\t\t\t\t\titemManager.getItemComposition(itemId).isStackable()\n\t\t\t\t\t\t? 1\n\t\t\t\t\t\t: items.get(itemId)\n\t\t\t\t).sum();\n\t}\n\n\tpublic void syncItems(ItemContainer lootingBagContainer) {\n\t\titems.clear();\n\n\t\t// The looting bag container will be null when it is empty\n\t\tif (lootingBagContainer \u003d\u003d null) {\n\t\t\tisSynced \u003d true;\n\t\t\tcalculateValueOfItems();\n\t\t\treturn;\n\t\t}\n\n\t\titems.putAll(Arrays.stream(lootingBagContainer.getItems())\n\t\t\t.reduce(\n\t\t\t\tnew HashMap\u003c\u003e(),\n\t\t\t\t(map, item) -\u003e {\n\t\t\t\t\tmap.merge(item.getId(), item.getQuantity(), Integer::sum);\n\t\t\t\t\treturn map;\n\t\t\t\t},\n\t\t\t\t(map1, map2) -\u003e {\n\t\t\t\t\tmap1.putAll(map2);\n\t\t\t\t\treturn map1;\n\t\t\t\t}));\n\n\t\tcalculateValueOfItems();\n\t\tisQuantityOfItemsAccurate \u003d true;\n\t\tisSynced \u003d true;\n\t}\n\n\tprivate boolean canItemGoInLootingBag(int itemId) {\n\t\treturn isItemTradeable(itemId)\n\t\t\t|| isItemTradeable(itemManager.getItemComposition(itemId).getLinkedNoteId());\n\t}\n\n\tprivate boolean isItemTradeable(int itemId) {\n\t\tItemComposition itemComposition \u003d itemManager.getItemComposition(itemId);\n\n\t\treturn itemComposition.isTradeable() // GE tradeable items\n\t\t\t|| itemComposition.getName().matches(\"Ensouled [a-z]+ head\")\n\t\t\t|| GeUntradables.ItemIds.contains(itemId);\n\t}\n\n\tprivate boolean canDepositItems() {\n\t\t// Can\u0027t deposit items into looting bag if not in wilderness or Ferox\n\t\treturn client.getVarbitValue(Varbits.IN_WILDERNESS) !\u003d 0\n\t\t\t|| FEROX_REGION.contains(client.getLocalPlayer().getWorldLocation().getRegionID());\n\t}\n\n\tprivate void calculateValueOfItems() {\n\t\tvalueOfItems \u003d items.keySet().stream()\n\t\t\t.mapToLong(itemId -\u003e getPriceOfItem(itemId, items.get(itemId)))\n\t\t\t.sum();\n\t}\n\n\tprivate long getPriceOfItem(int itemId, int quantity) {\n\t\tint itemValue \u003d 0;\n\t\tif (config.alchValue()) {\n\t\t\titemValue \u003d itemManager.getItemComposition(itemId).getHaPrice();\n\t\t} else {\n\t\t\titemValue \u003d itemManager.getItemPrice(itemId);\n\t\t}\n\t\treturn itemValue * (long) quantity;\n\t}\n}\n","filePath":"src\\main\\java\\com\\lootingbag\\LootingBag.java"},{"fileName":"LootingBagConfig.java","content":"package com.lootingbag;\n\nimport static com.lootingbag.LootingBagConfig.CONFIG_GROUP;\nimport java.awt.Color;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(CONFIG_GROUP)\npublic interface LootingBagConfig extends Config\n{\n\tString CONFIG_GROUP \u003d \"lootingbagvalue\";\n\tString priceKey \u003d \"priceType\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"textColor\",\n\t\tname \u003d \"Text color\",\n\t\tdescription \u003d \"Color of the text overlay on looting bag\"\n\t)\n\tdefault Color textColor() {\n\t\treturn Color.WHITE;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"bagValue\",\n\t\tname \u003d \"Bag Value\",\n\t\tdescription \u003d \"Display looting bag value\"\n\t)\n\tdefault boolean bagValue() {\n\t\treturn true;\n\t}\n\t\n\t@ConfigItem(\n\t\tkeyName \u003d \"alchValue\",\n\t\tname \u003d \"High Alchemy Value\",\n\t\tdescription \u003d \"Use high alchemy value to determine bag value\"\n\t)\n\tdefault boolean alchValue() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"freeSlots\",\n\t\tname \u003d \"Free slots\",\n\t\tdescription \u003d \"Display number of free slots in bag\"\n\t)\n\tdefault boolean freeSlots() {\n\t\treturn true;\n\t}\n}\n","filePath":"src\\main\\java\\com\\lootingbag\\LootingBagConfig.java"},{"fileName":"LootingBagOverlay.java","content":"package com.lootingbag;\n\nimport com.google.inject.Inject;\nimport java.awt.Graphics2D;\nimport java.awt.Point;\nimport java.awt.Rectangle;\nimport net.runelite.api.gameval.ItemID;\nimport net.runelite.api.widgets.WidgetItem;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.overlay.WidgetItemOverlay;\nimport net.runelite.client.ui.overlay.components.TextComponent;\n\npublic class LootingBagOverlay extends WidgetItemOverlay\n{\n\tprivate final LootingBagPlugin plugin;\n\tprivate final LootingBagConfig config;\n\n\t@Inject\n\tLootingBagOverlay(LootingBagPlugin plugin, LootingBagConfig config)\n\t{\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t\tshowOnInventory();\n\t}\n\n\t@Override\n\tpublic void renderItemOverlay(Graphics2D graphics, int itemId, WidgetItem widgetItem)\n\t{\n\t\tif (itemId !\u003d ItemID.LOOTING_BAG \u0026\u0026 itemId !\u003d ItemID.LOOTING_BAG_OPEN) {\n\t\t\treturn;\n\t\t}\n\t\tgraphics.setFont(FontManager.getRunescapeSmallFont());\n\t\tif (config.bagValue()) {\n\t\t\trenderText(graphics, widgetItem.getCanvasBounds(), 0, getValueText());\n\t\t}\n\t\tif (config.freeSlots()) {\n\t\t\trenderText(graphics, widgetItem.getCanvasBounds(), -12, getFreeSlotsText());\n\t\t}\n\t}\n\n\tprivate void renderText(Graphics2D graphics, Rectangle bounds, int yOff, String text)\n\t{\n\t\tfinal TextComponent textComponent \u003d new TextComponent();\n\t\ttextComponent.setPosition(new Point(bounds.x - 1, bounds.y + bounds.height - 1 + yOff));\n\t\ttextComponent.setColor(config.textColor());\n\t\ttextComponent.setText(text);\n\t\ttextComponent.render(graphics);\n\t}\n\n\tprivate String getFreeSlotsText()\n\t{\n\t\tLootingBag lootingBag \u003d plugin.getLootingBag();\n\t\tif (!lootingBag.isSynced())\n\t\t{\n\t\t\treturn \"Check\";\n\t\t}\n\n\t\treturn Integer.toString(lootingBag.getFreeSlots());\n\t}\n\n\tprivate String getValueText()\n\t{\n\t\tLootingBag lootingBag \u003d plugin.getLootingBag();\n\t\tif (!lootingBag.isSynced())\n\t\t{\n\t\t\treturn \"Check\";\n\t\t}\n\n\t\tlong lootingBagValue \u003d lootingBag.getValueOfItems();\n\t\tString text \u003d lootingBag.isQuantityOfItemsAccurate() ? \"\" : \"\u003e\";\n\t\tif (lootingBagValue \u003e\u003d 10_000_000)\n\t\t{\n\t\t\treturn text + lootingBagValue / 1_000_000 + \"M\";\n\t\t}\n\t\tif (lootingBagValue \u003e\u003d 100_000)\n\t\t{\n\t\t\treturn text + lootingBagValue / 1000 + \"k\";\n\t\t}\n\t\treturn text + lootingBagValue;\n\t}\n}\n","filePath":"src\\main\\java\\com\\lootingbag\\LootingBagOverlay.java"},{"fileName":"LootingBagPlugin.java","content":"package com.lootingbag;\n\nimport com.google.common.collect.ImmutableMap;\nimport com.google.gson.Gson;\nimport com.google.inject.Provides;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.OptionalInt;\nimport java.util.Set;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\nimport java.util.stream.Collectors;\nimport java.util.stream.IntStream;\nimport javax.inject.Inject;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.Item;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.api.ItemContainer;\nimport net.runelite.api.MenuAction;\nimport net.runelite.api.Player;\nimport net.runelite.api.ScriptEvent;\nimport net.runelite.api.ScriptID;\nimport net.runelite.api.VarClientInt;\nimport net.runelite.api.VarClientStr;\nimport net.runelite.api.WorldView;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.ItemContainerChanged;\nimport net.runelite.api.events.ItemDespawned;\nimport net.runelite.api.events.MenuOptionClicked;\nimport net.runelite.api.events.PostClientTick;\nimport net.runelite.api.events.ProjectileMoved;\nimport net.runelite.api.events.ScriptPreFired;\nimport net.runelite.api.events.VarClientIntChanged;\nimport net.runelite.api.events.WidgetClosed;\nimport net.runelite.api.events.WidgetLoaded;\nimport static net.runelite.api.gameval.InterfaceID.WILDERNESS_LOOTINGBAG;\nimport net.runelite.api.gameval.InventoryID;\nimport net.runelite.api.gameval.ItemID;\nimport net.runelite.api.gameval.VarClientID;\nimport net.runelite.api.widgets.ComponentID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Looting Bag\"\n)\npublic class LootingBagPlugin extends Plugin\n{\n\tprivate static final int LOOTING_BAG_SUPPLIES_SETTING_VARBIT_ID \u003d 15310;\n\n\tprivate static final int TELE_GRAB_PROJECTILE_ID \u003d 143;\n\n\tprivate static final Pattern WILDY_DISPENSER_REGEX \u003d Pattern.compile(\"You have been awarded \u003c[A-Za-z0-9\u003d\\\\/]+\u003e([\\\\d]+) x ([ a-zA-Z(4)]+)\u003c[A-Za-z0-9\u003d\\\\/]+\u003e and \u003c[A-Za-z0-9\u003d\\\\/]+\u003e([\\\\d]+) x ([ a-zA-Z]+)\u003c[A-Za-z0-9\u003d\\\\/]+\u003e from the Agility dispenser.\");\n\tprivate static final Pattern WILDY_DISPENSER_EXTRA_REGEX \u003d Pattern.compile(\"You have been awarded \u003c[A-Za-z0-9\u003d\\\\/]+\u003e([\\\\d]+) x ([ a-zA-Z(4)]+)\u003c[A-Za-z0-9\u003d\\\\/]+\u003e and \u003c[A-Za-z0-9\u003d\\\\/]+\u003e([\\\\d]+) x ([ a-zA-Z]+)\u003c[A-Za-z0-9\u003d\\\\/]+\u003e, and an extra \u003c[A-Za-z0-9\u003d\\\\/]+\u003e[ a-zA-Z(4)]+\u003c[A-Za-z0-9\u003d\\\\/]+\u003e from the Agility dispenser.\");\n\n\tprivate static final Map\u003cString, Integer\u003e AmountTextToInt \u003d ImmutableMap.of(\n\t\t\"One\", 1,\n\t\t\"Two\", 2,\n\t\t\"Both\", 2,\n\t\t\"Five\", 5\n\t);\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate LootingBagOverlay overlay;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ItemManager itemManager;\n\n\t@Inject\n\tprivate LootingBagConfig lootingBagConfig;\n\n\t@Getter\n\tprivate LootingBag lootingBag;\n\n\t@Getter\n\tprivate WildernessAgilityItems wildyItems;\n\n\t@Inject\n\tprivate Gson gson;\n\n\tprivate PickupAction lastPickUpAction;\n\tprivate int telegrabPickUpCycle \u003d -1;\n\tprivate WorldPoint telegrabEndTile;\n\n\tprivate int lastItemIdUsedOnLootingBag;\n\n\tprivate int tickBagViewed \u003d -1;\n\n\t/**\n\t * Used to keep track of whether the deposit X input is open.\n\t */\n\tprivate boolean depositingX;\n\n\t/**\n\t * The last amount entered into the deposit X interface\n\t */\n\tprivate int lastDepositedXAmount;\n\n\tprivate int lastInputTypeValue;\n\n\tprivate Item[] lastInventoryItems;\n\n\tprivate ArrayList\u003cPickupAction\u003e possibleSuppliesPickupActions;\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\tlootingBag \u003d new LootingBag(client, itemManager, lootingBagConfig);\n\t\twildyItems \u003d new WildernessAgilityItems(itemManager);\n\t\toverlayManager.add(overlay);\n\t\tpossibleSuppliesPickupActions \u003d new ArrayList\u003c\u003e();\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\toverlayManager.remove(overlay);\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick gameTick)\n\t{\n\t\tpossibleSuppliesPickupActions.removeIf(action -\u003e {\n\t\t\tif (action.getTicksSincePickup() \u003e\u003d 1) {\n\t\t\t\t// Whatever we picked up went into our looting bag\n\t\t\t\tlog.debug(\"Item was not supply and got added to looting bag: \" + getItemName(action.getItemId()));\n\t\t\t\tlootingBag.addItem(\n\t\t\t\t\taction.getItemId(),\n\t\t\t\t\taction.getQuantity());\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\taction.incrementTicksSincePickup();\n\t\t\treturn false;\n\t\t});\n\t}\n\n\t@Subscribe\n\tpublic void onVarClientIntChanged(VarClientIntChanged event) {\n\t\tif (event.getIndex() \u003d\u003d VarClientInt.INPUT_TYPE) {\n\t\t\tint value \u003d client.getVarcIntValue(VarClientInt.INPUT_TYPE);\n\t\t\tString text \u003d client.getVarcStrValue(VarClientStr.INPUT_TEXT);\n\n\t\t\t// Number input closed\n\t\t\tif (value \u003d\u003d 0) {\n\t\t\t\t// Make sure we were depositing X\n\t\t\t\tif (depositingX \u0026\u0026 !text.equals(\"\")) {\n\t\t\t\t\tlastDepositedXAmount \u003d Integer.parseInt(text);\n\t\t\t\t}\n\n\t\t\t\t// If the number input was previously open but is now closed,\n\t\t\t\t//\t\tWe are no longer depositing\n\t\t\t\tif (lastInputTypeValue \u003d\u003d 7) {\n\t\t\t\t\tdepositingX \u003d false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlastInputTypeValue \u003d value;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onWidgetLoaded(WidgetLoaded event)\n\t{\n\t\tif (event.getGroupId() \u003d\u003d WILDERNESS_LOOTINGBAG)\n\t\t{\n\t\t\ttickBagViewed \u003d client.getTickCount();\n\t\t}\n\t}\n\n\n\t@Subscribe\n\tpublic void onPostClientTick(PostClientTick event)\n\t{\n\t\t/*\n\t\tThe bag can be opened and closed in the same game tick before it fully loaded.\n\t\tThis check only syncs items if the bag is open long enough to load items.\n\t\tIf it doesn\u0027t load the items the widget closed will be detected and this won\u0027t run.\n\t\t */\n\t\tif (client.getTickCount() \u003d\u003d tickBagViewed) {\n\t\t\tItemContainer lootingBagContainer \u003d client.getItemContainer(InventoryID.LOOTING_BAG);\n\t\t\tlootingBag.syncItems(lootingBagContainer);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onWidgetClosed(WidgetClosed event)\n\t{\n\t\tif (event.getGroupId() \u003d\u003d WILDERNESS_LOOTINGBAG)\n\t\t{\n\t\t\ttickBagViewed \u003d -1;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onItemContainerChanged(ItemContainerChanged event) {\n\t\tif (event.getContainerId() \u003d\u003d InventoryID.INV) {\n\t\t\thandleInventoryUpdated(event.getItemContainer());\n\t\t}\n\n\t\tif (event.getContainerId() \u003d\u003d InventoryID.LOOTING_BAG) {\n\t\t\tlootingBag.syncItems(event.getItemContainer());\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOptionClicked(MenuOptionClicked event) {\n\t\tWidget widget \u003d event.getWidget();\n\n\t\t// Select amount to deposit in looting bag menu\n\t\tif (event.getMenuAction() \u003d\u003d MenuAction.WIDGET_CONTINUE\n\t\t\t\t\u0026\u0026 widget !\u003d null\n\t\t\t\t\u0026\u0026 widget.getParentId() \u003d\u003d ComponentID.DIALOG_OPTION_OPTIONS\n\t\t\t\t\u0026\u0026 depositingX) {\n\t\t\thandleAmountToDepositSelection(widget.getText());\n\t\t}\n\n\t\t// Use an item on another item\n\t\tif (event.getMenuAction() \u003d\u003d MenuAction.WIDGET_TARGET_ON_WIDGET\n\t\t\t\t\u0026\u0026 event.getMenuOption().equals(\"Use\")) {\n\t\t\tWidget selectedWidget \u003d client.getSelectedWidget();\n\t\t\tif (selectedWidget \u003d\u003d null)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlog.debug(\"Using item \" + itemManager.getItemComposition(selectedWidget.getItemId()).getName()\n\t\t\t\t+ \" on item \" + itemManager.getItemComposition(event.getItemId()).getName());\n\t\t\thandleItemUsedOnItem(selectedWidget.getItemId(), event.getItemId());\n\t\t\treturn;\n\t\t}\n\n\t\t// Telegrab item\n\t\tboolean isTelegrab \u003d false;\n\t\tWorldView wv \u003d client.getWorldView(event.getMenuEntry().getWorldViewId());\n\t\tif (event.getMenuAction() \u003d\u003d MenuAction.WIDGET_TARGET_ON_GROUND_ITEM ) {\n\t\t\tList\u003cString\u003e widgetGroundItem \u003d Arrays.asList(event.getMenuTarget().split(\" -\u003e \"));\n\t\t\tisTelegrab \u003d widgetGroundItem.get(0).contains(\"Telekinetic Grab\");\n\t\t\t// get end tile based click, telegrab check in projectileMoved\n\t\t\ttelegrabEndTile \u003d WorldPoint.fromScene(wv, event.getParam0(), event.getParam1(), wv.getPlane());\n\t\t}\n\n\t\tboolean isTakeItemOffGround \u003d event.getMenuAction() \u003d\u003d MenuAction.GROUND_ITEM_THIRD_OPTION\n\t\t\t\t\u0026\u0026 event.getMenuOption().equals(\"Take\");\n\n\t\t// Take an item off the ground, or telegrab\n\t\tif (isTakeItemOffGround || isTelegrab) {\n\t\t\tWorldPoint point \u003d WorldPoint.fromScene(wv, event.getParam0(), event.getParam1(), wv.getPlane());\n\t\t\tlastPickUpAction \u003d new PickupAction(event.getId(), point);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onProjectileMoved(ProjectileMoved event) {\n\t\tPlayer player \u003d client.getLocalPlayer();\n\t\tif (player \u003d\u003d null) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.getProjectile().getId() !\u003d TELE_GRAB_PROJECTILE_ID || event.getProjectile() \u003d\u003d null) {\n\t\t\treturn;\n\t\t}\n\n\t\tWorldPoint playerWorldPoint \u003d client.getLocalPlayer().getWorldLocation();\n\t\tWorldPoint telegrabWorldPoint \u003d event.getProjectile().getSourcePoint();\n\n\t\t// not player\u0027s telegrab (telegrab start tile can be off by 5 if user is running/dragged around corners from what I can tell)\n\t\tif (telegrabWorldPoint.distanceTo(playerWorldPoint) \u003e 5) {\n\t\t\treturn;\n\t\t}\n\n\t\ttelegrabPickUpCycle \u003d event.getProjectile().getEndCycle();\n\t}\n\n\t@Subscribe\n\tpublic void onItemDespawned(ItemDespawned event) {\n\t\t// Check if player has open looting bag in inventory\n\t\tItemContainer inventory \u003d client.getItemContainer(InventoryID.INV);\n\t\tif (inventory \u003d\u003d null || !inventory.contains(ItemID.LOOTING_BAG_OPEN)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Check that this event matches the last pickup action\n\t\tif (lastPickUpAction \u003d\u003d null || !lastPickUpAction.matchesItemDespawnEvent(event)) {\n\t\t\treturn;\n\t\t}\n\n\t\tWorldPoint playerLocation \u003d client.getLocalPlayer().getWorldLocation();\n\t\tWorldPoint groundItemLocation \u003d event.getTile().getWorldLocation();\n\n\t\t// Check that the item despawned on the same tile the player is on\n\t\t// Check that the item despawned on the same tile of telegrab target and same cycle telegrab 1ends\n\t\tboolean playerPickUp \u003d groundItemLocation.equals(playerLocation);\n\t\tboolean telegrabOnItemTile \u003d groundItemLocation.equals(telegrabEndTile);\n\t\t// can be off by one tick depending on user running/dragged\n\t\tboolean telegrabEndsOnCycle \u003d Math.abs(telegrabPickUpCycle - client.getGameCycle()) \u003c\u003d 1;\n\t\tboolean telegrabPickUp \u003d telegrabOnItemTile \u0026\u0026 telegrabEndsOnCycle;\n\n\t\tif (!(playerPickUp || telegrabPickUp)) {\n\t\t\treturn;\n\t\t}\n\n\t\tint itemId \u003d event.getItem().getId();\n\t\tint quantity \u003d event.getItem().getQuantity();\n\t\tItemComposition itemComposition \u003d itemManager.getItemComposition(itemId);\n\n\t\t// This might be a \"supply\"\n\t\tif (doSuppliesGoIntoInventory() \u0026\u0026 !itemComposition.isStackable()) {\n\t\t\tlog.debug(\"Possibly picked up a supply: \" + itemComposition.getName());\n\t\t\tlastPickUpAction.setQuantity(quantity);\n\t\t\tpossibleSuppliesPickupActions.add(lastPickUpAction);\n\t\t\treturn;\n\t\t}\n\n\t\t// We\u0027ve picked up an item into our looting bag!\n\t\tlastPickUpAction \u003d null;\n\t\tboolean isQuantityConfirmed \u003d quantity \u003c 65535;\n\t\tlootingBag.addItem(\n\t\t\tevent.getItem().getId(),\n\t\t\tquantity,\n\t\t\tisQuantityConfirmed\n\t\t);\n\t}\n\n\t@Subscribe\n\tvoid onChatMessage(final ChatMessage event)\n\t{\n\t\tfinal String message \u003d event.getMessage();\n\t\tfinal ChatMessageType type \u003d event.getType();\n\t\tif (type \u003d\u003d ChatMessageType.GAMEMESSAGE)\n\t\t{\n\t\t\tMatcher matcher \u003d WILDY_DISPENSER_REGEX.matcher(message);\n\t\t\tMatcher extra_matcher \u003d WILDY_DISPENSER_EXTRA_REGEX.matcher(message);\n\t\t\tif (matcher.matches()) {\n\t\t\t\t// Used wilderness agility dispenser with full inventory\n\t\t\t\twildyItems.setupWildernessItemsIfEmpty();\n\t\t\t\tint quantity \u003d Integer.parseInt(matcher.group(1));\n\t\t\t\tString item \u003d matcher.group(2);\n\t\t\t\tint quantity2 \u003d Integer.parseInt(matcher.group(3));\n\t\t\t\tString item2 \u003d matcher.group(4);\n\t\t\t\taddWildernessItems(quantity, item, quantity2, item2);\n\t\t\t} else if (extra_matcher.matches()) {\n\t\t\t\t// Used wilderness agility dispenser with extra space for spare supply\n\t\t\t\twildyItems.setupWildernessItemsIfEmpty();\n\t\t\t\tint quantity \u003d Integer.parseInt(extra_matcher.group(1));\n\t\t\t\tString item \u003d extra_matcher.group(2);\n\t\t\t\tint quantity2 \u003d Integer.parseInt(extra_matcher.group(3));\n\t\t\t\tString item2 \u003d extra_matcher.group(4);\n\t\t\t\taddWildernessItems(quantity, item, quantity2, item2);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void addWildernessItems(int quantity, String itemName, int quantity2, String itemName2) {\n\t\t// Check if player has open looting bag in inventory\n\t\tItemContainer inventory \u003d client.getItemContainer(InventoryID.INV);\n\t\tif (inventory \u003d\u003d null || !inventory.contains(ItemID.LOOTING_BAG_OPEN)) {\n\t\t\treturn;\n\t\t}\n\n\t\tint itemId \u003d wildyItems.nameToItemId(itemName);\n\t\tint itemId2 \u003d wildyItems.nameToItemId(itemName2);\n\n\t\tlootingBag.addItem(itemId, quantity);\n\t\tlootingBag.addItem(itemId2, quantity2);\n\t}\n\n\tprivate void handleInventoryUpdated(ItemContainer inventory) {\n\t\t// We\u0027ve deposited X\n\t\tif (lastDepositedXAmount \u003e 0) {\n\t\t\tint numAddedToInventory \u003d getNumberOfItemsAddedToInventory(\n\t\t\t\tinventory,\n\t\t\t\tlastItemIdUsedOnLootingBag\n\t\t\t);\n\n\t\t\t// The amount of the item we expected got removed from the inventory\n\t\t\tif (numAddedToInventory \u003d\u003d -lastDepositedXAmount) {\n\t\t\t\tlootingBag.addItem(lastItemIdUsedOnLootingBag, lastDepositedXAmount);\n\t\t\t\tlastDepositedXAmount \u003d 0;\n\t\t\t\tdepositingX \u003d false;\n\t\t\t}\n\t\t}\n\n\n\n\t\tWorldPoint playerLocation \u003d client.getLocalPlayer().getWorldLocation();\n\t\tif (doSuppliesGoIntoInventory()) {\n\t\t\tOptionalInt matchingActionIndex \u003d IntStream.range(0, possibleSuppliesPickupActions.size())\n\t\t\t\t.filter(index -\u003e {\n\t\t\t\t\tPickupAction action \u003d possibleSuppliesPickupActions.get(index);\n\t\t\t\t\tif (!action.getWorldPoint().equals(playerLocation)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tint numAddedToInventory \u003d getNumberOfItemsAddedToInventory(\n\t\t\t\t\t\tinventory,\n\t\t\t\t\t\taction.getItemId()\n\t\t\t\t\t);\n\n\t\t\t\t\tif (numAddedToInventory \u003e 0) {\n\t\t\t\t\t\tlog.debug(numAddedToInventory + \" \" + getItemName(action.getItemId()) + \" got added to inventory\");\n\t\t\t\t\t}\n\n\t\t\t\t\t// We picked up a supply, and it didn\u0027t go into the looting bag\n\t\t\t\t\tif (numAddedToInventory \u003d\u003d 1) {\n\t\t\t\t\t\tlog.debug(\"Supply got added to inventory: \" + getItemName(action.getItemId()));\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t})\n\t\t\t\t.findFirst();\n\n\t\t\tif (matchingActionIndex.isPresent())\n\t\t\t{\n\t\t\t\tList\u003cPickupAction\u003e subListToRemove \u003d possibleSuppliesPickupActions.subList(0, matchingActionIndex.getAsInt() + 1);\n\t\t\t\tlog.debug(\"Clearing the following pickup actions: \" + gson.toJson(subListToRemove.stream().map(action -\u003e getItemName(action.getItemId())).collect(Collectors.toList())));\n\t\t\t\tsubListToRemove.clear();\n\t\t\t}\n\t\t}\n\n\t\tlastInventoryItems \u003d inventory.getItems();\n\t}\n\n\tprivate int getNumberOfItemsAddedToInventory(ItemContainer inventory, int itemId) {\n\t\tint lastCount \u003d Arrays.stream(lastInventoryItems)\n\t\t\t.filter(item -\u003e item.getId() \u003d\u003d itemId)\n\t\t\t.mapToInt(Item::getQuantity)\n\t\t\t.sum();\n\t\tint newCount \u003d inventory.count(itemId);\n\t\treturn newCount - lastCount;\n\t}\n\n\tprivate void handleItemUsedOnItem(int itemId1, int itemId2) {\n\t\tif (!isLootingBag(itemId1) \u0026\u0026 !isLootingBag(itemId2)) {\n\t\t\treturn;\n\t\t}\n\n\t\tint itemId \u003d isLootingBag(itemId1)\n\t\t\t? itemId2\n\t\t\t: itemId1;\n\n\t\tItemContainer inventory \u003d client.getItemContainer(InventoryID.INV);\n\t\tif (inventory \u003d\u003d null) {\n\t\t\tlog.error(\"Could not get inventory ItemContainer when using item on looting bag.\");\n\t\t\treturn;\n\t\t}\n\n\t\tint count \u003d inventory.count(itemId);\n\t\tif (count \u003d\u003d 1)\n\t\t{\n\t\t\tlootingBag.addItem(itemId, 1);\n\t\t\treturn;\n\t\t}\n\n\t\tlastItemIdUsedOnLootingBag \u003d itemId;\n\t\tlastDepositedXAmount \u003d count;\n\t}\n\n\tprivate void handleAmountToDepositSelection(String amountText) {\n\t\tif (AmountTextToInt.containsKey(amountText)) {\n\t\t\tint amount \u003d AmountTextToInt.get(amountText);\n\t\t\tlootingBag.addItem(lastItemIdUsedOnLootingBag, amount);\n\t\t\treturn;\n\t\t}\n\n\t\tif (amountText.equals(\"All\"))\n\t\t{\n\t\t\tItemContainer inventory \u003d client.getItemContainer(InventoryID.INV);\n\t\t\tif (inventory \u003d\u003d null) {\n\t\t\t\tlog.error(\"Could not get inventory ItemContainer when selected put \u0027All\u0027 into looting bag.\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tint amount \u003d inventory.count(lastItemIdUsedOnLootingBag);\n\t\t\tlootingBag.addItem(lastItemIdUsedOnLootingBag, amount);\n\t\t\treturn;\n\t\t}\n\n\t\tif (amountText.equals(\"X\")) {\n\t\t\tdepositingX \u003d true;\n\t\t\treturn;\n\t\t}\n\n\t\tlog.error(\"Unknown item amount \u0027{}\u0027 selected when depositing to looting bag.\", amountText);\n\t}\n\n\t@Provides\n\tLootingBagConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(LootingBagConfig.class);\n\t}\n\n\tprivate String getItemName(int itemId) {\n\t\treturn itemManager.getItemComposition(itemId).getName();\n\t}\n\n\tprivate boolean doSuppliesGoIntoInventory() {\n\t\treturn client.getVarbitValue(LOOTING_BAG_SUPPLIES_SETTING_VARBIT_ID) \u003d\u003d 1;\n\t}\n\n\tprivate boolean isLootingBag(int itemId)\n\t{\n\t\treturn itemId \u003d\u003d ItemID.LOOTING_BAG\n\t\t\t|| itemId \u003d\u003d ItemID.LOOTING_BAG_OPEN;\n\t}\n}\n","filePath":"src\\main\\java\\com\\lootingbag\\LootingBagPlugin.java"},{"fileName":"PickupAction.java","content":"package com.lootingbag;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport lombok.NonNull;\nimport lombok.Setter;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.ItemDespawned;\n\n@AllArgsConstructor\npublic class PickupAction\n{\n\t@Getter\n\tprivate int itemId;\n\n\t@NonNull\n\t@Getter\n\tprivate WorldPoint worldPoint;\n\n\t@Getter\n\tprivate int ticksSincePickup;\n\n\t@Getter\n\t@Setter\n\tprivate int quantity;\n\n\tpublic PickupAction(int itemId, @NonNull WorldPoint worldPoint) {\n\t\tthis.itemId \u003d itemId;\n\t\tthis.worldPoint \u003d worldPoint;\n\t}\n\n\tpublic void incrementTicksSincePickup() {\n\t\tticksSincePickup++;\n\t}\n\n\tpublic boolean matchesItemDespawnEvent(ItemDespawned event) {\n\t\treturn event.getTile().getWorldLocation().equals(worldPoint)\n\t\t\t\u0026\u0026 event.getItem().getId() \u003d\u003d itemId;\n\t}\n}\n","filePath":"src\\main\\java\\com\\lootingbag\\PickupAction.java"},{"fileName":"WildernessAgilityItems.java","content":"package com.lootingbag;\n\nimport com.google.common.collect.ImmutableSet;\nimport net.runelite.client.game.ItemManager;\n\nimport java.util.HashMap;\nimport static net.runelite.api.ItemID.*;\n\npublic class WildernessAgilityItems {\n\n    private final ItemManager itemManager;\n    private final HashMap\u003cString, Integer\u003e nameToItemID \u003d new HashMap\u003c\u003e();\n\n    public WildernessAgilityItems(ItemManager itemManager)\n    {\n        this.itemManager \u003d itemManager;\n    }\n\n    // Items from https://oldschool.runescape.wiki/w/Agility_dispenser\n    static final ImmutableSet\u003cInteger\u003e ITEM_IDS \u003d ImmutableSet.of(\n            // All Laps\n            BLIGHTED_ANGLERFISH, BLIGHTED_MANTA_RAY, BLIGHTED_KARAMBWAN, BLIGHTED_SUPER_RESTORE4,\n            MITHRIL_PLATESKIRT, MITHRIL_PLATELEGS, ADAMANT_PLATEBODY, RUNE_MED_HELM, ADAMANT_FULL_HELM, ADAMANT_PLATELEGS,\n\n            // Laps 1-15\n            STEEL_PLATEBODY,\n\n            // Lap 1-30\n            MITHRIL_CHAINBODY,\n\n            // Lap 16-60+\n            RUNE_CHAINBODY, RUNE_KITESHIELD\n    );\n\n    public Integer nameToItemId(String name) {\n        // All wildy agility items noted so get noted version\n        return itemManager.getItemComposition(nameToItemID.get(name)).getLinkedNoteId();\n    }\n\n    public void setupWildernessItemsIfEmpty() {\n        if (nameToItemID.isEmpty()) {\n            for (Integer itemID : ITEM_IDS) {\n                nameToItemID.put(itemManager.getItemComposition(itemID).getName(), itemID);\n            }\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\lootingbag\\WildernessAgilityItems.java"},{"fileName":"LootingBagPluginTest.java","content":"package com.lootingbag;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class LootingBagPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(LootingBagPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\lootingbag\\LootingBagPluginTest.java"}]},{"commit":"7084191592c89454cde1b558c604c7c5283ab92f","repository":"https://github.com/PlayerCoder1/translation-plugin.git","internalName":"translation-plugin","files":[{"fileName":"TranslationPanel.java","content":"package com.PlayerCoder1;\n\nimport net.runelite.client.ui.PluginPanel;\n\nimport javax.swing.*;\nimport javax.swing.border.EmptyBorder;\nimport java.awt.*;\n\npublic class TranslationPanel extends PluginPanel {\n    private final TranslationPlugin plugin;\n    private final DefaultListModel\u003cString\u003e listModel \u003d new DefaultListModel\u003c\u003e();\n    private final JComboBox\u003cString\u003e languageComboBox;\n\n    public TranslationPanel(TranslationPlugin plugin) {\n        super();\n        this.plugin \u003d plugin;\n\n        setLayout(new BorderLayout());\n        setBackground(new Color(30, 30, 30));\n\n\n        languageComboBox \u003d new JComboBox\u003c\u003e(new String[]{\"ES\", \"FR\", \"IT\", \"NL\"});\n        languageComboBox.addActionListener(e -\u003e {\n\n            String selectedLanguage \u003d (String) languageComboBox.getSelectedItem();\n            plugin.setTargetLanguage(selectedLanguage);\n        });\n\n        JPanel topPanel \u003d new JPanel(new FlowLayout(FlowLayout.LEFT));\n        topPanel.setBackground(new Color(30, 30, 30));\n        topPanel.add(new JLabel(\"Target Language: \"));\n        topPanel.add(languageComboBox);\n\n        add(topPanel, BorderLayout.NORTH);\n\n        JList\u003cString\u003e messageList \u003d new JList\u003c\u003e(listModel);\n        messageList.setBackground(new Color(30, 30, 30));\n        messageList.setForeground(Color.WHITE);\n        messageList.setFont(new Font(\"Arial\", Font.PLAIN, 12));\n\n        messageList.setCellRenderer(new DefaultListCellRenderer() {\n            @Override\n            public Component getListCellRendererComponent(JList\u003c?\u003e list, Object value, int index, boolean isSelected, boolean cellHasFocus) {\n                JLabel label \u003d (JLabel) super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);\n                label.setBorder(new EmptyBorder(10, 10, 10, 10));\n                return label;\n            }\n        });\n\n        JScrollPane scrollPane \u003d new JScrollPane(messageList);\n        scrollPane.setBorder(null);\n        scrollPane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_ALWAYS);\n\n        add(scrollPane, BorderLayout.CENTER);\n    }\n\n    public void updateMessages() {\n        SwingUtilities.invokeLater(() -\u003e {\n            listModel.clear();\n            for (String message : plugin.getLastMessages()) {\n                listModel.addElement(message);\n            }\n        });\n    }\n\n    @Override\n    public Dimension getPreferredSize() {\n        return new Dimension(100, 500);\n    }\n}\n","filePath":"src\\main\\java\\com\\PlayerCoder1\\TranslationPanel.java"},{"fileName":"TranslationPlugin.java","content":"package com.PlayerCoder1;\n\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.util.ImageUtil;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport okhttp3.OkHttpClient;\nimport okhttp3.Request;\nimport okhttp3.Response;\nimport okhttp3.ResponseBody;\nimport org.json.JSONObject;\n\nimport javax.inject.Inject;\nimport javax.swing.*;\nimport java.awt.image.BufferedImage;\nimport java.io.IOException;\nimport java.net.URLEncoder;\nimport java.nio.charset.StandardCharsets;\nimport java.util.LinkedList;\nimport java.util.List;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\n@PluginDescriptor(\n\t\tname \u003d \"Translation Plugin\",\n\t\tdescription \u003d \"Translates everything in the chatbox\",\n\t\ttags \u003d {\"Translation\", \"Language\"}\n)\npublic class TranslationPlugin extends Plugin {\n\tprivate static final int MAX_MESSAGES \u003d 13;\n\n\tprivate final LinkedList\u003cString\u003e lastMessages \u003d new LinkedList\u003c\u003e();\n\tprivate ExecutorService executorService;\n\tprivate TranslationPanel panel;\n\tprivate NavigationButton navButton;\n\tprivate String targetLanguage \u003d \"ES\";\n\n\t@Inject\n\tprivate OkHttpClient client;\n\n\t@Inject\n\tprivate ClientToolbar clientToolbar;\n\n\t@Override\n\tprotected void startUp() {\n\t\texecutorService \u003d Executors.newFixedThreadPool(10);\n\n\t\tpanel \u003d new TranslationPanel(this);\n\t\tBufferedImage icon \u003d ImageUtil.loadImageResource(TranslationPlugin.class, \"panel_icon.png\");\n\t\tnavButton \u003d NavigationButton.builder()\n\t\t\t\t.tooltip(\"Translation\")\n\t\t\t\t.icon(icon)\n\t\t\t\t.priority(5)\n\t\t\t\t.panel(panel)\n\t\t\t\t.build();\n\t\tclientToolbar.addNavigation(navButton);\n\t}\n\n\t@Override\n\tprotected void shutDown() {\n\t\texecutorService.shutdown();\n\t\tclientToolbar.removeNavigation(navButton);\n\t}\n\n\tpublic static class ApiLimitExceededException extends Exception {\n\t\tpublic ApiLimitExceededException(String message) {\n\t\t\tsuper(message);\n\t\t}\n\t}\n\n\tpublic List\u003cString\u003e getLastMessages() {\n\t\treturn lastMessages;\n\t}\n\n\tpublic void setTargetLanguage(String targetLanguage) {\n\t\tthis.targetLanguage \u003d targetLanguage;\n\t}\n\n\tpublic String getTargetLanguage() {\n\t\treturn targetLanguage;\n\t}\n\n\tpublic String translateText(String originalText) throws IOException, ApiLimitExceededException {\n\t\tString encodedText \u003d URLEncoder.encode(originalText, StandardCharsets.UTF_8);\n\t\tString url \u003d \"https://api.mymemory.translated.net/get?q\u003d\" + encodedText + \"\u0026langpair\u003den|\" + targetLanguage;\n\n\t\tRequest request \u003d new Request.Builder()\n\t\t\t\t.url(url)\n\t\t\t\t.build();\n\n\t\ttry (Response response \u003d client.newCall(request).execute()) {\n\t\t\tif (!response.isSuccessful()) {\n\t\t\t\tif (response.code() \u003d\u003d 429) {\n\t\t\t\t\tthrow new ApiLimitExceededException(\"API usage limit exceeded\");\n\t\t\t\t}\n\t\t\t\tthrow new IOException(\"Unexpected code \" + response);\n\t\t\t}\n\n\t\t\tResponseBody responseBody \u003d response.body();\n\t\t\tif (responseBody !\u003d null) {\n\t\t\t\tJSONObject jsonResponse \u003d new JSONObject(responseBody.string());\n\t\t\t\treturn jsonResponse.getJSONObject(\"responseData\").getString(\"translatedText\");\n\t\t\t} else {\n\t\t\t\tthrow new IOException(\"Response body is null\");\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage chatMessage) {\n\t\tString originalMessage \u003d chatMessage.getMessage();\n\t\tString playerName \u003d chatMessage.getName();\n\n\t\texecutorService.submit(() -\u003e {\n\t\t\ttry {\n\t\t\t\tString translatedMessage \u003d translateText(originalMessage);\n\n\t\t\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\t\t\tlastMessages.addFirst(playerName + \": \" + translatedMessage);\n\t\t\t\t\twhile (lastMessages.size() \u003e MAX_MESSAGES) {\n\t\t\t\t\t\tlastMessages.removeLast();\n\t\t\t\t\t}\n\n\t\t\t\t\tpanel.updateMessages();\n\t\t\t\t});\n\t\t\t} catch (ApiLimitExceededException e) {\n\t\t\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\t\t\tJOptionPane.showMessageDialog(null, \"You have reached the 5000 words limit for today. Please wait 24 hours to use the plugin again.\", \"Error\", JOptionPane.ERROR_MESSAGE);\n\t\t\t\t\tshutDown();\n\t\t\t\t});\n\t\t\t} catch (IOException e) {\n\t\t\t\te.printStackTrace();\n\t\t\t}\n\t\t});\n\t}\n}\n","filePath":"src\\main\\java\\com\\PlayerCoder1\\TranslationPlugin.java"},{"fileName":"ExamplePluginTest.java","content":"package com.PlayerCoder1;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ExamplePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(TranslationPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\PlayerCoder1\\ExamplePluginTest.java"}]},{"commit":"434cacda96d2d46b757f6f083e9f8f4c73a0ee25","repository":"https://github.com/spektrum1/bank-black-list.git","internalName":"bank-black-list","files":[{"fileName":"BankBlackListPlugin.java","content":"/*\n * Copyright (c) 2018, Viktor Altintas \u003cviktor.altintas@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.bankblacklist;\n\nimport com.google.inject.Provides;\nimport java.util.Arrays;\nimport java.util.List;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.Menu;\nimport net.runelite.api.events.MenuOpened;\nimport net.runelite.api.events.WidgetClosed;\nimport net.runelite.api.widgets.InterfaceID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetUtil;\nimport net.runelite.client.chat.ChatColorType;\nimport net.runelite.client.chat.ChatMessageBuilder;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.chat.QueuedMessage;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Bank Black List\"\n)\npublic class BankBlackListPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\t@Inject\n\tprivate Config config;\n\t@Inject\n\tprivate ChatMessageManager chatMessageManager;\n\t@Inject\n\tprivate ItemManager itemManager;\n\n\tprivate String[] blacklist;\n\n\tprivate ItemContainer bankItems;\n\n\tprivate boolean PLACEHOLDERS_INCLUDED \u003d true;\n\n\tprivate static final String\tBLACKLIST_MESSAGE \u003d \"You have a blacklisted item in your bank: \";\n\n\tprivate final List\u003cInteger\u003e includedMenus \u003d Arrays.asList(InterfaceID.BANK, InterfaceID.INVENTORY);\n\n\t@Subscribe\n\tpublic void onWidgetClosed(WidgetClosed event)\n\t{\n\t\tif (event.getGroupId() !\u003d InterfaceID.BANK)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tblacklist \u003d formatBlacklistFromConfig();\n\t\tPLACEHOLDERS_INCLUDED \u003d config.includePlaceholders();\n\t\tloadCurrentBankItems();\n\t\tsearchBankForContraband();\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOpened(final MenuOpened event)\n\t{\n\t\tif (!client.isKeyPressed(KeyCode.KC_SHIFT) || !config.enableShiftClick())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tblacklist \u003d formatBlacklistFromConfig();\n\t\tfinal MenuEntry[] entries \u003d event.getMenuEntries();\n\t\tfor (int idx \u003d entries.length - 1; idx \u003e\u003d 0; --idx)\n\t\t{\n\t\t\tfinal MenuEntry entry \u003d entries[idx];\n\t\t\tfinal Widget w \u003d entry.getWidget();\n\n\t\t\tif (w !\u003d null \u0026\u0026 includedMenus.contains(WidgetUtil.componentToInterface(w.getId()))\n\t\t\t\t\u0026\u0026 \"Examine\".equals(entry.getOption()) \u0026\u0026 entry.getIdentifier() \u003d\u003d 10)\n\t\t\t{\n\t\t\t\tfinal String itemName \u003d itemManager.getItemComposition(w.getItemId()).getName();\n\n\t\t\t\tfinal MenuEntry parent \u003d client.getMenu().createMenuEntry(idx)\n\t\t\t\t\t.setOption(\"Black list\")\n\t\t\t\t\t.setTarget(entry.getTarget())\n\t\t\t\t\t.setType(MenuAction.RUNELITE);\n\t\t\t\tfinal Menu submenu \u003d parent.createSubMenu();\n\n\t\t\t\tif (Arrays.stream(blacklist).anyMatch(itemName::equals))\n\t\t\t\t{\n\t\t\t\t\tsubmenu.createMenuEntry(0)\n\t\t\t\t\t\t.setOption(\"Remove from list\")\n\t\t\t\t\t\t.setType(MenuAction.RUNELITE)\n\t\t\t\t\t\t.onClick(e -\u003e\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tremoveBlackListItem(itemName);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsubmenu.createMenuEntry(0)\n\t\t\t\t\t\t.setOption(\"Add to list\")\n\t\t\t\t\t\t.setType(MenuAction.RUNELITE)\n\t\t\t\t\t\t.onClick(e -\u003e\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\taddBlackListItem(itemName);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate String[] formatBlacklistFromConfig() {\n\t\tString initialBlackList \u003d config.blackList().trim();\n\t\tString[] blackList \u003d initialBlackList.split(\",\");\n\n\t\tString[] formattedBlacklistArray \u003d Arrays.stream(blackList)\n\t\t\t.map(String::trim)\n\t\t\t.filter(item -\u003e !item.isEmpty())\n\t\t\t.map(item -\u003e\n\t\t\t{\n\t\t\t\tString lowercased \u003d item.toLowerCase();\n\t\t\t\treturn Character.toUpperCase(lowercased.charAt(0)) + lowercased.substring(1);\n\t\t\t})\n\t\t\t.toArray(String[]::new);\n\n\t\tString formattedBlacklistSingleString \u003d String.join(\",\", formattedBlacklistArray);\n\n\t\tconfig.setBlackList(formattedBlacklistSingleString);\n\n\t\treturn formattedBlacklistArray;\n\t}\n\n\tprivate void searchBankForContraband()\n\t{\n\t\tfor (String item: blacklist)\n\t\t{\n\t\t\tfor (Item bankItem: bankItems.getItems())\n\t\t\t{\n\t\t\t\tItemComposition bankItemComposition \u003d itemManager.getItemComposition(bankItem.getId());\n\t\t\t\tif (bankItemComposition.getPlaceholderTemplateId() !\u003d -1 \u0026\u0026 !PLACEHOLDERS_INCLUDED) //checks if placeholders should be ignored, -1 is a real item while 14401 is a placeholder\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tString bankItemName \u003d bankItemComposition.getName();\n\t\t\t\tif (bankItemName.contains(item))\n\t\t\t\t{\n\t\t\t\t\tsendChatMessage(BLACKLIST_MESSAGE + bankItemName);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void addBlackListItem(String itemName)\n\t{\n\t\tString currentBlackList \u003d config.blackList().trim();\n\n\t\tif (currentBlackList.isEmpty())\n\t\t{\n\t\t\tconfig.setBlackList(itemName);\n\t\t} else\n\t\t{\n\t\t\tconfig.setBlackList(currentBlackList + \",\" + itemName);\n\t\t}\n\t}\n\n\tprivate void removeBlackListItem(String itemName)\n\t{\n\t\tString[] parts \u003d config.blackList().split(\",\\\\s*\");\n\n\t\tStringBuilder result \u003d new StringBuilder();\n\n\t\t// Iterate over the parts and append them if they do not match the substringToRemove\n\t\tfor (String part : parts) {\n\t\t\tif (!part.equalsIgnoreCase(itemName)) {\n\t\t\t\tif (result.length() \u003e 0) {\n\t\t\t\t\tresult.append(\", \");\n\t\t\t\t}\n\t\t\t\tresult.append(part);\n\t\t\t}\n\t\t}\n\t\tconfig.setBlackList(result.toString());\n\t}\n\n\n\tprivate void loadCurrentBankItems()\n\t{\n\t\tbankItems \u003d client.getItemContainer(InventoryID.BANK);\n\t}\n\n\tprivate void sendChatMessage(String chatMessage)\n\t{\n\t\tfinal String message \u003d new ChatMessageBuilder()\n\t\t\t\t.append(ChatColorType.HIGHLIGHT)\n\t\t\t\t.append(chatMessage)\n\t\t\t\t.build();\n\n\t\tchatMessageManager.queue(\n\t\t\t\tQueuedMessage.builder()\n\t\t\t\t\t\t.type(ChatMessageType.CONSOLE)\n\t\t\t\t\t\t.runeLiteFormattedMessage(message)\n\t\t\t\t\t\t.build());\n\t}\n\n\t@Provides\n\tConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(Config.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\bankblacklist\\BankBlackListPlugin.java"},{"fileName":"Config.java","content":"/*\n * Copyright (c) 2018, Viktor Altintas \u003cviktor.altintas@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.bankblacklist;\n\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"Bank Block List\")\npublic interface Config extends net.runelite.client.config.Config\n{\n\t@ConfigItem(\n\t\tkeyName \u003d \"blackList\",\n\t\tname \u003d \"Black List\",\n\t\tdescription \u003d \"Add items to cause a warning notification if banked.\"\n\t)\n\tdefault String blackList()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"blackList\",\n\t\tname \u003d \"\",\n\t\tdescription \u003d \"\"\n\t)\n\tvoid setBlackList(String key);\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"includePlaceholders\",\n\t\tname \u003d \"Include Placeholders\",\n\t\tdescription \u003d \"Determines if to trigger warnings on placeholders.\"\n\t)\n\tdefault boolean includePlaceholders()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"enableShiftClick\",\n\t\tname \u003d \"Enable shift click to add/remove items\",\n\t\tdescription \u003d \"Determines if to trigger add/remove option on shift click.\"\n\t)\n\tdefault boolean enableShiftClick()\n\t{\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\com\\bankblacklist\\Config.java"},{"fileName":"BankBlackListTest.java","content":"/*\n * Copyright (c) 2018, Viktor Altintas \u003cviktor.altintas@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.bankblacklist;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class BankBlackListTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(BankBlackListPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\bankblacklist\\BankBlackListTest.java"}]},{"commit":"700e5ef86a18cd65ea3805c72eef84de4c7476cb","repository":"https://github.com/Anderzenn/dorgesh-kaan-agility-course.git","internalName":"dorgeshkaan-agility-course","files":[{"fileName":"DorgeshKaanAgilityCourse.java","content":"package com.anderzenn.dorgeshkaanagilitycourse;\n\nimport com.google.inject.Provides;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.widgets.InterfaceID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\nimport javax.inject.Inject;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Dorgesh-Kaan Agility Course\",\n\tdescription \u003d \"provides quality of life information to-do with the Dorgesh-Kaan agility course\",\n\ttags \u003d {\"agility\",\"dorgesh-kaan\",\"dorgesh\",\"kaan\",\"dorgeshkaan\",\"helper\",\"agilityhelper\",\"course\",\"agilitycourse\",\"agility course\"}\n)\npublic class DorgeshKaanAgilityCourse extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tConfigManager configManager;\n\n\t@Inject\n\tDorgeshKaanAgilityCourseConfig config;\n\n\t@Inject\n\tprivate DorgeshKaanOverlay overlay;\n\n\t@Inject\n\tprivate SpannerWarningOverlay spannerWarningOverlay;\n\n\tprivate static final int REGION_ID \u003d 10833;\n\n\tprivate static final Pattern REQUEST_PATTERN \u003d Pattern.compile(\"The engineer asks you to get a (\\\\w+) or a (\\\\w+)\");\n\n\t//public final Map\u003cString, String\u003e itemPaths \u003d new HashMap\u003c\u003e();\n\tpublic String requestedItem1 \u003d null;\n\tpublic String requestedItem2 \u003d null;\n\tprivate boolean wasInRegion \u003d false;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\toverlayManager.add(overlay);\n\t\toverlayManager.add(spannerWarningOverlay);\n\t\t//initializeItemPaths();\n\n\t\t// Load saved items in config\n\t\trequestedItem1 \u003d config.requestedItem1();\n\t\trequestedItem2 \u003d config.requestedItem2();\n\n\t\tupdateOverlay();\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception {\n\t\toverlayManager.remove(overlay);\n\t\toverlayManager.remove(spannerWarningOverlay);\n\t\toverlay.clearOverlay();\n\t\tspannerWarningOverlay.clearWarning();\n\t}\n\n\t/*\n\tNot currently being used, saved for a future feature where it highlights\n\tthe path you need to take based on if the item you have is heavy or delicate.\n\tI\u0027ve kept it in the code for the sake of me actually remembering lol\n\n\tprivate void initializeItemPaths() {\n\t\t// Maps items to paths, based on if they\u0027re delicate or heavy.\n\t\titemPaths.put(\"cog\", \"heavy\");\n\t\titemPaths.put(\"lever\", \"heavy\");\n\t\titemPaths.put(\"power box\", \"heavy\"); // Power Box\n\t\titemPaths.put(\"capacitor\", \"delicate\");\n\t\titemPaths.put(\"fuse\", \"delicate\");\n\t\titemPaths.put(\"meter\", \"delicate\");\n\t}\n\t */\n\n\tprivate void clearRequestedItems() {\n\t\trequestedItem1 \u003d null;\n\t\trequestedItem2 \u003d null;\n\n\t\t// Clear items stored in config\n\t\tconfigManager.unsetConfiguration(\"DorgeshKaanAgilityCourseConfig\", \"requestedItem1\");\n\t\tconfigManager.unsetConfiguration(\"DorgeshKaanAgilityCourseConfig\", \"requestedItem2\");\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage event) {\n\t\tif (event.getType() !\u003d ChatMessageType.GAMEMESSAGE)\treturn;\n\n\t\tMatcher requestMatcher \u003d REQUEST_PATTERN.matcher(event.getMessage());\n\t\tif (requestMatcher.find()) {\n\t\t\trequestedItem1 \u003d requestMatcher.group(1);\n\t\t\trequestedItem2 \u003d requestMatcher.group(2);\n\n\t\t\tif (requestedItem2.equalsIgnoreCase(\"power\")) requestedItem2 \u003d \"power box\";\n\n\t\t\t// Save requested items to config\n\t\t\tconfigManager.setConfiguration(\"DorgeshKaanAgilityCourseConfig\", \"requestedItem1\", requestedItem1);\n\t\t\tconfigManager.setConfiguration(\"DorgeshKaanAgilityCourseConfig\", \"requestedItem2\", requestedItem2);\n\n\t\t\tupdateOverlay();\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.getMessage().contains(\"Your Dorgesh-Kaan Agility lap count is: \")) {\n\t\t\tclearRequestedItems();\n\t\t\toverlay.clearOverlay();\n\t\t\tupdateOverlay();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event) {\n\t\tboolean inRegion \u003d isInRegion();\n\t\tif (inRegion !\u003d wasInRegion) {\n\t\t\twasInRegion \u003d inRegion;\n\t\t\tupdateOverlay();\n\t\t}\n\n\t\tif (isInRegion()) {\n\t\t\tupdateOverlay();\n\t\t}\n\t}\n\n\tprivate void updateOverlay() {\n\t\tif (!isInRegion()) {\n\t\t\toverlay.clearOverlay();\n\t\t\tspannerWarningOverlay.clearWarning();\n\t\t\treturn;\n\t\t}\n\n\t\tif (config.highlightOption()) highlightOption();\n\n\t\toverlay.updateOverlay(requestedItem1, requestedItem2);\n\t\tspannerWarningOverlay.updateWarning(displaySpannerWarning());\n\t}\n\n\tprivate boolean isInRegion() {\n\t\treturn client.getLocalPlayer() !\u003d null \u0026\u0026 WorldPoint.fromLocal(client, client.getLocalPlayer().getLocalLocation()).getRegionID() \u003d\u003d REGION_ID;\n\t}\n\n\tpublic boolean hasSpanner() {\n\t\tItemContainer inventory \u003d client.getItemContainer(InventoryID.INVENTORY);\n\t\tif (inventory !\u003d null) {\n\t\t\tfor (Item item : inventory.getItems()) {\n\t\t\t\tif (item.getId() \u003d\u003d ItemID.SPANNER) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic boolean displaySpannerWarning() {\n\t\treturn isInRegion() \u0026\u0026 !hasSpanner();\n\t}\n\n\tprivate void highlightOption() {\n\t\tclientThread.invokeLater(() -\u003e {\n\t\t\tWidget dialogueOptions \u003d client.getWidget(InterfaceID.DIALOG_OPTION, 1);\n\n\t\t\tif (dialogueOptions \u003d\u003d null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (dialogueOptions.getChildren() \u003d\u003d null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfor (Widget option : dialogueOptions.getChildren()) {\n\t\t\t\tif (option !\u003d null \u0026\u0026 option.getText() !\u003d null) {\n\t\t\t\t\tString optionText \u003d option.getText().trim().toLowerCase();\n\n\t\t\t\t\tif (isRequestedItem(optionText)) {\n\t\t\t\t\t\toption.setTextColor(config.highlightColour().getRGB()); // Colour the correct dialogue option\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate boolean isRequestedItem(String optionText) {\n\t\treturn optionText !\u003d null \u0026\u0026 (optionText.equalsIgnoreCase(requestedItem1) || optionText.equalsIgnoreCase(requestedItem2));\n\t}\n\n\t@Provides\n\tDorgeshKaanAgilityCourseConfig dorgeshKaanAgilityCourseConfig(ConfigManager configManager) {\n\t\treturn configManager.getConfig(DorgeshKaanAgilityCourseConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\anderzenn\\dorgeshkaanagilitycourse\\DorgeshKaanAgilityCourse.java"},{"fileName":"DorgeshKaanAgilityCourseConfig.java","content":"package com.anderzenn.dorgeshkaanagilitycourse;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\nimport java.awt.*;\n\n@ConfigGroup(\"DorgeshKaanAgilityCourseConfig\")\npublic interface DorgeshKaanAgilityCourseConfig extends Config\n{\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"highlightOption\",\n\t\t\tname \u003d \"Highlight Option\",\n\t\t\tdescription \u003d \"Highlight the correct item to pick from the boilers\"\n\t)\n\tdefault boolean highlightOption() {\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"highlightColour\",\n\t\t\tname \u003d \"Highlight Colour\",\n\t\t\tdescription \u003d \"Colour of the correct item to pick from the boilers\"\n\t)\n\tdefault Color highlightColour() {\n\t\treturn Color.CYAN;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"requestedItem1\",\n\t\t\tname \u003d \"Requested item 1\",\n\t\t\tdescription \u003d \"Stores the first requested item\",\n\t\t\thidden \u003d true\n\t)\n\tdefault String requestedItem1() {\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"requestedItem2\",\n\t\t\tname \u003d \"Requested item 2\",\n\t\t\tdescription \u003d \"Stores the second requested item\",\n\t\t\thidden \u003d true\n\t)\n\tdefault String requestedItem2() {\n\t\treturn \"\";\n\t}\n}\n","filePath":"src\\main\\java\\com\\anderzenn\\dorgeshkaanagilitycourse\\DorgeshKaanAgilityCourseConfig.java"},{"fileName":"DorgeshKaanOverlay.java","content":"package com.anderzenn.dorgeshkaanagilitycourse;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.ComponentOrientation;\nimport net.runelite.client.ui.overlay.components.ImageComponent;\nimport net.runelite.client.util.ImageUtil;\n\nimport javax.inject.Inject;\nimport java.awt.*;\nimport java.awt.image.BufferedImage;\nimport java.util.HashMap;\nimport java.util.Map;\n\n@Slf4j\npublic class DorgeshKaanOverlay extends OverlayPanel {\n    private final Client client;\n    private final DorgeshKaanAgilityCourse plugin;\n    private final Map\u003cString, BufferedImage\u003e itemIcons \u003d new HashMap\u003c\u003e();\n\n    private String requestedItem1;\n    private String requestedItem2;\n\n    @Inject\n    private DorgeshKaanOverlay(Client client, DorgeshKaanAgilityCourse plugin) {\n        super(plugin);\n        this.client \u003d client;\n        this.plugin \u003d plugin;\n\n        setPosition(OverlayPosition.ABOVE_CHATBOX_RIGHT);\n        setLayer(OverlayLayer.ABOVE_WIDGETS);\n        panelComponent.setOrientation(ComponentOrientation.HORIZONTAL);\n        panelComponent.setGap(new Point(5, 0));\n\n        loadIcons();\n    }\n\n    private void loadIcons() {\n        itemIcons.put(\"capacitor\", loadImage(\"Capacitor.png\"));\n        itemIcons.put(\"cog\", loadImage(\"Cog.png\"));\n        itemIcons.put(\"fuse\", loadImage(\"Fuse.png\"));\n        itemIcons.put(\"lever\", loadImage(\"Lever.png\"));\n        itemIcons.put(\"meter\", loadImage(\"Meter.png\"));\n        itemIcons.put(\"power box\", loadImage(\"Powerbox.png\"));\n    }\n\n    private BufferedImage loadImage(String fileName) {\n        try {\n            return ImageUtil.loadImageResource(DorgeshKaanAgilityCourse.class, \"/\" + fileName);\n        } catch (Exception e) {\n            log.error(\"Error loading image: {}\", fileName, e);\n            return null;\n        }\n    }\n\n    public void updateOverlay(String item1, String item2) {\n        if (!plugin.hasSpanner()) {\n            clearOverlay();\n            return;\n        }\n\n        this.requestedItem1 \u003d item1;\n        this.requestedItem2 \u003d item2;\n    }\n\n    public void clearOverlay() {\n        requestedItem1 \u003d null;\n        requestedItem2 \u003d null;\n        panelComponent.getChildren().clear();\n    }\n\n    private void addIconToPanel(String itemName) {\n        BufferedImage icon \u003d itemIcons.get(itemName);\n        if (icon !\u003d null) panelComponent.getChildren().add(new ImageComponent(icon));\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        panelComponent.getChildren().clear();\n\n        if (requestedItem1 !\u003d null) {\n            addIconToPanel(requestedItem1);\n        }\n\n        if (requestedItem2 !\u003d null) {\n            addIconToPanel(requestedItem2);\n        }\n\n        return super.render(graphics);\n    }\n}\n","filePath":"src\\main\\java\\com\\anderzenn\\dorgeshkaanagilitycourse\\DorgeshKaanOverlay.java"},{"fileName":"SpannerWarningOverlay.java","content":"package com.anderzenn.dorgeshkaanagilitycourse;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.ComponentOrientation;\nimport net.runelite.client.ui.overlay.components.ImageComponent;\nimport net.runelite.client.ui.overlay.components.LineComponent;\nimport net.runelite.client.util.ImageUtil;\n\nimport javax.inject.Inject;\nimport java.awt.*;\nimport java.awt.image.BufferedImage;\n\n@Slf4j\npublic class SpannerWarningOverlay extends OverlayPanel {\n    private final DorgeshKaanAgilityCourse plugin;\n\n    private BufferedImage spannerIcon;\n    private boolean showWarning;\n\n    @Inject\n    private SpannerWarningOverlay(DorgeshKaanAgilityCourse plugin) {\n        this.plugin \u003d plugin;\n        setPosition(OverlayPosition.TOP_LEFT);\n        setLayer(OverlayLayer.ABOVE_WIDGETS);\n        panelComponent.setWrap(true);\n        panelComponent.setOrientation(ComponentOrientation.HORIZONTAL);\n        loadSpannerIcon();\n    }\n\n    private void loadSpannerIcon() {\n        spannerIcon \u003d loadImage();\n    }\n\n    private BufferedImage loadImage() {\n        try {\n            return ImageUtil.loadImageResource(DorgeshKaanAgilityCourse.class, \"/Spanner.png\");\n        } catch (Exception e) {\n            log.error(\"Error loading image: {}\", \"Spanner.png\", e);\n            return null;\n        }\n    }\n\n    public void updateWarning(boolean showWarning) {\n        this.showWarning \u003d showWarning;\n    }\n\n    public void clearWarning() {\n        showWarning \u003d false;\n        panelComponent.getChildren().clear();\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        panelComponent.getChildren().clear();\n\n        if (spannerIcon !\u003d null \u0026\u0026 plugin.displaySpannerWarning()) {\n                panelComponent.getChildren().add(new ImageComponent(spannerIcon));\n                panelComponent.getChildren().add(LineComponent.builder()\n                        .right(\"No Spanner!\")\n                        .rightColor(Color.RED)\n                        .build());\n                // Spacing to counter text overlapping with icon\n                panelComponent.getChildren().add(LineComponent.builder()\n                        .left(\"\")\n                        .build());\n                panelComponent.getChildren().add(LineComponent.builder()\n                        .left(\"\")\n                        .build());\n                // Text that without the two line components above, overlaps with icon\n                panelComponent.getChildren().add(LineComponent.builder()\n                        .left(\"Talk to Turgall to receive another.\")\n                        .build());\n            }\n\n        return super.render(graphics);\n    }\n}\n","filePath":"src\\main\\java\\com\\anderzenn\\dorgeshkaanagilitycourse\\SpannerWarningOverlay.java"},{"fileName":"DorgeshKaanAgilityCourseTest.java","content":"package com.anderzenn.dorgeshkaanagilitycourse;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class DorgeshKaanAgilityCourseTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(DorgeshKaanAgilityCourse.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\anderzenn\\dorgeshkaanagilitycourse\\DorgeshKaanAgilityCourseTest.java"}]},{"commit":"f7445e3c0fbefe2ab216ef0f745b0f189a7c0f4a","repository":"https://github.com/MarbleTurtle/Color-Coordinator.git","internalName":"input-recolor","files":[{"fileName":"ChatChannel.java","content":"package com.smartchatinputcolor;\n\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.api.annotations.Varp;\nimport net.runelite.api.gameval.VarPlayerID;\nimport net.runelite.client.ui.JagexColors;\n\nimport javax.annotation.Nullable;\nimport java.awt.*;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.regex.Pattern;\n\n@RequiredArgsConstructor\n@Getter\nenum ChatChannel {\n    PUBLIC(\n        \"PublicChat\",\n        VarPlayerID.OPTION_CHAT_COLOUR_PUBLIC_TRANSPARENT,\n        VarPlayerID.OPTION_CHAT_COLOUR_PUBLIC_OPAQUE,\n        JagexColors.CHAT_TYPED_TEXT_TRANSPARENT_BACKGROUND,\n        JagexColors.CHAT_TYPED_TEXT_OPAQUE_BACKGROUND,\n        Pattern.compile(\"^/(@p|p ).*\"),\n        0\n    ),\n    FRIEND(\n        \"ClanChatMessage\",\n        VarPlayerID.OPTION_CHAT_COLOUR_FRIENDSCHAT_TRANSPARENT,\n        VarPlayerID.OPTION_CHAT_COLOUR_FRIENDSCHAT_OPAQUE,\n        JagexColors.CHAT_FC_TEXT_TRANSPARENT_BACKGROUND,\n        JagexColors.CHAT_FC_TEXT_OPAQUE_BACKGROUND,\n        Pattern.compile(\"^/(@?f).*\"),\n        1\n    ),\n    CLAN(\n        \"ClanMessage\",\n        VarPlayerID.OPTION_CHAT_COLOUR_CLANCHAT_TRANSPARENT,\n        VarPlayerID.OPTION_CHAT_COLOUR_CLANCHAT_OPAQUE,\n        DefaultColors.CLAN_AND_GIM,\n        DefaultColors.CLAN_AND_GIM,\n        Pattern.compile(\"^/(@c|c ).*\"),\n        2\n    ),\n    GUEST(\n        \"ClanGuestMessage\",\n        VarPlayerID.OPTION_CHAT_COLOUR_GUESTCLAN_TRANSPARENT,\n        VarPlayerID.OPTION_CHAT_COLOUR_GUESTCLAN_OPAQUE,\n        DefaultColors.GUEST_CLAN_TRANSPARENT,\n        DefaultColors.GUEST_CLAN_OPAQUE,\n        Pattern.compile(\"^/(@gc|gc ).*\"),\n        3\n    ),\n    GIM(\n        null,\n        VarPlayerID.OPTION_CHAT_COLOUR_GIMCHAT_TRANSPARENT,\n        VarPlayerID.OPTION_CHAT_COLOUR_GIMCHAT_OPAQUE,\n        DefaultColors.CLAN_AND_GIM,\n        DefaultColors.CLAN_AND_GIM,\n        Pattern.compile(\"^/(@g[^c]|g ).*\"),\n        4\n    );\n\n    private final String colorConfigKey;\n    @Getter(onMethod_ \u003d {@Varp})\n    private final @Varp int transparentVarpId;\n    @Getter(onMethod_ \u003d {@Varp})\n    private final @Varp int opaqueVarpId;\n    private final Color transparentDefaultColor;\n    private final Color opaqueDefaultColor;\n\n    @Getter(AccessLevel.NONE)\n    private final Pattern prefixRegex;\n    @Getter(AccessLevel.NONE)\n    private final int defaultSlashPrefixCount;\n\n    private final static Map\u003cInteger, ChatChannel\u003e slashPrefixMap \u003d new HashMap\u003c\u003e();\n\n    /**\n     * Set the slash prefixes to their default values\n     */\n    public static void useDefaultSlashPrefixes() {\n        slashPrefixMap.clear();\n        for (ChatChannel channel : ChatChannel.values()) {\n            slashPrefixMap.put(channel.defaultSlashPrefixCount, channel);\n        }\n        slashPrefixMap.remove(PUBLIC.defaultSlashPrefixCount);\n    }\n\n    /**\n     * Configure slash prefixes when Slash Swapper is enabled\n     *\n     * @param guestChatConfig Whether the guest chat config is enabled on Slash Swapper\n     */\n    public static void useSlashSwapperPrefixes(boolean guestChatConfig) {\n        slashPrefixMap.clear();\n        slashPrefixMap.put(2, FRIEND);\n        slashPrefixMap.put(4, GIM);\n\n        if (guestChatConfig) {\n            slashPrefixMap.put(3, CLAN);\n            slashPrefixMap.put(1, GUEST);\n            return;\n        }\n\n        slashPrefixMap.put(1, CLAN);\n        slashPrefixMap.put(3, GUEST);\n    }\n\n    @Nullable\n    public static ChatChannel fromSlashPrefix(String text) {\n        int slashCount \u003d 0;\n        while (slashCount \u003c text.length() \u0026\u0026 text.charAt(slashCount) \u003d\u003d \u0027/\u0027) {\n            slashCount++;\n        }\n\n        return slashPrefixMap.get(Math.min(slashCount, 4));\n    }\n\n    /**\n     * Get the chat channel whose slash prefix has the given number of slashes\n     *\n     * @param count Number of slashes\n     * @return Chat channel whose slash prefix has the given number of slashes\n     */\n    @Nullable\n    public static ChatChannel fromSlashCount(int count) {\n        return slashPrefixMap.get(count);\n    }\n\n    /**\n     * @param chatModeVarClientIntValue VarClientInt value\n     * @return Current chat mode channel\n     */\n    @Nullable\n    public static ChatChannel fromChatModeVarClientInt(int chatModeVarClientIntValue) {\n        switch (chatModeVarClientIntValue) {\n            case 1:\n                return FRIEND;\n            case 2:\n                return CLAN;\n            case 3:\n                return GUEST;\n            case 4:\n                return GIM;\n        }\n\n        return null;\n    }\n\n    /**\n     * Check if the input text matches this channel\u0027s prefix regex\n     *\n     * @param text Input text\n     * @return Whether the text matches this channel\u0027s prefix regex\n     */\n    public boolean matchesPrefixRegex(String text) {\n        return prefixRegex.matcher(text).matches();\n    }\n}\n","filePath":"src\\main\\java\\com\\smartchatinputcolor\\ChatChannel.java"},{"fileName":"ChatPanel.java","content":"package com.smartchatinputcolor;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\n\n@AllArgsConstructor\n@Getter\nenum ChatPanel {\n    NONE(1337),\n    ALL(0),\n    GAME(1),\n    PUBLIC(2),\n    PRIVATE(3),\n    CHANNEL(4),\n    CLAN(5),\n    TRADE_OR_GIM(6);\n\n    private final int varClientIntValue;\n\n    public static ChatPanel fromVarClientInt(int varClientIntValue) {\n        for (ChatPanel chatPanel : ChatPanel.values()) {\n            if (chatPanel.varClientIntValue \u003d\u003d varClientIntValue) {\n                return chatPanel;\n            }\n        }\n        return NONE;\n    }\n}\n","filePath":"src\\main\\java\\com\\smartchatinputcolor\\ChatPanel.java"},{"fileName":"DefaultColors.java","content":"package com.smartchatinputcolor;\n\nimport java.awt.*;\n\nclass DefaultColors {\n    final static Color CLAN_AND_GIM \u003d new Color(127, 0, 0);\n    final static Color GUEST_CLAN_TRANSPARENT \u003d new Color(0, 211, 0);\n    final static Color GUEST_CLAN_OPAQUE \u003d new Color(0, 122, 0);\n}\n","filePath":"src\\main\\java\\com\\smartchatinputcolor\\DefaultColors.java"},{"fileName":"SmartChatInputColorPlugin.java","content":"package com.smartchatinputcolor;\n\nimport com.google.common.annotations.VisibleForTesting;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.ScriptID;\nimport net.runelite.api.VarClientStr;\nimport net.runelite.api.annotations.Varp;\nimport net.runelite.api.events.*;\nimport net.runelite.api.gameval.InterfaceID;\nimport net.runelite.api.gameval.VarbitID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.events.PluginChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.plugins.PluginManager;\nimport net.runelite.client.util.ColorUtil;\nimport net.runelite.client.util.Text;\n\nimport javax.annotation.Nullable;\nimport javax.inject.Inject;\nimport java.awt.*;\nimport java.util.HashMap;\nimport java.util.Map;\n\n@Slf4j\n@PluginDescriptor(name \u003d \"Smart Chat Input Color\")\npublic class SmartChatInputColorPlugin extends Plugin {\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private ConfigManager configManager;\n\n    @Inject\n    private PluginManager pluginManager;\n\n    @Inject\n    private ClientThread clientThread;\n\n    private ChatPanel selectedChatPanel;\n\n    private ChatChannel friendsChatChannel;\n\n    private boolean hoppingWorlds;\n\n    private boolean shouldInitialize;\n\n    private final Map\u003cChatChannel, Color\u003e channelColorMap \u003d new HashMap\u003c\u003e();\n\n    @Override\n    protected void startUp() {\n        log.debug(\"Smart Chat Input Color starting!\");\n        if (client.getGameState() \u003d\u003d GameState.LOGGED_IN) {\n            shouldInitialize \u003d true;\n        }\n    }\n\n    @Override\n    protected void shutDown() {\n        log.debug(\"Smart Chat Input Color stopping!\");\n        // Reset when stopping plugin\n        selectedChatPanel \u003d null;\n        friendsChatChannel \u003d null;\n        channelColorMap.clear();\n    }\n\n    /**\n     * Recolor the text typed in the chat, based on the channel that the message will be sent to\n     */\n    private void recolorChatTypedText() {\n        Widget inputWidget \u003d client.getWidget(InterfaceID.Chatbox.INPUT);\n        if (inputWidget \u003d\u003d null) {\n            return;\n        }\n\n        String input \u003d inputWidget.getText();\n        // Key Remapping is active and chat is locked, do not recolor\n        if (input.endsWith(\"Press Enter to Chat...\")) {\n            return;\n        }\n\n        int colonIndex \u003d input.indexOf(\u0027:\u0027);\n        if (colonIndex \u003d\u003d -1) {\n            return;\n        }\n        String name \u003d input.substring(0, colonIndex);\n        String typedText \u003d client.getVarcStrValue(VarClientStr.CHATBOX_TYPED_TEXT);\n        Color chatColor \u003d channelColorMap.get(deriveChatChannel(typedText));\n        inputWidget.setText(name + \": \" + ColorUtil.wrapWithColorTag(Text.escapeJagex(typedText) + \"*\", chatColor));\n    }\n\n    /**\n     * Decide which channel color the input text should get\n     *\n     * @param text Chat input text typed by the player\n     * @return Chat channel whose color the input text should be recolored to\n     */\n    @VisibleForTesting\n    ChatChannel deriveChatChannel(String text) {\n        // First check if the text starts with one of the prefixes\n        ChatChannel messagePrefixChannel \u003d findChannelByMessagePrefix(text);\n        if (messagePrefixChannel !\u003d null) {\n            return messagePrefixChannel;\n        }\n\n        ChatChannel chatPanelChannel \u003d getSelectedChatPanelChannel();\n        if (chatPanelChannel !\u003d ChatChannel.PUBLIC) {\n            return chatPanelChannel;\n        }\n\n        // If it didn\u0027t match a prefix, check if in a certain chat mode\n        int activeChatMode \u003d client.getVarcIntValue(VarClientInt.ACTIVE_CHAT_MODE);\n        ChatChannel chatModeChannel \u003d ChatChannel.fromChatModeVarClientInt(activeChatMode);\n        if (chatModeChannel \u003d\u003d ChatChannel.FRIEND \u0026\u0026 friendsChatChannel \u003d\u003d ChatChannel.PUBLIC) {\n            // It\u0027s possible to set chat mode to friends and then leave the channel.\n            // Messages sent in this mode go nowhere, but we have to pick a color, so we default to public.\n            // TODO: Add a separate channel / color for messages that don\u0027t go anywhere?\n            return ChatChannel.PUBLIC;\n        }\n        // If a chat mode is active, return it\n        if (chatModeChannel !\u003d null) {\n            return chatModeChannel;\n        }\n\n        // This message isn\u0027t going anywhere according to the checks, send it to public by default\n        return ChatChannel.PUBLIC;\n    }\n\n    /**\n     * Find the channel that a message would be sent to based on the prefix.\n     *\n     * @param text Chat message input\n     * @return Channel that the message would be sent to or null\n     */\n    private ChatChannel findChannelByMessagePrefix(String text) {\n        // First check if the prefix regex matches\n        for (ChatChannel channel : ChatChannel.values()) {\n            if (channel.matchesPrefixRegex(text)) {\n                return getResultingChannel(channel, text);\n            }\n        }\n\n        // Check the slash prefix if there is no regex match\n        return getResultingChannel(ChatChannel.fromSlashPrefix(text), text);\n    }\n\n    /**\n     * Compute the color of a chat channel based on RL and in-game settings\n     *\n     * @param channel Chat channel\n     * @return Color that the text should be colored for the given chat channel\n     */\n    private Color computeChannelColor(ChatChannel channel, boolean transparent) {\n        String colorConfigKey \u003d channel.getColorConfigKey();\n        if (colorConfigKey !\u003d null) {\n            Color color \u003d configManager.getConfiguration(\n                \"textrecolor\", (transparent ? \"transparent\" : \"opaque\") + colorConfigKey, Color.class);\n            if (color !\u003d null) {\n                return color;\n            }\n        }\n\n        int colorCode \u003d client.getVarpValue(transparent ? channel.getTransparentVarpId() : channel.getOpaqueVarpId());\n        // Zero means there is no value set, return the default value for this channel\n        if (colorCode \u003d\u003d 0) {\n            return transparent ? channel.getTransparentDefaultColor() : channel.getOpaqueDefaultColor();\n        }\n\n        // Color code saved in the varp is offset by 1\n        return new Color(colorCode - 1);\n    }\n\n    /**\n     * Update the mapped color for each chat channel\n     */\n    private void populateChatChannelColorMap() {\n        boolean transparent \u003d client.isResized() \u0026\u0026 client.getVarbitValue(VarbitID.CHATBOX_TRANSPARENCY) \u003d\u003d 1;\n        for (ChatChannel c : ChatChannel.values()) {\n            channelColorMap.put(c, computeChannelColor(c, transparent));\n        }\n    }\n\n    /**\n     * Set the chat channel that a message will be sent to if trying to send to friends channel\n     */\n    private void setFriendsChatChannel(boolean isInFriendsChat) {\n        friendsChatChannel \u003d isInFriendsChat ? ChatChannel.FRIEND : ChatChannel.PUBLIC;\n    }\n\n    /**\n     * Set the currently opened chat panel\n     */\n    private void setOpenChatPanel() {\n        selectedChatPanel \u003d ChatPanel.fromVarClientInt(client.getVarcIntValue(VarClientInt.OPEN_CHAT_PANEL));\n    }\n\n    /**\n     * Find the resulting channel, keeping in mind whether the player is currently in a friends channel\n     *\n     * @param channel Chat channel trying to send the message to\n     * @return Chat channel that the message will really go to\n     */\n    @Nullable\n    private ChatChannel getResultingChannel(ChatChannel channel) {\n        if (channel \u003d\u003d null) {\n            return null;\n        }\n\n        return channel \u003d\u003d ChatChannel.FRIEND ? friendsChatChannel : channel;\n    }\n\n    /**\n     * Find the resulting channel, checking whether the player is currently in a friends channel or has a GIM account\n     *\n     * @param channel Chat channel trying to send the message to\n     * @return Chat channel that the message will really go to\n     */\n    @Nullable\n    private ChatChannel getResultingChannel(ChatChannel channel, String text) {\n        if (channel \u003d\u003d null) {\n            return null;\n        }\n\n        switch (channel) {\n            case FRIEND:\n                return friendsChatChannel;\n            case GIM:\n                return getGIMChatChannel(text);\n            default:\n                return channel;\n        }\n    }\n\n    /**\n     * Find the chat channel that a message will be sent to when trying to send to group ironman channel. If an account\n     * is a Group Ironman, the Group Ironman chat channel is available. Otherwise, a bit more logic is involved.\n     *\n     * @return Chat channel that the message will go to\n     */\n    private ChatChannel getGIMChatChannel(String text) {\n        if (isGroupIronman()) {\n            return ChatChannel.GIM;\n        }\n\n        if (text.startsWith(\"/g\")) {\n            return getResultingChannel(ChatChannel.fromSlashCount(1));\n        }\n\n        if (text.startsWith(\"/@g\")) {\n            return ChatChannel.CLAN;\n        }\n\n        if (text.startsWith(\"////\")) {\n            return getResultingChannel(ChatChannel.fromSlashCount(3));\n        }\n\n        // This never happens because the string passed into this function\n        // will always start with one of the prefixes handled above\n        return ChatChannel.GIM;\n    }\n\n    /**\n     * Get the chat channel that a message should be sent to, based on the currently selected chat panel\n     *\n     * @return Chat channel that the message will go to\n     */\n    private ChatChannel getSelectedChatPanelChannel() {\n        switch (selectedChatPanel) {\n            case CHANNEL:\n                return friendsChatChannel;\n            case CLAN:\n                return ChatChannel.CLAN;\n            case TRADE_OR_GIM:\n                return isGroupIronman() ? ChatChannel.GIM : ChatChannel.PUBLIC;\n        }\n\n        return ChatChannel.PUBLIC;\n    }\n\n    private boolean isGroupIronman() {\n        switch (client.getVarbitValue(VarbitID.IRONMAN)) {\n            case 4: // GIM\n            case 5: // HCGIM\n            case 6: // UGIM\n                return true;\n        }\n        return false;\n    }\n\n    private boolean getSlashSwapperGuestChatConfig() {\n        return configManager.getConfiguration(\"slashswapper\", \"slashGuestChat\", boolean.class);\n    }\n\n    /**\n     * Configure up slash prefixes based on whether Slash Swapper is active\n     */\n    private void configureSlashPrefixes() {\n        boolean slashSwapperEnabled \u003d pluginManager\n            .getPlugins()\n            .stream()\n            .anyMatch(p -\u003e p.getName().equals(\"Slash Swapper\") \u0026\u0026 pluginManager.isPluginEnabled(p));\n\n        if (slashSwapperEnabled) {\n            useSlashSwapperPrefixes();\n            return;\n        }\n\n        ChatChannel.useDefaultSlashPrefixes();\n    }\n\n    private void useSlashSwapperPrefixes() {\n        ChatChannel.useSlashSwapperPrefixes(getSlashSwapperGuestChatConfig());\n    }\n\n    /**\n     * Recolor the chat input when the player selects a chat tab, or when the user is typing\n     *\n     * @param scriptPostFired information about the fired script\n     */\n    @Subscribe\n    public void onScriptPostFired(ScriptPostFired scriptPostFired) {\n        if (scriptPostFired.getScriptId() \u003d\u003d ScriptID.CHAT_PROMPT_INIT) {\n            recolorChatTypedText();\n        }\n    }\n\n    /**\n     * Initialize after an account is logged in, but not when hopping worlds\n     *\n     * @param gameStateChanged GameState changed event object\n     */\n    @Subscribe\n    public void onGameStateChanged(GameStateChanged gameStateChanged) {\n        switch (gameStateChanged.getGameState()) {\n            case HOPPING:\n                hoppingWorlds \u003d true;\n                break;\n            case LOGGED_IN: {\n                if (hoppingWorlds) {\n                    hoppingWorlds \u003d false;\n                    return;\n                }\n                shouldInitialize \u003d true;\n            }\n        }\n    }\n\n    /**\n     * Initialize the plugin on the game tick after shouldInitialize is set, it requires Varbits / VarPlayers to be set\n     */\n    @Subscribe\n    public void onGameTick(GameTick ignored) {\n        if (!shouldInitialize) {\n            return;\n        }\n\n        setOpenChatPanel();\n        setFriendsChatChannel(client.getFriendsChatManager() !\u003d null);\n        configureSlashPrefixes();\n        populateChatChannelColorMap();\n        shouldInitialize \u003d false;\n        recolorChatTypedText();\n    }\n\n    /**\n     * Update chat channel color map when a relevant RL config is changed\n     *\n     * @param configChanged Config changed event object\n     */\n    @Subscribe\n    public void onConfigChanged(ConfigChanged configChanged) {\n        String configGroup \u003d configChanged.getGroup();\n        if (configGroup.equals(\"slashswapper\")) {\n            clientThread.invoke(() -\u003e {\n                configureSlashPrefixes();\n                recolorChatTypedText();\n            });\n        }\n\n        if (configGroup.equals(\"textrecolor\")) {\n            clientThread.invoke(() -\u003e {\n                populateChatChannelColorMap();\n                recolorChatTypedText();\n            });\n        }\n    }\n\n    /**\n     * Update chat channel color map when Slash Swapper is turned on or off\n     *\n     * @param pluginChanged Plugin changed event object\n     */\n    @Subscribe\n    public void onPluginChanged(PluginChanged pluginChanged) {\n        Plugin plugin \u003d pluginChanged.getPlugin();\n        if (!plugin.getName().equals(\"Slash Swapper\")) {\n            return;\n        }\n\n        if (pluginManager.isPluginEnabled(plugin)) {\n            useSlashSwapperPrefixes();\n        } else {\n            ChatChannel.useDefaultSlashPrefixes();\n        }\n\n        recolorChatTypedText();\n    }\n\n    /**\n     * Update chat channel color map when a relevant in-game setting is changed\n     *\n     * @param varbitChanged Varbit changed event object\n     */\n    @Subscribe\n    public void onVarbitChanged(VarbitChanged varbitChanged) {\n        // Check if the setting for transparent chat box changed\n        if (varbitChanged.getVarbitId() \u003d\u003d VarbitID.CHATBOX_TRANSPARENCY) {\n            populateChatChannelColorMap();\n            return;\n        }\n\n        // Check if any of the chat channel colours was changed\n        @Varp int varPlayerId \u003d varbitChanged.getVarpId();\n        for (ChatChannel channel : ChatChannel.values()) {\n            if (varPlayerId \u003d\u003d channel.getOpaqueVarpId() || varPlayerId \u003d\u003d channel.getTransparentVarpId()) {\n                populateChatChannelColorMap();\n                return;\n            }\n        }\n    }\n\n    /**\n     * Update selected chat panel when a new chat panel is opened\n     *\n     * @param varClientIntChanged VarClientInt changed event object\n     */\n    @Subscribe\n    public void onVarClientIntChanged(VarClientIntChanged varClientIntChanged) {\n        if (varClientIntChanged.getIndex() \u003d\u003d VarClientInt.OPEN_CHAT_PANEL) {\n            setOpenChatPanel();\n        }\n    }\n\n    /**\n     * Update state when client joins or leaves a friends chat and recolor the typed text\n     *\n     * @param friendsChatChanged FriendsChat changed event object\n     */\n    @Subscribe\n    public void onFriendsChatChanged(FriendsChatChanged friendsChatChanged) {\n        setFriendsChatChannel(friendsChatChanged.isJoined());\n        recolorChatTypedText();\n    }\n}\n","filePath":"src\\main\\java\\com\\smartchatinputcolor\\SmartChatInputColorPlugin.java"},{"fileName":"VarClientInt.java","content":"package com.smartchatinputcolor;\n\nimport net.runelite.api.annotations.VarCInt;\n\npublic class VarClientInt {\n\n    /**\n     * Currently open chat panel\n     * @see ChatPanel\n     */\n    @VarCInt\n    static final int OPEN_CHAT_PANEL \u003d 41;\n\n    /**\n     * Currently active chat mode\n     * @see ChatChannel#fromChatModeVarClientInt(int)\n     */\n    @VarCInt\n    static final int ACTIVE_CHAT_MODE \u003d 945;\n}\n","filePath":"src\\main\\java\\com\\smartchatinputcolor\\VarClientInt.java"},{"fileName":"ClientState.java","content":"package com.smartchatinputcolor;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\n\n@Getter\n@AllArgsConstructor\npublic class ClientState {\n    private boolean groupIronman;\n\n    private boolean inFriendsChat;\n\n    private SlashSwapperMode slashSwapperMode;\n\n    private ChatPanel openChatPanel;\n\n    private ChatChannel chatMode;\n}\n","filePath":"src\\test\\java\\com\\smartchatinputcolor\\ClientState.java"},{"fileName":"SlashSwapperMode.java","content":"package com.smartchatinputcolor;\n\npublic enum SlashSwapperMode {\n    OFF,\n    ON,\n    // Slash Swapper enabled with swap guest chat option enabled\n    ON_SWAP_GUEST_CHAT,\n}\n","filePath":"src\\test\\java\\com\\smartchatinputcolor\\SlashSwapperMode.java"},{"fileName":"SmartChatInputColorPluginTest.java","content":"package com.smartchatinputcolor;\n\nimport com.google.inject.Guice;\nimport com.google.inject.testing.fieldbinder.Bind;\nimport com.google.inject.testing.fieldbinder.BoundFieldModule;\nimport net.runelite.api.Client;\nimport net.runelite.api.FriendsChatManager;\nimport net.runelite.api.GameState;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.gameval.VarbitID;\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginManager;\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.Mock;\nimport org.mockito.junit.MockitoJUnitRunner;\n\nimport javax.inject.Inject;\nimport java.awt.*;\nimport java.util.List;\n\nimport static org.junit.Assert.assertEquals;\nimport static org.mockito.ArgumentMatchers.*;\nimport static org.mockito.Mockito.mock;\nimport static org.mockito.Mockito.when;\n\n@RunWith(MockitoJUnitRunner.class)\npublic class SmartChatInputColorPluginTest {\n    @Inject\n    private SmartChatInputColorPlugin smartChatInputColorPlugin;\n\n    @Mock\n    @Bind\n    private Client client;\n\n    @Mock\n    @Bind\n    private ConfigManager configManager;\n\n    @Mock\n    @Bind\n    private PluginManager pluginManager;\n\n    @Before\n    public void before() {\n        Guice.createInjector(BoundFieldModule.of(this)).injectMembers(this);\n    }\n\n    private void setupState(ClientState state) {\n        // Mock the client\n\n        // Currently opened chat panel\n        when(client.getVarcIntValue(VarClientInt.OPEN_CHAT_PANEL))\n            .thenReturn(state.getOpenChatPanel().getVarClientIntValue());\n\n        // In a friends chat or not?\n        when(client.getFriendsChatManager())\n            .thenReturn(state.isInFriendsChat() ? mock(FriendsChatManager.class) : null);\n\n        // Current chat mode, ordinals are the same as the var client int value\n        when(client.getVarcIntValue(VarClientInt.ACTIVE_CHAT_MODE))\n            .thenReturn(state.getChatMode().ordinal());\n\n        // Group Ironman account\n        when(client.getVarbitValue(VarbitID.IRONMAN)).thenReturn(state.isGroupIronman() ? 4 : 0);\n\n        // Always logged in while testing\n        when(client.getGameState()).thenReturn(GameState.LOGGED_IN);\n\n        // Mock client color settings, always return unset value\n        //noinspection MagicConstant\n        when(client.getVarpValue(anyInt())).thenReturn(0);\n\n        // Using a transparent chatbox, doesn\u0027t matter for current testing\n        // since we only test the channel output, not the actual color\n        when(client.isResized()).thenReturn(true);\n        when(client.getVarbitValue(VarbitID.CHATBOX_TRANSPARENCY)).thenReturn(1);\n\n\n        // Mock the plugin manager\n\n        // Slash swapper plugin\n        Plugin slashSwapperMock \u003d mock(Plugin.class);\n        when(slashSwapperMock.getName()).thenReturn(\"Slash Swapper\");\n        when(pluginManager.getPlugins()).thenReturn(List.of(slashSwapperMock));\n        when(pluginManager.isPluginEnabled(slashSwapperMock))\n            .thenReturn(state.getSlashSwapperMode() !\u003d SlashSwapperMode.OFF);\n\n\n        // Mock the config manager\n\n        // Slash swapper swapping clan and guest chat\n        when(configManager.getConfiguration(\"slashswapper\", \"slashGuestChat\", boolean.class))\n            .thenReturn(state.getSlashSwapperMode() \u003d\u003d SlashSwapperMode.ON_SWAP_GUEST_CHAT);\n\n        // Runelite chat color config\n        when(configManager.getConfiguration(eq(\"textrecolor\"), anyString(), eq(Color.class)))\n            .thenReturn(mock(Color.class));\n\n        // Initialize the plugin\n\n        // Start the plugin and fake a game tick to initialize the plugin\n\n        smartChatInputColorPlugin.startUp();\n\n        // Fake a game tick to let plugin initialize\n        smartChatInputColorPlugin.onGameTick(new GameTick());\n    }\n\n    //region Assertion functions\n    private void assertCorrectChatChannel(String input, ChatChannel expectedChannel) {\n        assertEquals(expectedChannel, smartChatInputColorPlugin.deriveChatChannel(input));\n    }\n\n    private void assertPrefix(String prefix, ChatChannel expectedChannel) {\n        // Prefix without @ requires a space after the prefix\n        assertCorrectChatChannel(\"/\" + prefix + \" test\", expectedChannel);\n    }\n\n    private void assertAtPrefix(String prefix, ChatChannel expectedChannel) {\n        String fullPrefix \u003d \"/@\" + prefix;\n        // Prefix with @ can optionally have a space\n        assertCorrectChatChannel(fullPrefix + \"test\", expectedChannel);\n        assertCorrectChatChannel(fullPrefix + \" test\", expectedChannel);\n    }\n\n    private void assertAllPrefixes(String prefix, ChatChannel expectedChannel) {\n        assertPrefix(prefix, expectedChannel);\n        assertAtPrefix(prefix, expectedChannel);\n    }\n\n    private void assertSlash(int slashCount, ChatChannel expectedChannel) {\n        assertCorrectChatChannel(\"/\".repeat(slashCount) + \"test\", expectedChannel);\n    }\n    //endregion\n\n    //region Non-GIM not in friends chat\n    @Test\n    public void test() {\n        setupState(new ClientState(\n            false,\n            false,\n            SlashSwapperMode.OFF,\n            ChatPanel.ALL,\n            ChatChannel.PUBLIC\n        ));\n\n        assertSlash(0, ChatChannel.PUBLIC);\n        assertAllPrefixes(\"p\", ChatChannel.PUBLIC);\n\n        // Messages meant for friends chat go to public when not in a friends chat\n        assertSlash(1, ChatChannel.PUBLIC);\n        assertAllPrefixes(\"f\", ChatChannel.PUBLIC);\n\n        assertSlash(2, ChatChannel.CLAN);\n        assertAllPrefixes(\"c\", ChatChannel.CLAN);\n\n        assertSlash(3, ChatChannel.GUEST);\n        assertAllPrefixes(\"gc\", ChatChannel.GUEST);\n\n        // 4 slashes goes to guest chat when not on a GIM account\n        assertSlash(4, ChatChannel.GUEST);\n        // /g goes to friends chat when not on a GIM account, which goes to public when not in a friends chat\n        assertPrefix(\"g\", ChatChannel.PUBLIC);\n        // For some reason, /@g goes to clan chat when not on a GIM account\n        assertAtPrefix(\"g\", ChatChannel.CLAN);\n    }\n\n    @Test\n    public void testSlashSwapper() {\n        setupState(new ClientState(\n            false,\n            false,\n            SlashSwapperMode.ON,\n            ChatPanel.ALL,\n            ChatChannel.PUBLIC\n        ));\n\n        assertSlash(0, ChatChannel.PUBLIC);\n        assertAllPrefixes(\"p\", ChatChannel.PUBLIC);\n\n        // Slash swapper sends / to clan chat\n        assertSlash(1, ChatChannel.CLAN);\n        assertAllPrefixes(\"f\", ChatChannel.PUBLIC);\n\n        // Slash swapper sends // to friends chat, which goes to public without friends chat\n        assertSlash(2, ChatChannel.PUBLIC);\n        assertAllPrefixes(\"c\", ChatChannel.CLAN);\n\n        assertSlash(3, ChatChannel.GUEST);\n        assertAllPrefixes(\"gc\", ChatChannel.GUEST);\n\n        assertSlash(4, ChatChannel.GUEST);\n        // /g goes to FC on a non-GIM, but Slash swapper makes it go to clan chat\n        assertPrefix(\"g\", ChatChannel.CLAN);\n        // For some reason, /@g goes to clan chat when not on a GIM account\n        assertAtPrefix(\"g\", ChatChannel.CLAN);\n    }\n\n    @Test\n    public void testSlashSwapperSwapGuestChat() {\n        setupState(new ClientState(\n            false,\n            false,\n            SlashSwapperMode.ON_SWAP_GUEST_CHAT,\n            ChatPanel.ALL,\n            ChatChannel.PUBLIC\n        ));\n\n        assertSlash(0, ChatChannel.PUBLIC);\n        assertAllPrefixes(\"p\", ChatChannel.PUBLIC);\n\n        // Slash swapper + swap guest chat sends / to guest chat\n        assertSlash(1, ChatChannel.GUEST);\n        assertAllPrefixes(\"f\", ChatChannel.PUBLIC);\n\n        // Slash swapper sends // to friends chat, which goes to public without friends chat\n        assertSlash(2, ChatChannel.PUBLIC);\n        assertAllPrefixes(\"c\", ChatChannel.CLAN);\n\n        // Slash swapper + swap guest chat sends /// to clan chat\n        assertSlash(3, ChatChannel.CLAN);\n        assertAllPrefixes(\"gc\", ChatChannel.GUEST);\n\n        // Slash swapper + swap guest chat makes //// go to clan chat on a non-GIM account\n        assertSlash(4, ChatChannel.CLAN);\n        // /g goes to FC on a non-GIM, but Slash swapper makes it go to guest chat\n        assertPrefix(\"g\", ChatChannel.GUEST);\n        // For some reason, /@g goes to clan chat when not on a GIM account\n        assertAtPrefix(\"g\", ChatChannel.CLAN);\n    }\n    //endregion\n\n    //region Non-GIM in friends chat\n    @Test\n    public void testFriendsChat() {\n        setupState(new ClientState(\n            false,\n            true,\n            SlashSwapperMode.OFF,\n            ChatPanel.ALL,\n            ChatChannel.PUBLIC\n        ));\n\n        assertSlash(0, ChatChannel.PUBLIC);\n        assertAllPrefixes(\"p\", ChatChannel.PUBLIC);\n\n        assertSlash(1, ChatChannel.FRIEND);\n        assertAllPrefixes(\"f\", ChatChannel.FRIEND);\n\n        assertSlash(2, ChatChannel.CLAN);\n        assertAllPrefixes(\"c\", ChatChannel.CLAN);\n\n        assertSlash(3, ChatChannel.GUEST);\n        assertAllPrefixes(\"gc\", ChatChannel.GUEST);\n\n        // 4 slashes goes to guest chat when not on a GIM account\n        assertSlash(4, ChatChannel.GUEST);\n        // /g goes to friends chat when not on a GIM account\n        assertPrefix(\"g\", ChatChannel.FRIEND);\n        // For some reason, /@g goes to clan chat when not on a GIM account\n        assertAtPrefix(\"g\", ChatChannel.CLAN);\n    }\n\n    @Test\n    public void testFriendsChatSlashSwapper() {\n        setupState(new ClientState(\n            false,\n            true,\n            SlashSwapperMode.ON,\n            ChatPanel.ALL,\n            ChatChannel.PUBLIC\n        ));\n\n        assertSlash(0, ChatChannel.PUBLIC);\n        assertAllPrefixes(\"p\", ChatChannel.PUBLIC);\n\n        // Slash swapper sends / to clan chat\n        assertSlash(1, ChatChannel.CLAN);\n        assertAllPrefixes(\"f\", ChatChannel.FRIEND);\n\n        // Slash swapper sends // to friends chat\n        assertSlash(2, ChatChannel.FRIEND);\n        assertAllPrefixes(\"c\", ChatChannel.CLAN);\n\n        assertSlash(3, ChatChannel.GUEST);\n        assertAllPrefixes(\"gc\", ChatChannel.GUEST);\n\n        assertSlash(4, ChatChannel.GUEST);\n        // /g goes to FC on a non-GIM, but Slash swapper makes it go to clan chat\n        assertPrefix(\"g\", ChatChannel.CLAN);\n        // For some reason, /@g goes to clan chat when not on a GIM account\n        assertAtPrefix(\"g\", ChatChannel.CLAN);\n    }\n\n    @Test\n    public void testFriendsChatSlashSwapperSwapGuestChat() {\n        setupState(new ClientState(\n            false,\n            true,\n            SlashSwapperMode.ON_SWAP_GUEST_CHAT,\n            ChatPanel.ALL,\n            ChatChannel.PUBLIC\n        ));\n\n        assertSlash(0, ChatChannel.PUBLIC);\n        assertAllPrefixes(\"p\", ChatChannel.PUBLIC);\n\n        // Slash swapper + swap guest chat sends / to guest chat\n        assertSlash(1, ChatChannel.GUEST);\n        assertAllPrefixes(\"f\", ChatChannel.FRIEND);\n\n        // Slash swapper sends // to friends chat\n        assertSlash(2, ChatChannel.FRIEND);\n        assertAllPrefixes(\"c\", ChatChannel.CLAN);\n\n        // Slash swapper + swap guest chat sends /// to clan chat\n        assertSlash(3, ChatChannel.CLAN);\n        assertAllPrefixes(\"gc\", ChatChannel.GUEST);\n\n        // Slash swapper + swap guest chat makes //// go to clan chat on a non-GIM account\n        assertSlash(4, ChatChannel.CLAN);\n        // /g goes to FC on a non-GIM, but Slash swapper makes it go to guest chat\n        assertPrefix(\"g\", ChatChannel.GUEST);\n        // For some reason, /@g goes to clan chat when not on a GIM account\n        assertAtPrefix(\"g\", ChatChannel.CLAN);\n    }\n    //endregion\n\n    //region GIM not in friends chat\n    @Test\n    public void testGroupIronman() {\n        setupState(new ClientState(\n            true,\n            false,\n            SlashSwapperMode.OFF,\n            ChatPanel.ALL,\n            ChatChannel.PUBLIC\n        ));\n\n        assertSlash(0, ChatChannel.PUBLIC);\n        assertAllPrefixes(\"p\", ChatChannel.PUBLIC);\n\n        assertSlash(1, ChatChannel.PUBLIC);\n        assertAllPrefixes(\"f\", ChatChannel.PUBLIC);\n\n        assertSlash(2, ChatChannel.CLAN);\n        assertAllPrefixes(\"c\", ChatChannel.CLAN);\n\n        assertSlash(3, ChatChannel.GUEST);\n        assertAllPrefixes(\"gc\", ChatChannel.GUEST);\n\n        assertSlash(4, ChatChannel.GIM);\n        assertAllPrefixes(\"g\", ChatChannel.GIM);\n    }\n\n    @Test\n    public void testGroupIronmanSlashSwapper() {\n        setupState(new ClientState(\n            true,\n            false,\n            SlashSwapperMode.ON,\n            ChatPanel.ALL,\n            ChatChannel.PUBLIC\n        ));\n\n        assertSlash(0, ChatChannel.PUBLIC);\n        assertAllPrefixes(\"p\", ChatChannel.PUBLIC);\n\n        // Slash swapper sends / to clan chat\n        assertSlash(1, ChatChannel.CLAN);\n        assertAllPrefixes(\"f\", ChatChannel.PUBLIC);\n\n        // Slash swapper sends // to friends chat, which goes to public when not in a friends chat\n        assertSlash(2, ChatChannel.PUBLIC);\n        assertAllPrefixes(\"c\", ChatChannel.CLAN);\n\n        assertSlash(3, ChatChannel.GUEST);\n        assertAllPrefixes(\"gc\", ChatChannel.GUEST);\n\n        assertSlash(4, ChatChannel.GIM);\n        assertAllPrefixes(\"g\", ChatChannel.GIM);\n    }\n\n    @Test\n    public void testGroupIronmanSlashSwapperSwappedGuestChat() {\n        setupState(new ClientState(\n            true,\n            false,\n            SlashSwapperMode.ON_SWAP_GUEST_CHAT,\n            ChatPanel.ALL,\n            ChatChannel.PUBLIC\n        ));\n\n        assertSlash(0, ChatChannel.PUBLIC);\n        assertAllPrefixes(\"p\", ChatChannel.PUBLIC);\n\n        // Slash swapper + swap guest chat sends / to guest chat\n        assertSlash(1, ChatChannel.GUEST);\n        assertAllPrefixes(\"f\", ChatChannel.PUBLIC);\n\n        // Slash swapper sends // to friends chat, which goes to public when not in a friends chat\n        assertSlash(2, ChatChannel.PUBLIC);\n        assertAllPrefixes(\"c\", ChatChannel.CLAN);\n\n        // Slash swapper + swap guest chat sends /// to clan chat\n        assertSlash(3, ChatChannel.CLAN);\n        assertAllPrefixes(\"gc\", ChatChannel.GUEST);\n\n        assertSlash(4, ChatChannel.GIM);\n        assertAllPrefixes(\"g\", ChatChannel.GIM);\n    }\n    //endregion\n\n    //region GIM in friends chat\n    @Test\n    public void testGroupIronmanFriendsChat() {\n        setupState(new ClientState(\n            true,\n            true,\n            SlashSwapperMode.OFF,\n            ChatPanel.ALL,\n            ChatChannel.PUBLIC\n        ));\n\n        assertSlash(0, ChatChannel.PUBLIC);\n        assertAllPrefixes(\"p\", ChatChannel.PUBLIC);\n\n        assertSlash(1, ChatChannel.FRIEND);\n        assertAllPrefixes(\"f\", ChatChannel.FRIEND);\n\n        assertSlash(2, ChatChannel.CLAN);\n        assertAllPrefixes(\"c\", ChatChannel.CLAN);\n\n        assertSlash(3, ChatChannel.GUEST);\n        assertAllPrefixes(\"gc\", ChatChannel.GUEST);\n\n        assertSlash(4, ChatChannel.GIM);\n        assertAllPrefixes(\"g\", ChatChannel.GIM);\n    }\n\n    @Test\n    public void testGroupIronmanFriendsChatSlashSwapper() {\n        setupState(new ClientState(\n            true,\n            true,\n            SlashSwapperMode.ON,\n            ChatPanel.ALL,\n            ChatChannel.PUBLIC\n        ));\n\n        assertSlash(0, ChatChannel.PUBLIC);\n        assertAllPrefixes(\"p\", ChatChannel.PUBLIC);\n\n        // Slash swapper sends / to clan chat\n        assertSlash(1, ChatChannel.CLAN);\n        assertAllPrefixes(\"f\", ChatChannel.FRIEND);\n\n        // Slash swapper sends // to friends chat\n        assertSlash(2, ChatChannel.FRIEND);\n        assertAllPrefixes(\"c\", ChatChannel.CLAN);\n\n        assertSlash(3, ChatChannel.GUEST);\n        assertAllPrefixes(\"gc\", ChatChannel.GUEST);\n\n        assertSlash(4, ChatChannel.GIM);\n        assertAllPrefixes(\"g\", ChatChannel.GIM);\n    }\n\n    @Test\n    public void testGroupIronmanFriendsChatSlashSwapperSwappedGuestChat() {\n        setupState(new ClientState(\n            true,\n            true,\n            SlashSwapperMode.ON_SWAP_GUEST_CHAT,\n            ChatPanel.ALL,\n            ChatChannel.PUBLIC\n        ));\n\n        assertSlash(0, ChatChannel.PUBLIC);\n        assertAllPrefixes(\"p\", ChatChannel.PUBLIC);\n\n        // Slash swapper + swap guest chat sends / to guest chat\n        assertSlash(1, ChatChannel.GUEST);\n        assertAllPrefixes(\"f\", ChatChannel.FRIEND);\n\n        // Slash swapper sends // to friends chat\n        assertSlash(2, ChatChannel.FRIEND);\n        assertAllPrefixes(\"c\", ChatChannel.CLAN);\n\n        // Slash swapper + swap guest chat sends /// to clan chat\n        assertSlash(3, ChatChannel.CLAN);\n        assertAllPrefixes(\"gc\", ChatChannel.GUEST);\n\n        assertSlash(4, ChatChannel.GIM);\n        assertAllPrefixes(\"g\", ChatChannel.GIM);\n    }\n    //endregion\n\n    @Test\n    public void testClanTabInFriendsChatMode() {\n        setupState(new ClientState(\n            false,\n            false,\n            SlashSwapperMode.OFF,\n            ChatPanel.CLAN,\n            ChatChannel.FRIEND\n        ));\n\n        assertSlash(0, ChatChannel.CLAN);\n    }\n\n    @Test\n    public void testLeaveFriendChatAfterSettingFriendChatMode() {\n        setupState(new ClientState(\n            false,\n            false,\n            SlashSwapperMode.OFF,\n            ChatPanel.ALL,\n            ChatChannel.FRIEND\n        ));\n\n        // This message does not go anywhere but the plugin will pretend it goes to public chat to give it a color\n        assertSlash(0, ChatChannel.PUBLIC);\n    }\n\n    public static void main(String[] args) throws Exception {\n        @SuppressWarnings(\"unchecked\")\n        var plugins \u003d (Class\u003c? extends Plugin\u003e[]) new Class[]{SmartChatInputColorPlugin.class};\n        ExternalPluginManager.loadBuiltin(plugins);\n        RuneLite.main(args);\n    }\n}\n","filePath":"src\\test\\java\\com\\smartchatinputcolor\\SmartChatInputColorPluginTest.java"}]},{"commit":"dc533705aad67a8f19ff4904cb8cc649c12715c7","repository":"https://github.com/Jlao17/MadDwarfPlugin.git","internalName":"mad-dwarf","files":[{"fileName":"Insults.java","content":"package com.maddwarf;\n\npublic class Insults {\n    String[] insults \u003d\n            {\n                    \"Awright, yer a fud if ah hae ever seen yin!\",\n                    \"Ye ungrateful boggin swine!\",\n                    \"Fuk aff ya Hee Haw!\",\n                    \"Yer maws got baws an yer da loves it!\",\n                    \"Glaikit cunt!\",\n                    \"Glaikit wee fanny!\",\n                    \"Yer maw\u0027s yer da!\",\n                    \"Yer a fanny!\",\n                    \"Haw fannybaws, whit are you daein\u0027? \",\n                    \"That\u0027s guid stuff yer goin awa, cunt! \"\n            };\n\n    public String[] getInsults()\n    {\n        return insults.clone();\n    }\n}\n","filePath":"src\\main\\java\\com\\maddwarf\\Insults.java"},{"fileName":"MadDwarfPlugin.java","content":"package com.maddwarf;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.*;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\n\nimport java.util.List;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Mad Dwarf\"\n)\npublic class MadDwarfPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\tprivate int[] dwarfId \u003d { NpcID.DRUNKEN_DWARF, NpcID.DRUNKEN_DWARF_2408, NpcID.DRUNKEN_DWARF_2409,\n\t\t\t\t\t\t\t\tNpcID.DRUNKEN_DWARF_2429, NpcID.DRUNKEN_DWARF_4305 };\n\tpublic boolean kebabDropped \u003d false;\n\tpublic boolean beerDropped \u003d false;\n\tInsults insultsClass \u003d new Insults();\n\tString[] insults \u003d insultsClass.getInsults();\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tlog.info(\"Mad Dwarf started!\");\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tlog.info(\"Mad Dwarf stopped!\");\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick (GameTick gameTick)\n\t{\n\t\tint currentTick \u003d client.getTickCount();\n\t\tif (kebabDropped || beerDropped)\n\t\t{\n\t\t\tif (currentTick % 8 \u003d\u003d 0)\n\t\t\t{\n\t\t\t\tList\u003cNPC\u003e npcList \u003d client.getNpcs();\n\t\t\t\tfor (NPC npc : npcList)\n\t\t\t\t{\n\t\t\t\t\tfor (int i \u003d 0; i \u003c dwarfId.length; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (npc.getId() \u003d\u003d dwarfId[i])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnpc.setOverheadText(insults[getRandomNumber(0, insults.length)]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onNpcDespawned (NpcDespawned npcDespawned)\n\t{\n\t\tNPC npc \u003d npcDespawned.getNpc();\n\t\tfor (int i \u003d 0; i \u003c dwarfId.length; i++)\n\t\t{\n\t\t\tif (npc.getId() \u003d\u003d dwarfId[i])\n\t\t\t{\n\t\t\t\tkebabDropped \u003d false;\n\t\t\t\tbeerDropped \u003d false;\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOptionClicked (MenuOptionClicked menuOptionClicked)\n\t{\n\t\tMenuAction menuAction \u003d menuOptionClicked.getMenuAction();\n\t\tint itemId \u003d menuOptionClicked.getItemId();\n\t\tMenuEntry clickedMenuEntry \u003d menuOptionClicked.getMenuEntry();\n\n\t\tif (itemId \u003d\u003d ItemID.KEBAB)\n\t\t{\n\t\t\tif (clickedMenuEntry.getOption() \u003d\u003d \"Drop\")\n\t\t\t{\n\t\t\t\tkebabDropped \u003d true;\n\t\t\t}\n\t\t}\n\n\t\tif (itemId \u003d\u003d ItemID.BEER)\n\t\t{\n\t\t\tif (clickedMenuEntry.getOption() \u003d\u003d \"Drop\")\n\t\t\t{\n\t\t\t\tbeerDropped \u003d true;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic int getRandomNumber(int min, int max)\n\t{\n\t\treturn (int) ((Math.random() * (max - min)) + min);\n\t}\n}\n","filePath":"src\\main\\java\\com\\maddwarf\\MadDwarfPlugin.java"},{"fileName":"MadDwarfPluginTest.java","content":"package com.maddwarf;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class MadDwarfPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(MadDwarfPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\maddwarf\\MadDwarfPluginTest.java"}]},{"commit":"f55ea8c6a54282c6f81a5c804049d6816e5f2bfd","repository":"https://github.com/ArtsicleOfficial/tob-gear-checker.git","internalName":"tob-gear-checker","files":[{"fileName":"DartType.java","content":"package com.tobgearchecker;\n\npublic enum DartType {\n    MITHRIL(\"Mithril\"),\n    ADAMANT(\"Adamant\"),\n    RUNE(\"Rune\"),\n    AMETHYST(\"Amethyst\"),\n    DRAGON(\"Dragon\");\n\n    private final String name;\n\n    public String toString() {\n        return name;\n    }\n    DartType(String name) {\n        this.name \u003d name;\n    }\n}\n","filePath":"src\\main\\java\\com\\tobgearchecker\\DartType.java"},{"fileName":"HaveCharges.java","content":"package com.tobgearchecker.gear;\n\nimport com.tobgearchecker.ToBGearCheckerConfig;\nimport com.tobgearchecker.RuneSets;\n\npublic class HaveCharges {\n    public String blowpipeDartType \u003d \"\";\n    public int blowpipeDarts \u003d -1;\n    public int blowpipeScales \u003d -1;\n    public int serpentineScales \u003d -1;\n    public int scytheCharges \u003d -1;\n    public int tridentCharges \u003d -1;\n\n    public RuneSets set;\n\n    public HaveCharges() {\n\n    }\n\n    public HaveCharges(String blowpipeDartType, int blowpipeDarts, int blowpipeScales, int serpentineScales, int scytheCharges, int tridentCharges) {\n        this.blowpipeDartType \u003d blowpipeDartType;\n        this.blowpipeDarts \u003d blowpipeDarts;\n        this.blowpipeScales \u003d blowpipeScales;\n        this.serpentineScales \u003d serpentineScales;\n        this.scytheCharges \u003d scytheCharges;\n        this.tridentCharges \u003d tridentCharges;\n    }\n\n    public String getReadableIssues(ToBGearCheckerConfig config) {\n        StringBuilder output \u003d new StringBuilder();\n        if(config.blowpipe()) {\n            if(blowpipeDartType.equals(\"\") || blowpipeDarts \u003d\u003d -1 || blowpipeScales \u003d\u003d -1) {\n                output.append(\"Please check charges on your blowpipe\\n\");\n            } else {\n                if (!blowpipeDartType.equals(config.blowpipeDartType().toString()) \u0026\u0026 blowpipeDarts \u003e 0) {\n                    output.append(blowpipeDartType).append(\" instead of \").append(config.blowpipeDartType()).append(\" blowpipe darts\\n\");\n                }\n                if (blowpipeDarts \u003c config.blowpipeDartAmounts()) {\n                    output.append(blowpipeDarts).append(\"/\").append(config.blowpipeDartAmounts()).append(\" blowpipe darts\\n\");\n                }\n                if (blowpipeScales \u003c config.blowpipeScaleAmounts()) {\n                    output.append(blowpipeScales).append(\"/\").append(config.blowpipeScaleAmounts()).append(\" blowpipe scales\\n\");\n                }\n            }\n        }\n        if(config.serpentine()) {\n            if(serpentineScales \u003d\u003d -1) {\n                output.append(\"Please check charges on your serpentine\\n\");\n            } else if (serpentineScales \u003c config.serpentineAmount()) {\n                output.append(serpentineScales).append(\"/\").append(config.serpentineAmount()).append(\" serpentine scales\\n\");\n            }\n        }\n        if(config.trident()) {\n            if(tridentCharges \u003d\u003d -1) {\n                output.append(\"Please check charges on your trident\\n\");\n            } else if(tridentCharges \u003c config.tridentAmount()) {\n                output.append(tridentCharges).append(\"/\").append(config.tridentAmount()).append(\" trident charges\\n\");\n            }\n        }\n        if(config.scythe()) {\n            if(scytheCharges \u003d\u003d -1) {\n                output.append(\"Please check charges on your scythe\\n\");\n            } else if(scytheCharges \u003c config.scytheAmount()) {\n                output.append(scytheCharges).append(\"/\").append(config.scytheAmount()).append(\" scythe charges\\n\");\n            }\n        }\n        return output.toString();\n    }\n}\n","filePath":"src\\main\\java\\com\\tobgearchecker\\gear\\HaveCharges.java"},{"fileName":"HaveRunes.java","content":"package com.tobgearchecker.gear;\n\nimport com.tobgearchecker.ToBGearCheckerConfig;\nimport com.tobgearchecker.RuneSets;\nimport com.tobgearchecker.Runes;\nimport com.tobgearchecker.Spellbook;\n\npublic class HaveRunes {\n    public boolean runePouch \u003d false;\n    public int[] runeAmounts \u003d new int[22];\n    public Spellbook spellbook \u003d Spellbook.NONE;\n\n    public HaveRunes() {\n\n    }\n\n    public String getReadableIssues(ToBGearCheckerConfig config) {\n        StringBuilder output \u003d new StringBuilder();\n        if(config.targetRuneSet() !\u003d RuneSets.NONE) {\n            if (spellbook.getId() !\u003d config.targetRuneSet().getSpellbook().getId()) {\n                output.append(\"Wrong spellbook (Need \").append(config.targetRuneSet().getSpellbook().toString()).append(\")\\n\");\n            }\n            if(!runePouch) {\n                output.append(\"No rune pouch\\n\");\n            }\n            boolean foundAny \u003d false;\n            for (int i \u003d 0; i \u003c config.targetRuneSet().getRunes().length; i++) {\n                Runes rune \u003d config.targetRuneSet().getRunes()[i];\n                if (runeAmounts[rune.getRunePouchID()] \u003c\u003d config.runeAmounts()) {\n                    output.append(foundAny ? \"\\n\" : \"\").append(runeAmounts[rune.getRunePouchID()]).append(\"/\").append(config.runeAmounts()).append(\" \").append(rune.name().substring(0, 1).toUpperCase()).append(rune.name().substring(1).toLowerCase()).append(\" runes\");\n                    foundAny \u003d true;\n                }\n            }\n        }\n        return output.toString();\n    }\n}\n","filePath":"src\\main\\java\\com\\tobgearchecker\\gear\\HaveRunes.java"},{"fileName":"Runes.java","content":"package com.tobgearchecker;\n\nimport static net.runelite.api.ItemID.AIR_RUNE;\nimport static net.runelite.api.ItemID.ASTRAL_RUNE;\nimport static net.runelite.api.ItemID.BLOOD_RUNE;\nimport static net.runelite.api.ItemID.BODY_RUNE;\nimport static net.runelite.api.ItemID.CHAOS_RUNE;\nimport static net.runelite.api.ItemID.COSMIC_RUNE;\nimport static net.runelite.api.ItemID.DEATH_RUNE;\nimport static net.runelite.api.ItemID.DUST_RUNE;\nimport static net.runelite.api.ItemID.EARTH_RUNE;\nimport static net.runelite.api.ItemID.FIRE_RUNE;\nimport static net.runelite.api.ItemID.LAVA_RUNE;\nimport static net.runelite.api.ItemID.LAW_RUNE;\nimport static net.runelite.api.ItemID.MIND_RUNE;\nimport static net.runelite.api.ItemID.MIST_RUNE;\nimport static net.runelite.api.ItemID.MUD_RUNE;\nimport static net.runelite.api.ItemID.NATURE_RUNE;\nimport static net.runelite.api.ItemID.SMOKE_RUNE;\nimport static net.runelite.api.ItemID.SOUL_RUNE;\nimport static net.runelite.api.ItemID.STEAM_RUNE;\nimport static net.runelite.api.ItemID.WATER_RUNE;\nimport static net.runelite.api.ItemID.WRATH_RUNE;\n\npublic enum Runes {\n    NONE(0, 0),\n    AIR(1, AIR_RUNE),\n    WATER(2, WATER_RUNE),\n    EARTH(3, EARTH_RUNE),\n    FIRE(4, FIRE_RUNE),\n    MIND(5, MIND_RUNE),\n    CHAOS(6, CHAOS_RUNE),\n    DEATH(7, DEATH_RUNE),\n    BLOOD(8, BLOOD_RUNE),\n    COSMIC(9, COSMIC_RUNE),\n    NATURE(10, NATURE_RUNE),\n    LAW(11, LAW_RUNE),\n    BODY(12, BODY_RUNE),\n    SOUL(13, SOUL_RUNE),\n    ASTRAL(14, ASTRAL_RUNE),\n    MIST(15, MIST_RUNE),\n    MUD(16, MUD_RUNE),\n    DUST(17, DUST_RUNE),\n    LAVA(18, LAVA_RUNE),\n    STEAM(19, STEAM_RUNE),\n    SMOKE(20, SMOKE_RUNE),\n    WRATH(21, WRATH_RUNE);\n\n    int runePouchID;\n    int itemID;\n\n    public int getRunePouchID() {\n        return runePouchID;\n    }\n\n    Runes(int runePouchID, int itemID) {\n        this.runePouchID \u003d runePouchID;\n        this.itemID \u003d itemID;\n    }\n}\n","filePath":"src\\main\\java\\com\\tobgearchecker\\Runes.java"},{"fileName":"RuneSets.java","content":"package com.tobgearchecker;\n\nimport lombok.AccessLevel;\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\n\n@AllArgsConstructor\npublic enum RuneSets {\n    NONE(\"None\",new Runes[]{},Spellbook.NONE),\n    FREEZESWATER(\"No-Kodai Freezes\",new Runes[]{Runes.WATER,Runes.SOUL,Runes.BLOOD,Runes.DEATH},Spellbook.ANCIENT),\n    FREEZES(\"Freezes\",new Runes[]{Runes.SOUL,Runes.BLOOD,Runes.DEATH},Spellbook.ANCIENT),\n    POTSHARE(\"Pot Share/Venge\",new Runes[]{Runes.MUD,Runes.DEATH,Runes.ASTRAL},Spellbook.LUNAR),\n    THRALLS(\"Thralls\",new Runes[]{Runes.FIRE,Runes.BLOOD,Runes.COSMIC},Spellbook.ARCEUUS);\n\n\n    private final String name;\n    @Getter(AccessLevel.PUBLIC)\n    private final Runes[] runes;\n    @Getter(AccessLevel.PUBLIC)\n    private final Spellbook spellbook;\n\n    public String toString() {\n        return name;\n    }\n}\n","filePath":"src\\main\\java\\com\\tobgearchecker\\RuneSets.java"},{"fileName":"Spellbook.java","content":"package com.tobgearchecker;\nimport lombok.AccessLevel;\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\n\n\n@AllArgsConstructor\npublic enum Spellbook {\n    NONE(\"None\",-1),\n    STANDARD(\"Standard\",0),\n    ANCIENT(\"Ancient\",1),\n    LUNAR(\"Lunar\",2),\n    ARCEUUS(\"Arceuus\",3);\n\n    private final String name;\n    @Getter(AccessLevel.PUBLIC)\n    private final int id;\n\n    public static Spellbook getSpellbookByID(int id) {\n        for(int i \u003d 0; i \u003c Spellbook.values().length; i++) {\n            if(Spellbook.values()[i].id \u003d\u003d id) {\n                return Spellbook.values()[i];\n            }\n        }\n        return Spellbook.NONE;\n    }\n\n    public String toString() {\n        return this.name;\n    }\n\n}\n","filePath":"src\\main\\java\\com\\tobgearchecker\\Spellbook.java"},{"fileName":"ToBGearCheckerConfig.java","content":"package com.tobgearchecker;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\n\n@ConfigGroup(\"tobgearchecker\")\npublic interface ToBGearCheckerConfig extends Config\n{\n\t@ConfigSection(\n\t\t\tname \u003d \"Spell Checks\",\n\t\t\tdescription \u003d \"Checks for the player\u0027s spellbook and runes\",\n\t\t\tposition \u003d 0\n\t)\n\tString spellSection \u003d \"spell\";\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Blowpipe Checks\",\n\t\t\tdescription \u003d \"Checks for the blowpipe\u0027s scales and darts\",\n\t\t\tposition \u003d 1\n\t)\n\tString blowpipeSection \u003d \"blowpipe\";\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Charges\",\n\t\t\tdescription \u003d \"Weapon charge checks\",\n\t\t\tposition \u003d 2\n\t)\n\tString chargeSection \u003d \"charges\";\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"targetRuneSet\",\n\t\t\tname \u003d \"Target Rune Set\",\n\t\t\tdescription \u003d \"The types of runes to aim for\",\n\t\t\tsection \u003d spellSection\n\t)\n\tdefault RuneSets targetRuneSet() {\n\t\treturn RuneSets.NONE;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"runeAmounts\",\n\t\t\tname \u003d \"Amount of Runes (Each)\",\n\t\t\tdescription \u003d \"The number of each rune to aim for\",\n\t\t\tsection\u003dspellSection\n\t)\n\tdefault int runeAmounts() {\n\t\treturn 2000;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"blowpipe\",\n\t\t\tname \u003d \"Check Blowpipe Scales/Darts\",\n\t\t\tdescription \u003d \"Whether or not to check the blowpipe\",\n\t\t\tsection\u003dblowpipeSection\n\t)\n\tdefault boolean blowpipe() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"targetScales\",\n\t\t\tname \u003d \"Target Scales\",\n\t\t\tdescription \u003d \"How many scales to aim for\",\n\t\t\tsection \u003d blowpipeSection\n\t)\n\tdefault int blowpipeScaleAmounts() {\n\t\treturn 5000;\n\t}\n\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"targetDarts\",\n\t\t\tname \u003d \"Target Darts\",\n\t\t\tdescription \u003d \"How many darts to aim for\",\n\t\t\tsection \u003d blowpipeSection\n\t)\n\tdefault int blowpipeDartAmounts() {\n\t\treturn 5000;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"dartType\",\n\t\t\tname \u003d \"Dart Type\",\n\t\t\tdescription \u003d \"Type of dart to aim for\",\n\t\t\tsection \u003d blowpipeSection\n\t)\n\tdefault DartType blowpipeDartType() {\n\t\treturn DartType.DRAGON;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"serp\",\n\t\t\tname \u003d \"Check Serp\",\n\t\t\tdescription \u003d \"Whether or not to check the serpentine helmet\",\n\t\t\tsection\u003dchargeSection\n\t)\n\tdefault boolean serpentine() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"serpScales\",\n\t\t\tname \u003d \"Serp Scales\",\n\t\t\tdescription \u003d \"The amount of scales to aim for in the serpentine helmet\",\n\t\t\tsection\u003dchargeSection\n\t)\n\tdefault int serpentineAmount() {\n\t\treturn 2000;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"trident\",\n\t\t\tname \u003d \"Check Trident/Sang\",\n\t\t\tdescription \u003d \"Whether or not to check the trident or sang staffs\",\n\t\t\tsection\u003dchargeSection\n\t)\n\tdefault boolean trident() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"tridentCharges\",\n\t\t\tname \u003d \"Trident/Sang Charges\",\n\t\t\tdescription \u003d \"The amount of charges to aim for in the trident or sang staffs\",\n\t\t\tsection\u003dchargeSection\n\t)\n\tdefault int tridentAmount() {\n\t\treturn 1000;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"scythe\",\n\t\t\tname \u003d \"Check Scythe\",\n\t\t\tdescription \u003d \"Whether or not to check the scythe\",\n\t\t\tsection\u003dchargeSection\n\t)\n\tdefault boolean scythe() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"scytheCharges\",\n\t\t\tname \u003d \"Scythe Charges\",\n\t\t\tdescription \u003d \"The amount of charges to aim for in the scythe\",\n\t\t\tsection\u003dchargeSection\n\t)\n\tdefault int scytheAmount() {\n\t\treturn 600;\n\t}\n}\n","filePath":"src\\main\\java\\com\\tobgearchecker\\ToBGearCheckerConfig.java"},{"fileName":"ToBGearCheckerOverlayPanel.java","content":"package com.tobgearchecker;\n\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\nimport net.runelite.client.ui.overlay.components.LineComponent;\nimport net.runelite.client.ui.overlay.components.TitleComponent;\n\nimport javax.inject.Inject;\nimport java.awt.*;\n\npublic class ToBGearCheckerOverlayPanel extends OverlayPanel {\n    private boolean visible \u003d false;\n\n    private boolean everythingGood;\n    private String problems;\n\n    @Inject\n    public ToBGearCheckerOverlayPanel(ToBGearCheckerPlugin plugin, boolean everythingGood, String problems) {\n        super(plugin);\n\n        this.everythingGood \u003d everythingGood;\n        this.problems \u003d problems;\n        setPriority(OverlayPriority.MED);\n        setPosition(OverlayPosition.TOP_CENTER);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n\n        panelComponent.getChildren().add(TitleComponent.builder()\n                .text(everythingGood ? \"You are ready for ToB!\" : \"ToB Setup Issues!\")\n                .color(everythingGood ? Color.GREEN : Color.RED)\n                .build());\n\n        if(!everythingGood) {\n            String[] spaced \u003d problems.split(\"\\n\");\n            for (int i \u003d 0; i \u003c spaced.length; i++) {\n                panelComponent.getChildren().add(\n                        LineComponent\n                                .builder()\n                                .left(spaced[i])\n                                .leftColor(spaced[i].contains(\"Please\") ? (i % 2 \u003d\u003d 0 ? Color.WHITE : Color.GRAY) : (i % 2 \u003d\u003d 0 ? Color.ORANGE : Color.YELLOW))\n                                .build());\n            }\n        }\n\n        return super.render(graphics);\n    }\n\n    public void SetProblems(boolean everythingGood, String problems) {\n        this.everythingGood \u003d everythingGood;\n        this.problems \u003d problems;\n    }\n\n    public void setVisible(boolean isVisible)\n    {\n        this.visible \u003d isVisible;\n    }\n\n    public boolean isVisible()\n    {\n        return this.visible;\n    }\n\n}\n","filePath":"src\\main\\java\\com\\tobgearchecker\\ToBGearCheckerOverlayPanel.java"},{"fileName":"ToBGearCheckerPlugin.java","content":"package com.tobgearchecker;\n\nimport com.tobgearchecker.gear.HaveCharges;\nimport com.tobgearchecker.gear.HaveRunes;\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\n\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.Text;\n\nimport java.util.*;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"ToB Gear Checker\",\n\tdescription \u003d \"A plugin that checks your spellbook, runes, and charges.\",\n\ttags \u003d {\"tob\",\"gear\",\"rune\",\"spellbook\",\"spells\",\"charges\"}\n)\npublic class ToBGearCheckerPlugin extends Plugin\n{\n\tprivate ToBGearCheckerOverlayPanel gearCheckerOverlayPanel \u003d null;\n\tpublic boolean leftVersinhaza \u003d true;\n\n\tpublic HaveCharges charges \u003d new HaveCharges();\n\tpublic HaveRunes runes \u003d new HaveRunes();\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ToBGearCheckerConfig config;\n\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate NavigationButton navButton;\n\n\t@Override\n\tprotected void startUp()\n\t{\n\n\t\tgearCheckerOverlayPanel \u003d new ToBGearCheckerOverlayPanel(this, true, \"\"\n\t\t);\n\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage event) {\n\t\tif(!isInVersinhaza()) {\n\t\t\treturn;\n\t\t}\n\t\tif(event.getType() !\u003d ChatMessageType.GAMEMESSAGE \u0026\u0026 event.getType() !\u003d ChatMessageType.SPAM) {\n\t\t\treturn;\n\t\t}\n\n\t\tString message \u003d Text.removeTags(event.getMessage());\n\n\t\tString[] words \u003d message.split(\" \");\n\n\t\t// For blowpipe, there will be three numbers: # of Darts, # of Scales, and % of Scales\n\t\t// ^ Exception if player is out of scales or darts.\n\t\t// For serp, there will be two numbers: # of Scales, and % of Scales\n\t\t// For scythe/trident, there will be one number: # of Charges\n\t\tArrayList\u003cInteger\u003e numbers \u003d new ArrayList\u003c\u003e();\n\n\t\tfor(String numericWord : words) {\n\t\t\tnumericWord \u003d numericWord.replaceAll(\"[^\\\\d]\",\"\");\n\t\t\tif(numericWord.length() \u003e 0) {\n\t\t\t\tnumbers.add(Integer.parseInt(numericWord));\n\t\t\t}\n \t\t}\n\n\t\tif(config.blowpipe() \u0026\u0026 message.toLowerCase().contains(\"darts\") \u0026\u0026 message.toLowerCase().contains(\"scales\")) {\n\t\t\tboolean hasDarts \u003d true;\n\t\t\tif(words[1].equalsIgnoreCase(\"none\")) {\n\t\t\t\thasDarts \u003d false;\n\t\t\t\tcharges.blowpipeDarts \u003d 0;\n\t\t\t} else {\n\t\t\t\tcharges.blowpipeDarts \u003d numbers.get(0);\n\t\t\t}\n\t\t\tcharges.blowpipeScales \u003d numbers.get(hasDarts ? 1 : 0);\n\t\t\tcharges.blowpipeDartType \u003d words[1];\n\t\t} else if(config.scythe() \u0026\u0026 message.toLowerCase().contains(\"scythe of vitur\")) {\n\t\t\tif(numbers.size() \u003d\u003d 0) {\n\t\t\t\t//NO charges, I assume (not sure what message it gives)\n\t\t\t\tcharges.scytheCharges \u003d 0;\n\t\t\t} else {\n\t\t\t\tcharges.scytheCharges \u003d numbers.get(0);\n\t\t\t}\n\t\t} else if(config.serpentine() \u0026\u0026 message.toLowerCase().contains(\"scales:\") \u0026\u0026 !message.toLowerCase().contains(\"darts\")) {\n\t\t\tcharges.serpentineScales \u003d numbers.get(0);\n\t\t} else if (config.trident() \u0026\u0026 (message.toLowerCase().contains(\"your weapon has\") || message.toLowerCase().contains(\"sanguinesti staff\")) \u0026\u0026 message.contains(\"charges\")) {\n\t\t\tcharges.tridentCharges \u003d numbers.get(0);\n\t\t}\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\tif(gearCheckerOverlayPanel.isVisible()) {\n\t\t\toverlayManager.remove(gearCheckerOverlayPanel);\n\t\t\tgearCheckerOverlayPanel.setVisible(false);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event) {\n\t\tif(!isInVersinhaza()) {\n\t\t\t//if we\u0027re just leaving\n\t\t\tif(!leftVersinhaza) {\n\t\t\t\t//Reset charges upon leaving\n\t\t\t\tcharges \u003d new HaveCharges();\n\t\t\t}\n\t\t\tleftVersinhaza \u003d true;\n\t\t}\n\t\tif(isInVersinhaza()) {\n\t\t\trunes \u003d getPlayerRunes();\n\t\t\tleftVersinhaza \u003d false;\n\t\t}\n\t\tupdateInfoBox();\n\t}\n\n\tprivate HaveRunes getPlayerRunes() {\n\t\tHaveRunes output \u003d new HaveRunes();\n\t\tint[] runePouch \u003d new int[22];\n\t\tItemContainer container \u003d client.getItemContainer(InventoryID.INVENTORY);\n\n\t\toutput.spellbook \u003d Spellbook.getSpellbookByID(client.getVarbitValue(4070));\n\n\t\trunePouch[client.getVar(Varbits.RUNE_POUCH_RUNE1)] \u003d client.getVar(Varbits.RUNE_POUCH_AMOUNT1);\n\t\trunePouch[client.getVar(Varbits.RUNE_POUCH_RUNE2)] \u003d client.getVar(Varbits.RUNE_POUCH_AMOUNT2);\n\t\trunePouch[client.getVar(Varbits.RUNE_POUCH_RUNE3)] \u003d client.getVar(Varbits.RUNE_POUCH_AMOUNT3);\n\t\toutput.runeAmounts \u003d runePouch;\n\t\toutput.runePouch \u003d false;\n\n\t\tif(container \u003d\u003d null) {\n\t\t\treturn output;\n\t\t}\n\t\tItem[] items \u003d container.getItems();\n\t\tfor (Item item : items) {\n\t\t\tif (item \u003d\u003d null) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (item.getId() \u003d\u003d ItemID.RUNE_POUCH) {\n\t\t\t\toutput.runePouch \u003d true;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tfor (Runes rune : Runes.values()) {\n\t\t\t\tif (item.getId() \u003d\u003d rune.itemID) {\n\t\t\t\t\toutput.runeAmounts[rune.runePouchID] +\u003d item.getQuantity();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\n\t@Provides\n\tToBGearCheckerConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(ToBGearCheckerConfig.class);\n\t}\n\n\tpublic boolean isInVersinhaza() {\n\t\tPlayer localPlayer \u003d client.getLocalPlayer();\n\t\tif(localPlayer \u003d\u003d null) {\n\t\t\treturn false;\n\t\t}\n\t\treturn localPlayer.getWorldLocation().getRegionID() \u003d\u003d 14642;\n\t}\n\n\tprivate void updateInfoBox() {\n\t\tif(!isInVersinhaza() \u0026\u0026 gearCheckerOverlayPanel.isVisible()) {\n\t\t\toverlayManager.remove(gearCheckerOverlayPanel);\n\t\t\tgearCheckerOverlayPanel.setVisible(false);\n\t\t} else if(isInVersinhaza() \u0026\u0026 !gearCheckerOverlayPanel.isVisible()) {\n\t\t\toverlayManager.add(gearCheckerOverlayPanel);\n\t\t\tgearCheckerOverlayPanel.setVisible(true);\n\t\t}\n\t\tif(!isInVersinhaza()) {\n\t\t\treturn;\n\t\t}\n\t\tString output;\n\t\tString runeIssues \u003d runes.getReadableIssues(config);\n\t\tString chargeIssues \u003d charges.getReadableIssues(config);\n\n\t\tif(runeIssues.equals(\"\")) {\n\t\t\toutput \u003d chargeIssues;\n\t\t} else if(chargeIssues.equals(\"\")) {\n\t\t\toutput \u003d runeIssues;\n\t\t} else {\n\t\t\toutput \u003d runeIssues + \"\\n\\n\" + chargeIssues;\n\t\t}\n\t\tif(runeIssues.length() + chargeIssues.length() \u003d\u003d 0) {\n\t\t\tgearCheckerOverlayPanel.SetProblems(true,\"\");\n\t\t} else {\n\t\t\tgearCheckerOverlayPanel.SetProblems(false,output);\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\tobgearchecker\\ToBGearCheckerPlugin.java"},{"fileName":"ToBGearCheckerTest.java","content":"package com.tobgearchecker;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ToBGearCheckerTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(ToBGearCheckerPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\tobgearchecker\\ToBGearCheckerTest.java"}]},{"commit":"e87a06b253122c41fc12e63399c7a91774df56f5","repository":"https://github.com/staytheknight/ectoplasmator-reminder.git","internalName":"ectoplasmator-reminder","files":[{"fileName":"EctoplasmatorConfig.java","content":"/*\n * Copyright (c) 2024, Elise Chevalier \u003chttps://github.com/staytheknight\u003e\n * \u003chttps://elisechevalier.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.ectoplasmator;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\n\n@ConfigGroup(\"Ectoplasmator Reminder Configs\")\npublic interface EctoplasmatorConfig extends Config\n{\n\t// Display Behaviour Section\n\t@ConfigSection(\n\t\tname \u003d \"Display Behaviour\",\n\t\tdescription \u003d \"Various in game behaviours to control when the Ectoplasmator overlay is displayed\",\n\t\tposition \u003d 0\n\t)\n\tString displayBehaviourSection \u003d \"Display Behaviour\";\n\n\t@ConfigItem(\n\t\tposition \u003d 1,\n\t\tkeyName \u003d \"hideWhileInInventory\",\n\t\tname \u003d \"Hide Overlay if in Inventory\",\n\t\tdescription \u003d \"Hides the Ectoplasmator overlay if it\u0027s in player\u0027s inventory\",\n\t\tsection \u003d displayBehaviourSection\n\t)\n\tdefault boolean hideIfInventory()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 2,\n\t\tkeyName \u003d \"displayOnlyInCombat\",\n\t\tname \u003d \"Hide Out of Combat\",\n\t\tdescription \u003d \"Display the Ectoplasmator overlay only while in combat\",\n\t\tsection \u003d displayBehaviourSection\n\t)\n\tdefault boolean onlyInCombat()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 3,\n\t\tkeyName \u003d \"hideBosses\",\n\t\tname \u003d \"Hide for Bosses\",\n\t\tdescription \u003d \"Hide the Ectoplasmator overlay for bosses\",\n\t\tsection \u003d displayBehaviourSection\n\t)\n\tdefault boolean hideForBosses()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 4,\n\t\tkeyName \u003d \"hideInWilderness\",\n\t\tname \u003d \"Hide Overlay in Wilderness\",\n\t\tdescription \u003d \"Hide the Ectoplasmator overlay while in the wilderness\",\n\t\tsection \u003d displayBehaviourSection\n\t)\n\tdefault boolean hideInWilderness()\n\t{\n\t\treturn false;\n\t}\n\n\t// Location \u0026 Scale Section\n\t@ConfigSection(\n\t\tname \u003d \"Display Location \u0026 Scale\",\n\t\tdescription \u003d \"Controls to change the size and vertical location of the Ectoplasmator overlay\",\n\t\tposition \u003d 5\n\t)\n\tString displayControls \u003d \"Display Location \u0026 Scale\";\n\n\t@ConfigItem(\n\t\tposition \u003d 6,\n\t\tkeyName \u003d \"overlayVerticalOffset\",\n\t\tname \u003d \"Overlay Vertical Offset\",\n\t\tdescription \u003d \"How high above the NPCs he overlay is displayed, this is to customize location in case it\u0027s conflicting with the position of other addons.\",\n\t\tsection \u003d displayControls\n\t)\n\tdefault int verticalOffset()\n\t{\n\t\treturn 50;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 7,\n\t\tkeyName \u003d \"overlayScale\",\n\t\tname \u003d \"Overlay Scale\",\n\t\tdescription \u003d \"Scale (size) of the Ectoplasmator overlay\",\n\t\tsection \u003d displayControls\n\t)\n\tdefault int overlayScale()\n\t{\n\t\treturn 1;\n\t}\n}\n","filePath":"src\\main\\java\\com\\ectoplasmator\\EctoplasmatorConfig.java"},{"fileName":"EctoplasmatorOverlay.java","content":"/*\n * Copyright (c) 2024, Elise Chevalier \u003chttps://github.com/staytheknight\u003e\n * \u003chttps://elisechevalier.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.ectoplasmator;\n\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Image;\nimport static java.awt.Image.SCALE_DEFAULT;\nimport java.awt.image.BufferedImage;\nimport static java.awt.image.BufferedImage.TYPE_INT_ARGB;\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.ItemID;\nimport static net.runelite.api.ItemID.*;\nimport net.runelite.api.NPC;\nimport net.runelite.api.NpcID;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Point;\nimport net.runelite.api.Varbits;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\n\nclass EctoplasmatorOverlay extends Overlay\n{\n\t@Inject\n\tprivate EctoplasmatorConfig config;\n\n\tprivate final Client client;\n\tprivate final EctoplasmatorPlugin plugin;\n\tprivate final ItemManager itemManager;\n\n\t// Display variables\n\tprivate BufferedImage image;                                // Image variable the render loop uses\n\tprivate BufferedImage baseImage;                            // Default image information used for scaling\n\tprivate boolean combatStatus;                                // Combat status of player\n\tprivate List\u003cBoolean\u003e displayChecks \u003d new ArrayList\u003c\u003e();    // Boolean array of display toggles\n\tprivate boolean displayToggle;                                // Final display toggle boolean\n\tprivate int previousDisplayScale \u003d 1;\n\n\t// Class Constructor\n\t@Inject\n\tprivate EctoplasmatorOverlay(Client client, EctoplasmatorPlugin plugin, ItemManager itemManager)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.itemManager \u003d itemManager;\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.UNDER_WIDGETS);\n\n\t\t// Setting defaults for image variables\n\t\tbaseImage \u003d itemManager.getImage(ItemID.ECTOPLASMATOR);\n\t\timage \u003d baseImage;\n\n\t\t// sets default render toggle to be true\n\t\tdisplayToggle \u003d true;\n\t}\n\n\t// This is called in the EctoplasmatorPlugin.java to change the combat status\n\tpublic void setCombatStatus(boolean combatStatus)\n\t{\n\t\tthis.combatStatus \u003d combatStatus;\n\t}\n\n\t// Casts an Image to BufferedImage\n\tpublic BufferedImage imageToBufferedImage(Image image)\n\t{\n\t\tint width \u003d image.getWidth(null);\n\t\tint height \u003d image.getHeight(null);\n\t\tBufferedImage bufferedImage \u003d new BufferedImage(width, height, TYPE_INT_ARGB);\n\t\tbufferedImage.getGraphics().drawImage(image, 0, 0, null);\n\t\treturn bufferedImage;\n\t}\n\n\t// Scales the base image to user configuration\n\tpublic void scaleImage()\n\t{\n\t\timage \u003d imageToBufferedImage(baseImage.getScaledInstance(baseImage.getWidth() * config.overlayScale(),\n\t\t\tbaseImage.getHeight() * config.overlayScale(),\n\t\t\tSCALE_DEFAULT));\n\t\tpreviousDisplayScale \u003d config.overlayScale();\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\t// Error Catch if the image is null\n\t\tif (image \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\t// Gets list of NPCS to render the image above\n\t\tList\u003cNPC\u003e targets \u003d plugin.getNPCTargets();\n\t\t// Error catch for if the npc target list is empty\n\t\tif (targets.isEmpty())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\t// Clears the boolean array on each render loop\n\t\tif (!displayChecks.isEmpty())\n\t\t{\n\t\t\tdisplayChecks.clear();\n\t\t}\n\n\t\t// Adds different display toggles based on configuration settings to the display check boolean array\n\t\tif (config.hideIfInventory())\n\t\t{\n\t\t\tdisplayChecks.add(!client.getItemContainer(InventoryID.INVENTORY).contains(ECTOPLASMATOR));\n\t\t}\n\t\tif (config.onlyInCombat())\n\t\t{\n\t\t\tdisplayChecks.add(combatStatus);\n\t\t}\n\t\tif (config.hideInWilderness())\n\t\t{\n\t\t\tdisplayChecks.add(client.getVarbitValue(Varbits.IN_WILDERNESS) !\u003d 1);\n\t\t}\n\n\t\t// Iterates through the display check boolean array to see if any of the booleans are false\n\t\t// If they are false set the master toggle to false and break\n\t\tfor (boolean b : displayChecks)\n\t\t{\n\t\t\tif (!b)\n\t\t\t{\n\t\t\t\tdisplayToggle \u003d false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdisplayToggle \u003d true;\n\t\t\t}\n\t\t}\n\n\t\t// Catch if none of the config settings are checked - default behaviour is to display\n\t\tif (displayChecks.isEmpty())\n\t\t{\n\t\t\tdisplayToggle \u003d true;\n\t\t}\n\n\t\t// If the master display toggle is true, display the overlay\n\t\tif (displayToggle)\n\t\t{\n\t\t\trenderOverlay(targets, graphics, image);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t// Iterates through all the NPC targets, and if they are a spectral creature, render the overlay\n\tprivate void renderOverlay(List\u003cNPC\u003e targets, Graphics2D graphics, BufferedImage image)\n\t{\n\t\tfor (NPC target : targets)\n\t\t{\n\t\t\tString targetName \u003d target.getName();\n\t\t\tassert targetName !\u003d null;\n\t\t\ttargetName \u003d targetName.toLowerCase();\n\n\t\t\tif (config.hideForBosses())\n\t\t\t{\n\t\t\t\tif (SpectralCreatures.SPECTRALCREATURES.contains(targetName))\n\t\t\t\t{\n\t\t\t\t\trenderTargetItem(graphics, target, image);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// Checks if the target is in the spectral creature name list\n\t\t\t\tif (SpectralCreatures.SPECTRALCREATURES.contains(targetName)\n\t\t\t\t\t|| SpectralCreatures.SPECTRALBOSSES.contains(targetName))\n\t\t\t\t{\n\t\t\t\t\trenderTargetItem(graphics, target, image);\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t}\n\n\t// Code snippet taken from:\n\t// runelite/client/plugins/slayer/TargetWeaknessOverlay.java\n\t// Altered to have a modifiable height adjustment through config\n\tprivate void renderTargetItem(Graphics2D graphics, NPC actor, BufferedImage image)\n\t{\n\t\tfinal LocalPoint actorPosition \u003d actor.getLocalLocation();\n\t\tfinal int offset \u003d actor.getLogicalHeight() + config.verticalOffset();\n\n\t\tif (actorPosition \u003d\u003d null || image \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal Point imageLoc \u003d Perspective.getCanvasImageLocation(client, actorPosition, image, offset);\n\n\t\tif (imageLoc !\u003d null)\n\t\t{\n\t\t\tOverlayUtil.renderImageLocation(graphics, imageLoc, image);\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\ectoplasmator\\EctoplasmatorOverlay.java"},{"fileName":"EctoplasmatorPlugin.java","content":"/*\n * Copyright (c) 2024, Elise Chevalier \u003chttps://github.com/staytheknight\u003e\n * \u003chttps://elisechevalier.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.ectoplasmator;\n\nimport com.google.inject.Provides;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Timer;\nimport java.util.TimerTask;\nimport javax.inject.Inject;\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.NPC;\nimport net.runelite.api.events.HitsplatApplied;\nimport net.runelite.api.events.NpcDespawned;\nimport net.runelite.api.events.NpcSpawned;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Ectoplasmator Reminder\"\n)\npublic class EctoplasmatorPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate EctoplasmatorConfig config;\n\n\t@Inject\n\tprivate EctoplasmatorOverlay overlay;\n\n\t@Inject\n\tprivate SpectralCreatures S_Creatures;\n\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate final List\u003cNPC\u003e NPCTargets \u003d new ArrayList\u003c\u003e();\n\n\t// Timer\n\tTimer outOfCombatTimer \u003d new Timer(\"Timer\");\n\t// Combat ends after 10 seconds (player is able to log)\n\tlong outOfCombatDelay \u003d 10000L; // 10000L \u003d 10 seconds\n\t// The timer task that sets the combat statue to false\n\tTimerTask outOfCombatTask \u003d null;\n\n\t// Function that will re-initialize the outOfCombatTask, as it gets canceled\n\t// from time to time which clears it\u0027s run() function\n\tpublic void outOfCombatTaskSetup()\n\t{\n\t\toutOfCombatTask \u003d new TimerTask()\n\t\t{\n\t\t\tpublic void run()\n\t\t\t{\n\t\t\t\toverlay.setCombatStatus(false);\n\t\t\t}\n\t\t};\n\t}\n\n\t// Triggers when a hitsplat is detected (on player \u0026 on NPC from the player)\n\t@Subscribe\n\tpublic void onHitsplatApplied(HitsplatApplied hitSplat) throws InterruptedException\n\t{\n\t\t// If the hit splat is applied to the player or is from the player start the combat timer\n\t\tif (hitSplat.getActor() \u003d\u003d client.getLocalPlayer() || hitSplat.getHitsplat().isMine())\n\t\t{\n\t\t\t// Cancels any previous out of combat timers\n\t\t\toutOfCombatTask.cancel();\n\t\t\toutOfCombatTimer.purge();\n\t\t\t// Re-initializes a new combat task, as .cancel() purges the run() function\n\t\t\toutOfCombatTaskSetup();\n\t\t\t// Sets the in combat statue to true\n\t\t\toverlay.setCombatStatus(true);\n\t\t\t// Start the combat timer\n\t\t\toutOfCombatTimer.schedule(outOfCombatTask, outOfCombatDelay);\n\t\t}\n\n\t}\n\n\t// When an NPC spawns, add it to the NPC targets list\n\t@Subscribe\n\tpublic void onNpcSpawned(NpcSpawned npcSpawned)\n\t{\n\t\tNPC npc \u003d npcSpawned.getNpc();\n\t\tNPCTargets.add(npc);\n\t}\n\n\t// When an NPC despawned, remove it from the NPC targets list\n\t@Subscribe\n\tpublic void onNpcDespawned(NpcDespawned npcDespawned)\n\t{\n\t\tNPC npc \u003d npcDespawned.getNpc();\n\t\tNPCTargets.remove(npc);\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tS_Creatures.FetchSpectralCreaturesLists();\n\t\toverlayManager.add(overlay);\n\t\toverlay.revalidate();\n\t\toverlay.setCombatStatus(false);\n\t\toutOfCombatTaskSetup();\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(overlay);\n\t\tNPCTargets.clear();\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged configChanged)\n\t{\n\t\tif (configChanged.getKey().equals(\"overlayScale\"))\n\t\t{\n\t\t\toverlay.scaleImage();\n\t\t}\n\t}\n\n\t@Provides\n\tEctoplasmatorConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(EctoplasmatorConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\ectoplasmator\\EctoplasmatorPlugin.java"},{"fileName":"SpectralCreatures.java","content":"/*\n * Copyright (c) 2024, Elise Chevalier \u003chttps://github.com/staytheknight\u003e\n * \u003chttps://elisechevalier.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.ectoplasmator;\n\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport okhttp3.*;\n\nimport javax.inject.Inject;\nimport java.io.*;\nimport java.util.*;\n\n@Slf4j\npublic class SpectralCreatures\n{\n\t@Inject\n\tprivate OkHttpClient okClient;\n\n\t// Ideally this would be by querying the npc type (spectral) but this can\u0027t be done with the runelite\n\t// API as it\u0027s considered cheating.\n\t// Instead, the wiki was used to make this list:\n\t// https://oldschool.runescape.wiki/w/Spectral_(attribute)\n\n\t@Getter\n\tstatic Set\u003cString\u003e SPECTRALCREATURES \u003d new HashSet\u003cString\u003e();\n\n\t@Getter\n    static Set\u003cString\u003e SPECTRALBOSSES \u003d new HashSet\u003cString\u003e();\n\n\tfinal static String S_CREATURE_URL \u003d \"https://raw.githubusercontent.com/staytheknight/ectoplasmator-reminder/refs/heads/TextFiles/src/main/resources/Text%20Files/SpectralCreatures.txt\";\n\tfinal static String S_BOSS_URL \u003d \"https://raw.githubusercontent.com/staytheknight/ectoplasmator-reminder/refs/heads/TextFiles/src/main/resources/Text%20Files/SpectralBosses.txt\";\n\n\t// Reads a URL containing a plain text list of the spectral creatures\n\t// This text file is stored on a separate branch to prevent main branch from having to be pushed\n\t// every time a new creature is added.\n\tpublic void FetchSpectralCreaturesLists() throws IOException\n\t{\n\t\tCallUrl(S_CREATURE_URL, SPECTRALCREATURES);\n\t\tCallUrl(S_BOSS_URL, SPECTRALBOSSES);\n\t}\n\n\tprotected void CallUrl(String url, Set\u003cString\u003e set)\n\t{\n\t\tRequest request \u003d new Request.Builder()\n\t\t\t\t.url(url)\n\t\t\t\t.build();\n\n\t\tokClient.newCall(request).enqueue(new Callback() {\n\t\t\t@Override\n\t\t\tpublic void onResponse(Call call, Response response) throws IOException\n\t\t\t{\n\t\t\t\tassert response.body() !\u003d null;\n\t\t\t\tString s \u003d response.body().string();\n\t\t\t\tresponse.body().close();\n\n\t\t\t\t// Sends the string to a processor to split each line into a Set\n\t\t\t\tProcessStringInput(s, set);\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void onFailure(Call call, IOException e)\n\t\t\t{\n\t\t\t\tlog.info(\"Unable to read creature file\\n\");\n\t\t\t\tlog.info(Arrays.toString(e.getStackTrace()));\n\t\t\t}\n\t\t});\n\t}\n\n\t// Processes a string of names separated by a new line character into the chosen set\n\tstatic void ProcessStringInput(String string, Set\u003cString\u003e set)\n\t{\n\t\tString[] parts \u003d string.split(\"\\n\");\n\n\t\t// NOTE: The string must be all lowercase, as the Overlay checks for lowercase string match\n\t\tfor (String s : parts)\n\t\t{\n\t\t\tset.add(s.toLowerCase(Locale.ROOT));\n\t\t}\n\t}\n}\n\n\n","filePath":"src\\main\\java\\com\\ectoplasmator\\SpectralCreatures.java"},{"fileName":"EctoplasmatorTest.java","content":"/*\n * Copyright (c) 2024, Elise Chevalier \u003chttps://github.com/staytheknight\u003e\n * \u003chttps://elisechevalier.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.ectoplasmator;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class EctoplasmatorTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(EctoplasmatorPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\ectoplasmator\\EctoplasmatorTest.java"}]},{"commit":"66b8c831a3e9070181f8dadc006eecbd9cf6640d","repository":"https://github.com/JZomDev/zom-external-plugins.git","internalName":"zom-moleman-mode","files":[{"fileName":"MolemanModeConfig.java","content":"package com.zom.molemanmode;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\nimport net.runelite.client.config.Range;\n\n@ConfigGroup(MolemanModeConfig.MOLEMAN_MODE_CONFIGGROUP)\npublic interface MolemanModeConfig extends Config\n{\n\tString MOLEMAN_MODE_CONFIGGROUP \u003d \"molemanmode\";\n\t\n\tString spentTicks \u003d \"spentTicks\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showOverlay\",\n\t\tname \u003d \"Show Overlay\",\n\t\tdescription \u003d \"Enable Overlay\",\n\t\tposition \u003d 1\n\t)\n\tdefault boolean showOverlay()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"manualToggle\",\n\t\tname \u003d \"Manual Toggle\",\n\t\tdescription \u003d \"Forces the time tick into the opposite state that its currently in\",\n\t\tposition \u003d 2\n\t)\n\tdefault boolean manualToggle()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"xpThreshold\",\n\t\tname \u003d \"XP Threshold\",\n\t\tdescription \u003d \"XP to gain before more time is added\",\n\t\tposition \u003d 3\n\t)\n\tdefault int xpThreshold()\n\t{\n\t\treturn 1000;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"timeEarnedPerThreshold\",\n\t\tname \u003d \"XP Earned per Threshold\",\n\t\tdescription \u003d \"This is the amount of time (in ticks) that the player earns to spend Above Ground\",\n\t\tposition \u003d 4\n\t)\n\tdefault int timeEarnedPerThreshold()\n\t{\n\t\treturn 100;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"timeWarning\",\n\t\tname \u003d \"Time Warning Threshold\",\n\t\tdescription \u003d \"When the players available time is below this threshold (in ticks), the available time value texts colour is changed to red.\",\n\t\tposition \u003d 5\n\t)\n\tdefault int timeWarningThreshold()\n\t{\n\t\treturn 180;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"bonusTime\",\n\t\tname \u003d \"Bonus time given\",\n\t\tdescription \u003d \"This is the amount of time (in ticks) that the player can manually give themselves when starting the plugin for the first time.\",\n\t\tposition \u003d 6\n\t)\n\t@Range(min \u003d Integer.MIN_VALUE, max \u003d Integer.MAX_VALUE)\n\tdefault int bonusTime()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigSection(\n\t\tname \u003d \"Overwrites\",\n\t\tdescription \u003d \"Overwrites Above/Below ground rules\",\n\t\tposition \u003d 20\n\t)\n\tString overwriteSection \u003d \"overwrites\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"whiteList\",\n\t\tname \u003d \"Below ground regions\",\n\t\tdescription \u003d \"Region IDs to not count down in\",\n\t\tsection \u003d overwriteSection,\n\t\tposition \u003d 1\n\t)\n\tdefault String manualSafeAreas()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"blackList\",\n\t\tname \u003d \"Above ground regions\",\n\t\tdescription \u003d \"Region IDs to count down in\",\n\t\tsection \u003d overwriteSection,\n\t\tposition \u003d 2\n\n\t)\n\tdefault String manualCountDownAreas()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigSection(\n\t\tname \u003d \"Overlays\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 40\n\t)\n\tString overlaySection \u003d \"overlays\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"formatTime\",\n\t\tname \u003d \"Format Time\",\n\t\tdescription \u003d \"Display HH:MM:SS\",\n\t\tsection \u003d overlaySection,\n\t\tposition \u003d 1\n\t)\n\tdefault boolean formatTimer()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showRegion\",\n\t\tname \u003d \"Show Region in overlay\",\n\t\tdescription \u003d \"Region IDs display\",\n\t\tsection \u003d overlaySection,\n\t\tposition \u003d 2\n\n\t)\n\tdefault boolean showRegion()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showAboveGround\",\n\t\tname \u003d \"Show above ground status\",\n\t\tdescription \u003d \"Show above ground status yes/no\",\n\t\tsection \u003d overlaySection,\n\t\tposition \u003d 3\n\n\t)\n\tdefault boolean showAboveGround()\n\t{\n\t\treturn true;\n\t}\n}\n","filePath":"src\\main\\java\\com\\zom\\molemanmode\\MolemanModeConfig.java"},{"fileName":"MolemanModeOverlay.java","content":"package com.zom.molemanmode;\n\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.time.Duration;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\nimport net.runelite.client.ui.overlay.components.LineComponent;\n\nclass MolemanModeOverlay extends OverlayPanel\n{\n\tprivate final Client client;\n\tprivate final MolemanModePlugin plugin;\n\n\t@Inject\n\tprivate MolemanModeConfig config;\n\n\t@Inject\n\tprivate MolemanModeOverlay(Client client, MolemanModePlugin plugin, MolemanModeConfig config)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t\tsetPosition(OverlayPosition.TOP_LEFT);\n\t\tsetPriority(OverlayPriority.MED);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics) {\n\n\t\tif (!plugin.isShowOverlay()) return null;\n\n\t\tboolean aboveGround \u003d plugin.isAboveGround();\n\t\tlong timeSpentAbove \u003d plugin.getTicksSpentAboveGround();\n\t\tlong timeAvailable \u003d plugin.getTimeAvailable();\n\t\tlong xpUntilMoreTime \u003d plugin.getXpUntilNextThreshold();\n\n\t\tString formattedTimeAbove \u003d plugin.isFormatTicksAsTime() ?\n\t\t\tformatTicksAsTime(timeSpentAbove) :\n\t\t\taddCommasToNumber(timeSpentAbove);\n\n\t\tString formattedTimeAvailable \u003d plugin.isFormatTicksAsTime() ?\n\t\t\tformatTicksAsTime(timeAvailable) :\n\t\t\taddCommasToNumber(timeAvailable);\n\n\t\tString xpUntilMoreTimeStr \u003d String.valueOf(xpUntilMoreTime);\n\n\n\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t.left(\"XP Needed for more time: \")\n\t\t\t.right(xpUntilMoreTimeStr)\n\t\t\t.build());\n\n\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t.left((plugin.isFormatTicksAsTime() ? \"Time\"  : \"Ticks\") + \" spent above ground: \")\n\t\t\t.right(formattedTimeAbove)\n\t\t\t.build());\n\n\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t.left((plugin.isFormatTicksAsTime() ? \"Time\"  : \"Ticks\") +\" available above ground: \")\n\t\t\t.right(formattedTimeAvailable)\n\t\t\t.rightColor(plugin.getWarningCount() \u003e timeAvailable ? Color.RED : Color.WHITE)\n\t\t\t.build());\n\n\t\tif (plugin.isShowAboveGroundState())\n\t\t{\n\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t.left(\"Above ground: \")\n\t\t\t\t.right(aboveGround ? \"Yes\" : \"No\")\n\t\t\t\t.build());\n\t\t}\n\n\n\t\tif (plugin.isShowRegion())\n\t\t{\n\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t.left(\"Region: \")\n\t\t\t\t.right(String.valueOf(client.getLocalPlayer().getWorldLocation().getRegionID()))\n\t\t\t\t.build());\n\t\t}\n\n\t\treturn super.render(graphics);\n\t}\n\n\tprivate String addCommasToNumber(long number) {\n\t\tString input \u003d Long.toString(number);\n\t\tStringBuilder output \u003d new StringBuilder();\n\t\tfor(int x \u003d input.length() - 1; x \u003e\u003d 0; x--) {\n\t\t\tint lastPosition \u003d input.length() - x - 1;\n\t\t\tif(lastPosition !\u003d 0 \u0026\u0026 lastPosition % 3 \u003d\u003d 0) {\n\t\t\t\toutput.append(\",\");\n\t\t\t}\n\t\t\toutput.append(input.charAt(x));\n\t\t}\n\t\treturn output.reverse().toString();\n\t}\n\n\tprivate String formatTicksAsTime(long number) {\n\t\tlong ticksToTime \u003d (long) (number * 0.6);\n\t\tDuration duration \u003d Duration.ofSeconds(ticksToTime);\n\n\t\tlong seconds \u003d duration.getSeconds();\n\t\tlong absSeconds \u003d Math.abs(seconds);\n\t\tString positive \u003d String.format(\n\t\t\t\"%d:%02d:%02d\",\n\t\t\tabsSeconds / 3600,\n\t\t\t(absSeconds % 3600) / 60,\n\t\t\tabsSeconds % 60);\n\t\treturn seconds \u003c 0 ? \"-\" + positive : positive;\n\n\t}\n}\n","filePath":"src\\main\\java\\com\\zom\\molemanmode\\MolemanModeOverlay.java"},{"fileName":"MolemanModePlugin.java","content":"package com.zom.molemanmode;\n\nimport com.google.inject.Provides;\nimport java.util.HashSet;\nimport java.util.List;\nimport javax.inject.Inject;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.Text;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Moleman Mode\"\n)\npublic class MolemanModePlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate MolemanModeConfig config;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate MolemanModeOverlay overlay;\n\n\tprivate final HashSet\u003cInteger\u003e tutorialIslandRegionIds \u003d new HashSet\u003cInteger\u003e();\n\tprivate final HashSet\u003cInteger\u003e whiteListRegionIds \u003d new HashSet\u003cInteger\u003e();\n\tprivate final HashSet\u003cInteger\u003e blackListRegionIds \u003d new HashSet\u003cInteger\u003e();\n\n\t@Getter\n\tprivate long timeAvailable;\n\tprivate String ticksSpentAboveGroundStr;\n\t@Getter\n\tprivate long ticksSpentAboveGround;\n\t@Getter\n\tprivate int warningCount;\n\t@Getter\n\tprivate boolean aboveGround;\n\t@Getter\n\tprivate boolean formatTicksAsTime;\n\t@Getter\n\tprivate boolean showRegion;\n\t@Getter\n\tprivate boolean showAboveGroundState;\n\t@Getter\n\tprivate long xpUntilNextThreshold;\n\t@Getter\n\tprivate boolean showOverlay;\n\n\tprivate boolean prevState;\n\tprivate boolean enabled;\n\tprivate WorldPoint lastPlayerLocation;\n\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\t// tutorial island\n\t\twhiteListRegionIds.add(12079);\n\t\twhiteListRegionIds.add(12080);\n\t\twhiteListRegionIds.add(12335);\n\t\twhiteListRegionIds.add(12336);\n\t\twhiteListRegionIds.add(12592);\n\n\t\tenabled \u003d config.manualToggle();\n\t\tshowOverlay \u003d config.showOverlay();\n\t\twarningCount \u003d config.timeWarningThreshold();\n\t\tformatTicksAsTime \u003d config.formatTimer();\n\t\tshowRegion \u003d config.showRegion();\n\t\tshowAboveGroundState \u003d config.showAboveGround();\n\n\t\taboveGround \u003d false;\n\t\tprevState \u003d false;\n\n\t\tupdateWhitelist();\n\t\tupdateBlackList();\n\n\t\toverlayManager.add(overlay);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tenabled \u003d false;\n\t\tshowOverlay \u003d false;\n\t\taboveGround \u003d false;\n\t\tprevState \u003d false;\n\t\twarningCount \u003d -1;\n\t\tformatTicksAsTime \u003d false;\n\t\tshowRegion \u003d false;\n\t\tshowAboveGroundState \u003d false;\n\t\twhiteListRegionIds.clear();\n\t\tblackListRegionIds.clear();\n\t\toverlayManager.remove(overlay);\n\t\tlastPlayerLocation \u003d null;\n\t}\n\n\t@Provides\n\tMolemanModeConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(MolemanModeConfig.class);\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick gameTick) {\n\t\tif (client.getGameState() !\u003d GameState.LOGGED_IN) return;\n\t\tif (client.getLocalPlayer() \u003d\u003d null) return;\n\n\t\tevaluateIfMoleMan();\n\n\t\tif (aboveGround) {\n\t\t\tticksSpentAboveGround++;\n\t\t}\n\n\t\tupdateTime();\n\t}\n\n\tboolean loggingIn;\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged event) {\n\t\tswitch (event.getGameState())\n\t\t{\n\t\t\tcase LOGIN_SCREEN:\n\t\t\t\taboveGround \u003d false;\n\t\t\t\tif (lastPlayerLocation !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tsaveConfig();\n\t\t\t\t}\n\t\t\t\tticksSpentAboveGround \u003d 0;\n\t\t\t\tlastPlayerLocation \u003d null;\n\t\t\t\tbreak;\n\t\t\tcase LOGGING_IN:\n\t\t\t\tloggingIn \u003d true;\n\t\t\t\tbreak;\n\t\t\tcase LOGGED_IN:\n\t\t\t\tif (loggingIn)\n\t\t\t\t{\n\t\t\t\t\tloggingIn \u003d false;\n\t\t\t\t\tonLogin();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprivate void onLogin()\n\t{\n\t\tloadConfig();\n\t\tWorldPoint newLocation \u003d client.getLocalPlayer().getWorldLocation();\n\t\tassert newLocation !\u003d null;\n\n\t\tif (lastPlayerLocation \u003d\u003d null) {\n\t\t\tlastPlayerLocation \u003d newLocation;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event) {\n\n\t\tif (MolemanModeConfig.MOLEMAN_MODE_CONFIGGROUP.equals(event.getGroup()))\n\t\t{\n\t\t\tString key \u003d event.getKey();\n\t\t\tswitch (key)\n\t\t\t{\n\t\t\t\tcase \"showOverlay\":\n\t\t\t\t\tshowOverlay \u003d config.showOverlay();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"manualToggle\":\n\t\t\t\t\tenabled \u003d config.manualToggle();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"whiteList\":\n\t\t\t\t\tupdateWhitelist();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"blackList\":\n\t\t\t\t\tupdateBlackList();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"showRegion\":\n\t\t\t\t\tshowRegion \u003d config.showRegion();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"formatTime\":\n\t\t\t\t\tformatTicksAsTime \u003d config.formatTimer();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"showAboveGround\":\n\t\t\t\t\tshowAboveGroundState \u003d config.showAboveGround();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"timeWarning\":\n\t\t\t\t\twarningCount \u003d config.timeWarningThreshold();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void saveConfig()\n\t{\n\t\tticksSpentAboveGroundStr \u003d String.valueOf(ticksSpentAboveGround);\n\t\tconfigManager.setConfiguration(MolemanModeConfig.MOLEMAN_MODE_CONFIGGROUP, MolemanModeConfig.spentTicks, ticksSpentAboveGroundStr);\n\t}\n\n\tprivate void loadConfig()\n\t{\n\t\tticksSpentAboveGroundStr \u003d configManager.getConfiguration(MolemanModeConfig.MOLEMAN_MODE_CONFIGGROUP, MolemanModeConfig.spentTicks);\n\t\tif (ticksSpentAboveGroundStr \u003d\u003d null) {\n\t\t\tticksSpentAboveGround \u003d 0;\n\t\t\tlog.info(\"Failed to load ticks above. Setting it to 0.\");\n\n\t\t} else {\n\t\t\tticksSpentAboveGround \u003d Long.parseLong(ticksSpentAboveGroundStr);\n\t\t\tlog.info(\"Loaded ticks spent above. Setting it to {}\", ticksSpentAboveGroundStr);\n\n\t\t}\n\t}\n\n\tpublic void updateTime() {\n\t\t// start with this offset, we always get this\n\t\tint earnedSeconds \u003d config.bonusTime();\n\t\tearnedSeconds +\u003d config.timeEarnedPerThreshold() * (client.getOverallExperience() / config.xpThreshold());\n\t\ttimeAvailable \u003d earnedSeconds - ticksSpentAboveGround;\n\t\txpUntilNextThreshold \u003d config.xpThreshold() - (client.getOverallExperience() % config.xpThreshold());\n\t}\n\n\tpublic void evaluateIfMoleMan() {\n\t\tfinal WorldPoint playerPos \u003d client.getLocalPlayer().getWorldLocation();\n\t\tif (playerPos \u003d\u003d null) return;\n\t\tfinal LocalPoint playerPosLocal \u003d LocalPoint.fromWorld(client, playerPos);\n\t\tif (playerPosLocal \u003d\u003d null) return;\n\n\t\tif (enabled)\n\t\t{\n\t\t\taboveGround \u003d false;\n\t\t\treturn;\n\t\t}\n\n\t\tif (blackListRegionIds.contains(client.getLocalPlayer().getWorldLocation().getRegionID()))\n\t\t{\n\t\t\taboveGround \u003d true;\n\t\t\tlog.debug(\"We are manually\" + (aboveGround ? \" above ground.\" : \" below ground.\") );\n\t\t\treturn;\n\t\t}\n\n\t\tif (whiteListRegionIds.contains(client.getLocalPlayer().getWorldLocation().getRegionID()))\n\t\t{\n\t\t\taboveGround \u003d false;\n\t\t\tlog.debug(\"We are manually\" + (aboveGround ? \" above ground.\" : \" below ground.\") );\n\t\t\treturn;\n\t\t}\n\n\t\tif (tutorialIslandRegionIds.contains(client.getLocalPlayer().getWorldLocation().getRegionID()))\n\t\t{\n\t\t\taboveGround \u003d false;\n\t\t\tlog.debug(\"We are manually\" + (aboveGround ? \" above ground.\" : \" below ground.\") );\n\t\t\treturn;\n\t\t}\n\n\t\tint cutOff \u003d 4000;\n\t\tint currentY \u003d playerPos.getY();\n\n\t\tboolean aboveCutoff \u003d cutOff \u003e currentY;\n\n\t\taboveGround \u003d aboveCutoff;\n\n\t\tboolean isEqual \u003d aboveGround \u003d\u003d prevState;\n\n\t\tif (!isEqual)  {\n\t\t\tlog.debug(\"We are\" + (aboveGround ? \" above ground.\" : \" below ground.\") );\n\t\t}\n\n\t\tprevState \u003d aboveGround;\n\t}\n\n\n\tprivate void updateWhitelist()\n\t{\n\t\twhiteListRegionIds.clear();\n\t\tList\u003cString\u003e text \u003d Text.fromCSV(config.manualSafeAreas());\n\t\tfor (String id: text)\n\t\t{\n\t\t\twhiteListRegionIds.add(Integer.valueOf(id));\n\t\t}\n\t}\n\n\tprivate void updateBlackList()\n\t{\n\t\tblackListRegionIds.clear();\n\t\tList\u003cString\u003e text \u003d Text.fromCSV(config.manualCountDownAreas());\n\t\tfor (String id: text)\n\t\t{\n\t\t\tblackListRegionIds.add(Integer.valueOf(id));\n\t\t}\n\t}\n\n\tprivate boolean tryParseInt(String intToTry) {\n\t\ttry\n\t\t{\n\t\t\tInteger.parseInt(intToTry);\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n}\n","filePath":"src\\main\\java\\com\\zom\\molemanmode\\MolemanModePlugin.java"},{"fileName":"ExamplePluginTest.java","content":"package com.zom.molemanmode;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ExamplePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(MolemanModePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\zom\\molemanmode\\ExamplePluginTest.java"}]},{"commit":"ccde3741496bd6927db70de90c545ad6e4cf1ed5","repository":"https://github.com/kuldarvakker/keybinds-overlay.git","internalName":"keybinds-overlay","files":[{"fileName":"KeybindsOverlayConfig.java","content":"package com.keybindsOverlay;\n\nimport net.runelite.client.config.*;\n\nimport java.awt.event.KeyEvent;\n\n@ConfigGroup(\"example\")\npublic interface KeybindsOverlayConfig extends Config\n{\n\t@ConfigSection(\n\t\t\tposition \u003d 1,\n\t\t\tname \u003d \"Overlay\",\n\t\t\tdescription \u003d \"Settings for the overlay.\"\n\n\t)\n\tString keybindsSection \u003d \"keybinds\";\n\n\t@ConfigSection(\n\t\t\tposition \u003d 2,\n\t\t\tname \u003d \"Order of the icons\",\n\t\t\tdescription \u003d \"Settings for the icons \\n 1 \u003c--\u003e 7\"\n\n\t)\n\tString iconOrderSection \u003d \"layout\";\n\n\t@ConfigItem(\n\t\t\tposition \u003d 0,\n\t\t\tkeyName \u003d \"combat_icon\",\n\t\t\tname \u003d \"Combat icon\",\n\t\t\tdescription \u003d \"\",\n\t\t\tsection \u003d iconOrderSection\n\t)\n\tdefault int combatLocation(){ return 1; }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"skills_icon\",\n\t\t\tname \u003d \"Skills icon\",\n\t\t\tdescription \u003d \"\",\n\t\t\tsection \u003d iconOrderSection\n\t)\n\tdefault int skillsLocation(){ return 2; }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d \"quests_icon\",\n\t\t\tname \u003d \"Quests icon\",\n\t\t\tdescription \u003d \"\",\n\t\t\tsection \u003d iconOrderSection\n\t)\n\tdefault int questsLocation(){ return 3; }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 3,\n\t\t\tkeyName \u003d \"inventory_icon\",\n\t\t\tname \u003d \"Inventory icon\",\n\t\t\tdescription \u003d \"\",\n\t\t\tsection \u003d iconOrderSection\n\t)\n\tdefault int inventoryLocation(){ return 4; }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 4,\n\t\t\tkeyName \u003d \"equipment_icon\",\n\t\t\tname \u003d \"Equipment icon\",\n\t\t\tdescription \u003d \"\",\n\t\t\tsection \u003d iconOrderSection\n\t)\n\tdefault int equipmentLocation(){ return 5; }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 5,\n\t\t\tkeyName \u003d \"prayer_icon\",\n\t\t\tname \u003d \"Prayer icon\",\n\t\t\tdescription \u003d \"\",\n\t\t\tsection \u003d iconOrderSection\n\t)\n\n\tdefault int prayerLocation(){ return 6; }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 6,\n\t\t\tkeyName \u003d \"spellbook_icon\",\n\t\t\tname \u003d \"Spellbook icon\",\n\t\t\tdescription \u003d \"\",\n\t\t\tsection \u003d iconOrderSection\n\t)\n\tdefault int spellbookLocation(){ return 7; }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 3,\n\t\t\tkeyName \u003d \"combat\",\n\t\t\tname \u003d \"Combat\",\n\t\t\tdescription \u003d \"\",\n\t\t\tsection \u003d keybindsSection\n\t)\n\tdefault Keybind combatKey(){ return new Keybind(KeyEvent.VK_F1, 0); }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 4,\n\t\t\tkeyName \u003d \"skills\",\n\t\t\tname \u003d \"Skills\",\n\t\t\tdescription \u003d \"\",\n\t\t\tsection \u003d keybindsSection\n\t)\n\tdefault Keybind skillsKey(){ return new Keybind(KeyEvent.VK_F2, 0); }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 5,\n\t\t\tkeyName \u003d \"quests\",\n\t\t\tname \u003d \"Quests\",\n\t\t\tdescription \u003d \"\",\n\t\t\tsection \u003d keybindsSection\n\t)\n\tdefault Keybind questsKey(){ return new Keybind(KeyEvent.VK_F3, 0); }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 6,\n\t\t\tkeyName \u003d \"inventory\",\n\t\t\tname \u003d \"Inventory\",\n\t\t\tdescription \u003d \"\",\n\t\t\tsection \u003d keybindsSection\n\t)\n\tdefault Keybind inventoryKey(){ return new Keybind(KeyEvent.VK_ESCAPE, 0); }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 7,\n\t\t\tkeyName \u003d \"equipment\",\n\t\t\tname \u003d \"Equipment\",\n\t\t\tdescription \u003d \"\",\n\t\t\tsection \u003d keybindsSection\n\t)\n\tdefault Keybind equipmentKey(){ return new Keybind(KeyEvent.VK_F4, 0); }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 8,\n\t\t\tkeyName \u003d \"prayers\",\n\t\t\tname \u003d \"Prayers\",\n\t\t\tdescription \u003d \"\",\n\t\t\tsection \u003d keybindsSection\n\t)\n\tdefault Keybind prayerKey(){ return new Keybind(KeyEvent.VK_F5, 0); }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 9,\n\t\t\tkeyName \u003d \"spellbook\",\n\t\t\tname \u003d \"Spellbook\",\n\t\t\tdescription \u003d \"\",\n\t\t\tsection \u003d keybindsSection\n\t)\n\tdefault Keybind spellbookKey(){ return new Keybind(KeyEvent.VK_F6, 0); }\n}\n","filePath":"src\\main\\java\\com\\keybindsOverlay\\KeybindsOverlayConfig.java"},{"fileName":"KeybindsOverlayOverlay.java","content":"package com.keybindsOverlay;\n\nimport net.runelite.client.config.Keybind;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\nimport net.runelite.client.ui.overlay.components.ComponentOrientation;\nimport net.runelite.client.ui.overlay.components.ImageComponent;\nimport net.runelite.client.ui.overlay.components.LineComponent;\nimport net.runelite.client.ui.overlay.components.PanelComponent;\n\nimport javax.inject.Inject;\nimport java.awt.*;\nimport java.awt.event.KeyEvent;\nimport java.awt.image.BufferedImage;\nimport java.lang.reflect.InvocationTargetException;\nimport java.util.*;\nimport java.util.stream.Collectors;\n\npublic class KeybindsOverlayOverlay extends Overlay {\n\n    private final KeybindsOverlayConfig config;\n    private final PanelComponent panelComponent \u003d new PanelComponent();\n\n    @Inject\n    private KeybindsOverlayOverlay(KeybindsOverlayConfig config)\n    {\n        setPosition(OverlayPosition.ABOVE_CHATBOX_RIGHT);\n        setPriority(OverlayPriority.HIGH);\n        this.config \u003d config;\n\n    }\n\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n\n        panelComponent.getChildren().clear();\n\n        panelComponent.setOrientation(ComponentOrientation.HORIZONTAL);\n        panelComponent.setGap(new Point(20, 0));\n\n\n        for (sidePanelTab tab: getOrderOfTabs())\n        {\n            if (isKeybindingDefined(getKeybinding(tab))) {\n                addTabToPanel(tab);\n            }\n        }\n\n        return panelComponent.render(graphics);\n    }\n\n    private void addLine(String text)\n    {\n        panelComponent.getChildren().add(LineComponent.builder()\n                .right(text.substring(0, Math.min(3, text.length())).toUpperCase())\n                .rightColor(Color.PINK)\n                .build());\n    }\n\n    private void addIcon(BufferedImage icon)\n    {\n        panelComponent.getChildren()\n                .add(new ImageComponent(icon));\n    }\n\n    private void addTabToPanel(sidePanelTab tab)\n    {\n        addIcon(tab.getIcon());\n        addKeybinding(getKeybinding(tab));\n    }\n\n    private Keybind getKeybinding(sidePanelTab tab) {\n        Keybind keybind;\n        try {\n            keybind \u003d (Keybind) tab.getKeybindingMethod().invoke(config);\n        } catch (IllegalAccessException | InvocationTargetException e) {\n            keybind \u003d new Keybind(KeyEvent.VK_UNDEFINED,0);\n        }\n        return keybind;\n    }\n\n    private int getLocation(sidePanelTab tab)\n    {\n        int location;\n        try {\n            location \u003d (int) tab.getLocationMethod().invoke(config);\n        } catch (IllegalAccessException | InvocationTargetException e) {\n            Random random \u003d new Random();\n            location \u003d 20 + random.nextInt(14);\n        }\n        return location;\n    }\n\n    private void addKeybinding(Keybind keybind)\n    {\n        addLine(String.valueOf(keybind));\n    }\n\n    private boolean isKeybindingDefined(Keybind keybind)\n    {\n        return keybind.getKeyCode() !\u003d KeyEvent.VK_UNDEFINED;\n    }\n\n    private Set\u003csidePanelTab\u003e getOrderOfTabs()\n    {\n        Map\u003csidePanelTab, Integer\u003e orderOfTabs \u003d new HashMap\u003c\u003e();\n        for (sidePanelTab tab: sidePanelTab.values()){\n            orderOfTabs.merge(tab, getLocation(tab), (oldVale, newValue)-\u003e newValue);\n            getLocation(tab);\n        }\n\n        return orderOfTabs.entrySet()\n                .stream()\n                .sorted((Map.Entry.comparingByValue()))\n                .collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue, (e1, e2) -\u003e e1, LinkedHashMap::new)).keySet();\n\n\n    }\n\n}\n","filePath":"src\\main\\java\\com\\keybindsOverlay\\KeybindsOverlayOverlay.java"},{"fileName":"KeybindsOverlayPlugin.java","content":"package com.keybindsOverlay;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Keybinds Overlay\"\n)\npublic class KeybindsOverlayPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate KeybindsOverlayOverlay overlay;\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\toverlayManager.add(overlay);\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\toverlayManager.remove(overlay);\n\t}\n\n\t@Provides\n\tKeybindsOverlayConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(KeybindsOverlayConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\keybindsOverlay\\KeybindsOverlayPlugin.java"},{"fileName":"sidePanelTab.java","content":"package com.keybindsOverlay;\n\nimport net.runelite.client.util.ImageUtil;\n\nimport java.awt.image.BufferedImage;\nimport java.lang.reflect.Method;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\npublic enum sidePanelTab {\n\n     COMBAT, SKILLS, QUESTS, INVENTORY, EQUIPMENT, PRAYER, SPELLBOOK;\n\n    // Not in use tabs rn.\n    // ACCOUNT_MANAGEMENT, CLAN_CHAT, EMOTE,  FRIENDS, LOGOUT, MUSIC, OPTIONS\n\n    public BufferedImage getIcon() {\n        try {\n            return ImageUtil.resizeImage(ImageUtil.loadImageResource(getClass(), \"/sidePanel/tabs/\"+ name().toLowerCase() + \".png\"), 18, 18);\n        } catch (Exception e) {\n            System.err.println(\"errorLoading image\");\n        }\n        throw new RuntimeException(\"Shouldn\u0027t be here.\");\n    }\n\n    public Method getKeybindingMethod() {\n        return getMethod(name(), \"Key\");\n    }\n\n    public Method getLocationMethod() {\n        return getMethod(name(), \"Location\");\n    }\n\n    private Method getMethod(String mainSpecifier, String secondSpecifier)\n    {\n        Method[] methods \u003d KeybindsOverlayConfig.class.getMethods();\n        Pattern pattern \u003d Pattern.compile(mainSpecifier.toLowerCase() + secondSpecifier);\n        for (Method method : methods) {\n            Matcher matcher \u003d pattern.matcher(method.getName());\n            if (matcher.lookingAt()) {\n                return method;\n            }\n        }\n        throw new RuntimeException(\"Programming error. \\n\" + mainSpecifier + secondSpecifier);\n    }\n\n}\n","filePath":"src\\main\\java\\com\\keybindsOverlay\\sidePanelTab.java"},{"fileName":"KeybindsOverlayPluginTest.java","content":"package com.keybindsOverlay;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class KeybindsOverlayPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(KeybindsOverlayPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\keybindsOverlay\\KeybindsOverlayPluginTest.java"}]},{"commit":"35d30a4ad0cab9298bb787647e444ced2bb860e3","repository":"https://github.com/geheur/rainbow-rave.git","internalName":"rainbow-rave","files":[{"fileName":"ColorTileMarker.java","content":"/*\n * Copyright (c) 2019, Jordan Atwood \u003cnightfirecat@protonmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.rainbowrave;\n\nimport java.awt.Color;\nimport javax.annotation.Nullable;\nimport lombok.Value;\nimport net.runelite.api.coords.WorldPoint;\n\n/**\n * Used to denote marked tiles and their colors.\n * Note: This is not used for serialization of ground markers; see {@link net.runelite.client.plugins.groundmarkers.GroundMarkerPoint}\n */\n@Value\nclass ColorTileMarker\n{\n\tprivate WorldPoint worldPoint;\n\t@Nullable\n\tprivate Color color;\n\t@Nullable\n\tprivate String label;\n}\n","filePath":"src\\main\\java\\com\\rainbowrave\\ColorTileMarker.java"},{"fileName":"ColorTileObject.java","content":"/*\n * Copyright (c) 2020, dekvall \u003chttps://github.com/dekvall\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.rainbowrave;\n\nimport java.awt.Color;\nimport lombok.RequiredArgsConstructor;\nimport lombok.Value;\nimport net.runelite.api.ObjectComposition;\nimport net.runelite.api.TileObject;\n\n/**\n * Used to denote marked objects and their colors.\n * Note: This is not used for serialization of object indicators; see {@link ObjectPoint}\n */\n@Value\n@RequiredArgsConstructor\nclass ColorTileObject\n{\n\tprivate final TileObject tileObject;\n\t/**\n\t * Non-transformed object composition for the object\n\t */\n\tprivate final ObjectComposition composition;\n\t/**\n\t * Name to highlight for multilocs\n\t */\n\tprivate final String name;\n\tprivate final Color color;\n}\n","filePath":"src\\main\\java\\com\\rainbowrave\\ColorTileObject.java"},{"fileName":"Curve.java","content":"/*\n * Copyright (c) 2022, Ryan Bell \u003cllaver@live.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.rainbowrave;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport net.runelite.api.Point;\n\npublic class Curve {\n\n    private final Point from;\n    private final Point to;\n    private final List\u003cPoint\u003e curve \u003d new ArrayList\u003c\u003e();\n\n    public Curve(Point from, Point to) {\n        this.from \u003d from;\n        this.to \u003d to;\n\n        // TODO hook size of Curve into config\n        for(int i \u003d 1; i \u003c\u003d 5; i++) {\n            curve.add(interpolate(from, to, (double) (i * 2) / 10));\n        }\n    }\n\n    /**\n     * Linearly interpolates between two points.\n     *\n     * @param from The starting point.\n     * @param to The ending point.\n     * @param t The interpolation progress starting at 0 and going to 1 (percent of distance between points).\n     * @return The interpolated point.\n     */\n    private Point interpolate(Point from, Point to, double t) {\n        double x \u003d from.getX() * (1 - t) + to.getX() * t;\n        double y \u003d from.getY() * (1 - t) + to.getY() * t;\n        return new Point((int) Math.round(x), (int) Math.round(y));\n    }\n\n    public Point getFrom() {\n        return from;\n    }\n\n    public Point getTo() {\n        return to;\n    }\n\n    public List\u003cPoint\u003e getCurve() {\n        return curve;\n    }\n}\n","filePath":"src\\main\\java\\com\\rainbowrave\\Curve.java"},{"fileName":"GroundItem.java","content":"/*\n * Copyright (c) 2018, Tomas Slusny \u003cslusnucky@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.rainbowrave;\n\nimport java.awt.Color;\nimport java.time.Duration;\nimport java.time.Instant;\nimport javax.annotation.Nullable;\nimport lombok.Builder;\nimport lombok.Data;\nimport static net.runelite.api.TileItem.OWNERSHIP_OTHER;\nimport net.runelite.api.coords.WorldPoint;\n\n@Data\n@Builder\nclass GroundItem\n{\n\tprivate int id;\n\tprivate int itemId;\n\tprivate String name;\n\tprivate int quantity;\n\tprivate WorldPoint location;\n\tprivate int height;\n\tprivate int haPrice;\n\tprivate int gePrice;\n\tprivate int offset;\n\tprivate boolean tradeable;\n\tprivate int ownership;\n\tprivate boolean isPrivate;\n\t@Nullable\n\tprivate Instant spawnTime;\n\tprivate boolean stackable;\n\tprivate Duration despawnTime;\n\tprivate Duration visibleTime;\n\n\t// cached values derived from config\n\tboolean highlighted;\n\tboolean hidden;\n\tColor color;\n\n\tint getHaPrice()\n\t{\n\t\treturn haPrice * quantity;\n\t}\n\n\tint getGePrice()\n\t{\n\t\treturn gePrice * quantity;\n\t}\n\n\tboolean isMine()\n\t{\n\t\treturn ownership !\u003d OWNERSHIP_OTHER;\n\t}\n\n\tvoid reset()\n\t{\n\t\thighlighted \u003d hidden \u003d false;\n\t\tcolor \u003d null;\n\t}\n}\n","filePath":"src\\main\\java\\com\\rainbowrave\\GroundItem.java"},{"fileName":"GroundMarkerPoint.java","content":"/*\n * Copyright (c) 2018, TheLonelyDev \u003chttps://github.com/TheLonelyDev\u003e\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.rainbowrave;\n\nimport java.awt.Color;\nimport javax.annotation.Nullable;\nimport lombok.EqualsAndHashCode;\nimport lombok.Value;\n\n/**\n * Used for serialization of ground marker points.\n */\n@Value\n@EqualsAndHashCode(exclude \u003d { \"color\", \"label\" })\nclass GroundMarkerPoint\n{\n\tprivate int regionId;\n\tprivate int regionX;\n\tprivate int regionY;\n\tprivate int z;\n\t@Nullable\n\tprivate Color color;\n\t@Nullable\n\tprivate String label;\n}\n","filePath":"src\\main\\java\\com\\rainbowrave\\GroundMarkerPoint.java"},{"fileName":"ItemThreshold.java","content":"/*\n * Copyright (c) 2020, dekvall \u003chttps://github.com/dekvall\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.rainbowrave;\n\nimport com.google.common.base.Strings;\nimport lombok.Value;\n\n@Value\nclass ItemThreshold\n{\n\tenum Inequality\n\t{\n\t\tLESS_THAN,\n\t\tMORE_THAN\n\t}\n\n\tprivate final String itemName;\n\tprivate final int quantity;\n\tprivate final Inequality inequality;\n\n\tstatic ItemThreshold fromConfigEntry(String entry)\n\t{\n\t\tif (Strings.isNullOrEmpty(entry))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tInequality operator \u003d Inequality.MORE_THAN;\n\t\tint qty \u003d 0;\n\n\t\tfor (int i \u003d entry.length() - 1; i \u003e\u003d 0; i--)\n\t\t{\n\t\t\tchar c \u003d entry.charAt(i);\n\t\t\tif (c \u003e\u003d \u00270\u0027 \u0026\u0026 c \u003c\u003d \u00279\u0027 || Character.isWhitespace(c))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tswitch (c)\n\t\t\t{\n\t\t\t\tcase \u0027\u003c\u0027:\n\t\t\t\t\toperator \u003d Inequality.LESS_THAN;\n\t\t\t\t\t// fallthrough\n\t\t\t\tcase \u0027\u003e\u0027:\n\t\t\t\t\tif (i + 1 \u003c entry.length())\n\t\t\t\t\t{\n\t\t\t\t\t\ttry\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tqty \u003d Integer.parseInt(entry.substring(i + 1).trim());\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch (NumberFormatException e)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tqty \u003d 0;\n\t\t\t\t\t\t\toperator \u003d Inequality.MORE_THAN;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tentry \u003d entry.substring(0, i);\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\n\t\treturn new ItemThreshold(entry.trim(), qty, operator);\n\t}\n\n\tboolean quantityHolds(int itemCount)\n\t{\n\t\tif (inequality \u003d\u003d Inequality.LESS_THAN)\n\t\t{\n\t\t\treturn itemCount \u003c quantity;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn itemCount \u003e quantity;\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\rainbowrave\\ItemThreshold.java"},{"fileName":"LootBeam.java","content":"/*\n * Copyright (c) 2021, Trevor \u003chttps://github.com/Trevor159\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.rainbowrave;\n\nimport java.awt.Color;\nimport java.util.function.Function;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.api.Animation;\nimport net.runelite.api.AnimationID;\nimport net.runelite.api.Client;\nimport net.runelite.api.JagexColor;\nimport net.runelite.api.Model;\nimport net.runelite.api.ModelData;\nimport net.runelite.api.RuneLiteObject;\nimport net.runelite.api.WorldView;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.plugins.grounditems.config.HighlightTier;\n\nclass Lootbeam\n{\n\tfinal RuneLiteObject runeLiteObject;\n\tprivate final Client client;\n\tprivate final ClientThread clientThread;\n\tprivate Color color;\n\tprivate Lootbeam.Style style;\n\tfinal HighlightTier tier;\n\n\t@RequiredArgsConstructor\n\tpublic enum Style\n\t{\n\t\tLIGHT(l -\u003e l.client.loadModel(\n\t\t\t5809,\n\t\t\tnew short[]{6371},\n\t\t\tnew short[]{JagexColor.rgbToHSL(l.color.getRGB(), 1.0d)}\n\t\t), anim(AnimationID.RAID_LIGHT_ANIMATION)),\n\t\tMODERN(l -\u003e\n\t\t{\n\t\t\tModelData md \u003d l.client.loadModelData(43330);\n\t\t\tif (md \u003d\u003d null)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tshort hsl \u003d JagexColor.rgbToHSL(l.color.getRGB(), 1.0d);\n\t\t\tint hue \u003d JagexColor.unpackHue(hsl);\n\t\t\tint sat \u003d JagexColor.unpackSaturation(hsl);\n\t\t\tint lum \u003d JagexColor.unpackLuminance(hsl);\n\t\t\tint satDelta \u003d sat \u003e 2 ? 1 : 0;\n\n\t\t\treturn md.cloneColors()\n\t\t\t\t.recolor((short) 26432, JagexColor.packHSL(hue, sat - satDelta, lum))\n\t\t\t\t.recolor((short) 26584, JagexColor.packHSL(hue, sat, Math.min(lum + 24, JagexColor.LUMINANCE_MAX)))\n\t\t\t\t.light(75 + ModelData.DEFAULT_AMBIENT, 1875 + ModelData.DEFAULT_CONTRAST,\n\t\t\t\t\tModelData.DEFAULT_X, ModelData.DEFAULT_Y, ModelData.DEFAULT_Z);\n\t\t}, anim(AnimationID.LOOTBEAM_ANIMATION)),\n\t\t;\n\n\t\tprivate final Function\u003cLootbeam, Model\u003e modelSupplier;\n\t\tprivate final Function\u003cLootbeam, Animation\u003e animationSupplier;\n\t}\n\n\tprivate static Function\u003cLootbeam, Animation\u003e anim(int id)\n\t{\n\t\treturn b -\u003e b.client.loadAnimation(id);\n\t}\n\n\tpublic Lootbeam(Client client, ClientThread clientThread, WorldPoint worldPoint, Color color, String style, HighlightTier tier)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.clientThread \u003d clientThread;\n\t\tthis.tier \u003d tier;\n\t\truneLiteObject \u003d client.createRuneLiteObject();\n\n\t\tthis.color \u003d color;\n\t\tthis.style \u003d style.equals(\"MODERN\") ? Style.MODERN : Style.LIGHT;\n\t\tupdate();\n\t\truneLiteObject.setShouldLoop(true);\n\n\t\tWorldView worldView \u003d client.getTopLevelWorldView();\n\t\tLocalPoint lp \u003d LocalPoint.fromWorld(worldView, worldPoint);\n\t\truneLiteObject.setLocation(lp, worldView.getPlane());\n\n\t\truneLiteObject.setActive(true);\n\t}\n\n\tpublic void setColor(Color color)\n\t{\n\t\tif (this.color !\u003d null \u0026\u0026 this.color.equals(color))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.color \u003d color;\n\t\tupdate();\n\t}\n\n\tpublic void setStyle(String styleString)\n\t{\n\t\tStyle style \u003d styleString.equals(\"MODERN\") ? Style.MODERN : Style.LIGHT;\n\t\tif (this.style \u003d\u003d style)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.style \u003d style;\n\t\tupdate();\n\t}\n\n\tprivate void update()\n\t{\n\t\tclientThread.invoke(() -\u003e\n\t\t{\n\t\t\tModel model \u003d style.modelSupplier.apply(this);\n\t\t\tif (model \u003d\u003d null)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tAnimation anim \u003d style.animationSupplier.apply(this);\n\n\t\t\truneLiteObject.setAnimation(anim);\n\t\t\truneLiteObject.setModel(model);\n\t\t\treturn true;\n\t\t});\n\t}\n\n\tpublic void remove()\n\t{\n\t\truneLiteObject.setActive(false);\n\t}\n\n}\n","filePath":"src\\main\\java\\com\\rainbowrave\\LootBeam.java"},{"fileName":"MemorizedNpc.java","content":"/*\n * Copyright (c) 2018, Woox \u003chttps://github.com/wooxsolo\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.rainbowrave;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport lombok.Getter;\nimport lombok.Setter;\nimport net.runelite.api.NPC;\nimport net.runelite.api.NPCComposition;\nimport net.runelite.api.WorldView;\nimport net.runelite.api.coords.WorldPoint;\n\nclass MemorizedNpc\n{\n\t@Getter\n\tprivate int npcIndex;\n\n\t@Getter\n\tprivate WorldView worldView;\n\n\t@Getter\n\tprivate String npcName;\n\n\t@Getter\n\tprivate int npcSize;\n\n\t/**\n\t * The time the npc died at, in game ticks, relative to the tick counter\n\t */\n\t@Getter\n\t@Setter\n\tprivate int diedOnTick;\n\n\t/**\n\t * The time it takes for the npc to respawn, in game ticks\n\t */\n\t@Getter\n\t@Setter\n\tprivate int respawnTime;\n\n\t@Getter\n\t@Setter\n\tprivate List\u003cWorldPoint\u003e possibleRespawnLocations;\n\n\tMemorizedNpc(NPC npc)\n\t{\n\t\tthis.npcName \u003d npc.getName();\n\t\tthis.npcIndex \u003d npc.getIndex();\n\t\tthis.worldView \u003d npc.getWorldView();\n\t\tthis.possibleRespawnLocations \u003d new ArrayList\u003c\u003e();\n\t\tthis.respawnTime \u003d -1;\n\t\tthis.diedOnTick \u003d -1;\n\n\t\tfinal NPCComposition composition \u003d npc.getTransformedComposition();\n\n\t\tif (composition !\u003d null)\n\t\t{\n\t\t\tthis.npcSize \u003d composition.getSize();\n\t\t}\n\t}\n}","filePath":"src\\main\\java\\com\\rainbowrave\\MemorizedNpc.java"},{"fileName":"NamedQuantity.java","content":"/*\n * Copyright (c) 2020, dekvall \u003chttps://github.com/dekvall\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.rainbowrave;\n\nimport lombok.RequiredArgsConstructor;\nimport lombok.Value;\n\n@Value\n@RequiredArgsConstructor\nclass NamedQuantity\n{\n\tprivate final String name;\n\tprivate final int quantity;\n\n\tNamedQuantity(GroundItem groundItem)\n\t{\n\t\tthis(groundItem.getName(), groundItem.getQuantity());\n\t}\n}\n","filePath":"src\\main\\java\\com\\rainbowrave\\NamedQuantity.java"},{"fileName":"ObjectPoint.java","content":"/*\n * Copyright (c) 2018, Tomas Slusny \u003cslusnucky@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.rainbowrave;\n\nimport java.awt.Color;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\nclass ObjectPoint\n{\n\tprivate int id \u003d -1;\n\tprivate String name;\n\tprivate int regionId;\n\tprivate int regionX;\n\tprivate int regionY;\n\tprivate int z;\n\tprivate Color color;\n}\n","filePath":"src\\main\\java\\com\\rainbowrave\\ObjectPoint.java"},{"fileName":"PerceptualGradient.java","content":"package com.rainbowrave;\n\nimport java.awt.Color;\n\n/*\nThe explanation of the gradient algorithm used can be found here.\nhttps://stackoverflow.com/questions/22607043/color-gradient-algorithm/49321304#49321304\n */\npublic class PerceptualGradient\n{\n    private static final double GAMMA \u003d .43;\n\n    private final float[] normalizedStartColor;\n    private final float[] normalizedEndColor;\n\n    private final float startColorBrightness;\n    private final float endColorBrightness;\n\n\n    PerceptualGradient(Color startColor, Color endColor) {\n        this.normalizedStartColor \u003d normalize(startColor);\n        this.normalizedEndColor \u003d normalize(endColor);\n        this.startColorBrightness \u003d (float) Math.pow(sum(this.normalizedStartColor), GAMMA);\n        this.endColorBrightness \u003d (float) Math.pow(sum(this.normalizedEndColor), GAMMA);\n    }\n\n    public Color getColorMix(float frac) {\n        float intensity \u003d (float) Math.pow(lerp(this.startColorBrightness, this.endColorBrightness, frac), (1/GAMMA));\n\n        float total \u003d 0;\n        float[] components \u003d new float[3];\n        for (int i\u003d0; i\u003ccomponents.length; i++) {\n            components[i] \u003d lerp(this.normalizedStartColor[i], this.normalizedEndColor[i], frac);\n            total +\u003d components[i];\n        }\n        if (total !\u003d 0) {\n            for (int i\u003d0; i\u003ccomponents.length; i++) {\n                components[i] \u003d components[i] * intensity / total;\n            }\n        }\n\n        for (int i\u003d0; i\u003ccomponents.length; i++) {\n            float x \u003d components[i];\n            if (x \u003c\u003d 0.0031308) {\n                components[i] \u003d (float) (12.92*x);\n            } else {\n                components[i] \u003d (float) ((1.055 * Math.pow(x , (1/2.4))) - 0.055);\n            }\n        }\n\n        return new Color(components[0], components[1], components[2]);\n    }\n\n    public float sum(float[] array) {\n        float sum \u003d 0;\n        for (float v : array)\n        {\n            sum +\u003d v;\n        }\n        return sum;\n    }\n\n    private float[] normalize(Color color) {\n        float[] components \u003d {color.getRed(), color.getGreen(), color.getBlue()};\n\n        for (int i\u003d0; i \u003c components.length; i++) {\n            double y;\n            float x \u003d components[i];\n\n            x /\u003d 255.0;\n            if (x \u003c\u003d 0.04045) {\n                y \u003d x / 12.92;\n            }\n            else {\n                y \u003d Math.pow(((x + 0.055) / 1.055), 2.4);\n            }\n            components[i] \u003d (float) y;\n        }\n\n        return components;\n    }\n\n    private float lerp(float color1, float color2, float frac)\n    {\n        return color1 * (1 - frac) + color2 * frac;\n    }\n}\n","filePath":"src\\main\\java\\com\\rainbowrave\\PerceptualGradient.java"},{"fileName":"RainbowRaveConfig.java","content":"package com.rainbowrave;\n\nimport static com.rainbowrave.RainbowRaveConfig.NpcsToHighlight.SAME;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\nimport net.runelite.client.plugins.grounditems.config.HighlightTier;\n\n@ConfigGroup(RainbowRavePlugin.GROUP)\npublic interface RainbowRaveConfig extends Config\n{\n\n\tString LOOT_BEAMS_TIER_CONFIG_KEY \u003d \"groundItemsLootbeamTier\";\n\tString LOOT_BEAMS_HIGHLIGHT_CONFIG_KEY \u003d \"groundItemsHighlightedItemsLootbeam\";\n\n\tenum NpcsToHighlight {\n\t\tNONE,\n\t\tSAME,\n\t\tALL\n\t}\n\n\tenum ObjectsToHighlight {\n\t\tNONE,\n\t\tSAME,\n\t\tALL\n\t}\n\n\tenum ItemsToTag {\n\t\tNONE,\n\t\tSAME,\n\t\tALL\n\t}\n\n\t@RequiredArgsConstructor\n\tenum GroundItemsToColor {\n\t\tNONE(HighlightTier.INSANE.ordinal() + 1),\n\t\tINSANE(HighlightTier.INSANE.ordinal()),\n\t\tHIGH(HighlightTier.HIGH.ordinal()),\n\t\tMEDIUM(HighlightTier.MEDIUM.ordinal()),\n\t\tLOW(HighlightTier.LOW.ordinal()),\n\t\tREGULAR(HighlightTier.LOW.ordinal() - 1),\n\t\tHIDDEN(HighlightTier.LOW.ordinal() - 2),\n\t\t;\n\n\t\tpublic final int highlightTierRelativeOrdinal;\n\t}\n\n\tenum GroundMarkerColorMode {\n\t\tWAVES,\n\t\tRANDOM,\n\t\tCOLOR_SYNC\n\t}\n\n\tenum MouseTrailStyle {\n\t\tNONE,\n\t\tENABLED,\n\t\tSYNCED,\n\t\tPARTYMODE,\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"theme\",\n\t\t\tname \u003d \"Theme\",\n\t\t\tdescription \u003d \"The color theme used for highlighting things.\",\n\t\t\tposition \u003d 0\n\t)\n\tdefault Theme theme()\n\t{\n\t\treturn Theme.RAINBOW;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"colorSpeed\",\n\t\tname \u003d \"Color speed (ms)\",\n\t\tdescription \u003d \"How fast the colors change (ms per full cycle)\",\n\t\tposition \u003d 0\n\t)\n\tdefault int colorSpeed()\n\t{\n\t\treturn 6000;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"syncColor\",\n\t\tname \u003d \"Sync colors\",\n\t\tdescription \u003d \"Make all highlighted things be the same color as each other.\",\n\t\tposition \u003d 1\n\t)\n\tdefault boolean syncColor()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"highlightSelf\",\n\t\tname \u003d \"Highlight self\",\n\t\tdescription \u003d \"Highlight your own player character. Uses Npc Indicator\u0027s settings.\",\n\t\tposition \u003d 2\n\t)\n\tdefault boolean highlightSelf()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"highlightOthers\",\n\t\tname \u003d \"Highlight others\",\n\t\tdescription \u003d \"Highlight other players\u0027 characters. Uses Npc Indicator\u0027s settings.\",\n\t\tposition \u003d 3\n\t)\n\tdefault boolean highlightOthers()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"whichNpcsToHighlight\",\n\t\tname \u003d \"Npc highlight\",\n\t\tdescription \u003d \"Which npcs to highlight\",\n\t\tposition \u003d 4\n\t)\n\tdefault NpcsToHighlight whichNpcsToHighlight()\n\t{\n\t\treturn SAME;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"rainbowTileMarkers\",\n\t\tname \u003d \"Rainbow tile markers\",\n\t\tdescription \u003d \"Make tile markers rainbow\",\n\t\tposition \u003d 5\n\t)\n\tdefault boolean rainbowTileMarkers()\n\t{\n\t\treturn true;\n\t}\n\n\tString OLD_TILE_COLOR_WAVES_KEY \u003d \"smoothWaves\";\n\tString GROUND_MARKER_COLOR_MODE_KEY \u003d \"groundMarkerColorMode\";\n\n\t@ConfigItem(name\u003d\n\t\t\"Tile Color Mode\",\n\t\tdescription \u003d \"\\\"waves\\\" makes tile color smooth between adjacent tiles, and \\\"color sync\\\" makes tiles with the same color in ground markers share the same color.\", keyName \u003d GROUND_MARKER_COLOR_MODE_KEY, position \u003d 6\n\t) default GroundMarkerColorMode groundMarkerColorMode() { return GroundMarkerColorMode.RANDOM; }\n\n\t@ConfigItem(name\u003d\n\t\t\"Fill tiles\",\n\t\tdescription \u003d \"Fills the tile with an opaque square.\", keyName \u003d \"fillTiles\", position \u003d 7\n\t) default boolean fillTiles() { return false; }\n\n\t@ConfigItem(name\u003d\n\t\t\"Brush Marker Tiles\",\n\t\tdescription \u003d \"Applies rainbow to tile markers from the \\\"Brush Markers\\\" plugin hub plugin. This plugin can be used to mark lots of tiles at once.\", keyName \u003d \"useBrushMarkerTiles\", position \u003d 8\n\t) default boolean useBrushMarkerTiles() { return false; }\n\n\t@ConfigItem(name\u003d\n\t\t\"Object highlight\",\n\t\tdescription \u003d \"Which objects to highlight.\", keyName \u003d \"whichObjectsToHighlight\", position \u003d 9\n\t) default ObjectsToHighlight whichObjectsToHighlight() { return ObjectsToHighlight.SAME; }\n\n\t@ConfigItem(name\u003d\n\t\t\"Inventory tags\",\n\t\tdescription \u003d \"Which items to tag.\", keyName \u003d \"whichItemsToInventoryTag\", position \u003d 10\n\t) default ItemsToTag whichItemsToInventoryTag() { return ItemsToTag.SAME; }\n\n\t@ConfigItem(name \u003d\n\t\t\"Highlight Ground Items\",\n\t\tdescription \u003d \"Applies rainbow to highlighted items.\", keyName \u003d \"colorHighlightedGroundItems\", position \u003d 11\n\t) default boolean colorHighlightedGroundItems() { return true; }\n\n\t@ConfigItem(name \u003d\n\t\t\"Ground Items\",\n\t\tdescription \u003d \"Items in this tier and above are colored.\", keyName \u003d \"whichGroundItemsToColor\", position \u003d 12\n\t) default GroundItemsToColor whichGroundItemsToColor() { return GroundItemsToColor.REGULAR; }\n\n\t@ConfigItem(name \u003d\n\t\t\"Scythe swings\",\n\t\tdescription \u003d \"Recolor scythe swings. Swing trails may not return to normal after disabling.\", keyName \u003d \"recolorScytheSwings\", position \u003d 13\n\t) default boolean recolorScytheSwings() { return false; }\n\n\tString RECOLOR_LOOT_BEAMS_KEY \u003d \"recolorLootBeams\";\n\t@ConfigItem(\n\t\tkeyName \u003d RECOLOR_LOOT_BEAMS_KEY,\n\t\tname \u003d \"Loot beams\",\n\t\tdescription \u003d \"Recolor loot beams.\",\n\t\tposition \u003d 14\n\t)\n\tdefault boolean recolorLootBeams()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"whichMouseTrailStyle\",\n\t\t\tname \u003d \"Mouse Trail Style\",\n\t\t\tdescription \u003d \"Which trail style to use.\",\n\t\t\tposition \u003d 16\n\t)\n\tdefault MouseTrailStyle whichMouseTrailStyle()\n\t{\n\t\treturn MouseTrailStyle.NONE;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d LOOT_BEAMS_TIER_CONFIG_KEY,\n\t\tname \u003d \"Lootbeam tier\",\n\t\tdescription \u003d \"The lowest tier of which lootbeams should be shown for. You should modify this setting instead of the identical setting in Ground items, if you are using rainbow rave to recolor loot beams.\",\n\t\tposition \u003d 101\n\t)\n\tdefault HighlightTier getGroundItemsLootbeamTier() {\n\t\treturn HighlightTier.OFF; // Needs a value to prevent NPE in some situations.\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d LOOT_BEAMS_TIER_CONFIG_KEY,\n\t\tname \u003d \"\",\n\t\tdescription \u003d \"\",\n\t\thidden \u003d true\n\t)\n\tdefault void setGroundItemsLootbeamTier(HighlightTier tier) {\n\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d LOOT_BEAMS_HIGHLIGHT_CONFIG_KEY,\n\t\tname \u003d \"Highlighted item lootbeams\",\n\t\tdescription \u003d \"Show lootbeams for highlighted items. You should modify this setting instead of the identical setting in Ground items, if you are using rainbow rave to recolor loot beams.\",\n\t\tposition \u003d 100\n\t)\n\tdefault boolean getGroundItemsHighlightedItemsLootbeam() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d LOOT_BEAMS_HIGHLIGHT_CONFIG_KEY,\n\t\tname \u003d \"\",\n\t\tdescription \u003d \"\",\n\t\thidden \u003d true\n\t)\n\tdefault void setGroundItemsHighlightedItemsLootbeam(boolean lootbeamsForHighlightedItems) {\n\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"recolorDukeLights\",\n\t\tname \u003d \"Duke rave\",\n\t\tdescription \u003d \"Recolor the lights at duke. Duke lights may not return to normal after disabling.\",\n\t\tposition \u003d 110\n\t)\n\tdefault boolean dukeRave()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigSection(name \u003d \"Tile Indicators\", description \u003d \"Tile Indicators\", position \u003d 150)\n\tString tileIndicatorsSection \u003d \"tileIndicatorsSection\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"recolorTileIndicators\",\n\t\tname \u003d \"Tile indicators\",\n\t\tdescription \u003d \"Recolor the tiles from the tile indicators plugin.\",\n\t\tsection \u003d tileIndicatorsSection,\n\t\tposition \u003d 150\n\t)\n\tdefault boolean recolorTileIndicators() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"recolorTileIndicatorFill\",\n\t\tname \u003d \"Also recolor fill\",\n\t\tdescription \u003d \"Recolor the fill color of tile indicators as well\",\n\t\tsection \u003d tileIndicatorsSection,\n\t\tposition \u003d 151\n\t)\n\tdefault boolean recolorTileIndicatorFill() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"preferCornerTileIndicatorsConfig\",\n\t\tname \u003d \"Prefer \\\"Corner tile indicators\\\"\",\n\t\tdescription \u003d \"Prefers to use the config from my \\\"Corner tile indicators\\\" plugin, if it is installed, including true tile fadeout and corner-only highlight.\",\n\t\tsection \u003d tileIndicatorsSection,\n\t\tposition \u003d 152\n\t)\n\tdefault boolean preferCornerTileIndicatorsConfig() {\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\com\\rainbowrave\\RainbowRaveConfig.java"},{"fileName":"RainbowRaveGroundItemInputListener.java","content":"/*\n * Copyright (c) 2018, Seth \u003chttps://github.com/sethtroll\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.rainbowrave;\n\nimport java.awt.Point;\nimport java.awt.event.KeyEvent;\nimport java.awt.event.MouseEvent;\nimport java.time.Duration;\nimport java.time.Instant;\nimport javax.inject.Inject;\nimport javax.swing.SwingUtilities;\nimport net.runelite.client.input.KeyListener;\nimport net.runelite.client.input.MouseAdapter;\nimport net.runelite.client.plugins.grounditems.GroundItemsConfig;\n\npublic class RainbowRaveGroundItemInputListener extends MouseAdapter implements KeyListener\n{\n\tprivate static final int HOTKEY \u003d KeyEvent.VK_ALT;\n\n\tprivate Instant lastPress;\n\n\t@Inject\n\tprivate RainbowRaveGroundItemsPlugin plugin;\n\n\t@Inject\n\tprivate GroundItemsConfig config;\n\n\t@Override\n\tpublic void keyTyped(KeyEvent e)\n\t{\n\n\t}\n\n\t@Override\n\tpublic void keyPressed(KeyEvent e)\n\t{\n\t\tif (e.getKeyCode() \u003d\u003d HOTKEY)\n\t\t{\n\t\t\tif (plugin.isHideAll())\n\t\t\t{\n\t\t\t\tplugin.setHideAll(false);\n\t\t\t\tplugin.setHotKeyPressed(true);\n\t\t\t\tlastPress \u003d null;\n\t\t\t}\n\t\t\telse if (lastPress !\u003d null \u0026\u0026 !plugin.isHotKeyPressed() \u0026\u0026 config.doubleTapDelay() \u003e 0 \u0026\u0026 Duration.between(lastPress, Instant.now()).compareTo(Duration.ofMillis(config.doubleTapDelay())) \u003c 0)\n\t\t\t{\n\t\t\t\tplugin.setHideAll(true);\n\t\t\t\tlastPress \u003d null;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tplugin.setHotKeyPressed(true);\n\t\t\t\tlastPress \u003d Instant.now();\n\t\t\t}\n\t\t}\n\t}\n\n\t@Override\n\tpublic void keyReleased(KeyEvent e)\n\t{\n\t\tif (e.getKeyCode() \u003d\u003d HOTKEY)\n\t\t{\n\t\t\tplugin.setHotKeyPressed(false);\n\t\t\tplugin.setTextBoxBounds(null);\n\t\t\tplugin.setHiddenBoxBounds(null);\n\t\t\tplugin.setHighlightBoxBounds(null);\n\t\t}\n\t}\n\n\t@Override\n\tpublic MouseEvent mousePressed(MouseEvent e)\n\t{\n\t\tfinal Point mousePos \u003d e.getPoint();\n\n\t\tif (plugin.isHotKeyPressed())\n\t\t{\n\t\t\tif (SwingUtilities.isLeftMouseButton(e))\n\t\t\t{\n\t\t\t\t// Process both click boxes for hidden and highlighted items\n\t\t\t\tif (plugin.getHiddenBoxBounds() !\u003d null \u0026\u0026 plugin.getHiddenBoxBounds().getKey().contains(mousePos))\n\t\t\t\t{\n\t\t\t\t\treturn e;\n\t\t\t\t}\n\n\t\t\t\tif (plugin.getHighlightBoxBounds() !\u003d null \u0026\u0026 plugin.getHighlightBoxBounds().getKey().contains(mousePos))\n\t\t\t\t{\n\t\t\t\t\treturn e;\n\t\t\t\t}\n\n\t\t\t\t// There is one name click box for left click and one for right click\n\t\t\t\tif (plugin.getTextBoxBounds() !\u003d null \u0026\u0026 plugin.getTextBoxBounds().getKey().contains(mousePos))\n\t\t\t\t{\n\t\t\t\t\treturn e;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (SwingUtilities.isRightMouseButton(e))\n\t\t\t{\n\t\t\t\tif (plugin.getTextBoxBounds() !\u003d null \u0026\u0026 plugin.getTextBoxBounds().getKey().contains(mousePos))\n\t\t\t\t{\n\t\t\t\t\treturn e;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn e;\n\t}\n}\n\n","filePath":"src\\main\\java\\com\\rainbowrave\\RainbowRaveGroundItemInputListener.java"},{"fileName":"RainbowRaveGroundItemsOverlay.java","content":"/*\n * Copyright (c) 2017, Aria \u003caria@ar1as.space\u003e\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.rainbowrave;\n\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.FontMetrics;\nimport java.awt.Graphics2D;\nimport java.awt.Polygon;\nimport java.awt.Rectangle;\nimport java.time.Instant;\nimport java.util.AbstractMap.SimpleEntry;\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Optional;\nimport javax.inject.Inject;\nimport net.runelite.api.*;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.plugins.grounditems.GroundItemsConfig;\nimport net.runelite.client.plugins.grounditems.config.DespawnTimerMode;\nimport static net.runelite.client.plugins.grounditems.config.ItemHighlightMode.MENU;\nimport static net.runelite.client.plugins.grounditems.config.ItemHighlightMode.NONE;\nimport net.runelite.client.plugins.grounditems.config.OwnershipFilterMode;\nimport net.runelite.client.plugins.grounditems.config.PriceDisplayMode;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\nimport net.runelite.client.ui.overlay.components.BackgroundComponent;\nimport net.runelite.client.ui.overlay.components.ProgressPieComponent;\nimport net.runelite.client.ui.overlay.components.TextComponent;\nimport net.runelite.client.util.QuantityFormatter;\n\npublic class RainbowRaveGroundItemsOverlay extends Overlay\n{\n\tprivate static final int MAX_DISTANCE \u003d 2500;\n\t// We must offset the text on the z-axis such that\n\t// it doesn\u0027t obscure the ground items below it.\n\tprivate static final int OFFSET_Z \u003d 20;\n\t// The 15 pixel gap between each drawn ground item.\n\tprivate static final int STRING_GAP \u003d 15;\n\t// Size of the hidden/highlight boxes\n\tprivate static final int RECTANGLE_SIZE \u003d 8;\n\tprivate static final Color PUBLIC_TIMER_COLOR \u003d Color.YELLOW;\n\tprivate static final Color PRIVATE_TIMER_COLOR \u003d Color.GREEN;\n\tprivate static final int TIMER_OVERLAY_DIAMETER \u003d 10;\n\n\tprivate final Client client;\n\tprivate final RainbowRaveGroundItemsPlugin plugin;\n\tprivate final GroundItemsConfig config;\n\tprivate final StringBuilder itemStringBuilder \u003d new StringBuilder();\n\tprivate final BackgroundComponent backgroundComponent \u003d new BackgroundComponent();\n\tprivate final TextComponent textComponent \u003d new TextComponent();\n\tprivate final ProgressPieComponent progressPieComponent \u003d new ProgressPieComponent();\n\tprivate final Map\u003cWorldPoint, Integer\u003e offsetMap \u003d new HashMap\u003c\u003e();\n\n\t@Inject\n\tpublic RainbowRaveGroundItemsOverlay(Client client, RainbowRaveGroundItemsPlugin plugin, GroundItemsConfig config)\n\t{\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\n\t\tthis.client \u003d client;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tfinal boolean dontShowOverlay \u003d (config.itemHighlightMode() \u003d\u003d MENU || config.itemHighlightMode() \u003d\u003d NONE\n\t\t\t|| plugin.isHideAll()) \u0026\u0026 !plugin.isHotKeyPressed();\n\n\t\tif (dontShowOverlay \u0026\u0026 !config.highlightTiles())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tfinal FontMetrics fm \u003d graphics.getFontMetrics();\n\t\tfinal Player player \u003d client.getLocalPlayer();\n\n\t\tif (player \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\toffsetMap.clear();\n\t\tfinal LocalPoint localLocation \u003d player.getLocalLocation();\n\t\tfinal Point mousePos \u003d client.getMouseCanvasPosition();\n\t\tCollection\u003cGroundItem\u003e groundItemList \u003d plugin.getCollectedGroundItems().values();\n\t\tGroundItem topGroundItem \u003d null;\n\n\t\tif (plugin.isHotKeyPressed())\n\t\t{\n\t\t\t// Make copy of ground items because we are going to modify them here, and the array list supports our\n\t\t\t// desired behaviour here\n\t\t\tgroundItemList \u003d new ArrayList\u003c\u003e(groundItemList);\n\t\t\tfinal java.awt.Point awtMousePos \u003d new java.awt.Point(mousePos.getX(), mousePos.getY());\n\t\t\tGroundItem groundItem \u003d null;\n\n\t\t\tfor (GroundItem item : groundItemList)\n\t\t\t{\n\t\t\t\titem.setOffset(offsetMap.compute(item.getLocation(), (k, v) -\u003e v !\u003d null ? v + 1 : 0));\n\n\t\t\t\tif (groundItem !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (plugin.getTextBoxBounds() !\u003d null\n\t\t\t\t\t\u0026\u0026 item.equals(plugin.getTextBoxBounds().getValue())\n\t\t\t\t\t\u0026\u0026 plugin.getTextBoxBounds().getKey().contains(awtMousePos))\n\t\t\t\t{\n\t\t\t\t\tgroundItem \u003d item;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (plugin.getHiddenBoxBounds() !\u003d null\n\t\t\t\t\t\u0026\u0026 item.equals(plugin.getHiddenBoxBounds().getValue())\n\t\t\t\t\t\u0026\u0026 plugin.getHiddenBoxBounds().getKey().contains(awtMousePos))\n\t\t\t\t{\n\t\t\t\t\tgroundItem \u003d item;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (plugin.getHighlightBoxBounds() !\u003d null\n\t\t\t\t\t\u0026\u0026 item.equals(plugin.getHighlightBoxBounds().getValue())\n\t\t\t\t\t\u0026\u0026 plugin.getHighlightBoxBounds().getKey().contains(awtMousePos))\n\t\t\t\t{\n\t\t\t\t\tgroundItem \u003d item;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (groundItem !\u003d null)\n\t\t\t{\n\t\t\t\tgroundItemList.remove(groundItem);\n\t\t\t\tgroundItemList.add(groundItem);\n\t\t\t\ttopGroundItem \u003d groundItem;\n\t\t\t}\n\t\t}\n\n\t\tplugin.setTextBoxBounds(null);\n\t\tplugin.setHiddenBoxBounds(null);\n\t\tplugin.setHighlightBoxBounds(null);\n\n\t\tfinal DespawnTimerMode groundItemTimers \u003d config.groundItemTimers();\n\t\tfinal boolean outline \u003d config.textOutline();\n\t\tfinal OwnershipFilterMode ownershipFilterMode \u003d config.ownershipFilterMode();\n\t\tfinal int accountType \u003d client.getVarbitValue(Varbits.ACCOUNT_TYPE);\n\t\tfinal WorldView worldView \u003d client.getTopLevelWorldView();\n\n\t\tfor (GroundItem item : groundItemList)\n\t\t{\n\t\t\tfinal LocalPoint groundPoint \u003d LocalPoint.fromWorld(worldView, item.getLocation());\n\n\t\t\tif (groundPoint \u003d\u003d null || localLocation.distanceTo(groundPoint) \u003e MAX_DISTANCE\n\t\t\t\t|| !plugin.shouldDisplayItem(ownershipFilterMode, item.getOwnership(), accountType))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfinal Optional\u003cColor\u003e highlighted \u003d plugin.getHighlighted(new NamedQuantity(item), item.getGePrice(), item.getHaPrice());\n\t\t\tfinal Optional\u003cColor\u003e hidden \u003d plugin.getHidden(new NamedQuantity(item), item.getGePrice(), item.getHaPrice(), item.isTradeable());\n\t\t\tif (highlighted \u003d\u003d null \u0026\u0026 !plugin.isHotKeyPressed())\n\t\t\t{\n\t\t\t\t// Do not display hidden items\n\t\t\t\tif (hidden !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Do not display non-highlighted items\n\t\t\t\tif (config.showHighlightedOnly())\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfinal Optional\u003cColor\u003e groundItemColor \u003d plugin.getItemColor(highlighted, hidden, new NamedQuantity(item));\n\n\t\t\tif (groundItemColor \u003d\u003d null) continue;\n\t\t\tif (!groundItemColor.isPresent()) {\n\t\t\t\tif (!plugin.isHotKeyPressed()) offsetMap.compute(item.getLocation(), (k, v) -\u003e v !\u003d null ? v + 1 : 0);\n\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tColor color \u003d groundItemColor.get();\n\n\t\t\tif (config.highlightTiles())\n\t\t\t{\n\t\t\t\tfinal Polygon poly \u003d Perspective.getCanvasTilePoly(client, groundPoint, item.getHeight());\n\n\t\t\t\tif (poly !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tOverlayUtil.renderPolygon(graphics, poly, color);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (dontShowOverlay)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\titemStringBuilder.append(item.getName());\n\n\t\t\tif (item.getQuantity() \u003e 1)\n\t\t\t{\n\t\t\t\titemStringBuilder.append(\" (\")\n\t\t\t\t\t.append(QuantityFormatter.quantityToStackSize(item.getQuantity()))\n\t\t\t\t\t.append(\u0027)\u0027);\n\t\t\t}\n\n\t\t\tif (item.getId() !\u003d ItemID.COINS_995)\n\t\t\t{\n\t\t\t\tPriceDisplayMode displayMode \u003d config.priceDisplayMode();\n\t\t\t\tif (displayMode \u003d\u003d PriceDisplayMode.BOTH)\n\t\t\t\t{\n\t\t\t\t\tif (item.getGePrice() \u003e 0)\n\t\t\t\t\t{\n\t\t\t\t\t\titemStringBuilder.append(\" (GE: \")\n\t\t\t\t\t\t\t.append(QuantityFormatter.quantityToStackSize(item.getGePrice()))\n\t\t\t\t\t\t\t.append(\" gp)\");\n\t\t\t\t\t}\n\n\t\t\t\t\tif (item.getHaPrice() \u003e 0)\n\t\t\t\t\t{\n\t\t\t\t\t\titemStringBuilder.append(\" (HA: \")\n\t\t\t\t\t\t\t.append(QuantityFormatter.quantityToStackSize(item.getHaPrice()))\n\t\t\t\t\t\t\t.append(\" gp)\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (displayMode !\u003d PriceDisplayMode.OFF)\n\t\t\t\t{\n\t\t\t\t\tfinal int price \u003d displayMode \u003d\u003d PriceDisplayMode.GE\n\t\t\t\t\t\t? item.getGePrice()\n\t\t\t\t\t\t: item.getHaPrice();\n\n\t\t\t\t\tif (price \u003e 0)\n\t\t\t\t\t{\n\t\t\t\t\t\titemStringBuilder\n\t\t\t\t\t\t\t.append(\" (\")\n\t\t\t\t\t\t\t.append(QuantityFormatter.quantityToStackSize(price))\n\t\t\t\t\t\t\t.append(\" gp)\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfinal String itemString \u003d itemStringBuilder.toString();\n\t\t\titemStringBuilder.setLength(0);\n\n\t\t\tfinal Point textPoint \u003d Perspective.getCanvasTextLocation(client,\n\t\t\t\tgraphics,\n\t\t\t\tgroundPoint,\n\t\t\t\titemString,\n\t\t\t\titem.getHeight() + OFFSET_Z);\n\n\t\t\tif (textPoint \u003d\u003d null)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfinal int offset \u003d plugin.isHotKeyPressed()\n\t\t\t\t? item.getOffset()\n\t\t\t\t: offsetMap.compute(item.getLocation(), (k, v) -\u003e v !\u003d null ? v + 1 : 0);\n\n\t\t\tfinal int textX \u003d textPoint.getX();\n\t\t\tfinal int textY \u003d textPoint.getY() - (STRING_GAP * offset);\n\n\t\t\tif (plugin.isHotKeyPressed())\n\t\t\t{\n\t\t\t\tfinal int stringWidth \u003d fm.stringWidth(itemString);\n\t\t\t\tfinal int stringHeight \u003d fm.getHeight();\n\n\t\t\t\t// Item bounds\n\t\t\t\tint x \u003d textX - 2;\n\t\t\t\tint y \u003d textY - stringHeight - 2;\n\t\t\t\tint width \u003d stringWidth + 4;\n\t\t\t\tint height \u003d stringHeight + 4;\n\t\t\t\tfinal Rectangle itemBounds \u003d new Rectangle(x, y, width, height);\n\n\t\t\t\t// Hidden box\n\t\t\t\tx +\u003d width + 2;\n\t\t\t\ty \u003d textY - (RECTANGLE_SIZE + stringHeight) / 2;\n\t\t\t\twidth \u003d height \u003d RECTANGLE_SIZE;\n\t\t\t\tfinal Rectangle itemHiddenBox \u003d new Rectangle(x, y, width, height);\n\n\t\t\t\t// Highlight box\n\t\t\t\tx +\u003d width + 2;\n\t\t\t\tfinal Rectangle itemHighlightBox \u003d new Rectangle(x, y, width, height);\n\n\t\t\t\tboolean mouseInBox \u003d itemBounds.contains(mousePos.getX(), mousePos.getY());\n\t\t\t\tboolean mouseInHiddenBox \u003d itemHiddenBox.contains(mousePos.getX(), mousePos.getY());\n\t\t\t\tboolean mouseInHighlightBox \u003d itemHighlightBox.contains(mousePos.getX(), mousePos.getY());\n\n\t\t\t\tif (mouseInBox)\n\t\t\t\t{\n\t\t\t\t\tplugin.setTextBoxBounds(new SimpleEntry\u003c\u003e(itemBounds, item));\n\t\t\t\t}\n\t\t\t\telse if (mouseInHiddenBox)\n\t\t\t\t{\n\t\t\t\t\tplugin.setHiddenBoxBounds(new SimpleEntry\u003c\u003e(itemHiddenBox, item));\n\n\t\t\t\t}\n\t\t\t\telse if (mouseInHighlightBox)\n\t\t\t\t{\n\t\t\t\t\tplugin.setHighlightBoxBounds(new SimpleEntry\u003c\u003e(itemHighlightBox, item));\n\t\t\t\t}\n\n\t\t\t\tboolean topItem \u003d topGroundItem \u003d\u003d item;\n\n\t\t\t\t// Draw background if hovering\n\t\t\t\tif (topItem \u0026\u0026 (mouseInBox || mouseInHiddenBox || mouseInHighlightBox))\n\t\t\t\t{\n\t\t\t\t\tbackgroundComponent.setRectangle(itemBounds);\n//\t\t\t\t\tbackgroundComponent.render(graphics);\n\t\t\t\t}\n\n\t\t\t\t// Draw hidden box\n//\t\t\t\tdrawRectangle(graphics, itemHiddenBox, topItem \u0026\u0026 mouseInHiddenBox ? Color.RED : color, hidden !\u003d null, true);\n\n\t\t\t\t// Draw highlight box\n//\t\t\t\tdrawRectangle(graphics, itemHighlightBox, topItem \u0026\u0026 mouseInHighlightBox ? Color.GREEN : color, highlighted !\u003d null, false);\n\t\t\t}\n\n\t\t\t// When the hotkey is pressed the hidden/highlight boxes are drawn to the right of the text,\n\t\t\t// so always draw the pie since it is on the left hand side.\n\t\t\tif (groundItemTimers \u003d\u003d DespawnTimerMode.PIE || plugin.isHotKeyPressed())\n\t\t\t{\n\t\t\t\tdrawTimerPieOverlay(graphics, textX, textY, item, color);\n\t\t\t}\n\t\t\telse if (groundItemTimers \u003d\u003d DespawnTimerMode.SECONDS || groundItemTimers \u003d\u003d DespawnTimerMode.TICKS)\n\t\t\t{\n\t\t\t\tInstant despawnTime \u003d calculateDespawnTime(item);\n\t\t\t\tColor timerColor \u003d color;\n\t\t\t\tif (despawnTime !\u003d null \u0026\u0026 timerColor !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tlong despawnTimeMillis \u003d despawnTime.toEpochMilli() - Instant.now().toEpochMilli();\n\t\t\t\t\tfinal String timerText;\n\t\t\t\t\tif (groundItemTimers \u003d\u003d DespawnTimerMode.SECONDS)\n\t\t\t\t\t{\n\t\t\t\t\t\ttimerText \u003d String.format(\" - %.1f\", despawnTimeMillis / 1000f);\n\t\t\t\t\t}\n\t\t\t\t\telse // TICKS\n\t\t\t\t\t{\n\t\t\t\t\t\ttimerText \u003d String.format(\" - %d\", despawnTimeMillis / 600);\n\t\t\t\t\t}\n\n\t\t\t\t\t// The timer text is drawn separately to have its own color, and is intentionally not included\n\t\t\t\t\t// in the getCanvasTextLocation() call because the timer text can change per frame and we do not\n\t\t\t\t\t// use a monospaced font, which causes the text location on screen to jump around slightly each frame.\n\t\t\t\t\ttextComponent.setText(timerText);\n\t\t\t\t\ttextComponent.setColor(timerColor);\n\t\t\t\t\ttextComponent.setOutline(outline);\n\t\t\t\t\ttextComponent.setPosition(new java.awt.Point(textX + fm.stringWidth(itemString), textY));\n\t\t\t\t\ttextComponent.render(graphics);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttextComponent.setText(itemString);\n\t\t\ttextComponent.setColor(color);\n\t\t\ttextComponent.setOutline(outline);\n\t\t\ttextComponent.setPosition(new java.awt.Point(textX, textY));\n\t\t\ttextComponent.render(graphics);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate Instant calculateDespawnTime(GroundItem groundItem)\n\t{\n\t\tInstant spawnTime \u003d groundItem.getSpawnTime();\n\t\tif (spawnTime \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tInstant despawnTime \u003d spawnTime.plus(groundItem.getDespawnTime());\n\t\tif (Instant.now().isAfter(despawnTime))\n\t\t{\n\t\t\t// that\u0027s weird\n\t\t\treturn null;\n\t\t}\n\n\t\treturn despawnTime;\n\t}\n\n\tprivate Color getItemTimerColor(GroundItem groundItem)\n\t{\n\t\tfinal Instant spawnTime \u003d groundItem.getSpawnTime();\n\t\tif (spawnTime \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tfinal Instant now \u003d Instant.now();\n\t\tfinal Instant despawnTime \u003d spawnTime.plus(groundItem.getDespawnTime());\n\n\t\tif (groundItem.isPrivate())\n\t\t{\n\t\t\tif (despawnTime.isAfter(now))\n\t\t\t{\n\t\t\t\treturn PRIVATE_TIMER_COLOR;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\n\t\t// otherwise it is private until visibleTime, then it is public\n\t\tfinal Instant visibleTime \u003d spawnTime.plus(groundItem.getVisibleTime());\n\t\tif (visibleTime.isAfter(now))\n\t\t{\n\t\t\treturn PRIVATE_TIMER_COLOR;\n\t\t}\n\t\tif (despawnTime.isAfter(now))\n\t\t{\n\t\t\treturn PUBLIC_TIMER_COLOR;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate void drawTimerPieOverlay(Graphics2D graphics, int textX, int textY, GroundItem groundItem, Color color)\n\t{\n\t\tInstant now \u003d Instant.now();\n\t\tInstant spawnTime \u003d groundItem.getSpawnTime();\n\t\tInstant despawnTime \u003d calculateDespawnTime(groundItem);\n\t\tColor fillColor \u003d color;\n\n\t\tif (spawnTime \u003d\u003d null || despawnTime \u003d\u003d null || fillColor \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfloat percent \u003d (float) (now.toEpochMilli() - spawnTime.toEpochMilli()) / (despawnTime.toEpochMilli() - spawnTime.toEpochMilli());\n\n\t\tprogressPieComponent.setDiameter(TIMER_OVERLAY_DIAMETER);\n\t\t// Shift over to not be on top of the text\n\t\tint x \u003d textX - TIMER_OVERLAY_DIAMETER;\n\t\tint y \u003d textY - TIMER_OVERLAY_DIAMETER / 2;\n\t\tprogressPieComponent.setPosition(new Point(x, y));\n\t\tprogressPieComponent.setFill(fillColor);\n\t\tprogressPieComponent.setBorderColor(fillColor);\n\t\tprogressPieComponent.setProgress(1 - percent); // inverse so pie drains over time\n\t\tprogressPieComponent.render(graphics);\n\t}\n\n\tprivate void drawRectangle(Graphics2D graphics, Rectangle rect, Color color, boolean inList, boolean hiddenBox)\n\t{\n\t\tgraphics.setColor(Color.BLACK);\n\t\tgraphics.drawRect(rect.x + 1, rect.y + 1, rect.width, rect.height);\n\n\t\tgraphics.setColor(color);\n\t\tgraphics.draw(rect);\n\n\t\tif (inList)\n\t\t{\n\t\t\tgraphics.fill(rect);\n\t\t}\n\n\t\tgraphics.setColor(Color.WHITE);\n\t\t// Minus symbol\n\t\tgraphics.drawLine\n\t\t\t(\n\t\t\t\trect.x + 2,\n\t\t\t\trect.y + (rect.height / 2),\n\t\t\t\trect.x + rect.width - 2,\n\t\t\t\trect.y + (rect.height / 2)\n\t\t\t);\n\n\t\tif (!hiddenBox)\n\t\t{\n\t\t\t// Plus symbol\n\t\t\tgraphics.drawLine\n\t\t\t\t(\n\t\t\t\t\trect.x + (rect.width / 2),\n\t\t\t\t\trect.y + 2,\n\t\t\t\t\trect.x + (rect.width / 2),\n\t\t\t\t\trect.y + rect.height - 2\n\t\t\t\t);\n\t\t}\n\n\t}\n}\n","filePath":"src\\main\\java\\com\\rainbowrave\\RainbowRaveGroundItemsOverlay.java"},{"fileName":"RainbowRaveGroundItemsPlugin.java","content":"/*\n * Copyright (c) 2017, Aria \u003caria@ar1as.space\u003e\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.rainbowrave;\n\nimport com.google.common.cache.CacheBuilder;\nimport com.google.common.cache.LoadingCache;\nimport com.google.common.collect.HashBasedTable;\nimport com.google.common.collect.ImmutableList;\nimport com.google.common.collect.Table;\nimport static com.rainbowrave.RainbowRaveConfig.GroundItemsToColor.HIGH;\nimport static com.rainbowrave.RainbowRaveConfig.GroundItemsToColor.INSANE;\nimport static com.rainbowrave.RainbowRaveConfig.GroundItemsToColor.LOW;\nimport static com.rainbowrave.RainbowRaveConfig.GroundItemsToColor.MEDIUM;\nimport java.awt.Color;\nimport java.awt.Rectangle;\nimport static java.lang.Boolean.TRUE;\nimport java.time.Duration;\nimport java.time.Instant;\nimport java.util.Collection;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Optional;\nimport java.util.concurrent.CopyOnWriteArrayList;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.concurrent.TimeUnit;\nimport javax.inject.Inject;\nimport javax.swing.SwingUtilities;\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport lombok.Setter;\nimport lombok.Value;\nimport net.runelite.api.*;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.FocusChanged;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.ItemDespawned;\nimport net.runelite.api.events.ItemQuantityChanged;\nimport net.runelite.api.events.ItemSpawned;\nimport net.runelite.client.Notifier;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ClientShutdown;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.input.KeyManager;\nimport net.runelite.client.input.MouseManager;\nimport net.runelite.client.plugins.grounditems.GroundItemsConfig;\nimport net.runelite.client.plugins.grounditems.config.OwnershipFilterMode;\nimport static net.runelite.api.TileItem.OWNERSHIP_GROUP;\nimport static net.runelite.api.TileItem.OWNERSHIP_NONE;\nimport static net.runelite.api.TileItem.OWNERSHIP_OTHER;\nimport static net.runelite.api.TileItem.OWNERSHIP_SELF;\nimport net.runelite.client.plugins.grounditems.config.HighlightTier;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.RSTimeUnit;\nimport net.runelite.client.util.Text;\n\npublic class RainbowRaveGroundItemsPlugin\n{\n\n\tpublic static final String GROUND_ITEMS_CONFIG_GROUP \u003d \"grounditems\";\n\tpublic static final String SHOW_LOOTBEAM_TIER_CONFIG_KEY \u003d \"showLootbeamTier\";\n\tpublic static final String SHOW_LOOTBEAM_FOR_HIGHLIGHTED_CONFIG_KEY \u003d \"showLootbeamForHighlighted\";\n\n\t@Value\n\tstatic class PriceHighlight\n\t{\n\t\tprivate final int price;\n\t\tprivate final Color color;\n\t}\n\n\t// ItemID for coins\n\tprivate static final int COINS \u003d ItemID.COINS_995;\n\n\t@Getter(AccessLevel.PACKAGE)\n\t@Setter(AccessLevel.PACKAGE)\n\tprivate Map.Entry\u003cRectangle, GroundItem\u003e textBoxBounds;\n\n\t@Getter(AccessLevel.PACKAGE)\n\t@Setter(AccessLevel.PACKAGE)\n\tprivate Map.Entry\u003cRectangle, GroundItem\u003e hiddenBoxBounds;\n\n\t@Getter(AccessLevel.PACKAGE)\n\t@Setter(AccessLevel.PACKAGE)\n\tprivate Map.Entry\u003cRectangle, GroundItem\u003e highlightBoxBounds;\n\n\t@Getter(AccessLevel.PACKAGE)\n\t@Setter(AccessLevel.PACKAGE)\n\tprivate boolean hotKeyPressed;\n\n\t@Getter(AccessLevel.PACKAGE)\n\t@Setter(AccessLevel.PACKAGE)\n\tprivate boolean hideAll;\n\n\tprivate List\u003cString\u003e hiddenItemList \u003d new CopyOnWriteArrayList\u003c\u003e();\n\tprivate List\u003cString\u003e highlightedItemsList \u003d new CopyOnWriteArrayList\u003c\u003e();\n\n\t@Inject\n\tpublic RainbowRaveGroundItemInputListener inputListener;\n\n\t@Inject\n\tprivate MouseManager mouseManager;\n\n\t@Inject\n\tprivate KeyManager keyManager;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate ItemManager itemManager;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate GroundItemsConfig config;\n\n//\t@Inject\n//\tprivate RainbowRaveGroundItemsOverlay overlay;\n//\n\t@Inject\n\tprivate Notifier notifier;\n\n\t@Inject\n\tprivate ScheduledExecutorService executor;\n\n\t@Inject\n\tprivate RainbowRaveConfig rainbowRaveConfig;\n\n\t@Inject\n\tprivate RainbowRavePlugin rainbowRavePlugin;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Getter\n\tprivate final Table\u003cWorldPoint, Integer, GroundItem\u003e collectedGroundItems \u003d HashBasedTable.create();\n\tprivate List\u003cPriceHighlight\u003e priceChecks \u003d ImmutableList.of();\n\tprivate LoadingCache\u003cNamedQuantity, Boolean\u003e highlightedItems;\n\tprivate LoadingCache\u003cNamedQuantity, Boolean\u003e hiddenItems;\n\tfinal Map\u003cWorldPoint, Lootbeam\u003e lootbeams \u003d new HashMap\u003c\u003e();\n\n//\t@Override\n\tprotected void startUp()\n\t{\n\t\tgroundItemsLootBeamChange(false, false, true);\n//\t\toverlayManager.add(overlay);\n\t\tmouseManager.registerMouseListener(inputListener);\n\t\tkeyManager.registerKeyListener(inputListener);\n\t\texecutor.execute(this::reset);\n\t}\n\n\t@Subscribe\n\tpublic void onClientShutdown(ClientShutdown e) {\n\t\tif (rainbowRaveConfig.recolorLootBeams())\n\t\t{\n\t\t\trestoreGroundItemLootBeams();\n\t\t}\n\t}\n\n//\t@Override\n\tprotected void shutDown()\n\t{\n\t\tif (rainbowRaveConfig.recolorLootBeams())\n\t\t{\n\t\t\trestoreGroundItemLootBeams();\n\t\t}\n//\t\toverlayManager.remove(overlay);\n\t\tmouseManager.unregisterMouseListener(inputListener);\n\t\tkeyManager.unregisterKeyListener(inputListener);\n\t\tif (highlightedItems !\u003d null)\n\t\t{\n\t\t\thighlightedItems.invalidateAll();\n\t\t\thighlightedItems \u003d null;\n\t\t}\n\t\tif (hiddenItems !\u003d null)\n\t\t{\n\t\t\thiddenItems.invalidateAll();\n\t\t\thiddenItems \u003d null;\n\t\t}\n\t\thiddenItemList \u003d null;\n\t\thighlightedItemsList \u003d null;\n\t\tcollectedGroundItems.clear();\n\t\tclientThread.invokeLater(this::removeAllLootbeams);\n\t}\n\n\tprivate boolean ignoreConfigChange \u003d false;\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif (ignoreConfigChange) return;\n\n\t\tif (event.getGroup().equals(GROUND_ITEMS_CONFIG_GROUP))\n\t\t{\n\t\t\tif (event.getKey().equals(SHOW_LOOTBEAM_TIER_CONFIG_KEY)) {\n\t\t\t\tgroundItemsLootBeamChange(true, false, false);\n\t\t\t}\n\t\t\telse if (event.getKey().equals(SHOW_LOOTBEAM_FOR_HIGHLIGHTED_CONFIG_KEY))\n\t\t\t{\n\t\t\t\tgroundItemsLootBeamChange(false, true, false);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\texecutor.execute(this::reset);\n\t\t\t}\n\t\t}\n\t\telse if (event.getGroup().equals(RainbowRavePlugin.GROUP))\n\t\t{\n\t\t\tif (event.getKey().equals(RainbowRaveConfig.RECOLOR_LOOT_BEAMS_KEY))\n\t\t\t{\n\t\t\t\tif (rainbowRaveConfig.recolorLootBeams())\n\t\t\t\t{\n\t\t\t\t\tgroundItemsLootBeamChange(false, false, true);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\trestoreGroundItemLootBeams();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void groundItemsLootBeamChange(boolean tierChanged, boolean highlightedChanged, boolean turningOnRecolorLootBeams)\n\t{\n\t\tif (rainbowRaveConfig.recolorLootBeams())\n\t\t{\n\t\t\tif (!turningOnRecolorLootBeams \u0026\u0026 SwingUtilities.isEventDispatchThread()) // Changes from profile changes happen on the executor thread, only show the message when it happens on the swing thread.\n\t\t\t{\n\t\t\t\tclientThread.invoke(() -\u003e client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\",\n\t\t\t\t\t\"Rainbow Rave: Please change loot beam settings through the rainbow rave plugin\u0027s settings, as rainbow rave needs to disable regular loot beams in order to recolor them.\",\n\t\t\t\t\t\"\", false));\n\t\t\t}\n\t\t\tignoreConfigChange \u003d true;\n\t\t\tif (tierChanged || turningOnRecolorLootBeams)\n\t\t\t{\n\t\t\t\tHighlightTier highlightTier \u003d config.showLootbeamTier();\n\t\t\t\trainbowRaveConfig.setGroundItemsLootbeamTier(highlightTier);\n\t\t\t\tconfigManager.setConfiguration(GROUND_ITEMS_CONFIG_GROUP, SHOW_LOOTBEAM_TIER_CONFIG_KEY, HighlightTier.OFF);\n\t\t\t}\n\t\t\tif (highlightedChanged || turningOnRecolorLootBeams)\n\t\t\t{\n\t\t\t\tboolean showLootbeamForHighlighted \u003d config.showLootbeamForHighlighted();\n\t\t\t\trainbowRaveConfig.setGroundItemsHighlightedItemsLootbeam(showLootbeamForHighlighted);\n\t\t\t\tconfigManager.setConfiguration(GROUND_ITEMS_CONFIG_GROUP, SHOW_LOOTBEAM_FOR_HIGHLIGHTED_CONFIG_KEY, false);\n\t\t\t}\n\t\t\tignoreConfigChange \u003d false;\n\n\t\t\texecutor.execute(this::reset);\n\t\t}\n\t}\n\n\tprivate void restoreGroundItemLootBeams()\n\t{\n\t\tHighlightTier tier \u003d rainbowRaveConfig.getGroundItemsLootbeamTier();\n\t\tBoolean showLootbeamForHighlighted \u003d rainbowRaveConfig.getGroundItemsHighlightedItemsLootbeam();\n\t\tignoreConfigChange \u003d true;\n\t\tconfigManager.setConfiguration(GROUND_ITEMS_CONFIG_GROUP, SHOW_LOOTBEAM_TIER_CONFIG_KEY, tier);\n\t\tconfigManager.setConfiguration(GROUND_ITEMS_CONFIG_GROUP, SHOW_LOOTBEAM_FOR_HIGHLIGHTED_CONFIG_KEY, showLootbeamForHighlighted);\n\t\tignoreConfigChange \u003d false;\n\n\t\texecutor.execute(this::reset);\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(final GameStateChanged event)\n\t{\n\t\tif (event.getGameState() \u003d\u003d GameState.LOADING)\n\t\t{\n\t\t\tcollectedGroundItems.clear();\n\t\t\tlootbeams.clear();\n\t\t}\n\t}\n\n\tpublic void onItemSpawned(ItemSpawned itemSpawned)\n\t{\n\t\tTileItem item \u003d itemSpawned.getItem();\n\t\tTile tile \u003d itemSpawned.getTile();\n\n\t\tGroundItem groundItem \u003d buildGroundItem(tile, item);\n\t\tGroundItem existing \u003d collectedGroundItems.get(tile.getWorldLocation(), item.getId());\n\t\tif (existing !\u003d null)\n\t\t{\n\t\t\texisting.setQuantity(existing.getQuantity() + groundItem.getQuantity());\n\t\t\t// The spawn time remains set at the oldest spawn\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcollectedGroundItems.put(tile.getWorldLocation(), item.getId(), groundItem);\n\t\t}\n\n//\t\tif (shouldDisplayItem(config.ownershipFilterMode(), groundItem.getOwnership(), client.getVarbitValue(Varbits.ACCOUNT_TYPE)))\n//\t\t{\n//\t\t\tnotifyHighlightedItem(groundItem);\n//\t\t}\n\n\t\thandleLootbeam(tile.getWorldLocation());\n\t}\n\n\t@Subscribe\n\tpublic void onItemDespawned(ItemDespawned itemDespawned)\n\t{\n\t\tTileItem item \u003d itemDespawned.getItem();\n\t\tTile tile \u003d itemDespawned.getTile();\n\n\t\tGroundItem groundItem \u003d collectedGroundItems.get(tile.getWorldLocation(), item.getId());\n\t\tif (groundItem \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (groundItem.getQuantity() \u003c\u003d item.getQuantity())\n\t\t{\n\t\t\tcollectedGroundItems.remove(tile.getWorldLocation(), item.getId());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tgroundItem.setQuantity(groundItem.getQuantity() - item.getQuantity());\n\t\t\t// When picking up an item when multiple stacks appear on the ground,\n\t\t\t// it is not known which item is picked up, so we invalidate the spawn\n\t\t\t// time\n\t\t\tgroundItem.setSpawnTime(null);\n\t\t}\n\n\t\thandleLootbeam(tile.getWorldLocation());\n\t}\n\n\t@Subscribe\n\tpublic void onItemQuantityChanged(ItemQuantityChanged itemQuantityChanged)\n\t{\n\t\tTileItem item \u003d itemQuantityChanged.getItem();\n\t\tTile tile \u003d itemQuantityChanged.getTile();\n\t\tint oldQuantity \u003d itemQuantityChanged.getOldQuantity();\n\t\tint newQuantity \u003d itemQuantityChanged.getNewQuantity();\n\n\t\tint diff \u003d newQuantity - oldQuantity;\n\t\tGroundItem groundItem \u003d collectedGroundItems.get(tile.getWorldLocation(), item.getId());\n\t\tif (groundItem !\u003d null)\n\t\t{\n\t\t\tgroundItem.setQuantity(groundItem.getQuantity() + diff);\n\t\t}\n\n\t\thandleLootbeam(tile.getWorldLocation());\n\t}\n\n//\t@Subscribe\n//\tpublic void onClientTick(ClientTick event)\n//\t{\n//\t}\n\n\tprivate GroundItem buildGroundItem(final Tile tile, final TileItem item)\n\t{\n\t\t// Collect the data for the item\n\t\tfinal int itemId \u003d item.getId();\n\t\tfinal ItemComposition itemComposition \u003d itemManager.getItemComposition(itemId);\n\t\tfinal int realItemId \u003d itemComposition.getNote() !\u003d -1 ? itemComposition.getLinkedNoteId() : itemId;\n\t\tfinal int alchPrice \u003d itemComposition.getHaPrice();\n\t\tfinal int despawnTime \u003d item.getDespawnTime() - client.getTickCount();\n\t\tfinal int visibleTime \u003d item.getVisibleTime() - client.getTickCount();\n\n\t\tfinal GroundItem groundItem \u003d GroundItem.builder()\n\t\t\t.id(itemId)\n\t\t\t.location(tile.getWorldLocation())\n\t\t\t.itemId(realItemId)\n\t\t\t.quantity(item.getQuantity())\n\t\t\t.name(itemComposition.getName())\n\t\t\t.haPrice(alchPrice)\n\t\t\t.height(tile.getItemLayer().getHeight())\n\t\t\t.tradeable(itemComposition.isTradeable())\n\t\t\t.ownership(item.getOwnership())\n\t\t\t.isPrivate(item.isPrivate())\n\t\t\t.spawnTime(Instant.now())\n\t\t\t.stackable(itemComposition.isStackable())\n\t\t\t.despawnTime(Duration.of(despawnTime, RSTimeUnit.GAME_TICKS))\n\t\t\t.visibleTime(Duration.of(visibleTime, RSTimeUnit.GAME_TICKS))\n\t\t\t.build();\n\n\t\t// Update item price in case it is coins\n\t\tif (realItemId \u003d\u003d COINS)\n\t\t{\n\t\t\tgroundItem.setHaPrice(1);\n\t\t\tgroundItem.setGePrice(1);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tgroundItem.setGePrice(itemManager.getItemPrice(realItemId));\n\t\t}\n\n\t\treturn groundItem;\n\t}\n\n\tprivate void reset()\n\t{\n\t\t// gets the hidden items from the text box in the config\n\t\thiddenItemList \u003d Text.fromCSV(config.getHiddenItems());\n\n\t\t// gets the highlighted items from the text box in the config\n\t\thighlightedItemsList \u003d Text.fromCSV(config.getHighlightItems());\n\n\t\thighlightedItems \u003d CacheBuilder.newBuilder()\n\t\t\t.maximumSize(512L)\n\t\t\t.expireAfterAccess(10, TimeUnit.MINUTES)\n\t\t\t.build(new WildcardMatchLoader(highlightedItemsList));\n\n\t\thiddenItems \u003d CacheBuilder.newBuilder()\n\t\t\t.maximumSize(512L)\n\t\t\t.expireAfterAccess(10, TimeUnit.MINUTES)\n\t\t\t.build(new WildcardMatchLoader(hiddenItemList));\n\n\t\t// Cache colors\n\t\tImmutableList.Builder\u003cPriceHighlight\u003e priceCheckBuilder \u003d ImmutableList.builder();\n\n\t\tif (config.insaneValuePrice() \u003e 0)\n\t\t{\n\t\t\tpriceCheckBuilder.add(new PriceHighlight(config.insaneValuePrice(), config.insaneValueColor()));\n\t\t}\n\n\t\tif (config.highValuePrice() \u003e 0)\n\t\t{\n\t\t\tpriceCheckBuilder.add(new PriceHighlight(config.highValuePrice(), config.highValueColor()));\n\t\t}\n\n\t\tif (config.mediumValuePrice() \u003e 0)\n\t\t{\n\t\t\tpriceCheckBuilder.add(new PriceHighlight(config.mediumValuePrice(), config.mediumValueColor()));\n\t\t}\n\n\t\tif (config.lowValuePrice() \u003e 0)\n\t\t{\n\t\t\tpriceCheckBuilder.add(new PriceHighlight(config.lowValuePrice(), config.lowValueColor()));\n\t\t}\n\n\t\tpriceChecks \u003d priceCheckBuilder.build();\n\n\t\tclientThread.invokeLater(this::handleLootbeams);\n\t}\n\n//\t@Subscribe\n//\tpublic void onMenuEntryAdded(MenuEntryAdded event)\n//\t{\n//\t}\n\n//\tvoid updateList(String item, boolean hiddenList)\n//\t{\n//\t}\n\n\tOptional\u003cColor\u003e getHighlighted(NamedQuantity item, int gePrice, int haPrice)\n\t{\n\t\tif (TRUE.equals(highlightedItems.getUnchecked(item)))\n\t\t{\n\t\t\treturn rainbowRaveConfig.colorHighlightedGroundItems() ? Optional.of(rainbowRavePlugin.getColor(item.getName().hashCode())) : Optional.empty();\n\t\t}\n\n\t\t// Explicit hide takes priority over implicit highlight\n\t\tif (TRUE.equals(hiddenItems.getUnchecked(item)))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tfinal int price \u003d getValueByMode(gePrice, haPrice);\n\t\tif (price \u003e config.insaneValuePrice())\n\t\t{\n\t\t\treturn colorForTier(INSANE, item);\n\t\t}\n\n\t\tif (price \u003e config.highValuePrice())\n\t\t{\n\t\t\treturn colorForTier(HIGH, item);\n\t\t}\n\n\t\tif (price \u003e config.mediumValuePrice())\n\t\t{\n\t\t\treturn colorForTier(MEDIUM, item);\n\t\t}\n\n\t\tif (price \u003e config.lowValuePrice())\n\t\t{\n\t\t\treturn colorForTier(LOW, item);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate Optional\u003cColor\u003e colorForTier(RainbowRaveConfig.GroundItemsToColor tier, NamedQuantity item)\n\t{\n\t\treturn rainbowRaveConfig.whichGroundItemsToColor().compareTo(tier) \u003e\u003d 0 ? Optional.of(rainbowRavePlugin.getColor(item.getName().hashCode())) : Optional.empty();\n\t}\n\n\tOptional\u003cColor\u003e getHidden(NamedQuantity item, int gePrice, int haPrice, boolean isTradeable)\n\t{\n\t\tfinal boolean isExplicitHidden \u003d TRUE.equals(hiddenItems.getUnchecked(item));\n\t\tfinal boolean isExplicitHighlight \u003d TRUE.equals(highlightedItems.getUnchecked(item));\n\t\tfinal boolean canBeHidden \u003d gePrice \u003e 0 || isTradeable || !config.dontHideUntradeables();\n\t\tfinal boolean underGe \u003d gePrice \u003c config.getHideUnderValue();\n\t\tfinal boolean underHa \u003d haPrice \u003c config.getHideUnderValue();\n\n\t\t// Explicit highlight takes priority over implicit hide\n\t\treturn isExplicitHidden || (!isExplicitHighlight \u0026\u0026 canBeHidden \u0026\u0026 underGe \u0026\u0026 underHa)\n\t\t\t? rainbowRaveConfig.whichGroundItemsToColor().compareTo(RainbowRaveConfig.GroundItemsToColor.HIDDEN) \u003e\u003d 0 ? Optional.of(rainbowRavePlugin.getColor(item.getName().hashCode())) : Optional.empty()\n\t\t\t: null;\n\t}\n\n\tOptional\u003cColor\u003e getItemColor(Optional\u003cColor\u003e highlighted, Optional\u003cColor\u003e hidden, NamedQuantity item)\n\t{\n\t\tif (highlighted !\u003d null)\n\t\t{\n\t\t\treturn highlighted;\n\t\t}\n\n\t\tif (hidden !\u003d null)\n\t\t{\n\t\t\treturn hidden;\n\t\t}\n\n\t\treturn rainbowRaveConfig.whichGroundItemsToColor().compareTo(RainbowRaveConfig.GroundItemsToColor.REGULAR) \u003e\u003d 0 ? Optional.of(rainbowRavePlugin.getColor(item.getName().hashCode())) : Optional.empty();\n\t}\n\n\t@Subscribe\n\tpublic void onFocusChanged(FocusChanged focusChanged)\n\t{\n\t\tif (!focusChanged.isFocused())\n\t\t{\n\t\t\tsetHotKeyPressed(false);\n\t\t}\n\t}\n\n//\tprivate void notifyHighlightedItem(net.runelite.client.plugins.grounditems.GroundItem item)\n//\t{\n//\t}\n\n\tprivate int getValueByMode(int gePrice, int haPrice)\n\t{\n\t\tswitch (config.valueCalculationMode())\n\t\t{\n\t\t\tcase GE:\n\t\t\t\treturn gePrice;\n\t\t\tcase HA:\n\t\t\t\treturn haPrice;\n\t\t\tdefault: // Highest\n\t\t\t\treturn Math.max(gePrice, haPrice);\n\t\t}\n\t}\n\n\tprivate void handleLootbeam(WorldPoint worldPoint)\n\t{\n\t\t/*\n\t\t * Return and remove the lootbeam from this location if lootbeam are disabled\n\t\t * Lootbeam can be at this location if the config was just changed\n\t\t */\n\t\tif (!rainbowRaveConfig.recolorLootBeams() || !(rainbowRaveConfig.getGroundItemsHighlightedItemsLootbeam() || rainbowRaveConfig.getGroundItemsLootbeamTier() !\u003d HighlightTier.OFF))\n\t\t{\n\t\t\tremoveLootbeam(worldPoint);\n\t\t\treturn;\n\t\t}\n\n\t\tint price \u003d -1;\n\t\tCollection\u003cGroundItem\u003e groundItems \u003d collectedGroundItems.row(worldPoint).values();\n\t\tfinal OwnershipFilterMode ownershipFilterMode \u003d config.ownershipFilterMode();\n\t\tfinal int accountType \u003d client.getVarbitValue(Varbits.ACCOUNT_TYPE);\n\t\tfor (GroundItem groundItem : groundItems)\n\t\t{\n\t\t\tif (!shouldDisplayItem(ownershipFilterMode, groundItem.getOwnership(), accountType))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t/*\n\t\t\t * highlighted items have the highest priority so if an item is highlighted at this location\n\t\t\t * we can early return\n\t\t\t */\n\t\t\tNamedQuantity item \u003d new NamedQuantity(groundItem);\n\t\t\tif (rainbowRaveConfig.getGroundItemsHighlightedItemsLootbeam()\n\t\t\t\t\u0026\u0026 TRUE.equals(highlightedItems.getUnchecked(item)))\n\t\t\t{\n\t\t\t\taddLootbeam(worldPoint, config.highlightedColor(), null);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Explicit hide takes priority over implicit highlight\n\t\t\tif (TRUE.equals(hiddenItems.getUnchecked(item)))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tint itemPrice \u003d getValueByMode(groundItem.getGePrice(), groundItem.getHaPrice());\n\t\t\tprice \u003d Math.max(itemPrice, price);\n\t\t}\n\n\t\tif (rainbowRaveConfig.getGroundItemsLootbeamTier() !\u003d HighlightTier.OFF)\n\t\t{\n\t\t\tfor (PriceHighlight highlight : priceChecks)\n\t\t\t{\n\t\t\t\tif (price \u003e highlight.getPrice() \u0026\u0026 price \u003e rainbowRaveConfig.getGroundItemsLootbeamTier().getValueFromTier(config))\n\t\t\t\t{\n\t\t\t\t\taddLootbeam(worldPoint, highlight.color, rainbowRaveConfig.getGroundItemsLootbeamTier());\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tremoveLootbeam(worldPoint);\n\t}\n\n\tprivate void handleLootbeams()\n\t{\n\t\tfor (WorldPoint worldPoint : collectedGroundItems.rowKeySet())\n\t\t{\n\t\t\thandleLootbeam(worldPoint);\n\t\t}\n\t}\n\n\tprivate void removeAllLootbeams()\n\t{\n\t\tfor (Lootbeam lootbeam : lootbeams.values())\n\t\t{\n\t\t\tlootbeam.remove();\n\t\t}\n\n\t\tlootbeams.clear();\n\t}\n\n\tprivate void addLootbeam(WorldPoint worldPoint, Color color, HighlightTier tier)\n\t{\n\t\tLootbeam lootbeam \u003d lootbeams.get(worldPoint);\n\t\tif (lootbeam \u003d\u003d null)\n\t\t{\n\t\t\tlootbeam \u003d new Lootbeam(client, clientThread, worldPoint, color, config.lootbeamStyle().name(), tier);\n\t\t\tlootbeams.put(worldPoint, lootbeam);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlootbeam.setColor(color);\n\t\t\tlootbeam.setStyle(config.lootbeamStyle().name());\n\t\t}\n\t}\n\n\tprivate void removeLootbeam(WorldPoint worldPoint)\n\t{\n\t\tLootbeam lootbeam \u003d lootbeams.remove(worldPoint);\n\t\tif (lootbeam !\u003d null)\n\t\t{\n\t\t\tlootbeam.remove();\n\t\t}\n\t}\n\n\t/*\n\t * All      -\u003e none | self | other | group\n\t * Drops    -\u003e self | group\n\t * Takeable -\u003e none | self | group | (if a main then other)\n\t */\n\tboolean shouldDisplayItem(OwnershipFilterMode filterMode, int ownership, int accountType)\n\t{\n\t\tswitch (filterMode)\n\t\t{\n\t\t\tcase DROPS:\n\t\t\t\treturn ownership \u003d\u003d OWNERSHIP_SELF || ownership \u003d\u003d OWNERSHIP_GROUP;\n\t\t\tcase TAKEABLE:\n\t\t\t\treturn ownership !\u003d OWNERSHIP_OTHER || accountType \u003d\u003d 0; // Mains can always take items\n\t\t\tdefault:\n\t\t\t\treturn true;\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\rainbowrave\\RainbowRaveGroundItemsPlugin.java"},{"fileName":"RainbowRaveGroundMarkerOverlay.java","content":"/*\n * Copyright (c) 2018, TheLonelyDev \u003chttps://github.com/TheLonelyDev\u003e\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.rainbowrave;\n\nimport com.google.common.base.Strings;\nimport java.awt.BasicStroke;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Polygon;\nimport java.awt.Stroke;\nimport java.util.Collection;\nimport java.util.ConcurrentModificationException;\nimport java.util.Random;\nimport javax.annotation.Nullable;\nimport net.runelite.api.Client;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Point;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.plugins.groundmarkers.GroundMarkerConfig;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\n\npublic class RainbowRaveGroundMarkerOverlay extends Overlay\n{\n\tprivate static final int MAX_DRAW_DISTANCE \u003d 32;\n\n\tprivate final Client client;\n\tprivate final GroundMarkerConfig config;\n\tprivate final RainbowRaveGroundMarkerPlugin plugin;\n\tprivate final RainbowRaveConfig rainbowRaveConfig;\n\tprivate final RainbowRavePlugin rainbowRavePlugin;\n\n\tpublic RainbowRaveGroundMarkerOverlay(Client client, GroundMarkerConfig config, RainbowRaveGroundMarkerPlugin plugin, RainbowRavePlugin rainbowRavePlugin, RainbowRaveConfig rainbowRaveConfig)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.config \u003d config;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.rainbowRavePlugin \u003d rainbowRavePlugin;\n\t\tthis.rainbowRaveConfig \u003d rainbowRaveConfig;\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetPriority(Overlay.PRIORITY_LOW);\n\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\n\t}\n\n\tprivate Random random \u003d new Random();\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (!rainbowRaveConfig.rainbowTileMarkers()) return null;\n\n\t\tfinal Collection\u003cColorTileMarker\u003e points \u003d plugin.getPoints();\n\t\tif (points.isEmpty())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tStroke stroke \u003d new BasicStroke((float) config.borderWidth());\n\t\ttry\n\t\t{\n\t\t\tint plane \u003d client.getTopLevelWorldView().getPlane();\n\t\t\tfor (final ColorTileMarker point : points)\n\t\t\t{\n\t\t\t\tWorldPoint worldPoint \u003d point.getWorldPoint();\n\t\t\t\tif (worldPoint.getPlane() !\u003d plane)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// This formula does not have a solid concept behind it, I just tried random stuff.\n\t\t\t\tint hashCode;\n\t\t\t\tswitch (rainbowRaveConfig.groundMarkerColorMode()) {\n\t\t\t\t\tcase WAVES:\n\t\t\t\t\t\thashCode \u003d (point.getWorldPoint().getX() + point.getWorldPoint().getY()) * 5;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase COLOR_SYNC:\n\t\t\t\t\t\tif (point.getColor() !\u003d null) {\n\t\t\t\t\t\t\trandom.setSeed(point.getColor().getRGB());\n\t\t\t\t\t\t\thashCode \u003d random.nextInt(1000);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\tcase RANDOM:\n\t\t\t\t\tdefault:\n\t\t\t\t\t\trandom.setSeed(((long) point.getWorldPoint().getX() \u003c\u003c 16) + point.getWorldPoint().getY());\n\t\t\t\t\t\thashCode \u003d random.nextInt(1000);\n\t\t\t\t}\n\t\t\t\tColor tileColor \u003d rainbowRaveConfig.syncColor() ? rainbowRavePlugin.getColor(0) : rainbowRaveConfig.theme().getColor(((hashCode + (client.getGameCycle() * (6000f / rainbowRaveConfig.colorSpeed()))) % 300) / 300f);\n\t\t\t\tdrawTile(graphics, worldPoint, tileColor, point.getLabel(), stroke, rainbowRaveConfig.fillTiles());\n\t\t\t}\n\t\t} catch (ConcurrentModificationException e) {\n\t\t\t// can happen when removing stuff from points, such as when disabling drawing brush markers tiles.\n\t\t\t// don\u0027t care, doesn\u0027t have a significant visual effect.\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate void drawTile(Graphics2D graphics, WorldPoint point, Color color, @Nullable String label, Stroke borderStroke, boolean fill)\n\t{\n\t\tWorldPoint playerLocation \u003d client.getLocalPlayer().getWorldLocation();\n\n\t\tif (point.distanceTo(playerLocation) \u003e\u003d MAX_DRAW_DISTANCE)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tLocalPoint lp \u003d LocalPoint.fromWorld(client.getTopLevelWorldView(), point);\n\t\tif (lp \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tPolygon poly \u003d Perspective.getCanvasTilePoly(client, lp);\n\t\tif (poly !\u003d null)\n\t\t{\n\t\t\tif (fill)\n\t\t\t{\n\t\t\t\tgraphics.setColor(color);\n\t\t\t\tgraphics.fillPolygon(poly);\n\t\t\t}\n\t\t\tgraphics.setColor(color);\n\t\t\tStroke originalStroke \u003d graphics.getStroke();\n\t\t\tgraphics.setStroke(borderStroke);\n\t\t\tgraphics.draw(poly);\n\t\t\tgraphics.setStroke(originalStroke);\n\t\t}\n\n\t\tif (!Strings.isNullOrEmpty(label))\n\t\t{\n\t\t\tPoint canvasTextLocation \u003d Perspective.getCanvasTextLocation(client, graphics, lp, label, 0);\n\t\t\tif (canvasTextLocation !\u003d null)\n\t\t\t{\n\t\t\t\tOverlayUtil.renderTextLocation(graphics, canvasTextLocation, label, color);\n\t\t\t}\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\rainbowrave\\RainbowRaveGroundMarkerOverlay.java"},{"fileName":"RainbowRaveGroundMarkerPlugin.java","content":"/*\n * Copyright (c) 2018, TheLonelyDev \u003chttps://github.com/TheLonelyDev\u003e\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.rainbowrave;\n\nimport com.google.common.base.Strings;\nimport com.google.gson.Gson;\nimport com.google.gson.reflect.TypeToken;\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.Optional;\nimport java.util.stream.Collectors;\nimport javax.inject.Inject;\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.MenuAction;\nimport net.runelite.api.Tile;\nimport net.runelite.api.WorldView;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.MenuOptionClicked;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.game.chatbox.ChatboxPanelManager;\nimport net.runelite.client.plugins.groundmarkers.GroundMarkerConfig;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport static net.runelite.http.api.RuneLiteAPI.GSON;\n\n@Slf4j\npublic class RainbowRaveGroundMarkerPlugin\n{\n\tprivate static final String CONFIG_GROUP \u003d \"groundMarker\";\n\tprivate static final String WALK_HERE \u003d \"Walk here\";\n\tprivate static final String REGION_PREFIX \u003d \"region_\";\n\n\tprivate static final String BRUSH_CONFIG_GROUP \u003d \"brushMarkers\";\n\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate final List\u003cColorTileMarker\u003e points \u003d new ArrayList\u003c\u003e();\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate GroundMarkerConfig config;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate ChatboxPanelManager chatboxPanelManager;\n\n\t@Inject\n\tprivate RainbowRaveConfig rainbowRaveConfig;\n\n\t@Inject\n\tprivate EventBus eventBus;\n\n\t@Inject\n\tprivate Gson gson;\n\n\tCollection\u003cGroundMarkerPoint\u003e getPoints(int regionId)\n\t{\n\t\tString json \u003d configManager.getConfiguration(CONFIG_GROUP, REGION_PREFIX + regionId);\n\t\tif (Strings.isNullOrEmpty(json))\n\t\t{\n\t\t\treturn Collections.emptyList();\n\t\t}\n\n\t\t// CHECKSTYLE:OFF\n\t\treturn gson.fromJson(json, new TypeToken\u003cList\u003cGroundMarkerPoint\u003e\u003e(){}.getType());\n\t\t// CHECKSTYLE:ON\n\t}\n\n\tvoid loadPoints()\n\t{\n\t\tloadPoints(null, false);\n\t}\n\n\tvoid loadPoints(GroundMarkerPoint extraPoint, boolean added)\n\t{\n\t\tpoints.clear();\n\n\t\tint[] regions \u003d client.getTopLevelWorldView().getMapRegions();\n\n\t\tif (regions \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfor (int regionId : regions)\n\t\t{\n\t\t\t// load points for region\n\t\t\tlog.debug(\"Loading points for region {}\", regionId);\n\t\t\tCollection\u003cGroundMarkerPoint\u003e regionPoints \u003d new ArrayList\u003c\u003e(getPoints(regionId));\n\t\t\tif (extraPoint !\u003d null \u0026\u0026 !added)\n\t\t\t{\n\t\t\t\tregionPoints.remove(extraPoint);\n\t\t\t}\n\t\t\tCollection\u003cColorTileMarker\u003e colorTileMarkers \u003d translateToColorTileMarker(regionPoints);\n\t\t\tpoints.addAll(colorTileMarkers);\n\n\t\t\tif (rainbowRaveConfig.useBrushMarkerTiles())\n\t\t\t{\n\t\t\t\tCollection\u003cGroundMarkerPoint\u003e brushRegionPoints \u003d getBrushPoints(regionId);\n\t\t\t\tCollection\u003cColorTileMarker\u003e brushColorTileMarkers \u003d translateToColorTileMarker(brushRegionPoints);\n\t\t\t\tpoints.addAll(brushColorTileMarkers);\n\t\t\t}\n\t\t}\n\n\t\tif (extraPoint !\u003d null \u0026\u0026 added) {\n\t\t\tCollection\u003cColorTileMarker\u003e colorTileMarkers \u003d translateToColorTileMarker(Collections.singletonList(extraPoint));\n\t\t\tpoints.addAll(colorTileMarkers);\n\t\t}\n\t}\n\n\t/**\n\t * Translate a collection of ground marker points to color tile markers, accounting for instances\n\t *\n\t * @param points {@link GroundMarkerPoint}s to be converted to {@link ColorTileMarker}s\n\t * @return A collection of color tile markers, converted from the passed ground marker points, accounting for local\n\t *         instance points. See {@link WorldPoint#toLocalInstance(WorldView, WorldPoint)}\n\t */\n\tprivate Collection\u003cColorTileMarker\u003e translateToColorTileMarker(Collection\u003cGroundMarkerPoint\u003e points)\n\t{\n\t\tif (points.isEmpty())\n\t\t{\n\t\t\treturn Collections.emptyList();\n\t\t}\n\n\t\tWorldView wv \u003d client.getTopLevelWorldView();\n\t\treturn points.stream()\n\t\t\t.map(point -\u003e new ColorTileMarker(\n\t\t\t\tWorldPoint.fromRegion(point.getRegionId(), point.getRegionX(), point.getRegionY(), point.getZ()),\n\t\t\t\tpoint.getColor(), point.getLabel()))\n\t\t\t.flatMap(colorTile -\u003e\n\t\t\t{\n\t\t\t\tfinal Collection\u003cWorldPoint\u003e localWorldPoints \u003d WorldPoint.toLocalInstance(wv, colorTile.getWorldPoint());\n\t\t\t\treturn localWorldPoints.stream().map(wp -\u003e new ColorTileMarker(wp, colorTile.getColor(), colorTile.getLabel()));\n\t\t\t})\n\t\t\t.collect(Collectors.toList());\n\t}\n\n\tpublic void startUp()\n\t{\n\t\tloadPoints();\n\t}\n\n\tpublic void shutDown()\n\t{\n\t\tpoints.clear();\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged)\n\t{\n\t\tif (gameStateChanged.getGameState() !\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// map region has just been updated\n\t\tloadPoints();\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOptionClicked(MenuOptionClicked event)\n\t{\n\t\tif (event.getMenuAction().getId() !\u003d MenuAction.RUNELITE.getId())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tTile target \u003d client.getTopLevelWorldView().getSelectedSceneTile();\n\t\tif (target \u003d\u003d null || !event.getMenuTarget().equals(\"Tile\"))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal String option \u003d event.getMenuOption();\n\t\tif (option.equals(\"Mark\") || option.equals(\"Unmark\"))\n\t\t{\n\t\t\tmarkTile(target.getLocalLocation());\n\t\t}\n\t\telse if (option.equals(\"Label\"))\n\t\t{\n\t\t\tlabelTile(target);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif (event.getGroup().equals(RainbowRavePlugin.GROUP) \u0026\u0026 event.getKey().equals(\"useBrushMarkerTiles\")) {\n\t\t\tloadPoints();\n\t\t}\n\t\tif (event.getGroup().equals(BRUSH_CONFIG_GROUP) \u0026\u0026 event.getKey().startsWith(REGION_PREFIX)) {\n\t\t\tloadPoints();\n\t\t}\n//\t\tif (event.getGroup().equals(GroundMarkerConfig.GROUND_MARKER_CONFIG_GROUP)\n//\t\t\t\u0026\u0026 (event.getKey().equals(GroundMarkerConfig.SHOW_IMPORT_EXPORT_KEY_NAME)\n//\t\t\t\t|| event.getKey().equals(GroundMarkerConfig.SHOW_CLEAR_KEY_NAME)))\n//\t\t{\n\t\t\t// Maintain consistent menu option order by removing everything then adding according to config\n//\t\t\tsharingManager.removeMenuOptions();\n//\n//\t\t\tif (config.showImportExport())\n//\t\t\t{\n//\t\t\t\tsharingManager.addImportExportMenuOptions();\n//\t\t\t}\n//\t\t\tif (config.showClear())\n//\t\t\t{\n//\t\t\t\tsharingManager.addClearMenuOption();\n//\t\t\t}\n//\t\t}\n\t}\n\n\tprivate void markTile(LocalPoint localPoint)\n\t{\n\t\tif (localPoint \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tWorldPoint worldPoint \u003d WorldPoint.fromLocalInstance(client, localPoint);\n\n\t\tint regionId \u003d worldPoint.getRegionID();\n\t\tGroundMarkerPoint point \u003d new GroundMarkerPoint(regionId, worldPoint.getRegionX(), worldPoint.getRegionY(), worldPoint.getPlane(), config.markerColor(), null);\n\t\tlog.debug(\"Updating point: {} - {}\", point, worldPoint);\n\n\t\tList\u003cGroundMarkerPoint\u003e groundMarkerPoints \u003d new ArrayList\u003c\u003e(getPoints(regionId));\n\t\tif (groundMarkerPoints.contains(point))\n\t\t{\n\t\t\t// since I don\u0027t save points this won\u0027t see any tiles added through ground markers immediately, hence the extra args.\n\t\t\tloadPoints(point, false);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// since I don\u0027t save points this won\u0027t see any tiles added through ground markers immediately, hence the extra args.\n\t\t\tloadPoints(point, true);\n\t\t}\n\n//\t\tsavePoints(regionId, groundMarkerPoints);\n\t}\n\n\tprivate void labelTile(Tile tile)\n\t{\n\t\tLocalPoint localPoint \u003d tile.getLocalLocation();\n\t\tWorldPoint worldPoint \u003d WorldPoint.fromLocalInstance(client, localPoint);\n\t\tfinal int regionId \u003d worldPoint.getRegionID();\n\n\t\tGroundMarkerPoint searchPoint \u003d new GroundMarkerPoint(regionId, worldPoint.getRegionX(), worldPoint.getRegionY(), worldPoint.getPlane(), null, null);\n\t\tCollection\u003cGroundMarkerPoint\u003e points \u003d getPoints(regionId);\n\t\tGroundMarkerPoint existing \u003d points.stream()\n\t\t\t.filter(p -\u003e p.equals(searchPoint))\n\t\t\t.findFirst().orElse(null);\n\t\tif (existing \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tchatboxPanelManager.openTextInput(\"Tile label\")\n\t\t\t.value(Optional.ofNullable(existing.getLabel()).orElse(\"\"))\n\t\t\t.onDone((input) -\u003e\n\t\t\t{\n\t\t\t\tinput \u003d Strings.emptyToNull(input);\n\n\t\t\t\tGroundMarkerPoint newPoint \u003d new GroundMarkerPoint(regionId, worldPoint.getRegionX(), worldPoint.getRegionY(), worldPoint.getPlane(), existing.getColor(), input);\n\t\t\t\tpoints.remove(searchPoint);\n\t\t\t\tpoints.add(newPoint);\n//\t\t\t\tsavePoints(regionId, points);\n\n\t\t\t\tloadPoints();\n\t\t\t})\n\t\t\t.build();\n\t}\n\n\tprivate Collection\u003cGroundMarkerPoint\u003e getBrushPoints(int regionId)\n\t{\n\t\tString json \u003d configManager.getConfiguration(BRUSH_CONFIG_GROUP, REGION_PREFIX + regionId);\n\t\tif (Strings.isNullOrEmpty(json))\n\t\t{\n\t\t\treturn Collections.emptyList();\n\t\t}\n\n\t\t// CHECKSTYLE:OFF\n\t\treturn GSON.fromJson(json, new TypeToken\u003cList\u003cGroundMarkerPoint\u003e\u003e()\n\t\t{\n\t\t}.getType());\n\t\t// CHECKSTYLE:ON\n\t}\n}\n","filePath":"src\\main\\java\\com\\rainbowrave\\RainbowRaveGroundMarkerPlugin.java"},{"fileName":"RainbowRaveInventoryTagsOverlay.java","content":"/*\n * Copyright (c) 2018 kulers\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.rainbowrave;\n\nimport java.awt.Color;\nimport java.awt.Graphics2D;\nimport java.awt.Image;\nimport java.awt.Rectangle;\nimport java.awt.image.BufferedImage;\nimport net.runelite.api.widgets.WidgetItem;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.plugins.inventorytags.InventoryTagsConfig;\nimport net.runelite.client.ui.overlay.WidgetItemOverlay;\nimport net.runelite.client.util.ColorUtil;\nimport net.runelite.client.util.ImageUtil;\n\npublic class RainbowRaveInventoryTagsOverlay extends WidgetItemOverlay\n{\n\tprivate final ItemManager itemManager;\n\tprivate final RainbowRavePlugin rainbowRavePlugin;\n\tprivate final InventoryTagsConfig config;\n\tprivate final RainbowRaveConfig rainbowRaveConfig;\n\n\tprivate ConfigManager configManager;\n\n\tpublic RainbowRaveInventoryTagsOverlay(ItemManager itemManager, RainbowRavePlugin rainbowRavePlugin, InventoryTagsConfig config, RainbowRaveConfig rainbowRaveConfig, ConfigManager configManager)\n\t{\n\t\tthis.itemManager \u003d itemManager;\n\t\tthis.rainbowRavePlugin \u003d rainbowRavePlugin;\n\t\tthis.config \u003d config;\n\t\tthis.rainbowRaveConfig \u003d rainbowRaveConfig;\n\t\tthis.configManager \u003d configManager;\n\t\tshowOnEquipment();\n\t\tshowOnInventory();\n\t\tshowOnBank();\n\t}\n\n\t@Override\n\tpublic void renderItemOverlay(Graphics2D graphics, int itemId, WidgetItem widgetItem)\n\t{\n\t\tif (rainbowRaveConfig.whichItemsToInventoryTag() \u003d\u003d RainbowRaveConfig.ItemsToTag.NONE) return;\n\t\tString tag \u003d configManager.getConfiguration(InventoryTagsConfig.GROUP, \"item_\" + itemId);\n\t\tif ((tag !\u003d null \u0026\u0026 !tag.isEmpty()) || rainbowRaveConfig.whichItemsToInventoryTag() \u003d\u003d RainbowRaveConfig.ItemsToTag.ALL)\n\t\t{\n\t\t\tfinal Color color \u003d rainbowRavePlugin.getColor(itemId);\n\t\t\tif (color !\u003d null)\n\t\t\t{\n\t\t\t\tRectangle bounds \u003d widgetItem.getCanvasBounds();\n\t\t\t\tif (config.showTagOutline())\n\t\t\t\t{\n\t\t\t\t\tfinal BufferedImage outline \u003d itemManager.getItemOutline(itemId, widgetItem.getQuantity(), color);\n\t\t\t\t\tgraphics.drawImage(outline, (int) bounds.getX(), (int) bounds.getY(), null);\n\t\t\t\t}\n\n\t\t\t\tif (config.showTagFill())\n\t\t\t\t{\n\t\t\t\t\tfinal Image image \u003d getFillImage(color, widgetItem.getId(), widgetItem.getQuantity());\n\t\t\t\t\tgraphics.drawImage(image, (int) bounds.getX(), (int) bounds.getY(), null);\n\t\t\t\t}\n\n\t\t\t\tif (config.showTagUnderline())\n\t\t\t\t{\n\t\t\t\t\tint heightOffSet \u003d (int) bounds.getY() + (int) bounds.getHeight() + 2;\n\t\t\t\t\tgraphics.setColor(color);\n\t\t\t\t\tgraphics.drawLine((int) bounds.getX(), heightOffSet, (int) bounds.getX() + (int) bounds.getWidth(), heightOffSet);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate Image getFillImage(Color color, int itemId, int qty)\n\t{\n\t\tfinal Color fillColor \u003d ColorUtil.colorWithAlpha(color, config.fillOpacity());\n\t\treturn ImageUtil.fillImage(itemManager.getImage(itemId, qty, false), fillColor);\n\t}\n}\n","filePath":"src\\main\\java\\com\\rainbowrave\\RainbowRaveInventoryTagsOverlay.java"},{"fileName":"RainbowRaveMouseTrailOverlay.java","content":"/*\n * Copyright (c) 2022, Ryan Bell \u003cllaver@live.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.rainbowrave;\n\nimport java.awt.*;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport net.runelite.api.Point;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\n\nclass RainbowRaveMouseTrailOverlay extends Overlay\n{\n    private final RainbowRavePlugin rainbowRavePlugin;\n    private final RainbowRaveMouseTrailPlugin plugin;\n    private final RainbowRaveConfig rainbowRaveConfig;\n\n    public RainbowRaveMouseTrailOverlay(RainbowRavePlugin rainbowRavePlugin, RainbowRaveMouseTrailPlugin plugin, RainbowRaveConfig rainbowRaveConfig)\n    {\n        this.plugin \u003d plugin;\n        this.rainbowRavePlugin \u003d rainbowRavePlugin;\n        this.rainbowRaveConfig \u003d rainbowRaveConfig;\n        setPosition(OverlayPosition.DYNAMIC);\n        setPriority(Overlay.PRIORITY_HIGH);\n        setLayer(OverlayLayer.ABOVE_WIDGETS);\n    }\n\n    // Function the get the rainbow color for a particular point based on the size of the trail\n    private Color getRainbowColor(int trailSize, int position) {\n        float currentPercent \u003d (float) (position) / (trailSize);\n        float hue \u003d currentPercent * (trailSize);\n        return rainbowRaveConfig.theme().getColor(hue / 100f);\n    }\n\n    // Helper method to handle choosing the correct coloring function\n    private Color getColor(int size, int position) {\n        if (rainbowRaveConfig.whichMouseTrailStyle() \u003d\u003d RainbowRaveConfig.MouseTrailStyle.SYNCED) {\n            return rainbowRavePlugin.getColor(0);\n        }\n        // Fall back to standard coloring\n        return getRainbowColor(size, position);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics)\n    {\n        // Disable overlay if mouse trail style set to None\n        if (rainbowRaveConfig.whichMouseTrailStyle() \u003d\u003d RainbowRaveConfig.MouseTrailStyle.NONE) {\n            return null;\n        }\n        // Set Partymode variables\n        boolean isPartyMode \u003d rainbowRaveConfig.whichMouseTrailStyle() \u003d\u003d RainbowRaveConfig.MouseTrailStyle.PARTYMODE;\n        // Get ArrayList of Curves\n        List\u003cCurve\u003e trail \u003d new ArrayList\u003c\u003e(plugin.getTrail());\n        // Points to track where to render a line between Curves\n        Point midBefore \u003d null;\n        Point midAfter \u003d null;\n\n        // Set trail size, stroke, and antialiasing\n        graphics.setStroke(new BasicStroke(2, BasicStroke.CAP_BUTT, BasicStroke.JOIN_ROUND));\n        graphics.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n        // Fallback default color\n        graphics.setColor(Color.BLUE);\n        // Loop through Curves of trail\n        for(int i \u003d 0; i \u003c trail.size(); i++) {\n            // Get Points from Curve\n            List\u003cPoint\u003e points \u003d trail.get(i).getCurve();\n            // Loop through points\n            for(int j \u003d 0; j \u003c points.size(); j++ ) {\n\n                // Initialize points used to calculate parts of trail with null\n                Point before \u003d null;\n                Point after \u003d null;\n                Point previous \u003d null;\n                Point current \u003d null;\n                // Logic for setting points depending on where in the loops we are\n                if(i !\u003d 0 \u0026\u0026 j \u003d\u003d 0) {\n                    // Get previous list of points from the previous Curve\n                    List\u003cPoint\u003e previousPoints \u003d trail.get(i - 1).getCurve();\n                    before \u003d previousPoints.get(previousPoints.size() - 2);\n                    after \u003d points.get(j + 1);\n                    previous \u003d previousPoints.get(previousPoints.size() - 1);\n                    current \u003d points.get(j);\n                } else if(j \u003e 1) {\n                    // Set points from current Curve\n                    before \u003d points.get(j - 2);\n                    previous \u003d points.get(j - 1);\n                    current \u003d points.get(j);\n                    // If the last point in the Curve, and not the last curve in the trail, get second point from next Curve\n                    if(i \u003c trail.size() - 1 \u0026\u0026 j \u003d\u003d points.size() - 1) {\n                        after \u003d trail.get(i + 1).getCurve().get(1);\n                    }\n                }\n                // Get second to last in previous Curve and third point in current Curve\n                // Will be used to draw another line due to tiny gaps left in between Curves\n                if(j \u003d\u003d 4) {\n                    if (midBefore \u003d\u003d null) {\n                        midBefore \u003d points.get(j);\n                    }\n                } else if (j \u003d\u003d 2 \u0026\u0026 midBefore !\u003d null) {\n                        midAfter \u003d points.get(j);\n                }\n                // Set position and size of trail\n                // Multiply by five due to preset size of Curve\n                // TODO hook curve size multiplier into config\n                int position \u003d i * 5 + j;\n                int size \u003d trail.size() * 5;\n                // Get the rainbow color from helper method.\n                // Dividing by 3 to throttle the speed of the rainbow color\n                final Color color \u003d getColor(isPartyMode ? size : size / 3, isPartyMode ? position : position / 3);\n                graphics.setColor(color);\n\n                // Draw lines of the trail\n                // We are drawing three to fill in gaps and slight inconsistencies\n                // Still a small bug when drawing large circles very quickly\n                // Causes lines to occasionally overlap at the edges\n                if(previous !\u003d null \u0026\u0026 current !\u003d null) {\n                    graphics.drawLine(previous.getX(), previous.getY(), current.getX(), current.getY());\n                }\n                if(before !\u003d null \u0026\u0026 after !\u003d null) {\n                    graphics.drawLine(before.getX(), before.getY(), after.getX(), after.getY());\n                }\n                if(midBefore !\u003d null \u0026\u0026 midAfter !\u003d null) {\n                    graphics.drawLine(midBefore.getX(), midBefore.getY(), midAfter.getX(), midAfter.getY());\n                    // Progress mid points\n                    midBefore \u003d midAfter;\n                    midAfter \u003d null;\n                }\n            }\n        }\n        return null;\n    }\n}","filePath":"src\\main\\java\\com\\rainbowrave\\RainbowRaveMouseTrailOverlay.java"},{"fileName":"RainbowRaveMouseTrailPlugin.java","content":"/*\n * Copyright (c) 2022, Ryan Bell \u003cllaver@live.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.rainbowrave;\n\nimport java.awt.event.MouseEvent;\nimport java.util.*;\nimport java.util.Deque;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.ClientTick;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.input.MouseAdapter;\nimport net.runelite.client.input.MouseManager;\n\n@Slf4j\npublic class RainbowRaveMouseTrailPlugin\n{\n    private final Deque\u003cCurve\u003e curve \u003d new ArrayDeque\u003c\u003e();\n    private Point temp \u003d null;\n\n    @Inject\n    private MouseManager mouseManager;\n\n    private final MouseAdapter mouseAdapter \u003d new MouseAdapter() {\n        @Override\n        public MouseEvent mouseMoved(MouseEvent event)\n        {\n            updateMousePositions(new Point(event.getX(), event.getY()));\n            return event;\n        }\n        @Override\n        public MouseEvent mouseDragged(MouseEvent event)\n        {\n            updateMousePositions(new Point(event.getX(), event.getY()));\n            return event;\n        }\n    };\n\n    protected void startUp()\n    {\n        setMouseListenerEnabled(true);\n    }\n\n    protected void shutDown()\n    {\n        curve.clear();\n\n        setMouseListenerEnabled(false);\n    }\n\n    public void setMouseListenerEnabled(boolean enabled)\n    {\n        if (enabled)\n        {\n            mouseManager.registerMouseListener(mouseAdapter);\n        }\n        else\n        {\n            mouseManager.unregisterMouseListener(mouseAdapter);\n        }\n    }\n\n    @Subscribe\n    public void onClientTick(ClientTick event)\n    {\n        popTrail();\n        popTrail();\n    }\n\n    @Subscribe\n    public void onConfigChanged(ConfigChanged configChanged) {\n        if (configChanged.getGroup().equals(\"rainbow_rave\") \u0026\u0026 configChanged.getKey().equals(\"whichMouseTrailStyle\") \u0026\u0026 configChanged.getNewValue() !\u003d null) {\n\t\t\tsetMouseListenerEnabled(!configChanged.getNewValue().equals(\"NONE\"));\n\t\t}\n    }\n\n    public void updateMousePositions(Point point) {\n            if (curve.size() \u003c 50) {\n                if (temp !\u003d null) {\n                    Curve current \u003d new Curve(temp, point);\n                    curve.add(current);\n                }\n                temp \u003d point;\n            }\n    }\n\n    public Deque\u003cCurve\u003e getTrail() {\n        return curve;\n    }\n\n    public void popTrail() {\n        if(curve.size() \u003e 0) {\n            curve.pop();\n        }\n    }\n}","filePath":"src\\main\\java\\com\\rainbowrave\\RainbowRaveMouseTrailPlugin.java"},{"fileName":"RainbowRaveNpcIndicatorsPlugin.java","content":"/*\n * Copyright (c) 2018, James Swindle \u003cwilingua@gmail.com\u003e\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.rainbowrave;\n\nimport com.google.common.annotations.VisibleForTesting;\nimport com.google.common.base.MoreObjects;\nimport java.awt.Color;\nimport java.time.Instant;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.function.Function;\nimport java.util.function.Predicate;\nimport javax.inject.Inject;\nimport lombok.AccessLevel;\nimport lombok.Builder;\nimport lombok.Getter;\nimport lombok.NonNull;\nimport lombok.Value;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.GraphicID;\nimport net.runelite.api.GraphicsObject;\nimport net.runelite.api.MenuAction;\nimport net.runelite.api.NPC;\nimport net.runelite.api.NPCComposition;\nimport net.runelite.api.WorldView;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.GraphicsObjectCreated;\nimport net.runelite.api.events.MenuOptionClicked;\nimport net.runelite.api.events.NpcChanged;\nimport net.runelite.api.events.NpcDespawned;\nimport net.runelite.api.events.NpcSpawned;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.game.NpcUtil;\nimport net.runelite.client.plugins.npchighlight.NpcIndicatorsConfig;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.Text;\nimport net.runelite.client.util.WildcardMatcher;\n\n@Slf4j\npublic class RainbowRaveNpcIndicatorsPlugin\n{\n\tprivate static final int MAX_ACTOR_VIEW_RANGE \u003d 15;\n\n\t// Option added to NPC menu\n\tprivate static final String TAG \u003d \"Tag\";\n\tprivate static final String UNTAG \u003d \"Un-tag\";\n\n\tprivate static final String TAG_ALL \u003d \"Tag-All\";\n\tprivate static final String UNTAG_ALL \u003d \"Un-tag-All\";\n\n\tprivate static final String STYLE_HULL \u003d \"hull\";\n\tprivate static final String STYLE_TILE \u003d \"tile\";\n\tprivate static final String STYLE_TRUE_TILE \u003d \"truetile\";\n\tprivate static final String STYLE_SW_TILE \u003d \"swtile\";\n\tprivate static final String STYLE_SW_TRUE_TILE \u003d \"swtruetile\";\n\tprivate static final String STYLE_OUTLINE \u003d \"outline\";\n\n\t@Inject private Client client;\n\t@Inject private NpcIndicatorsConfig config;\n\t@Inject private OverlayManager overlayManager;\n\t@Inject private ClientThread clientThread;\n\t@Inject private NpcUtil npcUtil;\n\t@Inject private ConfigManager configManager;\n\n\t/**\n\t * NPCs to highlight\n\t */\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate final Map\u003cNPC, HighlightedNpc\u003e highlightedNpcs \u003d new HashMap\u003c\u003e();\n\n\t/**\n\t * Dead NPCs that should be displayed with a respawn indicator if the config is on.\n\t */\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate final Map\u003cInteger, MemorizedNpc\u003e deadNpcsToDisplay \u003d new HashMap\u003c\u003e();\n\n\t/**\n\t * The time when the last game tick event ran.\n\t */\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate Instant lastTickUpdate;\n\n\t/**\n\t * Tagged NPCs that have died at some point, which are memorized to\n\t * remember when and where they will respawn\n\t */\n\tprivate final Map\u003cInteger, MemorizedNpc\u003e memorizedNpcs \u003d new HashMap\u003c\u003e();\n\n\t/**\n\t * Highlight strings from the configuration\n\t */\n\tprivate List\u003cString\u003e highlights \u003d new ArrayList\u003c\u003e();\n\n\t/**\n\t * NPC ids marked with the Tag option\n\t */\n\tprivate final Set\u003cInteger\u003e npcTags \u003d new HashSet\u003c\u003e();\n\n\t/**\n\t * Tagged NPCs that spawned this tick, which need to be verified that\n\t * they actually spawned and didn\u0027t just walk into view range.\n\t */\n\tprivate final List\u003cNPC\u003e spawnedNpcsThisTick \u003d new ArrayList\u003c\u003e();\n\n\t/**\n\t * Tagged NPCs that despawned this tick, which need to be verified that\n\t * they actually spawned and didn\u0027t just walk into view range.\n\t */\n\tprivate final List\u003cNPC\u003e despawnedNpcsThisTick \u003d new ArrayList\u003c\u003e();\n\n\t/**\n\t * World locations of graphics object which indicate that an\n\t * NPC teleported that were played this tick.\n\t */\n\tprivate final Set\u003cWorldPoint\u003e teleportGraphicsObjectSpawnedThisTick \u003d new HashSet\u003c\u003e();\n\n\t/**\n\t * The players location on the last game tick.\n\t */\n\tprivate WorldPoint lastPlayerLocation;\n\n\t/**\n\t * When hopping worlds, NPCs can spawn without them actually respawning,\n\t * so we would not want to mark it as a real spawn in those cases.\n\t */\n\tprivate boolean skipNextSpawnCheck \u003d false;\n\n\tprivate final List\u003cFunction\u003cNPC, HighlightedNpc\u003e\u003e higlightPredicates \u003d new ArrayList\u003c\u003e();\n\n\tprotected void startUp()\n\t{\n\t\tclientThread.invoke(() -\u003e\n\t\t{\n\t\t\tskipNextSpawnCheck \u003d true;\n\t\t\trebuild();\n\t\t});\n\t}\n\n\tprotected void shutDown()\n\t{\n\t\tclientThread.invoke(() -\u003e\n\t\t{\n\t\t\tdeadNpcsToDisplay.clear();\n\t\t\tmemorizedNpcs.clear();\n\t\t\tspawnedNpcsThisTick.clear();\n\t\t\tdespawnedNpcsThisTick.clear();\n\t\t\tteleportGraphicsObjectSpawnedThisTick.clear();\n\t\t\tnpcTags.clear();\n\t\t\thighlightedNpcs.clear();\n\t\t});\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged event)\n\t{\n\t\tif (event.getGameState() \u003d\u003d GameState.LOGIN_SCREEN ||\n\t\t\tevent.getGameState() \u003d\u003d GameState.HOPPING)\n\t\t{\n\t\t\thighlightedNpcs.clear();\n\t\t\tdeadNpcsToDisplay.clear();\n\t\t\tmemorizedNpcs.forEach((id, npc) -\u003e npc.setDiedOnTick(-1));\n\t\t\tlastPlayerLocation \u003d null;\n\t\t\tskipNextSpawnCheck \u003d true;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged configChanged)\n\t{\n\t\tif (!configChanged.getGroup().equals(NpcIndicatorsConfig.GROUP))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tclientThread.invoke(this::rebuild);\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOptionClicked(MenuOptionClicked click)\n\t{\n\t\tif (click.getMenuAction() !\u003d MenuAction.RUNELITE ||\n\t\t\t!(click.getMenuOption().equals(TAG) || click.getMenuOption().equals(UNTAG) ||\n\t\t\t\tclick.getMenuOption().equals(TAG_ALL) || click.getMenuOption().equals(UNTAG_ALL)))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tWorldView worldView \u003d client.getTopLevelWorldView();\n\t\tfinal int id \u003d click.getId();\n\t\tfinal NPC npc \u003d worldView.npcs().byIndex(id);\n\n\t\tif (npc \u003d\u003d null || npc.getName() \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (click.getMenuOption().equals(TAG) || click.getMenuOption().equals(UNTAG))\n\t\t{\n\t\t\tfinal boolean removed \u003d npcTags.remove(id);\n\n\t\t\tif (removed)\n\t\t\t{\n\t\t\t\tif (!highlightMatchesNPCName(npc.getName()))\n\t\t\t\t{\n\t\t\t\t\thighlightedNpcs.remove(npc);\n\t\t\t\t\tmemorizedNpcs.remove(npc.getIndex());\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!worldView.isInstance())\n\t\t\t\t{\n\t\t\t\t\tmemorizeNpc(npc);\n\t\t\t\t\tnpcTags.add(id);\n\t\t\t\t}\n\t\t\t\thighlightedNpcs.put(npc, highlightedNpc(npc));\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onNpcSpawned(NpcSpawned npcSpawned)\n\t{\n\t\tfinal NPC npc \u003d npcSpawned.getNpc();\n\t\tfinal String npcName \u003d npc.getName();\n\n\t\tif (npcName \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (npcTags.contains(npc.getIndex()))\n\t\t{\n\t\t\tmemorizeNpc(npc);\n\t\t\thighlightedNpcs.put(npc, highlightedNpc(npc));\n\t\t\tspawnedNpcsThisTick.add(npc);\n\t\t\treturn;\n\t\t}\n\n\t\tWorldView worldView \u003d client.getTopLevelWorldView();\n\t\tif (highlightMatchesNPCName(npcName))\n\t\t{\n\t\t\thighlightedNpcs.put(npc, highlightedNpc(npc));\n\t\t\tif (!worldView.isInstance())\n\t\t\t{\n\t\t\t\tmemorizeNpc(npc);\n\t\t\t\tspawnedNpcsThisTick.add(npc);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tfor (Function\u003cNPC, HighlightedNpc\u003e predicate : higlightPredicates)\n\t\t{\n\t\t\tHighlightedNpc highlightedNpc \u003d predicate.apply(npc);\n\t\t\tif (highlightedNpc !\u003d null)\n\t\t\t{\n\t\t\t\thighlightedNpcs.put(npc, highlightedNpc);\n\t\t\t\tif (!worldView.isInstance())\n\t\t\t\t{\n\t\t\t\t\tmemorizeNpc(npc);\n\t\t\t\t\tspawnedNpcsThisTick.add(npc);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t}\n\n\t@Subscribe\n\tpublic void onNpcDespawned(NpcDespawned npcDespawned)\n\t{\n\t\tfinal NPC npc \u003d npcDespawned.getNpc();\n\n\t\tif (memorizedNpcs.containsKey(npc.getIndex()))\n\t\t{\n\t\t\tdespawnedNpcsThisTick.add(npc);\n\t\t}\n\n\t\thighlightedNpcs.remove(npc);\n\t}\n\n\t@Subscribe\n\tpublic void onNpcChanged(NpcChanged event)\n\t{\n\t\tfinal NPC npc \u003d event.getNpc();\n\t\tfinal String npcName \u003d npc.getName();\n\n\t\thighlightedNpcs.remove(npc);\n\n\t\tif (npcName \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (npcTags.contains(npc.getIndex())\n\t\t\t|| highlightMatchesNPCName(npcName))\n\t\t{\n\t\t\thighlightedNpcs.put(npc, highlightedNpc(npc));\n\t\t\treturn;\n\t\t}\n\n\t\tfor (Function\u003cNPC, HighlightedNpc\u003e predicate : higlightPredicates)\n\t\t{\n\t\t\tHighlightedNpc highlightedNpc \u003d predicate.apply(npc);\n\t\t\tif (highlightedNpc !\u003d null)\n\t\t\t{\n\t\t\t\thighlightedNpcs.put(npc, highlightedNpc);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGraphicsObjectCreated(GraphicsObjectCreated event)\n\t{\n\t\tfinal GraphicsObject go \u003d event.getGraphicsObject();\n\n\t\tif (go.getId() \u003d\u003d GraphicID.GREY_BUBBLE_TELEPORT)\n\t\t{\n\t\t\tteleportGraphicsObjectSpawnedThisTick.add(WorldPoint.fromLocal(client, go.getLocation()));\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event)\n\t{\n\t\tremoveOldHighlightedRespawns();\n\t\tvalidateSpawnedNpcs();\n\t\tlastTickUpdate \u003d Instant.now();\n\t\tlastPlayerLocation \u003d client.getLocalPlayer().getWorldLocation();\n\t}\n\n\tprivate static boolean isInViewRange(WorldPoint wp1, WorldPoint wp2)\n\t{\n\t\tint distance \u003d wp1.distanceTo(wp2);\n\t\treturn distance \u003c MAX_ACTOR_VIEW_RANGE;\n\t}\n\n\tprivate static WorldPoint getWorldLocationBehind(NPC npc)\n\t{\n\t\tfinal int orientation \u003d npc.getOrientation() / 256;\n\t\tint dx \u003d 0, dy \u003d 0;\n\n\t\tswitch (orientation)\n\t\t{\n\t\t\tcase 0: // South\n\t\t\t\tdy \u003d -1;\n\t\t\t\tbreak;\n\t\t\tcase 1: // Southwest\n\t\t\t\tdx \u003d -1;\n\t\t\t\tdy \u003d -1;\n\t\t\t\tbreak;\n\t\t\tcase 2: // West\n\t\t\t\tdx \u003d -1;\n\t\t\t\tbreak;\n\t\t\tcase 3: // Northwest\n\t\t\t\tdx \u003d -1;\n\t\t\t\tdy \u003d 1;\n\t\t\t\tbreak;\n\t\t\tcase 4: // North\n\t\t\t\tdy \u003d 1;\n\t\t\t\tbreak;\n\t\t\tcase 5: // Northeast\n\t\t\t\tdx \u003d 1;\n\t\t\t\tdy \u003d 1;\n\t\t\t\tbreak;\n\t\t\tcase 6: // East\n\t\t\t\tdx \u003d 1;\n\t\t\t\tbreak;\n\t\t\tcase 7: // Southeast\n\t\t\t\tdx \u003d 1;\n\t\t\t\tdy \u003d -1;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tfinal WorldPoint currWP \u003d npc.getWorldLocation();\n\t\treturn new WorldPoint(currWP.getX() - dx, currWP.getY() - dy, currWP.getPlane());\n\t}\n\n\tprivate void memorizeNpc(NPC npc)\n\t{\n\t\tfinal int npcIndex \u003d npc.getIndex();\n\t\tmemorizedNpcs.putIfAbsent(npcIndex, new MemorizedNpc(npc));\n\t}\n\n\tprivate void removeOldHighlightedRespawns()\n\t{\n\t\tdeadNpcsToDisplay.values().removeIf(x -\u003e x.getDiedOnTick() + x.getRespawnTime() \u003c\u003d client.getTickCount() + 1);\n\t}\n\n\t@VisibleForTesting\n\tList\u003cString\u003e getHighlights()\n\t{\n\t\tfinal String configNpcs \u003d config.getNpcToHighlight();\n\n\t\tif (configNpcs.isEmpty())\n\t\t{\n\t\t\treturn Collections.emptyList();\n\t\t}\n\n\t\treturn Text.fromCSV(configNpcs);\n\t}\n\n\tpublic void rebuild()\n\t{\n\t\thighlights \u003d getHighlights();\n\t\thighlightedNpcs.clear();\n\n\t\tif (client.getGameState() !\u003d GameState.LOGGED_IN \u0026\u0026\n\t\t\tclient.getGameState() !\u003d GameState.LOADING)\n\t\t{\n\t\t\t// NPCs are still in the client after logging out,\n\t\t\t// but we don\u0027t want to highlight those.\n\t\t\treturn;\n\t\t}\n\n\t\tWorldView worldView \u003d client.getTopLevelWorldView();\n\t\touter:\n\t\tfor (NPC npc : worldView.npcs())\n\t\t{\n\t\t\tfinal String npcName \u003d npc.getName();\n\n\t\t\tif (npcName \u003d\u003d null)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (npcTags.contains(npc.getIndex()))\n\t\t\t{\n\t\t\t\thighlightedNpcs.put(npc, highlightedNpc(npc));\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (highlightMatchesNPCName(npcName))\n\t\t\t{\n\t\t\t\tif (!worldView.isInstance())\n\t\t\t\t{\n\t\t\t\t\tmemorizeNpc(npc);\n\t\t\t\t}\n\t\t\t\thighlightedNpcs.put(npc, highlightedNpc(npc));\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor (Function\u003cNPC, HighlightedNpc\u003e predicate : higlightPredicates)\n\t\t\t{\n\t\t\t\tHighlightedNpc highlightedNpc \u003d predicate.apply(npc);\n\t\t\t\tif (highlightedNpc !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tif (!worldView.isInstance())\n\t\t\t\t\t{\n\t\t\t\t\t\tmemorizeNpc(npc);\n\t\t\t\t\t}\n\t\t\t\t\thighlightedNpcs.put(npc, highlightedNpc);\n\t\t\t\t\tcontinue outer;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// NPC is not highlighted\n\t\t\tmemorizedNpcs.remove(npc.getIndex());\n\t\t}\n\t}\n\n\tprivate boolean highlightMatchesNPCName(String npcName)\n\t{\n\t\tfor (String highlight : highlights)\n\t\t{\n\t\t\tif (WildcardMatcher.matches(highlight, npcName))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate void validateSpawnedNpcs()\n\t{\n\t\tif (skipNextSpawnCheck)\n\t\t{\n\t\t\tskipNextSpawnCheck \u003d false;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor (NPC npc : despawnedNpcsThisTick)\n\t\t\t{\n\t\t\t\tif (!teleportGraphicsObjectSpawnedThisTick.isEmpty())\n\t\t\t\t{\n\t\t\t\t\tif (teleportGraphicsObjectSpawnedThisTick.contains(npc.getWorldLocation()))\n\t\t\t\t\t{\n\t\t\t\t\t\t// NPC teleported away, so we don\u0027t want to add the respawn timer\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (isInViewRange(client.getLocalPlayer().getWorldLocation(), npc.getWorldLocation()))\n\t\t\t\t{\n\t\t\t\t\tfinal MemorizedNpc mn \u003d memorizedNpcs.get(npc.getIndex());\n\n\t\t\t\t\tif (mn !\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tmn.setDiedOnTick(client.getTickCount() + 1); // This runs before tickCounter updates, so we add 1\n\n\t\t\t\t\t\tif (!mn.getPossibleRespawnLocations().isEmpty())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlog.debug(\"Starting {} tick countdown for {}\", mn.getRespawnTime(), mn.getNpcName());\n\t\t\t\t\t\t\tdeadNpcsToDisplay.put(mn.getNpcIndex(), mn);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (NPC npc : spawnedNpcsThisTick)\n\t\t\t{\n\t\t\t\tif (!teleportGraphicsObjectSpawnedThisTick.isEmpty())\n\t\t\t\t{\n\t\t\t\t\tif (teleportGraphicsObjectSpawnedThisTick.contains(npc.getWorldLocation()) ||\n\t\t\t\t\t\tteleportGraphicsObjectSpawnedThisTick.contains(getWorldLocationBehind(npc)))\n\t\t\t\t\t{\n\t\t\t\t\t\t// NPC teleported here, so we don\u0027t want to update the respawn timer\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (lastPlayerLocation !\u003d null \u0026\u0026 isInViewRange(lastPlayerLocation, npc.getWorldLocation()))\n\t\t\t\t{\n\t\t\t\t\tfinal MemorizedNpc mn \u003d memorizedNpcs.get(npc.getIndex());\n\n\t\t\t\t\tif (mn.getDiedOnTick() !\u003d -1)\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal int respawnTime \u003d client.getTickCount() + 1 - mn.getDiedOnTick();\n\n\t\t\t\t\t\t// By killing a monster and leaving the area before seeing it again, an erroneously lengthy\n\t\t\t\t\t\t// respawn time can be recorded. Thus, if the respawn time is already set and is greater than\n\t\t\t\t\t\t// the observed time, assume that the lower observed respawn time is correct.\n\t\t\t\t\t\tif (mn.getRespawnTime() \u003d\u003d -1 || respawnTime \u003c mn.getRespawnTime())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmn.setRespawnTime(respawnTime);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmn.setDiedOnTick(-1);\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal WorldPoint npcLocation \u003d npc.getWorldLocation();\n\n\t\t\t\t\t// An NPC can move in the same tick as it spawns, so we also have\n\t\t\t\t\t// to consider whatever tile is behind the npc\n\t\t\t\t\tfinal WorldPoint possibleOtherNpcLocation \u003d getWorldLocationBehind(npc);\n\n\t\t\t\t\tmn.getPossibleRespawnLocations().removeIf(x -\u003e\n\t\t\t\t\t\t!x.equals(npcLocation) \u0026\u0026 !x.equals(possibleOtherNpcLocation));\n\n\t\t\t\t\tif (mn.getPossibleRespawnLocations().isEmpty())\n\t\t\t\t\t{\n\t\t\t\t\t\tmn.getPossibleRespawnLocations().add(npcLocation);\n\t\t\t\t\t\tmn.getPossibleRespawnLocations().add(possibleOtherNpcLocation);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tspawnedNpcsThisTick.clear();\n\t\tdespawnedNpcsThisTick.clear();\n\t\tteleportGraphicsObjectSpawnedThisTick.clear();\n\t}\n\n\t@Value\n\t@Builder\n\tpublic static class HighlightedNpc\n\t{\n\t\tNPC npc;\n\t\t@NonNull\n\t\tColor highlightColor;\n\t\t@Builder.Default\n\t\tColor fillColor \u003d new Color(0, 0, 0, 50);\n\t\tboolean hull;\n\t\tboolean tile;\n\t\tboolean trueTile;\n\t\tboolean swTile;\n\t\tboolean swTrueTile;\n\t\tboolean outline;\n\t\tboolean name;\n\t\tboolean nameOnMinimap;\n\t\t@Builder.Default\n\t\tfloat borderWidth \u003d 2.0f;\n\t\tint outlineFeather;\n\t\tPredicate\u003cNPC\u003e render;\n\t}\n\n\tpublic HighlightedNpc highlightedPlayer()\n\t{\n\t\treturn HighlightedNpc.builder()\n\t\t\t.highlightColor(config.highlightColor())\n\t\t\t.fillColor(config.fillColor())\n\t\t\t.hull(config.highlightHull())\n\t\t\t.tile(config.highlightTile())\n\t\t\t.trueTile(config.highlightTrueTile())\n\t\t\t.swTile(config.highlightSouthWestTile())\n\t\t\t.swTrueTile(config.highlightSouthWestTrueTile())\n\t\t\t.outline(config.highlightOutline())\n\t\t\t.name(config.drawNames())\n\t\t\t.nameOnMinimap(config.drawMinimapNames())\n\t\t\t.borderWidth((float) config.borderWidth())\n\t\t\t.outlineFeather(config.outlineFeather())\n\t\t\t.render(this::render)\n\t\t\t.build();\n\t}\n\n\tpublic HighlightedNpc highlightedNpc(NPC npc)\n\t{\n\t\tfinal int npcId \u003d npc.getId();\n\n\t\tfinal String style \u003d getNpcTagStyle(npcId);\n\t\tfinal boolean hull, tile, trueTile, swTile, swTrueTile, outline;\n\t\t// if set, value from config overrides global config\n\t\tif (style !\u003d null)\n\t\t{\n\t\t\thull \u003d STYLE_HULL.equals(style);\n\t\t\ttile \u003d STYLE_TILE.equals(style);\n\t\t\ttrueTile \u003d STYLE_TRUE_TILE.equals(style);\n\t\t\tswTile \u003d STYLE_SW_TILE.equals(style);\n\t\t\tswTrueTile \u003d STYLE_SW_TRUE_TILE.equals(style);\n\t\t\toutline \u003d STYLE_OUTLINE.equals(style);\n\t\t}\n\t\telse\n\t\t{\n\t\t\thull \u003d config.highlightHull();\n\t\t\ttile \u003d config.highlightTile();\n\t\t\ttrueTile \u003d config.highlightTrueTile();\n\t\t\tswTile \u003d config.highlightSouthWestTile();\n\t\t\tswTrueTile \u003d config.highlightSouthWestTrueTile();\n\t\t\toutline \u003d config.highlightOutline();\n\t\t}\n\n\t\treturn HighlightedNpc.builder()\n\t\t\t.npc(npc)\n\t\t\t.highlightColor(MoreObjects.firstNonNull(getNpcHighlightColor(npcId), config.highlightColor()))\n\t\t\t.fillColor(config.fillColor())\n\t\t\t.hull(hull)\n\t\t\t.tile(tile)\n\t\t\t.trueTile(trueTile)\n\t\t\t.swTile(swTile)\n\t\t\t.swTrueTile(swTrueTile)\n\t\t\t.outline(outline)\n\t\t\t.name(config.drawNames())\n\t\t\t.nameOnMinimap(config.drawMinimapNames())\n\t\t\t.borderWidth((float) config.borderWidth())\n\t\t\t.outlineFeather(config.outlineFeather())\n\t\t\t.render(this::render)\n\t\t\t.build();\n\t}\n\n\tprivate boolean render(NPC n)\n\t{\n\t\tif (npcUtil.isDying(n) \u0026\u0026 config.ignoreDeadNpcs())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tfinal NPCComposition c \u003d n.getTransformedComposition();\n\t\tif (c !\u003d null \u0026\u0026 c.isFollower() \u0026\u0026 config.ignorePets())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprivate Color getNpcHighlightColor(int npcId)\n\t{\n\t\treturn configManager.getConfiguration(NpcIndicatorsConfig.GROUP, \"highlightcolor_\" + npcId, Color.class);\n\t}\n\n\tprivate String getNpcTagStyle(int npcId)\n\t{\n\t\treturn configManager.getConfiguration(NpcIndicatorsConfig.GROUP, \"tagstyle_\" + npcId);\n\t}\n\n\tpublic void registerHighlighter(Function\u003cNPC, HighlightedNpc\u003e p)\n\t{\n\t\thiglightPredicates.add(p);\n\t}\n\n\tpublic void unregisterHighlighter(Function\u003cNPC, HighlightedNpc\u003e p)\n\t{\n\t\thiglightPredicates.remove(p);\n\t}\n}\n","filePath":"src\\main\\java\\com\\rainbowrave\\RainbowRaveNpcIndicatorsPlugin.java"},{"fileName":"RainbowRaveNpcSceneOverlay.java","content":"/*\n * Copyright (c) 2018, James Swindle \u003cwilingua@gmail.com\u003e\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.rainbowrave;\n\nimport com.rainbowrave.RainbowRaveNpcIndicatorsPlugin.HighlightedNpc;\nimport java.awt.BasicStroke;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Polygon;\nimport java.awt.Shape;\nimport java.text.DecimalFormat;\nimport java.text.NumberFormat;\nimport java.time.Instant;\nimport java.util.Locale;\nimport net.runelite.api.Actor;\nimport net.runelite.api.Client;\nimport net.runelite.api.Constants;\nimport net.runelite.api.NPCComposition;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Player;\nimport net.runelite.api.Point;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.plugins.npchighlight.NpcIndicatorsConfig;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\nimport net.runelite.client.ui.overlay.outline.ModelOutlineRenderer;\nimport net.runelite.client.util.Text;\n\npublic class RainbowRaveNpcSceneOverlay extends Overlay\n{\n\t// Anything but white text is quite hard to see since it is drawn on\n\t// a dark background\n\tprivate static final Color TEXT_COLOR \u003d Color.WHITE;\n\n\tprivate static final NumberFormat TIME_LEFT_FORMATTER \u003d DecimalFormat.getInstance(Locale.US);\n\n\tstatic\n\t{\n\t\t((DecimalFormat)TIME_LEFT_FORMATTER).applyPattern(\"#0.0\");\n\t}\n\n\tprivate final Client client;\n\tprivate final NpcIndicatorsConfig config;\n\tprivate final RainbowRaveNpcIndicatorsPlugin plugin;\n\tprivate final RainbowRaveConfig rainbowRaveConfig;\n\tprivate final ModelOutlineRenderer modelOutlineRenderer;\n\n\tprivate final RainbowRavePlugin rainbowRavePlugin;\n\n\tRainbowRaveNpcSceneOverlay(Client client, NpcIndicatorsConfig config, RainbowRaveNpcIndicatorsPlugin plugin,\n\t\t\t\t\t\t\t   ModelOutlineRenderer modelOutlineRenderer, RainbowRavePlugin rainbowRavePlugin, RainbowRaveConfig rainbowRaveConfig)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.config \u003d config;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.modelOutlineRenderer \u003d modelOutlineRenderer;\n\t\tthis.rainbowRavePlugin \u003d rainbowRavePlugin;\n\t\tthis.rainbowRaveConfig \u003d rainbowRaveConfig;\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (enabled)\n\t\t{\n\t\t\tif (config.showRespawnTimer())\n\t\t\t{\n\t\t\t\tplugin.getDeadNpcsToDisplay().forEach((id, npc) -\u003e renderNpcRespawn(npc, graphics));\n\t\t\t}\n\n\t\t\tfor (HighlightedNpc highlightedNpc : plugin.getHighlightedNpcs().values())\n\t\t\t{\n\t\t\t\trenderNpcOverlay(graphics, highlightedNpc, null);\n\t\t\t}\n\t\t}\n\n\t\tif (rainbowRaveConfig.highlightSelf() || rainbowRaveConfig.highlightOthers())\n\t\t{\n\t\t\t// The NPC here is never used, but HighlightedNpc requires it to be non-null.\n\t\t\tif (rainbowRaveConfig.highlightSelf())\n\t\t\t{\n\t\t\t\trenderNpcOverlay(graphics, plugin.highlightedPlayer(), client.getLocalPlayer());\n\t\t\t}\n\t\t\tif (rainbowRaveConfig.highlightOthers())\n\t\t\t{\n\t\t\t\tfor (Player player : client.getTopLevelWorldView().players())\n\t\t\t\t{\n\t\t\t\t\tif (player !\u003d client.getLocalPlayer())\n\t\t\t\t\t\trenderNpcOverlay(graphics, plugin.highlightedPlayer(), player);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate void renderNpcRespawn(final MemorizedNpc npc, final Graphics2D graphics)\n\t{\n\t\tif (npc.getPossibleRespawnLocations().isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal WorldPoint respawnLocation \u003d npc.getPossibleRespawnLocations().get(0);\n\t\tfinal LocalPoint lp \u003d LocalPoint.fromWorld(npc.getWorldView(), respawnLocation.getX(), respawnLocation.getY());\n\n\t\tif (lp \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal LocalPoint centerLp \u003d new LocalPoint(\n\t\t\tlp.getX() + Perspective.LOCAL_TILE_SIZE * (npc.getNpcSize() - 1) / 2,\n\t\t\tlp.getY() + Perspective.LOCAL_TILE_SIZE * (npc.getNpcSize() - 1) / 2,\n\t\t\tnpc.getWorldView());\n\n\t\tfinal Polygon poly \u003d Perspective.getCanvasTileAreaPoly(client, centerLp, npc.getNpcSize());\n\t\trenderPoly(graphics, config.highlightColor(), config.fillColor(), poly);\n\n\t\tfinal Instant now \u003d Instant.now();\n\t\tfinal double baseTick \u003d ((npc.getDiedOnTick() + npc.getRespawnTime()) - client.getTickCount()) * (Constants.GAME_TICK_LENGTH / 1000.0);\n\t\tfinal double sinceLast \u003d (now.toEpochMilli() - plugin.getLastTickUpdate().toEpochMilli()) / 1000.0;\n\t\tfinal double timeLeft \u003d Math.max(0.0, baseTick - sinceLast);\n\t\tfinal String timeLeftStr \u003d TIME_LEFT_FORMATTER.format(timeLeft);\n\n\t\tfinal int textWidth \u003d graphics.getFontMetrics().stringWidth(timeLeftStr);\n\t\tfinal int textHeight \u003d graphics.getFontMetrics().getAscent();\n\n\t\tfinal Point canvasPoint \u003d Perspective\n\t\t\t.localToCanvas(client, centerLp, respawnLocation.getPlane());\n\n\t\tif (canvasPoint !\u003d null)\n\t\t{\n\t\t\tfinal Point canvasCenterPoint \u003d new Point(\n\t\t\t\tcanvasPoint.getX() - textWidth / 2,\n\t\t\t\tcanvasPoint.getY() + textHeight / 2);\n\n\t\t\tOverlayUtil.renderTextLocation(graphics, canvasCenterPoint, timeLeftStr, TEXT_COLOR);\n\t\t}\n\t}\n\n\tprivate void renderNpcOverlay(Graphics2D graphics, HighlightedNpc highlightedNpc, Player player)\n\t{\n\t\tActor actor;\n\t\tNPCComposition npcComposition \u003d null;\n\t\tif (player \u003d\u003d null)\n\t\t{\n\t\t\tactor \u003d highlightedNpc.getNpc();\n\t\t\tnpcComposition \u003d highlightedNpc.getNpc().getTransformedComposition();\n\t\t\tif (npcComposition \u003d\u003d null || !npcComposition.isInteractible()\n\t\t\t\t|| (actor.isDead() \u0026\u0026 config.ignoreDeadNpcs()))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\tactor \u003d player;\n\t\t}\n\n\t\tfinal Color borderColor \u003d rainbowRavePlugin.getColor(actor.hashCode());\n\t\tColor fillColor \u003d rainbowRavePlugin.getColor(actor.hashCode());\n\t\tfillColor \u003d new Color(fillColor.getRed(), fillColor.getGreen(), fillColor.getBlue(), config.fillColor().getAlpha());\n\n\t\tif (highlightedNpc.isHull())\n\t\t{\n\t\t\tShape objectClickbox \u003d actor.getConvexHull();\n\t\t\trenderPoly(graphics, borderColor, fillColor, objectClickbox);\n\t\t}\n\n\t\tif (highlightedNpc.isTile())\n\t\t{\n\t\t\tint size \u003d npcComposition \u003d\u003d null ? 1 : npcComposition.getSize();\n\t\t\tLocalPoint lp \u003d actor.getLocalLocation();\n\t\t\tPolygon tilePoly \u003d Perspective.getCanvasTileAreaPoly(client, lp, size);\n\n\t\t\trenderPoly(graphics, borderColor, fillColor, tilePoly);\n\t\t}\n\n\t\tif (highlightedNpc.isTrueTile())\n\t\t{\n\t\t\tLocalPoint lp \u003d LocalPoint.fromWorld(actor.getWorldView(), actor.getWorldLocation()); // centered on sw tile\n\t\t\tif (lp !\u003d null)\n\t\t\t{\n\t\t\t\tint size \u003d npcComposition \u003d\u003d null ? 1 : npcComposition.getSize();\n\t\t\t\tfinal LocalPoint centerLp \u003d new LocalPoint(\n\t\t\t\t\tlp.getX() + Perspective.LOCAL_TILE_SIZE * (size - 1) / 2,\n\t\t\t\t\tlp.getY() + Perspective.LOCAL_TILE_SIZE * (size - 1) / 2,\n\t\t\t\t\tactor.getWorldView());\n\t\t\t\tPolygon tilePoly \u003d Perspective.getCanvasTileAreaPoly(client, centerLp, size);\n\t\t\t\trenderPoly(graphics, borderColor, fillColor, tilePoly);\n\t\t\t}\n\t\t}\n\n\t\tif (highlightedNpc.isSwTile())\n\t\t{\n\t\t\tint size \u003d npcComposition \u003d\u003d null ? 1 : npcComposition.getSize();\n\t\t\tLocalPoint lp \u003d actor.getLocalLocation();\n\n\t\t\tint x \u003d lp.getX() - ((size - 1) * Perspective.LOCAL_TILE_SIZE / 2);\n\t\t\tint y \u003d lp.getY() - ((size - 1) * Perspective.LOCAL_TILE_SIZE / 2);\n\n\t\t\tPolygon southWestTilePoly \u003d Perspective.getCanvasTilePoly(client, new LocalPoint(x, y, actor.getWorldView()));\n\t\t\trenderPoly(graphics, borderColor, fillColor, southWestTilePoly);\n\t\t}\n\n\t\tif (highlightedNpc.isSwTrueTile())\n\t\t{\n\t\t\tLocalPoint lp \u003d LocalPoint.fromWorld(actor.getWorldView(), actor.getWorldLocation());\n\t\t\tif (lp !\u003d null)\n\t\t\t{\n\t\t\t\tPolygon tilePoly \u003d Perspective.getCanvasTilePoly(client, lp);\n\t\t\t\trenderPoly(graphics, borderColor, fillColor, tilePoly);\n\t\t\t}\n\t\t}\n\n\t\tif (highlightedNpc.isOutline())\n\t\t{\n\t\t\tif (player \u003d\u003d null)\n\t\t\t{\n\t\t\t\tmodelOutlineRenderer.drawOutline(highlightedNpc.getNpc(), (int) config.borderWidth(), borderColor, config.outlineFeather());\n\t\t\t} else {\n\t\t\t\tmodelOutlineRenderer.drawOutline(player, (int) config.borderWidth(), borderColor, config.outlineFeather());\n\t\t\t}\n\t\t}\n\n\t\tif (highlightedNpc.isName() \u0026\u0026 actor.getName() !\u003d null)\n\t\t{\n\t\t\tString npcName \u003d Text.removeTags(actor.getName());\n\t\t\tPoint textLocation \u003d actor.getCanvasTextLocation(graphics, npcName, actor.getLogicalHeight() + 40);\n\n\t\t\tif (textLocation !\u003d null)\n\t\t\t{\n\t\t\t\tOverlayUtil.renderTextLocation(graphics, textLocation, npcName, borderColor);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void renderPoly(Graphics2D graphics, Color borderColor, Color fillColor, Shape polygon)\n\t{\n\t\tif (polygon !\u003d null)\n\t\t{\n\t\t\tgraphics.setColor(borderColor);\n\t\t\tgraphics.setStroke(new BasicStroke((float) config.borderWidth()));\n\t\t\tgraphics.draw(polygon);\n\t\t\tgraphics.setColor(fillColor);\n\t\t\tgraphics.fill(polygon);\n\t\t}\n\t}\n\n\tprivate boolean enabled \u003d true;\n\tpublic void enable(boolean enabled)\n\t{\n\t\tthis.enabled \u003d enabled;\n\t}\n}\n","filePath":"src\\main\\java\\com\\rainbowrave\\RainbowRaveNpcSceneOverlay.java"},{"fileName":"RainbowRaveObjectIndicatorsOverlay.java","content":"/*\n * Copyright (c) 2018, Tomas Slusny \u003cslusnucky@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.rainbowrave;\n\nimport com.google.common.base.Strings;\nimport java.awt.BasicStroke;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Shape;\nimport java.awt.Stroke;\nimport net.runelite.api.Client;\nimport net.runelite.api.DecorativeObject;\nimport net.runelite.api.GameObject;\nimport net.runelite.api.GroundObject;\nimport net.runelite.api.ObjectComposition;\nimport net.runelite.api.TileObject;\nimport net.runelite.api.WallObject;\nimport net.runelite.client.plugins.objectindicators.ObjectIndicatorsConfig;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\nimport net.runelite.client.ui.overlay.outline.ModelOutlineRenderer;\n\nclass RainbowRaveObjectIndicatorsOverlay extends Overlay\n{\n\tprivate final Client client;\n\tprivate final ObjectIndicatorsConfig config;\n\tprivate final RainbowRaveObjectIndicatorsPlugin plugin;\n\tprivate final RainbowRaveConfig rainbowRaveConfig;\n\tprivate final ModelOutlineRenderer modelOutlineRenderer;\n\tprivate final RainbowRavePlugin rainbowRavePlugin;\n\n\tpublic RainbowRaveObjectIndicatorsOverlay(Client client, ObjectIndicatorsConfig config, RainbowRaveObjectIndicatorsPlugin plugin,\n\t\t\t\t\t\t\t\t\t\t\t   ModelOutlineRenderer modelOutlineRenderer, RainbowRavePlugin rainbowRavePlugin, RainbowRaveConfig rainbowRaveConfig)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.config \u003d config;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.modelOutlineRenderer \u003d modelOutlineRenderer;\n\t\tthis.rainbowRaveConfig \u003d rainbowRaveConfig;\n\t\tthis.rainbowRavePlugin \u003d rainbowRavePlugin;\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetPriority(Overlay.PRIORITY_LOW);\n\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tStroke stroke \u003d new BasicStroke((float) config.borderWidth());\n\t\tint plane \u003d client.getTopLevelWorldView().getPlane();\n\t\tfor (ColorTileObject colorTileObject : plugin.getObjects())\n\t\t{\n\t\t\tTileObject object \u003d colorTileObject.getTileObject();\n\t\t\tColor color \u003d rainbowRavePlugin.getColor(colorTileObject.hashCode());\n\n\t\t\tif (object.getPlane() !\u003d plane)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tObjectComposition composition \u003d colorTileObject.getComposition();\n\t\t\tif (composition.getImpostorIds() !\u003d null)\n\t\t\t{\n\t\t\t\t// This is a multiloc\n\t\t\t\tcomposition \u003d composition.getImpostor();\n\t\t\t\t// Only mark the object if the name still matches\n\t\t\t\tif (composition \u003d\u003d null\n\t\t\t\t\t|| Strings.isNullOrEmpty(composition.getName())\n\t\t\t\t\t|| \"null\".equals(composition.getName())\n\t\t\t\t\t|| !composition.getName().equals(colorTileObject.getName()))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (color \u003d\u003d null)\n\t\t\t{\n\t\t\t\t// Fallback to the current config if the object is marked before the addition of multiple colors\n\t\t\t\tcolor \u003d config.markerColor();\n\t\t\t}\n\n\t\t\tif (config.highlightHull())\n\t\t\t{\n\t\t\t\trenderConvexHull(graphics, object, color, stroke);\n\t\t\t}\n\n\t\t\tif (config.highlightOutline())\n\t\t\t{\n\t\t\t\tmodelOutlineRenderer.drawOutline(object, (int)config.borderWidth(), color, config.outlineFeather());\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate void renderConvexHull(Graphics2D graphics, TileObject object, Color color, Stroke stroke)\n\t{\n\t\tfinal Shape polygon;\n\t\tShape polygon2 \u003d null;\n\n\t\tif (object instanceof GameObject)\n\t\t{\n\t\t\tpolygon \u003d ((GameObject) object).getConvexHull();\n\t\t}\n\t\telse if (object instanceof WallObject)\n\t\t{\n\t\t\tpolygon \u003d ((WallObject) object).getConvexHull();\n\t\t\tpolygon2 \u003d ((WallObject) object).getConvexHull2();\n\t\t}\n\t\telse if (object instanceof DecorativeObject)\n\t\t{\n\t\t\tpolygon \u003d ((DecorativeObject) object).getConvexHull();\n\t\t\tpolygon2 \u003d ((DecorativeObject) object).getConvexHull2();\n\t\t}\n\t\telse if (object instanceof GroundObject)\n\t\t{\n\t\t\tpolygon \u003d ((GroundObject) object).getConvexHull();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpolygon \u003d object.getCanvasTilePoly();\n\t\t}\n\n\t\tif (polygon !\u003d null)\n\t\t{\n\t\t\tOverlayUtil.renderPolygon(graphics, polygon, color, stroke);\n\t\t}\n\n\t\tif (polygon2 !\u003d null)\n\t\t{\n\t\t\tOverlayUtil.renderPolygon(graphics, polygon2, color, stroke);\n\t\t}\n\t}\n}","filePath":"src\\main\\java\\com\\rainbowrave\\RainbowRaveObjectIndicatorsOverlay.java"},{"fileName":"RainbowRaveObjectIndicatorsPlugin.java","content":"/*\n * Copyright (c) 2018, Tomas Slusny \u003cslusnucky@gmail.com\u003e\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.rainbowrave;\n\nimport com.google.common.base.Strings;\nimport com.google.gson.Gson;\nimport com.google.gson.reflect.TypeToken;\nimport java.awt.Color;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.stream.Collectors;\nimport javax.annotation.Nullable;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.DecorativeObject;\nimport net.runelite.api.GameObject;\nimport net.runelite.api.GameState;\nimport net.runelite.api.GroundObject;\nimport net.runelite.api.MenuAction;\nimport net.runelite.api.ObjectComposition;\nimport net.runelite.api.Scene;\nimport net.runelite.api.Tile;\nimport net.runelite.api.TileObject;\nimport net.runelite.api.WallObject;\nimport net.runelite.api.WorldView;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.DecorativeObjectDespawned;\nimport net.runelite.api.events.DecorativeObjectSpawned;\nimport net.runelite.api.events.GameObjectDespawned;\nimport net.runelite.api.events.GameObjectSpawned;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GroundObjectDespawned;\nimport net.runelite.api.events.GroundObjectSpawned;\nimport net.runelite.api.events.MenuOptionClicked;\nimport net.runelite.api.events.WallObjectDespawned;\nimport net.runelite.api.events.WallObjectSpawned;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.objectindicators.ObjectIndicatorsConfig;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\n@Slf4j\npublic class RainbowRaveObjectIndicatorsPlugin\n{\n\tprivate static final String CONFIG_GROUP \u003d \"objectindicators\";\n\tprivate static final String MARK \u003d \"Mark object\";\n\tprivate static final String UNMARK \u003d \"Unmark object\";\n\n\tprivate final List\u003cColorTileObject\u003e objects \u003d new ArrayList\u003c\u003e();\n\tprivate final List\u003cColorTileObject\u003e allObjects \u003d new ArrayList\u003c\u003e();\n\tprivate final Map\u003cInteger, Set\u003cObjectPoint\u003e\u003e points \u003d new HashMap\u003c\u003e();\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate ObjectIndicatorsConfig config;\n\n\t@Inject\n\tprivate Gson gson;\n\n\t@Inject\n\tprivate RainbowRaveConfig rainbowRaveConfig;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\tprotected void startUp()\n\t{\n\t}\n\n\tprotected void shutDown()\n\t{\n\t\tpoints.clear();\n\t\tobjects.clear();\n\t\tallObjects.clear();\n\t}\n\n\t@Subscribe\n\tpublic void onWallObjectSpawned(WallObjectSpawned event)\n\t{\n\t\tcheckObjectPoints(event.getWallObject());\n\t}\n\n\t@Subscribe\n\tpublic void onWallObjectDespawned(WallObjectDespawned event)\n\t{\n\t\tobjects.removeIf(o -\u003e o.getTileObject() \u003d\u003d event.getWallObject());\n\t\tallObjects.removeIf(o -\u003e o.getTileObject() \u003d\u003d event.getWallObject());\n\t}\n\n\t@Subscribe\n\tpublic void onGameObjectSpawned(GameObjectSpawned event)\n\t{\n\t\tcheckObjectPoints(event.getGameObject());\n\t}\n\n\t@Subscribe\n\tpublic void onDecorativeObjectSpawned(DecorativeObjectSpawned event)\n\t{\n\t\tcheckObjectPoints(event.getDecorativeObject());\n\t}\n\n\t@Subscribe\n\tpublic void onGameObjectDespawned(GameObjectDespawned event)\n\t{\n\t\tobjects.removeIf(o -\u003e o.getTileObject() \u003d\u003d event.getGameObject());\n\t\tallObjects.removeIf(o -\u003e o.getTileObject() \u003d\u003d event.getGameObject());\n\t}\n\n\t@Subscribe\n\tpublic void onDecorativeObjectDespawned(DecorativeObjectDespawned event)\n\t{\n\t\tobjects.removeIf(o -\u003e o.getTileObject() \u003d\u003d event.getDecorativeObject());\n\t\tallObjects.removeIf(o -\u003e o.getTileObject() \u003d\u003d event.getDecorativeObject());\n\t}\n\n\t@Subscribe\n\tpublic void onGroundObjectSpawned(GroundObjectSpawned event)\n\t{\n\t\tcheckObjectPoints(event.getGroundObject());\n\t}\n\n\t@Subscribe\n\tpublic void onGroundObjectDespawned(GroundObjectDespawned event)\n\t{\n\t\tobjects.removeIf(o -\u003e o.getTileObject() \u003d\u003d event.getGroundObject());\n\t\tallObjects.removeIf(o -\u003e o.getTileObject() \u003d\u003d event.getGroundObject());\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged)\n\t{\n\t\tGameState gameState \u003d gameStateChanged.getGameState();\n\t\tif (gameState \u003d\u003d GameState.LOADING)\n\t\t{\n\t\t\t// Reload points with new map regions\n\n\t\t\tpoints.clear();\n\t\t\tfor (int regionId : client.getTopLevelWorldView().getMapRegions())\n\t\t\t{\n\t\t\t\t// load points for region\n\t\t\t\tfinal Set\u003cObjectPoint\u003e regionPoints \u003d loadPoints(regionId);\n\t\t\t\tif (regionPoints !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tpoints.put(regionId, regionPoints);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (gameStateChanged.getGameState() !\u003d GameState.LOGGED_IN \u0026\u0026 gameStateChanged.getGameState() !\u003d GameState.CONNECTION_LOST)\n\t\t{\n\t\t\tallObjects.clear();\n\t\t\tobjects.clear();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOptionClicked(MenuOptionClicked event)\n\t{\n\t\tif (event.getMenuAction() !\u003d MenuAction.RUNELITE\n\t\t\t|| !(event.getMenuOption().equals(MARK) || event.getMenuOption().equals(UNMARK)))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tWorldView wv \u003d client.getTopLevelWorldView();\n\t\tScene scene \u003d wv.getScene();\n\t\tTile[][][] tiles \u003d scene.getTiles();\n\t\tfinal int x \u003d event.getParam0();\n\t\tfinal int y \u003d event.getParam1();\n\t\tfinal int z \u003d wv.getPlane();\n\t\tfinal Tile tile \u003d tiles[z][x][y];\n\n\t\tTileObject object \u003d findTileObject(tile, event.getId());\n\t\tif (object \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// object.getId() is always the base object id, getObjectComposition transforms it to\n\t\t// the correct object we see\n\t\tObjectComposition objectDefinition \u003d getObjectComposition(object.getId());\n\t\tString name \u003d objectDefinition.getName();\n\t\t// Name is probably never \"null\" - however prevent adding it if it is, as it will\n\t\t// become ambiguous as objects with no name are assigned name \"null\"\n\t\tif (Strings.isNullOrEmpty(name) || name.equals(\"null\"))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tmarkObject(objectDefinition, name, object);\n\t}\n\n\tprivate void checkObjectPoints(TileObject object)\n\t{\n\t\tfinal WorldPoint worldPoint \u003d WorldPoint.fromLocalInstance(client, object.getLocalLocation(), object.getPlane());\n\t\tfinal Set\u003cObjectPoint\u003e objectPoints \u003d points.get(worldPoint.getRegionID());\n\n\t\tif (objectPoints \u003d\u003d null \u0026\u0026 rainbowRaveConfig.whichObjectsToHighlight() !\u003d RainbowRaveConfig.ObjectsToHighlight.ALL)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tObjectComposition objectComposition \u003d client.getObjectDefinition(object.getId());\n\t\tif (objectComposition.getImpostorIds() \u003d\u003d null)\n\t\t{\n\t\t\t// Multiloc names are instead checked in the overlay\n\t\t\tString name \u003d objectComposition.getName();\n\t\t\tif (Strings.isNullOrEmpty(name) || name.equals(\"null\"))\n\t\t\t{\n\t\t\t\t// was marked, but name has changed\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tboolean found \u003d false;\n\t\tif (objectPoints !\u003d null)\n\t\t{\n\t\t\tfor (ObjectPoint objectPoint : objectPoints)\n\t\t\t{\n\t\t\t\tif (worldPoint.getRegionX() \u003d\u003d objectPoint.getRegionX()\n\t\t\t\t\t\u0026\u0026 worldPoint.getRegionY() \u003d\u003d objectPoint.getRegionY()\n\t\t\t\t\t\u0026\u0026 worldPoint.getPlane() \u003d\u003d objectPoint.getZ()\n\t\t\t\t\t\u0026\u0026 objectPoint.getId() \u003d\u003d object.getId())\n\t\t\t\t{\n\t\t\t\t\tlog.debug(\"Marking object {} due to matching {}\", object, objectPoint);\n\t\t\t\t\tobjects.add(new ColorTileObject(object,\n\t\t\t\t\t\tobjectComposition,\n\t\t\t\t\t\tobjectPoint.getName(),\n\t\t\t\t\t\tobjectPoint.getColor()));\n\t\t\t\t\tfound \u003d true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!found \u0026\u0026 rainbowRaveConfig.whichObjectsToHighlight() \u003d\u003d RainbowRaveConfig.ObjectsToHighlight.ALL) {\n\t\t\tallObjects.add(new ColorTileObject(object,\n\t\t\t\tobjectComposition,\n\t\t\t\t\"name\",\n\t\t\t\tColor.WHITE));\n\t\t\treturn;\n\t\t}\n\t}\n\n\tprivate TileObject findTileObject(Tile tile, int id)\n\t{\n\t\tif (tile \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tfinal GameObject[] tileGameObjects \u003d tile.getGameObjects();\n\t\tfinal DecorativeObject tileDecorativeObject \u003d tile.getDecorativeObject();\n\t\tfinal WallObject tileWallObject \u003d tile.getWallObject();\n\t\tfinal GroundObject groundObject \u003d tile.getGroundObject();\n\n\t\tif (objectIdEquals(tileWallObject, id))\n\t\t{\n\t\t\treturn tileWallObject;\n\t\t}\n\n\t\tif (objectIdEquals(tileDecorativeObject, id))\n\t\t{\n\t\t\treturn tileDecorativeObject;\n\t\t}\n\n\t\tif (objectIdEquals(groundObject, id))\n\t\t{\n\t\t\treturn groundObject;\n\t\t}\n\n\t\tfor (GameObject object : tileGameObjects)\n\t\t{\n\t\t\tif (objectIdEquals(object, id))\n\t\t\t{\n\t\t\t\treturn object;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate boolean objectIdEquals(TileObject tileObject, int id)\n\t{\n\t\tif (tileObject \u003d\u003d null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (tileObject.getId() \u003d\u003d id)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\t// Menu action EXAMINE_OBJECT sends the transformed object id, not the base id, unlike\n\t\t// all of the GAME_OBJECT_OPTION actions, so check the id against the impostor ids\n\t\tfinal ObjectComposition comp \u003d client.getObjectDefinition(tileObject.getId());\n\n\t\tif (comp.getImpostorIds() !\u003d null)\n\t\t{\n\t\t\tfor (int impostorId : comp.getImpostorIds())\n\t\t\t{\n\t\t\t\tif (impostorId \u003d\u003d id)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/** mark or unmark an object\n\t *\n\t * @param objectComposition transformed composition of object based on vars\n\t * @param name name of objectComposition\n\t * @param object tile object, for multilocs object.getId() is the base id\n\t */\n\tprivate void markObject(ObjectComposition objectComposition, String name, final TileObject object)\n\t{\n\t\tfinal WorldPoint worldPoint \u003d WorldPoint.fromLocalInstance(client, object.getLocalLocation());\n\t\tfinal int regionId \u003d worldPoint.getRegionID();\n\t\tfinal Color color \u003d config.markerColor();\n\t\tfinal ObjectPoint point \u003d new ObjectPoint(\n\t\t\tobject.getId(),\n\t\t\tname,\n\t\t\tregionId,\n\t\t\tworldPoint.getRegionX(),\n\t\t\tworldPoint.getRegionY(),\n\t\t\tworldPoint.getPlane(),\n\t\t\tcolor);\n\n\t\tSet\u003cObjectPoint\u003e objectPoints \u003d points.computeIfAbsent(regionId, k -\u003e new HashSet\u003c\u003e());\n\n\t\tif (objects.removeIf(o -\u003e o.getTileObject() \u003d\u003d object))\n\t\t{\n\t\t\t// Find the object point that caused this object to be marked, there are two cases:\n\t\t\t// 1) object is a multiloc, the name may have changed since marking - match from base id\n\t\t\t// 2) not a multiloc, but an object has spawned with an identical name and a different\n\t\t\t//    id as what was originally marked\n\t\t\tif (!objectPoints.removeIf(op -\u003e ((op.getId() \u003d\u003d -1 || op.getId() \u003d\u003d object.getId()) || op.getName().equals(objectComposition.getName()))\n\t\t\t\t\u0026\u0026 op.getRegionX() \u003d\u003d worldPoint.getRegionX()\n\t\t\t\t\u0026\u0026 op.getRegionY() \u003d\u003d worldPoint.getRegionY()\n\t\t\t\t\u0026\u0026 op.getZ() \u003d\u003d worldPoint.getPlane()))\n\t\t\t{\n\t\t\t\tlog.warn(\"unable to find object point for unmarked object {}\", object.getId());\n\t\t\t}\n\n\t\t\tlog.debug(\"Unmarking object: {}\", point);\n\n\t\t\tallObjects.add(new ColorTileObject(object,\n\t\t\t\tobjectComposition,\n\t\t\t\t\"name\",\n\t\t\t\tColor.WHITE));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tobjectPoints.add(point);\n\t\t\tColorTileObject o \u003d new ColorTileObject(object,\n\t\t\t\tclient.getObjectDefinition(object.getId()),\n\t\t\t\tname,\n\t\t\t\tcolor);\n\t\t\tobjects.add(o);\n\t\t\tallObjects.removeIf(allO -\u003e allO.getTileObject().equals(o.getTileObject()));\n\t\t\tlog.debug(\"Marking object: {}\", point);\n\t\t}\n\t}\n\n\tprivate Set\u003cObjectPoint\u003e loadPoints(final int id)\n\t{\n\t\tfinal String json \u003d configManager.getConfiguration(CONFIG_GROUP, \"region_\" + id);\n\n\t\tif (Strings.isNullOrEmpty(json))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tSet\u003cObjectPoint\u003e points \u003d gson.fromJson(json, new TypeToken\u003cSet\u003cObjectPoint\u003e\u003e()\n\t\t{\n\t\t}.getType());\n\t\t// Prior to multiloc support the plugin would mark objects named \"null\", which breaks\n\t\t// in most cases due to the specific object being identified being ambiguous, so remove\n\t\t// them\n\t\treturn points.stream()\n\t\t\t.filter(point -\u003e !point.getName().equals(\"null\"))\n\t\t\t.collect(Collectors.toSet());\n\t}\n\n\t@Nullable\n\tprivate ObjectComposition getObjectComposition(int id)\n\t{\n\t\tObjectComposition objectComposition \u003d client.getObjectDefinition(id);\n\t\treturn objectComposition.getImpostorIds() \u003d\u003d null ? objectComposition : objectComposition.getImpostor();\n\t}\n\n\tpublic List\u003cColorTileObject\u003e getObjects() {\n\t\tif (rainbowRaveConfig.whichObjectsToHighlight() \u003d\u003d RainbowRaveConfig.ObjectsToHighlight.NONE) return Collections.emptyList();\n\t\telse if (rainbowRaveConfig.whichObjectsToHighlight() \u003d\u003d RainbowRaveConfig.ObjectsToHighlight.SAME) return objects;\n\n\t\tArrayList\u003cColorTileObject\u003e combinedObjects \u003d new ArrayList\u003c\u003e(allObjects);\n\t\tcombinedObjects.addAll(objects);\n\t\treturn combinedObjects;\n\t}\n}","filePath":"src\\main\\java\\com\\rainbowrave\\RainbowRaveObjectIndicatorsPlugin.java"},{"fileName":"RainbowRavePlugin.java","content":"/*\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.rainbowrave;\n\nimport com.google.inject.Provides;\nimport com.rainbowrave.RainbowRaveNpcIndicatorsPlugin.HighlightedNpc;\nimport java.awt.Color;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.function.Function;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GraphicsObject;\nimport net.runelite.api.Model;\nimport net.runelite.api.NPC;\nimport net.runelite.api.events.ClientTick;\nimport net.runelite.api.events.ItemSpawned;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDependency;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.plugins.grounditems.GroundItemsConfig;\nimport net.runelite.client.plugins.grounditems.GroundItemsPlugin;\nimport net.runelite.client.plugins.groundmarkers.GroundMarkerConfig;\nimport net.runelite.client.plugins.groundmarkers.GroundMarkerPlugin;\nimport net.runelite.client.plugins.inventorytags.InventoryTagsConfig;\nimport net.runelite.client.plugins.inventorytags.InventoryTagsPlugin;\nimport net.runelite.client.plugins.npchighlight.NpcIndicatorsConfig;\nimport net.runelite.client.plugins.npchighlight.NpcIndicatorsPlugin;\nimport net.runelite.client.plugins.objectindicators.ObjectIndicatorsConfig;\nimport net.runelite.client.plugins.objectindicators.ObjectIndicatorsPlugin;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.ui.overlay.outline.ModelOutlineRenderer;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Rainbow Rave\",\n\ttags \u003d {\"loot, beam, ground, item, tile, indicator, npc, object, inventory, tag\"}\n)\n@PluginDependency(NpcIndicatorsPlugin.class)\n@PluginDependency(GroundMarkerPlugin.class)\n@PluginDependency(ObjectIndicatorsPlugin.class)\n@PluginDependency(InventoryTagsPlugin.class)\n@PluginDependency(GroundItemsPlugin.class)\npublic class RainbowRavePlugin extends Plugin\n{\n\tpublic static final String GROUP \u003d \"rainbow_rave\";\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate RainbowRaveConfig config;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate ModelOutlineRenderer modelOutlineRenderer;\n\n\t@Inject\n\tprivate NpcIndicatorsConfig npcIndicatorsConfig;\n\n\t@Inject\n\tprivate RainbowRaveNpcIndicatorsPlugin rainbowRaveNpcIndicatorsPlugin;\n\n\tprivate RainbowRaveNpcSceneOverlay rainbowRaveNpcSceneOverlay;\n\n\t@Inject\n\tprivate GroundMarkerConfig groundMarkerConfig;\n\n\t@Inject\n\tprivate RainbowRaveGroundMarkerPlugin rainbowRaveGroundMarkerPlugin;\n\n\tprivate RainbowRaveGroundMarkerOverlay rainbowRaveGroundMarkerOverlay;\n\n\t@Inject\n\tprivate ObjectIndicatorsConfig objectIndicatorsConfig;\n\n\t@Inject\n\tprivate RainbowRaveObjectIndicatorsPlugin rainbowRaveObjectIndicatorsPlugin;\n\n\tprivate RainbowRaveObjectIndicatorsOverlay rainbowRaveObjectIndicatorsOverlay;\n\n\tprivate RainbowRaveInventoryTagsOverlay rainbowRaveInventoryTagsOverlay;\n\n\t@Inject\n\tprivate InventoryTagsConfig inventoryTagsConfig;\n\n\t@Inject\n\tprivate GroundItemsConfig groundItemsConfig;\n\n\t@Inject\n\tprivate RainbowRaveGroundItemsPlugin rainbowRaveGroundItemsPlugin;\n\n\tprivate RainbowRaveGroundItemsOverlay rainbowRaveGroundItemsOverlay;\n\n\t@Inject\n\tprivate RainbowRaveTileIndicatorsPlugin rainbowRaveTileIndicatorsPlugin;\n\n\tprivate RainbowRaveTileIndicatorsOverlay rainbowRaveTileIndicatorsOverlay;\n\n\t@Inject\n\tprivate RainbowRaveMouseTrailPlugin rainbowRaveMouseTrailPlugin;\n\n\tprivate RainbowRaveMouseTrailOverlay rainbowRaveMouseTrailOverlay;\n\n\t@Inject\n\tprivate EventBus eventBus;\n\n\t@Inject\n\tprivate ItemManager itemManager;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\tif (rainbowRaveGroundMarkerOverlay \u003d\u003d null) {\n\t\t\trainbowRaveGroundMarkerOverlay \u003d new RainbowRaveGroundMarkerOverlay(client, groundMarkerConfig, rainbowRaveGroundMarkerPlugin, this, config);\n\t\t}\n\t\trainbowRaveGroundMarkerPlugin.startUp();\n\t\toverlayManager.add(rainbowRaveGroundMarkerOverlay);\n\t\teventBus.register(rainbowRaveGroundMarkerPlugin);\n\n\t\tif (rainbowRaveObjectIndicatorsOverlay \u003d\u003d null) {\n\t\t\trainbowRaveObjectIndicatorsOverlay \u003d new RainbowRaveObjectIndicatorsOverlay(client, objectIndicatorsConfig, rainbowRaveObjectIndicatorsPlugin, modelOutlineRenderer, this, config);\n\t\t}\n\t\trainbowRaveObjectIndicatorsPlugin.startUp();\n\t\toverlayManager.add(rainbowRaveObjectIndicatorsOverlay);\n\t\teventBus.register(rainbowRaveObjectIndicatorsPlugin);\n\n\t\tif (rainbowRaveNpcSceneOverlay \u003d\u003d null) {\n\t\t\trainbowRaveNpcSceneOverlay \u003d new RainbowRaveNpcSceneOverlay(client, npcIndicatorsConfig, rainbowRaveNpcIndicatorsPlugin, modelOutlineRenderer, this, config);\n\t\t}\n\t\tupdateNpcHighlighterWithConfigSettings();\n\t\trainbowRaveNpcIndicatorsPlugin.startUp();\n\t\toverlayManager.add(rainbowRaveNpcSceneOverlay);\n\t\teventBus.register(rainbowRaveNpcIndicatorsPlugin);\n\n\t\tif (rainbowRaveInventoryTagsOverlay \u003d\u003d null) {\n\t\t\trainbowRaveInventoryTagsOverlay \u003d new RainbowRaveInventoryTagsOverlay(itemManager, this, inventoryTagsConfig, config, configManager);\n\t\t}\n\t\toverlayManager.add(rainbowRaveInventoryTagsOverlay);\n\n\t\tif (rainbowRaveGroundItemsOverlay \u003d\u003d null) {\n\t\t\trainbowRaveGroundItemsOverlay \u003d new RainbowRaveGroundItemsOverlay(client, rainbowRaveGroundItemsPlugin, groundItemsConfig);\n\t\t}\n\t\toverlayManager.add(rainbowRaveGroundItemsOverlay);\n\t\trainbowRaveGroundItemsPlugin.startUp();\n\t\teventBus.register(rainbowRaveGroundItemsPlugin);\n\n\t\tif (config.recolorTileIndicators()) {\n\t\t\tstartRRTIPlugin();\n\t\t}\n\n\t\tif (rainbowRaveMouseTrailOverlay \u003d\u003d null) {\n\t\t\trainbowRaveMouseTrailOverlay \u003d new RainbowRaveMouseTrailOverlay(this, rainbowRaveMouseTrailPlugin, config);\n\t\t}\n\t\toverlayManager.add(rainbowRaveMouseTrailOverlay);\n\t\trainbowRaveMouseTrailPlugin.startUp();\n\t\teventBus.register(rainbowRaveMouseTrailPlugin);\n\n\t\tmigrateConfig();\n\t}\n\n\tprivate void migrateConfig()\n\t{\n\t\tString previousSmoothWaves \u003d configManager.getConfiguration(GROUP, RainbowRaveConfig.OLD_TILE_COLOR_WAVES_KEY);\n\t\tif (previousSmoothWaves !\u003d null) {\n\t\t\tif (Boolean.valueOf(previousSmoothWaves)) {\n\t\t\t\tconfigManager.setConfiguration(GROUP, RainbowRaveConfig.GROUND_MARKER_COLOR_MODE_KEY, RainbowRaveConfig.GroundMarkerColorMode.WAVES);\n\t\t\t} // else it would be \"random\" which is default\n\t\t\tconfigManager.unsetConfiguration(GROUP, RainbowRaveConfig.OLD_TILE_COLOR_WAVES_KEY);\n\t\t}\n\t}\n\n\t// Ground items has to use this itemspawned subscriber because registering it in startup is not fast enough to get the itemspawned events that are fired when a plugin is started.\n\t@Subscribe\n\tpublic void onItemSpawned(ItemSpawned e) {\n\t\trainbowRaveGroundItemsPlugin.onItemSpawned(e);\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\trainbowRaveGroundMarkerPlugin.shutDown();\n\t\toverlayManager.remove(rainbowRaveGroundMarkerOverlay);\n\t\teventBus.unregister(rainbowRaveGroundMarkerPlugin);\n\n\t\trainbowRaveObjectIndicatorsPlugin.shutDown();\n\t\toverlayManager.remove(rainbowRaveObjectIndicatorsOverlay);\n\t\teventBus.unregister(rainbowRaveObjectIndicatorsPlugin);\n\n\t\trainbowRaveNpcIndicatorsPlugin.shutDown();\n\t\toverlayManager.remove(rainbowRaveNpcSceneOverlay);\n\t\teventBus.unregister(rainbowRaveNpcIndicatorsPlugin);\n\n\t\toverlayManager.remove(rainbowRaveInventoryTagsOverlay);\n\n\t\toverlayManager.remove(rainbowRaveGroundItemsOverlay);\n\t\trainbowRaveGroundItemsPlugin.shutDown();\n\t\teventBus.unregister(rainbowRaveGroundItemsPlugin);\n\n\t\tstopRRTIPlugin();\n\n\t\toverlayManager.remove(rainbowRaveMouseTrailOverlay);\n\t\trainbowRaveMouseTrailPlugin.shutDown();\n\t\teventBus.unregister(rainbowRaveMouseTrailPlugin);\n\t}\n\n\t@Provides\n\tRainbowRaveConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(RainbowRaveConfig.class);\n\t}\n\n\tprivate Function\u003cNPC, HighlightedNpc\u003e highlighterPredicate;\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged configChanged) {\n\t\tif (configChanged.getGroup().equals(\"runelite\"))\n\t\t{\n\t\t\tcheckAndPushOverlayToFront(configChanged, \"grounditemsplugin\", rainbowRaveGroundItemsOverlay);\n\t\t\tcheckAndPushOverlayToFront(configChanged, \"groundmarkerplugin\", rainbowRaveGroundMarkerOverlay);\n\t\t\tcheckAndPushOverlayToFront(configChanged, \"inventorytagsplugin\", rainbowRaveInventoryTagsOverlay);\n\t\t\tcheckAndPushOverlayToFront(configChanged, \"npcindicatorsplugin\", rainbowRaveNpcSceneOverlay);\n\t\t\tcheckAndPushOverlayToFront(configChanged, \"objectindicatorsplugin\", rainbowRaveObjectIndicatorsOverlay);\n\t\t\tcheckAndPushOverlayToFront(configChanged, \"brushmarkerplugin\", rainbowRaveGroundMarkerOverlay);\n\t\t\tif (config.recolorTileIndicators()) {\n\t\t\t\tcheckAndPushOverlayToFront(configChanged, \"tileindicatorsplugin\", rainbowRaveTileIndicatorsOverlay);\n\t\t\t\tcheckAndPushOverlayToFront(configChanged, \"cornertileindicatorsplugin\", rainbowRaveTileIndicatorsOverlay);\n\t\t\t}\n\t\t}\n\t\telse if (configChanged.getGroup().equals(\"rainbow_rave\"))\n\t\t{\n\t\t\tif (configChanged.getKey().equals(\"whichNpcsToHighlight\"))\n\t\t\t{\n\t\t\t\tupdateNpcHighlighterWithConfigSettings();\n\t\t\t}\n\t\t\telse if (configChanged.getKey().equals(\"recolorTileIndicators\"))\n\t\t\t{\n\t\t\t\tif (config.recolorTileIndicators())\n\t\t\t\t{\n\t\t\t\t\tstartRRTIPlugin();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tstopRRTIPlugin();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void stopRRTIPlugin()\n\t{\n\t\toverlayManager.remove(rainbowRaveTileIndicatorsOverlay);\n\t\trainbowRaveTileIndicatorsPlugin.shutDown();\n\t\teventBus.unregister(rainbowRaveTileIndicatorsPlugin);\n\t}\n\n\tprivate void startRRTIPlugin()\n\t{\n\t\tif (rainbowRaveTileIndicatorsOverlay \u003d\u003d null)\n\t\t{\n\t\t\trainbowRaveTileIndicatorsOverlay \u003d new RainbowRaveTileIndicatorsOverlay(client, rainbowRaveTileIndicatorsPlugin, this);\n\t\t}\n\t\toverlayManager.add(rainbowRaveTileIndicatorsOverlay);\n\t\trainbowRaveTileIndicatorsPlugin.startUp();\n\t\teventBus.register(rainbowRaveTileIndicatorsPlugin);\n\t}\n\n\tprivate void checkAndPushOverlayToFront(ConfigChanged configChanged, String key, Overlay overlay)\n\t{\n\t\tif (configChanged.getKey().equals(key) \u0026\u0026 configChanged.getNewValue().equalsIgnoreCase(\"true\")) {\n\t\t\tclientThread.invokeLater(() -\u003e {\n\t\t\t\toverlayManager.remove(overlay);\n\t\t\t\toverlayManager.add(overlay);\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate void updateNpcHighlighterWithConfigSettings()\n\t{\n\t\tFunction\u003cNPC, HighlightedNpc\u003e f;\n\t\tif (config.whichNpcsToHighlight() \u003d\u003d RainbowRaveConfig.NpcsToHighlight.ALL) {\n\t\t\tf \u003d npc -\u003e rainbowRaveNpcIndicatorsPlugin.highlightedNpc(npc);\n\t\t\trainbowRaveNpcSceneOverlay.enable(true);\n\t\t} else if (config.whichNpcsToHighlight() \u003d\u003d RainbowRaveConfig.NpcsToHighlight.SAME) {\n\t\t\tf \u003d npc -\u003e null;\n\t\t\trainbowRaveNpcSceneOverlay.enable(true);\n\t\t} else if (config.whichNpcsToHighlight() \u003d\u003d RainbowRaveConfig.NpcsToHighlight.NONE) {\n\t\t\tf \u003d npc -\u003e null;\n\t\t\trainbowRaveNpcSceneOverlay.enable(false);\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t\tif (highlighterPredicate !\u003d null) rainbowRaveNpcIndicatorsPlugin.unregisterHighlighter(highlighterPredicate);\n\t\thighlighterPredicate \u003d f;\n\t\trainbowRaveNpcIndicatorsPlugin.registerHighlighter(highlighterPredicate);\n\t\tclientThread.invoke(rainbowRaveNpcIndicatorsPlugin::rebuild);\n\t}\n\n\tpublic Color getColor(int hashCode)\n\t{\n\t\treturn getColor(hashCode, client.getGameCycle(), config.syncColor(), config.colorSpeed());\n\t}\n\n\tpublic Color getColor(int hashCode, int gameCycle, boolean syncColor, int colorSpeed)\n\t{\n\t\tif (syncColor) hashCode \u003d 0;\n\t\tint clientTicks \u003d colorSpeed / 20;\n\t\treturn config.theme().getColor(((hashCode + gameCycle) % clientTicks) / ((float) clientTicks));\n\t}\n\n\tprivate static final List\u003cInteger\u003e scytheTrailIds \u003d Arrays.asList(478, 506, 1172);\n\n\t@Subscribe\n\tpublic void onClientTick(ClientTick clientTick)\n\t{\n\t\tif(config.dukeRave())\n\t\t{\n\t\t\tfor (NPC npc : client.getTopLevelWorldView().npcs())\n\t\t\t{\n\t\t\t\tif(npc.getId()\u003e\u003d12199 \u0026\u0026 npc.getId() \u003c\u003d 12201)\n\t\t\t\t{\n\t\t\t\t\trecolorAllFaces(npc.getModel(), getColor((int)npc.getHash()));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (config.recolorLootBeams())\n\t{\n\t\tboolean colorHighlightedItems \u003d config.colorHighlightedGroundItems();\n\t\t\tint tierOrdinal \u003d config.whichGroundItemsToColor().highlightTierRelativeOrdinal;\n\t\t\tfor (Lootbeam value : rainbowRaveGroundItemsPlugin.lootbeams.values())\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\tvalue.tier \u003d\u003d null ?\n\t\t\t\t\t\tcolorHighlightedItems :\n\t\t\t\t\t\tvalue.tier.ordinal() \u003e\u003d tierOrdinal\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\trecolorAllFaces(value.runeLiteObject.getModel(), getColor(value.runeLiteObject.getLocation().hashCode()));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (config.recolorScytheSwings())\n\t\t{\n\t\t\tfor (GraphicsObject graphicsObject : client.getTopLevelWorldView().getGraphicsObjects())\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\tscytheTrailIds.contains(graphicsObject.getId()) ||\n\t\t\t\t\t(graphicsObject.getId() \u003e\u003d 1231 \u0026\u0026 graphicsObject.getId() \u003c\u003d 1235) || // chally trails + 1 red trail.\n\t\t\t\t\t(graphicsObject.getId() \u003e\u003d 1891 \u0026\u0026 graphicsObject.getId() \u003c\u003d 1898) // sara and sang scythe swing trails\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\trecolorAllFaces(graphicsObject.getModel(), getColor(graphicsObject.getLocation().hashCode()));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate int colorToRs2hsb(Color color)\n\t{\n\t\tfloat[] hsbVals \u003d Color.RGBtoHSB(color.getRed(), color.getGreen(), color.getBlue(), null);\n\n\t\t// \"Correct\" the brightness level to avoid going to white at full saturation, or having a low brightness at\n\t\t// low saturation\n\t\thsbVals[2] -\u003d Math.min(hsbVals[1], hsbVals[2] / 2);\n\n\t\tint encode_hue \u003d (int)(hsbVals[0] * 63);\n\t\tint encode_saturation \u003d (int)(hsbVals[1] * 7);\n\t\tint encode_brightness \u003d (int)(hsbVals[2] * 127);\n\t\treturn (encode_hue \u003c\u003c 10) + (encode_saturation \u003c\u003c 7) + (encode_brightness);\n\t}\n\n\tprivate void recolorAllFaces(Model model, Color color)\n\t{\n\t\tif (model \u003d\u003d null || color \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tint rs2hsb \u003d colorToRs2hsb(color);\n\t\tint[] faceColors1 \u003d model.getFaceColors1();\n\t\tint[] faceColors2 \u003d model.getFaceColors2();\n\t\tint[] faceColors3 \u003d model.getFaceColors3();\n\n\t\tfor (int i \u003d 0; i \u003c faceColors1.length; i++)\n\t\t{\n\t\t\tfaceColors1[i] \u003d rs2hsb;\n\t\t}\n\t\tfor (int i \u003d 0; i \u003c faceColors2.length; i++)\n\t\t{\n\t\t\tfaceColors2[i] \u003d rs2hsb;\n\t\t}\n\t\tfor (int i \u003d 0; i \u003c faceColors3.length; i++)\n\t\t{\n\t\t\tfaceColors3[i] \u003d rs2hsb;\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\rainbowrave\\RainbowRavePlugin.java"},{"fileName":"RainbowRaveTileIndicatorsOverlay.java","content":"/*\n * Copyright (c) 2018, Tomas Slusny \u003cslusnucky@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.rainbowrave;\n\nimport java.awt.BasicStroke;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Polygon;\nimport java.awt.Stroke;\nimport net.runelite.api.Client;\nimport net.runelite.api.Constants;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.WorldView;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\nimport net.runelite.client.util.ColorUtil;\n\npublic class RainbowRaveTileIndicatorsOverlay extends Overlay\n{\n\tprivate final Client client;\n\tprivate final RainbowRaveTileIndicatorsPlugin plugin;\n\tprivate final RainbowRavePlugin rainbowRavePlugin;\n\n\tpublic RainbowRaveTileIndicatorsOverlay(Client client, RainbowRaveTileIndicatorsPlugin plugin, RainbowRavePlugin rainbowRavePlugin)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.rainbowRavePlugin \u003d rainbowRavePlugin;\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\n\t\tsetPriority(Overlay.PRIORITY_MED);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tWorldView wv \u003d client.getTopLevelWorldView();\n\t\tif (plugin.highlightHoveredTile)\n\t\t{\n\t\t\t// If we have tile \"selected\" render it\n\t\t\tif (wv.getSelectedSceneTile() !\u003d null)\n\t\t\t{\n\t\t\t\trenderTile(graphics, wv.getSelectedSceneTile().getLocalLocation(), rainbowRavePlugin.getColor(0), plugin.hoveredTileBorderWidth, plugin.hoveredTileFillColor, plugin.hoveredTileCornersOnly, plugin.hoveredTileCornerSize);\n\t\t\t}\n\t\t}\n\n\t\tif (plugin.highlightDestinationTile)\n\t\t{\n\t\t\trenderTile(graphics, client.getLocalDestinationLocation(), rainbowRavePlugin.getColor(0), plugin.destinationTileBorderWidth, plugin.destinationTileFillColor, plugin.destinationTileCornersOnly, plugin.destinationTileCornerSize);\n\t\t}\n\n\t\tif (plugin.highlightCurrentTile)\n\t\t{\n\t\t\tfinal LocalPoint playerPosLocal \u003d LocalPoint.fromWorld(wv, plugin.getLastPlayerPosition());\n\t\t\tif (playerPosLocal \u003d\u003d null)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tColor rainbowColor \u003d rainbowRavePlugin.getColor(0);\n\t\t\tColor color \u003d ColorUtil.colorWithAlpha(rainbowColor, plugin.highlightCurrentColor.getAlpha());\n\t\t\tColor fillColor \u003d plugin.recolorFill ? ColorUtil.colorWithAlpha(rainbowColor, plugin.currentTileFillColor.getAlpha()) : plugin.currentTileFillColor;\n\t\t\t// When not fading out the current tile, or when it has been 1 game tick or less since the player last\n\t\t\t// moved, draw the tile at full opacity. When using fadeout, drawing the indicator at full opacity for 1\n\t\t\t// game tick prevents it from fading out when moving on consecutive ticks.\n\t\t\tif (!plugin.trueTileFadeout || client.getTickCount() - plugin.getLastTickPlayerMoved() \u003c\u003d 1)\n\t\t\t{\n\t\t\t\trenderTile(graphics, playerPosLocal, color, plugin.currentTileBorderWidth, fillColor, plugin.currentTileCornersOnly, plugin.currentTileCornerSize);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// It is 1 game tick after the player has stopped moving, so fade out the tile.\n\t\t\t\tlong timeSinceLastMove \u003d System.currentTimeMillis() - plugin.getLastTimePlayerStoppedMoving();\n\t\t\t\t// The fadeout does not begin for 1 game tick, so subtract that.\n\t\t\t\tint fadeoutTime \u003d plugin.trueTileFadeoutTime - Constants.GAME_TICK_LENGTH;\n\t\t\t\tif (fadeoutTime !\u003d 0 \u0026\u0026 timeSinceLastMove \u003c fadeoutTime)\n\t\t\t\t{\n\t\t\t\t\tdouble opacity \u003d 1.0d - Math.pow(timeSinceLastMove / (double) fadeoutTime, 2);\n\t\t\t\t\trenderTile(graphics, playerPosLocal, ColorUtil.colorWithAlpha(color, (int) (opacity * color.getAlpha())), plugin.currentTileBorderWidth, ColorUtil.colorWithAlpha(fillColor, (int) (opacity * fillColor.getAlpha())), plugin.currentTileCornersOnly, plugin.currentTileCornerSize);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate void renderTile(final Graphics2D graphics, final LocalPoint dest, final Color color, final double borderWidth, final Color fillColor, boolean cornersOnly, int divisor)\n\t{\n\t\tif (dest \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal Polygon poly \u003d Perspective.getCanvasTilePoly(client, dest);\n\n\t\tif (poly \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (cornersOnly)\n\t\t{\n\t\t\trenderPolygonCorners(graphics, poly, color, fillColor, new BasicStroke((float) borderWidth), divisor);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tOverlayUtil.renderPolygon(graphics, poly, color, fillColor, new BasicStroke((float) borderWidth));\n\t\t}\n\t}\n\n\tpublic static void renderPolygonCorners(Graphics2D graphics, Polygon poly, Color color, Color fillColor, Stroke borderStroke, int divisor)\n\t{\n\t\tgraphics.setColor(color);\n\t\tfinal Stroke originalStroke \u003d graphics.getStroke();\n\t\tgraphics.setStroke(borderStroke);\n\n\t\tfor (int i \u003d 0; i \u003c poly.npoints; i++)\n\t\t{\n\t\t\tint ptx \u003d poly.xpoints[i];\n\t\t\tint pty \u003d poly.ypoints[i];\n\t\t\tint prev \u003d (i - 1) \u003c 0 ? (poly.npoints - 1) : (i - 1);\n\t\t\tint next \u003d (i + 1) \u003e (poly.npoints - 1) ? 0 : (i + 1);\n\t\t\tint ptxN \u003d ((poly.xpoints[next]) - ptx) / divisor + ptx;\n\t\t\tint ptyN \u003d ((poly.ypoints[next]) - pty) / divisor + pty;\n\t\t\tint ptxP \u003d ((poly.xpoints[prev]) - ptx) / divisor + ptx;\n\t\t\tint ptyP \u003d ((poly.ypoints[prev]) - pty) / divisor + pty;\n\t\t\tgraphics.drawLine(ptx, pty, ptxN, ptyN);\n\t\t\tgraphics.drawLine(ptx, pty, ptxP, ptyP);\n\t\t}\n\n\t\tgraphics.setColor(fillColor);\n\t\tgraphics.fill(poly);\n\n\t\tgraphics.setStroke(originalStroke);\n\t}\n}\n","filePath":"src\\main\\java\\com\\rainbowrave\\RainbowRaveTileIndicatorsOverlay.java"},{"fileName":"RainbowRaveTileIndicatorsPlugin.java","content":"/*\n * Copyright (c) 2018, Tomas Slusny \u003cslusnucky@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.rainbowrave;\n\nimport java.awt.Color;\nimport javax.inject.Inject;\nimport javax.swing.SwingUtilities;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.events.ProfileChanged;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\n@Slf4j\npublic class RainbowRaveTileIndicatorsPlugin\n{\n\t@Inject private Client client;\n\t@Inject private OverlayManager overlayManager;\n\t@Inject private ConfigManager configManager;\n\t@Inject private RainbowRaveConfig rainbowRaveConfig;\n\n\t@Getter private WorldPoint lastPlayerPosition \u003d new WorldPoint(0, 0, 0);\n\t@Getter private int lastTickPlayerMoved \u003d 0;\n\t@Getter private long lastTimePlayerStoppedMoving \u003d 0;\n\n\tboolean recolorFill;\n\n\tboolean highlightDestinationTile;\n\tColor highlightDestinationColor;\n\tColor destinationTileFillColor;\n\tdouble destinationTileBorderWidth;\n\tboolean highlightHoveredTile;\n\tColor highlightHoveredColor;\n\tColor hoveredTileFillColor;\n\tdouble hoveredTileBorderWidth;\n\tboolean highlightCurrentTile;\n\tColor highlightCurrentColor;\n\tColor currentTileFillColor;\n\tdouble currentTileBorderWidth;\n\n\tboolean trueTileFadeout;\n\tint trueTileFadeoutTime;\n\tboolean destinationTileCornersOnly;\n\tboolean hoveredTileCornersOnly;\n\tboolean currentTileCornersOnly;\n\tint hoveredTileCornerSize;\n\tint destinationTileCornerSize;\n\tint currentTileCornerSize;\n\n\tprotected void startUp()\n\t{\n\t\tloadConfig();\n\t}\n\n\t@Subscribe\n\tpublic void onProfileChanged(ProfileChanged e) {\n\t\tloadConfig();\n\t}\n\n\tprotected void shutDown()\n\t{\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged e) {\n\t\t// I don\u0027t want this to apply to profile change config changes because the config is in an invalid state\n\t\t// during a profile change, so I check the thread since the EDT is where normal config changes happen.\n\t\tif (!SwingUtilities.isEventDispatchThread()) return;\n\t\tif (e.getGroup().equals(\"cornertileindicators\") || e.getGroup().equals(\"tileindicators\") || e.getGroup().equals(\"rainbow_rave\"))\n\t\t{\n\t\t\tloadConfig();\n\t\t}\n\t}\n\n\tprivate void loadConfig() {\n\t\tboolean cornerTileIndicatorsInstalled \u003d configManager.getConfiguration(\"runelite\", \"externalPlugins\").contains(\"corner-tile-indicators\");\n\t\tString group \u003d cornerTileIndicatorsInstalled \u0026\u0026 rainbowRaveConfig.preferCornerTileIndicatorsConfig() ? \"cornertileindicators\" : \"tileindicators\";\n\n\t\trecolorFill \u003d rainbowRaveConfig.recolorTileIndicatorFill();\n\n\t\thighlightDestinationTile \u003d configManager.getConfiguration(group, \"highlightDestinationTile\", boolean.class);\n\t\thighlightDestinationColor \u003d configManager.getConfiguration(group, \"highlightDestinationColor\", Color.class);\n\t\tdestinationTileFillColor \u003d configManager.getConfiguration(group, \"destinationTileFillColor\", Color.class);\n\t\tdestinationTileBorderWidth \u003d configManager.getConfiguration(group, \"destinationTileBorderWidth\", double.class);\n\t\thighlightHoveredTile \u003d configManager.getConfiguration(group, \"highlightHoveredTile\", boolean.class);\n\t\thighlightHoveredColor \u003d configManager.getConfiguration(group, \"highlightHoveredColor\", Color.class);\n\t\thoveredTileFillColor \u003d configManager.getConfiguration(group, \"hoveredTileFillColor\", Color.class);\n\t\thoveredTileBorderWidth \u003d configManager.getConfiguration(group, \"hoveredTileBorderWidth\", double.class);\n\t\thighlightCurrentTile \u003d configManager.getConfiguration(group, \"highlightCurrentTile\", boolean.class);\n\t\thighlightCurrentColor \u003d configManager.getConfiguration(group, \"highlightCurrentColor\", Color.class);\n\t\tcurrentTileFillColor \u003d configManager.getConfiguration(group, \"currentTileFillColor\", Color.class);\n\t\tcurrentTileBorderWidth \u003d configManager.getConfiguration(group, \"currentTileBorderWidth\", double.class);\n\n\t\tif (\"cornertileindicators\".equals(group))\n\t\t{\n\t\t\ttrueTileFadeout \u003d configManager.getConfiguration(group, \"trueTileFadeout\", boolean.class);\n\t\t\ttrueTileFadeoutTime \u003d configManager.getConfiguration(group, \"trueTileFadeoutTime\", int.class);\n\t\t\tdestinationTileCornersOnly \u003d configManager.getConfiguration(group, \"destinationTileCornersOnly\", boolean.class);\n\t\t\thoveredTileCornersOnly \u003d configManager.getConfiguration(group, \"hoveredTileCornersOnly\", boolean.class);\n\t\t\tcurrentTileCornersOnly \u003d configManager.getConfiguration(group, \"currentTileCornersOnly\", boolean.class);\n\t\t\thoveredTileCornerSize \u003d configManager.getConfiguration(group, \"hoveredTileCornerSize\", int.class);\n\t\t\tdestinationTileCornerSize \u003d configManager.getConfiguration(group, \"destinationTileCornerSize\", int.class);\n\t\t\tcurrentTileCornerSize \u003d configManager.getConfiguration(group, \"currentTileCornerSize\", int.class);\n\t\t} else {\n\t\t\ttrueTileFadeout \u003d false;\n\t\t\tdestinationTileCornersOnly \u003d false;\n\t\t\thoveredTileCornersOnly \u003d false;\n\t\t\tcurrentTileCornersOnly \u003d false;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick e)\n\t{\n\t\tWorldPoint playerPos \u003d client.getLocalPlayer().getWorldLocation();\n\n\t\tif (!playerPos.equals(lastPlayerPosition))\n\t\t{\n\t\t\tlastTickPlayerMoved \u003d client.getTickCount();\n\t\t}\n\t\telse if (lastTickPlayerMoved + 1 \u003d\u003d client.getTickCount())\n\t\t{\n\t\t\tlastTimePlayerStoppedMoving \u003d System.currentTimeMillis();\n\t\t}\n\n\t\tlastPlayerPosition \u003d playerPos;\n\t}\n}\n","filePath":"src\\main\\java\\com\\rainbowrave\\RainbowRaveTileIndicatorsPlugin.java"},{"fileName":"Theme.java","content":"package com.rainbowrave;\n\nimport java.awt.Color;\nimport java.util.ArrayList;\nimport java.util.List;\n\n\npublic enum Theme\n{\n    RAINBOW,\n    TRANS(new Color(91, 206, 250),\n            new Color(245, 169, 184),\n            new Color(255, 255, 255),\n            new Color(245, 169, 184)\n    ),\n\tENBY(\n\t\tnew Color(255, 255, 255),\n\t\tnew Color(156, 89, 209),\n\t\tnew Color(44, 44, 44),\n\t\tnew Color(252, 244, 52)\n\t),\n\tLESBIAN(\n\t\tnew Color(212, 44, 0),\n\t\tnew Color(253, 152, 85),\n\t\tnew Color(255, 255, 255),\n\t\tnew Color(209, 97, 162),\n\t\tnew Color(162, 1, 97)\n\t),\n\tPAN(\n\t\tnew Color(255, 33, 140),\n\t\tnew Color(255, 216, 0),\n\t\tnew Color(255, 33, 140),\n\t\tnew Color(33, 177, 255)\n\t),\n\tACE(\n\t\tnew Color(0, 0, 0),\n\t\tnew Color(163, 163, 163),\n\t\tnew Color(255, 255, 255),\n\t\tnew Color(128, 0, 128)\n\t),\n\tBI(\n\t\tnew Color(214, 2, 112),\n\t\tnew Color(0, 56, 168),\n\t\tnew Color(155, 79, 150)\n\t),\n\tGENDER_QUEER(\n\t\tnew Color(181, 126, 220),\n\t\tnew Color(255, 255, 255),\n\t\tnew Color(74, 129, 35)\n\t),\n\tGAY(\n\t\tnew Color(255, 255, 255),\n\t\tnew Color(123, 173, 226),\n\t\tnew Color(80, 73, 204),\n\t\tnew Color(61, 26, 120),\n\t\tnew Color(7, 141, 112),\n\t\tnew Color(38, 206, 170),\n\t\tnew Color(152, 232, 193)\n\t);\n\n\tprivate final List\u003cPerceptualGradient\u003e gradients;\n\n\tTheme()\n\t{\n\t\tgradients \u003d new ArrayList\u003c\u003e();\n\t}\n\n\tTheme(Color... colors) {\n\t\tgradients \u003d new ArrayList\u003c\u003e();\n\t\tfor (int i\u003d0; i\u003ccolors.length; i++) {\n\t\t\tColor startColor \u003d colors[i];\n\t\t\t// When at the last index then wrap back to first color\n\t\t\tColor endColor \u003d i \u003d\u003d colors.length-1 ? colors[0] : colors[i+1];\n            gradients.add(new PerceptualGradient(startColor, endColor));\n        }\n    }\n\n    public Color getColor(float ratio)\n    {\n        // Subtract floor to match Color.getHSBColor() functionality\n        ratio \u003d Math.abs((float) (ratio - Math.floor(ratio)));\n\n        if (gradients.size() \u003d\u003d 0) { // This applies to the RAINBOW theme only.\n            return Color.getHSBColor(ratio, 1.0f, 1.0f);\n        }\n\n        float increment \u003d 1.0f/gradients.size(); // Since size isn\u0027t 0, increment is always (0-1]\n        PerceptualGradient gradient \u003d gradients.get((int) Math.floor(ratio/increment));\n        float relativeRatio \u003d (ratio%increment)/increment;\n        return gradient.getColorMix(relativeRatio);\n    }\n}\n","filePath":"src\\main\\java\\com\\rainbowrave\\Theme.java"},{"fileName":"WildcardMatchLoader.java","content":"/*\n * Copyright (c) 2018, Tomas Slusny \u003cslusnucky@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.rainbowrave;\n\nimport com.google.common.base.Strings;\nimport com.google.common.cache.CacheLoader;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.stream.Collectors;\nimport javax.annotation.Nonnull;\nimport net.runelite.client.util.WildcardMatcher;\n\nclass WildcardMatchLoader extends CacheLoader\u003cNamedQuantity, Boolean\u003e\n{\n\tprivate final List\u003cItemThreshold\u003e itemThresholds;\n\n\tWildcardMatchLoader(List\u003cString\u003e configEntries)\n\t{\n\t\tthis.itemThresholds \u003d configEntries.stream()\n\t\t\t.map(ItemThreshold::fromConfigEntry)\n\t\t\t.filter(Objects::nonNull)\n\t\t\t.collect(Collectors.toList());\n\t}\n\n\t@Override\n\tpublic Boolean load(@Nonnull final NamedQuantity key)\n\t{\n\t\tif (Strings.isNullOrEmpty(key.getName()))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tfinal String filteredName \u003d key.getName().trim();\n\n\t\tfor (final ItemThreshold entry : itemThresholds)\n\t\t{\n\t\t\tif (WildcardMatcher.matches(entry.getItemName(), filteredName)\n\t\t\t\t\u0026\u0026 entry.quantityHolds(key.getQuantity()))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\com\\rainbowrave\\WildcardMatchLoader.java"},{"fileName":"ConfigGenerator.java","content":"package com.rainbowrave;\n\n//import lombok.Builder;\n\npublic class ConfigGenerator\n{\n//\tprivate static final boolean autoPosition \u003d true;\n//\n//\tprivate static int i \u003d 0;\n//\n//\tpublic static void main(String[] args)\n//\t{\n//\t\tSystem.out.println(\n//\t\t\tSingleConfigGenerator.builder()\n//\t\t\t\t.key(\"colorSpeed\")\n//\t\t\t\t.name(\"Color speed (ms)\")\n//\t\t\t\t.description(\"How fast the colors change (ms per full cycle)\")\n//\t\t\t\t.defaultValue(6000)\n//\t\t\t\t.typeName(\"int\")\n//\t\t\t\t.build().generate()\n//\t\t);\n//\n//\t\tSystem.out.println(\n//\t\tSingleConfigGenerator.builder()\n//\t\t\t.key(\"syncColor\")\n//\t\t\t.name(\"Sync colors\")\n//\t\t\t.description(\"Make all highlighted things be the same color as each other.\")\n//\t\t\t.defaultValue(false)\n//\t\t\t.typeName(\"boolean\")\n//\t\t\t.build().generate()\n//\t\t);\n//\n//\t\tSystem.out.println(\n//\t\tSingleConfigGenerator.builder()\n//\t\t\t.key(\"highlightSelf\")\n//\t\t\t.name(\"Highlight self\")\n//\t\t\t.description(\"Highlight your own player character. Uses Npc Indicator\u0027s settings.\")\n//\t\t\t.defaultValue(false)\n//\t\t\t.typeName(\"boolean\")\n//\t\t\t.build().generate()\n//\t\t);\n//\n//\t\tSystem.out.println(\n//\t\tSingleConfigGenerator.builder()\n//\t\t\t.key(\"highlightOthers\")\n//\t\t\t.name(\"Highlight others\")\n//\t\t\t.description(\"Highlight other players\u0027 characters. Uses Npc Indicator\u0027s settings.\")\n//\t\t\t.defaultValue(false)\n//\t\t\t.typeName(\"boolean\")\n//\t\t\t.build().generate()\n//\t\t);\n//\n//\t\tSystem.out.println(\n//\t\tSingleConfigGenerator.builder()\n//\t\t\t.key(\"whichNpcsToHighlight\")\n//\t\t\t.name(\"Npc highlight\")\n//\t\t\t.description(\"Which npcs to highlight\")\n//\t\t\t.defaultValue(RainbowRaveConfig.NpcsToHighlight.SAME)\n//\t\t\t.typeName(\"NpcsToHighlight\")\n//\t\t\t.build().generate()\n//\t\t);\n//\n//\t\tSystem.out.println(\n//\t\t\tSingleConfigGenerator.builder()\n//\t\t\t\t.key(\"smoothWaves\")\n//\t\t\t\t.name(\"Tile color waves\")\n//\t\t\t\t.description(\"Whether the tiles should have a smooth transition from color to color between two adjacent tiles.\")\n//\t\t\t\t.defaultValue(false)\n//\t\t\t\t.typeName(\"boolean\")\n//\t\t\t\t.build().generate()\n//\t\t);\n//\n//\t\tSystem.out.println(\n//\t\t\tSingleConfigGenerator.builder()\n//\t\t\t\t.key(\"fillTiles\")\n//\t\t\t\t.name(\"Fill tiles\")\n//\t\t\t\t.description(\"Fills the tile with an opaque square.\")\n//\t\t\t\t.defaultValue(false)\n//\t\t\t\t.typeName(\"boolean\")\n//\t\t\t\t.build().generate()\n//\t\t);\n//\n//\t\tSystem.out.println(\n//\t\t\tSingleConfigGenerator.builder()\n//\t\t\t\t.key(\"useBrushMarkerTiles\")\n//\t\t\t\t.name(\"Brush Marker Tiles\")\n//\t\t\t\t.description(\"Applies rainbow to tile markers from the \\\\\\\"Brush Markers\\\\\\\" plugin hub plugin. This plugin can be used to mark lots of tiles at once.\")\n//\t\t\t\t.defaultValue(false)\n//\t\t\t\t.typeName(\"boolean\")\n//\t\t\t\t.build().generate()\n//\t\t);\n//\n//\t\tSystem.out.println(\n//\t\t\tSingleConfigGenerator.builder()\n//\t\t\t\t.key(\"whichObjectsToHighlight\")\n//\t\t\t\t.name(\"Object highlight\")\n//\t\t\t\t.description(\"Which objects to highlight.\")\n//\t\t\t\t.defaultValue(RainbowRaveConfig.ObjectsToHighlight.SAME)\n//\t\t\t\t.typeName(\"ObjectsToHighlight\")\n//\t\t\t\t.build().generate()\n//\t\t);\n//\n//\t\tSystem.out.println(\n//\t\t\tSingleConfigGenerator.builder()\n//\t\t\t\t.key(\"whichItemsToInventoryTag\")\n//\t\t\t\t.name(\"Inventory tags\")\n//\t\t\t\t.description(\"Which items to tag.\")\n//\t\t\t\t.defaultValue(RainbowRaveConfig.ItemsToTag.SAME)\n//\t\t\t\t.typeName(\"ItemsToTag\")\n//\t\t\t\t.build().generate()\n//\t\t);\n//\n//\t\tSystem.out.println(\n//\t\t\tSingleConfigGenerator.builder()\n//\t\t\t\t.key(\"colorHighlightedGroundItems\")\n//\t\t\t\t.name(\"Highlight Ground Items\")\n//\t\t\t\t.description(\"Applies rainbow to highlighted items.\")\n//\t\t\t\t.defaultValue(true)\n//\t\t\t\t.typeName(\"boolean\")\n//\t\t\t\t.build().generate()\n//\t\t);\n//\n//\t\tSystem.out.println(\n//\t\t\tSingleConfigGenerator.builder()\n//\t\t\t\t.key(\"whichGroundItemsToColor\")\n//\t\t\t\t.name(\"Ground Items\")\n//\t\t\t\t.description(\"Items in this tier and above are colored.\")\n//\t\t\t\t.defaultValue(RainbowRaveConfig.GroundItemsToColor.REGULAR)\n//\t\t\t\t.typeName(\"GroundItemsToColor\")\n//\t\t\t\t.build().generate()\n//\t\t);\n//\n//\t\tSystem.out.println(\n//\t\t\tSingleConfigGenerator.builder()\n//\t\t\t\t.key(\"recolorScytheSwings\")\n//\t\t\t\t.name(\"Scythe swings\")\n//\t\t\t\t.description(\"Recolor scythe swings. Swing trails may not return to normal after disabling.\")\n//\t\t\t\t.defaultValue(false)\n//\t\t\t\t.typeName(\"boolean\")\n//\t\t\t\t.build().generate()\n//\t\t);\n//\n//\t}\n//\n//\t@Builder\n//\tpublic static final class SingleConfigGenerator\u003cT\u003e {\n//\t\tprivate final String key;\n//\t\tprivate final String name;\n//\t\tprivate String description;\n//\t\tprivate String section;\n//\t\tprivate T defaultValue;\n//\t\tprivate String typeName;\n//\n//\t\tpublic String generate() {\n//\t\t\tString n \u003d \"\\n\";\n//\t\t\treturn String.format(\n//\t\t\t\t\t\"\\t@ConfigItem(\" + n +\n//\t\t\t\t\t\"\\t\\tkeyName \u003d \\\"%s\\\",\" + n +\n//\t\t\t\t\t\"\\t\\tname \u003d \\\"%s\\\",\" + n +\n//\t\t\t\t\t\"\\t\\tdescription \u003d \\\"%s\\\",\" + n +\n//\t\t\t\t\t(section \u003d\u003d null ? \"%s\" : \"\\t\\tsection \u003d %s,\" + n) +\n//\t\t\t\t\t\"\\t\\tposition \u003d \" + i++ + \"\" + n +\n//\t\t\t\t\t\"\\t)\" + n +\n//\t\t\t\t\t\"\\tdefault \" + ((typeName \u003d\u003d null) ? defaultValue.getClass().getSimpleName() : typeName) + \" %s()\" + n +\n//\t\t\t\t\t\"\\t{\" + n +\n//\t\t\t\t\t\"\\t\\treturn %s;\" + n +\n//\t\t\t\t\t\"\\t}\" + n,\n//\t\t\t\tkey, name, description, (section \u003d\u003d null) ? \"\" : section, key, defaultValue\n//\t\t\t);\n//\t\t}\n//\t}\n}\n","filePath":"src\\test\\java\\com\\rainbowrave\\ConfigGenerator.java"},{"fileName":"ExamplePluginTest.java","content":"package com.rainbowrave;\n\nimport java.io.BufferedReader;\nimport java.io.InputStreamReader;\nimport java.lang.reflect.Field;\nimport java.util.Properties;\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.RuneLiteProperties;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ExamplePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tsetWindowTitle(\"rainbow-rave (\" + getCurrentGitBranch() + \") RL-\" + RuneLiteProperties.getVersion());\n\n\t\tExternalPluginManager.loadBuiltin(RainbowRavePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n\n\tprivate static void setWindowTitle(String title) throws NoSuchFieldException, IllegalAccessException\n\t{\n\t\tField propertiesField \u003d RuneLiteProperties.class.getDeclaredField(\"properties\");\n\t\tpropertiesField.setAccessible(true);\n\t\tProperties properties \u003d (Properties) propertiesField.get(null);\n\t\tproperties.setProperty(\"runelite.title\", title);\n\t}\n\n\tpublic static String getCurrentGitBranch() {\n\t\ttry\n\t\t{\n\t\t\tProcess process \u003d Runtime.getRuntime().exec(\"git rev-parse --abbrev-ref HEAD\");\n\t\t\tprocess.waitFor();\n\n\t\t\tBufferedReader reader \u003d new BufferedReader(\n\t\t\t\tnew InputStreamReader(process.getInputStream()));\n\n\t\t\treturn reader.readLine();\n\t\t}catch (Exception e) {\n\t\t\treturn \"threw exception\";\n\t\t}\n\t}\n}","filePath":"src\\test\\java\\com\\rainbowrave\\ExamplePluginTest.java"}]},{"commit":"86916a10ae623c1356356b0c69144b12c880f935","repository":"https://github.com/TicTac7x/runelite-plugins.git","internalName":"tictac7x-motherlode","files":[{"fileName":"Bank.java","content":"package tictac7x.motherlode;\n\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.Item;\nimport net.runelite.api.ItemID;\nimport net.runelite.api.events.ItemContainerChanged;\nimport net.runelite.client.config.ConfigManager;\n\npublic class Bank {\n    private final ConfigManager configManager;\n    private final TicTac7xMotherlodeConfig config;\n\n    public Bank(final ConfigManager configManager, final TicTac7xMotherlodeConfig config) {\n        this.configManager \u003d configManager;\n        this.config \u003d config;\n    }\n\n    public int getGoldenNuggets() {\n        return config.getBankGoldenNuggets();\n    }\n\n    public void onItemContainerChanged(final ItemContainerChanged event) {\n        if (event.getContainerId() !\u003d InventoryID.BANK.getId()) return;\n\n        for (final Item item : event.getItemContainer().getItems()) {\n            if (item.getId() \u003d\u003d ItemID.GOLDEN_NUGGET) {\n                setGoldenNuggets(item.getQuantity());\n                return;\n            }\n        }\n    }\n\n    public void depositGoldenNuggets(final int quantity) {\n        setGoldenNuggets(config.getBankGoldenNuggets() + quantity);\n    }\n\n    private void setGoldenNuggets(final int quantity) {\n        configManager.setConfiguration(TicTac7xMotherlodeConfig.group, TicTac7xMotherlodeConfig.bank_golden_nuggets, quantity);\n    }\n}\n","filePath":"src\\main\\java\\tictac7x\\motherlode\\Bank.java"},{"fileName":"Character.java","content":"package tictac7x.motherlode;\n\nimport net.runelite.api.Client;\nimport tictac7x.motherlode.sectors.Sector;\nimport tictac7x.motherlode.sectors.Sectors;\n\nimport java.util.Arrays;\nimport java.util.List;\n\nimport static tictac7x.motherlode.sectors.Sector.DOWNSTAIRS;\n\npublic class Character {\n    private final Client client;\n\n    public Character(final Client client) {\n        this.client \u003d client;\n    }\n\n    private final int[] MOTHERLODE_REGIONS \u003d new int[]{ 14679, 14680, 14681, 14935, 14936, 14937, 15191, 15192, 15193 };\n\n    private boolean inMotherlode \u003d false;\n    private List\u003cSector\u003e sectors \u003d Arrays.asList(DOWNSTAIRS);\n\n    public boolean isInMotherlode() {\n        return inMotherlode;\n    }\n\n    public List\u003cSector\u003e getSectors() {\n        return sectors;\n    }\n\n    public void onGameTick() {\n        this.sectors \u003d Sectors.getSectors(client.getLocalPlayer().getWorldLocation().getX(), client.getLocalPlayer().getWorldLocation().getY(), true);\n    }\n\n    public void checkIsInMotherlode() {\n        for (final int playerRegion : client.getMapRegions()) {\n            for (final int motherlodeRegion : MOTHERLODE_REGIONS) {\n                if (motherlodeRegion \u003d\u003d playerRegion) {\n                    inMotherlode \u003d true;\n                    return;\n                }\n            }\n        }\n\n        inMotherlode \u003d false;\n    }\n}\n","filePath":"src\\main\\java\\tictac7x\\motherlode\\Character.java"},{"fileName":"Hopper.java","content":"package tictac7x.motherlode;\n\nimport net.runelite.api.AnimationID;\nimport net.runelite.api.Client;\nimport net.runelite.api.Varbits;\nimport net.runelite.api.events.AnimationChanged;\nimport net.runelite.api.events.VarbitChanged;\n\npublic class Hopper {\n    private final Client client;\n    private final Inventory inventory;\n    private int paydirt \u003d 0;\n\n    public Hopper(final Client client, final Inventory inventory) {\n        this.client \u003d client;\n        this.inventory \u003d inventory;\n    }\n\n    public int getPaydirt() {\n        return paydirt;\n    }\n\n    public void onAnimationChanged(final AnimationChanged event) {\n        if (event.getActor() \u003d\u003d client.getLocalPlayer() \u0026\u0026 event.getActor().getAnimation() \u003d\u003d AnimationID.LOOKING_INTO) {\n            paydirt \u003d inventory.getPaydirt();\n        }\n    }\n\n    public void onVarbitChanged(final VarbitChanged event) {\n        if (event.getVarbitId() \u003d\u003d Varbits.SACK_NUMBER) {\n            paydirt \u003d 0;\n        }\n    }\n}\n","filePath":"src\\main\\java\\tictac7x\\motherlode\\Hopper.java"},{"fileName":"Inventory.java","content":"package tictac7x.motherlode;\n\nimport net.runelite.api.Item;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.ItemID;\nimport net.runelite.api.events.ItemContainerChanged;\n\npublic class Inventory {\n    private int paydirt \u003d 0;\n    private int otherItems \u003d 0;\n\n    public void onItemContainerChanged(final ItemContainerChanged event) {\n        if (event.getContainerId() !\u003d InventoryID.INVENTORY.getId()) return;\n\n        int paydirt \u003d 0;\n        int otherItems \u003d 0;\n\n        for (final Item item : event.getItemContainer().getItems()) {\n            if (item.getId() \u003e\u003d 0) {\n                otherItems +\u003d item.getId() \u003d\u003d ItemID.PAYDIRT ? 0 : 1;\n                paydirt +\u003d item.getId() \u003d\u003d ItemID.PAYDIRT ? 1 : 0;\n            }\n        }\n\n        this.paydirt \u003d paydirt;\n        this.otherItems \u003d otherItems;\n    }\n\n    public int getPaydirt() {\n        return paydirt;\n    }\n\n    public int getMaximumAvailablePayDirt() {\n        return 28 - otherItems;\n    }\n}\n","filePath":"src\\main\\java\\tictac7x\\motherlode\\Inventory.java"},{"fileName":"Motherlode.java","content":"package tictac7x.motherlode;\n\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.Item;\nimport net.runelite.api.ItemContainer;\nimport net.runelite.api.ItemID;\nimport net.runelite.api.Varbits;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.ItemContainerChanged;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.client.Notifier;\nimport net.runelite.client.callback.ClientThread;\n\npublic class Motherlode {\n    private final Client client;\n    private final ClientThread clientThread;\n    private final Notifier notifier;\n    private final TicTac7xMotherlodeConfig config;\n    private final Bank bank;\n    private final Inventory inventory;\n    private final Sack sack;\n    private final Hopper hopper;\n    private boolean notifiedToStopMining \u003d false;\n    private int goldenNuggetsBefore \u003d 0;\n    private int goldenNuggetsSession \u003d 0;\n\n    public Motherlode(final Client client, final ClientThread clientThread, final Notifier notifier, final TicTac7xMotherlodeConfig config, final Bank bank, final Inventory inventory, final Sack sack, final Hopper hopper) {\n        this.client \u003d client;\n        this.clientThread \u003d clientThread;\n        this.notifier \u003d notifier;\n        this.config \u003d config;\n        this.bank \u003d bank;\n        this.inventory \u003d inventory;\n        this.sack \u003d sack;\n        this.hopper \u003d hopper;\n    }\n\n    public int getDepositedPaydirt() {\n        return sack.getPaydirt() + hopper.getPaydirt();\n    }\n\n    public int getSpaceLeftToDeposit() {\n        return sack.getSize() - sack.getPaydirt() - hopper.getPaydirt();\n    }\n\n    public int getNeededPaydirt() {\n        return Math.min(\n            sack.getSize() - getDepositedPaydirt(),\n            inventory.getMaximumAvailablePayDirt()\n        ) - inventory.getPaydirt();\n    }\n\n    public boolean shouldStopMining() {\n        return (\n            getSpaceLeftToDeposit() \u003d\u003d 0 ||\n            getNeededPaydirt() \u003c 0 ||\n            getNeededPaydirt() \u003d\u003d 0 \u0026\u0026 inventory.getPaydirt() \u003c inventory.getMaximumAvailablePayDirt()\n        );\n    }\n\n    public boolean shouldDepositPaydirt() {\n        return getNeededPaydirt() \u003d\u003d 0 \u0026\u0026 inventory.getPaydirt() \u003e 0;\n    }\n\n    public int getGoldenNuggetsTotal() {\n        return bank.getGoldenNuggets();\n    }\n\n    public int getDepositsLeft() {\n        return inventory.getMaximumAvailablePayDirt() \u003d\u003d 0 ? 0 : (int) Math.ceil((double) getSpaceLeftToDeposit() / inventory.getMaximumAvailablePayDirt());\n    }\n\n    public int getInventoryPaydirt() {\n        return inventory.getPaydirt();\n    }\n\n    public int getSackSize() {\n        return sack.getSize();\n    }\n\n    public boolean sackCanBeMoreThanFull() {\n        return inventory.getMaximumAvailablePayDirt() \u003e getSpaceLeftToDeposit();\n    }\n\n    public int getGoldenNuggetsSession() {\n        return goldenNuggetsSession;\n    }\n\n    public void onItemContainerChanged(final ItemContainerChanged event) {\n        if (!notifiedToStopMining \u0026\u0026 event.getContainerId() \u003d\u003d InventoryID.INVENTORY.getId() \u0026\u0026 shouldStopMining() \u0026\u0026 config.notifyToStopMining()) {\n            notifier.notify(\"Stop mining! Sack will be too full.\");\n            notifiedToStopMining \u003d true;\n        }\n    }\n\n    public void onVarbitChanged(final VarbitChanged event) {\n        if (event.getVarbitId() \u003d\u003d Varbits.SACK_NUMBER) {\n            notifiedToStopMining \u003d false;\n        }\n    }\n\n    public void onChatMessage(final ChatMessage event) {\n        if (event.getType() \u003d\u003d ChatMessageType.MESBOX \u0026\u0026 event.getMessage().contains(\"You collect your ore from the sack.\")) {\n            depositFoundGoldenNuggetsToBank();\n        }\n    }\n\n    private void depositFoundGoldenNuggetsToBank() {\n        final ItemContainer inventory \u003d client.getItemContainer(InventoryID.INVENTORY);\n        if (inventory \u003d\u003d null) return;\n\n        for (final Item item : inventory.getItems()) {\n            if (item.getId() \u003d\u003d ItemID.GOLDEN_NUGGET) {\n                goldenNuggetsBefore \u003d item.getQuantity();\n                break;\n            }\n        }\n\n        clientThread.invokeLater(() -\u003e {\n            final ItemContainer inventoryNextTick \u003d client.getItemContainer(InventoryID.INVENTORY);\n            if (inventoryNextTick \u003d\u003d null) return;\n\n            for (final Item item : inventoryNextTick.getItems()) {\n                if (item.getId() \u003d\u003d ItemID.GOLDEN_NUGGET) {\n                    final int quantity \u003d item.getQuantity() - goldenNuggetsBefore;\n                    bank.depositGoldenNuggets(quantity);\n                    goldenNuggetsSession +\u003d quantity;\n                    break;\n                }\n            }\n        });\n    }\n}\n","filePath":"src\\main\\java\\tictac7x\\motherlode\\Motherlode.java"},{"fileName":"OreVein.java","content":"package tictac7x.motherlode.oreveins;\n\nimport net.runelite.api.WallObject;\nimport tictac7x.motherlode.Motherlode;\nimport tictac7x.motherlode.sectors.Sectors;\nimport tictac7x.motherlode.Character;\nimport tictac7x.motherlode.sectors.Sector;\nimport tictac7x.motherlode.TicTac7xMotherlodeConfig;\n\nimport java.awt.Color;\n\npublic class OreVein {\n    public final int x;\n    public final int y;\n    private boolean isDepleted;\n    private boolean isDepleting;\n    private float health;\n    public final Sector sector;\n\n    private final int RESPAWN_TIME_GAMETICKS \u003d 100;\n    private final int DESPAWN_TIME_DOWNSTAIRS_GAMETICKS \u003d 45;\n    private final int DESPAWN_TIME_UPPERFLOOR_GAMETICKS \u003d 67;\n    private static final int[] ORE_VEINS_IDS \u003d new int[]{ 26661, 26662, 26663, 26664};\n    private static final int[] DEPLETED_ORE_VEINS_IDS \u003d new int[]{ 26665, 26666, 26667, 26668 };\n\n    public OreVein(final int x, final int y, final boolean isDepleted) {\n        this.x \u003d x;\n        this.y \u003d y;\n        this.isDepleted \u003d isDepleted;\n        this.sector \u003d Sectors.getSectors(x, y, false).get(0);\n        this.health \u003d getMaxHealth();\n    }\n\n    public void setDepleted(final boolean isDepleted) {\n        if (this.isDepleted \u003d\u003d isDepleted) return;\n\n        this.isDepleted \u003d isDepleted;\n        this.health \u003d isDepleted ? 0 : getMaxHealth();\n        this.isDepleting \u003d false;\n    }\n\n    public void startDepleting() {\n        isDepleting \u003d true;\n    }\n\n    public void onGameTick() {\n        if (isDepleted) {\n            health +\u003d (getMaxHealth()) / RESPAWN_TIME_GAMETICKS;\n        } else if (isDepleting) {\n            health \u003d Math.max(health - 1, 0);\n        }\n    }\n\n    public float getPieProgress() {\n        return health / getMaxHealth() * (isDepleted ? -1 : 1);\n    }\n\n    public Color getPieColor(final TicTac7xMotherlodeConfig config, final Motherlode motherlode) {\n        return\n            motherlode.shouldStopMining() ? config.getOreVeinsStoppingColor() :\n            isDepleted ? config.getOreVeinsDepletedColor() :\n            config.getOreVeinsColor();\n    }\n\n    public boolean isRendering(final TicTac7xMotherlodeConfig config, final Character character) {\n        if (config.upstairsOnly() \u0026\u0026 sector \u003d\u003d Sector.DOWNSTAIRS) {\n            return false;\n        }\n\n        if (!character.getSectors().contains(sector)) {\n            return false;\n        }\n\n        return true;\n    }\n\n    private float getMaxHealth() {\n        return sector \u003d\u003d Sector.DOWNSTAIRS\n            ? DESPAWN_TIME_DOWNSTAIRS_GAMETICKS\n            : DESPAWN_TIME_UPPERFLOOR_GAMETICKS;\n    }\n\n    public static boolean isOreVein(final WallObject wallObject) {\n        for (final int oreVeinId : ORE_VEINS_IDS) {\n            if (wallObject.getId() \u003d\u003d oreVeinId) return true;\n        }\n\n        return false;\n    }\n\n    public static boolean isDepletedOreVein(final WallObject wallObject) {\n        for (final int depletedOreVeinId : DEPLETED_ORE_VEINS_IDS) {\n            if (wallObject.getId() \u003d\u003d depletedOreVeinId) return true;\n        }\n\n        return false;\n    }\n}\n","filePath":"src\\main\\java\\tictac7x\\motherlode\\oreveins\\OreVein.java"},{"fileName":"OreVeins.java","content":"package tictac7x.motherlode.oreveins;\n\nimport net.runelite.api.Actor;\nimport net.runelite.api.AnimationID;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.WallObject;\nimport net.runelite.api.events.AnimationChanged;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.WallObjectDespawned;\nimport net.runelite.api.events.WallObjectSpawned;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.ProgressPieComponent;\nimport tictac7x.motherlode.Motherlode;\nimport tictac7x.motherlode.Character;\nimport tictac7x.motherlode.TicTac7xMotherlodeConfig;\n\nimport javax.annotation.Nullable;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.Map;\nimport java.util.Set;\n\nimport static tictac7x.motherlode.TicTac7xMotherlodePlugin.getWorldObjectKey;\n\npublic class OreVeins extends Overlay {\n    private final TicTac7xMotherlodeConfig config;\n    private final Character character;\n    private final Motherlode motherlode;\n\n    public OreVeins(final TicTac7xMotherlodeConfig config, final Character character, final Motherlode motherlode) {\n        this.config \u003d config;\n        this.character \u003d character;\n        this.motherlode \u003d motherlode;\n\n        setPosition(OverlayPosition.DYNAMIC);\n        setLayer(OverlayLayer.ABOVE_SCENE);\n    }\n\n    public Map\u003cString, OreVein\u003e oreVeins \u003d new HashMap\u003c\u003e();\n    public Set\u003cWallObject\u003e oreVeinsWallObjects \u003d new HashSet\u003c\u003e();\n\n    public void onWallObjectSpawned(final WallObjectSpawned event) {\n        final WallObject wallObject \u003d event.getWallObject();\n        final boolean isOreVein \u003d OreVein.isOreVein(wallObject);\n        final boolean isDepletedOreVein \u003d OreVein.isDepletedOreVein(wallObject);\n        if (!isOreVein \u0026\u0026 !isDepletedOreVein) return;\n\n        updateOreVein(wallObject, isDepletedOreVein);\n        oreVeinsWallObjects.add(event.getWallObject());\n    }\n\n    public void onWallObjectDespawned(final WallObjectDespawned event) {\n        final WallObject wallObject \u003d event.getWallObject();\n        final boolean isOreVein \u003d OreVein.isOreVein(wallObject);\n        final boolean isDepletedOreVein \u003d OreVein.isDepletedOreVein(wallObject);\n        if (!isOreVein \u0026\u0026 !isDepletedOreVein) return;\n\n        updateOreVein(wallObject, isDepletedOreVein);\n        oreVeinsWallObjects.remove(event.getWallObject());\n    }\n\n    public void onGameStateChanged(final GameStateChanged event) {\n        if (event.getGameState() \u003d\u003d GameState.LOADING) {\n            oreVeinsWallObjects.clear();\n        }\n    }\n\n    public void onAnimationChanged(final AnimationChanged event) {\n        setOreVeinMinedFromAnimation(event);\n    }\n\n    public void onGameTick() {\n        for (final OreVein oreVein : oreVeins.values()) {\n            oreVein.onGameTick();\n        }\n    }\n\n    private void updateOreVein(final WallObject wallObject, final boolean isDepleted) {\n        final String key \u003d getWorldObjectKey(wallObject);\n\n        if (oreVeins.containsKey(key)) {\n            oreVeins.get(key).setDepleted(isDepleted);\n        } else {\n            oreVeins.put(key, new OreVein(\n                wallObject.getWorldLocation().getX(),\n                wallObject.getWorldLocation().getY(),\n                isDepleted\n            ));\n        }\n    }\n\n    private void setOreVeinMinedFromAnimation(final AnimationChanged event) {\n        final Actor player \u003d event.getActor();\n        if (!isMiningAnimation(event.getActor().getAnimation())) return;\n\n        final int playerX \u003d player.getWorldLocation().getX();\n        final int playerY \u003d player.getWorldLocation().getY();\n        final int playerOrientation \u003d player.getOrientation();\n\n        // Find correct ore vein based on actor orientation when mining.\n        for (final OreVein oreVein : oreVeins.values()) {\n            if (\n                // Facing south.\n                playerOrientation \u003d\u003d 0 \u0026\u0026 playerX \u003d\u003d oreVein.x \u0026\u0026 playerY \u003d\u003d oreVein.y + 1 ||\n                // Facing west.\n                playerOrientation \u003d\u003d 512 \u0026\u0026 playerX \u003d\u003d oreVein.x + 1 \u0026\u0026 playerY \u003d\u003d oreVein.y ||\n                // Facing north.\n                playerOrientation \u003d\u003d 1024 \u0026\u0026 playerX \u003d\u003d oreVein.x \u0026\u0026 playerY \u003d\u003d oreVein.y - 1 ||\n                // Facing east.\n                playerOrientation \u003d\u003d 1536 \u0026\u0026 playerX \u003d\u003d oreVein.x - 1 \u0026\u0026 playerY \u003d\u003d oreVein.y\n            ) {\n                oreVein.startDepleting();\n            }\n        }\n    }\n\n    @Nullable\n    private OreVein getOreVeinFromWallObject(final WallObject wallObject) {\n        return oreVeins.getOrDefault(getWorldObjectKey(wallObject), null);\n    }\n\n    @Override\n    public Dimension render(final Graphics2D graphics2D) {\n        for (final WallObject wallObject : oreVeinsWallObjects) {\n            final OreVein oreVein \u003d getOreVeinFromWallObject(wallObject);\n            if (oreVein \u003d\u003d null || !oreVein.isRendering(config, character)) continue;\n\n            renderPie(graphics2D, wallObject, oreVein.getPieColor(config, motherlode), oreVein.getPieProgress());\n        }\n\n        return null;\n    }\n\n    private void renderPie(final Graphics2D graphics, final WallObject object, final Color color, final float progress) {\n        try {\n            final ProgressPieComponent progressPieComponentBackground \u003d new ProgressPieComponent();\n            progressPieComponentBackground.setPosition(object.getCanvasLocation(160));\n            progressPieComponentBackground.setProgress(1);\n            progressPieComponentBackground.setFill(new Color(color.getRed(), color.getGreen(), color.getBlue(), Math.max(color.getAlpha() - 100, 0)));\n            progressPieComponentBackground.render(graphics);\n\n            final ProgressPieComponent progressPieComponentTimer \u003d new ProgressPieComponent();\n            progressPieComponentTimer.setPosition(object.getCanvasLocation(160));\n            progressPieComponentTimer.setProgress(progress);\n            progressPieComponentTimer.setBorderColor(color);\n            progressPieComponentTimer.setFill(new Color(color.getRed(), color.getGreen(), color.getBlue(), Math.max(color.getAlpha() - 20, 0)));\n            progressPieComponentTimer.render(graphics);\n        } catch (final Exception ignored) {}\n    }\n\n    private boolean isMiningAnimation(final int animationId) {\n        switch (animationId) {\n            case AnimationID.MINING_MOTHERLODE_BRONZE:\n            case AnimationID.MINING_MOTHERLODE_IRON:\n            case AnimationID.MINING_MOTHERLODE_STEEL:\n            case AnimationID.MINING_MOTHERLODE_BLACK:\n            case AnimationID.MINING_MOTHERLODE_MITHRIL:\n            case AnimationID.MINING_MOTHERLODE_ADAMANT:\n            case AnimationID.MINING_MOTHERLODE_RUNE:\n            case AnimationID.MINING_MOTHERLODE_DRAGON:\n            case AnimationID.MINING_MOTHERLODE_DRAGON_OR:\n            case AnimationID.MINING_MOTHERLODE_DRAGON_UPGRADED:\n            case AnimationID.MINING_MOTHERLODE_DRAGON_OR_TRAILBLAZER:\n            case AnimationID.MINING_MOTHERLODE_3A:\n            case AnimationID.MINING_MOTHERLODE_CRYSTAL:\n            case AnimationID.MINING_MOTHERLODE_INFERNAL:\n            case AnimationID.MINING_MOTHERLODE_GILDED:\n            case AnimationID.MINING_MOTHERLODE_TRAILBLAZER:\n                return true;\n            default:\n                return false;\n        }\n    }\n}","filePath":"src\\main\\java\\tictac7x\\motherlode\\oreveins\\OreVeins.java"},{"fileName":"Rockfall.java","content":"package tictac7x.motherlode.rockfalls;\n\nimport net.runelite.api.GameObject;\nimport tictac7x.motherlode.sectors.Sectors;\nimport tictac7x.motherlode.Character;\nimport tictac7x.motherlode.sectors.Sector;\nimport tictac7x.motherlode.TicTac7xMotherlodeConfig;\n\nimport java.awt.Color;\nimport java.util.Collections;\nimport java.util.List;\n\npublic class Rockfall {\n    public final int x;\n    public final int y;\n    public final List\u003cSector\u003e sectors;\n\n    public Rockfall(final int x, final int y) {\n        this.x \u003d x;\n        this.y \u003d y;\n        this.sectors \u003d Sectors.getSectors(x, y, true);\n    }\n\n    public Color getTileColor(final TicTac7xMotherlodeConfig config) {\n        return config.getRockfallsColor();\n    }\n\n    public boolean isRendering(final TicTac7xMotherlodeConfig config, final Character character) {\n        if (config.upstairsOnly() \u0026\u0026 sectors.contains(Sector.DOWNSTAIRS)) {\n            return false;\n        }\n\n        if (Collections.disjoint(character.getSectors(), sectors)) {\n            return false;\n        }\n\n        return true;\n    }\n\n    public static boolean isRockfall(final GameObject gameObject) {\n        switch (gameObject.getId()) {\n            case 26679:\n            case 26680:\n                return true;\n            default:\n                return false;\n        }\n    }\n}\n","filePath":"src\\main\\java\\tictac7x\\motherlode\\rockfalls\\Rockfall.java"},{"fileName":"Rockfalls.java","content":"package tictac7x.motherlode.rockfalls;\n\nimport net.runelite.api.GameObject;\nimport net.runelite.api.GameState;\nimport net.runelite.api.events.GameObjectDespawned;\nimport net.runelite.api.events.GameObjectSpawned;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport tictac7x.motherlode.Character;\nimport tictac7x.motherlode.TicTac7xMotherlodeConfig;\n\nimport javax.annotation.Nullable;\n\nimport java.awt.BasicStroke;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.Map;\nimport java.util.Set;\n\nimport static tictac7x.motherlode.TicTac7xMotherlodePlugin.getWorldObjectKey;\n\npublic class Rockfalls extends Overlay {\n    private final TicTac7xMotherlodeConfig config;\n    private final Character character;\n\n    private Map\u003cString, Rockfall\u003e rockfalls \u003d new HashMap\u003c\u003e();\n    private Set\u003cGameObject\u003e rockfallsGameObjects \u003d new HashSet\u003c\u003e();\n\n    public Rockfalls(final TicTac7xMotherlodeConfig config, final Character character) {\n        this.config \u003d config;\n        this.character \u003d character;\n\n        setPosition(OverlayPosition.DYNAMIC);\n        setLayer(OverlayLayer.ABOVE_SCENE);\n    }\n\n\n    public void onGameObjectSpawned(final GameObjectSpawned event) {\n        if (!Rockfall.isRockfall(event.getGameObject())) return;\n\n        updateRockfall(event.getGameObject());\n        rockfallsGameObjects.add(event.getGameObject());\n    }\n\n    public void onGameObjectDespawned(final GameObjectDespawned event) {\n        if (!Rockfall.isRockfall(event.getGameObject())) return;\n\n        rockfallsGameObjects.remove(event.getGameObject());\n    }\n\n    public void onGameStateChanged(final GameStateChanged event) {\n        if (event.getGameState() \u003d\u003d GameState.LOADING) {\n            rockfallsGameObjects.clear();\n        }\n    }\n\n    private void updateRockfall(final GameObject gameObject) {\n        final String key \u003d getWorldObjectKey(gameObject);\n\n        if (!rockfalls.containsKey(key)) {\n            rockfalls.put(key, new Rockfall(gameObject.getWorldLocation().getX(), gameObject.getWorldLocation().getY()));\n        }\n    }\n\n    @Nullable\n    private Rockfall getRockfallFromGameObject(final GameObject gameObject) {\n        for (final Rockfall rockfall : rockfalls.values()) {\n            if (rockfall.x \u003d\u003d gameObject.getWorldLocation().getX() \u0026\u0026 rockfall.y \u003d\u003d gameObject.getWorldLocation().getY()) {\n                return rockfall;\n            }\n        }\n\n        return null;\n    }\n\n    @Override\n    public Dimension render(final Graphics2D graphics2D) {\n        if (config.getRockfallsColor().getAlpha() \u003d\u003d 0) return null;\n\n        for (final GameObject rockfallGameObject : rockfallsGameObjects) {\n            final Rockfall rockfall \u003d getRockfallFromGameObject(rockfallGameObject);\n            if (rockfall \u003d\u003d null || !rockfall.isRendering(config, character)) continue;\n\n            renderTile(graphics2D, rockfallGameObject, rockfall.getTileColor(config));\n        }\n\n        return null;\n    }\n\n    private void renderTile(final Graphics2D graphics, final GameObject gameObject, final Color color) {\n        try {\n            // Area border.\n            graphics.setColor(color);\n            graphics.setStroke(new BasicStroke(1));\n            graphics.draw(gameObject.getCanvasTilePoly());\n\n            // Area fill.\n            graphics.setColor(new Color(color.getRed(), color.getGreen(), color.getBlue(), Math.max(color.getAlpha() - 20, 0)));\n            graphics.fill(gameObject.getCanvasTilePoly());\n        } catch (final Exception ignored) {}\n    }\n}\n","filePath":"src\\main\\java\\tictac7x\\motherlode\\rockfalls\\Rockfalls.java"},{"fileName":"Sack.java","content":"package tictac7x.motherlode;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.Varbits;\n\n\npublic class Sack {\n    private final Client client;\n\n    private final int SACK_SIZE_SMALL \u003d 108;\n    private final int SACK_SIZE_UPGRADED \u003d 189;\n\n    public Sack(final Client client) {\n        this.client \u003d client;\n    }\n\n    public int getPaydirt() {\n        return client.getVarbitValue(Varbits.SACK_NUMBER);\n    }\n\n    private boolean isSackUpgraded() {\n        return client.getVarbitValue(Varbits.SACK_UPGRADED) \u003d\u003d 1;\n    }\n\n    public int getSize() {\n        return isSackUpgraded() ? SACK_SIZE_UPGRADED : SACK_SIZE_SMALL;\n    }\n}\n","filePath":"src\\main\\java\\tictac7x\\motherlode\\Sack.java"},{"fileName":"Sector.java","content":"package tictac7x.motherlode.sectors;\n\npublic enum Sector {\n    DOWNSTAIRS,\n    UPSTAIRS_W,\n    UPSTAIRS_NW,\n    UPSTAIRS_SE,\n    UPSTAIRS_S,\n    UPSTAIRS_NE,\n    UPSTAIRS_E\n}\n","filePath":"src\\main\\java\\tictac7x\\motherlode\\sectors\\Sector.java"},{"fileName":"Sectors.java","content":"package tictac7x.motherlode.sectors;\n\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\n\npublic class Sectors {\n    public static List\u003cSector\u003e getSectors(final int x, final int y, final boolean multi) {\n        final List\u003cSector\u003e sectors \u003d new ArrayList\u003c\u003e();\n        final int[] location \u003d new int[]{x, y};\n\n        if (isInSector(UPSTAIRS_W, location)) {\n            sectors.add(Sector.UPSTAIRS_W);\n            if (!multi) return sectors;\n        }\n        if (isInSector(UPSTAIRS_NW, location)) {\n            sectors.add(Sector.UPSTAIRS_NW);\n            if (!multi) return sectors;\n        }\n        if (isInSector(UPSTAIRS_SE, location)) {\n            sectors.add(Sector.UPSTAIRS_SE);\n            if (!multi) return sectors;\n        }\n        if (isInSector(UPSTAIRS_S, location)) {\n            sectors.add(Sector.UPSTAIRS_S);\n            if (!multi) return sectors;\n        }\n        if (isInSector(UPSTAIRS_NE, location)) {\n            sectors.add(Sector.UPSTAIRS_NE);\n            if (!multi) return sectors;\n        }\n        if (isInSector(UPSTAIRS_E, location)) {\n            sectors.add(Sector.UPSTAIRS_E);\n            if (!multi) return sectors;\n        }\n\n        if (sectors.isEmpty()) {\n            sectors.add(Sector.DOWNSTAIRS);\n        }\n\n        return sectors;\n    }\n\n    private static boolean isInSector(final int[][] sector, final int[] location) {\n        for (int[] point : sector) {\n            if (Arrays.equals(point, location)) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    private static final int[][] UPSTAIRS_W \u003d {\n            {3734, 5685},\n            {3735, 5684}, {3735, 5685}, {3735, 5686},\n            {3736, 5685},\n            {3737, 5682}, {3737, 5683}, {3737, 5684}, {3737, 5685},\n            {3738, 5682}, {3738, 5683}, {3738, 5684}, {3738, 5685},\n            {3739, 5683}, {3739, 5684}, {3739, 5685},\n            {3740, 5684}, {3740, 5685}, {3740, 5686},\n            {3741, 5683}, {3741, 5684}, {3741, 5685}, {3741, 5686},\n            {3742, 5683}, {3742, 5684}, {3742, 5685}, {3742, 5686},\n            {3743, 5684}, {3743, 5686}, {3743, 5687},\n            {3744, 5686}, {3744, 5687},\n            {3745, 5684}, {3745, 5685}, {3745, 5686},\n            {3746, 5684}, {3746, 5685}, {3746, 5686},\n            {3747, 5685}, {3747, 5686},\n            {3748, 5684}, {3748, 5685}\n    };\n\n    private static final int[][] UPSTAIRS_NW \u003d {\n            {3747, 5683},\n            {3748, 5682}, {3748, 5683}, {3748, 5684},\n            {3749, 5682}, {3749, 5683}, {3749, 5684},\n            {3750, 5682}, {3750, 5683}, {3750, 5684}, {3750, 5685},\n            {3751, 5678}, {3751, 5680}, {3751, 5681}, {3751, 5683}, {3751, 5684},\n            {3752, 5676}, {3752, 5677}, {3752, 5678}, {3752, 5679}, {3752, 5680}, {3752, 5681}, {3752, 5682}, {3752, 5683}, {3752, 5684},\n            {3753, 5676}, {3753, 5677}, {3753, 5678}, {3753, 5680}, {3753, 5682}, {3753, 5683}, {3753, 5684},\n            {3754, 5675}, {3754, 5676}, {3754, 5677},{3754, 5678}, {3754, 5682}, {3754, 5683},\n            {3755, 5675}, {3755, 5676}, {3755, 5677}\n    };\n\n    private static final int[][] UPSTAIRS_SE \u003d {\n            {3755, 5675}, {3755, 5676},\n            {3756, 5674}, {3756, 5675}, {3756, 5676},\n            {3757, 5673}, {3757, 5674}, {3757, 5675}, {3757, 5676},\n            {3758, 5673}, {3758, 5675},\n            {3759, 5672}, {3759, 5673}, {3759, 5674},\n            {3760, 5671}, {3760, 5672}, {3760, 5673}, {3760, 5674},\n            {3761, 5668}, {3761, 5669}, {3761, 5670}, {3761, 5671}, {3761, 5672}, {3761, 5673}, {3761, 5674},\n            {3762, 5668}, {3762, 5670}, {3762, 5671}, {3762, 5672}, {3762, 5673}\n    };\n\n    private static final int[][] UPSTAIRS_S \u003d {\n            {3761, 5660}, {3761, 5661}, {3761, 5662}, {3761, 5663}, {3761, 5664},\n            {3762, 5657}, {3762, 5658}, {3762, 5660}, {3762, 5661}, {3762, 5662}, {3762, 5663}, {3762, 5664}, {3762, 5665}, {3762, 5667}, {3762, 5668},\n            {3763, 5656}, {3763, 5657}, {3763, 5658}, {3763, 5659}, {3763, 5660}, {3763, 5662}, {3763, 5663}, {3763, 5665}, {3763, 5666}, {3763, 5667}, {3763, 5668}, {3763, 5670},\n            {3764, 5656}, {3764, 5657}, {3764, 5658}, {3764, 5659}, {3764, 5665}, {3764, 5667}, {3764, 5668}, {3764, 5669}, {3764, 5670},\n            {3765, 5656}, {3765, 5657}, {3765, 5658},\n            {3766, 5657}\n    };\n\n    private static final int[][] UPSTAIRS_NE \u003d {\n            {3755, 5675}, {3755, 5676}, {3755, 5681}, {3755, 5682}, {3755, 5683},\n            {3756, 5676}, {3756, 5677}, {3756, 5678}, {3756, 5679}, {3756, 5681}, {3756, 5682}, {3756, 5683}, {3756, 5684},\n            {3757, 5676}, {3757, 5677}, {3757, 5678}, {3757, 5679}, {3757, 5680}, {3757, 5681}, {3757, 5682}, {3757, 5683}, {3757, 5684},\n            {3758, 5680}, {3758, 5681}, {3758, 5683}, {3758, 5685},\n            {3759, 5682}, {3759, 5683}, {3759, 5684}, {3759, 5685},\n            {3760, 5683}, {3760, 5684}, {3760, 5685},\n            {3761, 5681}, {3761, 5682}, {3761, 5683}, {3761, 5684}, {3761, 5685},\n            {3762, 5682}, {3762, 5683}\n    };\n\n    private static final int[][] UPSTAIRS_E \u003d {\n            {3755, 5675}, {3755, 5676},\n            {3756, 5676}, {3756, 5677},\n            {3757, 5676}, {3757, 5677},\n            {3758, 5677}, {3758, 5678},\n            {3759, 5676}, {3759, 5677}, {3759, 5678},\n            {3760, 5677}, {3760, 5678}, {3760, 5679}, {3760, 5680},\n            {3761, 5675}, {3761, 5676}, {3761, 5677}, {3761, 5678}, {3761, 5679}, {3761, 5680},\n            {3762, 5675}, {3762, 5676}, {3762, 5677}, {3762, 5678}, {3762, 5679}, {3762, 5680},\n            {3763, 5678}, {3763, 5679}, {3763, 5678}, {3763, 5681}, {3763, 5682}, {3763, 5683},\n            {3764, 5677}, {3764, 5678}, {3764, 5679}, {3764, 5680}, {3764, 5681}, {3764, 5682}, {3764, 5683},\n            {3765, 5677}, {3765, 5678}, {3765, 5679},\n            {3766, 5678}\n    };\n}\n","filePath":"src\\main\\java\\tictac7x\\motherlode\\sectors\\Sectors.java"},{"fileName":"TicTac7xMotherlodeConfig.java","content":"package tictac7x.motherlode;\n\nimport net.runelite.client.config.*;\nimport java.awt.Color;\n\n@ConfigGroup(TicTac7xMotherlodeConfig.group)\npublic interface TicTac7xMotherlodeConfig extends Config {\n\tString group \u003d \"tictac7x-motherlode\";\n\tString sack_custom \u003d \"sack_custom\";\n\tString bank_golden_nuggets \u003d \"bank_golden_nuggets\";\n\tString version \u003d \"version\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d bank_golden_nuggets,\n\t\tname \u003d bank_golden_nuggets,\n\t\tdescription \u003d bank_golden_nuggets,\n\t\thidden \u003d true\n\t) default int getBankGoldenNuggets() { return 0; }\n\n\t@ConfigItem(\n\t\tkeyName \u003d version,\n\t\tname \u003d version,\n\t\tdescription \u003d version,\n\t\thidden \u003d true\n\t) default String getVersion() { return \"0\"; }\n\n\t@ConfigSection(\n\t\tname \u003d \"General\",\n\t\tdescription \u003d \"General options to improve overall experience.\",\n\t\tposition \u003d 1\n\t) String general \u003d \"general\";\n\n\t\t@ConfigItem(\n\t\t\tkeyName \u003d \"upstairs_only\",\n\t\t\tname \u003d \"Only upstairs veins and rockfalls\",\n\t\t\tdescription \u003d \"Highlight only upstairs ore veins and rockfalls.\",\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d general\n\t\t) default boolean upstairsOnly() { return false; }\n\n\t\t@ConfigItem(\n\t\t\tkeyName \u003d \"notify_to_stop_mining\",\n\t\t\tname \u003d \"Notify to stop mining\",\n\t\t\tdescription \u003d \"Notifies user to stop mining when sack would become full with already owned paydirt.\",\n\t\t\tposition \u003d 2,\n\t\t\tsection \u003d general\n\t\t) default boolean notifyToStopMining() { return true; }\n\n\t\t@ConfigSection(\n\t\t\tname \u003d \"Ore veins and rockfalls\",\n\t\t\tdescription \u003d \"Highlight ore veins and rockfalls based on their states.\",\n\t\t\tposition \u003d 2\n\t\t) String ore_veins_and_rockfalls \u003d \"ore_veins_and_rockfalls\";\n\n\t\t@Alpha\n\t\t@ConfigItem(\n\t\t\tkeyName \u003d \"ore_veins\",\n\t\t\tname \u003d \"Mineable Ore Veins\",\n\t\t\tdescription \u003d \"Highlight ore veins that can be mined.\",\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d ore_veins_and_rockfalls\n\t\t) default Color getOreVeinsColor() { return new Color(0, 255, 0, 140); }\n\n\t\t@Alpha\n\t\t@ConfigItem(\n\t\t\tkeyName \u003d \"ore_veins_depleted\",\n\t\t\tname \u003d \"Depleted Ore Veins\",\n\t\t\tdescription \u003d \"Highlight ore veins that are depleted.\",\n\t\t\tposition \u003d 2,\n\t\t\tsection \u003d ore_veins_and_rockfalls\n\t\t) default Color getOreVeinsDepletedColor() { return new Color(255, 180, 0, 140); }\n\n\t\t@Alpha\n\t\t@ConfigItem(\n\t\t\tkeyName \u003d \"ore_veins_stop\",\n\t\t\tname \u003d \"Stopping Ore Veins\",\n\t\t\tdescription \u003d \"Highlight ore veins when they shouldn\u0027t be mined.\",\n\t\t\tposition \u003d 3,\n\t\t\tsection \u003d ore_veins_and_rockfalls\n\t\t) default Color getOreVeinsStoppingColor() { return new Color(255, 0, 0, 140); }\n\n\t\t@Alpha\n\t\t@ConfigItem(\n\t\t\tkeyName \u003d \"rockfalls\",\n\t\t\tname \u003d \"Rockfalls\",\n\t\t\tdescription \u003d \"Highlight rockfalls that need to be cleared.\",\n\t\t\tposition \u003d 4,\n\t\t\tsection \u003d ore_veins_and_rockfalls\n\t\t) default Color getRockfallsColor() { return new Color(255, 0, 0, 80); }\n\n\t@ConfigSection(\n\t\tname \u003d \"Custom sack widget\",\n\t\tdescription \u003d \"Show custom sack widget with helpful information.\",\n\t\tposition \u003d 3\n\t) String custom_sack_widget \u003d \"custom_sack_widget\";\n\n\t\t@ConfigItem(\n\t\t\tkeyName \u003d sack_custom,\n\t\t\tname \u003d \"Use custom sack widget\",\n\t\t\tdescription \u003d \"Whether to show custom sack widget or not.\",\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d custom_sack_widget\n\t\t) default boolean showCustomSackWidget() { return true; }\n\n\t\t@ConfigItem(\n\t\t\tkeyName \u003d \"show_golden_nuggets_total\",\n\t\t\tname \u003d \"Total golden nuggets\",\n\t\t\tdescription \u003d \"Show the total number of golden nuggets that you have.\",\n\t\t\tposition \u003d 2,\n\t\t\tsection \u003d custom_sack_widget\n\t\t) default boolean showGoldenNuggetsTotal() { return true; }\n\n\t\t@ConfigItem(\n\t\t\tkeyName \u003d \"show_golden_nuggets_session\",\n\t\t\tname \u003d \"Session golden nuggets\",\n\t\t\tdescription \u003d \"Show the total number of golden nuggets you have found during this session.\",\n\t\t\tposition \u003d 3,\n\t\t\tsection \u003d custom_sack_widget\n\t\t) default boolean showGoldenNuggetsSession() { return false; }\n\n\t\t@ConfigItem(\n\t\t\tkeyName \u003d \"sack_paydirt\",\n\t\t\tname \u003d \"Sack pay-dirt\",\n\t\t\tdescription \u003d \"Show total number of pay-dirt in sack and hopper.\",\n\t\t\tposition \u003d 4,\n\t\t\tsection \u003d custom_sack_widget\n\t\t) default boolean showSackAndHopperPaydirt() { return true; }\n\n\t\t@ConfigItem(\n\t\t\tkeyName \u003d \"sack_paydirt_inventory\",\n\t\t\tname \u003d \"Pay-dirt from inventory\",\n\t\t\tdescription \u003d \"Show how many pay dirt will be added to the sack.\",\n\t\t\tposition \u003d 5,\n\t\t\tsection \u003d custom_sack_widget\n\t\t) default boolean showSackPaydirtFromInventory() { return false; }\n\n\t\t@ConfigItem(\n\t\t\tkeyName \u003d \"sack_size\",\n\t\t\tname \u003d \"Sack total size\",\n\t\t\tdescription \u003d \"Show total size of the sack.\",\n\t\t\tposition \u003d 6,\n\t\t\tsection \u003d custom_sack_widget\n\t\t) default boolean showSackSize() { return true; }\n\n\t\t@ConfigItem(\n\t\t\tkeyName \u003d \"sack_deposits\",\n\t\t\tname \u003d \"Deposits left\",\n\t\t\tdescription \u003d \"Show number of inventories you can store before sack gets full.\",\n\t\t\tposition \u003d 7,\n\t\t\tsection \u003d custom_sack_widget\n\t\t) default boolean showSackDeposits() { return true; }\n\n\t\t@ConfigItem(\n\t\t\tkeyName \u003d \"sack_needed\",\n\t\t\tname \u003d \"Needed pay-dirt\",\n\t\t\tdescription \u003d \"Show number of pay-dirt needed to mine before you should deposit the pay-dirt.\",\n\t\t\tposition \u003d 8,\n\t\t\tsection \u003d custom_sack_widget\n\t\t) default boolean showSackNeeded() { return true; }\n\n\n}\n","filePath":"src\\main\\java\\tictac7x\\motherlode\\TicTac7xMotherlodeConfig.java"},{"fileName":"TicTac7xMotherlodePlugin.java","content":"package tictac7x.motherlode;\n\nimport com.google.inject.Provides;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.TileObject;\nimport net.runelite.api.events.AnimationChanged;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GameObjectDespawned;\nimport net.runelite.api.events.GameObjectSpawned;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.ItemContainerChanged;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.api.events.WallObjectDespawned;\nimport net.runelite.api.events.WallObjectSpawned;\nimport net.runelite.api.events.WidgetLoaded;\nimport net.runelite.client.Notifier;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.chat.QueuedMessage;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport tictac7x.motherlode.oreveins.OreVeins;\nimport tictac7x.motherlode.rockfalls.Rockfalls;\n\nimport javax.inject.Inject;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Motherlode Mine Improved\",\n\tdescription \u003d \"Better indicators for ore veins\",\n\ttags \u003d { \"motherlode\", \"prospector\", \"golden\", \"nugget\" },\n\tconflicts \u003d {\"Motherlode Mine\", \"MLM Mining Markers\"}\n)\npublic class TicTac7xMotherlodePlugin extends Plugin {\n\tprivate final String pluginVersion \u003d \"v0.4.3\";\n\tprivate final String pluginMessage \u003d \"\" +\n\t\t\"\u003ccolHIGHLIGHT\u003eMotherlode Mine Improved \" + pluginVersion + \":\u003cbr\u003e\" +\n\t\t\"\u003ccolHIGHLIGHT\u003e* Needed paydirt improvements.\"\n\t;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Inject\n\tprivate TicTac7xMotherlodeConfig config;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate Notifier notifier;\n\n\t@Inject\n\tprivate ChatMessageManager chatMessageManager;\n\n\tprivate Character character;\n\tprivate Bank bank;\n\tprivate Inventory inventory;\n\tprivate Hopper hopper;\n\tprivate OreVeins oreVeins;\n\tprivate Rockfalls rockfalls;\n\tprivate Sack sack;\n\tprivate Motherlode motherlode;\n\tprivate Widget widget;\n\n\t@Provides\n\tTicTac7xMotherlodeConfig provideConfig(ConfigManager configManager) {\n\t\treturn configManager.getConfig(TicTac7xMotherlodeConfig.class);\n\t}\n\n\t@Override\n\tprotected void startUp() {\n\t\tcharacter \u003d new Character(client);\n\t\tbank \u003d new Bank(configManager, config);\n\t\tinventory \u003d new Inventory();\n\t\thopper \u003d new Hopper(client, inventory);\n\t\tsack \u003d new Sack(client);\n\t\tmotherlode \u003d new Motherlode(client, clientThread, notifier, config, bank, inventory, sack, hopper);\n\t\twidget \u003d new Widget(client, config, motherlode, character);\n\t\toreVeins \u003d new OreVeins(config, character, motherlode);\n\t\trockfalls \u003d new Rockfalls(config, character);\n\n\t\toverlayManager.add(oreVeins);\n\t\toverlayManager.add(rockfalls);\n\t\toverlayManager.add(widget);\n\t}\n\n\t@Override\n\tprotected void shutDown() {\n\t\twidget.shutDown();\n\t\toverlayManager.remove(oreVeins);\n\t\toverlayManager.remove(rockfalls);\n\t\toverlayManager.remove(widget);\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(final GameStateChanged event) {\n\t\toreVeins.onGameStateChanged(event);\n\t\trockfalls.onGameStateChanged(event);\n\t\tsendMessageAboutPluginVersion(event);\n\t}\n\n\t@Subscribe\n\tpublic void onItemContainerChanged(final ItemContainerChanged event) {\n\t\tif (!character.isInMotherlode()) return;\n\t\tinventory.onItemContainerChanged(event);\n\t\tbank.onItemContainerChanged(event);\n\t\tmotherlode.onItemContainerChanged(event);\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(final ChatMessage event) {\n\t\tif (!character.isInMotherlode()) return;\n\t\tmotherlode.onChatMessage(event);\n\t}\n\n\t@Subscribe\n\tpublic void onWallObjectSpawned(final WallObjectSpawned event) {\n\t\tif (!character.isInMotherlode()) return;\n\t\toreVeins.onWallObjectSpawned(event);\n\t}\n\n\t@Subscribe\n\tpublic void onWallObjectDespawned(final WallObjectDespawned event) {\n\t\tif (!character.isInMotherlode()) return;\n\t\toreVeins.onWallObjectDespawned(event);\n\t}\n\n\t@Subscribe\n\tpublic void onAnimationChanged(final AnimationChanged event) {\n\t\tif (!character.isInMotherlode()) return;\n\t\toreVeins.onAnimationChanged(event);\n\t\thopper.onAnimationChanged(event);\n\t}\n\n\t@Subscribe\n\tpublic void onGameObjectSpawned(final GameObjectSpawned event) {\n\t\tif (!character.isInMotherlode()) return;\n\t\trockfalls.onGameObjectSpawned(event);\n\t}\n\n\t@Subscribe\n\tpublic void onGameObjectDespawned(final GameObjectDespawned event) {\n\t\tif (!character.isInMotherlode()) return;\n\t\trockfalls.onGameObjectDespawned(event);\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(final GameTick event) {\n\t\tcharacter.checkIsInMotherlode();\n\t\tif (!character.isInMotherlode()) return;\n\n\t\tcharacter.onGameTick();\n\t\toreVeins.onGameTick();\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(final ConfigChanged event) {\n\t\tif (!character.isInMotherlode()) return;\n\t\twidget.onConfigChanged(event);\n\t}\n\n\t@Subscribe\n\tpublic void onWidgetLoaded(final WidgetLoaded event) {\n\t\tif (!character.isInMotherlode()) return;\n\t\twidget.onWidgetLoaded(event);\n\t}\n\n\t@Subscribe\n\tpublic void onVarbitChanged(final VarbitChanged event) {\n\t\tif (!character.isInMotherlode()) return;\n\t\thopper.onVarbitChanged(event);\n\t\tmotherlode.onVarbitChanged(event);\n\t}\n\n\tprivate void sendMessageAboutPluginVersion(final GameStateChanged event) {\n\t\tif (event.getGameState() \u003d\u003d GameState.LOGGED_IN \u0026\u0026 !config.getVersion().equals(pluginVersion)) {\n\t\t\tconfigManager.setConfiguration(TicTac7xMotherlodeConfig.group, TicTac7xMotherlodeConfig.version, pluginVersion);\n\t\t\tchatMessageManager.queue(QueuedMessage.builder()\n\t\t\t\t.type(ChatMessageType.CONSOLE)\n\t\t\t\t.runeLiteFormattedMessage(pluginMessage)\n\t\t\t\t.build()\n\t\t\t);\n\t\t}\n\t}\n\n\tpublic static String getWorldObjectKey(final TileObject tileObject) {\n\t\treturn tileObject.getWorldLocation().getX() + \"_\" + tileObject.getWorldLocation().getY();\n\t}\n}\n","filePath":"src\\main\\java\\tictac7x\\motherlode\\TicTac7xMotherlodePlugin.java"},{"fileName":"Widget.java","content":"package tictac7x.motherlode;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.events.WidgetLoaded;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.LineComponent;\n\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\n\npublic class Widget extends OverlayPanel {\n    private final Client client;\n    private final TicTac7xMotherlodeConfig config;\n    private final Motherlode motherlode;\n    private final Character character;\n\n    private final int SACK_WIDGET_GROUP \u003d 382;\n    private final int SACK_WIDGET_CHILD \u003d 0;\n\n    public Widget(final Client client, final TicTac7xMotherlodeConfig config, final Motherlode motherlode, final Character character) {\n        this.client \u003d client;\n        this.config \u003d config;\n        this.motherlode \u003d motherlode;\n        this.character \u003d character;\n\n        setPosition(OverlayPosition.TOP_LEFT);\n        setLayer(OverlayLayer.ABOVE_WIDGETS);\n        toggleOriginalWidget(config.showCustomSackWidget());\n    }\n\n    // On first widget load.\n    public void onWidgetLoaded(final WidgetLoaded event) {\n        if (event.getGroupId() \u003d\u003d SACK_WIDGET_GROUP) {\n            toggleOriginalWidget(config.showCustomSackWidget());\n        }\n    }\n\n    // Widget needs to be toggled based on config changed.\n    public void onConfigChanged(final ConfigChanged event) {\n        if (event.getGroup().equals(TicTac7xMotherlodeConfig.group) \u0026\u0026 event.getKey().equals(TicTac7xMotherlodeConfig.sack_custom)) {\n            toggleOriginalWidget(config.showCustomSackWidget());\n        }\n    }\n\n    public void shutDown() {\n        toggleOriginalWidget(false);\n    }\n\n    private void toggleOriginalWidget(final boolean hidden) {\n        final net.runelite.api.widgets.Widget widget \u003d client.getWidget(SACK_WIDGET_GROUP, SACK_WIDGET_CHILD);\n\n        if (widget !\u003d null) {\n            widget.setHidden(hidden);\n        }\n    }\n\n    @Override\n    public Dimension render(final Graphics2D graphics2D) {\n        if (!character.isInMotherlode() || !config.showCustomSackWidget()) return null;\n\n        panelComponent.getChildren().clear();\n\n        setPreferredColor(\n            motherlode.shouldStopMining() ? new Color(255,0,0, 70) :\n            motherlode.sackCanBeMoreThanFull() ? new Color(255, 165, 0, 70) :\n            motherlode.shouldDepositPaydirt() ? new Color(0, 255, 0, 70) :\n            null\n        );\n\n\n        if (config.showGoldenNuggetsTotal() || config.showGoldenNuggetsSession()) {\n            String nuggets \u003d \"\";\n\n            if (config.showGoldenNuggetsTotal()) {\n                nuggets +\u003d motherlode.getGoldenNuggetsTotal();\n            }\n\n            if (config.showGoldenNuggetsSession()) {\n                nuggets +\u003d config.showGoldenNuggetsTotal() ? \" (+\" + motherlode.getGoldenNuggetsSession() + \")\" : motherlode.getGoldenNuggetsSession();\n            }\n\n            panelComponent.getChildren().add(LineComponent.builder()\n                .left(\"Nuggets:\")\n                .right(nuggets).rightColor(Color.ORANGE)\n                .build()\n            );\n        }\n\n        if (config.showSackAndHopperPaydirt() || config.showSackSize()) {\n            String paydirt \u003d \"\";\n\n            if (config.showSackAndHopperPaydirt()) {\n                paydirt +\u003d motherlode.getDepositedPaydirt();\n\n                if (config.showSackPaydirtFromInventory()) {\n                    paydirt +\u003d \" + \" + motherlode.getInventoryPaydirt();\n                }\n            }\n\n            if (config.showSackSize()) {\n                if (config.showSackAndHopperPaydirt()) {\n                    paydirt +\u003d \" / \";\n                }\n\n                paydirt +\u003d motherlode.getSackSize();\n            }\n\n            panelComponent.getChildren().add(LineComponent.builder().left(\"Sack:\").right(paydirt).build());\n        }\n\n        if (config.showSackDeposits()) {\n            panelComponent.getChildren().add(LineComponent.builder()\n                .left(\"Deposits:\")\n                .right(motherlode.getDepositsLeft() + \"\")\n                .build()\n            );\n        }\n\n        if (config.showSackNeeded()) {\n            panelComponent.getChildren().add(LineComponent.builder()\n                .left(\"Needed:\")\n                .right(motherlode.getNeededPaydirt() + \"\").rightColor(\n                    (motherlode.getSpaceLeftToDeposit() \u003d\u003d 0 || motherlode.getNeededPaydirt() \u003d\u003d 0) ? Color.WHITE :\n                    motherlode.getNeededPaydirt() \u003c 0 ? Color.RED :\n                    Color.GREEN )\n                .build()\n            );\n        }\n\n        return super.render(graphics2D);\n    }\n}\n","filePath":"src\\main\\java\\tictac7x\\motherlode\\Widget.java"},{"fileName":"MotherlodePluginTest.java","content":"package tictac7x.motherlode;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class MotherlodePluginTest {\n\tpublic static void main(String[] args) throws Exception {\n\t\tExternalPluginManager.loadBuiltin(TicTac7xMotherlodePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\tictac7x\\motherlode\\MotherlodePluginTest.java"}]},{"commit":"710891d827c0678d3e7816e6e76ecb770d403c06","repository":"https://github.com/BenLite0/1-5-Woodcutting.git","internalName":"1-5-woodcutting","files":[{"fileName":"PatchTimerConfig.java","content":"package com.patchtimer;\n\nimport net.runelite.client.config.*;\nimport java.awt.*;\n\n@ConfigGroup(\"patchtimer\")\npublic interface PatchTimerConfig extends Config {\n\t@ConfigSection(\n\t\tname \u003d \"Timer Settings\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 100\n\t)\n\tString timerSettings \u003d \"timersettings\";\n\n\t@Alpha\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"backgroundSize\",\n\t\t\tname \u003d \"Background Size\",\n\t\t\tdescription \u003d \"How large the timer background should be\",\n\t\t\tposition \u003d 0,\n\t\t\tsection \u003d timerSettings\n\t)\n\tdefault int getBackgroundSize() {\n\t\treturn 16;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"backgroundColor\",\n\t\t\tname \u003d \"Background Color\",\n\t\t\tdescription \u003d \"The color the timer background should be\",\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d timerSettings\n\t)\n\n\t@Alpha\n\tdefault Color getBackgroundColor() {\n\t\treturn new Color(0,0,0,167);\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"textColor\",\n\t\t\tname \u003d \"Text Color\",\n\t\t\tdescription \u003d \"The color the timer text should be\",\n\t\t\tposition \u003d 3,\n\t\t\tsection \u003d timerSettings\n\t)\n\tdefault Color getTextColor() {\n\t\treturn new Color(255,255,255,255);\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"tick_early_color\",\n\t\t\tname \u003d \"Early Tick Color\",\n\t\t\tdescription \u003d \"The color to be 1t early to chop on tree respawn\",\n\t\t\tposition \u003d 4,\n\t\t\tsection \u003d timerSettings\n\t)\n\tdefault Color getTick_early_color() {\n\t\treturn new Color(255, 0, 0,255);\n\t}\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"tick_perfect_color\",\n\t\t\tname \u003d \"Perfect Tick Color\",\n\t\t\tdescription \u003d \"The color to be tick perfect to chop on tree respawn\",\n\t\t\tposition \u003d 5,\n\t\t\tsection \u003d timerSettings\n\t)\n\tdefault Color getTick_perfect_color() {\n\t\treturn new Color(64, 255, 0,255);\n\t}\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"tick_late_color\",\n\t\t\tname \u003d \"Late Tick Color\",\n\t\t\tdescription \u003d \"The color to be 1 tick late to chop on tree respawn\",\n\t\t\tposition \u003d 6,\n\t\t\tsection \u003d timerSettings\n\t)\n\tdefault Color getTick_late_color() {\n\t\treturn new Color(255, 239, 0,255);\n\t}\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"assumeTick\",\n\t\t\tname \u003d \"Assume Respawn tick\",\n\t\t\tdescription \u003d \"If the timer should assume that the tree will respawn 1 tick sooner on single log roll\",\n\t\t\tposition \u003d 101\n\t)\n\tdefault boolean getAssumeTick(){\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\com\\patchtimer\\PatchTimerConfig.java"},{"fileName":"PatchTimerPlugin.java","content":"package com.patchtimer;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Skill;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.api.events.StatChanged;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport java.util.LinkedList;\nimport java.util.List;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"1.5 Woodcutting\"\n)\n\npublic class PatchTimerPlugin extends Plugin\n{\n\tstatic final int LEFT_TREE \u003d 4771;\n\tstatic final int MIDDLE_TREE \u003d 4772;\n\tstatic final int RIGHT_TREE \u003d 4773;\n\tstatic final int TEAK_STUMP \u003d 17;\n\tstatic final int MAHOGANY_STUMP \u003d 40;\n\n\tstatic final int TEAK_XP \u003d 85;\n\tstatic final int MAHOGANY_XP \u003d 125;\n\n\tstatic final int TEAK_RESPAWN \u003d 18;\n\tstatic final int MAHOGANY_RESPAWN \u003d 41;\n\n\t@Getter\n\tprivate final List\u003cTreeTimer\u003e treeTimerList \u003d new LinkedList\u003c\u003e();\n\n\tprivate int lastWoodcuttingXp \u003d 0;\n\tprivate boolean treeFell \u003d false;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate PatchTimerConfig config;\n\n\t@Inject\n\tprivate TimerOverlay overlay;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\toverlayManager.add(overlay);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(overlay);\n\t\tthis.treeTimerList.clear();\n\t}\n\tprivate int lastFallenTreeId \u003d -1;\n\n\t@Subscribe\n\tpublic void onVarbitChanged(VarbitChanged event)\n\t{\n\t\tif ((event.getVarbitId() \u003d\u003d LEFT_TREE || event.getVarbitId() \u003d\u003d MIDDLE_TREE || event.getVarbitId() \u003d\u003d RIGHT_TREE)\n\t\t\t\t\u0026\u0026 (event.getValue() \u003d\u003d TEAK_STUMP || event.getValue() \u003d\u003d MAHOGANY_STUMP)){\n\t\t\ttreeFell \u003d true;\n\t\t\tlastFallenTreeId\u003d event.getVarbitId();\n\t\t\tlog.debug(\"Tree Fell: ID \u003d \" + lastFallenTreeId);\n\t\t}\n\t}\n\t@Subscribe\n\tpublic void onStatChanged(StatChanged statChanged) {\n\t\tif (statChanged.getSkill() !\u003d Skill.WOODCUTTING) {\n\t\t\treturn;\n\t\t}\n\t\tint woodcuttingXp \u003d statChanged.getXp();\n\t\tint skillGained \u003d woodcuttingXp - lastWoodcuttingXp;\n\t\tlastWoodcuttingXp \u003d woodcuttingXp;\n\n\t\tif (treeFell \u0026\u0026 lastFallenTreeId !\u003d -1)\n\t\t{\n\t\t\tint teakRespawn \u003d config.getAssumeTick() ? TEAK_RESPAWN -1 : TEAK_RESPAWN;\n\t\t\tint mahoganyRespawn \u003d config.getAssumeTick() ? MAHOGANY_RESPAWN -1 : MAHOGANY_RESPAWN;\n\n\t\t\tif (isInRange(skillGained, TEAK_XP)) {\n\t\t\t\tlog.debug(\"Single Teak log\");\n\t\t\t\taddTreeTimer(lastFallenTreeId, teakRespawn);\n\t\t\t}\n\t\t\telse if (isInRange(skillGained, MAHOGANY_XP)) {\n\t\t\t\tlog.debug(\"Single Mahogany log\");\n\t\t\t\taddTreeTimer(lastFallenTreeId, mahoganyRespawn);\n\t\t\t}\n\t\telse if (isInRange(skillGained, TEAK_XP * 2)) {\n\t\tlog.debug(\"Double Teak log\");\n\t\taddTreeTimer(lastFallenTreeId, TEAK_RESPAWN);\n\t\t}\n\n\t\telse if (isInRange(skillGained, MAHOGANY_XP * 2)) {\n\t\tlog.debug(\"Double Mahogany log\");\n\t\taddTreeTimer(lastFallenTreeId, MAHOGANY_RESPAWN);\n\t\t\t}\n\t\t\ttreeFell \u003d false;\n\t\t\tlastFallenTreeId \u003d -1;\n\t\t}\n\t}\nprivate void addTreeTimer(int treeId, int respawnDuration)\n{\n\tWorldPoint treeLocation \u003d getTreeLocation(treeId);\n\tif (treeLocation !\u003d null)\n\t{\n\t\ttreeTimerList.add(new TreeTimer(treeLocation, respawnDuration));\n\t\tlog.debug(\"Added TreeTimer for Tree ID \" + treeId + \" at \" + treeLocation + \" with respawn duration \" + respawnDuration);\n\t}\n\telse\n\t{\n\t\tlog.warn(\"Tree ID \" + treeId + \" does not have a mapped location!\");\n\t}\n}\n\nprivate WorldPoint getTreeLocation(int treeId)\n{\n\tswitch (treeId)\n\t{\n\t\tcase LEFT_TREE:\n\t\t\treturn new WorldPoint(3715, 3835, 0);\n\t\tcase MIDDLE_TREE:\n\t\t\treturn new WorldPoint(3708, 3833, 0);\n\t\tcase RIGHT_TREE:\n\t\t\treturn new WorldPoint(3702, 3837, 0);\n\t\tdefault:\n\t\t\treturn null;\n\t}\n}\n\t@Subscribe\n\tpublic void onGameTick(GameTick event){\n\t\t\tthis.treeTimerList.removeIf(TreeTimer -\u003e {\n\t\t\t\tTreeTimer.decrement();\n\t\t\t\treturn TreeTimer.getTicksLeft() \u003c 0;\n\t\t\t});\n\t}\nprivate boolean isInRange(int value, int base)\n{\n\treturn value \u003e\u003d base \u0026\u0026 value \u003c\u003d base * 1.13;\n}\n\t@Provides\n\tPatchTimerConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(PatchTimerConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\patchtimer\\PatchTimerPlugin.java"},{"fileName":"TimerOverlay.java","content":"package com.patchtimer;\n\nimport com.google.inject.Inject;\nimport net.runelite.api.*;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.geom.Rectangle2D;\n\npublic class TimerOverlay extends Overlay{\n    private final PatchTimerPlugin plugin;\n    private final PatchTimerConfig config;\n    private final Client client;\n\n    @Inject\n    TimerOverlay(PatchTimerPlugin plugin, PatchTimerConfig config, Client client ){\n    setPosition(OverlayPosition.DYNAMIC);\n    setLayer(OverlayLayer.ABOVE_SCENE);\n    this.plugin \u003d plugin;\n    this.config \u003d config;\n    this.client \u003d client;\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        final int backgroundSize \u003d this.config.getBackgroundSize();\n        final Color colorBackground \u003d this.config.getBackgroundColor();\n        final Color colorText \u003d this.config.getTextColor();\n        final Color tick_early_color \u003d this.config.getTick_early_color();\n        final Color tick_perfect_color \u003d this.config.getTick_perfect_color();\n        final Color tick_late_color \u003d this.config.getTick_late_color();\n\n        this.plugin.getTreeTimerList().forEach(TreeTimer -\u003e {\n            final String text \u003d TreeTimer.getTicksLeftDisplay();\n            final LocalPoint localPoint \u003d LocalPoint.fromWorld(this.client, TreeTimer.getLocation());\n            if (localPoint !\u003d null){\n                final Color color;\n                final int counter \u003d TreeTimer.getTicksLeft();\n\n                if (counter \u003d\u003d 3)\n                {\n                    color \u003d tick_early_color;\n                }\n                else if (counter \u003d\u003d 2)\n                {\n                    color \u003d tick_perfect_color;\n                }\n                else if (counter \u003d\u003d 1)\n                {\n                    color \u003d tick_late_color;\n                }\n                else {\n                    color \u003d colorText;\n                }\n\n                final Point point \u003d Perspective.getCanvasTextLocation(this.client, graphics, localPoint, text, 0);\n                Rectangle2D textBounds \u003d graphics.getFontMetrics().getStringBounds(text, graphics);\n                this.drawTextBackground(graphics, point, colorBackground, textBounds, backgroundSize);\n                this.drawText(graphics, point, color, text);\n            }\n\n        });\n        return null;\n    }\n    private void drawTextBackground(Graphics2D graphics, Point point, Color color, Rectangle2D textBounds, int size) {\n        graphics.setColor(color);\n\n        final int x \u003d (int) (point.getX() - ((double) size / 2) + (textBounds.getWidth() / 2));\n        final int y \u003d (int) (point.getY() - ((double) size / 2) - (textBounds.getHeight() / 2));\n\n        graphics.fillRect(x, y, size, size);\n    }\n    private void drawText(Graphics2D graphics, Point point, Color color, String text) {\n        final int x \u003d point.getX();\n        final int y \u003d point.getY();\n        graphics.setColor(color);\n        graphics.drawString(text, x, y);\n    }\n}","filePath":"src\\main\\java\\com\\patchtimer\\TimerOverlay.java"},{"fileName":"TreeTimer.java","content":"package com.patchtimer;\n\nimport lombok.Getter;\nimport net.runelite.api.coords.WorldPoint;\n\n\n@Getter\npublic class TreeTimer{\n    private final WorldPoint location;\n    private String ticksLeftDisplay;\n    private int ticksLeft;\n\n    TreeTimer(WorldPoint location, int respawnTime) {\n        this.ticksLeft \u003d respawnTime;\n        this.ticksLeftDisplay \u003d \"\" + this.ticksLeft;\n        this.location \u003d location;\n    }\n\n    public void decrement() {\n        this.ticksLeftDisplay \u003d \"\" + --this.ticksLeft;\n    }\n}\n","filePath":"src\\main\\java\\com\\patchtimer\\TreeTimer.java"},{"fileName":"PatchTimerPluginTest.java","content":"package com.patchtimer;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class PatchTimerPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(PatchTimerPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\patchtimer\\PatchTimerPluginTest.java"}]},{"commit":"c07263b542e966e3f1fcd3c1c9cb56becb42f27d","repository":"https://github.com/Maurits825/snake.git","internalName":"snake","files":[{"fileName":"SnakeConfig.java","content":"package com.snake;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\nimport net.runelite.client.config.Range;\n\n@ConfigGroup(SnakeConfig.GROUP)\npublic interface SnakeConfig extends Config\n{\n\tString GROUP \u003d \"snakeConfig\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"gameSize\",\n\t\tname \u003d \"Game size\",\n\t\tdescription \u003d \"The size of the game.\",\n\t\tposition \u003d 0\n\t)\n\t@Range(min \u003d 1, max \u003d 30)\n\tdefault int gameSize()\n\t{\n\t\treturn 2;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"allowRun\",\n\t\tname \u003d \"Allow run\",\n\t\tdescription \u003d \"Allow running.\",\n\t\tposition \u003d 1\n\t)\n\tdefault boolean allowRun()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"gridTheme\",\n\t\tname \u003d \"Grid theme\",\n\t\tdescription \u003d \"The theme of the grid.\",\n\t\tposition \u003d 2\n\t)\n\tdefault SnakeGridTheme gridTheme()\n\t{\n\t\treturn SnakeGridTheme.ORIGINAL;\n\t}\n\n\t@ConfigSection(\n\t\tname \u003d \"Multiplayer options\",\n\t\tdescription \u003d \"Refer to the readme via support link for more info.\",\n\t\tposition \u003d 3\n\t)\n\tString multiplayerOptionsSection \u003d \"multiplayerOptionsSection\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"enableMultiplayer\",\n\t\tname \u003d \"Enable multiplayer\",\n\t\tdescription \u003d \"Enable multiplayer mode.\",\n\t\tposition \u003d 0,\n\t\tsection \u003d multiplayerOptionsSection\n\t)\n\tdefault boolean enableMultiplayer()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"seed\",\n\t\tname \u003d \"Seed\",\n\t\tdescription \u003d \"The seed used to randomize spawn locations.\",\n\t\tposition \u003d 1,\n\t\tsection \u003d multiplayerOptionsSection\n\t)\n\tdefault int seed()\n\t{\n\t\treturn 1;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"isSameFoodSpawn\",\n\t\tname \u003d \"Same food spawn\",\n\t\tdescription \u003d \"If enabled all players have the same food spawn location, otherwise it is per player.\",\n\t\tposition \u003d 2,\n\t\tsection \u003d multiplayerOptionsSection\n\t)\n\tdefault boolean isSameFoodSpawn()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showAllFood\",\n\t\tname \u003d \"Show all food\",\n\t\tdescription \u003d \"Show all food spawns if same food spawn is enabled.\",\n\t\tposition \u003d 3,\n\t\tsection \u003d multiplayerOptionsSection\n\t)\n\tdefault boolean showAllFood()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"playerNames\",\n\t\tname \u003d \"Player names\",\n\t\tdescription \u003d \"RSN of all the players participating, as comma separated list.\",\n\t\tposition \u003d 4,\n\t\tsection \u003d multiplayerOptionsSection\n\t)\n\tdefault String playerNames()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"addPlayerMenuEntry\",\n\t\tname \u003d \"Show add player menu\",\n\t\tdescription \u003d \"Show add player menu on players.\",\n\t\tposition \u003d 5,\n\t\tsection \u003d multiplayerOptionsSection\n\t)\n\tdefault boolean addPlayerMenuEntry()\n\t{\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\com\\snake\\SnakeConfig.java"},{"fileName":"SnakeController.java","content":"package com.snake;\n\nimport java.awt.Color;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.Random;\nimport java.util.TreeSet;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Player;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\n\n@Slf4j\n@Singleton\npublic class SnakeController\n{\n\tpublic static final String READY_MESSAGE \u003d \"r\";\n\n\tpublic enum State\n\t{\n\t\tIDLE,\n\t\tWAITING_TO_START,\n\t\tREADY,\n\t\tPLAYING,\n\t\tGAME_OVER,\n\t}\n\n\tprivate static final List\u003cColor\u003e PLAYER_COLORS \u003d Arrays.asList(\n\t\tColor.BLUE, Color.YELLOW, Color.MAGENTA, Color.CYAN, Color.RED\n\t);\n\tprivate static final int READY_COUNTDOWN_TICKS \u003d 5;\n\tprivate static final int MAX_RANDOM_POINT_TRIES \u003d 100;\n\n\tprivate final Client client;\n\n\t@Getter\n\tprivate State currentState \u003d State.IDLE;\n\n\t@Getter\n\tprivate List\u003cSnakePlayer\u003e snakePlayers;\n\t@Getter\n\tprivate boolean[][] walkableTiles;\n\n\tprivate WorldPoint wallStartPoint;\n\tprivate int gameSize;\n\tprivate boolean allowRun;\n\tprivate boolean isSameFoodSpawn;\n\n\tprivate int readyCount;\n\t@Getter\n\tprivate int readyTickCountdown;\n\tprivate int deadCount;\n\tprivate int gameOverDeadCount;\n\n\tprivate Random generator;\n\n\t@Inject\n\tpublic SnakeController(Client client)\n\t{\n\t\tthis.client \u003d client;\n\t}\n\n\tpublic void initialize(List\u003cString\u003e playerNames, int gameSize, boolean allowRun, boolean isMultiplayer, boolean isSameFoodSpawn, int seed)\n\t{\n\t\tthis.wallStartPoint \u003d SnakeUtils.getWallStartPoint(client.getLocalPlayer().getWorldLocation(), gameSize);\n\t\tthis.gameSize \u003d gameSize;\n\t\tthis.allowRun \u003d allowRun;\n\t\tthis.isSameFoodSpawn \u003d isSameFoodSpawn;\n\t\tgenerator \u003d new Random(isMultiplayer ? seed : System.nanoTime());\n\n\t\treset();\n\n\t\tList\u003cPlayer\u003e players \u003d client.getPlayers();\n\t\tString currentPlayer \u003d client.getLocalPlayer().getName();\n\t\twalkableTiles \u003d getWalkableTiles(wallStartPoint.dx(1).dy(-1));\n\n\t\tint colorIndex \u003d 0;\n\t\tTreeSet\u003cString\u003e uniquePlayerNames \u003d new TreeSet\u003c\u003e(playerNames);\n\t\tfor (String playerName : uniquePlayerNames)\n\t\t{\n\t\t\tPlayer player \u003d SnakeUtils.findPlayer(players, playerName);\n\t\t\tif (player !\u003d null)\n\t\t\t{\n\t\t\t\tboolean isActivePlayer \u003d playerName.equals(currentPlayer);\n\t\t\t\tColor color \u003d PLAYER_COLORS.get(colorIndex);\n\t\t\t\tif (isActivePlayer)\n\t\t\t\t{\n\t\t\t\t\tcolor \u003d Color.GREEN;\n\t\t\t\t}\n\t\t\t\tsnakePlayers.add(new SnakePlayer(player, color, isActivePlayer));\n\t\t\t\tcolorIndex \u003d (colorIndex + 1) % PLAYER_COLORS.size();\n\t\t\t}\n\t\t}\n\n\t\tgameOverDeadCount \u003d snakePlayers.size() - (isMultiplayer \u0026\u0026 snakePlayers.size() !\u003d 1 ? 1 : 0);\n\n\t\tif (!isMultiplayer)\n\t\t{\n\t\t\tsnakePlayers.get(0).setReady(true);\n\t\t\treadyTickCountdown \u003d READY_COUNTDOWN_TICKS;\n\t\t\tcurrentState \u003d State.READY;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcurrentState \u003d State.WAITING_TO_START;\n\t\t}\n\t}\n\n\tpublic void reset()\n\t{\n\t\tsnakePlayers \u003d new ArrayList\u003c\u003e();\n\t\treadyCount \u003d 0;\n\t\treadyTickCountdown \u003d 0;\n\t\tdeadCount \u003d 0;\n\t\tthis.currentState \u003d State.IDLE;\n\t}\n\n\tpublic void tick()\n\t{\n\t\tState nextState \u003d currentState;\n\t\tswitch (currentState)\n\t\t{\n\t\t\tcase WAITING_TO_START:\n\t\t\t\tnextState \u003d waiting();\n\t\t\t\tbreak;\n\t\t\tcase READY:\n\t\t\t\tnextState \u003d ready();\n\t\t\t\tbreak;\n\t\t\tcase PLAYING:\n\t\t\t\tnextState \u003d playing();\n\t\t\t\tbreak;\n\t\t\tcase IDLE:\n\t\t\tcase GAME_OVER:\n\t\t\t\tbreak;\n\t\t}\n\t\tcurrentState \u003d nextState;\n\t}\n\n\tpublic void handleChatMessage(String playerName, String message)\n\t{\n\t\tif (currentState \u003d\u003d State.WAITING_TO_START \u0026\u0026 message.equals(READY_MESSAGE))\n\t\t{\n\t\t\tfor (SnakePlayer snakePlayer : snakePlayers)\n\t\t\t{\n\t\t\t\tif (snakePlayer.getPlayerName().equals(playerName) \u0026\u0026 !snakePlayer.isReady())\n\t\t\t\t{\n\t\t\t\t\tsnakePlayer.setReady(true);\n\t\t\t\t\treadyCount++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate State waiting()\n\t{\n\t\tfor (SnakePlayer snakePlayer : snakePlayers)\n\t\t{\n\t\t\tsnakePlayer.updateLocation();\n\t\t\tsnakePlayer.moveSnakeTrail();\n\t\t}\n\n\t\tif (readyCount \u003d\u003d snakePlayers.size())\n\t\t{\n\t\t\treadyTickCountdown \u003d READY_COUNTDOWN_TICKS;\n\t\t\treturn State.READY;\n\t\t}\n\t\treturn currentState;\n\t}\n\n\tprivate State ready()\n\t{\n\t\tfor (SnakePlayer snakePlayer : snakePlayers)\n\t\t{\n\t\t\tsnakePlayer.updateLocation();\n\t\t\tsnakePlayer.moveSnakeTrail();\n\t\t}\n\n\t\treadyTickCountdown--;\n\t\tsetAllOverheadText(String.valueOf(readyTickCountdown));\n\t\tif (readyTickCountdown \u003d\u003d 0)\n\t\t{\n\t\t\tfor (SnakePlayer snakePlayer : snakePlayers)\n\t\t\t{\n\t\t\t\tsnakePlayer.fillInitialSnakeTrail();\n\t\t\t}\n\t\t\tsetAllOverheadText(\"Go!\");\n\n\t\t\trespawnAllFood();\n\t\t\treturn State.PLAYING;\n\t\t}\n\t\treturn currentState;\n\t}\n\n\tprivate State playing()\n\t{\n\t\tupdateAllPlayers();\n\n\t\tif (deadCount \u003e\u003d gameOverDeadCount)\n\t\t{\n\t\t\treturn State.GAME_OVER;\n\t\t}\n\n\t\tupdatePlayersOnFood();\n\t\tupdateAllSnakeTrails();\n\n\t\treturn currentState;\n\t}\n\n\tprivate void updateAllPlayers()\n\t{\n\t\tfor (SnakePlayer snakePlayer : snakePlayers)\n\t\t{\n\t\t\tif (snakePlayer.isAlive())\n\t\t\t{\n\t\t\t\tsnakePlayer.updateLocation();\n\t\t\t\tboolean isAlive \u003d checkValidMovement(snakePlayer);\n\t\t\t\tif (!isAlive)\n\t\t\t\t{\n\t\t\t\t\tsnakePlayer.setAlive(false);\n\t\t\t\t\tdeadCount++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void updatePlayersOnFood()\n\t{\n\t\tList\u003cSnakePlayer\u003e onFoodPlayers \u003d new ArrayList\u003c\u003e();\n\t\tfor (SnakePlayer snakePlayer : snakePlayers)\n\t\t{\n\t\t\tif (snakePlayer.isAlive() \u0026\u0026 snakePlayer.getCurrentLocation().equals(snakePlayer.getFoodLocation()))\n\t\t\t{\n\t\t\t\tonFoodPlayers.add(snakePlayer);\n\t\t\t}\n\t\t}\n\n\t\tif (onFoodPlayers.size() \u003e\u003d 1)\n\t\t{\n\t\t\tif (isSameFoodSpawn)\n\t\t\t{\n\t\t\t\tint randomIndex \u003d generator.nextInt(onFoodPlayers.size());\n\t\t\t\tSnakePlayer snakePlayerGrow \u003d onFoodPlayers.get(randomIndex);\n\t\t\t\tsnakePlayerGrow.setShouldGrow(true);\n\t\t\t\tsnakePlayerGrow.increaseScore();\n\t\t\t\tsnakePlayerGrow.setOverHeadText(\"+1\");\n\t\t\t\trespawnAllFood();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfor (SnakePlayer snakePlayerGrow : onFoodPlayers)\n\t\t\t\t{\n\t\t\t\t\tsnakePlayerGrow.setShouldGrow(true);\n\t\t\t\t\tsnakePlayerGrow.setOverHeadText(\"+1\");\n\t\t\t\t\tsnakePlayerGrow.increaseScore();\n\t\t\t\t\tsnakePlayerGrow.setFoodLocation(getRandomPointInGrid());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void updateAllSnakeTrails()\n\t{\n\t\tfor (SnakePlayer snakePlayer : snakePlayers)\n\t\t{\n\t\t\tif (snakePlayer.isAlive())\n\t\t\t{\n\t\t\t\tsnakePlayer.moveSnakeTrail();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate boolean checkValidMovement(SnakePlayer snakePlayer)\n\t{\n\t\tWorldPoint playerWorldPosition \u003d snakePlayer.getCurrentLocation();\n\t\tboolean inGameBoundary \u003d\n\t\t\tplayerWorldPosition.getX() \u003e wallStartPoint.getX() \u0026\u0026\n\t\t\t\tplayerWorldPosition.getX() \u003c\u003d (wallStartPoint.getX() + gameSize) \u0026\u0026\n\t\t\t\tplayerWorldPosition.getY() \u003c wallStartPoint.getY() \u0026\u0026\n\t\t\t\tplayerWorldPosition.getY() \u003e\u003d (wallStartPoint.getY() - gameSize);\n\n\t\tif (!inGameBoundary)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!allowRun \u0026\u0026 snakePlayer.isRunning())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn !checkCollision(snakePlayer);\n\t}\n\n\tprivate boolean checkCollision(SnakePlayer sPlayer)\n\t{\n\t\tWorldPoint playerLocation \u003d sPlayer.getCurrentLocation();\n\t\tfor (SnakePlayer snakePlayer : snakePlayers)\n\t\t{\n\t\t\tfor (WorldPoint trailPoint : snakePlayer.getSnakeTrail())\n\t\t\t{\n\t\t\t\tif (trailPoint.equals(playerLocation))\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate void setAllOverheadText(String text)\n\t{\n\t\tfor (SnakePlayer snakePlayer : snakePlayers)\n\t\t{\n\t\t\tsnakePlayer.setOverHeadText(text);\n\t\t}\n\t}\n\n\tprivate void respawnAllFood()\n\t{\n\t\tif (isSameFoodSpawn)\n\t\t{\n\t\t\tWorldPoint foodLocation \u003d getRandomPointInGrid();\n\t\t\tfor (SnakePlayer snakePlayer : snakePlayers)\n\t\t\t{\n\t\t\t\tsnakePlayer.setFoodLocation(foodLocation);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor (SnakePlayer snakePlayer : snakePlayers)\n\t\t\t{\n\t\t\t\tsnakePlayer.setFoodLocation(getRandomPointInGrid());\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate WorldPoint getRandomPointInGrid()\n\t{\n\t\tWorldPoint randomPoint;\n\t\tint x;\n\t\tint y;\n\t\tint count \u003d 0;\n\t\tdo\n\t\t{\n\t\t\tx \u003d generator.nextInt(gameSize);\n\t\t\ty \u003d generator.nextInt(gameSize);\n\t\t\trandomPoint \u003d wallStartPoint.dx(x + 1).dy(-(y + 1));\n\t\t\tcount++;\n\t\t} while (count \u003c MAX_RANDOM_POINT_TRIES \u0026\u0026 !isFoodSpawnValid(randomPoint, x, y));\n\n\t\treturn randomPoint;\n\t}\n\n\tprivate boolean isFoodSpawnValid(WorldPoint point, int x, int y)\n\t{\n\t\tif (!walkableTiles[x][y])\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (SnakePlayer snakePlayer : snakePlayers)\n\t\t{\n\t\t\tif (point.equals(snakePlayer.getFoodLocation()))\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tprivate boolean[][] getWalkableTiles(WorldPoint gridStart)\n\t{\n\t\tboolean[][] walkable \u003d new boolean[gameSize][gameSize];\n\n\t\tint[][] flags \u003d client.getCollisionMaps()[client.getPlane()].getFlags();\n\t\tLocalPoint gridStartInScene \u003d SnakeUtils.getWorldPointLocationInScene(client, gridStart);\n\t\tfor (int x \u003d 0; x \u003c gameSize; ++x)\n\t\t{\n\t\t\tfor (int y \u003d 0; y \u003c gameSize; ++y)\n\t\t\t{\n\t\t\t\tint data \u003d flags[x + gridStartInScene.getX()][gridStartInScene.getY() - y];\n\t\t\t\twalkable[x][y] \u003d data \u003d\u003d 0;\n\t\t\t}\n\t\t}\n\t\treturn walkable;\n\t}\n}\n","filePath":"src\\main\\java\\com\\snake\\SnakeController.java"},{"fileName":"SnakeGridTheme.java","content":"package com.snake;\n\nimport lombok.Getter;\n\n@Getter\npublic enum SnakeGridTheme\n{\n\tORIGINAL(32693, -1, -1),\n\tTOA(-1, 45510, 45432);\n\n\tprivate final int wallModelId;\n\tprivate final int tileModelId1;\n\tprivate final int tileModelId2;\n\n\tSnakeGridTheme(int wallModelId, int tileModelId1, int tileModelId2)\n\t{\n\t\tthis.wallModelId \u003d wallModelId;\n\t\tthis.tileModelId1 \u003d tileModelId1;\n\t\tthis.tileModelId2 \u003d tileModelId2;\n\t}\n}\n","filePath":"src\\main\\java\\com\\snake\\SnakeGridTheme.java"},{"fileName":"SnakeOverlay.java","content":"package com.snake;\n\nimport static com.snake.SnakeController.READY_MESSAGE;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport javax.inject.Inject;\nimport static net.runelite.api.MenuAction.RUNELITE_OVERLAY;\nimport static net.runelite.api.MenuAction.RUNELITE_OVERLAY_CONFIG;\nimport static net.runelite.client.ui.overlay.OverlayManager.OPTION_CONFIGURE;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.LineComponent;\nimport net.runelite.client.ui.overlay.components.TitleComponent;\n\nclass SnakeOverlay extends OverlayPanel\n{\n\n\tprivate final SnakeController snakeController;\n\n\t@Inject\n\tSnakeOverlay(SnakePlugin plugin, SnakeController snakeController)\n\t{\n\t\tsuper(plugin);\n\t\tthis.snakeController \u003d snakeController;\n\n\t\tsetPosition(OverlayPosition.TOP_LEFT);\n\t\taddMenuEntry(RUNELITE_OVERLAY, \"Start\", \"new game\");\n\t\taddMenuEntry(RUNELITE_OVERLAY_CONFIG, OPTION_CONFIGURE, \"Snake\");\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tSnakeController.State currentState \u003d snakeController.getCurrentState();\n\t\tString status \u003d getStatusText(currentState);\n\n\t\tpanelComponent.getChildren().add(TitleComponent.builder()\n\t\t\t.text(\"Snake - \" + status)\n\t\t\t.build());\n\n\t\tif (currentState \u003d\u003d SnakeController.State.WAITING_TO_START ||\n\t\t\tcurrentState \u003d\u003d SnakeController.State.READY ||\n\t\t\tcurrentState \u003d\u003d SnakeController.State.PLAYING ||\n\t\t\tcurrentState \u003d\u003d SnakeController.State.GAME_OVER)\n\t\t{\n\t\t\tbuildScoreOverlay(currentState);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t.left(\"shift right-click to start a new game\")\n\t\t\t\t.build());\n\t\t}\n\n\t\treturn super.render(graphics);\n\t}\n\n\tprivate void buildScoreOverlay(SnakeController.State currentState)\n\t{\n\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t.left(\"Score\")\n\t\t\t.build());\n\n\t\tfor (SnakePlayer snakePlayer : snakeController.getSnakePlayers())\n\t\t{\n\t\t\tString rightText \u003d (currentState \u003d\u003d SnakeController.State.GAME_OVER ? \"Win: \" : \"\") + snakePlayer.getScore();\n\t\t\tif (currentState \u003d\u003d SnakeController.State.WAITING_TO_START)\n\t\t\t{\n\t\t\t\trightText \u003d snakePlayer.isReady() ? \"R\" : \"-\";\n\t\t\t}\n\t\t\telse if (!snakePlayer.isAlive())\n\t\t\t{\n\t\t\t\trightText \u003d \"Dead: \" + snakePlayer.getScore();\n\t\t\t}\n\n\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t.left(snakePlayer.getPlayerName())\n\t\t\t\t.leftColor(snakePlayer.isAlive() ? snakePlayer.getColor() : Color.DARK_GRAY)\n\t\t\t\t.right(rightText)\n\t\t\t\t.build());\n\n\t\t\tif (!snakePlayer.isReady() \u0026\u0026 snakePlayer.isActivePlayer())\n\t\t\t{\n\t\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t\t.left(\"Type \" + READY_MESSAGE + \" in chat to ready!\")\n\t\t\t\t\t.leftColor(Color.RED)\n\t\t\t\t\t.build());\n\t\t\t}\n\t\t}\n\n\t\tif (currentState \u003d\u003d SnakeController.State.READY)\n\t\t{\n\t\t\tint tickCountDown \u003d snakeController.getReadyTickCountdown();\n\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t.left(tickCountDown \u003d\u003d 0 ? \"Go!\" : \"Starting in \" + snakeController.getReadyTickCountdown())\n\t\t\t\t.build());\n\t\t}\n\t}\n\n\tprivate String getStatusText(SnakeController.State state)\n\t{\n\t\tswitch (state)\n\t\t{\n\t\t\tcase IDLE:\n\t\t\t\treturn \"Idle\";\n\t\t\tcase WAITING_TO_START:\n\t\t\t\treturn \"Waiting\";\n\t\t\tcase READY:\n\t\t\t\treturn \"Get Ready!\";\n\t\t\tcase PLAYING:\n\t\t\t\treturn \"Playing\";\n\t\t\tcase GAME_OVER:\n\t\t\t\treturn \"Game Over\";\n\t\t\tdefault:\n\t\t\t\treturn \"-\";\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\snake\\SnakeOverlay.java"},{"fileName":"SnakePlayer.java","content":"package com.snake;\n\nimport java.awt.Color;\nimport java.util.ArrayDeque;\nimport java.util.Queue;\nimport lombok.Getter;\nimport lombok.Setter;\nimport net.runelite.api.Player;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.util.ColorUtil;\n\npublic class SnakePlayer\n{\n\tprivate static final int INITIAL_TRAIL_SIZE \u003d 2;\n\n\t@Getter\n\tprivate WorldPoint currentLocation;\n\tprivate WorldPoint previousLocation;\n\n\t@Getter\n\tprivate boolean isAlive;\n\t@Getter\n\t@Setter\n\tprivate boolean isReady;\n\n\tprivate final Player player;\n\t@Getter\n\tprivate final String playerName;\n\t@Getter\n\tprivate final Color color;\n\t@Getter\n\tprivate final boolean isActivePlayer;\n\n\t@Setter\n\tprivate boolean shouldGrow;\n\n\t@Getter\n\tprivate final Queue\u003cWorldPoint\u003e snakeTrail \u003d new ArrayDeque\u003c\u003e();\n\t@Getter\n\t@Setter\n\tprivate WorldPoint foodLocation;\n\n\t@Getter\n\t@Setter\n\tprivate int score;\n\n\tpublic SnakePlayer(Player player, Color color, boolean isActivePlayer)\n\t{\n\t\tthis.player \u003d player;\n\t\tthis.color \u003d color;\n\t\tthis.isActivePlayer \u003d isActivePlayer;\n\t\tthis.score \u003d INITIAL_TRAIL_SIZE;\n\n\t\tcurrentLocation \u003d player.getWorldLocation();\n\t\tpreviousLocation \u003d currentLocation;\n\t\tisAlive \u003d true;\n\t\tplayerName \u003d player.getName();\n\t\tisReady \u003d false;\n\n\t\tshouldGrow \u003d false;\n\n\t\tsnakeTrail.add(currentLocation);\n\t\tfoodLocation \u003d null;\n\t}\n\n    public void setOverHeadText(String text)\n\t{\n\t\tsetOverHeadText(text, 50);\n\t}\n\n\tpublic void setOverHeadText(String text, int duration)\n\t{\n\t\tplayer.setOverheadCycle(duration);\n\t\tplayer.setOverheadText(ColorUtil.wrapWithColorTag(text, color));\n\t}\n\n\tpublic void fillInitialSnakeTrail()\n\t{\n\t\tfor (int i \u003d 0; i \u003c INITIAL_TRAIL_SIZE - 1; i++)\n\t\t{\n\t\t\tsnakeTrail.add(player.getWorldLocation());\n\t\t}\n\t}\n\n\tpublic void increaseScore()\n\t{\n\t\tscore++;\n\t}\n\n\tpublic void updateLocation()\n\t{\n\t\tpreviousLocation \u003d currentLocation;\n\t\tcurrentLocation \u003d player.getWorldLocation();\n\t}\n\n\tpublic void moveSnakeTrail()\n\t{\n\t\tif (shouldGrow)\n\t\t{\n\t\t\tsnakeTrail.add(currentLocation);\n\t\t\tshouldGrow \u003d false;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsnakeTrail.poll();\n\t\t\tsnakeTrail.add(currentLocation);\n\t\t}\n\t}\n\n\tpublic void setAlive(boolean isAlive)\n\t{\n\t\tthis.isAlive \u003d isAlive;\n\t\tif (!isAlive)\n\t\t{\n\t\t\tsetOverHeadText(\"Game Over!\");\n\t\t\tplayer.setAnimation(2925);\n\t\t\tplayer.setAnimationFrame(0);\n\t\t\tsnakeTrail.clear();\n\t\t}\n\t}\n\n\tpublic boolean isRunning()\n\t{\n\t\treturn previousLocation.distanceTo(currentLocation) \u003e 1;\n\t}\n}\n","filePath":"src\\main\\java\\com\\snake\\SnakePlayer.java"},{"fileName":"SnakePlugin.java","content":"package com.snake;\n\nimport com.google.inject.Provides;\nimport java.awt.Color;\nimport java.util.Collections;\nimport java.util.List;\nimport javax.inject.Inject;\nimport javax.inject.Provider;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.MenuAction;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.MenuOptionClicked;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.events.OverlayMenuClicked;\nimport net.runelite.client.menus.MenuManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.ui.overlay.OverlayMenuEntry;\nimport net.runelite.client.util.ColorUtil;\nimport net.runelite.client.util.Text;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Snake\",\n\tdescription \u003d \"Play snake in game!\"\n)\npublic class SnakePlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate SnakeConfig config;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate Provider\u003cMenuManager\u003e menuManager;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Inject\n\tprivate SnakeOverlay overlay;\n\n\t@Inject\n\tprivate SnakeController snakeController;\n\n\t@Inject\n\tprivate SnakeView snakeView;\n\n\tprivate static final String ADD_PLAYER_MENU \u003d ColorUtil.wrapWithColorTag(\"Add snake player\", Color.GREEN);\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\toverlayManager.add(overlay);\n\n\t\tif (config.addPlayerMenuEntry() \u0026\u0026 client !\u003d null)\n\t\t{\n\t\t\tmenuManager.get().addPlayerMenuItem(ADD_PLAYER_MENU);\n\t\t}\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\toverlayManager.remove(overlay);\n\t\tclientThread.invokeLater(() -\u003e\n\t\t{\n\t\t\tresetGame();\n\t\t\treturn true;\n\t\t});\n\n\t\tif (client !\u003d null)\n\t\t{\n\t\t\tmenuManager.get().removePlayerMenuItem(ADD_PLAYER_MENU);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick tick)\n\t{\n\t\tsnakeController.tick();\n\t\tsnakeView.update();\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOptionClicked(MenuOptionClicked event)\n\t{\n\t\tif (event.getMenuAction() \u003d\u003d MenuAction.RUNELITE_PLAYER \u0026\u0026 event.getMenuOption().equals(ADD_PLAYER_MENU))\n\t\t{\n\t\t\tString playerName \u003d event.getMenuEntry().getPlayer().getName();\n\t\t\tString newPlayerNames \u003d config.playerNames() + \",\" + playerName;\n\t\t\tconfigManager.setConfiguration(SnakeConfig.GROUP, \"playerNames\", newPlayerNames);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged)\n\t{\n\t\tif (gameStateChanged.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tresetGame();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage event)\n\t{\n\t\tif (event.getType() \u003d\u003d ChatMessageType.PUBLICCHAT)\n\t\t{\n\t\t\tString playerName \u003d Text.sanitize(Text.removeTags(event.getName()));\n\t\t\tString message \u003d Text.sanitize(Text.removeTags(event.getMessage())).toLowerCase();\n\t\t\tsnakeController.handleChatMessage(playerName, message);\n\t\t}\n\t}\n\n\tprivate void initializeGame()\n\t{\n\t\tresetGame();\n\n\t\tList\u003cString\u003e playerNames \u003d config.enableMultiplayer() ?\n\t\t\tText.fromCSV(config.playerNames()) : Collections.singletonList(client.getLocalPlayer().getName());\n\t\tsnakeController.initialize(playerNames, getGameSize(), config.allowRun(), config.enableMultiplayer(), config.isSameFoodSpawn(), config.seed());\n\t\tsnakeView.initialize(snakeController.getSnakePlayers(), getGameSize(), config.gridTheme(), snakeController.getWalkableTiles(), config.isSameFoodSpawn(), config.showAllFood());\n\t}\n\n\tprivate void resetGame()\n\t{\n\t\tsnakeController.reset();\n\t\tsnakeView.reset();\n\t}\n\n\n\tprivate int getGameSize()\n\t{\n\t\treturn 1 + 2 * config.gameSize();\n\t}\n\n\t@Subscribe\n\tpublic void onOverlayMenuClicked(OverlayMenuClicked overlayMenuClicked)\n\t{\n\t\tOverlayMenuEntry overlayMenuEntry \u003d overlayMenuClicked.getEntry();\n\t\tif (overlayMenuEntry.getMenuAction() \u003d\u003d MenuAction.RUNELITE_OVERLAY\n\t\t\t\u0026\u0026 overlayMenuClicked.getEntry().getOption().equals(\"Start\")\n\t\t\t\u0026\u0026 overlayMenuClicked.getOverlay() \u003d\u003d overlay)\n\t\t{\n\t\t\tinitializeGame();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged configChanged)\n\t{\n\t\tif (configChanged.getGroup().equals(SnakeConfig.GROUP))\n\t\t{\n\t\t\tclientThread.invokeLater(() -\u003e\n\t\t\t{\n\t\t\t\tresetGame();\n\t\t\t\treturn true;\n\t\t\t});\n\n\t\t\tif (client !\u003d null)\n\t\t\t{\n\t\t\t\tmenuManager.get().removePlayerMenuItem(ADD_PLAYER_MENU);\n\n\t\t\t\tif (config.addPlayerMenuEntry())\n\t\t\t\t{\n\t\t\t\t\tmenuManager.get().addPlayerMenuItem(ADD_PLAYER_MENU);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t@Provides\n\tSnakeConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(SnakeConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\snake\\SnakePlugin.java"},{"fileName":"SnakeUtils.java","content":"package com.snake;\n\nimport java.util.List;\nimport net.runelite.api.Client;\nimport net.runelite.api.Constants;\nimport net.runelite.api.Player;\nimport net.runelite.api.Tile;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\n\npublic class SnakeUtils\n{\n\tpublic static WorldPoint getWallStartPoint(WorldPoint playerWorldPosition, int gameSize)\n\t{\n\t\tint offset \u003d (int) Math.ceil(gameSize / 2.0f);\n\t\treturn playerWorldPosition.dx(-offset).dy(offset);\n\t}\n\n\tpublic static LocalPoint getWorldPointLocationInScene(Client client, WorldPoint worldPoint)\n\t{\n\t\tTile[][][] tiles \u003d client.getScene().getTiles();\n\t\tint z \u003d client.getPlane();\n\t\tfor (int x \u003d 0; x \u003c Constants.SCENE_SIZE; ++x)\n\t\t{\n\t\t\tfor (int y \u003d 0; y \u003c Constants.SCENE_SIZE; ++y)\n\t\t\t{\n\t\t\t\tTile tile \u003d tiles[z][x][y];\n\t\t\t\tif (tile.getWorldLocation().equals(worldPoint))\n\t\t\t\t{\n\t\t\t\t\treturn new LocalPoint(x, y);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic static Player findPlayer(List\u003cPlayer\u003e players, String name)\n\t{\n\t\tfor (Player player : players)\n\t\t{\n\t\t\tif (name.equals(player.getName()))\n\t\t\t{\n\t\t\t\treturn player;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n}\n","filePath":"src\\main\\java\\com\\snake\\SnakeUtils.java"},{"fileName":"SnakeView.java","content":"package com.snake;\n\nimport java.awt.Color;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Queue;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.api.JagexColor;\nimport net.runelite.api.Model;\nimport net.runelite.api.ModelData;\nimport net.runelite.api.RuneLiteObject;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\n\npublic class SnakeView\n{\n\tprivate final Client client;\n\n\tprivate List\u003cSnakePlayer\u003e snakePlayers;\n\tprivate int gameSize;\n\tprivate boolean[][] walkableTiles;\n\tprivate SnakeGridTheme theme;\n\tprivate boolean isSameFoodSpawn;\n\tprivate boolean showAllFood;\n\n\tprivate final Map\u003cSnakePlayer, List\u003cRuneLiteObject\u003e\u003e snakePlayerTrails \u003d new HashMap\u003c\u003e();\n\tprivate final List\u003cRuneLiteObject\u003e walls \u003d new ArrayList\u003c\u003e();\n\tprivate final List\u003cRuneLiteObject\u003e tiles \u003d new ArrayList\u003c\u003e();\n\tprivate final List\u003cRuneLiteObject\u003e foods \u003d new ArrayList\u003c\u003e();\n\n\tprivate WorldPoint wallStartPoint;\n\n\tprivate static final int TRAIL_MODEL_ID \u003d 29311;\n\tprivate static final int FOOD_MODEL_ID \u003d 2317;\n\n\tprivate static final Color DEFAULT_FOOD_COLOR \u003d new Color(186, 16, 225);\n\n\t@Inject\n\tpublic SnakeView(Client client)\n\t{\n\t\tthis.client \u003d client;\n\t}\n\n\tpublic void initialize(List\u003cSnakePlayer\u003e snakePlayers, int gameSize, SnakeGridTheme theme, boolean[][] walkableTiles, boolean isSameFoodSpawn, boolean showAllFood)\n\t{\n\t\tthis.snakePlayers \u003d snakePlayers;\n\t\tthis.gameSize \u003d gameSize;\n\t\tthis.theme \u003d theme;\n\t\tthis.walkableTiles \u003d walkableTiles;\n\t\tthis.isSameFoodSpawn \u003d isSameFoodSpawn;\n\t\tthis.showAllFood \u003d showAllFood;\n\n\t\twallStartPoint \u003d SnakeUtils.getWallStartPoint(client.getLocalPlayer().getWorldLocation(), gameSize);\n\n\t\tif (theme.getWallModelId() !\u003d -1)\n\t\t{\n\t\t\tspawnWalls();\n\t\t}\n\t\tif (theme.getTileModelId1() !\u003d -1 \u0026\u0026 theme.getTileModelId2() !\u003d -1)\n\t\t{\n\t\t\tspawnGridTiles();\n\t\t}\n\n\t\tspawnFoods();\n\t}\n\n\tpublic void update()\n\t{\n\t\tupdateFoodObjects();\n\t\tupdateSnakeTrails();\n\t}\n\n\tpublic void reset()\n\t{\n\t\tclearAll(Arrays.asList(tiles, walls, foods));\n\t\tclearSnakeTrails();\n\n\t\tsnakePlayers \u003d null;\n\t}\n\n\tprivate void updateSnakeTrails()\n\t{\n\t\tif (snakePlayers \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfor (SnakePlayer snakePlayer : snakePlayers)\n\t\t{\n\t\t\tif (snakePlayer.isAlive())\n\t\t\t{\n\t\t\t\tif (!snakePlayerTrails.containsKey(snakePlayer))\n\t\t\t\t{\n\t\t\t\t\tsnakePlayerTrails.put(snakePlayer, new ArrayList\u003c\u003e());\n\t\t\t\t}\n\n\t\t\t\tList\u003cRuneLiteObject\u003e snakeObjectTrail \u003d snakePlayerTrails.get(snakePlayer);\n\t\t\t\tQueue\u003cWorldPoint\u003e snakePointTrail \u003d snakePlayer.getSnakeTrail();\n\t\t\t\tfor (int i \u003d 0; i \u003c\u003d (snakePointTrail.size() - snakeObjectTrail.size()); i++)\n\t\t\t\t{\n\t\t\t\t\tsnakeObjectTrail.add(spawnSnakeTrailObject(snakePlayer.getColor()));\n\t\t\t\t}\n\n\t\t\t\tint index \u003d 0;\n\t\t\t\tfor (WorldPoint point : snakePointTrail)\n\t\t\t\t{\n\t\t\t\t\tRuneLiteObject obj \u003d snakeObjectTrail.get(index);\n\t\t\t\t\tLocalPoint lp \u003d LocalPoint.fromWorld(client, point);\n\t\t\t\t\tobj.setLocation(lp, client.getPlane());\n\t\t\t\t\tif (!obj.isActive())\n\t\t\t\t\t{\n\t\t\t\t\t\tobj.setActive(true);\n\t\t\t\t\t}\n\t\t\t\t\tindex++;\n\t\t\t\t}\n\n\t\t\t}\n\t\t\telse if (snakePlayerTrails.containsKey(snakePlayer))\n\t\t\t{\n\t\t\t\tfor (RuneLiteObject rlObject : snakePlayerTrails.get(snakePlayer))\n\t\t\t\t{\n\t\t\t\t\trlObject.setActive(false);\n\t\t\t\t}\n\t\t\t\tsnakePlayerTrails.remove(snakePlayer);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void updateFoodObjects()\n\t{\n\t\tif (snakePlayers \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (isSameFoodSpawn)\n\t\t{\n\t\t\tdrawFoodAtLocation(foods.get(0), snakePlayers.get(0).getFoodLocation());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor (int i \u003d 0; i \u003c snakePlayers.size(); i++)\n\t\t\t{\n\t\t\t\tif (showAllFood)\n\t\t\t\t{\n\t\t\t\t\tdrawFoodAtLocation(foods.get(i), snakePlayers.get(i).getFoodLocation());\n\t\t\t\t}\n\t\t\t\telse if (snakePlayers.get(i).isActivePlayer())\n\t\t\t\t{\n\t\t\t\t\tdrawFoodAtLocation(foods.get(0), snakePlayers.get(i).getFoodLocation());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void drawFoodAtLocation(RuneLiteObject food, WorldPoint location)\n\t{\n\t\tif (location \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfood.setLocation(LocalPoint.fromWorld(client, location), client.getPlane());\n\t\tif (!food.isActive())\n\t\t{\n\t\t\tfood.setActive(true);\n\t\t}\n\t}\n\n\tprivate void spawnWalls()\n\t{\n\t\tfor (int x \u003d 0; x \u003c gameSize + 2; x++)\n\t\t{\n\t\t\twalls.add(spawnWallObject(wallStartPoint.dx(x)));\n\t\t}\n\n\t\tfor (int x \u003d 0; x \u003c gameSize + 2; x++)\n\t\t{\n\t\t\twalls.add(spawnWallObject(wallStartPoint.dx(x).dy(-gameSize - 1)));\n\t\t}\n\n\t\tfor (int y \u003d 0; y \u003c gameSize; y++)\n\t\t{\n\t\t\twalls.add(spawnWallObject(wallStartPoint.dy(-y - 1)));\n\t\t}\n\n\t\tfor (int y \u003d 0; y \u003c gameSize; y++)\n\t\t{\n\t\t\twalls.add(spawnWallObject(wallStartPoint.dx(gameSize + 1).dy(-y - 1)));\n\t\t}\n\t}\n\n\tprivate void spawnGridTiles()\n\t{\n\t\tint tileObjectId;\n\t\tfor (int x \u003d 0; x \u003c gameSize; x++)\n\t\t{\n\t\t\tfor (int y \u003d 0; y \u003c gameSize; y++)\n\t\t\t{\n\t\t\t\tif ((x + y) % 2 \u003d\u003d 0)\n\t\t\t\t{\n\t\t\t\t\ttileObjectId \u003d theme.getTileModelId1();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttileObjectId \u003d theme.getTileModelId2();\n\t\t\t\t}\n\n\t\t\t\tif (walkableTiles[x][y])\n\t\t\t\t{\n\t\t\t\t\ttiles.add(spawnGridTileObject(wallStartPoint.dx(x + 1).dy(-(y + 1)), tileObjectId));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void spawnFoods()\n\t{\n\t\tif (isSameFoodSpawn || !showAllFood || snakePlayers.size() \u003d\u003d 1)\n\t\t{\n\t\t\tfoods.add(spawnFoodObject(DEFAULT_FOOD_COLOR));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor (SnakePlayer snakePlayer : snakePlayers)\n\t\t\t{\n\t\t\t\tfoods.add(spawnFoodObject(snakePlayer.getColor()));\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void clearAll(List\u003cList\u003cRuneLiteObject\u003e\u003e allObjectLists)\n\t{\n\t\tfor (List\u003cRuneLiteObject\u003e objectList : allObjectLists)\n\t\t{\n\t\t\tfor (RuneLiteObject obj : objectList)\n\t\t\t{\n\t\t\t\tobj.setActive(false);\n\t\t\t}\n\t\t\tobjectList.clear();\n\t\t}\n\t}\n\n\tprivate void clearSnakeTrails()\n\t{\n\t\tsnakePlayerTrails.forEach((snakePlayer, runeLiteObjects) -\u003e {\n\t\t\tfor (RuneLiteObject runeLiteObject : runeLiteObjects)\n\t\t\t{\n\t\t\t\truneLiteObject.setActive(false);\n\t\t\t}\n\t\t});\n\t\tsnakePlayerTrails.clear();\n\t}\n\n\tprivate RuneLiteObject spawnSnakeTrailObject(Color color)\n\t{\n\t\tRuneLiteObject obj \u003d client.createRuneLiteObject();\n\t\tModelData trailModel \u003d client.loadModelData(TRAIL_MODEL_ID).cloneColors();\n\n\t\ttrailModel.recolor(trailModel.getFaceColors()[0],\n\t\t\tJagexColor.rgbToHSL(color.getRGB(), 0.01d));\n\t\ttrailModel.recolor(trailModel.getFaceColors()[1],\n\t\t\tJagexColor.rgbToHSL(color.getRGB(), 1.0d));\n\n\t\tobj.setModel(trailModel.light());\n\n\t\treturn obj;\n\t}\n\n\tprivate RuneLiteObject spawnWallObject(WorldPoint point)\n\t{\n\t\tRuneLiteObject obj \u003d client.createRuneLiteObject();\n\n\t\tModel wall \u003d client.loadModel(theme.getWallModelId());\n\t\tobj.setModel(wall);\n\t\tLocalPoint lp \u003d LocalPoint.fromWorld(client, point);\n\t\tobj.setLocation(lp, client.getPlane());\n\t\tobj.setActive(true);\n\t\treturn obj;\n\t}\n\n\tprivate RuneLiteObject spawnGridTileObject(WorldPoint point, int tileObjectId)\n\t{\n\t\tRuneLiteObject obj \u003d client.createRuneLiteObject();\n\n\t\tModel tile \u003d client.loadModel(tileObjectId);\n\t\tobj.setModel(tile);\n\t\tLocalPoint lp \u003d LocalPoint.fromWorld(client, point);\n\t\tobj.setLocation(lp, client.getPlane());\n\n\t\tobj.setActive(true);\n\t\treturn obj;\n\t}\n\n\tprivate RuneLiteObject spawnFoodObject(Color color)\n\t{\n\t\tRuneLiteObject obj \u003d client.createRuneLiteObject();\n\n\t\tModelData foodModel \u003d client.loadModelData(FOOD_MODEL_ID)\n\t\t\t.cloneVertices()\n\t\t\t.translate(0, 200, 0)\n\t\t\t.cloneColors();\n\t\tfoodModel.recolor(foodModel.getFaceColors()[0],\n\t\t\tJagexColor.rgbToHSL(color.getRGB(), 1.0d));\n\t\tobj.setModel(foodModel.light());\n\n\t\tobj.setAnimation(client.loadAnimation(502));\n\t\tobj.setShouldLoop(true);\n\n\t\tobj.setDrawFrontTilesFirst(true);\n\n\t\treturn obj;\n\t}\n}\n","filePath":"src\\main\\java\\com\\snake\\SnakeView.java"},{"fileName":"SnakePluginTest.java","content":"package com.snake;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class SnakePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(SnakePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\snake\\SnakePluginTest.java"}]},{"commit":"4f554f97d5b2bacff54f74677b8713953e473dfb","repository":"https://github.com/kanderson66/Calculator-Pro.git","internalName":"calculator-pro","files":[{"fileName":"CalculatorProConfig.java","content":"/*\n * Copyright (c) 2023,  \u003chttps://github.com/kanderson66/Calculator-Pro\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.calculatorpro;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\n\n@ConfigGroup(\"calculatorpro\")\npublic interface CalculatorProConfig extends Config {\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"panel\",\n\t\t\tname \u003d \"Panel Active\",\n\t\t\tdescription \u003d \"Configures whether to turn the Calculator panel on or off\"\n\t)\n\tdefault boolean panelActive()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d \"calculate\",\n\t\t\tname \u003d \"Calculator Command\",\n\t\t\tdescription \u003d \"Configures whether the Calculator command is enabled  !calc 3*4\"\n\t)\n\tdefault boolean calcCommand()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 3,\n\t\t\tkeyName \u003d \"numDecimals\",\n\t\t\tname \u003d \"Decimals to Display\",\n\t\t\tdescription \u003d \"Configures how many decimal places to display on the Calculator chat result (max 15)\"\n\t)\n\tdefault int numDecimals() {\n\t\treturn 3;\n\t}\n\n\t//Make section for instructions, so they can be collapsible\n\t@ConfigSection(\n\t\t\tname \u003d \"Instructions/Features\",\n\t\t\tdescription \u003d \"How to use the calculator in the chatbox\",\n\t\t\tposition \u003d 4,\n\t\t\tclosedByDefault \u003d false\n\t)\n\tString instructionSection \u003d \"instructions\";\n\n\t//STRING VALUE (TEXTBOX) collapsible instructions\n\t@ConfigItem(\n\t\t\tposition \u003d 5,\n\t\t\tkeyName \u003d \"instructions\",\n\t\t\tname \u003d \"Instructions\",\n\t\t\tdescription \u003d \"How to use the calculator in the chatbox\",\n\t\t\tsection \u003d instructionSection\n\t)\n\tdefault String instructions()\n\t{\n\t\treturn \"Call the calculator through the chatbox using the !calc command:\" +\n\t\t\t\t\"\\n!calc 2+3\\n\\n\" +\n\t\t\t\t\"You can create a tag for the result: \\n!calc [tagName] 2+3\\n\\n\" +\n\t\t\t\t\"You can reference tags in your equation:\\n\" +\n\t\t\t\t\"!calc 5*tagName+3\\n\\n\" +\n\t\t\t\t\"Handles complex calculations:\\n!calc 5*((tagName+2)-lvl90+1.3m)\\n\\n\" +\n\t\t\t\t\"For a complete set of included commands and tags, see the Pre-set Tags and Commands infobox below\"\n\t\t\t\t;\n\t}\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Custom Tags\",\n\t\t\tdescription \u003d \"Text-based custom tags\",\n\t\t\tposition \u003d 6,\n\t\t\tclosedByDefault \u003d true\n\t)\n\tString customTagsSection \u003d \"Custom Tags\";\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"customTags\",\n\t\t\tname \u003d \"Custom Tags\",\n\t\t\tdescription \u003d \"Tags to use in the calculator\",\n\t\t\tsection \u003d customTagsSection,\n\t\t\tposition \u003d 7\n\t)\n\tdefault String customTags() {\n\t\treturn \"tag1\u003d123\\n\" +\n\t\t\t\t\"oak\u003d37.5\\n\" +\n\t\t\t\t\"xp\u003doak+tag1\\n\" +\n\t\t\t\t\"func(x,y)\u003dy*2+x+oak\\n\\n\" +\n\t\t\t\t\"###\\n\" +\n\t\t\t\t\"Insert tags above this line, notes below this line\"\n\t\t\t\t+\"\\n\\nTags should look like this:\\n\"\n\t\t\t\t+\"tagName\u003d###\\n\\n\" +\n\t\t\t\t\"Where \\\"tagName\\\" is at least 1 letter, and can contain letters and numbers, but no symbols\"\n\t\t\t\t+\"\\n\\nYou can then reference these tags in your equation\\n\" +\n\t\t\t\t\"!calc 4*tagName\\n\\n\"\n\t\t\t\t+ \"Also supports custom functions. Define a function and its varables:\\n\"\n\t\t\t\t+ \"func(x,y)\u003dx+y+oak*3\\n\\n\"\n\t\t\t\t+ \"Then call it in-game, with the desired values:\\n\" +\n\t\t\t\t\"!calc func(2,3)\";\n\t}\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Custom Equation\",\n\t\t\tdescription \u003d \"Text-based custom equation\",\n\t\t\tposition \u003d 8,\n\t\t\tclosedByDefault \u003d true\n\t)\n\tString customEquationSection \u003d \"Custom Equation\";\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"customEquation\",\n\t\t\tname \u003d \"Custom Equation\",\n\t\t\tdescription \u003d \"Equation to execute by calling \\\"!calc\\\" with nothing after it\",\n\t\t\tsection \u003d customEquationSection,\n\t\t\tposition \u003d 9\n\t)\n\tdefault String customEquation() {\n\t\treturn \"[tag] (lvl99-lvl60)/oak\\n\\n\" +\n\t\t\t\t\"###\\nWrite the equation you want to execute on the top line of this textbox.\\n\\n\" +\n\t\t\t\t\"Execute this equation in-game by calling: \\n\" +\n\t\t\t\t\"!calc \\n\" +\n\t\t\t\t\"in-game with nothing after it\";\n\t}\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Pre-set Tags and Commands\",\n\t\t\tdescription \u003d \"Ready-to-use Tags and Commands\",\n\t\t\tposition \u003d 10,\n\t\t\tclosedByDefault \u003d true\n\t)\n\tString presetTagsSection \u003d \"Pre-set Tags and Commands\";\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"presetTags\",\n\t\t\tname \u003d \"Preset Tags\",\n\t\t\tdescription \u003d \"Ready-to-use Tags and Commands\",\n\t\t\tsection \u003d presetTagsSection,\n\t\t\tposition \u003d 11\n\t)\n\tdefault String presetTags() {\n\t\treturn \"\"\n\t\t\t\t+ \"Math functions such as %, ^2, sqrt, sin, cos, tan are supported:\\n\"\n\t\t\t\t+ \"!calc sqrt(9^3)+5%\\n\\n\"\n\t\t\t\t+ \"Tags:\\n\"\n\t\t\t\t+ \"Include this tag to enter the result of the last calculation:\\n\"\n\t\t\t\t+ \"last\\n\"\n\t\t\t\t+ \"!calc last+200k\\n\\n\"\n\t\t\t\t+ \"Level Tags:\\n\"\n\t\t\t\t+ \"Include these tags to enter the xp for the desired lvl (1-126)\\n\"\n\t\t\t\t+ \"lvl1\\n\"\n\t\t\t\t+ \"lvl2\\n\"\n\t\t\t\t+ \"...\\n\"\n\t\t\t\t+ \"lvl126\\n\"\n\t\t\t\t+ \"!calc lvl90-lvl87\\n\\n\"\n\t\t\t\t+ \"Skill Current xp Tags:\\n\"\n\t\t\t\t+ \"Enter your current xp in the desired skill:\\n\"\n\t\t\t\t+ \"myatt OR myattack\\n\"\n\t\t\t\t+ \"!calc lvl90-myfm\\n\\n\"\n\t\t\t\t+ \"Commands:\\n\"\n                + \"Use the ge market price for an item: \\n\"\n                + \"!calc 500*!price raw shark\\n\\n\"\n\t\t\t\t+ \"Remove all user-created tags:\\n\"\n\t\t\t\t+ \"!calc !clear\\n\\n\"\n\t\t\t\t+ \"Remove a user-created tag:\\n\"\n\t\t\t\t+ \"!calc !remove tagName\\n\\n\"\n\t\t\t\t+ \"List all stored CustomTags or RunTimeTags:\\n\"\n\t\t\t\t+ \"!calc !list RunTimeTags\\n\"\n\t\t\t\t+ \"!calc !list CustomTags\"\n\t\t\t\t;\n\t}\n\n//\t@ConfigSection(\n//\t\t\tname \u003d \"Update Log\",\n//\t\t\tdescription \u003d \"Update Log\",\n//\t\t\tposition \u003d 12,\n//\t\t\tclosedByDefault \u003d true\n//\t)\n//\tString updateLogSection \u003d \"Update Log\";\n//\t@ConfigItem(\n//\t\t\tkeyName \u003d \"updateLog\",\n//\t\t\tname \u003d \"Update Log\",\n//\t\t\tdescription \u003d \"Update Log\",\n//\t\t\tsection \u003d updateLogSection,\n//\t\t\tposition \u003d 13\n//\t)\n//\tdefault String updateLog() {\n//\t\treturn \"Apr 2025\\n\" +\n//\t\t\t\t\"     -Current xp Lookup\\n\" +\n//\t\t\t\t\"     -Config Panel Updated\\n\\n\" +\n//\t\t\t\t\"Dec 2023\\n\" +\n//\t\t\t\t\"     -Scientific Notation\\n\" +\n//\t\t\t\t\"     -lvl100 to lvl126 pre-sets added\\n\\n\" +\n//\t\t\t\t\"Apr 2023\\n\" +\n//\t\t\t\t\"     -Plugin Created\\n\\n\\n\" +\n//\t\t\t\t\"Click \u0027Reset\u0027 button below to get all updated notes and info from developer\\n\\n\" +\n//\t\t\t\t\"NOTE:\\n\" +\n//\t\t\t\t\"This will delete ALL custom tags, equations and notes you may have stored in any infoboxes in this config panel\"\n//\t\t\t\t;\n//\t}\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Bugs/Improvements\",\n\t\t\tdescription \u003d \"Bugs/Improvements\",\n\t\t\tposition \u003d 12,\n\t\t\tclosedByDefault \u003d true\n\t)\n\tString bugsSection \u003d \"Bugs/Improvements\";\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"bugs/Improvements\",\n\t\t\tname \u003d \"Bugs/Improvements\",\n\t\t\tdescription \u003d \"Bugs/Improvements\",\n\t\t\tsection \u003d bugsSection,\n\t\t\tposition \u003d 13\n\t)\n\tdefault String bugsImprovements() {\n\t\treturn \"Please submit any bugs or improvement requests to:\\n\\n\" +\n\t\t\t\t\"https://github.com/kanderson66/Calculator-Pro/issues\"\n\t\t\t\t;\n\t}\n}","filePath":"src\\main\\java\\com\\calculatorpro\\CalculatorProConfig.java"},{"fileName":"CalculatorProPlugin.java","content":"/*\n * Copyright (c) 2023,  \u003chttps://github.com/kanderson66/Calculator-Pro\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.calculatorpro;\n\nimport com.google.inject.Provides;\nimport net.runelite.api.Client;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.MessageNode;\nimport net.runelite.client.chat.ChatColorType;\nimport net.runelite.client.chat.ChatCommandManager;\nimport net.runelite.client.chat.ChatMessageBuilder;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\n\nimport javax.inject.Inject;\n//import java.io.IOException;\nimport java.math.RoundingMode;\nimport java.text.DecimalFormat;\nimport java.util.*;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\nimport com.calculatorpro.uiSpedwards.CalculatorPluginPanel;\n\nimport java.awt.image.BufferedImage;\n\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\n//import java.io.InputStream;\n//import javax.imageio.ImageIO;\nimport net.runelite.client.util.ImageUtil;\nimport net.runelite.api.Skill;    //to get current xp in a skill\nimport net.runelite.client.game.ItemManager; //lookup item price \u0026 alch\nimport net.runelite.http.api.item.ItemPrice; //lookup item price\nimport net.runelite.client.config.RuneLiteConfig;\nimport net.runelite.api.ItemComposition;    //lookup alch price\n\n////auto equate\n//import net.runelite.client.chat.ChatMessageManager;\n//import net.runelite.api.ChatMessageType;\n\n@PluginDescriptor(\n        name \u003d \"Calculator Pro\",\n        description \u003d \"Perform calculations using the side panel or in-game chat commands\",\n        tags \u003d {\"calculator\", \"math\", \"chat\", \"command\", \"text\"}\n)\npublic class CalculatorProPlugin extends Plugin {\n    //calc panel from Spedwards\n    @Inject\n    private ClientToolbar clientToolbar;\n    private NavigationButton navButton;\n    //end calc panel from Spedwards\n    @Inject\n    private CalculatorProConfig config;\n    @Inject\n    private ChatCommandManager chatCommandManager;\n    @Inject\n    private Client client;\n    @Inject\n    private ItemManager itemManager;\n    @Inject\n    private RuneLiteConfig runeLiteConfig;\n\n//\t//auto equate\n//\t@Inject\n//\tprivate ChatMessageManager chatMessageManager;\n\n    private static final String CALCULATE_STRING \u003d \"!calc\";\n    private static final String PRICE_COMMAND_STRING \u003d \"!price\";\n    private static final String ALCH_COMMAND_STRING \u003d \"!alch\";\n\n    //store xp values of each lvl (lvl 1-126)\n    final HashMap\u003cString, String\u003e lvlTags \u003d new HashMap\u003c\u003e();\n    //store custom tags from config panel\n    final HashMap\u003cString, String\u003e configTags \u003d new HashMap\u003c\u003e();\n    //store tags made by user during runtime (last, etc)\n    final HashMap\u003cString, String\u003e runTimeTags \u003d new HashMap\u003c\u003e();\n    //store skill current xp values\n    final HashMap\u003cString, String\u003e SkillTags \u003d new HashMap\u003c\u003e();\n\n    //store whether the panel is currently active or not\n    boolean panelActive \u003d false;\n\n    //track autoTag values\n    boolean needAutoTag;\n    int autoTag \u003d 0;\n\n    //ignore checking in runTimeTags if new tag is coming from Config textbox\n    boolean isConfigTag \u003d false;\n\n    //store the newTagName (after tagName is valid, wait for value to pass check)\n    String newTagName;\n    //Message to output (Error/result)\n    String output;\n    //Store equation from Config textbox\n    String customEquation \u003d \"\";\n\n    @Override\n    public void startUp() {\n        //load lvl xp tags (lvl 1-126)\n        loadLvlTags();\n        //load skill xp values\n        loadSkillTags();\n        //load runTime tags (default with a0-a9 with value 0)\n        loadRunTimeTags();\n        //load tags \u0026 equation from Config text boxes\n        reloadTags();\n\n        //watch for !calc keyword in chat, perform calculate function if found\n        chatCommandManager.registerCommandAsync(CALCULATE_STRING, this::calculate);\n\n        CalculatorPluginPanel panel \u003d new CalculatorPluginPanel();\n\n        BufferedImage icon \u003d ImageUtil.loadImageResource(getClass(), \"/icon.png\");\n\n        navButton \u003d NavigationButton.builder()\n                .tooltip(\"Calculator Pro\")\n                .priority(7)\n                .icon(icon)\n                .panel(panel)\n                .build();\n\n        if (config.panelActive()) {\n            clientToolbar.addNavigation(navButton);\n            panelActive \u003d true;\n        }\n    }\n\n    @Override\n    public void shutDown() {\n\n        chatCommandManager.unregisterCommand(CALCULATE_STRING);\n\n        //calc panel from Spedwards\n        if (panelActive) {\n            clientToolbar.removeNavigation(navButton);\n            panelActive \u003d false;\n        }\n        //end calc panel from Spedwards\n    }\n\n    //adds Calculator Pro to config panel\n    @Provides\n    CalculatorProConfig provideConfig(ConfigManager configManager) {\n        return configManager.getConfig(CalculatorProConfig.class);\n    }\n\n    //load tags for xp at each lvl (lvl1-lvl126)\n    public void loadLvlTags() {\n        //Formula from Wiki \u0027Experience\u0027 page (see \u0027Formula\u0027)\n        for (Integer lvl \u003d 1; lvl \u003c 127; lvl++) {\n            lvlTags.put(\"lvl\" + lvl, Integer.toString(Integer.valueOf((int) eval(\"(1/8)*(\" + lvl + \"^2-\" + lvl + \"+600*((2^(\" + lvl + \"/7)-2^(1/7)))/(2^(1/7)-1))-(\" + lvl + \"/10)\"))));\n        }\n    }\n\n    //load Skill tags, all starting at 0xp\n    public void loadSkillTags() {\n        SkillTags.put(\"myattack\", \"0\");\n        SkillTags.put(\"myatt\", \"0\");\n        SkillTags.put(\"myatk\", \"0\");\n        SkillTags.put(\"myhitpoints\", \"0\");\n        SkillTags.put(\"myhitpoint\", \"0\");\n        SkillTags.put(\"myhealth\", \"0\");\n        SkillTags.put(\"myhit\", \"0\");\n        SkillTags.put(\"myhp\", \"0\");\n        SkillTags.put(\"mymining\", \"0\");\n        SkillTags.put(\"mymine\", \"0\");\n        SkillTags.put(\"mystrength\", \"0\");\n        SkillTags.put(\"mystr\", \"0\");\n        SkillTags.put(\"myagility\", \"0\");\n        SkillTags.put(\"myagil\", \"0\");\n        SkillTags.put(\"myagi\", \"0\");\n        SkillTags.put(\"mysmithing\", \"0\");\n        SkillTags.put(\"mysmith\", \"0\");\n        SkillTags.put(\"mydefence\", \"0\");\n        SkillTags.put(\"mydef\", \"0\");\n        SkillTags.put(\"myherblore\", \"0\");\n        SkillTags.put(\"myherb\", \"0\");\n        SkillTags.put(\"myhl\", \"0\");\n        SkillTags.put(\"myfishing\", \"0\");\n        SkillTags.put(\"myfish\", \"0\");\n        SkillTags.put(\"myranged\", \"0\");\n        SkillTags.put(\"myrange\", \"0\");\n        SkillTags.put(\"myranging\", \"0\");\n        SkillTags.put(\"myrng\", \"0\");\n        SkillTags.put(\"mythieving\", \"0\");\n        SkillTags.put(\"mythieve\", \"0\");\n        SkillTags.put(\"mythief\", \"0\");\n        SkillTags.put(\"mycooking\", \"0\");\n        SkillTags.put(\"mycook\", \"0\");\n        SkillTags.put(\"myprayer\", \"0\");\n        SkillTags.put(\"mypray\", \"0\");\n        SkillTags.put(\"mycrafting\", \"0\");\n        SkillTags.put(\"mycraft\", \"0\");\n        SkillTags.put(\"myfiremaking\", \"0\");\n        SkillTags.put(\"myfire\", \"0\");\n        SkillTags.put(\"myfm\", \"0\");\n        SkillTags.put(\"mymagic\", \"0\");\n        SkillTags.put(\"mymage\", \"0\");\n        SkillTags.put(\"mymag\", \"0\");\n        SkillTags.put(\"myfletching\", \"0\");\n        SkillTags.put(\"myfletch\", \"0\");\n        SkillTags.put(\"mywoodcutting\", \"0\");\n        SkillTags.put(\"mywoodcut\", \"0\");\n        SkillTags.put(\"mywood\", \"0\");\n        SkillTags.put(\"mywc\", \"0\");\n        SkillTags.put(\"myrunecrafting\", \"0\");\n        SkillTags.put(\"myrc\", \"0\");\n        SkillTags.put(\"myrune\", \"0\");\n        SkillTags.put(\"myslayer\", \"0\");\n        SkillTags.put(\"myslay\", \"0\");\n        SkillTags.put(\"myfarming\", \"0\");\n        SkillTags.put(\"myfarm\", \"0\");\n        SkillTags.put(\"myconstruction\", \"0\");\n        SkillTags.put(\"myconstruct\", \"0\");\n        SkillTags.put(\"mycon\", \"0\");\n        SkillTags.put(\"myhunter\", \"0\");\n        SkillTags.put(\"myhunt\", \"0\");\n    }\n\n    //reserve last and a0-a9 tags for autoTag (not a hard reserve)\n    private void loadRunTimeTags() {\n        runTimeTags.put(\"last\", \"0\");\n\n        for (; autoTag \u003c 10; autoTag++) {\n            runTimeTags.put(\"a\" + autoTag, \"0\");\n        }\n        autoTag \u003d 0;\n    }\n\n    //detect change in Config textbox, update tags \u0026 equation\n    @Subscribe\n    public void onConfigChanged(ConfigChanged configChanged) {\n        if (configChanged.getGroup().equals(\"calculatorpro\")) {\n            reloadTags();\n\n            //auto equate check if custom equation changed (and !\u003d last custom equation or blank), output to chat (no !calc command needed)\n            //client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"Example says \", null);\n//\t\t\tif (configChanged.getKey().equals(\"customEquation\")){\n//\t\t\t\tchatMessageManager.queue(\n//\t\t\t\t\t\tChatMessageType.GAMEMESSAGE,\n//\t\t\t\t\t\t\"\",\n//\t\t\t\t\t\t\"Custom equation updated to: \"\n//\t\t\t\t);\n//\t\t\t}\n\n            if (!config.panelActive() \u0026\u0026 panelActive) {\n                clientToolbar.removeNavigation(navButton);\n                panelActive \u003d false;\n            }\n            if (config.panelActive() \u0026\u0026 !panelActive) {\n                clientToolbar.addNavigation(navButton);\n                panelActive \u003d true;\n            }\n        }\n    }\n    //clear current config panel Tags \u0026 equation \u0026 update with new tags from Config Text boxes\n    private void reloadTags() {\n        configTags.clear();\n        customEquation \u003d \"\";\n\n        loadTags(config.customTags());\n        loadEquation(config.customEquation());\n    }\n\n    //load tags from Config text box\n    private void loadTags(String textbox) {\n        //HashMap\u003cString, String\u003e swaps \u003d new HashMap\u003cString, String\u003e();\n        for (String line : textbox.split(\"\\n\")) {\n            //get next line if this line is empty\n            if (line.trim().equals(\"\")) {\n                continue;\n            }\n            //end of tags, now entering notes\n            if (line.trim().contains(\"###\")) {\n                break;\n            }\n            line \u003d line.toLowerCase();\n            \n            if (line.contains(PRICE_COMMAND_STRING)) {\n                line \u003d priceLookup(line, PRICE_COMMAND_STRING);\n\n                if (line.charAt(0) \u003d\u003d \u0027E\u0027) {\n                    continue;\n                }\n            }\n            line \u003d line.replaceAll(\"\\\\s\", \"\");\n            //Split string between tag \u0026 value\n            String[] lineSplit \u003d line.split(\"\u003d\");\n\n            //check if tag has name (possibly empty) and value\n            if (lineSplit.length !\u003d 2) {\n                //\tSystem.out.println(\"no value\");\n                continue;\n            }\n\n            //CF Step 3: check if is custom function (will contain at least 1 ( and ) )\n            //check if name of custom function is valid func(2)\n            String name \u003d lineSplit[0];\n            String value \u003d lineSplit[1];\n            String funcValue \u003d \"\";\n\n            //if, it is a function declaration func(x) \u003d x\n            if (name.contains(\"(\") || name.contains(\")\")) {\n\n                //check # ) never above # (, and add ) if needed\n                List\u003cString\u003e compName \u003d tokenize(name);\n                if (compName.contains(\"(\") || compName.contains(\")\")) {\n                    //check # ) never above # (, and add ) if needed\n                    compName\u003dcheckParenth(compName);\n                    if (compName.get(0).contains(\"Error\")) {\n                        continue;\n                    }\n                    //merge list of strings back into single string\n                    name \u003d \"\";\n                    for (String s : compName) {\n                        name +\u003d s;\n                    }\n                }\n\n                //check Custom function variables names are valid\n                //extract variables from between the ( )    func(x,y) \u003e x,y\n                int start \u003d name.indexOf(\u0027(\u0027);\n                int end \u003d name.lastIndexOf(\u0027)\u0027);\n\n                //find # of variables in function\n                String variables \u003d name.substring(start + 1, end);\n                String[] varSplit \u003d variables.split(\",\");\n\n                //extract name of function before the (, then add number of variables in brackets func(2)\n                name \u003d name.substring(0, start).trim() + \"(\" + varSplit.length + \")\";\n\n                //validate the tag/function name\n                // config tag skips looking in runTime tags (replace it if exists, after value validated)\n                isConfigTag \u003d true;\n                if (!checkTagName(name)) {\n                    isConfigTag \u003d false;\n                    continue;\n                }\n                isConfigTag \u003d false;\n\n                boolean isError \u003d false;\n                for (String s : varSplit) {\n                    //ensure variable has a name\n                    if (s.isEmpty()) {\n                        output \u003d \"Error- no tag name\";\n                        //System.out.println(output);\n                        isError \u003d true;\n                        break;\n                    }\n                    //variable contains at least 1 letter\n                    if (!s.matches(\".*[a-z]+.*\")) {\n                        output \u003d \"Error- tag name/function (no letters): \\\"\" + s + \"\\\"\";\n                        //System.out.println(output);\n                        isError \u003d true;\n                        break;\n                    }\n\n                    //variable contains only letters and/or #s, and/or ()\n                    int len \u003d s.length();\n                    for (int i \u003d 0; i \u003c len; i++) {\n                        if (!(Character.isLetterOrDigit(s.charAt(i)) || s.charAt(i) \u003d\u003d \u0027(\u0027 || s.charAt(i) \u003d\u003d \u0027)\u0027)) {\n                            output \u003d \"Error- tag name (contains symbols): \\\"\" + s + \"\\\"\";\n                            //System.out.println(output);\n                            isError \u003d true;\n                            break;\n                        }\n                    }\n                }\n\n                //error with func variable, end processing config line\n                if (isError) {\n                    continue;\n                }\n\n                //Prepare custom function equation to pass check (replace variables with 1)\n                //prepare custom function for storage (replace custom variable names with var0, etc\n                //split equation into individual components\n\n                List\u003cString\u003e components \u003d tokenize(value);\n                List\u003cString\u003e funcComp \u003d tokenize(value);\n\n                for (int n \u003d 0; n \u003c varSplit.length; n++) {\n                    for (int m \u003d 0; m \u003c components.size(); m++) {\n                        if (varSplit[n].equals(components.get(m))) {\n                            components.set(m, \"1\");\n                            funcComp.set(m, \"var\" + n);\n                        }\n                    }\n                }\n\n                //func(x,y) \u003d splinters(x)*200\n                //splinters(var0)*200\n\n                //if a component has a letter and immediately followed by (, check if is a tag( or func( and replace as needed\n                for (int i \u003d 1; i \u003c components.size(); i++) {\n                    if (components.get(i).equals(\"(\") \u0026\u0026 components.get(i - 1).matches(\".*[a-zA-Z]+.*\")) {\n                        //System.out.println(\"Before entering Nested Functions: \" + components);\n                        components \u003d evaluateNestedFunctions(components);\n                        //System.out.println(\"After Nested Functions: \" + components);\n\n                        //System.out.println(\"Before entering Nested Functions: \" + funcComp);\n                        funcComp \u003d evaluateNestedFunctions(funcComp);\n                        //System.out.println(\"After Nested Functions: \" + funcComp);\n\n                        if (components.get(0).contains(\"Error\") || funcComp.get(0).contains(\"Error\")) {\n                            break;\n                        }\n                        //re-string all components, then properly re-tokenize (evalNestedFunc will string multiple components together)\n                        String tempComp \u003d \"\";\n                        String tempFuncComp \u003d \"\";\n                        for (int n\u003d0; n \u003c components.size(); n++) {\n                                tempComp +\u003d components.get(n);\n                                tempFuncComp +\u003d funcComp.get(n);\n                        }\n                        components \u003d tokenize(tempComp);\n                        funcComp \u003d tokenize(tempFuncComp);\n                        break;\n                    }\n                }\n                //get next line\n                if (components.get(0).contains(\"Error\")  || funcComp.get(0).contains(\"Error\")) {\n                    continue;\n                }\n                //recreate strings with variables replaced with 1\u0027s (value) and val0 val1 (funcValue)\n                for (int n \u003d 0; n \u003c components.size(); n++) {\n                    //this good to replace tags, but not functions in function definition\n                    //if components contains a letter, its a tag, evaluate value of tag and put in funcValue\n                    if (components.get(n).matches(\".*[a-z]+.*\")) {\n                        if(!mathFunction(components.get(n))) {\n                            //funcValue +\u003d checkEquation(components[n]);\n                            funcValue +\u003d evaluateTag(components.get(n));\n\n                            if (funcValue.contains(\"Error\")) {\n                                break;\n                            }\n\n                        }\n                        else {\n                            funcValue +\u003d components.get(n);\n                        }\n\n                        continue;\n                    }\n                    funcValue +\u003d funcComp.get(n);\n                }\n                value \u003d funcValue;                \n            } // not a function declaration, is a tag\n            else {\n\n                //validate the tag/function name\n                // config tag skips looking in runTime tags (replace it if exists, after value validated)\n                isConfigTag \u003d true;\n                if (!checkTagName(name)) {\n                    isConfigTag \u003d false;\n                    continue;\n                }\n                isConfigTag \u003d false;\n                //validate the value of the tag/function\n                //String correctedEquation \u003d checkEquation(value);\n                value \u003d checkEquation(value);\n\n                //Error with tag value- dont add\n                if (value.contains(\"Error\")) {\n                    //System.out.println(correctedEquation);\n                    continue;\n                }\n            }\n\n            if (value.contains(\"Error\")) {\n                continue;\n            }\n\n            //name, with function name being func(2), value being var1+var2*2\n            //add tag\n            configTags.put(name, value);\n\n            //System.out.println(\"Tag/Func added: \" + name + \" , \" + value);\n\n            //remove tag from runTimeTags if it exists\n            if (runTimeTags.get(name) !\u003d null) {\n                runTimeTags.remove(name);\n            }\n        }\n    }\n\n    //load equation from Config text box\n    private void loadEquation(String textbox) {\n        //add a new line incase user has equation on 1 line w/o any new lines\n        textbox \u003d textbox + \"\\n\";\n        String[] equation \u003d textbox.split(\"\\n\", 2);\n\n        customEquation \u003d equation[0];\n        if (customEquation.isEmpty()) {\n            customEquation \u003d \"Error- First line in Custom Equation box is empty\";\n            return;\n        }\n\n        //remove any capitals\n        customEquation \u003d customEquation.toLowerCase();\n\n        //replace !price keyword with value\n        if (customEquation.contains(PRICE_COMMAND_STRING)) {\n\n            customEquation \u003d priceLookup(customEquation, PRICE_COMMAND_STRING);\n\n            if (customEquation.charAt(0) \u003d\u003d \u0027E\u0027) {\n                customEquation \u003d \"Error- Custom Equation !price invalid\";\n                return;\n            }\n        }\n        //remove whitespace\n        customEquation \u003d customEquation.replaceAll(\"\\\\s\", \"\");\n    }\n\n    //check that the config or runTime [tag] is valid\n    private boolean checkTagName(String newTagString) {\n        /*\n            ERRORS TO CHECK\n            -value not # DONE\n            -value has spaces DONE\n            -tag name needs at least 1 letter DONE\n            -tag name contain only numbers and/or letters DONE\n            -tag name doesnt already exist DONE\n         */\n\n        //ensure tag has a name\n        if (newTagString.isEmpty()) {\n            output \u003d \"Error- no tag name\";\n            //System.out.println(output);\n            return false;\n        }\n        //tag name contains at least 1 letter\n        if (!newTagString.matches(\".*[a-z]+.*\")) {\n            output \u003d \"Error- tag name/function (no letters): \\\"\" + newTagString + \"\\\"\";\n            //System.out.println(output);\n            return false;\n        }\n\n        //tag name contains only letters and/or #s, and/or ()\n        int len \u003d newTagString.length();\n        for (int i \u003d 0; i \u003c len; i++) {\n            if (!(Character.isLetterOrDigit(newTagString.charAt(i)) || newTagString.charAt(i) \u003d\u003d \u0027(\u0027 || newTagString.charAt(i) \u003d\u003d \u0027)\u0027)) {\n                output \u003d \"Error- tag name (contains symbols): \\\"\" + newTagString + \"\\\"\";\n                //System.out.println(output);\n                return false;\n            }\n        }\n        //check if tag already exists\n        if (configTags.get(newTagString) !\u003d null)  {\n            output \u003d \"Error- tag \\\"\" + newTagString + \"\\\" already exists in configTags\";\n            //System.out.println(output);\n            return false;\n        }\n        if (lvlTags.get(newTagString) !\u003d null)  {\n            output \u003d \"Error- tag \\\"\" + newTagString + \"\\\" already exists in lvlTags\";\n            //System.out.println(output);\n            return false;\n        }\n        if (SkillTags.get(newTagString) !\u003d null)  {\n            output \u003d \"Error- tag \\\"\" + newTagString + \"\\\" already exists in SkillTags\";\n            //System.out.println(output);\n            return false;\n        }\n        //config tag overrides tags in runTimeTags **all tags override runTimeTags\n//        if (!isConfigTag \u0026\u0026 runTimeTags.get(newTagString) !\u003d null) {\n//            output \u003d \"Error- tag \\\"\" + newTagString + \"\\\" already exists\";\n//            //System.out.println(output);\n//            return false;\n//        }\n        //check if tag is reserved\n        switch (newTagString) {\n            case \"sqrt\":\n            case \"cos\":\n            case \"sin\":\n            case \"tan\":\n                output \u003d \"Error- tag \\\"\" + newTagString + \"\\\" is reserved for math operations\";\n                //System.out.println(output);\n                return false;\n            case \"last\":\n            case \"a0\":\n            case \"a1\":\n            case \"a2\":\n            case \"a3\":\n            case \"a4\":\n            case \"a5\":\n            case \"a6\":\n            case \"a7\":\n            case \"a8\":\n            case \"a9\":\n                output \u003d \"Error- tag \\\"\" + newTagString + \"\\\" is reserved for default tags\";\n                //System.out.println(output);\n                return false;\n            default:\n                break;\n        }\n        return true;\n    }\n\n    //5 + 3 * !price uncut emerald + 2\n    private String priceLookup(String equation, String LOOKUP) {\n        List \u003cString\u003e newEquation \u003d tokenize(equation);\n        for (int n \u003d 0; n \u003c newEquation.size(); n++) {\n            if (newEquation.get(n).contains(LOOKUP)) {\n\n                //get beginning of element, up to LOOKUP\n                String header \u003d newEquation.get(n).substring(0, newEquation.get(n).indexOf(LOOKUP));\n\n                String message \u003d newEquation.get(n);\n                //!price uncut emerald\n                //if !calc !price item, tokenizer leave calc in, need include that\n                int offset \u003d message.indexOf(LOOKUP);\n\n                //!price with no item name after\n                if (message.trim().length() \u003c\u003d LOOKUP.length() + offset) {\n                    return \"Error- no item after \" + LOOKUP;\n                }\n\n                //+1 to account for space after !price\n                String search \u003d message.substring(LOOKUP.length() + offset).trim();\n                List\u003cItemPrice\u003e results \u003d itemManager.search(search);\n\n                if (!results.isEmpty()) {\n                    ItemPrice item \u003d retrieveFromList(results, search);\n\n                    //get alch price\n                    int itemId \u003d item.getId();\n                    //get item price\n                    int itemPrice \u003d runeLiteConfig.useWikiItemPrices() ? itemManager.getWikiPrice(item) : item.getPrice();\n\n                    //todo alch compatibility\n                    //ItemComposition itemComposition \u003d itemManager.getItemComposition(itemId);\n                    //final int alchPrice \u003d itemComposition.getHaPrice();\n\n                    String value \u003d \"\";\n                    if (LOOKUP.equals(PRICE_COMMAND_STRING)) {\n                        value \u003d String.valueOf(itemPrice);\n                    }\n                    else if (LOOKUP.equals(ALCH_COMMAND_STRING)) {\n                        //value \u003d String.valueOf(alchPrice);\n                    }\n\n                    value \u003d header + value;\n\n                    newEquation.remove(n);\n                    newEquation.add(n, value);\n                }\n                else {\n                    return \"Error- cant find item \" + search;\n                }\n            }\n        }\n        return String.join(\"\", newEquation);\n    }\n\n    private ItemPrice retrieveFromList(List\u003cItemPrice\u003e items, String originalInput)\n    {\n        ItemPrice shortest \u003d null;\n        for (ItemPrice item : items)\n        {\n            if (item.getName().toLowerCase().equals(originalInput.toLowerCase()))\n            {\n                return item;\n            }\n\n            if (shortest \u003d\u003d null || item.getName().length() \u003c shortest.getName().length())\n            {\n                shortest \u003d item;\n            }\n        }\n\n        // Take a guess\n        return shortest;\n    }\n\n    //perform all checks, commands, calculations and tagging\n    private void calculate(ChatMessage chatMessage, String message) {\n        //command turned off\n        if (!config.calcCommand()) {\n            return;\n        }\n        output \u003d \"\";\n        newTagName \u003d \"\";\n        needAutoTag \u003d false;\n        Double answer \u003d 0.0;\n\n        //reload custom tags \u0026 equation incase values in tags changed (gained xp, etc)\n        reloadTags();\n\n        String equation \u003d message.toLowerCase();\n        message \u003d message.substring(CALCULATE_STRING.length()).trim();\n\n        //replace price lookup with price\n        if (equation.contains(PRICE_COMMAND_STRING)) {\n            equation \u003d priceLookup(equation, PRICE_COMMAND_STRING);\n\n            if (equation.charAt(0) \u003d\u003d \u0027E\u0027) {\n                build(message, equation, answer.toString(), chatMessage);\n                return;\n            }\n        }\n\n        //replace alch lookup with alch amount (to be implemented later)\n        if (equation.contains(ALCH_COMMAND_STRING)) {\n            equation \u003d priceLookup(equation, ALCH_COMMAND_STRING);\n\n            if (equation.charAt(0) \u003d\u003d \u0027E\u0027) {\n                build(message, equation, answer.toString(), chatMessage);\n                return;\n            }\n        }\n\n\n        //remove any whitespaces in equation\t//DOESNT remove ,\n        equation \u003d equation.replaceAll(\"\\\\s\", \"\");\n\n        //remove !calc beginning\n        String[] split \u003d equation.split(CALCULATE_STRING);\n\n        //check if nothing entered after !calc\n        switch (split.length) {\n            case 0:\n                //check if Custom Equation was valid\n                if (customEquation.charAt(0) \u003d\u003d \u0027E\u0027) {\n                    build(message, customEquation, answer.toString(), chatMessage);\n                    return;\n                }\n                //get verified equation\n                equation \u003d customEquation;\n\n                //get equation from Custom Equation textbox in Config Panel\n                message \u003d config.customEquation();\n                message +\u003d \"\\n\";    //add new line incase only 1 line in panel\n                message \u003d message.split(\"\\n\", 2)[0].trim();    //grab only 1st line of panel\n                break;\n            case 2:\n                //success\n                //get equation from chatbox w/o !calc command\n                equation \u003d split[1];\n                break;\n            default:\n                //should never reach, but just for safety\n                build(message, \"Error- invalid entry\", answer.toString(), chatMessage);\n                return;\n        }\n\n        //check for header (!command or [tagName])\n        if (equation.charAt(0) \u003d\u003d \u0027!\u0027 || equation.charAt(0) \u003d\u003d \u0027[\u0027) {\n            equation \u003d checkHeaders(equation);\n            if (output.charAt(0) \u003d\u003d \u0027E\u0027 || output.equals(\"Command Complete\") || output.contains(\"Tags\")) {\n                //print output\n                build(message, output, answer.toString(), chatMessage);\n                return;\n            }\n        } //equation is removed of !calc and any !commands or [tagName]\n\n        //no [tagName] entered, add new autoTag\n        else {\n            needAutoTag \u003d true;\n        }\n\n        //check equation for errors, replace any tags needed\n        String correctedEquation \u003d checkEquation(equation);\n\n        //Check for error message\n        if (correctedEquation.contains(\"Error\")) {\n            correctedEquation \u003d errorStrip(correctedEquation);\n            build(message, correctedEquation, answer.toString(), chatMessage);\n            return;\n        }\n\n        //evaluate expression, remove any , present (NEEDED)\n        answer \u003d eval(correctedEquation.replaceAll(\",\", \"\"));\n        //answer \u003d eval(correctedEquation);\n\n        //check for divide by 0 error message (\"Infinity\")\n        if (answer.toString().charAt(0) \u003d\u003d \u0027I\u0027) {\n            build(message, correctedEquation, answer.toString(), chatMessage);\n            return;\n        }\n\n        //reduce answer to desired # decimal places or less \u0026 include commas for easier reading\n        String format \u003d \"#,###\";\n\n        if (config.numDecimals() \u003e 0) {\n            format +\u003d \".\";\n\n            //limit decimal points to 15 places\n            if (config.numDecimals() \u003e 15) {\n                for (int n \u003d 0; n \u003c 15; n++) {\n                    format +\u003d \"#\";\n                }\n            } else {\n                for (int n \u003d 0; n \u003c config.numDecimals(); n++) {\n                    format +\u003d \"#\";\n                }\n            }\n        }\n        DecimalFormat df \u003d new DecimalFormat(format);\n        df.setRoundingMode(RoundingMode.HALF_UP);\n\n        //update runTimeTags to include last \u0026 custom tag or default tag (a1-a9)\n        addNewTag(df.format(answer));\n\n        //output results\n        build(message, correctedEquation, \"[\" + newTagName + \"] \" + df.format(answer), chatMessage);\n    }\n\n    //check !command or [newTag] are valid\n    //returns just equation, no !command or [tagName]\n    public String checkHeaders(String input) {\n        //input is either [tagName] equation or !command ????\n        String[] split;\n\n        switch (input.charAt(0)) {\n            //check if new tag name \u0026 separate tag name from equation\n            case \u0027[\u0027:\n                split \u003d input.split(\"\\\\[\");\n                split \u003d split[1].split(\"]\");\n                //check if tag name was followed by ]\n                if (split.length \u003c 2) {\n                    output \u003d \"Error- missing \u0027]\u0027 or missing equation after \u0027]\u0027\";\n                    return input;\n                }\n                //remove whitespace from tag name\n                split[0] \u003d split[0].replaceAll(\"\\\\s\", \"\");\n                if (!checkTagName(split[0])) {\n                    return input;\n                } //split[0] has tagName split[1] has equation\n\n                //valid tag. Save name to assign if value also passes\n                newTagName \u003d split[0];\n                output \u003d split[1];\n                break;\n            case \u0027!\u0027:\n                //!clear command. Clear all saved values, but keep last if currently set\n                if (input.equals(\"!clear\")) {\n                    String temp \u003d \"0\";\n                    if (runTimeTags.get(\"last\") !\u003d null) {\n                        temp \u003d runTimeTags.get(\"last\");\n                    }\n                    runTimeTags.clear();\n                    loadRunTimeTags();\n                    runTimeTags.replace(\"last\", temp);\n                    autoTag \u003d 0;\n                    output \u003d \"Command Complete\";\n                    return input;\n                }\n                //!remove command\n                else if (input.charAt(1) \u003d\u003d \u0027r\u0027) {\n                    split \u003d input.split(\"!remove\");\n                    //nothing after !remove\n                    if (split.length !\u003d 2) {\n                        output \u003d \"Error- invalid command. Usage: !remove tagName\";\n                        return input;\n                    }\n\n                    //tagName not found in runTimeTags (cant remove tags from other HashMaps)\n                    if (runTimeTags.get(split[1]) \u003d\u003d null) {\n                        output \u003d \"Error- tagName not found in runTimeTags. Usage: !remove tagName\";\n                        return input;\n                    }\n                    //remove the desired tag from runTimeTags\n                    runTimeTags.remove(split[1]);\n                    output \u003d \"Command Complete\";\n                    return \"!remove \" + split[1];\n                } //end !remove command\n                else if (input.charAt(1) \u003d\u003d \u0027l\u0027) {\n                    split \u003d input.split(\"!list\");\n                    //nothing after !list\n                    if (split.length !\u003d 2) {\n                        output \u003d \"Error- invalid command.\\nUsage: !list RunTimeTags or !list CustomTags\";\n                        return input;\n                    }\n                    if (split[1].equals(\"runtimetags\")) {\n                        output \u003d \"RunTimeTags: \\n\" + runTimeTags.toString();\n                        return input;\n                    }\n                    else if (split[1].equals(\"customtags\")) {\n                        output \u003d \"CustomTags: \\n\" + configTags.toString();\n                        return input;\n                    }\n                    output \u003d \"Error- invalid command.\\nUsage: !list RunTimeTags or !list CustomTags\";\n                    return input;\n                }\n                else {\n                    output \u003d \"Error- unknown command\";\n                    return input;\n                }\n            default:\n                //should never reach\n                output \u003d \"Error- headers\";\n                return input;\n        }//end switch 1st character\n        //returns the equation w/o headers\n        return output;\n    }\n\n    //check equation will evaluate properly (no illegal characters or tags, etc)\n    //input just equation (no !command or [tagName])\n    public String checkEquation(String input) {\n\n        //check no illegal characters or spaces\n        //remove any math symbols\n        Pattern p \u003d Pattern.compile(\"(.{1})\");\n        Matcher m \u003d p.matcher(\"(),.+-/*^%\");\n        String temp \u003d input.replaceAll(m.replaceAll(\"\\\\\\\\$1\\\\|\"), \"\");\n\n\n        //check if remaining are just letters and #s\n        int len \u003d temp.length();\n        for (int i \u003d 0; i \u003c len; i++) {\n            if (!Character.isLetterOrDigit(temp.charAt(i))) {\n                output \u003d \"Error- unsupported symbols\";\n                return output;\n            }\n        }\n        //split equation into individual components\n        //String[] components \u003d input.split(\"(?\u003c\u003d[-+*/^()\\\\[\\\\]])|(?\u003d[-+*/^()\\\\[\\\\]])\");\n        List\u003cString\u003e components \u003d tokenize(input);\n\n        //todo % at start of func or tag   tax\u003d5%    func(5%)\n        if (components.contains(\"%\")) {\n            for (int n \u003d 0; n \u003c components.size(); n++) {\n                if (components.get(n).equals(\"%\")) {\n                    if (n \u003d\u003d 0) {\n                        return \"Error- no # before %\";\n                    }\n                    try {\n                        //check if % is after a #  5.3%\n                        Double.parseDouble(components.get(n-1));\n                    } catch (NumberFormatException e) {\n                        return \"Error- incorrect % usage\";\n                    }\n                    //!calc 50%    \u003d 0.5\n                    if (n \u003d\u003d 1) {\n                        return \"Error- cant have % as first value\";\n                    }\n                    if (n \u003d\u003d 2) {\n                        return \"Error- missing value at beginning of equation\";\n                    }\n                    //change # and math symbols into required forms\n                    switch (components.get(n-2)){\n                        case \"+\":\n                            components.set(n - 2, \"*\");\n                            components.set(n - 1, String.format(\"%.3f\", 1 + Double.parseDouble(components.get(n -1)) / 100));\n                            break;\n                        case \"-\":   //5 * -5%  \u003e  5 * *0.95     want 5 * -0.95\n                            switch (components.get(n-3)) {\n                                case \"+\":\n                                    components.set(n - 3, \"*\");\n                                    components.set(n - 2, String.format(\"%.3f\", 1 - Double.parseDouble(components.get(n -1)) / 100));\n                                    components.remove(n - 1);\n                                    n -\u003d 1;\n                                    break;\n                                case \"-\":\n                                    components.set(n - 3, \"*\");\n                                    components.set(n - 2, String.format(\"%.3f\", 1 + Double.parseDouble(components.get(n -1)) / 100));\n                                    components.remove(n - 1);\n                                    n -\u003d 1;\n                                    break;\n                                case \"*\":\n                                case \"/\":\n                                    components.set(n - 1, String.format(\"%.3f\", Double.parseDouble(components.get(n -1)) / 100));\n                                    break;\n                                default:\n                                    components.set(n - 2, \"*\");\n                                    components.set(n - 1, String.format(\"%.3f\", 1 - Double.parseDouble(components.get(n -1)) / 100));\n                                    break;\n                        }\n                            break;\n                        case \")\":\n                        case \"*\":\n                        case \"/\":\n                            components.set(n - 1, String.format(\"%.3f\", Double.parseDouble(components.get(n -1)) / 100));\n                            break;\n                        case \"(\":\n                        case \",\":\n                            return \"Error- % cant be first value after \\\"(\\\" or \\\",\\\"\";\n                        default:\n                            return \"Error- invalid use of %\";\n\n                    }\n                    components.remove(n);\n                    n -\u003d 1;\n                }\n            }\n        }\n\n        if (components.contains(\"(\") || components.contains(\")\")) {\n            //check # ) never above # (, and add ) if needed\n            components\u003dcheckParenth(components);\n            if (components.get(0).contains(\"Error\")) {\n                return components.get(0);\n            }\n        }\n        //if a component has a letter and immediately followed by (, check if is a tag( or func( and replace as needed\n        for (int i \u003d 1; i \u003c components.size(); i++) {\n            if (components.get(i).equals(\"(\") \u0026\u0026 components.get(i - 1).matches(\".*[a-zA-Z]+.*\")) {\n                //System.out.println(\"Before entering Nested Functions: \" + components);\n                components \u003d evaluateNestedFunctions(components);\n                //System.out.println(\"After Nested Functions: \" + components);\n\n                if (components.get(0).contains(\"Error\")) {\n                    components.set(0, errorStrip(components.get(0)));\n                    return components.get(0);\n                }\n                //re-string all components, then properly re-tokenize (evalNestedFunc will string multiple components together)\n                String tempComp \u003d \"\";\n                for (int n\u003d0; n \u003c components.size(); n++) {\n                    tempComp +\u003d components.get(n);\n                }\n                components \u003d tokenize(tempComp);\n\n                //check # ) never above # (, and add ) if needed\n                components \u003d checkParenth(components);\n                if (components.get(0).contains(\"Error\")) {\n                    return components.get(0);\n                }\n                break;\n            }\n        }\n\n\n\n        //check all math operators legal\n        for (int n \u003d 0; n \u003c components.size(); n++) {\n            // -+*/^( cant be followed by +*/^)\n            switch (components.get(n)) {\n                case \"+\":\n                case \"-\":\n                case \"*\":\n                case \"/\":\n                case \"^\":\n                case \"(\":\n                    if (n + 1 !\u003d components.size()) {\n                        switch (components.get(n + 1)) {\n                            case \"+\":\n                            case \"*\":\n                            case \"/\":\n                            case \"^\":\n                            case \")\":\n                                output \u003d \"Error- 2 math operators together\";\n                                return output;\n                            default:\n                                break;\n                        }\n                    } else {\n                        output \u003d \"Error- cant end equation in math operator\";\n                        return output;\n                    }\n                default:\n                    break;\n            }\n\n            //add * after ) if not end of equation, or followed by math operator\n            if (components.get(n).equals(\")\") \u0026\u0026 n + 1 !\u003d components.size()) {\n                switch (components.get(n + 1)) {\n                    case \"+\":\n                    case \"-\":\n                    case \"*\":\n                    case \"/\":\n                    case \")\":\n                    case \"^\":\n                    case \",\":\n                        break;\n                    default:\n                        components.set(n, \")*\");\n                        break;\n                }\n            }\n            //dont allow math tag at end of equation\n            switch (components.get(n)) {\n                case \"sqrt\":\n                case \"cos\":\n                case \"sin\":\n                case \"tan\":\n                    if (n + 1 \u003d\u003d components.size()) {\n                        output \u003d \"Error- math tag not followed by (###)\";\n                        return output;\n                    } else if (!components.get(n + 1).equals(\"(\")) {\n                        output \u003d \"Error- math tag not followed by (###)\";\n                        return output;\n                    }\n                    break;\n                default:\n                    break;\n            }\n            //check . is before at least 1 # \u0026 only 1 in component\n            if (components.get(n).matches(\".*[.]+.*\")) {\n                String[] split \u003d components.get(n).split(\"\\\\.\");\n                if (split.length \u003d\u003d 1) {\n                    //add 0 after . if needed  2.  \u003e  2.0\n                    components.set(n, components.get(n) + \"0\");\n                }\n                //is just \".\" OR has 2 or more . in same # 5..3\n                else if(split.length \u003d\u003d 0 || split.length \u003e 2) {\n                    output \u003d \"Error- incorrect decimal usage\";\n                    return output;\n                }\n            }\n        } //end for\n\n        //if any , remain, is an extra and unnecessary\n        if (components.contains(\",\")) {\n            return \"Error- extra \\\",\\\" in equation or function definition\";\n        }\n        //check remaining tags and ( correctly placed\n        for (int n \u003d 0; n \u003c components.size(); n++) {\n            //add * before ( if needed  (\"56(4-2)\" changes to \"56*(4-2)\")\n            //here handles # before (, evaluateFunction handles tag/func before (\n            if (components.get(n).equals(\"(\") \u0026\u0026 n!\u003d0) {\n                switch (components.get(n - 1)) {\n                    case \"+\":\n                    case \"-\":\n                    case \"*\":\n                    case \"/\":\n                    case \"^\":\n                    case \"(\":\n                    case \"*(\":\n                    case \"sqrt\":\n                    case \"cos\":\n                    case \"sin\":\n                    case \"tan\":\n                        break;\n                    default:\n                        components.set(n, \"*(\");\n                        break;\n                }\n            }\n            //if component contains a letter, its a tag or scientific notation (ignore math tags (sqrt, sin, cos, tan))\n            if (components.get(n).matches(\".*[a-zA-Z]+.*\")) {\n                components.set(n, evaluateTag(components.get(n)));\n            } //end if\n        }\n\n        //convert components back into 1 string\n        output \u003d \"\";\n        for (String component : components) {\n            output +\u003d component;\n        }\n        //System.out.println(\"Tags Replaced in checkEquation: \" + output);\n        return output;\n    }\n\n    //evaluate string math equation\n    public static double eval(final String str) {\n        //System.out.println(\"Enter eval: \" + str);\n        return new Object() {\n            int pos \u003d -1, ch;\n\n            void nextChar() {\n                ch \u003d (++pos \u003c str.length()) ? str.charAt(pos) : -1;\n            }\n\n            boolean eat(int charToEat) {\n                while (ch \u003d\u003d \u0027 \u0027) nextChar();\n                if (ch \u003d\u003d charToEat) {\n                    nextChar();\n                    return true;\n                }\n                return false;\n            }\n\n            double parse() {\n                nextChar();\n                double x \u003d parseExpression();\n                if (pos \u003c str.length()) throw new RuntimeException(\"Unexpected: \" + (char) ch);\n                return x;\n            }\n\n            // Grammar:\n            // expression \u003d term | expression `+` term | expression `-` term\n            // term \u003d factor | term `*` factor | term `/` factor\n            // factor \u003d `+` factor | `-` factor | `(` expression `)` | number\n            //        | functionName `(` expression `)` | functionName factor\n            //        | factor `^` factor\n\n            double parseExpression() {\n                double x \u003d parseTerm();\n                for (; ; ) {\n                    if (eat(\u0027+\u0027)) x +\u003d parseTerm(); // addition\n                    else if (eat(\u0027-\u0027)) x -\u003d parseTerm(); // subtraction\n                    else return x;\n                }\n            }\n\n            double parseTerm() {\n                double x \u003d parseFactor();\n                for (; ; ) {\n                    if (eat(\u0027*\u0027)) x *\u003d parseFactor(); // multiplication\n                    else if (eat(\u0027/\u0027)) x /\u003d parseFactor(); // division\n                    else return x;\n                }\n            }\n\n            double parseFactor() {\n                if (eat(\u0027+\u0027)) return +parseFactor(); // unary plus\n                if (eat(\u0027-\u0027)) return -parseFactor(); // unary minus\n\n                double x;\n                int startPos \u003d this.pos;\n                if (eat(\u0027(\u0027)) { // parentheses\n                    x \u003d parseExpression();\n                    if (!eat(\u0027)\u0027)) throw new RuntimeException(\"Missing \u0027)\u0027\");\n                } else if ((ch \u003e\u003d \u00270\u0027 \u0026\u0026 ch \u003c\u003d \u00279\u0027) || ch \u003d\u003d \u0027.\u0027) { // numbers\n                    while ((ch \u003e\u003d \u00270\u0027 \u0026\u0026 ch \u003c\u003d \u00279\u0027) || ch \u003d\u003d \u0027.\u0027) nextChar();\n                    x \u003d Double.parseDouble(str.substring(startPos, this.pos));\n                } else if (ch \u003e\u003d \u0027a\u0027 \u0026\u0026 ch \u003c\u003d \u0027z\u0027) { // functions\n                    while (ch \u003e\u003d \u0027a\u0027 \u0026\u0026 ch \u003c\u003d \u0027z\u0027) nextChar();\n                    String func \u003d str.substring(startPos, this.pos);\n                    if (eat(\u0027(\u0027)) {\n                        x \u003d parseExpression();\n                        if (!eat(\u0027)\u0027)) throw new RuntimeException(\"Missing \u0027)\u0027 after argument to \" + func);\n                    } else {\n                        x \u003d parseFactor();\n                    }\n                    switch (func) {\n                        case \"sqrt\":\n                            x \u003d Math.sqrt(x);\n                            break;\n                        case \"sin\":\n                            x \u003d Math.sin(Math.toRadians(x));\n                            break;\n                        case \"cos\":\n                            x \u003d Math.cos(Math.toRadians(x));\n                            break;\n                        case \"tan\":\n                            x \u003d Math.tan(Math.toRadians(x));\n                            break;\n                        default:\n                            throw new RuntimeException(\"Unknown function: \" + func);\n                    }\n                } else {\n                    throw new RuntimeException(\"Unexpected: \" + (char) ch);\n                }\n\n                if (eat(\u0027^\u0027)) x \u003d Math.pow(x, parseFactor()); // exponentiation\n\n                return x;\n            }\n        }.parse();\n    }\n\n    //Lookup current xp for desired skill\n    public String xpLookup(String skill) {\n        switch (skill) {\n            case \"myattack\":\n            case \"myatt\":\n            case \"myatk\":\n                return Integer.toString(client.getSkillExperience(Skill.ATTACK));\n            case \"myhitpoints\":\n            case \"myhp\":\n            case \"myhitpoint\":\n            case \"myhealth\":\n            case \"myhit\":\n                return Integer.toString(client.getSkillExperience(Skill.HITPOINTS));\n            case \"mymining\":\n            case \"mymine\":\n                return Integer.toString(client.getSkillExperience(Skill.MINING));\n            case \"mystrength\":\n            case \"mystr\":\n                return Integer.toString(client.getSkillExperience(Skill.STRENGTH));\n            case \"myagility\":\n            case \"myagil\":\n            case \"myagi\":\n                return Integer.toString(client.getSkillExperience(Skill.AGILITY));\n            case \"mysmithing\":\n            case \"mysmith\":\n                return Integer.toString(client.getSkillExperience(Skill.SMITHING));\n            case \"mydefence\":\n            case \"mydef\":\n                return Integer.toString(client.getSkillExperience(Skill.DEFENCE));\n            case \"myherblore\":\n            case \"myherb\":\n            case \"myhl\":\n                return Integer.toString(client.getSkillExperience(Skill.HERBLORE));\n            case \"myfishing\":\n            case \"myfish\":\n                return Integer.toString(client.getSkillExperience(Skill.FISHING));\n            case \"myranged\":\n            case \"myranging\":\n            case \"myrange\":\n            case \"myrng\":\n                return Integer.toString(client.getSkillExperience(Skill.RANGED));\n            case \"mythieving\":\n            case \"mythieve\":\n            case \"mythief\":\n                return Integer.toString(client.getSkillExperience(Skill.THIEVING));\n            case \"mycooking\":\n            case \"mycook\":\n                return Integer.toString(client.getSkillExperience(Skill.COOKING));\n            case \"myprayer\":\n            case \"mypray\":\n                return Integer.toString(client.getSkillExperience(Skill.PRAYER));\n            case \"mycrafting\":\n            case \"mycraft\":\n                return Integer.toString(client.getSkillExperience(Skill.CRAFTING));\n            case \"myfiremaking\":\n            case \"myfm\":\n            case \"myfire\":\n                return Integer.toString(client.getSkillExperience(Skill.FIREMAKING));\n            case \"mymagic\":\n            case \"mymage\":\n            case \"mymag\":\n                return Integer.toString(client.getSkillExperience(Skill.MAGIC));\n            case \"myfletching\":\n            case \"myfletch\":\n                return Integer.toString(client.getSkillExperience(Skill.FLETCHING));\n            case \"mywoodcutting\":\n            case \"mywc\":\n            case \"mywoodcut\":\n            case \"mywood\":\n                return Integer.toString(client.getSkillExperience(Skill.WOODCUTTING));\n            case \"myrunecrafting\":\n            case \"myrc\":\n            case \"myrune\":\n                return Integer.toString(client.getSkillExperience(Skill.RUNECRAFT));\n            case \"myslayer\":\n            case \"myslay\":\n                return Integer.toString(client.getSkillExperience(Skill.SLAYER));\n            case \"myfarming\":\n            case \"myfarm\":\n                return Integer.toString(client.getSkillExperience(Skill.FARMING));\n            case \"myconstruction\":\n            case \"mycon\":\n            case \"myconstruct\":\n                return Integer.toString(client.getSkillExperience(Skill.CONSTRUCTION));\n            case \"myhunter\":\n            case \"myhunt\":\n                return Integer.toString(client.getSkillExperience(Skill.HUNTER));\n            default:\n                return \"Error in xpLookup\";\n        }\n    }\n\n    //add new tag \u0026 value to runTimeTags\n    public void addNewTag(String value) {\n        //add auto tag (no tag name provided)\n        if (needAutoTag) {\n            //only hold 10 auto-tags (a0-a9), then write-over old auto tags\n            if (autoTag \u003d\u003d 10) {\n                autoTag \u003d 0;\n            }\n\n            newTagName \u003d \"a\" + autoTag++;\n\n            if (runTimeTags.get(newTagName) !\u003d null) {\n                runTimeTags.remove(newTagName);\n            }\n            runTimeTags.put(newTagName, value);\n        }\n\n        //add new tag \u0026 value\n        else {\n            //replace old runTimeTag with new\n            if (runTimeTags.get(newTagName) !\u003d null) {\n                runTimeTags.remove(newTagName);\n            }\n            runTimeTags.put(newTagName, value);\n        }\n\n        //update \"last\" tag to last result value\n        if (runTimeTags.get(\"last\") !\u003d null) {\n            runTimeTags.remove(\"last\");\n        }\n        runTimeTags.put(\"last\", value);\n    }\n\n    //build chat message (error or result)\n    public void build(String equ, String corEqu, String ans, ChatMessage chatMessage) {\n        String response;\n        //If input equation is more than 45 characters, just write \"Your long equation equals \"\n        if (equ.length() \u003e 45) {\n            equ \u003d \" Your long equation\";\n        }\n        //error message received, or command (!clear, !remove, !list) completed (C \u0026 R)\n        if (corEqu.charAt(0) \u003d\u003d \u0027E\u0027 || corEqu.charAt(0) \u003d\u003d \u0027C\u0027 || corEqu.charAt(0) \u003d\u003d \u0027R\u0027) {\n            //trim error message between \"Error\" and possibly \"@\u0026\"\n            if (corEqu.charAt(0) \u003d\u003d \u0027E\u0027) {\n                corEqu \u003d errorStrip(corEqu);\n            }\n            //System.out.println(equ + \" \" + corEqu);\n            response \u003d new ChatMessageBuilder()\n                    .append(ChatColorType.NORMAL)\n                    .append(equ)\n                    .append(ChatColorType.HIGHLIGHT)\n                    .append(\" \" + corEqu)\n                    .build();\n        } else if (ans.charAt(0) \u003d\u003d \u0027I\u0027) {\n            //System.out.println(equ + \" Error- cannot divide by 0\");\n            //build new message\n            response \u003d new ChatMessageBuilder()\n                    .append(ChatColorType.NORMAL)\n                    .append(equ)\n                    .append(ChatColorType.HIGHLIGHT)\n                    .append(\" Error- number too large, or cannot divide by 0\")\n                    .build();\n        } else {\n            //build new message\n            response \u003d new ChatMessageBuilder()\n                    .append(ChatColorType.NORMAL)\n                    .append(equ)\n                    .append(ChatColorType.HIGHLIGHT)\n                    .append(\" equals \")\n                    .append(ChatColorType.NORMAL)\n                    .append(ans) //removed .toString()\n                    .build();\n        }\n\n        //print new message to chatbox\n        final MessageNode messageNode \u003d chatMessage.getMessageNode();\n        messageNode.setRuneLiteFormatMessage(response);\n        client.refreshChat();\n    }\n\n    // Tokenizer that includes words, numbers, operators, parentheses, and commas\n    public static List\u003cString\u003e tokenize(String input) {\n        //this pattern properly supports tokens starting with a #  50k\n        //Pattern pattern \u003d Pattern.compile(\"\\\\d+(?:\\\\.\\\\d+)?[a-zA-Z0-9]+|[a-zA-Z][a-zA-Z0-9]*|\\\\d+(?:\\\\.\\\\d+)?|[+\\\\-*/(),]\");\n        //this pattern meant to be the same, but also allow decimal numbers w/o leading # like .4\n//        Pattern pattern \u003d Pattern.compile(\n//                \"(?:\\\\d+\\\\.\\\\d*|\\\\.\\\\d+|\\\\d+)(?:[a-zA-Z0-9]+)?|\" +   // numbers with optional trailing letters (e.g., 2.5kg, .4kg)\n//                        \"[a-zA-Z][a-zA-Z0-9]*|\" +                            // variable names (e.g., x1, var2)\n//                        \"[+\\\\-*/(),^]\"\n//        );\n\n//        Pattern pattern \u003d Pattern.compile(\n//                \"(?:\\\\d+\\\\.\\\\d+|\\\\.\\\\d+|\\\\d+)[a-zA-Z][a-zA-Z0-9]*|\" +  // number with unit, e.g., 45.5fss, .4kg\n//                        \"\\\\d+\\\\.\\\\d+|\\\\.\\\\d+|\\\\d+|\" +                          // plain numbers\n//                        \"[a-zA-Z][a-zA-Z0-9]*|\" +                              // variables\n//                        \"[+\\\\-*/()^,]\"                                         // operators\n//        );\n//        Matcher matcher \u003d pattern.matcher(input);\n//\n//        List\u003cString\u003e tokens \u003d new ArrayList\u003c\u003e();\n//        while (matcher.find()) {\n//            tokens.add(matcher.group());\n//        }\n//        return tokens;\n\n        // Split while keeping the delimiters (math operators)\n        String[] rawTokens \u003d input.split(\"(?\u003d[+\\\\-*/()^,%])|(?\u003c\u003d[+\\\\-*/()^,%])\");\n\n        // Remove empty strings and trim whitespace\n        List\u003cString\u003e tokens \u003d new ArrayList\u003c\u003e();\n        for (String token : rawTokens) {\n            String trimmed \u003d token.trim();\n            if (!trimmed.isEmpty()) {\n                tokens.add(trimmed);\n            }\n        }\n        return tokens;\n    }\n\n    // Recursively evaluate all nested functions\n    private List\u003cString\u003e evaluateNestedFunctions(List\u003cString\u003e tokens) {\n        List\u003cString\u003e result \u003d new ArrayList\u003c\u003e(tokens);\n\n        while (true) {\n            boolean changed \u003d false;\n\n            for (int i \u003d 1; i \u003c result.size(); i++) {\n                if (result.get(i).equals(\"(\") \u0026\u0026 result.get(i - 1).matches(\".*[a-zA-Z]+.*\")) {\n                    String functionName \u003d result.get(i - 1);\n                    int closingIndex \u003d findMatchingClosingParen(result, i);\n                    if (closingIndex !\u003d -1) {\n                        List\u003cString\u003e innerTokens \u003d new ArrayList\u003c\u003e(result.subList(i + 1, closingIndex));\n                        List\u003cString\u003e argStrings \u003d splitFunctionArguments(innerTokens);\n\n                        // Evaluate each argument recursively\n                        List\u003cString\u003e evaluatedArgs \u003d new ArrayList\u003c\u003e();\n                        for (String arg : argStrings) {\n                            List\u003cString\u003e argTokens \u003d tokenize(arg);\n                            List\u003cString\u003e evaluated \u003d evaluateNestedFunctions(argTokens);\n                            evaluatedArgs.add(String.join(\"\", evaluated));\n                        }\n\n                        // Simulate function evaluation\n                        String value \u003d evaluateFunction(functionName, evaluatedArgs);\n\n                        // Replace function call with its result\n                        result.set(i - 1, value);\n                        result.subList(i, closingIndex + 1).clear();\n\n                        changed \u003d true;\n                        break; // Start over after modification\n                    }\n                }\n            }\n\n            if (!changed) break;\n        }\n    //evaluateNestedFunctions return\n        return result;\n    }\n\n    // Finds the index of the closing parenthesis that matches the one at startIndex\n    private static int findMatchingClosingParen(List\u003cString\u003e tokens, int startIndex) {\n        int depth \u003d 1;\n        for (int i \u003d startIndex + 1; i \u003c tokens.size(); i++) {\n            if (tokens.get(i).equals(\"(\")) depth++;\n            else if (tokens.get(i).equals(\")\")) depth--;\n            if (depth \u003d\u003d 0) return i;\n        }\n        return -1;\n    }\n\n    // Splits tokens by commas, respecting nested parentheses\n    private static List\u003cString\u003e splitFunctionArguments(List\u003cString\u003e tokens) {\n        List\u003cString\u003e args \u003d new ArrayList\u003c\u003e();\n        StringBuilder current \u003d new StringBuilder();\n        int depth \u003d 0;\n\n        for (String token : tokens) {\n            if (token.equals(\"(\")) depth++;\n            if (token.equals(\")\")) depth--;\n\n            if (token.equals(\",\") \u0026\u0026 depth \u003d\u003d 0) {\n                args.add(current.toString().trim());\n                current.setLength(0);\n            } else {\n                current.append(token);\n            }\n        }\n\n        if (current.length() \u003e 0) {\n            args.add(current.toString().trim());\n        }\n\n        return args;\n    }\n\n    // Stub for evaluating a function with arguments\n    //func(2,func(3,4))\n    //receive func(3,4)\n    //then receive func(2,func(3,4))\n    private String evaluateFunction(String name, List\u003cString\u003e args) {\n        //System.out.println(\"EvaluateFunction begin: \" + name + \" with args: \" + args);\n        //receive func(3,4)\n        //var1+var2*var1+4\n        for (int n\u003d0; n\u003c args.size(); n++) {\n            if (args.get(n).isEmpty()) {\n                return \"Error- variable is empty\";\n            }\n        }\n\n        //oak(5)  \u003e  oak , 5   \u003e   oak(1)\n        //Check if name and size is a stored function\n        String checkForFunc \u003d name + \"(\" + args.size() + \")\" ;\n        if(configTags.get(checkForFunc) !\u003d null) {\n            //get function definition (var1+var2*var1+4)\n            List\u003cString\u003e funcDef \u003d tokenize(configTags.get(checkForFunc));\n\n            //replace var placeholders with passed args\n            List\u003cString\u003e indexesChanged \u003d new ArrayList\u003c\u003e();\n            for (int n\u003d0; n\u003cargs.size(); n++) {\n                for (int m\u003d0; m\u003cfuncDef.size(); m++) {\n                    //dont replace variable twice (can change to var1 on first loop, then match again on 2nd loop and change)\n                    if (funcDef.get(m).equals(\"var\"+n) \u0026\u0026 !indexesChanged.contains(Integer.toString(m))) {\n                        indexesChanged.add(Integer.toString(m));\n                        funcDef.set(m,args.get(n));\n                    }\n                }\n            }\n            //component of function can contain multiple components splinters(oak+500,15)  \u003e  oak+500 , 15    \u003e need check if multiple items, send back into check equation\n            //check if any component still has letters (tags), replace them now if possible\n            //dont replace if component is still var# (used when function is within another functions definition) func(x,y) \u003d splinters(x)*200\n            for (int n\u003d0; n\u003cfuncDef.size(); n++) {\n                if (funcDef.get(n).matches(\".*[a-z]+.*\") \u0026\u0026 !funcDef.get(n).matches(\"var\\\\d+\")) {\n\n                    // New block loop\n                    List\u003cString\u003e temp \u003d tokenize(funcDef.get(n));\n                    if (temp.size() \u003e 1) {\n                        funcDef.set(n, \"(\" + funcDef.get(n) + \")\");\n                        funcDef.set(n,checkEquation(funcDef.get(n)));\n                        if (funcDef.get(n).contains(\"Error\")) {\n                            funcDef.set(n, errorStrip(funcDef.get(n)));\n                            return funcDef.get(n);\n                        }\n                    }\n                    else {\n                        funcDef.set(n,evaluateTag(funcDef.get(n)));\n\n                        if (funcDef.get(n).contains(\"Error\")) {\n                            funcDef.set(n, errorStrip(funcDef.get(n)));\n                            //System.out.println(\"Error, no \\\"\" + name + \"\\\" tag or function with matching parameters found@\u0026\");\n                            return funcDef.get(n);\n                        }\n                    }\n                }\n            }\n            name \u003d \"(\";\n            for (String s:funcDef) {\n                name +\u003d s;\n            }\n            name +\u003d \")\";\n        }\n        //not a function, is tag(contents). Check if tag exists, and contents are valid (no , and valid math)\n        else {\n            //oak , 5\n            name \u003d evaluateTag(name);\n            if (name.charAt(0) \u003d\u003d \u0027E\u0027) {\n                //System.out.println(\"Error, no \\\"\" + name + \"\\\" tag or function with matching parameters found@\u0026\");\n                return name;\n            }\n            String temp \u003d\"\";\n            for (String component : args) {\n                temp +\u003d component;\n            }\n            //checkEquation checks validity of formattings, and replaces tags/handles functions\n            temp \u003d checkEquation(temp);\n            if (temp.contains(\"Error\")) {\n                temp \u003d errorStrip(temp);\n                return temp;\n            }\n\n            //close math function cos(45)\n            if (mathFunction(name)){\n                name +\u003d \"(\";\n                temp +\u003d \")\";\n            }\n\n            else {\n                name +\u003d \"*\";\n            }\n\n            name +\u003d temp;\n\n        }\n        //System.out.println(\"Evaluate Function end: \" + name);\n        return name;\n    }\n    //Receives a single component, return tag value if found\n    //Leave math tags (sqrt, cos, etc), Evaluate scientific notation, Replace tag with tag value\n    private String evaluateTag(String name) {\n        //for (int n \u003d 0; n \u003c name.length(); n++) {\n\n        //if component contains a letter, its a tag or scientific notation (ignore math tags (sqrt, sin, cos, tan))\n        if (name.matches(\".*[a-zA-Z]+.*\") \u0026\u0026 !mathFunction(name)) {\n            //check for scientific notation\n            //component would be # ended in k m or b (10.6k)\n            //String[] split \u003d name.split(\"(?\u003d[k|m|b])\");\n            String[] split \u003d name.split(\"(?\u003c\u003d\\\\d)(?\u003d[kmb]$)\");\n\n            //check for possible scientific notation (### k)\n            if (split[0].matches(\"\\\\d+.+|\\\\d+\") \u0026\u0026 split.length \u003d\u003d 2) {\n\n                boolean isScientific \u003d false;\n\n                //check if 2nd index is scientific notation\n                switch (split[1]) {\n                    case \"k\":\n                        name \u003d \"(\" + split[0] + \"*1000)\";\n                        isScientific \u003d true;\n                        break;\n                    case \"m\":\n                        name \u003d \"(\" + split[0] + \"*1000000)\";\n                        isScientific \u003d true;\n                        break;\n                    case \"b\":\n                        name \u003d \"(\" + split[0] + \"*1000000000)\";\n                        isScientific \u003d true;\n                        break;\n                    default:\n                        break;\n                }\n                //dont check if is a tag if is scientific notation\n                if (isScientific) {\n                    return name;\n                }\n            }\n\n            //check if is a tag\n            if (configTags.get(name) !\u003d null) {\n                name \u003d configTags.get(name);\n                //contain tag in brackets if it contains math symbols for proper eval\n                // tag \u003d 5 + 4 needs brackets, otherwise 3*tag  \u003d 3 * 5 + 4\n                for (char c : name.toCharArray()) {\n                    if (c \u003d\u003d \u0027+\u0027 || c \u003d\u003d \u0027-\u0027 || c \u003d\u003d \u0027*\u0027 || c \u003d\u003d \u0027/\u0027) {\n                        name \u003d \"(\" + name + \")\";\n                        break;\n                    }\n                }\n            } else if (lvlTags.get(name) !\u003d null) {\n                name \u003d lvlTags.get(name);\n            } else if (runTimeTags.get(name) !\u003d null) {\n                name \u003d runTimeTags.get(name);\n            } else if (SkillTags.get(name) !\u003d null) {\n                name \u003d xpLookup(name);\n            } else {\n                if (name.contains(\".\")) {\n                    output \u003d \"Error- tag or function name can\u0027t contain \\\".\\\" or symbols\";\n                    return output;\n                }\n                output \u003d \"Error- no \\\"\" + name + \"\\\" tag or function with matching parameters found@\u0026\";\n                //System.out.println(output);\n                return output;\n            }\n        } //end if\n        return name;\n    }\n    private boolean mathFunction(String item) {\n        switch (item) {\n            case \"sqrt\":\n            case \"cos\":\n            case \"sin\":\n            case \"tan\":\n                return true;\n            default:\n                return false;\n        }\n    }\n    private String errorStrip(String error) {\n        int start \u003d error.indexOf(\"Error\");\n        if (start \u003d\u003d -1) return \"\"; // Or handle \"Error\" not found\n\n        int end \u003d error.indexOf(\"@\u0026\", start);\n        if (end \u003d\u003d -1) {\n            return error.substring(start).trim(); // No \"@\u0026\" found; return from \"Error\" to end\n        } else {\n            return error.substring(start, end).trim(); // Return from \"Error\" to before \"@\u0026\"\n        }\n    }\n\n    List\u003cString\u003e checkParenth(List\u003cString\u003e components) {\n        int countOpenParen \u003d 0;\n        int countClosedParen \u003d 0;\n        //for(int n\u003d0;n\u003clength;n++){\n        for (String component : components) {\n            switch (component) {\n                case \"(\":\n                    countOpenParen++;\n                    break;\n                case \")\":\n                    countClosedParen++;\n                    if (countClosedParen \u003e countOpenParen) {\n                        components.set(0,\"Error- found ) before (\");\n                        return components;\n                    }\n                    break;\n                default:\n                    break;\n            }\n        }\n        //add missing ) if needed\n        for (int n\u003d0; n\u003c(countOpenParen-countClosedParen); n++){\n            components.add(\")\");\n        }\n        return components;\n    }\n}\n","filePath":"src\\main\\java\\com\\calculatorpro\\CalculatorProPlugin.java"},{"fileName":"CalculatorButton.java","content":"/*\n * Copyright (c) 2020, Spedwards \u003chttps://github.com/Spedwards\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.calculatorpro.uiSpedwards;\n\nimport java.awt.Dimension;\nimport java.awt.Font;\nimport javax.swing.JButton;\nimport lombok.extern.slf4j.Slf4j;\n\n@Slf4j\npublic class CalculatorButton extends JButton\n{\n    private static final Dimension PREFERRED_SIZE \u003d new Dimension(55, 55);\n\n    //Cyborger1 edit\n    private static final Dimension MINIMUM_SIZE \u003d new Dimension(54, 55);\n    //end Cyborger1 edit\n\n    public CalculatorButton(String text)\n    {\n        super(text);\n\n        setPreferredSize(PREFERRED_SIZE);\n        //Cyborger1 edit\n        setMinimumSize(MINIMUM_SIZE);\n        //end Cyborger1 edit\n\n        // Use Arial. Zero and Asterisk look funny in \"Runescape Standard\"\n        setFont(new Font(\"Arial\", Font.BOLD, 20));\n    }\n\n//    public CalculatorButton(Icon icon)\n//    {\n//        super(icon);\n//\n//        setPreferredSize(PREFERRED_SIZE);\n//        //Cyborger1 edit\n//        setMinimumSize(MINIMUM_SIZE);\n//        //end Cyborger1 edit\n//    }\n}","filePath":"src\\main\\java\\com\\calculatorpro\\uiSpedwards\\CalculatorButton.java"},{"fileName":"CalculatorPanel.java","content":"/*\n * Copyright (c) 2020, Spedwards \u003chttps://github.com/Spedwards\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.calculatorpro.uiSpedwards;\n\nimport java.awt.Component;\nimport java.awt.GridBagConstraints;\nimport java.awt.GridBagLayout;\nimport java.awt.Insets;\nimport java.math.RoundingMode;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\nimport java.text.DecimalFormat;\n\npublic class CalculatorPanel extends JPanel\n{\n    private static final Insets INSETS_LEFT_BORDER \u003d new Insets(1, 0, 1, 1);\n    private static final Insets INSETS_RIGHT_BORDER \u003d new Insets(1, 1, 1, 0);\n    private static final Insets INSETS \u003d new Insets(1, 1, 1, 1);\n\n    private final CalculatorPluginPanel panel;\n    private final DisplayField displayField;\n    private final GridBagConstraints c;\n\n    protected CalculatorPanel(CalculatorPluginPanel panel)\n    {\n        super();\n        this.panel \u003d panel;\n        this.displayField \u003d panel.getDisplayField();\n\n        setLayout(new GridBagLayout());\n        //Cyborger1 edit\n        setBorder(new EmptyBorder(0, 1, 0, 1));\n        //end Cyborger1 edit\n\n        c \u003d new GridBagConstraints();\n        c.fill \u003d GridBagConstraints.HORIZONTAL;\n        c.gridx \u003d 0;\n        c.gridy \u003d 0;\n        //Cyborger1 edit\n        c.weightx \u003d 1;\n        c.weighty \u003d 1;\n        //end Cyborger1 edit\n\n//        CalculatorButton plusMinus \u003d new CalculatorButton(PLUS_MINUS_ICON);\n\n        addButton(\"+\");\n        addButton(\"7\");\n        addButton(\"8\");\n        addButton(\"9\");\n\n        addButton(\"-\");\n        addButton(\"4\");\n        addButton(\"5\");\n        addButton(\"6\");\n\n        addButton(\"*\");\n        addButton(\"1\");\n        addButton(\"2\");\n        addButton(\"3\");\n\n        addButton(\"/\");\n        addButton(\".\");\n        addButton(\"0\");\n        addButton(\"\u003d\");\n\n\n        addButton(\"(\");\n        addButton(\")\");\n        addButton(\"^\");\n        addButton(\"\u003c\");\n//        addComp(plusMinus);\n\n        addButton(\"C\");\n        c.gridwidth \u003d 3;\n        addButton(\"Clear History\");\n    }\n\n    private void addButton(String key)\n    {\n        //todo: add keyboard inputs (ctrl+v, nums, backspace, etc)\n        CalculatorButton btn \u003d new CalculatorButton(key);\n        btn.addActionListener(e -\u003e\n        {\n            //create string from button inputs, validate key presses on the go, dont allow invalid key presses\n            String text \u003d btn.getText();\n            switch (text) {\n                case \"\u003d\":\n                    if (displayField.input.equals(\"\")) {\n                        return;\n                    }\n\n                    //add extra ) if needed, check end of equation valid\n                    displayField.calculateResult();\n\n                    // Add new calculation to history\n                    if(displayField.calcDone){\n                        panel.getHistoryPanel().addHistoryItem(displayField.input + \" \u003d\", displayField.output);\n                    }\n                    break;\n\n                //clear display\n                case \"C\":\n                    displayField.clear();\n                    return;\n\n                //clear history\n                case \"Clear History\":\n                    panel.getHistoryPanel().clearHistory();\n                    displayField.previousResult \u003d \"0\";\n                    return;\n\n                //kanderson66 edit\n                //backspace function for display panel\n                case \"\u003c\":\n                    displayField.input \u003d deleteLastCharacter(displayField.input);\n                    break;\n                //input is a #\n                default:\n                    displayField.input +\u003d text;\n                    //input not valid, remove last input\n                    if (!inputValid(displayField.input.replaceAll(\",\", \"\"))) {\n                        displayField.input \u003d deleteLastCharacter(displayField.input);\n                        return;\n                    }\n                    break;\n                    //end kanderson66 edit\n            }\n            displayField.update();\n        });\n        addComp(btn);\n    }\n\n    private void addComp(Component component)\n    {\n        switch (c.gridx)\n        {\n            case 0:\n                c.insets \u003d INSETS_LEFT_BORDER;\n                break;\n            case 3:\n                c.insets \u003d INSETS_RIGHT_BORDER;\n                break;\n            default:\n                c.insets \u003d INSETS;\n        }\n        if (c.gridwidth \u003d\u003d 3)\n        {\n            c.insets \u003d INSETS_RIGHT_BORDER;\n        }\n        add(component, c);\n        c.gridx \u003d ++c.gridx % 4;\n        c.gridy \u003d c.gridx \u003d\u003d 0 ? ++c.gridy : c.gridy;\n    }\n\n    //kanderson66 edit\n    private String deleteLastCharacter(String string)\n    {\n        if (string.equals(\"\"))\n        {\n            return string;\n        }\n        return string.substring(0, string.length() - 1);\n    }\n\n    private boolean inputValid(String input)\n    {\n        //split equation into individual components\n        String[] components \u003d input.split(\"(?\u003c\u003d[-+*/^()\\\\[\\\\]])|(?\u003d[-+*/^()\\\\[\\\\]])\");\n\n        //check # ) never above # (\n        int length\u003dcomponents.length;\n        int countOpenParen \u003d 0;\n        int countClosedParen \u003d 0;\n\n        for(String component : components){\n            switch (component){\n                case \"(\":\n                    countOpenParen++;\n                    break;\n                case \")\":\n                    countClosedParen++;\n                    if(countClosedParen\u003ecountOpenParen){\n                        return false;\n                    }\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        //check all math operators legal\n        for(int n\u003d0;n\u003clength;n++){\n            //grab last result if first digit pressed is math symbol \u0026 display has not been cleared\n            if (n\u003d\u003d0  \u0026\u0026 !displayField.previousResult.equals(\"0\") \u0026\u0026 length \u003d\u003d 1){\n                switch(components[n]){\n                    case \"+\":\n                    case \"-\":\n                    case \"*\":\n                    case \"/\":\n                    case \"^\":\n                        //ensure last result enter properly w comma\n                        String temp \u003d components[n];\n                        components[n] \u003d displayField.previousResult.replaceAll(\",\",\"\") + temp;\n                        //re-submit value to properly separate previousResult and math operator\n                        if (inputValid(components[n].replaceAll(\",\",\"\")))\n                        {\n                            return true;\n                        }\n                        return false;\n                    default:\n                        break;\n                }\n            }\n            //check if previous component was ###. with no number after decimal (remove last decimal)\n            //# of length 1 does not have a .\n            if(n !\u003d 0 \u0026\u0026 components[n - 1].length() !\u003d 1) {\n                if (components[n - 1].charAt(components[n - 1].length() - 1) \u003d\u003d \u0027.\u0027) {\n                    components[n - 1] \u003d components[n - 1].substring(0, components[n - 1].length() - 1);\n                }\n            }\n            //  +*/^) cant come after +-*/^( or start of equation\n            switch(components[n]){\n                case \"+\":\n                case \"*\":\n                case \"/\":\n                case \"^\":\n                case \")\":\n                    if (n!\u003d0)\n                    {\n                        switch (components[n-1]){\n                            case \"+\":\n                            case \"-\":\n                            case \"*\":\n                            case \"/\":\n                            case \"^\":\n                            case \"(\":\n                                return false;\n                            default:\n                                break;\n                        }\n                        break;\n                    }\n                    //cant have math symbol at start of equation (except ( or -)\n                    else\n                    {\n                        return false;\n                    }\n                //check proper input before (\n                case \"(\":\n                    if (n!\u003d0)\n                    {\n                        switch (components[n-1]){\n                            case \"+\":\n                            case \"-\":\n                            case \"*\":\n                            case \"/\":\n                            case \"^\":\n                            case \"(\":\n                                break;\n                            //add * before ( if needed  (\"56(4-2)\" changes to \"56*(4-2)\")\n                            default:\n                                components[n] \u003d \"*(\";\n                                break;\n                        }\n                    }\n                    break;\n            }\n\n            //check . is before at least 1 # \u0026 only 1 in component\n            if(components[n].matches(\".*[.]+.*\")){\n                String[] split \u003d components[n].split(\"\\\\.\");\n                switch (split.length)\n                {\n                    // \".\"\n                    case 0:\n                        components[n] \u003d \"0.\";\n                        break;\n                    // \"4.\"\n                    case 1:\n                        break;\n                    // \"4.4\" or \"4.4.\"\n                    case 2:\n                        //check if last character is .\n                        if (components[n].charAt(components[n].length()-1) \u003d\u003d \u0027.\u0027)\n                        {\n                            return false;\n                        }\n                        break;\n                    // \"4.4.4\"\n                    //should not reach- should be corrected when 2nd . entered\n                    default:\n                        return false;\n                }\n            }\n        } //end for\n\n        //include commas for easier reading, display max 15 decimal points in input field\n        //(answer field decimal limit is set separately in DisplayField.java)\n        DecimalFormat df \u003d new DecimalFormat(\"#,###.###############\");\n        df.setRoundingMode(RoundingMode.HALF_UP);\n\n        //convert components back into 1 string, update displayField input incase changed\n        displayField.input\u003d\"\";\n        for (String component : components) {\n            if (component.length() \u003e 3) {\n                displayField.input +\u003d df.format(Double.parseDouble(component));\n            } else {\n                displayField.input +\u003d component;\n            }\n        }\n        return true;\n    }\n    //end kanderson66 edit\n}\n\n\n","filePath":"src\\main\\java\\com\\calculatorpro\\uiSpedwards\\CalculatorPanel.java"},{"fileName":"CalculatorPluginPanel.java","content":"/*\n * Copyright (c) 2020, Spedwards \u003chttps://github.com/Spedwards\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.calculatorpro.uiSpedwards;\n\nimport java.awt.BorderLayout;\nimport lombok.Getter;\nimport net.runelite.client.ui.PluginPanel;\n\npublic class CalculatorPluginPanel extends PluginPanel\n{\n    private final DisplayPanel displayPanel \u003d new DisplayPanel();\n\n    @Getter\n    private final HistoryPanel historyPanel \u003d new HistoryPanel();\n\n    public CalculatorPluginPanel()\n    {\n        super();\n\n        CalculatorPanel calculatorPanel \u003d new CalculatorPanel(this);\n\n        setLayout(new BorderLayout(5, 5));\n\n        add(displayPanel, BorderLayout.NORTH);\n        add(calculatorPanel, BorderLayout.CENTER);\n        add(historyPanel, BorderLayout.SOUTH);\n    }\n\n    protected DisplayField getDisplayField()\n    {\n        return displayPanel.getDisplayField();\n    }\n}","filePath":"src\\main\\java\\com\\calculatorpro\\uiSpedwards\\CalculatorPluginPanel.java"},{"fileName":"DisplayField.java","content":"/*\n * Copyright (c) 2020, Spedwards \u003chttps://github.com/Spedwards\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.calculatorpro.uiSpedwards;\n\n//import com.calculatorpro.CalculatorProConfig;\n//import com.google.inject.Provides;\n//import javax.inject.Inject;\nimport javax.swing.JTextField;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\nimport com.calculatorpro.CalculatorProPlugin;\nimport java.math.RoundingMode;\nimport java.text.DecimalFormat;\n//import net.runelite.client.config.ConfigManager;\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DisplayField extends JTextField\n{\n//    //todo test if effective\n//    //adds Calculator Pro to config panel\n//    @Provides\n//    CalculatorProConfig provideConfig(ConfigManager configManager) {\n//        return configManager.getConfig(CalculatorProConfig.class);\n//    }\n\n    Double result;\n    public String previousResult \u003d \"0\";\n    public String input \u003d \"\";\n    public String output \u003d \"0\";\n    boolean calcDone \u003d false;\n\n    //called after hitting \u003d\n    protected void calculateResult()\n    {\n        //kanderson66 edit\n        //check end of equation validity\n        //split equation into individual components\n        String[] components \u003d input.split(\"(?\u003c\u003d[-+*/^()\\\\[\\\\]])|(?\u003d[-+*/^()\\\\[\\\\]])\");\n\n        //restrict math if equation is only (up to 3) \"mathless\" operations\n        switch (components.length)\n        {\n            //dont do math on single component\n            case 1:\n                return;\n            //dont do math if only max 1 number\n            case 2:\n                //check for - or (\n                if (components[0].equals(\"-\") || components[0].equals(\"(\"))\n                {\n                    return;\n                }\n            case 3:\n                //check for -( or -- or (- or ((\n                if ((components[0].equals(\"-\") || components[0].equals(\"(\")) \u0026\u0026 (components[1].equals(\"-\") || components[1].equals(\"(\")))\n                {\n                    return;\n                }\n        }\n\n        //cant end in math symbol (remove it)\n        switch (components[components.length-1])\n        {\n            case \"+\":\n            case \"-\":\n            case \"*\":\n            case \"/\":\n            case \"^\":\n            case \"(\":\n                components[components.length-1] \u003d \"\";\n\n                //reform input, re-enter Calculate result\n                input \u003d \"\";\n                for (String component : components)\n                {\n                    input +\u003d component;\n                }\n                calculateResult();\n                return;\n            //last input is a ### - check if ended in a . (remove it)\n            default:\n                //# is a single digit, cant be a .\n                if (components[components.length-1].length() !\u003d 1 ) {\n                    //# ended in . (remove it)\n                    if (components[components.length-1].charAt(components[components.length-1].length()-1) \u003d\u003d \u0027.\u0027)\n                    {\n                        components[components.length-1] \u003d components[components.length-1].substring(0,components[components.length-1].length()-1);\n                        break;\n                    }\n                }\n                break;\n        }\n\n        //count num Open \u0026 closed Parenthesis \u0027(\u0027 and \u0027)\u0027\n        int countOpenParen \u003d 0;\n        int countClosedParen \u003d 0;\n        input\u003d\"\";\n\n        for(String component : components){\n            switch (component){\n                case \"(\":\n                    countOpenParen++;\n                    break;\n                case \")\":\n                    countClosedParen++;\n                    break;\n                default:\n                    break;\n            }\n            //put components back into 1 string if anything changed\n            input +\u003d component;\n        }\n        //if more \u0027(\u0027 than \u0027)\u0027, add as many \u0027)\u0027 to end as needed\n        if (countOpenParen-countClosedParen !\u003d 0)\n        {\n            for(int n\u003d0; n\u003c(countOpenParen-countClosedParen); n++)\n            {\n                input +\u003d \")\";\n            }\n        }\n\n        //evaluate the math equation string\n        result \u003d CalculatorProPlugin.eval(input.replaceAll(\",\",\"\"));\n\n        //check for divide by 0 error message (\"Infinity\")\n        if(result.toString().charAt(0)\u003d\u003d\u0027I\u0027){\n            output \u003d \"Cant divide by 0\";\n            calcDone \u003d true;\n            return;\n        }\n        //todo add ability to custom set how many decimals to display from CalculatorProConfig.numDecimals()\n\n//        CalculatorProConfig config2 \u003d new CalculatorProConfig() {\n//            @Override\n//            public int numDecimals() {\n//                return CalculatorProConfig.super.numDecimals();\n//            }\n//        };\n//\n//        //reduce answer to desired # decimal places or less \u0026 include commas for easier reading\n//        String format \u003d \"#,###\";\n//\n//        if (config2.numDecimals() \u003e 0)\n//        {\n//            format +\u003d \".\";\n//\n//            //limit decimal points to 15 places\n//            if(config2.numDecimals() \u003e 15)\n//            {\n//                for (int n\u003d0; n\u003c15; n++)\n//                {\n//                    format +\u003d \"#\";\n//                }\n//            }\n//            else\n//            {\n//                for (int n\u003d0; n\u003cconfig2.numDecimals(); n++)\n//                {\n//                    format +\u003d \"#\";\n//                }\n//            }\n//        }\n//        DecimalFormat df \u003d new DecimalFormat(format);\n\n\n        //reduce answer to 3 decimal places or less \u0026 include commas for easier reading\n        DecimalFormat df \u003d new DecimalFormat(\"#,###.###\");\n        df.setRoundingMode(RoundingMode.HALF_UP);\n\n        output \u003d df.format(result);\n        calcDone \u003d true;\n        previousResult \u003d output;\n    } //end kanderson66 edit\n\n    protected void reset()\n    {\n        result \u003d 0.0;\n        input \u003d \"\";\n        update();\n    }\n\n    protected void clear()\n    {\n        reset();\n    }\n\n    protected void update()\n    {\n        if(calcDone)\n        {\n            super.setText(this.input + \" \u003d \" + this.output);\n            input \u003d \"\";\n            calcDone \u003d false;\n        }\n        else {\n            super.setText(this.input);\n        }\n        repaint();\n    }\n}","filePath":"src\\main\\java\\com\\calculatorpro\\uiSpedwards\\DisplayField.java"},{"fileName":"DisplayPanel.java","content":"/*\n * Copyright (c) 2020, Spedwards \u003chttps://github.com/Spedwards\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.calculatorpro.uiSpedwards;\n\nimport java.awt.BorderLayout;\nimport java.awt.Dimension;\nimport javax.swing.*;\nimport javax.swing.border.EmptyBorder;\nimport lombok.Getter;\n\npublic class DisplayPanel extends JPanel\n{\n    @Getter\n    private final DisplayField displayField \u003d new DisplayField();\n\n    public DisplayPanel()\n    {\n        super();\n\n        setLayout(new BorderLayout(4, 4));\n        setBorder(new EmptyBorder(0, 1, 0, 1));\n\n        displayField.setPreferredSize(new Dimension(228, 50));\n        displayField.setMinimumSize(new Dimension(170, 50));\n        displayField.setEditable(false);\n\n        add(displayField, BorderLayout.CENTER);\n\n    }\n}","filePath":"src\\main\\java\\com\\calculatorpro\\uiSpedwards\\DisplayPanel.java"},{"fileName":"HistoryItemPanel.java","content":"/*\n * Copyright (c) 2020, Spedwards \u003chttps://github.com/Spedwards\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.calculatorpro.uiSpedwards;\n\nimport com.calculatorpro.CalculatorProPlugin;\nimport java.awt.BorderLayout;\nimport java.awt.Dimension;\nimport java.awt.Toolkit;\nimport java.awt.datatransfer.Clipboard;\nimport java.awt.datatransfer.StringSelection;\nimport java.awt.image.BufferedImage;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport javax.imageio.ImageIO;\nimport javax.swing.ImageIcon;\nimport javax.swing.JButton;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.border.MatteBorder;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.util.ImageUtil;\n\npublic class HistoryItemPanel extends JPanel\n{\n    private static final ImageIcon CLIPBOARD_ICON;\n\n    static\n    {\n        BufferedImage clipboardIcon \u003d ImageUtil.loadImageResource(CalculatorProPlugin.class, \"/clipboard_icon.png\");\n        clipboardIcon \u003d ImageUtil.resizeImage(clipboardIcon,20,20);\n        CLIPBOARD_ICON \u003d new ImageIcon(clipboardIcon);\n    }\n\n    public HistoryItemPanel(String line1, String line2)\n    {\n        super();\n\n        setLayout(new BorderLayout());\n        setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        setBorder(new MatteBorder(0, 5, 0, 0, ColorScheme.BRAND_ORANGE));\n\n        JPanel text \u003d new JPanel(new BorderLayout());\n        text.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        JLabel lineOneLabel \u003d new JLabel(line1);\n        lineOneLabel.setHorizontalAlignment(JLabel.CENTER);\n        JLabel lineTwoLabel \u003d new JLabel(line2);\n        lineTwoLabel.setHorizontalAlignment(JLabel.CENTER);\n        text.add(lineOneLabel, BorderLayout.NORTH);\n        text.add(lineTwoLabel, BorderLayout.SOUTH);\n\n        add(text, BorderLayout.CENTER);\n\n        JButton copy \u003d new JButton(CLIPBOARD_ICON);\n        copy.setPreferredSize(new Dimension(40, 40));\n        copy.setToolTipText(\"Copy result to clipboard\");\n        copy.addActionListener(e -\u003e\n        {\n            StringSelection selection \u003d new StringSelection(line2);\n            Clipboard clipboard \u003d Toolkit.getDefaultToolkit().getSystemClipboard();\n            clipboard.setContents(selection, null);\n        });\n\n        add(copy, BorderLayout.EAST);\n    }\n}","filePath":"src\\main\\java\\com\\calculatorpro\\uiSpedwards\\HistoryItemPanel.java"},{"fileName":"HistoryPanel.java","content":"/*\n * Copyright (c) 2020, Spedwards \u003chttps://github.com/Spedwards\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.calculatorpro.uiSpedwards;\n\nimport java.awt.GridBagConstraints;\nimport java.awt.GridBagLayout;\nimport java.awt.Insets;\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.swing.JPanel;\n\npublic class HistoryPanel extends JPanel\n{\n    private final List\u003cHistoryItemPanel\u003e itemPanels \u003d new ArrayList\u003c\u003e();\n    private final GridBagConstraints c;\n\n    public HistoryPanel()\n    {\n        super();\n\n        setLayout(new GridBagLayout());\n\n        c \u003d new GridBagConstraints();\n        c.fill \u003d GridBagConstraints.HORIZONTAL;\n        c.gridx \u003d 0;\n        c.gridy \u003d 0;\n        c.weightx \u003d 1;\n        c.weighty \u003d 0;\n        c.insets \u003d new Insets(0, 0, 7, 0);\n    }\n\n    protected void addHistoryItem(String line1, String line2)\n    {\n        // Herein lies my horrible attempt at creating a new item at the top and pushing everything else down\n        // \\_()_/\n        removeAll();\n        HistoryItemPanel itemPanel \u003d new HistoryItemPanel(line1, line2);\n        itemPanels.add(0, itemPanel);\n        c.gridy \u003d 0;\n        itemPanels.forEach(panel -\u003e {\n            add(panel, c, 0);\n            c.gridy++;\n        });\n\n        repaint();\n        revalidate();\n    }\n\n    protected void clearHistory()\n    {\n        removeAll();\n        itemPanels.clear();\n        repaint();\n        revalidate();\n    }\n}","filePath":"src\\main\\java\\com\\calculatorpro\\uiSpedwards\\HistoryPanel.java"},{"fileName":"CalculatorProPluginTest.java","content":"package com.calculatorpro;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class CalculatorProPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(CalculatorProPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\calculatorpro\\CalculatorProPluginTest.java"}]},{"commit":"87b8458481166233f6756130fb18b51d5e5b5de8","repository":"https://github.com/cloudAspect/unregistered-hypercam-2.git","internalName":"unregistered-hypercam-2","files":[{"fileName":"UnregisteredHypercam2Overlay.java","content":"package cloudAspect.hypercam2;\n\nimport java.awt.*;\nimport java.awt.image.BufferedImage;\nimport javax.inject.Inject;\n\nimport net.runelite.api.Client;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.util.ImageUtil;\n\nclass UnregisteredHypercam2Overlay extends Overlay {\n\t\n\tprivate Client client;\n\t\n\tprivate BufferedImage image;\n\t\n\t@Inject\n\tprivate UnregisteredHypercam2Overlay(Client client) {\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.ALWAYS_ON_TOP);\n\t\tthis.client \u003d client;\n\t\tthis.image \u003d ImageUtil.loadImageResource(getClass(), \"hypercam.png\");\n\t}\n\t\n\t@Override\n\tpublic Dimension render(Graphics2D graphics) {\n\t\tif (image !\u003d null) {\n\t\t\tgraphics.drawImage(image, 0,  0, null);\n\t\t}\n\t\treturn null;\n\t}\n}\n","filePath":"src\\main\\java\\cloudAspect\\hypercam2\\UnregisteredHypercam2Overlay.java"},{"fileName":"UnregisteredHypercam2Plugin.java","content":"package cloudAspect.hypercam2;\n\nimport com.google.inject.Provides;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\nimport javax.inject.Inject;\n\n@PluginDescriptor(\n\t\tname \u003d \"Unregistered Hypercam 2\",\n\t\tdescription \u003d \"Shows the Unregistered Hypercam 2 logo as an overlay\",\n\t\ttags \u003d {\"overlay\", \"meme\", \"fun\", \"cosmetic\"}\n)\npublic class UnregisteredHypercam2Plugin extends Plugin {\n\t\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\t\n\t@Inject\n\tprivate UnregisteredHypercam2Overlay overlay;\n\t\n\t\n\t\n\t@Override\n\tprotected void startUp() throws Exception {\n\t\toverlayManager.add(overlay);\n\t}\n\t\n\t@Override\n\tprotected void shutDown() throws Exception {\n\t\toverlayManager.remove(overlay);\n\t}\n}\n","filePath":"src\\main\\java\\cloudAspect\\hypercam2\\UnregisteredHypercam2Plugin.java"},{"fileName":"UnregisteredHypercam2PluginTest.java","content":"package cloudAspect.hypercam2;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class UnregisteredHypercam2PluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(UnregisteredHypercam2Plugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\cloudAspect\\hypercam2\\UnregisteredHypercam2PluginTest.java"}]},{"commit":"1bf8c29b66807b4c834a0e250d91b32835257ba1","repository":"https://github.com/ConradMS/Sprite-Markers.git","internalName":"sprite-markers","files":[{"fileName":"ImportExportTool.java","content":"package com.spritemarkers;\n\nimport com.google.common.reflect.TypeToken;\nimport com.google.gson.Gson;\nimport com.google.gson.JsonSyntaxException;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.MenuEntry;\nimport net.runelite.api.widgets.WidgetInfo;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.chat.QueuedMessage;\nimport net.runelite.client.menus.MenuManager;\nimport net.runelite.client.menus.WidgetMenuOption;\n\nimport javax.inject.Inject;\nimport java.awt.Toolkit;\nimport java.awt.datatransfer.DataFlavor;\nimport java.awt.datatransfer.StringSelection;\nimport java.awt.datatransfer.UnsupportedFlavorException;\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.HashMap;\n\npublic class ImportExportTool\n{\n    private static final WidgetMenuOption EXPORT_SPRITE_MARKERS \u003d new WidgetMenuOption(\"Export\", \"Sprite Markers\", WidgetInfo.MINIMAP_TOGGLE_RUN_ORB);\n    private static final WidgetMenuOption IMPORT_SPRITE_MARKERS \u003d new WidgetMenuOption(\"Import\", \"Sprite Markers\", WidgetInfo.MINIMAP_TOGGLE_RUN_ORB);\n\n    private final SpriteMarkersPlugin spriteMarkersPlugin;\n    private final Client client;\n    private final MenuManager menuManager;\n    private final ChatMessageManager chatMessageManager;\n    private final Gson gson;\n\n    @Inject\n    private ImportExportTool(SpriteMarkersPlugin plugin, Client client, ChatMessageManager chatMessageManager, MenuManager menuManager, Gson gson)\n    {\n        this.spriteMarkersPlugin \u003d plugin;\n        this.client \u003d client;\n        this.menuManager \u003d menuManager;\n        this.chatMessageManager \u003d chatMessageManager;\n        this.gson \u003d gson;\n    }\n\n    void addOptions()\n    {\n        menuManager.addManagedCustomMenu(EXPORT_SPRITE_MARKERS, this::exportSpriteMarkers);\n        menuManager.addManagedCustomMenu(IMPORT_SPRITE_MARKERS, this::importSpriteMarkers);\n    }\n\n    void removeOptions()\n    {\n        menuManager.removeManagedCustomMenu(EXPORT_SPRITE_MARKERS);\n        menuManager.removeManagedCustomMenu(IMPORT_SPRITE_MARKERS);\n    }\n\n    private void exportSpriteMarkers(MenuEntry menuEntry)\n    {\n        final ArrayList\u003cSpriteMarker\u003e spriteMarkersLoaded \u003d spriteMarkersPlugin.getSpriteMarkersLoaded();\n        if (spriteMarkersLoaded.isEmpty())\n        {\n            addChatMessage(\"There are no loaded sprite markers to export\");\n            return;\n        }\n\n        final int[] loadedRegions \u003d client.getMapRegions();\n        if(loadedRegions \u003d\u003d null || loadedRegions.length \u003d\u003d 0)\n        {\n            return;\n        }\n\n        ArrayList\u003cSpriteMarkerID\u003e spriteIDSToSave \u003d new ArrayList\u003c\u003e();\n        for(int region : loadedRegions)\n        {\n            spriteIDSToSave.addAll(spriteMarkersPlugin.jsonToSprite(region));\n        }\n\n        String markersJSONString \u003d this.gson.toJson(spriteIDSToSave);\n\n        Toolkit.getDefaultToolkit()\n                .getSystemClipboard()\n                .setContents(new StringSelection(markersJSONString), null);\n        addChatMessage(\"Copied loaded sprite markers to clipboard\");\n    }\n\n    private void importSpriteMarkers(MenuEntry menuEntry)\n    {\n        final String text;\n        try\n        {\n           text \u003d Toolkit.getDefaultToolkit().getSystemClipboard()\n                   .getData(DataFlavor.stringFlavor)\n                   .toString();\n        }\n        catch (IOException | UnsupportedFlavorException e)\n        {\n            addChatMessage(\"Clipboard error - could not import sprite markers\");\n            return;\n        }\n\n        if(text.isEmpty() || text \u003d\u003d null)\n        {\n            addChatMessage(\"Empty clipboard - could not import sprite markers\");\n            return;\n        }\n\n        ArrayList\u003cSpriteMarkerID\u003e spriteMarkerIDS \u003d new ArrayList\u003c\u003e();\n\n        try\n        {\n            spriteMarkerIDS \u003d gson.fromJson(text, new TypeToken\u003cArrayList\u003cSpriteMarkerID\u003e\u003e(){}.getType());\n        }catch (JsonSyntaxException e)\n        {\n            addChatMessage(\"No Sprites in clipboard/Wrong formatting - could not import sprite markers\");\n            return;\n        }\n\n        if (spriteMarkerIDS \u003d\u003d null || spriteMarkerIDS.isEmpty())\n        {\n            addChatMessage(\"No Sprite Markers in clipboard\");\n            return;\n        }\n\n        addToConfig(spriteMarkerIDS);\n    }\n\n    private void addToConfig(ArrayList\u003cSpriteMarkerID\u003e spriteMarkerIDS)\n    {\n        HashMap\u003cInteger, ArrayList\u003cSpriteMarkerID\u003e\u003e IDToMarkers \u003d new HashMap\u003c\u003e();\n        int currRegion;\n        for(SpriteMarkerID spriteMarkerID : spriteMarkerIDS)\n        {\n            currRegion \u003d spriteMarkerID.getRegionId();\n            if(IDToMarkers.containsKey(currRegion))\n            {\n                IDToMarkers.get(currRegion).add(spriteMarkerID);\n            }\n            else\n            {\n                IDToMarkers.put(currRegion, new ArrayList\u003c\u003e(Collections.singletonList(spriteMarkerID)));\n            }\n        }\n\n        for(int regionId : IDToMarkers.keySet())\n        {\n            spriteMarkersPlugin.saveSprite(regionId, IDToMarkers.get(regionId));\n        }\n        spriteMarkersPlugin.loadSprites();\n        addChatMessage(\"Sprite Markers imported\");\n    }\n\n    private void addChatMessage(String message)\n    {\n        chatMessageManager.queue(QueuedMessage.builder()\n                .type(ChatMessageType.CONSOLE)\n                .runeLiteFormattedMessage(message)\n                .build()\n        );\n    }\n}\n","filePath":"src\\main\\java\\com\\spritemarkers\\ImportExportTool.java"},{"fileName":"MinimapSpriteOverlay.java","content":"package com.spritemarkers;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Point;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.game.SpriteManager;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayUtil;\nimport net.runelite.client.util.ImageUtil;\n\nimport javax.inject.Inject;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.image.BufferedImage;\nimport java.util.ArrayList;\n\npublic class MinimapSpriteOverlay extends Overlay\n{\n\n    private final Client client;\n    private final SpriteMarkersPlugin plugin;\n    private final SpriteMarkersConfig config;\n\n    private final static int MINIMAP_RADIUS \u003d 16;\n    private final static int BIG_SPRITE \u003d 250;\n\n    @Inject\n    SpriteManager spriteManager;\n\n    @Inject\n    public MinimapSpriteOverlay(Client client, SpriteMarkersConfig config, SpriteMarkersPlugin plugin)\n    {\n        this.client \u003d client;\n        this.config \u003d config;\n        this.plugin \u003d plugin;\n        setPosition(OverlayPosition.DYNAMIC);\n        setPriority(OverlayPriority.LOW);\n        setLayer(OverlayLayer.ABOVE_WIDGETS);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics)\n    {\n\n        if(!config.showSprites() || !config.showOnMap())\n        {\n            return null;\n        }\n\n        final ArrayList\u003cSpriteMarker\u003e spriteMarkers \u003d plugin.getSpriteMarkersLoaded();\n\n        if(spriteMarkers.isEmpty())\n        {\n            return null;\n        }\n\n        for(SpriteMarker spriteMarker : spriteMarkers)\n        {\n            drawMinimapSprite(graphics, spriteMarker);\n        }\n        return null;\n    }\n\n    private void drawMinimapSprite(Graphics2D graphics, SpriteMarker spriteMarker)\n    {\n        WorldPoint playerLoc \u003d client.getLocalPlayer().getWorldLocation();\n\n        if(playerLoc !\u003d null \u0026\u0026 playerLoc.distanceTo(spriteMarker.getWorldPoint()) \u003c\u003d MINIMAP_RADIUS)\n        {\n            LocalPoint localPoint \u003d LocalPoint.fromWorld(client, spriteMarker.worldPoint);\n\n            if(localPoint \u003d\u003d null)\n            {\n                return;\n            }\n\n            Point miniMapPoint \u003d Perspective.localToMinimap(client, localPoint);\n\n            if(miniMapPoint \u003d\u003d null)\n            {\n                return;\n            }\n\n            BufferedImage toImage \u003d  spriteManager.getSprite(1, 0);\n\n            try\n            {\n                toImage \u003d spriteManager.getSprite(spriteMarker.getSpriteId(), 0);\n            } catch (IllegalArgumentException e)\n            {\n                // not a sprite\n            }\n\n            if(toImage !\u003d null)\n            {\n                int scaleFactor \u003d Math.min(toImage.getHeight(), toImage.getWidth()) / config.largeMapSpriteSize();\n\n                if(Math.max(toImage.getHeight(), toImage.getWidth()) \u003c BIG_SPRITE)\n                {\n                    scaleFactor \u003d Math.min(toImage.getHeight(), toImage.getWidth()) / config.smallMapSpriteSize();\n                }\n\n                scaleFactor \u003d Math.max(scaleFactor, 1);\n\n                toImage \u003d ImageUtil.resizeImage(toImage, toImage.getWidth() / scaleFactor, toImage.getHeight() / scaleFactor);\n                Point offsetPoint \u003d new Point(miniMapPoint.getX() - toImage.getWidth() / 2, miniMapPoint.getY() - toImage.getHeight() / 2);\n                OverlayUtil.renderImageLocation(graphics, offsetPoint, toImage);\n            }\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\spritemarkers\\MinimapSpriteOverlay.java"},{"fileName":"SpriteMarker.java","content":"package com.spritemarkers;\n\nimport lombok.Getter;\nimport lombok.Setter;\nimport net.runelite.api.coords.WorldPoint;\n\n@Getter\n@Setter\npublic class SpriteMarker\n{\n    int spriteId;\n    int scale;\n    WorldPoint worldPoint;\n\n    public SpriteMarker(int spriteId, int scale, WorldPoint worldPoint)\n    {\n        this.spriteId \u003d spriteId;\n        this.scale \u003d scale;\n        this.worldPoint \u003d worldPoint;\n    }\n\n    public String toString()\n    {\n        return this.worldPoint.toString();\n    }\n}\n","filePath":"src\\main\\java\\com\\spritemarkers\\SpriteMarker.java"},{"fileName":"SpriteMarkerID.java","content":"package com.spritemarkers;\nimport lombok.Getter;\nimport lombok.Setter;\n\n@Getter\n@Setter\npublic class SpriteMarkerID {\n    private int RegionId;\n    private int RegionX;\n    private int RegionY;\n    private int plane;\n    private int spriteId;\n    private int scale;\n\n    public SpriteMarkerID (int regionId, int regionX, int regionY, int plane, int spriteId, int scale)\n    {\n        setRegionId(regionId);\n        setRegionX(regionX);\n        setRegionY(regionY);\n        setPlane(plane);\n        setSpriteId(spriteId);\n        setScale(scale);\n    }\n\n    public boolean equals(SpriteMarkerID spriteMarkerID)\n    {\n        return spriteMarkerID.getRegionId() \u003d\u003d this.getRegionId() \u0026\u0026\n                spriteMarkerID.getRegionX() \u003d\u003d this.getRegionX() \u0026\u0026\n                spriteMarkerID.getRegionY() \u003d\u003d this.getRegionY() \u0026\u0026\n                spriteMarkerID.getPlane() \u003d\u003d this.getPlane();\n    }\n}","filePath":"src\\main\\java\\com\\spritemarkers\\SpriteMarkerID.java"},{"fileName":"SpriteMarkersConfig.java","content":"package com.spritemarkers;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"spriteMarkers\")\npublic interface SpriteMarkersConfig extends Config\n{\n\tString SHOW_IMPORT \u003d \"show import\";\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"showSprites\",\n\t\t\tname \u003d \"Display Sprites\",\n\t\t\tdescription \u003d \"Hides/Shows ground sprites\"\n\t)\n\tdefault boolean showSprites()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d \"spriteId\",\n\t\t\tname \u003d \"Sprite ID\",\n\t\t\tdescription \u003d \"What Sprite Id will be added\"\n\t)\n\tdefault int spriteID()\n\t{\n\t\treturn 1;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 3,\n\t\t\tkeyName \u003d \"scale\",\n\t\t\tname \u003d \"Sprite Scale\",\n\t\t\tdescription \u003d \"The Scale of the sprite as a percent\"\n\t)\n\tdefault int scale()\n\t{\n\t\treturn 100;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 4,\n\t\t\tkeyName \u003d \"showOnMap\",\n\t\t\tname \u003d \"Show On Map\",\n\t\t\tdescription \u003d \"Show the sprite on the minimap or not\"\n\t)\n\tdefault boolean showOnMap()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 5,\n\t\t\tkeyName \u003d \"smallMapSpriteSize\",\n\t\t\tname \u003d \"Small Sprite Map Size\",\n\t\t\tdescription \u003d \"The size that small sprites should be rendered on the minimap\"\n\t)\n\tdefault int smallMapSpriteSize() {return 8; }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 6,\n\t\t\tkeyName \u003d \"largeMapSpriteSize\",\n\t\t\tname \u003d \"Large Sprite Map Size\",\n\t\t\tdescription \u003d \"The size that large sprites should be rendered on the minimap\"\n\t)\n\tdefault int largeMapSpriteSize() {return 16; }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 7,\n\t\t\tkeyName \u003d \"highlightSprites\",\n\t\t\tname \u003d \"Show Sprite Tiles\",\n\t\t\tdescription \u003d \"Highlight the tiles sprites on to edit easier\"\n\t)\n\tdefault boolean highlightSprites() {return false; }\n\n\n\t@ConfigItem(\n\t\t\tposition \u003d 8,\n\t\t\tkeyName \u003d \"clear\",\n\t\t\tname \u003d \"Clear Sprites\",\n\t\t\tdescription \u003d \"Type clear to clear all loaded sprites\"\n\t)\n\tdefault String clear()\n\t{\n\t\treturn \"------\";\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 9,\n\t\t\tkeyName \u003d SHOW_IMPORT,\n\t\t\tname \u003d \"Show Import/Export\",\n\t\t\tdescription \u003d \"Show the import and export options under the run minimap orb\"\n\t)\n\tdefault boolean showImport() {return false;}\n}\n","filePath":"src\\main\\java\\com\\spritemarkers\\SpriteMarkersConfig.java"},{"fileName":"SpriteMarkersOverlay.java","content":"package com.spritemarkers;\n\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.image.BufferedImage;\nimport java.util.ArrayList;\nimport javax.inject.Inject;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.game.SpriteManager;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayUtil;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\nimport net.runelite.client.util.ImageUtil;\n\npublic class SpriteMarkersOverlay extends Overlay\n{\n\n    private final Client client;\n    private final SpriteMarkersPlugin plugin;\n    private final SpriteMarkersConfig config;\n\n    private static final int MAX_TILES \u003d 32;\n\n    @Inject\n    SpriteManager spriteManager;\n\n    @Inject\n    private ConfigManager configManager;\n\n    @Inject\n    public SpriteMarkersOverlay(Client client, SpriteMarkersConfig config, SpriteMarkersPlugin plugin)\n    {\n        this.client \u003d client;\n        this.config \u003d config;\n        this.plugin \u003d plugin;\n        setPosition(OverlayPosition.DYNAMIC);\n        setPriority(OverlayPriority.LOW);\n        setLayer(OverlayLayer.ABOVE_SCENE);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics)\n    {\n        if(!(config.showSprites()))\n        {\n            return null;\n        }\n        final ArrayList\u003cSpriteMarker\u003e spriteMarkers \u003d plugin.getSpriteMarkersLoaded();\n        if (spriteMarkers.isEmpty())\n        {\n            return null;\n        }\n\n        for(final SpriteMarker spriteMarker : spriteMarkers)\n        {\n            BufferedImage toImage \u003d  spriteManager.getSprite(1, 0);\n\n            try\n            {\n                toImage \u003d spriteManager.getSprite(spriteMarker.getSpriteId(), 0);\n            } catch (IllegalArgumentException e)\n            {\n                // not a sprite\n            }\n\n            WorldPoint playerLoc \u003d client.getLocalPlayer().getWorldLocation();\n\n            if(toImage !\u003d null \u0026\u0026 spriteMarker.worldPoint.distanceTo(playerLoc) \u003c\u003d MAX_TILES)\n            {\n                final WorldPoint worldLoc \u003d spriteMarker.getWorldPoint();\n                final LocalPoint locPoint \u003d LocalPoint.fromWorld(client, worldLoc);\n\n                if (locPoint \u003d\u003d null)\n                {\n                    return null;\n                }\n\n                toImage \u003d ImageUtil.resizeImage(toImage, toImage.getWidth() * spriteMarker.getScale() / 100, toImage.getHeight() * spriteMarker.getScale() / 100);\n                OverlayUtil.renderImageLocation(client, graphics, locPoint, toImage, 0);\n            }\n        }\n\n        if (config.clear().equals(\"clear\"))\n        {\n\n            for(SpriteMarker spriteMarker : spriteMarkers)\n            {\n                if(configManager.getConfiguration(SpriteMarkersPlugin.CONFIG_GROUP, SpriteMarkersPlugin.REGION + spriteMarker.getWorldPoint().getRegionID()) !\u003d null)\n                    configManager.unsetConfiguration(SpriteMarkersPlugin.CONFIG_GROUP, SpriteMarkersPlugin.REGION + spriteMarker.getWorldPoint().getRegionID());\n            }\n\n            plugin.getSpriteMarkersLoaded().clear();\n        }\n        return null;\n    }\n}\n","filePath":"src\\main\\java\\com\\spritemarkers\\SpriteMarkersOverlay.java"},{"fileName":"SpriteMarkersPlugin.java","content":"package com.spritemarkers;\n\nimport com.google.common.reflect.TypeToken;\nimport com.google.gson.Gson;\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.Getter;\nimport net.runelite.api.Client;\nimport net.runelite.api.Tile;\nimport net.runelite.api.MenuAction;\nimport net.runelite.api.GameState;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.MenuEntryAdded;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport java.util.ArrayList;\nimport java.util.Collection;\n\n@PluginDescriptor(\n\t\tname \u003d \"Sprite Markers\",\n\t\tdescription \u003d \"Mark tiles with sprites\",\n\t\ttags \u003d {\"overlay\", \"tiles\"}\n)\npublic class SpriteMarkersPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate SpriteMarkersConfig config;\n\n\t@Inject\n\tprivate SpriteMarkersOverlay overlay;\n\n\t@Inject\n\tprivate TileHighlighterOverlay highlighterOverlay;\n\n\t@Inject\n\tprivate MinimapSpriteOverlay minimapSpriteOverlay;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate ImportExportTool importExportTool;\n\n\t@Inject\n\tprivate Gson gson;\n\n\tprivate final static int LEFT_CONTROL_KEYCODE \u003d 82;\n\tprivate final static String ADD_SPRITE \u003d \"Add Sprite\";\n\tprivate final static String REMOVE_SPRITE \u003d \"Remove Sprite\";\n\tprivate final static String CANCEL \u003d \"Cancel\";\n\n\tprotected static final  String CONFIG_GROUP \u003d \"spriteMarkers\";\n\tprotected static final String REGION \u003d \"Region_\";\n\n\t@Getter\n\tprivate final ArrayList\u003cSpriteMarker\u003e spriteMarkersLoaded \u003d new ArrayList\u003c\u003e();\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\toverlayManager.add(overlay);\n\t\toverlayManager.add(highlighterOverlay);\n\t\toverlayManager.add(minimapSpriteOverlay);\n\t\timportExportTool.addOptions();\n\t\tloadSprites();\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(overlay);\n\t\toverlayManager.remove(highlighterOverlay);\n\t\toverlayManager.remove(minimapSpriteOverlay);\n\t\timportExportTool.removeOptions();\n\t\tspriteMarkersLoaded.clear();\n\t}\n\n\tprivate boolean containsSprite(ArrayList\u003cSpriteMarkerID\u003e spriteMarkerIDS, SpriteMarkerID targetSpriteMarker)\n\t{\n\t\tfor(SpriteMarkerID spriteMarkerID : spriteMarkerIDS)\n\t\t{\n\t\t\tif(spriteMarkerID.equals(targetSpriteMarker))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t@Subscribe\n\tpublic void onMenuEntryAdded(MenuEntryAdded menuEntryEvent)\n\t{\n\t\tfinal boolean markerKeyPressed \u003d client.isKeyPressed(LEFT_CONTROL_KEYCODE);\n\n\t\tif (markerKeyPressed \u0026\u0026 menuEntryEvent.getOption().equals(CANCEL))\n\t\t{\n\t\t\tfinal Tile targetTile \u003d client.getSelectedSceneTile();\n\n\t\t\tif(targetTile !\u003d null)\n\t\t\t{\n\t\t\t\tfinal LocalPoint localPoint \u003d targetTile.getLocalLocation();\n\t\t\t\tfinal WorldPoint worldLoc \u003d WorldPoint.fromLocalInstance(client, localPoint);\n\t\t\t\tfinal int regionID \u003d worldLoc.getRegionID();\n\t\t\t\tfinal SpriteMarkerID targetSpriteMarkerID \u003d new SpriteMarkerID(regionID,\n\t\t\t\t\t\tworldLoc.getRegionX(), worldLoc.getRegionY(), client.getPlane(),\n\t\t\t\t\t\tconfig.spriteID(), config.scale());\n\n\t\t\t\tfinal ArrayList\u003cSpriteMarkerID\u003e savedSprites \u003d jsonToSprite(regionID);\n\t\t\t\tfinal boolean spriteHere \u003d containsSprite(savedSprites, targetSpriteMarkerID);\n\n\t\t\t\tif (!spriteHere)\n\t\t\t\t{\n\t\t\t\t\tclient.createMenuEntry(-1).setOption(ADD_SPRITE)\n\t\t\t\t\t\t\t.setTarget(menuEntryEvent.getTarget())\n\t\t\t\t\t\t\t.setType(MenuAction.RUNELITE)\n\t\t\t\t\t\t\t.onClick(e -\u003e addTileSprite());\n\t\t\t\t} else\n\t\t\t\t{\n\t\t\t\t\tclient.createMenuEntry(-1).setOption(REMOVE_SPRITE)\n\t\t\t\t\t\t\t.setTarget(menuEntryEvent.getTarget())\n\t\t\t\t\t\t\t.setType(MenuAction.RUNELITE)\n\t\t\t\t\t\t\t.onClick(e -\u003e removeTileSprite());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged)\n\t{\n\t\tif (gameStateChanged.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tloadSprites();\n\t\t}\n\t}\n\n\tprivate void addTileSprite()\n\t{\n\t\tfinal Tile targetTile \u003d client.getSelectedSceneTile();\n\t\tif (targetTile !\u003d null)\n\t\t{\n\t\t\tfinal LocalPoint localPoint \u003d targetTile.getLocalLocation();\n\t\t\tfinal WorldPoint worldLoc \u003d WorldPoint.fromLocalInstance(client, localPoint);\n\t\t\tfinal int regionID \u003d worldLoc.getRegionID();\n\t\t\tSpriteMarkerID spriteMarkerID \u003d new SpriteMarkerID(regionID, worldLoc.getRegionX(), worldLoc.getRegionY(),\n\t\t\t\t\tclient.getPlane(), config.spriteID(), config.scale());\n\t\t\tsaveSprite(regionID, spriteMarkerID);\n\t\t\tloadSprites();\n\t\t}\n\n\t}\n\n\tprivate void removeTileSprite()\n\t{\n\t\tfinal Tile tile \u003d client.getSelectedSceneTile();\n\n\t\tif(tile \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal LocalPoint localPoint \u003d tile.getLocalLocation();\n\t\tfinal WorldPoint targetLocation \u003d WorldPoint.fromLocalInstance(client, localPoint);\n\t\tfinal int regionID \u003d targetLocation.getRegionID();\n\t\tfinal SpriteMarkerID TargetSpriteMarkerID \u003d new SpriteMarkerID(regionID, targetLocation.getRegionX(),\n\t\t\t\ttargetLocation.getRegionY(), client.getPlane(), config.spriteID(), config.scale());\n\n\t\tArrayList\u003cSpriteMarkerID\u003e currSprites \u003d jsonToSprite(regionID);\n\n\t\tfor (SpriteMarkerID spriteMarkerID : currSprites)\n\t\t{\n\t\t\tif(spriteMarkerID.equals(TargetSpriteMarkerID))\n\t\t\t{\n\t\t\t\tcurrSprites.remove(spriteMarkerID);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif(!currSprites.isEmpty())\n\t\t{\n\t\t\tString spriteMarkersToJson \u003d gson.toJson(currSprites);\n\t\t\tconfigManager.setConfiguration(CONFIG_GROUP, REGION + regionID, spriteMarkersToJson);\n\t\t} else\n\t\t{\n\t\t\tconfigManager.unsetConfiguration(CONFIG_GROUP, REGION + regionID);\n\t\t}\n\n\t\tloadSprites();\n\t}\n\n\tvoid saveSprite(int regionId, SpriteMarkerID newSprite)\n\t{\n\t\tArrayList\u003cSpriteMarkerID\u003e currPoints \u003d jsonToSprite(regionId);\n\t\tcurrPoints.add(newSprite);\n\n\t\tString spriteMarkersToJson \u003d gson.toJson(currPoints);\n\t\tconfigManager.setConfiguration(CONFIG_GROUP, REGION + regionId, spriteMarkersToJson);\n\t}\n\n\tvoid saveSprite(int regionId, ArrayList\u003cSpriteMarkerID\u003e newSprites)\n\t{\n\t\tArrayList\u003cSpriteMarkerID\u003e currPoints \u003d jsonToSprite(regionId);\n\t\tcurrPoints.addAll(newSprites);\n\n\t\tString spriteMarkersToJson \u003d gson.toJson(currPoints);\n\t\tconfigManager.setConfiguration(CONFIG_GROUP, REGION + regionId, spriteMarkersToJson);\n\t}\n\n\tvoid loadSprites()\n\t{\n\t\tspriteMarkersLoaded.clear();\n\t\tint[] loadedRegions \u003d client.getMapRegions();\n\n\t\tif(loadedRegions !\u003d null)\n\t\t{\n\t\t\tfor(int loadedRegion : loadedRegions)\n\t\t\t{\n\t\t\t\tArrayList\u003cSpriteMarkerID\u003e regionSprites \u003d jsonToSprite(loadedRegion);\n\t\t\t\tArrayList\u003cSpriteMarker\u003e spriteMarkers \u003d getSpriteMarkers(regionSprites);\n\t\t\t\tspriteMarkersLoaded.addAll(spriteMarkers);\n\t\t\t}\n\t\t}\n\t}\n\n\tArrayList\u003cSpriteMarkerID\u003e jsonToSprite(int regionId)\n\t{\n\t\tString json \u003d configManager.getConfiguration(CONFIG_GROUP, REGION + regionId);\n\t\tif(json !\u003d null \u0026\u0026 !json.equals(\"\"))\n\t\t{\n\t\t\treturn gson.fromJson(json, new TypeToken\u003cArrayList\u003cSpriteMarkerID\u003e\u003e(){}.getType());\n\t\t} else\n\t\t{\n\t\t\treturn new ArrayList\u003cSpriteMarkerID\u003e();\n\t\t}\n\t}\n\n\tprivate ArrayList\u003cSpriteMarker\u003e getSpriteMarkers(ArrayList\u003cSpriteMarkerID\u003e regionSprites)\n\t{\n\t\tif(regionSprites.isEmpty())\n\t\t{\n\t\t\treturn new ArrayList\u003cSpriteMarker\u003e();\n\t\t}\n\t\tArrayList\u003cSpriteMarker\u003e spriteMarkers \u003d new ArrayList\u003cSpriteMarker\u003e();\n\n\t\tfor (SpriteMarkerID spriteMarkerID : regionSprites)\n\t\t{\n\t\t\tWorldPoint worldLoc \u003d WorldPoint.fromRegion(spriteMarkerID.getRegionId(), spriteMarkerID.getRegionX(),\n\t\t\t\t\tspriteMarkerID.getRegionY(), spriteMarkerID.getPlane());\n\n\t\t\tSpriteMarker spriteMarker \u003d new SpriteMarker(spriteMarkerID.getSpriteId(), spriteMarkerID.getScale(), worldLoc);\n\t\t\tspriteMarkers.add(spriteMarker);\n\t\t\tfinal Collection\u003cWorldPoint\u003e localWorldPoints \u003d WorldPoint.toLocalInstance(client, spriteMarker.getWorldPoint());\n\n\t\t\tfor(WorldPoint worldPoint : localWorldPoints)\n\t\t\t{\n\t\t\t\tspriteMarkers.add(new SpriteMarker(spriteMarkerID.getSpriteId(), spriteMarkerID.getScale(), worldPoint));\n\t\t\t}\n\t\t}\n\n\t\treturn spriteMarkers;\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged configChanged)\n\t{\n\t\tif(configChanged.getGroup().equals(CONFIG_GROUP) \u0026\u0026 configChanged.getKey().equals(SpriteMarkersConfig.SHOW_IMPORT))\n\t\t{\n\t\t\tif(config.showImport())\n\t\t\t{\n\t\t\t\timportExportTool.addOptions();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\timportExportTool.removeOptions();\n\t\t\t}\n\t\t}\n\t}\n\n\n\t@Provides\n\tSpriteMarkersConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(SpriteMarkersConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\spritemarkers\\SpriteMarkersPlugin.java"},{"fileName":"TileHighlighterOverlay.java","content":"package com.spritemarkers;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayUtil;\n\nimport javax.inject.Inject;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Polygon;\nimport java.util.ArrayList;\n\npublic class TileHighlighterOverlay extends Overlay\n{\n\n    private final Client client;\n    private final SpriteMarkersPlugin plugin;\n    private final SpriteMarkersConfig config;\n\n    private static final int MAX_TILES \u003d 32;\n\n    @Inject\n    public TileHighlighterOverlay(Client client, SpriteMarkersConfig config, SpriteMarkersPlugin plugin)\n    {\n        this.client \u003d client;\n        this.config \u003d config;\n        this.plugin \u003d plugin;\n        setPosition(OverlayPosition.DYNAMIC);\n        setPriority(OverlayPriority.MED);\n        setLayer(OverlayLayer.ABOVE_SCENE);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics)\n    {\n\n        if(!config.showSprites() || !config.highlightSprites())\n        {\n            return null;\n        }\n\n        final ArrayList\u003cSpriteMarker\u003e spriteMarkers \u003d plugin.getSpriteMarkersLoaded();\n\n        if(spriteMarkers.isEmpty())\n        {\n            return null;\n        }\n\n        for(SpriteMarker spriteMarker : spriteMarkers)\n        {\n            WorldPoint playerLoc \u003d client.getLocalPlayer().getWorldLocation();\n\n            if(playerLoc.distanceTo(spriteMarker.getWorldPoint()) \u003c\u003d MAX_TILES)\n            {\n                WorldPoint worldLoc \u003d spriteMarker.getWorldPoint();\n                LocalPoint localPoint \u003d LocalPoint.fromWorld(client, worldLoc);\n\n                if(localPoint \u003d\u003d null)\n                {\n                    return null;\n                }\n\n                Polygon tilePolygon \u003d Perspective.getCanvasTilePoly(client, localPoint);\n                if(tilePolygon !\u003d null)\n                {\n                    OverlayUtil.renderPolygon(graphics, tilePolygon, Color.WHITE);\n                }\n            }\n        }\n        return null;\n    }\n}\n","filePath":"src\\main\\java\\com\\spritemarkers\\TileHighlighterOverlay.java"},{"fileName":"SpriteMarkers.java","content":"package com.spritemarkers;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class SpriteMarkers\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(SpriteMarkersPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\spritemarkers\\SpriteMarkers.java"}]},{"commit":"9f58304e61b4f2c8e494648d48e0165bbc3b1c1c","repository":"https://github.com/JohnathonNow/runelite-cosmetic-network.git","internalName":"cosmetics","files":[{"fileName":"CosmeticsCache.java","content":"package com.cosmetics;\n\nimport com.google.gson.Gson;\nimport com.google.gson.reflect.TypeToken;\nimport lombok.extern.slf4j.Slf4j;\nimport okhttp3.*;\n\nimport java.io.IOException;\nimport java.net.MalformedURLException;\nimport java.net.URL;\nimport java.util.Arrays;\nimport java.util.HashMap;\nimport java.util.List;\n\n@Slf4j\npublic class CosmeticsCache {\n    private static final String DATABASE_URL \u003d \"https://billiardssketch.fun/cosmetics/\";\n    private static final int TIME_TO_LIVE \u003d 5 * 60 * 1000;\n    private final HashMap\u003cString, CosmeticsData\u003e cache \u003d new HashMap\u003c\u003e();\n    private final OkHttpClient httpClient \u003d new OkHttpClient();\n\n    public void clear() {\n        cache.clear();\n    }\n\n    public CosmeticsPlayer getCosmetics(String username) {\n        if (isValid(username)) {\n            return cache.get(username).getPlayer();\n        } else {\n            return null;\n        }\n    }\n\n    public void save(CosmeticsPlayer p, String apiKey) {\n        synchronized (cache) {\n            cache.put(p.name, new CosmeticsData(System.currentTimeMillis(), p));\n        }\n        httpClient.newCall(buildRequestSave(p, apiKey)).enqueue(new Callback()\n        {\n            @Override\n            public void onFailure(Call call, IOException e)\n            {\n\n            }\n\n            @Override\n            public void onResponse(Call call, Response response)\n            {\n\n            }\n        });\n    }\n\n    public void fillCache(String[] names) {\n        String[] filtered \u003d Arrays.stream(names).filter((x) -\u003e !isValid(x)).toArray(String[]::new);\n        if (filtered.length \u003d\u003d 0) {\n            return;\n        }\n        synchronized (cache) {\n            long time \u003d System.currentTimeMillis();\n            for (String s: filtered) {\n                CosmeticsData cd \u003d cache.get(s);\n                if (cd !\u003d null) {\n                    cd.setFetchedTime(time);\n                } else {\n                    cache.put(s, new CosmeticsData(time, null));\n                }\n            }\n        }\n        httpClient.newCall(buildRequestFetch(filtered)).enqueue(new Callback()\n        {\n            @Override\n            public void onFailure(Call call, IOException e)\n            {\n\n            }\n\n            @Override\n            public void onResponse(Call call, Response response) throws IOException\n            {\n                synchronized (cache) {\n                    Gson gson \u003d new Gson();\n                    long time \u003d System.currentTimeMillis();\n                    List\u003cCosmeticsPlayer\u003e data \u003d gson.fromJson(response.body().string(), new TypeToken\u003cList\u003cCosmeticsPlayer\u003e\u003e() {}.getType());\n                    for (CosmeticsPlayer p: data) {\n                        cache.put(p.name, new CosmeticsData(time, p));\n                    }\n                }\n            }\n        });\n    }\n\n    public boolean isValid(String username) {\n        return cache.containsKey(username) \u0026\u0026 cache.get(username).getFetchedTime() + TIME_TO_LIVE \u003e System.currentTimeMillis();\n    }\n\n    public Request buildRequestFetch(String[] names) {\n        HttpUrl url \u003d null;\n        try {\n            url \u003d HttpUrl.get(new URL(DATABASE_URL)).newBuilder()\n                    .addPathSegment(String.join(\",\", names))\n                    .build();\n        } catch (MalformedURLException e) {\n            e.printStackTrace();\n        }\n\n        return new Request.Builder()\n                .url(url)\n                .build();\n    }\n\n    public Request buildRequestSave(CosmeticsPlayer p, String apiKey) {\n        HttpUrl url \u003d null;\n        try {\n            url \u003d HttpUrl.get(new URL(DATABASE_URL)).newBuilder()\n                    .addPathSegment(apiKey)\n                    .build();\n        } catch (MalformedURLException e) {\n            e.printStackTrace();\n        }\n        MediaType JSON \u003d MediaType.parse(\"application/json; charset\u003dutf-8\");\n        Gson gson \u003d new Gson();\n        String s \u003d gson.toJson(p);\n        RequestBody body \u003d RequestBody.create(JSON, s);\n        log.debug(\"{}\", s);\n        return new Request.Builder()\n                .url(url)\n                .put(body)\n                .build();\n    }\n}\n","filePath":"src\\main\\java\\com\\cosmetics\\CosmeticsCache.java"},{"fileName":"CosmeticsConfig.java","content":"/*\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cosmetics;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"cosmetics\")\npublic interface CosmeticsConfig extends Config\n{\n    @ConfigItem(\n            keyName \u003d \"apiKey\",\n            name \u003d \"API Key\",\n            description \u003d \"If you are a ranked member of the RLCosmetics Chat Channel, fill this with your API Key.\",\n            position \u003d 0\n    )\n    default String apiKey()\n    {\n        return \"\";\n    }\n}","filePath":"src\\main\\java\\com\\cosmetics\\CosmeticsConfig.java"},{"fileName":"CosmeticsData.java","content":"package com.cosmetics;\n\npublic class CosmeticsData {\n    public long getFetchedTime() {\n        return fetchedTime;\n    }\n\n    public void setFetchedTime(long fetchedTime) {\n        this.fetchedTime \u003d fetchedTime;\n    }\n\n    public CosmeticsPlayer getPlayer() {\n        return cp;\n\n    }\n    private long fetchedTime;\n\n\n    public CosmeticsData(long fetchedTime, CosmeticsPlayer cp) {\n        this.fetchedTime \u003d fetchedTime;\n        this.cp \u003d cp;\n    }\n\n    private final CosmeticsPlayer cp;\n}\n","filePath":"src\\main\\java\\com\\cosmetics\\CosmeticsData.java"},{"fileName":"CosmeticsPlayer.java","content":"package com.cosmetics;\n\nimport net.runelite.api.Player;\nimport net.runelite.api.kit.KitType;\n\npublic class CosmeticsPlayer {\n    public String name;\n    public int head;\n    public int body;\n    public int cape;\n    public int legs;\n    public int neck;\n    public int hand;\n    public int ring;\n    public int feet;\n    public int weap;\n    public int shld;\n    public int jaws;\n    public int hair;\n\n    public CosmeticsPlayer(Player p) {\n        int[] equipmentIds \u003d p.getPlayerComposition().getEquipmentIds();\n        name \u003d p.getName();\n        weap \u003d equipmentIds[KitType.WEAPON.getIndex()];\n        shld \u003d equipmentIds[KitType.SHIELD.getIndex()];\n        body \u003d equipmentIds[KitType.TORSO.getIndex()];\n        cape \u003d equipmentIds[KitType.CAPE.getIndex()];\n        legs \u003d equipmentIds[KitType.LEGS.getIndex()];\n        feet \u003d equipmentIds[KitType.BOOTS.getIndex()];\n        neck \u003d equipmentIds[KitType.AMULET.getIndex()];\n        head \u003d equipmentIds[KitType.HEAD.getIndex()];\n        hand \u003d equipmentIds[KitType.HANDS.getIndex()];\n        ring \u003d equipmentIds[KitType.ARMS.getIndex()];\n        jaws \u003d equipmentIds[KitType.JAW.getIndex()];\n        hair \u003d equipmentIds[KitType.HAIR.getIndex()];\n    }\n\n    public void write(int[] equipmentIds) {\n        equipmentIds[KitType.WEAPON.getIndex()] \u003d weap \u003e\u003d 0? weap : equipmentIds[KitType.WEAPON.getIndex()];\n        equipmentIds[KitType.SHIELD.getIndex()] \u003d shld \u003e\u003d 0? shld : equipmentIds[KitType.SHIELD.getIndex()];\n        equipmentIds[KitType.TORSO.getIndex()] \u003d body \u003e\u003d 0? body : equipmentIds[KitType.TORSO.getIndex()];\n        equipmentIds[KitType.CAPE.getIndex()] \u003d cape \u003e\u003d 0? cape : equipmentIds[KitType.CAPE.getIndex()];\n        equipmentIds[KitType.LEGS.getIndex()] \u003d legs \u003e\u003d 0? legs : equipmentIds[KitType.LEGS.getIndex()];\n        equipmentIds[KitType.BOOTS.getIndex()] \u003d feet \u003e\u003d 0? feet : equipmentIds[KitType.BOOTS.getIndex()];\n        equipmentIds[KitType.AMULET.getIndex()] \u003d neck \u003e\u003d 0? neck : equipmentIds[KitType.AMULET.getIndex()];\n        equipmentIds[KitType.HEAD.getIndex()] \u003d head \u003e\u003d 0? head : equipmentIds[KitType.HEAD.getIndex()];\n        equipmentIds[KitType.HANDS.getIndex()] \u003d hand \u003e\u003d 0? hand : equipmentIds[KitType.HANDS.getIndex()];\n        equipmentIds[KitType.ARMS.getIndex()] \u003d ring \u003e\u003d 0? ring : equipmentIds[KitType.ARMS.getIndex()];\n        equipmentIds[KitType.JAW.getIndex()] \u003d jaws \u003e\u003d 0? jaws : equipmentIds[KitType.JAW.getIndex()];\n        equipmentIds[KitType.HAIR.getIndex()] \u003d hair \u003e\u003d 0? hair : equipmentIds[KitType.HAIR.getIndex()];\n\n    }\n\n}\n\n","filePath":"src\\main\\java\\com\\cosmetics\\CosmeticsPlayer.java"},{"fileName":"CosmeticsPlugin.java","content":"/*\n * Copyright (c) 2021, JohnathonNow \u003cjohnjwesthoff@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cosmetics;\n\nimport com.google.inject.Provides;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.PlayerChanged;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\n\nimport javax.inject.Inject;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.HashMap;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Cosmetics\",\n\tdescription \u003d \"Allows users to customize their appearance\",\n\ttags \u003d {\"cosmetics\", \"players\"}\n)\npublic class CosmeticsPlugin extends Plugin {\n\tpublic static String CHAT_COMMAND \u003d \"!cosmetics\";\n\tprivate final int FREQUENCY \u003d 3;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate CosmeticsConfig config;\n\n\t@Provides\n\tCosmeticsConfig getConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(CosmeticsConfig.class);\n\t}\n\n\n\tprivate boolean isPvp \u003d false;\n\tprivate boolean wasPvp \u003d false;\n\tprivate boolean enabled \u003d false;\n\tprivate final CosmeticsCache cache \u003d new CosmeticsCache();\n\n\tprivate final HashMap\u003cString, int[]\u003e preTransform \u003d new HashMap\u003c\u003e();\n\tprivate final HashMap\u003cString, int[]\u003e postTransform \u003d new HashMap\u003c\u003e();\n\tprivate int timer \u003d 0;\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\tenabled \u003d true;\n\t\tprocess();\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage event) {\n\t\tif (enabled \u0026\u0026 event.getMessage().toLowerCase().startsWith(CHAT_COMMAND) \u0026\u0026 !config.apiKey().isEmpty()) {\n\t\t\tfor (Player p : client.getPlayers()) {\n\t\t\t\tif (p.getName()!\u003d null \u0026\u0026 p.getName().equals(event.getName())) {\n\t\t\t\t\twipe(p.getName(), p.getPlayerComposition().getEquipmentIds());\n\t\t\t\t\tcache.save(new CosmeticsPlayer(p), config.apiKey());\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\tenabled \u003d false;\n\t\tprocess();\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick gt)\n\t{\n\t\ttimer++;\n\t\tif ((isPvp \u003d\u003d wasPvp \u0026\u0026 timer \u003c FREQUENCY) || !enabled) {\n\t\t\treturn;\n\t\t}\n\t\ttimer \u003d 0;\n\t\tprocess();\n\t\tcache.clear();\n\t}\n\n\tprivate void wipe(String name, int[] equipmentIds) {\n\t\tif (postTransform.containsKey(name) \u0026\u0026 !Arrays.equals(postTransform.get(name), equipmentIds)) {\n\t\t\tpreTransform.put(name, equipmentIds.clone());\n\t\t}\n\t\tint[] newIds \u003d preTransform.get(name);\n\t\tSystem.arraycopy(newIds, 0, equipmentIds, 0, newIds.length);\n\t}\n\n\tprivate void process() {\n\t\ttry {\n\t\t\tArrayList\u003cString\u003e allNames \u003d new ArrayList\u003c\u003e();\n\t\t\tfor (Player player : client.getPlayers()) {\n\t\t\t\tallNames.add(player.getName());\n\t\t\t\tPlayerComposition comp \u003d player.getPlayerComposition();\n\t\t\t\tint[] equipmentIds \u003d comp.getEquipmentIds();\n\t\t\t\tString name \u003d player.getName();\n\t\t\t\tif (!preTransform.containsKey(name)) {\n\t\t\t\t\tpreTransform.put(name, equipmentIds.clone());\n\t\t\t\t}\n\t\t\t\tif (isPvp || !enabled) {\n\t\t\t\t\t//in PvP we should _not_ show cosmetics\n\t\t\t\t\twipe(name, equipmentIds);\n\t\t\t\t} else {\n\t\t\t\t\tif (postTransform.containsKey(name) \u0026\u0026 !Arrays.equals(postTransform.get(name), equipmentIds)) {\n\t\t\t\t\t\tpreTransform.put(name, equipmentIds.clone());\n\t\t\t\t\t}\n\t\t\t\t\tCosmeticsPlayer p \u003d cache.getCosmetics(player.getName());\n\t\t\t\t\tif (p !\u003d null) {\n\t\t\t\t\t\tp.write(equipmentIds);\n\t\t\t\t\t}\n\t\t\t\t\tpostTransform.put(name, equipmentIds.clone());\n\t\t\t\t}\n\t\t\t\tcomp.setHash();\n\t\t\t}\n\t\t\tcache.fillCache(allNames.toArray(new String[0]));\n\t\t}\n\t\tcatch (Exception e) {\n\t\t\tlog.debug(\"Sad: \" + e.toString());\n\t\t\te.printStackTrace();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onVarbitChanged(VarbitChanged event) {\n\t\twasPvp \u003d isPvp;\n\t\tisPvp \u003d client.getVar(Varbits.PVP_SPEC_ORB) !\u003d 0;\n\t}\n\n\t@Subscribe\n\tpublic void onPlayerChanged(PlayerChanged event) {\n\t\ttimer \u003d FREQUENCY;\n\t}\n}\n","filePath":"src\\main\\java\\com\\cosmetics\\CosmeticsPlugin.java"},{"fileName":"CosmeticsPluginTest.java","content":"package com.cosmetics;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class CosmeticsPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(CosmeticsPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\cosmetics\\CosmeticsPluginTest.java"}]},{"commit":"d936ddff4ecf6455f2df0302c9234106cd29febd","repository":"https://github.com/marknewan/newan-plugins.git","internalName":"demonic-larva-tracker","files":[{"fileName":"AttackStyle.java","content":"/*\n * Copyright (c) 2017, honeyhoney \u003chttps://github.com/honeyhoney\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.demoniclarvatracker;\n\nenum AttackStyle\n{\n\tACCURATE,\n\tAGGRESSIVE,\n\tDEFENSIVE,\n\tCONTROLLED,\n\tRANGING,\n\tLONGRANGE,\n\tCASTING,\n\tDEFENSIVE_CASTING,\n\tOTHER;\n}\n","filePath":"src\\main\\java\\com\\demoniclarvatracker\\AttackStyle.java"},{"fileName":"DemonicLarvaTrackerConfig.java","content":"package com.demoniclarvatracker;\n\nimport java.awt.Color;\nimport net.runelite.client.config.Alpha;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\nimport net.runelite.client.config.Range;\nimport net.runelite.client.config.Units;\nimport net.runelite.client.util.ColorUtil;\n\n@ConfigGroup(DemonicLarvaTrackerConfig.CONFIG_GROUP)\npublic interface DemonicLarvaTrackerConfig extends Config\n{\n\tString CONFIG_GROUP \u003d \"demoniclarvatracker\";\n\n\t@ConfigSection(\n\t\tname \u003d \"General\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 0,\n\t\tclosedByDefault \u003d true\n\t)\n\tString SECTION_GENERAL \u003d \"general\";\n\n\t@ConfigSection(\n\t\tname \u003d \"Highlights\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 1,\n\t\tclosedByDefault \u003d true\n\t)\n\tString SECTION_HIGHLIGHTS \u003d \"highlights\";\n\n\t@ConfigSection(\n\t\tname \u003d \"Base Larva\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 2,\n\t\tclosedByDefault \u003d true\n\t)\n\tString SECTION_BASE_LARVA \u003d \"baseLarva\";\n\n\t@ConfigSection(\n\t\tname \u003d \"Melee Larva\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 3,\n\t\tclosedByDefault \u003d true\n\t)\n\tString SECTION_MELEE_LARVA \u003d \"meleeLarva\";\n\n\t@ConfigSection(\n\t\tname \u003d \"Range Larva\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 4,\n\t\tclosedByDefault \u003d true\n\t)\n\tString SECTION_RANGE_LARVA \u003d \"rangeLarva\";\n\n\t@ConfigSection(\n\t\tname \u003d \"Magic Larva\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 5,\n\t\tclosedByDefault \u003d true\n\t)\n\tString SECTION_MAGIC_LARVA \u003d \"magicLarva\";\n\n\t@ConfigSection(\n\t\tname \u003d \"Advanced\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 6,\n\t\tclosedByDefault \u003d true\n\t)\n\tString SECTION_ADVANCED \u003d \"advanced\";\n\n\t// General\n\n\t@ConfigItem(\n\t\tname \u003d \"Death Prediction\",\n\t\tdescription \u003d \"Hide larva predicted to die.\",\n\t\tposition \u003d 0,\n\t\tkeyName \u003d \"hideDeadLarva\",\n\t\tsection \u003d SECTION_GENERAL\n\t)\n\tdefault boolean hideDeadLarva()\n\t{\n\t\treturn true;\n\t}\n\n\t@Units(value \u003d \"ms\")\n\t@ConfigItem(\n\t\tname \u003d \"Death Lag Protection\",\n\t\tdescription \u003d \"Unhide larva after a lag spike.\",\n\t\tposition \u003d 1,\n\t\tkeyName \u003d \"lagProtectionThreshold\",\n\t\tsection \u003d SECTION_GENERAL\n\t)\n\tdefault int lagProtectionThreshold()\n\t{\n\t\treturn 1000;\n\t}\n\n\t@ConfigItem(\n\t\tname \u003d \"Print Lag Messages\",\n\t\tdescription \u003d \"Print to chat when a lag spike is encountered.\" +\n\t\t\t\"\u003cbr\u003eIncrease the lag protection if you see these messages a lot.\",\n\t\tposition \u003d 2,\n\t\tkeyName \u003d \"printLagMessages\",\n\t\tsection \u003d SECTION_GENERAL\n\t)\n\tdefault boolean printLagMessages()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tname \u003d \"Hide Larva Overheads\",\n\t\tdescription \u003d \"Hide larva overheads.\" +\n\t\t\t\"\u003cbr\u003eOnly applies to range, melee, and magic larvae.\",\n\t\tposition \u003d 3,\n\t\tkeyName \u003d \"hideLarvaOverheads\",\n\t\tsection \u003d SECTION_GENERAL\n\t)\n\tdefault boolean hideLarvaOverheads()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tname \u003d \"Recolor Larva Menu Entries\",\n\t\tdescription \u003d \"Recolor menu entries for larva npcs.\",\n\t\tposition \u003d 4,\n\t\tkeyName \u003d \"recolorLarvaMenuEntries\",\n\t\tsection \u003d SECTION_GENERAL\n\t)\n\tdefault boolean recolorLarvaMenuEntries()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tname \u003d \"Remove Spawn Animation\",\n\t\tdescription \u003d \"Remove the spawn animation from larvas.\",\n\t\tposition \u003d 5,\n\t\tkeyName \u003d \"removeSpawnAnimation\",\n\t\tsection \u003d SECTION_GENERAL\n\t)\n\tdefault boolean removeSpawnAnimation()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tname \u003d \"Infobox Larva Counter\",\n\t\tdescription \u003d \"Displays a counter of how many larva have been absorbed.\" +\n\t\t\t\"\u003cbr\u003eOnly displayed when there is at least 1 demonic charge.\",\n\t\tposition \u003d 6,\n\t\tkeyName \u003d \"infoboxLarvaCounter\",\n\t\tsection \u003d SECTION_GENERAL\n\t)\n\tdefault boolean infoboxLarvaCounter()\n\t{\n\t\treturn true;\n\t}\n\n\t// Highlights\n\n\t// Highlight Outline\n\n\t@ConfigItem(\n\t\tname \u003d \"Highlight Outline\",\n\t\tdescription \u003d \"Highlight outline of larva npcs.\",\n\t\tposition \u003d 0,\n\t\tkeyName \u003d \"highlightOutline\",\n\t\tsection \u003d SECTION_HIGHLIGHTS\n\t)\n\tdefault boolean highlightOutline()\n\t{\n\t\treturn false;\n\t}\n\n\t@Range(max \u003d 50)\n\t@ConfigItem(\n\t\tname \u003d \"Width\",\n\t\tdescription \u003d \"Width of highlight outline.\",\n\t\tposition \u003d 1,\n\t\tkeyName \u003d \"highlightOutlineWidth\",\n\t\tsection \u003d SECTION_HIGHLIGHTS\n\t)\n\tdefault int highlightOutlineWidth()\n\t{\n\t\treturn 1;\n\t}\n\n\t@Range(max \u003d 4)\n\t@ConfigItem(\n\t\tname \u003d \"Feather\",\n\t\tdescription \u003d \"Feather of highlight outline.\",\n\t\tposition \u003d 2,\n\t\tkeyName \u003d \"highlightOutlineFeather\",\n\t\tsection \u003d SECTION_HIGHLIGHTS\n\t)\n\tdefault int highlightOutlineFeather()\n\t{\n\t\treturn 1;\n\t}\n\n\t// Highlight Tile\n\n\t@ConfigItem(\n\t\tname \u003d \"Highlight Tile Outline\",\n\t\tdescription \u003d \"Highlight tile outline of larva npcs.\",\n\t\tposition \u003d 3,\n\t\tkeyName \u003d \"highlightTileOutline\",\n\t\tsection \u003d SECTION_HIGHLIGHTS\n\t)\n\tdefault boolean highlightTileOutline()\n\t{\n\t\treturn false;\n\t}\n\n\t@Range(max \u003d 5)\n\t@ConfigItem(\n\t\tname \u003d \"Width\",\n\t\tdescription \u003d \"Width of highlight tile outline.\",\n\t\tposition \u003d 4,\n\t\tkeyName \u003d \"highlightTileOutlineWidth\",\n\t\tsection \u003d SECTION_HIGHLIGHTS\n\t)\n\tdefault double highlightTileOutlineWidth()\n\t{\n\t\treturn 1;\n\t}\n\n\t@ConfigItem(\n\t\tname \u003d \"Highlight Tile Fill\",\n\t\tdescription \u003d \"Highlight tile fill of larva npcs.\",\n\t\tposition \u003d 5,\n\t\tkeyName \u003d \"highlightTileFill\",\n\t\tsection \u003d SECTION_HIGHLIGHTS\n\t)\n\tdefault boolean highlightTileFill()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tname \u003d \"Tile Mode\",\n\t\tdescription \u003d \"Highlight tile mode of larva npcs.\",\n\t\tposition \u003d 6,\n\t\tkeyName \u003d \"highlightTileMode\",\n\t\tsection \u003d SECTION_HIGHLIGHTS\n\t)\n\tdefault TileMode highlightTileMode()\n\t{\n\t\treturn TileMode.TRUE_TILE;\n\t}\n\n\t// Highlight Hull\n\n\t@ConfigItem(\n\t\tname \u003d \"Highlight Hull Outline\",\n\t\tdescription \u003d \"Highlight hull outline of larva npcs.\",\n\t\tposition \u003d 7,\n\t\tkeyName \u003d \"highlightHullOutline\",\n\t\tsection \u003d SECTION_HIGHLIGHTS\n\t)\n\tdefault boolean highlightHullOutline()\n\t{\n\t\treturn false;\n\t}\n\n\t@Range(max \u003d 50)\n\t@ConfigItem(\n\t\tname \u003d \"Width\",\n\t\tdescription \u003d \"Width of highlight hull outline.\",\n\t\tposition \u003d 8,\n\t\tkeyName \u003d \"highlightHullWidth\",\n\t\tsection \u003d SECTION_HIGHLIGHTS\n\t)\n\tdefault double highlightHullWidth()\n\t{\n\t\treturn 1;\n\t}\n\n\t@ConfigItem(\n\t\tname \u003d \"Highlight Hull Fill\",\n\t\tdescription \u003d \"Highlight hull fill of larva npcs.\",\n\t\tposition \u003d 9,\n\t\tkeyName \u003d \"highlightHullFill\",\n\t\tsection \u003d SECTION_HIGHLIGHTS\n\t)\n\tdefault boolean highlightHullFill()\n\t{\n\t\treturn false;\n\t}\n\n\t// Highlight Clickbox\n\n\t@ConfigItem(\n\t\tname \u003d \"Highlight Clickbox Outline\",\n\t\tdescription \u003d \"Highlight clickbox outline of larva npcs.\",\n\t\tposition \u003d 10,\n\t\tkeyName \u003d \"highlightClickBoxOutline\",\n\t\tsection \u003d SECTION_HIGHLIGHTS\n\t)\n\tdefault boolean highlightClickBoxOutline()\n\t{\n\t\treturn false;\n\t}\n\n\t@Range(max \u003d 50)\n\t@ConfigItem(\n\t\tname \u003d \"Width\",\n\t\tdescription \u003d \"Width of highlight clickbox outline.\",\n\t\tposition \u003d 11,\n\t\tkeyName \u003d \"highlightClickBoxWidth\",\n\t\tsection \u003d SECTION_HIGHLIGHTS\n\t)\n\tdefault double highlightClickBoxWidth()\n\t{\n\t\treturn 1;\n\t}\n\n\t@ConfigItem(\n\t\tname \u003d \"Highlight Clickbox Fill\",\n\t\tdescription \u003d \"Highlight clickbox fill of larva npcs.\",\n\t\tposition \u003d 12,\n\t\tkeyName \u003d \"highlightClickBoxFill\",\n\t\tsection \u003d SECTION_HIGHLIGHTS\n\t)\n\tdefault boolean highlightClickBoxFill()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tname \u003d \"Clickbox Mouseover\",\n\t\tdescription \u003d \"Darken color of the clickbox on mouseover.\",\n\t\tposition \u003d 13,\n\t\tkeyName \u003d \"highlightClickboxMouseover\",\n\t\tsection \u003d SECTION_HIGHLIGHTS\n\t)\n\tdefault boolean highlightClickboxMouseover()\n\t{\n\t\treturn false;\n\t}\n\n\t// Highlight Minimap\n\n\t@ConfigItem(\n\t\tname \u003d \"Highlight Minimap\",\n\t\tdescription \u003d \"Highlight minimap location of larva npcs.\",\n\t\tposition \u003d 14,\n\t\tkeyName \u003d \"highlightMinimap\",\n\t\tsection \u003d SECTION_HIGHLIGHTS\n\t)\n\tdefault boolean highlightMinimap()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tname \u003d \"Name Labels\",\n\t\tdescription \u003d \"Draw names above larva npcs.\" +\n\t\t\t\"\u003cbr\u003eOnly applies to range, melee, and magic larvae.\",\n\t\tposition \u003d 15,\n\t\tkeyName \u003d \"highlightNameLabel\",\n\t\tsection \u003d SECTION_HIGHLIGHTS\n\t)\n\tdefault boolean highlightNameLabel()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tname \u003d \"Anti-aliasing\",\n\t\tdescription \u003d \"Smooths out edges of outlines.\" +\n\t\t\t\"\u003cbr\u003eReduces \u0027jagged\u0027 or \u0027stair-step\u0027 appearance that can occur.\",\n\t\tposition \u003d 16,\n\t\tkeyName \u003d \"antiAliasing\",\n\t\tsection \u003d SECTION_HIGHLIGHTS\n\t)\n\tdefault boolean antiAliasing()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tname \u003d \"Hide Highlights On Death\",\n\t\tdescription \u003d \"Hides the highlighting of dead npcs.\",\n\t\tposition \u003d 17,\n\t\tkeyName \u003d \"hideHighlightOnDeath\",\n\t\tsection \u003d SECTION_HIGHLIGHTS\n\t)\n\tdefault boolean hideHighlightOnDeath()\n\t{\n\t\treturn true;\n\t}\n\n\t// Colors\n\n\t// Base Colors\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Outline\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 0,\n\t\tkeyName \u003d \"colorOutlineBase\",\n\t\tsection \u003d SECTION_BASE_LARVA\n\t)\n\tdefault Color colorOutlineBase()\n\t{\n\t\treturn Color.WHITE;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Tile Outline\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 1,\n\t\tkeyName \u003d \"colorTileOutlineBase\",\n\t\tsection \u003d SECTION_BASE_LARVA\n\t)\n\tdefault Color colorTileOutlineBase()\n\t{\n\t\treturn Color.WHITE;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Tile Fill\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 2,\n\t\tkeyName \u003d \"colorTileFillBase\",\n\t\tsection \u003d SECTION_BASE_LARVA\n\t)\n\tdefault Color colorTileFillBase()\n\t{\n\t\treturn ColorUtil.colorWithAlpha(Color.WHITE, 32);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Hull Outline\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 3,\n\t\tkeyName \u003d \"colorHullOutlineBase\",\n\t\tsection \u003d SECTION_BASE_LARVA\n\t)\n\tdefault Color colorHullOutlineBase()\n\t{\n\t\treturn Color.WHITE;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Hull Fill\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 4,\n\t\tkeyName \u003d \"colorHullFillBase\",\n\t\tsection \u003d SECTION_BASE_LARVA\n\t)\n\tdefault Color colorHullFillBase()\n\t{\n\t\treturn ColorUtil.colorWithAlpha(Color.WHITE, 16);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Clickbox Outline\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 5,\n\t\tkeyName \u003d \"colorClickBoxOutlineBase\",\n\t\tsection \u003d SECTION_BASE_LARVA\n\t)\n\tdefault Color colorClickBoxOutlineBase()\n\t{\n\t\treturn Color.WHITE;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Clickbox Fill\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 6,\n\t\tkeyName \u003d \"colorClickBoxFillBase\",\n\t\tsection \u003d SECTION_BASE_LARVA\n\t)\n\tdefault Color colorClickBoxFillBase()\n\t{\n\t\treturn ColorUtil.colorWithAlpha(Color.WHITE, 16);\n\t}\n\n\t@ConfigItem(\n\t\tname \u003d \"Menu Entry\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 7,\n\t\tkeyName \u003d \"colorMenuBase\",\n\t\tsection \u003d SECTION_BASE_LARVA\n\t)\n\tdefault Color colorMenuBase()\n\t{\n\t\treturn Color.WHITE;\n\t}\n\n\t// Melee Colors\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Outline\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 0,\n\t\tkeyName \u003d \"colorOutlineMelee\",\n\t\tsection \u003d SECTION_MELEE_LARVA\n\t)\n\tdefault Color colorOutlineMelee()\n\t{\n\t\treturn Color.RED;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Tile Outline\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 1,\n\t\tkeyName \u003d \"colorTileOutlineMelee\",\n\t\tsection \u003d SECTION_MELEE_LARVA\n\t)\n\tdefault Color colorTileOutlineMelee()\n\t{\n\t\treturn Color.RED;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Tile Fill\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 2,\n\t\tkeyName \u003d \"colorTileFillMelee\",\n\t\tsection \u003d SECTION_MELEE_LARVA\n\t)\n\tdefault Color colorTileFillMelee()\n\t{\n\t\treturn ColorUtil.colorWithAlpha(Color.RED, 32);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Hull Outline\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 3,\n\t\tkeyName \u003d \"colorHullOutlineMelee\",\n\t\tsection \u003d SECTION_MELEE_LARVA\n\t)\n\tdefault Color colorHullOutlineMelee()\n\t{\n\t\treturn Color.RED;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Hull Fill\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 4,\n\t\tkeyName \u003d \"colorHullFillMelee\",\n\t\tsection \u003d SECTION_MELEE_LARVA\n\t)\n\tdefault Color colorHullFillMelee()\n\t{\n\t\treturn ColorUtil.colorWithAlpha(Color.RED, 16);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Clickbox Outline\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 5,\n\t\tkeyName \u003d \"colorClickBoxOutlineMelee\",\n\t\tsection \u003d SECTION_MELEE_LARVA\n\t)\n\tdefault Color colorClickBoxOutlineMelee()\n\t{\n\t\treturn Color.RED;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Clickbox Fill\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 6,\n\t\tkeyName \u003d \"colorClickBoxFillMelee\",\n\t\tsection \u003d SECTION_MELEE_LARVA\n\t)\n\tdefault Color colorClickBoxFillMelee()\n\t{\n\t\treturn ColorUtil.colorWithAlpha(Color.RED, 16);\n\t}\n\n\t@ConfigItem(\n\t\tname \u003d \"Menu Entry\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 7,\n\t\tkeyName \u003d \"colorMenuMelee\",\n\t\tsection \u003d SECTION_MELEE_LARVA\n\t)\n\tdefault Color colorMenuMelee()\n\t{\n\t\treturn Color.RED;\n\t}\n\n\t@ConfigItem(\n\t\tname \u003d \"Name Label\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 8,\n\t\tkeyName \u003d \"nameLabelMelee\",\n\t\tsection \u003d SECTION_MELEE_LARVA\n\t)\n\tdefault String nameLabelMelee()\n\t{\n\t\treturn \"Melee\";\n\t}\n\n\t// Range Colors\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Outline\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 0,\n\t\tkeyName \u003d \"colorOutlineRange\",\n\t\tsection \u003d SECTION_RANGE_LARVA\n\t)\n\tdefault Color colorOutlineRange()\n\t{\n\t\treturn Color.GREEN;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Tile Outline\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 1,\n\t\tkeyName \u003d \"colorTileOutlineRange\",\n\t\tsection \u003d SECTION_RANGE_LARVA\n\t)\n\tdefault Color colorTileOutlineRange()\n\t{\n\t\treturn Color.GREEN;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Tile Fill\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 2,\n\t\tkeyName \u003d \"colorTileFillRange\",\n\t\tsection \u003d SECTION_RANGE_LARVA\n\t)\n\tdefault Color colorTileFillRange()\n\t{\n\t\treturn ColorUtil.colorWithAlpha(Color.GREEN, 32);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Hull Outline\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 3,\n\t\tkeyName \u003d \"colorHullOutlineRange\",\n\t\tsection \u003d SECTION_RANGE_LARVA\n\t)\n\tdefault Color colorHullOutlineRange()\n\t{\n\t\treturn Color.GREEN;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Hull Fill\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 4,\n\t\tkeyName \u003d \"colorHullFillRange\",\n\t\tsection \u003d SECTION_RANGE_LARVA\n\t)\n\tdefault Color colorHullFillRange()\n\t{\n\t\treturn ColorUtil.colorWithAlpha(Color.GREEN, 16);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Clickbox Outline\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 5,\n\t\tkeyName \u003d \"colorClickBoxOutlineRange\",\n\t\tsection \u003d SECTION_RANGE_LARVA\n\t)\n\tdefault Color colorClickBoxOutlineRange()\n\t{\n\t\treturn Color.GREEN;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Clickbox Fill\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 6,\n\t\tkeyName \u003d \"colorClickBoxFillRange\",\n\t\tsection \u003d SECTION_RANGE_LARVA\n\t)\n\tdefault Color colorClickBoxFillRange()\n\t{\n\t\treturn ColorUtil.colorWithAlpha(Color.GREEN, 16);\n\t}\n\n\t@ConfigItem(\n\t\tname \u003d \"Menu Entry\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 7,\n\t\tkeyName \u003d \"colorMenuRange\",\n\t\tsection \u003d SECTION_RANGE_LARVA\n\t)\n\tdefault Color colorMenuRange()\n\t{\n\t\treturn Color.GREEN;\n\t}\n\n\t@ConfigItem(\n\t\tname \u003d \"Name Label\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 8,\n\t\tkeyName \u003d \"nameLabelRange\",\n\t\tsection \u003d SECTION_RANGE_LARVA\n\t)\n\tdefault String nameLabelRange()\n\t{\n\t\treturn \"Range\";\n\t}\n\n\t// Magic Colors\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Outline\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 0,\n\t\tkeyName \u003d \"colorOutlineMagic\",\n\t\tsection \u003d SECTION_MAGIC_LARVA\n\t)\n\tdefault Color colorOutlineMagic()\n\t{\n\t\treturn Color.BLUE;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Tile Outline\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 1,\n\t\tkeyName \u003d \"colorTileOutlineMagic\",\n\t\tsection \u003d SECTION_MAGIC_LARVA\n\t)\n\tdefault Color colorTileOutlineMagic()\n\t{\n\t\treturn Color.BLUE;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Tile Fill\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 2,\n\t\tkeyName \u003d \"colorTileFillMagic\",\n\t\tsection \u003d SECTION_MAGIC_LARVA\n\t)\n\tdefault Color colorTileFillMagic()\n\t{\n\t\treturn ColorUtil.colorWithAlpha(Color.BLUE, 32);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Hull Outline\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 3,\n\t\tkeyName \u003d \"colorHullOutlineMagic\",\n\t\tsection \u003d SECTION_MAGIC_LARVA\n\t)\n\tdefault Color colorHullOutlineMagic()\n\t{\n\t\treturn Color.BLUE;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Hull Fill\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 4,\n\t\tkeyName \u003d \"colorHullFillMagic\",\n\t\tsection \u003d SECTION_MAGIC_LARVA\n\t)\n\tdefault Color colorHullFillMagic()\n\t{\n\t\treturn ColorUtil.colorWithAlpha(Color.BLUE, 16);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Clickbox Outline\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 5,\n\t\tkeyName \u003d \"colorClickBoxOutlineMagic\",\n\t\tsection \u003d SECTION_MAGIC_LARVA\n\t)\n\tdefault Color colorClickBoxOutlineMagic()\n\t{\n\t\treturn Color.BLUE;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tname \u003d \"Clickbox Fill\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 6,\n\t\tkeyName \u003d \"colorClickBoxFillMagic\",\n\t\tsection \u003d SECTION_MAGIC_LARVA\n\t)\n\tdefault Color colorClickBoxFillMagic()\n\t{\n\t\treturn ColorUtil.colorWithAlpha(Color.BLUE, 16);\n\t}\n\n\t@ConfigItem(\n\t\tname \u003d \"Menu Entry\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 7,\n\t\tkeyName \u003d \"colorMenuMagic\",\n\t\tsection \u003d SECTION_MAGIC_LARVA\n\t)\n\tdefault Color colorMenuMagic()\n\t{\n\t\treturn Color.BLUE;\n\t}\n\n\t@ConfigItem(\n\t\tname \u003d \"Name Label\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 8,\n\t\tkeyName \u003d \"nameLabelMagic\",\n\t\tsection \u003d SECTION_MAGIC_LARVA\n\t)\n\tdefault String nameLabelMagic()\n\t{\n\t\treturn \"Mage\";\n\t}\n\n\t// Advanced\n\n\t@Range(min \u003d 2, max \u003d 10)\n\t@ConfigItem(\n\t\tname \u003d \"Death Tick-timeout\",\n\t\tdescription \u003d \"Failsafe timeout that unhides npcs after a # of ticks.\" +\n\t\t\t\"\u003cbr\u003eDefault value \u003d 2.\" +\n\t\t\t\"\u003cbr\u003eA sufficiently high value effectively disables the failsafe.\",\n\t\tposition \u003d 0,\n\t\tkeyName \u003d \"deathTickTimeout\",\n\t\tsection \u003d SECTION_ADVANCED\n\t)\n\tdefault int deathTickTimeout()\n\t{\n\t\treturn 2;\n\t}\n}\n","filePath":"src\\main\\java\\com\\demoniclarvatracker\\DemonicLarvaTrackerConfig.java"},{"fileName":"DemonicLarvaTrackerPlugin.java","content":"/*\n * Copyright (c) 2025, marknewan \u003chttp://github.com/marknewan\u003e\n * Copyright (c) 2023, Buchus \u003chttp://github.com/MoreBuchus\u003e\n * Copyright (c) 2017, honeyhoney \u003chttps://github.com/honeyhoney\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.demoniclarvatracker;\n\nimport com.google.inject.Provides;\nimport java.awt.Color;\nimport java.util.Arrays;\nimport java.util.EnumMap;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Set;\nimport javax.annotation.Nullable;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.EnumID;\nimport net.runelite.api.GameState;\nimport net.runelite.api.Hitsplat;\nimport net.runelite.api.NPC;\nimport net.runelite.api.ParamID;\nimport net.runelite.api.Renderable;\nimport net.runelite.api.Skill;\nimport net.runelite.api.StructComposition;\nimport net.runelite.api.events.ActorDeath;\nimport net.runelite.api.events.FakeXpDrop;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.GraphicChanged;\nimport net.runelite.api.events.HitsplatApplied;\nimport net.runelite.api.events.InteractingChanged;\nimport net.runelite.api.events.MenuEntryAdded;\nimport net.runelite.api.events.NpcDespawned;\nimport net.runelite.api.events.NpcSpawned;\nimport net.runelite.api.events.StatChanged;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.api.gameval.AnimationID;\nimport net.runelite.api.gameval.NpcID;\nimport net.runelite.api.gameval.SpriteID;\nimport net.runelite.api.gameval.VarPlayerID;\nimport net.runelite.api.gameval.VarbitID;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.callback.Hooks;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.game.SpriteManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.ui.overlay.infobox.Counter;\nimport net.runelite.client.ui.overlay.infobox.InfoBoxManager;\nimport net.runelite.client.util.ColorUtil;\n\n@Slf4j\n@Singleton\n@PluginDescriptor(\n\tname \u003d \"Demonic Larva Tracker\",\n\tdescription \u003d \"Tracks demonic larva at Doom of Mokhaiotl.\",\n\ttags \u003d {\"doom\", \"mokhaiotl\", \"demonic\", \"larva\", \"grub\", \"tracker\", \"delve\"}\n)\npublic class DemonicLarvaTrackerPlugin extends Plugin\n{\n\tprivate static final Set\u003cInteger\u003e REGION_IDS \u003d Set.of(5269, 13668, 14180);\n\tprivate static final AttackStyle[] ATTACK_STYLES_POWERED_STAVE \u003d new AttackStyle[]{\n\t\tAttackStyle.CASTING, AttackStyle.CASTING, null, AttackStyle.DEFENSIVE, null, null\n\t};\n\n\t@Inject\n\tprivate Client client;\n\t@Inject\n\tprivate ClientThread clientThread;\n\t@Inject\n\tprivate Hooks hooks;\n\t@Inject\n\tprivate DemonicLarvaTrackerConfig config;\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\t@Inject\n\tprivate SceneOverlay sceneOverlay;\n\t@Inject\n\tprivate WidgetOverlay widgetOverlay;\n\t@Inject\n\tprivate InfoBoxManager infoBoxManager;\n\t@Inject\n\tprivate SpriteManager spriteManager;\n\n\tprivate final Hooks.RenderableDrawListener drawListener \u003d this::shouldDraw;\n\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate final Map\u003cNPC, Larva\u003e larvae \u003d new HashMap\u003c\u003e();\n\n\tprivate final Map\u003cLarva, Hitsplat\u003e larvaHitsplats \u003d new HashMap\u003c\u003e();\n\tprivate final Map\u003cSkill, Integer\u003e realXpDrops \u003d new EnumMap\u003c\u003e(Skill.class);\n\tprivate final Map\u003cSkill, Integer\u003e fakeXpDrops \u003d new EnumMap\u003c\u003e(Skill.class);\n\n\tprivate final int[] previousSkillXp \u003d new int[Skill.values().length];\n\n\t@Nullable\n\tprivate NPC interactingNpc;\n\t@Nullable\n\tprivate AttackStyle attackStyle;\n\t@Nullable\n\tprivate Counter counter;\n\n\tprivate long lastTickNano;\n\n\tprivate boolean enabled;\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\tclientThread.invokeLater(() -\u003e {\n\t\t\tif (client.getGameState() \u003d\u003d GameState.LOGGED_IN \u0026\u0026 inRegion())\n\t\t\t{\n\t\t\t\tinit();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate void init()\n\t{\n\t\tassert client.isClientThread();\n\n\t\tenabled \u003d true;\n\n\t\thooks.registerRenderableDrawListener(drawListener);\n\n\t\toverlayManager.add(sceneOverlay);\n\t\toverlayManager.add(widgetOverlay);\n\n\t\tsetCounter();\n\n\t\tinitAttackStyles();\n\t\tSystem.arraycopy(client.getSkillExperiences(), 0, previousSkillXp, 0, previousSkillXp.length);\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\tenabled \u003d false;\n\n\t\thooks.unregisterRenderableDrawListener(drawListener);\n\n\t\toverlayManager.remove(sceneOverlay);\n\t\toverlayManager.remove(widgetOverlay);\n\n\t\tinfoBoxManager.removeInfoBox(counter);\n\n\t\tlarvae.clear();\n\t\tlarvaHitsplats.clear();\n\t\trealXpDrops.clear();\n\t\tfakeXpDrops.clear();\n\n\t\tArrays.fill(previousSkillXp, 0);\n\n\t\tinteractingNpc \u003d null;\n\t\tattackStyle \u003d null;\n\t\tcounter \u003d null;\n\n\t\tlastTickNano \u003d 0;\n\t}\n\n\t@Provides\n\tDemonicLarvaTrackerConfig provideConfig(final ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(DemonicLarvaTrackerConfig.class);\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(final GameStateChanged event)\n\t{\n\t\tswitch (event.getGameState())\n\t\t{\n\t\t\tcase LOGGED_IN:\n\t\t\t\tif (inRegion())\n\t\t\t\t{\n\t\t\t\t\tif (!enabled)\n\t\t\t\t\t{\n\t\t\t\t\t\tinit();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (enabled)\n\t\t\t\t\t{\n\t\t\t\t\t\tshutDown();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase HOPPING:\n\t\t\tcase LOGIN_SCREEN:\n\t\t\t\tif (enabled)\n\t\t\t\t{\n\t\t\t\t\tshutDown();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGraphicChanged(final GraphicChanged event)\n\t{\n\t\tif (!enabled || !config.removeSpawnAnimation())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal var actor \u003d event.getActor();\n\t\tif (!(actor instanceof NPC))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal var npc \u003d (NPC) actor;\n\t\tif (!isLarva(npc))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tnpc.clearSpotAnims();\n\t}\n\n\t@Subscribe\n\tpublic void onNpcSpawned(final NpcSpawned event)\n\t{\n\t\tif (!enabled)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal var npc \u003d event.getNpc();\n\n\t\tif (!isLarva(npc))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlarvae.put(npc, new Larva(npc));\n\t\tif (config.removeSpawnAnimation())\n\t\t{\n\t\t\tnpc.clearSpotAnims();\n\t\t\tnpc.setAnimation(AnimationID.NPC_DEMONIC_GRUB_WALK);\n\t\t\tnpc.setAnimationFrame(0);\n\t\t}\n\n\t\tlog.debug(\"{} - onNpcSpawned: {} ({})\", client.getTickCount(), npc.getName(), npc.getIndex());\n\t}\n\n\t@Subscribe\n\tpublic void onNpcDespawned(final NpcDespawned event)\n\t{\n\t\tif (!enabled)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal var npc \u003d event.getNpc();\n\t\tfinal int id \u003d npc.getId();\n\n\t\tif (isLarva(npc))\n\t\t{\n\t\t\tlarvae.remove(npc);\n\n\t\t\tlog.debug(\"{} - onNpcDespawned: {} ({})\", client.getTickCount(), npc.getName(), npc.getIndex());\n\t\t}\n\t\telse if (id \u003e\u003d NpcID.DOM_BOSS \u0026\u0026 id \u003c\u003d NpcID.DOM_BOSS_BURROWED)\n\t\t{\n\t\t\tlarvae.clear();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onActorDeath(final ActorDeath event)\n\t{\n\t\tif (!enabled)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal var actor \u003d event.getActor();\n\t\tif (!(actor instanceof NPC))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal var npc \u003d (NPC) actor;\n\n\t\tfinal var larva \u003d larvae.get(npc);\n\t\tif (larva \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlarva.kill(client.getTickCount());\n\n\t\tlog.debug(\"{} - onActorDeath: {} ({})\", client.getTickCount(), npc.getName(), npc.getIndex());\n\t}\n\n\t@Subscribe()\n\tprivate void onInteractingChanged(final InteractingChanged event)\n\t{\n\t\tif (!enabled || event.getSource() !\u003d client.getLocalPlayer())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tinteractingNpc \u003d null;\n\n\t\tfinal var actor \u003d event.getTarget();\n\t\tif (!(actor instanceof NPC))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal var npc \u003d (NPC) actor;\n\t\tif (!isLarva(npc))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.interactingNpc \u003d npc;\n\n\t\tlog.debug(\"{} - onInteractingChanged: {} ({})\", client.getTickCount(), npc.getName(), npc.getIndex());\n\t}\n\n\t@Subscribe\n\tpublic void onFakeXpDrop(final FakeXpDrop event)\n\t{\n\t\tif (!enabled)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal var skill \u003d event.getSkill();\n\t\tfinal var xp \u003d event.getXp();\n\n\t\tswitch (skill)\n\t\t{\n\t\t\tcase ATTACK:\n\t\t\tcase STRENGTH:\n\t\t\tcase DEFENCE:\n\t\t\tcase RANGED:\n\t\t\tcase HITPOINTS:\n\t\t\t\tfakeXpDrops.merge(skill, xp, Integer::sum);\n\n\t\t\t\tlog.debug(\"{} - onFakeXpDrop: {} {}\", client.getTickCount(), skill, xp);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onStatChanged(final StatChanged event)\n\t{\n\t\tif (!enabled)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal var skill \u003d event.getSkill();\n\t\tfinal var xp \u003d event.getXp();\n\n\t\tfinal int idx \u003d skill.ordinal();\n\t\tfinal int prevXp \u003d previousSkillXp[idx];\n\t\tpreviousSkillXp[idx] \u003d xp;\n\t\tif (prevXp \u003d\u003d 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal int xpDiff \u003d xp - prevXp;\n\t\tif (xpDiff \u003c\u003d 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (skill)\n\t\t{\n\t\t\tcase ATTACK:\n\t\t\tcase STRENGTH:\n\t\t\tcase DEFENCE:\n\t\t\tcase RANGED:\n\t\t\tcase HITPOINTS:\n\t\t\t\trealXpDrops.merge(skill, xpDiff, Integer::sum);\n\n\t\t\t\tlog.debug(\"{} - onStatChanged: skill\u003d{} xp\u003d{}\", client.getTickCount(), skill, xpDiff);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t@Subscribe\n\tprivate void onHitsplatApplied(final HitsplatApplied event)\n\t{\n\t\tif (!enabled)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal var hitsplat \u003d event.getHitsplat();\n\t\tfinal int damage \u003d hitsplat.getAmount();\n\t\tif (damage \u003d\u003d 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal var actor \u003d event.getActor();\n\t\tif (!(actor instanceof NPC))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal var npc \u003d (NPC) actor;\n\n\t\tfinal var larva \u003d larvae.get(npc);\n\t\tif (larva \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlarvaHitsplats.put(larva, hitsplat);\n\n\t\tlog.debug(\"{} - onHitsplatApplied: {} ({}) damage\u003d{}\", client.getTickCount(), npc.getName(), npc.getIndex(), damage);\n\t}\n\n\t@Subscribe\n\tpublic void onMenuEntryAdded(final MenuEntryAdded event)\n\t{\n\t\tif (!enabled || !config.recolorLarvaMenuEntries())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal var entry \u003d event.getMenuEntry();\n\n\t\tfinal var npc \u003d entry.getNpc();\n\t\tif (npc \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal Color color;\n\n\t\tswitch (npc.getId())\n\t\t{\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY:\n\t\t\t\tcolor \u003d config.colorMenuBase();\n\t\t\t\tbreak;\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_RANGE:\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_GIANT_RANGE:\n\t\t\t\tcolor \u003d config.colorMenuRange();\n\t\t\t\tbreak;\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_MAGE:\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_GIANT_MAGE:\n\t\t\t\tcolor \u003d config.colorMenuMagic();\n\t\t\t\tbreak;\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_MELEE:\n\t\t\t\tcolor \u003d config.colorMenuMelee();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\n\t\tentry.setTarget(ColorUtil.colorTag(color) + npc.getName());\n\t}\n\n\t@Subscribe\n\tprivate void onVarbitChanged(final VarbitChanged event)\n\t{\n\t\tif (!enabled)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.getVarpId() \u003d\u003d VarPlayerID.COM_MODE ||\n\t\t\tevent.getVarbitId() \u003d\u003d VarbitID.COMBAT_WEAPON_CATEGORY ||\n\t\t\tevent.getVarbitId() \u003d\u003d VarbitID.AUTOCAST_DEFMODE)\n\t\t{\n\t\t\tinitAttackStyles();\n\t\t}\n\t\telse if (event.getVarbitId() \u003d\u003d VarbitID.DOM_MISSED_ORBS)\n\t\t{\n\t\t\tif (counter !\u003d null)\n\t\t\t{\n\t\t\t\tcounter.setCount(event.getValue());\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(final GameTick event)\n\t{\n\t\tif (!enabled || processLag())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlarvae.values().forEach(larva -\u003e larva.setXpProcessed(false));\n\n\t\tprocessHitSplats();\n\t\tlarvaHitsplats.clear();\n\n\t\tprocessXpDrops(realXpDrops);\n\t\trealXpDrops.clear();\n\n\t\tprocessXpDrops(fakeXpDrops);\n\t\tfakeXpDrops.clear();\n\n\t\treviveLarvae();\n\n\t\tlog.debug(\"---- END GAME TICK {} ----\", client.getTickCount());\n\t}\n\n\tprivate void setCounter()\n\t{\n\t\tcounter \u003d new Counter(spriteManager.getSprite(SpriteID.IconBoss25x25.DOOM_OF_MOKHAIOTL, 0), this, client.getVarbitValue(VarbitID.DOM_MISSED_ORBS))\n\t\t{\n\t\t\t@Override\n\t\t\tpublic boolean render()\n\t\t\t{\n\t\t\t\treturn getCount() \u003e 0 \u0026\u0026 config.infoboxLarvaCounter();\n\t\t\t}\n\t\t};\n\n\t\tcounter.setTooltip(\"Demonic Charge\");\n\n\t\tinfoBoxManager.addInfoBox(counter);\n\t}\n\n\tprivate boolean inRegion()\n\t{\n\t\tfinal var wv \u003d client.getTopLevelWorldView();\n\t\treturn wv.isInstance() \u0026\u0026 Arrays.stream(wv.getMapRegions()).anyMatch(REGION_IDS::contains);\n\t}\n\n\tprivate boolean shouldDraw(final Renderable renderable, final boolean overheads)\n\t{\n\t\tif (renderable instanceof NPC)\n\t\t{\n\t\t\tfinal var npc \u003d (NPC) renderable;\n\t\t\tfinal var larva \u003d larvae.get(npc);\n\t\t\tif (larva !\u003d null)\n\t\t\t{\n\t\t\t\tif (config.hideDeadLarva() \u0026\u0026 (npc.isDead() || larva.isDead()))\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (npc.getId() !\u003d NpcID.DOM_DEMONIC_ENERGY)\n\t\t\t\t{\n\t\t\t\t\treturn !(overheads \u0026\u0026 config.hideLarvaOverheads());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprivate boolean processLag()\n\t{\n\t\tif (lastTickNano \u003d\u003d 0)\n\t\t{\n\t\t\tlastTickNano \u003d System.nanoTime();\n\t\t\treturn false;\n\t\t}\n\n\t\tfinal long time \u003d System.nanoTime();\n\t\tfinal int lastTickMillis \u003d (int) ((time - lastTickNano) / 1_000_000L);\n\t\tlastTickNano \u003d time;\n\n\t\tif (lastTickMillis \u003c config.lagProtectionThreshold())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (config.printLagMessages())\n\t\t{\n\t\t\tclient.addChatMessage(\n\t\t\t\tChatMessageType.GAMEMESSAGE,\n\t\t\t\t\"DemonicLarvaTracker\",\n\t\t\t\tString.format(\"[\u003ccol\u003dFF0000\u003eD\u003ccol\u003d00FF00\u003eL\u003ccol\u003d0000FF\u003eT\u003c/col\u003e] \u003ccol\u003dFFFF00\u003eWarning\u003c/col\u003e: Tick %d was \u003ccol\u003dFFA500\u003e%d ms\u003c/col\u003e.\",\n\t\t\t\t\tclient.getTickCount(), lastTickMillis),\n\t\t\t\tnull\n\t\t\t);\n\t\t}\n\n\t\tlarvae.values().forEach(Larva::revive);\n\t\tlarvaHitsplats.clear();\n\t\trealXpDrops.clear();\n\t\tfakeXpDrops.clear();\n\n\t\treturn true;\n\t}\n\n\tprivate void processHitSplats()\n\t{\n\t\tif (larvaHitsplats.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlarvaHitsplats.keySet().removeIf(l -\u003e !larvae.containsValue(l));\n\n\t\tfor (final var entry : larvaHitsplats.entrySet())\n\t\t{\n\t\t\tfinal var larva \u003d entry.getKey();\n\t\t\tfinal var npc \u003d larva.getNpc();\n\n\t\t\tfinal int damage \u003d entry.getValue().getAmount();\n\n\t\t\tlog.debug(\"{} - processHitSplats (damage): {} ({}) queuedDamage\u003d{} damage\u003d{}\",\n\t\t\t\tclient.getTickCount(), npc.getName(), npc.getIndex(), larva.getQueuedDamage(), damage);\n\n\t\t\tlarva.dequeueDamage(damage);\n\t\t\tif (larva.hasQueuedDamage())\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlarva.recalcHp();\n\n\t\t\tlog.debug(\"{} - processHitSplats (hp): {} ({}) healthRatio\u003d{} healthScale\u003d{} hp\u003d{}\",\n\t\t\t\tclient.getTickCount(), npc.getName(), npc.getIndex(), npc.getHealthRatio(), npc.getHealthScale(), larva.getHp());\n\n\t\t\tif (larva.isDead())\n\t\t\t{\n\t\t\t\tlarva.kill(client.getTickCount());\n\n\t\t\t\tlog.debug(\"{} - processHitSplats (kill): {} ({}) hp\u003d{} deathTick\u003d{}\",\n\t\t\t\t\tclient.getTickCount(), npc.getName(), npc.getIndex(), larva.getHp(), larva.getDeathTick());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlarva.resetDeathTick();\n\n\t\t\t\tlog.debug(\"{} - processHitSplats (alive): {} ({}) hp\u003d{} deathTick\u003d{}\",\n\t\t\t\t\tclient.getTickCount(), npc.getName(), npc.getIndex(), larva.getHp(), larva.getDeathTick());\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void processXpDrops(final Map\u003cSkill, Integer\u003e xpDrops)\n\t{\n\t\tif (xpDrops.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (interactingNpc \u003d\u003d null || attackStyle \u003d\u003d null)\n\t\t{\n\t\t\tlog.debug(\"{} - processXpDrops (skipping): interactingNpc\u003d{} attackStyle\u003d{}\",\n\t\t\t\tclient.getTickCount(), interactingNpc, attackStyle);\n\t\t\treturn;\n\t\t}\n\n\t\tfinal var larva \u003d larvae.get(interactingNpc);\n\t\tif (larva \u003d\u003d null || larva.isDead() || larva.isXpProcessed())\n\t\t{\n\t\t\tlog.debug(\"{} - processXpDrops (skipping): larva null/dead/processed\", client.getTickCount());\n\t\t\treturn;\n\t\t}\n\n\t\tfinal var npc \u003d larva.getNpc();\n\n\t\tfor (final var entry : xpDrops.entrySet())\n\t\t{\n\t\t\tvar skill \u003d entry.getKey();\n\t\t\tfinal var xp \u003d entry.getValue();\n\n\t\t\tif (skill \u003d\u003d Skill.ATTACK || skill \u003d\u003d Skill.STRENGTH || skill \u003d\u003d Skill.DEFENCE || skill \u003d\u003d Skill.RANGED)\n\t\t\t{\n\t\t\t\tif (attackStyle \u003d\u003d AttackStyle.LONGRANGE)\n\t\t\t\t{\n\t\t\t\t\tskill \u003d Skill.RANGED;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (skill \u003d\u003d Skill.HITPOINTS \u0026\u0026 attackStyle !\u003d AttackStyle.CASTING)\n\t\t\t{\n\t\t\t\tlog.debug(\"{} - processXpDrops (skipping): skill\u003d{} attackStyle\u003d{} !\u003d CASTING\", client.getTickCount(), skill, attackStyle);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlarva.setXpProcessed(true);\n\n\t\t\tfinal int damage \u003d calcDamageFromXpDrop(skill, xp);\n\t\t\tlarva.damage(damage);\n\n\t\t\tif (larva.isDead())\n\t\t\t{\n\t\t\t\tlarva.kill(client.getTickCount());\n\n\t\t\t\tlog.debug(\"{} - processXpDrops (killed): {} ({}) damage\u003d{} queuedDamage\u003d{} hp\u003d{} deathTick\u003d{}\",\n\t\t\t\t\tclient.getTickCount(), npc.getName(), npc.getIndex(), damage, larva.getQueuedDamage(), larva.getHp(), larva.getDeathTick());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlarva.resetDeathTick();\n\n\t\t\t\tlog.debug(\"{} - processXpDrops (alive): {} ({}) damage\u003d{} queuedDamage\u003d{} hp\u003d{} deathTick\u003d{}\",\n\t\t\t\t\tclient.getTickCount(), npc.getName(), npc.getIndex(), damage, larva.getQueuedDamage(), larva.getHp(), larva.getDeathTick());\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void reviveLarvae()\n\t{\n\t\tif (larvae.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfor (final var entry : larvae.entrySet())\n\t\t{\n\t\t\tfinal var npc \u003d entry.getKey();\n\t\t\tfinal var larva \u003d entry.getValue();\n\n\t\t\tif (!larva.isTimedOut(client.getTickCount(), config.deathTickTimeout()))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfinal int deathTick \u003d larva.getDeathTick();\n\n\t\t\tlarva.revive();\n\n\t\t\tlog.debug(\"{} - reviveLarvae: {} ({}) hp\u003d{} queuedDamage\u003d{} deathTick\u003d{}\",\n\t\t\t\tclient.getTickCount(), npc.getName(), npc.getIndex(), larva.getHp(), larva.getQueuedDamage(), deathTick);\n\t\t}\n\t}\n\n\tprivate void initAttackStyles()\n\t{\n\t\tfinal int equippedWeaponTypeVarbit \u003d client.getVarbitValue(VarbitID.COMBAT_WEAPON_CATEGORY);\n\t\tfinal int attackStyleVarbit \u003d client.getVarpValue(VarPlayerID.COM_MODE);\n\t\tfinal int castingModeVarbit \u003d client.getVarbitValue(VarbitID.AUTOCAST_DEFMODE);\n\n\t\tupdateAttackStyle(equippedWeaponTypeVarbit, attackStyleVarbit, castingModeVarbit);\n\t}\n\n\tprivate void updateAttackStyle(final int equippedWeaponType, int attackStyleIndex, final int castingMode)\n\t{\n\t\tfinal AttackStyle[] attackStyles \u003d getWeaponTypeStyles(equippedWeaponType);\n\n\t\tif (attackStyleIndex \u003c attackStyles.length)\n\t\t{\n\t\t\tif (attackStyleIndex \u003d\u003d 4)\n\t\t\t{\n\t\t\t\tattackStyleIndex +\u003d castingMode;\n\t\t\t}\n\n\t\t\tattackStyle \u003d attackStyles[attackStyleIndex];\n\n\t\t\tif (attackStyle \u003d\u003d AttackStyle.DEFENSIVE)\n\t\t\t{\n\t\t\t\tif (Arrays.equals(attackStyles, ATTACK_STYLES_POWERED_STAVE))\n\t\t\t\t{\n\t\t\t\t\tattackStyle \u003d AttackStyle.DEFENSIVE_CASTING;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (attackStyle \u003d\u003d null)\n\t\t\t{\n\t\t\t\tattackStyle \u003d AttackStyle.OTHER;\n\t\t\t}\n\n\t\t\tlog.debug(\"{} - updateAttackStyle: attackStyle\u003d{}\", client.getTickCount(), attackStyle);\n\t\t}\n\t}\n\n\tprivate AttackStyle[] getWeaponTypeStyles(final int weaponType)\n\t{\n\t\tfinal int weaponStyleEnum \u003d client.getEnum(EnumID.WEAPON_STYLES).getIntValue(weaponType);\n\t\tif (weaponStyleEnum \u003d\u003d -1)\n\t\t{\n\t\t\tif (weaponType \u003d\u003d 22)\n\t\t\t{\n\t\t\t\treturn new AttackStyle[]{\n\t\t\t\t\tAttackStyle.ACCURATE,\n\t\t\t\t\tAttackStyle.AGGRESSIVE,\n\t\t\t\t\tnull,\n\t\t\t\t\tAttackStyle.DEFENSIVE,\n\t\t\t\t\tAttackStyle.CASTING,\n\t\t\t\t\tAttackStyle.DEFENSIVE_CASTING\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (weaponType \u003d\u003d 30)\n\t\t\t{\n\t\t\t\treturn new AttackStyle[]{\n\t\t\t\t\tAttackStyle.ACCURATE, AttackStyle.AGGRESSIVE, AttackStyle.AGGRESSIVE, AttackStyle.DEFENSIVE\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn new AttackStyle[0];\n\t\t}\n\t\tfinal int[] weaponStyleStructs \u003d client.getEnum(weaponStyleEnum).getIntVals();\n\n\t\tfinal AttackStyle[] styles \u003d new AttackStyle[weaponStyleStructs.length];\n\t\tint i \u003d 0;\n\t\tfor (final int style : weaponStyleStructs)\n\t\t{\n\t\t\tfinal StructComposition attackStyleStruct \u003d client.getStructComposition(style);\n\t\t\tfinal String attackStyleName \u003d attackStyleStruct.getStringValue(ParamID.ATTACK_STYLE_NAME);\n\n\t\t\tAttackStyle attackStyle \u003d AttackStyle.valueOf(attackStyleName.toUpperCase());\n\t\t\tif (attackStyle \u003d\u003d AttackStyle.OTHER)\n\t\t\t{\n\t\t\t\t++i;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (i \u003d\u003d 5 \u0026\u0026 attackStyle \u003d\u003d AttackStyle.DEFENSIVE)\n\t\t\t{\n\t\t\t\tattackStyle \u003d AttackStyle.DEFENSIVE_CASTING;\n\t\t\t}\n\n\t\t\tstyles[i++] \u003d attackStyle;\n\t\t}\n\t\treturn styles;\n\t}\n\n\tprivate int calcDamageFromXpDrop(final Skill skill, final int xp)\n\t{\n\t\tif (attackStyle \u003d\u003d null)\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\n\t\tdouble damage \u003d 0;\n\n\t\tswitch (skill)\n\t\t{\n\t\t\tcase ATTACK:\n\t\t\tcase STRENGTH:\n\t\t\tcase DEFENCE:\n\t\t\t\tswitch (attackStyle)\n\t\t\t\t{\n\t\t\t\t\tcase ACCURATE:\n\t\t\t\t\tcase AGGRESSIVE:\n\t\t\t\t\tcase DEFENSIVE:\n\t\t\t\t\t\tdamage \u003d xp / 4.0D;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase CONTROLLED:\n\t\t\t\t\t\tdamage \u003d xp / 1.33D;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase DEFENSIVE_CASTING:\n\t\t\t\t\t\tdamage \u003d xp;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase HITPOINTS:\n\t\t\t\tif (attackStyle \u003d\u003d AttackStyle.CASTING)\n\t\t\t\t{\n\t\t\t\t\tdamage \u003d xp / 1.33D;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase RANGED:\n\t\t\t\tswitch (attackStyle)\n\t\t\t\t{\n\t\t\t\t\tcase RANGING:\n\t\t\t\t\t\tdamage \u003d xp / 4.0D;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase LONGRANGE:\n\t\t\t\t\t\tdamage \u003d xp / 2.0D;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn (int) Math.round(damage);\n\t}\n\n\tprivate static boolean isLarva(final NPC npc)\n\t{\n\t\tif (npc \u003d\u003d null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tfinal int id \u003d npc.getId();\n\n\t\treturn id \u003d\u003d NpcID.DOM_DEMONIC_ENERGY || id \u003d\u003d NpcID.DOM_DEMONIC_ENERGY_RANGE ||\n\t\t\tid \u003d\u003d NpcID.DOM_DEMONIC_ENERGY_MAGE || id \u003d\u003d NpcID.DOM_DEMONIC_ENERGY_MELEE ||\n\t\t\tid \u003d\u003d NpcID.DOM_DEMONIC_ENERGY_GIANT_RANGE || id \u003d\u003d NpcID.DOM_DEMONIC_ENERGY_GIANT_MAGE;\n\t}\n}\n","filePath":"src\\main\\java\\com\\demoniclarvatracker\\DemonicLarvaTrackerPlugin.java"},{"fileName":"Larva.java","content":"package com.demoniclarvatracker;\n\nimport lombok.AccessLevel;\nimport lombok.EqualsAndHashCode;\nimport lombok.Getter;\nimport lombok.NonNull;\nimport lombok.Setter;\nimport lombok.ToString;\nimport net.runelite.api.NPC;\nimport net.runelite.api.gameval.NpcID;\n\n@ToString\n@Getter(AccessLevel.PACKAGE)\n@EqualsAndHashCode(onlyExplicitlyIncluded \u003d true)\nclass Larva\n{\n\t@EqualsAndHashCode.Include\n\tprivate final NPC npc;\n\n\tprivate final int maxHp;\n\tprivate int hp;\n\n\tprivate int queuedDamage;\n\n\tprivate int deathTick;\n\n\t@Setter(AccessLevel.PACKAGE)\n\tprivate boolean xpProcessed;\n\n\tLarva(final @NonNull NPC npc)\n\t{\n\t\tthis.npc \u003d npc;\n\n\t\tswitch (npc.getId())\n\t\t{\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY:\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_RANGE:\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_MAGE:\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_MELEE:\n\t\t\t\tmaxHp \u003d 2;\n\t\t\t\tbreak;\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_GIANT_RANGE:\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_GIANT_MAGE:\n\t\t\t\tmaxHp \u003d 4;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new IllegalArgumentException(\"Not a larva: \" + npc.getName());\n\t\t}\n\n\t\tthis.hp \u003d maxHp;\n\t}\n\n\tboolean isDead()\n\t{\n\t\treturn hp \u003d\u003d 0;\n\t}\n\n\tvoid damage(final int amount)\n\t{\n\t\tqueuedDamage \u003d Math.min(maxHp, queuedDamage + amount);\n\t\thp \u003d Math.max(0, hp - amount);\n\t}\n\n\tvoid kill(final int tick)\n\t{\n\t\thp \u003d 0;\n\t\tdeathTick \u003d tick;\n\t}\n\n\tvoid resetDeathTick()\n\t{\n\t\tdeathTick \u003d 0;\n\t}\n\n\tvoid revive()\n\t{\n\t\trecalcHp();\n\t\tqueuedDamage \u003d 0;\n\t\tdeathTick \u003d 0;\n\t}\n\n\tvoid recalcHp()\n\t{\n\t\tfinal int ratio \u003d npc.getHealthRatio();\n\t\tfinal int scale \u003d npc.getHealthScale();\n\n\t\tif (ratio \u003d\u003d -1 || scale \u003d\u003d -1)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\thp \u003d (int) (maxHp * ((double) ratio / scale));\n\t}\n\n\tboolean isTimedOut(final int tick, final int timeout)\n\t{\n\t\treturn deathTick !\u003d 0 \u0026\u0026 tick \u003e (deathTick + timeout);\n\t}\n\n\tvoid dequeueDamage(final int amount)\n\t{\n\t\tqueuedDamage \u003d Math.max(0, queuedDamage - amount);\n\t}\n\n\tboolean hasQueuedDamage()\n\t{\n\t\treturn queuedDamage \u003e 0;\n\t}\n}\n","filePath":"src\\main\\java\\com\\demoniclarvatracker\\Larva.java"},{"fileName":"SceneOverlay.java","content":"package com.demoniclarvatracker;\n\nimport java.awt.BasicStroke;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Polygon;\nimport java.awt.RenderingHints;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport net.runelite.api.Client;\nimport net.runelite.api.NPC;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.gameval.NpcID;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.outline.ModelOutlineRenderer;\n\n@Singleton\nclass SceneOverlay extends Overlay\n{\n\tprivate final Client client;\n\tprivate final DemonicLarvaTrackerPlugin plugin;\n\tprivate final DemonicLarvaTrackerConfig config;\n\tprivate final ModelOutlineRenderer modelOutlineRenderer;\n\n\t@Inject\n\tSceneOverlay(\n\t\tfinal Client client,\n\t\tfinal DemonicLarvaTrackerPlugin plugin,\n\t\tfinal DemonicLarvaTrackerConfig config,\n\t\tfinal ModelOutlineRenderer modelOutlineRenderer)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t\tthis.modelOutlineRenderer \u003d modelOutlineRenderer;\n\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\n\t}\n\n\t@Override\n\tpublic Dimension render(final Graphics2D graphics)\n\t{\n\t\tif (!config.highlightOutline() \u0026\u0026\n\t\t\t!config.highlightTileOutline() \u0026\u0026\n\t\t\t!config.highlightTileFill() \u0026\u0026\n\t\t\t!config.highlightHullOutline() \u0026\u0026\n\t\t\t!config.highlightHullFill() \u0026\u0026\n\t\t\t!config.highlightClickBoxOutline() \u0026\u0026\n\t\t\t!config.highlightClickBoxFill() \u0026\u0026\n\t\t\t!config.highlightNameLabel())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tfinal var larvae \u003d plugin.getLarvae();\n\t\tif (larvae.isEmpty())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tgraphics.setRenderingHint(RenderingHints.KEY_ANTIALIASING, config.antiAliasing() ?\n\t\t\tRenderingHints.VALUE_ANTIALIAS_ON : RenderingHints.VALUE_ANTIALIAS_OFF);\n\n\t\tgraphics.setFont(FontManager.getRunescapeFont());\n\n\t\tfor (final var entry : larvae.entrySet())\n\t\t{\n\t\t\tfinal var npc \u003d entry.getKey();\n\n\t\t\tif (config.hideHighlightOnDeath() \u0026\u0026 (npc.isDead() || (config.hideDeadLarva() \u0026\u0026 entry.getValue().isDead())))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (config.highlightOutline())\n\t\t\t{\n\t\t\t\trenderOutline(npc);\n\t\t\t}\n\n\t\t\tif (config.highlightTileOutline() || config.highlightTileFill())\n\t\t\t{\n\t\t\t\trenderTile(graphics, npc);\n\t\t\t}\n\n\t\t\tif (config.highlightHullOutline() || config.highlightHullFill())\n\t\t\t{\n\t\t\t\trenderHull(graphics, npc);\n\t\t\t}\n\n\t\t\tif (config.highlightClickBoxOutline() || config.highlightClickBoxFill())\n\t\t\t{\n\t\t\t\trenderClickBox(graphics, npc);\n\t\t\t}\n\n\t\t\tif (config.highlightNameLabel())\n\t\t\t{\n\t\t\t\trenderNameLabel(graphics, npc);\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate void renderOutline(final NPC npc)\n\t{\n\t\tfinal Color color;\n\n\t\tswitch (npc.getId())\n\t\t{\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY:\n\t\t\t\tcolor \u003d config.colorOutlineBase();\n\t\t\t\tbreak;\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_RANGE:\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_GIANT_RANGE:\n\t\t\t\tcolor \u003d config.colorOutlineRange();\n\t\t\t\tbreak;\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_MAGE:\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_GIANT_MAGE:\n\t\t\t\tcolor \u003d config.colorOutlineMagic();\n\t\t\t\tbreak;\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_MELEE:\n\t\t\t\tcolor \u003d config.colorOutlineMelee();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\n\t\tmodelOutlineRenderer.drawOutline(npc, config.highlightOutlineWidth(), color, config.highlightOutlineFeather());\n\t}\n\n\tprivate void renderTile(final Graphics2D graphics, final NPC npc)\n\t{\n\t\tfinal Polygon polygon;\n\n\t\tswitch (config.highlightTileMode())\n\t\t{\n\t\t\tcase TILE:\n\t\t\t\tpolygon \u003d npc.getCanvasTilePoly();\n\t\t\t\tbreak;\n\t\t\tcase TRUE_TILE:\n\t\t\t\tvar lp \u003d LocalPoint.fromWorld(client.getTopLevelWorldView(), npc.getWorldLocation());\n\t\t\t\tif (lp \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfinal var comp \u003d npc.getTransformedComposition();\n\t\t\t\tif (comp \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfinal int size \u003d comp.getSize();\n\t\t\t\tlp \u003d lp.plus(Perspective.LOCAL_TILE_SIZE * (size - 1) / 2, Perspective.LOCAL_TILE_SIZE * (size - 1) / 2);\n\t\t\t\tpolygon \u003d Perspective.getCanvasTileAreaPoly(client, lp, size);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\n\t\tif (polygon \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal Color outlineColor;\n\t\tfinal Color fillColor;\n\n\t\tswitch (npc.getId())\n\t\t{\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY:\n\t\t\t\toutlineColor \u003d config.colorTileOutlineBase();\n\t\t\t\tfillColor \u003d config.colorTileFillBase();\n\t\t\t\tbreak;\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_RANGE:\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_GIANT_RANGE:\n\t\t\t\toutlineColor \u003d config.colorTileOutlineRange();\n\t\t\t\tfillColor \u003d config.colorTileFillRange();\n\t\t\t\tbreak;\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_MAGE:\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_GIANT_MAGE:\n\t\t\t\toutlineColor \u003d config.colorTileOutlineMagic();\n\t\t\t\tfillColor \u003d config.colorTileFillMagic();\n\t\t\t\tbreak;\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_MELEE:\n\t\t\t\toutlineColor \u003d config.colorTileOutlineMelee();\n\t\t\t\tfillColor \u003d config.colorTileFillMelee();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\n\t\tif (config.highlightTileOutline())\n\t\t{\n\t\t\tgraphics.setColor(outlineColor);\n\t\t\tgraphics.setStroke(new BasicStroke((float) config.highlightTileOutlineWidth()));\n\t\t\tgraphics.draw(polygon);\n\t\t}\n\n\t\tif (config.highlightTileFill())\n\t\t{\n\t\t\tgraphics.setColor(fillColor);\n\t\t\tgraphics.fill(polygon);\n\t\t}\n\t}\n\n\tprivate void renderHull(final Graphics2D graphics, final NPC npc)\n\t{\n\t\tfinal var shape \u003d npc.getConvexHull();\n\t\tif (shape \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal Color outlineColor;\n\t\tfinal Color fillColor;\n\n\t\tswitch (npc.getId())\n\t\t{\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY:\n\t\t\t\toutlineColor \u003d config.colorHullOutlineBase();\n\t\t\t\tfillColor \u003d config.colorHullFillBase();\n\t\t\t\tbreak;\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_RANGE:\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_GIANT_RANGE:\n\t\t\t\toutlineColor \u003d config.colorHullOutlineRange();\n\t\t\t\tfillColor \u003d config.colorHullFillRange();\n\t\t\t\tbreak;\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_MAGE:\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_GIANT_MAGE:\n\t\t\t\toutlineColor \u003d config.colorHullOutlineMagic();\n\t\t\t\tfillColor \u003d config.colorHullFillMagic();\n\t\t\t\tbreak;\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_MELEE:\n\t\t\t\toutlineColor \u003d config.colorHullOutlineMelee();\n\t\t\t\tfillColor \u003d config.colorHullFillMelee();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\n\t\tif (config.highlightHullOutline())\n\t\t{\n\t\t\tgraphics.setColor(outlineColor);\n\t\t\tgraphics.setStroke(new BasicStroke((float) config.highlightHullWidth()));\n\t\t\tgraphics.draw(shape);\n\t\t}\n\n\t\tif (config.highlightHullFill())\n\t\t{\n\t\t\tgraphics.setColor(fillColor);\n\t\t\tgraphics.fill(shape);\n\t\t}\n\t}\n\n\tprivate void renderClickBox(final Graphics2D graphics, final NPC npc)\n\t{\n\t\tfinal var lp \u003d npc.getLocalLocation();\n\t\tif (lp \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal var shape \u003d Perspective.getClickbox(client, npc.getWorldView(), npc.getModel(), npc.getCurrentOrientation(), lp.getX(), lp.getY(),\n\t\t\tPerspective.getTileHeight(client, lp, npc.getWorldView().getPlane()));\n\t\tif (shape \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tColor outlineColor;\n\t\tColor fillColor;\n\n\t\tswitch (npc.getId())\n\t\t{\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY:\n\t\t\t\toutlineColor \u003d config.colorClickBoxOutlineBase();\n\t\t\t\tfillColor \u003d config.colorClickBoxFillBase();\n\t\t\t\tbreak;\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_RANGE:\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_GIANT_RANGE:\n\t\t\t\toutlineColor \u003d config.colorClickBoxOutlineRange();\n\t\t\t\tfillColor \u003d config.colorClickBoxFillRange();\n\t\t\t\tbreak;\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_MAGE:\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_GIANT_MAGE:\n\t\t\t\toutlineColor \u003d config.colorClickBoxOutlineMagic();\n\t\t\t\tfillColor \u003d config.colorClickBoxFillMagic();\n\t\t\t\tbreak;\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_MELEE:\n\t\t\t\toutlineColor \u003d config.colorClickBoxOutlineMelee();\n\t\t\t\tfillColor \u003d config.colorClickBoxFillMelee();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\n\t\tboolean mouseover \u003d false;\n\n\t\tif (config.highlightClickboxMouseover())\n\t\t{\n\t\t\tfinal var point \u003d client.getMouseCanvasPosition();\n\t\t\tmouseover \u003d shape.contains(point.getX(), point.getY());\n\t\t}\n\n\t\tif (config.highlightClickBoxOutline())\n\t\t{\n\t\t\tif (mouseover)\n\t\t\t{\n\t\t\t\toutlineColor \u003d darken(outlineColor, 0.7);\n\t\t\t}\n\n\t\t\tgraphics.setColor(outlineColor);\n\t\t\tgraphics.setStroke(new BasicStroke((float) config.highlightClickBoxWidth()));\n\t\t\tgraphics.draw(shape);\n\t\t}\n\n\t\tif (config.highlightClickBoxFill())\n\t\t{\n\t\t\tif (mouseover)\n\t\t\t{\n\t\t\t\tfillColor \u003d darken(fillColor, 0.5);\n\t\t\t}\n\n\t\t\tgraphics.setColor(fillColor);\n\t\t\tgraphics.fill(shape);\n\t\t}\n\t}\n\n\tprivate void renderNameLabel(final Graphics2D graphics, final NPC npc)\n\t{\n\t\tfinal String label;\n\t\tfinal Color color;\n\n\t\tswitch (npc.getId())\n\t\t{\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_MELEE:\n\t\t\t\tlabel \u003d config.nameLabelMelee();\n\t\t\t\tcolor \u003d config.colorMenuMelee();\n\t\t\t\tbreak;\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_RANGE:\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_GIANT_RANGE:\n\t\t\t\tlabel \u003d config.nameLabelRange();\n\t\t\t\tcolor \u003d config.colorMenuRange();\n\t\t\t\tbreak;\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_MAGE:\n\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_GIANT_MAGE:\n\t\t\t\tlabel \u003d config.nameLabelMagic();\n\t\t\t\tcolor \u003d config.colorMenuMagic();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\n\t\tif (label.isBlank())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal var point \u003d npc.getCanvasTextLocation(graphics, label, npc.getLogicalHeight() + 40);\n\t\tif (point \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal int x \u003d point.getX();\n\t\tfinal int y \u003d point.getY();\n\n\t\tgraphics.setColor(Color.BLACK);\n\t\tgraphics.drawString(label, x + 1, y + 1);\n\t\tgraphics.drawString(label, x + 2, y + 2);\n\n\t\tgraphics.setColor(color);\n\t\tgraphics.drawString(label, x, y);\n\t}\n\n\tprivate static Color darken(final Color color, final double factor)\n\t{\n\t\treturn new Color(\n\t\t\tMath.max((int) (color.getRed() * factor), 0),\n\t\t\tMath.max((int) (color.getGreen() * factor), 0),\n\t\t\tMath.max((int) (color.getBlue() * factor), 0),\n\t\t\tcolor.getAlpha()\n\t\t);\n\t}\n}\n","filePath":"src\\main\\java\\com\\demoniclarvatracker\\SceneOverlay.java"},{"fileName":"TileMode.java","content":"package com.demoniclarvatracker;\n\npublic enum TileMode\n{\n\tTILE,\n\tTRUE_TILE\n}\n","filePath":"src\\main\\java\\com\\demoniclarvatracker\\TileMode.java"},{"fileName":"WidgetOverlay.java","content":"package com.demoniclarvatracker;\n\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport net.runelite.api.gameval.NpcID;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\n\n@Singleton\nclass WidgetOverlay extends Overlay\n{\n\tprivate static final int MINIMAP_DOT_RADIUS \u003d 4;\n\n\tprivate final DemonicLarvaTrackerPlugin plugin;\n\tprivate final DemonicLarvaTrackerConfig config;\n\n\t@Inject\n\tpublic WidgetOverlay(final DemonicLarvaTrackerPlugin plugin, final DemonicLarvaTrackerConfig config)\n\t{\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.ABOVE_WIDGETS);\n\t}\n\n\t@Override\n\tpublic Dimension render(final Graphics2D graphics2D)\n\t{\n\t\tif (config.highlightMinimap())\n\t\t{\n\t\t\trenderMinimap(graphics2D);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate void renderMinimap(final Graphics2D graphics2D)\n\t{\n\t\tfinal var larvae \u003d plugin.getLarvae();\n\t\tif (larvae.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfor (final var entry : larvae.entrySet())\n\t\t{\n\t\t\tfinal var npc \u003d entry.getKey();\n\n\t\t\tif (npc.isDead() || (config.hideDeadLarva() \u0026\u0026 entry.getValue().isDead()))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfinal var point \u003d npc.getMinimapLocation();\n\t\t\tif (point \u003d\u003d null)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfinal Color color;\n\n\t\t\tswitch (npc.getId())\n\t\t\t{\n\t\t\t\tcase NpcID.DOM_DEMONIC_ENERGY:\n\t\t\t\t\tcolor \u003d config.colorMenuBase();\n\t\t\t\t\tbreak;\n\t\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_RANGE:\n\t\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_GIANT_RANGE:\n\t\t\t\t\tcolor \u003d config.colorMenuRange();\n\t\t\t\t\tbreak;\n\t\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_MAGE:\n\t\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_GIANT_MAGE:\n\t\t\t\t\tcolor \u003d config.colorMenuMagic();\n\t\t\t\t\tbreak;\n\t\t\t\tcase NpcID.DOM_DEMONIC_ENERGY_MELEE:\n\t\t\t\t\tcolor \u003d config.colorMenuMelee();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tgraphics2D.setColor(Color.BLACK);\n\t\t\tgraphics2D.fillOval(point.getX() - MINIMAP_DOT_RADIUS / 2, point.getY() - MINIMAP_DOT_RADIUS / 2 + 1, MINIMAP_DOT_RADIUS, MINIMAP_DOT_RADIUS);\n\t\t\tgraphics2D.setColor(color);\n\t\t\tgraphics2D.fillOval(point.getX() - MINIMAP_DOT_RADIUS / 2, point.getY() - MINIMAP_DOT_RADIUS / 2, MINIMAP_DOT_RADIUS, MINIMAP_DOT_RADIUS);\n\t\t}\n\t}\n}","filePath":"src\\main\\java\\com\\demoniclarvatracker\\WidgetOverlay.java"},{"fileName":"ExamplePluginTest.java","content":"package com.demoniclarvatracker;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ExamplePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(DemonicLarvaTrackerPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\demoniclarvatracker\\ExamplePluginTest.java"}]},{"commit":"488fa2b23bb1d00821f88916da4949e8ee9d7093","repository":"https://github.com/jkvlntn/vorkath-run-warning.git","internalName":"vorkath-run-warning","files":[{"fileName":"VorkathRunWarningConfig.java","content":"package com.vorkathrunwarning;\n\nimport net.runelite.client.config.Alpha;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\nimport java.awt.Color;\n\n@ConfigGroup(\"vorkathrunwarning\")\npublic interface VorkathRunWarningConfig extends Config\n{\n\t@ConfigItem(\n\t\tkeyName \u003d \"displayTintWarning\",\n\t\tname \u003d \"Display tint warning\",\n\t\tdescription \u003d \"Configures whether to warn by coloring the screen.\",\n\t\tposition \u003d 1\n\t)\n\tdefault boolean displayTintWarning() { return true; }\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"tintColor\",\n\t\tname \u003d \"Tint color\",\n\t\tdescription \u003d \"Color used for the tint warning.\",\n\t\tposition \u003d 2\n\t)\n\tdefault Color tintColor()\n\t{\n\t\treturn new Color(255, 127, 127, 50);\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"displayTextWarning\",\n\t\tname \u003d \"Display text warning\",\n\t\tdescription \u003d \"Configures whether to warn with a text box.\",\n\t\tposition \u003d 3\n\t)\n\tdefault boolean displayTextWarning() { return true; }\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"textColor\",\n\t\tname \u003d \"Text color\",\n\t\tdescription \u003d \"Color used for the text warning.\",\n\t\tposition \u003d 4\n\t)\n\tdefault Color textColor() { return Color.white; }\n}\n","filePath":"src\\main\\java\\com\\vorkathrunwarning\\VorkathRunWarningConfig.java"},{"fileName":"VorkathRunWarningPlugin.java","content":"package com.vorkathrunwarning;\n\nimport com.google.inject.Provides;\n\nimport javax.inject.Inject;\n\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.NpcID;\nimport net.runelite.api.events.NpcChanged;\nimport net.runelite.api.events.NpcDespawned;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\nimport java.util.Set;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Vorkath Run Warning\"\n)\npublic class VorkathRunWarningPlugin extends Plugin\n{\n\tprivate static final int RUN_VARIABLE_ID \u003d 173;\n\tprivate static final Set\u003cInteger\u003e VORKATH_ALIVE_IDS \u003d Set.of(\n\t\t\tNpcID.VORKATH,\n\t\t\tNpcID.VORKATH_8060,\n\t\t\tNpcID.VORKATH_8061,\n\t\t\tNpcID.VORKATH_11959);\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate VorkathRunWarningConfig config;\n\n\t@Inject\n\tprivate VorkathRunWarningTintOverlay tintOverlay;\n\n\t@Inject\n\tprivate VorkathRunWarningTextOverlay textOverlay;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Getter (AccessLevel.PACKAGE)\n\tprivate boolean shouldWarn;\n\n\tprivate boolean isFighting;\n\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tupdateShouldWarn();\n\t\toverlayManager.add(tintOverlay);\n\t\toverlayManager.add(textOverlay);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(tintOverlay);\n\t\toverlayManager.remove(textOverlay);\n\t}\n\n\t@Subscribe\n\tpublic void onVarbitChanged(VarbitChanged event) {\n\t\tif(event.getVarpId() \u003d\u003d RUN_VARIABLE_ID) {\n\t\t\tthis.updateShouldWarn();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onNpcChanged(NpcChanged event) {\n\t\tif (event.getOld().getId() \u003d\u003d NpcID.VORKATH_8059 \u0026\u0026 event.getNpc().getId() \u003d\u003d NpcID.VORKATH_8058) {\n\t\t\tisFighting \u003d true;\n\t\t\tthis.updateShouldWarn();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onNpcDespawned(NpcDespawned event) {\n\t\tif (VORKATH_ALIVE_IDS.contains(event.getNpc().getId())) {\n\t\t\tisFighting \u003d false;\n\t\t\tthis.updateShouldWarn();\n\t\t}\n\t}\n\n\tprivate void updateShouldWarn() {\n        this.shouldWarn \u003d this.isFighting \u0026\u0026 this.isRunEnabled();\n\t}\n\n\tprivate boolean isRunEnabled() {\n\t\treturn client.getVarpValue(RUN_VARIABLE_ID) \u003d\u003d 1;\n\t}\n\n\t@Provides\n\tVorkathRunWarningConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(VorkathRunWarningConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\vorkathrunwarning\\VorkathRunWarningPlugin.java"},{"fileName":"VorkathRunWarningTextOverlay.java","content":"package com.vorkathrunwarning;\n\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.TitleComponent;\n\nimport javax.inject.Inject;\nimport java.awt.Graphics2D;\nimport java.awt.Dimension;\n\npublic class VorkathRunWarningTextOverlay extends OverlayPanel {\n\n    private final VorkathRunWarningConfig config;\n    private final  VorkathRunWarningPlugin plugin;\n\n    @Inject\n    private VorkathRunWarningTextOverlay(VorkathRunWarningPlugin plugin, VorkathRunWarningConfig config) {\n        this.plugin \u003d plugin;\n        this.config \u003d config;\n        setPosition(OverlayPosition.ABOVE_CHATBOX_RIGHT);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        if (!this.plugin.isShouldWarn() || !this.config.displayTextWarning()) {\n            return null;\n        }\n        this.panelComponent.getChildren().add(TitleComponent.builder().text(\"Run Enabled!\").color(this.config.textColor()).build());\n        return super.render(graphics);\n    }\n}\n","filePath":"src\\main\\java\\com\\vorkathrunwarning\\VorkathRunWarningTextOverlay.java"},{"fileName":"VorkathRunWarningTintOverlay.java","content":"package com.vorkathrunwarning;\n\nimport net.runelite.api.Client;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.TitleComponent;\n\nimport javax.inject.Inject;\nimport java.awt.*;\n\npublic class VorkathRunWarningTintOverlay extends Overlay {\n\n    private final VorkathRunWarningConfig config;\n    private final  VorkathRunWarningPlugin plugin;\n    private final Client client;\n\n    @Inject\n    private VorkathRunWarningTintOverlay(VorkathRunWarningPlugin plugin, VorkathRunWarningConfig config, Client client) {\n        this.plugin \u003d plugin;\n        this.config \u003d config;\n        this.client \u003d client;\n        setPosition(OverlayPosition.DYNAMIC);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        if (!this.plugin.isShouldWarn() || !this.config.displayTintWarning()) {\n            return null;\n        }\n        Rectangle screenRect \u003d new Rectangle(0, 0, this.client.getCanvasWidth(), this.client.getCanvasHeight());\n        graphics.setColor(this.config.tintColor());\n        graphics.fill(screenRect);\n        graphics.draw(screenRect);\n        TitleComponent pluginIndicator \u003d TitleComponent.builder().text(\"Vorkath Run Warning Active\").build();\n        pluginIndicator.setPreferredLocation(new Point(8, 20));\n        pluginIndicator.render(graphics);\n        return null;\n    }\n}\n","filePath":"src\\main\\java\\com\\vorkathrunwarning\\VorkathRunWarningTintOverlay.java"},{"fileName":"VorkathRunWarningPluginTest.java","content":"package com.vorkathrunwarning;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class VorkathRunWarningPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(VorkathRunWarningPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\vorkathrunwarning\\VorkathRunWarningPluginTest.java"}]},{"commit":"6099efb9b1b554811d242f58a775eba69c6474dc","repository":"https://github.com/VerchaSEL/spec-sound-replacer.git","internalName":"spec-sound-replacer","files":[{"fileName":"SpecSoundPanel.java","content":"package com.verchasel.specsound;\n\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.ui.PluginPanel;\n\nimport javax.swing.*;\nimport javax.swing.border.EmptyBorder;\nimport javax.swing.event.ChangeEvent;\nimport javax.swing.filechooser.FileNameExtensionFilter;\nimport java.awt.*;\nimport java.io.File;\nimport java.util.function.Function;\n\nimport static com.verchasel.specsound.SpecSoundPlugin.*;\n\npublic class SpecSoundPanel extends PluginPanel\n{\n    private final ConfigManager configManager;\n\n    private final JCheckBox useBundledCheck;\n    private JButton chooseBtn \u003d null;\n    private JLabel pathLabel \u003d null;\n    private final JSlider volumeSlider;\n    private final JLabel volumeValue;\n\n    public SpecSoundPanel(ConfigManager configManager, Runnable testAction)\n    {\n        this.configManager \u003d configManager;\n\n        setLayout(new BorderLayout());\n        JPanel col \u003d new JPanel();\n        col.setLayout(new BoxLayout(col, BoxLayout.Y_AXIS));\n        col.setBorder(new EmptyBorder(12, 12, 16, 12));\n        add(col, BorderLayout.CENTER);\n\n        Function\u003cJComponent, JPanel\u003e row \u003d comp -\u003e {\n            JPanel p \u003d new JPanel(new FlowLayout(FlowLayout.CENTER, 8, 0));\n            p.setBorder(new EmptyBorder(0, 0, 10, 0));\n            p.add(comp);\n            return p;\n        };\n        Function\u003cJComponent[], JPanel\u003e rowMany \u003d comps -\u003e {\n            JPanel p \u003d new JPanel(new FlowLayout(FlowLayout.CENTER, 8, 0));\n            p.setBorder(new EmptyBorder(0, 0, 10, 0));\n            for (JComponent c : comps) p.add(c);\n            return p;\n        };\n\n        useBundledCheck \u003d new JCheckBox(\"Use bundled sound\");\n        useBundledCheck.addActionListener(e -\u003e {\n            boolean val \u003d useBundledCheck.isSelected();\n            setCfg(K_USE_BUNDLED, val);\n            if (val) {\n                setCfg(K_CUSTOM_PATH, \"\");\n                pathLabel.setText(\"(no file selected)\");\n                chooseBtn.setEnabled(false);\n            } else {\n                chooseBtn.setEnabled(true);\n            }\n        });\n        col.add(row.apply(useBundledCheck));\n\n        chooseBtn \u003d new JButton(\"Choose custom WAV\");\n        chooseBtn.addActionListener(e -\u003e {\n            JFileChooser fc \u003d new JFileChooser();\n            fc.setDialogTitle(\"Select a WAV file\");\n            fc.setFileFilter(new FileNameExtensionFilter(\"WAV files\", \"wav\", \"wave\"));\n            if (fc.showOpenDialog(this) \u003d\u003d JFileChooser.APPROVE_OPTION) {\n                File f \u003d fc.getSelectedFile();\n                if (f !\u003d null) {\n                    setCfg(K_CUSTOM_PATH, f.getAbsolutePath());\n                    setCfg(K_USE_BUNDLED, false);\n                    pathLabel.setText(shorten(f.getAbsolutePath()));\n                    useBundledCheck.setSelected(false);\n                    chooseBtn.setEnabled(true);\n                    JOptionPane.showMessageDialog(this, \"Custom sound set.\");\n                }\n            }\n        });\n        col.add(row.apply(chooseBtn));\n\n        pathLabel \u003d new JLabel(\"(no file selected)\", SwingConstants.CENTER);\n        JPanel pathRow \u003d row.apply(pathLabel);\n        pathRow.setBorder(new EmptyBorder(0, 0, 14, 0));\n        col.add(pathRow);\n\n        JLabel volLabel \u003d new JLabel(\"Volume\");\n        volumeSlider \u003d new JSlider(0, 100, 100);\n        volumeSlider.setPaintTicks(true);\n        volumeSlider.setMajorTickSpacing(25);\n        volumeSlider.setMinorTickSpacing(5);\n        volumeValue \u003d new JLabel(\"100%\");\n\n        volumeSlider.addChangeListener((ChangeEvent e) -\u003e {\n            int val \u003d volumeSlider.getValue();\n            volumeValue.setText(val + \"%\");\n            if (!volumeSlider.getValueIsAdjusting()) {\n                setCfg(K_VOLUME, val);\n            }\n        });\n\n        JPanel volRowPanel \u003d rowMany.apply(new JComponent[]{ volLabel, volumeSlider, volumeValue });\n        volRowPanel.setBorder(new EmptyBorder(6, 0, 14, 0));\n        col.add(volRowPanel);\n\n        JButton testBtn \u003d new JButton(\"Test sound\");\n        testBtn.addActionListener(e -\u003e { if (testAction !\u003d null) testAction.run(); });\n        col.add(row.apply(testBtn));\n\n        refreshFromConfig();\n    }\n\n    public void refreshFromConfig()\n    {\n        boolean useBundled \u003d getBool();\n        String path        \u003d getString();\n        int vol            \u003d getInt();\n\n        useBundledCheck.setSelected(useBundled);\n        chooseBtn.setEnabled(!useBundled);\n        pathLabel.setText(shorten(path));\n        volumeSlider.setValue(Math.max(0, Math.min(100, vol)));\n        volumeValue.setText(volumeSlider.getValue() + \"%\");\n    }\n\n    private void setCfg(String key, Object value)\n    {\n        configManager.setConfiguration(GROUP, key, value);\n    }\n    private boolean getBool()\n    {\n        String s \u003d configManager.getConfiguration(GROUP, K_USE_BUNDLED);\n        return (s \u003d\u003d null) ? D_USE_BUNDLED : Boolean.parseBoolean(s);\n    }\n    private int getInt()\n    {\n        String s \u003d configManager.getConfiguration(GROUP, K_VOLUME);\n        if (s \u003d\u003d null) return D_VOLUME;\n        try { return Integer.parseInt(s); } catch (Exception ignored) { return D_VOLUME; }\n    }\n    private String getString()\n    {\n        String s \u003d configManager.getConfiguration(GROUP, K_CUSTOM_PATH);\n        return (s \u003d\u003d null) ? D_CUSTOM_PATH : s;\n    }\n\n    private static String shorten(String s)\n    {\n        if (s \u003d\u003d null || s.isBlank()) return \"(no file selected)\";\n        return s.length() \u003e 60 ? \"\" + s.substring(s.length() - 60) : s;\n    }\n}\n","filePath":"src\\main\\java\\com\\verchasel\\specsound\\SpecSoundPanel.java"},{"fileName":"SpecSoundPlugin.java","content":"package com.verchasel.specsound;\n\nimport lombok.extern.slf4j.Slf4j;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.events.GameTick;\n\nimport net.runelite.client.audio.AudioPlayer;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.util.ImageUtil;\n\nimport javax.inject.Inject;\nimport javax.swing.SwingUtilities;\nimport java.awt.image.BufferedImage;\nimport java.io.File;\n\n@Slf4j\n@PluginDescriptor(\n        name \u003d \"Special Attack Sound\",\n        description \u003d \"Plays one custom WAV when your special-attack energy decreases. In-client file picker and volumeno sound IDs or folders.\",\n        tags \u003d {\"special-attack\",\"spec\",\"audio\",\"sound\",\"sfx\",\"custom\"}\n)\npublic class SpecSoundPlugin extends Plugin\n{\n    private static final int VARP_SPEC_PERCENT \u003d 300;\n\n    static final String GROUP         \u003d \"specsound\";\n    static final String K_USE_BUNDLED \u003d \"useBundled\";\n    static final String K_CUSTOM_PATH \u003d \"customPath\";\n    static final String K_VOLUME      \u003d \"volume\";\n\n    static final boolean D_USE_BUNDLED \u003d true;\n    static final String  D_CUSTOM_PATH \u003d \"\";\n    static final int     D_VOLUME      \u003d 100;\n\n    private int  lastSpecPct \u003d -1;\n    private long lastPlayMs  \u003d 0;\n\n    @Inject private Client client;\n    @Inject private ClientToolbar clientToolbar;\n    @Inject private ConfigManager configManager;\n    @Inject private AudioPlayer audioPlayer;\n    @Inject private ClientThread clientThread;\n\n    private NavigationButton navButton;\n    private SpecSoundPanel panel;\n\n    @Override\n    protected void startUp()\n    {\n        if (configManager.getConfiguration(GROUP, K_USE_BUNDLED) \u003d\u003d null)\n            configManager.setConfiguration(GROUP, K_USE_BUNDLED, D_USE_BUNDLED);\n        if (configManager.getConfiguration(GROUP, K_CUSTOM_PATH) \u003d\u003d null)\n            configManager.setConfiguration(GROUP, K_CUSTOM_PATH, D_CUSTOM_PATH);\n        if (configManager.getConfiguration(GROUP, K_VOLUME) \u003d\u003d null)\n            configManager.setConfiguration(GROUP, K_VOLUME, D_VOLUME);\n\n        panel \u003d new SpecSoundPanel(configManager, this::playCustomSound);\n\n        BufferedImage icon \u003d ImageUtil.loadImageResource(SpecSoundPlugin.class, \"/icons/icon.png\");\n        navButton \u003d NavigationButton.builder()\n                .tooltip(\"Spec Sound\")\n                .icon(icon)\n                .panel(panel)\n                .priority(5)\n                .build();\n        clientToolbar.addNavigation(navButton);\n\n        clientThread.invoke(() -\u003e {\n            lastSpecPct \u003d client.getVarpValue(VARP_SPEC_PERCENT);\n            lastPlayMs  \u003d 0;\n        });\n\n        SwingUtilities.invokeLater(panel::refreshFromConfig);\n    }\n\n    @Override\n    protected void shutDown()\n    {\n        if (navButton !\u003d null) clientToolbar.removeNavigation(navButton);\n        navButton \u003d null;\n        panel \u003d null;\n\n        lastSpecPct \u003d -1;\n        lastPlayMs  \u003d 0;\n    }\n\n    @Subscribe\n    public void onGameTick(GameTick t)\n    {\n        final int now \u003d client.getVarpValue(VARP_SPEC_PERCENT);\n\n        if (lastSpecPct \u003e\u003d 0 \u0026\u0026 now \u003c lastSpecPct \u0026\u0026 System.currentTimeMillis() - lastPlayMs \u003e 250)\n        {\n            log.debug(\"Spec drop detected: {} -\u003e {}\", lastSpecPct, now);\n            playCustomSound();\n            lastPlayMs \u003d System.currentTimeMillis();\n        }\n\n        lastSpecPct \u003d now;\n    }\n\n    void playCustomSound()\n    {\n        try\n        {\n            final boolean useBundled \u003d getBool();\n            final String path        \u003d getString();\n            final float gainDb       \u003d volumeToDb(getInt());\n\n            if (useBundled)\n            {\n                if (SpecSoundPlugin.class.getResource(\"/specsound/bundled.wav\") \u003d\u003d null) {\n                    log.warn(\"Bundled sound missing at /specsound/bundled.wav\");\n                    return;\n                }\n                audioPlayer.play(SpecSoundPlugin.class, \"/specsound/bundled.wav\", gainDb);\n            }\n            else\n            {\n                if (path !\u003d null \u0026\u0026 !path.isBlank())\n                {\n                    final File f \u003d new File(path);\n                    if (f.exists() \u0026\u0026 f.isFile())\n                    {\n                        audioPlayer.play(f, gainDb);\n                        return;\n                    }\n                    log.info(\"Custom file missing ({}), falling back to bundled\", path);\n                }\n                if (SpecSoundPlugin.class.getResource(\"/specsound/bundled.wav\") !\u003d null) {\n                    audioPlayer.play(SpecSoundPlugin.class, \"/specsound/bundled.wav\", gainDb);\n                } else {\n                    log.warn(\"Fallback bundled sound missing at /specsound/bundled.wav\");\n                }\n            }\n        }\n        catch (Exception ex)\n        {\n            log.warn(\"Failed to play custom spec sound\", ex);\n        }\n    }\n\n    boolean getBool() {\n        final String s \u003d configManager.getConfiguration(GROUP, SpecSoundPlugin.K_USE_BUNDLED);\n        return (s \u003d\u003d null) ? SpecSoundPlugin.D_USE_BUNDLED : Boolean.parseBoolean(s);\n    }\n    int getInt() {\n        final String s \u003d configManager.getConfiguration(GROUP, SpecSoundPlugin.K_VOLUME);\n        if (s \u003d\u003d null) return SpecSoundPlugin.D_VOLUME;\n        try { return Integer.parseInt(s); } catch (Exception ignored) { return SpecSoundPlugin.D_VOLUME; }\n    }\n    String getString() {\n        final String s \u003d configManager.getConfiguration(GROUP, SpecSoundPlugin.K_CUSTOM_PATH);\n        return (s \u003d\u003d null) ? SpecSoundPlugin.D_CUSTOM_PATH : s;\n    }\n\n    private static float volumeToDb(int vol0to100)\n    {\n        int v \u003d Math.max(0, Math.min(100, vol0to100));\n        return (v \u003d\u003d 0) ? -80f : (float)(20.0 * Math.log10(v / 100.0));\n    }\n}\n","filePath":"src\\main\\java\\com\\verchasel\\specsound\\SpecSoundPlugin.java"},{"fileName":"SpecSoundPluginTest.java","content":"package com.verchasel.specsound;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class SpecSoundPluginTest {\n    public static void main(String[] args) throws Exception {\n        ExternalPluginManager.loadBuiltin(SpecSoundPlugin.class);\n        RuneLite.main(args);\n    }\n}","filePath":"src\\test\\java\\com\\verchasel\\specsound\\SpecSoundPluginTest.java"}]},{"commit":"b3c5fe74e9ca44157de7996823889e2b092be391","repository":"https://github.com/DunkingOreos/Cannon-Damage.git","internalName":"cannon-damage","files":[{"fileName":"CannonDamageOverlay.java","content":"package com.cannondamage;\n\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.LineComponent;\n\nimport javax.inject.Inject;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\n\npublic class CannonDamageOverlay extends OverlayPanel\n{\n    private final CannonDamagePlugin plugin;\n\n    @Inject\n    public CannonDamageOverlay(CannonDamagePlugin plugin)\n    {\n        super(plugin);\n        this.plugin \u003d plugin;\n        setPosition(OverlayPosition.TOP_LEFT);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics)\n    {\n        if (!plugin.isPluginEnabled())\n        {\n            return null;\n        }\n\n        panelComponent.getChildren().clear();\n\n        panelComponent.getChildren().add(LineComponent.builder()\n                .left(\"Cannon Damage:\")\n                .right(String.valueOf(plugin.getTotalDamage()))\n                .build());\n\n        panelComponent.getChildren().add(LineComponent.builder()\n                .left(\"Cannonballs Used:\")\n                .right(String.valueOf(plugin.getCannonballsUsed()))\n                .build());\n\n        panelComponent.getChildren().add(LineComponent.builder()\n                .left(\"Avg Dmg/Ball:\")\n                .right(String.format(\"%.2f\", plugin.getAverageDamagePerCannonball()))\n                .build());\n\n        return super.render(graphics);\n    }\n}\n","filePath":"src\\main\\java\\com\\cannondamage\\CannonDamageOverlay.java"},{"fileName":"CannonDamagePlugin.java","content":"package com.cannondamage;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameObject;\nimport net.runelite.api.Projectile;\nimport net.runelite.api.Skill;\nimport net.runelite.api.events.GameObjectDespawned;\nimport net.runelite.api.events.GameObjectSpawned;\nimport net.runelite.api.events.ProjectileMoved;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\nimport javax.inject.Inject;\nimport java.util.Queue;\nimport java.util.LinkedList;\nimport java.util.Set;\n\n@PluginDescriptor(\n        name \u003d \"Cannon Damage\",\n        description \u003d \"Tracks the amount of damage done from the cannon and the number of cannonballs used.\",\n        tags \u003d {\"cannon\", \"damage\", \"tracker\"}\n)\n@Slf4j\npublic class CannonDamagePlugin extends Plugin {\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private ClientThread clientThread;\n\n    @Inject\n    private OverlayManager overlayManager;\n\n    @Inject\n    private CannonDamageOverlay cannonDamageOverlay;\n\n    private static final Set\u003cInteger\u003e CANNON_GAME_OBJECT_IDS \u003d Set.of(6, 43027);\n    private static final Set\u003cInteger\u003e CANNONBALL_PROJECTILE_IDS \u003d Set.of(53, 2018);\n    private static final double XP_PER_DAMAGE \u003d 2.0;\n\n    private final Queue\u003cProjectile\u003e trackedProjectiles \u003d new LinkedList\u003c\u003e();\n    private boolean cannonIsPlaced \u003d false;\n\n    private int totalDamage \u003d 0;\n    private int cannonballsUsed \u003d 0;\n\n    private double cannonStartRangedXp \u003d 0;\n    private double lastRangedXp \u003d 0;\n    private boolean hasStartedTrackingXp \u003d false;\n\n    private boolean pluginEnabled \u003d false;\n\n    @Override\n    protected void startUp() {\n        log.info(\"Cannon Damage Plugin started.\");\n        overlayManager.add(cannonDamageOverlay);\n        pluginEnabled \u003d true;\n    }\n\n    @Override\n    protected void shutDown() {\n        log.info(\"Cannon Damage Plugin stopped.\");\n        overlayManager.remove(cannonDamageOverlay);\n        pluginEnabled \u003d false;\n        resetTracker();\n    }\n\n    public boolean isPluginEnabled() {\n        return pluginEnabled;\n    }\n\n    private void resetTracker() {\n        totalDamage \u003d 0;\n        cannonballsUsed \u003d 0;\n        cannonIsPlaced \u003d false;\n        trackedProjectiles.clear();\n        cannonStartRangedXp \u003d 0;\n        lastRangedXp \u003d 0;\n        hasStartedTrackingXp \u003d false;\n    }\n\n    @Subscribe\n    public void onGameObjectSpawned(GameObjectSpawned event) {\n        GameObject spawnedObject \u003d event.getGameObject();\n\n        if (CANNON_GAME_OBJECT_IDS.contains(spawnedObject.getId())) {\n            cannonIsPlaced \u003d true;\n        }\n    }\n\n    @Subscribe\n    public void onGameObjectDespawned(GameObjectDespawned event) {\n        GameObject despawnedObject \u003d event.getGameObject();\n\n        if (CANNON_GAME_OBJECT_IDS.contains(despawnedObject.getId())) {\n            cannonIsPlaced \u003d false;\n        }\n    }\n\n    @Subscribe\n    public void onProjectileMoved(ProjectileMoved event) {\n        Projectile projectile \u003d event.getProjectile();\n\n        if (CANNONBALL_PROJECTILE_IDS.contains(projectile.getId()) \u0026\u0026 !trackedProjectiles.contains(projectile)) {\n            if (trackedProjectiles.size() \u003e\u003d 5) {\n                trackedProjectiles.poll();\n            }\n\n            trackedProjectiles.add(projectile);\n            cannonballsUsed++;\n\n            if (!hasStartedTrackingXp) {\n                hasStartedTrackingXp \u003d true;\n                cannonStartRangedXp \u003d client.getSkillExperience(Skill.RANGED);\n                lastRangedXp \u003d cannonStartRangedXp;\n            }\n        }\n    }\n\n    @Subscribe\n    public void onGameTick(GameTick event) {\n        if (!pluginEnabled || !hasStartedTrackingXp) {\n            return;\n        }\n\n        double currentRangedXp \u003d client.getSkillExperience(Skill.RANGED);\n        double xpGained \u003d currentRangedXp - lastRangedXp;\n\n        if (xpGained \u003e 0) {\n            int damageDealt \u003d (int) Math.round(xpGained / XP_PER_DAMAGE);\n            totalDamage +\u003d damageDealt;\n            lastRangedXp \u003d currentRangedXp;\n        }\n    }\n\n    public int getTotalDamage() {\n        return totalDamage;\n    }\n\n    public int getCannonballsUsed() {\n        return cannonballsUsed;\n    }\n\n    public double getAverageDamagePerCannonball() {\n        return (cannonballsUsed \u003e 0) ? (double) totalDamage / cannonballsUsed : 0.0;\n    }\n}\n","filePath":"src\\main\\java\\com\\cannondamage\\CannonDamagePlugin.java"},{"fileName":"CannonDamagePluginTest.java","content":"package com.cannondamage;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class CannonDamagePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(CannonDamagePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\cannondamage\\CannonDamagePluginTest.java"}]},{"commit":"d13ab66ffe6eedc696db3003add1b8c15202d3fc","repository":"https://github.com/Richardant/minimaphider.git","internalName":"minimaphider","files":[{"fileName":"MinimapHiderPlugin.java","content":"package com.minimaphider;\n\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.ScriptID;\nimport net.runelite.api.events.ScriptPostFired;\nimport net.runelite.api.gameval.InterfaceID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\n\n@Slf4j\n@PluginDescriptor(\n        name \u003d \"Minimap Hider\",\n        description \u003d \"Hides minimap\",\n        tags \u003d {\"minimap\", \"hide\"}\n)\npublic class MinimapHiderPlugin extends Plugin\n{\n    @Inject\n    private Client client;\n\n    @Override\n    protected void startUp()\n    {\n        setMapHidden(true);\n    }\n\n    @Override\n    protected void shutDown()\n    {\n        setMapHidden(false);\n    }\n\n    @Subscribe\n    public void onScriptPostFired(ScriptPostFired s)\n    {\n        if (s.getScriptId() \u003d\u003d ScriptID.TOPLEVEL_REDRAW || s.getScriptId() \u003d\u003d 902 || s.getScriptId() \u003d\u003d 903 || s.getScriptId() \u003d\u003d 920)\n        {\n            setMapHidden(true);\n        }\n    }\n\n    private void setMapHidden(boolean hidden)\n    {\n        Widget classic \u003d client.getWidget(InterfaceID.TOPLEVEL_OSRS_STRETCH, 22);\n        if (classic !\u003d null)\n        {\n            classic.setHidden(hidden);\n        }\n        for (int i \u003d 23; i \u003c\u003d 32; i++)\n        {\n            Widget modern \u003d client.getWidget(InterfaceID.TOPLEVEL_PRE_EOC, i);\n            if (modern !\u003d null)\n            {\n                modern.setHidden(hidden);\n            }\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\minimaphider\\MinimapHiderPlugin.java"},{"fileName":"MinimapHiderPluginTest.java","content":"package com.minimaphider;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class MinimapHiderPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(MinimapHiderPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\minimaphider\\MinimapHiderPluginTest.java"}]},{"commit":"682d3107f6f683e443cb193d64329dd48b17bfc5","repository":"https://github.com/michael-gutman/konar-milestone-reminder.git","internalName":"konar-milestone-reminder","files":[{"fileName":"KonarReminderConfig.java","content":"package com.konarreminder;\n\nimport java.awt.Color;\n\nimport net.runelite.client.config.*;\n\n@ConfigGroup(KonarReminderConfig.CONFIG_GROUP)\npublic interface KonarReminderConfig extends Config\n{\n\tString CONFIG_GROUP \u003d \"konarreminder\";\n\tString TASK_UNIT \u003d \" tasks\";\n\tString DEFAULT_REMINDER_MSG \u003d \"You should visit Konar to get bonus points for your next task.\";\n\tString SLAYER_MASTERS \u003d \"Turael,Aya,Spria,Krystilia,Mazchna,Achtryn,Vannaka,Chaeldar,Nieve,Steve,Duradel,Kuradal\";\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"multiple\",\n\t\t\tname \u003d \"Milestone Reminder\",\n\t\t\tdescription \u003d \"Sets the task multiple/milestone to activate the reminder before\"\n\t)\n\t@Units(KonarReminderConfig.TASK_UNIT)\n\tdefault int multiple()\n\t{\n\t\treturn 50;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"chatMessageColor\",\n\t\t\tname \u003d \"Chat Message Color\",\n\t\t\tdescription \u003d \"The chat message reminder to use Konar will be this color.\"\n\t)\n\tdefault Color chatMessageColor()\n\t{\n\t\treturn Color.decode(\"#11979B\");\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"chatMessageText\",\n\t\t\tname \u003d \"Chat Message Text\",\n\t\t\tdescription \u003d \"The chat message that is sent in the chatbox.\"\n\t)\n\tdefault String chatMessageText() { return DEFAULT_REMINDER_MSG; }\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Other Master Highlight style\",\n\t\t\tdescription \u003d \"The render style of NPC highlighting for other slayer masters\",\n\t\t\tposition \u003d 0\n\t)\n\tString renderStyleSection \u003d \"renderStyleSection\";\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"hideOtherSlayerMasters\",\n\t\t\tname \u003d \"Hide non-Konar on reminder\",\n\t\t\tdescription \u003d \"Configures whether or not other slayer masters should be hidden when you should go to konar\",\n\t\t\tsection \u003d renderStyleSection,\n\t\t\tposition \u003d -2\n\t)\n\tdefault boolean hideOtherSlayerMasters()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"otherHighlight\",\n\t\t\tname \u003d \"Highlight non-Konar on reminder\",\n\t\t\tdescription \u003d \"Configures whether or not other slayer masters should be highlighted when you should go to konar\",\n\t\t\tsection \u003d renderStyleSection,\n\t\t\tposition \u003d -1\n\t)\n\tdefault boolean otherHighlight()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 0,\n\t\t\tkeyName \u003d \"highlightHull\",\n\t\t\tname \u003d \"Highlight hull\",\n\t\t\tdescription \u003d \"Configures whether or not NPC should be highlighted by hull\",\n\t\t\tsection \u003d renderStyleSection\n\t)\n\tdefault boolean highlightHull()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"highlightTile\",\n\t\t\tname \u003d \"Highlight tile\",\n\t\t\tdescription \u003d \"Configures whether or not NPC should be highlighted by tile\",\n\t\t\tsection \u003d renderStyleSection\n\t)\n\tdefault boolean highlightTile()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 5,\n\t\t\tkeyName \u003d \"highlightOutline\",\n\t\t\tname \u003d \"Highlight outline\",\n\t\t\tdescription \u003d \"Configures whether or not the model of the NPC should be highlighted by outline\",\n\t\t\tsection \u003d renderStyleSection\n\t)\n\tdefault boolean highlightOutline()\n\t{\n\t\treturn true;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 10,\n\t\t\tkeyName \u003d \"npcColor\",\n\t\t\tname \u003d \"Highlight Color\",\n\t\t\tdescription \u003d \"Color of the NPC highlight border, menu, and text\",\n\t\t\tsection \u003d renderStyleSection\n\t)\n\tdefault Color highlightColor()\n\t{\n\t\treturn Color.RED;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 11,\n\t\t\tkeyName \u003d \"fillColor\",\n\t\t\tname \u003d \"Fill Color\",\n\t\t\tdescription \u003d \"Color of the NPC highlight fill\",\n\t\t\tsection \u003d renderStyleSection\n\t)\n\tdefault Color fillColor()\n\t{\n\t\treturn new Color(0, 255, 255, 20);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 12,\n\t\t\tkeyName \u003d \"borderWidth\",\n\t\t\tname \u003d \"Border Width\",\n\t\t\tdescription \u003d \"Width of the highlighted NPC border\",\n\t\t\tsection \u003d renderStyleSection\n\t)\n\tdefault double borderWidth()\n\t{\n\t\treturn 2;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 13,\n\t\t\tkeyName \u003d \"outlineFeather\",\n\t\t\tname \u003d \"Outline feather\",\n\t\t\tdescription \u003d \"Specify between 0-4 how much of the model outline should be faded\",\n\t\t\tsection \u003d renderStyleSection\n\t)\n\t@Range(\n\t\t\tmin \u003d 0,\n\t\t\tmax \u003d 4\n\t)\n\tdefault int outlineFeather()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"reminderStatus\",\n\t\t\tname \u003d \"\",\n\t\t\tdescription \u003d \"\",\n\t\t\thidden \u003d true\n\t)\n\tdefault boolean getReminderStatus()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"reminderStatus\",\n\t\t\tname \u003d \"\",\n\t\t\tdescription \u003d \"\"\n\t)\n\tvoid setReminderStatus(boolean reminderStatus);\n\n}\n","filePath":"src\\main\\java\\com\\konarreminder\\KonarReminderConfig.java"},{"fileName":"KonarReminderPlugin.java","content":"package com.konarreminder;\n\nimport com.google.common.annotations.VisibleForTesting;\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\n\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\n\nimport java.time.Instant;\nimport java.util.*;\nimport java.util.function.Function;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\nimport net.runelite.api.*;\nimport net.runelite.api.events.*;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.callback.Hooks;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.game.npcoverlay.HighlightedNpc;\nimport net.runelite.client.game.npcoverlay.NpcOverlayService;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.util.ColorUtil;\nimport net.runelite.client.util.Text;\nimport net.runelite.client.util.WildcardMatcher;\n\nimport static com.konarreminder.KonarReminderConfig.CONFIG_GROUP;\n\n@Slf4j\n@PluginDescriptor(\n\t\tname \u003d \"Konar Milestone Reminder\"\n)\npublic class KonarReminderPlugin extends Plugin\n{\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate KonarReminderConfig config;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate NpcOverlayService npcOverlayService;\n\n\t@Inject\n\tprivate Hooks hooks;\n\n\t/**\n\t * NPCs to highlight\n\t */\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate final Map\u003cNPC, HighlightedNpc\u003e highlightedNpcs \u003d new HashMap\u003c\u003e();\n\n\t/**\n\t * The time when the last game tick event ran.\n\t */\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate Instant lastTickUpdate;\n\n\t/**\n\t * Highlight strings from the configuration\n\t */\n\tprivate List\u003cString\u003e highlights \u003d new ArrayList\u003c\u003e();\n\n\tprivate final Hooks.RenderableDrawListener drawListener \u003d this::shouldDraw;\n\n\tprivate final Function\u003cNPC, HighlightedNpc\u003e isHighlighted \u003d highlightedNpcs::get;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tnpcOverlayService.registerHighlighter(isHighlighted);\n\t\thooks.registerRenderableDrawListener(drawListener);\n\n\t\tclientThread.invoke(this::rebuild);\n\n\t\tlog.info(\"Konar Milestone Reminder started!\");\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tnpcOverlayService.unregisterHighlighter(isHighlighted);\n\t\thooks.unregisterRenderableDrawListener(drawListener);\n\n\t\tclientThread.invoke(highlightedNpcs::clear);\n\n\t\tlog.info(\"Konar Milestone Reminder stopped!\");\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged event)\n\t{\n\t\tif (event.getGameState() \u003d\u003d GameState.LOGIN_SCREEN ||\n\t\t\t\tevent.getGameState() \u003d\u003d GameState.HOPPING)\n\t\t{\n\t\t\thighlightedNpcs.clear();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged configChanged)\n\t{\n\t\tif (!configChanged.getGroup().equals(CONFIG_GROUP))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tclientThread.invoke(this::rebuild);\n\t}\n\n\t@Subscribe\n\tpublic void onNpcSpawned(NpcSpawned npcSpawned)\n\t{\n\t\tfinal NPC npc \u003d npcSpawned.getNpc();\n\t\tfinal String npcName \u003d npc.getName();\n\n\t\tif (npcName \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (highlightMatchesNPCName(npcName))\n\t\t{\n\t\t\thighlightedNpcs.put(npc, highlightedNpc(npc));\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onNpcDespawned(NpcDespawned npcDespawned)\n\t{\n\t\tfinal NPC npc \u003d npcDespawned.getNpc();\n\n\t\thighlightedNpcs.remove(npc);\n\t}\n\n\t@Subscribe\n\tpublic void onNpcChanged(NpcChanged event)\n\t{\n\t\tfinal NPC npc \u003d event.getNpc();\n\t\tfinal String npcName \u003d npc.getName();\n\n\t\thighlightedNpcs.remove(npc);\n\n\t\tif (npcName \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event)\n\t{\n\t\tlastTickUpdate \u003d Instant.now();\n\t}\n\n\t@VisibleForTesting\n\tList\u003cString\u003e getHighlights()\n\t{\n\t\treturn Text.fromCSV(config.SLAYER_MASTERS);\n\t}\n\n\n\tvoid rebuild()\n\t{\n\t\thighlights \u003d getHighlights();\n\t\thighlightedNpcs.clear();\n\n\t\tif (client.getGameState() !\u003d GameState.LOGGED_IN \u0026\u0026\n\t\t\t\tclient.getGameState() !\u003d GameState.LOADING)\n\t\t{\n\t\t\t// NPCs are still in the client after logging out,\n\t\t\t// but we don\u0027t want to highlight those.\n\t\t\treturn;\n\t\t}\n\n\t\tfor (NPC npc : client.getNpcs())\n\t\t{\n\t\t\tfinal String npcName \u003d npc.getName();\n\n\t\t\tif (npcName \u003d\u003d null)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (highlightMatchesNPCName(npcName))\n\t\t\t{\n\t\t\t\thighlightedNpcs.put(npc, highlightedNpc(npc));\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\n\t\tnpcOverlayService.rebuild();\n\t}\n\n\tprivate boolean highlightMatchesNPCName(String npcName)\n\t{\n\t\tfor (String highlight : highlights)\n\t\t{\n\t\t\tif (WildcardMatcher.matches(highlight, npcName))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate HighlightedNpc highlightedNpc(NPC npc)\n\t{\n\t\tif (config.otherHighlight() \u0026\u0026 config.getReminderStatus()) {\n\t\t\treturn HighlightedNpc.builder()\n\t\t\t\t\t.npc(npc)\n\t\t\t\t\t.highlightColor(config.highlightColor())\n\t\t\t\t\t.fillColor(config.fillColor())\n\t\t\t\t\t.hull(config.highlightHull())\n\t\t\t\t\t.tile(config.highlightTile())\n\t\t\t\t\t.outline(config.highlightOutline())\n\t\t\t\t\t.borderWidth((float) config.borderWidth())\n\t\t\t\t\t.outlineFeather(config.outlineFeather())\n\t\t\t\t\t.build();\n\t\t}\n\t\treturn null;\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage chatMessage)\n\t{\n\t\tString message \u003d chatMessage.getMessage();\n\t\tif (chatMessage.getType() !\u003d ChatMessageType.GAMEMESSAGE)\n\t\t\treturn;\n\n\t\tString reminderText \u003d config.chatMessageText().isEmpty() ? config.DEFAULT_REMINDER_MSG : config.chatMessageText();\n\t\tString reminderMessage \u003d ColorUtil.wrapWithColorTag(reminderText, config.chatMessageColor());\n\t\tif (message.equals(reminderMessage))\n\t\t\treturn;\n\n\t\tPattern streakPattern \u003d Pattern.compile(\"\\\\d+ tasks\");\n\t\tMatcher messageMatcher \u003d streakPattern.matcher(message);\n\t\tif (!messageMatcher.find())\n\t\t\treturn;\n\n\t\tint streak \u003d Integer.parseInt(messageMatcher.group().replaceAll(\"\\\\D\", \"\"));\n\t\tif ((streak + 1) % config.multiple() \u003d\u003d 0) {\n\t\t\tconfig.setReminderStatus(true);\n\t\t\tclient.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", reminderMessage, null);\n\t\t} else {\n\t\t\tconfig.setReminderStatus(false);\n\t\t}\n\t\trebuild();\n\t}\n\n\t@Provides\n\tKonarReminderConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(KonarReminderConfig.class);\n\t}\n\n\t@VisibleForTesting\n\tboolean shouldDraw(Renderable renderable, boolean drawingUI)\n\t{\n\t\tif (renderable instanceof NPC)\n\t\t{\n\t\t\tNPC npc \u003d (NPC) renderable;\n\n\t\t\tif (highlightMatchesNPCName(npc.getName()) \u0026\u0026 config.getReminderStatus())\n\t\t\t{\n\t\t\t\treturn !config.hideOtherSlayerMasters();\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n}\n","filePath":"src\\main\\java\\com\\konarreminder\\KonarReminderPlugin.java"},{"fileName":"KonarReminderPluginTest.java","content":"package com.konarreminder;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class KonarReminderPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(KonarReminderPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\konarreminder\\KonarReminderPluginTest.java"}]},{"commit":"6bd14a006a9d8b94addde53ec947d87210de480a","repository":"https://github.com/Skretzo/runelite-plugins.git","internalName":"tunnel-vision","files":[{"fileName":"TunnelVisionPlugin.java","content":"package com.tunnelvision;\n\nimport java.awt.AWTEvent;\nimport java.awt.Component;\nimport java.awt.Container;\nimport java.awt.IllegalComponentStateException;\nimport java.awt.Toolkit;\nimport java.awt.event.AWTEventListener;\nimport java.awt.event.ComponentAdapter;\nimport java.awt.event.ComponentEvent;\nimport java.awt.event.KeyEvent;\nimport java.awt.event.MouseEvent;\nimport java.awt.event.MouseWheelEvent;\nimport java.awt.geom.Ellipse2D;\nimport javax.inject.Inject;\nimport javax.swing.JOptionPane;\nimport javax.swing.JRootPane;\nimport javax.swing.SwingUtilities;\nimport net.runelite.api.Client;\nimport net.runelite.client.config.RuneLiteConfig;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ContainableFrame;\n\n@PluginDescriptor(\n\tname \u003d \"Tunnel vision\",\n\tdescription \u003d \"Crop the client to secretly multitask\",\n\ttags \u003d {\"circle\", \"resize\", \"small\", \"hide\"}\n)\npublic class TunnelVisionPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate RuneLiteConfig runeLiteConfig;\n\n\tprivate int oldX;\n\tprivate int oldY;\n\tprivate int oldWidth;\n\tprivate int oldHeight;\n\tprivate int radius \u003d 200;\n\tprivate int diagonal \u003d Integer.MAX_VALUE;\n\tprivate ContainableFrame frame \u003d null;\n\tprivate boolean isHotkeyPressed \u003d false;\n\n\tprivate final AWTEventListener awtKeyListener \u003d awtEvent -\u003e\n\t{\n\t\tif (awtEvent instanceof KeyEvent)\n\t\t{\n\t\t\tKeyEvent keyEvent \u003d (KeyEvent) awtEvent;\n\n\t\t\tif (keyEvent.getKeyCode() !\u003d KeyEvent.VK_ALT)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (keyEvent.getID() \u003d\u003d KeyEvent.KEY_PRESSED)\n\t\t\t{\n\t\t\t\tisHotkeyPressed \u003d true;\n\t\t\t}\n\t\t\telse if (keyEvent.getID() \u003d\u003d KeyEvent.KEY_RELEASED)\n\t\t\t{\n\t\t\t\tisHotkeyPressed \u003d false;\n\t\t\t}\n\t\t}\n\t};\n\tprivate final AWTEventListener awtMouseWheelListener \u003d awtEvent -\u003e\n\t{\n\t\tif (!isHotkeyPressed)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (awtEvent instanceof MouseWheelEvent)\n\t\t{\n\t\t\tMouseWheelEvent mouseWheelEvent \u003d (MouseWheelEvent) awtEvent;\n\n\t\t\tint direction \u003d mouseWheelEvent.getWheelRotation();\n\t\t\tif (direction \u003e 0)\n\t\t\t{\n\t\t\t\tradius \u003d Math.min(radius + 10, diagonal);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tradius \u003d Math.max(radius - 10, 10);\n\t\t\t}\n\n\t\t\tmouseWheelEvent.consume();\n\n\t\t\tupdate(mouseWheelEvent.getXOnScreen(), mouseWheelEvent.getYOnScreen());\n\t\t}\n\t};\n\tprivate final AWTEventListener awtMouseListener \u003d awtEvent -\u003e\n\t{\n\t\tif (awtEvent instanceof MouseEvent)\n\t\t{\n\t\t\tMouseEvent mouseEvent \u003d (MouseEvent) awtEvent;\n\t\t\tupdate(mouseEvent.getXOnScreen(), mouseEvent.getYOnScreen());\n\t\t}\n\t};\n\tprivate final ComponentAdapter clientResizeListener \u003d new ComponentAdapter()\n\t{\n\t\t@Override\n\t\tpublic void componentResized(ComponentEvent componentEvent)\n\t\t{\n\t\t\tint width \u003d frame.getWidth();\n\t\t\tint height \u003d frame.getHeight();\n\t\t\tdiagonal \u003d (int) Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2)) + 1;\n\n\t\t\tif (width \u003c oldWidth || height \u003c oldHeight)\n\t\t\t{\n\t\t\t\tupdate(oldX + frame.getX(), oldY + frame.getY());\n\t\t\t}\n\n\t\t\toldWidth \u003d width;\n\t\t\toldHeight \u003d height;\n\t\t}\n\t};\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tfindFrame(client);\n\t\tToolkit.getDefaultToolkit().addAWTEventListener(awtKeyListener, AWTEvent.KEY_EVENT_MASK);\n\t\tToolkit.getDefaultToolkit().addAWTEventListener(awtMouseWheelListener, AWTEvent.MOUSE_WHEEL_EVENT_MASK);\n\t\tToolkit.getDefaultToolkit().addAWTEventListener(awtMouseListener, AWTEvent.MOUSE_MOTION_EVENT_MASK);\n\t\tframe.addComponentListener(clientResizeListener);\n\n\t\tif (!frame.isVisible())\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tframe.setUndecorated(true);\n\t\t\t\tframe.getRootPane().setWindowDecorationStyle(JRootPane.FRAME);\n\t\t\t}\n\t\t\tcatch (IllegalComponentStateException e)\n\t\t\t{\n\t\t\t\tSwingUtilities.invokeLater(() -\u003e JOptionPane.showMessageDialog(frame,\n\t\t\t\t\t\"Unable to start the plugin.\\n\"\n\t\t\t\t\t+ \"The plugin was unable to remove the client window UI \"\n\t\t\t\t\t+ \"decoration, which is necessary to enable this plugin. \"\n\t\t\t\t\t+ \"Please restart the client to try again.\",\n\t\t\t\t\t\"Unable to start the plugin\", JOptionPane.ERROR_MESSAGE));\n\t\t\t}\n\t\t}\n\t\telse if (!frame.isUndecorated())\n\t\t{\n\t\t\tSwingUtilities.invokeLater(() -\u003e JOptionPane.showMessageDialog(frame,\n\t\t\t\t\"Please restart the client to properly start the plugin.\\n\"\n\t\t\t\t+ (!runeLiteConfig.enableCustomChrome() ? (\"This plugin will \"\n\t\t\t\t+ \"re-enable the custom chrome taskbar while the plugin is active. \"\n\t\t\t\t+ \"Otherwise the client no longer has an exit button. The taskbar \"\n\t\t\t\t+ \"will be removed again once the plugin is deactivated.\\n\") : \"\")\n\t\t\t\t+ \"While using the plugin you can hold down the ALT key and use \"\n\t\t\t\t+ \"the mouse scroll wheel to change the size of the cropped area.\\n\"\n\t\t\t\t+ \"It is unfortunately not possible to resize the client while \"\n\t\t\t\t+ \"this plugin is activated.\",\n\t\t\t\t\"Restart the client\", JOptionPane.INFORMATION_MESSAGE));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tupdate(oldX + frame.getX(), oldY + frame.getY());\n\t\t}\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\tToolkit.getDefaultToolkit().removeAWTEventListener(awtMouseListener);\n\t\tToolkit.getDefaultToolkit().removeAWTEventListener(awtMouseWheelListener);\n\t\tToolkit.getDefaultToolkit().removeAWTEventListener(awtKeyListener);\n\t\tframe.removeComponentListener(clientResizeListener);\n\n\t\ttry\n\t\t{\n\t\t\tframe.setShape(null);\n\t\t\tframe.setUndecorated(false);\n\t\t}\n\t\tcatch (IllegalComponentStateException e)\n\t\t{\n\t\t\tif (!runeLiteConfig.enableCustomChrome())\n\t\t\t{\n\t\t\t\tSwingUtilities.invokeLater(() -\u003e JOptionPane.showMessageDialog(frame,\n\t\t\t\t\t\"Please restart the client to restore the window UI \"\n\t\t\t\t\t+ \"decoration and remove the custom chrome taskbar.\",\n\t\t\t\t\t\"Restart the client\", JOptionPane.INFORMATION_MESSAGE));\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void update(int x, int y)\n\t{\n\t\tint left \u003d frame.getX();\n\t\tint top \u003d frame.getY();\n\t\tint right \u003d left + frame.getWidth();\n\t\tint bottom \u003d top + frame.getHeight();\n\n\t\tif (x \u003c left)\n\t\t{\n\t\t\tx \u003d left;\n\t\t}\n\t\telse if (x \u003e right)\n\t\t{\n\t\t\tx \u003d right;\n\t\t}\n\n\t\tif (y \u003c top)\n\t\t{\n\t\t\ty \u003d top;\n\t\t}\n\t\telse if (y \u003e bottom)\n\t\t{\n\t\t\ty \u003d bottom;\n\t\t}\n\n\t\toldX \u003d x - left;\n\t\toldY \u003d y - top;\n\n\t\ttry\n\t\t{\n\t\t\tframe.setShape(new Ellipse2D.Double(\n\t\t\t\toldX - radius,\n\t\t\t\toldY - radius,\n\t\t\t\t2 * radius,\n\t\t\t\t2 * radius));\n\t\t}\n\t\tcatch (IllegalComponentStateException ignore)\n\t\t{\n\t\t}\n\t}\n\n\tprivate void findFrame(Client client)\n\t{\n\t\tComponent component \u003d (Component) client;\n\t\tContainer container \u003d component.getParent();\n\t\twhile (container !\u003d null)\n\t\t{\n\t\t\tif (container instanceof ContainableFrame)\n\t\t\t{\n\t\t\t\tframe \u003d (ContainableFrame) container;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcontainer \u003d container.getParent();\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\tunnelvision\\TunnelVisionPlugin.java"},{"fileName":"TunnelVisionPluginTest.java","content":"package com.tunnelvision;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class TunnelVisionPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(TunnelVisionPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\tunnelvision\\TunnelVisionPluginTest.java"}]},{"commit":"f2e29bb52f895c74b22814c6d4028c5a4261a74d","repository":"https://github.com/bluelightzero/unresponsive-cursor.git","internalName":"unresponsive-cursor","files":[{"fileName":"CursorType.java","content":"package bluelightzero;\n\npublic enum CursorType {\n    DEFAULT,\n    WAITING,\n}\n","filePath":"src\\main\\java\\bluelightzero\\CursorType.java"},{"fileName":"InfoOverlay.java","content":"package bluelightzero;\n\nimport com.google.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.api.Point;\nimport net.runelite.client.ui.overlay.*;\n\nimport java.awt.*;\n\npublic class InfoOverlay extends Overlay {\n\n    private final Client client;\n    private final UnresponsiveCursorPlugin plugin;\n    private final UnresponsiveCursorConfig config;\n\n    private String text \u003d \"\";\n    private Color color;\n\n    @Inject\n    private InfoOverlay(Client client, UnresponsiveCursorPlugin plugin, UnresponsiveCursorConfig config)\n    {\n        this.client \u003d client;\n        this.plugin \u003d plugin;\n        this.config \u003d config;\n        setLayer(OverlayLayer.ALWAYS_ON_TOP);\n        setPriority(OverlayPriority.HIGH);\n        setPosition(OverlayPosition.TOOLTIP);\n    }\n\n    public void clearText() {\n        this.text \u003d \"\";\n    }\n\n    public void setText(String text) {\n        this.text \u003d text;\n    }\n\n    public void setColor(Color color) {\n        this.color \u003d color;\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        if(!text.isEmpty()) {\n            final int textWidth \u003d graphics.getFontMetrics().stringWidth(text);\n            final int textHeight \u003d graphics.getFontMetrics().getAscent() - graphics.getFontMetrics().getDescent();\n\n            final Point mousePosition \u003d client.getMouseCanvasPosition();\n            final Point textPosition \u003d new Point(mousePosition.getX() + 16, mousePosition.getY() + textHeight / 2);\n            OverlayUtil.renderTextLocation(graphics, textPosition, text, color);\n        }\n\n        return null;\n    }\n}\n","filePath":"src\\main\\java\\bluelightzero\\InfoOverlay.java"},{"fileName":"UnresponsiveCursorConfig.java","content":"package bluelightzero;\n\nimport net.runelite.client.config.*;\n\nimport java.awt.*;\n\n@ConfigGroup(\"example\")\npublic interface UnresponsiveCursorConfig extends Config {\n\t@ConfigSection(\n\t\t\tname \u003d \"Server Freeze Style\",\n\t\t\tdescription \u003d \"Settings for when the server freezes. (This is when things stop for everyone.)\",\n\t\t\tposition \u003d 3\n\t)\n\tString serverFreezeSection \u003d \"Server Freeze Style\";\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Connection Lost Style\",\n\t\t\tdescription \u003d \"Settings for when you lose connection. (This is when things stop for you, but then catch up afterwards.)\",\n\t\t\tposition \u003d 5\n\t)\n\tString connectionLostSection \u003d \"Connection Lost Style\";\n\n\t@Range(\n\t\t\tmin \u003d 0\n\t)\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"delay\",\n\t\t\tname \u003d \"Delay (ms)\",\n\t\t\tdescription \u003d \"How long to wait after lag before changing cursor in milliseconds. Low values may cause cursor to flicker.\",\n\t\t\tposition \u003d 1\n\t)\n\tdefault int lagThreshold() { return 100; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"enableText\",\n\t\t\tname \u003d \"Enable Text\",\n\t\t\tdescription \u003d \"When turned on shows cause of lag as text next to cursor.\",\n\t\t\tposition \u003d 2\n\t)\n\tdefault boolean enableText() { return true; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"serverLagText\",\n\t\t\tname \u003d \"Text\",\n\t\t\tdescription \u003d \"The text to use when server freezes. (This is when things stop for everyone.)\",\n\t\t\tposition \u003d 3,\n\t\t\tsection \u003d serverFreezeSection\n\t)\n\tdefault String serverLagText() { return \"Server Freeze!\"; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"serverLagTextColor\",\n\t\t\tname \u003d \"Text Color\",\n\t\t\tdescription \u003d \"The text color to use when server freezes. (This is when things stop for everyone.)\",\n\t\t\tposition \u003d 4,\n\t\t\tsection \u003d serverFreezeSection\n\t)\n\tdefault Color serverLagTextColor() { return new Color(255, 141, 60); }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"connectionLostText\",\n\t\t\tname \u003d \"Text\",\n\t\t\tdescription \u003d \"The text to use when you lose connection. (This is when things stop for you, but then catch up afterwards.)\",\n\t\t\tposition \u003d 5,\n\t\t\tsection \u003d connectionLostSection\n\t)\n\tdefault String connectionLostText() { return \"Connection Lost!\"; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"connectionLostTextColor\",\n\t\t\tname \u003d \"Text Color\",\n\t\t\tdescription \u003d \"The text color to use when you lose connection. (This is when things stop for you, but then catch up afterwards.)\",\n\t\t\tposition \u003d 6,\n\t\t\tsection \u003d connectionLostSection\n\t)\n\tdefault Color connectionLostTextColor() { return new Color(255, 57, 57); }\n\n}","filePath":"src\\main\\java\\bluelightzero\\UnresponsiveCursorConfig.java"},{"fileName":"UnresponsiveCursorPlugin.java","content":"package bluelightzero;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.events.ClientTick;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.game.WorldService;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientUI;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.ExecutorServiceExceptionLogger;\nimport net.runelite.http.api.worlds.World;\nimport net.runelite.http.api.worlds.WorldResult;\n\nimport java.awt.*;\nimport java.io.IOException;\nimport java.net.InetAddress;\nimport java.net.InetSocketAddress;\nimport java.net.Socket;\nimport java.util.Date;\nimport java.util.LinkedList;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.ScheduledExecutorService;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Unresponsive Cursor\"\n)\npublic class UnresponsiveCursorPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientUI clientUI;\n\n\t@Inject\n\tprivate WorldService worldService;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate InfoOverlay infoOverlay;\n\n\tprivate static final int TICK_TIME \u003d 600;\n\tprivate static final int PING_SLOW_INTERVAL \u003d 6000;\n\tprivate static final int PING_FAST_INTERVAL \u003d 200;\n\n\tprivate boolean wasLagging \u003d false;\n\tprivate Cursor replacedCursor \u003d null;\n\tprivate long lastTickTime;\n\n\tprivate ScheduledExecutorService scheduledExecutorService;\n\tprivate static final int TIMEOUT \u003d 1000;\n\tprivate static final int PORT \u003d 43594;\n\tprivate long lastPingTime;\n\tprivate final LinkedList\u003cLong\u003e recentPings \u003d new LinkedList\u003c\u003e();\n\tprivate long lastPongTime;\n\tprivate long lastPingLatency;\n\n\t@Inject\n\tprivate UnresponsiveCursorConfig config;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tscheduledExecutorService \u003d new ExecutorServiceExceptionLogger(Executors.newSingleThreadScheduledExecutor());\n\t\toverlayManager.add(infoOverlay);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tscheduledExecutorService.shutdown();\n\t\tscheduledExecutorService \u003d null;\n\t\toverlayManager.remove(infoOverlay);\n\n\t\tif(wasLagging) {\n\t\t\twasLagging \u003d false;\n\t\t\tclientUI.resetCursor();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged)\n\t{\n\t\tif(gameStateChanged.getGameState() \u003d\u003d GameState.LOGIN_SCREEN) {\n\t\t\tif(wasLagging) {\n\t\t\t\twasLagging \u003d false;\n\t\t\t\tclientUI.resetCursor();\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick tick)\n\t{\n\t\tlastTickTime \u003d new Date().getTime();\n\t}\n\n\tprivate void pingCurrentWorld() {\n\t\ttry {\n\t\t\tWorldResult worldResult \u003d worldService.getWorlds();\n\t\t\tif (worldResult \u003d\u003d null || client.getGameState() !\u003d GameState.LOGGED_IN) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfinal World currentWorld \u003d worldResult.findWorld(client.getWorld());\n\t\t\tif (currentWorld \u003d\u003d null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tString address \u003d currentWorld.getAddress();\n\n\t\t\tSocket socket \u003d new Socket();\n\t\t\tInetAddress inetAddress \u003d InetAddress.getByName(address);\n\t\t\tlong before \u003d new Date().getTime();\n\t\t\tsocket.connect(new InetSocketAddress(inetAddress, PORT), TIMEOUT);\n\t\t\tlong after \u003d new Date().getTime();\n\t\t\tlastPongTime \u003d after;\n\t\t\tlastPingLatency \u003d after - before;\n\t\t} catch (IOException exception) {\n\t\t}\n\t}\n\n\tprivate boolean hasBeenRecentPing() {\n\t\tlong now \u003d new Date().getTime();\n\t\tfor (Long pingTime : recentPings) {\n\t\t\tlong timeSinceRecentPing \u003d now-pingTime;\n\t\t\tif(timeSinceRecentPing \u003c PING_SLOW_INTERVAL \u0026\u0026 timeSinceRecentPing \u003e lastPingLatency) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t@Subscribe\n\tpublic void onClientTick(ClientTick tick) {\n\t\tlong now \u003d new Date().getTime();\n\n\t\tlong timeSinceLastTick \u003d now-lastTickTime;\n\n\t\tboolean isLagging \u003d timeSinceLastTick \u003e (600 + config.lagThreshold());\n\n\t\tif(config.enableText()) {\n\t\t\tif (isLagging \u0026\u0026 hasBeenRecentPing()) {\n\t\t\t\tlong timeSincePong \u003d now - lastPongTime;\n\t\t\t\tif (timeSincePong \u003e PING_FAST_INTERVAL + lastPingLatency) {\n\t\t\t\t\tinfoOverlay.setText(config.connectionLostText());\n\t\t\t\t\tinfoOverlay.setColor(config.connectionLostTextColor());\n\t\t\t\t} else {\n\t\t\t\t\tinfoOverlay.setText(config.serverLagText());\n\t\t\t\t\tinfoOverlay.setColor(config.serverLagTextColor());\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tinfoOverlay.clearText();\n\t\t\t}\n\t\t} else {\n\t\t\tinfoOverlay.clearText();\n\t\t}\n\n\t\tboolean isDefaultCursor \u003d (clientUI.getCurrentCursor().getType() \u003d\u003d Cursor.DEFAULT_CURSOR);\n\t\tboolean isCustomCursor \u003d (clientUI.getCurrentCursor().getType() \u003d\u003d Cursor.CUSTOM_CURSOR);\n\n\t\tif(isLagging \u0026\u0026 !wasLagging) {\n\t\t\tif(isDefaultCursor) {\n\t\t\t\treplacedCursor \u003d null;\n\t\t\t\tclientUI.setCursor(Cursor.getPredefinedCursor(Cursor.WAIT_CURSOR));\n\t\t\t\twasLagging \u003d true;\n\t\t\t} else if(isCustomCursor) {\n\t\t\t\treplacedCursor \u003d clientUI.getCurrentCursor();\n\t\t\t\tclientUI.setCursor(Cursor.getPredefinedCursor(Cursor.WAIT_CURSOR));\n\t\t\t\twasLagging \u003d true;\n\t\t\t}\n\t\t} else if(!isLagging \u0026\u0026 wasLagging) {\n\t\t\tif(replacedCursor !\u003d null) {\n\t\t\t\tclientUI.setCursor(replacedCursor);\n\t\t\t} else {\n\t\t\t\tclientUI.resetCursor();\n\t\t\t}\n\t\t\twasLagging \u003d false;\n\t\t}\n\n\t\tlong timeSincePing \u003d now-lastPingTime;\n\t\tif(isLagging) {\n\t\t\tif(timeSincePing \u003e PING_FAST_INTERVAL) {\n\t\t\t\tscheduledExecutorService.execute(this::pingCurrentWorld);\n\t\t\t\tlastPingTime \u003d now;\n\t\t\t\trecentPings.add(now);\n\t\t\t}\n\t\t} else {\n\t\t\tif(timeSincePing \u003e PING_SLOW_INTERVAL) {\n\t\t\t\tscheduledExecutorService.execute(this::pingCurrentWorld);\n\t\t\t\tlastPingTime \u003d now;\n\t\t\t\trecentPings.add(now);\n\t\t\t}\n\t\t}\n\n\t\tif(recentPings.size() \u003e 10) {\n\t\t\trecentPings.remove();\n\t\t}\n\t}\n\n\t@Provides\n    UnresponsiveCursorConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(UnresponsiveCursorConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\bluelightzero\\UnresponsiveCursorPlugin.java"},{"fileName":"UnresponsiveCursorTest.java","content":"package bluelightzero;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class UnresponsiveCursorTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(UnresponsiveCursorPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\bluelightzero\\UnresponsiveCursorTest.java"}]},{"commit":"504883ffbc0e2c060881b9c98b7bd6769b4568aa","repository":"https://github.com/while-loop/runelite-plugins.git","internalName":"zulrah-helper","files":[{"fileName":"ImageOrientation.java","content":"package com.zulrahhelper;\n\n/**\n * Orientation of the phase images in Cardinal directions\n */\npublic enum ImageOrientation\n{\n\tSOUTH,\n\tNORTH,\n\tEAST,\n\tWEST;\n\n\tpublic double getRotation()\n\t{\n\t\tswitch (this)\n\t\t{\n\t\t\tcase NORTH:\n\t\t\t\treturn Math.PI;\n\t\t\tcase EAST:\n\t\t\t\treturn Math.PI / 2;\n\t\t\tcase WEST:\n\t\t\t\treturn Math.PI * 1.5f;\n\t\t\tcase SOUTH:\n\t\t\tdefault:\n\t\t\t\treturn 0.0;\n\t\t}\n\t}\n}","filePath":"src\\main\\java\\com\\zulrahhelper\\ImageOrientation.java"},{"fileName":"Prayer.java","content":"/*\n * Copyright (c) 2024, Ron Young \u003chttps://github.com/raiyni\u003e\n * All rights reserved.\n *\n *  Redistribution and use in source and binary forms, with or without\n *  modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *     list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *     this list of conditions and the following disclaimer in the documentation\n *     and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.zulrahhelper.options;\n\nimport java.awt.image.BufferedImage;\nimport lombok.Getter;\nimport net.runelite.client.util.ImageUtil;\n\n@Getter\npublic enum Prayer\n{\n\tMAGIC(\"protect-from-magic.png\"),\n\tRANGE(\"protect-from-missiles.png\");\n\n\tprivate final BufferedImage image;\n\n\tPrayer(String file)\n\t{\n\t\tthis.image \u003d ImageUtil.loadImageResource(Prayer.class, \"/options/\" + file);\n\t}\n}\n","filePath":"src\\main\\java\\com\\zulrahhelper\\options\\Prayer.java"},{"fileName":"StandLocation.java","content":"/*\n * Copyright (c) 2024, Ron Young \u003chttps://github.com/raiyni\u003e\n * All rights reserved.\n *\n *  Redistribution and use in source and binary forms, with or without\n *  modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *     list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *     this list of conditions and the following disclaimer in the documentation\n *     and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.zulrahhelper.options;\n\nimport java.awt.Color;\nimport java.awt.Graphics;\nimport lombok.RequiredArgsConstructor;\n\n@RequiredArgsConstructor\npublic enum StandLocation\n{\n\n\tSTART(19, 52),\n\tSTART_MAGMA(11, 43),\n\tPILLAR_1_SOUTH(20, 23),\n\tPILLAR_1_WEST(18, 16),\n\tPILLAR_1_NORTH(26, 9),\n\tNORTH(41, 10),\n\tPILLAR_2_SOUTH(62, 23),\n\tPILLAR_2_EAST(63, 16),\n\tPILLAR_2_NORTH(55, 9);\n\n\tprivate static final int WIDTH \u003d 6;\n\tprivate static final int HEIGHT \u003d 6;\n\n\tprivate final int x;\n\tprivate final int y;\n\n\tpublic void drawX(Graphics g, int px, int py)\n\t{\n\t\tvar x \u003d px + this.x - WIDTH / 2;\n\t\tvar y \u003d py + this.y - HEIGHT / 2;\n\n\t\tg.setColor(Color.WHITE);\n\n\t\tg.drawLine(x, y, x + WIDTH, y + HEIGHT);\n\t\tg.drawLine(x, y + HEIGHT, x + WIDTH, y);\n\n\t\tg.drawLine(x - 1, y, x + WIDTH - 1, y + HEIGHT);\n\t\tg.drawLine(x - 1, y + HEIGHT, x + WIDTH - 1, y);\n\t}\n}\n","filePath":"src\\main\\java\\com\\zulrahhelper\\options\\StandLocation.java"},{"fileName":"ZulrahForm.java","content":"/*\n * Copyright (c) 2024, Ron Young \u003chttps://github.com/raiyni\u003e\n * All rights reserved.\n *\n *  Redistribution and use in source and binary forms, with or without\n *  modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *     list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *     this list of conditions and the following disclaimer in the documentation\n *     and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.zulrahhelper.options;\n\nimport com.zulrahhelper.ZulrahHelperConfig;\nimport java.awt.Color;\n\npublic enum ZulrahForm\n{\n\tRANGE,\n\tMAGE,\n\tMELEE;\n\n\tpublic Color getColor(ZulrahHelperConfig config)\n\t{\n\t\tswitch (this)\n\t\t{\n\t\t\tcase RANGE:\n\t\t\t\treturn config.rangeColor();\n\t\t\tcase MAGE:\n\t\t\t\treturn config.mageColor();\n\t\t\tdefault:\n\t\t\t\treturn config.meleeColor();\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\zulrahhelper\\options\\ZulrahForm.java"},{"fileName":"ZulrahLocation.java","content":"/*\n * Copyright (c) 2024, Ron Young \u003chttps://github.com/raiyni\u003e\n * All rights reserved.\n *\n *  Redistribution and use in source and binary forms, with or without\n *  modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *     list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *     this list of conditions and the following disclaimer in the documentation\n *     and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.zulrahhelper.options;\n\nimport java.awt.Color;\nimport java.awt.Graphics2D;\nimport lombok.RequiredArgsConstructor;\n\n@RequiredArgsConstructor\npublic enum ZulrahLocation\n{\n\tNORTH(39, -10),\n\tSOUTH(40, 30),\n\tEAST(82, 25),\n\tWEST(-5, 35);\n\n\tprivate static final int PHASE_RADIUS \u003d 5;\n\tprivate static final Color BORDER_COLOR \u003d new Color(140, 140, 140);\n\n\tprivate final int x;\n\tprivate final int y;\n\n\tpublic int getX()\n\t{\n\t\treturn x - PHASE_RADIUS;\n\t}\n\n\tpublic int getY()\n\t{\n\t\treturn y - PHASE_RADIUS;\n\t}\n\n\tpublic int getWidth()\n\t{\n\t\treturn PHASE_RADIUS * 2 + 1;\n\t}\n\n\tpublic int getHeight()\n\t{\n\t\treturn PHASE_RADIUS * 2 + 1;\n\t}\n\n\tpublic void drawLocation(Graphics2D g, Color c, int px, int py)\n\t{\n\t\t// draw a little bit bigger for a sharper circle\n\t\tg.setColor(c);\n\t\tg.fillOval(getX() + px - 1, getY() + py - 1, getWidth() + 2, getHeight() + 2);\n\n\t\tg.setColor(BORDER_COLOR);\n\t\tg.drawOval(getX() + px - 1, getY() + py - 1, getWidth() + 2, getHeight() + 2);\n\n\t}\n}\n","filePath":"src\\main\\java\\com\\zulrahhelper\\options\\ZulrahLocation.java"},{"fileName":"Node.java","content":"/*\n * Copyright (c) 2024, Ron Young \u003chttps://github.com/raiyni\u003e\n * All rights reserved.\n *\n *  Redistribution and use in source and binary forms, with or without\n *  modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *     list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *     this list of conditions and the following disclaimer in the documentation\n *     and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.zulrahhelper.tree;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.annotation.Nonnull;\nimport lombok.Builder;\nimport lombok.EqualsAndHashCode;\nimport lombok.Getter;\nimport lombok.Singular;\nimport lombok.ToString;\n\n@Getter\n@Builder()\n@EqualsAndHashCode(onlyExplicitlyIncluded \u003d true)\n@ToString(onlyExplicitlyIncluded \u003d true)\npublic class Node\n{\n\tprotected Node parent;\n\n\t@ToString.Include\n\t@EqualsAndHashCode.Include\n\tprotected Step value;\n\n\t@Singular\n\tprotected List\u003cNode\u003e children;\n\n\tpublic int size()\n\t{\n\t\treturn this.getChildren().size();\n\t}\n\n\tpublic Node find(Step val)\n\t{\n\t\tif (this.value.equals(val))\n\t\t{\n\t\t\treturn this;\n\t\t}\n\n\t\tfor (var c : children)\n\t\t{\n\t\t\tvar n \u003d c.find(val);\n\t\t\tif (n !\u003d null)\n\t\t\t{\n\t\t\t\treturn n;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic boolean find(Node node)\n\t{\n\t\tif (node \u003d\u003d null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this \u003d\u003d node || this.value.equals(node.value))\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tfor (var c : children)\n\t\t{\n\t\t\tif (c.find(node))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tpublic static Node of(@Nonnull Node n)\n\t{\n\t\treturn new Node(null, n.value, new ArrayList\u003c\u003e());\n\t}\n\n\tpublic static class NodeBuilder\n\t{\n\t\tNodeBuilder parentBuilder;\n\n\t\tpublic NodeBuilder node()\n\t\t{\n\t\t\tvar c \u003d Node.builder();\n\t\t\tc.parentBuilder \u003d this;\n\t\t\treturn c;\n\t\t}\n\n\t\tpublic Node buildUp()\n\t\t{\n\t\t\tNodeBuilder b \u003d this;\n\t\t\tNodeBuilder p;\n\t\t\tNode n \u003d null;\n\t\t\twhile (b !\u003d null)\n\t\t\t{\n\t\t\t\tn \u003d b.build();\n\t\t\t\tp \u003d b.parentBuilder;\n\t\t\t\tif (p !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tp.child(n);\n\t\t\t\t}\n\t\t\t\tb \u003d p;\n\t\t\t}\n\n\t\t\treturn n;\n\t\t}\n\n\t\tpublic Node build()\n\t\t{\n\t\t\tif (this.children \u003d\u003d null)\n\t\t\t{\n\t\t\t\tthis.children \u003d new ArrayList\u003c\u003e();\n\t\t\t}\n\n\t\t\tNode n \u003d new Node(null, this.value, this.children);\n\n\t\t\tfor (var c : n.children)\n\t\t\t{\n\t\t\t\tc.parent \u003d n;\n\t\t\t}\n\n\t\t\treturn n;\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\zulrahhelper\\tree\\Node.java"},{"fileName":"PatternTree.java","content":"/*\n * Copyright (c) 2024, Ron Young \u003chttps://github.com/raiyni\u003e\n * All rights reserved.\n *\n *  Redistribution and use in source and binary forms, with or without\n *  modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *     list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *     this list of conditions and the following disclaimer in the documentation\n *     and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.zulrahhelper.tree;\n\nimport com.google.common.collect.Iterables;\nimport com.zulrahhelper.options.Prayer;\nimport com.zulrahhelper.options.StandLocation;\nimport com.zulrahhelper.options.ZulrahForm;\nimport com.zulrahhelper.options.ZulrahLocation;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.stream.Collectors;\nimport javax.annotation.Nonnull;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport lombok.Getter;\nimport lombok.NonNull;\nimport lombok.extern.slf4j.Slf4j;\n\n@Singleton\n@Slf4j\npublic class PatternTree\n{\n\tprotected Node root;\n\n\t@Getter\n\t@NonNull\n\tprotected Node state;\n\n\t@Inject\n\tpublic PatternTree()\n\t{\n\t\tthis.root \u003d build();\n\t\tthis.state \u003d root;\n\t}\n\n\tpublic Node find(Step value)\n\t{\n\t\treturn root.find(value);\n\t}\n\n\tpublic void setState(@Nonnull Node n)\n\t{\n\t\tif (contains(n))\n\t\t{\n\t\t\tstate \u003d n;\n\t\t}\n\t}\n\n\tpublic boolean contains(Node node)\n\t{\n\t\treturn root.find(node);\n\t}\n\n\tpublic void reset()\n\t{\n\t\tstate \u003d root;\n\t}\n\n\tpublic int depth(Node node)\n\t{\n\t\treturn depth(node.getValue());\n\t}\n\n\tpublic int depth(Step value)\n\t{\n\t\tNode node \u003d find(value);\n\t\tif (node \u003d\u003d null)\n\t\t{\n\t\t\treturn -1;\n\t\t}\n\n\t\tint i \u003d 0;\n\t\twhile (node.parent !\u003d null)\n\t\t{\n\t\t\ti++;\n\t\t\tnode \u003d node.parent;\n\t\t}\n\n\t\treturn i;\n\t}\n\n\tpublic List\u003cNode\u003e buildPath()\n\t{\n\t\treturn buildPath(state);\n\t}\n\n\tpublic List\u003cNode\u003e buildPath(Node n)\n\t{\n\t\tList\u003cNode\u003e path \u003d new ArrayList\u003c\u003e();\n\t\tif (n.getParent() !\u003d null)\n\t\t{\n\t\t\tvar p \u003d n.getParent();\n\t\t\twhile (p !\u003d null)\n\t\t\t{\n\t\t\t\tpath.add(0, Node.of(p));\n\t\t\t\tp \u003d p.getParent();\n\t\t\t}\n\t\t}\n\n\t\tpath.add(Node.of(n));\n\t\tvar nc \u003d n.getChildren();\n\t\twhile (!nc.isEmpty())\n\t\t{\n\t\t\tif (nc.size() \u003e 1)\n\t\t\t{\n\t\t\t\tIterables.getLast(path)\n\t\t\t\t\t.children.addAll(nc.stream()\n\t\t\t\t\t\t.map(Node::of)\n\t\t\t\t\t\t.collect(Collectors.toList()));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tpath.add(Node.of(nc.get(0)));\n\t\t\t}\n\n\t\t\tnc \u003d nc.get(0).getChildren();\n\t\t}\n\n\t\treturn path;\n\t}\n\n\tprivate static Node build()\n\t{\n\t\treturn Node.builder()\n\t\t\t.value(Step.builder()\n\t\t\t\t.title(\"START\")\n\t\t\t\t.point(StandLocation.START)\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.attacks(5)\n\t\t\t\t.venom(4)\n\t\t\t\t.build())\n\t\t\t.child(buildMelee())\n\t\t\t.child(buildRange())\n\t\t\t.child(buildMage())\n\t\t\t.build();\n\t}\n\n\tprivate static Node buildMelee()\n\t{\n\t\treturn Node.builder()\n\t\t\t.value(Step.builder()\n\t\t\t\t.title(\"MAGMA\")\n\t\t\t\t.form(ZulrahForm.MELEE)\n\t\t\t\t.point(StandLocation.START)\n\t\t\t\t.point(StandLocation.START_MAGMA)\n\t\t\t\t.attacks(2)\n\t\t\t\t.build())\n\t\t\t.child(Node.builder()\n\t\t\t\t.value(Step.builder()\n\t\t\t\t\t.form(ZulrahForm.MAGE)\n\t\t\t\t\t.prayer(Prayer.MAGIC)\n\t\t\t\t\t.attacks(4)\n\t\t\t\t\t.point(StandLocation.START)\n\t\t\t\t\t.build())\n\t\t\t\t.child(buildMeleeA())\n\t\t\t\t.child(buildMeleeB())\n\t\t\t\t.build())\n\t\t\t.build();\n\t}\n\n\tprivate static Node buildMeleeA()\n\t{\n\t\treturn Node.builder()\n\t\t\t.value(Step.builder()\n\t\t\t\t.title(\"MAGMA A\")\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.spawn(ZulrahLocation.NORTH)\n\t\t\t\t.point(StandLocation.PILLAR_2_SOUTH)\n\t\t\t\t.prayer(Prayer.RANGE)\n\t\t\t\t.attacks(5)\n\t\t\t\t.venom(2)\n\t\t\t\t.snakelings(2)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.form(ZulrahForm.MELEE)\n\t\t\t\t.attacks(2)\n\t\t\t\t.point(StandLocation.PILLAR_2_SOUTH)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.form(ZulrahForm.MAGE)\n\t\t\t\t.attacks(5)\n\t\t\t\t.prayer(Prayer.MAGIC)\n\t\t\t\t.spawn(ZulrahLocation.EAST)\n\t\t\t\t.point(StandLocation.NORTH)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.spawn(ZulrahLocation.NORTH)\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.venom(3)\n\t\t\t\t.snakelings(2)\n\t\t\t\t.point(StandLocation.PILLAR_1_SOUTH)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.spawn(ZulrahLocation.NORTH)\n\t\t\t\t.form(ZulrahForm.MAGE)\n\t\t\t\t.attacks(5)\n\t\t\t\t.venom(2)\n\t\t\t\t.snakelings(2)\n\t\t\t\t.prayer(Prayer.MAGIC)\n\t\t\t\t.point(StandLocation.PILLAR_1_SOUTH)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.spawn(ZulrahLocation.EAST)\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.attacks(10)\n\t\t\t\t.venom(4)\n\t\t\t\t.prayer(Prayer.RANGE)\n\t\t\t\t.prayer(Prayer.MAGIC)\n\t\t\t\t.point(StandLocation.PILLAR_2_SOUTH)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.form(ZulrahForm.MELEE)\n\t\t\t\t.attacks(2)\n\t\t\t\t.point(StandLocation.START)\n\t\t\t\t.point(StandLocation.START_MAGMA)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.title(\"RESET\")\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.prayer(Prayer.RANGE)\n\t\t\t\t.point(StandLocation.START)\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.attacks(5)\n\t\t\t\t.venom(4)\n\t\t\t\t.reset(true)\n\t\t\t\t.build())\n\t\t\t.buildUp();\n\t}\n\n\tprivate static Node buildMeleeB()\n\t{\n\t\treturn Node.builder()\n\t\t\t.value(Step.builder()\n\t\t\t\t.title(\"MAGMA B\")\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.spawn(ZulrahLocation.EAST)\n\t\t\t\t.point(StandLocation.PILLAR_2_SOUTH)\n\t\t\t\t.venom(3)\n\t\t\t\t.snakelings(2)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.spawn(ZulrahLocation.NORTH)\n\t\t\t\t.form(ZulrahForm.MAGE)\n\t\t\t\t.attacks(5)\n\t\t\t\t.venom(2)\n\t\t\t\t.snakelings(2)\n\t\t\t\t.prayer(Prayer.MAGIC)\n\t\t\t\t.point(StandLocation.PILLAR_2_SOUTH)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.form(ZulrahForm.MELEE)\n\t\t\t\t.attacks(2)\n\t\t\t\t.point(StandLocation.PILLAR_2_SOUTH)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.spawn(ZulrahLocation.WEST)\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.attacks(5)\n\t\t\t\t.prayer(Prayer.RANGE)\n\t\t\t\t.point(StandLocation.NORTH)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.spawn(ZulrahLocation.NORTH)\n\t\t\t\t.form(ZulrahForm.MAGE)\n\t\t\t\t.attacks(5)\n\t\t\t\t.venom(2)\n\t\t\t\t.snakelings(2)\n\t\t\t\t.prayer(Prayer.MAGIC)\n\t\t\t\t.point(StandLocation.PILLAR_2_SOUTH)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.spawn(ZulrahLocation.EAST)\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.attacks(10)\n\t\t\t\t.venom(4)\n\t\t\t\t.prayer(Prayer.RANGE)\n\t\t\t\t.prayer(Prayer.MAGIC)\n\t\t\t\t.point(StandLocation.PILLAR_2_SOUTH)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.form(ZulrahForm.MELEE)\n\t\t\t\t.attacks(2)\n\t\t\t\t.point(StandLocation.START)\n\t\t\t\t.point(StandLocation.START_MAGMA)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.title(\"RESET\")\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.prayer(Prayer.RANGE)\n\t\t\t\t.point(StandLocation.START)\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.attacks(5)\n\t\t\t\t.venom(4)\n\t\t\t\t.reset(true)\n\t\t\t\t.build())\n\t\t\t.buildUp();\n\t}\n\n\tprivate static Node buildRange()\n\t{\n\t\treturn Node.builder()\n\t\t\t.value(Step.builder()\n\t\t\t\t.title(\"SERP\")\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.spawn(ZulrahLocation.WEST)\n\t\t\t\t.point(StandLocation.START)\n\t\t\t\t.prayer(Prayer.RANGE)\n\t\t\t\t.attacks(5)\n\t\t\t\t.snakelings(2)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.form(ZulrahForm.MELEE)\n\t\t\t\t.attacks(2)\n\t\t\t\t.venom(3)\n\t\t\t\t.snakelings(2)\n\t\t\t\t.point(StandLocation.PILLAR_1_SOUTH)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.spawn(ZulrahLocation.EAST)\n\t\t\t\t.form(ZulrahForm.MAGE)\n\t\t\t\t.attacks(5)\n\t\t\t\t.prayer(Prayer.MAGIC)\n\t\t\t\t.point(StandLocation.NORTH)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.spawn(ZulrahLocation.NORTH)\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.attacks(5)\n\t\t\t\t.prayer(Prayer.RANGE)\n\t\t\t\t.point(StandLocation.NORTH)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.spawn(ZulrahLocation.WEST)\n\t\t\t\t.form(ZulrahForm.MAGE)\n\t\t\t\t.attacks(5)\n\t\t\t\t.prayer(Prayer.MAGIC)\n\t\t\t\t.point(StandLocation.NORTH)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.venom(3)\n\t\t\t\t.snakelings(2)\n\t\t\t\t.point(StandLocation.PILLAR_2_SOUTH)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.spawn(ZulrahLocation.EAST)\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.attacks(5)\n\t\t\t\t.prayer(Prayer.RANGE)\n\t\t\t\t.point(StandLocation.PILLAR_2_SOUTH)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.form(ZulrahForm.MAGE)\n\t\t\t\t.attacks(5)\n\t\t\t\t.venom(2)\n\t\t\t\t.snakelings(2)\n\t\t\t\t.prayer(Prayer.MAGIC)\n\t\t\t\t.point(StandLocation.PILLAR_1_SOUTH)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.spawn(ZulrahLocation.WEST)\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.attacks(10)\n\t\t\t\t.prayer(Prayer.MAGIC)\n\t\t\t\t.prayer(Prayer.RANGE)\n\t\t\t\t.point(StandLocation.PILLAR_1_SOUTH)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.form(ZulrahForm.MAGE)\n\t\t\t\t.snakelings(2)\n\t\t\t\t.point(StandLocation.START)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.title(\"RESET\")\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.prayer(Prayer.RANGE)\n\t\t\t\t.point(StandLocation.START)\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.attacks(5)\n\t\t\t\t.venom(4)\n\t\t\t\t.reset(true)\n\t\t\t\t.build())\n\t\t\t.buildUp();\n\t}\n\n\tprivate static Node buildMage()\n\t{\n\t\treturn Node.builder()\n\t\t\t.value(Step.builder()\n\t\t\t\t.title(\"TANZ\")\n\t\t\t\t.form(ZulrahForm.MAGE)\n\t\t\t\t.spawn(ZulrahLocation.WEST)\n\t\t\t\t.point(StandLocation.START)\n\t\t\t\t.prayer(Prayer.MAGIC)\n\t\t\t\t.attacks(6)\n\t\t\t\t.snakelings(2)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.spawn(ZulrahLocation.NORTH)\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.attacks(4)\n\t\t\t\t.venom(2)\n\t\t\t\t.prayer(Prayer.RANGE)\n\t\t\t\t.point(StandLocation.PILLAR_2_SOUTH)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.spawn(ZulrahLocation.EAST)\n\t\t\t\t.form(ZulrahForm.MAGE)\n\t\t\t\t.prayer(Prayer.MAGIC)\n\t\t\t\t.point(StandLocation.PILLAR_2_SOUTH)\n\t\t\t\t.attacks(4)\n\t\t\t\t.snakelings(2)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.form(ZulrahForm.MELEE)\n\t\t\t\t.point(StandLocation.PILLAR_1_SOUTH)\n\t\t\t\t.attacks(2)\n\t\t\t\t.venom(2)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.spawn(ZulrahLocation.WEST)\n\t\t\t\t.point(StandLocation.PILLAR_1_SOUTH)\n\t\t\t\t.prayer(Prayer.RANGE)\n\t\t\t\t.attacks(4)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.spawn(ZulrahLocation.NORTH)\n\t\t\t\t.point(StandLocation.PILLAR_1_SOUTH)\n\t\t\t\t.snakelings(2)\n\t\t\t\t.venom(3)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.spawn(ZulrahLocation.EAST)\n\t\t\t\t.form(ZulrahForm.MAGE)\n\t\t\t\t.prayer(Prayer.MAGIC)\n\t\t\t\t.point(StandLocation.PILLAR_2_EAST)\n\t\t\t\t.attacks(5)\n\t\t\t\t.venom(4)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.prayer(Prayer.RANGE)\n\t\t\t\t.point(StandLocation.PILLAR_1_SOUTH)\n\t\t\t\t.attacks(5)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.form(ZulrahForm.MAGE)\n\t\t\t\t.prayer(Prayer.MAGIC)\n\t\t\t\t.point(StandLocation.PILLAR_1_SOUTH)\n\t\t\t\t.attacks(4)\n\t\t\t\t.venom(3)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.spawn(ZulrahLocation.WEST)\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.prayer(Prayer.MAGIC)\n\t\t\t\t.prayer(Prayer.RANGE)\n\t\t\t\t.point(StandLocation.PILLAR_1_SOUTH)\n\t\t\t\t.attacks(8)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.form(ZulrahForm.MAGE)\n\t\t\t\t.point(StandLocation.START)\n\t\t\t\t.snakelings(2)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.title(\"RESET\")\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.prayer(Prayer.RANGE)\n\t\t\t\t.point(StandLocation.START)\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.attacks(5)\n\t\t\t\t.venom(4)\n\t\t\t\t.reset(true)\n\t\t\t\t.build())\n\t\t\t.buildUp();\n\t}\n}\n","filePath":"src\\main\\java\\com\\zulrahhelper\\tree\\PatternTree.java"},{"fileName":"Step.java","content":"/*\n * Copyright (c) 2024, Ron Young \u003chttps://github.com/raiyni\u003e\n * All rights reserved.\n *\n *  Redistribution and use in source and binary forms, with or without\n *  modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *     list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *     this list of conditions and the following disclaimer in the documentation\n *     and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.zulrahhelper.tree;\n\nimport com.zulrahhelper.options.Prayer;\nimport com.zulrahhelper.options.StandLocation;\nimport com.zulrahhelper.options.ZulrahForm;\nimport com.zulrahhelper.options.ZulrahLocation;\nimport java.security.SecureRandom;\nimport java.util.List;\nimport lombok.Builder;\nimport lombok.NonNull;\nimport lombok.Singular;\nimport lombok.Value;\n\n@Value\n@Builder(toBuilder \u003d true)\npublic class Step\n{\n\tprivate static final SecureRandom RANDOM \u003d new SecureRandom();\n\n\t@Builder.Default\n\tint id \u003d RANDOM.nextInt();\n\n\tString title;\n\n\tint attacks;\n\tint venom;\n\tint snakelings;\n\n\tZulrahForm form;\n\n\t@Singular\n\tList\u003cStandLocation\u003e points;\n\n\t@Singular\n\tList\u003cPrayer\u003e prayers;\n\n\t@Builder.Default\n\tZulrahLocation spawn \u003d ZulrahLocation.SOUTH;\n\n\tboolean reset;\n}\n","filePath":"src\\main\\java\\com\\zulrahhelper\\tree\\Step.java"},{"fileName":"Images.java","content":"/*\n * Copyright (c) 2024, Ron Young \u003chttps://github.com/raiyni\u003e\n * All rights reserved.\n *\n *  Redistribution and use in source and binary forms, with or without\n *  modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *     list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *     this list of conditions and the following disclaimer in the documentation\n *     and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.zulrahhelper.ui;\n\nimport com.zulrahhelper.ZulrahHelperConfig;\nimport com.zulrahhelper.ZulrahHelperPlugin;\nimport com.zulrahhelper.tree.Step;\nimport java.awt.Color;\nimport java.awt.Graphics2D;\nimport java.awt.image.BufferedImage;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.util.ImageUtil;\n\npublic class Images\n{\n\tprivate static final BufferedImage FLOOR_IMG \u003d ImageUtil.loadImageResource(Step.class, \"/floor.png\");\n\tprivate static final BufferedImage SNAKELINGS \u003d ImageUtil.loadImageResource(Step.class, \"/options/snakeling2.png\");\n\tprivate static final BufferedImage HITSPLAT \u003d ImageUtil.loadImageResource(Step.class, \"/options/hitsplat.png\");\n\tprivate static final BufferedImage VENOM \u003d ImageUtil.loadImageResource(Step.class, \"/options/venom.png\");\n\tprivate static final BufferedImage RESET \u003d ImageUtil.loadImageResource(ZulrahHelperPlugin.class, \"/ui/reset_icon.png\");;\n\n\n\tprivate static final int WIDTH \u003d 105;\n\tprivate static final int HEIGHT \u003d 105;\n\n\tprivate static final int PADDING \u003d 2;\n\n\tprivate static final Color DARK_BACKGROUND \u003d new Color(24, 24, 24, 65);\n\tprivate static final Color LIGHT_BACKGROUND \u003d new Color(255, 255, 255, 200);\n\n\tpublic static BufferedImage createImage(final Step step, final ZulrahHelperConfig config)\n\t{\n\t\tBufferedImage image \u003d new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_ARGB);\n\t\tGraphics2D g \u003d (Graphics2D) image.getGraphics();\n\n\t\tg.setColor(config.darkMode() ? DARK_BACKGROUND : LIGHT_BACKGROUND);\n\t\tg.fillRect(0, 0, WIDTH, HEIGHT);\n\n\t\tint px \u003d (WIDTH - FLOOR_IMG.getWidth()) / 2 + 1;\n\t\tint py \u003d (HEIGHT - FLOOR_IMG.getHeight()) / 2;\n\n\t\tg.drawImage(FLOOR_IMG, null, px, py);\n\n\t\tfor (var p : step.getPoints())\n\t\t{\n\t\t\tp.drawX(g, px, py);\n\t\t}\n\n\t\tvar spawn \u003d step.getSpawn();\n\t\tspawn.drawLocation(g, step.getForm().getColor(config), px, py);\n\n\t\tvar theta \u003d config.imageOrientation().getRotation();\n\t\tif (theta !\u003d 0)\n\t\t{\n\t\t\timage \u003d ImageUtil.rotateImage(image, theta);\n\t\t\tg.dispose();\n\t\t\tg \u003d (Graphics2D) image.getGraphics();\n\t\t}\n\n\t\tvar prayers \u003d step.getPrayers();\n\t\tif (config.displayPrayerIcons())\n\t\t{\n\t\t\tfor (int idx \u003d 0; idx \u003c prayers.size(); idx++)\n\t\t\t{\n\t\t\t\tvar p \u003d prayers.get(idx);\n\t\t\t\tvar img \u003d p.getImage();\n\n\t\t\t\tint offset \u003d idx \u003d\u003d 1 ? WIDTH - img.getWidth() - PADDING : PADDING;\n\t\t\t\tg.drawImage(img, null, offset, PADDING);\n\t\t\t}\n\t\t}\n\n\t\tg.setFont(FontManager.getRunescapeBoldFont());\n\t\tif (config.displayAttackIcons() \u0026\u0026 step.getAttacks() \u003e 0)\n\t\t{\n\t\t\tdrawSplat(g, Color.WHITE, HITSPLAT, step.getAttacks() + \"\", 0);\n\t\t}\n\n\t\tif (config.displayVenom() \u0026\u0026 step.getVenom() \u003e 0)\n\t\t{\n\t\t\tdrawSplat(g, Color.WHITE, VENOM, step.getVenom() + \"\", WIDTH / 2 - VENOM.getWidth() / 2);\n\t\t}\n\n\t\tif (config.displaySnakelings() \u0026\u0026 step.getSnakelings() \u003e 0)\n\t\t{\n\t\t\tvar c \u003d config.darkMode() ? Color.WHITE : Color.BLACK;\n\t\t\tvar x \u003d WIDTH - SNAKELINGS.getWidth() * 2 + PADDING * 2;\n\t\t\tdrawSplat(g, c, SNAKELINGS, step.getSnakelings() + \"\", x, x + PADDING);\n\t\t}\n\n\t\tif (step.isReset())\n\t\t{\n\t\t\tvar p \u003d 23;\n\t\t\tg.drawImage(RESET, p, p, RESET.getWidth() * 3, RESET.getHeight() * 3, null);\n\t\t}\n\n\t\tg.dispose();\n\t\treturn image;\n\t}\n\n\tprivate static void drawSplat(Graphics2D g, Color c, BufferedImage img, String text, int splatX, int textX)\n\t{\n\t\tvar fm \u003d g.getFontMetrics();\n\t\tg.drawImage(img, null, splatX + PADDING, HEIGHT - PADDING - HITSPLAT.getHeight());\n\t\tvar tw \u003d fm.stringWidth(text);\n\t\tvar cx \u003d HITSPLAT.getWidth() / 2 - tw / 2 + (tw % 2 \u003d\u003d 1 ? -2 : 0);\n\t\tvar cy \u003d HITSPLAT.getHeight() / 2 - fm.getFont().getSize();\n\n\t\tvar tx \u003d textX + PADDING + cx;\n\t\tvar ty \u003d HEIGHT - PADDING + cy;\n\n\t\tg.setColor(Color.BLACK);\n\t\tg.drawString(text, tx + 1, ty + 1);\n\n\t\tg.setColor(c);\n\t\tg.drawString(text, tx, ty);\n\t}\n\n\tprivate static void drawSplat(Graphics2D g, Color c, BufferedImage img, String text, int x)\n\t{\n\t\tdrawSplat(g, c, img, text, x, x);\n\t}\n}\n","filePath":"src\\main\\java\\com\\zulrahhelper\\ui\\Images.java"},{"fileName":"ZulrahHelperPanel.java","content":"/*\n * Copyright (c) 2020, Anthony Alves\n * Copyright (c) 2024, Ron Young \u003chttps://github.com/raiyni\u003e\n * All rights reserved.\n *\n *  Redistribution and use in source and binary forms, with or without\n *  modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *     list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *     this list of conditions and the following disclaimer in the documentation\n *     and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.zulrahhelper.ui;\n\nimport com.google.common.base.Strings;\nimport com.zulrahhelper.ZulrahHelperPlugin;\nimport com.zulrahhelper.tree.PatternTree;\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.GridBagConstraints;\nimport java.awt.GridBagLayout;\nimport java.awt.image.BufferedImage;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport javax.swing.Box;\nimport javax.swing.ImageIcon;\nimport javax.swing.JButton;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.PluginPanel;\nimport net.runelite.client.util.ImageUtil;\nimport net.runelite.client.util.SwingUtil;\n\n@Slf4j\n@Singleton\npublic class ZulrahHelperPanel extends PluginPanel\n{\n\tprivate static final ImageIcon RESET_ICON;\n\tprivate static final ImageIcon RESET_HOVER_ICON;\n\n\tstatic\n\t{\n\t\tfinal BufferedImage addIcon \u003d ImageUtil.loadImageResource(ZulrahHelperPlugin.class, \"/ui/reset_icon.png\");\n\t\tRESET_ICON \u003d new ImageIcon(addIcon);\n\t\tRESET_HOVER_ICON \u003d new ImageIcon(ImageUtil.alphaOffset(addIcon, 0.53f));\n\t}\n\n\tprivate final ZulrahHelperPlugin plugin;\n\tprivate final PatternTree tree;\n\n\tprivate final JPanel phasesView \u003d new JPanel(new GridBagLayout());\n\n\t@Inject\n\tZulrahHelperPanel(ZulrahHelperPlugin plugin, PatternTree tree)\n\t{\n\t\tthis.plugin \u003d plugin;\n\t\tthis.tree \u003d tree;\n\n\t\tsetLayout(new BorderLayout());\n\t\tsetBorder(new EmptyBorder(10, 10, 10, 10));\n\n\t\tJPanel northPanel \u003d new JPanel(new BorderLayout());\n\t\tnorthPanel.setBorder(new EmptyBorder(1, 0, 10, 0));\n\n\t\tJLabel title \u003d new JLabel();\n\t\ttitle.setText(\"Zulrah Helper\");\n\t\ttitle.setForeground(Color.WHITE);\n\n\t\tnorthPanel.add(title, BorderLayout.WEST);\n\t\tJButton reset \u003d new JButton(RESET_ICON);\n\t\tnorthPanel.add(reset, BorderLayout.EAST);\n\n\t\tJPanel centerPanel \u003d new JPanel(new BorderLayout());\n\t\tcenterPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tphasesView.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\treset.setToolTipText(\"Reset Zulrah rotation\");\n\t\treset.setRolloverIcon(RESET_HOVER_ICON);\n\t\treset.addActionListener(l -\u003e plugin.reset());\n\t\treset.setFocusable(false);\n\n\t\tcenterPanel.add(phasesView, BorderLayout.CENTER);\n\n\t\tadd(northPanel, BorderLayout.NORTH);\n\t\tadd(centerPanel, BorderLayout.CENTER);\n\n\t\trebuildPanel();\n\t}\n\n\tpublic void rebuildPanel()\n\t{\n\t\tSwingUtil.fastRemoveAll(phasesView);\n\n\t\tGridBagConstraints constraints \u003d new GridBagConstraints();\n\t\tconstraints.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\tconstraints.weightx \u003d 1;\n\t\tconstraints.gridx \u003d 0;\n\t\tconstraints.gridy \u003d 0;\n\n\t\tJPanel rowPanel \u003d new JPanel(new GridBagLayout());\n\t\tGridBagConstraints rowConstraints \u003d resetRowConstraints();\n\n\t\tvar path \u003d tree.buildPath();\n\t\tint phaseNumber \u003d 1;\n\t\tString title \u003d null;\n\t\tfor (var node : path)\n\t\t{\n\t\t\tif (!Strings.isNullOrEmpty(node.getValue().getTitle()))\n\t\t\t{\n\t\t\t\ttitle \u003d node.getValue().getTitle();\n\t\t\t}\n\n\t\t\tif (rowPanel.getComponentCount() \u003e\u003d 2)\n\t\t\t{\n\t\t\t\tphasesView.add(rowPanel, constraints);\n\t\t\t\tconstraints.gridy++;\n\t\t\t\trowPanel \u003d new JPanel(new GridBagLayout());\n\t\t\t\trowConstraints \u003d resetRowConstraints();\n\t\t\t}\n\n\t\t\tif (node.equals(tree.getState()))\n\t\t\t{\n\t\t\t\tcreateLabel(String.format(\"Current Phase: %s #%d\", title, phaseNumber), constraints);\n\t\t\t}\n\n\t\t\trowPanel.add(new ZulrahHelperPhasePanel(plugin, tree, node, 1), rowConstraints);\n\t\t\trowConstraints.gridx++;\n\n\t\t\tif (node.size() \u003e\u003d 2)\n\t\t\t{\n\t\t\t\tphasesView.add(rowPanel, constraints);\n\t\t\t\tconstraints.gridy++;\n\t\t\t\trowPanel \u003d new JPanel(new GridBagLayout());\n\t\t\t\trowConstraints \u003d resetRowConstraints();\n\n\t\t\t\tcreateLabel(\"Select Phase...\", constraints);\n\n\t\t\t\tfor (var nc : node.getChildren())\n\t\t\t\t{\n\t\t\t\t\trowPanel.add(new ZulrahHelperPhasePanel(plugin, tree, nc, node.size()), rowConstraints);\n\t\t\t\t\trowConstraints.gridx++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tphasesView.add(rowPanel, constraints);\n\t\t\tconstraints.gridy++;\n\t\t\tphaseNumber++;\n\t\t}\n\n\t\trepaint();\n\t\trevalidate();\n\t}\n\n\tprivate GridBagConstraints resetRowConstraints()\n\t{\n\t\tvar c \u003d new GridBagConstraints();\n\t\tc.fill \u003d GridBagConstraints.VERTICAL;\n\t\tc.weighty \u003d 1;\n\t\tc.gridx \u003d 0;\n\t\tc.gridy \u003d 0;\n\n\t\treturn c;\n\t}\n\n\tprivate void createLabel(String text, GridBagConstraints constraints)\n\t{\n\t\tphasesView.add(Box.createRigidArea(new Dimension(0, 12)), constraints);\n\t\tconstraints.gridy++;\n\t\tphasesView.add(new JLabel(text), constraints);\n\t\tconstraints.gridy++;\n\t}\n}\n","filePath":"src\\main\\java\\com\\zulrahhelper\\ui\\ZulrahHelperPanel.java"},{"fileName":"ZulrahHelperPhasePanel.java","content":"/*\n * Copyright (c) 2020, Anthony Alves\n * Copyright (c) 2024, Ron Young \u003chttps://github.com/raiyni\u003e\n * All rights reserved.\n *\n *  Redistribution and use in source and binary forms, with or without\n *  modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *     list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *     this list of conditions and the following disclaimer in the documentation\n *     and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.zulrahhelper.ui;\n\nimport com.zulrahhelper.ZulrahHelperPlugin;\nimport com.zulrahhelper.tree.Node;\nimport com.zulrahhelper.tree.PatternTree;\nimport java.awt.event.MouseEvent;\nimport java.awt.event.MouseListener;\nimport java.awt.image.BufferedImage;\nimport javax.swing.ImageIcon;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.border.LineBorder;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.util.ImageUtil;\n\n@Slf4j\npublic class ZulrahHelperPhasePanel extends JPanel implements MouseListener\n{\n\tprivate final ZulrahHelperPlugin plugin;\n\tprivate final Node node;\n\n\tprivate final JLabel picLabel;\n\tprivate final ImageIcon phaseIcon;\n\tprivate final ImageIcon phaseIconHover;\n\n\tprivate final PatternTree tree;\n\n\tZulrahHelperPhasePanel(ZulrahHelperPlugin plugin, PatternTree tree, Node node, int columns)\n\t{\n\t\tthis.plugin \u003d plugin;\n\t\tthis.node \u003d node;\n\t\tthis.tree \u003d tree;\n\n\t\tBufferedImage img \u003d processImg(Images.createImage(node.getValue(), plugin.getConfig()), columns);\n\t\tphaseIcon \u003d new ImageIcon(img);\n\t\tphaseIconHover \u003d new ImageIcon(ImageUtil.luminanceScale(img, .75f));\n\n\t\tpicLabel \u003d new JLabel(phaseIcon);\n\t\tpicLabel.addMouseListener(this);\n//\n\t\tif (node.equals(tree.getState()))\n\t\t{\n\t\t\tsetBorder(new LineBorder(ColorScheme.PROGRESS_COMPLETE_COLOR));\n\t\t}\n\n\t\tif (columns \u003e\u003d 2)\n\t\t{\n\t\t\tsetBorder(new LineBorder(ColorScheme.PROGRESS_INPROGRESS_COLOR));\n\t\t}\n\n\t\tadd(picLabel);\n\t}\n\n\tprivate BufferedImage processImg(BufferedImage img, int columns)\n\t{\n\t\tint size \u003d 95;\n\t\t// make the images smaller if we\u0027re showing more than 3 images on the same row\n\t\tif (columns \u003e\u003d 3)\n\t\t{\n\t\t\tsize \u003d 60;\n\t\t}\n\t\timg \u003d ImageUtil.resizeImage(img, size, size);\n\t\tif (tree.depth(node) \u003c tree.depth(tree.getState()))\n\t\t{\n\t\t\timg \u003d ImageUtil.luminanceScale(img, 0.35f);\n\t\t}\n\n\t\treturn img;\n\t}\n\n\t@Override\n\tpublic void mouseClicked(MouseEvent mouseEvent)\n\t{\n\t}\n\n\t@Override\n\tpublic void mousePressed(MouseEvent mouseEvent)\n\t{\n\t\tplugin.setState(node);\n\t}\n\n\t@Override\n\tpublic void mouseReleased(MouseEvent mouseEvent)\n\t{\n\n\t}\n\n\t@Override\n\tpublic void mouseEntered(MouseEvent mouseEvent)\n\t{\n\t\tpicLabel.setIcon(phaseIconHover);\n\t}\n\n\t@Override\n\tpublic void mouseExited(MouseEvent mouseEvent)\n\t{\n\t\tpicLabel.setIcon(phaseIcon);\n\t}\n}\n","filePath":"src\\main\\java\\com\\zulrahhelper\\ui\\ZulrahHelperPhasePanel.java"},{"fileName":"ZulrahHelperConfig.java","content":"package com.zulrahhelper;\n\nimport java.awt.Color;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\nimport net.runelite.client.config.Keybind;\n\n@ConfigGroup(ZulrahHelperPlugin.CONFIG_GROUP)\npublic interface ZulrahHelperConfig extends Config\n{\n\t@ConfigSection(\n\t\tname \u003d ZulrahHelperPlugin.SECTION_IMAGE_OPTIONS,\n\t\tdescription \u003d \"All the options for image options\",\n\t\tposition \u003d 0\n\t)\n\tString SECTION_IMAGE_OPTIONS \u003d ZulrahHelperPlugin.SECTION_IMAGE_OPTIONS;\n\n\t@ConfigSection(\n\t\tname \u003d ZulrahHelperPlugin.SECTION_HOTKEYS,\n\t\tdescription \u003d \"All the options for binding hotkeys\",\n\t\tposition \u003d 1\n\t)\n\tString SECTION_HOTKEYS \u003d \"Hotkeys\";\n\n\t@ConfigSection(\n\t\tname \u003d ZulrahHelperPlugin.SECTION_MISC,\n\t\tdescription \u003d \"Miscellaneous options for the plugin\",\n\t\tposition \u003d 2\n\t)\n\tString SECTION_MISC \u003d ZulrahHelperPlugin.SECTION_MISC;\n\n\t@ConfigItem(\n\t\tkeyName \u003d ZulrahHelperPlugin.DISPLAY_PRAYER_KEY,\n\t\tsection \u003d ZulrahHelperPlugin.SECTION_IMAGE_OPTIONS,\n\t\tname \u003d \"Prayer Icons\",\n\t\tdescription \u003d \"Set phase images to use prayer icons, \" +\n\t\t\t\"denoting what overhead prayer to use per phase. \" +\n\t\t\t\"No prayer icon means the phase is safe to turn overheads off.\",\n\t\tposition \u003d 0\n\t)\n\tdefault boolean displayPrayerIcons()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d ZulrahHelperPlugin.DISPLAY_ATTACK_KEY,\n\t\tsection \u003d ZulrahHelperPlugin.SECTION_IMAGE_OPTIONS,\n\t\tname \u003d \"Attack Icons\",\n\t\tdescription \u003d \"Display number of Zulrah attacks\",\n\t\tposition \u003d 1\n\t)\n\tdefault boolean displayAttackIcons()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d ZulrahHelperPlugin.DISPLAY_VENOM_KEY,\n\t\tsection \u003d ZulrahHelperPlugin.SECTION_IMAGE_OPTIONS,\n\t\tname \u003d \"Venom Icons\",\n\t\tdescription \u003d \"Display number of venom attacks\",\n\t\tposition \u003d 1\n\t)\n\tdefault boolean displayVenom()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d ZulrahHelperPlugin.DISPLAY_SNAKELINGS_KEY,\n\t\tsection \u003d ZulrahHelperPlugin.SECTION_IMAGE_OPTIONS,\n\t\tname \u003d \"Snakeling Icons\",\n\t\tdescription \u003d \"Display snakeling spawns\",\n\t\tposition \u003d 1\n\t)\n\tdefault boolean displaySnakelings()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d ZulrahHelperPlugin.DARK_MODE_KEY,\n\t\tsection \u003d ZulrahHelperPlugin.SECTION_IMAGE_OPTIONS,\n\t\tname \u003d \"Dark Mode\",\n\t\tdescription \u003d \"Set phase images to dark mode\",\n\t\tposition \u003d 2\n\t)\n\tdefault boolean darkMode()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d ZulrahHelperPlugin.MAGE_COLOR_KEY,\n\t\tsection \u003d ZulrahHelperPlugin.SECTION_IMAGE_OPTIONS,\n\t\tname \u003d \"Mage Form Color\",\n\t\tdescription \u003d \"Color of Zulrah mage form\",\n\t\tposition \u003d 3\n\t)\n\tdefault Color mageColor()\n\t{\n\t\treturn new Color(0, 51, 255);\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d ZulrahHelperPlugin.RANGE_COLOR_KEY,\n\t\tsection \u003d ZulrahHelperPlugin.SECTION_IMAGE_OPTIONS,\n\t\tname \u003d \"Range Form Color\",\n\t\tdescription \u003d \"Color of Zulrah range form\",\n\t\tposition \u003d 3\n\t)\n\tdefault Color rangeColor()\n\t{\n\t\treturn new Color(25, 194, 4);\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d ZulrahHelperPlugin.MELEE_COLOR_KEY,\n\t\tsection \u003d ZulrahHelperPlugin.SECTION_IMAGE_OPTIONS,\n\t\tname \u003d \"Melee Form Color\",\n\t\tdescription \u003d \"Color of Zulrah melee form\",\n\t\tposition \u003d 3\n\t)\n\tdefault Color meleeColor()\n\t{\n\t\treturn new Color(251, 0, 7);\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d ZulrahHelperPlugin.AUTO_HIDE_KEY,\n\t\tsection \u003d ZulrahHelperPlugin.SECTION_MISC,\n\t\tname \u003d \"Hide when outside of Zul-Andra\",\n\t\tdescription \u003d \"Don\u0027t show the button in the sidebar when you\u0027re not in Zul-Andra\",\n\t\tposition \u003d 3\n\t)\n\tdefault boolean autoHide()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d ZulrahHelperPlugin.RESET_ON_LEAVE_KEY,\n\t\tsection \u003d ZulrahHelperPlugin.SECTION_MISC,\n\t\tname \u003d \"Reset on Leave\",\n\t\tdescription \u003d \"Automatically reset when leaving the Zulrah area\",\n\t\tposition \u003d 2\n\t)\n\tdefault boolean resetOnLeave()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"resetPhasesHotkey\",\n\t\tsection \u003d ZulrahHelperPlugin.SECTION_HOTKEYS,\n\t\tname \u003d \"Reset Phases\",\n\t\tdescription \u003d \"Set phases back to start\",\n\t\tposition \u003d 4\n\t)\n\tdefault Keybind resetPhasesHotkey()\n\t{\n\t\treturn Keybind.NOT_SET;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"nextPhaseHotkey\",\n\t\tsection \u003d ZulrahHelperPlugin.SECTION_HOTKEYS,\n\t\tname \u003d \"Next Phase\",\n\t\tdescription \u003d \"Increment the phase number by 1\",\n\t\tposition \u003d 5\n\t)\n\tdefault Keybind nextPhaseHotkey()\n\t{\n\t\treturn Keybind.NOT_SET;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"phaseSelection1Hotkey\",\n\t\tsection \u003d ZulrahHelperPlugin.SECTION_HOTKEYS,\n\t\tname \u003d \"Phase Selection 1\",\n\t\tdescription \u003d \"Choose the first option in phase selection\",\n\t\tposition \u003d 6\n\t)\n\tdefault Keybind phaseSelection1Hotkey()\n\t{\n\t\treturn Keybind.NOT_SET;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"phaseSelection2Hotkey\",\n\t\tsection \u003d ZulrahHelperPlugin.SECTION_HOTKEYS,\n\t\tname \u003d \"Phase Selection 2\",\n\t\tdescription \u003d \"Choose the second option in phase selection\",\n\t\tposition \u003d 7\n\t)\n\tdefault Keybind phaseSelection2Hotkey()\n\t{\n\t\treturn Keybind.NOT_SET;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"phaseSelection3Hotkey\",\n\t\tsection \u003d ZulrahHelperPlugin.SECTION_HOTKEYS,\n\t\tname \u003d \"Phase Selection 3\",\n\t\tdescription \u003d \"Choose the third option in phase selection\",\n\t\tposition \u003d 8\n\t)\n\tdefault Keybind phaseSelection3Hotkey()\n\t{\n\t\treturn Keybind.NOT_SET;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"imageOrientation\",\n\t\tsection \u003d ZulrahHelperPlugin.SECTION_IMAGE_OPTIONS,\n\t\tname \u003d \"Orientation\",\n\t\tdescription \u003d \"Rotate the phase images to the specified cardinal direction\",\n\t\tposition \u003d 9\n\t)\n\tdefault ImageOrientation imageOrientation()\n\t{\n\t\treturn ImageOrientation.SOUTH;\n\t}\n}\n","filePath":"src\\main\\java\\com\\zulrahhelper\\ZulrahHelperConfig.java"},{"fileName":"ZulrahHelperPlugin.java","content":"package com.zulrahhelper;\n\nimport com.google.inject.Provides;\nimport com.zulrahhelper.tree.Node;\nimport com.zulrahhelper.tree.PatternTree;\nimport com.zulrahhelper.ui.ZulrahHelperPanel;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\nimport javax.inject.Inject;\nimport javax.swing.SwingUtilities;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Player;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.input.KeyManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.util.HotkeyListener;\nimport net.runelite.client.util.ImageUtil;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Zulrah Helper\",\n\tdescription \u003d \"Panel to show Zulrah rotations\",\n\ttags \u003d {\"zulrah\", \"pvm\"}\n)\npublic class ZulrahHelperPlugin extends Plugin\n{\n\tstatic final String CONFIG_GROUP \u003d \"zulrahhelper\";\n\tstatic final String SECTION_IMAGE_OPTIONS \u003d \"Image Options\";\n\tstatic final String SECTION_HOTKEYS \u003d \"Hotkeys\";\n\tstatic final String SECTION_MISC \u003d \"Miscellaneous\";\n\n\tstatic final String DARK_MODE_KEY \u003d \"darkMode\";\n\tstatic final String DISPLAY_PRAYER_KEY \u003d \"displayPrayer\";\n\tstatic final String DISPLAY_ATTACK_KEY \u003d \"displayAttack\";\n\tstatic final String DISPLAY_VENOM_KEY \u003d \"displayVenom\";\n\tstatic final String DISPLAY_SNAKELINGS_KEY \u003d \"displaySnakelings\";\n\tstatic final String IMAGE_ORIENTATION_KEY \u003d \"imageOrientation\";\n\tstatic final String AUTO_HIDE_KEY \u003d \"autoHide\";\n\tstatic final String RESET_ON_LEAVE_KEY \u003d \"resetOnLeave\";\n\tstatic final String MAGE_COLOR_KEY \u003d \"mageColor\";\n\tstatic final String RANGE_COLOR_KEY \u003d \"rangeColor\";\n\tstatic final String MELEE_COLOR_KEY \u003d \"meleeColor\";\n\n\n\tprivate static final int ZULANDRA_REGION_ID \u003d 8751;\n\tprivate static final int ZULRAH_SPAWN_REGION_ID \u003d 9007;\n\tprivate static final int ZULRAH_REGION_ID \u003d 9008;\n\n\tprivate static final List\u003cString\u003e OPTION_KEYS \u003d Arrays.asList(\n\t\tDARK_MODE_KEY,\n\t\tDISPLAY_PRAYER_KEY,\n\t\tDISPLAY_ATTACK_KEY,\n\t\tIMAGE_ORIENTATION_KEY,\n\t\tRESET_ON_LEAVE_KEY,\n\t\tDISPLAY_VENOM_KEY,\n\t\tDISPLAY_SNAKELINGS_KEY,\n\t\tMAGE_COLOR_KEY,\n\t\tMELEE_COLOR_KEY,\n\t\tRANGE_COLOR_KEY\n\t);\n\n\t@Inject\n\tprivate KeyManager keyManager;\n\n\t@Inject\n\tprivate ClientToolbar clientToolbar;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate PatternTree tree;\n\n\t@Inject\n\t@Getter\n\tprivate ZulrahHelperConfig config;\n\n\tprivate ZulrahHelperPanel panel;\n\tprivate NavigationButton navButton;\n\n\tprivate final List\u003cHotkeyListener\u003e hotkeys \u003d new ArrayList\u003c\u003e();\n\tprivate boolean hotkeysEnabled \u003d false;\n\tprivate boolean panelEnabled \u003d false;\n\tprivate boolean wasInInstance \u003d false;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tpanel \u003d injector.getInstance(ZulrahHelperPanel.class);\n\t\tnavButton \u003d NavigationButton.builder()\n\t\t\t.tooltip(\"Zulrah Helper\")\n\t\t\t.icon(ImageUtil.loadImageResource(getClass(), \"/icon.png\"))\n\t\t\t.priority(70)\n\t\t\t.panel(panel)\n\t\t\t.build();\n\t\tclientToolbar.addNavigation(navButton);\n\n\t\tinitHotkeys();\n\t\ttogglePanel(!config.autoHide(), false);\n\t\treset();\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tclientToolbar.removeNavigation(navButton);\n\t\thotkeys.forEach(keyManager::unregisterKeyListener);\n\t\thotkeys.clear();\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif (!event.getGroup().equals(CONFIG_GROUP))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (OPTION_KEYS.contains(event.getKey()))\n\t\t{\n\t\t\trebuildPanel();\n\t\t}\n\n\t\tif (event.getKey().equals(AUTO_HIDE_KEY) \u0026\u0026 !config.autoHide())\n\t\t{\n\t\t\ttogglePanel(true, false);\n\t\t}\n\t}\n\n\t@Provides\n\tZulrahHelperConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(ZulrahHelperConfig.class);\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick tick)\n\t{\n\t\tcheckRegion();\n\t}\n\n\tprivate void checkRegion()\n\t{\n\t\tif (inZulrahRegion())\n\t\t{\n\t\t\tif (!hotkeysEnabled)\n\t\t\t{\n\t\t\t\ttoggleHotkeys();\n\t\t\t}\n\n\t\t\tif (config.autoHide() \u0026\u0026 !panelEnabled)\n\t\t\t{\n\t\t\t\ttogglePanel(true, true);\n\t\t\t}\n\n\t\t\tif (wasInInstance \u0026\u0026 !client.isInInstancedRegion())\n\t\t\t{\n\t\t\t\treset();\n\t\t\t}\n\n\t\t\twasInInstance \u003d client.isInInstancedRegion();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (hotkeysEnabled)\n\t\t\t{\n\t\t\t\ttoggleHotkeys();\n\t\t\t}\n\n\t\t\tif (panelEnabled \u0026\u0026 config.autoHide())\n\t\t\t{\n\t\t\t\ttogglePanel(false, false);\n\t\t\t}\n\n\t\t\tif (wasInInstance)\n\t\t\t{\n\t\t\t\tif (config.resetOnLeave())\n\t\t\t\t{\n\t\t\t\t\treset();\n\t\t\t\t}\n\n\t\t\t\twasInInstance \u003d false;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate boolean inZulrahRegion()\n\t{\n\t\tfinal int regionId \u003d getRegionId();\n\n\t\treturn regionId \u003d\u003d ZULANDRA_REGION_ID ||\n\t\t\t((regionId \u003d\u003d ZULRAH_SPAWN_REGION_ID || regionId \u003d\u003d ZULRAH_REGION_ID) \u0026\u0026 client.isInInstancedRegion());\n\t}\n\n\tprivate int getRegionId()\n\t{\n\t\tPlayer player \u003d client.getLocalPlayer();\n\t\tif (player \u003d\u003d null)\n\t\t{\n\t\t\treturn -1;\n\t\t}\n\n\t\treturn WorldPoint.fromLocalInstance(client, player.getLocalLocation()).getRegionID();\n\t}\n\n\tpublic void reset()\n\t{\n\t\ttree.reset();\n\t\tSwingUtilities.invokeLater(() -\u003e panel.rebuildPanel());\n\t}\n\n\tpublic void setState(Node node)\n\t{\n\t\tvar s \u003d tree.find(node.getValue());\n\t\tif (s \u003d\u003d null)\n\t\t{\n\t\t\tlog.debug(\"state not found {}\", node);\n\t\t\treturn;\n\t\t}\n\n\t\tif (s.getValue().isReset())\n\t\t{\n\t\t\treset();\n\t\t\treturn;\n\t\t}\n\n\t\ttree.setState(s);\n\t\trebuildPanel();\n\t}\n\n\tprivate void rebuildPanel()\n\t{\n\t\tSwingUtilities.invokeLater(() -\u003e panel.rebuildPanel());\n\t}\n\n\tprivate void selectOption(int choice)\n\t{\n\t\tvar node \u003d tree.getState();\n\t\tvar choices \u003d node.getChildren();\n\t\tif (choice \u003e\u003d choices.size())\n\t\t{\n\t\t\tlog.error(\"trying to select nonexistent phase: {} {}\", choice, choices.size());\n\t\t\treturn;\n\t\t}\n\n\t\tsetState(choices.get(choice));\n\t}\n\n\tprivate void initHotkeys()\n\t{\n\t\thotkeys.forEach(keyManager::unregisterKeyListener);\n\t\thotkeys.clear();\n\n\t\thotkeys.add(new HotkeyListener(() -\u003e config.phaseSelection1Hotkey())\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void hotkeyPressed()\n\t\t\t{\n\t\t\t\tselectOption(0);\n\t\t\t}\n\t\t});\n\n\t\thotkeys.add(new HotkeyListener(() -\u003e config.phaseSelection2Hotkey())\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void hotkeyPressed()\n\t\t\t{\n\t\t\t\tselectOption(1);\n\t\t\t}\n\t\t});\n\n\t\thotkeys.add(new HotkeyListener(() -\u003e config.phaseSelection3Hotkey())\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void hotkeyPressed()\n\t\t\t{\n\t\t\t\tselectOption(2);\n\t\t\t}\n\t\t});\n\n\t\thotkeys.add(new HotkeyListener(() -\u003e config.nextPhaseHotkey())\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void hotkeyPressed()\n\t\t\t{\n\t\t\t\tselectOption(0);\n\t\t\t}\n\t\t});\n\n\t\thotkeys.add(new HotkeyListener(() -\u003e config.resetPhasesHotkey())\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void hotkeyPressed()\n\t\t\t{\n\t\t\t\treset();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate void toggleHotkeys()\n\t{\n\t\thotkeys.forEach(hotkeysEnabled ? keyManager::unregisterKeyListener : keyManager::registerKeyListener);\n\t\thotkeysEnabled \u003d !hotkeysEnabled;\n\t}\n\n\tprivate void togglePanel(boolean enable, boolean show)\n\t{\n\t\tpanelEnabled \u003d enable;\n\t\tif (enable)\n\t\t{\n\t\t\tclientToolbar.addNavigation(navButton);\n\t\t\tif (show)\n\t\t\t{\n\t\t\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\t\t\tclientToolbar.openPanel(navButton);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tclientToolbar.removeNavigation(navButton);\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\zulrahhelper\\ZulrahHelperPlugin.java"},{"fileName":"ImageBuilderTest.java","content":"/*\n * Copyright (c) 2024, Ron Young \u003chttps://github.com/raiyni\u003e\n * All rights reserved.\n *\n *  Redistribution and use in source and binary forms, with or without\n *  modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *     list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *     this list of conditions and the following disclaimer in the documentation\n *     and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.zulrahhelper;\n\nimport com.zulrahhelper.options.Prayer;\nimport com.zulrahhelper.options.StandLocation;\nimport com.zulrahhelper.options.ZulrahForm;\nimport com.zulrahhelper.options.ZulrahLocation;\nimport com.zulrahhelper.tree.Node;\nimport com.zulrahhelper.tree.Step;\nimport com.zulrahhelper.ui.Images;\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport java.io.IOException;\nimport javax.imageio.ImageIO;\nimport lombok.extern.slf4j.Slf4j;\nimport static org.junit.Assert.assertEquals;\nimport org.junit.Test;\nimport static org.mockito.Mockito.spy;\n\n@Slf4j\npublic class ImageBuilderTest\n{\n\tprivate ZulrahHelperConfig getConfig()\n\t{\n\t\treturn spy(ZulrahHelperConfig.class);\n\t}\n\n\t@Test\n\tpublic void streamlinedBuilder()\n\t{\n\t\tvar root \u003d Node.builder()\n\t\t\t.value(Step.builder()\n\t\t\t\t.point(StandLocation.START)\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.attacks(5)\n\t\t\t\t.venom(4)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.form(ZulrahForm.MELEE)\n\t\t\t\t.point(StandLocation.START)\n\t\t\t\t.point(StandLocation.START_MAGMA)\n\t\t\t\t.attacks(2)\n\t\t\t\t.build())\n\t\t\t.node()\n\t\t\t.value(Step.builder()\n\t\t\t\t.form(ZulrahForm.MAGE)\n\t\t\t\t.point(StandLocation.START)\n\t\t\t\t.point(StandLocation.START_MAGMA)\n\t\t\t\t.attacks(4)\n\t\t\t\t.build())\n\t\t\t.buildUp();\n\n\t\tassertEquals(1, root.getChildren().size());\n\t\tassertEquals(root, root.getChildren().get(0).getParent());\n\t\tassertEquals(1, root.getChildren().get(0).getChildren().size());\n\t\tassertEquals(ZulrahForm.MAGE, root.getChildren().get(0).getChildren().get(0).getValue().getForm());\n\t}\n\n\t@Test\n\tpublic void childrenHasParent()\n\t{\n\t\tvar root \u003d Node.builder()\n\t\t\t.value(Step.builder()\n\t\t\t\t.point(StandLocation.START)\n\t\t\t\t.form(ZulrahForm.RANGE)\n\t\t\t\t.attacks(5)\n\t\t\t\t.venom(4)\n\t\t\t\t.build())\n\t\t\t.child(Node.builder()\n\t\t\t\t.value(Step.builder()\n\t\t\t\t\t.form(ZulrahForm.MELEE)\n\t\t\t\t\t.point(StandLocation.START)\n\t\t\t\t\t.point(StandLocation.START_MAGMA)\n\t\t\t\t\t.attacks(2)\n\t\t\t\t\t.build())\n\t\t\t\t.build())\n\t\t\t.build();\n\n\t\tassertEquals(1, root.getChildren().size());\n\t\tassertEquals(root, root.getChildren().get(0).getParent());\n\t\tassertEquals(0, root.getChildren().get(0).getChildren().size());\n\t}\n\n\t@Test\n\tpublic void simpleStep() throws IOException\n\t{\n\t\tStep step \u003d Step.builder()\n\t\t\t.point(StandLocation.START)\n\t\t\t.point(StandLocation.START_MAGMA)\n\t\t\t.spawn(ZulrahLocation.NORTH)\n\t\t\t.prayer(Prayer.MAGIC)\n\t\t\t.prayer(Prayer.RANGE)\n\t\t\t.form(ZulrahForm.MELEE)\n\t\t\t.snakelings(2)\n\t\t\t.attacks(6)\n\t\t\t.venom(3)\n\t\t\t.build();\n\n\t\tassertEquals(StandLocation.START, step.getPoints().get(0));\n\t\tassertEquals(ZulrahLocation.NORTH, step.getSpawn());\n\t\tassertEquals(2, step.getPrayers().size());\n\t\tassertEquals(Prayer.MAGIC, step.getPrayers().get(0));\n\n\t\tBufferedImage img \u003d Images.createImage(step, getConfig());\n\n\t\tFile out \u003d new File(\"out/simple.png\");\n\t\tImageIO.write(img, \"png\", out);\n\t}\n\n\t@Test\n\tpublic void spawns() throws IOException\n\t{\n\t\tfor (var loc : ZulrahLocation.values())\n\t\t{\n\t\t\tStep step \u003d Step.builder()\n\t\t\t\t.point(StandLocation.START)\n\t\t\t\t.spawn(loc)\n\t\t\t\t.build();\n\n\t\t\tBufferedImage img \u003d Images.createImage(step, getConfig());\n\n\t\t\tFile out \u003d new File(\"out/spawns/\" + loc + \".png\");\n\t\t\tImageIO.write(img, \"png\", out);\n\t\t}\n\t}\n\n\t@Test\n\tpublic void points() throws IOException\n\t{\n\t\tfor (var loc : StandLocation.values())\n\t\t{\n\t\t\tStep step \u003d Step.builder()\n\t\t\t\t.point(loc)\n\t\t\t\t.prayer(Prayer.MAGIC)\n\t\t\t\t.build();\n\n\t\t\tBufferedImage img \u003d Images.createImage(step, getConfig());\n\n\t\t\tFile out \u003d new File(\"out/points/\" + loc + \".png\");\n\t\t\tImageIO.write(img, \"png\", out);\n\t\t}\n\t}\n}\n","filePath":"src\\test\\java\\com\\zulrahhelper\\ImageBuilderTest.java"},{"fileName":"ZulrahHelperPluginTest.java","content":"package com.zulrahhelper;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ZulrahHelperPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(ZulrahHelperPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\zulrahhelper\\ZulrahHelperPluginTest.java"}]},{"commit":"08c784abc517f4b1f2e6fd9271a52142f9312542","repository":"https://github.com/Adam-/runelite-plugins.git","internalName":"gpu-legacy","files":[{"fileName":"AntiAliasingMode.java","content":"/*\n * Copyright (c) 2018, Lotto \u003chttps://github.com/devLotto\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage info.sigterm.plugins.gpulegacy.config;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum AntiAliasingMode\n{\n\tDISABLED(\"Disabled\", 0),\n\tMSAA_2(\"MSAA x2\", 2),\n\tMSAA_4(\"MSAA x4\", 4),\n\tMSAA_8(\"MSAA x8\", 8),\n\tMSAA_16(\"MSAA x16\", 16);\n\n\tprivate final String name;\n\tprivate final int samples;\n\n\t@Override\n\tpublic String toString()\n\t{\n\t\treturn name;\n\t}\n}\n","filePath":"src\\main\\java\\info\\sigterm\\plugins\\gpulegacy\\config\\AntiAliasingMode.java"},{"fileName":"ColorBlindMode.java","content":"/*\n * Copyright (c) 2020 Ben Poulson \u003chttps://github.com/benpoulson\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage info.sigterm.plugins.gpulegacy.config;\n\npublic enum ColorBlindMode\n{\n\tNONE,\n\tPROTANOPE,\n\tDEUTERANOPE,\n\tTRITANOPE;\n}\n","filePath":"src\\main\\java\\info\\sigterm\\plugins\\gpulegacy\\config\\ColorBlindMode.java"},{"fileName":"UIScalingMode.java","content":"/*\n * Copyright (c) 2019 logarrhytmic \u003chttps://github.com/logarrhythmic\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage info.sigterm.plugins.gpulegacy.config;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum UIScalingMode\n{\n\tNEAREST(\"Nearest Neighbor\", 0),\n\tLINEAR(\"Bilinear\", 0),\n\tMITCHELL(\"Bicubic (Mitchell)\", 1),\n\tCATMULL_ROM(\"Bicubic (Catmull-Rom)\", 2),\n\tXBR(\"xBR\", 3);\n\n\tprivate final String name;\n\tprivate final int mode;\n\n\t@Override\n\tpublic String toString()\n\t{\n\t\treturn name;\n\t}\n}\n","filePath":"src\\main\\java\\info\\sigterm\\plugins\\gpulegacy\\config\\UIScalingMode.java"},{"fileName":"GLBuffer.java","content":"/*\n * Copyright (c) 2021, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage info.sigterm.plugins.gpulegacy;\n\nclass GLBuffer\n{\n\tString name;\n\tint glBufferId \u003d -1;\n\tint size \u003d -1;\n\tlong clBuffer \u003d -1;\n\n\tGLBuffer(String name)\n\t{\n\t\tthis.name \u003d name;\n\t}\n}\n","filePath":"src\\main\\java\\info\\sigterm\\plugins\\gpulegacy\\GLBuffer.java"},{"fileName":"GpuFloatBuffer.java","content":"/*\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage info.sigterm.plugins.gpulegacy;\n\nimport java.nio.ByteBuffer;\nimport java.nio.ByteOrder;\nimport java.nio.FloatBuffer;\n\nclass GpuFloatBuffer\n{\n\tprivate FloatBuffer buffer \u003d allocateDirect(65536);\n\n\tvoid put(float s, float t, float p, float q)\n\t{\n\t\tbuffer.put(s).put(t).put(p).put(q);\n\t}\n\n\tvoid flip()\n\t{\n\t\tbuffer.flip();\n\t}\n\n\tvoid clear()\n\t{\n\t\tbuffer.clear();\n\t}\n\n\tvoid ensureCapacity(int size)\n\t{\n\t\tint capacity \u003d buffer.capacity();\n\t\tfinal int position \u003d buffer.position();\n\t\tif ((capacity - position) \u003c size)\n\t\t{\n\t\t\tdo\n\t\t\t{\n\t\t\t\tcapacity *\u003d 2;\n\t\t\t}\n\t\t\twhile ((capacity - position) \u003c size);\n\n\t\t\tFloatBuffer newB \u003d allocateDirect(capacity);\n\t\t\tbuffer.flip();\n\t\t\tnewB.put(buffer);\n\t\t\tbuffer \u003d newB;\n\t\t}\n\t}\n\n\tFloatBuffer getBuffer()\n\t{\n\t\treturn buffer;\n\t}\n\n\tstatic FloatBuffer allocateDirect(int size)\n\t{\n\t\treturn ByteBuffer.allocateDirect(size * Float.BYTES)\n\t\t\t.order(ByteOrder.nativeOrder())\n\t\t\t.asFloatBuffer();\n\t}\n}\n","filePath":"src\\main\\java\\info\\sigterm\\plugins\\gpulegacy\\GpuFloatBuffer.java"},{"fileName":"GpuIntBuffer.java","content":"/*\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage info.sigterm.plugins.gpulegacy;\n\nimport java.nio.ByteBuffer;\nimport java.nio.ByteOrder;\nimport java.nio.IntBuffer;\n\nclass GpuIntBuffer\n{\n\tprivate IntBuffer buffer \u003d allocateDirect(65536);\n\n\tvoid put(float x, float y, float z, int w)\n\t{\n\t\tbuffer.put(Float.floatToIntBits(x))\n\t\t\t.put(Float.floatToIntBits(y))\n\t\t\t.put(Float.floatToIntBits(z))\n\t\t\t.put(w);\n\t}\n\n\tvoid flip()\n\t{\n\t\tbuffer.flip();\n\t}\n\n\tvoid clear()\n\t{\n\t\tbuffer.clear();\n\t}\n\n\tvoid ensureCapacity(int size)\n\t{\n\t\tint capacity \u003d buffer.capacity();\n\t\tfinal int position \u003d buffer.position();\n\t\tif ((capacity - position) \u003c size)\n\t\t{\n\t\t\tdo\n\t\t\t{\n\t\t\t\tcapacity *\u003d 2;\n\t\t\t}\n\t\t\twhile ((capacity - position) \u003c size);\n\n\t\t\tIntBuffer newB \u003d allocateDirect(capacity);\n\t\t\tbuffer.flip();\n\t\t\tnewB.put(buffer);\n\t\t\tbuffer \u003d newB;\n\t\t}\n\t}\n\n\tIntBuffer getBuffer()\n\t{\n\t\treturn buffer;\n\t}\n\n\tstatic IntBuffer allocateDirect(int size)\n\t{\n\t\treturn ByteBuffer.allocateDirect(size * Integer.BYTES)\n\t\t\t.order(ByteOrder.nativeOrder())\n\t\t\t.asIntBuffer();\n\t}\n}\n","filePath":"src\\main\\java\\info\\sigterm\\plugins\\gpulegacy\\GpuIntBuffer.java"},{"fileName":"GpuPlugin.java","content":"/*\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage info.sigterm.plugins.gpulegacy;\n\nimport com.google.common.primitives.Ints;\nimport com.google.inject.Provides;\nimport java.awt.Canvas;\nimport java.awt.Dimension;\nimport java.awt.GraphicsConfiguration;\nimport java.awt.Image;\nimport java.awt.geom.AffineTransform;\nimport java.awt.image.BufferedImage;\nimport java.awt.image.DataBufferInt;\nimport java.nio.ByteBuffer;\nimport java.nio.ByteOrder;\nimport java.nio.FloatBuffer;\nimport java.nio.IntBuffer;\nimport java.nio.ShortBuffer;\nimport javax.annotation.Nonnull;\nimport javax.inject.Inject;\nimport javax.swing.SwingUtilities;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.BufferProvider;\nimport net.runelite.api.Client;\nimport net.runelite.api.Constants;\nimport net.runelite.api.GameState;\nimport net.runelite.api.IntProjection;\nimport net.runelite.api.Model;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Projection;\nimport net.runelite.api.Renderable;\nimport net.runelite.api.Scene;\nimport net.runelite.api.SceneTileModel;\nimport net.runelite.api.SceneTilePaint;\nimport net.runelite.api.Texture;\nimport net.runelite.api.TextureProvider;\nimport net.runelite.api.TileObject;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.hooks.DrawCallbacks;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.plugins.PluginInstantiationException;\nimport net.runelite.client.plugins.PluginManager;\nimport info.sigterm.plugins.gpulegacy.config.AntiAliasingMode;\nimport info.sigterm.plugins.gpulegacy.config.UIScalingMode;\nimport info.sigterm.plugins.gpulegacy.template.Template;\nimport net.runelite.client.ui.ClientUI;\nimport net.runelite.client.ui.DrawManager;\nimport net.runelite.client.util.OSType;\nimport net.runelite.rlawt.AWTContext;\nimport org.lwjgl.opencl.CL10;\nimport org.lwjgl.opencl.CL10GL;\nimport org.lwjgl.opencl.CL12;\nimport org.lwjgl.opengl.GL;\nimport org.lwjgl.opengl.GL43C;\nimport org.lwjgl.opengl.GLCapabilities;\nimport org.lwjgl.opengl.GLUtil;\nimport org.lwjgl.system.Callback;\nimport org.lwjgl.system.Configuration;\n\n@PluginDescriptor(\n\tname \u003d \"GPU (legacy)\",\n\tconfigName \u003d \"GpuLegacy\",\n\tdescription \u003d \"Utilizes the GPU\",\n\tenabledByDefault \u003d false,\n\ttags \u003d {\"fog\", \"draw distance\"},\n\tloadInSafeMode \u003d false,\n\tconflicts \u003d \"GPU\"\n)\n@Slf4j\npublic class GpuPlugin extends Plugin implements DrawCallbacks\n{\n\t// This is the maximum number of triangles the compute shaders support\n\tstatic final int MAX_TRIANGLE \u003d 6144;\n\tstatic final int SMALL_TRIANGLE_COUNT \u003d 512;\n\tprivate static final int FLAG_SCENE_BUFFER \u003d Integer.MIN_VALUE;\n\tstatic final int MAX_DISTANCE \u003d 184;\n\tstatic final int MAX_FOG_DEPTH \u003d 100;\n\tstatic final int SCENE_OFFSET \u003d (Constants.EXTENDED_SCENE_SIZE - Constants.SCENE_SIZE) / 2; // offset for sxy -\u003e msxy\n\tprivate static final int GROUND_MIN_Y \u003d 350; // how far below the ground models extend\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientUI clientUI;\n\n\t@Inject\n\tprivate OpenCLManager openCLManager;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate GpuPluginConfig config;\n\n\t@Inject\n\tprivate TextureManager textureManager;\n\n\t@Inject\n\tprivate SceneUploader sceneUploader;\n\n\t@Inject\n\tprivate DrawManager drawManager;\n\n\t@Inject\n\tprivate PluginManager pluginManager;\n\n\tenum ComputeMode\n\t{\n\t\tNONE,\n\t\tOPENGL,\n\t\tOPENCL\n\t}\n\n\tprivate ComputeMode computeMode \u003d ComputeMode.NONE;\n\n\tprivate Canvas canvas;\n\tprivate AWTContext awtContext;\n\tprivate Callback debugCallback;\n\n\tprivate GLCapabilities glCapabilities;\n\n\tstatic final String LINUX_VERSION_HEADER \u003d\n\t\t\"#version 420\\n\" +\n\t\t\t\"#extension GL_ARB_compute_shader : require\\n\" +\n\t\t\t\"#extension GL_ARB_shader_storage_buffer_object : require\\n\" +\n\t\t\t\"#extension GL_ARB_explicit_attrib_location : require\\n\";\n\tstatic final String WINDOWS_VERSION_HEADER \u003d \"#version 430\\n\";\n\n\tstatic final Shader PROGRAM \u003d new Shader()\n\t\t.add(GL43C.GL_VERTEX_SHADER, \"vert.glsl\")\n\t\t.add(GL43C.GL_GEOMETRY_SHADER, \"geom.glsl\")\n\t\t.add(GL43C.GL_FRAGMENT_SHADER, \"frag.glsl\");\n\n\tstatic final Shader COMPUTE_PROGRAM \u003d new Shader()\n\t\t.add(GL43C.GL_COMPUTE_SHADER, \"comp.glsl\");\n\n\tstatic final Shader SMALL_COMPUTE_PROGRAM \u003d new Shader()\n\t\t.add(GL43C.GL_COMPUTE_SHADER, \"comp.glsl\");\n\n\tstatic final Shader UNORDERED_COMPUTE_PROGRAM \u003d new Shader()\n\t\t.add(GL43C.GL_COMPUTE_SHADER, \"comp_unordered.glsl\");\n\n\tstatic final Shader UI_PROGRAM \u003d new Shader()\n\t\t.add(GL43C.GL_VERTEX_SHADER, \"vertui.glsl\")\n\t\t.add(GL43C.GL_FRAGMENT_SHADER, \"fragui.glsl\");\n\n\tprivate int glProgram;\n\tprivate int glComputeProgram;\n\tprivate int glSmallComputeProgram;\n\tprivate int glUnorderedComputeProgram;\n\tprivate int glUiProgram;\n\n\tprivate int vaoCompute;\n\tprivate int vaoTemp;\n\n\tprivate int interfaceTexture;\n\tprivate int interfacePbo;\n\n\tprivate int vaoUiHandle;\n\tprivate int vboUiHandle;\n\n\tprivate int fboScene;\n\tprivate int rboColorBuffer;\n\n\tprivate final GLBuffer sceneVertexBuffer \u003d new GLBuffer(\"scene vertex buffer\");\n\tprivate final GLBuffer sceneUvBuffer \u003d new GLBuffer(\"scene tex buffer\");\n\tprivate final GLBuffer tmpVertexBuffer \u003d new GLBuffer(\"tmp vertex buffer\");\n\tprivate final GLBuffer tmpUvBuffer \u003d new GLBuffer(\"tmp tex buffer\");\n\tprivate final GLBuffer tmpModelBufferLarge \u003d new GLBuffer(\"model buffer large\");\n\tprivate final GLBuffer tmpModelBufferSmall \u003d new GLBuffer(\"model buffer small\");\n\tprivate final GLBuffer tmpModelBufferUnordered \u003d new GLBuffer(\"model buffer unordered\");\n\tprivate final GLBuffer tmpOutBuffer \u003d new GLBuffer(\"out vertex buffer\");\n\tprivate final GLBuffer tmpOutUvBuffer \u003d new GLBuffer(\"out tex buffer\");\n\n\tprivate int textureArrayId;\n\tprivate int tileHeightTex;\n\n\tprivate final GLBuffer uniformBuffer \u003d new GLBuffer(\"uniform buffer\");\n\n\tprivate GpuIntBuffer vertexBuffer;\n\tprivate GpuFloatBuffer uvBuffer;\n\n\tprivate GpuIntBuffer modelBufferUnordered;\n\tprivate GpuIntBuffer modelBufferSmall;\n\tprivate GpuIntBuffer modelBuffer;\n\n\tprivate int unorderedModels;\n\n\t/**\n\t * number of models in small buffer\n\t */\n\tprivate int smallModels;\n\n\t/**\n\t * number of models in large buffer\n\t */\n\tprivate int largeModels;\n\n\t/**\n\t * offset in the target buffer for model\n\t */\n\tprivate int targetBufferOffset;\n\n\t/**\n\t * offset into the temporary scene vertex buffer\n\t */\n\tprivate int tempOffset;\n\n\t/**\n\t * offset into the temporary scene uv buffer\n\t */\n\tprivate int tempUvOffset;\n\n\tprivate int lastCanvasWidth;\n\tprivate int lastCanvasHeight;\n\tprivate int lastStretchedCanvasWidth;\n\tprivate int lastStretchedCanvasHeight;\n\tprivate AntiAliasingMode lastAntiAliasingMode;\n\tprivate int lastAnisotropicFilteringLevel \u003d -1;\n\n\tprivate double cameraX, cameraY, cameraZ;\n\tprivate double cameraYaw, cameraPitch;\n\n\tprivate int viewportOffsetX;\n\tprivate int viewportOffsetY;\n\tprivate int viewportWidth;\n\tprivate int viewportHeight;\n\n\t// Uniforms\n\tprivate int uniColorBlindMode;\n\tprivate int uniUiColorBlindMode;\n\tprivate int uniUseFog;\n\tprivate int uniFogColor;\n\tprivate int uniFogDepth;\n\tprivate int uniDrawDistance;\n\tprivate int uniExpandedMapLoadingChunks;\n\tprivate int uniProjectionMatrix;\n\tprivate int uniBrightness;\n\tprivate int uniTex;\n\tprivate int uniTexSamplingMode;\n\tprivate int uniTexSourceDimensions;\n\tprivate int uniTexTargetDimensions;\n\tprivate int uniUiAlphaOverlay;\n\tprivate int uniTextures;\n\tprivate int uniTextureAnimations;\n\tprivate int uniBlockSmall;\n\tprivate int uniBlockLarge;\n\tprivate int uniBlockMain;\n\tprivate int uniSmoothBanding;\n\tprivate int uniTextureLightMode;\n\tprivate int uniTick;\n\n\tprivate boolean lwjglInitted \u003d false;\n\n\tprivate int sceneId;\n\tprivate int nextSceneId;\n\tprivate GpuIntBuffer nextSceneVertexBuffer;\n\tprivate GpuFloatBuffer nextSceneTexBuffer;\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\tclientThread.invoke(() -\u003e\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tfboScene \u003d rboColorBuffer \u003d -1;\n\t\t\t\ttargetBufferOffset \u003d 0;\n\t\t\t\tunorderedModels \u003d smallModels \u003d largeModels \u003d 0;\n\n\t\t\t\tAWTContext.loadNatives();\n\n\t\t\t\tcanvas \u003d client.getCanvas();\n\n\t\t\t\tsynchronized (canvas.getTreeLock())\n\t\t\t\t{\n\t\t\t\t\tif (!canvas.isValid())\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tawtContext \u003d new AWTContext(canvas);\n\t\t\t\t\tawtContext.configurePixelFormat(0, 0, 0);\n\t\t\t\t}\n\n\t\t\t\tawtContext.createGLContext();\n\n\t\t\t\tcanvas.setIgnoreRepaint(true);\n\n\t\t\t\tcomputeMode \u003d config.useComputeShaders()\n\t\t\t\t\t? (OSType.getOSType() \u003d\u003d OSType.MacOS ? ComputeMode.OPENCL : ComputeMode.OPENGL)\n\t\t\t\t\t: ComputeMode.NONE;\n\n\t\t\t\t// lwjgl defaults to lwjgl- + user.name, but this breaks if the username would cause an invalid path\n\t\t\t\t// to be created.\n\t\t\t\tConfiguration.SHARED_LIBRARY_EXTRACT_DIRECTORY.set(\"lwjgl-rl\");\n\n\t\t\t\tglCapabilities \u003d GL.createCapabilities();\n\n\t\t\t\tlog.info(\"Using device: {}\", GL43C.glGetString(GL43C.GL_RENDERER));\n\t\t\t\tlog.info(\"Using driver: {}\", GL43C.glGetString(GL43C.GL_VERSION));\n\n\t\t\t\tif (!glCapabilities.OpenGL31)\n\t\t\t\t{\n\t\t\t\t\tthrow new RuntimeException(\"OpenGL 3.1 is required but not available\");\n\t\t\t\t}\n\n\t\t\t\tif (!glCapabilities.OpenGL43 \u0026\u0026 computeMode \u003d\u003d ComputeMode.OPENGL)\n\t\t\t\t{\n\t\t\t\t\tlog.info(\"disabling compute shaders because OpenGL 4.3 is not available\");\n\t\t\t\t\tcomputeMode \u003d ComputeMode.NONE;\n\t\t\t\t}\n\n\t\t\t\tif (computeMode \u003d\u003d ComputeMode.NONE)\n\t\t\t\t{\n\t\t\t\t\tsceneUploader.initSortingBuffers();\n\t\t\t\t}\n\n\t\t\t\tlwjglInitted \u003d true;\n\n\t\t\t\tcheckGLErrors();\n\t\t\t\tif (log.isDebugEnabled() \u0026\u0026 glCapabilities.glDebugMessageControl !\u003d 0)\n\t\t\t\t{\n\t\t\t\t\tdebugCallback \u003d GLUtil.setupDebugMessageCallback();\n\t\t\t\t\tif (debugCallback !\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\t//\tGLDebugEvent[ id 0x20071\n\t\t\t\t\t\t//\t\ttype Warning: generic\n\t\t\t\t\t\t//\t\tseverity Unknown (0x826b)\n\t\t\t\t\t\t//\t\tsource GL API\n\t\t\t\t\t\t//\t\tmsg Buffer detailed info: Buffer object 11 (bound to GL_ARRAY_BUFFER_ARB, and GL_SHADER_STORAGE_BUFFER (4), usage hint is GL_STREAM_DRAW) will use VIDEO memory as the source for buffer object operations.\n\t\t\t\t\t\tGL43C.glDebugMessageControl(GL43C.GL_DEBUG_SOURCE_API, GL43C.GL_DEBUG_TYPE_OTHER,\n\t\t\t\t\t\t\tGL43C.GL_DONT_CARE, 0x20071, false);\n\n\t\t\t\t\t\t//\tGLDebugMessageHandler: GLDebugEvent[ id 0x20052\n\t\t\t\t\t\t//\t\ttype Warning: implementation dependent performance\n\t\t\t\t\t\t//\t\tseverity Medium: Severe performance/deprecation/other warnings\n\t\t\t\t\t\t//\t\tsource GL API\n\t\t\t\t\t\t//\t\tmsg Pixel-path performance warning: Pixel transfer is synchronized with 3D rendering.\n\t\t\t\t\t\tGL43C.glDebugMessageControl(GL43C.GL_DEBUG_SOURCE_API, GL43C.GL_DEBUG_TYPE_PERFORMANCE,\n\t\t\t\t\t\t\tGL43C.GL_DONT_CARE, 0x20052, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvertexBuffer \u003d new GpuIntBuffer();\n\t\t\t\tuvBuffer \u003d new GpuFloatBuffer();\n\n\t\t\t\tmodelBufferUnordered \u003d new GpuIntBuffer();\n\t\t\t\tmodelBufferSmall \u003d new GpuIntBuffer();\n\t\t\t\tmodelBuffer \u003d new GpuIntBuffer();\n\n\t\t\t\tsetupSyncMode();\n\n\t\t\t\tinitBuffers();\n\t\t\t\tinitVao();\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tinitProgram();\n\t\t\t\t}\n\t\t\t\tcatch (ShaderException ex)\n\t\t\t\t{\n\t\t\t\t\tthrow new RuntimeException(ex);\n\t\t\t\t}\n\t\t\t\tinitInterfaceTexture();\n\t\t\t\tinitUniformBuffer();\n\n\t\t\t\tclient.setDrawCallbacks(this);\n\t\t\t\tclient.setGpuFlags(DrawCallbacks.GPU\n\t\t\t\t\t| (computeMode \u003d\u003d ComputeMode.NONE ? 0 : DrawCallbacks.HILLSKEW)\n\t\t\t\t\t| (config.removeVertexSnapping() ? DrawCallbacks.NO_VERTEX_SNAPPING : 0)\n\t\t\t\t);\n\t\t\t\tclient.setExpandedMapLoading(config.expandedMapLoadingChunks());\n\n\t\t\t\t// force rebuild of main buffer provider to enable alpha channel\n\t\t\t\tclient.resizeCanvas();\n\n\t\t\t\tlastCanvasWidth \u003d lastCanvasHeight \u003d -1;\n\t\t\t\tlastStretchedCanvasWidth \u003d lastStretchedCanvasHeight \u003d -1;\n\t\t\t\tlastAntiAliasingMode \u003d null;\n\n\t\t\t\ttextureArrayId \u003d -1;\n\n\t\t\t\tif (client.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t\t\t{\n\t\t\t\t\tScene scene \u003d client.getScene();\n\t\t\t\t\tloadScene(scene);\n\t\t\t\t\tswapScene(scene);\n\t\t\t\t}\n\n\t\t\t\tcheckGLErrors();\n\t\t\t}\n\t\t\tcatch (Throwable e)\n\t\t\t{\n\t\t\t\tlog.error(\"Error starting GPU plugin\", e);\n\n\t\t\t\tSwingUtilities.invokeLater(() -\u003e\n\t\t\t\t{\n\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t\t\tpluginManager.setPluginEnabled(this, false);\n\t\t\t\t\t\tpluginManager.stopPlugin(this);\n\t\t\t\t\t}\n\t\t\t\t\tcatch (PluginInstantiationException ex)\n\t\t\t\t\t{\n\t\t\t\t\t\tlog.error(\"error stopping plugin\", ex);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tshutDown();\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\tclientThread.invoke(() -\u003e\n\t\t{\n\t\t\tclient.setGpuFlags(0);\n\t\t\tclient.setDrawCallbacks(null);\n\t\t\tclient.setUnlockedFps(false);\n\t\t\tclient.setExpandedMapLoading(0);\n\n\t\t\tsceneUploader.releaseSortingBuffers();\n\n\t\t\tif (lwjglInitted)\n\t\t\t{\n\t\t\t\tif (textureArrayId !\u003d -1)\n\t\t\t\t{\n\t\t\t\t\ttextureManager.freeTextureArray(textureArrayId);\n\t\t\t\t\ttextureArrayId \u003d -1;\n\t\t\t\t}\n\n\t\t\t\tif (tileHeightTex !\u003d 0)\n\t\t\t\t{\n\t\t\t\t\tGL43C.glDeleteTextures(tileHeightTex);\n\t\t\t\t\ttileHeightTex \u003d 0;\n\t\t\t\t}\n\n\t\t\t\tdestroyGlBuffer(uniformBuffer);\n\n\t\t\t\tshutdownInterfaceTexture();\n\t\t\t\tshutdownProgram();\n\t\t\t\tshutdownVao();\n\t\t\t\tshutdownBuffers();\n\t\t\t\tshutdownFbo();\n\t\t\t}\n\n\t\t\t// this must shutdown after the clgl buffers are freed\n\t\t\topenCLManager.cleanup();\n\n\t\t\tif (awtContext !\u003d null)\n\t\t\t{\n\t\t\t\tawtContext.destroy();\n\t\t\t\tawtContext \u003d null;\n\t\t\t}\n\n\t\t\tif (debugCallback !\u003d null)\n\t\t\t{\n\t\t\t\tdebugCallback.free();\n\t\t\t\tdebugCallback \u003d null;\n\t\t\t}\n\n\t\t\tglCapabilities \u003d null;\n\n\t\t\tvertexBuffer \u003d null;\n\t\t\tuvBuffer \u003d null;\n\n\t\t\tmodelBufferSmall \u003d null;\n\t\t\tmodelBuffer \u003d null;\n\t\t\tmodelBufferUnordered \u003d null;\n\n\t\t\tlastAnisotropicFilteringLevel \u003d -1;\n\n\t\t\t// force main buffer provider rebuild to turn off alpha channel\n\t\t\tclient.resizeCanvas();\n\t\t});\n\t}\n\n\t@Provides\n\tGpuPluginConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(GpuPluginConfig.class);\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged configChanged)\n\t{\n\t\tif (configChanged.getGroup().equals(GpuPluginConfig.GROUP))\n\t\t{\n\t\t\tif (configChanged.getKey().equals(\"unlockFps\")\n\t\t\t\t|| configChanged.getKey().equals(\"vsyncMode\")\n\t\t\t\t|| configChanged.getKey().equals(\"fpsTarget\"))\n\t\t\t{\n\t\t\t\tlog.debug(\"Rebuilding sync mode\");\n\t\t\t\tclientThread.invokeLater(this::setupSyncMode);\n\t\t\t}\n\t\t\telse if (configChanged.getKey().equals(\"expandedMapLoadingChunks\"))\n\t\t\t{\n\t\t\t\tclientThread.invokeLater(() -\u003e\n\t\t\t\t{\n\t\t\t\t\tclient.setExpandedMapLoading(config.expandedMapLoadingChunks());\n\t\t\t\t\tif (client.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t\t\t\t{\n\t\t\t\t\t\tclient.setGameState(GameState.LOADING);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (configChanged.getKey().equals(\"removeVertexSnapping\"))\n\t\t\t{\n\t\t\t\tlog.debug(\"Toggle {}\", configChanged.getKey());\n\t\t\t\tclient.setGpuFlags(DrawCallbacks.GPU\n\t\t\t\t\t| (computeMode \u003d\u003d ComputeMode.NONE ? 0 : DrawCallbacks.HILLSKEW)\n\t\t\t\t\t| (config.removeVertexSnapping() ? DrawCallbacks.NO_VERTEX_SNAPPING : 0)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void setupSyncMode()\n\t{\n\t\tfinal boolean unlockFps \u003d config.unlockFps();\n\t\tclient.setUnlockedFps(unlockFps);\n\n\t\t// Without unlocked fps, the client manages sync on its 20ms timer\n\t\tGpuPluginConfig.SyncMode syncMode \u003d unlockFps\n\t\t\t? this.config.syncMode()\n\t\t\t: GpuPluginConfig.SyncMode.OFF;\n\n\t\tint swapInterval \u003d 0;\n\t\tswitch (syncMode)\n\t\t{\n\t\t\tcase ON:\n\t\t\t\tswapInterval \u003d 1;\n\t\t\t\tbreak;\n\t\t\tcase OFF:\n\t\t\t\tswapInterval \u003d 0;\n\t\t\t\tbreak;\n\t\t\tcase ADAPTIVE:\n\t\t\t\tswapInterval \u003d -1;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tint actualSwapInterval \u003d awtContext.setSwapInterval(swapInterval);\n\t\tif (actualSwapInterval !\u003d swapInterval)\n\t\t{\n\t\t\tlog.info(\"unsupported swap interval {}, got {}\", swapInterval, actualSwapInterval);\n\t\t}\n\n\t\tclient.setUnlockedFpsTarget(actualSwapInterval \u003d\u003d 0 ? config.fpsTarget() : 0);\n\t\tcheckGLErrors();\n\t}\n\n\tprivate Template createTemplate(int threadCount, int facesPerThread)\n\t{\n\t\tString versionHeader \u003d OSType.getOSType() \u003d\u003d OSType.Linux ? LINUX_VERSION_HEADER : WINDOWS_VERSION_HEADER;\n\t\tTemplate template \u003d new Template();\n\t\ttemplate.add(key -\u003e\n\t\t{\n\t\t\tif (\"version_header\".equals(key))\n\t\t\t{\n\t\t\t\treturn versionHeader;\n\t\t\t}\n\t\t\tif (\"thread_config\".equals(key))\n\t\t\t{\n\t\t\t\treturn \"#define THREAD_COUNT \" + threadCount + \"\\n\" +\n\t\t\t\t\t\"#define FACES_PER_THREAD \" + facesPerThread + \"\\n\";\n\t\t\t}\n\t\t\tif (\"texture_config\".equals(key))\n\t\t\t{\n\t\t\t\treturn \"#define TEXTURE_COUNT \" + TextureManager.TEXTURE_COUNT + \"\\n\";\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\t\ttemplate.addInclude(GpuPlugin.class);\n\t\treturn template;\n\t}\n\n\tprivate void initProgram() throws ShaderException\n\t{\n\t\tTemplate template \u003d createTemplate(-1, -1);\n\t\tglProgram \u003d PROGRAM.compile(template);\n\t\tglUiProgram \u003d UI_PROGRAM.compile(template);\n\n\t\tif (computeMode \u003d\u003d ComputeMode.OPENGL)\n\t\t{\n\t\t\tglComputeProgram \u003d COMPUTE_PROGRAM.compile(createTemplate(1024, 6));\n\t\t\tglSmallComputeProgram \u003d SMALL_COMPUTE_PROGRAM.compile(createTemplate(512, 1));\n\t\t\tglUnorderedComputeProgram \u003d UNORDERED_COMPUTE_PROGRAM.compile(template);\n\t\t}\n\t\telse if (computeMode \u003d\u003d ComputeMode.OPENCL)\n\t\t{\n\t\t\topenCLManager.init(awtContext);\n\t\t}\n\n\t\tinitUniforms();\n\t}\n\n\tprivate void initUniforms()\n\t{\n\t\tuniProjectionMatrix \u003d GL43C.glGetUniformLocation(glProgram, \"projectionMatrix\");\n\t\tuniBrightness \u003d GL43C.glGetUniformLocation(glProgram, \"brightness\");\n\t\tuniSmoothBanding \u003d GL43C.glGetUniformLocation(glProgram, \"smoothBanding\");\n\t\tuniUseFog \u003d GL43C.glGetUniformLocation(glProgram, \"useFog\");\n\t\tuniFogColor \u003d GL43C.glGetUniformLocation(glProgram, \"fogColor\");\n\t\tuniFogDepth \u003d GL43C.glGetUniformLocation(glProgram, \"fogDepth\");\n\t\tuniDrawDistance \u003d GL43C.glGetUniformLocation(glProgram, \"drawDistance\");\n\t\tuniExpandedMapLoadingChunks \u003d GL43C.glGetUniformLocation(glProgram, \"expandedMapLoadingChunks\");\n\t\tuniColorBlindMode \u003d GL43C.glGetUniformLocation(glProgram, \"colorBlindMode\");\n\t\tuniTextureLightMode \u003d GL43C.glGetUniformLocation(glProgram, \"textureLightMode\");\n\t\tuniTick \u003d GL43C.glGetUniformLocation(glProgram, \"tick\");\n\t\tuniBlockMain \u003d GL43C.glGetUniformBlockIndex(glProgram, \"uniforms\");\n\t\tuniTextures \u003d GL43C.glGetUniformLocation(glProgram, \"textures\");\n\t\tuniTextureAnimations \u003d GL43C.glGetUniformLocation(glProgram, \"textureAnimations\");\n\n\t\tuniTex \u003d GL43C.glGetUniformLocation(glUiProgram, \"tex\");\n\t\tuniTexSamplingMode \u003d GL43C.glGetUniformLocation(glUiProgram, \"samplingMode\");\n\t\tuniTexTargetDimensions \u003d GL43C.glGetUniformLocation(glUiProgram, \"targetDimensions\");\n\t\tuniTexSourceDimensions \u003d GL43C.glGetUniformLocation(glUiProgram, \"sourceDimensions\");\n\t\tuniUiColorBlindMode \u003d GL43C.glGetUniformLocation(glUiProgram, \"colorBlindMode\");\n\t\tuniUiAlphaOverlay \u003d GL43C.glGetUniformLocation(glUiProgram, \"alphaOverlay\");\n\n\t\tif (computeMode \u003d\u003d ComputeMode.OPENGL)\n\t\t{\n\t\t\tuniBlockSmall \u003d GL43C.glGetUniformBlockIndex(glSmallComputeProgram, \"uniforms\");\n\t\t\tuniBlockLarge \u003d GL43C.glGetUniformBlockIndex(glComputeProgram, \"uniforms\");\n\t\t}\n\t}\n\n\tprivate void shutdownProgram()\n\t{\n\t\tGL43C.glDeleteProgram(glProgram);\n\t\tglProgram \u003d -1;\n\n\t\tGL43C.glDeleteProgram(glComputeProgram);\n\t\tglComputeProgram \u003d -1;\n\n\t\tGL43C.glDeleteProgram(glSmallComputeProgram);\n\t\tglSmallComputeProgram \u003d -1;\n\n\t\tGL43C.glDeleteProgram(glUnorderedComputeProgram);\n\t\tglUnorderedComputeProgram \u003d -1;\n\n\t\tGL43C.glDeleteProgram(glUiProgram);\n\t\tglUiProgram \u003d -1;\n\t}\n\n\tprivate void initVao()\n\t{\n\t\t// Create compute VAO\n\t\tvaoCompute \u003d GL43C.glGenVertexArrays();\n\t\tGL43C.glBindVertexArray(vaoCompute);\n\n\t\tGL43C.glEnableVertexAttribArray(0);\n\t\tGL43C.glBindBuffer(GL43C.GL_ARRAY_BUFFER, tmpOutBuffer.glBufferId);\n\t\tGL43C.glVertexAttribPointer(0, 3, GL43C.GL_FLOAT, false, 16, 0);\n\n\t\tGL43C.glEnableVertexAttribArray(1);\n\t\tGL43C.glBindBuffer(GL43C.GL_ARRAY_BUFFER, tmpOutBuffer.glBufferId);\n\t\tGL43C.glVertexAttribIPointer(1, 1, GL43C.GL_INT, 16, 12);\n\n\t\tGL43C.glEnableVertexAttribArray(2);\n\t\tGL43C.glBindBuffer(GL43C.GL_ARRAY_BUFFER, tmpOutUvBuffer.glBufferId);\n\t\tGL43C.glVertexAttribPointer(2, 4, GL43C.GL_FLOAT, false, 0, 0);\n\n\t\t// Create temp VAO\n\t\tvaoTemp \u003d GL43C.glGenVertexArrays();\n\t\tGL43C.glBindVertexArray(vaoTemp);\n\n\t\tGL43C.glEnableVertexAttribArray(0);\n\t\tGL43C.glBindBuffer(GL43C.GL_ARRAY_BUFFER, tmpVertexBuffer.glBufferId);\n\t\tGL43C.glVertexAttribPointer(0, 3, GL43C.GL_FLOAT, false, 16, 0);\n\n\t\tGL43C.glEnableVertexAttribArray(1);\n\t\tGL43C.glBindBuffer(GL43C.GL_ARRAY_BUFFER, tmpVertexBuffer.glBufferId);\n\t\tGL43C.glVertexAttribIPointer(1, 1, GL43C.GL_INT, 16, 12);\n\n\t\tGL43C.glEnableVertexAttribArray(2);\n\t\tGL43C.glBindBuffer(GL43C.GL_ARRAY_BUFFER, tmpUvBuffer.glBufferId);\n\t\tGL43C.glVertexAttribPointer(2, 4, GL43C.GL_FLOAT, false, 0, 0);\n\n\t\t// Create UI VAO\n\t\tvaoUiHandle \u003d GL43C.glGenVertexArrays();\n\t\t// Create UI buffer\n\t\tvboUiHandle \u003d GL43C.glGenBuffers();\n\t\tGL43C.glBindVertexArray(vaoUiHandle);\n\n\t\tFloatBuffer vboUiBuf \u003d GpuFloatBuffer.allocateDirect(5 * 4);\n\t\tvboUiBuf.put(new float[]{\n\t\t\t// positions     // texture coords\n\t\t\t1f, 1f, 0.0f, 1.0f, 0f, // top right\n\t\t\t1f, -1f, 0.0f, 1.0f, 1f, // bottom right\n\t\t\t-1f, -1f, 0.0f, 0.0f, 1f, // bottom left\n\t\t\t-1f, 1f, 0.0f, 0.0f, 0f  // top left\n\t\t});\n\t\tvboUiBuf.rewind();\n\t\tGL43C.glBindBuffer(GL43C.GL_ARRAY_BUFFER, vboUiHandle);\n\t\tGL43C.glBufferData(GL43C.GL_ARRAY_BUFFER, vboUiBuf, GL43C.GL_STATIC_DRAW);\n\n\t\t// position attribute\n\t\tGL43C.glVertexAttribPointer(0, 3, GL43C.GL_FLOAT, false, 5 * Float.BYTES, 0);\n\t\tGL43C.glEnableVertexAttribArray(0);\n\n\t\t// texture coord attribute\n\t\tGL43C.glVertexAttribPointer(1, 2, GL43C.GL_FLOAT, false, 5 * Float.BYTES, 3 * Float.BYTES);\n\t\tGL43C.glEnableVertexAttribArray(1);\n\n\t\t// unbind VBO\n\t\tGL43C.glBindBuffer(GL43C.GL_ARRAY_BUFFER, 0);\n\t}\n\n\tprivate void shutdownVao()\n\t{\n\t\tGL43C.glDeleteVertexArrays(vaoCompute);\n\t\tvaoCompute \u003d -1;\n\n\t\tGL43C.glDeleteVertexArrays(vaoTemp);\n\t\tvaoTemp \u003d -1;\n\n\t\tGL43C.glDeleteBuffers(vboUiHandle);\n\t\tvboUiHandle \u003d -1;\n\n\t\tGL43C.glDeleteVertexArrays(vaoUiHandle);\n\t\tvaoUiHandle \u003d -1;\n\t}\n\n\tprivate void initBuffers()\n\t{\n\t\tinitGlBuffer(sceneVertexBuffer);\n\t\tinitGlBuffer(sceneUvBuffer);\n\t\tinitGlBuffer(tmpVertexBuffer);\n\t\tinitGlBuffer(tmpUvBuffer);\n\t\tinitGlBuffer(tmpModelBufferLarge);\n\t\tinitGlBuffer(tmpModelBufferSmall);\n\t\tinitGlBuffer(tmpModelBufferUnordered);\n\t\tinitGlBuffer(tmpOutBuffer);\n\t\tinitGlBuffer(tmpOutUvBuffer);\n\t}\n\n\tprivate void initGlBuffer(GLBuffer glBuffer)\n\t{\n\t\tglBuffer.glBufferId \u003d GL43C.glGenBuffers();\n\t}\n\n\tprivate void shutdownBuffers()\n\t{\n\t\tdestroyGlBuffer(sceneVertexBuffer);\n\t\tdestroyGlBuffer(sceneUvBuffer);\n\n\t\tdestroyGlBuffer(tmpVertexBuffer);\n\t\tdestroyGlBuffer(tmpUvBuffer);\n\t\tdestroyGlBuffer(tmpModelBufferLarge);\n\t\tdestroyGlBuffer(tmpModelBufferSmall);\n\t\tdestroyGlBuffer(tmpModelBufferUnordered);\n\t\tdestroyGlBuffer(tmpOutBuffer);\n\t\tdestroyGlBuffer(tmpOutUvBuffer);\n\t}\n\n\tprivate void destroyGlBuffer(GLBuffer glBuffer)\n\t{\n\t\tif (glBuffer.glBufferId !\u003d -1)\n\t\t{\n\t\t\tGL43C.glDeleteBuffers(glBuffer.glBufferId);\n\t\t\tglBuffer.glBufferId \u003d -1;\n\t\t}\n\t\tglBuffer.size \u003d -1;\n\n\t\tif (glBuffer.clBuffer !\u003d -1)\n\t\t{\n\t\t\tCL12.clReleaseMemObject(glBuffer.clBuffer);\n\t\t\tglBuffer.clBuffer \u003d -1;\n\t\t}\n\t}\n\n\tprivate void initInterfaceTexture()\n\t{\n\t\tinterfacePbo \u003d GL43C.glGenBuffers();\n\n\t\tinterfaceTexture \u003d GL43C.glGenTextures();\n\t\tGL43C.glBindTexture(GL43C.GL_TEXTURE_2D, interfaceTexture);\n\t\tGL43C.glTexParameteri(GL43C.GL_TEXTURE_2D, GL43C.GL_TEXTURE_WRAP_S, GL43C.GL_CLAMP_TO_EDGE);\n\t\tGL43C.glTexParameteri(GL43C.GL_TEXTURE_2D, GL43C.GL_TEXTURE_WRAP_T, GL43C.GL_CLAMP_TO_EDGE);\n\t\tGL43C.glTexParameteri(GL43C.GL_TEXTURE_2D, GL43C.GL_TEXTURE_MIN_FILTER, GL43C.GL_LINEAR);\n\t\tGL43C.glTexParameteri(GL43C.GL_TEXTURE_2D, GL43C.GL_TEXTURE_MAG_FILTER, GL43C.GL_LINEAR);\n\t\tGL43C.glBindTexture(GL43C.GL_TEXTURE_2D, 0);\n\t}\n\n\tprivate void shutdownInterfaceTexture()\n\t{\n\t\tGL43C.glDeleteBuffers(interfacePbo);\n\t\tGL43C.glDeleteTextures(interfaceTexture);\n\t\tinterfaceTexture \u003d -1;\n\t}\n\n\tprivate void initUniformBuffer()\n\t{\n\t\tinitGlBuffer(uniformBuffer);\n\n\t\tupdateBuffer(uniformBuffer, GL43C.GL_UNIFORM_BUFFER, 8 * Integer.BYTES, GL43C.GL_DYNAMIC_DRAW, CL12.CL_MEM_READ_ONLY);\n\t\tGL43C.glBindBuffer(GL43C.GL_UNIFORM_BUFFER, 0);\n\t}\n\n\tprivate void initFbo(int width, int height, int aaSamples)\n\t{\n\t\tfinal GraphicsConfiguration graphicsConfiguration \u003d clientUI.getGraphicsConfiguration();\n\t\tfinal AffineTransform transform \u003d graphicsConfiguration.getDefaultTransform();\n\n\t\twidth \u003d getScaledValue(transform.getScaleX(), width);\n\t\theight \u003d getScaledValue(transform.getScaleY(), height);\n\n\t\tif (aaSamples \u003e 0)\n\t\t{\n\t\t\tGL43C.glEnable(GL43C.GL_MULTISAMPLE);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tGL43C.glDisable(GL43C.GL_MULTISAMPLE);\n\t\t}\n\n\t\t// Create and bind the FBO\n\t\tfboScene \u003d GL43C.glGenFramebuffers();\n\t\tGL43C.glBindFramebuffer(GL43C.GL_FRAMEBUFFER, fboScene);\n\n\t\t// Create color render buffer\n\t\trboColorBuffer \u003d GL43C.glGenRenderbuffers();\n\t\tGL43C.glBindRenderbuffer(GL43C.GL_RENDERBUFFER, rboColorBuffer);\n\t\tGL43C.glRenderbufferStorageMultisample(GL43C.GL_RENDERBUFFER, aaSamples, GL43C.GL_RGBA, width, height);\n\t\tGL43C.glFramebufferRenderbuffer(GL43C.GL_FRAMEBUFFER, GL43C.GL_COLOR_ATTACHMENT0, GL43C.GL_RENDERBUFFER, rboColorBuffer);\n\n\t\tint status \u003d GL43C.glCheckFramebufferStatus(GL43C.GL_FRAMEBUFFER);\n\t\tif (status !\u003d GL43C.GL_FRAMEBUFFER_COMPLETE)\n\t\t{\n\t\t\tthrow new RuntimeException(\"FBO is incomplete. status: \" + status);\n\t\t}\n\n\t\t// Reset\n\t\tGL43C.glBindFramebuffer(GL43C.GL_FRAMEBUFFER, awtContext.getFramebuffer(false));\n\t\tGL43C.glBindRenderbuffer(GL43C.GL_RENDERBUFFER, 0);\n\t}\n\n\tprivate void shutdownFbo()\n\t{\n\t\tif (fboScene !\u003d -1)\n\t\t{\n\t\t\tGL43C.glDeleteFramebuffers(fboScene);\n\t\t\tfboScene \u003d -1;\n\t\t}\n\n\t\tif (rboColorBuffer !\u003d -1)\n\t\t{\n\t\t\tGL43C.glDeleteRenderbuffers(rboColorBuffer);\n\t\t\trboColorBuffer \u003d -1;\n\t\t}\n\t}\n\n\t@Override\n\tpublic void drawScene(double cameraX, double cameraY, double cameraZ, double cameraPitch, double cameraYaw, int plane)\n\t{\n\t\tthis.cameraX \u003d cameraX;\n\t\tthis.cameraY \u003d cameraY;\n\t\tthis.cameraZ \u003d cameraZ;\n\t\tthis.cameraPitch \u003d cameraPitch;\n\t\tthis.cameraYaw \u003d cameraYaw;\n\t\tviewportOffsetX \u003d client.getViewportXOffset();\n\t\tviewportOffsetY \u003d client.getViewportYOffset();\n\t\tviewportWidth \u003d client.getViewportWidth();\n\t\tviewportHeight \u003d client.getViewportHeight();\n\n\t\tfinal Scene scene \u003d client.getScene();\n\t\tscene.setDrawDistance(getDrawDistance());\n\n\t\t// Only reset the target buffer offset right before drawing the scene. That way if there are frames\n\t\t// after this that don\u0027t involve a scene draw, like during LOADING/HOPPING/CONNECTION_LOST, we can\n\t\t// still redraw the previous frame\u0027s scene to emulate the client behavior of not painting over the\n\t\t// viewport buffer.\n\t\ttargetBufferOffset \u003d 0;\n\n\t\t// UBO.\n\t\t// We can reuse the vertex buffer since it isn\u0027t used yet.\n\t\tvertexBuffer.clear();\n\t\tvertexBuffer.ensureCapacity(32);\n\t\tIntBuffer uniformBuf \u003d vertexBuffer.getBuffer();\n\t\tuniformBuf\n\t\t\t.put(Float.floatToIntBits((float) cameraYaw))\n\t\t\t.put(Float.floatToIntBits((float) cameraPitch))\n\t\t\t.put(client.getCenterX())\n\t\t\t.put(client.getCenterY())\n\t\t\t.put(client.getScale())\n\t\t\t.put(Float.floatToIntBits((float) cameraX))\n\t\t\t.put(Float.floatToIntBits((float) cameraY))\n\t\t\t.put(Float.floatToIntBits((float) cameraZ));\n\t\tuniformBuf.flip();\n\n\t\tupdateBuffer(uniformBuffer, GL43C.GL_UNIFORM_BUFFER, uniformBuf, GL43C.GL_DYNAMIC_DRAW, CL12.CL_MEM_READ_ONLY);\n\t\tGL43C.glBindBuffer(GL43C.GL_UNIFORM_BUFFER, 0);\n\n\t\tGL43C.glBindBufferBase(GL43C.GL_UNIFORM_BUFFER, 0, uniformBuffer.glBufferId);\n\t\tuniformBuf.clear();\n\n\t\tcheckGLErrors();\n\t}\n\n\t@Override\n\tpublic void postDrawScene()\n\t{\n\t\tif (computeMode \u003d\u003d ComputeMode.NONE)\n\t\t{\n\t\t\t// Upload buffers\n\t\t\tvertexBuffer.flip();\n\t\t\tuvBuffer.flip();\n\n\t\t\tIntBuffer vertexBuffer \u003d this.vertexBuffer.getBuffer();\n\t\t\tFloatBuffer uvBuffer \u003d this.uvBuffer.getBuffer();\n\n\t\t\tupdateBuffer(tmpVertexBuffer, GL43C.GL_ARRAY_BUFFER, vertexBuffer, GL43C.GL_DYNAMIC_DRAW, 0L);\n\t\t\tupdateBuffer(tmpUvBuffer, GL43C.GL_ARRAY_BUFFER, uvBuffer, GL43C.GL_DYNAMIC_DRAW, 0L);\n\n\t\t\tcheckGLErrors();\n\t\t\treturn;\n\t\t}\n\n\t\t// Upload buffers\n\t\tvertexBuffer.flip();\n\t\tuvBuffer.flip();\n\t\tmodelBuffer.flip();\n\t\tmodelBufferSmall.flip();\n\t\tmodelBufferUnordered.flip();\n\n\t\tIntBuffer vertexBuffer \u003d this.vertexBuffer.getBuffer();\n\t\tFloatBuffer uvBuffer \u003d this.uvBuffer.getBuffer();\n\t\tIntBuffer modelBuffer \u003d this.modelBuffer.getBuffer();\n\t\tIntBuffer modelBufferSmall \u003d this.modelBufferSmall.getBuffer();\n\t\tIntBuffer modelBufferUnordered \u003d this.modelBufferUnordered.getBuffer();\n\n\t\t// temp buffers\n\t\tupdateBuffer(tmpVertexBuffer, GL43C.GL_ARRAY_BUFFER, vertexBuffer, GL43C.GL_DYNAMIC_DRAW, CL12.CL_MEM_READ_ONLY);\n\t\tupdateBuffer(tmpUvBuffer, GL43C.GL_ARRAY_BUFFER, uvBuffer, GL43C.GL_DYNAMIC_DRAW, CL12.CL_MEM_READ_ONLY);\n\n\t\t// model buffers\n\t\tupdateBuffer(tmpModelBufferLarge, GL43C.GL_ARRAY_BUFFER, modelBuffer, GL43C.GL_DYNAMIC_DRAW, CL12.CL_MEM_READ_ONLY);\n\t\tupdateBuffer(tmpModelBufferSmall, GL43C.GL_ARRAY_BUFFER, modelBufferSmall, GL43C.GL_DYNAMIC_DRAW, CL12.CL_MEM_READ_ONLY);\n\t\tupdateBuffer(tmpModelBufferUnordered, GL43C.GL_ARRAY_BUFFER, modelBufferUnordered, GL43C.GL_DYNAMIC_DRAW, CL12.CL_MEM_READ_ONLY);\n\n\t\t// Output buffers\n\t\tupdateBuffer(tmpOutBuffer,\n\t\t\tGL43C.GL_ARRAY_BUFFER,\n\t\t\ttargetBufferOffset * 16, // each element is an ivec4, which is 16 bytes\n\t\t\tGL43C.GL_STREAM_DRAW,\n\t\t\tCL12.CL_MEM_WRITE_ONLY);\n\t\tupdateBuffer(tmpOutUvBuffer,\n\t\t\tGL43C.GL_ARRAY_BUFFER,\n\t\t\ttargetBufferOffset * 16, // each element is a vec4, which is 16 bytes\n\t\t\tGL43C.GL_STREAM_DRAW,\n\t\t\tCL12.CL_MEM_WRITE_ONLY);\n\n\t\tif (computeMode \u003d\u003d ComputeMode.OPENCL)\n\t\t{\n\t\t\t// The docs for clEnqueueAcquireGLObjects say all pending GL operations must be completed before calling\n\t\t\t// clEnqueueAcquireGLObjects, and recommends calling glFinish() as the only portable way to do that.\n\t\t\t// However no issues have been observed from not calling it, and so will leave disabled for now.\n\t\t\t// GL43C.glFinish();\n\n\t\t\topenCLManager.compute(\n\t\t\t\tunorderedModels, smallModels, largeModels,\n\t\t\t\tsceneVertexBuffer, sceneUvBuffer,\n\t\t\t\ttmpVertexBuffer, tmpUvBuffer,\n\t\t\t\ttmpModelBufferUnordered, tmpModelBufferSmall, tmpModelBufferLarge,\n\t\t\t\ttmpOutBuffer, tmpOutUvBuffer,\n\t\t\t\tuniformBuffer);\n\n\t\t\tcheckGLErrors();\n\t\t\treturn;\n\t\t}\n\n\t\t/*\n\t\t * Compute is split into three separate programs: \u0027unordered\u0027, \u0027small\u0027, and \u0027large\u0027\n\t\t * to save on GPU resources. Small will sort \u003c\u003d 512 faces, large will do \u003c\u003d 6144.\n\t\t */\n\n\t\t// Bind UBO to compute programs\n\t\tGL43C.glUniformBlockBinding(glSmallComputeProgram, uniBlockSmall, 0);\n\t\tGL43C.glUniformBlockBinding(glComputeProgram, uniBlockLarge, 0);\n\n\t\t// unordered\n\t\tGL43C.glUseProgram(glUnorderedComputeProgram);\n\n\t\tGL43C.glBindBufferBase(GL43C.GL_SHADER_STORAGE_BUFFER, 0, tmpModelBufferUnordered.glBufferId);\n\t\tGL43C.glBindBufferBase(GL43C.GL_SHADER_STORAGE_BUFFER, 1, sceneVertexBuffer.glBufferId);\n\t\tGL43C.glBindBufferBase(GL43C.GL_SHADER_STORAGE_BUFFER, 2, tmpVertexBuffer.glBufferId);\n\t\tGL43C.glBindBufferBase(GL43C.GL_SHADER_STORAGE_BUFFER, 3, tmpOutBuffer.glBufferId);\n\t\tGL43C.glBindBufferBase(GL43C.GL_SHADER_STORAGE_BUFFER, 4, tmpOutUvBuffer.glBufferId);\n\t\tGL43C.glBindBufferBase(GL43C.GL_SHADER_STORAGE_BUFFER, 5, sceneUvBuffer.glBufferId);\n\t\tGL43C.glBindBufferBase(GL43C.GL_SHADER_STORAGE_BUFFER, 6, tmpUvBuffer.glBufferId);\n\n\t\tGL43C.glDispatchCompute(unorderedModels, 1, 1);\n\n\t\t// small\n\t\tGL43C.glUseProgram(glSmallComputeProgram);\n\n\t\tGL43C.glBindBufferBase(GL43C.GL_SHADER_STORAGE_BUFFER, 0, tmpModelBufferSmall.glBufferId);\n\t\tGL43C.glBindBufferBase(GL43C.GL_SHADER_STORAGE_BUFFER, 1, sceneVertexBuffer.glBufferId);\n\t\tGL43C.glBindBufferBase(GL43C.GL_SHADER_STORAGE_BUFFER, 2, tmpVertexBuffer.glBufferId);\n\t\tGL43C.glBindBufferBase(GL43C.GL_SHADER_STORAGE_BUFFER, 3, tmpOutBuffer.glBufferId);\n\t\tGL43C.glBindBufferBase(GL43C.GL_SHADER_STORAGE_BUFFER, 4, tmpOutUvBuffer.glBufferId);\n\t\tGL43C.glBindBufferBase(GL43C.GL_SHADER_STORAGE_BUFFER, 5, sceneUvBuffer.glBufferId);\n\t\tGL43C.glBindBufferBase(GL43C.GL_SHADER_STORAGE_BUFFER, 6, tmpUvBuffer.glBufferId);\n\n\t\tGL43C.glDispatchCompute(smallModels, 1, 1);\n\n\t\t// large\n\t\tGL43C.glUseProgram(glComputeProgram);\n\n\t\tGL43C.glBindBufferBase(GL43C.GL_SHADER_STORAGE_BUFFER, 0, tmpModelBufferLarge.glBufferId);\n\t\tGL43C.glBindBufferBase(GL43C.GL_SHADER_STORAGE_BUFFER, 1, sceneVertexBuffer.glBufferId);\n\t\tGL43C.glBindBufferBase(GL43C.GL_SHADER_STORAGE_BUFFER, 2, tmpVertexBuffer.glBufferId);\n\t\tGL43C.glBindBufferBase(GL43C.GL_SHADER_STORAGE_BUFFER, 3, tmpOutBuffer.glBufferId);\n\t\tGL43C.glBindBufferBase(GL43C.GL_SHADER_STORAGE_BUFFER, 4, tmpOutUvBuffer.glBufferId);\n\t\tGL43C.glBindBufferBase(GL43C.GL_SHADER_STORAGE_BUFFER, 5, sceneUvBuffer.glBufferId);\n\t\tGL43C.glBindBufferBase(GL43C.GL_SHADER_STORAGE_BUFFER, 6, tmpUvBuffer.glBufferId);\n\n\t\tGL43C.glDispatchCompute(largeModels, 1, 1);\n\n\t\tcheckGLErrors();\n\t}\n\n\t@Override\n\tpublic void drawScenePaint(Scene scene, SceneTilePaint paint, int plane, int tileX, int tileY)\n\t{\n\t\tif (computeMode \u003d\u003d ComputeMode.NONE)\n\t\t{\n\t\t\ttargetBufferOffset +\u003d sceneUploader.upload(scene, paint,\n\t\t\t\tplane, tileX, tileY,\n\t\t\t\tvertexBuffer, uvBuffer,\n\t\t\t\ttileX \u003c\u003c Perspective.LOCAL_COORD_BITS,\n\t\t\t\ttileY \u003c\u003c Perspective.LOCAL_COORD_BITS,\n\t\t\t\ttrue\n\t\t\t);\n\t\t}\n\t\telse if (paint.getBufferLen() \u003e 0)\n\t\t{\n\t\t\tfinal int localX \u003d tileX \u003c\u003c Perspective.LOCAL_COORD_BITS;\n\t\t\tfinal int localY \u003d 0;\n\t\t\tfinal int localZ \u003d tileY \u003c\u003c Perspective.LOCAL_COORD_BITS;\n\n\t\t\tGpuIntBuffer b \u003d modelBufferUnordered;\n\t\t\t++unorderedModels;\n\n\t\t\tb.ensureCapacity(8);\n\t\t\tIntBuffer buffer \u003d b.getBuffer();\n\t\t\tbuffer.put(paint.getBufferOffset());\n\t\t\tbuffer.put(paint.getUvBufferOffset());\n\t\t\tbuffer.put(2);\n\t\t\tbuffer.put(targetBufferOffset);\n\t\t\tbuffer.put(FLAG_SCENE_BUFFER);\n\t\t\tbuffer.put(localX).put(localY).put(localZ);\n\n\t\t\ttargetBufferOffset +\u003d 2 * 3;\n\t\t}\n\t}\n\n\t@Override\n\tpublic void drawSceneTileModel(Scene scene, SceneTileModel model, int tileX, int tileY)\n\t{\n\t\tif (computeMode \u003d\u003d ComputeMode.NONE)\n\t\t{\n\t\t\ttargetBufferOffset +\u003d sceneUploader.upload(model,\n\t\t\t\t0, 0,\n\t\t\t\tvertexBuffer, uvBuffer,\n\t\t\t\ttrue);\n\t\t}\n\t\telse if (model.getBufferLen() \u003e 0)\n\t\t{\n\t\t\tfinal int localX \u003d tileX \u003c\u003c Perspective.LOCAL_COORD_BITS;\n\t\t\tfinal int localY \u003d 0;\n\t\t\tfinal int localZ \u003d tileY \u003c\u003c Perspective.LOCAL_COORD_BITS;\n\n\t\t\tGpuIntBuffer b \u003d modelBufferUnordered;\n\t\t\t++unorderedModels;\n\n\t\t\tb.ensureCapacity(8);\n\t\t\tIntBuffer buffer \u003d b.getBuffer();\n\t\t\tbuffer.put(model.getBufferOffset());\n\t\t\tbuffer.put(model.getUvBufferOffset());\n\t\t\tbuffer.put(model.getBufferLen() / 3);\n\t\t\tbuffer.put(targetBufferOffset);\n\t\t\tbuffer.put(FLAG_SCENE_BUFFER);\n\t\t\tbuffer.put(localX).put(localY).put(localZ);\n\n\t\t\ttargetBufferOffset +\u003d model.getBufferLen();\n\t\t}\n\t}\n\n\tprivate void prepareInterfaceTexture(int canvasWidth, int canvasHeight)\n\t{\n\t\tif (canvasWidth !\u003d lastCanvasWidth || canvasHeight !\u003d lastCanvasHeight)\n\t\t{\n\t\t\tlastCanvasWidth \u003d canvasWidth;\n\t\t\tlastCanvasHeight \u003d canvasHeight;\n\n\t\t\tGL43C.glBindBuffer(GL43C.GL_PIXEL_UNPACK_BUFFER, interfacePbo);\n\t\t\tGL43C.glBufferData(GL43C.GL_PIXEL_UNPACK_BUFFER, canvasWidth * canvasHeight * 4L, GL43C.GL_STREAM_DRAW);\n\t\t\tGL43C.glBindBuffer(GL43C.GL_PIXEL_UNPACK_BUFFER, 0);\n\n\t\t\tGL43C.glBindTexture(GL43C.GL_TEXTURE_2D, interfaceTexture);\n\t\t\tGL43C.glTexImage2D(GL43C.GL_TEXTURE_2D, 0, GL43C.GL_RGBA, canvasWidth, canvasHeight, 0, GL43C.GL_BGRA, GL43C.GL_UNSIGNED_BYTE, 0);\n\t\t\tGL43C.glBindTexture(GL43C.GL_TEXTURE_2D, 0);\n\t\t}\n\n\t\tfinal BufferProvider bufferProvider \u003d client.getBufferProvider();\n\t\tfinal int[] pixels \u003d bufferProvider.getPixels();\n\t\tfinal int width \u003d bufferProvider.getWidth();\n\t\tfinal int height \u003d bufferProvider.getHeight();\n\n\t\tGL43C.glBindBuffer(GL43C.GL_PIXEL_UNPACK_BUFFER, interfacePbo);\n\t\tByteBuffer interfaceBuf \u003d GL43C.glMapBuffer(GL43C.GL_PIXEL_UNPACK_BUFFER, GL43C.GL_WRITE_ONLY);\n\t\tif (interfaceBuf !\u003d null)\n\t\t{\n\t\t\tinterfaceBuf\n\t\t\t\t.asIntBuffer()\n\t\t\t\t.put(pixels, 0, width * height);\n\t\t\tGL43C.glUnmapBuffer(GL43C.GL_PIXEL_UNPACK_BUFFER);\n\t\t}\n\t\tGL43C.glBindTexture(GL43C.GL_TEXTURE_2D, interfaceTexture);\n\t\tGL43C.glTexSubImage2D(GL43C.GL_TEXTURE_2D, 0, 0, 0, width, height, GL43C.GL_BGRA, GL43C.GL_UNSIGNED_INT_8_8_8_8_REV, 0);\n\t\tGL43C.glBindBuffer(GL43C.GL_PIXEL_UNPACK_BUFFER, 0);\n\t\tGL43C.glBindTexture(GL43C.GL_TEXTURE_2D, 0);\n\t}\n\n\t@Override\n\tpublic void draw(int overlayColor)\n\t{\n\t\tfinal GameState gameState \u003d client.getGameState();\n\t\tif (gameState \u003d\u003d GameState.STARTING)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal int canvasHeight \u003d client.getCanvasHeight();\n\t\tfinal int canvasWidth \u003d client.getCanvasWidth();\n\n\t\tprepareInterfaceTexture(canvasWidth, canvasHeight);\n\n\t\t// Setup FBO and anti-aliasing\n\t\t{\n\t\t\tfinal AntiAliasingMode antiAliasingMode \u003d config.antiAliasingMode();\n\t\t\tfinal Dimension stretchedDimensions \u003d client.getStretchedDimensions();\n\n\t\t\tfinal int stretchedCanvasWidth \u003d client.isStretchedEnabled() ? stretchedDimensions.width : canvasWidth;\n\t\t\tfinal int stretchedCanvasHeight \u003d client.isStretchedEnabled() ? stretchedDimensions.height : canvasHeight;\n\n\t\t\t// Re-create fbo\n\t\t\tif (lastStretchedCanvasWidth !\u003d stretchedCanvasWidth\n\t\t\t\t|| lastStretchedCanvasHeight !\u003d stretchedCanvasHeight\n\t\t\t\t|| lastAntiAliasingMode !\u003d antiAliasingMode)\n\t\t\t{\n\t\t\t\tshutdownFbo();\n\n\t\t\t\t// Bind default FBO to check whether anti-aliasing is forced\n\t\t\t\tGL43C.glBindFramebuffer(GL43C.GL_FRAMEBUFFER, awtContext.getFramebuffer(false));\n\t\t\t\tfinal int forcedAASamples \u003d GL43C.glGetInteger(GL43C.GL_SAMPLES);\n\t\t\t\tfinal int maxSamples \u003d GL43C.glGetInteger(GL43C.GL_MAX_SAMPLES);\n\t\t\t\tfinal int samples \u003d forcedAASamples !\u003d 0 ? forcedAASamples :\n\t\t\t\t\tMath.min(antiAliasingMode.getSamples(), maxSamples);\n\n\t\t\t\tlog.debug(\"AA samples: {}, max samples: {}, forced samples: {}\", samples, maxSamples, forcedAASamples);\n\n\t\t\t\tinitFbo(stretchedCanvasWidth, stretchedCanvasHeight, samples);\n\n\t\t\t\tlastStretchedCanvasWidth \u003d stretchedCanvasWidth;\n\t\t\t\tlastStretchedCanvasHeight \u003d stretchedCanvasHeight;\n\t\t\t\tlastAntiAliasingMode \u003d antiAliasingMode;\n\t\t\t}\n\n\t\t\tGL43C.glBindFramebuffer(GL43C.GL_DRAW_FRAMEBUFFER, fboScene);\n\t\t}\n\n\t\t// Clear scene\n\t\tint sky \u003d client.getSkyboxColor();\n\t\tGL43C.glClearColor((sky \u003e\u003e 16 \u0026 0xFF) / 255f, (sky \u003e\u003e 8 \u0026 0xFF) / 255f, (sky \u0026 0xFF) / 255f, 1f);\n\t\tGL43C.glClear(GL43C.GL_COLOR_BUFFER_BIT);\n\n\t\t// Draw 3d scene\n\t\tif (gameState.getState() \u003e\u003d GameState.LOADING.getState())\n\t\t{\n\t\t\tfinal TextureProvider textureProvider \u003d client.getTextureProvider();\n\t\t\tif (textureArrayId \u003d\u003d -1)\n\t\t\t{\n\t\t\t\t// lazy init textures as they may not be loaded at plugin start.\n\t\t\t\t// this will return -1 and retry if not all textures are loaded yet, too.\n\t\t\t\ttextureArrayId \u003d textureManager.initTextureArray(textureProvider);\n\t\t\t\tif (textureArrayId \u003e -1)\n\t\t\t\t{\n\t\t\t\t\t// if texture upload is successful, compute and set texture animations\n\t\t\t\t\tfloat[] texAnims \u003d textureManager.computeTextureAnimations(textureProvider);\n\t\t\t\t\tGL43C.glUseProgram(glProgram);\n\t\t\t\t\tGL43C.glUniform2fv(uniTextureAnimations, texAnims);\n\t\t\t\t\tGL43C.glUseProgram(0);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tint renderWidthOff \u003d viewportOffsetX;\n\t\t\tint renderHeightOff \u003d viewportOffsetY;\n\t\t\tint renderCanvasHeight \u003d canvasHeight;\n\t\t\tint renderViewportHeight \u003d viewportHeight;\n\t\t\tint renderViewportWidth \u003d viewportWidth;\n\n\t\t\t// Setup anisotropic filtering\n\t\t\tfinal int anisotropicFilteringLevel \u003d config.anisotropicFilteringLevel();\n\n\t\t\tif (textureArrayId !\u003d -1 \u0026\u0026 lastAnisotropicFilteringLevel !\u003d anisotropicFilteringLevel)\n\t\t\t{\n\t\t\t\ttextureManager.setAnisotropicFilteringLevel(textureArrayId, anisotropicFilteringLevel);\n\t\t\t\tlastAnisotropicFilteringLevel \u003d anisotropicFilteringLevel;\n\t\t\t}\n\n\t\t\tif (client.isStretchedEnabled())\n\t\t\t{\n\t\t\t\tDimension dim \u003d client.getStretchedDimensions();\n\t\t\t\trenderCanvasHeight \u003d dim.height;\n\n\t\t\t\tdouble scaleFactorY \u003d dim.getHeight() / canvasHeight;\n\t\t\t\tdouble scaleFactorX \u003d dim.getWidth() / canvasWidth;\n\n\t\t\t\t// Pad the viewport a little because having ints for our viewport dimensions can introduce off-by-one errors.\n\t\t\t\tfinal int padding \u003d 1;\n\n\t\t\t\t// Ceil the sizes because even if the size is 599.1 we want to treat it as size 600 (i.e. render to the x\u003d599 pixel).\n\t\t\t\trenderViewportHeight \u003d (int) Math.ceil(scaleFactorY * (renderViewportHeight)) + padding * 2;\n\t\t\t\trenderViewportWidth \u003d (int) Math.ceil(scaleFactorX * (renderViewportWidth)) + padding * 2;\n\n\t\t\t\t// Floor the offsets because even if the offset is 4.9, we want to render to the x\u003d4 pixel anyway.\n\t\t\t\trenderHeightOff \u003d (int) Math.floor(scaleFactorY * (renderHeightOff)) - padding;\n\t\t\t\trenderWidthOff \u003d (int) Math.floor(scaleFactorX * (renderWidthOff)) - padding;\n\t\t\t}\n\n\t\t\tglDpiAwareViewport(renderWidthOff, renderCanvasHeight - renderViewportHeight - renderHeightOff, renderViewportWidth, renderViewportHeight);\n\n\t\t\tGL43C.glUseProgram(glProgram);\n\n\t\t\tfinal int drawDistance \u003d getDrawDistance();\n\t\t\tfinal int fogDepth \u003d config.fogDepth();\n\t\t\tGL43C.glUniform1i(uniUseFog, fogDepth \u003e 0 ? 1 : 0);\n\t\t\tGL43C.glUniform4f(uniFogColor, (sky \u003e\u003e 16 \u0026 0xFF) / 255f, (sky \u003e\u003e 8 \u0026 0xFF) / 255f, (sky \u0026 0xFF) / 255f, 1f);\n\t\t\tGL43C.glUniform1i(uniFogDepth, fogDepth);\n\t\t\tGL43C.glUniform1i(uniDrawDistance, drawDistance * Perspective.LOCAL_TILE_SIZE);\n\t\t\tGL43C.glUniform1i(uniExpandedMapLoadingChunks, client.getExpandedMapLoading());\n\n\t\t\t// Brightness happens to also be stored in the texture provider, so we use that\n\t\t\tGL43C.glUniform1f(uniBrightness, (float) textureProvider.getBrightness());\n\t\t\tGL43C.glUniform1f(uniSmoothBanding, config.smoothBanding() ? 0f : 1f);\n\t\t\tGL43C.glUniform1i(uniColorBlindMode, config.colorBlindMode().ordinal());\n\t\t\tGL43C.glUniform1f(uniTextureLightMode, config.brightTextures() ? 1f : 0f);\n\t\t\tif (gameState \u003d\u003d GameState.LOGGED_IN)\n\t\t\t{\n\t\t\t\t// avoid textures animating during loading\n\t\t\t\tGL43C.glUniform1i(uniTick, client.getGameCycle() \u0026 127);\n\t\t\t}\n\n\t\t\t// Calculate projection matrix\n\t\t\tfloat[] projectionMatrix \u003d Mat4.scale(client.getScale(), client.getScale(), 1);\n\t\t\tMat4.mul(projectionMatrix, Mat4.projection(viewportWidth, viewportHeight, 50));\n\t\t\tMat4.mul(projectionMatrix, Mat4.rotateX((float) cameraPitch));\n\t\t\tMat4.mul(projectionMatrix, Mat4.rotateY((float) cameraYaw));\n\t\t\tMat4.mul(projectionMatrix, Mat4.translate((float) -cameraX, (float) -cameraY, (float) -cameraZ));\n\t\t\tGL43C.glUniformMatrix4fv(uniProjectionMatrix, false, projectionMatrix);\n\n\t\t\t// Bind uniforms\n\t\t\tGL43C.glUniformBlockBinding(glProgram, uniBlockMain, 0);\n\t\t\tGL43C.glUniform1i(uniTextures, 1); // texture sampler array is bound to texture1\n\n\t\t\t// We just allow the GL to do face culling. Note this requires the priority renderer\n\t\t\t// to have logic to disregard culled faces in the priority depth testing.\n\t\t\tGL43C.glEnable(GL43C.GL_CULL_FACE);\n\n\t\t\t// Enable blending for alpha\n\t\t\tGL43C.glEnable(GL43C.GL_BLEND);\n\t\t\tGL43C.glBlendFuncSeparate(GL43C.GL_SRC_ALPHA, GL43C.GL_ONE_MINUS_SRC_ALPHA, GL43C.GL_ONE, GL43C.GL_ONE);\n\n\t\t\t// Draw buffers\n\t\t\tif (computeMode !\u003d ComputeMode.NONE)\n\t\t\t{\n\t\t\t\tif (computeMode \u003d\u003d ComputeMode.OPENGL)\n\t\t\t\t{\n\t\t\t\t\t// Before reading the SSBOs written to from postDrawScene() we must insert a barrier\n\t\t\t\t\tGL43C.glMemoryBarrier(GL43C.GL_SHADER_STORAGE_BARRIER_BIT);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t// Wait for the command queue to finish, so that we know the compute is done\n\t\t\t\t\topenCLManager.finish();\n\t\t\t\t}\n\n\t\t\t\t// Draw using the output buffer of the compute\n\t\t\t\tGL43C.glBindVertexArray(vaoCompute);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// Only use the temporary buffers, which will contain the full scene\n\t\t\t\tGL43C.glBindVertexArray(vaoTemp);\n\t\t\t}\n\n\t\t\tGL43C.glDrawArrays(GL43C.GL_TRIANGLES, 0, targetBufferOffset);\n\n\t\t\tGL43C.glDisable(GL43C.GL_BLEND);\n\t\t\tGL43C.glDisable(GL43C.GL_CULL_FACE);\n\n\t\t\tGL43C.glUseProgram(0);\n\t\t}\n\n\t\t// Blit FBO\n\t\t{\n\t\t\tint width \u003d lastStretchedCanvasWidth;\n\t\t\tint height \u003d lastStretchedCanvasHeight;\n\n\t\t\tfinal GraphicsConfiguration graphicsConfiguration \u003d clientUI.getGraphicsConfiguration();\n\t\t\tfinal AffineTransform transform \u003d graphicsConfiguration.getDefaultTransform();\n\n\t\t\twidth \u003d getScaledValue(transform.getScaleX(), width);\n\t\t\theight \u003d getScaledValue(transform.getScaleY(), height);\n\n\t\t\tGL43C.glBindFramebuffer(GL43C.GL_READ_FRAMEBUFFER, fboScene);\n\t\t\tGL43C.glBindFramebuffer(GL43C.GL_DRAW_FRAMEBUFFER, awtContext.getFramebuffer(false));\n\t\t\tGL43C.glBlitFramebuffer(0, 0, width, height, 0, 0, width, height,\n\t\t\t\tGL43C.GL_COLOR_BUFFER_BIT, GL43C.GL_NEAREST);\n\n\t\t\t// Reset\n\t\t\tGL43C.glBindFramebuffer(GL43C.GL_READ_FRAMEBUFFER, awtContext.getFramebuffer(false));\n\t\t}\n\n\t\tvertexBuffer.clear();\n\t\tuvBuffer.clear();\n\t\tmodelBuffer.clear();\n\t\tmodelBufferSmall.clear();\n\t\tmodelBufferUnordered.clear();\n\n\t\tsmallModels \u003d largeModels \u003d unorderedModels \u003d 0;\n\t\ttempOffset \u003d 0;\n\t\ttempUvOffset \u003d 0;\n\n\t\t// Texture on UI\n\t\tdrawUi(overlayColor, canvasHeight, canvasWidth);\n\n\t\ttry\n\t\t{\n\t\t\tawtContext.swapBuffers();\n\t\t}\n\t\tcatch (RuntimeException ex)\n\t\t{\n\t\t\t// this is always fatal\n\t\t\tif (!canvas.isValid())\n\t\t\t{\n\t\t\t\t// this might be AWT shutting down on VM shutdown, ignore it\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlog.error(\"error swapping buffers\", ex);\n\n\t\t\t// try to stop the plugin\n\t\t\tSwingUtilities.invokeLater(() -\u003e\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tpluginManager.stopPlugin(this);\n\t\t\t\t}\n\t\t\t\tcatch (PluginInstantiationException ex2)\n\t\t\t\t{\n\t\t\t\t\tlog.error(\"error stopping plugin\", ex2);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tdrawManager.processDrawComplete(this::screenshot);\n\n\t\tGL43C.glBindFramebuffer(GL43C.GL_FRAMEBUFFER, awtContext.getFramebuffer(false));\n\n\t\tcheckGLErrors();\n\t}\n\n\tprivate void drawUi(final int overlayColor, final int canvasHeight, final int canvasWidth)\n\t{\n\t\tGL43C.glEnable(GL43C.GL_BLEND);\n\t\tGL43C.glBlendFunc(GL43C.GL_ONE, GL43C.GL_ONE_MINUS_SRC_ALPHA);\n\t\tGL43C.glBindTexture(GL43C.GL_TEXTURE_2D, interfaceTexture);\n\n\t\t// Use the texture bound in the first pass\n\t\tfinal UIScalingMode uiScalingMode \u003d config.uiScalingMode();\n\t\tGL43C.glUseProgram(glUiProgram);\n\t\tGL43C.glUniform1i(uniTex, 0);\n\t\tGL43C.glUniform1i(uniTexSamplingMode, uiScalingMode.getMode());\n\t\tGL43C.glUniform2i(uniTexSourceDimensions, canvasWidth, canvasHeight);\n\t\tGL43C.glUniform1i(uniUiColorBlindMode, config.colorBlindMode().ordinal());\n\t\tGL43C.glUniform4f(uniUiAlphaOverlay,\n\t\t\t(overlayColor \u003e\u003e 16 \u0026 0xFF) / 255f,\n\t\t\t(overlayColor \u003e\u003e 8 \u0026 0xFF) / 255f,\n\t\t\t(overlayColor \u0026 0xFF) / 255f,\n\t\t\t(overlayColor \u003e\u003e\u003e 24) / 255f\n\t\t);\n\n\t\tif (client.isStretchedEnabled())\n\t\t{\n\t\t\tDimension dim \u003d client.getStretchedDimensions();\n\t\t\tglDpiAwareViewport(0, 0, dim.width, dim.height);\n\t\t\tGL43C.glUniform2i(uniTexTargetDimensions, dim.width, dim.height);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tglDpiAwareViewport(0, 0, canvasWidth, canvasHeight);\n\t\t\tGL43C.glUniform2i(uniTexTargetDimensions, canvasWidth, canvasHeight);\n\t\t}\n\n\t\t// Set the sampling function used when stretching the UI.\n\t\t// This is probably better done with sampler objects instead of texture parameters, but this is easier and likely more portable.\n\t\t// See https://www.khronos.org/opengl/wiki/Sampler_Object for details.\n\t\t// GL_NEAREST makes sampling for bicubic/xBR simpler, so it should be used whenever linear isn\u0027t\n\t\tfinal int function \u003d uiScalingMode \u003d\u003d UIScalingMode.LINEAR ? GL43C.GL_LINEAR : GL43C.GL_NEAREST;\n\t\tGL43C.glTexParameteri(GL43C.GL_TEXTURE_2D, GL43C.GL_TEXTURE_MIN_FILTER, function);\n\t\tGL43C.glTexParameteri(GL43C.GL_TEXTURE_2D, GL43C.GL_TEXTURE_MAG_FILTER, function);\n\n\t\t// Texture on UI\n\t\tGL43C.glBindVertexArray(vaoUiHandle);\n\t\tGL43C.glDrawArrays(GL43C.GL_TRIANGLE_FAN, 0, 4);\n\n\t\t// Reset\n\t\tGL43C.glBindTexture(GL43C.GL_TEXTURE_2D, 0);\n\t\tGL43C.glBindVertexArray(0);\n\t\tGL43C.glUseProgram(0);\n\t\tGL43C.glBlendFunc(GL43C.GL_SRC_ALPHA, GL43C.GL_ONE_MINUS_SRC_ALPHA);\n\t\tGL43C.glDisable(GL43C.GL_BLEND);\n\t}\n\n\t/**\n\t * Convert the front framebuffer to an Image\n\t *\n\t * @return\n\t */\n\tprivate Image screenshot()\n\t{\n\t\tint width \u003d client.getCanvasWidth();\n\t\tint height \u003d client.getCanvasHeight();\n\n\t\tif (client.isStretchedEnabled())\n\t\t{\n\t\t\tDimension dim \u003d client.getStretchedDimensions();\n\t\t\twidth \u003d dim.width;\n\t\t\theight \u003d dim.height;\n\t\t}\n\n\t\tfinal GraphicsConfiguration graphicsConfiguration \u003d clientUI.getGraphicsConfiguration();\n\t\tfinal AffineTransform t \u003d graphicsConfiguration.getDefaultTransform();\n\t\twidth \u003d getScaledValue(t.getScaleX(), width);\n\t\theight \u003d getScaledValue(t.getScaleY(), height);\n\n\t\tByteBuffer buffer \u003d ByteBuffer.allocateDirect(width * height * 4)\n\t\t\t.order(ByteOrder.nativeOrder());\n\n\t\tGL43C.glReadBuffer(awtContext.getBufferMode());\n\t\tGL43C.glReadPixels(0, 0, width, height, GL43C.GL_RGBA, GL43C.GL_UNSIGNED_BYTE, buffer);\n\n\t\tBufferedImage image \u003d new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);\n\t\tint[] pixels \u003d ((DataBufferInt) image.getRaster().getDataBuffer()).getData();\n\n\t\tfor (int y \u003d 0; y \u003c height; ++y)\n\t\t{\n\t\t\tfor (int x \u003d 0; x \u003c width; ++x)\n\t\t\t{\n\t\t\t\tint r \u003d buffer.get() \u0026 0xff;\n\t\t\t\tint g \u003d buffer.get() \u0026 0xff;\n\t\t\t\tint b \u003d buffer.get() \u0026 0xff;\n\t\t\t\tbuffer.get(); // alpha\n\n\t\t\t\tpixels[(height - y - 1) * width + x] \u003d (r \u003c\u003c 16) | (g \u003c\u003c 8) | b;\n\t\t\t}\n\t\t}\n\n\t\treturn image;\n\t}\n\n\t@Override\n\tpublic void animate(Texture texture, int diff)\n\t{\n\t\t// texture animation happens on gpu\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged)\n\t{\n\t\tif (gameStateChanged.getGameState() \u003d\u003d GameState.LOGIN_SCREEN)\n\t\t{\n\t\t\t// Avoid drawing the last frame\u0027s buffer during LOADING after LOGIN_SCREEN\n\t\t\ttargetBufferOffset \u003d 0;\n\t\t}\n\t\tif (gameStateChanged.getGameState() \u003d\u003d GameState.STARTING)\n\t\t{\n\t\t\tif (textureArrayId !\u003d -1)\n\t\t\t{\n\t\t\t\ttextureManager.freeTextureArray(textureArrayId);\n\t\t\t}\n\t\t\ttextureArrayId \u003d -1;\n\t\t\tlastAnisotropicFilteringLevel \u003d -1;\n\t\t}\n\t}\n\n\t@Override\n\tpublic void loadScene(Scene scene)\n\t{\n\t\tif (computeMode \u003d\u003d ComputeMode.NONE)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tGpuIntBuffer vertexBuffer \u003d new GpuIntBuffer();\n\t\tGpuFloatBuffer uvBuffer \u003d new GpuFloatBuffer();\n\n\t\tsceneUploader.upload(scene, vertexBuffer, uvBuffer);\n\n\t\tvertexBuffer.flip();\n\t\tuvBuffer.flip();\n\n\t\tnextSceneVertexBuffer \u003d vertexBuffer;\n\t\tnextSceneTexBuffer \u003d uvBuffer;\n\t\tnextSceneId \u003d sceneUploader.sceneId;\n\t}\n\n\tprivate void uploadTileHeights(Scene scene)\n\t{\n\t\tif (tileHeightTex !\u003d 0)\n\t\t{\n\t\t\tGL43C.glDeleteTextures(tileHeightTex);\n\t\t\ttileHeightTex \u003d 0;\n\t\t}\n\n\t\tfinal int TILEHEIGHT_BUFFER_SIZE \u003d Constants.MAX_Z * Constants.EXTENDED_SCENE_SIZE * Constants.EXTENDED_SCENE_SIZE * Short.BYTES;\n\t\tShortBuffer tileBuffer \u003d ByteBuffer\n\t\t\t.allocateDirect(TILEHEIGHT_BUFFER_SIZE)\n\t\t\t.order(ByteOrder.nativeOrder())\n\t\t\t.asShortBuffer();\n\n\t\tint[][][] tileHeights \u003d scene.getTileHeights();\n\t\tfor (int z \u003d 0; z \u003c Constants.MAX_Z; ++z)\n\t\t{\n\t\t\tfor (int y \u003d 0; y \u003c Constants.EXTENDED_SCENE_SIZE; ++y)\n\t\t\t{\n\t\t\t\tfor (int x \u003d 0; x \u003c Constants.EXTENDED_SCENE_SIZE; ++x)\n\t\t\t\t{\n\t\t\t\t\tint h \u003d tileHeights[z][x][y];\n\t\t\t\t\tassert (h \u0026 0b111) \u003d\u003d 0;\n\t\t\t\t\th \u003e\u003e\u003d 3;\n\t\t\t\t\ttileBuffer.put((short) h);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\ttileBuffer.flip();\n\n\t\ttileHeightTex \u003d GL43C.glGenTextures();\n\t\tGL43C.glBindTexture(GL43C.GL_TEXTURE_3D, tileHeightTex);\n\t\tGL43C.glTexParameteri(GL43C.GL_TEXTURE_3D, GL43C.GL_TEXTURE_MIN_FILTER, GL43C.GL_NEAREST);\n\t\tGL43C.glTexParameteri(GL43C.GL_TEXTURE_3D, GL43C.GL_TEXTURE_MAG_FILTER, GL43C.GL_NEAREST);\n\t\tGL43C.glTexParameteri(GL43C.GL_TEXTURE_3D, GL43C.GL_TEXTURE_WRAP_S, GL43C.GL_CLAMP_TO_EDGE);\n\t\tGL43C.glTexParameteri(GL43C.GL_TEXTURE_3D, GL43C.GL_TEXTURE_WRAP_T, GL43C.GL_CLAMP_TO_EDGE);\n\t\tGL43C.glTexImage3D(GL43C.GL_TEXTURE_3D, 0, GL43C.GL_R16I,\n\t\t\tConstants.EXTENDED_SCENE_SIZE, Constants.EXTENDED_SCENE_SIZE, Constants.MAX_Z,\n\t\t\t0, GL43C.GL_RED_INTEGER, GL43C.GL_SHORT, tileBuffer);\n\t\tGL43C.glBindTexture(GL43C.GL_TEXTURE_3D, 0);\n\n\t\t// bind to texture 2\n\t\tGL43C.glActiveTexture(GL43C.GL_TEXTURE2);\n\t\tGL43C.glBindTexture(GL43C.GL_TEXTURE_3D, tileHeightTex); // binding \u003d 2 in the shader\n\t\tGL43C.glActiveTexture(GL43C.GL_TEXTURE0);\n\t}\n\n\t@Override\n\tpublic void swapScene(Scene scene)\n\t{\n\t\tif (computeMode \u003d\u003d ComputeMode.NONE)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (computeMode \u003d\u003d ComputeMode.OPENCL)\n\t\t{\n\t\t\topenCLManager.uploadTileHeights(scene);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tassert computeMode \u003d\u003d ComputeMode.OPENGL;\n\t\t\tuploadTileHeights(scene);\n\t\t}\n\n\t\tsceneId \u003d nextSceneId;\n\t\tupdateBuffer(sceneVertexBuffer, GL43C.GL_ARRAY_BUFFER, nextSceneVertexBuffer.getBuffer(), GL43C.GL_STATIC_COPY, CL12.CL_MEM_READ_ONLY);\n\t\tupdateBuffer(sceneUvBuffer, GL43C.GL_ARRAY_BUFFER, nextSceneTexBuffer.getBuffer(), GL43C.GL_STATIC_COPY, CL12.CL_MEM_READ_ONLY);\n\n\t\tnextSceneVertexBuffer \u003d null;\n\t\tnextSceneTexBuffer \u003d null;\n\t\tnextSceneId \u003d -1;\n\n\t\tcheckGLErrors();\n\t}\n\n\t@Override\n\tpublic boolean tileInFrustum(Scene scene, float pitchSin, float pitchCos, float yawSin, float yawCos, int cameraX, int cameraY, int cameraZ, int plane, int msx, int msy)\n\t{\n\t\tint[][][] tileHeights \u003d scene.getTileHeights();\n\t\tint x \u003d ((msx - SCENE_OFFSET) \u003c\u003c Perspective.LOCAL_COORD_BITS) + 64 - cameraX;\n\t\tint z \u003d ((msy - SCENE_OFFSET) \u003c\u003c Perspective.LOCAL_COORD_BITS) + 64 - cameraZ;\n\t\tint y \u003d Math.max(\n\t\t\tMath.max(tileHeights[plane][msx][msy], tileHeights[plane][msx][msy + 1]),\n\t\t\tMath.max(tileHeights[plane][msx + 1][msy], tileHeights[plane][msx + 1][msy + 1])\n\t\t) + GROUND_MIN_Y - cameraY;\n\n\t\tint radius \u003d 96; // ~ 64 * sqrt(2)\n\n\t\tint zoom \u003d client.get3dZoom();\n\t\tint Rasterizer3D_clipMidX2 \u003d client.getRasterizer3D_clipMidX2();\n\t\tint Rasterizer3D_clipNegativeMidX \u003d client.getRasterizer3D_clipNegativeMidX();\n\t\tint Rasterizer3D_clipNegativeMidY \u003d client.getRasterizer3D_clipNegativeMidY();\n\n\t\tfloat var11 \u003d yawCos * z - yawSin * x;\n\t\tfloat var12 \u003d pitchSin * y + pitchCos * var11;\n\t\tfloat var13 \u003d pitchCos * radius;\n\t\tfloat depth \u003d var12 + var13;\n\t\tif (depth \u003e 50)\n\t\t{\n\t\t\tfloat rx \u003d z * yawSin + yawCos * x;\n\t\t\tfloat var16 \u003d (rx - radius) * zoom;\n\t\t\tfloat var17 \u003d (rx + radius) * zoom;\n\t\t\t// left \u0026\u0026 right\n\t\t\tif (var16 \u003c Rasterizer3D_clipMidX2 * depth \u0026\u0026 var17 \u003e Rasterizer3D_clipNegativeMidX * depth)\n\t\t\t{\n\t\t\t\tfloat ry \u003d pitchCos * y - var11 * pitchSin;\n\t\t\t\tfloat ybottom \u003d pitchSin * radius;\n\t\t\t\tfloat var20 \u003d (ry + ybottom) * zoom;\n\t\t\t\t// top\n\t\t\t\tif (var20 \u003e Rasterizer3D_clipNegativeMidY * depth)\n\t\t\t\t{\n\t\t\t\t\t// we don\u0027t test the bottom so we don\u0027t have to find the height of all the models on the tile\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Check is a model is visible and should be drawn.\n\t */\n\tprivate boolean isVisible(Model model, float pitchSin, float pitchCos, float yawSin, float yawCos, int x, int y, int z)\n\t{\n\t\tfinal int xzMag \u003d model.getXYZMag();\n\t\tfinal int bottomY \u003d model.getBottomY();\n\t\tfinal int zoom \u003d client.get3dZoom();\n\t\tfinal int modelHeight \u003d model.getModelHeight();\n\n\t\tint Rasterizer3D_clipMidX2 \u003d client.getRasterizer3D_clipMidX2(); // width / 2\n\t\tint Rasterizer3D_clipNegativeMidX \u003d client.getRasterizer3D_clipNegativeMidX(); // -width / 2\n\t\tint Rasterizer3D_clipNegativeMidY \u003d client.getRasterizer3D_clipNegativeMidY(); // -height / 2\n\t\tint Rasterizer3D_clipMidY2 \u003d client.getRasterizer3D_clipMidY2(); // height / 2\n\n\t\tfloat var11 \u003d yawCos * z - yawSin * x;\n\t\tfloat var12 \u003d pitchSin * y + pitchCos * var11;\n\t\tfloat var13 \u003d pitchCos * xzMag;\n\t\tfloat depth \u003d var12 + var13;\n\t\tif (depth \u003e 50)\n\t\t{\n\t\t\tfloat rx \u003d z * yawSin + yawCos * x;\n\t\t\tfloat var16 \u003d (rx - xzMag) * zoom;\n\t\t\tif (var16 / depth \u003c Rasterizer3D_clipMidX2)\n\t\t\t{\n\t\t\t\tfloat var17 \u003d (rx + xzMag) * zoom;\n\t\t\t\tif (var17 / depth \u003e Rasterizer3D_clipNegativeMidX)\n\t\t\t\t{\n\t\t\t\t\tfloat ry \u003d pitchCos * y - var11 * pitchSin;\n\t\t\t\t\tfloat yheight \u003d pitchSin * xzMag;\n\t\t\t\t\tfloat ybottom \u003d (pitchCos * bottomY) + yheight; // use bottom height instead of y pos for height\n\t\t\t\t\tfloat var20 \u003d (ry + ybottom) * zoom;\n\t\t\t\t\tif (var20 / depth \u003e Rasterizer3D_clipNegativeMidY)\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat ytop \u003d (pitchCos * modelHeight) + yheight;\n\t\t\t\t\t\tfloat var22 \u003d (ry - ytop) * zoom;\n\t\t\t\t\t\treturn var22 / depth \u003c Rasterizer3D_clipMidY2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Draw a renderable in the scene\n\t */\n\t@Override\n\tpublic void draw(Projection projection, Scene scene, Renderable renderable, int orientation, int x, int y, int z, long hash)\n\t{\n\t\tModel model, offsetModel;\n\t\tif (renderable instanceof Model)\n\t\t{\n\t\t\tmodel \u003d (Model) renderable;\n\t\t\toffsetModel \u003d model.getUnskewedModel();\n\t\t\tif (offsetModel \u003d\u003d null)\n\t\t\t{\n\t\t\t\toffsetModel \u003d model;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmodel \u003d renderable.getModel();\n\t\t\tif (model \u003d\u003d null)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\toffsetModel \u003d model;\n\t\t}\n\n\t\tif (computeMode \u003d\u003d ComputeMode.NONE)\n\t\t{\n\t\t\t// Apply height to renderable from the model\n\t\t\tif (model !\u003d renderable)\n\t\t\t{\n\t\t\t\trenderable.setModelHeight(model.getModelHeight());\n\t\t\t}\n\n\t\t\tmodel.calculateBoundsCylinder();\n\n\t\t\tif (projection instanceof IntProjection)\n\t\t\t{\n\t\t\t\tIntProjection p \u003d (IntProjection) projection;\n\t\t\t\tif (!isVisible(model, p.getPitchSin(), p.getPitchCos(), p.getYawSin(), p.getYawCos(), x - p.getCameraX(), y - p.getCameraY(), z - p.getCameraZ()))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tclient.checkClickbox(projection, model, orientation, x, y, z, hash);\n\n\t\t\ttargetBufferOffset +\u003d sceneUploader.pushSortedModel(\n\t\t\t\tprojection,\n\t\t\t\tmodel, orientation,\n\t\t\t\tx, y, z,\n\t\t\t\tvertexBuffer, uvBuffer);\n\t\t}\n\t\t// Model may be in the scene buffer\n\t\telse if (offsetModel.getSceneId() \u003d\u003d sceneId)\n\t\t{\n\t\t\tassert model \u003d\u003d renderable;\n\n\t\t\tmodel.calculateBoundsCylinder();\n\n\t\t\tif (projection instanceof IntProjection)\n\t\t\t{\n\t\t\t\tIntProjection p \u003d (IntProjection) projection;\n\t\t\t\tif (!isVisible(model, p.getPitchSin(), p.getPitchCos(), p.getYawSin(), p.getYawCos(), x - p.getCameraX(), y - p.getCameraY(), z - p.getCameraZ()))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tclient.checkClickbox(projection, model, orientation, x, y, z, hash);\n\n\t\t\tint tc \u003d Math.min(MAX_TRIANGLE, offsetModel.getFaceCount());\n\t\t\tint uvOffset \u003d offsetModel.getUvBufferOffset();\n\t\t\tint plane \u003d (int) ((hash \u003e\u003e TileObject.HASH_PLANE_SHIFT) \u0026 3);\n\t\t\tboolean hillskew \u003d offsetModel !\u003d model;\n\n\t\t\tGpuIntBuffer b \u003d bufferForTriangles(tc);\n\n\t\t\tb.ensureCapacity(8);\n\t\t\tIntBuffer buffer \u003d b.getBuffer();\n\t\t\tbuffer.put(offsetModel.getBufferOffset());\n\t\t\tbuffer.put(uvOffset);\n\t\t\tbuffer.put(tc);\n\t\t\tbuffer.put(targetBufferOffset);\n\t\t\tbuffer.put(FLAG_SCENE_BUFFER | (hillskew ? (1 \u003c\u003c 26) : 0) | (plane \u003c\u003c 24) | orientation);\n\t\t\tbuffer.put(x).put(y).put(z);\n\n\t\t\ttargetBufferOffset +\u003d tc * 3;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Temporary model (animated or otherwise not a static Model on the scene)\n\n\t\t\t// Apply height to renderable from the model\n\t\t\tif (model !\u003d renderable)\n\t\t\t{\n\t\t\t\trenderable.setModelHeight(model.getModelHeight());\n\t\t\t}\n\n\t\t\tmodel.calculateBoundsCylinder();\n\n\t\t\tif (projection instanceof IntProjection)\n\t\t\t{\n\t\t\t\tIntProjection p \u003d (IntProjection) projection;\n\t\t\t\tif (!isVisible(model, p.getPitchSin(), p.getPitchCos(), p.getYawSin(), p.getYawCos(), x - p.getCameraX(), y - p.getCameraY(), z - p.getCameraZ()))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tclient.checkClickbox(projection, model, orientation, x, y, z, hash);\n\n\t\t\tboolean hasUv \u003d model.getFaceTextures() !\u003d null;\n\n\t\t\tint len \u003d sceneUploader.pushModel(model, vertexBuffer, uvBuffer);\n\n\t\t\tGpuIntBuffer b \u003d bufferForTriangles(len / 3);\n\n\t\t\tb.ensureCapacity(8);\n\t\t\tIntBuffer buffer \u003d b.getBuffer();\n\t\t\tbuffer.put(tempOffset);\n\t\t\tbuffer.put(hasUv ? tempUvOffset : -1);\n\t\t\tbuffer.put(len / 3);\n\t\t\tbuffer.put(targetBufferOffset);\n\t\t\tbuffer.put(orientation);\n\t\t\tbuffer.put(x).put(y).put(z);\n\n\t\t\ttempOffset +\u003d len;\n\t\t\tif (hasUv)\n\t\t\t{\n\t\t\t\ttempUvOffset +\u003d len;\n\t\t\t}\n\n\t\t\ttargetBufferOffset +\u003d len;\n\t\t}\n\t}\n\n\t/**\n\t * returns the correct buffer based on triangle count and updates model count\n\t *\n\t * @param triangles\n\t * @return\n\t */\n\tprivate GpuIntBuffer bufferForTriangles(int triangles)\n\t{\n\t\tif (triangles \u003c\u003d SMALL_TRIANGLE_COUNT)\n\t\t{\n\t\t\t++smallModels;\n\t\t\treturn modelBufferSmall;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t++largeModels;\n\t\t\treturn modelBuffer;\n\t\t}\n\t}\n\n\tprivate int getScaledValue(final double scale, final int value)\n\t{\n\t\treturn (int) (value * scale);\n\t}\n\n\tprivate void glDpiAwareViewport(final int x, final int y, final int width, final int height)\n\t{\n\t\tfinal GraphicsConfiguration graphicsConfiguration \u003d clientUI.getGraphicsConfiguration();\n\t\tfinal AffineTransform t \u003d graphicsConfiguration.getDefaultTransform();\n\t\tGL43C.glViewport(\n\t\t\tgetScaledValue(t.getScaleX(), x),\n\t\t\tgetScaledValue(t.getScaleY(), y),\n\t\t\tgetScaledValue(t.getScaleX(), width),\n\t\t\tgetScaledValue(t.getScaleY(), height));\n\t}\n\n\tprivate int getDrawDistance()\n\t{\n\t\treturn Ints.constrainToRange(config.drawDistance(), 0, MAX_DISTANCE);\n\t}\n\n\tprivate void updateBuffer(@Nonnull GLBuffer glBuffer, int target, @Nonnull IntBuffer data, int usage, long clFlags)\n\t{\n\t\tint size \u003d data.remaining() \u003c\u003c 2;\n\t\tupdateBuffer(glBuffer, target, size, usage, clFlags);\n\t\tGL43C.glBufferSubData(target, 0, data);\n\t}\n\n\tprivate void updateBuffer(@Nonnull GLBuffer glBuffer, int target, @Nonnull FloatBuffer data, int usage, long clFlags)\n\t{\n\t\tint size \u003d data.remaining() \u003c\u003c 2;\n\t\tupdateBuffer(glBuffer, target, size, usage, clFlags);\n\t\tGL43C.glBufferSubData(target, 0, data);\n\t}\n\n\tprivate void updateBuffer(@Nonnull GLBuffer glBuffer, int target, int size, int usage, long clFlags)\n\t{\n\t\tGL43C.glBindBuffer(target, glBuffer.glBufferId);\n\t\tif (glCapabilities.glInvalidateBufferData !\u003d 0L)\n\t\t{\n\t\t\t// https://www.khronos.org/opengl/wiki/Buffer_Object_Streaming suggests buffer re-specification is useful\n\t\t\t// to avoid implicit synching. We always need to trash the whole buffer anyway so this can\u0027t hurt.\n\t\t\tGL43C.glInvalidateBufferData(glBuffer.glBufferId);\n\t\t}\n\t\tif (size \u003e glBuffer.size)\n\t\t{\n\t\t\tint newSize \u003d Math.max(1024, nextPowerOfTwo(size));\n\t\t\tlog.trace(\"Buffer resize: {} {} -\u003e {}\", glBuffer.name, glBuffer.size, newSize);\n\n\t\t\tglBuffer.size \u003d newSize;\n\t\t\tGL43C.glBufferData(target, newSize, usage);\n\t\t\trecreateCLBuffer(glBuffer, clFlags);\n\t\t}\n\t}\n\n\tprivate static int nextPowerOfTwo(int v)\n\t{\n\t\tv--;\n\t\tv |\u003d v \u003e\u003e 1;\n\t\tv |\u003d v \u003e\u003e 2;\n\t\tv |\u003d v \u003e\u003e 4;\n\t\tv |\u003d v \u003e\u003e 8;\n\t\tv |\u003d v \u003e\u003e 16;\n\t\tv++;\n\t\treturn v;\n\t}\n\n\tprivate void recreateCLBuffer(GLBuffer glBuffer, long clFlags)\n\t{\n\t\tif (computeMode \u003d\u003d ComputeMode.OPENCL)\n\t\t{\n\t\t\tif (glBuffer.clBuffer !\u003d -1)\n\t\t\t{\n\t\t\t\tCL10.clReleaseMemObject(glBuffer.clBuffer);\n\t\t\t}\n\t\t\tif (glBuffer.size \u003d\u003d 0)\n\t\t\t{\n\t\t\t\tglBuffer.clBuffer \u003d -1;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tglBuffer.clBuffer \u003d CL10GL.clCreateFromGLBuffer(openCLManager.context, clFlags, glBuffer.glBufferId, (int[]) null);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void checkGLErrors()\n\t{\n\t\tif (!log.isDebugEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfor (; ; )\n\t\t{\n\t\t\tint err \u003d GL43C.glGetError();\n\t\t\tif (err \u003d\u003d GL43C.GL_NO_ERROR)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tString errStr;\n\t\t\tswitch (err)\n\t\t\t{\n\t\t\t\tcase GL43C.GL_INVALID_ENUM:\n\t\t\t\t\terrStr \u003d \"INVALID_ENUM\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase GL43C.GL_INVALID_VALUE:\n\t\t\t\t\terrStr \u003d \"INVALID_VALUE\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase GL43C.GL_INVALID_OPERATION:\n\t\t\t\t\terrStr \u003d \"INVALID_OPERATION\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase GL43C.GL_INVALID_FRAMEBUFFER_OPERATION:\n\t\t\t\t\terrStr \u003d \"INVALID_FRAMEBUFFER_OPERATION\";\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\terrStr \u003d \"\" + err;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tlog.debug(\"glGetError:\", new Exception(errStr));\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\info\\sigterm\\plugins\\gpulegacy\\GpuPlugin.java"},{"fileName":"GpuPluginConfig.java","content":"/*\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage info.sigterm.plugins.gpulegacy;\n\nimport info.sigterm.plugins.gpulegacy.config.ColorBlindMode;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.Range;\nimport info.sigterm.plugins.gpulegacy.config.AntiAliasingMode;\nimport info.sigterm.plugins.gpulegacy.config.UIScalingMode;\n\n@ConfigGroup(GpuPluginConfig.GROUP)\npublic interface GpuPluginConfig extends Config\n{\n\tString GROUP \u003d \"gpu\";\n\n\t@Range(\n\t\tmax \u003d GpuPlugin.MAX_DISTANCE\n\t)\n\t@ConfigItem(\n\t\tkeyName \u003d \"drawDistance\",\n\t\tname \u003d \"Draw distance\",\n\t\tdescription \u003d \"Draw distance.\",\n\t\tposition \u003d 1\n\t)\n\tdefault int drawDistance()\n\t{\n\t\treturn 50;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"hideUnrelatedMaps\",\n\t\tname \u003d \"Hide unrelated maps\",\n\t\tdescription \u003d \"Hide unrelated map areas you shouldn\u0027t see.\",\n\t\tposition \u003d 2\n\t)\n\tdefault boolean hideUnrelatedMaps()\n\t{\n\t\treturn true;\n\t}\n\n\t@Range(\n\t\tmax \u003d 5\n\t)\n\t@ConfigItem(\n\t\tkeyName \u003d \"expandedMapLoadingChunks\",\n\t\tname \u003d \"Extended map loading\",\n\t\tdescription \u003d \"Extra map area to load, in 8 tile chunks.\",\n\t\tposition \u003d 1\n\t)\n\tdefault int expandedMapLoadingChunks()\n\t{\n\t\treturn 3;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"smoothBanding\",\n\t\tname \u003d \"Remove color banding\",\n\t\tdescription \u003d \"Smooths out the color banding that is present in the CPU renderer.\",\n\t\tposition \u003d 2\n\t)\n\tdefault boolean smoothBanding()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"antiAliasingMode\",\n\t\tname \u003d \"Anti aliasing\",\n\t\tdescription \u003d \"Configures the anti-aliasing mode.\",\n\t\tposition \u003d 3\n\t)\n\tdefault AntiAliasingMode antiAliasingMode()\n\t{\n\t\treturn AntiAliasingMode.MSAA_2;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"uiScalingMode\",\n\t\tname \u003d \"UI scaling mode\",\n\t\tdescription \u003d \"Sampling function to use for the UI in stretched mode.\",\n\t\tposition \u003d 4\n\t)\n\tdefault UIScalingMode uiScalingMode()\n\t{\n\t\treturn UIScalingMode.LINEAR;\n\t}\n\n\t@Range(\n\t\tmax \u003d GpuPlugin.MAX_FOG_DEPTH\n\t)\n\t@ConfigItem(\n\t\tkeyName \u003d \"fogDepth\",\n\t\tname \u003d \"Fog depth\",\n\t\tdescription \u003d \"Distance from the scene edge the fog starts.\",\n\t\tposition \u003d 5\n\t)\n\tdefault int fogDepth()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"useComputeShaders\",\n\t\tname \u003d \"Compute shaders\",\n\t\tdescription \u003d \"Offloads face sorting to GPU. Requires plugin restart.\",\n\t\twarning \u003d \"This feature requires OpenGL 4.3 to use. Please check that your GPU supports this.\\nRestart the plugin for changes to take effect.\",\n\t\tposition \u003d 6\n\t)\n\tdefault boolean useComputeShaders()\n\t{\n\t\treturn true;\n\t}\n\n\t@Range(\n\t\tmin \u003d 0,\n\t\tmax \u003d 16\n\t)\n\t@ConfigItem(\n\t\tkeyName \u003d \"anisotropicFilteringLevel\",\n\t\tname \u003d \"Anisotropic filtering\",\n\t\tdescription \u003d \"Configures the anisotropic filtering level.\",\n\t\tposition \u003d 7\n\t)\n\tdefault int anisotropicFilteringLevel()\n\t{\n\t\treturn 1;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"colorBlindMode\",\n\t\tname \u003d \"Colorblindness correction\",\n\t\tdescription \u003d \"Adjusts colors to account for colorblindness.\",\n\t\tposition \u003d 8\n\t)\n\tdefault ColorBlindMode colorBlindMode()\n\t{\n\t\treturn ColorBlindMode.NONE;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"brightTextures\",\n\t\tname \u003d \"Bright textures\",\n\t\tdescription \u003d \"Use old texture lighting method which results in brighter game textures.\",\n\t\tposition \u003d 9\n\t)\n\tdefault boolean brightTextures()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"unlockFps\",\n\t\tname \u003d \"Unlock FPS\",\n\t\tdescription \u003d \"Removes the 50 FPS cap for camera movement.\",\n\t\tposition \u003d 10\n\t)\n\tdefault boolean unlockFps()\n\t{\n\t\treturn true;\n\t}\n\n\tenum SyncMode\n\t{\n\t\tOFF,\n\t\tON,\n\t\tADAPTIVE\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"vsyncMode\",\n\t\tname \u003d \"Vsync mode\",\n\t\tdescription \u003d \"Method to synchronize frame rate with refresh rate.\",\n\t\tposition \u003d 11\n\t)\n\tdefault SyncMode syncMode()\n\t{\n\t\treturn SyncMode.OFF;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"fpsTarget\",\n\t\tname \u003d \"FPS target\",\n\t\tdescription \u003d \"Target FPS when \u0027Unlock FPS\u0027 is enabled and \u0027Vsync mode\u0027 is off.\",\n\t\tposition \u003d 12\n\t)\n\t@Range(\n\t\tmin \u003d 1,\n\t\tmax \u003d 999\n\t)\n\tdefault int fpsTarget()\n\t{\n\t\treturn 60;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"removeVertexSnapping\",\n\t\tname \u003d \"Remove vertex snapping\",\n\t\tdescription \u003d \"Removes vertex snapping from most animations.\",\n\t\tposition \u003d 13\n\t)\n\tdefault boolean removeVertexSnapping()\n\t{\n\t\treturn true;\n\t}\n}\n","filePath":"src\\main\\java\\info\\sigterm\\plugins\\gpulegacy\\GpuPluginConfig.java"},{"fileName":"Mat4.java","content":"/*\n * Copyright (c) 2022 Abex\n * Copyright 2010 JogAmp Community.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage info.sigterm.plugins.gpulegacy;\n\npublic class Mat4\n{\n\tprivate Mat4()\n\t{\n\t}\n\n\tpublic static float[] identity()\n\t{\n\t\treturn new float[]\n\t\t\t{\n\t\t\t\t1, 0, 0, 0,\n\t\t\t\t0, 1, 0, 0,\n\t\t\t\t0, 0, 1, 0,\n\t\t\t\t0, 0, 0, 1,\n\t\t\t};\n\t}\n\n\tpublic static float[] scale(float sx, float sy, float sz)\n\t{\n\t\treturn new float[]\n\t\t\t{\n\t\t\t\tsx, 0, 0, 0,\n\t\t\t\t0, sy, 0, 0,\n\t\t\t\t0, 0, sz, 0,\n\t\t\t\t0, 0, 0, 1,\n\t\t\t};\n\t}\n\n\tpublic static float[] translate(float tx, float ty, float tz)\n\t{\n\t\treturn new float[]\n\t\t\t{\n\t\t\t\t1, 0, 0, 0,\n\t\t\t\t0, 1, 0, 0,\n\t\t\t\t0, 0, 1, 0,\n\t\t\t\ttx, ty, tz, 1,\n\t\t\t};\n\t}\n\n\tpublic static float[] rotateX(float rx)\n\t{\n\t\tfloat s \u003d (float) Math.sin(rx);\n\t\tfloat c \u003d (float) Math.cos(rx);\n\n\t\treturn new float[]\n\t\t\t{\n\t\t\t\t1, 0, 0, 0,\n\t\t\t\t0, c, s, 0,\n\t\t\t\t0, -s, c, 0,\n\t\t\t\t0, 0, 0, 1,\n\t\t\t};\n\t}\n\n\tpublic static float[] rotateY(float ry)\n\t{\n\t\tfloat s \u003d (float) Math.sin(ry);\n\t\tfloat c \u003d (float) Math.cos(ry);\n\n\t\treturn new float[]\n\t\t\t{\n\t\t\t\tc, 0, -s, 0,\n\t\t\t\t0, 1, 0, 0,\n\t\t\t\ts, 0, c, 0,\n\t\t\t\t0, 0, 0, 1,\n\t\t\t};\n\t}\n\n\tpublic static float[] projection(float w, float h, float n)\n\t{\n\t\treturn new float[]\n\t\t\t{\n\t\t\t\t2 / w, 0, 0, 0,\n\t\t\t\t0, -2 / h, 0, 0,\n\t\t\t\t0, 0, 0, 1,\n\t\t\t\t0, 0, 2 * n, 0\n\t\t\t};\n\t}\n\n\tpublic static void mul(final float[] a, final float[] b)\n\t{\n\t\tfinal float b00 \u003d b[0 + 0 * 4];\n\t\tfinal float b10 \u003d b[1 + 0 * 4];\n\t\tfinal float b20 \u003d b[2 + 0 * 4];\n\t\tfinal float b30 \u003d b[3 + 0 * 4];\n\t\tfinal float b01 \u003d b[0 + 1 * 4];\n\t\tfinal float b11 \u003d b[1 + 1 * 4];\n\t\tfinal float b21 \u003d b[2 + 1 * 4];\n\t\tfinal float b31 \u003d b[3 + 1 * 4];\n\t\tfinal float b02 \u003d b[0 + 2 * 4];\n\t\tfinal float b12 \u003d b[1 + 2 * 4];\n\t\tfinal float b22 \u003d b[2 + 2 * 4];\n\t\tfinal float b32 \u003d b[3 + 2 * 4];\n\t\tfinal float b03 \u003d b[0 + 3 * 4];\n\t\tfinal float b13 \u003d b[1 + 3 * 4];\n\t\tfinal float b23 \u003d b[2 + 3 * 4];\n\t\tfinal float b33 \u003d b[3 + 3 * 4];\n\n\t\tfloat ai0 \u003d a[0 * 4]; // row-0 of a\n\t\tfloat ai1 \u003d a[1 * 4];\n\t\tfloat ai2 \u003d a[2 * 4];\n\t\tfloat ai3 \u003d a[3 * 4];\n\t\ta[0 * 4] \u003d ai0 * b00 + ai1 * b10 + ai2 * b20 + ai3 * b30;\n\t\ta[1 * 4] \u003d ai0 * b01 + ai1 * b11 + ai2 * b21 + ai3 * b31;\n\t\ta[2 * 4] \u003d ai0 * b02 + ai1 * b12 + ai2 * b22 + ai3 * b32;\n\t\ta[3 * 4] \u003d ai0 * b03 + ai1 * b13 + ai2 * b23 + ai3 * b33;\n\n\t\tai0 \u003d a[1 + 0 * 4]; // row-1 of a\n\t\tai1 \u003d a[1 + 1 * 4];\n\t\tai2 \u003d a[1 + 2 * 4];\n\t\tai3 \u003d a[1 + 3 * 4];\n\t\ta[1 + 0 * 4] \u003d ai0 * b00 + ai1 * b10 + ai2 * b20 + ai3 * b30;\n\t\ta[1 + 1 * 4] \u003d ai0 * b01 + ai1 * b11 + ai2 * b21 + ai3 * b31;\n\t\ta[1 + 2 * 4] \u003d ai0 * b02 + ai1 * b12 + ai2 * b22 + ai3 * b32;\n\t\ta[1 + 3 * 4] \u003d ai0 * b03 + ai1 * b13 + ai2 * b23 + ai3 * b33;\n\n\t\tai0 \u003d a[2 + 0 * 4]; // row-2 of a\n\t\tai1 \u003d a[2 + 1 * 4];\n\t\tai2 \u003d a[2 + 2 * 4];\n\t\tai3 \u003d a[2 + 3 * 4];\n\t\ta[2 + 0 * 4] \u003d ai0 * b00 + ai1 * b10 + ai2 * b20 + ai3 * b30;\n\t\ta[2 + 1 * 4] \u003d ai0 * b01 + ai1 * b11 + ai2 * b21 + ai3 * b31;\n\t\ta[2 + 2 * 4] \u003d ai0 * b02 + ai1 * b12 + ai2 * b22 + ai3 * b32;\n\t\ta[2 + 3 * 4] \u003d ai0 * b03 + ai1 * b13 + ai2 * b23 + ai3 * b33;\n\n\t\tai0 \u003d a[3 + 0 * 4]; // row-3 of a\n\t\tai1 \u003d a[3 + 1 * 4];\n\t\tai2 \u003d a[3 + 2 * 4];\n\t\tai3 \u003d a[3 + 3 * 4];\n\t\ta[3 + 0 * 4] \u003d ai0 * b00 + ai1 * b10 + ai2 * b20 + ai3 * b30;\n\t\ta[3 + 1 * 4] \u003d ai0 * b01 + ai1 * b11 + ai2 * b21 + ai3 * b31;\n\t\ta[3 + 2 * 4] \u003d ai0 * b02 + ai1 * b12 + ai2 * b22 + ai3 * b32;\n\t\ta[3 + 3 * 4] \u003d ai0 * b03 + ai1 * b13 + ai2 * b23 + ai3 * b33;\n\t}\n}\n","filePath":"src\\main\\java\\info\\sigterm\\plugins\\gpulegacy\\Mat4.java"},{"fileName":"OpenCLManager.java","content":"/*\n * Copyright (c) 2021, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage info.sigterm.plugins.gpulegacy;\n\nimport java.nio.ByteBuffer;\nimport java.nio.IntBuffer;\nimport java.nio.LongBuffer;\nimport java.nio.ShortBuffer;\nimport javax.inject.Singleton;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Constants;\nimport net.runelite.api.Scene;\nimport info.sigterm.plugins.gpulegacy.template.Template;\nimport net.runelite.client.util.OSType;\nimport net.runelite.rlawt.AWTContext;\nimport org.lwjgl.PointerBuffer;\nimport org.lwjgl.opencl.APPLEGLSharing;\nimport static org.lwjgl.opencl.APPLEGLSharing.CL_CGL_DEVICE_FOR_CURRENT_VIRTUAL_SCREEN_APPLE;\nimport static org.lwjgl.opencl.APPLEGLSharing.clGetGLContextInfoAPPLE;\nimport org.lwjgl.opencl.CL;\nimport static org.lwjgl.opencl.CL10.CL_CONTEXT_PLATFORM;\nimport static org.lwjgl.opencl.CL10.CL_DEVICE_EXTENSIONS;\nimport static org.lwjgl.opencl.CL10.CL_DEVICE_NAME;\nimport static org.lwjgl.opencl.CL10.CL_DEVICE_PROFILE;\nimport static org.lwjgl.opencl.CL10.CL_DEVICE_VENDOR;\nimport static org.lwjgl.opencl.CL10.CL_DEVICE_VERSION;\nimport static org.lwjgl.opencl.CL10.CL_DRIVER_VERSION;\nimport static org.lwjgl.opencl.CL10.CL_PROGRAM_BUILD_LOG;\nimport static org.lwjgl.opencl.CL10.CL_PROGRAM_BUILD_OPTIONS;\nimport static org.lwjgl.opencl.CL10.CL_PROGRAM_BUILD_STATUS;\nimport static org.lwjgl.opencl.CL10.CL_SUCCESS;\nimport static org.lwjgl.opencl.CL10.clGetPlatformInfo;\nimport static org.lwjgl.opencl.CL10.clGetProgramBuildInfo;\nimport org.lwjgl.opencl.CL10GL;\nimport static org.lwjgl.opencl.CL11.CL_DEVICE_ADDRESS_BITS;\nimport static org.lwjgl.opencl.CL11.CL_DEVICE_AVAILABLE;\nimport static org.lwjgl.opencl.CL11.CL_DEVICE_COMPILER_AVAILABLE;\nimport static org.lwjgl.opencl.CL11.CL_DEVICE_MAX_CLOCK_FREQUENCY;\nimport static org.lwjgl.opencl.CL11.CL_DEVICE_MAX_COMPUTE_UNITS;\nimport static org.lwjgl.opencl.CL11.CL_DEVICE_MAX_WORK_GROUP_SIZE;\nimport static org.lwjgl.opencl.CL11.CL_DEVICE_MAX_WORK_ITEM_DIMENSIONS;\nimport static org.lwjgl.opencl.CL11.CL_DEVICE_QUEUE_PROPERTIES;\nimport static org.lwjgl.opencl.CL11.CL_DEVICE_TYPE;\nimport static org.lwjgl.opencl.CL11.CL_DEVICE_TYPE_GPU;\nimport static org.lwjgl.opencl.CL11.CL_DEVICE_VENDOR_ID;\nimport static org.lwjgl.opencl.CL11.CL_QUEUE_OUT_OF_ORDER_EXEC_MODE_ENABLE;\nimport static org.lwjgl.opencl.CL11.clCreateContext;\nimport static org.lwjgl.opencl.CL11.clGetDeviceIDs;\nimport static org.lwjgl.opencl.CL11.clGetDeviceInfo;\nimport static org.lwjgl.opencl.CL11.clGetPlatformIDs;\nimport org.lwjgl.opencl.CL12;\nimport static org.lwjgl.opencl.CL12.CL_PROGRAM_BINARY_TYPE;\nimport org.lwjgl.opencl.CLCapabilities;\nimport org.lwjgl.opencl.CLContextCallback;\nimport org.lwjgl.opencl.CLImageFormat;\nimport static org.lwjgl.opencl.KHRGLSharing.CL_GLX_DISPLAY_KHR;\nimport static org.lwjgl.opencl.KHRGLSharing.CL_GL_CONTEXT_KHR;\nimport static org.lwjgl.opencl.KHRGLSharing.CL_WGL_HDC_KHR;\nimport org.lwjgl.system.Configuration;\nimport org.lwjgl.system.MemoryStack;\nimport org.lwjgl.system.MemoryUtil;\nimport static org.lwjgl.system.MemoryUtil.NULL;\nimport static org.lwjgl.system.MemoryUtil.memASCII;\nimport static org.lwjgl.system.MemoryUtil.memUTF8;\n\n@Singleton\n@Slf4j\nclass OpenCLManager\n{\n\tprivate static final String KERNEL_NAME_UNORDERED \u003d \"computeUnordered\";\n\tprivate static final String KERNEL_NAME_LARGE \u003d \"computeLarge\";\n\n\tprivate static final int MIN_WORK_GROUP_SIZE \u003d 256;\n\tprivate static final int SMALL_SIZE \u003d GpuPlugin.SMALL_TRIANGLE_COUNT;\n\tprivate static final int LARGE_SIZE \u003d GpuPlugin.MAX_TRIANGLE;\n\t//  struct shared_data {\n\t//      int totalNum[12];\n\t//      int totalDistance[12];\n\t//      int totalMappedNum[18];\n\t//      int min10;\n\t//      int renderPris[0];\n\t//  };\n\tprivate static final int SHARED_SIZE \u003d 12 + 12 + 18 + 1; // in ints\n\n\tprivate boolean initialized;\n\n\t// The number of faces each worker processes in the two kernels\n\tprivate int largeFaceCount;\n\tprivate int smallFaceCount;\n\n\tprivate long device;\n\tlong context;\n\tprivate long commandQueue;\n\n\tprivate long programUnordered;\n\tprivate long programSmall;\n\tprivate long programLarge;\n\n\tprivate long kernelUnordered;\n\tprivate long kernelSmall;\n\tprivate long kernelLarge;\n\n\tprivate long tileHeightImage;\n\n\tstatic\n\t{\n\t\tConfiguration.OPENCL_EXPLICIT_INIT.set(true);\n\t}\n\n\tvoid init(AWTContext awtContext)\n\t{\n\t\tdevice \u003d context \u003d commandQueue \u003d 0L;\n\t\tprogramUnordered \u003d programSmall \u003d programLarge \u003d 0L;\n\t\tkernelUnordered \u003d kernelSmall \u003d kernelLarge \u003d 0L;\n\t\ttileHeightImage \u003d 0L;\n\n\t\tCL.create();\n\t\tinitialized \u003d true;\n\n\t\ttry (var stack \u003d MemoryStack.stackPush())\n\t\t{\n\t\t\tif (OSType.getOSType() \u003d\u003d OSType.MacOS)\n\t\t\t{\n\t\t\t\tinitContextMacOS(awtContext, stack);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tinitContext(awtContext, stack);\n\t\t\t}\n\n\t\t\tensureMinWorkGroupSize();\n\t\t\tinitQueue();\n\t\t\tcompilePrograms(stack);\n\t\t}\n\t}\n\n\tvoid cleanup()\n\t{\n\t\tif (!initialized)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\ttry\n\t\t{\n\t\t\tif (tileHeightImage !\u003d 0L)\n\t\t\t{\n\t\t\t\tCL12.clReleaseMemObject(tileHeightImage);\n\t\t\t}\n\n\t\t\tCL12.clReleaseKernel(kernelUnordered);\n\t\t\tCL12.clReleaseKernel(kernelSmall);\n\t\t\tCL12.clReleaseKernel(kernelLarge);\n\n\t\t\tCL12.clReleaseProgram(programUnordered);\n\t\t\tCL12.clReleaseProgram(programSmall);\n\t\t\tCL12.clReleaseProgram(programLarge);\n\n\t\t\tCL12.clReleaseCommandQueue(commandQueue);\n\n\t\t\tCL12.clReleaseContext(context);\n\n\t\t\tCL12.clReleaseDevice(device);\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tCL.destroy();\n\t\t\tinitialized \u003d false;\n\t\t}\n\t}\n\n\tprivate void initContext(AWTContext awtContext, MemoryStack stack)\n\t{\n\t\tIntBuffer pi \u003d stack.mallocInt(1);\n\t\tcheckCLError(clGetPlatformIDs(null, pi));\n\t\tif (pi.get(0) \u003d\u003d 0)\n\t\t{\n\t\t\tthrow new RuntimeException(\"No OpenCL platforms found.\");\n\t\t}\n\n\t\tPointerBuffer platforms \u003d stack.mallocPointer(pi.get(0));\n\t\tcheckCLError(clGetPlatformIDs(platforms, (IntBuffer) null));\n\n\t\tPointerBuffer ctxProps \u003d stack.mallocPointer(7);\n\t\tif (OSType.getOSType() \u003d\u003d OSType.Windows)\n\t\t{\n\t\t\tctxProps\n\t\t\t\t.put(CL_CONTEXT_PLATFORM)\n\t\t\t\t.put(0)\n\t\t\t\t.put(CL_GL_CONTEXT_KHR)\n\t\t\t\t.put(awtContext.getGLContext())\n\t\t\t\t.put(CL_WGL_HDC_KHR)\n\t\t\t\t.put(awtContext.getWGLHDC())\n\t\t\t\t.put(0)\n\t\t\t\t.flip();\n\t\t}\n\t\telse if (OSType.getOSType() \u003d\u003d OSType.Linux)\n\t\t{\n\t\t\tctxProps\n\t\t\t\t.put(CL_CONTEXT_PLATFORM)\n\t\t\t\t.put(0)\n\t\t\t\t.put(CL_GL_CONTEXT_KHR)\n\t\t\t\t.put(awtContext.getGLContext())\n\t\t\t\t.put(CL_GLX_DISPLAY_KHR)\n\t\t\t\t.put(awtContext.getGLXDisplay())\n\t\t\t\t.put(0)\n\t\t\t\t.flip();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new RuntimeException(\"unsupported platform\");\n\t\t}\n\n\t\tfor (int p \u003d 0; p \u003c platforms.capacity(); p++)\n\t\t{\n\t\t\tlong platform \u003d platforms.get(p);\n\t\t\tctxProps.put(1, platform);\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tCLCapabilities platformCaps \u003d CL.createPlatformCapabilities(platform);\n\n\t\t\t\tlog.debug(\"Platform profile: {}\", getPlatformInfoStringUTF8(platform, CL12.CL_PLATFORM_PROFILE));\n\t\t\t\tlog.debug(\"Platform version: {}\", getPlatformInfoStringUTF8(platform, CL12.CL_PLATFORM_VERSION));\n\t\t\t\tlog.debug(\"Platform name: {}\", getPlatformInfoStringUTF8(platform, CL12.CL_PLATFORM_NAME));\n\t\t\t\tlog.debug(\"Platform vendor: {}\", getPlatformInfoStringUTF8(platform, CL12.CL_PLATFORM_VENDOR));\n\t\t\t\tlog.debug(\"Platform extensions: {}\", getPlatformInfoStringUTF8(platform, CL12.CL_PLATFORM_EXTENSIONS));\n\n\t\t\t\tcheckCLError(clGetDeviceIDs(platform, CL_DEVICE_TYPE_GPU, null, pi));\n\n\t\t\t\tPointerBuffer devices \u003d stack.mallocPointer(pi.get(0));\n\t\t\t\tcheckCLError(clGetDeviceIDs(platform, CL_DEVICE_TYPE_GPU, devices, (IntBuffer) null));\n\n\t\t\t\tfor (int d \u003d 0; d \u003c devices.capacity(); d++)\n\t\t\t\t{\n\t\t\t\t\tlong device \u003d devices.get(d);\n\n\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t\t\tCLCapabilities deviceCaps \u003d CL.createDeviceCapabilities(device, platformCaps);\n\n\t\t\t\t\t\tlog.debug(\"Device id {}\", device);\n\t\t\t\t\t\tlog.debug(\"\\tCL_DEVICE_NAME: {}\", getDeviceInfoStringUTF8(device, CL_DEVICE_NAME));\n\t\t\t\t\t\tlog.debug(\"\\tCL_DEVICE_VENDOR: {}\", getDeviceInfoStringUTF8(device, CL_DEVICE_VENDOR));\n\t\t\t\t\t\tlog.debug(\"\\tCL_DRIVER_VERSION: {}\", getDeviceInfoStringUTF8(device, CL_DRIVER_VERSION));\n\t\t\t\t\t\tlog.debug(\"\\tCL_DEVICE_PROFILE: {}\", getDeviceInfoStringUTF8(device, CL_DEVICE_PROFILE));\n\t\t\t\t\t\tlog.debug(\"\\tCL_DEVICE_VERSION: {}\", getDeviceInfoStringUTF8(device, CL_DEVICE_VERSION));\n\t\t\t\t\t\tlog.debug(\"\\tCL_DEVICE_EXTENSIONS: {}\", getDeviceInfoStringUTF8(device, CL_DEVICE_EXTENSIONS));\n\t\t\t\t\t\tlog.debug(\"\\tCL_DEVICE_TYPE: {}\", getDeviceInfoLong(device, CL_DEVICE_TYPE));\n\t\t\t\t\t\tlog.debug(\"\\tCL_DEVICE_VENDOR_ID: {}\", getDeviceInfoInt(device, CL_DEVICE_VENDOR_ID));\n\t\t\t\t\t\tlog.debug(\"\\tCL_DEVICE_MAX_COMPUTE_UNITS: {}\", getDeviceInfoInt(device, CL_DEVICE_MAX_COMPUTE_UNITS));\n\t\t\t\t\t\tlog.debug(\"\\tCL_DEVICE_MAX_WORK_ITEM_DIMENSIONS: {}\", getDeviceInfoInt(device, CL_DEVICE_MAX_WORK_ITEM_DIMENSIONS));\n\t\t\t\t\t\tlog.debug(\"\\tCL_DEVICE_MAX_WORK_GROUP_SIZE: {}\", getDeviceInfoPointer(device, CL_DEVICE_MAX_WORK_GROUP_SIZE));\n\t\t\t\t\t\tlog.debug(\"\\tCL_DEVICE_MAX_CLOCK_FREQUENCY: {}\", getDeviceInfoInt(device, CL_DEVICE_MAX_CLOCK_FREQUENCY));\n\t\t\t\t\t\tlog.debug(\"\\tCL_DEVICE_ADDRESS_BITS: {}\", getDeviceInfoInt(device, CL_DEVICE_ADDRESS_BITS));\n\t\t\t\t\t\tlog.debug(\"\\tCL_DEVICE_AVAILABLE: {}\", getDeviceInfoInt(device, CL_DEVICE_AVAILABLE) !\u003d 0);\n\t\t\t\t\t\tlog.debug(\"\\tCL_DEVICE_COMPILER_AVAILABLE: {}\", getDeviceInfoInt(device, CL_DEVICE_COMPILER_AVAILABLE) !\u003d 0);\n\n\t\t\t\t\t\tif (!deviceCaps.cl_khr_gl_sharing \u0026\u0026 !deviceCaps.cl_APPLE_gl_sharing)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tIntBuffer errcode_ret \u003d stack.callocInt(1);\n\t\t\t\t\t\tlong context \u003d clCreateContext(ctxProps, device, CLContextCallback.create((errinfo, private_info, cb, user_data) -\u003e\n\t\t\t\t\t\t\tlog.error(\"[LWJGL] cl_context_callback: {}\", memUTF8(errinfo))), NULL, errcode_ret);\n\t\t\t\t\t\tcheckCLError(errcode_ret);\n\n\t\t\t\t\t\tthis.device \u003d device;\n\t\t\t\t\t\tthis.context \u003d context;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tcatch (Exception ex)\n\t\t\t\t\t{\n\t\t\t\t\t\tlog.error(\"error checking device\", ex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (Exception ex)\n\t\t\t{\n\t\t\t\tlog.error(\"error checking platform\", ex);\n\t\t\t}\n\t\t}\n\n\t\tthrow new RuntimeException(\"Unable to find compute platform\");\n\t}\n\n\tprivate void initContextMacOS(AWTContext awtContext, MemoryStack stack)\n\t{\n\t\tPointerBuffer ctxProps \u003d stack.mallocPointer(3);\n\t\tctxProps\n\t\t\t.put(APPLEGLSharing.CL_CONTEXT_PROPERTY_USE_CGL_SHAREGROUP_APPLE)\n\t\t\t.put(awtContext.getCGLShareGroup())\n\t\t\t.put(0)\n\t\t\t.flip();\n\n\t\tIntBuffer errcode_ret \u003d stack.callocInt(1);\n\t\tvar devices \u003d stack.mallocPointer(0);\n\t\tlong context \u003d clCreateContext(ctxProps, devices, CLContextCallback.create((errinfo, private_info, cb, user_data) -\u003e\n\t\t\tlog.error(\"[LWJGL] cl_context_callback: {}\", memUTF8(errinfo))), NULL, errcode_ret);\n\t\tcheckCLError(errcode_ret);\n\n\t\tvar deviceBuf \u003d stack.mallocPointer(1);\n\t\tcheckCLError(clGetGLContextInfoAPPLE(context, awtContext.getGLContext(), CL_CGL_DEVICE_FOR_CURRENT_VIRTUAL_SCREEN_APPLE, deviceBuf, null));\n\t\tlong device \u003d deviceBuf.get(0);\n\n\t\tlog.debug(\"Got macOS CLGL compute device {}\", device);\n\t\tthis.context \u003d context;\n\t\tthis.device \u003d device;\n\t}\n\n\tprivate void ensureMinWorkGroupSize()\n\t{\n\t\tlong[] maxWorkGroupSize \u003d new long[1];\n\t\tCL12.clGetDeviceInfo(device, CL_DEVICE_MAX_WORK_GROUP_SIZE, maxWorkGroupSize, null);\n\t\tlog.debug(\"Device CL_DEVICE_MAX_WORK_GROUP_SIZE: {}\", maxWorkGroupSize[0]);\n\n\t\tif (maxWorkGroupSize[0] \u003c MIN_WORK_GROUP_SIZE)\n\t\t{\n\t\t\tthrow new RuntimeException(\"Compute device does not support min work group size \" + MIN_WORK_GROUP_SIZE);\n\t\t}\n\n\t\t// Largest power of 2 less than or equal to maxWorkGroupSize\n\t\tint groupSize \u003d 0x80000000 \u003e\u003e\u003e Integer.numberOfLeadingZeros((int) maxWorkGroupSize[0]);\n\t\tlargeFaceCount \u003d LARGE_SIZE / (Math.min(groupSize, LARGE_SIZE));\n\t\tsmallFaceCount \u003d SMALL_SIZE / (Math.min(groupSize, SMALL_SIZE));\n\n\t\tlog.debug(\"Face counts: small: {}, large: {}\", smallFaceCount, largeFaceCount);\n\t}\n\n\tprivate void initQueue()\n\t{\n\t\tlong[] l \u003d new long[1];\n\t\tCL12.clGetDeviceInfo(device, CL_DEVICE_QUEUE_PROPERTIES, l, null);\n\n\t\tcommandQueue \u003d CL12.clCreateCommandQueue(context, device, l[0] \u0026 CL_QUEUE_OUT_OF_ORDER_EXEC_MODE_ENABLE, (int[]) null);\n\t\tlog.debug(\"Created command_queue {}, properties {}\", commandQueue, l[0] \u0026 CL_QUEUE_OUT_OF_ORDER_EXEC_MODE_ENABLE);\n\t}\n\n\tprivate long compileProgram(MemoryStack stack, String programSource)\n\t{\n\t\tlog.trace(\"Compiling program:\\n {}\", programSource);\n\t\tIntBuffer errcode_ret \u003d stack.callocInt(1);\n\t\tlong program \u003d CL12.clCreateProgramWithSource(context, programSource, errcode_ret);\n\t\tcheckCLError(errcode_ret);\n\n\t\tint err \u003d CL12.clBuildProgram(program, device, \"\", null, 0);\n\t\tif (err !\u003d CL_SUCCESS)\n\t\t{\n\t\t\tString errstr \u003d getProgramBuildInfoStringASCII(program, device, CL_PROGRAM_BUILD_LOG);\n\t\t\tthrow new RuntimeException(errstr);\n\t\t}\n\n\t\tlog.debug(\"Build status: {}\", getProgramBuildInfoInt(program, device, CL_PROGRAM_BUILD_STATUS));\n\t\tlog.debug(\"Binary type: {}\", getProgramBuildInfoInt(program, device, CL_PROGRAM_BINARY_TYPE));\n\t\tlog.debug(\"Build options: {}\", getProgramBuildInfoStringASCII(program, device, CL_PROGRAM_BUILD_OPTIONS));\n\t\tlog.debug(\"Build log: {}\", getProgramBuildInfoStringASCII(program, device, CL_PROGRAM_BUILD_LOG));\n\t\treturn program;\n\t}\n\n\tprivate long getKernel(MemoryStack stack, long program, String kernelName)\n\t{\n\t\tIntBuffer errcode_ret \u003d stack.callocInt(1);\n\t\tlong kernel \u003d CL12.clCreateKernel(program, kernelName, errcode_ret);\n\t\tcheckCLError(errcode_ret);\n\t\tlog.debug(\"Loaded kernel {} for program {}\", kernelName, program);\n\t\treturn kernel;\n\t}\n\n\tprivate void compilePrograms(MemoryStack stack)\n\t{\n\t\tTemplate templateSmall \u003d new Template()\n\t\t\t.addInclude(OpenCLManager.class)\n\t\t\t.add(key -\u003e key.equals(\"FACE_COUNT\") ? (\"#define FACE_COUNT \" + smallFaceCount) : null);\n\t\tTemplate templateLarge \u003d new Template()\n\t\t\t.addInclude(OpenCLManager.class)\n\t\t\t.add(key -\u003e key.equals(\"FACE_COUNT\") ? (\"#define FACE_COUNT \" + largeFaceCount) : null);\n\n\t\tString unordered \u003d new Template()\n\t\t\t.addInclude(OpenCLManager.class)\n\t\t\t.load(\"comp_unordered.cl\");\n\t\tString small \u003d templateSmall.load(\"comp.cl\");\n\t\tString large \u003d templateLarge.load(\"comp.cl\");\n\n\t\tprogramUnordered \u003d compileProgram(stack, unordered);\n\t\tprogramSmall \u003d compileProgram(stack, small);\n\t\tprogramLarge \u003d compileProgram(stack, large);\n\n\t\tkernelUnordered \u003d getKernel(stack, programUnordered, KERNEL_NAME_UNORDERED);\n\t\tkernelSmall \u003d getKernel(stack, programSmall, KERNEL_NAME_LARGE);\n\t\tkernelLarge \u003d getKernel(stack, programLarge, KERNEL_NAME_LARGE);\n\t}\n\n\tvoid uploadTileHeights(Scene scene)\n\t{\n\t\tif (tileHeightImage !\u003d 0L)\n\t\t{\n\t\t\tCL12.clReleaseMemObject(tileHeightImage);\n\t\t\ttileHeightImage \u003d 0L;\n\t\t}\n\n\t\tfinal int TILEHEIGHT_BUFFER_SIZE \u003d Constants.MAX_Z * Constants.EXTENDED_SCENE_SIZE * Constants.EXTENDED_SCENE_SIZE * Short.BYTES;\n\t\tShortBuffer tileBuffer \u003d MemoryUtil.memAllocShort(TILEHEIGHT_BUFFER_SIZE);\n\t\tint[][][] tileHeights \u003d scene.getTileHeights();\n\t\tfor (int z \u003d 0; z \u003c Constants.MAX_Z; ++z)\n\t\t{\n\t\t\tfor (int y \u003d 0; y \u003c Constants.EXTENDED_SCENE_SIZE; ++y)\n\t\t\t{\n\t\t\t\tfor (int x \u003d 0; x \u003c Constants.EXTENDED_SCENE_SIZE; ++x)\n\t\t\t\t{\n\t\t\t\t\tint h \u003d tileHeights[z][x][y];\n\t\t\t\t\tassert (h \u0026 0b111) \u003d\u003d 0;\n\t\t\t\t\th \u003e\u003e\u003d 3;\n\t\t\t\t\ttileBuffer.put((short) h);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\ttileBuffer.flip();\n\n\t\ttry (MemoryStack stack \u003d MemoryStack.stackPush())\n\t\t{\n\t\t\tCLImageFormat imageFormat \u003d CLImageFormat.calloc(stack);\n\t\t\timageFormat.image_channel_order(CL12.CL_R);\n\t\t\timageFormat.image_channel_data_type(CL12.CL_SIGNED_INT16);\n\n\t\t\tIntBuffer errcode_ret \u003d stack.callocInt(1);\n\t\t\ttileHeightImage \u003d CL12.clCreateImage3D(context, CL12.CL_MEM_READ_ONLY | CL12.CL_MEM_COPY_HOST_PTR, imageFormat,\n\t\t\t\tConstants.EXTENDED_SCENE_SIZE, Constants.EXTENDED_SCENE_SIZE, Constants.MAX_Z,\n\t\t\t\t0L, 0L,\n\t\t\t\ttileBuffer,\n\t\t\t\terrcode_ret);\n\t\t\tcheckCLError(errcode_ret);\n\t\t}\n\n\t\tMemoryUtil.memFree(tileBuffer);\n\t}\n\n\tvoid compute(int unorderedModels, int smallModels, int largeModels,\n\t\tGLBuffer sceneVertexBuffer,\n\t\tGLBuffer sceneUvBuffer,\n\t\tGLBuffer vertexBuffer,\n\t\tGLBuffer uvBuffer,\n\t\tGLBuffer unorderedBuffer,\n\t\tGLBuffer smallBuffer,\n\t\tGLBuffer largeBuffer,\n\t\tGLBuffer outVertexBuffer,\n\t\tGLBuffer outUvBuffer,\n\t\tGLBuffer uniformBuffer\n\t)\n\t{\n\t\ttry (MemoryStack stack \u003d MemoryStack.stackPush())\n\t\t{\n\t\t\tPointerBuffer glBuffers \u003d stack.mallocPointer(10);\n\t\t\tglBuffers.put(sceneVertexBuffer.clBuffer);\n\t\t\tglBuffers.put(sceneUvBuffer.clBuffer);\n\t\t\tglBuffers.put(unorderedBuffer.clBuffer);\n\t\t\tglBuffers.put(smallBuffer.clBuffer);\n\t\t\tglBuffers.put(largeBuffer.clBuffer);\n\t\t\tglBuffers.put(vertexBuffer.clBuffer);\n\t\t\tglBuffers.put(uvBuffer.clBuffer);\n\t\t\tglBuffers.put(outVertexBuffer.clBuffer);\n\t\t\tglBuffers.put(outUvBuffer.clBuffer);\n\t\t\tglBuffers.put(uniformBuffer.clBuffer);\n\t\t\tglBuffers.flip();\n\n\t\t\tPointerBuffer acquireEvent \u003d stack.mallocPointer(1);\n\t\t\tCL10GL.clEnqueueAcquireGLObjects(commandQueue, glBuffers, null, acquireEvent);\n\n\t\t\tvar computeEvents \u003d stack.mallocPointer(3);\n\t\t\tif (unorderedModels \u003e 0)\n\t\t\t{\n\t\t\t\tCL12.clSetKernelArg1p(kernelUnordered, 0, unorderedBuffer.clBuffer);\n\t\t\t\tCL12.clSetKernelArg1p(kernelUnordered, 1, sceneVertexBuffer.clBuffer);\n\t\t\t\tCL12.clSetKernelArg1p(kernelUnordered, 2, vertexBuffer.clBuffer);\n\t\t\t\tCL12.clSetKernelArg1p(kernelUnordered, 3, sceneUvBuffer.clBuffer);\n\t\t\t\tCL12.clSetKernelArg1p(kernelUnordered, 4, uvBuffer.clBuffer);\n\t\t\t\tCL12.clSetKernelArg1p(kernelUnordered, 5, outVertexBuffer.clBuffer);\n\t\t\t\tCL12.clSetKernelArg1p(kernelUnordered, 6, outUvBuffer.clBuffer);\n\n\t\t\t\t// queue compute call after acquireGLBuffers\n\t\t\t\tCL12.clEnqueueNDRangeKernel(commandQueue, kernelUnordered, 1, null,\n\t\t\t\t\tstack.pointers(unorderedModels * 6L), stack.pointers(6),\n\t\t\t\t\tacquireEvent, computeEvents);\n\t\t\t\tcomputeEvents.position(computeEvents.position() + 1);\n\t\t\t}\n\n\t\t\tif (smallModels \u003e 0)\n\t\t\t{\n\t\t\t\tCL12.clSetKernelArg(kernelSmall, 0, (SHARED_SIZE + SMALL_SIZE) * Integer.BYTES);\n\t\t\t\tCL12.clSetKernelArg1p(kernelSmall, 1, smallBuffer.clBuffer);\n\t\t\t\tCL12.clSetKernelArg1p(kernelSmall, 2, sceneVertexBuffer.clBuffer);\n\t\t\t\tCL12.clSetKernelArg1p(kernelSmall, 3, vertexBuffer.clBuffer);\n\t\t\t\tCL12.clSetKernelArg1p(kernelSmall, 4, sceneUvBuffer.clBuffer);\n\t\t\t\tCL12.clSetKernelArg1p(kernelSmall, 5, uvBuffer.clBuffer);\n\t\t\t\tCL12.clSetKernelArg1p(kernelSmall, 6, outVertexBuffer.clBuffer);\n\t\t\t\tCL12.clSetKernelArg1p(kernelSmall, 7, outUvBuffer.clBuffer);\n\t\t\t\tCL12.clSetKernelArg1p(kernelSmall, 8, uniformBuffer.clBuffer);\n\t\t\t\tCL12.clSetKernelArg1l(kernelSmall, 9, tileHeightImage);\n\n\t\t\t\tCL12.clEnqueueNDRangeKernel(commandQueue, kernelSmall, 1, null,\n\t\t\t\t\tstack.pointers(smallModels * (SMALL_SIZE / smallFaceCount)), stack.pointers(SMALL_SIZE / smallFaceCount),\n\t\t\t\t\tacquireEvent, computeEvents);\n\t\t\t\tcomputeEvents.position(computeEvents.position() + 1);\n\t\t\t}\n\n\t\t\tif (largeModels \u003e 0)\n\t\t\t{\n\t\t\t\tCL12.clSetKernelArg(kernelLarge, 0, (SHARED_SIZE + LARGE_SIZE) * Integer.BYTES);\n\t\t\t\tCL12.clSetKernelArg1p(kernelLarge, 1, largeBuffer.clBuffer);\n\t\t\t\tCL12.clSetKernelArg1p(kernelLarge, 2, sceneVertexBuffer.clBuffer);\n\t\t\t\tCL12.clSetKernelArg1p(kernelLarge, 3, vertexBuffer.clBuffer);\n\t\t\t\tCL12.clSetKernelArg1p(kernelLarge, 4, sceneUvBuffer.clBuffer);\n\t\t\t\tCL12.clSetKernelArg1p(kernelLarge, 5, uvBuffer.clBuffer);\n\t\t\t\tCL12.clSetKernelArg1p(kernelLarge, 6, outVertexBuffer.clBuffer);\n\t\t\t\tCL12.clSetKernelArg1p(kernelLarge, 7, outUvBuffer.clBuffer);\n\t\t\t\tCL12.clSetKernelArg1p(kernelLarge, 8, uniformBuffer.clBuffer);\n\t\t\t\tCL12.clSetKernelArg1l(kernelLarge, 9, tileHeightImage);\n\n\t\t\t\tCL12.clEnqueueNDRangeKernel(commandQueue, kernelLarge, 1, null,\n\t\t\t\t\tstack.pointers(largeModels * (LARGE_SIZE / largeFaceCount)), stack.pointers(LARGE_SIZE / largeFaceCount),\n\t\t\t\t\tacquireEvent, computeEvents);\n\t\t\t\tcomputeEvents.position(computeEvents.position() + 1);\n\t\t\t}\n\n\t\t\tif (computeEvents.position() \u003d\u003d 0)\n\t\t\t{\n\t\t\t\tCL10GL.clEnqueueReleaseGLObjects(commandQueue, glBuffers, null, null);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcomputeEvents.flip();\n\t\t\t\tCL10GL.clEnqueueReleaseGLObjects(commandQueue, glBuffers, computeEvents, null);\n\t\t\t}\n//\n//\t\t\tlong ptr \u003d acquireEvent.get(0);\n//\t\t\tif (ptr !\u003d 0L)\n//\t\t\t{\n//\t\t\t\tCL12.clReleaseEvent(ptr);\n//\t\t\t}\n//\n//\t\t\tfor (int i \u003d 0; i \u003c computeEvents.limit(); ++i)\n//\t\t\t{\n//\t\t\t\tptr \u003d computeEvents.get(i);\n//\t\t\t\tif (ptr !\u003d 0L)\n//\t\t\t\t{\n//\t\t\t\t\tCL12.clReleaseEvent(ptr);\n//\t\t\t\t}\n//\t\t\t}\n\t\t}\n\t}\n\n\tvoid finish()\n\t{\n\t\tCL12.clFinish(commandQueue);\n\t}\n\n\tprivate static String getPlatformInfoStringUTF8(long cl_platform_id, int param_name)\n\t{\n\t\ttry (MemoryStack stack \u003d MemoryStack.stackPush())\n\t\t{\n\t\t\tPointerBuffer pp \u003d stack.mallocPointer(1);\n\t\t\tcheckCLError(clGetPlatformInfo(cl_platform_id, param_name, (ByteBuffer) null, pp));\n\t\t\tint bytes \u003d (int) pp.get(0);\n\n\t\t\tByteBuffer buffer \u003d stack.malloc(bytes);\n\t\t\tcheckCLError(clGetPlatformInfo(cl_platform_id, param_name, buffer, null));\n\n\t\t\treturn memUTF8(buffer, bytes - 1);\n\t\t}\n\t}\n\n\tprivate static long getDeviceInfoLong(long cl_device_id, int param_name)\n\t{\n\t\ttry (MemoryStack stack \u003d MemoryStack.stackPush())\n\t\t{\n\t\t\tLongBuffer pl \u003d stack.mallocLong(1);\n\t\t\tcheckCLError(clGetDeviceInfo(cl_device_id, param_name, pl, null));\n\t\t\treturn pl.get(0);\n\t\t}\n\t}\n\n\tprivate static int getDeviceInfoInt(long cl_device_id, int param_name)\n\t{\n\t\ttry (MemoryStack stack \u003d MemoryStack.stackPush())\n\t\t{\n\t\t\tIntBuffer pl \u003d stack.mallocInt(1);\n\t\t\tcheckCLError(clGetDeviceInfo(cl_device_id, param_name, pl, null));\n\t\t\treturn pl.get(0);\n\t\t}\n\t}\n\n\tprivate static long getDeviceInfoPointer(long cl_device_id, int param_name)\n\t{\n\t\ttry (MemoryStack stack \u003d MemoryStack.stackPush())\n\t\t{\n\t\t\tPointerBuffer pp \u003d stack.mallocPointer(1);\n\t\t\tcheckCLError(clGetDeviceInfo(cl_device_id, param_name, pp, null));\n\t\t\treturn pp.get(0);\n\t\t}\n\t}\n\n\tprivate static String getDeviceInfoStringUTF8(long cl_device_id, int param_name)\n\t{\n\t\ttry (MemoryStack stack \u003d MemoryStack.stackPush())\n\t\t{\n\t\t\tPointerBuffer pp \u003d stack.mallocPointer(1);\n\t\t\tcheckCLError(clGetDeviceInfo(cl_device_id, param_name, (ByteBuffer) null, pp));\n\t\t\tint bytes \u003d (int) pp.get(0);\n\n\t\t\tByteBuffer buffer \u003d stack.malloc(bytes);\n\t\t\tcheckCLError(clGetDeviceInfo(cl_device_id, param_name, buffer, null));\n\n\t\t\treturn memUTF8(buffer, bytes - 1);\n\t\t}\n\t}\n\n\tprivate static int getProgramBuildInfoInt(long cl_program_id, long cl_device_id, int param_name)\n\t{\n\t\ttry (MemoryStack stack \u003d MemoryStack.stackPush())\n\t\t{\n\t\t\tIntBuffer pl \u003d stack.mallocInt(1);\n\t\t\tcheckCLError(clGetProgramBuildInfo(cl_program_id, cl_device_id, param_name, pl, null));\n\t\t\treturn pl.get(0);\n\t\t}\n\t}\n\n\tprivate static String getProgramBuildInfoStringASCII(long cl_program_id, long cl_device_id, int param_name)\n\t{\n\t\ttry (MemoryStack stack \u003d MemoryStack.stackPush())\n\t\t{\n\t\t\tPointerBuffer pp \u003d stack.mallocPointer(1);\n\t\t\tcheckCLError(clGetProgramBuildInfo(cl_program_id, cl_device_id, param_name, (ByteBuffer) null, pp));\n\t\t\tint bytes \u003d (int) pp.get(0);\n\n\t\t\tByteBuffer buffer \u003d stack.malloc(bytes);\n\t\t\tcheckCLError(clGetProgramBuildInfo(cl_program_id, cl_device_id, param_name, buffer, null));\n\n\t\t\treturn memASCII(buffer, bytes - 1);\n\t\t}\n\t}\n\n\tprivate static void checkCLError(IntBuffer errcode)\n\t{\n\t\tcheckCLError(errcode.get(errcode.position()));\n\t}\n\n\tprivate static void checkCLError(int errcode)\n\t{\n\t\tif (errcode !\u003d CL_SUCCESS)\n\t\t{\n\t\t\tthrow new RuntimeException(String.format(\"OpenCL error [%d]\", errcode));\n\t\t}\n\t}\n}","filePath":"src\\main\\java\\info\\sigterm\\plugins\\gpulegacy\\OpenCLManager.java"},{"fileName":"Region.java","content":"/*\n * Copyright (c) 2023, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage info.sigterm.plugins.gpulegacy.regions;\n\nclass Region\n{\n\tint id;\n\tint cx1;\n\tint cy1;\n\tint cx2;\n\tint cy2;\n}\n","filePath":"src\\main\\java\\info\\sigterm\\plugins\\gpulegacy\\regions\\Region.java"},{"fileName":"Regions.java","content":"/*\n * Copyright (c) 2023, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage info.sigterm.plugins.gpulegacy.regions;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.io.Reader;\nimport java.nio.charset.StandardCharsets;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\nimport lombok.AccessLevel;\nimport lombok.Getter;\n\npublic class Regions\n{\n\tprivate static final Pattern PATTERN \u003d Pattern.compile(\"^[ \\\\t]*(?\u003cexpr\u003e\" +\n\t\t\"//.*$|\" + // //comment\n\t\t\"n|\" +\n\t\t\"m[ \\\\t]*(?\u003cmrx\u003e[0-9]+)[ \\\\t]+(?\u003cmry\u003e[0-9]+)|\" + // m \u003crx\u003e \u003cry\u003e\n\t\t\"r[ \\\\t]*(?\u003crx\u003e[0-9]+)[ \\\\t]+(?\u003cry\u003e[0-9]+)|\" + // r \u003crx\u003e \u003cry\u003e\n\t\t\"R[ \\\\t]*(?\u003crx1\u003e[0-9]+)[ \\\\t]+(?\u003cry1\u003e[0-9]+)[ \\\\t]+(?\u003crx2\u003e[0-9]+)[ \\\\t]+(?\u003cry2\u003e[0-9]+)|\" + // R \u003crx1\u003e \u003cry1\u003e \u003crx2\u003e \u003cry2\u003e\n\t\t\"c[ \\\\t]*(?\u003ccx\u003e[0-9-]+)[ \\\\t]+(?\u003ccy\u003e[0-9-]+)|\" + // c \u003ccx\u003e \u003ccy\u003e\n\t\t\"C[ \\\\t]*(?\u003ccx1\u003e[0-9-]+)[ \\\\t]+(?\u003ccy1\u003e[0-9-]+)[ \\\\t]+(?\u003ccx2\u003e[0-9-]+)[ \\\\t]+(?\u003ccy2\u003e[0-9-]+)|\" + // C \u003ccx1\u003e \u003ccy1\u003e \u003ccx2\u003e \u003ccy2\u003e\n\t\t\")[ \\\\t]*\");\n\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate final List\u003cRegion\u003e regions \u003d new ArrayList\u003c\u003e();\n\n\tprivate static final int REGION_MAP_SIZE \u003d 70 * 200 / 8;\n\tprivate final byte[] regionMap \u003d new byte[REGION_MAP_SIZE];\n\n\tprivate Region last;\n\n\tpublic Regions(InputStream is, String filename) throws IOException\n\t{\n\t\tthis(new InputStreamReader(is, StandardCharsets.UTF_8), filename);\n\t}\n\n\tpublic Regions(Reader reader, String filename) throws IOException\n\t{\n\t\tBufferedReader br \u003d new BufferedReader(reader);\n\t\tint lineNo \u003d 1;\n\t\tint rx1 \u003d 0, ry1 \u003d 0, rx2 \u003d 0, ry2 \u003d 0;\n\t\tint rid \u003d 0;\n\t\tMatcher m \u003d PATTERN.matcher(\"\");\n\t\tfor (String line; (line \u003d br.readLine()) !\u003d null; lineNo++)\n\t\t{\n\t\t\tm.reset(line);\n\t\t\tint end \u003d 0;\n\t\t\twhile (end \u003c line.length())\n\t\t\t{\n\t\t\t\tm.region(end, line.length());\n\t\t\t\tif (!m.find())\n\t\t\t\t{\n\t\t\t\t\tthrow new IllegalArgumentException(\"Unexpected: \\\"\" + line.substring(end) + \"\\\" (\" + filename + \":\" + lineNo + \")\");\n\t\t\t\t}\n\t\t\t\tend \u003d m.end();\n\n\t\t\t\tString expr \u003d m.group(\"expr\");\n\t\t\t\tif (expr \u003d\u003d null || expr.length() \u003c\u003d 0 || expr.startsWith(\"//\"))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tchar cha \u003d expr.charAt(0);\n\t\t\t\tswitch (cha)\n\t\t\t\t{\n\t\t\t\t\tcase \u0027n\u0027:\n\t\t\t\t\t\trid++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \u0027m\u0027:\n\t\t\t\t\t\trx2 \u003d rx1 \u003d Integer.parseInt(m.group(\"mrx\"));\n\t\t\t\t\t\try2 \u003d ry1 \u003d Integer.parseInt(m.group(\"mry\"));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \u0027r\u0027:\n\t\t\t\t\tcase \u0027R\u0027:\n\t\t\t\t\t\tif (cha \u003d\u003d \u0027r\u0027)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trx2 \u003d rx1 \u003d Integer.parseInt(m.group(\"rx\"));\n\t\t\t\t\t\t\try2 \u003d ry1 \u003d Integer.parseInt(m.group(\"ry\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trx1 \u003d Integer.parseInt(m.group(\"rx1\"));\n\t\t\t\t\t\t\try1 \u003d Integer.parseInt(m.group(\"ry1\"));\n\t\t\t\t\t\t\trx2 \u003d Integer.parseInt(m.group(\"rx2\"));\n\t\t\t\t\t\t\try2 \u003d Integer.parseInt(m.group(\"ry2\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// fallthrough\n\t\t\t\t\tcase \u0027c\u0027:\n\t\t\t\t\tcase \u0027C\u0027:\n\t\t\t\t\t\tint cx1 \u003d rx1 * 8;\n\t\t\t\t\t\tint cy1 \u003d ry1 * 8;\n\t\t\t\t\t\tint cx2 \u003d rx2 * 8 + 7;\n\t\t\t\t\t\tint cy2 \u003d ry2 * 8 + 7;\n\t\t\t\t\t\tif (cha \u003d\u003d \u0027c\u0027)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcx2 \u003d cx1 \u003d cx1 + Integer.parseInt(m.group(\"cx\"));\n\t\t\t\t\t\t\tcy2 \u003d cy1 \u003d cy1 + Integer.parseInt(m.group(\"cy\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (cha \u003d\u003d \u0027C\u0027)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcx2 \u003d cx1 + Integer.parseInt(m.group(\"cx2\"));\n\t\t\t\t\t\t\tcy2 \u003d cy1 + Integer.parseInt(m.group(\"cy2\"));\n\t\t\t\t\t\t\tcx1 \u003d cx1 + Integer.parseInt(m.group(\"cx1\"));\n\t\t\t\t\t\t\tcy1 \u003d cy1 + Integer.parseInt(m.group(\"cy1\"));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (cx1 \u003e cx2 || cy1 \u003e cy2)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthrow new IllegalArgumentException(\"First coord must be before second (\" + filename + \":\" + lineNo + \")\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tRegion r \u003d new Region();\n\t\t\t\t\t\tr.id \u003d rid;\n\t\t\t\t\t\tr.cx1 \u003d cx1;\n\t\t\t\t\t\tr.cy1 \u003d cy1;\n\t\t\t\t\t\tr.cx2 \u003d cx2;\n\t\t\t\t\t\tr.cy2 \u003d cy2;\n\t\t\t\t\t\tregions.add(r);\n\n\t\t\t\t\t\t// mark the affected regions as in uses\n\t\t\t\t\t\tfor (int rx \u003d rx1; rx \u003c\u003d rx2; ++rx)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfor (int ry \u003d ry1; ry \u003c\u003d ry2; ++ry)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmarkRegion(rx, ry);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic int getRegionId(int cx, int cy)\n\t{\n\t\tint rx \u003d cx / 8;\n\t\tint ry \u003d cy / 8;\n\t\tif (!isMarked(rx, ry))\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\n\t\tif (last !\u003d null \u0026\u0026 intersects(cx, cy, last))\n\t\t{\n\t\t\treturn last.id;\n\t\t}\n\n\t\tfor (Region r : regions)\n\t\t{\n\t\t\tif (intersects(cx, cy, r))\n\t\t\t{\n\t\t\t\tlast \u003d r;\n\t\t\t\treturn r.id;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\n\tprivate static boolean intersects(int cx, int cy, Region r)\n\t{\n\t\treturn cx \u003e\u003d r.cx1 \u0026\u0026 cy \u003e\u003d r.cy1 \u0026\u0026 cx \u003c\u003d r.cx2 \u0026\u0026 cy \u003c\u003d r.cy2;\n\t}\n\n\tprivate void markRegion(int rx, int ry)\n\t{\n\t\tint id \u003d (rx \u003c\u003c 8) | ry;\n\t\tint idx \u003d id / 8;\n\t\tif (idx \u003c regionMap.length)\n\t\t{\n\t\t\tregionMap[idx] |\u003d 1 \u003c\u003c (idx % 8);\n\t\t}\n\t}\n\n\tprivate boolean isMarked(int rx, int ry)\n\t{\n\t\tint id \u003d (rx \u003c\u003c 8) | ry;\n\t\tint idx \u003d id / 8;\n\t\tif (idx \u003c regionMap.length)\n\t\t{\n\t\t\treturn (regionMap[idx] \u0026 (1 \u003c\u003c (idx % 8))) !\u003d 0;\n\t\t}\n\t\treturn true;\n\t}\n}\n","filePath":"src\\main\\java\\info\\sigterm\\plugins\\gpulegacy\\regions\\Regions.java"},{"fileName":"SceneUploader.java","content":"/*\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage info.sigterm.plugins.gpulegacy;\n\nimport com.google.common.base.Stopwatch;\nimport java.io.IOException;\nimport java.util.Arrays;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Constants;\nimport net.runelite.api.DecorativeObject;\nimport net.runelite.api.GameObject;\nimport net.runelite.api.GroundObject;\nimport net.runelite.api.Model;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Point;\nimport net.runelite.api.Projection;\nimport net.runelite.api.Renderable;\nimport net.runelite.api.Scene;\nimport net.runelite.api.SceneTileModel;\nimport net.runelite.api.SceneTilePaint;\nimport net.runelite.api.Tile;\nimport net.runelite.api.WallObject;\nimport info.sigterm.plugins.gpulegacy.regions.Regions;\n\n@Singleton\n@Slf4j\nclass SceneUploader\n{\n\tprivate final Client client;\n\tprivate final GpuPluginConfig gpuConfig;\n\n\tprivate final Regions regions;\n\n\tint sceneId \u003d (int) System.nanoTime();\n\tprivate int offset;\n\tprivate int uvoffset;\n\tprivate int uniqueModels;\n\n\t@Inject\n\tSceneUploader(\n\t\tClient client,\n\t\tGpuPluginConfig config\n\t)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.gpuConfig \u003d config;\n\n\t\ttry (var in \u003d SceneUploader.class.getResourceAsStream(\"regions/regions.txt\"))\n\t\t{\n\t\t\tregions \u003d new Regions(in, \"regions.txt\");\n\t\t}\n\t\tcatch (IOException ex)\n\t\t{\n\t\t\tthrow new RuntimeException(ex);\n\t\t}\n\t}\n\n\tvoid upload(Scene scene, GpuIntBuffer vertexBuffer, GpuFloatBuffer uvBuffer)\n\t{\n\t\t++sceneId;\n\t\toffset \u003d 0;\n\t\tuvoffset \u003d 0;\n\t\tuniqueModels \u003d 0;\n\t\tvertexBuffer.clear();\n\t\tuvBuffer.clear();\n\n\t\tStopwatch stopwatch \u003d Stopwatch.createStarted();\n\t\tprepare(scene);\n\t\tstopwatch.stop();\n\t\tlog.debug(\"Scene preparation time: {}\", stopwatch);\n\n\t\tstopwatch \u003d Stopwatch.createStarted();\n\t\tfor (int z \u003d 0; z \u003c Constants.MAX_Z; ++z)\n\t\t{\n\t\t\tfor (int x \u003d 0; x \u003c Constants.EXTENDED_SCENE_SIZE; ++x)\n\t\t\t{\n\t\t\t\tfor (int y \u003d 0; y \u003c Constants.EXTENDED_SCENE_SIZE; ++y)\n\t\t\t\t{\n\t\t\t\t\tTile tile \u003d scene.getExtendedTiles()[z][x][y];\n\t\t\t\t\tif (tile !\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tupload(scene, tile, vertexBuffer, uvBuffer);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tstopwatch.stop();\n\t\tlog.debug(\"Scene upload time: {} unique models: {} length: {}KB\", stopwatch, uniqueModels, (offset * 16) / 1024);\n\t}\n\n\tprivate void upload(Scene scene, Tile tile, GpuIntBuffer vertexBuffer, GpuFloatBuffer uvBuffer)\n\t{\n\t\tTile bridge \u003d tile.getBridge();\n\t\tif (bridge !\u003d null)\n\t\t{\n\t\t\tupload(scene, bridge, vertexBuffer, uvBuffer);\n\t\t}\n\n\t\tSceneTilePaint sceneTilePaint \u003d tile.getSceneTilePaint();\n\t\tif (sceneTilePaint !\u003d null)\n\t\t{\n\t\t\tsceneTilePaint.setBufferOffset(offset);\n\t\t\tif (sceneTilePaint.getTexture() !\u003d -1)\n\t\t\t{\n\t\t\t\tsceneTilePaint.setUvBufferOffset(uvoffset);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsceneTilePaint.setUvBufferOffset(-1);\n\t\t\t}\n\t\t\tPoint tilePoint \u003d tile.getSceneLocation();\n\t\t\tint len \u003d upload(scene, sceneTilePaint,\n\t\t\t\ttile.getRenderLevel(), tilePoint.getX(), tilePoint.getY(),\n\t\t\t\tvertexBuffer, uvBuffer,\n\t\t\t\t0, 0, false);\n\t\t\tsceneTilePaint.setBufferLen(len);\n\t\t\toffset +\u003d len;\n\t\t\tif (sceneTilePaint.getTexture() !\u003d -1)\n\t\t\t{\n\t\t\t\tuvoffset +\u003d len;\n\t\t\t}\n\t\t}\n\n\t\tSceneTileModel sceneTileModel \u003d tile.getSceneTileModel();\n\t\tif (sceneTileModel !\u003d null)\n\t\t{\n\t\t\tsceneTileModel.setBufferOffset(offset);\n\t\t\tif (sceneTileModel.getTriangleTextureId() !\u003d null)\n\t\t\t{\n\t\t\t\tsceneTileModel.setUvBufferOffset(uvoffset);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsceneTileModel.setUvBufferOffset(-1);\n\t\t\t}\n\t\t\tPoint tilePoint \u003d tile.getSceneLocation();\n\t\t\tint len \u003d upload(sceneTileModel,\n\t\t\t\ttilePoint.getX() \u003c\u003c Perspective.LOCAL_COORD_BITS, tilePoint.getY() \u003c\u003c Perspective.LOCAL_COORD_BITS,\n\t\t\t\tvertexBuffer, uvBuffer, false);\n\t\t\tsceneTileModel.setBufferLen(len);\n\t\t\toffset +\u003d len;\n\t\t\tif (sceneTileModel.getTriangleTextureId() !\u003d null)\n\t\t\t{\n\t\t\t\tuvoffset +\u003d len;\n\t\t\t}\n\t\t}\n\n\t\tWallObject wallObject \u003d tile.getWallObject();\n\t\tif (wallObject !\u003d null)\n\t\t{\n\t\t\tRenderable renderable1 \u003d wallObject.getRenderable1();\n\t\t\tif (renderable1 instanceof Model)\n\t\t\t{\n\t\t\t\tuploadSceneModel((Model) renderable1, vertexBuffer, uvBuffer);\n\t\t\t}\n\n\t\t\tRenderable renderable2 \u003d wallObject.getRenderable2();\n\t\t\tif (renderable2 instanceof Model)\n\t\t\t{\n\t\t\t\tuploadSceneModel((Model) renderable2, vertexBuffer, uvBuffer);\n\t\t\t}\n\t\t}\n\n\t\tGroundObject groundObject \u003d tile.getGroundObject();\n\t\tif (groundObject !\u003d null)\n\t\t{\n\t\t\tRenderable renderable \u003d groundObject.getRenderable();\n\t\t\tif (renderable instanceof Model)\n\t\t\t{\n\t\t\t\tuploadSceneModel((Model) renderable, vertexBuffer, uvBuffer);\n\t\t\t}\n\t\t}\n\n\t\tDecorativeObject decorativeObject \u003d tile.getDecorativeObject();\n\t\tif (decorativeObject !\u003d null)\n\t\t{\n\t\t\tRenderable renderable \u003d decorativeObject.getRenderable();\n\t\t\tif (renderable instanceof Model)\n\t\t\t{\n\t\t\t\tuploadSceneModel((Model) renderable, vertexBuffer, uvBuffer);\n\t\t\t}\n\n\t\t\tRenderable renderable2 \u003d decorativeObject.getRenderable2();\n\t\t\tif (renderable2 instanceof Model)\n\t\t\t{\n\t\t\t\tuploadSceneModel((Model) renderable2, vertexBuffer, uvBuffer);\n\t\t\t}\n\t\t}\n\n\t\tGameObject[] gameObjects \u003d tile.getGameObjects();\n\t\tfor (GameObject gameObject : gameObjects)\n\t\t{\n\t\t\tif (gameObject \u003d\u003d null)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tRenderable renderable \u003d gameObject.getRenderable();\n\t\t\tif (renderable instanceof Model)\n\t\t\t{\n\t\t\t\tuploadSceneModel((Model) gameObject.getRenderable(), vertexBuffer, uvBuffer);\n\t\t\t}\n\t\t}\n\t}\n\n\tint upload(Scene scene, SceneTilePaint tile, int tileZ, int tileX, int tileY, GpuIntBuffer vertexBuffer, GpuFloatBuffer uvBuffer,\n\t\t\t   int lx, int lz, boolean stream)\n\t{\n\t\ttileX +\u003d GpuPlugin.SCENE_OFFSET;\n\t\ttileY +\u003d GpuPlugin.SCENE_OFFSET;\n\n\t\tfinal int[][][] tileHeights \u003d scene.getTileHeights();\n\t\tfinal int swHeight \u003d tileHeights[tileZ][tileX][tileY];\n\t\tfinal int seHeight \u003d tileHeights[tileZ][tileX + 1][tileY];\n\t\tfinal int neHeight \u003d tileHeights[tileZ][tileX + 1][tileY + 1];\n\t\tfinal int nwHeight \u003d tileHeights[tileZ][tileX][tileY + 1];\n\n\t\tfinal int swColor \u003d tile.getSwColor();\n\t\tfinal int seColor \u003d tile.getSeColor();\n\t\tfinal int neColor \u003d tile.getNeColor();\n\t\tfinal int nwColor \u003d tile.getNwColor();\n\n\t\tif (neColor \u003d\u003d 12345678)\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\n\t\tvertexBuffer.ensureCapacity(24);\n\t\tuvBuffer.ensureCapacity(24);\n\n\t\t// 0,0\n\t\tfinal int lx0 \u003d lx;\n\t\tfinal int ly0 \u003d swHeight;\n\t\tfinal int lz0 \u003d lz;\n\t\tfinal int hsl0 \u003d swColor;\n\n\t\t// 1,0\n\t\tfinal int lx1 \u003d lx + Perspective.LOCAL_TILE_SIZE;\n\t\tfinal int ly1 \u003d seHeight;\n\t\tfinal int lz1 \u003d lz;\n\t\tfinal int hsl1 \u003d seColor;\n\n\t\t// 1,1\n\t\tfinal int lx2 \u003d lx + Perspective.LOCAL_TILE_SIZE;\n\t\tfinal int ly2 \u003d neHeight;\n\t\tfinal int lz2 \u003d lz + Perspective.LOCAL_TILE_SIZE;\n\t\tfinal int hsl2 \u003d neColor;\n\n\t\t// 0,1\n\t\tfinal int lx3 \u003d lx;\n\t\tfinal int ly3 \u003d nwHeight;\n\t\tfinal int lz3 \u003d lz + Perspective.LOCAL_TILE_SIZE;\n\t\tfinal int hsl3 \u003d nwColor;\n\n\t\tvertexBuffer.put((float) lx2, ly2, lz2, hsl2);\n\t\tvertexBuffer.put((float) lx3, ly3, lz3, hsl3);\n\t\tvertexBuffer.put((float) lx1, ly1, lz1, hsl1);\n\n\t\tvertexBuffer.put((float) lx0, ly0, lz0, hsl0);\n\t\tvertexBuffer.put((float) lx1, ly1, lz1, hsl1);\n\t\tvertexBuffer.put((float) lx3, ly3, lz3, hsl3);\n\n\t\tif (stream || tile.getTexture() !\u003d -1)\n\t\t{\n\t\t\tint tex \u003d tile.getTexture() + 1;\n\t\t\tif (tile.isFlat())\n\t\t\t{\n\t\t\t\tuvBuffer.put(tex, lx0, ly0, lz0);\n\t\t\t\tuvBuffer.put(tex, lx1, ly1, lz1);\n\t\t\t\tuvBuffer.put(tex, lx3, ly3, lz3);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tuvBuffer.put(tex, lx2, ly2, lz2);\n\t\t\t\tuvBuffer.put(tex, lx3, ly3, lz3);\n\t\t\t\tuvBuffer.put(tex, lx1, ly1, lz1);\n\t\t\t}\n\n\t\t\tuvBuffer.put(tex, lx0, ly0, lz0);\n\t\t\tuvBuffer.put(tex, lx1, ly1, lz1);\n\t\t\tuvBuffer.put(tex, lx3, ly3, lz3);\n\t\t}\n\n\t\treturn 6;\n\t}\n\n\tint upload(SceneTileModel sceneTileModel, int lx, int lz,\n\t\t\t   GpuIntBuffer vertexBuffer, GpuFloatBuffer uvBuffer, boolean stream)\n\t{\n\t\tfinal int[] faceX \u003d sceneTileModel.getFaceX();\n\t\tfinal int[] faceY \u003d sceneTileModel.getFaceY();\n\t\tfinal int[] faceZ \u003d sceneTileModel.getFaceZ();\n\n\t\tfinal int[] vertexX \u003d sceneTileModel.getVertexX();\n\t\tfinal int[] vertexY \u003d sceneTileModel.getVertexY();\n\t\tfinal int[] vertexZ \u003d sceneTileModel.getVertexZ();\n\n\t\tfinal int[] triangleColorA \u003d sceneTileModel.getTriangleColorA();\n\t\tfinal int[] triangleColorB \u003d sceneTileModel.getTriangleColorB();\n\t\tfinal int[] triangleColorC \u003d sceneTileModel.getTriangleColorC();\n\n\t\tfinal int[] triangleTextures \u003d sceneTileModel.getTriangleTextureId();\n\n\t\tfinal int faceCount \u003d faceX.length;\n\n\t\tvertexBuffer.ensureCapacity(faceCount * 12);\n\t\tuvBuffer.ensureCapacity(faceCount * 12);\n\n\t\tint cnt \u003d 0;\n\t\tfor (int i \u003d 0; i \u003c faceCount; ++i)\n\t\t{\n\t\t\tfinal int vertex0 \u003d faceX[i];\n\t\t\tfinal int vertex1 \u003d faceY[i];\n\t\t\tfinal int vertex2 \u003d faceZ[i];\n\n\t\t\tfinal int hsl0 \u003d triangleColorA[i];\n\t\t\tfinal int hsl1 \u003d triangleColorB[i];\n\t\t\tfinal int hsl2 \u003d triangleColorC[i];\n\n\t\t\tif (hsl0 \u003d\u003d 12345678)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tcnt +\u003d 3;\n\n\t\t\t// vertexes are stored in scene local, convert to tile local\n\t\t\tint lx0 \u003d vertexX[vertex0] - lx;\n\t\t\tint ly0 \u003d vertexY[vertex0];\n\t\t\tint lz0 \u003d vertexZ[vertex0] - lz;\n\n\t\t\tint lx1 \u003d vertexX[vertex1] - lx;\n\t\t\tint ly1 \u003d vertexY[vertex1];\n\t\t\tint lz1 \u003d vertexZ[vertex1] - lz;\n\n\t\t\tint lx2 \u003d vertexX[vertex2] - lx;\n\t\t\tint ly2 \u003d vertexY[vertex2];\n\t\t\tint lz2 \u003d vertexZ[vertex2] - lz;\n\n\t\t\tvertexBuffer.put((float) lx0, ly0, lz0, hsl0);\n\t\t\tvertexBuffer.put((float) lx1, ly1, lz1, hsl1);\n\t\t\tvertexBuffer.put((float) lx2, ly2, lz2, hsl2);\n\n\t\t\tif (stream || triangleTextures !\u003d null)\n\t\t\t{\n\t\t\t\tif (triangleTextures !\u003d null \u0026\u0026 triangleTextures[i] !\u003d -1)\n\t\t\t\t{\n\t\t\t\t\tint tex \u003d triangleTextures[i] + 1;\n\t\t\t\t\tif (sceneTileModel.isFlat())\n\t\t\t\t\t{\n\t\t\t\t\t\tuvBuffer.put(tex, vertexX[0] - lx, vertexY[0], vertexZ[0] - lz);\n\t\t\t\t\t\tuvBuffer.put(tex, vertexX[1] - lx, vertexY[1], vertexZ[1] - lz);\n\t\t\t\t\t\tuvBuffer.put(tex, vertexX[3] - lx, vertexY[3], vertexZ[3] - lz);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tuvBuffer.put(tex, vertexX[vertex0] - lx, vertexY[vertex0], vertexZ[vertex0] - lz);\n\t\t\t\t\t\tuvBuffer.put(tex, vertexX[vertex1] - lx, vertexY[vertex1], vertexZ[vertex1] - lz);\n\t\t\t\t\t\tuvBuffer.put(tex, vertexX[vertex2] - lx, vertexY[vertex2], vertexZ[vertex2] - lz);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tuvBuffer.put(0, 0, 0, 0);\n\t\t\t\t\tuvBuffer.put(0, 0, 0, 0);\n\t\t\t\t\tuvBuffer.put(0, 0, 0, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn cnt;\n\t}\n\n\tprivate void uploadSceneModel(Model model, GpuIntBuffer vertexBuffer, GpuFloatBuffer uvBuffer)\n\t{\n\t\t// deduplicate hillskewed models\n\t\tif (model.getUnskewedModel() !\u003d null)\n\t\t{\n\t\t\tmodel \u003d model.getUnskewedModel();\n\t\t}\n\n\t\tif (model.getSceneId() \u003d\u003d sceneId)\n\t\t{\n\t\t\treturn; // model has already been uploaded\n\t\t}\n\n\t\tmodel.setBufferOffset(offset);\n\t\tif (model.getFaceTextures() !\u003d null)\n\t\t{\n\t\t\tmodel.setUvBufferOffset(uvoffset);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmodel.setUvBufferOffset(-1);\n\t\t}\n\t\tmodel.setSceneId(sceneId);\n\t\t++uniqueModels;\n\n\t\tint len \u003d pushModel(model, vertexBuffer, uvBuffer);\n\n\t\toffset +\u003d len;\n\t\tif (model.getFaceTextures() !\u003d null)\n\t\t{\n\t\t\tuvoffset +\u003d len;\n\t\t}\n\t}\n\n\tpublic int pushModel(Model model, GpuIntBuffer vertexBuffer, GpuFloatBuffer uvBuffer)\n\t{\n\t\tfinal int triangleCount \u003d Math.min(model.getFaceCount(), GpuPlugin.MAX_TRIANGLE);\n\n\t\tvertexBuffer.ensureCapacity(triangleCount * 12);\n\t\tuvBuffer.ensureCapacity(triangleCount * 12);\n\n\t\tfinal float[] vertexX \u003d model.getVerticesX();\n\t\tfinal float[] vertexY \u003d model.getVerticesY();\n\t\tfinal float[] vertexZ \u003d model.getVerticesZ();\n\n\t\tfinal int[] indices1 \u003d model.getFaceIndices1();\n\t\tfinal int[] indices2 \u003d model.getFaceIndices2();\n\t\tfinal int[] indices3 \u003d model.getFaceIndices3();\n\n\t\tfinal int[] color1s \u003d model.getFaceColors1();\n\t\tfinal int[] color2s \u003d model.getFaceColors2();\n\t\tfinal int[] color3s \u003d model.getFaceColors3();\n\n\t\tfinal short[] faceTextures \u003d model.getFaceTextures();\n\t\tfinal byte[] textureFaces \u003d model.getTextureFaces();\n\t\tfinal int[] texIndices1 \u003d model.getTexIndices1();\n\t\tfinal int[] texIndices2 \u003d model.getTexIndices2();\n\t\tfinal int[] texIndices3 \u003d model.getTexIndices3();\n\n\t\tfinal byte[] transparencies \u003d model.getFaceTransparencies();\n\t\tfinal byte[] facePriorities \u003d model.getFaceRenderPriorities();\n\n\t\tfinal byte overrideAmount \u003d model.getOverrideAmount();\n\t\tfinal byte overrideHue \u003d model.getOverrideHue();\n\t\tfinal byte overrideSat \u003d model.getOverrideSaturation();\n\t\tfinal byte overrideLum \u003d model.getOverrideLuminance();\n\n\t\tint len \u003d 0;\n\t\tfor (int face \u003d 0; face \u003c triangleCount; ++face)\n\t\t{\n\t\t\tint color1 \u003d color1s[face];\n\t\t\tint color2 \u003d color2s[face];\n\t\t\tint color3 \u003d color3s[face];\n\n\t\t\tif (color3 \u003d\u003d -1)\n\t\t\t{\n\t\t\t\tcolor2 \u003d color3 \u003d color1;\n\t\t\t}\n\t\t\telse if (color3 \u003d\u003d -2)\n\t\t\t{\n\t\t\t\tvertexBuffer.put(0, 0, 0, 0);\n\t\t\t\tvertexBuffer.put(0, 0, 0, 0);\n\t\t\t\tvertexBuffer.put(0, 0, 0, 0);\n\n\t\t\t\tif (faceTextures !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tuvBuffer.put(0, 0, 0, 0);\n\t\t\t\t\tuvBuffer.put(0, 0, 0, 0);\n\t\t\t\t\tuvBuffer.put(0, 0, 0, 0);\n\t\t\t\t}\n\n\t\t\t\tlen +\u003d 3;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// HSL override is not applied to textured faces\n\t\t\tif (faceTextures \u003d\u003d null || faceTextures[face] \u003d\u003d -1)\n\t\t\t{\n\t\t\t\tif (overrideAmount \u003e 0)\n\t\t\t\t{\n\t\t\t\t\tcolor1 \u003d interpolateHSL(color1, overrideHue, overrideSat, overrideLum, overrideAmount);\n\t\t\t\t\tcolor2 \u003d interpolateHSL(color2, overrideHue, overrideSat, overrideLum, overrideAmount);\n\t\t\t\t\tcolor3 \u003d interpolateHSL(color3, overrideHue, overrideSat, overrideLum, overrideAmount);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tint packAlphaPriority \u003d packAlphaPriority(faceTextures, transparencies, facePriorities, face);\n\n\t\t\tint triangleA \u003d indices1[face];\n\t\t\tint triangleB \u003d indices2[face];\n\t\t\tint triangleC \u003d indices3[face];\n\n\t\t\tvertexBuffer.put(vertexX[triangleA], vertexY[triangleA], vertexZ[triangleA], packAlphaPriority | color1);\n\t\t\tvertexBuffer.put(vertexX[triangleB], vertexY[triangleB], vertexZ[triangleB], packAlphaPriority | color2);\n\t\t\tvertexBuffer.put(vertexX[triangleC], vertexY[triangleC], vertexZ[triangleC], packAlphaPriority | color3);\n\n\t\t\tif (faceTextures !\u003d null)\n\t\t\t{\n\t\t\t\tif (faceTextures[face] !\u003d -1)\n\t\t\t\t{\n\t\t\t\t\tint texA, texB, texC;\n\n\t\t\t\t\tif (textureFaces !\u003d null \u0026\u0026 textureFaces[face] !\u003d -1)\n\t\t\t\t\t{\n\t\t\t\t\t\tint tface \u003d textureFaces[face] \u0026 0xff;\n\t\t\t\t\t\ttexA \u003d texIndices1[tface];\n\t\t\t\t\t\ttexB \u003d texIndices2[tface];\n\t\t\t\t\t\ttexC \u003d texIndices3[tface];\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\ttexA \u003d triangleA;\n\t\t\t\t\t\ttexB \u003d triangleB;\n\t\t\t\t\t\ttexC \u003d triangleC;\n\t\t\t\t\t}\n\n\t\t\t\t\tint texture \u003d faceTextures[face] + 1;\n\t\t\t\t\tuvBuffer.put(texture, vertexX[texA], vertexY[texA], vertexZ[texA]);\n\t\t\t\t\tuvBuffer.put(texture, vertexX[texB], vertexY[texB], vertexZ[texB]);\n\t\t\t\t\tuvBuffer.put(texture, vertexX[texC], vertexY[texC], vertexZ[texC]);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tuvBuffer.put(0, 0, 0, 0);\n\t\t\t\t\tuvBuffer.put(0, 0, 0, 0);\n\t\t\t\t\tuvBuffer.put(0, 0, 0, 0);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlen +\u003d 3;\n\t\t}\n\n\t\treturn len;\n\t}\n\n\tprivate static int[] distances;\n\tprivate static char[] distanceFaceCount;\n\tprivate static char[][] distanceToFaces;\n\n\tprivate static float[] modelCanvasX;\n\tprivate static float[] modelCanvasY;\n\n\tprivate static float[] modelLocalX;\n\tprivate static float[] modelLocalY;\n\tprivate static float[] modelLocalZ;\n\n\tprivate static int[] numOfPriority;\n\tprivate static int[] eq10;\n\tprivate static int[] eq11;\n\tprivate static int[] lt10;\n\tprivate static int[][] orderedFaces;\n\n\tvoid initSortingBuffers()\n\t{\n\t\tint MAX_VERTEX_COUNT \u003d 6500;\n\t\tint MAX_DIAMETER \u003d 6000;\n\t\tint ZSORT_GROUP_SIZE \u003d 1024; // was 512\n\t\tint MAX_FACES_PER_PRIORITY \u003d 4000; // was 2000\n\n\t\tdistances \u003d new int[MAX_VERTEX_COUNT];\n\t\tdistanceFaceCount \u003d new char[MAX_DIAMETER];\n\t\tdistanceToFaces \u003d new char[MAX_DIAMETER][ZSORT_GROUP_SIZE];\n\n\t\tmodelCanvasX \u003d new float[MAX_VERTEX_COUNT];\n\t\tmodelCanvasY \u003d new float[MAX_VERTEX_COUNT];\n\n\t\tmodelLocalX \u003d new float[MAX_VERTEX_COUNT];\n\t\tmodelLocalY \u003d new float[MAX_VERTEX_COUNT];\n\t\tmodelLocalZ \u003d new float[MAX_VERTEX_COUNT];\n\n\t\tnumOfPriority \u003d new int[12];\n\t\teq10 \u003d new int[MAX_FACES_PER_PRIORITY];\n\t\teq11 \u003d new int[MAX_FACES_PER_PRIORITY];\n\t\tlt10 \u003d new int[12];\n\t\torderedFaces \u003d new int[12][MAX_FACES_PER_PRIORITY];\n\t}\n\n\tvoid releaseSortingBuffers()\n\t{\n\t\tdistances \u003d null;\n\t\tdistanceFaceCount \u003d null;\n\t\tdistanceToFaces \u003d null;\n\n\t\tmodelCanvasX \u003d null;\n\t\tmodelCanvasY \u003d null;\n\n\t\tmodelLocalX \u003d null;\n\t\tmodelLocalY \u003d null;\n\t\tmodelLocalZ \u003d null;\n\n\t\tnumOfPriority \u003d null;\n\t\teq10 \u003d null;\n\t\teq11 \u003d null;\n\t\tlt10 \u003d null;\n\t\torderedFaces \u003d null;\n\t}\n\n\tint pushSortedModel(Projection proj, Model model, int orientation, int x, int y, int z, GpuIntBuffer vertexBuffer, GpuFloatBuffer uvBuffer)\n\t{\n\t\tfinal int vertexCount \u003d model.getVerticesCount();\n\t\tfinal float[] verticesX \u003d model.getVerticesX();\n\t\tfinal float[] verticesY \u003d model.getVerticesY();\n\t\tfinal float[] verticesZ \u003d model.getVerticesZ();\n\n\t\tfinal int faceCount \u003d model.getFaceCount();\n\t\tfinal int[] indices1 \u003d model.getFaceIndices1();\n\t\tfinal int[] indices2 \u003d model.getFaceIndices2();\n\t\tfinal int[] indices3 \u003d model.getFaceIndices3();\n\n\t\tfinal int[] faceColors3 \u003d model.getFaceColors3();\n\t\tfinal byte[] faceRenderPriorities \u003d model.getFaceRenderPriorities();\n\n\t\tfinal int centerX \u003d client.getCenterX();\n\t\tfinal int centerY \u003d client.getCenterY();\n\t\tfinal int zoom \u003d client.get3dZoom();\n\n\t\tfloat orientSine \u003d 0;\n\t\tfloat orientCosine \u003d 0;\n\t\tif (orientation !\u003d 0)\n\t\t{\n\t\t\torientSine \u003d Perspective.SINE[orientation] / 65536f;\n\t\t\torientCosine \u003d Perspective.COSINE[orientation] / 65536f;\n\t\t}\n\n\t\tfloat[] p \u003d proj.project(x, y, z);\n\t\tint zero \u003d (int) p[2];\n\n\t\tfor (int v \u003d 0; v \u003c vertexCount; ++v)\n\t\t{\n\t\t\tfloat vertexX \u003d verticesX[v];\n\t\t\tfloat vertexY \u003d verticesY[v];\n\t\t\tfloat vertexZ \u003d verticesZ[v];\n\n\t\t\tif (orientation !\u003d 0)\n\t\t\t{\n\t\t\t\tfloat x0 \u003d vertexX;\n\t\t\t\tvertexX \u003d vertexZ * orientSine + x0 * orientCosine;\n\t\t\t\tvertexZ \u003d vertexZ * orientCosine - x0 * orientSine;\n\t\t\t}\n\n\t\t\t// move to local position\n\t\t\tvertexX +\u003d x;\n\t\t\tvertexY +\u003d y;\n\t\t\tvertexZ +\u003d z;\n\n\t\t\tmodelLocalX[v] \u003d vertexX;\n\t\t\tmodelLocalY[v] \u003d vertexY;\n\t\t\tmodelLocalZ[v] \u003d vertexZ;\n\n\t\t\tp \u003d proj.project(vertexX, vertexY, vertexZ);\n\t\t\tmodelCanvasX[v] \u003d centerX + p[0] * zoom / p[2];\n\t\t\tmodelCanvasY[v] \u003d centerY + p[1] * zoom / p[2];\n\t\t\tdistances[v] \u003d (int) p[2] - zero;\n\t\t}\n\n\t\tfinal int diameter \u003d model.getDiameter();\n\t\tfinal int radius \u003d model.getRadius();\n\t\tif (diameter \u003e\u003d 6000)\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\n\t\tArrays.fill(distanceFaceCount, 0, diameter, (char) 0);\n\n\t\tfor (char i \u003d 0; i \u003c faceCount; ++i)\n\t\t{\n\t\t\tif (faceColors3[i] !\u003d -2)\n\t\t\t{\n\t\t\t\tfinal int v1 \u003d indices1[i];\n\t\t\t\tfinal int v2 \u003d indices2[i];\n\t\t\t\tfinal int v3 \u003d indices3[i];\n\n\t\t\t\tfinal float\n\t\t\t\t\taX \u003d modelCanvasX[v1],\n\t\t\t\t\taY \u003d modelCanvasY[v1],\n\t\t\t\t\tbX \u003d modelCanvasX[v2],\n\t\t\t\t\tbY \u003d modelCanvasY[v2],\n\t\t\t\t\tcX \u003d modelCanvasX[v3],\n\t\t\t\t\tcY \u003d modelCanvasY[v3];\n\n\t\t\t\tif ((aX - bX) * (cY - bY) - (cX - bX) * (aY - bY) \u003e 0)\n\t\t\t\t{\n\t\t\t\t\tint distance \u003d radius + (distances[v1] + distances[v2] + distances[v3]) / 3;\n\t\t\t\t\tassert distance \u003e\u003d 0 \u0026\u0026 distance \u003c diameter;\n\t\t\t\t\tdistanceToFaces[distance][distanceFaceCount[distance]++] \u003d i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvertexBuffer.ensureCapacity(12 * faceCount);\n\t\tuvBuffer.ensureCapacity(12 * faceCount);\n\n\t\tint len \u003d 0;\n\t\tif (faceRenderPriorities \u003d\u003d null)\n\t\t{\n\t\t\tfor (int i \u003d diameter - 1; i \u003e\u003d 0; --i)\n\t\t\t{\n\t\t\t\tfinal int cnt \u003d distanceFaceCount[i];\n\t\t\t\tif (cnt \u003e 0)\n\t\t\t\t{\n\t\t\t\t\tfinal char[] faces \u003d distanceToFaces[i];\n\n\t\t\t\t\tfor (int faceIdx \u003d 0; faceIdx \u003c cnt; ++faceIdx)\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal int face \u003d faces[faceIdx];\n\t\t\t\t\t\tlen +\u003d pushFace(model, face, vertexBuffer, uvBuffer);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tArrays.fill(numOfPriority, 0);\n\t\t\tArrays.fill(lt10, 0);\n\n\t\t\tfor (int i \u003d diameter - 1; i \u003e\u003d 0; --i)\n\t\t\t{\n\t\t\t\tfinal int cnt \u003d distanceFaceCount[i];\n\t\t\t\tif (cnt \u003e 0)\n\t\t\t\t{\n\t\t\t\t\tfinal char[] faces \u003d distanceToFaces[i];\n\n\t\t\t\t\tfor (int faceIdx \u003d 0; faceIdx \u003c cnt; ++faceIdx)\n\t\t\t\t\t{\n\t\t\t\t\t\tfinal int face \u003d faces[faceIdx];\n\t\t\t\t\t\tfinal byte pri \u003d faceRenderPriorities[face];\n\t\t\t\t\t\tfinal int distIdx \u003d numOfPriority[pri]++;\n\n\t\t\t\t\t\torderedFaces[pri][distIdx] \u003d face;\n\t\t\t\t\t\tif (pri \u003c 10)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlt10[pri] +\u003d i;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (pri \u003d\u003d 10)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\teq10[distIdx] \u003d i;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\teq11[distIdx] \u003d i;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tint avg12 \u003d 0;\n\t\t\tif (numOfPriority[1] \u003e 0 || numOfPriority[2] \u003e 0)\n\t\t\t{\n\t\t\t\tavg12 \u003d (lt10[1] + lt10[2]) / (numOfPriority[1] + numOfPriority[2]);\n\t\t\t}\n\n\t\t\tint avg34 \u003d 0;\n\t\t\tif (numOfPriority[3] \u003e 0 || numOfPriority[4] \u003e 0)\n\t\t\t{\n\t\t\t\tavg34 \u003d (lt10[3] + lt10[4]) / (numOfPriority[3] + numOfPriority[4]);\n\t\t\t}\n\n\t\t\tint avg68 \u003d 0;\n\t\t\tif (numOfPriority[6] \u003e 0 || numOfPriority[8] \u003e 0)\n\t\t\t{\n\t\t\t\tavg68 \u003d (lt10[8] + lt10[6]) / (numOfPriority[8] + numOfPriority[6]);\n\t\t\t}\n\n\t\t\tint drawnFaces \u003d 0;\n\t\t\tint numDynFaces \u003d numOfPriority[10];\n\t\t\tint[] dynFaces \u003d orderedFaces[10];\n\t\t\tint[] dynFaceDistances \u003d eq10;\n\t\t\tif (drawnFaces \u003d\u003d numDynFaces)\n\t\t\t{\n\t\t\t\tdrawnFaces \u003d 0;\n\t\t\t\tnumDynFaces \u003d numOfPriority[11];\n\t\t\t\tdynFaces \u003d orderedFaces[11];\n\t\t\t\tdynFaceDistances \u003d eq11;\n\t\t\t}\n\n\t\t\tint currFaceDistance;\n\t\t\tif (drawnFaces \u003c numDynFaces)\n\t\t\t{\n\t\t\t\tcurrFaceDistance \u003d dynFaceDistances[drawnFaces];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcurrFaceDistance \u003d -1000;\n\t\t\t}\n\n\t\t\tfor (int pri \u003d 0; pri \u003c 10; ++pri)\n\t\t\t{\n\t\t\t\twhile (pri \u003d\u003d 0 \u0026\u0026 currFaceDistance \u003e avg12)\n\t\t\t\t{\n\t\t\t\t\tfinal int face \u003d dynFaces[drawnFaces++];\n\t\t\t\t\tlen +\u003d pushFace(model, face, vertexBuffer, uvBuffer);\n\n\t\t\t\t\tif (drawnFaces \u003d\u003d numDynFaces \u0026\u0026 dynFaces !\u003d orderedFaces[11])\n\t\t\t\t\t{\n\t\t\t\t\t\tdrawnFaces \u003d 0;\n\t\t\t\t\t\tnumDynFaces \u003d numOfPriority[11];\n\t\t\t\t\t\tdynFaces \u003d orderedFaces[11];\n\t\t\t\t\t\tdynFaceDistances \u003d eq11;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (drawnFaces \u003c numDynFaces)\n\t\t\t\t\t{\n\t\t\t\t\t\tcurrFaceDistance \u003d dynFaceDistances[drawnFaces];\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tcurrFaceDistance \u003d -1000;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\twhile (pri \u003d\u003d 3 \u0026\u0026 currFaceDistance \u003e avg34)\n\t\t\t\t{\n\t\t\t\t\tfinal int face \u003d dynFaces[drawnFaces++];\n\t\t\t\t\tlen +\u003d pushFace(model, face, vertexBuffer, uvBuffer);\n\n\t\t\t\t\tif (drawnFaces \u003d\u003d numDynFaces \u0026\u0026 dynFaces !\u003d orderedFaces[11])\n\t\t\t\t\t{\n\t\t\t\t\t\tdrawnFaces \u003d 0;\n\t\t\t\t\t\tnumDynFaces \u003d numOfPriority[11];\n\t\t\t\t\t\tdynFaces \u003d orderedFaces[11];\n\t\t\t\t\t\tdynFaceDistances \u003d eq11;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (drawnFaces \u003c numDynFaces)\n\t\t\t\t\t{\n\t\t\t\t\t\tcurrFaceDistance \u003d dynFaceDistances[drawnFaces];\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tcurrFaceDistance \u003d -1000;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\twhile (pri \u003d\u003d 5 \u0026\u0026 currFaceDistance \u003e avg68)\n\t\t\t\t{\n\t\t\t\t\tfinal int face \u003d dynFaces[drawnFaces++];\n\t\t\t\t\tlen +\u003d pushFace(model, face, vertexBuffer, uvBuffer);\n\n\t\t\t\t\tif (drawnFaces \u003d\u003d numDynFaces \u0026\u0026 dynFaces !\u003d orderedFaces[11])\n\t\t\t\t\t{\n\t\t\t\t\t\tdrawnFaces \u003d 0;\n\t\t\t\t\t\tnumDynFaces \u003d numOfPriority[11];\n\t\t\t\t\t\tdynFaces \u003d orderedFaces[11];\n\t\t\t\t\t\tdynFaceDistances \u003d eq11;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (drawnFaces \u003c numDynFaces)\n\t\t\t\t\t{\n\t\t\t\t\t\tcurrFaceDistance \u003d dynFaceDistances[drawnFaces];\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tcurrFaceDistance \u003d -1000;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfinal int priNum \u003d numOfPriority[pri];\n\t\t\t\tfinal int[] priFaces \u003d orderedFaces[pri];\n\n\t\t\t\tfor (int faceIdx \u003d 0; faceIdx \u003c priNum; ++faceIdx)\n\t\t\t\t{\n\t\t\t\t\tfinal int face \u003d priFaces[faceIdx];\n\t\t\t\t\tlen +\u003d pushFace(model, face, vertexBuffer, uvBuffer);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\twhile (currFaceDistance !\u003d -1000)\n\t\t\t{\n\t\t\t\tfinal int face \u003d dynFaces[drawnFaces++];\n\t\t\t\tlen +\u003d pushFace(model, face, vertexBuffer, uvBuffer);\n\n\t\t\t\tif (drawnFaces \u003d\u003d numDynFaces \u0026\u0026 dynFaces !\u003d orderedFaces[11])\n\t\t\t\t{\n\t\t\t\t\tdrawnFaces \u003d 0;\n\t\t\t\t\tdynFaces \u003d orderedFaces[11];\n\t\t\t\t\tnumDynFaces \u003d numOfPriority[11];\n\t\t\t\t\tdynFaceDistances \u003d eq11;\n\t\t\t\t}\n\n\t\t\t\tif (drawnFaces \u003c numDynFaces)\n\t\t\t\t{\n\t\t\t\t\tcurrFaceDistance \u003d dynFaceDistances[drawnFaces];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcurrFaceDistance \u003d -1000;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn len;\n\t}\n\n\tprivate int pushFace(Model model, int face, GpuIntBuffer vertexBuffer, GpuFloatBuffer uvBuffer)\n\t{\n\t\tfinal int[] indices1 \u003d model.getFaceIndices1();\n\t\tfinal int[] indices2 \u003d model.getFaceIndices2();\n\t\tfinal int[] indices3 \u003d model.getFaceIndices3();\n\n\t\tfinal int[] faceColors1 \u003d model.getFaceColors1();\n\t\tfinal int[] faceColors2 \u003d model.getFaceColors2();\n\t\tfinal int[] faceColors3 \u003d model.getFaceColors3();\n\n\t\tfinal byte overrideAmount \u003d model.getOverrideAmount();\n\t\tfinal byte overrideHue \u003d model.getOverrideHue();\n\t\tfinal byte overrideSat \u003d model.getOverrideSaturation();\n\t\tfinal byte overrideLum \u003d model.getOverrideLuminance();\n\n\t\tfinal short[] faceTextures \u003d model.getFaceTextures();\n\t\tfinal byte[] textureFaces \u003d model.getTextureFaces();\n\t\tfinal int[] texIndices1 \u003d model.getTexIndices1();\n\t\tfinal int[] texIndices2 \u003d model.getTexIndices2();\n\t\tfinal int[] texIndices3 \u003d model.getTexIndices3();\n\n\t\tfinal byte[] faceRenderPriorities \u003d model.getFaceRenderPriorities();\n\t\tfinal byte[] transparencies \u003d model.getFaceTransparencies();\n\n\t\tfinal int packAlphaPriority \u003d packAlphaPriority(faceTextures, transparencies, faceRenderPriorities, face);\n\n\t\tfinal int triangleA \u003d indices1[face];\n\t\tfinal int triangleB \u003d indices2[face];\n\t\tfinal int triangleC \u003d indices3[face];\n\n\t\tint color1 \u003d faceColors1[face];\n\t\tint color2 \u003d faceColors2[face];\n\t\tint color3 \u003d faceColors3[face];\n\n\t\tif (color3 \u003d\u003d -1)\n\t\t{\n\t\t\tcolor2 \u003d color3 \u003d color1;\n\t\t}\n\n\t\t// HSL override is not applied to textured faces\n\t\tif (faceTextures \u003d\u003d null || faceTextures[face] \u003d\u003d -1)\n\t\t{\n\t\t\tif (overrideAmount \u003e 0)\n\t\t\t{\n\t\t\t\tcolor1 \u003d interpolateHSL(color1, overrideHue, overrideSat, overrideLum, overrideAmount);\n\t\t\t\tcolor2 \u003d interpolateHSL(color2, overrideHue, overrideSat, overrideLum, overrideAmount);\n\t\t\t\tcolor3 \u003d interpolateHSL(color3, overrideHue, overrideSat, overrideLum, overrideAmount);\n\t\t\t}\n\t\t}\n\n\t\tvertexBuffer.put(modelLocalX[triangleA], modelLocalY[triangleA], modelLocalZ[triangleA], packAlphaPriority | color1);\n\t\tvertexBuffer.put(modelLocalX[triangleB], modelLocalY[triangleB], modelLocalZ[triangleB], packAlphaPriority | color2);\n\t\tvertexBuffer.put(modelLocalX[triangleC], modelLocalY[triangleC], modelLocalZ[triangleC], packAlphaPriority | color3);\n\n\t\tif (faceTextures !\u003d null \u0026\u0026 faceTextures[face] !\u003d -1)\n\t\t{\n\t\t\tint texA, texB, texC;\n\n\t\t\tif (textureFaces !\u003d null \u0026\u0026 textureFaces[face] !\u003d -1)\n\t\t\t{\n\t\t\t\tint tfaceIdx \u003d textureFaces[face] \u0026 0xff;\n\t\t\t\ttexA \u003d texIndices1[tfaceIdx];\n\t\t\t\ttexB \u003d texIndices2[tfaceIdx];\n\t\t\t\ttexC \u003d texIndices3[tfaceIdx];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttexA \u003d triangleA;\n\t\t\t\ttexB \u003d triangleB;\n\t\t\t\ttexC \u003d triangleC;\n\t\t\t}\n\n\t\t\tint texture \u003d faceTextures[face] + 1;\n\t\t\tuvBuffer.put(texture, modelLocalX[texA], modelLocalY[texA], modelLocalZ[texA]);\n\t\t\tuvBuffer.put(texture, modelLocalX[texB], modelLocalY[texB], modelLocalZ[texB]);\n\t\t\tuvBuffer.put(texture, modelLocalX[texC], modelLocalY[texC], modelLocalZ[texC]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tuvBuffer.put(0, 0, 0, 0);\n\t\t\tuvBuffer.put(0, 0, 0, 0);\n\t\t\tuvBuffer.put(0, 0, 0, 0);\n\t\t}\n\n\t\treturn 3;\n\t}\n\n\tprivate static int packAlphaPriority(short[] faceTextures, byte[] faceTransparencies, byte[] facePriorities, int face)\n\t{\n\t\tint alpha \u003d 0;\n\t\tif (faceTransparencies !\u003d null)\n\t\t{\n\t\t\talpha \u003d (faceTransparencies[face] \u0026 0xFF) \u003c\u003c 24;\n\t\t}\n\t\tint priority \u003d 0;\n\t\tif (facePriorities !\u003d null)\n\t\t{\n\t\t\tpriority \u003d (facePriorities[face] \u0026 0xff) \u003c\u003c 16;\n\t\t}\n\t\treturn alpha | priority;\n\t}\n\n\tprivate static int interpolateHSL(int hsl, byte hue2, byte sat2, byte lum2, byte lerp)\n\t{\n\t\tint hue \u003d hsl \u003e\u003e 10 \u0026 63;\n\t\tint sat \u003d hsl \u003e\u003e 7 \u0026 7;\n\t\tint lum \u003d hsl \u0026 127;\n\t\tint var9 \u003d lerp \u0026 255;\n\t\tif (hue2 !\u003d -1)\n\t\t{\n\t\t\thue +\u003d var9 * (hue2 - hue) \u003e\u003e 7;\n\t\t}\n\n\t\tif (sat2 !\u003d -1)\n\t\t{\n\t\t\tsat +\u003d var9 * (sat2 - sat) \u003e\u003e 7;\n\t\t}\n\n\t\tif (lum2 !\u003d -1)\n\t\t{\n\t\t\tlum +\u003d var9 * (lum2 - lum) \u003e\u003e 7;\n\t\t}\n\n\t\treturn (hue \u003c\u003c 10 | sat \u003c\u003c 7 | lum) \u0026 65535;\n\t}\n\n\t// remove tiles from the scene that are outside the current region\n\tprivate void prepare(Scene scene)\n\t{\n\t\tif (scene.isInstance() || !gpuConfig.hideUnrelatedMaps())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tint baseX \u003d scene.getBaseX() / 8;\n\t\tint baseY \u003d scene.getBaseY() / 8;\n\t\tint centerX \u003d baseX + 6;\n\t\tint centerY \u003d baseY + 6;\n\t\tint centerId \u003d regions.getRegionId(centerX, centerY);\n\n\t\tint r \u003d Constants.EXTENDED_SCENE_SIZE / 16;\n\t\tfor (int offx \u003d -r; offx \u003c\u003d r; ++offx)\n\t\t{\n\t\t\tfor (int offy \u003d -r; offy \u003c\u003d r; ++offy)\n\t\t\t{\n\t\t\t\tint cx \u003d centerX + offx;\n\t\t\t\tint cy \u003d centerY + offy;\n\t\t\t\tint id \u003d regions.getRegionId(cx, cy);\n\t\t\t\tif (id !\u003d centerId)\n\t\t\t\t{\n\t\t\t\t\tremoveChunk(scene, cx, cy);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate static void removeChunk(Scene scene, int cx, int cy)\n\t{\n\t\tint wx \u003d cx * 8;\n\t\tint wy \u003d cy * 8;\n\t\tint sx \u003d wx - scene.getBaseX();\n\t\tint sy \u003d wy - scene.getBaseY();\n\t\tint cmsx \u003d sx + GpuPlugin.SCENE_OFFSET;\n\t\tint cmsy \u003d sy + GpuPlugin.SCENE_OFFSET;\n\t\tTile[][][] tiles \u003d scene.getExtendedTiles();\n\t\tfor (int x \u003d 0; x \u003c 8; ++x)\n\t\t{\n\t\t\tfor (int y \u003d 0; y \u003c 8; ++y)\n\t\t\t{\n\t\t\t\tint msx \u003d cmsx + x;\n\t\t\t\tint msy \u003d cmsy + y;\n\t\t\t\tif (msx \u003e\u003d 0 \u0026\u0026 msx \u003c Constants.EXTENDED_SCENE_SIZE \u0026\u0026 msy \u003e\u003d 0 \u0026\u0026 msy \u003c Constants.EXTENDED_SCENE_SIZE)\n\t\t\t\t{\n\t\t\t\t\tfor (int z \u003d 0; z \u003c Constants.MAX_Z; ++z)\n\t\t\t\t\t{\n\t\t\t\t\t\tTile tile \u003d tiles[z][msx][msy];\n\t\t\t\t\t\tif (tile !\u003d null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tscene.removeTile(tile);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\info\\sigterm\\plugins\\gpulegacy\\SceneUploader.java"},{"fileName":"Shader.java","content":"/*\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * Copyright (c) 2020 Abex\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage info.sigterm.plugins.gpulegacy;\n\nimport com.google.common.annotations.VisibleForTesting;\nimport java.util.ArrayList;\nimport java.util.List;\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport info.sigterm.plugins.gpulegacy.template.Template;\nimport org.lwjgl.opengl.GL43C;\n\npublic class Shader\n{\n\t@VisibleForTesting\n\tfinal List\u003cUnit\u003e units \u003d new ArrayList\u003c\u003e();\n\n\t@RequiredArgsConstructor\n\t@VisibleForTesting\n\tstatic class Unit\n\t{\n\t\t@Getter\n\t\tprivate final int type;\n\n\t\t@Getter\n\t\tprivate final String filename;\n\t}\n\n\tpublic Shader add(int type, String name)\n\t{\n\t\tunits.add(new Unit(type, name));\n\t\treturn this;\n\t}\n\n\tpublic int compile(Template template) throws ShaderException\n\t{\n\t\tint program \u003d GL43C.glCreateProgram();\n\t\tint[] shaders \u003d new int[units.size()];\n\t\tint i \u003d 0;\n\t\tboolean ok \u003d false;\n\t\ttry\n\t\t{\n\t\t\twhile (i \u003c shaders.length)\n\t\t\t{\n\t\t\t\tUnit unit \u003d units.get(i);\n\t\t\t\tint shader \u003d GL43C.glCreateShader(unit.type);\n\t\t\t\tif (shader \u003d\u003d 0)\n\t\t\t\t{\n\t\t\t\t\tthrow new ShaderException(\"Unable to create shader of type \" + unit.type);\n\t\t\t\t}\n\n\t\t\t\tString source \u003d template.load(unit.filename);\n\t\t\t\tGL43C.glShaderSource(shader, source);\n\t\t\t\tGL43C.glCompileShader(shader);\n\n\t\t\t\tif (GL43C.glGetShaderi(shader, GL43C.GL_COMPILE_STATUS) !\u003d GL43C.GL_TRUE)\n\t\t\t\t{\n\t\t\t\t\tString err \u003d GL43C.glGetShaderInfoLog(shader);\n\t\t\t\t\tGL43C.glDeleteShader(shader);\n\t\t\t\t\tthrow new ShaderException(err);\n\t\t\t\t}\n\t\t\t\tGL43C.glAttachShader(program, shader);\n\t\t\t\tshaders[i++] \u003d shader;\n\t\t\t}\n\n\t\t\tGL43C.glLinkProgram(program);\n\n\t\t\tif (GL43C.glGetProgrami(program, GL43C.GL_LINK_STATUS) \u003d\u003d GL43C.GL_FALSE)\n\t\t\t{\n\t\t\t\tString err \u003d GL43C.glGetProgramInfoLog(program);\n\t\t\t\tthrow new ShaderException(err);\n\t\t\t}\n\n\t\t\tGL43C.glValidateProgram(program);\n\n\t\t\tif (GL43C.glGetProgrami(program, GL43C.GL_VALIDATE_STATUS) \u003d\u003d GL43C.GL_FALSE)\n\t\t\t{\n\t\t\t\tString err \u003d GL43C.glGetProgramInfoLog(program);\n\t\t\t\tthrow new ShaderException(err);\n\t\t\t}\n\n\t\t\tok \u003d true;\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\twhile (i \u003e 0)\n\t\t\t{\n\t\t\t\tint shader \u003d shaders[--i];\n\t\t\t\tGL43C.glDetachShader(program, shader);\n\t\t\t\tGL43C.glDeleteShader(shader);\n\t\t\t}\n\n\t\t\tif (!ok)\n\t\t\t{\n\t\t\t\tGL43C.glDeleteProgram(program);\n\t\t\t}\n\t\t}\n\n\t\treturn program;\n\t}\n}\n","filePath":"src\\main\\java\\info\\sigterm\\plugins\\gpulegacy\\Shader.java"},{"fileName":"ShaderException.java","content":"/*\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage info.sigterm.plugins.gpulegacy;\n\nclass ShaderException extends Exception\n{\n\tShaderException(String message)\n\t{\n\t\tsuper(message);\n\t}\n}\n","filePath":"src\\main\\java\\info\\sigterm\\plugins\\gpulegacy\\ShaderException.java"},{"fileName":"Template.java","content":"/*\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage info.sigterm.plugins.gpulegacy.template;\n\nimport com.google.common.io.CharStreams;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.nio.charset.StandardCharsets;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.Function;\nimport lombok.extern.slf4j.Slf4j;\n\n@Slf4j\npublic class Template\n{\n\tprivate final List\u003cFunction\u003cString, String\u003e\u003e resourceLoaders \u003d new ArrayList\u003c\u003e();\n\n\tpublic String process(String str)\n\t{\n\t\tStringBuilder sb \u003d new StringBuilder();\n\t\tfor (String line : str.split(\"\\r?\\n\"))\n\t\t{\n\t\t\tif (line.startsWith(\"#include \"))\n\t\t\t{\n\t\t\t\tString resource \u003d line.substring(9);\n\t\t\t\tif (resource.startsWith(\"\\\"\") \u0026\u0026 resource.endsWith(\"\\\"\"))\n\t\t\t\t{\n\t\t\t\t\tresource \u003d resource.substring(1, resource.length() - 1);\n\t\t\t\t}\n\n\t\t\t\tString resourceStr \u003d load(resource);\n\t\t\t\tsb.append(resourceStr);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsb.append(line).append(\u0027\\n\u0027);\n\t\t\t}\n\t\t}\n\t\treturn sb.toString();\n\t}\n\n\tpublic String load(String filename)\n\t{\n\t\tfor (Function\u003cString, String\u003e loader : resourceLoaders)\n\t\t{\n\t\t\tString value \u003d loader.apply(filename);\n\t\t\tif (value !\u003d null)\n\t\t\t{\n\t\t\t\treturn process(value);\n\t\t\t}\n\t\t}\n\n\t\treturn \"\";\n\t}\n\n\tpublic Template add(Function\u003cString, String\u003e fn)\n\t{\n\t\tresourceLoaders.add(fn);\n\t\treturn this;\n\t}\n\n\tpublic Template addInclude(Class\u003c?\u003e clazz)\n\t{\n\t\treturn add(f -\u003e\n\t\t{\n\t\t\ttry (InputStream is \u003d clazz.getResourceAsStream(f))\n\t\t\t{\n\t\t\t\tif (is !\u003d null)\n\t\t\t\t{\n\t\t\t\t\treturn inputStreamToString(is);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (IOException ex)\n\t\t\t{\n\t\t\t\tlog.warn(null, ex);\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\t}\n\n\tprivate static String inputStreamToString(InputStream in)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn CharStreams.toString(new InputStreamReader(in, StandardCharsets.UTF_8));\n\t\t}\n\t\tcatch (IOException e)\n\t\t{\n\t\t\tthrow new RuntimeException(e);\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\info\\sigterm\\plugins\\gpulegacy\\template\\Template.java"},{"fileName":"TextureManager.java","content":"/*\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage info.sigterm.plugins.gpulegacy;\n\nimport java.nio.ByteBuffer;\nimport javax.inject.Singleton;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Texture;\nimport net.runelite.api.TextureProvider;\nimport org.lwjgl.opengl.EXTTextureFilterAnisotropic;\nimport org.lwjgl.opengl.GL;\nimport org.lwjgl.opengl.GL43C;\n\n@Singleton\n@Slf4j\nclass TextureManager\n{\n\tstatic final int TEXTURE_COUNT \u003d 256;\n\tprivate static final int TEXTURE_SIZE \u003d 128;\n\n\tint initTextureArray(TextureProvider textureProvider)\n\t{\n\t\tif (!allTexturesLoaded(textureProvider))\n\t\t{\n\t\t\treturn -1;\n\t\t}\n\n\t\tTexture[] textures \u003d textureProvider.getTextures();\n\n\t\tint textureArrayId \u003d GL43C.glGenTextures();\n\t\tGL43C.glBindTexture(GL43C.GL_TEXTURE_2D_ARRAY, textureArrayId);\n\t\tif (GL.getCapabilities().glTexStorage3D !\u003d 0)\n\t\t{\n\t\t\tGL43C.glTexStorage3D(GL43C.GL_TEXTURE_2D_ARRAY, 8, GL43C.GL_RGBA8, TEXTURE_SIZE, TEXTURE_SIZE, textures.length);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tint size \u003d TEXTURE_SIZE;\n\t\t\tfor (int i \u003d 0; i \u003c 8; i++)\n\t\t\t{\n\t\t\t\tGL43C.glTexImage3D(GL43C.GL_TEXTURE_2D_ARRAY, i, GL43C.GL_RGBA8, size, size, textures.length, 0, GL43C.GL_RGBA, GL43C.GL_UNSIGNED_BYTE, 0);\n\t\t\t\tsize /\u003d 2;\n\t\t\t}\n\t\t}\n\n\t\tGL43C.glTexParameteri(GL43C.GL_TEXTURE_2D_ARRAY, GL43C.GL_TEXTURE_MIN_FILTER, GL43C.GL_NEAREST);\n\t\tGL43C.glTexParameteri(GL43C.GL_TEXTURE_2D_ARRAY, GL43C.GL_TEXTURE_MAG_FILTER, GL43C.GL_NEAREST);\n\n\t\tGL43C.glTexParameteri(GL43C.GL_TEXTURE_2D_ARRAY, GL43C.GL_TEXTURE_WRAP_S, GL43C.GL_CLAMP_TO_EDGE);\n\n\t\t// Set brightness to 1.0d to upload unmodified textures to GPU\n\t\tdouble save \u003d textureProvider.getBrightness();\n\t\ttextureProvider.setBrightness(1.0d);\n\n\t\tupdateTextures(textureProvider, textureArrayId);\n\n\t\ttextureProvider.setBrightness(save);\n\n\t\tGL43C.glActiveTexture(GL43C.GL_TEXTURE1);\n\t\tGL43C.glBindTexture(GL43C.GL_TEXTURE_2D_ARRAY, textureArrayId);\n\t\tGL43C.glGenerateMipmap(GL43C.GL_TEXTURE_2D_ARRAY);\n\t\tGL43C.glActiveTexture(GL43C.GL_TEXTURE0);\n\n\t\treturn textureArrayId;\n\t}\n\n\tvoid setAnisotropicFilteringLevel(int textureArrayId, int level)\n\t{\n\t\tGL43C.glBindTexture(GL43C.GL_TEXTURE_2D_ARRAY, textureArrayId);\n\n\t\t//level \u003d 0 means no mipmaps and no anisotropic filtering\n\t\tif (level \u003d\u003d 0)\n\t\t{\n\t\t\tGL43C.glTexParameteri(GL43C.GL_TEXTURE_2D_ARRAY, GL43C.GL_TEXTURE_MIN_FILTER, GL43C.GL_NEAREST);\n\t\t}\n\t\t//level \u003d 1 means with mipmaps but without anisotropic filtering GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT defaults to 1.0 which is off\n\t\t//level \u003e 1 enables anisotropic filtering. It\u0027s up to the vendor what the values mean\n\t\t//Even if anisotropic filtering isn\u0027t supported, mipmaps will be enabled with any level \u003e\u003d 1\n\t\telse\n\t\t{\n\t\t\t// Set on GL_NEAREST_MIPMAP_LINEAR (bilinear filtering with mipmaps) since the pixel nature of the game means that nearest filtering\n\t\t\t// looks best for objects up close but allows linear filtering to resolve possible aliasing and noise with mipmaps from far away objects.\n\t\t\tGL43C.glTexParameteri(GL43C.GL_TEXTURE_2D_ARRAY, GL43C.GL_TEXTURE_MIN_FILTER, GL43C.GL_NEAREST_MIPMAP_LINEAR);\n\t\t}\n\n\t\tif (GL.getCapabilities().GL_EXT_texture_filter_anisotropic)\n\t\t{\n\t\t\tfinal float maxSamples \u003d GL43C.glGetFloat(EXTTextureFilterAnisotropic.GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT);\n\t\t\t//Clamp from 1 to max GL says it supports.\n\t\t\tfinal float anisoLevel \u003d Math.max(1, Math.min(maxSamples, level));\n\t\t\tGL43C.glTexParameterf(GL43C.GL_TEXTURE_2D_ARRAY, EXTTextureFilterAnisotropic.GL_TEXTURE_MAX_ANISOTROPY_EXT, anisoLevel);\n\t\t}\n\t}\n\n\tvoid freeTextureArray(int textureArrayId)\n\t{\n\t\tGL43C.glDeleteTextures(textureArrayId);\n\t}\n\n\t/**\n\t * Check if all textures have been loaded and cached yet.\n\t *\n\t * @param textureProvider\n\t * @return\n\t */\n\tprivate boolean allTexturesLoaded(TextureProvider textureProvider)\n\t{\n\t\tTexture[] textures \u003d textureProvider.getTextures();\n\t\tif (textures \u003d\u003d null || textures.length \u003d\u003d 0)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (int textureId \u003d 0; textureId \u003c textures.length; textureId++)\n\t\t{\n\t\t\tTexture texture \u003d textures[textureId];\n\t\t\tif (texture !\u003d null)\n\t\t\t{\n\t\t\t\tint[] pixels \u003d textureProvider.load(textureId);\n\t\t\t\tif (pixels \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprivate void updateTextures(TextureProvider textureProvider, int textureArrayId)\n\t{\n\t\tTexture[] textures \u003d textureProvider.getTextures();\n\n\t\tGL43C.glBindTexture(GL43C.GL_TEXTURE_2D_ARRAY, textureArrayId);\n\n\t\tint cnt \u003d 0;\n\t\tfor (int textureId \u003d 0; textureId \u003c textures.length; textureId++)\n\t\t{\n\t\t\tTexture texture \u003d textures[textureId];\n\t\t\tif (texture !\u003d null)\n\t\t\t{\n\t\t\t\tint[] srcPixels \u003d textureProvider.load(textureId);\n\t\t\t\tif (srcPixels \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tlog.warn(\"No pixels for texture {}!\", textureId);\n\t\t\t\t\tcontinue; // this can\u0027t happen\n\t\t\t\t}\n\n\t\t\t\t++cnt;\n\n\t\t\t\tif (srcPixels.length !\u003d TEXTURE_SIZE * TEXTURE_SIZE)\n\t\t\t\t{\n\t\t\t\t\t// The texture storage is 128x128 bytes, and will only work correctly with the\n\t\t\t\t\t// 128x128 textures from high detail mode\n\t\t\t\t\tlog.warn(\"Texture size for {} is {}!\", textureId, srcPixels.length);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tbyte[] pixels \u003d convertPixels(srcPixels, TEXTURE_SIZE, TEXTURE_SIZE, TEXTURE_SIZE, TEXTURE_SIZE);\n\t\t\t\tByteBuffer pixelBuffer \u003d ByteBuffer.allocateDirect(pixels.length);\n\t\t\t\tpixelBuffer.put(pixels);\n\t\t\t\tpixelBuffer.flip();\n\t\t\t\tGL43C.glTexSubImage3D(GL43C.GL_TEXTURE_2D_ARRAY, 0, 0, 0, textureId, TEXTURE_SIZE, TEXTURE_SIZE,\n\t\t\t\t\t1, GL43C.GL_RGBA, GL43C.GL_UNSIGNED_BYTE, pixelBuffer);\n\t\t\t}\n\t\t}\n\n\t\tlog.debug(\"Uploaded textures {}\", cnt);\n\t}\n\n\tprivate static byte[] convertPixels(int[] srcPixels, int width, int height, int textureWidth, int textureHeight)\n\t{\n\t\tbyte[] pixels \u003d new byte[textureWidth * textureHeight * 4];\n\n\t\tint pixelIdx \u003d 0;\n\t\tint srcPixelIdx \u003d 0;\n\n\t\tint offset \u003d (textureWidth - width) * 4;\n\n\t\tfor (int y \u003d 0; y \u003c height; y++)\n\t\t{\n\t\t\tfor (int x \u003d 0; x \u003c width; x++)\n\t\t\t{\n\t\t\t\tint rgb \u003d srcPixels[srcPixelIdx++];\n\t\t\t\tif (rgb !\u003d 0)\n\t\t\t\t{\n\t\t\t\t\tpixels[pixelIdx++] \u003d (byte) (rgb \u003e\u003e 16);\n\t\t\t\t\tpixels[pixelIdx++] \u003d (byte) (rgb \u003e\u003e 8);\n\t\t\t\t\tpixels[pixelIdx++] \u003d (byte) rgb;\n\t\t\t\t\tpixels[pixelIdx++] \u003d (byte) -1;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tpixelIdx +\u003d 4;\n\t\t\t\t}\n\t\t\t}\n\t\t\tpixelIdx +\u003d offset;\n\t\t}\n\t\treturn pixels;\n\t}\n\n\tfloat[] computeTextureAnimations(TextureProvider textureProvider)\n\t{\n\t\tTexture[] textures \u003d textureProvider.getTextures();\n\n\t\tif (textures.length \u003e TEXTURE_COUNT)\n\t\t{\n\t\t\tlog.warn(\"texture limit exceeded: {} \u003e {}\", textures.length, TEXTURE_COUNT);\n\t\t}\n\n\t\tfloat[] anims \u003d new float[TEXTURE_COUNT * 2];\n\t\tfor (int i \u003d 0; i \u003c Math.min(TEXTURE_COUNT, textures.length); ++i)\n\t\t{\n\t\t\tTexture texture \u003d textures[i];\n\t\t\tif (texture \u003d\u003d null)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfloat u \u003d 0f, v \u003d 0f;\n\t\t\tswitch (texture.getAnimationDirection())\n\t\t\t{\n\t\t\t\tcase 1:\n\t\t\t\t\tv \u003d -1f;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\tv \u003d 1f;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tu \u003d -1f;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\tu \u003d 1f;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tint speed \u003d texture.getAnimationSpeed();\n\t\t\tu *\u003d speed;\n\t\t\tv *\u003d speed;\n\n\t\t\tanims[i * 2] \u003d u;\n\t\t\tanims[i * 2 + 1] \u003d v;\n\t\t}\n\t\treturn anims;\n\t}\n}\n","filePath":"src\\main\\java\\info\\sigterm\\plugins\\gpulegacy\\TextureManager.java"},{"fileName":"ExamplePluginTest.java","content":"package com.example;\n\nimport info.sigterm.plugins.gpulegacy.GpuPlugin;\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ExamplePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(GpuPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\example\\ExamplePluginTest.java"}]},{"commit":"b288ac5c94b385f8fe0250b70bfa89256002c288","repository":"https://github.com/NorbsCode/item-link.git","internalName":"item-link","files":[{"fileName":"ItemLinkConfig.java","content":"/*\n * Copyright (c) 2025, LordStrange\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.itemlink;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"itemlink\")\npublic interface ItemLinkConfig extends Config\n{\n\t@ConfigItem(\n\t\tkeyName \u003d \"colorByRarity\",\n\t\tname \u003d \"Color by rarity\",\n\t\tdescription \u003d \"Color item links based on GE value (WoW-style rarity colors)\",\n\t\tposition \u003d 0\n\t)\n\tdefault boolean colorByRarity()\n\t{\n\t\treturn true;\n\t}\n}\n","filePath":"src\\main\\java\\com\\itemlink\\ItemLinkConfig.java"},{"fileName":"ItemLinkOverlay.java","content":"/*\n * Copyright (c) 2025, LordStrange\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.itemlink;\n\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Rectangle;\nimport java.util.ArrayList;\nimport java.util.LinkedHashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.api.Point;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.game.ItemEquipmentStats;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.game.ItemStats;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\nimport net.runelite.client.ui.overlay.tooltip.Tooltip;\nimport net.runelite.client.ui.overlay.tooltip.TooltipManager;\nimport net.runelite.client.util.QuantityFormatter;\n\npublic class ItemLinkOverlay extends Overlay\n{\n\tprivate static final int MAX_CACHED_ITEMS \u003d 50;\n\tprivate static final int MOUSE_MOVE_THRESHOLD \u003d 2; // Minimum pixels to trigger re-scan\n\n\t// Pattern to detect colored item names in chat: \u003ccol\u003dXXXXXX\u003e[ItemName]\u003c/col\u003e or \u003ccol\u003dXXXXXX\u003e[ItemName x123]\u003c/col\u003e\n\tprivate static final Pattern COLORED_ITEM_PATTERN \u003d Pattern.compile(\"\u003ccol\u003d[0-9a-fA-F]+\u003e\\\\[([^\\\\]]+?)(?:\\\\s+x(\\\\d+))?\\\\]\u003c/col\u003e\");\n\n\t// Rarity colors (WoW-style)\n\tprivate static final String COLOR_COMMON \u003d \"ffffff\";      // White\n\tprivate static final String COLOR_UNCOMMON \u003d \"1eff00\";    // Green\n\tprivate static final String COLOR_RARE \u003d \"0070dd\";        // Blue\n\tprivate static final String COLOR_EPIC \u003d \"a335ee\";        // Purple\n\tprivate static final String COLOR_LEGENDARY \u003d \"ff8000\";   // Orange\n\n\t// UI colors\n\tprivate static final String COLOR_LABEL \u003d \"999999\";\n\tprivate static final String COLOR_VALUE_POSITIVE \u003d \"00ff00\";\n\tprivate static final String COLOR_VALUE_NEGATIVE \u003d \"ff0000\";\n\tprivate static final String COLOR_VALUE_NEUTRAL \u003d \"ffff00\";\n\tprivate static final String COLOR_GOLD \u003d \"ffd700\";\n\tprivate static final String COLOR_ALCH \u003d \"ff9040\";\n\tprivate static final String COLOR_SEPARATOR \u003d \"444444\";\n\n\t// Mouse position caching to avoid re-scanning every frame\n\tprivate int lastMouseX \u003d -1;\n\tprivate int lastMouseY \u003d -1;\n\tprivate Widget cachedHoveredWidget \u003d null;\n\tprivate String cachedWidgetText \u003d null;\n\tprivate List\u003cItemLinkInfo\u003e cachedFoundItems \u003d null;\n\tprivate String cachedTooltipText \u003d null;\n\n\t// Cache of item info by item ID\n\tprivate final Map\u003cInteger, ItemLinkInfo\u003e recentItems \u003d new LinkedHashMap\u003cInteger, ItemLinkInfo\u003e()\n\t{\n\t\t@Override\n\t\tprotected boolean removeEldestEntry(Map.Entry\u003cInteger, ItemLinkInfo\u003e eldest)\n\t\t{\n\t\t\treturn size() \u003e MAX_CACHED_ITEMS;\n\t\t}\n\t};\n\n\t// Cache of item info by item name (lowercase for case-insensitive lookup)\n\tprivate final Map\u003cString, ItemLinkInfo\u003e itemsByName \u003d new LinkedHashMap\u003cString, ItemLinkInfo\u003e()\n\t{\n\t\t@Override\n\t\tprotected boolean removeEldestEntry(Map.Entry\u003cString, ItemLinkInfo\u003e eldest)\n\t\t{\n\t\t\treturn size() \u003e MAX_CACHED_ITEMS;\n\t\t}\n\t};\n\n\tprivate final Client client;\n\tprivate final ItemLinkConfig config;\n\tprivate final ItemManager itemManager;\n\tprivate final TooltipManager tooltipManager;\n\n\t@Inject\n\tprivate ItemLinkOverlay(Client client, ItemLinkPlugin plugin, ItemLinkConfig config,\n\t\t\t\t\t\t\tItemManager itemManager, TooltipManager tooltipManager)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.config \u003d config;\n\t\tthis.itemManager \u003d itemManager;\n\t\tthis.tooltipManager \u003d tooltipManager;\n\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.ABOVE_WIDGETS);\n\t\tsetPriority(OverlayPriority.HIGH);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (itemsByName.isEmpty())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tPoint mousePos \u003d client.getMouseCanvasPosition();\n\t\tif (mousePos \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tint mouseX \u003d mousePos.getX();\n\t\tint mouseY \u003d mousePos.getY();\n\n\t\t// Check if mouse has moved significantly\n\t\tboolean mouseMovedSignificantly \u003d Math.abs(mouseX - lastMouseX) \u003e MOUSE_MOVE_THRESHOLD ||\n\t\t\t\t\t\t\t\t\t\t  Math.abs(mouseY - lastMouseY) \u003e MOUSE_MOVE_THRESHOLD;\n\n\t\t// Fast path: if mouse hasn\u0027t moved and we have a cached tooltip, just show it\n\t\tif (!mouseMovedSignificantly \u0026\u0026 cachedTooltipText !\u003d null)\n\t\t{\n\t\t\t// Quick bounds check on cached widget\n\t\t\tif (cachedHoveredWidget !\u003d null)\n\t\t\t{\n\t\t\t\tRectangle bounds \u003d cachedHoveredWidget.getBounds();\n\t\t\t\tif (bounds !\u003d null \u0026\u0026 bounds.contains(mouseX, mouseY))\n\t\t\t\t{\n\t\t\t\t\ttooltipManager.add(new Tooltip(cachedTooltipText));\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Bounds check failed, clear cache\n\t\t\tclearTooltipCache();\n\t\t\treturn null;\n\t\t}\n\n\t\t// Mouse moved - update position\n\t\tlastMouseX \u003d mouseX;\n\t\tlastMouseY \u003d mouseY;\n\n\t\t// Find hovered widget\n\t\tWidget hoveredChatLine \u003d findHoveredChatLine(mousePos);\n\t\tif (hoveredChatLine \u003d\u003d null)\n\t\t{\n\t\t\tclearTooltipCache();\n\t\t\treturn null;\n\t\t}\n\n\t\tString text \u003d hoveredChatLine.getText();\n\t\tif (text \u003d\u003d null || !text.contains(\"\u003ccol\u003d\"))\n\t\t{\n\t\t\tclearTooltipCache();\n\t\t\treturn null;\n\t\t}\n\n\t\t// Check if text changed - if not, reuse cached tooltip\n\t\tif (text.equals(cachedWidgetText) \u0026\u0026 cachedTooltipText !\u003d null)\n\t\t{\n\t\t\tcachedHoveredWidget \u003d hoveredChatLine;\n\t\t\ttooltipManager.add(new Tooltip(cachedTooltipText));\n\t\t\treturn null;\n\t\t}\n\n\t\t// Text changed, need to rebuild tooltip\n\t\tcachedHoveredWidget \u003d hoveredChatLine;\n\t\tcachedWidgetText \u003d text;\n\n\t\t// Find colored item names in the text\n\t\tList\u003cItemLinkInfo\u003e foundItems \u003d new ArrayList\u003c\u003e();\n\t\tMatcher matcher \u003d COLORED_ITEM_PATTERN.matcher(text);\n\n\t\twhile (matcher.find())\n\t\t{\n\t\t\tString itemName \u003d matcher.group(1);\n\t\t\tString quantityStr \u003d matcher.group(2);\n\t\t\tint quantity \u003d quantityStr !\u003d null ? Integer.parseInt(quantityStr) : 1;\n\n\t\t\tItemLinkInfo info \u003d itemsByName.get(itemName.toLowerCase());\n\t\t\tif (info !\u003d null)\n\t\t\t{\n\t\t\t\tfoundItems.add(copyWithQuantity(info, quantity));\n\t\t\t}\n\t\t}\n\n\t\tif (!foundItems.isEmpty())\n\t\t{\n\t\t\tcachedFoundItems \u003d foundItems;\n\t\t\tcachedTooltipText \u003d buildTooltipText(foundItems);\n\t\t\ttooltipManager.add(new Tooltip(cachedTooltipText));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tclearTooltipCache();\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate void clearTooltipCache()\n\t{\n\t\tcachedHoveredWidget \u003d null;\n\t\tcachedWidgetText \u003d null;\n\t\tcachedFoundItems \u003d null;\n\t\tcachedTooltipText \u003d null;\n\t}\n\n\t/**\n\t * Find the chat line widget the mouse is hovering over.\n\t * Optimized to check bounds FIRST before running expensive regex.\n\t */\n\tprivate Widget findHoveredChatLine(Point mousePos)\n\t{\n\t\tint mx \u003d mousePos.getX();\n\t\tint my \u003d mousePos.getY();\n\n\t\t// Check chat line widgets (162, 58-149) - bounds first\n\t\tfor (int lineId \u003d 58; lineId \u003c 150; lineId++)\n\t\t{\n\t\t\tWidget lineWidget \u003d client.getWidget(162, lineId);\n\t\t\tWidget found \u003d checkWidgetForItemLink(lineWidget, mx, my);\n\t\t\tif (found !\u003d null) return found;\n\t\t}\n\n\t\t// Try scroll area children (162, 57)\n\t\tWidget scrollArea \u003d client.getWidget(162, 57);\n\t\tif (scrollArea !\u003d null \u0026\u0026 !scrollArea.isHidden())\n\t\t{\n\t\t\tWidget found \u003d checkChildrenForItemLink(scrollArea, mx, my);\n\t\t\tif (found !\u003d null) return found;\n\t\t}\n\n\t\t// Try chat display for transparent chatbox (162, 55)\n\t\tWidget chatDisplay \u003d client.getWidget(162, 55);\n\t\tif (chatDisplay !\u003d null \u0026\u0026 !chatDisplay.isHidden())\n\t\t{\n\t\t\tWidget found \u003d checkChildrenForItemLink(chatDisplay, mx, my);\n\t\t\tif (found !\u003d null) return found;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Check if a widget contains an item link and mouse is over it.\n\t * Returns the widget if found, null otherwise.\n\t */\n\tprivate Widget checkWidgetForItemLink(Widget widget, int mx, int my)\n\t{\n\t\tif (widget \u003d\u003d null || widget.isHidden())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tRectangle bounds \u003d widget.getBounds();\n\t\tif (bounds \u003d\u003d null || !bounds.contains(mx, my))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\t// Mouse is over this widget - check if it has item links\n\t\tString text \u003d widget.getText();\n\t\tif (text !\u003d null \u0026\u0026 text.contains(\"[\") \u0026\u0026 COLORED_ITEM_PATTERN.matcher(text).find())\n\t\t{\n\t\t\treturn widget;\n\t\t}\n\n\t\t// Check dynamic children\n\t\tWidget[] children \u003d widget.getDynamicChildren();\n\t\tif (children !\u003d null)\n\t\t{\n\t\t\tfor (Widget child : children)\n\t\t\t{\n\t\t\t\tWidget found \u003d checkWidgetForItemLink(child, mx, my);\n\t\t\t\tif (found !\u003d null) return found;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Check children of a container widget for item links.\n\t */\n\tprivate Widget checkChildrenForItemLink(Widget parent, int mx, int my)\n\t{\n\t\tif (parent \u003d\u003d null || parent.isHidden())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tWidget[] children \u003d parent.getDynamicChildren();\n\t\tif (children !\u003d null)\n\t\t{\n\t\t\tfor (Widget child : children)\n\t\t\t{\n\t\t\t\tWidget found \u003d checkWidgetForItemLink(child, mx, my);\n\t\t\t\tif (found !\u003d null) return found;\n\t\t\t}\n\t\t}\n\n\t\tchildren \u003d parent.getStaticChildren();\n\t\tif (children !\u003d null)\n\t\t{\n\t\t\tfor (Widget child : children)\n\t\t\t{\n\t\t\t\tWidget found \u003d checkWidgetForItemLink(child, mx, my);\n\t\t\t\tif (found !\u003d null) return found;\n\t\t\t}\n\t\t}\n\n\t\tchildren \u003d parent.getNestedChildren();\n\t\tif (children !\u003d null)\n\t\t{\n\t\t\tfor (Widget child : children)\n\t\t\t{\n\t\t\t\tWidget found \u003d checkWidgetForItemLink(child, mx, my);\n\t\t\t\tif (found !\u003d null) return found;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic void addRecentItem(int itemId, int quantity)\n\t{\n\t\tItemComposition itemComp \u003d itemManager.getItemComposition(itemId);\n\t\tif (itemComp \u003d\u003d null || itemComp.getName() \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tString itemName \u003d itemComp.getName();\n\t\tif (itemName.equals(\"null\"))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tItemLinkInfo info \u003d new ItemLinkInfo();\n\t\tinfo.itemId \u003d itemId;\n\t\tinfo.quantity \u003d quantity;\n\t\tinfo.name \u003d itemName;\n\t\tinfo.timestamp \u003d System.currentTimeMillis();\n\t\tinfo.gePrice \u003d itemManager.getItemPrice(itemId);\n\t\tinfo.haPrice \u003d itemComp.getHaPrice();\n\n\t\tItemStats stats \u003d itemManager.getItemStats(itemId);\n\t\tif (stats !\u003d null)\n\t\t{\n\t\t\tinfo.weight \u003d stats.getWeight();\n\t\t\tinfo.isEquipable \u003d stats.isEquipable();\n\t\t\tinfo.geLimit \u003d stats.getGeLimit();\n\t\t\tinfo.equipmentStats \u003d stats.getEquipment();\n\t\t}\n\n\t\trecentItems.put(itemId, info);\n\t\titemsByName.put(itemName.toLowerCase(), info);\n\t}\n\n\tprivate String formatStat(String name, int value)\n\t{\n\t\treturn formatStat(name, value, \"\");\n\t}\n\n\tprivate String formatStat(String name, int value, String suffix)\n\t{\n\t\tString color \u003d value \u003e 0 ? COLOR_VALUE_POSITIVE : (value \u003c 0 ? COLOR_VALUE_NEGATIVE : COLOR_LABEL);\n\t\tString sign \u003d value \u003e 0 ? \"+\" : \"\";\n\t\treturn \"\u003ccol\u003d\" + COLOR_LABEL + \"\u003e\" + name + \":\u003c/col\u003e \u003ccol\u003d\" + color + \"\u003e\" + sign + value + suffix + \"\u003c/col\u003e\u003c/br\u003e\";\n\t}\n\n\tprivate boolean hasAttackBonuses(ItemEquipmentStats eq)\n\t{\n\t\treturn eq.getAstab() !\u003d 0 || eq.getAslash() !\u003d 0 || eq.getAcrush() !\u003d 0 ||\n\t\t\t   eq.getAmagic() !\u003d 0 || eq.getArange() !\u003d 0;\n\t}\n\n\tprivate boolean hasDefenceBonuses(ItemEquipmentStats eq)\n\t{\n\t\treturn eq.getDstab() !\u003d 0 || eq.getDslash() !\u003d 0 || eq.getDcrush() !\u003d 0 ||\n\t\t\t   eq.getDmagic() !\u003d 0 || eq.getDrange() !\u003d 0;\n\t}\n\n\tprivate boolean hasOtherBonuses(ItemEquipmentStats eq)\n\t{\n\t\treturn eq.getStr() !\u003d 0 || eq.getRstr() !\u003d 0 || eq.getMdmg() !\u003d 0 || eq.getPrayer() !\u003d 0;\n\t}\n\n\tprivate String getSlotName(int slot)\n\t{\n\t\tswitch (slot)\n\t\t{\n\t\t\tcase 0: return \"Head\";\n\t\t\tcase 1: return \"Cape\";\n\t\t\tcase 2: return \"Neck\";\n\t\t\tcase 3: return \"Weapon\";\n\t\t\tcase 4: return \"Body\";\n\t\t\tcase 5: return \"Shield\";\n\t\t\tcase 7: return \"Legs\";\n\t\t\tcase 9: return \"Gloves\";\n\t\t\tcase 10: return \"Boots\";\n\t\t\tcase 12: return \"Ring\";\n\t\t\tcase 13: return \"Ammo\";\n\t\t\tdefault: return \"Equipment\";\n\t\t}\n\t}\n\n\tprivate String getRarityColor(int gePrice)\n\t{\n\t\tif (gePrice \u003e\u003d 10000000) return COLOR_LEGENDARY;\n\t\tif (gePrice \u003e\u003d 1000000) return COLOR_EPIC;\n\t\tif (gePrice \u003e\u003d 100000) return COLOR_RARE;\n\t\tif (gePrice \u003e\u003d 10000) return COLOR_UNCOMMON;\n\t\treturn COLOR_COMMON;\n\t}\n\n\tpublic void clearRecentItems()\n\t{\n\t\trecentItems.clear();\n\t\titemsByName.clear();\n\t\tclearTooltipCache();\n\t\tlastMouseX \u003d -1;\n\t\tlastMouseY \u003d -1;\n\t}\n\n\tprivate String buildTooltipText(List\u003cItemLinkInfo\u003e items)\n\t{\n\t\tStringBuilder tooltip \u003d new StringBuilder();\n\t\tboolean first \u003d true;\n\n\t\tfor (ItemLinkInfo info : items)\n\t\t{\n\t\t\tif (!first)\n\t\t\t{\n\t\t\t\ttooltip.append(\"\u003c/br\u003e\u003ccol\u003d\").append(COLOR_SEPARATOR).append(\"\u003e\u003c/col\u003e\u003c/br\u003e\");\n\t\t\t}\n\t\t\tfirst \u003d false;\n\n\t\t\tappendItemTooltip(tooltip, info);\n\t\t}\n\n\t\treturn tooltip.toString();\n\t}\n\n\tprivate ItemLinkInfo copyWithQuantity(ItemLinkInfo original, int newQuantity)\n\t{\n\t\tItemLinkInfo copy \u003d new ItemLinkInfo();\n\t\tcopy.itemId \u003d original.itemId;\n\t\tcopy.quantity \u003d newQuantity;\n\t\tcopy.name \u003d original.name;\n\t\tcopy.timestamp \u003d original.timestamp;\n\t\tcopy.gePrice \u003d original.gePrice;\n\t\tcopy.haPrice \u003d original.haPrice;\n\t\tcopy.weight \u003d original.weight;\n\t\tcopy.isEquipable \u003d original.isEquipable;\n\t\tcopy.geLimit \u003d original.geLimit;\n\t\tcopy.equipmentStats \u003d original.equipmentStats;\n\t\treturn copy;\n\t}\n\n\tprivate void appendItemTooltip(StringBuilder tooltip, ItemLinkInfo info)\n\t{\n\t\tString rarityColor \u003d getRarityColor(info.gePrice);\n\n\t\t// ITEM NAME\n\t\ttooltip.append(\"\u003ccol\u003d\").append(rarityColor).append(\"\u003e\").append(info.name).append(\"\u003c/col\u003e\");\n\t\tif (info.quantity \u003e 1)\n\t\t{\n\t\t\ttooltip.append(\" \u003ccol\u003d\").append(COLOR_LABEL).append(\"\u003ex\").append(QuantityFormatter.formatNumber(info.quantity)).append(\"\u003c/col\u003e\");\n\t\t}\n\t\ttooltip.append(\"\u003c/br\u003e\");\n\n\t\t// Separator\n\t\ttooltip.append(\"\u003ccol\u003d\").append(COLOR_SEPARATOR).append(\"\u003e\u003c/col\u003e\u003c/br\u003e\");\n\n\t\t// PRICE INFORMATION\n\t\tboolean hasPriceInfo \u003d false;\n\n\t\tif (info.gePrice \u003e 0)\n\t\t{\n\t\t\thasPriceInfo \u003d true;\n\t\t\tlong totalGe \u003d (long) info.gePrice * info.quantity;\n\t\t\ttooltip.append(\"\u003ccol\u003d\").append(COLOR_GOLD).append(\"\u003eGE Price:\u003c/col\u003e \");\n\t\t\ttooltip.append(\"\u003ccol\u003d\").append(COLOR_VALUE_NEUTRAL).append(\"\u003e\");\n\t\t\ttooltip.append(QuantityFormatter.quantityToStackSize(totalGe)).append(\" gp\");\n\t\t\tif (info.quantity \u003e 1)\n\t\t\t{\n\t\t\t\ttooltip.append(\" (\").append(QuantityFormatter.quantityToStackSize(info.gePrice)).append(\" ea)\");\n\t\t\t}\n\t\t\ttooltip.append(\"\u003c/col\u003e\u003c/br\u003e\");\n\n\t\t\tif (info.geLimit \u003e 0)\n\t\t\t{\n\t\t\t\ttooltip.append(\"\u003ccol\u003d\").append(COLOR_LABEL).append(\"\u003eBuy Limit:\u003c/col\u003e \");\n\t\t\t\ttooltip.append(\"\u003ccol\u003d\").append(COLOR_VALUE_NEUTRAL).append(\"\u003e\");\n\t\t\t\ttooltip.append(QuantityFormatter.formatNumber(info.geLimit));\n\t\t\t\ttooltip.append(\"\u003c/col\u003e\u003c/br\u003e\");\n\t\t\t}\n\t\t}\n\n\t\tif (info.haPrice \u003e 0)\n\t\t{\n\t\t\thasPriceInfo \u003d true;\n\t\t\tlong totalHa \u003d (long) info.haPrice * info.quantity;\n\t\t\ttooltip.append(\"\u003ccol\u003d\").append(COLOR_ALCH).append(\"\u003eHA Value:\u003c/col\u003e \");\n\t\t\ttooltip.append(\"\u003ccol\u003d\").append(COLOR_VALUE_NEUTRAL).append(\"\u003e\");\n\t\t\ttooltip.append(QuantityFormatter.quantityToStackSize(totalHa)).append(\" gp\");\n\t\t\tif (info.quantity \u003e 1)\n\t\t\t{\n\t\t\t\ttooltip.append(\" (\").append(QuantityFormatter.quantityToStackSize(info.haPrice)).append(\" ea)\");\n\t\t\t}\n\t\t\ttooltip.append(\"\u003c/col\u003e\u003c/br\u003e\");\n\t\t}\n\n\t\t// EQUIPMENT STATS\n\t\tif (info.isEquipable \u0026\u0026 info.equipmentStats !\u003d null)\n\t\t{\n\t\t\tItemEquipmentStats eq \u003d info.equipmentStats;\n\n\t\t\tif (hasPriceInfo)\n\t\t\t{\n\t\t\t\ttooltip.append(\"\u003ccol\u003d\").append(COLOR_SEPARATOR).append(\"\u003e\u003c/col\u003e\u003c/br\u003e\");\n\t\t\t}\n\n\t\t\tString slotName \u003d getSlotName(eq.getSlot());\n\t\t\ttooltip.append(\"\u003ccol\u003d\").append(COLOR_LABEL).append(\"\u003eSlot:\u003c/col\u003e \");\n\t\t\ttooltip.append(\"\u003ccol\u003dffffff\u003e\").append(slotName);\n\t\t\tif (eq.isTwoHanded())\n\t\t\t{\n\t\t\t\ttooltip.append(\" (Two-handed)\");\n\t\t\t}\n\t\t\ttooltip.append(\"\u003c/col\u003e\u003c/br\u003e\");\n\n\t\t\tif (hasAttackBonuses(eq))\n\t\t\t{\n\t\t\t\ttooltip.append(\"\u003ccol\u003d\").append(COLOR_LABEL).append(\"\u003eAttack Bonuses\u003c/col\u003e\u003c/br\u003e\");\n\t\t\t\tif (eq.getAstab() !\u003d 0) tooltip.append(formatStat(\"  Stab\", eq.getAstab()));\n\t\t\t\tif (eq.getAslash() !\u003d 0) tooltip.append(formatStat(\"  Slash\", eq.getAslash()));\n\t\t\t\tif (eq.getAcrush() !\u003d 0) tooltip.append(formatStat(\"  Crush\", eq.getAcrush()));\n\t\t\t\tif (eq.getAmagic() !\u003d 0) tooltip.append(formatStat(\"  Magic\", eq.getAmagic()));\n\t\t\t\tif (eq.getArange() !\u003d 0) tooltip.append(formatStat(\"  Ranged\", eq.getArange()));\n\t\t\t}\n\n\t\t\tif (hasDefenceBonuses(eq))\n\t\t\t{\n\t\t\t\ttooltip.append(\"\u003ccol\u003d\").append(COLOR_LABEL).append(\"\u003eDefence Bonuses\u003c/col\u003e\u003c/br\u003e\");\n\t\t\t\tif (eq.getDstab() !\u003d 0) tooltip.append(formatStat(\"  Stab\", eq.getDstab()));\n\t\t\t\tif (eq.getDslash() !\u003d 0) tooltip.append(formatStat(\"  Slash\", eq.getDslash()));\n\t\t\t\tif (eq.getDcrush() !\u003d 0) tooltip.append(formatStat(\"  Crush\", eq.getDcrush()));\n\t\t\t\tif (eq.getDmagic() !\u003d 0) tooltip.append(formatStat(\"  Magic\", eq.getDmagic()));\n\t\t\t\tif (eq.getDrange() !\u003d 0) tooltip.append(formatStat(\"  Ranged\", eq.getDrange()));\n\t\t\t}\n\n\t\t\tif (hasOtherBonuses(eq))\n\t\t\t{\n\t\t\t\ttooltip.append(\"\u003ccol\u003d\").append(COLOR_LABEL).append(\"\u003eOther Bonuses\u003c/col\u003e\u003c/br\u003e\");\n\t\t\t\tif (eq.getStr() !\u003d 0) tooltip.append(formatStat(\"  Melee Str\", eq.getStr()));\n\t\t\t\tif (eq.getRstr() !\u003d 0) tooltip.append(formatStat(\"  Ranged Str\", eq.getRstr()));\n\t\t\t\tif (eq.getMdmg() !\u003d 0) tooltip.append(formatStat(\"  Magic Dmg\", (int) eq.getMdmg(), \"%\"));\n\t\t\t\tif (eq.getPrayer() !\u003d 0) tooltip.append(formatStat(\"  Prayer\", eq.getPrayer()));\n\t\t\t}\n\n\t\t\tif (eq.getAspeed() \u003e 0)\n\t\t\t{\n\t\t\t\ttooltip.append(\"\u003ccol\u003d\").append(COLOR_LABEL).append(\"\u003eAttack Speed:\u003c/col\u003e \");\n\t\t\t\ttooltip.append(\"\u003ccol\u003dffffff\u003e\").append(eq.getAspeed()).append(\"\u003c/col\u003e\u003c/br\u003e\");\n\t\t\t}\n\t\t}\n\n\t\t// WEIGHT\n\t\tif (info.weight !\u003d 0)\n\t\t{\n\t\t\ttooltip.append(\"\u003ccol\u003d\").append(COLOR_LABEL).append(\"\u003eWeight:\u003c/col\u003e \");\n\t\t\tString weightColor \u003d info.weight \u003c 0 ? COLOR_VALUE_POSITIVE : (info.weight \u003e 0 ? COLOR_VALUE_NEUTRAL : COLOR_LABEL);\n\t\t\ttooltip.append(\"\u003ccol\u003d\").append(weightColor).append(\"\u003e\");\n\t\t\ttooltip.append(String.format(\"%.2f kg\", info.weight));\n\t\t\ttooltip.append(\"\u003c/col\u003e\");\n\t\t}\n\t}\n\n\tprivate static class ItemLinkInfo\n\t{\n\t\tint itemId;\n\t\tint quantity;\n\t\tString name;\n\t\tint gePrice;\n\t\tint haPrice;\n\t\tlong timestamp;\n\t\tboolean isEquipable;\n\t\tdouble weight;\n\t\tint geLimit;\n\t\tItemEquipmentStats equipmentStats;\n\t}\n}\n","filePath":"src\\main\\java\\com\\itemlink\\ItemLinkOverlay.java"},{"fileName":"ItemLinkPlugin.java","content":"/*\n * Copyright (c) 2025, LordStrange\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.itemlink;\n\nimport com.google.inject.Provides;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Actor;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.api.Player;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.OverheadTextChanged;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\n/**\n * ItemLink Plugin - WoW-style item linking for OSRS chat\n *\n * This plugin automatically detects item names in chat messages and highlights them\n * with colored text based on their GE value (rarity). Just type naturally!\n *\n * Examples:\n *   - \"I just got an Abyssal whip!\" -\u003e \"I just got an [Abyssal whip]!\"\n *   - \"Selling Dragon scimitar 100k\" -\u003e \"Selling [Dragon scimitar] 100k\"\n *\n * Items are colored by their GE value (WoW-style rarity colors).\n * Hover over linked items to see detailed stats and prices.\n * Other players with this plugin will also see the highlighted items.\n */\n@PluginDescriptor(\n\tname \u003d \"Item Link\",\n\tdescription \u003d \"Automatically highlights item names in chat with rarity colors and tooltips\",\n\ttags \u003d {\"item\", \"link\", \"chat\", \"share\", \"wow\", \"highlight\", \"tooltip\", \"price\"}\n)\n@Slf4j\npublic class ItemLinkPlugin extends Plugin\n{\n\t// Rarity colors (WoW-style)\n\tprivate static final String COLOR_COMMON \u003d \"ffffff\";      // White\n\tprivate static final String COLOR_UNCOMMON \u003d \"1eff00\";    // Green\n\tprivate static final String COLOR_RARE \u003d \"0070dd\";        // Blue\n\tprivate static final String COLOR_EPIC \u003d \"a335ee\";        // Purple\n\tprivate static final String COLOR_LEGENDARY \u003d \"ff8000\";   // Orange\n\tprivate static final String COLOR_DEFAULT \u003d \"ff8000\";     // Orange (default)\n\n\t// Default chat colors for restoration after item highlight\n\t// These are used in transparent chatbox mode\n\tprivate static final String COLOR_PUBLIC_CHAT \u003d \"9090ff\";     // Light blue (public chat)\n\tprivate static final String COLOR_FC_CHAT \u003d \"ef5050\";         // Salmon red (friends/clan chat)\n\n\t// Minimum item name length to avoid false positives\n\tprivate static final int MIN_ITEM_NAME_LENGTH \u003d 5;\n\n\t// Map of lowercase item name -\u003e item ID\n\tprivate final Map\u003cString, Integer\u003e itemNameToId \u003d new HashMap\u003c\u003e();\n\n\t// List of item names sorted by length (longest first) for matching\n\tprivate final List\u003cString\u003e sortedItemNames \u003d new ArrayList\u003c\u003e();\n\n\t// Set of all single-word item names for O(1) lookup\n\tprivate final Set\u003cString\u003e singleWordItems \u003d new HashSet\u003c\u003e();\n\n\t// Map of first word -\u003e list of multi-word item names starting with that word (sorted by length, longest first)\n\tprivate final Map\u003cString, List\u003cString\u003e\u003e multiWordItemsByFirstWord \u003d new HashMap\u003c\u003e();\n\n\tprivate boolean itemsLoaded \u003d false;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate ItemManager itemManager;\n\n\t@Inject\n\tprivate ItemLinkConfig config;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate ItemLinkOverlay itemLinkOverlay;\n\n\t@Provides\n\tItemLinkConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(ItemLinkConfig.class);\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tlog.info(\"ItemLink plugin started\");\n\t\toverlayManager.add(itemLinkOverlay);\n\n\t\tif (client.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tloadItemNames();\n\t\t}\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tlog.info(\"ItemLink plugin stopped\");\n\t\toverlayManager.remove(itemLinkOverlay);\n\t\titemLinkOverlay.clearRecentItems();\n\t\titemNameToId.clear();\n\t\tsortedItemNames.clear();\n\t\tsingleWordItems.clear();\n\t\tmultiWordItemsByFirstWord.clear();\n\t\titemsLoaded \u003d false;\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged event)\n\t{\n\t\tif (event.getGameState() \u003d\u003d GameState.LOGGED_IN \u0026\u0026 !itemsLoaded)\n\t\t{\n\t\t\tloadItemNames();\n\t\t}\n\t}\n\n\t// Number of items to process per chunk to avoid blocking the game\n\tprivate static final int ITEMS_PER_CHUNK \u003d 2000;\n\tprivate static final int MAX_ITEM_ID \u003d 30000;\n\n\t/**\n\t * Load all item names into the lookup map.\n\t * Uses chunked loading to avoid blocking the game client.\n\t */\n\tprivate void loadItemNames()\n\t{\n\t\titemNameToId.clear();\n\t\tsortedItemNames.clear();\n\t\tsingleWordItems.clear();\n\t\tmultiWordItemsByFirstWord.clear();\n\n\t\t// Start loading from the first chunk\n\t\tloadItemChunk(0);\n\t}\n\n\t/**\n\t * Load a chunk of items starting at the given ID.\n\t */\n\tprivate void loadItemChunk(final int startId)\n\t{\n\t\tclientThread.invokeLater(() -\u003e\n\t\t{\n\t\t\tint endId \u003d Math.min(startId + ITEMS_PER_CHUNK, MAX_ITEM_ID);\n\n\t\t\tfor (int itemId \u003d startId; itemId \u003c endId; itemId++)\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tItemComposition itemComp \u003d itemManager.getItemComposition(itemId);\n\t\t\t\t\tif (itemComp \u003d\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tString name \u003d itemComp.getName();\n\t\t\t\t\tif (name \u003d\u003d null || name.equals(\"null\") || name.isEmpty())\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Skip very short names to avoid false positives\n\t\t\t\t\tif (name.length() \u003c MIN_ITEM_NAME_LENGTH)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Skip noted items and placeholders\n\t\t\t\t\tif (itemComp.getNote() !\u003d -1 || itemComp.getPlaceholderTemplateId() !\u003d -1)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tString lowerName \u003d name.toLowerCase();\n\n\t\t\t\t\t// Only store first occurrence (base item)\n\t\t\t\t\tif (!itemNameToId.containsKey(lowerName))\n\t\t\t\t\t{\n\t\t\t\t\t\titemNameToId.put(lowerName, itemId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcatch (Exception e)\n\t\t\t\t{\n\t\t\t\t\t// Skip problematic items\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (endId \u003c MAX_ITEM_ID)\n\t\t\t{\n\t\t\t\t// Schedule next chunk\n\t\t\t\tloadItemChunk(endId);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// All chunks loaded, finalize\n\t\t\t\tfinalizeItemLoading();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Finalize item loading by building optimized lookup structures.\n\t */\n\tprivate void finalizeItemLoading()\n\t{\n\t\t// Sort item names by length (longest first) for greedy matching\n\t\tsortedItemNames.addAll(itemNameToId.keySet());\n\t\tsortedItemNames.sort((a, b) -\u003e Integer.compare(b.length(), a.length()));\n\n\t\t// Build optimized lookup structures\n\t\tfor (String itemName : sortedItemNames)\n\t\t{\n\t\t\tint spaceIndex \u003d itemName.indexOf(\u0027 \u0027);\n\t\t\tif (spaceIndex \u003d\u003d -1)\n\t\t\t{\n\t\t\t\t// Single-word item\n\t\t\t\tsingleWordItems.add(itemName);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// Multi-word item - index by first word\n\t\t\t\tString firstWord \u003d itemName.substring(0, spaceIndex);\n\t\t\t\tmultiWordItemsByFirstWord\n\t\t\t\t\t.computeIfAbsent(firstWord, k -\u003e new ArrayList\u003c\u003e())\n\t\t\t\t\t.add(itemName);\n\t\t\t}\n\t\t}\n\n\t\titemsLoaded \u003d true;\n\t\tlog.info(\"Loaded {} item names for Item Link ({} single-word, {} multi-word prefixes)\",\n\t\t\titemNameToId.size(), singleWordItems.size(), multiWordItemsByFirstWord.size());\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage event)\n\t{\n\t\tif (!itemsLoaded)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// Only process player chat messages, not system/game messages\n\t\tChatMessageType type \u003d event.getType();\n\t\tswitch (type)\n\t\t{\n\t\t\tcase PUBLICCHAT:\n\t\t\tcase MODCHAT:\n\t\t\tcase PRIVATECHAT:\n\t\t\tcase PRIVATECHATOUT:\n\t\t\tcase FRIENDSCHAT:\n\t\t\tcase CLAN_CHAT:\n\t\t\tcase CLAN_GUEST_CHAT:\n\t\t\tcase CLAN_GIM_CHAT:\n\t\t\tcase AUTOTYPER:\n\t\t\tcase MODAUTOTYPER:\n\t\t\tcase TRADEREQ:\n\t\t\tcase CHALREQ_TRADE:\n\t\t\t\t// These are player messages - process them\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t// Skip system messages, examine text, NPC dialogue, etc.\n\t\t\t\treturn;\n\t\t}\n\n\t\tString message \u003d event.getMessage();\n\t\tif (message \u003d\u003d null || message.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tString processed \u003d highlightItemNames(message);\n\t\tif (!processed.equals(message))\n\t\t{\n\t\t\tevent.getMessageNode().setValue(processed);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onOverheadTextChanged(OverheadTextChanged event)\n\t{\n\t\tif (!itemsLoaded)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tActor actor \u003d event.getActor();\n\t\tif (!(actor instanceof Player))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tString text \u003d event.getOverheadText();\n\t\tif (text \u003d\u003d null || text.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tString formatted \u003d highlightItemNames(text);\n\t\tif (!formatted.equals(text))\n\t\t{\n\t\t\tactor.setOverheadText(formatted);\n\t\t}\n\t}\n\n\t/**\n\t * Scan message for item names and highlight them.\n\t * Uses optimized word-boundary scanning with HashSet lookups.\n\t */\n\tprivate String highlightItemNames(String message)\n\t{\n\t\tString lowerMessage \u003d message.toLowerCase();\n\t\tStringBuilder result \u003d new StringBuilder();\n\n\t\tint i \u003d 0;\n\t\twhile (i \u003c message.length())\n\t\t{\n\t\t\t// Only check at word boundaries (start of message or after non-letter/digit)\n\t\t\tboolean atWordBoundary \u003d (i \u003d\u003d 0 || !Character.isLetterOrDigit(lowerMessage.charAt(i - 1)));\n\n\t\t\tif (!atWordBoundary || !Character.isLetterOrDigit(lowerMessage.charAt(i)))\n\t\t\t{\n\t\t\t\tresult.append(message.charAt(i));\n\t\t\t\ti++;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Extract the current word\n\t\t\tint wordEnd \u003d i;\n\t\t\twhile (wordEnd \u003c lowerMessage.length() \u0026\u0026 Character.isLetterOrDigit(lowerMessage.charAt(wordEnd)))\n\t\t\t{\n\t\t\t\twordEnd++;\n\t\t\t}\n\t\t\tString currentWord \u003d lowerMessage.substring(i, wordEnd);\n\n\t\t\tString matchedItemName \u003d null;\n\n\t\t\t// First, check for multi-word items starting with this word (longest first)\n\t\t\tList\u003cString\u003e multiWordCandidates \u003d multiWordItemsByFirstWord.get(currentWord);\n\t\t\tif (multiWordCandidates !\u003d null)\n\t\t\t{\n\t\t\t\tfor (String candidate : multiWordCandidates)\n\t\t\t\t{\n\t\t\t\t\tif (i + candidate.length() \u003e lowerMessage.length())\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check if full item name matches\n\t\t\t\t\tif (!lowerMessage.regionMatches(i, candidate, 0, candidate.length()))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check end boundary\n\t\t\t\t\tint endPos \u003d i + candidate.length();\n\t\t\t\t\tif (endPos \u003c lowerMessage.length() \u0026\u0026 Character.isLetterOrDigit(lowerMessage.charAt(endPos)))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tmatchedItemName \u003d candidate;\n\t\t\t\t\tbreak; // Multi-word candidates are already sorted longest-first\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If no multi-word match, check for single-word item\n\t\t\tif (matchedItemName \u003d\u003d null \u0026\u0026 singleWordItems.contains(currentWord))\n\t\t\t{\n\t\t\t\tmatchedItemName \u003d currentWord;\n\t\t\t}\n\n\t\t\tif (matchedItemName !\u003d null)\n\t\t\t{\n\t\t\t\t// Found a match! Get original case from message\n\t\t\t\tString originalName \u003d message.substring(i, i + matchedItemName.length());\n\t\t\t\tint itemId \u003d itemNameToId.get(matchedItemName);\n\t\t\t\tString color \u003d getItemColor(itemId);\n\n\t\t\t\tresult.append(String.format(\"\u003ccol\u003d%s\u003e[%s]\u003c/col\u003e\u003ccol\u003d%s\u003e\", color, originalName, COLOR_PUBLIC_CHAT));\n\n\t\t\t\t// Add to overlay for tooltip\n\t\t\t\titemLinkOverlay.addRecentItem(itemId, 1);\n\n\t\t\t\ti +\u003d matchedItemName.length();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.append(message.charAt(i));\n\t\t\t\ti++;\n\t\t\t}\n\t\t}\n\n\t\treturn result.toString();\n\t}\n\n\t/**\n\t * Determines the color for an item based on its GE value.\n\t */\n\tprivate String getItemColor(int itemId)\n\t{\n\t\tif (!config.colorByRarity())\n\t\t{\n\t\t\treturn COLOR_DEFAULT;\n\t\t}\n\n\t\tint gePrice \u003d itemManager.getItemPrice(itemId);\n\n\t\tif (gePrice \u003e\u003d 10000000)\n\t\t{\n\t\t\treturn COLOR_LEGENDARY;\n\t\t}\n\t\telse if (gePrice \u003e\u003d 1000000)\n\t\t{\n\t\t\treturn COLOR_EPIC;\n\t\t}\n\t\telse if (gePrice \u003e\u003d 100000)\n\t\t{\n\t\t\treturn COLOR_RARE;\n\t\t}\n\t\telse if (gePrice \u003e\u003d 10000)\n\t\t{\n\t\t\treturn COLOR_UNCOMMON;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn COLOR_COMMON;\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\itemlink\\ItemLinkPlugin.java"}]},{"commit":"f7c351b9f36baf210aeef3034bc6155177a326b9","repository":"https://github.com/molgoatkirby/InfernoAutoSplitter.git","internalName":"inferno-autosplitter","files":[{"fileName":"InfernoAutoSplitterConfig.java","content":"package com.InfernoAutoSplitter;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"autosplitter\")\npublic interface InfernoAutoSplitterConfig extends Config {\n\n    @ConfigItem(position \u003d 2, keyName \u003d \"port\", name \u003d \"Port\", description \u003d \"Port for the LiveSplit server. (Restart required)\")\n    default int port() {\n        return 16834;\n    }\n\n}\n","filePath":"src\\main\\java\\com\\InfernoAutoSplitter\\InfernoAutoSplitterConfig.java"},{"fileName":"InfernoAutoSplitterPanel.java","content":"package com.InfernoAutoSplitter;\n\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.PluginPanel;\n\nimport javax.inject.Inject;\nimport javax.swing.*;\nimport javax.swing.border.LineBorder;\nimport java.awt.*;\nimport java.io.PrintWriter;\nimport java.net.Socket;\n\npublic class InfernoAutoSplitterPanel extends PluginPanel\n{\n    private final Client client;\n    private final InfernoAutoSplitterConfig config;\n    private final InfernoAutoSplitterPlugin splitter;\n    private PrintWriter writer;\n    private Socket socket;\n    private JLabel status;\n\n    @Inject\n    InfernoAutoSplitterPanel(Client client, PrintWriter writer, InfernoAutoSplitterConfig config, InfernoAutoSplitterPlugin splitter){\n        this.client \u003d client;\n        this.writer \u003d writer;\n        this.config \u003d config;\n        this.splitter \u003d splitter;\n    }\n\n    private void connect(){\n        try {\n            socket \u003d new Socket(\"localhost\", config.port());\n            writer \u003d new PrintWriter(socket.getOutputStream());\n            splitter.writer \u003d writer;\n\n            set_connected();\n\n            if (client.getGameState() \u003d\u003d GameState.LOGGED_IN) {\n                String message \u003d \"Socket started at port \u003ccol\u003dff0000\u003e\" + config.port() + \"\u003c/col\u003e.\";\n                client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", message, null);\n            }\n\n        } catch (Exception e) {\n            if (client.getGameState() \u003d\u003d GameState.LOGGED_IN) {\n                String message \u003d \"Could not start socket, did you start the LiveSplit server?\";\n                client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", message, null);\n            }\n        }\n    }\n\n    public void disconnect(){\n        try {\n            socket.close();\n            set_disconnected();\n\n            if (client.getGameState() \u003d\u003d GameState.LOGGED_IN) {\n                client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"Socket closed.\", null);\n            }\n        } catch (Exception ignored) {}\n    }\n\n    private void control(String cmd){\n        try {\n            writer.write(cmd + \"\\r\\n\");\n            writer.flush();\n        } catch (Exception ignored) { }\n    }\n\n    public void startPanel(){\n        getParent().setLayout(new BorderLayout());\n        getParent().add(this, BorderLayout.CENTER);\n\n        setLayout(new BorderLayout());\n        setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n        setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n        final JPanel layout \u003d new JPanel();\n        BoxLayout boxLayout \u003d new BoxLayout(layout, BoxLayout.Y_AXIS);\n        layout.setLayout(boxLayout);\n        add(layout, BorderLayout.NORTH);\n\n        JPanel statusFrame \u003d new JPanel();\n        statusFrame.setLayout(new GridBagLayout());\n        statusFrame.setBorder(BorderFactory.createTitledBorder(new LineBorder(Color.CYAN), \"Status\"));\n\n        status \u003d new JLabel(\"Not connected\");\n        status.setForeground(Color.RED);\n        statusFrame.add(status);\n\n\n        JPanel connectionFrame \u003d new JPanel();\n        connectionFrame.setLayout(new GridLayout(2, 1));\n        connectionFrame.setBorder(BorderFactory.createTitledBorder(new LineBorder(Color.CYAN), \"Connection\"));\n\n        JButton b_connect \u003d new JButton(\"Connect\");\n        JButton b_disconnect \u003d new JButton(\"Disconnect\");\n        b_connect.setFocusable(false);\n        b_disconnect.setFocusable(false);\n\n        b_connect.addActionListener(e -\u003e connect());\n        b_disconnect.addActionListener(e -\u003e disconnect());\n\n        connectionFrame.add(b_connect);\n        connectionFrame.add(b_disconnect);\n\n\n        JPanel controllerFrame \u003d new JPanel();\n        controllerFrame.setLayout(new GridLayout(6, 1));\n        controllerFrame.setBorder(BorderFactory.createTitledBorder(new LineBorder(Color.CYAN), \"LiveSplit Controller\"));\n\n        JButton[] controllerButtons \u003d {new JButton(\"Split\"), new JButton(\"Reset\"), new JButton(\"Undo split\"),\n                new JButton(\"Skip split\"), new JButton(\"Pause\"), new JButton(\"Resume\")};\n        String[] controls \u003d {\"startorsplit\", \"reset\", \"unsplit\", \"skipsplit\", \"pause\", \"resume\"};\n\n        for (int i \u003d 0; i \u003c controllerButtons.length; i++){\n            int finalI \u003d i; // because lambda forces my hand\n            controllerButtons[i].addActionListener(e -\u003e control(controls[finalI]));\n\n            controllerButtons[i].setFocusable(false);\n            controllerFrame.add(controllerButtons[i], BorderLayout.CENTER);\n        }\n\n        layout.add(statusFrame);\n        layout.add(Box.createRigidArea(new Dimension(0, 15)));\n        layout.add(connectionFrame);\n        layout.add(Box.createRigidArea(new Dimension(0, 15)));\n        layout.add(controllerFrame);\n    }\n\n    public void set_connected(){\n        status.setText(\"Connected\");\n        status.setForeground(Color.GREEN);\n    }\n\n    public void set_disconnected(){\n        status.setText(\"Not connected\");\n        status.setForeground(Color.RED);\n    }\n}\n","filePath":"src\\main\\java\\com\\InfernoAutoSplitter\\InfernoAutoSplitterPanel.java"},{"fileName":"InfernoAutoSplitterPlugin.java","content":"/*\nInfernoAutoSplitterPlugin\nConnects to LiveSplit Server and automatically does the splits for the Inferno\nCreated by Molgoatkirby and Naabe\nCredit to SkyBouncer\u0027s CM AutoSplitter, the code for the panel and config comes largely from that\nInitial date: 10/28/2021\n */\n\npackage com.InfernoAutoSplitter;\n\nimport com.google.inject.Provides;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.util.ImageUtil;\n\nimport javax.inject.Inject;\nimport java.awt.image.BufferedImage;\nimport java.io.PrintWriter;\n\n@Slf4j\n@PluginDescriptor(\n        name \u003d \"Inferno AutoSplitter\",\n        enabledByDefault \u003d false,\n        description \u003d \"Automatically splits for LiveSplit in Inferno\"\n)\npublic class InfernoAutoSplitterPlugin extends Plugin {\n\n    // The tick we entered the instance\n    private int lastTick \u003d 0;\n\n    // The variables to interact with livesplit\n    PrintWriter writer;\n\n    // The waves we have splits for\n    private final int[] SPLIT_WAVES \u003d new int[] {9, 18, 25, 35, 42, 50, 57, 60, 63, 66, 67, 68, 69};\n\n    @Inject\n    public Client client;\n\n    @Inject\n    private InfernoAutoSplitterConfig config;\n\n    @Inject\n    private ClientToolbar clientToolbar;\n\n    // side panel\n    private NavigationButton navButton;\n    private InfernoAutoSplitterPanel panel;\n\n    @Provides\n    InfernoAutoSplitterConfig provideConfig(ConfigManager configManager) {\n        return configManager.getConfig(InfernoAutoSplitterConfig.class);\n    }\n\n\n    /*\n    void startUp\n    The function is called when Runelite loads the plugin or is enabled by the user. We create the panel and give it\n    access to what it needs\n    Parameters:\n        None\n    Returns:\n        None\n     */\n    @Override\n    protected void startUp()\n    {\n        final BufferedImage icon \u003d ImageUtil.loadImageResource(getClass(), \"/inferno_split_icon.png\");\n        panel \u003d new InfernoAutoSplitterPanel(client, writer, config, this);\n        navButton \u003d NavigationButton.builder().tooltip(\"Inferno Autosplit\")\n                .icon(icon).priority(6).panel(panel).build();\n        clientToolbar.addNavigation(navButton);\n\n        panel.startPanel();\n    }\n\n    /*\n    void shutDown\n    Called when the user disables the plugin. We disconnect from the LiveSplit Server\n    Parameters:\n        None\n    Returns:\n        None\n     */\n    @Override\n    protected void shutDown()\n    {\n        clientToolbar.removeNavigation(navButton);\n        panel.disconnect();  // terminates active socket\n    }\n\n    /*\n    void onChatMessage\n    Called every time the client receives a message in the chat box. For each message we check to see if the text contains what wave we\u0027re on in the inferno\n    Parameters:\n        event (ChatMessage): The object that contains the chat message text\n    Returns:\n        None\n     */\n    @Subscribe\n    public void onChatMessage(ChatMessage event) {\n\n        // Does the message received show\n        if (event.getMessage().contains(\"Wave:\")) {\n\n            boolean foundWave \u003d false;\n            int i \u003d 0;\n\n            while (i \u003c SPLIT_WAVES.length \u0026\u0026 !foundWave) {\n\n                if (event.getMessage().contains(\"Wave: \" + SPLIT_WAVES[i])) {\n\n                    foundWave \u003d true;\n                    sendMessage(\"split\");\n                }\n                i++;\n            }\n        } else if (event.getMessage().contains(\"Your TzKal-Zuk\")) {\n            sendMessage(\"split\");\n        }\n    }\n\n    /*\n    void onGameTick\n    Called each game tick. We check to see if we\u0027re in the inferno and if it has been 10 ticks since entering, we tell LiveSplit to start the timer\n    Parameters:\n        None\n    Returns:\n        None\n     */\n    @Subscribe\n    public void onGameTick(GameTick event) {\n\n        // Are we in the inferno?\n        if (lastTick !\u003d -1 \u0026\u0026 isInCaves()) {\n\n            // Get the time since entering the instance\n            int currTick \u003d client.getTickCount() - lastTick;\n\n            // If the time since is 10, we tell livesplit to reset and then start the timer\n            if (currTick \u003d\u003d 11) {\n                sendMessage(\"reset\");\n                sendMessage(\"starttimer\");\n            }\n        }\n    }\n\n    /*\n    void onGameStateChanged\n    Called when the game state of the client changes. This event fires when we jump into the inferno and some other non related reasons\n    Parameters:\n        event (GameStateChanged): The object which contains the value of the current game state. We want LOGGED_IN\n    Returns:\n        None\n     */\n    @Subscribe\n    public void onGameStateChanged(GameStateChanged event) {\n\n        if (!event.getGameState().equals(GameState.LOGGED_IN)) {\n\n            if (client.getTickCount() \u003d\u003d 0) {\n                lastTick \u003d -1;\n            } else {\n                lastTick \u003d client.getTickCount();\n            }\n\n        }\n    }\n\n    /*\n    boolean isInCaves\n    Lets us know if we are in the inferno\n    Parameters:\n        None\n    Returns:\n        True if we are in the inferno, false otherwise\n     */\n    public boolean isInCaves() {\n        return client.getVarbitValue(11878) \u003d\u003d 1;\n    }\n\n    /*\n    void sendMessage\n    Sends a message to the LiveSplit server\n    Parameters:\n        message (String): The message we are sending\n    Returns:\n        None\n     */\n    private void sendMessage(String message) {\n\n        if (writer !\u003d null) {\n            writer.write(message + \"\\r\\n\");\n            writer.flush();\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\InfernoAutoSplitter\\InfernoAutoSplitterPlugin.java"},{"fileName":"InfernoAutoSplitterTest.java","content":"package com.InfernoAutoSplitter;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class InfernoAutoSplitterTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(InfernoAutoSplitterPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\InfernoAutoSplitter\\InfernoAutoSplitterTest.java"}]},{"commit":"e06e11beb71e1eb1617103c4058e60bafaa2d160","repository":"https://github.com/hex-agon/mastering-mixology.git","internalName":"mastering-mixology","files":[{"fileName":"AlchemyObject.java","content":"package work.fking.masteringmixology;\n\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.gameval.ObjectID;\n\npublic enum AlchemyObject {\n    MOX_LEVER(ObjectID.MM_LAB_SWITCH_MOX, new WorldPoint(1395, 9324, 0)),\n    AGA_LEVER(ObjectID.MM_LAB_SWITCH_AGA, new WorldPoint(1394, 9324, 0)),\n    LYE_LEVER(ObjectID.MM_LAB_SWITCH_LYE, new WorldPoint(1393, 9324, 0)),\n    MIXING_VESSEL(ObjectID.MM_LAB_VESSEL, new WorldPoint(1394, 9326, 0)),\n    ALEMBIC(ObjectID.MM_LAB_MACHINE_ALEMBIC, new WorldPoint(1391, 9325, 0)),\n    AGITATOR(ObjectID.MM_LAB_MACHINE_AGITATOR, new WorldPoint(1393, 9329, 0)),\n    RETORT(ObjectID.MM_LAB_MACHINE_RETORT, new WorldPoint(1397, 9325, 0)),\n    CONVEYOR_BELT(ObjectID.MM_LAB_CONVEYOR, new WorldPoint(1394, 9331, 0)),\n    HOPPER(ObjectID.MM_LAB_HOPPER, new WorldPoint(1394, 9322, 0)),\n    DIGWEED_NORTH_EAST(ObjectID.MM_HERB_1, new WorldPoint(1399, 9331, 0)),\n    DIGWEED_SOUTH_EAST(ObjectID.MM_HERB_2, new WorldPoint(1399, 9322, 0)),\n    DIGWEED_SOUTH_WEST(ObjectID.MM_HERB_3, new WorldPoint(1389, 9322, 0)),\n    DIGWEED_NORTH_WEST(ObjectID.MM_HERB_4, new WorldPoint(1389, 9331, 0));\n\n    private final int objectId;\n    private final WorldPoint coordinate;\n\n    AlchemyObject(int objectId, WorldPoint coordinate) {\n        this.objectId \u003d objectId;\n        this.coordinate \u003d coordinate;\n    }\n\n    public int objectId() {\n        return objectId;\n    }\n\n    public WorldPoint coordinate() {\n        return coordinate;\n    }\n}\n","filePath":"src\\main\\java\\work\\fking\\masteringmixology\\AlchemyObject.java"},{"fileName":"Goal.java","content":"package work.fking.masteringmixology;\n\nimport net.runelite.api.Client;\n\nimport java.util.EnumMap;\nimport java.util.Map;\n\npublic class Goal {\n    private RewardItem rewardItem;\n    private double overallProgress \u003d 0.0;\n    private int itemsAffordable \u003d 0;\n    private int rewardQuantity \u003d 1;\n\n    /*\n     * Whenever we recalculate the goal, we will create a new ComponentData object for each component for caching\n     */\n    private final Map\u003cPotionComponent, ComponentData\u003e componentDataMap \u003d new EnumMap\u003c\u003e(PotionComponent.class);\n\n    public Goal(RewardItem rewardItem) {\n        this.rewardItem \u003d rewardItem;\n    }\n\n    public RewardItem getRewardItem() {\n        return rewardItem;\n    }\n\n    public double getOverallProgress() {\n        return overallProgress;\n    }\n\n    public int getItemsAffordable() {\n        return itemsAffordable;\n    }\n\n    public int getRewardQuantity() {\n        return rewardQuantity;\n    }\n\n    public ComponentData getComponentData(PotionComponent component) {\n        return componentDataMap.get(component);\n    }\n\n    public void recalculate(MasteringMixologyConfig config, Client client) {\n        rewardItem \u003d config.selectedReward();\n        rewardQuantity \u003d rewardItem.isRepeatable() ? config.rewardQuantity() : 1;\n\n        // Create the component data for each component\n        for (var component : PotionComponent.ENTRIES) {\n            int currentAmount \u003d client.getVarpValue(component.resinVarpId());\n            int baseGoalAmount \u003d rewardItem.componentCost(component);\n            componentDataMap.put(component, new ComponentData(currentAmount, baseGoalAmount, rewardQuantity));\n        }\n\n        // Calculate the amount of items affordable based on the component with the lowest affordable amount\n        int minAffordable \u003d componentDataMap.values().stream()\n                .mapToInt(data -\u003e data.affordableAmount)\n                .min()\n                .orElse(0);\n        itemsAffordable \u003d Math.min(minAffordable, rewardQuantity);\n\n        // Overall progress is the average of all component progress\n        overallProgress \u003d componentDataMap.values().stream()\n                .mapToDouble(data -\u003e data.percentageToGoal)\n                .average()\n                .orElse(0.0);\n    }\n\n    public static class ComponentData {\n        final int currentAmount;\n        final int goalAmount;\n        final double percentageToGoal;\n        final int affordableAmount;\n\n        ComponentData(int currentAmount, int baseGoalAmount, int rewardQuantity) {\n            this.currentAmount \u003d currentAmount;\n            this.goalAmount \u003d baseGoalAmount * rewardQuantity;\n\n            if (goalAmount \u003d\u003d 0) {\n                this.percentageToGoal \u003d 1.0;\n                this.affordableAmount \u003d rewardQuantity;\n            } else {\n                this.percentageToGoal \u003d Math.min((double) currentAmount / goalAmount, 1.0);\n                this.affordableAmount \u003d currentAmount / baseGoalAmount;\n            }\n        }\n    }\n}\n","filePath":"src\\main\\java\\work\\fking\\masteringmixology\\Goal.java"},{"fileName":"GoalInfoBoxOverlay.java","content":"package work.fking.masteringmixology;\n\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.game.SpriteManager;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.ComponentOrientation;\nimport net.runelite.client.ui.overlay.components.ImageComponent;\nimport net.runelite.client.ui.overlay.components.LineComponent;\nimport net.runelite.client.ui.overlay.components.PanelComponent;\nimport net.runelite.client.ui.overlay.components.ProgressBarComponent;\nimport net.runelite.client.ui.overlay.components.SplitComponent;\nimport net.runelite.client.util.ImageUtil;\nimport net.runelite.client.util.QuantityFormatter;\n\nimport javax.inject.Inject;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Point;\nimport java.awt.Rectangle;\nimport java.awt.image.BufferedImage;\nimport java.text.DecimalFormat;\n\nclass GoalInfoBoxOverlay extends OverlayPanel {\n\n    private static final DecimalFormat DECIMAL_FORMAT \u003d new DecimalFormat(\"0.0\");\n    private static final int BORDER_SIZE \u003d 3;\n    private static final int VERTICAL_GAP \u003d 2;\n    private static final int ICON_AND_GOAL_GAP \u003d 5;\n    private static final Rectangle TOP_PANEL_BORDER \u003d new Rectangle(2, 0, 4, 4);\n    private static final int COMPONENT_SPRITE_SIZE \u003d 16;\n    private static final Color PROGRESS_BAR_BACKGROUND_COLOR \u003d new Color(61, 56, 49);\n\n    private final MasteringMixologyPlugin plugin;\n    private final MasteringMixologyConfig config;\n    private final ItemManager itemManager;\n    private final SpriteManager spriteManager;\n\n    private final PanelComponent topPanel \u003d new PanelComponent();\n\n    // Caching\n    private BufferedImage cachedRewardIcon;\n    private RewardItem cachedRewardItem;\n\n    private final BufferedImage[] componentSprites \u003d new BufferedImage[PotionComponent.ENTRIES.length];\n\n    @Inject\n    GoalInfoBoxOverlay(\n            MasteringMixologyPlugin plugin,\n            MasteringMixologyConfig config,\n            ItemManager itemManager,\n            SpriteManager spriteManager\n    ) {\n        super(plugin);\n        this.plugin \u003d plugin;\n        this.config \u003d config;\n        this.itemManager \u003d itemManager;\n        this.spriteManager \u003d spriteManager;\n\n        setPosition(OverlayPosition.TOP_RIGHT);\n        setPriority(PRIORITY_MED);\n        panelComponent.setPreferredSize(new Dimension(250, 0));\n        panelComponent.setBorder(new Rectangle(BORDER_SIZE, BORDER_SIZE, BORDER_SIZE, BORDER_SIZE));\n        panelComponent.setGap(new Point(0, VERTICAL_GAP));\n\n        topPanel.setBorder(TOP_PANEL_BORDER);\n        topPanel.setBackgroundColor(null);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        var goal \u003d plugin.getGoal();\n        var rewardItem \u003d goal.getRewardItem();\n\n        if (rewardItem \u003d\u003d RewardItem.NONE || !plugin.isInLabRegion()) {\n            return null;\n        }\n        topPanel.getChildren().clear();\n        graphics.setFont(FontManager.getRunescapeSmallFont());\n\n        // Build the top display with the affordable amount / goal amount\n        String goalAmountText \u003d \"\";\n        if (rewardItem.isRepeatable() \u0026\u0026 goal.getRewardQuantity() \u003e 1) {\n            goalAmountText \u003d QuantityFormatter.quantityToStackSize(goal.getItemsAffordable())\n                    + \"/\" + QuantityFormatter.quantityToStackSize(goal.getRewardQuantity());\n        }\n\n        var topLine \u003d LineComponent.builder()\n                                   .left(rewardItem.itemName())\n                                   .leftFont(FontManager.getRunescapeFont())\n                                   .right(goalAmountText)\n                                   .rightFont(FontManager.getRunescapeBoldFont())\n                                   .build();\n\n        // Build the bottom line with the overall progress percentage\n        var bottomLine \u003d LineComponent.builder()\n                                      .left(\"Progress:\")\n                                      .leftFont(FontManager.getRunescapeFont())\n                                      .right(DECIMAL_FORMAT.format(goal.getOverallProgress() * 100) + \"%\")\n                                      .rightFont(FontManager.getRunescapeFont())\n                                      .rightColor(goal.getOverallProgress() \u003e\u003d 1 ? Color.GREEN : Color.WHITE)\n                                      .build();\n\n        var textSplit \u003d SplitComponent.builder()\n                                      .first(topLine)\n                                      .second(bottomLine)\n                                      .orientation(ComponentOrientation.VERTICAL)\n                                      .build();\n\n        var rewardImageComponent \u003d new ImageComponent(getRewardImage(rewardItem));\n        var topInfoSplit \u003d SplitComponent.builder()\n                                         .first(rewardImageComponent)\n                                         .second(textSplit)\n                                         .orientation(ComponentOrientation.HORIZONTAL)\n                                         .gap(new Point(ICON_AND_GOAL_GAP, 0))\n                                         .build();\n\n        topPanel.getChildren().add(topInfoSplit);\n        panelComponent.getChildren().add(topPanel);\n\n        // Add a progress bar for each component\n        if (config.showResinBars()) {\n            for (var component : PotionComponent.ENTRIES) {\n                createProgressBar(goal, component);\n            }\n        }\n\n        return super.render(graphics);\n    }\n\n    private void createProgressBar(Goal goal, PotionComponent component) {\n        var data \u003d goal.getComponentData(component);\n        var componentSprite \u003d getComponentSprite(component);\n\n        if (componentSprite \u003d\u003d null) {\n            return;\n        }\n        var imageComponent \u003d new ImageComponent(componentSprite);\n        var progressBarComponent \u003d new ProgressBarComponent();\n\n        progressBarComponent.setForegroundColor(component.color());\n        progressBarComponent.setBackgroundColor(PROGRESS_BAR_BACKGROUND_COLOR);\n        progressBarComponent.setValue(data.percentageToGoal * 100);\n        progressBarComponent.setLeftLabel(QuantityFormatter.quantityToStackSize(data.currentAmount));\n        progressBarComponent.setRightLabel(QuantityFormatter.quantityToStackSize(data.goalAmount));\n\n        var progressBarSplit \u003d SplitComponent.builder()\n                                             .first(imageComponent)\n                                             .second(progressBarComponent)\n                                             .orientation(ComponentOrientation.HORIZONTAL)\n                                             .gap(new Point(ICON_AND_GOAL_GAP, 0))\n                                             .build();\n\n        panelComponent.getChildren().add(progressBarSplit);\n    }\n\n    private BufferedImage getRewardImage(RewardItem rewardItem) {\n        if (cachedRewardItem !\u003d rewardItem) {\n            cachedRewardItem \u003d rewardItem;\n            cachedRewardIcon \u003d itemManager.getImage(rewardItem.itemId());\n        }\n        return cachedRewardIcon;\n    }\n\n    private BufferedImage getComponentSprite(PotionComponent component) {\n        var sprite \u003d componentSprites[component.ordinal()];\n\n        if (sprite \u003d\u003d null) {\n            sprite \u003d componentSprites[component.ordinal()] \u003d createComponentSprite(component);\n        }\n        return sprite;\n    }\n\n    private BufferedImage createComponentSprite(PotionComponent component) {\n        var sprite \u003d spriteManager.getSprite(component.spriteId(), 0);\n        if (sprite !\u003d null) {\n            // Resize and center the sprite\n            var resizedImage \u003d ImageUtil.resizeImage(sprite, COMPONENT_SPRITE_SIZE, COMPONENT_SPRITE_SIZE, true);\n            return ImageUtil.resizeCanvas(resizedImage, COMPONENT_SPRITE_SIZE, COMPONENT_SPRITE_SIZE);\n        }\n        return null;\n    }\n}\n","filePath":"src\\main\\java\\work\\fking\\masteringmixology\\GoalInfoBoxOverlay.java"},{"fileName":"InventoryPotionOverlay.java","content":"package work.fking.masteringmixology;\n\nimport net.runelite.api.widgets.WidgetItem;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.overlay.WidgetItemOverlay;\n\nimport javax.annotation.Nullable;\nimport javax.inject.Inject;\nimport java.awt.Color;\nimport java.awt.Graphics2D;\n\npublic class InventoryPotionOverlay extends WidgetItemOverlay {\n    private final MasteringMixologyPlugin plugin;\n    private final MasteringMixologyConfig config;\n\n    @Inject\n    InventoryPotionOverlay(MasteringMixologyPlugin plugin, MasteringMixologyConfig config) {\n        this.plugin \u003d plugin;\n        this.config \u003d config;\n        showOnInventory();\n    }\n\n    @Override\n    public void renderItemOverlay(Graphics2D graphics2D, int itemId, WidgetItem widgetItem) {\n        if (!plugin.isInLab() || config.inventoryPotionTagType() \u003d\u003d InventoryPotionTagType.NONE) {\n            return;\n        }\n\n        var potion \u003d PotionType.fromItemId(itemId);\n\n        if (potion \u003d\u003d null) {\n            return;\n        }\n\n        var bounds \u003d widgetItem.getCanvasBounds();\n        var x \u003d bounds.x + 5;\n        var y \u003d bounds.y + 30;\n\n        drawRecipe(graphics2D, potion, x + 1, y + 1, Color.BLACK); // Drop shadow\n\n        if (config.inventoryPotionTagType() \u003d\u003d InventoryPotionTagType.COLORED) {\n            drawRecipe(graphics2D, potion, x, y, null);\n            return;\n        }\n\n        drawRecipe(graphics2D, potion, x, y, Color.WHITE);\n    }\n\n    private void drawRecipe(Graphics2D graphics2D, PotionType potion, int x, int y, @Nullable Color color) {\n        graphics2D.setFont(FontManager.getRunescapeSmallFont());\n\n        if (color !\u003d null) {\n            graphics2D.setColor(color);\n            graphics2D.drawString(potion.abbreviation(), x, y);\n            return;\n        }\n\n        for (var component : potion.components()) {\n            graphics2D.setColor(component.color());\n            graphics2D.drawString(String.valueOf(component.character()), x, y);\n            x +\u003d graphics2D.getFontMetrics().charWidth(component.character());\n        }\n    }\n}\n","filePath":"src\\main\\java\\work\\fking\\masteringmixology\\InventoryPotionOverlay.java"},{"fileName":"InventoryPotionTagType.java","content":"package work.fking.masteringmixology;\n\npublic enum InventoryPotionTagType {\n    NONE,\n    COLORED,\n    WHITE,\n}\n","filePath":"src\\main\\java\\work\\fking\\masteringmixology\\InventoryPotionTagType.java"},{"fileName":"MasteringMixologyConfig.java","content":"package work.fking.masteringmixology;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\nimport net.runelite.client.config.Notification;\nimport net.runelite.client.config.Range;\n\nimport java.awt.Color;\n\nimport static work.fking.masteringmixology.MasteringMixologyConfig.CONFIG_GROUP;\n\n@ConfigGroup(CONFIG_GROUP)\npublic interface MasteringMixologyConfig extends Config {\n\n    String CONFIG_GROUP \u003d \"masteringmixology\";\n\n    @ConfigSection(\n            name \u003d \"Highlights\",\n            description \u003d \"Highlighting related configuration\",\n            position \u003d 10\n    )\n    String HIGHLIGHTS \u003d \"Highlights\";\n\n    @ConfigItem(\n            keyName \u003d \"inventoryPotionTags\",\n            name \u003d \"Inventory Potion Tags\",\n            description \u003d \"How potions should be tagged in the inventory\",\n            position \u003d 1\n    )\n    default InventoryPotionTagType inventoryPotionTagType() {\n        return InventoryPotionTagType.WHITE;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"potionOrderSorting\",\n            name \u003d \"Order sorting\",\n            description \u003d \"Determines how potion orders are sorted in the interface\",\n            position \u003d 1\n    )\n    default PotionOrderSorting potionOrderSorting() {\n        return PotionOrderSorting.VANILLA;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"highlightLevers\",\n            name \u003d \"Highlight levers\",\n            description \u003d \"Highlight levers\",\n            position \u003d 2\n    )\n    default boolean highlightLevers() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"highlightStations\",\n            name \u003d \"Highlight stations\",\n            description \u003d \"Toggles alchemical station highlighting on or off\",\n            position \u003d 2\n    )\n    default boolean highlightStations() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"highlightQuickActionEvents\",\n            name \u003d \"Highlight quick-action events\",\n            description \u003d \"Toggles station quick-action events highlighting on or off\",\n            position \u003d 2\n    )\n    default boolean highlightQuickActionEvents() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"displayResin\",\n            name \u003d \"Display resin amount\",\n            description \u003d \"Display total resin amounts\",\n            position \u003d 2\n    )\n    default boolean displayResin() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"stationHighlightColor\",\n            name \u003d \"Station color\",\n            description \u003d \"Configures the default station highlight color\",\n            position \u003d 3\n    )\n    default Color stationHighlightColor() {\n        return Color.MAGENTA;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"stationQuickActionHighlightColor\",\n            name \u003d \"Quick-action color\",\n            description \u003d \"Configures the station quick-action highlight color\",\n            position \u003d 4\n    )\n    default Color stationQuickActionHighlightColor() {\n        return Color.GREEN;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"notifyDigweed\",\n            name \u003d \"Notify DigWeed\",\n            description \u003d \"Toggles digweed notifications on or off\",\n            position \u003d 5\n    )\n    default Notification notifyDigWeed() {\n        return Notification.ON;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"highlightDigweed\",\n            name \u003d \"Highlight DigWeed\",\n            description \u003d \"Toggles digweed highlighting on or off\",\n            position \u003d 6\n    )\n    default boolean highlightDigWeed() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"digweedHighlightColor\",\n            name \u003d \"DigWeed color\",\n            description \u003d \"Configures the digweed highlight color\",\n            position \u003d 7\n    )\n    default Color digweedHighlightColor() {\n        return Color.GREEN;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"soundEffectAlembic\",\n            name \u003d \"Fix Alembic quick-action sound effect\",\n            description \u003d \"Fixes the Alembic quick-action sound effect to play at the correct time\",\n            position \u003d 8\n    )\n    default boolean soundEffectAlembic() {\n        return true;\n    }\n\n    @ConfigItem(\n            section \u003d HIGHLIGHTS,\n            keyName \u003d \"highlightBorderWidth\",\n            name \u003d \"Border width\",\n            description \u003d \"Configures the border width of the object highlights\"\n    )\n    default int highlightBorderWidth() {\n        return 2;\n    }\n\n    @ConfigItem(\n            section \u003d HIGHLIGHTS,\n            keyName \u003d \"highlightFeather\",\n            name \u003d \"Feather\",\n            description \u003d \"Configures the amount of \u0027feathering\u0027 to be applied to the object highlights\"\n    )\n    default int highlightFeather() {\n        return 1;\n    }\n\n    @ConfigSection(\n            name \u003d \"Reward Tracking\",\n            description \u003d \"Track your progress towards rewards\",\n            position \u003d 13\n    )\n    String REWARD_TRACKING \u003d \"RewardTracking\";\n\n    @ConfigItem(\n            section \u003d REWARD_TRACKING,\n            keyName \u003d \"selectedReward\",\n            name \u003d \"Selected Reward\",\n            description \u003d \"Select a reward to track resin for\",\n            position \u003d 1\n    )\n    default RewardItem selectedReward() {\n        return RewardItem.NONE;\n    }\n\n    @ConfigItem(\n            section \u003d REWARD_TRACKING,\n            keyName \u003d \"rewardQuantity\",\n            name \u003d \"Reward Quantity\",\n            description \u003d \"Set the quantity for repeatable rewards\",\n            position \u003d 2\n    )\n    @Range(\n            min \u003d 1,\n            max \u003d 100000\n    )\n    default int rewardQuantity() {\n        return 1;\n    }\n\n    @ConfigItem(\n            section \u003d REWARD_TRACKING,\n            keyName \u003d \"showResinBars\",\n            name \u003d \"Show Resin Bars\",\n            description \u003d \"Toggle to display or hide the resin progress bars\",\n            position \u003d 3\n    )\n    default boolean showResinBars() {\n        return true;\n    }\n}\n","filePath":"src\\main\\java\\work\\fking\\masteringmixology\\MasteringMixologyConfig.java"},{"fileName":"MasteringMixologyOverlay.java","content":"package work.fking.masteringmixology;\n\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.outline.ModelOutlineRenderer;\n\nimport javax.inject.Inject;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\n\npublic class MasteringMixologyOverlay extends Overlay {\n\n    private final MasteringMixologyPlugin plugin;\n    private final ModelOutlineRenderer modelOutlineRenderer;\n\n    @Inject\n    MasteringMixologyOverlay(MasteringMixologyPlugin plugin, ModelOutlineRenderer modelOutlineRenderer) {\n        this.plugin \u003d plugin;\n        this.modelOutlineRenderer \u003d modelOutlineRenderer;\n        setPosition(OverlayPosition.DYNAMIC);\n        setLayer(OverlayLayer.ABOVE_SCENE);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        for (var highlightedObject : plugin.highlightedObjects().values()) {\n            modelOutlineRenderer.drawOutline(highlightedObject.object(), highlightedObject.outlineWidth(), highlightedObject.color(), highlightedObject.feather());\n        }\n        return null;\n    }\n}\n","filePath":"src\\main\\java\\work\\fking\\masteringmixology\\MasteringMixologyOverlay.java"},{"fileName":"MasteringMixologyPlugin.java","content":"package work.fking.masteringmixology;\n\nimport com.google.inject.Provides;\nimport net.runelite.api.Client;\nimport net.runelite.api.FontID;\nimport net.runelite.api.GameState;\nimport net.runelite.api.Player;\nimport net.runelite.api.TileObject;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GraphicsObjectCreated;\nimport net.runelite.api.events.ItemContainerChanged;\nimport net.runelite.api.events.ScriptPostFired;\nimport net.runelite.api.events.SoundEffectPlayed;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.api.events.WidgetClosed;\nimport net.runelite.api.events.WidgetLoaded;\nimport net.runelite.api.gameval.InterfaceID;\nimport net.runelite.api.gameval.InventoryID;\nimport net.runelite.api.gameval.SpotanimID;\nimport net.runelite.api.gameval.VarPlayerID;\nimport net.runelite.api.gameval.VarbitID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetPositionMode;\nimport net.runelite.api.widgets.WidgetTextAlignment;\nimport net.runelite.api.widgets.WidgetType;\nimport net.runelite.client.Notifier;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport javax.inject.Inject;\nimport java.awt.Color;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.LinkedHashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.function.Predicate;\nimport java.util.stream.Collectors;\n\nimport static work.fking.masteringmixology.AlchemyObject.AGA_LEVER;\nimport static work.fking.masteringmixology.AlchemyObject.LYE_LEVER;\nimport static work.fking.masteringmixology.AlchemyObject.MOX_LEVER;\nimport static work.fking.masteringmixology.PotionComponent.AGA;\nimport static work.fking.masteringmixology.PotionComponent.LYE;\nimport static work.fking.masteringmixology.PotionComponent.MOX;\n\n@PluginDescriptor(name \u003d \"Mastering Mixology\")\npublic class MasteringMixologyPlugin extends Plugin {\n\n    private static final Logger LOGGER \u003d LoggerFactory.getLogger(MasteringMixologyPlugin.class);\n\n    private static final int PROC_MASTERING_MIXOLOGY_BUILD_POTION_ORDERS \u003d 7063;\n    private static final int PROC_MASTERING_MIXOLOGY_BUILD_REAGENTS \u003d 7064;\n\n    private static final int VARBIT_POTION_ORDER_1 \u003d VarbitID.MM_LAB_ORDER_1_TYPE;\n    private static final int VARBIT_POTION_MODIFIER_1 \u003d VarbitID.MM_LAB_ORDER_1_MODIFIER;\n    private static final int VARBIT_POTION_ORDER_2 \u003d VarbitID.MM_LAB_ORDER_2_TYPE;\n    private static final int VARBIT_POTION_MODIFIER_2 \u003d VarbitID.MM_LAB_ORDER_2_MODIFIER;\n    private static final int VARBIT_POTION_ORDER_3 \u003d VarbitID.MM_LAB_ORDER_3_TYPE;\n    private static final int VARBIT_POTION_MODIFIER_3 \u003d VarbitID.MM_LAB_ORDER_3_MODIFIER;\n\n    static final int VARP_LYE_RESIN \u003d VarPlayerID.MIXOLOGY_LYE_POINTS;\n    static final int VARP_AGA_RESIN \u003d VarPlayerID.MIXOLOGY_AGA_POINTS;\n    static final int VARP_MOX_RESIN \u003d VarPlayerID.MIXOLOGY_MOX_POINTS;\n\n    private static final int VARBIT_ALEMBIC_PROGRESS \u003d VarbitID.MM_ALEMBIC_PROGRESS;\n    private static final int VARBIT_AGITATOR_PROGRESS \u003d VarbitID.MM_AGITATOR_PROGRESS;\n\n    private static final int VARBIT_AGITATOR_QUICKACTION \u003d VarbitID.MM_LAB_HIT_SKILLSHOT_AGITATOR;\n    private static final int VARBIT_ALEMBIC_QUICKACTION \u003d VarbitID.MM_LAB_HIT_SKILLSHOT_ALEMBIC;\n\n    private static final int VARBIT_MIXING_VESSEL_POTION \u003d VarbitID.MM_LAB_VESSEL_READY;\n    private static final int VARBIT_AGITATOR_POTION \u003d VarbitID.MM_LAB_AGITATOR_POTION;\n    private static final int VARBIT_RETORT_POTION \u003d VarbitID.MM_LAB_RETORT_POTION;\n    private static final int VARBIT_ALEMBIC_POTION \u003d VarbitID.MM_LAB_ALEMBIC_POTION;\n\n    private static final int VARBIT_DIGWEED_NORTH_EAST \u003d VarbitID.MM_HERB_READY_1;\n    private static final int VARBIT_DIGWEED_SOUTH_EAST \u003d VarbitID.MM_HERB_READY_2;\n    private static final int VARBIT_DIGWEED_SOUTH_WEST \u003d VarbitID.MM_HERB_READY_3;\n    private static final int VARBIT_DIGWEED_NORTH_WEST \u003d VarbitID.MM_HERB_READY_4;\n\n    private static final int SPOT_ANIM_AGITATOR \u003d SpotanimID.VFX_MACHINERY_ALCHEMY01_AGITATOR01;\n    private static final int SPOT_ANIM_ALEMBIC \u003d SpotanimID.VFX_MACHINERY_ALCHEMY01_ALEMBIC01;\n\n    private static final int COMPONENT_POTION_ORDERS_GROUP_ID \u003d InterfaceID.MM_OVERLAY;\n    private static final int COMPONENT_POTION_ORDERS \u003d InterfaceID.MmOverlay.CONTENT;\n\n    private static final int LABS_REGION_ID \u003d 5521;\n    private static final int LABS_REGION_PLANE \u003d 0;\n\n    private static final int FOUND_GEM \u003d 2655;\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private MasteringMixologyConfig config;\n\n    @Inject\n    private OverlayManager overlayManager;\n\n    @Inject\n    private Notifier notifier;\n\n    @Inject\n    private ClientThread clientThread;\n\n    @Inject\n    private MasteringMixologyOverlay overlay;\n\n    @Inject\n    private InventoryPotionOverlay potionOverlay;\n\n    @Inject\n    private GoalInfoBoxOverlay goalInfoBoxOverlay;\n\n    private final Map\u003cAlchemyObject, HighlightedObject\u003e highlightedObjects \u003d new LinkedHashMap\u003c\u003e();\n    private List\u003cPotionOrder\u003e potionOrders \u003d Collections.emptyList();\n    private boolean inLab \u003d false;\n\n    private PotionType alembicPotionType;\n    private PotionType agitatorPotionType;\n    private PotionType retortPotionType;\n\n    private int previousAgitatorProgess;\n    private int previousAlembicProgress;\n\n    private int agitatorQuickActionTicks \u003d 0;\n    private int alembicQuickActionTicks \u003d 0;\n\n    private final Goal goal \u003d new Goal(RewardItem.NONE);\n\n    public Map\u003cAlchemyObject, HighlightedObject\u003e highlightedObjects() {\n        return highlightedObjects;\n    }\n\n    public boolean isInLab() {\n        return inLab;\n    }\n\n    /**\n     * @return true if the player is in the labs region (the area where the minigame takes place)\n     * the isInlab method only checks if they are inside the actual lab room where the UI is active\n     */\n    public boolean isInLabRegion() {\n        Player player \u003d client.getLocalPlayer();\n        return player !\u003d null \u0026\u0026 player.getWorldLocation().getRegionID() \u003d\u003d LABS_REGION_ID\n                \u0026\u0026 player.getWorldLocation().getPlane() \u003d\u003d LABS_REGION_PLANE;\n    }\n\n    @Provides\n    MasteringMixologyConfig provideConfig(ConfigManager configManager) {\n        return configManager.getConfig(MasteringMixologyConfig.class);\n    }\n\n    @Override\n    protected void startUp() {\n        overlayManager.add(overlay);\n        overlayManager.add(potionOverlay);\n        overlayManager.add(goalInfoBoxOverlay);\n\n        if (client.getGameState() \u003d\u003d GameState.LOGGED_IN) {\n            clientThread.invokeLater(this::initialize);\n        }\n    }\n\n    @Override\n    protected void shutDown() {\n        overlayManager.remove(overlay);\n        overlayManager.remove(potionOverlay);\n        overlayManager.remove(goalInfoBoxOverlay);\n        inLab \u003d false;\n    }\n\n    @Subscribe\n    public void onGameStateChanged(GameStateChanged event) {\n        if (event.getGameState() \u003d\u003d GameState.LOGIN_SCREEN || event.getGameState() \u003d\u003d GameState.HOPPING) {\n            highlightedObjects.clear();\n        }\n    }\n\n    @Subscribe\n    public void onWidgetLoaded(WidgetLoaded event) {\n        if (event.getGroupId() !\u003d COMPONENT_POTION_ORDERS_GROUP_ID) {\n            return;\n        }\n        initialize();\n    }\n\n    @Subscribe\n    public void onWidgetClosed(WidgetClosed event) {\n        if (event.getGroupId() !\u003d COMPONENT_POTION_ORDERS_GROUP_ID) {\n            return;\n        }\n\n        highlightedObjects.clear();\n        inLab \u003d false;\n    }\n\n    @Subscribe\n    public void onConfigChanged(ConfigChanged event) {\n        if (!event.getGroup().equals(MasteringMixologyConfig.CONFIG_GROUP)) {\n            return;\n        }\n\n        if (event.getKey().equals(\"potionOrderSorting\")) {\n            clientThread.invokeLater(this::updatePotionOrders);\n        }\n\n        if (event.getKey().equals(\"highlightStations\")) {\n            if (!config.highlightStations()) {\n                unHighlightAllStations();\n            } else {\n                clientThread.invokeLater(this::tryHighlightNextStation);\n            }\n        }\n\n        if (event.getKey().equals(\"displayResin\")) {\n            // Trigger the potion order update to refresh the resin display\n            clientThread.invokeLater(this::triggerPotionOrderUpdate);\n        }\n\n        if (!config.highlightDigWeed()) {\n            unHighlightObject(AlchemyObject.DIGWEED_NORTH_EAST);\n            unHighlightObject(AlchemyObject.DIGWEED_SOUTH_EAST);\n            unHighlightObject(AlchemyObject.DIGWEED_SOUTH_WEST);\n            unHighlightObject(AlchemyObject.DIGWEED_NORTH_WEST);\n        }\n\n        if (event.getKey().equals(\"selectedReward\") || event.getKey().equals(\"rewardQuantity\") || event.getKey().equals(\"showResinBars\")) {\n            recalculateGoalData();\n        }\n\n        if (config.highlightLevers()) {\n            highlightLevers();\n        } else {\n            unHighlightLevers();\n        }\n    }\n\n    @Subscribe\n    public void onItemContainerChanged(ItemContainerChanged event) {\n        if (!inLab || !config.highlightStations() || event.getContainerId() !\u003d InventoryID.INV) {\n            return;\n        }\n        // Do not update the highlight if there\u0027s a potion in a station\n        if (alembicPotionType !\u003d null || agitatorPotionType !\u003d null || retortPotionType !\u003d null) {\n            return;\n        }\n        var inventory \u003d event.getItemContainer();\n\n        // Find the first potion item and highlight its station\n        for (var item : inventory.getItems()) {\n            var potionType \u003d PotionType.fromItemId(item.getId());\n\n            if (potionType \u003d\u003d null || potionType.modifiedItemId() \u003d\u003d item.getId()) {\n                continue;\n            }\n            for (var order : potionOrders) {\n                if (order.potionType() \u003d\u003d potionType \u0026\u0026 !order.fulfilled()) {\n                    unHighlightAllStations();\n                    highlightObject(order.potionModifier().alchemyObject(), config.stationHighlightColor());\n                    return;\n                }\n            }\n        }\n    }\n\n    @Subscribe\n    public void onVarbitChanged(VarbitChanged event) {\n        var varbitId \u003d event.getVarbitId();\n        var varpId \u003d event.getVarpId();\n        var value \u003d event.getValue();\n\n        // Whenever a potion is delivered, all the potion order related varbits are reset to 0 first then\n        // set to the new values. We can use this to clear all the stations.\n        if (varbitId \u003d\u003d VARBIT_POTION_ORDER_1) {\n            if (value \u003d\u003d 0) {\n                unHighlightAllStations();\n            } else {\n                clientThread.invokeAtTickEnd(this::updatePotionOrders);\n            }\n        } else if (varbitId \u003d\u003d VARBIT_ALEMBIC_POTION) {\n            if (value \u003d\u003d 0) {\n                // Finished crystalising\n                unHighlightObject(AlchemyObject.ALEMBIC);\n                tryFulfillOrder(alembicPotionType, PotionModifier.CRYSTALISED);\n                tryHighlightNextStation();\n                LOGGER.debug(\"Finished crystalising {}\", alembicPotionType);\n                alembicPotionType \u003d null;\n            } else {\n                alembicPotionType \u003d PotionType.fromIdx(value - 1);\n                LOGGER.debug(\"Alembic potion type: {}\", alembicPotionType);\n            }\n        } else if (varbitId \u003d\u003d VARBIT_AGITATOR_POTION) {\n            if (value \u003d\u003d 0) {\n                // Finished homogenising\n                unHighlightObject(AlchemyObject.AGITATOR);\n                tryFulfillOrder(agitatorPotionType, PotionModifier.HOMOGENOUS);\n                tryHighlightNextStation();\n                LOGGER.debug(\"Finished homogenising {}\", agitatorPotionType);\n                agitatorPotionType \u003d null;\n            } else {\n                agitatorPotionType \u003d PotionType.fromIdx(value - 1);\n                LOGGER.debug(\"Agitator potion type: {}\", agitatorPotionType);\n            }\n        } else if (varbitId \u003d\u003d VARBIT_RETORT_POTION) {\n            if (value \u003d\u003d 0) {\n                // Finished concentrating\n                unHighlightObject(AlchemyObject.RETORT);\n                tryFulfillOrder(retortPotionType, PotionModifier.CONCENTRATED);\n                tryHighlightNextStation();\n                LOGGER.debug(\"Finished concentrating {}\", retortPotionType);\n                retortPotionType \u003d null;\n            } else {\n                retortPotionType \u003d PotionType.fromIdx(value - 1);\n                LOGGER.debug(\"Retort potion type: {}\", retortPotionType);\n            }\n        } else if (varbitId \u003d\u003d VARBIT_DIGWEED_NORTH_EAST) {\n            if (value \u003d\u003d 1) {\n                if (config.highlightDigWeed()) {\n                    highlightObject(AlchemyObject.DIGWEED_NORTH_EAST, config.digweedHighlightColor());\n                }\n                notifier.notify(config.notifyDigWeed(), \"A digweed has spawned north east.\");\n            } else {\n                unHighlightObject(AlchemyObject.DIGWEED_NORTH_EAST);\n            }\n        } else if (varbitId \u003d\u003d VARBIT_DIGWEED_SOUTH_EAST) {\n            if (value \u003d\u003d 1) {\n                if (config.highlightDigWeed()) {\n                    highlightObject(AlchemyObject.DIGWEED_SOUTH_EAST, config.digweedHighlightColor());\n                }\n                notifier.notify(config.notifyDigWeed(), \"A digweed has spawned south east.\");\n            } else {\n                unHighlightObject(AlchemyObject.DIGWEED_SOUTH_EAST);\n            }\n        } else if (varbitId \u003d\u003d VARBIT_DIGWEED_SOUTH_WEST) {\n            if (value \u003d\u003d 1) {\n                if (config.highlightDigWeed()) {\n                    highlightObject(AlchemyObject.DIGWEED_SOUTH_WEST, config.digweedHighlightColor());\n                }\n                notifier.notify(config.notifyDigWeed(), \"A digweed has spawned south west.\");\n            } else {\n                unHighlightObject(AlchemyObject.DIGWEED_SOUTH_WEST);\n            }\n        } else if (varbitId \u003d\u003d VARBIT_DIGWEED_NORTH_WEST) {\n            if (value \u003d\u003d 1) {\n                if (config.highlightDigWeed()) {\n                    highlightObject(AlchemyObject.DIGWEED_NORTH_WEST, config.digweedHighlightColor());\n                }\n                notifier.notify(config.notifyDigWeed(), \"A digweed has spawned north west.\");\n            } else {\n                unHighlightObject(AlchemyObject.DIGWEED_NORTH_WEST);\n            }\n        } else if (varbitId \u003d\u003d VARBIT_AGITATOR_PROGRESS) {\n            if (agitatorQuickActionTicks \u003d\u003d 2) {\n                // quick action was triggered two ticks ago, so it\u0027s now too late\n                resetStationHighlight(AlchemyObject.AGITATOR);\n                agitatorQuickActionTicks \u003d 0;\n            }\n            if (agitatorQuickActionTicks \u003d\u003d 1) {\n                agitatorQuickActionTicks \u003d 2;\n            }\n            if (value \u003c previousAgitatorProgess) {\n                // progress was set back due to a quick action failure\n                resetStationHighlight(AlchemyObject.AGITATOR);\n            }\n            previousAgitatorProgess \u003d value;\n        } else if (varbitId \u003d\u003d VARBIT_ALEMBIC_PROGRESS) {\n            if (alembicQuickActionTicks \u003d\u003d 1) {\n                // quick action was triggered last tick, so it\u0027s now too late\n                resetStationHighlight(AlchemyObject.ALEMBIC);\n                alembicQuickActionTicks \u003d 0;\n            }\n            if (value \u003c previousAlembicProgress) {\n                // progress was set back due to a quick action failure\n                resetStationHighlight(AlchemyObject.ALEMBIC);\n            }\n            previousAlembicProgress \u003d value;\n        } else if (varbitId \u003d\u003d VARBIT_AGITATOR_QUICKACTION) {\n            // agitator quick action was just successfully popped\n            resetStationHighlight(AlchemyObject.AGITATOR);\n        } else if (varbitId \u003d\u003d VARBIT_ALEMBIC_QUICKACTION) {\n            // alembic quick action was just successfully popped\n            resetStationHighlight(AlchemyObject.ALEMBIC);\n        } else if (varpId \u003d\u003d VARP_MOX_RESIN || varpId \u003d\u003d VARP_AGA_RESIN || varpId \u003d\u003d VARP_LYE_RESIN) {\n            recalculateGoalData();\n        }\n    }\n\n    @Subscribe\n    public void onSoundEffectPlayed(SoundEffectPlayed event) {\n        if (inLab \u0026\u0026 alembicPotionType !\u003d null \u0026\u0026 event.getSoundId() \u003d\u003d FOUND_GEM \u0026\u0026 config.soundEffectAlembic()) {\n            LOGGER.debug(\"client found_gem sound effect detected during Alembic, blocking\");\n            event.consume();\n        }\n    }\n\n    @Subscribe\n    public void onGraphicsObjectCreated(GraphicsObjectCreated event) {\n        var spotAnimId \u003d event.getGraphicsObject().getId();\n\n        if (!config.highlightQuickActionEvents()) {\n            return;\n        }\n        if (spotAnimId \u003d\u003d SPOT_ANIM_ALEMBIC \u0026\u0026 alembicPotionType !\u003d null) {\n            highlightObject(AlchemyObject.ALEMBIC, config.stationQuickActionHighlightColor());\n\n            if (config.soundEffectAlembic()) {\n                LOGGER.debug(\"Playing manual found_gem sound effect\");\n                client.playSoundEffect(FOUND_GEM);\n            }\n\n            // start counting ticks for alembic so we know to un-highlight on the next alembic varbit update\n            // note this quick action has a 1 tick window, so we use an int that goes 0 -\u003e 1 -\u003e unhighlight\n            alembicQuickActionTicks \u003d 1;\n        }\n\n        if (spotAnimId \u003d\u003d SPOT_ANIM_AGITATOR \u0026\u0026 agitatorPotionType !\u003d null) {\n            highlightObject(AlchemyObject.AGITATOR, config.stationQuickActionHighlightColor());\n            // start counting ticks for agitator so we know to un-highlight on the next agitator varbit update\n            // note this quick action has a 2-tick window, so we use an int that goes 0 -\u003e 1 -\u003e 2 -\u003e unhighlight\n            agitatorQuickActionTicks \u003d 1;\n        }\n    }\n\n    @Subscribe\n    public void onScriptPostFired(ScriptPostFired event) {\n        var scriptId \u003d event.getScriptId();\n        if (scriptId !\u003d PROC_MASTERING_MIXOLOGY_BUILD_POTION_ORDERS \u0026\u0026 scriptId !\u003d PROC_MASTERING_MIXOLOGY_BUILD_REAGENTS) {\n            return;\n        }\n        var baseWidget \u003d client.getWidget(COMPONENT_POTION_ORDERS);\n\n        if (baseWidget \u003d\u003d null) {\n            return;\n        }\n        if (scriptId \u003d\u003d PROC_MASTERING_MIXOLOGY_BUILD_POTION_ORDERS) {\n            updatePotionOrdersComponent(baseWidget);\n        } else {\n            appendResins(baseWidget);\n        }\n    }\n\n    private void updatePotionOrdersComponent(Widget baseWidget) {\n        // https://github.com/Joshua-F/cs2-scripts/blob/7cc261be62a40a6390de3e1f770259038660af10/scripts/%5Bproc%2Cscript7063%5D.cs2#L26\n        var children \u003d selectChildren(baseWidget, widget -\u003e widget.getType() \u003d\u003d WidgetType.GRAPHIC || widget.getType() \u003d\u003d WidgetType.TEXT);\n\n        if (children.isEmpty()) {\n            return;\n        }\n        /*\n         * Filtered children layout:\n         * TEXT - Potion Orders\n         * GRAPHIC - 5673\n         * TEXT - Mammoth-might mix\n         * GRAPHIC - 5672\n         * TEXT - \u003cstr\u003eMixalot\u003c/str\u003e\n         * GRAPHIC - 5673\n         * TEXT - Marley\u0027s moonlight\n         */\n        for (int i \u003d 0; i \u003c potionOrders.size(); i++) {\n            var order \u003d potionOrders.get(i);\n            LOGGER.debug(\"Updating component for order {}\", order);\n            var orderGraphic \u003d children.get(order.idx() * 2 + 1);\n            var orderText \u003d children.get(order.idx() * 2 + 2);\n\n            if (orderGraphic.getType() !\u003d WidgetType.GRAPHIC || orderText.getType() !\u003d WidgetType.TEXT) {\n                LOGGER.debug(\"Eep Eep! Selected the wrong components!\");\n                continue;\n            }\n            var builder \u003d new StringBuilder(orderText.getText());\n\n            if (order.fulfilled()) {\n                builder.append(\" (\u003ccol\u003d00ff00\u003edone!\u003c/col\u003e)\");\n            } else {\n                builder.append(\" (\").append(order.potionType().recipe()).append(\")\");\n            }\n            orderText.setText(builder.toString());\n\n            if (i !\u003d order.idx()) {\n                LOGGER.debug(\"Updating order {} position from {} to {}\", order, order.idx(), i);\n                // update component position\n                var y \u003d 20 + (i * 26) + 3;\n                orderGraphic.setOriginalY(y);\n                orderText.setOriginalY(y);\n\n                orderGraphic.revalidate();\n                orderText.revalidate();\n            }\n        }\n    }\n\n    private List\u003cWidget\u003e selectChildren(Widget parent, Predicate\u003cWidget\u003e filter) {\n        var children \u003d parent.getChildren();\n\n        if (children \u003d\u003d null) {\n            return List.of();\n        }\n        return Arrays.stream(children)\n                     .filter(filter)\n                     .collect(Collectors.toUnmodifiableList());\n    }\n\n    private void appendResins(Widget baseWidget) {\n        if (!config.displayResin()) {\n            return;\n        }\n        var parentWidth \u003d baseWidget.getWidth();\n        var dx \u003d parentWidth / 3;\n        int x \u003d dx / 2;\n\n        addResinText(baseWidget.createChild(-1, WidgetType.TEXT), x, VARP_MOX_RESIN, MOX);\n        addResinText(baseWidget.createChild(-1, WidgetType.TEXT), x + dx, VARP_AGA_RESIN, AGA);\n        addResinText(baseWidget.createChild(-1, WidgetType.TEXT), x + dx * 2, VARP_LYE_RESIN, LYE);\n    }\n\n    private void initialize() {\n        var ordersLayer \u003d client.getWidget(COMPONENT_POTION_ORDERS_GROUP_ID, 0);\n        if (ordersLayer \u003d\u003d null || ordersLayer.isSelfHidden()) {\n            return;\n        }\n\n        LOGGER.debug(\"initialize plugin\");\n        inLab \u003d true;\n        updatePotionOrders();\n        highlightLevers();\n        tryHighlightNextStation();\n    }\n\n    public void highlightObject(AlchemyObject alchemyObject, Color color) {\n        var worldView \u003d client.getTopLevelWorldView();\n\n        if (worldView \u003d\u003d null) {\n            return;\n        }\n        var localPoint \u003d LocalPoint.fromWorld(worldView, alchemyObject.coordinate());\n\n        if (localPoint \u003d\u003d null) {\n            return;\n        }\n        var tiles \u003d worldView.getScene().getTiles();\n        var tile \u003d tiles[worldView.getPlane()][localPoint.getSceneX()][localPoint.getSceneY()];\n\n        for (var gameObject : tile.getGameObjects()) {\n            if (gameObject \u003d\u003d null) {\n                continue;\n            }\n\n            if (gameObject.getId() \u003d\u003d alchemyObject.objectId()) {\n                highlightedObjects.put(alchemyObject, new HighlightedObject(gameObject, color, config.highlightBorderWidth(), config.highlightFeather()));\n                return;\n            }\n        }\n        // The aga lever is actually a wall decoration, not a scenery object\n        var decorativeObject \u003d tile.getDecorativeObject();\n\n        if (decorativeObject !\u003d null \u0026\u0026 decorativeObject.getId() \u003d\u003d alchemyObject.objectId()) {\n            highlightedObjects.put(alchemyObject, new HighlightedObject(decorativeObject, color, config.highlightBorderWidth(), config.highlightFeather()));\n        }\n    }\n\n    public void resetStationHighlight(AlchemyObject alchemyObject) {\n        if (config.highlightStations()) {\n            highlightObject(alchemyObject, config.stationHighlightColor());\n        }\n    }\n\n    public void unHighlightObject(AlchemyObject alchemyObject) {\n        highlightedObjects.remove(alchemyObject);\n    }\n\n    private void unHighlightAllStations() {\n        unHighlightObject(AlchemyObject.RETORT);\n        unHighlightObject(AlchemyObject.ALEMBIC);\n        unHighlightObject(AlchemyObject.AGITATOR);\n    }\n\n    private void highlightLevers() {\n        if (!config.highlightLevers()) {\n            return;\n        }\n\n        highlightObject(LYE_LEVER, LYE.color());\n        highlightObject(AGA_LEVER, AGA.color());\n        highlightObject(MOX_LEVER, MOX.color());\n    }\n\n    private void unHighlightLevers() {\n        unHighlightObject(LYE_LEVER);\n        unHighlightObject(AGA_LEVER);\n        unHighlightObject(MOX_LEVER);\n    }\n\n    private void updatePotionOrders() {\n        LOGGER.debug(\"Updating potion orders\");\n        potionOrders \u003d getPotionOrders();\n\n        var potionOrderSorting \u003d config.potionOrderSorting();\n\n        if (potionOrderSorting !\u003d PotionOrderSorting.VANILLA) {\n            LOGGER.debug(\"Orders pre-sort: {}\", potionOrders);\n            potionOrders.sort(potionOrderSorting.comparator());\n            LOGGER.debug(\"Sorted orders: {}\", potionOrders);\n        }\n\n        triggerPotionOrderUpdate();\n    }\n\n    public void triggerPotionOrderUpdate() {\n        // Trigger a fake varbit update to force run the clientscript proc\n        var varbitType \u003d client.getVarbit(VARBIT_POTION_ORDER_1);\n\n        if (varbitType !\u003d null) {\n            client.queueChangedVarp(varbitType.getIndex());\n        }\n    }\n\n    private void addResinText(Widget widget, int x, int varp, PotionComponent component) {\n        var amount \u003d client.getVarpValue(varp);\n        var color \u003d component.color().getRGB();\n\n        widget.setText(amount + \"\")\n              .setTextShadowed(true)\n              .setTextColor(color)\n              .setOriginalWidth(20)\n              .setOriginalHeight(15)\n              .setFontId(FontID.QUILL_8)\n              .setOriginalY(0)\n              .setOriginalX(x)\n              .setYPositionMode(WidgetPositionMode.ABSOLUTE_BOTTOM)\n              .setXTextAlignment(WidgetTextAlignment.CENTER)\n              .setYTextAlignment(WidgetTextAlignment.CENTER);\n\n        widget.revalidate();\n        LOGGER.debug(\"adding resin text {} at {} with color {}\", amount, x, color);\n    }\n\n    private void tryFulfillOrder(PotionType potionType, PotionModifier modifier) {\n        for (var order : potionOrders) {\n            if (order.potionType() \u003d\u003d potionType \u0026\u0026 order.potionModifier() \u003d\u003d modifier \u0026\u0026 !order.fulfilled()) {\n                LOGGER.debug(\"Order {} has been fulfilled\", order);\n                order.setFulfilled(true);\n                break;\n            }\n        }\n    }\n\n    private void tryHighlightNextStation() {\n        if (!config.highlightStations()) {\n            return;\n        }\n        var inventory \u003d client.getItemContainer(InventoryID.INV);\n\n        if (inventory \u003d\u003d null) {\n            return;\n        }\n\n        for (var order : potionOrders) {\n            if (order.fulfilled()) {\n                continue;\n            }\n            if (inventory.contains(order.potionType().itemId())) {\n                LOGGER.debug(\"Highlighting station for order {}\", order);\n                highlightObject(order.potionModifier().alchemyObject(), config.stationHighlightColor());\n                break;\n            }\n        }\n    }\n\n    private List\u003cPotionOrder\u003e getPotionOrders() {\n        var potionOrders \u003d new ArrayList\u003cPotionOrder\u003e(3);\n\n        for (int orderIdx \u003d 0; orderIdx \u003c 3; orderIdx++) {\n            var potionType \u003d getPotionType(orderIdx);\n            var potionModifier \u003d getPotionModifier(orderIdx);\n\n            if (potionType \u003d\u003d null || potionModifier \u003d\u003d null) {\n                continue;\n            }\n            potionOrders.add(new PotionOrder(orderIdx, potionType, potionModifier));\n        }\n        return potionOrders;\n    }\n\n    private PotionType getPotionType(int orderIdx) {\n        if (orderIdx \u003d\u003d 0) {\n            return PotionType.fromIdx(client.getVarbitValue(VARBIT_POTION_ORDER_1) - 1);\n        } else if (orderIdx \u003d\u003d 1) {\n            return PotionType.fromIdx(client.getVarbitValue(VARBIT_POTION_ORDER_2) - 1);\n        } else if (orderIdx \u003d\u003d 2) {\n            return PotionType.fromIdx(client.getVarbitValue(VARBIT_POTION_ORDER_3) - 1);\n        } else {\n            return null;\n        }\n    }\n\n    private PotionModifier getPotionModifier(int orderIdx) {\n        if (orderIdx \u003d\u003d 0) {\n            return PotionModifier.from(client.getVarbitValue(VARBIT_POTION_MODIFIER_1) - 1);\n        } else if (orderIdx \u003d\u003d 1) {\n            return PotionModifier.from(client.getVarbitValue(VARBIT_POTION_MODIFIER_2) - 1);\n        } else if (orderIdx \u003d\u003d 2) {\n            return PotionModifier.from(client.getVarbitValue(VARBIT_POTION_MODIFIER_3) - 1);\n        } else {\n            return null;\n        }\n    }\n\n    public Goal getGoal() {\n        return goal;\n    }\n\n    private void recalculateGoalData() {\n        goal.recalculate(config, client);\n    }\n\n    public static class HighlightedObject {\n\n        private final TileObject object;\n        private final Color color;\n        private final int outlineWidth;\n        private final int feather;\n\n        private HighlightedObject(TileObject object, Color color, int outlineWidth, int feather) {\n            this.object \u003d object;\n            this.color \u003d color;\n            this.outlineWidth \u003d outlineWidth;\n            this.feather \u003d feather;\n        }\n\n        public TileObject object() {\n            return object;\n        }\n\n        public Color color() {\n            return color;\n        }\n\n        public int outlineWidth() {\n            return outlineWidth;\n        }\n\n        public int feather() {\n            return feather;\n        }\n    }\n}\n","filePath":"src\\main\\java\\work\\fking\\masteringmixology\\MasteringMixologyPlugin.java"},{"fileName":"PotionComparators.java","content":"package work.fking.masteringmixology;\n\nimport java.util.Comparator;\n\npublic class PotionComparators {\n    // Sort by modifier, in the order CRYSTALISED \u003e HOMOGENOUS \u003e CONCENTRATED\n    // And then by PotionType name alphabetically\n    public static Comparator\u003cPotionOrder\u003e byStation() {\n        return Comparator.comparingInt((PotionOrder order) -\u003e {\n                    switch (order.potionModifier()) {\n                        case CRYSTALISED:\n                            return 0;\n                        case HOMOGENOUS:\n                            return 1;\n                        case CONCENTRATED:\n                            return 2;\n                        default:\n                            return Integer.MAX_VALUE;\n                    }\n                })\n                .thenComparing(order -\u003e order.potionType().name());\n    }\n\n    public static Comparator\u003cPotionOrder\u003e shortestPath() {\n        return Comparator.comparing(order -\u003e {\n            switch (order.potionModifier()) {\n                case CRYSTALISED:\n                    return 1;\n                case CONCENTRATED:\n                    return 2;\n                case HOMOGENOUS:\n                    return 3;\n                default:\n                    throw new IllegalStateException(\"Unexpected value: \" + order.potionModifier().toString());\n            }\n        });\n    }\n}\n","filePath":"src\\main\\java\\work\\fking\\masteringmixology\\PotionComparators.java"},{"fileName":"PotionComponent.java","content":"package work.fking.masteringmixology;\n\nimport java.awt.Color;\nimport net.runelite.api.gameval.SpriteID;\n\npublic enum PotionComponent {\n    MOX(\u0027M\u0027, \"03a9f4\", SpriteID.IconAlchemyChemicals01_20x20._0, MasteringMixologyPlugin.VARP_MOX_RESIN),\n    AGA(\u0027A\u0027, \"00e676\", SpriteID.IconAlchemyChemicals01_20x20._1, MasteringMixologyPlugin.VARP_AGA_RESIN),\n    LYE(\u0027L\u0027, \"e91e63\", SpriteID.IconAlchemyChemicals01_20x20._2, MasteringMixologyPlugin.VARP_LYE_RESIN);\n\n    public static final PotionComponent[] ENTRIES \u003d values();\n\n    private final char character;\n    private final String colorCode;\n    private final Color color;\n    private final int spriteId;\n    private final int resinVarpId;\n\n    PotionComponent(char character, String colorCode, int spriteId, int resinVarpId) {\n        this.character \u003d character;\n        this.colorCode \u003d colorCode;\n        this.color \u003d Color.decode(\"#\" + colorCode);\n        this.spriteId \u003d spriteId;\n        this.resinVarpId \u003d resinVarpId;\n    }\n\n    public char character() {\n        return character;\n    }\n\n    public String colorCode() {\n        return colorCode;\n    }\n\n    public Color color() {\n        return color;\n    }\n\n    public int spriteId() {\n        return spriteId;\n    }\n\n    public int resinVarpId() {\n        return resinVarpId;\n    }\n}\n","filePath":"src\\main\\java\\work\\fking\\masteringmixology\\PotionComponent.java"},{"fileName":"PotionModifier.java","content":"package work.fking.masteringmixology;\n\npublic enum PotionModifier {\n    // Clicking the quick-time event on the Agitator gives 14 experience, this event can happen 1-2 times\n    HOMOGENOUS(AlchemyObject.AGITATOR, 21),\n    // Each click on the Retort gives 2 experience for a max of 10 clicks\n    CONCENTRATED(AlchemyObject.RETORT, 20),\n    // Clicking the quick-time event on the Alembic gives 14 experience\n    CRYSTALISED(AlchemyObject.ALEMBIC, 14);\n\n    private static final PotionModifier[] TYPES \u003d PotionModifier.values();\n\n    private final AlchemyObject alchemyObject;\n    private final int quickActionExperience;\n\n    PotionModifier(AlchemyObject alchemyObject, int quickActionExperience) {\n        this.alchemyObject \u003d alchemyObject;\n        this.quickActionExperience \u003d quickActionExperience;\n    }\n\n    public static PotionModifier from(int potionModifierId) {\n        if (potionModifierId \u003c 0 || potionModifierId \u003e\u003d TYPES.length) {\n            return null;\n        }\n        return TYPES[potionModifierId];\n    }\n\n    public AlchemyObject alchemyObject() {\n        return alchemyObject;\n    }\n\n    public int quickActionExperience() {\n        return quickActionExperience;\n    }\n}\n","filePath":"src\\main\\java\\work\\fking\\masteringmixology\\PotionModifier.java"},{"fileName":"PotionOrder.java","content":"package work.fking.masteringmixology;\n\npublic class PotionOrder {\n\n    private final int idx;\n    private final PotionType potionType;\n    private final PotionModifier potionModifier;\n\n    private boolean fulfilled;\n\n    public PotionOrder(int idx, PotionType potionType, PotionModifier potionModifier) {\n        this.idx \u003d idx;\n        this.potionType \u003d potionType;\n        this.potionModifier \u003d potionModifier;\n    }\n\n    public int idx() {\n        return idx;\n    }\n\n    public PotionType potionType() {\n        return potionType;\n    }\n\n    public PotionModifier potionModifier() {\n        return potionModifier;\n    }\n\n    public void setFulfilled(boolean fulfilled) {\n        this.fulfilled \u003d fulfilled;\n    }\n\n    public boolean fulfilled() {\n        return fulfilled;\n    }\n\n    @Override\n    public String toString() {\n        return \"PotionOrder{\" +\n                \"idx\u003d\" + idx +\n                \", potionType\u003d\" + potionType +\n                \", potionModifier\u003d\" + potionModifier +\n                \u0027}\u0027;\n    }\n}\n","filePath":"src\\main\\java\\work\\fking\\masteringmixology\\PotionOrder.java"},{"fileName":"PotionOrderSorting.java","content":"package work.fking.masteringmixology;\n\nimport java.util.Comparator;\n\npublic enum PotionOrderSorting {\n    VANILLA(\"Vanilla (random)\", null),\n    BY_STATION(\"By station\", PotionComparators.byStation()),\n    SHORTEST_PATH(\"Shortest Path\", PotionComparators.shortestPath());\n\n    private final String name;\n    private final Comparator\u003cPotionOrder\u003e comparator;\n\n    PotionOrderSorting(String name, Comparator\u003cPotionOrder\u003e comparator) {\n        this.name \u003d name;\n        this.comparator \u003d comparator;\n    }\n\n    public Comparator\u003cPotionOrder\u003e comparator() {\n        return comparator;\n    }\n\n    @Override\n    public String toString() {\n        return name;\n    }\n}\n","filePath":"src\\main\\java\\work\\fking\\masteringmixology\\PotionOrderSorting.java"},{"fileName":"PotionType.java","content":"package work.fking.masteringmixology;\n\nimport com.google.common.collect.ImmutableMap;\n\nimport java.util.Arrays;\nimport java.util.Map;\n\nimport net.runelite.api.gameval.ItemID;\nimport static work.fking.masteringmixology.PotionComponent.AGA;\nimport static work.fking.masteringmixology.PotionComponent.LYE;\nimport static work.fking.masteringmixology.PotionComponent.MOX;\n\npublic enum PotionType {\n    MAMMOTH_MIGHT_MIX(ItemID.MM_POTION_MMM_UNFINISHED, ItemID.MM_POTION_MMM_FINISHED, 1900, MOX, MOX, MOX),\n    MYSTIC_MANA_AMALGAM(ItemID.MM_POTION_MMA_UNFINISHED, ItemID.MM_POTION_MMA_FINISHED, 2150, MOX, MOX, AGA),\n    MARLEYS_MOONLIGHT(ItemID.MM_POTION_MML_UNFINISHED, ItemID.MM_POTION_MML_FINISHED, 2400, MOX, MOX, LYE),\n    ALCO_AUGMENTATOR(ItemID.MM_POTION_AAA_UNFINISHED, ItemID.MM_POTION_AAA_FINISHED, 1900, AGA, AGA, AGA),\n    AZURE_AURA_MIX(ItemID.MM_POTION_AAM_UNFINISHED, ItemID.MM_POTION_AAM_FINISHED, 2650, AGA, AGA, MOX),\n    AQUALUX_AMALGAM(ItemID.MM_POTION_AAL_UNFINISHED, ItemID.MM_POTION_AAL_FINISHED, 2900, AGA, LYE, AGA),\n    LIPLACK_LIQUOR(ItemID.MM_POTION_LLL_UNFINISHED, ItemID.MM_POTION_LLL_FINISHED, 1900, LYE, LYE, LYE),\n    MEGALITE_LIQUID(ItemID.MM_POTION_LLM_UNFINISHED, ItemID.MM_POTION_LLM_FINISHED, 3150, MOX, LYE, LYE),\n    ANTI_LEECH_LOTION(ItemID.MM_POTION_LLA_UNFINISHED, ItemID.MM_POTION_LLA_FINISHED, 3400, AGA, LYE, LYE),\n    MIXALOT(ItemID.MM_POTION_MAL_UNFINISHED, ItemID.MM_POTION_MAL_FINISHED, 3650, MOX, AGA, LYE);\n\n    public static final PotionType[] TYPES \u003d PotionType.values();\n\n    private static final Map\u003cInteger, PotionType\u003e ITEM_MAP;\n\n    static {\n        var builder \u003d new ImmutableMap.Builder\u003cInteger, PotionType\u003e();\n        for (var p : PotionType.values()) {\n            builder.put(p.itemId(), p);\n            builder.put(p.modifiedItemId(), p);\n        }\n        ITEM_MAP \u003d builder.build();\n    }\n\n    private final int itemId;\n    private final int modifiedItemId;\n    private final String recipe;\n    private final String abbreviation;\n    private final int experience;\n    private final PotionComponent[] components;\n\n\n    PotionType(int itemId, int modifiedItemId, int experience, PotionComponent... components) {\n        this.itemId \u003d itemId;\n        this.modifiedItemId \u003d modifiedItemId;\n        this.recipe \u003d colorizeRecipe(components);\n        this.experience \u003d experience;\n        this.components \u003d components;\n        this.abbreviation \u003d \"\" + components[0].character() + components[1].character() + components[2].character();\n    }\n\n    public static PotionType fromItemId(int itemId) {\n        return ITEM_MAP.get(itemId);\n    }\n\n    public static PotionType fromIdx(int potionTypeId) {\n        if (potionTypeId \u003c 0 || potionTypeId \u003e\u003d TYPES.length) {\n            return null;\n        }\n        return TYPES[potionTypeId];\n    }\n\n    private static String colorizeRecipe(PotionComponent[] components) {\n        if (components.length !\u003d 3) {\n            throw new IllegalArgumentException(\"Invalid potion components: \" + Arrays.toString(components));\n        }\n        return colorizeRecipeComponent(components[0])\n                + colorizeRecipeComponent(components[1])\n                + colorizeRecipeComponent(components[2]);\n    }\n\n    private static String colorizeRecipeComponent(PotionComponent component) {\n        return \"\u003ccol\u003d\" + component.colorCode() + \"\u003e\" + component.character() + \"\u003c/col\u003e\";\n    }\n\n    public int itemId() {\n        return itemId;\n    }\n\n    public int modifiedItemId() {\n        return modifiedItemId;\n    }\n\n    public String recipe() {\n        return recipe;\n    }\n\n    public int experience() {\n        return experience;\n    }\n\n    public PotionComponent[] components() {\n        return components;\n    }\n\n    public String abbreviation() {\n        return abbreviation;\n    }\n}\n","filePath":"src\\main\\java\\work\\fking\\masteringmixology\\PotionType.java"},{"fileName":"RewardItem.java","content":"package work.fking.masteringmixology;\n\nimport net.runelite.api.gameval.ItemID;\nimport static work.fking.masteringmixology.PotionComponent.AGA;\nimport static work.fking.masteringmixology.PotionComponent.LYE;\nimport static work.fking.masteringmixology.PotionComponent.MOX;\n\npublic enum RewardItem {\n    NONE(\"None\", 0, false, 0, 0, 0),\n    APPRENTICE_POTION_PACK(\"Apprentice Potion Pack\", ItemID.MM_POTION_PACK_LOW, true, 420, 70, 30),\n    ADEPT_POTION_PACK(\"Adept Potion Pack\", ItemID.MM_POTION_PACK_MED, true, 180, 440, 70),\n    EXPERT_POTION_PACK(\"Expert Potion Pack\", ItemID.MM_POTION_PACK_HIGH, true, 410, 320, 480),\n    PRESCRIPTION_GOGGLES(\"Prescription Goggles\", ItemID.MM_ALCHEMIST_HAT, false, 8600, 7000, 9350),\n    ALCHEMIST_LABCOAT(\"Alchemist Labcoat\", ItemID.MM_ALCHEMIST_BODY, false, 2250, 2800, 3700),\n    ALCHEMIST_PANTS(\"Alchemist Pants\", ItemID.MM_ALCHEMIST_LEGS, false, 2250, 2800, 3700),\n    ALCHEMIST_GLOVES(\"Alchemist Gloves\", ItemID.MM_ALCHEMIST_GLOVES, false, 2250, 2800, 3700),\n    REAGENT_POUCH(\"Reagent Pouch\", ItemID.MM_SECONDARY_POUCH, false, 13800, 11200, 15100),\n    POTION_STORAGE(\"Potion Storage\", ItemID.MM_POTION_STORAGE_UNLOCK_DUMMY, false, 7750, 6300, 8950),\n    CHUGGING_BARREL(\"Chugging Barrel\", ItemID.MM_PREPOT_DEVICE, false, 17250, 14000, 18600),\n    ALCHEMISTS_AMULET(\"Alchemist\u0027s Amulet\", ItemID.AMULET_OF_CHEMISTRY_IMBUED_UNCHARGED, false, 6900, 5650, 7400),\n    ALDARIUM(\"Aldarium\", ItemID.ALDARIUM, true, 80, 60, 90);\n\n    private final String itemName;\n    private final int itemId;\n    private final boolean repeatable;\n    private final int[] componentCost \u003d new int[PotionComponent.ENTRIES.length];\n\n    RewardItem(String itemName, int itemId, boolean repeatable, int moxResinCost, int agaResinCost, int lyeResinCost) {\n        this.itemName \u003d itemName;\n        this.itemId \u003d itemId;\n        this.repeatable \u003d repeatable;\n        this.componentCost[MOX.ordinal()] \u003d moxResinCost;\n        this.componentCost[AGA.ordinal()] \u003d agaResinCost;\n        this.componentCost[LYE.ordinal()] \u003d lyeResinCost;\n    }\n\n    public String itemName() {\n        return itemName;\n    }\n\n    public int itemId() {\n        return itemId;\n    }\n\n    public boolean isRepeatable() {\n        return repeatable;\n    }\n\n    public int componentCost(PotionComponent component) {\n        return componentCost[component.ordinal()];\n    }\n}","filePath":"src\\main\\java\\work\\fking\\masteringmixology\\RewardItem.java"},{"fileName":"RunRuneLite.java","content":"package work.fking.masteringmixology;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class RunRuneLite {\n\n    public static void main(String[] args) throws Exception {\n        ExternalPluginManager.loadBuiltin(MasteringMixologyPlugin.class);\n        RuneLite.main(args);\n    }\n}","filePath":"src\\test\\java\\work\\fking\\masteringmixology\\RunRuneLite.java"}]},{"commit":"e2f1de2103548b05464c0c73998e52de1e482f83","repository":"https://github.com/SoaresPT/clue-scroll-notifier.git","internalName":"clue-scroll-notifier","files":[{"fileName":"ClueScrollNotifierConfig.java","content":"package com.cluescrollnotifier;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\nimport net.runelite.client.config.Range;\n\n@ConfigGroup(\"ClueScrollNotifier\")\npublic interface ClueScrollNotifierConfig extends Config {\n\n\t@ConfigSection(\n\t\t\tname \u003d \"General Settings\",\n\t\t\tdescription \u003d \"General configuration settings\",\n\t\t\tposition \u003d 0\n\t)\n\tString generalSettings \u003d \"generalSettings\";\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Notification Settings\",\n\t\t\tdescription \u003d \"Notification configuration settings\",\n\t\t\tposition \u003d 1\n\t)\n\tString notificationSettings \u003d \"notificationSettings\";\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Debug\",\n\t\t\tdescription \u003d \"Debug and testing options\",\n\t\t\tposition \u003d 2,\n\t\t\tclosedByDefault \u003d true\n\t)\n\tString debugSettings \u003d \"debugSettings\";\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"playSound\",\n\t\t\tname \u003d \"Play Sound\",\n\t\t\tdescription \u003d \"Toggle to play sound on clue scroll found.\",\n\t\t\tposition \u003d 0,\n\t\t\tsection \u003d generalSettings\n\t)\n\tdefault boolean playSound() {\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"customSoundFile\",\n\t\t\tname \u003d \"Custom Sound File\",\n\t\t\tdescription \u003d \"Select a custom sound file to play for notifications\",\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d generalSettings\n\t)\n\tdefault Sound customSoundFile() {\n\t\treturn Sound.CLUE1;\n\t}\n\n\t@Range(min \u003d 0, max \u003d 200)\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"announcementVolume\",\n\t\t\tname \u003d \"Sound Volume\",\n\t\t\tdescription \u003d \"Adjust how loud the sounds are played.\",\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d generalSettings\n\t)\n\tdefault int announcementVolume() {\n\t\treturn 100;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showNotification\",\n\t\t\tname \u003d \"Show Notification\",\n\t\t\tdescription \u003d \"Toggle to send a notification on clue scroll found.\",\n\t\t\tposition \u003d 2,\n\t\t\tsection \u003d generalSettings\n\t)\n\tdefault boolean showNotification() {\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"notifyClueNests\",\n\t\t\tname \u003d \"Notify on Clue Nests\",\n\t\t\tdescription \u003d \"Toggle to notify on clue nests falling from trees.\",\n\t\t\tposition \u003d 0,\n\t\t\tsection \u003d notificationSettings\n\t)\n\tdefault boolean notifyClueNests() {\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"notifyClueScrollDrops\",\n\t\t\tname \u003d \"Notify on Clue Scroll Drops\",\n\t\t\tdescription \u003d \"Toggle to notify on clue scroll drops. Make sure Untradeable loot notifications is enabled on the game settings.\",\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d notificationSettings\n\t)\n\tdefault boolean notifyClueScrollDrops() {\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"notifyPickpockets\",\n\t\t\tname \u003d \"Notify on Pickpockets\",\n\t\t\tdescription \u003d \"Toggle to notify on pickpocketing clues.\",\n\t\t\tposition \u003d 2,\n\t\t\tsection \u003d notificationSettings\n\t)\n\tdefault boolean notifyPickpockets() {\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"notifyFishing\",\n\t\t\tname \u003d \"Notify on Fishing\",\n\t\t\tdescription \u003d \"Toggle to notify on getting a clue bottle while fishing.\",\n\t\t\tposition \u003d 3,\n\t\t\tsection \u003d notificationSettings\n\t)\n\tdefault boolean notifyFishing() {\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"notifyMining\",\n\t\t\tname \u003d \"Notify on Mining\",\n\t\t\tdescription \u003d \"Toggle to notify on getting a clue geode while mining.\",\n\t\t\tposition \u003d 4,\n\t\t\tsection \u003d notificationSettings\n\t)\n\tdefault boolean notifyMining() {\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"notifySalvaging\",\n\t\t\tname \u003d \"Notify on Salvaging\",\n\t\t\tdescription \u003d \"Toggle to notify on getting a scroll box or clue scroll while sorting salvage.\",\n\t\t\tposition \u003d 5,\n\t\t\tsection \u003d notificationSettings\n\t\t)\n\tdefault boolean notifySalvaging() {\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"testSound\",\n\t\t\tname \u003d \"Test Sound\",\n\t\t\tdescription \u003d \"Click to test the selected sound and volume\",\n\t\t\tposition \u003d 0,\n\t\t\tsection \u003d debugSettings\n\t)\n\tdefault boolean testSound() {\n\t\treturn false;\n\t}\n}","filePath":"src\\main\\java\\com\\cluescrollnotifier\\ClueScrollNotifierConfig.java"},{"fileName":"ClueScrollNotifierPlugin.java","content":"package com.cluescrollnotifier;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.gameval.ItemID;\nimport net.runelite.api.TileItem;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.ItemSpawned;\nimport net.runelite.client.Notifier;\nimport net.runelite.client.audio.AudioPlayer;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport java.util.List;\nimport java.util.Arrays;\nimport java.util.concurrent.ScheduledExecutorService;\nimport net.runelite.client.events.ConfigChanged;\n\n@Slf4j\n@PluginDescriptor(\n\t\tname \u003d \"Clue Scroll Notifier\"\n)\npublic class ClueScrollNotifierPlugin extends Plugin {\n\n\t@Inject\n\tprivate Client client;\n\t@Inject\n\tprivate ClueScrollNotifierConfig config;\n\t@Inject\n\tprivate SoundEngine soundEngine;\n\t@Inject\n\tprivate ScheduledExecutorService executor;\n\t@Inject\n\tprivate Notifier notifier;\n\n\tprivate static final List\u003cInteger\u003e CLUE_ITEM_IDS \u003d Arrays.asList(\n\t\t\tItemID.WC_CLUE_NEST_BEGINNER,\n\t\t\tItemID.WC_CLUE_NEST_EASY,\n\t\t\tItemID.WC_CLUE_NEST_MEDIUM,\n\t\t\tItemID.WC_CLUE_NEST_HARD,\n\t\t\tItemID.WC_CLUE_NEST_ELITE\n\t);\n\n\t@Override\n\tprotected void startUp() throws Exception {\n\t\texecutor.submit(FileManager::initialize);\n\t\tlog.info(\"ClueScrollNotifier started!\");\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception {\n\t\tlog.info(\"ClueScrollNotifier stopped!\");\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage chatMessage) {\n\t\tChatMessageType type \u003d chatMessage.getType();\n\t\tString message \u003d chatMessage.getMessage().toLowerCase();\n\n\t\t// Global type check: only handle messages that are SPAM or GAMEMESSAGE.\n\t\tboolean isSpamOrGame \u003d type \u003d\u003d ChatMessageType.SPAM || type \u003d\u003d ChatMessageType.GAMEMESSAGE;\n\t\tif (!isSpamOrGame) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (message.contains(\"untradeable drop: clue scroll\") || message.contains(\"untradeable drop: scroll box\")) {\n\t\t\tif (config.notifyClueScrollDrops()) {\n\t\t\t\tnotify(\"Clue scroll drop!\");\n\t\t\t}\n\t\t}\n\n\t\tif (message.contains(\"you steal a clue scroll\")) {\n\t\t\tif (config.notifyPickpockets()) {\n\t\t\t\tnotify(\"You stole a clue scroll!\");\n\t\t\t}\n\t\t}\n\n\t\tif (message.contains(\"you catch a clue bottle\") || message.contains(\"you catch a scroll box\")) {\n\t\t\tif (config.notifyFishing()) {\n\t\t\t\tnotify(\"You caught a clue scroll!\");\n\t\t\t}\n\t\t}\n\n\t\tif (message.contains(\"you find a clue geode\") || message.contains(\"you find a scroll box\")) {\n\t\t\tif (config.notifyMining()) {\n\t\t\t\tnotify(\"You found a clue scroll!\");\n\t\t\t}\n\t\t}\n\n\t\tif (message.contains(\"you sort through the\") \u0026\u0026 message.contains(\"salvage and find\") \u0026\u0026 (message.contains(\"scroll box\") || message.contains(\"clue scroll\"))) {\n\t\t\tif (config.notifySalvaging()) {\n\t\t\t\tnotify(\"You found a clue while salvaging!\");\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onItemSpawned(ItemSpawned itemSpawned) {\n\t\tTileItem item \u003d itemSpawned.getItem();\n\t\tif (config.notifyClueNests() \u0026\u0026 CLUE_ITEM_IDS.contains(item.getId())) {\n\t\t\tnotify(\"A bird\u0027s nest with a clue has fallen out of the tree!\");\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event) {\n\t\tif (!event.getGroup().equals(\"ClueScrollNotifier\")) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.getKey().equals(\"testSound\")) {\n\t\t\t// Play the test sound with current settings\n\t\t\tif (config.playSound()) {\n\t\t\t\tsoundEngine.playClip(config.customSoundFile());\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void notify(String message) {\n\t\tif (config.playSound()) {\n\t\t\tsoundEngine.playClip(config.customSoundFile());\n\t\t}\n\t\tif (config.showNotification()) {\n\t\t\tnotifier.notify(message);\n\t\t}\n\t}\n\n\t@Provides\n\tClueScrollNotifierConfig provideConfig(ConfigManager configManager) {\n\t\treturn configManager.getConfig(ClueScrollNotifierConfig.class);\n\t}\n}","filePath":"src\\main\\java\\com\\cluescrollnotifier\\ClueScrollNotifierPlugin.java"},{"fileName":"FileManager.java","content":"package com.cluescrollnotifier;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.RuneLite;\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\nimport java.nio.file.StandardCopyOption;\nimport java.util.Arrays;\nimport java.util.HashSet;\nimport java.util.Set;\nimport java.util.stream.Collectors;\nimport java.util.stream.Stream;\n\n@Slf4j\npublic class FileManager {\n    private static final Path DOWNLOAD_DIR \u003d Paths.get(RuneLite.RUNELITE_DIR.getPath(), \"clue-scroll-notifier\");\n\n    public static void initialize() {\n        createDownloadDirectory();\n        Set\u003cString\u003e filesPresent \u003d getFilesPresent();\n        Set\u003cString\u003e desiredFiles \u003d getDesiredSoundList().stream()\n                .map(Sound::getFileName)\n                .collect(Collectors.toSet());\n\n        copyMissingFiles(filesPresent, desiredFiles);\n        deleteExtraFiles(filesPresent);\n    }\n\n    private static void createDownloadDirectory() {\n        try {\n            Files.createDirectories(DOWNLOAD_DIR);\n        } catch (IOException e) {\n            log.error(\"Could not create download directory\", e);\n        }\n    }\n\n    private static Set\u003cString\u003e getFilesPresent() {\n        try (Stream\u003cPath\u003e paths \u003d Files.list(DOWNLOAD_DIR)) {\n            return paths\n                    .filter(Files::isRegularFile)\n                    .map(path -\u003e path.getFileName().toString())\n                    .collect(Collectors.toSet());\n        } catch (IOException e) {\n            log.error(\"Error listing files in download directory\", e);\n            return new HashSet\u003c\u003e();\n        }\n    }\n\n    private static Set\u003cSound\u003e getDesiredSoundList() {\n        return Arrays.stream(Sound.values()).collect(Collectors.toSet());\n    }\n\n    private static void copyMissingFiles(Set\u003cString\u003e filesPresent, Set\u003cString\u003e desiredFiles) {\n        for (String fileName : desiredFiles) {\n            Path outputPath \u003d DOWNLOAD_DIR.resolve(fileName);\n            if (Files.exists(outputPath)) {\n                filesPresent.remove(fileName);\n                continue;\n            }\n\n            try (InputStream resourceStream \u003d FileManager.class.getResourceAsStream(\"/\" + fileName)) {\n                if (resourceStream !\u003d null) {\n                    Files.copy(resourceStream, outputPath, StandardCopyOption.REPLACE_EXISTING);\n                } else {\n                    log.error(\"Clue Scroll Notifier could not find resource: {}\", fileName);\n                }\n            } catch (IOException e) {\n                log.error(\"Clue Scroll Notifier could not copy sound: {}\", fileName, e);\n            }\n        }\n    }\n\n    private static void deleteExtraFiles(Set\u003cString\u003e filesPresent) {\n        for (String filename : filesPresent) {\n            try {\n                Files.delete(DOWNLOAD_DIR.resolve(filename));\n            } catch (IOException e) {\n                log.warn(\"Failed to delete file: {}\", filename, e);\n            }\n        }\n    }\n\n    public static InputStream getSoundStream(Sound sound) throws FileNotFoundException {\n        return new FileInputStream(DOWNLOAD_DIR.resolve(sound.getFileName()).toFile());\n    }\n}","filePath":"src\\main\\java\\com\\cluescrollnotifier\\FileManager.java"},{"fileName":"Sound.java","content":"package com.cluescrollnotifier;\n\npublic enum Sound {\n    CLUE1(\"clue1.wav\"),\n    CLUE2(\"clue2.wav\"),\n    CLUE3(\"clue3.wav\"),\n    CLUE4(\"clue4.wav\"),\n    CLUE5(\"clue5.wav\");\n\n    private final String fileName;\n\n    Sound(String fileName) {\n        this.fileName \u003d fileName;\n    }\n\n    public String getFileName() {\n        return fileName;\n    }\n}","filePath":"src\\main\\java\\com\\cluescrollnotifier\\Sound.java"},{"fileName":"SoundEngine.java","content":"package com.cluescrollnotifier;\n\nimport java.io.BufferedInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport javax.sound.sampled.LineUnavailableException;\nimport javax.sound.sampled.UnsupportedAudioFileException;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.audio.AudioPlayer;\n\n@Singleton\n@Slf4j\npublic class SoundEngine {\n\n    @Inject\n    private ClueScrollNotifierConfig config;\n\n    @Inject\n    private AudioPlayer audioPlayer;\n\n    public void playClip(Sound sound) {\n        float gain \u003d 20f * (float) Math.log10(config.announcementVolume() / 100f);\n\n        try (InputStream stream \u003d new BufferedInputStream(FileManager.getSoundStream(sound))) {\n            audioPlayer.play(stream, gain);\n        } catch (FileNotFoundException e) {\n            log.warn(\"Sound file not found for {}\", sound, e);\n        } catch (IOException | UnsupportedAudioFileException | LineUnavailableException e) {\n            log.warn(\"Failed to play sound {}\", sound, e);\n        }\n    }\n}","filePath":"src\\main\\java\\com\\cluescrollnotifier\\SoundEngine.java"},{"fileName":"ClueScrollNotifierPluginTest.java","content":"package com.cluescrollnotifier;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ClueScrollNotifierPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(ClueScrollNotifierPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\cluescrollnotifier\\ClueScrollNotifierPluginTest.java"}]},{"commit":"3ece9e0401f5ebac9da2762015449d5e68bb0bfc","repository":"https://github.com/nightfirecat/plugin-hub-plugins.git","internalName":"rogues-den","files":[{"fileName":"Obstacles.java","content":"/*\n * Copyright (c) 2018, Shaun Dreclin \u003cshaundreclin@gmail.com\u003e\n * Copyright (c) 2021, Jordan Atwood \u003cnightfirecat@protonmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage at.nightfirec.roguesden;\n\nimport java.awt.Color;\nimport java.util.HashMap;\nimport java.util.Map;\nimport lombok.Getter;\nimport net.runelite.api.coords.WorldPoint;\nimport static net.runelite.api.ObjectID.*;\n\nclass Obstacles\n{\n\tstatic final Map\u003cWorldPoint, Obstacle\u003e TILE_MAP \u003d new HashMap\u003c\u003e();\n\tstatic final Obstacle[] OBSTACLES \u003d\n\t\t{\n\t\t\tnew Obstacle(3050, 4997, \"Enter\"),\n\t\t\tnew Obstacle(3049, 4997, CONTORTION_BARS),\n\t\t\tnew Obstacle(3039, 4999, \"Stand\"),\n\t\t\tnew Obstacle(3029, 5003, \"Run\"),\n\t\t\tnew Obstacle(3024, 5001, \"Open\", GRILL_7255),\n\t\t\tnew Obstacle(3011, 5005, \"Run\"),\n\t\t\tnew Obstacle(3004, 5003, \"Run\"),\n\n\t\t\tnew Obstacle(2994, 5004, \"Climb\"),\n\t\t\tnew Obstacle(2993, 5004, LEDGE_7240),\n\t\t\tnew Obstacle(2994, 5005, \"Climb\"),\n\t\t\tnew Obstacle(2993, 5005, LEDGE_7240),\n\n\t\t\tnew Obstacle(2969, 5016, \"Stand\"),\n\t\t\tnew Obstacle(2969, 5017, \"Stand\"),\n\t\t\tnew Obstacle(2969, 5018, \"Stand\"),\n\t\t\tnew Obstacle(2969, 5019, \"Stand\"),\n\n\t\t\tnew Obstacle(2958, 5031, \"Cross\"),\n\t\t\tnew Obstacle(2962, 5050, \"Stand\"),\n\t\t\tnew Obstacle(2963, 5056, \"Run\"),\n\n\t\t\tnew Obstacle(2957, 5068, \"Enter\"),\n\t\t\tnew Obstacle(2957, 5069, PASSAGEWAY),\n\n\t\t\tnew Obstacle(2955, 5094, \"Enter\"),\n\t\t\tnew Obstacle(2955, 5095, PASSAGEWAY),\n\n\t\t\tnew Obstacle(2963, 5105, \"Stand\"),\n\n\t\t\tnew Obstacle(2972, 5098, \"Enter\"),\n\t\t\tnew Obstacle(2972, 5097, PASSAGEWAY),\n\n\t\t\tnew Obstacle(2972, 5094, \"Open\"),\n\t\t\tnew Obstacle(2972, 5094, GRILL_7255),\n\n\t\t\tnew Obstacle(2982, 5087, \"Climb\"),\n\t\t\tnew Obstacle(2983, 5087, LEDGE_7240),\n\n\t\t\tnew Obstacle(2982, 5090, \"Climb\"),\n\t\t\tnew Obstacle(2983, 5090, LEDGE_7240),\n\n\t\t\tnew Obstacle(2993, 5088, \"Search\"),\n\t\t\tnew Obstacle(2993, 5087, WALL_7249),\n\t\t\tnew Obstacle(2997, 5088, \"Run\"),\n\n\t\t\tnew Obstacle(2993, 5089, \"Search\"),\n\t\t\tnew Obstacle(2993, 5089, WALL_7249),\n\t\t\tnew Obstacle(2997, 5089, \"Run\"),\n\n\t\t\tnew Obstacle(3006, 5088, \"Run\"),\n\t\t\tnew Obstacle(3018, 5080, \"Take\"),\n\t\t\tnew Obstacle(3023, 5082, \"Open\", DOOR_7234),\n\n\t\t\t// Maze\n\t\t\tnew Obstacle(3030, 5079, GRILL_7255),\n\t\t\tnew Obstacle(3032, 5078, GRILL_7255),\n\t\t\tnew Obstacle(3036, 5076, GRILL_7255),\n\t\t\tnew Obstacle(3039, 5079, GRILL_7255),\n\t\t\tnew Obstacle(3042, 5076, GRILL_7255),\n\t\t\tnew Obstacle(3044, 5069, GRILL_7255),\n\t\t\tnew Obstacle(3041, 5068, GRILL_7255),\n\t\t\tnew Obstacle(3040, 5070, GRILL_7255),\n\t\t\tnew Obstacle(3038, 5069, GRILL_7255),\n\n\t\t\tnew Obstacle(3028, 5033, \"Stand\"),\n\t\t\tnew Obstacle(3024, 5033, \"Run\"),\n\t\t\tnew Obstacle(3028, 5034, \"Stand\"),\n\t\t\tnew Obstacle(3024, 5034, \"Run\"),\n\n\t\t\tnew Obstacle(3015, 5033, \"Open\", GRILL_7255),\n\t\t\tnew Obstacle(3010, 5033, \"Run/Open\", GRILL_7255),\n\n\t\t\tnew Obstacle(3000, 5034, \"Run\"),\n\n\t\t\tnew Obstacle(2992, 5045, \"Stand\"),\n\t\t\tnew Obstacle(2992, 5053, \"Run\"),\n\n\t\t\tnew Obstacle(2992, 5067, \"Stand\"),\n\t\t\tnew Obstacle(2992, 5075, \"Run\"),\n\t\t\tnew Obstacle(3009, 5063, \"Take\"),\n\t\t\tnew Obstacle(3028, 5056, \"Run\"),\n\t\t\tnew Obstacle(3028, 5047, \"Walk\"),\n\n\t\t\tnew Obstacle(3018, 5047, \"Crack\", WALL_SAFE_7237),\n\n\t\t\t// Start of 80+ thieving shortcut\n\t\t\tnew Obstacle(2967, 5061, \"80 Thieving\", DOOR_7246),\n\t\t\tnew Obstacle(2967, 5066, \"80 Thieving\", DOOR_7246),\n\t\t\tnew Obstacle(2974, 5061, \"Enter\"),\n\t\t\tnew Obstacle(2974, 5060, CONTORTION_BARS),\n\t\t\tnew Obstacle(2989, 5057, \"Open\", GRILL_7255),\n\t\t\tnew Obstacle(2989, 5058, \"Open\", GRILL_7255),\n\n\t\t\t// The 3x3 square around the spinning blade in the middle of the maze\n\t\t\tnew AvoidObstacle(2977, 5090), new AvoidObstacle(2978, 5090), new AvoidObstacle(2979, 5090),\n\t\t\tnew AvoidObstacle(2977, 5089), new AvoidObstacle(2978, 5089), new AvoidObstacle(2979, 5089),\n\t\t\tnew AvoidObstacle(2977, 5088), new AvoidObstacle(2978, 5088), new AvoidObstacle(2979, 5088),\n\n\t\t\tnew TipObstacle(3014, 5063, \"Stun NPC\"),\n\t\t\tnew TipObstacle(2992, 5057, \"Continue North\"),  // Hint for 80 thieving shortcut\n\t\t};\n\n\t@Getter\n\tstatic class Obstacle\n\t{\n\t\tprivate final WorldPoint tile;\n\t\tprivate final String hint;\n\t\tprivate final int objectId;\n\t\tprivate final Color tileColor \u003d Color.GREEN;\n\n\t\t// Highlights tile and shows a hint\n\t\tprivate Obstacle(int x, int y, String hint)\n\t\t{\n\t\t\tthis(x, y, hint, -1);\n\t\t}\n\n\t\t// Doesn\u0027t highlight tile, but instead highlights object of objectId found on tile\n\t\tprivate Obstacle(int x, int y, int objectId)\n\t\t{\n\t\t\tthis(x, y, \"\", objectId);\n\t\t}\n\n\t\t// Doesn\u0027t highlight tile, but instead highlights object of objectId found on tile and shows a hint\n\t\tprivate Obstacle(int x, int y, String hint, int objectId)\n\t\t{\n\t\t\ttile \u003d new WorldPoint(x, y, 1);\n\t\t\tthis.hint \u003d hint;\n\t\t\tthis.objectId \u003d objectId;\n\n\t\t\tif (objectId !\u003d -1)\n\t\t\t{\n\t\t\t\tTILE_MAP.put(new WorldPoint(x, y, 1), this);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate static class AvoidObstacle extends Obstacle\n\t{\n\t\t@Getter\n\t\tprivate final Color tileColor \u003d Color.RED;\n\n\t\tprivate AvoidObstacle(int x, int y)\n\t\t{\n\t\t\tsuper(x, y, \"AVOID\");\n\t\t}\n\t}\n\n\tprivate static class TipObstacle extends Obstacle\n\t{\n\t\t@Getter\n\t\tprivate final Color tileColor \u003d Color.ORANGE;\n\n\t\tprivate TipObstacle(int x, int y, String hint)\n\t\t{\n\t\t\tsuper(x, y, hint);\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\at\\nightfirec\\roguesden\\Obstacles.java"},{"fileName":"RoguesDenMinimapOverlay.java","content":"/*\n * Copyright (c) 2021, Jordan Atwood \u003cnightfirecat@protonmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage at.nightfirec.roguesden;\n\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Point;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\n\nclass RoguesDenMinimapOverlay extends Overlay\n{\n\tprivate final Client client;\n\tprivate final RoguesDenPlugin plugin;\n\n\t@Inject\n\tpublic RoguesDenMinimapOverlay(Client client, RoguesDenPlugin plugin)\n\t{\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.ABOVE_WIDGETS);\n\t\tthis.client \u003d client;\n\t\tthis.plugin \u003d plugin;\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (!plugin.isHasGem())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tfor (Obstacles.Obstacle obstacle : Obstacles.OBSTACLES)\n\t\t{\n\t\t\tfinal LocalPoint localPoint \u003d LocalPoint.fromWorld(client, obstacle.getTile());\n\n\t\t\tif (localPoint \u003d\u003d null || obstacle.getTile().getPlane() !\u003d client.getPlane())\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfinal Point minimapPoint \u003d Perspective.localToMinimap(client, localPoint);\n\n\t\t\tif (minimapPoint !\u003d null)\n\t\t\t{\n\t\t\t\tOverlayUtil.renderMinimapLocation(graphics, minimapPoint, obstacle.getObjectId() \u003d\u003d -1 ? Color.GREEN : Color.RED);\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n}\n","filePath":"src\\main\\java\\at\\nightfirec\\roguesden\\RoguesDenMinimapOverlay.java"},{"fileName":"RoguesDenOverlay.java","content":"/*\n * Copyright (c) 2018, Shaun Dreclin \u003cshaundreclin@gmail.com\u003e\n * Copyright (c) 2021, Jordan Atwood \u003cnightfirecat@protonmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage at.nightfirec.roguesden;\n\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Polygon;\nimport java.awt.Shape;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameObject;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Point;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\n\npublic class RoguesDenOverlay extends Overlay\n{\n\tprivate static final Color OBJECT_BORDER_COLOR \u003d Color.RED;\n\tprivate static final Color OBJECT_COLOR \u003d new Color(OBJECT_BORDER_COLOR.getRed(), OBJECT_BORDER_COLOR.getGreen(), OBJECT_BORDER_COLOR.getBlue(), 50);\n\tprivate static final Color OBJECT_BORDER_HOVER_COLOR \u003d OBJECT_BORDER_COLOR.darker();\n\n\tprivate final Client client;\n\tprivate final RoguesDenPlugin plugin;\n\n\t@Inject\n\tpublic RoguesDenOverlay(Client client, RoguesDenPlugin plugin)\n\t{\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\n\t\tthis.client \u003d client;\n\t\tthis.plugin \u003d plugin;\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (!plugin.isHasGem())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tplugin.getObstaclesHull().forEach((obstacle, tile) -\u003e\n\t\t{\n\t\t\tif (tile.getPlane() \u003d\u003d client.getPlane())\n\t\t\t{\n\t\t\t\tfinal Shape clickBox \u003d obstacle.getClickbox();\n\t\t\t\tif (clickBox !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tfinal Point mouse \u003d client.getMouseCanvasPosition();\n\t\t\t\t\tif (clickBox.contains(mouse.getX(), mouse.getY()))\n\t\t\t\t\t{\n\t\t\t\t\t\tgraphics.setColor(OBJECT_BORDER_HOVER_COLOR);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tgraphics.setColor(OBJECT_BORDER_COLOR);\n\t\t\t\t\t}\n\n\t\t\t\t\tgraphics.draw(clickBox);\n\t\t\t\t\tgraphics.setColor(OBJECT_COLOR);\n\t\t\t\t\tgraphics.fill(clickBox);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tShape p;\n\t\t\t\t\tif (obstacle instanceof GameObject)\n\t\t\t\t\t{\n\t\t\t\t\t\tp \u003d ((GameObject) obstacle).getConvexHull();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tp \u003d obstacle.getCanvasTilePoly();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (p !\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tgraphics.setColor(OBJECT_COLOR);\n\t\t\t\t\t\tgraphics.draw(p);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tfor (Obstacles.Obstacle obstacle : Obstacles.OBSTACLES)\n\t\t{\n\t\t\tfinal LocalPoint localPoint \u003d LocalPoint.fromWorld(client, obstacle.getTile());\n\n\t\t\tif (localPoint \u003d\u003d null || obstacle.getTile().getPlane() !\u003d client.getPlane())\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (!obstacle.getHint().isEmpty())\n\t\t\t{\n\t\t\t\tfinal Polygon polygon \u003d Perspective.getCanvasTilePoly(client, localPoint);\n\t\t\t\tif (polygon !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tgraphics.setColor(obstacle.getTileColor());\n\t\t\t\t\tgraphics.drawPolygon(polygon);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfinal Point textLocation \u003d Perspective.getCanvasTextLocation(client, graphics, localPoint, obstacle.getHint(), 0);\n\t\t\tif (textLocation !\u003d null)\n\t\t\t{\n\t\t\t\tgraphics.setColor(Color.LIGHT_GRAY);\n\t\t\t\tgraphics.drawString(obstacle.getHint(), textLocation.getX(), textLocation.getY());\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n}\n","filePath":"src\\main\\java\\at\\nightfirec\\roguesden\\RoguesDenOverlay.java"},{"fileName":"RoguesDenPlugin.java","content":"/*\n * Copyright (c) 2018-2019, Shaun Dreclin \u003chttps://github.com/ShaunDreclin\u003e\n * Copyright (c) 2021, Jordan \u003cnightfirecat@protonmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage at.nightfirec.roguesden;\n\nimport java.util.HashMap;\nimport javax.inject.Inject;\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.Item;\nimport net.runelite.api.ItemID;\nimport net.runelite.api.Tile;\nimport net.runelite.api.TileObject;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.DecorativeObjectDespawned;\nimport net.runelite.api.events.DecorativeObjectSpawned;\nimport net.runelite.api.events.GameObjectDespawned;\nimport net.runelite.api.events.GameObjectSpawned;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GroundObjectDespawned;\nimport net.runelite.api.events.GroundObjectSpawned;\nimport net.runelite.api.events.ItemContainerChanged;\nimport net.runelite.api.events.WallObjectDespawned;\nimport net.runelite.api.events.WallObjectSpawned;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\n@PluginDescriptor(\n\tname \u003d \"Rogues\u0027 Den\",\n\tdescription \u003d \"Mark tiles and clickboxes to help traverse the maze\",\n\ttags \u003d {\"agility\", \"maze\", \"minigame\", \"overlay\", \"thieving\"}\n)\npublic class RoguesDenPlugin extends Plugin\n{\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate final HashMap\u003cTileObject, Tile\u003e obstaclesHull \u003d new HashMap\u003c\u003e();\n\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate final HashMap\u003cTileObject, Tile\u003e obstaclesTile \u003d new HashMap\u003c\u003e();\n\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate boolean hasGem;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate RoguesDenOverlay overlay;\n\n\t@Inject\n\tprivate RoguesDenMinimapOverlay minimapOverlay;\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\toverlayManager.add(overlay);\n\t\toverlayManager.add(minimapOverlay);\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\toverlayManager.remove(overlay);\n\t\toverlayManager.remove(minimapOverlay);\n\t\tobstaclesHull.clear();\n\t\tobstaclesTile.clear();\n\t\thasGem \u003d false;\n\t}\n\n\t@Subscribe\n\tpublic void onItemContainerChanged(ItemContainerChanged event)\n\t{\n\t\tif (event.getItemContainer() !\u003d client.getItemContainer(InventoryID.INVENTORY))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfor (Item item : event.getItemContainer().getItems())\n\t\t{\n\t\t\tif (item.getId() \u003d\u003d ItemID.MYSTIC_JEWEL)\n\t\t\t{\n\t\t\t\thasGem \u003d true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\thasGem \u003d false;\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged event)\n\t{\n\t\tif (event.getGameState() \u003d\u003d GameState.LOADING)\n\t\t{\n\t\t\tobstaclesHull.clear();\n\t\t\tobstaclesTile.clear();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameObjectSpawned(GameObjectSpawned event)\n\t{\n\t\tonTileObject(event.getTile(), null, event.getGameObject());\n\t}\n\n\t@Subscribe\n\tpublic void onGameObjectDespawned(GameObjectDespawned event)\n\t{\n\t\tonTileObject(event.getTile(), event.getGameObject(), null);\n\t}\n\n\t@Subscribe\n\tpublic void onGroundObjectSpawned(GroundObjectSpawned event)\n\t{\n\t\tonTileObject(event.getTile(), null, event.getGroundObject());\n\t}\n\n\t@Subscribe\n\tpublic void onGroundObjectDespawned(GroundObjectDespawned event)\n\t{\n\t\tonTileObject(event.getTile(), event.getGroundObject(), null);\n\t}\n\n\t@Subscribe\n\tpublic void onWallObjectSpawned(WallObjectSpawned event)\n\t{\n\t\tonTileObject(event.getTile(), null, event.getWallObject());\n\t}\n\n\t@Subscribe\n\tpublic void onWallObjectDespawned(WallObjectDespawned event)\n\t{\n\t\tonTileObject(event.getTile(), event.getWallObject(), null);\n\t}\n\n\t@Subscribe\n\tpublic void onDecorativeObjectSpawned(DecorativeObjectSpawned event)\n\t{\n\t\tonTileObject(event.getTile(), null, event.getDecorativeObject());\n\t}\n\n\t@Subscribe\n\tpublic void onDecorativeObjectDespawned(DecorativeObjectDespawned event)\n\t{\n\t\tonTileObject(event.getTile(), event.getDecorativeObject(), null);\n\t}\n\n\tprivate void onTileObject(final Tile tile, final TileObject oldObject, final TileObject newObject)\n\t{\n\t\tobstaclesHull.remove(oldObject);\n\t\tif (newObject !\u003d null)\n\t\t{\n\t\t\tWorldPoint point \u003d tile.getWorldLocation();\n\n\t\t\tObstacles.Obstacle obstacle \u003d Obstacles.TILE_MAP.get(point);\n\t\t\tif (obstacle !\u003d null \u0026\u0026 obstacle.getObjectId() \u003d\u003d newObject.getId())\n\t\t\t{\n\t\t\t\tobstaclesHull.put(newObject, tile);\n\t\t\t}\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\at\\nightfirec\\roguesden\\RoguesDenPlugin.java"},{"fileName":"RoguesDenPluginTest.java","content":"/*\n * Copyright (c) 2021, Jordan \u003cnightfirecat@protonmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage at.nightfirec.roguesden;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class RoguesDenPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(RoguesDenPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}\n","filePath":"src\\test\\java\\at\\nightfirec\\roguesden\\RoguesDenPluginTest.java"}]},{"commit":"d53217cc14f35d60cc73ec868ffdaacac61b7ac1","repository":"https://github.com/dekvall/bronzeman-mode.git","internalName":"dekvall-bronzeman-mode","files":[{"fileName":"BronzemanModeConfig.java","content":"/*\n * Copyright (c) 2019, dekvall \u003chttps://github.com/dekvall\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage dekvall.bronzeman;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(BronzemanModePlugin.CONFIG_GROUP)\npublic interface BronzemanModeConfig extends Config\n{\n\t@ConfigItem(\n\t\tkeyName \u003d \"sendNotification\",\n\t\tname \u003d \"Notify on unlock\",\n\t\tdescription \u003d \"Send a notification when a new item is unlocked\"\n\t)\n\tdefault boolean sendNotification()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"sendChaMessage\",\n\t\tname \u003d \"Chat message on unlock\",\n\t\tdescription \u003d \"Send a chat message when a new item is unlocked\"\n\t)\n\tdefault boolean sendChatMessage()\n\t{\n\t\treturn true;\n\t}\n}\n","filePath":"src\\main\\java\\dekvall\\bronzeman\\BronzemanModeConfig.java"},{"fileName":"BronzemanModeOverlay.java","content":"/*\n * Copyright (c) 2019, dekvall \u003chttps://github.com/dekvall\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage dekvall.bronzeman;\n\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.image.BufferedImage;\nimport javax.inject.Inject;\nimport net.runelite.api.Constants;\nimport java.awt.Point;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.ComponentOrientation;\nimport net.runelite.client.ui.overlay.components.ImageComponent;\nimport net.runelite.client.ui.overlay.components.LineComponent;\nimport net.runelite.client.ui.overlay.components.PanelComponent;\nimport net.runelite.client.ui.overlay.components.TitleComponent;\n\npublic class BronzemanModeOverlay extends OverlayPanel\n{\n\tprivate static final int WIDTH \u003d 2*Constants.ITEM_SPRITE_WIDTH;\n\n\tprivate final BronzemanModePlugin plugin;\n\tprivate final PanelComponent panelComponent \u003d new PanelComponent();\n\n\t@Inject\n\tpublic BronzemanModeOverlay(BronzemanModePlugin plugin)\n\t{\n\t\tsuper(plugin);\n\t\tthis.plugin \u003d plugin;\n\t\tsetPosition(OverlayPosition.TOP_CENTER);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tpanelComponent.getChildren().clear();\n\t\tif (!plugin.isItemsRecentlyUnlocked() || plugin.getRecentUnlockedImages().isEmpty())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tpanelComponent.setOrientation(ComponentOrientation.VERTICAL);\n\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t.left(\"Unlocked:\")\n\t\t\t.leftColor(Color.GREEN)\n\t\t\t.build());\n\n\t\tpanelComponent.setPreferredSize(new Dimension(WIDTH, 0));\n\n\t\tfor (BufferedImage image : plugin.getRecentUnlockedImages())\n\t\t{\n\t\t\tpanelComponent.getChildren().add(new ImageComponent(image));\n\t\t}\n\n\t\treturn panelComponent.render(graphics);\n\t}\n}\n","filePath":"src\\main\\java\\dekvall\\bronzeman\\BronzemanModeOverlay.java"},{"fileName":"BronzemanModePlugin.java","content":"/*\n * Copyright (c) 2019, dekvall \u003chttps://github.com/dekvall\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage dekvall.bronzeman;\n\nimport com.google.common.base.Strings;\nimport com.google.common.collect.Sets;\nimport com.google.gson.reflect.TypeToken;\nimport com.google.inject.Provides;\nimport java.awt.image.BufferedImage;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.Set;\nimport java.util.stream.Collectors;\nimport javax.inject.Inject;\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.Item;\nimport net.runelite.api.ItemID;\nimport net.runelite.api.MessageNode;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.ItemContainerChanged;\nimport net.runelite.api.events.ScriptPostFired;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.Notifier;\nimport net.runelite.client.chat.ChatColorType;\nimport net.runelite.client.chat.ChatCommandManager;\nimport net.runelite.client.chat.ChatMessageBuilder;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.chat.QueuedMessage;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport static net.runelite.http.api.RuneLiteAPI.GSON;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Bronzeman Mode\",\n\tdescription \u003d \"Unlock items as you acquire them (by dekvall)\"\n)\npublic class BronzemanModePlugin extends Plugin\n{\n\tstatic final String CONFIG_GROUP \u003d \"bronzemanmode\";\n\tpublic static final String CONFIG_KEY \u003d \"unlockeditems\";\n\tprivate static final int AMOUNT_OF_TICKS_TO_SHOW_OVERLAY \u003d 8;\n\tprivate static final int GE_SEARCH_BUILD_SCRIPT \u003d 751;\n\n\tprivate static final String UNLOCKED_ITEMS_STRING \u003d \"!bronzemanunlocks\";\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate Notifier notifier;\n\n\t@Inject\n\tprivate BronzemanModeConfig config;\n\n\t@Inject\n\tprivate BronzemanModeOverlay overlay;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Inject\n\tprivate ChatMessageManager chatMessageManager;\n\n\t@Inject\n\tprivate ChatCommandManager chatCommandManager;\n\n\t@Inject\n\tItemManager itemManager;\n\n\tprivate final Set\u003cInteger\u003e unlockedItems \u003d Sets.newHashSet();\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate List\u003cBufferedImage\u003e recentUnlockedImages;\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate boolean itemsRecentlyUnlocked;\n\tprivate int ticksToLastUnlock;\n\n\t@Provides\n\tBronzemanModeConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(BronzemanModeConfig.class);\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\toverlayManager.add(overlay);\n\t\tchatCommandManager.registerCommand(UNLOCKED_ITEMS_STRING, this::unlockedItemsLookup);\n\t\tif (client.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tloadUnlockedItems();\n\t\t\tunlockBond();\n\t\t}\n\n\t\tlog.info(\"Bronzeman Mode started!\");\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(overlay);\n\t\tchatCommandManager.unregisterCommand(UNLOCKED_ITEMS_STRING);\n\t\tunlockedItems.clear();\n\t\tlog.info(\"Bronzeman Mode stopped!\");\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged)\n\t{\n\t\tif (gameStateChanged.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tloadUnlockedItems();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onItemContainerChanged(ItemContainerChanged event)\n\t{\n\t\tif (event.getItemContainer() !\u003d client.getItemContainer(InventoryID.INVENTORY))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tSet\u003cInteger\u003e recentUnlocks \u003d Arrays.stream(client.getItemContainer(InventoryID.INVENTORY).getItems())\n\t\t\t.map(Item::getId)\n\t\t\t.map(itemManager::canonicalize)\n\t\t\t.filter(id -\u003e id !\u003d -1\n\t\t\t\t\u0026\u0026 client.getItemDefinition(id).isTradeable()\n\t\t\t\t\u0026\u0026 !unlockedItems.contains(id))\n\t\t\t.collect(Collectors.toSet());\n\n\t\tif (recentUnlocks.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlog.info(\"Unlocked {} item(s), the id(s) were {}\", recentUnlocks.size(), recentUnlocks);\n\t\tunlockedItems.addAll(recentUnlocks);\n\t\trecentUnlockedImages \u003d recentUnlocks.stream().map(itemManager::getImage).collect(Collectors.toList());\n\t\tticksToLastUnlock \u003d 0;\n\t\titemsRecentlyUnlocked \u003d true;\n\t\tsaveUnlockedItems();\n\n\t\tif (config.sendNotification())\n\t\t{\n\t\t\tnotifier.notify(\"New bronzeman unlock!\");\n\t\t}\n\n\t\tif (config.sendChatMessage())\n\t\t{\n\t\t\tfor (int id : recentUnlocks)\n\t\t\t{\n\t\t\t\tsendChatMessage(\"You have unlocked a new item: \" + client.getItemDefinition(id).getName() + \".\");\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void saveUnlockedItems()\n\t{\n\t\tString key \u003d client.getUsername() + \".\" + CONFIG_KEY;\n\n\t\tif (unlockedItems \u003d\u003d null || unlockedItems.isEmpty())\n\t\t{\n\t\t\tconfigManager.unsetConfiguration(CONFIG_GROUP, key);\n\t\t\treturn;\n\t\t}\n\n\t\tString json \u003d GSON.toJson(unlockedItems);\n\t\tconfigManager.setConfiguration(CONFIG_GROUP, key, json);\n\t}\n\n\tprivate void loadUnlockedItems()\n\t{\n\t\tString key \u003d client.getUsername() + \".\" + CONFIG_KEY;\n\n\t\tString json \u003d configManager.getConfiguration(CONFIG_GROUP, key);\n\t\tunlockedItems.clear();\n\n\t\tif (!Strings.isNullOrEmpty(json))\n\t\t{\n\t\t\t// CHECKSTYLE:OFF\n\t\t\tunlockedItems.addAll(GSON.fromJson(json, new TypeToken\u003cList\u003cInteger\u003e\u003e(){}.getType()));\n\t\t\t// CHECKSTYLE:ON\n\t\t}\n\t}\n\n\tprivate void unlockBond()\n\t{\n\t\tunlockedItems.add(ItemID.OLD_SCHOOL_BOND);\n\t}\n\n\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event)\n\t{\n\t\tif (ticksToLastUnlock \u003e AMOUNT_OF_TICKS_TO_SHOW_OVERLAY)\n\t\t{\n\t\t\titemsRecentlyUnlocked \u003d false;\n\t\t}\n\t\tticksToLastUnlock +\u003d 1;\n\t}\n\n\t@Subscribe\n\tpublic void onScriptPostFired(ScriptPostFired event)\n\t{\n\t\tif (event.getScriptId() \u003d\u003d GE_SEARCH_BUILD_SCRIPT)\n\t\t{\n\t\t\tkillSearchResults();\n\t\t}\n\t}\n\n\tvoid killSearchResults()\n\t{\n\t\tWidget grandExchangeSearchResults \u003d client.getWidget(162, 53);\n\n\t\tif (grandExchangeSearchResults \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tWidget[] children \u003d grandExchangeSearchResults.getDynamicChildren();\n\n\t\tif (children \u003d\u003d null || children.length \u003c 2)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfor (int i \u003d 0; i \u003c children.length; i+\u003d 3) {\n\t\t\tif (!unlockedItems.contains(children[i + 2].getItemId()))\n\t\t\t{\n\t\t\t\tchildren[i].setHidden(true);\n\t\t\t\tchildren[i + 1].setOpacity(170);\n\t\t\t\tchildren[i + 2].setOpacity(170);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void sendChatMessage(String chatMessage)\n\t{\n\t\tfinal String message \u003d new ChatMessageBuilder()\n\t\t\t.append(ChatColorType.HIGHLIGHT)\n\t\t\t.append(chatMessage)\n\t\t\t.build();\n\n\t\tchatMessageManager.queue(\n\t\t\tQueuedMessage.builder()\n\t\t\t\t.type(ChatMessageType.CONSOLE)\n\t\t\t\t.runeLiteFormattedMessage(message)\n\t\t\t\t.build());\n\t}\n\n\tprivate void unlockedItemsLookup(ChatMessage chatMessage, String message)\n\t{\n\t\tMessageNode messageNode \u003d chatMessage.getMessageNode();\n\n\t\tif (!messageNode.getName().equals(client.getLocalPlayer().getName()))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal ChatMessageBuilder builder \u003d new ChatMessageBuilder()\n\t\t\t.append(ChatColorType.HIGHLIGHT)\n\t\t\t.append(\"You have unlocked \")\n\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t.append(Integer.toString(unlockedItems.size()))\n\t\t\t.append(ChatColorType.HIGHLIGHT)\n\t\t\t.append(\" items.\");\n\n\t\tString response \u003d builder.build();\n\n\t\tmessageNode.setRuneLiteFormatMessage(response);\n\t\tchatMessageManager.update(messageNode);\n\t\tclient.refreshChat();\n\t}\n}\n","filePath":"src\\main\\java\\dekvall\\bronzeman\\BronzemanModePlugin.java"},{"fileName":"BronzemanModePluginTest.java","content":"package dekvall.bronzeman;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class BronzemanModePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(BronzemanModePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\dekvall\\bronzeman\\BronzemanModePluginTest.java"}]},{"commit":"d66a7075d6d2b7d3d21f82dad6de40f73a76c7fc","repository":"https://github.com/capslock13/AdvancedRaidTracker.git","internalName":"advanced-raid-tracker","files":[{"fileName":"AdvancedRaidTrackerConfig.java","content":"package com.advancedraidtracker;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\nimport java.awt.*;\n\n@ConfigGroup(\"Advanced Raid Tracker\")\n\npublic interface AdvancedRaidTrackerConfig extends Config\n{\n    @ConfigItem(\n            position \u003d 0,\n            keyName \u003d \"chatSplts\",\n            name \u003d \"Chat Splits\",\n            description \u003d \"Display room splits in chatbox.\"\n    )\n    default boolean chatSplits()\n    {\n        return false;\n    }\n\n    @ConfigItem(\n            position \u003d 1,\n            keyName \u003d \"writeToLog\",\n            name \u003d \"Track Raid Data\",\n            description \u003d \"Tracks data about the raids you spectate and participate in.\"\n    )\n    default boolean writeToLog()\n    {\n        return true;\n    }\n\n    @ConfigItem(\n            position \u003d 2,\n            keyName \u003d \"showMistakesInChat\",\n            name \u003d \"Show mistakes in chat?\",\n            description \u003d \"Shows mistakes (hammer bop, etc) in chat box when they occur.\"\n    )\n    default boolean showMistakesInChat()\n    {\n        return true;\n    }\n\n    @ConfigItem(\n            position \u003d 3,\n            keyName \u003d \"chartScaleSize\",\n            name \u003d \"Chart Scale Size\",\n            description \u003d \"Adjusts box size in chart\"\n    )\n    default int chartScaleSize()\n    {\n        return 26;\n    }\n\n    @ConfigItem(\n            position \u003d 5,\n            keyName \u003d \"useIconsOnChart\",\n            name \u003d \"Use icons on chart\",\n            description \u003d \"Replaced letter/colors with icons\"\n    )\n    default boolean useIconsOnChart() { return true;}\n\n    @ConfigItem(\n            position \u003d 6,\n            keyName \u003d \"primaryDark\",\n            name \u003d \"Chart Dark Color\",\n            description \u003d \"Color to use as darkest on chart\"\n    )\n    default Color primaryDark() { return new Color(20, 20, 20);}\n\n    @ConfigItem(\n            position \u003d 7,\n            keyName \u003d \"primaryMiddle\",\n            name \u003d \"Chart Middle Color\",\n            description \u003d \"Color to use as Middle on chart\"\n    )\n    default Color primaryMiddle() { return new Color(30, 30, 30);}\n\n    @ConfigItem(\n            position \u003d 8,\n            keyName \u003d \"primaryLight\",\n            name \u003d \"Chart Light Color\",\n            description \u003d \"Color to use as lightest on chart\"\n    )\n    default Color primaryLight() { return new Color(40, 40, 40);}\n\n    @ConfigItem(\n            position \u003d 9,\n            keyName \u003d \"letterBackgroundOpacity\",\n            name \u003d \"Letter BG Opacity\",\n            description \u003d \"Opacity of letter background color on chart\"\n    )\n    default int letterBackgroundOpacity() { return 180;}\n\n    @ConfigItem(\n            position \u003d 9,\n            keyName \u003d \"iconBackgroundOpacity\",\n            name \u003d \"Icon BG Opacity\",\n            description \u003d \"Opacity of icon background color on chart\"\n    )\n    default int iconBackgroundOpacity() { return 180;}\n\n    @ConfigItem(\n            position \u003d 10,\n            keyName \u003d \"useUnkitted\",\n            name \u003d \"Use unkitted icons\",\n            description \u003d \"Replaces kitted items with unkitted variants on chart icons\"\n    )\n    default boolean useUnkitted(){return false;}\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\AdvancedRaidTrackerConfig.java"},{"fileName":"AdvancedRaidTrackerPlugin.java","content":"package com.advancedraidtracker;\n\nimport com.advancedraidtracker.constants.TobIDs;\nimport com.advancedraidtracker.constants.TOBRoom;\nimport com.advancedraidtracker.rooms.tob.*;\nimport com.advancedraidtracker.ui.charts.LiveChart;\nimport com.advancedraidtracker.ui.RaidTrackerSidePanel;\nimport com.advancedraidtracker.utility.*;\nimport com.advancedraidtracker.utility.datautility.DataWriter;\nimport com.advancedraidtracker.utility.thrallvengtracking.*;\nimport com.advancedraidtracker.utility.wrappers.PlayerCopy;\nimport com.advancedraidtracker.utility.wrappers.PlayerDidAttack;\nimport com.advancedraidtracker.utility.wrappers.QueuedPlayerAttackLessProjectiles;\nimport com.advancedraidtracker.utility.wrappers.ThrallOutlineBox;\nimport com.google.inject.Inject;\nimport com.google.inject.Provides;\nimport javax.swing.SwingUtilities;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.*;\nimport net.runelite.api.kit.KitType;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.events.PartyChanged;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.party.PartyMember;\nimport net.runelite.client.party.PartyService;\nimport net.runelite.client.party.WSClient;\nimport net.runelite.client.party.events.UserJoin;\nimport net.runelite.client.party.events.UserPart;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.plugins.PluginManager;\nimport net.runelite.client.plugins.specialcounter.SpecialCounterUpdate;\nimport net.runelite.client.plugins.specialcounter.SpecialWeapon;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.util.ImageUtil;\nimport net.runelite.client.util.Text;\n\nimport java.awt.image.BufferedImage;\nimport java.util.*;\nimport java.util.List;\nimport static com.advancedraidtracker.constants.LogID.*;\nimport static com.advancedraidtracker.constants.TobIDs.*;\nimport static com.advancedraidtracker.constants.TOBRoom.*;\nimport static com.advancedraidtracker.utility.RoomUtil.inRegion;\nimport static com.advancedraidtracker.utility.datautility.LegacyFileUtility.splitLegacyFiles;\n\n\n@Slf4j\n@PluginDescriptor(\n        name \u003d \"Advanced Raid Tracker\",\n        description \u003d \"Tracking and statistics for Theatre of Blood\",\n        tags \u003d {\"timers\", \"tob\", \"tracker\", \"time\", \"theatre\", \"analytics\"}\n)\npublic class AdvancedRaidTrackerPlugin extends Plugin\n{\n    private NavigationButton navButtonPrimary;\n    public DataWriter clog;\n\n    private boolean partyIntact \u003d false;\n\n    @Inject\n    private AdvancedRaidTrackerConfig config;\n\n    @Inject\n    private ItemManager itemManager;\n\n    public AdvancedRaidTrackerPlugin()\n    {\n    }\n\n    @Provides\n    AdvancedRaidTrackerConfig getConfig(ConfigManager configManager)\n    {\n        return configManager.getConfig(AdvancedRaidTrackerConfig.class);\n    }\n\n    @Inject\n    private ClientToolbar clientToolbar;\n\n    @Inject\n    public ClientThread clientThread;\n\n    @Inject\n    private PartyService party;\n\n    @Inject\n    private Client client;\n\n    private LobbyHandler lobby;\n    private MaidenHandler maiden;\n    private BloatHandler bloat;\n    private NyloHandler nylo;\n    private SotetsegHandler sote;\n    private XarpusHandler xarpus;\n    private VerzikHandler verzik;\n\n    private ArrayList\u003cDamageQueueShell\u003e queuedThrallDamage;\n\n    private ArrayList\u003cQueuedPlayerAttackLessProjectiles\u003e playersAttacked;\n\n\n    private boolean inTheatre;\n    private boolean wasInTheatre;\n    private RoomHandler currentRoom;\n    int deferredTick;\n    public ArrayList\u003cString\u003e currentPlayers;\n    public static int scale \u003d -1;\n    public boolean verzShieldActive \u003d false;\n    public boolean loggingIn \u003d false;\n\n    private ThrallTracker thrallTracker;\n    private VengTracker vengTracker;\n    private List\u003cPlayerShell\u003e localPlayers;\n    private List\u003cProjectileQueue\u003e activeProjectiles;\n    private List\u003cVengDamageQueue\u003e activeVenges;\n\n    @Inject\n    private PluginManager pluginManager;\n\n    @Inject\n    private EventBus eventBus;\n\n    @Inject\n    private WSClient wsClient;\n\n    @Inject\n    private ConfigManager configManager;\n\n    Map\u003cPlayer, Integer\u003e activelyPiping;\n    public LiveChart liveFrame;\n\n    @Override\n    protected void shutDown()\n    {\n        partyIntact \u003d false;\n        clog.addLine(LEFT_TOB, String.valueOf(client.getTickCount() - currentRoom.roomStartTick), currentRoom.getName());\n        clientToolbar.removeNavigation(navButtonPrimary);\n    }\n\n    public void openLiveFrame()\n    {\n        liveFrame.open();\n    }\n\n    public int getTick()\n    {\n        return client.getTickCount();\n    }\n\n    public boolean isVerzP2()\n    {\n        if (currentRoom instanceof VerzikHandler)\n        {\n            VerzikHandler room \u003d (VerzikHandler) currentRoom;\n            return room.roomState \u003d\u003d RoomState.VerzikRoomState.PHASE_2 || room.roomState \u003d\u003d RoomState.VerzikRoomState.PHASE_2_REDS;\n        }\n        return false;\n    }\n\n    @Override\n    protected void startUp() throws Exception\n    {\n        super.startUp();\n        splitLegacyFiles();\n        localPlayers \u003d new ArrayList\u003c\u003e();\n        thrallTracker \u003d new ThrallTracker(this);\n        vengTracker \u003d new VengTracker(this);\n        activeProjectiles \u003d new ArrayList\u003c\u003e();\n        activeVenges \u003d new ArrayList\u003c\u003e();\n        queuedThrallDamage \u003d new ArrayList\u003c\u003e();\n        RaidTrackerSidePanel timersPanelPrimary \u003d injector.getInstance(RaidTrackerSidePanel.class);\n        partyIntact \u003d false;\n        activelyPiping \u003d new LinkedHashMap\u003c\u003e();\n        liveFrame \u003d new LiveChart(config, clientThread, configManager);\n        playersTextChanged \u003d new ArrayList\u003c\u003e();\n        clog \u003d new DataWriter(config);\n\n        final BufferedImage icon \u003d ImageUtil.loadImageResource(AdvancedRaidTrackerPlugin.class, \"/com/advancedraidtracker/icon.png\");\n        navButtonPrimary \u003d NavigationButton.builder().tooltip(\"Advanced Raid Tracker\").icon(icon).priority(10).panel(timersPanelPrimary).build();\n\n        clientToolbar.addNavigation(navButtonPrimary);\n\n        lobby \u003d new LobbyHandler(client, clog, config);\n        maiden \u003d new MaidenHandler(client, clog, config, this, itemManager);\n        bloat \u003d new BloatHandler(client, clog, config, this);\n        nylo \u003d new NyloHandler(client, clog, config, this);\n        sote \u003d new SotetsegHandler(client, clog, config, this);\n        xarpus \u003d new XarpusHandler(client, clog, config, this);\n        verzik \u003d new VerzikHandler(client, clog, config, this, itemManager);\n        inTheatre \u003d false;\n        wasInTheatre \u003d false;\n        deferredTick \u003d 0;\n        currentPlayers \u003d new ArrayList\u003c\u003e();\n        playersAttacked \u003d new ArrayList\u003c\u003e();\n    }\n\n    @Subscribe\n    public void onGameStateChanged(GameStateChanged gameStateChanged)\n    {\n        if(gameStateChanged.getGameState().equals(GameState.LOGGED_IN))\n        {\n            try\n            {\n                loggingIn \u003d true;\n            }\n            catch (Exception e)\n            {\n                log.info(\"Failed to set name: \" + client.getLocalPlayer().getName());\n            }\n        }\n    }\n\n    /**\n     * @return Room as int if inside TOB (0 indexed), -1 otherwise\n     */\n    private int getRoom()\n    {\n        if (inRegion(client, LOBBY_REGION))\n            return -1;\n        else if (inRegion(client, MAIDEN_REGION))\n            return 0;\n        else if (inRegion(client, BLOAT_REGION))\n            return 1;\n        else if (inRegion(client, NYLO_REGION))\n            return 2;\n        else if (inRegion(client, SOTETSEG_REGION) || inRegion(client, SOTETSEG_UNDER_REGION))\n            return 3;\n        else if (inRegion(client, XARPUS_REGION))\n            return 4;\n        else if (inRegion(client, VERZIK_REGION))\n            return 5;\n        return -1;\n    }\n\n    private void updateRoom()\n    {\n        RoomHandler previous \u003d currentRoom;\n        int currentRegion \u003d getRoom();\n        boolean activeState \u003d false;\n        if (inRegion(client, LOBBY_REGION))\n        {\n            currentRoom \u003d lobby;\n        } else if (previous \u003d\u003d lobby \u0026\u0026 inRegion(client, BLOAT_REGION, NYLO_REGION, SOTETSEG_REGION, XARPUS_REGION, VERZIK_REGION))\n        {\n            deferredTick \u003d client.getTickCount() + 2; //Check two ticks from now for player names in orbs\n            clog.checkForEndFlag();\n            clog.migrateToNewRaid();\n            clog.addLine(ENTERED_TOB);\n            clog.addLine(SPECTATE);\n            clog.addLine(LATE_START, String.valueOf(currentRegion));\n            liveFrame.resetAll();\n        }\n        if (inRegion(client, MAIDEN_REGION))\n        {\n            if (previous !\u003d maiden)\n            {\n                currentRoom \u003d maiden;\n                enteredMaiden();\n                liveFrame.resetAll();\n            }\n            activeState \u003d true;\n        } else if (inRegion(client, BLOAT_REGION))\n        {\n            if (previous !\u003d bloat)\n            {\n                currentRoom \u003d bloat;\n                enteredBloat();\n            }\n            activeState \u003d true;\n        } else if (inRegion(client, NYLO_REGION))\n        {\n            if (previous !\u003d nylo)\n            {\n                currentRoom \u003d nylo;\n                enteredNylo();\n            }\n            activeState \u003d true;\n        } else if (inRegion(client, SOTETSEG_REGION, SOTETSEG_UNDER_REGION))\n        {\n            if (previous !\u003d sote)\n            {\n                currentRoom \u003d sote;\n                enteredSote();\n            }\n            activeState \u003d true;\n        } else if (inRegion(client, XARPUS_REGION))\n        {\n            if (previous !\u003d xarpus)\n            {\n                currentRoom \u003d xarpus;\n                enteredXarpus();\n            }\n            activeState \u003d true;\n        } else if (inRegion(client, VERZIK_REGION))\n        {\n            if (previous !\u003d verzik)\n            {\n                currentRoom \u003d verzik;\n                enteredVerzik();\n            }\n            activeState \u003d true;\n        }\n        inTheatre \u003d activeState;\n    }\n\n    private void enteredMaiden()\n    {\n        clog.checkForEndFlag();\n        clog.migrateToNewRaid();\n        clog.addLine(ENTERED_TOB);\n        deferredTick \u003d client.getTickCount() + 2;\n        maiden.reset();\n        liveFrame.tabbedPane.setSelectedIndex(0);\n    }\n\n    private void enteredBloat()\n    {\n        clog.addLine(ENTERED_NEW_TOB_REGION, String.valueOf(TOBRoom.BLOAT.ordinal()));\n        maiden.reset();\n        bloat.reset();\n        liveFrame.tabbedPane.setSelectedIndex(1);\n    }\n\n    private void enteredNylo()\n    {\n        clog.addLine(ENTERED_NEW_TOB_REGION, String.valueOf(NYLOCAS.ordinal()));\n        bloat.reset();\n        nylo.reset();\n        liveFrame.tabbedPane.setSelectedIndex(2);\n    }\n\n    private void enteredSote()\n    {\n        clog.addLine(ENTERED_NEW_TOB_REGION, String.valueOf(SOTETSEG.ordinal()));\n        nylo.reset();\n        sote.reset();\n        liveFrame.tabbedPane.setSelectedIndex(3);\n    }\n\n    private void enteredXarpus()\n    {\n        clog.addLine(ENTERED_NEW_TOB_REGION, String.valueOf(XARPUS.ordinal()));\n        sote.reset();\n        xarpus.reset();\n        liveFrame.tabbedPane.setSelectedIndex(4);\n    }\n\n    private void enteredVerzik()\n    {\n        clog.addLine(ENTERED_NEW_TOB_REGION, String.valueOf(VERZIK.ordinal()));\n        xarpus.reset();\n        verzik.reset();\n        liveFrame.tabbedPane.setSelectedIndex(5);\n    }\n\n    @Subscribe\n    public void onSpecialCounterUpdate(SpecialCounterUpdate event)\n    {\n        if (inTheatre)\n        {\n            String name \u003d party.getMemberById(event.getMemberId()).getDisplayName();\n            if (name \u003d\u003d null)\n            {\n                return;\n            }\n            boolean playerInRaid \u003d false;\n            // Ensures correct names across encodings\n            for (String player : currentPlayers)\n            {\n                if (name.equals(player.replaceAll(String.valueOf((char) 160), String.valueOf((char) 32))))\n                {\n                    playerInRaid \u003d true;\n                    break;\n                }\n            }\n            if (playerInRaid)\n            {\n                if (event.getWeapon().equals(SpecialWeapon.BANDOS_GODSWORD))\n                {\n                    clog.addLine(BGS, name, String.valueOf(event.getHit()), String.valueOf(client.getTickCount() - currentRoom.roomStartTick));\n                }\n                if (event.getWeapon().equals(SpecialWeapon.DRAGON_WARHAMMER))\n                {\n                    clog.addLine(DWH, name, String.valueOf(client.getTickCount() - currentRoom.roomStartTick));\n                }\n            }\n        }\n    }\n\n    private String cleanString(String s1)\n    {\n        return s1.replaceAll(String.valueOf((char) 160), String.valueOf((char) 32));\n    }\n\n    private boolean isPartyComplete()\n    {\n        if (currentPlayers.size() \u003e party.getMembers().size())\n        {\n            return false;\n        }\n        for (String raidPlayer : currentPlayers)\n        {\n            boolean currentPlayerMatched \u003d false;\n            for (PartyMember partyPlayer : party.getMembers())\n            {\n                if (cleanString(raidPlayer).equals(partyPlayer.getDisplayName()))\n                {\n                    currentPlayerMatched \u003d true;\n                }\n            }\n            if (!currentPlayerMatched)\n            {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    private void checkPartyUpdate()\n    {\n        if (inTheatre)\n        {\n            if (partyIntact)\n            {\n                if (!isPartyComplete())\n                {\n                    partyIntact \u003d false;\n                    clog.addLine(PARTY_INCOMPLETE);\n                }\n            } else\n            {\n                if (isPartyComplete())\n                {\n                    partyIntact \u003d true;\n                    clog.addLine(PARTY_COMPLETE);\n                }\n            }\n        }\n\n    }\n\n    @Subscribe\n    public void onPartyChanged(final PartyChanged party)\n    {\n\n        checkPartyUpdate();\n    }\n\n    @Subscribe\n    public void onUserPart(final UserPart event)\n    {\n        checkPartyUpdate();\n    }\n\n    @Subscribe\n    public void onUserJoin(final UserJoin event)\n    {\n        checkPartyUpdate();\n    }\n\n    public void addQueuedThrallDamage(int targetIndex, int sourceIndex, int offset, String source)\n    {\n        queuedThrallDamage.add(new DamageQueueShell(targetIndex, sourceIndex, offset, source, client.getTickCount()));\n    }\n\n    public void removeDeadProjectiles()\n    {\n        activeProjectiles.removeIf(projectileQueue -\u003e projectileQueue.finalTick \u003c\u003d client.getTickCount());\n    }\n\n    public void removeDeadVenges()\n    {\n        activeVenges.removeIf(vengDamageQueue -\u003e vengDamageQueue.appliedTick \u003c\u003d client.getTickCount());\n    }\n\n    public void addDelayedLine(TOBRoom room, int value, String description)\n    {\n        switch (TOBRoom.valueOf(room.value))\n        {\n            case MAIDEN:\n                liveFrame.addMaidenLine(value, description);\n                break;\n            case BLOAT:\n                liveFrame.addBloatLine(value, description);\n                break;\n            case NYLOCAS:\n                liveFrame.addNyloLine(value, description);\n                break;\n            case SOTETSEG:\n                liveFrame.addSoteLine(value, description);\n                break;\n            case XARPUS:\n                liveFrame.addXarpLine(value, description);\n                break;\n            case VERZIK:\n                liveFrame.addVerzikLine(value, description);\n                break;\n        }\n    }\n\n    public void thrallAttackedP2VerzikShield(int tickOffset)\n    {\n        if (currentRoom instanceof VerzikHandler)\n        {\n            VerzikHandler room \u003d (VerzikHandler) currentRoom;\n            room.thrallAttackedShield(client.getTickCount() + tickOffset);\n        }\n    }\n\n    public void removeThrallBox(Thrall thrall)\n    {\n        clog.addLine(THRALL_DESPAWN, thrall.getOwner(), String.valueOf(client.getTickCount() - currentRoom.roomStartTick));\n    }\n\n    public void addThrallOutlineBox(ThrallOutlineBox outlineBox)\n    {\n        clog.addLine(THRALL_SPAWN, outlineBox.owner, String.valueOf(outlineBox.spawnTick), String.valueOf(outlineBox.id));\n        liveFrame.getPanel(currentRoom.getName()).addThrallBox(outlineBox);\n    }\n\n    public Map\u003cString, PlayerCopy\u003e lastTickPlayer \u003d new HashMap\u003c\u003e();\n    public int getRoomTick()\n    {\n        return client.getTickCount() - currentRoom.roomStartTick;\n    }\n\n    @Subscribe\n    public void onGameTick(GameTick event)\n    {\n        if(loggingIn)\n        {\n            try\n            {\n                clog.setName(client.getLocalPlayer().getName());\n            }\n            catch (Exception e)\n            {\n                log.info(\"failed to set name?\");\n            }\n            loggingIn \u003d false;\n        }\n        checkAnimationsThatChanged();\n        checkOverheadTextsThatChanged();\n\n        for (Player p : activelyPiping.keySet())\n        {\n            if ((client.getTickCount() \u003e (activelyPiping.get(p) + 1)) \u0026\u0026 ((client.getTickCount() - activelyPiping.get(p)-1) % 2 \u003d\u003d 0))\n            {\n                if (p.getAnimation() \u003d\u003d BLOWPIPE_ANIMATION || p.getAnimation() \u003d\u003d BLOWPIPE_ANIMATION_OR)\n                {\n                    PlayerCopy previous \u003d lastTickPlayer.get(p.getName());\n                    if(previous !\u003d null)\n                    {\n                        clog.addLine(PLAYER_ATTACK,\n                                previous.name + \":\" + (client.getTickCount() - currentRoom.roomStartTick - 1),\n                                previous.animation + \":\" + previous.wornItems,\n                                \"\",\n                                previous.weapon + \":\" + previous.interactingIndex + \":\" + previous.interactingID,\n                                \"-1:\" + previous.interactingName);\n                        liveFrame.addAttack(new PlayerDidAttack(itemManager,\n                                previous.name,\n                                String.valueOf(previous.animation),\n                                -1,\n                                previous.weapon,\n                                \"-1\",\n                                \"\",\n                                previous.interactingIndex,\n                                previous.interactingID,\n                                previous.interactingName,\n                                previous.wornItems\n                        ), currentRoom.getName());\n                    }\n                }\n            }\n            int interactedIndex \u003d -1;\n            int interactedID \u003d -1;\n            String targetName \u003d \"\";\n            Actor interacted \u003d p.getInteracting();\n            if (interacted instanceof NPC)\n            {\n                NPC npc \u003d (NPC) interacted;\n                interactedID \u003d npc.getId();\n                interactedIndex \u003d npc.getIndex();\n                targetName \u003d npc.getName();\n            }\n            if (interacted instanceof Player)\n            {\n                Player player \u003d (Player) interacted;\n                targetName \u003d player.getName();\n            }\n            lastTickPlayer.put(p.getName(), new PlayerCopy(\n                    p.getName(), interactedIndex, interactedID, targetName, p.getAnimation(), PlayerWornItems.getStringFromComposition(p.getPlayerComposition()\n            ), String.valueOf(p.getPlayerComposition().getEquipmentId(KitType.WEAPON))));\n        }\n\n        for (QueuedPlayerAttackLessProjectiles playerAttackQueuedItem : playersAttacked)\n        {\n            playerAttackQueuedItem.tick--;\n            if (playerAttackQueuedItem.tick \u003d\u003d 0)\n            {\n                for (Projectile projectile : client.getProjectiles())\n                {\n                    int offset \u003d 41; //zcb\n                    if (projectile.getId() \u003d\u003d DAWNBRINGER_AUTO_PROJECTILE || projectile.getId() \u003d\u003d DAWNBRINGER_SPEC_PROJECTILE)\n                    {\n                        offset \u003d 51; //dawnbringer\n                    }\n                    if (projectile.getStartCycle() \u003d\u003d client.getGameCycle() + offset)\n                    {\n                        WorldPoint position \u003d WorldPoint.fromLocal(client, new LocalPoint(projectile.getX1(), projectile.getY1()));\n                        if (position.distanceTo(playerAttackQueuedItem.player.getWorldLocation()) \u003d\u003d 0)\n                        {\n                            if (projectile.getId() \u003d\u003d DAWNBRINGER_AUTO_PROJECTILE || projectile.getId() \u003d\u003d DAWNBRINGER_SPEC_PROJECTILE)\n                            {\n                                int projectileHitTick \u003d projectile.getRemainingCycles();\n                                projectileHitTick \u003d (projectileHitTick / 30);\n                                clog.addLine(DAWN_SPEC, playerAttackQueuedItem.player.getName(), String.valueOf(client.getTickCount() - currentRoom.roomStartTick + projectileHitTick + 1));\n\n                            }\n                            if (projectile.getId() \u003d\u003d DAWNBRINGER_AUTO_PROJECTILE || projectile.getId() \u003d\u003d ZCB_PROJECTILE || projectile.getId() \u003d\u003d ZCB_SPEC_PROJECTILE || projectile.getId() \u003d\u003d DAWNBRINGER_SPEC_PROJECTILE)\n                            {\n                                int interactedIndex \u003d -1;\n                                int interactedID \u003d -1;\n                                Actor interacted \u003d playerAttackQueuedItem.player.getInteracting();\n                                String targetName \u003d \"\";\n                                if (interacted instanceof NPC)\n                                {\n                                    NPC npc \u003d (NPC) interacted;\n                                    interactedID \u003d npc.getId();\n                                    interactedIndex \u003d npc.getIndex();\n                                    targetName \u003d npc.getName();\n                                }\n                                if (interacted instanceof Player)\n                                {\n                                    Player player \u003d (Player) interacted;\n                                    targetName \u003d player.getName();\n                                }\n                                clog.addLine(PLAYER_ATTACK,\n                                        playerAttackQueuedItem.player.getName() + \":\" + (client.getTickCount() - currentRoom.roomStartTick),\n                                        playerAttackQueuedItem.animation+\":\"+PlayerWornItems.getStringFromComposition(playerAttackQueuedItem.player.getPlayerComposition()),\n                                        playerAttackQueuedItem.spotAnims,\n                                        playerAttackQueuedItem.weapon + \":\" + interactedIndex + \":\" + interactedID,\n                                        projectile.getId() + \":\" + targetName);\n                                liveFrame.addAttack(new PlayerDidAttack(itemManager,\n                                                playerAttackQueuedItem.player.getName(),\n                                                playerAttackQueuedItem.animation,\n                                                0,\n                                                playerAttackQueuedItem.weapon,\n                                                String.valueOf(projectile.getId()),\n                                                playerAttackQueuedItem.spotAnims,\n                                                interactedIndex,\n                                                interactedID,\n                                                targetName,\n                                                PlayerWornItems.getStringFromComposition(playerAttackQueuedItem.player.getPlayerComposition()))\n                                        , currentRoom.getName());\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        playersAttacked.removeIf(p -\u003e p.tick \u003d\u003d 0);\n        removeDeadProjectiles();\n        removeDeadVenges();\n        playersTextChanged.clear();\n        localPlayers.clear();\n        for (Player p : client.getPlayers())\n        {\n            localPlayers.add(new PlayerShell(p.getWorldLocation(), p.getName()));\n            thrallTracker.updatePlayerInteracting(p.getName(), p.getInteracting());\n        }\n        for (DamageQueueShell damage : queuedThrallDamage)\n        {\n            damage.offset--;\n        }\n        thrallTracker.updateTick();\n        vengTracker.updateTick();\n        updateRoom();\n        if (inTheatre)\n        {\n            wasInTheatre \u003d true;\n            currentRoom.updateGameTick(event);\n\n            if (currentRoom.isActive())\n            {\n\t\t\t\tSwingUtilities.invokeLater(() -\u003e\n\t\t\t\t\tliveFrame.incrementTick(currentRoom.getName()));\n                int HP_VARBIT \u003d 6448;\n                liveFrame.getPanel(currentRoom.getName()).addRoomHP(client.getTickCount() - currentRoom.roomStartTick, client.getVarbitValue(HP_VARBIT));\n                clog.addLine(UPDATE_HP, String.valueOf(client.getVarbitValue(HP_VARBIT)), String.valueOf(client.getTickCount() - currentRoom.roomStartTick), currentRoom.getName());\n            }\n\n            if (client.getTickCount() \u003d\u003d deferredTick)\n            {\n                String[] players \u003d {\"\", \"\", \"\", \"\", \"\"};\n                int varcStrID \u003d 330; // Widget for player names\n                for (int i \u003d varcStrID; i \u003c varcStrID + 5; i++)\n                {\n                    if (client.getVarcStrValue(i) !\u003d null \u0026\u0026 !client.getVarcStrValue(i).isEmpty())\n                    {\n                        players[i - varcStrID] \u003d Text.escapeJagex(client.getVarcStrValue(i));\n                    }\n                }\n                for (String s : players)\n                {\n                    if (!s.isEmpty())\n                    {\n                        currentPlayers.add(s.replaceAll(String.valueOf((char) 160), String.valueOf((char) 32)));\n                    }\n                }\n                liveFrame.setPlayers(currentPlayers);\n                checkPartyUpdate();\n                boolean flag \u003d false;\n                for (String p : players)\n                {\n                    if (p.replaceAll(String.valueOf((char) 160), String.valueOf((char) 32)).equals(Objects.requireNonNull(client.getLocalPlayer().getName()).replaceAll(String.valueOf((char) 160), String.valueOf((char) 32))))\n                    {\n                        flag \u003d true;\n                    }\n                }\n                deferredTick \u003d 0;\n                if (!flag)\n                {\n                    clog.addLine(SPECTATE);\n                }\n                clog.addLine(PARTY_MEMBERS, players[0], players[1], players[2], players[3], players[4]);\n                maiden.setScale((int) Arrays.stream(players).filter(x -\u003e !x.isEmpty()).count());\n                scale \u003d currentPlayers.size();\n            }\n        } else\n        {\n            if (wasInTheatre)\n            {\n                leftRaid();\n                wasInTheatre \u003d false;\n                return;\n            }\n        }\n        clog.writeFile();\n    }\n\n    private void checkOverheadTextsThatChanged()\n    {\n        for (String player : playersWhoHaveOverheadText)\n        {\n            for (VengPair vp : playersTextChanged)\n            {\n                if (vp.player.equals(player))\n                {\n                    activeVenges.add(new VengDamageQueue(vp.player, vp.hitsplat, client.getTickCount() + 1));\n                }\n            }\n        }\n        playersWhoHaveOverheadText.clear();\n    }\n\n    private void checkAnimationsThatChanged()\n    {\n        for(Player p : deferredAnimations)\n        {\n            checkAnimation(p);\n        }\n        deferredAnimations.clear();\n    }\n\n    private void checkAnimation(Player p)\n    {\n        if (inTheatre)\n        {\n            if (p.getPlayerComposition() !\u003d null)\n            {\n                int id \u003d p.getPlayerComposition().getEquipmentId(KitType.WEAPON);\n                if (p.getAnimation() \u003d\u003d SCYTHE_ANIMATION)\n                {\n                    if (id \u003d\u003d UNCHARGED_SCYTHE || id \u003d\u003d UNCHARGED_BLOOD_SCYTHE || id \u003d\u003d UNCHARGED_HOLY_SCYTHE)\n                    {\n                        if (config.showMistakesInChat())\n                        {\n                            sendChatMessage(p.getName() + \" is using an uncharged scythe\");\n                        }\n                    }\n                } else if (p.getAnimation() \u003d\u003d BOP_ANIMATION)\n                {\n                    if (id \u003d\u003d DRAGON_WARHAMMER || id \u003d\u003d DRAGON_WARHAMMER_ALTERNATE)\n                    {\n                        if (config.showMistakesInChat())\n                        {\n                            sendChatMessage(p.getName() + \" hammer bopped (bad rng)\");\n                        }\n                        clog.addLine(DWH_BOP, p.getName());\n                    }\n                } else if (p.getAnimation() \u003d\u003d WHACK_ANIMATION)\n                {\n                    if (id \u003d\u003d KODAI_WAND || id \u003d\u003d KODAI_WAND_ALTERNATE)\n                    {\n                        if (config.showMistakesInChat())\n                        {\n                            sendChatMessage(p.getName() + \" kodai bopped (nothing they could\u0027ve done to prevent it)\");\n                        }\n                        clog.addLine(KODAI_BOP, p.getName());\n                    }\n                } else if (p.getAnimation() \u003d\u003d STAB_ANIMATION)\n                {\n                    if (id \u003d\u003d CHALLY)\n                    {\n                        if (config.showMistakesInChat())\n                        {\n                            sendChatMessage(p.getName() + \" chally poked\");\n                        }\n                        clog.addLine(CHALLY_POKE, p.getName());\n                    }\n                } else if (p.getAnimation() \u003d\u003d TWO_HAND_SWORD_SWING)\n                {\n                    if(id \u003d\u003d BANDOS_GODSWORD || id \u003d\u003d BANDOS_GODSWORD_OR)\n                    {\n                        if (config.showMistakesInChat())\n                        {\n                            sendChatMessage(p.getName() + \" swung BGS without speccing\");\n                        }\n                        clog.addLine(BGS_WHACK, p.getName());\n                    }\n                }\n                StringBuilder animations \u003d new StringBuilder();\n                for (ActorSpotAnim anim : p.getSpotAnims())\n                {\n                    animations.append(anim.getId());\n                    animations.append(\":\");\n                }\n                if (p.getAnimation() \u003d\u003d POWERED_STAFF_ANIMATION || p.getAnimation() \u003d\u003d CROSSBOW_ANIMATION)\n                {\n                    if (p.getAnimation() !\u003d POWERED_STAFF_ANIMATION || p.getPlayerComposition().getEquipmentId(KitType.WEAPON) \u003d\u003d DAWNBRINGER_ITEM)\n                    { //Can be ZCB, Sang, or Dawnbringer. We only care about projectile for dawnbringer or ZCB. Sang \u0026 dawnbringer share animation\n                        //so this filters powered staves unless it\u0027s dawnbringer\n                        WorldPoint worldPoint \u003d p.getWorldLocation();\n                        playersAttacked.add(new QueuedPlayerAttackLessProjectiles(p, worldPoint, 1, animations.toString(), String.valueOf(p.getPlayerComposition().getEquipmentId(KitType.WEAPON)), String.valueOf(p.getAnimation())));\n                    }\n                    else\n                    {\n                        int interactedIndex \u003d -1;\n                        int interactedID \u003d -1;\n                        Actor interacted \u003d p.getInteracting();\n                        String targetName \u003d \"\";\n                        if (interacted instanceof NPC)\n                        {\n                            NPC npc \u003d (NPC) interacted;\n                            interactedID \u003d npc.getId();\n                            interactedIndex \u003d npc.getIndex();\n                            targetName \u003d npc.getName();\n                        }\n                        generatePlayerAttackInfo(p, animations.toString(), interactedIndex, interactedID, interacted, targetName);\n                    }\n                }\n                else if (p.getAnimation() !\u003d -1)\n                {\n                    int interactedIndex \u003d -1;\n                    int interactedID \u003d -1;\n                    Actor interacted \u003d p.getInteracting();\n                    String targetName \u003d \"\";\n                    if (interacted instanceof NPC)\n                    {\n                        NPC npc \u003d (NPC) interacted;\n                        interactedID \u003d npc.getId();\n                        interactedIndex \u003d npc.getIndex();\n                    }\n                    generatePlayerAttackInfo(p, animations.toString(), interactedIndex, interactedID, interacted, targetName);\n                    if (p.getAnimation() \u003d\u003d BLOWPIPE_ANIMATION || p.getAnimation() \u003d\u003d BLOWPIPE_ANIMATION_OR)\n                    {\n                        activelyPiping.put(p, client.getTickCount());\n                        interactedIndex \u003d -1;\n                        interactedID \u003d -1;\n                        targetName \u003d \"\";\n                        interacted \u003d p.getInteracting();\n                        if (interacted instanceof NPC)\n                        {\n                            NPC npc \u003d (NPC) interacted;\n                            interactedID \u003d npc.getId();\n                            interactedIndex \u003d npc.getIndex();\n                            targetName \u003d npc.getName();\n                        }\n                        if (interacted instanceof Player)\n                        {\n                            Player player \u003d (Player) interacted;\n                            targetName \u003d player.getName();\n                        }\n                        lastTickPlayer.put(p.getName(), new PlayerCopy(\n                                p.getName(), interactedIndex, interactedID, targetName, p.getAnimation(), PlayerWornItems.getStringFromComposition(p.getPlayerComposition()\n                        ), String.valueOf(p.getPlayerComposition().getEquipmentId(KitType.WEAPON))));\n                    }\n                    else\n                    {\n                        activelyPiping.remove(p);\n                        lastTickPlayer.remove(p.getName());\n                    }\n                }\n                else\n                {\n                    activelyPiping.remove(p);\n                    lastTickPlayer.remove(p.getName());\n                }\n\n            }\n        }\n    }\n\n    public void leftRaid()\n    {\n        lastTickPlayer.clear();\n        partyIntact \u003d false;\n        currentPlayers.clear();\n        clog.addLine(LEFT_TOB, String.valueOf(client.getTickCount() - currentRoom.roomStartTick), currentRoom.getName());\n        clog.writeFile();\n        clog.migrateToNewRaid();\n        currentRoom \u003d null;\n        activelyPiping.clear();\n        deferredAnimations.clear();\n    }\n\n    @Subscribe\n    public void onActorDeath(ActorDeath event)\n    {\n        if (inTheatre)\n        {\n            Actor a \u003d event.getActor();\n            if (a instanceof Player)\n            {\n                clog.addLine(PLAYER_DIED, event.getActor().getName(), String.valueOf(client.getTickCount() - currentRoom.roomStartTick));\n            }\n        }\n    }\n\n    @Subscribe\n    public void onGroundObjectSpawned(GroundObjectSpawned event)\n    {\n        if(inTheatre)\n        {\n            currentRoom.updateGroundObjectSpawned(event);\n        }\n    }\n\n    @Subscribe\n    public void onGraphicChanged(GraphicChanged event)\n    {\n        if (event.getActor() instanceof Player)\n        {\n            int id \u003d -1;\n            if (event.getActor().hasSpotAnim(THRALL_CAST_GRAPHIC_MAGE))\n            {\n                id \u003d THRALL_CAST_GRAPHIC_MAGE;\n            } else if (event.getActor().hasSpotAnim(THRALL_CAST_GRAPHIC_MELEE))\n            {\n                id \u003d THRALL_CAST_GRAPHIC_MELEE;\n            } else if (event.getActor().hasSpotAnim(THRALL_CAST_GRAPHIC_RANGE))\n            {\n                id \u003d THRALL_CAST_GRAPHIC_RANGE;\n            } else if (event.getActor().hasSpotAnim(VENG_GRAPHIC))\n            {\n                vengTracker.vengSelfGraphicApplied((Player) event.getActor());\n            } else if (event.getActor().hasSpotAnim(VENG_OTHER_GRAPHIC))\n            {\n                vengTracker.vengOtherGraphicApplied((Player) event.getActor());\n            }\n            if (id !\u003d -1)\n            {\n                thrallTracker.playerHasThrallCastSpotAnim((Player) event.getActor(), id);\n            }\n\n        }\n        if (inTheatre)\n        {\n            currentRoom.updateGraphicChanged(event);\n        }\n    }\n\n    @Subscribe\n    public void onGraphicsObjectCreated(GraphicsObjectCreated event)\n    {\n        if (inTheatre)\n        {\n            currentRoom.updateGraphicsObjectCreated(event);\n        }\n    }\n\n    @Subscribe\n    public void onGameObjectSpawned(GameObjectSpawned event)\n    {\n        if (inTheatre)\n        {\n            currentRoom.updateGameObjectSpawned(event);\n        }\n    }\n\n    @Subscribe\n    public void onGameObjectDespawned(GameObjectDespawned event)\n    {\n        if (inTheatre)\n        {\n            currentRoom.updateGameObjectDespawned(event);\n        }\n    }\n\n    @Subscribe\n    public void onItemSpawned(ItemSpawned event)\n    {\n        if (inTheatre)\n        {\n            currentRoom.updateItemSpawned(event);\n        }\n    }\n\n    @Subscribe\n    public void onProjectileMoved(ProjectileMoved event)\n    {\n        if (inTheatre)\n        {\n            int id \u003d event.getProjectile().getId();\n            if (id \u003d\u003d THRALL_PROJECTILE_RANGE || id \u003d\u003d THRALL_PROJECTILE_MAGE)\n            {\n                if (event.getProjectile().getStartCycle() \u003d\u003d client.getGameCycle())\n                {\n                    thrallTracker.projectileCreated(event.getProjectile(), WorldPoint.fromLocal(client, new LocalPoint(event.getProjectile().getX1(), event.getProjectile().getY1())));\n                }\n            }\n            //Thrall hitsplats come before damage hitsplits unless the source is a projectile that was spawned on a tick before the thrall projectile spawned\n            else if (event.getProjectile().getStartCycle() \u003d\u003d client.getGameCycle())\n            { //Thrall projectiles move slower and the only time this situation occurs in TOB is max distance TBOW/ZCB during maiden\n                if (id \u003d\u003d TBOW_PROJECTILE || id \u003d\u003d ZCB_PROJECTILE || id \u003d\u003d ZCB_SPEC_PROJECTILE)\n                { //Not sure why 10 is correct instead of 19 (60 - 41 tick delay) but extensive trial and error shows this to be accurate\n                    int projectileHitTick \u003d 10 + event.getProjectile().getRemainingCycles();\n                    projectileHitTick \u003d (projectileHitTick / 30);\n                    if (event.getProjectile().getInteracting() instanceof NPC)\n                    {\n                        int index \u003d ((NPC) event.getProjectile().getInteracting()).getIndex();\n                        activeProjectiles.add(new ProjectileQueue(client.getTickCount(), projectileHitTick + client.getTickCount(), index));\n                    }\n                }\n            }\n            if (inTheatre)\n            {\n                currentRoom.updateProjectileMoved(event);\n            }\n        }\n    }\n\n    public void sendChatMessage(String msg)\n    {\n        clientThread.invoke(() -\u003e client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", msg, null, false));\n    }\n\n    private final ArrayList\u003cPlayer\u003e deferredAnimations \u003d new ArrayList\u003c\u003e();\n\n    @Subscribe\n    public void onConfigChanged(ConfigChanged event)\n    {\n        if(event.getGroup().equals(\"Advanced Raid Tracker\") \u0026\u0026 event.getKey().contains(\"primary\"))\n        {\n            liveFrame.redrawAll();\n        }\n    }\n\n    @Subscribe\n    public void onAnimationChanged(AnimationChanged event)\n    {\n        if(event.getActor() instanceof Player)\n        {\n            Player p \u003d (Player) event.getActor();\n            if(event.getActor().getAnimation() \u003d\u003d 6294 || event.getActor().getAnimation() \u003d\u003d 722 || event.getActor().getAnimation() \u003d\u003d 6299 || event.getActor().getAnimation() \u003d\u003d -1)\n            {\n                checkAnimation(p);\n            }\n            else\n            {\n                deferredAnimations.add(p);\n            }\n        }\n        if (inTheatre)\n        {\n            int id \u003d event.getActor().getAnimation();\n            if (event.getActor().getAnimation() \u003d\u003d THRALL_CAST_ANIMATION)\n            {\n                thrallTracker.castThrallAnimation((Player) event.getActor());\n            } else if (event.getActor().getAnimation() \u003d\u003d MELEE_THRALL_ATTACK_ANIMATION \u0026\u0026 event.getActor() instanceof NPC)\n            {\n                thrallTracker.meleeThrallAttacked((NPC) event.getActor());\n            } else if (event.getActor().getAnimation() \u003d\u003d VENG_CAST)\n            {\n                vengTracker.vengSelfCast((Player) event.getActor());\n            } else if (event.getActor().getAnimation() \u003d\u003d VENG_OTHER_CAST)\n            {\n                vengTracker.vengOtherCast((Player) event.getActor());\n            } else if (id \u003d\u003d DWH_SPEC)\n            {\n                clog.addLine(HAMMER_ATTEMPTED, event.getActor().getName());\n            } else if (event.getActor().getName() !\u003d null \u0026\u0026 event.getActor().getName().contains(\"Maiden\") \u0026\u0026 id \u003d\u003d MAIDEN_BLOOD_THROW_ANIM)\n            {\n                clog.addLine(BLOOD_THROWN);\n            }\n            if (inTheatre)\n            {\n                currentRoom.updateAnimationChanged(event);\n            }\n        }\n    }\n\n    private void generatePlayerAttackInfo(Player p, String animations, int interactedIndex, int interactedID, Actor interacted, String targetName)\n    {\n        if (interacted instanceof Player)\n        {\n            Player player \u003d (Player) interacted;\n            targetName \u003d player.getName();\n        }\n        clog.addLine(PLAYER_ATTACK,\n                p.getName() + \":\" + (client.getTickCount() - currentRoom.roomStartTick),\n                p.getAnimation()+\":\"+PlayerWornItems.getStringFromComposition(p.getPlayerComposition()),\n                animations,\n                p.getPlayerComposition().getEquipmentId(KitType.WEAPON) + \":\" + interactedIndex + \":\" + interactedID,\n                \"-1:\" + targetName);\n        liveFrame.addAttack(new PlayerDidAttack(itemManager,\n                String.valueOf(p.getName()),\n                String.valueOf(p.getAnimation()),\n                0,\n                String.valueOf(p.getPlayerComposition().getEquipmentId(KitType.WEAPON)),\n                \"-1\",\n                animations,\n                interactedIndex,\n                interactedID,\n                targetName,\n                PlayerWornItems.getStringFromComposition(p.getPlayerComposition())\n        ), currentRoom.getName());\n    }\n\n    @Subscribe\n    public void onInteractingChanged(InteractingChanged event)\n    {\n        if (inTheatre)\n        {\n            currentRoom.updateInteractingChanged(event);\n        }\n    }\n\n    @Subscribe\n    public void onNpcChanged(NpcChanged event)\n    {\n        if (inTheatre)\n        {\n            currentRoom.handleNPCChanged(event.getNpc().getId());\n        }\n    }\n\n    private void handleThrallSpawn(NPC npc)\n    {\n        ArrayList\u003cPlayerShell\u003e potentialPlayers \u003d new ArrayList\u003c\u003e();\n        for (PlayerShell p : localPlayers)\n        {\n            if (p.worldLocation.distanceTo(npc.getWorldLocation()) \u003d\u003d 1)\n            {\n                potentialPlayers.add(p);\n            }\n        }\n        thrallTracker.thrallSpawned(npc, potentialPlayers);\n    }\n\n    @Subscribe\n    public void onNpcSpawned(NpcSpawned event)\n    {\n        int id \u003d event.getNpc().getId();\n        if (id \u003d\u003d MELEE_THRALL || id \u003d\u003d RANGE_THRALL || id \u003d\u003d MAGE_THRALL)\n        {\n            handleThrallSpawn(event.getNpc());\n        }\n        switch (event.getNpc().getId())\n        {\n            case TobIDs.MAIDEN_P0:\n            case TobIDs.MAIDEN_P1:\n            case TobIDs.MAIDEN_P2:\n            case TobIDs.MAIDEN_P3:\n            case TobIDs.MAIDEN_PRE_DEAD:\n            case TobIDs.MAIDEN_DEAD:\n            case TobIDs.MAIDEN_MATOMENOS:\n            case TobIDs.MAIDEN_P0_HM:\n            case TobIDs.MAIDEN_P1_HM:\n            case TobIDs.MAIDEN_P2_HM:\n            case TobIDs.MAIDEN_P3_HM:\n            case TobIDs.MAIDEN_PRE_DEAD_HM:\n            case TobIDs.MAIDEN_DEAD_HM:\n            case TobIDs.MAIDEN_MATOMENOS_HM:\n            case TobIDs.MAIDEN_P0_SM:\n            case TobIDs.MAIDEN_P1_SM:\n            case TobIDs.MAIDEN_P2_SM:\n            case TobIDs.MAIDEN_P3_SM:\n            case TobIDs.MAIDEN_PRE_DEAD_SM:\n            case TobIDs.MAIDEN_DEAD_SM:\n            case TobIDs.MAIDEN_MATOMENOS_SM:\n            case TobIDs.MAIDEN_BLOOD:\n            case TobIDs.MAIDEN_BLOOD_HM:\n            case TobIDs.MAIDEN_BLOOD_SM:\n            {\n                maiden.updateNpcSpawned(event);\n            }\n            break;\n            case TobIDs.BLOAT:\n            case TobIDs.BLOAT_HM:\n            case TobIDs.BLOAT_SM:\n                bloat.updateNpcSpawned(event);\n                break;\n            case TobIDs.NYLO_MELEE_SMALL:\n            case TobIDs.NYLO_MELEE_SMALL_AGRO:\n            case TobIDs.NYLO_RANGE_SMALL:\n            case TobIDs.NYLO_RANGE_SMALL_AGRO:\n            case TobIDs.NYLO_MAGE_SMALL:\n            case TobIDs.NYLO_MAGE_SMALL_AGRO:\n            case TobIDs.NYLO_MELEE_BIG:\n            case TobIDs.NYLO_MELEE_BIG_AGRO:\n            case TobIDs.NYLO_RANGE_BIG:\n            case TobIDs.NYLO_RANGE_BIG_AGRO:\n            case TobIDs.NYLO_MAGE_BIG:\n            case TobIDs.NYLO_MAGE_BIG_AGRO:\n            case TobIDs.NYLO_MELEE_SMALL_HM:\n            case TobIDs.NYLO_MELEE_SMALL_AGRO_HM:\n            case TobIDs.NYLO_RANGE_SMALL_HM:\n            case TobIDs.NYLO_RANGE_SMALL_AGRO_HM:\n            case TobIDs.NYLO_MAGE_SMALL_HM:\n            case TobIDs.NYLO_MAGE_SMALL_AGRO_HM:\n            case TobIDs.NYLO_MELEE_BIG_HM:\n            case TobIDs.NYLO_MELEE_BIG_AGRO_HM:\n            case TobIDs.NYLO_RANGE_BIG_HM:\n            case TobIDs.NYLO_RANGE_BIG_AGRO_HM:\n            case TobIDs.NYLO_MAGE_BIG_HM:\n            case TobIDs.NYLO_MAGE_BIG_AGRO_HM:\n            case TobIDs.NYLO_MELEE_SMALL_SM:\n            case TobIDs.NYLO_MELEE_SMALL_AGRO_SM:\n            case TobIDs.NYLO_RANGE_SMALL_SM:\n            case TobIDs.NYLO_RANGE_SMALL_AGRO_SM:\n            case TobIDs.NYLO_MAGE_SMALL_SM:\n            case TobIDs.NYLO_MAGE_SMALL_AGRO_SM:\n            case TobIDs.NYLO_MELEE_BIG_SM:\n            case TobIDs.NYLO_MELEE_BIG_AGRO_SM:\n            case TobIDs.NYLO_RANGE_BIG_SM:\n            case TobIDs.NYLO_RANGE_BIG_AGRO_SM:\n            case TobIDs.NYLO_MAGE_BIG_SM:\n            case TobIDs.NYLO_MAGE_BIG_AGRO_SM:\n            case TobIDs.NYLO_BOSS_DROPPING:\n            case TobIDs.NYLO_BOSS_DROPPING_HM:\n            case TobIDs.NYLO_BOSS_DROPING_SM:\n            case TobIDs.NYLO_BOSS_MELEE:\n            case TobIDs.NYLO_BOSS_MELEE_HM:\n            case TobIDs.NYLO_BOSS_MELEE_SM:\n            case TobIDs.NYLO_BOSS_MAGE:\n            case TobIDs.NYLO_BOSS_MAGE_HM:\n            case TobIDs.NYLO_BOSS_MAGE_SM:\n            case TobIDs.NYLO_BOSS_RANGE:\n            case TobIDs.NYLO_BOSS_RANGE_HM:\n            case TobIDs.NYLO_BOSS_RANGE_SM:\n            case TobIDs.NYLO_PRINKIPAS_DROPPING:\n            case TobIDs.NYLO_PRINKIPAS_MELEE:\n            case TobIDs.NYLO_PRINKIPAS_MAGIC:\n            case TobIDs.NYLO_PRINKIPAS_RANGE:\n                nylo.updateNpcSpawned(event);\n                break;\n            case TobIDs.SOTETSEG_ACTIVE:\n            case TobIDs.SOTETSEG_ACTIVE_HM:\n            case TobIDs.SOTETSEG_ACTIVE_SM:\n            case TobIDs.SOTETSEG_INACTIVE:\n            case TobIDs.SOTETSEG_INACTIVE_HM:\n            case TobIDs.SOTETSEG_INACTIVE_SM:\n                sote.updateNpcSpawned(event);\n                break;\n            case TobIDs.XARPUS_INACTIVE:\n            case TobIDs.XARPUS_P1:\n            case TobIDs.XARPUS_P23:\n            case TobIDs.XARPUS_DEAD:\n            case TobIDs.XARPUS_INACTIVE_HM:\n            case TobIDs.XARPUS_P1_HM:\n            case TobIDs.XARPUS_P23_HM:\n            case TobIDs.XARPUS_DEAD_HM:\n            case TobIDs.XARPUS_INACTIVE_SM:\n            case TobIDs.XARPUS_P1_SM:\n            case TobIDs.XARPUS_P23_SM:\n            case TobIDs.XARPUS_DEAD_SM:\n                xarpus.updateNpcSpawned(event);\n                break;\n            case TobIDs.VERZIK_P1_INACTIVE:\n            case TobIDs.VERZIK_P1:\n            case TobIDs.VERZIK_P2_INACTIVE:\n            case TobIDs.VERZIK_P2:\n            case TobIDs.VERZIK_P3_INACTIVE:\n            case TobIDs.VERZIK_P3:\n            case TobIDs.VERZIK_DEAD:\n            case TobIDs.VERZIK_P1_INACTIVE_HM:\n            case TobIDs.VERZIK_P1_HM:\n            case TobIDs.VERZIK_P2_INACTIVE_HM:\n            case TobIDs.VERZIK_P2_HM:\n            case TobIDs.VERZIK_P3_INACTIVE_HM:\n            case TobIDs.VERZIK_P3_HM:\n            case TobIDs.VERZIK_DEAD_HM:\n            case TobIDs.VERZIK_P1_INACTIVE_SM:\n            case TobIDs.VERZIK_P1_SM:\n            case TobIDs.VERZIK_P2_INACTIVE_SM:\n            case TobIDs.VERZIK_P2_SM:\n            case TobIDs.VERZIK_P3_INACTIVE_SM:\n            case TobIDs.VERZIK_P3_SM:\n            case TobIDs.VERZIK_DEAD_SM:\n                verzik.updateNpcSpawned(event);\n                break;\n            default:\n                if (currentRoom !\u003d null)\n                {\n                    currentRoom.updateNpcSpawned(event);\n                }\n                break;\n        }\n    }\n\n    @Subscribe\n    public void onNpcDespawned(NpcDespawned event)\n    {\n        int id \u003d event.getNpc().getId();\n        if (id \u003d\u003d MELEE_THRALL || id \u003d\u003d RANGE_THRALL || id \u003d\u003d MAGE_THRALL)\n        {\n            thrallTracker.removeThrall(event.getNpc());\n        }\n        if (inTheatre)\n        {\n            currentRoom.updateNpcDespawned(event);\n        }\n    }\n\n    @Subscribe\n    public void onHitsplatApplied(HitsplatApplied event)\n    {\n        if (inTheatre)\n        {\n            if (event.getActor() instanceof Player \u0026\u0026 inTheatre)\n            {\n                playersTextChanged.add(new VengPair(event.getActor().getName(), event.getHitsplat().getAmount()));\n            }\n            queuedThrallDamage.sort(Comparator.comparing(DamageQueueShell::getSourceIndex));\n            int index \u003d -1;\n            if (event.getActor() instanceof NPC \u0026\u0026 event.getHitsplat().getHitsplatType() !\u003d HitsplatID.HEAL)\n            {\n                for (int i \u003d 0; i \u003c queuedThrallDamage.size(); i++)\n                {\n                    int altIndex \u003d 0;\n                    int matchedIndex \u003d -1;\n                    boolean postponeThrallHit \u003d false;\n                    for (ProjectileQueue projectile : activeProjectiles)\n                    {\n                        if (projectile.targetIndex \u003d\u003d ((NPC) event.getActor()).getIndex())\n                        {\n                            if (client.getTickCount() \u003d\u003d projectile.finalTick)\n                            {\n                                if (projectile.originTick \u003c queuedThrallDamage.get(i).originTick)\n                                {\n                                    postponeThrallHit \u003d true;\n                                    matchedIndex \u003d altIndex;\n                                }\n                            }\n                        }\n                        altIndex++;\n                    }\n                    if (queuedThrallDamage.get(i).offset \u003d\u003d 0 \u0026\u0026 queuedThrallDamage.get(i).targetIndex \u003d\u003d ((NPC) event.getActor()).getIndex())\n                    {\n                        if (postponeThrallHit)\n                        {\n                            activeProjectiles.remove(matchedIndex);\n                        } else\n                        {\n                            if (event.getHitsplat().getAmount() \u003c\u003d 3)\n                            {\n                                index \u003d i;\n                                clog.addLine(THRALL_DAMAGED, queuedThrallDamage.get(i).source, String.valueOf(event.getHitsplat().getAmount()));\n\n                            }\n                        }\n                        if (index !\u003d -1)\n                        {\n                            queuedThrallDamage.remove(index);\n                        }\n                        if (inTheatre)\n                        {\n                            currentRoom.updateHitsplatApplied(event);\n                        }\n                        return;\n                    }\n                }\n                for (VengDamageQueue veng : activeVenges)\n                {\n                    int expectedDamage \u003d (int) (0.75 * veng.damage);\n                    if (event.getHitsplat().getAmount() \u003d\u003d expectedDamage)\n                    {\n                        //todo can be wrong if splat would overkill\n                        clog.addLine(VENG_WAS_PROCCED, veng.target, String.valueOf(expectedDamage));\n                        if (inTheatre)\n                        {\n                            currentRoom.updateHitsplatApplied(event);\n                        }\n                        return;\n                    }\n                }\n            }\n\n            if (inTheatre)\n            {\n                currentRoom.updateHitsplatApplied(event);\n            }\n        }\n    }\n\n\n    private ArrayList\u003cVengPair\u003e playersTextChanged;\n\n    private final ArrayList\u003cString\u003e playersWhoHaveOverheadText \u003d new ArrayList\u003c\u003e();\n\n    @Subscribe\n    public void onOverheadTextChanged(OverheadTextChanged event)\n    {\n        if (inTheatre)\n        {\n            if (event.getOverheadText().equals(\"Taste vengeance!\"))\n            {\n                playersWhoHaveOverheadText.add(event.getActor().getName());\n            }\n            if (currentRoom instanceof XarpusHandler)\n            {\n                xarpus.updateOverheadText(event);\n            }\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\AdvancedRaidTrackerPlugin.java"},{"fileName":"AdvancedTOBData.java","content":"package com.advancedraidtracker;\n\nimport com.advancedraidtracker.constants.LogID;\nimport com.advancedraidtracker.utility.wrappers.PlayerDidAttack;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.game.ItemManager;\n\nimport java.io.File;\nimport java.nio.file.Files;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Scanner;\n\nimport static com.advancedraidtracker.constants.TobIDs.EXIT_FLAG;\nimport static com.advancedraidtracker.constants.TobIDs.SPECTATE_FLAG;\n\n@Slf4j\npublic class AdvancedTOBData\n{\n    public final ArrayList\u003cPlayerDidAttack\u003e maidenAttacks \u003d new ArrayList\u003c\u003e();\n    public final ArrayList\u003cPlayerDidAttack\u003e bloatAttacks \u003d new ArrayList\u003c\u003e();\n    public final ArrayList\u003cPlayerDidAttack\u003e nyloAttacks \u003d new ArrayList\u003c\u003e();\n    public final ArrayList\u003cPlayerDidAttack\u003e soteAttacks \u003d new ArrayList\u003c\u003e();\n    public final ArrayList\u003cPlayerDidAttack\u003e xarpAttacks \u003d new ArrayList\u003c\u003e();\n    public final ArrayList\u003cPlayerDidAttack\u003e verzikAttacks \u003d new ArrayList\u003c\u003e();\n    public Map\u003cInteger, Integer\u003e maidenHP \u003d new HashMap\u003c\u003e();\n    public Map\u003cInteger, Integer\u003e bloatHP \u003d new HashMap\u003c\u003e();\n    public Map\u003cInteger, Integer\u003e nyloHP \u003d new HashMap\u003c\u003e();\n    public Map\u003cInteger, Integer\u003e soteHP \u003d new HashMap\u003c\u003e();\n    public Map\u003cInteger, Integer\u003e xarpHP \u003d new HashMap\u003c\u003e();\n    public Map\u003cInteger, Integer\u003e verzikHP \u003d new HashMap\u003c\u003e();\n    public Map\u003cInteger, String\u003e maidenNPCMapping \u003d new HashMap\u003c\u003e();\n    public Map\u003cInteger, String\u003e nyloNPCMapping \u003d new HashMap\u003c\u003e();\n    public Map\u003cInteger, String\u003e verzikNPCMapping \u003d new HashMap\u003c\u003e();\n    private ArrayList\u003cString\u003e globalData;\n    private final ItemManager itemManager;\n\n    public static ArrayList\u003cString\u003e getRaidStrings(String path)\n    {\n        ArrayList\u003cString\u003e lines \u003d new ArrayList\u003c\u003e();\n        File file \u003d new File(path);\n        try\n        {\n            Scanner scanner \u003d new Scanner(Files.newInputStream(file.toPath()));\n            while(scanner.hasNextLine())\n            {\n                lines.add(scanner.nextLine());\n            }\n        }\n        catch(Exception ignored)\n        {\n\n        }\n        return lines;\n    }\n    public AdvancedTOBData(ArrayList\u003cString\u003e globalData, ItemManager itemManager)\n    {\n        this.itemManager \u003d itemManager;\n        this.globalData \u003d globalData;\n        int room \u003d -1;\n        for (String s : globalData)\n        {\n            String[] subData \u003d s.split(\",\");\n            int key \u003d Integer.parseInt(subData[3]);\n            if (key \u003d\u003d SPECTATE_FLAG)\n            {\n                room \u003d Integer.parseInt(subData[4]);\n            }\n        }\n        if (room \u003e 0)\n        {\n            switch (room)\n            {\n                case 1:\n                    if (!(checkExit() \u0026\u0026 parseBloat()))\n                        break;\n                case 2:\n                    if (!(checkExit() \u0026\u0026 parseNylo()))\n                        break;\n                case 3:\n                    if (!(checkExit() \u0026\u0026 parseSotetseg()))\n                        break;\n                case 4:\n                    if (!(checkExit() \u0026\u0026 parseXarpus()))\n                        break;\n                case 5:\n                    if (checkExit())\n                    {\n                        parseVerzik();\n                    }\n            }\n        } else\n        {\n            try\n            {\n                if (parseMaiden())\n                {\n                    if (checkExit() \u0026\u0026 parseBloat())\n                    {\n                        if (checkExit() \u0026\u0026 parseNylo())\n                        {\n                            if (checkExit() \u0026\u0026 parseSotetseg())\n                            {\n                                if (checkExit() \u0026\u0026 parseXarpus())\n                                {\n                                    if (checkExit())\n                                    {\n                                        parseVerzik();\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            } catch (Exception ignored)\n            {\n            }\n        }\n    }\n\n    PlayerDidAttack getPlayerDidAttack(String[] subData)\n    {\n        String player \u003d subData[4].split(\":\")[0];\n        int tick \u003d Integer.parseInt(subData[4].split(\":\")[1]);\n        String wornItems \u003d \"\";\n        String [] animationAndWorn \u003d subData[5].split(\":\");\n        String animation \u003d animationAndWorn[0];\n        if(animationAndWorn.length \u003d\u003d 2)\n        {\n            wornItems \u003d animationAndWorn[1];\n        }\n        String spotAnims \u003d subData[6];\n        String[] subsubData \u003d subData[7].split(\":\");\n        String weapon \u003d subsubData[0];\n        int interactedIndex \u003d -1;\n        int interactedID \u003d -1;\n        if (subsubData.length \u003e 2)\n        {\n            interactedIndex \u003d Integer.parseInt(subsubData[1]);\n            interactedID \u003d Integer.parseInt(subsubData[2]);\n        }\n        String[] projectileAndTargetData \u003d subData[8].split(\":\");\n        String projectile \u003d projectileAndTargetData[0];\n        String targetName \u003d \"\";\n        if (projectileAndTargetData.length \u003e 1)\n        {\n            targetName \u003d projectileAndTargetData[1];\n        }\n        return (new PlayerDidAttack(itemManager, player, animation, tick, weapon, projectile, spotAnims, interactedIndex, interactedID, targetName, wornItems));\n    }\n\n    private boolean parseMaiden()\n    {\n        int activeIndex \u003d 0;\n        loop:\n        for (String s : globalData)\n        {\n            String[] subData \u003d s.split(\",\", -1);\n            try\n            {\n                switch (LogID.valueOf(Integer.parseInt(subData[3])))\n                {\n                    case LEFT_TOB:\n                        globalData \u003d new ArrayList\u003c\u003e(globalData.subList(activeIndex + 1, globalData.size()));\n                        return false;\n                    case MAIDEN_0HP:\n                    case BLOAT_SPAWNED:\n                    case MAIDEN_DESPAWNED:\n                        break loop;\n                    case PLAYER_ATTACK:\n                        maidenAttacks.add(getPlayerDidAttack(subData));\n                        break;\n                    case UPDATE_HP:\n                        maidenHP.put(Integer.parseInt(subData[5]), Integer.parseInt(subData[4]));\n                        break;\n                    case ADD_NPC_MAPPING:\n                        maidenNPCMapping.put(Integer.parseInt(subData[4]), subData[5]);\n                        break;\n                }\n            }\n            catch(Exception ignored)\n            {\n            }\n            activeIndex++;\n        }\n        globalData \u003d new ArrayList\u003c\u003e(globalData.subList(activeIndex + 1, globalData.size()));\n        return true;\n    }\n\n    private boolean parseBloat()\n    {\n        int activeIndex \u003d 0;\n        loop:\n        for (String s : globalData)\n        {\n            String[] subData \u003d s.split(\",\", -1);\n            try\n            {\n                switch (LogID.valueOf(Integer.parseInt(subData[3])))\n                {\n                    case LEFT_TOB:\n                        globalData \u003d new ArrayList\u003c\u003e(globalData.subList(activeIndex + 1, globalData.size()));\n                        return false;\n                    case BLOAT_DESPAWN:\n                        break loop;\n                    case PLAYER_ATTACK:\n                        bloatAttacks.add(getPlayerDidAttack(subData));\n                        break;\n                    case UPDATE_HP:\n                        bloatHP.put(Integer.parseInt(subData[5]), Integer.parseInt(subData[4]));\n                        break;\n                }\n            }\n            catch(Exception ignored)\n            {\n            }\n            activeIndex++;\n        }\n        globalData \u003d new ArrayList\u003c\u003e(globalData.subList(activeIndex + 1, globalData.size()));\n        return true;\n    }\n\n    private boolean parseNylo()\n    {\n        int activeIndex \u003d 0;\n        loop:\n        for (String s : globalData)\n        {\n            String[] subData \u003d s.split(\",\", -1);\n            try\n            {\n                switch (LogID.valueOf(Integer.parseInt(subData[3])))\n                {\n                    case LEFT_TOB:\n                        globalData \u003d new ArrayList\u003c\u003e(globalData.subList(activeIndex + 1, globalData.size()));\n                        return false;\n                    case NYLO_DESPAWNED:\n                        break loop;\n                    case PLAYER_ATTACK:\n                        nyloAttacks.add(getPlayerDidAttack(subData));\n                        break;\n                    case UPDATE_HP:\n                        nyloHP.put(Integer.parseInt(subData[5]), Integer.parseInt(subData[4]));\n                        break;\n                    case ADD_NPC_MAPPING:\n                        nyloNPCMapping.put(Integer.parseInt(subData[4]), subData[5]);\n                        break;\n                }\n            }\n            catch(Exception ignored)\n            {\n            }\n            activeIndex++;\n        }\n        globalData \u003d new ArrayList\u003c\u003e(globalData.subList(activeIndex + 1, globalData.size()));\n        return true;\n    }\n\n    private boolean parseSotetseg()\n    {\n        int activeIndex \u003d 0;\n        loop:\n        for (String s : globalData)\n        {\n            String[] subData \u003d s.split(\",\", -1);\n            try\n            {\n                switch (LogID.valueOf(Integer.parseInt(subData[3])))\n                {\n                    case LEFT_TOB:\n                        globalData \u003d new ArrayList\u003c\u003e(globalData.subList(activeIndex + 1, globalData.size()));\n                        return false;\n                    case SOTETSEG_ENDED:\n                        break loop;\n                    case PLAYER_ATTACK:\n                        soteAttacks.add(getPlayerDidAttack(subData));\n                        break;\n                    case UPDATE_HP:\n                        soteHP.put(Integer.parseInt(subData[5]), Integer.parseInt(subData[4]));\n                        break;\n\n                }\n            }\n            catch(Exception ignored)\n            {\n            }\n            activeIndex++;\n        }\n        globalData \u003d new ArrayList\u003c\u003e(globalData.subList(activeIndex + 1, globalData.size()));\n        return true;\n    }\n\n    private boolean parseXarpus()\n    {\n        int activeIndex \u003d 0;\n        loop:\n        for (String s : globalData)\n        {\n            String[] subData \u003d s.split(\",\", -1);\n            try\n            {\n                switch (LogID.valueOf(Integer.parseInt(subData[3])))\n                {\n                    case LEFT_TOB:\n                        globalData \u003d new ArrayList\u003c\u003e(globalData.subList(activeIndex + 1, globalData.size()));\n                        return false;\n                    case XARPUS_DESPAWNED:\n                        break loop;\n                    case PLAYER_ATTACK:\n                        xarpAttacks.add(getPlayerDidAttack(subData));\n                        break;\n                    case UPDATE_HP:\n                        xarpHP.put(Integer.parseInt(subData[5]), Integer.parseInt(subData[4]));\n                        break;\n                }\n            }\n            catch(Exception ignored)\n            {\n            }\n            activeIndex++;\n        }\n        globalData \u003d new ArrayList\u003c\u003e(globalData.subList(activeIndex + 1, globalData.size()));\n        return true;\n    }\n\n    private void parseVerzik()\n    {\n        int activeIndex \u003d 0;\n        for (String s : globalData)\n        {\n            String[] subData \u003d s.split(\",\", -1);\n            try\n            {\n                switch (LogID.valueOf(Integer.parseInt(subData[3])))\n                {\n                    case LEFT_TOB:\n                        globalData \u003d new ArrayList\u003c\u003e(globalData.subList(activeIndex + 1, globalData.size()));\n                        return;\n                    case PLAYER_ATTACK:\n                        verzikAttacks.add(getPlayerDidAttack(subData));\n                        break;\n                    case UPDATE_HP:\n                        verzikHP.put(Integer.parseInt(subData[5]), Integer.parseInt(subData[4]));\n                        break;\n                    case ADD_NPC_MAPPING:\n                        verzikNPCMapping.put(Integer.parseInt(subData[4]), subData[5]);\n                        break;\n                    case VERZIK_BOUNCE:\n                        if (!subData[5].equalsIgnoreCase(\"\"))\n                        { //use fake animation ID when bounce occurs\n                            verzikAttacks.add(new PlayerDidAttack(itemManager, subData[4], \"100000\", Integer.parseInt(subData[5]), \"-1\", \"-1\", \"-1\", -1, -1, \"\", \"\"));\n                        }\n                        break;\n\n                }\n            } catch (Exception ignored)\n            {\n            }\n            activeIndex++;\n        }\n        globalData \u003d new ArrayList\u003c\u003e(globalData.subList(activeIndex + 1, globalData.size()));\n    }\n\n    public boolean checkExit()\n    {\n        return !(globalData.isEmpty() || globalData.get(0).split(\",\", -1)[3].equals(EXIT_FLAG));\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\AdvancedTOBData.java"},{"fileName":"LogID.java","content":"package com.advancedraidtracker.constants;\n\nimport lombok.Getter;\n\nimport java.util.Arrays;\nimport java.util.Optional;\n\nimport static com.advancedraidtracker.constants.TOBRoom.*;\n\n/**\n * Convenience class for the possible keys used to log events. The parameters each of these events should include can be found in\n * RoomData.\n */\n@Getter\npublic enum LogID\n{\n    ENTERED_TOB(0, true, ANY, \"Entered TOB\"),\n    PARTY_MEMBERS(1, true, ANY, \"Party Members\"),\n    DWH(2, true, ANY,\"DWH Hit\"),\n    BGS(3, true, ANY,\"BGS Hit\"),\n    LEFT_TOB(4, true, ANY,\"Left TOB\"),\n    PLAYER_DIED(5, true, ANY,\"Played Died\"),\n    ENTERED_NEW_TOB_REGION(6, true, ANY,\"Entered New TOB Region\"),\n    HAMMER_ATTEMPTED(7, true, ANY,\"DWH Attempted\"),\n    DAWN_DROPPED(800, false, VERZIK,\"Dawnbringer appeared\"),\n    WEBS_STARTED(901, false, VERZIK,\"Webs Thrown\"),\n    PLAYER_ATTACK(801, false, ANY,\"Player Animation\"),\n    BLOOD_THROWN(9, true, MAIDEN,\"Maiden blood thrown\"),\n    BLOOD_SPAWNED(10, true, MAIDEN, \"Blood Spawned\"),\n    CRAB_LEAK(11, true, MAIDEN, \"Crab Leaked\"),\n    MAIDEN_SPAWNED(12, true, MAIDEN, \"Spawned\"),\n    MAIDEN_70S(13, true, MAIDEN, \"70s\"),\n    MAIDEN_50S(14, true, MAIDEN, \"50s\"),\n    MAIDEN_30S(15, true, MAIDEN, \"30s\"),\n    MAIDEN_0HP(16, true, MAIDEN, \"0 HP\"),\n    MAIDEN_DESPAWNED(17, true, MAIDEN, \"Despawned\"),\n    MATOMENOS_SPAWNED(18, true, MAIDEN, \"Crab Spawned\"),\n    MAIDEN_SCUFFED(19, true, MAIDEN, \"Scuffed\"),\n    BLOAT_SPAWNED(20, true, BLOAT, \"Spawned\"),\n    BLOAT_DOWN(21, true, BLOAT, \"Down\"),\n    BLOAT_0HP(22, true, BLOAT, \"0 HP\"),\n    BLOAT_DESPAWN(23, true, BLOAT, \"Despawned\"),\n    BLOAT_HP_1ST_DOWN(24, true, BLOAT, \"HP at First Down\"),\n    BLOAT_SCYTHE_1ST_WALK(25, true, BLOAT, \"First Walk Scythes\"),\n\n    NYLO_PILLAR_SPAWN(30, true, NYLOCAS, \"Pillar Spawn\"),\n    NYLO_STALL(31, true, NYLOCAS, \"Stall\"),\n    RANGE_SPLIT(32, true, NYLOCAS, \"Range Split\"),\n    MAGE_SPLIT(33, true, NYLOCAS, \"Mage Split\"),\n    MELEE_SPLIT(34, true, NYLOCAS, \"Melee Split\"),\n    LAST_WAVE(35, true, NYLOCAS, \"Last Wave\"),\n    LAST_DEAD(36, true, NYLOCAS, \"Last Dead\"),\n    NYLO_WAVE(37, true, NYLOCAS, \"Wave\"),\n    BOSS_SPAWN(40, true, NYLOCAS, \"Boss Spawn\"),\n    MELEE_PHASE(41, true, NYLOCAS, \"Melee Phase\"),\n    MAGE_PHASE(42, true, NYLOCAS, \"Mage Phase\"),\n    RANGE_PHASE(43, true, NYLOCAS, \"Range Phase\"),\n    NYLO_0HP(44, true, NYLOCAS, \"0 HP\"),\n    NYLO_DESPAWNED(45, true, NYLOCAS, \"Despawn\"),\n    NYLO_PILLAR_DESPAWNED(46, true, NYLOCAS, \"Pillar Despawn\"), //tick\n    SOTETSEG_STARTED(51, true, SOTETSEG, \"Started\"),\n    SOTETSEG_FIRST_MAZE_STARTED(52, true, SOTETSEG, \"First Maze Start\"),\n    SOTETSEG_FIRST_MAZE_ENDED(53, true, SOTETSEG, \"First Maze End\"),\n    SOTETSEG_SECOND_MAZE_STARTED(54, true, SOTETSEG, \"Second Maze Start\"),\n    SOTETSEG_SECOND_MAZE_ENDED(55, true, SOTETSEG, \"Second Maze End\"),\n    SOTETSEG_ENDED(57, true, SOTETSEG, \"Room End\"),\n    XARPUS_SPAWNED(60, true, XARPUS, \"Spawned\"),\n    XARPUS_STARTED(61, true, XARPUS, \"Started\"),\n    XARPUS_HEAL(62, true, XARPUS, \"Heal\"),\n    XARPUS_SCREECH(63, true, XARPUS, \"Screech\"),\n    XARPUS_0HP(64, true, XARPUS, \"0 HP\"),\n    XARPUS_DESPAWNED(65, true, XARPUS, \"Despawned\"),\n    VERZIK_SPAWNED(70, true, VERZIK, \"Spawned\"),\n    VERZIK_P1_START(71, true, VERZIK, \"P1 Start\"),\n    VERZIK_P1_0HP(72, true, VERZIK, \"P1 0 HP\"),\n    VERZIK_P1_DESPAWNED(73, true, VERZIK, \"P1 Despawned\"),\n    VERZIK_P2_END(74, true, VERZIK, \"P2 End\"),\n    VERZIK_P3_0HP(75, true, VERZIK, \"P2 0 HP\"),\n    VERZIK_P3_DESPAWNED(76, true, VERZIK, \"P3 Despawned\"),\n    VERZIK_BOUNCE(77, true, VERZIK, \"Bounce\"),\n    VERZIK_CRAB_SPAWNED(78, true, VERZIK, \"Crab Spawned\"),\n    VERZIK_P2_REDS_PROC(80, true, VERZIK, \"Reds Proc\"),\n\n    LATE_START(98, true, ANY, \"Joined Raid After Start\"),\n    SPECTATE(99, true, ANY, \"Is Spectating\"),\n    NOT_118(998, true, ANY, \"Not 118\"),\n    NO_PIETY(999, true, ANY, \"No Piety\"),\n    RANDOM_TRACKER(1000, true, ANY, \"Random Tracker\"),\n    RANDOM_TRACKER_2(1001, true, ANY, \"Random Tracker2\"),\n    BLOAT_HAND(975, false, BLOAT, \"Bloat Hand\"),\n    BLOAT_DIRECTION(976, false, BLOAT, \"Bloat Direction\"),\n\n    PARTY_COMPLETE(100, true, ANY, \"Party Is Complete\"),\n    PARTY_INCOMPLETE(101, true, ANY, \"Party Is Not Complete\"),\n    PARTY_ACCURATE_PREMAIDEN(102, true, ANY, \"Party Is Complete Prior To Maiden\"),\n\n    MAIDEN_DINHS_SPEC(111, true, MAIDEN, \"Dinhs Spec\"), //Player, tick, primary target:primary target hp, targets~hp:,stats:stats\n    MAIDEN_DINHS_TARGET(112, true, MAIDEN, \"Dinhs Target\"), //\n\n    MAIDEN_CHIN_THROWN(113, true, MAIDEN, \"Chin Thrown\"), //player, distance\n\n    ACCURATE_MAIDEN_START(201, true, MAIDEN, \"Accurate Maiden Start\"),\n    ACCURATE_BLOAT_START(202, true, BLOAT, \"Accurate Bloat Start\"),\n    ACCURATE_NYLO_START(203, true, NYLOCAS, \"Accurate Nylo Start\"),\n    ACCURATE_SOTE_START(204, true, SOTETSEG, \"Accurate Sote Start\"),\n    ACCURATE_XARP_START(205, true, XARPUS, \"Accurate Xarpus Start\"),\n    ACCURATE_VERZIK_START(206, true, VERZIK, \"Accurate Verzik Start\"),\n\n    ACCURATE_MAIDEN_END(301, true, MAIDEN, \"Accurate Maiden End\"),\n    ACCURATE_BLOAT_END(302, true, BLOAT, \"Accurate Bloat End\"),\n    ACCURATE_NYLO_END(303, true, NYLOCAS, \"Accurate Nylo End\"),\n    ACCURATE_SOTE_END(304, true, SOTETSEG, \"Accurate Sote End\"),\n    ACCURATE_XARP_END(305, true, XARPUS, \"Accurate Xarpus End\"),\n    ACCURATE_VERZIK_END(306, true, VERZIK, \"Accurate Verzik End\"),\n    IS_HARD_MODE(401, true, ANY, \"Is Hard Mode\"),\n    IS_STORY_MODE(402, true, ANY, \"Is Story Mode\"),\n\n    THRALL_ATTACKED(403, false, ANY, \"Thrall Attacked\"), // player, type\n\n    THRALL_DAMAGED(404, false, ANY, \"Thrall Damaged\"), // player, damage\n\n    VENG_WAS_CAST(405, false, ANY, \"Veng Cast\"), //target, source\n\n    VENG_WAS_PROCCED(406, false, ANY, \"Veng Procced\"), //player, source of veng, damage\n\n    PLAYER_STOOD_IN_THROWN_BLOOD(411, true, MAIDEN, \"Player Stood In Thrown Blood\"), //player, damage, blood tick\n    PLAYER_STOOD_IN_SPAWNED_BLOOD(412, true, MAIDEN, \"Player Stood In Spawned Blood\"),  //player, damage\n    CRAB_HEALED_MAIDEN(413, true, MAIDEN, \"Crab Healed Maiden\"), //damage\n    VERZIK_PURPLE_HEAL(701, true, VERZIK, \"Purple Heal\"),\n    VERZIK_RED_AUTO(702, true, VERZIK, \"Red Auto\"),\n    VERZIK_THRALL_HEAL(703, true, VERZIK, \"Thrall Heal\"),\n    VERZIK_PLAYER_HEAL(704, true, VERZIK, \"Player Heal\"),\n\n    KODAI_BOP(501, true, ANY, \"Kodai Bop\"),\n    DWH_BOP(502, true, ANY, \"DWH Bop\"),\n    BGS_WHACK(503, true, ANY, \"BGS Whack\"),\n    CHALLY_POKE(504, true, ANY, \"Chally Poke\"),\n    THRALL_SPAWN(410, false, ANY, \"Thrall Spawn\"),\n    THRALL_DESPAWN(498, false, ANY, \"Thrall Despawn\"),\n    DAWN_SPEC(487, false, VERZIK, \"Dawn Spec\"),\n    DAWN_DAMAGE(488, false, VERZIK, \"Dawn Damage\"),\n    MAIDEN_PLAYER_DRAINED(530, true, MAIDEN, \"Player Drained\"),\n    MAIDEN_AUTO(531, true, MAIDEN, \"Maiden Auto\"),\n\n    UPDATE_HP(576, false, ANY, \"Update Boss HP\"),\n    ADD_NPC_MAPPING(587, false, ANY, \"Update NPC Mappings\"),\n    UNKNOWN(-1, false, ANY, \"Unknown\");\n\n    final int id;\n    final String commonName;\n    final TOBRoom room;\n    final boolean simple;\n\n    LogID(int id, boolean simple, TOBRoom room, String commonName)\n    {\n        this.id \u003d id;\n        this.commonName \u003d commonName;\n        this.room \u003d room;\n        this.simple \u003d simple;\n    }\n    public static LogID valueOf(int value)\n    {\n        Optional\u003cLogID\u003e o \u003d Arrays.stream(values()).filter(logid -\u003e logid.getId() \u003d\u003d value).findFirst();\n        return o.orElse(UNKNOWN);\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\constants\\LogID.java"},{"fileName":"TobIDs.java","content":"package com.advancedraidtracker.constants;\n\npublic class TobIDs\n{\n    public static final int ROOM_ACTIVE_VARBIT \u003d 6447;\n\n    public static final int HP_VARBIT \u003d 6448;\n    public static final int SCYTHE_ANIMATION \u003d 8056;\n    public final static int CHINCHOMPA_THROWN_ANIMATION \u003d 7618;\n\n    public final static int DINHS_BULWARK_ANIMATION \u003d 7511;\n\n    public final static int BLOOD_ON_GROUND \u003d 32984;\n\n    public final static int VERZIK_CRAB_HEAL_PROJECTILE \u003d 1587;\n    public final static int VERZIK_RED_MAGE_AUTO_PROJECTILE \u003d 1591;\n    public final static int VERZIK_WEB_PROJECTILE \u003d 1601;\n    public final static int VERZIK_DEATH_ANIMATION_LENGTH \u003d 6;\n\n    public final static int VERZIK_SHIELD_LENGTH \u003d 11;\n    public final static int DAWNBRINGER_ITEM \u003d 22516;\n    public final static String VERZIK_BOUNCE_ANIMATION \u003d \"100000\"; //fake number used due to poor design of how attacks are presented on the chart\n\n    public final static int DAWNBRINGER_MINIMUM_HIT \u003d 75;\n\n    public final static int XARPUS_DEATH_ANIMATION_LENGTH \u003d 3;\n\n    public final static int SOTETSEG_DEATH_ANIMATION_LENGTH \u003d 3;\n    public final static int MAIDEN_DEATH_ANIMATION_LENGTH \u003d 7;\n\n    public static final int FULL_HP \u003d 1000;\n    public final static int LOBBY_REGION \u003d 14642;\n    public final static int MAIDEN_REGION \u003d 12613;\n    public final static int  BLOAT_REGION \u003d 13125;\n    public final static int  NYLO_REGION \u003d 13122;\n    public final static int  SOTETSEG_REGION \u003d 13123;\n    public final static int  SOTETSEG_UNDER_REGION \u003d 13379;\n    public final static int  XARPUS_REGION \u003d 12612;\n    public final static int  VERZIK_REGION \u003d 12611;\n    public final static int MAIDEN_THROWN_BLOOD_GRAPHIC_OBJECT \u003d 1579;\n    public final static int MAIDEN_BLOOD_THROW_ANIM \u003d 8091;\n    public final static int TBOW_PROJECTILE \u003d 1120;\n    public final static int ZCB_PROJECTILE \u003d 1468;\n    public final static int ZCB_SPEC_PROJECTILE \u003d 1995;\n    public final static int VENG_CAST \u003d 8316;\n    public final static int VENG_OTHER_CAST \u003d 4411;\n    public final static int VENG_GRAPHIC \u003d 726;\n    public final static int VENG_OTHER_GRAPHIC \u003d 725;\n\n    public final static int DWH_SPEC \u003d 1378;\n    //veng other 725\n\n    public final static int MELEE_THRALL \u003d 10886;\n    public final static int RANGE_THRALL \u003d 10883;\n    public final static int MAGE_THRALL \u003d 10880;\n    public static final String EXIT_FLAG \u003d \"4\";\n    public static final int SPECTATE_FLAG \u003d 98;\n\n\n\n    public final static int MELEE_THRALL_ATTACK_ANIMATION \u003d 5568;\n    public final static int THRALL_CAST_ANIMATION \u003d 8973;\n    public final static int THRALL_CAST_GRAPHIC_MAGE \u003d 1873;\n    public final static int THRALL_CAST_GRAPHIC_RANGE \u003d 1874;\n    public final static int THRALL_CAST_GRAPHIC_MELEE \u003d 1875;\n\n    public final static int THRALL_PROJECTILE_RANGE \u003d 1906;\n    public final static int THRALL_PROJECTILE_MAGE \u003d 1907;\n\n    public final static int MAIDEN_P0 \u003d 8360; // 8362 30-50 //8363 30-end //8360 start\n    public final static int MAIDEN_P0_HM \u003d 10822;\n    public final static int MAIDEN_P0_SM \u003d 10814;\n    public final static int MAIDEN_P1 \u003d 8361;\n    public final static int MAIDEN_P1_HM \u003d 10823;\n    public final static int MAIDEN_P1_SM \u003d 10815;\n    public final static int MAIDEN_P2 \u003d 8362;\n    public final static int MAIDEN_P2_HM \u003d 10824;\n    public final static int MAIDEN_P2_SM \u003d 10816;\n    public final static int MAIDEN_P3 \u003d 8363;\n    public final static int MAIDEN_P3_HM \u003d 10825;\n    public final static int MAIDEN_P3_SM \u003d 10817;\n\n    public final static int MAIDEN_PRE_DEAD \u003d 8364;\n    public final static int MAIDEN_PRE_DEAD_HM \u003d 10826;\n    public final static int MAIDEN_PRE_DEAD_SM \u003d 10818;\n    public final static int MAIDEN_DEAD \u003d 8365;\n    public final static int MAIDEN_DEAD_HM \u003d 10827;\n    public final static int MAIDEN_DEAD_SM \u003d 10819;\n    public final static int MAIDEN_MATOMENOS \u003d 8366;\n    public final static int MAIDEN_MATOMENOS_HM \u003d 10828;\n    public final static int MAIDEN_MATOMENOS_SM \u003d 10820;\n\n    public final static int MAIDEN_BLOOD \u003d 8367;\n    public final static int MAIDEN_BLOOD_HM \u003d 10829;\n    public final static int MAIDEN_BLOOD_SM \u003d 10821;\n\n    public final static int MAIDEN_DEATH_ANIMATION \u003d 8093;\n    public final static int BLOAT \u003d 8359;\n    public final static int BLOAT_HM \u003d 10813;\n    public final static int BLOAT_SM \u003d 10812;\n    public final static int BLOAT_DEATH_ANIMATION_LENGTH \u003d 3;\n\n    public final static int BLOAT_DOWN_ANIMATION \u003d 8082;\n    public final static int BLOAT_DEATH_ANIMATION \u003d 8085;\n\n    public final static int POWERED_STAFF_ANIMATION \u003d 1167;\n    public final static int DAWNBRINGER_AUTO_PROJECTILE \u003d 1544;\n    public final static int DAWNBRINGER_SPEC_PROJECTILE \u003d 1547;\n    public final static int NYLO_PILLAR \u003d 8358;\n    public final static int NYLO_PILLAR_HM \u003d 10811;\n    public final static int NYLO_PILLAR_SM \u003d 10790;\n    public final static int NYLO_MELEE_SMALL \u003d 8342;\n    public final static int NYLO_MELEE_SMALL_HM \u003d 10791;\n    public final static int NYLO_MELEE_SMALL_SM \u003d 10774;\n    public final static int UNCHARGED_SCYTHE \u003d 22486;\n    public final static int UNCHARGED_BLOOD_SCYTHE \u003d 25738;\n    public final static int UNCHARGED_HOLY_SCYTHE \u003d 25741;\n\n    public final static int SOTETSEG_RAGGED_TILE \u003d 505;\n    public final static int SOTETSEG_RED_TILE \u003d 33035;\n    public final static int MAIDEN_AUTO_ANIMATION \u003d 8092;\n    public final static int DRAGON_WARHAMMER \u003d 13576;\n    public final static int DRAGON_WARHAMMER_ALTERNATE \u003d 20785;\n    public final static int BOP_ANIMATION \u003d 401;\n    public final static int WHACK_ANIMATION \u003d 414;\n    public final static int KODAI_WAND \u003d 21006;\n    public final static int KODAI_WAND_ALTERNATE \u003d 23626;\n    public final static int STAB_ANIMATION \u003d 440;\n    public final static int CHALLY \u003d 23987;\n    public final static int TWO_HAND_SWORD_SWING \u003d 7045;\n    public final static int BANDOS_GODSWORD \u003d 11804;\n    public final static int BANDOS_GODSWORD_OR \u003d 20370;\n    public final static int CROSSBOW_ANIMATION \u003d 9168;\n    public final static int BLOWPIPE_ANIMATION \u003d 5061;\n    public final static int BLOWPIPE_ANIMATION_OR \u003d 10656;\n\n    public final static int NYLO_MELEE_SMALL_AGRO \u003d 8348;\n    public final static int NYLO_MELEE_SMALL_AGRO_HM \u003d 10797;\n    public final static int NYLO_MELEE_SMALL_AGRO_SM \u003d 10780;\n\n    public final static int NYLO_RANGE_SMALL \u003d 8343;\n    public final static int NYLO_RANGE_SMALL_HM \u003d 10792;\n    public final static int NYLO_RANGE_SMALL_SM \u003d 10775;\n\n    public final static int NYLO_RANGE_SMALL_AGRO \u003d 8349;\n    public final static int NYLO_RANGE_SMALL_AGRO_HM \u003d 10798;\n    public final static int NYLO_RANGE_SMALL_AGRO_SM \u003d 10781;\n\n    public final static int NYLO_MAGE_SMALL \u003d 8344;\n    public final static int NYLO_MAGE_SMALL_HM \u003d 10793;\n    public final static int NYLO_MAGE_SMALL_SM \u003d 10776;\n\n    public final static int NYLO_MAGE_SMALL_AGRO \u003d 8350;\n    public final static int NYLO_MAGE_SMALL_AGRO_HM \u003d 10799;\n    public final static int NYLO_MAGE_SMALL_AGRO_SM \u003d 10782;\n\n    public final static int NYLO_MELEE_BIG \u003d 8345;\n    public final static int NYLO_MELEE_BIG_HM \u003d 10794;\n    public final static int NYLO_MELEE_BIG_SM \u003d 10777;\n\n    public final static int NYLO_MELEE_BIG_AGRO \u003d 8351;\n    public final static int NYLO_MELEE_BIG_AGRO_HM \u003d 10800;\n    public final static int NYLO_MELEE_BIG_AGRO_SM \u003d 10783;\n\n    public final static int NYLO_RANGE_BIG \u003d 8346;\n    public final static int NYLO_RANGE_BIG_HM \u003d 10795;\n    public final static int NYLO_RANGE_BIG_SM \u003d 10778;\n\n    public final static int NYLO_RANGE_BIG_AGRO \u003d 8352;\n    public final static int NYLO_RANGE_BIG_AGRO_HM \u003d 10801;\n    public final static int NYLO_RANGE_BIG_AGRO_SM \u003d 10784;\n\n    public final static int NYLO_MAGE_BIG \u003d 8347;\n    public final static int NYLO_MAGE_BIG_HM \u003d 10796;\n    public final static int NYLO_MAGE_BIG_SM \u003d 10779;\n\n    public final static int NYLO_MAGE_BIG_AGRO \u003d 8353;\n    public final static int NYLO_MAGE_BIG_AGRO_HM \u003d 10802;\n    public final static int NYLO_MAGE_BIG_AGRO_SM \u003d 10785;\n\n    public final static int NYLO_BOSS_DROPPING \u003d 8354;\n    public final static int NYLO_BOSS_DROPPING_HM \u003d 10807;\n    public final static int NYLO_BOSS_DROPING_SM \u003d 10786;\n\n    public final static int NYLO_BOSS_MELEE \u003d 8355;\n    public final static int NYLO_BOSS_MELEE_HM \u003d 10808;\n    public final static int NYLO_BOSS_MELEE_SM \u003d 10787;\n\n    public final static int NYLO_BOSS_MAGE \u003d 8356;\n    public final static int NYLO_BOSS_MAGE_HM \u003d 10809;\n    public final static int NYLO_BOSS_MAGE_SM \u003d 10788;\n\n    public final static int NYLO_BOSS_RANGE \u003d 8357;\n    public final static int NYLO_BOSS_RANGE_HM \u003d 10810;\n    public final static int NYLO_BOSS_RANGE_SM \u003d 10789;\n\n    public final static int NYLO_PRINKIPAS_DROPPING \u003d 10803;\n    public final static int NYLO_PRINKIPAS_MELEE \u003d 10804;\n    public final static int NYLO_PRINKIPAS_MAGIC \u003d 10805;\n    public final static int NYLO_PRINKIPAS_RANGE \u003d 10806;\n\n    public final static int SOTETSEG_OVERWORLD \u003d 13123;\n    public final static int SOTETSEG_UNDERWORLD \u003d 13379;\n    public final static int SOTETSEG_DEATH_ANIMATION \u003d 8140;\n\n    public final static int SOTETSEG_ACTIVE \u003d 8388;\n    public final static int SOTETSEG_ACTIVE_HM \u003d 10868;\n    public final static int SOTETSEG_ACTIVE_SM \u003d 10865;\n\n    public final static int SOTETSEG_INACTIVE \u003d 8387;\n    public final static int SOTETSEG_INACTIVE_HM \u003d 10867;\n    public final static int SOTETSEG_INACTIVE_SM \u003d 10864;\n\n    public final static int XARPUS_AWAKENS \u003d 8061;\n    public final static int XARPUS_DEATH_ANIMATION \u003d 8063;\n    public final static int XARPUS_EXHUMED_PROJECTILE \u003d 1550;\n\n    public final static int XARPUS_INACTIVE \u003d 8338;\n    public final static int XARPUS_INACTIVE_HM \u003d 10770;\n    public final static int XARPUS_INACTIVE_SM \u003d 10766;\n\n    public final static int XARPUS_P1 \u003d 8339;\n    public final static int XARPUS_P1_HM \u003d 10771;\n    public final static int XARPUS_P1_SM \u003d 10767;\n\n    public final static int XARPUS_P23 \u003d 8340;\n    public final static int XARPUS_P23_HM \u003d 10772;\n    public final static int XARPUS_P23_SM \u003d 10768;\n\n    public final static int XARPUS_DEAD \u003d 8341;\n    public final static int XARPUS_DEAD_HM \u003d 10773;\n    public final static int XARPUS_DEAD_SM \u003d 10769;\n\n    public final static int VERZIK_MATOMENOS \u003d 8385;\n    public final static int VERZIK_MATOMENOS_HM \u003d 10862;\n    public final static int VERZIK_MATOMENOS_SM \u003d 10845;\n\n    public final static int VERZIK_MELEE_NYLO \u003d 8381;\n    public final static int VERZIK_MELEE_NYLO_HM \u003d 10858;\n    public final static int VERZIK_MELEE_NYLO_SM \u003d 10841;\n\n    public final static int VERZIK_RANGE_NYLO \u003d 8382;\n    public final static int VERZIK_RANGE_NYLO_HM \u003d 10859;\n    public final static int VERZIK_RANGE_NYLO_SM \u003d 10842;\n\n    public final static int VERZIK_MAGE_NYLO \u003d 8383;\n    public final static int VERZIK_MAGE_NYLO_HM \u003d 10860;\n    public final static int VERZIK_MAGE_NYLO_SM \u003d 10843;\n\n    public final static int VERZIK_BOUNCE_SPOT_ANIMATION \u003d 245;\n    public final static int VERZIK_BECOMES_SPIDER \u003d 8128;\n\n    public final static int VERZIK_P1_INACTIVE \u003d 8369;\n    public final static int VERZIK_P1_INACTIVE_HM \u003d 10847;\n    public final static int VERZIK_P1_INACTIVE_SM \u003d 10830;\n\n    public final static int VERZIK_P1 \u003d 8370;\n    public final static int VERZIK_P1_HM \u003d 10848;\n    public final static int VERZIK_P1_SM \u003d 10831;\n\n    public final static int VERZIK_P2_INACTIVE \u003d 8371;\n    public final static int VERZIK_P2_INACTIVE_HM \u003d 10849;\n    public final static int VERZIK_P2_INACTIVE_SM \u003d 10832;\n\n    public final static int VERZIK_P2 \u003d 8372;\n    public final static int VERZIK_P2_HM \u003d 10850;\n    public final static int VERZIK_P2_SM \u003d 10833;\n\n    public final static int VERZIK_P3_INACTIVE \u003d 8373;\n    public final static int VERZIK_P3_INACTIVE_HM \u003d 10851;\n    public final static int VERZIK_P3_INACTIVE_SM \u003d 10834;\n\n    public final static int VERZIK_P3 \u003d 8374;\n    public final static int VERZIK_P3_HM \u003d 10852;\n    public final static int VERZIK_P3_SM \u003d 10835;\n    public final static int VERZIK_DEAD \u003d 8375;\n    public final static int VERZIK_DEAD_HM \u003d 10853;\n    public final static int VERZIK_DEAD_SM \u003d 10836;\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\constants\\TobIDs.java"},{"fileName":"TOBRoom.java","content":"package com.advancedraidtracker.constants;\n\nimport java.util.Arrays;\nimport java.util.Optional;\n\npublic enum TOBRoom\n{\n    MAIDEN(0), BLOAT(1), NYLOCAS(2), SOTETSEG(3), XARPUS(4), VERZIK(5), UNKNOWN(-1), ANY(6);\n\n    public final int value;\n    TOBRoom(int value)\n    {\n        this.value \u003d value;\n    }\n\n    public static TOBRoom valueOf(int number)\n    {\n        Optional\u003cTOBRoom\u003e o \u003d Arrays.stream(values()).filter(room -\u003e room.value \u003d\u003d number).findFirst();\n        return o.orElse(UNKNOWN);\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\constants\\TOBRoom.java"},{"fileName":"Filter.java","content":"package com.advancedraidtracker.filters;\n\nimport lombok.Getter;\n\n@Getter\npublic class Filter\n{\n    private final String name;\n    private final String[] filters;\n\n    public Filter(String name, String[] filters)\n    {\n        this.filters \u003d filters;\n        this.name \u003d name;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\filters\\Filter.java"},{"fileName":"FilterCondition.java","content":"package com.advancedraidtracker.filters;\n\nimport com.advancedraidtracker.SimpleTOBData;\n\npublic abstract class FilterCondition\n{\n    public abstract boolean evaluate(SimpleTOBData data);\n\n    public abstract String getFilterCSV();\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\filters\\FilterCondition.java"},{"fileName":"FilterDate.java","content":"package com.advancedraidtracker.filters;\n\nimport com.advancedraidtracker.SimpleTOBData;\n\nimport java.util.Calendar;\nimport java.util.Date;\n\npublic class FilterDate extends FilterCondition\n{\n    private final Date date;\n    private final int qualifier;\n    private final String stringValue;\n\n    public FilterDate(Date date, int qualifier, String val)\n    {\n        this.date \u003d date;\n        this.qualifier \u003d qualifier;\n        stringValue \u003d val;\n    }\n\n    @Override\n    public String toString()\n    {\n        return stringValue;\n    }\n\n    @Override\n    public boolean evaluate(SimpleTOBData data)\n    {\n        Calendar cal \u003d Calendar.getInstance();\n        Calendar cal2 \u003d Calendar.getInstance();\n        cal.setTime(data.raidStarted);\n        cal2.setTime(date);\n        switch (qualifier)\n        {\n            case 0:\n                return (cal.get(Calendar.MONTH) \u003d\u003d cal2.get(Calendar.MONTH) \u0026\u0026\n                        cal.get(Calendar.DAY_OF_MONTH) \u003d\u003d cal2.get(Calendar.DAY_OF_MONTH) \u0026\u0026\n                        cal.get(Calendar.YEAR) \u003d\u003d cal2.get(Calendar.YEAR));\n            case 1:\n                return data.raidStarted.before(date);\n            case 2:\n                return data.raidStarted.after(date);\n            default:\n                throw new IllegalStateException(\"Unexpected value: \" + qualifier);\n        }\n    }\n\n    public String getFilterCSV()\n    {\n        return \"4-\" + date.getTime() + \"-\" + qualifier + \"-\" + stringValue;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\filters\\FilterDate.java"},{"fileName":"FilterManager.java","content":"package com.advancedraidtracker.filters;\n\nimport lombok.extern.slf4j.Slf4j;\n\nimport java.io.*;\nimport java.nio.file.Files;\nimport java.nio.file.Paths;\nimport java.util.ArrayList;\nimport java.util.Objects;\nimport java.util.Scanner;\n@Slf4j\npublic class FilterManager\n{\n    private static final String filterFolder \u003d System.getProperty(\"user.home\").replace(\"\\\\\", \"/\") + \"/.runelite/advancedraidtracker/misc-dir/filters/\";\n\n    public static ArrayList\u003cFilter\u003e getFilters()\n    {\n        ArrayList\u003cFilter\u003e currentFilters \u003d new ArrayList\u003c\u003e();\n        File folder \u003d new File(filterFolder);\n        try\n        {\n            for (File entry : Objects.requireNonNull(folder.listFiles()))\n            {\n                ArrayList\u003cString\u003e activeFileFilters \u003d new ArrayList\u003c\u003e();\n                if (entry.isFile())\n                {\n                    if (entry.getAbsolutePath().endsWith(\".filter\"))\n                    {\n                        try\n                        {\n                            Scanner filterReader \u003d new Scanner(Files.newInputStream(entry.toPath()));\n                            while (filterReader.hasNextLine())\n                            {\n                                activeFileFilters.add(filterReader.nextLine());\n                            }\n                            filterReader.close();\n                            if (!activeFileFilters.isEmpty())\n                            {\n                                currentFilters.add(new Filter(entry.getName(), activeFileFilters.toArray(new String[0])));\n                            }\n                        } catch (Exception e)\n                        {\n                            log.info(\"Failed to read filter filter\");\n                        }\n                    }\n                }\n            }\n        } catch (Exception e)\n        {\n            log.info(\"Failed retrieving filters\");\n        }\n        return currentFilters;\n    }\n\n    public static boolean doesFilterExist(String name)\n    {\n        File folder \u003d new File(filterFolder);\n        try\n        {\n            for (File entry : Objects.requireNonNull(folder.listFiles()))\n            {\n                if (entry.getName().equals(name + \".filter\"))\n                {\n                    return true;\n                }\n            }\n        } catch (Exception e)\n        {\n            log.info(\"Failed to find filter\");\n        }\n        return false;\n    }\n\n    public static void saveOverwriteFilter(String name, ArrayList\u003cImplicitFilter\u003e filters)\n    {\n        try\n        {\n            File directory \u003d new File(filterFolder);\n            if (!directory.exists())\n            {\n                if(!directory.mkdirs())\n                {\n                    log.info(\"Could not make directories to save filter\");\n                }\n            }\n            File filterFile \u003d new File(filterFolder + name + \".filter\");\n\n            if (filterFile.exists())\n            {\n                if(!filterFile.delete())\n                {\n                    log.info(\"Could not delete old filter\");\n                }\n            }\n            if(!filterFile.createNewFile())\n            {\n                log.info(\"Could not create new filter filter\");\n            }\n            BufferedWriter filterWriter \u003d new BufferedWriter(new OutputStreamWriter(Files.newOutputStream(Paths.get(filterFolder + name + \".filter\"))));\n            for (ImplicitFilter s : filters)\n            {\n                filterWriter.write(s.getFilterDescription());\n                filterWriter.newLine();\n            }\n            filterWriter.close();\n        } catch (Exception ignored)\n        {\n        }\n    }\n\n    public static void saveFilter(String name, ArrayList\u003cImplicitFilter\u003e filters)\n    {\n        try\n        {\n            File directory \u003d new File(filterFolder);\n            if (!directory.exists())\n            {\n                if(!directory.mkdirs())\n                {\n                    log.info(\"Could not make directory to save filter\");\n                }\n            }\n            File filterFile \u003d new File(filterFolder + name + \".filter\");\n            if (!filterFile.exists())\n            {\n                if(!filterFile.createNewFile())\n                {\n                    log.info(\"Could not create new filter file\");\n                }\n            }\n            BufferedWriter filterWriter \u003d new BufferedWriter(new OutputStreamWriter(Files.newOutputStream(Paths.get(filterFolder + name + \".filter\"))));\n            for (ImplicitFilter filter : filters)\n            {\n                filterWriter.write(filter.getFilterCSV());\n                filterWriter.newLine();\n            }\n            filterWriter.close();\n        } catch (Exception ignored)\n        {\n        }\n    }\n\n    public static void saveFilter(String name, ArrayList\u003cImplicitFilter\u003e filters, ArrayList\u003cString\u003e quickFiltersState)\n    {\n        try\n        {\n            File directory \u003d new File(filterFolder);\n            if (!directory.exists())\n            {\n                if(!directory.mkdirs())\n                {\n                    log.info(\"Could not make folder to save filters\");\n                }\n            }\n            File filterFile \u003d new File(filterFolder + name + \".filter\");\n            if (!filterFile.exists())\n            {\n                if(!filterFile.createNewFile())\n                {\n                    log.info(\"Could not create new filter file\");\n                }\n            }\n            BufferedWriter filterWriter \u003d new BufferedWriter(new OutputStreamWriter(Files.newOutputStream(Paths.get(filterFolder + name + \".filter\"))));\n            for (ImplicitFilter filter : filters)\n            {\n                filterWriter.write(filter.getFilterCSV());\n                filterWriter.newLine();\n            }\n            for(String s : quickFiltersState)\n            {\n                filterWriter.write(s);\n                filterWriter.newLine();\n            }\n            filterWriter.close();\n        } catch (Exception ignored)\n        {\n        }\n    }\n\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\filters\\FilterManager.java"},{"fileName":"FilterOtherBool.java","content":"package com.advancedraidtracker.filters;\n\nimport com.advancedraidtracker.SimpleTOBData;\n\npublic class FilterOtherBool extends FilterCondition\n{\n    boolean value;\n    int param;\n    String stringValue;\n\n    public FilterOtherBool(int param, boolean value, String val)\n    {\n        this.param \u003d param;\n        this.value \u003d value;\n        stringValue \u003d val;\n    }\n\n    @Override\n    public String toString()\n    {\n        return stringValue;\n    }\n\n    @Override\n    public boolean evaluate(SimpleTOBData data)\n    {\n        switch (param)\n        {\n            case 0:\n                return data.maidenSkip \u003d\u003d value;\n            case 1:\n                return data.maidenReset \u003d\u003d value;\n            case 2:\n                return data.maidenWipe \u003d\u003d value;\n            case 3:\n                return data.bloatReset \u003d\u003d value;\n            case 4:\n                return data.bloatWipe \u003d\u003d value;\n            case 5:\n                return data.nyloReset \u003d\u003d value;\n            case 6:\n                return data.nyloWipe \u003d\u003d value;\n            case 7:\n                return data.soteReset \u003d\u003d value;\n            case 8:\n                return data.soteWipe \u003d\u003d value;\n            case 9:\n                return data.xarpReset \u003d\u003d value;\n            case 10:\n                return data.xarpWipe \u003d\u003d value;\n            case 11:\n                return data.verzikWipe \u003d\u003d value;\n            case 12:\n                return data.maidenScuffed \u003d\u003d value;\n        }\n        return false;\n    }\n\n    public String getFilterCSV()\n    {\n        return \"3-\" + param + \"-\" + ((value) ? 1 : 0) + \"-\" + stringValue;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\filters\\FilterOtherBool.java"},{"fileName":"FilterOtherInt.java","content":"package com.advancedraidtracker.filters;\n\nimport com.advancedraidtracker.SimpleTOBData;\nimport com.advancedraidtracker.utility.datautility.DataPoint;\n\npublic class FilterOtherInt extends FilterCondition\n{\n    DataPoint param;\n    int qualifier;\n    int value;\n    public String stringValue;\n\n    public FilterOtherInt(DataPoint param, int qualifier, int value, String val)\n    {\n        this.param \u003d param;\n        this.qualifier \u003d qualifier;\n        this.value \u003d value;\n        stringValue \u003d val;\n    }\n\n    @Override\n    public String toString()\n    {\n        return stringValue;\n    }\n\n    @Override\n    public boolean evaluate(SimpleTOBData data)\n    {\n        int checkValue \u003d data.getValue(param);\n        if (data.getTimeAccurate(param) \u0026\u0026 value !\u003d -1)\n        {\n            return FilterUtil.compare(qualifier, value, checkValue);\n\n        } else\n        {\n            return false;\n        }\n    }\n\n    public String getFilterCSV()\n    {\n        return \"1-\" + param.name + \"-\" + qualifier + \"-\" + value + \"-\" + stringValue;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\filters\\FilterOtherInt.java"},{"fileName":"FilterPlayers.java","content":"package com.advancedraidtracker.filters;\n\nimport com.advancedraidtracker.SimpleTOBData;\nimport lombok.extern.slf4j.Slf4j;\nimport org.apache.commons.lang3.StringUtils;\n\nimport java.util.ArrayList;\n\n@Slf4j\npublic class FilterPlayers extends FilterCondition\n{\n    private final ArrayList\u003cString\u003e players;\n    private final int operator;\n    private final String stringValue;\n\n    public FilterPlayers(String players, int operator, String val)\n    {\n        this.players \u003d new ArrayList\u003cString\u003e();\n        String[] playerNames \u003d players.split(\",\");\n        for (String playerName : playerNames)\n        {\n            this.players.add(playerName.replaceAll(String.valueOf((char) 160), String.valueOf((char) 32)).toLowerCase());\n        }\n        this.operator \u003d operator;\n        stringValue \u003d val;\n    }\n\n    private boolean cleanContains(SimpleTOBData data, String player)\n    {\n        for (String p : data.players.keySet())\n        {\n            if (p.replaceAll(String.valueOf((char) 160), String.valueOf((char) 32)).toLowerCase().equals(player))\n            {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    @Override\n    public String toString()\n    {\n        return stringValue;\n    }\n\n    @Override\n    public boolean evaluate(SimpleTOBData data)\n    {\n        switch (operator)\n        {\n            case 0:\n                if (data.players.size() \u003d\u003d players.size())\n                {\n                    for (String p : players)\n                    {\n                        if (!cleanContains(data, p))\n                        {\n                            return false;\n                        }\n                    }\n                    return true;\n                }\n                return false;\n            case 1:\n                boolean flag \u003d true;\n                for (String p : players)\n                {\n                    if (!cleanContains(data, p))\n                    {\n                        flag \u003d false;\n                    }\n                }\n                return flag;\n            case 2:\n                for (String p : players)\n                {\n                    if (cleanContains(data, p))\n                    {\n                        return true;\n                    }\n                }\n                return false;\n            case 3:\n                for (String p : players)\n                {\n                    if (!cleanContains(data, p))\n                    {\n                        return true;\n                    }\n                }\n                return false;\n            case 4:\n                for (String p : players)\n                {\n                    if (cleanContains(data, p))\n                    {\n                        return false;\n                    }\n                }\n                return true;\n        }\n        return false;\n    }\n\n    public String getFilterCSV()\n    {\n        StringBuilder playerStr \u003d new StringBuilder();\n        for (String s : players)\n        {\n            playerStr.append(s);\n            playerStr.append(\",\");\n        }\n        playerStr \u003d new StringBuilder(StringUtils.substring(playerStr.toString(), 0, playerStr.length() - 1));\n        return \"2-\" + operator + \"-\" + playerStr + \"-\" + stringValue;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\filters\\FilterPlayers.java"},{"fileName":"FilterTime.java","content":"package com.advancedraidtracker.filters;\n\nimport com.advancedraidtracker.utility.datautility.DataPoint;\nimport lombok.extern.slf4j.Slf4j;\nimport com.advancedraidtracker.SimpleTOBData;\n\n@Slf4j\npublic class FilterTime extends FilterCondition\n{\n    private final DataPoint split;\n    private final int compare;\n    private final int time;\n    private final String stringValue;\n\n    public FilterTime(DataPoint split, int compare1, int time1, String str)\n    {\n        this.split \u003d split;\n        this.compare \u003d compare1;\n        this.time \u003d time1;\n        stringValue \u003d str;\n    }\n\n    @Override\n    public String toString()\n    {\n        return stringValue;\n    }\n\n    @Override\n    public boolean evaluate(SimpleTOBData data)\n    {\n        int checkValue \u003d data.getValue(split);\n        return FilterUtil.compare(compare, time, checkValue);\n    }\n\n    public String getFilterCSV()\n    {\n        return \"0-\" + split.name + \"-\" + compare + \"-\" + time + \"-\" + stringValue;\n    }\n}\n\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\filters\\FilterTime.java"},{"fileName":"FilterUtil.java","content":"package com.advancedraidtracker.filters;\n\npublic class FilterUtil\n{\n    public static boolean compare(int operator, int value, int compareValue)\n    {\n        switch (operator)\n        {\n            case 0:\n                return compareValue \u003d\u003d value;\n            case 1:\n                return compareValue \u003c value;\n            case 2:\n                return compareValue \u003e value;\n            case 3:\n                return compareValue \u003c\u003d value;\n            case 4:\n                return compareValue \u003e\u003d value;\n            default:\n                return false;\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\filters\\FilterUtil.java"},{"fileName":"ImplicitFilter.java","content":"package com.advancedraidtracker.filters;\n\nimport com.advancedraidtracker.SimpleTOBData;\nimport com.advancedraidtracker.utility.datautility.DataPoint;\n\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Date;\n\npublic class ImplicitFilter\n{\n    private FilterCondition filter;\n\n    public ImplicitFilter(FilterDate filterDate)\n    {\n        filter \u003d filterDate;\n    }\n\n    public ImplicitFilter(FilterTime filterTime)\n    {\n        filter \u003d filterTime;\n    }\n\n    public ImplicitFilter(FilterPlayers filterPlayers)\n    {\n        filter \u003d filterPlayers;\n    }\n\n    public ImplicitFilter(FilterOtherBool filterBool)\n    {\n        filter \u003d filterBool;\n    }\n\n    public ImplicitFilter(FilterOtherInt filterInt)\n    {\n        filter \u003d filterInt;\n    }\n\n    public ImplicitFilter(String s)\n    {\n        filter \u003d null;\n        if (!s.isEmpty())\n        {\n            int filterType \u003d Integer.parseInt(s.substring(0, 1));\n            ArrayList\u003cString\u003e parse \u003d new ArrayList\u003cString\u003e(Arrays.asList(s.split(\"-\")));\n            switch (filterType)\n            {\n                case 0:\n                    if (parse.size() \u003d\u003d 5)\n                    {\n                        filter \u003d new FilterTime(\n                                DataPoint.getValue(parse.get(1)),\n                                Integer.parseInt(parse.get(2)),\n                                Integer.parseInt(parse.get(3)),\n                                parse.get(4));\n                    }\n                    break;\n                case 1:\n                    if (parse.size() \u003d\u003d 5)\n                    {\n                        filter \u003d new FilterOtherInt(\n                                DataPoint.getValue(parse.get(1)),\n                                Integer.parseInt(parse.get(2)),\n                                Integer.parseInt(parse.get(3)),\n                                parse.get(4));\n                    }\n                    break;\n                case 2:\n                    if (parse.size() \u003d\u003d 4)\n                    {\n                        filter \u003d new FilterPlayers(\n                                parse.get(2),\n                                Integer.parseInt(parse.get(1)),\n                                parse.get(3));\n                    }\n                    break;\n                case 3:\n                    if (parse.size() \u003d\u003d 4)\n                    {\n                        filter \u003d new FilterOtherBool(\n                                Integer.parseInt(parse.get(1)),\n                                (Integer.parseInt(parse.get(2)) \u003d\u003d 1),\n                                parse.get(3));\n                    }\n                    break;\n                case 4:\n                    if (parse.size() \u003d\u003d 4)\n                    {\n                        filter \u003d new FilterDate(\n                                new Date(Long.parseLong(parse.get(1))),\n                                Integer.parseInt(parse.get(2)),\n                                parse.get(3));\n                    }\n            }\n        }\n    }\n\n    public String getFilterCSV()\n    {\n        return filter.getFilterCSV();\n    }\n\n    public String getFilterDescription()\n    {\n        return filter.toString();\n    }\n\n    public boolean evaluate(SimpleTOBData data)\n    {\n        return filter.evaluate(data);\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\filters\\ImplicitFilter.java"},{"fileName":"BloatHandler.java","content":"package com.advancedraidtracker.rooms.tob;\n\nimport com.advancedraidtracker.AdvancedRaidTrackerPlugin;\nimport com.advancedraidtracker.AdvancedRaidTrackerConfig;\nimport com.advancedraidtracker.constants.TOBRoom;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Player;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.*;\nimport com.advancedraidtracker.utility.Point;\nimport com.advancedraidtracker.utility.RoomUtil;\nimport com.advancedraidtracker.utility.datautility.DataWriter;\n\nimport java.util.ArrayList;\n\nimport static com.advancedraidtracker.constants.LogID.*;\nimport static com.advancedraidtracker.constants.TobIDs.*;\nimport static com.advancedraidtracker.utility.RoomState.*;\nimport static com.advancedraidtracker.utility.RoomState.BloatRoomState.*;\n\n@Slf4j\npublic class BloatHandler extends RoomHandler\n{\n    public BloatRoomState roomState;\n\n    private final ArrayList\u003cInteger\u003e walks \u003d new ArrayList\u003c\u003e();\n    private final ArrayList\u003cInteger\u003e downs \u003d new ArrayList\u003c\u003e();\n    private int bloatStartTick \u003d -1;\n    private int bloatDeferTick \u003d -1;\n    private int bloatDeathTick \u003d -1;\n    private final AdvancedRaidTrackerPlugin plugin;\n\n    public BloatHandler(Client client, DataWriter clog, AdvancedRaidTrackerConfig config, AdvancedRaidTrackerPlugin plugin)\n    {\n        super(client, clog, config);\n        this.plugin \u003d plugin;\n        roomState \u003d NOT_STARTED;\n    }\n\n    public boolean isActive()\n    {\n        return !(roomState \u003d\u003d NOT_STARTED || roomState \u003d\u003d FINISHED);\n    }\n\n    public String getName()\n    {\n        return \"Bloat\";\n    }\n\n    public void reset()\n    {\n        roomState \u003d NOT_STARTED;\n        bloatDeferTick \u003d -1;\n        accurateEntry \u003d true;\n        bloatStartTick \u003d -1;\n        bloatDeathTick \u003d -1;\n        walks.clear();\n        downs.clear();\n        super.reset();\n    }\n\n    public void endBloat()\n    {\n        roomState \u003d FINISHED;\n        bloatDeathTick \u003d client.getTickCount() + BLOAT_DEATH_ANIMATION_LENGTH;\n        plugin.addDelayedLine(TOBRoom.BLOAT, client.getTickCount() - bloatStartTick, \"Dead\");\n        clog.addLine(ACCURATE_BLOAT_END);\n        plugin.liveFrame.setBloatFinished(bloatDeathTick - bloatStartTick);\n        if (bloatStartTick !\u003d -1)\n        {\n            sendTimeMessage(\"Wave \u0027Bloat last down\u0027 complete! Duration: \", splitLastDown(), \" Room time: \", bloatDeathTick - bloatStartTick, true);\n        }\n    }\n\n    public int splitLastDown()\n    {\n        if (bloatDeathTick !\u003d -1)\n        {\n            if (walks.size() \u003d\u003d downs.size() + 1)\n            {\n                return bloatDeathTick - walks.get(walks.size() - 1);\n            } else if (walks.size() \u003d\u003d downs.size())\n            {\n                return bloatDeathTick - downs.get(walks.size() - 1);\n            } else\n            {\n                return -1;\n            }\n        } else\n        {\n            return -1;\n        }\n    }\n\n    public void start()\n    {\n        bloatStartTick \u003d client.getTickCount();\n        roomStartTick \u003d client.getTickCount();\n        roomState \u003d WALKING;\n    }\n\n    private int getLastWalk()\n    {\n        if (!downs.isEmpty() \u0026\u0026 !walks.isEmpty() \u0026\u0026 downs.size() \u003d\u003d walks.size())\n        {\n            return downs.get(downs.size() - 1) - walks.get(walks.size() - 1);\n        } else\n        {\n            return -1;\n        }\n    }\n\n    private int getLastDownTime()\n    {\n        if (!downs.isEmpty())\n        {\n            return downs.get(downs.size() - 1) - bloatStartTick;\n        } else\n        {\n            return -1;\n        }\n    }\n\n    private double deferHP \u003d -1;\n\n    public void down()\n    {\n        clog.addLine(BLOAT_DOWN, String.valueOf(client.getTickCount() - bloatStartTick));\n        if (downs.isEmpty())\n        {\n            int currentBloatHP \u003d client.getVarbitValue(HP_VARBIT);\n            clog.addLine(BLOAT_HP_1ST_DOWN, String.valueOf(currentBloatHP));\n        }\n        downs.add(client.getTickCount());\n        roomState \u003d DOWN;\n        if (bloatStartTick !\u003d -1)\n        {\n            deferHP \u003d client.getVarbitValue(HP_VARBIT) / 10.0;\n            bloatDeferTick \u003d client.getTickCount() + 5; //delay so that the chat message can\u0027t be used to know immediately know when bloat has gone down\n        }\n        plugin.addDelayedLine(TOBRoom.BLOAT, client.getTickCount() - bloatStartTick, \"Down\");\n    }\n\n    public void walk()\n    {\n        walks.add(client.getTickCount());\n        plugin.addDelayedLine(TOBRoom.BLOAT, client.getTickCount() - bloatStartTick, \"Moving\");\n        roomState \u003d WALKING;\n    }\n\n    public void updateGameTick(GameTick event)\n    {\n        if (bloatDeferTick !\u003d -1 \u0026\u0026 bloatDeferTick \u003d\u003d client.getTickCount())\n        {\n            sendTimeMessage(\"Wave \u0027Bloat walk\u0027 complete! Duration: \", getLastWalk(), getLastDownTime(), true, \", HP: \" + deferHP + \"%\");\n            bloatDeferTick \u003d -1;\n        }\n        if (bloatStartTick \u003d\u003d -1)\n        { //room time starts when player enters either gate in the bloat region\n            if (RoomUtil.crossedLine(BLOAT_REGION, new Point(39, 30), new Point(39, 33), true, client)\n                    || RoomUtil.crossedLine(BLOAT_REGION, new Point(24, 30), new Point(24, 33), true, client))\n            {\n                start();\n                walk();\n            }\n        }\n\n        if (NyloHandler.instanceStart \u003d\u003d -1)\n        { //Nylo instance timer is started when the first player crosses the unreachable line by the bloat chest\n            if (RoomUtil.crossedLine(BLOAT_REGION, new Point(4, 31), new Point(4, 32), true, client))\n            {\n                NyloHandler.instanceStart \u003d client.getTickCount();\n            }\n        }\n    }\n\n    public void updateAnimationChanged(AnimationChanged event)\n    {\n        if (event.getActor().getAnimation() \u003d\u003d BLOAT_DOWN_ANIMATION)\n        {\n            down();\n        } else if (event.getActor().getName() !\u003d null \u0026\u0026 event.getActor().getAnimation() \u003d\u003d -1 \u0026\u0026 event.getActor().getName().contains(\"Bloat\"))\n        {\n            walk();\n        }\n        if (event.getActor().getAnimation() \u003d\u003d BLOAT_DEATH_ANIMATION)\n        {\n            endBloat();\n        }\n        if (event.getActor().getAnimation() \u003d\u003d SCYTHE_ANIMATION)\n        {\n            if (event.getActor() instanceof Player)\n            {\n                Player p \u003d (Player) event.getActor();\n                clog.addLine(BLOAT_SCYTHE_1ST_WALK, p.getName(), String.valueOf(client.getTickCount() - bloatStartTick));\n            }\n        }\n    }\n\n    public void updateNpcSpawned(NpcSpawned event)\n    {\n        boolean story \u003d false;\n        switch (event.getNpc().getId())\n        {\n            case BLOAT_SM:\n                story \u003d true;\n                clog.addLine(IS_STORY_MODE);\n            case BLOAT_HM:\n                if (!story)\n                    clog.addLine(IS_HARD_MODE);\n            case BLOAT:\n                clog.addLine(BLOAT_SPAWNED);\n                if (client.getVarbitValue(ROOM_ACTIVE_VARBIT) !\u003d 0)\n                {\n                    accurateEntry \u003d false;\n                } else\n                {\n                    clog.addLine(ACCURATE_BLOAT_START);\n                    clog.addLine(BLOAT_DIRECTION, String.valueOf(event.getNpc().getCurrentOrientation()), String.valueOf(event.getNpc().getIndex()));\n                }\n                break;\n        }\n    }\n\n    public void updateNpcDespawned(NpcDespawned event)\n    {\n        int id \u003d event.getNpc().getId();\n        if (id \u003d\u003d BLOAT || id \u003d\u003d BLOAT_HM || id \u003d\u003d BLOAT_SM)\n        {\n            clog.addLine(BLOAT_DESPAWN, String.valueOf(client.getTickCount() - bloatStartTick));\n        }\n    }\n\n    public void updateGraphicsObjectCreated(GraphicsObjectCreated event)\n    {\n        int id \u003d event.getGraphicsObject().getId();\n        if(id \u003d\u003d 1570 || id \u003d\u003d 1571 || id \u003d\u003d 1572 || id \u003d\u003d 1573) //various bloat hands\n        {\n            WorldPoint wp \u003d WorldPoint.fromLocal(client, event.getGraphicsObject().getLocation());\n            clog.addLine(BLOAT_HAND, String.valueOf(id), String.valueOf(wp.getRegionX()), String.valueOf(wp.getRegionY()), String.valueOf(client.getTickCount()-roomStartTick));\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\rooms\\tob\\BloatHandler.java"},{"fileName":"LobbyHandler.java","content":"package com.advancedraidtracker.rooms.tob;\n\nimport com.advancedraidtracker.AdvancedRaidTrackerConfig;\nimport net.runelite.api.Client;\nimport com.advancedraidtracker.utility.datautility.DataWriter;\n\npublic class LobbyHandler extends RoomHandler\n{\n    public LobbyHandler(Client client, DataWriter clog, AdvancedRaidTrackerConfig config)\n    {\n        super(client, clog, config);\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\rooms\\tob\\LobbyHandler.java"},{"fileName":"MaidenHandler.java","content":"package com.advancedraidtracker.rooms.tob;\n\nimport com.advancedraidtracker.AdvancedRaidTrackerPlugin;\nimport com.advancedraidtracker.AdvancedRaidTrackerConfig;\n\nimport com.advancedraidtracker.constants.TOBRoom;\nimport com.advancedraidtracker.constants.TobIDs;\nimport com.advancedraidtracker.utility.*;\n\nimport com.advancedraidtracker.utility.datautility.DataWriter;\nimport com.advancedraidtracker.utility.maidenbloodtracking.BloodDamageToBeApplied;\nimport com.advancedraidtracker.utility.maidenbloodtracking.BloodPositionWrapper;\nimport com.advancedraidtracker.utility.wrappers.NPCTimeInChunkShell;\nimport com.advancedraidtracker.utility.wrappers.PlayerHitsWrapper;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.*;\n\nimport java.util.*;\nimport java.util.stream.Collectors;\n\nimport static com.advancedraidtracker.constants.LogID.*;\nimport static com.advancedraidtracker.constants.TobIDs.*;\nimport static com.advancedraidtracker.utility.ItemReference.*;\nimport static com.advancedraidtracker.utility.RoomUtil.crossedLine;\n\nimport com.advancedraidtracker.utility.wrappers.MaidenCrab;\nimport net.runelite.api.kit.KitType;\nimport net.runelite.client.game.ItemEquipmentStats;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.game.ItemStats;\n\n@Slf4j\npublic class MaidenHandler extends RoomHandler\n{\n    public RoomState.MaidenRoomState roomState;\n\n    int maidenStartTick;\n    int p70;\n    int p50;\n    int p30;\n    int maidenDeathTick;\n    NPC maidenNPC;\n    int bloodHeals \u003d 0;\n\n    private final com.advancedraidtracker.utility.Point MAIDEN_GATE_START \u003d new com.advancedraidtracker.utility.Point(32 , 29);\n    private final com.advancedraidtracker.utility.Point MAIDEN_GATE_END \u003d new com.advancedraidtracker.utility.Point(32, 32);\n\n    public int deferVarbitCheck \u003d -1;\n    ArrayList\u003cMaidenCrab\u003e maidenCrabs \u003d new ArrayList\u003c\u003e();\n    ArrayList\u003cMaidenCrab\u003e deferredCrabs \u003d new ArrayList\u003c\u003e();\n\n    ArrayList\u003cPlayerHitsWrapper\u003e hitsplatsPerPlayer;\n    ArrayList\u003cBloodPositionWrapper\u003e thrownBloodLocations;\n    ArrayList\u003cWorldPoint\u003e spawnedBloodLocations;\n    ArrayList\u003cInteger\u003e maidenHeals;\n    ArrayList\u003cBloodDamageToBeApplied\u003e queuedBloodDamage;\n\n    ArrayList\u003cPlayer\u003e dinhsers;\n\n\n    ArrayList\u003cNPCTimeInChunkShell\u003e npcs;\n\n\n    AdvancedRaidTrackerConfig config;\n    AdvancedRaidTrackerPlugin plugin;\n\n    private final ItemManager itemManager;\n\n    public MaidenHandler(Client client, DataWriter clog, AdvancedRaidTrackerConfig config, AdvancedRaidTrackerPlugin plugin, ItemManager itemManager)\n    {\n        super(client, clog, config);\n        this.plugin \u003d plugin;\n        this.itemManager \u003d itemManager;\n        roomState \u003d RoomState.MaidenRoomState.NOT_STARTED;\n        p70 \u003d -1;\n        p50 \u003d -1;\n        p30 \u003d -1;\n        maidenStartTick \u003d -1;\n        maidenDeathTick \u003d -1;\n        accurateEntry \u003d true;\n        hitsplatsPerPlayer \u003d new ArrayList\u003c\u003e();\n        thrownBloodLocations \u003d new ArrayList\u003c\u003e();\n        spawnedBloodLocations \u003d new ArrayList\u003c\u003e();\n        maidenHeals \u003d new ArrayList\u003c\u003e();\n        queuedBloodDamage \u003d new ArrayList\u003c\u003e();\n        npcs \u003d new ArrayList\u003c\u003e();\n        dinhsers \u003d new ArrayList\u003c\u003e();\n        this.config \u003d config;\n    }\n\n    public boolean isActive()\n    {\n        return !(roomState \u003d\u003d RoomState.MaidenRoomState.NOT_STARTED || roomState \u003d\u003d RoomState.MaidenRoomState.FINISHED);\n    }\n\n    public String getName()\n    {\n        return \"Maiden\";\n    }\n\n    public void reset()\n    {\n        roomState \u003d RoomState.MaidenRoomState.NOT_STARTED;\n        accurateEntry \u003d true;\n        p70 \u003d -1;\n        p50 \u003d -1;\n        p30 \u003d -1;\n        maidenStartTick \u003d -1;\n        maidenDeathTick \u003d -1;\n        hitsplatsPerPlayer.clear();\n        thrownBloodLocations.clear();\n        maidenHeals.clear();\n        queuedBloodDamage.clear();\n        deferredCrabs.clear();\n        bloodHeals \u003d 0;\n        npcs.clear();\n        dinhsers.clear();\n        super.reset();\n    }\n\n    public void startMaiden()\n    {\n        // Room already started, ignore request.\n        if (maidenStartTick !\u003d -1)\n            return;\n\n        maidenStartTick \u003d client.getTickCount();\n        roomStartTick \u003d client.getTickCount();\n        deferVarbitCheck \u003d maidenStartTick + 2;\n    }\n\n    public void proc70()\n    {\n        p70 \u003d super.client.getTickCount();\n        roomState \u003d RoomState.MaidenRoomState.PHASE_2;\n        if (maidenStartTick !\u003d -1)\n            sendTimeMessage(\"Wave \u0027Maiden phase 1\u0027 complete! Duration: \", p70 - maidenStartTick);\n        clog.addLine(MAIDEN_70S, String.valueOf(p70 - maidenStartTick));\n        plugin.addDelayedLine(TOBRoom.MAIDEN, p70 - maidenStartTick - 2, \"70s\");\n\n    }\n\n    public void proc50()\n    {\n        p50 \u003d super.client.getTickCount();\n        roomState \u003d RoomState.MaidenRoomState.PHASE_3;\n        if (maidenStartTick !\u003d -1)\n            sendTimeMessage(\"Wave \u0027Maiden phase 2\u0027 complete! Duration: \", p50 - maidenStartTick, p50 - p70);\n        clog.addLine(MAIDEN_50S, String.valueOf(p50 - maidenStartTick));\n        plugin.addDelayedLine(TOBRoom.MAIDEN, p50 - maidenStartTick - 2, \"50s\");\n    }\n\n    public void proc30()\n    {\n        p30 \u003d super.client.getTickCount();\n        roomState \u003d RoomState.MaidenRoomState.PHASE_4;\n        if (maidenStartTick !\u003d -1)\n            sendTimeMessage(\"Wave \u0027Maiden phase 3\u0027 complete! Duration: \", p30 - maidenStartTick, p30 - p50);\n        clog.addLine(MAIDEN_30S, String.valueOf(p30 - maidenStartTick));\n        plugin.addDelayedLine(TOBRoom.MAIDEN, p30 - maidenStartTick - 2, \"30s\");\n    }\n\n    public void endMaiden()\n    {\n        roomState \u003d RoomState.MaidenRoomState.FINISHED;\n        maidenDeathTick \u003d client.getTickCount() + MAIDEN_DEATH_ANIMATION_LENGTH;\n        if (maidenStartTick !\u003d -1)\n            sendTimeMessage(\"Wave \u0027Maiden Skip\u0027 complete! Duration: \", maidenDeathTick - maidenStartTick, maidenDeathTick - p30, false);\n        clog.addLine(ACCURATE_MAIDEN_END);\n        clog.addLine(MAIDEN_0HP, String.valueOf(client.getTickCount() - maidenStartTick));\n        plugin.addDelayedLine(TOBRoom.MAIDEN, client.getTickCount() - maidenStartTick, \"Dead\");\n        plugin.liveFrame.setMaidenFinished(maidenDeathTick - maidenStartTick);\n    }\n\n    private boolean didAuto \u003d false;\n\n    public void updateAnimationChanged(AnimationChanged event)\n    {\n        if (event.getActor().getAnimation() \u003d\u003d MAIDEN_DEATH_ANIMATION)\n        {\n            endMaiden();\n        } else if (event.getActor().getAnimation() \u003d\u003d CHINCHOMPA_THROWN_ANIMATION)\n        {\n            if (event.getActor() instanceof Player)\n            {\n                Player player \u003d (Player) event.getActor();\n                Actor target \u003d player.getInteracting();\n                int distance \u003d target.getWorldArea().distanceTo(player.getWorldLocation());\n                clog.addLine(MAIDEN_CHIN_THROWN, player.getName(), String.valueOf(distance));\n                if (distance \u003c 4 || distance \u003e 6)\n                {\n                    if (config.showMistakesInChat())\n                    {\n                        client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", player.getName() + \" chinned from \" + distance + \" tiles away.\", null, false);\n                    }\n                }\n            }\n        } else if (event.getActor().getAnimation() \u003d\u003d DINHS_BULWARK_ANIMATION)\n        {\n            dinhsers.add((Player) event.getActor());\n        }\n        else if(event.getActor().getAnimation() \u003d\u003d MAIDEN_AUTO_ANIMATION)\n        {\n            didAuto \u003d true;\n        }\n    }\n\n    public int getDrainedStat(Player player) //Assumes berserker/ultor\n    {\n        if(player \u003d\u003d null)\n        {\n            return NONE;\n        }\n        int stab \u003d 0;\n        int slash \u003d 0;\n        int crush \u003d 0;\n        int magic \u003d 0;\n        int range \u003d 0;\n        PlayerComposition pc \u003d player.getPlayerComposition();\n        int[] wornItems \u003d {\n                pc.getEquipmentId(KitType.HEAD),\n                pc.getEquipmentId(KitType.CAPE),\n                pc.getEquipmentId(KitType.AMULET),\n                pc.getEquipmentId(KitType.WEAPON),\n                pc.getEquipmentId(KitType.TORSO),\n                pc.getEquipmentId(KitType.SHIELD),\n                pc.getEquipmentId(KitType.LEGS),\n                pc.getEquipmentId(KitType.HANDS),\n                pc.getEquipmentId(KitType.BOOTS)\n        };\n        for(int item : wornItems)\n        {\n            ItemStats itemStats \u003d itemManager.getItemStats(item);\n            if(itemStats !\u003d null)\n            {\n                ItemEquipmentStats itemEquipmentStats \u003d itemStats.getEquipment();\n                stab +\u003d itemEquipmentStats.getAstab();\n                slash +\u003d itemEquipmentStats.getAslash();\n                crush +\u003d itemEquipmentStats.getAcrush();\n                magic +\u003d itemEquipmentStats.getAmagic();\n                range +\u003d itemEquipmentStats.getArange();\n            }\n        }\n        if((stab \u003e\u003d magic \u0026\u0026 stab \u003e\u003d range) || (slash \u003e\u003d magic \u0026\u0026 slash \u003e\u003d range) || (crush \u003e\u003d magic \u0026\u0026 crush \u003e\u003d range))\n        {\n            return MELEE;\n        }\n        else if(magic \u003e range)\n        {\n            return MAGE;\n        }\n        else\n        {\n            return RANGE;\n        }\n    }\n\n    public void updateNpcDespawned(NpcDespawned event)\n    {\n        NPC npc \u003d event.getNpc();\n        switch (npc.getId())\n        {\n            case TobIDs.MAIDEN_P0:\n            case TobIDs.MAIDEN_P1:\n            case TobIDs.MAIDEN_P2:\n            case TobIDs.MAIDEN_P3:\n            case TobIDs.MAIDEN_PRE_DEAD:\n            case TobIDs.MAIDEN_DEAD:\n            case TobIDs.MAIDEN_P0_HM:\n            case TobIDs.MAIDEN_P1_HM:\n            case TobIDs.MAIDEN_P2_HM:\n            case TobIDs.MAIDEN_P3_HM:\n            case TobIDs.MAIDEN_PRE_DEAD_HM:\n            case TobIDs.MAIDEN_DEAD_HM:\n            case TobIDs.MAIDEN_P0_SM:\n            case TobIDs.MAIDEN_P1_SM:\n            case TobIDs.MAIDEN_P2_SM:\n            case TobIDs.MAIDEN_P3_SM:\n            case TobIDs.MAIDEN_PRE_DEAD_SM:\n            case TobIDs.MAIDEN_DEAD_SM:\n                clog.addLine(MAIDEN_DESPAWNED, String.valueOf(client.getTickCount() - maidenStartTick));\n                break;\n            case MAIDEN_MATOMENOS:\n            case MAIDEN_MATOMENOS_HM:\n            case MAIDEN_MATOMENOS_SM:\n                maidenCrabs.removeIf(x -\u003e x.crab.equals(event.getNpc()));\n            default:\n                break;\n        }\n    }\n\n    public void updateNpcSpawned(NpcSpawned event)\n    {\n        NPC npc \u003d event.getNpc();\n        boolean story \u003d false;\n        switch (npc.getId())\n        {\n            case MAIDEN_P0_SM:\n            case MAIDEN_P1_SM:\n            case MAIDEN_P2_SM:\n            case MAIDEN_P3_SM:\n            case MAIDEN_PRE_DEAD_SM:\n            case MAIDEN_DEAD_SM:\n                story \u003d true;\n                clog.addLine(IS_STORY_MODE);\n            case MAIDEN_P0_HM:\n            case MAIDEN_P1_HM:\n            case MAIDEN_P2_HM:\n            case MAIDEN_P3_HM:\n            case MAIDEN_PRE_DEAD_HM:\n            case MAIDEN_DEAD_HM:\n                if (!story)\n                    clog.addLine(IS_HARD_MODE);\n            case MAIDEN_P0:\n            case MAIDEN_P1:\n            case MAIDEN_P2:\n            case MAIDEN_P3:\n            case MAIDEN_DEAD:\n                clog.addLine(MAIDEN_SPAWNED);\n                maidenNPC \u003d npc;\n                startMaiden();\n                break;\n            case MAIDEN_MATOMENOS:\n            case MAIDEN_MATOMENOS_HM:\n            case MAIDEN_MATOMENOS_SM:\n                String crabName \u003d identifySpawn(npc);\n                clog.addLine(ADD_NPC_MAPPING, String.valueOf(npc.getIndex()), crabName);\n                plugin.liveFrame.getPanel(getName()).addNPCMapping(npc.getIndex(), crabName);\n                plugin.liveFrame.getPanel(getName()).addMaidenCrab(crabName);\n                MaidenCrab crab \u003d new MaidenCrab(npc, AdvancedRaidTrackerPlugin.scale, crabName);\n                logCrabSpawn(crab.description);\n                maidenCrabs.add(crab);\n                break;\n            case TobIDs.MAIDEN_BLOOD:\n            case TobIDs.MAIDEN_BLOOD_HM:\n            case TobIDs.MAIDEN_BLOOD_SM:\n                clog.addLine(BLOOD_SPAWNED);\n                break;\n        }\n    }\n\n    public void handleNPCChanged(int id)\n    {\n        switch (id)\n        {\n            case MAIDEN_P1:\n            case MAIDEN_P1_HM:\n            case MAIDEN_P1_SM:\n                proc70();\n                break;\n            case MAIDEN_P2:\n            case MAIDEN_P2_HM:\n            case MAIDEN_P2_SM:\n                proc50();\n                break;\n            case MAIDEN_P3:\n            case MAIDEN_P3_HM:\n            case MAIDEN_P3_SM:\n                proc30();\n                break;\n            case MAIDEN_DEAD:\n            case MAIDEN_DEAD_HM:\n            case MAIDEN_DEAD_SM:\n                break;\n        }\n    }\n\n    private void logCrabSpawn(String description)\n    {\n        clog.addLine(MATOMENOS_SPAWNED, description);\n    }\n\n    private void applyBlood()\n    {\n        for (BloodDamageToBeApplied p : queuedBloodDamage)\n        {\n            int bloodDamage \u003d -1;\n            Optional\u003cPlayerHitsWrapper\u003e hits \u003d hitsplatsPerPlayer.stream().filter(playerHitsWrapper -\u003e playerHitsWrapper.name.equals(p.playerName)).findAny();\n            if (hits.isPresent())\n            {\n                bloodDamage \u003d hits.get().hitsplats.get(hits.get().hitsplats.size() - 1); //Last hitsplat is blood\n            }\n            if (bloodDamage !\u003d -1)\n            {\n                if (p.bloodTicksAlive \u003d\u003d -1)\n                {\n                    clog.addLine(PLAYER_STOOD_IN_SPAWNED_BLOOD, p.playerName, String.valueOf(bloodDamage)); //player, dmg\n                } else\n                {\n                    clog.addLine(PLAYER_STOOD_IN_THROWN_BLOOD, p.playerName, String.valueOf(bloodDamage), String.valueOf(p.bloodTicksAlive)); //player, dmg, blood tick\n                }\n                bloodHeals++;\n            }\n        }\n    }\n\n    private void assessBloodForNextTick()\n    {\n        queuedBloodDamage.clear();\n        for (Player p : client.getPlayers())\n        {\n            for (BloodPositionWrapper blood : thrownBloodLocations)\n            {\n                if (blood.initialTick \u003c\u003d client.getTickCount() \u0026\u0026 p.getWorldLocation().distanceTo(blood.location) \u003d\u003d 0)\n                {\n                    queuedBloodDamage.add(new BloodDamageToBeApplied(p.getName(), 10 - (blood.finalTick - client.getTickCount())));\n                }\n            }\n            for (WorldPoint blood : spawnedBloodLocations)\n            {\n                if (p.getWorldLocation().distanceTo(blood) \u003d\u003d 0)\n                {\n                    queuedBloodDamage.add(new BloodDamageToBeApplied(p.getName(), -1));\n                }\n            }\n        }\n\n        thrownBloodLocations.removeIf(bloodPositionWrapper -\u003e bloodPositionWrapper.finalTick \u003c\u003d client.getTickCount());\n    }\n\n    private void handleCrabHeals()\n    {\n        for (int i \u003d 0; i \u003c maidenHeals.size() - bloodHeals; i++)\n        {\n            clog.addLine(CRAB_HEALED_MAIDEN, String.valueOf(maidenHeals.get(i)));\n        }\n        bloodHeals \u003d 0;\n    }\n\n    private int findChunk(int x, int y)\n    {\n        int chunkX \u003d 3 - ((x - 8) / 8);\n        int chunkY \u003d 3 - ((y - 16) / 8);\n        return (4 * chunkX) + chunkY;\n    }\n\n    private void trackNPCMovements()\n    {\n        ArrayList\u003cNPCTimeInChunkShell\u003e merge \u003d new ArrayList\u003c\u003e();\n        for (NPC npc : client.getNpcs())\n        {\n            if (npcs.stream().noneMatch(o -\u003e o.npc.getIndex() \u003d\u003d npc.getIndex()))\n            {\n                merge.add(new NPCTimeInChunkShell(npc, findChunk(npc.getWorldLocation().getRegionX(), npc.getWorldLocation().getRegionY()), 0));\n            } else\n            {\n                int index \u003d -1;\n                for (int i \u003d 0; i \u003c npcs.size(); i++)\n                {\n                    if (npc.getIndex() \u003d\u003d npcs.get(i).npc.getIndex())\n                    {\n                        index \u003d i;\n                    }\n                }\n                if (index !\u003d -1)\n                {\n                    npcs.get(index).marked \u003d true;\n                    if (npcs.get(index).chunk \u003d\u003d findChunk(npc.getWorldLocation().getRegionX(), npc.getWorldLocation().getRegionY()))\n                    {\n                        npcs.get(index).timeInChunk++;\n                    } else\n                    {\n                        npcs.get(index).chunk \u003d findChunk(npc.getWorldLocation().getRegionX(), npc.getWorldLocation().getRegionY());\n                        npcs.get(index).timeInChunk \u003d 0;\n                    }\n                }\n\n            }\n        }\n        npcs.removeIf(o -\u003e !o.marked);\n        for (NPCTimeInChunkShell npc : npcs)\n        {\n            npc.marked \u003d false;\n        }\n        npcs.addAll(merge);\n    }\n\n    /*\n    Dinhs spec targets are picked in order of chunk relative to the player where they use the spec at, this grid:\n    7 4 1\n    8 5 2\n    9 6 3\n    is always centered around the player being in chunk 5, and the check starts in chunk 1, then moves to chunk 2, all the way to 9\n    if it will cross over 9 NPCs while checking a chunk, the NPCs are chosen on a last in first selected basis based on when\n    that NPC entered that chunk. The NPC must also be in a 11x11 area centered around the player to be targeted.\n\n    If multiple NPCs enter the chunk on the same tick, they are chosen by lowest NPC index first\n     */\n\n    private void analyzeDinhs()\n    {\n        for (Player p : dinhsers)\n        {\n            ArrayList\u003cNPC\u003e targets \u003d new ArrayList\u003c\u003e();\n            if (p.getInteracting() instanceof NPC)\n            {\n                NPC primaryTarget \u003d (NPC) p.getInteracting();\n                int primaryIndex \u003d primaryTarget.getIndex();\n                int centerX \u003d p.getWorldLocation().getRegionX();\n                int centerY \u003d p.getWorldLocation().getRegionY();\n                int centerChunk \u003d findChunk(centerX, centerY);\n                int minChunk \u003d centerChunk - 4;\n                int maxChunk \u003d centerChunk + 4;\n                for (int i \u003d minChunk; i \u003c\u003d maxChunk; i++)\n                {\n                    ArrayList\u003cNPCTimeInChunkShell\u003e potentialTargets \u003d new ArrayList\u003c\u003e();\n                    int maxToInclude \u003d 9 - targets.size();\n                    if (maxToInclude \u003e 0)\n                    {\n                        for (NPCTimeInChunkShell npc : npcs)\n                        {\n                            if (npc.chunk \u003d\u003d i)\n                            { //For some reason Maiden is NEVER targeted by additional dinhs hitsplat. Related to large non-moving NPCs\n                                if (!Objects.requireNonNull(npc.npc.getName()).contains(\"Maiden\") \u0026\u0026 !npc.npc.getName().contains(\"null\") \u0026\u0026 npc.npc.getHealthRatio() !\u003d 0)\n                                {\n                                    if (npc.npc.getWorldLocation().getRegionX() \u003c\u003d centerX + 5 \u0026\u0026\n                                            npc.npc.getWorldLocation().getRegionX() \u003e\u003d centerX - 5 \u0026\u0026\n                                            npc.npc.getWorldLocation().getRegionY() \u003c\u003d centerY + 5 \u0026\u0026\n                                            npc.npc.getWorldLocation().getRegionY() \u003e\u003d centerY - 5)\n                                    {\n                                        potentialTargets.add(npc);\n                                    }\n                                }\n                            }\n                        }\n                        if (potentialTargets.size() \u003e maxToInclude) //DO NOT REPLACE SORT METHODS WITH LIST.SORT OR WILL HAVE UNDEFINED RESULTS\n                        {\n                            Collections.sort(potentialTargets, Comparator.comparing(NPCTimeInChunkShell::getIndex));\n                            Collections.sort(potentialTargets, Comparator.comparing(NPCTimeInChunkShell::getTimeInChunk));\n                            for (int j \u003d 0; j \u003c maxToInclude; j++)\n                            {\n                                targets.add(potentialTargets.get(j).npc);\n                            }\n\n                        } else\n                        {\n                            for (NPCTimeInChunkShell npc : potentialTargets)\n                            {\n                                targets.add(npc.npc);\n                            }\n                        }\n                    }\n                }\n                String whichCrab \u003d \"\";\n                int primaryHP \u003d 0;\n                boolean didDoubleHit \u003d false;\n                for (MaidenCrab crab : maidenCrabs)\n                {\n                    if (primaryTarget.getIndex() \u003d\u003d crab.crab.getIndex())\n                    {\n                        whichCrab \u003d crab.description;\n                        primaryHP \u003d crab.health;\n                    }\n                }\n                String value3 \u003d primaryTarget.getName() + \"(\" + whichCrab + \")\" + \":\" + primaryHP;\n                StringBuilder value4 \u003d new StringBuilder();\n                if (targets.size() \u003c 9)\n                {\n                    if (config.showMistakesInChat())\n                    {\n                        client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", p.getName() + \" only targeted \" + targets.size() + \" additional NPCs with dinhs spec.\", null, false);\n                    }\n                }\n                ArrayList\u003cInteger\u003e healths \u003d new ArrayList\u003c\u003e();\n                for (NPC npc : targets)\n                {\n                    if (npc.getIndex() \u003d\u003d primaryIndex)\n                    {\n                        didDoubleHit \u003d true;\n                    }\n                    String additionalDescription \u003d \"^\";\n                    int hp \u003d -1;\n                    for (MaidenCrab crab : maidenCrabs)\n                    {\n                        if (crab.crab.getIndex() \u003d\u003d npc.getIndex())\n                        {\n                            additionalDescription \u003d crab.description;\n                            hp \u003d crab.health;\n                            healths.add(hp);\n                        }\n                    }\n                    value4.append(npc.getName()).append(\"~\").append(additionalDescription).append(\"~\").append(hp).append(\":\");\n                }\n                String value5 \u003d getTargetsBelow27(healths, targets, didDoubleHit);\n                clog.addLine(MAIDEN_DINHS_SPEC, p.getName(), value3, value4.toString(), value5);\n            }\n        }\n        dinhsers.clear();\n    }\n\n    private static String getTargetsBelow27(ArrayList\u003cInteger\u003e healths, ArrayList\u003cNPC\u003e targets, boolean didDoubleHit)\n    {\n        double total \u003d 0;\n        double count \u003d healths.size();\n        int belowThreshold \u003d 0;\n        for (Integer i : healths)\n        {\n            total +\u003d i;\n            if (i \u003c 27)\n            {\n                belowThreshold++;\n            }\n        }\n        double average \u003d total / healths.size();\n        return ((int) average) + \":\" + belowThreshold + \":\" + ((int) count) + \":\" + targets.size() + \":\" + didDoubleHit;\n    }\n\n    public void updateGameTick(GameTick event)\n    {\n        if (roomStartTick \u003d\u003d -1 \u0026\u0026 crossedLine(12613, MAIDEN_GATE_START, MAIDEN_GATE_END, true, client)) {\n            clog.addLine(MAIDEN_SPAWNED);\n            startMaiden();\n        }\n        trackNPCMovements();\n        analyzeDinhs();\n\n        applyBlood();\n        handleCrabHeals();\n        assessBloodForNextTick();\n        hitsplatsPerPlayer.clear();\n        maidenHeals.clear();\n        if(didAuto)\n        {\n            Actor drained \u003d maidenNPC.getInteracting();\n            if (drained instanceof Player)\n            {\n                clog.addLine(MAIDEN_AUTO, drained.getName(), String.valueOf(client.getTickCount() - roomStartTick));\n                int statDrained \u003d getDrainedStat((Player) drained);\n                if (statDrained \u003d\u003d MELEE)\n                {\n                    if (config.showMistakesInChat())\n                    {\n                        plugin.sendChatMessage(\"Maiden drained \" + drained.getName() + \"\u0027s melee stats.\");\n                    }\n                    clog.addLine(MAIDEN_PLAYER_DRAINED, drained.getName(), String.valueOf((client.getTickCount() - roomStartTick)));\n                }\n            }\n            didAuto \u003d false;\n        }\n\n        for (MaidenCrab crab : deferredCrabs)\n        {\n            clog.addLine(CRAB_LEAK, crab.description, String.valueOf(crab.health));\n        }\n        maidenCrabs.removeAll(deferredCrabs);\n        deferredCrabs.clear();\n\n        if (client.getTickCount() \u003d\u003d deferVarbitCheck)\n        {\n            deferVarbitCheck \u003d -1;\n            if (client.getVarbitValue(HP_VARBIT) !\u003d FULL_HP)\n            {\n                accurateEntry \u003d false;\n            } else\n            {\n                accurateEntry \u003d true;\n                roomState \u003d RoomState.MaidenRoomState.PHASE_1;\n                clog.addLine(ACCURATE_MAIDEN_START);\n            }\n        }\n        for (MaidenCrab crab : maidenCrabs)\n        {\n            int distance \u003d crab.crab.getWorldArea().distanceTo2D(maidenNPC.getWorldArea());\n            if (distance \u003d\u003d 1 \u0026\u0026 crab.health \u003e 0)\n            {\n                deferredCrabs.add(crab);\n            }\n        }\n    }\n\n    /**\n     * Tracks crab hps\n     */\n    public void updateHitsplatApplied(HitsplatApplied event)\n    {\n        if (event.getActor() instanceof NPC) //getHealthRatio doesn\u0027t give fine enough increments so we manually track the HP\n        {\n            if (maidenCrabs.stream().map(x -\u003e x.crab).collect(Collectors.toList()).contains((NPC) event.getActor()))\n            {\n                MaidenCrab crab \u003d maidenCrabs.stream().filter(x -\u003e x.crab.equals(event.getActor())).collect(Collectors.toList()).get(0);\n                crab.health -\u003d event.getHitsplat().getAmount();\n            }\n        }\n        if (event.getActor() instanceof Player) //Heal tracking\n        {\n            if (hitsplatsPerPlayer.stream().noneMatch(playerHPWrapper -\u003e playerHPWrapper.name.equals(event.getActor().getName())))\n            {\n                hitsplatsPerPlayer.add(new PlayerHitsWrapper(event.getActor().getName(), event.getHitsplat().getAmount()));\n            } else\n            {\n                for (PlayerHitsWrapper playerHitsWrapper : hitsplatsPerPlayer)\n                {\n                    if (playerHitsWrapper.name.equals(event.getActor().getName()))\n                    {\n                        playerHitsWrapper.hitsplats.add(event.getHitsplat().getAmount());\n                    }\n                }\n            }\n        } else if (event.getActor().getName() !\u003d null \u0026\u0026 event.getActor().getName().contains(\"Maiden\"))\n        {\n            if (event.getHitsplat().getHitsplatType() \u003d\u003d HitsplatID.HEAL)\n            {\n                maidenHeals.add(event.getHitsplat().getAmount());\n            }\n        }\n    }\n\n    public void updateGameObjectSpawned(GameObjectSpawned event)\n    {\n        if (event.getGameObject().getId() \u003d\u003d BLOOD_ON_GROUND)\n        {\n            spawnedBloodLocations.add(event.getGameObject().getWorldLocation());\n        }\n    }\n\n    public void updateGameObjectDespawned(GameObjectDespawned event)\n    {\n        if (event.getGameObject().getId() \u003d\u003d BLOOD_ON_GROUND)\n        {\n            spawnedBloodLocations.removeIf(worldPoint -\u003e worldPoint.getRegionX() \u003d\u003d event.getGameObject().getWorldLocation().getRegionX() \u0026\u0026\n                    worldPoint.getRegionY() \u003d\u003d event.getGameObject().getWorldLocation().getRegionY());\n\n        }\n    }\n\n    public void updateGraphicsObjectCreated(GraphicsObjectCreated event)\n    {\n        if (event.getGraphicsObject().getId() \u003d\u003d MAIDEN_THROWN_BLOOD_GRAPHIC_OBJECT)\n        {\n            thrownBloodLocations.add(new BloodPositionWrapper(WorldPoint.fromLocal(client, event.getGraphicsObject().getLocation()), ((((event.getGraphicsObject().getStartCycle() - client.getGameCycle() + 1) / 30)) + client.getTickCount() - 1)));\n        }\n    }\n\n    /**\n     * Returns a string describing the spawn position of a maiden crab\n     *\n     */\n    private String identifySpawn(NPC npc)\n    {\n\n        int x \u003d npc.getWorldLocation().getRegionX();\n        int y \u003d npc.getWorldLocation().getRegionY();\n        String proc \u003d getProc();\n        if (x \u003d\u003d 21 \u0026\u0026 y \u003d\u003d 40)\n        {\n            return \"N1\" + proc;\n        }\n        if (x \u003d\u003d 22 \u0026\u0026 y \u003d\u003d 41)\n        {\n            clog.addLine(MAIDEN_SCUFFED, \"N1\");\n            return \"N1\" + proc;\n        }\n        if (x \u003d\u003d 25 \u0026\u0026 y \u003d\u003d 40)\n        {\n            return \"N2\" + proc;\n        }\n        if (x \u003d\u003d 26 \u0026\u0026 y \u003d\u003d 41)\n        {\n            clog.addLine(MAIDEN_SCUFFED, \"N2\");\n            return \"N2\" + proc;\n        }\n        if (x \u003d\u003d 29 \u0026\u0026 y \u003d\u003d 40)\n        {\n            return \"N3\" + proc;\n        }\n        if (x \u003d\u003d 30 \u0026\u0026 y \u003d\u003d 41)\n        {\n            clog.addLine(MAIDEN_SCUFFED, \"N3\");\n            return \"N3\" + proc;\n        }\n        if (x \u003d\u003d 33 \u0026\u0026 y \u003d\u003d 40)\n        {\n            return \"N4 (1)\" + proc;\n        }\n        if (x \u003d\u003d 34 \u0026\u0026 y \u003d\u003d 41)\n        {\n            clog.addLine(MAIDEN_SCUFFED, \"N4 (1)\");\n            return \"N4 (1)\" + proc;\n        }\n        if (x \u003d\u003d 33 \u0026\u0026 y \u003d\u003d 38)\n        {\n            return \"N4 (2)\" + proc;\n        }\n        if (x \u003d\u003d 34 \u0026\u0026 y \u003d\u003d 39)\n        {\n            clog.addLine(MAIDEN_SCUFFED, \"N4 (2)\");\n            return \"N4 (2)\" + proc;\n        }\n        //\n        if (x \u003d\u003d 21 \u0026\u0026 y \u003d\u003d 20)\n        {\n            return \"S1\" + proc;\n        }\n        if (x \u003d\u003d 22 \u0026\u0026 y \u003d\u003d 19)\n        {\n            clog.addLine(MAIDEN_SCUFFED, \"S1\");\n            return \"S1\" + proc;\n        }\n        if (x \u003d\u003d 25 \u0026\u0026 y \u003d\u003d 20)\n        {\n            return \"S2\" + proc;\n        }\n        if (x \u003d\u003d 26 \u0026\u0026 y \u003d\u003d 19)\n        {\n            clog.addLine(MAIDEN_SCUFFED, \"S2\");\n            return \"S2\" + proc;\n        }\n        if (x \u003d\u003d 29 \u0026\u0026 y \u003d\u003d 20)\n        {\n            return \"S3\" + proc;\n        }\n        if (x \u003d\u003d 30 \u0026\u0026 y \u003d\u003d 19)\n        {\n            clog.addLine(MAIDEN_SCUFFED, \"S3\");\n            return \"S3\" + proc;\n        }\n        if (x \u003d\u003d 33 \u0026\u0026 y \u003d\u003d 20)\n        {\n            return \"S4 (1)\" + proc;\n        }\n        if (x \u003d\u003d 34 \u0026\u0026 y \u003d\u003d 19)\n        {\n            clog.addLine(MAIDEN_SCUFFED, \"S4 (1)\");\n            return \"S4 (1)\" + proc;\n        }\n        if (x \u003d\u003d 33 \u0026\u0026 y \u003d\u003d 22)\n        {\n            return \"S4 (2)\" + proc;\n        }\n        if (x \u003d\u003d 34 \u0026\u0026 y \u003d\u003d 21)\n        {\n            clog.addLine(MAIDEN_SCUFFED, \"S4 (2)\");\n            return \"S4 (2)\" + proc;\n        } else\n        {\n            return \"Unknown\";\n        }\n    }\n\n    private String getProc()\n    {\n        String proc \u003d \"\";\n        if (maidenNPC.getId() \u003d\u003d MAIDEN_P1 || maidenNPC.getId() \u003d\u003d MAIDEN_P1_HM || maidenNPC.getId() \u003d\u003d MAIDEN_P1_SM)\n        {\n            proc \u003d \" 70s\";\n        } else if (maidenNPC.getId() \u003d\u003d MAIDEN_P2 || maidenNPC.getId() \u003d\u003d MAIDEN_P2_HM || maidenNPC.getId() \u003d\u003d MAIDEN_P2_SM)\n        {\n            proc \u003d \" 50s\";\n        } else if (maidenNPC.getId() \u003d\u003d MAIDEN_P3 || maidenNPC.getId() \u003d\u003d MAIDEN_P3_HM || maidenNPC.getId() \u003d\u003d MAIDEN_P3_SM)\n        {\n            proc \u003d \" 30s\";\n        }\n        return proc;\n    }\n\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\rooms\\tob\\MaidenHandler.java"},{"fileName":"NyloHandler.java","content":"package com.advancedraidtracker.rooms.tob;\n\nimport com.advancedraidtracker.AdvancedRaidTrackerPlugin;\nimport com.advancedraidtracker.AdvancedRaidTrackerConfig;\nimport com.advancedraidtracker.constants.TOBRoom;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.NPC;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.NpcDespawned;\nimport net.runelite.api.events.NpcSpawned;\nimport com.advancedraidtracker.utility.datautility.DataWriter;\nimport com.advancedraidtracker.utility.RoomState;\nimport com.advancedraidtracker.utility.nyloutility.NylocasData;\nimport com.advancedraidtracker.utility.nyloutility.NylocasShell;\nimport com.advancedraidtracker.utility.nyloutility.NylocasWave;\nimport com.advancedraidtracker.utility.nyloutility.NylocasWaveMatcher;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Objects;\n\nimport static com.advancedraidtracker.constants.LogID.*;\nimport static com.advancedraidtracker.constants.TobIDs.*;\nimport static com.advancedraidtracker.utility.RoomState.NyloRoomState.*;\n\n@Slf4j\npublic class NyloHandler extends RoomHandler\n{\n    public RoomState.NyloRoomState roomState;\n    private final ArrayList\u003cNylocasShell\u003e buildWave;\n\n    public NyloHandler(Client client, DataWriter clog, AdvancedRaidTrackerConfig config, AdvancedRaidTrackerPlugin plugin)\n    {\n        super(client, clog, config);\n        this.plugin \u003d plugin;\n        buildWave \u003d new ArrayList\u003c\u003e();\n        nylosAlive \u003d new ArrayList\u003c\u003e();\n        roomState \u003d NOT_STARTED;\n    }\n\n    public static int instanceStart \u003d -1;\n    private int pillarsSpawnedTick \u003d -1;\n    private int instanceReference \u003d -1;\n    private int bossSpawn \u003d -1;\n    private int lastDead \u003d -1;\n    private int entryTickOffset \u003d -1;\n    private int wave31 \u003d -1;\n    private final ArrayList\u003cNPC\u003e nylosAlive;\n    int currentWave \u003d 0;\n    boolean hard \u003d false;\n    boolean story \u003d false;\n    private final AdvancedRaidTrackerPlugin plugin;\n    ArrayList\u003cNPC\u003e bigsDeadThisTick \u003d new ArrayList\u003c\u003e();\n    Map\u003cInteger, String\u003e bigDescription \u003d new HashMap\u003c\u003e();\n\n    public void reset()\n    {\n        currentWave \u003d 0;\n        roomState \u003d NOT_STARTED;\n        pillarsSpawnedTick \u003d -1;\n        instanceReference \u003d -1;\n        instanceStart \u003d -1;\n        bossSpawn \u003d -1;\n        lastDead \u003d -1;\n        accurateEntry \u003d true;\n        entryTickOffset \u003d -1;\n        hard \u003d false;\n        story \u003d false;\n        wave31 \u003d -1;\n        bigsDeadThisTick.clear();\n        bigDescription.clear();\n        super.reset();\n    }\n\n    public boolean isActive()\n    {\n        return !(roomState \u003d\u003d NOT_STARTED || roomState \u003d\u003d FINISHED);\n    }\n\n    public String getName()\n    {\n        return \"Nylocas\";\n    }\n\n    private int expectedWaveTick;\n\n    public void updateGameTick(GameTick event)\n    {\n        bigsDeadThisTick.clear();\n        if (!buildWave.isEmpty())\n        {\n            if (NylocasWaveMatcher.isWave(buildWave))\n            {\n                NylocasWave wave \u003d NylocasWaveMatcher.getWave();\n                if (wave.getWave() \u003d\u003d 1)\n                {\n                    wave1Spawn();\n                }\n                if (wave.getWave() \u003d\u003d 31)\n                {\n                    wave31Spawn();\n                } else\n                {\n                    expectedWaveTick \u003d client.getTickCount() + ((hard \u0026\u0026 wave.getWave() % 10 \u003d\u003d 0) ? 16 : NylocasWave.waves[wave.getWave()].getDelay());\n                    if (hard \u0026\u0026 (wave.getWave() % 10 \u003d\u003d 0)) //in hard mode each wave a prinkipas comes out on (10, 20, 30) has been changed to a 4 cycle natural delay\n                    {\n                        expectedWaveTick \u003d client.getTickCount() + 16;\n                    }\n                }\n                currentWave \u003d wave.getWave();\n                plugin.addDelayedLine(TOBRoom.NYLOCAS, client.getTickCount() - pillarsSpawnedTick, \"W\" + currentWave);\n                clog.addLine(NYLO_WAVE, String.valueOf(currentWave), String.valueOf(client.getTickCount() - pillarsSpawnedTick));\n            }\n            buildWave.clear();\n        }\n        if (client.getTickCount() \u003d\u003d expectedWaveTick \u0026\u0026 currentWave !\u003d 31)\n        {\n            clog.addLine(NYLO_STALL, String.valueOf(currentWave), String.valueOf(client.getTickCount() - pillarsSpawnedTick), String.valueOf(nylosAlive.size()));\n            plugin.addDelayedLine(TOBRoom.NYLOCAS, client.getTickCount() - pillarsSpawnedTick, \"Stall\");\n            expectedWaveTick +\u003d 4;\n        }\n    }\n\n    public void updateNpcSpawned(NpcSpawned event)\n    {\n        switch (event.getNpc().getId())\n        {\n            case NYLO_MELEE_SMALL_HM:\n            case NYLO_MELEE_SMALL_AGRO_HM:\n            case NYLO_MELEE_BIG_HM:\n            case NYLO_MELEE_BIG_AGRO_HM:\n            case NYLO_RANGE_SMALL_HM:\n            case NYLO_RANGE_SMALL_AGRO_HM:\n            case NYLO_RANGE_BIG_HM:\n            case NYLO_RANGE_BIG_AGRO_HM:\n            case NYLO_MAGE_SMALL_HM:\n            case NYLO_MAGE_SMALL_AGRO_HM:\n            case NYLO_MAGE_BIG_HM:\n            case NYLO_MAGE_BIG_AGRO_HM:\n                if (!hard)\n                {\n                    clog.addLine(IS_HARD_MODE);\n                }\n                hard \u003d true;\n            case NYLO_MELEE_SMALL_SM:\n            case NYLO_MELEE_SMALL_AGRO_SM:\n            case NYLO_MELEE_BIG_SM:\n            case NYLO_MELEE_BIG_AGRO_SM:\n            case NYLO_RANGE_SMALL_SM:\n            case NYLO_RANGE_SMALL_AGRO_SM:\n            case NYLO_RANGE_BIG_SM:\n            case NYLO_RANGE_BIG_AGRO_SM:\n            case NYLO_MAGE_SMALL_SM:\n            case NYLO_MAGE_SMALL_AGRO_SM:\n            case NYLO_MAGE_BIG_SM:\n            case NYLO_MAGE_BIG_AGRO_SM:\n                if (!hard)\n                {\n                    if (!story)\n                    {\n                        clog.addLine(IS_STORY_MODE);\n                    }\n                }\n                story \u003d true;\n            case NYLO_MELEE_BIG:\n            case NYLO_MELEE_BIG_AGRO:\n            case NYLO_RANGE_BIG:\n            case NYLO_RANGE_BIG_AGRO:\n            case NYLO_MAGE_BIG:\n            case NYLO_MAGE_BIG_AGRO:\n            case NYLO_MELEE_SMALL:\n            case NYLO_MELEE_SMALL_AGRO:\n            case NYLO_RANGE_SMALL:\n            case NYLO_RANGE_SMALL_AGRO:\n            case NYLO_MAGE_SMALL:\n            case NYLO_MAGE_SMALL_AGRO:\n                if(pillarsSpawnedTick \u003d\u003d -1)\n                {\n                    startNylo();\n                }\n                NylocasShell cShell \u003d new NylocasShell(event.getNpc().getId(), event.getNpc().getWorldLocation().getRegionX(), event.getNpc().getWorldLocation().getRegionY());\n                if (cShell.isBig())\n                {\n                    bigDescription.put(event.getNpc().getIndex(), \"W\" + (currentWave + 1) + \" \" + cShell.getDescription());\n                }\n                if (cShell.position !\u003d NylocasData.NyloPosition.ROOM)\n                {\n                    buildWave.add(cShell);\n                    plugin.liveFrame.getPanel(getName()).addNPCMapping(event.getNpc().getIndex(), \"W\" + (currentWave + 1) + \" \" + cShell.getDescription());\n                    clog.addLine(ADD_NPC_MAPPING, String.valueOf(event.getNpc().getIndex()), \"W\" + (currentWave + 1) + \" \" + cShell.getDescription());\n                } else\n                {\n                    int matches \u003d 0;\n                    String lastMatchedDescription \u003d \"\";\n                    for (NPC npc : bigsDeadThisTick)\n                    {\n                        int bigX \u003d npc.getWorldLocation().getRegionX();\n                        int bigY \u003d npc.getWorldLocation().getRegionY();\n                        int littleX \u003d event.getNpc().getWorldLocation().getRegionX();\n                        int littleY \u003d event.getNpc().getWorldLocation().getRegionY();\n                        if ((bigX \u003d\u003d littleX \u0026\u0026 bigY \u003d\u003d littleY) || (littleX - 1 \u003d\u003d bigX || littleY - 1 \u003d\u003d bigY))\n                        {\n                            matches++;\n                            lastMatchedDescription \u003d bigDescription.get(npc.getIndex());\n                        }\n                    }\n                    if (matches \u003d\u003d 1)\n                    {\n                        clog.addLine(ADD_NPC_MAPPING, String.valueOf(event.getNpc().getIndex()), NylocasShell.getTypeName(event.getNpc().getId()) + \" split from \" + lastMatchedDescription + \"(on w\" + currentWave + \")\");\n                        plugin.liveFrame.getPanel(getName()).addNPCMapping(event.getNpc().getIndex(), NylocasShell.getTypeName(event.getNpc().getId()) + \" split from \" + lastMatchedDescription + \"(on w\" + currentWave + \")\");\n                    }\n                    switch (event.getNpc().getId())\n                    {\n                        case NYLO_MELEE_SMALL:\n                        case NYLO_MELEE_SMALL_AGRO:\n                        case NYLO_MELEE_SMALL_HM:\n                        case NYLO_MELEE_SMALL_AGRO_HM:\n                        case NYLO_MELEE_SMALL_SM:\n                        case NYLO_MELEE_SMALL_AGRO_SM:\n                            clog.addLine(MELEE_SPLIT, String.valueOf(currentWave), String.valueOf(client.getTickCount() - pillarsSpawnedTick));\n                            break;\n                        case NYLO_RANGE_SMALL:\n                        case NYLO_RANGE_SMALL_AGRO:\n                        case NYLO_RANGE_SMALL_HM:\n                        case NYLO_RANGE_SMALL_AGRO_HM:\n                        case NYLO_RANGE_SMALL_SM:\n                        case NYLO_RANGE_SMALL_AGRO_SM:\n                            clog.addLine(RANGE_SPLIT, String.valueOf(currentWave), String.valueOf(client.getTickCount() - pillarsSpawnedTick));\n                            break;\n                        case NYLO_MAGE_SMALL:\n                        case NYLO_MAGE_SMALL_AGRO:\n                        case NYLO_MAGE_SMALL_HM:\n                        case NYLO_MAGE_SMALL_AGRO_HM:\n                        case NYLO_MAGE_SMALL_SM:\n                        case NYLO_MAGE_SMALL_AGRO_SM:\n                            clog.addLine(MAGE_SPLIT, String.valueOf(currentWave), String.valueOf(client.getTickCount() - pillarsSpawnedTick));\n                            break;\n                    }\n                }\n                nylosAlive.add(event.getNpc());\n                break;\n            case NYLO_BOSS_MELEE:\n            case NYLO_BOSS_RANGE:\n            case NYLO_BOSS_MAGE:\n            case NYLO_BOSS_MELEE_HM:\n            case NYLO_BOSS_RANGE_HM:\n            case NYLO_BOSS_MAGE_HM:\n            case NYLO_BOSS_MELEE_SM:\n            case NYLO_BOSS_RANGE_SM:\n            case NYLO_BOSS_MAGE_SM:\n                bossSpawned();\n                if(pillarsSpawnedTick \u003d\u003d -1)\n                {\n                    startNylo();\n                }\n                break;\n            case NYLO_PILLAR:\n            case NYLO_PILLAR_HM:\n            case NYLO_PILLAR_SM:\n                if (pillarsSpawnedTick \u003d\u003d -1)\n                {\n                    startNylo();\n                }\n                break;\n            case NYLO_PRINKIPAS_DROPPING:\n                break;\n            case NYLO_PRINKIPAS_MELEE:\n            case NYLO_PRINKIPAS_MAGIC:\n            case NYLO_PRINKIPAS_RANGE:\n                nylosAlive.add(event.getNpc());\n                break;\n\n        }\n    }\n\n    public void updateNpcDespawned(NpcDespawned event)\n    {\n        switch (event.getNpc().getId())\n        {\n            case NYLO_PILLAR:\n            case NYLO_PILLAR_HM:\n            case NYLO_PILLAR_SM:\n                clog.addLine(NYLO_PILLAR_DESPAWNED, String.valueOf(client.getTickCount() - pillarsSpawnedTick));\n                break;\n            case NYLO_BOSS_MELEE:\n            case NYLO_BOSS_RANGE:\n            case NYLO_BOSS_MAGE:\n            case NYLO_BOSS_MELEE_HM:\n            case NYLO_BOSS_RANGE_HM:\n            case NYLO_BOSS_MAGE_HM:\n            case NYLO_BOSS_MELEE_SM:\n            case NYLO_BOSS_RANGE_SM:\n            case NYLO_BOSS_MAGE_SM:\n            {\n                bossKilled();\n            }\n            break;\n            case NYLO_MELEE_BIG:\n            case NYLO_MELEE_BIG_AGRO:\n            case NYLO_MAGE_BIG:\n            case NYLO_MAGE_BIG_AGRO:\n            case NYLO_RANGE_BIG:\n            case NYLO_RANGE_BIG_AGRO:\n            case NYLO_MELEE_BIG_HM:\n            case NYLO_MELEE_BIG_AGRO_HM:\n            case NYLO_RANGE_BIG_HM:\n            case NYLO_RANGE_BIG_AGRO_HM:\n            case NYLO_MAGE_BIG_HM:\n            case NYLO_MAGE_BIG_AGRO_HM:\n            case NYLO_MELEE_BIG_SM:\n            case NYLO_MELEE_BIG_AGRO_SM:\n            case NYLO_RANGE_BIG_SM:\n            case NYLO_RANGE_BIG_AGRO_SM:\n            case NYLO_MAGE_BIG_SM:\n            case NYLO_MAGE_BIG_AGRO_SM:\n                bigsDeadThisTick.add(event.getNpc());\n            case NYLO_MELEE_SMALL_HM:\n            case NYLO_MELEE_SMALL_AGRO_HM:\n            case NYLO_RANGE_SMALL_HM:\n            case NYLO_RANGE_SMALL_AGRO_HM:\n            case NYLO_MAGE_SMALL_HM:\n            case NYLO_MAGE_SMALL_AGRO_HM:\n            case NYLO_MELEE_SMALL_SM:\n            case NYLO_MELEE_SMALL_AGRO_SM:\n            case NYLO_RANGE_SMALL_SM:\n            case NYLO_RANGE_SMALL_AGRO_SM:\n            case NYLO_MAGE_SMALL_SM:\n            case NYLO_MAGE_SMALL_AGRO_SM:\n            case NYLO_MELEE_SMALL:\n            case NYLO_MELEE_SMALL_AGRO:\n            case NYLO_RANGE_SMALL:\n            case NYLO_RANGE_SMALL_AGRO:\n            case NYLO_MAGE_SMALL:\n            case NYLO_MAGE_SMALL_AGRO:\n            case NYLO_PRINKIPAS_DROPPING:\n            case NYLO_PRINKIPAS_MELEE:\n            case NYLO_PRINKIPAS_MAGIC:\n            case NYLO_PRINKIPAS_RANGE:\n                nylosAlive.remove(event.getNpc());\n                if (nylosAlive.isEmpty() \u0026\u0026 NylocasWaveMatcher.getWave().getWave() \u003d\u003d 31)\n                {\n                    cleanupOver();\n                }\n                break;\n            default:\n                break;\n        }\n    }\n\n    /**\n     * Handles saving data about boss phases.\n     *\n     * @param id ID of new form\n     */\n    public void handleNPCChanged(int id)\n    {\n        switch (id)\n        {\n            case NYLO_BOSS_MELEE:\n            case NYLO_BOSS_MELEE_HM:\n            case NYLO_BOSS_MELEE_SM:\n                clog.addLine(MELEE_PHASE, String.valueOf(client.getTickCount() - pillarsSpawnedTick));\n                plugin.addDelayedLine(TOBRoom.NYLOCAS, client.getTickCount() - pillarsSpawnedTick, \"Phase\");\n                break;\n            case NYLO_BOSS_MAGE:\n            case NYLO_BOSS_MAGE_HM:\n            case NYLO_BOSS_MAGE_SM:\n                clog.addLine(MAGE_PHASE, String.valueOf(client.getTickCount() - pillarsSpawnedTick));\n                plugin.addDelayedLine(TOBRoom.NYLOCAS, client.getTickCount() - pillarsSpawnedTick, \"Phase\");\n                break;\n            case NYLO_BOSS_RANGE:\n            case NYLO_BOSS_RANGE_HM:\n            case NYLO_BOSS_RANGE_SM:\n                clog.addLine(RANGE_PHASE, String.valueOf(client.getTickCount() - pillarsSpawnedTick));\n                plugin.addDelayedLine(TOBRoom.NYLOCAS, client.getTickCount() - pillarsSpawnedTick, \"Phase\");\n                break;\n        }\n    }\n\n    private void startNylo()\n    {\n        if (client.getNpcs().stream().anyMatch(p -\u003e Objects.requireNonNull(p.getName()).toLowerCase().contains(\"nylo\")))\n        {\n            accurateEntry \u003d false;\n        }\n        else\n        {\n            clog.addLine(ACCURATE_NYLO_START);\n        }\n        clog.addLine(NYLO_PILLAR_SPAWN);\n        roomState \u003d WAVES;\n        pillarsSpawnedTick \u003d client.getTickCount();\n        roomStartTick \u003d client.getTickCount();\n    }\n\n    private void wave1Spawn()\n    {\n        instanceReference \u003d client.getTickCount();\n        entryTickOffset \u003d (instanceReference - pillarsSpawnedTick - 4);\n    }\n\n    private void wave31Spawn()\n    {\n        clog.addLine(LAST_WAVE, String.valueOf(client.getTickCount() - pillarsSpawnedTick));\n        roomState \u003d CLEANUP;\n        int stalls \u003d (client.getTickCount() - pillarsSpawnedTick - entryTickOffset - 236) / 4;\n        wave31 \u003d client.getTickCount();\n        sendTimeMessage(\"Wave \u0027Nylocas last wave\u0027 complete! Duration: \", wave31 - pillarsSpawnedTick, \" Stalls: \", stalls);\n    }\n\n    private void cleanupOver()\n    {\n        roomState \u003d WAITING_FOR_BOSS;\n        lastDead \u003d client.getTickCount();\n        clog.addLine(ACCURATE_NYLO_END);\n        clog.addLine(LAST_DEAD, String.valueOf(lastDead - pillarsSpawnedTick));\n        sendTimeMessage(\"Wave \u0027Nylocas waves and cleanup\u0027 complete! Duration: \", lastDead - pillarsSpawnedTick, lastDead - wave31);\n    }\n\n    private void bossSpawned()\n    {\n        clog.addLine(BOSS_SPAWN, String.valueOf(client.getTickCount() - pillarsSpawnedTick));\n        roomState \u003d BOSS;\n        bossSpawn \u003d client.getTickCount() - 2;\n        plugin.addDelayedLine(TOBRoom.NYLOCAS, client.getTickCount() - pillarsSpawnedTick - 2, \"W\" + currentWave);\n        sendTimeMessage(\"Wave \u0027Nylocas boss spawn\u0027 complete! Duration: \", bossSpawn - pillarsSpawnedTick, bossSpawn - lastDead);\n    }\n\n    private void bossKilled()\n    {\n        roomState \u003d FINISHED;\n        int deathTick \u003d client.getTickCount();\n        int offset1 \u003d 4 - ((deathTick - instanceReference) % 4);\n        if ((4 - ((deathTick - instanceReference) % 4) \u003d\u003d 4))\n        {\n            offset1 \u003d 0;\n        }\n        plugin.liveFrame.setNyloFinished(deathTick - pillarsSpawnedTick + offset1);\n        sendTimeMessage(\"Wave \u0027Nylocas boss\u0027 complete! Duration: \", deathTick - pillarsSpawnedTick + offset1, deathTick + offset1 - bossSpawn, false);\n        clog.addLine(NYLO_DESPAWNED, String.valueOf(deathTick - pillarsSpawnedTick + offset1));\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\rooms\\tob\\NyloHandler.java"},{"fileName":"RoomHandler.java","content":"package com.advancedraidtracker.rooms.tob;\n\n\nimport com.advancedraidtracker.AdvancedRaidTrackerConfig;\nimport com.advancedraidtracker.utility.datautility.DataWriter;\nimport lombok.Getter;\nimport lombok.Setter;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.events.*;\nimport com.advancedraidtracker.utility.RoomUtil;\n\npublic class RoomHandler\n{\n    protected Client client;\n    protected DataWriter clog;\n    public int roomStartTick \u003d -1;\n\n    private final AdvancedRaidTrackerConfig config;\n    protected boolean accurateTimer \u003d true;\n    protected boolean accurateEntry \u003d true;\n    @Getter\n    @Setter\n    int scale;\n\n    protected String defaultColor()\n    {\n        return (client.isResized()) ? \"\u003ccol\u003dFFFFFF\u003e\" : \"\u003ccol\u003d000000\u003e\";\n    }\n\n    protected String timeColor()\n    {\n        return \"\u003ccol\u003dEF1020\u003e\";\n    }\n\n    public RoomHandler(Client client, DataWriter clog, AdvancedRaidTrackerConfig config)\n    {\n        this.client \u003d client;\n        this.clog \u003d clog;\n        this.config \u003d config;\n    }\n\n    private String accuracy()\n    {\n        return (accurateTimer) ? \"\" : \"**\";\n    }\n\n    private String entry()\n    {\n        return (accurateEntry) ? \"\" : \"*\";\n    }\n\n    protected void sendTimeMessage(String message, int duration)\n    {\n        if (config.chatSplits())\n        {\n            String splitMessage \u003d message + timeColor() + RoomUtil.time(duration) + entry() + accuracy();\n            client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", splitMessage, null, false);\n        }\n    }\n\n    protected void sendTimeMessage(String message, int duration, int split)\n    {\n        if (config.chatSplits())\n        {\n            String splitMessage \u003d message + timeColor() + RoomUtil.time(duration) + entry() + accuracy() + \" (\" + RoomUtil.time(split) + \")\";\n            client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", splitMessage, null, false);\n        }\n    }\n\n    protected void sendTimeMessage(String message, int duration, int split, boolean bloat)\n    {\n        if (config.chatSplits())\n        {\n            String splitMessage;\n            if (bloat)\n            {\n                splitMessage \u003d message + timeColor() + duration + entry() + accuracy() + \" (\" + RoomUtil.time(split) + \")\";\n            } else\n            {\n                splitMessage \u003d message + timeColor() + RoomUtil.time(split) + entry() + accuracy() + defaultColor() + \" Room time: \" + timeColor() + RoomUtil.time(duration);\n            }\n            client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", splitMessage, null, false);\n        }\n    }\n\n    protected void sendTimeMessage(String message, int duration, int split, boolean bloat, String alternate)\n    {\n        if (config.chatSplits())\n        {\n            String splitMessage;\n            if (bloat)\n            {\n                splitMessage \u003d message + timeColor() + duration + entry() + accuracy() + \" (\" + RoomUtil.time(split) + \")\" + defaultColor() + alternate;\n            } else\n            {\n                splitMessage \u003d message + timeColor() + RoomUtil.time(split) + entry() + accuracy() + defaultColor() + \" Room time: \" + timeColor() + RoomUtil.time(duration) + defaultColor() + alternate;\n            }\n            client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", splitMessage, null, false);\n        }\n    }\n\n    protected void sendTimeMessage(String message, int duration, String alternateText, int alternateNumber)\n    {\n        if (config.chatSplits())\n        {\n            String splitMessage \u003d message + timeColor() + RoomUtil.time(duration) + entry() + accuracy() + defaultColor() + alternateText + timeColor() + alternateNumber;\n            client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", splitMessage, null, false);\n        }\n    }\n\n\n    protected void sendTimeMessage(String message, int duration, String alternateText, int alternateNumber, boolean bloat)\n    {\n        if (config.chatSplits())\n        {\n            String splitMessage \u003d message + timeColor() + duration + entry() + accuracy() + alternateText + RoomUtil.time(alternateNumber);\n            client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", splitMessage, null, false);\n        }\n    }\n\n    public void handleNPCChanged(int id)\n    {\n    }\n\n    public void updateNpcSpawned(NpcSpawned event)\n    {\n    }\n\n    public void updateNpcDespawned(NpcDespawned event)\n    {\n    }\n\n    public void updateOverheadText(OverheadTextChanged event)\n    {\n    }\n\n    public void updateGameTick(GameTick event)\n    {\n    }\n\n    public void updateItemSpawned(ItemSpawned event)\n    {\n\n    }\n\n    public void updateAnimationChanged(AnimationChanged event)\n    {\n    }\n\n    public void updateInteractingChanged(InteractingChanged event)\n    {\n    }\n\n    public void updateHitsplatApplied(HitsplatApplied event)\n    {\n    }\n\n    public void updateGraphicChanged(GraphicChanged event)\n    {\n    }\n\n    public void updateProjectileMoved(ProjectileMoved event)\n    {\n    }\n\n    public void updateGraphicsObjectCreated(GraphicsObjectCreated event)\n    {\n    }\n\n    public void updateGameObjectSpawned(GameObjectSpawned event)\n    {\n    }\n\n    public void updateGameObjectDespawned(GameObjectDespawned event)\n    {\n    }\n\n    public void updateGroundObjectSpawned(GroundObjectSpawned event)\n    {\n\n    }\n\n    public String getName()\n    {\n        return \"\";\n    }\n\n    public boolean isActive()\n    {\n        return false;\n    }\n\n    public void reset()\n    {\n        roomStartTick \u003d -1;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\rooms\\tob\\RoomHandler.java"},{"fileName":"SotetsegHandler.java","content":"package com.advancedraidtracker.rooms.tob;\n\nimport com.advancedraidtracker.AdvancedRaidTrackerConfig;\nimport com.advancedraidtracker.AdvancedRaidTrackerPlugin;\nimport com.advancedraidtracker.constants.LogID;\nimport com.advancedraidtracker.constants.TOBRoom;\nimport com.advancedraidtracker.utility.Point;\nimport com.advancedraidtracker.utility.datautility.DataWriter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Player;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.*;\nimport com.advancedraidtracker.utility.RoomState;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport static com.advancedraidtracker.constants.TobIDs.*;\n\n@Slf4j\npublic class SotetsegHandler extends RoomHandler\n{\n    public RoomState.SotetsegRoomState roomState \u003d RoomState.SotetsegRoomState.NOT_STARTED;\n    private int soteEntryTick \u003d -1;\n    private int soteFirstMazeStart \u003d -1;\n    private int soteSecondMazeStart \u003d -1;\n    private int soteFirstMazeEnd \u003d -1;\n    private int soteSecondMazeEnd \u003d -1;\n    private int soteDeathTick \u003d -1;\n    private int deferTick \u003d -1;\n    private int lastRegion \u003d -1;\n    private final AdvancedRaidTrackerPlugin plugin;\n    private boolean hasSteppedOnMaze \u003d false;\n    private String firstMazeChosen \u003d \"\";\n    private String secondMazeChosen \u003d \"\";\n    private String lastChosen \u003d \"\";\n    private final Map\u003cString, ArrayList\u003cPoint\u003e\u003e playerTiles \u003d new HashMap\u003c\u003e();\n\n    private ArrayList\u003cPoint\u003e excludedTiles \u003d new ArrayList\u003c\u003e();\n    private final AdvancedRaidTrackerConfig config;\n\n    public SotetsegHandler(Client client, DataWriter clog, AdvancedRaidTrackerConfig config, AdvancedRaidTrackerPlugin plugin)\n    {\n        super(client, clog, config);\n        this.plugin \u003d plugin;\n        this.config \u003d config;\n    }\n\n    public boolean isActive()\n    {\n        return !(roomState \u003d\u003d RoomState.SotetsegRoomState.NOT_STARTED || roomState \u003d\u003d RoomState.SotetsegRoomState.FINISHED);\n    }\n\n    public String getName()\n    {\n        return \"Sotetseg\";\n    }\n\n    public void reset()\n    {\n        super.reset();\n        playerTiles.clear();\n        lastChosen \u003d \"\";\n        excludedTiles.clear();\n        accurateTimer \u003d true;\n        soteEntryTick \u003d -1;\n        roomState \u003d RoomState.SotetsegRoomState.NOT_STARTED;\n        soteFirstMazeStart \u003d -1;\n        soteSecondMazeStart \u003d -1;\n        soteFirstMazeEnd \u003d -1;\n        soteSecondMazeEnd \u003d -1;\n        soteDeathTick \u003d -1;\n        lastRegion \u003d -1;\n        hasSteppedOnMaze \u003d false;\n        firstMazeChosen \u003d \"\";\n        secondMazeChosen \u003d \"\";\n    }\n\n    public void updateNpcSpawned(NpcSpawned event)\n    {\n        int id \u003d event.getNpc().getId();\n        if (id \u003d\u003d SOTETSEG_ACTIVE || id \u003d\u003d SOTETSEG_ACTIVE_HM || id \u003d\u003d SOTETSEG_ACTIVE_SM)\n        {\n            if (lastRegion \u003d\u003d SOTETSEG_UNDERWORLD)\n            {\n                if (roomState \u003d\u003d RoomState.SotetsegRoomState.MAZE_1)\n                {\n                    endFirstMaze();\n                } else if (roomState \u003d\u003d RoomState.SotetsegRoomState.MAZE_2)\n                {\n                    endSecondMaze();\n                }\n            }\n        }\n    }\n\n    private ArrayList\u003cPoint\u003e currentMaze \u003d new ArrayList\u003c\u003e();\n\n    public void updateGroundObjectSpawned(GroundObjectSpawned event)\n    {\n        if(!hasSteppedOnMaze)\n        {\n            if (event.getGroundObject().getId() \u003d\u003d SOTETSEG_RED_TILE \u0026\u0026 lastRegion \u003d\u003d SOTETSEG_OVERWORLD)\n            {\n                hasSteppedOnMaze \u003d true;\n                int ticksSinceLastProc \u003d -1;\n                if(roomState \u003d\u003d RoomState.SotetsegRoomState.MAZE_1)\n                {\n                    ticksSinceLastProc \u003d client.getTickCount()-soteFirstMazeStart;\n                }\n                else\n                {\n                    if(roomState \u003d\u003d RoomState.SotetsegRoomState.MAZE_2)\n                    {\n                        ticksSinceLastProc \u003d client.getTickCount()-soteSecondMazeStart;\n                    }\n                }\n                if(ticksSinceLastProc !\u003d -1 \u0026\u0026 lastRegion \u003d\u003d SOTETSEG_OVERWORLD)\n                {\n                    int distance \u003d Math.abs(event.getGroundObject().getWorldLocation().getRegionX()-15);\n                    int stallDuration \u003d 5;\n                    int tickOffset \u003d 1 + stallDuration + (int)((distance-0.5)/2.0);\n                    if(ticksSinceLastProc \u003e tickOffset \u0026\u0026 config.showMistakesInChat())\n                    {\n                        String mazeRunner \u003d (roomState\u003d\u003d RoomState.SotetsegRoomState.MAZE_1) ? firstMazeChosen : secondMazeChosen;\n                        plugin.sendChatMessage(mazeRunner + \" was late to first tile by \" + (ticksSinceLastProc-tickOffset) + \" ticks\");\n                    }\n                }\n            }\n        }\n        if (event.getGroundObject().getId() \u003d\u003d SOTETSEG_RED_TILE \u0026\u0026 lastRegion \u003d\u003d SOTETSEG_OVERWORLD)\n        {\n            int currentTileX \u003d event.getGroundObject().getWorldLocation().getRegionX();\n            int currentTileY \u003d event.getGroundObject().getWorldLocation().getRegionY();\n            currentMaze.add(new Point(currentTileX, currentTileY));\n        }\n    }\n\n    private static ArrayList\u003cPoint\u003e removeDuplicatePoints(ArrayList\u003cPoint\u003e tiles)\n    {\n        ArrayList\u003cPoint\u003e newTiles \u003d new ArrayList\u003c\u003e();\n        Point old \u003d null;\n        for(Point p : tiles)\n        {\n            if(old !\u003d null)\n            {\n                if(!(p.getX() \u003d\u003d old.getX() \u0026\u0026 p.getY() \u003d\u003d old.getY()))\n                {\n                    newTiles.add(p);\n                }\n            }\n            else\n            {\n                newTiles.add(p);\n            }\n            old \u003d p;\n        }\n        return newTiles;\n    }\n\n    private ArrayList\u003cPoint\u003e addEveryTileBetween(ArrayList\u003cPoint\u003e tiles)\n    {\n        ArrayList\u003cPoint\u003e allTiles \u003d new ArrayList\u003c\u003e();\n        Point previous \u003d null;\n        for(Point p : tiles)\n        {\n            if(previous !\u003d null)\n            {\n                allTiles.addAll(everyTileBetween(previous, p));\n            }\n            previous \u003d p;\n        }\n        return removeDuplicatePoints(allTiles);\n    }\n    public static ArrayList\u003cPoint\u003e everyTileBetween(Point start, Point end)\n    {\n        if(end.getY() \u003c start.getY())\n        {\n            return new ArrayList\u003c\u003e();\n        }\n        ArrayList\u003cPoint\u003e crossTiles \u003d new ArrayList\u003c\u003e();\n        crossTiles.add(start);\n        while (Math.abs(end.getX() - crossTiles.get(crossTiles.size() - 1).getX()) !\u003d end.getY() - crossTiles.get(crossTiles.size() - 1).getY())\n        {\n            if(crossTiles.size() \u003e 1000)\n            {\n                return new ArrayList\u003c\u003e();\n            }\n            if (Math.abs(end.getX() - start.getX()) \u003e end.getY() - start.getY())\n            {\n                int offset \u003d (end.getX() - start.getX() \u003e 0) ? 1 : -1;\n                crossTiles.add(new Point(crossTiles.get(crossTiles.size() - 1).getX() + offset, crossTiles.get(crossTiles.size() - 1).getY()));\n            } else if (end.getY() - start.getY() \u003e Math.abs(end.getX() - start.getX()))\n            {\n                crossTiles.add(new Point(crossTiles.get(crossTiles.size() - 1).getX(), crossTiles.get(crossTiles.size() - 1).getY() + 1));\n            }\n        }\n        while (end.getX() !\u003d crossTiles.get(crossTiles.size() - 1).getX() \u0026\u0026 end.getY() !\u003d crossTiles.get(crossTiles.size() - 1).getY())\n        {\n            int offset \u003d (end.getX() - crossTiles.get(crossTiles.size()-1).getX() \u003e 0) ? 1 : -1;\n            crossTiles.add(new Point(crossTiles.get(crossTiles.size() - 1).getX() + offset, crossTiles.get(crossTiles.size() - 1).getY() + 1));\n        }\n        return crossTiles;\n    }\n\n    public void updateAnimationChanged(AnimationChanged event)\n    {\n        if (event.getActor().getAnimation() \u003d\u003d SOTETSEG_DEATH_ANIMATION)\n        {\n            endSotetseg();\n        }\n    }\n\n    public void startSotetseg()\n    {\n        soteEntryTick \u003d client.getTickCount();\n        roomStartTick \u003d client.getTickCount();\n        deferTick \u003d soteEntryTick + 2;\n        roomState \u003d RoomState.SotetsegRoomState.PHASE_1;\n        clog.addLine(LogID.SOTETSEG_STARTED);\n    }\n\n    public void endSotetseg()\n    {\n        plugin.addDelayedLine(TOBRoom.SOTETSEG, client.getTickCount() - soteEntryTick, \"Dead\");\n        soteDeathTick \u003d client.getTickCount() + SOTETSEG_DEATH_ANIMATION_LENGTH;\n        roomState \u003d RoomState.SotetsegRoomState.FINISHED;\n        clog.addLine(LogID.ACCURATE_SOTE_END);\n        clog.addLine(LogID.SOTETSEG_ENDED, String.valueOf(soteDeathTick - soteEntryTick));\n        plugin.liveFrame.setSoteFinished(soteDeathTick - soteEntryTick);\n        sendTimeMessage(\"Wave \u0027Sotetseg phase 3\u0027 complete. Duration: \", soteDeathTick - soteEntryTick, soteDeathTick - soteSecondMazeEnd, false);\n    }\n\n    public void startFirstMaze()\n    {\n        startEitherMaze();\n        lastChosen \u003d \"\";\n        excludedTiles.clear();\n        currentMaze.clear();\n        firstMazeChosen \u003d \"\";\n        hasSteppedOnMaze \u003d false;\n        soteFirstMazeStart \u003d client.getTickCount();\n        clog.addLine(LogID.SOTETSEG_FIRST_MAZE_STARTED, String.valueOf(soteFirstMazeStart - soteEntryTick));\n        roomState \u003d RoomState.SotetsegRoomState.MAZE_1;\n        sendTimeMessage(\"Wave \u0027Sotetseg phase 1\u0027 complete. Duration: \", soteFirstMazeStart - soteEntryTick);\n        plugin.addDelayedLine(TOBRoom.SOTETSEG, soteFirstMazeStart - soteEntryTick, \"Maze1 Start\");\n    }\n\n    public void startEitherMaze()\n    {\n        playerTiles.clear();\n        for(String s : plugin.currentPlayers)\n        {\n            playerTiles.put(s, new ArrayList\u003c\u003e());\n        }\n    }\n\n    public void endFirstMaze()\n    {\n        endEitherMaze();\n        soteFirstMazeEnd \u003d client.getTickCount();\n        clog.addLine(LogID.SOTETSEG_FIRST_MAZE_ENDED, String.valueOf(soteFirstMazeEnd - soteEntryTick));\n        roomState \u003d RoomState.SotetsegRoomState.PHASE_2;\n        sendTimeMessage(\"Wave \u0027Sotetseg maze 1\u0027 complete. Duration: \", soteFirstMazeEnd - soteEntryTick, soteFirstMazeEnd - soteFirstMazeStart);\n        plugin.addDelayedLine(TOBRoom.SOTETSEG, soteFirstMazeEnd - soteEntryTick, \"Maze1 End\");\n    }\n\n    public void startSecondMaze()\n    {\n        startEitherMaze();\n        lastChosen \u003d \"\";\n        excludedTiles.clear();\n        currentMaze.clear();\n        secondMazeChosen \u003d \"\";\n        hasSteppedOnMaze \u003d false;\n        soteSecondMazeStart \u003d client.getTickCount();\n        clog.addLine(LogID.SOTETSEG_SECOND_MAZE_STARTED, String.valueOf(soteSecondMazeStart - soteEntryTick));\n        roomState \u003d RoomState.SotetsegRoomState.MAZE_2;\n        sendTimeMessage(\"Wave \u0027Sotetseg phase 2\u0027 complete. Duration: \", soteSecondMazeStart - soteEntryTick, soteSecondMazeStart - soteFirstMazeEnd);\n        plugin.addDelayedLine(TOBRoom.SOTETSEG, soteSecondMazeStart - soteEntryTick, \"Maze2 Start\");\n    }\n    private static ArrayList\u003cPoint\u003e filterMaze(ArrayList\u003cPoint\u003e tiles)\n    {\n        ArrayList\u003cPoint\u003e filteredTiles \u003d new ArrayList\u003c\u003e();\n        for (Point p : tiles)\n        {\n            if (p.getY() % 2 \u003d\u003d 0)\n            {\n                filteredTiles.add(p);\n            }\n        }\n        return filteredTiles;\n    }\n\n    public ArrayList\u003cPoint\u003e findOverlappingTiles(ArrayList\u003cPoint\u003e tiles1, ArrayList\u003cPoint\u003e tiles2)\n    {\n        ArrayList\u003cPoint\u003e overlap \u003d new ArrayList\u003c\u003e();\n        for(Point p1 : tiles1)\n        {\n            for(Point p2 : tiles2)\n            {\n                if(p1.getX() \u003d\u003d p2.getX() \u0026\u0026 p1.getY() \u003d\u003d p2.getY())\n                {\n                    overlap.add(p1);\n                }\n            }\n        }\n        return overlap;\n    }\n\n    public ArrayList\u003cPoint\u003e findNonOverlappingTiles(ArrayList\u003cPoint\u003e tiles1, ArrayList\u003cPoint\u003e tiles2)\n    {\n        ArrayList\u003cPoint\u003e nonOverlappedTiles \u003d new ArrayList\u003c\u003e();\n        for(Point p1 : tiles1)\n        {\n            boolean found \u003d false;\n            for(Point p2 : tiles2)\n            {\n                if (p2.getX() \u003d\u003d p1.getX() \u0026\u0026 p2.getY() \u003d\u003d p1.getY())\n                {\n                    found \u003d true;\n                    break;\n                }\n            }\n            if(!found)\n            {\n                nonOverlappedTiles.add(p1);\n            }\n        }\n        return nonOverlappedTiles;\n    }\n\n    public void endEitherMaze()\n    {\n        if(!currentMaze.isEmpty())\n        {\n            if(currentMaze.get(currentMaze.size()-1).getY() \u003d\u003d 35)\n            {\n                currentMaze.add(new Point(currentMaze.get(currentMaze.size()-1).getX(), 37));\n            }\n        }\n        currentMaze \u003d removeDuplicatePoints(currentMaze);\n        currentMaze \u003d addEveryTileBetween(currentMaze);\n        ArrayList\u003cPoint\u003e overlap \u003d removeDuplicatePoints(findOverlappingTiles(currentMaze, excludedTiles));\n        ArrayList\u003cPoint\u003e nonoverlap \u003d removeDuplicatePoints(findNonOverlappingTiles(excludedTiles, currentMaze));\n        if(!overlap.isEmpty() \u0026\u0026 config.showMistakesInChat())\n        {\n            plugin.sendChatMessage(lastChosen + \" ragged \" + overlap.size() + \" while running the maze\");\n        }\n        if(!nonoverlap.isEmpty() \u0026\u0026 config.showMistakesInChat())\n        {\n            plugin.sendChatMessage(\"Players following the maze ragged \" + nonoverlap.size() + \" tiles\");\n        }\n        currentMaze \u003d filterMaze(currentMaze);\n        excludedTiles \u003d removeDuplicatePoints(excludedTiles);\n        playerTiles.replaceAll((s, v) -\u003e addEveryTileBetween(removeDuplicatePoints(v)));\n        for(String s : playerTiles.keySet())\n        {\n            int ragged \u003d 0;\n            for(Point tile : playerTiles.get(s))\n            {\n                for(Point raggedTile : nonoverlap)\n                {\n                    if(tile.getX() \u003d\u003d raggedTile.getX() \u0026\u0026 tile.getY() \u003d\u003d raggedTile.getY())\n                    {\n                        ragged++;\n                    }\n                }\n            }\n            if(ragged \u003e 0)\n            {\n                plugin.sendChatMessage(s + \" ragged \" + ragged + \" tiles\");\n            }\n        }\n    }\n\n    public void endSecondMaze()\n    {\n        endEitherMaze();\n        soteSecondMazeEnd \u003d client.getTickCount();\n        clog.addLine(LogID.SOTETSEG_SECOND_MAZE_ENDED, String.valueOf(soteSecondMazeEnd - soteEntryTick));\n        roomState \u003d RoomState.SotetsegRoomState.PHASE_3;\n        sendTimeMessage(\"Wave \u0027Sotetseg maze 2\u0027 complete. Duration: \", soteSecondMazeEnd - soteEntryTick, soteSecondMazeEnd - soteSecondMazeStart);\n        plugin.addDelayedLine(TOBRoom.SOTETSEG, soteSecondMazeEnd - soteEntryTick, \"Maze2 End\");\n    }\n\n    public String getAboveWorldChosen()\n    {\n        for(String playerName : plugin.currentPlayers)\n        {\n            boolean found \u003d false;\n            for(Player player : client.getPlayers())\n            {\n                if(playerName.equals(player.getName()))\n                {\n                    found \u003d true;\n                }\n            }\n            if(!found)\n            {\n                return playerName;\n            }\n        }\n        return \"\";\n    }\n\n    public void updateGraphicsObjectCreated(GraphicsObjectCreated event)\n    {\n        if(event.getGraphicsObject().getId() \u003d\u003d SOTETSEG_RAGGED_TILE)\n        {\n            WorldPoint wp \u003d WorldPoint.fromLocal(client, event.getGraphicsObject().getLocation());\n            excludedTiles.add(new Point(wp.getRegionX(), wp.getRegionY()));\n        }\n    }\n\n    public void updateGameTick(GameTick event)\n    {\n        lastRegion \u003d client.isInInstancedRegion() ? WorldPoint.fromLocalInstance(client, client.getLocalPlayer().getLocalLocation()).getRegionID() : client.getLocalPlayer().getWorldLocation().getRegionID();\n        if(roomState \u003d\u003d RoomState.SotetsegRoomState.MAZE_1 || roomState \u003d\u003d RoomState.SotetsegRoomState.MAZE_2)\n        {\n            int ticksSinceLastProc;\n            if(roomState \u003d\u003d RoomState.SotetsegRoomState.MAZE_1)\n            {\n                ticksSinceLastProc \u003d client.getTickCount()-soteFirstMazeStart;\n            }\n            else\n            {\n                ticksSinceLastProc \u003d client.getTickCount() - soteSecondMazeStart;\n            }\n            if(ticksSinceLastProc \u003e 5)\n            {\n                for (Player player : client.getPlayers())\n                {\n                    WorldPoint location \u003d player.getWorldLocation();\n                    if (location.getRegionX() \u003c\u003d 22 \u0026\u0026 location.getRegionX() \u003e\u003d 9)\n                    {\n                        if (location.getRegionY() \u003e\u003d 21 \u0026\u0026 location.getRegionY() \u003c\u003d 37)\n                        {\n                            if (playerTiles.containsKey(player.getName()))\n                            {\n                                playerTiles.get(player.getName()).add(new Point(location.getRegionX(), location.getRegionY()));\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        if (client.getTickCount() \u003d\u003d deferTick)\n        {\n            deferTick \u003d -1;\n            if (client.getVarbitValue(HP_VARBIT) \u003d\u003d FULL_HP)\n            {\n                clog.addLine(LogID.ACCURATE_SOTE_START);\n            }\n        }\n        if(client.getTickCount() \u003d\u003d soteFirstMazeStart+5)\n        {\n            if(lastRegion \u003d\u003d SOTETSEG_UNDERWORLD)\n            {\n                firstMazeChosen \u003d client.getLocalPlayer().getName();\n            }\n            else\n            {\n                firstMazeChosen \u003d getAboveWorldChosen();\n            }\n            lastChosen \u003d firstMazeChosen;\n        }\n        else if(client.getTickCount() \u003d\u003d soteSecondMazeStart+5)\n        {\n            if(lastRegion \u003d\u003d SOTETSEG_UNDERWORLD)\n            {\n                secondMazeChosen \u003d client.getLocalPlayer().getName();\n            }\n            else\n            {\n                secondMazeChosen \u003d getAboveWorldChosen();\n            }\n            lastChosen \u003d secondMazeChosen;\n        }\n    }\n\n    public void handleNPCChanged(int id)\n    {\n        if (id \u003d\u003d SOTETSEG_ACTIVE || id \u003d\u003d SOTETSEG_ACTIVE_HM || id \u003d\u003d SOTETSEG_ACTIVE_SM)\n        {\n            if (roomState \u003d\u003d RoomState.SotetsegRoomState.NOT_STARTED)\n            {\n                if (id \u003d\u003d SOTETSEG_ACTIVE_HM)\n                {\n                    clog.addLine(LogID.IS_HARD_MODE);\n                } else if (id \u003d\u003d SOTETSEG_ACTIVE_SM)\n                {\n                    clog.addLine(LogID.IS_STORY_MODE);\n                }\n                startSotetseg();\n            } else if (roomState \u003d\u003d RoomState.SotetsegRoomState.MAZE_1)\n            {\n                endFirstMaze();\n            } else if (roomState \u003d\u003d RoomState.SotetsegRoomState.MAZE_2)\n            {\n                endSecondMaze();\n            }\n        } else if (id \u003d\u003d SOTETSEG_INACTIVE || id \u003d\u003d SOTETSEG_INACTIVE_HM || id \u003d\u003d SOTETSEG_INACTIVE_SM)\n        {\n            if (roomState \u003d\u003d RoomState.SotetsegRoomState.PHASE_1)\n            {\n                startFirstMaze();\n            } else if (roomState \u003d\u003d RoomState.SotetsegRoomState.PHASE_2)\n            {\n                startSecondMaze();\n            }\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\rooms\\tob\\SotetsegHandler.java"},{"fileName":"VerzikHandler.java","content":"package com.advancedraidtracker.rooms.tob;\n\nimport com.advancedraidtracker.AdvancedRaidTrackerConfig;\nimport com.advancedraidtracker.AdvancedRaidTrackerPlugin;\nimport com.advancedraidtracker.constants.LogID;\nimport com.advancedraidtracker.constants.TOBRoom;\nimport com.advancedraidtracker.utility.datautility.DataWriter;\nimport com.advancedraidtracker.utility.wrappers.PlayerDidAttack;\nimport com.advancedraidtracker.utility.wrappers.DawnSpec;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.*;\nimport com.advancedraidtracker.utility.RoomState;\nimport net.runelite.client.game.ItemManager;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport static com.advancedraidtracker.constants.LogID.*;\nimport static com.advancedraidtracker.constants.TobIDs.*;\n\n@Slf4j\npublic class VerzikHandler extends RoomHandler\n{\n    public RoomState.VerzikRoomState roomState;\n    private final AdvancedRaidTrackerPlugin plugin;\n    private int healingEndTick \u003d -1;\n    private final ItemManager itemManager;\n\n    public VerzikHandler(Client client, DataWriter clog, AdvancedRaidTrackerConfig config, AdvancedRaidTrackerPlugin plugin, ItemManager itemManager)\n    {\n        super(client, clog, config);\n        this.plugin \u003d plugin;\n        this.itemManager \u003d itemManager;\n        currentHits \u003d new ArrayList\u003c\u003e();\n        lastHits \u003d new ArrayList\u003c\u003e();\n        roomState \u003d RoomState.VerzikRoomState.NOT_STARTED;\n    }\n\n    public boolean isActive()\n    {\n        return !(roomState \u003d\u003d RoomState.VerzikRoomState.NOT_STARTED || roomState \u003d\u003d RoomState.VerzikRoomState.FINISHED);\n    }\n\n    public String getName()\n    {\n        return \"Verzik\";\n    }\n\n    private int verzikEntryTick \u003d -1;\n    private int verzikP1EndTick \u003d -1;\n    private int verzikRedsTick \u003d -1;\n    private int verzikP2EndTick \u003d -1;\n    private int verzikP3EndTick \u003d -1;\n    private boolean redsThisTick \u003d false;\n\n    private boolean hasWebbed \u003d false;\n    private int webTick \u003d -1;\n\n    private final ArrayList\u003cInteger\u003e currentHits;\n    private ArrayList\u003cInteger\u003e lastHits;\n    private NPC verzNPC;\n    Map\u003cInteger, Integer\u003e shieldActives \u003d new HashMap\u003c\u003e();\n\n    public void reset()\n    {\n        super.reset();\n        roomState \u003d RoomState.VerzikRoomState.NOT_STARTED;\n        currentHits.clear();\n        lastHits.clear();\n        verzikEntryTick \u003d -1;\n        verzikP1EndTick \u003d -1;\n        verzikRedsTick \u003d -1;\n        verzikP2EndTick \u003d -1;\n        verzikP3EndTick \u003d -1;\n        redsThisTick \u003d false;\n        hasWebbed \u003d false;\n        healingEndTick \u003d -1;\n        webTick \u003d -1;\n        queuedAutoHits.clear();\n        shieldActives.clear();\n    }\n\n    public void thrallAttackedShield(int tick)\n    {\n        //todo finish p2 heal tracking\n    }\n\n    public void updateGameTick(GameTick event)\n    {\n        for (Projectile projectile : client.getProjectiles())\n        {\n            if (projectile.getId() \u003d\u003d VERZIK_CRAB_HEAL_PROJECTILE)\n            {\n                //todo finish p2 heal tracking\n            }\n        }\n        if (client.getTickCount() \u003d\u003d healingEndTick)\n        {\n            plugin.verzShieldActive \u003d false;\n        }\n        int playersHit \u003d 1;\n        for (Player p : queuedAutoHits.keySet())\n        {\n            if (queuedAutoHits.get(p) \u003d\u003d client.getTickCount())\n            {\n                for (Player p2 : client.getPlayers())\n                {\n                    if (p2.getWorldLocation().distanceTo(p.getWorldLocation()) \u003c\u003d 1)\n                    {\n                        playersHit++;\n                        //todo finish p2 heal tracking\n                    }\n                }\n            }\n        }\n        queuedAutoHits.clear();\n        currentHits.clear();\n        if (healingEndTick \u003d\u003d client.getTickCount())\n        {\n            healingEndTick \u003d -1;\n        }\n        redsThisTick \u003d false;\n        if (webTick !\u003d -1)\n        {\n            webTick++;\n            if (webTick \u003e 50) //non-specific large number \u003e web length but \u003c time before next webs could happen again\n            {\n                hasWebbed \u003d false;\n                webTick \u003d -1;\n            }\n        }\n        lastHits \u003d currentHits;\n    }\n\n    private final Map\u003cPlayer, Integer\u003e queuedAutoHits \u003d new HashMap\u003c\u003e();\n\n    public void updateProjectileMoved(ProjectileMoved event)\n    {\n        if (event.getProjectile().getId() \u003d\u003d VERZIK_CRAB_HEAL_PROJECTILE)\n        {\n            if (event.getProjectile().getRemainingCycles() \u003d\u003d client.getGameCycle())\n            {\n                //todo finish p2 heal tracking\n            }\n        }\n        if (event.getProjectile().getId() \u003d\u003d VERZIK_RED_MAGE_AUTO_PROJECTILE)\n        {\n            if (event.getProjectile().getRemainingCycles() \u003d\u003d 0)\n            {\n                if (verzNPC.getInteracting() instanceof Player)\n                {\n                    Player p \u003d (Player) verzNPC;\n                    queuedAutoHits.put(p, client.getTickCount() + 2);\n                }\n            }\n        } else if (event.getProjectile().getId() \u003d\u003d VERZIK_WEB_PROJECTILE)\n        {\n            if (!hasWebbed)\n            {\n                hasWebbed \u003d true;\n                clog.addLine(WEBS_STARTED, String.valueOf(client.getTickCount() - verzikEntryTick));\n                webTick \u003d client.getTickCount();\n                if ((webTick - verzikEntryTick) % 2 \u003d\u003d 0)\n                {\n                    plugin.addDelayedLine(TOBRoom.VERZIK, webTick - verzikEntryTick, \"Webs\");\n                }\n            }\n        }\n    }\n\n    public void updateHitsplatApplied(HitsplatApplied event)\n    {\n        if (event.getActor().getName() !\u003d null)\n        {\n            if (event.getActor().getName().contains(\"Verzik\") \u0026\u0026 event.getHitsplat().getHitsplatType() \u003d\u003d HitsplatID.HEAL)\n            {\n                currentHits.add(event.getHitsplat().getAmount());\n            }\n            if (roomState \u003d\u003d RoomState.VerzikRoomState.PHASE_1 \u0026\u0026 event.getActor().getName().contains(\"Verzik\"))\n            {\n                if (event.getHitsplat().getAmount() \u003e\u003d DAWNBRINGER_MINIMUM_HIT)\n                {\n                    clog.addLine(DAWN_DAMAGE, String.valueOf(event.getHitsplat().getAmount()), String.valueOf(client.getTickCount() - roomStartTick));\n                    DawnSpec dawnSpec \u003d new DawnSpec(\"\", client.getTickCount() - roomStartTick);\n                    dawnSpec.setDamage(event.getHitsplat().getAmount());\n                    plugin.liveFrame.getPanel(getName()).addDawnSpec(dawnSpec);\n                }\n            }\n        }\n    }\n\n    public void updateGraphicChanged(GraphicChanged event)\n    {\n        if (event.getActor().hasSpotAnim(VERZIK_BOUNCE_SPOT_ANIMATION))\n        {\n            clog.addLine(LogID.VERZIK_BOUNCE, event.getActor().getName(), String.valueOf(client.getTickCount() - verzikEntryTick));\n            plugin.liveFrame.addAttack(new PlayerDidAttack(itemManager, event.getActor().getName(), VERZIK_BOUNCE_ANIMATION, client.getTickCount() - verzikEntryTick, \"-1\", \"-1\", \"-1\", -1, -1, \"\", \"\"), \"Verzik\");\n\n        }\n    }\n\n    public void updateItemSpawned(ItemSpawned event)\n    {\n        if (event.getItem().getId() \u003d\u003d DAWNBRINGER_ITEM)\n        {\n            clog.addLine(DAWN_DROPPED, String.valueOf(client.getTickCount() - verzikEntryTick));\n            plugin.liveFrame.getPanel(getName()).addRoomSpecificData(client.getTickCount() - verzikEntryTick, \"X\");\n        }\n    }\n\n\n    public void updateAnimationChanged(AnimationChanged event)\n    {\n        int id \u003d event.getActor().getAnimation();\n        if (roomState \u003d\u003d RoomState.VerzikRoomState.PHASE_2 || roomState \u003d\u003d RoomState.VerzikRoomState.PHASE_2_REDS)\n        {\n            if (plugin.verzShieldActive)\n            {\n                if (event.getActor() instanceof Player)\n                {\n                    Player p \u003d (Player) event.getActor();\n                    if (p.getInteracting() instanceof NPC)\n                    {\n                        NPC interacting \u003d (NPC) p.getInteracting();\n                        if (interacting.getId() \u003d\u003d VERZIK_P2 || interacting.getId() \u003d\u003d VERZIK_P2_HM || interacting.getId() \u003d\u003d VERZIK_P2_SM)\n                        {\n                            //TODO: P2 Healing\n                        }\n                    }\n                }\n            }\n        }\n\n        if (event.getActor().getAnimation() \u003d\u003d VERZIK_BECOMES_SPIDER)\n        {\n            endP3();\n        }\n    }\n\n    public void updateNpcSpawned(NpcSpawned event)\n    {\n        int id \u003d event.getNpc().getId();\n        if (id \u003d\u003d VERZIK_MATOMENOS || id \u003d\u003d VERZIK_MATOMENOS_HM || id \u003d\u003d VERZIK_MATOMENOS_SM)\n        {\n            if (!redsThisTick)\n            {\n                clog.addLine(VERZIK_P2_REDS_PROC, String.valueOf(client.getTickCount() - verzikEntryTick));\n                plugin.addDelayedLine(TOBRoom.VERZIK, client.getTickCount() - verzikEntryTick, \"Reds\");\n                healingEndTick \u003d client.getTickCount() + VERZIK_SHIELD_LENGTH;\n                plugin.addDelayedLine(TOBRoom.VERZIK, healingEndTick - verzikEntryTick, \"Shield End\");\n                redsThisTick \u003d true;\n                plugin.verzShieldActive \u003d true;\n            }\n            if (roomState !\u003d RoomState.VerzikRoomState.PHASE_2_REDS)\n            {\n                procReds();\n            }\n        }\n        switch (id)\n        {\n            case VERZIK_MELEE_NYLO:\n            case VERZIK_RANGE_NYLO:\n            case VERZIK_MAGE_NYLO:\n            case VERZIK_MELEE_NYLO_HM:\n            case VERZIK_RANGE_NYLO_HM:\n            case VERZIK_MAGE_NYLO_HM:\n            case VERZIK_MELEE_NYLO_SM:\n            case VERZIK_RANGE_NYLO_SM:\n            case VERZIK_MAGE_NYLO_SM:\n                clog.addLine(VERZIK_CRAB_SPAWNED, String.valueOf(client.getTickCount() - roomStartTick));\n                break;\n            case VERZIK_P1_INACTIVE:\n            case VERZIK_P1_INACTIVE_SM:\n            case VERZIK_P1_INACTIVE_HM:\n            case VERZIK_P1:\n            case VERZIK_P2:\n            case VERZIK_P3:\n            case VERZIK_P1_HM:\n            case VERZIK_P2_HM:\n            case VERZIK_P3_HM:\n            case VERZIK_P1_SM:\n            case VERZIK_P2_SM:\n            case VERZIK_P3_SM:\n                verzNPC \u003d event.getNpc();\n                break;\n        }\n    }\n\n    public void updateNpcDespawned(NpcDespawned event)\n    {\n        int id \u003d event.getNpc().getId();\n        if (id \u003d\u003d VERZIK_P1 || id \u003d\u003d VERZIK_P1_HM || id \u003d\u003d VERZIK_P1_SM)\n        {\n            endP1();\n        } else if (id \u003d\u003d VERZIK_P2 || id \u003d\u003d VERZIK_P2_HM || id \u003d\u003d VERZIK_P2_SM)\n        {\n            endP2();\n        }\n    }\n\n    public void handleNPCChanged(int id)\n    {\n        if (id \u003d\u003d VERZIK_P1 || id \u003d\u003d VERZIK_P1_HM || id \u003d\u003d VERZIK_P1_SM)\n        {\n            if (id \u003d\u003d VERZIK_P1_HM)\n            {\n                clog.addLine(IS_HARD_MODE);\n            } else if (id \u003d\u003d VERZIK_P1_SM)\n            {\n                clog.addLine(IS_STORY_MODE);\n            }\n            startVerzik();\n        } else if (id \u003d\u003d VERZIK_P2 || id \u003d\u003d VERZIK_P2_HM || id \u003d\u003d VERZIK_P2_SM)\n        {\n            endP1();\n        } else if (id \u003d\u003d VERZIK_P3 || id \u003d\u003d VERZIK_P3_HM || id \u003d\u003d VERZIK_P3_SM)\n        {\n            endP2();\n        } else if (id \u003d\u003d VERZIK_DEAD || id \u003d\u003d VERZIK_DEAD_HM || id \u003d\u003d VERZIK_DEAD_SM)\n        {\n            endP3();\n        }\n    }\n\n    private void startVerzik()\n    {\n        roomState \u003d RoomState.VerzikRoomState.PHASE_1;\n        verzikEntryTick \u003d client.getTickCount();\n        clog.addLine(VERZIK_P1_START);\n        clog.addLine(ACCURATE_VERZIK_START);\n        roomStartTick \u003d client.getTickCount();\n    }\n\n    private void endP1()\n    {\n        roomState \u003d RoomState.VerzikRoomState.PHASE_2;\n        verzikP1EndTick \u003d client.getTickCount();\n        sendTimeMessage(\"Wave \u0027Verzik phase 1\u0027 complete. Duration: \", verzikP1EndTick - verzikEntryTick);\n        clog.addLine(VERZIK_P1_DESPAWNED, String.valueOf(verzikP1EndTick - verzikEntryTick));\n        plugin.addDelayedLine(TOBRoom.VERZIK, verzikP1EndTick - verzikEntryTick, \"P1 End\");\n\n    }\n\n    private void procReds()\n    {\n        roomState \u003d RoomState.VerzikRoomState.PHASE_2_REDS;\n        verzikRedsTick \u003d client.getTickCount();\n        sendTimeMessage(\"Red Crabs Spawned. Duration: \", verzikRedsTick - verzikEntryTick);\n    }\n\n    private void endP2()\n    {\n        roomState \u003d RoomState.VerzikRoomState.PHASE_3;\n        verzikP2EndTick \u003d client.getTickCount();\n        sendTimeMessage(\"Wave \u0027Verzik phase 2\u0027 complete. Duration: \", verzikP2EndTick - verzikEntryTick, verzikP2EndTick - verzikP1EndTick);\n        clog.addLine(VERZIK_P2_END, String.valueOf(verzikP2EndTick - verzikEntryTick));\n        plugin.addDelayedLine(TOBRoom.VERZIK, verzikP2EndTick - verzikEntryTick, \"P2 End\");\n\n    }\n\n    private void endP3()\n    {\n        //todo incorrect doubles sometimes\n        roomState \u003d RoomState.VerzikRoomState.FINISHED;\n        verzikP3EndTick \u003d client.getTickCount() + VERZIK_DEATH_ANIMATION_LENGTH;\n        clog.addLine(ACCURATE_VERZIK_END);\n        sendTimeMessage(\"Wave \u0027Verzik phase 3\u0027 complete. Duration: \", verzikP3EndTick - verzikEntryTick, verzikP3EndTick - verzikP2EndTick);\n        clog.addLine(VERZIK_P3_DESPAWNED, String.valueOf(verzikP3EndTick - verzikEntryTick));\n        plugin.addDelayedLine(TOBRoom.VERZIK, client.getTickCount() - verzikEntryTick, \"Dead\");\n        plugin.liveFrame.setVerzFinished(verzikP3EndTick - verzikEntryTick);\n\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\rooms\\tob\\VerzikHandler.java"},{"fileName":"XarpusHandler.java","content":"package com.advancedraidtracker.rooms.tob;\n\nimport com.advancedraidtracker.AdvancedRaidTrackerPlugin;\nimport com.advancedraidtracker.AdvancedRaidTrackerConfig;\nimport com.advancedraidtracker.constants.TOBRoom;\nimport com.advancedraidtracker.constants.TobIDs;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.NPC;\nimport net.runelite.api.events.*;\nimport com.advancedraidtracker.utility.Point;\nimport com.advancedraidtracker.utility.RoomUtil;\nimport com.advancedraidtracker.utility.datautility.DataWriter;\nimport com.advancedraidtracker.utility.RoomState;\n\nimport static com.advancedraidtracker.constants.LogID.*;\nimport static com.advancedraidtracker.constants.LogID.ACCURATE_XARP_END;\nimport static com.advancedraidtracker.constants.LogID.XARPUS_STARTED;\nimport static com.advancedraidtracker.constants.TobIDs.*;\nimport static com.advancedraidtracker.utility.RoomState.XarpusRoomState.FINISHED;\n@Slf4j\npublic class XarpusHandler extends RoomHandler\n{\n    public RoomState.XarpusRoomState roomState \u003d RoomState.XarpusRoomState.NOT_STARTED;\n    private final AdvancedRaidTrackerPlugin plugin;\n\n    public XarpusHandler(Client client, DataWriter clog, AdvancedRaidTrackerConfig config, AdvancedRaidTrackerPlugin plugin)\n    {\n        super(client, clog, config);\n        this.plugin \u003d plugin;\n    }\n\n    private int xarpusEntryTick \u003d -1;\n    private int xarpusExhumedsEnd \u003d -1;\n    private int xarpusScreechTick \u003d -1;\n    private int xarpusEndTick \u003d -1;\n\n    public String getName()\n    {\n        return \"Xarpus\";\n    }\n\n    public boolean isActive()\n    {\n        return !(roomState \u003d\u003d RoomState.XarpusRoomState.NOT_STARTED || roomState \u003d\u003d FINISHED);\n    }\n\n    public void reset()\n    {\n        super.reset();\n        xarpusEntryTick \u003d -1;\n        xarpusExhumedsEnd \u003d -1;\n        xarpusScreechTick \u003d -1;\n        xarpusEndTick \u003d -1;\n        roomState \u003d RoomState.XarpusRoomState.NOT_STARTED;\n    }\n\n    public void updateAnimationChanged(AnimationChanged event)\n    {\n        if (event.getActor().getAnimation() \u003d\u003d XARPUS_AWAKENS)\n        {\n            endExhumeds();\n        }\n        if (event.getActor().getAnimation() \u003d\u003d XARPUS_DEATH_ANIMATION)\n        {\n            endXarpus();\n        }\n    }\n\n    public void updateProjectileMoved(ProjectileMoved event)\n    {\n        if (event.getProjectile().getEndCycle() - event.getProjectile().getStartCycle() \u003d\u003d event.getProjectile().getRemainingCycles())\n        {\n            if (event.getProjectile().getId() \u003d\u003d XARPUS_EXHUMED_PROJECTILE)\n            {\n                clog.addLine(XARPUS_HEAL);\n            }\n        }\n    }\n\n    public void updateOverheadText(OverheadTextChanged event)\n    {\n        if (event.getActor() instanceof NPC)\n        {\n            NPC npc \u003d (NPC) event.getActor();\n            int id \u003d npc.getId();\n            if (id \u003d\u003d XARPUS_P23 || id \u003d\u003d XARPUS_P23_HM || id \u003d\u003d XARPUS_P23_SM)\n            {\n                startScreech();\n            }\n        }\n    }\n\n    public void updateNpcDespawned(NpcDespawned event)\n    {\n        switch (event.getNpc().getId())\n        {\n            case XARPUS_INACTIVE:\n            case XARPUS_P1:\n            case XARPUS_P23:\n            case XARPUS_DEAD:\n            case XARPUS_INACTIVE_HM:\n            case XARPUS_P1_HM:\n            case XARPUS_P23_HM:\n            case XARPUS_DEAD_HM:\n            case XARPUS_INACTIVE_SM:\n            case XARPUS_P1_SM:\n            case XARPUS_P23_SM:\n            case XARPUS_DEAD_SM:\n                clog.addLine(XARPUS_DESPAWNED, String.valueOf(xarpusEndTick - xarpusEntryTick));\n        }\n    }\n\n    public void updateNpcSpawned(NpcSpawned event)\n    {\n        boolean story \u003d false;\n        switch (event.getNpc().getId())\n        {\n            case TobIDs.XARPUS_INACTIVE_SM:\n            case TobIDs.XARPUS_P1_SM:\n            case TobIDs.XARPUS_P23_SM:\n            case TobIDs.XARPUS_DEAD_SM:\n                story \u003d true;\n                clog.addLine(IS_STORY_MODE);\n            case TobIDs.XARPUS_INACTIVE_HM:\n            case TobIDs.XARPUS_P1_HM:\n            case TobIDs.XARPUS_P23_HM:\n            case TobIDs.XARPUS_DEAD_HM:\n                if (!story)\n                    clog.addLine(IS_HARD_MODE);\n            case TobIDs.XARPUS_INACTIVE:\n            case TobIDs.XARPUS_P1:\n            case TobIDs.XARPUS_P23:\n            case TobIDs.XARPUS_DEAD:\n                clog.addLine(XARPUS_SPAWNED);\n        }\n    }\n\n    public void updateGameTick(GameTick event)\n    {\n        if (roomState \u003d\u003d RoomState.XarpusRoomState.NOT_STARTED)\n        { //Xarpus timer starts when player crosses into region\n            if (RoomUtil.crossedLine(XARPUS_REGION, new Point(25, 12), new Point(27, 12), false, client))\n            {\n                startXarpus();\n            }\n        }\n        if (xarpusScreechTick !\u003d -1 \u0026\u0026 xarpusScreechTick !\u003d 0 \u0026\u0026 client.getTickCount() !\u003d xarpusScreechTick \u0026\u0026 (client.getTickCount() - xarpusScreechTick) % 8 \u003d\u003d 0 \u0026\u0026 isActive())\n        {\n            plugin.addDelayedLine(TOBRoom.XARPUS, client.getTickCount() - xarpusEntryTick, \"Turn\");\n        }\n    }\n\n    private void startScreech()\n    {\n        clog.addLine(XARPUS_SCREECH, String.valueOf(client.getTickCount() - xarpusEntryTick));\n        roomState \u003d RoomState.XarpusRoomState.POSTSCREECH;\n        xarpusScreechTick \u003d client.getTickCount();\n        String splitMessage \u003d \"Wave \u0027Xarpus phase 2\u0027 complete. Duration: \" + timeColor() + RoomUtil.time(xarpusScreechTick - xarpusEntryTick) + \" (\" + RoomUtil.time(xarpusScreechTick - xarpusExhumedsEnd) + \")\";\n        this.client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", splitMessage, null, false);\n        plugin.addDelayedLine(TOBRoom.XARPUS, xarpusScreechTick - xarpusEntryTick, \"SCREECH\");\n    }\n\n    private void startXarpus()\n    {\n        roomState \u003d RoomState.XarpusRoomState.EXHUMEDS;\n        xarpusEntryTick \u003d client.getTickCount();\n        roomStartTick \u003d client.getTickCount();\n        clog.addLine(XARPUS_STARTED);\n        clog.addLine(ACCURATE_XARP_START);\n    }\n\n    private void endExhumeds()\n    {\n        roomState \u003d RoomState.XarpusRoomState.PRESCREECH;\n        xarpusExhumedsEnd \u003d client.getTickCount();\n        String splitMessage \u003d \"Wave \u0027Xarpus phase 1\u0027 complete. Duration: \" + timeColor() + RoomUtil.time(xarpusExhumedsEnd - xarpusEntryTick);\n        this.client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", splitMessage, null, false);\n        plugin.addDelayedLine(TOBRoom.XARPUS, client.getTickCount() - xarpusEntryTick + 1, \"Exhumeds End\");\n    }\n\n    private void endXarpus()\n    {\n\n        roomState \u003d FINISHED;\n        xarpusEndTick \u003d client.getTickCount() + XARPUS_DEATH_ANIMATION_LENGTH;\n        clog.addLine(ACCURATE_XARP_END);\n        plugin.liveFrame.setXarpFinished(xarpusEndTick - xarpusEntryTick);\n        String splitMessage \u003d \"Wave \u0027Xarpus phase 3\u0027 complete. Duration: \" + timeColor() + RoomUtil.time(xarpusEndTick - xarpusEntryTick) + \" (\" + RoomUtil.time(xarpusEndTick - xarpusScreechTick) + \")\";\n        this.client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", splitMessage, null, false);\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\rooms\\tob\\XarpusHandler.java"},{"fileName":"SimpleTOBData.java","content":"package com.advancedraidtracker;\n\nimport com.advancedraidtracker.constants.LogID;\nimport com.advancedraidtracker.constants.TOBRoom;\nimport com.advancedraidtracker.utility.datautility.DataManager;\nimport com.advancedraidtracker.utility.datautility.DataPoint;\nimport com.advancedraidtracker.utility.wrappers.*;\nimport lombok.extern.slf4j.Slf4j;\n\nimport java.util.*;\nimport static com.advancedraidtracker.constants.TOBRoom.*;\nimport static com.advancedraidtracker.constants.TobIDs.EXIT_FLAG;\nimport static com.advancedraidtracker.constants.TobIDs.SPECTATE_FLAG;\nimport static com.advancedraidtracker.utility.datautility.DataPoint.*;\n\n@Slf4j\npublic class SimpleTOBData\n{\n    public boolean maidenStartAccurate \u003d false;\n    public boolean bloatStartAccurate \u003d false;\n    public boolean nyloStartAccurate \u003d false;\n    public boolean soteStartAccurate \u003d false;\n    public boolean xarpStartAccurate \u003d false;\n    public boolean verzikStartAccurate \u003d false;\n\n    public boolean maidenEndAccurate \u003d false;\n    public boolean bloatEndAccurate \u003d false;\n    public boolean nyloEndAccurate \u003d false;\n    public boolean soteEndAccurate \u003d false;\n    public boolean xarpEndAccurate \u003d false;\n    public boolean verzikEndAccurate \u003d false;\n    public boolean resetBeforeMaiden;\n\n    public boolean spectated \u003d false;\n    public boolean partyComplete;\n    public boolean hardMode;\n    public boolean storyMode;\n    public boolean raidCompleted;\n    public Date raidStarted;\n    private ArrayList\u003cString\u003e globalData;\n    public LinkedHashMap\u003cString, Integer\u003e players;\n    public String filePath;\n    public String fileName;\n    public String activeValue \u003d \"\";\n    // Maiden tracking\n    public boolean maidenTimeAccurate;\n    public boolean maidenDefenseAccurate;\n    public boolean maidenScuffed \u003d false;\n    public String firstMaidenCrabScuffed \u003d \"\";\n    public ArrayList\u003cStringInt\u003e maidenCrabs \u003d new ArrayList\u003c\u003e();\n    public ArrayList\u003cString\u003e maidenCrabSpawn \u003d new ArrayList\u003c\u003e();\n    public boolean maidenSpawned \u003d false;\n    public boolean maidenSkip;\n    public boolean maidenReset;\n    public boolean maidenWipe;\n    // Bloat tracking\n    public ArrayList\u003cInteger\u003e bloatDowns \u003d new ArrayList\u003c\u003e();\n    public boolean bloatTimeAccurate;\n    public boolean bloatDefenseAccurate;\n    public boolean bloatStarted;\n    public boolean bloatReset;\n    public boolean bloatWipe;\n    // Nylo tracking\n    public boolean nyloTimeAccurate;\n    public boolean nyloDefenseAccurate;\n    public boolean nyloWipe;\n    public boolean nyloReset;\n    public boolean nyloStarted;\n    public ArrayList\u003cInteger\u003e nyloWaveStalled \u003d new ArrayList\u003c\u003e();\n    public Map\u003cInteger, Integer\u003e waveSpawns \u003d new HashMap\u003c\u003e();\n    // Sotetseg tracking\n    public boolean soteTimeAccurate;\n    public boolean soteDefenseAccurate;\n    public boolean soteStarted;\n    public boolean soteWipe;\n    public boolean soteReset;\n    // Xarpus tracking\n    public boolean xarpTimeAccurate;\n    public boolean xarpDefenseAccurate;\n    public boolean xarpWipe;\n    public boolean xarpReset;\n    public boolean xarpStarted;\n    // Verzik tracking\n    public boolean verzikWipe;\n    public boolean verzikStarted;\n    public boolean verzikTimeAccurate;\n    public ArrayList\u003cInteger\u003e websStart \u003d new ArrayList\u003c\u003e();\n    public ArrayList\u003cDawnSpec\u003e dawnSpecs \u003d new ArrayList\u003c\u003e();\n    public ArrayList\u003cInteger\u003e p2Crabs \u003d new ArrayList\u003c\u003e();\n    public ArrayList\u003cInteger\u003e p3Crabs \u003d new ArrayList\u003c\u003e();\n    public ArrayList\u003cInteger\u003e redsProc \u003d new ArrayList\u003c\u003e();\n    public ArrayList\u003cInteger\u003e dawnDrops;\n    public ArrayList\u003cPlayerDidAttack\u003e attacksP1;\n\n\n\n\n    // Thrall tracking\n    public ArrayList\u003cThrallOutlineBox\u003e maidenThrallSpawns;\n    public ArrayList\u003cThrallOutlineBox\u003e bloatThrallSpawns;\n    public ArrayList\u003cThrallOutlineBox\u003e nyloThrallSpawns;\n    public ArrayList\u003cThrallOutlineBox\u003e soteThrallSpawns;\n    public ArrayList\u003cThrallOutlineBox\u003e xarpusThrallSpawns;\n    public ArrayList\u003cThrallOutlineBox\u003e verzikThrallSpawns;\n\n    public Map\u003cInteger, Integer\u003e verzikHP \u003d new HashMap\u003c\u003e();\n\n    public Date getDate()\n    {\n        return raidStarted;\n    }\n\n    public int getScale()\n    {\n        return dataManager.get(PARTY_SIZE);\n    }\n\n    public boolean getTimeAccurate(DataPoint param)\n    {\n        switch (param.room)\n        {\n            case MAIDEN:\n                return maidenStartAccurate \u0026\u0026 maidenEndAccurate;\n            case BLOAT:\n                return bloatStartAccurate \u0026\u0026 bloatEndAccurate;\n            case NYLOCAS:\n                return nyloStartAccurate \u0026\u0026 nyloEndAccurate;\n            case SOTETSEG:\n                return soteStartAccurate \u0026\u0026 soteEndAccurate;\n            case XARPUS:\n                return xarpStartAccurate \u0026\u0026 xarpEndAccurate;\n            case VERZIK:\n                return verzikStartAccurate \u0026\u0026 verzikEndAccurate;\n            case ANY:\n                return true;\n            default:\n                return false;\n        }\n    }\n\n    public void setIndex(int index)\n    {\n        dataManager.set(RAID_INDEX, index);\n    }\n\n    public String getPlayerList(ArrayList\u003cMap\u003cString, ArrayList\u003cString\u003e\u003e\u003e aliases)\n    {\n        StringBuilder list \u003d new StringBuilder();\n        ArrayList\u003cString\u003e names \u003d new ArrayList\u003c\u003e();\n        for (String s : players.keySet())\n        {\n            String name \u003d s;\n            for (Map\u003cString, ArrayList\u003cString\u003e\u003e alternateNames : aliases)\n            {\n                for (String alias : alternateNames.keySet())\n                {\n                    for (String potentialName : alternateNames.get(alias))\n                    {\n                        if (name.equalsIgnoreCase(potentialName))\n                        {\n                            name \u003d alias;\n                            break;\n                        }\n                    }\n                }\n            }\n            names.add(name);\n        }\n        names.sort(String::compareToIgnoreCase);\n        for (String s : names)\n        {\n            list.append(s);\n            list.append(\",\");\n        }\n        if (list.length() \u003e 0)\n        {\n            return list.substring(0, list.length() - 1);\n        } else\n        {\n            return \"\";\n        }\n    }\n\n    public PlayerCorrelatedPointData getSpecificTimeInactiveCorrelated(String inactive)\n    {\n        if (inactive.contains(\"Player: \"))\n        {\n            return dataManager.getHighest(DataPoint.getValue(inactive.substring(8)));\n        } else\n        {\n            return null;\n        }\n    }\n\n    public int getSpecificTimeInactive(String inactive)\n    {\n        if (inactive.contains(\"Player: \"))\n        {\n            return dataManager.getHighest(DataPoint.getValue(inactive.substring(8))).value;\n        }\n        if (inactive.equals(\"Challenge Time\"))\n        {\n            return getMaidenTime() + getBloatTime() + getNyloTime() + getSoteTime() + getXarpTime() + getVerzikTime();\n        }\n        return getValue(DataPoint.getValue(inactive));\n    }\n\n    public int getSpecificTime()\n    {\n        if (activeValue.contains(\"Player: \"))\n        {\n            return dataManager.getHighest(DataPoint.getValue(activeValue.substring(8))).value;\n        }\n        if (activeValue.equals(\"Challenge Time\"))\n        {\n            return getMaidenTime() + getBloatTime() + getNyloTime() + getSoteTime() + getXarpTime() + getVerzikTime();\n        }\n        if(getTimeAccurate(Objects.requireNonNull(DataPoint.getValue(activeValue))))\n        {\n            return getValue(DataPoint.getValue(activeValue));\n        }\n        else\n        {\n            return Integer.MAX_VALUE;\n        }\n    }\n\n    public void setOverallTime()\n    {\n        int overallTime \u003d getMaidenTime() + getBloatTime() + getNyloTime() + getSoteTime() + getXarpTime() + getVerzikTime();\n        dataManager.set(DataPoint.CHALLENGE_TIME, overallTime);\n    }\n\n    public int getMaidenTime()\n    {\n        return (maidenStartAccurate \u0026\u0026 maidenEndAccurate) ? getValue(DataPoint.MAIDEN_TOTAL_TIME) : 0;\n    }\n\n    public int getBloatTime()\n    {\n        return (bloatStartAccurate \u0026\u0026 bloatEndAccurate) ? getValue(DataPoint.BLOAT_TOTAL_TIME) : 0;\n    }\n\n    public int getNyloTime()\n    {\n        return (nyloStartAccurate \u0026\u0026 nyloEndAccurate) ? getValue(DataPoint.NYLO_TOTAL_TIME) : 0;\n    }\n\n    public int getSoteTime()\n    {\n        return (soteStartAccurate \u0026\u0026 soteEndAccurate) ? getValue(DataPoint.SOTE_TOTAL_TIME) : 0;\n    }\n\n    public int getXarpTime()\n    {\n        return (xarpStartAccurate \u0026\u0026 xarpEndAccurate) ? getValue(DataPoint.XARP_TOTAL_TIME) : 0;\n    }\n\n    public int getVerzikTime()\n    {\n        return (verzikStartAccurate \u0026\u0026 verzikEndAccurate) ? getValue(DataPoint.VERZIK_TOTAL_TIME) : 0;\n    }\n\n    public boolean getOverallTimeAccurate()\n    {\n        return maidenStartAccurate \u0026\u0026 maidenEndAccurate\n                \u0026\u0026 bloatStartAccurate \u0026\u0026 bloatEndAccurate\n                \u0026\u0026 nyloStartAccurate \u0026\u0026 nyloEndAccurate\n                \u0026\u0026 soteStartAccurate \u0026\u0026 soteEndAccurate\n                \u0026\u0026 xarpStartAccurate \u0026\u0026 xarpEndAccurate\n                \u0026\u0026 verzikStartAccurate \u0026\u0026 verzikEndAccurate;\n    }\n\n    public boolean checkExit(TOBRoom room)\n    {\n        if (globalData.isEmpty() || globalData.get(0).split(\",\", -1)[3].equals(EXIT_FLAG))\n        {\n            switch (room)\n            {\n                case MAIDEN:\n                    maidenReset \u003d true;\n                    break;\n                case BLOAT:\n                    if (!bloatEndAccurate)\n                    {\n                        bloatWipe \u003d true;\n                    } else\n                    {\n                        bloatReset \u003d true;\n                    }\n                    break;\n                case NYLOCAS:\n                    nyloReset \u003d true;\n                    break;\n                case SOTETSEG:\n                    soteReset \u003d true;\n                    break;\n                case XARPUS:\n                    xarpReset \u003d true;\n                    break;\n            }\n            return false;\n        }\n        return true;\n    }\n\n    private final DataManager dataManager;\n\n    public int getValue(String name)\n    {\n        return dataManager.get(name);\n    }\n\n    public int getValue(DataPoint point)\n    {\n        return dataManager.get(point);\n    }\n\n    public int getTimeSum()\n    {\n        return getMaidenTime() + getBloatTime() + getNyloTime() + getSoteTime() + getXarpTime() + getVerzikTime();\n    }\n    public SimpleTOBData(String[] parameters, String filePath, String fileName) throws Exception\n    {\n        this.filePath \u003d filePath;\n        this.fileName \u003d fileName;\n        dataManager \u003d new DataManager();\n        partyComplete \u003d false;\n        maidenDefenseAccurate \u003d false;\n        bloatDefenseAccurate \u003d false;\n        nyloDefenseAccurate \u003d false;\n        soteDefenseAccurate \u003d false;\n        xarpDefenseAccurate \u003d false;\n\n        maidenThrallSpawns \u003d new ArrayList\u003c\u003e();\n        bloatThrallSpawns \u003d new ArrayList\u003c\u003e();\n        nyloThrallSpawns \u003d new ArrayList\u003c\u003e();\n        soteThrallSpawns \u003d new ArrayList\u003c\u003e();\n        xarpusThrallSpawns \u003d new ArrayList\u003c\u003e();\n        verzikThrallSpawns \u003d new ArrayList\u003c\u003e();\n\n        hardMode \u003d false;\n        storyMode \u003d false;\n        attacksP1 \u003d new ArrayList\u003c\u003e();\n        dawnDrops \u003d new ArrayList\u003c\u003e();\n\n        players \u003d new LinkedHashMap\u003c\u003e();\n        globalData \u003d new ArrayList\u003c\u003e(Arrays.asList(parameters));\n        Date endTime \u003d null;\n        int room \u003d -1;\n        for (String s : globalData)\n        {\n            try\n            {\n                String[] subData \u003d s.split(\",\");\n                int key \u003d Integer.parseInt(subData[3]);\n                if (key \u003d\u003d SPECTATE_FLAG)\n                {\n                    room \u003d Integer.parseInt(subData[4]);\n                    spectated \u003d true;\n                }\n                if (String.valueOf(key).equals(EXIT_FLAG))\n                {\n                    endTime \u003d new Date(Long.parseLong(subData[1]));\n                }\n            }\n            catch (Exception e)\n            {\n            }\n        }\n        if (room \u003e 0)\n        {\n            switch (room)\n            {\n                case 1:\n                    if (!(checkExit(MAIDEN) \u0026\u0026 parseBloat()))\n                        break;\n                case 2:\n                    if (!(checkExit(BLOAT) \u0026\u0026 parseNylo()))\n                        break;\n                case 3:\n                    if (!(checkExit(NYLOCAS) \u0026\u0026 parseSotetseg()))\n                        break;\n                case 4:\n                    if (!(checkExit(SOTETSEG) \u0026\u0026 parseXarpus()))\n                        break;\n                case 5:\n                    if (checkExit(XARPUS) \u0026\u0026 parseVerzik())\n                    {\n                        finishRaid();\n                    }\n            }\n        } else\n        {\n            try\n            {\n                if (parseMaiden())\n                {\n                    if (checkExit(MAIDEN) \u0026\u0026 parseBloat())\n                    {\n                        if (checkExit(BLOAT) \u0026\u0026 parseNylo())\n                        {\n                            if (checkExit(NYLOCAS) \u0026\u0026 parseSotetseg())\n                            {\n                                if (checkExit(SOTETSEG) \u0026\u0026 parseXarpus())\n                                {\n                                    if (checkExit(XARPUS) \u0026\u0026 parseVerzik())\n                                    {\n                                        finishRaid();\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            } catch (Exception ignored)\n            {\n            }\n        }\n        setOverallTime();\n        if (raidStarted !\u003d null \u0026\u0026 endTime !\u003d null)\n        {\n            long difference \u003d endTime.getTime() - raidStarted.getTime();\n            int ticks \u003d (int) (difference / 600);\n            dataManager.set(DataPoint.OVERALL_TIME, ticks);\n            dataManager.set(DataPoint.TIME_OUTSIDE_ROOMS, dataManager.get(DataPoint.OVERALL_TIME) - dataManager.get(DataPoint.CHALLENGE_TIME));\n        }\n        globalData.clear();\n    }\n\n    private void parseGeneric(String room, String[] subData)\n    {\n        try\n        {\n            switch (LogID.valueOf(Integer.parseInt(subData[3])))\n            {\n                case ENTERED_TOB:\n                    raidStarted \u003d new Date(Long.parseLong(subData[1]));\n                    break;\n                case PARTY_MEMBERS:\n                    for (int i \u003d 4; i \u003c 9; i++)\n                    {\n                        if (!subData[i].isEmpty())\n                        {\n                            dataManager.increment(PARTY_SIZE);\n                            players.put(subData[i].replaceAll(\"[^\\\\p{ASCII}]\", \" \").replaceAll(\" +\", \" \"), 0);\n                        }\n                    }\n                    break;\n                case DWH:\n                    dataManager.increment(Objects.requireNonNull(DataPoint.getValue(room + \" hit hammers\")));\n                    dataManager.incrementPlayerSpecific(DataPoint.getValue(room + \" hit hammers\"), subData[4]);\n                    if(!room.equals(\"Verzik\"))\n                    {\n                        dataManager.hammer(Objects.requireNonNull(DataPoint.getValue(room + \" defense\")));\n                    }\n                    break;\n                case BGS:\n                    if (!room.equals(\"Bloat\") || dataManager.get(DataPoint.BLOAT_DOWNS) \u003d\u003d 0)\n                    {\n                        dataManager.increment(Objects.requireNonNull(DataPoint.getValue(room + \" attempted BGS\")));\n                        dataManager.incrementPlayerSpecific(DataPoint.getValue(room + \" attempted BGS\"), subData[4]);\n                    }\n                    if(!room.equals(\"Verzik\"))\n                    {\n                        dataManager.bgs(Objects.requireNonNull(DataPoint.getValue(room + \" defense\")), Integer.parseInt(subData[5]));\n                    }\n                    break;\n                case PLAYER_DIED:\n                    dataManager.increment(Objects.requireNonNull(DataPoint.getValue(room + \" deaths\")));\n                    dataManager.increment(DataPoint.TOTAL_DEATHS);\n                    dataManager.incrementPlayerSpecific(DataPoint.getValue(room + \" deaths\"), subData[4]);\n                    dataManager.incrementPlayerSpecific(DataPoint.TOTAL_DEATHS, subData[4]);\n                    if (players.get(subData[4]) !\u003d null)\n                    {\n                        players.put(subData[4], players.get(subData[4]) + 1);\n                    }\n                    break;\n                case HAMMER_ATTEMPTED:\n                    dataManager.increment(Objects.requireNonNull(DataPoint.getValue(room + \" attempted hammers\")));\n                    dataManager.incrementPlayerSpecific(DataPoint.getValue(room + \" attempted hammers\"), subData[4]);\n                    break;\n                case IS_HARD_MODE:\n                    hardMode \u003d true;\n                    break;\n                case IS_STORY_MODE:\n                    storyMode \u003d true;\n                    break;\n                case THRALL_ATTACKED:\n                    dataManager.increment(Objects.requireNonNull(DataPoint.getValue(room + \" thrall attacks\")));\n                    dataManager.increment(DataPoint.THRALL_ATTACKS_TOTAL);\n                    break;\n                case THRALL_DAMAGED:\n                    int amount \u003d Integer.parseInt(subData[5]);\n                    dataManager.increment(Objects.requireNonNull(DataPoint.getValue(room + \" thrall damage\")), amount);\n                    dataManager.increment(DataPoint.THRALL_DAMAGE_TOTAL, amount);\n                    break;\n                case VENG_WAS_CAST:\n                    dataManager.increment(Objects.requireNonNull(DataPoint.getValue(room + \" veng casts\")));\n                    dataManager.increment(DataPoint.VENG_CASTS_TOTAL);\n                    break;\n                case VENG_WAS_PROCCED:\n                    dataManager.increment(Objects.requireNonNull(DataPoint.getValue(room + \" veng procs\")));\n                    dataManager.increment(DataPoint.VENG_PROCS_TOTAL);\n                    dataManager.increment(Objects.requireNonNull(DataPoint.getValue(room + \" veng damage\")), Integer.parseInt(subData[5]));\n                    dataManager.increment(DataPoint.VENG_DAMAGE_TOTAL, Integer.parseInt(subData[5]));\n                    break;\n                case KODAI_BOP:\n                    dataManager.increment(DataPoint.KODAI_BOPS);\n                    dataManager.incrementPlayerSpecific(DataPoint.KODAI_BOPS, subData[4]);\n                    break;\n                case DWH_BOP:\n                    dataManager.increment(DataPoint.DWH_BOPS);\n                    dataManager.incrementPlayerSpecific(DataPoint.DWH_BOPS, subData[4]);\n                    break;\n                case BGS_WHACK:\n                    dataManager.increment(DataPoint.BGS_WHACKS);\n                    dataManager.incrementPlayerSpecific(DataPoint.BGS_WHACKS, subData[4]);\n                    break;\n                case CHALLY_POKE:\n                    dataManager.increment(DataPoint.CHALLY_POKE);\n                    dataManager.incrementPlayerSpecific(DataPoint.CHALLY_POKE, subData[4]);\n                    break;\n            }\n        }\n        catch(Exception ignored)\n        {\n\n        }\n    }\n\n    private boolean parseVerzik()\n    {\n        int activeIndex \u003d 0;\n        for (String s : globalData)\n        {\n            String[] subData \u003d s.split(\",\", -1);\n            parseGeneric(\"Verzik\", subData);\n            try\n            {\n                switch (LogID.valueOf(Integer.parseInt(subData[3])))\n                {\n                    case LEFT_TOB:\n                        if (dataManager.get(DataPoint.VERZIK_TOTAL_TIME) \u003d\u003d 0)\n                        {\n                            if (!verzikStarted)\n                            {\n                                xarpReset \u003d true;\n                            } else\n                            {\n                                verzikWipe \u003d true;\n                            }\n                        } else\n                        {\n                            return true;\n                        }\n                        globalData \u003d new ArrayList\u003c\u003e(globalData.subList(activeIndex + 1, globalData.size()));\n                        Date endTime \u003d new Date(Long.parseLong(subData[1]));\n                        long difference \u003d endTime.getTime() - raidStarted.getTime();\n                        int ticks \u003d (int) (difference / 600);\n                        dataManager.set(DataPoint.OVERALL_TIME, ticks);\n                        return false;\n                    case DAWN_DROPPED:\n                        if (verzikStarted)\n                        {\n                            dawnDrops.add(Integer.parseInt(subData[4]));\n                        }\n                        break;\n                    case VERZIK_P1_START:\n                        verzikStarted \u003d true;\n                        break;\n                    case VERZIK_P1_DESPAWNED:\n                        dataManager.set(DataPoint.VERZIK_P1_SPLIT, Integer.parseInt(subData[4]) - 13);\n                        break;\n                    case VERZIK_P2_END:\n                        dataManager.set(DataPoint.VERZIK_P2_SPLIT, Integer.parseInt(subData[4]));\n                        dataManager.set(DataPoint.VERZIK_P2_DURATION, dataManager.get(DataPoint.VERZIK_P2_SPLIT) - dataManager.get(DataPoint.VERZIK_P1_SPLIT));\n                        dataManager.set(DataPoint.VERZIK_REDS_DURATION, dataManager.get(DataPoint.VERZIK_P2_SPLIT)-dataManager.get(VERZIK_REDS_SPLIT));\n                        try\n                        {\n                            int hp \u003d verzikHP.get(dataManager.get(VERZIK_REDS_SPLIT));\n                            dataManager.set(DataPoint.VERZIK_REDS_PROC_PERCENT, (hp));\n                        } catch\n                        (Exception ignored)\n                        {\n\n                        }\n                        break;\n                    case VERZIK_P3_DESPAWNED:\n                        dataManager.set(DataPoint.VERZIK_TOTAL_TIME, Integer.parseInt(subData[4]));\n                        dataManager.set(DataPoint.VERZIK_P3_DURATION, dataManager.get(DataPoint.VERZIK_TOTAL_TIME) - dataManager.get(DataPoint.VERZIK_P2_SPLIT));\n                        dataManager.set(DataPoint.CHALLENGE_TIME, (Integer.parseInt(subData[4]) + dataManager.get(DataPoint.VERZIK_ENTRY)));\n                        break;\n                    case VERZIK_CRAB_SPAWNED:\n                        if (!subData[4].equalsIgnoreCase(\"\"))\n                        {\n                            if (dataManager.get(DataPoint.VERZIK_P2_SPLIT) \u003e 1)\n                            {\n                                if (!p3Crabs.contains(Integer.parseInt(subData[4])))\n                                {\n                                    p3Crabs.add(Integer.parseInt(subData[4]));\n                                }\n                            } else\n                            {\n                                if (!p2Crabs.contains(Integer.parseInt(subData[4])))\n                                {\n                                    p2Crabs.add(Integer.parseInt(subData[4]));\n                                }\n                            }\n                        }\n                        dataManager.increment(VERZIK_CRABS_SPAWNED);\n                        break;\n                    case VERZIK_P2_REDS_PROC:\n                        if (dataManager.get(VERZIK_REDS_SPLIT) \u003d\u003d 0)\n                        {\n                            dataManager.set(VERZIK_REDS_SPLIT, Integer.parseInt(subData[4]));\n                            dataManager.set(VERZIK_P2_TILL_REDS, Integer.parseInt(subData[4]) - dataManager.get(DataPoint.VERZIK_P1_SPLIT));\n                        }\n                        redsProc.add(Integer.parseInt(subData[4]));\n                        dataManager.increment(DataPoint.VERZIK_REDS_SETS);\n                        break;\n                    case ACCURATE_VERZIK_START:\n                        verzikStartAccurate \u003d true;\n                        break;\n                    case ACCURATE_VERZIK_END:\n                        verzikEndAccurate \u003d true;\n                        verzikTimeAccurate \u003d verzikStartAccurate;\n                        break;\n                    case DAWN_SPEC:\n                        dawnSpecs.add(new DawnSpec(subData[4], Integer.parseInt(subData[5])));\n                        break;\n                    case DAWN_DAMAGE:\n                        for (DawnSpec dawnSpec : dawnSpecs)\n                        {\n                            if (dawnSpec.tick \u003d\u003d Integer.parseInt(subData[5]))\n                            {\n                                dawnSpec.setDamage(Integer.parseInt(subData[4]));\n                            }\n                        }\n                        break;\n                    case UPDATE_HP:\n                        verzikHP.put(Integer.parseInt(subData[5]), Integer.parseInt(subData[4]));\n                        break;\n                    case WEBS_STARTED:\n                        try\n                        {\n                            websStart.add(Integer.parseInt(subData[4]));\n                            if (dataManager.get(DataPoint.VERZIK_HP_AT_WEBS) \u003d\u003d -1)\n                            {\n                                int hp \u003d verzikHP.get(Integer.parseInt(subData[4]) - 1);\n                                hp /\u003d 10;\n                                dataManager.set(DataPoint.VERZIK_HP_AT_WEBS, hp);\n                            }\n                        }\n                        catch(Exception ignored)\n                        {\n\n                        }\n                        break;\n                    case THRALL_SPAWN:\n                        verzikThrallSpawns.add(new ThrallOutlineBox(subData[4], Integer.parseInt(subData[5]), Integer.parseInt(subData[6])));\n                        break;\n                }\n            } catch (Exception e)\n            {\n                log.info(\"Failed: \" + s);\n            }\n            activeIndex++;\n        }\n        globalData \u003d new ArrayList\u003c\u003e(globalData.subList(activeIndex + 1, globalData.size()));\n        return true;\n    }\n\n    private boolean isTimeAccurateThroughRoom(TOBRoom room)\n    {\n        switch (room)\n        {\n            case VERZIK:\n                if (!verzikTimeAccurate)\n                {\n                    return false;\n                }\n            case XARPUS:\n                if (!xarpTimeAccurate)\n                {\n                    return false;\n                }\n            case SOTETSEG:\n                if (!soteTimeAccurate)\n                {\n                    return false;\n                }\n            case NYLOCAS:\n                if (!nyloTimeAccurate)\n                {\n                    return false;\n                }\n            case BLOAT:\n                if (!bloatTimeAccurate)\n                {\n                    return false;\n                }\n            case MAIDEN:\n                return maidenTimeAccurate;\n        }\n        return false;\n    }\n\n    private boolean parseXarpus()\n    {\n        int activeIndex \u003d 0;\n        loop:\n        for (String s : globalData)\n        {\n            String[] subData \u003d s.split(\",\", -1);\n            parseGeneric(\"Xarp\", subData);\n            try\n            {\n                switch (LogID.valueOf(Integer.parseInt(subData[3])))\n                {\n                    case LEFT_TOB:\n                        if (dataManager.get(DataPoint.XARP_TOTAL_TIME) !\u003d 0)\n                        {\n                            xarpReset \u003d true;\n                        } else\n                        {\n                            if (!xarpStarted)\n                            {\n                                soteReset \u003d true;\n                            } else\n                            {\n                                xarpWipe \u003d true;\n                            }\n                        }\n                        globalData \u003d new ArrayList\u003c\u003e(globalData.subList(activeIndex + 1, globalData.size()));\n                        Date endTime \u003d new Date(Long.parseLong(subData[1]));\n                        long difference \u003d endTime.getTime() - raidStarted.getTime();\n                        int ticks \u003d (int) (difference / 600);\n                        dataManager.set(DataPoint.OVERALL_TIME, ticks);\n                        return false;\n                    case XARPUS_STARTED:\n                        xarpStarted \u003d true;\n                        if (partyComplete)\n                        {\n                            xarpDefenseAccurate \u003d true;\n                        }\n                        break;\n                    case XARPUS_HEAL:\n                        dataManager.increment(DataPoint.XARP_HEALING, getXarpusHealAmount());\n                        break;\n                    case XARPUS_SCREECH:\n                        dataManager.set(DataPoint.XARP_SCREECH, Integer.parseInt(subData[4]));\n                        break;\n                    case XARPUS_DESPAWNED:\n                        dataManager.set(DataPoint.XARP_TOTAL_TIME, Integer.parseInt(subData[4]));\n                        dataManager.set(DataPoint.XARP_POST_SCREECH, dataManager.get(DataPoint.XARP_TOTAL_TIME) - dataManager.get(DataPoint.XARP_SCREECH));\n                        if (isTimeAccurateThroughRoom(SOTETSEG))\n                            dataManager.set(DataPoint.VERZIK_ENTRY, Integer.parseInt(subData[4]) + dataManager.get(DataPoint.XARP_ENTRY));\n                        break loop;\n                    case ACCURATE_XARP_START:\n                        xarpStartAccurate \u003d true;\n                        break;\n                    case ACCURATE_XARP_END:\n                        xarpTimeAccurate \u003d xarpStartAccurate;\n                        xarpEndAccurate \u003d true;\n                        break;\n                    case THRALL_SPAWN:\n                        xarpusThrallSpawns.add(new ThrallOutlineBox(subData[4], Integer.parseInt(subData[5]), Integer.parseInt(subData[6])));\n                        break;\n                }\n            }\n            catch(Exception e)\n            {\n                log.info(\"Failed on \" + s);\n            }\n            activeIndex++;\n        }\n        globalData \u003d new ArrayList\u003c\u003e(globalData.subList(activeIndex + 1, globalData.size()));\n        return true;\n    }\n\n    private int getXarpusHealAmount()\n    {\n        int amount \u003d 0;\n        switch (getScale())\n        {\n            case 5:\n                amount \u003d 8;\n                break;\n            case 4:\n                amount \u003d 9;\n                break;\n            case 3:\n                amount \u003d 12;\n                break;\n            case 2:\n                amount \u003d 16;\n                break;\n            case 1:\n                amount \u003d 20;\n                break;\n        }\n        return amount;\n    }\n\n    private boolean parseSotetseg()\n    {\n        int activeIndex \u003d 0;\n        loop:\n        for (String s : globalData)\n        {\n            String[] subData \u003d s.split(\",\", -1);\n            parseGeneric(\"Sote\", subData);\n            try\n            {\n                switch (LogID.valueOf(Integer.parseInt(subData[3])))\n                {\n                    case DWH:\n                        if (dataManager.get(DataPoint.SOTE_P1_SPLIT) \u003d\u003d 0)\n                        {\n                            dataManager.increment(DataPoint.SOTE_SPECS_P1);\n                            dataManager.increment(DataPoint.SOTE_SPECS_TOTAL);\n                        } else if (dataManager.get(DataPoint.SOTE_P2_SPLIT) \u003d\u003d 0)\n                        {\n                            dataManager.increment(DataPoint.SOTE_SPECS_P2);\n                            dataManager.increment(DataPoint.SOTE_SPECS_TOTAL);\n                        } else\n                        {\n                            dataManager.increment(DataPoint.SOTE_SPECS_P3);\n                            dataManager.increment(DataPoint.SOTE_SPECS_TOTAL);\n                        }\n                        break;\n                    case LEFT_TOB:\n                        if (dataManager.get(DataPoint.SOTE_TOTAL_TIME) !\u003d 0)\n                        {\n                            soteReset \u003d true;\n                        } else\n                        {\n                            if (!soteStarted)\n                            {\n                                nyloReset \u003d true;\n                            } else\n                            {\n                                soteWipe \u003d true;\n                            }\n                        }\n                        globalData \u003d new ArrayList\u003c\u003e(globalData.subList(activeIndex + 1, globalData.size()));\n                        Date endTime \u003d new Date(Long.parseLong(subData[1]));\n                        long difference \u003d endTime.getTime() - raidStarted.getTime();\n                        int ticks \u003d (int) (difference / 600);\n                        dataManager.set(DataPoint.OVERALL_TIME, ticks);\n                        return false;\n                    case SOTETSEG_STARTED:\n                        soteStarted \u003d true;\n                        if (partyComplete)\n                        {\n                            soteDefenseAccurate \u003d true;\n                        }\n                        break;\n                    case SOTETSEG_FIRST_MAZE_STARTED:\n                        dataManager.set(DataPoint.SOTE_P1_SPLIT, Integer.parseInt(subData[4]));\n                        break;\n                    case SOTETSEG_FIRST_MAZE_ENDED:\n                        dataManager.set(DataPoint.SOTE_M1_DURATION, Integer.parseInt(subData[4]) - dataManager.get(DataPoint.SOTE_P1_SPLIT));\n                        dataManager.set(DataPoint.SOTE_M1_SPLIT, Integer.parseInt(subData[4]));\n                        break;\n                    case SOTETSEG_SECOND_MAZE_STARTED:\n                        dataManager.set(DataPoint.SOTE_P2_DURATION, Integer.parseInt(subData[4]) - dataManager.get(DataPoint.SOTE_M1_SPLIT));\n                        dataManager.set(DataPoint.SOTE_P2_SPLIT, Integer.parseInt(subData[4]));\n                        break;\n                    case SOTETSEG_SECOND_MAZE_ENDED:\n                        dataManager.set(DataPoint.SOTE_M2_DURATION, Integer.parseInt(subData[4]) - dataManager.get(DataPoint.SOTE_P2_SPLIT));\n                        dataManager.set(DataPoint.SOTE_M2_SPLIT, Integer.parseInt(subData[4]));\n                        dataManager.set(DataPoint.SOTE_MAZE_SUM, dataManager.get(DataPoint.SOTE_M1_DURATION) + dataManager.get(DataPoint.SOTE_M2_DURATION));\n                        break;\n                    case SOTETSEG_ENDED:\n                        dataManager.set(DataPoint.SOTE_TOTAL_TIME, Integer.parseInt(subData[4]));\n                        dataManager.set(DataPoint.SOTE_P3_DURATION, dataManager.get(DataPoint.SOTE_TOTAL_TIME) - dataManager.get(DataPoint.SOTE_M2_SPLIT));\n                        if (isTimeAccurateThroughRoom(NYLOCAS))\n                            dataManager.set(DataPoint.XARP_ENTRY, Integer.parseInt(subData[4]) + dataManager.get(DataPoint.SOTE_ENTRY));\n                        break loop;\n                    case ACCURATE_SOTE_START:\n                        soteStartAccurate \u003d true;\n                        break;\n                    case ACCURATE_SOTE_END:\n                        soteEndAccurate \u003d true;\n                        soteTimeAccurate \u003d soteStartAccurate;\n                        if (soteTimeAccurate \u0026\u0026 bloatTimeAccurate \u0026\u0026 !spectated)\n                        {\n                            nyloStartAccurate \u003d true;\n                            nyloEndAccurate \u003d true;\n                            nyloTimeAccurate \u003d true;\n                        }\n                        break;\n                    case THRALL_SPAWN:\n                        soteThrallSpawns.add(new ThrallOutlineBox(subData[4], Integer.parseInt(subData[5]), Integer.parseInt(subData[6])));\n                        break;\n\n                }\n            }\n            catch(Exception e)\n            {\n                log.info(\"Failed on \" + s);\n            }\n            activeIndex++;\n        }\n        globalData \u003d new ArrayList\u003c\u003e(globalData.subList(activeIndex + 1, globalData.size()));\n        return true;\n    }\n\n    private boolean parseNylo()\n    {\n        int activeIndex \u003d 0;\n        loop:\n        for (String s : globalData)\n        {\n            String[] subData \u003d s.split(\",\", -1);\n            parseGeneric(\"Nylo\", subData);\n            try\n            {\n                switch (LogID.valueOf(Integer.parseInt(subData[3])))\n                {\n                    case LEFT_TOB:\n                        if (dataManager.get(NYLOCAS_PILLAR_DESPAWN_TICK) - 5 \u003c dataManager.get(DataPoint.NYLO_BOSS_SPAWN))\n                        {\n                            dataManager.set(DataPoint.NYLO_BOSS_SPAWN, 0);\n                            dataManager.set(DataPoint.NYLO_TOTAL_TIME, 0);\n                        }\n                        if (dataManager.get(DataPoint.NYLO_TOTAL_TIME) !\u003d 0)\n                        {\n                            nyloReset \u003d true;\n                        } else\n                        {\n                            if (!nyloStarted)\n                            {\n                                if (!bloatEndAccurate)\n                                {\n                                    bloatWipe \u003d true;\n                                } else\n                                {\n                                    bloatReset \u003d true;\n                                }\n                            } else\n                            {\n                                nyloWipe \u003d true;\n                            }\n                        }\n                        globalData \u003d new ArrayList\u003c\u003e(globalData.subList(activeIndex + 1, globalData.size()));\n                        Date endTime \u003d new Date(Long.parseLong(subData[1]));\n                        long difference \u003d endTime.getTime() - raidStarted.getTime();\n                        int ticks \u003d (int) (difference / 600);\n                        dataManager.set(DataPoint.OVERALL_TIME, ticks);\n                        return false;\n                    case NYLO_PILLAR_SPAWN:\n                        nyloStarted \u003d true;\n                        break;\n                    case NYLO_STALL:\n                        nyloWaveStalled.add(Integer.parseInt(subData[5]));\n                        dataManager.increment(DataPoint.NYLO_STALLS_TOTAL);\n                        if (Integer.parseInt(subData[4]) \u003e 19)\n                        {\n                            dataManager.increment(DataPoint.NYLO_STALLS_POST_20);\n                        } else\n                        {\n                            dataManager.increment(DataPoint.NYLO_STALLS_PRE_20);\n                        }\n                        break;\n                    case RANGE_SPLIT:\n                        dataManager.increment(DataPoint.NYLO_SPLITS_RANGE);\n                        break;\n                    case MAGE_SPLIT:\n                        dataManager.increment(DataPoint.NYLO_SPLITS_MAGE);\n                        break;\n                    case MELEE_SPLIT:\n                        dataManager.increment(DataPoint.NYLO_SPLITS_MELEE);\n                        break;\n                    case LAST_WAVE:\n                        dataManager.set(DataPoint.NYLO_LAST_WAVE, Integer.parseInt(subData[4]));\n                        break;\n                    case LAST_DEAD:\n                        int nyloLastDead \u003d Integer.parseInt(subData[4]);\n                        dataManager.set(NYLO_LAST_DEAD, nyloLastDead);\n                        int offset \u003d 20 - (nyloLastDead % 4); //4 cycle (16 tick) delay for boss + difference to cycle (4-time%instance reference)\n                        dataManager.set(DataPoint.NYLO_BOSS_SPAWN, nyloLastDead + offset);\n                        dataManager.set(DataPoint.NYLO_CLEANUP, nyloLastDead - dataManager.get(DataPoint.NYLO_LAST_WAVE));\n                        break;\n                    case NYLO_WAVE:\n                        waveSpawns.put(Integer.parseInt(subData[4]), Integer.parseInt(subData[5]));\n                        break;\n                    case BOSS_SPAWN: //The number people are used to seeing on timers for boss spawn is actually 2 ticks prior to the spawn call for the boss\n                        dataManager.set(DataPoint.NYLO_BOSS_SPAWN, Integer.parseInt(subData[4]) - 2);\n                        if (partyComplete)\n                        {\n                            nyloDefenseAccurate \u003d true;\n                        }\n                        break;\n                    case MELEE_PHASE:\n                        dataManager.increment(DataPoint.NYLO_ROTATIONS_MELEE);\n                        break;\n                    case MAGE_PHASE:\n                        dataManager.increment(DataPoint.NYLO_ROTATIONS_MAGE);\n                        break;\n                    case RANGE_PHASE:\n                        dataManager.increment(DataPoint.NYLO_ROTATIONS_RANGE);\n                        break;\n                    case NYLO_DESPAWNED:\n                        if (Integer.parseInt(subData[4]) - dataManager.get(DataPoint.NYLO_BOSS_SPAWN) \u003e 30)\n                        {\n                            dataManager.set(DataPoint.NYLO_TOTAL_TIME, Integer.parseInt(subData[4]));\n                            dataManager.set(DataPoint.NYLO_BOSS_DURATION, dataManager.get(DataPoint.NYLO_TOTAL_TIME) - dataManager.get(DataPoint.NYLO_BOSS_SPAWN));\n                            if (isTimeAccurateThroughRoom(BLOAT))\n                                dataManager.set(DataPoint.SOTE_ENTRY, Integer.parseInt(subData[4]) + dataManager.get(DataPoint.NYLO_ENTRY));\n                        }\n                        break loop;\n                    case NYLO_PILLAR_DESPAWNED:\n                        dataManager.set(NYLOCAS_PILLAR_DESPAWN_TICK, Integer.parseInt(subData[4]));\n                        break;\n                    case ACCURATE_NYLO_START:\n                        nyloStartAccurate \u003d true;\n                        break;\n                    case ACCURATE_NYLO_END:\n                        nyloEndAccurate \u003d true;\n                        nyloTimeAccurate \u003d nyloStartAccurate;\n                        break;\n                    case THRALL_SPAWN:\n                        nyloThrallSpawns.add(new ThrallOutlineBox(subData[4], Integer.parseInt(subData[5]), Integer.parseInt(subData[6])));\n                        break;\n                }\n            }\n            catch(Exception e)\n            {\n                log.info(\"Failed on \" + s);\n            }\n            activeIndex++;\n        }\n        globalData \u003d new ArrayList\u003c\u003e(globalData.subList(activeIndex + 1, globalData.size()));\n        return true;\n    }\n\n    private boolean parseBloat()\n    {\n        int activeIndex \u003d 0;\n        bloatDefenseAccurate \u003d maidenDefenseAccurate;\n        loop:\n        for (String s : globalData)\n        {\n            String[] subData \u003d s.split(\",\", -1);\n            parseGeneric(\"Bloat\", subData);\n            try\n            {\n                switch (LogID.valueOf(Integer.parseInt(subData[3])))\n                {\n                    case BLOAT_HP_1ST_DOWN:\n                        dataManager.set(DataPoint.BLOAT_HP_FIRST_DOWN, Integer.parseInt(subData[4]) / 10);\n                        break;\n                    case BLOAT_SCYTHE_1ST_WALK:\n                        if (dataManager.get(DataPoint.BLOAT_DOWNS) \u003d\u003d 0)\n                        {\n                            dataManager.increment(DataPoint.BLOAT_FIRST_WALK_SCYTHES);\n                            dataManager.incrementPlayerSpecific(DataPoint.BLOAT_FIRST_WALK_SCYTHES, subData[4]);\n                        }\n                        break;\n                    case LEFT_TOB:\n                        if (bloatEndAccurate)\n                        {\n                            bloatReset \u003d true;\n                        } else\n                        {\n                            if (!bloatStarted)\n                            {\n                                maidenReset \u003d true;\n                            } else\n                            {\n                                bloatWipe \u003d true;\n                            }\n                        }\n                        globalData \u003d new ArrayList\u003c\u003e(globalData.subList(activeIndex + 1, globalData.size()));\n                        Date endTime \u003d new Date(Long.parseLong(subData[1]));\n                        long difference \u003d endTime.getTime() - raidStarted.getTime();\n                        int ticks \u003d (int) (difference / 600);\n                        dataManager.set(DataPoint.OVERALL_TIME, ticks);\n                        return false;\n                    case PLAYER_DIED:\n                        if (dataManager.get(DataPoint.BLOAT_DOWNS) \u003d\u003d 0)\n                        {\n                            dataManager.increment(DataPoint.BLOAT_FIRST_WALK_DEATHS);\n                            dataManager.incrementPlayerSpecific(DataPoint.BLOAT_FIRST_WALK_DEATHS, subData[4]);\n                        }\n                        break;\n                    case BLOAT_SPAWNED:\n                        bloatStarted \u003d true;\n                        if (partyComplete)\n                        {\n                            bloatDefenseAccurate \u003d true;\n                        }\n                        break;\n                    case BLOAT_DOWN:\n                        if (dataManager.get(DataPoint.BLOAT_DOWNS) \u003d\u003d 0)\n                        {\n                            dataManager.set(DataPoint.BLOAT_FIRST_DOWN_TIME, Integer.parseInt(subData[4]));\n                        }\n                        dataManager.increment(DataPoint.BLOAT_DOWNS);\n                        bloatDowns.add(Integer.parseInt(subData[4]));\n                        break;\n                    case BLOAT_DESPAWN:\n                        dataManager.set(DataPoint.BLOAT_TOTAL_TIME, Integer.parseInt(subData[4]));\n                        if (isTimeAccurateThroughRoom(MAIDEN))\n                            dataManager.set(DataPoint.NYLO_ENTRY, Integer.parseInt(subData[4]) + dataManager.get(DataPoint.MAIDEN_TOTAL_TIME));\n                        break loop;\n                    case ACCURATE_BLOAT_START:\n                        bloatStartAccurate \u003d true;\n                        break;\n                    case ACCURATE_BLOAT_END:\n                        bloatEndAccurate \u003d true;\n                        bloatTimeAccurate \u003d bloatStartAccurate;\n                        break;\n                    case THRALL_SPAWN:\n                        bloatThrallSpawns.add(new ThrallOutlineBox(subData[4], Integer.parseInt(subData[5]), Integer.parseInt(subData[6])));\n                        break;\n                }\n            }\n            catch(Exception e)\n            {\n                log.info(\"Failed on \" + s);\n            }\n            activeIndex++;\n        }\n        globalData \u003d new ArrayList\u003c\u003e(globalData.subList(activeIndex + 1, globalData.size()));\n        return true;\n    }\n\n    private boolean parseMaiden()\n    {\n        int activeIndex \u003d 0;\n        String lastProc \u003d \" 70s\";\n        loop:\n        for (String s : globalData)\n        {\n            String[] subData \u003d s.split(\",\", -1);\n            parseGeneric(\"Maiden\", subData);\n            try\n            {\n                switch (LogID.valueOf(Integer.parseInt(subData[3])))\n                {\n                    case LEFT_TOB:\n                        int percent \u003d 100;\n                        if (dataManager.get(DataPoint.MAIDEN_CHINS_THROWN) !\u003d 0)\n                        {\n                            double percentDouble \u003d ((double) (dataManager.get(DataPoint.MAIDEN_CHINS_THROWN_WRONG_DISTANCE)) / dataManager.get(DataPoint.MAIDEN_CHINS_THROWN)) * 100;\n                            percent \u003d (int) percentDouble;\n                        }\n                        dataManager.set(DataPoint.MAIDEN_CHIN_CORRECT_DISTANCE_PERCENT, percent);\n                        if (dataManager.get(DataPoint.MAIDEN_TOTAL_TIME) !\u003d 0)\n                        {\n                            maidenReset \u003d true;\n                        } else\n                        {\n                            if (!maidenSpawned)\n                            {\n                                maidenReset \u003d true;\n                                resetBeforeMaiden \u003d true;\n                            } else\n                            {\n                                maidenWipe \u003d true;\n                            }\n                        }\n                        globalData \u003d new ArrayList\u003c\u003e(globalData.subList(activeIndex + 1, globalData.size()));\n                        Date endTime \u003d new Date(Long.parseLong(subData[1]));\n                        long difference \u003d endTime.getTime() - raidStarted.getTime();\n                        int ticks \u003d (int) (difference / 600);\n                        dataManager.set(DataPoint.OVERALL_TIME, ticks);\n                        return false;\n                    case BLOOD_THROWN:\n                        dataManager.increment(DataPoint.MAIDEN_BLOOD_THROWN);\n                        break;\n                    case BLOOD_SPAWNED:\n                        dataManager.increment(DataPoint.MAIDEN_BLOOD_SPAWNED);\n                        break;\n                    case CRAB_LEAK:\n                        if (dataManager.get(DataPoint.MAIDEN_TOTAL_TIME) \u003d\u003d 0) //TODO: see case 16 fix\n                        {\n                            dataManager.increment(DataPoint.MAIDEN_CRABS_LEAKED);\n                            int crabHP \u003d -1;\n                            try\n                            {\n                                crabHP \u003d Integer.parseInt(subData[5]);\n\n                                maidenCrabs.add(new StringInt(subData[4], crabHP));\n                            } catch (Exception ignored)\n                            {\n                            }\n                            dataManager.increment(DataPoint.MAIDEN_HP_HEALED, crabHP * 2);\n                            int maxCrabHP \u003d 100;\n                            switch (players.size())\n                            {\n                                case 1:\n                                case 2:\n                                case 3:\n                                    maxCrabHP \u003d 75;\n                                    break;\n                                case 4:\n                                    maxCrabHP \u003d 87;\n                                    break;\n                            }\n                            if (crabHP \u003d\u003d maxCrabHP)\n                            {\n                                dataManager.increment(DataPoint.MAIDEN_CRABS_LEAKED_FULL_HP);\n                            }\n\n                            if (subData[4].contains(\"30\"))\n                            {\n                                maidenSkip \u003d false;\n                            }\n                        }\n                        break;\n                    case MAIDEN_PLAYER_DRAINED:\n                        dataManager.increment(DataPoint.MAIDEN_MELEE_DRAINS);\n                        dataManager.incrementPlayerSpecific(DataPoint.MAIDEN_MELEE_DRAINS, subData[4]);\n                        break;\n                    case MAIDEN_SPAWNED:\n                        maidenSpawned \u003d true;\n                        if (partyComplete)\n                        {\n                            maidenDefenseAccurate \u003d true;\n                        }\n                        break;\n                    case MAIDEN_70S:\n                        dataManager.set(DataPoint.MAIDEN_70_SPLIT, Integer.parseInt(subData[4]));\n                        lastProc \u003d \" 70s\";\n                        break;\n                    case MAIDEN_50S:\n                        dataManager.set(DataPoint.MAIDEN_50_SPLIT, Integer.parseInt(subData[4]));\n                        dataManager.set(DataPoint.MAIDEN_7050_SPLIT, Integer.parseInt(subData[4]) - dataManager.get(DataPoint.MAIDEN_70_SPLIT));\n                        lastProc \u003d \" 50s\";\n                        break;\n                    case MAIDEN_30S:\n                        dataManager.set(DataPoint.MAIDEN_30_SPLIT, Integer.parseInt(subData[4]));\n                        dataManager.set(DataPoint.MAIDEN_5030_SPLIT, Integer.parseInt(subData[4]) - dataManager.get(DataPoint.MAIDEN_50_SPLIT));\n                        lastProc \u003d \" 30s\";\n                        break;\n                    case MAIDEN_0HP:\n                        dataManager.set(DataPoint.MAIDEN_TOTAL_TIME, Integer.parseInt(subData[4]) + 7);\n                        dataManager.set(DataPoint.MAIDEN_SKIP_SPLIT, dataManager.get(DataPoint.MAIDEN_TOTAL_TIME) - dataManager.get(DataPoint.MAIDEN_30_SPLIT));\n                        if (globalData.get(activeIndex + 1).split(\",\", -1)[3].equals(\"4\"))\n                            maidenReset \u003d true;\n                        break loop;\n                    case MAIDEN_DESPAWNED:\n                        dataManager.set(DataPoint.MAIDEN_TOTAL_TIME, Integer.parseInt(subData[4]));\n                        dataManager.set(DataPoint.MAIDEN_SKIP_SPLIT, dataManager.get(DataPoint.MAIDEN_TOTAL_TIME) - dataManager.get(DataPoint.MAIDEN_30_SPLIT));\n                        if (globalData.get(activeIndex + 1).split(\",\", -1)[3].equals(\"4\"))\n                            maidenReset \u003d true;\n                        break loop;\n                    case MATOMENOS_SPAWNED:\n                        maidenCrabSpawn.add(subData[4]);\n                        break;\n                    case MAIDEN_SCUFFED:\n                        if (!maidenScuffed)\n                        {\n                            firstMaidenCrabScuffed \u003d lastProc;\n                            if(!maidenCrabSpawn.isEmpty())\n                            {\n                                firstMaidenCrabScuffed \u003d maidenCrabSpawn.get(maidenCrabSpawn.size()-1);\n                            }\n                        }\n                        maidenScuffed \u003d true;\n                        break;\n                    case BLOAT_SPAWNED:\n                        //todo: joined after maiden was kill. mark this somehow?\n                        maidenReset \u003d true; //TODO remove\n                        break loop;\n                    case SPECTATE:\n                        spectated \u003d true;\n                        break;\n                    case MAIDEN_DINHS_SPEC:\n                        dataManager.increment(DataPoint.MAIDEN_DINHS_SPECS);\n                        dataManager.incrementPlayerSpecific(DataPoint.MAIDEN_DINHS_SPECS, subData[4]);\n                        String[] targets \u003d subData[6].split(\":\");\n                        int targetCountThisSpec \u003d 0;\n                        int crabCountThisSpec \u003d 0;\n                        String[] specData \u003d subData[7].split(\":\");\n                        if (specData.length !\u003d 5)\n                        {\n                            break;\n                        }\n                        for (String target : targets)\n                        {\n                            String[] targetData \u003d target.split(\"~\");\n                            if (targetData.length \u003d\u003d 3)\n                            {\n                                targetCountThisSpec++;\n                                String spawnID \u003d targetData[1];\n                                if (!spawnID.equals(\"^\")) //Target is crab\n                                {\n                                    crabCountThisSpec++;\n                                }\n                            }\n                        }\n                        int averageHP \u003d Integer.parseInt(specData[0]);\n                        int belowThreshold \u003d Integer.parseInt(specData[1]);\n                        if (dataManager.get(DataPoint.MAIDEN_DINHS_SPECS) \u003d\u003d 0)\n                        {\n                            int percentCrabsTargeted \u003d (int) ((((double) crabCountThisSpec) / targetCountThisSpec) * 100);\n                            int percentCrabsUnder27Targeted \u003d (int) ((((double) belowThreshold) / crabCountThisSpec) * 100);\n\n                            dataManager.set(DataPoint.MAIDEN_DINHS_TARGETS_HIT, targetCountThisSpec);\n                            dataManager.set(DataPoint.MAIDEN_DINHS_CRABS_HIT, crabCountThisSpec);\n                            dataManager.set(DataPoint.MAIDEN_DINHS_AVERAGE_HP_HIT, averageHP);\n                            dataManager.set(DataPoint.MAIDEN_DINHS_CRABS_UNDER_27_TARGETED, belowThreshold);\n                            dataManager.set(DataPoint.MAIDEN_DINHS_PERCENT_TARGETS_CRAB, percentCrabsTargeted);\n                            dataManager.set(DataPoint.MAIDEN_DINHS_CRABS_UNDER_27_TARGETED_PERCENT, percentCrabsUnder27Targeted);\n                        } else\n                        {\n                            int previousAverage \u003d dataManager.get(DataPoint.MAIDEN_DINHS_AVERAGE_HP_HIT);\n                            int previousCrabsHit \u003d dataManager.get(DataPoint.MAIDEN_DINHS_CRABS_HIT);\n                            int previousTotalHit \u003d dataManager.get(DataPoint.MAIDEN_DINHS_TARGETS_HIT);\n                            int previousBelow27Hit \u003d dataManager.get(DataPoint.MAIDEN_DINHS_CRABS_UNDER_27_TARGETED);\n\n                            dataManager.set(DataPoint.MAIDEN_DINHS_TARGETS_HIT, previousTotalHit + targetCountThisSpec);\n                            dataManager.set(DataPoint.MAIDEN_DINHS_CRABS_HIT, previousCrabsHit + crabCountThisSpec);\n                            dataManager.set(DataPoint.MAIDEN_DINHS_CRABS_UNDER_27_TARGETED, previousBelow27Hit + belowThreshold);\n\n                            int roundedAverageSum \u003d ((previousAverage * previousCrabsHit) + (averageHP * crabCountThisSpec));\n                            int roundedAverageCumulative \u003d (int) (((double) roundedAverageSum) / (previousCrabsHit + crabCountThisSpec));\n\n                            dataManager.set(DataPoint.MAIDEN_DINHS_AVERAGE_HP_HIT, roundedAverageCumulative);\n\n                            int percentTargetedCumulative \u003d (int) (((double) (previousCrabsHit + crabCountThisSpec) / (previousTotalHit + targetCountThisSpec)) * 100);\n\n                            dataManager.set(DataPoint.MAIDEN_DINHS_PERCENT_TARGETS_CRAB, percentTargetedCumulative);\n\n                            int percentBelow27Cumulative \u003d (int) ((double) (previousBelow27Hit + belowThreshold) / (previousCrabsHit + crabCountThisSpec));\n\n                            dataManager.set(DataPoint.MAIDEN_DINHS_CRABS_UNDER_27_TARGETED_PERCENT, percentBelow27Cumulative);\n                        }\n                        break;\n                    case MAIDEN_CHIN_THROWN:\n                        dataManager.increment(DataPoint.MAIDEN_CHINS_THROWN);\n                        dataManager.incrementPlayerSpecific(DataPoint.MAIDEN_CHINS_THROWN, subData[4]);\n                        if (Integer.parseInt(subData[5]) \u003c 4 || Integer.parseInt(subData[5]) \u003e 6)\n                        {\n                            dataManager.increment(DataPoint.MAIDEN_CHINS_THROWN_WRONG_DISTANCE);\n                            dataManager.incrementPlayerSpecific(DataPoint.MAIDEN_CHINS_THROWN_WRONG_DISTANCE, subData[4]);\n                        }\n                        break;\n                    case ACCURATE_MAIDEN_START:\n                        maidenStartAccurate \u003d true;\n                        break;\n                    case ACCURATE_MAIDEN_END:\n                        maidenEndAccurate \u003d true;\n                        maidenTimeAccurate \u003d maidenStartAccurate;\n                        break;\n                    case THRALL_SPAWN:\n                        maidenThrallSpawns.add(new ThrallOutlineBox(subData[4], Integer.parseInt(subData[5]), Integer.parseInt(subData[6])));\n                        break;\n                    case PLAYER_STOOD_IN_THROWN_BLOOD:\n                        dataManager.increment(DataPoint.MAIDEN_PLAYER_STOOD_IN_THROWN_BLOOD);\n                        dataManager.increment(DataPoint.MAIDEN_HEALS_FROM_THROWN_BLOOD, Integer.parseInt(subData[5]));\n\n                        dataManager.increment(DataPoint.MAIDEN_PLAYER_STOOD_IN_BLOOD);\n                        dataManager.increment(DataPoint.MAIDEN_HEALS_FROM_ANY_BLOOD, Integer.parseInt(subData[5]));\n\n                        dataManager.incrementPlayerSpecific(DataPoint.MAIDEN_PLAYER_STOOD_IN_THROWN_BLOOD, subData[4]);\n                        dataManager.incrementPlayerSpecific(DataPoint.MAIDEN_HEALS_FROM_THROWN_BLOOD, subData[4], Integer.parseInt(subData[5]));\n\n                        dataManager.incrementPlayerSpecific(DataPoint.MAIDEN_PLAYER_STOOD_IN_BLOOD, subData[4]);\n                        dataManager.incrementPlayerSpecific(DataPoint.MAIDEN_HEALS_FROM_ANY_BLOOD, subData[4], Integer.parseInt(subData[5]));\n                        break;\n                    case PLAYER_STOOD_IN_SPAWNED_BLOOD:\n                        dataManager.increment(DataPoint.MAIDEN_PLAYER_STOOD_IN_SPAWNED_BLOOD);\n                        dataManager.increment(DataPoint.MAIDEN_HEALS_FROM_SPAWNED_BLOOD, Integer.parseInt(subData[5]));\n\n                        dataManager.increment(DataPoint.MAIDEN_PLAYER_STOOD_IN_BLOOD);\n                        dataManager.increment(DataPoint.MAIDEN_HEALS_FROM_ANY_BLOOD, Integer.parseInt(subData[5]));\n\n                        dataManager.incrementPlayerSpecific(DataPoint.MAIDEN_PLAYER_STOOD_IN_SPAWNED_BLOOD, subData[4]);\n                        dataManager.incrementPlayerSpecific(DataPoint.MAIDEN_HEALS_FROM_SPAWNED_BLOOD, subData[4], Integer.parseInt(subData[5]));\n\n                        dataManager.incrementPlayerSpecific(DataPoint.MAIDEN_PLAYER_STOOD_IN_BLOOD, subData[4]);\n                        dataManager.incrementPlayerSpecific(DataPoint.MAIDEN_HEALS_FROM_ANY_BLOOD, subData[4], Integer.parseInt(subData[5]));\n                        break;\n                }\n            }\n            catch(Exception e)\n            {\n                log.info(\"Failed on \" + s);\n            }\n            activeIndex++;\n        }\n        globalData \u003d new ArrayList\u003c\u003e(globalData.subList(activeIndex + 1, globalData.size()));\n        return true;\n    }\n\n    private void finishRaid()\n    {\n        raidCompleted \u003d true;\n    }\n\n\n    public String getScaleString()\n    {\n        String scaleString \u003d \"\";\n        switch (players.size())\n        {\n            case 1:\n                scaleString \u003d \"Solo\";\n                break;\n            case 2:\n                scaleString \u003d \"Duo\";\n                break;\n            case 3:\n                scaleString \u003d \"Trio\";\n                break;\n            case 4:\n                scaleString \u003d \"4 Man\";\n                break;\n            case 5:\n                scaleString \u003d \"5 Man\";\n                break;\n        }\n        if (storyMode)\n        {\n            scaleString +\u003d \" (Story)\";\n        }\n        if (hardMode)\n        {\n            scaleString +\u003d \" (Hard)\";\n        }\n        return scaleString;\n    }\n\n    public String getRoomStatus()\n    {\n        String raidStatusString;\n        if (maidenWipe)\n        {\n            raidStatusString \u003d \"Maiden Wipe\";\n        } else if (maidenReset)\n        {\n            raidStatusString \u003d \"Maiden Reset\";\n            if (!maidenSpawned)\n            {\n                raidStatusString +\u003d \"*\";\n            }\n        } else if (bloatWipe)\n        {\n            raidStatusString \u003d \"Bloat Wipe\";\n        } else if (bloatReset)\n        {\n            raidStatusString \u003d \"Bloat Reset\";\n            if (getBloatTime() \u003d\u003d 0)\n            {\n                raidStatusString +\u003d \"*\";\n            }\n        } else if (nyloWipe)\n        {\n            raidStatusString \u003d \"Nylo Wipe\";\n        } else if (nyloReset)\n        {\n            raidStatusString \u003d \"Nylo Reset\";\n            if (getNyloTime() \u003d\u003d 0)\n            {\n                raidStatusString +\u003d \"*\";\n            }\n        } else if (soteWipe)\n        {\n            raidStatusString \u003d \"Sotetseg Wipe\";\n        } else if (soteReset)\n        {\n            raidStatusString \u003d \"Sotetseg Reset\";\n            if (getSoteTime() \u003d\u003d 0)\n            {\n                raidStatusString +\u003d \"*\";\n            }\n        } else if (xarpWipe)\n        {\n            raidStatusString \u003d \"Xarpus Wipe\";\n        } else if (xarpReset)\n        {\n            raidStatusString \u003d \"Xarpus Reset\";\n            if (getXarpTime() \u003d\u003d 0)\n            {\n                raidStatusString +\u003d \"*\";\n            }\n        } else if (verzikWipe)\n        {\n            raidStatusString \u003d \"Verzik Wipe\";\n        } else\n        {\n            raidStatusString \u003d \"Completion\";\n            if (!getOverallTimeAccurate())\n            {\n                raidStatusString +\u003d \"*\";\n            }\n        }\n        String red \u003d \"\u003chtml\u003e\u003cfont color\u003d\u0027#FF0000\u0027\u003e\";\n        String green \u003d \"\u003chtml\u003e\u003cfont color\u003d\u0027#44AF33\u0027\u003e\";\n        String yellow \u003d \"\u003chtml\u003e\u003cfont color\u003d\u0027#EEEE44\u0027\u003e\";\n        if (raidStatusString.contains(\"Completion\"))\n        {\n            raidStatusString \u003d green + raidStatusString;\n        } else if (raidStatusString.contains(\"Reset\"))\n        {\n            raidStatusString \u003d yellow + raidStatusString;\n        } else\n        {\n            raidStatusString \u003d red + raidStatusString;\n        }\n        return raidStatusString;\n    }\n}\n\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\SimpleTOBData.java"},{"fileName":"BaseFrame.java","content":"package com.advancedraidtracker.ui;\n\n\nimport com.formdev.flatlaf.FlatClientProperties;\n\nimport com.formdev.flatlaf.ui.FlatNativeWindowBorder;\n\n\nimport javax.swing.*;\n\npublic class BaseFrame extends JFrame\n{\n    public BaseFrame()\n    {\n        JRootPane rp \u003d getRootPane();\n        if (FlatNativeWindowBorder.isSupported())\n        {\n            rp.putClientProperty(FlatClientProperties.USE_WINDOW_DECORATIONS, true);\n        }\n        setDefaultCloseOperation(DISPOSE_ON_CLOSE);\n    }\n\n    public void open()\n    {\n        setVisible(true);\n        toFront();\n        repaint();\n    }\n\n    public void close()\n    {\n        setVisible(false);\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\BaseFrame.java"},{"fileName":"ButtonEditorComparisonData.java","content":"package com.advancedraidtracker.ui.buttons;\n\nimport com.advancedraidtracker.ui.Raids;\n\nimport javax.swing.*;\nimport java.awt.*;\npublic class ButtonEditorComparisonData extends DefaultCellEditor\n{\n    protected JButton button;\n    private String label;\n    private boolean isPushed;\n    private final Raids frame;\n    int row;\n\n    public ButtonEditorComparisonData(JCheckBox checkBox, Raids raidsFrame)\n    {\n        super(checkBox);\n        frame \u003d raidsFrame;\n        button \u003d new JButton();\n        button.setOpaque(true);\n        button.addActionListener(e -\u003e fireEditingStopped());\n    }\n\n    @Override\n    public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column)\n    {\n        if (isSelected)\n        {\n            button.setForeground(table.getSelectionForeground());\n            button.setBackground(table.getSelectionBackground());\n        } else\n        {\n            button.setForeground(table.getForeground());\n            button.setBackground(table.getBackground());\n        }\n        label \u003d (value \u003d\u003d null) ? \"\" : value.toString();\n        button.setText(label);\n        isPushed \u003d true;\n        this.row \u003d row;\n        return button;\n    }\n\n    @Override\n    public Object getCellEditorValue()\n    {\n        if (isPushed)\n        {\n            frame.removeComparisonRow(row);\n        }\n        isPushed \u003d false;\n        return label;\n    }\n\n    @Override\n    public boolean stopCellEditing()\n    {\n        isPushed \u003d false;\n        return super.stopCellEditing();\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\buttons\\ButtonEditorComparisonData.java"},{"fileName":"ButtonEditorFilterData.java","content":"package com.advancedraidtracker.ui.buttons;\n\nimport com.advancedraidtracker.ui.Raids;\n\nimport javax.swing.*;\nimport java.awt.*;\n\npublic class ButtonEditorFilterData extends DefaultCellEditor\n{\n    protected JButton button;\n    private String label;\n    private boolean isPushed;\n    private final Raids frame;\n    int row;\n\n    public ButtonEditorFilterData(JCheckBox checkBox, Raids raidsFrame)\n    {\n        super(checkBox);\n        frame \u003d raidsFrame;\n        button \u003d new JButton();\n        button.setOpaque(true);\n        button.addActionListener(e -\u003e fireEditingStopped());\n    }\n\n    @Override\n    public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column)\n    {\n        if (isSelected)\n        {\n            button.setForeground(table.getSelectionForeground());\n            button.setBackground(table.getSelectionBackground());\n        } else\n        {\n            button.setForeground(table.getForeground());\n            button.setBackground(table.getBackground());\n        }\n        label \u003d (value \u003d\u003d null) ? \"\" : value.toString();\n        button.setText(label);\n        isPushed \u003d true;\n        this.row \u003d row;\n        return button;\n    }\n\n    @Override\n    public Object getCellEditorValue()\n    {\n        if (isPushed)\n        {\n            frame.removeFilterRow(row);\n        }\n        isPushed \u003d false;\n        return label;\n    }\n\n    @Override\n    public boolean stopCellEditing()\n    {\n        isPushed \u003d false;\n        return super.stopCellEditing();\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\buttons\\ButtonEditorFilterData.java"},{"fileName":"ButtonEditorLoadFilters.java","content":"package com.advancedraidtracker.ui.buttons;\n\nimport com.advancedraidtracker.filters.Filter;\nimport com.advancedraidtracker.filters.ImplicitFilter;\nimport com.advancedraidtracker.ui.BaseFrame;\nimport com.advancedraidtracker.ui.Raids;\nimport com.advancedraidtracker.ui.filters.LoadFilter;\nimport lombok.extern.slf4j.Slf4j;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.util.ArrayList;\n\n@Slf4j\npublic class ButtonEditorLoadFilters extends DefaultCellEditor\n{\n\n    protected JButton button;\n    private String label;\n    private boolean isPushed;\n    private final boolean replace;\n    int row;\n    private final ArrayList\u003cFilter\u003e data;\n    private final BaseFrame closeBaseFrame;\n    private final Raids filteredRaidsFrame;\n\n    public ButtonEditorLoadFilters(JCheckBox checkBox, Raids filteredRaidsFrame, ArrayList\u003cFilter\u003e data, LoadFilter loadFrame)\n    {\n        super(checkBox);\n        this.data \u003d data;\n        this.replace \u003d true;\n        this.filteredRaidsFrame \u003d filteredRaidsFrame;\n        this.closeBaseFrame \u003d loadFrame;\n        button \u003d new JButton();\n        button.setOpaque(true);\n        button.addActionListener(e -\u003e fireEditingStopped());\n    }\n\n    public ButtonEditorLoadFilters(JCheckBox checkBox, Raids filteredRaidsFrame, ArrayList\u003cFilter\u003e data, LoadFilter loadFrame, boolean replace)\n    {\n        super(checkBox);\n        this.data \u003d data;\n        this.filteredRaidsFrame \u003d filteredRaidsFrame;\n        this.closeBaseFrame \u003d loadFrame;\n        button \u003d new JButton();\n        button.setOpaque(true);\n        this.replace \u003d replace;\n        button.addActionListener(e -\u003e fireEditingStopped());\n    }\n\n    @Override\n    public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column)\n    {\n        if (isSelected)\n        {\n            button.setForeground(table.getSelectionForeground());\n            button.setBackground(table.getSelectionBackground());\n        } else\n        {\n            button.setForeground(table.getForeground());\n            button.setBackground(table.getBackground());\n        }\n        label \u003d (value \u003d\u003d null) ? \"\" : value.toString();\n        button.setText(label);\n        isPushed \u003d true;\n        this.row \u003d row;\n        return button;\n    }\n\n    @Override\n    public Object getCellEditorValue()\n    {\n        if (isPushed)\n        {\n\n            if (replace)\n                filteredRaidsFrame.activeFilters.clear();\n            for (String s : data.get(row).getFilters())\n            {\n                if(!s.startsWith(\"QF-\"))\n                {\n                    filteredRaidsFrame.activeFilters.add(new ImplicitFilter(s));\n                }\n                else\n                {\n                    filteredRaidsFrame.setFilterState(s.substring(3));\n                }\n            }\n            filteredRaidsFrame.updateFilterTable();\n            closeBaseFrame.close();\n        }\n        isPushed \u003d false;\n        return label;\n    }\n\n    @Override\n    public boolean stopCellEditing()\n    {\n        isPushed \u003d false;\n        return super.stopCellEditing();\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\buttons\\ButtonEditorLoadFilters.java"},{"fileName":"ButtonEditorRoomData.java","content":"package com.advancedraidtracker.ui.buttons;\n\nimport com.advancedraidtracker.SimpleTOBData;\nimport com.advancedraidtracker.ui.viewraid.ViewTOBRaid;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.util.ArrayList;\n\npublic class ButtonEditorRoomData extends DefaultCellEditor\n{\n\n    protected JButton button;\n    private String label;\n    private boolean isPushed;\n    private final ArrayList\u003cSimpleTOBData\u003e data;\n    int row;\n\n    public ButtonEditorRoomData(JCheckBox checkBox, ArrayList\u003cSimpleTOBData\u003e data)\n    {\n        super(checkBox);\n        this.data \u003d data;\n        button \u003d new JButton();\n        button.setOpaque(true);\n        button.addActionListener(e -\u003e fireEditingStopped());\n    }\n\n    @Override\n    public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column)\n    {\n        if (isSelected)\n        {\n            button.setForeground(table.getSelectionForeground());\n            button.setBackground(table.getSelectionBackground());\n        } else\n        {\n            button.setForeground(table.getForeground());\n            button.setBackground(table.getBackground());\n        }\n        label \u003d (value \u003d\u003d null) ? \"\" : value.toString();\n        button.setText(label);\n        isPushed \u003d true;\n        this.row \u003d row;\n        return button;\n    }\n\n    @Override\n    public Object getCellEditorValue()\n    {\n        if (isPushed)\n        {\n            ViewTOBRaid raid \u003d new ViewTOBRaid(data.get(row));\n            //ViewRaidFrame raid \u003d new ViewRaidFrame(data.get(row));\n            raid.open();\n        }\n        isPushed \u003d false;\n        return label;\n    }\n\n    @Override\n    public boolean stopCellEditing()\n    {\n        isPushed \u003d false;\n        return super.stopCellEditing();\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\buttons\\ButtonEditorRoomData.java"},{"fileName":"ButtonEditorViewFilters.java","content":"package com.advancedraidtracker.ui.buttons;\n\nimport com.advancedraidtracker.filters.Filter;\nimport com.advancedraidtracker.ui.filters.ViewFilter;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.util.ArrayList;\n\npublic class ButtonEditorViewFilters extends DefaultCellEditor\n{\n\n    protected JButton button;\n    private String label;\n    private boolean isPushed;\n    int row;\n    private final ArrayList\u003cFilter\u003e data;\n\n    public ButtonEditorViewFilters(JCheckBox checkBox, ArrayList\u003cFilter\u003e data)\n    {\n        super(checkBox);\n        this.data \u003d data;\n        button \u003d new JButton();\n        button.setOpaque(true);\n        button.addActionListener(e -\u003e fireEditingStopped());\n    }\n\n    @Override\n    public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column)\n    {\n        if (isSelected)\n        {\n            button.setForeground(table.getSelectionForeground());\n            button.setBackground(table.getSelectionBackground());\n        } else\n        {\n            button.setForeground(table.getForeground());\n            button.setBackground(table.getBackground());\n        }\n        label \u003d (value \u003d\u003d null) ? \"\" : value.toString();\n        button.setText(label);\n        isPushed \u003d true;\n        this.row \u003d row;\n        return button;\n    }\n\n\n    @Override\n    public Object getCellEditorValue()\n    {\n        if (isPushed)\n        {\n            ViewFilter frame \u003d new ViewFilter(data.get(row));\n            frame.open();\n        }\n        isPushed \u003d false;\n        return label;\n    }\n\n    @Override\n    public boolean stopCellEditing()\n    {\n        isPushed \u003d false;\n        return super.stopCellEditing();\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\buttons\\ButtonEditorViewFilters.java"},{"fileName":"ButtonRenderer.java","content":"package com.advancedraidtracker.ui.buttons;\n\nimport javax.swing.*;\nimport javax.swing.table.TableCellRenderer;\nimport java.awt.*;\n\npublic class ButtonRenderer extends JButton implements TableCellRenderer\n{\n\n    public ButtonRenderer()\n    {\n        setOpaque(true);\n    }\n\n    @Override\n    public Component getTableCellRendererComponent(JTable table, Object value,\n                                                   boolean isSelected, boolean hasFocus, int row, int column)\n    {\n        if (isSelected)\n        {\n            setForeground(table.getSelectionForeground());\n            setBackground(table.getSelectionBackground());\n        } else\n        {\n            setForeground(table.getForeground());\n        }\n        setText((value \u003d\u003d null) ? \"\" : value.toString());\n        return this;\n    }\n}\n\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\buttons\\ButtonRenderer.java"},{"fileName":"NonEditableCell.java","content":"package com.advancedraidtracker.ui.buttons;\n\nimport javax.swing.*;\nimport java.util.EventObject;\n\npublic class NonEditableCell extends DefaultCellEditor\n{\n    public NonEditableCell(JTextField textField)\n    {\n        super(textField);\n        textField.addActionListener(e -\u003e fireEditingStopped());\n    }\n\n    protected void fireEditingStopped()\n    {\n        super.fireEditingStopped();\n    }\n\n    @Override\n    public boolean isCellEditable(EventObject anEvent)\n    {\n        return false;\n    }\n\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\buttons\\NonEditableCell.java"},{"fileName":"StripedTableRowCellRenderer.java","content":"package com.advancedraidtracker.ui.buttons;\n\nimport javax.swing.*;\nimport javax.swing.table.DefaultTableCellRenderer;\nimport java.awt.*;\n\npublic class StripedTableRowCellRenderer extends DefaultTableCellRenderer\n{\n    @Override\n    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column)\n    {\n        Component cell \u003d new DefaultTableCellRenderer().getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\n        if(row % 2 \u003d\u003d 0 \u0026\u0026 !isSelected)\n        {\n            cell.setBackground(new Color(20, 20, 20));\n        }\n        return cell;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\buttons\\StripedTableRowCellRenderer.java"},{"fileName":"ChartFrame.java","content":"package com.advancedraidtracker.ui.charts;\n\nimport com.advancedraidtracker.AdvancedTOBData;\nimport com.advancedraidtracker.SimpleTOBData;\nimport com.advancedraidtracker.AdvancedRaidTrackerConfig;\nimport com.advancedraidtracker.ui.BaseFrame;\nimport com.advancedraidtracker.utility.datautility.DataPoint;\nimport java.awt.event.WindowAdapter;\nimport java.awt.event.WindowEvent;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.game.ItemManager;\n\nimport javax.swing.*;\nimport javax.swing.Timer;\nimport java.awt.*;\nimport java.awt.event.ComponentAdapter;\nimport java.awt.event.ComponentEvent;\nimport java.util.*;\n\n@Slf4j\npublic class ChartFrame extends BaseFrame\n{\n    private int frameX \u003d this.getWidth();\n    private int frameY \u003d this.getHeight();\n    public ChartFrame(ArrayList\u003cSimpleTOBData\u003e roomData, AdvancedRaidTrackerConfig config, ItemManager itemManager, ClientThread clientThread, ConfigManager configManager)\n    {\n        JTabbedPane basepane \u003d new JTabbedPane();\n\n        JPanel maidenTab \u003d new JPanel();\n        JPanel bloatTab \u003d new JPanel();\n        JPanel nyloTab \u003d new JPanel();\n        JPanel soteTab \u003d new JPanel();\n        JPanel xarpTab \u003d new JPanel();\n        JPanel verzP1Tab \u003d new JPanel();\n        JPanel verzP2Tab \u003d new JPanel();\n        JPanel verzP3Tab \u003d new JPanel();\n\n        maidenTab.setLayout(new GridLayout(1, 2));\n        bloatTab.setLayout(new GridLayout(1, 2));\n        nyloTab.setLayout(new GridLayout(1, 2));\n        soteTab.setLayout(new GridLayout(1, 2));\n        xarpTab.setLayout(new GridLayout(1, 2));\n        verzP1Tab.setLayout(new GridLayout(1, 2));\n        verzP2Tab.setLayout(new GridLayout(1, 2));\n        verzP3Tab.setLayout(new GridLayout(1, 2));\n\n        JPanel maidenCharts \u003d new JPanel();\n        JPanel bloatCharts \u003d new JPanel();\n        JPanel nyloCharts \u003d new JPanel();\n        JPanel soteCharts \u003d new JPanel();\n        JPanel xarpCharts \u003d new JPanel();\n        JPanel verzp1Charts \u003d new JPanel();\n        JPanel verzp2Charts \u003d new JPanel();\n        JPanel verzp3Charts \u003d new JPanel();\n\n        maidenCharts.setLayout(new BoxLayout(maidenCharts, BoxLayout.Y_AXIS));\n        bloatCharts.setLayout(new BoxLayout(bloatCharts, BoxLayout.Y_AXIS));\n        nyloCharts.setLayout(new BoxLayout(nyloCharts, BoxLayout.Y_AXIS));\n        soteCharts.setLayout(new BoxLayout(soteCharts, BoxLayout.Y_AXIS));\n        xarpCharts.setLayout(new BoxLayout(xarpCharts, BoxLayout.Y_AXIS));\n        verzp1Charts.setLayout(new BoxLayout(verzp1Charts, BoxLayout.Y_AXIS));\n        verzp2Charts.setLayout(new BoxLayout(verzp2Charts, BoxLayout.Y_AXIS));\n        verzp3Charts.setLayout(new BoxLayout(verzp3Charts, BoxLayout.Y_AXIS));\n\n\n\n        for (SimpleTOBData data : roomData)\n        {\n            AdvancedTOBData advancedData \u003d new AdvancedTOBData(AdvancedTOBData.getRaidStrings(data.filePath), itemManager);\n            Map\u003cInteger, String\u003e maidenLines \u003d new LinkedHashMap\u003c\u003e();\n            maidenLines.put(data.getValue(DataPoint.MAIDEN_70_SPLIT), \"70s\");\n            maidenLines.put(data.getValue(DataPoint.MAIDEN_50_SPLIT), \"50s\");\n            maidenLines.put(data.getValue(DataPoint.MAIDEN_30_SPLIT), \"30s\");\n            maidenLines.put(data.getValue(DataPoint.MAIDEN_TOTAL_TIME), \"Dead\");\n\n            Map\u003cInteger, String\u003e bloatLines \u003d new LinkedHashMap\u003c\u003e();\n            for (Integer i : data.bloatDowns)\n            {\n                bloatLines.put(i, \"Down\");\n                bloatLines.put(i + 33, \"Moving\");\n            }\n\n            Map\u003cInteger, String\u003e nyloLines \u003d new LinkedHashMap\u003c\u003e();\n            for (Integer i : data.nyloWaveStalled)\n            {\n                nyloLines.put(i, \"Stall\");\n            }\n            nyloLines.put(data.getValue(DataPoint.NYLO_LAST_WAVE), \"Last Wave\");\n            nyloLines.put(data.getValue(DataPoint.NYLO_BOSS_SPAWN), \"Boss Spawn\");\n            for (int i \u003d data.getValue(DataPoint.NYLO_BOSS_SPAWN) + 11; i \u003c data.getNyloTime(); i +\u003d 10)\n            {\n                nyloLines.put(i, \"Phase\");\n            }\n\n            for (Integer i : data.waveSpawns.keySet())\n            {\n                nyloLines.put(data.waveSpawns.get(i), \"W\" + i);\n            }\n\n            Map\u003cInteger, String\u003e soteLines \u003d new LinkedHashMap\u003c\u003e();\n            soteLines.put(data.getValue(DataPoint.SOTE_P1_SPLIT), \"Maze1 Start\");\n            soteLines.put(data.getValue(DataPoint.SOTE_M1_SPLIT), \"Maze1 End\");\n\n            soteLines.put(data.getValue(DataPoint.SOTE_P2_SPLIT), \"Maze2 Start\");\n            soteLines.put(data.getValue(DataPoint.SOTE_M2_SPLIT), \"Maze2 End\");\n\n\n            Map\u003cInteger, String\u003e xarpLines \u003d new LinkedHashMap\u003c\u003e();\n            xarpLines.put(data.getValue(DataPoint.XARP_SCREECH), \"SCREECH\");\n            for (int i \u003d data.getValue(DataPoint.XARP_SCREECH) + 8; i \u003c data.getXarpTime(); i +\u003d 8)\n            {\n                xarpLines.put(i, \"Turn\");\n            }\n\n            Map\u003cInteger, String\u003e verzikP2Lines \u003d new LinkedHashMap\u003c\u003e();\n            for (Integer i : data.redsProc)\n            {\n                verzikP2Lines.put(i, \"Reds\");\n                verzikP2Lines.put(i + 10, \"Shield End\");\n            }\n\n            for (Integer i : data.p2Crabs)\n            {\n                verzikP2Lines.put(i, \"Crabs\");\n            }\n\n            Map\u003cInteger, String\u003e verzikP3Lines \u003d new LinkedHashMap\u003c\u003e();\n            for (Integer i : data.websStart)\n            {\n                if (i % 2 \u003d\u003d 0)\n                    verzikP3Lines.put(i, \"Webs\");\n            }\n\n            for (Integer i : data.p3Crabs)\n            {\n                verzikP3Lines.put(i, \"Crabs\");\n            }\n\n            Map\u003cInteger, String\u003e dawnDropsMap \u003d new LinkedHashMap\u003c\u003e();\n            for (Integer i : data.dawnDrops)\n            {\n                dawnDropsMap.put(i, \"X\");\n            }\n            ArrayList\u003cInteger\u003e p2autos \u003d new ArrayList\u003c\u003e();\n            int lastreset \u003d data.getValue(DataPoint.VERZIK_P1_SPLIT) + 11;\n            for (int i \u003d lastreset; i \u003c data.getValue(DataPoint.VERZIK_P2_SPLIT); i++)\n            {\n                boolean wasNextTick \u003d false;\n                for (Integer j : data.redsProc)\n                {\n                    if (i \u003d\u003d j)\n                    {\n                        lastreset \u003d i + 11;\n                    } else if (i \u003d\u003d (j - 5) || i \u003d\u003d (j - 1))\n                    {\n                        wasNextTick \u003d true;\n                    }\n                }\n                if ((i - lastreset) % 4 \u003d\u003d 0 \u0026\u0026 i \u003e\u003d lastreset \u0026\u0026 !wasNextTick)\n                {\n                    p2autos.add(i);\n                }\n            }\n            int maidenTime \u003d data.getMaidenTime();\n            int bloatTime \u003d data.getBloatTime();\n            int nyloTime \u003d data.getNyloTime();\n            int soteTime \u003d data.getSoteTime();\n            int xarpTime \u003d data.getXarpTime();\n            int verzP1Time \u003d data.getValue(DataPoint.VERZIK_P1_SPLIT);\n            int verzP2Start \u003d data.getValue(DataPoint.VERZIK_P1_SPLIT) + 1;\n            int verzP2Time \u003d data.getValue(DataPoint.VERZIK_P2_SPLIT);\n            int verzP3Start \u003d verzP2Time + 1;\n            int verzP3Time \u003d data.getVerzikTime();\n\n\n            ArrayList\u003cInteger\u003e p1autos \u003d new ArrayList\u003c\u003e();\n            for (int i \u003d 19; i \u003c verzP1Time; i++)\n            {\n                if (i \u003d\u003d 19 || (i - 19) % 14 \u003d\u003d 0)\n                {\n                    p1autos.add(i);\n                }\n            }\n\n            ChartPanel maidenRCP \u003d new ChartPanel(\"Maiden\", false, config, clientThread, configManager);\n            maidenRCP.setNPCMappings(advancedData.maidenNPCMapping);\n            maidenRCP.setRoomHP(advancedData.maidenHP);\n            maidenRCP.addAttacks(advancedData.maidenAttacks);\n            maidenRCP.addMaidenCrabs(data.maidenCrabSpawn);\n            maidenRCP.setPlayers(new ArrayList\u003c\u003e(data.players.keySet()));\n            if (roomData.size() \u003d\u003d 1)\n            {\n                maidenRCP.enableWrap();\n            }\n            maidenRCP.setStartTick(1);\n            maidenRCP.setTick(maidenTime);\n            maidenRCP.addLines(maidenLines);\n            maidenRCP.addThrallBoxes(data.maidenThrallSpawns);\n\n            ChartPanel bloatRCP \u003d new ChartPanel(\"Bloat\", false, config, clientThread, configManager);\n            bloatRCP.setRoomHP(advancedData.bloatHP);\n            bloatRCP.addAttacks(advancedData.bloatAttacks);\n            bloatRCP.setPlayers(new ArrayList\u003c\u003e(data.players.keySet()));\n            if (roomData.size() \u003d\u003d 1)\n            {\n                bloatRCP.enableWrap();\n            }\n            bloatRCP.setStartTick(1);\n            bloatRCP.setTick(bloatTime);\n            bloatRCP.addLines(bloatLines);\n            bloatRCP.addThrallBoxes(data.bloatThrallSpawns);\n\n            ChartPanel nyloRCP \u003d new ChartPanel(\"Nylocas\", false, config, clientThread, configManager);\n            nyloRCP.setNPCMappings(advancedData.nyloNPCMapping);\n            nyloRCP.setRoomHP(advancedData.nyloHP);\n            nyloRCP.addAttacks(advancedData.nyloAttacks);\n            nyloRCP.setPlayers(new ArrayList\u003c\u003e(data.players.keySet()));\n            if (roomData.size() \u003d\u003d 1)\n            {\n                nyloRCP.enableWrap();\n            }\n            nyloRCP.setStartTick(1);\n            nyloRCP.setTick(nyloTime);\n            nyloRCP.addLines(nyloLines);\n            nyloRCP.addThrallBoxes(data.nyloThrallSpawns);\n\n            ChartPanel soteRCP \u003d new ChartPanel(\"Sotetseg\", false, config, clientThread, configManager);\n            soteRCP.setRoomHP(advancedData.soteHP);\n            soteRCP.addAttacks(advancedData.soteAttacks);\n            soteRCP.setPlayers(new ArrayList\u003c\u003e(data.players.keySet()));\n            if (roomData.size() \u003d\u003d 1)\n            {\n                soteRCP.enableWrap();\n            }\n            soteRCP.setStartTick(1);\n            soteRCP.setTick(soteTime);\n            soteRCP.addLines(soteLines);\n            soteRCP.addThrallBoxes(data.soteThrallSpawns);\n\n            ChartPanel xarpRCP \u003d new ChartPanel(\"Xarpus\", false, config, clientThread, configManager);\n            xarpRCP.setRoomHP(advancedData.xarpHP);\n            xarpRCP.addAttacks(advancedData.xarpAttacks);\n            xarpRCP.setPlayers(new ArrayList\u003c\u003e(data.players.keySet()));\n            if (roomData.size() \u003d\u003d 1)\n            {\n                xarpRCP.enableWrap();\n            }\n            xarpRCP.setStartTick(1);\n            xarpRCP.setTick(xarpTime);\n            xarpRCP.addLines(xarpLines);\n            xarpRCP.addThrallBoxes(data.xarpusThrallSpawns);\n\n            ChartPanel verzP1RCP \u003d new ChartPanel(\"Verzik P1\", false, config, clientThread, configManager);\n            verzP1RCP.setNPCMappings(advancedData.verzikNPCMapping);\n            verzP1RCP.setRoomHP(advancedData.verzikHP);\n            verzP1RCP.addAttacks(advancedData.verzikAttacks);\n            verzP1RCP.setPlayers(new ArrayList\u003c\u003e(data.players.keySet()));\n            if (roomData.size() \u003d\u003d 1)\n            {\n                verzP1RCP.enableWrap();\n            }\n            verzP1RCP.setStartTick(1);\n            verzP1RCP.setTick(verzP1Time);\n            verzP1RCP.addRoomSpecificDatum(dawnDropsMap);\n            verzP1RCP.addThrallBoxes(data.verzikThrallSpawns);\n            verzP1RCP.setRoomSpecificText(\"Dawn Appears\");\n            verzP1RCP.addAutos(p1autos);\n\n            ChartPanel verzP2RCP \u003d new ChartPanel(\"Verzik P2\", false, config, clientThread, configManager);\n            verzP2RCP.setNPCMappings(advancedData.verzikNPCMapping);\n            verzP2RCP.setRoomHP(advancedData.verzikHP);\n            verzP2RCP.addAttacks(advancedData.verzikAttacks);\n            verzP2RCP.setPlayers(new ArrayList\u003c\u003e(data.players.keySet()));\n            if (roomData.size() \u003d\u003d 1)\n            {\n                verzP2RCP.enableWrap();\n            }\n            verzP2RCP.setStartTick(verzP2Start);\n            verzP2RCP.setTick(verzP2Time);\n            verzP2RCP.addLines(verzikP2Lines);\n            verzP2RCP.addThrallBoxes(data.verzikThrallSpawns);\n\n            ChartPanel verzP3RCP \u003d new ChartPanel(\"Verzik P3\", false, config, clientThread, configManager);\n            verzP3RCP.setNPCMappings(advancedData.verzikNPCMapping);\n            verzP3RCP.setRoomHP(advancedData.verzikHP);\n\n            verzP3RCP.addAttacks(advancedData.verzikAttacks);\n            verzP3RCP.setPlayers(new ArrayList\u003c\u003e(data.players.keySet()));\n            if (roomData.size() \u003d\u003d 1)\n            {\n                verzP3RCP.enableWrap();\n            }\n            verzP3RCP.setStartTick(verzP3Start);\n            verzP3RCP.setTick(verzP3Time);\n            verzP3RCP.addLines(verzikP3Lines);\n            verzP3RCP.addThrallBoxes(data.verzikThrallSpawns);\n            verzP2RCP.addAutos(p2autos);\n            verzP1RCP.addDawnSpecs(data.dawnSpecs);\n\n            maidenRCP.redraw();\n            bloatRCP.redraw();\n            nyloRCP.redraw();\n            soteRCP.redraw();\n            xarpRCP.redraw();\n            verzP1RCP.redraw();\n            verzP2RCP.redraw();\n            verzP3RCP.redraw();\n\n\t\t\taddWindowListener(new WindowAdapter()\n\t\t\t{\n\t\t\t\t@Override\n\t\t\t\tpublic void windowClosing(WindowEvent e)\n\t\t\t\t{\n\t\t\t\t\tsuper.windowClosing(e);\n\t\t\t\t\tmaidenRCP.release();\n\t\t\t\t\tbloatRCP.release();\n\t\t\t\t\tnyloRCP.release();\n\t\t\t\t\tsoteRCP.release();\n\t\t\t\t\txarpRCP.release();\n\t\t\t\t\tverzP1RCP.release();\n\t\t\t\t\tverzP2RCP.release();\n\t\t\t\t\tverzP3RCP.release();\n\t\t\t\t}\n\t\t\t});\n\n            Timer resizeTimer \u003d new Timer(20, e -\u003e\n            {\n                maidenRCP.setSize(frameX, frameY);\n                bloatRCP.setSize(frameX, frameY);\n                nyloRCP.setSize(frameX, frameY);\n                soteRCP.setSize(frameX, frameY);\n                xarpRCP.setSize(frameX, frameY);\n                verzP1RCP.setSize(frameX, frameY);\n                verzP2RCP.setSize(frameX, frameY);\n                verzP3RCP.setSize(frameX, frameY);\n            });\n\n            resizeTimer.setRepeats(false);\n\n            addComponentListener(new ComponentAdapter()\n            {\n                @Override\n                public void componentResized(ComponentEvent e)\n                {\n                    super.componentResized(e);\n                    if(resizeTimer.isRunning())\n                    {\n                        resizeTimer.restart();\n                    }\n                    else\n                    {\n                        resizeTimer.start();\n                    }\n                    Component c \u003d (Component) e.getSource();\n                    frameX \u003d c.getWidth();\n                    frameY \u003d c.getHeight();\n                }\n            });\n\n            basepane.addChangeListener(cl-\u003e\n            {\n                maidenRCP.redraw();\n                bloatRCP.redraw();\n                nyloRCP.redraw();\n                soteRCP.redraw();\n                xarpRCP.redraw();\n                verzP1RCP.redraw();\n                verzP2RCP.redraw();\n                verzP3RCP.redraw();\n            });\n\n\n            maidenCharts.add(maidenRCP);\n            bloatCharts.add(bloatRCP);\n            nyloCharts.add(nyloRCP);\n            soteCharts.add(soteRCP);\n            xarpCharts.add(xarpRCP);\n            verzp1Charts.add(verzP1RCP);\n            verzp2Charts.add(verzP2RCP);\n            verzp3Charts.add(verzP3RCP);\n\n\n\n        }\n\n        maidenTab.add(new JScrollPane(maidenCharts));\n        bloatTab.add(new JScrollPane(bloatCharts));\n        nyloTab.add(new JScrollPane(nyloCharts));\n        soteTab.add(new JScrollPane(soteCharts));\n        xarpTab.add(new JScrollPane(xarpCharts));\n        verzP1Tab.add(new JScrollPane(verzp1Charts));\n        verzP2Tab.add(new JScrollPane(verzp2Charts));\n        verzP3Tab.add(new JScrollPane(verzp3Charts));\n\n        basepane.addTab(\"Maiden\", maidenTab);\n        basepane.addTab(\"Bloat\", bloatTab);\n        basepane.addTab(\"Nylocas\", nyloTab);\n        basepane.addTab(\"Sotetseg\", soteTab);\n        basepane.addTab(\"Xarpus\", xarpTab);\n        basepane.addTab(\"Verzik P1\", verzP1Tab);\n        basepane.addTab(\"Verzik P2\", verzP2Tab);\n        basepane.addTab(\"Verzik P3\", verzP3Tab);\n\n        add(basepane);\n        pack();\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\charts\\ChartFrame.java"},{"fileName":"ChartPanel.java","content":"package com.advancedraidtracker.ui.charts;\n\nimport com.advancedraidtracker.AdvancedRaidTrackerConfig;\nimport com.advancedraidtracker.constants.TobIDs;\nimport com.advancedraidtracker.utility.*;\nimport com.advancedraidtracker.utility.Point;\nimport com.advancedraidtracker.utility.weapons.WeaponAttack;\nimport com.advancedraidtracker.utility.weapons.WeaponDecider;\nimport com.advancedraidtracker.utility.wrappers.*;\nimport lombok.Setter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.ui.FontManager;\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.*;\nimport java.awt.font.FontRenderContext;\nimport java.awt.font.GlyphVector;\nimport java.awt.geom.AffineTransform;\nimport java.awt.image.AffineTransformOp;\nimport java.awt.image.BufferedImage;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.LinkedHashMap;\nimport java.util.Map;\n\n@Slf4j\npublic class ChartPanel extends JPanel implements MouseListener, MouseMotionListener, MouseWheelListener\n{\n    private final int TITLE_BAR_PLUS_TAB_HEIGHT \u003d 63; //todo figure this out dynamically in the future\n    private boolean shouldWrap;\n    private BufferedImage img;\n    int scale;\n    int boxCount;\n    int boxHeight;\n    int boxWidth;\n    private int windowHeight \u003d 600;\n\n    int selectedTick \u003d -1;\n    String selectedPlayer \u003d \"\";\n\n    int selectedRow \u003d -1;\n    boolean checkBoxHovered \u003d false;\n\n    int startTick;\n    public int endTick;\n    @Setter\n    ArrayList\u003cString\u003e players \u003d new ArrayList\u003c\u003e();\n    String room;\n    @Setter\n    String roomSpecificText \u003d \"\";\n    private int fontHeight;\n    public boolean finished \u003d false;\n    private final boolean live;\n    private final ArrayList\u003cInteger\u003e autos \u003d new ArrayList\u003c\u003e();\n    private Map\u003cInteger, String\u003e NPCMap \u003d new HashMap\u003c\u003e();\n    private final ArrayList\u003cDawnSpec\u003e dawnSpecs \u003d new ArrayList\u003c\u003e();\n    private final ArrayList\u003cThrallOutlineBox\u003e thrallOutlineBoxes \u003d new ArrayList\u003c\u003e();\n    private final ArrayList\u003cOutlineBox\u003e outlineBoxes \u003d new ArrayList\u003c\u003e();\n    private final Map\u003cInteger, String\u003e specific \u003d new HashMap\u003c\u003e();\n    private final Map\u003cInteger, String\u003e lines \u003d new HashMap\u003c\u003e();\n    private final ArrayList\u003cString\u003e crabDescriptions \u003d new ArrayList\u003c\u003e();\n\n    @Setter\n    private Map\u003cInteger, Integer\u003e roomHP \u003d new HashMap\u003c\u003e();\n    Map\u003cString, Integer\u003e playerOffsets \u003d new LinkedHashMap\u003c\u003e();\n    private final Map\u003cPlayerDidAttack, String\u003e actions \u003d new HashMap\u003c\u003e();\n\n    private final ConfigManager configManager;\n    private boolean isActive \u003d false;\n\n    public void setActive(Boolean state)\n    {\n        isActive \u003d state;\n    }\n\n    public boolean shouldDraw()\n    {\n        return !live || isActive;\n    }\n\n    public void enableWrap()\n    {\n        shouldWrap \u003d true;\n        recalculateSize();\n    }\n    private int boxesToShow \u003d 1;\n\n    public void setSize(int x, int y)\n    {\n        windowHeight \u003d y;\n        if(isActive || !live)\n        {\n            boxesToShow \u003d Math.min(1+((y-TITLE_BAR_PLUS_TAB_HEIGHT-scale)/boxHeight), boxCount);\n            if (img !\u003d null)\n            {\n                img.flush();\n            }\n            img \u003d new BufferedImage(x, y, BufferedImage.TYPE_INT_ARGB);\n            recalculateSize();\n        }\n    }\n\n\tpublic void release()\n\t{\n\t\tresetGraph();\n\t\timg \u003d null;\n\t\tremoveMouseListener(this);\n\t\tremoveMouseWheelListener(this);\n\t\tremoveMouseMotionListener(this);\n\t}\n\n    private final AdvancedRaidTrackerConfig config;\n\n    public void addRoomSpecificData(int tick, String data)\n    {\n        specific.put(tick, data);\n    }\n\n    public void addRoomSpecificDatum(Map\u003cInteger, String\u003e specificData)\n    {\n        specific.putAll(specificData);\n    }\n\n    public void addLine(int tick, String lineInfo)\n    {\n        lines.put(tick, lineInfo);\n    }\n\n    public void addLines(Map\u003cInteger, String\u003e lineData)\n    {\n        lines.putAll(lineData);\n    }\n\n    public void addRoomHP(int tick, int hp)\n    {\n        roomHP.put(tick, hp);\n    }\n\n    public void addAutos(ArrayList\u003cInteger\u003e autos)\n    {\n        this.autos.addAll(autos);\n    }\n\n    public void addThrallBox(ThrallOutlineBox thrallOutlineBox)\n    {\n        thrallOutlineBoxes.add(thrallOutlineBox);\n    }\n\n    public void addThrallBoxes(ArrayList\u003cThrallOutlineBox\u003e outlineBoxes)\n    {\n        thrallOutlineBoxes.addAll(outlineBoxes);\n    }\n\n    public void addDawnSpec(DawnSpec dawnSpec)\n    {\n        this.dawnSpecs.add(dawnSpec);\n    }\n\n    public void addDawnSpecs(ArrayList\u003cDawnSpec\u003e dawnSpecs)\n    {\n        this.dawnSpecs.addAll(dawnSpecs);\n        drawGraph();\n    }\n\n    public void setRoomFinished(int tick)\n    {\n        finished \u003d true;\n        if (tick - endTick \u003c 10)\n        {\n            endTick \u003d tick;\n        }\n        drawGraph();\n    }\n\n    public void resetGraph()\n    {\n        currentBox \u003d 0;\n        currentScrollOffset \u003d 0;\n        endTick \u003d 0;\n        startTick \u003d 0;\n        selectedRow \u003d -1;\n        selectedTick \u003d -1;\n        selectedPlayer \u003d \"\";\n        outlineBoxes.clear();\n        autos.clear();\n        lines.clear();\n        specific.clear();\n        dawnSpecs.clear();\n        thrallOutlineBoxes.clear();\n        players.clear();\n        playerOffsets.clear();\n        crabDescriptions.clear();\n        actions.clear();\n        roomHP.clear();\n        NPCMap.clear();\n        finished \u003d false;\n        recalculateSize();\n    }\n\n    public void addMaidenCrabs(ArrayList\u003cString\u003e crabDescriptions)\n    {\n        this.crabDescriptions.addAll(crabDescriptions);\n    }\n\n    public void addMaidenCrab(String description)\n    {\n        crabDescriptions.add(description);\n    }\n\n    public void addNPCMapping(int index, String name)\n    {\n        NPCMap.put(index, name);\n    }\n\n    public void setNPCMappings(Map\u003cInteger, String\u003e mapping)\n    {\n        this.NPCMap \u003d mapping;\n    }\n\n    public void redraw()\n    {\n        recalculateSize();\n    }\n\n    public void addAttack(PlayerDidAttack attack)\n    {\n        if(clientThread !\u003d null)\n        {\n            if(config.useUnkitted())\n            {\n                attack.useUnkitted();\n            }\n            clientThread.invoke(attack::setIcons);\n            clientThread.invoke(attack::setWornNames);\n        }\n        WeaponAttack weaponAttack \u003d WeaponDecider.getWeapon(attack.animation, attack.spotAnims, attack.projectile, attack.weapon);\n        if (weaponAttack !\u003d WeaponAttack.UNDECIDED)\n        {\n            boolean isTarget \u003d RoomUtil.isPrimaryBoss(attack.targetedID) \u0026\u0026 attack.targetedID !\u003d -1;\n            String targetString \u003d weaponAttack.name + \": \";\n            String targetName \u003d getBossName(attack.targetedID, attack.targetedIndex, attack.tick);\n            if (targetName.equals(\"?\"))\n            {\n                targetString +\u003d attack.targetName;\n            } else\n            {\n                targetString +\u003d targetName;\n            }\n            actions.put(attack, targetString);\n            String additionalText \u003d \"\";\n            if (targetString.contains(\"(on w\"))\n            {\n                additionalText \u003d targetString.substring(targetString.indexOf(\"(on w\") + 5);\n                additionalText \u003d \"s\" + additionalText.substring(0, additionalText.indexOf(\")\"));\n            } else if (targetString.contains(\"small\") || targetString.contains(\"big\"))\n            {\n                additionalText \u003d getShortenedString(targetString, weaponAttack.name.length());\n            } else if (targetString.contains(\"70s\") || targetString.contains(\"50s\") || targetString.contains(\"30s\"))\n            {\n                String shortenedString \u003d targetString.substring(weaponAttack.name.length()+2);\n                shortenedString \u003d shortenedString.substring(0, 2);\n                String proc \u003d targetString.substring(targetString.indexOf(\"0s\") - 1, targetString.indexOf(\"0s\") + 1);\n\n                additionalText \u003d proc + shortenedString;\n            }\n            outlineBoxes.add(new OutlineBox(attack, weaponAttack.shorthand, weaponAttack.color, isTarget, additionalText, weaponAttack));\n        }\n    }\n\n    private static String getShortenedString(String targetString, int index)\n    {\n        String shortenedString \u003d targetString.substring(index+3);\n        shortenedString \u003d shortenedString.substring(0, shortenedString.indexOf(\" \"));\n        if (targetString.contains(\"east small\"))\n        {\n            shortenedString +\u003d \"e\";\n        } else if (targetString.contains(\"south small\"))\n        {\n            shortenedString +\u003d \"s\";\n        } else if (targetString.contains(\"west small\"))\n        {\n            shortenedString +\u003d \"w\";\n        } else if (targetString.contains(\"east big\"))\n        {\n            shortenedString +\u003d \"E\";\n        } else if (targetString.contains(\"south big\"))\n        {\n            shortenedString +\u003d \"S\";\n        } else if (targetString.contains(\"west big\"))\n        {\n            shortenedString +\u003d \"W\";\n        }\n        return shortenedString;\n    }\n\n    public void addLiveAttack(PlayerDidAttack attack)\n    {\n        attack.tick +\u003d endTick;\n        addAttack(new PlayerDidAttack(attack.itemManager, attack.player, attack.animation, attack.tick, attack.weapon, attack.projectile, attack.spotAnims, attack.targetedIndex, attack.targetedID, attack.targetName, attack.wornItems));\n    }\n\n    public void addAttacks(ArrayList\u003cPlayerDidAttack\u003e attacks)\n    {\n        for (PlayerDidAttack attack : attacks)\n        {\n            addAttack(attack);\n        }\n    }\n\n    public void incrementTick()\n    {\n        endTick++;\n        if (endTick % 50 \u003d\u003d 0 || endTick \u003d\u003d 1)\n        {\n            recalculateSize();\n        } else\n        {\n            drawGraph();\n        }\n    }\n\n    public void setTick(int tick)\n    {\n        endTick \u003d tick;\n        recalculateSize();\n    }\n\n    public void setStartTick(int tick)\n    {\n        startTick \u003d tick;\n        recalculateSize();\n    }\n\n    public void recalculateSize()\n    {\n        if(!shouldDraw())\n        {\n            return;\n        }\n        try\n        {\n            scale \u003d config.chartScaleSize();\n            setBackground(config.primaryDark());\n        } catch (Exception ignored)\n        {\n\n        }\n        int length \u003d endTick - startTick;\n        boxCount \u003d (length / 50);\n        if (boxCount % 50 !\u003d 0)\n        {\n            boxCount++;\n        }\n        if (boxCount \u003c 1)\n        {\n            boxCount \u003d 1;\n        }\n        boxHeight \u003d ((players.size() + 3) * scale);\n        boxWidth \u003d (100 + (scale * 51));\n\n        boxesToShow \u003d Math.min(1+((windowHeight-TITLE_BAR_PLUS_TAB_HEIGHT-scale)/boxHeight), boxCount);\n\n        drawGraph();\n\n    }\n\n    public void sendToBottom()\n    {\n        recalculateSize();\n        if(TITLE_BAR_PLUS_TAB_HEIGHT+scale+boxCount*boxHeight \u003e img.getHeight())\n        {\n            currentBox \u003d boxCount - 1 - boxesToShow + 1;\n            int lastBoxEnd \u003d (boxesToShow * boxHeight) + scale + TITLE_BAR_PLUS_TAB_HEIGHT;\n            currentScrollOffset \u003d (currentBox * boxHeight) + (lastBoxEnd - img.getHeight());\n        }\n    }\n\n    private final ClientThread clientThread;\n    public ChartPanel(String room, boolean isLive, AdvancedRaidTrackerConfig config, ClientThread clientThread, ConfigManager configManager)\n    {\n        this.configManager \u003d configManager;\n        this.config \u003d config;\n        this.clientThread \u003d clientThread;\n        scale \u003d 26;\n        live \u003d isLive;\n        this.room \u003d room;\n        startTick \u003d 0;\n        endTick \u003d 0;\n        shouldWrap \u003d true;\n        boxWidth \u003d 100 + scale * 51;\n        img \u003d new BufferedImage(boxWidth + 10, 600, BufferedImage.TYPE_INT_ARGB);\n        recalculateSize();\n        addMouseListener(this);\n        addMouseMotionListener(this);\n        addMouseWheelListener(this);\n    }\n\n    @Override\n    protected void paintComponent(Graphics g)\n    {\n        super.paintComponent(g);\n        if (img !\u003d null)\n        {\n            g.drawImage(img, 0, 0, null);\n        }\n    }\n\n    @Override\n    public Dimension getPreferredSize()\n    {\n        return new Dimension(img.getWidth(), img.getHeight());\n    }\n\n    private Rectangle getStringBounds(Graphics2D g2, String str)\n    {\n        FontRenderContext frc \u003d g2.getFontRenderContext();\n        GlyphVector gv \u003d g2.getFont().createGlyphVector(frc, str);\n        return gv.getPixelBounds(null, (float) 0, (float) 0);\n    }\n\n    private int getStringWidth(Graphics2D g, String str)\n    {\n        FontRenderContext frc \u003d g.getFontRenderContext();\n        GlyphVector gv \u003d g.getFont().createGlyphVector(frc, str);\n        return gv.getPixelBounds(null, 0, 0).width;\n    }\n\n    int getYOffset(int tick)\n    {\n        return ((((tick - startTick) / 50) * boxHeight) + 20)-(currentScrollOffset);\n    }\n\n    int getXOffset(int tick)\n    {\n        return (shouldWrap) ? ((tick - startTick) % 50) * scale : tick * scale;\n    }\n\n    private void drawTicks(Graphics2D g)\n    {\n        for (int i \u003d startTick; i \u003c endTick; i++)\n        {\n            if(shouldTickBeDrawn(i))\n            {\n                int xOffset \u003d getXOffset(i);\n                int yOffset \u003d getYOffset(i);\n                yOffset +\u003d scale;\n                g.setColor(Color.DARK_GRAY);\n                g.setColor(new Color(220, 220, 220));\n                Font oldFont \u003d g.getFont();\n                g.setFont(oldFont.deriveFont(10.0f));\n                int strWidth \u003d getStringBounds(g, String.valueOf(i)).width;\n                g.drawString(String.valueOf(i), 100 + xOffset + (scale / 2) - (strWidth / 2), yOffset + (fontHeight / 2));\n                g.setFont(oldFont);\n            }\n        }\n    }\n\n    private void drawAutos(Graphics2D g)\n    {\n        for (Integer i : autos)\n        {\n            if(shouldTickBeDrawn(i))\n            {\n                g.setColor(new Color(255, 80, 80, 60));\n                int xOffset \u003d getXOffset(i);\n                int yOffset \u003d getYOffset(i);\n                g.fillRoundRect(xOffset + 100, yOffset + 10, scale, boxHeight - scale, 7, 7);\n            }\n        }\n    }\n\n    private void drawGraphBoxes(Graphics2D g)\n    {\n        for (int i \u003d 0; i \u003c boxesToShow; i++)\n        {\n            int startX \u003d 100;\n            int startY \u003d boxHeight * i + 30 - (currentScrollOffset-(currentBox*boxHeight));\n            int endX \u003d boxWidth - scale;\n            int endY \u003d startY + boxHeight;\n            g.setColor(new Color(100, 100, 100));\n\n            if(startY \u003e 5)\n            {\n                g.drawLine(startX, startY + scale, endX, startY + scale);\n            }\n            g.drawLine(startX, (startY \u003e 5) ? startY + scale : scale+5, startX, endY - scale);\n            if(endY-scale \u003e 5 + scale)\n            {\n                g.drawLine(startX, endY - scale, endX, endY - scale);\n            }\n            g.drawLine(endX, endY - scale, endX, (startY \u003e 5) ? startY + scale : scale+5);\n        }\n    }\n\n    public static BufferedImage getScaledImage(BufferedImage image, int width, int height)\n    {\n        int imageWidth  \u003d image.getWidth();\n        int imageHeight \u003d image.getHeight();\n\n        double scaleX \u003d (double)width/imageWidth;\n        double scaleY \u003d (double)height/imageHeight;\n        AffineTransform scaleTransform \u003d AffineTransform.getScaleInstance(scaleX, scaleY);\n        AffineTransformOp bilinearScaleOp \u003d new AffineTransformOp(scaleTransform, AffineTransformOp.TYPE_BILINEAR);\n\n        return bilinearScaleOp.filter(\n                image,\n                new BufferedImage(width, height, image.getType()));\n    }\n\n    private void drawYChartColumn(Graphics2D g)\n    {\n        g.setColor(Color.WHITE);\n        for (int i \u003d 0; i \u003c players.size(); i++)\n        {\n            playerOffsets.put(players.get(i), i);\n            for (int j \u003d currentBox; j \u003c boxesToShow+currentBox; j++)\n            {\n                g.setColor(Color.DARK_GRAY);\n                g.setColor(config.primaryLight());\n                int nameRectsY \u003d (j*boxHeight)+((i+2)*scale)+10-3-currentScrollOffset;\n                if(nameRectsY \u003e scale + 5)\n                {\n                    g.fillRoundRect(5, nameRectsY, 90, scale - 6, 10, 10);\n                }\n                g.setColor(Color.WHITE);\n                Font oldFont \u003d g.getFont();\n                g.setFont(FontManager.getRunescapeBoldFont());\n                int width \u003d getStringWidth(g, players.get(i));\n                int margin \u003d 5;\n                int subBoxWidth \u003d 90;\n                int textPosition \u003d margin + (subBoxWidth-width)/2;\n                int yPosition \u003d ((j * boxHeight) + ((i + 2) * scale) + (fontHeight) / 2) + (scale/2) + 8-(currentScrollOffset);\n                if(yPosition \u003e scale+5)\n                {\n                    g.drawString(players.get(i), textPosition, yPosition);\n                }\n\n                if (i \u003d\u003d 0)\n                {\n                    int textYPosition \u003d j * boxHeight + ((players.size() + 2) * scale) + (fontHeight / 2) + 20 - currentScrollOffset;\n                    if(textYPosition \u003e scale + 5)\n                    {\n                        g.drawString(roomSpecificText, 5, textYPosition);\n                    }\n                }\n                g.setFont(oldFont);\n            }\n        }\n\n    }\n\n    private void drawRoomSpecificData(Graphics2D g)\n    {\n        for (Integer i : specific.keySet())\n        {\n            int xOffset \u003d getXOffset(i);\n            int yOffset \u003d getYOffset(i);\n            xOffset +\u003d 100;\n            yOffset +\u003d (playerOffsets.size() + 2) * scale - 10 - currentScrollOffset;\n            g.setColor(Color.WHITE);\n            int strWidth \u003d getStringBounds(g, \"X\").width;\n            if(yOffset \u003e scale + 5)\n            {\n                g.drawString(\"X\", xOffset + (scale / 2) - (strWidth / 2), yOffset + (fontHeight / 2) + 10);\n            }\n        }\n    }\n\n    private void drawDawnSpecs(Graphics2D g)\n    {\n        for (DawnSpec dawnSpec : dawnSpecs)\n        {\n            String damage \u003d String.valueOf(dawnSpec.getDamage());\n            if (dawnSpec.getDamage() !\u003d -1)\n            {\n                int xOffset \u003d (shouldWrap) ? ((dawnSpec.tick - startTick - 2) % 50) * scale : (dawnSpec.tick + 2) * scale;\n                int yOffset \u003d getYOffset(dawnSpec.tick);\n                xOffset +\u003d 100;\n                yOffset +\u003d (playerOffsets.size() + 3) * scale - 10;\n                g.setColor(Color.WHITE);\n                int textOffset \u003d (scale / 2) - (getStringBounds(g, damage).width) / 2;\n                if(yOffset \u003e scale + 5)\n                {\n                    g.drawString(damage, xOffset + textOffset, yOffset + (fontHeight / 2) + 10);\n                }\n            }\n        }\n    }\n\n    public static BufferedImage createDropShadow(BufferedImage image)\n    {\n        BufferedImage shadow \u003d new BufferedImage(image.getWidth(), image.getHeight(), BufferedImage.TYPE_INT_ARGB);\n\n        Graphics2D g2 \u003d shadow.createGraphics();\n        g2.drawImage(image, 0, 0, null);\n\n        g2.setComposite(AlphaComposite.SrcIn);\n        g2.setColor(new Color(0, 0, 0, 128));\n        g2.fillRect(0, 0, shadow.getWidth(), shadow.getHeight());\n\n        g2.dispose();\n        return shadow;\n    }\n\n    private void drawPrimaryBoxes(Graphics2D g)\n    {\n        for (OutlineBox box : outlineBoxes)\n        {\n            if (shouldTickBeDrawn(box.tick))\n            {\n                int xOffset \u003d 100 + ((shouldWrap) ? ((box.tick - startTick) % 50) * scale : box.tick * scale);\n                if(playerOffsets.get(box.player) \u003d\u003d null)\n                {\n                    continue;\n                }\n                int yOffset \u003d ((playerOffsets.get(box.player) + 1) * scale + 30) + (((shouldWrap) ? ((box.tick - startTick) / 50) * boxHeight : 30)-currentScrollOffset);\n                if(yOffset \u003e scale + 5)\n                {\n                    if (config !\u003d null \u0026\u0026 config.useIconsOnChart())\n                    {\n                        try\n                        {\n                            if (box.weaponAttack.attackTicks !\u003d -1)\n                            {\n                                int opacity \u003d config.iconBackgroundOpacity();\n                                opacity \u003d Math.min(255, opacity);\n                                opacity \u003d Math.max(0, opacity);\n                                g.setColor(new Color(box.color.getRed(), box.color.getGreen(), box.color.getBlue(), opacity));\n                                g.fillRoundRect(xOffset + 2, yOffset + 2, scale - 3, scale - 3, 5, 5);\n                                BufferedImage scaled \u003d getScaledImage(box.attack.img, scale - 2, scale - 2);\n                                g.drawImage(createDropShadow(scaled), xOffset + 3, yOffset + 3, null);\n                                g.drawImage(scaled, xOffset + 2, yOffset + 1, null);\n                            }\n                        } catch (Exception ignored)\n                        {\n\n                        }\n                    } else\n                    {\n                        int opacity \u003d 100;\n                        if (config !\u003d null)\n                        {\n                            opacity \u003d config.letterBackgroundOpacity();\n                            opacity \u003d Math.min(255, opacity);\n                            opacity \u003d Math.max(0, opacity);\n                        }\n                        g.setColor(new Color(box.color.getRed(), box.color.getGreen(), box.color.getBlue(), opacity));\n                        g.fillRoundRect(xOffset + 2, yOffset + 2, scale - 3, scale - 3, 5, 5);\n                        g.setColor((box.primaryTarget) ? Color.WHITE : new Color(0, 190, 255));\n                        int textOffset \u003d (scale / 2) - (getStringWidth(g, box.letter) / 2);\n                        int primaryOffset \u003d yOffset + (box.additionalText.isEmpty() ? (fontHeight / 2) : 0);\n                        g.drawString(box.letter, xOffset + textOffset - 1, primaryOffset + (scale / 2) + 1);\n                        if (!box.additionalText.isEmpty())\n                        {\n                            Font f \u003d g.getFont();\n                            g.setFont(f.deriveFont(10.0f));\n                            textOffset \u003d (scale / 2) - (getStringWidth(g, box.additionalText) / 2);\n                            g.setColor(Color.WHITE);\n                            g.drawString(box.additionalText, xOffset + textOffset, yOffset + scale - 3);\n                            g.setFont(f);\n                        }\n                    }\n                    box.createOutline();\n                    g.setColor(box.outlineColor);\n                    g.drawRoundRect(xOffset + 1, yOffset + 1, scale - 2, scale - 2, 5, 5);\n                }\n            }\n        }\n    }\n\n    private void drawMarkerLines(Graphics2D g)\n    {\n        if (!live || finished)\n        {\n            for (Integer i : lines.keySet())\n            {\n                if(shouldTickBeDrawn(i))\n                {\n                    int xOffset \u003d getXOffset(i);\n                    int yOffset \u003d getYOffset(i);\n                    xOffset +\u003d 100;\n                    yOffset +\u003d (scale / 2);\n                    g.setColor(new Color(255, 0, 0));\n                    g.drawLine(xOffset, Math.max(yOffset, scale + 5), xOffset, yOffset + boxHeight - 20);\n                    int stringLength \u003d getStringBounds(g, lines.get(i)).width;\n                    g.setColor(Color.WHITE);\n                    if(yOffset \u003e scale + 5 )\n                    {\n                    g.drawString(lines.get(i), xOffset - (stringLength / 2), yOffset - 1);\n                    }\n                }\n            }\n        }\n    }\n\n    private void drawThrallBoxes(Graphics2D g)\n    {\n        for (ThrallOutlineBox box : thrallOutlineBoxes)\n        {\n            g.setColor(new Color(box.getColor().getRed(), box.getColor().getGreen(), box.getColor().getBlue(), 30));\n\n            int maxTick \u003d getMaxTick(box);\n            int lastEndTick \u003d box.spawnTick;\n            while (lastEndTick \u003c maxTick \u0026\u0026 shouldTickBeDrawn(lastEndTick))\n            {\n                    int yOffset \u003d getYOffset(lastEndTick);\n                    try\n                    {\n                        yOffset +\u003d (playerOffsets.get(box.owner) + 1) * scale + 10;\n                    } catch (Exception e)\n                    {\n                        break;\n                    }\n                    int currentEndTick \u003d (shouldWrap) ? lastEndTick + (50 - (lastEndTick % 50) + (startTick % 50)) : maxTick;\n                    if (currentEndTick \u003e maxTick)\n                    {\n                        currentEndTick \u003d maxTick;\n                    }\n                    int xOffsetStart \u003d (shouldWrap) ? ((lastEndTick - startTick) % 50) * scale : (lastEndTick - 1) * scale;\n                    xOffsetStart +\u003d 100;\n                    int xOffsetEnd \u003d (shouldWrap) ? ((currentEndTick - startTick - 1) % 50) * scale : (currentEndTick - 1) * scale;\n                    xOffsetEnd +\u003d 100;\n                    lastEndTick \u003d currentEndTick;\n                    if(yOffset \u003e scale + 5)\n                    {\n                        g.fillRect(xOffsetStart, yOffset + 1, xOffsetEnd - xOffsetStart + scale, scale - 2);\n                    }\n            }\n        }\n    }\n\n    private int getMaxTick(ThrallOutlineBox box)\n    {\n        int maxTick \u003d box.spawnTick + 99;\n        for (ThrallOutlineBox boxCompare : thrallOutlineBoxes)\n        {\n            if (box.owner.equalsIgnoreCase(boxCompare.owner))\n            {\n                if (boxCompare.spawnTick \u003e box.spawnTick \u0026\u0026 boxCompare.spawnTick \u003c (box.spawnTick + 99))\n                {\n                    maxTick \u003d boxCompare.spawnTick;\n                }\n            }\n        }\n        if (endTick \u003c maxTick)\n        {\n            maxTick \u003d endTick;\n        }\n        return maxTick;\n    }\n\n    private void drawSelectedOutlineBox(Graphics2D g)\n    {\n        if (selectedTick !\u003d -1 \u0026\u0026 !selectedPlayer.equalsIgnoreCase(\"\"))\n        {\n            g.setColor(new Color(255, 255, 255));\n            int xOffset \u003d 100 + ((shouldWrap) ? ((selectedTick - startTick) % 50) * scale : selectedTick * scale);\n            int yOffset \u003d ((playerOffsets.get(selectedPlayer) + 1) * scale + 30) + (((shouldWrap) ? ((selectedTick - startTick) / 50) * boxHeight : 30)-currentScrollOffset);\n            if(yOffset \u003e scale + 5)\n            {\n                g.drawRect(xOffset, yOffset, scale, scale);\n            }\n        }\n    }\n\n    private Point getPoint(int tick, String player)\n    {\n        return new Point(\n                100 + ((shouldWrap) ? ((tick - startTick) % 50) * scale : tick * scale),\n                ((playerOffsets.get(player) + 1) * scale + 10) + (((shouldWrap) ? ((tick - startTick) / 50) * boxHeight : 0)-currentScrollOffset));\n    }\n\n    private void drawSelectedRow(Graphics2D g)\n    {\n        if (selectedRow !\u003d -1)\n        {\n            g.setColor(new Color(255, 255, 255));\n            int xOffset \u003d 100 + getXOffset(selectedRow);\n            int yOffset \u003d 10 + getYOffset(selectedRow);\n            g.drawRect(xOffset, yOffset, scale, scale * (players.size() + 2));\n\n            int selectedTickHP \u003d -1;\n            try\n            {\n                selectedTickHP \u003d roomHP.get(selectedRow + 1);\n            } catch (Exception ignored)\n            {\n\n            }\n            int offset \u003d -1;\n            switch (room)\n            {\n                case \"Maiden\":\n                case \"Verzik P3\":\n                    offset \u003d 7;\n                    break;\n                case \"Bloat\":\n                case \"Sotetseg\":\n                case \"Xarpus\":\n                    offset \u003d 3;\n                    break;\n                case \"Nylocas\":\n                    offset \u003d 5;\n                    offset +\u003d (4 - ((offset + selectedRow) % 4));\n                    offset -\u003d 2;\n                    break;\n            }\n            String bossWouldHaveDied \u003d (offset !\u003d -1) ? \"Melee attack on this tick killing would result in: \" + RoomUtil.time(selectedRow + 1 + offset + 1) + \" (Quick death: \" + RoomUtil.time(selectedRow + offset + 1) + \")\" : \"\";\n            String HPString \u003d \"Boss HP: \" + ((selectedTickHP \u003d\u003d -1) ? \"-\" : RoomUtil.varbitHPtoReadable(selectedTickHP));\n            HoverBox hoverBox \u003d new HoverBox(HPString, config);\n            if (offset !\u003d -1)\n            {\n                hoverBox.addString(bossWouldHaveDied);\n            }\n            int xPosition \u003d xOffset+scale;\n            if(xPosition+hoverBox.getWidth(g) \u003e img.getWidth())\n            {\n                xPosition \u003d xPosition-hoverBox.getWidth(g)-3*scale;\n            }\n            hoverBox.setPosition(xPosition, yOffset);\n            hoverBox.draw(g);\n        }\n    }\n\n\n    private void drawHoverBox(Graphics2D g)\n    {\n        for (PlayerDidAttack action : actions.keySet())\n        {\n            if (action.tick \u003d\u003d selectedTick \u0026\u0026 action.player.equals(selectedPlayer))\n            {\n                if(shouldTickBeDrawn(action.tick))\n                {\n                    Point location \u003d getPoint(action.tick, action.player);\n                    HoverBox hoverBox \u003d new HoverBox(actions.get(action), config);\n                    hoverBox.addString(\"\");\n                    for (String item : action.wornItemNames)\n                    {\n                        hoverBox.addString(\".\" + item);\n                    }\n                    int xPosition \u003d location.getX() + 10;\n                    if (xPosition + hoverBox.getWidth(g) \u003e img.getWidth())\n                    {\n                        xPosition \u003d xPosition - hoverBox.getWidth(g) - scale * 2;\n                    }\n                    hoverBox.setPosition(xPosition, location.getY() - 10);\n                    hoverBox.draw(g);\n                }\n            }\n        }\n    }\n\n    private void drawMaidenCrabs(Graphics2D g)\n    {\n        g.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);\n        g.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);\n        g.setColor(new Color(230, 20, 20, 200));\n        if (room.equals(\"Maiden\"))\n        {\n            for (Integer tick : lines.keySet())\n            {\n                if(lines.get(tick).equals(\"Dead\"))\n                {\n                    continue;\n                }\n                String proc \u003d lines.get(tick);\n                int xOffset \u003d 100 + getXOffset(tick + 1);\n                int yOffset \u003d 10 + getYOffset(tick + 1);\n                if(yOffset \u003e scale + 5)\n                {\n                    continue;\n                }\n                yOffset -\u003d scale;\n                int crabOffsetX \u003d 0;\n                int crabOffsetY;\n\n                crabOffsetY \u003d 11;\n                g.drawOval(xOffset + crabOffsetX, yOffset + crabOffsetY, 7, 7);\n\n                crabOffsetY \u003d 20;\n                g.drawOval(xOffset + crabOffsetX, yOffset + crabOffsetY, 7, 7);\n\n                crabOffsetX \u003d 9;\n                crabOffsetY \u003d 11;\n                g.drawOval(xOffset + crabOffsetX, yOffset + crabOffsetY, 7, 7);\n\n                crabOffsetY \u003d 20;\n                g.drawOval(xOffset + crabOffsetX, yOffset + crabOffsetY, 7, 7);\n\n                crabOffsetX \u003d 18;\n                crabOffsetY \u003d 11;\n                g.drawOval(xOffset + crabOffsetX, yOffset + crabOffsetY, 7, 7);\n\n                crabOffsetY \u003d 20;\n                g.drawOval(xOffset + crabOffsetX, yOffset + crabOffsetY, 7, 7);\n\n                crabOffsetX \u003d 27;\n                crabOffsetY \u003d 2;\n                g.drawOval(xOffset + crabOffsetX, yOffset + crabOffsetY, 7, 7);\n\n                crabOffsetY \u003d 20;\n                g.drawOval(xOffset + crabOffsetX, yOffset + crabOffsetY, 7, 7);\n\n                crabOffsetY \u003d 11;\n                g.drawOval(xOffset + crabOffsetX, yOffset + crabOffsetY, 7, 7);\n\n                crabOffsetY \u003d 29;\n                g.drawOval(xOffset + crabOffsetX, yOffset + crabOffsetY, 7, 7);\n\n\n                for (String crab : crabDescriptions)\n                {\n                    if (crab.contains(proc))\n                    {\n                        xOffset \u003d 100 + getXOffset(tick + 1);\n                        yOffset \u003d 10 + getYOffset(tick + 1);\n                        crabOffsetX \u003d 0;\n                        crabOffsetY \u003d 0;\n                        if (crab.contains(\"N1\"))\n                        {\n                            crabOffsetY \u003d 11;\n                        } else if (crab.contains(\"S1\"))\n                        {\n                            crabOffsetY \u003d 20;\n                        } else if (crab.contains(\"N2\"))\n                        {\n                            crabOffsetX \u003d 9;\n                            crabOffsetY \u003d 11;\n                        } else if (crab.contains(\"S2\"))\n                        {\n                            crabOffsetX \u003d 9;\n                            crabOffsetY \u003d 20;\n                        } else if (crab.contains(\"N3\"))\n                        {\n                            crabOffsetX \u003d 18;\n                            crabOffsetY \u003d 11;\n                        } else if (crab.contains(\"S3\"))\n                        {\n                            crabOffsetX \u003d 18;\n                            crabOffsetY \u003d 20;\n                        } else if (crab.contains(\"N4 (1)\"))\n                        {\n                            crabOffsetX \u003d 27;\n                            crabOffsetY \u003d 2;\n                        } else if (crab.contains(\"S4 (1)\"))\n                        {\n                            crabOffsetX \u003d 27;\n                            crabOffsetY \u003d 20;\n                        } else if (crab.contains(\"N4 (2)\"))\n                        {\n                            crabOffsetX \u003d 27;\n                            crabOffsetY \u003d 11;\n                        } else if (crab.contains(\"S4 (2)\"))\n                        {\n                            crabOffsetX \u003d 27;\n                            crabOffsetY \u003d 29;\n                        }\n                        crabOffsetY -\u003d scale;\n                        g.setColor(new Color(230, 20, 20, 200));\n                        g.fillOval(xOffset + crabOffsetX, yOffset + crabOffsetY, 7, 7);\n                    }\n                }\n            }\n        }\n    }\n\n    private void drawRoomTime(Graphics2D g)\n    {\n        g.setColor(Color.WHITE);\n        Font oldFont \u003d g.getFont();\n        g.setFont(FontManager.getRunescapeBoldFont());\n        g.drawString(\"Time \" + RoomUtil.time(endTick), 5, 20);\n        g.setFont(oldFont);\n    }\n\n    private void drawCheckBox(Graphics2D g)\n    {\n        g.setColor(Color.WHITE);\n        Font oldFont \u003d g.getFont();\n        g.setFont(FontManager.getRunescapeBoldFont());\n        g.drawString(\"Use Icons? \", 100, 20);\n        if(!checkBoxHovered)\n        {\n            g.setColor(new Color(140, 140, 140));\n        }\n\n        g.drawRect(180, 2, 20, 20);\n        if(checkBoxHovered)\n        {\n            g.setColor(new Color(140, 140, 140));\n            g.fillRect(181, 3, 19, 19);\n        }\n        g.setColor(Color.WHITE);\n        if(config.useIconsOnChart())\n        {\n            g.drawString(\"x\", 186, 17);\n        }\n        g.setFont(oldFont);\n    }\n\n    private void drawBaseBoxes(Graphics2D g)\n    {\n        for(int i \u003d startTick; i \u003c endTick; i++)\n        {\n            if(shouldTickBeDrawn(i))\n            {\n                for (int j \u003d 0; j \u003c playerOffsets.size(); j++)\n                {\n                    int xOffset \u003d 100 + ((shouldWrap) ? ((i - startTick) % 50) * scale : i * scale);\n                    if (playerOffsets.get(players.get(j)) \u003d\u003d null)\n                    {\n                        continue;\n                    }\n                    shouldWrap \u003d true;\n                    int yOffset \u003d ((playerOffsets.get(players.get(j)) + 1) * scale + 30) + ((((i - startTick) / 50) * boxHeight)-currentScrollOffset);\n                    g.setColor(config.primaryMiddle());\n                    if(yOffset \u003e scale + 5)\n                    {\n                        g.fillRoundRect(xOffset + 2, yOffset + 2, scale - 3, scale - 3, 5, 5);\n                    }\n                }\n            }\n        }\n    }\n\n    private void drawGraph()\n    {\n        if(!shouldDraw())\n        {\n            return;\n        }\n        Graphics2D g \u003d (Graphics2D) img.getGraphics();\n        g.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);\n        g.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);\n        RenderingHints qualityHints \u003d new RenderingHints(\n                RenderingHints.KEY_ANTIALIASING,\n                RenderingHints.VALUE_ANTIALIAS_ON );\n        qualityHints.put(\n                RenderingHints.KEY_RENDERING,\n                RenderingHints.VALUE_RENDER_QUALITY );\n        g.setRenderingHints( qualityHints);\n        Color oldColor \u003d g.getColor();\n\n        g.setColor(config.primaryDark());\n        g.fillRect(0, 0, img.getWidth(), img.getHeight());\n\n\n        fontHeight \u003d getStringBounds(g, \"a\").height;\n        g.setColor(Color.WHITE);\n\n        drawTicks(g);\n        drawGraphBoxes(g);\n        drawBaseBoxes(g);\n        drawYChartColumn(g);\n        drawRoomSpecificData(g);\n        drawDawnSpecs(g);\n        drawPrimaryBoxes(g);\n        drawAutos(g);\n        drawMarkerLines(g);\n        drawThrallBoxes(g);\n        drawMaidenCrabs(g);\n        drawSelectedOutlineBox(g);\n        drawSelectedRow(g);\n        drawHoverBox(g);\n        drawRoomTime(g);\n        drawCheckBox(g);\n\n        g.setColor(oldColor);\n        g.dispose();\n        repaint();\n    }\n\n    public boolean shouldTickBeDrawn(int tick)\n    {\n        return tick \u003e\u003d (startTick + currentBox*50) \u0026\u0026 tick \u003c (startTick + ((currentBox+boxesToShow)*50));\n    }\n\n    public void getTickHovered(int x, int y)\n    {\n        y \u003d y + currentScrollOffset;\n        if (y \u003e 20)\n        {\n            int boxNumber \u003d (y - 20) / boxHeight;\n            if (x \u003e 100)\n            {\n                int tick \u003d startTick + (50 * boxNumber + ((x - 100) / scale));\n                int playerOffsetPosition \u003d (((y - 30 - scale) % boxHeight) / scale);\n                if (playerOffsetPosition \u003e\u003d 0 \u0026\u0026 playerOffsetPosition \u003c players.size() \u0026\u0026 (y - 30 - scale \u003e 0))\n                {\n                    selectedTick \u003d tick;\n                    selectedPlayer \u003d players.get(playerOffsetPosition);\n                    selectedRow \u003d -1;\n                } else if (y % boxHeight \u003c 30 + scale)\n                {\n                    selectedRow \u003d tick;\n                    selectedPlayer \u003d \"\";\n                    selectedTick \u003d -1;\n                } else\n                {\n                    selectedPlayer \u003d \"\";\n                    selectedTick \u003d -1;\n                    selectedRow \u003d -1;\n                }\n            } else\n            {\n                selectedPlayer \u003d \"\";\n                selectedTick \u003d -1;\n                selectedRow \u003d -1;\n            }\n            drawGraph();\n        }\n    }\n\n    @Override\n    public void mouseClicked(MouseEvent e)\n    {\n        if(checkBoxHovered)\n        {\n            configManager.setConfiguration(\"Advanced Raid Tracker\", \"useIconsOnChart\", !config.useIconsOnChart());\n            drawGraph();\n        }\n    }\n\n    @Override\n    public void mousePressed(MouseEvent e)\n    {\n\n    }\n\n\n    @Override\n    public void mouseReleased(MouseEvent e)\n    {\n    }\n\n    @Override\n    public void mouseEntered(MouseEvent e)\n    {\n    }\n\n    @Override\n    public void mouseExited(MouseEvent e)\n    {\n        selectedPlayer \u003d \"\";\n        selectedTick \u003d -1;\n        selectedRow \u003d -1;\n        drawGraph();\n    }\n\n    @Override\n    public void mouseDragged(MouseEvent e)\n    {\n    }\n\n    @Override\n    public void mouseMoved(MouseEvent e)\n    {\n        checkBoxHovered \u003d e.getX() \u003e\u003d 180 \u0026\u0026 e.getX() \u003c\u003d 200 \u0026\u0026 e.getY() \u003e\u003d 2 \u0026\u0026 e.getY() \u003c\u003d 22;\n        getTickHovered(e.getX(), e.getY());\n        drawGraph();\n    }\n\n    public String getBossName(int id, int index, int tick)\n    {\n        try\n        {\n            switch (id)\n            {\n                case TobIDs.MAIDEN_P0:\n                case TobIDs.MAIDEN_P1:\n                case TobIDs.MAIDEN_P2:\n                case TobIDs.MAIDEN_P3:\n                case TobIDs.MAIDEN_PRE_DEAD:\n                case TobIDs.MAIDEN_P0_HM:\n                case TobIDs.MAIDEN_P1_HM:\n                case TobIDs.MAIDEN_P2_HM:\n                case TobIDs.MAIDEN_P3_HM:\n                case TobIDs.MAIDEN_PRE_DEAD_HM:\n                case TobIDs.MAIDEN_P0_SM:\n                case TobIDs.MAIDEN_P1_SM:\n                case TobIDs.MAIDEN_P2_SM:\n                case TobIDs.MAIDEN_P3_SM:\n                case TobIDs.MAIDEN_PRE_DEAD_SM:\n                    return \"Maiden (\" + RoomUtil.varbitHPtoReadable(roomHP.get(tick + 1)) + \")\";\n                case TobIDs.BLOAT:\n                case TobIDs.BLOAT_HM:\n                case TobIDs.BLOAT_SM:\n                    return \"Bloat (\" + RoomUtil.varbitHPtoReadable(roomHP.get(tick)) + \")\";\n                case TobIDs.NYLO_BOSS_MELEE:\n                case TobIDs.NYLO_BOSS_RANGE:\n                case TobIDs.NYLO_BOSS_MAGE:\n                case TobIDs.NYLO_BOSS_MELEE_HM:\n                case TobIDs.NYLO_BOSS_RANGE_HM:\n                case TobIDs.NYLO_BOSS_MAGE_HM:\n                case TobIDs.NYLO_BOSS_MELEE_SM:\n                case TobIDs.NYLO_BOSS_RANGE_SM:\n                case TobIDs.NYLO_BOSS_MAGE_SM:\n                    return \"Nylo Boss (\" + RoomUtil.varbitHPtoReadable(roomHP.get(tick)) + \")\";\n                case TobIDs.XARPUS_P23:\n                case TobIDs.XARPUS_P23_HM:\n                case TobIDs.XARPUS_P23_SM:\n                    return \"Xarpus (\" + RoomUtil.varbitHPtoReadable(roomHP.get(tick)) + \")\";\n                case TobIDs.VERZIK_P1:\n                case TobIDs.VERZIK_P2:\n                case TobIDs.VERZIK_P3:\n                case TobIDs.VERZIK_P1_HM:\n                case TobIDs.VERZIK_P2_HM:\n                case TobIDs.VERZIK_P3_HM:\n                case TobIDs.VERZIK_P1_SM:\n                case TobIDs.VERZIK_P2_SM:\n                case TobIDs.VERZIK_P3_SM:\n                    return \"Verzik (\" + RoomUtil.varbitHPtoReadable(roomHP.get(tick)) + \")\";\n            }\n            for (Integer i : NPCMap.keySet())\n            {\n                if (i \u003d\u003d index)\n                {\n                    String hp \u003d \"-1\";\n                    try\n                    {\n                        hp \u003d RoomUtil.varbitHPtoReadable(roomHP.get(tick));\n                    } catch (Exception ignored\n                    )\n                    {\n                    }\n                    return NPCMap.get(i) + \" (Boss: \" + hp + \")\";\n                }\n            }\n            return \"?\";\n        } catch (Exception e)\n        {\n            return \"?\";\n        }\n    }\n    private int currentBox \u003d 0;\n    private int currentScrollOffset \u003d 0;\n    @Override\n    public void mouseWheelMoved(MouseWheelEvent e) //manually implement scrolling\n    {\n        if(e.getWheelRotation() \u003c 0) //top of the first box aligns to top if you scroll up\n        {\n            currentBox \u003d Math.max(0, currentBox-1);\n            currentScrollOffset \u003d currentBox*boxHeight;\n        }\n        else //bottom of the bottom box aligns to the bottom if you scroll down\n        {\n            if(TITLE_BAR_PLUS_TAB_HEIGHT+scale+boxCount*boxHeight \u003e img.getHeight()) //no need to scroll at all if all boxes fit on screen, boxes would jump to bottom and leave dead space\n            {\n                int lastBox \u003d currentBox + boxesToShow - 1;\n                lastBox \u003d Math.min(lastBox + 1, boxCount - 1);\n                currentBox \u003d lastBox - boxesToShow + 1;\n                int lastBoxEnd \u003d (boxesToShow * boxHeight) + scale + TITLE_BAR_PLUS_TAB_HEIGHT;\n                currentScrollOffset \u003d (currentBox * boxHeight) + (lastBoxEnd - img.getHeight());\n            }\n        }\n        recalculateSize();\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\charts\\ChartPanel.java"},{"fileName":"HoverBox.java","content":"package com.advancedraidtracker.ui.charts;\n\nimport com.advancedraidtracker.AdvancedRaidTrackerConfig;\nimport com.advancedraidtracker.utility.ItemReference;\nimport com.advancedraidtracker.utility.Point;\nimport net.runelite.client.ui.FontManager;\nimport java.awt.*;\nimport java.awt.font.FontRenderContext;\nimport java.awt.font.GlyphVector;\nimport java.util.ArrayList;\n\nimport static com.advancedraidtracker.utility.ItemReference.*;\n\npublic class HoverBox\n{\n    ArrayList\u003cString\u003e info;\n    Point location \u003d new Point(0,0);\n    private final AdvancedRaidTrackerConfig config;\n    public HoverBox(String s, AdvancedRaidTrackerConfig config)\n    {\n        this.config \u003d config;\n        info \u003d new ArrayList\u003c\u003e();\n        addString(s);\n    }\n\n    public void addString(String s)\n    {\n        info.add(s);\n        if(s.toLowerCase().startsWith(\".weapon\"))\n        {\n            setStyle(s);\n        }\n    }\n\n    public void setPosition(int x, int y)\n    {\n        location \u003d new Point(x+config.chartScaleSize(), y);\n    }\n\n    int style \u003d NONE;\n\n    private void setStyle(String weapon)\n    {\n        if(anyMatch(weapon, ItemReference.ITEMS[MELEE]))\n        {\n            style \u003d MELEE;\n        }\n        else if(anyMatch(weapon, ItemReference.ITEMS[RANGE]))\n        {\n            style \u003d RANGE;\n        }\n        else if(anyMatch(weapon, ItemReference.ITEMS[MAGE]))\n        {\n            style \u003d MAGE;\n        }\n    }\n    private boolean anyMatch(String item, String[] items)\n    {\n        for(String s : items)\n        {\n            if(item.toLowerCase().contains(s))\n            {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    public int getWidth(Graphics2D g)\n    {\n        Font oldFont \u003d g.getFont();\n        g.setFont(FontManager.getRunescapeBoldFont());\n        int longestString \u003d 0;\n        for(String s : info)\n        {\n            int stringLength \u003d getStringWidth(g, s);\n            if (stringLength \u003e longestString)\n            {\n                longestString \u003d stringLength;\n            }\n        }\n        g.setFont(oldFont);\n        return longestString+10;\n    }\n\n    public void draw(Graphics2D g)\n    {\n        Font oldFont \u003d g.getFont();\n        g.setFont(FontManager.getRunescapeBoldFont());\n        int fontHeight \u003d getStringBounds(g).height;\n        g.setColor(config.primaryDark());\n        int boxHeight \u003d 10 + (fontHeight+7)*info.size();\n        g.fillRoundRect(location.getX(), location.getY(), getWidth(g), boxHeight, 10, 10);\n        g.setColor(new Color(200, 200, 200));\n        g.drawRoundRect(location.getX(), location.getY(), getWidth(g), boxHeight, 10, 10);\n\n        for(int i \u003d 0; i \u003c info.size(); i++)\n        {\n            String label \u003d info.get(i);\n            if(label.startsWith(\".\") \u0026\u0026 label.length() \u003e 1)\n            {\n                label \u003d label.substring(1);\n                if(anyMatch(label, ItemReference.ITEMS[style]))\n                {\n                    g.setColor(new Color(60, 190, 60));\n                }\n                else if(anyMatch(label, ItemReference.ITEMS[0]))\n                {\n                    g.setColor(new Color(120, 120, 120));\n                }\n                else\n                {\n                    g.setColor(new Color(190, 30, 30));\n                }\n            }\n            g.drawString(label, location.getX()+5, location.getY() + 5 + (fontHeight+7)*(i+1));\n        }\n        g.setFont(oldFont);\n    }\n\n    private int getStringWidth(Graphics2D g, String str)\n    {\n        FontRenderContext frc \u003d g.getFontRenderContext();\n        GlyphVector gv \u003d g.getFont().createGlyphVector(frc, str);\n        return gv.getPixelBounds(null, 0, 0).width;\n    }\n\n    private Rectangle getStringBounds(Graphics2D g2)\n    {\n        FontRenderContext frc \u003d g2.getFontRenderContext();\n        GlyphVector gv \u003d g2.getFont().createGlyphVector(frc, \"a\");\n        return gv.getPixelBounds(null, (float) 0, (float) 0);\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\charts\\HoverBox.java"},{"fileName":"LiveChart.java","content":"package com.advancedraidtracker.ui.charts;\n\nimport com.advancedraidtracker.AdvancedRaidTrackerConfig;\nimport com.advancedraidtracker.ui.BaseFrame;\nimport com.advancedraidtracker.utility.wrappers.PlayerDidAttack;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ComponentAdapter;\nimport java.awt.event.ComponentEvent;\nimport java.awt.event.WindowAdapter;\nimport java.awt.event.WindowEvent;\nimport java.util.ArrayList;\nimport java.util.LinkedHashMap;\nimport java.util.Map;\n\n@Slf4j\npublic class LiveChart extends BaseFrame\n{\n    public JTabbedPane tabbedPane;\n\n    private final AdvancedRaidTrackerConfig config;\n    private final ClientThread clientThread;\n    private final ConfigManager configManager;\n    Map\u003cString, ChartPanel\u003e tobPanels;\n\n\n    private final String[] names \u003d {\"Maiden\", \"Bloat\", \"Nylocas\", \"Sotetseg\", \"Xarpus\", \"Verzik\"};\n    public LiveChart(AdvancedRaidTrackerConfig config, ClientThread clientThread, ConfigManager configManager)\n    {\n        this.configManager \u003d configManager;\n        this.clientThread \u003d clientThread;\n        this.config \u003d config;\n        tobPanels \u003d new LinkedHashMap\u003c\u003e();\n        for(String name : names)\n        {\n            tobPanels.put(name, new ChartPanel(name, true, config, clientThread, configManager));\n        }\n\n        tabbedPane \u003d new JTabbedPane();\n        tabbedPane.addChangeListener(cl-\u003e\n        {\n            String activePanel \u003d names[tabbedPane.getSelectedIndex()];\n            for(String panelNames : names)\n            {\n                if(activePanel.equals(panelNames) \u0026\u0026 this.isShowing())\n                {\n                    getPanel(panelNames).setActive(true);\n                    getPanel(panelNames).redraw();\n                }\n                else\n                {\n                    getPanel(panelNames).setActive(false);\n                }\n            }\n        });\n        for(String panelName : tobPanels.keySet())\n        {\n            tabbedPane.add(panelName, tobPanels.get(panelName));\n        }\n        addWindowListener(new WindowAdapter()\n        {\n            @Override\n            public void windowClosing(WindowEvent e)\n            {\n                super.windowClosing(e);\n                for(String panelNames : names)\n                {\n                    getPanel(panelNames).setActive(false);\n                }\n            }\n\n            @Override\n            public void windowOpened(WindowEvent e)\n            {\n                super.windowOpened(e);\n                String activePanel \u003d names[tabbedPane.getSelectedIndex()];\n                getPanel(activePanel).setActive(true);\n                getPanel(activePanel).redraw();\n                pack();\n            }\n        });\n\n        addComponentListener(new ComponentAdapter()\n        {\n            @Override\n            public void componentResized(ComponentEvent e)\n            {\n                super.componentResized(e);\n                Component c \u003d (Component) e.getSource();\n                for(ChartPanel p : tobPanels.values())\n                {\n                    p.setSize(c.getWidth(), c.getHeight());\n                }\n            }\n        });\n\n\n        add(tabbedPane);\n        pack();\n    }\n\n    @Override\n    public void close()\n    {\n        super.close();\n    }\n\n    public ChartPanel getPanel(String room)\n    {\n\t\tif(tobPanels.containsKey(room)) //do not use getOrDefault because it will allocate a BufferedImage every call even if the map does contain the key value\n\t\t{\n\t\t\treturn tobPanels.get(room);\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn new ChartPanel(\"\", true, config, clientThread, configManager);\n\t\t}\n    }\n\n    public void incrementTick(String room)\n    {\n        getPanel(room).incrementTick();\n        if (getPanel(room).endTick % 50 \u003d\u003d 0)\n        {\n            for(ChartPanel panel : tobPanels.values())\n            {\n                panel.sendToBottom();\n            }\n        }\n    }\n\n\n    public void addAttack(PlayerDidAttack attack, String room)\n    {\n        getPanel(room).addLiveAttack(attack);\n    }\n\n    public void addMaidenLine(int value, String description)\n    {\n        tobPanels.get(\"Maiden\").addLine(value, description);\n    }\n\n    public void addBloatLine(int value, String description)\n    {\n        tobPanels.get(\"Bloat\").addLine(value, description);\n    }\n\n    public void addNyloLine(int value, String description)\n    {\n        tobPanels.get(\"Nylocas\").addLine(value, description);\n    }\n\n    public void addSoteLine(int value, String description)\n    {\n        tobPanels.get(\"Sotetseg\").addLine(value, description);\n    }\n\n    public void addXarpLine(int value, String description)\n    {\n        tobPanels.get(\"Xarpus\").addLine(value, description);\n    }\n\n    public void addVerzikLine(int value, String description)\n    {\n        tobPanels.get(\"Verzik\").addLine(value, description);\n    }\n\n    public void setMaidenFinished(int tick)\n    {\n        tobPanels.get(\"Maiden\").setRoomFinished(tick);\n    }\n\n    public void setBloatFinished(int tick)\n    {\n        tobPanels.get(\"Bloat\").setRoomFinished(tick);\n    }\n\n    public void setNyloFinished(int tick)\n    {\n        tobPanels.get(\"Nylocas\").setRoomFinished(tick);\n    }\n\n    public void setSoteFinished(int tick)\n    {\n        tobPanels.get(\"Sotetseg\").setRoomFinished(tick);\n    }\n\n    public void setXarpFinished(int tick)\n    {\n        tobPanels.get(\"Xarpus\").setRoomFinished(tick);\n    }\n\n    public void setVerzFinished(int tick)\n    {\n        tobPanels.get(\"Verzik\").setRoomFinished(tick);\n    }\n\n    public void resetAll()\n    {\n        for(ChartPanel panel : tobPanels.values())\n        {\n            panel.resetGraph();\n        }\n    }\n\n    public void redrawAll()\n    {\n        for(ChartPanel panel : tobPanels.values())\n        {\n            panel.redraw();\n        }\n    }\n\n    public void setPlayers(ArrayList\u003cString\u003e players)\n    {\n        ArrayList\u003cString\u003e cleanedPlayers \u003d new ArrayList\u003c\u003e();\n        for (String s : players)\n        {\n            cleanedPlayers.add(s.replaceAll(String.valueOf((char) 160), String.valueOf((char) 32)));\n        }\n        for(ChartPanel panel : tobPanels.values())\n        {\n            panel.setPlayers(cleanedPlayers);\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\charts\\LiveChart.java"},{"fileName":"ComparisonViewFrame.java","content":"package com.advancedraidtracker.ui.comparisonview;\n\nimport com.advancedraidtracker.SimpleTOBData;\nimport com.advancedraidtracker.AdvancedRaidTrackerConfig;\nimport com.advancedraidtracker.ui.BaseFrame;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.game.ItemManager;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.util.ArrayList;\nimport java.util.Map;\n\n@Slf4j\npublic class ComparisonViewFrame extends BaseFrame\n{\n    public ComparisonViewFrame(ArrayList\u003cArrayList\u003cSimpleTOBData\u003e\u003e data, ArrayList\u003cString\u003e labels)\n    {\n        add(new ComparisonViewPanel(data, labels, config, itemManager, clientThread, configManager));\n        pack();\n    }\n\n    private AdvancedRaidTrackerConfig config;\n    private ItemManager itemManager;\n    private ClientThread clientThread;\n    private ConfigManager configManager;\n\n    public ComparisonViewFrame(Map\u003cInteger, ArrayList\u003cArrayList\u003cSimpleTOBData\u003e\u003e\u003e dataSets, ArrayList\u003cArrayList\u003cString\u003e\u003e labelSets, AdvancedRaidTrackerConfig config, ItemManager itemManager, ClientThread clientThread, ConfigManager configManager)\n    {\n        this.configManager \u003d configManager;\n        this.clientThread \u003d clientThread;\n        this.itemManager \u003d itemManager;\n        this.config \u003d config;\n        JTabbedPane pane \u003d new JTabbedPane();\n        pane.setBackground(Color.BLACK);\n        pane.setOpaque(true);\n        int index \u003d 0;\n        for (Integer i : dataSets.keySet())\n        {\n            String tabName \u003d \"\";\n            if (i \u003d\u003d 1)\n                tabName \u003d \"Solo\";\n            if (i \u003d\u003d 2)\n                tabName \u003d \"Duo\";\n            if (i \u003d\u003d 3)\n                tabName \u003d \"Trio\";\n            if (i \u003d\u003d 4)\n                tabName \u003d \"4-Man\";\n            if (i \u003d\u003d 5)\n                tabName \u003d \"5-Man\";\n            pane.addTab(tabName, new ComparisonViewPanel(dataSets.get(i), labelSets.get(index), config, itemManager, clientThread, configManager));\n            index++;\n        }\n        add(pane);\n        pack();\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\comparisonview\\ComparisonViewFrame.java"},{"fileName":"ComparisonViewPanel.java","content":"package com.advancedraidtracker.ui.comparisonview;\n\nimport com.advancedraidtracker.SimpleTOBData;\nimport com.advancedraidtracker.AdvancedRaidTrackerConfig;\nimport com.advancedraidtracker.ui.comparisonview.graph.GraphPanel;\nimport com.advancedraidtracker.utility.RoomUtil;\nimport com.advancedraidtracker.utility.datautility.DataPoint;\nimport com.advancedraidtracker.utility.StatisticGatherer;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.game.ItemManager;\n\nimport javax.swing.*;\nimport javax.swing.border.MatteBorder;\nimport java.awt.*;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.util.*;\n\n@Slf4j\npublic class ComparisonViewPanel extends JPanel\n{\n    private final JPanel container;\n    private final JSlider leftCutOff;\n    private final JSlider rightCutOff;\n    private final JSlider threshold;\n\n    private final JTextField leftLabel;\n    private final JTextField rightLabel;\n    private final JTextField thresholdLabel;\n\n    private final JLabel graph1Average;\n    private final JLabel graph1Median;\n    private final JLabel graph1Maximum;\n    private final JLabel graph1Minimum;\n    private final JLabel graph1Mode;\n    private final JPanel otherPanel \u003d new JPanel();\n    private final JLabel graph2Average;\n    private final JLabel graph2Median;\n    private final JLabel graph2Maximum;\n    private final JLabel graph2Minimum;\n    private final JLabel graph2Mode;\n\n    private final JLabel graph1PercentThreshold;\n    private final JLabel graph2PercentThreshold;\n\n    private String panelName \u003d \"Other\";\n    private JPanel otherTopLeft;\n    private JPanel otherTopRight;\n    private JPanel otherBottomLeft;\n    private JPanel otherBottomRight;\n    private final JTabbedPane topGraphTabs;\n    private final JTabbedPane bottomGraphTabs;\n    private final JCheckBox matchYScales;\n\n    private final JCheckBox matchXScales;\n\n    private final JComboBox\u003cString\u003e compareByComboBox;\n    private final JComboBox\u003cString\u003e graphTypeComboBox;\n    private boolean time \u003d false;\n    ArrayList\u003cArrayList\u003cSimpleTOBData\u003e\u003e data;\n\n    JPanel scrollTopPanel;\n    JPanel scrollBottomPanel;\n    JScrollPane scrollTopGraphData;\n    JScrollPane scrollBottomGraphData;\n    ArrayList\u003cGraphPanel\u003e topGraphs;\n    ArrayList\u003cGraphPanel\u003e bottomGraphs;\n    ArrayList\u003cString\u003e labels;\n\n    JSpinner groupSizeSpinner;\n    SpinnerNumberModel spinnerSizeModel;\n    SpinnerNumberModel spinnerOffsetModel;\n    JSpinner groupOffsetSpinner;\n    JLabel leftThresholdLabel;\n    JLabel rightThresholdLabel;\n\n    JCheckBox groupingEnabled;\n\n    private final AdvancedRaidTrackerConfig config;\n    private final ItemManager itemManager;\n    private final ConfigManager configManager;\n\n    private final ClientThread clientThread;\n    public ComparisonViewPanel(ArrayList\u003cArrayList\u003cSimpleTOBData\u003e\u003e raidData, ArrayList\u003cString\u003e names, AdvancedRaidTrackerConfig config, ItemManager itemManager, ClientThread clientThread, ConfigManager configManager)\n    {\n        this.configManager \u003d configManager;\n        this.clientThread \u003d clientThread;\n        this.itemManager \u003d itemManager;\n        this.config \u003d config;\n        leftLabel \u003d new JTextField(\"Min cutoff: \");\n        rightLabel \u003d new JTextField(\"Max cutoff: \");\n        leftThresholdLabel \u003d new JLabel(\"% \u003c\u003d \");\n        rightThresholdLabel \u003d new JLabel(\"% \u003c\u003d \");\n        thresholdLabel \u003d new JTextField(\"Threshold: \");\n        thresholdLabel.setEditable(false);\n        leftLabel.setEditable(false);\n        rightLabel.setEditable(false);\n        leftCutOff \u003d new JSlider();\n        rightCutOff \u003d new JSlider();\n        threshold \u003d new JSlider();\n        topGraphs \u003d new ArrayList\u003c\u003e();\n        bottomGraphs \u003d new ArrayList\u003c\u003e();\n        data \u003d raidData;\n        matchYScales \u003d new JCheckBox(\"Match Y-Axis\", true);\n        matchXScales \u003d new JCheckBox(\"Match X-Axis\", true);\n\n        spinnerSizeModel \u003d new SpinnerNumberModel(1, 1, 100, 1);\n        groupSizeSpinner \u003d new JSpinner(spinnerSizeModel);\n\n        spinnerOffsetModel \u003d new SpinnerNumberModel(0, 0, 0, 1);\n        groupOffsetSpinner \u003d new JSpinner(spinnerOffsetModel);\n\n        groupingEnabled \u003d new JCheckBox(\"Enable Grouping?\");\n        groupingEnabled.setSelected(false);\n        groupOffsetSpinner.setEnabled(false);\n        groupSizeSpinner.setEnabled(false);\n\n        graphTypeComboBox \u003d new JComboBox\u003c\u003e(new String[]{\"Bar Graph\", \"Pie Chart\", \"Line Plot\"});\n\n        graphTypeComboBox.addActionListener(e -\u003e\n        {\n            for (GraphPanel panel : topGraphs)\n            {\n                panel.setGraphType(graphTypeComboBox.getSelectedIndex());\n            }\n            for (GraphPanel panel : bottomGraphs)\n            {\n                panel.setGraphType(graphTypeComboBox.getSelectedIndex());\n            }\n        });\n        groupingEnabled.addActionListener(e -\u003e\n        {\n            for (GraphPanel panel : topGraphs)\n            {\n                panel.setGroupingEnabled(groupingEnabled.isSelected());\n                panel.updateGroupOffset((Integer) groupOffsetSpinner.getValue());\n                panel.updateGroupSize((Integer) groupSizeSpinner.getValue());\n\n            }\n            for (GraphPanel panel : bottomGraphs)\n            {\n                panel.setGroupingEnabled(groupingEnabled.isSelected());\n                panel.updateGroupOffset((Integer) groupOffsetSpinner.getValue());\n                panel.updateGroupSize((Integer) groupSizeSpinner.getValue());\n\n\n            }\n            groupSizeSpinner.setEnabled(groupingEnabled.isSelected());\n            groupOffsetSpinner.setEnabled(groupingEnabled.isSelected());\n\n        });\n\n        groupSizeSpinner.addChangeListener(e -\u003e\n        {\n            for (GraphPanel panel : topGraphs)\n            {\n                panel.updateGroupSize((int) groupSizeSpinner.getValue());\n            }\n            for (GraphPanel panel : bottomGraphs)\n            {\n                panel.updateGroupSize((int) groupSizeSpinner.getValue());\n            }\n            spinnerOffsetModel.setMaximum((int) groupSizeSpinner.getValue() - 1);\n        });\n\n        groupOffsetSpinner.addChangeListener(e -\u003e\n        {\n            for (GraphPanel panel : topGraphs)\n            {\n                panel.updateGroupOffset((int) groupOffsetSpinner.getValue());\n            }\n            for (GraphPanel panel : bottomGraphs)\n            {\n                panel.updateGroupOffset((int) groupOffsetSpinner.getValue());\n            }\n            spinnerSizeModel.setMinimum((int) groupOffsetSpinner.getValue() + 1);\n        });\n\n\n        labels \u003d names;\n\n        scrollTopPanel \u003d new JPanel();\n        scrollBottomPanel \u003d new JPanel();\n\n        scrollBottomGraphData \u003d new JScrollPane(scrollBottomPanel);\n        scrollTopGraphData \u003d new JScrollPane(scrollTopPanel);\n\n        graph1Average \u003d new JLabel(\"\", SwingConstants.RIGHT);\n        graph1Median \u003d new JLabel(\"\", SwingConstants.RIGHT);\n        graph1Mode \u003d new JLabel(\"\", SwingConstants.RIGHT);\n        graph1Maximum \u003d new JLabel(\"\", SwingConstants.RIGHT);\n        graph1Minimum \u003d new JLabel(\"\", SwingConstants.RIGHT);\n        graph1PercentThreshold \u003d new JLabel(\"\", SwingConstants.RIGHT);\n\n        graph2Average \u003d new JLabel(\"\", SwingConstants.RIGHT);\n        graph2Median \u003d new JLabel(\"\", SwingConstants.RIGHT);\n        graph2Mode \u003d new JLabel(\"\", SwingConstants.RIGHT);\n        graph2Maximum \u003d new JLabel(\"\", SwingConstants.RIGHT);\n        graph2Minimum \u003d new JLabel(\"\", SwingConstants.RIGHT);\n        graph2PercentThreshold \u003d new JLabel(\"\", SwingConstants.RIGHT);\n\n        topGraphTabs \u003d new JTabbedPane();\n        topGraphTabs.setTabLayoutPolicy(JTabbedPane.SCROLL_TAB_LAYOUT);\n        topGraphTabs.addChangeListener(cl -\u003e\n        {\n            switchGraphData();\n            updateOtherPanels();\n        });\n        bottomGraphTabs \u003d new JTabbedPane();\n        bottomGraphTabs.setTabLayoutPolicy(JTabbedPane.SCROLL_TAB_LAYOUT);\n        bottomGraphTabs.addChangeListener(cl -\u003e\n        {\n            switchGraphData();\n            updateOtherPanels();\n        });\n\n        Map\u003cString, String[]\u003e comboPopupData \u003d new LinkedHashMap\u003c\u003e();\n        comboPopupData.put(\"Room Times\", DataPoint.getRoomTimes());\n        comboPopupData.put(\"Maiden\", DataPoint.getMaidenNames());\n        comboPopupData.put(\"Bloat\", DataPoint.getBloatNames());\n        comboPopupData.put(\"Nylocas\", DataPoint.getNyloNames());\n        comboPopupData.put(\"Sotetseg\", DataPoint.getSoteNames());\n        comboPopupData.put(\"Xarpus\", DataPoint.getXarpNames());\n        comboPopupData.put(\"Verzik\", DataPoint.getVerzikNames());\n        comboPopupData.put(\"Any\", DataPoint.getAnyRoomNames());\n\n        comboPopupMenu \u003d new JPopupMenu();\n        comboPopupMenu.setBorder(new MatteBorder(1, 1, 1, 1, Color.DARK_GRAY));\n\n        ArrayList\u003cString\u003e allComboValues \u003d new ArrayList\u003c\u003e(comboPopupData.keySet());\n\n        comboStrictData \u003d new ArrayList\u003c\u003e();\n\n        for (String category : allComboValues)\n        {\n            JMenu menu \u003d new JMenu(category);\n            menu.setBackground(Color.BLACK);\n            menu.setOpaque(true);\n            if (!category.equals(\"Room Times\") \u0026\u0026 !category.equals(\"Any\"))\n            {\n                JMenu timeMenu \u003d new JMenu(\"Time\");\n                timeMenu.setBackground(Color.BLACK);\n                timeMenu.setOpaque(true);\n                for (String itemName : DataPoint.filterTimes(comboPopupData.get(category)))\n                {\n                    timeMenu.add(createMenuItem(itemName));\n                    comboStrictData.add(itemName);\n                }\n                JMenu countMenu \u003d new JMenu(\"Misc\");\n                countMenu.setBackground(Color.BLACK);\n                countMenu.setOpaque(true);\n                for (String itemName : DataPoint.filterInt(comboPopupData.get(category)))\n                {\n                    countMenu.add(createMenuItem(itemName));\n                    comboStrictData.add(itemName);\n                }\n                JMenu thrallMenu \u003d new JMenu(\"Thrall\");\n                thrallMenu.setBackground(Color.BLACK);\n                thrallMenu.setOpaque(true);\n                for (String itemName : DataPoint.filterThrall(comboPopupData.get(category)))\n                {\n                    thrallMenu.add(createMenuItem(itemName));\n                    comboStrictData.add(itemName);\n                }\n                JMenu vengMenu \u003d new JMenu(\"Veng\");\n                vengMenu.setBackground(Color.BLACK);\n                vengMenu.setOpaque(true);\n                for (String itemName : DataPoint.filterVeng(comboPopupData.get(category)))\n                {\n                    vengMenu.add(createMenuItem(itemName));\n                    comboStrictData.add(itemName);\n                }\n\n                JMenu specMenu \u003d new JMenu(\"Spec\");\n                specMenu.setBackground(Color.BLACK);\n                specMenu.setOpaque(true);\n                for (String itemName : DataPoint.filterSpecs(comboPopupData.get(category)))\n                {\n                    specMenu.add(createMenuItem(itemName));\n                    comboStrictData.add(itemName);\n                }\n\n                menu.add(timeMenu);\n                menu.add(countMenu);\n                menu.add(thrallMenu);\n                menu.add(vengMenu);\n                menu.add(specMenu);\n            } else\n            {\n                for (String itemName : comboPopupData.get(category))\n                {\n                    menu.add(createMenuItem(itemName));\n                    comboStrictData.add(itemName);\n                }\n            }\n            comboPopupMenu.add(menu);\n        }\n        compareByComboBox \u003d new JComboBox\u003c\u003e();\n        compareByComboBox.setEditable(true);\n        compareByComboBox.setPrototypeDisplayValue(\"Maiden Time\");\n        compareByComboBox.setSelectedItem(\"Maiden Time\");\n        compareByComboBox.setEditable(false);\n        for (Component comp : compareByComboBox.getComponents())\n        {\n            if (comp instanceof AbstractButton)\n            {\n                arrowButton \u003d (AbstractButton) comp;\n                arrowButton.setBackground(Color.BLACK);\n            }\n        }\n\n        arrowButton.addActionListener(e -\u003e setPopupVisible(!comboPopupMenu.isVisible()));\n\n        compareByComboBox.addMouseListener(new MouseAdapter()\n        {\n            @Override\n            public void mouseClicked(MouseEvent e)\n            {\n                setPopupVisible(!comboPopupMenu.isVisible());\n            }\n        });\n\n        compareByComboBox.addActionListener(al -\u003e\n        {\n            switchGraphData();\n            updateOtherPanels();\n        });\n\n        matchYScales.addActionListener(al -\u003e\n                switchGraphData());\n\n        matchXScales.addActionListener(al -\u003e\n        {\n            switchGraphData();\n            leftCutOff.setEnabled(matchXScales.isSelected());\n            rightCutOff.setEnabled(matchXScales.isSelected());\n        });\n\n        container \u003d new JPanel();\n        container.setPreferredSize(new Dimension(1000, 730));\n        container.setLayout(new BoxLayout(container, BoxLayout.X_AXIS));\n\n        buildUI();\n        add(container);\n    }\n\n    private int valX \u003d 0;\n\n    private final JPopupMenu comboPopupMenu;\n    private final ArrayList\u003cString\u003e comboStrictData;\n    private AbstractButton arrowButton;\n\n    private void setComboSelection(String name)\n    {\n        Vector\u003cString\u003e items \u003d new Vector\u003c\u003e();\n\n        addComboItems(name, items, comboStrictData, compareByComboBox);\n    }\n\n    public static void addComboItems(String name, Vector\u003cString\u003e items, ArrayList\u003cString\u003e comboStrictData, JComboBox\u003cString\u003e compareByComboBox)\n    {\n        for (String item : comboStrictData)\n        {\n            if (item.endsWith(name))\n            {\n                items.add(item);\n                break;\n            }\n        }\n\n        compareByComboBox.setModel(new DefaultComboBoxModel\u003c\u003e(items));\n\n        if (items.size() \u003d\u003d 1)\n        {\n            compareByComboBox.setSelectedIndex(0);\n        }\n    }\n\n    private JMenuItem createMenuItem(final String name)\n    {\n        JMenuItem item \u003d new JMenuItem(name);\n        item.setBackground(Color.BLACK);\n        item.setOpaque(true);\n\n        item.addActionListener(event -\u003e setComboSelection(name));\n        return item;\n    }\n\n    private void setPopupVisible(boolean visible)\n    {\n        if (visible)\n        {\n            comboPopupMenu.show(compareByComboBox, 0, compareByComboBox.getSize().height);\n        } else\n        {\n            comboPopupMenu.setVisible(false);\n        }\n    }\n\n    private void switchGraphData()\n    {\n        if (topGraphs.size() !\u003d bottomGraphs.size())\n        {\n            return;\n        }\n        int xHigh \u003d 0;\n        int xLow \u003d Integer.MAX_VALUE;\n        int yHigh \u003d 0;\n        if (!Objects.requireNonNull(compareByComboBox.getSelectedItem()).toString().contains(\"Player:\"))\n        {\n            time \u003d Objects.requireNonNull(DataPoint.getValue(Objects.requireNonNull(compareByComboBox.getSelectedItem()).toString())).type \u003d\u003d DataPoint.types.TIME;\n        } else\n        {\n            time \u003d false;\n        }\n\n        for (int i \u003d 0; i \u003c topGraphs.size(); i++)\n        {\n            topGraphs.get(i).switchKey(Objects.requireNonNull(DataPoint.getValue(Objects.requireNonNull(compareByComboBox.getSelectedItem()).toString())));\n            bottomGraphs.get(i).switchKey(Objects.requireNonNull(DataPoint.getValue(Objects.requireNonNull(compareByComboBox.getSelectedItem()).toString())));\n\n            topGraphs.get(i).generateScales();\n            bottomGraphs.get(i).generateScales();\n\n            xHigh \u003d Math.max(xHigh, topGraphs.get(i).getScaleXHigh());\n            xHigh \u003d Math.max(xHigh, bottomGraphs.get(i).getScaleXHigh());\n\n            yHigh \u003d Math.max(yHigh, topGraphs.get(i).getScaleYHigh());\n            yHigh \u003d Math.max(yHigh, bottomGraphs.get(i).getScaleYHigh());\n\n            xLow \u003d Math.min(xLow, topGraphs.get(i).getScaleXLow());\n            xLow \u003d Math.min(xLow, bottomGraphs.get(i).getScaleXLow());\n        }\n\n\n        leftCutOff.setMaximum(xHigh);\n        leftCutOff.setMinimum(xLow);\n        rightCutOff.setMaximum(xHigh);\n        rightCutOff.setMinimum(xLow);\n\n        threshold.setMaximum(xHigh);\n        threshold.setMinimum(xLow);\n        threshold.setValue(((xHigh - xLow) / 2) + xLow);\n        setThresholdTimes();\n\n        leftCutOff.setValue(xLow);\n        rightCutOff.setValue(xLow);\n\n        updateSliders();\n        container.repaint();\n        valX \u003d xHigh;\n        if (matchYScales.isSelected())\n        {\n            setYScales(yHigh);\n        }\n        if (matchXScales.isSelected())\n        {\n            setXScales(xLow, xHigh);\n        }\n\n        redrawGraphs();\n\n    }\n\n    private void setThresholdTimes()\n    {\n        thresholdLabel.setText(\"Threshold: \" + ((time) ? RoomUtil.time(threshold.getValue()) : threshold.getValue()));\n        leftThresholdLabel.setText(\"% \u003c\u003d \" + ((time) ? RoomUtil.time(threshold.getValue()) : threshold.getValue()));\n        rightThresholdLabel.setText(\"% \u003c\u003d \" + ((time) ? RoomUtil.time(threshold.getValue()) : threshold.getValue()));\n    }\n\n    private void setXScales(int xLow, int xHigh)\n    {\n        for (int i \u003d 0; i \u003c topGraphs.size(); i++)\n        {\n            topGraphs.get(i).setScales(xLow, xHigh, topGraphs.get(i).getScaleYHigh());\n            bottomGraphs.get(i).setScales(xLow, xHigh, bottomGraphs.get(i).getScaleYHigh());\n        }\n    }\n\n    private void setYScales(int yHigh)\n    {\n        for (int i \u003d 0; i \u003c topGraphs.size(); i++)\n        {\n            topGraphs.get(i).setScales(topGraphs.get(i).getScaleXLow(), topGraphs.get(i).getScaleXHigh(), yHigh);\n            bottomGraphs.get(i).setScales(bottomGraphs.get(i).getScaleXLow(), bottomGraphs.get(i).getScaleXHigh(), yHigh);\n        }\n    }\n\n    private void redrawGraphs(int xLow, int xHigh)\n    {\n        for (int i \u003d 0; i \u003c topGraphs.size(); i++)\n        {\n            topGraphs.get(i).setScales(xLow, xHigh, topGraphs.get(i).getScaleYHigh());\n            bottomGraphs.get(i).setScales(xLow, xHigh, bottomGraphs.get(i).getScaleYHigh());\n            topGraphs.get(i).setBounds();\n            topGraphs.get(i).drawGraph();\n            bottomGraphs.get(i).setBounds();\n            bottomGraphs.get(i).drawGraph();\n        }\n    }\n\n\n    private void redrawGraphs()\n    {\n        for (int i \u003d 0; i \u003c topGraphs.size(); i++)\n        {\n            topGraphs.get(i).setBounds();\n            topGraphs.get(i).drawGraph();\n            bottomGraphs.get(i).setBounds();\n            bottomGraphs.get(i).drawGraph();\n        }\n    }\n\n    private void updateCutoffs()\n    {\n        if (matchXScales.isSelected())\n        {\n            redrawGraphs(leftCutOff.getValue(), rightCutOff.getMaximum() - rightCutOff.getValue() + rightCutOff.getMinimum());\n\n        }\n    }\n\n    private void updateSliders()\n    {\n        int leftExtent \u003d rightCutOff.getValue() - rightCutOff.getMinimum();\n        int rightExtent \u003d leftCutOff.getValue() - leftCutOff.getMinimum();\n        rightCutOff.setExtent(rightExtent);\n        leftCutOff.setExtent(leftExtent);\n\n        //For some unbelievably bizarre reasons extents can only be set for the upper bound so we have to inverse it\n\n        leftLabel.setText(\"Min cutoff: \" + ((time) ? RoomUtil.time(leftCutOff.getValue()) : leftCutOff.getValue()));\n        rightLabel.setText(\"Max cutoff: \" + ((time) ? RoomUtil.time(rightCutOff.getMaximum() - rightCutOff.getValue() + rightCutOff.getMinimum()) : rightCutOff.getMaximum() - rightCutOff.getValue() + rightCutOff.getMinimum()));\n        updateCutoffs();\n    }\n\n    GraphPanel getGraphPanel(ArrayList\u003cSimpleTOBData\u003e points)\n    {\n        return new GraphPanel(points, config, itemManager, clientThread, configManager);\n    }\n\n    private ArrayList\u003cInteger\u003e getArrayForStatistics(ArrayList\u003cSimpleTOBData\u003e data)\n    {\n        ArrayList\u003cInteger\u003e arrayToPass \u003d new ArrayList\u003c\u003e();\n        for (SimpleTOBData raidData : data)\n        {\n            int value \u003d raidData.getValue(DataPoint.getValue(String.valueOf(compareByComboBox.getSelectedItem())));\n            if (value \u003e -1)\n            {\n                if (!time || value !\u003d 0)\n                {\n                    switch ((Objects.requireNonNull(DataPoint.getValue(String.valueOf(compareByComboBox.getSelectedItem())))).room)\n                    {\n                        case MAIDEN:\n                            if (!raidData.maidenStartAccurate || !raidData.maidenEndAccurate)\n                            {\n                                continue;\n                            }\n                            break;\n                        case BLOAT:\n                            if (!raidData.bloatStartAccurate || !raidData.bloatEndAccurate)\n                            {\n                                continue;\n                            }\n                            break;\n                        case NYLOCAS:\n                            if (!raidData.nyloStartAccurate || !raidData.nyloEndAccurate)\n                            {\n                                continue;\n                            }\n                            break;\n                        case SOTETSEG:\n                            if (!raidData.soteStartAccurate || !raidData.soteEndAccurate)\n                            {\n                                continue;\n                            }\n                            break;\n                        case XARPUS:\n                            if (!raidData.xarpStartAccurate || !raidData.xarpEndAccurate)\n                            {\n                                continue;\n                            }\n                            break;\n                        case VERZIK:\n                            if (!raidData.verzikStartAccurate || !raidData.verzikEndAccurate)\n                            {\n                                continue;\n                            }\n                            break;\n                    }\n                    arrayToPass.add(value);\n                }\n            }\n        }\n        return arrayToPass;\n    }\n\n    private String getString(double val)\n    {\n        return (time) ? RoomUtil.time(val) : String.valueOf(Math.round(val * 100.0) / 100.0);\n    }\n\n    private void updateOtherPanels()\n    {\n        panelName \u003d \"Other - \" + compareByComboBox.getSelectedItem();\n        otherPanel.setBorder(BorderFactory.createTitledBorder(panelName));\n        if (topGraphTabs.getSelectedIndex() !\u003d -1 \u0026\u0026 bottomGraphTabs.getSelectedIndex() !\u003d -1 \u0026\u0026 built)\n        {\n            otherTopLeft.setBorder(BorderFactory.createTitledBorder(topGraphTabs.getTitleAt(topGraphTabs.getSelectedIndex())));\n            otherTopRight.setBorder(BorderFactory.createTitledBorder(bottomGraphTabs.getTitleAt(bottomGraphTabs.getSelectedIndex())));\n\n            otherBottomLeft.setBorder(BorderFactory.createTitledBorder(topGraphTabs.getTitleAt(topGraphTabs.getSelectedIndex()) + \" values\"));\n            otherBottomRight.setBorder(BorderFactory.createTitledBorder(bottomGraphTabs.getTitleAt(bottomGraphTabs.getSelectedIndex()) + \" values\"));\n\n            ArrayList\u003cSimpleTOBData\u003e topGraphData \u003d (data.get(topGraphTabs.getSelectedIndex()));\n            ArrayList\u003cSimpleTOBData\u003e bottomGraphData \u003d data.get(bottomGraphTabs.getSelectedIndex());\n\n            String worse \u003d \"\u003chtml\u003e\u003cfont color\u003d\u0027#F63131\u0027\u003e\";\n            String better \u003d \"\u003chtml\u003e\u003cfont color\u003d\u0027#99E622\u0027\u003e\";\n            String even \u003d \"\u003chtml\u003e\u003cfont color\u003d\u0027#CCCCF6\u0027\u003e\";\n\n            double g1a \u003d StatisticGatherer.getGenericAverage(getArrayForStatistics(topGraphData));\n            double g1med \u003d StatisticGatherer.getGenericMedian(getArrayForStatistics(topGraphData));\n            double g1mod \u003d StatisticGatherer.getGenericMode(getArrayForStatistics(topGraphData));\n            double g1max \u003d StatisticGatherer.getGenericMax(getArrayForStatistics(topGraphData));\n            double g1min \u003d StatisticGatherer.getGenericMin(getArrayForStatistics(topGraphData));\n            double g1percent \u003d StatisticGatherer.getGenericPercent(getArrayForStatistics(topGraphData), threshold.getValue());\n\n            double g2a \u003d StatisticGatherer.getGenericAverage(getArrayForStatistics(bottomGraphData));\n            double g2med \u003d StatisticGatherer.getGenericMedian(getArrayForStatistics(bottomGraphData));\n            double g2mod \u003d StatisticGatherer.getGenericMode(getArrayForStatistics(bottomGraphData));\n            double g2max \u003d StatisticGatherer.getGenericMax(getArrayForStatistics(bottomGraphData));\n            double g2min \u003d StatisticGatherer.getGenericMin(getArrayForStatistics(bottomGraphData));\n            double g2percent \u003d StatisticGatherer.getGenericPercent(getArrayForStatistics(bottomGraphData), threshold.getValue());\n\n            String g1as \u003d (g1a \u003c g2a) ? better : g2a \u003d\u003d g1a ? even : worse;\n            String g1meds \u003d (g1med \u003c g2med) ? better : g2med \u003d\u003d g1med ? even : worse;\n            String g1mods \u003d (g1mod \u003c g2mod) ? better : g2mod \u003d\u003d g1mod ? even : worse;\n            String g1maxs \u003d (g1max \u003c g2max) ? better : g2max \u003d\u003d g1max ? even : worse;\n            String g1mins \u003d (g1min \u003c g2min) ? better : g2min \u003d\u003d g1min ? even : worse;\n            String g1perc \u003d (g1percent \u003e g2percent) ? better : g1percent \u003d\u003d g2percent ? even : worse;\n\n            String g2as \u003d (g1a \u003e g2a) ? better : g2a \u003d\u003d g1a ? even : worse;\n            String g2meds \u003d (g1med \u003e g2med) ? better : g2med \u003d\u003d g1med ? even : worse;\n            String g2mods \u003d (g1mod \u003e g2mod) ? better : g2mod \u003d\u003d g1mod ? even : worse;\n            String g2maxs \u003d (g1max \u003e g2max) ? better : g2max \u003d\u003d g1max ? even : worse;\n            String g2mins \u003d (g1min \u003e g2min) ? better : g2min \u003d\u003d g1min ? even : worse;\n            String g2perc \u003d (g2percent \u003e g1percent) ? better : g1percent \u003d\u003d g2percent ? even : worse;\n\n\n            graph1Average.setText(g1as + getString(g1a));\n            graph1Median.setText(g1meds + getString(g1med));\n            graph1Mode.setText(g1mods + getString(g1mod));\n            graph1Maximum.setText(g1maxs + getString(g1max));\n            graph1Minimum.setText(g1mins + getString(g1min));\n            graph1PercentThreshold.setText(g1perc + (g1percent) + \"%\");\n\n            graph2Average.setText(g2as + getString(g2a));\n            graph2Median.setText(g2meds + getString(g2med));\n            graph2Mode.setText(g2mods + getString(g2mod));\n            graph2Maximum.setText(g2maxs + getString(g2max));\n            graph2Minimum.setText(g2mins + getString(g2min));\n            graph2PercentThreshold.setText(g2perc + (g2percent) + \"%\");\n\n\n            ArrayList\u003cInteger\u003e topSet \u003d GraphPanel.getCounts(getArrayForStatistics(topGraphData), valX);\n            ArrayList\u003cInteger\u003e bottomSet \u003d GraphPanel.getCounts(getArrayForStatistics(bottomGraphData), valX);\n\n            scrollTopPanel.removeAll();\n            scrollBottomPanel.removeAll();\n\n            scrollTopPanel.add(new JLabel(\"Value\", SwingConstants.LEFT));\n            scrollTopPanel.add(new JLabel(\"Count\", SwingConstants.RIGHT));\n\n            int total \u003d GraphPanel.getCountedTotal(topSet);\n            int count \u003d 0;\n            count \u003d getCount(topSet, total, count, scrollTopPanel);\n\n            int altCount \u003d 0;\n            for (int i \u003d count; i \u003c 16; i++)\n            {\n                scrollTopPanel.add(new JLabel());\n                scrollTopPanel.add(new JLabel());\n                altCount++;\n            }\n            scrollTopPanel.setLayout(new GridLayout(count + 1 + altCount, 2));\n            count \u003d 0;\n\n            scrollBottomPanel.add(new JLabel(\"Value\", SwingConstants.LEFT));\n            scrollBottomPanel.add(new JLabel(\"Count\", SwingConstants.RIGHT));\n\n            total \u003d GraphPanel.getCountedTotal(bottomSet);\n\n            count \u003d getCount(bottomSet, total, count, scrollBottomPanel);\n            altCount \u003d 0;\n            for (int i \u003d count; i \u003c 16; i++)\n            {\n                scrollBottomPanel.add(new JLabel());\n                scrollBottomPanel.add(new JLabel());\n                altCount++;\n            }\n            scrollBottomPanel.setLayout(new GridLayout(count + 1 + altCount, 2));\n\n            scrollTopPanel.validate();\n            scrollBottomPanel.validate();\n        }\n        container.repaint();\n    }\n\n    private int getCount(ArrayList\u003cInteger\u003e topSet, double total, int count, JPanel scrollTopPanel)\n    {\n        for (int i \u003d 0; i \u003c topSet.size(); i++)\n        {\n            if (topSet.get(i) \u003e 0)\n            {\n                String percent \u003d Math.round((100.0 * topSet.get(i) / total) * 100.0) / 100.0 + \"%\";\n                scrollTopPanel.add(new JLabel(getString(i), SwingConstants.LEFT));\n                scrollTopPanel.add(new JLabel(topSet.get(i) + \" (\" + percent + \")\", SwingConstants.RIGHT));\n                count++;\n            }\n        }\n        return count;\n    }\n\n    private boolean built \u003d false;\n\n    private void buildUI()\n    {\n        for (int i \u003d 0; i \u003c data.size(); i++)\n        {\n            GraphPanel topGraph \u003d getGraphPanel(data.get(i));\n            GraphPanel bottomGraph \u003d getGraphPanel(data.get(i));\n            topGraphTabs.addTab(labels.get(i), topGraph);\n            bottomGraphTabs.addTab(labels.get(i), bottomGraph);\n            topGraphs.add(topGraph);\n            bottomGraphs.add(bottomGraph);\n        }\n        switchGraphData();\n\n        JPanel leftContainer \u003d new JPanel();\n        leftContainer.setLayout(new BoxLayout(leftContainer, BoxLayout.Y_AXIS));\n\n        leftContainer.add(topGraphTabs);\n        leftContainer.add(bottomGraphTabs);\n\n        container.add(leftContainer);\n\n        JPanel sidebar \u003d new JPanel();\n        sidebar.setPreferredSize(new Dimension(390, 730));\n\n        JPanel graphOptionsPanel \u003d new JPanel();\n        graphOptionsPanel.setBorder(BorderFactory.createTitledBorder(\"Graph Options\"));\n        graphOptionsPanel.setPreferredSize(new Dimension(210, 215));\n\n        threshold.setPaintLabels(true);\n        threshold.setPaintTicks(true);\n        threshold.setPaintTrack(true);\n        threshold.addChangeListener(cl -\u003e\n        {\n            Object source \u003d cl.getSource();\n            if (source instanceof JSlider)\n            {\n                if (((JSlider) source).getValueIsAdjusting())\n                {\n                    setThresholdTimes();\n                    updateOtherPanels();\n                }\n            }\n        });\n        threshold.setPreferredSize(new Dimension(180, threshold.getPreferredSize().height));\n        leftCutOff.setPaintLabels(true);\n        leftCutOff.setPaintTicks(true);\n        leftCutOff.setPaintTrack(true);\n\n        leftCutOff.addChangeListener(cl -\u003e\n        {\n            Object source \u003d cl.getSource();\n            if (source instanceof JSlider)\n            {\n                if (((JSlider) source).getValueIsAdjusting())\n                {\n                    updateSliders();\n                }\n            }\n        });\n\n        rightCutOff.addChangeListener(cl -\u003e\n        {\n            Object source \u003d cl.getSource();\n            if (source instanceof JSlider)\n            {\n                if (((JSlider) source).getValueIsAdjusting())\n                {\n                    updateSliders();\n                }\n            }\n        });\n\n        leftCutOff.setPreferredSize(new Dimension(180, leftCutOff.getPreferredSize().height));\n\n\n        rightCutOff.setPaintTrack(true);\n        rightCutOff.setPaintTicks(true);\n        rightCutOff.setPaintLabels(true);\n\n        rightCutOff.setInverted(true);\n\n        rightCutOff.setPreferredSize(new Dimension(180, rightCutOff.getPreferredSize().height));\n\n\n        graphOptionsPanel.add(leftCutOff);\n        graphOptionsPanel.add(leftLabel);\n        graphOptionsPanel.add(rightCutOff);\n        graphOptionsPanel.add(rightLabel);\n        graphOptionsPanel.add(matchXScales);\n        graphOptionsPanel.add(matchYScales);\n\n        graphOptionsPanel.add(new JLabel(\"\"));\n\n        graphOptionsPanel.add(groupingEnabled);\n        graphOptionsPanel.add(new JLabel(\"Group Size: \"));\n        graphOptionsPanel.add(groupSizeSpinner);\n        graphOptionsPanel.add(new JLabel(\"Group Offset: \"));\n        graphOptionsPanel.add(groupOffsetSpinner);\n\n        graphOptionsPanel.add(new JCheckBox(\"Show Chronological\"));\n        graphOptionsPanel.add(new JCheckBox(\"Rotate 90\"));\n\n        graphOptionsPanel.add(graphTypeComboBox);\n\n        graphOptionsPanel.add(threshold);\n        thresholdLabel.setPreferredSize(new Dimension(140, thresholdLabel.getPreferredSize().height));\n        graphOptionsPanel.add(thresholdLabel);\n\n        JPanel compareByPanel \u003d new JPanel();\n        compareByPanel.setBorder(BorderFactory.createTitledBorder(\"Compare by\"));\n        compareByPanel.setPreferredSize(new Dimension(190, 60));\n        compareByPanel.add(compareByComboBox);\n\n\n        otherPanel.setBorder(BorderFactory.createTitledBorder(panelName));\n        otherPanel.setPreferredSize(new Dimension(190, 455));\n        otherPanel.setLayout(new BoxLayout(otherPanel, BoxLayout.Y_AXIS));\n\n\n        JPanel otherTop \u003d new JPanel();\n        otherTop.setLayout(new BoxLayout(otherTop, BoxLayout.X_AXIS));\n\n        JPanel otherBottom \u003d new JPanel();\n        otherBottom.setLayout(new BoxLayout(otherBottom, BoxLayout.X_AXIS));\n\n        otherTopLeft \u003d new JPanel();\n        otherTopLeft.setBorder(BorderFactory.createTitledBorder(\"Set 0\"));\n        otherTopLeft.setPreferredSize(new Dimension(100, 125));\n\n        otherTopRight \u003d new JPanel();\n        otherTopRight.setBorder(BorderFactory.createTitledBorder(\"Set 1\"));\n        otherTopRight.setPreferredSize(new Dimension(100, 125));\n\n        otherTop.add(otherTopLeft);\n        otherTop.add(otherTopRight);\n\n        otherBottomLeft \u003d new JPanel();\n        otherBottomLeft.setBorder(BorderFactory.createTitledBorder(\"Values\"));\n\n        otherTopLeft.setLayout(new GridLayout(6, 2));\n        otherTopRight.setLayout(new GridLayout(6, 2));\n\n\n        otherTopLeft.add(new JLabel(\"Average \", SwingConstants.LEFT));\n        otherTopLeft.add(graph1Average);\n        otherTopLeft.add(new JLabel(\"Median \", SwingConstants.LEFT));\n        otherTopLeft.add(graph1Median);\n        otherTopLeft.add(new JLabel(\"Mode \", SwingConstants.LEFT));\n        otherTopLeft.add(graph1Mode);\n        otherTopLeft.add(new JLabel(\"Maximum \", SwingConstants.LEFT));\n        otherTopLeft.add(graph1Maximum);\n        otherTopLeft.add(new JLabel(\"Minimum \", SwingConstants.LEFT));\n        otherTopLeft.add(graph1Minimum);\n        otherTopLeft.add(leftThresholdLabel);\n        otherTopLeft.add(graph1PercentThreshold);\n\n        otherTopRight.add(new JLabel(\"Average \", SwingConstants.LEFT));\n        otherTopRight.add(graph2Average);\n        otherTopRight.add(new JLabel(\"Median \", SwingConstants.LEFT));\n        otherTopRight.add(graph2Median);\n        otherTopRight.add(new JLabel(\"Mode \", SwingConstants.LEFT));\n        otherTopRight.add(graph2Mode);\n        otherTopRight.add(new JLabel(\"Maximum \", SwingConstants.LEFT));\n        otherTopRight.add(graph2Maximum);\n        otherTopRight.add(new JLabel(\"Minimum \", SwingConstants.LEFT));\n        otherTopRight.add(graph2Minimum);\n        otherTopRight.add(rightThresholdLabel);\n        otherTopRight.add(graph2PercentThreshold);\n\n        otherBottomRight \u003d new JPanel();\n        otherBottomRight.setBorder(BorderFactory.createTitledBorder(\"Values\"));\n\n        scrollTopGraphData.setPreferredSize(new Dimension(150, 250));\n        scrollBottomGraphData.setPreferredSize(new Dimension(150, 250));\n\n        scrollTopGraphData.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);\n        scrollBottomGraphData.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);\n\n        otherBottomLeft.add(scrollTopGraphData);\n        otherBottomRight.add(scrollBottomGraphData);\n\n\n        otherBottom.add(otherBottomLeft);\n        otherBottom.add(otherBottomRight);\n\n        scrollTopPanel.validate();\n        scrollBottomPanel.validate();\n\n\n        otherPanel.add(otherTop);\n        otherPanel.add(otherBottom);\n\n        sidebar.setLayout(new BoxLayout(sidebar, BoxLayout.Y_AXIS));\n\n        sidebar.add(compareByPanel);\n        sidebar.add(graphOptionsPanel);\n        sidebar.add(otherPanel);\n\n        built \u003d true;\n        updateOtherPanels();\n\n        container.add(sidebar);\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\comparisonview\\ComparisonViewPanel.java"},{"fileName":"Bounds.java","content":"package com.advancedraidtracker.ui.comparisonview.graph;\n\nimport com.advancedraidtracker.SimpleTOBData;\nimport lombok.Getter;\n\nimport java.util.ArrayList;\n\npublic class Bounds\n{\n    @Getter\n    private int left;\n    @Getter\n    private int right;\n    @Getter\n    private int bottom;\n    @Getter\n    private int top;\n\n    public ArrayList\u003cSimpleTOBData\u003e raids;\n\n    public Bounds(int l, int r, int b, int t, ArrayList\u003cSimpleTOBData\u003e raids)\n    {\n        this.raids \u003d raids;\n        left \u003d l;\n        right \u003d r;\n        bottom \u003d b;\n        top \u003d t;\n    }\n\n    public void reset()\n    {\n        left \u003d -1;\n        bottom \u003d -1;\n        top \u003d -1;\n        right \u003d -1;\n    }\n\n    public boolean matches(Bounds match)\n    {\n        return (match.getLeft() \u003d\u003d left \u0026\u0026 match.getRight() \u003d\u003d right \u0026\u0026 match.getTop() \u003d\u003d top \u0026\u0026 match.getBottom() \u003d\u003d bottom);\n    }\n\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\comparisonview\\graph\\Bounds.java"},{"fileName":"GraphInternalBoundMatchedContainer.java","content":"package com.advancedraidtracker.ui.comparisonview.graph;\n\nimport com.advancedraidtracker.SimpleTOBData;\n\nimport java.util.ArrayList;\n\npublic class GraphInternalBoundMatchedContainer\n{\n    public ArrayList\u003cArrayList\u003cSimpleTOBData\u003e\u003e fullData;\n    public ArrayList\u003cInteger\u003e intData;\n\n    public GraphInternalBoundMatchedContainer(ArrayList\u003cArrayList\u003cSimpleTOBData\u003e\u003e fullData, ArrayList\u003cInteger\u003e intData)\n    {\n        this.fullData \u003d fullData;\n        this.intData \u003d intData;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\comparisonview\\graph\\GraphInternalBoundMatchedContainer.java"},{"fileName":"GraphInternalDataContainer.java","content":"package com.advancedraidtracker.ui.comparisonview.graph;\n\nimport com.advancedraidtracker.SimpleTOBData;\n\nimport java.util.ArrayList;\n\npublic class GraphInternalDataContainer\n{\n    public ArrayList\u003cSimpleTOBData\u003e fullData;\n    public ArrayList\u003cInteger\u003e intData;\n\n    public GraphInternalDataContainer(ArrayList\u003cSimpleTOBData\u003e fullData, ArrayList\u003cInteger\u003e intData)\n    {\n        this.fullData \u003d fullData;\n        this.intData \u003d intData;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\comparisonview\\graph\\GraphInternalDataContainer.java"},{"fileName":"GraphPanel.java","content":"package com.advancedraidtracker.ui.comparisonview.graph;\n\nimport com.advancedraidtracker.SimpleTOBData;\nimport com.advancedraidtracker.AdvancedRaidTrackerConfig;\nimport com.advancedraidtracker.utility.RoomUtil;\nimport com.advancedraidtracker.utility.datautility.DataPoint;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.game.ItemManager;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.*;\nimport java.awt.geom.AffineTransform;\nimport java.awt.image.BufferedImage;\nimport java.util.ArrayList;\nimport java.util.Objects;\n\n@Slf4j\npublic class GraphPanel extends JPanel implements MouseMotionListener, MouseListener, KeyListener\n{\n    public static final int IMG_WIDTH \u003d 600;\n    public static final int IMG_HEIGHT \u003d 300;\n    public static final int GRAPH_WIDTH \u003d 500;\n    public static final int GRAPH_HEIGHT \u003d 250;\n    public static final int GRAPH_XS \u003d 50;\n    public static final int GRAPH_XE \u003d 550;\n    public static final int GRAPH_YS \u003d 25;\n    public static final int GRAPH_YE \u003d 225;\n\n    private final Color[] pieChartColors \u003d {\n            Color.decode(\"#ebdc78\"),\n            Color.decode(\"#8be04e\"),\n            Color.decode(\"#5ad45a\"),\n            Color.decode(\"#00b7c7\"),\n            Color.decode(\"#0d88e6\"),\n            Color.decode(\"#1a53ff\"),\n            Color.decode(\"#4421af\"),\n            Color.decode(\"#7c1158\"),\n            Color.decode(\"#b30000\"),\n    };\n\n    private final Color gridColor \u003d new Color(110, 110, 110);\n    private ToolTipData activeToolTip;\n    private boolean shouldDrawToolTip \u003d false;\n\n    private boolean groupingEnabled \u003d true;\n\n    private int graphType;\n    private final ArrayList\u003cBounds\u003e selectedBounds;\n    private Bounds activeBound \u003d new Bounds(-1, -1, -1, -1, null);\n    private final ArrayList\u003cBounds\u003e bounds;\n    private final Color gradientStart;\n    private final Color gradientEnd;\n    private final Color gradientStartHighlighted;\n    private final Color gradientEndHighlighted;\n    private final Color gradientStartSelected;\n    private final Color gradientEndSelected;\n    private final Color gradientStartSelectedAndHighlighted;\n    private final Color gradientEndSelectedAndHighlighted;\n    private DataPoint activeKey;\n    private boolean time \u003d false;\n    private final BufferedImage img \u003d new BufferedImage(IMG_WIDTH, IMG_HEIGHT, BufferedImage.TYPE_INT_ARGB);\n    private final ArrayList\u003cSimpleTOBData\u003e internalData;\n    private final AdvancedRaidTrackerConfig config;\n\n    private final ItemManager itemManager;\n\n    private final ClientThread clientThread;\n    private final ConfigManager configManager;\n    public GraphPanel(ArrayList\u003cSimpleTOBData\u003e data, AdvancedRaidTrackerConfig config, ItemManager itemManager, ClientThread clientThread, ConfigManager configManager)\n    {\n        this.configManager \u003d configManager;\n        this.clientThread \u003d clientThread;\n        this.itemManager \u003d itemManager;\n        selectedBounds \u003d new ArrayList\u003c\u003e();\n        gradientStart \u003d new Color(100, 170, 230, 90);\n        gradientEnd \u003d new Color(200, 240, 255, 90);\n\n        gradientStartHighlighted \u003d new Color(100, 170, 230, 215);\n        gradientEndHighlighted \u003d new Color(200, 240, 255, 215);\n\n        gradientStartSelected \u003d new Color(100, 170, 230, 190);\n        gradientEndSelected \u003d new Color(200, 240, 255, 190);\n\n        gradientStartSelectedAndHighlighted \u003d new Color(100, 170, 230, 240);\n        gradientEndSelectedAndHighlighted \u003d new Color(200, 240, 255, 240);\n        graphType \u003d 0;\n        internalData \u003d data;\n        drawBlankBarGraph();\n        addMouseMotionListener(this);\n        addMouseListener(this);\n        addKeyListener(this);\n        this.config \u003d config;\n        bounds \u003d new ArrayList\u003c\u003e();\n    }\n\n    @Override\n    protected void paintComponent(Graphics g)\n    {\n        super.paintComponent(g);\n        if (img !\u003d null)\n        {\n            g.drawImage(img, 0, 0, null);\n        }\n    }\n\n    @Override\n    public Dimension getPreferredSize()\n    {\n        return new Dimension(IMG_WIDTH, IMG_HEIGHT);\n    }\n\n\n    public void switchKey(DataPoint key)\n    {\n        time \u003d key.type \u003d\u003d DataPoint.types.TIME;\n        activeKey \u003d key;\n    }\n\n\n    private ArrayList\u003cInteger\u003e filterForTime(ArrayList\u003cInteger\u003e data)\n    {\n        ArrayList\u003cInteger\u003e arrayToPass \u003d new ArrayList\u003c\u003e();\n        for (Integer i : data)\n        {\n            if (!time || i !\u003d 0)\n            {\n                arrayToPass.add(i);\n            }\n        }\n        return arrayToPass;\n    }\n\n    public static ArrayList\u003cInteger\u003e getCounts(ArrayList\u003cInteger\u003e data, int highestValue)\n    {\n        ArrayList\u003cInteger\u003e countedData \u003d new ArrayList\u003c\u003e();\n        for (int i \u003d 0; i \u003c highestValue + 1; i++)\n        {\n            countedData.add(0);\n        }\n        for (Integer i : data)\n        {\n            if (countedData.size() \u003e i \u0026\u0026 i \u003e -1)\n            {\n                int incrementedValue \u003d countedData.get(i) + 1;\n                countedData.set(i, incrementedValue);\n            }\n        }\n        return countedData;\n    }\n\n    public static int getCountedTotal(ArrayList\u003cInteger\u003e data)\n    {\n        int count \u003d 0;\n        for (Integer i : data)\n        {\n            count +\u003d i;\n        }\n        return count;\n    }\n\n    boolean isBarSelected(int left, int right, int top, int bottom)\n    {\n        for (Bounds b : selectedBounds)\n        {\n            if (b.getLeft() \u003d\u003d left \u0026\u0026 b.getRight() \u003d\u003d right \u0026\u0026 b.getTop() \u003d\u003d top \u0026\u0026 b.getBottom() \u003d\u003d bottom)\n            {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    private void drawBar(Graphics2D g, int width, int height, int left, int count, int total, String value)\n    {\n        Color oldColor \u003d g.getColor();\n        if (height \u003d\u003d 0)\n        {\n            return;\n        }\n        if (width \u003d\u003d 1)\n        {\n            g.drawLine(left, GRAPH_HEIGHT - GRAPH_YS, left, GRAPH_HEIGHT - GRAPH_YS - height);\n        }\n\n        int right \u003d left + width;\n        int top \u003d GRAPH_HEIGHT - GRAPH_YS - height;\n        int bottom \u003d GRAPH_HEIGHT - GRAPH_YS;\n\n        g.setColor(new Color(100, 170, 230));\n        g.drawLine(left, bottom, right, bottom);\n        g.drawLine(left, bottom, left, top);\n        g.drawLine(left, top, right, top);\n        g.drawLine(right, bottom, right, top);\n\n        boolean highlight \u003d (left \u003d\u003d activeBound.getLeft() \u0026\u0026 right \u003d\u003d activeBound.getRight() \u0026\u0026 top \u003d\u003d activeBound.getTop() \u0026\u0026 activeBound.getBottom() \u003d\u003d bottom);\n        boolean selected \u003d isBarSelected(left, right, top, bottom);\n\n\n        Paint oldPaint \u003d g.getPaint();\n        GradientPaint gradient \u003d new GradientPaint(left, bottom, (highlight \u0026\u0026 selected) ? gradientStartSelectedAndHighlighted : (highlight) ? gradientStartHighlighted : (selected) ? gradientStartSelected : gradientStart, left, top, (highlight \u0026\u0026 selected) ? gradientEndSelectedAndHighlighted : (highlight) ? gradientEndHighlighted : (selected) ? gradientEndSelected : gradientEnd);\n\n        g.setPaint(gradient);\n        g.fillRect(left, top, width, height);\n\n        if (highlight \u0026\u0026 selectedBounds.isEmpty())\n        {\n            String percent \u003d Math.round((100.0 * count / (double) total) * 100.0) / 100.0 + \"%\";\n            String message \u003d value + \": \" + count + \"/\" + total + \" (\" + percent + \")\";\n            int msgWidth \u003d g.getFontMetrics().stringWidth(message);\n            int msgHeight \u003d g.getFontMetrics().getHeight();\n\n            int ml \u003d left + width / 2 - msgWidth / 2;\n            int mb \u003d top - msgHeight / 2;\n\n            activeToolTip \u003d new ToolTipData(ml, mb, message);\n            shouldDrawToolTip \u003d true;\n        }\n        g.setPaint(oldPaint);\n        g.setColor(oldColor);\n    }\n\n    private int getHighestCount(ArrayList\u003cInteger\u003e data)\n    {\n        int max \u003d 0;\n        int index \u003d 0;\n        for (Integer i : data)\n        {\n            if (time \u0026\u0026 index \u003d\u003d 0)\n            {\n                index++;\n                continue;\n            }\n            if (i \u003e max)\n            {\n                max \u003d i;\n            }\n            index++;\n        }\n        return max;\n    }\n\n    public BufferedImage createStringImage(Graphics g, String s)\n    {\n        int w \u003d g.getFontMetrics().stringWidth(s) + 5;\n        int h \u003d g.getFontMetrics().getHeight();\n        BufferedImage image \u003d new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);\n        Graphics2D imageGraphics \u003d image.createGraphics();\n        imageGraphics.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);\n        imageGraphics.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);\n        imageGraphics.setColor(Color.WHITE);\n        imageGraphics.setFont(new Font(\"SansSerif\", Font.PLAIN, 12)); //HEIGHT 16\n        imageGraphics.drawString(s, 0, h - g.getFontMetrics().getDescent());\n        imageGraphics.dispose();\n        return image;\n    }\n\n    private void drawStringRotated(Graphics g, String s, int tx, int ty)\n    {\n        int angle \u003d (s.length() \u003d\u003d 1) ? 0 : -45;\n        AffineTransform aff \u003d AffineTransform.getRotateInstance(Math.toRadians(angle), tx, ty);\n        aff.translate(tx, ty);\n\n        Graphics2D g2D \u003d ((Graphics2D) g);\n        g2D.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\n        g2D.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\n        g2D.drawImage(createStringImage(g, s), aff, this);\n    }\n\n    private String getString(int s)\n    {\n        return (time) ? RoomUtil.time(s) : String.valueOf(s);\n    }\n\n    private int xScaleLow \u003d 0;\n    private int xScaleHigh \u003d 0;\n    private int yScaleHigh \u003d 0;\n\n    public int getScaleXLow()\n    {\n        return xScaleLow;\n    }\n\n    public int getScaleXHigh()\n    {\n        return xScaleHigh;\n    }\n\n    public int getScaleYHigh()\n    {\n        return yScaleHigh;\n    }\n\n    public void generateScales()\n    {\n        ArrayList\u003cInteger\u003e data \u003d filterInvalid(getInternalDataSet(activeKey).intData);\n        int lowestValue \u003d Integer.MAX_VALUE;\n        int highestValue \u003d 0;\n\n        for (Integer i : data)\n        {\n            if (time \u0026\u0026 i \u003d\u003d 0)\n            {\n                continue;\n            }\n            if (i \u003c lowestValue)\n            {\n                lowestValue \u003d i;\n            }\n            if (i \u003e highestValue)\n            {\n                highestValue \u003d i;\n            }\n        }\n        ArrayList\u003cInteger\u003e countedDataSet \u003d getCounts(data, highestValue);\n        int highestCount \u003d getHighestCount(countedDataSet);\n\n        xScaleLow \u003d lowestValue;\n        xScaleHigh \u003d highestValue;\n        yScaleHigh \u003d highestCount;\n    }\n\n    public void setScales(int xl, int xh, int yh)\n    {\n        xScaleLow \u003d xl;\n        xScaleHigh \u003d xh;\n        yScaleHigh \u003d yh;\n    }\n\n    public static GraphInternalBoundMatchedContainer getCounts(GraphInternalDataContainer data, int highestValue)\n    {\n        ArrayList\u003cInteger\u003e countedIntData \u003d new ArrayList\u003c\u003e();\n        ArrayList\u003cArrayList\u003cSimpleTOBData\u003e\u003e countedFullData \u003d new ArrayList\u003c\u003e();\n        for (int i \u003d 0; i \u003c highestValue + 1; i++)\n        {\n            countedIntData.add(0);\n            countedFullData.add(new ArrayList\u003c\u003e());\n        }\n        for (int i \u003d 0; i \u003c data.intData.size(); i++)\n        {\n            if (countedIntData.size() \u003e data.intData.get(i) \u0026\u0026 data.intData.get(i) \u003e -1)\n            {\n                int incrementedValue \u003d countedIntData.get(data.intData.get(i)) + 1;\n                countedIntData.set(data.intData.get(i), incrementedValue);\n                countedFullData.get(data.intData.get(i)).add(data.fullData.get(i));\n            }\n        }\n        return new GraphInternalBoundMatchedContainer(countedFullData, countedIntData);\n    }\n\n    private int getAlternateYScale(GraphInternalBoundMatchedContainer sets)\n    {\n        int max \u003d 0;\n        for (int i \u003d 0; i \u003c sets.intData.size(); i++)\n        {\n            int partialSum \u003d 0;\n            for (int j \u003d i; j \u003c i + groupSize; j++)\n            {\n                if (j \u003c sets.intData.size())\n                {\n                    partialSum +\u003d sets.intData.get(j);\n                }\n            }\n            if (partialSum \u003e max)\n            {\n                max \u003d partialSum;\n            }\n        }\n        return max;\n    }\n\n    public void setBounds()\n    {\n        bounds.clear();\n        if (graphType \u003d\u003d 0)\n        {\n            GraphInternalDataContainer graphData \u003d getInternalDataSet(activeKey);\n            GraphInternalBoundMatchedContainer countedDataSet \u003d getCounts(graphData, xScaleHigh);\n            int highestCount \u003d (groupingEnabled) ? getAlternateYScale(countedDataSet) : yScaleHigh;\n            int firstGroupCount \u003d (groupOffset \u003d\u003d 0) ? groupSize : groupOffset;\n            int bars \u003d (groupingEnabled) ? ((int) (1 + Math.ceil(((double) (1 + xScaleHigh - firstGroupCount - xScaleLow)) / ((double) groupSize)))) : xScaleHigh - xScaleLow + 1;\n            int barWidth \u003d GRAPH_WIDTH / (bars);\n            int usedWidth \u003d barWidth * bars;\n            int startX \u003d GRAPH_XS + (GRAPH_WIDTH / 2) - (usedWidth / 2);\n            double scale \u003d (highestCount \u003d\u003d 0) ? (GRAPH_HEIGHT * .75) : ((GRAPH_HEIGHT * .75) / highestCount);\n\n            for (int i \u003d Math.max(0, xScaleLow); i \u003c xScaleHigh + 1; i++)\n            {\n                if (groupingEnabled)\n                {\n                    if ((i - xScaleLow) % groupSize \u003d\u003d groupOffset || i \u003d\u003d xScaleLow + groupOffset || i \u003d\u003d xScaleLow)\n                    {\n                        int barOffset \u003d 0;\n                        if (i !\u003d xScaleLow \u0026\u0026 groupOffset !\u003d 0)\n                        {\n                            barOffset \u003d 1;\n                        }\n                        int summedRegion \u003d (groupOffset \u003d\u003d 0 || i !\u003d xScaleLow) ? sumRegion(countedDataSet, i, groupSize) : sumRegion(countedDataSet, i - groupSize + groupOffset, groupSize);\n                        int height \u003d (int) (summedRegion * scale);\n                        int barsToDraw \u003d (i - Math.max(0, xScaleLow)) / groupSize;\n                        int left \u003d startX + ((barsToDraw + barOffset) * (barWidth));\n                        int right \u003d left + barWidth;\n                        int top \u003d GRAPH_HEIGHT - GRAPH_YS - height;\n                        int bottom \u003d GRAPH_HEIGHT - GRAPH_YS;\n                        ArrayList\u003cSimpleTOBData\u003e summedRegionData;\n                        if (groupOffset \u003d\u003d 0 || i !\u003d xScaleLow)\n                        {\n                            summedRegionData \u003d sumRegionRaidData(countedDataSet, i, groupSize);\n                        } else\n                        {\n                            summedRegionData \u003d sumRegionRaidData(countedDataSet, i - groupSize + groupOffset, groupSize);\n                        }\n                        bounds.add(new Bounds(left, right, bottom, top, summedRegionData));\n                    }\n                } else\n                {\n                    int height \u003d (int) (countedDataSet.intData.get(i) * scale);\n                    int left \u003d startX + ((i - xScaleLow) * (barWidth));\n                    int right \u003d left + barWidth;\n                    int top \u003d GRAPH_HEIGHT - GRAPH_YS - height;\n                    int bottom \u003d GRAPH_HEIGHT - GRAPH_YS;\n                    bounds.add(new Bounds(left, right, bottom, top, countedDataSet.fullData.get(i)));\n                }\n            }\n        }\n    }\n\n    public void setGroupingEnabled(boolean enabled)\n    {\n        groupingEnabled \u003d enabled;\n        setBounds();\n        drawGraph();\n    }\n\n    public void setGraphType(int type)\n    {\n        graphType \u003d type;\n        setBounds();\n        drawGraph();\n    }\n\n    public void updateGroupSize(int groupSize)\n    {\n        this.groupSize \u003d groupSize;\n        setBounds();\n        drawGraph();\n    }\n\n    public void updateGroupOffset(int groupOffset)\n    {\n        this.groupOffset \u003d groupOffset;\n        setBounds();\n        drawGraph();\n    }\n\n    private int sumRegion(GraphInternalBoundMatchedContainer data, int index, int length)\n    {\n        int sum \u003d 0;\n        for (int i \u003d index; i \u003c index + length; i++)\n        {\n            if (i \u003c data.intData.size() \u0026\u0026 i \u003e -1)\n            {\n                sum +\u003d data.intData.get(i);\n            }\n        }\n        return sum;\n    }\n\n    private ArrayList\u003cSimpleTOBData\u003e sumRegionRaidData(GraphInternalBoundMatchedContainer data, int index, int length)\n    {\n        ArrayList\u003cSimpleTOBData\u003e summedData \u003d new ArrayList\u003c\u003e();\n        for (int i \u003d index; i \u003c index + length; i++)\n        {\n            if (i \u003c data.fullData.size() \u0026\u0026 i \u003e -1)\n            {\n                summedData.addAll(data.fullData.get(i));\n            }\n        }\n        return summedData;\n    }\n\n    private int groupSize \u003d 1;\n    private int groupOffset \u003d 0;\n\n    private void drawDragArea()\n    {\n        if (dragCurrentX !\u003d -1 \u0026\u0026 dragCurrentY !\u003d -1)\n        {\n            int startX \u003d Math.min(dragStartX, dragCurrentX);\n            int startY \u003d Math.min(dragStartY, dragCurrentY);\n            int endX \u003d Math.max(dragStartX, dragCurrentX);\n            int endY \u003d Math.max(dragStartY, dragCurrentY);\n            Graphics2D g \u003d (Graphics2D) img.getGraphics();\n            Color oldColor \u003d g.getColor();\n            g.setColor(new Color(200, 200, 100, 180));\n            g.drawRect(startX, startY, Math.abs(endX - startX), Math.abs(endY - startY));\n            g.setColor(new Color(200, 200, 100, 70));\n            g.fillRect(startX, startY, Math.abs(endX - startX), Math.abs(endY - startY));\n            g.setColor(oldColor);\n        }\n\n    }\n\n    private void drawToolTip()\n    {\n        if (shouldDrawToolTip \u0026\u0026 selectedBounds.isEmpty())\n        {\n            shouldDrawToolTip \u003d false;\n            Graphics2D g \u003d (Graphics2D) img.getGraphics();\n            Font oldFont \u003d g.getFont();\n            Color oldColor \u003d g.getColor();\n            g.setFont(new Font(\"SansSerif\", Font.PLAIN, 14));\n\n            int msgWidth \u003d g.getFontMetrics().stringWidth(activeToolTip.message);\n            int msgHeight \u003d g.getFontMetrics().getHeight();\n\n\n            int left \u003d activeToolTip.messageLeft - 5;\n            int bottom \u003d activeToolTip.messageBottom - msgHeight;\n\n            g.setColor(new Color(30, 30, 30, 255));\n            g.fillRect(activeToolTip.messageLeft - 5, activeToolTip.messageBottom - msgHeight, msgWidth + 10, msgHeight + 10);\n            g.setColor(new Color(100, 100, 100));\n            g.drawRect(left, bottom, msgWidth + 10, msgHeight + 10);\n            g.setColor(new Color(240, 240, 240));\n            g.drawString(activeToolTip.message, activeToolTip.messageLeft, activeToolTip.messageBottom);\n            g.setFont(oldFont);\n            g.setColor(oldColor);\n        }\n    }\n\n    public static ArrayList\u003cInteger\u003e filterInvalid(ArrayList\u003cInteger\u003e data)\n    {\n        ArrayList\u003cInteger\u003e filteredData \u003d new ArrayList\u003c\u003e();\n        for (Integer i : data)\n        {\n            if (i \u003e -1)\n            {\n                filteredData.add(i);\n            }\n        }\n        return filteredData;\n    }\n\n    public void drawGraphTitle(Graphics2D g, int totalCount)\n    {\n        g.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);\n        Font oldFont \u003d g.getFont();\n        Font font \u003d new Font(\"SansSerif\", Font.PLAIN, 14);\n        g.setFont(font);\n        String title \u003d activeKey.name + \" (Based on \" + totalCount + \" raids)\";\n        g.drawString(title, 300 - g.getFontMetrics().stringWidth(title) / 2, 16);\n        g.setFont(oldFont);\n    }\n\n    public void drawGraph()\n    {\n        Graphics2D g \u003d (Graphics2D) img.getGraphics();\n        Stroke oldStroke \u003d g.getStroke();\n\n        drawBlankPanel();\n        int lowestValue \u003d xScaleLow;\n        int highestValue \u003d xScaleHigh;\n        GraphInternalBoundMatchedContainer countedDataSet \u003d getCounts(getInternalDataSet(activeKey), highestValue);\n        int totalCount \u003d getCountedTotal(countedDataSet.intData);\n        drawGraphTitle(g, totalCount);\n        if (graphType \u003d\u003d 0)\n        {\n            drawBlankBarGraph();\n\n            int highestCount \u003d getAlternateYScale(countedDataSet);\n            int firstGroupCount \u003d (groupOffset \u003d\u003d 0) ? groupSize : groupOffset;\n            int bars \u003d ((int) (1 + Math.ceil(((double) (1 + xScaleHigh - firstGroupCount - xScaleLow)) / ((double) groupSize))));\n            int barWidth \u003d GRAPH_WIDTH / (bars);\n            if (barWidth \u003d\u003d 0)\n            {\n                barWidth \u003d 1;\n            }\n            int usedWidth \u003d barWidth * bars;\n            int startX \u003d GRAPH_XS + (GRAPH_WIDTH / 2) - (usedWidth / 2);\n            double scale \u003d ((highestCount \u003d\u003d 0) ? (GRAPH_HEIGHT * .75) : ((GRAPH_HEIGHT * .75) / (double) highestCount));\n            int horizontalScaleToUse \u003d (highestValue - lowestValue \u003e 100) ? 25 : (highestValue - lowestValue \u003e 50) ? 10 : (highestValue - lowestValue \u003e 10) ? 5 : 1;\n            if (barWidth \u003e 16)\n            {\n                horizontalScaleToUse \u003d 1;\n            }\n\n            int verticalScaleToUse \u003d (highestCount \u003e 250) ? 50 : (highestCount \u003e 100) ? 25 : (highestCount \u003e 50) ? 10 : (highestCount \u003e 10) ? 5 : 1;\n            if (groupingEnabled)\n            {\n\n                drawGraphVerticals(g, highestCount, scale, verticalScaleToUse);\n\n                for (int i \u003d Math.max(lowestValue, 0); i \u003c highestValue + 1; i++)\n                {\n                    if ((i - lowestValue) % groupSize \u003d\u003d groupOffset || i \u003d\u003d lowestValue + groupOffset || i \u003d\u003d lowestValue)\n                    {\n                        int barOffset \u003d 0;\n                        if (i !\u003d lowestValue \u0026\u0026 groupOffset !\u003d 0)\n                        {\n                            barOffset \u003d 1;\n                        }\n                        int currentBarCenter \u003d startX + (((i - Math.max(0, xScaleLow)) / groupSize) + barOffset) * (barWidth);\n                        int summedRegion \u003d (groupOffset \u003d\u003d 0 || i !\u003d lowestValue) ? sumRegion(countedDataSet, i, groupSize) : sumRegion(countedDataSet, i - groupSize + groupOffset, groupSize);\n                        int height \u003d (int) (summedRegion * scale);\n                        int stringOffset \u003d 16 + barWidth / 2 - 8;\n                        String axisValue \u003d \"\";\n                        if (i \u003d\u003d lowestValue || i \u003d\u003d highestValue || i % horizontalScaleToUse \u003d\u003d 0)\n                        {\n                            axisValue \u003d (i \u003d\u003d lowestValue \u0026\u0026 groupOffset !\u003d 0) ? getString(i - groupSize + groupOffset) : getString(i);\n                            if (groupSize !\u003d 1)\n                            {\n                                if (i !\u003d lowestValue || groupOffset \u003d\u003d 0)\n                                {\n                                    axisValue +\u003d \"-\" + getString(i + groupSize - 1);\n                                } else\n                                {\n                                    axisValue +\u003d \"-\" + getString(i);\n                                }\n                            }\n                            FontMetrics m \u003d g.getFontMetrics();\n                            int yOffset \u003d (int) (500 - GRAPH_HEIGHT - GRAPH_YS + 10 + (.5 * m.stringWidth(axisValue)));\n                            stringOffset -\u003d m.stringWidth(axisValue) - 5;\n                            drawStringRotated(g, axisValue, startX + stringOffset + ((((i - Math.max(0, xScaleLow)) / groupSize) + barOffset) * barWidth), yOffset);\n                        }\n                        drawBar(g, barWidth, height, currentBarCenter, summedRegion, totalCount, axisValue);\n                    }\n                }\n\n            } else\n            {\n                ArrayList\u003cInteger\u003e data \u003d filterForTime(filterInvalid(getInternalDataSet(activeKey).intData));\n\n                ArrayList\u003cInteger\u003e intCountedDataSet \u003d getCounts(data, highestValue);\n                totalCount \u003d getCountedTotal(intCountedDataSet);\n\n                drawGraphVerticals(g, highestCount, scale, verticalScaleToUse);\n\n                for (int i \u003d Math.max(lowestValue, 0); i \u003c highestValue + 1; i++)\n                {\n                    int currentBarCenter \u003d startX + ((i - lowestValue) * (barWidth));\n                    int height \u003d (int) (intCountedDataSet.get(i) * scale);\n                    drawBar(g, barWidth, height, currentBarCenter, intCountedDataSet.get(i), totalCount, getString(i));\n                    int stringOffset \u003d 16 + barWidth / 2 - 8;\n                    if (i \u003d\u003d lowestValue || i \u003d\u003d highestValue || i % horizontalScaleToUse \u003d\u003d 0)\n                    {\n                        FontMetrics m \u003d g.getFontMetrics();\n                        int yOffset \u003d (int) (500 - GRAPH_HEIGHT - GRAPH_YS + 10 + (.5 * m.stringWidth(getString(i))));\n                        stringOffset -\u003d m.stringWidth(getString(i)) - 5;\n                        drawStringRotated(g, getString(i), startX + stringOffset + ((i - lowestValue) * barWidth), yOffset);\n                    }\n                }\n\n            }\n            drawToolTip();\n            drawDragArea();\n            g.setStroke(oldStroke);\n            g.dispose();\n            repaint();\n        } else if (graphType \u003d\u003d 1)\n        {\n            g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n\n            ArrayList\u003cInteger\u003e data \u003d filterForTime(filterInvalid(getInternalDataSet(activeKey).intData));\n\n            ArrayList\u003cInteger\u003e intCountedDataSet \u003d getCounts(data, highestValue);\n            totalCount \u003d getCountedTotal(intCountedDataSet);\n            int nonZeroCount \u003d getNonZeroCount(intCountedDataSet);\n            if (nonZeroCount \u003e 9)\n            {\n                g.setColor(Color.WHITE);\n                g.drawString(\"Cannot draw pie chart for this data due to too many values\", 50, 50);\n                return;\n            }\n            ArrayList\u003cPieChartData\u003e sortedData \u003d createSortedPieChartData(intCountedDataSet, totalCount);\n\n            int position \u003d 90;\n            for (int i \u003d 0; i \u003c sortedData.size(); i++)\n            {\n                Color c \u003d pieChartColors[i];\n                Color opacityAdjusted \u003d new Color(c.getRed(), c.getGreen(), c.getBlue(), 150);\n                g.setColor(opacityAdjusted);\n                g.fillArc(100, 30, 250, 250, position - sortedData.get(i).sections, sortedData.get(i).sections);\n                position -\u003d sortedData.get(i).sections;\n            }\n\n            //Draw Plot\n\n            int offset \u003d 50;\n            for (int i \u003d 0; i \u003c sortedData.size(); i++)\n            {\n                Color c \u003d pieChartColors[i];\n                Color opacityAdjusted \u003d new Color(c.getRed(), c.getGreen(), c.getBlue(), 150);\n                g.setColor(opacityAdjusted);\n                g.fillRect(375, offset, 50, 18);\n                g.setColor(Color.BLACK);\n                g.drawRect(375, offset, 50, 18);\n                g.setColor(new Color(200, 200, 200, 200));\n                Font oldFont \u003d g.getFont();\n                g.setFont(oldFont.deriveFont(18f));\n                g.drawString(getString(sortedData.get(i).value), 435, offset + 16);\n                g.setFont(oldFont);\n                offset +\u003d 28;\n            }\n\n        } else if (graphType \u003d\u003d 2)\n        {\n            drawBlankBarGraph();\n            int yMax \u003d 0;\n            int yMin \u003d Integer.MAX_VALUE;\n            ArrayList\u003cInteger\u003e data \u003d filterForTime(filterInvalid(getInternalDataSet(activeKey).intData));\n\n            ArrayList\u003cInteger\u003e intCountedDataSet \u003d getCounts(data, highestValue);\n            for (int i \u003d 0; i \u003c intCountedDataSet.size(); i++)\n            {\n                if (intCountedDataSet.get(i) !\u003d 0)\n                {\n                    if (i \u003c yMin)\n                    {\n                        yMin \u003d i;\n                    }\n                    if (i \u003e yMax)\n                    {\n                        yMax \u003d i;\n                    }\n                }\n            }\n            int horizontalScale \u003d GRAPH_WIDTH / (totalCount - 1);\n            int verticalScale \u003d 200 / (yMax - yMin);\n            g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n\n            //draw horizontal lines\n            g.setColor(new Color(100, 100, 100, 150));\n            for (int i \u003d 0; i \u003c yMax - yMin; i++)\n            {\n                if (yMax - yMin \u003e 6)\n                {\n                    if (i % ((yMax - yMin) / 6) \u003d\u003d 0)\n                    {\n                        g.drawLine(GRAPH_XS, GRAPH_YE - (i * verticalScale), GRAPH_XE, GRAPH_YE - (i * verticalScale));\n\n                        Color oldColor \u003d g.getColor();\n                        g.setColor(new Color(200, 200, 200, 220));\n                        g.drawString(getString(i + yMin), GRAPH_XS - g.getFontMetrics().stringWidth(getString(i + yMin)) - 10, GRAPH_YE - (i * verticalScale));\n                        g.setColor(oldColor);\n                    }\n                } else\n                {\n                    g.drawLine(GRAPH_XS, GRAPH_YE - (i * verticalScale), GRAPH_XE, GRAPH_YE - (i * verticalScale));\n                }\n            }\n\n            g.setColor(new Color(120, 120, 240, 200));\n            for (int i \u003d 0; i \u003c data.size(); i++)\n            {\n                g.fillOval(GRAPH_XS + (i * horizontalScale) - 1, GRAPH_YE - ((data.get(i) - yMin) * verticalScale) - 2, 4, 4);\n                if (i !\u003d 0)\n                {\n                    int previousX \u003d GRAPH_XS + ((i - 1) * horizontalScale) + 1;\n                    int previousY \u003d GRAPH_YE - ((data.get(i - 1) - yMin) * verticalScale);\n                    g.drawLine(GRAPH_XS + (i * horizontalScale) + 1, GRAPH_YE - ((data.get(i) - yMin) * verticalScale), previousX, previousY);\n                }\n            }\n\n            //line plot\n        }\n    }\n\n    private void drawGraphVerticals(Graphics2D g, int highestCount, double scale, int verticalScaleToUse)\n    {\n        for (int i \u003d 0; i \u003c highestCount + 1; i++)\n        {\n            {\n                int stringOffset \u003d (int) (500 - GRAPH_HEIGHT - GRAPH_YS - scale * i + 8);\n                if (i \u003d\u003d 0 || i % verticalScaleToUse \u003d\u003d 0)\n                {\n                    Color oldColor \u003d g.getColor();\n                    g.setColor(new Color(100, 100, 100, 100));\n                    g.drawLine(GRAPH_XS, stringOffset - 8, GRAPH_XE, stringOffset - 8);\n                    g.setColor(oldColor);\n                    g.drawString(String.valueOf(i), GRAPH_XS - 20, stringOffset);\n                }\n            }\n        }\n    }\n\n    private ArrayList\u003cPieChartData\u003e createSortedPieChartData(ArrayList\u003cInteger\u003e data, int total)\n    {\n        ArrayList\u003cPieChartData\u003e fixedData \u003d new ArrayList\u003c\u003e();\n        for (int i \u003d 0; i \u003c data.size(); i++)\n        {\n            if (data.get(i) !\u003d 0)\n            {\n                fixedData.add(new PieChartData(i, data.get(i), total));\n            }\n        }\n        fixedData.sort((o1, o2) -\u003e\n        {\n            if (Objects.equals(o1.occurrences, o2.occurrences))\n            {\n                return 0;\n            }\n            return o1.occurrences \u003e o2.occurrences ? -1 : 1;\n        });\n        return fixedData;\n    }\n\n    private int getNonZeroCount(ArrayList\u003cInteger\u003e data)\n    {\n        int count \u003d 0;\n        for (Integer i : data)\n        {\n            if (i !\u003d 0)\n            {\n                count++;\n            }\n        }\n        return count;\n    }\n\n    private GraphInternalDataContainer getInternalDataSet(DataPoint key)\n    {\n        ArrayList\u003cInteger\u003e intDataSet \u003d new ArrayList\u003c\u003e();\n        ArrayList\u003cSimpleTOBData\u003e fullDataSet \u003d new ArrayList\u003c\u003e();\n        for (SimpleTOBData data : internalData)\n        {\n            if (data.getValue(key) !\u003d -1)\n            {\n                if (data.getTimeAccurate(key))\n                {\n                    intDataSet.add(data.getValue(key));\n                    fullDataSet.add(data);\n                }\n            }\n        }\n        return new GraphInternalDataContainer(fullDataSet, intDataSet);\n    }\n\n    private void drawGridLines()\n    {\n        Graphics g \u003d img.getGraphics();\n        g.setColor(gridColor);\n\n        g.drawLine(GRAPH_XS, GRAPH_YS, GRAPH_XE, GRAPH_YS);\n        g.drawLine(GRAPH_XS, GRAPH_YS, GRAPH_XS, GRAPH_YE);\n        g.drawLine(GRAPH_XS, GRAPH_YE, GRAPH_XE, GRAPH_YE);\n        g.drawLine(GRAPH_XE, GRAPH_YE, GRAPH_XE, GRAPH_YS);\n\n        g.dispose();\n    }\n\n    public void drawBlankPanel()\n    {\n        Graphics g \u003d img.getGraphics();\n        g.setColor(new Color(40, 40, 40));\n        g.fillRect(0, 0, img.getWidth(), img.getHeight());\n        g.dispose();\n\n        repaint();\n    }\n\n    public void drawBlankBarGraph()\n    {\n        drawGridLines();\n        repaint();\n    }\n\n    private boolean checkContains(Bounds bound)\n    {\n        for (Bounds b : selectedBounds)\n        {\n            if (b.getBottom() \u003d\u003d bound.getBottom() \u0026\u0026 b.getTop() \u003d\u003d bound.getTop() \u0026\u0026 b.getLeft() \u003d\u003d bound.getLeft() \u0026\u0026 b.getRight() \u003d\u003d bound.getRight())\n            {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    private boolean currentlyDragging \u003d false;\n    private boolean boundActive \u003d false;\n    private int dragStartX \u003d -1;\n    private int dragStartY \u003d -1;\n    private int dragCurrentX \u003d -1;\n    private int dragCurrentY \u003d -1;\n\n    private Bounds getBound(int x, int y)\n    {\n        for (Bounds bound : bounds)\n        {\n            if (x \u003e\u003d bound.getLeft() \u0026\u0026 x \u003c\u003d bound.getRight() \u0026\u0026 y \u003c\u003d bound.getBottom() \u0026\u0026 y \u003e\u003d bound.getTop())\n            {\n                return bound;\n            }\n        }\n        return null;\n    }\n\n    private boolean checkOverlap(int left1, int top1, int right1, int bottom1, int left2, int top2, int right2, int bottom2)\n    {\n        int leftA \u003d Math.min(left1, right1);\n        int rightA \u003d Math.max(left1, right1);\n        int bottomA \u003d Math.min(top1, bottom1);\n        int topA \u003d Math.max(top1, bottom1);\n\n        int leftB \u003d Math.min(left2, right2);\n        int rightB \u003d Math.max(left2, right2);\n        int bottomB \u003d Math.min(top2, bottom2);\n        int topB \u003d Math.max(top2, bottom2);\n\n        return (leftA \u003c rightB \u0026\u0026 rightA \u003e leftB \u0026\u0026 topA \u003e bottomB \u0026\u0026 bottomA \u003c topB);\n    }\n\n    private void checkIntersectingBounds()\n    {\n        ArrayList\u003cBounds\u003e currentlyIntersecting \u003d new ArrayList\u003c\u003e();\n        for (Bounds b : bounds)\n        {\n            if (checkOverlap(dragStartX, dragStartY, dragCurrentX, dragCurrentY, b.getLeft(), b.getTop(), b.getRight(), b.getBottom()))\n            {\n                currentlyIntersecting.add(b);\n            }\n        }\n        selectedBounds.clear();\n        selectedBounds.addAll(currentlyIntersecting);\n    }\n\n    private boolean checkBounds(int x, int y)\n    {\n        for (Bounds bound : bounds)\n        {\n            if (x \u003e\u003d bound.getLeft() \u0026\u0026 x \u003c\u003d bound.getRight() \u0026\u0026 y \u003c\u003d bound.getBottom() \u0026\u0026 y \u003e\u003d bound.getTop())\n            {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    private void checkBoundsAndHighlight(int x, int y)\n    {\n        for (Bounds bound : bounds)\n        {\n            if (x \u003e\u003d bound.getLeft() \u0026\u0026 x \u003c\u003d bound.getRight() \u0026\u0026 y \u003c\u003d bound.getBottom() \u0026\u0026 y \u003e\u003d bound.getTop())\n            {\n                if (!boundActive)\n                {\n                    requestFocusInWindow();\n                    activeBound \u003d new Bounds(bound.getLeft(), bound.getRight(), bound.getBottom(), bound.getTop(), bound.raids);\n                    boundActive \u003d true;\n                    drawGraph();\n                }\n\n            } else if (boundActive)\n            {\n                if (bound.matches(activeBound))\n                {\n                    activeBound.reset();\n                    boundActive \u003d false;\n                    drawGraph();\n                }\n            }\n        }\n    }\n\n    private ArrayList\u003cSimpleTOBData\u003e mergeSelectedData()\n    {\n        ArrayList\u003cSimpleTOBData\u003e mergedData \u003d new ArrayList\u003c\u003e();\n        for (Bounds b : selectedBounds)\n        {\n            mergedData.addAll(b.raids);\n        }\n        return mergedData;\n    }\n\n    @Override\n    public void mouseDragged(MouseEvent e)\n    {\n        if (e.isShiftDown() \u0026\u0026 currentlyDragging)\n        {\n            dragCurrentX \u003d e.getX();\n            dragCurrentY \u003d e.getY();\n            checkIntersectingBounds();\n            drawGraph();\n        }\n    }\n\n    @Override\n    public void mouseMoved(MouseEvent e)\n    {\n        checkBoundsAndHighlight(e.getX(), e.getY());\n    }\n\n    @Override\n    public void mouseClicked(MouseEvent e)\n    {\n        if (e.isShiftDown() \u0026\u0026 SwingUtilities.isLeftMouseButton(e) \u0026\u0026 selectedBounds.isEmpty())\n        {\n            if (checkBounds(e.getX(), e.getY()))\n            {\n                selectedBounds.add(getBound(e.getX(), e.getY()));\n                drawGraph();\n            }\n        } else if (e.isShiftDown() \u0026\u0026 SwingUtilities.isLeftMouseButton(e))\n        {\n            if (checkBounds(e.getX(), e.getY()))\n            {\n                Bounds lastBound \u003d selectedBounds.get(selectedBounds.size() - 1);\n                addAllBoundsBetween(lastBound, getBound(e.getX(), e.getY()));\n                drawGraph();\n            }\n        } else if (SwingUtilities.isLeftMouseButton(e) \u0026\u0026 !e.isControlDown())\n        {\n            selectedBounds.clear();\n            if (checkBounds(e.getX(), e.getY()))\n            {\n                selectedBounds.add(getBound(e.getX(), e.getY()));\n\n                drawGraph();\n            }\n        }\n    }\n\n    private void addAllBoundsBetween(Bounds lastBound, Bounds bound)\n    {\n        for (Bounds b : bounds)\n        {\n            if ((b.getLeft() \u003e lastBound.getLeft() \u0026\u0026 b.getLeft() \u003c bound.getLeft()) || (b.getLeft() \u003c lastBound.getLeft() \u0026\u0026 b.getLeft() \u003e bound.getLeft()))\n            {\n                if (!checkContains(b))\n                {\n                    selectedBounds.add(b);\n                }\n            }\n        }\n        selectedBounds.add(bound);\n    }\n\n    @Override\n    public void mousePressed(MouseEvent e)\n    {\n        if (SwingUtilities.isRightMouseButton(e))\n        {\n            if (selectedBounds.isEmpty())\n            {\n                for (Bounds bound : bounds)\n                {\n                    if (e.getX() \u003e\u003d bound.getLeft() \u0026\u0026 e.getX() \u003c\u003d bound.getRight() \u0026\u0026 e.getY() \u003c\u003d bound.getBottom() \u0026\u0026 e.getY() \u003e\u003d bound.getTop())\n                    {\n                        GraphRightClickContextMenu menu \u003d new GraphRightClickContextMenu(bound.raids, config, itemManager, clientThread, configManager);\n                        menu.show(e.getComponent(), e.getX(), e.getY());\n                    }\n                }\n            } else\n            {\n                GraphRightClickContextMenu menu \u003d new GraphRightClickContextMenu(mergeSelectedData(), config, itemManager, clientThread, configManager);\n                menu.show(e.getComponent(), e.getX(), e.getY());\n            }\n        }\n        if (SwingUtilities.isLeftMouseButton(e) \u0026\u0026 e.isShiftDown())\n        {\n            if (!currentlyDragging)\n            {\n                dragStartX \u003d e.getX();\n                dragStartY \u003d e.getY();\n                currentlyDragging \u003d true;\n            }\n        }\n        if (SwingUtilities.isLeftMouseButton(e) \u0026\u0026 e.isControlDown())\n        {\n            if (checkBounds(e.getX(), e.getY()))\n            {\n                Bounds clicked \u003d getBound(e.getX(), e.getY());\n                if (checkContains(clicked) \u0026\u0026 clicked !\u003d null)\n                {\n                    selectedBounds.removeIf(b -\u003e (b.getLeft() \u003d\u003d clicked.getLeft() \u0026\u0026 b.getRight() \u003d\u003d clicked.getRight() \u0026\u0026 b.getTop() \u003d\u003d clicked.getTop() \u0026\u0026 b.getBottom() \u003d\u003d clicked.getBottom()));\n                } else\n                {\n                    selectedBounds.add(getBound(e.getX(), e.getY()));\n                }\n                drawGraph();\n            }\n        }\n        if (SwingUtilities.isLeftMouseButton(e))\n        {\n            if (!checkBounds(e.getX(), e.getY()))\n            {\n                selectedBounds.clear();\n                drawGraph();\n            }\n        }\n    }\n\n    @Override\n    public void mouseReleased(MouseEvent e)\n    {\n        if (SwingUtilities.isLeftMouseButton(e))\n        {\n            if (currentlyDragging)\n            {\n                currentlyDragging \u003d false;\n                dragStartX \u003d -1;\n                dragStartY \u003d -1;\n                dragCurrentX \u003d -1;\n                dragCurrentY \u003d -1;\n                drawGraph();\n            }\n        }\n    }\n\n    @Override\n    public void mouseEntered(MouseEvent e)\n    {\n\n    }\n\n    @Override\n    public void mouseExited(MouseEvent e)\n    {\n\n    }\n\n    @Override\n    public void keyTyped(KeyEvent e)\n    {\n\n    }\n\n    @Override\n    public void keyPressed(KeyEvent e)\n    {\n        if (e.isShiftDown())\n        {\n            setCursor(Cursor.getPredefinedCursor(Cursor.CROSSHAIR_CURSOR));\n        }\n    }\n\n    @Override\n    public void keyReleased(KeyEvent e)\n    {\n        if (!e.isShiftDown())\n        {\n            setCursor(Cursor.getDefaultCursor());\n            if (currentlyDragging)\n            {\n                currentlyDragging \u003d false;\n                dragStartX \u003d -1;\n                dragStartY \u003d -1;\n                dragCurrentX \u003d -1;\n                dragCurrentY \u003d -1;\n                drawGraph();\n            }\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\comparisonview\\graph\\GraphPanel.java"},{"fileName":"GraphRightClickContextMenu.java","content":"package com.advancedraidtracker.ui.comparisonview.graph;\n\nimport com.advancedraidtracker.SimpleTOBData;\nimport com.advancedraidtracker.AdvancedRaidTrackerConfig;\nimport com.advancedraidtracker.ui.Raids;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.game.ItemManager;\n\nimport javax.swing.*;\nimport java.util.ArrayList;\n\n@Slf4j\npublic class GraphRightClickContextMenu extends JPopupMenu\n{\n    JMenuItem item;\n\n    public GraphRightClickContextMenu(ArrayList\u003cSimpleTOBData\u003e raids, AdvancedRaidTrackerConfig config, ItemManager itemManager, ClientThread clientThread, ConfigManager configManager)\n    {\n        item \u003d new JMenuItem(\"Show Represented Raids In New Window\");\n        item.addActionListener(al -\u003e\n        {\n            Raids raidFrame \u003d new Raids(config, itemManager, clientThread, configManager);\n            raidFrame.createFrame(raids);\n            raidFrame.repaint();\n            raidFrame.open();\n        });\n        add(item);\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\comparisonview\\graph\\GraphRightClickContextMenu.java"},{"fileName":"PieChartData.java","content":"package com.advancedraidtracker.ui.comparisonview.graph;\n\npublic class PieChartData\n{\n    public int value;\n    public int occurrences;\n    public int sections;\n\n    public PieChartData(int value, int occurrences, int total)\n    {\n        this.value \u003d value;\n        this.occurrences \u003d occurrences;\n        double percent \u003d (double) occurrences / total;\n        this.sections \u003d (int) (percent * 360);\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\comparisonview\\graph\\PieChartData.java"},{"fileName":"ToolTipData.java","content":"package com.advancedraidtracker.ui.comparisonview.graph;\n\npublic class ToolTipData\n{\n    public int messageLeft;\n    public int messageBottom;\n    public String message;\n\n    public ToolTipData(int ml, int mb, String msg)\n    {\n        messageLeft \u003d ml;\n        messageBottom \u003d mb;\n        message \u003d msg;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\comparisonview\\graph\\ToolTipData.java"},{"fileName":"NoDataPopUp.java","content":"package com.advancedraidtracker.ui.comparisonview;\n\nimport com.advancedraidtracker.ui.BaseFrame;\n\nimport javax.swing.*;\nimport java.awt.*;\n\npublic class NoDataPopUp extends BaseFrame\n{\n    public NoDataPopUp()\n    {\n        setTitle(\"No Data\");\n        JPanel container \u003d new JPanel();\n        container.add(new JLabel(\"No data to compare. Add a data set by selecting raids in the table and using the right click context menu -\u003e \\\"Add set to comparison\\\"\\\"\"));\n        JButton okButton \u003d new JButton(\"Ok\");\n        okButton.addActionListener(e -\u003e\n        {\n            close();\n            rootPane.setVisible(false);\n        });\n        container.add(okButton);\n        setPreferredSize(new Dimension(800, 100));\n        add(container);\n        pack();\n        setLocationRelativeTo(null);\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\comparisonview\\NoDataPopUp.java"},{"fileName":"CrabLeakInfo.java","content":"package com.advancedraidtracker.ui.crableaks;\n\nimport com.advancedraidtracker.ui.BaseFrame;\nimport com.advancedraidtracker.utility.RoomUtil;\nimport com.advancedraidtracker.utility.wrappers.StringInt;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.util.ArrayList;\nimport java.util.LinkedHashMap;\nimport java.util.Map;\n\npublic class CrabLeakInfo extends BaseFrame\n{\n\n    public CrabLeakInfo(ArrayList\u003cArrayList\u003cStringInt\u003e\u003e crabs)\n    {\n        JPanel primary \u003d new JPanel();\n        Map\u003cString, Integer\u003e crabLeakSums \u003d new LinkedHashMap\u003c\u003e();\n        primary.setBorder(BorderFactory.createTitledBorder(\"Crab Leak Info (Based on \" + crabs.size() + \" Raids)\"));\n        for (ArrayList\u003cStringInt\u003e crabData : crabs)\n        {\n            for (StringInt crab : crabData)\n            {\n                if (crabLeakSums.containsKey(crab.string))\n                {\n                    crabLeakSums.put(crab.string, crabLeakSums.get(crab.string) + crab.val);\n                } else\n                {\n                    crabLeakSums.put(crab.string, crab.val);\n                }\n            }\n        }\n\n        primary.setLayout(new GridLayout(1, 0, 2, 2));\n\n        JPanel panel70s \u003d new JPanel();\n        JPanel panel50s \u003d new JPanel();\n        JPanel panel30s \u003d new JPanel();\n        panel70s.setLayout(new GridLayout(0, 2, 2, 2));\n        panel50s.setLayout(new GridLayout(0, 2, 2, 2));\n        panel30s.setLayout(new GridLayout(0, 2, 2, 2));\n        panel70s.setBorder(BorderFactory.createTitledBorder(\"70s\"));\n        panel50s.setBorder(BorderFactory.createTitledBorder(\"50s\"));\n        panel30s.setBorder(BorderFactory.createTitledBorder(\"30s\"));\n\n        Color color \u003d new Color(30, 30, 30);\n        for (int i \u003d 0; i \u003c 3; i++)\n        {\n            JLabel test \u003d new JLabel(\"Crab\");\n            test.setOpaque(true);\n            test.setBackground(Color.BLACK);\n\n            JLabel test2 \u003d new JLabel(\"Average HP\", SwingConstants.RIGHT);\n            test2.setOpaque(true);\n            test2.setBackground(Color.BLACK);\n\n            JPanel currentPanel \u003d (i \u003d\u003d 0) ? panel70s : (i \u003d\u003d 1) ? panel50s : panel30s;\n\n            currentPanel.add(test);\n            currentPanel.add(test2);\n            for (int j \u003d 0; j \u003c 10; j++)\n            {\n                int averageTemp \u003d 0;\n                String crabDescription \u003d RoomUtil.MAIDEN_CRAB_NAMES[(i * 10) + j];\n                try\n                {\n                    averageTemp \u003d (int) ((crabLeakSums.get(RoomUtil.MAIDEN_CRAB_NAMES[(i * 10) + j]) / (double) crabs.size()) * 100);\n                } catch (Exception ignored)\n                {\n\n                }\n                double average \u003d averageTemp / 100.0;\n\n                JLabel desc \u003d new JLabel(crabDescription, SwingConstants.LEFT);\n                JLabel avg \u003d new JLabel(String.valueOf(average), SwingConstants.RIGHT);\n\n                if (j % 2 \u003d\u003d 0)\n                {\n                    desc.setOpaque(true);\n                    avg.setOpaque(true);\n                    avg.setBackground(color);\n                    desc.setBackground(color);\n                }\n                currentPanel.add(desc);\n                currentPanel.add(avg);\n            }\n        }\n        primary.add(panel70s);\n        primary.add(panel50s);\n        primary.add(panel30s);\n\n        add(primary);\n        pack();\n        open();\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\crableaks\\CrabLeakInfo.java"},{"fileName":"SaveRaids.java","content":"package com.advancedraidtracker.ui.exportraids;\n\nimport com.advancedraidtracker.SimpleTOBData;\nimport com.advancedraidtracker.ui.BaseFrame;\nimport com.advancedraidtracker.ui.filters.ConfirmationDialog;\nimport com.advancedraidtracker.utility.datautility.RaidsManager;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.util.ArrayList;\n\npublic class SaveRaids extends BaseFrame\n{\n    private final JTextField field;\n\n    public SaveRaids(ArrayList\u003cSimpleTOBData\u003e raids)\n    {\n        getContentPane().removeAll();\n        setTitle(\"Save Raids\");\n        JPanel borderPanel \u003d new JPanel(new BorderLayout());\n        borderPanel.setBorder(BorderFactory.createTitledBorder(\"Save Raids\"));\n        JPanel subPanel \u003d new JPanel();\n        subPanel.setLayout(new GridLayout(1, 4));\n        field \u003d new JTextField();\n        subPanel.add(new JLabel(\"Raids Name: \"));\n        subPanel.add(field);\n        JButton saveButton \u003d getSaveButton(raids);\n        subPanel.add(saveButton);\n        borderPanel.add(subPanel);\n        add(borderPanel);\n        pack();\n        setLocationRelativeTo(null);\n        repaint();\n    }\n\n    private JButton getSaveButton(ArrayList\u003cSimpleTOBData\u003e raids)\n    {\n        JButton saveButton \u003d new JButton(\"Save\");\n        saveButton.addActionListener(e -\u003e\n        {\n            if (RaidsManager.doesRaidExist(field.getText()))\n            {\n                ConfirmationDialog dialog \u003d new ConfirmationDialog(field.getText(), raids, (JFrame) (SwingUtilities.getRoot((Component) e.getSource())), 1);\n                dialog.open();\n            } else\n            {\n                RaidsManager.saveRaids(field.getText(), raids);\n                close();\n            }\n        });\n        return saveButton;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\exportraids\\SaveRaids.java"},{"fileName":"ConfirmationDialog.java","content":"package com.advancedraidtracker.ui.filters;\n\nimport com.advancedraidtracker.SimpleTOBData;\nimport com.advancedraidtracker.filters.ImplicitFilter;\nimport com.advancedraidtracker.filters.FilterManager;\nimport com.advancedraidtracker.ui.BaseFrame;\nimport com.advancedraidtracker.utility.datautility.RaidsManager;\n\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.util.ArrayList;\n\npublic class ConfirmationDialog extends BaseFrame\n{\n    public ConfirmationDialog(String filterName, ArrayList\u003cImplicitFilter\u003e filters, JFrame root)\n    {\n        setTitle(\"Confirm\");\n        JPanel panelButtons \u003d new JPanel(new GridLayout(1, 2));\n        setLayout(new GridLayout(2, 1));\n        add(new JLabel(\"Are you sure you want to overwrite filter \" + filterName + \"?\"));\n        JButton yesButton \u003d new JButton(\"Yes\");\n        yesButton.addActionListener(e -\u003e\n        {\n            FilterManager.saveOverwriteFilter(filterName, filters);\n            close();\n            root.setVisible(false);\n        });\n        JButton noButton \u003d new JButton(\"No\");\n        noButton.addActionListener(e -\u003e close());\n        panelButtons.add(yesButton);\n        panelButtons.add(noButton);\n        add(panelButtons);\n        pack();\n        setLocationRelativeTo(null);\n    }\n\n    public ConfirmationDialog(String raidsName, ArrayList\u003cSimpleTOBData\u003e raids, JFrame root, int mark)\n    {\n        setTitle(\"Confirm\");\n        JPanel panelButtons \u003d new JPanel(new GridLayout(1, 2));\n        setLayout(new GridLayout(2, 1));\n        add(new JLabel(\"Are you sure you want to overwrite raids \" + raidsName + \"?\"));\n        JButton yesButton \u003d new JButton(\"Yes\");\n        yesButton.addActionListener(e -\u003e\n        {\n            RaidsManager.saveOverwriteRaids(raidsName, raids);\n            close();\n            root.setVisible(false);\n        });\n        JButton noButton \u003d new JButton(\"No\");\n        noButton.addActionListener(e -\u003e close());\n        panelButtons.add(yesButton);\n        panelButtons.add(noButton);\n        add(panelButtons);\n        pack();\n        setLocationRelativeTo(null);\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\filters\\ConfirmationDialog.java"},{"fileName":"LoadFilter.java","content":"package com.advancedraidtracker.ui.filters;\n\nimport com.advancedraidtracker.ui.buttons.ButtonEditorLoadFilters;\nimport com.advancedraidtracker.ui.buttons.ButtonEditorViewFilters;\nimport com.advancedraidtracker.ui.buttons.ButtonRenderer;\nimport com.advancedraidtracker.ui.BaseFrame;\nimport com.advancedraidtracker.ui.Raids;\nimport com.advancedraidtracker.ui.buttons.NonEditableCell;\nimport lombok.extern.slf4j.Slf4j;\nimport com.advancedraidtracker.filters.Filter;\nimport com.advancedraidtracker.filters.FilterManager;\n\nimport javax.swing.*;\nimport javax.swing.table.TableCellRenderer;\nimport javax.swing.table.TableColumnModel;\nimport java.awt.*;\nimport java.util.ArrayList;\n\n@Slf4j\npublic class LoadFilter extends BaseFrame\n{\n    public void resizeColumnWidth(JTable table)\n    {\n        final TableColumnModel columnModel \u003d table.getColumnModel();\n        for (int column \u003d 0; column \u003c table.getColumnCount(); column++)\n        {\n            int width \u003d 30; // Min width\n            for (int row \u003d 0; row \u003c table.getRowCount(); row++)\n            {\n                TableCellRenderer renderer \u003d table.getCellRenderer(row, column);\n                Component comp \u003d table.prepareRenderer(renderer, row, column);\n                width \u003d Math.max(comp.getPreferredSize().width + 1, width);\n            }\n            if (width \u003e 400)\n            {\n                width \u003d 400;\n            }\n            columnModel.getColumn(column).setPreferredWidth(width);\n        }\n    }\n\n    public LoadFilter(Raids FilteredRaidsFrame)\n    {\n        setTitle(\"Load Filters\");\n        JPanel mainPanel \u003d new JPanel(new BorderLayout());\n        mainPanel.setBorder(BorderFactory.createTitledBorder(\"Filters\"));\n\n        String[] columnNames \u003d {\"Filter Name\", \"View\", \"Replace\", \"Add\"};\n        ArrayList\u003cObject[]\u003e tableBuilder \u003d new ArrayList\u003c\u003e();\n\n        ArrayList\u003cFilter\u003e filters \u003d FilterManager.getFilters();\n        for (Filter filter : filters)\n        {\n            Object[] row \u003d\n                    {\n                            filter.getName(),\n                            \"View Filter\",\n                            \"Replace Active\",\n                            \"Add to Active\"\n                    };\n            tableBuilder.add(row);\n        }\n        Object[][] tableObject \u003d new Object[filters.size()][4];\n        int count \u003d 0;\n        for (Object[] row : tableBuilder)\n        {\n            tableObject[count] \u003d row;\n            count++;\n        }\n        JPanel container \u003d new JPanel();\n        container.setLayout(new BoxLayout(container, BoxLayout.Y_AXIS));\n        JTable table \u003d new JTable(tableObject, columnNames);\n        table.getColumn(\"Filter Name\").setCellEditor(new NonEditableCell(new JTextField()));\n\n        table.getColumn(\"View\").setCellRenderer(new ButtonRenderer());\n        table.getColumn(\"View\").setCellEditor(new ButtonEditorViewFilters(new JCheckBox(), filters));\n\n        table.getColumn(\"Replace\").setCellRenderer(new ButtonRenderer());\n        table.getColumn(\"Replace\").setCellEditor(new ButtonEditorLoadFilters(new JCheckBox(), FilteredRaidsFrame, filters, this));\n\n        table.getColumn(\"Add\").setCellRenderer(new ButtonRenderer());\n        table.getColumn(\"Add\").setCellEditor(new ButtonEditorLoadFilters(new JCheckBox(), FilteredRaidsFrame, filters, this, false));\n\n        resizeColumnWidth(table);\n        JScrollPane pane \u003d new JScrollPane(table);\n        table.setFillsViewportHeight(true);\n        mainPanel.add(pane);\n        add(mainPanel);\n        pack();\n        setLocationRelativeTo(null);\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\filters\\LoadFilter.java"},{"fileName":"SaveFilter.java","content":"package com.advancedraidtracker.ui.filters;\n\nimport com.advancedraidtracker.filters.ImplicitFilter;\nimport com.advancedraidtracker.filters.FilterManager;\nimport com.advancedraidtracker.ui.BaseFrame;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.util.ArrayList;\n\npublic class SaveFilter extends BaseFrame\n{\n    private final JTextField field;\n\n    public SaveFilter(ArrayList\u003cImplicitFilter\u003e filters, ArrayList\u003cString\u003e quickFiltersState)\n    {\n        getContentPane().removeAll();\n        setTitle(\"Save Filter\");\n        JPanel borderPanel \u003d new JPanel(new BorderLayout());\n        borderPanel.setBorder(BorderFactory.createTitledBorder(\"Save Filter\"));\n        JPanel subPanel \u003d new JPanel();\n        subPanel.setLayout(new GridLayout(1, 0));\n        field \u003d new JTextField();\n        subPanel.add(new JLabel(\"Filter Name: \"));\n        subPanel.add(field);\n        JButton saveButton \u003d getSaveButton(filters, quickFiltersState);\n        subPanel.add(saveButton);\n        JButton saveButtonStrict \u003d getSaveButton(filters);\n        subPanel.add(saveButtonStrict);\n        borderPanel.add(subPanel);\n        add(borderPanel);\n        pack();\n        setLocationRelativeTo(null);\n        repaint();\n    }\n\n    private JButton getSaveButton(ArrayList\u003cImplicitFilter\u003e filters)\n    {\n        JButton saveButton \u003d new JButton(\"Save just filter\");\n        saveButton.addActionListener(e -\u003e\n        {\n            if (FilterManager.doesFilterExist(field.getText()))\n            {\n                ConfirmationDialog dialog \u003d new ConfirmationDialog(field.getText(), filters, (JFrame) (SwingUtilities.getRoot((Component) e.getSource())));\n                dialog.open();\n            } else\n            {\n                FilterManager.saveFilter(field.getText(), filters);\n                close();\n            }\n        });\n        return saveButton;\n    }\n\n    private JButton getSaveButton(ArrayList\u003cImplicitFilter\u003e filters, ArrayList\u003cString\u003e quickFiltersState)\n    {\n        JButton saveButton \u003d new JButton(\"Save with quick filters\");\n        saveButton.addActionListener(e -\u003e\n        {\n            if (FilterManager.doesFilterExist(field.getText()))\n            {\n                ConfirmationDialog dialog \u003d new ConfirmationDialog(field.getText(), filters, (JFrame) (SwingUtilities.getRoot((Component) e.getSource())));\n                dialog.open();\n            } else\n            {\n                FilterManager.saveFilter(field.getText(), filters, quickFiltersState);\n                close();\n            }\n        });\n        return saveButton;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\filters\\SaveFilter.java"},{"fileName":"ViewFilter.java","content":"package com.advancedraidtracker.ui.filters;\n\nimport com.advancedraidtracker.ui.BaseFrame;\nimport lombok.extern.slf4j.Slf4j;\nimport com.advancedraidtracker.filters.Filter;\n\nimport javax.swing.*;\nimport java.awt.*;\n\n@Slf4j\npublic class ViewFilter extends BaseFrame\n{\n    public ViewFilter(Filter filter)\n    {\n        setTitle(\"View Filter\");\n        setPreferredSize(new Dimension(300, 300));\n        JPanel mainPanel \u003d new JPanel();\n        mainPanel.setLayout(new BorderLayout());\n        mainPanel.setBorder(BorderFactory.createTitledBorder(\"Filter Details\"));\n        JPanel pane \u003d new JPanel();\n        pane.setLayout(new GridLayout(10, 1));\n        for (String s : filter.getFilters())\n        {\n            String[] splitString \u003d s.split(\"-\");\n            if (splitString.length !\u003d 0)\n            {\n                JLabel label \u003d new JLabel(splitString[splitString.length - 1]);\n                pane.add(label);\n            }\n        }\n        mainPanel.add(pane);\n        add(mainPanel);\n        pack();\n        setLocationRelativeTo(null);\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\filters\\ViewFilter.java"},{"fileName":"Raids.java","content":"package com.advancedraidtracker.ui;\n\n\nimport com.advancedraidtracker.SimpleTOBData;\nimport com.advancedraidtracker.AdvancedRaidTrackerConfig;\nimport com.advancedraidtracker.filters.*;\nimport com.advancedraidtracker.ui.buttons.*;\nimport com.advancedraidtracker.ui.charts.ChartFrame;\nimport com.advancedraidtracker.ui.comparisonview.ComparisonViewFrame;\nimport com.advancedraidtracker.ui.comparisonview.ComparisonViewPanel;\nimport com.advancedraidtracker.ui.comparisonview.NoDataPopUp;\nimport com.advancedraidtracker.ui.crableaks.CrabLeakInfo;\nimport com.advancedraidtracker.ui.exportraids.SaveRaids;\nimport com.advancedraidtracker.ui.filters.LoadFilter;\nimport com.advancedraidtracker.ui.filters.SaveFilter;\nimport com.advancedraidtracker.ui.statistics.StatisticTab;\nimport com.advancedraidtracker.utility.*;\nimport com.advancedraidtracker.utility.datautility.DataPoint;\nimport com.advancedraidtracker.utility.datautility.DataWriter;\nimport com.advancedraidtracker.utility.wrappers.PlayerCorrelatedPointData;\nimport com.advancedraidtracker.utility.wrappers.StringInt;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.game.ItemManager;\n\nimport javax.swing.*;\nimport javax.swing.border.MatteBorder;\nimport javax.swing.event.DocumentEvent;\nimport javax.swing.event.DocumentListener;\nimport javax.swing.table.DefaultTableModel;\nimport javax.swing.table.TableCellRenderer;\nimport javax.swing.table.TableColumnModel;\nimport javax.swing.text.BadLocationException;\nimport java.awt.*;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.util.*;\nimport java.util.List;\n\nimport static com.advancedraidtracker.utility.UISwingUtility.*;\n\n@Slf4j\npublic class Raids extends BaseFrame\n{\n    private final ArrayList\u003cInteger\u003e filteredIndices;\n    private JTable comparisonTable;\n    private final ArrayList\u003cArrayList\u003cSimpleTOBData\u003e\u003e comparisons;\n\n    private final JTabbedPane tabbedPane \u003d new JTabbedPane();\n    public ArrayList\u003cImplicitFilter\u003e activeFilters;\n    private final JLabel raidsFoundLabel \u003d new JLabel(\"\", SwingConstants.LEFT);\n    private final JLabel completionsFound \u003d new JLabel(\"\", SwingConstants.LEFT);\n    private JComboBox\u003cString\u003e viewByRaidComboBox;\n\n    private JComboBox\u003cString\u003e sortOrderBox;\n    private JComboBox\u003cString\u003e sortOptionsBox;\n\n    Map\u003cString, JLabel\u003e averageLabels \u003d new LinkedHashMap\u003c\u003e();\n    Map\u003cString, JLabel\u003e medianLabels \u003d new LinkedHashMap\u003c\u003e();\n    Map\u003cString, JLabel\u003e minLabels \u003d new LinkedHashMap\u003c\u003e();\n    Map\u003cString, JLabel\u003e maxLabels \u003d new LinkedHashMap\u003c\u003e();\n    public JComboBox\u003cString\u003e statisticsBox;\n    public JLabel customAverageLabel \u003d new JLabel(\"\", SwingConstants.RIGHT);\n    public JLabel customMedianLabel \u003d new JLabel(\"\", SwingConstants.RIGHT);\n    public JLabel customModeLabel \u003d new JLabel(\"\", SwingConstants.RIGHT);\n    public JLabel customMinLabel \u003d new JLabel(\"\", SwingConstants.RIGHT);\n    public JLabel customMaxLabel \u003d new JLabel(\"\", SwingConstants.RIGHT);\n\n    private final ArrayList\u003cMap\u003cString, ArrayList\u003cString\u003e\u003e\u003e aliases;\n\n    private final JTextArea aliasText;\n\n    JTextField dateTextField;\n    JCheckBox filterSpectateOnly;\n    JCheckBox filterInRaidOnly;\n    JCheckBox filterCompletionOnly;\n    JCheckBox filterWipeResetOnly;\n    JComboBox\u003cString\u003e filterComboBoxScale;\n    JCheckBox filterCheckBoxScale;\n    JCheckBox filterTodayOnly;\n    JCheckBox filterPartyOnly;\n    JCheckBox filterPartialData;\n    JCheckBox filterPartialOnly;\n    JCheckBox filterNormalOnly;\n    JTable table;\n    JPanel container;\n    private JPanel filterTableContainer;\n    public ArrayList\u003cSimpleTOBData\u003e currentData;\n    private JComboBox\u003cString\u003e timeFilterChoice;\n    private JComboBox\u003cString\u003e timeFilterOperator;\n    private JTextField timeFilterValue;\n    private JTable filterTable;\n    private JComboBox\u003cString\u003e playerFilterOperator;\n    private JTextField playerFilterValue;\n    private JCheckBox timeFollowsTab;\n    private StatisticTab maidenTab;\n    private StatisticTab bloatTab;\n    private StatisticTab nyloTab;\n    private StatisticTab soteTab;\n    private StatisticTab xarpTab;\n    private StatisticTab verzikTab;\n    private boolean built \u003d false;\n    private JComboBox\u003cString\u003e dateFilterOperator;\n    private JComboBox\u003cString\u003e otherIntFilterChoice;\n    private JComboBox\u003cString\u003e otherIntFilterOperator;\n    private JTextField otherIntFilterValue;\n    private JComboBox\u003cString\u003e otherBoolFilterChoice;\n    private JComboBox\u003cString\u003e otherBoolFilterOperator;\n\n\n    private final AdvancedRaidTrackerConfig config;\n    private final ItemManager itemManager;\n    private final ClientThread clientThread;\n\n    public String[] rooms \u003d {\"Maiden\", \"Bloat\",\"Nylocas\",\"Sotetseg\",\"Xarpus\",\"Verzik\",\"Challenge\"};\n    private final ConfigManager configManager;\n\n    public Raids(AdvancedRaidTrackerConfig config, ItemManager itemManager, ClientThread clientThread, ConfigManager configManager)\n    {\n        for(String s : rooms)\n        {\n            averageLabels.put(s, getDarkJLabel(\"\", SwingConstants.RIGHT));\n            medianLabels.put(s, getDarkJLabel(\"\", SwingConstants.RIGHT));\n            minLabels.put(s, getDarkJLabel(\"\", SwingConstants.RIGHT));\n            maxLabels.put(s, getDarkJLabel(\"\", SwingConstants.RIGHT));\n        }\n        this.clientThread \u003d clientThread;\n        this.itemManager \u003d itemManager;\n        this.configManager \u003d configManager;\n        columnHeaders \u003d new ArrayList\u003c\u003e();\n        for (String s : columnHeaderNames)\n        {\n            columnHeaders.add(getCheckBoxMenuItem(s));\n        }\n        aliases \u003d new ArrayList\u003c\u003e();\n        filteredIndices \u003d new ArrayList\u003c\u003e();\n        comparisons \u003d new ArrayList\u003c\u003e();\n        activeFilters \u003d new ArrayList\u003c\u003e();\n        aliasText \u003d new JTextArea();\n        this.config \u003d config;\n        this.setPreferredSize(new Dimension(1200, 820));\n    }\n\n    public void updateCustomStats(ArrayList\u003cSimpleTOBData\u003e raids)\n    {\n        DataPoint dataPoint \u003d DataPoint.ATTEMPTED_BGS_BLOAT;\n        boolean time \u003d dataPoint.type \u003d\u003d DataPoint.types.TIME;\n\n        double avg \u003d StatisticGatherer.getGenericAverage(raids, dataPoint);\n        double med \u003d StatisticGatherer.getGenericMedian(raids, dataPoint);\n        double mod \u003d StatisticGatherer.getGenericMode(raids, dataPoint);\n        double min \u003d StatisticGatherer.getGenericMin(raids, dataPoint);\n        double max \u003d StatisticGatherer.getGenericMax(raids, dataPoint);\n\n        String avgStr \u003d (time) ? RoomUtil.time(avg) : String.valueOf(avg);\n        String medStr \u003d (time) ? RoomUtil.time(med) : String.valueOf(med);\n        String modStr \u003d (time) ? RoomUtil.time(mod) : String.valueOf(mod);\n        String minStr \u003d (time) ? RoomUtil.time(min) : String.valueOf(min);\n        String maxStr \u003d (time) ? RoomUtil.time(max) : String.valueOf(max);\n\n        if (avg \u003d\u003d -1) avgStr \u003d \"-\";\n        if (med \u003d\u003d -1) medStr \u003d \"-\";\n        if (mod \u003d\u003d -1) modStr \u003d \"-\";\n        if (min \u003d\u003d -1) minStr \u003d \"-\";\n        if (max \u003d\u003d -1) maxStr \u003d \"-\";\n\n        customAverageLabel.setText(avgStr);\n        customMedianLabel.setText(medStr);\n        customModeLabel.setText(modStr);\n        customMinLabel.setText(minStr);\n        customMaxLabel.setText(maxStr);\n    }\n\n    private boolean evaluateAllFilters(SimpleTOBData data)\n    {\n        for (ImplicitFilter filter : activeFilters)\n        {\n            if (!filter.evaluate(data))\n            {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    public void updateTable()\n    {\n        int completions \u003d 0;\n        ArrayList\u003cSimpleTOBData\u003e tableData \u003d new ArrayList\u003c\u003e();\n        for (SimpleTOBData data : currentData)\n        {\n            boolean shouldDataBeIncluded \u003d true;\n            if (filterSpectateOnly.isSelected())\n            {\n                if (!data.spectated)\n                {\n                    shouldDataBeIncluded \u003d false;\n                }\n            }\n            if (filterInRaidOnly.isSelected())\n            {\n                if (data.spectated)\n                {\n                    shouldDataBeIncluded \u003d false;\n                }\n            }\n            if (filterCompletionOnly.isSelected())\n            {\n                if (!data.raidCompleted || !data.getOverallTimeAccurate())\n                {\n                    shouldDataBeIncluded \u003d false;\n                }\n            }\n            if (filterWipeResetOnly.isSelected())\n            {\n                if (data.raidCompleted)\n                {\n                    shouldDataBeIncluded \u003d false;\n                }\n            }\n            if (filterPartialData.isSelected())\n            {\n                if (!(data.maidenStartAccurate \u003d\u003d data.maidenEndAccurate \u0026\u0026\n                        data.bloatStartAccurate \u003d\u003d data.bloatEndAccurate \u0026\u0026\n                        data.nyloStartAccurate \u003d\u003d data.nyloEndAccurate \u0026\u0026\n                        data.soteStartAccurate \u003d\u003d data.soteEndAccurate \u0026\u0026\n                        data.xarpStartAccurate \u003d\u003d data.xarpEndAccurate \u0026\u0026\n                        data.verzikStartAccurate \u003d\u003d data.verzikEndAccurate))\n                {\n                    shouldDataBeIncluded \u003d false;\n                }\n            }\n            if (shouldDataBeIncluded \u0026\u0026 filterTodayOnly.isSelected())\n            {\n                shouldDataBeIncluded \u003d false;\n                Calendar cal1 \u003d Calendar.getInstance();\n                Calendar cal2 \u003d Calendar.getInstance();\n                cal1.setTime(data.raidStarted);\n                cal2.setTime(new Date(System.currentTimeMillis()));\n                if (cal1.get(Calendar.MONTH) \u003d\u003d cal2.get(Calendar.MONTH) \u0026\u0026 cal1.get(Calendar.YEAR) \u003d\u003d cal2.get(Calendar.YEAR) \u0026\u0026 cal1.get(Calendar.DAY_OF_MONTH) \u003d\u003d cal2.get(Calendar.DAY_OF_MONTH))\n                {\n                    shouldDataBeIncluded \u003d true;\n                }\n            }\n            if (filterPartyOnly.isSelected())\n            {\n                if (!data.maidenDefenseAccurate || !data.bloatDefenseAccurate || !data.nyloDefenseAccurate || !data.soteDefenseAccurate || !data.xarpDefenseAccurate)\n                {\n                    shouldDataBeIncluded \u003d false;\n                }\n            }\n            if (filterNormalOnly.isSelected())\n            {\n                if (data.storyMode || data.hardMode)\n                {\n                    shouldDataBeIncluded \u003d false;\n                }\n            }\n            if (filterPartialOnly.isSelected())\n            {\n                switch (Objects.requireNonNull(viewByRaidComboBox.getSelectedItem()).toString())\n                {\n                    case \"Challenge Time\":\n                        if (!data.getOverallTimeAccurate())\n                        {\n                            shouldDataBeIncluded \u003d false;\n                        }\n                        break;\n                    case \"Maiden Time\":\n                        if (!data.maidenStartAccurate || !data.maidenEndAccurate)\n                        {\n                            shouldDataBeIncluded \u003d false;\n                        }\n                        break;\n                    case \"Bloat Time\":\n                        if (!data.bloatStartAccurate || !data.bloatEndAccurate)\n                        {\n                            shouldDataBeIncluded \u003d false;\n                        }\n                        break;\n                    case \"Nylocas Time\":\n                        if (!data.nyloStartAccurate || !data.nyloEndAccurate)\n                        {\n                            shouldDataBeIncluded \u003d false;\n                        }\n                        break;\n                    case \"Sotetseg Time\":\n                        if (!data.soteStartAccurate || !data.soteEndAccurate)\n                        {\n                            shouldDataBeIncluded \u003d false;\n                        }\n                        break;\n                    case \"Xarpus Time\":\n                        if (!data.xarpStartAccurate || !data.xarpEndAccurate)\n                        {\n                            shouldDataBeIncluded \u003d false;\n                        }\n                        break;\n                    case \"Verzik Time\":\n                        if (!data.verzikStartAccurate || !data.verzikEndAccurate)\n                        {\n                            shouldDataBeIncluded \u003d false;\n                        }\n                        break;\n                }\n            }\n            if (shouldDataBeIncluded \u0026\u0026 filterCheckBoxScale.isSelected())\n            {\n                shouldDataBeIncluded \u003d filterComboBoxScale.getSelectedIndex() + 1 \u003d\u003d data.getScale();\n            }\n            for (Integer i : filteredIndices)\n            {\n                if (data.getValue(DataPoint.RAID_INDEX) \u003d\u003d i)\n                {\n                    shouldDataBeIncluded \u003d false;\n                }\n            }\n            if (!evaluateAllFilters(data))\n            {\n                shouldDataBeIncluded \u003d false;\n            }\n            if (shouldDataBeIncluded)\n            {\n                tableData.add(data);\n                if (data.raidCompleted \u0026\u0026 data.getOverallTimeAccurate())\n                {\n                    completions++;\n                }\n            }\n        }\n        if (sortOptionsBox.getSelectedIndex() \u003d\u003d 0)\n        {\n            if (sortOrderBox.getSelectedIndex() \u003d\u003d 0)\n            {\n                tableData.sort(Comparator.comparing(SimpleTOBData::getDate));\n            } else\n            {\n                tableData.sort(Comparator.comparing(SimpleTOBData::getDate).reversed());\n            }\n        } else if (sortOptionsBox.getSelectedIndex() \u003d\u003d 1)\n        {\n            if (sortOrderBox.getSelectedIndex() \u003d\u003d 0)\n            {\n                for (SimpleTOBData data : tableData)\n                {\n                    data.activeValue \u003d Objects.requireNonNull(viewByRaidComboBox.getSelectedItem()).toString();\n                }\n                tableData.sort(Comparator.comparing(SimpleTOBData::getSpecificTime));\n            } else\n            {\n                for (SimpleTOBData data : tableData)\n                {\n                    data.activeValue \u003d Objects.requireNonNull(viewByRaidComboBox.getSelectedItem()).toString();\n                }\n                tableData.sort(Comparator.comparing(SimpleTOBData::getSpecificTime).reversed());\n            }\n        } else if (sortOptionsBox.getSelectedIndex() \u003d\u003d 2)\n        {\n            if (sortOrderBox.getSelectedIndex() \u003d\u003d 0)\n            {\n                tableData.sort(Comparator.comparing(SimpleTOBData::getScale));\n            } else\n            {\n                tableData.sort(Comparator.comparing(SimpleTOBData::getScale).reversed());\n            }\n        }\n\n        updateCustomStats(tableData);\n        raidsFoundLabel.setText(\"Raids Found: \" + tableData.size());\n        completionsFound.setText(\"Completions Found: \" + completions);\n        updateTabNames(tableData);\n\n        ArrayList\u003cString\u003e columnNamesDynamic \u003d new ArrayList\u003c\u003e();\n        columnNamesDynamic.add(\"\");\n        for (JCheckBoxMenuItem item : columnHeaders)\n        {\n            if (item.getState())\n            {\n                columnNamesDynamic.add(item.getText());\n            }\n            if (item.getText().equals(\"Status\"))\n            {\n                columnNamesDynamic.add(Objects.requireNonNull(viewByRaidComboBox.getSelectedItem()).toString());\n            }\n        }\n        ArrayList\u003cObject[]\u003e tableBuilder \u003d new ArrayList\u003c\u003e();\n        for (SimpleTOBData raid : tableData)\n        {\n            ArrayList\u003cObject\u003e rowBuilder \u003d new ArrayList\u003c\u003e();\n            for (String column : columnNamesDynamic)\n            {\n                rowBuilder.add(getRowData(column, raid));\n            }\n            tableBuilder.add(rowBuilder.toArray());\n        }\n        int columns \u003d 0;\n        if (!tableBuilder.isEmpty())\n        {\n            columns \u003d tableBuilder.get(0).length;\n        }\n        Object[][] tableObject \u003d new Object[tableData.size()][columns];\n        int count \u003d 0;\n        for (Object[] row : tableBuilder)\n        {\n            tableObject[count] \u003d row;\n            count++;\n        }\n\n        table.setModel(new DefaultTableModel(tableObject, columnNamesDynamic.toArray()));\n        for (int i \u003d 0; i \u003c table.getColumnCount(); i++)\n        {\n            if (table.getColumnName(i).equals(\"View\"))\n            {\n                table.getColumn(table.getColumnName(i)).setCellEditor(new ButtonEditorRoomData(new JCheckBox(), tableData));\n                table.getColumn(table.getColumnName(i)).setCellRenderer(new ButtonRenderer());\n            } else\n            {\n                table.getColumn(table.getColumnName(i)).setCellEditor(new NonEditableCell(new JTextField()));\n                table.getColumn(table.getColumnName(i)).setCellRenderer(new StripedTableRowCellRenderer());\n            }\n        }\n\n        resizeColumnWidth(table);\n        table.setFillsViewportHeight(true);\n        setLabels(tableData);\n        container.validate();\n        container.repaint();\n    }\n\n    public Object getRowData(String column, SimpleTOBData raid)\n    {\n        switch (column)\n        {\n            case \"\":\n                return raid.getValue(DataPoint.RAID_INDEX);\n            case \"Date\":\n                Calendar cal \u003d Calendar.getInstance();\n                cal.setTime(raid.raidStarted);\n                return (cal.get(Calendar.MONTH) + 1) + \"-\" + cal.get(Calendar.DAY_OF_MONTH) + \"-\" + cal.get(Calendar.YEAR);\n            case \"Scale\":\n                return raid.getScaleString();\n            case \"Status\":\n                return raid.getRoomStatus();\n            case \"Players\":\n                StringBuilder players \u003d new StringBuilder();\n                for (String s : raid.players.keySet())\n                {\n                    players.append(s).append(\", \");\n                }\n                return (players.length() \u003e 2) ? players.substring(0, players.length() - 2) : \"\";\n            case \"Spectate\":\n                return (raid.spectated) ? \"Yes\" : \"No\";\n            case \"View\":\n                return \"View\";\n            case \"Time\":\n                Calendar cal2 \u003d Calendar.getInstance();\n                cal2.setTime(raid.raidStarted);\n                int hour \u003d cal2.get(Calendar.HOUR_OF_DAY);\n                int minute \u003d cal2.get(Calendar.MINUTE);\n                String minuteString \u003d (minute \u003c 10) ? \"0\" + minute : String.valueOf(minute);\n                String period \u003d (hour \u003e 11) ? \" PM\" : \" AM\";\n                if (hour \u003d\u003d 0)\n                {\n                    hour \u003d 12;\n                } else if (hour \u003e 12)\n                {\n                    hour -\u003d 12;\n                }\n                return hour + \":\" + minuteString + period;\n        }\n        String valueToDisplay \u003d \"(?)\";\n        try\n        {\n            PlayerCorrelatedPointData pointData \u003d raid.getSpecificTimeInactiveCorrelated(column);\n            if (pointData \u003d\u003d null)\n            {\n                valueToDisplay \u003d String.valueOf(raid.getSpecificTimeInactive(column));\n            } else\n            {\n                if (pointData.value \u003d\u003d 0)\n                {\n                    valueToDisplay \u003d \"0\";\n                } else\n                {\n                    valueToDisplay \u003d pointData.value + \" (\" + pointData.player + \")\";\n                }\n            }\n        } catch (Exception ignored)\n        {\n\n        }\n        return (isTime(column) ? RoomUtil.time(valueToDisplay) : valueToDisplay);\n    }\n\n    boolean isTime(String value)\n    {\n        try\n        {\n            if (!value.contains(\"Player:\"))\n            {\n                return DataPoint.getValue(value).type \u003d\u003d DataPoint.types.TIME;\n            }\n            else\n            {\n                return false;\n            }\n        } catch (Exception e)\n        {\n            return false;\n        }\n    }\n\n    private void updateTabNames(ArrayList\u003cSimpleTOBData\u003e data)\n    {\n        int maidenCount \u003d 0;\n        int bloatCount \u003d 0;\n        int nyloCount \u003d 0;\n        int soteCount \u003d 0;\n        int xarpCount \u003d 0;\n        int verzikCount \u003d 0;\n        for (SimpleTOBData d : data)\n        {\n            if (d.maidenStartAccurate \u0026\u0026 d.maidenEndAccurate)\n            {\n                maidenCount++;\n            }\n            if (d.bloatStartAccurate \u0026\u0026 d.bloatEndAccurate)\n            {\n                bloatCount++;\n            }\n            if (d.nyloStartAccurate \u0026\u0026 d.nyloEndAccurate)\n            {\n                nyloCount++;\n            }\n            if (d.soteStartAccurate \u0026\u0026 d.soteEndAccurate)\n            {\n                soteCount++;\n            }\n            if (d.xarpStartAccurate \u0026\u0026 d.xarpEndAccurate)\n            {\n                xarpCount++;\n            }\n            if (d.verzikStartAccurate \u0026\u0026 d.verzikEndAccurate)\n            {\n                verzikCount++;\n            }\n        }\n        tabbedPane.setTabLayoutPolicy(JTabbedPane.SCROLL_TAB_LAYOUT);\n        tabbedPane.setTitleAt(1, \"Maiden (\" + maidenCount + \")\");\n        tabbedPane.setTitleAt(2, \"Bloat (\" + bloatCount + \")\");\n        tabbedPane.setTitleAt(3, \"Nylo (\" + nyloCount + \")\");\n        tabbedPane.setTitleAt(4, \"Sotetseg (\" + soteCount + \")\");\n        tabbedPane.setTitleAt(5, \"Xarpus (\" + xarpCount + \")\");\n        tabbedPane.setTitleAt(6, \"Verzik (\" + verzikCount + \")\");\n    }\n\n    public void resizeColumnWidthFilters(JTable table)\n    {\n        final TableColumnModel columnModel \u003d table.getColumnModel();\n        for (int column \u003d 0; column \u003c table.getColumnCount(); column++)\n        {\n            int width \u003d 25; // Min width\n            for (int row \u003d 0; row \u003c table.getRowCount(); row++)\n            {\n                TableCellRenderer renderer \u003d table.getCellRenderer(row, column);\n                Component comp \u003d table.prepareRenderer(renderer, row, column);\n                width \u003d Math.max(comp.getPreferredSize().width + 1, width);\n            }\n            if (width \u003e 300)\n            {\n                width \u003d 300;\n            }\n            columnModel.getColumn(column).setPreferredWidth(width);\n        }\n    }\n\n    public void resizeColumnWidth(JTable table)\n    {\n        final TableColumnModel columnModel \u003d table.getColumnModel();\n        for (int column \u003d 0; column \u003c table.getColumnCount(); column++)\n        {\n            int width \u003d 50; // Min width\n            for (int row \u003d 0; row \u003c table.getRowCount(); row++)\n            {\n                TableCellRenderer renderer \u003d table.getCellRenderer(row, column);\n                Component comp \u003d table.prepareRenderer(renderer, row, column);\n                width \u003d Math.max(comp.getPreferredSize().width + 1, width);\n            }\n            if (width \u003e 500)\n            {\n                width \u003d 500;\n            }\n            columnModel.getColumn(column).setPreferredWidth(width);\n        }\n    }\n\n    public void setLabels(ArrayList\u003cSimpleTOBData\u003e data)\n    {\n        setOverallLabels(data);\n        maidenTab.updateTab(data);\n        bloatTab.updateTab(data);\n        nyloTab.updateTab(data);\n        soteTab.updateTab(data);\n        xarpTab.updateTab(data);\n        verzikTab.updateTab(data);\n    }\n\n    public void setOverallLabels(ArrayList\u003cSimpleTOBData\u003e data)\n    {\n        setOverallAverageLabels(data);\n        setOverallMedianLabels(data);\n        setOverallMinLabels(data);\n        setOverallMaxLabels(data);\n    }\n\n    public void setOverallAverageLabels(ArrayList\u003cSimpleTOBData\u003e data)\n    {\n        for(String s : averageLabels.keySet())\n        {\n            averageLabels.get(s).setText(RoomUtil.time(StatisticGatherer.getGenericAverage(data, DataPoint.getValue(s + \" Time\"))));\n        }\n    }\n\n    public void setOverallMedianLabels(ArrayList\u003cSimpleTOBData\u003e data)\n    {\n        for(String s : medianLabels.keySet())\n        {\n            medianLabels.get(s).setText(RoomUtil.time(StatisticGatherer.getGenericMedian(data, DataPoint.getValue(s + \" Time\"))));\n        }\n    }\n\n    public void setOverallMinLabels(ArrayList\u003cSimpleTOBData\u003e data)\n    {\n        for(String s : minLabels.keySet())\n        {\n            minLabels.get(s).setText(RoomUtil.time(StatisticGatherer.getGenericMin(data, DataPoint.getValue(s + \" Time\"))));\n        }\n    }\n\n    private void setOverallMaxLabels(ArrayList\u003cSimpleTOBData\u003e data)\n    {\n        for(String s : maxLabels.keySet())\n        {\n            maxLabels.get(s).setText(RoomUtil.time(StatisticGatherer.getGenericMax(data, DataPoint.getValue(s + \" Time\"))));\n        }\n    }\n\n    private JPopupMenu comboPopupMenu;\n    private ArrayList\u003cString\u003e comboStrictData;\n    private AbstractButton arrowButton;\n    private boolean writing \u003d false;\n\n    private void updateAliases()\n    {\n        writing \u003d true;\n        aliases.clear();\n        aliasText.setText(\"\");\n        for (String s : DataWriter.readAliasFile())\n        {\n            aliasText.append(s + \"\\n\");\n            String[] split \u003d s.split(\":\");\n            if (split.length !\u003d 2)\n            {\n                continue;\n            }\n            String name \u003d split[0];\n            ArrayList\u003cString\u003e names \u003d new ArrayList\u003c\u003e(Arrays.asList(split[1].split(\",\")));\n            if (!names.isEmpty())\n            {\n                Map\u003cString, ArrayList\u003cString\u003e\u003e map \u003d new LinkedHashMap\u003c\u003e();\n                map.put(name, names);\n                aliases.add(map);\n            }\n        }\n        writing \u003d false;\n    }\n\n    private void setPopupVisible(boolean visible)\n    {\n        if (visible)\n        {\n            comboPopupMenu.show(viewByRaidComboBox, 0, viewByRaidComboBox.getSize().height);\n        } else\n        {\n            comboPopupMenu.setVisible(false);\n        }\n    }\n\n    private void setComboSelection(String name)\n    {\n        Vector\u003cString\u003e items \u003d new Vector\u003c\u003e();\n\n        ComparisonViewPanel.addComboItems(name, items, comboStrictData, viewByRaidComboBox);\n    }\n\n    private JMenuItem createMenuItemTableHeader(final String name)\n    {\n        JMenuItem item \u003d new JMenuItem(name);\n        item.setBackground(Color.BLACK);\n        item.setOpaque(true);\n        item.addActionListener(event -\u003e getUpdatedPopupMenu(name));\n        return item;\n    }\n\n    private JMenuItem createMenuItem(final String name)\n    {\n        JMenuItem item \u003d new JMenuItem(name);\n        item.setBackground(Color.BLACK);\n        item.setOpaque(true);\n        item.addActionListener(event -\u003e setComboSelection(name));\n        return item;\n    }\n\n\n    private final Map\u003cString, String[]\u003e comboPopupData \u003d new LinkedHashMap\u003c\u003e();\n\n\n    public  JPanel getOverallPanel(String title, Map\u003cString, JLabel\u003e labelMap)\n    {\n        JPanel panel \u003d new JPanel();\n        panel.setLayout(new BorderLayout());\n        panel.setBorder(BorderFactory.createTitledBorder(title));\n\n        JPanel subPanel \u003d new JPanel();\n        subPanel.setLayout(new GridLayout(7, 2));\n\n        for(String s : rooms)\n        {\n            JLabel leftLabel \u003d new JLabel(roomColor + s);\n            subPanel.add(leftLabel);\n            subPanel.add(labelMap.get(s));\n        }\n        panel.add(subPanel);\n        return panel;\n    }\n\n    public void clearData()\n    {\n        if(currentData !\u003d null)\n        {\n            currentData.clear();\n        }\n        if(comparisons !\u003d null)\n        {\n            comparisons.clear();\n        }\n        close();\n    }\n\n    public void createFrame(ArrayList\u003cSimpleTOBData\u003e data)\n    {\n        comboPopupData.put(\"Room Times\", DataPoint.getRoomTimes());\n        comboPopupData.put(\"Maiden\", DataPoint.getMaidenNames());\n        comboPopupData.put(\"Bloat\", DataPoint.getBloatNames());\n        comboPopupData.put(\"Nylocas\", DataPoint.getNyloNames());\n        comboPopupData.put(\"Sotetseg\", DataPoint.getSoteNames());\n        comboPopupData.put(\"Xarpus\", DataPoint.getXarpNames());\n        comboPopupData.put(\"Verzik\", DataPoint.getVerzikNames());\n        comboPopupData.put(\"Any\", DataPoint.getAnyRoomNames());\n        comboPopupMenu \u003d new JPopupMenu();\n        comboPopupMenu.setBorder(new MatteBorder(1, 1, 1, 1, Color.DARK_GRAY));\n\n        List\u003cString\u003e allComboValues \u003d new ArrayList\u003c\u003e(comboPopupData.keySet());\n\n        comboStrictData \u003d new ArrayList\u003c\u003e();\n\n        for (String category : allComboValues)\n        {\n            JMenu menu \u003d new JMenu(category);\n            menu.setBackground(Color.BLACK);\n            menu.setOpaque(true);\n            if (!category.equals(\"Room Times\") \u0026\u0026 !category.equals(\"Any\"))\n            {\n                JMenu timeMenu \u003d new JMenu(\"Time\");\n                timeMenu.setBackground(Color.BLACK);\n                timeMenu.setOpaque(true);\n                for (String itemName : DataPoint.filterTimes(comboPopupData.get(category)))\n                {\n                    timeMenu.add(createMenuItem(itemName));\n                    comboStrictData.add(itemName);\n                }\n                JMenu countMenu \u003d new JMenu(\"Misc\");\n                countMenu.setBackground(Color.BLACK);\n                countMenu.setOpaque(true);\n                for (String itemName : DataPoint.filterInt(comboPopupData.get(category)))\n                {\n                    countMenu.add(createMenuItem(itemName));\n                    comboStrictData.add(itemName);\n                }\n                JMenu thrallMenu \u003d new JMenu(\"Thrall\");\n                thrallMenu.setBackground(Color.BLACK);\n                thrallMenu.setOpaque(true);\n                for (String itemName : DataPoint.filterThrall(comboPopupData.get(category)))\n                {\n                    thrallMenu.add(createMenuItem(itemName));\n                    comboStrictData.add(itemName);\n                }\n                JMenu vengMenu \u003d new JMenu(\"Veng\");\n                vengMenu.setBackground(Color.BLACK);\n                vengMenu.setOpaque(true);\n                for (String itemName : DataPoint.filterVeng(comboPopupData.get(category)))\n                {\n                    vengMenu.add(createMenuItem(itemName));\n                    comboStrictData.add(itemName);\n                }\n\n                JMenu specMenu \u003d new JMenu(\"Spec\");\n                specMenu.setBackground(Color.BLACK);\n                specMenu.setOpaque(true);\n                for (String itemName : DataPoint.filterSpecs(comboPopupData.get(category)))\n                {\n                    specMenu.add(createMenuItem(itemName));\n                    comboStrictData.add(itemName);\n                }\n\n                menu.add(timeMenu);\n                menu.add(countMenu);\n                menu.add(thrallMenu);\n                menu.add(vengMenu);\n                menu.add(specMenu);\n            } else\n            {\n                for (String itemName : comboPopupData.get(category))\n                {\n                    menu.add(createMenuItem(itemName));\n                    comboStrictData.add(itemName);\n                }\n            }\n            comboPopupMenu.add(menu);\n        }\n        JMenu playerSpecificMenu \u003d new JMenu(\"Player Specific\");\n        playerSpecificMenu.setBackground(Color.BLACK);\n        playerSpecificMenu.setOpaque(true);\n        String[] qualifiers \u003d new String[]{\"Maiden\", \"Bloat\", \"Nylo\", \"Sote\", \"Xarp\", \"Verz\", \"deaths\"};\n\n        for (String s : qualifiers)\n        {\n            JMenu room \u003d new JMenu(s);\n            room.setBackground(Color.BLACK);\n            room.setOpaque(true);\n            for (String qualified : DataPoint.getPlayerSpecific())\n            {\n                if (qualified.contains(s))\n                {\n                    room.add(createMenuItem(\"Player: \" + qualified));\n                    comboStrictData.add(\"Player: \" + qualified);\n                }\n            }\n            playerSpecificMenu.add(room);\n        }\n        JMenu room \u003d new JMenu(\"Other\");\n        room.setBackground(Color.BLACK);\n        room.setOpaque(true);\n        for (String qualified : DataPoint.getPlayerSpecific())\n        {\n            boolean anyFlagged \u003d false;\n            for (String s : qualifiers)\n            {\n                if (qualified.contains(s))\n                {\n                    anyFlagged \u003d true;\n                    break;\n                }\n            }\n            if (!anyFlagged)\n            {\n                room.add(createMenuItem(\"Player: \" + qualified));\n                comboStrictData.add(\"Player: \" + qualified);\n            }\n        }\n        playerSpecificMenu.add(room);\n\n        comboPopupMenu.add(playerSpecificMenu);\n\n        viewByRaidComboBox \u003d new JComboBox\u003c\u003e();\n        viewByRaidComboBox.setEditable(true);\n        viewByRaidComboBox.setPrototypeDisplayValue(\"Challenge Time\");\n        viewByRaidComboBox.setSelectedItem(\"Challenge Time\");\n        viewByRaidComboBox.setEditable(false);\n        for (Component comp : viewByRaidComboBox.getComponents())\n        {\n            if (comp instanceof AbstractButton)\n            {\n                arrowButton \u003d (AbstractButton) comp;\n                arrowButton.setBackground(Color.BLACK);\n            }\n        }\n\n        arrowButton.addActionListener(e -\u003e setPopupVisible(!comboPopupMenu.isVisible()));\n\n        viewByRaidComboBox.addMouseListener(new MouseAdapter()\n        {\n            @Override\n            public void mouseClicked(MouseEvent e)\n            {\n                setPopupVisible(!comboPopupMenu.isVisible());\n            }\n        });\n\n        timeFollowsTab \u003d new JCheckBox(\"Time Follows Tab\");\n        timeFollowsTab.setSelected(true);\n\n        for (int i \u003d 0; i \u003c data.size(); i++)\n        {\n            data.get(i).setIndex(i);\n        }\n\n        int completions \u003d 0;\n        currentData \u003d data;\n        setTitle(\"Raids\");\n\n        JPopupMenu tstMenu \u003d getjPopupMenu();\n\n\n        table \u003d new JTable();\n        table.getTableHeader().setComponentPopupMenu(tstMenu);\n        JScrollPane pane \u003d new JScrollPane(table);\n\n        JPanel tablePanel \u003d getTitledPanel(\"Raids\");\n        tablePanel.setLayout(new BorderLayout());\n        tablePanel.add(pane);\n\n\n        container \u003d new JPanel();\n        container.setLayout(new BoxLayout(container, BoxLayout.Y_AXIS));\n        tabbedPane.addChangeListener(e -\u003e\n        {\n            if (timeFollowsTab.isSelected())\n            {\n                if (built)\n                {\n                    viewByRaidComboBox.setEditable(true);\n                    switch (tabbedPane.getSelectedIndex())\n                    {\n                        case 0:\n                            viewByRaidComboBox.setSelectedItem(\"Challenge Time\");\n                            break;\n                        case 1:\n                            viewByRaidComboBox.setSelectedItem(\"Maiden Time\");\n                            break;\n                        case 2:\n                            viewByRaidComboBox.setSelectedItem(\"Bloat Time\");\n                            break;\n                        case 3:\n                            viewByRaidComboBox.setSelectedItem(\"Nylocas Time\");\n                            break;\n                        case 4:\n                            viewByRaidComboBox.setSelectedItem(\"Sotetseg Time\");\n                            break;\n                        case 5:\n                            viewByRaidComboBox.setSelectedItem(\"Xarpus Time\");\n                            break;\n                        case 6:\n                            viewByRaidComboBox.setSelectedItem(\"Verzik Time\");\n                            break;\n\n                    }\n                    viewByRaidComboBox.setEditable(false);\n                    updateTable();\n                }\n            }\n        });\n        JComponent overallPanel \u003d new JPanel();\n        tabbedPane.addTab(\"Overall\", overallPanel);\n        overallPanel.setLayout(new GridLayout(2, 3));\n\n        JPanel overallCustomPanel \u003d new JPanel();\n        overallCustomPanel.setLayout(new BorderLayout());\n        overallCustomPanel.setBorder(BorderFactory.createTitledBorder(\"\"));\n\n        JPanel customSubPanel \u003d new JPanel();\n        customSubPanel.setLayout(new GridLayout(1, 4));\n\n        JPanel chooseStatisticPanel \u003d getTitledPanel(\"Choose Statistic\");\n        chooseStatisticPanel.setLayout(new GridLayout(1, 1));\n\n        JPanel resultsPanel \u003d getTitledPanel(\"Results\");\n        resultsPanel.setLayout(new GridLayout(5, 2));\n\n        JPanel tableOptionsPanel \u003d getTitledPanel(\"Table Options\");\n\n        JPanel viewRaidByPanel \u003d getTitledPanel(\"View Raid By\");\n\n        sortOptionsBox \u003d new JComboBox\u003c\u003e(new String[]\n                {\n                        \"Date\",\n                        \"Value\",\n                        \"Scale\"\n                }\n        );\n\n        sortOrderBox \u003d new JComboBox\u003c\u003e(new String[]\n                {\n                        \"Ascending\",\n                        \"Descending\"\n                });\n\n        statisticsBox \u003d new JComboBox\u003c\u003e(DataPoint.getByNames());\n\n\n        statisticsBox.addActionListener(\n                al -\u003e\n                        updateTable());\n\n        sortOptionsBox.addActionListener(\n                al -\u003e\n                        updateTable()\n        );\n\n        sortOrderBox.addActionListener(\n                al -\u003e\n                        updateTable()\n        );\n\n        JLabel textCustomAverageLabel \u003d new JLabel(\"Average:\", SwingConstants.LEFT);\n        JLabel textCustomMedianLabel \u003d new JLabel(\"Median:\", SwingConstants.LEFT);\n        JLabel textCustomModeLabel \u003d new JLabel(\"Mode:\", SwingConstants.LEFT);\n        JLabel textCustomMinLabel \u003d new JLabel(\"Minimum:\", SwingConstants.LEFT);\n        JLabel textCustomMaxLabel \u003d new JLabel(\"Maximum:\", SwingConstants.LEFT);\n\n        resultsPanel.add(textCustomAverageLabel);\n        resultsPanel.add(customAverageLabel);\n\n        resultsPanel.add(textCustomMedianLabel);\n        resultsPanel.add(customMedianLabel);\n\n        resultsPanel.add(textCustomModeLabel);\n        resultsPanel.add(customModeLabel);\n\n        resultsPanel.add(textCustomMinLabel);\n        resultsPanel.add(customMinLabel);\n\n        resultsPanel.add(textCustomMaxLabel);\n        resultsPanel.add(customMaxLabel);\n\n        chooseStatisticPanel.add(statisticsBox);\n\n        JButton undoFilter \u003d new JButton(\"Clear manual filter\");\n        undoFilter.addActionListener(al -\u003e\n        {\n            filteredIndices.clear();\n            updateTable();\n        });\n\n        tableOptionsPanel.add(sortOptionsBox);\n        tableOptionsPanel.add(sortOrderBox);\n        tableOptionsPanel.add(undoFilter);\n        JPanel buttonLine \u003d new JPanel();\n        buttonLine.setLayout(new GridLayout(1, 2));\n        buttonLine.add(new JLabel(\"Config\"));\n\n        viewByRaidComboBox.addActionListener(\n                al -\u003e\n                        updateTable());\n\n        viewRaidByPanel.add(viewByRaidComboBox);\n\n        viewRaidByPanel.add(timeFollowsTab);\n\n        viewRaidByPanel.add(raidsFoundLabel);\n        viewRaidByPanel.add(completionsFound);\n        raidsFoundLabel.setText(\"Raids found: \" + data.size());\n        completionsFound.setText(\"Completions found: \" + completions);\n\n        customSubPanel.add(chooseStatisticPanel);\n        customSubPanel.add(resultsPanel);\n        customSubPanel.add(tableOptionsPanel);\n        customSubPanel.add(viewRaidByPanel);\n\n        overallCustomPanel.add(customSubPanel);\n\n        JPanel overallAveragePanel \u003d getOverallPanel(\"Average\", averageLabels);\n        JPanel overallMedianPanel \u003d getOverallPanel(\"Median\", medianLabels);\n        JPanel overallMinPanel \u003d getOverallPanel(\"Minimum\", minLabels);\n        JPanel overallMaxPanel \u003d getOverallPanel(\"Maximum\",maxLabels);\n\n        JPanel topStatPanel \u003d new JPanel();\n        topStatPanel.setLayout(new GridLayout(1, 4));\n\n        topStatPanel.add(overallAveragePanel);\n        topStatPanel.add(overallMedianPanel);\n        topStatPanel.add(overallMinPanel);\n        topStatPanel.add(overallMaxPanel);\n\n        overallPanel.add(topStatPanel);\n        overallPanel.add(overallCustomPanel);\n\n        maidenTab \u003d new StatisticTab(data, DataPoint.rooms.MAIDEN);\n        tabbedPane.addTab(\"Maiden\", maidenTab);\n        bloatTab \u003d new StatisticTab(data, DataPoint.rooms.BLOAT);\n        tabbedPane.addTab(\"Bloat\", bloatTab);\n        nyloTab \u003d new StatisticTab(data, DataPoint.rooms.NYLOCAS);\n        tabbedPane.addTab(\"Nylo\", nyloTab);\n        soteTab \u003d new StatisticTab(data, DataPoint.rooms.SOTETSEG);\n        tabbedPane.addTab(\"Sotetseg\", soteTab);\n        xarpTab \u003d new StatisticTab(data, DataPoint.rooms.XARPUS);\n        tabbedPane.addTab(\"Xarpus\", xarpTab);\n        verzikTab \u003d new StatisticTab(data, DataPoint.rooms.VERZIK);\n        tabbedPane.addTab(\"Verzik\", verzikTab);\n\n        tabbedPane.setMinimumSize(new Dimension(100, 300));\n\n        JPanel additionalFiltersPanel \u003d getTitledPanel(\"Quick Filters\");\n        additionalFiltersPanel.setLayout(new BorderLayout());\n        additionalFiltersPanel.setMinimumSize(new Dimension(200, 300));\n        additionalFiltersPanel.setPreferredSize(new Dimension(200, 300));\n\n        filterSpectateOnly \u003d getActionListenCheckBox(\"Spectate Only\", al-\u003e updateTable());\n        filterInRaidOnly \u003d getActionListenCheckBox(\"In Raid Only\", al-\u003e updateTable());\n        filterCompletionOnly \u003d getActionListenCheckBox(\"Completion Only\", al-\u003e updateTable());\n        filterWipeResetOnly \u003d getActionListenCheckBox(\"Wipe/Reset Only\", al-\u003e updateTable());\n        filterComboBoxScale \u003d UISwingUtility.getActionListenCheckBox(new String[]{\"Solo\", \"Duo\", \"Trio\", \"4-Man\", \"5-Man\"}, al -\u003e updateTable());\n        filterCheckBoxScale \u003d getActionListenCheckBox(\"Scale\", al -\u003e updateTable());\n        filterTodayOnly \u003d getActionListenCheckBox(\"Today Only\", al -\u003e updateTable());\n        filterPartyOnly \u003d getActionListenCheckBox(\"Party Only\", al -\u003e updateTable());\n        filterPartialData \u003d getActionListenCheckBox(\"Filter Partial Raids\", al -\u003e updateTable());\n        filterPartialOnly \u003d getActionListenCheckBox(\"Filter Partial Rooms\", al -\u003e updateTable());\n        filterPartialData.setToolTipText(\"Removes data sets that have any rooms that were partially completed\");\n        filterNormalOnly \u003d getActionListenCheckBox(\"Normal Mode Only\", true, al-\u003e updateTable());\n\n        JPanel scaleContainer \u003d new JPanel();\n        scaleContainer.setLayout(new BoxLayout(scaleContainer, BoxLayout.X_AXIS));\n\n        JPanel filterHolder \u003d new JPanel();\n        filterHolder.setLayout(new GridLayout(10, 1));\n        filterHolder.add(filterSpectateOnly);\n        filterHolder.add(filterInRaidOnly);\n        filterHolder.add(filterCompletionOnly);\n        filterHolder.add(filterWipeResetOnly);\n        filterHolder.add(filterTodayOnly);\n        filterHolder.add(filterPartyOnly);\n        filterHolder.add(filterPartialData);\n        filterHolder.add(filterPartialOnly);\n        filterHolder.add(filterNormalOnly);\n        scaleContainer.add(filterCheckBoxScale);\n        scaleContainer.add(filterComboBoxScale);\n        filterHolder.add(scaleContainer);\n\n        additionalFiltersPanel.add(filterHolder);\n\n        JPanel topContainer \u003d new JPanel();\n        topContainer.setLayout(new BoxLayout(topContainer, BoxLayout.X_AXIS));\n\n        topContainer.setPreferredSize(new Dimension(800, 300));\n        topContainer.add(tabbedPane);\n        topContainer.add(additionalFiltersPanel);\n        setLabels(data);\n        updateTable();\n        container.setPreferredSize(new Dimension(800, 700));\n\n        container.add(topContainer);\n        container.add(tablePanel);\n\n        JPanel splitLeftRight \u003d new JPanel();\n        splitLeftRight.setLayout(new BoxLayout(splitLeftRight, BoxLayout.X_AXIS));\n        splitLeftRight.add(container);\n\n        JPanel rightContainer \u003d new JPanel();\n        rightContainer.setPreferredSize(new Dimension(400, 700));\n        rightContainer.setLayout(new BoxLayout(rightContainer, BoxLayout.Y_AXIS));\n\n        JPanel rightTopContainer \u003d getTitledPanel(\"Advanced Filters\");\n        rightTopContainer.setLayout(new GridLayout(3, 2));\n\n        JPanel filterTimePanel \u003d getTitledPanel(\"Filter by room or split time\");\n        filterTimePanel.setLayout(new BoxLayout(filterTimePanel, BoxLayout.Y_AXIS));\n\n        JPanel filterPlayerPanel \u003d getTitledPanel(\"Filter by players in a raid\");\n        filterPlayerPanel.setLayout(new GridLayout(2, 2));\n\n        JPanel filterDatePanel \u003d getTitledPanel(\"Filter by date\");\n        filterDatePanel.setLayout(new GridLayout(2, 2));\n\n        JPanel filterOtherIntPanel \u003d getTitledPanel(\"Filter by other condition (int)\");\n        filterOtherIntPanel.setLayout(new GridLayout(2, 2));\n\n        JPanel filterOtherBoolPanel \u003d getTitledPanel(\"Filter by other condition (bool)\");\n        filterOtherBoolPanel.setLayout(new GridLayout(2, 2));\n\n\n        timeFilterChoice \u003d new JComboBox\u003c\u003e(DataPoint.getTimeNames());\n\n        String[] timeOperatorChoices \u003d\n                {\n                        \"\u003d\",\n                        \"\u003c\",\n                        \"\u003e\",\n                        \"\u003c\u003d\",\n                        \"\u003e\u003d\"\n                };\n\n        timeFilterOperator \u003d new JComboBox\u003c\u003e(timeOperatorChoices);\n\n\n        timeFilterValue \u003d new JTextField();\n\n        JButton timeFilterAdd \u003d new JButton(\"Add\");\n        timeFilterAdd.addActionListener(\n                al -\u003e\n                {\n                    String time \u003d timeFilterValue.getText();\n                    if (time.isEmpty())\n                    {\n                        return;\n                    }\n                    String timeStr \u003d Objects.requireNonNull(timeFilterChoice.getSelectedItem()) + \" \" + Objects.requireNonNull(timeFilterOperator.getSelectedItem()) + \" \" + time;\n                    activeFilters.add(new ImplicitFilter(new FilterTime(DataPoint.getValue(String.valueOf(timeFilterChoice.getSelectedItem())), timeFilterOperator.getSelectedIndex(), getTimeFromString(time), timeStr)));\n                    updateFilterTable();\n                });\n        timeFilterAdd.setPreferredSize(new Dimension(55, timeFilterAdd.getPreferredSize().height));\n        timeFilterOperator.setPreferredSize(new Dimension(50, timeFilterAdd.getPreferredSize().height));\n        timeFilterOperator.setMaximumSize(new Dimension(Integer.MAX_VALUE, timeFilterAdd.getPreferredSize().height));\n        timeFilterChoice.setMaximumSize(new Dimension(Integer.MAX_VALUE, timeFilterAdd.getPreferredSize().height));\n        timeFilterValue.setMaximumSize(new Dimension(Integer.MAX_VALUE, timeFilterAdd.getPreferredSize().height));\n        timeFilterValue.setPreferredSize(new Dimension(75, timeFilterAdd.getPreferredSize().height));\n\n\n        JPanel filterTimePanelTop \u003d new JPanel();\n        filterTimePanelTop.setLayout(new BoxLayout(filterTimePanelTop, BoxLayout.X_AXIS));\n        filterTimePanelTop.add(timeFilterChoice);\n\n        JPanel filterTimePanelBottom \u003d new JPanel();\n        filterTimePanelBottom.setLayout(new BoxLayout(filterTimePanelBottom, BoxLayout.X_AXIS));\n        filterTimePanelBottom.add(timeFilterOperator);\n        filterTimePanelBottom.add(Box.createRigidArea(new Dimension(2, 2)));\n        filterTimePanelBottom.add(timeFilterValue);\n        filterTimePanelBottom.add(Box.createRigidArea(new Dimension(2, 2)));\n        filterTimePanelBottom.add(timeFilterAdd);\n        filterTimePanel.add(filterTimePanelTop);\n        filterTimePanel.add(Box.createRigidArea(new Dimension(5, 5)));\n        filterTimePanel.add(filterTimePanelBottom);\n\n        String[] playersQualifier \u003d {\n                \"contains exactly\",\n                \"includes\",\n                \"includes any of\",\n                \"excludes\",\n                \"excludes all of\"\n        };\n\n        playerFilterOperator \u003d new JComboBox\u003c\u003e(playersQualifier);\n        playerFilterValue \u003d new JTextField();\n        JButton playerFilterAdd \u003d new JButton(\"Add\");\n        playerFilterValue.setMaximumSize(new Dimension(Integer.MAX_VALUE, playerFilterAdd.getPreferredSize().height));\n        playerFilterValue.setPreferredSize(new Dimension(75, playerFilterAdd.getPreferredSize().height));\n        playerFilterOperator.setMaximumSize(new Dimension(Integer.MAX_VALUE, playerFilterAdd.getPreferredSize().height));\n        playerFilterAdd.setPreferredSize(new Dimension(55, playerFilterAdd.getPreferredSize().height));\n\n        playerFilterAdd.addActionListener(\n                al -\u003e\n                {\n                    String filterStr \u003d \"Raid \" + playerFilterOperator.getSelectedItem() + \" \" + playerFilterValue.getText();\n                    activeFilters.add(new ImplicitFilter(new FilterPlayers(playerFilterValue.getText(), playerFilterOperator.getSelectedIndex(), filterStr)));\n                    updateFilterTable();\n                });\n\n        JPanel filterPlayerPanelTop \u003d new JPanel();\n        filterPlayerPanelTop.setLayout(new BoxLayout(filterPlayerPanelTop, BoxLayout.X_AXIS));\n        JPanel filterPlayerPanelBottom \u003d new JPanel();\n        filterPlayerPanelBottom.setLayout(new BoxLayout(filterPlayerPanelBottom, BoxLayout.X_AXIS));\n\n        filterPlayerPanel.setLayout(new BoxLayout(filterPlayerPanel, BoxLayout.Y_AXIS));\n\n        filterPlayerPanelTop.add(playerFilterOperator);\n        filterPlayerPanelBottom.add(playerFilterValue);\n        filterPlayerPanelBottom.add(Box.createRigidArea(new Dimension(2, 2)));\n        filterPlayerPanelBottom.add(playerFilterAdd);\n\n        filterPlayerPanel.add(filterPlayerPanelTop);\n        filterPlayerPanel.add(Box.createRigidArea(new Dimension(5, 5)));\n        filterPlayerPanel.add(filterPlayerPanelBottom);\n        String[] choicesDate \u003d\n                {\n                        \"on\",\n                        \"before\",\n                        \"after\"\n                };\n\n        dateFilterOperator \u003d new JComboBox\u003c\u003e(choicesDate);\n        JTextField dateFilterValue \u003d new JTextField();\n        dateFilterOperator.setMaximumSize(new Dimension(Integer.MAX_VALUE, dateFilterValue.getPreferredSize().height));\n\n\n        JButton dateFilterAdd \u003d new JButton(\"Add\");\n        dateFilterAdd.addActionListener(\n                al -\u003e\n                {\n                    try\n                    {\n                        String dateString \u003d dateTextField.getText();\n                        String[] datePartial \u003d dateString.split(\"/\");\n                        int year \u003d Integer.parseInt(datePartial[0]);\n                        int month \u003d Integer.parseInt(datePartial[1]);\n                        int day \u003d Integer.parseInt(datePartial[2]);\n                        Date date \u003d new GregorianCalendar(year, month-1, day).getTime();\n                        String filterStr \u003d \"Raid was \" + dateFilterOperator.getSelectedItem() + \" \" + date;\n                        activeFilters.add(new ImplicitFilter(new FilterDate(date, dateFilterOperator.getSelectedIndex(), filterStr)));\n                    } catch (Exception ignored)\n                    {\n\n                    }\n                    updateFilterTable();\n                });\n\n        dateFilterValue.setMaximumSize(new Dimension(Integer.MAX_VALUE, dateFilterAdd.getPreferredSize().height));\n        dateFilterValue.setPreferredSize(new Dimension(90, dateFilterAdd.getPreferredSize().height));\n\n        dateFilterAdd.setMaximumSize(new Dimension(Integer.MAX_VALUE, dateFilterAdd.getPreferredSize().height));\n        dateFilterAdd.setPreferredSize(new Dimension(55, dateFilterAdd.getPreferredSize().height));\n\n        JPanel dateTopRow \u003d new JPanel();\n        dateTopRow.setLayout(new BoxLayout(dateTopRow, BoxLayout.X_AXIS));\n\n        JPanel dateBottomRow \u003d new JPanel();\n        dateBottomRow.setLayout(new BoxLayout(dateBottomRow, BoxLayout.X_AXIS));\n\n        dateTopRow.add(dateFilterOperator);\n        dateTopRow.add(Box.createRigidArea(new Dimension(2, 2)));\n        dateTopRow.add(dateFilterAdd);\n        dateTextField \u003d new JTextField();\n        dateBottomRow.add(dateTextField);\n        dateBottomRow.add(Box.createRigidArea(new Dimension(5, 5)));\n        dateBottomRow.add(new JLabel(\"YYYY/MM/DD\"));\n        filterDatePanel.setLayout(new BoxLayout(filterDatePanel, BoxLayout.Y_AXIS));\n        filterDatePanel.add(dateTopRow);\n        filterDatePanel.add(Box.createRigidArea(new Dimension(5, 5)));\n        filterDatePanel.add(dateBottomRow);\n\n\n        String[] otherIntOperatorChoices \u003d {\n                \"\u003d\",\n                \"\u003c\",\n                \"\u003e\",\n                \"\u003c\u003d\",\n                \"\u003e\u003d\"\n        };\n\n\n        otherIntFilterChoice \u003d new JComboBox\u003c\u003e(DataPoint.getOtherIntNames());\n        otherIntFilterOperator \u003d new JComboBox\u003c\u003e(otherIntOperatorChoices);\n        otherIntFilterValue \u003d new JTextField();\n\n        JButton otherIntAdd \u003d new JButton(\"Add\");\n        otherIntAdd.addActionListener(\n                al -\u003e\n                {\n                    String filterStr \u003d Objects.requireNonNull(otherIntFilterChoice.getSelectedItem()) + \" \" + Objects.requireNonNull(otherIntFilterOperator.getSelectedItem()) + \" \" + otherIntFilterValue.getText() + \" \";\n                    activeFilters.add(new ImplicitFilter(new FilterOtherInt(DataPoint.getValue(String.valueOf(otherIntFilterChoice.getSelectedItem())), otherIntFilterOperator.getSelectedIndex(), Integer.parseInt(otherIntFilterValue.getText()), filterStr)));\n                    updateFilterTable();\n                }\n        );\n\n        otherIntFilterChoice.setMaximumSize(new Dimension(Integer.MAX_VALUE, otherIntAdd.getPreferredSize().height));\n\n        otherIntFilterValue.setMaximumSize(new Dimension(Integer.MAX_VALUE, otherIntAdd.getPreferredSize().height));\n        otherIntFilterValue.setPreferredSize(new Dimension(70, otherIntAdd.getPreferredSize().height));\n\n        otherIntAdd.setMaximumSize(new Dimension(Integer.MAX_VALUE, otherIntAdd.getPreferredSize().height));\n        otherIntAdd.setPreferredSize(new Dimension(55, otherIntAdd.getPreferredSize().height));\n\n        otherIntFilterOperator.setMaximumSize(new Dimension(Integer.MAX_VALUE, otherIntAdd.getPreferredSize().height));\n        otherIntFilterOperator.setPreferredSize(new Dimension(50, otherIntAdd.getPreferredSize().height));\n\n\n        JPanel otherIntTop \u003d new JPanel();\n        otherIntTop.setLayout(new BoxLayout(otherIntTop, BoxLayout.X_AXIS));\n        JPanel otherIntBottom \u003d new JPanel();\n        otherIntBottom.setLayout(new BoxLayout(otherIntBottom, BoxLayout.X_AXIS));\n\n        otherIntTop.add(otherIntFilterChoice);\n        otherIntBottom.add(otherIntFilterOperator);\n        otherIntBottom.add(Box.createRigidArea(new Dimension(2, 2)));\n        otherIntBottom.add(otherIntFilterValue);\n        otherIntBottom.add(Box.createRigidArea(new Dimension(2, 2)));\n        otherIntBottom.add(otherIntAdd);\n\n        filterOtherIntPanel.setLayout(new BoxLayout(filterOtherIntPanel, BoxLayout.Y_AXIS));\n        filterOtherIntPanel.add(otherIntTop);\n        filterOtherIntPanel.add(Box.createRigidArea(new Dimension(5, 5)));\n        filterOtherIntPanel.add(otherIntBottom);\n\n        String[] choicesOtherBool \u003d {\n                \"Maiden skip successful\",\n                \"Reset after maiden\",\n                \"Maiden wipe\",\n                \"Reset after bloat\",\n                \"Bloat wipe\",\n                \"Reset after nylo\",\n                \"Nylo wipe\",\n                \"Reset after sote\",\n                \"Sote wipe\",\n                \"Reset after xarp\",\n                \"Xarp wipe\",\n                \"Verzik  wipe\",\n                \"Maiden Scuffed\",\n        };\n\n        String[] qualifierOtherBool \u003d {\n                \"True\",\n                \"False\"\n        };\n\n        otherBoolFilterChoice \u003d new JComboBox\u003c\u003e(choicesOtherBool);\n        otherBoolFilterOperator \u003d new JComboBox\u003c\u003e(qualifierOtherBool);\n\n        JButton otherBoolAdd \u003d new JButton(\"Add Filter\");\n        otherBoolAdd.addActionListener(\n                al -\u003e\n                {\n                    String filterStr \u003d Objects.requireNonNull(otherBoolFilterChoice.getSelectedItem()) + \" \" + otherBoolFilterOperator.getSelectedItem();\n                    activeFilters.add(new ImplicitFilter(new FilterOtherBool(otherBoolFilterChoice.getSelectedIndex(), otherBoolFilterOperator.getSelectedIndex() \u003d\u003d 0, filterStr)));\n                    updateFilterTable();\n                }\n        );\n\n        otherBoolFilterOperator.setMaximumSize(new Dimension(Integer.MAX_VALUE, otherBoolAdd.getPreferredSize().height));\n        otherBoolFilterChoice.setMaximumSize(new Dimension(Integer.MAX_VALUE, otherBoolAdd.getPreferredSize().height));\n\n        JPanel filterBoolTop \u003d new JPanel();\n        filterBoolTop.setLayout(new BoxLayout(filterBoolTop, BoxLayout.X_AXIS));\n        JPanel filterBoolBottom \u003d new JPanel();\n        filterBoolBottom.setLayout(new BoxLayout(filterBoolBottom, BoxLayout.X_AXIS));\n\n        filterBoolTop.add(otherBoolFilterChoice);\n        filterBoolBottom.add(otherBoolFilterOperator);\n        filterBoolBottom.add(Box.createRigidArea(new Dimension(2, 2)));\n        filterBoolBottom.add(otherBoolAdd);\n\n        filterOtherBoolPanel.setLayout(new BoxLayout(filterOtherBoolPanel, BoxLayout.Y_AXIS));\n\n        filterOtherBoolPanel.add(filterBoolTop);\n        filterOtherBoolPanel.add(Box.createRigidArea(new Dimension(5, 5)));\n        filterOtherBoolPanel.add(filterBoolBottom);\n\n        JPanel filterOptions \u003d getTitledPanel(\"Filter Options\");\n        rightTopContainer.setPreferredSize(new Dimension(400, 250));\n        rightTopContainer.add(filterTimePanel);\n        rightTopContainer.add(filterOtherIntPanel);\n        rightTopContainer.add(filterPlayerPanel);\n        rightTopContainer.add(filterOtherBoolPanel);\n        rightTopContainer.add(filterDatePanel);\n\n\n        JPanel rightBottomContainer \u003d getTitledPanel(\"Active Filters\");\n        rightBottomContainer.setPreferredSize(new Dimension(400, 200));\n\n        filterTableContainer \u003d new JPanel();\n\n        JPopupMenu raidPopup \u003d new JPopupMenu();\n\n        JMenuItem analyzeSessions \u003d new JMenuItem(\"Analyze Sessions\");\n        analyzeSessions.setBackground(Color.BLACK);\n        analyzeSessions.setOpaque(true);\n        analyzeSessions.addActionListener(e -\u003e\n        {\n            updateAliases();\n            ArrayList\u003cSimpleTOBData\u003e rows \u003d new ArrayList\u003c\u003e();\n            int[] toRemove \u003d table.getSelectedRows();\n            for (int j : toRemove)\n            {\n                rows.add(currentData.get(Integer.parseInt(table.getModel().getValueAt(j, 0).toString())));\n            }\n            Map\u003cInteger, Map\u003cString, ArrayList\u003cSimpleTOBData\u003e\u003e\u003e sessions \u003d new LinkedHashMap\u003c\u003e();\n            for (SimpleTOBData data12 : rows)\n            {\n                if (!sessions.containsKey(data12.players.size()))\n                {\n                    Map\u003cString, ArrayList\u003cSimpleTOBData\u003e\u003e scale \u003d new LinkedHashMap\u003c\u003e();\n                    ArrayList\u003cSimpleTOBData\u003e list \u003d new ArrayList\u003c\u003e();\n                    list.add(data12);\n                    scale.put(data12.getPlayerList(aliases), list);\n                    sessions.put(data12.players.size(), scale);\n                } else\n                {\n                    if (!sessions.get(data12.players.size()).containsKey(data12.getPlayerList(aliases)))\n                    {\n                        ArrayList\u003cSimpleTOBData\u003e list \u003d new ArrayList\u003c\u003e();\n                        list.add(data12);\n                        sessions.get(data12.players.size()).put(data12.getPlayerList(aliases), list);\n                    } else\n                    {\n                        sessions.get(data12.players.size()).get(data12.getPlayerList(aliases)).add(data12);\n                    }\n                }\n            }\n            ArrayList\u003cArrayList\u003cString\u003e\u003e labelSets \u003d new ArrayList\u003c\u003e();\n            Map\u003cInteger, ArrayList\u003cArrayList\u003cSimpleTOBData\u003e\u003e\u003e dataSets \u003d new LinkedHashMap\u003c\u003e();\n            for (Integer scale : sessions.keySet())\n            {\n                ArrayList\u003cArrayList\u003cSimpleTOBData\u003e\u003e scaleData \u003d new ArrayList\u003c\u003e();\n                ArrayList\u003cString\u003e labels \u003d new ArrayList\u003c\u003e();\n                for (String playerList : sessions.get(scale).keySet())\n                {\n                    scaleData.add(sessions.get(scale).get(playerList));\n                    labels.add(playerList);\n                }\n                dataSets.put(scale, scaleData);\n                labelSets.add(labels);\n            }\n            ComparisonViewFrame graphView \u003d new ComparisonViewFrame(dataSets, labelSets, config, itemManager, clientThread, configManager);\n            graphView.open();\n        });\n\n\n        JMenuItem addToComparison \u003d new JMenuItem(\"Add set to comparison\");\n        addToComparison.setBackground(Color.BLACK);\n        addToComparison.setOpaque(true);\n\n        JMenuItem viewGraphs \u003d new JMenuItem(\"View Graphs\");\n        viewGraphs.setBackground(Color.BLACK);\n        viewGraphs.setOpaque(true);\n\n        JMenuItem viewCharts \u003d new JMenuItem(\"View Charts\");\n        viewCharts.setBackground(Color.BLACK);\n        viewCharts.setOpaque(true);\n\n        viewCharts.addActionListener(e -\u003e\n        {\n            ArrayList\u003cSimpleTOBData\u003e rows \u003d new ArrayList\u003c\u003e();\n            int[] toRemove \u003d table.getSelectedRows();\n            for (int j : toRemove)\n            {\n                rows.add(currentData.get(Integer.parseInt(table.getModel().getValueAt(j, 0).toString())));\n            }\n            ChartFrame roomCharts \u003d new ChartFrame(rows, config, itemManager, clientThread, configManager);\n            roomCharts.open();\n        });\n\n        viewGraphs.addActionListener(e -\u003e\n        {\n            ArrayList\u003cString\u003e labels \u003d new ArrayList\u003c\u003e();\n            ArrayList\u003cSimpleTOBData\u003e rows \u003d new ArrayList\u003c\u003e();\n            int[] toRemove \u003d table.getSelectedRows();\n            for (int j : toRemove)\n            {\n                rows.add(currentData.get(Integer.parseInt(table.getModel().getValueAt(j, 0).toString())));\n            }\n            if (rows.isEmpty())\n            {\n                new NoDataPopUp().open();\n            } else\n            {\n                labels.add(\"\");\n                ArrayList\u003cArrayList\u003cSimpleTOBData\u003e\u003e data1 \u003d new ArrayList\u003c\u003e();\n                data1.add(rows);\n                ComparisonViewFrame graphView \u003d new ComparisonViewFrame(data1, labels);\n                graphView.open();\n            }\n        });\n\n        addToComparison.addActionListener(e -\u003e\n        {\n            ArrayList\u003cSimpleTOBData\u003e rows \u003d new ArrayList\u003c\u003e();\n            int[] toRemove \u003d table.getSelectedRows();\n            for (int j : toRemove)\n            {\n                rows.add(currentData.get(Integer.parseInt(table.getModel().getValueAt(j, 0).toString())));\n            }\n            comparisons.add(rows);\n            updateComparisonTable();\n        });\n        JMenuItem exportRaids \u003d new JMenuItem(\"Export Selected Raids to CSV\");\n        exportRaids.setBackground(Color.BLACK);\n        exportRaids.setOpaque(true);\n        exportRaids.addActionListener(e -\u003e\n        {\n            ArrayList\u003cSimpleTOBData\u003e rows \u003d new ArrayList\u003c\u003e();\n            int[] toRemove \u003d table.getSelectedRows();\n            for (int j : toRemove)\n            {\n                rows.add(currentData.get(Integer.parseInt(table.getModel().getValueAt(j, 0).toString())));\n            }\n            new SaveRaids(rows).open();\n        });\n\n        JMenuItem filterRaids \u003d new JMenuItem(\"Filter Selected Raids\");\n        filterRaids.setBackground(Color.BLACK);\n        filterRaids.setOpaque(true);\n        filterRaids.addActionListener(e -\u003e\n        {\n            int[] toRemove \u003d table.getSelectedRows();\n            for (int j : toRemove)\n            {\n                filteredIndices.add(Integer.parseInt(table.getModel().getValueAt(j, 0).toString()));\n            }\n\n            updateTable();\n        });\n\n        JMenuItem filterExclusiveRaids \u003d new JMenuItem(\"Filter All Except Selected Raids\");\n        filterExclusiveRaids.setBackground(Color.BLACK);\n        filterExclusiveRaids.setOpaque(true);\n        filterExclusiveRaids.addActionListener(e -\u003e\n        {\n            int[] toKeep \u003d table.getSelectedRows();\n            for (int i \u003d 0; i \u003c table.getRowCount(); i++)\n            {\n                boolean found \u003d false;\n                for (int k : toKeep)\n                {\n                    if (i \u003d\u003d k)\n                    {\n                        found \u003d true;\n                        break;\n                    }\n                }\n                if (!found)\n                {\n                    filteredIndices.add(Integer.parseInt(table.getModel().getValueAt(i, 0).toString()));\n                }\n            }\n\n            updateTable();\n        });\n        JMenuItem analyzeCrabs \u003d new JMenuItem(\"Analyze selection crab leaks\");\n        analyzeCrabs.setOpaque(true);\n        analyzeCrabs.setBackground(Color.BLACK);\n        analyzeCrabs.addActionListener(e -\u003e\n        {\n            ArrayList\u003cArrayList\u003cStringInt\u003e\u003e crabData \u003d new ArrayList\u003c\u003e();\n            int[] toRemove \u003d table.getSelectedRows();\n            for (int j : toRemove)\n            {\n                crabData.add(currentData.get(Integer.parseInt(table.getModel().getValueAt(j, 0).toString())).maidenCrabs);\n            }\n            new CrabLeakInfo(crabData);\n        });\n\n        raidPopup.add(analyzeCrabs);\n        raidPopup.add(exportRaids);\n        raidPopup.add(addToComparison);\n        raidPopup.add(filterRaids);\n        raidPopup.add(filterExclusiveRaids);\n        raidPopup.add(analyzeSessions);\n        raidPopup.add(viewCharts);\n        raidPopup.add(viewGraphs);\n        table.setComponentPopupMenu(raidPopup);\n\n        filterTable \u003d new JTable();\n        filterTable.setPreferredSize(new Dimension(380, 135));\n        JScrollPane tableScrollView \u003d new JScrollPane(filterTable);\n        tableScrollView.setPreferredSize(new Dimension(380, 140));\n        updateFilterTable();\n        filterTableContainer.add(tableScrollView);\n\n        rightBottomContainer.add(filterTableContainer);\n\n        JButton saveFiltersButton \u003d new JButton(\"Save\");\n        saveFiltersButton.addActionListener(\n                al -\u003e\n                {\n                    ArrayList\u003cString\u003e quickFiltersState \u003d new ArrayList\u003c\u003e();\n                    quickFiltersState.add(\"QF-Spectate Only:\"+filterSpectateOnly.isSelected());\n                    quickFiltersState.add(\"QF-In Raid Only:\"+filterInRaidOnly.isSelected());\n                    quickFiltersState.add(\"QF-Completion Only:\"+filterCompletionOnly.isSelected());\n                    quickFiltersState.add(\"QF-Wipe/Reset Only:\"+filterWipeResetOnly.isSelected());\n                    quickFiltersState.add(\"QF-Today Only:\"+filterTodayOnly.isSelected());\n                    quickFiltersState.add(\"QF-Party Only:\"+filterPartyOnly.isSelected());\n                    quickFiltersState.add(\"QF-Partial Raids:\"+filterPartialData.isSelected());\n                    quickFiltersState.add(\"QF-Partial Rooms:\"+filterPartialOnly.isSelected());\n                    quickFiltersState.add(\"QF-Normal Mode Only:\"+filterNormalOnly.isSelected());\n                    quickFiltersState.add(\"QF-Scale:\"+filterCheckBoxScale.isSelected()+\":\"+filterComboBoxScale.getSelectedIndex());\n                    quickFiltersState.add(\"QF-View Raid By:\"+viewByRaidComboBox.getItemAt(viewByRaidComboBox.getSelectedIndex()));\n                    quickFiltersState.add(\"QF-Table Sort By:\"+sortOptionsBox.getItemAt(sortOptionsBox.getSelectedIndex()));\n                    quickFiltersState.add(\"QF-Table Sort:\"+sortOrderBox.getItemAt(sortOrderBox.getSelectedIndex()));\n                    SaveFilter saveFilter \u003d new SaveFilter(activeFilters, quickFiltersState);\n                    saveFilter.open();\n                });\n        JButton loadFiltersButton \u003d new JButton(\"Load\");\n        loadFiltersButton.addActionListener(\n                al -\u003e\n                        new LoadFilter(this).open());\n        JButton clearFiltersButton \u003d new JButton(\"Clear\");\n        clearFiltersButton.addActionListener(\n                al -\u003e\n                {\n                    activeFilters.clear();\n                    updateFilterTable();\n                });\n        GridLayout layout \u003d new GridLayout(2, 2);\n        layout.setHgap(2);\n        layout.setVgap(2);\n        filterOptions.setLayout(layout);\n\n        filterOptions.add(saveFiltersButton);\n        filterOptions.add(loadFiltersButton);\n        filterOptions.add(clearFiltersButton);\n        rightTopContainer.add(filterOptions);\n\n        JPanel rightBottomBottomContainer \u003d getTitledPanel(\"Comparison Options\");\n        rightBottomBottomContainer.setPreferredSize(new Dimension(400, 250));\n\n        comparisonTable \u003d new JTable();\n        JScrollPane comparisonTableScroll \u003d new JScrollPane(comparisonTable);\n        comparisonTable.setPreferredSize(new Dimension(380, 170));\n        comparisonTableScroll.setPreferredSize(new Dimension(380, 155));\n        updateComparisonTable();\n\n        JPanel rightBottomMostContainer \u003d getTitledPanel(\"Alias Options\");\n\n        aliasText.setToolTipText(\"This applies to the tab names when you use the analyze sessions features. Syntax- Name to be displayed:oldname1,oldname2,oldname3\");\n        aliasText.getDocument().addDocumentListener(new DocumentListener()\n        {\n            @Override\n            public void insertUpdate(DocumentEvent e)\n            {\n                try\n                {\n                    if (!writing)\n                        DataWriter.writeAliasFile(e.getDocument().getText(0, e.getDocument().getLength()).replaceAll(\"\\n\", System.lineSeparator()));\n                } catch (BadLocationException ignored)\n                {\n                }\n            }\n\n            @Override\n            public void removeUpdate(DocumentEvent e)\n            {\n                try\n                {\n                    if (!writing)\n                        DataWriter.writeAliasFile(e.getDocument().getText(0, e.getDocument().getLength()).replaceAll(\"\\n\", System.lineSeparator()));\n                } catch (BadLocationException ignored)\n                {\n                }\n            }\n\n            @Override\n            public void changedUpdate(DocumentEvent e)\n            {\n                try\n                {\n                    if (!writing)\n                        DataWriter.writeAliasFile(e.getDocument().getText(0, e.getDocument().getLength()).replaceAll(\"\\n\", System.lineSeparator()));\n                } catch (BadLocationException ignored)\n                {\n                }\n            }\n        });\n\n        updateAliases();\n\n        JScrollPane aliasScrollPane \u003d new JScrollPane(aliasText);\n        aliasScrollPane.setPreferredSize(new Dimension(380, 70));\n        rightBottomMostContainer.add(aliasScrollPane);\n\n        rightBottomBottomContainer.add(comparisonTableScroll);\n        JButton viewComparisonsButton \u003d new JButton(\"View Comparisons\");\n        viewComparisonsButton.addActionListener(al -\u003e\n        {\n            if (comparisonTable.getModel().getRowCount() \u003d\u003d 0)\n            {\n                new NoDataPopUp().open();\n            } else\n            {\n                ArrayList\u003cString\u003e labels \u003d new ArrayList\u003c\u003e();\n                for (int i \u003d 0; i \u003c comparisonTable.getModel().getRowCount(); i++)\n                {\n                    labels.add(comparisonTable.getModel().getValueAt(i, 1).toString());\n                }\n                ComparisonViewFrame graphView \u003d new ComparisonViewFrame(comparisons, labels);\n                graphView.open();\n            }\n        });\n        rightBottomBottomContainer.add(viewComparisonsButton);\n\n        rightContainer.add(rightTopContainer);\n        rightContainer.add(rightBottomContainer);\n        rightContainer.add(rightBottomBottomContainer);\n        rightContainer.add(rightBottomMostContainer);\n        splitLeftRight.add(rightContainer);\n        sortOrderBox.setSelectedIndex(1);\n\n        add(splitLeftRight);\n        pack();\n        built \u003d true;\n    }\n\n    public String[] columnHeaderNames \u003d new String[]{\"Date\", \"Time\", \"Scale\", \"Status\", \"Players\", \"Spectate\", \"View\"};\n    public ArrayList\u003cJCheckBoxMenuItem\u003e columnHeaders;\n\n    private void getUpdatedPopupMenu(String newItem)\n    {\n        JCheckBoxMenuItem item \u003d new JCheckBoxMenuItem(newItem);\n        item.setOpaque(true);\n        item.setBackground(Color.BLACK);\n        item.setState(true);\n        item.addActionListener(al -\u003e\n                updateTable());\n        columnHeaders.add(item);\n        table.getTableHeader().setComponentPopupMenu(getjPopupMenu());\n        updateTable();\n    }\n\n    private JCheckBoxMenuItem getCheckBoxMenuItem(String name)\n    {\n        JCheckBoxMenuItem item \u003d new JCheckBoxMenuItem(name);\n        if (!name.equals(\"Time\"))\n        {\n            item.setState(true);\n        }\n        item.setOpaque(true);\n        item.setBackground(Color.BLACK);\n        item.addActionListener(al -\u003e\n        {\n            if (built)\n            {\n                updateTable();\n            }\n        });\n        return item;\n    }\n\n    private JPopupMenu getjPopupMenu()\n    {\n        JPopupMenu baseMenu \u003d new JPopupMenu();\n\n        for (JCheckBoxMenuItem item : columnHeaders)\n        {\n            baseMenu.add(item);\n        }\n\n        List\u003cString\u003e allComboValues \u003d new ArrayList\u003c\u003e(comboPopupData.keySet());\n\n        comboStrictData \u003d new ArrayList\u003c\u003e();\n\n        JMenu addCustom \u003d new JMenu(\"Add Custom\");\n\n        JMenuItem resetCustom \u003d new JMenuItem(\"Reset Custom Columns\");\n        resetCustom.setOpaque(true);\n        resetCustom.setBackground(Color.BLACK);\n\n        resetCustom.addActionListener(al -\u003e\n        {\n            columnHeaders.clear();\n            for (String column : columnHeaderNames)\n            {\n                columnHeaders.add(getCheckBoxMenuItem(column));\n            }\n            table.getTableHeader().setComponentPopupMenu(getjPopupMenu());\n            updateTable();\n        });\n\n        for (String category : allComboValues)\n        {\n            JMenu menu \u003d new JMenu(category);\n            menu.setBackground(Color.BLACK);\n            menu.setOpaque(true);\n            if (!category.equals(\"Room Times\") \u0026\u0026 !category.equals(\"Any\"))\n            {\n                JMenu timeMenu \u003d new JMenu(\"Time\");\n                timeMenu.setBackground(Color.BLACK);\n                timeMenu.setOpaque(true);\n                for (String itemName : DataPoint.filterTimes(comboPopupData.get(category)))\n                {\n                    timeMenu.add(createMenuItemTableHeader(itemName));\n                    comboStrictData.add(itemName);\n                }\n                JMenu countMenu \u003d new JMenu(\"Misc\");\n                countMenu.setBackground(Color.BLACK);\n                countMenu.setOpaque(true);\n                for (String itemName : DataPoint.filterInt(comboPopupData.get(category)))\n                {\n                    countMenu.add(createMenuItemTableHeader(itemName));\n                    comboStrictData.add(itemName);\n                }\n                JMenu thrallMenu \u003d new JMenu(\"Thrall\");\n                thrallMenu.setBackground(Color.BLACK);\n                thrallMenu.setOpaque(true);\n                for (String itemName : DataPoint.filterThrall(comboPopupData.get(category)))\n                {\n                    thrallMenu.add(createMenuItemTableHeader(itemName));\n                    comboStrictData.add(itemName);\n                }\n                JMenu vengMenu \u003d new JMenu(\"Veng\");\n                vengMenu.setBackground(Color.BLACK);\n                vengMenu.setOpaque(true);\n                for (String itemName : DataPoint.filterVeng(comboPopupData.get(category)))\n                {\n                    vengMenu.add(createMenuItemTableHeader(itemName));\n                    comboStrictData.add(itemName);\n                }\n\n                JMenu specMenu \u003d new JMenu(\"Spec\");\n                specMenu.setBackground(Color.BLACK);\n                specMenu.setOpaque(true);\n                for (String itemName : DataPoint.filterSpecs(comboPopupData.get(category)))\n                {\n                    specMenu.add(createMenuItemTableHeader(itemName));\n                    comboStrictData.add(itemName);\n                }\n\n                menu.add(timeMenu);\n                menu.add(countMenu);\n                menu.add(thrallMenu);\n                menu.add(vengMenu);\n                menu.add(specMenu);\n            } else\n            {\n                for (String itemName : comboPopupData.get(category))\n                {\n                    menu.add(createMenuItemTableHeader(itemName));\n                    comboStrictData.add(itemName);\n                }\n            }\n            addCustom.add(menu);\n        }\n        JMenu playerSpecificMenu \u003d new JMenu(\"Player Specific\");\n        playerSpecificMenu.setBackground(Color.BLACK);\n        playerSpecificMenu.setOpaque(true);\n        String[] qualifiers \u003d new String[]{\"Maiden\", \"Bloat\", \"Nylo\", \"Sote\", \"Xarp\", \"Verz\", \"deaths\"};\n\n        for (String s : qualifiers)\n        {\n            JMenu room \u003d new JMenu(s);\n            room.setBackground(Color.BLACK);\n            room.setOpaque(true);\n            for (String qualified : DataPoint.getPlayerSpecific())\n            {\n                if (qualified.contains(s))\n                {\n                    room.add(createMenuItemTableHeader(\"Player: \" + qualified));\n                    comboStrictData.add(\"Player: \" + qualified);\n                }\n            }\n            playerSpecificMenu.add(room);\n        }\n        JMenu room \u003d new JMenu(\"Other\");\n        room.setBackground(Color.BLACK);\n        room.setOpaque(true);\n        for (String qualified : DataPoint.getPlayerSpecific())\n        {\n            boolean anyFlagged \u003d false;\n            for (String s : qualifiers)\n            {\n                if (qualified.contains(s))\n                {\n                    anyFlagged \u003d true;\n                    break;\n                }\n            }\n            if (!anyFlagged)\n            {\n                room.add(createMenuItemTableHeader(\"Player: \" + qualified));\n                comboStrictData.add(\"Player: \" + qualified);\n            }\n        }\n        playerSpecificMenu.add(room);\n\n        addCustom.setOpaque(true);\n        addCustom.setBackground(Color.BLACK);\n        addCustom.add(playerSpecificMenu);\n        baseMenu.add(addCustom);\n        baseMenu.add(resetCustom);\n\n        return baseMenu;\n    }\n\n    private int getTimeFromString(String text)\n    {\n        int ticks \u003d 0;\n        String sub \u003d text;\n        if (sub.contains(\":\"))\n        {\n            ticks +\u003d 100 * Integer.parseInt(sub.substring(0, sub.indexOf(\":\")));\n            sub \u003d text.substring(sub.indexOf(\":\") + 1);\n        }\n        ticks +\u003d (int) ((Double.parseDouble(sub) / 0.6));\n        return ticks;\n    }\n\n    public void removeFilterRow(int row)\n    {\n        activeFilters.remove(row);\n        updateFilterTable();\n    }\n\n    public void removeComparisonRow(int row)\n    {\n        comparisons.remove(row);\n        updateComparisonTable();\n    }\n\n    private void updateComparisonTable()\n    {\n        String[] columnNames \u003d {\"Sets\", \"Label\", \"\"};\n        ArrayList\u003cObject[]\u003e tableData \u003d new ArrayList\u003c\u003e();\n\n        int index \u003d 0;\n        for (ArrayList\u003cSimpleTOBData\u003e comparison : comparisons)\n        {\n            Object[] row \u003d {comparison.size() + \" raids averaging: \" + RoomUtil.time(StatisticGatherer.getOverallTimeAverage(comparison)), \"Set \" + index, \"Remove\"};\n            tableData.add(row);\n            index++;\n        }\n\n        Object[][] tableObject \u003d new Object[tableData.size()][2];\n        int count \u003d 0;\n        for (Object[] row : tableData)\n        {\n            tableObject[count] \u003d row;\n            count++;\n        }\n        comparisonTable.setModel(new DefaultTableModel(tableObject, columnNames));\n        comparisonTable.getColumn(\"Sets\").setCellEditor(new NonEditableCell(new JTextField()));\n        comparisonTable.getColumn(\"\").setCellRenderer(new ButtonRenderer());\n        comparisonTable.getColumn(\"\").setCellEditor(new ButtonEditorComparisonData(new JCheckBox(), this));\n        resizeColumnWidthFilters(comparisonTable);\n        comparisonTable.getColumn(\"\").setMaxWidth(100);\n        comparisonTable.setFillsViewportHeight(true);\n        comparisonTable.validate();\n        comparisonTable.repaint();\n    }\n\n    public void setFilterState(String state)\n    {\n        try\n        {\n            if (state.contains(\":\"))\n            {\n                String[] data \u003d state.split(\":\");\n                if (data.length \u003e 1)\n                {\n                    switch (data[0])\n                    {\n                        case \"Spectate Only\":\n                            filterSpectateOnly.setSelected(Boolean.parseBoolean(data[1]));\n                            break;\n                        case \"In Raid Only\":\n                            filterInRaidOnly.setSelected(Boolean.parseBoolean(data[1]));\n                            break;\n                        case \"Completion Only\":\n                            filterCompletionOnly.setSelected(Boolean.parseBoolean(data[1]));\n                            break;\n                        case \"Wipe/Reset Only\":\n                            filterWipeResetOnly.setSelected(Boolean.parseBoolean(data[1]));\n                            break;\n                        case \"Today Only\":\n                            filterTodayOnly.setSelected(Boolean.parseBoolean(data[1]));\n                            break;\n                        case \"Party Only\":\n                            filterPartyOnly.setSelected(Boolean.parseBoolean(data[1]));\n                            break;\n                        case \"Partial Raids\":\n                            filterPartialOnly.setSelected(Boolean.parseBoolean(data[1]));\n                            break;\n                        case \"Partial Rooms\":\n                            filterPartialData.setSelected(Boolean.parseBoolean(data[1]));\n                            break;\n                        case \"Normal Mode Only\":\n                            filterNormalOnly.setSelected(Boolean.parseBoolean(data[1]));\n                            break;\n                        case \"Scale\":\n                            if(data.length \u003e 2)\n                            {\n                                filterCheckBoxScale.setSelected(Boolean.parseBoolean(data[1]));\n                                filterComboBoxScale.setSelectedIndex(Integer.parseInt(data[2]));\n                            }\n                            break;\n                        case \"View Raid By\":\n                            viewByRaidComboBox.setEditable(true);\n                            if(!Objects.equals(data[1], \"null\"))\n                            {\n                                viewByRaidComboBox.setSelectedItem(data[1]);\n                            }\n                            else\n                            {\n                                viewByRaidComboBox.setSelectedItem(\"Challenge Time\");\n                            }\n                            viewByRaidComboBox.setEditable(false);\n                            break;\n                        case \"Table Sort By\":\n                            sortOptionsBox.setSelectedItem(data[1]);\n                            break;\n                        case \"Table Sort\":\n                            sortOrderBox.setSelectedItem(data[1]);\n                            break;\n                    }\n                }\n            }\n        }\n        catch (Exception e)\n        {\n            log.info(\"Failed to set filter state: \" + state);\n        }\n    }\n\n    public void updateFilterTable()\n    {\n        String[] columnNames \u003d {\"Filter Descriptions\", \"\"};\n        ArrayList\u003cObject[]\u003e tableData \u003d new ArrayList\u003c\u003e();\n\n        for (ImplicitFilter filter : activeFilters)\n        {\n            Object[] row \u003d {filter.getFilterDescription(), \"Remove\"};\n            tableData.add(row);\n        }\n\n        Object[][] tableObject \u003d new Object[tableData.size()][2];\n        int count \u003d 0;\n        for (Object[] row : tableData)\n        {\n            tableObject[count] \u003d row;\n            count++;\n        }\n        filterTable.setModel(new DefaultTableModel(tableObject, columnNames));\n        filterTable.setDefaultRenderer(Object.class, new StripedTableRowCellRenderer());\n        filterTable.getColumn(\"Filter Descriptions\").setCellEditor(new NonEditableCell(new JTextField()));\n        filterTable.getColumn(\"\").setCellRenderer(new ButtonRenderer());\n        filterTable.getColumn(\"\").setCellEditor(new ButtonEditorFilterData(new JCheckBox(), this));\n        resizeColumnWidthFilters(filterTable);\n        filterTable.getColumn(\"\").setMaxWidth(100);\n        filterTable.setFillsViewportHeight(true);\n        filterTableContainer.validate();\n        filterTableContainer.repaint();\n        updateTable();\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\Raids.java"},{"fileName":"RaidTrackerSidePanel.java","content":"package com.advancedraidtracker.ui;\n\nimport com.advancedraidtracker.AdvancedRaidTrackerPlugin;\nimport com.advancedraidtracker.SimpleTOBData;\nimport com.advancedraidtracker.AdvancedRaidTrackerConfig;\nimport com.advancedraidtracker.utility.wrappers.RaidsArrayWrapper;\nimport com.advancedraidtracker.utility.datautility.RaidsManager;\nimport com.google.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.PluginPanel;\nimport javax.swing.*;\nimport javax.swing.table.DefaultTableModel;\nimport java.awt.*;\nimport java.io.File;\nimport java.nio.file.Files;\nimport java.util.*;\n\nimport static com.advancedraidtracker.utility.datautility.DataWriter.PLUGIN_DIRECTORY;\n\n@Slf4j\npublic class RaidTrackerSidePanel extends PluginPanel\n{\n    private JLabel raidCountLabel;\n    private ArrayList\u003cSimpleTOBData\u003e raidsData;\n    private JTable loadRaidsTable;\n    private ArrayList\u003cRaidsArrayWrapper\u003e raidSets;\n\n    private Raids raids;\n\n    private AdvancedRaidTrackerPlugin plugin;\n    private static AdvancedRaidTrackerConfig config;\n    private static ItemManager itemManager;\n    private final ConfigManager configManager;\n\n    private JLabel pleaseWait \u003d new JLabel(\"Parsing Files...\", SwingConstants.CENTER);\n\n    @Inject\n    RaidTrackerSidePanel(AdvancedRaidTrackerPlugin plugin, AdvancedRaidTrackerConfig config, ItemManager itemManager, ClientThread clientThread, ConfigManager configManager)\n    {\n        this.configManager \u003d configManager;\n        add(pleaseWait);\n        new Thread(() -\u003e\n        {\n            RaidTrackerSidePanel.config \u003d config;\n            this.plugin \u003d plugin;\n            RaidTrackerSidePanel.itemManager \u003d itemManager;\n            raidsData \u003d new ArrayList\u003c\u003e();\n            raidsData \u003d getAllRaids();\n            raids \u003d new Raids(config, itemManager, clientThread, configManager);\n            removeAll();\n            buildComponents();\n            updateUI();\n        }).start();\n    }\n\n    private ArrayList\u003cSimpleTOBData\u003e getAllRaids()\n    {\n        ArrayList\u003cSimpleTOBData\u003e raids \u003d new ArrayList\u003c\u003e();\n        try\n        {\n            File logDirectory \u003d new File(PLUGIN_DIRECTORY);\n            File[] logFiles \u003d logDirectory.listFiles();\n            int raidCount \u003d 0;\n            if(logFiles !\u003d null)\n            {\n                for(File file : logFiles)\n                {\n                    if(file.isDirectory())\n                    {\n                        File subDirectory \u003d new File(file.getAbsolutePath()+\"/primary/\");\n                        File[] subDirectoryFiles \u003d subDirectory.listFiles();\n                        if(subDirectoryFiles !\u003d null)\n                        {\n                            raidCount +\u003d subDirectoryFiles.length;\n                        }\n                    }\n                }\n            }\n            int index \u003d 0;\n            if (logFiles !\u003d null)\n            {\n                for (File file : logFiles)\n                {\n                    if (file.isDirectory())\n                    {\n                        File subDirectory \u003d new File(file.getAbsolutePath()+\"/primary/\");\n                        File[] subLogFiles \u003d subDirectory.listFiles();\n                        if(subLogFiles !\u003d null)\n                        {\n                            for (File dataFile : subLogFiles)\n                            {\n                                if (!dataFile.isDirectory())\n                                {\n                                    if (dataFile.getName().contains(\"tobdata\"))\n                                    {\n                                        File currentFile \u003d new File(subDirectory.getAbsolutePath() + \"/\" + dataFile.getName());\n                                        parseLogFile(raids, currentFile, subDirectory.getAbsolutePath() + \"/\" + dataFile.getName());\n                                        index++;\n                                        if(raidCountLabel !\u003d null)\n                                        {\n                                            raidCountLabel.setText(\"Refreshing...(\" + index + \"/\" + raidCount + \")\");\n                                        }\n                                        else if(pleaseWait !\u003d null)\n                                        {\n                                            pleaseWait.setText(\"Parsing Files...(\" + index + \"/\" + raidCount + \")\");\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        catch (Exception e)\n        {\n            log.info(\"Could not retrieve raids\");\n            e.printStackTrace();\n        }\n        raids.sort(Comparator.comparing(SimpleTOBData::getDate));\n        return raids;\n    }\n\n    public static void parseLogFile(ArrayList\u003cSimpleTOBData\u003e raids, File currentFile, String filePath) throws Exception\n    {\n        Scanner logReader \u003d new Scanner(Files.newInputStream(currentFile.toPath()));\n        ArrayList\u003cString\u003e raid \u003d new ArrayList\u003c\u003e();\n        boolean raidActive \u003d false;\n        boolean spectate \u003d false;\n        boolean lateStart \u003d false;\n        while (logReader.hasNextLine())\n        {\n            String line \u003d logReader.nextLine();\n            String[] lineSplit \u003d line.split(\",\");\n            if (!raidActive)\n            {\n                if (lineSplit.length \u003e 3)\n                {\n                    if (Integer.parseInt(lineSplit[3]) \u003d\u003d 0)\n                    {\n                        raid.add(line);\n                        raidActive \u003d true;\n                        spectate \u003d false;\n                        lateStart \u003d false;\n                    }\n                }\n            } else\n            {\n                if (lineSplit.length \u003e 3)\n                {\n                    int value \u003d Integer.parseInt(lineSplit[3]);\n                    if(value !\u003d 0)\n                    {\n                        if(value !\u003d 801 \u0026\u0026 value !\u003d 576 \u0026\u0026 value !\u003d 587)\n                        {\n                            if (Integer.parseInt(lineSplit[3]) \u003d\u003d 99 \u0026\u0026 !spectate)\n                            {\n                                spectate \u003d true;\n                                raid.add(line);\n                            } else if (value \u003d\u003d 98 \u0026\u0026 !lateStart)\n                            {\n                                lateStart \u003d true;\n                                raid.add(line);\n                            } else if (Integer.parseInt(lineSplit[3]) \u003d\u003d 4)\n                            {\n                                raid.add(line);\n                                raidActive \u003d false;\n                                raids.add(new SimpleTOBData(raid.toArray(new String[0]), filePath, currentFile.getName()));\n                                raid.clear();\n                            } else if (value !\u003d 99 \u0026\u0026 value !\u003d 98)\n                            {\n                                raid.add(line);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        logReader.close();\n    }\n\n    private void buildComponents()\n    {\n        JPanel container \u003d new JPanel();\n        JPanel primaryContainer \u003d new JPanel();\n\n        primaryContainer.setLayout(new GridLayout(5, 1));\n\n        JButton viewRaidsButton \u003d new JButton(\"View All Raids\");\n        JButton refreshRaidsButton \u003d new JButton(\"Refresh\");\n\n        JButton tableRaidsButton \u003d new JButton(\"View Saved Raids From Table\");\n\n        viewRaidsButton.addActionListener(\n                al -\u003e\n                        new Thread(() -\u003e\n                        {\n                            raids \u003d new Raids(config, itemManager, plugin.clientThread, configManager);\n                            raids.createFrame(raidsData);\n                            raids.getContentPane().setBackground(Color.BLACK);\n                            raids.repaint();\n                            raids.open();\n                        }).start());\n\n        refreshRaidsButton.addActionListener(\n                al -\u003e\n                        new Thread(() -\u003e\n                        {\n                            viewRaidsButton.setEnabled(false);\n                            tableRaidsButton.setEnabled(false);\n                            raidCountLabel.setText(\"Refreshing, Please Wait...\");\n                            raidsData \u003d getAllRaids();\n                            DefaultTableModel model \u003d getTableModel();\n                            loadRaidsTable.setModel(model);\n                            if(raids !\u003d null)\n                            {\n                                raids.clearData();\n                                raids \u003d null;\n                            }\n                            viewRaidsButton.setEnabled(true);\n                            tableRaidsButton.setEnabled(true);\n                            updateRaidCountLabel();\n                        }).start());\n\n        tableRaidsButton.addActionListener(\n                al -\u003e\n                {\n                    raids \u003d new Raids(config, itemManager, plugin.clientThread, configManager);\n                    raids.createFrame(getTableData());\n                    raids.getContentPane().setBackground(Color.BLACK);\n                    raids.repaint();\n                    raids.open();\n                }\n        );\n\n        JButton livePanelButton \u003d new JButton(\"View Live Room\");\n        livePanelButton.addActionListener(al -\u003e\n                plugin.openLiveFrame());\n\n        raidCountLabel \u003d new JLabel(\"\", SwingConstants.CENTER);\n        updateRaidCountLabel();\n        primaryContainer.add(raidCountLabel);\n        primaryContainer.add(refreshRaidsButton);\n        primaryContainer.add(viewRaidsButton);\n        primaryContainer.add(tableRaidsButton);\n        primaryContainer.add(livePanelButton);\n\n        DefaultTableModel model \u003d getTableModel();\n        loadRaidsTable \u003d new JTable(model)\n        {\n            @Override\n            public Class\u003c?\u003e getColumnClass(int column)\n            {\n                if (column \u003d\u003d 0)\n                {\n                    return String.class;\n                }\n                return Boolean.class;\n            }\n        };\n\n        loadRaidsTable.setPreferredScrollableViewportSize(loadRaidsTable.getPreferredScrollableViewportSize());\n        JScrollPane scrollPane \u003d new JScrollPane(loadRaidsTable);\n        scrollPane.setPreferredSize(new Dimension(225, scrollPane.getPreferredSize().height));\n        container.add(primaryContainer);\n        container.add(scrollPane);\n        add(container);\n    }\n\n    private DefaultTableModel getTableModel()\n    {\n        Object[] columnNames \u003d {\"File Name\", \"Include?\"};\n        raidSets \u003d RaidsManager.getRaidsSets();\n        Object[][] tableData \u003d new Object[raidSets.size()][2];\n        for (int i \u003d 0; i \u003c raidSets.size(); i++)\n        {\n            tableData[i] \u003d new Object[]{raidSets.get(i).filename, false};\n        }\n        return new DefaultTableModel(tableData, columnNames);\n    }\n\n    private ArrayList\u003cSimpleTOBData\u003e getTableData()\n    {\n        ArrayList\u003cString\u003e includedSets \u003d new ArrayList\u003c\u003e();\n        for (int i \u003d 0; i \u003c loadRaidsTable.getRowCount(); i++)\n        {\n            if ((boolean) loadRaidsTable.getValueAt(i, 1))\n            {\n                includedSets.add((String) loadRaidsTable.getValueAt(i, 0));\n            }\n        }\n        ArrayList\u003cSimpleTOBData\u003e collectedRaids \u003d new ArrayList\u003c\u003e();\n        for (RaidsArrayWrapper set : raidSets)\n        {\n            for (String s : includedSets)\n            {\n                if (s.equals(set.filename))\n                {\n                    collectedRaids.addAll(set.data);\n                }\n            }\n        }\n        return collectedRaids;\n    }\n\n    private void updateRaidCountLabel()\n    {\n        raidCountLabel.setText(\"Raids Found: \" + raidsData.size());\n    }\n\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\RaidTrackerSidePanel.java"},{"fileName":"StatisticRoomPanel.java","content":"package com.advancedraidtracker.ui.statistics;\n\nimport com.advancedraidtracker.SimpleTOBData;\nimport com.advancedraidtracker.utility.RoomUtil;\nimport com.advancedraidtracker.utility.datautility.DataPoint;\nimport com.advancedraidtracker.utility.StatisticGatherer;\nimport lombok.extern.slf4j.Slf4j;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.util.ArrayList;\nimport java.util.Objects;\n\nimport static com.advancedraidtracker.utility.UISwingUtility.getDarkJLabel;\n\n@Slf4j\npublic class StatisticRoomPanel extends JPanel\n{\n    public enum stat\n    {\n        AVERAGE,\n        MEDIAN,\n        MODE,\n        MINIMUM,\n        MAXIMUM\n    }\n\n    private final ArrayList\u003cJLabel\u003e timeLabels;\n    private final ArrayList\u003cString\u003e labelNames;\n    private final stat type;\n\n    public StatisticRoomPanel(ArrayList\u003cSimpleTOBData\u003e data, stat type, DataPoint.rooms room)\n    {\n        super();\n        JPanel subPanel \u003d new JPanel();\n        this.type \u003d type;\n        timeLabels \u003d new ArrayList\u003c\u003e();\n        ArrayList\u003cJLabel\u003e nameLabels \u003d new ArrayList\u003c\u003e();\n        labelNames \u003d DataPoint.getTimeNamesByRoom(room);\n        for (String s : labelNames)\n        {\n            nameLabels.add(getDarkJLabel(s.substring(s.indexOf(\u0027 \u0027) + 1), SwingConstants.LEFT));\n            timeLabels.add(getDarkJLabel(\"-\", SwingConstants.RIGHT));\n        }\n        String borderString \u003d \"\";\n        switch (type)\n        {\n            case AVERAGE:\n                borderString \u003d \"Average\";\n                break;\n            case MEDIAN:\n                borderString \u003d \"Median\";\n                break;\n            case MODE:\n                borderString \u003d \"Mode\";\n                break;\n            case MAXIMUM:\n                borderString \u003d \"Maximum\";\n                break;\n            case MINIMUM:\n                borderString \u003d \"Minimum\";\n                break;\n        }\n        setLayout(new BorderLayout());\n        setBorder(BorderFactory.createTitledBorder(borderString));\n        subPanel.setLayout(new GridLayout(0, 2));\n        for (int i \u003d 0; i \u003c labelNames.size(); i++)\n        {\n            subPanel.add(nameLabels.get(i));\n            subPanel.add(timeLabels.get(i));\n        }\n        for (int i \u003d labelNames.size(); i \u003c 14; i++)\n        {\n            subPanel.add(new JLabel(\"\"));\n            subPanel.add(new JLabel(\"\"));\n        }\n        subPanel.setPreferredSize(new Dimension(100, 200));\n        JScrollPane scrollPane \u003d new JScrollPane(subPanel);\n        scrollPane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);\n\n        add(scrollPane);\n        updateLabels(data);\n    }\n\n    public void updateLabels(ArrayList\u003cSimpleTOBData\u003e data)\n    {\n        for (int i \u003d 0; i \u003c labelNames.size(); i++)\n        {\n            ArrayList\u003cInteger\u003e collectedData \u003d new ArrayList\u003c\u003e();\n            for (SimpleTOBData d : data)\n            {\n                if (d.getTimeAccurate(Objects.requireNonNull(DataPoint.getValue(labelNames.get(i)))))\n                {\n                    if (Objects.requireNonNull(DataPoint.getValue(labelNames.get(i))).type !\u003d DataPoint.types.TIME || d.getValue(labelNames.get(i)) !\u003d 0)\n                    {\n                        collectedData.add(d.getValue(labelNames.get(i)));\n                    }\n                }\n            }\n            double statistic \u003d 0;\n            switch (type)\n            {\n                case AVERAGE:\n                    statistic \u003d StatisticGatherer.getGenericAverage(collectedData);\n                    break;\n                case MEDIAN:\n                    statistic \u003d StatisticGatherer.getGenericMedian(collectedData);\n                    break;\n                case MODE:\n                    statistic \u003d StatisticGatherer.getGenericMode(collectedData);\n                    break;\n                case MINIMUM:\n                    statistic \u003d StatisticGatherer.getGenericMin(collectedData, true);\n                    break;\n                case MAXIMUM:\n                    statistic \u003d StatisticGatherer.getGenericMax(collectedData);\n                    break;\n            }\n            timeLabels.get(i).setText(RoomUtil.time(statistic));\n        }\n        validate();\n        repaint();\n    }\n\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\statistics\\StatisticRoomPanel.java"},{"fileName":"StatisticTab.java","content":"package com.advancedraidtracker.ui.statistics;\n\nimport com.advancedraidtracker.SimpleTOBData;\nimport com.advancedraidtracker.utility.datautility.DataPoint;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.util.ArrayList;\n\npublic class StatisticTab extends JPanel\n{\n    private final ArrayList\u003cStatisticRoomPanel\u003e panels;\n    DataPoint.rooms room;\n    ArrayList\u003cSimpleTOBData\u003e data;\n\n    public StatisticTab(ArrayList\u003cSimpleTOBData\u003e data, DataPoint.rooms room)\n    {\n        this.room \u003d room;\n        this.data \u003d data;\n        JPanel panel \u003d new JPanel();\n        panels \u003d new ArrayList\u003c\u003e();\n        panel.setLayout(new GridLayout(2, 3));\n        panels.add(new StatisticRoomPanel(data, StatisticRoomPanel.stat.AVERAGE, room));\n        panels.add(new StatisticRoomPanel(data, StatisticRoomPanel.stat.MEDIAN, room));\n        panels.add(new StatisticRoomPanel(data, StatisticRoomPanel.stat.MODE, room));\n        panels.add(new StatisticRoomPanel(data, StatisticRoomPanel.stat.MINIMUM, room));\n        panels.add(new StatisticRoomPanel(data, StatisticRoomPanel.stat.MAXIMUM, room));\n        setLayout(new GridLayout(2, 3));\n        for (StatisticRoomPanel roomPanel : panels)\n        {\n            add(roomPanel);\n        }\n        JPanel statistics \u003d new JPanel();\n        statistics.setBorder(BorderFactory.createTitledBorder(\"Statistics\"));\n        add(statistics);\n\n        validate();\n        repaint();\n    }\n\n    public void updateTab(ArrayList\u003cSimpleTOBData\u003e data)\n    {\n        for (StatisticRoomPanel roomPanel : panels)\n        {\n            roomPanel.updateLabels(data);\n        }\n    }\n\n\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\statistics\\StatisticTab.java"},{"fileName":"ViewTOBRaid.java","content":"package com.advancedraidtracker.ui.viewraid;\n\nimport com.advancedraidtracker.SimpleTOBData;\nimport com.advancedraidtracker.ui.BaseFrame;\nimport com.advancedraidtracker.utility.RoomUtil;\nimport com.advancedraidtracker.utility.datautility.DataPoint;\nimport lombok.extern.slf4j.Slf4j;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.util.Calendar;\n\nimport static com.advancedraidtracker.utility.datautility.DataPoint.NYLO_LAST_DEAD;\n\n@Slf4j\npublic class ViewTOBRaid extends BaseFrame\n{\n    String INCOMPLETE_MARKER \u003d \"-\";\n\n    public ViewTOBRaid(SimpleTOBData data)\n    {\n        String red \u003d \"\u003chtml\u003e\u003cfont color\u003d\u0027#FF0000\u0027\u003e\";\n        String soft \u003d \"\u003chtml\u003e\u003cfont color\u003d\u0027#666666\u0027\u003e\";\n        String dark \u003d \"\u003chtml\u003e\u003cfont color\u003d\u0027#404040\u0027\u003e\";\n        String green \u003d \"\u003chtml\u003e\u003cfont color\u003d\u0027#33FF33\u0027\u003e\";\n        String blue \u003d \"\u003chtml\u003e\u003cfont color\u003d\u0027#6666DD\u0027\u003e\";\n        String white \u003d \"\u003chtml\u003e\u003cfont color\u003d\u0027#BBBBBB\u0027\u003e\";\n\n        setTitle(\"View Raid\");\n        setLayout(new BoxLayout(getContentPane(), BoxLayout.Y_AXIS));\n\n        JPanel thisSubPanel \u003d new JPanel();\n        thisSubPanel.setLayout(new GridLayout(2, 3));\n\n        String maidenColor \u003d (data.maidenTimeAccurate) ? green : (data.maidenStartAccurate || data.maidenEndAccurate) ? blue : red;\n        String bloatColor \u003d (data.bloatTimeAccurate) ? green : (data.bloatStartAccurate || data.bloatEndAccurate) ? blue : red;\n        String nyloColor \u003d (data.nyloTimeAccurate) ? green : (data.nyloStartAccurate || data.nyloEndAccurate) ? blue : red;\n        String soteColor \u003d (data.soteTimeAccurate) ? green : (data.soteStartAccurate || data.soteEndAccurate) ? blue : red;\n        String xarpColor \u003d (data.xarpTimeAccurate) ? green : (data.xarpStartAccurate || data.xarpEndAccurate) ? blue : red;\n        String verzikColor \u003d (data.verzikTimeAccurate) ? green : (data.verzikStartAccurate || data.verzikEndAccurate) ? blue : red;\n\n        String maidenBodyColor \u003d (data.maidenTimeAccurate) ? white : (data.maidenStartAccurate || data.maidenEndAccurate) ? soft : dark;\n        String bloatBodyColor \u003d (data.bloatTimeAccurate) ? white : (data.bloatStartAccurate || data.bloatEndAccurate) ? soft : dark;\n        String nyloBodyColor \u003d (data.nyloTimeAccurate) ? white : (data.nyloStartAccurate || data.nyloEndAccurate) ? soft : dark;\n        String soteBodyColor \u003d (data.soteTimeAccurate) ? white : (data.soteStartAccurate || data.soteEndAccurate) ? soft : dark;\n        String xarpBodyColor \u003d (data.xarpTimeAccurate) ? white : (data.xarpStartAccurate || data.xarpEndAccurate) ? soft : dark;\n        String verzikBodyColor \u003d (data.verzikTimeAccurate) ? white : (data.verzikStartAccurate || data.verzikEndAccurate) ? soft : dark;\n\n        JPanel maidenPanel \u003d new JPanel();\n        maidenPanel.setLayout(new BorderLayout());\n\n        int maidenEntry \u003d 0;\n        int maidenSplit \u003d data.getMaidenTime();\n\n        int bloatEntry \u003d maidenEntry + maidenSplit;\n        int bloatSplit \u003d data.getBloatTime();\n\n        int nyloEntry \u003d bloatEntry + bloatSplit;\n        int nyloSplit \u003d data.getNyloTime();\n\n        int soteEntry \u003d nyloEntry + nyloSplit;\n        int soteSplit \u003d data.getSoteTime();\n\n        int xarpEntry \u003d soteEntry + soteSplit;\n        int xarpSplit \u003d data.getXarpTime();\n\n        int verzikEntry \u003d xarpEntry + xarpSplit;\n\n        String bloatSplitStr \u003d RoomUtil.time(bloatSplit);\n\n        String nyloEntryStr \u003d RoomUtil.time(nyloEntry);\n        String nyloSplitStr \u003d RoomUtil.time(nyloSplit);\n\n        String soteEntryStr \u003d RoomUtil.time(soteEntry);\n        String soteSplitStr \u003d RoomUtil.time(soteSplit);\n\n        String xarpEntryStr \u003d RoomUtil.time(xarpEntry);\n        String xarpSplitStr \u003d RoomUtil.time(xarpSplit);\n\n        String verzikEntryStr \u003d RoomUtil.time(verzikEntry);\n\n        maidenPanel.setBorder(BorderFactory.createTitledBorder(maidenColor + \"Maiden\" + ((data.maidenScuffed) ? \" (Scuffed after \" + data.firstMaidenCrabScuffed + \")\" : \"\")));\n\n        JPanel bloatPanel \u003d new JPanel();\n        bloatPanel.setLayout(new BorderLayout());\n        bloatPanel.setBorder(BorderFactory.createTitledBorder(bloatColor + \"Bloat - \" + bloatBodyColor + nyloEntryStr + \" (\" + bloatSplitStr + \")\"));\n\n        JPanel nylocasPanel \u003d new JPanel();\n        nylocasPanel.setLayout(new BorderLayout());\n        nylocasPanel.setBorder(BorderFactory.createTitledBorder(nyloColor + \"Nylocas - \" + nyloBodyColor + soteEntryStr + \" (\" + nyloSplitStr + \")\"));\n\n        JPanel sotetsegPanel \u003d new JPanel();\n        sotetsegPanel.setLayout(new BorderLayout());\n        sotetsegPanel.setBorder(BorderFactory.createTitledBorder(soteColor + \"Sotetseg - \" + soteBodyColor + xarpEntryStr + \" (\" + soteSplitStr + \")\"));\n\n        JPanel xarpusPanel \u003d new JPanel();\n        xarpusPanel.setLayout(new BorderLayout());\n        xarpusPanel.setBorder(BorderFactory.createTitledBorder(xarpColor + \"Xarpus - \" + xarpBodyColor + verzikEntryStr + \" (\" + xarpSplitStr + \")\"));\n\n        JPanel verzikPanel \u003d new JPanel();\n        verzikPanel.setLayout(new BorderLayout());\n        verzikPanel.setBorder(BorderFactory.createTitledBorder(verzikColor + \"Verzik\"));\n\n        JPanel maidenSubPanel \u003d new JPanel();\n        GridLayout gl \u003d new GridLayout(10, 2);\n        maidenSubPanel.setLayout(gl);\n\n        maidenSubPanel.add(new JLabel(maidenBodyColor + \"Blood Spawned (thrown)\"));\n        maidenSubPanel.add(new JLabel(maidenBodyColor + data.getValue(DataPoint.MAIDEN_BLOOD_SPAWNED) + \" (\" + data.getValue(DataPoint.MAIDEN_BLOOD_THROWN) + \")\"));\n\n\n        maidenSubPanel.add(new JLabel(maidenBodyColor + \"Defense\"));\n        maidenSubPanel.add(new JLabel(maidenBodyColor + ((data.maidenDefenseAccurate) ? data.getValue(DataPoint.MAIDEN_DEFENSE) : INCOMPLETE_MARKER)));\n\n        maidenSubPanel.add(new JLabel(maidenBodyColor + \"Crabs leaked\"));\n        maidenSubPanel.add(new JLabel(maidenBodyColor + data.getValue(DataPoint.MAIDEN_CRABS_LEAKED) + \", HP: \" + data.getValue(DataPoint.MAIDEN_HP_HEALED)));\n\n        maidenSubPanel.add(new JLabel(maidenBodyColor + \"100% leaked\"));\n        maidenSubPanel.add(new JLabel(maidenBodyColor + data.getValue(DataPoint.MAIDEN_CRABS_LEAKED_FULL_HP)));\n\n        maidenSubPanel.add(new JLabel(maidenBodyColor + \"Scuffed?\"));\n        maidenSubPanel.add(new JLabel(maidenBodyColor + ((data.maidenScuffed) ? data.firstMaidenCrabScuffed : \"No\")));\n\n        maidenSubPanel.add(new JLabel(maidenBodyColor + \"Deaths\"));\n        maidenSubPanel.add(new JLabel(maidenBodyColor + data.getValue(DataPoint.MAIDEN_DEATHS)));\n\n        maidenSubPanel.add(new JLabel(maidenBodyColor + \"70s\"));\n        maidenSubPanel.add(new JLabel(maidenBodyColor + RoomUtil.time(data.getValue(DataPoint.MAIDEN_70_SPLIT))));\n\n        maidenSubPanel.add(new JLabel(maidenBodyColor + \"50s\"));\n        maidenSubPanel.add(new JLabel(maidenBodyColor + RoomUtil.time(data.getValue(DataPoint.MAIDEN_50_SPLIT)) + \" (\" + RoomUtil.time(data.getValue(DataPoint.MAIDEN_50_SPLIT) - data.getValue(DataPoint.MAIDEN_70_SPLIT)) + \")\"));\n\n        maidenSubPanel.add(new JLabel(maidenBodyColor + \"30s\"));\n        maidenSubPanel.add(new JLabel(maidenBodyColor + RoomUtil.time(data.getValue(DataPoint.MAIDEN_30_SPLIT)) + \" (\" + RoomUtil.time(data.getValue(DataPoint.MAIDEN_30_SPLIT) - data.getValue(DataPoint.MAIDEN_50_SPLIT)) + \")\"));\n\n        maidenSubPanel.add(new JLabel(maidenBodyColor + \"Room time\"));\n        maidenSubPanel.add(new JLabel(maidenBodyColor + RoomUtil.time(data.getMaidenTime()) + \" (\" + RoomUtil.time(data.getMaidenTime() - data.getValue(DataPoint.MAIDEN_30_SPLIT)) + \")\"));\n\n        JPanel bloatSubPanel \u003d new JPanel();\n        bloatSubPanel.setLayout(new GridLayout(8, 2));\n\n        bloatSubPanel.add(new JLabel(bloatBodyColor + \"Downs\"));\n        bloatSubPanel.add(new JLabel(bloatBodyColor + data.getValue(DataPoint.BLOAT_DOWNS)));\n\n        bloatSubPanel.add(new JLabel(bloatBodyColor + \"Deaths (1st walk)\"));\n        bloatSubPanel.add(new JLabel(bloatBodyColor + data.getValue(DataPoint.BLOAT_FIRST_WALK_DEATHS)));\n\n        bloatSubPanel.add(new JLabel(bloatBodyColor + \"Deaths (Total)\"));\n        bloatSubPanel.add(new JLabel(bloatBodyColor + data.getValue(DataPoint.BLOAT_DEATHS)));\n\n        bloatSubPanel.add(new JLabel(bloatBodyColor + \"Defense (1st walk)\"));\n        bloatSubPanel.add(new JLabel(bloatBodyColor + ((data.bloatDefenseAccurate) ?String.valueOf(data.getValue(DataPoint.BLOAT_DEFENSE)) : INCOMPLETE_MARKER)));\n\n        bloatSubPanel.add(new JLabel(bloatBodyColor + \"Scythes 1st walk\"));\n        bloatSubPanel.add(new JLabel(bloatBodyColor + data.getValue(DataPoint.BLOAT_FIRST_WALK_SCYTHES)));\n\n        bloatSubPanel.add(new JLabel(bloatBodyColor + \"HP % 1st down\"));\n\n        bloatSubPanel.add(new JLabel(bloatBodyColor + (((double) data.getValue(DataPoint.BLOAT_HP_FIRST_DOWN))) + \"%\"));\n\n        bloatSubPanel.add(new JLabel(bloatBodyColor + \"1st down time\"));\n        bloatSubPanel.add(new JLabel(bloatBodyColor + data.getValue(DataPoint.BLOAT_FIRST_DOWN_TIME)));\n\n        bloatSubPanel.add(new JLabel(bloatBodyColor + \"Room time\"));\n        bloatSubPanel.add(new JLabel(bloatBodyColor + RoomUtil.time(data.getBloatTime())));\n\n\n        JPanel nylocasSubPanel \u003d new JPanel();\n        nylocasSubPanel.setLayout(new GridLayout(9, 2));\n\n        nylocasSubPanel.add(new JLabel(nyloBodyColor + \"Stalls\"));\n        nylocasSubPanel.add(new JLabel(nyloBodyColor + data.getValue(DataPoint.NYLO_STALLS_PRE_20) + \" \" + data.getValue(DataPoint.NYLO_STALLS_POST_20) + \" (\" + (data.getValue(DataPoint.NYLO_STALLS_TOTAL)) + \")\"));\n\n        String nyloSplits \u003d \"\u003chtml\u003e\u003cfont color\u003d\u0027#999999\u0027\u003e\"\n                + data.getValue(DataPoint.NYLO_SPLITS_MELEE)\n                + \"\u003cfont color\u003d\u0027#00AA00\u0027\u003e \"\n                + data.getValue(DataPoint.NYLO_SPLITS_RANGE)\n                + \"\u003cfont color \u003d\u0027#2299FF\u0027\u003e \"\n                + data.getValue(DataPoint.NYLO_SPLITS_MAGE);\n        if (nyloBodyColor.equals(dark))\n        {\n            nyloSplits \u003d nyloBodyColor\n                    + data.getValue(DataPoint.NYLO_SPLITS_MELEE) + \" \"\n                    + data.getValue(DataPoint.NYLO_SPLITS_RANGE) + \" \"\n                    + data.getValue(DataPoint.NYLO_SPLITS_MAGE);\n        } else if (nyloBodyColor.equals(soft))\n        {\n            nyloSplits \u003d \"\u003chtml\u003e\u003cfont color\u003d\u0027#444444\u0027\u003e\"\n                    + data.getValue(DataPoint.NYLO_SPLITS_MELEE) + \"\u003cfont color\u003d\u0027#008800\u0027\u003e \"\n                    + data.getValue(DataPoint.NYLO_SPLITS_RANGE) + \"\u003cfont color \u003d\u0027#0066CC\u0027\u003e \"\n                    + data.getValue(DataPoint.NYLO_SPLITS_MAGE);\n        }\n        nylocasSubPanel.add(new JLabel(nyloBodyColor + \"Splits\"));\n        nylocasSubPanel.add(new JLabel(nyloSplits));\n\n        String nyloRotations \u003d \"\u003chtml\u003e\u003cfont color\u003d\u0027#999999\u0027\u003e\"\n                + data.getValue(DataPoint.NYLO_ROTATIONS_MELEE) + \"\u003cfont color\u003d\u0027#00AA00\u0027\u003e \"\n                + data.getValue(DataPoint.NYLO_ROTATIONS_RANGE) + \"\u003cfont color \u003d\u0027#2299FF\u0027\u003e \"\n                + data.getValue(DataPoint.NYLO_ROTATIONS_MAGE);\n\n        if (nyloBodyColor.equals(dark))\n        {\n            nyloRotations \u003d nyloBodyColor\n                    + data.getValue(DataPoint.NYLO_ROTATIONS_MELEE) + \" \"\n                    + data.getValue(DataPoint.NYLO_ROTATIONS_RANGE) + \" \"\n                    + data.getValue(DataPoint.NYLO_ROTATIONS_MAGE);\n        } else if (nyloBodyColor.equals(soft))\n        {\n            nyloRotations \u003d \"\u003chtml\u003e\u003cfont color\u003d\u0027#444444\u0027\u003e\"\n                    + data.getValue(DataPoint.NYLO_ROTATIONS_MELEE) + \"\u003cfont color\u003d\u0027#008800\u0027\u003e \"\n                    + data.getValue(DataPoint.NYLO_ROTATIONS_RANGE) + \"\u003cfont color \u003d\u0027#0066CC\u0027\u003e \"\n                    + data.getValue(DataPoint.NYLO_ROTATIONS_MAGE);\n        }\n\n        nylocasSubPanel.add(new JLabel(nyloBodyColor + \"Rotations\"));\n        nylocasSubPanel.add(new JLabel(nyloRotations));\n\n        nylocasSubPanel.add(new JLabel(nyloBodyColor + \"Defense\"));\n        nylocasSubPanel.add(new JLabel(nyloBodyColor + ((data.nyloDefenseAccurate) ? String.valueOf(data.getValue(DataPoint.NYLO_DEFENSE)) : INCOMPLETE_MARKER)));\n\n        nylocasSubPanel.add(new JLabel(nyloBodyColor + \"Deaths\"));\n        nylocasSubPanel.add(new JLabel(nyloBodyColor + data.getValue(DataPoint.NYLO_DEATHS)));\n\n        nylocasSubPanel.add(new JLabel(nyloBodyColor + \"Last wave\"));\n        nylocasSubPanel.add(new JLabel(nyloBodyColor + RoomUtil.time(data.getValue(DataPoint.NYLO_LAST_WAVE))));\n\n        nylocasSubPanel.add(new JLabel(nyloBodyColor + \"Clean up\"));\n        nylocasSubPanel.add(new JLabel(nyloBodyColor + RoomUtil.time(data.getValue(NYLO_LAST_DEAD)) + \" (\" + RoomUtil.time(data.getValue(NYLO_LAST_DEAD) - data.getValue(DataPoint.NYLO_LAST_WAVE)) + \")\"));\n\n        nylocasSubPanel.add(new JLabel(nyloBodyColor + \"Boss Spawn\"));\n        nylocasSubPanel.add(new JLabel(nyloBodyColor + RoomUtil.time(data.getValue(DataPoint.NYLO_BOSS_SPAWN)) + \" (\" + RoomUtil.time(data.getValue(DataPoint.NYLO_BOSS_SPAWN) - data.getValue(NYLO_LAST_DEAD)) + \")\"));\n\n        nylocasSubPanel.add(new JLabel(nyloBodyColor + \"Time\"));\n        nylocasSubPanel.add(new JLabel(nyloBodyColor + RoomUtil.time(data.getNyloTime()) + \" (\" + RoomUtil.time(data.getNyloTime() - data.getValue(DataPoint.NYLO_BOSS_SPAWN)) + \")\"));\n\n        JPanel sotetsegSubPanel \u003d new JPanel();\n        sotetsegSubPanel.setLayout(new GridLayout(8, 2));\n\n        sotetsegSubPanel.add(new JLabel(soteBodyColor + \"Hammers hit\"));\n        sotetsegSubPanel.add(new JLabel(soteBodyColor + ((data.soteDefenseAccurate) ? data.getValue(DataPoint.SOTE_SPECS_P1) + \" \" + data.getValue(DataPoint.SOTE_SPECS_P2) + \" \" + data.getValue(DataPoint.SOTE_SPECS_P3) + \" (\" + (data.getValue(DataPoint.SOTE_SPECS_TOTAL)) + \")\" : INCOMPLETE_MARKER)));\n\n        sotetsegSubPanel.add(new JLabel(soteBodyColor + \"Deaths\"));\n        sotetsegSubPanel.add(new JLabel(soteBodyColor + data.getValue(DataPoint.SOTE_DEATHS)));\n\n        sotetsegSubPanel.add(new JLabel(soteBodyColor + \"First Maze Start\"));\n        sotetsegSubPanel.add(new JLabel(soteBodyColor + RoomUtil.time(data.getValue(DataPoint.SOTE_P1_SPLIT))));\n\n        sotetsegSubPanel.add(new JLabel(soteBodyColor + \"First Maze End\"));\n        sotetsegSubPanel.add(new JLabel(soteBodyColor + RoomUtil.time(data.getValue(DataPoint.SOTE_M1_SPLIT)) + \" (\" + RoomUtil.time(data.getValue(DataPoint.SOTE_M1_SPLIT) - data.getValue(DataPoint.SOTE_P1_SPLIT)) + \")\"));\n\n        sotetsegSubPanel.add(new JLabel(soteBodyColor + \"Second Maze Start\"));\n        sotetsegSubPanel.add(new JLabel(soteBodyColor + RoomUtil.time(data.getValue(DataPoint.SOTE_P2_SPLIT)) + \" (\" + RoomUtil.time(data.getValue(DataPoint.SOTE_P2_SPLIT) - data.getValue(DataPoint.SOTE_M1_SPLIT)) + \")\"));\n\n        sotetsegSubPanel.add(new JLabel(soteBodyColor + \"Second Maze End\"));\n        sotetsegSubPanel.add(new JLabel(soteBodyColor + RoomUtil.time(data.getValue(DataPoint.SOTE_M2_SPLIT)) + \" (\" + RoomUtil.time(data.getValue(DataPoint.SOTE_M2_SPLIT) - data.getValue(DataPoint.SOTE_P2_SPLIT)) + \")\"));\n\n        sotetsegSubPanel.add(new JLabel(soteBodyColor + \"Time\"));\n        sotetsegSubPanel.add(new JLabel(soteBodyColor + RoomUtil.time(data.getSoteTime()) + \" (\" + RoomUtil.time(data.getSoteTime() - data.getValue(DataPoint.SOTE_M2_SPLIT)) + \")\"));\n\n        JPanel xarpusSubPanel \u003d new JPanel();\n        xarpusSubPanel.setLayout(new GridLayout(8, 2));\n\n        xarpusSubPanel.add(new JLabel(xarpBodyColor + \"Defense\"));\n        xarpusSubPanel.add(new JLabel(xarpBodyColor + ((data.xarpDefenseAccurate) ? data.getValue(DataPoint.XARP_DEFENSE) : INCOMPLETE_MARKER)));\n\n        xarpusSubPanel.add(new JLabel(xarpBodyColor + \"Deaths\"));\n        xarpusSubPanel.add(new JLabel(xarpBodyColor + data.getValue(DataPoint.XARP_DEATHS)));\n\n        xarpusSubPanel.add(new JLabel(xarpBodyColor + \"Healing\"));\n        xarpusSubPanel.add(new JLabel(xarpBodyColor + data.getValue(DataPoint.XARP_HEALING)));\n\n        xarpusSubPanel.add(new JLabel(xarpBodyColor + \"Screech\"));\n        xarpusSubPanel.add(new JLabel(xarpBodyColor + RoomUtil.time(data.getValue(DataPoint.XARP_SCREECH))));\n\n        xarpusSubPanel.add(new JLabel(xarpBodyColor + \"Time\"));\n        xarpusSubPanel.add(new JLabel(xarpBodyColor + RoomUtil.time(data.getXarpTime()) + \" (\" + RoomUtil.time(data.getXarpTime() - data.getValue(DataPoint.XARP_SCREECH)) + \")\"));\n\n        xarpusSubPanel.add(new JLabel(\"\"));\n        xarpusSubPanel.add(new JLabel(\"\"));\n\n        xarpusSubPanel.add(new JLabel(\"\"));\n        xarpusSubPanel.add(new JLabel(\"\"));\n\n        xarpusSubPanel.add(new JLabel(\"\"));\n        xarpusSubPanel.add(new JLabel(\"\"));\n\n        JPanel verzikSubPanel \u003d new JPanel();\n        verzikSubPanel.setLayout(new GridLayout(8, 2));\n\n        verzikSubPanel.add(new JLabel(verzikBodyColor + \"Bounces\"));\n        verzikSubPanel.add(new JLabel(verzikBodyColor + data.getValue(DataPoint.VERZIK_BOUNCES)));\n\n        verzikSubPanel.add(new JLabel(verzikBodyColor + \"Deaths\"));\n        verzikSubPanel.add(new JLabel(verzikBodyColor + data.getValue(DataPoint.VERZIK_DEATHS)));\n\n        verzikSubPanel.add(new JLabel(verzikBodyColor + \"Crabs Spawned\"));\n        verzikSubPanel.add(new JLabel(verzikBodyColor + data.getValue(DataPoint.VERZIK_CRABS_SPAWNED)));\n\n        verzikSubPanel.add(new JLabel(verzikBodyColor + \"Phase 1\"));\n        verzikSubPanel.add(new JLabel(verzikBodyColor + RoomUtil.time(data.getValue(DataPoint.VERZIK_P1_SPLIT))));\n\n        verzikSubPanel.add(new JLabel(verzikBodyColor + \"Reds Proc\"));\n        verzikSubPanel.add(new JLabel(verzikBodyColor + RoomUtil.time(data.getValue(DataPoint.VERZIK_REDS_SPLIT)) + \" (\" + RoomUtil.time(data.getValue(DataPoint.VERZIK_REDS_SPLIT) - data.getValue(DataPoint.VERZIK_P1_SPLIT)) + \")\"));\n\n        verzikSubPanel.add(new JLabel(verzikBodyColor + \"Phase 2\"));\n        verzikSubPanel.add(new JLabel(verzikBodyColor + RoomUtil.time(data.getValue(DataPoint.VERZIK_P2_SPLIT)) + \" (\" + RoomUtil.time(data.getValue(DataPoint.VERZIK_P2_SPLIT) - data.getValue(DataPoint.VERZIK_P1_SPLIT)) + \")\"));\n\n        verzikSubPanel.add(new JLabel(verzikBodyColor + \"Time\"));\n        verzikSubPanel.add(new JLabel(verzikBodyColor + RoomUtil.time(data.getVerzikTime()) + \" (\" + RoomUtil.time(data.getVerzikTime() - data.getValue(DataPoint.VERZIK_P2_SPLIT)) + \")\"));\n\n        maidenPanel.add(maidenSubPanel);\n        bloatPanel.add(bloatSubPanel);\n        nylocasPanel.add(nylocasSubPanel);\n        sotetsegPanel.add(sotetsegSubPanel);\n        xarpusPanel.add(xarpusSubPanel);\n        verzikPanel.add(verzikSubPanel);\n\n        thisSubPanel.add(maidenPanel);\n        thisSubPanel.add(bloatPanel);\n        thisSubPanel.add(nylocasPanel);\n        thisSubPanel.add(sotetsegPanel);\n        thisSubPanel.add(xarpusPanel);\n        thisSubPanel.add(verzikPanel);\n\n        JPanel summaryPanel \u003d new JPanel();\n        summaryPanel.setLayout(new BorderLayout());\n        summaryPanel.setBorder(BorderFactory.createTitledBorder(\"Summary\"));\n        summaryPanel.setMinimumSize(new Dimension(100, 30));\n        Calendar cal \u003d Calendar.getInstance();\n        cal.setTime(data.raidStarted);\n        String dateString \u003d (cal.get(Calendar.MONTH) + 1) + \"-\" + cal.get(Calendar.DAY_OF_MONTH) + \"-\" + cal.get(Calendar.YEAR);\n        JPanel summarySubPanel \u003d new JPanel(new GridLayout(10, 1));\n        summarySubPanel.add(new JLabel(\"Date: \" + dateString));\n        String scaleString \u003d \"\";\n        switch (data.getScale())\n        {\n            case 1:\n                scaleString \u003d \"Solo\";\n                break;\n            case 2:\n                scaleString \u003d \"Duo\";\n                break;\n            case 3:\n                scaleString \u003d \"Trio\";\n                break;\n            case 4:\n                scaleString \u003d \"4 Man\";\n                break;\n            case 5:\n                scaleString \u003d \"5 Man\";\n                break;\n        }\n        summarySubPanel.add(new JLabel(\"Scale: \" + scaleString));\n        setSummaryStatus(data, summarySubPanel);\n        summarySubPanel.add(new JLabel(\"Time: \" + RoomUtil.time(data.getTimeSum())));\n        summarySubPanel.add(new JLabel(\"Players:\"));\n        for (String player : data.players.keySet())\n        {\n            summarySubPanel.add(new JLabel(\"        \" + player + \" (\" + data.players.get(player) + \")\"));\n        }\n\n        summaryPanel.add(summarySubPanel);\n\n        JPanel topPanel \u003d new JPanel();\n        topPanel.setLayout(new GridLayout(1, 3));\n        topPanel.add(summaryPanel);\n\n        JPanel thrallsPanel \u003d new JPanel();\n        thrallsPanel.setBorder(BorderFactory.createTitledBorder(\"Thralls\"));\n        thrallsPanel.setLayout(new GridLayout(7, 2));\n\n        thrallsPanel.add(new JLabel(\"Total Thrall Hits: \"));\n        thrallsPanel.add(new JLabel(String.valueOf(data.getValue(DataPoint.THRALL_ATTACKS_TOTAL)), SwingConstants.RIGHT));\n\n        thrallsPanel.add(new JLabel(\"Maiden Thrall Hits: \"));\n        thrallsPanel.add(new JLabel(String.valueOf(data.getValue(DataPoint.THRALL_ATTACKS_MAIDEN)), SwingConstants.RIGHT));\n\n        thrallsPanel.add(new JLabel(\"Bloat Thrall Hits: \"));\n        thrallsPanel.add(new JLabel(String.valueOf(data.getValue(DataPoint.THRALL_ATTACKS_BLOAT)), SwingConstants.RIGHT));\n\n        thrallsPanel.add(new JLabel(\"Nylo Thrall Hits: \"));\n        thrallsPanel.add(new JLabel(String.valueOf(data.getValue(DataPoint.THRALL_ATTACKS_NYLO)), SwingConstants.RIGHT));\n\n        thrallsPanel.add(new JLabel(\"Sotetseg Thrall Hits: \"));\n        thrallsPanel.add(new JLabel(String.valueOf(data.getValue(DataPoint.THRALL_ATTACKS_SOTE)), SwingConstants.RIGHT));\n\n        thrallsPanel.add(new JLabel(\"Xarpus Thrall Hits: \"));\n        thrallsPanel.add(new JLabel(String.valueOf(data.getValue(DataPoint.THRALL_ATTACKS_XARP)), SwingConstants.RIGHT));\n\n        thrallsPanel.add(new JLabel(\"Verzik Thrall Hits: \"));\n        thrallsPanel.add(new JLabel(String.valueOf(data.getValue(DataPoint.THRALL_ATTACKS_VERZIK)), SwingConstants.RIGHT));\n\n\n        JPanel vengPanel \u003d new JPanel();\n        vengPanel.setBorder(BorderFactory.createTitledBorder(\"Venges\"));\n        vengPanel.setLayout(new GridLayout(8, 2));\n\n        vengPanel.add(new JLabel(\"Venges\"));\n        vengPanel.add(new JLabel(\"(Procced/Cast): Damage\"));\n\n        vengPanel.add(new JLabel(\"All Rooms\"));\n        vengPanel.add(new JLabel(\"(\" + data.getValue(DataPoint.VENG_PROCS_TOTAL) + \"/\" + data.getValue(DataPoint.VENG_CASTS_TOTAL) + \"): \" + data.getValue(DataPoint.VENG_DAMAGE_TOTAL), SwingConstants.RIGHT));\n\n        vengPanel.add(new JLabel(\"Maiden\"));\n        vengPanel.add(new JLabel(\"(\" + data.getValue(DataPoint.VENG_PROCS_MAIDEN) + \"/\" + data.getValue(DataPoint.VENG_CASTS_MAIDEN) + \"): \" + data.getValue(DataPoint.VENG_DAMAGE_MAIDEN), SwingConstants.RIGHT));\n\n        vengPanel.add(new JLabel(\"Bloat\"));\n        vengPanel.add(new JLabel(\"(\" + data.getValue(DataPoint.VENG_PROCS_BLOAT) + \"/\" + data.getValue(DataPoint.VENG_CASTS_BLOAT) + \"): \" + data.getValue(DataPoint.VENG_DAMAGE_BLOAT), SwingConstants.RIGHT));\n\n        vengPanel.add(new JLabel(\"Nylo\"));\n        vengPanel.add(new JLabel(\"(\" + data.getValue(DataPoint.VENG_PROCS_NYLO) + \"/\" + data.getValue(DataPoint.VENG_CASTS_NYLO) + \"): \" + data.getValue(DataPoint.VENG_DAMAGE_NYLO), SwingConstants.RIGHT));\n\n        vengPanel.add(new JLabel(\"Sote\"));\n        vengPanel.add(new JLabel(\"(\" + data.getValue(DataPoint.VENG_PROCS_SOTE) + \"/\" + data.getValue(DataPoint.VENG_CASTS_SOTE) + \"): \" + data.getValue(DataPoint.VENG_DAMAGE_SOTE), SwingConstants.RIGHT));\n\n        vengPanel.add(new JLabel(\"Xarp\"));\n        vengPanel.add(new JLabel(\"(\" + data.getValue(DataPoint.VENG_PROCS_XARP) + \"/\" + data.getValue(DataPoint.VENG_CASTS_XARP) + \"): \" + data.getValue(DataPoint.VENG_DAMAGE_XARP), SwingConstants.RIGHT));\n\n        vengPanel.add(new JLabel(\"Verzik\"));\n        vengPanel.add(new JLabel(\"(\" + data.getValue(DataPoint.VENG_PROCS_VERZIK) + \"/\" + data.getValue(DataPoint.VENG_CASTS_VERZIK) + \"): \" + data.getValue(DataPoint.VENG_DAMAGE_VERZIK), SwingConstants.RIGHT));\n\n        topPanel.add(thrallsPanel);\n        topPanel.add(vengPanel);\n\n        add(topPanel);\n        add(thisSubPanel);\n\n        pack();\n    }\n\n    private static void setSummaryStatus(SimpleTOBData data, JPanel summarySubPanel)\n    {\n        String raidStatusString;\n        if (data.maidenWipe)\n        {\n            raidStatusString \u003d \"Maiden Wipe\";\n        } else if (data.maidenReset)\n        {\n            raidStatusString \u003d \"Maiden Reset\";\n        } else if (data.bloatWipe)\n        {\n            raidStatusString \u003d \"Bloat Wipe\";\n        } else if (data.bloatReset)\n        {\n            raidStatusString \u003d \"Bloat Reset\";\n        } else if (data.nyloWipe)\n        {\n            raidStatusString \u003d \"Nylo Wipe\";\n        } else if (data.nyloReset)\n        {\n            raidStatusString \u003d \"Nylo Reset\";\n        } else if (data.soteWipe)\n        {\n            raidStatusString \u003d \"Sotetseg Wipe\";\n        } else if (data.soteReset)\n        {\n            raidStatusString \u003d \"Sotetseg Reset\";\n        } else if (data.xarpWipe)\n        {\n            raidStatusString \u003d \"Xarpus Wipe\";\n        } else if (data.xarpReset)\n        {\n            raidStatusString \u003d \"Xarpus Reset\";\n        } else if (data.verzikWipe)\n        {\n            raidStatusString \u003d \"Verzik Wipe\";\n        } else\n        {\n            raidStatusString \u003d \"Completion\";\n        }\n        summarySubPanel.add(new JLabel(\"Raid Status: \" + raidStatusString));\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\ui\\viewraid\\ViewTOBRaid.java"},{"fileName":"DataManager.java","content":"package com.advancedraidtracker.utility.datautility;\n\nimport com.advancedraidtracker.utility.wrappers.PlayerCorrelatedPointData;\nimport lombok.extern.slf4j.Slf4j;\n@Slf4j\npublic class DataManager\n{\n\n    private final DataPointIntWrapper[] data;\n    private final DataPointPlayerData[] playerSpecificData;\n\n\n    public DataManager()\n    {\n        data \u003d new DataPointIntWrapper[DataPoint.values().length];\n        for (int i \u003d 0; i \u003c DataPoint.values().length; i++)\n        {\n            data[i] \u003d new DataPointIntWrapper(DataPoint.values()[i]);\n        }\n\n        playerSpecificData \u003d new DataPointPlayerData[DataPoint.getPlayerSpecific().length];\n        for (int i \u003d 0; i \u003c DataPoint.getPlayerSpecific().length; i++)\n        {\n            playerSpecificData[i] \u003d new DataPointPlayerData(DataPoint.getValue(DataPoint.getPlayerSpecific()[i]));\n        }\n    }\n\n    public PlayerCorrelatedPointData getHighest(DataPoint point)\n    {\n        int highest \u003d 0;\n        String name \u003d \"\";\n        int index \u003d getPlayerSpecificIndex(point);\n        for (String player : playerSpecificData[index].specificPlayerData.keySet())\n        {\n            if (playerSpecificData[index].specificPlayerData.get(player) \u003e highest)\n            {\n                highest \u003d playerSpecificData[index].specificPlayerData.get(player);\n                name \u003d player;\n            }\n        }\n        return new PlayerCorrelatedPointData(name, highest);\n    }\n\n    int getPlayerSpecificIndex(DataPoint point)\n    {\n        int index \u003d 0;\n        for (String datapoint : DataPoint.getPlayerSpecific())\n        {\n            if (datapoint.equalsIgnoreCase(point.name))\n            {\n                return index;\n            }\n            index++;\n        }\n        return index;\n    }\n\n    public void incrementPlayerSpecific(DataPoint dataPoint, String player)\n    {\n        playerSpecificData[getPlayerSpecificIndex(dataPoint)].increment(player);\n    }\n\n    public void incrementPlayerSpecific(DataPoint dataPoint, String player, int valueAdded)\n    {\n        playerSpecificData[getPlayerSpecificIndex(dataPoint)].increment(player, valueAdded);\n    }\n\n    public void set(DataPoint point, int value)\n    {\n        data[point.ordinal()].setValue(value);\n    }\n\n    public int get(DataPoint point)\n    {\n        if(point \u003d\u003d null)\n        {\n            return -1;\n        }\n        return data[point.ordinal()].value;\n    }\n\n    public int get(String point)\n    {\n        DataPoint dataPoint \u003d DataPoint.getValue(point);\n        if (dataPoint !\u003d null)\n        {\n            return data[dataPoint.ordinal()].value;\n        }\n        return 0;\n    }\n\n    public void increment(DataPoint point, int valueAdded)\n    {\n        data[point.ordinal()].increment(valueAdded);\n    }\n\n    public void increment(DataPoint point)\n    {\n        data[point.ordinal()].increment();\n    }\n\n    public void hammer(DataPoint point)\n    {\n        data[point.ordinal()].setValue((int) (data[point.ordinal()].value * 0.7));\n    }\n\n    public void bgs(DataPoint point, int damage)\n    {\n        data[point.ordinal()].setValue(Math.max(0, data[point.ordinal()].value - damage));\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\datautility\\DataManager.java"},{"fileName":"DataPoint.java","content":"package com.advancedraidtracker.utility.datautility;\n\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Objects;\n\npublic enum DataPoint\n{\n\n    CHALLENGE_TIME(\"Challenge Time\", types.TIME, rooms.ANY),\n    OVERALL_TIME(\"Overall Time\", types.TIME, rooms.ANY),\n    TIME_OUTSIDE_ROOMS(\"Time Outside Rooms\", types.TIME, rooms.ANY),\n    MAIDEN_TOTAL_TIME(\"Maiden Time\", types.TIME, rooms.MAIDEN),\n    BLOAT_TOTAL_TIME(\"Bloat Time\", types.TIME, rooms.BLOAT),\n    NYLO_TOTAL_TIME(\"Nylocas Time\", types.TIME, rooms.NYLOCAS),\n    XARP_TOTAL_TIME(\"Xarpus Time\", types.TIME, rooms.XARPUS),\n    SOTE_TOTAL_TIME(\"Sotetseg Time\", types.TIME, rooms.SOTETSEG),\n    VERZIK_TOTAL_TIME(\"Verzik Time\", types.TIME, rooms.VERZIK),\n    MAIDEN_BLOOD_SPAWNED(\"Maiden blood spawned\", types.OTHER_INT, rooms.MAIDEN),\n    MAIDEN_BLOOD_THROWN(\"Maiden blood thrown\", types.OTHER_INT, rooms.MAIDEN),\n    MAIDEN_PLAYER_STOOD_IN_THROWN_BLOOD(\"Maiden player stood in thrown blood\", types.OTHER_INT, rooms.MAIDEN, true),\n    MAIDEN_PLAYER_STOOD_IN_SPAWNED_BLOOD(\"Maiden player stood in spawned blood\", types.OTHER_INT, rooms.MAIDEN, true),\n    MAIDEN_HEALS_FROM_THROWN_BLOOD(\"Maiden heals from thrown blood\", types.OTHER_INT, rooms.MAIDEN, true),\n    MAIDEN_HEALS_FROM_SPAWNED_BLOOD(\"Maiden heals from spawned blood\", types.OTHER_INT, rooms.MAIDEN, true),\n    MAIDEN_PLAYER_STOOD_IN_BLOOD(\"Maiden player stood in any blood\", types.OTHER_INT, rooms.MAIDEN, true),\n    MAIDEN_HEALS_FROM_ANY_BLOOD(\"Maiden heals from any blood\", types.OTHER_INT, rooms.MAIDEN, true),\n    MAIDEN_MELEE_DRAINS(\"Maiden drained melee\", types.OTHER_INT, rooms.MAIDEN, true),\n    MAIDEN_CRABS_LEAKED(\"Maiden crabs leaked\", types.OTHER_INT, rooms.MAIDEN),\n    MAIDEN_CRABS_LEAKED_FULL_HP(\"Maiden crabs leaked full\", types.OTHER_INT, rooms.MAIDEN),\n    MAIDEN_HP_HEALED(\"Maiden HP healed\", types.OTHER_INT, rooms.MAIDEN),\n    MAIDEN_DEFENSE(\"Maiden defense\", types.OTHER_INT, rooms.MAIDEN, 200),\n    MAIDEN_DEATHS(\"Maiden deaths\", types.OTHER_INT, rooms.MAIDEN, true),\n    MAIDEN_DINHS_SPECS(\"Maiden dinhs specs\", types.OTHER_INT, rooms.MAIDEN, true),\n    MAIDEN_DINHS_CRABS_HIT(\"Maiden dinhs crabs Hit\", types.OTHER_INT, rooms.MAIDEN, true),\n    MAIDEN_DINHS_TARGETS_HIT(\"Maiden dinhs targets hit\", types.OTHER_INT, rooms.MAIDEN, true),\n    MAIDEN_DINHS_AVERAGE_HP_HIT(\"Maiden dinhs average HP crab\", types.OTHER_INT, rooms.MAIDEN, true),\n    MAIDEN_DINHS_PERCENT_TARGETS_CRAB(\"Maiden dinhs % crabs targeted\", types.OTHER_INT, rooms.MAIDEN, true),\n    MAIDEN_DINHS_CRABS_UNDER_27_TARGETED(\"Maiden dinhs crab \u003c 27hp targeted\", types.OTHER_INT, rooms.MAIDEN, true),\n    MAIDEN_DINHS_CRABS_UNDER_27_TARGETED_PERCENT(\"Maiden dinhs crabs \u003c27hp targeted %\", types.OTHER_INT, rooms.MAIDEN, true),\n    MAIDEN_CHINS_THROWN(\"Maiden chins thrown\", types.OTHER_INT, rooms.MAIDEN, true),\n    MAIDEN_CHINS_THROWN_WRONG_DISTANCE(\"Maiden chins thrown wrong distance\", types.OTHER_INT, rooms.MAIDEN, true),\n    MAIDEN_CHIN_CORRECT_DISTANCE_PERCENT(\"Maiden chins correct distance %\", types.OTHER_INT, rooms.MAIDEN, true),\n    RAID_INDEX(\"Raid Index\", types.OTHER_INT, rooms.ANY),\n    PARTY_SIZE(\"Party Size\", types.OTHER_INT, rooms.ANY),\n\n    BLOAT_DOWNS(\"Bloat downs\", types.OTHER_INT, rooms.BLOAT),\n    BLOAT_HP_FIRST_DOWN(\"Bloat HP% 1st down\", types.OTHER_INT, rooms.BLOAT),\n    BLOAT_FIRST_WALK_SCYTHES(\"Bloat 1st walk scythes\", types.OTHER_INT, rooms.BLOAT, true),\n    BLOAT_FIRST_WALK_DEATHS(\"Bloat 1st walk deaths\", types.OTHER_INT, rooms.BLOAT, true),\n    BLOAT_DEFENSE(\"Bloat defense\", types.OTHER_INT, rooms.BLOAT, 100),\n    BLOAT_DEATHS(\"Bloat deaths\", types.OTHER_INT, rooms.BLOAT, true),\n    NYLO_STALLS_PRE_20(\"Nylo stalls pre 20\", types.OTHER_INT, rooms.NYLOCAS),\n    NYLO_STALLS_POST_20(\"Nylo stalls post 20\", types.OTHER_INT, rooms.NYLOCAS),\n    NYLO_STALLS_TOTAL(\"Nylo stalls total\", types.OTHER_INT, rooms.NYLOCAS),\n    NYLO_SPLITS_RANGE(\"Nylo splits range\", types.OTHER_INT, rooms.NYLOCAS),\n    NYLO_SPLITS_MAGE(\"Nylo splits mage\", types.OTHER_INT, rooms.NYLOCAS),\n    NYLO_SPLITS_MELEE(\"Nylo splits melee\", types.OTHER_INT, rooms.NYLOCAS),\n    NYLO_ROTATIONS_RANGE(\"Nylo rotations range\", types.OTHER_INT, rooms.NYLOCAS),\n    NYLO_ROTATIONS_MAGE(\"Nylo rotations mage\", types.OTHER_INT, rooms.NYLOCAS),\n    NYLO_ROTATIONS_MELEE(\"Nylo rotations melee\", types.OTHER_INT, rooms.NYLOCAS),\n    NYLO_DEFENSE(\"Nylo defense\", types.OTHER_INT, rooms.NYLOCAS, 50),\n    NYLO_DEATHS(\"Nylo deaths\", types.OTHER_INT, rooms.NYLOCAS, true),\n    SOTE_SPECS_P1(\"Sote specs p1\", types.OTHER_INT, rooms.SOTETSEG),\n    SOTE_SPECS_P2(\"Sote specs p2\", types.OTHER_INT, rooms.SOTETSEG),\n    SOTE_SPECS_P3(\"Sote specs p3\", types.OTHER_INT, rooms.SOTETSEG),\n    SOTE_SPECS_TOTAL(\"Sote specs total\", types.OTHER_INT, rooms.SOTETSEG),\n    SOTE_DEATHS(\"Sote deaths\", types.OTHER_INT, rooms.SOTETSEG, true),\n    XARP_HEALING(\"Xarp Healing\", types.OTHER_INT, rooms.XARPUS),\n    XARP_DEFENSE(\"Xarp defense\", types.OTHER_INT, rooms.XARPUS, 250),\n    XARP_DEATHS(\"Xarp deaths\", types.OTHER_INT, rooms.XARPUS, true),\n    VERZIK_BOUNCES(\"Verzik bounces\", types.OTHER_INT, rooms.VERZIK, true),\n    VERZIK_CRABS_SPAWNED(\"Verzik crabs spawned\", types.OTHER_INT, rooms.VERZIK),\n    VERZIK_REDS_SETS(\"Verzik Red Sets\", types.OTHER_INT, rooms.VERZIK),\n    VERZIK_REDS_PROC_PERCENT(\"Verzik Red Proc Percent\", types.OTHER_INT, rooms.VERZIK),\n    VERZIK_DEATHS(\"Verzik deaths\", types.OTHER_INT, rooms.VERZIK, true),\n    VERZIK_HP_AT_WEBS(\"Verzik HP% at webs\", types.OTHER_INT, rooms.VERZIK),\n    MAIDEN_70_SPLIT(\"Maiden 70s split\", types.TIME, rooms.MAIDEN),\n    MAIDEN_7050_SPLIT(\"Maiden 70-50s split\", types.TIME, rooms.MAIDEN),\n    MAIDEN_50_SPLIT(\"Maiden 50s split\", types.TIME, rooms.MAIDEN),\n    MAIDEN_5030_SPLIT(\"Maiden 50-30s split\", types.TIME, rooms.MAIDEN),\n    MAIDEN_30_SPLIT(\"Maiden 30s split\", types.TIME, rooms.MAIDEN),\n    MAIDEN_SKIP_SPLIT(\"Maiden Skip split\", types.TIME, rooms.MAIDEN),\n    BLOAT_FIRST_DOWN_TIME(\"Bloat 1st down time\", types.OTHER_INT, rooms.BLOAT),\n    NYLO_BOSS_SPAWN(\"Nylo boss spawn\", types.TIME, rooms.NYLOCAS),\n    NYLO_BOSS_DURATION(\"Nylo boss duration\", types.TIME, rooms.NYLOCAS),\n    NYLO_LAST_WAVE(\"Nylo last wave\", types.TIME, rooms.NYLOCAS),\n    NYLO_LAST_DEAD(\"Nylo last dead\", types.TIME, rooms.NYLOCAS),\n    NYLO_CLEANUP(\"Nylo cleanup\", types.TIME, rooms.NYLOCAS),\n    NYLOCAS_PILLAR_DESPAWN_TICK(\"Nylo Pillar despawn tick\", types.TIME, rooms.NYLOCAS),\n    SOTE_P1_SPLIT(\"Sote P1 split\", types.TIME, rooms.SOTETSEG),\n    SOTE_P2_SPLIT(\"Sote P2 split\", types.TIME, rooms.SOTETSEG),\n    SOTE_P2_DURATION(\"Sote P2 duration\", types.TIME, rooms.SOTETSEG),\n\n    SOTE_P3_DURATION(\"Sote P3 duration\", types.TIME, rooms.SOTETSEG),\n    SOTE_M1_SPLIT(\"Sote maze1 split\", types.TIME, rooms.SOTETSEG),\n    SOTE_M1_DURATION(\"Sote maze1 Duration\", types.TIME, rooms.SOTETSEG),\n    SOTE_M2_SPLIT(\"Sote maze2 split\", types.TIME, rooms.SOTETSEG),\n    SOTE_M2_DURATION(\"Sote maze2 duration\", types.TIME, rooms.SOTETSEG),\n    SOTE_MAZE_SUM(\"Sote mazes combined\", types.TIME, rooms.SOTETSEG),\n    XARP_SCREECH(\"Xarp screech\", types.TIME, rooms.XARPUS),\n    XARP_POST_SCREECH(\"Xarp post screech\", types.TIME, rooms.XARPUS),\n    VERZIK_P1_SPLIT(\"Verzik P1 split\", types.TIME, rooms.VERZIK),\n\n    VERZIK_P2_TILL_REDS(\"Verzik P2 until reds split\", types.TIME, rooms.VERZIK),\n    VERZIK_REDS_SPLIT(\"Verzik reds split\", types.TIME, rooms.VERZIK),\n    VERZIK_REDS_DURATION(\"Verzik reds duration\", types.TIME, rooms.VERZIK),\n    VERZIK_P2_SPLIT(\"Verzik P2 split\", types.TIME, rooms.VERZIK),\n    VERZIK_P2_DURATION(\"Verzik P2 duration\", types.TIME, rooms.VERZIK),\n    VERZIK_P3_DURATION(\"Verzik P3 duration\", types.TIME, rooms.VERZIK),\n\n    NYLO_ENTRY(\"Nylo Entry\", types.TIME, rooms.NYLOCAS),\n    SOTE_ENTRY(\"Sote Entry\", types.TIME, rooms.SOTETSEG),\n    XARP_ENTRY(\"Xarp Entry\", types.TIME, rooms.XARPUS),\n    VERZIK_ENTRY(\"Verzik Entry\", types.TIME, rooms.VERZIK),\n\n    ATTEMPTED_HAMMERS_MAIDEN(\"Maiden attempted hammers\", types.OTHER_INT, rooms.MAIDEN, true),\n    ATTEMPTED_HAMMERS_BLOAT(\"Bloat attempted hammers\", types.OTHER_INT, rooms.BLOAT, true),\n    ATTEMPTED_HAMMERS_NYLO(\"Nylo attempted hammers\", types.OTHER_INT, rooms.NYLOCAS, true),\n    ATTEMPTED_HAMMERS_SOTE(\"Sote attempted hammers\", types.OTHER_INT, rooms.SOTETSEG, true),\n    ATTEMPTED_HAMMERS_XARP(\"Xarp attempted hammers\", types.OTHER_INT, rooms.XARPUS, true),\n    ATTEMPTED_HAMMERS_VERZIK(\"Verzik attempted hammers\", types.OTHER_INT, rooms.VERZIK, true),\n    HIT_HAMMERS_MAIDEN(\"Maiden hit hammers\", types.OTHER_INT, rooms.MAIDEN, true),\n    HIT_HAMMERS_BLOAT(\"Bloat hit hammers\", types.OTHER_INT, rooms.BLOAT, true),\n    HIT_HAMMERS_NYLO(\"Nylo hit hammers\", types.OTHER_INT, rooms.NYLOCAS, true),\n    HIT_HAMMERS_SOTE(\"Sote hit hammers\", types.OTHER_INT, rooms.SOTETSEG, true),\n    HIT_HAMMERS_XARP(\"Xarp hit hammers\", types.OTHER_INT, rooms.XARPUS, true),\n    HIT_HAMMERS_VERZIK(\"Verzik hit hammers\", types.OTHER_INT, rooms.VERZIK, true),\n\n    ATTEMPTED_BGS_MAIDEN(\"Maiden attempted BGS\", types.OTHER_INT, rooms.MAIDEN, true),\n    BGS_DAMAGE_MAIDEN(\"Maiden BGS damage\", types.OTHER_INT, rooms.MAIDEN, true),\n\n    ATTEMPTED_BGS_BLOAT(\"Bloat attempted BGS\", types.OTHER_INT, rooms.BLOAT, true),\n    BGS_DAMAGE_BLOAT(\"Bloat BGS damage\", types.OTHER_INT, rooms.BLOAT, true),\n\n    ATTEMPTED_BGS_NYLO(\"Nylo attempted BGS\", types.OTHER_INT, rooms.NYLOCAS, true),\n    BGS_DAMAGE_NYLO(\"Nylo BGS damage\", types.OTHER_INT, rooms.NYLOCAS, true),\n\n    ATTEMPTED_BGS_SOTE(\"Sote attempted BGS\", types.OTHER_INT, rooms.SOTETSEG, true),\n    BGS_DAMAGE_SOTE(\"Sote BGS damage\", types.OTHER_INT, rooms.SOTETSEG, true),\n\n    ATTEMPTED_BGS_XARP(\"Xarp attempted BGS\", types.OTHER_INT, rooms.XARPUS, true),\n    BGS_DAMAGE_XARP(\"Xarp BGS damage\", types.OTHER_INT, rooms.XARPUS, true),\n\n    ATTEMPTED_BGS_VERZ(\"Verzik attempted BGS\", types.OTHER_INT, rooms.VERZIK, true),\n    BGS_DAMAGE_VERZ(\"Verzik BGS damage\", types.OTHER_INT, rooms.VERZIK, true),\n\n    THRALL_ATTACKS_TOTAL(\"Total thrall attacks\", types.OTHER_INT, rooms.ANY, true),\n    THRALL_ATTACKS_MAIDEN(\"Maiden thrall attacks\", types.OTHER_INT, rooms.MAIDEN, true),\n    THRALL_ATTACKS_BLOAT(\"Bloat thrall attacks\", types.OTHER_INT, rooms.BLOAT, true),\n    THRALL_ATTACKS_NYLO(\"Nylo thrall attacks\", types.OTHER_INT, rooms.NYLOCAS, true),\n    THRALL_ATTACKS_SOTE(\"Sote thrall attacks\", types.OTHER_INT, rooms.SOTETSEG, true),\n    THRALL_ATTACKS_XARP(\"Xarp thrall attacks\", types.OTHER_INT, rooms.XARPUS, true),\n    THRALL_ATTACKS_VERZIK(\"Verzik thrall attacks\", types.OTHER_INT, rooms.VERZIK, true),\n\n    THRALL_DAMAGE_TOTAL(\"Total thrall damage\", types.OTHER_INT, rooms.ANY, true),\n    THRALL_DAMAGE_MAIDEN(\"Maiden thrall damage\", types.OTHER_INT, rooms.MAIDEN, true),\n    THRALL_DAMAGE_BLOAT(\"Bloat thrall damage\", types.OTHER_INT, rooms.BLOAT, true),\n    THRALL_DAMAGE_NYLO(\"Nylo thrall damage\", types.OTHER_INT, rooms.NYLOCAS, true),\n    THRALL_DAMAGE_SOTE(\"Sote thrall damage\", types.OTHER_INT, rooms.SOTETSEG, true),\n    THRALL_DAMAGE_XARP(\"Xarp thrall damage\", types.OTHER_INT, rooms.XARPUS, true),\n    THRALL_DAMAGE_VERZIK(\"Verzik thrall damage\", types.OTHER_INT, rooms.VERZIK, true),\n\n    VENG_DAMAGE_TOTAL(\"Total veng damage\", types.OTHER_INT, rooms.ANY),\n    VENG_DAMAGE_MAIDEN(\"Maiden veng damage\", types.OTHER_INT, rooms.MAIDEN),\n    VENG_DAMAGE_BLOAT(\"Bloat veng damage\", types.OTHER_INT, rooms.BLOAT),\n    VENG_DAMAGE_NYLO(\"Nylo veng damage\", types.OTHER_INT, rooms.NYLOCAS),\n    VENG_DAMAGE_SOTE(\"Sote veng damage\", types.OTHER_INT, rooms.SOTETSEG),\n    VENG_DAMAGE_XARP(\"Xarp veng damage\", types.OTHER_INT, rooms.XARPUS),\n    VENG_DAMAGE_VERZIK(\"Verzik veng damage\", types.OTHER_INT, rooms.VERZIK),\n\n    VENG_CASTS_TOTAL(\"Total veng casts\", types.OTHER_INT, rooms.ANY),\n    VENG_CASTS_MAIDEN(\"Maiden veng casts\", types.OTHER_INT, rooms.MAIDEN),\n    VENG_CASTS_BLOAT(\"Bloat veng casts\", types.OTHER_INT, rooms.BLOAT),\n    VENG_CASTS_NYLO(\"Nylo veng casts\", types.OTHER_INT, rooms.NYLOCAS),\n    VENG_CASTS_SOTE(\"Sote veng casts\", types.OTHER_INT, rooms.SOTETSEG),\n    VENG_CASTS_XARP(\"Xarp veng casts\", types.OTHER_INT, rooms.XARPUS),\n    VENG_CASTS_VERZIK(\"Verzik veng casts\", types.OTHER_INT, rooms.VERZIK),\n\n    VENG_PROCS_TOTAL(\"Total veng procs\", types.OTHER_INT, rooms.ANY),\n    VENG_PROCS_MAIDEN(\"Maiden veng procs\", types.OTHER_INT, rooms.MAIDEN),\n    VENG_PROCS_BLOAT(\"Bloat veng procs\", types.OTHER_INT, rooms.BLOAT),\n    VENG_PROCS_NYLO(\"Nylo veng procs\", types.OTHER_INT, rooms.NYLOCAS),\n    VENG_PROCS_SOTE(\"Sote veng procs\", types.OTHER_INT, rooms.SOTETSEG),\n    VENG_PROCS_XARP(\"Xarp veng procs\", types.OTHER_INT, rooms.XARPUS),\n    VENG_PROCS_VERZIK(\"Verzik veng procs\", types.OTHER_INT, rooms.VERZIK),\n    KODAI_BOPS(\"Kodai bops\", types.OTHER_INT, rooms.ANY, true),\n    DWH_BOPS(\"DWH bops\", types.OTHER_INT, rooms.ANY, true),\n    CHALLY_POKE(\"Chally pokes\", types.OTHER_INT, rooms.ANY, true),\n    BGS_WHACKS(\"BGS whacks\", types.OTHER_INT, rooms.ANY, true),\n    TOTAL_DEATHS(\"Total deaths\", types.OTHER_INT, rooms.ANY, true),\n    DEATHS(\"Alternate Deaths\", types.OTHER_INT, rooms.ALL, true),\n    UNKNOWN(\"Unknown\", types.OTHER_BOOL, rooms.ANY);\n\n\n\n    public static DataPoint getValue(String s)\n    {\n        for (DataPoint point : values())\n        {\n            if (point.name.equals(s))\n            {\n                return point;\n            }\n        }\n        return DataPoint.UNKNOWN;\n    }\n\n    public enum rooms\n    {\n        ANY,\n        MAIDEN,\n        BLOAT,\n        NYLOCAS,\n        SOTETSEG,\n        XARPUS,\n        VERZIK,\n        ALL\n    }\n\n    public enum types\n    {\n        OTHER_INT, OTHER_BOOL, TIME\n    }\n\n    public final String name;\n    public final int value;\n    public final types type;\n    public final rooms room;\n    public final boolean playerSpecific;\n\n\n    DataPoint(String name, types type, rooms room)\n    {\n        this.name \u003d name;\n        this.value \u003d 0;\n        this.type \u003d type;\n        this.room \u003d room;\n        this.playerSpecific \u003d false;\n    }\n\n    DataPoint(String name, types type, rooms room, int value)\n    {\n        this.name \u003d name;\n        this.value \u003d value;\n        this.type \u003d type;\n        this.room \u003d room;\n        this.playerSpecific \u003d false;\n    }\n\n    DataPoint(String name, types type, rooms room, boolean playerSpecific)\n    {\n        this.playerSpecific \u003d playerSpecific;\n        this.name \u003d name;\n        this.value \u003d 0;\n        this.type \u003d type;\n        this.room \u003d room;\n    }\n\n    public static String[] getPlayerSpecific()\n    {\n        ArrayList\u003cString\u003e valuesToGather \u003d new ArrayList\u003c\u003e();\n        for (DataPoint point : DataPoint.values())\n        {\n            if (point.playerSpecific)\n            {\n                valuesToGather.add(point.name);\n            }\n        }\n        return Arrays.copyOf(valuesToGather.toArray(), valuesToGather.size(), String[].class);\n    }\n\n    public static String[] getOtherIntNames()\n    {\n        ArrayList\u003cString\u003e valuesToGather \u003d new ArrayList\u003c\u003e();\n        for (DataPoint point : DataPoint.values())\n        {\n            if (point.type.equals(types.OTHER_INT))\n            {\n                valuesToGather.add(point.name);\n            }\n        }\n        return Arrays.copyOf(valuesToGather.toArray(), valuesToGather.size(), String[].class);\n    }\n\n    public static String[] getByNames()\n    {\n        ArrayList\u003cString\u003e valuesToGather \u003d new ArrayList\u003c\u003e();\n        for (DataPoint point : DataPoint.values())\n        {\n            valuesToGather.add(point.name);\n        }\n        return Arrays.copyOf(valuesToGather.toArray(), valuesToGather.size(), String[].class);\n    }\n\n    public static String[] getTimeNames()\n    {\n        ArrayList\u003cString\u003e valuesToGather \u003d new ArrayList\u003c\u003e();\n        for (DataPoint point : DataPoint.values())\n        {\n            if (point.type.equals(types.TIME))\n            {\n                valuesToGather.add(point.name);\n            }\n        }\n        return Arrays.copyOf(valuesToGather.toArray(), valuesToGather.size(), String[].class);\n    }\n\n    public static String[] filterTimes(String[] data)\n    {\n        ArrayList\u003cString\u003e filtered \u003d new ArrayList\u003c\u003e();\n        for (String s : data)\n        {\n            if (Objects.requireNonNull(DataPoint.getValue(s)).type \u003d\u003d types.TIME)\n            {\n                filtered.add(s);\n            }\n        }\n        return Arrays.copyOf(filtered.toArray(), filtered.size(), String[].class);\n    }\n\n    public static String[] filterInt(String[] data)\n    {\n        ArrayList\u003cString\u003e filtered \u003d new ArrayList\u003c\u003e();\n        for (String s : data)\n        {\n            DataPoint dp \u003d DataPoint.getValue(s);\n            if (dp !\u003d null \u0026\u0026 dp.type \u003d\u003d types.OTHER_INT \u0026\u0026 !dp.name.contains(\"thrall\") \u0026\u0026 !dp.name.contains(\"veng\")\n                    \u0026\u0026 !dp.name.contains(\"BGS\") \u0026\u0026 !dp.name.contains(\"hammers\") \u0026\u0026 !dp.name.contains(\"dinhs\"))\n            {\n                filtered.add(s);\n            }\n        }\n        return Arrays.copyOf(filtered.toArray(), filtered.size(), String[].class);\n    }\n\n    public static String[] filterThrall(String[] data)\n    {\n        ArrayList\u003cString\u003e filtered \u003d new ArrayList\u003c\u003e();\n        for (String s : data)\n        {\n            if (Objects.requireNonNull(DataPoint.getValue(s)).name.contains(\"thrall\"))\n            {\n                filtered.add(s);\n            }\n        }\n        return Arrays.copyOf(filtered.toArray(), filtered.size(), String[].class);\n    }\n\n    public static String[] filterVeng(String[] data)\n    {\n        ArrayList\u003cString\u003e filtered \u003d new ArrayList\u003c\u003e();\n        for (String s : data)\n        {\n            if (Objects.requireNonNull(DataPoint.getValue(s)).name.contains(\"veng\"))\n            {\n                filtered.add(s);\n            }\n        }\n        return Arrays.copyOf(filtered.toArray(), filtered.size(), String[].class);\n    }\n\n    public static String[] filterSpecs(String[] data)\n    {\n        ArrayList\u003cString\u003e filtered \u003d new ArrayList\u003c\u003e();\n        for (String s : data)\n        {\n            String name \u003d Objects.requireNonNull(DataPoint.getValue(s)).name;\n            if (name.contains(\"BGS\") || name.contains(\"hammers\") || name.contains(\"dinhs\"))\n            {\n                filtered.add(s);\n            }\n        }\n        return Arrays.copyOf(filtered.toArray(), filtered.size(), String[].class);\n    }\n\n\n    public static String[] getMaidenNames()\n    {\n        ArrayList\u003cString\u003e valuesToGather \u003d new ArrayList\u003c\u003e();\n        for (DataPoint point : DataPoint.values())\n        {\n            if (point.room.equals(rooms.MAIDEN))\n            {\n                valuesToGather.add(point.name);\n            }\n        }\n        return Arrays.copyOf(valuesToGather.toArray(), valuesToGather.size(), String[].class);\n    }\n\n    public static String[] getBloatNames()\n    {\n        ArrayList\u003cString\u003e valuesToGather \u003d new ArrayList\u003c\u003e();\n        for (DataPoint point : DataPoint.values())\n        {\n            if (point.room.equals(rooms.BLOAT))\n            {\n                valuesToGather.add(point.name);\n            }\n        }\n        return Arrays.copyOf(valuesToGather.toArray(), valuesToGather.size(), String[].class);\n    }\n\n    public static String[] getNyloNames()\n    {\n        ArrayList\u003cString\u003e valuesToGather \u003d new ArrayList\u003c\u003e();\n        for (DataPoint point : DataPoint.values())\n        {\n            if (point.room.equals(rooms.NYLOCAS))\n            {\n                valuesToGather.add(point.name);\n            }\n        }\n        return Arrays.copyOf(valuesToGather.toArray(), valuesToGather.size(), String[].class);\n    }\n\n    public static String[] getSoteNames()\n    {\n        ArrayList\u003cString\u003e valuesToGather \u003d new ArrayList\u003c\u003e();\n        for (DataPoint point : DataPoint.values())\n        {\n            if (point.room.equals(rooms.SOTETSEG))\n            {\n                valuesToGather.add(point.name);\n            }\n        }\n        return Arrays.copyOf(valuesToGather.toArray(), valuesToGather.size(), String[].class);\n    }\n\n    public static String[] getXarpNames()\n    {\n        ArrayList\u003cString\u003e valuesToGather \u003d new ArrayList\u003c\u003e();\n        for (DataPoint point : DataPoint.values())\n        {\n            if (point.room.equals(rooms.XARPUS))\n            {\n                valuesToGather.add(point.name);\n            }\n        }\n        return Arrays.copyOf(valuesToGather.toArray(), valuesToGather.size(), String[].class);\n    }\n\n    public static String[] getVerzikNames()\n    {\n        ArrayList\u003cString\u003e valuesToGather \u003d new ArrayList\u003c\u003e();\n        for (DataPoint point : DataPoint.values())\n        {\n            if (point.room.equals(rooms.VERZIK))\n            {\n                valuesToGather.add(point.name);\n            }\n        }\n        return Arrays.copyOf(valuesToGather.toArray(), valuesToGather.size(), String[].class);\n    }\n\n    public static String[] getAnyRoomNames()\n    {\n        ArrayList\u003cString\u003e valuesToGather \u003d new ArrayList\u003c\u003e();\n        for (DataPoint point : DataPoint.values())\n        {\n            if (point.room.equals(rooms.ANY))\n            {\n                valuesToGather.add(point.name);\n            }\n        }\n        return Arrays.copyOf(valuesToGather.toArray(), valuesToGather.size(), String[].class);\n    }\n\n    public static String[] getRoomTimes()\n    {\n        return new String[]{\"Challenge Time\", \"Overall Time\", \"Time Outside Rooms\", \"Maiden Time\", \"Bloat Time\", \"Nylocas Time\", \"Sotetseg Time\", \"Xarpus Time\", \"Verzik Time\"};\n    }\n\n    public static ArrayList\u003cString\u003e getTimeNamesByRoom(rooms room)\n    {\n        ArrayList\u003cString\u003e timesToGather \u003d new ArrayList\u003c\u003e();\n        for (DataPoint point : DataPoint.values())\n        {\n            if (point.room.equals(room) \u0026\u0026 point.type.equals(types.TIME))\n            {\n                timesToGather.add(point.name);\n            }\n        }\n        return timesToGather;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\datautility\\DataPoint.java"},{"fileName":"DataPointIntWrapper.java","content":"package com.advancedraidtracker.utility.datautility;\n\nimport lombok.Getter;\nimport lombok.Setter;\n\npublic class DataPointIntWrapper\n{\n    @Setter\n    @Getter\n    public int value \u003d 0;\n    DataPoint dataPoint;\n\n    public DataPointIntWrapper(DataPoint point)\n    {\n        dataPoint \u003d point;\n        if (point.equals(DataPoint.MAIDEN_DEFENSE))\n        {\n            value \u003d 200;\n        } else if (point.equals(DataPoint.BLOAT_DEFENSE))\n        {\n            value \u003d 100;\n        } else if (point.equals(DataPoint.NYLO_DEFENSE))\n        {\n            value \u003d 50;\n        } else if (point.equals(DataPoint.XARP_DEFENSE))\n        {\n            value \u003d 250;\n        } else if (point.equals(DataPoint.VERZIK_HP_AT_WEBS))\n        {\n            value \u003d -1;\n        }\n    }\n\n    public void increment(int valueAdded)\n    {\n        value +\u003d valueAdded;\n    }\n\n    public void increment()\n    {\n        value++;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\datautility\\DataPointIntWrapper.java"},{"fileName":"DataPointPlayerData.java","content":"package com.advancedraidtracker.utility.datautility;\n\nimport java.util.LinkedHashMap;\nimport java.util.Map;\n\npublic class DataPointPlayerData\n{\n    public Map\u003cString, Integer\u003e specificPlayerData;\n    public DataPoint datapoint;\n\n    public DataPointPlayerData(DataPoint datapoint)\n    {\n        this.datapoint \u003d datapoint;\n        specificPlayerData \u003d new LinkedHashMap\u003c\u003e();\n    }\n\n    public void increment(String player)\n    {\n        if (specificPlayerData.containsKey(player))\n        {\n            specificPlayerData.put(player, specificPlayerData.get(player) + 1);\n        } else\n        {\n            specificPlayerData.put(player, 1);\n        }\n    }\n\n    public void increment(String player, int valueAdded)\n    {\n        if (specificPlayerData.containsKey(player))\n        {\n            specificPlayerData.put(player, specificPlayerData.get(player) + valueAdded);\n        } else\n        {\n            specificPlayerData.put(player, valueAdded);\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\datautility\\DataPointPlayerData.java"},{"fileName":"DataWriter.java","content":"package com.advancedraidtracker.utility.datautility;\n\nimport com.advancedraidtracker.AdvancedRaidTrackerConfig;\nimport lombok.extern.slf4j.Slf4j;\nimport com.advancedraidtracker.constants.LogID;\n\nimport java.io.*;\nimport java.nio.charset.StandardCharsets;\nimport java.util.ArrayList;\nimport java.util.Objects;\n\n@Slf4j\npublic class DataWriter\n{\n    private final AdvancedRaidTrackerConfig config;\n    private String activeUsername \u003d \"\";\n    private final ArrayList\u003cString\u003e currentBuffer;\n\n    public final static String PLUGIN_DIRECTORY \u003d System.getProperty(\"user.home\").replace(\"\\\\\", \"/\") + \"/.runelite/advancedraidtracker/\";\n\n    public DataWriter(AdvancedRaidTrackerConfig config) throws IOException\n    {\n        this.config \u003d config;\n        currentBuffer \u003d new ArrayList\u003c\u003e();\n    }\n\n    public void setName(String name) throws IOException\n    {\n        activeUsername \u003d name;\n        File dirMain \u003d new File(PLUGIN_DIRECTORY + name + \"/primary/\");\n        File dirFilters \u003d new File(PLUGIN_DIRECTORY + \"misc-dir/filters/\");\n        File dirRaids \u003d new File(PLUGIN_DIRECTORY + \"misc-dir/raids/\");\n\n        if (!dirRaids.exists())\n        {\n            if (!dirRaids.mkdirs())\n            {\n                log.info(\"Failed to create raids directory for username \" + name);\n            }\n        }\n        if (!dirMain.exists())\n        {\n            if (!dirMain.mkdirs())\n            {\n                log.info(\"Failed to create main directory for username \" + name);\n            }\n        }\n        if (!dirFilters.exists())\n        {\n            if (!dirFilters.mkdirs())\n            {\n                log.info(\"Failed to create filter directory for username \" + name);\n            }\n        }\n\n        File logFile \u003d new File(PLUGIN_DIRECTORY + name + \"/primary/tobdata.log\");\n        if (!logFile.exists())\n        {\n            if (!logFile.createNewFile())\n            {\n                log.info(\"Failed to create log file\");\n            }\n        }\n    }\n\n    //If you X out client in the middle of a raid it does not record the flag that the raid ended, so this is called when you enter a tob to see\n    //if an active datafile and if so it adds an exit flag to the end\n    public void checkForEndFlag()\n    {\n        File logFile \u003d new File(PLUGIN_DIRECTORY + activeUsername + \"/primary/tobdata.log\");\n        if (logFile.exists())\n        {\n            if (logFile.length() \u003e 0)\n            {\n                currentBuffer.add(\",\" + System.currentTimeMillis() + \",1,\" + 4 + \",\" + \",\" + \",\" + \",\" + \",\");\n                writeFile();\n            }\n        }\n    }\n\n    public void migrateToNewRaid()\n    {\n        int highest \u003d getHighestLogNumber(activeUsername);\n        File logFile \u003d new File(PLUGIN_DIRECTORY + activeUsername + \"/primary/tobdata.log\");\n        if (!logFile.exists())\n        {\n            log.info(\"Could not migrate because file does not exist\");\n            return;\n        }\n        if (logFile.length() \u003d\u003d 0)\n        {\n            return;\n        } //Inject number to log file before the \u0027.log\u0027 e.g. tobdata.log -\u003e tobdata\u003cnumber\u003e.log\n        if (!logFile.renameTo(new File(logFile.getAbsolutePath().substring(0, logFile.getAbsolutePath().length() - 4) + (highest + 1) + \".log\")))\n        {\n            log.info(\"Could not rename primary log file\");\n        } else\n        {\n            logFile \u003d new File(PLUGIN_DIRECTORY + activeUsername + \"/primary/tobdata.log\");\n            if (!logFile.exists())\n            {\n                try\n                {\n                    if (!logFile.createNewFile())\n                    {\n                        log.info(\"Replacement file creation unsuccessful\");\n                    }\n                } catch (Exception e)\n                {\n                    log.info(\"Exception thrown when creating replacement log file: \" + logFile.getAbsolutePath());\n                }\n            }\n        }\n    }\n\n    public static int getHighestLogNumber(String name)\n    {\n        String directory \u003d PLUGIN_DIRECTORY;\n        if (!name.isEmpty())\n        {\n            directory +\u003d name + \"/primary/\";\n        } else\n        {\n            directory +\u003d \"primary/\";\n        }\n        File logDirectory \u003d new File(directory);\n        if(!logDirectory.exists())\n        {\n            if(!logDirectory.mkdirs())\n            {\n                log.info(\"Could not make directory to find log number\");\n            }\n        }\n        int highestLogNumber \u003d 0;\n        for (File file : Objects.requireNonNull(new File(directory).listFiles()))\n        {\n            if (file.getName().contains(\"tobdata\"))\n            {\n                int index \u003d file.getName().indexOf(\".log\");\n                if (index !\u003d -1)\n                {\n                    try\n                    {\n                        int logNumber \u003d Integer.parseInt(file.getName().substring(7, index));\n                        if (logNumber \u003e highestLogNumber)\n                        {\n                            highestLogNumber \u003d logNumber;\n                        }\n                    } catch\n                    (Exception ignored)\n                    {\n                    }\n                }\n            }\n        }\n        return highestLogNumber;\n    }\n\n    /**\n     * Writes a message to the log with the time, message ID, and up to 5 additional parameters\n     *\n     * @param id LogID of message\n     */\n    public void addLine(LogID id, String... params)\n    {\n        if (params.length \u003e 5)\n            throw new IllegalArgumentException(\"Too many values passed to DataWriter\");\n        String[] values \u003d {\"\", \"\", \"\", \"\", \"\"};\n        System.arraycopy(params, 0, values, 0, params.length);\n        addLine(id.getId(), values[0], values[1], values[2], values[3], values[4]);\n    }\n\n    public void addLine(int key, String v1, String v2, String v3, String v4, String v5)\n    {\n        int versionID \u003d 1;\n        currentBuffer.add(getUID() + \",\" + System.currentTimeMillis() + \",\" + versionID + \",\" + key + \",\" + v1 + \",\" + v2 + \",\" + v3 + \",\" + v4 + \",\" + v5);\n    }\n\n    public static void writeAliasFile(String aliasText)\n    {\n        try\n        {\n            File aliasFile \u003d new File(PLUGIN_DIRECTORY + \"alias/alias.log\");\n            if (!aliasFile.exists())\n            {\n                File directory \u003d new File(PLUGIN_DIRECTORY + \"alias/\");\n                if (!directory.exists())\n                {\n                    if (!directory.mkdirs())\n                    {\n                        log.info(\"Failed to create alias directory\");\n                    }\n                }\n                if (!aliasFile.createNewFile())\n                {\n                    log.info(\"Failed to create alias file\");\n                }\n            }\n            BufferedWriter logger \u003d new BufferedWriter(new OutputStreamWriter(new FileOutputStream(PLUGIN_DIRECTORY + \"alias/alias.log\", false), StandardCharsets.UTF_8));\n            logger.write(aliasText);\n            logger.close();\n        } catch (IOException e)\n        {\n            log.info(\"Failed writing to alias file\");\n        }\n    }\n\n    public static ArrayList\u003cString\u003e readAliasFile()\n    {\n        ArrayList\u003cString\u003e lines \u003d new ArrayList\u003c\u003e();\n        BufferedReader reader;\n        try\n        {\n            reader \u003d new BufferedReader(new FileReader(PLUGIN_DIRECTORY + \"alias/alias.log\"));\n            String line \u003d reader.readLine();\n            while (line !\u003d null)\n            {\n                lines.add(line);\n                line \u003d reader.readLine();\n            }\n        } catch (Exception e)\n        {\n            return lines;\n        }\n        return lines;\n    }\n\n    public void writeFile()\n    {\n        if (config.writeToLog())\n        {\n            try\n            {\n                File logFile \u003d new File(PLUGIN_DIRECTORY + activeUsername + \"/primary/tobdata.log\");\n                if (!logFile.exists())\n                {\n                    if (!logFile.createNewFile())\n                    {\n                        log.info(\"Failed to create log file\");\n                    }\n                }\n                BufferedWriter logger \u003d new BufferedWriter(new OutputStreamWriter(new FileOutputStream(PLUGIN_DIRECTORY + activeUsername + \"/primary/tobdata.log\", true), StandardCharsets.UTF_8));\n                for (String msg : currentBuffer)\n                {\n                    logger.write(msg);\n                    logger.newLine();\n                }\n                logger.close();\n            } catch (IOException e)\n            {\n                log.info(\"Failed clearing buffered tob data to log\");\n            }\n        }\n        currentBuffer.clear();\n    }\n\n    public static void writeFile(ArrayList\u003cString\u003e raid, String filePath)\n    {\n        try\n        {\n            File logFile \u003d new File(filePath);\n            if (!logFile.exists())\n            {\n                if (!logFile.createNewFile())\n                {\n                    log.info(\"Failed to create log file\");\n                }\n            }\n            BufferedWriter logger \u003d new BufferedWriter(new OutputStreamWriter(new FileOutputStream(filePath, true), StandardCharsets.UTF_8));\n            for (String msg : raid)\n            {\n                logger.write(msg);\n                logger.newLine();\n            }\n            logger.close();\n        } catch (IOException e)\n        {\n            log.info(\"Failed clearing buffered tob data to log\");\n        }\n    }\n\n\n    private String getUID()\n    {\n        return \"\";\n    } //deprecated\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\datautility\\DataWriter.java"},{"fileName":"LegacyFileUtility.java","content":"package com.advancedraidtracker.utility.datautility;\n\nimport lombok.extern.slf4j.Slf4j;\n\nimport java.io.*;\nimport java.nio.file.Files;\nimport java.util.ArrayList;\nimport java.util.Objects;\nimport java.util.Scanner;\n\nimport static com.advancedraidtracker.constants.TobIDs.EXIT_FLAG;\nimport static com.advancedraidtracker.utility.datautility.DataWriter.*;\n\n@Slf4j\npublic class LegacyFileUtility //Older versions of the plugin during testing used a different file structure, this class contains methods used to migrate those\n{\n    public static void splitLegacyFiles()\n    {\n        try\n        {\n            String path \u003d System.getProperty(\"user.home\").replace(\"\\\\\", \"/\") + \"/.runelite/theatretracker/primary/\"; //old directory\n            File logDirectory \u003d new File(path);\n            if (!logDirectory.exists())\n            {\n                return;\n            }\n            ArrayList\u003cString\u003e currentRaid \u003d new ArrayList\u003c\u003e();\n            for (File file : Objects.requireNonNull(logDirectory.listFiles()))\n            {\n                if (file.getName().contains(\"tobdata\") \u0026\u0026 !file.getName().contains(\"archive\"))\n                {\n                    Scanner logReader \u003d new Scanner(Files.newInputStream(file.toPath()));\n                    while (logReader.hasNextLine())\n                    {\n                        String line \u003d logReader.nextLine();\n                        String[] lineSplit \u003d line.split(\",\");\n                        currentRaid.add(line);\n                        if (Objects.equals(lineSplit[3], EXIT_FLAG))\n                        {\n                            int highestLog \u003d getHighestLogNumber(\"legacy-files\");\n                            writeFile(currentRaid, PLUGIN_DIRECTORY + \"legacy-files/primary/\" + \"tobdata\" + (highestLog + 1) + \".log\");\n                            currentRaid.clear();\n                        }\n                    }\n                    if (!file.renameTo(new File(file.getAbsolutePath().substring(0, file.getAbsolutePath().length()-4)+\"-archive.log\")))\n                    {\n                        log.info(\"failed to rename old file\");\n                    }\n                }\n            }\n            path \u003d System.getProperty(\"user.home\").replace(\"\\\\\", \"/\") + \"/.runelite/theatretracker/\";\n            File oldDirectory \u003d new File(path);\n            if(oldDirectory.exists())\n            {\n                for(File folder : Objects.requireNonNull(oldDirectory.listFiles()))\n                {\n                    if(folder.isDirectory() \u0026\u0026 !folder.getName().equals(\"primary\"))\n                    {\n                        try\n                        {\n                            File newSubDirectory \u003d new File(PLUGIN_DIRECTORY + \"misc-dir/\");\n                            if(!newSubDirectory.exists())\n                            {\n                                if(!newSubDirectory.mkdirs())\n                                {\n                                    log.info(\"Failed to create folder: \" + newSubDirectory.getAbsolutePath());\n                                }\n                            }\n                            Files.move(folder.toPath(), (new File(PLUGIN_DIRECTORY + \"misc-dir/\" + folder.getName()).toPath()));\n                        }\n                        catch(Exception e)\n                        {\n                            log.info(\"Failed to move folder \" + folder.getAbsolutePath());\n                        }\n                    }\n                }\n            }\n        } catch (IOException e)\n        {\n            log.info(\"Failed splitting legacy file\");\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\datautility\\LegacyFileUtility.java"},{"fileName":"RaidsManager.java","content":"package com.advancedraidtracker.utility.datautility;\n\nimport com.advancedraidtracker.SimpleTOBData;\nimport com.advancedraidtracker.ui.RaidTrackerSidePanel;\nimport com.advancedraidtracker.utility.wrappers.RaidsArrayWrapper;\nimport lombok.extern.slf4j.Slf4j;\n\n\nimport java.io.BufferedWriter;\nimport java.io.File;\nimport java.io.IOException;\nimport java.io.OutputStreamWriter;\nimport java.nio.file.Files;\nimport java.util.ArrayList;\nimport java.util.Objects;\nimport java.util.Scanner;\n\nimport static com.advancedraidtracker.utility.datautility.DataWriter.PLUGIN_DIRECTORY;\n@Slf4j\npublic class RaidsManager\n{\n    private static final String raidsFolder \u003d PLUGIN_DIRECTORY + \"/misc-dir/raids/\";\n\n    public static ArrayList\u003cRaidsArrayWrapper\u003e getRaidsSets()\n    {\n        ArrayList\u003cRaidsArrayWrapper\u003e raidSets \u003d new ArrayList\u003c\u003e();\n        File folder \u003d new File(raidsFolder);\n        if (!folder.exists()) if(!folder.mkdirs()){log.info(\"Couldn\u0027t make misc dir\");}\n        try\n        {\n            for (File entry : Objects.requireNonNull(folder.listFiles()))\n            {\n                if (entry.isDirectory())\n                {\n                    ArrayList\u003cSimpleTOBData\u003e raids \u003d new ArrayList\u003c\u003e();\n                    for(File raid : Objects.requireNonNull(entry.listFiles()))\n                    {\n                        try\n                        {\n                            RaidTrackerSidePanel.parseLogFile(raids, raid, raid.getAbsolutePath());\n                        } catch (Exception e)\n                        {\n                            log.info(\"Failed to parse log file \" + raid.getAbsolutePath());\n                        }\n                    }\n                    raidSets.add(new RaidsArrayWrapper(raids, entry.getName()));\n                }\n            }\n        } catch (Exception e)\n        {\n            log.info(\"Failed parsing raid sets\");\n        }\n        return raidSets;\n    }\n\n    public static boolean doesRaidExist(String name)\n    {\n        File folder \u003d new File(raidsFolder);\n        try\n        {\n            for (File entry : Objects.requireNonNull(folder.listFiles()))\n            {\n                if (entry.getName().equals(name + \".raids\"))\n                {\n                    return true;\n                }\n            }\n        } catch (Exception e)\n        {\n            log.info(\"Could not determine if raid exists\");\n        }\n        return false;\n    }\n\n    public static void saveOverwriteRaids(String name, ArrayList\u003cSimpleTOBData\u003e raids)\n    {\n        try\n        {\n            File directory \u003d new File(raidsFolder);\n            if (!directory.exists())\n            {\n                if(!directory.mkdirs()) {log.info(\"Could not make overwrite dir\");}\n            }\n            File raidsFile \u003d new File(raidsFolder + name+\"/\");\n\n            if (raidsFile.exists())\n            {\n                if(!raidsFile.delete())\n                {\n                    log.info(\"Could not delete file during overwrite\");\n                }\n            }\n            if(!raidsFile.mkdirs())\n            {\n                log.info(\"Could not make directories during overwrite\");\n            }\n            writeRaid(name, raids);\n        } catch (Exception e)\n        {\n            log.info(\"Could not write overwrite raid\");\n        }\n    }\n\n    private static void writeRaid(String name, ArrayList\u003cSimpleTOBData\u003e raids) throws IOException\n    {\n        for (SimpleTOBData raid : raids)\n        {\n            File newEntry \u003d new File(raidsFolder + name + \"/\" + raid.fileName);\n            Files.createFile(newEntry.toPath());\n            BufferedWriter fileWriter \u003d new BufferedWriter(new OutputStreamWriter(Files.newOutputStream(newEntry.toPath())));\n            File file \u003d new File(raid.filePath);\n            Scanner logReader \u003d new Scanner(Files.newInputStream(file.toPath()));\n            while (logReader.hasNextLine())\n            {\n                fileWriter.write(logReader.nextLine());\n                fileWriter.newLine();\n            }\n            fileWriter.close();\n        }\n    }\n\n    public static void saveRaids(String name, ArrayList\u003cSimpleTOBData\u003e raids)\n    {\n        try\n        {\n            File directory \u003d new File(raidsFolder);\n            if (!directory.exists())\n            {\n                if(!directory.mkdirs())\n                {\n                    log.info(\"Could not make directory to save raid\");\n                }\n            }\n            File raidsFile \u003d new File(raidsFolder + name+\"/\");\n            if (!raidsFile.exists())\n            {\n                if(!raidsFile.mkdirs())\n                {\n                    log.info(\"Could not make directory for specific folder for raid\");\n                }\n            }\n            writeRaid(name, raids);\n        } catch (Exception e)\n        {\n            log.info(\"Could not write save file\");\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\datautility\\RaidsManager.java"},{"fileName":"ItemReference.java","content":"package com.advancedraidtracker.utility;\n\npublic class ItemReference\n{\n\n    public static String[][] ITEMS \u003d {\n            {\"none\", \"elite void\", \"void knight\", \"blood fury\"},\n            {\n                    \"torva\",\n                    \"defender\",\n                    \"scythe\",\n                    \"osmumten\",\n                    \"blade\",\n                    \"halberd\",\n                    \"melee\",\n                    \"dagger\",\n                    \"inquisitor\",\n                    \"claws\",\n                    \"rapier\",\n                    \"bulwark\",\n                    \"hammer\",\n                    \"primordial\",\n                    \"ferocious\",\n                    \"infernal\",\n                    \"fire cape\",\n                    \"bandos\",\n                    \"godsword\",\n                    \"dragon boots\",\n                    \"whip\",\n                    \"tentacle\",\n                    \"salve\",\n                    \"faceguard\",\n                    \"torso\",\n                    \"joint\",\n                    \"torture\",\n                    \"serpentine helm\",\n                    \"barrows\",\n                    \"rancour\",\n                    \"oathplate\",\n                    \"sulphur\",\n                    \"macuahuitl\",\n                    \"tacpatl\",\n                    \"avernic treads\"\n            },\n            {\n                    \"masori\",\n                    \"bow\",\n                    \"range\",\n                    \"blowpipe\",\n                    \"anguish\",\n                    \"assembler\",\n                    \"pegasian\",\n                    \"buckler\",\n                    \"chinchompa\",\n                    \"vambraces\",\n                    \"ralos\",\n                    \"dizana\",\n                    \"avernic treads\"\n            },\n            {\n                    \"ancestral\",\n                    \"virtus\",\n                    \"occult\",\n                    \"tormented\",\n                    \"tumeken\",\n                    \"staff\",\n                    \"mage\",\n                    \"eternal\",\n                    \"imbued\",\n                    \"trident\",\n                    \"kodai\",\n                    \"ice\",\n                    \"ward\",\n                    \"dawnbringer\",\n                    \"ancient sceptre\",\n                    \"ayak\",\n                    \"confliction\",\n                    \"avernic treads\"\n            }\n    };\n\n    public static final int MELEE \u003d 1;\n    public static final int RANGE \u003d 2;\n    public static final int MAGE \u003d 3;\n    public static final int NONE \u003d 0;\n\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\ItemReference.java"},{"fileName":"BloodDamageToBeApplied.java","content":"package com.advancedraidtracker.utility.maidenbloodtracking;\n\npublic class BloodDamageToBeApplied\n{\n    public String playerName;\n    public int bloodTicksAlive;\n\n    public BloodDamageToBeApplied(String playerName, int bloodTicksAlive)\n    {\n        this.playerName \u003d playerName;\n        this.bloodTicksAlive \u003d bloodTicksAlive;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\maidenbloodtracking\\BloodDamageToBeApplied.java"},{"fileName":"BloodPositionWrapper.java","content":"package com.advancedraidtracker.utility.maidenbloodtracking;\n\nimport net.runelite.api.coords.WorldPoint;\n\npublic class BloodPositionWrapper\n{\n    public int finalTick;\n    public int initialTick;\n    public WorldPoint location;\n\n    public BloodPositionWrapper(WorldPoint location, int initialTick)\n    {\n        this.initialTick \u003d initialTick;\n        this.location \u003d location;\n        this.finalTick \u003d initialTick + 10;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\maidenbloodtracking\\BloodPositionWrapper.java"},{"fileName":"NylocasData.java","content":"package com.advancedraidtracker.utility.nyloutility;\n\npublic class NylocasData\n{\n    public enum NylocasType\n    {\n        MELEE_BIG,\n        MELEE_SMALL,\n        RANGE_BIG,\n        RANGE_SMALL,\n        MAGE_BIG,\n        MAGE_SMALL,\n        MAGE_MELEE_RANGE_SMALL,\n        MELEE_MAGE_RANGE_SMALL,\n        RAMGE_MAGE_RANGE_SMALL,\n        MAGE_MELEE_MAGE_BIG,\n        RANGE_MAGE_RANGE_BIG,\n        MELEE_RANGE_MELEE_BIG,\n        MAGE_RANGE_MELEE_BIG,\n        RANGE_MELEE_RANGE_SMALL,\n        MELEE_MAGE_MELEE_SMALL,\n        MELEE_RANGE_MELEE_SMALL,\n        MAGE_RANGE_MAGE_SMALL,\n        RANGE_MAGE_MELEE_SMALL,\n        MAGE_RANGE_MELEE_SMALL,\n        RANGE_MAGE_MELEE_BIG,\n        RANGE_MAGE_RANGE_SMALL,\n        MELEE_MAGE_MELEE_BIG,\n        MELEE_MAGE_RANGE_BIG,\n        MAGE_MELEE_MAGE_SMALL,\n        RANGE_MELEE_MAGE_SMALL,\n        MELEE_RANGE_MAGE_SMALL,\n        RANGE_MELEE_RANGE_BIG,\n    }\n\n    public enum NyloPosition\n    {\n        EAST_NORTH,\n        EAST_SOUTH,\n        SOUTH_EAST,\n        SOUTH_WEST,\n        WEST_SOUTH,\n        WEST_NORTH,\n        EAST_BIG,\n        SOUTH_BIG,\n        WEST_BIG,\n        ROOM\n    }\n\n    public NylocasData(NyloPosition position, NylocasType type, boolean aggro)\n    {\n        this.position \u003d position;\n        this.type \u003d type;\n        this.aggro \u003d aggro;\n    }\n\n    public int getSpawnStyle()\n    {\n        switch (type)\n        {\n            case MELEE_SMALL:\n            case MELEE_MAGE_RANGE_SMALL:\n            case MELEE_MAGE_MELEE_SMALL:\n            case MELEE_RANGE_MELEE_SMALL:\n            case MELEE_RANGE_MAGE_SMALL:\n                return 0;\n            case MELEE_MAGE_MELEE_BIG:\n            case MELEE_MAGE_RANGE_BIG:\n            case MELEE_RANGE_MELEE_BIG:\n            case MELEE_BIG:\n                return 3;\n            case MAGE_BIG:\n            case MAGE_RANGE_MELEE_BIG:\n            case MAGE_MELEE_MAGE_BIG:\n                return 5;\n            case MAGE_SMALL:\n            case MAGE_MELEE_MAGE_SMALL:\n            case MAGE_MELEE_RANGE_SMALL:\n            case MAGE_RANGE_MAGE_SMALL:\n            case MAGE_RANGE_MELEE_SMALL:\n                return 2;\n            case RANGE_MAGE_MELEE_BIG:\n            case RANGE_BIG:\n            case RANGE_MAGE_RANGE_BIG:\n            case RANGE_MELEE_RANGE_BIG:\n                return 4;\n            case RANGE_MELEE_RANGE_SMALL:\n            case RANGE_MELEE_MAGE_SMALL:\n            case RANGE_MAGE_RANGE_SMALL:\n            case RANGE_MAGE_MELEE_SMALL:\n            case RANGE_SMALL:\n                return 1;\n        }\n        return -1;\n    }\n\n    public NyloPosition position;\n    public NylocasType type;\n    public boolean aggro;\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\nyloutility\\NylocasData.java"},{"fileName":"NylocasShell.java","content":"package com.advancedraidtracker.utility.nyloutility;\n\nimport static com.advancedraidtracker.constants.TobIDs.*;\nimport static com.advancedraidtracker.constants.TobIDs.NYLO_MELEE_SMALL_AGRO_SM;\n\npublic class NylocasShell\n{\n    public int style;\n    public NylocasData.NyloPosition position;\n\n    public boolean isBig()\n    {\n        return (style \u003e 2);\n    }\n\n    public static String getTypeName(int id)\n    {\n        switch (id)\n        {\n            case NYLO_MELEE_SMALL:\n            case NYLO_MELEE_SMALL_AGRO:\n            case NYLO_MELEE_SMALL_HM:\n            case NYLO_MELEE_SMALL_AGRO_HM:\n            case NYLO_MELEE_SMALL_SM:\n            case NYLO_MELEE_SMALL_AGRO_SM:\n                return \"melee\";\n            case NYLO_RANGE_SMALL:\n            case NYLO_RANGE_SMALL_AGRO:\n            case NYLO_RANGE_SMALL_HM:\n            case NYLO_RANGE_SMALL_AGRO_HM:\n            case NYLO_RANGE_SMALL_SM:\n            case NYLO_RANGE_SMALL_AGRO_SM:\n                return \"range\";\n            case NYLO_MAGE_SMALL:\n            case NYLO_MAGE_SMALL_AGRO:\n            case NYLO_MAGE_SMALL_HM:\n            case NYLO_MAGE_SMALL_AGRO_HM:\n            case NYLO_MAGE_SMALL_SM:\n            case NYLO_MAGE_SMALL_AGRO_SM:\n                return \"mage\";\n\n        }\n        return \"\";\n    }\n\n    public String getDescription()\n    {\n        String type \u003d \"\";\n        switch (style)\n        {\n            case 0:\n            case 3:\n                type \u003d \"melee\";\n                break;\n            case 1:\n            case 4:\n                type \u003d \"range\";\n                break;\n            case 2:\n            case 5:\n                type \u003d \"mage\";\n                break;\n        }\n        if (style \u003e 2)\n        {\n            switch (position) //spawn position for bigs is shared with littles on south/west, but southwest tile of east big is in unique spot\n            {\n                case EAST_BIG:\n                    return \"east big \" + type;\n                case SOUTH_WEST:\n                    return \"south big \" + type;\n                case WEST_SOUTH:\n                    return \"west big \" + type;\n            }\n        }\n        switch (position)\n        {\n            case EAST_NORTH:\n                return \"east small \" + type + \" (N)\";\n            case EAST_SOUTH:\n                return \"east small \" + type + \" (S)\";\n            case SOUTH_EAST:\n                return \"south small \" + type + \" (E)\";\n            case SOUTH_WEST:\n                return \"south small \" + type + \" (W)\";\n            case WEST_NORTH:\n                return \"west small \" + type + \" (N)\";\n            case WEST_SOUTH:\n                return \"west small \" + type + \" (S)\";\n        }\n        return \"\";\n    }\n\n    public NylocasShell(int id, int x, int y)\n    {\n        switch (id)\n        {\n            case NYLO_MELEE_SMALL_HM:\n            case NYLO_MELEE_SMALL_SM:\n            case NYLO_MELEE_SMALL:\n            case NYLO_MELEE_SMALL_AGRO_HM:\n            case NYLO_MELEE_SMALL_AGRO_SM:\n                style \u003d 0;\n                break;\n            case NYLO_RANGE_SMALL_HM:\n            case NYLO_RANGE_SMALL_SM:\n            case NYLO_RANGE_SMALL:\n            case NYLO_RANGE_SMALL_AGRO_HM:\n            case NYLO_RANGE_SMALL_AGRO_SM:\n            case NYLO_RANGE_SMALL_AGRO:\n                style \u003d 1;\n                break;\n            case NYLO_MAGE_SMALL_HM:\n            case NYLO_MAGE_SMALL_SM:\n            case NYLO_MAGE_SMALL:\n            case NYLO_MAGE_SMALL_AGRO_HM:\n            case NYLO_MAGE_SMALL_AGRO_SM:\n            case NYLO_MAGE_SMALL_AGRO:\n                style \u003d 2;\n                break;\n            case NYLO_MELEE_BIG:\n            case NYLO_MELEE_BIG_HM:\n            case NYLO_MELEE_BIG_SM:\n            case NYLO_MELEE_BIG_AGRO:\n            case NYLO_MELEE_BIG_AGRO_HM:\n            case NYLO_MELEE_BIG_AGRO_SM:\n                style \u003d 3;\n                break;\n            case NYLO_RANGE_BIG_HM:\n            case NYLO_RANGE_BIG_SM:\n            case NYLO_RANGE_BIG:\n            case NYLO_RANGE_BIG_AGRO_HM:\n            case NYLO_RANGE_BIG_AGRO_SM:\n            case NYLO_RANGE_BIG_AGRO:\n                style \u003d 4;\n                break;\n            case NYLO_MAGE_BIG:\n            case NYLO_MAGE_BIG_HM:\n            case NYLO_MAGE_BIG_SM:\n            case NYLO_MAGE_BIG_AGRO:\n            case NYLO_MAGE_BIG_AGRO_HM:\n            case NYLO_MAGE_BIG_AGRO_SM:\n                style \u003d 5;\n                break;\n        }\n        if (x \u003d\u003d 9 \u0026\u0026 y \u003d\u003d 25)\n        {\n            position \u003d NylocasData.NyloPosition.WEST_NORTH;\n        } else if (x \u003d\u003d 9 \u0026\u0026 y \u003d\u003d 24)\n        {\n            position \u003d NylocasData.NyloPosition.WEST_SOUTH;\n        } else if (x \u003d\u003d 23 \u0026\u0026 y \u003d\u003d 9)\n        {\n            position \u003d NylocasData.NyloPosition.SOUTH_WEST;\n        } else if (x \u003d\u003d 24 \u0026\u0026 y \u003d\u003d 9)\n        {\n            position \u003d NylocasData.NyloPosition.SOUTH_EAST;\n        } else if (x \u003d\u003d 38 \u0026\u0026 y \u003d\u003d 24)\n        {\n            position \u003d NylocasData.NyloPosition.EAST_SOUTH;\n        } else if (x \u003d\u003d 38 \u0026\u0026 y \u003d\u003d 25)\n        {\n            position \u003d NylocasData.NyloPosition.EAST_NORTH;\n        } else if (x \u003d\u003d 37 \u0026\u0026 y \u003d\u003d 24)\n        {\n            position \u003d NylocasData.NyloPosition.EAST_BIG;\n        } else\n        {\n            position \u003d NylocasData.NyloPosition.ROOM;\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\nyloutility\\NylocasShell.java"},{"fileName":"NylocasWave.java","content":"package com.advancedraidtracker.utility.nyloutility;\n\nimport lombok.Getter;\n\nimport java.util.Arrays;\nimport java.util.List;\n\npublic class NylocasWave\n{\n    @Getter\n    private final int wave;\n    @Getter\n    private final int delay;\n    private final NylocasData[] nylos;\n\n    public static NylocasWave[] waves \u003d\n            {\n                    new NylocasWave(1, 4,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.RANGE_SMALL, true),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_EAST, NylocasData.NylocasType.MAGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_NORTH, NylocasData.NylocasType.MELEE_SMALL, false)\n                            }),\n                    new NylocasWave(2, 4,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.EAST_SOUTH, NylocasData.NylocasType.RANGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.WEST_NORTH, NylocasData.NylocasType.MAGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.MELEE_SMALL, true)\n                            }),\n                    new NylocasWave(3, 4,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_EAST, NylocasData.NylocasType.RANGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_NORTH, NylocasData.NylocasType.MAGE_SMALL, true),\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.MELEE_SMALL, false)\n                            }),\n                    new NylocasWave(4, 4,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.WEST_NORTH, NylocasData.NylocasType.RANGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.MAGE_BIG, false),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_SOUTH, NylocasData.NylocasType.MELEE_SMALL, false)\n                            }),\n                    new NylocasWave(5, 4,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.RANGE_BIG, false),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_NORTH, NylocasData.NylocasType.MAGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_EAST, NylocasData.NylocasType.MELEE_SMALL, false)\n                            }),\n                    new NylocasWave(6, 16,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.RANGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.WEST_NORTH, NylocasData.NylocasType.MAGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_BIG, NylocasData.NylocasType.MELEE_BIG, false)\n                            }),\n                    new NylocasWave(7, 4,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.RANGE_BIG, true),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_EAST, NylocasData.NylocasType.MAGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_NORTH, NylocasData.NylocasType.MELEE_SMALL, false)\n                            }),\n                    new NylocasWave(8, 12,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.EAST_SOUTH, NylocasData.NylocasType.RANGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.MAGE_BIG, true),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.MELEE_SMALL, false)\n                            }),\n                    new NylocasWave(9, 4,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.RANGE_BIG, true),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_NORTH, NylocasData.NylocasType.MAGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.MELEE_SMALL, false)\n                            }),\n                    new NylocasWave(10, 16,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.EAST_BIG, NylocasData.NylocasType.RANGE_BIG, true),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_NORTH, NylocasData.NylocasType.RANGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.RANGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_EAST, NylocasData.NylocasType.RANGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.WEST_NORTH, NylocasData.NylocasType.RANGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.RANGE_SMALL, true)\n                            }),\n                    new NylocasWave(11, 8,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.EAST_SOUTH, NylocasData.NylocasType.MAGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_NORTH, NylocasData.NylocasType.MAGE_SMALL, true),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.MAGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_EAST, NylocasData.NylocasType.MAGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.MAGE_BIG, true),\n                            }),\n                    new NylocasWave(12, 8,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.EAST_SOUTH, NylocasData.NylocasType.MELEE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_NORTH, NylocasData.NylocasType.MELEE_SMALL, true),\n                                    new NylocasData(NylocasData.NyloPosition.WEST_NORTH, NylocasData.NylocasType.MELEE_SMALL, true),\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.MELEE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.MELEE_BIG, false),\n                            }),\n                    new NylocasWave(13, 8,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_EAST, NylocasData.NylocasType.RANGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.MELEE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.MAGE_SMALL, true),\n                                    new NylocasData(NylocasData.NyloPosition.WEST_NORTH, NylocasData.NylocasType.RANGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_BIG, NylocasData.NylocasType.MELEE_BIG, true),\n                            }),\n                    new NylocasWave(14, 8,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.MELEE_SMALL, true),\n                                    new NylocasData(NylocasData.NyloPosition.WEST_NORTH, NylocasData.NylocasType.MAGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.RANGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_EAST, NylocasData.NylocasType.MAGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_BIG, NylocasData.NylocasType.RANGE_BIG, true),\n                            }),\n                    new NylocasWave(15, 8,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.RANGE_SMALL, true),\n                                    new NylocasData(NylocasData.NyloPosition.WEST_NORTH, NylocasData.NylocasType.MELEE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_SOUTH, NylocasData.NylocasType.RANGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_NORTH, NylocasData.NylocasType.MAGE_SMALL, true),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.MAGE_BIG, false),\n                            }),\n                    new NylocasWave(16, 8,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.MELEE_MAGE_RANGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.WEST_NORTH, NylocasData.NylocasType.RANGE_MAGE_RANGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_SOUTH, NylocasData.NylocasType.MAGE_MELEE_RANGE_SMALL, false),\n                            }),\n                    new NylocasWave(17, 4,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.MAGE_MELEE_MAGE_BIG, false),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.MAGE_MELEE_MAGE_BIG, false),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_BIG, NylocasData.NylocasType.MAGE_MELEE_MAGE_BIG, false),\n                            }),\n                    new NylocasWave(18, 12,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.RANGE_MAGE_RANGE_BIG, true),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.RANGE_MAGE_RANGE_BIG, false),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_BIG, NylocasData.NylocasType.RANGE_MAGE_RANGE_BIG, false),\n                            }),\n                    new NylocasWave(19, 8,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.MAGE_MELEE_MAGE_BIG, false),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.MAGE_MELEE_MAGE_BIG, false),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_BIG, NylocasData.NylocasType.MAGE_MELEE_MAGE_BIG, false),\n                            }),\n                    new NylocasWave(20, 12,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.MELEE_RANGE_MELEE_BIG, false),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.MAGE_RANGE_MELEE_BIG, true),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_BIG, NylocasData.NylocasType.MELEE_MAGE_RANGE_BIG, false),\n                            }),\n                    new NylocasWave(21, 16,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.MAGE_MELEE_RANGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.WEST_NORTH, NylocasData.NylocasType.MAGE_RANGE_MAGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_SOUTH, NylocasData.NylocasType.RANGE_MELEE_RANGE_SMALL, true),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_NORTH, NylocasData.NylocasType.RANGE_MELEE_RANGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.MELEE_RANGE_MELEE_SMALL, true),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_EAST, NylocasData.NylocasType.MELEE_MAGE_MELEE_SMALL, false),\n                            }),\n                    new NylocasWave(22, 8,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.MAGE_RANGE_MELEE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_EAST, NylocasData.NylocasType.RANGE_MAGE_MELEE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.MELEE_RANGE_MELEE_BIG, false),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_BIG, NylocasData.NylocasType.MAGE_RANGE_MELEE_BIG, true),\n                            }),\n                    new NylocasWave(23, 12,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.RANGE_MAGE_RANGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.WEST_NORTH, NylocasData.NylocasType.MAGE_RANGE_MELEE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.RANGE_MAGE_MELEE_BIG, true),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_BIG, NylocasData.NylocasType.MAGE_RANGE_MELEE_BIG, false),\n                            }),\n                    new NylocasWave(24, 8,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.RANGE_MAGE_MELEE_BIG, true),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.MAGE_BIG, true),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_BIG, NylocasData.NylocasType.MELEE_BIG, true),\n                            }),\n                    new NylocasWave(25, 8,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.MELEE_BIG, true),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.RANGE_BIG, false),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_BIG, NylocasData.NylocasType.MAGE_MELEE_MAGE_BIG, false),\n                            }),\n                    new NylocasWave(26, 8,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.MAGE_BIG, true),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.MELEE_MAGE_MELEE_BIG, false),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_BIG, NylocasData.NylocasType.MAGE_BIG, false),\n                            }),\n                    new NylocasWave(27, 4,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.MAGE_BIG, false),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.MELEE_MAGE_RANGE_BIG, true),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_BIG, NylocasData.NylocasType.MAGE_MELEE_MAGE_BIG, false),\n                            }),\n                    new NylocasWave(28, 8,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.EAST_NORTH, NylocasData.NylocasType.MAGE_MELEE_MAGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_SOUTH, NylocasData.NylocasType.RANGE_MAGE_MELEE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_EAST, NylocasData.NylocasType.MELEE_RANGE_MELEE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.MAGE_MELEE_RANGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.RANGE_MELEE_MAGE_SMALL, true),\n                                    new NylocasData(NylocasData.NyloPosition.WEST_NORTH, NylocasData.NylocasType.MELEE_MAGE_MELEE_SMALL, false),\n                            }),\n                    new NylocasWave(29, 4,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.EAST_NORTH, NylocasData.NylocasType.MAGE_RANGE_MELEE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_SOUTH, NylocasData.NylocasType.RANGE_MELEE_MAGE_SMALL, true),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.MELEE_BIG, false),\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.RANGE_MELEE_RANGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.WEST_NORTH, NylocasData.NylocasType.MELEE_RANGE_MAGE_SMALL, true),\n                            }),\n                    new NylocasWave(30, 4,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.EAST_SOUTH, NylocasData.NylocasType.MAGE_BIG, true),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_EAST, NylocasData.NylocasType.MELEE_RANGE_MELEE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.MAGE_RANGE_MELEE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.RANGE_MELEE_RANGE_BIG, false),\n                            }),\n\n                    new NylocasWave(31, 4,\n                            new NylocasData[]{\n                                    new NylocasData(NylocasData.NyloPosition.EAST_NORTH, NylocasData.NylocasType.MAGE_RANGE_MAGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.EAST_SOUTH, NylocasData.NylocasType.RANGE_MELEE_RANGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_EAST, NylocasData.NylocasType.MELEE_MAGE_RANGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.SOUTH_WEST, NylocasData.NylocasType.MAGE_MELEE_RANGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.WEST_SOUTH, NylocasData.NylocasType.RANGE_MAGE_RANGE_SMALL, false),\n                                    new NylocasData(NylocasData.NyloPosition.WEST_NORTH, NylocasData.NylocasType.MELEE_RANGE_MAGE_SMALL, false),\n                            }),\n            };\n\n    public NylocasWave(int wave, int delay, NylocasData[] nylos)\n    {\n        this.wave \u003d wave;\n        this.delay \u003d delay;\n        this.nylos \u003d nylos;\n    }\n\n    public int count()\n    {\n        return this.nylos.length;\n    }\n\n    public List\u003cNylocasData\u003e getNylos()\n    {\n        return Arrays.asList(nylos);\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\nyloutility\\NylocasWave.java"},{"fileName":"NylocasWaveMatcher.java","content":"package com.advancedraidtracker.utility.nyloutility;\n\nimport lombok.extern.slf4j.Slf4j;\n\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.stream.Collectors;\n\n@Slf4j\npublic class NylocasWaveMatcher\n{\n    private static boolean wave17Matched \u003d false;\n    private static boolean wave26Matched \u003d false;\n    private static boolean wave28Matched \u003d false;\n    private static NylocasWave lastWave \u003d null;\n\n    public static boolean isWave(ArrayList\u003cNylocasShell\u003e nylos)\n    {\n        ArrayList\u003cNylocasWave\u003e potentialWaves \u003d (ArrayList\u003cNylocasWave\u003e) Arrays.stream(NylocasWave.waves).filter(c -\u003e c.count() \u003d\u003d nylos.size()).collect(Collectors.toList());\n        if (!potentialWaves.isEmpty())\n        {\n            for (NylocasWave w : potentialWaves)\n            {\n                boolean waveFlag \u003d true;\n                for (NylocasData c : w.getNylos())\n                {\n                    if (waveFlag \u0026\u0026 !containsNylo(c, nylos))\n                    {\n                        waveFlag \u003d false;\n                    }\n                }\n                if (waveFlag) //waves 17, 26, and 28 are comprised of the exact same spawns\n                {\n                    if (wave17Matched \u0026\u0026 w.getWave() \u003d\u003d 17)\n                    {\n                        waveFlag \u003d false;\n                    } else if (wave26Matched \u0026\u0026 w.getWave() \u003d\u003d 26)\n                    {\n                        waveFlag \u003d false;\n\n                    } else if (wave28Matched \u0026\u0026 w.getWave() \u003d\u003d 28)\n                    {\n                        waveFlag \u003d false;\n                    } else if (w.getWave() \u003d\u003d 17)\n                    {\n                        wave17Matched \u003d true;\n                        wave26Matched \u003d false;\n                        wave28Matched \u003d false;\n                    } else if (w.getWave() \u003d\u003d 26)\n                    {\n                        wave26Matched \u003d true;\n                        wave28Matched \u003d false;\n                    } else if (w.getWave() \u003d\u003d 28)\n                    {\n                        wave28Matched \u003d true;\n                    } else if (w.getWave() \u003c 17)\n                    {\n                        wave17Matched \u003d false;\n                        wave26Matched \u003d false;\n                        wave28Matched \u003d false;\n                    } else if (w.getWave() \u003c 26)\n                    {\n                        wave26Matched \u003d false;\n                        wave28Matched \u003d false;\n                    } else if (w.getWave() \u003d\u003d 27)\n                    {\n                        wave28Matched \u003d false;\n                    }\n                }\n                if (waveFlag)\n                {\n                    lastWave \u003d w;\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    public static NylocasWave getWave()\n    {\n        return lastWave;\n    }\n\n    public static boolean containsNylo(NylocasData c, ArrayList\u003cNylocasShell\u003e ns)\n    {\n        boolean flag \u003d false;\n        for (NylocasShell n : ns)\n        {\n            if (matchesNylo(c, n))\n            {\n                flag \u003d true;\n            }\n        }\n        return flag;\n    }\n\n    public static boolean matchesNylo(NylocasData c1, NylocasShell c2)\n    {\n        return (c1.getSpawnStyle() \u003d\u003d c2.style \u0026\u0026 c1.position \u003d\u003d c2.position);\n    }\n\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\nyloutility\\NylocasWaveMatcher.java"},{"fileName":"PlayerWornItems.java","content":"package com.advancedraidtracker.utility;\n\nimport net.runelite.api.PlayerComposition;\nimport net.runelite.api.kit.KitType;\nimport net.runelite.client.game.ItemManager;\n\npublic class PlayerWornItems\n{\n    public int helmet \u003d 0;\n    public int cape \u003d 0;\n    public int amulet \u003d 0;\n    public int weapon \u003d 0;\n    public int torso \u003d 0;\n    public int shield \u003d 0;\n    public int legs \u003d 0;\n    public int gloves \u003d 0;\n    public int boots \u003d 0;\n    private final ItemManager itemManager;\n    public PlayerWornItems(String s, ItemManager itemManager)\n    {\n        this.itemManager \u003d itemManager;\n        String[] items \u003d s.split(\"~\");\n        if(items.length \u003d\u003d 9)\n        {\n            helmet \u003d Integer.parseInt(items[0]);\n            cape \u003d Integer.parseInt(items[1]);\n            amulet \u003d Integer.parseInt(items[2]);\n            weapon \u003d Integer.parseInt(items[3]);\n            torso \u003d Integer.parseInt(items[4]);\n            shield \u003d Integer.parseInt(items[5]);\n            legs \u003d Integer.parseInt(items[6]);\n            gloves \u003d Integer.parseInt(items[7]);\n            boots \u003d Integer.parseInt(items[8]);\n        }\n    }\n\n    public static String getStringFromComposition(PlayerComposition pc)\n    {\n        return pc.getEquipmentId(KitType.HEAD) +\"~\"\n                    + pc.getEquipmentId(KitType.CAPE) +\"~\"\n                    +pc.getEquipmentId(KitType.AMULET) + \"~\"\n                    +pc.getEquipmentId(KitType.WEAPON) +\"~\"\n                    +pc.getEquipmentId(KitType.TORSO)+\"~\"\n                    +pc.getEquipmentId(KitType.SHIELD)+\"~\"\n                    +pc.getEquipmentId(KitType.LEGS)+\"~\"\n                    +pc.getEquipmentId(KitType.HANDS)+\"~\"\n                    +pc.getEquipmentId(KitType.BOOTS);\n    }\n\n    public String[] getAll()\n    {\n        if(helmet+cape+amulet+weapon+torso+shield+legs+gloves+boots \u003d\u003d 0)\n        {\n            return new String[]{};\n        }\n        else\n        {\n            return new String[]\n                    {\n                            \"Helmet: \" + getItemName(helmet),\n                            \"Cape: \" + getItemName(cape),\n                            \"Amulet: \" + getItemName(amulet),\n                            \"Weapon: \" + getItemName(weapon),\n                            \"Torso: \" + getItemName(torso),\n                            \"Shield: \" + getItemName(shield),\n                            \"Legs: \" + getItemName(legs),\n                            \"Gloves: \" + getItemName(gloves),\n                            \"Boots: \" + getItemName(boots),\n                    };\n        }\n    }\n\n    public String getItemName(int id)\n    {\n        if(id \u003d\u003d -1)\n        {\n            return \"None\";\n        }\n        else\n        {\n            return itemManager.getItemComposition(id).getName();\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\PlayerWornItems.java"},{"fileName":"Point.java","content":"package com.advancedraidtracker.utility;\n\n\nimport lombok.Getter;\nimport lombok.Setter;\n\n@Getter\n@Setter\npublic class Point\n{\n    private int x;\n    private int y;\n\n    public Point(int x, int y)\n    {\n        this.x \u003d x;\n        this.y \u003d y;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\Point.java"},{"fileName":"RoomState.java","content":"package com.advancedraidtracker.utility;\n\npublic class RoomState\n{\n    public enum MaidenRoomState\n    {\n        NOT_STARTED,\n        PHASE_1,\n        PHASE_2,\n        PHASE_3,\n        PHASE_4,\n        FINISHED\n    }\n\n    public enum BloatRoomState\n    {\n        NOT_STARTED,\n        WALKING,\n        DOWN,\n        FINISHED\n    }\n\n    public enum NyloRoomState\n    {\n        NOT_STARTED,\n        WAVES,\n        CLEANUP,\n        WAITING_FOR_BOSS,\n        BOSS,\n        FINISHED\n    }\n\n    public enum SotetsegRoomState\n    {\n        NOT_STARTED,\n        PHASE_1,\n        MAZE_1,\n        PHASE_2,\n        MAZE_2,\n        PHASE_3,\n        FINISHED\n    }\n\n    public enum XarpusRoomState\n    {\n        NOT_STARTED,\n        EXHUMEDS,\n        PRESCREECH,\n        POSTSCREECH,\n        FINISHED\n    }\n\n    public enum VerzikRoomState\n    {\n        NOT_STARTED,\n        PHASE_1,\n        PHASE_2,\n        PHASE_2_REDS,\n        PHASE_3,\n        FINISHED\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\RoomState.java"},{"fileName":"RoomUtil.java","content":"package com.advancedraidtracker.utility;\n\nimport com.advancedraidtracker.constants.TobIDs;\nimport net.runelite.api.Client;\nimport net.runelite.api.Player;\nimport net.runelite.api.coords.WorldPoint;\nimport org.apache.commons.lang3.StringUtils;\n\nimport java.util.Arrays;\n\n\npublic class RoomUtil\n{\n    public final static String[] MAIDEN_CRAB_NAMES \u003d {\n            \"N1 70s\", \"N2 70s\", \"N3 70s\", \"N4 (1) 70s\", \"N4 (2) 70s\",\n            \"S1 70s\", \"S2 70s\", \"S3 70s\", \"S4 (1) 70s\", \"S4 (2) 70s\",\n            \"N1 50s\", \"N2 50s\", \"N3 50s\", \"N4 (1) 50s\", \"N4 (2) 50s\",\n            \"S1 50s\", \"S2 50s\", \"S3 50s\", \"S4 (1) 50s\", \"S4 (2) 50s\",\n            \"N1 30s\", \"N2 30s\", \"N3 30s\", \"N4 (1) 30s\", \"N4 (2) 30s\",\n            \"S1 30s\", \"S2 30s\", \"S3 30s\", \"S4 (1) 30s\", \"S4 (2) 30s\",\n    };\n\n    public static String time(String ticks)\n    {\n        try\n        {\n            return time(Integer.parseInt(ticks));\n        } catch (Exception e)\n        {\n            return ticks;\n        }\n    }\n\n    public static String varbitHPtoReadable(int varbitHP)\n    {\n        return (varbitHP / 10) + \".\" + (varbitHP % 10) + \"%\";\n    }\n\n\n    public static boolean isPrimaryBoss(int ID)\n    {\n        int[] bosses \u003d {\n                TobIDs.MAIDEN_P0,\n                TobIDs.MAIDEN_P1,\n                TobIDs.MAIDEN_P2,\n                TobIDs.MAIDEN_P3,\n                TobIDs.MAIDEN_PRE_DEAD,\n                TobIDs.MAIDEN_P0_HM,\n                TobIDs.MAIDEN_P1_HM,\n                TobIDs.MAIDEN_P2_HM,\n                TobIDs.MAIDEN_P3_HM,\n                TobIDs.MAIDEN_PRE_DEAD_HM,\n                TobIDs.MAIDEN_P0_SM,\n                TobIDs.MAIDEN_P1_SM,\n                TobIDs.MAIDEN_P2_SM,\n                TobIDs.MAIDEN_P3_SM,\n                TobIDs.MAIDEN_PRE_DEAD_SM,\n                TobIDs.BLOAT,\n                TobIDs.BLOAT_HM,\n                TobIDs.BLOAT_SM,\n                TobIDs.NYLO_BOSS_MELEE,\n                TobIDs.NYLO_BOSS_RANGE,\n                TobIDs.NYLO_BOSS_MAGE,\n                TobIDs.NYLO_BOSS_MELEE_HM,\n                TobIDs.NYLO_BOSS_RANGE_HM,\n                TobIDs.NYLO_BOSS_MAGE_HM,\n                TobIDs.NYLO_BOSS_MELEE_SM,\n                TobIDs.NYLO_BOSS_RANGE_SM,\n                TobIDs.NYLO_BOSS_MAGE_SM,\n                TobIDs.SOTETSEG_ACTIVE,\n                TobIDs.SOTETSEG_ACTIVE_HM,\n                TobIDs.SOTETSEG_ACTIVE_SM,\n                TobIDs.XARPUS_P23,\n                TobIDs.XARPUS_P23_HM,\n                TobIDs.XARPUS_P23_SM,\n                TobIDs.VERZIK_P1,\n                TobIDs.VERZIK_P2,\n                TobIDs.VERZIK_P3,\n                TobIDs.VERZIK_P1_HM,\n                TobIDs.VERZIK_P2_HM,\n                TobIDs.VERZIK_P3_HM,\n                TobIDs.VERZIK_P1_SM,\n                TobIDs.VERZIK_P2_SM,\n                TobIDs.VERZIK_P3_SM,\n        };\n        return (Arrays.stream(bosses).anyMatch(p -\u003e p \u003d\u003d ID));\n    }\n\n    public static String time(int ticks)\n    {\n        return time((double)ticks);\n    }\n\n    public static String time(double ticks)\n    {\n        if (ticks \u003d\u003d Integer.MAX_VALUE || ticks \u003c 1)\n        {\n            return \"-\";\n        }\n        String timeStr \u003d \"\";\n        double seconds \u003d ticks * .6;\n        int minutes \u003d ((int) seconds - ((int) seconds) % 60) / 60;\n        int onlySeconds \u003d (int) seconds - 60 * minutes;\n        String secondsString \u003d String.format(\"%.1f\", ticks * .6);\n        if (minutes !\u003d 0)\n            timeStr +\u003d minutes + \":\";\n        if (onlySeconds \u003c 10 \u0026\u0026 minutes !\u003d 0)\n        {\n            timeStr +\u003d \"0\";\n        }\n        timeStr +\u003d onlySeconds;\n        if (StringUtils.split(secondsString, \".\").length \u003d\u003d 2)\n        {\n            String[] subStr \u003d StringUtils.split(secondsString, \".\");\n            timeStr +\u003d \".\" + subStr[1];\n        } else\n        {\n            timeStr +\u003d \".0\";\n        }\n        if (minutes \u003d\u003d 0)\n        {\n            timeStr +\u003d \"s\";\n        }\n        return timeStr;\n    }\n\n    public static boolean crossedLine(int region, Point start, Point end, boolean vertical, Client client)\n    {\n        if (inRegion(client, region))\n        {\n            for (Player p : client.getPlayers())\n            {\n                WorldPoint wp \u003d p.getWorldLocation();\n                if (vertical)\n                {\n                    for (int i \u003d start.getY(); i \u003c end.getY() + 1; i++)\n                    {\n                        if (wp.getRegionY() \u003d\u003d i \u0026\u0026 wp.getRegionX() \u003d\u003d start.getX())\n                        {\n                            return true;\n                        }\n                    }\n                } else\n                {\n                    for (int i \u003d start.getX(); i \u003c end.getX() + 1; i++)\n                    {\n                        if (wp.getRegionX() \u003d\u003d i \u0026\u0026 wp.getRegionY() \u003d\u003d start.getY())\n                        {\n                            return true;\n                        }\n                    }\n                }\n            }\n        }\n        return false;\n    }\n\n    public static boolean inRegion(Client client, int... regions)\n    {\n        if (client.getMapRegions() !\u003d null)\n        {\n            for (int i : client.getMapRegions())\n            {\n                for (int j : regions)\n                {\n                    if (i \u003d\u003d j)\n                    {\n                        return true;\n                    }\n                }\n            }\n        }\n        return false;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\RoomUtil.java"},{"fileName":"StatisticGatherer.java","content":"package com.advancedraidtracker.utility;\n\nimport com.advancedraidtracker.SimpleTOBData;\nimport com.advancedraidtracker.utility.datautility.DataPoint;\nimport lombok.extern.slf4j.Slf4j;\n\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.stream.Collectors;\n\n@Slf4j\npublic class StatisticGatherer\n{\n    public static double getOverallTimeAverage(ArrayList\u003cSimpleTOBData\u003e data)\n    {\n        data \u003d data.stream().filter(SimpleTOBData::getOverallTimeAccurate).collect(Collectors.toCollection(ArrayList::new));\n        if (data.isEmpty())\n        {\n            return -1;\n        }\n        double total \u003d 0;\n        double count \u003d 0;\n        for (SimpleTOBData d : data)\n        {\n            total +\u003d d.getTimeSum();\n            count++;\n        }\n        return total / count;\n    }\n\n    public static double getOverallMedian(ArrayList\u003cSimpleTOBData\u003e data)\n    {\n        data \u003d data.stream().filter(SimpleTOBData::getOverallTimeAccurate).collect(Collectors.toCollection(ArrayList::new));\n        if (data.isEmpty())\n        {\n            return -1;\n        }\n        double median;\n        List\u003cDouble\u003e values \u003d new ArrayList\u003c\u003e();\n        for (SimpleTOBData d : data)\n        {\n            values.add((double) d.getTimeSum());\n        }\n        Collections.sort(values);\n        if (values.size() % 2 \u003d\u003d 0)\n        {\n            median \u003d ((double) values.get(values.size() / 2) + values.get(values.size() / 2 - 1)) / 2.0;\n        } else\n        {\n            median \u003d values.get(values.size() / 2);\n        }\n        return median;\n    }\n\n    public static double getOverallTimeMin(ArrayList\u003cSimpleTOBData\u003e data)\n    {\n        data \u003d data.stream().filter(SimpleTOBData::getOverallTimeAccurate).collect(Collectors.toCollection(ArrayList::new));\n        int minValue \u003d Integer.MAX_VALUE;\n        for (SimpleTOBData d : data)\n        {\n            int split \u003d d.getTimeSum();\n            if (split \u003c minValue)\n            {\n                minValue \u003d split;\n            }\n        }\n        return minValue;\n    }\n\n    public static double getOverallMax(ArrayList\u003cSimpleTOBData\u003e data)\n    {\n        data \u003d data.stream().filter(SimpleTOBData::getOverallTimeAccurate).collect(Collectors.toCollection(ArrayList::new));\n        int maxValue \u003d 0;\n        for (SimpleTOBData d : data)\n        {\n            int split \u003d d.getTimeSum();\n            if (split \u003e maxValue)\n            {\n                maxValue \u003d split;\n            }\n        }\n        return maxValue;\n    }\n\n    public static double getGenericAverage(ArrayList\u003cInteger\u003e data)\n    {\n        double total \u003d 0;\n        double count \u003d 0;\n        for (int d : data)\n        {\n            if (d !\u003d -1)\n            {\n                total +\u003d d;\n                count++;\n            }\n        }\n        return total / count;\n    }\n\n    public static double getGenericAverage(ArrayList\u003cSimpleTOBData\u003e data, DataPoint parameter)\n    {\n        if(parameter \u003d\u003d DataPoint.CHALLENGE_TIME)\n        {\n            return getOverallTimeAverage(data);\n        }\n        double total \u003d 0;\n        double count \u003d 0;\n        for (SimpleTOBData room : data)\n        {\n            if (!room.getTimeAccurate(parameter))\n            {\n                continue;\n            }\n            int d \u003d room.getValue(parameter);\n            if (d !\u003d -1)\n            {\n                if (parameter.type !\u003d DataPoint.types.TIME || d !\u003d 0)\n                {\n                    total +\u003d d;\n                    count++;\n                }\n            }\n        }\n        return total / count;\n    }\n\n    public static double getGenericMedian(ArrayList\u003cInteger\u003e data)\n    {\n        if (data.isEmpty())\n        {\n            return -1;\n        }\n        List\u003cDouble\u003e values \u003d new ArrayList\u003c\u003e();\n        for (int d : data)\n        {\n            if (d !\u003d -1)\n                values.add((double) d);\n        }\n        Collections.sort(values);\n        return getMedian(values);\n    }\n\n    private static double getMedian(List\u003cDouble\u003e values)\n    {\n        double median;\n        if (values.size() % 2 \u003d\u003d 0)\n        {\n            median \u003d (values.get(values.size() / 2) + (double) values.get(values.size() / 2 - 1)) / 2.0;\n        } else\n        {\n            median \u003d values.get(values.size() / 2);\n        }\n        return median;\n    }\n\n    public static double getGenericMedian(ArrayList\u003cSimpleTOBData\u003e data, DataPoint param)\n    {\n        if(param \u003d\u003d DataPoint.OVERALL_TIME)\n        {\n            return getOverallMedian(data);\n        }\n        if (data.isEmpty())\n        {\n            return -1;\n        }\n        List\u003cDouble\u003e values \u003d new ArrayList\u003c\u003e();\n        for (SimpleTOBData room : data)\n        {\n            if (!room.getTimeAccurate(param))\n            {\n                continue;\n            }\n            int d \u003d room.getValue(param);\n            if (d !\u003d -1)\n                values.add((double) d);\n        }\n        Collections.sort(values);\n        if (!values.isEmpty())\n        {\n            return getMedian(values);\n        }\n        return -1;\n    }\n\n    public static double getGenericMin(ArrayList\u003cInteger\u003e data, boolean isTime)\n    {\n        int minValue \u003d Integer.MAX_VALUE;\n        for (int d : data)\n        {\n            if (d \u003c minValue \u0026\u0026 d !\u003d -1 \u0026\u0026 (!isTime || d !\u003d 0))\n            {\n                minValue \u003d d;\n            }\n        }\n        return minValue;\n    }\n\n    public static double getGenericMin(ArrayList\u003cInteger\u003e data)\n    {\n        return getGenericMin(data, false);\n    }\n\n    public static double getGenericMin(ArrayList\u003cSimpleTOBData\u003e data, DataPoint parameter)\n    {\n        if(parameter \u003d\u003d DataPoint.OVERALL_TIME)\n        {\n            return getOverallTimeMin(data);\n        }\n        int minValue \u003d Integer.MAX_VALUE;\n        for (SimpleTOBData room : data)\n        {\n            if (!room.getTimeAccurate(parameter))\n            {\n                continue;\n            }\n            int d \u003d room.getValue(parameter);\n            if (d \u003c minValue \u0026\u0026 d !\u003d -1)\n            {\n                if (parameter.type !\u003d DataPoint.types.TIME || room.getValue(parameter) !\u003d 0)\n                {\n                    minValue \u003d d;\n                }\n            }\n        }\n        return minValue;\n    }\n\n\n    public static double getGenericMax(ArrayList\u003cInteger\u003e data)\n    {\n        int maxValue \u003d 0;\n        for (int d : data)\n        {\n            if (d \u003e maxValue)\n            {\n                maxValue \u003d d;\n            }\n        }\n        return maxValue;\n    }\n\n    public static double getGenericMax(ArrayList\u003cSimpleTOBData\u003e data, DataPoint parameter)\n    {\n        if(parameter \u003d\u003d DataPoint.OVERALL_TIME)\n        {\n            return getOverallMax(data);\n        }\n        int maxValue \u003d 0;\n        for (SimpleTOBData room : data)\n        {\n            if (!room.getTimeAccurate(parameter))\n            {\n                continue;\n            }\n            int d \u003d room.getValue(parameter);\n            if (d \u003e maxValue)\n            {\n                maxValue \u003d d;\n            }\n        }\n        return maxValue;\n    }\n\n    public static double getGenericMode(ArrayList\u003cSimpleTOBData\u003e data, DataPoint parameter)\n    {\n        int maxCount \u003d 0;\n        int maxValue \u003d 0;\n        for (int i \u003d 0; i \u003c data.size(); i++)\n        {\n            if (!data.get(i).getTimeAccurate(parameter))\n            {\n                continue;\n            }\n            int iv \u003d data.get(i).getValue(parameter);\n            int count \u003d 0;\n            for (SimpleTOBData datum : data)\n            {\n                if (!datum.getTimeAccurate(parameter))\n                {\n                    continue;\n                }\n                int jv \u003d datum.getValue(parameter);\n                if (jv !\u003d -1 \u0026\u0026 iv !\u003d -1)\n                {\n                    if (Objects.equals(datum, data.get(i)))\n                    {\n                        count++;\n                    }\n                }\n            }\n            if (count \u003e maxCount)\n            {\n                maxValue \u003d iv;\n                maxCount \u003d count;\n            }\n        }\n        if (maxCount \u003e 1)\n        {\n            return maxValue;\n        } else\n        {\n            return -1;\n        }\n    }\n\n    public static double getGenericMode(ArrayList\u003cInteger\u003e data)\n    {\n        int maxCount \u003d 0;\n        int maxValue \u003d 0;\n        for (int i \u003d 0; i \u003c data.size(); i++)\n        {\n            int count \u003d 0;\n            for (Integer datum : data)\n            {\n                if (datum !\u003d -1 \u0026\u0026 data.get(i) !\u003d -1)\n                {\n                    if (Objects.equals(datum, data.get(i)))\n                    {\n                        count++;\n                    }\n                }\n            }\n            if (count \u003e maxCount)\n            {\n                maxValue \u003d data.get(i);\n                maxCount \u003d count;\n            }\n        }\n        if (maxCount \u003e 1)\n        {\n            return maxValue;\n        } else\n        {\n            return -1;\n        }\n    }\n\n\n    public static double getGenericPercent(ArrayList\u003cInteger\u003e arrayForStatistics, int threshold)\n    {\n        double count \u003d 0;\n        double total \u003d arrayForStatistics.size();\n        for (Integer i : arrayForStatistics)\n        {\n            if (i \u003c\u003d threshold)\n            {\n                count++;\n            }\n        }\n        double percent \u003d count / total;\n        int percentRounded \u003d (int) (percent * 1000);\n        percentRounded /\u003d 10;\n        return percentRounded;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\StatisticGatherer.java"},{"fileName":"DamageQueueShell.java","content":"package com.advancedraidtracker.utility.thrallvengtracking;\n\nimport lombok.Getter;\n\npublic class DamageQueueShell\n{\n    @Getter\n    public int sourceIndex;\n    public int offset;\n    public int targetIndex;\n    public int originTick;\n    public String source;\n\n    public DamageQueueShell(int targetIndex, int sourceIndex, int offset, String source, int originTick)\n    {\n        this.source \u003d source;\n        this.offset \u003d offset;\n        this.targetIndex \u003d targetIndex;\n        this.sourceIndex \u003d sourceIndex;\n        this.originTick \u003d originTick;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\thrallvengtracking\\DamageQueueShell.java"},{"fileName":"PlayerShell.java","content":"package com.advancedraidtracker.utility.thrallvengtracking;\n\nimport net.runelite.api.coords.WorldPoint;\n\npublic class PlayerShell\n{\n    public WorldPoint worldLocation;\n    public String name;\n\n    public PlayerShell(WorldPoint location, String name)\n    {\n        this.worldLocation \u003d location;\n        this.name \u003d name;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\thrallvengtracking\\PlayerShell.java"},{"fileName":"ProjectileQueue.java","content":"package com.advancedraidtracker.utility.thrallvengtracking;\n\npublic class ProjectileQueue\n{\n    public int originTick;\n    public int finalTick;\n    public int targetIndex;\n\n    public ProjectileQueue(int originTick, int finalTick, int targetIndex)\n    {\n        this.originTick \u003d originTick;\n        this.finalTick \u003d finalTick;\n        this.targetIndex \u003d targetIndex;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\thrallvengtracking\\ProjectileQueue.java"},{"fileName":"Thrall.java","content":"package com.advancedraidtracker.utility.thrallvengtracking;\n\nimport net.runelite.api.Actor;\nimport net.runelite.api.NPC;\nimport java.util.ArrayList;\n\nimport static com.advancedraidtracker.constants.TobIDs.*;\n\npublic class Thrall\n{\n    NPC npc;\n    PlayerShell player;\n    ArrayList\u003cPlayerShell\u003e potentialPlayers;\n\n    public Actor lastParentInteraction;\n    boolean isMelee;\n    public int spawnTick;\n\n    public Thrall(NPC npc, ArrayList\u003cPlayerShell\u003e potentialPlayers, int spawnTick)\n    {\n        this.potentialPlayers \u003d potentialPlayers;\n        this.npc \u003d npc;\n        isMelee \u003d npc.getId() \u003d\u003d MELEE_THRALL;\n        this.spawnTick \u003d spawnTick;\n    }\n\n    public boolean matchesGraphic(int animationID)\n    {\n        return (animationID \u003d\u003d THRALL_CAST_GRAPHIC_MAGE \u0026\u0026 npc.getId() \u003d\u003d MAGE_THRALL)\n                || (animationID \u003d\u003d THRALL_CAST_GRAPHIC_RANGE \u0026\u0026 npc.getId() \u003d\u003d RANGE_THRALL)\n                || (animationID \u003d\u003d THRALL_CAST_GRAPHIC_MELEE \u0026\u0026 npc.getId() \u003d\u003d MELEE_THRALL);\n    }\n\n    public void setOwner(PlayerShell player)\n    {\n        this.player \u003d player;\n    }\n\n    public String getOwner()\n    {\n        if (player !\u003d null)\n        {\n            return player.name;\n        } else\n        {\n            return \".unassigned\";\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\thrallvengtracking\\Thrall.java"},{"fileName":"ThrallTracker.java","content":"package com.advancedraidtracker.utility.thrallvengtracking;\n\nimport com.advancedraidtracker.AdvancedRaidTrackerPlugin;\nimport com.advancedraidtracker.constants.LogID;\nimport com.advancedraidtracker.utility.wrappers.ThrallOutlineBox;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Actor;\nimport net.runelite.api.NPC;\nimport net.runelite.api.Player;\nimport net.runelite.api.Projectile;\nimport net.runelite.api.coords.WorldPoint;\n\nimport java.util.ArrayList;\nimport java.util.Objects;\nimport java.util.Optional;\n\nimport static com.advancedraidtracker.constants.TobIDs.*;\n\n@Slf4j\npublic class ThrallTracker\n{\n    private final ArrayList\u003cPlayer\u003e queuedCastAnimation;\n    private final ArrayList\u003cPlayer\u003e queuedMageCastGraphic;\n    private final ArrayList\u003cPlayer\u003e queuedRangeCastGraphic;\n    private final ArrayList\u003cPlayer\u003e queuedMeleeCastGraphic;\n    private final ArrayList\u003cThrall\u003e queuedThrallSpawn;\n\n    private final ArrayList\u003cThrall\u003e activeThralls;\n\n\n    private final AdvancedRaidTrackerPlugin plugin;\n\n    public ThrallTracker(AdvancedRaidTrackerPlugin plugin)\n    {\n        this.plugin \u003d plugin;\n        queuedCastAnimation \u003d new ArrayList\u003c\u003e();\n        queuedMageCastGraphic \u003d new ArrayList\u003c\u003e();\n        queuedMeleeCastGraphic \u003d new ArrayList\u003c\u003e();\n        queuedRangeCastGraphic \u003d new ArrayList\u003c\u003e();\n        queuedThrallSpawn \u003d new ArrayList\u003c\u003e();\n\n        activeThralls \u003d new ArrayList\u003c\u003e();\n    }\n\n    public void removeThrall(NPC npc)\n    {\n        Optional\u003cThrall\u003e thrall2 \u003d activeThralls.stream().filter(thrall1 -\u003e thrall1.npc.getIndex() \u003d\u003d npc.getIndex()).findAny();\n        if (thrall2.isPresent())\n        {\n            Thrall t \u003d thrall2.get();\n            plugin.removeThrallBox(t);\n        }\n        activeThralls.removeIf(thrall -\u003e thrall.npc.getIndex() \u003d\u003d npc.getIndex());\n    }\n\n    public void handleCasts()\n    {\n        if (queuedThrallSpawn.isEmpty())\n        {\n            return;\n        }\n        ArrayList\u003cPlayerShell\u003e assignedPlayers \u003d new ArrayList\u003c\u003e();\n        for (Thrall thrall : queuedThrallSpawn)\n        {\n            if (thrall.potentialPlayers.size() \u003d\u003d 1)\n            {\n                thrall.setOwner(thrall.potentialPlayers.get(0));\n                plugin.addThrallOutlineBox(new ThrallOutlineBox(thrall.potentialPlayers.get(0).name, thrall.spawnTick, thrall.npc.getId()));\n                activeThralls.add(thrall);\n\n                assignedPlayers.add(new PlayerShell(thrall.player.worldLocation, thrall.player.name));\n            }\n        }\n        removeQueuedThralls(assignedPlayers);\n\n        for (Thrall thrall : queuedThrallSpawn)\n        {\n            thrall.potentialPlayers.removeIf(p1 -\u003e queuedCastAnimation.stream().noneMatch(p2 -\u003e Objects.equals(p2.getName(), p1.name)));\n            if (thrall.potentialPlayers.size() \u003d\u003d 1)\n            {\n                thrall.setOwner(thrall.potentialPlayers.get(0));\n                plugin.addThrallOutlineBox(new ThrallOutlineBox(thrall.potentialPlayers.get(0).name, thrall.spawnTick, thrall.npc.getId()));\n                activeThralls.add(thrall);\n            }\n        }\n        removeQueuedThralls(assignedPlayers);\n\n        for (Thrall thrall : queuedThrallSpawn)\n        {\n            thrall.potentialPlayers.removeIf(p1 -\u003e\n                    queuedMageCastGraphic.stream().noneMatch(p2 -\u003e thrall.matchesGraphic(THRALL_CAST_GRAPHIC_MAGE))\n                            \u0026\u0026 queuedRangeCastGraphic.stream().noneMatch(p2 -\u003e thrall.matchesGraphic(THRALL_CAST_GRAPHIC_RANGE))\n                            \u0026\u0026 queuedMeleeCastGraphic.stream().noneMatch(p2 -\u003e thrall.matchesGraphic(THRALL_CAST_GRAPHIC_MELEE)));\n            if (thrall.potentialPlayers.size() \u003d\u003d 1)\n            {\n                thrall.setOwner(thrall.potentialPlayers.get(0));\n                plugin.addThrallOutlineBox(new ThrallOutlineBox(thrall.potentialPlayers.get(0).name, thrall.spawnTick, thrall.npc.getId()));\n                activeThralls.add(thrall);\n            }\n        }\n        removeQueuedThralls(assignedPlayers);\n\n        activeThralls.addAll(queuedThrallSpawn);\n        queuedThrallSpawn.clear();\n\n    }\n\n    private void removeQueuedThralls(ArrayList\u003cPlayerShell\u003e assignedPlayers)\n    {\n        queuedThrallSpawn.removeIf(thrall -\u003e thrall.potentialPlayers.size() \u003d\u003d 1);\n        queuedCastAnimation.removeIf(p -\u003e assignedPlayers.stream().anyMatch(p2 -\u003e Objects.equals(p2.name, p.getName())));\n        queuedMeleeCastGraphic.removeIf(p -\u003e assignedPlayers.stream().anyMatch(p2 -\u003e Objects.equals(p2.name, p.getName())));\n        queuedRangeCastGraphic.removeIf(p -\u003e assignedPlayers.stream().anyMatch(p2 -\u003e Objects.equals(p2.name, p.getName())));\n        queuedMageCastGraphic.removeIf(p -\u003e assignedPlayers.stream().anyMatch(p2 -\u003e Objects.equals(p2.name, p.getName())));\n    }\n\n    public void updatePlayerInteracting(String playerName, Actor interacting)\n    {\n        for (Thrall thrall : activeThralls)\n        {\n            if (thrall.getOwner().equals(playerName))\n            {\n                if (interacting !\u003d null)\n                {\n                    thrall.lastParentInteraction \u003d interacting;\n                }\n            }\n        }\n    }\n\n    public void updateTick()\n    {\n        handleCasts();\n    }\n\n    public void castThrallAnimation(Player player)\n    {\n        queuedCastAnimation.add(player);\n    }\n\n    public void meleeThrallAttacked(NPC npc)\n    {\n        for (Thrall thrall : activeThralls)\n        {\n            if (npc.getIndex() \u003d\u003d thrall.npc.getIndex() \u0026\u0026 thrall.isMelee \u0026\u0026 thrall.npc.getAnimation() \u003d\u003d MELEE_THRALL_ATTACK_ANIMATION)\n            {\n                if (thrall.lastParentInteraction instanceof NPC)\n                {\n                    if (thrall.lastParentInteraction.getWorldArea().distanceTo(thrall.npc.getWorldLocation()) \u003c 2)\n                    {\n                        plugin.clog.addLine(LogID.THRALL_ATTACKED, thrall.getOwner(), \"melee\");\n                        plugin.addQueuedThrallDamage(((((NPC) thrall.lastParentInteraction).getIndex())), thrall.npc.getIndex(), 1, thrall.getOwner());\n                    }\n                }\n            }\n        }\n    }\n\n    public void projectileCreated(Projectile projectile, WorldPoint origin)\n    {\n        if (projectile.getInteracting() instanceof NPC)\n        {\n            int hitOffset \u003d -1;\n\n            if (projectile.getId() \u003d\u003d THRALL_PROJECTILE_RANGE)\n            {\n                hitOffset \u003d (projectile.getRemainingCycles() \u003e 30) ? (projectile.getRemainingCycles() \u003e 60) ? 2 : 1 : 0;\n            } else if (projectile.getId() \u003d\u003d THRALL_PROJECTILE_MAGE)\n            {\n                hitOffset \u003d (projectile.getRemainingCycles() \u003e 40) ? 1 : 0;\n            }\n            for (Thrall t : activeThralls)\n            {\n                if (t.npc.getWorldLocation().distanceTo(origin) \u003d\u003d 0 \u0026\u0026 hitOffset !\u003d -1)\n                {\n                    plugin.clog.addLine(LogID.THRALL_ATTACKED, t.getOwner(), String.valueOf(projectile.getId()));\n                    plugin.addQueuedThrallDamage(((NPC) (projectile.getInteracting())).getIndex(), t.npc.getIndex(), hitOffset, t.getOwner());\n                    if (plugin.isVerzP2())\n                    {\n                        if (plugin.verzShieldActive)\n                        {\n                            NPC npc \u003d (NPC) projectile.getInteracting();\n                            if (npc.getId() \u003d\u003d VERZIK_P2 || npc.getId() \u003d\u003d VERZIK_P2_HM || npc.getId() \u003d\u003d VERZIK_P2_SM)\n                            {\n                                plugin.thrallAttackedP2VerzikShield(hitOffset);\n                            }\n                        }\n                    }\n                    break;\n                }\n            }\n        }\n    }\n\n    public void playerHasThrallCastSpotAnim(Player player, int id)\n    {\n        switch (id)\n        {\n            case THRALL_CAST_GRAPHIC_MELEE:\n                queuedMeleeCastGraphic.add(player);\n                break;\n            case THRALL_CAST_GRAPHIC_RANGE:\n                queuedRangeCastGraphic.add(player);\n                break;\n            case THRALL_CAST_GRAPHIC_MAGE:\n                queuedMageCastGraphic.add(player);\n                break;\n        }\n    }\n\n    public void thrallSpawned(NPC thrall, ArrayList\u003cPlayerShell\u003e adjacentPlayers)\n    {\n        queuedThrallSpawn.add(new Thrall(thrall, adjacentPlayers, plugin.getRoomTick()));\n    }\n\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\thrallvengtracking\\ThrallTracker.java"},{"fileName":"VengCastQueue.java","content":"package com.advancedraidtracker.utility.thrallvengtracking;\n\npublic class VengCastQueue\n{\n    public String target;\n    public String source;\n\n    public VengCastQueue(String target, String source)\n    {\n        this.target \u003d target;\n        this.source \u003d source;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\thrallvengtracking\\VengCastQueue.java"},{"fileName":"VengDamageQueue.java","content":"package com.advancedraidtracker.utility.thrallvengtracking;\n\npublic class VengDamageQueue\n{\n    public int appliedTick;\n    public int damage;\n    public String target;\n\n    public VengDamageQueue(String target, int damage, int appliedTick)\n    {\n        this.appliedTick \u003d appliedTick;\n        this.damage \u003d damage;\n        this.target \u003d target;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\thrallvengtracking\\VengDamageQueue.java"},{"fileName":"VengPair.java","content":"package com.advancedraidtracker.utility.thrallvengtracking;\n\npublic class VengPair\n{\n    public String player;\n    public int hitsplat;\n\n    public VengPair(String player, int hitsplat)\n    {\n        this.player \u003d player;\n        this.hitsplat \u003d hitsplat;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\thrallvengtracking\\VengPair.java"},{"fileName":"VengTracker.java","content":"package com.advancedraidtracker.utility.thrallvengtracking;\n\nimport com.advancedraidtracker.AdvancedRaidTrackerPlugin;\nimport com.advancedraidtracker.constants.LogID;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Player;\n\nimport java.util.ArrayList;\n\n@Slf4j\npublic class VengTracker\n{\n    public ArrayList\u003cVengCastQueue\u003e vengedPlayers;\n    private final AdvancedRaidTrackerPlugin plugin;\n\n    public VengTracker(AdvancedRaidTrackerPlugin plugin)\n    {\n        vengedPlayers \u003d new ArrayList\u003c\u003e();\n        this.plugin \u003d plugin;\n    }\n\n    private void handleApplyVeng()\n    {\n        ArrayList\u003cVengCastQueue\u003e temp \u003d new ArrayList\u003c\u003e();\n        for (VengCastQueue vcq : vengedPlayers)\n        {\n            boolean flag \u003d false;\n            for (VengCastQueue v : temp)\n            {\n                if (v.target !\u003d null \u0026\u0026 v.source !\u003d null)\n                {\n                    if (v.target.equals(vcq.target))\n                    {\n                        if (!v.source.equals(vcq.source))\n                        {\n                            vcq.source \u003d v.source;\n                        }\n                        flag \u003d true;\n                    }\n                }\n            }\n            if (!flag)\n            {\n                temp.add(vcq);\n            }\n        }\n        vengedPlayers.clear();\n        for (VengCastQueue vcq : temp)\n        {\n            plugin.clog.addLine(LogID.VENG_WAS_CAST, vcq.target, vcq.source);\n        }\n    }\n\n    public void updateTick()\n    {\n        handleApplyVeng();\n    }\n\n    public void vengSelfCast(Player player)\n    {\n        vengedPlayers.add(new VengCastQueue(player.getName(), player.getName()));\n    }\n\n    public void vengOtherCast(Player caster)\n    {\n        String nameTarget \u003d \"\";\n        String nameSource;\n        nameSource \u003d caster.getName();\n        if (caster.getInteracting() !\u003d null)\n        {\n            nameTarget \u003d caster.getInteracting().getName();\n        }\n        vengedPlayers.add(new VengCastQueue(nameTarget, nameSource));\n    }\n\n    public void vengOtherGraphicApplied(Player receiver)\n    {\n        vengedPlayers.add(new VengCastQueue(receiver.getName(), \".unknown\"));\n    }\n\n    public void vengSelfGraphicApplied(Player self)\n    {\n        vengedPlayers.add(new VengCastQueue(self.getName(), self.getName()));\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\thrallvengtracking\\VengTracker.java"},{"fileName":"UISwingUtility.java","content":"package com.advancedraidtracker.utility;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ActionListener;\n\npublic class UISwingUtility\n{\n    public static String colorStr(Color c)\n    {\n        return \"\u003chtml\u003e\u003cfont color\u003d\u0027#\" + Integer.toHexString(c.getRGB()).substring(2) + \"\u0027\u003e\";\n    }\n    public  final static String roomColor \u003d colorStr(new Color(200, 200, 200));\n    public static JLabel getDarkJLabel(String labelText)\n    {\n        return new JLabel(labelText);\n    }\n\n    public static JLabel getDarkJLabel(String labelText, int swingConstant)\n    {\n        return new JLabel(labelText, swingConstant);\n    }\n\n    public static JPanel getTitledPanel(String title)\n    {\n        JPanel panel \u003d new JPanel();\n        panel.setBorder(BorderFactory.createTitledBorder(title));\n        return panel;\n    }\n\n    public static JCheckBox getActionListenCheckBox(String name, ActionListener actionListener)\n    {\n        return getActionListenCheckBox(name, false, actionListener);\n    }\n\n    public static JCheckBox getActionListenCheckBox(String name, boolean state, ActionListener actionListener)\n    {\n        JCheckBox darkCheckBox \u003d new JCheckBox(name, state);\n        darkCheckBox.addActionListener(actionListener);\n        return darkCheckBox;\n    }\n\n    public static JComboBox\u003cString\u003e getActionListenCheckBox(String[] options, ActionListener actionListener)\n    {\n        JComboBox\u003cString\u003e dark \u003d new JComboBox\u003c\u003e(options);\n        dark.addActionListener(actionListener);\n        return dark;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\UISwingUtility.java"},{"fileName":"WeaponAttack.java","content":"package com.advancedraidtracker.utility.weapons;\n\nimport net.runelite.api.ItemID;\n\nimport java.awt.*;\n\npublic enum WeaponAttack\n{\n    UNDECIDED(\"Undecided\", \"?\", new Color(0, 0, 0), -1),\n    BLOWPIPE(\"Blowpipe\", \"BP\", new Color(100, 150, 200), 2),\n    BLOWPIPE_SPEC(\"Blowpipe spec\", \"bp\", new Color(100, 150, 200), 2),\n    HAMMER(\"DWH Spec\", \"H\", new Color(100, 100, 100), 6),\n    HAMMER_BOP(\"DWH Bop\", \"h\", new Color(50, 50, 50), 6),\n    SANG(\"Sang/Trident\", \"T\", new Color(30, 120, 130), 4),\n    CHALLY_SPEC(\"Chally spec\", \"CH\", new Color(150, 50, 50), 7),\n    CHALLY_WHACK(\"Chally whack\", \"ch\", new Color(150, 50, 50), 7),\n    SWIFT_BLADE(\"Swift Blade\", \"SB\", new Color(225, 50, 50), 3),\n    BGS_WHACK(\"BGS whack\", \"bg\", new Color(170, 20, 20), 6),\n    BGS_SPEC(\"BGS spec\", \"BG\", new Color(170, 20, 20, 0), 6),\n    TBOW(\"Tbow\", \"TB\", new Color(30, 120, 30), 5),\n    ZCB_AUTO(\"ZCB Auto\", \"zc\", new Color(10, 170, 50), 5),\n    ZCB_SPEC(\"ZCB Spec\", \"ZC\", new Color(10, 170, 50), 5),\n    SCYTHE(\"Scythe\", \"S\", new Color(230, 100, 100), 5),\n    DINHS_SPEC(\"Dinhs Spec\", \"BW\", new Color(20, 20, 20), 5),\n    DINHS_WHACK(\"Dinhs Whack\", \"bw\", new Color(20, 20, 20), 5),\n    CHIN(\"Chinchompa\", \"CC\", new Color(0, 130, 0), 3),\n    WHIP(\"Tent Whip\", \"TW\", new Color(10, 70, 80), 4),\n    FREEZE(\"Freeze\", \"F\", new Color(50, 50, 170), 5),\n    BLITZ(\"Blitz/Rush\", \"BR\", new Color(50, 50, 170), 5),\n    DAWN_SPEC(\"Dawnbringer Spec\", \"DB\", new Color(10, 100, 150), 4),\n    DAWN_AUTO(\"Dawnbringer Auto\", \"db\", new Color(10, 100, 150), 4),\n    CLAW_SCRATCH(\"Claw Scratch\", \"c\", new Color(76, 89, 1), 4),\n    CLAW_SPEC(\"Claw Spec\", \"C\", new Color(76, 89, 1), 4),\n    SHADOW(\"Shadow\", \"Sh\", new Color(20, 20, 60), 5),\n    DART(\"Dart\", \"Da\", new Color(10, 60, 60), 2),\n    SBS(\"Spellbook Swap\", \"SS\", new Color(10, 100, 60), -1),\n    BOUNCE(\"Bounce\", \"VB\", new Color(200, 10, 10), -1),\n    AID_OTHER(\"Aid other\", \"AO\", new Color(100, 100, 100), -1),\n    VENG_SELF(\"Veng Self\", \"VS\", new Color(160, 89, 13), -1),\n    HUMIDIFY(\"Humidify\", \"HU\", new Color(20, 20, 200), -1),\n    MAGIC_IMBUE(\"Magic Imbue\", \"MI\", new Color(60, 60, 150), -1),\n    WEB_WEAVER(\"Web Weaver\", \"WW\", new Color(240, 18, 119), 3),\n    DEATH(\"Death\", \"X\", new Color(0, 0, 0), -1),\n    TELEPORT(\"Teleport\", \"TP\", new Color(60, 70, 80), -1),\n    HEAL_GROUP(\"Heal Group\", \"HG\", new Color(50, 170, 100), -1),\n    CONSUME(\"Food/Drink Consumed\", \"CS\", new Color(110, 50, 60), -1),\n    THRALL_CAST(\"Thrall Cast\", \"TC\", new Color(20, 65, 187), -1),\n    BLADE_OF_SAELDOR(\"Blade of Saeldor\", \"BS\", new Color(67, 10, 45), 4),\n    FANG(\"Osmumten\u0027s Fang\", \"OF\", new Color(10, 10, 100), 5),\n\n    SULPHUR_BLADES(\"Sulphur Blades\", \"SUL\", new Color(180, 20, 40), 4),\n    ELDER_MAUL_SPEC(\"Elder Maul Spec\", \"EM\", new Color(100, 60, 60), 6),\n    ELDER_MAUL(\"Elder Maul\", \"EM\", new Color(100, 60, 60), 6),\n    GLAIVE_AUTO(\"Glaive Auto\", \"g\", new Color(0, 70, 0), 6),\n    GLAIVE_SPEC(\"Glaive Spec\", \"G\", new Color(0, 70, 0), 6),\n    DUAL_MAUCUAHUITL(\"Dual Maucuahuitl\", \"DMC\", new Color(180, 30, 60), 4),\n\n    EYE_OF_AYAK(\"Eye of Ayak\", \"AY\", new Color(30, 120, 130), 3),\n    EYE_OF_AYAK_SPEC(\"Eye of Ayak Spec\", \"AYS\", new Color(30, 120, 130), 5),\n    EARTHBOUND_TACPATL(\"Earthbound Tacpatl\", \"TAC\", new Color(180, 20, 40), 4),\n    \n    TSOTD(\"Toxic Staff of the Dead\", \"TS\", new Color(70, 10, 10), 4),\n\n\n\n    ;\n\n    public final String name;\n    public final String shorthand;\n    public final Color color;\n    public final int attackTicks;\n\n\n    WeaponAttack(String name, String shorthand, Color color, int attackTicks)\n    {\n        this.attackTicks \u003d attackTicks;\n        this.name \u003d name;\n        this.shorthand \u003d shorthand;\n        this.color \u003d color;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\weapons\\WeaponAttack.java"},{"fileName":"WeaponDecider.java","content":"package com.advancedraidtracker.utility.weapons;\n\nimport java.util.Arrays;\nimport java.util.List;\n\npublic class WeaponDecider\n{\n    public static WeaponAttack getWeapon(String animationS, String graphics, String projectileS, String weaponS)\n    { //todo redo all of this ** magic numbers will be fixed then too\n        WeaponAttack weaponUsed \u003d WeaponAttack.UNDECIDED;\n        List\u003cString\u003e spotAnims \u003d Arrays.asList(graphics.split(\":\"));\n        int projectile;\n        int weapon;\n        int animation;\n        try\n        {\n            projectile \u003d Integer.parseInt(projectileS);\n            weapon \u003d Integer.parseInt(weaponS);\n            animation \u003d Integer.parseInt(animationS);\n        } catch (Exception e)\n        {\n            return weaponUsed;\n        }\n        switch (animation)\n        {\n            case 5061:\n            case 10656:\n                if (projectile \u003d\u003d 1043 || projectile \u003d\u003d 2599)\n                {\n                    weaponUsed \u003d WeaponAttack.BLOWPIPE_SPEC;\n                } else\n                {\n                    weaponUsed \u003d WeaponAttack.BLOWPIPE;\n                }\n                break;\n            case 12397:\n                weaponUsed \u003d WeaponAttack.EYE_OF_AYAK;\n                break;\n            case 12394:\n                weaponUsed \u003d WeaponAttack.EYE_OF_AYAK_SPEC;\n                break;\n            case 12342:\n                weaponUsed \u003d WeaponAttack.EARTHBOUND_TACPATL;\n                break;\n            case 11430:\n            case 1167:\n                if (spotAnims.stream().anyMatch(p -\u003e p.equalsIgnoreCase(\"1540\")))\n                {\n                    weaponUsed \u003d WeaponAttack.SANG;\n                } else\n                {\n                    if (weapon \u003d\u003d 22516)\n                    {\n                        if (projectile \u003d\u003d 1547)\n                        {\n                            weaponUsed \u003d WeaponAttack.DAWN_SPEC;\n                        } else\n                        {\n                            weaponUsed \u003d WeaponAttack.DAWN_AUTO;\n                        }\n                    } else\n                    {\n                        weaponUsed \u003d WeaponAttack.SANG;\n                    }\n                }\n                break;\n            case 1979:\n            case 10092:\n                weaponUsed \u003d WeaponAttack.FREEZE; //todo add lowercase if bad weapon\n                break;\n            case 1978:\n            case 10091:\n                weaponUsed \u003d WeaponAttack.BLITZ;\n                break;\n            case 8056:\n                weaponUsed \u003d WeaponAttack.SCYTHE;\n                break;\n            case 7511:\n                weaponUsed \u003d WeaponAttack.DINHS_SPEC;\n                break;\n            case 7618:\n                weaponUsed \u003d WeaponAttack.CHIN;\n                break;\n            case 1658:\n                weaponUsed \u003d WeaponAttack.WHIP;\n                break;\n            case 401:\n                weaponUsed \u003d WeaponAttack.HAMMER_BOP;\n                break;\n            case 1378:\n                weaponUsed \u003d WeaponAttack.HAMMER;\n                break;\n            case 428:\n            case 419:\n            case 440:\n                if(weapon \u003d\u003d 12904)\n                {\n                    weaponUsed \u003d WeaponAttack.TSOTD;\n                    break;\n                }\n                weaponUsed \u003d WeaponAttack.CHALLY_WHACK;\n                break;\n            case 1203:\n                weaponUsed \u003d WeaponAttack.CHALLY_SPEC;\n                break;\n            case 390:\n            case 9471:\n                if(weapon \u003d\u003d 26219)\n                {\n                    weaponUsed \u003d WeaponAttack.FANG;\n                    break;\n                }\n            case 8288:\n            case 386:\n                if(weapon \u003d\u003d 23995 || weapon \u003d\u003d 24551)\n                {\n                    weaponUsed \u003d WeaponAttack.BLADE_OF_SAELDOR;\n                    break;\n                }\n                weaponUsed \u003d WeaponAttack.SWIFT_BLADE;\n                break;\n            case 7642:\n            case 7643:\n                weaponUsed \u003d WeaponAttack.BGS_SPEC;\n                break;\n            case 7045:\n                weaponUsed \u003d WeaponAttack.BGS_WHACK;\n                break;\n            case 426:\n                if (weapon \u003d\u003d 20997)\n                {\n                    weaponUsed \u003d WeaponAttack.TBOW;\n                } else if (weapon \u003d\u003d 27655)\n                {\n                    weaponUsed \u003d WeaponAttack.WEB_WEAVER;\n                } else\n                {\n                    weaponUsed \u003d WeaponAttack.TBOW;\n                }\n                break;\n            case 9168:\n                if (projectile \u003d\u003d 1468)\n                {\n                    weaponUsed \u003d WeaponAttack.ZCB_AUTO;\n                } else if (projectile \u003d\u003d 1995)\n                {\n                    weaponUsed \u003d WeaponAttack.ZCB_SPEC;\n                }\n                break;\n            case 2068:\n                weaponUsed \u003d WeaponAttack.SULPHUR_BLADES;\n                break;\n            case 10989:\n                weaponUsed \u003d WeaponAttack.DUAL_MAUCUAHUITL;\n                break;\n            case 7516:\n                weaponUsed \u003d WeaponAttack.ELDER_MAUL;\n                break;\n            case 11124:\n                weaponUsed \u003d WeaponAttack.ELDER_MAUL_SPEC;\n                break;\n            case 10923:\n                weaponUsed \u003d WeaponAttack.GLAIVE_AUTO;\n                break;\n            case 10914:\n                weaponUsed \u003d WeaponAttack.GLAIVE_SPEC;\n                break;\n            case 393:\n                weaponUsed \u003d WeaponAttack.CLAW_SCRATCH;\n                break;\n            case 7514:\n                weaponUsed \u003d WeaponAttack.CLAW_SPEC;\n                break;\n            case 9493:\n                weaponUsed \u003d WeaponAttack.SHADOW;\n                break;\n            case 7554:\n                weaponUsed \u003d WeaponAttack.DART;\n                break;\n            case 6299:\n                weaponUsed \u003d WeaponAttack.SBS;\n                break;\n            case 100000:\n                weaponUsed \u003d WeaponAttack.BOUNCE;\n                break;\n            case 4411:\n                weaponUsed \u003d WeaponAttack.AID_OTHER;\n                break;\n            case 8316:\n                weaponUsed \u003d WeaponAttack.VENG_SELF;\n                break;\n            case 6294:\n                weaponUsed \u003d WeaponAttack.HUMIDIFY;\n                break;\n            case 722:\n                weaponUsed \u003d WeaponAttack.MAGIC_IMBUE;\n                break;\n            case 10629:\n            case 836:\n                weaponUsed \u003d WeaponAttack.DEATH;\n                break;\n            case 8070:\n            case 1816:\n                weaponUsed \u003d WeaponAttack.TELEPORT;\n                break;\n            case 4409:\n                weaponUsed \u003d WeaponAttack.HEAL_GROUP;\n                break;\n        }\n        return weaponUsed;\n    }\n}","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\weapons\\WeaponDecider.java"},{"fileName":"DawnSpec.java","content":"package com.advancedraidtracker.utility.wrappers;\n\nimport lombok.Getter;\nimport lombok.Setter;\n\npublic class DawnSpec\n{\n    public String player;\n    public int tick;\n\n    public DawnSpec(String player, int tick)\n    {\n        this.player \u003d player;\n        this.tick \u003d tick;\n    }\n\n    @Getter\n    @Setter\n    int damage \u003d -1;\n\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\wrappers\\DawnSpec.java"},{"fileName":"MaidenCrab.java","content":"package com.advancedraidtracker.utility.wrappers;\n\nimport net.runelite.api.NPC;\n\npublic class MaidenCrab\n{\n    public NPC crab;\n    public int maxHealth;\n    public int health;\n    public String description;\n\n    public MaidenCrab(NPC crab, int scale, String description)\n    {\n        switch (scale)\n        {\n            case 5:\n                maxHealth \u003d 100;\n                break;\n            case 4:\n                maxHealth \u003d 87;\n                break;\n            default:\n                maxHealth \u003d 75;\n                break;\n        }\n        this.crab \u003d crab;\n        health \u003d maxHealth;\n        this.description \u003d description;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\wrappers\\MaidenCrab.java"},{"fileName":"NPCTimeInChunkShell.java","content":"package com.advancedraidtracker.utility.wrappers;\n\nimport lombok.Getter;\nimport net.runelite.api.NPC;\n\npublic class NPCTimeInChunkShell\n{\n    @Getter\n    public int timeInChunk;\n    public int chunk;\n    public NPC npc;\n    public boolean marked;\n\n    public int getIndex()\n    {\n        return npc.getIndex();\n    }\n    public NPCTimeInChunkShell(NPC npc, int chunk, int timeInChunk)\n    {\n        this.npc \u003d npc;\n        this.chunk \u003d chunk;\n        this.timeInChunk \u003d timeInChunk;\n        marked \u003d false;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\wrappers\\NPCTimeInChunkShell.java"},{"fileName":"OutlineBox.java","content":"package com.advancedraidtracker.utility.wrappers;\n\nimport com.advancedraidtracker.utility.ItemReference;\nimport com.advancedraidtracker.utility.weapons.WeaponAttack;\n\nimport java.awt.*;\n\npublic class OutlineBox\n{\n    public String player;\n    public int tick;\n    public String letter;\n    public Color color;\n    public boolean primaryTarget;\n    public WeaponAttack weaponAttack;\n\n    public String additionalText;\n    public PlayerDidAttack attack;\n\n    public OutlineBox(PlayerDidAttack attack, String letter, Color color, boolean primaryTarget, String additionalText, WeaponAttack weaponAttack)\n    {\n        this.weaponAttack \u003d weaponAttack;\n        this.attack \u003d attack;\n        this.player \u003d attack.player;\n        this.tick \u003d attack.tick;\n        this.letter \u003d letter;\n        this.color \u003d color;\n        this.primaryTarget \u003d primaryTarget;\n        this.additionalText \u003d additionalText;\n    }\n\n    public final int NONE \u003d 0;\n    public final int MELEE \u003d 1;\n    public final int RANGE \u003d 2;\n    public final int MAGE \u003d 3;\n    public int style \u003d NONE;\n    public Color outlineColor \u003d new Color(0, 0, 0, 0);\n\n    private boolean anyMatch(String item, String[] items)\n    {\n        for(String s : items)\n        {\n            if(item.toLowerCase().contains(s))\n            {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    private void setStyle(String weapon)\n    {\n        if(anyMatch(weapon, ItemReference.ITEMS[MELEE]))\n        {\n            style \u003d MELEE;\n        }\n        else if(anyMatch(weapon, ItemReference.ITEMS[RANGE]))\n        {\n            style \u003d RANGE;\n        }\n        else if(anyMatch(weapon, ItemReference.ITEMS[MAGE]))\n        {\n            style \u003d MAGE;\n        }\n    }\n    public void createOutline()\n    {\n        if(letter.equals(\"VS\") || letter.equals(\"AO\") || letter.equals(\"HU\") || letter.equals(\"MI\") || letter.equals(\"DB\") || letter.equals(\"SS\"))\n        {\n            return;\n        }\n        int correctItems \u003d 0;\n        boolean voidHelmWorn \u003d false;\n        if(attack.wornItemNames.length \u003d\u003d 9)\n        {\n            setStyle(attack.wornItemNames[3]);\n            if(attack.wornItemNames[0].toLowerCase().contains(\"void\"))\n            {\n                voidHelmWorn \u003d true;\n            }\n            for(String s : attack.wornItemNames)\n            {\n                if(anyMatch(s, ItemReference.ITEMS[style]) || (voidHelmWorn \u0026\u0026 s.toLowerCase().contains(\"void\")))\n                {\n                    correctItems++;\n                }\n            }\n            if(attack.wornItemNames[2].toLowerCase().contains(\"blood fury\") \u0026\u0026 style \u003d\u003d MELEE)\n            {\n                correctItems++;\n            }\n        }\n        switch(style)\n        {\n            case MELEE:\n                if(correctItems \u003c 8)\n                {\n                    int opacity \u003d (int)((255)*((8-correctItems)/8.0));\n                    opacity \u003d Math.max(opacity, 150);\n                    outlineColor \u003d new Color(255, 255, 0, opacity);\n                }\n                break;\n            case RANGE:\n                if(correctItems \u003c 6)\n                {\n                    outlineColor \u003d new Color(255, 255, 0, (int)((255)*((6-correctItems)/6.0)));\n                }\n                break;\n            case MAGE:\n                if(correctItems \u003c 5)\n                {\n                    outlineColor \u003d new Color(255, 255, 0, (int)((255)*((5-correctItems)/5.0)));\n                }\n                break;\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\wrappers\\OutlineBox.java"},{"fileName":"PlayerCopy.java","content":"package com.advancedraidtracker.utility.wrappers;\n\npublic class PlayerCopy\n{\n    public String name;\n    public int interactingIndex;\n    public int interactingID;\n    public String interactingName;\n    public int animation;\n    public String wornItems;\n    public String weapon;\n    public PlayerCopy(String name, int interactingIndex, int interactingID, String interactingName, int animation, String wornItems, String weapon)\n    {\n        this.name \u003d name;\n        this.interactingIndex \u003d interactingIndex;\n        this.interactingID \u003d interactingID;\n        this.interactingName \u003d interactingName;\n        this.animation \u003d animation;\n        this.wornItems \u003d wornItems;\n        this.weapon \u003d weapon;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\wrappers\\PlayerCopy.java"},{"fileName":"PlayerCorrelatedPointData.java","content":"package com.advancedraidtracker.utility.wrappers;\n\npublic class PlayerCorrelatedPointData\n{\n    public int value;\n    public String player;\n\n    public PlayerCorrelatedPointData(String player, int value)\n    {\n        this.value \u003d value;\n        this.player \u003d player;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\wrappers\\PlayerCorrelatedPointData.java"},{"fileName":"PlayerDidAttack.java","content":"package com.advancedraidtracker.utility.wrappers;\n\nimport com.advancedraidtracker.utility.PlayerWornItems;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ItemID;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.util.AsyncBufferedImage;\n\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.HashSet;\nimport java.util.Set;\n\n@Slf4j\npublic class PlayerDidAttack\n{\n    public String player;\n    public String animation;\n    public int tick;\n    public String weapon;\n    public String projectile;\n    public String spotAnims;\n    public int targetedIndex;\n    public int targetedID;\n    public String targetName;\n    public String wornItems;\n    public String[] wornItemNames \u003d {};\n\n    public ItemManager itemManager;\n    public AsyncBufferedImage img \u003d null;\n    private boolean setUnkitted \u003d false;\n\n    private static final Set\u003cInteger\u003e scythe \u003d new HashSet\u003c\u003e(Arrays.asList(ItemID.HOLY_SCYTHE_OF_VITUR, ItemID.SANGUINE_SCYTHE_OF_VITUR));\n    private static final Set\u003cInteger\u003e bp \u003d new HashSet\u003c\u003e(Collections.singletonList(ItemID.BLAZING_BLOWPIPE));\n    private static final Set\u003cInteger\u003e sang \u003d new HashSet\u003c\u003e(Collections.singletonList(ItemID.HOLY_SANGUINESTI_STAFF));\n    private static final Set\u003cInteger\u003e bulwark \u003d new HashSet\u003c\u003e(Collections.singletonList(ItemID.DINHS_BLAZING_BULWARK));\n    private static final Set\u003cInteger\u003e claws \u003d new HashSet\u003c\u003e(Collections.singletonList(ItemID.CORRUPTED_DRAGON_CLAWS));\n    private static final Set\u003cInteger\u003e dwh \u003d new HashSet\u003c\u003e(Arrays.asList(ItemID.DRAGON_WARHAMMER_CR, ItemID.DRAGON_WARHAMMER_OR));\n\n    public PlayerDidAttack(ItemManager itemManager, String player, String animation, int tick, String weapon, String projectile, String spotAnims, int targetedIndex, int targetedID, String targetName, String worn)\n    {\n        this.itemManager \u003d itemManager;\n        this.player \u003d player;\n        this.animation \u003d animation;\n        this.tick \u003d tick;\n        this.weapon \u003d weapon;\n        this.projectile \u003d projectile;\n        this.spotAnims \u003d spotAnims;\n        this.targetedIndex \u003d targetedIndex;\n        this.targetedID \u003d targetedID;\n        this.targetName \u003d targetName;\n        this.wornItems \u003d worn;\n    }\n\n    public void setWornNames()\n    {\n        wornItemNames \u003d new PlayerWornItems(wornItems, itemManager).getAll();\n    }\n\n    public void useUnkitted()\n    {\n        setUnkitted \u003d true;\n    }\n\n    private int getReplacement(int original)\n    {\n        if(scythe.contains(original))\n        {\n            return ItemID.SCYTHE_OF_VITUR;\n        }\n        if(sang.contains(original))\n        {\n            return ItemID.SANGUINESTI_STAFF;\n        }\n        if(bp.contains(original))\n        {\n            return ItemID.TOXIC_BLOWPIPE;\n        }\n        if(bulwark.contains(original))\n        {\n            return ItemID.DINHS_BULWARK;\n        }\n        if(claws.contains(original))\n        {\n            return ItemID.DRAGON_CLAWS;\n        }\n        if(dwh.contains(original))\n        {\n            return ItemID.DRAGON_WARHAMMER;\n        }\n        return original;\n    }\n\n    public void setIcons()\n    {\n        int weaponID \u003d Integer.parseInt(this.weapon);\n        if(setUnkitted)\n        {\n            weaponID \u003d getReplacement(weaponID);\n        }\n        img \u003d itemManager.getImage(weaponID, 1, false);\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\wrappers\\PlayerDidAttack.java"},{"fileName":"PlayerHitsWrapper.java","content":"package com.advancedraidtracker.utility.wrappers;\n\nimport java.util.ArrayList;\n\npublic class PlayerHitsWrapper\n{\n    public ArrayList\u003cInteger\u003e hitsplats;\n    public String name;\n    public int hits;\n\n    public PlayerHitsWrapper(String name, int initial)\n    {\n        this.name \u003d name;\n        hitsplats \u003d new ArrayList\u003c\u003e();\n        hitsplats.add(initial);\n        this.hits \u003d 0;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\wrappers\\PlayerHitsWrapper.java"},{"fileName":"QueuedPlayerAttackLessProjectiles.java","content":"package com.advancedraidtracker.utility.wrappers;\n\nimport net.runelite.api.Player;\nimport net.runelite.api.coords.WorldPoint;\n\npublic class QueuedPlayerAttackLessProjectiles\n{\n    public Player player;\n    public String animation;\n    public int tick;\n    public String spotAnims;\n    public String weapon;\n\n    public WorldPoint location;\n\n    public QueuedPlayerAttackLessProjectiles(Player player, WorldPoint location, int tick, String spotAnims, String weapon, String animation)\n    {\n        this.player \u003d player;\n        this.animation \u003d animation;\n        this.tick \u003d tick;\n        this.spotAnims \u003d spotAnims;\n        this.weapon \u003d weapon;\n        this.location \u003d location;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\wrappers\\QueuedPlayerAttackLessProjectiles.java"},{"fileName":"RaidsArrayWrapper.java","content":"package com.advancedraidtracker.utility.wrappers;\n\nimport com.advancedraidtracker.SimpleTOBData;\n\nimport java.util.ArrayList;\n\npublic class RaidsArrayWrapper\n{\n    public ArrayList\u003cSimpleTOBData\u003e data;\n    public String filename;\n\n    public RaidsArrayWrapper(ArrayList\u003cSimpleTOBData\u003e data, String filename)\n    {\n        this.data \u003d data;\n        this.filename \u003d filename;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\wrappers\\RaidsArrayWrapper.java"},{"fileName":"StringInt.java","content":"package com.advancedraidtracker.utility.wrappers;\n\npublic class StringInt\n{\n    public int val;\n    public String string;\n\n    public StringInt(String string, int val)\n    {\n        this.string \u003d string;\n        this.val \u003d val;\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\wrappers\\StringInt.java"},{"fileName":"ThrallOutlineBox.java","content":"package com.advancedraidtracker.utility.wrappers;\n\nimport java.awt.*;\n\nimport static com.advancedraidtracker.constants.TobIDs.*;\n\npublic class ThrallOutlineBox\n{\n    public int spawnTick;\n    public String owner;\n    public int id;\n\n    public ThrallOutlineBox(String owner, int spawnTick, int id)\n    {\n        this.spawnTick \u003d spawnTick;\n        this.owner \u003d owner;\n        this.id \u003d id;\n    }\n\n    public Color getColor()\n    {\n        switch (id)\n        {\n            case MELEE_THRALL:\n                return new Color(240, 30, 30);\n            case RANGE_THRALL:\n                return new Color(30, 240, 30);\n            case MAGE_THRALL:\n                return new Color(30, 30, 240);\n            default:\n                return new Color(30, 30, 30);\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\advancedraidtracker\\utility\\wrappers\\ThrallOutlineBox.java"},{"fileName":"AdvancedRaidTrackerPluginTest.java","content":"package com.advancedraidtracker;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class AdvancedRaidTrackerPluginTest\n{\n    public static void main(String[] args) throws Exception {\n        ExternalPluginManager.loadBuiltin(AdvancedRaidTrackerPlugin.class);\n        RuneLite.main(args);\n    }\n}","filePath":"src\\test\\java\\com\\advancedraidtracker\\AdvancedRaidTrackerPluginTest.java"}]},{"commit":"11b59828c801c3279f2f5e88ce3bfdf96b247010","repository":"https://github.com/vincent0955/Visual-metronome.git","internalName":"visual-metronome","files":[{"fileName":"FontTypes.java","content":"package com.visualmetronome;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@RequiredArgsConstructor\n@Getter\npublic enum FontTypes\n{\n    REGULAR(\"RS Regular\"),\n    ARIAL(\"Arial\"),\n    CAMBRIA(\"Cambria\"),\n    ROCKWELL(\"Rockwell\"),\n    SEGOE_UI(\"Segoe Ui\"),\n    TIMES_NEW_ROMAN(\"Times New Roman\"),\n    VERDANA(\"Verdana\");\n\n    private final String name;\n\n    @Override\n    public String toString() {\n        return name;\n    }\n}\n","filePath":"src\\main\\java\\com\\visualmetronome\\FontTypes.java"},{"fileName":"FullResizableVisualMetronomeOverlay.java","content":"package com.visualmetronome;\n\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Font;\nimport javax.inject.Inject;\nimport net.runelite.api.Point;\nimport net.runelite.client.ui.overlay.OverlayUtil;\n\npublic class FullResizableVisualMetronomeOverlay extends Overlay\n{\n\n    private final VisualMetronomeConfig config;\n    private final VisualMetronomePlugin plugin;\n\n    private static int TITLE_PADDING \u003d 10;\n    private static final int MINIMUM_SIZE \u003d 16; // too small and resizing becomes impossible, requiring a reset\n    private Point tickCounterCenter;\n\n    @Inject\n    public FullResizableVisualMetronomeOverlay(VisualMetronomeConfig config, VisualMetronomePlugin plugin)\n    {\n        super(plugin);\n        this.config \u003d config;\n        this.plugin \u003d plugin;\n        setPosition(OverlayPosition.ABOVE_CHATBOX_RIGHT);\n        setMinimumSize(MINIMUM_SIZE);\n        setResizable(true);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics)\n    {\n        Dimension preferredSize \u003d getPreferredSize();\n\n        if (preferredSize \u003d\u003d null)\n        {\n            // if this happens, reset to default - should be rare, but eg. alt+rightclick will cause this\n            preferredSize \u003d plugin.DEFAULT_SIZE;\n            setPreferredSize(preferredSize);\n        }\n\n        if (config.enableMetronome())\n        {\n            graphics.setColor(plugin.currentColor);\n            graphics.fillRect(0, 0, preferredSize.width, preferredSize.height);\n            TITLE_PADDING \u003d (Math.min(preferredSize.width, preferredSize.height) / 2 - 4); // scales tick number position with box size\n\n            if (config.showTick())\n            {\n                if (config.disableFontScaling())\n                {\n                    graphics.setColor(config.NumberColor());\n                    if (config.tickCount() \u003d\u003d 1)\n                    {\n                        graphics.drawString(String.valueOf(plugin.currentColorIndex), TITLE_PADDING, preferredSize.height - TITLE_PADDING);\n                    }\n                    else\n                    {\n                        graphics.drawString(String.valueOf(plugin.tickCounter), TITLE_PADDING, preferredSize.height - TITLE_PADDING);\n                    }\n\n                }\n                else\n                {\n                    if (config.fontType() \u003d\u003d FontTypes.REGULAR)\n                    {\n                        graphics.setFont(new Font(FontManager.getRunescapeFont().getName(), Font.PLAIN, Math.min(preferredSize.width, preferredSize.height))); //scales font size based on the size of the metronome\n                        tickCounterCenter \u003d new Point(preferredSize.width / 4, preferredSize.height);\n                    }\n                    else\n                    {\n                        graphics.setFont(new Font(config.fontType().toString(), Font.PLAIN, Math.min(preferredSize.width, Math.min(preferredSize.width, preferredSize.height))));\n                        tickCounterCenter \u003d new Point(preferredSize.width / 4, preferredSize.height - (preferredSize.height / 8));\n                    }\n\n                    final Point tickCounterPoint \u003d tickCounterCenter;\n                    if (config.tickCount() \u003d\u003d 1)\n                    {\n                        OverlayUtil.renderTextLocation(graphics, tickCounterPoint, String.valueOf(plugin.currentColorIndex), config.NumberColor());\n                    }\n                    else\n                    {\n                        OverlayUtil.renderTextLocation(graphics, tickCounterPoint, String.valueOf(plugin.tickCounter), config.NumberColor());\n                    }\n                }\n            }\n        }\n\n        return preferredSize;\n    }\n}\n","filePath":"src\\main\\java\\com\\visualmetronome\\FullResizableVisualMetronomeOverlay.java"},{"fileName":"TickRequestMessage.java","content":"package com.visualmetronome.messages;\n\nimport net.runelite.client.party.messages.PartyMemberMessage;\n\npublic class TickRequestMessage extends PartyMemberMessage\n{\n    private String target;\n\n    public TickRequestMessage() {}\n\n    public TickRequestMessage(String target)\n    {\n        this.target \u003d target;\n    }\n\n    public String getTarget()\n    {\n        return target;\n    }\n\n    public void setTarget(String target)\n    {\n        this.target \u003d target;\n    }\n}\n","filePath":"src\\main\\java\\com\\visualmetronome\\messages\\TickRequestMessage.java"},{"fileName":"TickSyncMessage.java","content":"package com.visualmetronome.messages;\n\nimport net.runelite.client.party.messages.PartyMemberMessage;\n\npublic class TickSyncMessage extends PartyMemberMessage\n{\n    private int tickCounter;\n    private int tickCounter2;\n    private int tickCounter3;\n    private int colorIndex;\n    private int configColorIndex;\n    private int tickCount;\n    private int tickCount2;\n    private int tickCount3;\n\n    private String displayName;\n    private String localSender;\n\n    public TickSyncMessage() {}\n\n    public TickSyncMessage(int tickCounter, int tickCounter2, int tickCounter3, int colorIndex, int configColorIndex, int tickCount, int tickCount2, int tickCount3, String localSender)\n    {\n        this.tickCounter \u003d tickCounter;\n        this.tickCounter2 \u003d tickCounter2;\n        this.tickCounter3 \u003d tickCounter3;\n        this.colorIndex \u003d colorIndex;\n        this.configColorIndex \u003d configColorIndex;\n        this.tickCount \u003d tickCount;\n        this.tickCount2 \u003d tickCount2;\n        this.tickCount3 \u003d tickCount3;\n        this.localSender \u003d localSender;\n\n    }\n\n    public String getlocalSender()\n    {\n        return localSender;\n    }\n\n    public void setlocalSender(String localSender)\n    {\n        this.localSender \u003d localSender;\n    }\n\n    public String getDisplayName()\n    {\n        return displayName;\n    }\n\n    public void setDisplayName(String displayName)\n    {\n        this.displayName \u003d displayName;\n    }\n\n    public int getTickCount()\n    {\n        return tickCount;\n    }\n\n    public int getTickCount2()\n    {\n        return tickCount2;\n    }\n\n    public int getTickCount3()\n    {\n        return tickCount3;\n    }\n\n    public int getTickCounter()\n    {\n        return tickCounter;\n    }\n\n    public int getTickCounter2()\n    {\n        return tickCounter2;\n    }\n\n    public int getTickCounter3()\n    {\n        return tickCounter3;\n    }\n\n    public int getColorIndex()\n    {\n        return colorIndex;\n    }\n\n    public int getConfigColorIndex()\n    {\n        return configColorIndex;\n    }\n}\n","filePath":"src\\main\\java\\com\\visualmetronome\\messages\\TickSyncMessage.java"},{"fileName":"MouseFollowingOverlay.java","content":"package com.visualmetronome;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.Point;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPriority;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\n\nimport javax.inject.Inject;\nimport java.awt.Color;\nimport java.awt.Font;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\n\npublic class MouseFollowingOverlay extends Overlay {\n    private final Client client;\n    private final VisualMetronomeConfig config;\n    private final VisualMetronomePlugin plugin;\n\n    @Inject\n    public MouseFollowingOverlay(Client client, VisualMetronomeConfig config, VisualMetronomePlugin plugin)\n    {\n        super(plugin);\n        this.client \u003d client;\n        this.config \u003d config;\n        this.plugin \u003d plugin;\n        setPosition(OverlayPosition.DYNAMIC);\n        setLayer(OverlayLayer.ALWAYS_ON_TOP);\n        setPriority(OverlayPriority.HIGH);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics)\n    {\n        if (config.mouseFollowingTick())\n        {\n            Point mousePos \u003d client.getMouseCanvasPosition();\n            if (mousePos !\u003d null)\n            {\n                // Set font\n                Font font \u003d config.fontType() \u003d\u003d FontTypes.REGULAR\n                        ? FontManager.getRunescapeFont().deriveFont(Font.PLAIN, config.fontSize())\n                        : new Font(config.fontType().toString(), Font.PLAIN, config.fontSize());\n                graphics.setFont(font);\n\n                // Set text\n                String text \u003d config.tickCount() \u003d\u003d 1\n                        ? String.valueOf(plugin.currentColorIndex)\n                        : String.valueOf(plugin.tickCounter);\n\n                // Apply configurable offsets using getX()/getY()\n                Point textPosition \u003d new Point(\n                        (int)mousePos.getX() + config.mouseOffsetX(),\n                        (int)mousePos.getY() + config.mouseOffsetY()\n                );\n\n                // Set which color to use\n\n                Color numberColor;\n                if (config.overheadUseCurrentColor())\n                {\n                    numberColor \u003d plugin.currentColor;\n                }\n                else\n                {\n                    numberColor \u003d config.NumberColor();\n                }\n\n                // Render\n                OverlayUtil.renderTextLocation(graphics, textPosition, text, numberColor);\n            }\n        }\n        return null;\n    }\n}","filePath":"src\\main\\java\\com\\visualmetronome\\MouseFollowingOverlay.java"},{"fileName":"VisualMetronomeConfig.java","content":"package com.visualmetronome;\n\nimport net.runelite.client.config.Alpha;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.Range;\nimport net.runelite.client.config.ConfigSection;\nimport net.runelite.client.config.Keybind;\n\nimport java.awt.Color;\n\n@ConfigGroup(\"visualmetronome\")\npublic interface VisualMetronomeConfig extends Config\n{\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"enableMetronome\",\n\t\t\tname \u003d \"Visual Metronome\",\n\t\t\tdescription \u003d \"Enable visual metronome\"\n\t)\n\tdefault boolean enableMetronome()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d \"highlightCurrentTile\",\n\t\t\tname \u003d \"Enable True Tile Overlay\",\n\t\t\tdescription \u003d \"Highlights true player tile using the metronome colors (replacement for tile indicator plugin setting)\"\n\t)\n\tdefault boolean highlightCurrentTile()\n\t{\n\t\treturn false;\n\t}\n\n\n\t@Range(\n\t\t\tmin \u003d 16\n\t)\n\t@ConfigItem(\n\t\t\tposition \u003d 3,\n\t\t\tkeyName \u003d \"boxWidth\",\n\t\t\tname \u003d \"Default Box Size (Alt + Right Click Box)\",\n\t\t\tdescription \u003d \"Configure the default length and width of the box. Use alt + right click on the box to reset to the size specified\"\n\t)\n\tdefault int boxWidth()\n\t{\n\t\treturn 25;\n\t}\n\n\t@Range(\n\t\t\tmin \u003d 1\n\t)\n\t@ConfigItem(\n\t\t\tposition \u003d 4,\n\t\t\tkeyName \u003d \"tickCount\",\n\t\t\tname \u003d \"Tick Count\",\n\t\t\tdescription \u003d \"The tick on which the color changes\"\n\t)\n\tdefault int tickCount()\n\t{\n\t\treturn 1;\n\t}\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Tick Number Settings\",\n\t\t\tdescription \u003d \"Change Tick Number settings\",\n\t\t\tposition \u003d 5\n\t)\n\tString TickNumberSettings \u003d \"Tick Number Settings\";\n\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"showTick\",\n\t\t\tname \u003d \"Show Metronome Tick Number\",\n\t\t\tdescription \u003d \"Shows current tick number on the metronome\",\n\t\t\tsection \u003d TickNumberSettings\n\t)\n\tdefault boolean showTick()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d \"showPlayerTick\",\n\t\t\tname \u003d \"Show Tick Number Above Player\",\n\t\t\tdescription \u003d \"Shows current tick number above the player\",\n\t\t\tsection \u003d TickNumberSettings\n\t)\n\tdefault boolean showPlayerTick()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 3,\n\t\t\tkeyName \u003d \"disableFontScaling\",\n\t\t\tname \u003d \"Disable Font Size Scaling (Metronome Tick Only)\",\n\t\t\tdescription \u003d \"Disables font size scaling for metronome tick number\",\n\t\t\tsection \u003d TickNumberSettings\n\t)\n\tdefault boolean disableFontScaling()\n\t{\n\t\treturn false;\n\t}\n\n\t@Range(\n\t\t\tmin \u003d 8,\n\t\t\tmax \u003d 50\n\t)\n\t@ConfigItem(\n\t\t\tposition \u003d 4,\n\t\t\tkeyName \u003d \"fontSize\",\n\t\t\tname \u003d \"Font Size (Overhead Tick Only)\",\n\t\t\tdescription \u003d \"Change the font size of the overhead Tick Number\",\n\t\t\tsection \u003d TickNumberSettings\n\t)\n\tdefault int fontSize()\n\t{\n\t\treturn 15;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 5,\n\t\t\tkeyName \u003d \"countColor\",\n\t\t\tname \u003d \"Tick Number Color\",\n\t\t\tdescription \u003d \"Configures the color of tick number\",\n\t\t\tsection \u003d TickNumberSettings\n\t)\n\tdefault Color NumberColor()\n\t{\n\t\treturn Color.CYAN;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 6,\n\t\t\tkeyName \u003d \"fontType\",\n\t\t\tname \u003d \"Font Type\",\n\t\t\tdescription \u003d \"Change the font of the Tick Number\",\n\t\t\tsection \u003d TickNumberSettings\n\t)\n\tdefault FontTypes fontType() { return FontTypes.REGULAR; }\n\n\t@ConfigSection(\n\t\t\tname \u003d \"True Tile Overlay Settings\",\n\t\t\tdescription \u003d \"Settings only applied to True Tile Overlay\",\n\t\t\tposition \u003d 6\n\t)\n\tString TileSettings \u003d \"True Tile Overlay Settings\";\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"currentTileFillColor\",\n\t\t\tname \u003d \"True Tile Fill Color\",\n\t\t\tdescription \u003d \"Fill color of the true tile overlay\",\n\t\t\tsection \u003d TileSettings\n\t)\n\tdefault Color currentTileFillColor()\n\t{\n\t\treturn new Color(0, 0, 0, 50);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d \"currentTileBorderWidth\",\n\t\t\tname \u003d \"True Tile Border Width\",\n\t\t\tdescription \u003d \"Border size of the true tile overlay\",\n\t\t\tsection \u003d TileSettings\n\t)\n\tdefault double currentTileBorderWidth()\n\t{\n\t\treturn 2;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 3,\n\t\t\tkeyName \u003d \"changeFillColor\",\n\t\t\tname \u003d \"Enable Tile Fill Color Metronome\",\n\t\t\tdescription \u003d \"Makes the tile fill color change with the metronome\",\n\t\t\tsection \u003d TileSettings\n\t)\n\tdefault boolean changeFillColor()\n\t{\n\t\treturn false;\n\t}\n\n\t@Range(\n\t\t\tmin \u003d 0,\n\t\t\tmax \u003d 255\n\t)\n\t@ConfigItem(\n\t\t\tposition \u003d 4,\n\t\t\tkeyName \u003d \"changeFillColorOpacity\",\n\t\t\tname \u003d \"Fill Color Metronome Opacity\",\n\t\t\tdescription \u003d \"Opacity of the tile fill metronome color if the option above is enabled. Otherwise, the opacity is determined by the True Tile Fill Color setting\",\n\t\t\tsection \u003d TileSettings\n\t)\n\tdefault int changeFillColorOpacity()\n\t{\n\t\treturn 50;\n\t}\n\n\n    @ConfigSection(\n            name \u003d \"Party Sync Settings\",\n            description \u003d \"Settings for syncing your metronome to a member of your party, this may modify the Tick Count and Number of Colors config settings\",\n            position \u003d 7\n    )\n\n    String PartySyncSettings \u003d \"Party Sync Settings\";\n\n    @ConfigItem(\n            position \u003d 1,\n            keyName \u003d \"enablePartySync\",\n            name \u003d \"Sync with Target\",\n            description \u003d \"Synchronize tick counters with a selected party member\",\n            section \u003d PartySyncSettings\n    )\n\n    default boolean enablePartySync()\n    {\n        return false;\n    }\n\n    @ConfigItem(\n            position \u003d 2,\n            keyName \u003d \"syncTarget\",\n            name \u003d \"Sync Target\",\n            description \u003d \"Choose which party member to sync ticks with\",\n            section \u003d PartySyncSettings\n    )\n    default String syncTarget()\n    {\n        return \"\";\n    }\n\n\n    @ConfigSection(\n\t\t\tname \u003d \"Color Settings\",\n\t\t\tdescription \u003d \"Change the colors and number of colors to cycle through\",\n\t\t\tposition \u003d 8\n\t)\n\tString ColorSettings \u003d \"Color Settings\";\n\n\n\t@Range(\n\t\t\tmin \u003d 2,\n\t\t\tmax \u003d 10\n\t)\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"colorCycle\",\n\t\t\tname \u003d \"Number of Colors\",\n\t\t\tdescription \u003d \"The number of colors it cycles through\",\n\t\t\tsection \u003d ColorSettings\n\t)\n\tdefault int colorCycle()\n\t{\n\t\treturn 2;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d \"tickColor\",\n\t\t\tname \u003d \"Tick Color\",\n\t\t\tdescription \u003d \"Configures the color of tick\",\n\t\t\tsection \u003d ColorSettings\n\t)\n\tdefault Color getTickColor()\n\t{\n\t\treturn Color.WHITE;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 3,\n\t\t\tkeyName \u003d \"tockColor\",\n\t\t\tname \u003d \"Tock Color\",\n\t\t\tdescription \u003d \"Configures the color of tock\",\n\t\t\tsection \u003d ColorSettings\n\t)\n\tdefault Color getTockColor()\n\t{\n\t\treturn Color.GRAY;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 4,\n\t\t\tkeyName \u003d \"tick3Color\",\n\t\t\tname \u003d \"3rd Tick Color\",\n\t\t\tdescription \u003d \"Configures the color of 3rd tick if enabled\",\n\t\t\tsection \u003d ColorSettings\n\t)\n\tdefault Color getTick3Color()\n\t{\n\t\treturn Color.DARK_GRAY;\n\t}\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 5,\n\t\t\tkeyName \u003d \"tick4Color\",\n\t\t\tname \u003d \"4th Tick Color\",\n\t\t\tdescription \u003d \"Configures the color of the 4th tick if enabled\",\n\t\t\tsection \u003d ColorSettings\n\t)\n\tdefault Color getTick4Color()\n\t{\n\t\treturn Color.BLACK;\n\t}\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 6,\n\t\t\tkeyName \u003d \"tick5Color\",\n\t\t\tname \u003d \"5th Tick Color\",\n\t\t\tdescription \u003d \"Configures the color of the 5th tick if enabled\",\n\t\t\tsection \u003d ColorSettings\n\t)\n\tdefault Color getTick5Color()\n\t{\n\t\treturn new Color(112, 131, 255);\n\t}\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 7,\n\t\t\tkeyName \u003d \"tick6Color\",\n\t\t\tname \u003d \"6th Tick Color\",\n\t\t\tdescription \u003d \"Configures the color of the 6th tick if enabled\",\n\t\t\tsection \u003d ColorSettings\n\t)\n\tdefault Color getTick6Color()\n\t{\n\t\treturn new Color(0, 23, 171);\n\t}\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 8,\n\t\t\tkeyName \u003d \"tick7Color\",\n\t\t\tname \u003d \"7th Tick Color\",\n\t\t\tdescription \u003d \"Configures the color of the 7th tick if enabled\",\n\t\t\tsection \u003d ColorSettings\n\t)\n\tdefault Color getTick7Color()\n\t{\n\t\treturn new Color(107, 255, 124);\n\t}\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 9,\n\t\t\tkeyName \u003d \"tick8Color\",\n\t\t\tname \u003d \"8th Tick Color\",\n\t\t\tdescription \u003d \"Configures the color of the 8th tick if enabled\",\n\t\t\tsection \u003d ColorSettings\n\t)\n\tdefault Color getTick8Color()\n\t{\n\t\treturn new Color(0, 191, 22);\n\t}\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 10,\n\t\t\tkeyName \u003d \"tick9Color\",\n\t\t\tname \u003d \"9th Tick Color\",\n\t\t\tdescription \u003d \"Configures the color of the 9th tick if enabled\",\n\t\t\tsection \u003d ColorSettings\n\t)\n\tdefault Color getTick9Color()\n\t{\n\t\treturn new Color(255, 105, 94);\n\t}\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 11,\n\t\t\tkeyName \u003d \"tick10Color\",\n\t\t\tname \u003d \"10th Tick Color\",\n\t\t\tdescription \u003d \"Configures the color of the 10th tick if enabled\",\n\t\t\tsection \u003d ColorSettings\n\t)\n\tdefault Color getTick10Color()\n\t{\n\t\treturn new Color(255, 17, 0);\n\t}\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Hotkey Settings\",\n\t\t\tdescription \u003d \"Settings that use hotkeys\",\n\t\t\tposition \u003d 9\n\t)\n\tString HotkeySettings \u003d \"Hotkey Settings\";\n\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"tickResetHotkey\",\n\t\t\tname \u003d \"Tick Cycle Reset Hotkey\",\n\t\t\tdescription \u003d \"Hotkey to reset the tick cycle back to 0\",\n\t\t\tsection \u003d HotkeySettings\n\t)\n\tdefault Keybind tickResetHotkey() {\n\t\treturn Keybind.NOT_SET;\n\t}\n\n\t@Range(\n\t\tmin \u003d 0\n\t)\n\t@ConfigItem(\n\t\tposition \u003d 2,\n\t\tkeyName \u003d \"tickResetStartTick\",\n\t\tname \u003d \"Reset to Tick\",\n\t\tdescription \u003d \"Choose which tick the hotkey resets the timer to\",\n\t\tsection \u003d HotkeySettings\n\t)\n\tdefault int tickResetStartTick()\n\t{\n\t\treturn 0;\n\t}\n\t@ConfigSection(\n\t\t\tname \u003d \"Mouse Following Settings\",\n\t\t\tdescription \u003d \"Settings for mouse-following tick counter\",\n\t\t\tposition \u003d 10,\n\t\t\tclosedByDefault \u003d true\n\t)\n\tString mouseFollowingSettings \u003d \"Mouse Following Settings\";\n\t@ConfigItem(\n\t\t\tposition \u003d 0,\n\t\t\tkeyName \u003d \"mouseFollowingTick\",\n\t\t\tname \u003d \"Tick Counter Follows Mouse\",\n\t\t\tdescription \u003d \"Makes the tick counter follow your mouse cursor. It uses the same settings as the Overhead Tick Number\",\n\t\t\tsection \u003d mouseFollowingSettings\n\t)\n\tdefault boolean mouseFollowingTick()\n\t{\n\t\treturn false;\n\t}\n\n\t@Range(\n\t\t\tmin \u003d -100,\n\t\t\tmax \u003d 100\n\t)\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"mouseOffsetX\",\n\t\t\tname \u003d \"Mouse X Offset\",\n\t\t\tdescription \u003d \"X offset from mouse cursor for tick counter\",\n\t\t\tsection \u003d mouseFollowingSettings\n\t)\n\tdefault int mouseOffsetX()\n\t{\n\t\treturn 10;\n\t}\n\n\t@Range(\n\t\t\tmin \u003d -100,\n\t\t\tmax \u003d 100\n\t)\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d \"mouseOffsetY\",\n\t\t\tname \u003d \"Mouse Y Offset\",\n\t\t\tdescription \u003d \"Y offset from mouse cursor for tick counter\",\n\t\t\tsection \u003d mouseFollowingSettings\n\t)\n\tdefault int mouseOffsetY()\n\t{\n\t\treturn -10;\n\t}\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Additional Overhead Cycle Settings\",\n\t\t\tdescription \u003d \"Enable additional tick cycles to track\",\n\t\t\tposition \u003d 11,\n\t\t\tclosedByDefault \u003d true\n\t)\n\tString additionalOverheadSettings \u003d \"Additional Overhead Tick Settings\";\n\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"showSecondCycle\",\n\t\t\tname \u003d \"Enable Second Cycle\",\n\t\t\tdescription \u003d \"Enables second tick number above the player\",\n\t\t\tsection \u003d additionalOverheadSettings\n\t)\n\tdefault boolean enableCycle2()\n\t{\n\t\treturn false;\n\t}\n\n\t@Range(\n\t\t\tmin \u003d 2\n\t)\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d \"tickCount2\",\n\t\t\tname \u003d \"Second Cycle Length\",\n\t\t\tdescription \u003d \"Length for the second cycle in ticks\",\n\t\t\tsection \u003d additionalOverheadSettings\n\t)\n\tdefault int tickCount2()\n\t{\n\t\treturn 2;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 3,\n\t\t\tkeyName \u003d \"cycle2Color\",\n\t\t\tname \u003d \"Second Cycle Color\",\n\t\t\tdescription \u003d \"Configures the color of second cycle\",\n\t\t\tsection \u003d additionalOverheadSettings\n\t)\n\tdefault Color cycle2Color()\n\t{\n\t\treturn Color.CYAN;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 4,\n\t\t\tkeyName \u003d \"showThirdCycle\",\n\t\t\tname \u003d \"Enable Third Cycle\",\n\t\t\tdescription \u003d \"Enables third tick number above the player\",\n\t\t\tsection \u003d additionalOverheadSettings\n\t)\n\tdefault boolean enableCycle3()\n\t{\n\t\treturn false;\n\t}\n\t@Range(\n\t\t\tmin \u003d 2\n\t)\n\t@ConfigItem(\n\t\t\tposition \u003d 5,\n\t\t\tkeyName \u003d \"tickCount3\",\n\t\t\tname \u003d \"Third Cycle Length\",\n\t\t\tdescription \u003d \"Length for the third cycle in ticks\",\n\t\t\tsection \u003d additionalOverheadSettings\n\t)\n\tdefault int tickCount3()\n\t{\n\t\treturn 2;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 6,\n\t\t\tkeyName \u003d \"cycle3Color\",\n\t\t\tname \u003d \"Third Cycle Color\",\n\t\t\tdescription \u003d \"Configures the color of third cycle\",\n\t\t\tsection \u003d additionalOverheadSettings\n\t)\n\tdefault Color cycle3Color()\n\t{\n\t\treturn Color.CYAN;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 7,\n\t\t\tkeyName \u003d \"overheadCyclesGapDistance\",\n\t\t\tname \u003d \"Second and Third Tick Gap Distance\",\n\t\t\tdescription \u003d \"Configures the distance of the gap between the overhead ticks\",\n\t\t\tsection \u003d additionalOverheadSettings\n\t)\n\tdefault int overheadCyclesGapDistance()\n\t{\n\t\treturn 20;\n\t}\n\n\t@Range(\n\t\t\tmin \u003d -500,\n\t\t\tmax \u003d 500\n\t)\n\t@ConfigItem(\n\t\t\tposition \u003d 8,\n\t\t\tkeyName \u003d \"overheadHeight\",\n\t\t\tname \u003d \"Overhead Tick Height\",\n\t\t\tdescription \u003d \"Configures the height of overhead ticks\",\n\t\t\tsection \u003d additionalOverheadSettings\n\t)\n\tdefault int overheadHeight()\n\t{\n\t\treturn 20;\n\t}\n\n\t@Range(\n\t\t\tmin \u003d -50,\n\t\t\tmax \u003d 50\n\t)\n\t@ConfigItem(\n\t\t\tposition \u003d 9,\n\t\t\tkeyName \u003d \"overheadXCenterOffset\",\n\t\t\tname \u003d \"Overhead Tick X Center Offset\",\n\t\t\tdescription \u003d \"Configures the X offset of overhead ticks\",\n\t\t\tsection \u003d additionalOverheadSettings\n\t)\n\tdefault int overheadXCenterOffset()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 10,\n\t\t\tkeyName \u003d \"overheadUseCurrentColor\",\n\t\t\tname \u003d \"Use Metronome Color for Overhead\",\n\t\t\tdescription \u003d \"Uses the metronome color for the overhead tick color instead of Tick Number Color\",\n\t\t\tsection \u003d additionalOverheadSettings\n\t)\n\tdefault boolean overheadUseCurrentColor()\n\t{\n\t\treturn false;\n\t}\n\n}\n\n","filePath":"src\\main\\java\\com\\visualmetronome\\VisualMetronomeConfig.java"},{"fileName":"VisualMetronomeNumberOverlay.java","content":"package com.visualmetronome;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Point;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\nimport javax.inject.Inject;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Font;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPriority;\nimport java.awt.Color;\n\n\npublic class VisualMetronomeNumberOverlay extends Overlay\n{\n\n    private final Client client;\n    private final VisualMetronomeConfig config;\n    private final VisualMetronomePlugin plugin;\n\n    @Inject\n    public VisualMetronomeNumberOverlay(Client client, VisualMetronomeConfig config, VisualMetronomePlugin plugin)\n    {\n        super(plugin);\n        this.client \u003d client;\n        this.config \u003d config;\n        this.plugin \u003d plugin;\n        setPosition(OverlayPosition.DYNAMIC);\n        setLayer(OverlayLayer.UNDER_WIDGETS);\n        setPriority(OverlayPriority.MED);\n\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics)\n    {\n        if (config.showPlayerTick())\n        {\n            if (config.fontType() \u003d\u003d FontTypes.REGULAR)\n            {\n                graphics.setFont(new Font(FontManager.getRunescapeFont().getName(), Font.PLAIN, config.fontSize()));\n            }\n            else\n            {\n                graphics.setFont(new Font(config.fontType().toString(), Font.PLAIN, config.fontSize()));\n            }\n\n            // Set which color to use\n            Color numberColor;\n            if (config.overheadUseCurrentColor())\n            {\n                numberColor \u003d plugin.currentColor;\n            }\n            else\n            {\n                numberColor \u003d config.NumberColor();\n            }\n\n            final int height \u003d client.getLocalPlayer().getLogicalHeight() + config.overheadHeight();\n            final LocalPoint localLocation \u003d client.getLocalPlayer().getLocalLocation();\n            final Point playerPoint \u003d Perspective.localToCanvas(client, localLocation, client.getPlane(), height);\n            final int valueX \u003d playerPoint.getX() + config.overheadXCenterOffset();\n            final int valueY \u003d playerPoint.getY();\n            final Point tickPoint \u003d new Point(valueX,valueY);\n\n            if (config.tickCount() \u003d\u003d 1)\n            {\n                OverlayUtil.renderTextLocation(graphics, tickPoint, String.valueOf(plugin.currentColorIndex), numberColor);\n            }\n            else\n            {\n                OverlayUtil.renderTextLocation(graphics, tickPoint, String.valueOf(plugin.tickCounter), numberColor);\n            }\n\n            if (config.enableCycle2())\n            {\n                final int valueX2 \u003d valueX - config.overheadCyclesGapDistance();\n                final Point tick2Point \u003d new Point(valueX2,valueY);\n                OverlayUtil.renderTextLocation(graphics, tick2Point, String.valueOf(plugin.tickCounter2), config.cycle2Color());\n            }\n\n            if (config.enableCycle3())\n            {\n                final int valueX3 \u003d valueX + config.overheadCyclesGapDistance();\n                final Point tick3Point \u003d new Point(valueX3,valueY);\n                OverlayUtil.renderTextLocation(graphics, tick3Point, String.valueOf(plugin.tickCounter3), config.cycle3Color());\n            }\n\n        }\n        return null;\n    }\n\n}\n\n\n","filePath":"src\\main\\java\\com\\visualmetronome\\VisualMetronomeNumberOverlay.java"},{"fileName":"VisualMetronomePlugin.java","content":"package com.visualmetronome;\n\nimport com.google.inject.Provides;\nimport net.runelite.api.Point;\nimport net.runelite.api.Client;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport javax.inject.Inject;\nimport java.awt.event.KeyEvent;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport net.runelite.client.input.KeyListener;\nimport net.runelite.client.input.KeyManager;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport net.runelite.client.party.PartyService;\nimport net.runelite.client.party.WSClient;\nimport net.runelite.client.party.events.UserJoin;\nimport net.runelite.client.party.events.UserPart;\nimport com.visualmetronome.messages.TickSyncMessage;\nimport com.visualmetronome.messages.TickRequestMessage;\nimport net.runelite.client.party.PartyMember;\n\nimport java.util.Collections;\nimport java.util.List;\n\n\n@PluginDescriptor(\n        name \u003d \"Visual Metronome\",\n        description \u003d \"Shows a visual cue on an overlay every game tick to help timing based activities\",\n        tags \u003d {\"timers\", \"overlays\", \"tick\", \"skilling\"}\n)\npublic class VisualMetronomePlugin extends Plugin implements KeyListener\n{\n\n    @Inject\n    private OverlayManager overlayManager;\n\n    @Inject\n    private ConfigManager configManager;\n\n    @Inject\n    private VisualMetronomeTileOverlay tileOverlay;\n\n    @Inject\n    private VisualMetronomeNumberOverlay numberOverlay;\n\n    @Inject\n    private FullResizableVisualMetronomeOverlay overlay;\n\n    @Inject\n    private VisualMetronomeConfig config;\n\n    @Inject\n    private KeyManager keyManager;\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private MouseFollowingOverlay mouseFollowingOverlay;\n\n    @Inject\n    private PartyService partyService;\n\n    @Inject\n    private WSClient wsClient;\n\n    List\u003cPartyMember\u003e members \u003d Collections.emptyList();\n    private boolean hasRespondedThisTick \u003d false;\n\n    private static final String CONFIG_GROUP \u003d \"visualmetronome\";\n    protected int currentColorIndex \u003d 0;\n    protected int tickCounter \u003d 0;\n    protected int tickCounter2 \u003d 0;\n    protected int tickCounter3 \u003d 0;\n    protected Color currentColor \u003d Color.WHITE;\n    protected Dimension DEFAULT_SIZE \u003d new Dimension(25, 25);\n\n    @Provides\n    VisualMetronomeConfig provideConfig(ConfigManager configManager)\n    {\n        return configManager.getConfig(VisualMetronomeConfig.class);\n    }\n\n    @Subscribe\n    public void onGameTick(GameTick tick)\n    {\n        if (tickCounter % config.tickCount() \u003d\u003d 0)\n        {\n            tickCounter \u003d 0;\n            if (currentColorIndex \u003d\u003d config.colorCycle())\n            {\n                currentColorIndex \u003d 0;\n            }\n            setCurrentColorByColorIndex(++currentColorIndex);\n        }\n        tickCounter++;\n        if (tickCounter2 % config.tickCount2() \u003d\u003d 0){\n            tickCounter2 \u003d 0;\n        }\n        tickCounter2++;\n        if (tickCounter3 % config.tickCount3() \u003d\u003d 0){\n            tickCounter3 \u003d 0;\n        }\n        tickCounter3++;\n\n        //party sync\n        hasRespondedThisTick \u003d false;\n        if (config.enablePartySync())\n        {\n            if (!members.isEmpty())\n            {\n                String targetName \u003d config.syncTarget();\n                partyService.send(new TickRequestMessage(targetName));\n            }\n        }\n\n    }\n\n    @Subscribe\n    public void onTickRequestMessage(TickRequestMessage target)\n    {\n        String syncTarget \u003d target.getTarget();\n        PartyMember localPlayer \u003d partyService.getLocalMember();\n\n        if (!localPlayer.getDisplayName().equalsIgnoreCase(syncTarget))\n        {\n            return;\n        }\n\n        if (hasRespondedThisTick)\n        {\n            return;\n        }\n        hasRespondedThisTick \u003d true;\n\n        TickSyncMessage msg \u003d new TickSyncMessage(\n                tickCounter,\n                tickCounter2,\n                tickCounter3,\n                currentColorIndex,\n                config.colorCycle(),\n                config.tickCount(),\n                config.tickCount2(),\n                config.tickCount3(),\n                localPlayer.getDisplayName()\n        );\n        partyService.send(msg);\n    }\n\n    @Subscribe\n    public void onTickSyncMessage(TickSyncMessage msg)\n    {\n        if (!config.enablePartySync())\n        {\n            return;\n        }\n\n        String Sender \u003d msg.getlocalSender();\n        String targetName \u003d config.syncTarget();\n\n        if (!Sender.equalsIgnoreCase(targetName))\n        {\n            return;\n        }\n\n        //  Apply received counters\n        this.tickCounter \u003d msg.getTickCounter();\n        this.tickCounter2 \u003d msg.getTickCounter2();\n        this.tickCounter3 \u003d msg.getTickCounter3();\n\n        this.currentColorIndex \u003d msg.getColorIndex();\n        setCurrentColorByColorIndex(this.currentColorIndex);\n\n        //  Update config so UI reflects remote tickCount\n        configManager.setConfiguration(\n                CONFIG_GROUP,\n                \"tickCount\",\n                msg.getTickCount()\n        );\n        configManager.setConfiguration(\n                CONFIG_GROUP,\n                \"tickCount2\",\n                msg.getTickCount2()\n        );\n        configManager.setConfiguration(\n                CONFIG_GROUP,\n                \"tickCount3\",\n                msg.getTickCount3()\n        );\n        configManager.setConfiguration(\n                CONFIG_GROUP,\n                \"colorCycle\",\n                msg.getConfigColorIndex()\n        );\n    }\n\n    @Subscribe\n    public void onUserJoin(UserJoin event)\n    {\n        members \u003d partyService.getMembers();\n    }\n\n    @Subscribe\n    public void onUserPart(UserPart event)\n    {\n        members \u003d partyService.getMembers();\n    }\n\n\n    @Subscribe\n    public void onConfigChanged(ConfigChanged event)\n    {\n        if (currentColorIndex \u003e config.colorCycle())\n        {\n            currentColorIndex \u003d 0;\n        }\n\n        if (tickCounter \u003e config.tickCount())\n        {\n            tickCounter \u003d 0;\n        }\n        if (tickCounter2 \u003e config.tickCount2())\n        {\n            tickCounter2 \u003d 0;\n        }\n        if (tickCounter3 \u003e config.tickCount3())\n        {\n            tickCounter3 \u003d 0;\n        }\n\n        DEFAULT_SIZE \u003d new Dimension(config.boxWidth(), config.boxWidth());\n    }\n\n    @Override\n    protected void startUp() throws Exception\n    {\n        DEFAULT_SIZE \u003d new Dimension(config.boxWidth(), config.boxWidth());\n        overlay.setPreferredSize(DEFAULT_SIZE);\n        overlayManager.add(overlay);\n        overlayManager.add(tileOverlay);\n        overlayManager.add(numberOverlay);\n        overlayManager.add(mouseFollowingOverlay);\n        keyManager.registerKeyListener(this);\n        wsClient.registerMessage(TickSyncMessage.class);\n        wsClient.registerMessage(TickRequestMessage.class);\n\n    }\n\n    @Override\n    protected void shutDown() throws Exception\n    {\n        overlayManager.remove(overlay);\n        overlayManager.remove(tileOverlay);\n        overlayManager.remove(numberOverlay);\n        tickCounter \u003d 0;\n        tickCounter2 \u003d 0;\n        tickCounter3 \u003d 0;\n        currentColorIndex \u003d 0;\n        currentColor \u003d config.getTickColor();\n        overlayManager.remove(mouseFollowingOverlay);\n        keyManager.unregisterKeyListener(this);\n        wsClient.unregisterMessage(TickSyncMessage.class);\n        wsClient.unregisterMessage(TickRequestMessage.class);\n\n    }\n\n    //hotkey settings\n    @Override\n    public void keyTyped(KeyEvent e)\n    {\n    }\n\n    @Override\n    public void keyPressed(KeyEvent e)\n    {\n        if (config.tickResetHotkey().matches(e))\n        {\n            int resetValue \u003d 0;\n\n            // Reset Cycle 1\n            if (config.tickCount() \u003e 1)\n            {\n                // Prevent out of bounds by setting to 0 if reset start is above tick count\n                resetValue \u003d (config.tickResetStartTick() \u003e\u003d config.tickCount()) ? 0 : config.tickResetStartTick();\n                // If resetting to 0, set color index to 0 as well so that the color is set to the first color next\n                // onGameTick\n                currentColorIndex \u003d resetValue \u003d\u003d 0 ? 0 : 1;\n            }\n            else\n            {\n                resetValue \u003d (config.tickResetStartTick() \u003e\u003d config.colorCycle()) ? 0 : config.tickResetStartTick();\n                currentColorIndex \u003d resetValue;\n            }\n            tickCounter \u003d resetValue;\n            setCurrentColorByColorIndex(currentColorIndex);\n\n            tickCounter2 \u003d (config.tickResetStartTick() \u003e\u003d config.tickCount2()) ? 0 : config.tickResetStartTick();\n            tickCounter3 \u003d (config.tickResetStartTick() \u003e\u003d config.tickCount3()) ? 0 : config.tickResetStartTick();\n        }\n    }\n\n    @Override\n    public void keyReleased(KeyEvent e)\n    {\n    }\n\n    private void setCurrentColorByColorIndex(int currentColorIndex)\n    {\n        switch (currentColorIndex)\n        {\n            case 1:\n                currentColor \u003d config.getTickColor();\n                break;\n            case 2:\n                currentColor \u003d config.getTockColor();\n                break;\n            case 3:\n                currentColor \u003d config.getTick3Color();\n                break;\n            case 4:\n                currentColor \u003d config.getTick4Color();\n                break;\n            case 5:\n                currentColor \u003d config.getTick5Color();\n                break;\n            case 6:\n                currentColor \u003d config.getTick6Color();\n                break;\n            case 7:\n                currentColor \u003d config.getTick7Color();\n                break;\n            case 8:\n                currentColor \u003d config.getTick8Color();\n                break;\n            case 9:\n                currentColor \u003d config.getTick9Color();\n                break;\n            case 10:\n                currentColor \u003d config.getTick10Color();\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\visualmetronome\\VisualMetronomePlugin.java"},{"fileName":"VisualMetronomeTileOverlay.java","content":"package com.visualmetronome;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\nimport javax.inject.Inject;\nimport java.awt.BasicStroke;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Polygon;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPriority;\n\n\npublic class VisualMetronomeTileOverlay extends Overlay\n{\n\n    private final Client client;\n    private final VisualMetronomeConfig config;\n    private final VisualMetronomePlugin plugin;\n\n    @Inject\n    public VisualMetronomeTileOverlay(Client client, VisualMetronomeConfig config, VisualMetronomePlugin plugin)\n    {\n        super(plugin);\n        this.client \u003d client;\n        this.config \u003d config;\n        this.plugin \u003d plugin;\n        setPosition(OverlayPosition.DYNAMIC);\n        setLayer(OverlayLayer.ABOVE_SCENE);\n        setPriority(OverlayPriority.MED);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics)\n    {\n        if (config.highlightCurrentTile())\n        {\n            final WorldPoint playerPos \u003d client.getLocalPlayer().getWorldLocation();\n            if (playerPos \u003d\u003d null)\n            {\n                return null;\n            }\n\n            final LocalPoint playerPosLocal \u003d LocalPoint.fromWorld(client, playerPos);\n            if (playerPosLocal \u003d\u003d null)\n            {\n                return null;\n            }\n\n            if (config.changeFillColor())\n            {\n                final Color fillColor \u003d new Color(plugin.currentColor.getRed(), plugin.currentColor.getGreen(), plugin.currentColor.getBlue(), config.changeFillColorOpacity());\n                renderTile(graphics, playerPosLocal, plugin.currentColor, fillColor, config.currentTileBorderWidth());\n            }\n            else\n            {\n                renderTile(graphics, playerPosLocal, plugin.currentColor, config.currentTileFillColor(), config.currentTileBorderWidth());\n            }\n        }\n\n        return null;\n    }\n\n    private void renderTile(final Graphics2D graphics, final LocalPoint dest, final Color color, final Color fillColor, final double borderWidth)\n    {\n        if (dest \u003d\u003d null)\n        {\n            return;\n        }\n\n        final Polygon poly \u003d Perspective.getCanvasTilePoly(client, dest);\n\n        if (poly \u003d\u003d null)\n        {\n            return;\n        }\n\n        OverlayUtil.renderPolygon(graphics, poly, color, fillColor, new BasicStroke((float) borderWidth));\n    }\n}\n\n\n","filePath":"src\\main\\java\\com\\visualmetronome\\VisualMetronomeTileOverlay.java"},{"fileName":"VisualMetronomePluginTest.java","content":"package com.visualmetronome;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class VisualMetronomePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(VisualMetronomePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}\n","filePath":"src\\test\\java\\com\\visualmetronome\\VisualMetronomePluginTest.java"}]},{"commit":"9d1a72a8605633f89539c7d062fecfd806c22e51","repository":"https://github.com/JDrinkH2O/lennys-custom-clues.git","internalName":"lennys-custom-clues","files":[{"fileName":"AnimationTriggers.java","content":"package com.lennyscustomclues;\n\nimport net.runelite.api.AnimationID;\n\npublic class AnimationTriggers\n{\n\tpublic static boolean isTriggerAnimation(int animationId)\n\t{\n\t\t// Check for digging animation\n\t\tif (animationId \u003d\u003d AnimationID.DIG) // 830\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\t// Check for supported emote animations\n\t\treturn EmoteData.getEmoteName(animationId) !\u003d null \u0026\u0026 !EmoteData.getEmoteName(animationId).equals(\"Unknown Emote\");\n\t}\n\n\tpublic static boolean isDigAnimation(int animationId)\n\t{\n\t\treturn animationId \u003d\u003d AnimationID.DIG;\n\t}\n\n\tpublic static boolean isEmoteAnimation(int animationId)\n\t{\n\t\tString emoteName \u003d EmoteData.getEmoteName(animationId);\n\t\treturn emoteName !\u003d null \u0026\u0026 !emoteName.equals(\"Unknown Emote\");\n\t}\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\AnimationTriggers.java"},{"fileName":"AnswerBuilder.java","content":"package com.lennyscustomclues;\n\nimport com.lennyscustomclues.constraints.*;\nimport com.lennyscustomclues.ApiClient.GameStateSubmission;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class AnswerBuilder\n{\n\tprivate String rewardText;\n\tprivate List\u003cConstraint\u003e constraints;\n\n\tpublic AnswerBuilder()\n\t{\n\t\tthis.constraints \u003d new ArrayList\u003c\u003e();\n\t\tthis.rewardText \u003d \"\";\n\t}\n\n\tpublic void addConstraint(Constraint constraint)\n\t{\n\t\tconstraints.add(constraint);\n\t}\n\n\tpublic void removeConstraint(int index)\n\t{\n\t\tif (index \u003e\u003d 0 \u0026\u0026 index \u003c constraints.size())\n\t\t{\n\t\t\tconstraints.remove(index);\n\t\t}\n\t}\n\n\tpublic String toJson()\n\t{\n\t\t// TODO: Convert answer structure to JSON for export/API submission\n\t\treturn \"{}\";\n\t}\n\n\tpublic void clear()\n\t{\n\t\tconstraints.clear();\n\t\trewardText \u003d \"\";\n\t}\n\n\t// Getters and setters\n\tpublic String getRewardText() { return rewardText; }\n\tpublic void setRewardText(String rewardText) { this.rewardText \u003d rewardText; }\n\tpublic List\u003cConstraint\u003e getConstraints() { return constraints; }\n\tpublic void setConstraints(List\u003cConstraint\u003e constraints) { this.constraints \u003d constraints; }\n\n\tpublic int getConstraintCount()\n\t{\n\t\treturn constraints.size();\n\t}\n\n\tpublic Constraint getConstraint(int index)\n\t{\n\t\tif (index \u003e\u003d 0 \u0026\u0026 index \u003c constraints.size())\n\t\t{\n\t\t\treturn constraints.get(index);\n\t\t}\n\t\treturn null;\n\t}\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\AnswerBuilder.java"},{"fileName":"ApiClient.java","content":"package com.lennyscustomclues;\n\nimport com.google.gson.Gson;\nimport com.google.gson.JsonSyntaxException;\nimport lombok.extern.slf4j.Slf4j;\nimport okhttp3.Call;\nimport okhttp3.Callback;\nimport okhttp3.MediaType;\nimport okhttp3.OkHttpClient;\nimport okhttp3.Request;\nimport okhttp3.RequestBody;\nimport okhttp3.Response;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.io.IOException;\nimport java.net.URLEncoder;\nimport java.nio.charset.StandardCharsets;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.concurrent.CompletableFuture;\n\n@Slf4j\n@Singleton\npublic class ApiClient\n{\n\tprivate static final String API_BASE_URL \u003d \"https://us-central1-spatial-cargo-409717.cloudfunctions.net/lennys-labyrinth-api\";\n\tprivate static final String SUBMIT_GUESS_ENDPOINT \u003d \"/submit-guess\";\n\tprivate static final String VALIDATE_KEY_ENDPOINT \u003d \"/validate-key\";\n\tprivate static final String CREATE_ANSWER_ENDPOINT \u003d \"/create-answer\";\n\tprivate static final String ANSWER_ENDPOINT \u003d \"/answer\";\n\tprivate static final MediaType JSON \u003d MediaType.get(\"application/json; charset\u003dutf-8\");\n\n\tprivate final OkHttpClient httpClient;\n\tprivate final Gson gson;\n\n\t@Inject\n\tpublic ApiClient(OkHttpClient okHttpClient, Gson gson)\n\t{\n\t\tthis.httpClient \u003d okHttpClient;\n\t\tthis.gson \u003d gson;\n\t}\n\n\tpublic CompletableFuture\u003cApiResponse\u003e submitGuess(GameStateSubmission gameState)\n\t{\n\t\tCompletableFuture\u003cApiResponse\u003e future \u003d new CompletableFuture\u003c\u003e();\n\n\t\ttry\n\t\t{\n\t\t\tString json \u003d gson.toJson(gameState);\n\t\t\tlog.debug(\"Submitting game state JSON: {}\", json);\n\n\t\t\tRequestBody body \u003d RequestBody.create(JSON, json);\n\t\t\tRequest request \u003d new Request.Builder()\n\t\t\t\t.url(API_BASE_URL + SUBMIT_GUESS_ENDPOINT)\n\t\t\t\t.post(body)\n\t\t\t\t.build();\n\n\t\t\thttpClient.newCall(request).enqueue(new Callback()\n\t\t\t{\n\t\t\t\t@Override\n\t\t\t\tpublic void onFailure(Call call, IOException e)\n\t\t\t\t{\n\t\t\t\t\tlog.error(\"API request failed\", e);\n\t\t\t\t\tfuture.complete(ApiResponse.error(\"Network error: \" + e.getMessage()));\n\t\t\t\t}\n\n\t\t\t\t@Override\n\t\t\t\tpublic void onResponse(Call call, Response response)\n\t\t\t\t{\n\t\t\t\t\ttry (response)\n\t\t\t\t\t{\n\t\t\t\t\t\tString responseBody \u003d response.body() !\u003d null ? response.body().string() : \"\";\n\t\t\t\t\t\tlog.debug(\"API response code: {}, body: {}\", response.code(), responseBody);\n\n\t\t\t\t\t\tif (response.isSuccessful())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttry\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tApiResponse apiResponse \u003d gson.fromJson(responseBody, ApiResponse.class);\n\t\t\t\t\t\t\t\tfuture.complete(apiResponse);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcatch (JsonSyntaxException e)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlog.error(\"Failed to parse API response JSON\", e);\n\t\t\t\t\t\t\t\tfuture.complete(ApiResponse.error(\"Invalid response format\"));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tString errorMessage \u003d String.format(\"Server error %d: %s\", response.code(), responseBody);\n\t\t\t\t\t\t\tfuture.complete(ApiResponse.error(errorMessage));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (IOException e)\n\t\t\t\t\t{\n\t\t\t\t\t\tlog.error(\"Failed to read response body\", e);\n\t\t\t\t\t\tfuture.complete(ApiResponse.error(\"Failed to read server response\"));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\tlog.error(\"Failed to create API request\", e);\n\t\t\tfuture.complete(ApiResponse.error(\"Request creation failed: \" + e.getMessage()));\n\t\t}\n\n\t\treturn future;\n\t}\n\n\tpublic CompletableFuture\u003cApiResponse\u003e validateEventKey(String eventKey)\n\t{\n\t\tCompletableFuture\u003cApiResponse\u003e future \u003d new CompletableFuture\u003c\u003e();\n\n\t\ttry\n\t\t{\n\t\t\tlog.debug(\"Validating event key: {}\", eventKey);\n\n\t\t\tString encodedEventKey \u003d URLEncoder.encode(eventKey, StandardCharsets.UTF_8);\n\t\t\tRequest request \u003d new Request.Builder()\n\t\t\t\t.url(API_BASE_URL + VALIDATE_KEY_ENDPOINT + \"/\" + encodedEventKey)\n\t\t\t\t.get()\n\t\t\t\t.build();\n\n\t\t\thttpClient.newCall(request).enqueue(new Callback()\n\t\t\t{\n\t\t\t\t@Override\n\t\t\t\tpublic void onFailure(Call call, IOException e)\n\t\t\t\t{\n\t\t\t\t\tlog.error(\"Event key validation request failed\", e);\n\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"NETWORK_ERROR\", \"Network error: \" + e.getMessage()));\n\t\t\t\t}\n\n\t\t\t\t@Override\n\t\t\t\tpublic void onResponse(Call call, Response response)\n\t\t\t\t{\n\t\t\t\t\ttry (response)\n\t\t\t\t\t{\n\t\t\t\t\t\tString responseBody \u003d response.body() !\u003d null ? response.body().string() : \"\";\n\t\t\t\t\t\tlog.debug(\"Event key validation response code: {}, body: {}\", response.code(), responseBody);\n\n\t\t\t\t\t\tif (response.isSuccessful())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttry\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tApiResponse apiResponse \u003d gson.fromJson(responseBody, ApiResponse.class);\n\t\t\t\t\t\t\t\tfuture.complete(apiResponse);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcatch (JsonSyntaxException e)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlog.error(\"Failed to parse event key validation response JSON\", e);\n\t\t\t\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"PARSE_ERROR\", \"Invalid response format\"));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (response.code() \u003d\u003d 404)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// 404 means event key not found - this is expected for invalid keys\n\t\t\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"KEY_NOT_FOUND\", \"Event key not found\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// Any other HTTP error (500, 503, etc.)\n\t\t\t\t\t\t\tlog.error(\"Server error response: {} - {}\", response.code(), responseBody);\n\t\t\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"SERVER_ERROR\", \"Server error: \" + response.code()));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (IOException e)\n\t\t\t\t\t{\n\t\t\t\t\t\tlog.error(\"Failed to read event key validation response body\", e);\n\t\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"IO_ERROR\", \"Failed to read server response\"));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\tlog.error(\"Failed to create event key validation request\", e);\n\t\t\tfuture.complete(ApiResponse.errorWithType(\"REQUEST_ERROR\", \"Request creation failed: \" + e.getMessage()));\n\t\t}\n\n\t\treturn future;\n\t}\n\n\tpublic CompletableFuture\u003cApiResponse\u003e createAnswer(String eventKey, String secretKey, AnswerBuilder answerBuilder)\n\t{\n\t\tCompletableFuture\u003cApiResponse\u003e future \u003d new CompletableFuture\u003c\u003e();\n\n\t\ttry\n\t\t{\n\t\t\t// Build the answer request\n\t\t\tCreateAnswerRequest request \u003d new CreateAnswerRequest();\n\t\t\trequest.event_key \u003d eventKey;\n\t\t\trequest.answer \u003d new AnswerData();\n\t\t\trequest.answer.reward_text \u003d answerBuilder.getRewardText();\n\t\t\trequest.answer.secret_key \u003d secretKey.isEmpty() ? null : secretKey;\n\n\t\t\t// Convert constraints to JSON\n\t\t\trequest.answer.constraints \u003d new java.util.ArrayList\u003c\u003e();\n\t\t\tfor (int i \u003d 0; i \u003c answerBuilder.getConstraintCount(); i++)\n\t\t\t{\n\t\t\t\tcom.lennyscustomclues.constraints.Constraint constraint \u003d answerBuilder.getConstraint(i);\n\t\t\t\t// Serialize each constraint as a map\n\t\t\t\tif (constraint instanceof com.lennyscustomclues.constraints.LocationConstraint)\n\t\t\t\t{\n\t\t\t\t\tcom.lennyscustomclues.constraints.LocationConstraint locConstraint \u003d (com.lennyscustomclues.constraints.LocationConstraint) constraint;\n\t\t\t\t\tjava.util.Map\u003cString, Object\u003e constraintMap \u003d new java.util.HashMap\u003c\u003e();\n\t\t\t\t\tconstraintMap.put(\"constraint_type\", locConstraint.getConstraintType());\n\t\t\t\t\tconstraintMap.put(\"type\", locConstraint.getType());\n\n\t\t\t\t\tif (locConstraint.getExactX() !\u003d null) constraintMap.put(\"exact_x\", locConstraint.getExactX());\n\t\t\t\t\tif (locConstraint.getExactY() !\u003d null) constraintMap.put(\"exact_y\", locConstraint.getExactY());\n\t\t\t\t\tif (locConstraint.getMinX() !\u003d null) constraintMap.put(\"min_x\", locConstraint.getMinX());\n\t\t\t\t\tif (locConstraint.getMaxX() !\u003d null) constraintMap.put(\"max_x\", locConstraint.getMaxX());\n\t\t\t\t\tif (locConstraint.getMinY() !\u003d null) constraintMap.put(\"min_y\", locConstraint.getMinY());\n\t\t\t\t\tif (locConstraint.getMaxY() !\u003d null) constraintMap.put(\"max_y\", locConstraint.getMaxY());\n\t\t\t\t\tif (locConstraint.getPlane() !\u003d null) constraintMap.put(\"plane\", locConstraint.getPlane());\n\t\t\t\t\tif (locConstraint.getTolerance() !\u003d null) constraintMap.put(\"tolerance\", locConstraint.getTolerance());\n\n\t\t\t\t\trequest.answer.constraints.add(constraintMap);\n\t\t\t\t}\n\t\t\t\telse if (constraint instanceof com.lennyscustomclues.constraints.ActionConstraint)\n\t\t\t\t{\n\t\t\t\t\tcom.lennyscustomclues.constraints.ActionConstraint actionConstraint \u003d (com.lennyscustomclues.constraints.ActionConstraint) constraint;\n\t\t\t\t\tjava.util.Map\u003cString, Object\u003e constraintMap \u003d new java.util.HashMap\u003c\u003e();\n\t\t\t\t\tconstraintMap.put(\"constraint_type\", actionConstraint.getConstraintType());\n\t\t\t\t\tconstraintMap.put(\"type\", actionConstraint.getType());\n\n\t\t\t\t\tif (actionConstraint.getEmoteId() !\u003d null) constraintMap.put(\"emote_id\", actionConstraint.getEmoteId());\n\t\t\t\t\tif (actionConstraint.getEmoteIds() !\u003d null) constraintMap.put(\"emote_ids\", actionConstraint.getEmoteIds());\n\t\t\t\t\tif (actionConstraint.getNpcId() !\u003d null) constraintMap.put(\"npc_id\", actionConstraint.getNpcId());\n\t\t\t\t\tif (actionConstraint.getNpcIds() !\u003d null) constraintMap.put(\"npc_ids\", actionConstraint.getNpcIds());\n\t\t\t\t\tif (actionConstraint.getInteractionType() !\u003d null) constraintMap.put(\"interaction_type\", actionConstraint.getInteractionType());\n\t\t\t\t\tif (actionConstraint.getInteractionTypes() !\u003d null) constraintMap.put(\"interaction_types\", actionConstraint.getInteractionTypes());\n\n\t\t\t\t\trequest.answer.constraints.add(constraintMap);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tString json \u003d gson.toJson(request);\n\t\t\tlog.debug(\"Creating answer JSON: {}\", json);\n\n\t\t\tRequestBody body \u003d RequestBody.create(JSON, json);\n\t\t\tRequest httpRequest \u003d new Request.Builder()\n\t\t\t\t.url(API_BASE_URL + CREATE_ANSWER_ENDPOINT)\n\t\t\t\t.post(body)\n\t\t\t\t.build();\n\n\t\t\thttpClient.newCall(httpRequest).enqueue(new Callback()\n\t\t\t{\n\t\t\t\t@Override\n\t\t\t\tpublic void onFailure(Call call, IOException e)\n\t\t\t\t{\n\t\t\t\t\tlog.error(\"Create answer request failed\", e);\n\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"NETWORK_ERROR\", \"Network error: \" + e.getMessage()));\n\t\t\t\t}\n\n\t\t\t\t@Override\n\t\t\t\tpublic void onResponse(Call call, Response response)\n\t\t\t\t{\n\t\t\t\t\ttry (response)\n\t\t\t\t\t{\n\t\t\t\t\t\tString responseBody \u003d response.body() !\u003d null ? response.body().string() : \"\";\n\t\t\t\t\t\tlog.debug(\"Create answer response code: {}, body: {}\", response.code(), responseBody);\n\n\t\t\t\t\t\tif (response.code() \u003d\u003d 201)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// 201 Created - success\n\t\t\t\t\t\t\ttry\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tApiResponse apiResponse \u003d gson.fromJson(responseBody, ApiResponse.class);\n\t\t\t\t\t\t\t\tfuture.complete(apiResponse);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcatch (JsonSyntaxException e)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlog.error(\"Failed to parse create answer response JSON\", e);\n\t\t\t\t\t\t\t\tfuture.complete(ApiResponse.success(\"Answer created successfully\"));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (response.code() \u003d\u003d 409)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// 409 Conflict - key already exists\n\t\t\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"KEY_ALREADY_EXISTS\", \"Event key already exists\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (response.code() \u003d\u003d 400)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// 400 Bad Request - validation error\n\t\t\t\t\t\t\ttry\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tApiResponse apiResponse \u003d gson.fromJson(responseBody, ApiResponse.class);\n\t\t\t\t\t\t\t\tfuture.complete(apiResponse);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcatch (JsonSyntaxException e)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"VALIDATION_ERROR\", \"Invalid request: \" + responseBody));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// Any other HTTP error (500, 503, etc.)\n\t\t\t\t\t\t\tlog.error(\"Server error response: {} - {}\", response.code(), responseBody);\n\t\t\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"SERVER_ERROR\", \"Server error: \" + response.code()));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (IOException e)\n\t\t\t\t\t{\n\t\t\t\t\t\tlog.error(\"Failed to read create answer response body\", e);\n\t\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"IO_ERROR\", \"Failed to read server response\"));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\tlog.error(\"Failed to create answer request\", e);\n\t\t\tfuture.complete(ApiResponse.errorWithType(\"REQUEST_ERROR\", \"Request creation failed: \" + e.getMessage()));\n\t\t}\n\n\t\treturn future;\n\t}\n\n\tpublic CompletableFuture\u003cGetAnswerResponse\u003e getAnswer(String eventKey, String secretKey)\n\t{\n\t\tCompletableFuture\u003cGetAnswerResponse\u003e future \u003d new CompletableFuture\u003c\u003e();\n\n\t\ttry\n\t\t{\n\t\t\tlog.debug(\"Getting answer for event key: {}\", eventKey);\n\n\t\t\tString encodedEventKey \u003d URLEncoder.encode(eventKey, StandardCharsets.UTF_8);\n\t\t\tString encodedSecretKey \u003d URLEncoder.encode(secretKey, StandardCharsets.UTF_8);\n\n\t\t\tRequest request \u003d new Request.Builder()\n\t\t\t\t.url(API_BASE_URL + ANSWER_ENDPOINT + \"/\" + encodedEventKey + \"?secret_key\u003d\" + encodedSecretKey)\n\t\t\t\t.get()\n\t\t\t\t.build();\n\n\t\t\thttpClient.newCall(request).enqueue(new Callback()\n\t\t\t{\n\t\t\t\t@Override\n\t\t\t\tpublic void onFailure(Call call, IOException e)\n\t\t\t\t{\n\t\t\t\t\tlog.error(\"Get answer request failed\", e);\n\t\t\t\t\tfuture.complete(GetAnswerResponse.error(\"NETWORK_ERROR\", \"Network error: \" + e.getMessage()));\n\t\t\t\t}\n\n\t\t\t\t@Override\n\t\t\t\tpublic void onResponse(Call call, Response response)\n\t\t\t\t{\n\t\t\t\t\ttry (response)\n\t\t\t\t\t{\n\t\t\t\t\t\tString responseBody \u003d response.body() !\u003d null ? response.body().string() : \"\";\n\t\t\t\t\t\tlog.debug(\"Get answer response code: {}, body: {}\", response.code(), responseBody);\n\n\t\t\t\t\t\tif (response.isSuccessful())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttry\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tGetAnswerResponse apiResponse \u003d gson.fromJson(responseBody, GetAnswerResponse.class);\n\t\t\t\t\t\t\t\tfuture.complete(apiResponse);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcatch (JsonSyntaxException e)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlog.error(\"Failed to parse get answer response JSON\", e);\n\t\t\t\t\t\t\t\tfuture.complete(GetAnswerResponse.error(\"PARSE_ERROR\", \"Invalid response format\"));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (response.code() \u003d\u003d 404)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfuture.complete(GetAnswerResponse.error(\"NOT_FOUND\", \"Event key not found\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (response.code() \u003d\u003d 401)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfuture.complete(GetAnswerResponse.error(\"UNAUTHORIZED\", \"Invalid secret key\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (response.code() \u003d\u003d 400)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfuture.complete(GetAnswerResponse.error(\"BAD_REQUEST\", \"Bad request\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlog.error(\"Server error response: {} - {}\", response.code(), responseBody);\n\t\t\t\t\t\t\tfuture.complete(GetAnswerResponse.error(\"SERVER_ERROR\", \"Server error: \" + response.code()));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (IOException e)\n\t\t\t\t\t{\n\t\t\t\t\t\tlog.error(\"Failed to read get answer response body\", e);\n\t\t\t\t\t\tfuture.complete(GetAnswerResponse.error(\"IO_ERROR\", \"Failed to read server response\"));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\tlog.error(\"Failed to create get answer request\", e);\n\t\t\tfuture.complete(GetAnswerResponse.error(\"REQUEST_ERROR\", \"Request creation failed: \" + e.getMessage()));\n\t\t}\n\n\t\treturn future;\n\t}\n\n\tpublic CompletableFuture\u003cApiResponse\u003e updateAnswer(String eventKey, String secretKey, AnswerBuilder answerBuilder)\n\t{\n\t\tCompletableFuture\u003cApiResponse\u003e future \u003d new CompletableFuture\u003c\u003e();\n\n\t\ttry\n\t\t{\n\t\t\t// Build the answer data\n\t\t\tAnswerData answerData \u003d new AnswerData();\n\t\t\tanswerData.reward_text \u003d answerBuilder.getRewardText();\n\n\t\t\t// Convert constraints to JSON\n\t\t\tanswerData.constraints \u003d new java.util.ArrayList\u003c\u003e();\n\t\t\tfor (int i \u003d 0; i \u003c answerBuilder.getConstraintCount(); i++)\n\t\t\t{\n\t\t\t\tcom.lennyscustomclues.constraints.Constraint constraint \u003d answerBuilder.getConstraint(i);\n\t\t\t\t// Serialize each constraint as a map\n\t\t\t\tif (constraint instanceof com.lennyscustomclues.constraints.LocationConstraint)\n\t\t\t\t{\n\t\t\t\t\tcom.lennyscustomclues.constraints.LocationConstraint locConstraint \u003d (com.lennyscustomclues.constraints.LocationConstraint) constraint;\n\t\t\t\t\tjava.util.Map\u003cString, Object\u003e constraintMap \u003d new java.util.HashMap\u003c\u003e();\n\t\t\t\t\tconstraintMap.put(\"constraint_type\", locConstraint.getConstraintType());\n\t\t\t\t\tconstraintMap.put(\"type\", locConstraint.getType());\n\n\t\t\t\t\tif (locConstraint.getExactX() !\u003d null) constraintMap.put(\"exact_x\", locConstraint.getExactX());\n\t\t\t\t\tif (locConstraint.getExactY() !\u003d null) constraintMap.put(\"exact_y\", locConstraint.getExactY());\n\t\t\t\t\tif (locConstraint.getMinX() !\u003d null) constraintMap.put(\"min_x\", locConstraint.getMinX());\n\t\t\t\t\tif (locConstraint.getMaxX() !\u003d null) constraintMap.put(\"max_x\", locConstraint.getMaxX());\n\t\t\t\t\tif (locConstraint.getMinY() !\u003d null) constraintMap.put(\"min_y\", locConstraint.getMinY());\n\t\t\t\t\tif (locConstraint.getMaxY() !\u003d null) constraintMap.put(\"max_y\", locConstraint.getMaxY());\n\t\t\t\t\tif (locConstraint.getPlane() !\u003d null) constraintMap.put(\"plane\", locConstraint.getPlane());\n\t\t\t\t\tif (locConstraint.getTolerance() !\u003d null) constraintMap.put(\"tolerance\", locConstraint.getTolerance());\n\n\t\t\t\t\tanswerData.constraints.add(constraintMap);\n\t\t\t\t}\n\t\t\t\telse if (constraint instanceof com.lennyscustomclues.constraints.ActionConstraint)\n\t\t\t\t{\n\t\t\t\t\tcom.lennyscustomclues.constraints.ActionConstraint actionConstraint \u003d (com.lennyscustomclues.constraints.ActionConstraint) constraint;\n\t\t\t\t\tjava.util.Map\u003cString, Object\u003e constraintMap \u003d new java.util.HashMap\u003c\u003e();\n\t\t\t\t\tconstraintMap.put(\"constraint_type\", actionConstraint.getConstraintType());\n\t\t\t\t\tconstraintMap.put(\"type\", actionConstraint.getType());\n\n\t\t\t\t\tif (actionConstraint.getEmoteId() !\u003d null) constraintMap.put(\"emote_id\", actionConstraint.getEmoteId());\n\t\t\t\t\tif (actionConstraint.getEmoteIds() !\u003d null) constraintMap.put(\"emote_ids\", actionConstraint.getEmoteIds());\n\t\t\t\t\tif (actionConstraint.getNpcId() !\u003d null) constraintMap.put(\"npc_id\", actionConstraint.getNpcId());\n\t\t\t\t\tif (actionConstraint.getNpcIds() !\u003d null) constraintMap.put(\"npc_ids\", actionConstraint.getNpcIds());\n\t\t\t\t\tif (actionConstraint.getInteractionType() !\u003d null) constraintMap.put(\"interaction_type\", actionConstraint.getInteractionType());\n\t\t\t\t\tif (actionConstraint.getInteractionTypes() !\u003d null) constraintMap.put(\"interaction_types\", actionConstraint.getInteractionTypes());\n\n\t\t\t\t\tanswerData.constraints.add(constraintMap);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tString json \u003d gson.toJson(answerData);\n\t\t\tlog.debug(\"Updating answer JSON: {}\", json);\n\n\t\t\tString encodedEventKey \u003d URLEncoder.encode(eventKey, StandardCharsets.UTF_8);\n\t\t\tString encodedSecretKey \u003d URLEncoder.encode(secretKey, StandardCharsets.UTF_8);\n\n\t\t\tRequestBody body \u003d RequestBody.create(JSON, json);\n\t\t\tRequest httpRequest \u003d new Request.Builder()\n\t\t\t\t.url(API_BASE_URL + ANSWER_ENDPOINT + \"/\" + encodedEventKey + \"?secret_key\u003d\" + encodedSecretKey)\n\t\t\t\t.patch(body)\n\t\t\t\t.build();\n\n\t\t\thttpClient.newCall(httpRequest).enqueue(new Callback()\n\t\t\t{\n\t\t\t\t@Override\n\t\t\t\tpublic void onFailure(Call call, IOException e)\n\t\t\t\t{\n\t\t\t\t\tlog.error(\"Update answer request failed\", e);\n\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"NETWORK_ERROR\", \"Network error: \" + e.getMessage()));\n\t\t\t\t}\n\n\t\t\t\t@Override\n\t\t\t\tpublic void onResponse(Call call, Response response)\n\t\t\t\t{\n\t\t\t\t\ttry (response)\n\t\t\t\t\t{\n\t\t\t\t\t\tString responseBody \u003d response.body() !\u003d null ? response.body().string() : \"\";\n\t\t\t\t\t\tlog.debug(\"Update answer response code: {}, body: {}\", response.code(), responseBody);\n\n\t\t\t\t\t\tif (response.isSuccessful())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttry\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tApiResponse apiResponse \u003d gson.fromJson(responseBody, ApiResponse.class);\n\t\t\t\t\t\t\t\tfuture.complete(apiResponse);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcatch (JsonSyntaxException e)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlog.error(\"Failed to parse update answer response JSON\", e);\n\t\t\t\t\t\t\t\tfuture.complete(ApiResponse.success(\"Answer updated successfully\"));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (response.code() \u003d\u003d 404)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"NOT_FOUND\", \"Event key not found\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (response.code() \u003d\u003d 401)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"UNAUTHORIZED\", \"Invalid secret key\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (response.code() \u003d\u003d 400)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttry\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tApiResponse apiResponse \u003d gson.fromJson(responseBody, ApiResponse.class);\n\t\t\t\t\t\t\t\tfuture.complete(apiResponse);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcatch (JsonSyntaxException e)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"VALIDATION_ERROR\", \"Invalid request: \" + responseBody));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlog.error(\"Server error response: {} - {}\", response.code(), responseBody);\n\t\t\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"SERVER_ERROR\", \"Server error: \" + response.code()));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (IOException e)\n\t\t\t\t\t{\n\t\t\t\t\t\tlog.error(\"Failed to read update answer response body\", e);\n\t\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"IO_ERROR\", \"Failed to read server response\"));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\tlog.error(\"Failed to create update answer request\", e);\n\t\t\tfuture.complete(ApiResponse.errorWithType(\"REQUEST_ERROR\", \"Request creation failed: \" + e.getMessage()));\n\t\t}\n\n\t\treturn future;\n\t}\n\n\t// Inner classes for data structures matching the server API\n\tpublic static class GameStateSubmission\n\t{\n\t\tpublic LocationData location;\n\t\tpublic List\u003cItemData\u003e inventory;\n\t\tpublic List\u003cItemData\u003e worn_items;\n\t\tpublic Integer emote_id;\n\t\tpublic Integer npc_id;\n\t\tpublic String interaction_type;\n\t\tpublic String event_key;\n\t\tpublic String rsn;\n\n\t\tpublic GameStateSubmission(LocationData location, List\u003cItemData\u003e inventory, \n\t\t\tList\u003cItemData\u003e wornItems, Integer emoteId, Integer npcId, \n\t\t\tString interactionType, String eventKey, String rsn)\n\t\t{\n\t\t\tthis.location \u003d location;\n\t\t\tthis.inventory \u003d inventory;\n\t\t\tthis.worn_items \u003d wornItems;\n\t\t\tthis.emote_id \u003d emoteId;\n\t\t\tthis.npc_id \u003d npcId;\n\t\t\tthis.interaction_type \u003d interactionType;\n\t\t\tthis.event_key \u003d eventKey;\n\t\t\tthis.rsn \u003d rsn;\n\t\t}\n\t}\n\n\tpublic static class LocationData\n\t{\n\t\tpublic WorldCoords world;\n\t\tpublic LocalCoords local;\n\n\t\tpublic LocationData(WorldCoords world, LocalCoords local)\n\t\t{\n\t\t\tthis.world \u003d world;\n\t\t\tthis.local \u003d local;\n\t\t}\n\t}\n\n\tpublic static class WorldCoords\n\t{\n\t\tpublic int x;\n\t\tpublic int y;\n\t\tpublic int plane;\n\n\t\tpublic WorldCoords(int x, int y, int plane)\n\t\t{\n\t\t\tthis.x \u003d x;\n\t\t\tthis.y \u003d y;\n\t\t\tthis.plane \u003d plane;\n\t\t}\n\t}\n\n\tpublic static class LocalCoords\n\t{\n\t\tpublic int sceneX;\n\t\tpublic int sceneY;\n\n\t\tpublic LocalCoords(int sceneX, int sceneY)\n\t\t{\n\t\t\tthis.sceneX \u003d sceneX;\n\t\t\tthis.sceneY \u003d sceneY;\n\t\t}\n\t}\n\n\tpublic static class ItemData\n\t{\n\t\tpublic int slot;\n\t\tpublic int id;\n\t\tpublic int quantity;\n\n\t\tpublic ItemData(int slot, int id, int quantity)\n\t\t{\n\t\t\tthis.slot \u003d slot;\n\t\t\tthis.id \u003d id;\n\t\t\tthis.quantity \u003d quantity;\n\t\t}\n\t}\n\n\tpublic static class ApiResponse\n\t{\n\t\tpublic boolean success;\n\t\tpublic String message;\n\t\tpublic String errorType; // For client-side error handling\n\n\t\tpublic ApiResponse(boolean success, String message)\n\t\t{\n\t\t\tthis.success \u003d success;\n\t\t\tthis.message \u003d message;\n\t\t\tthis.errorType \u003d null;\n\t\t}\n\n\t\tprivate ApiResponse(boolean success, String message, String errorType)\n\t\t{\n\t\t\tthis.success \u003d success;\n\t\t\tthis.message \u003d message;\n\t\t\tthis.errorType \u003d errorType;\n\t\t}\n\n\t\tpublic static ApiResponse success(String message)\n\t\t{\n\t\t\treturn new ApiResponse(true, message);\n\t\t}\n\n\t\tpublic static ApiResponse error(String message)\n\t\t{\n\t\t\treturn new ApiResponse(false, message);\n\t\t}\n\n\t\tpublic static ApiResponse errorWithType(String errorType, String message)\n\t\t{\n\t\t\treturn new ApiResponse(false, message, errorType);\n\t\t}\n\t}\n\n\tpublic static class CreateAnswerRequest\n\t{\n\t\tpublic String event_key;\n\t\tpublic AnswerData answer;\n\t}\n\n\tpublic static class AnswerData\n\t{\n\t\tpublic String reward_text;\n\t\tpublic List\u003cjava.util.Map\u003cString, Object\u003e\u003e constraints;\n\t\tpublic String secret_key;\n\t}\n\n\tpublic static class GetAnswerResponse\n\t{\n\t\tpublic String reward_text;\n\t\tpublic List\u003cjava.util.Map\u003cString, Object\u003e\u003e constraints;\n\t\tpublic List\u003cPlayerCompletion\u003e completed_by;\n\t\tpublic String errorType;\n\t\tpublic String errorMessage;\n\n\t\tpublic boolean isSuccess()\n\t\t{\n\t\t\treturn errorType \u003d\u003d null;\n\t\t}\n\n\t\tpublic static GetAnswerResponse error(String errorType, String errorMessage)\n\t\t{\n\t\t\tGetAnswerResponse response \u003d new GetAnswerResponse();\n\t\t\tresponse.errorType \u003d errorType;\n\t\t\tresponse.errorMessage \u003d errorMessage;\n\t\t\treturn response;\n\t\t}\n\t}\n\n\tpublic static class PlayerCompletion\n\t{\n\t\tpublic String rsn;\n\t\tpublic String timestamp;\n\t}\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\ApiClient.java"},{"fileName":"CelebrationManager.java","content":"package com.lennyscustomclues;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.SoundEffectID;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.callback.ClientThread;\nimport lombok.extern.slf4j.Slf4j;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.concurrent.TimeUnit;\n\n@Slf4j\n@Singleton\npublic class CelebrationManager\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate LennysCustomCluesConfig config;\n\n\t@Inject\n\tprivate ScheduledExecutorService scheduledExecutorService;\n\n\tpublic void triggerVictoryCelebration(String puzzleName)\n\t{\n\t\tclientThread.invokeLater(() -\u003e {\n\t\t\tlog.info(\"Triggering victory celebration for puzzle: {}\", puzzleName);\n\n\t\t\tif (config.showCelebrationSound())\n\t\t\t{\n\t\t\t\tplayVictorySound();\n\t\t\t}\n\n\t\t\tif (config.showCelebrationFireworks())\n\t\t\t{\n\t\t\t\ttriggerFireworks();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate void playVictorySound()\n\t{\n\t\ttry\n\t\t{\n\t\t\t// Play a celebratory sound - using the triumphant fanfare sound (ID 2930)\n\t\t\tclient.playSoundEffect(2930);\n\t\t\tlog.debug(\"Played victory sound effect\");\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\tlog.warn(\"Failed to play victory sound\", e);\n\t\t}\n\t}\n\n\tprivate void triggerFireworks()\n\t{\n\t\ttry\n\t\t{\n\t\t\tif (client.getLocalPlayer() !\u003d null)\n\t\t\t{\n\t\t\t\t// Create the vanilla OSRS level-up fireworks animation on the player\n\t\t\t\t// SpotAnim ID 199 is the standard fireworks that appear when leveling up\n\t\t\t\t// Height set to 100 to display above the player\u0027s head\n\t\t\t\tclient.getLocalPlayer().createSpotAnim(0, 199, 100, 0);\n\n\t\t\t\t// Also play the level-up sound effects for authenticity\n\t\t\t\tclient.playSoundEffect(2396); // Level up sound 1\n\n\t\t\t\t// Schedule the second sound effect with a delay using ScheduledExecutorService\n\t\t\t\t// to avoid blocking the client thread\n\t\t\t\tscheduledExecutorService.schedule(() -\u003e {\n\t\t\t\t\tclientThread.invokeLater(() -\u003e {\n\t\t\t\t\t\tclient.playSoundEffect(2384); // Level up sound 2\n\t\t\t\t\t});\n\t\t\t\t}, 583, TimeUnit.MILLISECONDS); // 35 game ticks delay (35 * 16.67ms \u003d ~583ms)\n\n\t\t\t\tlog.debug(\"Triggered vanilla fireworks animation (SpotAnim 199) on player\");\n\t\t\t}\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\tlog.warn(\"Failed to trigger fireworks\", e);\n\t\t}\n\t}\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\CelebrationManager.java"},{"fileName":"ActionConstraint.java","content":"package com.lennyscustomclues.constraints;\n\nimport java.util.List;\n\npublic class ActionConstraint implements Constraint\n{\n\tprivate String type; // \"emote\", \"npc_interaction\", \"any_emote\", \"any_npc\"\n\tprivate Integer emoteId;\n\tprivate List\u003cInteger\u003e emoteIds;\n\tprivate Integer npcId;\n\tprivate List\u003cInteger\u003e npcIds;\n\tprivate String interactionType;\n\tprivate List\u003cString\u003e interactionTypes;\n\n\tpublic ActionConstraint()\n\t{\n\t\t// Default constructor for JSON deserialization\n\t}\n\n\tpublic ActionConstraint(String type)\n\t{\n\t\tthis.type \u003d type;\n\t}\n\n\n\t@Override\n\tpublic String description()\n\t{\n\t\tswitch (type)\n\t\t{\n\t\t\tcase \"emote\":\n\t\t\t\treturn \"Must perform specific emote\";\n\t\t\tcase \"any_emote\":\n\t\t\t\treturn \"Must perform one of specified emotes\";\n\t\t\tcase \"npc_interaction\":\n\t\t\t\treturn \"Must interact with specified NPC\";\n\t\t\tcase \"any_npc\":\n\t\t\t\treturn \"Must interact with any NPC\";\n\t\t\tdefault:\n\t\t\t\treturn \"Action constraint\";\n\t\t}\n\t}\n\n\t@Override\n\tpublic String getConstraintType()\n\t{\n\t\treturn \"action\";\n\t}\n\n\t// Getters and setters\n\tpublic String getType() { return type; }\n\tpublic void setType(String type) { this.type \u003d type; }\n\tpublic Integer getEmoteId() { return emoteId; }\n\tpublic void setEmoteId(Integer emoteId) { this.emoteId \u003d emoteId; }\n\tpublic List\u003cInteger\u003e getEmoteIds() { return emoteIds; }\n\tpublic void setEmoteIds(List\u003cInteger\u003e emoteIds) { this.emoteIds \u003d emoteIds; }\n\tpublic Integer getNpcId() { return npcId; }\n\tpublic void setNpcId(Integer npcId) { this.npcId \u003d npcId; }\n\tpublic List\u003cInteger\u003e getNpcIds() { return npcIds; }\n\tpublic void setNpcIds(List\u003cInteger\u003e npcIds) { this.npcIds \u003d npcIds; }\n\tpublic String getInteractionType() { return interactionType; }\n\tpublic void setInteractionType(String interactionType) { this.interactionType \u003d interactionType; }\n\tpublic List\u003cString\u003e getInteractionTypes() { return interactionTypes; }\n\tpublic void setInteractionTypes(List\u003cString\u003e interactionTypes) { this.interactionTypes \u003d interactionTypes; }\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\constraints\\ActionConstraint.java"},{"fileName":"Constraint.java","content":"package com.lennyscustomclues.constraints;\n\npublic interface Constraint\n{\n\tString description();\n\tString getConstraintType();\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\constraints\\Constraint.java"},{"fileName":"EquipmentConstraint.java","content":"package com.lennyscustomclues.constraints;\n\nimport java.util.List;\n\npublic class EquipmentConstraint implements Constraint\n{\n\tprivate String type; // \"contains\", \"exact_slot\", \"any_of\"\n\tprivate Integer itemId;\n\tprivate List\u003cInteger\u003e itemIds; // For \"any_of\" type\n\tprivate Integer slot;\n\tprivate Integer minQuantity;\n\n\tpublic EquipmentConstraint()\n\t{\n\t\t// Default constructor for JSON deserialization\n\t}\n\n\tpublic EquipmentConstraint(String type)\n\t{\n\t\tthis.type \u003d type;\n\t}\n\n\n\t@Override\n\tpublic String description()\n\t{\n\t\tswitch (type)\n\t\t{\n\t\t\tcase \"contains\":\n\t\t\t\treturn \"Must have specified item equipped\";\n\t\t\tcase \"exact_slot\":\n\t\t\t\treturn \"Specific equipment slot must contain specified item\";\n\t\t\tcase \"any_of\":\n\t\t\t\treturn \"Must have at least one of specified items equipped\";\n\t\t\tdefault:\n\t\t\t\treturn \"Equipment constraint\";\n\t\t}\n\t}\n\n\t@Override\n\tpublic String getConstraintType()\n\t{\n\t\treturn \"equipment\";\n\t}\n\n\t// Getters and setters\n\tpublic String getType() { return type; }\n\tpublic void setType(String type) { this.type \u003d type; }\n\tpublic Integer getItemId() { return itemId; }\n\tpublic void setItemId(Integer itemId) { this.itemId \u003d itemId; }\n\tpublic List\u003cInteger\u003e getItemIds() { return itemIds; }\n\tpublic void setItemIds(List\u003cInteger\u003e itemIds) { this.itemIds \u003d itemIds; }\n\tpublic Integer getSlot() { return slot; }\n\tpublic void setSlot(Integer slot) { this.slot \u003d slot; }\n\tpublic Integer getMinQuantity() { return minQuantity; }\n\tpublic void setMinQuantity(Integer minQuantity) { this.minQuantity \u003d minQuantity; }\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\constraints\\EquipmentConstraint.java"},{"fileName":"EventKeyConstraint.java","content":"package com.lennyscustomclues.constraints;\n\nimport java.util.List;\n\npublic class EventKeyConstraint implements Constraint\n{\n\tprivate String type; // \"exact\", \"prefix\", \"suffix\", \"any_of\"\n\tprivate String exactKey;\n\tprivate String prefix;\n\tprivate String suffix;\n\tprivate List\u003cString\u003e allowedKeys;\n\n\tpublic EventKeyConstraint()\n\t{\n\t\t// Default constructor for JSON deserialization\n\t}\n\n\tpublic EventKeyConstraint(String type)\n\t{\n\t\tthis.type \u003d type;\n\t}\n\n\n\t@Override\n\tpublic String description()\n\t{\n\t\tswitch (type)\n\t\t{\n\t\t\tcase \"exact\":\n\t\t\t\treturn \"Must have exact event key\";\n\t\t\tcase \"any_of\":\n\t\t\t\treturn \"Must have one of allowed event keys\";\n\t\t\tdefault:\n\t\t\t\treturn \"Event key constraint\";\n\t\t}\n\t}\n\n\t@Override\n\tpublic String getConstraintType()\n\t{\n\t\treturn \"event_key\";\n\t}\n\n\t// Getters and setters\n\tpublic String getType() { return type; }\n\tpublic void setType(String type) { this.type \u003d type; }\n\tpublic String getExactKey() { return exactKey; }\n\tpublic void setExactKey(String exactKey) { this.exactKey \u003d exactKey; }\n\tpublic String getPrefix() { return prefix; }\n\tpublic void setPrefix(String prefix) { this.prefix \u003d prefix; }\n\tpublic String getSuffix() { return suffix; }\n\tpublic void setSuffix(String suffix) { this.suffix \u003d suffix; }\n\tpublic List\u003cString\u003e getAllowedKeys() { return allowedKeys; }\n\tpublic void setAllowedKeys(List\u003cString\u003e allowedKeys) { this.allowedKeys \u003d allowedKeys; }\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\constraints\\EventKeyConstraint.java"},{"fileName":"InventoryConstraint.java","content":"package com.lennyscustomclues.constraints;\n\nimport java.util.List;\n\npublic class InventoryConstraint implements Constraint\n{\n\tprivate String type; // \"contains\", \"exact\", \"minimum_quantity\", \"any_of\"\n\tprivate Integer itemId;\n\tprivate List\u003cInteger\u003e itemIds; // For \"any_of\" type\n\tprivate Integer minQuantity;\n\tprivate Integer exactSlot;\n\tprivate Integer requiredSlot;\n\n\tpublic InventoryConstraint()\n\t{\n\t\t// Default constructor for JSON deserialization\n\t}\n\n\tpublic InventoryConstraint(String type)\n\t{\n\t\tthis.type \u003d type;\n\t}\n\n\n\t@Override\n\tpublic String description()\n\t{\n\t\tswitch (type)\n\t\t{\n\t\t\tcase \"contains\":\n\t\t\t\treturn \"Inventory must contain specified item\";\n\t\t\tcase \"any_of\":\n\t\t\t\treturn \"Inventory must contain at least one of specified items\";\n\t\t\tcase \"exact\":\n\t\t\t\treturn \"Specific inventory slot must contain specified item\";\n\t\t\tdefault:\n\t\t\t\treturn \"Inventory constraint\";\n\t\t}\n\t}\n\n\t@Override\n\tpublic String getConstraintType()\n\t{\n\t\treturn \"inventory\";\n\t}\n\n\t// Getters and setters\n\tpublic String getType() { return type; }\n\tpublic void setType(String type) { this.type \u003d type; }\n\tpublic Integer getItemId() { return itemId; }\n\tpublic void setItemId(Integer itemId) { this.itemId \u003d itemId; }\n\tpublic List\u003cInteger\u003e getItemIds() { return itemIds; }\n\tpublic void setItemIds(List\u003cInteger\u003e itemIds) { this.itemIds \u003d itemIds; }\n\tpublic Integer getMinQuantity() { return minQuantity; }\n\tpublic void setMinQuantity(Integer minQuantity) { this.minQuantity \u003d minQuantity; }\n\tpublic Integer getExactSlot() { return exactSlot; }\n\tpublic void setExactSlot(Integer exactSlot) { this.exactSlot \u003d exactSlot; }\n\tpublic Integer getRequiredSlot() { return requiredSlot; }\n\tpublic void setRequiredSlot(Integer requiredSlot) { this.requiredSlot \u003d requiredSlot; }\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\constraints\\InventoryConstraint.java"},{"fileName":"LocationConstraint.java","content":"package com.lennyscustomclues.constraints;\n\npublic class LocationConstraint implements Constraint\n{\n\tprivate String type; // \"exact\", \"bounds\", \"tolerance\"\n\tprivate Integer minX;\n\tprivate Integer maxX;\n\tprivate Integer minY;\n\tprivate Integer maxY;\n\tprivate Integer exactX;\n\tprivate Integer exactY;\n\tprivate Integer plane;\n\tprivate Integer tolerance; // For tolerance type\n\n\tpublic LocationConstraint()\n\t{\n\t\t// Default constructor for JSON deserialization\n\t}\n\n\tpublic LocationConstraint(String type)\n\t{\n\t\tthis.type \u003d type;\n\t}\n\n\n\t@Override\n\tpublic String description()\n\t{\n\t\tswitch (type)\n\t\t{\n\t\t\tcase \"exact\":\n\t\t\t\treturn \"Must be at exact coordinates\";\n\t\t\tcase \"bounds\":\n\t\t\t\treturn \"Must be within specified area bounds\";\n\t\t\tcase \"tolerance\":\n\t\t\t\treturn \"Must be within tolerance of target location\";\n\t\t\tdefault:\n\t\t\t\treturn \"Location constraint\";\n\t\t}\n\t}\n\n\t@Override\n\tpublic String getConstraintType()\n\t{\n\t\treturn \"location\";\n\t}\n\n\t// Getters and setters\n\tpublic String getType() { return type; }\n\tpublic void setType(String type) { this.type \u003d type; }\n\tpublic Integer getMinX() { return minX; }\n\tpublic void setMinX(Integer minX) { this.minX \u003d minX; }\n\tpublic Integer getMaxX() { return maxX; }\n\tpublic void setMaxX(Integer maxX) { this.maxX \u003d maxX; }\n\tpublic Integer getMinY() { return minY; }\n\tpublic void setMinY(Integer minY) { this.minY \u003d minY; }\n\tpublic Integer getMaxY() { return maxY; }\n\tpublic void setMaxY(Integer maxY) { this.maxY \u003d maxY; }\n\tpublic Integer getExactX() { return exactX; }\n\tpublic void setExactX(Integer exactX) { this.exactX \u003d exactX; }\n\tpublic Integer getExactY() { return exactY; }\n\tpublic void setExactY(Integer exactY) { this.exactY \u003d exactY; }\n\tpublic Integer getPlane() { return plane; }\n\tpublic void setPlane(Integer plane) { this.plane \u003d plane; }\n\tpublic Integer getTolerance() { return tolerance; }\n\tpublic void setTolerance(Integer tolerance) { this.tolerance \u003d tolerance; }\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\constraints\\LocationConstraint.java"},{"fileName":"AnswerBuilderDialog.java","content":"package com.lennyscustomclues.dialogs;\n\nimport com.lennyscustomclues.constraints.*;\nimport com.lennyscustomclues.AnswerBuilder;\nimport com.lennyscustomclues.ApiClient;\nimport com.lennyscustomclues.EmoteData;\nimport net.runelite.api.Client;\nimport net.runelite.api.Player;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.function.Consumer;\n\npublic class AnswerBuilderDialog extends JDialog\n{\n\tprivate AnswerBuilder answerBuilder;\n\tprivate Client client;\n\tprivate ApiClient apiClient;\n\n\t// Fields for update mode\n\tprivate boolean isUpdateMode;\n\tprivate String eventKey;\n\tprivate String secretKey;\n\n\tprivate JTextArea rewardTextArea;\n\tprivate JLabel statusLabel;\n\n\t// Required Action section\n\tprivate JComboBox\u003cString\u003e requiredActionCombo;\n\n\t// Location Constraint section\n\tprivate JComboBox\u003cString\u003e locationTypeCombo;\n\tprivate JPanel locationFieldsPanel;\n\tprivate Map\u003cString, JTextField\u003e locationFields;\n\tprivate Map\u003cString, JLabel\u003e locationLabels;\n\tprivate JButton useCurrentLocationButton;\n\tprivate JLabel coordinatesLabel;\n\tprivate Timer coordinateUpdateTimer;\n\n\t// Emote Constraint section\n\tprivate JPanel emoteSelectionPanel;\n\tprivate JLabel emoteDisplayLabel;\n\tprivate JButton selectEmoteButton;\n\tprivate ActionConstraint emoteConstraint;\n\n\t// Buttons\n\tprivate JButton clearAnswerButton;\n\tprivate JButton submitAnswerButton;\n\tprivate JButton cancelButton;\n\n\t// Constructor for creating a new answer\n\tpublic AnswerBuilderDialog(JFrame parent, Client client, ApiClient apiClient)\n\t{\n\t\tthis(parent, client, apiClient, null, null, null, null);\n\t}\n\n\t// Constructor for updating an existing answer\n\tpublic AnswerBuilderDialog(JFrame parent, Client client, ApiClient apiClient,\n\t\tString eventKey, String secretKey, String rewardText, java.util.List\u003cjava.util.Map\u003cString, Object\u003e\u003e constraints)\n\t{\n\t\tsuper(parent, eventKey !\u003d null ? \"Update Answer\" : \"Create Answer\", false); // false \u003d non-modal\n\t\tthis.client \u003d client;\n\t\tthis.apiClient \u003d apiClient;\n\t\tthis.answerBuilder \u003d new AnswerBuilder();\n\t\tthis.locationFields \u003d new HashMap\u003c\u003e();\n\t\tthis.locationLabels \u003d new HashMap\u003c\u003e();\n\t\tthis.isUpdateMode \u003d eventKey !\u003d null;\n\t\tthis.eventKey \u003d eventKey;\n\t\tthis.secretKey \u003d secretKey;\n\n\t\tinitializeUI();\n\n\t\t// Pre-populate fields if in update mode\n\t\tif (isUpdateMode \u0026\u0026 rewardText !\u003d null)\n\t\t{\n\t\t\tprepopulateFields(rewardText, constraints);\n\t\t}\n\n\t\tstartCoordinateUpdates();\n\t\tpack();\n\t\tsetMinimumSize(new Dimension(500, 600));\n\t\tsetLocationRelativeTo(parent);\n\t\tsetAlwaysOnTop(true); // Keep dialog visible above game client\n\t}\n\n\tprivate void initializeUI()\n\t{\n\t\tsetLayout(new BorderLayout());\n\t\tgetContentPane().setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Title\n\t\tJLabel titleLabel \u003d new JLabel(\"Answer Builder\");\n\t\ttitleLabel.setForeground(Color.WHITE);\n\t\ttitleLabel.setFont(FontManager.getRunescapeFont());\n\t\ttitleLabel.setHorizontalAlignment(SwingConstants.CENTER);\n\t\ttitleLabel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n\n\t\t// Main content panel - single column layout\n\t\tJPanel mainPanel \u003d new JPanel();\n\t\tmainPanel.setLayout(new BoxLayout(mainPanel, BoxLayout.Y_AXIS));\n\t\tmainPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tmainPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n\n\t\t// 1. Reward text area\n\t\tJPanel rewardPanel \u003d new JPanel(new BorderLayout());\n\t\trewardPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\trewardPanel.setBorder(BorderFactory.createTitledBorder(\"Reward Text (Required)\"));\n\t\trewardPanel.setMaximumSize(new Dimension(Integer.MAX_VALUE, 100));\n\n\t\trewardTextArea \u003d new JTextArea(3, 0);\n\t\trewardTextArea.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\trewardTextArea.setForeground(Color.WHITE);\n\t\trewardTextArea.setLineWrap(true);\n\t\trewardTextArea.setWrapStyleWord(true);\n\t\trewardTextArea.setToolTipText(\"This reward text will be shown to players that solve your puzzle!\");\n\t\trewardTextArea.getDocument().addDocumentListener(new javax.swing.event.DocumentListener() {\n\t\t\tpublic void insertUpdate(javax.swing.event.DocumentEvent e) { updateSubmitButtonState(); }\n\t\t\tpublic void removeUpdate(javax.swing.event.DocumentEvent e) { updateSubmitButtonState(); }\n\t\t\tpublic void changedUpdate(javax.swing.event.DocumentEvent e) { updateSubmitButtonState(); }\n\t\t});\n\t\tJScrollPane rewardScrollPane \u003d new JScrollPane(rewardTextArea);\n\t\trewardPanel.add(rewardScrollPane, BorderLayout.CENTER);\n\n\t\t// 2. Required Action section\n\t\tJPanel requiredActionPanel \u003d new JPanel();\n\t\trequiredActionPanel.setLayout(new BoxLayout(requiredActionPanel, BoxLayout.Y_AXIS));\n\t\trequiredActionPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\trequiredActionPanel.setBorder(BorderFactory.createTitledBorder(\"Required Action\"));\n\n\t\tJPanel actionTypePanel \u003d new JPanel(new FlowLayout(FlowLayout.LEFT));\n\t\tactionTypePanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJLabel actionLabel \u003d new JLabel(\"Action Type:\");\n\t\tactionLabel.setForeground(Color.WHITE);\n\t\tactionTypePanel.add(actionLabel);\n\n\t\trequiredActionCombo \u003d new JComboBox\u003c\u003e(new String[]{\"Dig with a spade\", \"Perform an Emote\"});\n\t\trequiredActionCombo.addActionListener(this::onActionTypeChanged);\n\t\tactionTypePanel.add(requiredActionCombo);\n\n\t\trequiredActionPanel.add(actionTypePanel);\n\n\t\t// Emote selection panel (initially hidden)\n\t\temoteSelectionPanel \u003d new JPanel(new FlowLayout(FlowLayout.LEFT));\n\t\temoteSelectionPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\temoteSelectionPanel.setVisible(false);\n\n\t\temoteDisplayLabel \u003d new JLabel(\"No emote selected\");\n\t\temoteDisplayLabel.setForeground(Color.LIGHT_GRAY);\n\t\temoteSelectionPanel.add(emoteDisplayLabel);\n\n\t\tselectEmoteButton \u003d new JButton(\"Select Emote\");\n\t\tselectEmoteButton.addActionListener(this::onSelectEmote);\n\t\temoteSelectionPanel.add(selectEmoteButton);\n\n\t\tJButton clearEmoteButton \u003d new JButton(\"Clear\");\n\t\tclearEmoteButton.addActionListener(this::onClearEmote);\n\t\temoteSelectionPanel.add(clearEmoteButton);\n\n\t\trequiredActionPanel.add(emoteSelectionPanel);\n\n\t\t// 3. Location Constraint section\n\t\tJPanel locationConstraintPanel \u003d new JPanel();\n\t\tlocationConstraintPanel.setLayout(new BoxLayout(locationConstraintPanel, BoxLayout.Y_AXIS));\n\t\tlocationConstraintPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tlocationConstraintPanel.setBorder(BorderFactory.createTitledBorder(\"Location Constraint\"));\n\n\t\t// Location type dropdown and coordinates display\n\t\tJPanel locationTopPanel \u003d new JPanel(new BorderLayout());\n\t\tlocationTopPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel locationTypePanel \u003d new JPanel(new FlowLayout(FlowLayout.LEFT));\n\t\tlocationTypePanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tJLabel locationTypeLabel \u003d new JLabel(\"Type:\");\n\t\tlocationTypeLabel.setForeground(Color.WHITE);\n\t\tlocationTypePanel.add(locationTypeLabel);\n\n\t\tlocationTypeCombo \u003d new JComboBox\u003c\u003e(new String[]{\"Exact Tile\", \"Near a Tile\", \"Within a Rectangle\", \"None\"});\n\t\tlocationTypeCombo.addActionListener(this::onLocationTypeChanged);\n\t\tlocationTypePanel.add(locationTypeCombo);\n\n\t\t// Coordinates display\n\t\tJPanel coordinatesPanel \u003d new JPanel(new FlowLayout(FlowLayout.LEFT));\n\t\tcoordinatesPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tcoordinatesLabel \u003d new JLabel(\"Current Location: Loading...\");\n\t\tcoordinatesLabel.setForeground(Color.CYAN);\n\t\tcoordinatesLabel.setFont(coordinatesLabel.getFont().deriveFont(Font.BOLD));\n\t\tcoordinatesPanel.add(coordinatesLabel);\n\n\t\tlocationTopPanel.add(locationTypePanel, BorderLayout.NORTH);\n\t\tlocationTopPanel.add(coordinatesPanel, BorderLayout.SOUTH);\n\n\t\t// Dynamic location fields panel\n\t\tlocationFieldsPanel \u003d new JPanel(new GridBagLayout());\n\t\tlocationFieldsPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tcreateLocationFields();\n\n\t\tlocationConstraintPanel.add(locationTopPanel);\n\t\tlocationConstraintPanel.add(locationFieldsPanel);\n\n\t\t// 4. Required Worn Items section\n\t\tJPanel wornItemsPanel \u003d new JPanel(new FlowLayout(FlowLayout.LEFT));\n\t\twornItemsPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\twornItemsPanel.setBorder(BorderFactory.createTitledBorder(\"Required Worn Items\"));\n\t\twornItemsPanel.setMaximumSize(new Dimension(Integer.MAX_VALUE, 60));\n\n\t\tJLabel wornItemsLabel \u003d new JLabel(\"Will be implemented soon!\");\n\t\twornItemsLabel.setForeground(Color.LIGHT_GRAY);\n\t\twornItemsPanel.add(wornItemsLabel);\n\n\t\t// 5. Clear button panel (centered)\n\t\tJPanel clearButtonPanel \u003d new JPanel(new FlowLayout(FlowLayout.CENTER));\n\t\tclearButtonPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tclearButtonPanel.setMaximumSize(new Dimension(Integer.MAX_VALUE, 40));\n\n\t\t// 6. Submit button panel\n\t\tJPanel submitPanel \u003d new JPanel(new FlowLayout());\n\t\tsubmitPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tsubmitPanel.setMaximumSize(new Dimension(Integer.MAX_VALUE, 50));\n\n\t\tcreateButtons();\n\n\t\tclearButtonPanel.add(clearAnswerButton);\n\n\t\tsubmitPanel.add(submitAnswerButton);\n\t\tsubmitPanel.add(cancelButton);\n\n\t\t// Status label\n\t\tstatusLabel \u003d new JLabel(\"Ready to build answer\");\n\t\tstatusLabel.setForeground(Color.WHITE);\n\t\tstatusLabel.setHorizontalAlignment(SwingConstants.CENTER);\n\n\t\t// Add all sections to main panel\n\t\tmainPanel.add(rewardPanel);\n\t\tmainPanel.add(Box.createVerticalStrut(10));\n\t\tmainPanel.add(requiredActionPanel);\n\t\tmainPanel.add(Box.createVerticalStrut(10));\n\t\tmainPanel.add(locationConstraintPanel);\n\t\tmainPanel.add(Box.createVerticalStrut(10));\n\t\tmainPanel.add(wornItemsPanel);\n\t\tmainPanel.add(Box.createVerticalStrut(10));\n\t\tmainPanel.add(clearButtonPanel);\n\t\tmainPanel.add(Box.createVerticalStrut(10));\n\t\tmainPanel.add(submitPanel);\n\n\t\tadd(titleLabel, BorderLayout.NORTH);\n\t\tadd(mainPanel, BorderLayout.CENTER);\n\t\tadd(statusLabel, BorderLayout.SOUTH);\n\n\t\tupdateLocationFieldsVisibility();\n\t}\n\n\tprivate void createButtons()\n\t{\n\t\tclearAnswerButton \u003d new JButton(\"Clear All\");\n\t\tclearAnswerButton.addActionListener(this::onClearAnswer);\n\n\t\tsubmitAnswerButton \u003d new JButton(isUpdateMode ? \"Update on Server\" : \"Submit to Server\");\n\t\tsubmitAnswerButton.addActionListener(this::onSubmitAnswer);\n\t\tsubmitAnswerButton.setEnabled(false); // Initially disabled\n\n\t\tcancelButton \u003d new JButton(\"Cancel and discard changes\");\n\t\tcancelButton.addActionListener(this::onCancel);\n\t}\n\n\tprivate void onCancel(ActionEvent e)\n\t{\n\t\tint result \u003d JOptionPane.showConfirmDialog(\n\t\t\tthis,\n\t\t\t\"Are you sure you want to cancel and discard all changes?\",\n\t\t\t\"Confirm Cancel\",\n\t\t\tJOptionPane.YES_NO_OPTION,\n\t\t\tJOptionPane.WARNING_MESSAGE\n\t\t);\n\n\t\tif (result \u003d\u003d JOptionPane.YES_OPTION)\n\t\t{\n\t\t\tdispose();\n\t\t}\n\t}\n\n\tprivate void createLocationFields()\n\t{\n\t\t// Create all possible fields\n\t\tlocationFields.put(\"exactX\", createNumberField());\n\t\tlocationFields.put(\"exactY\", createNumberField());\n\t\tlocationFields.put(\"point1X\", createNumberField());\n\t\tlocationFields.put(\"point1Y\", createNumberField());\n\t\tlocationFields.put(\"point2X\", createNumberField());\n\t\tlocationFields.put(\"point2Y\", createNumberField());\n\t\tlocationFields.put(\"plane\", createNumberField());\n\t\tlocationFields.put(\"tolerance\", createNumberField());\n\n\t\t// Create corresponding labels\n\t\tlocationLabels.put(\"exactX\", createLabel(\"Exact X:\"));\n\t\tlocationLabels.put(\"exactY\", createLabel(\"Exact Y:\"));\n\t\tlocationLabels.put(\"point1X\", createLabel(\"Point 1 X:\"));\n\t\tlocationLabels.put(\"point1Y\", createLabel(\"Point 1 Y:\"));\n\t\tlocationLabels.put(\"point2X\", createLabel(\"Point 2 X:\"));\n\t\tlocationLabels.put(\"point2Y\", createLabel(\"Point 2 Y:\"));\n\t\tlocationLabels.put(\"plane\", createLabel(\"Plane (optional):\"));\n\t\tlocationLabels.put(\"tolerance\", createLabel(\"Tolerance:\"));\n\t}\n\n\tprivate JTextField createNumberField()\n\t{\n\t\tJTextField field \u003d new JTextField(20);\n\t\tfield.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tfield.setForeground(Color.WHITE);\n\t\treturn field;\n\t}\n\n\tprivate JLabel createLabel(String text)\n\t{\n\t\tJLabel label \u003d new JLabel(text);\n\t\tlabel.setForeground(Color.WHITE);\n\t\treturn label;\n\t}\n\n\tprivate void onActionTypeChanged(ActionEvent e)\n\t{\n\t\tString selectedAction \u003d (String) requiredActionCombo.getSelectedItem();\n\t\tboolean isEmoteAction \u003d \"Perform an Emote\".equals(selectedAction);\n\n\t\temoteSelectionPanel.setVisible(isEmoteAction);\n\t\tpack(); // Resize dialog to fit new content\n\t}\n\n\tprivate void onLocationTypeChanged(ActionEvent e)\n\t{\n\t\tupdateLocationFieldsVisibility();\n\t\tpack(); // Resize dialog to fit new content\n\t}\n\n\tprivate void updateLocationFieldsVisibility()\n\t{\n\t\tString selectedType \u003d (String) locationTypeCombo.getSelectedItem();\n\n\t\t// Clear the panel\n\t\tlocationFieldsPanel.removeAll();\n\n\t\tGridBagConstraints gbc \u003d new GridBagConstraints();\n\t\tgbc.insets \u003d new Insets(5, 5, 5, 5);\n\t\tgbc.anchor \u003d GridBagConstraints.WEST;\n\n\t\tint row \u003d 0;\n\n\t\t// Map UI labels to internal constraint types\n\t\tString constraintType;\n\t\tswitch (selectedType)\n\t\t{\n\t\t\tcase \"Exact Tile\":\n\t\t\t\tconstraintType \u003d \"exact\";\n\t\t\t\taddFieldToPanel(gbc, row++, \"exactX\");\n\t\t\t\taddFieldToPanel(gbc, row++, \"exactY\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"Within a Rectangle\":\n\t\t\t\tconstraintType \u003d \"bounds\";\n\t\t\t\taddFieldToPanel(gbc, row++, \"point1X\");\n\t\t\t\taddFieldToPanel(gbc, row++, \"point1Y\");\n\n\t\t\t\t// Add \"Use Current Location\" button for Point 1\n\t\t\t\tJButton usePoint1Button \u003d new JButton(\"Use Current Location for Point 1\");\n\t\t\t\tusePoint1Button.addActionListener(e -\u003e onUseCurrentLocationForPoint(1));\n\t\t\t\tgbc.gridx \u003d 0;\n\t\t\t\tgbc.gridy \u003d row++;\n\t\t\t\tgbc.gridwidth \u003d 2;\n\t\t\t\tgbc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\t\t\tgbc.insets \u003d new Insets(5, 5, 10, 5);\n\t\t\t\tlocationFieldsPanel.add(usePoint1Button, gbc);\n\t\t\t\tgbc.gridwidth \u003d 1;\n\t\t\t\tgbc.insets \u003d new Insets(5, 5, 5, 5);\n\n\t\t\t\taddFieldToPanel(gbc, row++, \"point2X\");\n\t\t\t\taddFieldToPanel(gbc, row++, \"point2Y\");\n\n\t\t\t\t// Add \"Use Current Location\" button for Point 2\n\t\t\t\tJButton usePoint2Button \u003d new JButton(\"Use Current Location for Point 2\");\n\t\t\t\tusePoint2Button.addActionListener(e -\u003e onUseCurrentLocationForPoint(2));\n\t\t\t\tgbc.gridx \u003d 0;\n\t\t\t\tgbc.gridy \u003d row++;\n\t\t\t\tgbc.gridwidth \u003d 2;\n\t\t\t\tgbc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\t\t\tgbc.insets \u003d new Insets(5, 5, 10, 5);\n\t\t\t\tlocationFieldsPanel.add(usePoint2Button, gbc);\n\t\t\t\tgbc.gridwidth \u003d 1;\n\t\t\t\tgbc.insets \u003d new Insets(5, 5, 5, 5);\n\t\t\t\tbreak;\n\n\t\t\tcase \"None\":\n\t\t\t\t// No location constraint fields needed\n\t\t\t\tconstraintType \u003d null;\n\t\t\t\tbreak;\n\n\t\t\tcase \"Near a Tile\":\n\t\t\tdefault:\n\t\t\t\tconstraintType \u003d \"tolerance\";\n\t\t\t\taddFieldToPanel(gbc, row++, \"exactX\");\n\t\t\t\taddFieldToPanel(gbc, row++, \"exactY\");\n\t\t\t\taddFieldToPanel(gbc, row++, \"tolerance\");\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Always add plane field (optional for all types except None)\n\t\tif (!\"None\".equals(selectedType))\n\t\t{\n\t\t\taddFieldToPanel(gbc, row++, \"plane\");\n\t\t}\n\n\t\t// Add \"Use Current Location\" button for exact and tolerance types\n\t\tif (\"Exact Tile\".equals(selectedType) || \"Near a Tile\".equals(selectedType))\n\t\t{\n\t\t\tuseCurrentLocationButton \u003d new JButton(\"Use Current Location\");\n\t\t\tuseCurrentLocationButton.addActionListener(this::onUseCurrentLocation);\n\n\t\t\tgbc.gridx \u003d 0;\n\t\t\tgbc.gridy \u003d row;\n\t\t\tgbc.gridwidth \u003d 2;\n\t\t\tgbc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\t\tgbc.insets \u003d new Insets(10, 5, 5, 5);\n\t\t\tlocationFieldsPanel.add(useCurrentLocationButton, gbc);\n\t\t\tgbc.gridwidth \u003d 1;\n\t\t\tgbc.insets \u003d new Insets(5, 5, 5, 5);\n\t\t}\n\n\t\t// Refresh the panel\n\t\tlocationFieldsPanel.revalidate();\n\t\tlocationFieldsPanel.repaint();\n\t}\n\n\tprivate void addFieldToPanel(GridBagConstraints gbc, int row, String fieldName)\n\t{\n\t\tJLabel label \u003d locationLabels.get(fieldName);\n\t\tJTextField field \u003d locationFields.get(fieldName);\n\n\t\tif (label !\u003d null \u0026\u0026 field !\u003d null)\n\t\t{\n\t\t\t// Add label\n\t\t\tgbc.gridx \u003d 0;\n\t\t\tgbc.gridy \u003d row;\n\t\t\tgbc.fill \u003d GridBagConstraints.NONE;\n\t\t\tlocationFieldsPanel.add(label, gbc);\n\n\t\t\t// Add field\n\t\t\tgbc.gridx \u003d 1;\n\t\t\tgbc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\t\tgbc.weightx \u003d 1.0;\n\t\t\tlocationFieldsPanel.add(field, gbc);\n\t\t\tgbc.weightx \u003d 0.0;\n\t\t}\n\t}\n\n\tprivate void onUseCurrentLocation(ActionEvent e)\n\t{\n\t\tWorldPoint currentLocation \u003d getCurrentPlayerLocation();\n\t\tif (currentLocation !\u003d null)\n\t\t{\n\t\t\tJTextField exactXField \u003d locationFields.get(\"exactX\");\n\t\t\tJTextField exactYField \u003d locationFields.get(\"exactY\");\n\t\t\tJTextField planeField \u003d locationFields.get(\"plane\");\n\n\t\t\tif (exactXField !\u003d null) exactXField.setText(String.valueOf(currentLocation.getX()));\n\t\t\tif (exactYField !\u003d null) exactYField.setText(String.valueOf(currentLocation.getY()));\n\t\t\tif (planeField !\u003d null) planeField.setText(String.valueOf(currentLocation.getPlane()));\n\t\t}\n\t}\n\n\tprivate void onUseCurrentLocationForPoint(int pointNumber)\n\t{\n\t\tWorldPoint currentLocation \u003d getCurrentPlayerLocation();\n\t\tif (currentLocation !\u003d null)\n\t\t{\n\t\t\tString xFieldName \u003d \"point\" + pointNumber + \"X\";\n\t\t\tString yFieldName \u003d \"point\" + pointNumber + \"Y\";\n\n\t\t\tJTextField xField \u003d locationFields.get(xFieldName);\n\t\t\tJTextField yField \u003d locationFields.get(yFieldName);\n\t\t\tJTextField planeField \u003d locationFields.get(\"plane\");\n\n\t\t\tif (xField !\u003d null) xField.setText(String.valueOf(currentLocation.getX()));\n\t\t\tif (yField !\u003d null) yField.setText(String.valueOf(currentLocation.getY()));\n\t\t\tif (planeField !\u003d null) planeField.setText(String.valueOf(currentLocation.getPlane()));\n\t\t}\n\t}\n\n\tprivate void onSelectEmote(ActionEvent e)\n\t{\n\t\tWindow parentWindow \u003d SwingUtilities.getWindowAncestor(this);\n\t\tJFrame parentFrame \u003d (parentWindow instanceof JFrame) ? (JFrame) parentWindow : null;\n\n\t\tEmoteConstraintDialog dialog \u003d new EmoteConstraintDialog(\n\t\t\tparentFrame,\n\t\t\temoteConstraint,\n\t\t\tconstraint -\u003e {\n\t\t\t\temoteConstraint \u003d constraint;\n\t\t\t\tupdateEmoteDisplay();\n\t\t\t}\n\t\t);\n\n\t\tdialog.setVisible(true);\n\t}\n\n\tprivate void onClearEmote(ActionEvent e)\n\t{\n\t\temoteConstraint \u003d null;\n\t\tupdateEmoteDisplay();\n\t}\n\n\tprivate void updateEmoteDisplay()\n\t{\n\t\tif (emoteConstraint !\u003d null \u0026\u0026 emoteConstraint.getEmoteId() !\u003d null)\n\t\t{\n\t\t\tString emoteName \u003d EmoteData.getEmoteName(emoteConstraint.getEmoteId());\n\t\t\temoteDisplayLabel.setText(\"Selected: \" + emoteName);\n\t\t\temoteDisplayLabel.setForeground(Color.WHITE);\n\t\t}\n\t\telse\n\t\t{\n\t\t\temoteDisplayLabel.setText(\"No emote selected\");\n\t\t\temoteDisplayLabel.setForeground(Color.LIGHT_GRAY);\n\t\t}\n\t}\n\n\tprivate void onSubmitAnswer(ActionEvent e)\n\t{\n\t\ttry\n\t\t{\n\t\t\t// Clear any existing data first\n\t\t\tanswerBuilder.clear();\n\n\t\t\t// Update the answer builder with current reward text\n\t\t\tanswerBuilder.setRewardText(rewardTextArea.getText().trim());\n\n\t\t\t// Build and add the location constraint (if not \"None\")\n\t\t\tLocationConstraint locationConstraint \u003d buildLocationConstraint();\n\t\t\tif (locationConstraint !\u003d null)\n\t\t\t{\n\t\t\t\tanswerBuilder.addConstraint(locationConstraint);\n\t\t\t}\n\n\t\t\t// Add the emote constraint if \"Perform an Emote\" is selected\n\t\t\tString selectedAction \u003d (String) requiredActionCombo.getSelectedItem();\n\t\t\tif (\"Perform an Emote\".equals(selectedAction))\n\t\t\t{\n\t\t\t\tif (emoteConstraint \u003d\u003d null || emoteConstraint.getEmoteId() \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tJOptionPane.showMessageDialog(this, \"Please select an emote\", \"Emote Required\", JOptionPane.WARNING_MESSAGE);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tanswerBuilder.addConstraint(emoteConstraint);\n\t\t\t}\n\n\t\t\tif (isUpdateMode)\n\t\t\t{\n\t\t\t\t// Update mode - directly submit the update\n\t\t\t\tstatusLabel.setText(\"Updating answer on server...\");\n\t\t\t\tstatusLabel.setForeground(java.awt.Color.YELLOW);\n\n\t\t\t\tapiClient.updateAnswer(eventKey, secretKey, answerBuilder).thenAccept(response -\u003e {\n\t\t\t\t\tjavax.swing.SwingUtilities.invokeLater(() -\u003e {\n\t\t\t\t\t\tif (response.success)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// Show success popup\n\t\t\t\t\t\t\tJOptionPane.showMessageDialog(\n\t\t\t\t\t\t\t\tAnswerBuilderDialog.this,\n\t\t\t\t\t\t\t\t\"Answer updated successfully\",\n\t\t\t\t\t\t\t\t\"Success\",\n\t\t\t\t\t\t\t\tJOptionPane.INFORMATION_MESSAGE\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t// Close the dialog\n\t\t\t\t\t\t\tAnswerBuilderDialog.this.dispose();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// Handle different error types with appropriate messages\n\t\t\t\t\t\t\tString errorMessage \u003d \" Failed to update answer: \" + response.message;\n\t\t\t\t\t\t\tif (\"NOT_FOUND\".equals(response.errorType))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\terrorMessage \u003d \" Event key not found\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (\"UNAUTHORIZED\".equals(response.errorType))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\terrorMessage \u003d \" Invalid secret key\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (\"NETWORK_ERROR\".equals(response.errorType))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\terrorMessage \u003d \" Network error: \" + response.message;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (\"VALIDATION_ERROR\".equals(response.errorType))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\terrorMessage \u003d \" Validation error: \" + response.message;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (\"SERVER_ERROR\".equals(response.errorType))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\terrorMessage \u003d \" Server error: \" + response.message;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tstatusLabel.setText(errorMessage);\n\t\t\t\t\t\t\tstatusLabel.setForeground(java.awt.Color.RED);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// Create mode - show dialog to get event key and secret key\n\t\t\t\t// Find the parent frame\n\t\t\t\tWindow parentWindow \u003d SwingUtilities.getWindowAncestor(this);\n\t\t\t\tJFrame parentFrame \u003d (parentWindow instanceof JFrame) ? (JFrame) parentWindow : null;\n\n\t\t\t\tSubmitAnswerDialog dialog \u003d new SubmitAnswerDialog(\n\t\t\t\t\tparentFrame,\n\t\t\t\t\tanswerBuilder,\n\t\t\t\t\tapiClient,\n\t\t\t\t\t(eventKey, secretKey) -\u003e {\n\t\t\t\t\t\t// Handle the submission\n\t\t\t\t\t\tstatusLabel.setText(\"Submitting answer to server...\");\n\t\t\t\t\t\tstatusLabel.setForeground(java.awt.Color.YELLOW);\n\n\t\t\t\t\t\t// Actually submit the answer to the server\n\t\t\t\t\t\tapiClient.createAnswer(eventKey, secretKey, answerBuilder).thenAccept(response -\u003e {\n\t\t\t\t\t\t\tjavax.swing.SwingUtilities.invokeLater(() -\u003e {\n\t\t\t\t\t\t\t\tif (response.success)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t// Show success popup\n\t\t\t\t\t\t\t\t\tJOptionPane.showMessageDialog(\n\t\t\t\t\t\t\t\t\t\tAnswerBuilderDialog.this,\n\t\t\t\t\t\t\t\t\t\t\"Answer submitted successfully\",\n\t\t\t\t\t\t\t\t\t\t\"Success\",\n\t\t\t\t\t\t\t\t\t\tJOptionPane.INFORMATION_MESSAGE\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\t// Close both dialogs\n\t\t\t\t\t\t\t\t\tAnswerBuilderDialog.this.dispose();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t// Handle different error types with appropriate messages\n\t\t\t\t\t\t\t\t\tString errorMessage \u003d \" Failed to submit answer: \" + response.message;\n\t\t\t\t\t\t\t\t\tif (\"KEY_ALREADY_EXISTS\".equals(response.errorType))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\terrorMessage \u003d \" Event key \u0027\" + eventKey + \"\u0027 already exists\";\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if (\"NETWORK_ERROR\".equals(response.errorType))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\terrorMessage \u003d \" Network error: \" + response.message;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if (\"VALIDATION_ERROR\".equals(response.errorType))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\terrorMessage \u003d \" Validation error: \" + response.message;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if (\"SERVER_ERROR\".equals(response.errorType))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\terrorMessage \u003d \" Server error: \" + response.message;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tstatusLabel.setText(errorMessage);\n\t\t\t\t\t\t\t\t\tstatusLabel.setForeground(java.awt.Color.RED);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tdialog.setVisible(true);\n\t\t\t}\n\t\t}\n\t\tcatch (NumberFormatException ex)\n\t\t{\n\t\t\tJOptionPane.showMessageDialog(this, \"Please enter valid numbers for location fields\", \"Input Error\", JOptionPane.ERROR_MESSAGE);\n\t\t}\n\t\tcatch (IllegalArgumentException ex)\n\t\t{\n\t\t\tJOptionPane.showMessageDialog(this, ex.getMessage(), \"Validation Error\", JOptionPane.ERROR_MESSAGE);\n\t\t}\n\t}\n\n\tprivate LocationConstraint buildLocationConstraint()\n\t{\n\t\tString selectedType \u003d (String) locationTypeCombo.getSelectedItem();\n\t\tString constraintType;\n\n\t\tswitch (selectedType)\n\t\t{\n\t\t\tcase \"Exact Tile\":\n\t\t\t\tconstraintType \u003d \"exact\";\n\t\t\t\tbreak;\n\t\t\tcase \"Within a Rectangle\":\n\t\t\t\tconstraintType \u003d \"bounds\";\n\t\t\t\tbreak;\n\t\t\tcase \"None\":\n\t\t\t\treturn null; // No location constraint\n\t\t\tcase \"Near a Tile\":\n\t\t\tdefault:\n\t\t\t\tconstraintType \u003d \"tolerance\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\tLocationConstraint constraint \u003d new LocationConstraint(constraintType);\n\t\tconstraint.setExactX(parseInteger(\"exactX\"));\n\t\tconstraint.setExactY(parseInteger(\"exactY\"));\n\t\tconstraint.setPlane(parseInteger(\"plane\"));\n\t\tconstraint.setTolerance(parseInteger(\"tolerance\"));\n\n\t\t// For bounds type, calculate min/max from the two points\n\t\tif (\"bounds\".equals(constraintType))\n\t\t{\n\t\t\tInteger point1X \u003d parseInteger(\"point1X\");\n\t\t\tInteger point1Y \u003d parseInteger(\"point1Y\");\n\t\t\tInteger point2X \u003d parseInteger(\"point2X\");\n\t\t\tInteger point2Y \u003d parseInteger(\"point2Y\");\n\n\t\t\tif (point1X !\u003d null \u0026\u0026 point2X !\u003d null)\n\t\t\t{\n\t\t\t\tconstraint.setMinX(Math.min(point1X, point2X));\n\t\t\t\tconstraint.setMaxX(Math.max(point1X, point2X));\n\t\t\t}\n\n\t\t\tif (point1Y !\u003d null \u0026\u0026 point2Y !\u003d null)\n\t\t\t{\n\t\t\t\tconstraint.setMinY(Math.min(point1Y, point2Y));\n\t\t\t\tconstraint.setMaxY(Math.max(point1Y, point2Y));\n\t\t\t}\n\t\t}\n\n\t\treturn constraint;\n\t}\n\n\tprivate Integer parseInteger(String fieldName)\n\t{\n\t\tJTextField field \u003d locationFields.get(fieldName);\n\t\tif (field \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tString text \u003d field.getText();\n\t\tif (text \u003d\u003d null || text.trim().isEmpty())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\treturn Integer.parseInt(text.trim());\n\t}\n\n\tprivate void onClearAnswer(ActionEvent e)\n\t{\n\t\tint result \u003d JOptionPane.showConfirmDialog(\n\t\t\tthis,\n\t\t\t\"Are you sure you want to clear all drafted answer information?\",\n\t\t\t\"Confirm Clear\",\n\t\t\tJOptionPane.YES_NO_OPTION,\n\t\t\tJOptionPane.WARNING_MESSAGE\n\t\t);\n\n\t\tif (result \u003d\u003d JOptionPane.YES_OPTION)\n\t\t{\n\t\t\tanswerBuilder.clear();\n\t\t\trewardTextArea.setText(\"\");\n\t\t\trequiredActionCombo.setSelectedItem(\"Dig with a spade\");\n\t\t\tclearLocationFields();\n\t\t\temoteConstraint \u003d null;\n\t\t\tupdateEmoteDisplay();\n\t\t\tupdateSubmitButtonState();\n\t\t\tstatusLabel.setText(\"Answer cleared\");\n\t\t}\n\t}\n\n\tprivate void clearLocationFields()\n\t{\n\t\tfor (JTextField field : locationFields.values())\n\t\t{\n\t\t\tfield.setText(\"\");\n\t\t}\n\t}\n\n\tprivate void updateSubmitButtonState()\n\t{\n\t\tboolean hasRewardText \u003d rewardTextArea !\u003d null \u0026\u0026 !rewardTextArea.getText().trim().isEmpty();\n\n\t\tif (submitAnswerButton !\u003d null)\n\t\t{\n\t\t\tsubmitAnswerButton.setEnabled(hasRewardText);\n\t\t}\n\t}\n\n\tprivate void startCoordinateUpdates()\n\t{\n\t\t// Update coordinates every 500ms\n\t\tcoordinateUpdateTimer \u003d new Timer(500, e -\u003e updateCoordinatesDisplay());\n\t\tcoordinateUpdateTimer.start();\n\t\tupdateCoordinatesDisplay(); // Initial update\n\t}\n\n\tprivate void stopCoordinateUpdates()\n\t{\n\t\tif (coordinateUpdateTimer !\u003d null)\n\t\t{\n\t\t\tcoordinateUpdateTimer.stop();\n\t\t}\n\t}\n\n\tprivate void updateCoordinatesDisplay()\n\t{\n\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\tWorldPoint location \u003d getCurrentPlayerLocation();\n\t\t\tif (location !\u003d null)\n\t\t\t{\n\t\t\t\tcoordinatesLabel.setText(String.format(\"Current Location: X:%d Y:%d Plane:%d\",\n\t\t\t\t\tlocation.getX(), location.getY(), location.getPlane()));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcoordinatesLabel.setText(\"Current Location: Not available\");\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate WorldPoint getCurrentPlayerLocation()\n\t{\n\t\tif (client \u003d\u003d null) return null;\n\n\t\tPlayer player \u003d client.getLocalPlayer();\n\t\tif (player \u003d\u003d null) return null;\n\n\t\treturn player.getWorldLocation();\n\t}\n\n\tprivate void prepopulateFields(String rewardText, java.util.List\u003cjava.util.Map\u003cString, Object\u003e\u003e constraints)\n\t{\n\t\t// Set reward text\n\t\trewardTextArea.setText(rewardText);\n\n\t\t// Parse and set constraints if present\n\t\tif (constraints !\u003d null \u0026\u0026 !constraints.isEmpty())\n\t\t{\n\t\t\tfor (java.util.Map\u003cString, Object\u003e constraintMap : constraints)\n\t\t\t{\n\t\t\t\tString constraintType \u003d (String) constraintMap.get(\"constraint_type\");\n\n\t\t\t\tif (\"location\".equals(constraintType))\n\t\t\t\t{\n\t\t\t\t\tString type \u003d (String) constraintMap.get(\"type\");\n\n\t\t\t\t\t// Set the location type in the dropdown\n\t\t\t\t\tif (\"exact\".equals(type))\n\t\t\t\t\t{\n\t\t\t\t\t\tlocationTypeCombo.setSelectedItem(\"Exact Tile\");\n\t\t\t\t\t\tsetIntegerField(\"exactX\", constraintMap.get(\"exact_x\"));\n\t\t\t\t\t\tsetIntegerField(\"exactY\", constraintMap.get(\"exact_y\"));\n\t\t\t\t\t}\n\t\t\t\t\telse if (\"tolerance\".equals(type))\n\t\t\t\t\t{\n\t\t\t\t\t\tlocationTypeCombo.setSelectedItem(\"Near a Tile\");\n\t\t\t\t\t\tsetIntegerField(\"exactX\", constraintMap.get(\"exact_x\"));\n\t\t\t\t\t\tsetIntegerField(\"exactY\", constraintMap.get(\"exact_y\"));\n\t\t\t\t\t\tsetIntegerField(\"tolerance\", constraintMap.get(\"tolerance\"));\n\t\t\t\t\t}\n\t\t\t\t\telse if (\"bounds\".equals(type))\n\t\t\t\t\t{\n\t\t\t\t\t\tlocationTypeCombo.setSelectedItem(\"Within a Rectangle\");\n\t\t\t\t\t\t// Convert min/max back to point1/point2 for display\n\t\t\t\t\t\tsetIntegerField(\"point1X\", constraintMap.get(\"min_x\"));\n\t\t\t\t\t\tsetIntegerField(\"point1Y\", constraintMap.get(\"min_y\"));\n\t\t\t\t\t\tsetIntegerField(\"point2X\", constraintMap.get(\"max_x\"));\n\t\t\t\t\t\tsetIntegerField(\"point2Y\", constraintMap.get(\"max_y\"));\n\t\t\t\t\t}\n\n\t\t\t\t\t// Set plane if present\n\t\t\t\t\tsetIntegerField(\"plane\", constraintMap.get(\"plane\"));\n\t\t\t\t}\n\t\t\t\telse if (\"action\".equals(constraintType))\n\t\t\t\t{\n\t\t\t\t\tString type \u003d (String) constraintMap.get(\"type\");\n\n\t\t\t\t\tif (\"emote\".equals(type))\n\t\t\t\t\t{\n\t\t\t\t\t\tObject emoteIdObj \u003d constraintMap.get(\"emote_id\");\n\t\t\t\t\t\tif (emoteIdObj !\u003d null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tInteger emoteId \u003d null;\n\t\t\t\t\t\t\tif (emoteIdObj instanceof Number)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\temoteId \u003d ((Number) emoteIdObj).intValue();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (emoteId !\u003d null)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t// Set the action type to \"Perform an Emote\"\n\t\t\t\t\t\t\t\trequiredActionCombo.setSelectedItem(\"Perform an Emote\");\n\n\t\t\t\t\t\t\t\temoteConstraint \u003d new ActionConstraint(\"emote\");\n\t\t\t\t\t\t\t\temoteConstraint.setEmoteId(emoteId);\n\t\t\t\t\t\t\t\tupdateEmoteDisplay();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tupdateSubmitButtonState();\n\t}\n\n\tprivate void setIntegerField(String fieldName, Object value)\n\t{\n\t\tJTextField field \u003d locationFields.get(fieldName);\n\t\tif (field !\u003d null \u0026\u0026 value !\u003d null)\n\t\t{\n\t\t\t// Handle both Integer and Double from JSON parsing\n\t\t\tif (value instanceof Number)\n\t\t\t{\n\t\t\t\tfield.setText(String.valueOf(((Number) value).intValue()));\n\t\t\t}\n\t\t\telse if (value instanceof String)\n\t\t\t{\n\t\t\t\tfield.setText((String) value);\n\t\t\t}\n\t\t}\n\t}\n\n\t@Override\n\tpublic void dispose()\n\t{\n\t\tstopCoordinateUpdates();\n\t\tsuper.dispose();\n\t}\n\n\tpublic AnswerBuilder getAnswerBuilder()\n\t{\n\t\treturn answerBuilder;\n\t}\n}\n","filePath":"src\\main\\java\\com\\lennyscustomclues\\dialogs\\AnswerBuilderDialog.java"},{"fileName":"EmoteConstraintDialog.java","content":"package com.lennyscustomclues.dialogs;\n\nimport com.lennyscustomclues.EmoteData;\nimport com.lennyscustomclues.constraints.ActionConstraint;\nimport net.runelite.client.ui.ColorScheme;\n\nimport javax.swing.*;\nimport javax.swing.event.DocumentEvent;\nimport javax.swing.event.DocumentListener;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.function.Consumer;\n\npublic class EmoteConstraintDialog extends JDialog\n{\n\tprivate JTextField searchField;\n\tprivate JList\u003cString\u003e emoteList;\n\tprivate DefaultListModel\u003cString\u003e listModel;\n\tprivate List\u003cString\u003e allEmoteNames;\n\n\tprivate ActionConstraint constraint;\n\tprivate Consumer\u003cActionConstraint\u003e onSave;\n\tprivate boolean cancelled \u003d true;\n\n\tpublic EmoteConstraintDialog(JFrame parent, ActionConstraint existing, Consumer\u003cActionConstraint\u003e onSave)\n\t{\n\t\tsuper(parent, \"Emote Constraint\", false); // false \u003d non-modal\n\t\tthis.onSave \u003d onSave;\n\t\tthis.constraint \u003d existing !\u003d null ? existing : new ActionConstraint(\"emote\");\n\n\t\t// Get all emote names\n\t\tallEmoteNames \u003d new ArrayList\u003c\u003e(EmoteData.getEmotes().keySet());\n\n\t\tinitializeUI();\n\t\tpopulateFields();\n\t\tpack();\n\t\tsetLocationRelativeTo(parent);\n\t\tsetAlwaysOnTop(true);\n\t}\n\n\tprivate void initializeUI()\n\t{\n\t\tsetLayout(new BorderLayout(10, 10));\n\t\tgetContentPane().setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Top panel with instructions and search\n\t\tJPanel topPanel \u003d new JPanel(new BorderLayout(5, 5));\n\t\ttopPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\ttopPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 0, 10));\n\n\t\tJLabel instructionLabel \u003d new JLabel(\"Select an emote:\");\n\t\tinstructionLabel.setForeground(Color.WHITE);\n\t\ttopPanel.add(instructionLabel, BorderLayout.NORTH);\n\n\t\t// Search field\n\t\tJPanel searchPanel \u003d new JPanel(new BorderLayout(5, 0));\n\t\tsearchPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJLabel searchLabel \u003d new JLabel(\"Search:\");\n\t\tsearchLabel.setForeground(Color.WHITE);\n\t\tsearchPanel.add(searchLabel, BorderLayout.WEST);\n\n\t\tsearchField \u003d new JTextField(20);\n\t\tsearchField.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tsearchField.setForeground(Color.WHITE);\n\t\tsearchField.getDocument().addDocumentListener(new DocumentListener()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void insertUpdate(DocumentEvent e)\n\t\t\t{\n\t\t\t\tfilterEmotes();\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void removeUpdate(DocumentEvent e)\n\t\t\t{\n\t\t\t\tfilterEmotes();\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void changedUpdate(DocumentEvent e)\n\t\t\t{\n\t\t\t\tfilterEmotes();\n\t\t\t}\n\t\t});\n\t\tsearchPanel.add(searchField, BorderLayout.CENTER);\n\n\t\ttopPanel.add(searchPanel, BorderLayout.SOUTH);\n\n\t\t// Center panel with emote list\n\t\tJPanel centerPanel \u003d new JPanel(new BorderLayout());\n\t\tcenterPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tcenterPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n\n\t\tlistModel \u003d new DefaultListModel\u003c\u003e();\n\t\tfor (String emoteName : allEmoteNames)\n\t\t{\n\t\t\tlistModel.addElement(emoteName);\n\t\t}\n\n\t\temoteList \u003d new JList\u003c\u003e(listModel);\n\t\temoteList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);\n\t\temoteList.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\temoteList.setForeground(Color.WHITE);\n\t\temoteList.setVisibleRowCount(15);\n\n\t\tJScrollPane scrollPane \u003d new JScrollPane(emoteList);\n\t\tscrollPane.setPreferredSize(new Dimension(300, 300));\n\t\tcenterPanel.add(scrollPane, BorderLayout.CENTER);\n\n\t\t// Buttons panel\n\t\tJPanel buttonPanel \u003d new JPanel(new FlowLayout());\n\t\tbuttonPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tbuttonPanel.setBorder(BorderFactory.createEmptyBorder(0, 10, 10, 10));\n\n\t\tJButton saveButton \u003d new JButton(\"Save\");\n\t\tJButton cancelButton \u003d new JButton(\"Cancel\");\n\n\t\tsaveButton.addActionListener(this::onSave);\n\t\tcancelButton.addActionListener(this::onCancel);\n\n\t\tbuttonPanel.add(saveButton);\n\t\tbuttonPanel.add(cancelButton);\n\n\t\tadd(topPanel, BorderLayout.NORTH);\n\t\tadd(centerPanel, BorderLayout.CENTER);\n\t\tadd(buttonPanel, BorderLayout.SOUTH);\n\t}\n\n\tprivate void populateFields()\n\t{\n\t\t// If editing an existing constraint, select the corresponding emote\n\t\tif (constraint.getEmoteId() !\u003d null)\n\t\t{\n\t\t\tString emoteName \u003d EmoteData.getEmoteName(constraint.getEmoteId());\n\t\t\tif (emoteName !\u003d null \u0026\u0026 !emoteName.equals(\"Unknown Emote\"))\n\t\t\t{\n\t\t\t\temoteList.setSelectedValue(emoteName, true);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void filterEmotes()\n\t{\n\t\tString searchText \u003d searchField.getText().toLowerCase();\n\t\tlistModel.clear();\n\n\t\tfor (String emoteName : allEmoteNames)\n\t\t{\n\t\t\tif (emoteName.toLowerCase().contains(searchText))\n\t\t\t{\n\t\t\t\tlistModel.addElement(emoteName);\n\t\t\t}\n\t\t}\n\n\t\t// If there\u0027s only one match, select it\n\t\tif (listModel.getSize() \u003d\u003d 1)\n\t\t{\n\t\t\temoteList.setSelectedIndex(0);\n\t\t}\n\t}\n\n\tprivate void onSave(ActionEvent e)\n\t{\n\t\tString selectedEmote \u003d emoteList.getSelectedValue();\n\t\tif (selectedEmote \u003d\u003d null)\n\t\t{\n\t\t\tJOptionPane.showMessageDialog(this, \"Please select an emote\", \"Selection Required\", JOptionPane.WARNING_MESSAGE);\n\t\t\treturn;\n\t\t}\n\n\t\tInteger emoteId \u003d EmoteData.getEmoteId(selectedEmote);\n\t\tif (emoteId \u003d\u003d null)\n\t\t{\n\t\t\tJOptionPane.showMessageDialog(this, \"Invalid emote selected\", \"Error\", JOptionPane.ERROR_MESSAGE);\n\t\t\treturn;\n\t\t}\n\n\t\tconstraint.setType(\"emote\");\n\t\tconstraint.setEmoteId(emoteId);\n\n\t\tcancelled \u003d false;\n\t\tonSave.accept(constraint);\n\t\tdispose();\n\t}\n\n\tprivate void onCancel(ActionEvent e)\n\t{\n\t\tcancelled \u003d true;\n\t\tdispose();\n\t}\n\n\tpublic boolean wasCancelled()\n\t{\n\t\treturn cancelled;\n\t}\n}\n","filePath":"src\\main\\java\\com\\lennyscustomclues\\dialogs\\EmoteConstraintDialog.java"},{"fileName":"EventInfoDialog.java","content":"package com.lennyscustomclues.dialogs;\n\nimport com.lennyscustomclues.ApiClient;\nimport com.lennyscustomclues.EmoteData;\nimport com.lennyscustomclues.constraints.LocationConstraint;\nimport net.runelite.api.Client;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\n\nimport javax.swing.*;\nimport javax.swing.table.DefaultTableCellRenderer;\nimport javax.swing.table.DefaultTableModel;\nimport java.awt.*;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.TimeZone;\n\npublic class EventInfoDialog extends JDialog\n{\n\tprivate ApiClient apiClient;\n\tprivate Client client;\n\tprivate JFrame parentFrame;\n\tprivate String eventKey;\n\tprivate String secretKey;\n\tprivate String rewardText;\n\tprivate List\u003cMap\u003cString, Object\u003e\u003e constraints;\n\tprivate List\u003cApiClient.PlayerCompletion\u003e completedBy;\n\n\t// UI components that need to be refreshed\n\tprivate JPanel mainPanel;\n\tprivate JLabel statusLabel;\n\n\tpublic EventInfoDialog(JFrame parent, Client client, ApiClient apiClient,\n\t\tString eventKey, String secretKey, String rewardText,\n\t\tList\u003cMap\u003cString, Object\u003e\u003e constraints, List\u003cApiClient.PlayerCompletion\u003e completedBy)\n\t{\n\t\tsuper(parent, \"Event Information\", true);\n\t\tthis.parentFrame \u003d parent;\n\t\tthis.client \u003d client;\n\t\tthis.apiClient \u003d apiClient;\n\t\tthis.eventKey \u003d eventKey;\n\t\tthis.secretKey \u003d secretKey;\n\t\tthis.rewardText \u003d rewardText;\n\t\tthis.constraints \u003d constraints;\n\t\tthis.completedBy \u003d completedBy;\n\n\t\tinitializeUI();\n\t\tpack();\n\t\tsetMinimumSize(new Dimension(600, 500));\n\t\tsetLocationRelativeTo(parent);\n\t}\n\n\tprivate void initializeUI()\n\t{\n\t\tsetLayout(new BorderLayout());\n\t\tgetContentPane().setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Title\n\t\tJLabel titleLabel \u003d new JLabel(\"Event: \" + eventKey);\n\t\ttitleLabel.setForeground(Color.WHITE);\n\t\ttitleLabel.setFont(FontManager.getRunescapeFont().deriveFont(Font.BOLD, 14f));\n\t\ttitleLabel.setHorizontalAlignment(SwingConstants.CENTER);\n\t\ttitleLabel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n\n\t\t// Main content panel\n\t\tmainPanel \u003d new JPanel();\n\t\tmainPanel.setLayout(new BoxLayout(mainPanel, BoxLayout.Y_AXIS));\n\t\tmainPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tmainPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n\n\t\t// Answer summary panel\n\t\tJPanel summaryPanel \u003d createAnswerSummaryPanel();\n\n\t\t// Solvers panel\n\t\tJPanel solversPanel \u003d createSolversPanel();\n\n\t\tmainPanel.add(summaryPanel);\n\t\tmainPanel.add(Box.createVerticalStrut(10));\n\t\tmainPanel.add(solversPanel);\n\n\t\t// Bottom panel with buttons and status\n\t\tJPanel bottomPanel \u003d new JPanel();\n\t\tbottomPanel.setLayout(new BoxLayout(bottomPanel, BoxLayout.Y_AXIS));\n\t\tbottomPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Buttons panel\n\t\tJPanel buttonPanel \u003d new JPanel(new FlowLayout(FlowLayout.CENTER));\n\t\tbuttonPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJButton refreshButton \u003d new JButton(\"Refresh\");\n\t\trefreshButton.addActionListener(e -\u003e onRefresh());\n\t\tbuttonPanel.add(refreshButton);\n\n\t\tJButton editButton \u003d new JButton(\"Edit Answer\");\n\t\teditButton.addActionListener(e -\u003e onEditAnswer());\n\t\tbuttonPanel.add(editButton);\n\n\t\tJButton closeButton \u003d new JButton(\"Close\");\n\t\tcloseButton.addActionListener(e -\u003e dispose());\n\t\tbuttonPanel.add(closeButton);\n\n\t\t// Status label\n\t\tstatusLabel \u003d new JLabel(\" \");\n\t\tstatusLabel.setForeground(Color.WHITE);\n\t\tstatusLabel.setHorizontalAlignment(SwingConstants.CENTER);\n\t\tstatusLabel.setBorder(BorderFactory.createEmptyBorder(5, 10, 5, 10));\n\n\t\tbottomPanel.add(buttonPanel);\n\t\tbottomPanel.add(statusLabel);\n\n\t\tadd(titleLabel, BorderLayout.NORTH);\n\t\tadd(mainPanel, BorderLayout.CENTER);\n\t\tadd(bottomPanel, BorderLayout.SOUTH);\n\t}\n\n\tprivate JPanel createAnswerSummaryPanel()\n\t{\n\t\tJPanel panel \u003d new JPanel(new BorderLayout());\n\t\tpanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tpanel.setBorder(BorderFactory.createTitledBorder(\n\t\t\tBorderFactory.createLineBorder(ColorScheme.MEDIUM_GRAY_COLOR),\n\t\t\t\"Answer Summary\",\n\t\t\t0,\n\t\t\t0,\n\t\t\tFontManager.getRunescapeFont(),\n\t\t\tColor.WHITE\n\t\t));\n\n\t\t// Build the summary text\n\t\tStringBuilder summaryBuilder \u003d new StringBuilder();\n\t\tsummaryBuilder.append(\"Reward: \").append(rewardText !\u003d null \u0026\u0026 !rewardText.trim().isEmpty() ? rewardText : \"(No reward text specified)\").append(\"\\n\\n\");\n\n\t\tif (constraints \u003d\u003d null || constraints.isEmpty())\n\t\t{\n\t\t\tsummaryBuilder.append(\"No constraints defined\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Check if there\u0027s an emote constraint\n\t\t\tString requiredAction \u003d \"Dig with a spade\";\n\t\t\tfor (Map\u003cString, Object\u003e constraintMap : constraints)\n\t\t\t{\n\t\t\t\tString constraintType \u003d (String) constraintMap.get(\"constraint_type\");\n\t\t\t\tif (\"action\".equals(constraintType))\n\t\t\t\t{\n\t\t\t\t\tString type \u003d (String) constraintMap.get(\"type\");\n\t\t\t\t\tif (\"emote\".equals(type))\n\t\t\t\t\t{\n\t\t\t\t\t\tObject emoteIdObj \u003d constraintMap.get(\"emote_id\");\n\t\t\t\t\t\tif (emoteIdObj !\u003d null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tInteger emoteId \u003d null;\n\t\t\t\t\t\t\tif (emoteIdObj instanceof Number)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\temoteId \u003d ((Number) emoteIdObj).intValue();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (emoteId !\u003d null)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tString emoteName \u003d EmoteData.getEmoteName(emoteId);\n\t\t\t\t\t\t\t\trequiredAction \u003d \"Perform an Emote: \" + emoteName;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tsummaryBuilder.append(\"Required Action: \").append(requiredAction).append(\"\\n\");\n\n\t\t\tfor (Map\u003cString, Object\u003e constraintMap : constraints)\n\t\t\t{\n\t\t\t\tString constraintType \u003d (String) constraintMap.get(\"constraint_type\");\n\t\t\t\tif (\"location\".equals(constraintType))\n\t\t\t\t{\n\t\t\t\t\tsummaryBuilder.append(getLocationConstraintDescription(constraintMap));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tJTextArea summaryArea \u003d new JTextArea(summaryBuilder.toString());\n\t\tsummaryArea.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tsummaryArea.setForeground(Color.WHITE);\n\t\tsummaryArea.setFont(FontManager.getRunescapeSmallFont());\n\t\tsummaryArea.setEditable(false);\n\t\tsummaryArea.setLineWrap(true);\n\t\tsummaryArea.setWrapStyleWord(true);\n\n\t\tJScrollPane scrollPane \u003d new JScrollPane(summaryArea);\n\t\tscrollPane.setPreferredSize(new Dimension(0, 120));\n\t\tpanel.add(scrollPane, BorderLayout.CENTER);\n\n\t\treturn panel;\n\t}\n\n\tprivate JPanel createSolversPanel()\n\t{\n\t\tJPanel panel \u003d new JPanel(new BorderLayout());\n\t\tpanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tpanel.setBorder(BorderFactory.createTitledBorder(\n\t\t\tBorderFactory.createLineBorder(ColorScheme.MEDIUM_GRAY_COLOR),\n\t\t\t\"Players Who Solved This Event\",\n\t\t\t0,\n\t\t\t0,\n\t\t\tFontManager.getRunescapeFont(),\n\t\t\tColor.WHITE\n\t\t));\n\n\t\t// Create table\n\t\tString[] columnNames \u003d {\"Rank\", \"Player Name\", \"Completed At\"};\n\t\tDefaultTableModel tableModel \u003d new DefaultTableModel(columnNames, 0) {\n\t\t\t@Override\n\t\t\tpublic boolean isCellEditable(int row, int column) {\n\t\t\t\treturn false; // Make table non-editable\n\t\t\t}\n\t\t};\n\n\t\t// Add data to table\n\t\tif (completedBy !\u003d null \u0026\u0026 !completedBy.isEmpty())\n\t\t{\n\t\t\tSimpleDateFormat dateFormat \u003d new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\n\t\t\tdateFormat.setTimeZone(TimeZone.getDefault());\n\n\t\t\tfor (int i \u003d 0; i \u003c completedBy.size(); i++)\n\t\t\t{\n\t\t\t\tApiClient.PlayerCompletion completion \u003d completedBy.get(i);\n\t\t\t\tString rank \u003d String.valueOf(i + 1);\n\t\t\t\tString playerName \u003d completion.rsn;\n\t\t\t\tString timestamp \u003d formatTimestamp(completion.timestamp);\n\n\t\t\t\ttableModel.addRow(new Object[]{rank, playerName, timestamp});\n\t\t\t}\n\t\t}\n\n\t\tJTable table \u003d new JTable(tableModel);\n\t\ttable.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\ttable.setForeground(Color.WHITE);\n\t\ttable.setFont(FontManager.getRunescapeSmallFont());\n\t\ttable.setSelectionBackground(ColorScheme.MEDIUM_GRAY_COLOR);\n\t\ttable.setSelectionForeground(Color.WHITE);\n\t\ttable.setGridColor(ColorScheme.MEDIUM_GRAY_COLOR);\n\t\ttable.setShowGrid(true);\n\t\ttable.setRowHeight(25);\n\n\t\t// Center align the Rank column\n\t\tDefaultTableCellRenderer centerRenderer \u003d new DefaultTableCellRenderer();\n\t\tcenterRenderer.setHorizontalAlignment(SwingConstants.CENTER);\n\t\ttable.getColumnModel().getColumn(0).setCellRenderer(centerRenderer);\n\t\ttable.getColumnModel().getColumn(0).setPreferredWidth(50);\n\t\ttable.getColumnModel().getColumn(1).setPreferredWidth(150);\n\t\ttable.getColumnModel().getColumn(2).setPreferredWidth(200);\n\n\t\t// Style table header\n\t\ttable.getTableHeader().setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\ttable.getTableHeader().setForeground(Color.WHITE);\n\t\ttable.getTableHeader().setFont(FontManager.getRunescapeFont());\n\n\t\tJScrollPane scrollPane \u003d new JScrollPane(table);\n\t\tscrollPane.setPreferredSize(new Dimension(0, 200));\n\n\t\t// Add message if no players have solved it yet\n\t\tif (completedBy \u003d\u003d null || completedBy.isEmpty())\n\t\t{\n\t\t\tJLabel noSolversLabel \u003d new JLabel(\"No players have solved this event yet\");\n\t\t\tnoSolversLabel.setForeground(Color.LIGHT_GRAY);\n\t\t\tnoSolversLabel.setFont(FontManager.getRunescapeSmallFont());\n\t\t\tnoSolversLabel.setHorizontalAlignment(SwingConstants.CENTER);\n\t\t\tpanel.add(noSolversLabel, BorderLayout.CENTER);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpanel.add(scrollPane, BorderLayout.CENTER);\n\t\t}\n\n\t\treturn panel;\n\t}\n\n\tprivate String formatTimestamp(String timestamp)\n\t{\n\t\tif (timestamp \u003d\u003d null || timestamp.isEmpty())\n\t\t{\n\t\t\treturn \"Unknown\";\n\t\t}\n\n\t\ttry\n\t\t{\n\t\t\t// Parse ISO 8601 timestamp (e.g., \"2024-11-23T12:34:56.789Z\")\n\t\t\tSimpleDateFormat inputFormat \u003d new SimpleDateFormat(\"yyyy-MM-dd\u0027T\u0027HH:mm:ss\");\n\t\t\tinputFormat.setTimeZone(TimeZone.getTimeZone(\"UTC\"));\n\n\t\t\t// Handle both with and without milliseconds\n\t\t\tString cleanTimestamp \u003d timestamp.replace(\"Z\", \"\");\n\t\t\tif (cleanTimestamp.contains(\".\"))\n\t\t\t{\n\t\t\t\tcleanTimestamp \u003d cleanTimestamp.substring(0, cleanTimestamp.indexOf(\".\"));\n\t\t\t}\n\n\t\t\tDate date \u003d inputFormat.parse(cleanTimestamp);\n\n\t\t\t// Format to local time\n\t\t\tSimpleDateFormat outputFormat \u003d new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\n\t\t\toutputFormat.setTimeZone(TimeZone.getDefault());\n\t\t\treturn outputFormat.format(date);\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\t// If parsing fails, return the original timestamp\n\t\t\treturn timestamp;\n\t\t}\n\t}\n\n\tprivate String getLocationConstraintDescription(Map\u003cString, Object\u003e constraintMap)\n\t{\n\t\tStringBuilder desc \u003d new StringBuilder();\n\t\tString type \u003d (String) constraintMap.get(\"type\");\n\n\t\tswitch (type)\n\t\t{\n\t\t\tcase \"exact\":\n\t\t\t\tdesc.append(\"Location: Exact tile (\");\n\t\t\t\tdesc.append(\"X: \").append(getIntValue(constraintMap, \"exact_x\"));\n\t\t\t\tdesc.append(\", Y: \").append(getIntValue(constraintMap, \"exact_y\"));\n\t\t\t\tif (constraintMap.containsKey(\"plane\"))\n\t\t\t\t{\n\t\t\t\t\tdesc.append(\", Plane: \").append(getIntValue(constraintMap, \"plane\"));\n\t\t\t\t}\n\t\t\t\tdesc.append(\")\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"bounds\":\n\t\t\t\tdesc.append(\"Location: Within rectangle (\");\n\t\t\t\tdesc.append(\"X: \").append(getIntValue(constraintMap, \"min_x\")).append(\"-\").append(getIntValue(constraintMap, \"max_x\"));\n\t\t\t\tdesc.append(\", Y: \").append(getIntValue(constraintMap, \"min_y\")).append(\"-\").append(getIntValue(constraintMap, \"max_y\"));\n\t\t\t\tif (constraintMap.containsKey(\"plane\"))\n\t\t\t\t{\n\t\t\t\t\tdesc.append(\", Plane: \").append(getIntValue(constraintMap, \"plane\"));\n\t\t\t\t}\n\t\t\t\tdesc.append(\")\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"tolerance\":\n\t\t\t\tdesc.append(\"Location: Near tile (\");\n\t\t\t\tdesc.append(\"X: \").append(getIntValue(constraintMap, \"exact_x\"));\n\t\t\t\tdesc.append(\", Y: \").append(getIntValue(constraintMap, \"exact_y\"));\n\t\t\t\tif (constraintMap.containsKey(\"tolerance\"))\n\t\t\t\t{\n\t\t\t\t\tdesc.append(\", within \").append(getIntValue(constraintMap, \"tolerance\")).append(\" tiles\");\n\t\t\t\t}\n\t\t\t\tif (constraintMap.containsKey(\"plane\"))\n\t\t\t\t{\n\t\t\t\t\tdesc.append(\", Plane: \").append(getIntValue(constraintMap, \"plane\"));\n\t\t\t\t}\n\t\t\t\tdesc.append(\")\");\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tdesc.append(\"Location: \").append(type);\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn desc.toString();\n\t}\n\n\tprivate int getIntValue(Map\u003cString, Object\u003e map, String key)\n\t{\n\t\tObject value \u003d map.get(key);\n\t\tif (value instanceof Number)\n\t\t{\n\t\t\treturn ((Number) value).intValue();\n\t\t}\n\t\treturn 0;\n\t}\n\n\tprivate void onEditAnswer()\n\t{\n\t\t// Close this dialog\n\t\tdispose();\n\n\t\t// Open the answer builder dialog in update mode\n\t\tAnswerBuilderDialog answerDialog \u003d new AnswerBuilderDialog(\n\t\t\tparentFrame,\n\t\t\tclient,\n\t\t\tapiClient,\n\t\t\teventKey,\n\t\t\tsecretKey,\n\t\t\trewardText,\n\t\t\tconstraints\n\t\t);\n\t\tanswerDialog.setVisible(true);\n\t}\n\n\tprivate void onRefresh()\n\t{\n\t\tstatusLabel.setText(\"Refreshing...\");\n\t\tstatusLabel.setForeground(Color.YELLOW);\n\n\t\t// Make API request to get the latest answer data\n\t\tapiClient.getAnswer(eventKey, secretKey).thenAccept(response -\u003e {\n\t\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\t\tif (response.isSuccess())\n\t\t\t\t{\n\t\t\t\t\t// Update the stored data\n\t\t\t\t\tthis.rewardText \u003d response.reward_text;\n\t\t\t\t\tthis.constraints \u003d response.constraints;\n\t\t\t\t\tthis.completedBy \u003d response.completed_by;\n\n\t\t\t\t\t// Rebuild the UI panels\n\t\t\t\t\tmainPanel.removeAll();\n\n\t\t\t\t\tJPanel summaryPanel \u003d createAnswerSummaryPanel();\n\t\t\t\t\tJPanel solversPanel \u003d createSolversPanel();\n\n\t\t\t\t\tmainPanel.add(summaryPanel);\n\t\t\t\t\tmainPanel.add(Box.createVerticalStrut(10));\n\t\t\t\t\tmainPanel.add(solversPanel);\n\n\t\t\t\t\t// Refresh the display\n\t\t\t\t\tmainPanel.revalidate();\n\t\t\t\t\tmainPanel.repaint();\n\n\t\t\t\t\tstatusLabel.setText(\"Refreshed successfully!\");\n\t\t\t\t\tstatusLabel.setForeground(Color.GREEN);\n\n\t\t\t\t\t// Clear status message after 3 seconds\n\t\t\t\t\tTimer timer \u003d new Timer(3000, e -\u003e {\n\t\t\t\t\t\tstatusLabel.setText(\" \");\n\t\t\t\t\t});\n\t\t\t\t\ttimer.setRepeats(false);\n\t\t\t\t\ttimer.start();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t// Handle error\n\t\t\t\t\tString errorMessage \u003d \"Refresh failed: \";\n\t\t\t\t\tif (\"NOT_FOUND\".equals(response.errorType))\n\t\t\t\t\t{\n\t\t\t\t\t\terrorMessage +\u003d \"Event key not found\";\n\t\t\t\t\t}\n\t\t\t\t\telse if (\"UNAUTHORIZED\".equals(response.errorType))\n\t\t\t\t\t{\n\t\t\t\t\t\terrorMessage +\u003d \"Invalid secret key\";\n\t\t\t\t\t}\n\t\t\t\t\telse if (\"NETWORK_ERROR\".equals(response.errorType))\n\t\t\t\t\t{\n\t\t\t\t\t\terrorMessage +\u003d \"Network error\";\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\terrorMessage +\u003d response.errorMessage;\n\t\t\t\t\t}\n\n\t\t\t\t\tstatusLabel.setText(errorMessage);\n\t\t\t\t\tstatusLabel.setForeground(Color.RED);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n}\n","filePath":"src\\main\\java\\com\\lennyscustomclues\\dialogs\\EventInfoDialog.java"},{"fileName":"LocationConstraintDialog.java","content":"package com.lennyscustomclues.dialogs;\n\nimport com.lennyscustomclues.constraints.LocationConstraint;\nimport net.runelite.api.Client;\nimport net.runelite.api.Player;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.ui.ColorScheme;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.function.Consumer;\n\npublic class LocationConstraintDialog extends JDialog\n{\n\tprivate JComboBox\u003cString\u003e typeCombo;\n\tprivate JPanel dynamicFieldsPanel;\n\tprivate Map\u003cString, JTextField\u003e fields;\n\tprivate Map\u003cString, JLabel\u003e labels;\n\tprivate JLabel coordinatesLabel;\n\tprivate JButton useCurrentLocationButton;\n\tprivate Timer coordinateUpdateTimer;\n\t\n\tprivate LocationConstraint constraint;\n\tprivate Consumer\u003cLocationConstraint\u003e onSave;\n\tprivate Client client;\n\tprivate boolean cancelled \u003d true;\n\n\tpublic LocationConstraintDialog(JFrame parent, LocationConstraint existing, Consumer\u003cLocationConstraint\u003e onSave, Client client)\n\t{\n\t\tsuper(parent, \"Location Constraint\", false); // false \u003d non-modal\n\t\tthis.onSave \u003d onSave;\n\t\tthis.client \u003d client;\n\t\tthis.constraint \u003d existing !\u003d null ? existing : new LocationConstraint(\"exact\");\n\t\tthis.fields \u003d new HashMap\u003c\u003e();\n\t\tthis.labels \u003d new HashMap\u003c\u003e();\n\t\t\n\t\tinitializeUI();\n\t\tpopulateFields();\n\t\tstartCoordinateUpdates();\n\t\tpack();\n\t\tsetLocationRelativeTo(parent);\n\t\tsetAlwaysOnTop(true); // Keep dialog visible above game client\n\t}\n\n\tprivate void initializeUI()\n\t{\n\t\tsetLayout(new BorderLayout());\n\t\tgetContentPane().setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Top panel with type selection and coordinates\n\t\tJPanel topPanel \u003d new JPanel(new BorderLayout());\n\t\ttopPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Type selection\n\t\tJPanel typePanel \u003d new JPanel(new FlowLayout());\n\t\ttypePanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tJLabel typeLabel \u003d new JLabel(\"Type:\");\n\t\ttypeLabel.setForeground(Color.WHITE);\n\t\ttypePanel.add(typeLabel);\n\t\ttypeCombo \u003d new JComboBox\u003c\u003e(new String[]{\"exact\", \"bounds\", \"tolerance\"});\n\t\ttypeCombo.addActionListener(this::onTypeChanged);\n\t\ttypePanel.add(typeCombo);\n\n\t\t// Coordinates display\n\t\tJPanel coordinatesPanel \u003d new JPanel(new FlowLayout());\n\t\tcoordinatesPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tcoordinatesLabel \u003d new JLabel(\"Current Location: Loading...\");\n\t\tcoordinatesLabel.setForeground(Color.CYAN);\n\t\tcoordinatesLabel.setFont(coordinatesLabel.getFont().deriveFont(Font.BOLD));\n\t\tcoordinatesPanel.add(coordinatesLabel);\n\n\t\ttopPanel.add(typePanel, BorderLayout.NORTH);\n\t\ttopPanel.add(coordinatesPanel, BorderLayout.SOUTH);\n\n\t\t// Dynamic fields panel\n\t\tdynamicFieldsPanel \u003d new JPanel(new GridBagLayout());\n\t\tdynamicFieldsPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Create all possible fields\n\t\tcreateFields();\n\n\t\t// Buttons panel\n\t\tJPanel buttonPanel \u003d new JPanel(new FlowLayout());\n\t\tbuttonPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\t\n\t\tJButton saveButton \u003d new JButton(\"Save\");\n\t\tJButton cancelButton \u003d new JButton(\"Cancel\");\n\t\t\n\t\tsaveButton.addActionListener(this::onSave);\n\t\tcancelButton.addActionListener(this::onCancel);\n\t\t\n\t\tbuttonPanel.add(saveButton);\n\t\tbuttonPanel.add(cancelButton);\n\n\t\tadd(topPanel, BorderLayout.NORTH);\n\t\tadd(dynamicFieldsPanel, BorderLayout.CENTER);\n\t\tadd(buttonPanel, BorderLayout.SOUTH);\n\t}\n\n\tprivate void createFields()\n\t{\n\t\t// Create all possible fields\n\t\tfields.put(\"exactX\", createNumberField());\n\t\tfields.put(\"exactY\", createNumberField());\n\t\tfields.put(\"point1X\", createNumberField());\n\t\tfields.put(\"point1Y\", createNumberField());\n\t\tfields.put(\"point2X\", createNumberField());\n\t\tfields.put(\"point2Y\", createNumberField());\n\t\tfields.put(\"plane\", createNumberField());\n\t\tfields.put(\"tolerance\", createNumberField());\n\n\t\t// Create corresponding labels\n\t\tlabels.put(\"exactX\", createLabel(\"Exact X:\"));\n\t\tlabels.put(\"exactY\", createLabel(\"Exact Y:\"));\n\t\tlabels.put(\"point1X\", createLabel(\"Point 1 X:\"));\n\t\tlabels.put(\"point1Y\", createLabel(\"Point 1 Y:\"));\n\t\tlabels.put(\"point2X\", createLabel(\"Point 2 X:\"));\n\t\tlabels.put(\"point2Y\", createLabel(\"Point 2 Y:\"));\n\t\tlabels.put(\"plane\", createLabel(\"Plane (optional):\"));\n\t\tlabels.put(\"tolerance\", createLabel(\"Tolerance:\"));\n\t}\n\n\tprivate JTextField createNumberField()\n\t{\n\t\tJTextField field \u003d new JTextField(20); // Doubled from 10 to 20\n\t\tfield.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tfield.setForeground(Color.WHITE);\n\t\treturn field;\n\t}\n\n\tprivate JLabel createLabel(String text)\n\t{\n\t\tJLabel label \u003d new JLabel(text);\n\t\tlabel.setForeground(Color.WHITE);\n\t\treturn label;\n\t}\n\n\tprivate void populateFields()\n\t{\n\t\ttypeCombo.setSelectedItem(constraint.getType());\n\t\tsetIntegerField(\"exactX\", constraint.getExactX());\n\t\tsetIntegerField(\"exactY\", constraint.getExactY());\n\t\t// Convert min/max to point1/point2 for display\n\t\tsetIntegerField(\"point1X\", constraint.getMinX());\n\t\tsetIntegerField(\"point1Y\", constraint.getMinY());\n\t\tsetIntegerField(\"point2X\", constraint.getMaxX());\n\t\tsetIntegerField(\"point2Y\", constraint.getMaxY());\n\t\tsetIntegerField(\"plane\", constraint.getPlane());\n\t\tsetIntegerField(\"tolerance\", constraint.getTolerance());\n\t\tupdateFieldsVisibility();\n\t}\n\n\tprivate void setIntegerField(String fieldName, Integer value)\n\t{\n\t\tJTextField field \u003d fields.get(fieldName);\n\t\tif (field !\u003d null)\n\t\t{\n\t\t\tfield.setText(value !\u003d null ? value.toString() : \"\");\n\t\t}\n\t}\n\n\tprivate void onTypeChanged(ActionEvent e)\n\t{\n\t\tupdateFieldsVisibility();\n\t\tpack(); // Resize dialog to fit new content\n\t}\n\n\tprivate void updateFieldsVisibility()\n\t{\n\t\tString selectedType \u003d (String) typeCombo.getSelectedItem();\n\n\t\t// Clear the panel\n\t\tdynamicFieldsPanel.removeAll();\n\n\t\tGridBagConstraints gbc \u003d new GridBagConstraints();\n\t\tgbc.insets \u003d new Insets(5, 5, 5, 5);\n\t\tgbc.anchor \u003d GridBagConstraints.WEST;\n\n\t\tint row \u003d 0;\n\n\t\t// Add fields based on selected type\n\t\tswitch (selectedType)\n\t\t{\n\t\t\tcase \"exact\":\n\t\t\t\taddFieldToPanel(gbc, row++, \"exactX\");\n\t\t\t\taddFieldToPanel(gbc, row++, \"exactY\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"bounds\":\n\t\t\t\taddFieldToPanel(gbc, row++, \"point1X\");\n\t\t\t\taddFieldToPanel(gbc, row++, \"point1Y\");\n\n\t\t\t\t// Add \"Use Current Location\" button for Point 1\n\t\t\t\tJButton usePoint1Button \u003d new JButton(\"Use Current Location for Point 1\");\n\t\t\t\tusePoint1Button.addActionListener(e -\u003e onUseCurrentLocationForPoint(1));\n\t\t\t\tgbc.gridx \u003d 0;\n\t\t\t\tgbc.gridy \u003d row++;\n\t\t\t\tgbc.gridwidth \u003d 2;\n\t\t\t\tgbc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\t\t\tgbc.insets \u003d new Insets(5, 5, 10, 5);\n\t\t\t\tdynamicFieldsPanel.add(usePoint1Button, gbc);\n\t\t\t\tgbc.gridwidth \u003d 1;\n\t\t\t\tgbc.insets \u003d new Insets(5, 5, 5, 5);\n\n\t\t\t\taddFieldToPanel(gbc, row++, \"point2X\");\n\t\t\t\taddFieldToPanel(gbc, row++, \"point2Y\");\n\n\t\t\t\t// Add \"Use Current Location\" button for Point 2\n\t\t\t\tJButton usePoint2Button \u003d new JButton(\"Use Current Location for Point 2\");\n\t\t\t\tusePoint2Button.addActionListener(e -\u003e onUseCurrentLocationForPoint(2));\n\t\t\t\tgbc.gridx \u003d 0;\n\t\t\t\tgbc.gridy \u003d row++;\n\t\t\t\tgbc.gridwidth \u003d 2;\n\t\t\t\tgbc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\t\t\tgbc.insets \u003d new Insets(5, 5, 10, 5);\n\t\t\t\tdynamicFieldsPanel.add(usePoint2Button, gbc);\n\t\t\t\tgbc.gridwidth \u003d 1;\n\t\t\t\tgbc.insets \u003d new Insets(5, 5, 5, 5);\n\t\t\t\tbreak;\n\n\t\t\tcase \"tolerance\":\n\t\t\t\taddFieldToPanel(gbc, row++, \"exactX\");\n\t\t\t\taddFieldToPanel(gbc, row++, \"exactY\");\n\t\t\t\taddFieldToPanel(gbc, row++, \"tolerance\");\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Always add plane field (optional for all types)\n\t\taddFieldToPanel(gbc, row++, \"plane\");\n\n\t\t// Add \"Use Current Location\" button for exact and tolerance types\n\t\tif (\"exact\".equals(selectedType) || \"tolerance\".equals(selectedType))\n\t\t{\n\t\t\tuseCurrentLocationButton \u003d new JButton(\"Use Current Location\");\n\t\t\tuseCurrentLocationButton.addActionListener(this::onUseCurrentLocation);\n\n\t\t\tgbc.gridx \u003d 0;\n\t\t\tgbc.gridy \u003d row;\n\t\t\tgbc.gridwidth \u003d 2;\n\t\t\tgbc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\t\tgbc.insets \u003d new Insets(10, 5, 5, 5);\n\t\t\tdynamicFieldsPanel.add(useCurrentLocationButton, gbc);\n\t\t\tgbc.gridwidth \u003d 1;\n\t\t\tgbc.insets \u003d new Insets(5, 5, 5, 5);\n\t\t}\n\n\t\t// Refresh the panel\n\t\tdynamicFieldsPanel.revalidate();\n\t\tdynamicFieldsPanel.repaint();\n\t}\n\n\tprivate void addFieldToPanel(GridBagConstraints gbc, int row, String fieldName)\n\t{\n\t\tJLabel label \u003d labels.get(fieldName);\n\t\tJTextField field \u003d fields.get(fieldName);\n\t\t\n\t\tif (label !\u003d null \u0026\u0026 field !\u003d null)\n\t\t{\n\t\t\t// Add label\n\t\t\tgbc.gridx \u003d 0;\n\t\t\tgbc.gridy \u003d row;\n\t\t\tgbc.fill \u003d GridBagConstraints.NONE;\n\t\t\tdynamicFieldsPanel.add(label, gbc);\n\t\t\t\n\t\t\t// Add field\n\t\t\tgbc.gridx \u003d 1;\n\t\t\tgbc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\t\tgbc.weightx \u003d 1.0;\n\t\t\tdynamicFieldsPanel.add(field, gbc);\n\t\t\tgbc.weightx \u003d 0.0;\n\t\t}\n\t}\n\n\tprivate void onSave(ActionEvent e)\n\t{\n\t\ttry\n\t\t{\n\t\t\tString selectedType \u003d (String) typeCombo.getSelectedItem();\n\t\t\tconstraint.setType(selectedType);\n\t\t\tconstraint.setExactX(parseInteger(\"exactX\"));\n\t\t\tconstraint.setExactY(parseInteger(\"exactY\"));\n\t\t\tconstraint.setPlane(parseInteger(\"plane\"));\n\t\t\tconstraint.setTolerance(parseInteger(\"tolerance\"));\n\n\t\t\t// For bounds type, calculate min/max from the two points\n\t\t\tif (\"bounds\".equals(selectedType))\n\t\t\t{\n\t\t\t\tInteger point1X \u003d parseInteger(\"point1X\");\n\t\t\t\tInteger point1Y \u003d parseInteger(\"point1Y\");\n\t\t\t\tInteger point2X \u003d parseInteger(\"point2X\");\n\t\t\t\tInteger point2Y \u003d parseInteger(\"point2Y\");\n\n\t\t\t\tif (point1X !\u003d null \u0026\u0026 point2X !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tconstraint.setMinX(Math.min(point1X, point2X));\n\t\t\t\t\tconstraint.setMaxX(Math.max(point1X, point2X));\n\t\t\t\t}\n\n\t\t\t\tif (point1Y !\u003d null \u0026\u0026 point2Y !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tconstraint.setMinY(Math.min(point1Y, point2Y));\n\t\t\t\t\tconstraint.setMaxY(Math.max(point1Y, point2Y));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcancelled \u003d false;\n\t\t\tonSave.accept(constraint);\n\t\t\tstopCoordinateUpdates();\n\t\t\tdispose();\n\t\t}\n\t\tcatch (NumberFormatException ex)\n\t\t{\n\t\t\tJOptionPane.showMessageDialog(this, \"Please enter valid numbers\", \"Input Error\", JOptionPane.ERROR_MESSAGE);\n\t\t}\n\t}\n\n\tprivate void onCancel(ActionEvent e)\n\t{\n\t\tcancelled \u003d true;\n\t\tstopCoordinateUpdates();\n\t\tdispose();\n\t}\n\n\tprivate void onUseCurrentLocation(ActionEvent e)\n\t{\n\t\tWorldPoint currentLocation \u003d getCurrentPlayerLocation();\n\t\tif (currentLocation !\u003d null)\n\t\t{\n\t\t\tJTextField exactXField \u003d fields.get(\"exactX\");\n\t\t\tJTextField exactYField \u003d fields.get(\"exactY\");\n\t\t\tJTextField planeField \u003d fields.get(\"plane\");\n\n\t\t\tif (exactXField !\u003d null) exactXField.setText(String.valueOf(currentLocation.getX()));\n\t\t\tif (exactYField !\u003d null) exactYField.setText(String.valueOf(currentLocation.getY()));\n\t\t\tif (planeField !\u003d null) planeField.setText(String.valueOf(currentLocation.getPlane()));\n\t\t}\n\t}\n\n\tprivate void onUseCurrentLocationForPoint(int pointNumber)\n\t{\n\t\tWorldPoint currentLocation \u003d getCurrentPlayerLocation();\n\t\tif (currentLocation !\u003d null)\n\t\t{\n\t\t\tString xFieldName \u003d \"point\" + pointNumber + \"X\";\n\t\t\tString yFieldName \u003d \"point\" + pointNumber + \"Y\";\n\n\t\t\tJTextField xField \u003d fields.get(xFieldName);\n\t\t\tJTextField yField \u003d fields.get(yFieldName);\n\t\t\tJTextField planeField \u003d fields.get(\"plane\");\n\n\t\t\tif (xField !\u003d null) xField.setText(String.valueOf(currentLocation.getX()));\n\t\t\tif (yField !\u003d null) yField.setText(String.valueOf(currentLocation.getY()));\n\t\t\tif (planeField !\u003d null) planeField.setText(String.valueOf(currentLocation.getPlane()));\n\t\t}\n\t}\n\n\tprivate void startCoordinateUpdates()\n\t{\n\t\t// Update coordinates every 500ms\n\t\tcoordinateUpdateTimer \u003d new Timer(500, e -\u003e updateCoordinatesDisplay());\n\t\tcoordinateUpdateTimer.start();\n\t\tupdateCoordinatesDisplay(); // Initial update\n\t}\n\n\tprivate void stopCoordinateUpdates()\n\t{\n\t\tif (coordinateUpdateTimer !\u003d null)\n\t\t{\n\t\t\tcoordinateUpdateTimer.stop();\n\t\t}\n\t}\n\n\tprivate void updateCoordinatesDisplay()\n\t{\n\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\tWorldPoint location \u003d getCurrentPlayerLocation();\n\t\t\tif (location !\u003d null)\n\t\t\t{\n\t\t\t\tcoordinatesLabel.setText(String.format(\"Current Location: X:%d Y:%d Plane:%d\", \n\t\t\t\t\tlocation.getX(), location.getY(), location.getPlane()));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcoordinatesLabel.setText(\"Current Location: Not available\");\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate WorldPoint getCurrentPlayerLocation()\n\t{\n\t\tif (client \u003d\u003d null) return null;\n\t\t\n\t\tPlayer player \u003d client.getLocalPlayer();\n\t\tif (player \u003d\u003d null) return null;\n\t\t\n\t\treturn player.getWorldLocation();\n\t}\n\n\tprivate Integer parseInteger(String fieldName)\n\t{\n\t\tJTextField field \u003d fields.get(fieldName);\n\t\tif (field \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\t\n\t\tString text \u003d field.getText();\n\t\tif (text \u003d\u003d null || text.trim().isEmpty())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\treturn Integer.parseInt(text.trim());\n\t}\n\n\tpublic boolean wasCancelled()\n\t{\n\t\treturn cancelled;\n\t}\n\n\t@Override\n\tpublic void dispose()\n\t{\n\t\tstopCoordinateUpdates();\n\t\tsuper.dispose();\n\t}\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\dialogs\\LocationConstraintDialog.java"},{"fileName":"ManageEventDialog.java","content":"package com.lennyscustomclues.dialogs;\n\nimport com.lennyscustomclues.ApiClient;\nimport net.runelite.api.Client;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\n\nimport javax.swing.*;\nimport java.awt.*;\n\npublic class ManageEventDialog extends JDialog\n{\n\tprivate ApiClient apiClient;\n\tprivate Client client;\n\tprivate JFrame parentFrame;\n\n\tprivate JTextField eventKeyField;\n\tprivate JTextField secretKeyField;\n\tprivate JButton submitButton;\n\tprivate JButton cancelButton;\n\tprivate JLabel statusLabel;\n\n\tpublic ManageEventDialog(JFrame parent, Client client, ApiClient apiClient)\n\t{\n\t\tsuper(parent, \"Manage Existing Event\", true);\n\t\tthis.parentFrame \u003d parent;\n\t\tthis.client \u003d client;\n\t\tthis.apiClient \u003d apiClient;\n\n\t\tinitializeUI();\n\t\tpack();\n\t\tsetMinimumSize(new Dimension(400, 200));\n\t\tsetLocationRelativeTo(parent);\n\t}\n\n\tprivate void initializeUI()\n\t{\n\t\tsetLayout(new BorderLayout());\n\t\tgetContentPane().setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Title\n\t\tJLabel titleLabel \u003d new JLabel(\"Enter Event Credentials\");\n\t\ttitleLabel.setForeground(Color.WHITE);\n\t\ttitleLabel.setFont(FontManager.getRunescapeFont());\n\t\ttitleLabel.setHorizontalAlignment(SwingConstants.CENTER);\n\t\ttitleLabel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n\n\t\t// Main content panel\n\t\tJPanel mainPanel \u003d new JPanel(new GridBagLayout());\n\t\tmainPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tmainPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n\n\t\tGridBagConstraints gbc \u003d new GridBagConstraints();\n\t\tgbc.insets \u003d new Insets(5, 5, 5, 5);\n\t\tgbc.anchor \u003d GridBagConstraints.WEST;\n\n\t\t// Event Key label and field\n\t\tJLabel eventKeyLabel \u003d new JLabel(\"Event Key:\");\n\t\teventKeyLabel.setForeground(Color.WHITE);\n\t\tgbc.gridx \u003d 0;\n\t\tgbc.gridy \u003d 0;\n\t\tgbc.fill \u003d GridBagConstraints.NONE;\n\t\tmainPanel.add(eventKeyLabel, gbc);\n\n\t\teventKeyField \u003d new JTextField(20);\n\t\teventKeyField.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\teventKeyField.setForeground(Color.WHITE);\n\t\tgbc.gridx \u003d 1;\n\t\tgbc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\tgbc.weightx \u003d 1.0;\n\t\tmainPanel.add(eventKeyField, gbc);\n\n\t\t// Secret Key label and field\n\t\tJLabel secretKeyLabel \u003d new JLabel(\"Secret Key:\");\n\t\tsecretKeyLabel.setForeground(Color.WHITE);\n\t\tgbc.gridx \u003d 0;\n\t\tgbc.gridy \u003d 1;\n\t\tgbc.fill \u003d GridBagConstraints.NONE;\n\t\tgbc.weightx \u003d 0.0;\n\t\tmainPanel.add(secretKeyLabel, gbc);\n\n\t\tsecretKeyField \u003d new JTextField(20);\n\t\tsecretKeyField.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tsecretKeyField.setForeground(Color.WHITE);\n\t\tgbc.gridx \u003d 1;\n\t\tgbc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\tgbc.weightx \u003d 1.0;\n\t\tmainPanel.add(secretKeyField, gbc);\n\n\t\t// Bottom panel containing buttons and status\n\t\tJPanel bottomPanel \u003d new JPanel();\n\t\tbottomPanel.setLayout(new BoxLayout(bottomPanel, BoxLayout.Y_AXIS));\n\t\tbottomPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Buttons panel\n\t\tJPanel buttonPanel \u003d new JPanel(new FlowLayout(FlowLayout.CENTER));\n\t\tbuttonPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tsubmitButton \u003d new JButton(\"Load Event\");\n\t\tsubmitButton.addActionListener(e -\u003e onSubmit());\n\t\tbuttonPanel.add(submitButton);\n\n\t\tcancelButton \u003d new JButton(\"Cancel\");\n\t\tcancelButton.addActionListener(e -\u003e dispose());\n\t\tbuttonPanel.add(cancelButton);\n\n\t\t// Status label\n\t\tstatusLabel \u003d new JLabel(\" \");\n\t\tstatusLabel.setForeground(Color.WHITE);\n\t\tstatusLabel.setHorizontalAlignment(SwingConstants.CENTER);\n\t\tstatusLabel.setBorder(BorderFactory.createEmptyBorder(5, 10, 5, 10));\n\n\t\tbottomPanel.add(buttonPanel);\n\t\tbottomPanel.add(statusLabel);\n\n\t\tadd(titleLabel, BorderLayout.NORTH);\n\t\tadd(mainPanel, BorderLayout.CENTER);\n\t\tadd(bottomPanel, BorderLayout.SOUTH);\n\t}\n\n\tprivate void onSubmit()\n\t{\n\t\tString eventKey \u003d eventKeyField.getText().trim();\n\t\tString secretKey \u003d secretKeyField.getText().trim();\n\n\t\tif (eventKey.isEmpty())\n\t\t{\n\t\t\tstatusLabel.setText(\"Event key is required\");\n\t\t\tstatusLabel.setForeground(Color.RED);\n\t\t\treturn;\n\t\t}\n\n\t\tif (secretKey.isEmpty())\n\t\t{\n\t\t\tstatusLabel.setText(\"Secret key is required\");\n\t\t\tstatusLabel.setForeground(Color.RED);\n\t\t\treturn;\n\t\t}\n\n\t\t// Disable buttons while loading\n\t\tsubmitButton.setEnabled(false);\n\t\tstatusLabel.setText(\"Loading event...\");\n\t\tstatusLabel.setForeground(Color.YELLOW);\n\n\t\t// Make API request to get the answer\n\t\tapiClient.getAnswer(eventKey, secretKey).thenAccept(response -\u003e {\n\t\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\t\tsubmitButton.setEnabled(true);\n\n\t\t\t\tif (response.isSuccess())\n\t\t\t\t{\n\t\t\t\t\t// Successfully retrieved the answer - open the event info dialog\n\t\t\t\t\tstatusLabel.setText(\"Event loaded successfully!\");\n\t\t\t\t\tstatusLabel.setForeground(Color.GREEN);\n\n\t\t\t\t\t// Close this dialog\n\t\t\t\t\tdispose();\n\n\t\t\t\t\t// Open the event info dialog to show answer summary and solvers\n\t\t\t\t\tEventInfoDialog eventInfoDialog \u003d new EventInfoDialog(\n\t\t\t\t\t\tparentFrame,\n\t\t\t\t\t\tclient,\n\t\t\t\t\t\tapiClient,\n\t\t\t\t\t\teventKey,\n\t\t\t\t\t\tsecretKey,\n\t\t\t\t\t\tresponse.reward_text,\n\t\t\t\t\t\tresponse.constraints,\n\t\t\t\t\t\tresponse.completed_by\n\t\t\t\t\t);\n\t\t\t\t\teventInfoDialog.setVisible(true);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t// Handle error\n\t\t\t\t\tString errorMessage \u003d \"Failed to load event: \";\n\t\t\t\t\tif (\"NOT_FOUND\".equals(response.errorType))\n\t\t\t\t\t{\n\t\t\t\t\t\terrorMessage +\u003d \"Event key not found\";\n\t\t\t\t\t}\n\t\t\t\t\telse if (\"UNAUTHORIZED\".equals(response.errorType))\n\t\t\t\t\t{\n\t\t\t\t\t\terrorMessage +\u003d \"Invalid secret key\";\n\t\t\t\t\t}\n\t\t\t\t\telse if (\"NETWORK_ERROR\".equals(response.errorType))\n\t\t\t\t\t{\n\t\t\t\t\t\terrorMessage +\u003d \"Network error\";\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\terrorMessage +\u003d response.errorMessage;\n\t\t\t\t\t}\n\n\t\t\t\t\tstatusLabel.setText(errorMessage);\n\t\t\t\t\tstatusLabel.setForeground(Color.RED);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n}\n","filePath":"src\\main\\java\\com\\lennyscustomclues\\dialogs\\ManageEventDialog.java"},{"fileName":"SubmitAnswerDialog.java","content":"package com.lennyscustomclues.dialogs;\n\nimport com.lennyscustomclues.AnswerBuilder;\nimport com.lennyscustomclues.ApiClient;\nimport com.lennyscustomclues.EmoteData;\nimport net.runelite.client.ui.ColorScheme;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.util.function.BiConsumer;\n\npublic class SubmitAnswerDialog extends JDialog\n{\n\tprivate JTextField eventKeyField;\n\tprivate JTextField secretKeyField;\n\tprivate JButton validateKeyButton;\n\tprivate JButton submitButton;\n\tprivate JButton cancelButton;\n\tprivate JLabel validationStatusLabel;\n\n\tprivate AnswerBuilder answerBuilder;\n\tprivate ApiClient apiClient;\n\tprivate BiConsumer\u003cString, String\u003e onSubmit;\n\tprivate boolean cancelled \u003d true;\n\tprivate boolean keyValidated \u003d false;\n\n\tpublic SubmitAnswerDialog(JFrame parent, AnswerBuilder answerBuilder, ApiClient apiClient, BiConsumer\u003cString, String\u003e onSubmit)\n\t{\n\t\tsuper(parent, \"Submit Answer to Server\", false); // Non-modal\n\t\tthis.answerBuilder \u003d answerBuilder;\n\t\tthis.apiClient \u003d apiClient;\n\t\tthis.onSubmit \u003d onSubmit;\n\t\t\n\t\tinitializeUI();\n\t\tpack();\n\t\tsetLocationRelativeTo(parent);\n\t\tsetAlwaysOnTop(true);\n\t}\n\n\tprivate void initializeUI()\n\t{\n\t\tsetLayout(new BorderLayout());\n\t\tgetContentPane().setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Main content panel\n\t\tJPanel mainPanel \u003d new JPanel();\n\t\tmainPanel.setLayout(new BoxLayout(mainPanel, BoxLayout.Y_AXIS));\n\t\tmainPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tmainPanel.setBorder(BorderFactory.createEmptyBorder(15, 15, 15, 15));\n\n\t\t// Title/instructions\n\t\tJLabel titleLabel \u003d new JLabel(\"Submit Answer to Server\");\n\t\ttitleLabel.setForeground(Color.WHITE);\n\t\ttitleLabel.setFont(titleLabel.getFont().deriveFont(Font.BOLD, 14f));\n\t\ttitleLabel.setAlignmentX(Component.CENTER_ALIGNMENT);\n\n\t\tJLabel instructionLabel \u003d new JLabel(\"\u003chtml\u003e\u003cdiv style\u003d\u0027text-align: center;\u0027\u003eEnter an event key to associate with this answer.\u003cbr/\u003eThe key must be unique and not already in use.\u003c/div\u003e\u003c/html\u003e\");\n\t\tinstructionLabel.setForeground(Color.LIGHT_GRAY);\n\t\tinstructionLabel.setAlignmentX(Component.CENTER_ALIGNMENT);\n\n\t\t// Answer summary\n\t\tJPanel summaryPanel \u003d new JPanel(new BorderLayout());\n\t\tsummaryPanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tsummaryPanel.setBorder(BorderFactory.createTitledBorder(\"Answer Summary\"));\n\t\tsummaryPanel.setMaximumSize(new Dimension(Integer.MAX_VALUE, 150));\n\n\t\tString rewardText \u003d answerBuilder.getRewardText();\n\t\tif (rewardText \u003d\u003d null || rewardText.trim().isEmpty())\n\t\t{\n\t\t\trewardText \u003d \"(No reward text specified)\";\n\t\t}\n\n\t\t// Build human-readable constraint descriptions\n\t\tStringBuilder summaryBuilder \u003d new StringBuilder();\n\t\tsummaryBuilder.append(\"Reward: \").append(rewardText).append(\"\\n\\n\");\n\n\t\tif (answerBuilder.getConstraintCount() \u003d\u003d 0)\n\t\t{\n\t\t\tsummaryBuilder.append(\"No constraints defined\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Check if there\u0027s an emote constraint\n\t\t\tString requiredAction \u003d \"Dig with a spade\";\n\t\t\tfor (int i \u003d 0; i \u003c answerBuilder.getConstraintCount(); i++)\n\t\t\t{\n\t\t\t\tcom.lennyscustomclues.constraints.Constraint constraint \u003d answerBuilder.getConstraint(i);\n\t\t\t\tif (constraint instanceof com.lennyscustomclues.constraints.ActionConstraint)\n\t\t\t\t{\n\t\t\t\t\tcom.lennyscustomclues.constraints.ActionConstraint actionConstraint \u003d\n\t\t\t\t\t\t(com.lennyscustomclues.constraints.ActionConstraint) constraint;\n\t\t\t\t\tif (\"emote\".equals(actionConstraint.getType()) \u0026\u0026 actionConstraint.getEmoteId() !\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tString emoteName \u003d EmoteData.getEmoteName(actionConstraint.getEmoteId());\n\t\t\t\t\t\trequiredAction \u003d \"Perform an Emote: \" + emoteName;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tsummaryBuilder.append(\"Required Action: \").append(requiredAction).append(\"\\n\");\n\n\t\t\tfor (int i \u003d 0; i \u003c answerBuilder.getConstraintCount(); i++)\n\t\t\t{\n\t\t\t\tcom.lennyscustomclues.constraints.Constraint constraint \u003d answerBuilder.getConstraint(i);\n\t\t\t\tif (constraint instanceof com.lennyscustomclues.constraints.LocationConstraint)\n\t\t\t\t{\n\t\t\t\t\tsummaryBuilder.append(getLocationConstraintDescription((com.lennyscustomclues.constraints.LocationConstraint) constraint));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tJTextArea summaryArea \u003d new JTextArea(summaryBuilder.toString());\n\t\tsummaryArea.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tsummaryArea.setForeground(Color.WHITE);\n\t\tsummaryArea.setEditable(false);\n\t\tsummaryArea.setLineWrap(true);\n\t\tsummaryArea.setWrapStyleWord(true);\n\t\tJScrollPane summaryScroll \u003d new JScrollPane(summaryArea);\n\t\tsummaryPanel.add(summaryScroll, BorderLayout.CENTER);\n\n\t\t// Event key input panel\n\t\tJPanel eventKeyPanel \u003d new JPanel(new BorderLayout());\n\t\teventKeyPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\teventKeyPanel.setBorder(BorderFactory.createTitledBorder(\"Event Key\"));\n\n\t\teventKeyField \u003d new JTextField(20);\n\t\teventKeyField.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\teventKeyField.setForeground(Color.WHITE);\n\t\teventKeyField.getDocument().addDocumentListener(new javax.swing.event.DocumentListener() {\n\t\t\tpublic void insertUpdate(javax.swing.event.DocumentEvent e) { onEventKeyChanged(); }\n\t\t\tpublic void removeUpdate(javax.swing.event.DocumentEvent e) { onEventKeyChanged(); }\n\t\t\tpublic void changedUpdate(javax.swing.event.DocumentEvent e) { onEventKeyChanged(); }\n\t\t});\n\n\t\tvalidateKeyButton \u003d new JButton(\"Validate Key\");\n\t\tvalidateKeyButton.addActionListener(this::onValidateKey);\n\t\tvalidateKeyButton.setEnabled(false);\n\n\t\tJPanel keyInputPanel \u003d new JPanel(new BorderLayout());\n\t\tkeyInputPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tkeyInputPanel.add(eventKeyField, BorderLayout.CENTER);\n\t\tkeyInputPanel.add(validateKeyButton, BorderLayout.EAST);\n\n\t\tvalidationStatusLabel \u003d new JLabel(\" \");\n\t\tvalidationStatusLabel.setForeground(Color.GRAY);\n\n\t\teventKeyPanel.add(keyInputPanel, BorderLayout.NORTH);\n\t\teventKeyPanel.add(validationStatusLabel, BorderLayout.SOUTH);\n\n\t\t// Secret key input panel\n\t\tJPanel secretKeyPanel \u003d new JPanel(new BorderLayout());\n\t\tsecretKeyPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tsecretKeyPanel.setBorder(BorderFactory.createTitledBorder(\"Secret Key (Optional)\"));\n\n\t\tsecretKeyField \u003d new JTextField(20);\n\t\tsecretKeyField.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tsecretKeyField.setForeground(Color.WHITE);\n\n\t\tJLabel secretKeyInfoLabel \u003d new JLabel(\"\u003chtml\u003e\u003ci\u003eUsed to retrieve and update this answer later\u003c/i\u003e\u003c/html\u003e\");\n\t\tsecretKeyInfoLabel.setForeground(Color.LIGHT_GRAY);\n\t\tsecretKeyInfoLabel.setFont(secretKeyInfoLabel.getFont().deriveFont(11f));\n\n\t\tsecretKeyPanel.add(secretKeyField, BorderLayout.NORTH);\n\t\tsecretKeyPanel.add(secretKeyInfoLabel, BorderLayout.SOUTH);\n\n\t\t// Button panel\n\t\tJPanel buttonPanel \u003d new JPanel(new FlowLayout());\n\t\tbuttonPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tsubmitButton \u003d new JButton(\"Submit Answer\");\n\t\tsubmitButton.addActionListener(this::onSubmit);\n\t\tsubmitButton.setEnabled(false); // Initially disabled\n\n\t\tcancelButton \u003d new JButton(\"Cancel\");\n\t\tcancelButton.addActionListener(this::onCancel);\n\n\t\tbuttonPanel.add(submitButton);\n\t\tbuttonPanel.add(cancelButton);\n\n\t\t// Add all components\n\t\tmainPanel.add(titleLabel);\n\t\tmainPanel.add(Box.createVerticalStrut(10));\n\t\tmainPanel.add(instructionLabel);\n\t\tmainPanel.add(Box.createVerticalStrut(15));\n\t\tmainPanel.add(summaryPanel);\n\t\tmainPanel.add(Box.createVerticalStrut(15));\n\t\tmainPanel.add(eventKeyPanel);\n\t\tmainPanel.add(Box.createVerticalStrut(10));\n\t\tmainPanel.add(secretKeyPanel);\n\n\t\tadd(mainPanel, BorderLayout.CENTER);\n\t\tadd(buttonPanel, BorderLayout.SOUTH);\n\t}\n\n\tprivate void onEventKeyChanged()\n\t{\n\t\tString eventKey \u003d eventKeyField.getText().trim();\n\t\tkeyValidated \u003d false;\n\t\tvalidationStatusLabel.setText(\" \");\n\t\tvalidationStatusLabel.setForeground(Color.GRAY);\n\t\t\n\t\tvalidateKeyButton.setEnabled(!eventKey.isEmpty());\n\t\tsubmitButton.setEnabled(false);\n\t}\n\n\tprivate void onValidateKey(ActionEvent e)\n\t{\n\t\tString eventKey \u003d eventKeyField.getText().trim();\n\t\tif (eventKey.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tvalidateKeyButton.setEnabled(false);\n\t\tvalidationStatusLabel.setText(\"Validating key...\");\n\t\tvalidationStatusLabel.setForeground(Color.YELLOW);\n\n\t\t// Validate the key with the API\n\t\tapiClient.validateEventKey(eventKey).thenAccept(response -\u003e {\n\t\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\t\tif (response.success)\n\t\t\t\t{\n\t\t\t\t\t// 200 response means key already exists - NOT available for new answer\n\t\t\t\t\tkeyValidated \u003d false;\n\t\t\t\t\tvalidationStatusLabel.setText(\" Key already exists\");\n\t\t\t\t\tvalidationStatusLabel.setForeground(Color.RED);\n\t\t\t\t\tsubmitButton.setEnabled(false);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t// Non-success response\n\t\t\t\t\tif (\"KEY_NOT_FOUND\".equals(response.errorType))\n\t\t\t\t\t{\n\t\t\t\t\t\t// 404 means key doesn\u0027t exist - GOOD for creating new answer\n\t\t\t\t\t\tkeyValidated \u003d true;\n\t\t\t\t\t\tvalidationStatusLabel.setText(\" Key is available\");\n\t\t\t\t\t\tvalidationStatusLabel.setForeground(Color.GREEN);\n\t\t\t\t\t\tsubmitButton.setEnabled(true);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t// Other error (server error, network error, etc.)\n\t\t\t\t\t\tkeyValidated \u003d false;\n\t\t\t\t\t\tvalidationStatusLabel.setText(\" \" + response.message);\n\t\t\t\t\t\tvalidationStatusLabel.setForeground(Color.RED);\n\t\t\t\t\t\tsubmitButton.setEnabled(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvalidateKeyButton.setEnabled(true);\n\t\t\t});\n\t\t});\n\t}\n\n\tprivate void onSubmit(ActionEvent e)\n\t{\n\t\tif (!keyValidated)\n\t\t{\n\t\t\tJOptionPane.showMessageDialog(this, \"Please validate the event key first.\", \"Validation Required\", JOptionPane.WARNING_MESSAGE);\n\t\t\treturn;\n\t\t}\n\n\t\tString eventKey \u003d eventKeyField.getText().trim();\n\t\tif (eventKey.isEmpty())\n\t\t{\n\t\t\tJOptionPane.showMessageDialog(this, \"Please enter an event key.\", \"Event Key Required\", JOptionPane.WARNING_MESSAGE);\n\t\t\treturn;\n\t\t}\n\n\t\tString secretKey \u003d secretKeyField.getText().trim();\n\n\t\t// Warn if no secret key is provided\n\t\tif (secretKey.isEmpty())\n\t\t{\n\t\t\tint result \u003d JOptionPane.showConfirmDialog(\n\t\t\t\tthis,\n\t\t\t\t\"You have not set a secret key for this event, which means you won\u0027t be able to inspect or update the answer in any way after creation.\\n\\nAre you sure you don\u0027t want to set a secret key?\",\n\t\t\t\t\"No Secret Key Set\",\n\t\t\t\tJOptionPane.YES_NO_OPTION,\n\t\t\t\tJOptionPane.WARNING_MESSAGE\n\t\t\t);\n\n\t\t\tif (result !\u003d JOptionPane.YES_OPTION)\n\t\t\t{\n\t\t\t\treturn; // User chose not to proceed\n\t\t\t}\n\t\t}\n\n\t\tcancelled \u003d false;\n\t\tonSubmit.accept(eventKey, secretKey);\n\t\tdispose();\n\t}\n\n\tprivate void onCancel(ActionEvent e)\n\t{\n\t\tcancelled \u003d true;\n\t\tdispose();\n\t}\n\n\tpublic boolean wasCancelled()\n\t{\n\t\treturn cancelled;\n\t}\n\n\tprivate String getLocationConstraintDescription(com.lennyscustomclues.constraints.LocationConstraint constraint)\n\t{\n\t\tStringBuilder desc \u003d new StringBuilder();\n\t\tString type \u003d constraint.getType();\n\n\t\tswitch (type)\n\t\t{\n\t\t\tcase \"exact\":\n\t\t\t\tdesc.append(\"Location: Exact tile (\");\n\t\t\t\tdesc.append(\"X: \").append(constraint.getExactX());\n\t\t\t\tdesc.append(\", Y: \").append(constraint.getExactY());\n\t\t\t\tif (constraint.getPlane() !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tdesc.append(\", Plane: \").append(constraint.getPlane());\n\t\t\t\t}\n\t\t\t\tdesc.append(\")\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"bounds\":\n\t\t\t\tdesc.append(\"Location: Within rectangle (\");\n\t\t\t\tdesc.append(\"X: \").append(constraint.getMinX()).append(\"-\").append(constraint.getMaxX());\n\t\t\t\tdesc.append(\", Y: \").append(constraint.getMinY()).append(\"-\").append(constraint.getMaxY());\n\t\t\t\tif (constraint.getPlane() !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tdesc.append(\", Plane: \").append(constraint.getPlane());\n\t\t\t\t}\n\t\t\t\tdesc.append(\")\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"tolerance\":\n\t\t\t\tdesc.append(\"Location: Near tile (\");\n\t\t\t\tdesc.append(\"X: \").append(constraint.getExactX());\n\t\t\t\tdesc.append(\", Y: \").append(constraint.getExactY());\n\t\t\t\tif (constraint.getTolerance() !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tdesc.append(\", within \").append(constraint.getTolerance()).append(\" tiles\");\n\t\t\t\t}\n\t\t\t\tif (constraint.getPlane() !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tdesc.append(\", Plane: \").append(constraint.getPlane());\n\t\t\t\t}\n\t\t\t\tdesc.append(\")\");\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tdesc.append(\"Location: \").append(constraint.description());\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn desc.toString();\n\t}\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\dialogs\\SubmitAnswerDialog.java"},{"fileName":"EmoteData.java","content":"package com.lennyscustomclues;\n\nimport java.util.LinkedHashMap;\nimport java.util.Map;\n\npublic class EmoteData\n{\n\tprivate static final Map\u003cString, Integer\u003e EMOTES \u003d new LinkedHashMap\u003c\u003e();\n\n\tstatic\n\t{\n\t\tEMOTES.put(\"Yes\", 855);\n\t\tEMOTES.put(\"No\", 856);\n\t\tEMOTES.put(\"Bow\", 858);\n\t\tEMOTES.put(\"Angry\", 859);\n\t\tEMOTES.put(\"Think\", 857);\n\t\tEMOTES.put(\"Wave\", 863);\n\t\tEMOTES.put(\"Shrug\", 2113);\n\t\tEMOTES.put(\"Cheer\", 862);\n\t\tEMOTES.put(\"Beckon\", 864);\n\t\tEMOTES.put(\"Laugh\", 861);\n\t\tEMOTES.put(\"Jump for Joy\", 2109);\n\t\tEMOTES.put(\"Yawn\", 2111);\n\t\tEMOTES.put(\"Dance\", 866);\n\t\tEMOTES.put(\"Jig\", 2106);\n\t\tEMOTES.put(\"Spin\", 2107);\n\t\tEMOTES.put(\"Headbang\", 2108);\n\t\tEMOTES.put(\"Cry\", 860);\n\t\tEMOTES.put(\"Blow Kiss\", 1374);\n\t\tEMOTES.put(\"Panic\", 2105);\n\t\tEMOTES.put(\"Raspberry\", 2110);\n\t\tEMOTES.put(\"Clap\", 865);\n\t\tEMOTES.put(\"Salute\", 2112);\n\t\tEMOTES.put(\"Goblin Bow\", 2127);\n\t\tEMOTES.put(\"Goblin Salute\", 2128);\n\t\tEMOTES.put(\"Glass Box\", 1131);\n\t\tEMOTES.put(\"Climb Rope\", 1130);\n\t\tEMOTES.put(\"Lean\", 1129);\n\t\tEMOTES.put(\"Glass Wall\", 1128);\n\t\tEMOTES.put(\"Idea\", 4276);\n\t\tEMOTES.put(\"Stamp\", 4278);\n\t\tEMOTES.put(\"Flap\", 4280);\n\t\tEMOTES.put(\"Slap Head\", 4275);\n\t\tEMOTES.put(\"Zombie Walk\", 3544);\n\t\tEMOTES.put(\"Zombie Dance\", 3543);\n\t\tEMOTES.put(\"Scared\", 2836);\n\t\tEMOTES.put(\"Rabbit Hop\", 6111);\n\t\tEMOTES.put(\"Sit up\", 874);\n\t\tEMOTES.put(\"Push up\", 872);\n\t\tEMOTES.put(\"Star jump\", 870);\n\t\tEMOTES.put(\"Jog\", 868);\n\t\tEMOTES.put(\"Flex\", 8917);\n\t\tEMOTES.put(\"Zombie Hand\", 1708);\n\t\tEMOTES.put(\"Hypermobile Drinker\", 7131);\n\t\tEMOTES.put(\"Smooth dance\", 7533);\n\t\tEMOTES.put(\"Crazy dance\", 7537);\n\t\tEMOTES.put(\"Premier Shield\", 7751);\n\t\tEMOTES.put(\"Party\", 10031);\n\t\tEMOTES.put(\"Trick\", 10503);\n\t\tEMOTES.put(\"Fortis Salute\", 10796);\n\t\tEMOTES.put(\"Sit down\", 10061);\n\t}\n\n\tpublic static Map\u003cString, Integer\u003e getEmotes()\n\t{\n\t\treturn EMOTES;\n\t}\n\n\tpublic static String getEmoteName(int emoteId)\n\t{\n\t\tfor (Map.Entry\u003cString, Integer\u003e entry : EMOTES.entrySet())\n\t\t{\n\t\t\tif (entry.getValue() \u003d\u003d emoteId)\n\t\t\t{\n\t\t\t\treturn entry.getKey();\n\t\t\t}\n\t\t}\n\t\treturn \"Unknown Emote\";\n\t}\n\n\tpublic static Integer getEmoteId(String emoteName)\n\t{\n\t\treturn EMOTES.get(emoteName);\n\t}\n}\n","filePath":"src\\main\\java\\com\\lennyscustomclues\\EmoteData.java"},{"fileName":"EventKeyDialog.java","content":"package com.lennyscustomclues;\n\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.KeyEvent;\nimport java.util.function.Consumer;\n\npublic class EventKeyDialog extends JDialog\n{\n\tprivate final JTextField eventKeyField;\n\tprivate final JButton submitButton;\n\tprivate final JButton cancelButton;\n\tprivate final JLabel statusLabel;\n\tprivate final Consumer\u003cString\u003e onEventKeySet;\n\tprivate final ApiClient apiClient;\n\tprivate boolean submitted \u003d false;\n\tprivate boolean validating \u003d false;\n\n\tpublic EventKeyDialog(JFrame parent, String currentEventKey, boolean isChanging, Consumer\u003cString\u003e onEventKeySet, ApiClient apiClient)\n\t{\n\t\tsuper(parent, isChanging ? \"Change Event Key\" : \"Set Event Key\", true);\n\t\tthis.onEventKeySet \u003d onEventKeySet;\n\t\tthis.apiClient \u003d apiClient;\n\n\t\t// Setup dialog properties\n\t\tsetDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);\n\t\tsetResizable(false);\n\n\t\t// Create components\n\t\tJPanel mainPanel \u003d new JPanel();\n\t\tmainPanel.setLayout(new BorderLayout(10, 10));\n\t\tmainPanel.setBorder(BorderFactory.createEmptyBorder(15, 15, 15, 15));\n\t\tmainPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Title label\n\t\tJLabel titleLabel \u003d new JLabel(\"Enter event key:\");\n\t\ttitleLabel.setFont(FontManager.getRunescapeFont());\n\t\ttitleLabel.setForeground(Color.WHITE);\n\n\t\t// Text field\n\t\teventKeyField \u003d new JTextField(20);\n\t\teventKeyField.setFont(FontManager.getRunescapeFont());\n\t\teventKeyField.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\teventKeyField.setForeground(Color.WHITE);\n\t\teventKeyField.setCaretColor(Color.WHITE);\n\t\teventKeyField.setBorder(BorderFactory.createCompoundBorder(\n\t\t\tBorderFactory.createLineBorder(ColorScheme.MEDIUM_GRAY_COLOR),\n\t\t\tBorderFactory.createEmptyBorder(5, 5, 5, 5)\n\t\t));\n\n\t\t// Pre-fill if changing\n\t\tif (isChanging \u0026\u0026 currentEventKey !\u003d null)\n\t\t{\n\t\t\teventKeyField.setText(currentEventKey);\n\t\t\teventKeyField.selectAll();\n\t\t}\n\n\t\t// Status label for validation feedback\n\t\tstatusLabel \u003d new JLabel(\" \"); // Space to maintain height\n\t\tstatusLabel.setFont(FontManager.getRunescapeSmallFont());\n\t\tstatusLabel.setHorizontalAlignment(SwingConstants.CENTER);\n\n\t\t// Buttons\n\t\tJPanel buttonPanel \u003d new JPanel(new FlowLayout(FlowLayout.RIGHT, 10, 0));\n\t\tbuttonPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tcancelButton \u003d new JButton(\"Cancel\");\n\t\tstyleButton(cancelButton);\n\t\tcancelButton.addActionListener(this::onCancelClick);\n\n\t\tsubmitButton \u003d new JButton(\"Submit\");\n\t\tstyleButton(submitButton);\n\t\tsubmitButton.addActionListener(this::onSubmitClick);\n\n\t\tbuttonPanel.add(cancelButton);\n\t\tbuttonPanel.add(submitButton);\n\n\t\t// Layout\n\t\tJPanel inputPanel \u003d new JPanel(new BorderLayout(0, 5));\n\t\tinputPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tinputPanel.add(titleLabel, BorderLayout.NORTH);\n\t\tinputPanel.add(eventKeyField, BorderLayout.CENTER);\n\t\tinputPanel.add(statusLabel, BorderLayout.SOUTH);\n\n\t\tmainPanel.add(inputPanel, BorderLayout.CENTER);\n\t\tmainPanel.add(buttonPanel, BorderLayout.SOUTH);\n\n\t\tadd(mainPanel);\n\n\t\t// Setup keyboard shortcuts\n\t\tsetupKeyBindings();\n\n\t\t// Pack and center\n\t\tpack();\n\t\tsetLocationRelativeTo(parent);\n\n\t\t// Focus text field\n\t\tSwingUtilities.invokeLater(() -\u003e eventKeyField.requestFocusInWindow());\n\t}\n\n\tprivate void styleButton(JButton button)\n\t{\n\t\tbutton.setFont(FontManager.getRunescapeFont());\n\t\tbutton.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tbutton.setForeground(Color.WHITE);\n\t\tbutton.setBorder(BorderFactory.createCompoundBorder(\n\t\t\tBorderFactory.createLineBorder(ColorScheme.MEDIUM_GRAY_COLOR),\n\t\t\tBorderFactory.createEmptyBorder(5, 15, 5, 15)\n\t\t));\n\t\tbutton.setFocusPainted(false);\n\t}\n\n\tprivate void setupKeyBindings()\n\t{\n\t\t// Enter key submits\n\t\teventKeyField.addActionListener(this::onSubmitClick);\n\n\t\t// Escape key cancels\n\t\tgetRootPane().registerKeyboardAction(\n\t\t\tthis::onCancelClick,\n\t\t\tKeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE, 0),\n\t\t\tJComponent.WHEN_IN_FOCUSED_WINDOW\n\t\t);\n\n\t\t// Make Submit the default button\n\t\tgetRootPane().setDefaultButton(submitButton);\n\t}\n\n\tprivate void onSubmitClick(ActionEvent e)\n\t{\n\t\tif (validating)\n\t\t{\n\t\t\treturn; // Ignore if already validating\n\t\t}\n\n\t\tString eventKey \u003d eventKeyField.getText().trim();\n\t\t\n\t\tif (eventKey.isEmpty())\n\t\t{\n\t\t\tsetStatusMessage(\"Event key cannot be empty.\", true);\n\t\t\teventKeyField.requestFocusInWindow();\n\t\t\treturn;\n\t\t}\n\n\t\t// Start validation\n\t\tvalidating \u003d true;\n\t\tsetButtonsEnabled(false);\n\t\tsetStatusMessage(\"Validating event key...\", false);\n\n\t\tapiClient.validateEventKey(eventKey).thenAccept(response -\u003e {\n\t\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\t\tvalidating \u003d false;\n\t\t\t\tsetButtonsEnabled(true);\n\n\t\t\t\tif (response.success)\n\t\t\t\t{\n\t\t\t\t\t// Key is valid, proceed\n\t\t\t\t\tsubmitted \u003d true;\n\t\t\t\t\tonEventKeySet.accept(eventKey);\n\t\t\t\t\tdispose();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t// Handle different error types with user-friendly messages\n\t\t\t\t\tString userMessage \u003d getUserFriendlyErrorMessage(response);\n\t\t\t\t\tsetStatusMessage(userMessage, true);\n\t\t\t\t\teventKeyField.requestFocusInWindow();\n\t\t\t\t\teventKeyField.selectAll();\n\t\t\t\t}\n\t\t\t});\n\t\t}).exceptionally(throwable -\u003e {\n\t\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\t\tvalidating \u003d false;\n\t\t\t\tsetButtonsEnabled(true);\n\t\t\t\tsetStatusMessage(\"Can\u0027t reach the server\", true);\n\t\t\t\teventKeyField.requestFocusInWindow();\n\t\t\t});\n\t\t\treturn null;\n\t\t});\n\t}\n\n\tprivate String getUserFriendlyErrorMessage(ApiClient.ApiResponse response)\n\t{\n\t\tif (response.errorType !\u003d null)\n\t\t{\n\t\t\tswitch (response.errorType)\n\t\t\t{\n\t\t\t\tcase \"KEY_NOT_FOUND\":\n\t\t\t\t\treturn \"Invalid event key\";\n\t\t\t\tcase \"NETWORK_ERROR\":\n\t\t\t\tcase \"IO_ERROR\":\n\t\t\t\tcase \"REQUEST_ERROR\":\n\t\t\t\t\treturn \"Can\u0027t reach the server\";\n\t\t\t\tcase \"SERVER_ERROR\":\n\t\t\t\tcase \"PARSE_ERROR\":\n\t\t\t\tdefault:\n\t\t\t\t\treturn \"An unexpected error occurred\";\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Fallback for responses without error type\n\t\treturn \"Invalid event key\";\n\t}\n\n\tprivate void onCancelClick(ActionEvent e)\n\t{\n\t\tif (!validating)\n\t\t{\n\t\t\tdispose();\n\t\t}\n\t}\n\n\tprivate void setStatusMessage(String message, boolean isError)\n\t{\n\t\tif (isError)\n\t\t{\n\t\t\tstatusLabel.setForeground(Color.RED);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tstatusLabel.setForeground(Color.LIGHT_GRAY);\n\t\t}\n\t\tstatusLabel.setText(message);\n\t}\n\n\tprivate void setButtonsEnabled(boolean enabled)\n\t{\n\t\tsubmitButton.setEnabled(enabled);\n\t\tcancelButton.setEnabled(enabled);\n\t\teventKeyField.setEnabled(enabled);\n\t\t\n\t\tif (enabled)\n\t\t{\n\t\t\tsubmitButton.setText(\"Submit\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsubmitButton.setText(\"Validating...\");\n\t\t}\n\t}\n\n\tpublic boolean wasSubmitted()\n\t{\n\t\treturn submitted;\n\t}\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\EventKeyDialog.java"},{"fileName":"GameStateCapture.java","content":"package com.lennyscustomclues;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.Item;\nimport net.runelite.api.ItemContainer;\nimport net.runelite.api.Player;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Singleton\npublic class GameStateCapture\n{\n\t@Inject\n\tprivate Client client;\n\n\tpublic List\u003cApiClient.ItemData\u003e getInventoryData()\n\t{\n\t\tList\u003cApiClient.ItemData\u003e inventoryItems \u003d new ArrayList\u003c\u003e();\n\t\tItemContainer inventory \u003d client.getItemContainer(InventoryID.INVENTORY);\n\n\t\tif (inventory \u003d\u003d null)\n\t\t{\n\t\t\treturn inventoryItems;\n\t\t}\n\n\t\tItem[] items \u003d inventory.getItems();\n\t\tfor (int i \u003d 0; i \u003c items.length; i++)\n\t\t{\n\t\t\tItem item \u003d items[i];\n\t\t\tif (item !\u003d null \u0026\u0026 item.getId() !\u003d -1)\n\t\t\t{\n\t\t\t\tinventoryItems.add(new ApiClient.ItemData(i, item.getId(), item.getQuantity()));\n\t\t\t}\n\t\t}\n\n\t\treturn inventoryItems;\n\t}\n\n\tpublic List\u003cApiClient.ItemData\u003e getWornItemsData()\n\t{\n\t\tList\u003cApiClient.ItemData\u003e wornItems \u003d new ArrayList\u003c\u003e();\n\t\tItemContainer equipment \u003d client.getItemContainer(InventoryID.EQUIPMENT);\n\n\t\tif (equipment \u003d\u003d null)\n\t\t{\n\t\t\treturn wornItems;\n\t\t}\n\n\t\tItem[] items \u003d equipment.getItems();\n\t\tfor (int i \u003d 0; i \u003c items.length; i++)\n\t\t{\n\t\t\tItem item \u003d items[i];\n\t\t\tif (item !\u003d null \u0026\u0026 item.getId() !\u003d -1)\n\t\t\t{\n\t\t\t\twornItems.add(new ApiClient.ItemData(i, item.getId(), item.getQuantity()));\n\t\t\t}\n\t\t}\n\n\t\treturn wornItems;\n\t}\n\n\tpublic ApiClient.LocationData getLocationData(WorldPoint worldLocation, LocalPoint localLocation)\n\t{\n\t\tApiClient.WorldCoords worldCoords \u003d new ApiClient.WorldCoords(\n\t\t\tworldLocation.getX(), worldLocation.getY(), worldLocation.getPlane());\n\t\t\n\t\tApiClient.LocalCoords localCoords \u003d new ApiClient.LocalCoords(\n\t\t\tlocalLocation.getSceneX(), localLocation.getSceneY());\n\t\t\n\t\treturn new ApiClient.LocationData(worldCoords, localCoords);\n\t}\n\n\tpublic ApiClient.GameStateSubmission createGameStateSubmission(ApiClient.LocationData locationData, \n\t\tList\u003cApiClient.ItemData\u003e inventoryData, List\u003cApiClient.ItemData\u003e wornItemsData, \n\t\tInteger emoteId, Integer npcId, String interactionType, String eventKey)\n\t{\n\t\t// Get player\u0027s RSN (RuneScape Name)\n\t\tPlayer localPlayer \u003d client.getLocalPlayer();\n\t\tString rsn \u003d (localPlayer !\u003d null) ? localPlayer.getName() : null;\n\t\t\n\t\treturn new ApiClient.GameStateSubmission(locationData, inventoryData, wornItemsData, \n\t\t\temoteId, npcId, interactionType, eventKey, rsn);\n\t}\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\GameStateCapture.java"},{"fileName":"GameStateService.java","content":"package com.lennyscustomclues;\n\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.Player;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.callback.ClientThread;\nimport lombok.extern.slf4j.Slf4j;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.util.List;\nimport java.util.concurrent.CompletableFuture;\n\n@Slf4j\n@Singleton\npublic class GameStateService\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate LennysCustomCluesConfig config;\n\n\t@Inject\n\tprivate ApiClient apiClient;\n\n\t@Inject\n\tprivate GameStateCapture gameStateCapture;\n\n\t@Inject\n\tprivate CelebrationManager celebrationManager;\n\n\tprivate LennysCustomCluesPanel panel;\n\n\t// Event key management\n\tprivate String currentEventKey \u003d \"\";\n\n\tpublic void setPanel(LennysCustomCluesPanel panel)\n\t{\n\t\tthis.panel \u003d panel;\n\t}\n\n\tpublic String getEventKey()\n\t{\n\t\treturn currentEventKey;\n\t}\n\n\tpublic void setEventKey(String eventKey)\n\t{\n\t\tthis.currentEventKey \u003d (eventKey !\u003d null) ? eventKey.trim() : \"\";\n\t\tif (panel !\u003d null)\n\t\t{\n\t\t\tpanel.onEventKeyChanged();\n\t\t}\n\t}\n\n\tpublic void clearEventKey()\n\t{\n\t\tthis.currentEventKey \u003d \"\";\n\t\tif (panel !\u003d null)\n\t\t{\n\t\t\tpanel.onEventKeyChanged();\n\t\t}\n\t}\n\n\tpublic boolean hasEventKey()\n\t{\n\t\treturn !currentEventKey.isEmpty();\n\t}\n\n\tprivate boolean isEventKeyValid()\n\t{\n\t\treturn hasEventKey();\n\t}\n\n\tpublic void captureFromAnimation(int animationId)\n\t{\n\t\tclientThread.invokeLater(() -\u003e {\n\t\t\tif (!isEventKeyValid())\n\t\t\t{\n\t\t\t\tif (config.debug())\n\t\t\t\t{\n\t\t\t\t\tclient.addChatMessage(\n\t\t\t\t\t\tChatMessageType.GAMEMESSAGE,\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\"[LL-debug] Game state capture skipped - Event Key is empty (Animation ID: \" + animationId + \")\",\n\t\t\t\t\t\tnull\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tString eventKey \u003d getEventKey();\n\n\t\t\t// Determine if this is a dig or emote animation\n\t\t\tif (AnimationTriggers.isDigAnimation(animationId))\n\t\t\t{\n\t\t\t\tcaptureGameState(\"dig\", \"Digging animation (ID: \" + animationId + \")\", null, null, null, eventKey);\n\t\t\t}\n\t\t\telse if (AnimationTriggers.isEmoteAnimation(animationId))\n\t\t\t{\n\t\t\t\tString emoteName \u003d EmoteData.getEmoteName(animationId);\n\t\t\t\tcaptureGameState(\"emote\", \"Emote: \" + emoteName + \" (ID: \" + animationId + \")\", animationId, null, null, eventKey);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate void captureGameState(String trigger, String additionalInfo, Integer emoteId, Integer npcId, String interactionType, String eventKey)\n\t{\n\t\tPlayer player \u003d client.getLocalPlayer();\n\t\tif (player !\u003d null)\n\t\t{\n\t\t\tWorldPoint worldLocation \u003d player.getWorldLocation();\n\t\t\tLocalPoint localLocation \u003d player.getLocalLocation();\n\n\t\t\tApiClient.LocationData locationData \u003d gameStateCapture.getLocationData(worldLocation, localLocation);\n\t\t\tList\u003cApiClient.ItemData\u003e inventoryData \u003d gameStateCapture.getInventoryData();\n\t\t\tList\u003cApiClient.ItemData\u003e wornItemsData \u003d gameStateCapture.getWornItemsData();\n\t\t\t\n\t\t\tApiClient.GameStateSubmission gameStateSubmission \u003d gameStateCapture.createGameStateSubmission(\n\t\t\t\tlocationData, inventoryData, wornItemsData, emoteId, npcId, interactionType, eventKey);\n\n\t\t\t// Log submission info\n\t\t\tlog.info(\"\u003d\u003d\u003d Lenny\u0027s Custom Clues Game State Submission ({}) \u003d\u003d\u003d\", trigger);\n\t\t\tlog.info(\"Trigger info: {}\", additionalInfo);\n\t\t\tlog.info(\"Event Key: {}, Inventory: {} items, Worn: {} items\", \n\t\t\t\teventKey, inventoryData.size(), wornItemsData.size());\n\n\t\t\t// Update UI immediately\n\t\t\tif (panel !\u003d null)\n\t\t\t{\n\t\t\t\tpanel.updateStatusLabel(String.format(\n\t\t\t\t\t\"\u003chtml\u003e\u003cdiv style\u003d\u0027text-align: center;\u0027\u003eSubmitting...\u003cbr/\u003eTrigger: %s\u003cbr/\u003e%s\u003cbr/\u003eEvent: %s\u003c/div\u003e\u003c/html\u003e\",\n\t\t\t\t\ttrigger,\n\t\t\t\t\tadditionalInfo,\n\t\t\t\t\teventKey\n\t\t\t\t));\n\t\t\t}\n\n\t\t\t// Submit to API\n\t\t\tCompletableFuture\u003cApiClient.ApiResponse\u003e future \u003d apiClient.submitGuess(gameStateSubmission);\n\t\t\tfuture.thenAccept(this::handleApiResponse);\n\n\t\t\t// Show initial message in chat (debug mode only)\n\t\t\tif (config.debug())\n\t\t\t{\n\t\t\t\tclient.addChatMessage(\n\t\t\t\t\tChatMessageType.GAMEMESSAGE,\n\t\t\t\t\t\"\",\n\t\t\t\t\t\"[LL-debug] Submitting guess for \u0027\" + eventKey + \"\u0027...\",\n\t\t\t\t\tnull\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (panel !\u003d null)\n\t\t\t{\n\t\t\t\tpanel.updateStatusLabel(\"Player not found\");\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void handleApiResponse(ApiClient.ApiResponse response)\n\t{\n\t\t// Update UI\n\t\tif (panel !\u003d null)\n\t\t{\n\t\t\tString statusText;\n\t\t\tif (response.success)\n\t\t\t{\n\t\t\t\tstatusText \u003d String.format(\n\t\t\t\t\t\"\u003chtml\u003e\u003cdiv style\u003d\u0027text-align: center;\u0027\u003e\u003cfont color\u003d\u0027green\u0027\u003e CORRECT!\u003c/font\u003e\u003cbr/\u003e%s\u003c/div\u003e\u003c/html\u003e\",\n\t\t\t\t\tresponse.message\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tstatusText \u003d String.format(\n\t\t\t\t\t\"\u003chtml\u003e\u003cdiv style\u003d\u0027text-align: center;\u0027\u003e\u003cfont color\u003d\u0027red\u0027\u003e %s\u003c/font\u003e\u003cbr/\u003e%s\u003c/div\u003e\u003c/html\u003e\",\n\t\t\t\t\tresponse.success ? \"SUCCESS\" : \"FAILED\",\n\t\t\t\t\tresponse.message\n\t\t\t\t);\n\t\t\t}\n\t\t\tpanel.updateStatusLabel(statusText);\n\t\t}\n\n\t\t// Trigger victory celebration if successful\n\t\tif (response.success \u0026\u0026 celebrationManager !\u003d null)\n\t\t{\n\t\t\tcelebrationManager.triggerVictoryCelebration(currentEventKey);\n\t\t}\n\n\t\t// Add message to in-game chat on client thread\n\t\tclientThread.invokeLater(() -\u003e {\n\t\t\tif (response.success)\n\t\t\t{\n\t\t\t\t// Always show success messages\n\t\t\t\tString chatMessage \u003d \"[Lenny\u0027s Custom Clues] \" + response.message;\n\t\t\t\tclient.addChatMessage(\n\t\t\t\t\tChatMessageType.GAMEMESSAGE,\n\t\t\t\t\t\"\",\n\t\t\t\t\tchatMessage,\n\t\t\t\t\tnull\n\t\t\t\t);\n\t\t\t}\n\t\t\telse if (config.debug())\n\t\t\t{\n\t\t\t\t// Only show failure messages in debug mode\n\t\t\t\tString chatMessage \u003d \"[LL-debug] \" + response.message;\n\t\t\t\tclient.addChatMessage(\n\t\t\t\t\tChatMessageType.GAMEMESSAGE,\n\t\t\t\t\t\"\",\n\t\t\t\t\tchatMessage,\n\t\t\t\t\tnull\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\GameStateService.java"},{"fileName":"LennysCustomCluesConfig.java","content":"package com.lennyscustomclues;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"lennyscustomclues\")\npublic interface LennysCustomCluesConfig extends Config\n{\n\t@ConfigItem(\n\t\tkeyName \u003d \"debug\",\n\t\tname \u003d \"Debug Mode\",\n\t\tdescription \u003d \"Show all animation IDs in chat when player performs animations\"\n\t)\n\tdefault boolean debug()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showCelebrationSound\",\n\t\tname \u003d \"Victory sound effects\",\n\t\tdescription \u003d \"Play a celebratory sound when you solve a puzzle correctly\"\n\t)\n\tdefault boolean showCelebrationSound()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showCelebrationFireworks\",\n\t\tname \u003d \"Victory fireworks\",\n\t\tdescription \u003d \"Show fireworks when you solve a puzzle correctly\"\n\t)\n\tdefault boolean showCelebrationFireworks()\n\t{\n\t\treturn true;\n\t}\n\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\LennysCustomCluesConfig.java"},{"fileName":"LennysCustomCluesPanel.java","content":"package com.lennyscustomclues;\n\nimport com.lennyscustomclues.dialogs.AnswerBuilderDialog;\nimport com.lennyscustomclues.dialogs.ManageEventDialog;\nimport net.runelite.api.Client;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.PluginPanel;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\n\n@Singleton\npublic class LennysCustomCluesPanel extends PluginPanel\n{\n\t@Inject\n\tprivate GameStateService gameStateService;\n\n\t@Inject\n\tprivate ApiClient apiClient;\n\n\t@Inject\n\tprivate Client client;\n\n\tprivate JLabel titleLabel;\n\tprivate JPanel buttonPanel;\n\tprivate JLabel statusLabel;\n\tprivate JLabel instructionalLabel;\n\tprivate JLabel resultLabel;\n\n\t// Buttons for different states\n\tprivate JButton setEventKeyButton;\n\tprivate JButton unsetEventKeyButton;\n\tprivate JButton changeEventKeyButton;\n\tprivate JButton createAnswerButton;\n\tprivate JButton manageEventButton;\n\n\tpublic LennysCustomCluesPanel()\n\t{\n\t\tsetLayout(new BorderLayout());\n\t\tsetBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Title label\n\t\ttitleLabel \u003d new JLabel(\"Lenny\u0027s Custom Clues\");\n\t\ttitleLabel.setForeground(Color.WHITE);\n\t\ttitleLabel.setFont(FontManager.getRunescapeFont());\n\t\ttitleLabel.setHorizontalAlignment(SwingConstants.CENTER);\n\n\t\t// Button panel - will be dynamically populated\n\t\tbuttonPanel \u003d new JPanel();\n\t\tbuttonPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Status label\n\t\tstatusLabel \u003d new JLabel();\n\t\tstatusLabel.setForeground(Color.WHITE);\n\t\tstatusLabel.setHorizontalAlignment(SwingConstants.CENTER);\n\n\t\t// Create all buttons\n\t\tcreateButtons();\n\n\t\t// Layout\n\t\tadd(titleLabel, BorderLayout.NORTH);\n\t\tadd(buttonPanel, BorderLayout.CENTER);\n\t\tadd(statusLabel, BorderLayout.SOUTH);\n\n\t\t// UI state will be initialized in initialize() after injection\n\t}\n\n\tprivate void createButtons()\n\t{\n\t\tsetEventKeyButton \u003d new JButton(\"Set Event Key\");\n\t\tsetEventKeyButton.addActionListener(this::onSetEventKeyClick);\n\t\tsetEventKeyButton.setAlignmentX(Component.LEFT_ALIGNMENT);\n\t\tsetEventKeyButton.setMaximumSize(new Dimension(Integer.MAX_VALUE, setEventKeyButton.getPreferredSize().height));\n\n\t\tunsetEventKeyButton \u003d new JButton(\"Unset Event Key\");\n\t\tunsetEventKeyButton.addActionListener(this::onUnsetEventKeyClick);\n\t\tunsetEventKeyButton.setAlignmentX(Component.LEFT_ALIGNMENT);\n\t\tunsetEventKeyButton.setMaximumSize(new Dimension(Integer.MAX_VALUE, unsetEventKeyButton.getPreferredSize().height));\n\n\t\tchangeEventKeyButton \u003d new JButton(\"Change Event Key\");\n\t\tchangeEventKeyButton.addActionListener(this::onChangeEventKeyClick);\n\t\tchangeEventKeyButton.setAlignmentX(Component.LEFT_ALIGNMENT);\n\t\tchangeEventKeyButton.setMaximumSize(new Dimension(Integer.MAX_VALUE, changeEventKeyButton.getPreferredSize().height));\n\n\t\tcreateAnswerButton \u003d new JButton(\"Create a new event\");\n\t\tcreateAnswerButton.addActionListener(this::onCreateAnswerClick);\n\t\tcreateAnswerButton.setAlignmentX(Component.LEFT_ALIGNMENT);\n\t\tcreateAnswerButton.setMaximumSize(new Dimension(Integer.MAX_VALUE, createAnswerButton.getPreferredSize().height));\n\n\t\tmanageEventButton \u003d new JButton(\"Manage existing event\");\n\t\tmanageEventButton.addActionListener(this::onManageEventClick);\n\t\tmanageEventButton.setAlignmentX(Component.LEFT_ALIGNMENT);\n\t\tmanageEventButton.setMaximumSize(new Dimension(Integer.MAX_VALUE, manageEventButton.getPreferredSize().height));\n\t}\n\n\t@Inject\n\tpublic void initialize()\n\t{\n\t\t// Set up the bidirectional reference with the service\n\t\tgameStateService.setPanel(this);\n\t\t\n\t\t// Initialize UI state now that injection is complete\n\t\tupdatePanelForEventKeyState();\n\t}\n\n\tpublic void onEventKeyChanged()\n\t{\n\t\tSwingUtilities.invokeLater(this::updatePanelForEventKeyState);\n\t}\n\n\tprivate void updatePanelForEventKeyState()\n\t{\n\t\tbuttonPanel.removeAll();\n\n\t\tif (gameStateService.hasEventKey())\n\t\t{\n\t\t\tshowEventKeySetState();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tshowNoEventKeyState();\n\t\t}\n\n\t\tbuttonPanel.revalidate();\n\t\tbuttonPanel.repaint();\n\t}\n\n\tprivate void showNoEventKeyState()\n\t{\n\t\tbuttonPanel.setLayout(new BoxLayout(buttonPanel, BoxLayout.Y_AXIS));\n\t\tbuttonPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n\n\t\t// Play in an event section\n\t\tbuttonPanel.add(createSectionLabel(\"Play in an event\"));\n\t\tbuttonPanel.add(Box.createRigidArea(new Dimension(0, 5)));\n\t\tbuttonPanel.add(setEventKeyButton);\n\n\t\t// Spacing between sections\n\t\tbuttonPanel.add(Box.createRigidArea(new Dimension(0, 15)));\n\n\t\t// Event management section\n\t\tbuttonPanel.add(createSectionLabel(\"Event management\"));\n\t\tbuttonPanel.add(Box.createRigidArea(new Dimension(0, 5)));\n\t\tbuttonPanel.add(createAnswerButton);\n\t\tbuttonPanel.add(Box.createRigidArea(new Dimension(0, 5)));\n\t\tbuttonPanel.add(manageEventButton);\n\n\t\tstatusLabel.setText(\"\");\n\t}\n\n\tprivate void showEventKeySetState()\n\t{\n\t\tbuttonPanel.setLayout(new BoxLayout(buttonPanel, BoxLayout.Y_AXIS));\n\t\tbuttonPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n\n\t\tString eventKey \u003d gameStateService.getEventKey();\n\n\t\t// Playing in event section\n\t\tbuttonPanel.add(createSectionLabel(\"Playing in: \" + eventKey));\n\t\tbuttonPanel.add(Box.createRigidArea(new Dimension(0, 5)));\n\n\t\t// Instructional text\n\t\tinstructionalLabel \u003d new JLabel(\"\u003chtml\u003eTry and solve the clue!\u003cbr/\u003eGood luck!\u003c/html\u003e\");\n\t\tinstructionalLabel.setForeground(Color.WHITE);\n\t\tinstructionalLabel.setAlignmentX(Component.LEFT_ALIGNMENT);\n\t\tbuttonPanel.add(instructionalLabel);\n\t\tbuttonPanel.add(Box.createRigidArea(new Dimension(0, 10)));\n\n\t\t// Result text area\n\t\tresultLabel \u003d new JLabel(\"\");\n\t\tresultLabel.setForeground(Color.WHITE);\n\t\tresultLabel.setAlignmentX(Component.LEFT_ALIGNMENT);\n\t\tbuttonPanel.add(resultLabel);\n\n\t\t// Push buttons to bottom\n\t\tbuttonPanel.add(Box.createVerticalGlue());\n\n\t\t// Event key buttons\n\t\tbuttonPanel.add(changeEventKeyButton);\n\t\tbuttonPanel.add(Box.createRigidArea(new Dimension(0, 5)));\n\t\tbuttonPanel.add(unsetEventKeyButton);\n\n\t\tstatusLabel.setText(\"\");\n\t}\n\n\tprivate JLabel createSectionLabel(String text)\n\t{\n\t\tJLabel label \u003d new JLabel(text);\n\t\tlabel.setForeground(ColorScheme.BRAND_ORANGE);\n\t\tlabel.setFont(FontManager.getRunescapeBoldFont());\n\t\tlabel.setAlignmentX(Component.LEFT_ALIGNMENT);\n\t\treturn label;\n\t}\n\n\tprivate void onSetEventKeyClick(ActionEvent e)\n\t{\n\t\tshowEventKeyDialog(null, false);\n\t}\n\n\tprivate void onChangeEventKeyClick(ActionEvent e)\n\t{\n\t\tshowEventKeyDialog(gameStateService.getEventKey(), true);\n\t}\n\n\tprivate void onUnsetEventKeyClick(ActionEvent e)\n\t{\n\t\tgameStateService.clearEventKey();\n\t}\n\n\tprivate void showEventKeyDialog(String currentEventKey, boolean isChanging)\n\t{\n\t\t// Find the parent frame\n\t\tWindow parentWindow \u003d SwingUtilities.getWindowAncestor(this);\n\t\tJFrame parentFrame \u003d (parentWindow instanceof JFrame) ? (JFrame) parentWindow : null;\n\n\t\tEventKeyDialog dialog \u003d new EventKeyDialog(\n\t\t\tparentFrame,\n\t\t\tcurrentEventKey,\n\t\t\tisChanging,\n\t\t\teventKey -\u003e gameStateService.setEventKey(eventKey),\n\t\t\tapiClient\n\t\t);\n\n\t\tdialog.setVisible(true);\n\t}\n\n\tprivate void onCreateAnswerClick(ActionEvent e)\n\t{\n\t\t// Find the parent frame\n\t\tWindow parentWindow \u003d SwingUtilities.getWindowAncestor(this);\n\t\tJFrame parentFrame \u003d (parentWindow instanceof JFrame) ? (JFrame) parentWindow : null;\n\n\t\tAnswerBuilderDialog dialog \u003d new AnswerBuilderDialog(\n\t\t\tparentFrame,\n\t\t\tclient,\n\t\t\tapiClient\n\t\t);\n\n\t\tdialog.setVisible(true);\n\t}\n\n\tprivate void onManageEventClick(ActionEvent e)\n\t{\n\t\t// Find the parent frame\n\t\tWindow parentWindow \u003d SwingUtilities.getWindowAncestor(this);\n\t\tJFrame parentFrame \u003d (parentWindow instanceof JFrame) ? (JFrame) parentWindow : null;\n\n\t\tManageEventDialog dialog \u003d new ManageEventDialog(\n\t\t\tparentFrame,\n\t\t\tclient,\n\t\t\tapiClient\n\t\t);\n\n\t\tdialog.setVisible(true);\n\t}\n\n\tpublic void updateStatusLabel(String text)\n\t{\n\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\tif (resultLabel !\u003d null)\n\t\t\t{\n\t\t\t\tresultLabel.setText(text);\n\t\t\t\tbuttonPanel.revalidate();\n\t\t\t\tbuttonPanel.repaint();\n\t\t\t}\n\t\t});\n\t}\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\LennysCustomCluesPanel.java"},{"fileName":"LennysCustomCluesPlugin.java","content":"package com.lennyscustomclues;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.Player;\nimport net.runelite.api.events.AnimationChanged;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.util.ImageUtil;\n\nimport java.awt.image.BufferedImage;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Lenny\u0027s Custom Clues\"\n)\npublic class LennysCustomCluesPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate LennysCustomCluesConfig config;\n\n\t@Inject\n\tprivate ClientToolbar clientToolbar;\n\n\t@Inject\n\tprivate MainPanel mainPanel;\n\n\t@Inject\n\tprivate GameStateService gameStateService;\n\n\t@Inject\n\tprivate CelebrationManager celebrationManager;\n\n\tprivate NavigationButton navButton;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tlog.info(\"Lenny\u0027s Custom Clues started!\");\n\n\t\tfinal BufferedImage icon \u003d ImageUtil.loadImageResource(getClass(), \"/util/clue_arrow.png\");\n\n\t\tnavButton \u003d NavigationButton.builder()\n\t\t\t.tooltip(\"Lenny\u0027s Custom Clues\")\n\t\t\t.icon(icon)\n\t\t\t.priority(5)\n\t\t\t.panel(mainPanel)\n\t\t\t.build();\n\n\t\tclientToolbar.addNavigation(navButton);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tlog.info(\"Lenny\u0027s Custom Clues stopped!\");\n\t\tclientToolbar.removeNavigation(navButton);\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged)\n\t{\n\t\t// No chat message on login\n\t}\n\n\t@Subscribe\n\tpublic void onAnimationChanged(AnimationChanged event)\n\t{\n\t\t// Only process player animations\n\t\tif (!(event.getActor() instanceof Player))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tPlayer player \u003d (Player) event.getActor();\n\n\t\t// Only track local player animations\n\t\tif (player !\u003d client.getLocalPlayer())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tint animationId \u003d player.getAnimation();\n\n\t\t// Debug mode: show all animation IDs in chat\n\t\tif (config.debug())\n\t\t{\n\t\t\tclient.addChatMessage(\n\t\t\t\tChatMessageType.GAMEMESSAGE,\n\t\t\t\t\"\",\n\t\t\t\t\"[LL-debug] Animation ID: \" + animationId,\n\t\t\t\tnull\n\t\t\t);\n\t\t}\n\n\t\t// Check for digging animation\n\t\tif (AnimationTriggers.isTriggerAnimation(animationId))\n\t\t{\n\t\t\tlog.info(\"Digging detected with animation ID: {}\", animationId);\n\t\t\tgameStateService.captureFromAnimation(animationId);\n\t\t}\n\t}\n\n\t@Provides\n\tLennysCustomCluesConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(LennysCustomCluesConfig.class);\n\t}\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\LennysCustomCluesPlugin.java"},{"fileName":"MainPanel.java","content":"package com.lennyscustomclues;\n\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.PluginPanel;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.awt.*;\n\n@Singleton\npublic class MainPanel extends PluginPanel\n{\n\t@Inject\n\tprivate LennysCustomCluesPanel normalPanel;\n\n\tpublic MainPanel()\n\t{\n\t\tsetLayout(new BorderLayout());\n\t\tsetBackground(ColorScheme.DARK_GRAY_COLOR);\n\t}\n\n\t@Inject\n\tpublic void initialize()\n\t{\n\t\t// Initialize child panel\n\t\tnormalPanel.initialize();\n\n\t\t// Add the normal panel\n\t\tadd(normalPanel, BorderLayout.CENTER);\n\t}\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\MainPanel.java"},{"fileName":"LennysCustomCluesPluginTest.java","content":"package com.lennyscustomclues;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class LennysCustomCluesPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(LennysCustomCluesPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\lennyscustomclues\\LennysCustomCluesPluginTest.java"}]},{"commit":"0907827d2440b270576713cbd84a749d9cb7e213","repository":"https://github.com/daanbom/Custom-Drop-Sounds.git","internalName":"custom-drop-sounds","files":[{"fileName":"AnimationIDs.java","content":"package org.CustomSounds;\n\npublic enum AnimationIDs\n{\n    BURN_CLAW(11140),\n    DRAGON_CLAW(7514),\n    HORN_HIT(12158),\n    HORN_MISS(12159),\n    ELDER_MAUL(11124),\n    VOIDWAKER(11275),\n    KERIS(9546),\n    BGS(7642),\n    CRYSTAL_HALLY(1203),\n    HOUSE_TABS(4071),\n    CAPES(714),\n    SCROLLS(3864);\n\n\n    public final int Id;\n\n    AnimationIDs(int id)\n    {\n        this.Id \u003d id;\n    }\n}\n\n","filePath":"src\\main\\java\\org\\CustomSounds\\AnimationIDs.java"},{"fileName":"CustomSoundsConfig.java","content":"package org.CustomSounds;\n\nimport net.runelite.client.config.*;\n\n@ConfigGroup(\"CustomDropSounds\")\npublic interface CustomSoundsConfig extends Config\n{\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Value drops\",\n\t\t\tdescription \u003d \"All the settings for drops\",\n\t\t\tposition \u003d 8\n\n\t)\n\tString valueDrops \u003d \"valueDrops\";\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Clue drops\",\n\t\t\tdescription \u003d \"All the settings for drops\",\n\t\t\tposition \u003d 7\n\n\t)\n\tString clueDrops \u003d \"clueDrops\";\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Spec weapon sounds\",\n\t\t\tdescription \u003d \"All the settings for Spec weapons\",\n\t\t\tposition \u003d 9\n\n\t)\n\tString specWeapon \u003d \"specWeapon\";\n\t@Range(max\u003d100)\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"masterVolume\",\n\t\t\tname \u003d \"Master Volume\",\n\t\t\tdescription \u003d \"Sets the master volume of all ground item sounds\",\n\t\t\tposition \u003d 0\n\t)\n\tdefault int masterVolume()\n\t{\n\t\treturn 50;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"highlightSound\",\n\t\t\tname \u003d \"Highlight Sound\",\n\t\t\tdescription \u003d \"Configure whether or not to play a sound when a highlighted (ground item plugin) item appears\",\n\t\t\tposition \u003d 1\n\t)\n\tdefault boolean highlightSound()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"petSound\",\n\t\t\tname \u003d \"Pet Sound\",\n\t\t\tdescription \u003d \"Configure whether or not to play a sound when a pet item appears\",\n\t\t\tposition \u003d 2\n\t)\n\tdefault boolean petSound()\n\t{\n\t\treturn false;\n\t}\n\t\t@ConfigItem(\n\t\t\tkeyName \u003d \"maxHitBoolean\",\n\t\t\tname \u003d \"Maxhit\",\n\t\t\tdescription \u003d \"Enable/Disable Max Hit Sounds\",\n\t\t\tsection \u003d \"hitsplatToggleSection\",\n\t\t\tposition \u003d 3\n\t)\n\tdefault boolean maxHitBoolean() {return false;}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"announceDeath\",\n\t\t\tname \u003d \"Death sound\",\n\t\t\tdescription \u003d \"Enable/Disable Death Sound\",\n\t\t\tposition \u003d 4\n\t)\n\tdefault boolean announceDeath() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"announceCollectionLog\",\n\t\t\tname \u003d \"New collection log entry\",\n\t\t\tdescription \u003d \" This one relies on you having chat messages (included with the popup option) enabled in game settings!\",\n\t\t\tposition \u003d 5\n\t)\n\tdefault boolean announceCollectionLog() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"teleports\",\n\t\t\tname \u003d \"Teleport Sounds\",\n\t\t\tdescription \u003d \"Configure whether or not you want to use a custom sound for teleports (house tabs, capes, scrolls)\",\n\t\t\tposition \u003d 6\n\t)\n\tdefault boolean teleports() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"beginnerClueSound\",\n\t\t\tname \u003d \"Beginner Clue Sound\",\n\t\t\tdescription \u003d \"Configure whether or not to play a sound when a beginner clue item appears\",\n\t\t\tposition \u003d 0,\n\t\t\tsection \u003d clueDrops\n\t)\n\n\tdefault boolean beginnerClueSound()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"easyClueSound\",\n\t\t\tname \u003d \"Easy Clue Sound\",\n\t\t\tdescription \u003d \"Configure whether or not to play a sound when a easy clue item appears\",\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d clueDrops\n\t)\n\tdefault boolean easyClueSound()\n\t{\n\t\treturn true;\n\t}\n\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"mediumClueSound\",\n\t\t\tname \u003d \"Medium Clue Sound\",\n\t\t\tdescription \u003d \"Configure whether or not to play a sound when a medium clue item appears\",\n\t\t\tposition \u003d 2,\n\t\t\tsection \u003d clueDrops\n\t)\n\tdefault boolean mediumClueSound()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"hardClueSound\",\n\t\t\tname \u003d \"Hard Clue Sound\",\n\t\t\tdescription \u003d \"Configure whether or not to play a sound when a hard clue item appears\",\n\t\t\tposition \u003d 3,\n\t\t\tsection \u003d clueDrops\n\t)\n\tdefault boolean hardClueSound()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"eliteClueSound\",\n\t\t\tname \u003d \"Elite Clue Sound\",\n\t\t\tdescription \u003d \"Configure whether or not to play a sound when a elite clue item appears\",\n\t\t\tposition \u003d 4,\n\t\t\tsection \u003d clueDrops\n\t)\n\tdefault boolean eliteClueSound()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"masterClueSound\",\n\t\t\tname \u003d \"Master Clue Sound\",\n\t\t\tdescription \u003d \"Configure whether or not to play a sound when a master clue item appears\",\n\t\t\tposition \u003d 5,\n\t\t\tsection \u003d clueDrops\n\t)\n\tdefault boolean masterClueSound()\n\t{\n\t\treturn true;\n\t}\n\n\n\n\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"lowestValueSound\",\n\t\t\tname \u003d \"Lowest Value Sound\",\n\t\t\tdescription \u003d \"Configure whether or not to play a sound when a lowest valued item appears\",\n\t\t\tposition \u003d 0,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault boolean lowestValueSound()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"lowestStart\",\n\t\t\tname \u003d \"Lowest Value starting GP\",\n\t\t\tdescription \u003d \"What is the starting gp you want to hear this sound\" ,\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault int lowestStart() {\n\t\treturn 20000;\n\t}\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"lowestEnd\",\n\t\t\tname \u003d \"Lowest Value ending GP\",\n\t\t\tdescription \u003d \"What is the ending gp you want to hear this sound\" ,\n\t\t\tposition \u003d 2,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault int lowestEnd() {\n\t\treturn 150000;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"lowValueSound\",\n\t\t\tname \u003d \"Low Value Sound\",\n\t\t\tdescription \u003d \"Configure whether or not to play a sound when a low valued item appears\",\n\t\t\tposition \u003d 3,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault boolean lowValueSound()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"lowStart\",\n\t\t\tname \u003d \"Low Value starting GP\",\n\t\t\tdescription \u003d \"What is the starting gp you want to hear this sound\" ,\n\t\t\tposition \u003d 4,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault int lowStart() {\n\t\treturn 150000;\n\t}\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"lowEnd\",\n\t\t\tname \u003d \"Low Value ending GP\",\n\t\t\tdescription \u003d \"What is the ending gp you want to hear this sound\" ,\n\t\t\tposition \u003d 5,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault int lowEnd() {\n\t\treturn 500000;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"mediumValueSound\",\n\t\t\tname \u003d \"Medium Value Sound\",\n\t\t\tdescription \u003d \"Configure whether or not to play a sound when a medium valued item appears\",\n\t\t\tposition \u003d 6,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault boolean mediumValueSound()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"mediumStart\",\n\t\t\tname \u003d \"Medium Value starting GP\",\n\t\t\tdescription \u003d \"What is the starting gp you want to hear this sound\" ,\n\t\t\tposition \u003d 7,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault int mediumStart() {\n\t\treturn 500000;\n\t}\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"mediumEnd\",\n\t\t\tname \u003d \"Medium Value ending GP\",\n\t\t\tdescription \u003d \"What is the ending gp you want to hear this sound\" ,\n\t\t\tposition \u003d 8,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault int mediumEnd() {\n\t\treturn 1000000;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"highValueSound\",\n\t\t\tname \u003d \"High Value Sound\",\n\t\t\tdescription \u003d \"Configure whether or not to play a sound when a high valued item appears\",\n\t\t\tposition \u003d 9,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault boolean highValueSound()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"highStart\",\n\t\t\tname \u003d \"High Value starting GP\",\n\t\t\tdescription \u003d \"What is the starting gp you want to hear this sound\" ,\n\t\t\tposition \u003d 10,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault int highStart() {\n\t\treturn 1000000;\n\t}\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"highEnd\",\n\t\t\tname \u003d \"High Value ending GP\",\n\t\t\tdescription \u003d \"What is the ending gp you want to hear this sound\" ,\n\t\t\tposition \u003d 11,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault int highEnd() {\n\t\treturn 10000000;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"highestValueSound\",\n\t\t\tname \u003d \"Highest Value Sound\",\n\t\t\tdescription \u003d \"Configure whether or not to play a sound when a highest valued item appears\",\n\t\t\tposition \u003d 12,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault boolean highestValueSound()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"highestStart\",\n\t\t\tname \u003d \"Highest Value starting GP\",\n\t\t\tdescription \u003d \"What is the starting gp you want to hear this sound\" ,\n\t\t\tposition \u003d 13,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault int highestStart() {\n\t\treturn 10000000;\n\t}\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"highestEnd\",\n\t\t\tname \u003d \"Highest Value ending GP\",\n\t\t\tdescription \u003d \"What is the ending gp you want to hear this sound\" ,\n\t\t\tposition \u003d 14,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault int highestEnd() {\n\t\treturn 1000000000;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"zaryteCrossBow\",\n\t\t\tname \u003d \"Zaryte CrossBow Spec\",\n\t\t\tdescription \u003d \"Configure whether or not you want to use a custom Zaryte CrossBow spec sound\" ,\n\t\t\tposition \u003d 0,\n\t\t\tsection \u003d specWeapon\n\t)\n\tdefault boolean zaryteCrossBow() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"elderMaul\",\n\t\t\tname \u003d \"Elder Maul Spec\",\n\t\t\tdescription \u003d \"Configure whether or not you want to use a custom Elder Maul spec sound\" ,\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d specWeapon\n\t)\n\tdefault boolean elderMaul() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"dragonClaws\",\n\t\t\tname \u003d \"Dragon Claw Spec\",\n\t\t\tdescription \u003d \"Configure whether or not you want to use a custom Dragon Claw spec sound\" ,\n\t\t\tposition \u003d 2,\n\t\t\tsection \u003d specWeapon\n\t)\n\tdefault boolean dragonClaws() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"burnClaw\",\n\t\t\tname \u003d \"Burn Claw Spec\",\n\t\t\tdescription \u003d \"Configure whether or not you want to use a custom Burn Claw spec sound\",\n\t\t\tposition \u003d 3,\n\t\t\tsection \u003d specWeapon\n\t)\n\tdefault boolean burnClaw() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"horn\",\n\t\t\tname \u003d \"Horn Spec\",\n\t\t\tdescription \u003d \"Configure whether or not you want to use a custom Horn spec sound\",\n\t\t\tposition \u003d 4,\n\t\t\tsection \u003d specWeapon\n\t)\n\tdefault boolean horn() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"voidwaker\",\n\t\t\tname \u003d \"Voidwaker Spec\",\n\t\t\tdescription \u003d \"Configure whether or not you want to use a custom Voidwaker spec sound\",\n\t\t\tposition \u003d 5,\n\t\t\tsection \u003d specWeapon\n\t)\n\tdefault boolean voidwaker() {\n\t\treturn false;\n\t}\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"blowpipe\",\n\t\t\tname \u003d \"Blowpipe Spec\",\n\t\t\tdescription \u003d \"Configure whether or not you want to use a custom Blowpipe spec sound\",\n\t\t\tposition \u003d 6,\n\t\t\tsection \u003d specWeapon\n\t)\n\tdefault boolean blowpipe() {\n\t\treturn false;\n\t}\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"keris\",\n\t\t\tname \u003d \"Keris Spec\",\n\t\t\tdescription \u003d \"Configure whether or not you want to use a custom Keris spec sound\",\n\t\t\tposition \u003d 7,\n\t\t\tsection \u003d specWeapon\n\t)\n\tdefault boolean keris() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"bgs\",\n\t\t\tname \u003d \"BGS Spec\",\n\t\t\tdescription \u003d \"Configure whether or not you want to use a custom BGS spec sound\",\n\t\t\tposition \u003d 8,\n\t\t\tsection \u003d specWeapon\n\t)\n\tdefault boolean bgs() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"crystalHally\",\n\t\t\tname \u003d \"Crystal Halberd Spec\",\n\t\t\tdescription \u003d \"Configure whether or not you want to use a custom Crystal Halberd spec sound\",\n\t\t\tposition \u003d 9,\n\t\t\tsection \u003d specWeapon\n\t)\n\tdefault boolean crystalHally() {\n\t\treturn false;\n\t}\n\n\n}\n","filePath":"src\\main\\java\\org\\CustomSounds\\CustomSoundsConfig.java"},{"fileName":"CustomSoundsPlugin.java","content":"package org.CustomSounds;\n\nimport com.google.common.collect.ImmutableList;\nimport com.google.inject.Provides;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.*;\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.audio.AudioPlayer;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.game.ItemStack;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDependency;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.plugins.grounditems.GroundItemsConfig;\nimport net.runelite.client.plugins.grounditems.GroundItemsPlugin;\nimport net.runelite.client.plugins.loottracker.LootReceived;\nimport net.runelite.client.util.Text;\n\nimport javax.inject.Inject;\nimport javax.sound.sampled.Clip;\nimport javax.sound.sampled.FloatControl;\nimport javax.sound.sampled.LineUnavailableException;\nimport javax.sound.sampled.UnsupportedAudioFileException;\nimport java.io.*;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.concurrent.CopyOnWriteArrayList;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.concurrent.TimeUnit;\nimport java.util.regex.Pattern;\n\n@Slf4j\n@PluginDescriptor(\n\t\tname \u003d \"Custom Sounds\",\n\t\tdescription \u003d \"Play custom sound effects for item drops, pets, hits and more\",\n\t\ttags \u003d {\"sound\", \"effect\", \"item\", \"drop\", \"hit\", \"combat\"}\n)\n@PluginDependency(GroundItemsPlugin.class)\npublic class CustomSoundsPlugin extends Plugin\n{\n\t@Inject\n\tprivate CustomSoundsConfig config;\n\n\t@Inject\n\tprivate AudioPlayer audioPlayer;\n\n\n\t@Provides\n\tCustomSoundsConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(CustomSoundsConfig.class);\n\t}\n\n\t@Inject\n\tprivate GroundItemsConfig groundItemsConfig;\n\n\t@Inject\n\tprivate ScheduledExecutorService executor;\n\n\t@Inject\n\tprivate Client client;\n\t@Inject\n\tprivate ItemManager itemManager;\n\n\tprivate Map\u003cInteger, WeaponSound\u003e allWeapons \u003d new HashMap\u003c\u003e();\n\n\tprivate static final Pattern COLLECTION_LOG_ITEM_REGEX \u003d Pattern.compile(\"New item added to your collection log:.*\");\n\n\n\tprivate static final ImmutableList\u003cString\u003e PET_MESSAGES \u003d ImmutableList.of(\"You have a funny feeling like you\u0027re being followed\",\n\t\t\t\"You feel something weird sneaking into your backpack\",\n\t\t\t\"You have a funny feeling like you would have been followed\");\n\tprivate static final File CUSTOM_SOUNDS_DIR \u003d new File(RuneLite.RUNELITE_DIR.getPath() + File.separator + \"custom-drop-sounds\");\n\n\tprivate static final File HIGHLIGHTED_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"highlighted_sound.wav\");\n\tprivate static final File BEGINNER_CLUE_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"beginner_clue_sound.wav\");\n\tprivate static final File EASY_CLUE_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"easy_clue_sound.wav\");\n\tprivate static final File MEDIUM_CLUE_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"medium_clue_sound.wav\");\n\tprivate static final File HARD_CLUE_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"hard_clue_sound.wav\");\n\tprivate static final File ELITE_CLUE_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"elite_clue_sound.wav\");\n\tprivate static final File MASTER_CLUE_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"master_clue_sound.wav\");\n\tprivate static final File LOW_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"low_sound.wav\");\n\tprivate static final File MEDIUM_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"medium_sound.wav\");\n\n\tprivate static final File PET_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"pet_sound.wav\");\n\tprivate static final File HIGH_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"high_sound.wav\");\n\tprivate static final File HIGHEST_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"highest_sound.wav\");\n\tprivate static final File LOWEST_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"lowest_sound.wav\");\n\tprivate static final File COLLECTIONLOG_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"CollectionLog.wav\");\n\tprivate static final File DIED_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"Died.wav\");\n\n\tprivate static final File MAX_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"Max.wav\");\n\n\tprivate static final File ZARYTE_CROSSBOW_SPEC_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"zaryte_spec.wav\");\n\tprivate static final File ELDER_MAUL_SPEC_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"elder_maul.wav\");\n\tprivate static final File DRAGON_CLAWS_SPEC_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"dragon_claws.wav\");\n\tprivate static final File BURN_CLAW_SPEC_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"burn_claws.wav\");\n\tprivate static final File HORN_SPEC_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"horn_spec.wav\");\n\tprivate static final File VOIDWAKER_SPEC_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"voidwaker.wav\");\n\tprivate static final File BLOWPIPE_SPEC_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"blowpipe.wav\");\n\tprivate static final File KERIS_SPEC_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"keris_spec.wav\");\n\tprivate static final File BGS_SPEC_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"bgs_spec.wav\");\n\tprivate static final File CRYSTAL_HALLY_SPEC_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"crystal_hally_spec.wav\");\n\tprivate static final File TELEPORT_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"teleport.wav\");\n\tprivate static final File[] SOUND_FILES \u003d new File[]{\n\t\t\tHIGHLIGHTED_SOUND_FILE,\n\t\t\tBEGINNER_CLUE_SOUND_FILE,\n\t\t\tEASY_CLUE_SOUND_FILE,\n\t\t\tMEDIUM_CLUE_SOUND_FILE,\n\t\t\tHARD_CLUE_SOUND_FILE,\n\t\t\tELITE_CLUE_SOUND_FILE,\n\t\t\tMASTER_CLUE_SOUND_FILE,\n\t\t\tLOW_SOUND_FILE,\n\t\t\tMEDIUM_SOUND_FILE,\n\t\t\tLOWEST_SOUND_FILE,\n\t\t\tHIGH_SOUND_FILE,\n\t\t\tHIGHEST_SOUND_FILE,\n\t\t\tPET_SOUND_FILE,\n\t\t\tMAX_SOUND_FILE,\n\t\t\tCOLLECTIONLOG_SOUND_FILE,\n\t\t\tDIED_SOUND_FILE,\n\t\t\tZARYTE_CROSSBOW_SPEC_SOUND_FILE,\n\t\t\tELDER_MAUL_SPEC_SOUND_FILE,\n\t\t\tDRAGON_CLAWS_SPEC_SOUND_FILE,\n\t\t\tBURN_CLAW_SPEC_SOUND_FILE,\n\t\t\tHORN_SPEC_SOUND_FILE,\n\t\t\tVOIDWAKER_SPEC_SOUND_FILE,\n\t\t\tBLOWPIPE_SPEC_SOUND_FILE,\n\t\t\tKERIS_SPEC_SOUND_FILE,\n\t\t\tBGS_SPEC_SOUND_FILE,\n\t\t\tCRYSTAL_HALLY_SPEC_SOUND_FILE,\n\t\t\tTELEPORT_SOUND_FILE\n\t};\n\n\n\tprivate List\u003cString\u003e highlightedItemsList \u003d new CopyOnWriteArrayList\u003c\u003e();\n\n\tprivate Clip clip \u003d null;\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\tinitSoundFiles();\n\t\tupdateHighlightedItemsList();\n\t\tinitAllWeapons();\n\t}\n\n\tprivate void initAllWeapons()\n\t{\n\t\t// Animation-based weapons\n\t\tallWeapons.put(AnimationIDs.ELDER_MAUL.Id,\n\t\t\t\tnew WeaponSound(ELDER_MAUL_SPEC_SOUND_FILE, () -\u003e config.elderMaul(), 2, true));\n\t\tallWeapons.put(AnimationIDs.DRAGON_CLAW.Id,\n\t\t\t\tnew WeaponSound(DRAGON_CLAWS_SPEC_SOUND_FILE, () -\u003e config.dragonClaws(), 1, true));\n\t\tallWeapons.put(AnimationIDs.HORN_HIT.Id,\n\t\t\t\tnew WeaponSound(HORN_SPEC_SOUND_FILE, () -\u003e config.horn(), 0, true));\n\t\tallWeapons.put(AnimationIDs.HORN_MISS.Id,\n\t\t\t\tnew WeaponSound(HORN_SPEC_SOUND_FILE, () -\u003e config.horn(), 0, true));\n\t\tallWeapons.put(AnimationIDs.BURN_CLAW.Id,\n\t\t\t\tnew WeaponSound(BURN_CLAW_SPEC_SOUND_FILE, () -\u003e config.burnClaw(), 0, true));\n\t\tallWeapons.put(AnimationIDs.VOIDWAKER.Id,\n\t\t\t\tnew WeaponSound(VOIDWAKER_SPEC_SOUND_FILE, () -\u003e config.voidwaker(), 1, true));\n\t\tallWeapons.put(AnimationIDs.KERIS.Id,\n\t\t\t\tnew WeaponSound(KERIS_SPEC_SOUND_FILE, () -\u003e config.keris(), 1, true));\n\t\tallWeapons.put(AnimationIDs.BGS.Id,\n\t\t\t\tnew WeaponSound(BGS_SPEC_SOUND_FILE, () -\u003e config.bgs(), 1, true));\n\t\tallWeapons.put(AnimationIDs.CRYSTAL_HALLY.Id,\n\t\t\t\tnew WeaponSound(CRYSTAL_HALLY_SPEC_SOUND_FILE, () -\u003e config.crystalHally(), 1, true));\n\n\t\t// Teleports - all use same sound and config\n\t\tallWeapons.put(AnimationIDs.HOUSE_TABS.Id,\n\t\t\t\tnew WeaponSound(TELEPORT_SOUND_FILE, () -\u003e config.teleports(), 1, true));\n\t\tallWeapons.put(AnimationIDs.CAPES.Id,\n\t\t\t\tnew WeaponSound(TELEPORT_SOUND_FILE, () -\u003e config.teleports(), 1, true));\n\t\tallWeapons.put(AnimationIDs.SCROLLS.Id,\n\t\t\t\tnew WeaponSound(TELEPORT_SOUND_FILE, () -\u003e config.teleports(), 1, true));\n\n\t\t// Sound-based weapons\n\t\tallWeapons.put(SoundIDs.BLOWPIPE.Id,\n\t\t\t\tnew WeaponSound(BLOWPIPE_SPEC_SOUND_FILE, () -\u003e config.blowpipe(), 1, false));\n\t\tallWeapons.put(SoundIDs.RUBY_BOLT.Id,\n\t\t\t\tnew WeaponSound(ZARYTE_CROSSBOW_SPEC_SOUND_FILE, () -\u003e config.zaryteCrossBow(), 1, false));\n\t}\n\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\thighlightedItemsList \u003d null;\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged configChanged)\n\t{\n\n\t\tif (configChanged.getGroup().equals(\"grounditems\") \u0026\u0026 configChanged.getKey().equals(\"highlightedItems\"))\n\t\t{\n\t\t\tupdateHighlightedItemsList();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onLootReceived(LootReceived lootReceived) {\n\t\tfor (ItemStack stack : lootReceived.getItems()) {\n\t\t\thandleItem(stack.getId(), stack.getQuantity());\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onHitsplatApplied(HitsplatApplied event)\n\t{\n\t\tActor actor \u003d event.getActor();\n\t\t// Skip if actor is null\n\t\tif (actor \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (config.maxHitBoolean() \u0026\u0026 event.getHitsplat().getHitsplatType()\u003d\u003dHitsplatID.DAMAGE_MAX_ME){\n\t\t\tplaySound(MAX_SOUND_FILE);\n\t\t}\n\n\t}\n\n\t@Subscribe\n\tpublic void onAnimationChanged(AnimationChanged event)\n\t{\n\t\tActor actor \u003d event.getActor();\n\n\t\tif (actor !\u003d client.getLocalPlayer())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tint currentAnimationId \u003d actor.getAnimation();\n\n\t\tWeaponSound weapon \u003d allWeapons.get(currentAnimationId);\n\t\tif (weapon !\u003d null \u0026\u0026 weapon.isAnimationBased \u0026\u0026 weapon.configCheck.get())\n\t\t{\n\t\t\t// Schedule sound to play after specified delay\n\t\t\tscheduleDelayedSound(weapon.soundFile, weapon.delay);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onSoundEffectPlayed(SoundEffectPlayed event)\n\t{\n\t\tint soundId \u003d event.getSoundId();\n\n\t\tPlayer localPlayer \u003d client.getLocalPlayer();\n\t\tif (localPlayer \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tint currentAnimation \u003d localPlayer.getAnimation();\n\n\t\t// Check if this sound should be blocked (animation-based weapons)\n\t\tWeaponSound animationWeapon \u003d allWeapons.get(currentAnimation);\n\t\tif (animationWeapon !\u003d null \u0026\u0026 animationWeapon.isAnimationBased \u0026\u0026 animationWeapon.configCheck.get())\n\t\t{\n\t\t\tevent.consume(); // Block original sound\n\t\t\treturn;\n\t\t}\n\t\t// Check if this is a sound-based weapon\n\t\tWeaponSound soundWeapon \u003d allWeapons.get(soundId);\n\t\tif (soundWeapon !\u003d null \u0026\u0026 !soundWeapon.isAnimationBased \u0026\u0026 soundWeapon.configCheck.get())\n\t\t{\n\t\t\tevent.consume();\n\n\t\t\tif (soundWeapon.delay \u003e 0)\n\t\t\t{\n\t\t\t\tscheduleDelayedSound(soundWeapon.soundFile, soundWeapon.delay);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tplaySound(soundWeapon.soundFile);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void handleItem(int id, int quantity) {\n\t\tfinal ItemComposition itemComposition \u003d itemManager.getItemComposition(id);\n\t\tfinal String name \u003d itemComposition.getName().toLowerCase();\n\n\t\tif (config.highlightSound() \u0026\u0026 highlightedItemsList.contains(name))\n\t\t{\n\t\t\tplaySound(HIGHLIGHTED_SOUND_FILE);\n\t\t\treturn;\n\t\t}\n\n\t\tfinal int gePrice \u003d itemManager.getItemPrice(id) * quantity;\n\t\tfinal int haPrice \u003d itemComposition.getHaPrice() * quantity;\n\t\tfinal int value \u003d getValueByMode(gePrice, haPrice);\n\n\t\tif (config.beginnerClueSound() \u0026\u0026 name.contains(\"clue scroll (beginner)\")){\n\t\t\tplaySound(BEGINNER_CLUE_SOUND_FILE);\n\t\t}\n\t\tif (config.easyClueSound() \u0026\u0026 name.contains(\"clue scroll (easy)\")){\n\t\t\tplaySound(EASY_CLUE_SOUND_FILE);\n\t\t}\n\t\tif (config.mediumClueSound() \u0026\u0026 name.contains(\"clue scroll (medium)\")){\n\t\t\tplaySound(MEDIUM_CLUE_SOUND_FILE);\n\t\t}\n\t\tif (config.hardClueSound() \u0026\u0026 name.contains(\"clue scroll (hard)\")){\n\t\t\tplaySound(HARD_CLUE_SOUND_FILE);\n\t\t}\n\n\t\tif (config.eliteClueSound() \u0026\u0026 name.contains(\"clue scroll (elite)\")){\n\t\t\tplaySound(ELITE_CLUE_SOUND_FILE);\n\t\t}\n\t\tif (config.masterClueSound() \u0026\u0026 name.contains(\"clue scroll (master)\")){\n\t\t\tplaySound(MASTER_CLUE_SOUND_FILE);\n\t\t}\n\n\n\n\t\tif (config.lowestValueSound() \u0026\u0026 value \u003e\u003d config.lowestStart() \u0026\u0026 value \u003c config.lowestEnd())\n\t\t{\n\t\t\tplaySound(LOWEST_SOUND_FILE);\n\t\t}\n\t\tif (config.lowValueSound() \u0026\u0026 value \u003e\u003d config.lowStart() \u0026\u0026 value \u003c config.lowEnd())\n\t\t{\n\t\t\tplaySound(LOW_SOUND_FILE);\n\t\t}\n\t\tif (config.mediumValueSound() \u0026\u0026 value \u003e\u003d config.mediumStart() \u0026\u0026 value \u003c config.mediumEnd())\n\t\t{\n\t\t\tplaySound(MEDIUM_SOUND_FILE);\n\t\t}\n\t\tif (config.highValueSound() \u0026\u0026 value \u003e\u003d config.highStart() \u0026\u0026 value \u003c config.highEnd())\n\t\t{\n\t\t\tplaySound(HIGH_SOUND_FILE);\n\t\t}\n\t\tif (config.highestValueSound() \u0026\u0026 value \u003e\u003d config.highestStart() \u0026\u0026 value \u003c config.highestEnd())\n\t\t{\n\t\t\tplaySound(HIGHEST_SOUND_FILE);\n\t\t}\n\t}\n\n\tprivate void playSound(File f)\n\t{\n\t\tif (!f.exists()) {\n\t\t\tlog.warn(\"Sound file does not exist: {}\", f.getPath());\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\t// Convert percentage (0-100) to gain in dB\n\t\t\tfloat gainInDecibels \u003d convertToDecibels(config.masterVolume());\n\n\t\t\t// Call the instance method\n\t\t\taudioPlayer.play(f, gainInDecibels);\n\t\t} catch (IOException | UnsupportedAudioFileException | LineUnavailableException e) {\n\t\t\tlog.warn(\"Error playing sound {}: {}\", f.getName(), e.getMessage());\n\t\t}\n\n\t}\n\tprivate void scheduleDelayedSound(File soundFile, int delayTicks)\n\t{\n\t\t// Convert ticks to milliseconds (1 tick \u003d 600ms)\n\t\tint delayMs \u003d delayTicks * 600;\n\n\t\texecutor.schedule(() -\u003e {\n\t\t\tplaySound(soundFile); // Use your existing playSound method\n\t\t}, delayMs, TimeUnit.MILLISECONDS);\n\t}\n\n\n\n\tprivate float convertToDecibels(int volumePercentage) {\n\t\t// Avoid log(0)\n\t\tif (volumePercentage \u003c\u003d 0) {\n\t\t\treturn -80.0f; // Very quiet\n\t\t}\n\n\t\t// Convert percentage to a ratio (0.0 to 1.0)\n\t\tfloat ratio \u003d volumePercentage / 100.0f;\n\n\t\t// Convert ratio to decibels\n\t\treturn 20f * (float) Math.log10(ratio);\n\t}\n\n\t// sets volume using dB to linear conversion\n\tprivate void setVolume(int volume)\n\t{\n\t\tfloat vol \u003d volume/100.0f;\n\t\tvol *\u003d config.masterVolume()/100.0f;\n\t\tFloatControl gainControl \u003d (FloatControl)clip.getControl(FloatControl.Type.MASTER_GAIN);\n\t\tgainControl.setValue(20.0f * (float) Math.log10(vol));\n\t}\n\n\t// initialize sound files if they haven\u0027t been created yet\n\tprivate void initSoundFiles()\n\t{\n\t\tif (!CUSTOM_SOUNDS_DIR.exists())\n\t\t{\n\t\t\tCUSTOM_SOUNDS_DIR.mkdirs();\n\t\t}\n\n\t\tfor (File f : SOUND_FILES)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tif (f.exists()) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tInputStream stream \u003d CustomSoundsPlugin.class.getClassLoader().getResourceAsStream(f.getName());\n\t\t\t\tOutputStream out \u003d new FileOutputStream(f);\n\t\t\t\tbyte[] buffer \u003d new byte[8 * 1024];\n\t\t\t\tint bytesRead;\n\t\t\t\twhile ((bytesRead \u003d stream.read(buffer)) !\u003d -1) {\n\t\t\t\t\tout.write(buffer, 0, bytesRead);\n\t\t\t\t}\n\t\t\t\tout.close();\n\t\t\t\tstream.close();\n\t\t\t}  catch (Exception e) {\n\t\t\t\tlog.debug(e + \": \" + f);\n\t\t\t}\n\t\t}\n\n\t}\n\n\tprivate int getValueByMode(int gePrice, int haPrice)\n\t{\n\t\tswitch (groundItemsConfig.valueCalculationMode())\n\t\t{\n\t\t\tcase GE:\n\t\t\t\treturn gePrice;\n\t\t\tcase HA:\n\t\t\t\treturn haPrice;\n\t\t\tdefault: // Highest\n\t\t\t\treturn Math.max(gePrice, haPrice);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onActorDeath(ActorDeath actorDeath) {\n\t\tif (actorDeath.getActor() !\u003d client.getLocalPlayer()){\n\t\t\treturn;\n\t\t}\n\t\tif (config.announceDeath()) {\n\t\t\tplaySound(DIED_SOUND_FILE);\n\t\t}\n\t}\n\n\n\n\tprivate void updateHighlightedItemsList()\n\t{\n\t\tif (!groundItemsConfig.getHighlightItems().isEmpty())\n\t\t{\n\t\t\thighlightedItemsList \u003d Text.fromCSV(groundItemsConfig.getHighlightItems().toLowerCase());\n\t\t}\n\t}\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage event) {\n\t\tString chatMessage \u003d event.getMessage();\n\t\tif (event.getType() !\u003d ChatMessageType.GAMEMESSAGE\n\t\t\t\t\u0026\u0026 event.getType() !\u003d ChatMessageType.SPAM\n\t\t\t\t\u0026\u0026 event.getType() !\u003d ChatMessageType.TRADE\n\t\t\t\t\u0026\u0026 event.getType() !\u003d ChatMessageType.FRIENDSCHATNOTIFICATION)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (config.announceCollectionLog() \u0026\u0026 COLLECTION_LOG_ITEM_REGEX.matcher(event.getMessage()).matches()){\n\t\t\tplaySound(COLLECTIONLOG_SOUND_FILE);\n\t\t}\n\t\telse if (config.petSound() \u0026\u0026 PET_MESSAGES.stream().anyMatch(chatMessage::contains))\n\t\t{\n\t\t\tplaySound(PET_SOUND_FILE);\n\t\t}\n\n\t}\n\n}\n\n","filePath":"src\\main\\java\\org\\CustomSounds\\CustomSoundsPlugin.java"},{"fileName":"SoundIDs.java","content":"package org.CustomSounds;\n\npublic enum SoundIDs\n{\n    BLOWPIPE(800),\n    RUBY_BOLT(2911);\n\n    public final int Id;\n\n    SoundIDs(int id)\n    {\n        this.Id \u003d id;\n    }\n}\n","filePath":"src\\main\\java\\org\\CustomSounds\\SoundIDs.java"},{"fileName":"SoundManager.java","content":"package org.CustomSounds;\n\nimport lombok.extern.slf4j.Slf4j;\n\nimport javax.sound.sampled.*;\nimport java.io.File;\nimport java.io.IOException;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\n@Slf4j\npublic class SoundManager {\n    private final ExecutorService audioExecutor \u003d Executors.newSingleThreadExecutor();\n    private final Map\u003cFile, Clip\u003e clipCache \u003d new HashMap\u003c\u003e();\n    private final CustomSoundsConfig config;\n\n    public SoundManager(CustomSoundsConfig config) {\n        this.config \u003d config;\n    }\n\n    public void playSound(File soundFile) {\n        if (!soundFile.exists()) {\n            log.warn(\"Sound file does not exist: {}\", soundFile.getPath());\n            return;\n        }\n\n        audioExecutor.submit(() -\u003e {\n            try {\n                Clip audioClip \u003d getClip(soundFile);\n                if (audioClip.isRunning()) {\n                    audioClip.stop();\n                }\n                audioClip.setFramePosition(0);\n                setVolume(audioClip, config.masterVolume());\n                audioClip.start();\n            } catch (Exception e) {\n                log.warn(\"Error playing sound {}: {}\", soundFile.getName(), e.getMessage());\n            }\n        });\n    }\n\n    private Clip getClip(File soundFile) throws IOException, UnsupportedAudioFileException, LineUnavailableException {\n        // Check if we have a cached clip\n        if (clipCache.containsKey(soundFile)) {\n            return clipCache.get(soundFile);\n        }\n\n        // Create a new clip\n        try (AudioInputStream audioInputStream \u003d AudioSystem.getAudioInputStream(soundFile)) {\n            AudioFormat format \u003d audioInputStream.getFormat();\n            DataLine.Info info \u003d new DataLine.Info(Clip.class, format);\n            Clip clip \u003d (Clip) AudioSystem.getLine(info);\n            clip.open(audioInputStream);\n\n            // Cache the clip for future use\n            clipCache.put(soundFile, clip);\n\n            return clip;\n        }\n    }\n\n    private void setVolume(Clip clip, int volume) {\n        float vol \u003d volume / 100.0f;\n        if (clip.isControlSupported(FloatControl.Type.MASTER_GAIN)) {\n            FloatControl gainControl \u003d (FloatControl) clip.getControl(FloatControl.Type.MASTER_GAIN);\n            gainControl.setValue(20.0f * (float) Math.log10(vol));\n        }\n    }\n\n    public void shutdown() {\n        audioExecutor.shutdown();\n        // Clean up all cached clips\n        for (Clip clip : clipCache.values()) {\n            if (clip.isOpen()) {\n                clip.close();\n            }\n        }\n        clipCache.clear();\n    }\n}","filePath":"src\\main\\java\\org\\CustomSounds\\SoundManager.java"},{"fileName":"WeaponSound.java","content":"package org.CustomSounds;\n\nimport java.io.File;\nimport java.util.function.Supplier;\n\npublic class WeaponSound {\n    public final File soundFile;\n    public final Supplier\u003cBoolean\u003e configCheck;\n    public final int delay;\n    public final boolean isAnimationBased;\n\n    public WeaponSound(File soundFile, Supplier\u003cBoolean\u003e configCheck, int delay, boolean isAnimationBased) {\n        this.soundFile \u003d soundFile;\n        this.configCheck \u003d configCheck;\n        this.delay \u003d delay;\n        this.isAnimationBased \u003d isAnimationBased;\n    }\n}","filePath":"src\\main\\java\\org\\CustomSounds\\WeaponSound.java"},{"fileName":"PluginLauncher.java","content":"package org.CustomSounds;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class PluginLauncher\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(CustomSoundsPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\org\\CustomSounds\\PluginLauncher.java"}]},{"commit":"b4cd32e9dbffe4e9e989c3d4d46bbc25c741608d","repository":"https://github.com/kulcris/WOMSyncAPITrigger.git","internalName":"womsynctriggerscript","files":[{"fileName":"womsheetsbridgeconfig.java","content":"package com.womsheetsbridge;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"womsheetsbridge\")\npublic interface womsheetsbridgeconfig extends Config\n{\n    @ConfigItem(\n            keyName \u003d \"webAppUrl\",\n            name \u003d \"Apps Script Web App URL\",\n            description \u003d \"The Apps Script Web App deployment URL (the /exec link).\",\n            warning \u003d \"This plugin submits your IP address to a 3rd party website not controlled or verified by the RuneLite Developers.\"\n    )\n    default String webAppUrl()\n    {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d \"enabled\",\n            name \u003d \"Enable bridge\",\n            description \u003d \"If disabled, no requests are sent.\"\n    )\n    default boolean enabled()\n    {\n        return true;\n    }\n    @ConfigItem(\n            keyName \u003d \"debug\",\n            name \u003d \"Debug logging\",\n            description \u003d \"Logs chat lines during pending WOM sync window and HTTP responses.\"\n    )\n    default boolean debug()\n    {\n        return false;\n    }\n}\n","filePath":"src\\main\\java\\com\\womsheetsbridge\\womsheetsbridgeconfig.java"},{"fileName":"womsheetsbridgeplugin.java","content":"package com.womsheetsbridge;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\n\nimport lombok.extern.slf4j.Slf4j;\n\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.MenuOptionClicked;\nimport net.runelite.client.Notifier;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.util.Text;\n\nimport okhttp3.Call;\nimport okhttp3.Callback;\nimport okhttp3.MediaType;\nimport okhttp3.OkHttpClient;\nimport okhttp3.Request;\nimport okhttp3.RequestBody;\nimport okhttp3.Response;\n\nimport java.io.IOException;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\n@Slf4j\n@PluginDescriptor(\n        name \u003d \"WOM  Sheets Bridge\",\n        description \u003d \"Triggers a Google Sheets Apps Script after the Wise Old Man \u0027Sync WOM Group\u0027 completes.\",\n        tags \u003d {\"wom\", \"wise old man\", \"google sheets\", \"apps script\"}\n)\npublic class womsheetsbridgeplugin extends Plugin\n{\n    private static final String SYNC_OPTION_TEXT \u003d \"Sync WOM Group\";\n    private static final long PENDING_WINDOW_MS \u003d 120_000; // 2 minutes\n    private static final long DEBOUNCE_MS \u003d 10_000;\n\n    private static final MediaType JSON \u003d MediaType.parse(\"application/json; charset\u003dutf-8\");\n\n    @Inject private womsheetsbridgeconfig config;\n    @Inject private Notifier notifier;\n\n    // Injected by RuneLite; do not construct your own OkHttpClient/Builder\n    @Inject private OkHttpClient okHttpClient;\n\n    // Kept, but no longer used for HTTP (enqueue is async). Safe to remove later if you want.\n    private final ExecutorService executor \u003d Executors.newSingleThreadExecutor();\n\n    private volatile boolean syncPending \u003d false;\n    private volatile long syncPendingUntilMs \u003d 0L;\n    private volatile long lastTriggerAtMs \u003d 0L;\n\n    @Provides\n    womsheetsbridgeconfig provideConfig(ConfigManager configManager)\n    {\n        return configManager.getConfig(womsheetsbridgeconfig.class);\n    }\n\n    @Override\n    protected void shutDown()\n    {\n        executor.shutdownNow();\n        syncPending \u003d false;\n        syncPendingUntilMs \u003d 0L;\n    }\n\n    @Subscribe\n    public void onMenuOptionClicked(MenuOptionClicked event)\n    {\n        if (!config.enabled())\n        {\n            return;\n        }\n\n        final String option \u003d event.getMenuOption();\n        if (option \u003d\u003d null || !option.contains(SYNC_OPTION_TEXT))\n        {\n            return;\n        }\n\n        syncPending \u003d true;\n        syncPendingUntilMs \u003d System.currentTimeMillis() + PENDING_WINDOW_MS;\n\n        if (config.debug())\n        {\n            log.info(\"[WOMSheetsBridge] Armed pending window for {}ms\", PENDING_WINDOW_MS);\n        }\n    }\n\n    @Subscribe\n    public void onChatMessage(ChatMessage event)\n    {\n        if (!config.enabled() || !syncPending)\n        {\n            return;\n        }\n\n        final long now \u003d System.currentTimeMillis();\n        if (now \u003e syncPendingUntilMs)\n        {\n            syncPending \u003d false;\n            syncPendingUntilMs \u003d 0L;\n\n            if (config.debug())\n            {\n                log.info(\"[WOMSheetsBridge] Pending window expired; disarmed\");\n            }\n            return;\n        }\n\n        final ChatMessageType type \u003d event.getType();\n        if (type !\u003d ChatMessageType.GAMEMESSAGE\n                \u0026\u0026 type !\u003d ChatMessageType.CONSOLE\n                \u0026\u0026 type !\u003d ChatMessageType.ENGINE\n                \u0026\u0026 type !\u003d ChatMessageType.MESBOX)\n        {\n            return;\n        }\n\n        final String raw \u003d event.getMessage();\n        final String msg \u003d raw \u003d\u003d null ? \"\" : Text.removeTags(raw).trim();\n        if (msg.isEmpty())\n        {\n            return;\n        }\n\n        if (config.debug() \u0026\u0026 msg.toLowerCase().startsWith(\"wom:\"))\n        {\n            log.info(\"[WOMSheetsBridge] pending chat: type\u003d{} msg\u003d{}\", type, msg);\n        }\n\n        // Check success match explicitly and log it\n        final boolean success \u003d looksLikeWomSyncSuccess(msg);\n        final boolean failure \u003d looksLikeWomSyncFailure(msg);\n\n        if (config.debug() \u0026\u0026 msg.toLowerCase().startsWith(\"wom:\"))\n        {\n            log.info(\"[WOMSheetsBridge] match check: success\u003d{} failure\u003d{}\", success, failure);\n        }\n\n        if (failure)\n        {\n            syncPending \u003d false;\n            syncPendingUntilMs \u003d 0L;\n\n            if (config.debug())\n            {\n                log.info(\"[WOMSheetsBridge] Detected WOM failure; disarmed. msg\u003d{}\", msg);\n            }\n            return;\n        }\n\n        if (!success)\n        {\n            return;\n        }\n\n        // Debounce\n        if (now - lastTriggerAtMs \u003c DEBOUNCE_MS)\n        {\n            if (config.debug())\n            {\n                log.info(\"[WOMSheetsBridge] Debounced success message ({}ms since last trigger)\", now - lastTriggerAtMs);\n            }\n            return;\n        }\n\n        final String webAppUrl \u003d config.webAppUrl();\n        if (webAppUrl \u003d\u003d null || webAppUrl.isBlank())\n        {\n            notifier.notify(\"WOM  Sheets Bridge: Configure Web App URL.\");\n            syncPending \u003d false;\n            syncPendingUntilMs \u003d 0L;\n            return;\n        }\n\n        syncPending \u003d false;\n        syncPendingUntilMs \u003d 0L;\n        lastTriggerAtMs \u003d now;\n\n        // enqueue() is async already; no executor needed here.\n        triggerAppsScript(webAppUrl);\n    }\n\n    private static boolean looksLikeWomSyncSuccess(String message)\n    {\n        // Example completion line:\n        // \"WOM: Synced 494 clan members. 0 added, 0 removed, 0 ranks changed, 0 ranks ignored.\"\n        final String lower \u003d message.trim().toLowerCase();\n        return lower.startsWith(\"wom:\")\n                \u0026\u0026 lower.contains(\"synced\")\n                \u0026\u0026 lower.contains(\"clan members\");\n    }\n\n    private static boolean looksLikeWomSyncFailure(String message)\n    {\n        final String lower \u003d message.trim().toLowerCase();\n        return lower.startsWith(\"wom:\")\n                \u0026\u0026 (lower.contains(\"failed\") || lower.contains(\"error\"));\n    }\n\n    private void triggerAppsScript(String webAppUrl)\n    {\n        // no secret, minimal payload\n        final String payload \u003d \"{}\";\n\n        try\n        {\n            // OkHttp 4+ prefers (String, MediaType). If your OkHttp is older, swap arg order.\n            final RequestBody body \u003d RequestBody.create(JSON, payload);\n\n            final Request request \u003d new Request.Builder()\n                    .url(webAppUrl)\n                    .post(body)\n                    .build();\n\n            if (config.debug())\n            {\n                log.info(\"[WOMSheetsBridge] HTTP POST (enqueue) -\u003e {}\", webAppUrl);\n            }\n\n            okHttpClient.newCall(request).enqueue(new Callback()\n            {\n                @Override\n                public void onFailure(Call call, IOException e)\n                {\n                    log.warn(\"[WOMSheetsBridge] Error calling Sheets endpoint\", e);\n                    notifier.notify(\"WOM  Sheets Bridge: Error calling Sheets endpoint.\");\n                }\n\n                @Override\n                public void onResponse(Call call, Response response) throws IOException\n                {\n                    try (Response r \u003d response)\n                    {\n                        final int code \u003d r.code();\n                        final String responseBody \u003d r.body() !\u003d null ? r.body().string() : \"\";\n\n                        if (config.debug())\n                        {\n                            log.info(\"[WOMSheetsBridge] HTTP \u003c- {} body\u003d{}\", code, responseBody);\n                        }\n\n                        if (code \u003c 200 || code \u003e\u003d 300)\n                        {\n                            notifier.notify(\"WOM  Sheets Bridge: Trigger failed (HTTP \" + code + \")\");\n                            return;\n                        }\n\n                        notifier.notify(\"WOM  Sheets Bridge: Sheets script triggered.\");\n                    }\n                }\n            });\n        }\n        catch (Exception e)\n        {\n            log.warn(\"[WOMSheetsBridge] Error building/requesting Sheets endpoint\", e);\n            notifier.notify(\"WOM  Sheets Bridge: Error calling Sheets endpoint.\");\n        }\n    }\n\n    // Unused currently, but kept since it was in your file\n    private static String escapeJson(String s)\n    {\n        return s.replace(\"\\\\\", \"\\\\\\\\\").replace(\"\\\"\", \"\\\\\\\"\");\n    }\n}\n","filePath":"src\\main\\java\\com\\womsheetsbridge\\womsheetsbridgeplugin.java"},{"fileName":"womsheetsbridgeplugintest.java","content":"package com.womsheetsbridge;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class womsheetsbridgeplugintest\n{\n    public static void main(String[] args) throws Exception\n    {\n        ExternalPluginManager.loadBuiltin(womsheetsbridgeplugin.class);\n        RuneLite.main(args);\n    }\n}","filePath":"src\\test\\java\\com\\womsheetsbridge\\womsheetsbridgeplugintest.java"}]},{"commit":"b9d65c7472e59224895ff13b05bd459c81661a32","repository":"https://github.com/Boredska/bank-item-stats-toggle.git","internalName":"item-stats-banking","files":[{"fileName":"BankItemStatsToggleConfig.java","content":"package com.toggleitemstats.banking;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"bankitemstatstoggle\")\npublic interface BankItemStatsToggleConfig extends Config\n{\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"consumableStats\",\n\t\t\tname \u003d \"Toggle consumable stats\",\n\t\t\tdescription \u003d \"Toggles tooltips for consumable items (food, boosts)\"\n\t)\n\tdefault boolean consumableStats()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"equipmentStats\",\n\t\t\tname \u003d \"Toggle equipment stats\",\n\t\t\tdescription \u003d \"Toggles tooltips for equipment items (combat bonuses, weight, prayer bonuses)\"\n\t)\n\tdefault boolean equipmentStats()\n\t{\n\t\treturn true;\n\t}\n}\n","filePath":"src\\main\\java\\com\\toggleitemstats\\banking\\BankItemStatsToggleConfig.java"},{"fileName":"BankItemStatsTogglePlugin.java","content":"package com.toggleitemstats.banking;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.WidgetClosed;\nimport net.runelite.api.events.WidgetLoaded;\nimport net.runelite.api.widgets.WidgetID;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Bank Item Stats Toggle\"\n)\npublic class BankItemStatsTogglePlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate BankItemStatsToggleConfig config;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tlog.info(\"Bank Item Stats Toggle started!\");\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tlog.info(\"Bank Item Stats Toggle stopped!\");\n\t}\n\n\t@Subscribe void onWidgetLoaded(WidgetLoaded event){\n\t\tif (event.getGroupId() \u003d\u003d WidgetID.BANK_GROUP_ID)\n\t\t{\n\t\t\tif (config.equipmentStats())\n\t\t\t{\n\t\t\t\tconfigManager.setConfiguration(\"itemstat\",\"equipmentStats\",true);\n\t\t\t}\n\n\t\t\tif (config.consumableStats())\n\t\t\t{\n\t\t\t\tconfigManager.setConfiguration(\"itemstat\",\"consumableStats\",true);\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe void onWidgetClosed(WidgetClosed event){\n\t\tif(event.getGroupId() \u003d\u003d WidgetID.BANK_GROUP_ID){\n\t\t\tif (config.equipmentStats())\n\t\t\t{\n\t\t\t\tconfigManager.setConfiguration(\"itemstat\",\"equipmentStats\",false);\n\t\t\t}\n\n\t\t\tif (config.consumableStats())\n\t\t\t{\n\t\t\t\tconfigManager.setConfiguration(\"itemstat\",\"consumableStats\",false);\n\t\t\t}\n\t\t}\n\t}\n\n\t@Provides\n\tBankItemStatsToggleConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(BankItemStatsToggleConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\toggleitemstats\\banking\\BankItemStatsTogglePlugin.java"},{"fileName":"BankItemStatsTogglePluginTest.java","content":"package com.toggleitemstats.banking;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class BankItemStatsTogglePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(BankItemStatsTogglePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\toggleitemstats\\banking\\BankItemStatsTogglePluginTest.java"}]},{"commit":"13e1a7fea214cb04ff6dd7b0441f455f96f94d27","repository":"https://github.com/Krazune/LineOfSight.git","internalName":"line-of-sight","files":[{"fileName":"LineOfSightPlugin.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Miguel Sousa\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.krazune.lineofsight;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\n@PluginDescriptor(\n\tname \u003d \"Line of Sight\",\n\tdescription \u003d \"Shows the player\u0027s line of sight.\",\n\ttags \u003d {\n\t\t\"line\",\n\t\t\"sight\",\n\t\t\"tiles\",\n\t\t\"markers\",\n\t\t\"range\"\n\t}\n)\npublic class LineOfSightPlugin extends Plugin\n{\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate TilesOverlay lineOfSightTilesOverlay;\n\n\t@Provides\n\tLineOfSightPluginConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(LineOfSightPluginConfig.class);\n\t}\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\toverlayManager.add(lineOfSightTilesOverlay);\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\toverlayManager.remove(lineOfSightTilesOverlay);\n\t}\n}\n","filePath":"src\\main\\java\\com\\krazune\\lineofsight\\LineOfSightPlugin.java"},{"fileName":"LineOfSightPluginConfig.java","content":"/*\r\n * BSD 2-Clause License\r\n *\r\n * Copyright (c) 2021, Miguel Sousa\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer.\r\n *\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\r\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\r\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\r\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\r\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\npackage com.krazune.lineofsight;\r\n\r\nimport net.runelite.client.config.Alpha;\r\nimport net.runelite.client.config.Config;\r\nimport net.runelite.client.config.ConfigGroup;\r\nimport net.runelite.client.config.ConfigItem;\r\nimport net.runelite.client.config.ConfigSection;\r\nimport net.runelite.client.config.Range;\r\n\r\nimport java.awt.Color;\r\n\r\n@ConfigGroup(\"lineofsight\")\r\npublic interface LineOfSightPluginConfig extends Config\r\n{\r\n\t@ConfigSection(\r\n\t\tname \u003d \"General\",\r\n\t\tdescription \u003d \"General configurations\",\r\n\t\tposition \u003d 0\r\n\t)\r\n\tString generalSection \u003d \"General\";\r\n\r\n\t@ConfigSection(\r\n\t\tname \u003d \"Asymmetrical/PVP\",\r\n\t\tdescription \u003d \"Asymmetrical/PVP configurations\",\r\n\t\tposition \u003d 1,\r\n\t\tclosedByDefault \u003d true\r\n\t)\r\n\tString asymmetricalSection \u003d \"Asymmetrical/PVP\";\r\n\r\n\t@ConfigItem(\r\n\t\tposition \u003d 0,\r\n\t\tkeyName \u003d \"overlayRange\",\r\n\t\tname \u003d \"Range\",\r\n\t\tdescription \u003d \"Maximum range of the line of sight overlay.\",\r\n\t\tsection \u003d generalSection\r\n\t)\r\n\t@Range(\r\n\t\tmin \u003d 1,\r\n\t\tmax \u003d 10\r\n\t)\r\n\tdefault int overlayRange()\r\n\t{\r\n\t\treturn 10;\r\n\t}\r\n\r\n\t@ConfigItem(\r\n\t\tposition \u003d 1,\r\n\t\tkeyName \u003d \"outlineOnly\",\r\n\t\tname \u003d \"Outline only\",\r\n\t\tdescription \u003d \"Only show the outer borders.\",\r\n\t\tsection \u003d generalSection\r\n\t)\r\n\tdefault boolean outlineOnly()\r\n\t{\r\n\t\treturn false;\r\n\t}\r\n\r\n\t@ConfigItem(\r\n\t\tposition \u003d 2,\r\n\t\tkeyName \u003d \"includePlayerTile\",\r\n\t\tname \u003d \"Include player tile\",\r\n\t\tdescription \u003d \"Include the current player\u0027s tile in the line of sight area. WARNING: You do not actually have line of sight in this tile.\",\r\n\t\tsection \u003d generalSection\r\n\t)\r\n\tdefault boolean includePlayerTile()\r\n\t{\r\n\t\treturn false;\r\n\t}\r\n\r\n\t@ConfigItem(\r\n\t\tposition \u003d 3,\r\n\t\tkeyName \u003d \"borderColor\",\r\n\t\tname \u003d \"Border color\",\r\n\t\tdescription \u003d \"Color of the overlay\u0027s border.\",\r\n\t\tsection \u003d generalSection\r\n\t)\r\n\t@Alpha\r\n\tdefault Color borderColor()\r\n\t{\r\n\t\treturn Color.YELLOW;\r\n\t}\r\n\r\n\t@ConfigItem(\r\n\t\tposition \u003d 4,\r\n\t\tkeyName \u003d \"borderWidth\",\r\n\t\tname \u003d \"Border width\",\r\n\t\tdescription \u003d \"Width of the overlay\u0027s border.\",\r\n\t\tsection \u003d generalSection\r\n\t)\r\n\t@Range(\r\n\t\tmin \u003d 1\r\n\t)\r\n\tdefault int borderWidth()\r\n\t{\r\n\t\treturn 2;\r\n\t}\r\n\r\n\t// This is unnecessary, can be toggled based on fill alpha\r\n\t// Should be removed but might cause breaking changes (configurations) for current installations\r\n\t@ConfigItem(\r\n\t\tposition \u003d 5,\r\n\t\tkeyName \u003d \"showFill\",\r\n\t\tname \u003d \"Tile fill\",\r\n\t\tdescription \u003d \"Add fill color to tiles. WARNING: This is a costly feature that might lower your game\u0027s performance.\",\r\n\t\tsection \u003d generalSection\r\n\t)\r\n\tdefault boolean showFill()\r\n\t{\r\n\t\treturn false;\r\n\t}\r\n\r\n\t@ConfigItem(\r\n\t\tposition \u003d 6,\r\n\t\tkeyName \u003d \"fillColor\",\r\n\t\tname \u003d \"Fill color\",\r\n\t\tdescription \u003d \"Color of the overlay\u0027s tiles.\",\r\n\t\tsection \u003d generalSection\r\n\t)\r\n\t@Alpha\r\n\tdefault Color fillColor()\r\n\t{\r\n\t\treturn new Color(255, 255, 0, 45);\r\n\t}\r\n\r\n\t@ConfigItem(\r\n\t\tposition \u003d 0,\r\n\t\tkeyName \u003d \"includeAsymmetrical\",\r\n\t\tname \u003d \"Include asymmetrical/PVP tiles\",\r\n\t\tdescription \u003d \"Includes tiles that have line of sight to the player (this is how line of sight is calculated in PVP).\",\r\n\t\tsection \u003d asymmetricalSection\r\n\t)\r\n\tdefault boolean includeAsymmetrical()\r\n\t{\r\n\t\treturn false;\r\n\t}\r\n\r\n\t@ConfigItem(\r\n\t\tposition \u003d 1,\r\n\t\tkeyName \u003d \"asymmetricalBorderColor\",\r\n\t\tname \u003d \"Border color\",\r\n\t\tdescription \u003d \"Color of the overlay\u0027s border.\",\r\n\t\tsection \u003d asymmetricalSection\r\n\t)\r\n\t@Alpha\r\n\tdefault Color asymmetricalBorderColor()\r\n\t{\r\n\t\treturn Color.RED;\r\n\t}\r\n\r\n\t@ConfigItem(\r\n\t\tposition \u003d 2,\r\n\t\tkeyName \u003d \"asymmetricalBorderWidth\",\r\n\t\tname \u003d \"Border width\",\r\n\t\tdescription \u003d \"Color of the overlay\u0027s border.\",\r\n\t\tsection \u003d asymmetricalSection\r\n\t)\r\n\t@Range(\r\n\t\t\tmin \u003d 1\r\n\t)\r\n\tdefault int asymmetricalBorderWidth()\r\n\t{\r\n\t\treturn 2;\r\n\t}\r\n\r\n\t@ConfigItem(\r\n\t\tposition \u003d 3,\r\n\t\tkeyName \u003d \"showAsymmetricalFill\",\r\n\t\tname \u003d \"Tile fill\",\r\n\t\tdescription \u003d \"Add fill color to tiles. WARNING: This is a costly feature that might lower your game\u0027s performance.\",\r\n\t\tsection \u003d asymmetricalSection\r\n\t)\r\n\tdefault boolean showAsymmetricalFill()\r\n\t{\r\n\t\treturn false;\r\n\t}\r\n\r\n\t@ConfigItem(\r\n\t\tposition \u003d 4,\r\n\t\tkeyName \u003d \"asymmetricalFillColor\",\r\n\t\tname \u003d \"Fill color\",\r\n\t\t\tdescription \u003d \"Color of the overlay\u0027s tiles.\",\r\n\t\tsection \u003d asymmetricalSection\r\n\t)\r\n\t@Alpha\r\n\tdefault Color asymmetricalFillColor()\r\n\t{\r\n\t\treturn new Color(255, 0, 0, 45);\r\n\t}\r\n}\r\n","filePath":"src\\main\\java\\com\\krazune\\lineofsight\\LineOfSightPluginConfig.java"},{"fileName":"TilesOverlay.java","content":"/*\r\n * BSD 2-Clause License\r\n *\r\n * Copyright (c) 2021, Miguel Sousa\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer.\r\n *\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\r\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\r\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\r\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\r\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\npackage com.krazune.lineofsight;\r\n\r\nimport java.awt.BasicStroke;\r\nimport java.awt.Color;\r\nimport java.awt.Dimension;\r\nimport java.awt.Graphics2D;\r\nimport java.awt.Polygon;\r\nimport java.awt.Stroke;\r\nimport javax.inject.Inject;\r\n\r\nimport net.runelite.api.Client;\r\nimport net.runelite.api.CollisionDataFlag;\r\nimport net.runelite.api.Perspective;\r\nimport net.runelite.api.Player;\r\nimport net.runelite.api.Point;\r\nimport net.runelite.api.WorldView;\r\nimport net.runelite.api.coords.LocalPoint;\r\nimport net.runelite.api.coords.WorldArea;\r\nimport net.runelite.api.coords.WorldPoint;\r\nimport net.runelite.client.ui.overlay.Overlay;\r\nimport net.runelite.client.ui.overlay.OverlayLayer;\r\nimport net.runelite.client.ui.overlay.OverlayPosition;\r\nimport net.runelite.client.ui.overlay.OverlayUtil;\r\n\r\n// One day I will refactor this mess but today is not that day\r\npublic class TilesOverlay extends Overlay\r\n{\r\n\tClient client;\r\n\r\n\tLineOfSightPluginConfig config;\r\n\r\n\t@Inject\r\n\tpublic TilesOverlay(Client client, LineOfSightPluginConfig config)\r\n\t{\r\n\t\tthis.client \u003d client;\r\n\t\tthis.config \u003d config;\r\n\r\n\t\tsetOverlayConfigurations();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic Dimension render(Graphics2D graphics)\r\n\t{\r\n\t\tif (config.includeAsymmetrical())\r\n\t\t{\r\n\t\t\t// It\u0027s not efficient to render these separately from the regular LOS, but will do for now\r\n\t\t\trenderAsymmetricalLineOfSight(graphics);\r\n\t\t}\r\n\r\n\t\trenderLineOfSight(graphics);\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\tprivate void setOverlayConfigurations()\r\n\t{\r\n\t\tsetPosition(OverlayPosition.DYNAMIC);\r\n\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\r\n\t}\r\n\r\n\tprivate void renderAsymmetricalLineOfSight(Graphics2D graphics)\r\n\t{\r\n\t\tWorldPoint[][] asymmetricalSightPoints \u003d getAsymmetricalSightWorldPoints();\r\n\r\n\t\trenderWorldPoints(\r\n\t\t\tgraphics,\r\n\t\t\tasymmetricalSightPoints,\r\n\t\t\tconfig.outlineOnly(),\r\n\t\t\tconfig.showAsymmetricalFill(),\r\n\t\t\tconfig.asymmetricalFillColor(),\r\n\t\t\tconfig.asymmetricalBorderColor(),\r\n\t\t\tconfig.asymmetricalBorderWidth()\r\n\t\t);\r\n\t}\r\n\r\n\tprivate void renderLineOfSight(Graphics2D graphics)\r\n\t{\r\n\t\tWorldPoint[][] sightPoints \u003d getSightWorldPoints(config.includePlayerTile());\r\n\r\n\t\trenderWorldPoints(\r\n\t\t\tgraphics,\r\n\t\t\tsightPoints,\r\n\t\t\tconfig.outlineOnly(),\r\n\t\t\tconfig.showFill(),\r\n\t\t\tconfig.fillColor(),\r\n\t\t\tconfig.borderColor(),\r\n\t\t\tconfig.borderWidth()\r\n\t\t);\r\n\t}\r\n\r\n\tprivate void renderWorldPoints(Graphics2D graphics, WorldPoint[][] sightPoints, boolean outlineOnly, boolean showFill, Color fillColor, Color borderColor, int borderWidth)\r\n\t{\r\n\t\tif (outlineOnly)\r\n\t\t{\r\n\t\t\trenderOutlineWorldPoints(graphics, sightPoints, showFill, fillColor, borderColor, borderWidth);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\trenderWorldPointsFullGrid(graphics, sightPoints, showFill, fillColor, borderColor, borderWidth);\r\n\t}\r\n\r\n\tprivate WorldPoint[][] getSightWorldPoints(boolean includePlayerTile)\r\n\t{\r\n\t\tint areaLength \u003d config.overlayRange() * 2 + 1;\r\n\t\tWorldPoint[][] worldPoints \u003d new WorldPoint[areaLength][areaLength];\r\n\r\n\t\tPlayer player \u003d client.getLocalPlayer();\r\n\r\n\t\tif (player \u003d\u003d null)\r\n\t\t{\r\n\t\t\treturn worldPoints;\r\n\t\t}\r\n\r\n\t\tWorldArea area \u003d player.getWorldArea();\r\n\r\n\t\tif (area \u003d\u003d null)\r\n\t\t{\r\n\t\t\treturn worldPoints;\r\n\t\t}\r\n\r\n\t\tint initialX \u003d area.getX() - config.overlayRange();\r\n\t\tint initialY \u003d area.getY() - config.overlayRange();\r\n\t\tint maxX \u003d area.getX() + config.overlayRange();\r\n\t\tint maxY \u003d area.getY() + config.overlayRange();\r\n\t\tWorldView worldView \u003d client.getTopLevelWorldView();\r\n\r\n\t\tfor (int x \u003d initialX, i \u003d 0; x \u003c\u003d maxX; ++x, ++i)\r\n\t\t{\r\n\t\t\tfor (int y \u003d initialY, j \u003d 0; y \u003c\u003d maxY; ++y, ++j)\r\n\t\t\t{\r\n\t\t\t\tWorldPoint newSightWorldPoint \u003d new WorldPoint(x, y, area.getPlane());\r\n\r\n\t\t\t\tif (area.hasLineOfSightTo(worldView, newSightWorldPoint) || (x \u003d\u003d area.getX() \u0026\u0026 y \u003d\u003d area.getY() \u0026\u0026 includePlayerTile))\r\n\t\t\t\t{\r\n\t\t\t\t\tworldPoints[i][j] \u003d newSightWorldPoint;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn worldPoints;\r\n\t}\r\n\r\n\tprivate WorldPoint[][] getAsymmetricalSightWorldPoints()\r\n\t{\r\n\t\tint areaLength \u003d config.overlayRange() * 2 + 1;\r\n\t\tWorldPoint[][] worldPoints \u003d new WorldPoint[areaLength][areaLength];\r\n\r\n\t\tPlayer player \u003d client.getLocalPlayer();\r\n\r\n\t\tif (player \u003d\u003d null)\r\n\t\t{\r\n\t\t\treturn worldPoints;\r\n\t\t}\r\n\r\n\t\tWorldArea area \u003d player.getWorldArea();\r\n\r\n\t\tif (area \u003d\u003d null)\r\n\t\t{\r\n\t\t\treturn worldPoints;\r\n\t\t}\r\n\r\n\t\tint initialX \u003d area.getX() - config.overlayRange();\r\n\t\tint initialY \u003d area.getY() - config.overlayRange();\r\n\t\tint maxX \u003d area.getX() + config.overlayRange();\r\n\t\tint maxY \u003d area.getY() + config.overlayRange();\r\n\t\tWorldView worldView \u003d client.getTopLevelWorldView();\r\n\t\tint[][] collisionFlags \u003d worldView.getCollisionMaps()[area.getPlane()].getFlags();\r\n\r\n\t\tfor (int x \u003d initialX, i \u003d 0; x \u003c\u003d maxX; ++x, ++i)\r\n\t\t{\r\n\t\t\tfor (int y \u003d initialY, j \u003d 0; y \u003c\u003d maxY; ++y, ++j)\r\n\t\t\t{\r\n\t\t\t\tif ((x \u003d\u003d area.getX() \u0026\u0026 y \u003d\u003d area.getY()))\r\n\t\t\t\t{\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tWorldPoint newSightWorldPoint \u003d new WorldPoint(x, y, area.getPlane());\r\n\t\t\t\tboolean hasSight \u003d area.hasLineOfSightTo(worldView, newSightWorldPoint);\r\n\t\t\t\tboolean hasSightFromTarget \u003d newSightWorldPoint.toWorldArea().hasLineOfSightTo(worldView, area.toWorldPoint());\r\n\r\n\t\t\t\tif (!hasSight \u0026\u0026 hasSightFromTarget)\r\n\t\t\t\t{\r\n\t\t\t\t\tLocalPoint localPoint \u003d LocalPoint.fromWorld(worldView, newSightWorldPoint);\r\n\t\t\t\t\tint collisionFlag \u003d collisionFlags[localPoint.getSceneX()][localPoint.getSceneY()];\r\n\r\n\t\t\t\t\tif ((collisionFlag \u0026 CollisionDataFlag.BLOCK_LINE_OF_SIGHT_FULL) \u003d\u003d 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tworldPoints[i][j] \u003d newSightWorldPoint;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn worldPoints;\r\n\t}\r\n\r\n\tprivate void renderOutlineWorldPoints(Graphics2D graphics, WorldPoint[][] sightPoints, boolean showFill, Color fillColor, Color borderColor, int borderWidth)\r\n\t{\r\n\t\tint areaLength \u003d config.overlayRange() * 2 + 1;\r\n\r\n\t\tfor (int x \u003d 0; x \u003c areaLength; ++x)\r\n\t\t{\r\n\t\t\tfor (int y \u003d 0; y \u003c areaLength; ++y)\r\n\t\t\t{\r\n\t\t\t\tif (sightPoints[x][y] \u003d\u003d null)\r\n\t\t\t\t{\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (showFill)\r\n\t\t\t\t{\r\n\t\t\t\t\tPolygon tilePolygon \u003d generatePolygonFromWorldPoint(sightPoints[x][y]);\r\n\r\n\t\t\t\t\tif (tilePolygon !\u003d null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tgraphics.setColor(fillColor);\r\n\t\t\t\t\t\tgraphics.fill(tilePolygon);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tboolean topBorder \u003d y \u003d\u003d areaLength - 1 || sightPoints[x][y + 1] \u003d\u003d null;\r\n\t\t\t\tboolean rightBorder \u003d x \u003d\u003d areaLength - 1 || sightPoints[x + 1][y] \u003d\u003d null;\r\n\t\t\t\tboolean bottomBorder \u003d y \u003d\u003d 0 || sightPoints[x][y - 1] \u003d\u003d null;\r\n\t\t\t\tboolean leftBorder \u003d x \u003d\u003d 0 || sightPoints[x - 1][y] \u003d\u003d null;\r\n\r\n\t\t\t\trenderWorldPointBorders(graphics, sightPoints[x][y], topBorder, rightBorder, bottomBorder, leftBorder, borderColor, borderWidth);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate Polygon generatePolygonFromWorldPoint(WorldPoint worldPoint)\r\n\t{\r\n\t\tLocalPoint localPoint \u003d LocalPoint.fromWorld(client.getTopLevelWorldView(), worldPoint);\r\n\r\n\t\tif (localPoint \u003d\u003d null)\r\n\t\t{\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn Perspective.getCanvasTilePoly(client, localPoint);\r\n\t}\r\n\r\n\tprivate void renderWorldPointBorders(Graphics2D graphics, WorldPoint worldPoint, boolean topBorder, boolean rightBorder, boolean bottomBorder, boolean leftBorder, Color borderColor, int borderWidth)\r\n\t{\r\n\t\tWorldView worldView \u003d client.getTopLevelWorldView();\r\n\t\tLocalPoint localPoint \u003d LocalPoint.fromWorld(worldView, worldPoint);\r\n\r\n\t\tif (localPoint \u003d\u003d null)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tint plane \u003d worldPoint.getPlane();\r\n\r\n\t\tgraphics.setColor(borderColor);\r\n\t\tgraphics.setStroke(new BasicStroke(borderWidth));\r\n\r\n\t\tif (topBorder)\r\n\t\t{\r\n\t\t\tPoint canvasPointA \u003d Perspective.localToCanvas(client, new LocalPoint(localPoint.getX() - 64, localPoint.getY() + 64, worldView), plane);\r\n\r\n\t\t\tif (canvasPointA !\u003d null)\r\n\t\t\t{\r\n\t\t\t\tint x1 \u003d canvasPointA.getX();\r\n\t\t\t\tint y1 \u003d canvasPointA.getY();\r\n\r\n\t\t\t\tPoint canvasPointB \u003d Perspective.localToCanvas(client, new LocalPoint(localPoint.getX() + 64, localPoint.getY() + 64, worldView), plane);\r\n\r\n\t\t\t\tif (canvasPointB !\u003d null)\r\n\t\t\t\t{\r\n\t\t\t\t\tint x2 \u003d canvasPointB.getX();\r\n\t\t\t\t\tint y2 \u003d canvasPointB.getY();\r\n\r\n\t\t\t\t\tgraphics.drawLine(x1, y1, x2, y2);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (rightBorder)\r\n\t\t{\r\n\t\t\tPoint canvasPointA \u003d Perspective.localToCanvas(client, new LocalPoint(localPoint.getX() + 64, localPoint.getY() - 64, worldView), plane);\r\n\r\n\t\t\tif (canvasPointA !\u003d null)\r\n\t\t\t{\r\n\t\t\t\tint x1 \u003d canvasPointA.getX();\r\n\t\t\t\tint y1 \u003d canvasPointA.getY();\r\n\r\n\t\t\t\tPoint canvasPointB \u003d Perspective.localToCanvas(client, new LocalPoint(localPoint.getX() + 64, localPoint.getY() + 64, worldView), plane);\r\n\r\n\t\t\t\tif (canvasPointB !\u003d null)\r\n\t\t\t\t{\r\n\t\t\t\t\tint x2 \u003d canvasPointB.getX();\r\n\t\t\t\t\tint y2 \u003d canvasPointB.getY();\r\n\r\n\t\t\t\t\tgraphics.drawLine(x1, y1, x2, y2);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (bottomBorder)\r\n\t\t{\r\n\t\t\tPoint canvasPointA \u003d Perspective.localToCanvas(client, new LocalPoint(localPoint.getX() - 64, localPoint.getY() - 64, worldView), plane);\r\n\r\n\t\t\tif (canvasPointA !\u003d null)\r\n\t\t\t{\r\n\t\t\t\tint x1 \u003d canvasPointA.getX();\r\n\t\t\t\tint y1 \u003d canvasPointA.getY();\r\n\r\n\t\t\t\tPoint canvasPointB \u003d Perspective.localToCanvas(client, new LocalPoint(localPoint.getX() + 64, localPoint.getY() - 64, worldView), plane);\r\n\r\n\t\t\t\tif (canvasPointB !\u003d null)\r\n\t\t\t\t{\r\n\t\t\t\t\tint x2 \u003d canvasPointB.getX();\r\n\t\t\t\t\tint y2 \u003d canvasPointB.getY();\r\n\r\n\t\t\t\t\tgraphics.drawLine(x1, y1, x2, y2);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (leftBorder)\r\n\t\t{\r\n\t\t\tPoint canvasPointA \u003d Perspective.localToCanvas(client, new LocalPoint(localPoint.getX() - 64, localPoint.getY() - 64, worldView), plane);\r\n\r\n\t\t\tif (canvasPointA !\u003d null)\r\n\t\t\t{\r\n\t\t\t\tint x1 \u003d canvasPointA.getX();\r\n\t\t\t\tint y1 \u003d canvasPointA.getY();\r\n\r\n\t\t\t\tPoint canvasPointB \u003d Perspective.localToCanvas(client, new LocalPoint(localPoint.getX() - 64, localPoint.getY() + 64, worldView), plane);\r\n\r\n\t\t\t\tif (canvasPointB !\u003d null)\r\n\t\t\t\t{\r\n\t\t\t\t\tint x2 \u003d canvasPointB.getX();\r\n\t\t\t\t\tint y2 \u003d canvasPointB.getY();\r\n\r\n\t\t\t\t\tgraphics.drawLine(x1, y1, x2, y2);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate void renderWorldPointsFullGrid(Graphics2D graphics, WorldPoint[][] sightPoints, boolean showFill, Color fillColor, Color borderColor, int borderWidth)\r\n\t{\r\n\t\tint areaLength \u003d config.overlayRange() * 2 + 1;\r\n\t\tColor transparent \u003d new Color(0, 0, 0, 0);\r\n\t\tStroke stroke \u003d new BasicStroke(borderWidth);\r\n\r\n\t\tfor (int x \u003d 0; x \u003c areaLength; ++x)\r\n\t\t{\r\n\t\t\tfor (int y \u003d 0; y \u003c areaLength; ++y)\r\n\t\t\t{\r\n\t\t\t\tif (sightPoints[x][y] \u003d\u003d null)\r\n\t\t\t\t{\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tPolygon polygon \u003d generatePolygonFromWorldPoint(sightPoints[x][y]);\r\n\r\n\t\t\t\tif (polygon \u003d\u003d null)\r\n\t\t\t\t{\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (showFill)\r\n\t\t\t\t{\r\n\t\t\t\t\tOverlayUtil.renderPolygon(graphics, polygon, borderColor, fillColor, stroke);\r\n\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (x \u003d\u003d 0 || x \u003d\u003d areaLength - 1 || y \u003d\u003d 0 || y \u003d\u003d areaLength - 1 || sightPoints[x + 1][y] \u003d\u003d null || sightPoints[x - 1][y] \u003d\u003d null || sightPoints[x][y + 1] \u003d\u003d null || sightPoints[x][y - 1] \u003d\u003d null)\r\n\t\t\t\t{\r\n\t\t\t\t\tOverlayUtil.renderPolygon(graphics, polygon, borderColor, transparent, stroke);\r\n\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsightPoints[x][y] \u003d null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","filePath":"src\\main\\java\\com\\krazune\\lineofsight\\TilesOverlay.java"},{"fileName":"LineOfSightPluginTest.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Miguel Sousa\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.krazune.lineofsight;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class LineOfSightPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(LineOfSightPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}\n","filePath":"src\\test\\java\\com\\krazune\\lineofsight\\LineOfSightPluginTest.java"}]},{"commit":"5a78264720b00e9e79f47f17e402953941c2b026","repository":"https://github.com/MarbleTurtle/FriendsExporter.git","internalName":"friends-exporter","files":[{"fileName":"FriendsExporterConfig.java","content":"package com.FriendsExporter;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"friendsexporter\")\npublic interface FriendsExporterConfig extends Config\n{\n\t@ConfigItem(\n\t\tkeyName \u003d \"lineStart\",\n\t\tname \u003d \"Line Start\",\n\t\tdescription \u003d \"What format to add at the beginning of a line.\",\n\t\tposition \u003d 1\n\t)\n\tdefault LineLeads lineLeads() {return LineLeads.None;}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"prev\",\n\t\tname \u003d \"Include Previous Names\",\n\t\tdescription \u003d \"Shows the previous name if available.\",\n\t\tposition \u003d 2\n\t)\n\tdefault boolean includePrevName() {return true;}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"note\",\n\t\tname \u003d \"Include Note\",\n\t\tdescription \u003d \"Includes note from Friend Notes plugin on Friends List export.\",\n\t\tposition \u003d 3\n\t)\n\tdefault boolean includeNote() {return true;}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"unrank\",\n\t\tname \u003d \"Show Unranked Players\",\n\t\tdescription \u003d \"Shows players that do not have a rank but are still friends in ranks export.\",\n\t\tposition \u003d 4\n\t)\n\tdefault boolean showUnranked() {return false;}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"separator\",\n\t\tname \u003d \"Separator\",\n\t\tdescription \u003d \"Separator between fields for a player.\",\n\t\tposition \u003d 5\n\t)\n\tdefault String getSeparator() {return \" - \";}\n}\n","filePath":"src\\main\\java\\com\\FriendsExporter\\FriendsExporterConfig.java"},{"fileName":"FriendsExporterPlugin.java","content":"package com.FriendsExporter;\n\nimport com.google.inject.Provides;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.Friend;\nimport net.runelite.api.FriendsChatManager;\nimport net.runelite.api.FriendsChatMember;\nimport net.runelite.api.Ignore;\nimport net.runelite.api.Player;\nimport net.runelite.api.clan.ClanChannelMember;\nimport net.runelite.api.gameval.InterfaceID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.menus.MenuManager;\nimport net.runelite.client.menus.WidgetMenuOption;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.util.Text;\nimport org.apache.commons.lang3.StringUtils;\n\nimport javax.inject.Inject;\nimport java.io.BufferedWriter;\nimport java.io.File;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.text.DateFormat;\nimport java.text.SimpleDateFormat;\nimport java.util.ArrayList;\nimport java.util.Comparator;\nimport java.util.Date;\nimport java.util.List;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.stream.Collectors;\n\nimport static net.runelite.client.RuneLite.RUNELITE_DIR;\n\n@Slf4j\n@PluginDescriptor(\n        name \u003d \"Friends Exporter\"\n)\npublic class FriendsExporterPlugin extends Plugin {\n\n    private static final String EXPORT \u003d \"Export\";\n    public static final File EXPORT_DIR \u003d new File(RUNELITE_DIR, \"player-exports\");\n\n    private static final WidgetMenuOption FRIENDS_LIST\n            \u003d new WidgetMenuOption(EXPORT, \"Friends List\", InterfaceID.Toplevel.STONE9, InterfaceID.ToplevelOsrsStretch.STONE9, InterfaceID.ToplevelPreEoc.STONE9);\n\n    private static final WidgetMenuOption IGNORE_LIST\n            \u003d new WidgetMenuOption(EXPORT, \"Ignore List\", InterfaceID.Toplevel.STONE9, InterfaceID.ToplevelOsrsStretch.STONE9, InterfaceID.ToplevelPreEoc.STONE9);\n\n    private static final WidgetMenuOption CHAT_CHANNEL_LIST\n            \u003d new WidgetMenuOption(EXPORT, \"Current Members\", InterfaceID.SideChannels.TAB_0);\n\n    private static final WidgetMenuOption CHAT_CHANNEL_RANKS\n            \u003d new WidgetMenuOption(EXPORT, \"Rank List\", InterfaceID.SideChannels.TAB_0);\n\n    private static final WidgetMenuOption CLAN_CHAT_MEMBERS\n            \u003d new WidgetMenuOption(EXPORT, \"Online Clan Members\", InterfaceID.SideChannels.TAB_1);\n\n    private static final WidgetMenuOption CLAN_CHAT_JOINS\n            \u003d new WidgetMenuOption(EXPORT, \"All Clan Members\", InterfaceID.SideChannels.TAB_1);\n\n    private static final WidgetMenuOption CLAN_CHAT_BANS\n            \u003d new WidgetMenuOption(EXPORT, \"Clan Bans\", InterfaceID.SideChannels.TAB_1);\n\n    private static final WidgetMenuOption CLAN_CHAT_EVENTS\n            \u003d new WidgetMenuOption(EXPORT, \"Clan Events\", InterfaceID.SideChannels.TAB_1);\n\n    private static final WidgetMenuOption EMOTES\n            \u003d new WidgetMenuOption(EXPORT, \"Local Players\", InterfaceID.Toplevel.STONE12, InterfaceID.ToplevelOsrsStretch.STONE12, InterfaceID.ToplevelPreEoc.STONE12);\n\n    private static final DateFormat TIME_FORMAT \u003d new SimpleDateFormat(\"yyyy-MM-dd_HH-mm-ss\");\n    @Inject\n    private Client client;\n    @Inject\n    private MenuManager menuManager;\n    @Inject\n    private FriendsExporterConfig config;\n    @Inject\n    private ConfigManager configManager;\n    @Inject\n    private ScheduledExecutorService executor;\n\n    @Override\n    protected void startUp() throws Exception {\n        EXPORT_DIR.mkdirs();\n        addCustomOptions();\n    }\n\n    @Override\n    protected void shutDown() throws Exception {\n        removeCustomOptions();\n    }\n\n    static String format(Date date) {\n        synchronized(TIME_FORMAT) {\n            return TIME_FORMAT.format(date);\n        }\n    }\n\n    private void addCustomOptions() {\n        menuManager.addManagedCustomMenu(FRIENDS_LIST, e -\u003e exportFriendsList());\n        menuManager.addManagedCustomMenu(IGNORE_LIST, e -\u003e exportIgnoreList());\n        menuManager.addManagedCustomMenu(CHAT_CHANNEL_LIST, e -\u003e exportChatChannelMembers());\n        menuManager.addManagedCustomMenu(CHAT_CHANNEL_RANKS, e -\u003e exportChatChannelRankList());\n        menuManager.addManagedCustomMenu(CLAN_CHAT_MEMBERS, e -\u003e exportOnlineClanMembers());\n        menuManager.addManagedCustomMenu(CLAN_CHAT_JOINS, e -\u003e exportAllClanMembers());\n        menuManager.addManagedCustomMenu(CLAN_CHAT_BANS, e -\u003e exportClanBanList());\n        menuManager.addManagedCustomMenu(CLAN_CHAT_EVENTS, e -\u003e exportClanEventList());\n        menuManager.addManagedCustomMenu(EMOTES, e -\u003e exportLocalPlayers());\n    }\n\n    private void removeCustomOptions() {\n        menuManager.removeManagedCustomMenu(FRIENDS_LIST);\n        menuManager.removeManagedCustomMenu(IGNORE_LIST);\n        menuManager.removeManagedCustomMenu(CHAT_CHANNEL_LIST);\n        menuManager.removeManagedCustomMenu(CHAT_CHANNEL_RANKS);\n        menuManager.removeManagedCustomMenu(CLAN_CHAT_MEMBERS);\n        menuManager.removeManagedCustomMenu(CLAN_CHAT_JOINS);\n        menuManager.removeManagedCustomMenu(CLAN_CHAT_BANS);\n        menuManager.removeManagedCustomMenu(CLAN_CHAT_EVENTS);\n        menuManager.removeManagedCustomMenu(EMOTES);\n    }\n\n    /**\n     * Exports the player\u0027s Friends List.\n     */\n    private void exportFriendsList() {\n        String filename \u003d client.getLocalPlayer().getName() + \" Friends \" + format(new Date()) + \".txt\";\n        Friend[] array \u003d client.getFriendContainer().getMembers();\n        List\u003cPlayerListItem\u003e playerList \u003d new ArrayList\u003c\u003e();\n        for (int i \u003d 0; i !\u003d client.getFriendContainer().getMembers().length; ++i) {\n            PlayerListItem playerListItem \u003d new PlayerListItem();\n            playerListItem.setName(array[i].getName());\n            if (!StringUtils.isEmpty(array[i].getPrevName()) \u0026\u0026 config.includePrevName()) {\n                playerListItem.setPreviousName(array[i].getPrevName());\n            }\n            if (config.includeNote()) {\n                playerListItem.setNote(configManager.getConfiguration(\"friendNotes\", \"note_\" + playerListItem.getName()));\n            }\n            playerList.add(playerListItem);\n        }\n        exportList(filename, playerList);\n    }\n\n\n    /**\n     * Exports the player\u0027s Ignore List.\n     */\n    private void exportIgnoreList() {\n        String filename \u003d client.getLocalPlayer().getName() + \" Ignore \" + format(new Date()) + \".txt\";\n        Ignore[] array \u003d client.getIgnoreContainer().getMembers();\n        List\u003cPlayerListItem\u003e playerList \u003d new ArrayList\u003c\u003e();\n        for (int i \u003d 0; i !\u003d array.length; ++i) {\n            PlayerListItem playerListItem \u003d new PlayerListItem();\n            playerListItem.setName(array[i].getName());\n            if (!StringUtils.isEmpty(array[i].getPrevName()) \u0026\u0026 config.includePrevName()) {\n                playerListItem.setPreviousName(array[i].getPrevName());\n            }\n            if (config.includeNote()) {\n                playerListItem.setNote(configManager.getConfiguration(\"friendNotes\", \"note_\" + playerListItem.getName()));\n            }\n            playerList.add(playerListItem);\n        }\n        exportList(filename, playerList);\n    }\n\n\n    /**\n     * Exports all members of the player\u0027s own chat-channel. Requires the Chat-channel Setup widget to be open.\n     */\n    private void exportChatChannelRankList() {\n        Friend[] friendsList \u003d client.getFriendContainer().getMembers();\n        Widget channelSetupListWidget \u003d client.getWidget(InterfaceID.ChatchannelSetup.LIST);\n\n        if (channelSetupListWidget \u003d\u003d null) {\n            client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"Please open Chat-channel Setup found in the Chat-channel tab to export this list.\", \"\");\n            return;\n        }\n\n        Widget[] children \u003d channelSetupListWidget.getChildren();\n        if (children \u003d\u003d null) return;\n\n        List\u003cPlayerListItem\u003e playerList \u003d new ArrayList\u003c\u003e();\n\n        for (int i \u003d 0; i \u003c children.length/4; ++i) {\n            String rank \u003d children[(i * 4) + 1].getText();\n            if(!rank.equals(\"Not ranked\") || config.showUnranked()) {\n                String prevName \u003d \"\";\n                if (config.includePrevName()) {\n                    for (Friend friend : friendsList) {\n                        String friendName \u003d friend.getName();\n                        if (friendName.equals(children[(i * 4) + 2].getText())) {\n                            if (!StringUtils.isEmpty(friend.getPrevName())) {\n                                prevName \u003d friend.getPrevName();\n                            }\n                            break;\n                        }\n                    }\n                }\n\n                PlayerListItem playerListItem \u003d new PlayerListItem();\n                playerListItem.setName(children[(i * 4) + 2].getText());\n                playerListItem.setPreviousName(prevName);\n                playerListItem.setRank(!rank.equals(\"Not ranked\") ? rank : \"No Rank\");\n\n                playerList.add(playerListItem);\n            }\n        }\n        String filename \u003d client.getLocalPlayer().getName() + \" Ranks \" + format(new Date()) + \".txt\";\n        exportList(filename, playerList);\n    }\n\n    /**\n     * Exports players in the current Chat Channel. Player must be in a Chat Channel to have this available to them.\n     * Drops a message in the Game chat if the player is not currently in a Chat Channel.\n     *\n     * This was previously known as Friends Chat.\n     */\n    private void exportChatChannelMembers() {\n        FriendsChatManager manager \u003d client.getFriendsChatManager();\n        if (manager \u003d\u003d null) {\n            client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"Please join a Chat-channel to export this list.\", \"\");\n            return;\n        }\n\n        FriendsChatMember[] members \u003d manager.getMembers();\n        List\u003cPlayerListItem\u003e playerList \u003d new ArrayList\u003c\u003e();\n        for (int i \u003d 0; i !\u003d client.getFriendsChatManager().getMembers().length; ++i) {\n            String friendName \u003d members[i].getName();\n            PlayerListItem playerListItem \u003d new PlayerListItem();\n            playerListItem.setName(friendName);\n            playerList.add(playerListItem);\n        }\n        String filename \u003d manager.getOwner() + \" Members \" + format(new Date()) + \".txt\";\n        exportList(filename, playerList);\n    }\n\n    /**\n     * Exports loaded players around the user in-game.\n     */\n    private void exportLocalPlayers() {\n        List\u003cPlayer\u003e array \u003d client.getPlayers();\n        List\u003cPlayerListItem\u003e playerList \u003d new ArrayList\u003c\u003e();\n        for (int i \u003d 0; i !\u003d array.size(); ++i) {\n            String localName \u003d array.get(i).getName();\n            if(!localName.matches(client.getLocalPlayer().getName())) {\n                PlayerListItem playerListItem \u003d new PlayerListItem();\n                playerListItem.setName(localName);\n                playerList.add(playerListItem);\n            }\n        }\n        String filename \u003d client.getLocalPlayer().getName() + \" Local \" + format(new Date()) + \".txt\";\n        exportList(filename, playerList);\n    }\n\n    /**\n     * Exports currently online clan members.\n     */\n    private void exportOnlineClanMembers() {\n        List\u003cPlayerListItem\u003e playerList \u003d client.getClanChannel().getMembers().stream()\n                .sorted(Comparator.comparingInt((ClanChannelMember member) -\u003e member.getRank().getRank()).reversed()\n                        .thenComparing(ClanChannelMember::getName, String::compareToIgnoreCase))\n                .map((ClanChannelMember clanmate) -\u003e {\n                    PlayerListItem playerListItem \u003d new PlayerListItem();\n                    playerListItem.setName(clanmate.getName());\n                    playerListItem.setRank(client.getClanSettings().titleForRank(clanmate.getRank()).getName());\n                    return playerListItem;\n                })\n                .collect(Collectors.toList());\n        String filename \u003d client.getClanChannel().getName() + \" Members \" + format(new Date()) + \".txt\";\n        exportList(filename, playerList);\n    }\n\n    /**\n     * Exports the full list of current clan members, not just online. Requires the clan \"Members\" menu to be open.\n     * Drops a message into game chat if required Widget is not open.\n     */\n    private void exportAllClanMembers() {\n        Widget clanListWidget \u003d client.getWidget(InterfaceID.ClansMembers.NAME);\n        if (clanListWidget \u003d\u003d null) {\n            client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"Please open clan settings and navigate to the Members tab.\", \"\");\n            return;\n        }\n\n        Widget[] clanList \u003d clanListWidget.getChildren();\n\n        List\u003cPlayerListItem\u003e playerList \u003d new ArrayList\u003c\u003e();\n        for (int i \u003d 1; i \u003c clanList.length; i+\u003d3) {\n            PlayerListItem playerListItem \u003d new PlayerListItem();\n            playerListItem.setName(clanList[i].getText());\n            playerList.add(playerListItem);\n        }\n        String filename \u003d client.getClanChannel().getName() + \" Full Member List \" + format(new Date()) + \".txt\";\n        exportList(filename, playerList);\n    }\n\n    /**\n     * Exports the ban list for your clan. Drops a message in game chat if the Clan Banlist isn\u0027t open.\n     */\n    private void exportClanBanList() {\n        Widget clanBanListWidget \u003d client.getWidget(InterfaceID.ClansBanned.LIST_CONTENTS);\n        if (clanBanListWidget \u003d\u003d null) {\n            client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"Please open clan settings and navigate to the Bans tab.\", \"\");\n            return;\n        }\n\n        int banSize \u003d clanBanListWidget.getDynamicChildren().length/2;\n        List\u003cPlayerListItem\u003e playerList \u003d new ArrayList\u003c\u003e();\n        for (int i \u003d 0; i !\u003d banSize; ++i) {\n            String player \u003d clanBanListWidget.getDynamicChildren()[500+i].getText();\n            if (player.isEmpty()) {\n                break;\n            }\n            PlayerListItem playerListItem \u003d new PlayerListItem();\n            playerListItem.setName(player);\n            playerList.add(playerListItem);\n        }\n        String filename \u003d client.getClanChannel().getName() + \" Ban List \" + format(new Date()) + \".txt\";\n        exportList(filename, playerList);\n    }\n\n    /**\n     * Exports the clan event list. Drops a message in game chat if the clan events chat isn\u0027t open.\n     * This is the only function that does not currently use exportList and instead does everything in it.\n     */\n    private void exportClanEventList() {\n        Widget clanEventWidget \u003d client.getWidget(InterfaceID.ClansEvents.LIST_CONTENTS_WORLD);\n        if (clanEventWidget \u003d\u003d null) {\n            client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"Please open clan settings and navigate to the Events tab.\", \"\");\n            return;\n        }\n\n        int eventSize \u003d clanEventWidget.getDynamicChildren().length;\n        List\u003cString\u003e lines \u003d new ArrayList\u003c\u003e();\n        for (int i \u003d 0; i !\u003d eventSize; ++i) {\n            String world \u003d Text.removeTags(client.getWidget(InterfaceID.ClansEvents.LIST_CONTENTS_WORLD).getDynamicChildren()[i].getText());\n            String startDate \u003d Text.removeTags(client.getWidget(InterfaceID.ClansEvents.LIST_CONTENTS_DATE).getDynamicChildren()[i].getText());\n            String startTime \u003d Text.removeTags(client.getWidget(InterfaceID.ClansEvents.LIST_CONTENTS_TIME).getDynamicChildren()[i].getText());\n            String duration \u003d Text.removeTags(client.getWidget(InterfaceID.ClansEvents.LIST_CONTENTS_DURATION).getDynamicChildren()[i].getText());\n            String type \u003d Text.removeTags(client.getWidget(InterfaceID.ClansEvents.LIST_CONTENTS_TYPE).getDynamicChildren()[i].getText());\n            String focus \u003d Text.removeTags(client.getWidget(InterfaceID.ClansEvents.LIST_CONTENTS_ACTIVITY).getDynamicChildren()[i].getText());\n            String subType \u003d Text.removeTags(client.getWidget(InterfaceID.ClansEvents.LIST_CONTENTS_SUBTYPE).getDynamicChildren()[i].getText());\n            String ranks \u003d Text.removeTags(client.getWidget(InterfaceID.ClansEvents.LIST_CONTENTS_RANK_TO_VIEW).getDynamicChildren()[i].getText());\n\n            StringBuilder exportString \u003d new StringBuilder();\n            if (!config.lineLeads().equals(LineLeads.None)) {\n                exportString.append(i + config.lineLeads().getPunctuation());\n            }\n            exportString.append(\n                    focus + config.getSeparator() + type\n                            + config.getSeparator() + subType\n                            + config.getSeparator() + startDate + \" \" + startTime\n                            + config.getSeparator() + duration\n                            + config.getSeparator() + world\n                            + config.getSeparator() + ranks\n            );\n\n            lines.add(exportString.toString());\n        }\n        String filename \u003d client.getClanChannel().getName() + \" Events \" + format(new Date()) + \".txt\";\n        exportToFile(filename, lines);\n    }\n\n    /**\n     * Handles the exporting of a file for a list of {@link PlayerListItem}.\n     * @param filename The base filename\n     * @param playerList List of PlayerListItems containing relevant information for exporting\n     */\n    private void exportList(String filename, List\u003cPlayerListItem\u003e playerList) {\n        List\u003cString\u003e lines \u003d new ArrayList\u003c\u003e();\n        for (int i \u003d 0; i \u003c playerList.size(); i++) {\n            lines.add(getExportLineForPlayer(i + 1, playerList.get(i)));\n        }\n        exportToFile(filename, lines);\n    }\n\n    /**\n     * Writes a list of lines to a file using the injected executor.\n     */\n    private void exportToFile(String filename, List\u003cString\u003e lines) {\n        String filePath \u003d EXPORT_DIR + File.separator + filename;\n\n        executor.submit(() -\u003e {\n            File file \u003d new File(filePath);\n\n            if (file.exists() \u0026\u0026 !file.delete()) {\n                log.error(\"Failed to delete existing file: {}\", filePath);\n                return;\n            }\n\n            try (BufferedWriter writer \u003d new BufferedWriter(new FileWriter(file, true))) {\n                for (String line : lines) {\n                    writer.write(line);\n                    writer.newLine();\n                }\n            } catch (IOException e) {\n                log.error(\"Failed to write export file: {}\", filePath, e);\n            }\n        });\n    }\n\n\n    /**\n     * Puts together the text for one {@link PlayerListItem}.\n     *\n     * @param num the index to place as the front\n     * @param playerListItem the player wrapper with info\n     * @return the complete string to be exported for the player.\n     */\n    private String getExportLineForPlayer(int num, PlayerListItem playerListItem) {\n\n        String separator \u003d config.getSeparator();\n\n        StringBuilder exportString \u003d new StringBuilder();\n        if (!config.lineLeads().equals(LineLeads.None)) {\n            exportString.append(num).append(config.lineLeads().getPunctuation());\n        }\n\n        if (!playerListItem.getRank().isEmpty()) {\n            exportString.append(playerListItem.getRank()).append(separator);\n        }\n\n        exportString.append(playerListItem.getName());\n\n        if (!StringUtils.isEmpty(playerListItem.getPreviousName())) {\n            exportString.append(separator).append(playerListItem.getPreviousName());\n        }\n\n        if (!StringUtils.isEmpty(playerListItem.getNote())) {\n            exportString.append(separator).append(playerListItem.getNote());\n        }\n\n        return exportString.toString();\n    }\n\n    @Provides\n    FriendsExporterConfig provideConfig(ConfigManager configManager) {\n        return configManager.getConfig(FriendsExporterConfig.class);\n    }\n}","filePath":"src\\main\\java\\com\\FriendsExporter\\FriendsExporterPlugin.java"},{"fileName":"LineLeads.java","content":"package com.FriendsExporter;\n\npublic enum LineLeads {\n    None(\"None\", \"\"),\n    Number(\"[Number]\", \" \"),\n    Number1(\"[Number].\", \". \"),\n    Number2(\"[Number])\", \") \"),\n    Number3(\"[Number].)\", \".) \")\n    ;\n\n    private final String name;\n    private final String punctuation;\n\n    public String toString() {\n        return this.getName();\n    }\n\n    public String getName() {\n        return this.name;\n    }\n    public String getPunctuation() {return this.punctuation;}\n\n    private LineLeads(String name, String punctuation) {\n        this.name \u003d name;\n        this.punctuation \u003d punctuation;\n    }\n}\n","filePath":"src\\main\\java\\com\\FriendsExporter\\LineLeads.java"},{"fileName":"PlayerListItem.java","content":"package com.FriendsExporter;\n\n\nimport net.runelite.client.util.Text;\n\npublic class PlayerListItem {\n\n    private String name;\n    private String previousName;\n    private String note;\n    private String rank;\n\n\n    PlayerListItem() {\n        this.name \u003d \"\";\n        this.previousName \u003d \"\";\n        this.note \u003d \"\";\n        this.rank \u003d \"\";\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name \u003d Text.toJagexName(Text.removeTags(name));\n    }\n\n    public String getPreviousName() {\n        return previousName;\n    }\n\n    public void setPreviousName(String previousName) {\n        this.previousName \u003d Text.toJagexName(Text.removeTags(previousName));\n    }\n\n    public String getNote() {\n        return note;\n    }\n\n    public void setNote(String note) {\n        this.note \u003d note;\n    }\n\n    public String getRank() {\n        return rank;\n    }\n\n    public void setRank(String rank) {\n        this.rank \u003d rank;\n    }\n}\n","filePath":"src\\main\\java\\com\\FriendsExporter\\PlayerListItem.java"},{"fileName":"FriendsExporterPluginTest.java","content":"package com.FriendsExporter;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class FriendsExporterPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(FriendsExporterPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\FriendsExporter\\FriendsExporterPluginTest.java"}]},{"commit":"4cfd6848fa1f1f790a843bf461f7a4e9a9778427","repository":"https://github.com/tcpowell/interactable.git","internalName":"interactable","files":[{"fileName":"InteractableConfig.java","content":"package com.interactable;\n\nimport java.awt.Color;\nimport net.runelite.client.config.Alpha;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.Keybind;\nimport net.runelite.client.config.Range;\n\n@ConfigGroup(InteractableConfig.GROUP)\npublic interface InteractableConfig extends Config\n{\n\tString GROUP \u003d \"interactableHints\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"toggleKeybind\",\n\t\tname \u003d \"Toggle Overlay\",\n\t\tdescription \u003d \"Binds a key (combination) to toggle the overlay.\",\n\t\tposition \u003d 0\n\t)\n\tdefault Keybind toggleKeybind()\n\t{\n\t\treturn Keybind.NOT_SET;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"autoHideTimeout\",\n\t\tname \u003d \"Auto Hide Timeout\",\n\t\tdescription \u003d \"Timeout (in seconds) where the overlay is hidden (0 \u003d do not auto hide)\",\n\t\tposition \u003d 1\n\t)\n\tdefault int autoHideTimeout()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showObject\",\n\t\tname \u003d \"Show Objects\",\n\t\tdescription \u003d \"Outline interactable Objects\",\n\t\tposition \u003d 2\n\t)\n\tdefault boolean showObject()\n\t{\n\t\treturn true;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"objectHighlightColor\",\n\t\tname \u003d \"Object Color\",\n\t\tdescription \u003d \"The color of the outline for Objects\",\n\t\tposition \u003d 3\n\t)\n\tdefault Color objectHighlightColor()\n\t{\n\t\treturn new Color(0, 255, 255, 160);\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showAttackNpc\",\n\t\tname \u003d \"Show Attackable NPCs\",\n\t\tdescription \u003d \"Outline attackable NPCs\",\n\t\tposition \u003d 4\n\t)\n\tdefault boolean showAttackNpc()\n\t{\n\t\treturn true;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"attackNpcColor\",\n\t\tname \u003d \"Attackable NPC Color\",\n\t\tdescription \u003d \"The color of the outline for attackable NPCs\",\n\t\tposition \u003d 5\n\t)\n\tdefault Color attackNpcColor()\n\t{\n\t\treturn new Color(255, 10, 10, 160);\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showInteractableNpc\",\n\t\tname \u003d \"Show Interactable NPCs\",\n\t\tdescription \u003d \"Outline interactable NPCs\",\n\t\tposition \u003d 6\n\t)\n\tdefault boolean showInteractableNpc()\n\t{\n\t\treturn true;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"interactableNpcColor\",\n\t\tname \u003d \"Interactable NPC Color\",\n\t\tdescription \u003d \"The color of the outline for interactable NPCs\",\n\t\tposition \u003d 7\n\t)\n\tdefault Color interactableNpcColor()\n\t{\n\t\treturn new Color(255, 255, 10, 160);\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"borderWidth\",\n\t\tname \u003d \"Border Width\",\n\t\tdescription \u003d \"Width of the outlined border\",\n\t\tposition \u003d 8\n\t)\n\tdefault int borderWidth()\n\t{\n\t\treturn 4;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"outlineFeather\",\n\t\tname \u003d \"Outline feather\",\n\t\tdescription \u003d \"Specify between 0-4 how much of the model outline should be faded\",\n\t\tposition \u003d 9\n\t)\n\t@Range(\n\t\tmax \u003d 4\n\t)\n\tdefault int outlineFeather()\n\t{\n\t\treturn 4;\n\t}\n\n}\n","filePath":"src\\main\\java\\com\\interactable\\InteractableConfig.java"},{"fileName":"InteractableOverlay.java","content":"package com.interactable;\n\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.api.NPC;\nimport net.runelite.api.TileObject;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\nimport net.runelite.client.ui.overlay.outline.ModelOutlineRenderer;\n\nclass InteractableOverlay extends Overlay\n{\n\tprivate final Client client;\n\tprivate final InteractablePlugin plugin;\n\tprivate final InteractableConfig config;\n\tprivate final ModelOutlineRenderer modelOutlineRenderer;\n\n\t@Inject\n\tprivate InteractableOverlay(Client client, InteractablePlugin plugin, InteractableConfig config, ModelOutlineRenderer modelOutlineRenderer)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t\tthis.modelOutlineRenderer \u003d modelOutlineRenderer;\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\n\t\tsetPriority(OverlayPriority.HIGH);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (plugin.isShown())\n\t\t{\n\t\t\trenderObjects();\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\tprivate void renderObjects()\n\t{\n\t\tplugin.generateObjectLists();\n\n\t\tif (config.showObject())\n\t\t{\n\t\t\tfor (TileObject object : plugin.getObjects())\n\t\t\t{\n\t\t\t\tif (object !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tmodelOutlineRenderer.drawOutline(object, config.borderWidth(), plugin.getCurrentObjectColor(), config.outlineFeather());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (config.showAttackNpc())\n\t\t{\n\t\t\tfor (NPC npc : plugin.getAttackNpcs())\n\t\t\t{\n\t\t\t\tif (npc !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tmodelOutlineRenderer.drawOutline(npc, config.borderWidth(), plugin.getCurrentNpcAttackColor(), config.outlineFeather());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (config.showInteractableNpc())\n\t\t{\n\t\t\tfor (NPC npc : plugin.getInteractNpcs())\n\t\t\t{\n\t\t\t\tif (npc !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tmodelOutlineRenderer.drawOutline(npc, config.borderWidth(), plugin.getCurrentNpcInteractColor(), config.outlineFeather());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t}\n}","filePath":"src\\main\\java\\com\\interactable\\InteractableOverlay.java"},{"fileName":"InteractablePlugin.java","content":"package com.interactable;\n\nimport com.google.common.base.Strings;\nimport com.google.inject.Provides;\nimport java.awt.Color;\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.inject.Inject;\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Constants;\nimport net.runelite.api.GameObject;\nimport net.runelite.api.GroundObject;\nimport net.runelite.api.NPC;\nimport net.runelite.api.NPCComposition;\nimport net.runelite.api.ObjectComposition;\nimport net.runelite.api.Player;\nimport net.runelite.api.Scene;\nimport net.runelite.api.Tile;\nimport net.runelite.api.TileObject;\nimport net.runelite.api.WallObject;\nimport net.runelite.api.events.ClientTick;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.input.KeyManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.HotkeyListener;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Interactable Hints\"\n)\npublic class InteractablePlugin extends Plugin\n{\n\tprivate int MAX_DISTANCE \u003d 2350;\n\tprivate int remainingClientTicks \u003d -1;\n\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate boolean shown \u003d false;\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate Color currentObjectColor;\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate Color currentNpcAttackColor;\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate Color currentNpcInteractColor;\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate List\u003cTileObject\u003e objects \u003d new ArrayList\u003cTileObject\u003e();\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate List\u003cNPC\u003e attackNpcs \u003d new ArrayList\u003cNPC\u003e();\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate List\u003cNPC\u003e interactNpcs \u003d new ArrayList\u003cNPC\u003e();\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate InteractableOverlay interactableOverlay;\n\n\t@Inject\n\tprivate InteractableConfig config;\n\n\t@Inject\n\tprivate KeyManager keyManager;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tshown \u003d false;\n\t\tkeyManager.registerKeyListener(hotkeyListener);\n\t\toverlayManager.add(interactableOverlay);\n\t\tobjects \u003d new ArrayList\u003cTileObject\u003e();\n\t\tattackNpcs \u003d new ArrayList\u003cNPC\u003e();\n\t\tinteractNpcs \u003d new ArrayList\u003cNPC\u003e();\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tshown \u003d false;\n\t\tkeyManager.unregisterKeyListener(hotkeyListener);\n\t\toverlayManager.remove(interactableOverlay);\n\t\tobjects \u003d null;\n\t\tattackNpcs \u003d null;\n\t\tinteractNpcs \u003d null;\n\t}\n\n\t@Subscribe\n\tpublic void onClientTick(ClientTick clientTick)\n\t{\n\t\tif (config.autoHideTimeout() \u003e 0 \u0026\u0026 shown)\n\t\t{\n\t\t\tif (remainingClientTicks \u003e 50)\n\t\t\t{\n\t\t\t\tremainingClientTicks--;\n\t\t\t}\n\t\t\telse if (remainingClientTicks \u003e 0)\n\t\t\t{\n\t\t\t\tfadeOut();\n\t\t\t\tremainingClientTicks--;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tshown \u003d false;\n\t\t\t\tlog.debug(\"Interactable Hints auto-hide triggered\");\n\t\t\t\tcurrentObjectColor \u003d config.objectHighlightColor();\n\t\t\t\tcurrentNpcAttackColor \u003d config.attackNpcColor();\n\t\t\t\tcurrentNpcInteractColor \u003d config.interactableNpcColor();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void fadeOut()\n\t{\n\t\tint newObjectAlpha \u003d config.objectHighlightColor().getAlpha() * remainingClientTicks / 50;\n\t\tcurrentObjectColor \u003d new Color(config.objectHighlightColor().getRed(), config.objectHighlightColor().getGreen(), config.objectHighlightColor().getBlue(), newObjectAlpha);\n\n\t\tint newAttackAlpha \u003d config.attackNpcColor().getAlpha() * remainingClientTicks / 50;\n\t\tcurrentNpcAttackColor \u003d new Color(config.attackNpcColor().getRed(), config.attackNpcColor().getGreen(), config.attackNpcColor().getBlue(), newAttackAlpha);\n\n\t\tint newInteractAlpha \u003d config.interactableNpcColor().getAlpha() * remainingClientTicks / 50;\n\t\tcurrentNpcInteractColor \u003d new Color(config.interactableNpcColor().getRed(), config.interactableNpcColor().getGreen(), config.interactableNpcColor().getBlue(), newInteractAlpha);\n\t}\n\n\t@Provides\n\tInteractableConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(InteractableConfig.class);\n\t}\n\n\tprivate final HotkeyListener hotkeyListener \u003d new HotkeyListener(() -\u003e config.toggleKeybind())\n\t{\n\t\t@Override\n\t\tpublic void hotkeyPressed()\n\t\t{\n\t\t\tcurrentObjectColor \u003d config.objectHighlightColor();\n\t\t\tcurrentNpcAttackColor \u003d config.attackNpcColor();\n\t\t\tcurrentNpcInteractColor \u003d config.interactableNpcColor();\n\n\t\t\tshown \u003d !shown;\n\t\t\tlog.debug(\"Interactable Hints overlay toggled to \" + shown);\n\t\t\tif (shown)\n\t\t\t{\n\t\t\t\tremainingClientTicks \u003d config.autoHideTimeout() * 50;\n\t\t\t}\n\t\t}\n\t};\n\n\tvoid generateObjectLists()\n\t{\n\t\tobjects \u003d new ArrayList\u003cTileObject\u003e();\n\t\tattackNpcs \u003d new ArrayList\u003cNPC\u003e();\n\t\tinteractNpcs \u003d new ArrayList\u003cNPC\u003e();\n\n\t\tfor (NPC npc : client.getNpcs())\n\t\t{\n\t\t\tNPCComposition npcComp \u003d replaceNpcImposters(npc.getComposition());\n\n\t\t\tif (npcCompCheck(npcComp) \u0026\u0026 npcCheck(npc))\n\t\t\t{\n\t\t\t\tif (npcAttackable(npcComp))\n\t\t\t\t{\n\t\t\t\t\tattackNpcs.add(npc);\n\t\t\t\t}\n\t\t\t\telse if (npcInteractable(npcComp))\n\t\t\t\t{\n\t\t\t\t\tinteractNpcs.add(npc);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tScene scene \u003d client.getScene();\n\t\tTile[][] tiles \u003d scene.getTiles()[client.getPlane()];\n\n\t\tfor (int x \u003d 0; x \u003c Constants.SCENE_SIZE; ++x)\n\t\t{\n\t\t\tfor (int y \u003d 0; y \u003c Constants.SCENE_SIZE; ++y)\n\t\t\t{\n\t\t\t\tTile tile \u003d tiles[x][y];\n\t\t\t\tif (tile \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (GameObject gameObject : tile.getGameObjects())\n\t\t\t\t{\n\t\t\t\t\tif (gameObjectCheck(gameObject) \u0026\u0026 !(gameObject.getRenderable() instanceof Player) \u0026\u0026 !(gameObject.getRenderable() instanceof NPC))\n\t\t\t\t\t{\n\t\t\t\t\t\tint objectId \u003d gameObject.getId();\n\t\t\t\t\t\tObjectComposition comp \u003d replaceObjectImposters(client.getObjectDefinition(objectId));\n\n\t\t\t\t\t\tif (objectCompCheck(comp))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (!objects.contains(gameObject))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tobjects.add(gameObject);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tWallObject wallObject \u003d tile.getWallObject();\n\n\t\t\t\tif (gameObjectCheck(wallObject))\n\t\t\t\t{\n\t\t\t\t\tint objectId \u003d wallObject.getId();\n\t\t\t\t\tObjectComposition comp \u003d replaceObjectImposters(client.getObjectDefinition(objectId));\n\n\t\t\t\t\tif (objectCompCheck(comp))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!objects.contains(wallObject))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tobjects.add(wallObject);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tGroundObject groundObject \u003d tile.getGroundObject();\n\n\t\t\t\tif (gameObjectCheck(groundObject))\n\t\t\t\t{\n\t\t\t\t\tint objectId \u003d groundObject.getId();\n\t\t\t\t\tObjectComposition comp \u003d replaceObjectImposters(client.getObjectDefinition(objectId));\n\n\t\t\t\t\tif (objectCompCheck(comp))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!objects.contains(groundObject))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tobjects.add(groundObject);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate boolean objectCompCheck(ObjectComposition comp)\n\t{\n\t\treturn (comp !\u003d null \u0026\u0026 !Strings.isNullOrEmpty(comp.getName()) \u0026\u0026 !comp.getName().equals(\"null\") \u0026\u0026 objectActionCheck(comp));\n\t}\n\n\tprivate boolean npcCompCheck(NPCComposition comp)\n\t{\n\t\treturn (comp !\u003d null \u0026\u0026 !Strings.isNullOrEmpty(comp.getName()) \u0026\u0026 !comp.getName().equals(\"null\"));\n\t}\n\n\tprivate boolean gameObjectCheck(TileObject object)\n\t{\n\t\treturn object !\u003d null \u0026\u0026 object.getLocalLocation().distanceTo(client.getLocalPlayer().getLocalLocation()) \u003c\u003d MAX_DISTANCE;\n\t}\n\n\tprivate boolean npcCheck(NPC npc)\n\t{\n\t\treturn npc !\u003d null \u0026\u0026 npc.getLocalLocation().distanceTo(client.getLocalPlayer().getLocalLocation()) \u003c\u003d MAX_DISTANCE;\n\t}\n\n\tprivate ObjectComposition replaceObjectImposters(ObjectComposition comp)\n\t{\n\t\treturn comp.getImpostorIds() !\u003d null ? comp.getImpostor() : comp;\n\t}\n\n\tprivate NPCComposition replaceNpcImposters(NPCComposition comp)\n\t{\n\t\treturn comp.getConfigs() !\u003d null \u0026\u0026 comp.transform() !\u003d null ? comp.transform() : comp;\n\t}\n\n\tprivate boolean objectActionCheck(ObjectComposition comp)\n\t{\n\t\tfor (String action : comp.getActions())\n\t\t{\n\t\t\tif (!Strings.isNullOrEmpty(action) \u0026\u0026 !action.equals(\"null\"))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate boolean npcAttackable(NPCComposition comp)\n\t{\n\t\tfor (String action : comp.getActions())\n\t\t{\n\t\t\tif (!Strings.isNullOrEmpty(action) \u0026\u0026 action.equals(\"Attack\") \u0026\u0026 client.getVarpValue(1306) !\u003d3)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate boolean npcInteractable(NPCComposition comp)\n\t{\n\t\tfor (String action : comp.getActions())\n\t\t{\n\t\t\tif (!Strings.isNullOrEmpty(action) \u0026\u0026 !action.equals(\"null\") \u0026\u0026 !action.equals(\"Attack\"))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\com\\interactable\\InteractablePlugin.java"},{"fileName":"InteractablePluginTest.java","content":"package com.interactable;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class InteractablePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(InteractablePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\interactable\\InteractablePluginTest.java"}]},{"commit":"d383983a88752621b6605cad55fd3dde8e3c5e14","repository":"https://github.com/IanMcNelly/maniacal-hunter.git","internalName":"maniacal-hunter","files":[{"fileName":"DisplayMode.java","content":"package com.maniacalhunter;\n\npublic enum DisplayMode\n{\n\tSESSION_ONLY,\n\tAGGREGATE_ONLY,\n\tBOTH\n}\n","filePath":"src\\main\\java\\com\\maniacalhunter\\DisplayMode.java"},{"fileName":"ManiacalHunterConfig.java","content":"package com.maniacalhunter;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\n\n@ConfigGroup(\"maniacalhunter\")\npublic interface ManiacalHunterConfig extends Config\n{\n\t@ConfigSection(\n\t\t\tname \u003d \"Display\",\n\t\t\tdescription \u003d \"Configure which stats to display\",\n\t\t\tposition \u003d 0\n\t)\n\tString displaySection \u003d \"display\";\n\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"condensedMode\",\n\t\t\tname \u003d \"Condensed Mode\",\n\t\t\tdescription \u003d \"Display stats in an infobox.\",\n\t\t\tsection \u003d displaySection\n\t)\n\tdefault boolean condensedMode()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Auto Reset\",\n\t\t\tdescription \u003d \"Automatically reset the session\",\n\t\t\tposition \u003d 4\n\t)\n\tString autoResetSection \u003d \"autoReset\";\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"autoResetMode\",\n\t\t\tname \u003d \"Auto Reset Session\",\n\t\t\tdescription \u003d \"Automatically reset the session upon entering or leaving the area\",\n\t\t\tsection \u003d autoResetSection\n\t)\n\tdefault ResetMode autoResetMode()\n\t{\n\t\treturn ResetMode.NEVER;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showMonkeysCaught\",\n\t\t\tname \u003d \"Show Monkeys Caught\",\n\t\t\tdescription \u003d \"Show the total number of monkeys caught\",\n\t\t\tsection \u003d displaySection\n\t)\n\tdefault boolean showMonkeysCaught()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showTrapsLaid\",\n\t\t\tname \u003d \"Show Traps Laid\",\n\t\t\tdescription \u003d \"Show the total number of traps laid\",\n\t\t\tsection \u003d displaySection\n\t)\n\tdefault boolean showTrapsLaid()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showLastTrapStatus\",\n\t\t\tname \u003d \"Show Last Trap Status\",\n\t\t\tdescription \u003d \"Show the status of the last trap\",\n\t\t\tsection \u003d displaySection\n\t)\n\tdefault boolean showLastTrapStatus()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showSuccessRate\",\n\t\t\tname \u003d \"Show Success Rate\",\n\t\t\tdescription \u003d \"Show the success rate of catching monkeys\",\n\t\t\tsection \u003d displaySection\n\t)\n\tdefault boolean showSuccessRate()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showMonkeysPerHour\",\n\t\t\tname \u003d \"Show Monkeys/Hour\",\n\t\t\tdescription \u003d \"Show the number of monkeys caught per hour\",\n\t\t\tsection \u003d displaySection\n\t)\n\tdefault boolean showMonkeysPerHour()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showPerfectTails\",\n\t\t\tname \u003d \"Show Perfect Tails\",\n\t\t\tdescription \u003d \"Show the number of perfect tails received\",\n\t\t\tsection \u003d displaySection\n\t)\n\tdefault boolean showPerfectTails()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showDamagedTails\",\n\t\t\tname \u003d \"Show Damaged Tails\",\n\t\t\tdescription \u003d \"Show the number of damaged tails received\",\n\t\t\tsection \u003d displaySection\n\t)\n\tdefault boolean showDamagedTails()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showLuck\",\n\t\t\tname \u003d \"Show Luck\",\n\t\t\tdescription \u003d \"Show your current luck in receiving a perfect tail\",\n\t\t\tsection \u003d displaySection\n\t)\n\tdefault boolean showLuck()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showAvgCatchTime\",\n\t\t\tname \u003d \"Show Avg. Catch Time\",\n\t\t\tdescription \u003d \"Show the average time to catch a monkey\",\n\t\t\tsection \u003d displaySection\n\t)\n\tdefault boolean showAvgCatchTime()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"displayMode\",\n\t\t\tname \u003d \"Display Mode\",\n\t\t\tdescription \u003d \"Choose how to display stats in the overlay\",\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d displaySection\n\t)\n\tdefault DisplayMode displayMode()\n\t{\n\t\treturn DisplayMode.BOTH;\n\t}\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Actions\",\n\t\t\tdescription \u003d \"Perform actions on the session\",\n\t\t\tposition \u003d 2\n\t)\n\tString actionsSection \u003d \"actions\";\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"resetSessionButton\",\n\t\t\tname \u003d \"Reset Session\",\n\t\t\tdescription \u003d \"Reset the current session stats\",\n\t\t\tsection \u003d actionsSection\n\t)\n\tdefault boolean resetSession()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Notifications\",\n\t\t\tdescription \u003d \"Configure notifications for milestones\",\n\t\t\tposition \u003d 3\n\t)\n\tString notificationsSection \u003d \"notifications\";\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"milestoneNotification\",\n\t\t\tname \u003d \"Milestone Notification\",\n\t\t\tdescription \u003d \"Notify when you reach a milestone of monkeys caught\",\n\t\t\tsection \u003d notificationsSection\n\t)\n\tdefault boolean milestoneNotification()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"milestoneInterval\",\n\t\t\tname \u003d \"Milestone Interval\",\n\t\t\tdescription \u003d \"The interval at which to send a milestone notification\",\n\t\t\tsection \u003d notificationsSection\n\t)\n\tdefault int milestoneInterval()\n\t{\n\t\treturn 100;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"sessionStartTime\",\n\t\t\tname \u003d \"Session Start Time\",\n\t\t\tdescription \u003d \"The time the session started\",\n\t\t\thidden \u003d true\n\t)\n\tdefault long getSessionStartTime()\n\t{\n\t\treturn 0L;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"sessionStartTime\",\n\t\t\tname \u003d \"Session Start Time\",\n\t\t\tdescription \u003d \"The time the session started\"\n\t)\n\tvoid setSessionStartTime(long time);\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"duration\",\n\t\t\tname \u003d \"Duration\",\n\t\t\tdescription \u003d \"The session duration in milliseconds\",\n\t\t\thidden \u003d true\n\t)\n\tdefault long getDuration()\n\t{\n\t\treturn 0L;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"duration\",\n\t\t\tname \u003d \"Duration\",\n\t\t\tdescription \u003d \"The session duration in milliseconds\"\n\t)\n\tvoid setDuration(long time);\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"monkeysCaught\",\n\t\t\tname \u003d \"Monkeys Caught\",\n\t\t\tdescription \u003d \"The number of monkeys caught\",\n\t\t\thidden \u003d true\n\t)\n\tdefault int getMonkeysCaught()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"monkeysCaught\",\n\t\t\tname \u003d \"Monkeys Caught\",\n\t\t\tdescription \u003d \"The number of monkeys caught\"\n\t)\n\tvoid setMonkeysCaught(int count);\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"trapsLaid\",\n\t\t\tname \u003d \"Traps Laid\",\n\t\t\tdescription \u003d \"The number of traps laid\",\n\t\t\thidden \u003d true\n\t)\n\tdefault int getTrapsLaid()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"trapsLaid\",\n\t\t\tname \u003d \"Traps Laid\",\n\t\t\tdescription \u003d \"The number of traps laid\"\n\t)\n\tvoid setTrapsLaid(int count);\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"lastTrapStatus\",\n\t\t\tname \u003d \"Last Trap Status\",\n\t\t\tdescription \u003d \"The status of the last trap\",\n\t\t\thidden \u003d true\n\t)\n\tdefault String getLastTrapStatus()\n\t{\n\t\treturn \"N/A\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"lastTrapStatus\",\n\t\t\tname \u003d \"Last Trap Status\",\n\t\t\tdescription \u003d \"The status of the last trap\"\n\t)\n\tvoid setLastTrapStatus(String status);\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"perfectTails\",\n\t\t\tname \u003d \"Perfect Tails\",\n\t\t\tdescription \u003d \"The number of perfect tails\",\n\t\t\thidden \u003d true\n\t)\n\tdefault int getPerfectTails()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"perfectTails\",\n\t\t\tname \u003d \"Perfect Tails\",\n\t\t\tdescription \u003d \"The number of perfect tails\"\n\t)\n\tvoid setPerfectTails(int count);\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"damagedTails\",\n\t\t\tname \u003d \"Damaged Tails\",\n\t\t\tdescription \u003d \"The number of damaged tails\",\n\t\t\thidden \u003d true\n\t)\n\tdefault int getDamagedTails()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"damagedTails\",\n\t\t\tname \u003d \"Damaged Tails\",\n\t\t\tdescription \u003d \"The number of damaged tails\"\n\t)\n\tvoid setDamagedTails(int count);\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"damagedTailsSincePerfect\",\n\t\t\tname \u003d \"Damaged Tails Since Perfect\",\n\t\t\tdescription \u003d \"The number of damaged tails since the last perfect tail\",\n\t\t\thidden \u003d true\n\t)\n\tdefault int getDamagedTailsSincePerfect()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"damagedTailsSincePerfect\",\n\t\t\tname \u003d \"Damaged Tails Since Perfect\",\n\t\t\tdescription \u003d \"The number of damaged tails since the last perfect tail\"\n\t)\n\tvoid setDamagedTailsSincePerfect(int count);\n}\n","filePath":"src\\main\\java\\com\\maniacalhunter\\ManiacalHunterConfig.java"},{"fileName":"ManiacalHunterConstants.java","content":"package com.maniacalhunter;\n\nimport com.google.common.collect.ImmutableSet;\nimport java.util.Set;\n\npublic class ManiacalHunterConstants\n{\n\t// Item IDs\n\tpublic static final int DAMAGED_MONKEY_TAIL \u003d 19665;\n\tpublic static final int PERFECT_MONKEY_TAIL \u003d 19610;\n\tpublic static final int MANIACAL_ITEM_ID \u003d 24864;\n\n\t// Object IDs\n\tpublic static final int UNSET_BOULDER_TRAP \u003d 28824;\n\tpublic static final int SETTING_BOULDER_TRAP \u003d 28825;\n\tpublic static final int SET_BOULDER_TRAP \u003d 28827;\n\tpublic static final int TRIGGERED_BOULDER_TRAP_1 \u003d 28828;\n\tpublic static final int TRIGGERED_BOULDER_TRAP_2 \u003d 28829;\n\tpublic static final int CAUGHT_MONKEY_BOULDER_1 \u003d 28830;\n\tpublic static final int CAUGHT_MONKEY_BOULDER_2 \u003d 28831;\n\tpublic static final int LIFTED_BOULDER \u003d 28833;\n\n\t// Region IDs\n\tpublic static final int MANIACAL_HUNTER_REGION \u003d 11662;\n\n\t// Other\n\tpublic static final int MANIACAL_MONKEY_XP \u003d 1000;\n\n\tpublic static final Set\u003cInteger\u003e BOULDER_TRAP_IDS \u003d ImmutableSet.of(\n\t\tUNSET_BOULDER_TRAP,\n\t\tSETTING_BOULDER_TRAP,\n\t\tSET_BOULDER_TRAP,\n\t\tTRIGGERED_BOULDER_TRAP_1,\n\t\tTRIGGERED_BOULDER_TRAP_2,\n\t\tCAUGHT_MONKEY_BOULDER_1,\n\t\tCAUGHT_MONKEY_BOULDER_2,\n\t\tLIFTED_BOULDER\n\t);\n}\n","filePath":"src\\main\\java\\com\\maniacalhunter\\ManiacalHunterConstants.java"},{"fileName":"ManiacalHunterFormatting.java","content":"package com.maniacalhunter;\n\npublic final class ManiacalHunterFormatting\n{\n\tprivate ManiacalHunterFormatting()\n\t{\n\t}\n\n\tpublic static String formatStat(int session, int aggregate, DisplayMode displayMode)\n\t{\n\t\tswitch (displayMode)\n\t\t{\n\t\t\tcase SESSION_ONLY:\n\t\t\t\treturn String.valueOf(session);\n\t\t\tcase AGGREGATE_ONLY:\n\t\t\t\treturn String.valueOf(aggregate);\n\t\t\tcase BOTH:\n\t\t\tdefault:\n\t\t\t\treturn String.format(\"%d (%d)\", session, aggregate);\n\t\t}\n\t}\n\n\tpublic static String formatPercentage(double session, double aggregate, DisplayMode displayMode)\n\t{\n\t\tswitch (displayMode)\n\t\t{\n\t\t\tcase SESSION_ONLY:\n\t\t\t\treturn String.format(\"%.2f%%\", session);\n\t\t\tcase AGGREGATE_ONLY:\n\t\t\t\treturn String.format(\"%.2f%%\", aggregate);\n\t\t\tcase BOTH:\n\t\t\tdefault:\n\t\t\t\treturn String.format(\"%.2f%% (%.2f%%)\", session, aggregate);\n\t\t}\n\t}\n\n\tpublic static String formatDouble(double session, double aggregate, DisplayMode displayMode)\n\t{\n\t\tswitch (displayMode)\n\t\t{\n\t\t\tcase SESSION_ONLY:\n\t\t\t\treturn String.format(\"%.2f\", session);\n\t\t\tcase AGGREGATE_ONLY:\n\t\t\t\treturn String.format(\"%.2f\", aggregate);\n\t\t\tcase BOTH:\n\t\t\tdefault:\n\t\t\t\treturn String.format(\"%.2f (%.2f)\", session, aggregate);\n\t\t}\n\t}\n}","filePath":"src\\main\\java\\com\\maniacalhunter\\ManiacalHunterFormatting.java"},{"fileName":"ManiacalHunterInfoBox.java","content":"package com.maniacalhunter;\n\nimport java.awt.Color;\nimport java.awt.image.BufferedImage;\nimport net.runelite.client.ui.overlay.infobox.InfoBox;\n\npublic class ManiacalHunterInfoBox extends InfoBox\n{\n\tprivate final ManiacalHunterPlugin plugin;\n\tprivate final ManiacalHunterConfig config;\n\n\tpublic ManiacalHunterInfoBox(ManiacalHunterPlugin plugin, ManiacalHunterConfig config, BufferedImage image)\n\t{\n\t\tsuper(image, plugin);\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t}\n\n\t@Override\n\tpublic String getText()\n\t{\n\t\treturn String.valueOf(plugin.getSession().getMonkeysCaught());\n\t}\n\n\t@Override\n\tpublic Color getTextColor()\n\t{\n\t\treturn Color.WHITE;\n\t}\n\n\t@Override\n\tpublic String getTooltip()\n\t{\n\t\tManiacalHunterSession session \u003d plugin.getSession();\n\t\tManiacalHunterSession aggregateSession \u003d plugin.getAggregateSession();\n\t\tStringBuilder sb \u003d new StringBuilder();\n\t\tsb.append(\"Maniacal Hunter\");\n\n\t\tif (config.showMonkeysCaught()) {\n\t\t\tsb.append(\"\u003c/br\u003e\");\n\t\t\tsb.append(\"Monkeys Caught: \").append(ManiacalHunterFormatting.formatStat(session.getMonkeysCaught(), aggregateSession.getMonkeysCaught(), config.displayMode()));\n\t\t}\n\n\t\tif (config.showTrapsLaid()) {\n\t\t\tsb.append(\"\u003c/br\u003e\");\n\t\t\tsb.append(\"Traps Laid: \").append(ManiacalHunterFormatting.formatStat(session.getTrapsLaid(), aggregateSession.getTrapsLaid(), config.displayMode()));\n\t\t}\n\n\t\tif (config.showLastTrapStatus()) {\n\t\t\tsb.append(\"\u003c/br\u003e\");\n\t\t\tsb.append(\"Last Trap Status: \").append(session.getLastTrapStatus());\n\t\t}\n\n\t\tif (config.showSuccessRate()) {\n\t\t\tsb.append(\"\u003c/br\u003e\");\n\t\t\tsb.append(\"Success Rate: \").append(ManiacalHunterFormatting.formatPercentage(session.getSuccessRate(), aggregateSession.getSuccessRate(), config.displayMode()));\n\t\t}\n\n\t\tif (config.showMonkeysPerHour()) {\n\t\t\tsb.append(\"\u003c/br\u003e\");\n\t\t\tsb.append(\"Monkeys/Hour: \").append(ManiacalHunterFormatting.formatDouble(session.getMonkeysPerHour(), aggregateSession.getMonkeysPerHour(), config.displayMode()));\n\t\t}\n\n\t\tif (config.showPerfectTails()) {\n\t\t\tsb.append(\"\u003c/br\u003e\");\n\t\t\tsb.append(\"Perfect Tails: \").append(ManiacalHunterFormatting.formatStat(session.getPerfectTails(), aggregateSession.getPerfectTails(), config.displayMode()));\n\t\t}\n\n\t\tif (config.showDamagedTails()) {\n\t\t\tsb.append(\"\u003c/br\u003e\");\n\t\t\tsb.append(\"Damaged Tails: \").append(ManiacalHunterFormatting.formatStat(session.getDamagedTails(), aggregateSession.getDamagedTails(), config.displayMode()));\n\t\t}\n\n\t\tif (config.showLuck()) {\n\t\t\tsb.append(\"\u003c/br\u003e\");\n\t\t\tsb.append(\"Luck: \").append(ManiacalHunterFormatting.formatPercentage(session.getLuckPercentage(), aggregateSession.getLuckPercentage(), config.displayMode()));\n\t\t}\n\n\t\tif (config.showAvgCatchTime()) {\n\t\t\tsb.append(\"\u003c/br\u003e\");\n\t\t\tsb.append(\"Avg. Catch Time: \").append(String.format(\"%.2fs\", session.getAverageTimePerCatch()));\n\t\t}\n\n\t\treturn sb.toString();\n\t}\n}\n","filePath":"src\\main\\java\\com\\maniacalhunter\\ManiacalHunterInfoBox.java"},{"fileName":"ManiacalHunterOverlay.java","content":"package com.maniacalhunter;\n\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport javax.inject.Inject;\n\nimport net.runelite.api.Client;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.LineComponent;\nimport net.runelite.client.ui.overlay.components.TitleComponent;\n\npublic class ManiacalHunterOverlay extends OverlayPanel\n{\n\tprivate final ManiacalHunterPlugin plugin;\n\tprivate final ManiacalHunterConfig config;\n\tprivate final Client client;\n\n\t@Inject\n\tprivate ManiacalHunterOverlay(ManiacalHunterPlugin plugin, ManiacalHunterConfig config, Client client)\n\t{\n\t\tsuper(plugin);\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t\tthis.client \u003d client;\n\t\tsetPosition(OverlayPosition.TOP_LEFT);\n\t}\n\n\tprivate boolean isInManiacalHunterArea()\n\t{\n\t\treturn client.getLocalPlayer() !\u003d null \u0026\u0026 client.getLocalPlayer().getWorldLocation().getRegionID() \u003d\u003d ManiacalHunterConstants.MANIACAL_HUNTER_REGION;\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (!isInManiacalHunterArea())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\tManiacalHunterSession session \u003d plugin.getSession();\n\t\tManiacalHunterSession aggregateSession \u003d plugin.getAggregateSession();\n\n\t\tpanelComponent.getChildren().clear();\n\n\t\tpanelComponent.getChildren().add(TitleComponent.builder()\n\t\t\t.text(\"Maniacal Hunter\")\n\t\t\t.color(Color.WHITE)\n\t\t\t.build());\n\n\t\tif (config.showMonkeysCaught()) {\n\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t.left(\"Monkeys Caught:\")\n\t\t\t\t.right(ManiacalHunterFormatting.formatStat(session.getMonkeysCaught(), aggregateSession.getMonkeysCaught(), config.displayMode()))\n\t\t\t\t.build());\n\t\t}\n\n\t\tif (config.showTrapsLaid()) {\n\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t.left(\"Traps Laid:\")\n\t\t\t\t.right(ManiacalHunterFormatting.formatStat(session.getTrapsLaid(), aggregateSession.getTrapsLaid(), config.displayMode()))\n\t\t\t\t.build());\n\t\t}\n\n\t\tif (config.showLastTrapStatus()) {\n\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t.left(\"Last Trap Status:\")\n\t\t\t\t.right(session.getLastTrapStatus())\n\t\t\t\t.build());\n\t\t}\n\n\t\tif (config.showSuccessRate()) {\n\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t.left(\"Success Rate:\")\n\t\t\t\t.right(ManiacalHunterFormatting.formatPercentage(session.getSuccessRate(), aggregateSession.getSuccessRate(), config.displayMode()))\n\t\t\t\t.build());\n\t\t}\n\n\t\tif (config.showMonkeysPerHour()) {\n\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t.left(\"Monkeys/Hour:\")\n\t\t\t\t.right(ManiacalHunterFormatting.formatDouble(session.getMonkeysPerHour(), aggregateSession.getMonkeysPerHour(), config.displayMode()))\n\t\t\t\t.build());\n\t\t}\n\n\t\tif (config.showPerfectTails()) {\n\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t.left(\"Perfect Tails:\")\n\t\t\t\t.right(ManiacalHunterFormatting.formatStat(session.getPerfectTails(), aggregateSession.getPerfectTails(), config.displayMode()))\n\t\t\t\t.build());\n\t\t}\n\n\t\tif (config.showDamagedTails()) {\n\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t.left(\"Damaged Tails:\")\n\t\t\t\t.right(ManiacalHunterFormatting.formatStat(session.getDamagedTails(), aggregateSession.getDamagedTails(), config.displayMode()))\n\t\t\t\t.build());\n\t\t}\n\n\t\tif (config.showLuck()) {\n\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t.left(\"Luck:\")\n\t\t\t\t.right(ManiacalHunterFormatting.formatPercentage(session.getLuckPercentage(), aggregateSession.getLuckPercentage(), config.displayMode()))\n\t\t\t\t.build());\n\t\t}\n\n\t\tif (config.showAvgCatchTime()) {\n\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t.left(\"Avg. Catch Time:\")\n\t\t\t\t.right(String.format(\"%.2fs\", session.getAverageTimePerCatch()))\n\t\t\t\t.build());\n\t\t}\n\n\t\treturn super.render(graphics);\n\t}\n}\n","filePath":"src\\main\\java\\com\\maniacalhunter\\ManiacalHunterOverlay.java"},{"fileName":"ManiacalHunterPlugin.java","content":"package com.maniacalhunter;\n\nimport com.google.inject.Provides;\nimport java.awt.image.BufferedImage;\nimport java.time.Duration;\nimport java.time.Instant;\nimport javax.inject.Inject;\n\nimport lombok.Getter;\nimport lombok.Setter;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameObject;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.GameState;\nimport net.runelite.api.Skill;\nimport net.runelite.api.events.PlayerDespawned;\nimport net.runelite.api.events.PlayerSpawned;\nimport net.runelite.api.events.GameObjectSpawned;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.ItemContainerChanged;\nimport net.runelite.api.events.StatChanged;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.Notifier;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.overlay.infobox.InfoBoxManager;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\n@PluginDescriptor(\n\tname \u003d \"Maniacal Hunter\"\n)\npublic class ManiacalHunterPlugin extends Plugin\n{\n\tprivate static final Logger log \u003d LoggerFactory.getLogger(ManiacalHunterPlugin.class);\n\tprivate static final String CONFIG_GROUP \u003d \"maniacalhunter\";\n\tprivate static final String RESET_BUTTON_KEY \u003d \"resetSessionButton\";\n\tprivate static final String CONDENSED_MODE_KEY \u003d \"condensedMode\";\n\n\t@Getter\n    private BufferedImage icon;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Setter\n    @Getter\n    @Inject\n\tprivate Notifier notifier;\n\n\t@Inject\n\tprivate ManiacalHunterConfig config;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n    @Inject\n    private ItemManager itemManager;\n\n\t@Inject\n\tprivate InfoBoxManager infoBoxManager;\n\n\t@Getter\n\t@Inject\n\tprivate ManiacalHunterSession session;\n\n\t@Getter\n    private ManiacalHunterSession aggregateSession \u003d new ManiacalHunterSession();\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate ManiacalHunterOverlay overlay;\n\n\tprivate ManiacalHunterInfoBox infoBox;\n\n\tprivate int lastPerfectTails \u003d 0;\n\tprivate int lastDamagedTails \u003d 0;\n\tprivate int catchesThisTick \u003d 0;\n\tprivate int lastTick \u003d 0;\n\tprivate int lastHunterXp \u003d -1;\n\tprivate boolean inHunterArea \u003d false;\n\n\tprivate void reset()\n\t{\n\t\tsession.reset();\n\t\tcatchesThisTick \u003d 0;\n\t\tlastTick \u003d 0;\n        lastPerfectTails \u003d 0;\n        lastDamagedTails \u003d 0;\n\n\t\tif (client.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tlastHunterXp \u003d client.getSkillExperience(Skill.HUNTER);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlastHunterXp \u003d -1;\n\t\t}\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tlog.info(\"Maniacal Hunter started!\");\n\t\tloadSession();\n\t\ticon \u003d itemManager.getImage(ManiacalHunterConstants.MANIACAL_ITEM_ID);\n\t\tinfoBox \u003d new ManiacalHunterInfoBox(this, config, icon);\n\t\tupdateDisplayMode();\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tlog.info(\"Maniacal Hunter stopped!\");\n\t\tinfoBoxManager.removeInfoBox(infoBox);\n\t\toverlayManager.remove(overlay);\n\t}\n\n\tprivate void loadSession()\n\t{\n\t\taggregateSession.setSessionStartTimeMillis(config.getSessionStartTime());\n\t\taggregateSession.setDurationMillis(config.getDuration());\n\t\taggregateSession.setMonkeysCaught(config.getMonkeysCaught());\n\t\taggregateSession.setTrapsLaid(config.getTrapsLaid());\n\t\taggregateSession.setLastTrapStatus(config.getLastTrapStatus());\n\t\taggregateSession.setPerfectTails(config.getPerfectTails());\n\t\taggregateSession.setDamagedTails(config.getDamagedTails());\n\t\taggregateSession.setDamagedTailsSincePerfect(config.getDamagedTailsSincePerfect());\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged)\n\t{\n\t\tif (gameStateChanged.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tlastHunterXp \u003d client.getSkillExperience(Skill.HUNTER);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onItemContainerChanged(ItemContainerChanged event)\n\t{\n\t\tif (!isInManiacalHunterArea() || event.getContainerId() !\u003d InventoryID.INVENTORY.getId())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tint currentPerfectTails \u003d event.getItemContainer().count(ManiacalHunterConstants.PERFECT_MONKEY_TAIL);\n\t\tint currentDamagedTails \u003d event.getItemContainer().count(ManiacalHunterConstants.DAMAGED_MONKEY_TAIL);\n\n\t\tint perfectTailsGained \u003d currentPerfectTails - lastPerfectTails;\n\t\tint damagedTailsGained \u003d currentDamagedTails - lastDamagedTails;\n\n\t\tif (catchesThisTick \u003e 0 \u0026\u0026 (perfectTailsGained \u003e 0 || damagedTailsGained \u003e 0))\n\t\t{\n\t\t\tif (perfectTailsGained \u003e 0)\n\t\t\t{\n\t\t\t\thandlePerfectTailGain();\n\t\t\t}\n\t\t\tif (damagedTailsGained \u003e 0)\n\t\t\t{\n\t\t\t\thandleDamagedTailGain();\n\t\t\t}\n\t\t\thandleMonkeyCatch();\n\t\t\tcatchesThisTick--;\n\t\t}\n\n\t\tlastPerfectTails \u003d currentPerfectTails;\n\t\tlastDamagedTails \u003d currentDamagedTails;\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick tick)\n\t{\n  \n        if (!isInManiacalHunterArea())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (client.getTickCount() !\u003d lastTick)\n\t\t{\n\t\t\tcatchesThisTick \u003d 0;\n\t\t\tlastTick \u003d client.getTickCount();\n        }\n\t\tif (session.getSessionStartTime() !\u003d null)\n\t\t{\n\t\t\tsession.setDuration(Duration.between(session.getSessionStartTime(), Instant.now()));\n\t\t}\n\t\tif (aggregateSession.getSessionStartTime() !\u003d null)\n\t\t{\n\t\t\taggregateSession.setDuration(Duration.between(aggregateSession.getSessionStartTime(), Instant.now()));\n\t\t\tconfig.setDuration(aggregateSession.getDurationMillis());\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onPlayerSpawned(PlayerSpawned event)\n\t{\n\t\tif (event.getPlayer() !\u003d client.getLocalPlayer())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tboolean currentlyInArea \u003d isInManiacalHunterArea();\n\t\tif (currentlyInArea)\n\t\t{\n\t\t\tinHunterArea \u003d true;\n\t\t\tif (config.autoResetMode() \u003d\u003d ResetMode.ON_ENTER_AREA)\n\t\t\t{\n\t\t\t\treset();\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onPlayerDespawned(PlayerDespawned event)\n\t{\n\t\tif (event.getPlayer() !\u003d client.getLocalPlayer())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (inHunterArea)\n\t\t{\n\t\t\tif (config.autoResetMode() \u003d\u003d ResetMode.ON_LEAVE_AREA)\n\t\t\t{\n\t\t\t\treset();\n\t\t\t}\n\t\t\tinHunterArea \u003d false;\n\t\t}\n\t}\n\n\tprivate boolean isInManiacalHunterArea()\n\t{\n\t\treturn client.getLocalPlayer() !\u003d null \u0026\u0026 client.getLocalPlayer().getWorldLocation().getRegionID() \u003d\u003d ManiacalHunterConstants.MANIACAL_HUNTER_REGION;\n\t}\n\n\t@Subscribe\n\tpublic void onStatChanged(StatChanged statChanged)\n\t{\n\t\tif (statChanged.getSkill() !\u003d Skill.HUNTER || !isInManiacalHunterArea())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (lastHunterXp \u003d\u003d -1)\n\t\t{\n\t\t\tlastHunterXp \u003d statChanged.getXp();\n\t\t\treturn;\n\t\t}\n\n\t\tint currentXp \u003d statChanged.getXp();\n\t\tint gainedXp \u003d currentXp - lastHunterXp;\n\n\t\tif (gainedXp \u003e 0 \u0026\u0026 gainedXp % ManiacalHunterConstants.MANIACAL_MONKEY_XP \u003d\u003d 0)\n\t\t{\n\t\t\tcatchesThisTick +\u003d gainedXp / ManiacalHunterConstants.MANIACAL_MONKEY_XP;\n\t\t}\n\t\t\n\t\tlastHunterXp \u003d currentXp;\n\n\t\tif (gainedXp \u003e 0)\n\t\t{\n\t\t\tif (session.getSessionStartTime() \u003d\u003d null)\n\t\t\t{\n\t\t\t\tsession.startSession();\n\t\t\t}\n\n\t\t\tif (aggregateSession.getSessionStartTime() \u003d\u003d null)\n\t\t\t{\n\t\t\t\taggregateSession.startSession();\n\t\t\t\tconfig.setSessionStartTime(aggregateSession.getSessionStartTimeMillis());\n\t\t\t}\n\t\t}\n\t}\n  \n\tprivate static final int MAX_DISTANCE \u003d 2;\n\n\t@Subscribe\n\tpublic void onGameObjectSpawned(GameObjectSpawned event)\n\t{\n\t\tif (!isInManiacalHunterArea())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tGameObject gameObject \u003d event.getGameObject();\n\t\tif (gameObject \u003d\u003d null\n\t\t\t|| !ManiacalHunterConstants.BOULDER_TRAP_IDS.contains(gameObject.getId())\n\t\t\t|| client.getLocalPlayer().getWorldLocation().distanceTo(gameObject.getWorldLocation()) \u003e MAX_DISTANCE)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tint id \u003d gameObject.getId();\n\n\t\tif (id \u003d\u003d ManiacalHunterConstants.SET_BOULDER_TRAP)\n\t\t{\n\t\t\thandleTrapLaid();\n\t\t}\n\t\telse if (id \u003d\u003d ManiacalHunterConstants.TRIGGERED_BOULDER_TRAP_1 || id \u003d\u003d ManiacalHunterConstants.TRIGGERED_BOULDER_TRAP_2)\n\t\t{\n\t\t\tupdateLastTrapStatus(\"Trap triggered\");\n\t\t}\n\t\telse if (id \u003d\u003d ManiacalHunterConstants.CAUGHT_MONKEY_BOULDER_1 || id \u003d\u003d ManiacalHunterConstants.CAUGHT_MONKEY_BOULDER_2)\n\t\t{\n\t\t\tupdateLastTrapStatus(\"Monkey caught\");\n\t\t}\n\t}\n\n\tprivate void handleMonkeyCatch()\n\t{\n\t\tsession.incrementMonkeysCaught();\n\t\taggregateSession.incrementMonkeysCaught();\n\t\tconfig.setMonkeysCaught(aggregateSession.getMonkeysCaught());\n\t\tif (config.milestoneNotification() \u0026\u0026 session.getMonkeysCaught() \u003e 0 \u0026\u0026 session.getMonkeysCaught() % config.milestoneInterval() \u003d\u003d 0)\n\t\t{\n\t\t\tnotifier.notify(\"Maniacal Hunter milestone: \" + session.getMonkeysCaught() + \" monkeys caught!\");\n\t\t}\n\t}\n\n\tprivate void handlePerfectTailGain() {\n\t\tsession.incrementPerfectTails();\n\t\taggregateSession.incrementPerfectTails();\n\t\tconfig.setPerfectTails(aggregateSession.getPerfectTails());\n\t\tconfig.setDamagedTailsSincePerfect(aggregateSession.getDamagedTailsSincePerfect());\n\t}\n\n\tprivate void handleDamagedTailGain() {\n\t\tsession.incrementDamagedTails();\n\t\taggregateSession.incrementDamagedTails();\n\t\tconfig.setDamagedTails(aggregateSession.getDamagedTails());\n\t\tconfig.setDamagedTailsSincePerfect(aggregateSession.getDamagedTailsSincePerfect());\n\t}\n\n\tprivate void handleTrapLaid() {\n\t\tsession.incrementTrapsLaid();\n\t\taggregateSession.incrementTrapsLaid();\n\t\tconfig.setTrapsLaid(aggregateSession.getTrapsLaid());\n\t\tupdateLastTrapStatus(\"Trap set\");\n\t}\n\n\tprivate void updateLastTrapStatus(String status) {\n\t\tsession.setLastTrapStatus(status);\n\t\taggregateSession.setLastTrapStatus(status);\n\t\tconfig.setLastTrapStatus(aggregateSession.getLastTrapStatus());\n\t}\n\n\t@Provides\n\tManiacalHunterConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(ManiacalHunterConfig.class);\n\t}\n\n\t@Provides\n\tManiacalHunterSession provideSession()\n\t{\n\t\treturn new ManiacalHunterSession();\n\t}\n\n    @Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif (!event.getGroup().equals(CONFIG_GROUP))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (event.getKey().equals(RESET_BUTTON_KEY))\n\t\t{\n\t\t\tif (config.resetSession())\n\t\t\t{\n\t\t\t\treset();\n\t\t\t\tconfigManager.setConfiguration(CONFIG_GROUP, RESET_BUTTON_KEY, false);\n\t\t\t}\n\t\t}\n\t\tif (event.getKey().equals(CONDENSED_MODE_KEY))\n\t\t{\n\t\t\tupdateDisplayMode();\n\t\t}\n\t}\n\n\tprivate void updateDisplayMode()\n\t{\n\t\tinfoBoxManager.removeInfoBox(infoBox);\n\t\toverlayManager.remove(overlay);\n\t\tif (config.condensedMode())\n\t\t{\n\t\t\tinfoBoxManager.addInfoBox(infoBox);\n\t\t}\n\t\telse\n\t\t{\n\t\t\toverlayManager.add(overlay);\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\maniacalhunter\\ManiacalHunterPlugin.java"},{"fileName":"ManiacalHunterSession.java","content":"package com.maniacalhunter;\n\nimport lombok.Getter;\nimport lombok.Setter;\n\nimport java.time.Duration;\nimport java.time.Instant;\n\npublic class ManiacalHunterSession\n{\n\tprivate static final int PERFECT_TAIL_DROP_CHANCE \u003d 5000;\n\tprivate static final double PERFECT_TAIL_DROP_RATE \u003d 1.0 / PERFECT_TAIL_DROP_CHANCE;\n\tprivate static final double MILLIS_PER_HOUR \u003d 3_600_000.0;\n\tprivate static final double MILLIS_PER_SECOND \u003d 1_000.0;\n\n    @Getter\n\t@Setter\n    private long sessionStartTimeMillis;\n\t@Getter\n\t@Setter\n    private long durationMillis;\n\t@Getter\n\t@Setter\n    private int monkeysCaught;\n\t@Getter\n\t@Setter\n    private int trapsLaid;\n\t@Getter\n    @Setter\n    private String lastTrapStatus;\n\t@Getter\n\t@Setter\n    private int perfectTails;\n\t@Getter\n\t@Setter\n    private int damagedTails;\n\t@Getter\n\t@Setter\n\tprivate int damagedTailsSincePerfect;\n\n\tpublic void startSession()\n\t{\n\t\tthis.sessionStartTimeMillis \u003d Instant.now().toEpochMilli();\n\t}\n\n\tpublic void reset()\n\t{\n\t\tthis.sessionStartTimeMillis \u003d 0;\n\t\tthis.durationMillis \u003d 0;\n\t\tthis.monkeysCaught \u003d 0;\n\t\tthis.trapsLaid \u003d 0;\n\t\tthis.lastTrapStatus \u003d \"N/A\";\n\t\tthis.perfectTails \u003d 0;\n\t\tthis.damagedTails \u003d 0;\n\t\tthis.damagedTailsSincePerfect \u003d 0;\n\t}\n\n\tpublic void incrementMonkeysCaught()\n\t{\n\t\tthis.monkeysCaught++;\n\t}\n\n\tpublic void incrementTrapsLaid()\n\t{\n\t\tthis.trapsLaid++;\n\t}\n\n\tpublic void incrementPerfectTails()\n\t{\n\t\tthis.perfectTails++;\n\t\tthis.damagedTailsSincePerfect \u003d 0;\n\t}\n\n\tpublic void incrementDamagedTails()\n\t{\n\t\tthis.damagedTails++;\n\t\tthis.damagedTailsSincePerfect++;\n\t}\n\n\tpublic double getLuckPercentage()\n\t{\n\t\tif (damagedTailsSincePerfect \u003d\u003d 0)\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\t\t// This calculates the probability of getting at least one perfect tail in N trials,\n\t\t// which is 1 minus the probability of getting zero perfect tails.\n\t\treturn (1.0 - Math.pow(1.0 - PERFECT_TAIL_DROP_RATE, damagedTailsSincePerfect)) * 100;\n\t}\n\n\tpublic double getSuccessRate()\n\t{\n\t\tif (trapsLaid \u003d\u003d 0)\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\t\treturn (double) monkeysCaught / trapsLaid * 100;\n\t}\n\n\tpublic double getMonkeysPerHour()\n\t{\n\t\tif (durationMillis \u003d\u003d 0)\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\t\treturn (double) monkeysCaught / (durationMillis / MILLIS_PER_HOUR);\n\t}\n\n\tpublic double getAverageTimePerCatch()\n\t{\n\t\tif (monkeysCaught \u003d\u003d 0 || durationMillis \u003d\u003d 0)\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\t\treturn (double) durationMillis / monkeysCaught / MILLIS_PER_SECOND;\n\t}\n\n\tpublic Instant getSessionStartTime()\n\t{\n\t\treturn sessionStartTimeMillis \u003d\u003d 0 ? null : Instant.ofEpochMilli(sessionStartTimeMillis);\n\t}\n\n\tpublic Duration getDuration()\n\t{\n\t\treturn durationMillis \u003d\u003d 0 ? null : Duration.ofMillis(durationMillis);\n\t}\n\n\tpublic void setDuration(Duration duration)\n\t{\n\t\tthis.durationMillis \u003d duration.toMillis();\n\t}\n}\n","filePath":"src\\main\\java\\com\\maniacalhunter\\ManiacalHunterSession.java"},{"fileName":"ResetMode.java","content":"package com.maniacalhunter;\n\npublic enum ResetMode\n{\n\tON_ENTER_AREA,\n\tON_LEAVE_AREA,\n\tNEVER\n}\n","filePath":"src\\main\\java\\com\\maniacalhunter\\ResetMode.java"},{"fileName":"ManiacalHunterPluginTest.java","content":"package com.maniacalhunter;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ManiacalHunterPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(ManiacalHunterPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\maniacalhunter\\ManiacalHunterPluginTest.java"}]},{"commit":"1396d7db9515407518ca6a183d0a7d42498fb013","repository":"https://github.com/Droei/Droei-RuneLite-Plugins.git","internalName":"entity-masker","files":[{"fileName":"test.java","content":"this file does not actually exist, because the repo does not exist","filePath":"asker\\test.java"}]},{"commit":"cec3e358e668bf2846fc8c794eb52c4bbc18038b","repository":"https://github.com/hootisman/muted_level_jingles.git","internalName":"unmutedjingles","files":[{"fileName":"JingleData.java","content":"package hootisman.unmutedjingles.jingles;\n\nimport net.runelite.api.Skill;\n\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.function.Function;\nimport java.util.stream.Collectors;\nimport java.util.stream.Stream;\n\npublic class JingleData {\n    // ***** Constants *****\n\n    static final Set\u003cInteger\u003e ATTACK_UNLOCKS \u003d\n            Stream.of(5, 10, 15, 20, 30, 40, 42, 50, 55,\n                    60, 65, 70, 75, 77, 78, 80, 82, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e COOKING_UNLOCKS \u003d\n            Stream.of(5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,\n                    20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n                    37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52,\n                    53, 54, 55, 57, 58, 59, 60, 62, 64, 65, 67, 68, 70, 72, 73, 75,\n                    80, 82, 84, 85, 88, 90, 91, 92, 95, 96, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e CRAFTING_UNLOCKS \u003d\n            Stream.of(3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,\n                    18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33,\n                    34, 35, 36, 37, 38, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50,\n                    51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66,\n                    67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 82, 83,\n                    84, 85, 86, 87, 88, 89, 90, 92, 95, 98, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e DEFENCE_UNLOCKS \u003d\n            Stream.of(5, 10, 20, 25, 30, 35, 40, 42, 45, 50,\n                    55, 60, 65, 70, 75, 78, 80, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e FARMING_UNLOCKS \u003d\n            Stream.of(2, 3, 4, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,\n                    19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34,\n                    35, 36, 38, 39, 40, 42, 44, 45, 46, 47, 48, 49, 50, 51, 53, 54,\n                    55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 67, 68, 69, 70, 72,\n                    73, 74, 75, 76, 79, 81, 83, 84, 85, 90, 91, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e FIREMAKING_UNLOCKS \u003d\n            Stream.of(4, 5, 11, 12, 15, 16, 20, 21, 25, 26, 30, 33, 35, 40,\n                    42, 43, 45, 47, 49, 50, 52, 55, 60, 62, 65, 66, 70, 75, 80, 85, 90, 95, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e FISHING_UNLOCKS \u003d\n            Stream.of(5, 7, 10, 15, 16, 20, 23, 25, 28, 29, 30, 33, 34, 35,\n                    38, 39, 40, 43, 45, 46, 47, 48, 50, 53, 55, 56, 58, 60, 61, 62,\n                    65, 68, 70, 71, 73, 75, 76, 79, 80, 81, 82, 85, 87, 90, 91, 96, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e FLETCHING_UNLOCKS \u003d\n            Stream.of(3, 5, 7, 9, 10, 11, 15, 17, 18, 20, 22, 24, 25, 26,\n                    27, 30, 32, 33, 35, 37, 38, 39, 40, 41, 42, 43, 45, 46, 47, 48,\n                    49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 65, 67,\n                    69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 80, 81, 82, 84, 85, 87,\n                    90, 92, 95, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e HERBLORE_UNLOCKS \u003d\n            Stream.of(3, 4, 5, 6, 8, 9, 10, 11, 12, 14, 15, 18, 19, 20, 22,\n                    24, 25, 26, 29, 30, 31, 33, 34, 36, 37, 38, 39, 40, 42, 44, 45,\n                    47, 48, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63,\n                    65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80,\n                    81, 82, 83, 84, 85, 86, 87, 88, 90, 91, 92, 94, 97, 98, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e MAGIC_UNLOCKS \u003d\n            Stream.of(3, 4, 5, 6, 7, 9, 11, 13, 14, 15, 16, 17, 19, 20, 21,\n                    23, 24, 25, 27, 28, 29, 30, 31, 33, 34, 35, 37, 38, 39, 40, 41,\n                    42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57,\n                    58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73,\n                    74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89,\n                    90, 91, 92, 93, 94, 95, 96, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e MINING_UNLOCKS \u003d\n            Stream.of(5, 6, 10, 11, 14, 15, 17, 20, 21, 22, 25, 30, 31, 35,\n                    37, 38, 39, 40, 41, 42, 43, 45, 50, 52, 55, 57, 60, 61, 64, 65,\n                    67, 68, 70, 71, 72, 75, 78, 80, 81, 82, 85, 90, 92, 97, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e PRAYER_UNLOCKS \u003d\n            Stream.of(3, 4, 7, 8, 9, 10, 12, 13, 16, 19, 20, 22, 24, 25, 26,\n                    27, 28, 30, 31, 32, 34, 36, 37, 40, 42, 43, 44, 45, 46, 47, 48,\n                    49, 50, 52, 54, 55, 56, 60, 62, 63, 64, 65, 68, 70, 72, 74, 75,\n                    76, 77, 80, 84, 85, 88, 90, 92, 96, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e RANGED_UNLOCKS \u003d\n            Stream.of(5, 10, 16, 19, 20, 21, 25, 26, 28, 30, 31, 35, 36, 37,\n                    39, 40, 42, 45, 46, 47, 50, 55, 60, 61, 62, 64, 65, 66, 70, 75, 77, 80, 85, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e RUNECRAFT_UNLOCKS \u003d\n            Stream.of(2, 5, 6, 9, 10, 11, 13, 14, 15, 19, 20, 22, 23, 25,\n                    26, 27, 28, 30, 33, 35, 38, 40, 42, 44, 46, 48, 49, 50, 52, 54,\n                    55, 56, 57, 59, 60, 65, 66, 70, 74, 75, 76, 77, 78, 79, 81, 82,\n                    84, 85, 88, 90, 91, 92, 95, 98, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e SLAYER_UNLOCKS \u003d\n            Stream.of(5, 7, 10, 15, 17, 18, 20, 22, 25, 30, 32, 33, 35, 37,\n                    38, 39, 40, 42, 44, 45, 47, 48, 50, 52, 55, 56, 57, 58, 60, 62,\n                    63, 65, 66, 68, 69, 70, 72, 75, 77, 80, 82, 83, 84, 85, 87, 90,\n                    91, 92, 93, 95, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e THIEVING_UNLOCKS \u003d\n            Stream.of(2, 5, 10, 13, 14, 15, 16, 17, 20, 21, 22, 23, 25, 27,\n                    28, 30, 31, 32, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45,\n                    46, 47, 48, 49, 50, 51, 52, 53, 55, 56, 57, 58, 59, 60, 61, 62,\n                    64, 65, 66, 70, 71, 72, 75, 78, 80, 81, 82, 84, 85, 90, 91, 93, 94, 95, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e WOODCUTTING_UNLOCKS \u003d\n            Stream.of(6, 10, 11, 12, 15, 19, 20, 21, 24, 27, 29, 30, 31, 35,\n                    36, 40, 41, 42, 44, 45, 48, 50, 54, 55, 56, 57, 60, 61, 62, 65,\n                    68, 70, 71, 72, 75, 84, 90, 96, 99).collect(Collectors.toUnmodifiableSet());\n\n    //todo: test all durations\n    //(duration in seconds)/0.6\n    public static Map\u003cSkill, Function\u003cInteger, Integer\u003e\u003e JINGLE_DURATIONS \u003d Map.ofEntries(\n            Map.entry(Skill.AGILITY, level -\u003e 10),\n            Map.entry(Skill.ATTACK, getRegularUnlocksFunction(6,13,ATTACK_UNLOCKS)),\n            Map.entry(Skill.CONSTRUCTION, level -\u003e 10),\n            Map.entry(Skill.COOKING, getRegularUnlocksFunction(7,6,COOKING_UNLOCKS)),\n            Map.entry(Skill.CRAFTING, getRegularUnlocksFunction(16,10,CRAFTING_UNLOCKS)),\n            Map.entry(Skill.DEFENCE, getRegularUnlocksFunction(9,12,DEFENCE_UNLOCKS)),\n            Map.entry(Skill.FARMING, getRegularUnlocksFunction(7,12,FARMING_UNLOCKS)),\n            Map.entry(Skill.FIREMAKING, getRegularUnlocksFunction(10,10,FIREMAKING_UNLOCKS)),\n            Map.entry(Skill.FISHING, getRegularUnlocksFunction(11,9,FISHING_UNLOCKS)),\n            Map.entry(Skill.FLETCHING, getRegularUnlocksFunction(9,8,FLETCHING_UNLOCKS)),\n            Map.entry(Skill.HERBLORE, getRegularUnlocksFunction(5,10,HERBLORE_UNLOCKS)),\n            Map.entry(Skill.HITPOINTS, level -\u003e level \u003c 50 ? 5 : 8),\n            Map.entry(Skill.HUNTER, level -\u003e 12),\n            Map.entry(Skill.MAGIC, getRegularUnlocksFunction(11,11,MAGIC_UNLOCKS)),\n            Map.entry(Skill.MINING, getRegularUnlocksFunction(10,10,MINING_UNLOCKS)),\n            Map.entry(Skill.PRAYER, getRegularUnlocksFunction(12,12,PRAYER_UNLOCKS)),\n            Map.entry(Skill.RANGED, getRegularUnlocksFunction(8,9,RANGED_UNLOCKS)),\n            Map.entry(Skill.RUNECRAFT, getRegularUnlocksFunction(13,13,RUNECRAFT_UNLOCKS)),\n            Map.entry(Skill.SLAYER, getRegularUnlocksFunction(10,15,SLAYER_UNLOCKS)),\n            Map.entry(Skill.SMITHING, level -\u003e 9),     //every level is an unlock\n            Map.entry(Skill.STRENGTH, level -\u003e level \u003c 50 ? 10 : 8),\n            Map.entry(Skill.THIEVING, getRegularUnlocksFunction(11,8,THIEVING_UNLOCKS)),\n            Map.entry(Skill.WOODCUTTING, getRegularUnlocksFunction(10,11,WOODCUTTING_UNLOCKS))\n    );\n\n    // ***** Mutable *****\n    public static Map\u003cSkill, Integer\u003e SKILL_LEVELS \u003d new HashMap\u003c\u003e();\n    static {\n        SKILL_LEVELS.put(Skill.AGILITY, -1);\n        SKILL_LEVELS.put(Skill.ATTACK, -1);\n        SKILL_LEVELS.put(Skill.CONSTRUCTION, -1);\n        SKILL_LEVELS.put(Skill.COOKING, -1);\n        SKILL_LEVELS.put(Skill.CRAFTING, -1);\n        SKILL_LEVELS.put(Skill.DEFENCE, -1);\n        SKILL_LEVELS.put(Skill.FARMING, -1);\n        SKILL_LEVELS.put(Skill.FIREMAKING, -1);\n        SKILL_LEVELS.put(Skill.FISHING, -1);\n        SKILL_LEVELS.put(Skill.FLETCHING, -1);\n        SKILL_LEVELS.put(Skill.HERBLORE, -1);\n        SKILL_LEVELS.put(Skill.HITPOINTS, -1);\n        SKILL_LEVELS.put(Skill.HUNTER, -1);\n        SKILL_LEVELS.put(Skill.MAGIC, -1);\n        SKILL_LEVELS.put(Skill.MINING, -1);\n        SKILL_LEVELS.put(Skill.PRAYER, -1);\n        SKILL_LEVELS.put(Skill.RANGED, -1);\n        SKILL_LEVELS.put(Skill.RUNECRAFT, -1);\n        SKILL_LEVELS.put(Skill.SLAYER, -1);\n        SKILL_LEVELS.put(Skill.SMITHING, -1);\n        SKILL_LEVELS.put(Skill.STRENGTH, -1);\n        SKILL_LEVELS.put(Skill.THIEVING, -1);\n        SKILL_LEVELS.put(Skill.WOODCUTTING, -1);\n    };\n\n    //true if level was set at game start\n    public static boolean isLevelInited(Skill skill){\n        return SKILL_LEVELS.get(skill) !\u003d -1;\n    }\n\n    static Function\u003cInteger, Integer\u003e getRegularUnlocksFunction(int defaultDuration, int unlockDuration, Set\u003cInteger\u003e levelsWithUnlocks){\n        return level -\u003e levelsWithUnlocks.contains(level) ? unlockDuration : defaultDuration;\n    }\n}\n","filePath":"src\\main\\java\\hootisman\\unmutedjingles\\jingles\\JingleData.java"},{"fileName":"JingleManager.java","content":"package hootisman.unmutedjingles.jingles;\n\nimport hootisman.unmutedjingles.UnmutedJinglesConfig;\nimport lombok.*;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Skill;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.plugins.music.MusicConfig;\nimport javax.annotation.Nullable;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.util.LinkedList;\nimport java.util.Objects;\n\n@Slf4j\n@Singleton\npublic class JingleManager {\n\n    @Inject\n    private Client client;\n\n    @Setter\n    @Nullable\n    private MusicConfig musicPluginConfig;\n\n    @Inject\n    private ClientThread clientThread;\n\n    @Inject\n    private UnmutedJinglesConfig config;\n\n    private int jingleTick;\n\n    private LinkedList\u003cJingle\u003e jingleQueue;\n\n\n    public JingleManager(){\n        jingleTick \u003d -1;\n        jingleQueue \u003d new LinkedList\u003c\u003e();\n    }\n\n\n\n    public void queueJingle(Skill skill, int level){\n        if (jingleQueue.isEmpty() \u0026\u0026 !isMusicMuted()) return;\n\n        int duration \u003d JingleData.JINGLE_DURATIONS.get(skill).apply(level);\n        log.debug(\"*j* adding \" + skill +\" jingle of \" + duration);\n        jingleQueue.add(Jingle.of(duration, false));\n\n        if (!isWindowClosed()){\n            //there is an open window\n            return;\n        }\n\n        startJingle();\n    }\n\n    private void startJingle(){\n        Jingle jingle \u003d jingleQueue.getFirst();\n\n        muteMusic(false);\n        log.debug(\"*j* unmuting jingle for \" + jingle.duration + \" ticks...\");\n        jingleTick \u003d 0;\n        jingle.setJinglePlaying(true);\n    }\n\n    public void endJingle(){\n        muteMusic(true);\n        log.debug(\"*j* jingle ended, muting...\");\n        jingleTick \u003d -1;\n        jingleQueue.remove();\n    }\n\n    public void tickJingle(){\n        if (jingleQueue.isEmpty()) return;\n\n        if (isWindowClosed() \u0026\u0026 !jingleQueue.getFirst().isJinglePlaying) startJingle();\n\n        if (jingleTick \u003e jingleQueue.getFirst().duration - 1){\n            endJingle();\n        }else if (jingleTick !\u003d -1){\n            jingleTick +\u003d 1;\n            log.debug(\"*G* \" + jingleTick);\n        }\n    }\n\n    void muteMusic(boolean shouldMute){\n        int val;\n        if (musicPluginConfig \u003d\u003d null || !musicPluginConfig.granularSliders()){\n            val \u003d shouldMute ? 0 : config.jingleVolume();\n            client.setMusicVolume(val);\n        }else{\n            val \u003d shouldMute ? -config.jingleVolume() : config.jingleVolume();\n            musicPluginConfig.setMusicVolume(val);\n        }\n\n    }\n\n    //if widget S161.16 has 1 or more children, then return true\n    public boolean isWindowClosed() {\n        return Objects.requireNonNull(client.getWidget(161, 16)).getNestedChildren().length \u003d\u003d 0;\n    }\n\n    public boolean isMusicMuted(){\n        return client.getMusicVolume() \u003d\u003d 0;\n    }\n\n    @AllArgsConstructor(access \u003d AccessLevel.PROTECTED, staticName \u003d \"of\")\n    private static class Jingle {\n        int duration;\n        @Setter\n        boolean isJinglePlaying;    //when music is unmuted we might need to know if its because of user or jingle\n    }\n}\n","filePath":"src\\main\\java\\hootisman\\unmutedjingles\\jingles\\JingleManager.java"},{"fileName":"UnmutedJinglesConfig.java","content":"package hootisman.unmutedjingles;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.Range;\n\n@ConfigGroup(\"unmutedjingles\")\npublic interface UnmutedJinglesConfig extends Config\n{\n\t@Range(max\u003d255)\n\t@ConfigItem(\n\t\tkeyName \u003d \"jingleVolume\",\n\t\tname \u003d \"Jingle Volume\",\n\t\tdescription \u003d \"Volume when jingles are played\"\n\t)\n\tdefault int jingleVolume()\n\t{\n\t\treturn 50;\n\t}\n\n}\n","filePath":"src\\main\\java\\hootisman\\unmutedjingles\\UnmutedJinglesConfig.java"},{"fileName":"UnmutedJinglesPlugin.java","content":"package hootisman.unmutedjingles;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\n\nimport hootisman.unmutedjingles.jingles.JingleData;\nimport hootisman.unmutedjingles.jingles.JingleManager;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.*;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.PluginChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDependency;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.plugins.PluginManager;\nimport net.runelite.client.plugins.music.MusicConfig;\nimport net.runelite.client.plugins.music.MusicPlugin;\n\nimport java.util.List;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Unmuted Jingles\"\n)\n@PluginDependency(MusicPlugin.class)\npublic class UnmutedJinglesPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate MusicPlugin musicPlugin;\n\n\t@Inject\n\tprivate PluginManager pluginManager;\n\n\t@Inject\n\tprivate UnmutedJinglesConfig config;\n\n\t@Inject\n\tprivate JingleManager jingleManager;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tlog.debug(\"*START* Setting music plugin; isEnabled\" + pluginManager.isPluginEnabled(musicPlugin));\n\t\tjingleManager.setMusicPluginConfig(pluginManager.isPluginEnabled(musicPlugin) ? (MusicConfig) pluginManager.getPluginConfigProxy(musicPlugin) : null);\n\t}\n\n\n\t@Subscribe\n\tpublic void onPluginChanged(PluginChanged e){\n\t\tif (!e.getPlugin().equals(musicPlugin)) return;\n\n\t\tlog.debug(\"*P* Setting music plugin; isLoaded\" + e.isLoaded());\n\t\tjingleManager.setMusicPluginConfig(e.isLoaded() ? (MusicConfig) pluginManager.getPluginConfigProxy(musicPlugin) : null);\n\n\t}\n\n\t@Subscribe\n\tpublic void onStatChanged(StatChanged e){\n\t\tSkill skill \u003d e.getSkill();\n\t\tint level \u003d e.getLevel();\n\t\tint listedLevel \u003d JingleData.SKILL_LEVELS.get(skill);\n\n\t\tlog.debug(\"*stat* \" + e.toString());\n\n\t\t//level never changed\n\t\tif (listedLevel \u003d\u003d level) return;\n\n\t\tif (JingleData.isLevelInited(skill)){\n\t\t\tjingleManager.queueJingle(skill, level);\n        }\n\n\t\tJingleData.SKILL_LEVELS.put(skill, level);\n\t}\n\n\n\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick e){\n\t\tjingleManager.tickJingle();\n\n\t\t/*\n\t\tList\u003cMidiRequest\u003e reqs \u003d client.getActiveMidiRequests();\n\t\tif (!reqs.isEmpty()){\n\t\t\treqs.forEach(req -\u003e {\n\t\t\t\tlog.info(\"*G* req \" + req.getArchiveId() + \" \" + req.isJingle());\n\t\t\t});\n\n\t\t}\n\t\t */\n\t}\n\n\t/*\n\t@Subscribe\n\tpublic void onWidgetLoaded(WidgetLoaded e){\n\t\t//todo: get other jingles to work\n\t\tlog.info(\"*W* \" + e.toString());\n\n\t\tif(e.getGroupId() \u003d\u003d 193){\n\t\t\tWidget icon  \u003d client.getWidget(ComponentID.DIALOG_SPRITE_SPRITE);\n\n\t\t\tif (icon !\u003d null \u0026\u0026 icon.getItemId() \u003d\u003d 2996){\n\t\t\t\tlog.info(\"*W* This is a brimhaven ticket!\");\n\t\t\t\tstartJingle();\n\t\t\t}\n\t\t}\n\n\t\t//level up window id\n\t\t//else if(e.getGroupId() \u003d\u003d 233){\n\t\t//\tstartJingle();\n\t\t//}\n\t}\n\n\t */\n\n\n\t@Provides\n\tUnmutedJinglesConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(UnmutedJinglesConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\hootisman\\unmutedjingles\\UnmutedJinglesPlugin.java"},{"fileName":"UnmutedJinglesPluginTest.java","content":"package hootisman.unmutedjingles;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class UnmutedJinglesPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(UnmutedJinglesPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\hootisman\\unmutedjingles\\UnmutedJinglesPluginTest.java"}]}]