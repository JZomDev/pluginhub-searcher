package com.sidebuttoncamera;

import net.runelite.client.config.Config;
import net.runelite.client.config.ConfigGroup;
import net.runelite.client.config.ConfigItem;

@ConfigGroup("buttonremap")
public interface SideButtonCameraConfig extends Config {
	enum ExtraButton {
		BUTTON4,
		BUTTON5
	}

	@ConfigItem(
			keyName = "extraButton",
			name = "Button",
			description = "Select which button to use as a camera control.",
			position = 1
	)
	default ExtraButton extraButton() {
		return ExtraButton.BUTTON4;
	}

	@ConfigItem(
			keyName = "notice",
			name = "---IMPORTANT---",
			description = "",
			position = 2
	)
	default String notice()
	{
		return "MAKE SURE TO DISABLE\n'Block extra mouse buttons'\nIN RUNELITE CONFIG.";
	}
}

package com.sidebuttoncamera;

import java.awt.event.MouseEvent;
import javax.inject.Inject;

import com.google.inject.Provides;
import net.runelite.api.Client;
import net.runelite.client.config.ConfigManager;
import net.runelite.client.input.MouseListener;
import net.runelite.client.input.MouseManager;
import net.runelite.client.plugins.Plugin;
import net.runelite.client.plugins.PluginDescriptor;

@PluginDescriptor(
		name = "Side Button Camera",
		description = "Allows remaping camera movement to side button on your mouse.",
		tags = { "mouse", "remap", "camera" },
		enabledByDefault = true
)
public class SideButtonCameraPlugin extends Plugin implements MouseListener
{
	private boolean sideClick;

	@Inject
	private Client client;

	@Inject
	private SideButtonCameraConfig config;

	@Inject
	private MouseManager mouseManager;

	@Provides
	SideButtonCameraConfig provideConfig(ConfigManager configManager)
	{
		return configManager.getConfig(SideButtonCameraConfig.class);
	}

	@Override
	protected void startUp()
	{
		sideClick = false;
		mouseManager.registerMouseListener(this);
	}

	@Override
	protected void shutDown()
	{
		mouseManager.unregisterMouseListener(this);
	}

	@Override
	public MouseEvent mousePressed(MouseEvent mouseEvent)
	{
		final SideButtonCameraConfig.ExtraButton extraButton = config.extraButton();
		int selectedButton = extraButton == SideButtonCameraConfig.ExtraButton.BUTTON4 ? 4 : 5;
		int remainingButton = extraButton == SideButtonCameraConfig.ExtraButton.BUTTON4 ? 5 : 4;

		if (mouseEvent.getButton() == selectedButton)
		{
			sideClick = true;
			mouseEvent = new MouseEvent((java.awt.Component) mouseEvent.getSource(),
					mouseEvent.getID(),
					mouseEvent.getWhen(),
					mouseEvent.getModifiersEx(),
					mouseEvent.getX(),
					mouseEvent.getY(),
					mouseEvent.getClickCount(),
					mouseEvent.isPopupTrigger(),
					MouseEvent.BUTTON2);
		}

		if (mouseEvent.getButton() == remainingButton)
		{
			mouseEvent.consume();
		}

		return mouseEvent;
	}

	@Override
	public MouseEvent mouseReleased(MouseEvent mouseEvent)
	{
		if (sideClick)
		{
			sideClick = false;
			mouseEvent = new MouseEvent((java.awt.Component) mouseEvent.getSource(),
					mouseEvent.getID(),
					mouseEvent.getWhen(),
					mouseEvent.getModifiersEx(),
					mouseEvent.getX(),
					mouseEvent.getY(),
					mouseEvent.getClickCount(),
					mouseEvent.isPopupTrigger(),
					MouseEvent.BUTTON2);
		}
		return mouseEvent;
	}

	@Override
	public MouseEvent mouseDragged(MouseEvent mouseEvent)
	{
		return mouseEvent;
	}

	@Override
	public MouseEvent mouseMoved(MouseEvent mouseEvent)
	{
		return mouseEvent;
	}

	@Override
	public MouseEvent mouseClicked(MouseEvent mouseEvent)
	{
		return mouseEvent;
	}

	@Override
	public MouseEvent mouseEntered(MouseEvent mouseEvent)
	{
		return mouseEvent;
	}

	@Override
	public MouseEvent mouseExited(MouseEvent mouseEvent)
	{
		return mouseEvent;
	}
}

package com.sidebuttoncamera;

import net.runelite.client.RuneLite;
import net.runelite.client.externalplugins.ExternalPluginManager;

public class SideButtonCameraPluginTest
{
	public static void main(String[] args) throws Exception
	{
		ExternalPluginManager.loadBuiltin(SideButtonCameraPlugin.class);
		RuneLite.main(args);
	}
}
