[{"commit":"9893f1fe2259727e7ec2784990ab262f8c70b717","repository":"https://github.com/JohnMichaelRouth/close-bank.git","internalName":"close-bank","files":[{"fileName":"CloseBankConfig.java","content":"package com.closeBank;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.Range;\n\n@ConfigGroup(\"closebank\")\npublic interface CloseBankConfig extends Config\n{\n\t@ConfigItem(\n\t\tkeyName \u003d \"enableCloseButton\",\n\t\tname \u003d \"Move Close Button\",\n\t\tdescription \u003d \"Move the bank close button to the bottom right of the bank interface\"\n\t)\n\tdefault boolean enableCloseButton()\n\t{\n\t\treturn true;\n\t}\n\n\n\t@Range(\n\t\tmin \u003d -20,\n\t\tmax \u003d 20\n\t)\n\t@ConfigItem(\n\t\tkeyName \u003d \"horizontalPaddingAdjustment\",\n\t\tname \u003d \"Right Padding\",\n\t\tdescription \u003d \"Adjust padding from the right edge of the bank (0 \u003d default)\"\n\t)\n\tdefault int horizontalPaddingAdjustment()\n\t{\n\t\treturn 5;\n\t}\n\n\t@Range(\n\t\tmin \u003d -20,\n\t\tmax \u003d 20\n\t)\n\t@ConfigItem(\n\t\tkeyName \u003d \"verticalPaddingAdjustment\",\n\t\tname \u003d \"Bottom Padding\",\n\t\tdescription \u003d \"Adjust padding from the bottom of the bank (0 \u003d default)\"\n\t)\n\tdefault int verticalPaddingAdjustment()\n\t{\n\t\treturn 5;\n\t}\n}\n","filePath":"src\\main\\java\\com\\closeBank\\CloseBankConfig.java"},{"fileName":"CloseBankPlugin.java","content":"package com.closeBank;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.ScriptID;\nimport net.runelite.api.events.ScriptPostFired;\nimport net.runelite.api.events.ScriptPreFired;\nimport net.runelite.api.events.WidgetLoaded;\nimport net.runelite.api.gameval.InterfaceID;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetPositionMode;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Close Bank\",\n\tdescription \u003d \"Moves the close button to the bottom right of the bank interface\"\n)\npublic class CloseBankPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate CloseBankConfig config;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t// Reference to the real close button widget\n\tprivate Widget closeButton \u003d null;\n\n\t// Original position values to restore on shutdown\n\tprivate int originalX \u003d -1;\n\tprivate int originalY \u003d -1;\n\tprivate int originalXPositionMode \u003d -1;\n\tprivate int originalYPositionMode \u003d -1;\n\tprivate boolean positionSaved \u003d false;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\t// Reset state\n\t\tcloseButton \u003d null;\n\t\tpositionSaved \u003d false;\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tclientThread.invokeLater(this::restoreButtonPosition);\n\t}\n\n\tprivate void restoreButtonPosition()\n\t{\n\t\tif (closeButton !\u003d null \u0026\u0026 positionSaved)\n\t\t{\n\t\t\tcloseButton.setOriginalX(originalX);\n\t\t\tcloseButton.setOriginalY(originalY);\n\t\t\tcloseButton.setXPositionMode(originalXPositionMode);\n\t\t\tcloseButton.setYPositionMode(originalYPositionMode);\n\t\t\tcloseButton.revalidate();\n\t\t}\n\t\tcloseButton \u003d null;\n\t\tpositionSaved \u003d false;\n\t}\n\n\t@Subscribe\n\tpublic void onWidgetLoaded(WidgetLoaded event)\n\t{\n\t\tif (event.getGroupId() \u003d\u003d InterfaceID.BANKMAIN)\n\t\t{\n\t\t\tcloseButton \u003d null;\n\t\t\tpositionSaved \u003d false;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif (event.getGroup().equals(\"closebank\"))\n\t\t{\n\t\t\tclientThread.invokeLater(this::updateButton);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onScriptPostFired(ScriptPostFired event)\n\t{\n\t\tif (event.getScriptId() \u003d\u003d ScriptID.BANKMAIN_BUILD)\n\t\t{\n\t\t\tclientThread.invokeLater(this::updateButton);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onScriptPreFired(ScriptPreFired event)\n\t{\n\t\t// Reposition the button when the bank finishes building to ensure correct positioning in resizable mode\n\t\tif (event.getScriptId() \u003d\u003d ScriptID.BANKMAIN_FINISHBUILDING)\n\t\t{\n\t\t\tclientThread.invokeLater(this::updateButton);\n\t\t}\n\t}\n\n\tprivate Widget findCloseButton()\n\t{\n\t\t// The close button is a dynamic child of the FRAME widget at index 11\n\t\t// Widget Inspector shows: D 12.2[11] where 12.2 is InterfaceID.Bankmain.FRAME\n\t\tWidget frame \u003d client.getWidget(InterfaceID.Bankmain.FRAME);\n\t\tif (frame \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\t// Get dynamic child at index 11 (the close button)\n\t\treturn frame.getChild(11);\n\t}\n\n\tprivate void updateButton()\n\t{\n\t\t// Find the close button if we don\u0027t have a reference\n\t\tif (closeButton \u003d\u003d null)\n\t\t{\n\t\t\tcloseButton \u003d findCloseButton();\n\t\t}\n\n\t\tif (closeButton \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!config.enableCloseButton())\n\t\t{\n\t\t\t// If button is disabled, restore original position\n\t\t\tif (positionSaved)\n\t\t\t{\n\t\t\t\trestoreButtonPosition();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// Save original position if not already saved\n\t\tif (!positionSaved)\n\t\t{\n\t\t\toriginalX \u003d closeButton.getOriginalX();\n\t\t\toriginalY \u003d closeButton.getOriginalY();\n\t\t\toriginalXPositionMode \u003d closeButton.getXPositionMode();\n\t\t\toriginalYPositionMode \u003d closeButton.getYPositionMode();\n\t\t\tpositionSaved \u003d true;\n\t\t}\n\n\t\t// Position the button to bottom right of the bank\n\t\trepositionButton();\n\t}\n\n\tprivate void repositionButton()\n\t{\n\t\tif (closeButton \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// The close button is a child of FRAME, so use FRAME as the parent for positioning\n\t\tWidget frame \u003d client.getWidget(InterfaceID.Bankmain.FRAME);\n\t\tif (frame \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// Calculate bottom offset by checking for widgets at the bottom\n\t\t// The incinerator and potion store may move to the bottom in certain resizable sizes\n\t\tint bottomOffset \u003d 39; // Default offset from bottom\n\n\t\tWidget incinerator \u003d client.getWidget(InterfaceID.Bankmain.INCINERATOR_TARGET);\n\t\tif (incinerator !\u003d null \u0026\u0026 !incinerator.isHidden())\n\t\t{\n\t\t\t// Incinerator is visible, calculate offset based on it\n\t\t\tint incTop \u003d incinerator.getOriginalY();\n\t\t\tint incHeight \u003d incinerator.getHeight();\n\t\t\tbottomOffset \u003d Math.max(bottomOffset, incHeight + incTop);\n\t\t}\n\n\t\tWidget potionStore \u003d client.getWidget(InterfaceID.Bankmain.POTIONSTORE_BUTTON);\n\t\tif (potionStore !\u003d null \u0026\u0026 !potionStore.isSelfHidden())\n\t\t{\n\t\t\t// Potion store is visible, calculate offset based on it\n\t\t\tint potTop \u003d potionStore.getOriginalY();\n\t\t\tint potHeight \u003d potionStore.getHeight();\n\t\t\tbottomOffset \u003d Math.max(bottomOffset, potHeight + potTop);\n\t\t}\n\n\t\t// Add spacing above the bottom widgets\n\t\tint baseVerticalPadding \u003d 2;\n\t\tint verticalPadding \u003d baseVerticalPadding + config.verticalPaddingAdjustment();\n\t\tint yPositionFromBottom \u003d bottomOffset + verticalPadding;\n\n\t\t// Position button at bottom right\n\t\t// X position: right edge with spacing (for ABSOLUTE positioning, calculate from left)\n\t\tint baseHorizontalPadding \u003d 20;\n\t\tint horizontalPadding \u003d baseHorizontalPadding + config.horizontalPaddingAdjustment();\n\t\tint xPos \u003d frame.getWidth() - closeButton.getWidth() - horizontalPadding;\n\n\t\tcloseButton.setOriginalX(xPos);\n\t\tcloseButton.setXPositionMode(WidgetPositionMode.ABSOLUTE_LEFT);\n\n\t\t// Y position: using ABSOLUTE_BOTTOM, this is distance from the bottom\n\t\tcloseButton.setOriginalY(yPositionFromBottom);\n\t\tcloseButton.setYPositionMode(WidgetPositionMode.ABSOLUTE_BOTTOM);\n\n\t\tcloseButton.revalidate();\n\t}\n\n\n\t@Provides\n\tCloseBankConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(CloseBankConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\closeBank\\CloseBankPlugin.java"},{"fileName":"ExamplePluginTest.java","content":"package com.example;\n\nimport com.closeBank.CloseBankPlugin;\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ExamplePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(CloseBankPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\example\\ExamplePluginTest.java"}]},{"commit":"82f075a1017f3d6e6441d1354e2ba77c397dadc2","repository":"https://github.com/dey0/pluginhub-plugins.git","internalName":"miasma-tiles","files":[{"fileName":"MiasmaTilesConfig.java","content":"package de0.miasmatiles;\n\nimport java.awt.Color;\n\nimport net.runelite.client.config.Alpha;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"miasmatiles\")\npublic interface MiasmaTilesConfig extends Config {\n  \n  @ConfigItem(name \u003d \"Show burn tiles\", description \u003d \"\", keyName \u003d \"burnTiles\")\n  default boolean showBurnTiles() {\n    return true;\n  }\n  \n  @Alpha\n  @ConfigItem(name \u003d \"Burn tile color\", description \u003d \"\", keyName \u003d \"burnTileColor\")\n  default Color burnTileColor() {\n    return new Color(0x96CB2929, true);\n  }\n\n  @ConfigItem(name \u003d \"Show Olm tiles\", description \u003d \"\", keyName \u003d \"olmTiles\")\n  default boolean showOlmTiles() {\n    return true;\n  }\n  \n  @Alpha\n  @ConfigItem(name \u003d \"Olm tile color\", description \u003d \"\", keyName \u003d \"olmTileColor\")\n  default Color olmTileColor() {\n    return new Color(0xffB8C7CB, true);\n  }\n\n  @ConfigItem(name \u003d \"Thin outline\", description \u003d \"Draw 1px non-AA outline instead of RuneLite default\", keyName \u003d \"thinOutline\")\n  default boolean thinOutline() {\n    return false;\n  }\n\n}\n","filePath":"src\\main\\java\\de0\\miasmatiles\\MiasmaTilesConfig.java"},{"fileName":"MiasmaTilesData.java","content":"package de0.miasmatiles;\n\nclass MiasmaTilesData {\n\n  static final int REGION_ID \u003d 12889;\n\n  static final int BURN \u003d 0, OLM \u003d 1;\n\n  static final int[][] TILES \u003d new int[][] { { 33, 34, BURN }, { 31, 34, BURN },\n      { 35, 35, BURN }, { 37, 35, BURN }, { 33, 36, BURN }, { 31, 36, BURN },\n      { 29, 35, BURN }, { 29, 37, BURN }, { 31, 38, BURN }, { 33, 38, BURN },\n      { 35, 37, BURN }, { 37, 37, BURN }, { 35, 39, BURN }, { 37, 39, BURN },\n      { 37, 41, OLM }, { 35, 41, BURN }, { 33, 40, BURN }, { 31, 40, BURN },\n      { 29, 39, BURN }, { 33, 42, BURN }, { 31, 42, BURN }, { 29, 41, BURN },\n      { 28, 52, BURN }, { 30, 52, BURN }, { 34, 52, BURN }, { 32, 52, BURN },\n      { 36, 52, BURN }, { 30, 50, BURN }, { 32, 50, BURN }, { 34, 50, BURN },\n      { 28, 48, BURN }, { 30, 48, BURN }, { 32, 48, BURN }, { 34, 48, BURN },\n      { 36, 48, BURN }, { 28, 46, BURN }, { 30, 46, BURN }, { 32, 46, BURN },\n      { 34, 46, BURN }, { 36, 46, BURN }, { 35, 45, OLM }, { 35, 43, OLM },\n      { 30, 45, OLM }, { 30, 43, OLM }, { 28, 50, OLM }, { 37, 50, OLM },\n      { 37, 38, OLM }, { 28, 38, OLM }, { 36, 50, BURN }, { 37, 43, BURN },\n      { 33, 44, BURN }, { 31, 44, BURN }, { 29, 44, BURN }, { 28, 47, OLM } };\n\n}\n","filePath":"src\\main\\java\\de0\\miasmatiles\\MiasmaTilesData.java"},{"fileName":"MiasmaTilesOverlay.java","content":"package de0.miasmatiles;\n\nimport java.awt.BasicStroke;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.RenderingHints;\n\nimport javax.inject.Inject;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Point;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\n\npublic class MiasmaTilesOverlay extends Overlay {\n\n  private Client client;\n  private MiasmaTilesConfig config;\n\n  @Inject\n  MiasmaTilesOverlay(Client client, MiasmaTilesConfig config) {\n    this.client \u003d client;\n    this.config \u003d config;\n    setPosition(OverlayPosition.DYNAMIC);\n    setLayer(OverlayLayer.ABOVE_SCENE);\n  }\n\n  @Override\n  public Dimension render(Graphics2D g) {\n    WorldPoint wp \u003d client.getLocalPlayer().getWorldLocation();\n    int region \u003d WorldPoint.fromLocalInstance(client, LocalPoint.fromWorld(client, wp)).getRegionID();\n    \n    if (region !\u003d MiasmaTilesData.REGION_ID)\n      return null;\n\n    g.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\n        config.thinOutline() ? RenderingHints.VALUE_ANTIALIAS_OFF\n            : RenderingHints.VALUE_ANTIALIAS_ON);\n    g.setStroke(new BasicStroke(config.thinOutline() ? 1 : 2));\n\n    for (int[] tile_data : MiasmaTilesData.TILES) {\n      int x \u003d tile_data[0] + 16;\n      int y \u003d tile_data[1] + 32;\n      int color \u003d tile_data[2];\n      \n      if (color \u003d\u003d MiasmaTilesData.BURN \u0026\u0026 config.showBurnTiles()) {\n        draw_tile(g, x, y, config.burnTileColor());\n      } else if (color \u003d\u003d MiasmaTilesData.OLM \u0026\u0026 config.showOlmTiles()) {\n        draw_tile(g, x, y, config.olmTileColor());\n      }\n    }\n\n    return null;\n  }\n\n  private void draw_tile(Graphics2D g, int x, int y, Color c) {\n    g.setColor(c);\n    // West\n    line(g, x, y, x, y + 1);\n    // East\n    line(g, x + 1, y, x + 1, y + 1);\n    // South\n    line(g, x, y, x + 1, y);\n    // North\n    line(g, x, y + 1, x + 1, y + 1);\n  }\n\n  private void line(Graphics g, int x0, int y0, int x1, int y1) {\n    if (x0 \u003c 0 || y0 \u003c 0 || x1 \u003c 0 || y1 \u003c 0)\n      return;\n\n    if (x0 \u003e\u003d 104 || y0 \u003e\u003d 104 || x1 \u003e\u003d 104 || y1 \u003e\u003d 104)\n      return;\n\n    int p \u003d client.getPlane();\n    int[][][] h \u003d client.getTileHeights();\n\n    Point p0 \u003d Perspective.localToCanvas(client, x0 \u003c\u003c 7, y0 \u003c\u003c 7,\n        h[p][x0][y0]);\n    Point p1 \u003d Perspective.localToCanvas(client, x1 \u003c\u003c 7, y1 \u003c\u003c 7,\n        h[p][x1][y1]);\n\n    if (p0 !\u003d null \u0026\u0026 p1 !\u003d null)\n      g.drawLine(p0.getX(), p0.getY(), p1.getX(), p1.getY());\n  }\n\n}\n","filePath":"src\\main\\java\\de0\\miasmatiles\\MiasmaTilesOverlay.java"},{"fileName":"MiasmaTilesPlugin.java","content":"package de0.miasmatiles;\n\nimport javax.inject.Inject;\n\nimport com.google.inject.Provides;\n\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\n@PluginDescriptor(name \u003d \"Miasma Tiles\", description \u003d \"Displays burn tiles for use in Olm masses\")\npublic class MiasmaTilesPlugin extends Plugin {\n\n  @Inject\n  private OverlayManager overlayManager;\n\n  @Inject\n  private MiasmaTilesOverlay overlay;\n\n  @Provides\n  MiasmaTilesConfig provideConfig(ConfigManager configManager) {\n    return configManager.getConfig(MiasmaTilesConfig.class);\n  }\n\n  @Override\n  protected void startUp() throws Exception {\n    overlayManager.add(overlay);\n  }\n\n  @Override\n  protected void shutDown() throws Exception {\n    overlayManager.remove(overlay);\n  }\n\n}\n","filePath":"src\\main\\java\\de0\\miasmatiles\\MiasmaTilesPlugin.java"},{"fileName":"MiasmaTilesPluginTest.java","content":"package de0;\n\nimport de0.miasmatiles.MiasmaTilesPlugin;\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class MiasmaTilesPluginTest {\n\n  @SuppressWarnings(\"unchecked\")\n  public static void main(String[] args) throws Exception {\n    ExternalPluginManager.loadBuiltin(MiasmaTilesPlugin.class);\n    RuneLite.main(args);\n  }\n\n}\n","filePath":"src\\test\\java\\de0\\MiasmaTilesPluginTest.java"}]},{"commit":"73fcabe49ebbd5181416be6ea017d74a0d80d7e8","repository":"https://github.com/PolishToaster/patch-payment.git","internalName":"patch-payment","files":[{"fileName":"PatchPaymentConfig.java","content":"package com.patchpayment;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n\n@ConfigGroup(PatchPaymentPlugin.CONFIG_GROUP)\npublic interface PatchPaymentConfig extends Config {\n\t@ConfigItem(\n\t\t\tkeyName \u003d PatchPaymentPlugin.CHECK_EXAMINE,\n\t\t\tname \u003d \"Check Payment With Examine\",\n\t\t\tdescription \u003d \"Examine an item to see what the payment is and remove the \u0027Check\u0027 menu option.\",\n\t\t\tposition \u003d 1\n\t)\n\tdefault boolean checkWithExamine() { return false; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d PatchPaymentPlugin.CHECK_BANK,\n\t\t\tname \u003d \"Enable Check in Bank\",\n\t\t\tdescription \u003d \"Enables the ability to check payments while in the bank interface.\",\n\t\t\tposition \u003d 2\n\t)\n\tdefault boolean checkInBank() { return false; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d PatchPaymentPlugin.CHECK_VAULT,\n\t\t\tname \u003d \"Enable Check in Seed Vault\",\n\t\t\tdescription \u003d \"Enables the ability to check payments while in the seed vault interface.\",\n\t\t\tposition \u003d 3\n\t)\n\tdefault boolean checkInVault() { return false; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d PatchPaymentPlugin.CHECK_BOX,\n\t\t\tname \u003d \"Enable Check in Seed Box\",\n\t\t\tdescription \u003d \"Enables the ability to check payments while in the seed box interface.\",\n\t\t\tposition \u003d 4\n\t)\n\tdefault boolean checkInBox() { return false; }\n}\n","filePath":"src\\main\\java\\com\\patchpayment\\PatchPaymentConfig.java"},{"fileName":"PatchPaymentPlugin.java","content":"package com.patchpayment;\n\nimport com.google.common.collect.ImmutableMap;\nimport com.google.common.collect.Sets;\nimport com.google.inject.Provides;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.MenuEntryAdded;\nimport net.runelite.api.events.MenuOptionClicked;\nimport net.runelite.api.gameval.InterfaceID;\nimport net.runelite.client.chat.ChatColorType;\nimport net.runelite.client.chat.ChatMessageBuilder;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.chat.QueuedMessage;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\n\nimport javax.annotation.Nullable;\nimport javax.inject.Inject;\nimport java.util.Map;\nimport java.util.Set;\n\nimport static net.runelite.api.gameval.ItemID.*;\n\n@PluginDescriptor(\n        name \u003d \"Patch Payment\",\n        description \u003d \"Creates a menu item to check a seed\u0027s required payment.\",\n        tags \u003d {\"farming\", \"payment\"}\n)\n@Slf4j\npublic class PatchPaymentPlugin extends Plugin {\n    static final String CONFIG_GROUP \u003d \"patchpayment\";\n    static final String CHECK_EXAMINE \u003d \"examinetext\";\n    static final String CHECK_BANK \u003d \"bankmenuitem\";\n    static final String CHECK_VAULT \u003d \"seedvaultitem\";\n    static final String CHECK_BOX \u003d \"seedboxitem\";\n    private static final String CHECK_PAYMENT \u003d \"Check\";\n    private static final String EXAMINE \u003d \"Examine\";\n\n    private static final Map\u003cInteger, PairInterface\u003e payments;\n\n    private final Set\u003cInteger\u003e acceptedWidgetIds \u003d Sets.newHashSet();\n\n    private static void add(ImmutableMap.Builder\u003cInteger, PairInterface\u003e builder, PairInterface response)\n    {\n        for(int id : response.getTargetItems())\n        {\n            builder.put(id, response);\n        }\n    }\n\n    static {\n        ImmutableMap.Builder\u003cInteger, PairInterface\u003e builder \u003d new ImmutableMap.Builder\u003c\u003e();\n\n        add(builder, new PaymentPair(\"2 buckets of compost\", new int[] {POTATO_SEED}));\n        add(builder, new PaymentPair(\"1 full sack of potatoes\", new int[] {ONION_SEED}));\n        add(builder, new PaymentPair(\"1 full sack of onions\", new int[] {CABBAGE_SEED}));\n        add(builder, new PaymentPair(\"2 full sacks of cabbages\", new int[] {TOMATO_SEED}));\n        add(builder, new PaymentPair(\"10 jute fibres\", new int[] {SWEETCORN_SEED}));\n        add(builder, new PaymentPair(\"1 full basket of apples\", new int[] {STRAWBERRY_SEED}));\n        add(builder, new PaymentPair(\"10 curry leaves\", new int[] {WATERMELON_SEED}));\n        add(builder, new PaymentPair(\"5 jangerberries\", new int[] {SNAPE_GRASS_SEED}));\n        // FLOWER SEEDS\n        add(builder, new CustomPair(new int[] {MARIGOLD_SEED, ROSEMARY_SEED, NASTURTIUM_SEED, WOAD_SEED, LIMPWURT_SEED, WHITE_LILY_SEED}));\n        // HERB PAIRS\n        add(builder, new CustomPair(new int[] {GUAM_SEED, MARRENTILL_SEED, TARROMIN_SEED, HARRALANDER_SEED, VILLAGE_RARE_TUBER, RANARR_SEED, TOADFLAX_SEED, IRIT_SEED, AVANTOE_SEED, KWUARM_SEED, SNAPDRAGON_SEED, HUASCA_SEED, CADANTINE_SEED, LANTADYME_SEED, DWARF_WEED_SEED, TORSTOL_SEED}));\n        // HOPS PAIRS\n        add(builder, new PaymentPair(\"3 buckets of compost\", new int[] {BARLEY_SEED}));\n        add(builder, new PaymentPair(\"1 marigold\", new int[] {HAMMERSTONE_HOP_SEED}, \"hammerstone hops\"));\n        add(builder, new PaymentPair(\"1 full sack of onions\", new int[] {ASGARNIAN_HOP_SEED}, \"asgarnian hops\"));\n        add(builder, new PaymentPair(\"6 barley malts\", new int[] {JUTE_SEED}));\n        add(builder, new PaymentPair(\"1 full basket of tomatoes\", new int[] {YANILLIAN_HOP_SEED}, \"yanillian hops\"));\n        add(builder, new PaymentPair(\"6 grain\", new int[] {FLAX_SEED}));\n        add(builder, new PaymentPair(\"3 full sacks of cabbages\", new int[] {KRANDORIAN_HOP_SEED}, \"krandorian hops\"));\n        add(builder, new PaymentPair(\"1 nasturtium\", new int[] {WILDBLOOD_HOP_SEED}));\n        add(builder, new PaymentPair(\"6 flax\", new int[] {HEMP_SEED}));\n        add(builder, new PaymentPair(\"6 hemp\", new int[] {COTTON_SEED}, \"cotton boll\"));\n        // BUSH PAIRS\n        add(builder, new PaymentPair(\"4 full sacks of cabbages\", new int[] {REDBERRY_BUSH_SEED}));\n        add(builder, new PaymentPair(\"3 full baskets of tomatoes\", new int[] {CADAVABERRY_BUSH_SEED}));\n        add(builder, new PaymentPair(\"3 full baskets of strawberries\", new int[] {DWELLBERRY_BUSH_SEED}));\n        add(builder, new PaymentPair(\"6 watermelons\", new int[] {JANGERBERRY_BUSH_SEED}));\n        add(builder, new PaymentPair(\"8 bittercap mushrooms\", new int[] {WHITEBERRY_BUSH_SEED}));\n        add(builder, new CustomPair(\"as it will never get diseased\", new int[] {POISONIVY_BUSH_SEED}));\n        // TREE PAIRS\n        add(builder, new PaymentPair(\"1 full basket of tomatoes\", new int[] {ACORN, PLANTPOT_ACORN, PLANTPOT_OAK_SAPLING, PLANTPOT_ACORN_WATERED}, \"oak tree\"));\n        add(builder, new PaymentPair(\"1 full basket of apples\", new int[] {WILLOW_SEED, PLANTPOT_WILLOW_SEED, PLANTPOT_WILLOW_SAPLING, PLANTPOT_WILLOW_SEED_WATERED}, \"willow tree\"));\n        add(builder, new PaymentPair(\"1 full basket of oranges\", new int[] {MAPLE_SEED, PLANTPOT_MAPLE_SEED, PLANTPOT_MAPLE_SAPLING, PLANTPOT_MAPLE_SEED_WATERED}, \"maple tree\"));\n        add(builder, new PaymentPair(\"10 cactus spines\", new int[] {YEW_SEED, PLANTPOT_YEW_SEED, PLANTPOT_YEW_SAPLING, PLANTPOT_YEW_SEED_WATERED}, \"yew tree\"));\n        add(builder, new PaymentPair(\"25 coconuts\", new int[] {MAGIC_TREE_SEED, PLANTPOT_MAGIC_TREE_SEED, PLANTPOT_MAGIC_TREE_SAPLING, PLANTPOT_MAGIC_TREE_SEED_WATERED}, \"magic tree\"));\n        // FRUIT TREE PAIRS\n        add(builder, new PaymentPair(\"9 sweetcorn\", new int[] {APPLE_TREE_SEED, PLANTPOT_APPLE_SEED, PLANTPOT_APPLE_SAPLING, PLANTPOT_APPLE_SEED_WATERED}, \"apple tree\"));\n        add(builder, new PaymentPair(\"4 full baskets of apples\", new int[] {BANANA_TREE_SEED, PLANTPOT_BANANA_SEED, PLANTPOT_BANANA_SAPLING, PLANTPOT_BANANA_SEED_WATERED}, \"banana tree\"));\n        add(builder, new PaymentPair(\"3 full baskets of strawberries\", new int[] {ORANGE_TREE_SEED, PLANTPOT_ORANGE_SEED, PLANTPOT_ORANGE_SAPLING, PLANTPOT_ORANGE_SEED_WATERED}, \"orange tree\"));\n        add(builder, new PaymentPair(\"5 full baskets of bananas\", new int[] {CURRY_TREE_SEED, PLANTPOT_CURRY_SEED, PLANTPOT_CURRY_SAPLING, PLANTPOT_CURRY_SEED_WATERED}, \"curry tree\"));\n        add(builder, new PaymentPair(\"10 watermelons\", new int[] {PINEAPPLE_TREE_SEED, PLANTPOT_PINEAPPLE_SEED, PLANTPOT_PINEAPPLE_SAPLING, PLANTPOT_PINEAPPLE_SEED_WATERED}));\n        add(builder, new PaymentPair(\"10 pineapples\", new int[] {PAPAYA_TREE_SEED, PLANTPOT_PAPAYA_SEED, PLANTPOT_PAPAYA_SAPLING, PLANTPOT_PAPAYA_SEED_WATERED}, \"papaya tree\"));\n        add(builder, new PaymentPair(\"15 papaya fruit\", new int[] {PALM_TREE_SEED, PLANTPOT_PALM_SEED, PLANTPOT_PALM_SAPLING, PLANTPOT_PALM_SEED_WATERED}, \"palm tree\"));\n        add(builder, new PaymentPair(\"15 coconuts\", new int[] {DRAGONFRUIT_TREE_SEED, PLANTPOT_DRAGONFRUIT_SEED, PLANTPOT_DRAGONFRUIT_SAPLING, PLANTPOT_DRAGONFRUIT_SEED_WATERED}, \"dragonfruit tree\"));\n        // SPECIAL PAIRS\n        add(builder, new PaymentPair(\"200 numulite\", new int[] {SEAWEED_SEED}));\n        add(builder, new CustomPair(\"as it is protected for free. That doesn\u0027t make sense but I\u0027m too lazy to change it\", new int[] {GRAPE_SEED}));\n        add(builder, new CustomPair(new int[] {MUSHROOM_SEED, BELLADONNA_SEED}));\n        add(builder, new CustomPair(\"as it is immune to disease\", new int[] {HESPORI_SEED}));\n        // CORAL PAIRS\n        add(builder, new PaymentPair(\"5 giant seaweed\", new int[] {CORAL_ELKHORN_FRAG}, \"elkhorn coral\"));\n        add(builder, new PaymentPair(\"5 elkhorn coral\", new int[] {CORAL_PILLAR_FRAG}, \"pillar coral\"));\n        add(builder, new PaymentPair(\"5 pillar coral\", new int[] {CORAL_UMBRAL_FRAG}, \"umbral coral\"));\n        // ANIMA PAIRS\n        add(builder, new CustomPair(new int[] {KRONOS_SEED, IASOR_SEED, ATTAS_SEED}));\n        // SPECIAL TREE PAIRS\n        add(builder, new PaymentPair(\"15 limpwurt roots\", new int[] {TEAK_SEED, PLANTPOT_TEAK_SEED, PLANTPOT_TEAK_SAPLING, PLANTPOT_TEAK_SEED_WATERED}, \"teak tree\"));\n        add(builder, new PaymentPair(\"25 yanillian hops\", new int[] {MAHOGANY_SEED, PLANTPOT_MAHOGANY_SEED, PLANTPOT_MAHOGANY_SAPLING, PLANTPOT_MAHOGANY_SEED_WATERED}, \"mahogany tree\"));\n        add(builder, new PaymentPair(\"8 poison ivy berries\", new int[] {CALQUAT_TREE_SEED, PLANTPOT_CALQUAT_SEED, PLANTPOT_CALQUAT_SAPLING, PLANTPOT_CALQUAT_SEED_WATERED}, \"calquat tree\"));\n        add(builder, new CustomPair(\"as it is immune to disease\", new int[] {CRYSTAL_TREE_SEED, PLANTPOT_CRYSTAL_TREE_SEED, PLANTPOT_CRYSTAL_TREE_SAPLING, PLANTPOT_CRYSTAL_TREE_SEED_WATERED}));\n        add(builder, new PaymentPair(\"5 monkey nuts, 1 monkey bar, and 1 ground tooth\", new int[] {SPIRIT_TREE_SEED, PLANTPOT_SPIRIT_TREE_SEED, PLANTPOT_SPIRIT_TREE_SAPLING, PLANTPOT_SPIRIT_TREE_SEED_WATERED}, \"spirit tree\"));\n        add(builder, new PaymentPair(\"8 potato cacti\", new int[] {CELASTRUS_TREE_SEED, PLANTPOT_CELASTRUS_TREE_SEED, PLANTPOT_CELASTRUS_TREE_SAPLING, PLANTPOT_CELASTRUS_TREE_SEED_WATERED}, \"celastrus tree\"));\n        add(builder, new PaymentPair(\"6 dragonfruit\", new int[] {REDWOOD_TREE_SEED, PLANTPOT_REDWOOD_TREE_SEED, PLANTPOT_REDWOOD_TREE_SAPLING, PLANTPOT_REDWOOD_TREE_SEED_WATERED}, \"redwood tree\"));\n        add(builder, new PaymentPair(\"10 white berries\", new int[] {CAMPHOR_SEED, PLANTPOT_CAMPHOR_SEED, PLANTPOT_CAMPHOR_SAPLING, PLANTPOT_CAMPHOR_SEED_WATERED}, \"camphor tree\"));\n        add(builder, new PaymentPair(\"10 curry leaves\", new int[] {IRONWOOD_SEED, PLANTPOT_IRONWOOD_SEED, PLANTPOT_IRONWOOD_SAPLING, PLANTPOT_IRONWOOD_SEED_WATERED}, \"ironwood tree\"));\n        add(builder, new PaymentPair(\"8 dragonfruit\", new int[] {ROSEWOOD_SEED, PLANTPOT_ROSEWOOD_SEED, PLANTPOT_ROSEWOOD_SAPLING, PLANTPOT_ROSEWOOD_SEED_WATERED}, \"rosewood tree\"));\n        // CACTI PAIRS\n        add(builder, new PaymentPair(\"6 cadava berries\", new int[] {CACTUS_SEED}));\n        add(builder, new PaymentPair(\"8 snape grass\", new int[] {POTATO_CACTUS_SEED}));\n\n        payments \u003d builder.build();\n    }\n\n    @Inject\n    @Nullable\n    private Client client;\n\n    @Inject\n    private ChatMessageManager chatMessageManager;\n    @Inject\n    private PatchPaymentConfig config;\n\n    @Provides\n    PatchPaymentConfig getConfig(ConfigManager configManager) {\n        return configManager.getConfig(PatchPaymentConfig.class);\n    }\n\n    @Override\n    protected void startUp(){\n        updateConfig();\n    }\n\n    @Override\n    protected void shutDown()\n    {\n\n    }\n\n    @Subscribe\n    public void onConfigChanged(ConfigChanged event)\n    {\n        if(!event.getGroup().equals(CONFIG_GROUP)) return;\n        updateConfig();\n    }\n\n    private void updateConfig()\n    {\n        acceptedWidgetIds.clear();\n        acceptedWidgetIds.add(InterfaceID.Inventory.ITEMS);\n\n        if(config.checkInVault())\n        {\n            acceptedWidgetIds.add(InterfaceID.SeedVault.OBJ_LIST);\n            acceptedWidgetIds.add(InterfaceID.SeedVaultDeposit.INV);\n        }\n\n        if(config.checkInBank())\n        {\n            acceptedWidgetIds.add(InterfaceID.Bankmain.ITEMS);\n            acceptedWidgetIds.add(InterfaceID.Bankside.ITEMS);\n        }\n\n        if(config.checkInBox())\n        {\n            acceptedWidgetIds.add(InterfaceID.HosidiusSeedbox.SEED_LAYER);\n        }\n    }\n\n    private void displayGameMessage(PairInterface pi, ItemComposition ic)\n    {\n        chatMessageManager.queue(QueuedMessage.builder()\n                        .type(ChatMessageType.CONSOLE)\n                        .runeLiteFormattedMessage(pi.getMessage(ic))\n                        .build());\n    }\n\n    @Subscribe\n    public void onMenuOptionClicked(MenuOptionClicked event)\n    {\n        if (event.getWidget() !\u003d null\n                \u0026\u0026 config.checkWithExamine()\n                \u0026\u0026 event.getMenuOption().equals(EXAMINE))\n        {\n            final int widgetId \u003d event.getWidget().getId();\n\n            if(!acceptedWidgetIds.contains(widgetId)) return;\n\n            assert client !\u003d null;\n            ItemComposition composition \u003d client.getItemDefinition(event.getWidget().getItemId());\n            int itemId \u003d composition.getId();\n\n            if(payments.containsKey(itemId))\n                displayGameMessage(payments.get(itemId), composition);\n\n        }\n    }\n\n    @Subscribe\n    public void onMenuEntryAdded(MenuEntryAdded event)\n    {\n        if (event.getMenuEntry().getWidget() !\u003d null\n                \u0026\u0026 !config.checkWithExamine()\n                \u0026\u0026 event.getOption().equals(EXAMINE))\n        {\n            if (!acceptedWidgetIds.contains(event.getMenuEntry().getWidget().getId()))\n                return;\n\n            int itemId \u003d event.getMenuEntry().getWidget().getItemId();\n\n            if (payments.containsKey(itemId))\n            {\n                assert client !\u003d null;\n                ItemComposition ic \u003d client.getItemDefinition(itemId);\n\n                client.getMenu().createMenuEntry(-1)\n                        .setOption(CHECK_PAYMENT)\n                        .setTarget(event.getTarget())\n                        .setType(MenuAction.RUNELITE)\n                        .onClick(e -\u003e\n                        {\n                            displayGameMessage(payments.get(itemId), ic);\n                        });\n            }\n\n        }\n    }\n\n    public interface PairInterface {\n\n        int[] getTargetItems();\n\n        String getMessage(ItemComposition ic);\n    }\n\n    static class PaymentPair implements PairInterface {\n        String payment;\n        int[] pairedIDs;\n        String preferredName \u003d null;\n\n        public PaymentPair(String payment, int[] pairedIDs) {\n            this.payment \u003d payment;\n            this.pairedIDs \u003d pairedIDs;\n        }\n\n        public PaymentPair(String payment, int[] pairedIDs, String preferredName) {\n            this(payment, pairedIDs);\n            this.preferredName \u003d preferredName;\n        }\n\n        @Override\n        public int[] getTargetItems()\n        {\n            return this.pairedIDs;\n        }\n\n        public String getMessage(ItemComposition ic) {\n            String text \u003d ic.getName();\n            if (getPreferredName() !\u003d null)\n                text \u003d getPreferredName();\n            return new ChatMessageBuilder()\n                    .append(ChatColorType.NORMAL)\n                    .append(\"A farmer will watch over \")\n                    .append(grammatify(text))\n                    .append(\" \")\n                    .append(ChatColorType.HIGHLIGHT)\n                    .append(stripAndShrink(text))\n                    .append(ChatColorType.NORMAL)\n                    .append(\" patch for \")\n                    .append(ChatColorType.HIGHLIGHT)\n                    .append(this.payment)\n                    .build();\n        }\n\n        public String getPreferredName() {\n            return preferredName;\n        }\n    }\n\n    private static class CustomPair implements PairInterface {\n\n        String message \u003d \"\";\n        int[] pairedIDs;\n        String preferredName \u003d null;\n\n        public CustomPair(int[] pairedIDs) {\n            this.pairedIDs \u003d pairedIDs;\n        }\n\n        public CustomPair(String message, int[] pairedIDs) {\n            this.message \u003d \" \" + message;\n            this.pairedIDs \u003d pairedIDs;\n        }\n\n        @Override\n        public int[] getTargetItems()\n        {\n            return this.pairedIDs;\n        }\n\n        public String getMessage(ItemComposition ic) {\n            String text \u003d ic.getName();\n            if (getPreferredName() !\u003d null)\n                text \u003d getPreferredName();\n            return new ChatMessageBuilder()\n                    .append(ChatColorType.NORMAL)\n                    .append(grammatify(text).replace(\u0027a\u0027, \u0027A\u0027))\n                    .append(\" \")\n                    .append(ChatColorType.HIGHLIGHT)\n                    .append(stripAndShrink(text))\n                    .append(ChatColorType.NORMAL)\n                    .append(\" patch can \")\n                    .append(ChatColorType.HIGHLIGHT)\n                    .append(\"NOT\")\n                    .append(ChatColorType.NORMAL)\n                    .append(\" be protected by a farmer\")\n                    .append(this.message)\n                    .build();\n        }\n\n        public String getPreferredName() {\n            return preferredName;\n        }\n    }\n\n    private static String stripAndShrink(String text) {\n        return text\n                .replace(\"seed\", \"\")\n                .replace(\"sapling\", \"\")\n                .replace(\"spore\", \"\")\n                .toLowerCase().trim();\n    }\n\n    private static String grammatify(String text) {\n        char[] vowels \u003d {\u0027a\u0027, \u0027e\u0027, \u0027i\u0027, \u0027o\u0027, \u0027u\u0027};\n        for (char vowel : vowels)\n            if (text.toLowerCase().charAt(0) \u003d\u003d vowel)\n                return \"an\";\n        return \"a\";\n    }\n}\n","filePath":"src\\main\\java\\com\\patchpayment\\PatchPaymentPlugin.java"},{"fileName":"PatchPaymentPluginTest.java","content":"package com.patchpayment;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class PatchPaymentPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(PatchPaymentPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\patchpayment\\PatchPaymentPluginTest.java"}]},{"commit":"9ccd0b9ed77bb42cce0bccb8a0e9eb186d352603","repository":"https://github.com/WLoumakis/tob-qol.git","internalName":"tob-qol-improvements","files":[{"fileName":"RemindersOverlay.java","content":"package com.tobqolimprovements;\n\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\nimport net.runelite.client.ui.overlay.OverlayUtil;\n\nimport javax.inject.Inject;\nimport java.awt.*;\n\npublic class RemindersOverlay extends Overlay {\n    private final ToBQoLImprovementsConfig config;\n    private final ToBQoLImprovementsPlugin plugin;\n\n    @Inject\n    private RemindersOverlay(ToBQoLImprovementsConfig config, ToBQoLImprovementsPlugin plugin)\n    {\n        this.config \u003d config;\n        this.plugin \u003d plugin;\n        setPosition(OverlayPosition.DYNAMIC);\n        setPriority(OverlayPriority.HIGH);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        if (config.lootReminder() \u0026\u0026 plugin.isInVerSinhaza() \u0026\u0026 plugin.getLootChest() !\u003d null \u0026\u0026 plugin.isChestHasLoot())\n        {\n            Shape poly \u003d plugin.getLootChest().getConvexHull();\n            if (poly !\u003d null)\n            {\n                OverlayUtil.renderPolygon(graphics, poly, Color.RED);\n            }\n        }\n        return null;\n    }\n}\n","filePath":"src\\main\\java\\com\\tobqolimprovements\\RemindersOverlay.java"},{"fileName":"TobChestBuyMode.java","content":"/*\n * Copyright (c) 2022, OsrsCommits \u003c107307382+osrscommits@users.noreply.github.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.tobqolimprovements;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum TobChestBuyMode\n{\n    OFF(\"value\"),\n    BUY_1(\"buy-1\"),\n    BUY_ALL(\"buy-all\"),\n    BUY_X(\"buy-x\");\n\n    private final String name;\n\n    @Override\n    public String toString()\n    {\n        return name;\n    }\n}","filePath":"src\\main\\java\\com\\tobqolimprovements\\TobChestBuyMode.java"},{"fileName":"ToBQoLImprovementsConfig.java","content":"package com.tobqolimprovements;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"ToB QoL Improvements\")\npublic interface ToBQoLImprovementsConfig extends Config\n{\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"tobSupplyChestBuy\",\n\t\t\tname \u003d \"ToB Supply Chest Buy Options\",\n\t\t\tdescription \u003d \"Swaps the Buy options with Value on items in shops.\"\n\t)\n\tdefault TobChestBuyMode tobSupplyChestBuy()\n\t{\n\t\treturn TobChestBuyMode.BUY_1;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"tobLootReminder\",\n\t\t\tname \u003d \"Loot Reminder\",\n\t\t\tdescription \u003d \"Outline and place an arrow over unclaimed loot outside the theatre.\"\n\t)\n\tdefault boolean lootReminder()\n\t{\n\t\treturn true;\n\t};\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"tobLootChestBankAll\",\n\t\t\tname \u003d \"Bank All at Loot Chest\",\n\t\t\tdescription \u003d \"Get rid of the pesky right-click menu when banking by just left-clicking\"\n\t)\n\tdefault boolean lootChestBankAll() { return true; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"muteVerzikP2AreaSounds\",\n\t\t\tname \u003d \"Mute verzik P2 Area sounds\",\n\t\t\tdescription \u003d \"Change verzik back to old P2 sounds\"\n\t)\n\tdefault boolean muteVerzikP2AreaSounds() {\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\com\\tobqolimprovements\\ToBQoLImprovementsConfig.java"},{"fileName":"ToBQoLImprovementsPlugin.java","content":"package com.tobqolimprovements;\n\nimport com.google.common.collect.ArrayListMultimap;\nimport com.google.common.collect.ImmutableSet;\nimport com.google.inject.Provides;\n\nimport javax.annotation.Nullable;\nimport javax.inject.Inject;\n\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.*;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.Text;\n\nimport java.util.List;\nimport java.util.Locale;\nimport java.util.Objects;\nimport java.util.Set;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"ToB QoL Improvements\",\n\t\tdescription \u003d \"Minor QoL improvements to the Theatre of Blood\",\n\t\ttags \u003d {\"tob\", \"theatre\", \"theater\", \"raids2\"},\n\t\tenabledByDefault \u003d false\n)\npublic class ToBQoLImprovementsPlugin extends Plugin\n{\n\tprivate static final Set\u003cString\u003e TOB_CHEST_TARGETS \u003d ImmutableSet.of(\n\t\t\t\"stamina potion(4)\",\n\t\t\t\"prayer potion(4)\",\n\t\t\t\"saradomin brew(4)\",\n\t\t\t\"super restore(4)\",\n\t\t\t\"mushroom potato\",\n\t\t\t\"shark\",\n\t\t\t\"sea turtle\",\n\t\t\t\"manta ray\"\n\t);\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ToBQoLImprovementsConfig config;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t// Multimap for swapping value with buy-1\n\tprivate final ArrayListMultimap\u003cString, Integer\u003e optionIndexes \u003d ArrayListMultimap.create();\n\n\t@Getter\n\tprivate GameObject lootChest;\n\n\t@Getter\n\tboolean chestHasLoot \u003d false;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate RemindersOverlay overlay;\n\n\t@Provides\n\tToBQoLImprovementsConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(ToBQoLImprovementsConfig.class);\n\t}\n\n\t@Override\n\tpublic void startUp()\n\t{\n\t\toverlayManager.add(overlay);\n\t}\n\n\t@Override\n\tpublic void shutDown()\n\t{\n\t\tlootChest \u003d null;\n\t\tchestHasLoot \u003d false;\n\t\toverlayManager.remove(overlay);\n\t}\n\n\t@Subscribe\n\tpublic void onClientTick(ClientTick clientTick)\n\t{\n\t\t// The menu is not rebuilt when it is open, so don\u0027t swap or else it will\n\t\t// repeatedly swap entries\n\t\tif (client.getGameState() !\u003d GameState.LOGGED_IN || client.isMenuOpen())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tMenuEntry[] menuEntries \u003d client.getMenuEntries();\n\n\t\t// Build option map for quick lookup in findIndex\n\t\tint index \u003d 0;\n\t\toptionIndexes.clear();\n\t\tfor (MenuEntry entry : menuEntries)\n\t\t{\n\t\t\tString option \u003d Text.removeTags(entry.getOption()).toLowerCase();\n\t\t\toptionIndexes.put(option, index++);\n\t\t}\n\n\t\t// Perform swaps\n\t\tindex \u003d 0;\n\t\tfor (MenuEntry entry : menuEntries)\n\t\t{\n\t\t\tswapMenuEntry(index++, entry);\n\t\t}\n\n\t\t// Remove the force right-click menu\n\t\tif (config.lootChestBankAll() \u0026\u0026 client.getGameState() \u003d\u003d GameState.LOGGED_IN \u0026\u0026 !client.isMenuOpen() \u0026\u0026 isInVerSinhaza())\n\t\t{\n\t\t\tfor (MenuEntry entry : menuEntries)\n\t\t\t{\n\t\t\t\tif (entry.getOption().equals(\"Bank-all\"))\n\t\t\t\t{\n\t\t\t\t\tentry.setForceLeftClick(true);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tclient.setMenuEntries(menuEntries);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick gameTick)\n\t{\n\t\tif (isInVerSinhaza())\n\t\t{\n\t\t\t// Determine if chest has loot and draw an arrow overhead\n\t\t\tif (lootChest !\u003d null \u0026\u0026 Objects.requireNonNull(getObjectComposition(lootChest.getId())).getId() \u003d\u003d 41435 \u0026\u0026 !chestHasLoot)\n\t\t\t{\n\t\t\t\tchestHasLoot \u003d true;\n\t\t\t\tclient.setHintArrow(lootChest.getWorldLocation());\n\t\t\t}\n\n\t\t\t// Clear the arrow if the loot is taken\n\t\t\tif (lootChest !\u003d null \u0026\u0026 Objects.requireNonNull(getObjectComposition(lootChest.getId())).getId() \u003d\u003d 41436 \u0026\u0026 chestHasLoot)\n\t\t\t{\n\t\t\t\tchestHasLoot \u003d false;\n\t\t\t\tclient.clearHintArrow();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (lootChest !\u003d null)\n\t\t\t{\n\t\t\t\tlootChest \u003d null;\n\t\t\t}\n\t\t}\n\t}\n\n\t@Nullable\n\tprivate ObjectComposition getObjectComposition(int id)\n\t{\n\t\tObjectComposition objectComposition \u003d client.getObjectDefinition(id);\n\t\treturn objectComposition.getImpostorIds() \u003d\u003d null ? objectComposition : objectComposition.getImpostor();\n\t}\n\n\tprivate static final Set\u003cInteger\u003e VER_SINHAZA_REGIONS \u003d ImmutableSet.of(\n\t\t\t14386,\n\t\t\t14642\n\t);\n\n\tpublic boolean isInVerSinhaza()\n\t{\n\t\treturn VER_SINHAZA_REGIONS.contains(Objects.requireNonNull(client.getLocalPlayer()).getWorldLocation().getRegionID());\n\t}\n\n\t@Subscribe\n\tpublic void onGameObjectSpawned(GameObjectSpawned event)\n\t{\n\t\tif (event.getGameObject().getId() \u003d\u003d 41437)\n\t\t{\n\t\t\tlootChest \u003d event.getGameObject();\n\t\t}\n\t}\n\n\tprivate void swapMenuEntry(int index, MenuEntry menuEntry)\n\t{\n\t\tfinal String option \u003d Text.removeTags(menuEntry.getOption()).toLowerCase();\n\t\tfinal String target \u003d Text.removeTags(menuEntry.getTarget()).toLowerCase();\n\n\t\t// Swap the \"Value\" option with \"Buy-1\" for the given target if it\u0027s not off\n\t\tif (option.equals(\"value\") \u0026\u0026 !config.tobSupplyChestBuy().toString().equals(\"value\"))\n\t\t{\n\t\t\tif (TOB_CHEST_TARGETS.contains(target))\n\t\t\t{\n\t\t\t\tswap(option, target, index);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void swap(String option, String target, int index)\n\t{\n\t\tMenuEntry[] menuEntries \u003d client.getMenuEntries();\n\n\t\tint thisIndex \u003d findIndex(menuEntries, index, option, target);\n\t\tint optionIdx \u003d findIndex(menuEntries, thisIndex, config.tobSupplyChestBuy().toString(), target);\n\n\t\tif (thisIndex \u003e\u003d 0 \u0026\u0026 optionIdx \u003e\u003d 0)\n\t\t{\n\t\t\tswap(optionIndexes, menuEntries, optionIdx, thisIndex);\n\t\t}\n\t}\n\n\tprivate int findIndex(MenuEntry[] entries, int limit, String option, String target)\n\t{\n\t\tList\u003cInteger\u003e indexes \u003d optionIndexes.get(option);\n\n\t\t// We want the last index which matches the target, as that is what is top-most on the menu\n\t\tfor (int i \u003d indexes.size() - 1; i \u003e\u003d 0; i--)\n\t\t{\n\t\t\tint index \u003d indexes.get(i);\n\t\t\tMenuEntry entry \u003d entries[index];\n\t\t\tString entryTarget \u003d Text.removeTags(entry.getTarget()).toLowerCase();\n\n\t\t\t// Limit to the last index which is prior to the current entry\n\t\t\tif (index \u003c\u003d limit \u0026\u0026 entryTarget.equals(target))\n\t\t\t{\n\t\t\t\treturn index;\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t}\n\n\tprivate void swap(ArrayListMultimap\u003cString, Integer\u003e optionIndexes, MenuEntry[] entries, int index1, int index2)\n\t{\n\t\tMenuEntry entry \u003d entries[index1];\n\t\tentries[index1] \u003d entries[index2];\n\t\tentries[index2] \u003d entry;\n\n\t\tclient.setMenuEntries(entries);\n\n\t\t// Rebuild option indexes\n\t\toptionIndexes.clear();\n\t\tint idx \u003d 0;\n\t\tfor (MenuEntry menuEntry : entries)\n\t\t{\n\t\t\tString option \u003d Text.removeTags(menuEntry.getOption()).toLowerCase();\n\t\t\toptionIndexes.put(option, idx++);\n\t\t}\n\t}\n\n\n\tprivate static final int VERZIK_P2_AREA_SOUND_EFFECT_ID \u003d 3987;\n\t@Subscribe\n\tpublic void onAreaSoundEffectPlayed(AreaSoundEffectPlayed areaSoundEffectPlayed) {\n\t\tint soundId \u003d areaSoundEffectPlayed.getSoundId();\n\t\tif (config.muteVerzikP2AreaSounds() \u0026\u0026 soundId \u003d\u003d VERZIK_P2_AREA_SOUND_EFFECT_ID)\n\t\t{\n\t\t\tareaSoundEffectPlayed.consume();\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\tobqolimprovements\\ToBQoLImprovementsPlugin.java"},{"fileName":"TobQolImprovementsPluginTest.java","content":"package com.tobqolimprovements;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class TobQolImprovementsPluginTest\n{\n    public static void main(String[] args) throws Exception\n    {\n        ExternalPluginManager.loadBuiltin(ToBQoLImprovementsPlugin.class);\n        RuneLite.main(args);\n    }\n}\n","filePath":"src\\test\\java\\com.tobqolimprovements\\TobQolImprovementsPluginTest.java"}]},{"commit":"e3bb5cf36740c5a912e7ff06b4a3d442c0d29872","repository":"https://github.com/mad-s/easy-unnote.git","internalName":"easy-unnote","files":[{"fileName":"EasyUnnoteConfig.java","content":"package easyunnote;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"easyUnnote\")\npublic interface EasyUnnoteConfig extends Config\n{\n\t@ConfigItem(\n\t\tkeyName \u003d \"enableGEBooths\",\n\t\tname \u003d \"Enable GE Booths\",\n\t\tdescription \u003d \"Allow unnoting at GE Booths.\"\n\t)\n\tdefault boolean enableGEBooths()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"enableTables\",\n\t\tname \u003d \"Enable Tables\",\n\t\tdescription \u003d \"Allow placing banknotes on tables.\"\n\t)\n\tdefault boolean enableTables()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"customUnnoteList\",\n\t\tname \u003d \"Custom unnote list\",\n\t\tdescription \u003d \"List of extra NPCs/objects that notes can be used on.\"\n\t)\n\tdefault String customUnnoteList()\n\t{\n\t\treturn \"\";\n\t}\n}\n","filePath":"src\\main\\java\\easyunnote\\EasyUnnoteConfig.java"},{"fileName":"EasyUnnotePlugin.java","content":"package easyunnote;\n\nimport java.util.Arrays;\nimport java.util.HashSet;\nimport java.util.function.Predicate;\nimport java.util.stream.Collectors;\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.events.ClientTick;\nimport net.runelite.api.gameval.InterfaceID;\nimport net.runelite.api.GameObject;\nimport net.runelite.api.GameState;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.api.Menu;\nimport net.runelite.api.MenuEntry;\nimport net.runelite.api.NPC;\nimport net.runelite.api.NPCComposition;\nimport net.runelite.api.ObjectComposition;\nimport net.runelite.api.Scene;\nimport net.runelite.api.Tile;\nimport net.runelite.api.TileObject;\nimport net.runelite.api.WallObject;\nimport net.runelite.api.WorldView;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\n\n@Slf4j\n@PluginDescriptor(name \u003d \"Easy Unnote\")\npublic class EasyUnnotePlugin extends Plugin {\n\t// List of objects that act as a bank, but don\u0027t have a \"Bank\" option\n\tprivate static final String[] UNNOTE_OBJECTS \u003d {\n\t\t\t\"Bank chest\",\n\t\t\t\"Bank Chest-wreck\",\n\t};\n\n\t// List of NPC names that can unnote items, but don\u0027t have a \"Bank\" option\n\tprivate static final String[] UNNOTE_NPCS \u003d {\n\t\t\t\"Aisles\",\n\t\t\t\"Phials\",\n\t\t\t\"Piles\",\n\t\t\t\"Tiles\",\n\t\t\t\"Biles\",\n\t\t\t\"Banknote Exchange Merchant\",\n\t\t\t\"Elder Chaos druid\",\n\t\t\t\"Virilis\",\n\t\t\t// The following don\u0027t allow unnoting, but still have banknote interactions\n\t\t\t\"Wesley\",\n\t\t\t\"Zahur\",\n\t\t\t\"Friendly Forester\",\n\n\t\t\t\"Rick\",\n\t\t\t\"Maid\",\n\t\t\t\"Cook\",\n\t\t\t\"Butler\",\n\t\t\t\"Demon butler\",\n\t};\n\n\tprivate static final String[] BANKNOTE_LIKE \u003d {\n\t\t\t\"Looting bag note\",\n\t\t\t\"Rune pouch note\",\n\t};\n\n\tprivate HashSet\u003cString\u003e customUnnotelist;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate EasyUnnoteConfig config;\n\n\t@Provides\n\tEasyUnnoteConfig provideConfig(ConfigManager configManager) {\n\t\treturn configManager.getConfig(EasyUnnoteConfig.class);\n\t}\n\n\tvoid updateCustomUnnoteList() {\n\t\tcustomUnnotelist \u003d Arrays.stream(config.customUnnoteList().split(\"[,\\\\n]\"))\n\t\t\t\t.filter(Predicate.not(String::isBlank))\n\t\t\t\t.map(String::toLowerCase)\n\t\t\t\t.collect(Collectors.toCollection(HashSet::new));\n\t}\n\n\t@Override\n\tprotected void startUp() {\n\t\tupdateCustomUnnoteList();\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged configChanged) {\n\t\tif (\"customUnnoteList\".equals(configChanged.getKey())) {\n\t\t\tupdateCustomUnnoteList();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onClientTick(ClientTick clientTick) {\n\t\t// The menu is not rebuilt when it is open, so don\u0027t swap or else it will\n\t\t// repeatedly swap entries\n\t\tif (client.getGameState() !\u003d GameState.LOGGED_IN || client.isMenuOpen()) {\n\t\t\treturn;\n\t\t}\n\n\t\tfinal Widget selectedWidget \u003d client.getSelectedWidget();\n\t\tif (selectedWidget \u003d\u003d null) {\n\t\t\treturn;\n\t\t}\n\t\tif (selectedWidget.getId() !\u003d InterfaceID.Inventory.ITEMS) {\n\t\t\treturn;\n\t\t}\n\n\t\tfinal int itemId \u003d selectedWidget.getItemId();\n\t\tif (itemId \u003c\u003d 0 || !client.isWidgetSelected()) {\n\t\t\treturn;\n\t\t}\n\n\t\tfinal ItemComposition itemComposition \u003d client.getItemDefinition(itemId);\n\t\tif (!canUnnote(itemComposition)) {\n\t\t\treturn;\n\t\t}\n\n\t\tMenu menu \u003d client.getMenu();\n\t\tMenuEntry[] menuEntries \u003d menu.getMenuEntries();\n\t\tMenuEntry[] newEntries \u003d Arrays.stream(menuEntries)\n\t\t\t\t.filter(e -\u003e {\n\t\t\t\t\tswitch (e.getType()) {\n\t\t\t\t\t\tcase WIDGET_TARGET_ON_GROUND_ITEM:\n\t\t\t\t\t\tcase WIDGET_TARGET_ON_PLAYER:\n\t\t\t\t\t\tcase EXAMINE_NPC:\n\t\t\t\t\t\tcase EXAMINE_OBJECT:\n\t\t\t\t\t\tcase EXAMINE_ITEM_GROUND:\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\tcase WIDGET_TARGET_ON_GAME_OBJECT:\n\t\t\t\t\t\t\tfinal TileObject gameObject \u003d findObject(e.getParam0(), e.getParam1(), e.getIdentifier());\n\t\t\t\t\t\t\tif (gameObject \u003d\u003d null) {\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfinal ObjectComposition composition \u003d client.getObjectDefinition(gameObject.getId());\n\t\t\t\t\t\t\treturn canUnnote(composition);\n\t\t\t\t\t\tcase WIDGET_TARGET_ON_NPC:\n\t\t\t\t\t\t\tfinal NPC npc \u003d e.getNpc();\n\t\t\t\t\t\t\treturn npc !\u003d null \u0026\u0026 canUnnote(npc.getTransformedComposition());\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.toArray(MenuEntry[]::new);\n\n\t\tmenu.setMenuEntries(newEntries);\n\t}\n\n\tprivate TileObject findObject(int x, int y, int id) {\n\t\tWorldView view \u003d client.getTopLevelWorldView();\n\t\tScene scene \u003d view.getScene();\n\t\tTile[][][] tiles \u003d scene.getTiles();\n\t\tTile tile \u003d tiles[view.getPlane()][x][y];\n\t\tif (tile !\u003d null) {\n\t\t\tfor (GameObject gameObject : tile.getGameObjects()) {\n\t\t\t\tif (gameObject !\u003d null \u0026\u0026 gameObject.getId() \u003d\u003d id) {\n\t\t\t\t\treturn gameObject;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tWallObject wallObject \u003d tile.getWallObject();\n\t\t\tif (wallObject !\u003d null \u0026\u0026 wallObject.getId() \u003d\u003d id) {\n\t\t\t\treturn wallObject;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate boolean canUnnote(ItemComposition item) {\n\t\tif (item.getNote() !\u003d -1) {\n\t\t\treturn true;\n\t\t}\n\t\treturn Arrays.stream(BANKNOTE_LIKE).anyMatch(item.getName()::equals);\n\t}\n\n\tprivate boolean canUnnote(ObjectComposition object) {\n\t\tif (object.getImpostorIds() !\u003d null) {\n\t\t\t// sus\n\t\t\tobject \u003d object.getImpostor();\n\t\t}\n\t\tif (Arrays.stream(UNNOTE_OBJECTS).anyMatch(object.getName()::equalsIgnoreCase)) {\n\t\t\treturn true;\n\t\t}\n\t\tif (customUnnotelist.contains(object.getName().toLowerCase())) {\n\t\t\treturn true;\n\t\t}\n\t\tif (\"Grand Exchange booth\".equalsIgnoreCase(object.getName())) {\n\t\t\treturn config.enableGEBooths();\n\t\t}\n\t\tif (object.getName().toLowerCase().endsWith(\"table\") || \"Counter\".equalsIgnoreCase(object.getName())) {\n\t\t\treturn config.enableTables();\n\t\t}\n\t\treturn Arrays.stream(object.getActions())\n\t\t\t\t.anyMatch(\"Bank\"::equalsIgnoreCase);\n\t}\n\n\tprivate boolean canUnnote(NPCComposition npc) {\n\t\tif (Arrays.stream(UNNOTE_NPCS).anyMatch(npc.getName()::equalsIgnoreCase)) {\n\t\t\treturn true;\n\t\t}\n\t\tif (customUnnotelist.contains(npc.getName().toLowerCase())) {\n\t\t\treturn true;\n\t\t}\n\t\tif (Arrays.stream(npc.getActions()).anyMatch(\"Bank\"::equalsIgnoreCase)) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n}\n","filePath":"src\\main\\java\\easyunnote\\EasyUnnotePlugin.java"},{"fileName":"EasyUnnotePluginTest.java","content":"package easyunnote;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class EasyUnnotePluginTest\n{\n\t@SuppressWarnings(\"unchecked\")\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(EasyUnnotePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\easyunnote\\EasyUnnotePluginTest.java"}]},{"commit":"07a86a771674c3a36ed49babc0c47c414c3a57db","repository":"https://github.com/pwatts6060/runelite-plugins.git","internalName":"entrana","files":[{"fileName":"AllowedIDs.java","content":"package com.entrana;\n\nimport com.google.common.collect.ImmutableSet;\n\nimport java.util.Set;\nimport net.runelite.api.gameval.ItemID;\n\npublic class AllowedIDs {\n\tprivate static final Set\u003cInteger\u003e allowedIds \u003d ImmutableSet.of(\n\t\tItemID.BOOK_OF_THE_DEAD,\n\t\tItemID.IKOV_BOOTSOFLIGHTNESS,\n\t\tItemID.IKOV_BOOTSOFLIGHTNESSWORN,\n\t\tItemID.HUNTING_LIGHT_CAPE,\n\t\tItemID.HUNTING_LIGHT_CAPE_WORN,\n\t\tItemID.HUNTING_LIGHTER_CAPE,\n\t\tItemID.HUNTING_LIGHTER_CAPE_WORN,\n\t\tItemID.LEAGUE_3_MAGIC_BOOK,\n\t\tItemID.FAIRY_ENCHANTED_SECATEURS,\n\t\tItemID.GUTHIXBOOK_COMPLETE,\n\t\tItemID.LEAGUE_3_BOOK_GUTHIX,\n\t\tItemID.ZAROSBOOK_COMPLETE,\n\t\tItemID.LEAGUE_3_BOOK_ZAROS,\n\t\tItemID.ARMADYLBOOK_COMPLETE,\n\t\tItemID.LEAGUE_3_BOOK_ARMADYL,\n\t\tItemID.BANDOSBOOK_COMPLETE,\n\t\tItemID.LEAGUE_3_BOOK_BANDOS,\n\t\tItemID.SARADOMINBOOK_COMPLETE,\n\t\tItemID.LEAGUE_3_BOOK_SARADOMIN,\n\t\tItemID.ZAMORAKBOOK_COMPLETE,\n\t\tItemID.LEAGUE_3_BOOK_ZAMORAK,\n\t\tItemID.BLUEWIZHAT,\n\t\tItemID.BLUEWIZHAT_TRIM,\n\t\tItemID.BLUEWIZHAT_TRIM_GOLD,\n\t\tItemID.WIZARDS_ROBE,\n\t\tItemID.WIZARDS_ROBE_TRIM,\n\t\tItemID.WIZARDS_ROBE_TRIM_GOLD,\n\t\tItemID.BLACKWIZHAT,\n\t\tItemID.BLACKWIZHAT_TRIM,\n\t\tItemID.BLACKWIZHAT_GOLD,\n\t\tItemID.BLACK_ROBE,\n\t\tItemID.BLACK_WIZARDS_ROBE_TRIM,\n\t\tItemID.BLACK_WIZARDS_ROBE_GOLD,\n\t\tItemID.ZAMROBEBOTTOM,\n\t\tItemID.ZAMROBETOP,\n\t\tItemID.HAM_ROBE,\n\t\tItemID.HAM_SHIRT,\n\t\tItemID.HAM_HOOD,\n\t\tItemID.HAM_BOOTS,\n\t\tItemID.HAM_GLOVES,\n\t\tItemID.HAM_CLOAK,\n\t\tItemID.WOLFENBOOTS_GREY,\n\t\tItemID.WOLFENROBETOP_GREY,\n\t\tItemID.WOLFENROBEBOTTOM_GREY,\n\t\tItemID.WOLFENHAT_GREY,\n\t\tItemID.WOLFENGLOVES_GREY,\n\t\tItemID.WOLFENBOOTS_CRIMSON,\n\t\tItemID.WOLFENROBETOP_CRIMSON,\n\t\tItemID.WOLFENROBEBOTTOM_CRIMSON,\n\t\tItemID.WOLFENHAT_CRIMSON,\n\t\tItemID.WOLFENGLOVES_CRIMSON,\n\t\tItemID.WOLFENBOOTS_TANGERINE,\n\t\tItemID.WOLFENROBETOP_TANGERINE,\n\t\tItemID.WOLFENROBEBOTTOM_TANGERINE,\n\t\tItemID.WOLFENHAT_TANGERINE,\n\t\tItemID.WOLFENGLOVES_TANGERINE,\n\t\tItemID.WOLFENBOOTS_OCEAN,\n\t\tItemID.WOLFENROBETOP_OCEAN,\n\t\tItemID.WOLFENROBEBOTTOM_OCEAN,\n\t\tItemID.WOLFENHAT_OCEAN,\n\t\tItemID.WOLFENGLOVES_OCEAN,\n\t\tItemID.WOLFENBOOTS_PURPLE,\n\t\tItemID.WOLFENROBETOP_PURPLE,\n\t\tItemID.WOLFENROBEBOTTOM_PURPLE,\n\t\tItemID.WOLFENHAT_PURPLE,\n\t\tItemID.WOLFENGLOVES_PURPLE,\n\t\tItemID.BLACK_CAPE,\n\t\tItemID.BLUE_CAPE,\n\t\tItemID.YELLOW_CAPE,\n\t\tItemID.GREEN_CAPE,\n\t\tItemID.PURPLE_CAPE,\n\t\tItemID.ORANGE_CAPE,\n\t\tItemID.VIKING_CLOAK_GREEN,\n\t\tItemID.VIKING_CLOAK_DARKBROWN,\n\t\tItemID.VIKING_CLOAK_LIGHTBROWN,\n\t\tItemID.VIKING_CLOAK_BROWN,\n\t\tItemID.VIKING_TOP_DARKBROWN,\n\t\tItemID.VIKING_TOP_GREEN,\n\t\tItemID.VIKING_TOP_BEIGE,\n\t\tItemID.VIKING_TOP_RED,\n\t\tItemID.VIKING_TOP_BLUE,\n\t\tItemID.VIKING_CLOAK_RED,\n\t\tItemID.VIKING_CLOAK_GREY,\n\t\tItemID.VIKING_CLOAK_TANGERINE,\n\t\tItemID.VIKING_CLOAK_OCEAN,\n\t\tItemID.VIKING_CLOAK_PURPLE,\n\t\tItemID.VIKING_CLOAK_PINK,\n\t\tItemID.VIKING_CLOAK_BLACK,\n\t\tItemID.VIKINGBOOTS,\n\t\tItemID.VIKINGROBETOP,\n\t\tItemID.VIKINGROBEBOTTOM,\n\t\tItemID.VIKINGHAT,\n\t\tItemID.VIKINGGLOVES,\n\t\tItemID.DEATH_SPIKEDBOOTS,\n\t\tItemID.LEATHER_BOOTS,\n\t\tItemID.LEATHER_GLOVES,\n\t\tItemID.DEATH_CLIMBINGBOOTS,\n\t\tItemID.CLIMBING_BOOTS_G,\n\t\tItemID.LEATHER_VAMBRACES,\n\t\tItemID.TRAIL_GUTHIX_CLOAK,\n\t\tItemID.CASTLEWARS_CLOAK_ZAMORAK,\n\t\tItemID.CASTLEWARS_CLOAK_SARADOMIN,\n\t\tItemID.TRAIL_ARMADYL_CLOAK,\n\t\tItemID.TRAIL_ANCIENT_CLOAK,\n\t\tItemID.TRAIL_BANDOS_CLOAK,\n\t\tItemID.WILDERNESS_CAPE_1,\n\t\tItemID.WILDERNESS_CAPE_2,\n\t\tItemID.WILDERNESS_CAPE_3,\n\t\tItemID.WILDERNESS_CAPE_4,\n\t\tItemID.WILDERNESS_CAPE_5,\n\t\tItemID.WILDERNESS_CAPE_6,\n\t\tItemID.WILDERNESS_CAPE_7,\n\t\tItemID.WILDERNESS_CAPE_8,\n\t\tItemID.WILDERNESS_CAPE_9,\n\t\tItemID.WILDERNESS_CAPE_10,\n\t\tItemID.WILDERNESS_CAPE_11,\n\t\tItemID.WILDERNESS_CAPE_12,\n\t\tItemID.WILDERNESS_CAPE_13,\n\t\tItemID.WILDERNESS_CAPE_14,\n\t\tItemID.WILDERNESS_CAPE_15,\n\t\tItemID.WILDERNESS_CAPE_16,\n\t\tItemID.WILDERNESS_CAPE_17,\n\t\tItemID.WILDERNESS_CAPE_18,\n\t\tItemID.WILDERNESS_CAPE_19,\n\t\tItemID.WILDERNESS_CAPE_20,\n\t\tItemID.WILDERNESS_CAPE_21,\n\t\tItemID.WILDERNESS_CAPE_22,\n\t\tItemID.WILDERNESS_CAPE_23,\n\t\tItemID.WILDERNESS_CAPE_24,\n\t\tItemID.WILDERNESS_CAPE_25,\n\t\tItemID.WILDERNESS_CAPE_26,\n\t\tItemID.WILDERNESS_CAPE_27,\n\t\tItemID.WILDERNESS_CAPE_28,\n\t\tItemID.WILDERNESS_CAPE_29,\n\t\tItemID.WILDERNESS_CAPE_30,\n\t\tItemID.WILDERNESS_CAPE_31,\n\t\tItemID.WILDERNESS_CAPE_32,\n\t\tItemID.WILDERNESS_CAPE_33,\n\t\tItemID.WILDERNESS_CAPE_34,\n\t\tItemID.WILDERNESS_CAPE_35,\n\t\tItemID.WILDERNESS_CAPE_36,\n\t\tItemID.WILDERNESS_CAPE_37,\n\t\tItemID.WILDERNESS_CAPE_38,\n\t\tItemID.WILDERNESS_CAPE_39,\n\t\tItemID.WILDERNESS_CAPE_40,\n\t\tItemID.WILDERNESS_CAPE_41,\n\t\tItemID.WILDERNESS_CAPE_42,\n\t\tItemID.WILDERNESS_CAPE_43,\n\t\tItemID.WILDERNESS_CAPE_44,\n\t\tItemID.WILDERNESS_CAPE_45,\n\t\tItemID.WILDERNESS_CAPE_46,\n\t\tItemID.WILDERNESS_CAPE_47,\n\t\tItemID.WILDERNESS_CAPE_48,\n\t\tItemID.WILDERNESS_CAPE_49,\n\t\tItemID.WILDERNESS_CAPE_50,\n\t\tItemID.WILDERNESS_CAPE_I,\n\t\tItemID.WILDERNESS_CAPE_X,\n\t\tItemID.WILDERNESS_CAPE_ZERO,\n\t\tItemID.SECRET_GHOST_BOOTS,\n\t\tItemID.SECRET_GHOST_GLOVES,\n\t\tItemID.ICE_GLOVES,\n\t\tItemID.HUNTING_SILENT_GLOVES,\n\t\tItemID.GNOME_BOOTS_PINK,\n\t\tItemID.GNOME_BOOTS_GREEN,\n\t\tItemID.GNOME_BOOTS_BLUE,\n\t\tItemID.GNOME_BOOTS_CREAM,\n\t\tItemID.GNOME_BOOTS_TURQUOISE,\n\t\tItemID.GNOME_ROBETOP_PINK,\n\t\tItemID.GNOME_ROBETOP_GREEN,\n\t\tItemID.GNOME_ROBETOP_BLUE,\n\t\tItemID.GNOME_ROBETOP_CREAM,\n\t\tItemID.GNOME_ROBETOP_TURQUOISE,\n\t\tItemID.GNOME_ROBEBOTTOMS_PINK,\n\t\tItemID.GNOME_ROBEBOTTOMS_GREEN,\n\t\tItemID.GNOME_ROBEBOTTOMS_BLUE,\n\t\tItemID.GNOME_ROBEBOTTOMS_CREAM,\n\t\tItemID.GNOME_ROBEBOTTOMS_TURQUOISE,\n\t\tItemID.GNOME_HAT_PINK,\n\t\tItemID.GNOME_HAT_GREEN,\n\t\tItemID.GNOME_HAT_BLUE,\n\t\tItemID.GNOME_HAT_CREAM,\n\t\tItemID.GNOME_HAT_TURQUOISE,\n\t\tItemID.DAGGANOTH_MELEE_FEET,\n\t\tItemID.BOOTS_OF_STONE,\n\t\tItemID.BOOTS_WIZARD,\n\t\tItemID.FORESTRY_GLOVES,\n\t\tItemID.TOME_OF_WATER,\n\t\tItemID.TOME_OF_WATER_UNCHARGED,\n\t\tItemID.TOME_OF_EARTH,\n\t\tItemID.TOME_OF_EARTH_UNCHARGED\n\t);\n\n    public static boolean contains(int id) {\n        return allowedIds.contains(id);\n    }\n}\n","filePath":"src\\main\\java\\com\\entrana\\AllowedIDs.java"},{"fileName":"ContainerHighlight.java","content":"package com.entrana;\n\nimport com.google.inject.Inject;\nimport com.google.inject.Singleton;\nimport java.awt.AlphaComposite;\nimport java.awt.Color;\nimport java.awt.Graphics2D;\nimport java.awt.Rectangle;\nimport java.awt.image.BufferedImage;\nimport net.runelite.api.gameval.InterfaceID;\nimport net.runelite.api.widgets.WidgetItem;\nimport net.runelite.api.widgets.WidgetUtil;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.overlay.WidgetItemOverlay;\n\n@Singleton\npublic class ContainerHighlight extends WidgetItemOverlay\n{\n\tprivate final ItemManager itemManager;\n\tprivate final EntranaConfig config;\n\tprivate final ProhibitedItems prohibitedItems;\n\n\t@Inject\n\tprivate ContainerHighlight(ItemManager itemManager, EntranaConfig config)\n\t{\n\t\tthis.itemManager \u003d itemManager;\n\t\tthis.config \u003d config;\n\t\tthis.prohibitedItems \u003d new ProhibitedItems(itemManager);\n\t\tshowOnInventory();\n\t\tshowOnEquipment();\n\t}\n\n\t@Override\n\tpublic void renderItemOverlay(Graphics2D graphics, int itemId, WidgetItem itemWidget)\n\t{\n\t\tint interfaceId \u003d WidgetUtil.componentToInterface(itemWidget.getWidget().getId());\n\t\tif (!prohibitedItems.isProhibited(itemId) || (interfaceId !\u003d InterfaceID.EQUIPMENT\n\t\t\t\u0026\u0026 interfaceId !\u003d InterfaceID.INVENTORY\n\t\t\t\u0026\u0026 interfaceId !\u003d InterfaceID.BANK_DEPOSITBOX))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tfinal Rectangle bounds \u003d itemWidget.getCanvasBounds();\n\t\tfinal BufferedImage outline \u003d itemManager.getItemOutline(itemId, itemWidget.getQuantity(), config.color());\n\t\tgraphics.drawImage(outline, (int) bounds.getX(), (int) bounds.getY(), null);\n\t}\n\n\tprivate BufferedImage overlay(BufferedImage image, Color color)\n\t{\n\t\tint w \u003d image.getWidth();\n\t\tint h \u003d image.getHeight();\n\t\tBufferedImage overlayed \u003d new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);\n\t\tGraphics2D g \u003d overlayed.createGraphics();\n\t\tg.drawImage(image, 0, 0, null);\n\t\tg.setComposite(AlphaComposite.SrcAtop);\n\t\tg.setColor(color);\n\t\tg.fillRect(0, 0, w, h);\n\t\tg.dispose();\n\t\treturn overlayed;\n\t}\n}\n","filePath":"src\\main\\java\\com\\entrana\\ContainerHighlight.java"},{"fileName":"EntranaConfig.java","content":"package com.entrana;\n\nimport java.awt.Color;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"entrana\")\npublic interface EntranaConfig extends Config\n{\n\t@ConfigItem(\n\t\tkeyName \u003d \"color\",\n\t\tname \u003d \"Prohibited color\",\n\t\tdescription \u003d \"The color to outline prohibited items\"\n\t)\n\tdefault Color color()\n\t{\n\t\treturn Color.ORANGE;\n\t}\n}\n","filePath":"src\\main\\java\\com\\entrana\\EntranaConfig.java"},{"fileName":"EntranaPlugin.java","content":"package com.entrana;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Player;\nimport net.runelite.api.coords.WorldArea;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Entrana\"\n)\npublic class EntranaPlugin extends Plugin\n{\n\tprivate static final int BALLOON_TRANSPORT_ID \u003d 469;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate EntranaConfig config;\n\n\t@Inject\n\tprivate ContainerHighlight containerHighlight;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Provides\n\tEntranaConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(EntranaConfig.class);\n\t}\n\n\tprivate static final WorldArea entranaDock \u003d new WorldArea(new WorldPoint(3043, 3234, 0), 8, 4);\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event)\n\t{\n\t\tPlayer player \u003d client.getLocalPlayer();\n\t\tif (player \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (!entranaDock.contains2D(player.getWorldLocation()) \u0026\u0026 client.getWidget(BALLOON_TRANSPORT_ID, 0) \u003d\u003d null)\n\t\t{\n\t\t\toverlayManager.remove(containerHighlight);\n\t\t\treturn;\n\t\t}\n\t\toverlayManager.add(containerHighlight);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(containerHighlight);\n\t}\n}\n","filePath":"src\\main\\java\\com\\entrana\\EntranaPlugin.java"},{"fileName":"ProhibitedIDs.java","content":"package com.entrana;\n\nimport com.google.common.collect.ImmutableSet;\n\nimport java.util.Set;\nimport net.runelite.api.gameval.ItemID;\n\npublic class ProhibitedIDs {\n\tprivate static final Set\u003cInteger\u003e prohibitedIds \u003d ImmutableSet.of(\n\t\tItemID.BREW_FLAG_1,\n\t\tItemID.BREW_FLAG_2,\n\t\tItemID.BREW_FLAG_3,\n\t\tItemID.BREW_FLAG_4,\n\t\tItemID.BREW_FLAG_5,\n\t\tItemID.BREW_FLAG_6,\n\t\tItemID.POH_BANNER_ARRAV,\n\t\tItemID.POH_BANNER_ASGARNIA,\n\t\tItemID.POH_BANNER_DORGESHUUN,\n\t\tItemID.POH_BANNER_DRAGON,\n\t\tItemID.POH_BANNER_FAIRY,\n\t\tItemID.POH_BANNER_GUTHIX,\n\t\tItemID.POH_BANNER_HAM,\n\t\tItemID.POH_BANNER_HORSE,\n\t\tItemID.POH_BANNER_JOGRE,\n\t\tItemID.POH_BANNER_KANDARIN,\n\t\tItemID.POH_BANNER_MISTHALIN,\n\t\tItemID.POH_BANNER_MONEY,\n\t\tItemID.POH_BANNER_SARADOMIN,\n\t\tItemID.POH_BANNER_SKULL,\n\t\tItemID.POH_BANNER_VARROCK,\n\t\tItemID.POH_BANNER_ZAMORAK,\n\t\tItemID.ARCEUUS_BANNER,\n\t\tItemID.CHARITY_BANNER,\n\t\tItemID.HOSIDIUS_BANNER,\n\t\tItemID.LOVAKENGJ_BANNER,\n\t\tItemID.PISCARILIUS_BANNER,\n\t\tItemID.AKD_PROTEST_BANNER,\n\t\tItemID.LEAGUE_3_BANNER,\n\t\tItemID.SHAYZIEN_BANNER,\n\t\tItemID.TRAILBLAZER_BANNER,\n\t\tItemID.SARADOMIN_REWARD_BANNER,\n\t\tItemID.ZAMORAK_REWARD_BANNER,\n\t\tItemID.II_MAGIC_BUTTERFLY_NET,\n\t\tItemID.GODWARS_GODSWORD_HILT_ANCIENT,\n\t\tItemID.GODWARS_GODSWORD_HILT_SARADOMIN,\n\t\tItemID.GODWARS_GODSWORD_HILT_BANDOS,\n\t\tItemID.GODWARS_GODSWORD_HILT_ZAMORAK,\n\t\tItemID.GODWARS_GODSWORD_HILT_ARMADYL,\n\t\tItemID.GODWARS_GODSWORD_BLADE1_2_3,\n\t\tItemID.GODWARS_GODSWORD_BLADE1,\n\t\tItemID.GODWARS_GODSWORD_BLADE2,\n\t\tItemID.GODWARS_GODSWORD_BLADE3,\n\t\tItemID.JOINT_OF_HAM,\n\t\tItemID.SWIFT_BLADE,\n\t\tItemID.IMCANDO_HAMMER,\n\t\tItemID.TWPART1,\n\t\tItemID.TWPART2,\n\t\tItemID.TWPART3,\n\t\tItemID.TWPART4,\n\t\tItemID.LEAGUE_3_MULTICANNON_BASE,\n\t\tItemID.LEAGUE_3_MULTICANNON_STAND,\n\t\tItemID.LEAGUE_3_MULTICANNON_BARRELS,\n\t\tItemID.LEAGUE_3_MULTICANNON_FURNACE,\n\t\tItemID.II_CAPTURED_IMPLING_1,\n\t\tItemID.II_CAPTURED_IMPLING_2,\n\t\tItemID.II_CAPTURED_IMPLING_3,\n\t\tItemID.II_CAPTURED_IMPLING_4,\n\t\tItemID.II_CAPTURED_IMPLING_5,\n\t\tItemID.II_CAPTURED_IMPLING_6,\n\t\tItemID.II_CAPTURED_IMPLING_7,\n\t\tItemID.II_CAPTURED_IMPLING_8,\n\t\tItemID.II_CAPTURED_IMPLING_9,\n\t\tItemID.II_CAPTURED_IMPLING_10,\n\t\tItemID.II_CAPTURED_IMPLING_11,\n\t\tItemID.II_CAPTURED_IMPLING_12,\n\t\tItemID.WINT_REWARD_BOX,\n\t\tItemID.SOUL_WARS_SPOILS,\n\t\tItemID.HUNTING_BUTTERFLY_NET,\n\t\tItemID.TRAIL_SARADOMIN_SCARF,\n\t\tItemID.TRAIL_GUTHIX_SCARF,\n\t\tItemID.TRAIL_ZAMORAK_SCARF,\n\t\tItemID.TRAIL_ARMADYL_SCARF,\n\t\tItemID.TRAIL_BANDOS_SCARF,\n\t\tItemID.TRAIL_ANCIENT_SCARF,\n\t\tItemID.MOTHERLODE_REWARD_BOOTS,\n\t\tItemID.MOTHERLODE_REWARD_HAT,\n\t\tItemID.MOTHERLODE_REWARD_TOP,\n\t\tItemID.MOTHERLODE_REWARD_LEGS,\n\t\tItemID.MOTHERLODE_REWARD_BOOTS_GOLD,\n\t\tItemID.MOTHERLODE_REWARD_HAT_GOLD,\n\t\tItemID.MOTHERLODE_REWARD_TOP_GOLD,\n\t\tItemID.MOTHERLODE_REWARD_LEGS_GOLD,\n\t\tItemID.COLLECTION_STAFF_GILDED,\n\t\tItemID.COLLECTION_STAFF_DRAGON,\n\t\tItemID.COLLECTION_STAFF_RUNE,\n\t\tItemID.COLLECTION_STAFF_ADAMANT,\n\t\tItemID.COLLECTION_STAFF_MITHRIL,\n\t\tItemID.COLLECTION_STAFF_STEEL,\n\t\tItemID.COLLECTION_STAFF_BLACK,\n\t\tItemID.COLLECTION_STAFF_IRON,\n\t\tItemID.COLLECTION_STAFF_BRONZE\n\t);\n\n    public static boolean contains(int id) {\n        return prohibitedIds.contains(id);\n    }\n}\n","filePath":"src\\main\\java\\com\\entrana\\ProhibitedIDs.java"},{"fileName":"ProhibitedItems.java","content":"package com.entrana;\n\nimport net.runelite.api.EquipmentInventorySlot;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.client.game.ItemEquipmentStats;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.game.ItemStats;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class ProhibitedItems\n{\n\tprivate static final Map\u003cInteger, Boolean\u003e cachedIds \u003d new HashMap\u003c\u003e();\n\tprivate final ItemManager itemManager;\n\n\tpublic ProhibitedItems(ItemManager itemManager)\n\t{\n\t\tthis.itemManager \u003d itemManager;\n\t}\n\n\tboolean isProhibited(int id)\n\t{\n\t\tif (AllowedIDs.contains(id))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\tif (ProhibitedIDs.contains(id))\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\tif (cachedIds.containsKey(id))\n\t\t{\n\t\t\treturn cachedIds.get(id);\n\t\t}\n\t\tboolean prohibited \u003d false;\n\t\tif (isCombatGear(id))\n\t\t{\n\t\t\tprohibited \u003d true;\n\t\t}\n\t\tcachedIds.put(id, prohibited);\n\t\treturn prohibited;\n\t}\n\n\tprivate boolean isCombatGear(int id)\n\t{\n\t\tItemStats itemStats \u003d itemManager.getItemStats(id);\n\t\tif (itemStats \u003d\u003d null || !itemStats.isEquipable())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tint slot \u003d itemStats.getEquipment().getSlot();\n\t\tif (slot \u003d\u003d EquipmentInventorySlot.AMMO.getSlotIdx())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\tif (slot \u003d\u003d EquipmentInventorySlot.AMULET.getSlotIdx())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\tif (slot \u003d\u003d EquipmentInventorySlot.RING.getSlotIdx())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tItemComposition itemComposition \u003d itemManager.getItemComposition(id);\n\t\tString name \u003d itemComposition.getName().toLowerCase();\n\t\tif (name.contains(\"bracelet\"))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tItemEquipmentStats stats \u003d itemStats.getEquipment();\n\t\tif (stats \u003d\u003d null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\tif (stats.getAcrush() \u003e 0)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\tif (stats.getAstab() \u003e 0)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\tif (stats.getAslash() \u003e 0)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\tif (stats.getAmagic() \u003e 0)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\tif (stats.getArange() \u003e 0)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\tif (stats.getDmagic() \u003e 0)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\tif (stats.getDrange() \u003e 0)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\tif (stats.getDslash() \u003e 0)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\tif (stats.getDstab() \u003e 0)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\tif (stats.getStr() \u003e 0)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\com\\entrana\\ProhibitedItems.java"},{"fileName":"EntranaPluginTest.java","content":"package com.entrana;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class EntranaPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(EntranaPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\entrana\\EntranaPluginTest.java"}]},{"commit":"f75ec09df84f058f54500917b99d7f8adcfda379","repository":"https://github.com/equirs/fashionscape-plugin.git","internalName":"fashionscape","files":[{"fileName":"ColorScorer.java","content":"package eq.uirs.fashionscape.colors;\n\nimport com.google.gson.Gson;\nimport com.google.gson.GsonBuilder;\nimport com.google.gson.reflect.TypeToken;\nimport eq.uirs.fashionscape.core.FashionManager;\nimport eq.uirs.fashionscape.data.color.ColorType;\nimport eq.uirs.fashionscape.data.color.Colorable;\nimport eq.uirs.fashionscape.data.kit.JawIcon;\nimport eq.uirs.fashionscape.data.kit.JawKit;\nimport java.awt.Color;\nimport java.io.BufferedReader;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.io.Reader;\nimport java.lang.reflect.Type;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.Comparator;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.concurrent.ConcurrentHashMap;\nimport java.util.stream.Collectors;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport lombok.Value;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Player;\nimport net.runelite.api.PlayerComposition;\nimport net.runelite.api.kit.KitType;\n\n@Slf4j\n@Singleton\npublic class ColorScorer\n{\n\tprivate final Client client;\n\tprivate final FashionManager fashionManager;\n\n\tprivate final Map\u003cInteger, GenderItemColors\u003e allColors;\n\tprivate final Map\u003cKitType, List\u003cItemColorInfo\u003e\u003e kitColors \u003d new ConcurrentHashMap\u003c\u003e();\n\tprivate final Map\u003cColorType, Colorable\u003e playerColors \u003d new ConcurrentHashMap\u003c\u003e();\n\n\tprivate Integer gender;\n\n\t@Value\n\tprivate static class Score\n\t{\n\t\t// color similarity (scaled 0-1)\n\t\tdouble match;\n\t\t// area percentage (0-1) of the match, relative to item or player\n\t\tdouble percentage;\n\t}\n\n\t@Inject\n\tColorScorer(Client client, FashionManager fashionManager, Gson baseGson)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.fashionManager \u003d fashionManager;\n\t\tGsonBuilder builder \u003d baseGson.newBuilder()\n\t\t\t.registerTypeAdapter(ItemColors.class, new ItemColors.Deserializer());\n\t\tGson gson \u003d builder.create();\n\t\tInputStream stream \u003d this.getClass().getResourceAsStream(\"colors.json\");\n\t\tif (stream !\u003d null)\n\t\t{\n\t\t\tReader reader \u003d new BufferedReader(new InputStreamReader(stream));\n\t\t\tType type \u003d new TypeToken\u003cMap\u003cInteger, GenderItemColors\u003e\u003e()\n\t\t\t{\n\t\t\t}.getType();\n\t\t\tallColors \u003d new ConcurrentHashMap\u003c\u003e(gson.fromJson(reader, type));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tallColors \u003d new ConcurrentHashMap\u003c\u003e();\n\t\t}\n\t}\n\n\t// this should be called before scoring if relying on current player swaps\n\tpublic void updatePlayerInfo()\n\t{\n\t\tkitColors.clear();\n\t\tPlayer player \u003d client.getLocalPlayer();\n\t\tif (player \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tPlayerComposition composition \u003d player.getPlayerComposition();\n\t\tif (composition \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tplayerColors.clear();\n\t\tplayerColors.putAll(fashionManager.swappedColorsMap());\n\t\tgender \u003d composition.getGender();\n\t\tfor (KitType slot : KitType.values())\n\t\t{\n\t\t\tInteger itemId \u003d fashionManager.swappedItemIdIn(slot);\n\t\t\tif (itemId !\u003d null)\n\t\t\t{\n\t\t\t\tkitColors.put(slot, colorsFor(itemId));\n\t\t\t}\n\t\t}\n\t\tJawIcon icon \u003d fashionManager.swappedIcon();\n\t\tif (icon !\u003d null)\n\t\t{\n\t\t\tInteger iconItemId \u003d JawKit.NO_JAW.getIconItemId(icon);\n\t\t\tif (iconItemId !\u003d null)\n\t\t\t{\n\t\t\t\tkitColors.put(KitType.JAW, colorsFor(iconItemId));\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic void setPlayerInfo(Map\u003cKitType, Integer\u003e itemIds, Map\u003cColorType, Colorable\u003e colors)\n\t{\n\t\tkitColors.clear();\n\t\tPlayer player \u003d client.getLocalPlayer();\n\t\tif (player \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tplayerColors.clear();\n\t\tplayerColors.putAll(colors);\n\t\tPlayerComposition composition \u003d player.getPlayerComposition();\n\t\tgender \u003d composition.getGender();\n\t\tfor (Map.Entry\u003cKitType, Integer\u003e entry : itemIds.entrySet())\n\t\t{\n\t\t\tkitColors.put(entry.getKey(), colorsFor(entry.getValue()));\n\t\t}\n\t}\n\n\tpublic void addPlayerInfo(KitType slot, Integer itemId)\n\t{\n\t\tif (itemId !\u003d null)\n\t\t{\n\t\t\tkitColors.put(slot, colorsFor(itemId));\n\t\t}\n\t}\n\n\tpublic void addPlayerColor(ColorType type, Colorable colorable)\n\t{\n\t\tif (colorable !\u003d null)\n\t\t{\n\t\t\tplayerColors.put(type, colorable);\n\t\t}\n\t}\n\n\t/**\n\t * scores color similarity between an item and the current player\u0027s outfit:\n\t * 1 is a perfect match, 0 is a complete mismatch\n\t */\n\tpublic double score(int itemId, KitType exclude)\n\t{\n\t\tList\u003cItemColorInfo\u003e colors \u003d colorsFor(itemId);\n\t\treturn score(colors, exclude, null);\n\t}\n\n\t/**\n\t * scores color similarity between a Colorable and the current player\u0027s outfit:\n\t * 1 is a perfect match, 0 is a complete mismatch\n\t */\n\tpublic double score(Colorable colorable, ColorType exclude)\n\t{\n\t\tint rgb \u003d colorable.getColor().getRGB();\n\t\tList\u003cItemColorInfo\u003e colors \u003d Collections.singletonList(new ItemColorInfo(rgb, 1.0));\n\t\treturn score(colors, null, exclude);\n\t}\n\n\tprivate double score(List\u003cItemColorInfo\u003e colors, KitType excludeKit, ColorType excludeColor)\n\t{\n\t\tif (colors.isEmpty())\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\t\tMap\u003cInteger, Double\u003e playerInfo \u003d getPlayerRgbInfo(excludeKit, excludeColor);\n\t\tif (playerInfo.isEmpty())\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\t\t// compute an aggregate score relative to the item/color target\n\t\tList\u003cScore\u003e scoresTarget \u003d new ArrayList\u003c\u003e();\n\t\tfor (ItemColorInfo c : colors)\n\t\t{\n\t\t\tplayerInfo.entrySet().stream()\n\t\t\t\t.min(Comparator.comparingDouble(e -\u003e colorDistance(c.rgb, e.getKey())))\n\t\t\t\t.map(e -\u003e new Score(1.0 - colorDistance(c.rgb, e.getKey()), c.pct))\n\t\t\t\t.ifPresent(scoresTarget::add);\n\t\t}\n\t\tdouble targetScore \u003d scoresTarget.stream()\n\t\t\t.mapToDouble(s -\u003e Math.pow(s.match, 2) * s.percentage)\n\t\t\t.sum();\n\t\t// compute an aggregate score relative to the player\n\t\tList\u003cScore\u003e scoresPlayer \u003d new ArrayList\u003c\u003e();\n\t\tfor (Map.Entry\u003cInteger, Double\u003e e : playerInfo.entrySet())\n\t\t{\n\t\t\tcolors.stream()\n\t\t\t\t.min(Comparator.comparingDouble(c -\u003e colorDistance(c.rgb, e.getKey())))\n\t\t\t\t.map(c -\u003e new Score(1.0 - colorDistance(c.rgb, e.getKey()), e.getValue()))\n\t\t\t\t.ifPresent(scoresPlayer::add);\n\t\t}\n\t\tdouble playerScore \u003d scoresPlayer.stream()\n\t\t\t.mapToDouble(s -\u003e Math.pow(s.match, 2) * s.percentage)\n\t\t\t.sum();\n\t\t// more weighting in relation to the target itself seems to yield better results\n\t\treturn (3.0 * targetScore + playerScore) / 4.0;\n\t}\n\n\t// Standard Euclidean color distance scaled from 0 (best) to 1 (worst)\n\tprivate double colorDistance(int c1, int c2)\n\t{\n\t\tColor color1 \u003d new Color(c1);\n\t\tColor color2 \u003d new Color(c2);\n\t\tdouble deltaR \u003d Math.abs(color1.getRed() - color2.getRed()) / 255f;\n\t\tdouble deltaG \u003d Math.abs(color1.getGreen() - color2.getGreen()) / 255f;\n\t\tdouble deltaB \u003d Math.abs(color1.getBlue() - color2.getBlue()) / 255f;\n\t\treturn Math.sqrt((Math.pow(deltaR, 2) + Math.pow(deltaG, 2) + Math.pow(deltaB, 2)) / 3.0);\n\t}\n\n\tprivate List\u003cItemColorInfo\u003e colorsFor(int itemId)\n\t{\n\t\tGenderItemColors genderColors \u003d allColors.get(itemId);\n\t\tif (genderColors !\u003d null)\n\t\t{\n\t\t\tif (genderColors.any !\u003d null)\n\t\t\t{\n\t\t\t\treturn genderColors.any.itemColorInfo;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tswitch (gender)\n\t\t\t\t{\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\treturn genderColors.masc.itemColorInfo;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\treturn genderColors.fem.itemColorInfo;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn new ArrayList\u003c\u003e();\n\t}\n\n\t// Maps rgb -\u003e summed percentage in player, excluding the given slot or color type\n\tprivate Map\u003cInteger, Double\u003e getPlayerRgbInfo(KitType excludeKit, ColorType excludeColor)\n\t{\n\t\tMap\u003cInteger, Double\u003e unscaled \u003d kitColors.entrySet().stream()\n\t\t\t.filter(e -\u003e e.getKey() !\u003d excludeKit)\n\t\t\t.map(Map.Entry::getValue)\n\t\t\t.flatMap(List::stream)\n\t\t\t.collect(Collectors.toMap(ItemColorInfo::getRgb, ItemColorInfo::getPct, Double::sum));\n\t\tMap\u003cInteger, Double\u003e unscaledColors \u003d playerColors.entrySet().stream()\n\t\t\t.filter(e -\u003e e.getKey() !\u003d excludeColor)\n\t\t\t.map(Map.Entry::getValue)\n\t\t\t.collect(Collectors.toMap(c -\u003e c.getColor().getRGB(), c -\u003e 1.0, Double::sum));\n\t\tunscaledColors.forEach((rgb, score) -\u003e unscaled.merge(rgb, score, Double::sum));\n\t\tfinal Double scale \u003d unscaled.values().stream().mapToDouble(d -\u003e d).sum();\n\t\treturn unscaled.entrySet().stream()\n\t\t\t.collect(Collectors.toMap(Map.Entry::getKey, e -\u003e e.getValue() / scale));\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\colors\\ColorScorer.java"},{"fileName":"GenderItemColors.java","content":"package eq.uirs.fashionscape.colors;\n\nimport com.google.gson.annotations.SerializedName;\nimport lombok.Value;\n\n@Value\npublic class GenderItemColors\n{\n\t@SerializedName(\"a\")\n\tpublic ItemColors any;\n\t@SerializedName(\"m\")\n\tpublic ItemColors masc;\n\t@SerializedName(\"f\")\n\tpublic ItemColors fem;\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\colors\\GenderItemColors.java"},{"fileName":"ItemColorInfo.java","content":"package eq.uirs.fashionscape.colors;\n\nimport lombok.Value;\n\n@Value\npublic class ItemColorInfo\n{\n\tpublic int rgb;\n\tpublic double pct;\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\colors\\ItemColorInfo.java"},{"fileName":"ItemColors.java","content":"package eq.uirs.fashionscape.colors;\n\nimport com.google.gson.JsonArray;\nimport com.google.gson.JsonDeserializationContext;\nimport com.google.gson.JsonDeserializer;\nimport com.google.gson.JsonElement;\nimport com.google.gson.JsonParseException;\nimport java.lang.reflect.Type;\nimport java.util.ArrayList;\nimport java.util.List;\nimport lombok.Value;\n\n@Value\npublic class ItemColors\n{\n\tpublic List\u003cItemColorInfo\u003e itemColorInfo;\n\n\tpublic static class Deserializer implements JsonDeserializer\u003cItemColors\u003e\n\t{\n\t\t@Override\n\t\tpublic ItemColors deserialize(JsonElement jsonElement, Type type,\n\t\t\t\t\t\t\t\t\t  JsonDeserializationContext jsonDeserializationContext) throws JsonParseException\n\t\t{\n\t\t\tList\u003cItemColorInfo\u003e info \u003d new ArrayList\u003c\u003e();\n\t\t\tJsonArray outer \u003d jsonElement.getAsJsonArray();\n\t\t\tJsonArray rgbs \u003d outer.get(0).getAsJsonArray();\n\t\t\tJsonArray pcts \u003d outer.get(1).getAsJsonArray();\n\t\t\tfor (int i \u003d 0; i \u003c rgbs.size(); i++)\n\t\t\t{\n\t\t\t\tint rgb \u003d rgbs.get(i).getAsInt();\n\t\t\t\tdouble pct \u003d pcts.get(i).getAsDouble();\n\t\t\t\tinfo.add(new ItemColorInfo(rgb, pct));\n\t\t\t}\n\t\t\treturn new ItemColors(info);\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\colors\\ItemColors.java"},{"fileName":"CompoundSwap.java","content":"package eq.uirs.fashionscape.core;\n\nimport eq.uirs.fashionscape.data.kit.JawIcon;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.stream.Collectors;\nimport javax.annotation.Nullable;\nimport lombok.Getter;\nimport lombok.NonNull;\nimport net.runelite.api.kit.KitType;\n\n/**\n * Several slots are tightly coupled in their interactions. This groups them together so\n * that they\u0027re submitted for swapping at the same time.\n */\n@Getter\npublic class CompoundSwap\n{\n\t@NonNull\n\tprivate final Type type;\n\n\t@NonNull\n\tprivate final Map\u003cKitType, Integer\u003e equipmentIds;\n\n\t@Nullable\n\tprivate final JawIcon icon;\n\n\tpublic static List\u003cCompoundSwap\u003e fromMap(Map\u003cKitType, Integer\u003e equipmentIds, @Nullable JawIcon icon)\n\t{\n\t\tList\u003cCompoundSwap\u003e result \u003d new ArrayList\u003c\u003e();\n\t\tMap\u003cType, Map\u003cKitType, Integer\u003e\u003e grouping \u003d equipmentIds.entrySet().stream()\n\t\t\t.collect(Collectors.groupingBy(\n\t\t\t\te -\u003e Type.fromSlot(e.getKey()),\n\t\t\t\tCollectors.toMap(Map.Entry::getKey, Map.Entry::getValue)));\n\t\tMap\u003cKitType, Integer\u003e heads \u003d grouping.get(Type.HEAD) !\u003d null ? grouping.get(Type.HEAD) : new HashMap\u003c\u003e();\n\t\tif (!heads.isEmpty() || icon !\u003d null)\n\t\t{\n\t\t\tresult.add(head(heads.get(KitType.HEAD), heads.get(KitType.HAIR), heads.get(KitType.JAW), icon));\n\t\t}\n\t\tMap\u003cKitType, Integer\u003e torsos \u003d grouping.get(Type.TORSO);\n\t\tif (torsos !\u003d null \u0026\u0026 !torsos.isEmpty())\n\t\t{\n\t\t\tresult.add(torso(torsos.get(KitType.TORSO), torsos.get(KitType.ARMS)));\n\t\t}\n\t\tMap\u003cKitType, Integer\u003e weapons \u003d grouping.get(Type.WEAPONS);\n\t\tif (weapons !\u003d null \u0026\u0026 !weapons.isEmpty())\n\t\t{\n\t\t\tresult.add(weapons(weapons.get(KitType.WEAPON), weapons.get(KitType.SHIELD)));\n\t\t}\n\t\tMap\u003cKitType, Integer\u003e singles \u003d grouping.get(Type.SINGLE);\n\t\tif (singles !\u003d null \u0026\u0026 !singles.isEmpty())\n\t\t{\n\t\t\tsingles.forEach((slot, equipId) -\u003e result.add(single(slot, equipId)));\n\t\t}\n\t\treturn result;\n\t}\n\n\tenum Type\n\t{\n\t\t// hair jaw head icon\n\t\tHEAD,\n\t\t// torso arms\n\t\tTORSO,\n\t\t// weapon shield\n\t\tWEAPONS,\n\t\t// any one slot\n\t\tSINGLE;\n\n\t\tprivate static Type fromSlot(KitType slot)\n\t\t{\n\t\t\tswitch (slot)\n\t\t\t{\n\t\t\t\tcase HEAD:\n\t\t\t\tcase HAIR:\n\t\t\t\tcase JAW:\n\t\t\t\t\treturn HEAD;\n\t\t\t\tcase TORSO:\n\t\t\t\tcase ARMS:\n\t\t\t\t\treturn TORSO;\n\t\t\t\tcase WEAPON:\n\t\t\t\tcase SHIELD:\n\t\t\t\t\treturn WEAPONS;\n\t\t\t\tdefault:\n\t\t\t\t\treturn SINGLE;\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic CompoundSwap single(KitType slot, Integer equipmentId)\n\t{\n\t\tswitch (slot)\n\t\t{\n\t\t\tcase HEAD:\n\t\t\t\treturn head(equipmentId, null, null, null);\n\t\t\tcase HAIR:\n\t\t\t\treturn head(null, equipmentId, null, null);\n\t\t\tcase JAW:\n\t\t\t\treturn head(null, null, equipmentId, null);\n\t\t\tcase TORSO:\n\t\t\t\treturn torso(equipmentId, null);\n\t\t\tcase ARMS:\n\t\t\t\treturn torso(null, equipmentId);\n\t\t\tcase WEAPON:\n\t\t\t\treturn weapons(equipmentId, null);\n\t\t\tcase SHIELD:\n\t\t\t\treturn weapons(null, equipmentId);\n\t\t}\n\t\tMap\u003cKitType, Integer\u003e map \u003d new HashMap\u003c\u003e();\n\t\tmap.put(slot, equipmentId);\n\t\treturn new CompoundSwap(Type.SINGLE, map, null);\n\t}\n\n\tpublic static CompoundSwap fromIcon(JawIcon icon)\n\t{\n\t\treturn new CompoundSwap(Type.HEAD, new HashMap\u003c\u003e(), icon);\n\t}\n\n\tstatic CompoundSwap head(Integer headEquipId, Integer hairEquipId, Integer jawEquipId, JawIcon icon)\n\t{\n\t\tMap\u003cKitType, Integer\u003e map \u003d new HashMap\u003c\u003e();\n\t\tmap.put(KitType.HEAD, headEquipId);\n\t\tmap.put(KitType.HAIR, hairEquipId);\n\t\tmap.put(KitType.JAW, jawEquipId);\n\t\treturn new CompoundSwap(Type.HEAD, map, icon);\n\t}\n\n\tstatic CompoundSwap torso(Integer torsoEquipId, Integer armsEquipId)\n\t{\n\t\tMap\u003cKitType, Integer\u003e map \u003d new HashMap\u003c\u003e();\n\t\tmap.put(KitType.TORSO, torsoEquipId);\n\t\tmap.put(KitType.ARMS, armsEquipId);\n\t\treturn new CompoundSwap(Type.TORSO, map, null);\n\t}\n\n\tstatic CompoundSwap weapons(Integer weaponEquipId, Integer shieldEquipId)\n\t{\n\t\tMap\u003cKitType, Integer\u003e map \u003d new HashMap\u003c\u003e();\n\t\tmap.put(KitType.WEAPON, weaponEquipId);\n\t\tmap.put(KitType.SHIELD, shieldEquipId);\n\t\treturn new CompoundSwap(Type.WEAPONS, map, null);\n\t}\n\n\tprivate CompoundSwap(Type type, Map\u003cKitType, Integer\u003e equipmentIds, JawIcon icon)\n\t{\n\t\tthis.type \u003d type;\n\t\tthis.equipmentIds \u003d equipmentIds;\n\t\tthis.icon \u003d icon;\n\t}\n\n\t/**\n\t * @return the sole equipment id for this swap request. this will only make sense for SINGLE type swaps.\n\t */\n\tInteger getEquipmentId()\n\t{\n\t\treturn equipmentIds.values().stream().findAny().orElse(null);\n\t}\n\n\t/**\n\t * @return the sole kit slot for this swap request. this will only make sense for SINGLE type swaps.\n\t */\n\tKitType getKitType()\n\t{\n\t\treturn equipmentIds.keySet().stream().findAny().orElse(null);\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\CompoundSwap.java"},{"fileName":"ColorChanged.java","content":"package eq.uirs.fashionscape.core.event;\n\nimport eq.uirs.fashionscape.data.color.ColorType;\nimport lombok.EqualsAndHashCode;\nimport lombok.Value;\n\n@EqualsAndHashCode(callSuper \u003d false)\n@Value\npublic class ColorChanged extends SwapEvent\n{\n\tColorType type;\n\t// will be null if color reverted\n\tInteger colorId;\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\event\\ColorChanged.java"},{"fileName":"ColorChangedListener.java","content":"package eq.uirs.fashionscape.core.event;\n\nimport java.util.function.Consumer;\n\npublic class ColorChangedListener extends SwapEventListener\u003cColorChanged\u003e\n{\n\tpublic ColorChangedListener(Consumer\u003cColorChanged\u003e consumer)\n\t{\n\t\tsuper(consumer);\n\t}\n\n\t@Override\n\tClass\u003cColorChanged\u003e getEventClass()\n\t{\n\t\treturn ColorChanged.class;\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\event\\ColorChangedListener.java"},{"fileName":"ColorLockChanged.java","content":"package eq.uirs.fashionscape.core.event;\n\nimport eq.uirs.fashionscape.data.color.ColorType;\nimport lombok.EqualsAndHashCode;\nimport lombok.Value;\n\n@EqualsAndHashCode(callSuper \u003d false)\n@Value\npublic class ColorLockChanged extends SwapEvent\n{\n\tColorType type;\n\tboolean isLocked;\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\event\\ColorLockChanged.java"},{"fileName":"ColorLockChangedListener.java","content":"package eq.uirs.fashionscape.core.event;\n\nimport java.util.function.Consumer;\n\npublic class ColorLockChangedListener extends SwapEventListener\u003cColorLockChanged\u003e\n{\n\tpublic ColorLockChangedListener(Consumer\u003cColorLockChanged\u003e consumer)\n\t{\n\t\tsuper(consumer);\n\t}\n\n\t@Override\n\tClass\u003cColorLockChanged\u003e getEventClass()\n\t{\n\t\treturn ColorLockChanged.class;\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\event\\ColorLockChangedListener.java"},{"fileName":"IconChanged.java","content":"package eq.uirs.fashionscape.core.event;\n\nimport eq.uirs.fashionscape.data.kit.JawIcon;\nimport lombok.EqualsAndHashCode;\nimport lombok.Value;\n\n@EqualsAndHashCode(callSuper \u003d false)\n@Value\npublic class IconChanged extends SwapEvent\n{\n\tJawIcon icon;\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\event\\IconChanged.java"},{"fileName":"IconChangedListener.java","content":"package eq.uirs.fashionscape.core.event;\n\nimport java.util.function.Consumer;\n\npublic class IconChangedListener extends SwapEventListener\u003cIconChanged\u003e\n{\n\tpublic IconChangedListener(Consumer\u003cIconChanged\u003e consumer)\n\t{\n\t\tsuper(consumer);\n\t}\n\n\t@Override\n\tClass\u003cIconChanged\u003e getEventClass()\n\t{\n\t\treturn IconChanged.class;\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\event\\IconChangedListener.java"},{"fileName":"IconLockChanged.java","content":"package eq.uirs.fashionscape.core.event;\n\nimport lombok.EqualsAndHashCode;\nimport lombok.Value;\n\n@EqualsAndHashCode(callSuper \u003d false)\n@Value\npublic class IconLockChanged extends SwapEvent\n{\n\tboolean isLocked;\n}\n\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\event\\IconLockChanged.java"},{"fileName":"IconLockChangedListener.java","content":"package eq.uirs.fashionscape.core.event;\n\nimport java.util.function.Consumer;\n\npublic class IconLockChangedListener extends SwapEventListener\u003cIconLockChanged\u003e\n{\n\tpublic IconLockChangedListener(Consumer\u003cIconLockChanged\u003e consumer)\n\t{\n\t\tsuper(consumer);\n\t}\n\n\t@Override\n\tClass\u003cIconLockChanged\u003e getEventClass()\n\t{\n\t\treturn IconLockChanged.class;\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\event\\IconLockChangedListener.java"},{"fileName":"ItemChanged.java","content":"package eq.uirs.fashionscape.core.event;\n\nimport lombok.EqualsAndHashCode;\nimport lombok.Value;\nimport net.runelite.api.kit.KitType;\n\n@EqualsAndHashCode(callSuper \u003d false)\n@Value\npublic class ItemChanged extends SwapEvent\n{\n\tKitType slot;\n\t// will be null if a virtual item has been removed, and -1 when item is hidden (over a real item)\n\tInteger itemId;\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\event\\ItemChanged.java"},{"fileName":"ItemChangedListener.java","content":"package eq.uirs.fashionscape.core.event;\n\nimport java.util.function.Consumer;\n\npublic class ItemChangedListener extends SwapEventListener\u003cItemChanged\u003e\n{\n\tpublic ItemChangedListener(Consumer\u003cItemChanged\u003e consumer)\n\t{\n\t\tsuper(consumer);\n\t}\n\n\t@Override\n\tClass\u003cItemChanged\u003e getEventClass()\n\t{\n\t\treturn ItemChanged.class;\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\event\\ItemChangedListener.java"},{"fileName":"KitChanged.java","content":"package eq.uirs.fashionscape.core.event;\n\nimport lombok.EqualsAndHashCode;\nimport lombok.Value;\nimport net.runelite.api.kit.KitType;\n\n@EqualsAndHashCode(callSuper \u003d false)\n@Value\npublic class KitChanged extends SwapEvent\n{\n\tKitType slot;\n\t// will be null if kit removed\n\tInteger kitId;\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\event\\KitChanged.java"},{"fileName":"KitChangedListener.java","content":"package eq.uirs.fashionscape.core.event;\n\nimport java.util.function.Consumer;\n\npublic class KitChangedListener extends SwapEventListener\u003cKitChanged\u003e\n{\n\tpublic KitChangedListener(Consumer\u003cKitChanged\u003e consumer)\n\t{\n\t\tsuper(consumer);\n\t}\n\n\t@Override\n\tClass\u003cKitChanged\u003e getEventClass()\n\t{\n\t\treturn KitChanged.class;\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\event\\KitChangedListener.java"},{"fileName":"KnownKitChanged.java","content":"package eq.uirs.fashionscape.core.event;\n\nimport lombok.EqualsAndHashCode;\nimport lombok.Value;\nimport net.runelite.api.kit.KitType;\n\n/**\n * A `true` event means that fallback kit is used in a swap (instead of the player\u0027s known kit).\n * A `false` event means that the kit is definitively known by the plugin.\n */\n@EqualsAndHashCode(callSuper \u003d false)\n@Value\npublic class KnownKitChanged extends SwapEvent\n{\n\tboolean unknown;\n\tKitType slot;\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\event\\KnownKitChanged.java"},{"fileName":"KnownKitChangedListener.java","content":"package eq.uirs.fashionscape.core.event;\n\nimport java.util.function.Consumer;\n\npublic class KnownKitChangedListener extends SwapEventListener\u003cKnownKitChanged\u003e\n{\n\tpublic KnownKitChangedListener(Consumer\u003cKnownKitChanged\u003e consumer)\n\t{\n\t\tsuper(consumer);\n\t}\n\n\t@Override\n\tClass\u003cKnownKitChanged\u003e getEventClass()\n\t{\n\t\treturn KnownKitChanged.class;\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\event\\KnownKitChangedListener.java"},{"fileName":"LockChanged.java","content":"package eq.uirs.fashionscape.core.event;\n\nimport lombok.EqualsAndHashCode;\nimport lombok.Value;\nimport net.runelite.api.kit.KitType;\n\n@EqualsAndHashCode(callSuper \u003d false)\n@Value\npublic class LockChanged extends SwapEvent\n{\n\tKitType slot;\n\tboolean isLocked;\n\tType type;\n\n\tpublic enum Type\n\t{\n\t\tITEM,\n\t\tKIT,\n\t\tBOTH\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\event\\LockChanged.java"},{"fileName":"LockChangedListener.java","content":"package eq.uirs.fashionscape.core.event;\n\nimport java.util.function.Consumer;\n\npublic class LockChangedListener extends SwapEventListener\u003cLockChanged\u003e\n{\n\tpublic LockChangedListener(Consumer\u003cLockChanged\u003e consumer)\n\t{\n\t\tsuper(consumer);\n\t}\n\n\t@Override\n\tClass\u003cLockChanged\u003e getEventClass()\n\t{\n\t\treturn LockChanged.class;\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\event\\LockChangedListener.java"},{"fileName":"SwapEvent.java","content":"package eq.uirs.fashionscape.core.event;\n\npublic abstract class SwapEvent\n{\n\tpublic String getKey()\n\t{\n\t\treturn this.getClass().getName();\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\event\\SwapEvent.java"},{"fileName":"SwapEventListener.java","content":"package eq.uirs.fashionscape.core.event;\n\nimport java.util.function.Consumer;\nimport lombok.RequiredArgsConstructor;\n\n@RequiredArgsConstructor\npublic abstract class SwapEventListener\u003cT extends SwapEvent\u003e\n{\n\tprivate final Consumer\u003cT\u003e consumer;\n\n\tabstract Class\u003cT\u003e getEventClass();\n\n\tpublic String getKey()\n\t{\n\t\treturn getEventClass().getName();\n\t}\n\n\t// onEvent is only ever called for events of type T\n\t@SuppressWarnings(\"unchecked\")\n\tpublic void onEvent(SwapEvent event)\n\t{\n\t\tconsumer.accept((T) event);\n\t}\n}\n\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\event\\SwapEventListener.java"},{"fileName":"Exporter.java","content":"package eq.uirs.fashionscape.core;\n\nimport eq.uirs.fashionscape.data.color.ColorType;\nimport eq.uirs.fashionscape.data.kit.JawIcon;\nimport eq.uirs.fashionscape.data.kit.JawKit;\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.io.PrintWriter;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Comparator;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\nimport java.util.stream.Collectors;\nimport java.util.stream.IntStream;\nimport javax.annotation.Nullable;\nimport javax.inject.Inject;\nimport javax.inject.Provider;\nimport javax.inject.Singleton;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.PlayerComposition;\nimport net.runelite.api.kit.KitType;\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.chat.ChatColorType;\nimport net.runelite.client.chat.ChatMessageBuilder;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.chat.QueuedMessage;\nimport net.runelite.client.game.ItemManager;\n\n/**\n * For saving/loading fashionscape to local files\n */\n@Slf4j\n@Singleton\n@RequiredArgsConstructor(onConstructor_ \u003d {@Inject})\npublic class Exporter\n{\n\tpublic static final File OUTFITS_DIR \u003d new File(RuneLite.RUNELITE_DIR, \"outfits\");\n\n\tprivate static final Pattern PROFILE_PATTERN \u003d Pattern.compile(\"^(\\\\w+):(-?\\\\d+).*\");\n\tprivate static final String KIT_SUFFIX \u003d \"_KIT\";\n\tprivate static final String COLOR_SUFFIX \u003d \"_COLOR\";\n\tprivate static final String ICON_KEY \u003d \"ICON\";\n\n\tprivate final ClientThread clientThread;\n\tprivate final ChatMessageManager chatMessageManager;\n\tprivate final ItemManager itemManager;\n\n\tprivate final SavedSwaps savedSwaps;\n\tprivate final Provider\u003cFashionManager\u003e fashionManagerProvider;\n\n\t// this should only be called from the client thread\n\tpublic List\u003cString\u003e stringifySwaps()\n\t{\n\t\tSet\u003cMap.Entry\u003cKitType, Integer\u003e\u003e itemEntries \u003d new HashSet\u003c\u003e(savedSwaps.hiddenSlotEntries());\n\t\titemEntries.addAll(savedSwaps.itemEntries());\n\t\tList\u003cString\u003e items \u003d itemEntries.stream()\n\t\t\t.sorted(Comparator.comparingInt(Map.Entry::getValue))\n\t\t\t.map(e -\u003e {\n\t\t\t\tKitType slot \u003d e.getKey();\n\t\t\t\tint itemId \u003d e.getValue();\n\t\t\t\tif (itemId \u003d\u003d 0)\n\t\t\t\t{\n\t\t\t\t\treturn slot.name() + \":-1 (Nothing)\";\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tString itemName \u003d itemManager.getItemComposition(itemId).getMembersName();\n\t\t\t\t\treturn slot.name() + \":\" + itemId + \" (\" + itemName + \")\";\n\t\t\t\t}\n\t\t\t})\n\t\t\t.collect(Collectors.toList());\n\t\tList\u003cString\u003e kits \u003d savedSwaps.kitEntries().stream()\n\t\t\t.sorted(Comparator.comparingInt(Map.Entry::getValue))\n\t\t\t.map(e -\u003e {\n\t\t\t\tKitType slot \u003d e.getKey();\n\t\t\t\tInteger kitId \u003d e.getValue();\n\t\t\t\tString kitName \u003d FashionManager.KIT_ID_TO_KIT.get(kitId).getDisplayName();\n\t\t\t\treturn slot.name() + KIT_SUFFIX + \":\" + kitId + \" (\" + kitName + \")\";\n\t\t\t})\n\t\t\t.collect(Collectors.toList());\n\t\tList\u003cString\u003e colors \u003d savedSwaps.colorEntries().stream()\n\t\t\t.sorted(Comparator.comparingInt(Map.Entry::getValue))\n\t\t\t.map(e -\u003e {\n\t\t\t\tColorType type \u003d e.getKey();\n\t\t\t\tint colorId \u003d e.getValue();\n\t\t\t\treturn Arrays.stream(type.getColorables())\n\t\t\t\t\t.filter(c -\u003e c.getColorId(type) \u003d\u003d colorId)\n\t\t\t\t\t.findFirst()\n\t\t\t\t\t.map(c -\u003e type.name() + COLOR_SUFFIX + \":\" + colorId + \" (\" + c.getDisplayName() + \")\")\n\t\t\t\t\t.orElse(\"\");\n\t\t\t})\n\t\t\t.collect(Collectors.toList());\n\t\tList\u003cString\u003e icons \u003d new ArrayList\u003c\u003e();\n\t\tJawIcon icon \u003d savedSwaps.getSwappedIcon();\n\t\tif (savedSwaps.containsIcon())\n\t\t{\n\t\t\ticons.add(ICON_KEY + \":\" + icon.getId() + \" (\" + icon.getDisplayName() + \")\");\n\t\t}\n\t\titems.addAll(kits);\n\t\titems.addAll(colors);\n\t\titems.addAll(icons);\n\t\treturn items;\n\t}\n\n\tpublic void parseImports(List\u003cString\u003e allLines)\n\t{\n\t\tMap\u003cKitType, Integer\u003e itemImports \u003d new HashMap\u003c\u003e();\n\t\tMap\u003cKitType, Integer\u003e kitImports \u003d new HashMap\u003c\u003e();\n\t\tMap\u003cColorType, Integer\u003e colorImports \u003d new HashMap\u003c\u003e();\n\t\tJawIcon icon \u003d null;\n\t\tSet\u003cKitType\u003e removes \u003d new HashSet\u003c\u003e();\n\t\tfor (String line : allLines)\n\t\t{\n\t\t\tif (line.trim().isEmpty())\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tMatcher matcher \u003d PROFILE_PATTERN.matcher(line);\n\t\t\tif (matcher.matches())\n\t\t\t{\n\t\t\t\tString slotStr \u003d matcher.group(1);\n\t\t\t\t// could be item id, kit id, or color id\n\t\t\t\tint id \u003d Integer.parseInt(matcher.group(2));\n\t\t\t\tKitType itemSlot \u003d itemSlotMatch(slotStr);\n\t\t\t\tKitType kitSlot \u003d kitSlotMatch(slotStr);\n\t\t\t\tColorType colorType \u003d colorSlotMatch(slotStr);\n\t\t\t\tif (itemSlot !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tif (id \u003c\u003d 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tremoves.add(itemSlot);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\titemImports.put(itemSlot, id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (kitSlot !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tkitImports.put(kitSlot, id);\n\t\t\t\t}\n\t\t\t\telse if (colorType !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tcolorImports.put(colorType, id);\n\t\t\t\t}\n\t\t\t\telse if (slotStr.equals(ICON_KEY))\n\t\t\t\t{\n\t\t\t\t\ticon \u003d JawIcon.fromId(id);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tsendHighlightedMessage(\"Could not import line: \" + line);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// if not explicitly included, items without data should be explicitly hidden\n\t\tFashionManager.ALLOWS_NOTHING.forEach(slot -\u003e {\n\t\t\tif (!itemImports.containsKey(slot))\n\t\t\t{\n\t\t\t\tremoves.add(slot);\n\t\t\t}\n\t\t});\n\t\tif (!itemImports.isEmpty() || !kitImports.isEmpty() || !colorImports.isEmpty())\n\t\t{\n\t\t\tfashionManagerProvider.get().importSwaps(itemImports, kitImports, colorImports, icon, removes);\n\t\t}\n\t}\n\n\t@Nullable\n\tprivate KitType itemSlotMatch(String name)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn KitType.valueOf(name);\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t@Nullable\n\tprivate KitType kitSlotMatch(String name)\n\t{\n\t\ttry\n\t\t{\n\t\t\tString k \u003d name.replace(KIT_SUFFIX, \"\");\n\t\t\treturn KitType.valueOf(k);\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t@Nullable\n\tprivate ColorType colorSlotMatch(String name)\n\t{\n\t\ttry\n\t\t{\n\t\t\tString c \u003d name.replace(COLOR_SUFFIX, \"\");\n\t\t\treturn ColorType.valueOf(c);\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tpublic void importPlayer(PlayerComposition other)\n\t{\n\t\tint[] equipmentIds \u003d other.getEquipmentIds();\n\t\tKitType[] slots \u003d KitType.values();\n\t\tMap\u003cKitType, Integer\u003e equipIdImports \u003d IntStream.range(0, equipmentIds.length).boxed()\n\t\t\t.collect(Collectors.toMap(i -\u003e slots[i], i -\u003e equipmentIds[i]));\n\n\t\tMap\u003cKitType, Integer\u003e itemImports \u003d equipIdImports.entrySet().stream()\n\t\t\t.filter(e -\u003e e.getValue() \u003e\u003d FashionManager.ITEM_OFFSET)\n\t\t\t.collect(Collectors.toMap(Map.Entry::getKey, e -\u003e e.getValue() - FashionManager.ITEM_OFFSET));\n\t\tMap\u003cKitType, Integer\u003e kitImports \u003d equipIdImports.entrySet().stream()\n\t\t\t.filter(e -\u003e e.getValue() \u003e\u003d FashionManager.KIT_OFFSET \u0026\u0026 e.getValue() \u003c FashionManager.ITEM_OFFSET)\n\t\t\t.collect(Collectors.toMap(Map.Entry::getKey, e -\u003e e.getValue() - FashionManager.KIT_OFFSET));\n\t\tSet\u003cKitType\u003e removals \u003d equipIdImports.entrySet().stream()\n\t\t\t.filter(e -\u003e e.getValue() \u003c\u003d 0)\n\t\t\t.map(Map.Entry::getKey)\n\t\t\t.collect(Collectors.toSet());\n\n\t\tint[] colors \u003d other.getColors();\n\t\tColorType[] types \u003d ColorType.values();\n\t\tMap\u003cColorType, Integer\u003e colorImports \u003d IntStream.range(0, colors.length).boxed()\n\t\t\t.collect(Collectors.toMap(i -\u003e types[i], i -\u003e colors[i]));\n\n\t\tJawIcon icon \u003d null;\n\t\tInteger jawItemId \u003d itemImports.get(KitType.JAW);\n\t\tif (jawItemId !\u003d null)\n\t\t{\n\t\t\ticon \u003d JawKit.iconFromItemId(jawItemId);\n\t\t\titemImports.remove(KitType.JAW);\n\t\t}\n\n\t\tif (!itemImports.isEmpty() || !kitImports.isEmpty() || !colorImports.isEmpty() || !removals.isEmpty())\n\t\t{\n\t\t\tfashionManagerProvider.get().importSwaps(itemImports, kitImports, colorImports, icon, removals);\n\t\t}\n\t}\n\n\tpublic void export(File selected)\n\t{\n\t\tclientThread.invokeLater(() -\u003e {\n\t\t\ttry (PrintWriter out \u003d new PrintWriter(selected))\n\t\t\t{\n\t\t\t\tList\u003cString\u003e exports \u003d stringifySwaps();\n\t\t\t\tfor (String line : exports)\n\t\t\t\t{\n\t\t\t\t\tout.println(line);\n\t\t\t\t}\n\t\t\t\tsendHighlightedMessage(\"Saved fashionscape to \" + selected.getName());\n\t\t\t}\n\t\t\tcatch (FileNotFoundException e)\n\t\t\t{\n\t\t\t\tlog.warn(\"Could not find selected file for swaps export\", e);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate void sendHighlightedMessage(String message)\n\t{\n\t\tString chatMessage \u003d new ChatMessageBuilder()\n\t\t\t.append(ChatColorType.HIGHLIGHT)\n\t\t\t.append(message)\n\t\t\t.build();\n\n\t\tchatMessageManager.queue(QueuedMessage.builder()\n\t\t\t.type(ChatMessageType.CONSOLE)\n\t\t\t.runeLiteFormattedMessage(chatMessage)\n\t\t\t.build());\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\Exporter.java"},{"fileName":"FashionManager.java","content":"package eq.uirs.fashionscape.core;\n\nimport com.google.common.collect.BiMap;\nimport com.google.common.collect.ImmutableList;\nimport eq.uirs.fashionscape.core.event.SwapEvent;\nimport eq.uirs.fashionscape.core.event.SwapEventListener;\nimport eq.uirs.fashionscape.core.randomizer.Randomizer;\nimport eq.uirs.fashionscape.data.anim.IdleAnimationID;\nimport eq.uirs.fashionscape.data.anim.ItemInteractions;\nimport eq.uirs.fashionscape.data.color.BootsColor;\nimport eq.uirs.fashionscape.data.color.ClothingColor;\nimport eq.uirs.fashionscape.data.color.ColorType;\nimport eq.uirs.fashionscape.data.color.Colorable;\nimport eq.uirs.fashionscape.data.color.HairColor;\nimport eq.uirs.fashionscape.data.color.SkinColor;\nimport eq.uirs.fashionscape.data.kit.JawIcon;\nimport eq.uirs.fashionscape.data.kit.JawKit;\nimport eq.uirs.fashionscape.data.kit.Kit;\nimport java.util.Arrays;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Objects;\nimport java.util.Set;\nimport java.util.function.BiConsumer;\nimport java.util.function.BiFunction;\nimport java.util.function.Consumer;\nimport java.util.function.Function;\nimport java.util.function.Supplier;\nimport java.util.stream.Collectors;\nimport javax.annotation.Nonnull;\nimport javax.annotation.Nullable;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport lombok.Getter;\nimport lombok.Setter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Item;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.api.ItemContainer;\nimport net.runelite.api.Player;\nimport net.runelite.api.PlayerComposition;\nimport net.runelite.api.gameval.InventoryID;\nimport net.runelite.api.kit.KitType;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.game.ItemEquipmentStats;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.game.ItemStats;\n\n/**\n * Singleton class that maintains the memory and logic of swapping items through the plugin\n */\n@Singleton\n@Slf4j\npublic class FashionManager\n{\n\tpublic static final Map\u003cInteger, Kit\u003e KIT_ID_TO_KIT \u003d new HashMap\u003c\u003e();\n\t// item-only slots that can always contain an equipment id of 0\n\tpublic static final List\u003cKitType\u003e ALLOWS_NOTHING \u003d ImmutableList.of(KitType.HEAD, KitType.CAPE, KitType.AMULET,\n\t\tKitType.WEAPON, KitType.SHIELD);\n\tpublic static final int ITEM_OFFSET \u003d PlayerComposition.ITEM_OFFSET;\n\tpublic static final int KIT_OFFSET \u003d PlayerComposition.KIT_OFFSET;\n\n\tprivate static final List\u003cKitType\u003e NEVER_ZERO_SLOTS \u003d ImmutableList.of(KitType.TORSO, KitType.LEGS,\n\t\tKitType.HAIR, KitType.HANDS, KitType.BOOTS, KitType.JAW);\n\n\tstatic\n\t{\n\t\tfor (KitType slot : KitType.values())\n\t\t{\n\t\t\tfor (Kit value : Kit.allInSlot(slot, true))\n\t\t\t{\n\t\t\t\tInteger mascId \u003d value.getKitId(0);\n\t\t\t\tif (mascId !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tKIT_ID_TO_KIT.put(mascId, value);\n\t\t\t\t}\n\t\t\t\tInteger femId \u003d value.getKitId(1);\n\t\t\t\tif (femId !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tKIT_ID_TO_KIT.put(femId, value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t@Inject\n\tprivate ItemManager itemManager;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate ChatMessageManager chatMessageManager;\n\n\t@Inject\n\tprivate SavedSwaps savedSwaps;\n\n\t@Inject\n\tprivate Randomizer randomizer;\n\n\t@Getter\n\tprivate final SwapDiffHistory swapDiffHistory \u003d new SwapDiffHistory(s -\u003e this.restore(s, true));\n\n\t@Getter\n\t@Setter\n\tprivate Integer gender;\n\tprivate String lastKnownPlayerName \u003d null;\n\tprivate SwapDiff hoverSwapDiff;\n\t// slot -\u003e override equipment id, used to disable the plugin\u0027s functionality per slot\n\tprivate final Map\u003cKitType, Integer\u003e disabledSlots \u003d new HashMap\u003c\u003e();\n\t// idle anim id to switch to when weapon slot is disabled (sometimes sourced from non-weapons like minecart)\n\tprivate Integer disabledAnimationId \u003d null;\n\n\tpublic void startUp()\n\t{\n\t\tdoPreRefreshCheck();\n\t\trefreshAllSwaps();\n\t}\n\n\tpublic void shutDown()\n\t{\n\t\trevertSwaps(true, true);\n\t\tsavedSwaps.removeListeners();\n\t\tswapDiffHistory.removeListeners();\n\t\thoverSwapDiff \u003d null;\n\t}\n\n\tpublic void onPlayerChanged()\n\t{\n\t\tdoPreRefreshCheck();\n\t\tsavedSwaps.loadFromConfig();\n\t\trefreshAllSwaps();\n\t}\n\n\tpublic void addEventListener(SwapEventListener\u003c? extends SwapEvent\u003e listener)\n\t{\n\t\tsavedSwaps.addEventListener(listener);\n\t}\n\n\tpublic void addUndoQueueChangeListener(Consumer\u003cInteger\u003e listener)\n\t{\n\t\tswapDiffHistory.addUndoQueueChangeListener(listener);\n\t}\n\n\tpublic void addRedoQueueChangeListener(Consumer\u003cInteger\u003e listener)\n\t{\n\t\tswapDiffHistory.addRedoQueueChangeListener(listener);\n\t}\n\n\tpublic boolean isSlotLocked(KitType slot)\n\t{\n\t\treturn savedSwaps.isSlotLocked(slot);\n\t}\n\n\tpublic boolean isKitLocked(KitType slot)\n\t{\n\t\treturn savedSwaps.isKitLocked(slot);\n\t}\n\n\tpublic boolean isItemLocked(KitType slot)\n\t{\n\t\treturn savedSwaps.isItemLocked(slot);\n\t}\n\n\tpublic boolean isColorLocked(ColorType type)\n\t{\n\t\treturn savedSwaps.isColorLocked(type);\n\t}\n\n\tpublic boolean isIconLocked()\n\t{\n\t\treturn savedSwaps.isIconLocked();\n\t}\n\n\tpublic void toggleItemLocked(KitType slot)\n\t{\n\t\tsavedSwaps.toggleItemLocked(slot);\n\t}\n\n\tpublic void toggleKitLocked(KitType slot)\n\t{\n\t\tsavedSwaps.toggleKitLocked(slot);\n\t}\n\n\tpublic void toggleColorLocked(ColorType type)\n\t{\n\t\tsavedSwaps.toggleColorLocked(type);\n\t}\n\n\tpublic void toggleIconLocked()\n\t{\n\t\tsavedSwaps.toggleIconLocked();\n\t}\n\n\t// this should only be called from the client thread\n\tpublic void refreshAllSwaps()\n\t{\n\t\tMap\u003cKitType, Integer\u003e savedEquipmentIds \u003d savedSwaps.itemEntries().stream().collect(\n\t\t\tCollectors.toMap(Map.Entry::getKey, e -\u003e e.getValue() + ITEM_OFFSET)\n\t\t);\n\t\tMap\u003cKitType, Integer\u003e savedKitEquipIds \u003d savedSwaps.kitEntries().stream().collect(\n\t\t\tCollectors.toMap(Map.Entry::getKey, e -\u003e e.getValue() + KIT_OFFSET)\n\t\t);\n\t\tMap\u003cKitType, Integer\u003e hiddenEquipIds \u003d savedSwaps.getHiddenSlots().stream().collect(\n\t\t\tCollectors.toMap(v -\u003e v, v -\u003e 0)\n\t\t);\n\t\tsavedEquipmentIds.putAll(savedKitEquipIds);\n\t\tsavedEquipmentIds.putAll(hiddenEquipIds);\n\t\tfor (CompoundSwap c : CompoundSwap.fromMap(sanitize(savedEquipmentIds), savedSwaps.getSwappedIcon()))\n\t\t{\n\t\t\tswap(c, SwapMode.PREVIEW);\n\t\t}\n\t\tfor (Map.Entry\u003cColorType, Integer\u003e e : savedSwaps.colorEntries())\n\t\t{\n\t\t\tswap(e.getKey(), e.getValue(), SwapMode.PREVIEW);\n\t\t}\n\t}\n\n\t/**\n\t * Undoes the last action performed.\n\t * Can only be called from the client thread.\n\t */\n\tpublic void undoLastSwap()\n\t{\n\t\tif (client.getLocalPlayer() !\u003d null)\n\t\t{\n\t\t\tswapDiffHistory.undoLast();\n\t\t}\n\t}\n\n\tpublic boolean canUndo()\n\t{\n\t\treturn swapDiffHistory.undoSize() \u003e 0;\n\t}\n\n\t/**\n\t * Redoes the last action that was undone.\n\t * Can only be called from the client thread.\n\t */\n\tpublic void redoLastSwap()\n\t{\n\t\tif (client.getLocalPlayer() !\u003d null)\n\t\t{\n\t\t\tswapDiffHistory.redoLast();\n\t\t}\n\t}\n\n\tpublic boolean canRedo()\n\t{\n\t\treturn swapDiffHistory.redoSize() \u003e 0;\n\t}\n\n\t/**\n\t * Check for:\n\t * - player\u0027s gender, match against last known (non-null) gender. if no match, revert and clear all kit swaps\n\t * - player\u0027s real kit ids and real colors so that they can be reverted\n\t * - player\u0027s real icon in the jaw slot (playing Barbarian Assault or Soul Wars)\n\t * - any kit/item ids that should disable swaps (e.g., minecart, magic carpet)\n\t */\n\tpublic void doPreRefreshCheck()\n\t{\n\t\tPlayer player \u003d client.getLocalPlayer();\n\t\tif (player \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tPlayerComposition playerComposition \u003d player.getPlayerComposition();\n\t\tif (playerComposition \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tint gender \u003d playerComposition.getGender();\n\t\tcheckRealKits(gender);\n\t\tthis.gender \u003d gender;\n\t\tif (!Objects.equals(lastKnownPlayerName, player.getName()))\n\t\t{\n\t\t\tsavedSwaps.loadRSProfileConfig();\n\t\t\tlastKnownPlayerName \u003d player.getName();\n\t\t}\n\t\tfor (KitType kitType : KitType.values())\n\t\t{\n\t\t\tInteger kitId \u003d kitIdFor(kitType);\n\t\t\tif (kitId !\u003d null)\n\t\t\t{\n\t\t\t\tif (kitId \u003e\u003d 0 \u0026\u0026 (!savedSwaps.containsSlot(kitType) ||\n\t\t\t\t\t!Objects.equals(savedSwaps.getKit(kitType), kitId)))\n\t\t\t\t{\n\t\t\t\t\tsavedSwaps.putRealKit(kitType, kitId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor (ColorType colorType : ColorType.values())\n\t\t{\n\t\t\tInteger colorId \u003d colorIdFor(colorType);\n\t\t\tif (colorId !\u003d null \u0026\u0026 (!savedSwaps.containsColor(colorType) ||\n\t\t\t\t!Objects.equals(savedSwaps.getColor(colorType), colorId)))\n\t\t\t{\n\t\t\t\tsavedSwaps.putRealColor(colorType, colorId);\n\t\t\t}\n\t\t}\n\t\tint jawEquipId \u003d playerComposition.getEquipmentIds()[KitType.JAW.getIndex()];\n\t\tif (jawEquipId \u003e\u003d ITEM_OFFSET)\n\t\t{\n\t\t\tJawIcon icon \u003d JawKit.iconFromItemId(jawEquipId - ITEM_OFFSET);\n\t\t\tsavedSwaps.putRealIcon(icon);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsavedSwaps.putRealIcon(JawIcon.NOTHING);\n\t\t}\n\t\tint bootKitId \u003d playerComposition.getKitId(KitType.BOOTS);\n\t\tint weaponItemId \u003d playerComposition.getEquipmentIds()[KitType.WEAPON.getIndex()] - ITEM_OFFSET;\n\t\tif (ItemInteractions.DISABLE_BOOT_KITS.contains(bootKitId))\n\t\t{\n\t\t\tdisabledAnimationId \u003d IdleAnimationID.MINECART;\n\t\t\tdisabledSlots.put(KitType.BOOTS, bootKitId + KIT_OFFSET);\n\t\t\tdisabledSlots.put(KitType.WEAPON, 0);\n\t\t\tdisabledSlots.put(KitType.SHIELD, 0);\n\t\t}\n\t\telse if (ItemInteractions.DISABLE_WEAPONS.contains(weaponItemId))\n\t\t{\n\t\t\tdisabledSlots.put(KitType.WEAPON, weaponItemId + ITEM_OFFSET);\n\t\t\tdisabledSlots.put(KitType.SHIELD, 0);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdisabledAnimationId \u003d null;\n\t\t\tdisabledSlots.clear();\n\t\t}\n\t\trefreshDisabledSlots();\n\t}\n\n\tprivate void checkRealKits(Integer gender)\n\t{\n\t\tboolean containsOppositeGenderKits \u003d savedSwaps.getRealKitIds().entrySet().stream()\n\t\t\t.anyMatch(e -\u003e {\n\t\t\t\tKit kit \u003d KIT_ID_TO_KIT.get(e.getValue());\n\t\t\t\treturn kit !\u003d null \u0026\u0026 kit.getKitId(gender) \u003d\u003d null;\n\t\t\t});\n\t\tif (containsOppositeGenderKits)\n\t\t{\n\t\t\tsavedSwaps.clearRealKits();\n\t\t}\n\t}\n\n\tprivate void refreshDisabledSlots()\n\t{\n\t\tif (!disabledSlots.isEmpty())\n\t\t{\n\t\t\t// temporarily remove locks while swapping disabled slots\n\t\t\tSet\u003cKitType\u003e lockedItems \u003d savedSwaps.getAllLockedItems();\n\t\t\tSet\u003cKitType\u003e lockedKits \u003d savedSwaps.getAllLockedKits();\n\t\t\tboolean iconLocked \u003d savedSwaps.isIconLocked();\n\t\t\tfor (KitType slot : disabledSlots.keySet())\n\t\t\t{\n\t\t\t\tsavedSwaps.removeSlotLock(slot);\n\t\t\t\tsavedSwaps.removeIconLock();\n\t\t\t}\n\t\t\tif (!disabledSlots.isEmpty())\n\t\t\t{\n\t\t\t\tCompoundSwap.fromMap(disabledSlots, null)\n\t\t\t\t\t.forEach(c -\u003e swap(c, true, SwapMode.PREVIEW));\n\t\t\t}\n\t\t\tif (disabledAnimationId !\u003d null)\n\t\t\t{\n\t\t\t\tPlayer player \u003d client.getLocalPlayer();\n\t\t\t\tif (player !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tsetIdleAnimationId(player, disabledAnimationId, true);\n\t\t\t\t}\n\t\t\t\tdisabledAnimationId \u003d null;\n\t\t\t}\n\t\t\tsavedSwaps.setLockedItems(lockedItems);\n\t\t\tsavedSwaps.setLockedKits(lockedKits);\n\t\t\tsavedSwaps.setIconLocked(iconLocked);\n\t\t}\n\t}\n\n\t/**\n\t * Sanity checks after changing equipment:\n\t * \u003cp\u003e\n\t * If there\u0027s an actual item in a slot and no virtual swap in that slot, BUT other kit swaps hide\n\t * the item, do a one-off unsaved swap to hide this newly-equipped item.\n\t */\n\tpublic void onEquipmentChanged()\n\t{\n\t\tfor (KitType kitType : KitType.values())\n\t\t{\n\t\t\tInteger inventoryItemId \u003d inventoryItemId(kitType);\n\t\t\tInteger virtualItemId \u003d savedSwaps.getItem(kitType);\n\t\t\tInteger virtualKitId \u003d savedSwaps.getKit(kitType);\n\t\t\tif (virtualItemId \u003d\u003d null \u0026\u0026 virtualKitId \u003d\u003d null \u0026\u0026 inventoryItemId !\u003d null)\n\t\t\t{\n\t\t\t\tswitch (kitType)\n\t\t\t\t{\n\t\t\t\t\tcase HEAD:\n\t\t\t\t\t\tif ((savedSwaps.containsSlot(KitType.HAIR) \u0026\u0026\n\t\t\t\t\t\t\t!ItemInteractions.HAIR_HELMS.contains(inventoryItemId)) ||\n\t\t\t\t\t\t\t(savedSwaps.containsSlot(KitType.JAW) \u0026\u0026\n\t\t\t\t\t\t\t\tItemInteractions.NO_JAW_HELMS.contains(inventoryItemId)))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tswap(CompoundSwap.single(KitType.HEAD, 0), SwapMode.PREVIEW);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (savedSwaps.containsIcon())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// if icon is swapped but not hair/jaw, just refresh (head is not in conflict)\n\t\t\t\t\t\t\tswap(CompoundSwap.single(KitType.HEAD, inventoryItemId + ITEM_OFFSET), SwapMode.PREVIEW);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase TORSO:\n\t\t\t\t\t\tif (savedSwaps.containsSlot(KitType.ARMS) \u0026\u0026\n\t\t\t\t\t\t\t!ItemInteractions.ARMS_TORSOS.contains(inventoryItemId))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tint kitId \u003d savedSwaps.getRealKit(kitType, gender);\n\t\t\t\t\t\t\tswap(CompoundSwap.single(kitType, kitId + KIT_OFFSET), SwapMode.PREVIEW);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic void importSwaps(\n\t\tMap\u003cKitType, Integer\u003e newItems,\n\t\tMap\u003cKitType, Integer\u003e newKits,\n\t\tMap\u003cColorType, Integer\u003e newColors,\n\t\tJawIcon icon,\n\t\tSet\u003cKitType\u003e slotsToRemove)\n\t{\n\t\tclientThread.invokeLater(() -\u003e {\n\t\t\t// prepare swaps for import\n\t\t\tMap\u003cKitType, Integer\u003e itemEquipSwaps \u003d newItems.entrySet().stream().collect(\n\t\t\t\tCollectors.toMap(Map.Entry::getKey, e -\u003e e.getValue() + ITEM_OFFSET)\n\t\t\t);\n\t\t\tMap\u003cKitType, Integer\u003e kitEquipSwaps \u003d newKits.entrySet().stream().collect(\n\t\t\t\tCollectors.toMap(Map.Entry::getKey, e -\u003e e.getValue() + KIT_OFFSET)\n\t\t\t);\n\t\t\tMap\u003cKitType, Integer\u003e removals \u003d slotsToRemove.stream().collect(\n\t\t\t\tCollectors.toMap(v -\u003e v, v -\u003e 0)\n\t\t\t);\n\t\t\tMap\u003cKitType, Integer\u003e equipSwaps \u003d new HashMap\u003c\u003e(kitEquipSwaps);\n\t\t\tequipSwaps.putAll(itemEquipSwaps);\n\t\t\tequipSwaps.putAll(removals);\n\n\t\t\t// remove locks and revert everything on player\n\t\t\tsavedSwaps.removeAllLocks();\n\t\t\tSwapDiff iconRevert \u003d doRevertIcon();\n\t\t\tSwapDiff kitRevert \u003d Arrays.stream(KitType.values())\n\t\t\t\t.map(this::doRevert)\n\t\t\t\t.filter(Objects::nonNull)\n\t\t\t\t.reduce(SwapDiff::mergeOver)\n\t\t\t\t.orElse(SwapDiff.blank());\n\t\t\tSwapDiff colorRevert \u003d Arrays.stream(ColorType.values())\n\t\t\t\t.map(this::doRevert)\n\t\t\t\t.reduce(SwapDiff::mergeOver)\n\t\t\t\t.orElse(SwapDiff.blank());\n\n\t\t\tSwapDiff equips \u003d CompoundSwap.fromMap(sanitize(equipSwaps), icon).stream()\n\t\t\t\t.map(c -\u003e this.swap(c, SwapMode.SAVE))\n\t\t\t\t.reduce(SwapDiff::mergeOver)\n\t\t\t\t.orElse(SwapDiff.blank());\n\n\t\t\tMap\u003cColorType, Integer\u003e colorSwaps \u003d newColors.entrySet().stream()\n\t\t\t\t.filter(e -\u003e !savedSwaps.isColorLocked(e.getKey()))\n\t\t\t\t.collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\n\t\t\tMap\u003cColorType, Integer\u003e colorEquipSwaps \u003d colorSwaps.entrySet().stream().collect(\n\t\t\t\tCollectors.toMap(Map.Entry::getKey, Map.Entry::getValue)\n\t\t\t);\n\n\t\t\tSwapDiff colors \u003d colorEquipSwaps.entrySet().stream()\n\t\t\t\t.map(e -\u003e this.swapColor(e.getKey(), e.getValue(), true))\n\t\t\t\t.reduce(SwapDiff::mergeOver)\n\t\t\t\t.orElse(SwapDiff.blank());\n\t\t\tSwapDiff total \u003d iconRevert\n\t\t\t\t.mergeOver(kitRevert)\n\t\t\t\t.mergeOver(colorRevert)\n\t\t\t\t.mergeOver(equips)\n\t\t\t\t.mergeOver(colors);\n\t\t\tswapDiffHistory.appendToUndo(total);\n\t\t});\n\t}\n\n\t@Nullable\n\tpublic Integer swappedItemIdIn(KitType slot)\n\t{\n\t\treturn savedSwaps.getItem(slot);\n\t}\n\n\t@Nullable\n\tpublic JawIcon swappedIcon()\n\t{\n\t\treturn savedSwaps.getSwappedIcon();\n\t}\n\n\tpublic boolean isHidden(KitType slot)\n\t{\n\t\treturn savedSwaps.isHidden(slot);\n\t}\n\n\t@Nullable\n\tpublic Integer swappedKitIdIn(KitType slot)\n\t{\n\t\treturn savedSwaps.getKit(slot);\n\t}\n\n\t@Nullable\n\tpublic Integer swappedColorIdIn(ColorType type)\n\t{\n\t\treturn savedSwaps.getColor(type);\n\t}\n\n\tpublic Map\u003cColorType, Colorable\u003e swappedColorsMap()\n\t{\n\t\tBiFunction\u003cColorType, Integer, Colorable\u003e getColor \u003d (type, id) -\u003e {\n\t\t\tswitch (type)\n\t\t\t{\n\t\t\t\tcase HAIR:\n\t\t\t\t\treturn HairColor.fromId(id);\n\t\t\t\tcase TORSO:\n\t\t\t\t\treturn ClothingColor.fromTorsoId(id);\n\t\t\t\tcase LEGS:\n\t\t\t\t\treturn ClothingColor.fromLegsId(id);\n\t\t\t\tcase BOOTS:\n\t\t\t\t\treturn BootsColor.fromId(id);\n\t\t\t\tcase SKIN:\n\t\t\t\t\treturn SkinColor.fromId(id);\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\t\treturn Arrays.stream(ColorType.values())\n\t\t\t.filter(savedSwaps::containsColor)\n\t\t\t.collect(Collectors.toMap(t -\u003e t, t -\u003e getColor.apply(t, savedSwaps.getColor(t))));\n\t}\n\n\t// this should only be called from the client thread\n\tpublic void revert(KitType slot, ColorType type)\n\t{\n\t\tSwapDiff s \u003d SwapDiff.blank();\n\t\tif (slot !\u003d null)\n\t\t{\n\t\t\tsavedSwaps.removeSlotLock(slot);\n\t\t\ts \u003d s.mergeOver(doRevert(slot));\n\t\t}\n\t\tif (type !\u003d null)\n\t\t{\n\t\t\tsavedSwaps.removeColorLock(type);\n\t\t\ts \u003d s.mergeOver(doRevert(type));\n\t\t}\n\t\tswapDiffHistory.appendToUndo(s);\n\t}\n\n\t// this should only be called from the client thread\n\tpublic void revertSlot(KitType slot)\n\t{\n\t\tsavedSwaps.removeSlotLock(slot);\n\t\tSwapDiff s \u003d doRevert(slot);\n\t\tswapDiffHistory.appendToUndo(s);\n\t}\n\n\tpublic void revertIcon()\n\t{\n\t\tsavedSwaps.removeIconLock();\n\t\tSwapDiff s \u003d doRevertIcon();\n\t\tswapDiffHistory.appendToUndo(s);\n\t}\n\n\tpublic void hoverOverItem(KitType slot, Integer itemId)\n\t{\n\t\thoverOver(() -\u003e {\n\t\t\tint id \u003d itemId \u003c 0 ? -ITEM_OFFSET : itemId;\n\t\t\treturn swapItem(slot, id, false, false);\n\t\t});\n\t}\n\n\tpublic void hoverOverKit(KitType slot, int kitId)\n\t{\n\t\thoverOver(() -\u003e swapKit(slot, kitId, false));\n\t}\n\n\tpublic void hoverOverColor(ColorType type, Integer colorId)\n\t{\n\t\thoverOver(() -\u003e swapColor(type, colorId, false));\n\t}\n\n\tpublic void hoverOverIcon(JawIcon icon)\n\t{\n\t\thoverOver(() -\u003e swapIcon(icon, false));\n\t}\n\n\tprivate void hoverOver(Supplier\u003cSwapDiff\u003e diffCallable)\n\t{\n\t\tclientThread.invokeLater(() -\u003e {\n\t\t\tSwapDiff swapDiff \u003d diffCallable.get();\n\t\t\tif (hoverSwapDiff \u003d\u003d null)\n\t\t\t{\n\t\t\t\thoverSwapDiff \u003d swapDiff;\n\t\t\t}\n\t\t\telse if (!swapDiff.isBlank())\n\t\t\t{\n\t\t\t\thoverSwapDiff \u003d swapDiff.mergeOver(hoverSwapDiff);\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic void hoverSelectItem(KitType slot, Integer itemId)\n\t{\n\t\thoverSelect(() -\u003e {\n\t\t\tif (savedSwaps.isItemLocked(slot))\n\t\t\t{\n\t\t\t\treturn SwapDiff.blank();\n\t\t\t}\n\t\t\tif (itemId \u003c 0)\n\t\t\t{\n\t\t\t\treturn savedSwaps.isHidden(slot) ?\n\t\t\t\t\tdoRevert(slot) :\n\t\t\t\t\tswapItem(slot, -ITEM_OFFSET, true, false);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn Objects.equals(savedSwaps.getItem(slot), itemId) ?\n\t\t\t\t\tdoRevert(slot) :\n\t\t\t\t\tswapItem(slot, itemId, true, false);\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic void hoverSelectKit(KitType slot, int kitId)\n\t{\n\t\thoverSelect(() -\u003e {\n\t\t\tif (savedSwaps.isKitLocked(slot))\n\t\t\t{\n\t\t\t\treturn SwapDiff.blank();\n\t\t\t}\n\t\t\treturn Objects.equals(savedSwaps.getKit(slot), kitId) ?\n\t\t\t\tdoRevert(slot) :\n\t\t\t\tswapKit(slot, kitId, true);\n\t\t});\n\t}\n\n\tpublic void hoverSelectColor(ColorType type, Integer colorId)\n\t{\n\t\thoverSelect(() -\u003e {\n\t\t\tif (savedSwaps.isColorLocked(type))\n\t\t\t{\n\t\t\t\treturn SwapDiff.blank();\n\t\t\t}\n\t\t\treturn Objects.equals(savedSwaps.getColor(type), colorId) ?\n\t\t\t\tdoRevert(type) :\n\t\t\t\tswapColor(type, colorId, true);\n\t\t});\n\t}\n\n\tpublic void hoverSelectIcon(JawIcon icon)\n\t{\n\t\thoverSelect(() -\u003e {\n\t\t\tif (savedSwaps.isIconLocked())\n\t\t\t{\n\t\t\t\treturn SwapDiff.blank();\n\t\t\t}\n\t\t\treturn savedSwaps.getSwappedIcon() \u003d\u003d icon ?\n\t\t\t\tdoRevertIcon() :\n\t\t\t\tswapIcon(icon, true);\n\t\t});\n\t}\n\n\tprivate void hoverSelect(Supplier\u003cSwapDiff\u003e diffSupplier)\n\t{\n\t\tclientThread.invokeLater(() -\u003e {\n\t\t\tSwapDiff swapDiff \u003d diffSupplier.get();\n\t\t\tif (!swapDiff.isBlank())\n\t\t\t{\n\t\t\t\tif (hoverSwapDiff !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tswapDiff \u003d hoverSwapDiff.mergeOver(swapDiff);\n\t\t\t\t}\n\t\t\t\tswapDiffHistory.appendToUndo(swapDiff);\n\t\t\t\thoverSwapDiff \u003d null;\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic void hoverAway()\n\t{\n\t\tclientThread.invokeLater(() -\u003e {\n\t\t\tif (hoverSwapDiff !\u003d null)\n\t\t\t{\n\t\t\t\trestore(hoverSwapDiff, false);\n\t\t\t\thoverSwapDiff \u003d null;\n\t\t\t}\n\t\t\trefreshAllSwaps();\n\t\t});\n\t}\n\n\t// reverts only the given swaps. if removeLocks is true, only removes locks for those slots.\n\tprivate void revertSwaps(List\u003cKitType\u003e slots, boolean removeLocks, boolean preview)\n\t{\n\t\tif (removeLocks)\n\t\t{\n\t\t\tslots.forEach(slot -\u003e savedSwaps.removeSlotLock(slot));\n\t\t\tsavedSwaps.removeIconLock();\n\t\t}\n\t\tSwapMode mode \u003d preview ? SwapMode.PREVIEW : SwapMode.REVERT;\n\t\tJawIcon icon \u003d null;\n\t\tif (!savedSwaps.isIconLocked())\n\t\t{\n\t\t\ticon \u003d JawIcon.NOTHING;\n\t\t}\n\t\tMap\u003cKitType, Integer\u003e equipIdsToRevert \u003d slots.stream()\n\t\t\t.filter(slot -\u003e !savedSwaps.isSlotLocked(slot))\n\t\t\t.collect(Collectors.toMap(slot -\u003e slot, slot -\u003e {\n\t\t\t\tInteger itemId \u003d inventoryItemId(slot);\n\t\t\t\tif (itemId !\u003d null \u0026\u0026 itemId !\u003d 0)\n\t\t\t\t{\n\t\t\t\t\treturn itemId + ITEM_OFFSET;\n\t\t\t\t}\n\t\t\t\treturn savedSwaps.getRealKit(slot, gender) + KIT_OFFSET;\n\t\t\t}));\n\t\tSwapDiff kitsDiff \u003d CompoundSwap.fromMap(equipIdsToRevert, icon).stream()\n\t\t\t.map(c -\u003e this.swap(c, false, (s) -\u003e mode, mode))\n\t\t\t.reduce(SwapDiff::mergeOver)\n\t\t\t.orElse(SwapDiff.blank());\n\t\tSwapDiff colorsDiff \u003d Arrays.stream(ColorType.values())\n\t\t\t.filter(type -\u003e !savedSwaps.isColorLocked(type))\n\t\t\t.map(type -\u003e {\n\t\t\t\tInteger colorId \u003d savedSwaps.getRealColor(type);\n\t\t\t\treturn colorId !\u003d null ? swap(type, colorId, mode) : SwapDiff.blank();\n\t\t\t})\n\t\t\t.reduce(SwapDiff::mergeOver)\n\t\t\t.orElse(SwapDiff.blank());\n\t\tSwapDiff totalDiff \u003d kitsDiff\n\t\t\t.mergeOver(colorsDiff);\n\t\tif (mode \u003d\u003d SwapMode.REVERT)\n\t\t{\n\t\t\tswapDiffHistory.appendToUndo(totalDiff);\n\t\t\tsavedSwaps.clearSwapped();\n\t\t}\n\t}\n\n\t/**\n\t * Reverts all item/kit slots, colors, and icon. Unless `removeLocks` is true, locked slots will remain.\n\t * If `preview` is true, saved swaps will be unaffected.\n\t * Can only be called from the client thread.\n\t */\n\tpublic void revertSwaps(boolean removeLocks, boolean preview)\n\t{\n\t\trevertSwaps(Arrays.asList(KitType.values()), removeLocks, preview);\n\t}\n\n\t@Nullable\n\t// this should only be called from the client thread\n\tpublic Integer slotIdFor(ItemComposition itemComposition)\n\t{\n\t\tItemEquipmentStats equipStats \u003d equipmentStatsFor(itemComposition.getId());\n\t\tif (equipStats !\u003d null)\n\t\t{\n\t\t\treturn equipStats.getSlot();\n\t\t}\n\t\treturn null;\n\t}\n\n\t/**\n\t * Takes a map of equipment ids and returns a new map, replacing any equipment ids that are inapplicable to\n\t * the current player\u0027s gender with equipment ids that are (if no analogous ids are found, those slots are removed)\n\t */\n\tprivate Map\u003cKitType, Integer\u003e sanitize(Map\u003cKitType, Integer\u003e equipmentIds)\n\t{\n\t\tInteger gender \u003d this.gender;\n\t\tif (gender \u003d\u003d null)\n\t\t{\n\t\t\treturn new HashMap\u003c\u003e();\n\t\t}\n\t\tMap\u003cKitType, Integer\u003e newEquipIds \u003d new HashMap\u003c\u003e();\n\t\tequipmentIds.forEach((slot, equipId) -\u003e {\n\t\t\tif (equipId \u003e\u003d KIT_OFFSET \u0026\u0026 equipId \u003c ITEM_OFFSET || equipId \u003e\u003d ITEM_OFFSET \u0026\u0026 slot \u003d\u003d KitType.JAW)\n\t\t\t{\n\t\t\t\tInteger newEquipId \u003d getAnalogousEquipmentId(equipId);\n\t\t\t\tif (newEquipId !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tnewEquipIds.put(slot, newEquipId);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (equipId \u003e\u003d ITEM_OFFSET)\n\t\t\t{\n\t\t\t\tnewEquipIds.put(slot, equipId);\n\t\t\t}\n\t\t});\n\t\tMap\u003cKitType, Integer\u003e removals \u003d equipmentIds.entrySet().stream()\n\t\t\t.filter(e -\u003e e.getValue() \u003d\u003d 0 \u0026\u0026 !NEVER_ZERO_SLOTS.contains(e.getKey()))\n\t\t\t.collect(Collectors.toMap(Map.Entry::getKey, entry -\u003e 0));\n\t\tnewEquipIds.putAll(removals);\n\t\treturn newEquipIds;\n\t}\n\n\t/**\n\t * Attempts to match the given (kit/icon) equipment id with one that matches\n\t * the current player\u0027s gender. Returns null if no analogue is found.\n\t */\n\t@Nullable\n\tprivate Integer getAnalogousEquipmentId(int equipId)\n\t{\n\t\tInteger result \u003d null;\n\t\tJawIcon icon \u003d JawIcon.NOTHING;\n\t\tif (equipId \u003e\u003d ITEM_OFFSET)\n\t\t{\n\t\t\tJawKit kit \u003d JawKit.fromEquipmentId(equipId);\n\t\t\tif (kit !\u003d null)\n\t\t\t{\n\t\t\t\ticon \u003d JawKit.iconFromItemId(equipId - ITEM_OFFSET);\n\t\t\t\tInteger jawKitId \u003d kit.getKitId(gender);\n\t\t\t\tif (jawKitId !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tequipId \u003d jawKitId + KIT_OFFSET;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tKit kit \u003d KIT_ID_TO_KIT.get(equipId - KIT_OFFSET);\n\t\tif (kit !\u003d null)\n\t\t{\n\t\t\tInteger kitId \u003d kit.getKitId(gender);\n\t\t\tif (kitId !\u003d null)\n\t\t\t{\n\t\t\t\tresult \u003d kitId + KIT_OFFSET;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBiMap\u003cKit, Kit\u003e lookup \u003d Objects.equals(gender, 0) ?\n\t\t\t\t\tItemInteractions.GENDER_MIRRORED_KITS :\n\t\t\t\t\tItemInteractions.GENDER_MIRRORED_KITS.inverse();\n\t\t\t\tif (lookup.containsKey(kit))\n\t\t\t\t{\n\t\t\t\t\tInteger analogKitId \u003d lookup.get(kit).getKitId(gender);\n\t\t\t\t\tif (analogKitId !\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult \u003d analogKitId + KIT_OFFSET;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (icon !\u003d JawIcon.NOTHING)\n\t\t\t{\n\t\t\t\tif (result !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tInteger itemId \u003d JawKit.fromEquipmentId(result).getIconItemId(icon);\n\t\t\t\t\tresult \u003d itemId !\u003d null ? itemId + ITEM_OFFSET : result;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult \u003d combineJawIcon(null, icon);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic void shuffle()\n\t{\n\t\trandomizer.shuffle();\n\t}\n\n\t// this should only be called from the client thread\n\tpublic SwapDiff swapItem(KitType slot, Integer itemId, boolean save, boolean saveIcon)\n\t{\n\t\tif (itemId \u003d\u003d null)\n\t\t{\n\t\t\treturn SwapDiff.blank();\n\t\t}\n\t\tint equipmentId \u003d itemId + ITEM_OFFSET;\n\t\tSwapMode swapMode \u003d save ? SwapMode.SAVE : SwapMode.PREVIEW;\n\t\tSwapMode iconSwapMode \u003d saveIcon ? SwapMode.SAVE : SwapMode.PREVIEW;\n\t\tSwapDiff swapDiff \u003d swap(CompoundSwap.single(slot, equipmentId), swapMode, iconSwapMode);\n\t\tif (hoverSwapDiff !\u003d null)\n\t\t{\n\t\t\tswapDiff \u003d swapDiff.mergeOver(hoverSwapDiff);\n\t\t}\n\t\treturn swapDiff;\n\t}\n\n\t// this should only be called from the client thread\n\tpublic SwapDiff swapKit(KitType slot, Integer kitId, boolean save)\n\t{\n\t\tif (kitId \u003d\u003d null)\n\t\t{\n\t\t\treturn SwapDiff.blank();\n\t\t}\n\t\tint equipmentId \u003d kitId + KIT_OFFSET;\n\t\tSwapMode swapMode \u003d save ? SwapMode.SAVE : SwapMode.PREVIEW;\n\t\tSwapDiff swapDiff \u003d swap(CompoundSwap.single(slot, equipmentId), swapMode, SwapMode.PREVIEW);\n\t\tif (hoverSwapDiff !\u003d null)\n\t\t{\n\t\t\tswapDiff \u003d swapDiff.mergeOver(hoverSwapDiff);\n\t\t}\n\t\treturn swapDiff;\n\t}\n\n\t// this should only be called from the client thread\n\tpublic SwapDiff swapIcon(JawIcon icon, boolean save)\n\t{\n\t\tif (icon \u003d\u003d null)\n\t\t{\n\t\t\treturn SwapDiff.blank();\n\t\t}\n\t\tSwapMode swapMode \u003d save ? SwapMode.SAVE : SwapMode.PREVIEW;\n\t\tSwapDiff swapDiff \u003d swap(CompoundSwap.fromIcon(icon), SwapMode.PREVIEW, swapMode);\n\t\tif (hoverSwapDiff !\u003d null)\n\t\t{\n\t\t\tswapDiff \u003d swapDiff.mergeOver(hoverSwapDiff);\n\t\t}\n\t\treturn swapDiff;\n\t}\n\n\t// this should only be called from the client thread\n\tpublic SwapDiff swapColor(ColorType type, Integer colorId, boolean save)\n\t{\n\t\tif (colorId \u003d\u003d null)\n\t\t{\n\t\t\treturn SwapDiff.blank();\n\t\t}\n\t\tSwapMode swapMode \u003d save ? SwapMode.SAVE : SwapMode.PREVIEW;\n\t\tSwapDiff swapDiff \u003d swap(type, colorId, swapMode);\n\t\tif (hoverSwapDiff !\u003d null)\n\t\t{\n\t\t\tswapDiff \u003d swapDiff.mergeOver(hoverSwapDiff);\n\t\t}\n\t\treturn swapDiff;\n\t}\n\n\t/**\n\t * directly swaps a single color by id\n\t */\n\tpublic SwapDiff swap(ColorType type, Integer colorId, SwapMode swapMode)\n\t{\n\t\tif (type \u003d\u003d null || colorId \u003d\u003d null)\n\t\t{\n\t\t\treturn SwapDiff.blank();\n\t\t}\n\t\tPlayer player \u003d client.getLocalPlayer();\n\t\tif (player \u003d\u003d null)\n\t\t{\n\t\t\treturn SwapDiff.blank();\n\t\t}\n\t\tPlayerComposition composition \u003d player.getPlayerComposition();\n\t\tif (composition \u003d\u003d null)\n\t\t{\n\t\t\treturn SwapDiff.blank();\n\t\t}\n\t\ttry\n\t\t{\n\t\t\tint oldColorId \u003d setColorId(composition, type, colorId);\n\t\t\tMap\u003cColorType, SwapDiff.Change\u003e changes \u003d new HashMap\u003c\u003e();\n\t\t\tchanges.put(type, new SwapDiff.Change(oldColorId, savedSwaps.containsColor(type)));\n\t\t\tswitch (swapMode)\n\t\t\t{\n\t\t\t\tcase SAVE:\n\t\t\t\t\tsavedSwaps.putColor(type, colorId);\n\t\t\t\t\tbreak;\n\t\t\t\tcase REVERT:\n\t\t\t\t\tsavedSwaps.removeColor(type);\n\t\t\t\t\tbreak;\n\t\t\t\tcase PREVIEW:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn new SwapDiff(new HashMap\u003c\u003e(), changes, null, null);\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\treturn SwapDiff.blank();\n\t\t}\n\t}\n\n\t/**\n\t * Most of the requested swaps should call this method instead of the more specific swaps below, to ensure\n\t * that the swap doesn\u0027t result in illegal combinations of models\n\t */\n\tpublic SwapDiff swap(CompoundSwap s, SwapMode swapMode)\n\t{\n\t\treturn swap(s, false, swapMode);\n\t}\n\n\tpublic SwapDiff swap(CompoundSwap s, SwapMode swapMode, SwapMode iconSwapMode)\n\t{\n\t\treturn swap(s, false, (ignore) -\u003e swapMode, iconSwapMode);\n\t}\n\n\tprivate SwapDiff swap(CompoundSwap s, boolean allowDisabledSwaps, SwapMode swapMode)\n\t{\n\t\treturn swap(s, allowDisabledSwaps, (ignore) -\u003e swapMode, swapMode);\n\t}\n\n\tprivate SwapDiff swap(\n\t\tCompoundSwap s,\n\t\tboolean allowDisabledSwaps,\n\t\tFunction\u003cKitType, SwapMode\u003e swapModeProvider,\n\t\tSwapMode iconSwapMode)\n\t{\n\t\tswitch (s.getType())\n\t\t{\n\t\t\tcase HEAD:\n\t\t\t\tInteger headEquipId \u003d s.getEquipmentIds().get(KitType.HEAD);\n\t\t\t\tInteger hairEquipId \u003d s.getEquipmentIds().get(KitType.HAIR);\n\t\t\t\tInteger jawEquipId \u003d s.getEquipmentIds().get(KitType.JAW);\n\t\t\t\tJawIcon icon \u003d s.getIcon();\n\t\t\t\treturn swapHead(headEquipId, hairEquipId, jawEquipId, icon, allowDisabledSwaps, swapModeProvider,\n\t\t\t\t\ticonSwapMode);\n\t\t\tcase TORSO:\n\t\t\t\tInteger torsoEquipId \u003d s.getEquipmentIds().get(KitType.TORSO);\n\t\t\t\tInteger armsEquipId \u003d s.getEquipmentIds().get(KitType.ARMS);\n\t\t\t\treturn swapTorso(torsoEquipId, armsEquipId, allowDisabledSwaps, swapModeProvider);\n\t\t\tcase WEAPONS:\n\t\t\t\tInteger weaponEquipId \u003d s.getEquipmentIds().get(KitType.WEAPON);\n\t\t\t\tInteger shieldEquipId \u003d s.getEquipmentIds().get(KitType.SHIELD);\n\t\t\t\treturn swapWeapons(weaponEquipId, shieldEquipId, allowDisabledSwaps, swapModeProvider);\n\t\t\tcase SINGLE:\n\t\t\t\treturn swapSingle(s.getKitType(), s.getEquipmentId(), allowDisabledSwaps,\n\t\t\t\t\tswapModeProvider.apply(s.getKitType()));\n\t\t}\n\t\treturn SwapDiff.blank();\n\t}\n\n\tprivate SwapDiff swapSingle(KitType slot, Integer equipmentId, boolean allowDisabledSwaps, SwapMode swapMode)\n\t{\n\t\tMap\u003cSwapDiff.Change.Type, SwapDiff.Change\u003e results \u003d swap(slot, equipmentId, swapMode, SwapMode.PREVIEW,\n\t\t\tallowDisabledSwaps);\n\t\tMap\u003cKitType, SwapDiff.Change\u003e changes \u003d new HashMap\u003c\u003e();\n\t\tSwapDiff.Change iconChange \u003d results.get(SwapDiff.Change.Type.ICON);\n\t\tif (results.containsKey(SwapDiff.Change.Type.EQUIPMENT))\n\t\t{\n\t\t\tchanges.put(slot, results.get(SwapDiff.Change.Type.EQUIPMENT));\n\t\t}\n\t\treturn new SwapDiff(changes, new HashMap\u003c\u003e(), iconChange, null);\n\t}\n\n\t/**\n\t * Swaps an item in the head slot, and kits in the hair and/or jaw slots. Behavior changes depending\n\t * on the information present:\n\t * \u003cp\u003e\n\t * When the head slot id is null, the head slot will not change. The hair and jaw kits sent\n\t * will be used if the currently shown item allows for it, otherwise nothing will happen.\n\t * \u003cp\u003e\n\t * The head slot item is removed when id \u003d\u003d 0. This means swapping to the hair and jaw kit ids\n\t * if they are sent, otherwise the player\u0027s existing kit ids will be used.\n\t * \u003cp\u003e\n\t * For non-null, non-zero head ids, the head item will be swapped, but not if (the item hides hair and the hair kit\n\t * is locked) or (the item hides jaws and the jaw slot is locked). If the new item allows showing hair\n\t * and/or jaw kits, then they will also be swapped using the sent values or the existing kits on the player.\n\t * If the kits are not allowed, they will be hidden as needed.\n\t */\n\tprivate SwapDiff swapHead(\n\t\tInteger headEquipId,\n\t\tInteger hairEquipId,\n\t\tInteger jawEquipId,\n\t\tJawIcon icon,\n\t\tboolean allowDisabledSwaps,\n\t\tFunction\u003cKitType, SwapMode\u003e swapModeProvider,\n\t\tSwapMode iconSwapMode)\n\t{\n\t\t// equipment ids that will be used in the swap\n\t\tInteger finalHeadId \u003d null;\n\t\tInteger finalHairId;\n\t\tInteger finalJawId;\n\n\t\tFunction\u003cInteger, Boolean\u003e isJawlessIcon \u003d (equipId) -\u003e\n\t\t\tequipId \u003e\u003d ITEM_OFFSET \u0026\u0026 JawKit.isNoJawIcon(equipId - ITEM_OFFSET);\n\t\tFunction\u003cInteger, Boolean\u003e headAllowsHair \u003d (equipId) -\u003e\n\t\t\tequipId \u003c ITEM_OFFSET || ItemInteractions.HAIR_HELMS.contains(equipId - ITEM_OFFSET);\n\t\tFunction\u003cInteger, Boolean\u003e headAllowsJaw \u003d (equipId) -\u003e\n\t\t\tequipId \u003c ITEM_OFFSET || !ItemInteractions.NO_JAW_HELMS.contains(equipId - ITEM_OFFSET);\n\n\t\tint currentHeadEquipId \u003d equipmentIdInSlot(KitType.HEAD);\n\n\t\tInteger adjustedJawEquipId \u003d !savedSwaps.isKitLocked(KitType.JAW) ? jawEquipId : null;\n\t\tJawIcon adjustedIcon \u003d !savedSwaps.isIconLocked() ? icon : null;\n\t\tif (adjustedJawEquipId !\u003d null || icon !\u003d null)\n\t\t{\n\t\t\tadjustedJawEquipId \u003d combineJawIcon(adjustedJawEquipId, adjustedIcon);\n\t\t}\n\n\t\tInteger adjustedHairEquipId \u003d !savedSwaps.isKitLocked(KitType.HAIR) ? hairEquipId : null;\n\n\t\tif (savedSwaps.isItemLocked(KitType.HEAD))\n\t\t{\n\t\t\t// only change hair/jaw and only if current head item allows\n\t\t\tif (adjustedHairEquipId !\u003d null)\n\t\t\t{\n\t\t\t\tboolean hairAllowed \u003d (headAllowsHair.apply(currentHeadEquipId) \u0026\u0026 adjustedHairEquipId \u003e 0) ||\n\t\t\t\t\t(!headAllowsHair.apply(currentHeadEquipId) \u0026\u0026 adjustedHairEquipId \u003c\u003d 0);\n\t\t\t\tfinalHairId \u003d hairAllowed ? adjustedHairEquipId : null;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfinalHairId \u003d null;\n\t\t\t}\n\t\t\tif (adjustedJawEquipId !\u003d null)\n\t\t\t{\n\t\t\t\tboolean jawAllowed \u003d (headAllowsJaw.apply(currentHeadEquipId) \u0026\u0026 adjustedJawEquipId \u003e 0) ||\n\t\t\t\t\t(!headAllowsJaw.apply(currentHeadEquipId) \u0026\u0026 (adjustedJawEquipId \u003c\u003d 0 ||\n\t\t\t\t\t\tisJawlessIcon.apply(adjustedJawEquipId)));\n\t\t\t\tif (jawAllowed)\n\t\t\t\t{\n\t\t\t\t\tfinalJawId \u003d adjustedJawEquipId;\n\t\t\t\t}\n\t\t\t\telse if (adjustedJawEquipId \u003e\u003d ITEM_OFFSET)\n\t\t\t\t{\n\t\t\t\t\tfinalJawId \u003d combineJawIcon(0, adjustedIcon);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfinalJawId \u003d null;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfinalJawId \u003d null;\n\t\t\t}\n\t\t}\n\t\telse if (headEquipId \u003d\u003d null)\n\t\t{\n\t\t\t// prioritize showing hair/jaw and hiding current helm if new kits conflict with it.\n\t\t\tfinalHairId \u003d adjustedHairEquipId;\n\t\t\tfinalJawId \u003d adjustedJawEquipId;\n\t\t\tboolean headForbidsHair \u003d finalHairId !\u003d null \u0026\u0026 finalHairId \u003e 0 \u0026\u0026\n\t\t\t\t!headAllowsHair.apply(currentHeadEquipId);\n\t\t\tif (headForbidsHair)\n\t\t\t{\n\t\t\t\tfinalHeadId \u003d 0;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tboolean headForbidsJaw \u003d finalJawId !\u003d null \u0026\u0026 finalJawId \u003e 0 \u0026\u0026 !isJawlessIcon.apply(finalJawId) \u0026\u0026\n\t\t\t\t\t!headAllowsJaw.apply(currentHeadEquipId);\n\t\t\t\tif (headForbidsJaw)\n\t\t\t\t{\n\t\t\t\t\t// if not actually requesting jaw kit, use only icon and keep head item\n\t\t\t\t\tif (jawEquipId \u003d\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tfinalJawId \u003d combineJawIcon(0, adjustedIcon);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tfinalHeadId \u003d 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// priority: show head and hide hair/jaw, but not if locks on hair/jaw disallow (in which case don\u0027t change)\n\t\t\tboolean hairDisallowed \u003d !headAllowsHair.apply(headEquipId) \u0026\u0026 savedSwaps.isKitLocked(KitType.HAIR);\n\t\t\tboolean jawDisallowed \u003d !headAllowsJaw.apply(headEquipId) \u0026\u0026 savedSwaps.isKitLocked(KitType.JAW);\n\t\t\tfinalHeadId \u003d hairDisallowed || jawDisallowed ? null : headEquipId;\n\t\t\tInteger headIdToCheck \u003d hairDisallowed || jawDisallowed ? currentHeadEquipId : headEquipId;\n\t\t\tInteger potentialHairId \u003d headAllowsHair.apply(headIdToCheck) ? adjustedHairEquipId : Integer.valueOf(0);\n\t\t\tfinalHairId \u003d !savedSwaps.isKitLocked(KitType.HAIR) ? potentialHairId : null;\n\t\t\tInteger potentialJawId \u003d headAllowsJaw.apply(headIdToCheck) ||\n\t\t\t\t(adjustedJawEquipId !\u003d null \u0026\u0026 isJawlessIcon.apply(adjustedJawEquipId)) ?\n\t\t\t\tadjustedJawEquipId :\n\t\t\t\t(Integer) combineJawIcon(0, adjustedIcon);\n\t\t\tfinalJawId \u003d !savedSwaps.isKitLocked(KitType.JAW) ? potentialJawId : null;\n\t\t}\n\n\t\tMap\u003cKitType, SwapDiff.Change\u003e changes \u003d new HashMap\u003c\u003e();\n\t\tfinal SwapDiff.Change[] iconChange \u003d {null};\n\n\t\t// edge cases:\n\t\t// if not changing hair but hair can be shown, make sure that at least something is displayed there\n\t\tif (finalHairId \u003d\u003d null \u0026\u0026 equipmentIdInSlot(KitType.HAIR) \u003d\u003d 0 \u0026\u0026\n\t\t\t((finalHeadId \u003d\u003d null \u0026\u0026 headAllowsHair.apply(currentHeadEquipId)) ||\n\t\t\t\t(finalHeadId !\u003d null \u0026\u0026 headAllowsHair.apply(finalHeadId))))\n\t\t{\n\t\t\tif (savedSwaps.isKitLocked(KitType.HAIR))\n\t\t\t{\n\t\t\t\t// hair is locked on nothing, don\u0027t change helm to something that could show empty kit\n\t\t\t\tfinalHeadId \u003d null;\n\t\t\t\tfinalJawId \u003d null;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tint revertHairId \u003d savedSwaps.getRealKit(KitType.HAIR, gender) + KIT_OFFSET;\n\t\t\t\tMap\u003cSwapDiff.Change.Type, SwapDiff.Change\u003e result \u003d swap(KitType.HAIR, revertHairId, SwapMode.REVERT,\n\t\t\t\t\tSwapMode.PREVIEW, allowDisabledSwaps);\n\t\t\t\tif (result.containsKey(SwapDiff.Change.Type.EQUIPMENT))\n\t\t\t\t{\n\t\t\t\t\tchanges.put(KitType.HAIR, result.get(SwapDiff.Change.Type.EQUIPMENT));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tint currentJawEquipId \u003d equipmentIdInSlot(KitType.JAW);\n\t\t// if not changing jaw but jaw should be shown, make sure that at least something is displayed there\n\t\tif (finalJawId \u003d\u003d null \u0026\u0026 (currentJawEquipId \u003d\u003d 0 || isJawlessIcon.apply(currentJawEquipId)) \u0026\u0026\n\t\t\t((finalHeadId \u003d\u003d null \u0026\u0026 headAllowsJaw.apply(currentHeadEquipId)) ||\n\t\t\t\t(finalHeadId !\u003d null \u0026\u0026 headAllowsJaw.apply(finalHeadId))))\n\t\t{\n\t\t\tif (savedSwaps.isKitLocked(KitType.JAW))\n\t\t\t{\n\t\t\t\t// jaw is locked on nothing, don\u0027t change helm to something that could show empty kit\n\t\t\t\tfinalHeadId \u003d null;\n\t\t\t\tfinalHairId \u003d null;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tint realKitId \u003d savedSwaps.getRealKit(KitType.JAW, gender);\n\t\t\t\tint fallbackJawId \u003d combineJawIcon(realKitId + KIT_OFFSET, adjustedIcon);\n\t\t\t\tMap\u003cSwapDiff.Change.Type, SwapDiff.Change\u003e result \u003d swap(KitType.JAW, fallbackJawId, SwapMode.REVERT,\n\t\t\t\t\tSwapMode.PREVIEW, allowDisabledSwaps);\n\t\t\t\tif (result.containsKey(SwapDiff.Change.Type.EQUIPMENT))\n\t\t\t\t{\n\t\t\t\t\tchanges.put(KitType.JAW, result.get(SwapDiff.Change.Type.EQUIPMENT));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tBiConsumer\u003cKitType, Integer\u003e attemptChange \u003d (slot, equipId) -\u003e {\n\t\t\tif (equipId !\u003d null \u0026\u0026 equipId \u003e\u003d 0)\n\t\t\t{\n\t\t\t\tMap\u003cSwapDiff.Change.Type, SwapDiff.Change\u003e result \u003d swap(slot, equipId, swapModeProvider.apply(slot),\n\t\t\t\t\ticonSwapMode, allowDisabledSwaps);\n\t\t\t\tif (result.containsKey(SwapDiff.Change.Type.EQUIPMENT))\n\t\t\t\t{\n\t\t\t\t\tchanges.put(slot, result.get(SwapDiff.Change.Type.EQUIPMENT));\n\t\t\t\t}\n\t\t\t\tif (result.containsKey(SwapDiff.Change.Type.ICON))\n\t\t\t\t{\n\t\t\t\t\ticonChange[0] \u003d result.get(SwapDiff.Change.Type.ICON);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tattemptChange.accept(KitType.HEAD, finalHeadId);\n\t\tattemptChange.accept(KitType.HAIR, finalHairId);\n\t\tattemptChange.accept(KitType.JAW, finalJawId);\n\t\treturn new SwapDiff(changes, new HashMap\u003c\u003e(), iconChange[0], null);\n\t}\n\n\t/**\n\t * Swaps an item or kit in the torso slot and a kit in the arms slot. Behavior changes depending\n\t * on the information present:\n\t * \u003cp\u003e\n\t * When the torso slot id is null, the torso slot will not change. The arms kits sen will be\n\t * used if the currently shown torso allows for it, otherwise nothing will happen.\n\t * \u003cp\u003e\n\t * The torso slot item is removed when id \u003d\u003d 0. This means swapping to the arms kit id if it is sent,\n\t * otherwise the player\u0027s existing kit id will be used.\n\t * \u003cp\u003e\n\t * For non-null, non-zero torso ids, the torso slot item will change, but not if the item hides arms and the arms\n\t * kit is currently locked. If the new item allows showing the arms kit, then it will also be swapped using the\n\t * sent value or the existing kit on the player. If the torso does not allow showing arms, then the arms kit\n\t * will be removed.\n\t */\n\tprivate SwapDiff swapTorso(\n\t\tInteger torsoEquipId,\n\t\tInteger armsEquipId,\n\t\tboolean allowDisabledSwaps,\n\t\tFunction\u003cKitType, SwapMode\u003e swapModeProvider)\n\t{\n\t\tInteger finalTorsoId \u003d null;\n\t\tInteger finalArmsId;\n\n\t\tFunction\u003cInteger, Boolean\u003e torsoAllowsArms \u003d (equipId) -\u003e\n\t\t\tequipId \u003c ITEM_OFFSET || ItemInteractions.ARMS_TORSOS.contains(equipId - ITEM_OFFSET);\n\n\t\tMap\u003cKitType, SwapDiff.Change\u003e changes \u003d new HashMap\u003c\u003e();\n\n\t\tint currentTorsoEquipId \u003d equipmentIdInSlot(KitType.TORSO);\n\t\tif (savedSwaps.isKitLocked(KitType.TORSO) ||\n\t\t\t(savedSwaps.isItemLocked(KitType.TORSO) \u0026\u0026 torsoEquipId !\u003d null \u0026\u0026 torsoEquipId \u003e\u003d ITEM_OFFSET))\n\t\t{\n\t\t\t// only change arms and only if current torso item allows\n\t\t\tif (savedSwaps.isKitLocked(KitType.ARMS) \u0026\u0026 armsEquipId !\u003d null)\n\t\t\t{\n\t\t\t\tboolean armsAllowed \u003d (torsoAllowsArms.apply(currentTorsoEquipId) \u0026\u0026 armsEquipId \u003e 0) ||\n\t\t\t\t\t(!torsoAllowsArms.apply(currentTorsoEquipId) \u0026\u0026 armsEquipId \u003c\u003d 0);\n\t\t\t\tfinalArmsId \u003d armsAllowed ? armsEquipId : null;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfinalArmsId \u003d null;\n\t\t\t}\n\t\t}\n\t\telse if (torsoEquipId \u003d\u003d null)\n\t\t{\n\t\t\t// prioritize showing arms and hiding current torso if applicable\n\t\t\tfinalArmsId \u003d !savedSwaps.isKitLocked(KitType.ARMS) ? armsEquipId : null;\n\t\t\tboolean torsoForbidsArms \u003d !torsoAllowsArms.apply(currentTorsoEquipId) \u0026\u0026 finalArmsId !\u003d null \u0026\u0026\n\t\t\t\tfinalArmsId \u003e 0;\n\t\t\tif (torsoForbidsArms)\n\t\t\t{\n\t\t\t\tint revertTorsoId \u003d savedSwaps.getRealKit(KitType.TORSO, gender) + KIT_OFFSET;\n\t\t\t\tMap\u003cSwapDiff.Change.Type, SwapDiff.Change\u003e result \u003d swap(KitType.TORSO, revertTorsoId, SwapMode.REVERT,\n\t\t\t\t\tSwapMode.PREVIEW, allowDisabledSwaps);\n\t\t\t\tif (result.containsKey(SwapDiff.Change.Type.EQUIPMENT))\n\t\t\t\t{\n\t\t\t\t\tchanges.put(KitType.TORSO, result.get(SwapDiff.Change.Type.EQUIPMENT));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// priority: show torso and hide arms, but not if locks on arms disallow (in which case don\u0027t change)\n\t\t\tboolean torsoDisallowed \u003d !torsoAllowsArms.apply(torsoEquipId) \u0026\u0026 savedSwaps.isKitLocked(KitType.ARMS);\n\t\t\tfinalTorsoId \u003d torsoDisallowed ? null : torsoEquipId;\n\t\t\tInteger torsoIdToCheck \u003d torsoDisallowed ? currentTorsoEquipId : torsoEquipId;\n\t\t\tInteger potentialArmsId \u003d torsoAllowsArms.apply(torsoIdToCheck) ? armsEquipId : Integer.valueOf(0);\n\t\t\tfinalArmsId \u003d !savedSwaps.isKitLocked(KitType.ARMS) ? potentialArmsId : null;\n\t\t}\n\n\t\t// edge case:\n\t\t// if not changing arms but arms can be shown, make sure that at least something is displayed there\n\t\tif (finalArmsId \u003d\u003d null \u0026\u0026 equipmentIdInSlot(KitType.ARMS) \u003d\u003d 0 \u0026\u0026\n\t\t\t((finalTorsoId \u003d\u003d null \u0026\u0026 torsoAllowsArms.apply(currentTorsoEquipId)) ||\n\t\t\t\t(finalTorsoId !\u003d null \u0026\u0026 torsoAllowsArms.apply(finalTorsoId))))\n\t\t{\n\t\t\tif (savedSwaps.isKitLocked(KitType.ARMS))\n\t\t\t{\n\t\t\t\t// arms locked on nothing, don\u0027t change torso to something that could show empty kit\n\t\t\t\tfinalTorsoId \u003d null;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tint revertArmsId \u003d savedSwaps.getRealKit(KitType.ARMS, gender) + KIT_OFFSET;\n\t\t\t\tMap\u003cSwapDiff.Change.Type, SwapDiff.Change\u003e result \u003d swap(KitType.ARMS, revertArmsId, SwapMode.REVERT,\n\t\t\t\t\tSwapMode.PREVIEW, allowDisabledSwaps);\n\t\t\t\tif (result.containsKey(SwapDiff.Change.Type.EQUIPMENT))\n\t\t\t\t{\n\t\t\t\t\tchanges.put(KitType.ARMS, result.get(SwapDiff.Change.Type.EQUIPMENT));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tBiConsumer\u003cKitType, Integer\u003e attemptChange \u003d (slot, equipId) -\u003e {\n\t\t\tif (equipId !\u003d null \u0026\u0026 equipId \u003e\u003d 0)\n\t\t\t{\n\t\t\t\tMap\u003cSwapDiff.Change.Type, SwapDiff.Change\u003e result \u003d swap(slot, equipId, swapModeProvider.apply(slot),\n\t\t\t\t\tSwapMode.PREVIEW, allowDisabledSwaps);\n\t\t\t\tif (result.containsKey(SwapDiff.Change.Type.EQUIPMENT))\n\t\t\t\t{\n\t\t\t\t\tchanges.put(slot, result.get(SwapDiff.Change.Type.EQUIPMENT));\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tattemptChange.accept(KitType.TORSO, finalTorsoId);\n\t\tattemptChange.accept(KitType.ARMS, finalArmsId);\n\t\treturn new SwapDiff(changes, new HashMap\u003c\u003e(), null, null);\n\t}\n\n\t/**\n\t * Swaps an item weapon slot and an item in the shield slot. Behavior changes depending\n\t * on the information present:\n\t * \u003cp\u003e\n\t * If the weapon id is null, only the shield will be considered. If the shield is non-null and\n\t * non-zero, and the current weapon is two-handed, then the weapon will be removed.\n\t * \u003cp\u003e\n\t * If the weapon is non-null, non-zero, and two-handed, the shield will be removed. Otherwise,\n\t * the weapon and shield are both swapped if they are respectively non-null.\n\t * \u003cp\u003e\n\t * Lastly, the idle animation ID will change if the sent weapon id is non-null or if it\u0027s determined\n\t * that the weapon must be removed.\n\t */\n\tprivate SwapDiff swapWeapons(\n\t\tInteger weaponEquipId,\n\t\tInteger shieldEquipId,\n\t\tboolean allowDisabledSwaps,\n\t\tFunction\u003cKitType, SwapMode\u003e swapModeProvider)\n\t{\n\t\tInteger finalWeaponId \u003d null;\n\t\tInteger finalShieldId;\n\t\tInteger finalAnimId \u003d null;\n\n\t\tFunction\u003cInteger, Boolean\u003e weaponForbidsShields \u003d (equipId) -\u003e {\n\t\t\tif (equipId \u003e\u003d ITEM_OFFSET)\n\t\t\t{\n\t\t\t\tItemEquipmentStats stats \u003d equipmentStatsFor(equipId - ITEM_OFFSET);\n\t\t\t\treturn stats !\u003d null \u0026\u0026 stats.isTwoHanded();\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\tif (weaponEquipId \u003d\u003d null || savedSwaps.isItemLocked(KitType.WEAPON))\n\t\t{\n\t\t\tfinalShieldId \u003d shieldEquipId;\n\t\t\tif (shieldEquipId !\u003d null \u0026\u0026 weaponForbidsShields.apply(equipmentIdInSlot(KitType.WEAPON)))\n\t\t\t{\n\t\t\t\tif (!savedSwaps.isItemLocked(KitType.WEAPON))\n\t\t\t\t{\n\t\t\t\t\tfinalWeaponId \u003d 0;\n\t\t\t\t\tfinalAnimId \u003d IdleAnimationID.DEFAULT;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t// weapon is locked and 2h, should not equip shield\n\t\t\t\t\tfinalShieldId \u003d null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfinalShieldId \u003d weaponForbidsShields.apply(weaponEquipId) \u0026\u0026 !savedSwaps.isItemLocked(KitType.SHIELD) ?\n\t\t\t\tInteger.valueOf(0) :\n\t\t\t\tshieldEquipId;\n\t\t\tfinalWeaponId \u003d weaponForbidsShields.apply(weaponEquipId) \u0026\u0026 savedSwaps.isItemLocked(KitType.SHIELD) ?\n\t\t\t\tnull :\n\t\t\t\tweaponEquipId;\n\t\t\tfinalAnimId \u003d finalWeaponId !\u003d null ?\n\t\t\t\tItemInteractions.WEAPON_TO_IDLE.getOrDefault(weaponEquipId - ITEM_OFFSET, IdleAnimationID.DEFAULT) :\n\t\t\t\tnull;\n\t\t}\n\n\t\tMap\u003cKitType, SwapDiff.Change\u003e changes \u003d new HashMap\u003c\u003e();\n\t\tBiConsumer\u003cKitType, Integer\u003e attemptChange \u003d (slot, equipId) -\u003e {\n\t\t\tif (equipId !\u003d null \u0026\u0026 equipId \u003e\u003d 0)\n\t\t\t{\n\t\t\t\tMap\u003cSwapDiff.Change.Type, SwapDiff.Change\u003e results \u003d swap(slot, equipId, swapModeProvider.apply(slot),\n\t\t\t\t\tSwapMode.PREVIEW, allowDisabledSwaps);\n\t\t\t\tif (results.containsKey(SwapDiff.Change.Type.EQUIPMENT))\n\t\t\t\t{\n\t\t\t\t\tchanges.put(slot, results.get(SwapDiff.Change.Type.EQUIPMENT));\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tattemptChange.accept(KitType.WEAPON, finalWeaponId);\n\t\tattemptChange.accept(KitType.SHIELD, finalShieldId);\n\n\t\tInteger changedAnim \u003d null;\n\t\tif (finalAnimId !\u003d null \u0026\u0026 finalAnimId \u003e\u003d 0)\n\t\t{\n\t\t\tPlayer player \u003d client.getLocalPlayer();\n\t\t\tif (player !\u003d null)\n\t\t\t{\n\t\t\t\tchangedAnim \u003d setIdleAnimationId(player, finalAnimId, allowDisabledSwaps);\n\t\t\t\tif (changedAnim.equals(finalAnimId))\n\t\t\t\t{\n\t\t\t\t\tchangedAnim \u003d null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn new SwapDiff(changes, new HashMap\u003c\u003e(), null, changedAnim);\n\t}\n\n\t/**\n\t * this should only be called from one of the swap methods utilizing `CompoundSwap`, otherwise the\n\t * swap may not make logical sense.\n\t * \u003cp\u003e\n\t * equipmentId follows `PlayerComposition::getEquipmentId`:\n\t * 0 for nothing\n\t * 256-2047 for a base kit model (i.e., kitId + 256)\n\t * \u003e\u003d2048 for an item (i.e., itemId + 2048)\n\t * \u003cp\u003e\n\t *\n\t * @return a map of changes performed, keyed by type (potentially empty if no changes)\n\t */\n\tprivate Map\u003cSwapDiff.Change.Type, SwapDiff.Change\u003e swap(\n\t\tKitType slot, int equipmentId, SwapMode swapMode, SwapMode iconSwapMode, boolean allowDisabledSwaps)\n\t{\n\t\tMap\u003cSwapDiff.Change.Type, SwapDiff.Change\u003e changes \u003d new HashMap\u003c\u003e();\n\t\tif (slot \u003d\u003d null)\n\t\t{\n\t\t\treturn changes;\n\t\t}\n\t\tPlayer player \u003d client.getLocalPlayer();\n\t\tif (player \u003d\u003d null)\n\t\t{\n\t\t\treturn changes;\n\t\t}\n\t\tPlayerComposition composition \u003d player.getPlayerComposition();\n\t\tif (composition \u003d\u003d null)\n\t\t{\n\t\t\treturn changes;\n\t\t}\n\t\t// returns equipment id of jaw kit (without icon)\n\t\tFunction\u003cInteger, Integer\u003e deIconJaw \u003d (equipId) -\u003e {\n\t\t\tJawKit kit \u003d JawKit.fromEquipmentId(equipId);\n\t\t\tif (kit !\u003d null)\n\t\t\t{\n\t\t\t\tInteger kitId \u003d kit.getKitId(gender);\n\t\t\t\tif (kitId !\u003d null)\n\t\t\t\t{\n\t\t\t\t\treturn kitId + KIT_OFFSET;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn equipId;\n\t\t};\n\t\t// adjust equipment ids for jaw swaps since diff could be icon-only\n\t\tint saveId \u003d equipmentId;\n\t\tif (slot \u003d\u003d KitType.JAW \u0026\u0026 equipmentId \u003e\u003d ITEM_OFFSET)\n\t\t{\n\t\t\tsaveId \u003d deIconJaw.apply(equipmentId);\n\t\t}\n\t\tSupplier\u003cBoolean\u003e unnaturalCheck \u003d () -\u003e savedSwaps.containsSlot(slot) || savedSwaps.isHidden(slot);\n\t\tSupplier\u003cBoolean\u003e unnaturalIconCheck \u003d () -\u003e savedSwaps.containsIcon();\n\t\tint oldId \u003d setEquipmentId(composition, slot, equipmentId, allowDisabledSwaps);\n\t\tint oldSaveId \u003d oldId;\n\t\tif (slot \u003d\u003d KitType.JAW \u0026\u0026 oldId \u003e\u003d ITEM_OFFSET)\n\t\t{\n\t\t\toldSaveId \u003d deIconJaw.apply(oldId);\n\t\t}\n\t\tboolean oldUnnatural \u003d unnaturalCheck.get();\n\t\tswitch (swapMode)\n\t\t{\n\t\t\tcase SAVE:\n\t\t\t\tif (saveId \u003c\u003d 0)\n\t\t\t\t{\n\t\t\t\t\tif (ALLOWS_NOTHING.contains(slot))\n\t\t\t\t\t{\n\t\t\t\t\t\tsavedSwaps.putNothing(slot);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tsavedSwaps.removeSlot(slot);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (saveId \u003c ITEM_OFFSET)\n\t\t\t\t{\n\t\t\t\t\tsavedSwaps.putKit(slot, saveId - KIT_OFFSET);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tsavedSwaps.putItem(slot, saveId - ITEM_OFFSET);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase REVERT:\n\t\t\t\tsavedSwaps.removeSlot(slot);\n\t\t\t\tbreak;\n\t\t\tcase PREVIEW:\n\t\t\t\tbreak;\n\t\t}\n\t\tif (slot \u003d\u003d KitType.JAW)\n\t\t{\n\t\t\tboolean oldUnnaturalIcon \u003d unnaturalIconCheck.get();\n\t\t\tJawIcon oldIcon \u003d oldId \u003e\u003d ITEM_OFFSET ? JawKit.iconFromItemId(oldId - ITEM_OFFSET) : JawIcon.NOTHING;\n\t\t\tJawIcon icon \u003d equipmentId \u003e\u003d ITEM_OFFSET ? JawKit.iconFromItemId(equipmentId - ITEM_OFFSET) : JawIcon.NOTHING;\n\t\t\tswitch (iconSwapMode)\n\t\t\t{\n\t\t\t\tcase SAVE:\n\t\t\t\t\tif (equipmentId \u003c ITEM_OFFSET)\n\t\t\t\t\t{\n\t\t\t\t\t\tsavedSwaps.removeIcon();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tsavedSwaps.putIcon(icon);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase REVERT:\n\t\t\t\t\tsavedSwaps.removeIcon();\n\t\t\t\t\tbreak;\n\t\t\t\tcase PREVIEW:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tboolean unnaturalIcon \u003d unnaturalIconCheck.get();\n\t\t\tif (icon !\u003d oldIcon || oldUnnaturalIcon !\u003d unnaturalIcon)\n\t\t\t{\n\t\t\t\tchanges.put(SwapDiff.Change.Type.ICON, new SwapDiff.Change(oldIcon.getId(), oldUnnaturalIcon));\n\t\t\t}\n\t\t}\n\t\tboolean unnatural \u003d unnaturalCheck.get();\n\t\tif (oldSaveId !\u003d saveId || oldUnnatural !\u003d unnatural)\n\t\t{\n\t\t\tchanges.put(SwapDiff.Change.Type.EQUIPMENT, new SwapDiff.Change(oldSaveId, oldUnnatural));\n\t\t}\n\t\treturn changes;\n\t}\n\n\t/**\n\t * Sets equipment id for slot and returns equipment id of previously occupied item.\n\t * If allowDisabledSwaps is false or if the slot is disabled, no actual change occurs.\n\t */\n\tprivate int setEquipmentId(\n\t\t@Nonnull PlayerComposition composition,\n\t\t@Nonnull KitType slot,\n\t\tint equipmentId,\n\t\tboolean allowDisabledSwaps)\n\t{\n\t\tint previousId \u003d composition.getEquipmentIds()[slot.getIndex()];\n\t\tif (allowDisabledSwaps || !disabledSlots.containsKey(slot))\n\t\t{\n\t\t\tcomposition.getEquipmentIds()[slot.getIndex()] \u003d equipmentId;\n\t\t\tcomposition.setHash();\n\t\t}\n\t\treturn previousId;\n\t}\n\n\t/**\n\t * Sets color id for slot and returns color id before replacement.\n\t */\n\tprivate int setColorId(@Nonnull PlayerComposition composition, @Nonnull ColorType type, int colorId)\n\t{\n\t\tint[] colors \u003d composition.getColors();\n\t\tint previousId \u003d colors[type.ordinal()];\n\t\tcolors[type.ordinal()] \u003d colorId;\n\t\tcomposition.setHash();\n\t\treturn previousId;\n\t}\n\n\t/**\n\t * Sets idle animation id for current player and returns previous idle animation.\n\t * If allowDisabledSwaps is false or the weapon slot is disabled, no actual anim change occurs.\n\t */\n\tprivate int setIdleAnimationId(@Nonnull Player player, int animationId, boolean allowDisabledSwaps)\n\t{\n\t\tint previousId \u003d player.getIdlePoseAnimation();\n\t\tif (allowDisabledSwaps || !disabledSlots.containsKey(KitType.WEAPON))\n\t\t{\n\t\t\tplayer.setIdlePoseAnimation(animationId);\n\t\t}\n\t\treturn previousId;\n\t}\n\n\t/**\n\t * Performs a revert back to an \"original\" state for the given slot.\n\t * In most cases, this swaps to whatever was actually equipped in the slot. Some exceptions:\n\t * When reverting a kit, and an item is actually equipped in a slot that hides that kit, the item will be shown\n\t * and the kit will be hidden.\n\t */\n\tprivate SwapDiff doRevert(KitType slot)\n\t{\n\t\tif (slot \u003d\u003d KitType.HAIR)\n\t\t{\n\t\t\tInteger headItemId \u003d inventoryItemId(KitType.HEAD);\n\t\t\tif (headItemId !\u003d null \u0026\u0026 headItemId \u003e\u003d 0 \u0026\u0026 !ItemInteractions.HAIR_HELMS.contains(headItemId))\n\t\t\t{\n\t\t\t\treturn swap(CompoundSwap.single(KitType.HEAD, headItemId + ITEM_OFFSET), SwapMode.REVERT, SwapMode.PREVIEW);\n\t\t\t}\n\t\t}\n\t\telse if (slot \u003d\u003d KitType.JAW)\n\t\t{\n\t\t\tInteger headItemId \u003d inventoryItemId(KitType.HEAD);\n\t\t\tif (headItemId !\u003d null \u0026\u0026 headItemId \u003e\u003d 0 \u0026\u0026 ItemInteractions.NO_JAW_HELMS.contains(headItemId))\n\t\t\t{\n\t\t\t\treturn swap(CompoundSwap.single(KitType.HEAD, headItemId + ITEM_OFFSET), SwapMode.REVERT, SwapMode.PREVIEW);\n\t\t\t}\n\t\t}\n\t\telse if (slot \u003d\u003d KitType.ARMS)\n\t\t{\n\t\t\tInteger torsoItemId \u003d inventoryItemId(KitType.TORSO);\n\t\t\tif (torsoItemId !\u003d null \u0026\u0026 torsoItemId \u003e\u003d 0 \u0026\u0026 !ItemInteractions.ARMS_TORSOS.contains(torsoItemId))\n\t\t\t{\n\t\t\t\treturn swap(CompoundSwap.single(KitType.TORSO, torsoItemId + ITEM_OFFSET), SwapMode.REVERT, SwapMode.PREVIEW);\n\t\t\t}\n\t\t}\n\t\tInteger originalItemId \u003d inventoryItemId(slot);\n\t\tInteger originalKitId \u003d savedSwaps.getRealKit(slot, gender);\n\t\tif (originalKitId \u003d\u003d -KIT_OFFSET)\n\t\t{\n\t\t\toriginalKitId \u003d null;\n\t\t}\n\t\tint equipmentId;\n\t\tif (originalItemId !\u003d null)\n\t\t{\n\t\t\tequipmentId \u003d originalItemId \u003c 0 ? 0 : originalItemId + ITEM_OFFSET;\n\t\t}\n\t\telse if (originalKitId !\u003d null)\n\t\t{\n\t\t\tequipmentId \u003d originalKitId \u003c 0 ? 0 : originalKitId + KIT_OFFSET;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tequipmentId \u003d 0;\n\t\t}\n\t\treturn swap(CompoundSwap.single(slot, equipmentId), SwapMode.REVERT, SwapMode.PREVIEW);\n\t}\n\n\tprivate SwapDiff doRevert(ColorType type)\n\t{\n\t\tInteger originalColorId \u003d savedSwaps.getRealColor(type);\n\t\treturn swap(type, originalColorId, SwapMode.REVERT);\n\t}\n\n\tprivate SwapDiff doRevertIcon()\n\t{\n\t\tJawIcon revertIcon \u003d savedSwaps.getRealIcon();\n\t\tif (revertIcon \u003d\u003d null)\n\t\t{\n\t\t\trevertIcon \u003d JawIcon.NOTHING;\n\t\t}\n\t\tint jawEquipId \u003d combineJawIcon(null, revertIcon);\n\t\tJawKit kit \u003d JawKit.fromEquipmentId(jawEquipId);\n\t\tif (kit !\u003d null)\n\t\t{\n\t\t\tInteger kitId \u003d kit.getKitId(gender);\n\t\t\tif (kitId !\u003d null)\n\t\t\t{\n\t\t\t\tMap\u003cSwapDiff.Change.Type, SwapDiff.Change\u003e changes \u003d swap(KitType.JAW, kitId + KIT_OFFSET,\n\t\t\t\t\tSwapMode.PREVIEW, SwapMode.REVERT, false);\n\t\t\t\tSwapDiff.Change iconChange \u003d changes.get(SwapDiff.Change.Type.ICON);\n\t\t\t\treturn new SwapDiff(new HashMap\u003c\u003e(), new HashMap\u003c\u003e(), iconChange, null);\n\t\t\t}\n\t\t}\n\t\treturn SwapDiff.blank();\n\t}\n\n\t/**\n\t * Combines given jaw equipment id and icon to one equipment id. If either are null, will use current saved\n\t * values.\n\t */\n\tprivate int combineJawIcon(Integer jawEquipId, @Nullable JawIcon icon)\n\t{\n\t\tint finalJawId;\n\t\tif (jawEquipId !\u003d null)\n\t\t{\n\t\t\tfinalJawId \u003d jawEquipId;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tInteger jawKitId \u003d savedSwaps.getKit(KitType.JAW);\n\t\t\tif (jawKitId !\u003d null)\n\t\t\t{\n\t\t\t\tfinalJawId \u003d jawKitId + KIT_OFFSET;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfinalJawId \u003d savedSwaps.getRealKit(KitType.JAW, gender) + KIT_OFFSET;\n\t\t\t}\n\t\t}\n\t\tJawIcon finalJawIcon;\n\t\tif (icon !\u003d null)\n\t\t{\n\t\t\tfinalJawIcon \u003d icon;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfinalJawIcon \u003d savedSwaps.getSwappedIcon();\n\t\t\tif (finalJawIcon \u003d\u003d null)\n\t\t\t{\n\t\t\t\tfinalJawIcon \u003d savedSwaps.getRealIcon();\n\t\t\t}\n\t\t\tif (finalJawIcon \u003d\u003d null)\n\t\t\t{\n\t\t\t\tfinalJawIcon \u003d JawIcon.NOTHING;\n\t\t\t}\n\t\t}\n\t\tJawKit kit \u003d JawKit.fromEquipmentId(finalJawId);\n\t\tif (kit !\u003d null)\n\t\t{\n\t\t\tInteger itemId \u003d kit.getIconItemId(finalJawIcon);\n\t\t\tif (itemId !\u003d null)\n\t\t\t{\n\t\t\t\treturn itemId + ITEM_OFFSET;\n\t\t\t}\n\t\t}\n\t\treturn finalJawId;\n\t}\n\n\t@Nullable\n\tpublic KitType slotForId(Integer slotId)\n\t{\n\t\tif (slotId \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\treturn Arrays.stream(KitType.values())\n\t\t\t.filter(type -\u003e type.getIndex() \u003d\u003d slotId)\n\t\t\t.findFirst()\n\t\t\t.orElse(null);\n\t}\n\n\n\n\t@Nullable\n\tpublic ItemEquipmentStats equipmentStatsFor(int itemId)\n\t{\n\t\tItemStats stats \u003d itemManager.getItemStats(itemId);\n\t\treturn stats !\u003d null \u0026\u0026 stats.isEquipable() ? stats.getEquipment() : null;\n\t}\n\n\t/**\n\t * returns the equipment id of whatever is being displayed in the given slot\n\t */\n\tpublic int equipmentIdInSlot(KitType kitType)\n\t{\n\t\tif (savedSwaps.isHidden(kitType))\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\t\tInteger virtualItemId \u003d savedSwaps.getItem(kitType);\n\t\tif (virtualItemId !\u003d null \u0026\u0026 virtualItemId \u003e\u003d 0)\n\t\t{\n\t\t\treturn virtualItemId + ITEM_OFFSET;\n\t\t}\n\t\tInteger realItemId \u003d inventoryItemId(kitType);\n\t\tif (realItemId !\u003d null \u0026\u0026 realItemId \u003e\u003d 0)\n\t\t{\n\t\t\t// check if a virtual slot is obscuring the real item\n\t\t\tboolean realItemHidden \u003d false;\n\t\t\tswitch (kitType)\n\t\t\t{\n\t\t\t\tcase HEAD:\n\t\t\t\t\trealItemHidden \u003d (!ItemInteractions.HAIR_HELMS.contains(realItemId) \u0026\u0026\n\t\t\t\t\t\tsavedSwaps.containsSlot(KitType.HAIR)) ||\n\t\t\t\t\t\t(ItemInteractions.NO_JAW_HELMS.contains(realItemId) \u0026\u0026 savedSwaps.containsSlot(KitType.JAW));\n\t\t\t\t\tbreak;\n\t\t\t\tcase TORSO:\n\t\t\t\t\trealItemHidden \u003d !ItemInteractions.ARMS_TORSOS.contains(realItemId) \u0026\u0026\n\t\t\t\t\t\tsavedSwaps.containsSlot(KitType.ARMS);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (!realItemHidden)\n\t\t\t{\n\t\t\t\treturn realItemId + ITEM_OFFSET;\n\t\t\t}\n\t\t}\n\t\tif (kitType \u003d\u003d KitType.JAW)\n\t\t{\n\t\t\tint jawEquipId \u003d combineJawIcon(null, null);\n\t\t\tint headEquipId \u003d equipmentIdInSlot(KitType.HEAD);\n\t\t\tboolean jawlessIcon \u003d jawEquipId \u003e\u003d ITEM_OFFSET \u0026\u0026 JawKit.isNoJawIcon(jawEquipId - ITEM_OFFSET);\n\t\t\tif (!ItemInteractions.NO_JAW_HELMS.contains(headEquipId - ITEM_OFFSET) || jawEquipId \u003c\u003d 0 || jawlessIcon)\n\t\t\t{\n\t\t\t\treturn jawEquipId;\n\t\t\t}\n\t\t}\n\t\tInteger kitId \u003d kitIdFor(kitType);\n\t\treturn kitId !\u003d null \u0026\u0026 kitId \u003e\u003d 0 ? kitId + KIT_OFFSET : 0;\n\t}\n\n\t/**\n\t * returns the item id of the actual item equipped in the given slot (swaps are ignored)\n\t */\n\t@Nullable\n\tpublic Integer inventoryItemId(KitType kitType)\n\t{\n\t\tPlayer player \u003d client.getLocalPlayer();\n\t\tif (player \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\tPlayerComposition composition \u003d player.getPlayerComposition();\n\t\tif (composition \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\tItemContainer inventory \u003d client.getItemContainer(InventoryID.WORN);\n\t\tif (inventory \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\tItem item \u003d inventory.getItem(kitType.getIndex());\n\t\treturn item !\u003d null \u0026\u0026 item.getId() \u003e\u003d 0 ? item.getId() : null;\n\t}\n\n\t@Nullable\n\tprivate Integer kitIdFor(KitType kitType)\n\t{\n\t\tPlayer player \u003d client.getLocalPlayer();\n\t\tif (player \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\tPlayerComposition composition \u003d player.getPlayerComposition();\n\t\treturn composition \u003d\u003d null ? null : composition.getKitId(kitType);\n\t}\n\n\t@Nullable\n\tprivate Integer colorIdFor(ColorType colorType)\n\t{\n\t\tPlayer player \u003d client.getLocalPlayer();\n\t\tif (player \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\tPlayerComposition composition \u003d player.getPlayerComposition();\n\t\tif (composition \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\tint[] colors \u003d composition.getColors();\n\t\treturn colors[colorType.ordinal()];\n\t}\n\n\t// restores diff and returns a new diff with reverted changes (allows redo)\n\tprivate SwapDiff restore(SwapDiff swapDiff, boolean save)\n\t{\n\t\tFunction\u003cKitType, SwapMode\u003e swapModeProvider \u003d (slot) -\u003e {\n\t\t\tSwapDiff.Change change \u003d swapDiff.getSlotChanges().get(slot);\n\t\t\treturn !save ? SwapMode.PREVIEW : change !\u003d null \u0026\u0026 change.isUnnatural() ?\n\t\t\t\tSwapMode.SAVE :\n\t\t\t\tSwapMode.REVERT;\n\t\t};\n\t\tSwapDiff.Change iconChange \u003d swapDiff.getIconChange();\n\t\tSwapMode iconSwapMode \u003d (!save || iconChange \u003d\u003d null) ? SwapMode.PREVIEW :\n\t\t\ticonChange.isUnnatural() ? SwapMode.SAVE : SwapMode.REVERT;\n\t\tJawIcon icon \u003d iconChange !\u003d null ? JawIcon.fromId(iconChange.getId()) : null;\n\t\t// restore kits and items\n\t\tMap\u003cKitType, Integer\u003e restoreEquipIds \u003d sanitize(\n\t\t\tswapDiff.getSlotChanges().entrySet().stream().collect(\n\t\t\t\tCollectors.toMap(Map.Entry::getKey, e -\u003e e.getValue().getId()))\n\t\t);\n\t\tSwapDiff slotRestore \u003d CompoundSwap.fromMap(restoreEquipIds, icon)\n\t\t\t.stream()\n\t\t\t.map(c -\u003e this.swap(c, false, swapModeProvider, iconSwapMode))\n\t\t\t.reduce(SwapDiff::mergeOver)\n\t\t\t.orElse(SwapDiff.blank());\n\t\tSwapDiff colorRestore \u003d swapDiff.getColorChanges().entrySet()\n\t\t\t.stream()\n\t\t\t.map(e -\u003e {\n\t\t\t\tColorType type \u003d e.getKey();\n\t\t\t\tSwapDiff.Change change \u003d e.getValue();\n\t\t\t\tint colorId \u003d change.getId();\n\t\t\t\tSwapMode mode;\n\t\t\t\tif (save)\n\t\t\t\t{\n\t\t\t\t\tmode \u003d change.isUnnatural() ? SwapMode.SAVE : SwapMode.REVERT;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tmode \u003d SwapMode.PREVIEW;\n\t\t\t\t}\n\t\t\t\treturn swap(type, colorId, mode);\n\t\t\t})\n\t\t\t.reduce(SwapDiff::mergeOver)\n\t\t\t.orElse(SwapDiff.blank());\n\t\treturn slotRestore.mergeOver(colorRestore);\n\t}\n\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\FashionManager.java"},{"fileName":"Randomizer.java","content":"package eq.uirs.fashionscape.core.randomizer;\n\nimport eq.uirs.fashionscape.FashionscapeConfig;\nimport eq.uirs.fashionscape.FashionscapePlugin;\nimport eq.uirs.fashionscape.colors.ColorScorer;\nimport eq.uirs.fashionscape.core.CompoundSwap;\nimport eq.uirs.fashionscape.core.FashionManager;\nimport eq.uirs.fashionscape.core.SavedSwaps;\nimport eq.uirs.fashionscape.core.SwapDiff;\nimport eq.uirs.fashionscape.core.SwapMode;\nimport eq.uirs.fashionscape.data.anim.ItemInteractions;\nimport eq.uirs.fashionscape.data.color.ColorType;\nimport eq.uirs.fashionscape.data.color.Colorable;\nimport eq.uirs.fashionscape.data.kit.JawIcon;\nimport eq.uirs.fashionscape.data.kit.JawKit;\nimport eq.uirs.fashionscape.data.kit.Kit;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.Comparator;\nimport java.util.HashMap;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Objects;\nimport java.util.Random;\nimport java.util.Set;\nimport java.util.function.Supplier;\nimport java.util.stream.Collectors;\nimport java.util.stream.IntStream;\nimport javax.inject.Inject;\nimport javax.inject.Provider;\nimport javax.inject.Singleton;\nimport lombok.RequiredArgsConstructor;\nimport lombok.Value;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.api.kit.KitType;\nimport net.runelite.client.game.ItemEquipmentStats;\nimport net.runelite.client.game.ItemManager;\n\n@Slf4j\n@Singleton\n@RequiredArgsConstructor(onConstructor_ \u003d {@Inject})\npublic class Randomizer\n{\n\tprivate static final Map\u003cKitType, List\u003cKit\u003e\u003e KIT_TYPE_TO_KITS \u003d Arrays.stream(KitType.values())\n\t\t.collect(Collectors.toMap(s -\u003e s, s -\u003e Arrays.asList(Kit.allInSlot(s, true))));;\n\n\tprivate final Client client;\n\tprivate final ItemManager itemManager;\n\tprivate final FashionscapeConfig config;\n\tprivate final ColorScorer colorScorer;\n\tprivate final SavedSwaps savedSwaps;\n\tprivate final Provider\u003cFashionManager\u003e fashionManagerProvider;\n\n\t@Value\n\tprivate static class Candidate\n\t{\n\t\tpublic int itemId;\n\t\tpublic KitType slot;\n\t}\n\n\t/**\n\t * Randomizes items/kits/colors in unlocked slots.\n\t * Can only be called from the client thread.\n\t */\n\tpublic void shuffle()\n\t{\n\t\tFashionManager fashionManager \u003d fashionManagerProvider.get();\n\t\tfinal Random r \u003d new Random();\n\t\tRandomizerIntelligence intelligence \u003d config.randomizerIntelligence();\n\t\tint size \u003d intelligence.getDepth();\n\t\tif (size \u003e 1)\n\t\t{\n\t\t\tMap\u003cKitType, Integer\u003e lockedItems \u003d Arrays.stream(KitType.values())\n\t\t\t\t.filter(s -\u003e savedSwaps.isItemLocked(s) \u0026\u0026 savedSwaps.containsItem(s))\n\t\t\t\t.collect(Collectors.toMap(s -\u003e s, savedSwaps::getItem));\n\t\t\tif (savedSwaps.isIconLocked() \u0026\u0026 savedSwaps.containsIcon())\n\t\t\t{\n\t\t\t\tInteger iconItemId \u003d JawKit.NO_JAW.getIconItemId(savedSwaps.getSwappedIcon());\n\t\t\t\tif (iconItemId !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tlockedItems.put(KitType.JAW, iconItemId);\n\t\t\t\t}\n\t\t\t}\n\t\t\tMap\u003cColorType, Colorable\u003e lockedColors \u003d fashionManager.swappedColorsMap().entrySet().stream()\n\t\t\t\t.filter(e -\u003e savedSwaps.isColorLocked(e.getKey()) \u0026\u0026 savedSwaps.containsColor(e.getKey()))\n\t\t\t\t.collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\n\t\t\tcolorScorer.setPlayerInfo(lockedItems, lockedColors);\n\t\t}\n\t\tMap\u003cKitType, Boolean\u003e itemSlotsToRevert \u003d Arrays.stream(KitType.values())\n\t\t\t.collect(Collectors.toMap(slot -\u003e slot, savedSwaps::isItemLocked));\n\n\t\t// pre-fill slots that will be skipped with -1 as a placeholder\n\t\tMap\u003cKitType, Integer\u003e newSwaps \u003d Arrays.stream(KitType.values())\n\t\t\t.filter(itemSlotsToRevert::get)\n\t\t\t.collect(Collectors.toMap(s -\u003e s, s -\u003e -1));\n\t\tSet\u003cInteger\u003e skips \u003d FashionscapePlugin.getItemIdsToExclude(config);\n\t\tList\u003cCandidate\u003e candidates \u003d new ArrayList\u003c\u003e(size);\n\t\tList\u003cInteger\u003e randomOrder \u003d IntStream.range(0, client.getItemCount()).boxed().collect(Collectors.toList());\n\t\tCollections.shuffle(randomOrder);\n\t\tIterator\u003cInteger\u003e randomIterator \u003d randomOrder.iterator();\n\t\twhile (newSwaps.size() \u003c KitType.values().length \u0026\u0026 randomIterator.hasNext())\n\t\t{\n\t\t\tInteger i \u003d randomIterator.next();\n\t\t\tint canonical \u003d itemManager.canonicalize(i);\n\t\t\tif (skips.contains(canonical))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tItemComposition itemComposition \u003d itemManager.getItemComposition(canonical);\n\t\t\tint itemId \u003d itemComposition.getId();\n\t\t\tKitType slot \u003d fashionManager.slotForId(fashionManager.slotIdFor(itemComposition));\n\t\t\tif (slot !\u003d null \u0026\u0026 !newSwaps.containsKey(slot))\n\t\t\t{\n\t\t\t\t// Don\u0027t equip a 2h weapon if we already have a shield\n\t\t\t\tif (slot \u003d\u003d KitType.WEAPON)\n\t\t\t\t{\n\t\t\t\t\tItemEquipmentStats stats \u003d fashionManager.equipmentStatsFor(itemId);\n\t\t\t\t\tif (stats !\u003d null \u0026\u0026 stats.isTwoHanded() \u0026\u0026 newSwaps.get(KitType.SHIELD) !\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Don\u0027t equip a shield if we already have a 2h weapon (mark shield as removed instead)\n\t\t\t\telse if (slot \u003d\u003d KitType.SHIELD)\n\t\t\t\t{\n\t\t\t\t\tInteger weaponItemId \u003d newSwaps.get(KitType.WEAPON);\n\t\t\t\t\tif (weaponItemId !\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tItemEquipmentStats stats \u003d fashionManager.equipmentStatsFor(weaponItemId);\n\t\t\t\t\t\tif (stats !\u003d null \u0026\u0026 stats.isTwoHanded())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnewSwaps.put(KitType.SHIELD, -1);\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (slot \u003d\u003d KitType.HEAD)\n\t\t\t\t{\n\t\t\t\t\t// Don\u0027t equip a helm if it hides hair and hair is locked\n\t\t\t\t\tif (!ItemInteractions.HAIR_HELMS.contains(itemId) \u0026\u0026 savedSwaps.isKitLocked(KitType.HAIR))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\t// Don\u0027t equip a helm if it hides jaw and jaw is locked\n\t\t\t\t\tif (ItemInteractions.NO_JAW_HELMS.contains(itemId) \u0026\u0026 savedSwaps.isKitLocked(KitType.JAW))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (slot \u003d\u003d KitType.TORSO)\n\t\t\t\t{\n\t\t\t\t\t// Don\u0027t equip torso if it hides arms and arms is locked\n\t\t\t\t\tif (!ItemInteractions.ARMS_TORSOS.contains(itemId) \u0026\u0026 savedSwaps.isKitLocked(KitType.ARMS))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcandidates.add(new Candidate(itemComposition.getId(), slot));\n\t\t\t}\n\n\t\t\tif (!candidates.isEmpty() \u0026\u0026 candidates.size() \u003e\u003d size)\n\t\t\t{\n\t\t\t\tCandidate best;\n\t\t\t\tif (size \u003e 1)\n\t\t\t\t{\n\t\t\t\t\tbest \u003d candidates.stream()\n\t\t\t\t\t\t.max(Comparator.comparingDouble(c -\u003e colorScorer.score(c.itemId, c.slot)))\n\t\t\t\t\t\t.get();\n\t\t\t\t\tcolorScorer.addPlayerInfo(best.slot, best.itemId);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tbest \u003d candidates.get(0);\n\t\t\t\t}\n\t\t\t\tnewSwaps.put(best.slot, best.itemId);\n\t\t\t\tcandidates.clear();\n\t\t\t}\n\t\t}\n\t\t// slots filled with -1 were placeholders that need to be removed\n\t\tList\u003cKitType\u003e removes \u003d newSwaps.entrySet().stream()\n\t\t\t.filter(e -\u003e e.getValue() \u003c 0)\n\t\t\t.map(Map.Entry::getKey)\n\t\t\t.collect(Collectors.toList());\n\t\tremoves.forEach(newSwaps::remove);\n\n\t\t// shuffle colors\n\t\tMap\u003cColorType, Integer\u003e newColors \u003d new HashMap\u003c\u003e();\n\t\tList\u003cColorType\u003e allColorTypes \u003d Arrays.asList(ColorType.values().clone());\n\t\tCollections.shuffle(allColorTypes);\n\t\tfor (ColorType type : allColorTypes)\n\t\t{\n\t\t\tif (savedSwaps.isColorLocked(type))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tList\u003cColorable\u003e colorables \u003d Arrays.asList(type.getColorables().clone());\n\t\t\tif (colorables.isEmpty())\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tCollections.shuffle(colorables);\n\t\t\tint limit;\n\t\t\tswitch (intelligence)\n\t\t\t{\n\t\t\t\tcase LOW:\n\t\t\t\t\tlimit \u003d Math.max(1, colorables.size() / 4);\n\t\t\t\t\tbreak;\n\t\t\t\tcase MODERATE:\n\t\t\t\t\tlimit \u003d Math.max(1, colorables.size() / 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase HIGH:\n\t\t\t\t\tlimit \u003d colorables.size();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tlimit \u003d 1;\n\t\t\t}\n\t\t\tColorable best \u003d colorables.stream()\n\t\t\t\t.limit(limit)\n\t\t\t\t.max(Comparator.comparingDouble(c -\u003e colorScorer.score(c, type)))\n\t\t\t\t.orElse(colorables.get(0));\n\t\t\tcolorScorer.addPlayerColor(type, best);\n\t\t\tnewColors.put(type, best.getColorId(type));\n\t\t}\n\n\t\tSwapDiff totalDiff \u003d SwapDiff.blank();\n\n\t\t// convert to equipment ids\n\t\tMap\u003cKitType, Integer\u003e newEquipSwaps \u003d newSwaps.entrySet().stream()\n\t\t\t.collect(Collectors.toMap(Map.Entry::getKey, e -\u003e e.getValue() + FashionManager.ITEM_OFFSET));\n\n\t\t// swap items now before moving on to kits\n\t\tSwapDiff itemsDiff \u003d CompoundSwap.fromMap(newEquipSwaps, null).stream()\n\t\t\t.map(c -\u003e fashionManager.swap(c, SwapMode.SAVE))\n\t\t\t.reduce(SwapDiff::mergeOver)\n\t\t\t.orElse(SwapDiff.blank());\n\t\ttotalDiff \u003d totalDiff.mergeOver(itemsDiff);\n\n\t\t// See if remaining slots can be kit-swapped\n\t\tif (fashionManager.getGender() !\u003d null \u0026\u0026 !config.excludeBaseModels())\n\t\t{\n\t\t\tMap\u003cKitType, Integer\u003e kitSwaps \u003d Arrays.stream(KitType.values())\n\t\t\t\t.filter(slot -\u003e !newSwaps.containsKey(slot) \u0026\u0026 isOpen(slot))\n\t\t\t\t.map(slot -\u003e {\n\t\t\t\t\tList\u003cKit\u003e kits \u003d KIT_TYPE_TO_KITS.getOrDefault(slot, new ArrayList\u003c\u003e()).stream()\n\t\t\t\t\t\t.filter(k -\u003e k.getKitId(fashionManager.getGender()) !\u003d null)\n\t\t\t\t\t\t.collect(Collectors.toList());\n\t\t\t\t\treturn kits.isEmpty() ? null : kits.get(r.nextInt(kits.size()));\n\t\t\t\t})\n\t\t\t\t.filter(Objects::nonNull)\n\t\t\t\t.collect(Collectors.toMap(Kit::getKitType, k -\u003e k.getKitId(fashionManager.getGender())));\n\n\t\t\tMap\u003cKitType, Integer\u003e kitEquipSwaps \u003d kitSwaps.entrySet().stream()\n\t\t\t\t.collect(Collectors.toMap(Map.Entry::getKey, e -\u003e e.getValue() + FashionManager.KIT_OFFSET));\n\n\t\t\tSwapDiff kitsDiff \u003d CompoundSwap.fromMap(kitEquipSwaps, null)\n\t\t\t\t.stream()\n\t\t\t\t.map(c -\u003e fashionManager.swap(c, SwapMode.SAVE))\n\t\t\t\t.reduce(SwapDiff::mergeOver)\n\t\t\t\t.orElse(SwapDiff.blank());\n\n\t\t\ttotalDiff \u003d totalDiff.mergeOver(kitsDiff);\n\t\t}\n\n\t\tif (!config.excludeNonStandardItems() \u0026\u0026 !config.excludeMembersItems() \u0026\u0026 !savedSwaps.isIconLocked())\n\t\t{\n\t\t\tList\u003cJawIcon\u003e icons \u003d Arrays.asList(JawIcon.values());\n\t\t\tCollections.shuffle(icons);\n\t\t\tint limit \u003d icons.size();\n\t\t\tif (intelligence \u003d\u003d RandomizerIntelligence.NONE)\n\t\t\t{\n\t\t\t\tlimit \u003d 1;\n\t\t\t}\n\t\t\tMap\u003cJawIcon, Double\u003e scores \u003d icons.stream()\n\t\t\t\t.limit(limit)\n\t\t\t\t.collect(Collectors.toMap(i -\u003e i, i -\u003e {\n\t\t\t\t\tInteger itemId \u003d JawKit.NO_JAW.getIconItemId(i);\n\t\t\t\t\treturn itemId !\u003d null ? colorScorer.score(itemId, null) : 0;\n\t\t\t\t}));\n\t\t\t// only icon swap if \u003e75% match (if intelligence is \u003e NONE)\n\t\t\tJawIcon icon \u003d scores.entrySet().stream()\n\t\t\t\t.filter(e -\u003e intelligence \u003d\u003d RandomizerIntelligence.NONE || e.getValue() \u003e 0.75)\n\t\t\t\t.max(Comparator.comparingDouble(Map.Entry::getValue))\n\t\t\t\t.map(Map.Entry::getKey)\n\t\t\t\t.orElse(JawIcon.NOTHING);\n\t\t\tSwapDiff iconDiff \u003d fashionManager.swap(CompoundSwap.fromIcon(icon), SwapMode.PREVIEW, SwapMode.SAVE);\n\t\t\ttotalDiff \u003d totalDiff.mergeOver(iconDiff);\n\t\t}\n\n\t\tSwapDiff colorsDiff \u003d newColors.entrySet().stream()\n\t\t\t.filter(e -\u003e e.getValue() \u003e\u003d 0)\n\t\t\t.map(e -\u003e fashionManager.swap(e.getKey(), e.getValue(), SwapMode.SAVE))\n\t\t\t.reduce(SwapDiff::mergeOver)\n\t\t\t.orElse(SwapDiff.blank());\n\n\t\ttotalDiff \u003d totalDiff.mergeOver(colorsDiff);\n\n\t\tfashionManager.getSwapDiffHistory().appendToUndo(totalDiff);\n\t}\n\n\t/**\n\t * @return true if the slot does not have an item (real or virtual) obscuring it (directly or indirectly)\n\t */\n\tpublic boolean isOpen(KitType slot)\n\t{\n\t\tif (slot \u003d\u003d null || savedSwaps.isKitLocked(slot) || savedSwaps.containsItem(slot))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\tFashionManager fashionManager \u003d fashionManagerProvider.get();\n\t\tSupplier\u003cBoolean\u003e fallback \u003d () -\u003e {\n\t\t\tif (fashionManager.equipmentIdInSlot(slot) \u003e 0)\n\t\t\t{\n\t\t\t\t// equipment id must be a kit since there can\u0027t be an item at this point\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tInteger actualEquipId \u003d fashionManager.inventoryItemId(slot);\n\t\t\t\treturn actualEquipId \u003d\u003d null || actualEquipId \u003c FashionManager.ITEM_OFFSET;\n\t\t\t}\n\t\t};\n\t\tswitch (slot)\n\t\t{\n\t\t\tcase HAIR:\n\t\t\tcase JAW:\n\t\t\t\tint headEquipId \u003d fashionManager.equipmentIdInSlot(KitType.HEAD);\n\t\t\t\tif (headEquipId \u003e FashionManager.ITEM_OFFSET)\n\t\t\t\t{\n\t\t\t\t\tint headItemId \u003d headEquipId - FashionManager.ITEM_OFFSET;\n\t\t\t\t\tif (slot \u003d\u003d KitType.HAIR)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn ItemInteractions.HAIR_HELMS.contains(headItemId);\n\t\t\t\t\t}\n\t\t\t\t\treturn !ItemInteractions.NO_JAW_HELMS.contains(headItemId);\n\t\t\t\t}\n\t\t\t\treturn fallback.get();\n\t\t\tcase ARMS:\n\t\t\t\tint torsoEquipId \u003d fashionManager.equipmentIdInSlot(KitType.TORSO);\n\t\t\t\tif (torsoEquipId \u003e FashionManager.ITEM_OFFSET)\n\t\t\t\t{\n\t\t\t\t\tint torsoItemId \u003d torsoEquipId - FashionManager.ITEM_OFFSET;\n\t\t\t\t\treturn ItemInteractions.ARMS_TORSOS.contains(torsoItemId);\n\t\t\t\t}\n\t\t\t\treturn fallback.get();\n\t\t\tdefault:\n\t\t\t\treturn fallback.get();\n\t\t}\n\t}\n\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\randomizer\\Randomizer.java"},{"fileName":"RandomizerIntelligence.java","content":"package eq.uirs.fashionscape.core.randomizer;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n/**\n * Determines the size of the queue for scoring the \"best\" matched item via randomizer request\n */\n@Getter\n@RequiredArgsConstructor\npublic enum RandomizerIntelligence\n{\n\tNONE(1),\n\tLOW(15),\n\tMODERATE(30),\n\tHIGH(50);\n\n\tprivate final int depth;\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\randomizer\\RandomizerIntelligence.java"},{"fileName":"SavedSwaps.java","content":"package eq.uirs.fashionscape.core;\n\nimport com.google.common.base.Objects;\nimport com.google.common.collect.ImmutableSet;\nimport com.google.common.collect.Sets;\nimport eq.uirs.fashionscape.FashionscapeConfig;\nimport eq.uirs.fashionscape.core.event.ColorChanged;\nimport eq.uirs.fashionscape.core.event.ColorLockChanged;\nimport eq.uirs.fashionscape.core.event.IconChanged;\nimport eq.uirs.fashionscape.core.event.IconLockChanged;\nimport eq.uirs.fashionscape.core.event.ItemChanged;\nimport eq.uirs.fashionscape.core.event.KitChanged;\nimport eq.uirs.fashionscape.core.event.KnownKitChanged;\nimport eq.uirs.fashionscape.core.event.LockChanged;\nimport eq.uirs.fashionscape.core.event.SwapEvent;\nimport eq.uirs.fashionscape.core.event.SwapEventListener;\nimport eq.uirs.fashionscape.data.color.ColorType;\nimport eq.uirs.fashionscape.data.kit.ArmsKit;\nimport eq.uirs.fashionscape.data.kit.BootsKit;\nimport eq.uirs.fashionscape.data.kit.HairKit;\nimport eq.uirs.fashionscape.data.kit.HandsKit;\nimport eq.uirs.fashionscape.data.kit.JawIcon;\nimport eq.uirs.fashionscape.data.kit.JawKit;\nimport eq.uirs.fashionscape.data.kit.LegsKit;\nimport eq.uirs.fashionscape.data.kit.TorsoKit;\nimport java.util.Arrays;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.LinkedList;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.concurrent.Future;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.concurrent.TimeUnit;\nimport java.util.stream.Collectors;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.kit.KitType;\nimport net.runelite.client.config.ConfigManager;\nimport org.apache.commons.lang3.SerializationUtils;\n\n/**\n * observable wrapper for user\u0027s item swaps. Persists swaps to plugin config.\n */\n@Singleton\n@Slf4j\npublic class SavedSwaps\n{\n\tprivate static final int DEBOUNCE_DELAY_MS \u003d 500;\n\t// when player\u0027s kit info is not known, fall back to showing some default values\n\tprivate static final Map\u003cKitType, Integer\u003e FALLBACK_MASC_KITS \u003d new HashMap\u003c\u003e();\n\tprivate static final Map\u003cKitType, Integer\u003e FALLBACK_FEM_KITS \u003d new HashMap\u003c\u003e();\n\n\tstatic\n\t{\n\t\tFALLBACK_MASC_KITS.put(KitType.HAIR, HairKit.BALD.getKitId(0));\n\t\tFALLBACK_MASC_KITS.put(KitType.JAW, JawKit.GOATEE.getKitId(0));\n\t\tFALLBACK_MASC_KITS.put(KitType.TORSO, TorsoKit.PLAIN.getKitId(0));\n\t\tFALLBACK_MASC_KITS.put(KitType.ARMS, ArmsKit.REGULAR.getKitId(0));\n\t\tFALLBACK_MASC_KITS.put(KitType.LEGS, LegsKit.PLAIN_L.getKitId(0));\n\t\tFALLBACK_MASC_KITS.put(KitType.HANDS, HandsKit.PLAIN_H.getKitId(0));\n\t\tFALLBACK_MASC_KITS.put(KitType.BOOTS, BootsKit.SMALL.getKitId(0));\n\n\t\tFALLBACK_FEM_KITS.put(KitType.HAIR, HairKit.PIGTAILS.getKitId(1));\n\t\tFALLBACK_FEM_KITS.put(KitType.JAW, JawKit.CLEAN_SHAVEN.getKitId(1));\n\t\tFALLBACK_FEM_KITS.put(KitType.TORSO, TorsoKit.SIMPLE.getKitId(1));\n\t\tFALLBACK_FEM_KITS.put(KitType.ARMS, ArmsKit.SHORT_SLEEVES.getKitId(1));\n\t\tFALLBACK_FEM_KITS.put(KitType.LEGS, LegsKit.PLAIN_L.getKitId(1));\n\t\tFALLBACK_FEM_KITS.put(KitType.HANDS, HandsKit.PLAIN_H.getKitId(1));\n\t\tFALLBACK_FEM_KITS.put(KitType.BOOTS, BootsKit.SMALL.getKitId(1));\n\t}\n\n\t@Inject\n\tprivate FashionscapeConfig config;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Inject\n\tprivate ScheduledExecutorService executor;\n\n\t// player\u0027s real kit ids, e.g., hairstyles, base clothing\n\t@Getter\n\tprivate final HashMap\u003cKitType, Integer\u003e realKitIds \u003d new HashMap\u003c\u003e();\n\t// player\u0027s real base colors\n\tprivate final Map\u003cColorType, Integer\u003e realColorIds \u003d new HashMap\u003c\u003e();\n\t// player\u0027s real jaw icon (derived from real jaw item)\n\t@Getter\n\tprivate JawIcon realIcon \u003d JawIcon.NOTHING;\n\n\tprivate final HashMap\u003cKitType, Integer\u003e swappedItemIds \u003d new HashMap\u003c\u003e();\n\tprivate final HashMap\u003cKitType, Integer\u003e swappedKitIds \u003d new HashMap\u003c\u003e();\n\tprivate final HashMap\u003cColorType, Integer\u003e swappedColorIds \u003d new HashMap\u003c\u003e();\n\t// swapped icon is stored as item id\n\t@Getter\n\tprivate JawIcon swappedIcon \u003d null;\n\t// currently only applicable for slots that exclusively hold items\n\t@Getter\n\tprivate final HashSet\u003cKitType\u003e hiddenSlots \u003d new HashSet\u003c\u003e();\n\n\tprivate final Set\u003cKitType\u003e lockedKits \u003d new HashSet\u003c\u003e();\n\t// If kit is locked, item must also be locked. If item is unlocked, kit must also be unlocked.\n\t// Only valid state where locks differ is item locked, kit unlocked\n\tprivate final Set\u003cKitType\u003e lockedItems \u003d new HashSet\u003c\u003e();\n\tprivate final Set\u003cColorType\u003e lockedColors \u003d new HashSet\u003c\u003e();\n\tprivate boolean lockedIcon \u003d false;\n\n\tprivate final Map\u003cString, List\u003cSwapEventListener\u003c? extends SwapEvent\u003e\u003e\u003e listeners \u003d new HashMap\u003c\u003e();\n\n\t// should only load once since config might be behind local state\n\tprivate boolean hasLoadedConfig \u003d false;\n\tprivate Future\u003c?\u003e colorSaveFuture \u003d null;\n\tprivate Future\u003c?\u003e kitsSaveFuture \u003d null;\n\tprivate Future\u003c?\u003e equipSaveFuture \u003d null;\n\n\t/**\n\t * Reads saved swaps from config. Should be called after listeners are set (i.e., after panels created)\n\t */\n\tvoid loadFromConfig()\n\t{\n\t\tif (!hasLoadedConfig)\n\t\t{\n\t\t\thasLoadedConfig \u003d true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tbyte[] equipment \u003d config.currentEquipment();\n\t\tbyte[] colors \u003d config.currentColors();\n\t\tInteger iconId \u003d config.currentIcon();\n\t\ttry\n\t\t{\n\t\t\tMap\u003cKitType, Integer\u003e equipIds \u003d SerializationUtils.deserialize(equipment);\n\t\t\tequipIds.forEach((slot, equipId) -\u003e {\n\t\t\t\tif (equipId \u003e\u003d FashionManager.KIT_OFFSET \u0026\u0026 equipId \u003c FashionManager.ITEM_OFFSET)\n\t\t\t\t{\n\t\t\t\t\tputKit(slot, equipId - FashionManager.KIT_OFFSET);\n\t\t\t\t}\n\t\t\t\telse if (equipId \u003e\u003d FashionManager.ITEM_OFFSET)\n\t\t\t\t{\n\t\t\t\t\tputItem(slot, equipId - FashionManager.ITEM_OFFSET);\n\t\t\t\t}\n\t\t\t});\n\t\t\tMap\u003cInteger, Integer\u003e colorIds \u003d SerializationUtils.deserialize(colors);\n\t\t\tColorType[] allColorTypes \u003d ColorType.values();\n\t\t\tcolorIds.forEach((typeId, colorId) -\u003e putColor(allColorTypes[typeId], colorId));\n\t\t\tJawIcon icon \u003d JawIcon.fromId(iconId);\n\t\t\tif (icon !\u003d null)\n\t\t\t{\n\t\t\t\tputIcon(icon);\n\t\t\t}\n\t\t}\n\t\tcatch (Exception ignored)\n\t\t{\n\t\t\t// ignore\n\t\t}\n\t}\n\n\t/**\n\t * Loads default kits from config. Called during pre-refresh check, on first login and on rsn change\n\t */\n\tvoid loadRSProfileConfig()\n\t{\n\t\tbyte[] realKits \u003d configManager.getRSProfileConfiguration(FashionscapeConfig.GROUP,\n\t\t\tFashionscapeConfig.KEY_REAL_KITS, byte[].class);\n\t\ttry\n\t\t{\n\t\t\trealKitIds.putAll(SerializationUtils.deserialize(realKits));\n\t\t}\n\t\tcatch (Exception ignored)\n\t\t{\n\t\t\t// ignore\n\t\t}\n\t}\n\n\tvoid addEventListener(SwapEventListener\u003c? extends SwapEvent\u003e listener)\n\t{\n\t\tString key \u003d listener.getKey();\n\t\tList\u003cSwapEventListener\u003c?\u003e\u003e list \u003d listeners.getOrDefault(key, new LinkedList\u003c\u003e());\n\t\tlist.add(listener);\n\t\tlisteners.put(key, list);\n\t}\n\n\tvoid removeListeners()\n\t{\n\t\tlisteners.clear();\n\t}\n\n\tSet\u003cMap.Entry\u003cKitType, Integer\u003e\u003e itemEntries()\n\t{\n\t\treturn ImmutableSet.copyOf(swappedItemIds.entrySet());\n\t}\n\n\tSet\u003cMap.Entry\u003cKitType, Integer\u003e\u003e hiddenSlotEntries()\n\t{\n\t\treturn ImmutableSet.copyOf(\n\t\t\thiddenSlots.stream()\n\t\t\t\t.collect(Collectors.toMap(v -\u003e v, v -\u003e 0))\n\t\t\t\t.entrySet()\n\t\t);\n\t}\n\n\tSet\u003cMap.Entry\u003cKitType, Integer\u003e\u003e kitEntries()\n\t{\n\t\treturn ImmutableSet.copyOf(swappedKitIds.entrySet());\n\t}\n\n\tSet\u003cMap.Entry\u003cColorType, Integer\u003e\u003e colorEntries()\n\t{\n\t\treturn ImmutableSet.copyOf(swappedColorIds.entrySet());\n\t}\n\n\tpublic Integer getItem(KitType slot)\n\t{\n\t\treturn swappedItemIds.get(slot);\n\t}\n\n\tInteger getKit(KitType slot)\n\t{\n\t\treturn swappedKitIds.get(slot);\n\t}\n\n\tInteger getColor(ColorType type)\n\t{\n\t\treturn swappedColorIds.get(type);\n\t}\n\n\tInteger getRealColor(ColorType type)\n\t{\n\t\treturn realColorIds.get(type);\n\t}\n\n\t/**\n\t * Returns the player\u0027s actual kit id in the given slot, or null if it\u0027s not known.\n\t */\n\tInteger getRealKit(KitType slot)\n\t{\n\t\treturn realKitIds.get(slot);\n\t}\n\n\t/**\n\t * Returns the player\u0027s actual kit id in the given slot, or a fallback kit id if it\u0027s not known\n\t */\n\tint getRealKit(KitType slot, Integer gender)\n\t{\n\t\tInteger realKit \u003d getRealKit(slot);\n\t\treturn realKit !\u003d null ? realKit : getFallbackKit(slot, gender);\n\t}\n\n\tint getFallbackKit(KitType slot, Integer gender)\n\t{\n\t\tif (gender \u003d\u003d null || slot \u003d\u003d null)\n\t\t{\n\t\t\treturn -FashionManager.KIT_OFFSET;\n\t\t}\n\t\tMap\u003cKitType, Integer\u003e map \u003d gender \u003d\u003d 1 ? FALLBACK_FEM_KITS : FALLBACK_MASC_KITS;\n\t\tint result \u003d map.getOrDefault(slot, -FashionManager.KIT_OFFSET);\n\t\tif (result !\u003d -FashionManager.KIT_OFFSET)\n\t\t{\n\t\t\tfireEvent(new KnownKitChanged(true, slot));\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic boolean containsSlot(KitType slot)\n\t{\n\t\tif (swappedKitIds.containsKey(slot))\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\treturn containsItem(slot);\n\t}\n\n\tpublic boolean containsItem(KitType slot)\n\t{\n\t\treturn swappedItemIds.containsKey(slot);\n\t}\n\n\tpublic boolean containsIcon()\n\t{\n\t\treturn swappedIcon !\u003d null;\n\t}\n\n\tpublic boolean isHidden(KitType slot)\n\t{\n\t\treturn hiddenSlots.contains(slot);\n\t}\n\n\tpublic boolean containsColor(ColorType type)\n\t{\n\t\treturn swappedColorIds.containsKey(type);\n\t}\n\n\tvoid putItem(KitType slot, Integer itemId)\n\t{\n\t\tif (isSlotLocked(slot))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (slot \u003d\u003d KitType.JAW)\n\t\t{\n\t\t\tlog.warn(\"putting jaw {} - this should not happen\", itemId);\n\t\t}\n\t\tInteger oldId \u003d swappedItemIds.put(slot, itemId);\n\t\thiddenSlots.remove(slot);\n\t\tif (swappedKitIds.containsKey(slot))\n\t\t{\n\t\t\tremoveKit(slot);\n\t\t}\n\t\tif (!itemId.equals(oldId))\n\t\t{\n\t\t\tfireEvent(new ItemChanged(slot, itemId));\n\t\t\tsaveEquipmentConfigDebounced();\n\t\t}\n\t}\n\n\tvoid putIcon(JawIcon icon)\n\t{\n\t\tInteger previousId \u003d swappedIcon !\u003d null ? swappedIcon.getId() : null;\n\t\tInteger newId \u003d icon !\u003d null ? icon.getId() : null;\n\t\tswappedIcon \u003d icon;\n\t\tif (!Objects.equal(previousId, newId))\n\t\t{\n\t\t\tfireEvent(new IconChanged(icon));\n\t\t\tsaveEquipmentConfigDebounced();\n\t\t}\n\t}\n\n\t// this differs from removing, which leaves the slot open for the real item/kit to show\n\tvoid putNothing(KitType slot)\n\t{\n\t\tif (lockedItems.contains(slot))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tInteger oldId \u003d swappedItemIds.remove(slot);\n\t\tboolean wasNotHidden \u003d hiddenSlots.add(slot);\n\t\tif (oldId !\u003d null || wasNotHidden)\n\t\t{\n\t\t\tfireEvent(new ItemChanged(slot, -1));\n\t\t\tsaveEquipmentConfigDebounced();\n\t\t}\n\t}\n\n\tvoid putKit(KitType slot, Integer kitId)\n\t{\n\t\tif (lockedKits.contains(slot))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tInteger oldId \u003d swappedKitIds.put(slot, kitId);\n\t\tif (swappedItemIds.containsKey(slot))\n\t\t{\n\t\t\tremoveItem(slot);\n\t\t}\n\t\tif (!kitId.equals(oldId))\n\t\t{\n\t\t\tfireEvent(new KitChanged(slot, kitId));\n\t\t\tsaveEquipmentConfigDebounced();\n\t\t}\n\t}\n\n\tvoid putColor(ColorType type, Integer colorId)\n\t{\n\t\tInteger oldId \u003d swappedColorIds.put(type, colorId);\n\t\tif (!colorId.equals(oldId))\n\t\t{\n\t\t\tfireEvent(new ColorChanged(type, colorId));\n\t\t\tsaveColorConfigDebounced();\n\t\t}\n\t}\n\n\tvoid putRealKit(KitType slot, Integer kitId)\n\t{\n\t\tfireEvent(new KnownKitChanged(false, slot));\n\t\tInteger oldKitId \u003d realKitIds.put(slot, kitId);\n\t\tif (!kitId.equals(oldKitId))\n\t\t{\n\t\t\tsaveRealKitsDebounced();\n\t\t}\n\t}\n\n\tvoid putRealColor(ColorType type, Integer colorId)\n\t{\n\t\trealColorIds.put(type, colorId);\n\t}\n\n\tvoid putRealIcon(JawIcon icon)\n\t{\n\t\trealIcon \u003d icon;\n\t}\n\n\tvoid removeSlot(KitType slot)\n\t{\n\t\tremoveItem(slot);\n\t\tremoveKit(slot);\n\t}\n\n\tprivate void removeItem(KitType slot)\n\t{\n\t\tif (isItemLocked(slot))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tInteger oldId \u003d swappedItemIds.remove(slot);\n\t\tboolean wasHidden \u003d hiddenSlots.remove(slot);\n\t\tif (oldId !\u003d null || wasHidden)\n\t\t{\n\t\t\tfireEvent(new ItemChanged(slot, null));\n\t\t\tsaveEquipmentConfigDebounced();\n\t\t}\n\t}\n\n\tprivate void removeKit(KitType slot)\n\t{\n\t\tif (isKitLocked(slot))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tInteger oldId \u003d swappedKitIds.remove(slot);\n\t\tif (oldId !\u003d null)\n\t\t{\n\t\t\tfireEvent(new KitChanged(slot, null));\n\t\t\tsaveEquipmentConfigDebounced();\n\t\t}\n\t}\n\n\tvoid removeColor(ColorType type)\n\t{\n\t\tInteger oldId \u003d swappedColorIds.remove(type);\n\t\tif (oldId !\u003d null)\n\t\t{\n\t\t\tfireEvent(new ColorChanged(type, null));\n\t\t\tsaveColorConfigDebounced();\n\t\t}\n\t}\n\n\tvoid removeIcon()\n\t{\n\t\tif (swappedIcon !\u003d null)\n\t\t{\n\t\t\tswappedIcon \u003d null;\n\t\t\tfireEvent(new IconChanged(null));\n\t\t\tsaveEquipmentConfigDebounced();\n\t\t}\n\t}\n\n\tvoid clearSwapped()\n\t{\n\t\tSet\u003cKitType\u003e swappedItems \u003d Sets.union(new HashSet\u003c\u003e(swappedItemIds.keySet()), new HashSet\u003c\u003e(hiddenSlots));\n\t\tSet\u003cKitType\u003e itemSlots \u003d Sets.difference(swappedItems, lockedItems);\n\t\titemSlots.forEach(this::removeItem);\n\t\tSet\u003cKitType\u003e kitSlots \u003d Sets.difference(new HashSet\u003c\u003e(swappedKitIds.keySet()), lockedKits);\n\t\tkitSlots.forEach(this::removeKit);\n\t\tSet\u003cColorType\u003e colorTypes \u003d Sets.difference(new HashSet\u003c\u003e(swappedColorIds.keySet()), lockedColors);\n\t\tcolorTypes.forEach(this::removeColor);\n\t\tremoveIcon();\n\t}\n\n\tvoid clearRealKits()\n\t{\n\t\tboolean realKitsNeedRefresh \u003d realKitIds.isEmpty();\n\t\trealKitIds.clear();\n\t\tif (realKitsNeedRefresh)\n\t\t{\n\t\t\tsaveRealKitsImmediate();\n\t\t}\n\t}\n\n\tSet\u003cKitType\u003e getAllLockedKits()\n\t{\n\t\treturn Arrays.stream(KitType.values())\n\t\t\t.filter(lockedKits::contains)\n\t\t\t.collect(Collectors.toSet());\n\t}\n\n\tvoid setLockedKits(Set\u003cKitType\u003e kits)\n\t{\n\t\tfor (KitType slot : KitType.values())\n\t\t{\n\t\t\tif (lockedKits.contains(slot) \u0026\u0026 !kits.contains(slot))\n\t\t\t{\n\t\t\t\tlockedKits.remove(slot);\n\t\t\t\tfireEvent(new LockChanged(slot, false, LockChanged.Type.KIT));\n\t\t\t}\n\t\t\telse if (!lockedKits.contains(slot) \u0026\u0026 kits.contains(slot))\n\t\t\t{\n\t\t\t\tlockedKits.add(slot);\n\t\t\t\tfireEvent(new LockChanged(slot, true, LockChanged.Type.KIT));\n\t\t\t}\n\t\t}\n\t}\n\n\tSet\u003cKitType\u003e getAllLockedItems()\n\t{\n\t\treturn Arrays.stream(KitType.values())\n\t\t\t.filter(lockedItems::contains)\n\t\t\t.collect(Collectors.toSet());\n\t}\n\n\tvoid setLockedItems(Set\u003cKitType\u003e items)\n\t{\n\t\tfor (KitType slot : KitType.values())\n\t\t{\n\t\t\tif (lockedItems.contains(slot) \u0026\u0026 !items.contains(slot))\n\t\t\t{\n\t\t\t\tlockedItems.remove(slot);\n\t\t\t\tfireEvent(new LockChanged(slot, false, LockChanged.Type.ITEM));\n\t\t\t}\n\t\t\telse if (!lockedItems.contains(slot) \u0026\u0026 items.contains(slot))\n\t\t\t{\n\t\t\t\tlockedItems.add(slot);\n\t\t\t\tfireEvent(new LockChanged(slot, true, LockChanged.Type.ITEM));\n\t\t\t}\n\t\t}\n\t}\n\n\tvoid setIconLocked(boolean locked)\n\t{\n\t\tlockedIcon \u003d locked;\n\t}\n\n\tpublic boolean isSlotLocked(KitType slot)\n\t{\n\t\treturn isKitLocked(slot) || isItemLocked(slot);\n\t}\n\n\tpublic boolean isKitLocked(KitType slot)\n\t{\n\t\treturn lockedKits.contains(slot);\n\t}\n\n\tpublic boolean isItemLocked(KitType slot)\n\t{\n\t\treturn lockedItems.contains(slot);\n\t}\n\n\tpublic boolean isColorLocked(ColorType type)\n\t{\n\t\treturn lockedColors.contains(type);\n\t}\n\n\tpublic boolean isIconLocked()\n\t{\n\t\treturn lockedIcon;\n\t}\n\n\tvoid toggleItemLocked(KitType slot)\n\t{\n\t\tif (lockedItems.contains(slot))\n\t\t{\n\t\t\tlockedItems.remove(slot);\n\t\t\t// if item unlocks, kit must also unlock\n\t\t\tlockedKits.remove(slot);\n\t\t\tfireEvent(new LockChanged(slot, false, LockChanged.Type.KIT));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlockedItems.add(slot);\n\t\t}\n\t\tfireEvent(new LockChanged(slot, isItemLocked(slot), LockChanged.Type.ITEM));\n\t}\n\n\tvoid toggleKitLocked(KitType slot)\n\t{\n\t\tif (lockedKits.contains(slot))\n\t\t{\n\t\t\tlockedKits.remove(slot);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlockedKits.add(slot);\n\t\t\t// if kit is locked, item must be locked too\n\t\t\tlockedItems.add(slot);\n\t\t\tfireEvent(new LockChanged(slot, true, LockChanged.Type.ITEM));\n\t\t}\n\t\tfireEvent(new LockChanged(slot, isSlotLocked(slot), LockChanged.Type.KIT));\n\t}\n\n\tvoid toggleColorLocked(ColorType type)\n\t{\n\t\tif (lockedColors.contains(type))\n\t\t{\n\t\t\tlockedColors.remove(type);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlockedColors.add(type);\n\t\t}\n\t\tfireEvent(new ColorLockChanged(type, isColorLocked(type)));\n\t}\n\n\tvoid toggleIconLocked()\n\t{\n\t\tlockedIcon \u003d !lockedIcon;\n\t\tfireEvent(new IconLockChanged(isIconLocked()));\n\t}\n\n\tvoid removeAllLocks()\n\t{\n\t\tSet\u003cKitType\u003e slotClears \u003d new HashSet\u003c\u003e(lockedKits);\n\t\tslotClears.addAll(lockedItems);\n\t\tSet\u003cColorType\u003e colorClears \u003d new HashSet\u003c\u003e(lockedColors);\n\t\tlockedKits.clear();\n\t\tlockedItems.clear();\n\t\tlockedColors.clear();\n\t\tlockedIcon \u003d false;\n\t\tslotClears.forEach(slot -\u003e fireEvent(new LockChanged(slot, false, LockChanged.Type.BOTH)));\n\t\tcolorClears.forEach(type -\u003e fireEvent(new ColorLockChanged(type, false)));\n\t\tfireEvent(new IconLockChanged(false));\n\t}\n\n\tvoid removeSlotLock(KitType slot)\n\t{\n\t\tlockedKits.remove(slot);\n\t\tlockedItems.remove(slot);\n\t\tfireEvent(new LockChanged(slot, false, LockChanged.Type.BOTH));\n\t}\n\n\tvoid removeColorLock(ColorType type)\n\t{\n\t\tlockedColors.remove(type);\n\t\tfireEvent(new ColorLockChanged(type, false));\n\t}\n\n\tvoid removeIconLock()\n\t{\n\t\tlockedIcon \u003d false;\n\t\tfireEvent(new IconLockChanged(false));\n\t}\n\n\tprivate void fireEvent(SwapEvent event)\n\t{\n\t\tString key \u003d event.getKey();\n\t\tlisteners.getOrDefault(key, new LinkedList\u003c\u003e()).forEach(listener -\u003e listener.onEvent(event));\n\t}\n\n\t// this needs to be immediate so that changes are reflected when loading from config\n\tvoid saveRealKitsImmediate()\n\t{\n\t\tbyte[] bytes \u003d SerializationUtils.serialize(realKitIds);\n\t\tconfigManager.setRSProfileConfiguration(FashionscapeConfig.GROUP, FashionscapeConfig.KEY_REAL_KITS, bytes);\n\t}\n\n\tprivate void saveEquipmentConfigDebounced()\n\t{\n\t\tFuture\u003c?\u003e future \u003d equipSaveFuture;\n\t\tif (future !\u003d null)\n\t\t{\n\t\t\tfuture.cancel(false);\n\t\t}\n\t\tequipSaveFuture \u003d executor.schedule(() -\u003e {\n\t\t\tMap\u003cKitType, Integer\u003e itemEquips \u003d swappedItemIds.entrySet().stream()\n\t\t\t\t.collect(Collectors.toMap(Map.Entry::getKey, e -\u003e e.getValue() + FashionManager.ITEM_OFFSET));\n\t\t\tMap\u003cKitType, Integer\u003e kitEquips \u003d swappedKitIds.entrySet().stream()\n\t\t\t\t.collect(Collectors.toMap(Map.Entry::getKey, e -\u003e e.getValue() + FashionManager.KIT_OFFSET));\n\t\t\tMap\u003cKitType, Integer\u003e hides \u003d hiddenSlots.stream()\n\t\t\t\t.collect(Collectors.toMap(v -\u003e v, v -\u003e 0));\n\t\t\tHashMap\u003cKitType, Integer\u003e equips \u003d new HashMap\u003c\u003e(itemEquips);\n\t\t\tequips.putAll(kitEquips);\n\t\t\tequips.putAll(hides);\n\t\t\tbyte[] bytes \u003d SerializationUtils.serialize(equips);\n\t\t\tconfig.setCurrentEquipment(bytes);\n\t\t\tInteger iconId \u003d swappedIcon !\u003d null ? swappedIcon.getId() : null;\n\t\t\tconfig.setCurrentIcon(iconId);\n\t\t}, DEBOUNCE_DELAY_MS, TimeUnit.MILLISECONDS);\n\t}\n\n\tprivate void saveColorConfigDebounced()\n\t{\n\t\tFuture\u003c?\u003e future \u003d colorSaveFuture;\n\t\tif (future !\u003d null)\n\t\t{\n\t\t\tfuture.cancel(false);\n\t\t}\n\t\tcolorSaveFuture \u003d executor.schedule(() -\u003e {\n\t\t\tMap\u003cInteger, Integer\u003e serialMap \u003d swappedColorIds.entrySet().stream()\n\t\t\t\t.collect(Collectors.toMap(e -\u003e e.getKey().ordinal(), Map.Entry::getValue));\n\t\t\tbyte[] bytes \u003d SerializationUtils.serialize(new HashMap\u003c\u003e(serialMap));\n\t\t\tconfig.setCurrentColors(bytes);\n\t\t}, DEBOUNCE_DELAY_MS, TimeUnit.MILLISECONDS);\n\t}\n\n\tprivate void saveRealKitsDebounced()\n\t{\n\t\tFuture\u003c?\u003e future \u003d kitsSaveFuture;\n\t\tif (future !\u003d null)\n\t\t{\n\t\t\tfuture.cancel(false);\n\t\t}\n\t\tkitsSaveFuture \u003d executor.schedule(() -\u003e {\n\t\t\tbyte[] bytes \u003d SerializationUtils.serialize(realKitIds);\n\t\t\tconfigManager.setRSProfileConfiguration(FashionscapeConfig.GROUP, FashionscapeConfig.KEY_REAL_KITS, bytes);\n\t\t}, DEBOUNCE_DELAY_MS, TimeUnit.MILLISECONDS);\n\t}\n\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\SavedSwaps.java"},{"fileName":"SwapDiff.java","content":"package eq.uirs.fashionscape.core;\n\nimport eq.uirs.fashionscape.data.color.ColorType;\nimport java.util.HashMap;\nimport java.util.Map;\nimport lombok.EqualsAndHashCode;\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport lombok.ToString;\nimport lombok.Value;\nimport net.runelite.api.kit.KitType;\n\n/**\n * Holds onto information about equipment and animations before a swap occurred\n */\n@Getter\n@RequiredArgsConstructor\n@ToString\n@EqualsAndHashCode\npublic class SwapDiff\n{\n\t@Value\n\tpublic static class Change\n\t{\n\t\tpublic enum Type\n\t\t{\n\n\t\t\tEQUIPMENT,\n\t\t\tCOLOR,\n\t\t\tICON\n\n\t\t}\n\n\t\t/**\n\t\t * The changed equipment id, color id, or icon id (depending on type)\n\t\t */\n\t\tint id;\n\t\t/**\n\t\t * Indicates that the previous state was \"unnatural\", i.e., originated from the plugin, not the game\n\t\t */\n\t\tboolean unnatural;\n\t}\n\n\tpublic static SwapDiff blank()\n\t{\n\t\treturn new SwapDiff(new HashMap\u003c\u003e(), new HashMap\u003c\u003e(), null, null);\n\t}\n\n\tprivate final Map\u003cKitType, Change\u003e slotChanges;\n\tprivate final Map\u003cColorType, Change\u003e colorChanges;\n\tprivate final Change iconChange;\n\tprivate final Integer changedIdleAnimationId;\n\n\tboolean isBlank()\n\t{\n\t\treturn changedIdleAnimationId \u003d\u003d null \u0026\u0026 iconChange \u003d\u003d null \u0026\u0026 slotChanges.isEmpty() \u0026\u0026 colorChanges.isEmpty();\n\t}\n\n\t// This diff will take priority of the other diff in the event of a collision.\n\tpublic SwapDiff mergeOver(SwapDiff other)\n\t{\n\t\tMap\u003cKitType, Change\u003e mergedSlots \u003d new HashMap\u003c\u003e();\n\t\tmergedSlots.putAll(other.slotChanges);\n\t\tmergedSlots.putAll(this.slotChanges);\n\t\tMap\u003cColorType, Change\u003e mergedColors \u003d new HashMap\u003c\u003e();\n\t\tmergedColors.putAll(other.colorChanges);\n\t\tmergedColors.putAll(this.colorChanges);\n\t\tChange iconChange \u003d this.iconChange;\n\t\tif (iconChange \u003d\u003d null)\n\t\t{\n\t\t\ticonChange \u003d other.iconChange;\n\t\t}\n\t\tInteger idleId \u003d this.changedIdleAnimationId;\n\t\tif (idleId \u003d\u003d null)\n\t\t{\n\t\t\tidleId \u003d other.changedIdleAnimationId;\n\t\t}\n\t\treturn new SwapDiff(mergedSlots, mergedColors, iconChange, idleId);\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\SwapDiff.java"},{"fileName":"SwapDiffHistory.java","content":"package eq.uirs.fashionscape.core;\n\nimport java.util.LinkedList;\nimport java.util.List;\nimport java.util.function.Consumer;\nimport java.util.function.Function;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\n\n/**\n * Observable wrapper for user\u0027s undo / redo history\n */\n@RequiredArgsConstructor\n@Slf4j\npublic class SwapDiffHistory\n{\n\tprivate final Function\u003cSwapDiff, SwapDiff\u003e restoration;\n\tprivate static final int MAX_LIST_SIZE \u003d 10;\n\n\tprivate final LinkedList\u003cSwapDiff\u003e undoSwapDiffs \u003d new LinkedList\u003c\u003e();\n\tprivate final List\u003cConsumer\u003cInteger\u003e\u003e undoCountListeners \u003d new LinkedList\u003c\u003e();\n\n\tprivate final LinkedList\u003cSwapDiff\u003e redoSwapDiffs \u003d new LinkedList\u003c\u003e();\n\tprivate final List\u003cConsumer\u003cInteger\u003e\u003e redoCountListeners \u003d new LinkedList\u003c\u003e();\n\n\tvoid addUndoQueueChangeListener(Consumer\u003cInteger\u003e listener)\n\t{\n\t\tundoCountListeners.add(listener);\n\t}\n\n\tvoid addRedoQueueChangeListener(Consumer\u003cInteger\u003e listener)\n\t{\n\t\tredoCountListeners.add(listener);\n\t}\n\n\tvoid removeListeners()\n\t{\n\t\tundoCountListeners.clear();\n\t\tredoCountListeners.clear();\n\t}\n\n\tvoid undoLast()\n\t{\n\t\tif (undoSwapDiffs.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tSwapDiff last \u003d undoSwapDiffs.removeLast();\n\t\tundoCountListeners.forEach(listener -\u003e listener.accept(undoSwapDiffs.size()));\n\t\tSwapDiff redo \u003d restoration.apply(last);\n\t\taddRedoDiff(redo);\n\t}\n\n\tvoid redoLast()\n\t{\n\t\tif (redoSwapDiffs.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tSwapDiff last \u003d redoSwapDiffs.removeLast();\n\t\tredoCountListeners.forEach(listener -\u003e listener.accept(redoSwapDiffs.size()));\n\t\tSwapDiff restore \u003d restoration.apply(last);\n\t\taddUndoDiff(restore);\n\t}\n\n\tpublic void appendToUndo(SwapDiff swapDiff)\n\t{\n\t\tif (swapDiff.isBlank())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\taddUndoDiff(swapDiff);\n\t\tredoSwapDiffs.clear();\n\t\tredoCountListeners.forEach(listener -\u003e listener.accept(0));\n\t}\n\n\tint undoSize()\n\t{\n\t\treturn undoSwapDiffs.size();\n\t}\n\n\tint redoSize()\n\t{\n\t\treturn redoSwapDiffs.size();\n\t}\n\n\tprivate void addUndoDiff(SwapDiff swapDiff)\n\t{\n\t\tif (swapDiff.isBlank())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tSwapDiff lastUndo \u003d undoSwapDiffs.peekLast();\n\t\tif (swapDiff.equals(lastUndo))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tundoSwapDiffs.add(swapDiff);\n\t\twhile (undoSwapDiffs.size() \u003e MAX_LIST_SIZE)\n\t\t{\n\t\t\tundoSwapDiffs.removeFirst();\n\t\t}\n\t\tundoCountListeners.forEach(listener -\u003e listener.accept(undoSwapDiffs.size()));\n\t}\n\n\tprivate void addRedoDiff(SwapDiff swapDiff)\n\t{\n\t\tif (swapDiff.isBlank())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tSwapDiff lastRedo \u003d redoSwapDiffs.peekLast();\n\t\tif (swapDiff.equals(lastRedo))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tredoSwapDiffs.add(swapDiff);\n\t\twhile (redoSwapDiffs.size() \u003e MAX_LIST_SIZE)\n\t\t{\n\t\t\tredoSwapDiffs.removeFirst();\n\t\t}\n\t\tredoCountListeners.forEach(listener -\u003e listener.accept(redoSwapDiffs.size()));\n\t}\n\n}\n\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\SwapDiffHistory.java"},{"fileName":"SwapMode.java","content":"package eq.uirs.fashionscape.core;\n\npublic enum SwapMode\n{\n\t/**\n\t * Swapping to a \"virtual\" item that will show up in the side panel\n\t */\n\tSAVE,\n\t/**\n\t * Indicates that whatever is being sent is not \"virtual\", so it should clear the panel UI\n\t */\n\tREVERT,\n\t/**\n\t * A temporary preview where the item will be swapped but it won\u0027t be saved to the panel\n\t */\n\tPREVIEW\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\core\\SwapMode.java"},{"fileName":"IdleAnimationID.java","content":"package eq.uirs.fashionscape.data.anim;\n\n// Idle pose animations from equipping various main-hand items\npublic class IdleAnimationID\n{\n\tpublic static final int VIGGORAS_CHAINMACE \u003d 244;\n\tpublic static final int DEFAULT \u003d 808;\n\tpublic static final int TALL_SWORD \u003d 809;\n\tpublic static final int UPRIGHT_WEAPON \u003d 813;\n\tpublic static final int HALLOWEEN_SCYTHE \u003d 847;\n\tpublic static final int BANNER \u003d 1421;\n\tpublic static final int SLED \u003d 1461;\n\tpublic static final int BLUDGEON \u003d 1652;\n\tpublic static final int GRANITE_MAUL \u003d 1662;\n\tpublic static final int ZAMORAKIAN_SPEAR \u003d 1713;\n\tpublic static final int ODDSKULL \u003d 1824;\n\tpublic static final int RUBBER_CHICKEN \u003d 1832;\n\tpublic static final int EASTER_BASKET \u003d 1837;\n\tpublic static final int VERACS_FLAIL \u003d 2061;\n\tpublic static final int GREATAXE \u003d 2065;\n\tpublic static final int KARILS_CROSSBOW \u003d 2074;\n\tpublic static final int MINECART \u003d 2148;\n\tpublic static final int OVERHEAD_LAUNCHER \u003d 2316;\n\tpublic static final int TWO_HANDED_SWORD \u003d 2561;\n\tpublic static final int CANDY_CANE \u003d 2911;\n\tpublic static final int DRUNKEN_SWAY \u003d 3040;\n\tpublic static final int CHINCHOMPA \u003d 3175;\n\tpublic static final int ABYSSAL_DAGGER \u003d 3296;\n\tpublic static final int BOXING_GLOVES \u003d 3677;\n\tpublic static final int HEAVY_ITEM \u003d 4193;\n\tpublic static final int NIGHTMARE_STAFF \u003d 4504;\n\tpublic static final int CROSSBOW \u003d 4591;\n\tpublic static final int CURSED_BANANA \u003d 4646;\n\tpublic static final int FALCON \u003d 5160;\n\tpublic static final int SALAMANDER \u003d 5246;\n\tpublic static final int NOOSE_WAND \u003d 5254;\n\tpublic static final int UNDEAD_CHICKEN \u003d 5363;\n\tpublic static final int BARRELCHEST_ANCHOR \u003d 5869;\n\tpublic static final int HAND_FAN \u003d 6297;\n\tpublic static final int MAGIC_NET \u003d 6604;\n\tpublic static final int PET_ROCK \u003d 6657;\n\tpublic static final int MAGIC_CARPET \u003d 6936;\n\tpublic static final int GODSWORD \u003d 7053;\n\tpublic static final int BALLISTA \u003d 7220;\n\tpublic static final int CLUELESS_SCROLL \u003d 7271;\n\tpublic static final int DINHS_BULWARK \u003d 7508;\n\tpublic static final int ELDER_MAUL \u003d 7518;\n\tpublic static final int BALLOONS \u003d 7538;\n\tpublic static final int SWINGING_FLAIL \u003d 8009;\n\tpublic static final int SCYTHE_OF_VITUR \u003d 8057;\n\tpublic static final int GOLDEN_TENCH \u003d 8208;\n\tpublic static final int SPOOKY_LANTERN \u003d 8521;\n\tpublic static final int CLAN_VEXILLUM \u003d 9018;\n\tpublic static final int SKIS \u003d 9341;\n\tpublic static final int COLOSSAL_BLADE \u003d 9460;\n\tpublic static final int TUMEKENS_SHADOW \u003d 9494;\n\tpublic static final int GIANT_STOPWATCH \u003d 9814;\n\tpublic static final int MYSTIC_CARDS \u003d 9847;\n\tpublic static final int VENATOR_BOW \u003d 9857;\n\tpublic static final int TENTH_ANNI_BALLOONS \u003d 10032;\n\tpublic static final int TWO_HANDED_AXE \u003d 10075;\n\tpublic static final int TRAILBLAZER_TORCH \u003d 10636;\n\tpublic static final int SOULREAPER_AXE \u003d 10169;\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\data\\anim\\IdleAnimationID.java"},{"fileName":"ItemInteractions.java","content":"package eq.uirs.fashionscape.data.anim;\n\nimport com.google.common.collect.BiMap;\nimport com.google.common.collect.ImmutableBiMap;\nimport com.google.common.collect.ImmutableSet;\nimport eq.uirs.fashionscape.data.kit.ArmsKit;\nimport eq.uirs.fashionscape.data.kit.BootsKit;\nimport eq.uirs.fashionscape.data.kit.Kit;\nimport eq.uirs.fashionscape.data.kit.LegsKit;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Set;\nimport net.runelite.api.ItemID;\n\npublic class ItemInteractions\n{\n\t/**\n\t * broken items which don\u0027t have models or have placeholder models\n\t */\n\tpublic static final Set\u003cInteger\u003e BAD_ITEM_IDS \u003d ImmutableSet.of(\n\t\t286, 287, 288, 1410, 2513, 4024, 4025, 4026, 4027, 4028, 4029, 4030, 4031, 4284, 4285, 7957, 9054, 9055, 9056,\n\t\t9057, 9058, 9059, 10595, 10596, 10888, 11165, 11167, 19525, 24265, 24619, 25155, 25582, 25584, 25958, 25959,\n\t\t25960, 25961, 25969, 25971, 25983, 25987, 25989, 25973, 26217, 26237, 26239, 26376, 26378, 26380, 26526, 26567,\n\t\t26686, 26687, 26688, 26689, 26690, 26691, 26692, 26693, 26694, 26695, 26698, 26699, 26700, 26701, 26702, 26703,\n\t\t// inactive corrupted bh armor sets (vesta, statius, zuriel, morrigan)\n\t\t27965, 27968, 27971, 27974, 27977, 27980, 27983, 27986, 27989, 27992, 27995,\n\t\t28813, 29055, 29064, 29073, 29277\n\t);\n\n\t/**\n\t * items which are always hidden (icons are hidden because they have their own dedicated slots which don\u0027t\n\t * go through item manager)\n\t */\n\tpublic static final Set\u003cString\u003e BAD_ITEM_NAMES \u003d ImmutableSet.of(\"attacker icon\", \"defender icon\",\n\t\t\"collector icon\", \"healer icon\", \"red icon\", \"blue icon\");\n\n\t/**\n\t * items that cannot be normally obtained/equipped in the overworld, also includes degraded/redundant items\n\t */\n\tpublic static final Set\u003cInteger\u003e NON_STANDARD_ITEMS \u003d ImmutableSet.of(\n\t\t945, 1235, 3839, 3841, 3843, 4041, 4042, 4083, 4084, 4181, 4692, 4860, 4866, 4868, 4872, 4878, 4884, 4890, 4896,\n\t\t4902, 4908, 4914, 4920, 4926, 4932, 4938, 4944, 4950, 4956, 4962, 4968, 4974, 4980, 4986, 4992, 4998, 5607,\n\t\t5608, 5609, 5732, 6122, 6123, 7414, 7671, 7673, 7675, 7679, 7682, 7684, 7686, 7756, 7804, 7806, 7807, 7808,\n\t\t7809, 8856, 8860, 8861, 8862, 8863, 8864, 8871, 9660, 9702, 10023, 10024, 10500, 10556, 10557, 10558, 10559,\n\t\t10567, 10840, 10841, 12607, 12609, 12611, 13080, 13195, 20802, 21433, 21539, 22308, 22309, 22310, 22311, 22312,\n\t\t22313, 22314, 22315, 22331, 22333, 22335, 22337, 22338, 22339, 22340, 22341, 22342, 22343, 22344, 22345, 22346,\n\t\t22347, 22348, 22349, 22516, 22610, 22613, 22616, 22619, 22622, 22625, 22628, 22631, 22634, 22636, 22638, 22641,\n\t\t22644, 22647, 22650, 22653, 22656, 22721, 22722, 22723, 22724, 22725, 22726, 22727, 22728, 22729, 22730, 22816,\n\t\t22817, 23460, 23461, 23462, 23463, 23464, 23465, 23466, 23467, 23468, 23469, 23470, 23471, 23472, 23473, 23474,\n\t\t23475, 23476, 23477, 23478, 23479, 23480, 23481, 23482, 23483, 23484, 23485, 23486, 23820, 23821, 23822, 23823,\n\t\t23840, 23841, 23842, 23843, 23844, 23845, 23846, 23847, 23848, 23849, 23850, 23851, 23852, 23853, 23854, 23855,\n\t\t23856, 23857, 23861, 23886, 23887, 23888, 23889, 23890, 23891, 23892, 23893, 23894, 23895, 23896, 23897, 23898,\n\t\t23899, 23900, 23901, 23902, 23903, 23907, 25106, 25108, 25282, 26695, 26696, 26708, 26710, 26712, 26714, 26715,\n\t\t26716, 26718, 26719, 26720, 26721, 26722, 26723, 26724, 26725, 26726, 26879, 27010, 27100, 27115, 27117, 27119,\n\t\t27123, 27125, 27127, 28363\n\t);\n\n\t/**\n\t * item ids of helm-slot items that DON\u0027T hide the player\u0027s hair\n\t * TODO can get these from wearpos in item definitions\n\t */\n\tpublic static final Set\u003cInteger\u003e HAIR_HELMS \u003d ImmutableSet.of(\n\t\t579, 656, 658, 660, 662, 664, 1017, 1025, 1037, 1038, 1040, 1042, 1044, 1046, 1048, 1050, 1949, 2581, 2631,\n\t\t2633, 2635, 2637, 2639, 2641, 2643, 2645, 2647, 2649, 2651, 2900, 2910, 2920, 2930, 2940, 2978, 2979, 2980,\n\t\t2981, 2982, 2983, 2984, 2985, 2986, 2987, 2988, 2989, 2990, 2991, 2992, 2993, 2994, 2995, 3057, 3327, 3329,\n\t\t3331, 3333, 3335, 3337, 3339, 3341, 3343, 3385, 3797, 4089, 4099, 4109, 4164, 4166, 4168, 4284, 4285, 5013,\n\t\t5014, 5525, 5527, 5529, 5531, 5533, 5535, 5537, 5539, 5541, 5543, 5545, 5547, 5549, 6182, 6335, 6337, 6339,\n\t\t6345, 6355, 6365, 6375, 6382, 6547, 6548, 6656, 6665, 6856, 6858, 6860, 6862, 6918, 7319, 7321, 7323, 7325,\n\t\t7327, 7394, 7396, 7917, 8860, 8861, 8862, 8863, 8864, 8901, 8903, 8905, 8907, 8909, 8911, 8913, 8915, 8917,\n\t\t8919, 8921, 8928, 8950, 8959, 8960, 8961, 8962, 8963, 8964, 8965, 9068, 9106, 9472, 9660, 9729, 9733, 10172,\n\t\t10556, 10557, 10558, 10559, 10567, 10836, 10862, 11280, 11282, 11774, 11775, 11776, 11777, 11778, 11779, 11780,\n\t\t11781, 11782, 11783, 11784, 11862, 11863, 11898, 11990, 12013, 12247, 12299, 12301, 12303, 12305, 12307, 12309,\n\t\t12311, 12313, 12319, 12321, 12323, 12325, 12337, 12351, 12353, 12355, 12359, 12397, 12399, 12412, 12419, 12432,\n\t\t12434, 12453, 12455, 12457, 12516, 12540, 12600, 12637, 12638, 12639, 12855, 12856, 13137, 13203, 13258, 13343,\n\t\t13344, 13385, 13646, 13647, 13655, 19724, 19727, 19988, 20008, 20053, 20205, 20246, 20562, 20568, 20802, 21211,\n\t\t21859, 22121, 22308, 22309, 22310, 22311, 22312, 22313, 22314, 22315, 22337, 22338, 22339, 22340, 22341, 22342,\n\t\t22343, 22344, 22345, 22346, 22347, 22348, 22349, 22664, 22665, 22666, 22721, 22722, 22723, 22724, 22725, 22726,\n\t\t22727, 22728, 22729, 22730, 23047, 23255, 23312, 23460, 23461, 23462, 23463, 23464, 23465, 23466, 23467, 23468,\n\t\t23469, 23470, 23471, 23472, 23473, 23474, 23475, 23476, 23477, 23478, 23479, 23480, 23481, 23482, 23483, 23484,\n\t\t23485, 23486, 23522, 23911, 23913, 23915, 23917, 23919, 23921, 23923, 23925, 24165, 24169, 24170, 24171, 24192,\n\t\t24194, 24195, 24197, 24198, 24200, 24201, 24203, 24204, 24206, 24288, 24338, 24340, 24342, 24344, 24346, 24348,\n\t\t24387, 24397, 24405, 24525, 24527, 24872, 24942, 25212, 25213, 25214, 25215, 25216, 25217, 25218, 25219, 25220,\n\t\t25221, 25222, 25223, 25224, 25225, 25226, 25227, 25228, 25229, 25230, 25231, 25232, 25233, 25234, 25235, 25236,\n\t\t25237, 25238, 25239, 25240, 25241, 25242, 25243, 25398, 25413, 25438, 25549, 25592, 25840, 26254, 26312, 26531,\n\t\t26788, 26801, 26804, 26937, 26963, 26967, 27035, 27123, 27141, 27143, 27145, 27147, 27149, 27151, 27153, 27155,\n\t\t27576, 27584, 27588, 27804, 27828, 27875, 27877, 28603, 28605, 28607, 28609, 28611, 28620, 28655, 28712, 28724,\n\t\t28736, 29010, 29019, 29028, 29263, 29443\n\t);\n\n\t/**\n\t * item ids of helm-slot items that DO hide the player\u0027s jaw\n\t * TODO can get these from wearpos in item definitions\n\t */\n\tpublic static final Set\u003cInteger\u003e NO_JAW_HELMS \u003d ImmutableSet.of(\n\t\t1053, 1055, 1057, 1153, 1155, 1157, 1159, 1161, 1163, 1165, 1506, 2587, 2595, 2605, 2613, 2619, 2627, 2657,\n\t\t2665, 2673, 3057, 3486, 4164, 4551, 4611, 4724, 4732, 4745, 4753, 4904, 4905, 4906, 4907, 4908, 4928, 4929,\n\t\t4930, 4931, 4932, 4952, 4953, 4954, 4955, 4956, 4976, 4977, 4978, 4979, 4980, 5554, 5574, 6188, 6623, 7534,\n\t\t7594, 8464, 8466, 8468, 8470, 8472, 8474, 8476, 8478, 8480, 8482, 8484, 8486, 8488, 8490, 8492, 8494, 8682,\n\t\t8684, 8686, 8688, 8690, 8692, 8694, 8696, 8698, 8700, 8702, 8704, 8706, 8708, 8710, 8712, 9096, 9629, 9672,\n\t\t9920, 10567, 11282, 11335, 11847, 11850, 11864, 11865, 11919, 12211, 12221, 12231, 12241, 12249, 12251, 12283,\n\t\t12293, 12363, 12365, 12367, 12369, 12371, 12417, 12466, 12476, 12486, 12518, 12520, 12522, 12524, 12810, 12813,\n\t\t12845, 12887, 12892, 12929, 12931, 13140, 13196, 13197, 13198, 13199, 13283, 13359, 13364, 13369, 13374, 13379,\n\t\t13579, 13591, 13603, 13615, 13627, 13667, 19639, 19641, 19643, 19645, 19647, 19649, 19915, 19988, 20020, 20023,\n\t\t20026, 20029, 20032, 20035, 20080, 20095, 20178, 20193, 20266, 20269, 20561, 20563, 20595, 20708, 20773, 20792,\n\t\t20802, 20838, 21061, 21264, 21266, 21298, 21720, 21847, 21888, 21890, 22159, 22161, 22163, 22165, 22167, 22169,\n\t\t22171, 22173, 22175, 22177, 22179, 22181, 22183, 22185, 22187, 22189, 22308, 22309, 22310, 22311, 22312, 22313,\n\t\t22314, 22315, 22326, 22337, 22338, 22339, 22340, 22341, 22342, 22343, 22344, 22345, 22346, 22347, 22348, 22349,\n\t\t22689, 22713, 22721, 22722, 22723, 22724, 22725, 22726, 22727, 22728, 22729, 22730, 23073, 23075, 23101, 23252,\n\t\t23270, 23273, 23448, 23460, 23461, 23462, 23463, 23464, 23465, 23466, 23467, 23468, 23469, 23470, 23471, 23472,\n\t\t23473, 23474, 23475, 23476, 23477, 23478, 23479, 23480, 23481, 23482, 23483, 23484, 23485, 23486, 23785, 23840,\n\t\t23841, 23842, 23886, 23887, 23888, 23971, 23973, 24034, 24271, 24305, 24315, 24342, 24344, 24346, 24348, 24370,\n\t\t24419, 24444, 24743, 24975, 25069, 25165, 25169, 25174, 25176, 25212, 25213, 25214, 25215, 25216, 25217, 25218,\n\t\t25219, 25220, 25221, 25222, 25223, 25224, 25225, 25226, 25227, 25228, 25229, 25230, 25231, 25232, 25233, 25234,\n\t\t25235, 25236, 25237, 25238, 25239, 25240, 25241, 25242, 25243, 25336, 25898, 25900, 25902, 25904, 25906, 25908,\n\t\t25910, 25912, 25914, 26225, 26241, 26382, 26427, 26439, 26451, 26731, 26733, 26735, 26741, 26745, 26747, 27119,\n\t\t27226, 27235, 27705, 27707, 27717, 27719, 27729, 27731, 27741, 27743, 27753, 27755, 27765, 27767, 27777, 27779,\n\t\t28254, 28788, 29560, 29566\n\t);\n\n\t/**\n\t * item ids of torso-slot items that DON\u0027T hide the player\u0027s arms\n\t * TODO can get these from wearpos in item definitions\n\t */\n\tpublic static final Set\u003cInteger\u003e ARMS_TORSOS \u003d ImmutableSet.of(\n\t\t1005, 1101, 1103, 1105, 1107, 1109, 1111, 1113, 1129, 1131, 1133, 1135, 1757, 2499, 2501, 2503, 2513, 6615,\n\t\t7110, 7122, 7128, 7134, 7362, 7364, 7370, 7372, 7374, 7376, 7592, 7957, 12327, 12331, 12381, 12385, 20149,\n\t\t20208, 20417, 20423, 20566, 23264, 23381\n\t);\n\n\t/**\n\t * kit ids of boot-slot items that, when detected in-game, will disable the boots, weapon and shield slots\n\t */\n\tpublic static final Set\u003cInteger\u003e DISABLE_BOOT_KITS \u003d ImmutableSet.of(BootsKit.MINECART.getKitId(0),\n\t\tBootsKit.MINECART.getKitId(1));\n\n\t/**\n\t * item ids of weapon-slot items that, when detected in-game, will disable the weapon and shield slots\n\t */\n\tpublic static final Set\u003cInteger\u003e DISABLE_WEAPONS \u003d ImmutableSet.of(ItemID.MAGIC_CARPET);\n\n\t// region Gender Swap Kits\n\n\t// roughly corresponding kits that don\u0027t share the same name\n\tpublic static final BiMap\u003cKit, Kit\u003e GENDER_MIRRORED_KITS;\n\n\tstatic\n\t{\n\t\tMap\u003cKit, Kit\u003e mToF \u003d new HashMap\u003c\u003e();\n\t\t// TODO review\n\t\tmToF.put(ArmsKit.REGULAR, ArmsKit.SHORT_SLEEVES);\n\t\tmToF.put(ArmsKit.MUSCLEBOUND, ArmsKit.MUSCLEY);\n\t\tmToF.put(ArmsKit.LOOSE_SLEEVED, ArmsKit.FRILLY_A);\n\t\tmToF.put(ArmsKit.LARGE_CUFFED, ArmsKit.LARGE_CUFFS);\n\t\tmToF.put(ArmsKit.THIN, ArmsKit.LONG_SLEEVED);\n\t\tmToF.put(ArmsKit.SHOULDER_PADS, ArmsKit.BARE_ARMS);\n\t\tmToF.put(ArmsKit.THICK_STRIPE, ArmsKit.SWEATER_A);\n\t\tmToF.put(ArmsKit.RIPPED, ArmsKit.BARE_SHOULDERS);\n\t\tmToF.put(LegsKit.SHORTS, LegsKit.SHORT_SKIRT);\n\t\tmToF.put(LegsKit.RIPPED_L, LegsKit.TORN_SKIRT);\n\t\tmToF.put(LegsKit.PATCHED, LegsKit.PATCHED_SKIRT);\n\t\tGENDER_MIRRORED_KITS \u003d new ImmutableBiMap.Builder\u003cKit, Kit\u003e()\n\t\t\t.putAll(mToF)\n\t\t\t.build();\n\t}\n\n\t// endregion\n\n\t// region Weapons\n\n\t/**\n\t * Weapon item id mapped to its idle animation id (if not present, anim id is the default 808)\n\t */\n\tpublic static final Map\u003cInteger, Integer\u003e WEAPON_TO_IDLE \u003d new HashMap\u003c\u003e();\n\n\tstatic\n\t{\n\t\tWEAPON_TO_IDLE.put(ItemID.BLURITE_SWORD, IdleAnimationID.TALL_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.PHOENIX_CROSSBOW, IdleAnimationID.CROSSBOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAMEN_STAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.CROSSBOW, IdleAnimationID.CROSSBOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.POISONED_DAGGERP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BRONZE_SPEAR, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.IRON_SPEAR, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.STEEL_SPEAR, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MITHRIL_SPEAR, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ADAMANT_SPEAR, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.RUNE_SPEAR, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_SPEAR, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BRONZE_SPEARP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.IRON_SPEARP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.STEEL_SPEARP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MITHRIL_SPEARP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ADAMANT_SPEARP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.RUNE_SPEARP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_SPEARP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_LONGSWORD, IdleAnimationID.TALL_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.BRONZE_2H_SWORD, IdleAnimationID.TWO_HANDED_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.IRON_2H_SWORD, IdleAnimationID.TWO_HANDED_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.STEEL_2H_SWORD, IdleAnimationID.TWO_HANDED_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLACK_2H_SWORD, IdleAnimationID.TWO_HANDED_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.ADAMANT_2H_SWORD, IdleAnimationID.TWO_HANDED_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.RUNE_2H_SWORD, IdleAnimationID.TWO_HANDED_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.STAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.STAFF_OF_AIR, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.STAFF_OF_WATER, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.STAFF_OF_EARTH, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.STAFF_OF_FIRE, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MAGIC_STAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BATTLESTAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.FIRE_BATTLESTAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.WATER_BATTLESTAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.AIR_BATTLESTAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.EARTH_BATTLESTAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MYSTIC_FIRE_STAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MYSTIC_WATER_STAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MYSTIC_AIR_STAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MYSTIC_EARTH_STAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.IBANS_STAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.IBANS_STAFF_1410, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.SCYTHE, IdleAnimationID.HALLOWEEN_SCYTHE);\n\t\tWEAPON_TO_IDLE.put(ItemID.LAVA_BATTLESTAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MYSTIC_LAVA_STAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BRONZE_SPEARKP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.IRON_SPEARKP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.STEEL_SPEARKP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MITHRIL_SPEARKP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ADAMANT_SPEARKP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.RUNE_SPEARKP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_SPEARKP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BRONZE_HALBERD, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.IRON_HALBERD, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.STEEL_HALBERD, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLACK_HALBERD, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MITHRIL_HALBERD, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ADAMANT_HALBERD, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.RUNE_HALBERD, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_HALBERD, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.PET_ROCK, IdleAnimationID.PET_ROCK);\n\t\tWEAPON_TO_IDLE.put(ItemID.SARADOMIN_BANNER, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.ZAMORAK_BANNER, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.SLED, IdleAnimationID.SLED);\n\t\tWEAPON_TO_IDLE.put(ItemID.SLED_4084, IdleAnimationID.SLED);\n\t\tWEAPON_TO_IDLE.put(ItemID.GRANITE_MAUL, IdleAnimationID.GRANITE_MAUL);\n\t\tWEAPON_TO_IDLE.put(ItemID.LEAFBLADED_SPEAR, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.SLAYERS_STAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.EASTER_BASKET, IdleAnimationID.EASTER_BASKET);\n\t\tWEAPON_TO_IDLE.put(ItemID.RUBBER_CHICKEN, IdleAnimationID.RUBBER_CHICKEN);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLACK_SPEAR, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLACK_SPEARP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLACK_SPEARKP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ANCIENT_STAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.AHRIMS_STAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.DHAROKS_GREATAXE, IdleAnimationID.GREATAXE);\n\t\tWEAPON_TO_IDLE.put(ItemID.GUTHANS_WARSPEAR, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.KARILS_CROSSBOW, IdleAnimationID.KARILS_CROSSBOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.VERACS_FLAIL, IdleAnimationID.VERACS_FLAIL);\n\t\tWEAPON_TO_IDLE.put(ItemID.AHRIMS_STAFF_100, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.AHRIMS_STAFF_75, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.AHRIMS_STAFF_50, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.AHRIMS_STAFF_25, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.AHRIMS_STAFF_0, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.DHAROKS_GREATAXE_100, IdleAnimationID.GREATAXE);\n\t\tWEAPON_TO_IDLE.put(ItemID.DHAROKS_GREATAXE_75, IdleAnimationID.GREATAXE);\n\t\tWEAPON_TO_IDLE.put(ItemID.DHAROKS_GREATAXE_50, IdleAnimationID.GREATAXE);\n\t\tWEAPON_TO_IDLE.put(ItemID.DHAROKS_GREATAXE_25, IdleAnimationID.GREATAXE);\n\t\tWEAPON_TO_IDLE.put(ItemID.DHAROKS_GREATAXE_0, IdleAnimationID.GREATAXE);\n\t\tWEAPON_TO_IDLE.put(ItemID.GUTHANS_WARSPEAR_100, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.GUTHANS_WARSPEAR_75, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.GUTHANS_WARSPEAR_50, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.GUTHANS_WARSPEAR_25, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.GUTHANS_WARSPEAR_0, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.KARILS_CROSSBOW_100, IdleAnimationID.KARILS_CROSSBOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.KARILS_CROSSBOW_0, IdleAnimationID.KARILS_CROSSBOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.VERACS_FLAIL_100, IdleAnimationID.VERACS_FLAIL);\n\t\tWEAPON_TO_IDLE.put(ItemID.VERACS_FLAIL_75, IdleAnimationID.VERACS_FLAIL);\n\t\tWEAPON_TO_IDLE.put(ItemID.VERACS_FLAIL_50, IdleAnimationID.VERACS_FLAIL);\n\t\tWEAPON_TO_IDLE.put(ItemID.VERACS_FLAIL_25, IdleAnimationID.VERACS_FLAIL);\n\t\tWEAPON_TO_IDLE.put(ItemID.VERACS_FLAIL_0, IdleAnimationID.VERACS_FLAIL);\n\t\tWEAPON_TO_IDLE.put(ItemID.BONE_SPEAR, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MAGIC_CARPET, IdleAnimationID.MAGIC_CARPET);\n\t\tWEAPON_TO_IDLE.put(ItemID.BRONZE_SPEARP_5704, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.IRON_SPEARP_5706, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.STEEL_SPEARP_5708, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MITHRIL_SPEARP_5710, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ADAMANT_SPEARP_5712, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.RUNE_SPEARP_5714, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_SPEARP_5716, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BRONZE_SPEARP_5718, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.IRON_SPEARP_5720, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.STEEL_SPEARP_5722, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MITHRIL_SPEARP_5724, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ADAMANT_SPEARP_5726, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.RUNE_SPEARP_5728, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_SPEARP_5730, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLACK_SPEARP_5734, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLACK_SPEARP_5736, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.FIXED_DEVICE, IdleAnimationID.OVERHEAD_LAUNCHER);\n\t\tWEAPON_TO_IDLE.put(ItemID.TOKTZMEJTAL, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.TZHAARKETOM, IdleAnimationID.GREATAXE);\n\t\tWEAPON_TO_IDLE.put(ItemID.MUD_BATTLESTAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MYSTIC_MUD_STAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.WHITE_HALBERD, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.WHITE_MAGIC_STAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.WHITE_2H_SWORD, IdleAnimationID.TWO_HANDED_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.GUTHIX_MJOLNIR, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.SARADOMIN_MJOLNIR, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ZAMORAK_MJOLNIR, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.RAT_POLE, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.RAT_POLE_6774, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.RAT_POLE_6775, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.RAT_POLE_6776, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.RAT_POLE_6777, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.RAT_POLE_6778, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.RAT_POLE_6779, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.BEGINNER_WAND, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.APPRENTICE_WAND, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.TEACHER_WAND, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MASTER_WAND, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_2H_SWORD, IdleAnimationID.TWO_HANDED_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.MUD_PIE, IdleAnimationID.CHINCHOMPA);\n\t\tWEAPON_TO_IDLE.put(ItemID.SPATULA, IdleAnimationID.TWO_HANDED_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.MEAT_TENDERISER, IdleAnimationID.GREATAXE);\n\t\tWEAPON_TO_IDLE.put(ItemID.ROD_OF_IVANDIS_10, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ROD_OF_IVANDIS_9, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ROD_OF_IVANDIS_8, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ROD_OF_IVANDIS_7, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ROD_OF_IVANDIS_6, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ROD_OF_IVANDIS_5, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ROD_OF_IVANDIS_4, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ROD_OF_IVANDIS_3, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ROD_OF_IVANDIS_2, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ROD_OF_IVANDIS_1, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.GADDERHAMMER, IdleAnimationID.GRANITE_MAUL);\n\t\tWEAPON_TO_IDLE.put(ItemID.BOXING_GLOVES, IdleAnimationID.BOXING_GLOVES);\n\t\tWEAPON_TO_IDLE.put(ItemID.BOXING_GLOVES_7673, IdleAnimationID.BOXING_GLOVES);\n\t\tWEAPON_TO_IDLE.put(ItemID.ANGER_SPEAR, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BANNER, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.BANNER_8652, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.BANNER_8654, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.BANNER_8656, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.BANNER_8658, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.BANNER_8660, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.BANNER_8662, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.BANNER_8664, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.BANNER_8666, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.BANNER_8668, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.BANNER_8670, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.BANNER_8672, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.BANNER_8674, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.BANNER_8676, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.BANNER_8678, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.BANNER_8680, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.CRATE_WITH_ZANIK, IdleAnimationID.HEAVY_ITEM);\n\t\tWEAPON_TO_IDLE.put(ItemID.DORGESHUUN_CROSSBOW, IdleAnimationID.CROSSBOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.CUTTHROAT_FLAG, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.GILDED_SMILE_FLAG, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.BRONZE_FIST_FLAG, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.LUCKY_SHOT_FLAG, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.TREASURE_FLAG, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.PHASMATYS_FLAG, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.SKULL_SCEPTRE, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.PHARAOHS_SCEPTRE, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.LUNAR_STAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.LUNAR_STAFF__PT1, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.LUNAR_STAFF__PT2, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.LUNAR_STAFF__PT3, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BRONZE_CROSSBOW, IdleAnimationID.CROSSBOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLURITE_CROSSBOW, IdleAnimationID.CROSSBOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.IRON_CROSSBOW, IdleAnimationID.CROSSBOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.STEEL_CROSSBOW, IdleAnimationID.CROSSBOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.MITHRIL_CROSSBOW, IdleAnimationID.CROSSBOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.ADAMANT_CROSSBOW, IdleAnimationID.CROSSBOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.RUNE_CROSSBOW, IdleAnimationID.CROSSBOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.BUTTERFLY_NET, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.FALCONERS_GLOVE_10024, IdleAnimationID.FALCON);\n\t\tWEAPON_TO_IDLE.put(ItemID.CHINCHOMPA_10033, IdleAnimationID.CHINCHOMPA);\n\t\tWEAPON_TO_IDLE.put(ItemID.RED_CHINCHOMPA_10034, IdleAnimationID.CHINCHOMPA);\n\t\tWEAPON_TO_IDLE.put(ItemID.ORANGE_SALAMANDER, IdleAnimationID.SALAMANDER);\n\t\tWEAPON_TO_IDLE.put(ItemID.RED_SALAMANDER, IdleAnimationID.SALAMANDER);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLACK_SALAMANDER, IdleAnimationID.SALAMANDER);\n\t\tWEAPON_TO_IDLE.put(ItemID.SWAMP_LIZARD, IdleAnimationID.SALAMANDER);\n\t\tWEAPON_TO_IDLE.put(ItemID.NOOSE_WAND, IdleAnimationID.NOOSE_WAND);\n\t\tWEAPON_TO_IDLE.put(ItemID.HUNTERS_CROSSBOW, IdleAnimationID.CROSSBOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.WILLOW_COMP_BOW, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.YEW_COMP_BOW, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MAGIC_COMP_BOW, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.SARADOMIN_CROZIER, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.GUTHIX_CROZIER, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ZAMORAK_CROZIER, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.UNDEAD_CHICKEN, IdleAnimationID.UNDEAD_CHICKEN);\n\t\tWEAPON_TO_IDLE.put(ItemID.SHADOW_SWORD, IdleAnimationID.TWO_HANDED_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.BARRELCHEST_ANCHOR, IdleAnimationID.BARRELCHEST_ANCHOR);\n\t\tWEAPON_TO_IDLE.put(ItemID.BARRELCHEST_ANCHOR_10888, IdleAnimationID.BARRELCHEST_ANCHOR);\n\t\tWEAPON_TO_IDLE.put(ItemID.MAGIC_BUTTERFLY_NET, IdleAnimationID.MAGIC_NET);\n\t\tWEAPON_TO_IDLE.put(ItemID.BRONZE_HASTA, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.IRON_HASTA, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.STEEL_HASTA, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MITHRIL_HASTA, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ADAMANT_HASTA, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.RUNE_HASTA, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BRONZE_HASTAP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BRONZE_HASTAKP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BRONZE_HASTAP_11382, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BRONZE_HASTAP_11384, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.IRON_HASTAP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.IRON_HASTAKP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.IRON_HASTAP_11389, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.IRON_HASTAP_11391, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.STEEL_HASTAP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.STEEL_HASTAKP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.STEEL_HASTAP_11396, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.STEEL_HASTAP_11398, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MITHRIL_HASTAP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MITHRIL_HASTAKP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MITHRIL_HASTAP_11403, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MITHRIL_HASTAP_11405, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ADAMANT_HASTAP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ADAMANT_HASTAKP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ADAMANT_HASTAP_11410, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ADAMANT_HASTAP_11412, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.RUNE_HASTAP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.RUNE_HASTAKP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.RUNE_HASTAP_11417, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.RUNE_HASTAP_11419, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BEACH_BOXING_GLOVES, IdleAnimationID.BOXING_GLOVES);\n\t\tWEAPON_TO_IDLE.put(ItemID.BEACH_BOXING_GLOVES_11706, IdleAnimationID.BOXING_GLOVES);\n\t\tWEAPON_TO_IDLE.put(ItemID.CURSED_GOBLIN_STAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ARMADYL_CROSSBOW, IdleAnimationID.CROSSBOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.STEAM_BATTLESTAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MYSTIC_STEAM_STAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.STAFF_OF_THE_DEAD, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ARMADYL_GODSWORD, IdleAnimationID.GODSWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.BANDOS_GODSWORD, IdleAnimationID.GODSWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.SARADOMIN_GODSWORD, IdleAnimationID.GODSWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.ZAMORAK_GODSWORD, IdleAnimationID.GODSWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.ZAMORAKIAN_SPEAR, IdleAnimationID.ZAMORAKIAN_SPEAR);\n\t\tWEAPON_TO_IDLE.put(ItemID.SARADOMIN_SWORD, IdleAnimationID.GODSWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.ZAMORAKIAN_HASTA, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.TRIDENT_OF_THE_SEAS_FULL, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.TRIDENT_OF_THE_SEAS, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.UNCHARGED_TRIDENT, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLACK_CHINCHOMPA, IdleAnimationID.CHINCHOMPA);\n\t\tWEAPON_TO_IDLE.put(ItemID.SMOKE_BATTLESTAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MYSTIC_SMOKE_STAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ANCIENT_CROZIER, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ARMADYL_CROZIER, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BANDOS_CROZIER, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_CANE, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID._3RD_AGE_WAND, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ROYAL_SCEPTRE, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.IBANS_STAFF_U, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.GOBLIN_PAINT_CANNON, IdleAnimationID.OVERHEAD_LAUNCHER);\n\t\tWEAPON_TO_IDLE.put(ItemID.STEAM_BATTLESTAFF_12795, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MYSTIC_STEAM_STAFF_12796, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.SARAS_BLESSED_SWORD_FULL, IdleAnimationID.GODSWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.SARADOMINS_BLESSED_SWORD, IdleAnimationID.GODSWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.GRANITE_MAUL_12848, IdleAnimationID.GRANITE_MAUL);\n\t\tWEAPON_TO_IDLE.put(ItemID.TRIDENT_OF_THE_SWAMP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.UNCHARGED_TOXIC_TRIDENT, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.TOXIC_STAFF_UNCHARGED, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.TOXIC_STAFF_OF_THE_DEAD, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.TOXIC_BLOWPIPE_EMPTY, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.TOXIC_BLOWPIPE, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.NEW_CRYSTAL_HALBERD_FULL_I, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.CRYSTAL_HALBERD_FULL_I, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.CRYSTAL_HALBERD_910_I, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.CRYSTAL_HALBERD_810_I, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.CRYSTAL_HALBERD_710_I, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.CRYSTAL_HALBERD_610_I, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.CRYSTAL_HALBERD_510_I, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.CRYSTAL_HALBERD_410_I, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.CRYSTAL_HALBERD_310_I, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.CRYSTAL_HALBERD_210_I, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.CRYSTAL_HALBERD_110_I, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.WESTERN_BANNER_1, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.WESTERN_BANNER_2, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.WESTERN_BANNER_3, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.WESTERN_BANNER_4, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.ODDSKULL, IdleAnimationID.ODDSKULL);\n\t\tWEAPON_TO_IDLE.put(ItemID.ABYSSAL_BLUDGEON, IdleAnimationID.BLUDGEON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ABYSSAL_DAGGER, IdleAnimationID.ABYSSAL_DAGGER);\n\t\tWEAPON_TO_IDLE.put(ItemID.ABYSSAL_DAGGER_P, IdleAnimationID.ABYSSAL_DAGGER);\n\t\tWEAPON_TO_IDLE.put(ItemID.ABYSSAL_DAGGER_P_13269, IdleAnimationID.ABYSSAL_DAGGER);\n\t\tWEAPON_TO_IDLE.put(ItemID.ABYSSAL_DAGGER_P_13271, IdleAnimationID.ABYSSAL_DAGGER);\n\t\tWEAPON_TO_IDLE.put(ItemID.GREEN_BANNER, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.LIGHT_BALLISTA, IdleAnimationID.BALLISTA);\n\t\tWEAPON_TO_IDLE.put(ItemID.HEAVY_BALLISTA, IdleAnimationID.BALLISTA);\n\t\tWEAPON_TO_IDLE.put(ItemID.HEAVY_CASKET, IdleAnimationID.HEAVY_ITEM);\n\t\tWEAPON_TO_IDLE.put(ItemID.ALE_OF_THE_GODS, IdleAnimationID.DRUNKEN_SWAY);\n\t\tWEAPON_TO_IDLE.put(ItemID.GILDED_2H_SWORD, IdleAnimationID.TWO_HANDED_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.GILDED_SPEAR, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.GILDED_HASTA, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.LARGE_SPADE, IdleAnimationID.GODSWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.CLUELESS_SCROLL, IdleAnimationID.CLUELESS_SCROLL);\n\t\tWEAPON_TO_IDLE.put(ItemID.ARCEUUS_BANNER, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.HOSIDIUS_BANNER, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.LOVAKENGJ_BANNER, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.PISCARILIUS_BANNER, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.SHAYZIEN_BANNER, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.ARMADYL_GODSWORD_OR, IdleAnimationID.GODSWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.BANDOS_GODSWORD_OR, IdleAnimationID.GODSWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.SARADOMIN_GODSWORD_OR, IdleAnimationID.GODSWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.ZAMORAK_GODSWORD_OR, IdleAnimationID.GODSWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.ANCIENT_STAFF_20431, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BEGINNER_WAND_20553, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.RUNE_2H_SWORD_20555, IdleAnimationID.TWO_HANDED_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.APPRENTICE_WAND_20556, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_2H_SWORD_20559, IdleAnimationID.TWO_HANDED_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.MASTER_WAND_20560, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.STALE_BAGUETTE, IdleAnimationID.RUBBER_CHICKEN);\n\t\tWEAPON_TO_IDLE.put(ItemID.ARMADYL_GODSWORD_20593, IdleAnimationID.GODSWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.MIST_BATTLESTAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MYSTIC_MIST_STAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.DUST_BATTLESTAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MYSTIC_DUST_STAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.HILL_GIANT_CLUB, IdleAnimationID.GREATAXE);\n\t\tWEAPON_TO_IDLE.put(ItemID.HUNTING_KNIFE, IdleAnimationID.CANDY_CANE);\n\t\tWEAPON_TO_IDLE.put(ItemID.GIANT_PRESENT, IdleAnimationID.HEAVY_ITEM);\n\t\tWEAPON_TO_IDLE.put(ItemID.ELDER_MAUL, IdleAnimationID.ELDER_MAUL);\n\t\tWEAPON_TO_IDLE.put(ItemID.KODAI_WAND, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_HUNTER_CROSSBOW, IdleAnimationID.CROSSBOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.DINHS_BULWARK, IdleAnimationID.DINHS_BULWARK);\n\t\tWEAPON_TO_IDLE.put(ItemID.KILLERS_KNIFE_21059, IdleAnimationID.CANDY_CANE);\n\t\tWEAPON_TO_IDLE.put(ItemID.LAVA_BATTLESTAFF_21198, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MYSTIC_LAVA_STAFF_21200, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ELDER_MAUL_21205, IdleAnimationID.ELDER_MAUL);\n\t\tWEAPON_TO_IDLE.put(ItemID.BIRTHDAY_BALLOONS, IdleAnimationID.BALLOONS);\n\t\tWEAPON_TO_IDLE.put(ItemID.SLAYERS_STAFF_E, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.SKULL_SCEPTRE_I, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.HAND_FAN, IdleAnimationID.HAND_FAN);\n\t\tWEAPON_TO_IDLE.put(ItemID.MERFOLK_TRIDENT, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_CROSSBOW, IdleAnimationID.CROSSBOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.TRIDENT_OF_THE_SEAS_E, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.UNCHARGED_TRIDENT_E, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.TRIDENT_OF_THE_SWAMP_E, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.UNCHARGED_TOXIC_TRIDENT_E, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.STAFF_OF_LIGHT, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.PROP_SWORD, IdleAnimationID.CANDY_CANE);\n\t\tWEAPON_TO_IDLE.put(ItemID.SANGUINESTI_STAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.GHRAZI_RAPIER, IdleAnimationID.TALL_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.SCYTHE_OF_VITUR, IdleAnimationID.SCYTHE_OF_VITUR);\n\t\tWEAPON_TO_IDLE.put(ItemID.STARTER_STAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BRYOPHYTAS_STAFF_UNCHARGED, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BRYOPHYTAS_STAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.IVANDIS_FLAIL, IdleAnimationID.SWINGING_FLAIL);\n\t\tWEAPON_TO_IDLE.put(ItemID.SANGUINESTI_STAFF_UNCHARGED, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.SCYTHE_OF_VITUR_UNCHARGED, IdleAnimationID.SCYTHE_OF_VITUR);\n\t\tWEAPON_TO_IDLE.put(ItemID.VIGGORAS_CHAINMACE_U, IdleAnimationID.VIGGORAS_CHAINMACE);\n\t\tWEAPON_TO_IDLE.put(ItemID.VIGGORAS_CHAINMACE, IdleAnimationID.VIGGORAS_CHAINMACE);\n\t\tWEAPON_TO_IDLE.put(ItemID.THAMMARONS_SCEPTRE_U, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.THAMMARONS_SCEPTRE, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.VESTAS_LONGSWORD, IdleAnimationID.TALL_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.CANDY_CANE, IdleAnimationID.CANDY_CANE);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_HASTA, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_HASTAP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_HASTAP_22737, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_HASTAP_22740, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_HASTAKP, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.CORMORANTS_GLOVE_22817, IdleAnimationID.FALCON);\n\t\tWEAPON_TO_IDLE.put(ItemID.GOLDEN_TENCH, IdleAnimationID.GOLDEN_TENCH);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_HUNTER_LANCE, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BIRTHDAY_CAKE, IdleAnimationID.HEAVY_ITEM);\n\t\tWEAPON_TO_IDLE.put(ItemID.TZHAARKETOM_T, IdleAnimationID.GREATAXE);\n\t\tWEAPON_TO_IDLE.put(ItemID.GILDED_SPADE, IdleAnimationID.TWO_HANDED_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID._3RD_AGE_DRUIDIC_STAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.STAFF_OF_BOB_THE_CAT, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.GIANT_EASTER_EGG, IdleAnimationID.HEAVY_ITEM);\n\t\tWEAPON_TO_IDLE.put(ItemID.SARACHNIS_CUDGEL, IdleAnimationID.TALL_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.ARMADYL_CROSSBOW_23611, IdleAnimationID.CROSSBOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.CORRUPTED_HALBERD_BASIC, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.CORRUPTED_HALBERD_ATTUNED, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.CORRUPTED_HALBERD_PERFECTED, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.CORRUPTED_STAFF_BASIC, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.CORRUPTED_STAFF_ATTUNED, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.CORRUPTED_STAFF_PERFECTED, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.CRYSTAL_HALBERD_BASIC, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.CRYSTAL_HALBERD_ATTUNED, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.CRYSTAL_HALBERD_PERFECTED, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.CRYSTAL_STAFF_BASIC, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.CRYSTAL_STAFF_ATTUNED, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.CRYSTAL_STAFF_PERFECTED, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.CRYSTAL_HALBERD, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLADE_OF_SAELDOR, IdleAnimationID.TALL_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLADE_OF_SAELDOR_INACTIVE, IdleAnimationID.TALL_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.CRYSTAL_GRAIL, IdleAnimationID.DRUNKEN_SWAY);\n\t\tWEAPON_TO_IDLE.put(ItemID.STAFF_OF_BALANCE, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.DECORATIVE_SWORD_L, IdleAnimationID.TALL_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.GRANITE_MAUL_24225, IdleAnimationID.GRANITE_MAUL);\n\t\tWEAPON_TO_IDLE.put(ItemID.GRANITE_MAUL_24227, IdleAnimationID.GRANITE_MAUL);\n\t\tWEAPON_TO_IDLE.put(ItemID.SKELETON_LANTERN, IdleAnimationID.SPOOKY_LANTERN);\n\t\tWEAPON_TO_IDLE.put(ItemID.TWISTED_DRAGON_TROPHY, IdleAnimationID.HEAVY_ITEM);\n\t\tWEAPON_TO_IDLE.put(ItemID.TWISTED_RUNE_TROPHY, IdleAnimationID.HEAVY_ITEM);\n\t\tWEAPON_TO_IDLE.put(ItemID.TWISTED_ADAMANT_TROPHY, IdleAnimationID.HEAVY_ITEM);\n\t\tWEAPON_TO_IDLE.put(ItemID.TWISTED_BANNER, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.NIGHTMARE_STAFF, IdleAnimationID.NIGHTMARE_STAFF);\n\t\tWEAPON_TO_IDLE.put(ItemID.HARMONISED_NIGHTMARE_STAFF, IdleAnimationID.NIGHTMARE_STAFF);\n\t\tWEAPON_TO_IDLE.put(ItemID.VOLATILE_NIGHTMARE_STAFF, IdleAnimationID.NIGHTMARE_STAFF);\n\t\tWEAPON_TO_IDLE.put(ItemID.ELDRITCH_NIGHTMARE_STAFF, IdleAnimationID.NIGHTMARE_STAFF);\n\t\tWEAPON_TO_IDLE.put(ItemID.CARROT_SWORD, IdleAnimationID.TALL_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID._24CARAT_SWORD, IdleAnimationID.TALL_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLADE_OF_SAELDOR_C, IdleAnimationID.TALL_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.VESTAS_BLIGHTED_LONGSWORD, IdleAnimationID.TALL_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.VESTAS_LONGSWORD_INACTIVE, IdleAnimationID.TALL_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLISTERWOOD_FLAIL, IdleAnimationID.SWINGING_FLAIL);\n\t\tWEAPON_TO_IDLE.put(ItemID.TRAILBLAZER_DRAGON_TROPHY, IdleAnimationID.HEAVY_ITEM);\n\t\tWEAPON_TO_IDLE.put(ItemID.TRAILBLAZER_RUNE_TROPHY, IdleAnimationID.HEAVY_ITEM);\n\t\tWEAPON_TO_IDLE.put(ItemID.TRAILBLAZER_ADAMANT_TROPHY, IdleAnimationID.HEAVY_ITEM);\n\t\tWEAPON_TO_IDLE.put(ItemID.TRAILBLAZER_BANNER, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.SLED_25282, IdleAnimationID.SLED);\n\t\tWEAPON_TO_IDLE.put(ItemID.GIANT_BOULDER, IdleAnimationID.HEAVY_ITEM);\n\t\tWEAPON_TO_IDLE.put(ItemID.CURSED_BANANA, IdleAnimationID.CURSED_BANANA);\n\t\tWEAPON_TO_IDLE.put(ItemID.GREGGS_EASTDOOR, IdleAnimationID.DINHS_BULWARK);\n\t\tWEAPON_TO_IDLE.put(ItemID.CLAN_VEXILLUM, IdleAnimationID.CLAN_VEXILLUM);\n\t\tWEAPON_TO_IDLE.put(ItemID.CLAN_VEXILLUM_25723, IdleAnimationID.CLAN_VEXILLUM);\n\t\tWEAPON_TO_IDLE.put(ItemID.CLAN_VEXILLUM_25724, IdleAnimationID.CLAN_VEXILLUM);\n\t\tWEAPON_TO_IDLE.put(ItemID.CLAN_VEXILLUM_25725, IdleAnimationID.CLAN_VEXILLUM);\n\t\tWEAPON_TO_IDLE.put(ItemID.CLAN_VEXILLUM_25726, IdleAnimationID.CLAN_VEXILLUM);\n\t\tWEAPON_TO_IDLE.put(ItemID.CLAN_VEXILLUM_25727, IdleAnimationID.CLAN_VEXILLUM);\n\t\tWEAPON_TO_IDLE.put(ItemID.CLAN_VEXILLUM_25728, IdleAnimationID.CLAN_VEXILLUM);\n\t\tWEAPON_TO_IDLE.put(ItemID.CLAN_VEXILLUM_25729, IdleAnimationID.CLAN_VEXILLUM);\n\t\tWEAPON_TO_IDLE.put(ItemID.HOLY_SANGUINESTI_STAFF, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.HOLY_SANGUINESTI_STAFF_UNCHARGED, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.HOLY_GHRAZI_RAPIER, IdleAnimationID.TALL_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.HOLY_SCYTHE_OF_VITUR, IdleAnimationID.SCYTHE_OF_VITUR);\n\t\tWEAPON_TO_IDLE.put(ItemID.HOLY_SCYTHE_OF_VITUR_UNCHARGED, IdleAnimationID.SCYTHE_OF_VITUR);\n\t\tWEAPON_TO_IDLE.put(ItemID.SANGUINE_SCYTHE_OF_VITUR, IdleAnimationID.SCYTHE_OF_VITUR);\n\t\tWEAPON_TO_IDLE.put(ItemID.SANGUINE_SCYTHE_OF_VITUR_UNCHARGED, IdleAnimationID.SCYTHE_OF_VITUR);\n\t\tWEAPON_TO_IDLE.put(ItemID.PROTEST_BANNER, IdleAnimationID.CLAN_VEXILLUM);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLADE_OF_SAELDOR_C_24553, IdleAnimationID.TALL_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLADE_OF_SAELDOR_C_25870, IdleAnimationID.TALL_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLADE_OF_SAELDOR_C_25872, IdleAnimationID.TALL_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLADE_OF_SAELDOR_C_25874, IdleAnimationID.TALL_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLADE_OF_SAELDOR_C_25876, IdleAnimationID.TALL_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLADE_OF_SAELDOR_C_25878, IdleAnimationID.TALL_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLADE_OF_SAELDOR_C_25880, IdleAnimationID.TALL_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLADE_OF_SAELDOR_C_25882, IdleAnimationID.TALL_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_HUNTER_CROSSBOW_T, IdleAnimationID.CROSSBOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_HUNTER_CROSSBOW_B, IdleAnimationID.CROSSBOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.KERIS_PARTISAN, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.OSMUMTENS_FANG, IdleAnimationID.TALL_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.ANCIENT_GODSWORD, IdleAnimationID.GODSWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.ZARYTE_CROSSBOW, IdleAnimationID.CROSSBOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.SHATTERED_BANNER, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.RUNE_CROSSBOW_OR, IdleAnimationID.CROSSBOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.SHATTERED_RELICS_ADAMANT_TROPHY, IdleAnimationID.HEAVY_ITEM);\n\t\tWEAPON_TO_IDLE.put(ItemID.SHATTERED_RELICS_RUNE_TROPHY, IdleAnimationID.HEAVY_ITEM);\n\t\tWEAPON_TO_IDLE.put(ItemID.SHATTERED_RELICS_DRAGON_TROPHY, IdleAnimationID.HEAVY_ITEM);\n\t\tWEAPON_TO_IDLE.put(ItemID.SHATTERED_CANE, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.SKIS, IdleAnimationID.SKIS);\n\t\tWEAPON_TO_IDLE.put(ItemID.HEAVY_BALLISTA_OR, IdleAnimationID.BALLISTA);\n\t\tWEAPON_TO_IDLE.put(ItemID.PREFORM, IdleAnimationID.ELDER_MAUL);\n\t\tWEAPON_TO_IDLE.put(ItemID.COLOSSAL_BLADE, IdleAnimationID.COLOSSAL_BLADE);\n\t\tWEAPON_TO_IDLE.put(ItemID.ELDER_MAUL_OR, IdleAnimationID.ELDER_MAUL);\n\t\tWEAPON_TO_IDLE.put(ItemID.OSMUMTENS_FANG_OR, IdleAnimationID.TALL_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.TUMEKENS_SHADOW, IdleAnimationID.TUMEKENS_SHADOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.TUMEKENS_SHADOW_UNCHARGED, IdleAnimationID.TUMEKENS_SHADOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.KERIS_PARTISAN_OF_BREACHING, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.KERIS_PARTISAN_OF_CORRUPTION, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.KERIS_PARTISAN_OF_THE_SUN, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.GIANT_STOPWATCH, IdleAnimationID.GIANT_STOPWATCH);\n\t\tWEAPON_TO_IDLE.put(ItemID.GOLD_SPEEDRUN_TROPHY, IdleAnimationID.HEAVY_ITEM);\n\t\tWEAPON_TO_IDLE.put(ItemID.PLATINUM_SPEEDRUN_TROPHY, IdleAnimationID.HEAVY_ITEM);\n\t\tWEAPON_TO_IDLE.put(ItemID.FESTIVE_NUTCRACKER_STAFF, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.SWEET_NUTCRACKER_STAFF, IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.VENATOR_BOW, IdleAnimationID.VENATOR_BOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.VENATOR_BOW_UNCHARGED, IdleAnimationID.VENATOR_BOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.ANCIENT_SCEPTRE, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.MYSTIC_CARDS, IdleAnimationID.MYSTIC_CARDS);\n\t\tWEAPON_TO_IDLE.put(ItemID.URSINE_CHAINMACE, IdleAnimationID.VIGGORAS_CHAINMACE);\n\t\tWEAPON_TO_IDLE.put(ItemID.URSINE_CHAINMACE_U, IdleAnimationID.VIGGORAS_CHAINMACE);\n\t\tWEAPON_TO_IDLE.put(ItemID.ACCURSED_SCEPTRE, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ACCURSED_SCEPTRE_U, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ACCURSED_SCEPTRE_AU, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ACCURSED_SCEPTRE_A, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.DIAMOND_SPEEDRUN_TROPHY, IdleAnimationID.HEAVY_ITEM);\n\t\tWEAPON_TO_IDLE.put(ItemID.THAMMARONS_SCEPTRE_AU, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.THAMMARONS_SCEPTRE_A, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID._10TH_BIRTHDAY_BALLOONS, IdleAnimationID.TENTH_ANNI_BALLOONS);\n\t\tWEAPON_TO_IDLE.put(ItemID.BARRELCHEST_ANCHOR_BH, IdleAnimationID.BARRELCHEST_ANCHOR);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_LONGSWORD_BH, IdleAnimationID.TALL_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.ABYSSAL_DAGGER_BH, IdleAnimationID.ABYSSAL_DAGGER);\n\t\tWEAPON_TO_IDLE.put(ItemID.ABYSSAL_DAGGER_BHP, IdleAnimationID.ABYSSAL_DAGGER);\n\t\tWEAPON_TO_IDLE.put(ItemID.GIANT_BRONZE_DAGGER, IdleAnimationID.COLOSSAL_BLADE);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_LONGSWORD_CR, IdleAnimationID.TALL_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_SPEAR_CR, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_SPEAR_PCR, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_HALBERD_CR, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_2H_SWORD_CR, IdleAnimationID.TWO_HANDED_SWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_CROSSBOW_CR, IdleAnimationID.CROSSBOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.LOVE_CROSSBOW, IdleAnimationID.CROSSBOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.SOULREAPER_AXE_28338, IdleAnimationID.SOULREAPER_AXE);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLOOD_ANCIENT_SCEPTRE, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ICE_ANCIENT_SCEPTRE, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.SMOKE_ANCIENT_SCEPTRE, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.SHADOW_ANCIENT_SCEPTRE, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLOOD_ANCIENT_SCEPTRE_28260, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.ICE_ANCIENT_SCEPTRE_28262, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.SMOKE_ANCIENT_SCEPTRE_28264, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.SHADOW_ANCIENT_SCEPTRE_28266, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BRONZE_FELLING_AXE, IdleAnimationID.TWO_HANDED_AXE);\n\t\tWEAPON_TO_IDLE.put(ItemID.IRON_FELLING_AXE, IdleAnimationID.TWO_HANDED_AXE);\n\t\tWEAPON_TO_IDLE.put(ItemID.STEEL_FELLING_AXE, IdleAnimationID.TWO_HANDED_AXE);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLACK_FELLING_AXE, IdleAnimationID.TWO_HANDED_AXE);\n\t\tWEAPON_TO_IDLE.put(ItemID.MITHRIL_FELLING_AXE, IdleAnimationID.TWO_HANDED_AXE);\n\t\tWEAPON_TO_IDLE.put(ItemID.ADAMANT_FELLING_AXE, IdleAnimationID.TWO_HANDED_AXE);\n\t\tWEAPON_TO_IDLE.put(ItemID.RUNE_FELLING_AXE, IdleAnimationID.TWO_HANDED_AXE);\n\t\tWEAPON_TO_IDLE.put(ItemID.DRAGON_FELLING_AXE, IdleAnimationID.TWO_HANDED_AXE);\n\t\tWEAPON_TO_IDLE.put(ItemID._3RD_AGE_FELLING_AXE, IdleAnimationID.TWO_HANDED_AXE);\n\t\tWEAPON_TO_IDLE.put(ItemID.CRYSTAL_FELLING_AXE, IdleAnimationID.TWO_HANDED_AXE);\n\t\tWEAPON_TO_IDLE.put(ItemID.CRYSTAL_FELLING_AXE_INACTIVE, IdleAnimationID.TWO_HANDED_AXE);\n\t\tWEAPON_TO_IDLE.put(ItemID.CORRUPTED_ARMADYL_GODSWORD, IdleAnimationID.GODSWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.CORRUPTED_SCYTHE_OF_VITUR, IdleAnimationID.SCYTHE_OF_VITUR);\n\t\tWEAPON_TO_IDLE.put(ItemID.CORRUPTED_SCYTHE_OF_VITUR_UNCHARGED, IdleAnimationID.SCYTHE_OF_VITUR);\n\t\tWEAPON_TO_IDLE.put(ItemID.CORRUPTED_TUMEKENS_SHADOW, IdleAnimationID.TUMEKENS_SHADOW);\n\t\tWEAPON_TO_IDLE.put(ItemID.WARPED_SCEPTRE_UNCHARGED, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.WARPED_SCEPTRE, IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.DINHS_BLAZING_BULWARK , IdleAnimationID.DINHS_BULWARK);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLAZING_BLOWPIPE , IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLAZING_BLOWPIPE_EMPTY , IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.TRAILBLAZER_RELOADED_BANNER , IdleAnimationID.BANNER);\n\t\tWEAPON_TO_IDLE.put(ItemID.TRAILBLAZER_RELOADED_TORCH , IdleAnimationID.TRAILBLAZER_TORCH);\n\t\tWEAPON_TO_IDLE.put(ItemID.TRAILBLAZER_RELOADED_DRAGON_TROPHY , IdleAnimationID.HEAVY_ITEM);\n\t\tWEAPON_TO_IDLE.put(ItemID.TRAILBLAZER_RELOADED_RUNE_TROPHY , IdleAnimationID.HEAVY_ITEM);\n\t\tWEAPON_TO_IDLE.put(ItemID.TRAILBLAZER_RELOADED_ADAMANT_TROPHY , IdleAnimationID.HEAVY_ITEM);\n\t\tWEAPON_TO_IDLE.put(ItemID.BONE_MACE , IdleAnimationID.VERACS_FLAIL);\n\t\tWEAPON_TO_IDLE.put(ItemID.BONE_STAFF , IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.TECU_SALAMANDER , IdleAnimationID.SALAMANDER);\n\t\tWEAPON_TO_IDLE.put(ItemID.BLUE_MOON_SPEAR , IdleAnimationID.ZAMORAKIAN_SPEAR);\n\t\tWEAPON_TO_IDLE.put(ItemID.PURGING_STAFF , IdleAnimationID.UPRIGHT_WEAPON);\n\t\tWEAPON_TO_IDLE.put(ItemID.CORRUPTED_VOLATILE_NIGHTMARE_STAFF , IdleAnimationID.NIGHTMARE_STAFF);\n\t\tWEAPON_TO_IDLE.put(ItemID.ARMADYL_GODSWORD_DEADMAN , IdleAnimationID.GODSWORD);\n\t\tWEAPON_TO_IDLE.put(ItemID.VOLATILE_NIGHTMARE_STAFF_DEADMAN , IdleAnimationID.NIGHTMARE_STAFF);\n\t}\n\n\t// endregion\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\data\\anim\\ItemInteractions.java"},{"fileName":"BootsColor.java","content":"package eq.uirs.fashionscape.data.color;\n\nimport java.awt.Color;\nimport java.util.Arrays;\nimport java.util.Comparator;\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.client.util.Text;\n\n@Getter\n@RequiredArgsConstructor\npublic enum BootsColor implements Colorable\n{\n\tBROWN(0, new Color(111, 89, 61)),\n\tKHAKI(1, new Color(88, 88, 8)),\n\tASHEN(2, new Color(121, 113, 96)),\n\tDARK(3, new Color(65, 60, 60)),\n\tTERRACOTTA(4, new Color(129, 98, 58)),\n\tGREY(5, new Color(115, 114, 106));\n\n\tprivate static final BootsColor[] sorted \u003d Arrays.stream(values())\n\t\t.sorted(Comparator.comparing(BootsColor::getColorId))\n\t\t.toArray(BootsColor[]::new);\n\n\tpublic static BootsColor fromId(int id)\n\t{\n\t\tif (id \u003c 0 || id \u003e\u003d sorted.length)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\treturn values()[id];\n\t}\n\n\tprivate final int colorId;\n\n\tprivate final Color color;\n\n\tpublic String getDisplayName()\n\t{\n\t\treturn Text.titleCase(this);\n\t}\n\n\t@Override\n\tpublic int getColorId(ColorType type)\n\t{\n\t\treturn this.colorId;\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\data\\color\\BootsColor.java"},{"fileName":"ClothingColor.java","content":"package eq.uirs.fashionscape.data.color;\n\nimport java.awt.Color;\nimport java.util.Arrays;\nimport java.util.Comparator;\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.client.util.Text;\n\n@Getter\n@RequiredArgsConstructor\npublic enum ClothingColor implements Colorable\n{\n\tKHAKI(0, 1, new Color(123, 110, 50)),\n\tCHARCOAL(1, 2, new Color(38, 35, 35)),\n\tCRIMSON(2, 3, new Color(117, 47, 59)),\n\tNAVY(3, 4, new Color(59, 59, 78)),\n\tSTRAW(4, 5, new Color(170, 144, 69)),\n\tWHITE(5, 6, new Color(173, 164, 129)),\n\tRED(6, 7, new Color(139, 59, 42)),\n\tBLUE(7, 8, new Color(45, 82, 114)),\n\tGREEN(8, 9, new Color(45, 114, 62)),\n\tYELLOW(9, 10, new Color(163, 151, 13)),\n\tPURPLE(10, 11, new Color(131, 83, 123)),\n\tORANGE(11, 12, new Color(157, 100, 47)),\n\tROSE(12, 13, new Color(161, 112, 103)),\n\tLIME(13, 14, new Color(130, 148, 114)),\n\tCYAN(14, 15, new Color(114, 140, 148)),\n\tEMERALD(15, 0, new Color(28, 97, 53)),\n\tBLACK(16, 16, new Color(16, 16, 16)),\n\tGREY(17, 17, new Color(64, 64, 64)),\n\tONION(18, 18, new Color(248, 216, 144)),\n\tPEACH(19, 19, new Color(248, 190, 130)),\n\tLUMBRIDGE_BLUE(20, 20, new Color(150, 150, 255)),\n\tDEEP_BLUE(21, 21, new Color(0, 0, 255)),\n\tLIGHT_PINK(22, 22, new Color(255, 190, 190)),\n\tCADMIUM_RED(23, 23, new Color(200, 80, 50)),\n\tMAROON(24, 24, new Color(150, 40, 0)),\n\tPALE_GREEN(25, 25, new Color(200, 255, 200)),\n\tTURQUOISE(26, 26, new Color(0, 120, 120)),\n\tDEEP_PURPLE(27, 27, new Color(150, 0, 150)),\n\tLIGHT_PURPLE(28, 28, new Color(255, 150, 255));\n\n\tprivate static final ClothingColor[] torsoSorted \u003d Arrays.stream(values())\n\t\t.sorted(Comparator.comparing(ClothingColor::getTorsoColorId))\n\t\t.toArray(ClothingColor[]::new);\n\n\tprivate static final ClothingColor[] legsSorted \u003d Arrays.stream(values())\n\t\t.sorted(Comparator.comparing(ClothingColor::getLegsColorId))\n\t\t.toArray(ClothingColor[]::new);\n\n\tpublic static ClothingColor fromTorsoId(int id)\n\t{\n\t\tif (id \u003c 0 || id \u003e\u003d torsoSorted.length)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\treturn values()[id];\n\t}\n\n\tpublic static ClothingColor fromLegsId(int id)\n\t{\n\t\tif (id \u003c 0 || id \u003e\u003d legsSorted.length)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\treturn values()[id];\n\t}\n\n\tprivate final int torsoColorId;\n\n\tprivate final int legsColorId;\n\n\tprivate final Color color;\n\n\tpublic String getDisplayName()\n\t{\n\t\treturn Text.titleCase(this);\n\t}\n\n\t@Override\n\tpublic int getColorId(ColorType type)\n\t{\n\t\tif (type \u003d\u003d ColorType.TORSO)\n\t\t{\n\t\t\treturn torsoColorId;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn legsColorId;\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\data\\color\\ClothingColor.java"},{"fileName":"Colorable.java","content":"package eq.uirs.fashionscape.data.color;\n\nimport java.awt.Color;\n\npublic interface Colorable\n{\n\tString getDisplayName();\n\n\tColor getColor();\n\n\tint getColorId(ColorType type);\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\data\\color\\Colorable.java"},{"fileName":"ColorType.java","content":"package eq.uirs.fashionscape.data.color;\n\nimport net.runelite.client.util.Text;\n\npublic enum ColorType\n{\n\tHAIR,\n\tTORSO,\n\tLEGS,\n\tBOOTS,\n\tSKIN;\n\n\tpublic String getDisplayName()\n\t{\n\t\treturn Text.titleCase(this);\n\t}\n\n\tpublic Colorable[] getColorables()\n\t{\n\t\tswitch (this)\n\t\t{\n\t\t\tcase HAIR:\n\t\t\t\treturn HairColor.values();\n\t\t\tcase TORSO:\n\t\t\tcase LEGS:\n\t\t\t\treturn ClothingColor.values();\n\t\t\tcase BOOTS:\n\t\t\t\treturn BootsColor.values();\n\t\t\tcase SKIN:\n\t\t\t\treturn SkinColor.values();\n\t\t}\n\t\treturn new Colorable[0];\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\data\\color\\ColorType.java"},{"fileName":"HairColor.java","content":"package eq.uirs.fashionscape.data.color;\n\nimport java.awt.Color;\nimport java.util.Arrays;\nimport java.util.Comparator;\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.client.util.Text;\n\n@Getter\n@RequiredArgsConstructor\npublic enum HairColor implements Colorable\n{\n\tDARK_BROWN(0, new Color(93, 65, 29)),\n\tWHITE(1, new Color(227, 224, 224)),\n\tLIGHT_GREY(2, new Color(134, 144, 124)),\n\tDARK_GREY(3, new Color(72, 68, 68)),\n\tAPRICOT(4, new Color(217, 148, 78)),\n\tSTRAW(5, new Color(214, 185, 100)),\n\tLIGHT_BROWN(6, new Color(166, 123, 60)),\n\tBROWN(7, new Color(124, 89, 56)),\n\tTURQUOISE(8, new Color(18, 156, 161)),\n\tGREEN(9, new Color(18, 161, 24)),\n\tGINGER(10, new Color(179, 80, 21)),\n\tMAGENTA(11, new Color(198, 24, 207)),\n\tBLACK(12, new Color(44, 42, 42)),\n\tGREY(13, new Color(121, 109, 96)),\n\tBEIGE(14, new Color(187, 186, 149)),\n\tPEACH(15, new Color(217, 145, 101)),\n\tLIGHT_BLUE(16, new Color(144, 173, 202)),\n\tROYAL_BLUE(17, new Color(62, 64, 173)),\n\tPALE_PINK(18, new Color(181, 146, 145)),\n\tINTENSE_PINK(19, new Color(204, 101, 95)),\n\tMAROON(20, new Color(87, 18, 9)),\n\tLIGHT_GREEN(21, new Color(145, 202, 146)),\n\tDARK_GREEN(22, new Color(59, 88, 79)),\n\tPURPLE(23, new Color(136, 65, 178)),\n\tLIGHT_PURPLE(24, new Color(185, 141, 200)),\n\tNAVY_BLUE(25, new Color(36, 37, 67)),\n\tBRIGHT_RED(26, new Color(155, 13, 5)),\n\tYELLOW(27, new Color(248, 203, 18)),\n\tDARK_PURPLE(28, new Color(56, 2, 74)),\n\tAQUA(29, new Color(31, 155, 127));\n\n\tprivate static final HairColor[] sorted \u003d Arrays.stream(values())\n\t\t.sorted(Comparator.comparing(HairColor::getColorId))\n\t\t.toArray(HairColor[]::new);\n\n\tpublic static HairColor fromId(int id)\n\t{\n\t\tif (id \u003c 0 || id \u003e\u003d sorted.length)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\treturn values()[id];\n\t}\n\n\tprivate final int colorId;\n\n\tprivate final Color color;\n\n\tpublic String getDisplayName()\n\t{\n\t\treturn Text.titleCase(this);\n\t}\n\n\t@Override\n\tpublic int getColorId(ColorType type)\n\t{\n\t\treturn this.colorId;\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\data\\color\\HairColor.java"},{"fileName":"SkinColor.java","content":"package eq.uirs.fashionscape.data.color;\n\nimport java.awt.Color;\nimport java.util.Arrays;\nimport java.util.Comparator;\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.client.util.Text;\n\n@Getter\n@RequiredArgsConstructor\npublic enum SkinColor implements Colorable\n{\n\tVERY_PALE(7, new Color(213, 169, 133)),\n\tPALE(0, new Color(187, 143, 106)),\n\tDEFAULT(1, new Color(164, 127, 93)),\n\tSLIGHTLY_TAN(2, new Color(158, 122, 73)),\n\tTAN(3, new Color(131, 110, 66)),\n\tVERY_TAN(4, new Color(121, 88, 42)),\n\tDARK(5, new Color(100, 78, 36)),\n\tVERY_DARK(6, new Color(76, 61, 9)),\n\tGREEN(8, new Color(0, 127, 0)),\n\tBLACK(9, new Color(15, 15, 15)),\n\tWHITE(10, new Color(255, 255, 255)),\n\tCYAN(11, new Color(5, 152, 159)),\n\tPURPLE(12, new Color(100, 65, 164));\n\n\tprivate static final SkinColor[] sorted \u003d Arrays.stream(values())\n\t\t.sorted(Comparator.comparing(SkinColor::getColorId))\n\t\t.toArray(SkinColor[]::new);\n\n\tpublic static SkinColor fromId(int id)\n\t{\n\t\tif (id \u003c 0 || id \u003e\u003d sorted.length)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\treturn values()[id];\n\t}\n\n\tprivate final int colorId;\n\n\tprivate final Color color;\n\n\t@Override\n\tpublic String getDisplayName()\n\t{\n\t\treturn Text.titleCase(this);\n\t}\n\n\t@Override\n\tpublic int getColorId(ColorType type)\n\t{\n\t\treturn this.colorId;\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\data\\color\\SkinColor.java"},{"fileName":"ArmsKit.java","content":"package eq.uirs.fashionscape.data.kit;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.api.kit.KitType;\n\n@Getter\n@RequiredArgsConstructor\npublic enum ArmsKit implements Kit\n{\n\tREGULAR(26, null),\n\tMUSCLEBOUND(27, null),\n\tLOOSE_SLEEVED(28, null),\n\tLARGE_CUFFED(29, null),\n\tTHIN(30, null),\n\tSHOULDER_PADS(31, null),\n\tTHIN_STRIPE(32, 97),\n\tTHICK_STRIPE(84, null),\n\tWHITE_CUFFS(85, 96),\n\tPRINCELY_A(86, null),\n\tTATTY(87, 98),\n\tRIPPED(88, null),\n\tSHORT_SLEEVES(null, 61),\n\tBARE_ARMS(null, 62),\n\tMUSCLEY(null, 63),\n\tLONG_SLEEVED(null, 64),\n\tLARGE_CUFFS(null, 65),\n\tFRILLY_A(null, 66),\n\tSWEATER_A(null, 95),\n\tBARE_SHOULDERS(null, 99);\n\n\tprivate final Integer mascKitId;\n\tprivate final Integer femKitId;\n\n\t@Override\n\tpublic KitType getKitType()\n\t{\n\t\treturn KitType.ARMS;\n\t}\n\n\t@Override\n\tpublic String getDisplayName()\n\t{\n\t\tswitch (this)\n\t\t{\n\t\t\tcase PRINCELY_A:\n\t\t\t\treturn \"Princely\";\n\t\t\tcase FRILLY_A:\n\t\t\t\treturn \"Frilly\";\n\t\t\tcase SWEATER_A:\n\t\t\t\treturn \"Sweater\";\n\t\t}\n\t\treturn Kit.sentenceCaseName(this);\n\t}\n\n\t@Override\n\tpublic boolean isHidden()\n\t{\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\data\\kit\\ArmsKit.java"},{"fileName":"BootsKit.java","content":"package eq.uirs.fashionscape.data.kit;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.api.kit.KitType;\n\n@Getter\n@RequiredArgsConstructor\npublic enum BootsKit implements Kit\n{\n\tSMALL(42, 79, false),\n\tLARGE(43, 80, false),\n\tLARGE_2(44, 81, true),\n\tMINECART(82, 83, true);\n\n\tprivate final Integer mascKitId;\n\tprivate final Integer femKitId;\n\n\tprivate final boolean hidden;\n\n\t@Override\n\tpublic KitType getKitType()\n\t{\n\t\treturn KitType.BOOTS;\n\t}\n\n\t@Override\n\tpublic String getDisplayName()\n\t{\n\t\tif (this \u003d\u003d LARGE_2)\n\t\t{\n\t\t\treturn \"Large\";\n\t\t}\n\t\treturn Kit.sentenceCaseName(this);\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\data\\kit\\BootsKit.java"},{"fileName":"HairKit.java","content":"package eq.uirs.fashionscape.data.kit;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.api.kit.KitType;\n\n@RequiredArgsConstructor\n@Getter\npublic enum HairKit implements Kit\n{\n\tBALD(0, 45),\n\tDREADLOCKS(1, 47),\n\tLONG(2, 48),\n\tMEDIUM(3, 49),\n\tTONSURE(4, 174),\n\tSHORT(5, 51),\n\tCROPPED(6, 52),\n\tWILD_SPIKES(7, 53),\n\tSPIKES(8, 54),\n\tMOHAWK(9, 175),\n\tWIND_BRAIDS(129, 120),\n\tQUIFF(130, 176),\n\tSAMURAI(131, 177),\n\tPRINCELY(132, 178),\n\tCURTAINS(133, 128),\n\tLONG_CURTAINS(134, 179),\n\tTOUSLED(144, 180),\n\tSIDE_WEDGE(145, 181),\n\tFRONT_WEDGE(146, 182),\n\tFRONT_SPIKES(147, 183),\n\tFROHAWK(148, 184),\n\tREAR_SKIRT(149, 185),\n\tQUEUE(150, 186),\n\tFRONT_SPLIT(151, 141),\n\tMULLET(201, 154),\n\tUNDERCUT(202, 155),\n\tPOMPADOUR(203, 156),\n\tAFRO(204, 157),\n\tSHORT_LOCS(205, 158),\n\tSPIKY_MOHAWK(206, 159),\n\tSLICKED_MOHAWK(207, 160),\n\tLONG_QUIFF(208, 161),\n\tSHORT_CHOPPY(209, 162),\n\tSIDE_AFRO(210, 163),\n\tPUNK(211, 164),\n\tHALF_SHAVED(212, 165),\n\tFREMENNIK(213, 166),\n\tELVEN(214, 167),\n\tMEDIUM_COILS(215, 168),\n\tLOW_BUN(216, 169),\n\tMESSY_BUN(217, 170),\n\tHIGH_PONYTAIL(218, 171),\n\tPLAITS(219, 172),\n\tHIGH_BUNCHES(220, 173),\n\tBUN(221, 46),\n\tPIGTAILS(222, 50),\n\tEARMUFFS(223, 55),\n\tSIDE_PONY(224, 118),\n\tCURLS(225, 119),\n\tPONYTAIL(226, 121),\n\tBRAIDS(227, 122),\n\tBUNCHES(228, 123),\n\tBOB(229, 124),\n\tLAYERED(230, 125),\n\tSTRAIGHT(231, 126),\n\tSTRAIGHT_BRAIDS(232, 127),\n\tTWO_BACK(233, 143);\n\n\tprivate final Integer mascKitId;\n\tprivate final Integer femKitId;\n\n\t@Override\n\tpublic KitType getKitType()\n\t{\n\t\treturn KitType.HAIR;\n\t}\n\n\t@Override\n\tpublic String getDisplayName()\n\t{\n\t\tswitch (this)\n\t\t{\n\t\t\tcase HALF_SHAVED:\n\t\t\t\treturn \"Half-shaved\";\n\t\t\tcase TWO_BACK:\n\t\t\t\treturn \"Two-back\";\n\t\t}\n\t\treturn Kit.sentenceCaseName(this);\n\t}\n\n\t@Override\n\tpublic boolean isHidden()\n\t{\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\data\\kit\\HairKit.java"},{"fileName":"HandsKit.java","content":"package eq.uirs.fashionscape.data.kit;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.api.kit.KitType;\n\n@RequiredArgsConstructor\n@Getter\npublic enum HandsKit implements Kit\n{\n\tBRACERS2(\"Bracers\", 33, 67, true),\n\tPLAIN_H(\"Plain\", 34, 68, false),\n\tBRACERS(\"Bracers\", 35, 69, false);\n\n\tprivate final String displayName;\n\n\tprivate final Integer mascKitId;\n\tprivate final Integer femKitId;\n\n\tprivate final boolean hidden;\n\n\t@Override\n\tpublic KitType getKitType()\n\t{\n\t\treturn KitType.HANDS;\n\t}\n\n\t@Override\n\tpublic String getDisplayName()\n\t{\n\t\treturn displayName;\n\t}\n\n\t@Override\n\tpublic boolean isHidden()\n\t{\n\t\treturn hidden;\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\data\\kit\\HandsKit.java"},{"fileName":"JawIcon.java","content":"package eq.uirs.fashionscape.data.kit;\n\nimport java.util.Arrays;\nimport javax.annotation.Nullable;\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum JawIcon\n{\n\tNOTHING(\"No icon\", -1),\n\tBA_ATTACKER(\"Attacker icon\", 10556),\n\tBA_DEFENDER(\"Defender icon\", 10558),\n\tBA_COLLECTOR(\"Collector icon\", 10557),\n\tBA_HEALER(\"Healer icon\", 10559),\n\tSW_BLUE(\"Blue icon\", 25212),\n\tSW_RED(\"Red icon\", 25228);\n\n\t@Nullable\n\tpublic static JawIcon fromId(int id)\n\t{\n\t\treturn Arrays.stream(JawIcon.values())\n\t\t\t.filter(i -\u003e i.id \u003d\u003d id)\n\t\t\t.findFirst()\n\t\t\t.orElse(null);\n\t}\n\n\tprivate final String displayName;\n\n\t// representative item id for displaying in panel icon and for color scoring\n\tprivate final int id;\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\data\\kit\\JawIcon.java"},{"fileName":"JawKit.java","content":"package eq.uirs.fashionscape.data.kit;\n\nimport com.google.common.collect.ImmutableMap;\nimport eq.uirs.fashionscape.core.FashionManager;\nimport java.util.HashMap;\nimport java.util.Map;\nimport javax.annotation.Nonnull;\nimport javax.annotation.Nullable;\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.api.kit.KitType;\n\n/**\n * Unlike other kits, the jaw slot can contain icon items, which require special handling since they\u0027re treated\n * as neither normal items nor normal kits by the plugin.\n */\n@RequiredArgsConstructor\npublic enum JawKit implements Kit\n{\n\t// only valid when worn items obscure the player\u0027s jaw\n\tNO_JAW(-256, -256,\n\t\tnew ImmutableMap.Builder\u003cJawIcon, Integer\u003e()\n\t\t\t.put(JawIcon.BA_ATTACKER, 10556)\n\t\t\t.put(JawIcon.BA_DEFENDER, 10558)\n\t\t\t.put(JawIcon.BA_COLLECTOR, 10557)\n\t\t\t.put(JawIcon.BA_HEALER, 10559)\n\t\t\t.put(JawIcon.SW_BLUE, 25212)\n\t\t\t.put(JawIcon.SW_RED, 25228)\n\t\t\t.build()),\n\n\tGOATEE(10, 292,\n\t\tnew ImmutableMap.Builder\u003cJawIcon, Integer\u003e()\n\t\t\t.put(JawIcon.BA_ATTACKER, 23460)\n\t\t\t.put(JawIcon.BA_DEFENDER, 23466)\n\t\t\t.put(JawIcon.BA_COLLECTOR, 22339)\n\t\t\t.put(JawIcon.BA_HEALER, 23478)\n\t\t\t.put(JawIcon.SW_BLUE, 25213)\n\t\t\t.put(JawIcon.SW_RED, 25229)\n\t\t\t.build()),\n\n\tLONG_J(11, 293,\n\t\tnew ImmutableMap.Builder\u003cJawIcon, Integer\u003e()\n\t\t\t.put(JawIcon.BA_ATTACKER, 22723)\n\t\t\t.put(JawIcon.BA_DEFENDER, 22345)\n\t\t\t.put(JawIcon.BA_COLLECTOR, 23471)\n\t\t\t.put(JawIcon.BA_HEALER, 22311)\n\t\t\t.put(JawIcon.SW_BLUE, 25214)\n\t\t\t.put(JawIcon.SW_RED, 25230)\n\t\t\t.build()),\n\n\tMEDIUM_J(12, 294,\n\t\tnew ImmutableMap.Builder\u003cJawIcon, Integer\u003e()\n\t\t\t.put(JawIcon.BA_ATTACKER, 23461)\n\t\t\t.put(JawIcon.BA_DEFENDER, 22728)\n\t\t\t.put(JawIcon.BA_COLLECTOR, 23472)\n\t\t\t.put(JawIcon.BA_HEALER, 23479)\n\t\t\t.put(JawIcon.SW_BLUE, 25215)\n\t\t\t.put(JawIcon.SW_RED, 25231)\n\t\t\t.build()),\n\n\tSMALL_MOUSTACHE(13, 295,\n\t\tnew ImmutableMap.Builder\u003cJawIcon, Integer\u003e()\n\t\t\t.put(JawIcon.BA_ATTACKER, 22722)\n\t\t\t.put(JawIcon.BA_DEFENDER, 22344)\n\t\t\t.put(JawIcon.BA_COLLECTOR, 22338)\n\t\t\t.put(JawIcon.BA_HEALER, 22310)\n\t\t\t.put(JawIcon.SW_BLUE, 25216)\n\t\t\t.put(JawIcon.SW_RED, 25232)\n\t\t\t.build()),\n\n\tCLEAN_SHAVEN(14, 296,\n\t\tnew ImmutableMap.Builder\u003cJawIcon, Integer\u003e()\n\t\t\t.put(JawIcon.BA_ATTACKER, 23462)\n\t\t\t.put(JawIcon.BA_DEFENDER, 23467)\n\t\t\t.put(JawIcon.BA_COLLECTOR, 23473)\n\t\t\t.put(JawIcon.BA_HEALER, 23480)\n\t\t\t.put(JawIcon.SW_BLUE, 25217)\n\t\t\t.put(JawIcon.SW_RED, 25233)\n\t\t\t.build()),\n\n\tSHORT_J(15, 297,\n\t\tnew ImmutableMap.Builder\u003cJawIcon, Integer\u003e()\n\t\t\t.put(JawIcon.BA_ATTACKER, 23463)\n\t\t\t.put(JawIcon.BA_DEFENDER, 23468)\n\t\t\t.put(JawIcon.BA_COLLECTOR, 22337)\n\t\t\t.put(JawIcon.BA_HEALER, 22309)\n\t\t\t.put(JawIcon.SW_BLUE, 25218)\n\t\t\t.put(JawIcon.SW_RED, 25234)\n\t\t\t.build()),\n\n\tPOINTY(16, 298,\n\t\tnew ImmutableMap.Builder\u003cJawIcon, Integer\u003e()\n\t\t\t.put(JawIcon.BA_ATTACKER, 22721)\n\t\t\t.put(JawIcon.BA_DEFENDER, 22343)\n\t\t\t.put(JawIcon.BA_COLLECTOR, 23474)\n\t\t\t.put(JawIcon.BA_HEALER, 23481)\n\t\t\t.put(JawIcon.SW_BLUE, 25219)\n\t\t\t.put(JawIcon.SW_RED, 25235)\n\t\t\t.build()),\n\n\tSPLIT(17, 299,\n\t\tnew ImmutableMap.Builder\u003cJawIcon, Integer\u003e()\n\t\t\t.put(JawIcon.BA_ATTACKER, 23464)\n\t\t\t.put(JawIcon.BA_DEFENDER, 23469)\n\t\t\t.put(JawIcon.BA_COLLECTOR, 22315)\n\t\t\t.put(JawIcon.BA_HEALER, 23482)\n\t\t\t.put(JawIcon.SW_BLUE, 25220)\n\t\t\t.put(JawIcon.SW_RED, 25236)\n\t\t\t.build()),\n\n\tHANDLEBAR(111, 300,\n\t\tnew ImmutableMap.Builder\u003cJawIcon, Integer\u003e()\n\t\t\t.put(JawIcon.BA_ATTACKER, 22349)\n\t\t\t.put(JawIcon.BA_DEFENDER, 22342)\n\t\t\t.put(JawIcon.BA_COLLECTOR, 23475)\n\t\t\t.put(JawIcon.BA_HEALER, 22308)\n\t\t\t.put(JawIcon.SW_BLUE, 25221)\n\t\t\t.put(JawIcon.SW_RED, 25237)\n\t\t\t.build()),\n\n\tMUTTON(112, 301,\n\t\tnew ImmutableMap.Builder\u003cJawIcon, Integer\u003e()\n\t\t\t.put(JawIcon.BA_ATTACKER, 22730)\n\t\t\t.put(JawIcon.BA_DEFENDER, 23470)\n\t\t\t.put(JawIcon.BA_COLLECTOR, 22314)\n\t\t\t.put(JawIcon.BA_HEALER, 23483)\n\t\t\t.put(JawIcon.SW_BLUE, 25222)\n\t\t\t.put(JawIcon.SW_RED, 25238)\n\t\t\t.build()),\n\n\tFULL_MUTTON(113, 302,\n\t\tnew ImmutableMap.Builder\u003cJawIcon, Integer\u003e()\n\t\t\t.put(JawIcon.BA_ATTACKER, 22348)\n\t\t\t.put(JawIcon.BA_DEFENDER, 22341)\n\t\t\t.put(JawIcon.BA_COLLECTOR, 23476)\n\t\t\t.put(JawIcon.BA_HEALER, 20802)\n\t\t\t.put(JawIcon.SW_BLUE, 25223)\n\t\t\t.put(JawIcon.SW_RED, 25239)\n\t\t\t.build()),\n\n\tBIG_MOUSTACHE(114, 303,\n\t\tnew ImmutableMap.Builder\u003cJawIcon, Integer\u003e()\n\t\t\t.put(JawIcon.BA_ATTACKER, 22729)\n\t\t\t.put(JawIcon.BA_DEFENDER, 22727)\n\t\t\t.put(JawIcon.BA_COLLECTOR, 22313)\n\t\t\t.put(JawIcon.BA_HEALER, 23484)\n\t\t\t.put(JawIcon.SW_BLUE, 25224)\n\t\t\t.put(JawIcon.SW_RED, 25240)\n\t\t\t.build()),\n\n\tWAXED_MOUSTACHE(115, 304,\n\t\tnew ImmutableMap.Builder\u003cJawIcon, Integer\u003e()\n\t\t\t.put(JawIcon.BA_ATTACKER, 22347)\n\t\t\t.put(JawIcon.BA_DEFENDER, 22340)\n\t\t\t.put(JawIcon.BA_COLLECTOR, 22724)\n\t\t\t.put(JawIcon.BA_HEALER, 10567)\n\t\t\t.put(JawIcon.SW_BLUE, 25225)\n\t\t\t.put(JawIcon.SW_RED, 25241)\n\t\t\t.build()),\n\n\tDALI(116, 305,\n\t\tnew ImmutableMap.Builder\u003cJawIcon, Integer\u003e()\n\t\t\t.put(JawIcon.BA_ATTACKER, 23465)\n\t\t\t.put(JawIcon.BA_DEFENDER, 22726)\n\t\t\t.put(JawIcon.BA_COLLECTOR, 22312)\n\t\t\t.put(JawIcon.BA_HEALER, 23485)\n\t\t\t.put(JawIcon.SW_BLUE, 25226)\n\t\t\t.put(JawIcon.SW_RED, 25242)\n\t\t\t.build()),\n\n\tVIZIER(117, 306,\n\t\tnew ImmutableMap.Builder\u003cJawIcon, Integer\u003e()\n\t\t\t.put(JawIcon.BA_ATTACKER, 22346)\n\t\t\t.put(JawIcon.BA_DEFENDER, 22725)\n\t\t\t.put(JawIcon.BA_COLLECTOR, 23477)\n\t\t\t.put(JawIcon.BA_HEALER, 23486)\n\t\t\t.put(JawIcon.SW_BLUE, 25227)\n\t\t\t.put(JawIcon.SW_RED, 25243)\n\t\t\t.build());\n\n\t// item id -\u003e icon\n\tprivate static final Map\u003cInteger, JawIcon\u003e reverseLookupIcon \u003d new HashMap\u003c\u003e();\n\t// equipment id -\u003e kit\n\tprivate static final Map\u003cInteger, JawKit\u003e reverseLookupKit \u003d new HashMap\u003c\u003e();\n\n\t@Nonnull\n\tpublic static JawIcon iconFromItemId(Integer itemId)\n\t{\n\t\tJawIcon icon \u003d reverseLookupIcon.get(itemId);\n\t\treturn icon !\u003d null ? icon : JawIcon.NOTHING;\n\t}\n\n\tpublic static boolean isNoJawIcon(int itemId)\n\t{\n\t\treturn JawKit.NO_JAW.icons.containsValue(itemId);\n\t}\n\n\tpublic static JawKit fromEquipmentId(int equipId)\n\t{\n\t\treturn reverseLookupKit.get(equipId);\n\t}\n\n\tstatic\n\t{\n\t\tfor (JawKit kit : JawKit.values())\n\t\t{\n\t\t\treverseLookupKit.put(kit.mascKitId + FashionManager.KIT_OFFSET, kit);\n\t\t\treverseLookupKit.put(kit.femKitId + FashionManager.KIT_OFFSET, kit);\n\t\t\tkit.icons.forEach((icon, itemId) -\u003e {\n\t\t\t\treverseLookupIcon.put(itemId, icon);\n\t\t\t\treverseLookupKit.put(itemId + FashionManager.ITEM_OFFSET, kit);\n\t\t\t});\n\t\t}\n\t}\n\n\t@Getter\n\tprivate final Integer mascKitId;\n\t@Getter\n\tprivate final Integer femKitId;\n\n\t// values are equipment ids\n\tprivate final Map\u003cJawIcon, Integer\u003e icons;\n\n\t@Override\n\tpublic KitType getKitType()\n\t{\n\t\treturn KitType.JAW;\n\t}\n\n\t@Override\n\tpublic String getDisplayName()\n\t{\n\t\tswitch (this)\n\t\t{\n\t\t\tcase NO_JAW:\n\t\t\t\treturn \"\";\n\t\t\tcase CLEAN_SHAVEN:\n\t\t\t\treturn \"Clean-shaven\";\n\t\t\tcase LONG_J:\n\t\t\t\treturn \"Long\";\n\t\t\tcase MEDIUM_J:\n\t\t\t\treturn \"Medium\";\n\t\t\tcase SHORT_J:\n\t\t\t\treturn \"Short\";\n\t\t}\n\t\treturn Kit.sentenceCaseName(this);\n\t}\n\n\t@Nullable\n\tpublic Integer getIconItemId(JawIcon icon)\n\t{\n\t\treturn icons.get(icon);\n\t}\n\n\t@Override\n\tpublic boolean isHidden()\n\t{\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\data\\kit\\JawKit.java"},{"fileName":"Kit.java","content":"package eq.uirs.fashionscape.data.kit;\n\nimport java.util.Arrays;\nimport java.util.function.IntFunction;\nimport net.runelite.api.kit.KitType;\nimport org.apache.commons.text.WordUtils;\n\npublic interface Kit\n{\n\tstatic Kit[] allInSlot(KitType slot, boolean includeHidden)\n\t{\n\t\tKit[] values;\n\t\tIntFunction\u003cKit[]\u003e creator;\n\t\tswitch (slot)\n\t\t{\n\t\t\tcase HAIR:\n\t\t\t\tvalues \u003d HairKit.values();\n\t\t\t\tcreator \u003d HairKit[]::new;\n\t\t\t\tbreak;\n\t\t\tcase JAW:\n\t\t\t\tvalues \u003d JawKit.values();\n\t\t\t\tcreator \u003d JawKit[]::new;\n\t\t\t\tbreak;\n\t\t\tcase TORSO:\n\t\t\t\tvalues \u003d TorsoKit.values();\n\t\t\t\tcreator \u003d TorsoKit[]::new;\n\t\t\t\tbreak;\n\t\t\tcase ARMS:\n\t\t\t\tvalues \u003d ArmsKit.values();\n\t\t\t\tcreator \u003d ArmsKit[]::new;\n\t\t\t\tbreak;\n\t\t\tcase LEGS:\n\t\t\t\tvalues \u003d LegsKit.values();\n\t\t\t\tcreator \u003d LegsKit[]::new;\n\t\t\t\tbreak;\n\t\t\tcase HANDS:\n\t\t\t\tvalues \u003d HandsKit.values();\n\t\t\t\tcreator \u003d HandsKit[]::new;\n\t\t\t\tbreak;\n\t\t\tcase BOOTS:\n\t\t\t\tvalues \u003d BootsKit.values();\n\t\t\t\tcreator \u003d BootsKit[]::new;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn new Kit[0];\n\t\t}\n\t\treturn Arrays.stream(values)\n\t\t\t.filter(kit -\u003e includeHidden || !kit.isHidden())\n\t\t\t.toArray(creator);\n\t}\n\n\tKitType getKitType();\n\n\tString getDisplayName();\n\n\tboolean isHidden();\n\n\tInteger getMascKitId();\n\tInteger getFemKitId();\n\n\tdefault Integer getKitId(Integer gender)\n\t{\n\t\tswitch (gender)\n\t\t{\n\t\t\tcase 0:\n\t\t\t\treturn getMascKitId();\n\t\t\tcase 1:\n\t\t\t\treturn getFemKitId();\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n\n\tstatic String sentenceCaseName(Enum e)\n\t{\n\t\treturn WordUtils.capitalize(e.toString().toLowerCase()).replace(\"_\", \" \");\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\data\\kit\\Kit.java"},{"fileName":"LegsKit.java","content":"package eq.uirs.fashionscape.data.kit;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.api.kit.KitType;\n\n@RequiredArgsConstructor\n@Getter\npublic enum LegsKit implements Kit\n{\n\tPLAIN_L(36, 70),\n\tSHORTS(37, null),\n\tFLARES(38, 72),\n\tTURN_UPS(39, 76),\n\tTATTY_L(40, 75),\n\tBEACH(41, null),\n\tPRINCELY_L(100, null),\n\tLEGGINGS(101, null),\n\tSIDE_STRIPES(102, null),\n\tRIPPED_L(103, null),\n\tPATCHED(104, null),\n\tSKIRT(null, 71),\n\tLONG_SKIRT(null, 73),\n\tLONG_NARROW_SKIRT(null, 74),\n\tSHORT_SKIRT(null, 77),\n\tLAYERED_L(null, 78),\n\tSASH_AND_DOTS(null, 135),\n\tBIG_HEM(null, 136),\n\tSASH_AND_TROUSERS(null, 137),\n\tPATTERNED(null, 138),\n\tTORN_SKIRT(null, 139),\n\tPATCHED_SKIRT(null, 140);\n\n\tprivate final Integer mascKitId;\n\tprivate final Integer femKitId;\n\n\t@Override\n\tpublic KitType getKitType()\n\t{\n\t\treturn KitType.LEGS;\n\t}\n\n\t@Override\n\tpublic String getDisplayName()\n\t{\n\t\tswitch (this)\n\t\t{\n\t\t\tcase PLAIN_L:\n\t\t\t\treturn \"Plain\";\n\t\t\tcase TURN_UPS:\n\t\t\t\treturn \"Turn-ups\";\n\t\t\tcase TATTY_L:\n\t\t\t\treturn \"Tatty\";\n\t\t\tcase PRINCELY_L:\n\t\t\t\treturn \"Princely\";\n\t\t\tcase SIDE_STRIPES:\n\t\t\t\treturn \"Side-stripes\";\n\t\t\tcase RIPPED_L:\n\t\t\t\treturn \"Ripped\";\n\t\t\tcase LAYERED_L:\n\t\t\t\treturn \"Layered\";\n\t\t\tcase SASH_AND_DOTS:\n\t\t\t\treturn \"Sash \u0026 dots\";\n\t\t\tcase SASH_AND_TROUSERS:\n\t\t\t\treturn \"Sash \u0026 trousers\";\n\t\t}\n\t\treturn Kit.sentenceCaseName(this);\n\t}\n\n\t@Override\n\tpublic boolean isHidden()\n\t{\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\data\\kit\\LegsKit.java"},{"fileName":"TorsoKit.java","content":"package eq.uirs.fashionscape.data.kit;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.api.kit.KitType;\n\n@RequiredArgsConstructor\n@Getter\npublic enum TorsoKit implements Kit\n{\n\tPLAIN(18, 56),\n\tLIGHT_BUTTONS(19, null),\n\tDARK_BUTTONS(20, null),\n\tJACKET(21, null),\n\tSHIRT(22, 90),\n\tSTITCHING(23, null),\n\tTORN(24, 60),\n\tTWO_TONED(25, null),\n\tSWEATER(105, 89),\n\tBUTTONED_SHIRT(106, null),\n\tVEST(107, 91),\n\tPRINCELY_T(108, null),\n\tRIPPED_WESKIT(109, null),\n\tTORN_WESKIT(110, null),\n\tCROP_TOP(null, 57),\n\tPOLO_NECK(null, 58),\n\tSIMPLE(null, 59),\n\tFRILLY(null, 92),\n\tCORSETRY(null, 93),\n\tBODICE(null, 94);\n\n\tprivate final Integer mascKitId;\n\tprivate final Integer femKitId;\n\n\t@Override\n\tpublic KitType getKitType()\n\t{\n\t\treturn KitType.TORSO;\n\t}\n\n\t@Override\n\tpublic String getDisplayName()\n\t{\n\t\tswitch (this)\n\t\t{\n\t\t\tcase TWO_TONED:\n\t\t\t\treturn \"Two-toned\";\n\t\t\tcase PRINCELY_T:\n\t\t\t\treturn \"Princely\";\n\t\t\tcase CROP_TOP:\n\t\t\t\treturn \"Crop-top\";\n\t\t}\n\t\treturn Kit.sentenceCaseName(this);\n\t}\n\n\t@Override\n\tpublic boolean isHidden()\n\t{\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\data\\kit\\TorsoKit.java"},{"fileName":"FashionscapeConfig.java","content":"package eq.uirs.fashionscape;\n\nimport eq.uirs.fashionscape.core.randomizer.RandomizerIntelligence;\nimport eq.uirs.fashionscape.panel.SortBy;\nimport java.util.HashMap;\nimport net.runelite.api.kit.KitType;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\nimport org.apache.commons.lang3.SerializationUtils;\n\n@ConfigGroup(FashionscapeConfig.GROUP)\npublic interface FashionscapeConfig extends Config\n{\n\tString GROUP \u003d \"fashionscape\";\n\tString KEY_EXCLUDE_NON_STANDARD \u003d \"excludeNonStandardItems\";\n\tString KEY_EXCLUDE_MEMBERS \u003d \"excludeMembersItems\";\n\tString KEY_IMPORT_MENU_ENTRY \u003d \"copyMenuEntry\";\n\tString KEY_REAL_KITS \u003d \"realKitIds\";\n\n\t@ConfigItem(\n\t\tposition \u003d 0,\n\t\tkeyName \u003d KEY_EXCLUDE_NON_STANDARD,\n\t\tname \u003d \"Exclude non-standard items\",\n\t\tdescription \u003d \"Filters out items that cannot be normally equipped anywhere\"\n\t)\n\tdefault boolean excludeNonStandardItems()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 1,\n\t\tkeyName \u003d KEY_EXCLUDE_MEMBERS,\n\t\tname \u003d \"Exclude members items\",\n\t\tdescription \u003d \"Filters out members-only objects\"\n\t)\n\tdefault boolean excludeMembersItems()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 2,\n\t\tkeyName \u003d KEY_IMPORT_MENU_ENTRY,\n\t\tname \u003d \"\\\"Copy-outfit\\\" entry\",\n\t\tdescription \u003d \"Adds \\\"copy-outfit\\\" right click option to other players\"\n\t)\n\tdefault boolean copyMenuEntry()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigSection(\n\t\tname \u003d \"Randomizer\",\n\t\tdescription \u003d \"Settings relating to the outfit randomizer\",\n\t\tposition \u003d 3\n\t)\n\tString randomizerSettings \u003d \"randomizerSettings\";\n\n\t@ConfigItem(\n\t\tposition \u003d 0,\n\t\tkeyName \u003d \"randomizerIntelligence\",\n\t\tname \u003d \"Intelligence\",\n\t\tdescription \u003d \"Randomizer will utilize colour matching with higher settings\",\n\t\tsection \u003d randomizerSettings\n\t)\n\tdefault RandomizerIntelligence randomizerIntelligence()\n\t{\n\t\treturn RandomizerIntelligence.LOW;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 1,\n\t\tkeyName \u003d \"excludeBaseModels\",\n\t\tname \u003d \"Exclude base models\",\n\t\tdescription \u003d \"Randomizer will not shuffle base models (e.g., hair) if checked\",\n\t\tsection \u003d randomizerSettings\n\t)\n\tdefault boolean excludeBaseModels()\n\t{\n\t\treturn false;\n\t}\n\n\t// region Hidden stuff\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"preferredSort\",\n\t\tname \u003d \"Preferred sort order\",\n\t\tdescription \u003d \"Last used result sort order (hidden)\",\n\t\thidden \u003d true\n\t)\n\tdefault SortBy preferredSort()\n\t{\n\t\treturn SortBy.COLOR_MATCH;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"preferredSort\",\n\t\tname \u003d \"Preferred sort order\",\n\t\tdescription \u003d \"Last used result sort order (hidden)\",\n\t\thidden \u003d true\n\t)\n\tvoid setPreferredSort(SortBy sort);\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"currentEquipment\",\n\t\tname \u003d \"Current equipment\",\n\t\tdescription \u003d \"The player\u0027s equipment ids set by the plugin (hidden)\",\n\t\thidden \u003d true\n\t)\n\tdefault byte[] currentEquipment()\n\t{\n\t\treturn SerializationUtils.serialize(new HashMap\u003cKitType, Integer\u003e());\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"currentEquipment\",\n\t\tname \u003d \"Current equipment\",\n\t\tdescription \u003d \"The player\u0027s equipment ids set by the plugin (hidden)\",\n\t\thidden \u003d true\n\t)\n\tvoid setCurrentEquipment(byte[] equipIdsMapBytes);\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"currentIcon\",\n\t\tname \u003d \"Current icon\",\n\t\tdescription \u003d \"The player\u0027s jaw icon set by the plugin (hidden)\",\n\t\thidden \u003d true\n\t)\n\tdefault Integer currentIcon()\n\t{\n\t\treturn null;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"currentIcon\",\n\t\tname \u003d \"Current icon\",\n\t\tdescription \u003d \"The player\u0027s jaw icon set by the plugin (hidden)\",\n\t\thidden \u003d true\n\t)\n\tvoid setCurrentIcon(Integer iconId);\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"currentColors\",\n\t\tname \u003d \"Current colors\",\n\t\tdescription \u003d \"The player\u0027s color ids (map of color type ordinal -\u003e color id) set by the plugin (hidden)\",\n\t\thidden \u003d true\n\t)\n\tdefault byte[] currentColors()\n\t{\n\t\treturn SerializationUtils.serialize(new HashMap\u003cInteger, Integer\u003e());\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"currentColors\",\n\t\tname \u003d \"Current colors\",\n\t\tdescription \u003d \"The player\u0027s color ids set by the plugin (hidden)\",\n\t\thidden \u003d true\n\t)\n\tvoid setCurrentColors(byte[] colorMapBytes);\n\n\t@ConfigItem(\n\t\tkeyName \u003d KEY_REAL_KITS,\n\t\tname \u003d \"Real kit ids\",\n\t\tdescription \u003d \"Known kit ids of the current player (hidden, per-profile)\",\n\t\thidden \u003d true\n\t)\n\tdefault byte[] realKitIds()\n\t{\n\t\treturn SerializationUtils.serialize(new HashMap\u003cKitType, Integer\u003e());\n\t}\n\n\t// endregion\n\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\FashionscapeConfig.java"},{"fileName":"FashionscapePlugin.java","content":"package eq.uirs.fashionscape;\n\nimport com.google.inject.Provides;\nimport eq.uirs.fashionscape.core.Exporter;\nimport eq.uirs.fashionscape.core.FashionManager;\nimport eq.uirs.fashionscape.data.anim.ItemInteractions;\nimport eq.uirs.fashionscape.panel.FashionscapePanel;\nimport java.awt.image.BufferedImage;\nimport java.util.HashSet;\nimport java.util.Set;\nimport java.util.regex.Pattern;\nimport javax.inject.Inject;\nimport javax.inject.Provider;\nimport lombok.Value;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.api.MenuAction;\nimport net.runelite.api.Player;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.ItemContainerChanged;\nimport net.runelite.api.events.MenuOptionClicked;\nimport net.runelite.api.events.PlayerChanged;\nimport net.runelite.api.gameval.InventoryID;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.game.ItemStats;\nimport net.runelite.client.menus.MenuManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.util.ImageUtil;\n\n@PluginDescriptor(\n\tname \u003d \"Fashionscape\",\n\tdescription \u003d \"Previews combinations of equipment by changing the player\u0027s local appearance\"\n)\n@Slf4j\npublic class FashionscapePlugin extends Plugin\n{\n\tprivate static final Pattern PAREN_REPLACE \u003d Pattern.compile(\"\\\\(.*\\\\)\");\n\n\tprivate static final String COPY_PLAYER \u003d \"Copy-outfit\";\n\tprivate static final Set\u003cInteger\u003e ITEM_ID_DUPES \u003d new HashSet\u003c\u003e();\n\n\t// combined set of all items to skip when searching (bad items, dupes, non-standard if applicable)\n\tpublic static Set\u003cInteger\u003e getItemIdsToExclude(FashionscapeConfig config)\n\t{\n\t\tSet\u003cInteger\u003e result \u003d ITEM_ID_DUPES;\n\t\tresult.addAll(ItemInteractions.BAD_ITEM_IDS);\n\t\tif (config.excludeNonStandardItems())\n\t\t{\n\t\t\tresult.addAll(ItemInteractions.NON_STANDARD_ITEMS);\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate static String stripName(String name)\n\t{\n\t\tString noParens \u003d PAREN_REPLACE.matcher(name).replaceAll(\"\");\n\t\treturn noParens.replaceAll(\"[^A-Za-z]+\", \"\");\n\t}\n\n\t@Value\n\tprivate static class ItemDupeData\n\t{\n\t\tint modelId;\n\t\tshort[] colorsToReplace;\n\t\tshort[] texturesToReplace;\n\t\tString strippedName;\n\t}\n\n\t@Inject\n\tprivate ClientToolbar clientToolbar;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate ItemManager itemManager;\n\n\t@Inject\n\tprivate FashionManager fashionManager;\n\n\t@Inject\n\tprivate Exporter exporter;\n\n\t@Inject\n\tprivate FashionscapeConfig config;\n\n\t@Inject\n\tprivate Provider\u003cMenuManager\u003e menuManager;\n\n\tprivate FashionscapePanel panel;\n\tprivate NavigationButton navButton;\n\n\t@Provides\n\tFashionscapeConfig getConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(FashionscapeConfig.class);\n\t}\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\tfinal BufferedImage icon \u003d ImageUtil.loadImageResource(getClass(), \"panelicon.png\");\n\t\tpanel \u003d injector.getInstance(FashionscapePanel.class);\n\t\tnavButton \u003d NavigationButton.builder()\n\t\t\t.tooltip(\"Fashionscape\")\n\t\t\t.icon(icon)\n\t\t\t.panel(panel)\n\t\t\t.priority(8)\n\t\t\t.build();\n\t\tclientToolbar.addNavigation(navButton);\n\t\trefreshMenuEntries();\n\t\tclientThread.invokeLater(() -\u003e {\n\t\t\tpopulateDupes();\n\t\t\tfashionManager.startUp();\n\t\t});\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\tmenuManager.get().removePlayerMenuItem(COPY_PLAYER);\n\t\tclientThread.invokeLater(() -\u003e fashionManager.shutDown());\n\t\tclientToolbar.removeNavigation(navButton);\n\t\tITEM_ID_DUPES.clear();\n\t}\n\n\t@Subscribe\n\tpublic void onPlayerChanged(PlayerChanged event)\n\t{\n\t\tPlayer player \u003d event.getPlayer();\n\t\tif (player !\u003d null \u0026\u0026 player \u003d\u003d client.getLocalPlayer())\n\t\t{\n\t\t\tfashionManager.onPlayerChanged();\n\t\t\tif (panel !\u003d null)\n\t\t\t{\n\t\t\t\tpanel.onPlayerChanged(player);\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onItemContainerChanged(ItemContainerChanged event)\n\t{\n\t\tif (event.getContainerId() \u003d\u003d InventoryID.WORN)\n\t\t{\n\t\t\tfashionManager.onEquipmentChanged();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif (event.getGroup().equals(FashionscapeConfig.GROUP))\n\t\t{\n\t\t\tif (event.getKey().equals(FashionscapeConfig.KEY_EXCLUDE_NON_STANDARD) ||\n\t\t\t\tevent.getKey().equals(FashionscapeConfig.KEY_EXCLUDE_MEMBERS))\n\t\t\t{\n\t\t\t\t// reload displayed results\n\t\t\t\tclientThread.invokeLater(() -\u003e {\n\t\t\t\t\tpopulateDupes();\n\t\t\t\t\tpanel.reloadResults();\n\t\t\t\t\tpanel.refreshKitsPanel();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (event.getKey().equals(FashionscapeConfig.KEY_IMPORT_MENU_ENTRY))\n\t\t\t{\n\t\t\t\trefreshMenuEntries();\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged event)\n\t{\n\t\tif (event.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tpopulateDupes();\n\t\t\tfashionManager.onEquipmentChanged();\n\t\t}\n\t\telse if (event.getGameState() \u003d\u003d GameState.LOGIN_SCREEN)\n\t\t{\n\t\t\tfashionManager.setGender(null);\n\t\t}\n\t\tif (panel !\u003d null)\n\t\t{\n\t\t\tpanel.onGameStateChanged(event);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOptionClicked(MenuOptionClicked event)\n\t{\n\t\tif (event.getMenuAction() \u003d\u003d MenuAction.RUNELITE_PLAYER \u0026\u0026 event.getMenuOption().equals(COPY_PLAYER))\n\t\t{\n\t\t\tPlayer p \u003d client.getTopLevelWorldView().players().byIndex(event.getId());\n\t\t\tif (p \u003d\u003d null)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\texporter.importPlayer(p.getPlayerComposition());\n\t\t\tpanel.reloadResults();\n\t\t}\n\t}\n\n\tprivate void populateDupes()\n\t{\n\t\tITEM_ID_DUPES.clear();\n\t\tSet\u003cInteger\u003e ids \u003d new HashSet\u003c\u003e();\n\t\tSet\u003cItemDupeData\u003e itemUniques \u003d new HashSet\u003c\u003e();\n\t\tSet\u003cInteger\u003e skips \u003d FashionscapePlugin.getItemIdsToExclude(config);\n\t\tfor (int i \u003d 0; i \u003c client.getItemCount(); i++)\n\t\t{\n\t\t\tint canonical \u003d itemManager.canonicalize(i);\n\t\t\tif (skips.contains(canonical))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tItemComposition itemComposition \u003d itemManager.getItemComposition(canonical);\n\t\t\tString itemName \u003d itemComposition.getMembersName().toLowerCase();\n\t\t\tboolean badItemName \u003d ItemInteractions.BAD_ITEM_NAMES.contains(itemName);\n\t\t\tboolean membersObject \u003d config.excludeMembersItems() \u0026\u0026 itemComposition.isMembers();\n\t\t\tif (badItemName || membersObject)\n\t\t\t{\n\t\t\t\tITEM_ID_DUPES.add(canonical);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tItemStats itemStats \u003d itemManager.getItemStats(canonical);\n\t\t\tif (!ids.contains(itemComposition.getId()) \u0026\u0026 itemStats !\u003d null \u0026\u0026 itemStats.isEquipable())\n\t\t\t{\n\t\t\t\tItemDupeData itemDupeData \u003d new ItemDupeData(\n\t\t\t\t\titemComposition.getInventoryModel(),\n\t\t\t\t\titemComposition.getColorToReplaceWith(),\n\t\t\t\t\titemComposition.getTextureToReplaceWith(),\n\t\t\t\t\tstripName(itemName)\n\t\t\t\t);\n\t\t\t\tif (itemUniques.contains(itemDupeData))\n\t\t\t\t{\n\t\t\t\t\tITEM_ID_DUPES.add(canonical);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\titemUniques.add(itemDupeData);\n\t\t\t\tids.add(itemComposition.getId());\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void refreshMenuEntries()\n\t{\n\t\tif (config.copyMenuEntry())\n\t\t{\n\t\t\tmenuManager.get().addPlayerMenuItem(COPY_PLAYER);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmenuManager.get().removePlayerMenuItem(COPY_PLAYER);\n\t\t}\n\t}\n\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\FashionscapePlugin.java"},{"fileName":"AbsIconLabelPanel.java","content":"package eq.uirs.fashionscape.panel;\n\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Component;\nimport java.awt.Dimension;\nimport java.awt.image.BufferedImage;\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.swing.ImageIcon;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.util.AsyncBufferedImage;\n\nabstract class AbsIconLabelPanel extends JPanel\n{\n\tstatic final Dimension ICON_SIZE \u003d new Dimension(32, 32);\n\n\tprotected final ClientThread clientThread;\n\tprotected final List\u003cJPanel\u003e highlightPanels;\n\tprotected final Color nonHighlightColor;\n\tprotected final JLabel label;\n\tprotected final JLabel icon;\n\n\tAbsIconLabelPanel(BufferedImage image, ClientThread clientThread)\n\t{\n\t\tthis.clientThread \u003d clientThread;\n\n\t\tBorderLayout layout \u003d new BorderLayout();\n\t\tsetLayout(layout);\n\t\tsetBorder(new EmptyBorder(0, 10, 0, 10));\n\t\tsetBackground(ColorScheme.DARKER_GRAY_COLOR);\n\n\t\thighlightPanels \u003d new ArrayList\u003c\u003e();\n\t\tnonHighlightColor \u003d getBackground();\n\t\thighlightPanels.add(this);\n\n\t\tsetBorder(new EmptyBorder(5, 5, 5, 5));\n\n\t\ticon \u003d new JLabel();\n\t\ticon.setPreferredSize(ICON_SIZE);\n\t\ticon.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tsetIcon(icon, image);\n\t\tadd(icon, BorderLayout.LINE_START);\n\n\t\tlabel \u003d new JLabel();\n\t\tlabel.setForeground(Color.WHITE);\n\t\tlabel.setMaximumSize(new Dimension(0, 0));\n\t\tlabel.setPreferredSize(new Dimension(0, 0));\n\t\t// subclasses will add the item label as needed\n\t}\n\n\tprotected void setIcon(JLabel icon, BufferedImage image)\n\t{\n\t\tif (image !\u003d null)\n\t\t{\n\t\t\tif (image instanceof AsyncBufferedImage)\n\t\t\t{\n\t\t\t\t((AsyncBufferedImage) image).addTo(icon);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ticon.setIcon(new ImageIcon(image));\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected void matchComponentBackground(JPanel panel, Color color)\n\t{\n\t\tpanel.setBackground(color);\n\t\tfor (Component c : panel.getComponents())\n\t\t{\n\t\t\tc.setBackground(color);\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\panel\\AbsIconLabelPanel.java"},{"fileName":"AbsItemPanel.java","content":"package eq.uirs.fashionscape.panel;\n\nimport java.awt.image.BufferedImage;\nimport javax.annotation.Nullable;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.game.ItemManager;\n\nabstract class AbsItemPanel extends AbsIconLabelPanel\n{\n\tpublic final Integer itemId;\n\n\tprotected final ItemManager itemManager;\n\n\tAbsItemPanel(@Nullable Integer itemId, BufferedImage icon, ItemManager itemManager,\n\t\t\t\t ClientThread clientThread)\n\t{\n\t\tsuper(icon, clientThread);\n\t\tthis.itemId \u003d itemId;\n\t\tthis.itemManager \u003d itemManager;\n\t\tsetItemName(itemId);\n\t}\n\n\tprotected void setItemName(Integer itemId)\n\t{\n\t\tclientThread.invokeLater(() -\u003e {\n\t\t\tString itemName \u003d \"Not set\";\n\t\t\tif (itemId !\u003d null)\n\t\t\t{\n\t\t\t\tif (itemId \u003e\u003d 0)\n\t\t\t\t{\n\t\t\t\t\tItemComposition itemComposition \u003d itemManager.getItemComposition(itemId);\n\t\t\t\t\titemName \u003d itemComposition.getMembersName();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\titemName \u003d NothingItemComposition.NAME;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlabel.setText(itemName);\n\t\t});\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\panel\\AbsItemPanel.java"},{"fileName":"DropdownIconPanel.java","content":"package eq.uirs.fashionscape.panel;\n\nimport java.awt.Cursor;\nimport java.awt.Dimension;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.awt.image.BufferedImage;\nimport javax.swing.JButton;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.ui.ColorScheme;\n\n/**\n * Panel that opens a dropdown menu of options to select\n */\n@Slf4j\nabstract class DropdownIconPanel extends AbsIconLabelPanel\n{\n\tstatic final Dimension BUTTON_SIZE \u003d new Dimension(16, 16);\n\tstatic final int ICON_CORNER_RADIUS \u003d 15;\n\n\tprotected final JButton lockButton \u003d new JButton();\n\tprotected final JButton xButton \u003d new JButton();\n\t// constrain items in the list of dropdown results\n\tprotected final JPanel optionsContainer \u003d new JPanel();\n\n\tDropdownIconPanel(BufferedImage image, ClientThread clientThread)\n\t{\n\t\tsuper(image, clientThread);\n\n\t\ticon.addMouseListener(new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mouseEntered(MouseEvent e)\n\t\t\t{\n\t\t\t\tsetCursor(new Cursor(Cursor.HAND_CURSOR));\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseExited(MouseEvent e)\n\t\t\t{\n\t\t\t\tsetCursor(new Cursor(Cursor.DEFAULT_CURSOR));\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseReleased(MouseEvent e)\n\t\t\t{\n\t\t\t\topenDropdown();\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected void configureButton(JButton button)\n\t{\n\t\tbutton.setBorder(new EmptyBorder(0, 2, 0, 2));\n\t\tbutton.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tbutton.setPreferredSize(BUTTON_SIZE);\n\t\tbutton.setFocusPainted(false);\n\t\tbutton.setBorderPainted(false);\n\t\tbutton.setContentAreaFilled(false);\n\t}\n\n\tabstract void openDropdown();\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\panel\\DropdownIconPanel.java"},{"fileName":"FashionscapePanel.java","content":"package eq.uirs.fashionscape.panel;\n\nimport eq.uirs.fashionscape.core.Exporter;\nimport eq.uirs.fashionscape.core.FashionManager;\nimport eq.uirs.fashionscape.core.event.ColorChangedListener;\nimport eq.uirs.fashionscape.core.event.ColorLockChangedListener;\nimport eq.uirs.fashionscape.core.event.IconChangedListener;\nimport eq.uirs.fashionscape.core.event.ItemChangedListener;\nimport eq.uirs.fashionscape.core.event.KitChangedListener;\nimport eq.uirs.fashionscape.core.event.LockChangedListener;\nimport eq.uirs.fashionscape.data.color.ColorType;\nimport java.awt.BorderLayout;\nimport java.awt.Cursor;\nimport java.awt.GridBagConstraints;\nimport java.awt.GridBagLayout;\nimport java.awt.Insets;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.io.BufferedReader;\nimport java.io.File;\nimport java.io.FileReader;\nimport java.io.IOException;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.stream.Collectors;\nimport javax.inject.Inject;\nimport javax.swing.ImageIcon;\nimport javax.swing.JButton;\nimport javax.swing.JFileChooser;\nimport javax.swing.JMenuItem;\nimport javax.swing.JOptionPane;\nimport javax.swing.JPanel;\nimport javax.swing.JPopupMenu;\nimport javax.swing.border.EmptyBorder;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.Player;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.kit.KitType;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.PluginPanel;\nimport net.runelite.client.ui.components.materialtabs.MaterialTab;\nimport net.runelite.client.ui.components.materialtabs.MaterialTabGroup;\nimport net.runelite.client.util.ImageUtil;\nimport net.runelite.client.util.LinkBrowser;\n\n@Slf4j\npublic class FashionscapePanel extends PluginPanel\n{\n\tprivate final Client client;\n\tprivate final ClientThread clientThread;\n\tprivate final FashionManager fashionManager;\n\tprivate final Exporter exporter;\n\n\tprivate JButton undo;\n\tprivate JButton redo;\n\tprivate JButton shuffle;\n\tprivate JButton save;\n\tprivate JButton load;\n\tprivate JButton clear;\n\n\tprivate final SearchClearingPanel tabDisplayPanel;\n\tprivate final MaterialTabGroup tabGroup;\n\tprivate final MaterialTab searchTab;\n\n\tprivate final SearchPanel searchPanel;\n\tprivate final KitsPanel kitsPanel;\n\n\t@RequiredArgsConstructor\n\tstatic class SearchClearingPanel extends JPanel\n\t{\n\t\tboolean shouldClearSearch \u003d true;\n\t\tprivate final SearchPanel searchPanel;\n\n\t\t@Override\n\t\tpublic void removeAll()\n\t\t{\n\t\t\tif (shouldClearSearch)\n\t\t\t{\n\t\t\t\tsearchPanel.clearResults();\n\t\t\t}\n\t\t\tsuper.removeAll();\n\t\t}\n\t}\n\n\t@Inject\n\tpublic FashionscapePanel(SearchPanel searchPanel, KitsPanel kitsPanel, FashionManager fashionManager,\n\t\t\t\t\t\t\t ItemManager itemManager, Client client, ClientThread clientThread, Exporter exporter)\n\t{\n\t\tsuper(false);\n\t\tthis.client \u003d client;\n\t\tthis.clientThread \u003d clientThread;\n\t\tthis.fashionManager \u003d fashionManager;\n\t\tthis.exporter \u003d exporter;\n\t\ttabDisplayPanel \u003d new SearchClearingPanel(searchPanel);\n\t\ttabGroup \u003d new MaterialTabGroup(tabDisplayPanel);\n\n\t\tsetLayout(new BorderLayout());\n\t\tsetBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel tabPanel \u003d new JPanel();\n\t\ttabPanel.setLayout(new BorderLayout());\n\t\ttabPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tSearchOpener searchOpener \u003d new SearchOpener()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void openSearchFor(KitType slot)\n\t\t\t{\n\t\t\t\ttabGroup.select(searchTab);\n\t\t\t\tsearchPanel.chooseSlot(slot);\n\t\t\t\tsearchPanel.clearSearch();\n\t\t\t}\n\t\t};\n\t\tSwapsPanel swapsPanel \u003d new SwapsPanel(fashionManager, itemManager, searchOpener, clientThread);\n\t\tthis.searchPanel \u003d searchPanel;\n\t\tthis.kitsPanel \u003d kitsPanel;\n\n\t\tMaterialTab swapsTab \u003d new MaterialTab(\"Items\", tabGroup, swapsPanel);\n\t\tMaterialTab kitsTab \u003d new MaterialTab(\"Base\", tabGroup, kitsPanel);\n\t\tsearchTab \u003d new MaterialTab(\"Search\", tabGroup, searchPanel);\n\n\t\t// need some hacky listeners set up to clear search results when changing tabs\n\t\tsearchTab.setOnSelectEvent(() -\u003e {\n\t\t\ttabDisplayPanel.shouldClearSearch \u003d false;\n\t\t\tsearchPanel.reloadResults();\n\t\t\tkitsPanel.collapseOptions();\n\t\t\treturn true;\n\t\t});\n\t\tkitsTab.setOnSelectEvent(() -\u003e {\n\t\t\ttabDisplayPanel.shouldClearSearch \u003d true;\n\t\t\treturn true;\n\t\t});\n\t\tswapsTab.setOnSelectEvent(() -\u003e {\n\t\t\ttabDisplayPanel.shouldClearSearch \u003d true;\n\t\t\tkitsPanel.collapseOptions();\n\t\t\treturn true;\n\t\t});\n\n\t\ttabGroup.setBorder(new EmptyBorder(5, 0, 0, 0));\n\t\ttabGroup.addTab(swapsTab);\n\t\ttabGroup.addTab(kitsTab);\n\t\ttabGroup.addTab(searchTab);\n\t\ttabGroup.select(swapsTab);\n\n\t\tJPanel buttonPanel \u003d setUpButtonPanel();\n\t\tadd(buttonPanel, BorderLayout.NORTH);\n\n\t\ttabPanel.add(tabGroup, BorderLayout.NORTH);\n\t\ttabPanel.add(tabDisplayPanel, BorderLayout.CENTER);\n\t\tadd(tabPanel, BorderLayout.CENTER);\n\n\t\t// additional listeners\n\t\tfinal Runnable lockListener \u003d () -\u003e {\n\t\t\tboolean loggedIn \u003d client.getGameState() \u003d\u003d GameState.LOGGED_IN;\n\t\t\tboolean unlocked \u003d hasUnlocked();\n\t\t\tboolean nonEmpty \u003d hasNonEmpty();\n\t\t\tcheckButtonEnabled(shuffle, loggedIn, unlocked, nonEmpty);\n\t\t\tcheckButtonEnabled(clear, loggedIn, unlocked, nonEmpty);\n\t\t};\n\t\tfashionManager.addEventListener(new LockChangedListener(e -\u003e lockListener.run()));\n\t\tfashionManager.addEventListener(new ColorLockChangedListener(e -\u003e lockListener.run()));\n\t\tfinal Runnable saveClearListener \u003d () -\u003e {\n\t\t\tboolean loggedIn \u003d client.getGameState() \u003d\u003d GameState.LOGGED_IN;\n\t\t\tboolean unlocked \u003d hasUnlocked();\n\t\t\tboolean nonEmpty \u003d hasNonEmpty();\n\t\t\tcheckButtonEnabled(save, loggedIn, unlocked, nonEmpty);\n\t\t\tcheckButtonEnabled(clear, loggedIn, unlocked, nonEmpty);\n\t\t};\n\t\tfashionManager.addEventListener(new ItemChangedListener(e -\u003e saveClearListener.run()));\n\t\tfashionManager.addEventListener(new KitChangedListener(e -\u003e saveClearListener.run()));\n\t\tfashionManager.addEventListener(new ColorChangedListener(e -\u003e saveClearListener.run()));\n\t\tfashionManager.addEventListener(new IconChangedListener(e -\u003e saveClearListener.run()));\n\t}\n\n\tpublic void onGameStateChanged(GameStateChanged event)\n\t{\n\t\tboolean loggedIn \u003d event.getGameState() \u003d\u003d GameState.LOGGED_IN;\n\t\tboolean hasNonEmpty \u003d hasNonEmpty();\n\t\tboolean hasUnlocked \u003d hasUnlocked();\n\t\tcheckButtonEnabled(undo, loggedIn, hasUnlocked, hasNonEmpty);\n\t\tcheckButtonEnabled(redo, loggedIn, hasUnlocked, hasNonEmpty);\n\t\tcheckButtonEnabled(shuffle, loggedIn, hasUnlocked, hasNonEmpty);\n\t\tcheckButtonEnabled(save, loggedIn, hasUnlocked, hasNonEmpty);\n\t\tcheckButtonEnabled(load, loggedIn, hasUnlocked, hasNonEmpty);\n\t\tcheckButtonEnabled(clear, loggedIn, hasUnlocked, hasNonEmpty);\n\t}\n\n\tpublic void onPlayerChanged(Player player)\n\t{\n\t\tif (kitsPanel !\u003d null)\n\t\t{\n\t\t\tkitsPanel.onPlayerChanged(player);\n\t\t}\n\t}\n\n\tpublic void reloadResults()\n\t{\n\t\tif (searchPanel !\u003d null)\n\t\t{\n\t\t\tsearchPanel.reloadResults();\n\t\t}\n\t}\n\n\tpublic void refreshKitsPanel()\n\t{\n\t\tif (kitsPanel !\u003d null)\n\t\t{\n\t\t\tkitsPanel.populateKitSlots();\n\t\t}\n\t}\n\n\tprivate JPanel setUpButtonPanel()\n\t{\n\t\tJPanel buttonContainer \u003d new JPanel();\n\t\tbuttonContainer.setBorder(new EmptyBorder(5, 10, 0, 10));\n\t\tbuttonContainer.setLayout(new GridBagLayout());\n\t\tbuttonContainer.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tGridBagConstraints c \u003d new GridBagConstraints();\n\t\tc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\tc.insets \u003d new Insets(0, 1, 0, 1);\n\t\tc.weightx \u003d 1;\n\t\tc.weighty \u003d 1;\n\t\tc.gridx \u003d 0;\n\t\tc.gridy \u003d 0;\n\n\t\tboolean isLoggedIn \u003d client.getGameState() \u003d\u003d GameState.LOGGED_IN;\n\t\tboolean hasUnlocked \u003d hasUnlocked();\n\t\tboolean hasNonEmpty \u003d hasNonEmpty();\n\n\t\tundo \u003d new JButton(new ImageIcon(ImageUtil.loadImageResource(getClass(), \"undo.png\")));\n\t\tundo.setToolTipText(\"Undo\");\n\t\tundo.addActionListener(e -\u003e clientThread.invokeLater(() -\u003e {\n\t\t\tfashionManager.undoLastSwap();\n\t\t\treloadResults();\n\t\t}));\n\t\tcheckButtonEnabled(undo, isLoggedIn, hasUnlocked, hasNonEmpty);\n\t\tundo.addMouseListener(createHoverListener(undo));\n\t\tfashionManager.addUndoQueueChangeListener(size -\u003e checkButtonEnabled(undo, null, null, null));\n\t\tundo.setFocusPainted(false);\n\t\tbuttonContainer.add(undo, c);\n\t\tc.gridx++;\n\n\t\tredo \u003d new JButton(new ImageIcon(ImageUtil.loadImageResource(getClass(), \"redo.png\")));\n\t\tredo.setToolTipText(\"Redo\");\n\t\tredo.addActionListener(e -\u003e clientThread.invokeLater(() -\u003e {\n\t\t\tfashionManager.redoLastSwap();\n\t\t\treloadResults();\n\t\t}));\n\t\tcheckButtonEnabled(redo, isLoggedIn, hasUnlocked, hasNonEmpty);\n\t\tredo.addMouseListener(createHoverListener(redo));\n\t\tfashionManager.addRedoQueueChangeListener(size -\u003e checkButtonEnabled(redo, null, null, null));\n\t\tredo.setFocusPainted(false);\n\t\tbuttonContainer.add(redo, c);\n\t\tc.gridx++;\n\n\t\tshuffle \u003d new JButton(new ImageIcon(ImageUtil.loadImageResource(getClass(), \"shuffle.png\")));\n\t\tshuffle.setSize(12, 12);\n\t\tshuffle.setToolTipText(\"Randomize\");\n\t\tshuffle.addActionListener(e -\u003e clientThread.invokeLater(() -\u003e {\n\t\t\tfashionManager.shuffle();\n\t\t\treloadResults();\n\t\t}));\n\t\tcheckButtonEnabled(shuffle, isLoggedIn, hasUnlocked, hasNonEmpty);\n\t\tshuffle.setFocusPainted(false);\n\t\tshuffle.addMouseListener(createHoverListener(shuffle));\n\t\tbuttonContainer.add(shuffle, c);\n\t\tc.gridx++;\n\n\t\tJPopupMenu openSavedFolderMenu \u003d new JPopupMenu();\n\t\tJMenuItem openAll \u003d new JMenuItem(\"Open outfits folder\");\n\t\topenAll.addActionListener(e -\u003e LinkBrowser.open(Exporter.OUTFITS_DIR.toString()));\n\t\topenSavedFolderMenu.add(openAll);\n\n\t\tsave \u003d new JButton(new ImageIcon(ImageUtil.loadImageResource(getClass(), \"save.png\")));\n\t\tsave.setToolTipText(\"Save\");\n\t\tsave.addActionListener(e -\u003e openSaveDialog());\n\t\tsave.setFocusPainted(false);\n\t\tsave.addMouseListener(createHoverListener(save));\n\t\tsave.setComponentPopupMenu(openSavedFolderMenu);\n\t\tcheckButtonEnabled(save, isLoggedIn, hasUnlocked, hasNonEmpty);\n\t\tbuttonContainer.add(save, c);\n\t\tc.gridx++;\n\n\t\tload \u003d new JButton(new ImageIcon(ImageUtil.loadImageResource(getClass(), \"load.png\")));\n\t\tload.setToolTipText(\"Load\");\n\t\tload.addActionListener(e -\u003e openLoadDialog());\n\t\tload.setFocusPainted(false);\n\t\tload.setComponentPopupMenu(openSavedFolderMenu);\n\t\tcheckButtonEnabled(load, isLoggedIn, hasUnlocked, hasNonEmpty);\n\t\tload.addMouseListener(createHoverListener(load));\n\t\tbuttonContainer.add(load, c);\n\t\tc.gridx++;\n\n\t\tJPopupMenu softClearMenu \u003d new JPopupMenu();\n\t\tJMenuItem softClear \u003d new JMenuItem(\"Soft clear\");\n\t\tsoftClear.addActionListener(e -\u003e clientThread.invokeLater(() -\u003e {\n\t\t\tfashionManager.revertSwaps(false, false);\n\t\t\treloadResults();\n\t\t}));\n\t\tsoftClearMenu.add(softClear);\n\n\t\tclear \u003d new JButton(new ImageIcon(ImageUtil.loadImageResource(getClass(), \"clear.png\")));\n\t\tclear.setToolTipText(\"Clear all\");\n\t\tclear.addActionListener(e -\u003e clientThread.invokeLater(() -\u003e {\n\t\t\tfashionManager.revertSwaps(true, false);\n\t\t\treloadResults();\n\t\t}));\n\t\tclear.setFocusPainted(false);\n\t\tclear.addMouseListener(createHoverListener(clear));\n\t\tclear.setComponentPopupMenu(softClearMenu);\n\t\tcheckButtonEnabled(clear, isLoggedIn, hasUnlocked, hasNonEmpty);\n\t\tbuttonContainer.add(clear, c);\n\n\t\treturn buttonContainer;\n\t}\n\n\t@SuppressWarnings(\"ResultOfMethodCallIgnored\")\n\tprivate void openSaveDialog()\n\t{\n\t\tFile outputDir \u003d Exporter.OUTFITS_DIR;\n\t\toutputDir.mkdirs();\n\n\t\tJFileChooser fileChooser \u003d new JFileChooser(outputDir)\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void approveSelection()\n\t\t\t{\n\t\t\t\tFile f \u003d getSelectedFile();\n\t\t\t\tif (!f.getName().endsWith(\".txt\"))\n\t\t\t\t{\n\t\t\t\t\tf \u003d new File(f.getPath() + \".txt\");\n\t\t\t\t}\n\t\t\t\tif (f.exists() \u0026\u0026 getDialogType() \u003d\u003d SAVE_DIALOG)\n\t\t\t\t{\n\t\t\t\t\tint result \u003d JOptionPane.showConfirmDialog(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\"File already exists, overwrite?\",\n\t\t\t\t\t\t\"Warning\",\n\t\t\t\t\t\tJOptionPane.YES_NO_CANCEL_OPTION\n\t\t\t\t\t);\n\t\t\t\t\tswitch (result)\n\t\t\t\t\t{\n\t\t\t\t\t\tcase JOptionPane.YES_OPTION:\n\t\t\t\t\t\t\tsuper.approveSelection();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\tcase JOptionPane.NO_OPTION:\n\t\t\t\t\t\tcase JOptionPane.CLOSED_OPTION:\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\tcase JOptionPane.CANCEL_OPTION:\n\t\t\t\t\t\t\tcancelSelection();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tsuper.approveSelection();\n\t\t\t}\n\t\t};\n\t\tfileChooser.setSelectedFile(new File(\"outfit.txt\"));\n\t\tfileChooser.setDialogTitle(\"Save current outfit\");\n\n\t\tint option \u003d fileChooser.showSaveDialog(this);\n\t\tif (option \u003d\u003d JFileChooser.APPROVE_OPTION)\n\t\t{\n\t\t\tFile selectedFile \u003d fileChooser.getSelectedFile();\n\t\t\tif (!selectedFile.getName().endsWith(\".txt\"))\n\t\t\t{\n\t\t\t\tselectedFile \u003d new File(selectedFile.getPath() + \".txt\");\n\t\t\t}\n\t\t\texporter.export(selectedFile);\n\t\t}\n\t}\n\n\t@SuppressWarnings(\"ResultOfMethodCallIgnored\")\n\tprivate void openLoadDialog()\n\t{\n\t\tFile outputDir \u003d Exporter.OUTFITS_DIR;\n\t\toutputDir.mkdirs();\n\n\t\tJFileChooser fileChooser \u003d new JFileChooser(outputDir);\n\t\tfileChooser.setDialogTitle(\"Select an outfit to load\");\n\n\t\tint option \u003d fileChooser.showOpenDialog(this);\n\t\tif (option \u003d\u003d JFileChooser.APPROVE_OPTION)\n\t\t{\n\t\t\tFile selectedFile \u003d fileChooser.getSelectedFile();\n\t\t\ttry (BufferedReader reader \u003d new BufferedReader(new FileReader(selectedFile)))\n\t\t\t{\n\t\t\t\tList\u003cString\u003e lines \u003d reader.lines().collect(Collectors.toList());\n\t\t\t\texporter.parseImports(lines);\n\t\t\t}\n\t\t\tcatch (IOException e)\n\t\t\t{\n\t\t\t\tlog.warn(\"Failed to import swaps from file\", e);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate MouseAdapter createHoverListener(JButton jButton)\n\t{\n\t\treturn new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mouseEntered(MouseEvent e)\n\t\t\t{\n\t\t\t\tif (jButton.isEnabled())\n\t\t\t\t{\n\t\t\t\t\tsetCursor(new Cursor(Cursor.HAND_CURSOR));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseExited(MouseEvent e)\n\t\t\t{\n\t\t\t\tsetCursor(new Cursor(Cursor.DEFAULT_CURSOR));\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate boolean hasNonEmpty()\n\t{\n\t\tlong numSlotSwaps \u003d Arrays.stream(KitType.values())\n\t\t\t.filter(slot -\u003e {\n\t\t\t\tInteger item \u003d fashionManager.swappedItemIdIn(slot);\n\t\t\t\tInteger kit \u003d fashionManager.swappedKitIdIn(slot);\n\t\t\t\tboolean containsNothing \u003d fashionManager.isHidden(slot);\n\t\t\t\treturn item !\u003d null || kit !\u003d null || containsNothing;\n\t\t\t})\n\t\t\t.count();\n\t\tlong numColorSwaps \u003d Arrays.stream(ColorType.values())\n\t\t\t.map(fashionManager::swappedColorIdIn)\n\t\t\t.filter(Objects::nonNull)\n\t\t\t.count();\n\t\tboolean hasIcon \u003d fashionManager.swappedIcon() !\u003d null;\n\t\treturn numSlotSwaps + numColorSwaps \u003e 0 || hasIcon;\n\t}\n\n\tprivate boolean hasUnlocked()\n\t{\n\t\tlong numUnlockedSlots \u003d Arrays.stream(KitType.values())\n\t\t\t.filter(Objects::nonNull)\n\t\t\t.map(fashionManager::isSlotLocked)\n\t\t\t.filter(b -\u003e !b)\n\t\t\t.count();\n\t\tlong numUnlockedColors \u003d Arrays.stream(ColorType.values())\n\t\t\t.filter(Objects::nonNull)\n\t\t\t.map(fashionManager::isColorLocked)\n\t\t\t.filter(b -\u003e !b)\n\t\t\t.count();\n\t\tlong unlockedIcon \u003d fashionManager.isIconLocked() ? 0 : 1;\n\t\treturn numUnlockedSlots + numUnlockedColors + unlockedIcon \u003e 0;\n\t}\n\n\tprivate void checkButtonEnabled(JButton button, Boolean isLoggedIn, Boolean hasUnlocked, Boolean hasNonEmpty)\n\t{\n\t\tif (button \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tboolean loggedIn \u003d isLoggedIn !\u003d null ? isLoggedIn : client.getGameState() \u003d\u003d GameState.LOGGED_IN;\n\t\tboolean unlocked \u003d hasUnlocked !\u003d null ? hasUnlocked : hasUnlocked();\n\t\tboolean nonEmpty \u003d hasNonEmpty !\u003d null ? hasNonEmpty : hasNonEmpty();\n\t\tboolean enabled \u003d loggedIn;\n\t\tif (button \u003d\u003d undo)\n\t\t{\n\t\t\tenabled \u0026\u003d fashionManager.canUndo();\n\t\t}\n\t\telse if (button \u003d\u003d redo)\n\t\t{\n\t\t\tenabled \u0026\u003d fashionManager.canRedo();\n\t\t}\n\t\telse if (button \u003d\u003d shuffle)\n\t\t{\n\t\t\tenabled \u0026\u003d unlocked;\n\t\t}\n\t\telse if (button \u003d\u003d save)\n\t\t{\n\t\t\tenabled \u0026\u003d nonEmpty;\n\t\t}\n\t\telse if (button \u003d\u003d clear)\n\t\t{\n\t\t\t// can clear regardless of login state\n\t\t\tenabled \u003d nonEmpty;\n\t\t}\n\t\t// note: load just requires login\n\t\tbutton.setEnabled(enabled);\n\t}\n}\n\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\panel\\FashionscapePanel.java"},{"fileName":"JawIconPanel.java","content":"package eq.uirs.fashionscape.panel;\n\nimport com.google.common.base.Objects;\nimport eq.uirs.fashionscape.core.FashionManager;\nimport eq.uirs.fashionscape.core.event.IconChangedListener;\nimport eq.uirs.fashionscape.core.event.IconLockChangedListener;\nimport eq.uirs.fashionscape.data.kit.JawIcon;\nimport java.awt.BorderLayout;\nimport java.awt.Cursor;\nimport java.awt.GridBagConstraints;\nimport java.awt.GridBagLayout;\nimport java.awt.GridLayout;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.awt.image.BufferedImage;\nimport java.util.Arrays;\nimport javax.annotation.Nullable;\nimport javax.swing.ImageIcon;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.SwingUtilities;\nimport javax.swing.border.EmptyBorder;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.util.AsyncBufferedImage;\nimport net.runelite.client.util.ImageUtil;\n\n/**\n * Special base panel handling BA/SW icons since they\u0027re tied to jaw kits\n */\n@Slf4j\npublic class JawIconPanel extends DropdownIconPanel\n{\n\tprivate final FashionManager fashionManager;\n\tprivate final ItemManager itemManager;\n\tprivate final KitColorOpener kitColorOpener;\n\tprivate JawIcon jawIcon \u003d null;\n\n\tJawIconPanel(BufferedImage image, ClientThread clientThread, FashionManager fashionManager, ItemManager itemManager,\n\t\t\t\t KitColorOpener kitColorOpener, @Nullable Integer iconId)\n\t{\n\t\tsuper(image, clientThread);\n\t\tthis.fashionManager \u003d fashionManager;\n\t\tthis.itemManager \u003d itemManager;\n\t\tthis.kitColorOpener \u003d kitColorOpener;\n\t\tArrays.stream(JawIcon.values())\n\t\t\t.filter(i -\u003e Objects.equal(i.getId(), iconId))\n\t\t\t.findFirst()\n\t\t\t.ifPresent(i -\u003e this.jawIcon \u003d i);\n\n\t\tJPanel rightPanel \u003d new JPanel(new BorderLayout());\n\t\trightPanel.setBackground(nonHighlightColor);\n\t\trightPanel.setBorder(new EmptyBorder(0, 5, 0, 0));\n\t\thighlightPanels.add(rightPanel);\n\t\trightPanel.add(label, BorderLayout.CENTER);\n\n\t\tsetIconTooltip();\n\n\t\tJPanel buttons \u003d new JPanel(new GridLayout(1, 2, 2, 0));\n\t\tbuttons.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\n\t\tsetIcon(icon, image);\n\t\ticon.setBorder(new RoundedBorder(ColorScheme.LIGHT_GRAY_COLOR, ICON_CORNER_RADIUS));\n\n\t\tfashionManager.addEventListener(new IconChangedListener(e -\u003e {\n\t\t\tif (jawIcon !\u003d e.getIcon())\n\t\t\t{\n\t\t\t\tthis.jawIcon \u003d e.getIcon();\n\t\t\t\tsetIconName();\n\t\t\t\tupdateIconImage();\n\t\t\t\tupdateXButton();\n\t\t\t}\n\t\t}));\n\t\tfashionManager.addEventListener(new IconLockChangedListener(e -\u003e updateLockButton()));\n\t\tconfigureButton(lockButton);\n\t\tlockButton.addActionListener(e -\u003e {\n\t\t\tfashionManager.toggleIconLocked();\n\t\t\tupdateLockButton();\n\t\t\tupdateXButton();\n\t\t});\n\t\tbuttons.add(lockButton);\n\n\t\tconfigureButton(xButton);\n\t\txButton.setIcon(new ImageIcon(ImageUtil.loadImageResource(this.getClass(), \"x.png\")));\n\t\txButton.addActionListener(e -\u003e clientThread.invokeLater(() -\u003e {\n\t\t\tfashionManager.revertIcon();\n\t\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\t\tupdateLockButton();\n\t\t\t\tupdateXButton();\n\t\t\t});\n\t\t}));\n\t\tbuttons.add(xButton);\n\n\t\tupdateLockButton();\n\t\tupdateXButton();\n\n\t\toptionsContainer.setLayout(new BorderLayout());\n\t\toptionsContainer.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\toptionsContainer.setVisible(false);\n\t\tadd(optionsContainer, BorderLayout.SOUTH);\n\t\trightPanel.add(buttons, BorderLayout.EAST);\n\t\tadd(rightPanel, BorderLayout.CENTER);\n\n\t\tsetIconName();\n\t\tupdateIconImage();\n\t}\n\n\t@Override\n\tvoid openDropdown()\n\t{\n\t\tkitColorOpener.openOptions(null, null);\n\t}\n\n\tpublic void openOptions()\n\t{\n\t\toptionsContainer.removeAll();\n\t\tif (optionsContainer.isVisible())\n\t\t{\n\t\t\toptionsContainer.setVisible(false);\n\t\t\treturn;\n\t\t}\n\t\telse\n\t\t{\n\t\t\toptionsContainer.setVisible(true);\n\t\t}\n\n\t\tJPanel iconsList \u003d new JPanel();\n\t\ticonsList.setLayout(new GridBagLayout());\n\t\ticonsList.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\n\t\ticonsList.setBorder(new EmptyBorder(10, 0, 0, 0));\n\t\tGridBagConstraints c \u003d new GridBagConstraints();\n\t\tc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\tc.anchor \u003d GridBagConstraints.LINE_START;\n\t\tc.weightx \u003d 1;\n\t\tc.weighty \u003d 1;\n\t\tc.gridx \u003d 0;\n\t\tc.gridy \u003d 0;\n\n\t\tfor (JawIcon jawIcon : JawIcon.values())\n\t\t{\n\t\t\tif (jawIcon \u003d\u003d JawIcon.NOTHING)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tJLabel iconLabel \u003d createIconLabel(jawIcon);\n\t\t\ticonsList.add(iconLabel, c);\n\t\t\tc.gridy++;\n\t\t}\n\t\toptionsContainer.add(iconsList, BorderLayout.CENTER);\n\t\toptionsContainer.updateUI();\n\t}\n\n\tprivate JLabel createIconLabel(JawIcon jawIcon)\n\t{\n\t\tJLabel iconLabel \u003d new JLabel();\n\t\ticonLabel.setBorder(new EmptyBorder(5, 5, 0, 5));\n\t\ticonLabel.setText(jawIcon.getDisplayName());\n\t\ticonLabel.addMouseListener(new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mouseEntered(MouseEvent e)\n\t\t\t{\n\t\t\t\tif (!fashionManager.isIconLocked())\n\t\t\t\t{\n\t\t\t\t\tsetCursor(new Cursor(Cursor.HAND_CURSOR));\n\t\t\t\t}\n\t\t\t\tfashionManager.hoverOverIcon(jawIcon);\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseExited(MouseEvent e)\n\t\t\t{\n\t\t\t\tsetCursor(new Cursor(Cursor.DEFAULT_CURSOR));\n\t\t\t\tfashionManager.hoverAway();\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseReleased(MouseEvent e)\n\t\t\t{\n\t\t\t\tfashionManager.hoverSelectIcon(jawIcon);\n\t\t\t}\n\t\t});\n\t\treturn iconLabel;\n\t}\n\n\tpublic void closeOptions()\n\t{\n\t\toptionsContainer.removeAll();\n\t\toptionsContainer.setVisible(false);\n\t}\n\n\tprivate void setIconName()\n\t{\n\t\tString iconName \u003d \"Not set\";\n\t\tif (jawIcon !\u003d null)\n\t\t{\n\t\t\ticonName \u003d jawIcon.getDisplayName();\n\t\t}\n\t\tlabel.setText(iconName);\n\t}\n\n\tprivate void updateIconImage()\n\t{\n\t\tif (jawIcon !\u003d null \u0026\u0026 jawIcon !\u003d JawIcon.NOTHING)\n\t\t{\n\t\t\tclientThread.invokeLater(() -\u003e {\n\t\t\t\tItemComposition itemComposition \u003d itemManager.getItemComposition(jawIcon.getId());\n\t\t\t\tAsyncBufferedImage image \u003d itemManager.getImage(itemComposition.getId());\n\t\t\t\timage.addTo(icon);\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBufferedImage image \u003d ImageUtil.loadImageResource(getClass(), \"icon.png\");\n\t\t\tsetIcon(icon, image);\n\t\t}\n\t}\n\n\tprivate void updateXButton()\n\t{\n\t\txButton.setEnabled(jawIcon !\u003d null);\n\t\txButton.setToolTipText(\"Clear icon\");\n\t}\n\n\tprivate void updateLockButton()\n\t{\n\t\tboolean locked \u003d fashionManager.isIconLocked();\n\t\tString lockIcon \u003d locked ? \"lock\" : \"unlock\";\n\t\tlockButton.setIcon(\n\t\t\tnew ImageIcon(ImageUtil.loadImageResource(this.getClass(), lockIcon + \".png\")));\n\t\tString action \u003d locked ? \"Unlock\" : \"Lock\";\n\t\tlockButton.setToolTipText(action + \" icon\");\n\t}\n\n\tprivate void setIconTooltip()\n\t{\n\t\tStringBuilder sb \u003d new StringBuilder();\n\t\tsb.append(\"Icon\");\n\t\tif (jawIcon !\u003d null)\n\t\t{\n\t\t\tif (sb.length() \u003e 0)\n\t\t\t{\n\t\t\t\tsb.append(\": \");\n\t\t\t}\n\t\t\tsb.append(jawIcon.getDisplayName().toLowerCase());\n\t\t}\n\t\ticon.setToolTipText(sb.toString());\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\panel\\JawIconPanel.java"},{"fileName":"KitColorOpener.java","content":"package eq.uirs.fashionscape.panel;\n\nimport eq.uirs.fashionscape.data.color.ColorType;\nimport net.runelite.api.kit.KitType;\n\ninterface KitColorOpener\n{\n\tvoid openOptions(KitType slot, ColorType type);\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\panel\\KitColorOpener.java"},{"fileName":"KitItemPanel.java","content":"package eq.uirs.fashionscape.panel;\n\nimport eq.uirs.fashionscape.core.FashionManager;\nimport eq.uirs.fashionscape.core.event.ColorChangedListener;\nimport eq.uirs.fashionscape.core.event.ColorLockChangedListener;\nimport eq.uirs.fashionscape.core.event.KitChangedListener;\nimport eq.uirs.fashionscape.core.event.LockChanged;\nimport eq.uirs.fashionscape.core.event.LockChangedListener;\nimport eq.uirs.fashionscape.data.color.ColorType;\nimport eq.uirs.fashionscape.data.color.Colorable;\nimport eq.uirs.fashionscape.data.kit.Kit;\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Cursor;\nimport java.awt.Dimension;\nimport java.awt.GridBagConstraints;\nimport java.awt.GridBagLayout;\nimport java.awt.GridLayout;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.awt.image.BufferedImage;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport javax.swing.BorderFactory;\nimport javax.swing.ImageIcon;\nimport javax.swing.JButton;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.SwingUtilities;\nimport javax.swing.border.Border;\nimport javax.swing.border.EmptyBorder;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.kit.KitType;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.util.ImageUtil;\nimport net.runelite.client.util.Text;\n\n/**\n * Could represent either a player\u0027s kit, a color, or both for a given slot.\n */\n@Slf4j\npublic class KitItemPanel extends DropdownIconPanel\n{\n\tprivate static final Dimension COLOR_CHOOSER_SIZE \u003d new Dimension(15, 15);\n\n\t@Getter\n\tprivate final ColorType type;\n\t@Getter\n\tprivate final KitType slot;\n\n\tprivate final FashionManager fashionManager;\n\tprivate final KitColorOpener kitColorOpener;\n\n\tprivate final Map\u003cInteger, Colorable\u003e colorMap \u003d new HashMap\u003c\u003e();\n\n\tprivate final JButton lockColorButton \u003d new JButton();\n\tprivate final List\u003cKit\u003e allKits \u003d new ArrayList\u003c\u003e();\n\n\tprivate Integer colorId;\n\tprivate Color color;\n\tprivate Integer kitId;\n\n\tpublic KitItemPanel(FashionManager fashionManager, ColorType type, Integer colorId, KitType slot, Integer kitId,\n\t\t\t\t\t\tKitColorOpener kitColorOpener, BufferedImage image, ClientThread clientThread)\n\t{\n\t\tsuper(image, clientThread);\n\t\tthis.fashionManager \u003d fashionManager;\n\t\tthis.kitColorOpener \u003d kitColorOpener;\n\t\tthis.slot \u003d slot;\n\t\tthis.type \u003d type;\n\t\tthis.colorId \u003d colorId;\n\t\tthis.kitId \u003d kitId;\n\t\tif (type !\u003d null)\n\t\t{\n\t\t\tfor (Colorable colorable : type.getColorables())\n\t\t\t{\n\t\t\t\tcolorMap.put(colorable.getColorId(type), colorable);\n\t\t\t}\n\t\t}\n\n\t\tJPanel rightPanel \u003d new JPanel(new BorderLayout());\n\t\trightPanel.setBackground(nonHighlightColor);\n\t\trightPanel.setBorder(new EmptyBorder(0, 5, 0, 0));\n\t\thighlightPanels.add(rightPanel);\n\t\trightPanel.add(label, BorderLayout.CENTER);\n\n\t\tsetIconTooltip();\n\n\t\tint cols \u003d type !\u003d null \u0026\u0026 slot !\u003d null ? 3 : 2;\n\t\tJPanel buttons \u003d new JPanel(new GridLayout(1, cols, 2, 0));\n\t\tbuttons.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\n\t\tif (slot !\u003d null)\n\t\t{\n\t\t\tallKits.clear();\n\t\t\tallKits.addAll(Arrays.asList(Kit.allInSlot(slot, false)));\n\t\t\tsetKitName();\n\t\t\tsetIcon(icon, image);\n\t\t\tfashionManager.addEventListener(new KitChangedListener(e -\u003e {\n\t\t\t\tif (slot \u003d\u003d e.getSlot())\n\t\t\t\t{\n\t\t\t\t\tthis.kitId \u003d e.getKitId();\n\t\t\t\t\tsetKitName();\n\t\t\t\t\tupdateXButton();\n\t\t\t\t}\n\t\t\t}));\n\t\t\tconfigureButton(lockButton);\n\t\t\tlockButton.addActionListener(e -\u003e {\n\t\t\t\tfashionManager.toggleKitLocked(slot);\n\t\t\t\tupdateLockButton();\n\t\t\t\tupdateXButton();\n\t\t\t});\n\t\t\tbuttons.add(lockButton);\n\t\t}\n\t\telse if (type !\u003d null)\n\t\t{\n\t\t\tBufferedImage colorImage \u003d ImageUtil.loadImageResource(this.getClass(), \"color.png\");\n\t\t\tsetIcon(icon, colorImage);\n\t\t\tsetColorName();\n\t\t}\n\n\t\tif (type !\u003d null)\n\t\t{\n\t\t\tsetIconColor();\n\t\t\tfashionManager.addEventListener(new ColorChangedListener(e -\u003e {\n\t\t\t\tif (type \u003d\u003d e.getType())\n\t\t\t\t{\n\t\t\t\t\tthis.colorId \u003d e.getColorId();\n\t\t\t\t\tsetIconColor();\n\t\t\t\t\tif (slot \u003d\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tsetColorName();\n\t\t\t\t\t}\n\t\t\t\t\tsetIconTooltip();\n\t\t\t\t\tupdateXButton();\n\t\t\t\t}\n\t\t\t}));\n\t\t\tconfigureButton(lockColorButton);\n\t\t\tlockColorButton.addActionListener(e -\u003e {\n\t\t\t\tfashionManager.toggleColorLocked(type);\n\t\t\t\tupdateColorLockButton();\n\t\t\t\tupdateXButton();\n\t\t\t});\n\t\t\tbuttons.add(lockColorButton);\n\t\t}\n\t\telse\n\t\t{\n\t\t\ticon.setBorder(new RoundedBorder(ColorScheme.LIGHT_GRAY_COLOR, ICON_CORNER_RADIUS));\n\t\t}\n\n\t\tconfigureButton(xButton);\n\t\txButton.setIcon(new ImageIcon(ImageUtil.loadImageResource(this.getClass(), \"x.png\")));\n\t\txButton.addActionListener(e -\u003e clientThread.invokeLater(() -\u003e {\n\t\t\tfashionManager.revert(slot, type);\n\t\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\t\tupdateLockButton();\n\t\t\t\tupdateColorLockButton();\n\t\t\t\tupdateXButton();\n\t\t\t});\n\t\t}));\n\t\tbuttons.add(xButton);\n\n\t\tupdateLockButton();\n\t\tupdateColorLockButton();\n\t\tupdateXButton();\n\n\t\toptionsContainer.setLayout(new BorderLayout());\n\t\toptionsContainer.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\toptionsContainer.setVisible(false);\n\t\tadd(optionsContainer, BorderLayout.SOUTH);\n\t\trightPanel.add(buttons, BorderLayout.EAST);\n\t\tadd(rightPanel, BorderLayout.CENTER);\n\n\t\tfashionManager.addEventListener(new LockChangedListener(e -\u003e {\n\t\t\tif (e.getSlot() \u003d\u003d slot \u0026\u0026 e.getType() !\u003d LockChanged.Type.ITEM)\n\t\t\t{\n\t\t\t\tupdateLockButton();\n\t\t\t}\n\t\t}));\n\t\tfashionManager.addEventListener(new ColorLockChangedListener(e -\u003e {\n\t\t\tif (e.getType() \u003d\u003d type)\n\t\t\t{\n\t\t\t\tupdateColorLockButton();\n\t\t\t}\n\t\t}));\n\t}\n\n\t@Override\n\tvoid openDropdown()\n\t{\n\t\tkitColorOpener.openOptions(slot, type);\n\t}\n\n\tpublic void openOptions(Integer gender)\n\t{\n\t\toptionsContainer.removeAll();\n\t\tif (optionsContainer.isVisible())\n\t\t{\n\t\t\toptionsContainer.setVisible(false);\n\t\t\treturn;\n\t\t}\n\t\telse\n\t\t{\n\t\t\toptionsContainer.setVisible(true);\n\t\t}\n\n\t\tJPanel colorsBox \u003d new JPanel();\n\t\tcolorsBox.setLayout(new GridBagLayout());\n\t\tcolorsBox.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tif (type !\u003d null)\n\t\t{\n\t\t\tcolorsBox.setBorder(new EmptyBorder(10, 0, 0, 0));\n\t\t\tGridBagConstraints c \u003d new GridBagConstraints();\n\t\t\tc.fill \u003d GridBagConstraints.NONE;\n\t\t\tc.anchor \u003d GridBagConstraints.LINE_START;\n\t\t\tc.weightx \u003d 0;\n\t\t\tc.weighty \u003d 0;\n\t\t\tc.gridx \u003d 0;\n\t\t\tc.gridy \u003d 0;\n\n\t\t\tfor (Colorable colorable : type.getColorables())\n\t\t\t{\n\t\t\t\tJLabel colorLabel \u003d createColorLabel(colorable);\n\n\t\t\t\tJPanel colorWrapper \u003d new JPanel(new BorderLayout());\n\t\t\t\tcolorWrapper.setBorder(new EmptyBorder(1, 1, 1, 1));\n\t\t\t\tcolorWrapper.add(colorLabel, BorderLayout.CENTER);\n\n\t\t\t\tcolorsBox.add(colorWrapper, c);\n\t\t\t\tif (c.gridx \u003d\u003d 9)\n\t\t\t\t{\n\t\t\t\t\tc.gridx \u003d 0;\n\t\t\t\t\tc.gridy++;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tc.gridx++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\toptionsContainer.add(colorsBox, BorderLayout.NORTH);\n\n\t\tJPanel kitsList \u003d new JPanel();\n\t\tkitsList.setLayout(new GridBagLayout());\n\t\tkitsList.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tif (slot !\u003d null)\n\t\t{\n\t\t\tkitsList.setBorder(new EmptyBorder(10, 0, 0, 0));\n\t\t\tGridBagConstraints c \u003d new GridBagConstraints();\n\t\t\tc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\t\tc.anchor \u003d GridBagConstraints.LINE_START;\n\t\t\tc.weightx \u003d 1;\n\t\t\tc.weighty \u003d 1;\n\t\t\tc.gridx \u003d 0;\n\t\t\tc.gridy \u003d 0;\n\n\t\t\tfor (Kit kit : allKits)\n\t\t\t{\n\t\t\t\tfinal Integer kitId \u003d kit.getKitId(gender);\n\t\t\t\tif (kitId \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tJLabel kitLabel \u003d createKitLabel(kit, kitId);\n\t\t\t\tkitsList.add(kitLabel, c);\n\t\t\t\tc.gridy++;\n\t\t\t}\n\t\t}\n\t\toptionsContainer.add(kitsList, BorderLayout.CENTER);\n\n\t\toptionsContainer.updateUI();\n\t}\n\n\tprivate JLabel createColorLabel(Colorable colorable)\n\t{\n\t\tJLabel colorLabel \u003d new JLabel();\n\t\tcolorLabel.setOpaque(true);\n\t\tcolorLabel.setBackground(colorable.getColor());\n\t\tcolorLabel.setPreferredSize(COLOR_CHOOSER_SIZE);\n\t\tcolorLabel.setToolTipText(colorable.getDisplayName());\n\t\tcolorLabel.setBorder(BorderFactory.createLineBorder(ColorScheme.LIGHT_GRAY_COLOR));\n\t\tcolorLabel.addMouseListener(new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mouseEntered(MouseEvent e)\n\t\t\t{\n\t\t\t\tif (!fashionManager.isColorLocked(type))\n\t\t\t\t{\n\t\t\t\t\tsetCursor(new Cursor(Cursor.HAND_CURSOR));\n\t\t\t\t}\n\t\t\t\tfashionManager.hoverOverColor(type, colorable.getColorId(type));\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseExited(MouseEvent e)\n\t\t\t{\n\t\t\t\tsetCursor(new Cursor(Cursor.DEFAULT_CURSOR));\n\t\t\t\tfashionManager.hoverAway();\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseReleased(MouseEvent e)\n\t\t\t{\n\t\t\t\tfashionManager.hoverSelectColor(type, colorable.getColorId(type));\n\t\t\t}\n\t\t});\n\t\treturn colorLabel;\n\t}\n\n\tprivate JLabel createKitLabel(Kit kit, Integer kitId)\n\t{\n\t\tJLabel kitLabel \u003d new JLabel();\n\t\tkitLabel.setBorder(new EmptyBorder(5, 5, 0, 5));\n\t\tkitLabel.setText(kit.getDisplayName());\n\t\tkitLabel.addMouseListener(new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mouseEntered(MouseEvent e)\n\t\t\t{\n\t\t\t\tif (!fashionManager.isKitLocked(slot))\n\t\t\t\t{\n\t\t\t\t\tsetCursor(new Cursor(Cursor.HAND_CURSOR));\n\t\t\t\t}\n\t\t\t\tfashionManager.hoverOverKit(slot, kitId);\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseExited(MouseEvent e)\n\t\t\t{\n\t\t\t\tsetCursor(new Cursor(Cursor.DEFAULT_CURSOR));\n\t\t\t\tfashionManager.hoverAway();\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseReleased(MouseEvent e)\n\t\t\t{\n\t\t\t\tfashionManager.hoverSelectKit(slot, kitId);\n\t\t\t}\n\t\t});\n\t\treturn kitLabel;\n\t}\n\n\tpublic void closeOptions()\n\t{\n\t\toptionsContainer.removeAll();\n\t\toptionsContainer.setVisible(false);\n\t}\n\n\tprivate void setKitName()\n\t{\n\t\tString kitName \u003d \"Not set\";\n\t\tif (kitId !\u003d null)\n\t\t{\n\t\t\tKit kit \u003d FashionManager.KIT_ID_TO_KIT.get(kitId);\n\t\t\tif (kit !\u003d null)\n\t\t\t{\n\t\t\t\tkitName \u003d kit.getDisplayName();\n\t\t\t}\n\t\t}\n\t\tlabel.setText(kitName);\n\t}\n\n\tprivate void setColorName()\n\t{\n\t\tString colorName \u003d \"Not set\";\n\t\tif (colorId !\u003d null)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tcolorName \u003d colorMap.get(colorId).getDisplayName();\n\t\t\t}\n\t\t\tcatch (Exception ignored)\n\t\t\t{\n\t\t\t}\n\t\t}\n\t\tlabel.setText(colorName);\n\t}\n\n\tprivate void setIconColor()\n\t{\n\t\tcolor \u003d ColorScheme.LIGHT_GRAY_COLOR;\n\t\tif (colorId !\u003d null)\n\t\t{\n\t\t\tColorable colorable \u003d colorMap.get(colorId);\n\t\t\tif (colorable !\u003d null)\n\t\t\t{\n\t\t\t\tcolor \u003d colorable.getColor();\n\t\t\t}\n\t\t}\n\t\tBorder border \u003d new RoundedBorder(color, ICON_CORNER_RADIUS);\n\t\ticon.setBorder(border);\n\t\tupdateColorLockButton();\n\t}\n\n\tprivate void setIconTooltip()\n\t{\n\t\tStringBuilder sb \u003d new StringBuilder();\n\t\tif (slot !\u003d null)\n\t\t{\n\t\t\tsb.append(Text.titleCase(slot));\n\t\t}\n\t\telse if (type !\u003d null)\n\t\t{\n\t\t\tsb.append(Text.titleCase(type));\n\t\t}\n\n\t\tif (type !\u003d null)\n\t\t{\n\t\t\tColorable colorable \u003d colorMap.get(colorId);\n\t\t\tif (colorable !\u003d null)\n\t\t\t{\n\t\t\t\tif (sb.length() \u003e 0)\n\t\t\t\t{\n\t\t\t\t\tsb.append(\": \");\n\t\t\t\t}\n\t\t\t\tsb.append(colorable.getDisplayName().toLowerCase());\n\t\t\t}\n\t\t}\n\t\ticon.setToolTipText(sb.toString());\n\t}\n\n\tprivate void updateLockButton()\n\t{\n\t\tif (slot !\u003d null)\n\t\t{\n\t\t\tboolean locked \u003d fashionManager.isKitLocked(slot);\n\t\t\tString lockIcon \u003d locked ? \"lock\" : \"unlock\";\n\t\t\tlockButton.setIcon(\n\t\t\t\tnew ImageIcon(ImageUtil.loadImageResource(this.getClass(), lockIcon + \".png\")));\n\t\t\tString action \u003d locked ? \"Unlock\" : \"Lock\";\n\t\t\tlockButton.setToolTipText(action + \" \" + slot.name().toLowerCase() + \" slot\");\n\t\t}\n\t}\n\n\tprivate void updateColorLockButton()\n\t{\n\t\tif (type !\u003d null)\n\t\t{\n\t\t\tboolean locked \u003d fashionManager.isColorLocked(type);\n\t\t\tString lockStr \u003d locked ? \"lock\" : \"unlock\";\n\t\t\tBufferedImage lockIcon \u003d ImageUtil.loadImageResource(this.getClass(), lockStr + \".png\");\n\t\t\tlockIcon \u003d fillImage(lockIcon, color, 50);\n\t\t\tlockColorButton.setIcon(new ImageIcon(lockIcon));\n\t\t\tString action \u003d locked ? \"Unlock\" : \"Lock\";\n\t\t\tlockColorButton.setToolTipText(action + \" \" + type.name().toLowerCase() + \" colour\");\n\t\t}\n\t}\n\n\tprivate void updateXButton()\n\t{\n\t\txButton.setEnabled(colorId !\u003d null || kitId !\u003d null);\n\t\tString text \u003d slot !\u003d null ?\n\t\t\tslot.name().toLowerCase() + \" slot\" :\n\t\t\ttype !\u003d null ? type.name().toLowerCase() + \" colour\" : \"\";\n\t\txButton.setToolTipText(\"Clear \" + text);\n\t}\n\n\t// copied from ImageUtil, modified to allow for alpha threshold\n\tpublic BufferedImage fillImage(final BufferedImage image, final Color color, int alphaThreshold)\n\t{\n\t\tfinal BufferedImage filledImage \u003d new BufferedImage(image.getWidth(), image.getHeight(), BufferedImage.TYPE_INT_ARGB);\n\t\tfor (int x \u003d 0; x \u003c filledImage.getWidth(); x++)\n\t\t{\n\t\t\tfor (int y \u003d 0; y \u003c filledImage.getHeight(); y++)\n\t\t\t{\n\t\t\t\tint pixel \u003d image.getRGB(x, y);\n\t\t\t\tint a \u003d pixel \u003e\u003e\u003e 24;\n\t\t\t\tif (a \u003c alphaThreshold)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfilledImage.setRGB(x, y, color.getRGB());\n\t\t\t}\n\t\t}\n\t\treturn filledImage;\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\panel\\KitItemPanel.java"},{"fileName":"KitsPanel.java","content":"package eq.uirs.fashionscape.panel;\n\nimport eq.uirs.fashionscape.FashionscapeConfig;\nimport eq.uirs.fashionscape.core.FashionManager;\nimport eq.uirs.fashionscape.data.color.ColorType;\nimport eq.uirs.fashionscape.data.kit.JawIcon;\nimport java.awt.BorderLayout;\nimport java.awt.Dimension;\nimport java.awt.GridBagConstraints;\nimport java.awt.GridBagLayout;\nimport java.awt.GridLayout;\nimport java.awt.image.BufferedImage;\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.annotation.Nullable;\nimport javax.inject.Inject;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\nimport javax.swing.SwingUtilities;\nimport javax.swing.border.EmptyBorder;\nimport lombok.Value;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Player;\nimport net.runelite.api.PlayerComposition;\nimport net.runelite.api.kit.KitType;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.util.ImageUtil;\n\n/**\n * Tab panel that houses \"base\" player models and colors\n */\n@Slf4j\npublic class KitsPanel extends JPanel\n{\n\tprivate final FashionManager fashionManager;\n\tprivate final ClientThread clientThread;\n\tprivate final ItemManager itemManager;\n\tprivate final Client client;\n\tprivate final FashionscapeConfig config;\n\n\tprivate final JPanel resultsPanel \u003d new JPanel();\n\tprivate final JScrollPane scrollPane \u003d new JScrollPane();\n\tprivate final List\u003cKitItemPanel\u003e kitPanels \u003d new ArrayList\u003c\u003e();\n\tprivate JawIconPanel jawIconPanel \u003d null;\n\n\tprivate Integer gender;\n\tprivate final KitColorOpener kitColorOpener \u003d (slot, type) -\u003e {\n\t\tkitPanels.forEach(panel -\u003e {\n\t\t\tif (slot \u003d\u003d panel.getSlot() \u0026\u0026 type \u003d\u003d panel.getType())\n\t\t\t{\n\t\t\t\tInteger gender \u003d getGender();\n\t\t\t\tif (gender !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tpanel.openOptions(gender);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tpanel.closeOptions();\n\t\t\t}\n\t\t});\n\t\tif (jawIconPanel !\u003d null)\n\t\t{\n\t\t\tif (slot \u003d\u003d null \u0026\u0026 type \u003d\u003d null)\n\t\t\t{\n\t\t\t\tjawIconPanel.openOptions();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tjawIconPanel.closeOptions();\n\t\t\t}\n\t\t}\n\t\tupdateUI();\n\t\tscrollPane.revalidate();\n\t};\n\n\t@Value\n\tprivate static class KitColorResult\n\t{\n\t\tKitType slot;\n\t\tInteger id; // icon id if icon, kit id otherwise\n\n\t\tColorType colorType;\n\t\tInteger colorId;\n\t}\n\n\t@Inject\n\tpublic KitsPanel(FashionManager fashionManager, ClientThread clientThread, Client client, FashionscapeConfig config,\n\t\t\t\t\t ItemManager itemManager)\n\t{\n\t\tthis.fashionManager \u003d fashionManager;\n\t\tthis.clientThread \u003d clientThread;\n\t\tthis.client \u003d client;\n\t\tthis.config \u003d config;\n\t\tthis.itemManager \u003d itemManager;\n\n\t\tsetLayout(new GridLayout(1, 1));\n\t\tsetBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tsetBorder(new EmptyBorder(5, 10, 5, 10));\n\n\t\tresultsPanel.setLayout(new GridBagLayout());\n\t\tresultsPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tscrollPane.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tscrollPane.getVerticalScrollBar().setPreferredSize(new Dimension(10, 0));\n\n\t\tJPanel resultsWrapper \u003d new JPanel(new BorderLayout());\n\t\tresultsWrapper.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tresultsWrapper.add(resultsPanel, BorderLayout.NORTH);\n\n\t\tscrollPane.setViewportView(resultsWrapper);\n\t\tadd(scrollPane, BorderLayout.CENTER);\n\t\tpopulateKitSlots();\n\t}\n\n\tpublic void collapseOptions()\n\t{\n\t\tfor (KitItemPanel kitPanel : kitPanels)\n\t\t{\n\t\t\tkitPanel.closeOptions();\n\t\t}\n\t\tupdateUI();\n\t\tscrollPane.revalidate();\n\t}\n\n\tvoid populateKitSlots()\n\t{\n\t\tclientThread.invokeLater(() -\u003e {\n\t\t\tList\u003cKitColorResult\u003e results \u003d new ArrayList\u003c\u003e();\n\t\t\tfor (PanelKitSlot slot : PanelKitSlot.values())\n\t\t\t{\n\t\t\t\tKitType kitType \u003d slot.getKitType();\n\t\t\t\tColorType colorType \u003d slot.getColorType();\n\t\t\t\tInteger kitId \u003d null;\n\t\t\t\tInteger colorId \u003d null;\n\n\t\t\t\tif (kitType \u003d\u003d null \u0026\u0026 colorType \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tif (config.excludeNonStandardItems() || config.excludeMembersItems())\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tJawIcon jawIcon \u003d fashionManager.swappedIcon();\n\t\t\t\t\tInteger iconId \u003d jawIcon !\u003d null ? jawIcon.getId() : null;\n\t\t\t\t\tresults.add(new KitColorResult(null, iconId, null, null));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (kitType !\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tkitId \u003d fashionManager.swappedKitIdIn(kitType);\n\t\t\t\t\t}\n\t\t\t\t\tif (colorType !\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tcolorId \u003d fashionManager.swappedColorIdIn(colorType);\n\t\t\t\t\t}\n\t\t\t\t\tresults.add(new KitColorResult(kitType, kitId, colorType, colorId));\n\t\t\t\t}\n\t\t\t}\n\t\t\tSwingUtilities.invokeLater(() -\u003e addKitSlotPanels(results));\n\t\t});\n\t}\n\n\tprivate void addKitSlotPanels(List\u003cKitColorResult\u003e results)\n\t{\n\t\tresultsPanel.removeAll();\n\t\tkitPanels.clear();\n\t\tGridBagConstraints c \u003d new GridBagConstraints();\n\t\tc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\tc.anchor \u003d GridBagConstraints.PAGE_START;\n\t\tc.weightx \u003d 1;\n\t\tc.weighty \u003d 0;\n\t\tc.gridx \u003d 0;\n\t\tc.gridy \u003d 0;\n\n\t\tfor (KitColorResult result : results)\n\t\t{\n\t\t\tBufferedImage image \u003d null;\n\t\t\tJPanel panel;\n\t\t\tif (result.colorType \u003d\u003d null \u0026\u0026 result.slot \u003d\u003d null)\n\t\t\t{\n\t\t\t\timage \u003d ImageUtil.loadImageResource(getClass(), \"icon.png\");\n\t\t\t\tJawIconPanel jawPanel \u003d new JawIconPanel(image, clientThread, fashionManager, itemManager, kitColorOpener,\n\t\t\t\t\tresult.id);\n\t\t\t\tjawIconPanel \u003d jawPanel;\n\t\t\t\tpanel \u003d jawPanel;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (result.slot !\u003d null)\n\t\t\t\t{\n\t\t\t\t\timage \u003d ImageUtil.loadImageResource(getClass(), result.slot.name().toLowerCase() + \".png\");\n\t\t\t\t}\n\t\t\t\tKitItemPanel kitPanel \u003d new KitItemPanel(fashionManager, result.colorType, result.colorId, result.slot,\n\t\t\t\t\tresult.id, kitColorOpener, image, clientThread);\n\t\t\t\tkitPanels.add(kitPanel);\n\t\t\t\tpanel \u003d kitPanel;\n\t\t\t}\n\t\t\tJPanel marginWrapper \u003d new JPanel(new BorderLayout());\n\t\t\tmarginWrapper.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\t\tmarginWrapper.setBorder(new EmptyBorder(5, 0, 0, 0));\n\t\t\tmarginWrapper.add(panel, BorderLayout.NORTH);\n\t\t\tresultsPanel.add(marginWrapper, c);\n\t\t\tc.gridy++;\n\t\t}\n\t\trevalidate();\n\t\trepaint();\n\t}\n\n\tpublic void onPlayerChanged(Player player)\n\t{\n\t\tif (player !\u003d null)\n\t\t{\n\t\t\tPlayerComposition composition \u003d player.getPlayerComposition();\n\t\t\tif (composition !\u003d null)\n\t\t\t{\n\t\t\t\tint gender \u003d composition.getGender();\n\t\t\t\tif (this.gender \u003d\u003d null || this.gender !\u003d gender)\n\t\t\t\t{\n\t\t\t\t\tthis.gender \u003d gender;\n\t\t\t\t\tpopulateKitSlots();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// returns null if gender cannot be determined\n\t@Nullable\n\tprivate Integer getGender()\n\t{\n\t\tPlayer player \u003d client.getLocalPlayer();\n\t\tif (player !\u003d null)\n\t\t{\n\t\t\tPlayerComposition composition \u003d player.getPlayerComposition();\n\t\t\tif (composition !\u003d null)\n\t\t\t{\n\t\t\t\treturn composition.getGender();\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\panel\\KitsPanel.java"},{"fileName":"NothingItemComposition.java","content":"package eq.uirs.fashionscape.panel;\n\n/**\n * ItemComposition representing \"nothing\". Only to be displayed in search results.\n */\nclass NothingItemComposition\n{\n\tpublic static final String NAME \u003d \"Nothing\";\n\tpublic static final int ID \u003d -1;\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\panel\\NothingItemComposition.java"},{"fileName":"OnSelectionChangingListener.java","content":"package eq.uirs.fashionscape.panel;\n\nimport net.runelite.api.kit.KitType;\n\ninterface OnSelectionChangingListener\n{\n\tvoid onSearchSelectionChanging(KitType slot);\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\panel\\OnSelectionChangingListener.java"},{"fileName":"PanelEquipSlot.java","content":"package eq.uirs.fashionscape.panel;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.api.kit.KitType;\nimport net.runelite.client.util.Text;\n\n@Getter\n@RequiredArgsConstructor\npublic enum PanelEquipSlot\n{\n\tALL(null),\n\tHEAD(KitType.HEAD),\n\tAMULET(KitType.AMULET),\n\tCAPE(KitType.CAPE),\n\tTORSO(KitType.TORSO),\n\tWEAPON(KitType.WEAPON),\n\tSHIELD(KitType.SHIELD),\n\tHANDS(KitType.HANDS),\n\tLEGS(KitType.LEGS),\n\tBOOTS(KitType.BOOTS);\n\n\tprivate final KitType kitType;\n\n\tpublic String getDisplayName()\n\t{\n\t\treturn Text.titleCase(this);\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\panel\\PanelEquipSlot.java"},{"fileName":"PanelKitSlot.java","content":"package eq.uirs.fashionscape.panel;\n\nimport eq.uirs.fashionscape.data.color.ColorType;\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.api.kit.KitType;\nimport net.runelite.client.util.Text;\n\n@Getter\n@RequiredArgsConstructor\npublic enum PanelKitSlot\n{\n\tSKIN(null, ColorType.SKIN),\n\tHAIR(KitType.HAIR, ColorType.HAIR),\n\tJAW(KitType.JAW, ColorType.HAIR),\n\tTORSO(KitType.TORSO, ColorType.TORSO),\n\tARMS(KitType.ARMS, ColorType.TORSO),\n\tHANDS(KitType.HANDS, null),\n\tLEGS(KitType.LEGS, ColorType.LEGS),\n\tBOOTS(KitType.BOOTS, ColorType.BOOTS),\n\tICON(null, null);\n\n\tprivate final KitType kitType;\n\n\tprivate final ColorType colorType;\n\n\tpublic String getDisplayName()\n\t{\n\t\treturn Text.titleCase(this);\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\panel\\PanelKitSlot.java"},{"fileName":"RoundedBorder.java","content":"package eq.uirs.fashionscape.panel;\n\nimport java.awt.Color;\nimport java.awt.Component;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.geom.RoundRectangle2D;\nimport javax.swing.border.AbstractBorder;\n\npublic class RoundedBorder extends AbstractBorder\n{\n\n\tprivate final Color color;\n\tprivate final int radius;\n\n\tpublic RoundedBorder(Color color, int radius)\n\t{\n\t\tthis.color \u003d color;\n\t\tthis.radius \u003d radius;\n\t}\n\n\t@Override\n\tpublic void paintBorder(Component c, Graphics g, int x, int y, int width, int height)\n\t{\n\t\tGraphics2D g2d \u003d (Graphics2D) g.create();\n\t\tg2d.setColor(color);\n\t\tg2d.draw(new RoundRectangle2D.Double(x, y, width - 1, height - 1, radius, radius));\n\t\tg2d.dispose();\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\panel\\RoundedBorder.java"},{"fileName":"SearchItemPanel.java","content":"package eq.uirs.fashionscape.panel;\n\nimport eq.uirs.fashionscape.core.FashionManager;\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Cursor;\nimport java.awt.Dimension;\nimport java.awt.GridLayout;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.awt.image.BufferedImage;\nimport java.text.DecimalFormat;\nimport java.util.Objects;\nimport javax.annotation.Nullable;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.kit.KitType;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.ColorScheme;\n\n@Slf4j\nclass SearchItemPanel extends AbsItemPanel\n{\n\tprivate final FashionManager fashionManager;\n\tprivate final KitType slot;\n\n\tpublic SearchItemPanel(@Nullable Integer itemId, BufferedImage icon, KitType slot,\n\t\t\t\t\t\t   ItemManager itemManager, FashionManager fashionManager, ClientThread clientThread,\n\t\t\t\t\t\t   OnSelectionChangingListener listener, Double score)\n\t{\n\t\tsuper(itemId, icon, itemManager, clientThread);\n\t\tthis.fashionManager \u003d fashionManager;\n\t\tthis.slot \u003d slot;\n\n\t\tMouseAdapter itemPanelMouseListener \u003d new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mouseEntered(MouseEvent e)\n\t\t\t{\n\t\t\t\tif (!fashionManager.isItemLocked(slot))\n\t\t\t\t{\n\t\t\t\t\tfor (JPanel panel : highlightPanels)\n\t\t\t\t\t{\n\t\t\t\t\t\tmatchComponentBackground(panel, ColorScheme.DARK_GRAY_HOVER_COLOR);\n\t\t\t\t\t}\n\t\t\t\t\tsetCursor(new Cursor(Cursor.HAND_CURSOR));\n\t\t\t\t}\n\t\t\t\tfashionManager.hoverOverItem(slot, itemId);\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseExited(MouseEvent e)\n\t\t\t{\n\t\t\t\tfor (JPanel panel : highlightPanels)\n\t\t\t\t{\n\t\t\t\t\tmatchComponentBackground(panel, defaultBackgroundColor());\n\t\t\t\t}\n\t\t\t\tsetCursor(new Cursor(Cursor.DEFAULT_CURSOR));\n\t\t\t\tfashionManager.hoverAway();\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseReleased(MouseEvent e)\n\t\t\t{\n\t\t\t\t// pre-emptively set background\n\t\t\t\tboolean isAlreadySelected \u003d isMatch();\n\t\t\t\tColor bg \u003d isAlreadySelected ? nonHighlightColor : ColorScheme.MEDIUM_GRAY_COLOR;\n\t\t\t\tfor (JPanel panel : highlightPanels)\n\t\t\t\t{\n\t\t\t\t\tmatchComponentBackground(panel, bg);\n\t\t\t\t}\n\t\t\t\t// now swap it\n\t\t\t\tclientThread.invokeLater(() -\u003e {\n\t\t\t\t\tif (!fashionManager.isItemLocked(slot))\n\t\t\t\t\t{\n\t\t\t\t\t\tlistener.onSearchSelectionChanging(slot);\n\t\t\t\t\t\tfashionManager.hoverSelectItem(slot, itemId);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\taddMouseListener(itemPanelMouseListener);\n\n\t\t// Item details panel\n\t\tint rows \u003d score \u003d\u003d null ? 1 : 2;\n\t\tJPanel rightPanel \u003d new JPanel(new GridLayout(rows, 1));\n\t\trightPanel.setBorder(new EmptyBorder(0, 5, 0, 5));\n\t\thighlightPanels.add(rightPanel);\n\t\trightPanel.add(label);\n\n\t\tif (score !\u003d null)\n\t\t{\n\t\t\tDecimalFormat format \u003d new DecimalFormat(\"#.#\");\n\t\t\tJLabel scoreLabel \u003d new JLabel();\n\t\t\tscoreLabel.setForeground(Color.WHITE);\n\t\t\tscoreLabel.setMaximumSize(new Dimension(0, 0));\n\t\t\tscoreLabel.setPreferredSize(new Dimension(0, 0));\n\t\t\tscoreLabel.setText(format.format(score * 100.0) + \"%\");\n\t\t\tscoreLabel.setForeground(getScoreColor(score));\n\t\t\trightPanel.add(scoreLabel);\n\t\t}\n\n\t\tfor (JPanel panel : highlightPanels)\n\t\t{\n\t\t\tmatchComponentBackground(panel, defaultBackgroundColor());\n\t\t}\n\n\t\tadd(rightPanel, BorderLayout.CENTER);\n\t}\n\n\tpublic void resetBackground()\n\t{\n\t\tfor (JPanel panel : highlightPanels)\n\t\t{\n\t\t\tmatchComponentBackground(panel, nonHighlightColor);\n\t\t}\n\t}\n\n\tprivate Color defaultBackgroundColor()\n\t{\n\t\tif (isMatch())\n\t\t{\n\t\t\treturn ColorScheme.MEDIUM_GRAY_COLOR;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn nonHighlightColor;\n\t\t}\n\t}\n\n\tprivate boolean isMatch()\n\t{\n\t\tif (itemId \u003c 0)\n\t\t{\n\t\t\treturn fashionManager.isHidden(slot);\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn Objects.equals(itemId, fashionManager.swappedItemIdIn(slot));\n\t\t}\n\t}\n\n\tprivate Color getScoreColor(Double score)\n\t{\n\t\tint red \u003d (int) (255.0 * (1 - Math.pow(score, 2)));\n\t\tint green \u003d (int) (255.0 * Math.pow(score, 2));\n\t\treturn new Color(red, green, 0);\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\panel\\SearchItemPanel.java"},{"fileName":"SearchOpener.java","content":"package eq.uirs.fashionscape.panel;\n\nimport net.runelite.api.kit.KitType;\n\ninterface SearchOpener\n{\n\tvoid openSearchFor(KitType slot);\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\panel\\SearchOpener.java"},{"fileName":"SearchPanel.java","content":"package eq.uirs.fashionscape.panel;\n\nimport com.google.common.base.Strings;\nimport com.google.common.collect.ImmutableMap;\nimport eq.uirs.fashionscape.FashionscapeConfig;\nimport eq.uirs.fashionscape.FashionscapePlugin;\nimport eq.uirs.fashionscape.colors.ColorScorer;\nimport eq.uirs.fashionscape.core.FashionManager;\nimport eq.uirs.fashionscape.core.event.LockChanged;\nimport eq.uirs.fashionscape.core.event.LockChangedListener;\nimport java.awt.BorderLayout;\nimport java.awt.CardLayout;\nimport java.awt.Color;\nimport java.awt.Cursor;\nimport java.awt.Dimension;\nimport java.awt.GridBagConstraints;\nimport java.awt.GridBagLayout;\nimport java.awt.GridLayout;\nimport java.awt.event.ItemEvent;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.awt.image.BufferedImage;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Comparator;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Objects;\nimport java.util.Set;\nimport java.util.concurrent.Future;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.concurrent.TimeUnit;\nimport java.util.concurrent.atomic.AtomicBoolean;\nimport java.util.function.Function;\nimport java.util.stream.Collectors;\nimport javax.annotation.Nullable;\nimport javax.inject.Inject;\nimport javax.swing.ImageIcon;\nimport javax.swing.JComboBox;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\nimport javax.swing.SwingUtilities;\nimport javax.swing.border.EmptyBorder;\nimport javax.swing.event.DocumentEvent;\nimport javax.swing.event.DocumentListener;\nimport lombok.Value;\nimport net.runelite.api.Client;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.api.kit.KitType;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.game.ItemStats;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.components.IconTextField;\nimport net.runelite.client.ui.components.PluginErrorPanel;\nimport net.runelite.client.ui.components.materialtabs.MaterialTab;\nimport net.runelite.client.ui.components.materialtabs.MaterialTabGroup;\nimport net.runelite.client.util.AsyncBufferedImage;\nimport net.runelite.client.util.ImageUtil;\nimport net.runelite.client.util.SwingUtil;\n\n/**\n * Tab panel that houses the search UI: bar, filters, sort, results, etc.\n */\npublic class SearchPanel extends JPanel\n{\n\tprivate static final int DEBOUNCE_DELAY_MS \u003d 200;\n\tprivate static final String ERROR_PANEL \u003d \"ERROR_PANEL\";\n\tprivate static final String RESULTS_PANEL \u003d \"RESULTS_PANEL\";\n\tprivate static final Set\u003cInteger\u003e VALID_SLOT_IDS \u003d Arrays.stream(PanelEquipSlot.values())\n\t\t.map(PanelEquipSlot::getKitType)\n\t\t.filter(Objects::nonNull)\n\t\t.map(KitType::getIndex)\n\t\t.collect(Collectors.toSet());\n\n\tprivate final Client client;\n\tprivate final FashionManager fashionManager;\n\tprivate final ItemManager itemManager;\n\tprivate final ClientThread clientThread;\n\tprivate final FashionscapeConfig config;\n\tprivate final ScheduledExecutorService executor;\n\tprivate final ColorScorer colorScorer;\n\n\t// constrain items in the list of results\n\tprivate final GridBagConstraints itemConstraints \u003d new GridBagConstraints();\n\tprivate final CardLayout cardLayout \u003d new CardLayout();\n\tprivate final IconTextField searchBar \u003d new IconTextField();\n\tprivate final MaterialTabGroup slotFilter \u003d new MaterialTabGroup();\n\tprivate final JPanel resultsPanel \u003d new JPanel();\n\tprivate final JScrollPane resultsScrollPane;\n\tprivate final JPanel centerPanel \u003d new JPanel(cardLayout);\n\tprivate final PluginErrorPanel errorPanel \u003d new PluginErrorPanel();\n\tprivate final Map\u003cPanelEquipSlot, MaterialTab\u003e tabMap;\n\tprivate final List\u003cSearchItemPanel\u003e searchPanels \u003d new ArrayList\u003c\u003e();\n\n\tprivate final List\u003cResult\u003e results \u003d new ArrayList\u003c\u003e();\n\tprivate final AtomicBoolean searchInProgress \u003d new AtomicBoolean();\n\tprivate final OnSelectionChangingListener listener \u003d new OnSelectionChangingListener()\n\t{\n\t\t@Override\n\t\tpublic void onSearchSelectionChanging(KitType slot)\n\t\t{\n\t\t\tfor (SearchItemPanel item : searchPanels)\n\t\t\t{\n\t\t\t\tif (Objects.equals(item.itemId, fashionManager.swappedItemIdIn(slot)) ||\n\t\t\t\t\t(item.itemId !\u003d null \u0026\u0026 item.itemId \u003c 0 \u0026\u0026 fashionManager.isHidden(slot)))\n\t\t\t\t{\n\t\t\t\t\titem.resetBackground();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tprivate Future\u003c?\u003e searchFuture \u003d null;\n\tprivate Function\u003cItemComposition, Boolean\u003e filter;\n\tprivate boolean allowShortQueries \u003d false;\n\tprivate SortBy sort;\n\tprivate KitType selectedSlot \u003d null;\n\tprivate boolean hasSearched \u003d false;\n\tprivate final Map\u003cInteger, Double\u003e scores \u003d new HashMap\u003c\u003e();\n\n\tprivate final Comparator\u003cResult\u003e itemAlphaComparator \u003d Comparator.comparing(Result::getName);\n\n\t@Value\n\tprivate static class Result\n\t{\n\t\t@Nullable\n\t\tItemComposition itemComposition;\n\t\tBufferedImage icon;\n\t\tKitType slot;\n\n\t\tint getId() {\n\t\t\treturn itemComposition !\u003d null ? itemComposition.getId() : NothingItemComposition.ID;\n\t\t}\n\n\t\tString getName() {\n\t\t\treturn itemComposition !\u003d null ? itemComposition.getMembersName() : NothingItemComposition.NAME;\n\t\t}\n\t}\n\n\t@Inject\n\tpublic SearchPanel(Client client, FashionManager fashionManager, ClientThread clientThread,\n\t\t\t\t\t   ItemManager itemManager, ScheduledExecutorService executor,\n\t\t\t\t\t   FashionscapeConfig config, ColorScorer colorScorer)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.fashionManager \u003d fashionManager;\n\t\tthis.itemManager \u003d itemManager;\n\t\tthis.clientThread \u003d clientThread;\n\t\tthis.executor \u003d executor;\n\t\tthis.config \u003d config;\n\t\tthis.colorScorer \u003d colorScorer;\n\t\tthis.sort \u003d config.preferredSort();\n\n\t\tsetLayout(new BorderLayout());\n\t\tsetBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// constrain top-level view groups\n\t\tGridBagConstraints groupConstraints \u003d new GridBagConstraints();\n\t\tgroupConstraints.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\tgroupConstraints.weightx \u003d 1;\n\t\tgroupConstraints.weighty \u003d 0;\n\t\tgroupConstraints.gridx \u003d 0;\n\t\tgroupConstraints.gridy \u003d 0;\n\n\t\titemConstraints.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\titemConstraints.weightx \u003d 1;\n\t\titemConstraints.weighty \u003d 0;\n\t\titemConstraints.gridx \u003d 0;\n\t\titemConstraints.gridy \u003d 0;\n\n\t\tJPanel container \u003d new JPanel();\n\t\tcontainer.setLayout(new GridBagLayout());\n\t\tcontainer.setBorder(new EmptyBorder(10, 10, 10, 10));\n\t\tcontainer.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tthis.tabMap \u003d setUpSlotFilters();\n\t\tsetUpSearchBar();\n\n\t\tresultsPanel.setLayout(new GridBagLayout());\n\t\tresultsPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel wrapper \u003d new JPanel(new BorderLayout());\n\t\twrapper.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\twrapper.add(resultsPanel, BorderLayout.NORTH);\n\n\t\tresultsScrollPane \u003d new JScrollPane(wrapper);\n\t\tresultsScrollPane.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tresultsScrollPane.getVerticalScrollBar().setPreferredSize(new Dimension(10, 0));\n\t\tresultsScrollPane.setVisible(false);\n\n\t\tJPanel infoWrapper \u003d new JPanel(new BorderLayout());\n\t\tinfoWrapper.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\terrorPanel.setContent(\"Equipment Search\", \"Items you can try on will appear here.\");\n\t\tinfoWrapper.add(errorPanel, BorderLayout.NORTH);\n\n\t\tcenterPanel.add(resultsScrollPane, RESULTS_PANEL);\n\t\tcenterPanel.add(infoWrapper, ERROR_PANEL);\n\n\t\tcardLayout.show(centerPanel, ERROR_PANEL);\n\n\t\tJPanel sortBar \u003d new JPanel();\n\t\tsortBar.setLayout(new GridLayout(1, 2));\n\t\tsortBar.setBorder(new EmptyBorder(5, 0, 0, 0));\n\t\tsortBar.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJLabel sortLabel \u003d new JLabel(\"Sort by\");\n\t\tsortLabel.setForeground(Color.WHITE);\n\t\tsortLabel.setMaximumSize(new Dimension(0, 0));\n\t\tsortLabel.setPreferredSize(new Dimension(0, 0));\n\t\tsortBar.add(sortLabel);\n\n\t\tJComboBox\u003cSortBy\u003e sortBox \u003d createSortBox(config);\n\t\tsortBar.add(sortBox);\n\n\t\tcontainer.add(slotFilter, groupConstraints);\n\t\tgroupConstraints.gridy++;\n\t\tcontainer.add(searchBar, groupConstraints);\n\t\tgroupConstraints.gridy++;\n\t\tcontainer.add(sortBar, groupConstraints);\n\t\tgroupConstraints.gridy++;\n\n\t\tadd(container, BorderLayout.NORTH);\n\t\tadd(centerPanel, BorderLayout.CENTER);\n\n\t\tSwingUtilities.invokeLater(searchBar::requestFocusInWindow);\n\n\t\tfashionManager.addEventListener(new LockChangedListener((e) -\u003e {\n\t\t\tif (e.getType() !\u003d LockChanged.Type.KIT)\n\t\t\t{\n\t\t\t\tupdateTabIcon(e);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate JComboBox\u003cSortBy\u003e createSortBox(FashionscapeConfig config)\n\t{\n\t\tJComboBox\u003cSortBy\u003e sortBox \u003d new JComboBox\u003c\u003e(SortBy.values());\n\t\tsortBox.setSelectedItem(this.sort);\n\t\tsortBox.setPreferredSize(new Dimension(sortBox.getPreferredSize().width, 25));\n\t\tsortBox.setForeground(Color.WHITE);\n\t\tsortBox.setFocusable(false);\n\t\tsortBox.addItemListener(e -\u003e {\n\t\t\tif (e.getStateChange() \u003d\u003d ItemEvent.SELECTED)\n\t\t\t{\n\t\t\t\tSortBy selectedSort \u003d (SortBy) sortBox.getSelectedItem();\n\t\t\t\tconfig.setPreferredSort(selectedSort);\n\t\t\t\tsort \u003d selectedSort;\n\t\t\t\tupdateSearchDebounced();\n\t\t\t}\n\t\t});\n\t\treturn sortBox;\n\t}\n\n\tpublic void clearResults()\n\t{\n\t\tsearchPanels.clear();\n\t\tSwingUtil.fastRemoveAll(resultsPanel);\n\t}\n\n\tpublic void reloadResults()\n\t{\n\t\tupdateSearchDebounced();\n\t\tSwingUtilities.invokeLater(searchBar::requestFocusInWindow);\n\t}\n\n\tpublic void chooseSlot(KitType slot)\n\t{\n\t\tPanelEquipSlot panelSlot \u003d Arrays.stream(PanelEquipSlot.values())\n\t\t\t.filter(p -\u003e p.getKitType() \u003d\u003d slot)\n\t\t\t.findFirst()\n\t\t\t.orElse(PanelEquipSlot.ALL);\n\t\tMaterialTab tab \u003d tabMap.get(panelSlot);\n\t\tif (tab !\u003d null)\n\t\t{\n\t\t\tslotFilter.select(tab);\n\t\t}\n\t}\n\n\tpublic void clearSearch()\n\t{\n\t\tif (!Strings.isNullOrEmpty(searchBar.getText()))\n\t\t{\n\t\t\tsearchBar.setText(\"\");\n\t\t}\n\t\tresults.clear();\n\t\tsearchPanels.clear();\n\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\tSwingUtil.fastRemoveAll(resultsPanel);\n\t\t\tresultsPanel.updateUI();\n\t\t\tsearchBar.requestFocusInWindow();\n\t\t});\n\t}\n\n\tprivate Map\u003cPanelEquipSlot, MaterialTab\u003e setUpSlotFilters()\n\t{\n\t\tImmutableMap.Builder\u003cPanelEquipSlot, MaterialTab\u003e builder \u003d new ImmutableMap.Builder\u003c\u003e();\n\t\tslotFilter.setLayout(new GridLayout(2, 5, 5, 5));\n\t\tslotFilter.setBorder(new EmptyBorder(0, 0, 10, 0));\n\t\tMaterialTab allTab \u003d null;\n\t\tfor (PanelEquipSlot filterSlot : PanelEquipSlot.values())\n\t\t{\n\t\t\tMaterialTab tab \u003d new MaterialTab(new ImageIcon(), slotFilter, null);\n\t\t\tbuilder.put(filterSlot, tab);\n\t\t\tboolean isLocked \u003d false;\n\t\t\tif (filterSlot.getKitType() \u003d\u003d null)\n\t\t\t{\n\t\t\t\tallTab \u003d tab;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tisLocked \u003d fashionManager.isItemLocked(filterSlot.getKitType());\n\t\t\t}\n\t\t\tImageIcon icon \u003d iconFor(filterSlot, isLocked);\n\t\t\ttab.setIcon(icon);\n\t\t\ttab.setToolTipText(filterSlot.getDisplayName());\n\t\t\ttab.addMouseListener(new MouseAdapter()\n\t\t\t{\n\t\t\t\t@Override\n\t\t\t\tpublic void mouseEntered(MouseEvent e)\n\t\t\t\t{\n\t\t\t\t\tsetCursor(new Cursor(Cursor.HAND_CURSOR));\n\t\t\t\t}\n\n\t\t\t\t@Override\n\t\t\t\tpublic void mouseExited(MouseEvent e)\n\t\t\t\t{\n\t\t\t\t\tsetCursor(new Cursor(Cursor.DEFAULT_CURSOR));\n\t\t\t\t}\n\t\t\t});\n\t\t\ttab.setOnSelectEvent(() -\u003e {\n\t\t\t\tfilter \u003d itemComposition -\u003e {\n\t\t\t\t\tKitType kitType \u003d filterSlot.getKitType();\n\t\t\t\t\tselectedSlot \u003d kitType;\n\t\t\t\t\tInteger slotId \u003d fashionManager.slotIdFor(itemComposition);\n\t\t\t\t\tif (kitType \u003d\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\t// allow any equipment slot that is also a KitType (so no ammo, etc)\n\t\t\t\t\t\treturn slotId !\u003d null \u0026\u0026 VALID_SLOT_IDS.contains(slotId);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\treturn slotId !\u003d null \u0026\u0026 kitType.getIndex() \u003d\u003d slotId;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t// individual slots will show all results all the time\n\t\t\t\tallowShortQueries \u003d filterSlot.getKitType() !\u003d null;\n\t\t\t\t// reset scroll position\n\t\t\t\tupdateSearchDebounced(() -\u003e resultsScrollPane.getVerticalScrollBar().setValue(0));\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\tslotFilter.addTab(tab);\n\t\t}\n\t\tif (allTab !\u003d null)\n\t\t{\n\t\t\tslotFilter.select(allTab);\n\t\t}\n\t\treturn builder.build();\n\t}\n\n\tprivate void setUpSearchBar()\n\t{\n\t\tsearchBar.setIcon(IconTextField.Icon.SEARCH);\n\t\tsearchBar.setPreferredSize(new Dimension(100, 30));\n\t\tsearchBar.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tsearchBar.setHoverBackgroundColor(ColorScheme.DARK_GRAY_HOVER_COLOR);\n\t\tsearchBar.addActionListener(e -\u003e updateSearchDebounced());\n\t\tsearchBar.addClearListener(this::clearSearch);\n\t\tsearchBar.getDocument().addDocumentListener(new DocumentListener()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void insertUpdate(DocumentEvent e)\n\t\t\t{\n\t\t\t\thasSearched \u003d true;\n\t\t\t\tupdateSearchDebounced();\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void removeUpdate(DocumentEvent e)\n\t\t\t{\n\t\t\t\thasSearched \u003d true;\n\t\t\t\tupdateSearchDebounced();\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void changedUpdate(DocumentEvent e)\n\t\t\t{\n\t\t\t\thasSearched \u003d true;\n\t\t\t\tupdateSearchDebounced();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate void updateSearchDebounced()\n\t{\n\t\tupdateSearchDebounced(() -\u003e {\n\t\t\t// no-op\n\t\t});\n\t}\n\n\tprivate void updateSearchDebounced(Runnable postExec)\n\t{\n\t\tFuture\u003c?\u003e future \u003d searchFuture;\n\t\tif (searchFuture !\u003d null)\n\t\t{\n\t\t\tfuture.cancel(false);\n\t\t}\n\t\tsearchFuture \u003d executor.schedule(() -\u003e clientThread.invokeLater(() -\u003e {\n\t\t\tif (!updateSearch(postExec))\n\t\t\t{\n\t\t\t\t// search was in progress; try again later\n\t\t\t\tupdateSearchDebounced(postExec);\n\t\t\t}\n\t\t}), DEBOUNCE_DELAY_MS, TimeUnit.MILLISECONDS);\n\t}\n\n\t// should only be called from debouncer and on client thread\n\tprivate boolean updateSearch(Runnable postExec)\n\t{\n\t\tboolean willUpdate \u003d searchInProgress.compareAndSet(false, true);\n\t\tif (willUpdate)\n\t\t{\n\t\t\tresults.clear();\n\n\t\t\tString search \u003d searchBar.getText().toLowerCase();\n\t\t\tif (!allowShortQueries \u0026\u0026 search.length() \u003c 2)\n\t\t\t{\n\t\t\t\tsearchPanels.clear();\n\t\t\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\t\t\tSwingUtil.fastRemoveAll(resultsPanel);\n\t\t\t\t\tresultsPanel.updateUI();\n\t\t\t\t\tif (hasSearched)\n\t\t\t\t\t{\n\t\t\t\t\t\terrorPanel.setContent(\"Search too short\", \"Type a longer search for results\");\n\t\t\t\t\t}\n\t\t\t\t\tcardLayout.show(centerPanel, ERROR_PANEL);\n\t\t\t\t\tsearchInProgress.set(false);\n\t\t\t\t});\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tSet\u003cInteger\u003e ids \u003d new HashSet\u003c\u003e();\n\t\t\tSet\u003cInteger\u003e skips \u003d FashionscapePlugin.getItemIdsToExclude(config);\n\t\t\tfor (int i \u003d 0; i \u003c client.getItemCount(); i++)\n\t\t\t{\n\t\t\t\tItemComposition itemComposition \u003d null;\n\t\t\t\tItemStats stats \u003d null;\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tint canonical \u003d itemManager.canonicalize(i);\n\t\t\t\t\tif (skips.contains(canonical))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\titemComposition \u003d itemManager.getItemComposition(canonical);\n\t\t\t\t\tstats \u003d itemManager.getItemStats(canonical);\n\t\t\t\t}\n\t\t\t\tcatch (Exception ignored)\n\t\t\t\t{\n\t\t\t\t}\n\t\t\t\t// id might already be in results due to canonicalize\n\t\t\t\tif (itemComposition !\u003d null \u0026\u0026 stats !\u003d null \u0026\u0026 stats.isEquipable() \u0026\u0026\n\t\t\t\t\t!ids.contains(itemComposition.getId()) \u0026\u0026 isValidSearch(itemComposition, search))\n\t\t\t\t{\n\t\t\t\t\tids.add(itemComposition.getId());\n\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t\t\tKitType slot \u003d KitType.values()[stats.getEquipment().getSlot()];\n\t\t\t\t\t\tAsyncBufferedImage image \u003d itemManager.getImage(itemComposition.getId());\n\t\t\t\t\t\tresults.add(new Result(itemComposition, image, slot));\n\t\t\t\t\t}\n\t\t\t\t\tcatch (Exception ignored)\n\t\t\t\t\t{\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (selectedSlot !\u003d null \u0026\u0026 FashionManager.ALLOWS_NOTHING.contains(selectedSlot) \u0026\u0026\n\t\t\t\tNothingItemComposition.NAME.toLowerCase().contains(search))\n\t\t\t{\n\t\t\t\tBufferedImage image \u003d ImageUtil.loadImageResource(getClass(), selectedSlot.name().toLowerCase() + \".png\");\n\t\t\t\tresults.add(0, new Result(null, image, selectedSlot));\n\t\t\t}\n\n\t\t\tsearchPanels.clear();\n\t\t\tscores.clear();\n\t\t\tswitch (this.sort)\n\t\t\t{\n\t\t\t\tcase RELEASE:\n\t\t\t\t\taddPendingResults(postExec);\n\t\t\t\t\tbreak;\n\t\t\t\tcase ALPHABETICAL:\n\t\t\t\t\texecutor.submit(() -\u003e {\n\t\t\t\t\t\tresults.sort(itemAlphaComparator);\n\t\t\t\t\t\taddPendingResults(postExec);\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase COLOR_MATCH:\n\t\t\t\t\texecutor.submit(() -\u003e {\n\t\t\t\t\t\tperformSuggestedSort();\n\t\t\t\t\t\taddPendingResults(postExec);\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn willUpdate;\n\t}\n\n\tprivate void performSuggestedSort()\n\t{\n\t\tcolorScorer.updatePlayerInfo();\n\t\tfor (Result result : results)\n\t\t{\n\t\t\tint itemId \u003d result.getId();\n\t\t\tscores.put(itemId, colorScorer.score(itemId, selectedSlot));\n\t\t}\n\t\tresults.sort(Comparator.comparing(r -\u003e\n\t\t\t-scores.getOrDefault(r.getId(), 0.0)));\n\t}\n\n\t// only to be called from updateSearch\n\tprivate void addPendingResults(Runnable postExec)\n\t{\n\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\tSwingUtil.fastRemoveAll(resultsPanel);\n\t\t\tif (results.isEmpty())\n\t\t\t{\n\t\t\t\tString slotName \u003d \"any\";\n\t\t\t\tif (selectedSlot !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tslotName \u003d selectedSlot.name().toLowerCase();\n\t\t\t\t}\n\t\t\t\terrorPanel.setContent(\"No results\",\n\t\t\t\t\t\"No items match \\\"\" + searchBar.getText() + \"\\\" in \" + slotName + \" slot\");\n\t\t\t\tcardLayout.show(centerPanel, ERROR_PANEL);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tboolean firstItem \u003d true;\n\t\t\t\tboolean showScores \u003d true;\n\t\t\t\tfor (Result result : results)\n\t\t\t\t{\n\t\t\t\t\tInteger itemId \u003d result.getId();\n\t\t\t\t\tDouble score \u003d scores.get(itemId);\n\t\t\t\t\tif (firstItem)\n\t\t\t\t\t{\n\t\t\t\t\t\tshowScores \u003d score !\u003d null \u0026\u0026 score !\u003d 0.0;\n\t\t\t\t\t}\n\t\t\t\t\tif (!showScores)\n\t\t\t\t\t{\n\t\t\t\t\t\tscore \u003d null;\n\t\t\t\t\t}\n\t\t\t\t\tSearchItemPanel panel \u003d new SearchItemPanel(itemId, result.getIcon(),\n\t\t\t\t\t\tresult.getSlot(), itemManager, fashionManager, clientThread, listener, score);\n\t\t\t\t\tsearchPanels.add(panel);\n\t\t\t\t\tint topPadding \u003d firstItem ? 0 : 5;\n\t\t\t\t\tfirstItem \u003d false;\n\t\t\t\t\tJPanel marginWrapper \u003d new JPanel(new BorderLayout());\n\t\t\t\t\tmarginWrapper.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\t\t\t\tmarginWrapper.setBorder(new EmptyBorder(topPadding, 10, 0, 10));\n\t\t\t\t\tmarginWrapper.add(panel, BorderLayout.NORTH);\n\t\t\t\t\tresultsPanel.add(marginWrapper, itemConstraints);\n\t\t\t\t\titemConstraints.gridy++;\n\t\t\t\t}\n\t\t\t\tcardLayout.show(centerPanel, RESULTS_PANEL);\n\t\t\t\tresultsPanel.updateUI();\n\t\t\t}\n\t\t\tsearchInProgress.set(false);\n\t\t\tpostExec.run();\n\t\t});\n\t}\n\n\tprivate boolean isValidSearch(ItemComposition itemComposition, String query)\n\t{\n\t\tString name \u003d itemComposition.getMembersName().toLowerCase();\n\t\t// The client assigns \"null\" to item names of items it doesn\u0027t know about\n\t\tif (name.equals(\"null\") || !name.contains(query))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\treturn filter \u003d\u003d null || filter.apply(itemComposition);\n\t}\n\n\tprivate void updateTabIcon(LockChanged event)\n\t{\n\t\tKitType slot \u003d event.getSlot();\n\t\tboolean isLocked \u003d event.isLocked();\n\t\tArrays.stream(PanelEquipSlot.values())\n\t\t\t.filter(p -\u003e p.getKitType() \u003d\u003d slot)\n\t\t\t.findFirst()\n\t\t\t.ifPresent(panelEquipSlot -\u003e updateTabIcon(panelEquipSlot, isLocked));\n\t}\n\n\tprivate void updateTabIcon(PanelEquipSlot panelSlot, boolean isLocked)\n\t{\n\t\tMaterialTab tab \u003d tabMap.get(panelSlot);\n\t\tif (tab !\u003d null)\n\t\t{\n\t\t\ttab.setIcon(iconFor(panelSlot, isLocked));\n\t\t}\n\t}\n\n\tprivate ImageIcon iconFor(PanelEquipSlot panelSlot, boolean isLocked)\n\t{\n\t\tString lockStr \u003d isLocked ? \"-lock\" : \"\";\n\t\tString iconName \u003d panelSlot.getDisplayName().toLowerCase() + lockStr + \".png\";\n\t\treturn new ImageIcon(ImageUtil.loadImageResource(getClass(), iconName));\n\t}\n\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\panel\\SearchPanel.java"},{"fileName":"SortBy.java","content":"package eq.uirs.fashionscape.panel;\n\npublic enum SortBy\n{\n\tCOLOR_MATCH,\n\tALPHABETICAL,\n\tRELEASE;\n\n\t@Override\n\tpublic String toString()\n\t{\n\t\tswitch (this)\n\t\t{\n\t\t\tcase RELEASE:\n\t\t\t\treturn \"Release\";\n\t\t\tcase ALPHABETICAL:\n\t\t\t\treturn \"Alphabetical\";\n\t\t\tcase COLOR_MATCH:\n\t\t\t\treturn \"Colour match\";\n\t\t\tdefault:\n\t\t\t\treturn \"\";\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\panel\\SortBy.java"},{"fileName":"SwapItemPanel.java","content":"package eq.uirs.fashionscape.panel;\n\nimport eq.uirs.fashionscape.core.FashionManager;\nimport eq.uirs.fashionscape.core.event.ItemChangedListener;\nimport eq.uirs.fashionscape.core.event.LockChanged;\nimport eq.uirs.fashionscape.core.event.LockChangedListener;\nimport java.awt.BorderLayout;\nimport java.awt.Cursor;\nimport java.awt.Dimension;\nimport java.awt.GridLayout;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.awt.image.BufferedImage;\nimport javax.annotation.Nullable;\nimport javax.swing.ImageIcon;\nimport javax.swing.JButton;\nimport javax.swing.JPanel;\nimport javax.swing.SwingUtilities;\nimport javax.swing.border.EmptyBorder;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.api.kit.KitType;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.util.AsyncBufferedImage;\nimport net.runelite.client.util.ImageUtil;\n\n@Slf4j\nclass SwapItemPanel extends AbsItemPanel\n{\n\tprivate static final Dimension ICON_SIZE \u003d new Dimension(20, 20);\n\n\tprivate final KitType slot;\n\tprivate final FashionManager fashionManager;\n\tprivate final JButton lockButton;\n\tprivate final JButton xButton;\n\tprivate final SearchOpener searchOpener;\n\tprivate Integer itemId;\n\tprivate MouseAdapter mouseAdapter \u003d null;\n\tprivate MouseAdapter hoverAdapter \u003d null;\n\n\tpublic SwapItemPanel(@Nullable Integer itemId, BufferedImage icon, ItemManager itemManager,\n\t\t\t\t\t\t ClientThread clientThread, FashionManager fashionManager, KitType slot,\n\t\t\t\t\t\t SearchOpener searchOpener)\n\t{\n\t\tsuper(itemId, icon, itemManager, clientThread);\n\t\tthis.slot \u003d slot;\n\t\tthis.itemId \u003d itemId;\n\t\tthis.fashionManager \u003d fashionManager;\n\t\tthis.searchOpener \u003d searchOpener;\n\t\t// Item details panel\n\t\tJPanel rightPanel \u003d new JPanel(new BorderLayout());\n\t\trightPanel.setBackground(nonHighlightColor);\n\t\trightPanel.setBorder(new EmptyBorder(0, 5, 0, 0));\n\t\thighlightPanels.add(rightPanel);\n\t\trightPanel.add(label, BorderLayout.CENTER);\n\t\tJPanel buttons \u003d new JPanel(new GridLayout(1, 2, 2, 0));\n\t\tbuttons.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\n\t\tlockButton \u003d new JButton();\n\t\tlockButton.setBorder(new EmptyBorder(0, 2, 0, 2));\n\t\tlockButton.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tlockButton.setPreferredSize(ICON_SIZE);\n\t\tlockButton.setFocusPainted(false);\n\t\tlockButton.setBorderPainted(false);\n\t\tlockButton.setContentAreaFilled(false);\n\t\tlockButton.addActionListener(e -\u003e {\n\t\t\tfashionManager.toggleItemLocked(slot);\n\t\t\tupdateLockButton();\n\t\t\tupdateXButton();\n\t\t});\n\t\tbuttons.add(lockButton);\n\n\t\txButton \u003d new JButton();\n\t\txButton.setPreferredSize(ICON_SIZE);\n\t\txButton.setBorder(new EmptyBorder(0, 2, 0, 2));\n\t\txButton.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\txButton.setFocusPainted(false);\n\t\txButton.setBorderPainted(false);\n\t\txButton.setContentAreaFilled(false);\n\t\txButton.setIcon(new ImageIcon(ImageUtil.loadImageResource(this.getClass(), \"x.png\")));\n\t\txButton.addActionListener(e -\u003e clientThread.invokeLater(() -\u003e {\n\t\t\tfashionManager.revertSlot(slot);\n\t\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\t\tupdateLockButton();\n\t\t\t\tupdateXButton();\n\t\t\t});\n\t\t}));\n\t\tbuttons.add(xButton);\n\n\t\tupdateLockButton();\n\t\tupdateXButton();\n\n\t\trightPanel.add(buttons, BorderLayout.EAST);\n\n\t\tadd(rightPanel, BorderLayout.CENTER);\n\n\t\tfashionManager.addEventListener(new ItemChangedListener(e -\u003e {\n\t\t\tif (e.getSlot() \u003d\u003d slot)\n\t\t\t{\n\t\t\t\tInteger newId \u003d e.getItemId();\n\t\t\t\tthis.itemId \u003d newId;\n\t\t\t\tsetItemName(newId);\n\t\t\t\tsetItemIcon(newId);\n\t\t\t\tresetMouseListeners();\n\t\t\t\tupdateXButton();\n\t\t\t}\n\t\t}));\n\n\t\tfashionManager.addEventListener(new LockChangedListener(e -\u003e {\n\t\t\tif (e.getSlot() \u003d\u003d slot \u0026\u0026 e.getType() !\u003d LockChanged.Type.KIT)\n\t\t\t{\n\t\t\t\tupdateLockButton();\n\t\t\t}\n\t\t}));\n\n\t\tresetMouseListeners();\n\t}\n\n\tprivate void resetMouseListeners()\n\t{\n\t\t// Somehow these listeners clear when the item changes, so they\u0027re refreshed like this (ugh)\n\t\ticon.removeMouseListener(mouseAdapter);\n\t\tmouseAdapter \u003d createOpenSearchClickListener();\n\t\ticon.addMouseListener(mouseAdapter);\n\t\ticon.setToolTipText(\"Open \" + slot.name().toLowerCase() + \" slot search\");\n\n\t\ticon.removeMouseListener(hoverAdapter);\n\t\txButton.removeMouseListener(hoverAdapter);\n\t\tlockButton.removeMouseListener(hoverAdapter);\n\t\thoverAdapter \u003d createHoverListener();\n\t\ticon.addMouseListener(hoverAdapter);\n\t\txButton.addMouseListener(hoverAdapter);\n\t\tlockButton.addMouseListener(hoverAdapter);\n\t}\n\n\tvoid updateLockButton()\n\t{\n\t\tboolean locked \u003d fashionManager.isItemLocked(slot);\n\t\tString lockIcon \u003d locked ? \"lock\" : \"unlock\";\n\t\tlockButton.setIcon(\n\t\t\tnew ImageIcon(ImageUtil.loadImageResource(this.getClass(), lockIcon + \".png\")));\n\t\tString action \u003d locked ? \"Unlock\" : \"Lock\";\n\t\tlockButton.setToolTipText(action + \" \" + slot.name().toLowerCase() + \" slot\");\n\t}\n\n\tvoid updateXButton()\n\t{\n\t\txButton.setEnabled(itemId !\u003d null);\n\t\txButton.setToolTipText(\"Clear \" + slot.name().toLowerCase() + \" slot\");\n\t}\n\n\tprivate MouseAdapter createOpenSearchClickListener()\n\t{\n\t\treturn new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mouseReleased(MouseEvent e)\n\t\t\t{\n\t\t\t\tsearchOpener.openSearchFor(slot);\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate MouseAdapter createHoverListener()\n\t{\n\t\treturn new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mouseEntered(MouseEvent e)\n\t\t\t{\n\t\t\t\tif (e.getComponent().isEnabled())\n\t\t\t\t{\n\t\t\t\t\tsetCursor(new Cursor(Cursor.HAND_CURSOR));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseExited(MouseEvent e)\n\t\t\t{\n\t\t\t\tsetCursor(new Cursor(Cursor.DEFAULT_CURSOR));\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate void setItemIcon(Integer itemId)\n\t{\n\t\tif (itemId !\u003d null \u0026\u0026 itemId \u003e\u003d 0)\n\t\t{\n\t\t\tclientThread.invokeLater(() -\u003e {\n\t\t\t\tItemComposition itemComposition \u003d itemManager.getItemComposition(itemId);\n\t\t\t\tAsyncBufferedImage image \u003d itemManager.getImage(itemComposition.getId());\n\t\t\t\timage.addTo(icon);\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBufferedImage image \u003d ImageUtil.loadImageResource(getClass(), slot.name().toLowerCase() + \".png\");\n\t\t\tsetIcon(icon, image);\n\t\t}\n\t}\n\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\panel\\SwapItemPanel.java"},{"fileName":"SwapsPanel.java","content":"package eq.uirs.fashionscape.panel;\n\nimport eq.uirs.fashionscape.core.FashionManager;\nimport eq.uirs.fashionscape.core.event.KnownKitChangedListener;\nimport java.awt.BorderLayout;\nimport java.awt.Dimension;\nimport java.awt.GridBagConstraints;\nimport java.awt.GridBagLayout;\nimport java.awt.Insets;\nimport java.awt.image.BufferedImage;\nimport java.util.ArrayList;\nimport java.util.Comparator;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Set;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\nimport javax.swing.SwingUtilities;\nimport javax.swing.border.EmptyBorder;\nimport lombok.Value;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.api.kit.KitType;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.util.ImageUtil;\nimport net.runelite.client.util.Text;\n\n/**\n * Tab panel that houses all equipment swaps and the main controls\n */\n@Slf4j\nclass SwapsPanel extends JPanel\n{\n\tprivate final FashionManager fashionManager;\n\tprivate final ItemManager itemManager;\n\tprivate final ClientThread clientThread;\n\tprivate final SearchOpener searchOpener;\n\n\tprivate final Set\u003cKitType\u003e unknownSlots \u003d new HashSet\u003c\u003e();\n\n\tprivate JPanel slotsPanel;\n\tprivate JPanel warningsPanel;\n\n\t@Value\n\tprivate static class SlotResult\n\t{\n\t\tKitType slot;\n\t\tInteger itemId;\n\t\tBufferedImage image;\n\t}\n\n\tpublic SwapsPanel(FashionManager fashionManager, ItemManager itemManager, SearchOpener searchOpener,\n\t\t\t\t\t  ClientThread clientThread)\n\t{\n\t\tthis.fashionManager \u003d fashionManager;\n\t\tthis.itemManager \u003d itemManager;\n\t\tthis.searchOpener \u003d searchOpener;\n\t\tthis.clientThread \u003d clientThread;\n\n\t\tsetLayout(new BorderLayout());\n\t\tsetBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tsetBorder(new EmptyBorder(5, 10, 5, 10));\n\n\t\tJPanel swapsPanel \u003d setUpContentPanel();\n\t\tJPanel scrollWrapper \u003d new JPanel(new BorderLayout());\n\t\tscrollWrapper.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tscrollWrapper.add(swapsPanel, BorderLayout.NORTH);\n\n\t\tJScrollPane scrollPane \u003d new JScrollPane(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED,\n\t\t\tJScrollPane.HORIZONTAL_SCROLLBAR_NEVER);\n\t\tscrollPane.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tscrollPane.getVerticalScrollBar().setPreferredSize(new Dimension(10, 0));\n\t\tscrollPane.setViewportView(scrollWrapper);\n\n\t\tadd(scrollPane, BorderLayout.CENTER);\n\n\t\tfashionManager.addEventListener(new KnownKitChangedListener(e -\u003e {\n\t\t\tKitType slot \u003d e.getSlot();\n\t\t\tif (e.isUnknown())\n\t\t\t{\n\t\t\t\tthis.unknownSlots.add(slot);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.unknownSlots.remove(slot);\n\t\t\t}\n\t\t\tSwingUtilities.invokeLater(this::refreshWarnings);\n\t\t}));\n\t}\n\n\tprivate JPanel setUpContentPanel()\n\t{\n\t\tJPanel contentContainer \u003d new JPanel();\n\t\tcontentContainer.setLayout(new GridBagLayout());\n\t\tcontentContainer.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tGridBagConstraints c \u003d new GridBagConstraints();\n\t\tc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\tc.insets \u003d new Insets(0, 1, 0, 1);\n\t\tc.weightx \u003d 1;\n\t\tc.weighty \u003d 1;\n\t\tc.gridx \u003d 0;\n\t\tc.gridy \u003d 0;\n\n\t\tslotsPanel \u003d new JPanel();\n\t\tslotsPanel.setLayout(new GridBagLayout());\n\t\tslotsPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tpopulateSwapSlots();\n\t\tcontentContainer.add(slotsPanel, c);\n\t\tc.gridy++;\n\n\t\twarningsPanel \u003d new JPanel();\n\t\twarningsPanel.setLayout(new GridBagLayout());\n\t\twarningsPanel.setBorder(new EmptyBorder(5, 5, 5, 5));\n\t\twarningsPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\trefreshWarnings();\n\t\tcontentContainer.add(warningsPanel, c);\n\n\t\treturn contentContainer;\n\t}\n\n\tprivate void populateSwapSlots()\n\t{\n\t\tclientThread.invokeLater(() -\u003e {\n\t\t\tList\u003cSlotResult\u003e slotResults \u003d new ArrayList\u003c\u003e();\n\t\t\tfor (PanelEquipSlot panelSlot : PanelEquipSlot.values())\n\t\t\t{\n\t\t\t\tKitType slot \u003d panelSlot.getKitType();\n\t\t\t\tif (slot \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tInteger itemId \u003d fashionManager.swappedItemIdIn(slot);\n\t\t\t\tBufferedImage image;\n\t\t\t\tif (itemId !\u003d null \u0026\u0026 itemId \u003e\u003d 0)\n\t\t\t\t{\n\t\t\t\t\tItemComposition itemComposition \u003d itemManager.getItemComposition(itemId);\n\t\t\t\t\timage \u003d itemManager.getImage(itemComposition.getId());\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\timage \u003d ImageUtil.loadImageResource(getClass(), slot.name().toLowerCase() + \".png\");\n\t\t\t\t}\n\t\t\t\tslotResults.add(new SlotResult(slot, itemId, image));\n\t\t\t}\n\t\t\tSwingUtilities.invokeLater(() -\u003e addSlotItemPanels(slotResults));\n\t\t});\n\t}\n\n\tprivate void addSlotItemPanels(List\u003cSlotResult\u003e results)\n\t{\n\t\tGridBagConstraints c \u003d new GridBagConstraints();\n\t\tc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\tc.anchor \u003d GridBagConstraints.PAGE_START;\n\t\tc.weightx \u003d 1;\n\t\tc.weighty \u003d 0;\n\t\tc.gridx \u003d 0;\n\t\tc.gridy \u003d 0;\n\n\t\tfor (SlotResult s : results)\n\t\t{\n\t\t\tSwapItemPanel itemPanel \u003d new SwapItemPanel(s.itemId, s.image, itemManager,\n\t\t\t\tclientThread, fashionManager, s.slot, searchOpener);\n\t\t\tJPanel marginWrapper \u003d new JPanel(new BorderLayout());\n\t\t\tmarginWrapper.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\t\tmarginWrapper.setBorder(new EmptyBorder(5, 0, 0, 0));\n\t\t\tmarginWrapper.add(itemPanel, BorderLayout.NORTH);\n\t\t\tslotsPanel.add(marginWrapper, c);\n\t\t\tc.gridy++;\n\t\t}\n\t}\n\n\tpublic void refreshWarnings()\n\t{\n\t\twarningsPanel.removeAll();\n\n\t\tif (!unknownSlots.isEmpty())\n\t\t{\n\t\t\tGridBagConstraints c \u003d new GridBagConstraints();\n\t\t\tc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\t\tc.anchor \u003d GridBagConstraints.PAGE_START;\n\t\t\tc.weightx \u003d 1;\n\t\t\tc.weighty \u003d 0;\n\t\t\tc.gridx \u003d 0;\n\t\t\tc.gridy \u003d 0;\n\n\t\t\tJLabel label \u003d new JLabel(\"\u003chtml\u003eSome base models can\u0027t be determined. Remove \" +\n\t\t\t\t\"some of your in-game equipment to detect them:\u003c/html\u003e\");\n\t\t\tlabel.setPreferredSize(new Dimension(100, 60));\n\t\t\tlabel.setForeground(ColorScheme.BRAND_ORANGE);\n\t\t\twarningsPanel.add(label, c);\n\t\t\tc.gridy++;\n\n\t\t\tunknownSlots.stream()\n\t\t\t\t.sorted(Comparator.comparing(KitType::name))\n\t\t\t\t.forEach(slot -\u003e {\n\t\t\t\t\tJLabel slotLabel \u003d new JLabel(Text.titleCase(slot));\n\t\t\t\t\tslotLabel.setForeground(ColorScheme.BRAND_ORANGE);\n\t\t\t\t\twarningsPanel.add(slotLabel, c);\n\t\t\t\t\tc.gridy++;\n\t\t\t\t});\n\t\t}\n\t\trevalidate();\n\t}\n\n}\n","filePath":"src\\main\\java\\eq\\uirs\\fashionscape\\panel\\SwapsPanel.java"},{"fileName":"FashionscapePluginTest.java","content":"package eq.uirs.fashionscape;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class FashionscapePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(FashionscapePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}\n","filePath":"src\\test\\java\\eq\\uirs\\fashionscape\\FashionscapePluginTest.java"}]},{"commit":"a5adb534ca9d06e89fabba5e272c98d0884490e2","repository":"https://github.com/jacwalste/chat-scroll-lock.git","internalName":"chat-scroll-lock","files":[{"fileName":"ChatScrollLockConfig.java","content":"package com.chatscrolllock;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"chatscrolllock\")\npublic interface ChatScrollLockConfig extends Config\n{\n\t@ConfigItem(\n\t\tkeyName \u003d \"enabled\",\n\t\tname \u003d \"Enable Scroll Lock\",\n\t\tdescription \u003d \"Freeze chat position when scrolled up\"\n\t)\n\tdefault boolean enabled()\n\t{\n\t\treturn true;\n\t}\n}\n","filePath":"src\\main\\java\\com\\chatscrolllock\\ChatScrollLockConfig.java"},{"fileName":"ChatScrollLockPlugin.java","content":"package com.chatscrolllock;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.ComponentID;\nimport net.runelite.api.events.BeforeRender;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Chat Scroll Lock\",\n\tdescription \u003d \"Freezes chat scroll position when scrolled up, preventing new messages from pushing you down\",\n\ttags \u003d {\"chat\", \"scroll\", \"freeze\", \"lock\", \"qol\"}\n)\npublic class ChatScrollLockPlugin extends Plugin\n{\n\t// Threshold for detecting \"scrolled up\" (larger \u003d easier to trigger lock)\n\tprivate static final int LOCK_THRESHOLD \u003d 15;\n\t// Threshold for detecting \"at bottom\" to unlock (smaller \u003d must be closer to bottom)\n\tprivate static final int UNLOCK_THRESHOLD \u003d 5;\n\t// Time window after chat message to restore scroll position (ms)\n\t// Outside this window, assume scroll changes are user-initiated\n\tprivate static final long RESTORE_WINDOW_MS \u003d 100;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ChatScrollLockConfig config;\n\n\tprivate int lockedScrollY \u003d -1;\n\tprivate boolean isLocked \u003d false;\n\tprivate long lastChatMessageTime \u003d 0;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tlog.debug(\"Chat Scroll Lock started\");\n\t\treset();\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tlog.debug(\"Chat Scroll Lock stopped\");\n\t\treset();\n\t}\n\n\tprivate void reset()\n\t{\n\t\tlockedScrollY \u003d -1;\n\t\tisLocked \u003d false;\n\t\tlastChatMessageTime \u003d 0;\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage event)\n\t{\n\t\t// Record when chat messages arrive so we know when to restore scroll\n\t\tlastChatMessageTime \u003d System.currentTimeMillis();\n\t}\n\n\t/**\n\t * Returns how far from the bottom of scrollable content we are.\n\t * 0 \u003d at absolute bottom, higher \u003d scrolled up more\n\t */\n\tprivate int getDistanceFromBottom(Widget chatbox)\n\t{\n\t\tint scrollY \u003d chatbox.getScrollY();\n\t\tint scrollHeight \u003d chatbox.getScrollHeight();\n\t\tint height \u003d chatbox.getHeight();\n\t\treturn Math.max(0, scrollHeight - height - scrollY);\n\t}\n\n\t/**\n\t * Check if near bottom using specified threshold\n\t */\n\tprivate boolean isNearBottom(Widget chatbox, int threshold)\n\t{\n\t\treturn getDistanceFromBottom(chatbox) \u003c\u003d threshold;\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event)\n\t{\n\t\tif (!config.enabled())\n\t\t{\n\t\t\treset();\n\t\t\treturn;\n\t\t}\n\n\t\tWidget chatbox \u003d client.getWidget(ComponentID.CHATBOX_MESSAGE_LINES);\n\t\tif (chatbox \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// Only handle initial lock detection here\n\t\t// BeforeRender handles everything else for smooth operation\n\t\tif (!isLocked \u0026\u0026 !isNearBottom(chatbox, LOCK_THRESHOLD))\n\t\t{\n\t\t\tisLocked \u003d true;\n\t\t\tlockedScrollY \u003d chatbox.getScrollY();\n\t\t}\n\t}\n\n\t/**\n\t * BeforeRender fires every frame (~60fps) right before the screen is drawn.\n\t * By correcting scroll position here, the user never sees the \"bounced\" state.\n\t */\n\t@Subscribe\n\tpublic void onBeforeRender(BeforeRender event)\n\t{\n\t\tif (!config.enabled() || !isLocked || lockedScrollY \u003c 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tWidget chatbox \u003d client.getWidget(ComponentID.CHATBOX_MESSAGE_LINES);\n\t\tif (chatbox \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tint scrollY \u003d chatbox.getScrollY();\n\n\t\t// Check if user scrolled to bottom - unlock\n\t\tif (isNearBottom(chatbox, UNLOCK_THRESHOLD))\n\t\t{\n\t\t\tisLocked \u003d false;\n\t\t\tlockedScrollY \u003d -1;\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if user scrolled further up - update lock position\n\t\t// (game auto-scroll always goes DOWN, so up-scroll is user intent)\n\t\tif (scrollY \u003c lockedScrollY)\n\t\t{\n\t\t\tlockedScrollY \u003d scrollY;\n\t\t\treturn;\n\t\t}\n\n\t\t// If scroll position increased, determine if it was game auto-scroll or user action\n\t\tif (scrollY \u003e lockedScrollY)\n\t\t{\n\t\t\tlong timeSinceMessage \u003d System.currentTimeMillis() - lastChatMessageTime;\n\n\t\t\t// If within time window after a chat message, this is likely game auto-scroll\n\t\t\t// Restore to locked position (user never sees the bounce)\n\t\t\tif (timeSinceMessage \u003c\u003d RESTORE_WINDOW_MS)\n\t\t\t{\n\t\t\t\tchatbox.setScrollY(lockedScrollY);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// Outside window - this is user scroll down, update lock position\n\t\t\t\tlockedScrollY \u003d scrollY;\n\t\t\t}\n\t\t}\n\t}\n\n\t@Provides\n\tChatScrollLockConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(ChatScrollLockConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\chatscrolllock\\ChatScrollLockPlugin.java"},{"fileName":"ChatScrollLockPluginTest.java","content":"package com.chatscrolllock;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ChatScrollLockPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(ChatScrollLockPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}\n","filePath":"src\\test\\java\\com\\chatscrolllock\\ChatScrollLockPluginTest.java"}]},{"commit":"20257d7b5e2bd23412be6a680e415c021da3516f","repository":"https://github.com/dekvall/runelite-external-plugins.git","internalName":"left-click-only","files":[{"fileName":"LeftClickOnlyPlugin.java","content":"/*\n * Copyright (c) 2019, dekvall \u003chttps://github.com/dekvall\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage dekvall.leftclickonly;\n\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.MenuEntry;\nimport net.runelite.api.events.MenuOpened;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.input.MouseManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Left Click Only\",\n\tdescription \u003d \"Only allow leftclicks\"\n)\npublic class LeftClickOnlyPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate RightClickConsumer rightClickConsumer;\n\n\t@Inject\n\tprivate MouseManager mouseManager;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tlog.info(\"Left Click Only started!\");\n\t\tmouseManager.registerMouseListener(rightClickConsumer);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tlog.info(\"Left Click Only stopped!\");\n\t\tmouseManager.unregisterMouseListener(rightClickConsumer);\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOpened(MenuOpened event)\n\t{\n\t\tMenuEntry first \u003d event.getFirstEntry();\n\t\tclient.setMenuEntries(new MenuEntry[]{first});\n\t}\n}\n","filePath":"src\\main\\java\\dekvall\\leftclickonly\\LeftClickOnlyPlugin.java"},{"fileName":"RightClickConsumer.java","content":"/*\n * Copyright (c) 2019, dekvall \u003chttps://github.com/dekvall\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage dekvall.leftclickonly;\n\nimport java.awt.event.MouseEvent;\nimport net.runelite.client.input.MouseAdapter;\n\npublic class RightClickConsumer extends MouseAdapter\n{\n\t@Override\n\tpublic MouseEvent mouseClicked(MouseEvent event)\n\t{\n\t\tif (event.getButton() !\u003d MouseEvent.BUTTON1)\n\t\t{\n\t\t\tevent.consume();\n\t\t}\n\t\treturn event;\n\t}\n\n\t@Override\n\tpublic MouseEvent mousePressed(MouseEvent event)\n\t{\n\t\tif (event.getButton() !\u003d MouseEvent.BUTTON1)\n\t\t{\n\t\t\tevent.consume();\n\t\t}\n\t\treturn event;\n\t}\n}\n","filePath":"src\\main\\java\\dekvall\\leftclickonly\\RightClickConsumer.java"},{"fileName":"LeftClickOnlyPluginTest.java","content":"package dekvall.leftclickonly;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class LeftClickOnlyPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(LeftClickOnlyPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\dekvall\\leftclickonly\\LeftClickOnlyPluginTest.java"}]},{"commit":"a6de6c1815d6e6b6b166211a372332c98003ddd1","repository":"https://github.com/JammaBro/Shop-Calculator.git","internalName":"shop-calculator","files":[{"fileName":"ShopCalculatorPlugin.java","content":"package com.shopcalculator;\n\nimport javax.inject.Inject;\nimport com.shopcalculator.utils.Icons;\nimport com.shopcalculator.ui.ShopCalculatorPanel;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Shop Calculator\",\n\tdescription \u003d \"Calculator for bulk buying costs from NPC shops\",\n\ttags \u003d {\"shop\", \"calculator\", \"item\"}\n)\n\npublic class ShopCalculatorPlugin extends Plugin {\n\t@Inject\n\tprivate ClientToolbar clientToolbar;\n\tprivate NavigationButton navButton;\n\n\t@Override\n\tprotected void startUp() {\n\t\t// Create and add the custom panel to the side panel\n\t\tShopCalculatorPanel panel \u003d new ShopCalculatorPanel();\n\n\t\tnavButton \u003d NavigationButton.builder()\n\t\t\t\t.tooltip(\"Shop Calculator\")\n\t\t\t\t.icon(Icons.NAV_BUTTON)\n\t\t\t\t.priority(10)\n\t\t\t\t.panel(panel)\n\t\t\t\t.build();\n\n\t\tclientToolbar.addNavigation(navButton);\n\t}\n\n\t@Override\n\tprotected void shutDown() {\n\t\t// Remove the custom panel from the side panel when the plugin is disabled\n\t\tclientToolbar.removeNavigation(navButton);\n\t}\n}\n","filePath":"src\\main\\java\\com\\shopcalculator\\ShopCalculatorPlugin.java"},{"fileName":"ShopCalculatorCalculate.java","content":"package com.shopcalculator.ui;\n\nimport java.util.LinkedHashMap;\nimport java.util.Map;\nimport static java.lang.Math.ceil;\nimport static java.lang.Math.floor;\n\npublic class ShopCalculatorCalculate {\n    public final Map\u003cString, Double\u003e values \u003d new LinkedHashMap\u003c\u003e();\n\n    public void calculateResults(String item_value, String shop_increase, String total_amount, String amount_per_world) {\n        double itemValue \u003d floor(parseDoubleOrDefault(item_value));\n        double shopIncrease \u003d parseDoubleOrDefault(shop_increase) * 0.01;\n        double totalAmount \u003d parseDoubleOrDefault(total_amount);\n        double amountPerWorld \u003d parseDoubleOrDefault(amount_per_world);\n        double costPerWorld \u003d 0;\n\n        // Calculation for total cost per hop for buying\n        for (int i \u003d 0; i \u003c amountPerWorld; i++) {\n            costPerWorld +\u003d floor(itemValue + (i * itemValue * shopIncrease));\n        }\n\n        values.put(\"avgCostPerItem\", costPerWorld / amountPerWorld);\n        values.put(\"worldHopsNeeded\", ceil(totalAmount / amountPerWorld));\n        values.put(\"totalCost\", floor(totalAmount / amountPerWorld * costPerWorld));\n    }\n\n    // Error handling and double parsing\n    private double parseDoubleOrDefault(String text ) {\n        if (text.isEmpty()) {\n            return 0;\n        } else {\n            try {\n                return Double.parseDouble(text);\n            } catch (NumberFormatException e) {\n                return 0;\n            }\n        }\n    }\n\n    // Error handling and integer parsing\n    private int parseIntegerOrDefault(String text) {\n        if (text.isEmpty()) {\n            return 0;\n        } else {\n            try {\n                return Integer.parseInt(text);\n            } catch (NumberFormatException e) {\n                return 0;\n            }\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\shopcalculator\\ui\\ShopCalculatorCalculate.java"},{"fileName":"ShopCalculatorPanel.java","content":"package com.shopcalculator.ui;\n\nimport net.runelite.client.ui.PluginPanel;\nimport javax.swing.*;\nimport javax.swing.text.*;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.text.NumberFormat;\nimport java.util.Locale;\n\npublic class ShopCalculatorPanel extends PluginPanel {\n    private final NumberFormat numberFormat;\n    private final ShopCalculatorCalculate Results \u003d new ShopCalculatorCalculate();\n\n    public ShopCalculatorPanel() {\n        setLayout(new GridBagLayout());\n\n        // Create a NumberFormat instance with US locale to use comma as thousands separator\n        numberFormat \u003d NumberFormat.getNumberInstance(Locale.US);\n\n        // Create and configure input fields\n        JTextField itemValueField \u003d new JTextField(\"0\",10);\n        JTextField shopIncreaseField \u003d new JTextField(\"1\",10);\n        JTextField totalAmountField \u003d new JTextField(\"0\", 10);\n        JTextField amountPerWorldField \u003d new JTextField(\"10\", 10);\n\n        // Set document filters for the text fields to allow integers only\n        ((AbstractDocument) itemValueField.getDocument()).setDocumentFilter(new NumericFilter());\n        ((AbstractDocument) shopIncreaseField.getDocument()).setDocumentFilter(new NumericFilter());\n        ((AbstractDocument) totalAmountField.getDocument()).setDocumentFilter(new NumericFilter());\n        ((AbstractDocument) amountPerWorldField.getDocument()).setDocumentFilter(new NumericFilter());\n\n        // Create result labels\n        JLabel avgCostPerItemLabel \u003d new JLabel();\n        JLabel worldHopsNeededLabel \u003d new JLabel();\n        JLabel totalCostLabel \u003d new JLabel();\n\n        // Create the \"Calculate\" button and add a listener to handle the click event\n        JButton calculateButton \u003d new JButton(\"Calculate\");\n        calculateButton.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                Results.calculateResults(itemValueField.getText(),\n                                         shopIncreaseField.getText(),\n                                         totalAmountField.getText(),\n                                         amountPerWorldField.getText());\n\n                // Get values from the calculator to the results labels\n                avgCostPerItemLabel.setText(formatNumber(Results.values.get(\"avgCostPerItem\")) + \" gp\");\n                worldHopsNeededLabel.setText(formatNumber(Results.values.get(\"worldHopsNeeded\")));\n                totalCostLabel.setText(formatNumber(Results.values.get(\"totalCost\")) + \" gp\");\n            }\n        });\n\n        // Create a helper method to add components with specified coordinates\n        GridBagConstraints gbc \u003d new GridBagConstraints();\n        gbc.insets \u003d new Insets(2, 2, 2, 2);\n\n        // Create components aligned to left\n        gbc.anchor \u003d GridBagConstraints.WEST;\n        gbc.fill \u003d GridBagConstraints.HORIZONTAL;\n        addComponent(new JLabel(\"Base item value\"), 0, 0, gbc);\n        addComponent(new JLabel(\"Change per (%)\"), 0, 1, gbc);\n        addComponent(new JLabel(\"Amount to buy\"), 2, 0, gbc);\n        addComponent(new JLabel(\"Amount per world\"), 2, 1, gbc);\n        addComponent(new JLabel(\"Average per item\"),9,0, gbc);\n        addComponent(new JLabel(\"Total world hops\"),11,0, gbc);\n        addComponent(new JLabel(\"Total cost\"),13,0, gbc);\n\n        // Create components aligned to center\n        gbc.anchor \u003d GridBagConstraints.CENTER;\n        gbc.fill \u003d GridBagConstraints.HORIZONTAL;\n        addComponent(itemValueField, 1, 0, gbc);\n        addComponent(shopIncreaseField, 1, 1, gbc);\n        addComponent(totalAmountField, 3, 0, gbc);\n        addComponent(amountPerWorldField, 3, 1, gbc);\n        addComponent(avgCostPerItemLabel, 9, 1, gbc);\n        addComponent(worldHopsNeededLabel, 11,1, gbc);\n        addComponent(totalCostLabel, 13, 1, gbc);\n\n        // Create components that span 2 columns\n        gbc.gridwidth \u003d 2;\n        gbc.anchor \u003d GridBagConstraints.CENTER;\n        gbc.fill \u003d GridBagConstraints.HORIZONTAL;\n        addComponent(calculateButton, 7, 0, gbc);\n        addComponent(new JSeparator(),8, 0, gbc);\n        addComponent(new JSeparator(),10, 0, gbc);\n        addComponent(new JSeparator(),12, 0, gbc);\n        addComponent(new JSeparator(),14, 0, gbc);\n\n    }\n\n    private void addComponent(Component component, int gridY, int gridX, GridBagConstraints gbc) {\n        gbc.gridy \u003d gridY;\n        gbc.gridx \u003d gridX;\n        add(component, gbc);\n    }\n\n    private String formatNumber(double number) {\n        return numberFormat.format(number);\n    }\n\n    // Filtering for text fields to allow only numerics in them\n    private static class NumericFilter extends DocumentFilter {\n        @Override\n        public void insertString(FilterBypass fb, int offset, String string, AttributeSet attr) throws BadLocationException {\n            StringBuilder sb \u003d new StringBuilder(string);\n            for (int i \u003d sb.length() - 1; i \u003e\u003d 0; i--) {\n                char c \u003d sb.charAt(i);\n                if (!Character.isDigit(c) \u0026\u0026 c !\u003d \u0027.\u0027) {\n                    sb.deleteCharAt(i);\n                }\n            }\n            super.insertString(fb, offset, sb.toString(), attr);\n        }\n\n        @Override\n        public void replace(FilterBypass fb, int offset, int length, String text, AttributeSet attrs) throws BadLocationException {\n            StringBuilder sb \u003d new StringBuilder(text);\n            for (int i \u003d sb.length() - 1; i \u003e\u003d 0; i--) {\n                char c \u003d sb.charAt(i);\n                if (!Character.isDigit(c) \u0026\u0026 c !\u003d \u0027.\u0027) {\n                    sb.deleteCharAt(i);\n                }\n            }\n            super.replace(fb, offset, length, sb.toString(), attrs);\n        }\n    }\n}\n\n","filePath":"src\\main\\java\\com\\shopcalculator\\ui\\ShopCalculatorPanel.java"},{"fileName":"Icons.java","content":"package com.shopcalculator.utils;\n\nimport net.runelite.client.util.ImageUtil;\nimport java.awt.image.BufferedImage;\n\npublic class Icons {\n    public static final BufferedImage NAV_BUTTON \u003d ImageUtil.loadImageResource(Icons.class, \"/nav_button.png\");\n}\n","filePath":"src\\main\\java\\com\\shopcalculator\\utils\\Icons.java"},{"fileName":"ShopCalculator.java","content":"package com.shopcalculator;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ShopCalculator\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(ShopCalculatorPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\shopcalculator\\ShopCalculator.java"}]},{"commit":"5eae5d3dcca38fd019b3770a267e8b525f8d192a","repository":"https://github.com/robrichardson13/alch-blocker.git","internalName":"alch-blocker","files":[{"fileName":"AlchBlockerConfig.java","content":"package io.robrichardson.alchblocker;\n\nimport io.robrichardson.alchblocker.config.DisplayType;\nimport io.robrichardson.alchblocker.config.ListType;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(AlchBlockerConfig.GROUP)\npublic interface AlchBlockerConfig extends Config\n{\n\tString GROUP \u003d \"AlchBlocker\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"contextMenuEnabled\",\n\t\tname \u003d \"Context menu add item\",\n\t\tdescription \u003d \"Allow right clicking an item to add to the list.\",\n\t\tposition \u003d 0\n\t)\n\tdefault boolean contextMenuEnabled()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"displayType\",\n\t\tname \u003d \"Display type\",\n\t\tdescription \u003d \"How do you want the blacklisted items shown. (explorer ring only supports transparent)\",\n\t\tposition \u003d 1\n\t)\n\tdefault DisplayType displayType()\n\t{\n\t\treturn DisplayType.TRANSPARENT;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"listType\",\n\t\tname \u003d \"List type\",\n\t\tdescription \u003d \"Blacklist will block the items in the list below from being alched. Whitelist only allows the items in the list below to be alched.\",\n\t\tposition \u003d 2\n\t)\n\tdefault ListType listType()\n\t{\n\t\treturn ListType.BLACKLIST;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"itemList\",\n\t\tname \u003d \"Item list\",\n\t\tdescription \u003d \"Configures the list of items to block or unblock from being alched. Format: (item), (item). Example: fire rune, prayer potion*\",\n\t\tposition \u003d 3\n\t)\n\tdefault String itemList()\n\t{\n\t\treturn \"*Rune Pouch\\n*(1)\\n*(2)\\n*(3)\\n*(4)\\n\";\n\t}\n}\n","filePath":"src\\main\\java\\io\\robrichardson\\alchblocker\\AlchBlockerConfig.java"},{"fileName":"AlchBlockerPlugin.java","content":"package io.robrichardson.alchblocker;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Objects;\nimport java.util.Set;\nimport java.util.stream.Collectors;\n\nimport javax.inject.Inject;\n\nimport com.google.inject.Provides;\n\nimport io.robrichardson.alchblocker.config.DisplayType;\nimport io.robrichardson.alchblocker.config.ListType;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.MenuAction;\nimport net.runelite.api.MenuEntry;\nimport net.runelite.api.ScriptID;\nimport net.runelite.api.events.MenuOpened;\nimport net.runelite.api.events.MenuOptionClicked;\nimport net.runelite.api.events.ScriptPostFired;\nimport net.runelite.api.events.WidgetClosed;\nimport net.runelite.api.events.WidgetLoaded;\nimport net.runelite.api.widgets.ComponentID;\nimport net.runelite.api.widgets.InterfaceID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.util.Text;\nimport net.runelite.client.util.WildcardMatcher;\n\n@Slf4j\n@PluginDescriptor(\n\t\tname \u003d \"Alch Blocker\"\n)\npublic class AlchBlockerPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Inject\n\tprivate AlchBlockerConfig config;\n\n\tSet\u003cString\u003e exactMatches \u003d new HashSet\u003c\u003e();\n\tList\u003cString\u003e wildcardPatterns \u003d new ArrayList\u003c\u003e();\n\tMap\u003cInteger, Boolean\u003e blockedItemCache \u003d new HashMap\u003c\u003e();\n\tSet\u003cInteger\u003e hiddenItems \u003d new HashSet\u003c\u003e();\n\n\t// Widget IDs for alchemy spells (from InterfaceID.MagicSpellbook)\n\tprivate static final int HIGH_ALCHEMY_WIDGET_ID \u003d 0x00da_002c;\n\tprivate static final int LOW_ALCHEMY_WIDGET_ID \u003d 0x00da_0015;\n\n\t@Override\n\tprotected void startUp() throws Exception {\n\t\tparseItemList();\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception {\n\t\tclientThread.invoke(this::showBlockedItems);\n\t}\n\n\t@Provides\n\tAlchBlockerConfig provideConfig(ConfigManager configManager) {\n\t\treturn configManager.getConfig(AlchBlockerConfig.class);\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event) {\n\t\tif (!AlchBlockerConfig.GROUP.equals(event.getGroup())) return;\n\t\tparseItemList();\n\t\tblockedItemCache.clear();\n\t\tclientThread.invokeAtTickEnd(this::updateItemVisibility);\n\t}\n\n\t@Subscribe()\n\tpublic void onMenuOptionClicked(MenuOptionClicked event) {\n\t\tString menuTarget \u003d Text.removeTags(event.getMenuTarget());\n\t\t// did you just click an item to try to alch it (\"High-Alchemy \u003citem\u003e\" from explorer\u0027s ring, \"Cast High Level Alchemy -\u003e \u003citem\u003e\" from spell)\n\t\tboolean tryingToAlch \u003d event.getMenuOption().contains(\"-Alchemy\") || (event.getMenuOption().equals(\"Cast\") \u0026\u0026 menuTarget.contains(\"Alchemy -\u003e\"));\n\t\tif (tryingToAlch \u0026\u0026 hiddenItems.contains(event.getItemId())) {\n\t\t\tevent.consume();\n\t\t}\n\t\t// Check spell state after any click (handles clicking blank spot to cancel)\n\t\tclientThread.invokeAtTickEnd(this::updateItemVisibility);\n\t}\n\n\t@Subscribe\n\tprivate void onScriptPostFired(ScriptPostFired event) {\n\t\tif (event.getScriptId() \u003d\u003d ScriptID.INVENTORY_DRAWITEM) {\n\t\t\t// Use invokeAtTickEnd to check spell selection after the client state is updated\n\t\t\tclientThread.invokeAtTickEnd(this::updateItemVisibility);\n\t\t}\n\t}\n\n\tprivate void updateItemVisibility() {\n\t\tif (isAlchSpellSelected() || isExplorerRingOpen()) {\n\t\t\thideBlockedItems();\n\t\t} else {\n\t\t\tshowBlockedItems();\n\t\t}\n\t}\n\n\tprivate boolean isAlchSpellSelected() {\n\t\tWidget selectedWidget \u003d client.getSelectedWidget();\n\t\tif (selectedWidget \u003d\u003d null) {\n\t\t\treturn false;\n\t\t}\n\t\tint widgetId \u003d selectedWidget.getId();\n\t\treturn widgetId \u003d\u003d HIGH_ALCHEMY_WIDGET_ID || widgetId \u003d\u003d LOW_ALCHEMY_WIDGET_ID;\n\t}\n\n\tprivate boolean isExplorerRingOpen() {\n\t\treturn client.getWidget(ComponentID.EXPLORERS_RING_INVENTORY) !\u003d null;\n\t}\n\n\t@Subscribe\n\tprivate void onWidgetLoaded(WidgetLoaded event) {\n\t\tif (event.getGroupId() \u003d\u003d InterfaceID.EXPLORERS_RING) {\n\t\t\tclientThread.invokeAtTickEnd(this::hideBlockedItems);\n\t\t}\n\t}\n\n\t@Subscribe\n\tprivate void onWidgetClosed(WidgetClosed event) {\n\t\tif (event.getGroupId() \u003d\u003d InterfaceID.EXPLORERS_RING) {\n\t\t\tshowBlockedItems();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOpened(final MenuOpened event)\n\t{\n\t\t// If the user has decided to disable the context menu, no need to process further\n\t\tif (!config.contextMenuEnabled()) {\n\t\t\treturn;\n\t\t}\n\n\t\tfinal MenuEntry[] entries \u003d event.getMenuEntries();\n\t\tfor (int idx \u003d entries.length - 1; idx \u003e\u003d 0; --idx)\n\t\t{\n\t\t\tfinal MenuEntry entry \u003d entries[idx];\n\t\t\tfinal Widget w \u003d entry.getWidget();\n\n\t\t\tif (w !\u003d null \u0026\u0026 w.getItemId() \u003e -1)\n\t\t\t{\n\t\t\t\tif (entry.getOption().contains(\"-Alchemy\") || (entry.getOption().equals(\"Cast\") \u0026\u0026 entry.getTarget().contains(\"Level Alchemy\"))) {\n\t\t\t\t\t// Item already in block list, no need to add menu item\n\t\t\t\t\tif (\n\t\t\t\t\t\t(hiddenItems.contains(w.getItemId()) \u0026\u0026 config.listType() \u003d\u003d ListType.BLACKLIST) ||\n\t\t\t\t\t\t(!hiddenItems.contains(w.getItemId()) \u0026\u0026 config.listType() \u003d\u003d ListType.WHITELIST)\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tfinal String itemName \u003d w.getName();\n\n\t\t\t\t\tclient.createMenuEntry(idx)\n\t\t\t\t\t\t.setOption(config.listType() \u003d\u003d ListType.BLACKLIST ? \"Blacklist Alchemy\" : \"Whitelist Alchemy\")\n\t\t\t\t\t\t.setTarget(itemName)\n\t\t\t\t\t\t.setType(MenuAction.RUNELITE)\n\t\t\t\t\t\t.onClick(e -\u003e\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconfigManager.setConfiguration(AlchBlockerConfig.GROUP, \"itemList\", config.itemList().concat(\"\\n\" + Text.removeTags(itemName)));\n\t\t\t\t\t\t\tshowBlockedItems();\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void hideBlockedItems() {\n\t\tWidget inventory \u003d client.getWidget(ComponentID.EXPLORERS_RING_INVENTORY);\n\t\tif (inventory \u003d\u003d null) {\n\t\t\tinventory \u003d client.getWidget(ComponentID.INVENTORY_CONTAINER);\n\t\t\tif (inventory \u003d\u003d null) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tfor (Widget inventoryItem : Objects.requireNonNull(inventory.getChildren())) {\n\t\t\tint itemId \u003d inventoryItem.getItemId();\n\t\t\tboolean shouldBlock;\n\n\t\t\t// Check cache first for O(1) lookup\n\t\t\tif (blockedItemCache.containsKey(itemId)) {\n\t\t\t\tshouldBlock \u003d blockedItemCache.get(itemId);\n\t\t\t} else {\n\t\t\t\tString itemName \u003d Text.removeTags(inventoryItem.getName()).toLowerCase();\n\t\t\t\tboolean matchesPattern \u003d isItemInBlockList(itemName);\n\t\t\t\tshouldBlock \u003d (config.listType() \u003d\u003d ListType.BLACKLIST) \u003d\u003d matchesPattern;\n\t\t\t\tblockedItemCache.put(itemId, shouldBlock);\n\t\t\t}\n\n\t\t\tif (shouldBlock) {\n\t\t\t\tif (config.displayType() \u003d\u003d DisplayType.TRANSPARENT || ComponentID.EXPLORERS_RING_INVENTORY \u003d\u003d inventory.getId()) {\n\t\t\t\t\tinventoryItem.setOpacity(200);\n\t\t\t\t} else {\n\t\t\t\t\tinventoryItem.setHidden(true);\n\t\t\t\t}\n\t\t\t\thiddenItems.add(itemId);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate boolean isItemInBlockList(String itemName) {\n\t\t// O(1) lookup for exact matches\n\t\tif (exactMatches.contains(itemName)) {\n\t\t\treturn true;\n\t\t}\n\t\t// Only iterate wildcard patterns (typically much smaller)\n\t\tfor (String pattern : wildcardPatterns) {\n\t\t\tif (WildcardMatcher.matches(pattern, itemName)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate void showBlockedItems() {\n\t\tif(hiddenItems.isEmpty()) {\n\t\t\treturn;\n\t\t}\n\n\t\tWidget inventory \u003d client.getWidget(ComponentID.EXPLORERS_RING_INVENTORY);\n\t\tif (inventory \u003d\u003d null) {\n\t\t\tinventory \u003d client.getWidget(ComponentID.INVENTORY_CONTAINER);\n\t\t\tif (inventory \u003d\u003d null) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tfor (Widget inventoryItem : Objects.requireNonNull(inventory.getChildren())) {\n\t\t\tif(hiddenItems.contains(inventoryItem.getItemId())) {\n\t\t\t\tif (config.displayType() \u003d\u003d DisplayType.TRANSPARENT || ComponentID.EXPLORERS_RING_INVENTORY \u003d\u003d inventory.getId()) {\n\t\t\t\t\tinventoryItem.setOpacity(0);\n\t\t\t\t} else {\n\t\t\t\t\tinventoryItem.setHidden(false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\thiddenItems.clear();\n\t}\n\n\tprivate void parseItemList() {\n\t\texactMatches.clear();\n\t\twildcardPatterns.clear();\n\n\t\tfor (String listItem : config.itemList().split(\"\\n\")) {\n\t\t\tif (listItem.trim().isEmpty()) continue;\n\n\t\t\tif (listItem.contains(\",\")) {\n\t\t\t\t// For backwards compatibility, supports csv and line separated\n\t\t\t\tSet\u003cString\u003e csvSet \u003d Text.fromCSV(listItem).stream()\n\t\t\t\t\t\t.map(String::toLowerCase)\n\t\t\t\t\t\t.collect(Collectors.toSet());\n\t\t\t\tfor (String item : csvSet) {\n\t\t\t\t\taddToAppropriateCollection(item);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\taddToAppropriateCollection(listItem.toLowerCase().trim());\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void addToAppropriateCollection(String item) {\n\t\tif (item.contains(\"*\")) {\n\t\t\twildcardPatterns.add(item);\n\t\t} else {\n\t\t\texactMatches.add(item);\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\io\\robrichardson\\alchblocker\\AlchBlockerPlugin.java"},{"fileName":"DisplayType.java","content":"package io.robrichardson.alchblocker.config;\n\npublic enum DisplayType {\n    TRANSPARENT,\n    HIDDEN\n}\n","filePath":"src\\main\\java\\io\\robrichardson\\alchblocker\\config\\DisplayType.java"},{"fileName":"ListType.java","content":"package io.robrichardson.alchblocker.config;\n\npublic enum ListType {\n    BLACKLIST,\n    WHITELIST\n}\n","filePath":"src\\main\\java\\io\\robrichardson\\alchblocker\\config\\ListType.java"},{"fileName":"AlchBlockerPluginTest.java","content":"package io.robrichardson.alchblocker;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class AlchBlockerPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(AlchBlockerPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\io\\robrichardson\\alchblocker\\AlchBlockerPluginTest.java"}]},{"commit":"a13f8dee6a422b22e67ee869dd5ec219f6ab44f9","repository":"https://github.com/coopermor/ardougne-cooldown-timer.git","internalName":"ardougne-cooldown-timer","files":[{"fileName":"ArdougneCooldownTimerConfig.java","content":"package com.coopermor.ardougnetimer;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.Notification;\n\n@ConfigGroup(\"ardougnecooldowntimer\")\npublic interface ArdougneCooldownTimerConfig extends Config\n{\n\t@ConfigItem(\n\t\tkeyName \u003d \"sendNotification\",\n\t\tname \u003d \"Notify on timer expired\",\n\t\tdescription \u003d \"Notify when the timer hits 0\",\n\t\tposition \u003d 1\n\t)\n\tdefault Notification sendNotification()\n\t{\n\t\treturn Notification.OFF;\n\t}\n}\n","filePath":"src\\main\\java\\com\\coopermor\\ardougnetimer\\ArdougneCooldownTimerConfig.java"},{"fileName":"ArdougneCooldownTimerPlugin.java","content":"package com.coopermor.ardougnetimer;\n\nimport com.google.inject.Provides;\nimport java.awt.image.BufferedImage;\nimport java.time.Duration;\nimport java.time.Instant;\nimport javax.inject.Inject;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.StatChanged;\nimport static net.runelite.api.Skill.AGILITY;\nimport net.runelite.client.Notifier;\nimport net.runelite.api.gameval.ItemID;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.infobox.InfoBoxManager;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Ardougne Cooldown Timer\"\n)\npublic class ArdougneCooldownTimerPlugin extends Plugin\n{\n\tprivate static final Duration LAP_COOLDOWN \u003d Duration.ofMinutes(3);\n\t@Inject\n\tprivate Client client;\n\t@Inject\n\tprivate ItemManager itemManager;\n\t@Inject\n\tprivate InfoBoxManager infoBoxManager;\n\t@Inject\n\tprivate Notifier notifier;\n\n\t@Inject\n\tprivate ArdougneCooldownTimerConfig config;\n\n\t@Getter\n\tprivate Instant endTime;\n\tprivate boolean notifyOnce;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tremoveTimer();\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tremoveTimer();\n\t}\n\n\tprivate void removeTimer()\n\t{\n\t\tinfoBoxManager.removeIf(t -\u003e t instanceof LapTimer);\n\t\tendTime \u003d null;\n\t\tnotifyOnce \u003d false;\n\t}\n\n\tprivate void createTimer()\n\t{\n\t\tremoveTimer();\n\t\tendTime \u003d Instant.now().plus(LAP_COOLDOWN);\n\t\tBufferedImage image \u003d itemManager.getImage(ItemID.GRACE);\n\t\tinfoBoxManager.addInfoBox(new LapTimer(LAP_COOLDOWN, image, this));\n\t\tnotifyOnce \u003d true;\n\t}\n\n\n\t@Subscribe\n\tpublic void onStatChanged(StatChanged statChanged)\n\t{\n\t\tif (statChanged.getSkill() !\u003d AGILITY)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif(client.getLocalPlayer().getWorldLocation().equals(new WorldPoint(2668, 3297, 0)))\n\t\t{\n\t\t\tcreateTimer();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event)\n\t{\n\t\tif(endTime !\u003d null \u0026\u0026 Instant.now().isAfter(endTime))\n\t\t{\n\t\t\tif(notifyOnce )\n\t\t\t{\n\t\t\t\tnotifier.notify(config.sendNotification(), \"Ardougne lap cooldown expired.\");\n\t\t\t\tnotifyOnce \u003d false;\n\t\t\t}\n\t\t\tremoveTimer();\n\t\t}\n\t}\n\n\t@Provides\n\tArdougneCooldownTimerConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(ArdougneCooldownTimerConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\coopermor\\ardougnetimer\\ArdougneCooldownTimerPlugin.java"},{"fileName":"LapTimer.java","content":"package com.coopermor.ardougnetimer;\n\nimport java.awt.Color;\nimport java.awt.image.BufferedImage;\nimport java.time.Duration;\nimport java.time.Instant;\nimport java.time.temporal.ChronoUnit;\nimport net.runelite.client.ui.overlay.infobox.InfoBoxPriority;\nimport net.runelite.client.ui.overlay.infobox.Timer;\n\npublic class LapTimer extends Timer\n{\n\tprivate final ArdougneCooldownTimerPlugin plugin;\n\n\tint ticks;\n\n\tLapTimer(Duration duration, BufferedImage image, ArdougneCooldownTimerPlugin plugin)\n\t{\n\t\tsuper(duration.toMillis(), ChronoUnit.MILLIS, image, plugin);\n\t\tthis.plugin \u003d plugin;\n\t\tsetPriority(InfoBoxPriority.MED);\n\t}\n\n\t@Override\n\tpublic Color getTextColor()\n\t{\n\t\treturn Color.WHITE;\n\t}\n}\n","filePath":"src\\main\\java\\com\\coopermor\\ardougnetimer\\LapTimer.java"},{"fileName":"ArdougneCooldownTimerPluginTest.java","content":"package com.coopermor.ardougnetimer;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ArdougneCooldownTimerPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(ArdougneCooldownTimerPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\coopermor\\ardougnetimer\\ArdougneCooldownTimerPluginTest.java"}]},{"commit":"efe38d1089ed318bdf75d94b695494ac62f6a4c3","repository":"https://github.com/Notloc/runelite-target-true-tile.git","internalName":"target-true-tile","files":[{"fileName":"BorderStyle.java","content":"package com.notloc.targettruetile;\n\npublic enum BorderStyle {\n    OUTLINE,\n    CORNERS\n}\n","filePath":"src\\main\\java\\com\\notloc\\targettruetile\\BorderStyle.java"},{"fileName":"ImprovedTileIndicatorsUtil.java","content":"/*\n * Copyright (c) 2021, LeikvollE\n * Copyright (c) 2018, Tomas Slusny \u003cslusnucky@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.notloc.targettruetile;\n\nimport java.awt.*;\nimport java.util.*;\nimport java.util.List;\n\nimport net.runelite.api.*;\nimport net.runelite.api.coords.LocalPoint;\n\n// Adapted from Improved Tile Indicators\n// https://github.com/LeikvollE/tileindicators\n\n// Allows us to display tile indicators beneath actors\npublic class ImprovedTileIndicatorsUtil {\n\n    public static void removePlayerFast(final Client client, final Graphics2D graphics, final Player player, final List\u003cPolygon\u003e filter) {\n        final int localZ \u003d Perspective.getFootprintTileHeight(client, player.getLocalLocation(), client.getTopLevelWorldView().getPlane(), player.getFootprintSize()) - player.getAnimationHeightOffset();\n        removeActorFast(client, graphics, player, localZ, filter);\n    }\n\n    public static void removeNpcFast(final Client client, final Graphics2D graphics, final NPC npc, final List\u003cPolygon\u003e filter) {\n        final int localZ \u003d Perspective.getFootprintTileHeight(client, npc.getLocalLocation(), client.getTopLevelWorldView().getPlane(), npc.getComposition().getFootprintSize()) - npc.getAnimationHeightOffset();\n        removeActorFast(client, graphics, npc, localZ, filter);\n    }\n\n    private static void removeActorFast(final Client client, final Graphics2D graphics, final Actor actor, final int localZ, final List\u003cPolygon\u003e filter) {\n        WorldView worldView \u003d client.getTopLevelWorldView();\n        if (worldView \u003d\u003d null) {\n            return;\n        }\n\n        final int clipX1 \u003d client.getViewportXOffset();\n        final int clipY1 \u003d client.getViewportYOffset();\n        final int clipX2 \u003d client.getViewportWidth() + clipX1;\n        final int clipY2 \u003d client.getViewportHeight() + clipY1;\n        Object origAA \u003d graphics.getRenderingHint(RenderingHints.KEY_ANTIALIASING);\n        graphics.setRenderingHint(\n                RenderingHints.KEY_ANTIALIASING,\n                RenderingHints.VALUE_ANTIALIAS_OFF);\n        Model model \u003d actor.getModel();\n        if (model \u003d\u003d null) {\n            return;\n        }\n\n        int vCount \u003d model.getVerticesCount();\n        float[] x3d \u003d model.getVerticesX();\n        float[] y3d \u003d model.getVerticesY();\n        float[] z3d \u003d model.getVerticesZ();\n\n        int[] x2d \u003d new int[vCount];\n        int[] y2d \u003d new int[vCount];\n\n        final LocalPoint lp \u003d actor.getLocalLocation();\n\n        final int localX \u003d lp.getX();\n        final int localY \u003d lp.getY();\n\n        int rotation \u003d actor.getCurrentOrientation();\n\n        Perspective.modelToCanvas(client, vCount, localX, localY, localZ, rotation, x3d, z3d, y3d, x2d, y2d);\n\n        boolean anyVisible \u003d false;\n\n        for (int i \u003d 0; i \u003c vCount; i++) {\n            int x \u003d x2d[i];\n            int y \u003d y2d[i];\n\n            boolean visibleX \u003d x \u003e\u003d clipX1 \u0026\u0026 x \u003c clipX2;\n            boolean visibleY \u003d y \u003e\u003d clipY1 \u0026\u0026 y \u003c clipY2;\n            anyVisible |\u003d visibleX \u0026\u0026 visibleY;\n        }\n\n        if (!anyVisible) return;\n\n        int tCount \u003d model.getFaceCount();\n        int[] tx \u003d model.getFaceIndices1();\n        int[] ty \u003d model.getFaceIndices2();\n        int[] tz \u003d model.getFaceIndices3();\n\n        final byte[] triangleTransparencies \u003d model.getFaceTransparencies();\n\n        Composite orig \u003d graphics.getComposite();\n        graphics.setComposite(AlphaComposite.Clear);\n        graphics.setColor(Color.WHITE);\n\n        // We do our best to batch the triangles into as few polygons as possible to reduce the number of draw calls\n        PolygonBuilder polyBuilder \u003d new PolygonBuilder();\n\n        for (int i \u003d 0; i \u003c tCount; i++) {\n            // Cull tris facing away from the camera\n            if (getTriDirection(x2d[tx[i]], y2d[tx[i]], x2d[ty[i]], y2d[ty[i]], x2d[tz[i]], y2d[tz[i]]) \u003e\u003d 0)\n            {\n                continue;\n            }\n\n            // Cull tris that are not in the filter\n            if (!isTriInsideFilter(x2d[tx[i]], y2d[tx[i]], x2d[ty[i]], y2d[ty[i]], x2d[tz[i]], y2d[tz[i]], filter))\n            {\n                continue;\n            }\n\n            if (triangleTransparencies \u003d\u003d null || (triangleTransparencies[i] \u0026 255) \u003c 254) {\n                polyBuilder.addTriangle(\n                        x2d[tx[i]], y2d[tx[i]],\n                        x2d[ty[i]], y2d[ty[i]],\n                        x2d[tz[i]], y2d[tz[i]]\n                );\n            }\n        }\n\n        for (Polygon polygon : polyBuilder.getPolygons()) {\n            graphics.fill(polygon);\n        }\n\n        graphics.setComposite(orig);\n        graphics.setRenderingHint(\n                RenderingHints.KEY_ANTIALIASING,\n                origAA);\n    }\n\n    private static int getTriDirection(int x1, int y1, int x2, int y2, int x3, int y3) {\n        int x4 \u003d x2 - x1;\n        int y4 \u003d y2 - y1;\n        int x5 \u003d x3 - x1;\n        int y5 \u003d y3 - y1;\n        return x4 * y5 - y4 * x5;\n    }\n\n    private static boolean isTriInsideFilter(int x1, int y1, int x2, int y2, int x3, int y3, List\u003cPolygon\u003e filter) {\n        // Inaccurate but fast check if any of the points are inside the filter\n        int left \u003d Math.min(Math.min(x1, x2), x3);\n        int right \u003d Math.max(Math.max(x1, x2), x3);\n        int top \u003d Math.min(Math.min(y1, y2), y3);\n        int bottom \u003d Math.max(Math.max(y1, y2), y3);\n\n        for (Polygon p : filter) {\n            if (p.contains(x1, y1) || p.contains(x2, y2) || p.contains(x3, y3)) {\n                return true;\n            }\n            if (p.intersects(left, top, right - left, bottom - top)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    // Merges triangles into larger polygons to reduce draw calls\n    // Quick and dirty implementation, definitely not optimal, but performance gains are still significant\n    private static class PolygonBuilder {\n        private final List\u003cPolygonPrototype\u003e polygons \u003d new ArrayList\u003c\u003e();\n        private final Map\u003cEdge, PolygonPrototype\u003e polygonsByEdge \u003d new HashMap\u003c\u003e();\n\n        public void addTriangle(int x1, int y1, int x2, int y2, int x3, int y3) {\n            Edge e1 \u003d new Edge(x1, y1, x2, y2);\n            Edge e2 \u003d new Edge(x2, y2, x3, y3);\n            Edge e3 \u003d new Edge(x3, y3, x1, y1);\n\n            if (polygonsByEdge.containsKey(e1)) {\n                PolygonPrototype p \u003d polygonsByEdge.get(e1);\n                p.insertEdgesAt(e1, e2, e3);\n                polygonsByEdge.remove(e1);\n                polygonsByEdge.put(e2, p);\n                polygonsByEdge.put(e3, p);\n            } else if (polygonsByEdge.containsKey(e2)) {\n                PolygonPrototype p \u003d polygonsByEdge.get(e2);\n                p.insertEdgesAt(e2, e3, e1);\n                polygonsByEdge.remove(e2);\n                polygonsByEdge.put(e1, p);\n                polygonsByEdge.put(e3, p);\n            } else if (polygonsByEdge.containsKey(e3)) {\n                PolygonPrototype p \u003d polygonsByEdge.get(e3);\n                p.insertEdgesAt(e3, e1, e2);\n                polygonsByEdge.remove(e3);\n                polygonsByEdge.put(e1, p);\n                polygonsByEdge.put(e2, p);\n            } else {\n                PolygonPrototype p \u003d new PolygonPrototype(e1, e2, e3);\n                polygonsByEdge.put(e1, p);\n                polygonsByEdge.put(e2, p);\n                polygonsByEdge.put(e3, p);\n                polygons.add(p);\n            }\n        }\n\n        public List\u003cPolygon\u003e getPolygons() {\n            List\u003cPolygon\u003e result \u003d new ArrayList\u003c\u003e();\n            for (PolygonPrototype p : polygons) {\n                result.add(p.toPolygon());\n            }\n            return result;\n        }\n    }\n\n    private static class PolygonPrototype {\n        LinkedList\u003cEdge\u003e edges \u003d new LinkedList\u003c\u003e();\n\n        public PolygonPrototype(Edge... edges) {\n            this.edges.addAll(Arrays.asList(edges));\n        }\n\n        public void insertEdgesAt(Edge edgeToReplace, Edge... newEdges) {\n            int index \u003d edges.indexOf(edgeToReplace);\n            if (index \u003d\u003d -1) {\n                return;\n            }\n\n            edges.set(index, newEdges[0]);\n            for (int i \u003d 1; i \u003c newEdges.length; i++) {\n                edges.add(index + i, newEdges[i]);\n            }\n        }\n\n        public Polygon toPolygon() {\n            int[] x \u003d new int[edges.size()];\n            int[] y \u003d new int[edges.size()];\n\n            for (int i \u003d 0; i \u003c edges.size(); i++) {\n                x[i] \u003d edges.get(i).x1;\n                y[i] \u003d edges.get(i).y1;\n            }\n\n            return new Polygon(x, y, edges.size());\n        }\n    }\n\n    private static class Edge {\n        public final int x1;\n        public final int y1;\n\n        public final int x2;\n        public final int y2;\n\n        public Edge(int x1, int y1, int x2, int y2) {\n            this.x1 \u003d x1;\n            this.y1 \u003d y1;\n            this.x2 \u003d x2;\n            this.y2 \u003d y2;\n        }\n\n        @Override\n        public boolean equals(Object obj) {\n            if (obj \u003d\u003d this) {\n                return true;\n            }\n            if (!(obj instanceof Edge)) {\n                return false;\n            }\n            Edge e \u003d (Edge) obj;\n            return (e.x1 \u003d\u003d x1 \u0026\u0026 e.y1 \u003d\u003d y1 \u0026\u0026 e.x2 \u003d\u003d x2 \u0026\u0026 e.y2 \u003d\u003d y2) ||\n                    (e.x1 \u003d\u003d x2 \u0026\u0026 e.y1 \u003d\u003d y2 \u0026\u0026 e.x2 \u003d\u003d x1 \u0026\u0026 e.y2 \u003d\u003d y1);\n        }\n\n        @Override\n        public int hashCode() {\n            return x1 + y1 + x2 + y2;\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\notloc\\targettruetile\\ImprovedTileIndicatorsUtil.java"},{"fileName":"PerspectiveUtil.java","content":"/*\n * Copyright (c) 2017, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.notloc.targettruetile;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Point;\nimport net.runelite.api.Scene;\nimport net.runelite.api.coords.LocalPoint;\n\nimport javax.annotation.Nonnull;\nimport java.awt.*;\n\npublic class PerspectiveUtil {\n\n    public static Polygon getCanvasTileMarkPoly(@Nonnull Client client, @Nonnull LocalPoint localLocation, int size, int length_128) {\n        return getCanvasTileMarkPoly(client, localLocation, size, size, length_128, client.getTopLevelWorldView().getPlane(), 0);\n    }\n\n    // Adapted from runelite-api Perspective.java\n    // Creates a triangle on the ground instead of a square\n    public static Polygon getCanvasTileMarkPoly(@Nonnull Client client, @Nonnull LocalPoint localLocation, int sizeX, int sizeY, int length_128, int plane, int zOffset) {\n        int msx \u003d localLocation.getSceneX() + 40;\n        int msy \u003d localLocation.getSceneY() + 40;\n        if (msx \u003e\u003d 0 \u0026\u0026 msy \u003e\u003d 0 \u0026\u0026 msx \u003c 184 \u0026\u0026 msy \u003c 184) {\n            Scene scene \u003d client.getTopLevelWorldView().getScene();\n            byte[][][] tileSettings \u003d scene.getExtendedTileSettings();\n            int tilePlane \u003d plane;\n            if (plane \u003c 3 \u0026\u0026 (tileSettings[1][msx][msy] \u0026 2) \u003d\u003d 2) {\n                tilePlane \u003d plane + 1;\n            }\n\n            int swX \u003d localLocation.getX() - sizeX * 128 / 2;\n            int swY \u003d localLocation.getY() - sizeY * 128 / 2;\n            int neX \u003d localLocation.getX() + sizeX * 128 / 2;\n            int neY \u003d localLocation.getY() + sizeY * 128 / 2;\n            int swHeight \u003d getHeight(scene, swX, swY, tilePlane) - zOffset;\n            int nwHeight \u003d getHeight(scene, neX, swY, tilePlane) - zOffset;\n            int seHeight \u003d getHeight(scene, swX, neY, tilePlane) - zOffset;\n\n            int eX \u003d swX + length_128;\n            int nY \u003d swY + length_128;\n\n            int exHeight \u003d lerpInt128(swHeight, seHeight, length_128/sizeX);\n            int nYHeight \u003d lerpInt128(swHeight, nwHeight, length_128/sizeY);\n\n            net.runelite.api.Point p1 \u003d Perspective.localToCanvas(client, swX, swY, swHeight);\n            net.runelite.api.Point p2 \u003d Perspective.localToCanvas(client, eX, swY, nYHeight);\n            Point p3 \u003d Perspective.localToCanvas(client, swX, nY, exHeight);\n            if (p1 !\u003d null \u0026\u0026 p2 !\u003d null \u0026\u0026 p3 !\u003d null) {\n                Polygon poly \u003d new Polygon();\n                poly.addPoint(p1.getX(), p1.getY());\n                poly.addPoint(p2.getX(), p2.getY());\n                poly.addPoint(p3.getX(), p3.getY());\n                return poly;\n            } else {\n                return null;\n            }\n        } else {\n            return null;\n        }\n    }\n\n    // Copied from runelite-api Perspective.java\n    private static int getHeight(@Nonnull Scene scene, int localX, int localY, int plane) {\n        int sceneX \u003d (localX \u003e\u003e 7) + 40;\n        int sceneY \u003d (localY \u003e\u003e 7) + 40;\n        if (sceneX \u003e\u003d 0 \u0026\u0026 sceneY \u003e\u003d 0 \u0026\u0026 sceneX \u003c 184 \u0026\u0026 sceneY \u003c 184) {\n            int[][][] tileHeights \u003d scene.getTileHeights();\n            int x \u003d localX \u0026 127;\n            int y \u003d localY \u0026 127;\n            int var8 \u003d x * tileHeights[plane][sceneX + 1][sceneY] + (128 - x) * tileHeights[plane][sceneX][sceneY] \u003e\u003e 7;\n            int var9 \u003d tileHeights[plane][sceneX][sceneY + 1] * (128 - x) + x * tileHeights[plane][sceneX + 1][sceneY + 1] \u003e\u003e 7;\n            return (128 - y) * var8 + y * var9 \u003e\u003e 7;\n        } else {\n            return 0;\n        }\n    }\n\n    private static int lerpInt128(int a, int b, int t_128) {\n        float t \u003d t_128 / 128f;\n        return a + (int)((b-a)*t);\n    }\n}\n","filePath":"src\\main\\java\\com\\notloc\\targettruetile\\PerspectiveUtil.java"},{"fileName":"Target.java","content":"package com.notloc.targettruetile;\n\nimport lombok.Getter;\nimport lombok.Setter;\nimport net.runelite.api.NPC;\n\npublic class Target {\n    @Getter\n    private final NPC npc;\n\n    @Getter @Setter\n    private long lastTargetedAt;\n\n    public Target(NPC npc, long lastTargetedAt) {\n        this.npc \u003d npc;\n        this.lastTargetedAt \u003d lastTargetedAt;\n    }\n\n    public boolean isVisible() {\n        return npc.getComposition() !\u003d null \u0026\u0026 !npc.isDead();\n    }\n}\n","filePath":"src\\main\\java\\com\\notloc\\targettruetile\\Target.java"},{"fileName":"TargetMemory.java","content":"package com.notloc.targettruetile;\n\nimport lombok.Getter;\nimport net.runelite.api.NPC;\n\nimport java.util.*;\n\npublic class TargetMemory {\n\n    @Getter\n    private final Set\u003cNPC\u003e npcs \u003d new HashSet\u003c\u003e();\n    private final Map\u003cNPC, Target\u003e targets \u003d new HashMap\u003c\u003e();\n\n    public void acknowledgeTarget(NPC npc) {\n        Target target \u003d targets.get(npc);\n        if (target \u003d\u003d null) {\n            target \u003d add(npc);\n        }\n        target.setLastTargetedAt(now());\n    }\n\n    public void forgetTarget(NPC npc) {\n        remove(npc);\n    }\n\n    public void forgetOldTargets(int threshold_s) {\n        long now \u003d now();\n        List\u003cNPC\u003e npcsToForget \u003d new ArrayList\u003c\u003e();\n\n        for (Target target : targets.values()) {\n            long delta \u003d now - target.getLastTargetedAt();\n            if (delta \u003e\u003d threshold_s || !target.isVisible()) {\n                npcsToForget.add(target.getNpc());\n            }\n        }\n\n        for (NPC npc : npcsToForget) {\n            remove(npc);\n        }\n    }\n\n    public void forgetAll() {\n        npcs.clear();\n        targets.clear();\n    }\n\n    private Target add(NPC npc) {\n        Target target \u003d new Target(npc, now());\n        targets.put(npc, target);\n        npcs.add(npc);\n        return target;\n    }\n\n    private void remove(NPC npc) {\n        targets.remove(npc);\n        npcs.remove(npc);\n    }\n\n    private static long now() {\n        return java.time.Instant.now().getEpochSecond();\n    }\n}\n","filePath":"src\\main\\java\\com\\notloc\\targettruetile\\TargetMemory.java"},{"fileName":"TargetTrueTileConfig.java","content":"package com.notloc.targettruetile;\n\nimport net.runelite.client.config.*;\n\nimport java.awt.*;\n\n@ConfigGroup(\"targettruetile\")\npublic interface TargetTrueTileConfig extends Config\n{\n\tString CONFIG_GROUP \u003d \"targettruetile\";\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Options\",\n\t\t\tdescription \u003d \"Targeting options\",\n\t\t\tposition \u003d 1\n\t)\n\tString options \u003d \"options\";\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Tile Style\",\n\t\t\tdescription \u003d \"Visual options\",\n\t\t\tposition \u003d 2\n\t)\n\tString style \u003d \"style\";\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Southwest Corner\",\n\t\t\tdescription \u003d \"Southwest corner marking options\",\n\t\t\tposition \u003d 3\n\t)\n\tString corner \u003d \"corner\";\n\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"targettimeout\",\n\t\t\tname \u003d \"Target Forget Time\",\n\t\t\tdescription \u003d \"How many seconds to wait before forgetting a target.\",\n\t\t\tposition \u003d 0,\n\t\t\tsection \u003d options\n\t)\n\tdefault int targetTimeout() { return 15; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"multipletargets\",\n\t\t\tname \u003d \"Allow Multiple Targets\",\n\t\t\tdescription \u003d \"Allow multiple targets to be tracked at once.\",\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d options\n\t)\n\tdefault boolean allowMultipleTargets() { return false; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"hoverhighlight\",\n\t\t\tname \u003d \"Show on Mouse Over\",\n\t\t\tdescription \u003d \"Show the true tile when the mouse is over a target.\",\n\t\t\tposition \u003d 2,\n\t\t\tsection \u003d options\n\t)\n\tdefault boolean highlightOnHover() { return false; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"targethighlight\",\n\t\t\tname \u003d \"Show for Friendly Targets\",\n\t\t\tdescription \u003d \"Show the true tile for friendly NPCs.\",\n\t\t\tposition \u003d 3,\n\t\t\tsection \u003d options\n\t)\n\tdefault boolean highlightFriendlies() { return false; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"inherittagged\",\n\t\t\tname \u003d \"Show for Tagged NPCs\",\n\t\t\tdescription \u003d \"Show the true tile for tagged NPCs.\",\n\t\t\tposition \u003d 4,\n\t\t\tsection \u003d options\n\t)\n\tdefault boolean inheritTaggedNpcs() { return true; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"improvedtiles\",\n\t\t\tname \u003d \"Use Improved Tile Rendering\",\n\t\t\tdescription \u003d \"Tiles will draw beneath the NPCs and player. Requires GPU.\",\n\t\t\tposition \u003d 5,\n\t\t\tsection \u003d options\n\t)\n\tdefault boolean improvedTileRendering() { return true; }\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"tilecolor\",\n\t\t\tname \u003d \"Border Color\",\n\t\t\tdescription \u003d \"The color of the target\u0027s tile.\",\n\t\t\tposition \u003d 0,\n\t\t\tsection \u003d style\n\t)\n\tdefault Color tileColor() {\n\t\treturn new Color(255, 192, 0, 96);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"tilefillcolor\",\n\t\t\tname \u003d \"Fill Color\",\n\t\t\tdescription \u003d \"The inner color of the target\u0027s tile.\",\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d style\n\t)\n\tdefault Color tileFillColor() {\n\t\treturn new Color(0, 0, 0, 50);\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"bordersize\",\n\t\t\tname \u003d \"Border Size\",\n\t\t\tdescription \u003d \"Thickness of the tile\u0027s border.\",\n\t\t\tposition \u003d 2,\n\t\t\tsection \u003d style\n\t)\n\tdefault int borderSize() { return 2; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"borderstyle\",\n\t\t\tname \u003d \"Border Style\",\n\t\t\tdescription \u003d \"Style of the tile\u0027s border.\",\n\t\t\tposition \u003d 3,\n\t\t\tsection \u003d style\n\t)\n\tdefault BorderStyle borderStyle() { return BorderStyle.OUTLINE; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"borderlength\",\n\t\t\tname \u003d \"Border Length\",\n\t\t\tdescription \u003d \"Percentage length of the corner border style. (1 - 100)\",\n\t\t\tposition \u003d 4,\n\t\t\tsection \u003d style\n\t)\n\tdefault int borderLength() { return 25; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showcorner\",\n\t\t\tname \u003d \"Mark Southwest Corner\",\n\t\t\tdescription \u003d \"Mark the southwest corner of a target\u0027s tile.\",\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d corner\n\t)\n\tdefault boolean showCorner() {\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"largeonly\",\n\t\t\tname \u003d \"Large Targets Only\",\n\t\t\tdescription \u003d \"Only mark the southwest corner of targets larger than 1x1.\",\n\t\t\tposition \u003d 2,\n\t\t\tsection \u003d corner\n\t)\n\tdefault boolean showCornerOnlyLarge() {\n\t\treturn true;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"cornercolor\",\n\t\t\tname \u003d \"Corner Color\",\n\t\t\tdescription \u003d \"The color of the southwest marking.\",\n\t\t\tposition \u003d 4,\n\t\t\tsection \u003d corner\n\t)\n\tdefault Color tileCornerColor() {\n\t\treturn new Color(233, 177, 0, 68);\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"cornersize\",\n\t\t\tname \u003d \"Corner Size\",\n\t\t\tdescription \u003d \"Size of the southwest mark in units. (1 - 128)\",\n\t\t\tposition \u003d 5,\n\t\t\tsection \u003d corner\n\t)\n\tdefault int tileCornerLength() { return 32; }\n}\n","filePath":"src\\main\\java\\com\\notloc\\targettruetile\\TargetTrueTileConfig.java"},{"fileName":"TargetTrueTileOverlay.java","content":"package com.notloc.targettruetile;\n\nimport java.awt.*;\nimport javax.inject.Inject;\n\nimport net.runelite.api.*;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.ui.overlay.*;\n\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.Set;\nimport java.util.List;\n\nclass TargetTrueTileOverlay extends Overlay {\n    private final Client client;\n    private final TargetTrueTilePlugin plugin;\n    private final TargetTrueTileConfig config;\n\n    private final List\u003cNPC\u003e renderList \u003d new ArrayList\u003c\u003e();\n    private final List\u003cPolygon\u003e renderPolyList \u003d new ArrayList\u003c\u003e();\n\n    @Inject\n    private TargetTrueTileOverlay(Client client, TargetTrueTilePlugin plugin, TargetTrueTileConfig config) {\n        this.client \u003d client;\n        this.plugin \u003d plugin;\n        this.config \u003d config;\n        setPosition(OverlayPosition.DYNAMIC);\n        setLayer(OverlayLayer.ABOVE_SCENE);\n        setPriority(0.6f);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        Set\u003cNPC\u003e npcs \u003d plugin.getTargetMemory().getNpcs();\n        renderPolyList.addAll(renderTrueTiles(graphics, npcs));\n        renderList.addAll(npcs);\n\n        if (config.highlightOnHover()) {\n            NPC mousedNpc \u003d plugin.findNpcUnderMouse();\n            if (mousedNpc !\u003d null \u0026\u0026 !npcs.contains(mousedNpc)) {\n                Polygon p \u003d renderTrueTile(graphics, mousedNpc);\n                if (p !\u003d null) {\n                    renderList.add(mousedNpc);\n                    renderPolyList.add(p);\n                }\n            }\n        }\n\n        for (NPC npc : plugin.getTaggedNpcs()) {\n            if (!npcs.contains(npc)) {\n                Polygon p \u003d renderTrueTile(graphics, npc);\n                if (p !\u003d null) {\n                    renderList.add(npc);\n                    renderPolyList.add(p);\n                }\n            }\n        }\n\n        if (client.isGpu() \u0026\u0026 config.improvedTileRendering()) {\n            for (NPC npc : renderList) {\n                ImprovedTileIndicatorsUtil.removeNpcFast(client, graphics, npc, renderPolyList);\n            }\n            ImprovedTileIndicatorsUtil.removePlayerFast(client, graphics, client.getLocalPlayer(), renderPolyList);\n        }\n\n        renderList.clear();\n        renderPolyList.clear();\n        return null;\n    }\n\n    private Polygon renderTrueTile(Graphics2D graphics, NPC npc) {\n        return renderTrueTileForNpc(graphics, npc, config.tileColor(), config.tileFillColor(), config.tileCornerColor(), config.tileCornerLength(), config.borderSize());\n    }\n\n    private List\u003cPolygon\u003e renderTrueTiles(Graphics2D graphics, Collection\u003cNPC\u003e npcs) {\n        List\u003cPolygon\u003e polygons \u003d new ArrayList\u003c\u003e();\n        for (NPC npc : npcs) {\n            Polygon polygon \u003d renderTrueTileForNpc(graphics, npc, config.tileColor(), config.tileFillColor(), config.tileCornerColor(), config.tileCornerLength(), config.borderSize());\n            if (polygon !\u003d null) {\n                polygons.add(polygon);\n            }\n        }\n        return polygons;\n    }\n\n    private Polygon renderTrueTileForNpc(Graphics2D graphics, NPC npc, Color borderColor, Color innerColor, Color swColor, int cornerLength, int borderSize) {\n        if (npc.getComposition() \u003d\u003d null) {\n            return null;\n        }\n\n        WorldView worldView \u003d client.getTopLevelWorldView();\n        if (worldView \u003d\u003d null) {\n            return null;\n        }\n\n        WorldPoint target \u003d npc.getWorldLocation();\n        LocalPoint point \u003d LocalPoint.fromWorld(worldView, target);\n        if (point \u003d\u003d null) {\n            return null;\n        }\n\n        int size \u003d npc.getComposition().getSize();\n\n        // 128 units per square, offset position to align larger enemies\n        LocalPoint renderPoint \u003d new LocalPoint(point.getX() + 128*size/2 - 64, point.getY() + 128*size/2 - 64, worldView);\n        Polygon poly;\n\n        if (config.showCorner() \u0026\u0026 (!config.showCornerOnlyLarge() || size \u003e 1)) {\n            // Marks the SW corner mark of the tile\n            poly \u003d PerspectiveUtil.getCanvasTileMarkPoly(client, renderPoint, size, cornerLength * size);\n            if (poly !\u003d null) {\n                OverlayUtil.renderPolygon(graphics, poly, swColor, swColor, new BasicStroke(borderSize));\n            }\n        }\n\n        poly \u003d Perspective.getCanvasTileAreaPoly(client, renderPoint, size);\n        if (poly !\u003d null) {\n            switch (config.borderStyle()) {\n                case OUTLINE:\n                    OverlayUtil.renderPolygon(graphics, poly, borderColor, innerColor, new BasicStroke(borderSize));\n                    break;\n                case CORNERS:\n                    Color noBorder \u003d new Color(0, 0, 0, 0);\n                    OverlayUtil.renderPolygon(graphics, poly, noBorder, innerColor, new BasicStroke(borderSize));\n                    renderCornersForTile(graphics, poly, borderColor, borderSize);\n                    break;\n            }\n        }\n\n        return poly;\n    }\n\n    private void renderCornersForTile(Graphics2D graphics, Polygon tilePoly, Color color, int borderSize) {\n        graphics.setColor(color);\n        graphics.setStroke(new BasicStroke(borderSize));\n\n        float length \u003d config.borderLength() / 100.0f;\n\n        for (int i \u003d 0; i \u003c tilePoly.npoints; i++) {\n            int x \u003d tilePoly.xpoints[i];\n            int y \u003d tilePoly.ypoints[i];\n\n            int prevX \u003d i - 1 \u003c 0 ? tilePoly.xpoints[tilePoly.npoints - 1] : tilePoly.xpoints[i - 1];\n            int prevY \u003d i - 1 \u003c 0 ? tilePoly.ypoints[tilePoly.npoints - 1] : tilePoly.ypoints[i - 1];\n            int nextX \u003d i + 1 \u003e\u003d tilePoly.npoints ? tilePoly.xpoints[0] : tilePoly.xpoints[i + 1];\n            int nextY \u003d i + 1 \u003e\u003d tilePoly.npoints ? tilePoly.ypoints[0] : tilePoly.ypoints[i + 1];\n\n            renderPartialLine(graphics, x, y, prevX, prevY, length);\n            renderPartialLine(graphics, x, y, nextX, nextY, length);\n        }\n    }\n\n    private static void renderPartialLine(Graphics2D graphics, int x1, int y1, int x2, int y2, float length) {\n        int deltaX \u003d Math.round((x2 - x1) * length);\n        int deltaY \u003d Math.round((y2 - y1) * length);\n        graphics.drawLine(x1, y1, x1 + deltaX, y1 + deltaY);\n    }\n}\n","filePath":"src\\main\\java\\com\\notloc\\targettruetile\\TargetTrueTileOverlay.java"},{"fileName":"TargetTrueTilePlugin.java","content":"package com.notloc.targettruetile;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\n\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.*;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.plugins.npchighlight.NpcIndicatorsConfig;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.Text;\nimport net.runelite.client.util.WildcardMatcher;\n\nimport java.util.*;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Target True Tile\",\n\tdescription \u003d \"Dynamically highlights the true tile of enemies during combat. Compatible with NPC Indicator\u0027s tags.\"\n)\npublic class TargetTrueTilePlugin extends Plugin\n{\n\t@Provides\n\tTargetTrueTileConfig provideConfig(ConfigManager configManager) { return configManager.getConfig(TargetTrueTileConfig.class); }\n\n\t@Inject private Client client;\n\t@Inject private TargetTrueTileConfig config;\n\t@Inject private TargetTrueTileOverlay overlay;\n\n\t@Inject private OverlayManager overlayManager;\n\t@Inject private ConfigManager configManager;\n\t@Inject private ClientThread clientThread;\n\n\t@Getter\n\tprivate NPC target;\n\t@Getter\n\tprivate final TargetMemory targetMemory \u003d new TargetMemory();\n\t@Getter\n\tprivate final Set\u003cNPC\u003e taggedNpcs \u003d new HashSet\u003c\u003e();\n\n\t// NPCs tagged by name via the NPC Indicators plugin\n\tprivate Set\u003cString\u003e taggedNames \u003d new HashSet\u003c\u003e();\n\n\t// Specific NPCs tagged during this session.\n\tprivate final Set\u003cInteger\u003e taggedIndexes \u003d new HashSet\u003c\u003e();\n\n\t@Override\n\tprotected void startUp() {\n\t\toverlayManager.add(overlay);\n\t\tclientThread.invokeLater(this::rebuildTaggedTargets);\n\t}\n\n\t@Override\n\tprotected void shutDown() {\n\t\toverlayManager.remove(overlay);\n\t\ttargetMemory.forgetAll();\n\t\ttarget \u003d null;\n\t\ttaggedNpcs.clear();\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged) {\n\t\tif (gameStateChanged.getGameState() \u003d\u003d GameState.LOGIN_SCREEN || gameStateChanged.getGameState() \u003d\u003d GameState.HOPPING) {\n\t\t\ttarget \u003d null;\n\t\t\ttargetMemory.forgetAll();\n\t\t\ttaggedNpcs.clear();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event) {\n\t\tString group \u003d event.getGroup();\n\t\tif (!group.equals(TargetTrueTileConfig.CONFIG_GROUP) \u0026\u0026 !group.equals(NpcIndicatorsConfig.GROUP)) {\n\t\t\treturn;\n\t\t}\n\t\tclientThread.invokeLater(this::rebuildTaggedTargets);\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick e) {\n\t\tprocessCurrentTarget();\n\t\ttargetMemory.forgetOldTargets(config.targetTimeout());\n\t}\n\n\t@Subscribe\n\tpublic void onNpcSpawned(NpcSpawned npcSpawned)\n\t{\n\t\tfinal NPC npc \u003d npcSpawned.getNpc();\n\t\tif (isTaggedNpc(npc)) {\n\t\t\ttaggedNpcs.add(npc);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onNpcDespawned(NpcDespawned npcDespawned)\n\t{\n\t\tfinal NPC npc \u003d npcDespawned.getNpc();\n\t\ttaggedNpcs.remove(npc);\n\t\ttargetMemory.forgetTarget(npc);\n\t}\n\n\t@Subscribe\n\tpublic void onInteractingChanged(InteractingChanged interactingChanged) {\n\t\tActor source \u003d interactingChanged.getSource();\n\t\tActor newTarget \u003d interactingChanged.getTarget();\n\n\t\tif (source !\u003d client.getLocalPlayer()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.target \u003d null;\n\t\tif (newTarget instanceof NPC) {\n\t\t\tthis.target \u003d (NPC)newTarget;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOptionClicked(MenuOptionClicked event) {\n\t\tboolean doTag \u003d \"Tag\".equals(event.getMenuOption());\n\t\tif (doTag || \"Un-tag\".equals(event.getMenuOption())) {\n\t\t\tint index \u003d event.getId();\n\t\t\tclientThread.invokeLater(() -\u003e {\n\t\t\t\tWorldView worldView \u003d client.getTopLevelWorldView();\n\t\t\t\tif (worldView \u003d\u003d null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tNPC npc \u003d worldView.npcs().byIndex(index);\n\t\t\t\tif (npc !\u003d null) {\n\t\t\t\t\ttoggleIndexTag(npc, doTag);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate void toggleIndexTag(NPC npc, boolean state) {\n\t\tif (state) {\n\t\t\ttaggedIndexes.add(npc.getIndex());\n\t\t} else {\n\t\t\ttaggedIndexes.remove(npc.getIndex());\n\t\t}\n\t\trebuildTaggedTargets();\n\t}\n\n\tprivate void rebuildTaggedTargets() {\n\t\ttaggedNpcs.clear();\n\t\ttaggedNames.clear();\n\n\t\tNpcIndicatorsConfig npcIndicatorsConfig \u003d configManager.getConfig(NpcIndicatorsConfig.class);\n\t\ttaggedNames \u003d new HashSet\u003c\u003e(Text.fromCSV(npcIndicatorsConfig.getNpcToHighlight()));\n\n\t\tif (client.getGameState() \u003d\u003d GameState.LOGGED_IN || client.getGameState() \u003d\u003d GameState.LOADING) {\n\t\t\tWorldView worldView \u003d client.getTopLevelWorldView();\n\t\t\tif (worldView \u003d\u003d null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tworldView.npcs().forEach(npc -\u003e {\n\t\t\t\tif (isTaggedNpc(npc)) {\n\t\t\t\t\ttaggedNpcs.add(npc);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate void processCurrentTarget() {\n\t\tif (target \u003d\u003d null) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (isValidTarget(target)) {\n\t\t\tif (!config.allowMultipleTargets()) {\n\t\t\t\ttargetMemory.forgetAll();\n\t\t\t}\n\t\t\ttargetMemory.acknowledgeTarget(target);\n\t\t} else {\n\t\t\ttargetMemory.forgetTarget(target);\n\t\t\ttarget \u003d null;\n\t\t}\n\t}\n\n\tpublic NPC findNpcUnderMouse() {\n\t\tMenuEntry[] menuEntries \u003d client.getMenu().getMenuEntries();\n\t\tif (menuEntries.length \u003d\u003d 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\tMenuEntry entry \u003d menuEntries[menuEntries.length - 1];\n\t\tNPC npc \u003d entry.getNpc();\n\t\treturn isValidTarget(npc) ? npc : null;\n\t}\n\n\tprivate boolean isTaggedNpc(NPC npc) {\n\t\tif (!config.inheritTaggedNpcs()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (taggedIndexes.contains(npc.getIndex())) {\n\t\t\treturn true;\n\t\t}\n\n\t\tString name \u003d npc.getName();\n\t\tif (name !\u003d null) {\n\t\t\tfor (String manual : taggedNames) {\n\t\t\t\tif (WildcardMatcher.matches(manual, name)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate boolean isValidTarget(NPC npc) {\n\t\tif (npc \u003d\u003d null) {\n\t\t\treturn false;\n\t\t}\n\t\treturn (config.highlightFriendlies() || isNpcAttackable(npc));\n\t}\n\n\tprivate boolean isNpcAttackable(NPC npc) {\n\t\tif (npc \u003d\u003d null || npc.getComposition() \u003d\u003d null || npc.getComposition().getActions() \u003d\u003d null) {\n\t\t\treturn false;\n\t\t}\n\t\t// Actions is a sparse array, the second element represents the attack option.\n\t\tString[] actions \u003d npc.getComposition().getActions();\n\t\treturn actions !\u003d null \u0026\u0026 actions.length \u003e 1 \u0026\u0026 actions[1] !\u003d null;\n\t}\n}\n","filePath":"src\\main\\java\\com\\notloc\\targettruetile\\TargetTrueTilePlugin.java"},{"fileName":"TargetTrueTilePluginTest.java","content":"package com.notloc.targettruetile;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class TargetTrueTilePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(TargetTrueTilePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\notloc\\targettruetile\\TargetTrueTilePluginTest.java"}]},{"commit":"bb889162a4d913246d84cfc45034d0e622cefffd","repository":"https://github.com/PuddingPants/unique-npc-killtracker.git","internalName":"unique-npc-kc-tracker","files":[{"fileName":"SpawnKeyUtil.java","content":"package com.puddingpants.uniquenpc;\n\nimport net.runelite.api.coords.WorldPoint;\n\npublic final class SpawnKeyUtil\n{\n    private SpawnKeyUtil() {}\n\n    public static long spawnKey(int npcId, WorldPoint p)\n    {\n        // Normalize instance coordinates\n        WorldPoint base \u003d WorldPoint.fromRegion(\n                p.getRegionID(),\n                p.getRegionX(),\n                p.getRegionY(),\n                p.getPlane()\n        );\n\n        return (((long) npcId) \u003c\u003c 32)\n                | (((long) base.getX() \u0026 0x7FFF) \u003c\u003c 15)\n                | ((long) base.getY() \u0026 0x7FFF);\n    }\n}\n","filePath":"src\\main\\java\\com\\puddingpants\\uniquenpc\\SpawnKeyUtil.java"},{"fileName":"SpawnRecord.java","content":"package com.puddingpants.uniquenpc;\n\nimport net.runelite.api.coords.WorldPoint;\n\npublic class SpawnRecord\n{\n    public final int npcId;\n    public final WorldPoint location;\n    public final long uniqueId;\n\n    public SpawnRecord(int npcId, WorldPoint location, long uniqueId)\n    {\n        this.npcId \u003d npcId;\n        this.location \u003d location;\n        this.uniqueId \u003d uniqueId;\n    }\n}","filePath":"src\\main\\java\\com\\puddingpants\\uniquenpc\\SpawnRecord.java"},{"fileName":"SpawnStore.java","content":"package com.puddingpants.uniquenpc;\n\nimport com.google.gson.Gson;\nimport com.google.gson.reflect.TypeToken;\nimport net.runelite.client.config.ConfigManager;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.lang.reflect.Type;\nimport java.util.Collections;\nimport java.util.Map;\n\n@Singleton\npublic class SpawnStore\n{\n    private static final String GROUP \u003d \"uniquenpc\";\n    private static final String KEY \u003d \"spawnRecords\";\n\n    private static final Type TYPE \u003d\n            new TypeToken\u003cMap\u003cLong, SpawnRecord\u003e\u003e() {}.getType();\n\n    @Inject\n    private Gson gson;\n\n    @Inject\n    private ConfigManager configManager;\n\n    public void save(Map\u003cLong, SpawnRecord\u003e data)\n    {\n        if (data \u003d\u003d null || data.isEmpty())\n        {\n            configManager.unsetConfiguration(GROUP, KEY);\n            return;\n        }\n\n        String json \u003d gson.toJson(data, TYPE);\n        configManager.setConfiguration(GROUP, KEY, json);\n    }\n\n    public Map\u003cLong, SpawnRecord\u003e load()\n    {\n        String json \u003d configManager.getConfiguration(GROUP, KEY);\n\n        if (json \u003d\u003d null || json.isEmpty())\n        {\n            return Collections.emptyMap();\n        }\n\n        return gson.fromJson(json, TYPE);\n    }\n\n    public void clear()\n    {\n        configManager.unsetConfiguration(GROUP, KEY);\n    }\n}\n","filePath":"src\\main\\java\\com\\puddingpants\\uniquenpc\\SpawnStore.java"},{"fileName":"UniqueNPCConfig.java","content":"package com.puddingpants.uniquenpc;\n\nimport net.runelite.client.config.*;\n\nimport java.awt.*;\n\n@ConfigGroup(\"uniquenpc\")\npublic interface UniqueNPCConfig extends Config\n{\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"tagColor\",\n\t\t\tname \u003d \"Tag Color\",\n\t\t\tdescription \u003d \"Color used to mask hidden NPCs\"\n\t)\n\tdefault Color tagColor()\n\t{\n\t\treturn new Color(0, 0, 0, 255);\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"idNpc\",\n\t\t\tname \u003d \"Show Unique ID\",\n\t\t\tdescription \u003d \"Display unique ID numbers above NPCs\",\n\t\t\tposition \u003d 1\n\t)\n\tdefault boolean idNpc()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"tagNpc\",\n\t\t\tname \u003d \"Tag NPCs\",\n\t\t\tdescription \u003d \"Visually overlays hulls on NPCs that have unique IDs\"\n\t)\n\tdefault boolean tagNpc()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"tagAggressiveNpc\",\n\t\t\tname \u003d \"Tag Aggressive NPCs\",\n\t\t\tdescription \u003d \"Visually overlays hulls on Aggressive NPCs that have unique IDs\"\n\t)\n\tdefault boolean tagAggressiveNpc()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"matchRadius\",\n\t\t\tname \u003d \"Spawn match radius\",\n\t\t\tdescription \u003d \"Maximum distance to match an NPC to a known spawn\"\n\t)\n\tdefault int matchRadius()\n\t{\n\t\treturn 50;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"resetSpawnIds\",\n\t\t\tname \u003d \"Reset Unique NPC IDs\",\n\t\t\tdescription \u003d \"Toggle ON to reset all learned NPC IDs\"\n\t)\n\tdefault boolean resetSpawnIds()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"disableNpcInteractions\",\n\t\t\tname \u003d \"Disable NPC interactions\",\n\t\t\tdescription \u003d \"Remove attack/interact options for NPCs with a unique ID\"\n\t)\n\tdefault boolean disableNpcInteractions()\n\t{\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\com\\puddingpants\\uniquenpc\\UniqueNPCConfig.java"},{"fileName":"UniqueNPCManager.java","content":"package com.puddingpants.uniquenpc;\n\nimport lombok.Getter;\nimport net.runelite.api.Actor;\nimport net.runelite.api.NPC;\nimport net.runelite.api.Player;\nimport net.runelite.api.coords.WorldPoint;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.util.*;\n\n@Singleton\npublic class UniqueNPCManager\n{\n    @Inject\n    private UniqueNPCConfig config;\n\n    // Persistent identity (saved)\n    @Getter\n    private final Map\u003cLong, SpawnRecord\u003e knownSpawns \u003d new HashMap\u003c\u003e();\n    private boolean dirty \u003d false;\n\n    // Session identity\n    private final Map\u003cInteger, Long\u003e entityToUniqueId \u003d new HashMap\u003c\u003e();\n    private final Map\u003cLong, Integer\u003e uniqueIdToEntity \u003d new HashMap\u003c\u003e();\n\n    // Learning helpers\n    private final Map\u003cInteger, Long\u003e playerDamagedNpc \u003d new HashMap\u003c\u003e();\n    private final Map\u003cInteger, NPC\u003e pendingSpawns \u003d new HashMap\u003c\u003e();\n\n    private static final long PLAYER_DAMAGE_TTL_MS \u003d 15_000;\n    private static final int SPECIAL_NPC_ID \u003d 5007;\n    private static final int SPECIAL_NPC_RADIUS \u003d 200;\n\n    // -------------------------------------------------\n    // Lifecycle\n    // -------------------------------------------------\n\n    public void loadKnownSpawns(Map\u003cLong, SpawnRecord\u003e data)\n    {\n        knownSpawns.clear();\n        if (data !\u003d null)\n        {\n            knownSpawns.putAll(data);\n        }\n    }\n\n    public void resetRuntimeState()\n    {\n        entityToUniqueId.clear();\n        uniqueIdToEntity.clear();\n        pendingSpawns.clear();\n        playerDamagedNpc.clear();\n        dirty \u003d false;\n    }\n\n    public boolean consumeDirty()\n    {\n        boolean wasDirty \u003d dirty;\n        dirty \u003d false;\n        return wasDirty;\n    }\n\n    // -------------------------------------------------\n    // NPC Tracking\n    // -------------------------------------------------\n\n    public void recordPlayerDamage(NPC npc)\n    {\n        playerDamagedNpc.put(npc.getIndex(), System.currentTimeMillis());\n    }\n\n    private boolean wasKilledByPlayer(int entityIndex)\n    {\n        Long t \u003d playerDamagedNpc.get(entityIndex);\n        return t !\u003d null \u0026\u0026 System.currentTimeMillis() - t \u003c\u003d PLAYER_DAMAGE_TTL_MS;\n    }\n\n    public void handleNpcSpawn(NPC npc)\n    {\n        int index \u003d npc.getIndex();\n        if (!entityToUniqueId.containsKey(index))\n        {\n            pendingSpawns.put(index, npc);\n        }\n    }\n\n    public void handleNpcDespawn(NPC npc)\n    {\n        int index \u003d npc.getIndex();\n\n        if (wasKilledByPlayer(index))\n        {\n            WorldPoint deathLoc \u003d npc.getWorldLocation();\n            WorldPoint uniqueLoc \u003d findFreeDeathLocation(npc.getId(), deathLoc);\n            long spawnKey \u003d SpawnKeyUtil.spawnKey(npc.getId(), uniqueLoc);\n\n            SpawnRecord record \u003d knownSpawns.computeIfAbsent(spawnKey, k -\u003e {\n                dirty \u003d true;\n                return new SpawnRecord(npc.getId(), uniqueLoc, spawnKey);\n            });\n\n            if (!entityToUniqueId.containsKey(index) \u0026\u0026 !uniqueIdToEntity.containsKey(record.uniqueId))\n            {\n                entityToUniqueId.put(index, record.uniqueId);\n                uniqueIdToEntity.put(record.uniqueId, index);\n            }\n        }\n        pendingSpawns.remove(index);\n        playerDamagedNpc.remove(index);\n    }\n\n    public void resolvePendingSpawns()\n    {\n        if (pendingSpawns.isEmpty() || knownSpawns.isEmpty())\n        {\n            pendingSpawns.clear();\n            return;\n        }\n\n        for (NPC npc : pendingSpawns.values())\n        {\n            int index \u003d npc.getIndex();\n            if (entityToUniqueId.containsKey(index)) continue;\n\n            SpawnRecord best \u003d findBestMatch(npc);\n            int radius \u003d getMatchRadius(npc.getId());\n\n            if (best !\u003d null \u0026\u0026 best.location.distanceTo(npc.getWorldLocation()) \u003c\u003d radius)\n            {\n                entityToUniqueId.put(index, best.uniqueId);\n                uniqueIdToEntity.put(best.uniqueId, index);\n            }\n        }\n\n        pendingSpawns.clear();\n    }\n\n    private int getMatchRadius(int npcId)\n    {\n        if (npcId \u003d\u003d SPECIAL_NPC_ID)\n        {\n            return SPECIAL_NPC_RADIUS;\n        }\n        return config.matchRadius();\n    }\n    \n    private SpawnRecord findBestMatch(NPC npc)\n    {\n        WorldPoint loc \u003d npc.getWorldLocation();\n        SpawnRecord best \u003d null;\n        int bestDist \u003d Integer.MAX_VALUE;\n\n        for (SpawnRecord record : knownSpawns.values())\n        {\n            if (record.npcId !\u003d npc.getId()) continue;\n            if (uniqueIdToEntity.containsKey(record.uniqueId)) continue;\n\n            int dist \u003d record.location.distanceTo(loc);\n            if (dist \u003c bestDist)\n            {\n                bestDist \u003d dist;\n                best \u003d record;\n            }\n        }\n\n        return best;\n    }\n\n    private WorldPoint findFreeDeathLocation(int npcId, WorldPoint base)\n    {\n        for (int dx \u003d 0; dx \u003c\u003d 5; dx++)\n        {\n            for (int dy \u003d 0; dy \u003c\u003d 5; dy++)\n            {\n                WorldPoint candidate \u003d base.dx(dx).dy(dy);\n                long key \u003d SpawnKeyUtil.spawnKey(npcId, candidate);\n                if (!knownSpawns.containsKey(key))\n                {\n                    return candidate;\n                }\n            }\n        }\n        return base;\n    }\n\n    // -------------------------------------------------\n    // Query API\n    // -------------------------------------------------\n\n    public Long getUniqueId(NPC npc)\n    {\n        return entityToUniqueId.get(npc.getIndex());\n    }\n\n    public Collection\u003cInteger\u003e getTaggedNpcIndices()\n    {\n        return entityToUniqueId.keySet();\n    }\n\n    public boolean isNpcAggressive(NPC npc)\n    {\n        Actor interacting \u003d npc.getInteracting();\n\n        return (interacting instanceof Player)\n                || npc.getAnimation() !\u003d -1;\n    }\n\n    public int countTaggedNpcsForNpcId(int npcId)\n    {\n        int count \u003d 0;\n        for (Long uniqueId : entityToUniqueId.values())\n        {\n            for (SpawnRecord record : knownSpawns.values())\n            {\n                if (record.uniqueId \u003d\u003d uniqueId \u0026\u0026 record.npcId \u003d\u003d npcId)\n                {\n                    count++;\n                    break;\n                }\n            }\n        }\n        return count;\n    }\n}\n","filePath":"src\\main\\java\\com\\puddingpants\\uniquenpc\\UniqueNPCManager.java"},{"fileName":"UniqueNPCOverlay.java","content":"package com.puddingpants.uniquenpc;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.NPC;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Point;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\n\nimport javax.inject.Inject;\nimport java.awt.*;\n\npublic class UniqueNPCOverlay extends Overlay\n{\n    private final Client client;\n    private final UniqueNPCManager manager;\n    private final UniqueNPCConfig config;\n\n    @Inject\n    public UniqueNPCOverlay(Client client, UniqueNPCManager manager, UniqueNPCConfig config)\n    {\n        this.client \u003d client;\n        this.manager \u003d manager;\n        this.config \u003d config;\n\n        setLayer(OverlayLayer.ABOVE_SCENE);\n        setPosition(OverlayPosition.DYNAMIC);\n    }\n\n    @Override\n    public Dimension render(Graphics2D g)\n    {\n        if (!config.idNpc() \u0026\u0026 !config.tagNpc() \u0026\u0026 !config.tagAggressiveNpc())\n        {\n            return null;\n        }\n\n        for (NPC npc : client.getTopLevelWorldView().npcs())\n        {\n            Long uniqueId \u003d manager.getUniqueId(npc);\n            if (uniqueId \u003d\u003d null) continue;\n\n            boolean isAggressive \u003d manager.isNpcAggressive(npc);\n\n            if (config.tagNpc())\n            {\n                renderTag(g, npc, isAggressive);\n            }\n\n            if (config.tagAggressiveNpc() \u0026\u0026 isAggressive)\n            {\n                renderAggressiveTag(g, npc);\n            }\n\n            if (config.idNpc())\n            {\n                renderIdText(g, npc, uniqueId, isAggressive);\n            }\n        }\n\n        return null;\n    }\n\n    // Tag NPC (visual mask/highlight for all tagged NPCs)\n\n    private void renderTag(Graphics2D g, NPC npc, boolean isAggressive)\n    {\n        if (client.getLocalPlayer().getInteracting() \u003d\u003d npc) return;\n\n        Shape hull \u003d npc.getConvexHull();\n        if (hull \u003d\u003d null) return;\n\n        Composite oldComposite \u003d g.getComposite();\n\n        if (isAggressive)\n        {\n            g.setColor(Color.GRAY);\n            g.setStroke(new BasicStroke(1));\n            g.draw(hull);\n\n            g.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.3f));\n            g.setColor(new Color(151, 139, 139, 100));\n            g.fill(hull);\n        }\n        else\n        {\n            g.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.5f));\n            g.setColor(config.tagColor());\n            g.fill(hull);\n        }\n\n        g.setComposite(oldComposite);\n    }\n\n    // Tag only aggressive NPCs (separate highlighting)\n\n    private void renderAggressiveTag(Graphics2D g, NPC npc)\n    {\n        Shape hull \u003d npc.getConvexHull();\n        if (hull \u003d\u003d null) return;\n\n        g.setColor(Color.LIGHT_GRAY);\n        g.setStroke(new BasicStroke(1));\n        g.draw(hull);\n\n        Composite oldComposite \u003d g.getComposite();\n        g.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.4f));\n        g.setColor(new Color(246, 232, 232, 120));\n        g.fill(hull);\n        g.setComposite(oldComposite);\n    }\n\n    // Display ID number\n\n    private void renderIdText(Graphics2D g, NPC npc, long uniqueId, boolean isAggressive)\n    {\n        LocalPoint lp \u003d npc.getLocalLocation();\n        if (lp \u003d\u003d null) return;\n\n        String displayText \u003d isAggressive ? uniqueId + \" [AGG]\" : String.valueOf(uniqueId);\n\n        Point textLocation \u003d Perspective.getCanvasTextLocation(\n                client,\n                g,\n                lp,\n                displayText,\n                npc.getLogicalHeight() + 20\n        );\n\n        if (textLocation \u003d\u003d null) return;\n\n        g.setColor(isAggressive ? Color.RED : config.tagColor());\n        g.drawString(displayText, textLocation.getX(), textLocation.getY());\n    }\n}","filePath":"src\\main\\java\\com\\puddingpants\\uniquenpc\\UniqueNPCOverlay.java"},{"fileName":"UniqueNPCPlugin.java","content":"package com.puddingpants.uniquenpc;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.HashSet;\n\nimport net.runelite.api.*;\nimport net.runelite.api.events.*;\n\nimport net.runelite.client.chat.ChatColorType;\nimport net.runelite.client.chat.ChatMessageBuilder;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.chat.QueuedMessage;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.events.ConfigChanged;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\n@PluginDescriptor(\n\t\tname \u003d \"Unique NPC\",\n\t\tdescription \u003d \"Unique NPC ID Creation and Assignment\")\n\npublic class UniqueNPCPlugin extends Plugin\n{\n\tprivate static final Logger log \u003d LoggerFactory.getLogger(UniqueNPCPlugin.class);\n\n\t@Inject\tprivate OverlayManager overlayManager;\n\t@Inject\tprivate UniqueNPCOverlay overlay;\n\t@Inject\tprivate UniqueNPCManager manager;\n\t@Inject\tprivate UniqueNPCConfig config;\n\t@Inject\tprivate Client client;\n\t@Inject\tprivate ChatMessageManager chatMessageManager;\n\t@Inject\tprivate SpawnStore spawnStore;\n\t@Inject private ConfigManager configManager;\n\n\tprivate final Set\u003cInteger\u003e npcsPreviouslyHidden \u003d new HashSet\u003c\u003e();\n\n\t@Provides\n\tUniqueNPCConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(UniqueNPCConfig.class);\n\t}\n\n\t// Lifecycle\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\tMap\u003cLong, SpawnRecord\u003e loadedSpawns \u003d spawnStore.load();\n\t\tmanager.loadKnownSpawns(loadedSpawns);\n\t\tmanager.resetRuntimeState();\n\t\toverlayManager.add(overlay);\n\n\t\tlog.info(\n\t\t\t\t\"NPC Identity: loaded {} known spawns\",\n\t\t\t\tloadedSpawns \u003d\u003d null ? 0 : loadedSpawns.size());\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\tspawnStore.save(manager.getKnownSpawns());\n\n\t\t// Reset all hidden NPCs when plugin shuts down\n\t\tfor (NPC npc : client.getTopLevelWorldView().npcs())\n\t\t{\n\t\t\tnpc.setDead(false);\n\t\t}\n\n\t\tnpcsPreviouslyHidden.clear();\n\t\tmanager.resetRuntimeState();\n\t\toverlayManager.remove(overlay);\n\n\t\tlog.info(\"NPC Identity: saved {} known spawns\", manager.getKnownSpawns().size());\n\t}\n\n\t// NPC Events\n\n\t@Subscribe\n\tpublic void onNpcSpawned(NpcSpawned event)\n\t{\n\t\tNPC npc \u003d event.getNpc();\n\t\tmanager.handleNpcSpawn(npc);\n\n\t\tif (shouldHideNpc(npc))\n\t\t{\n\t\t\tnpc.setDead(true);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onNpcDespawned(NpcDespawned event)\n\t{\n\n\t\tmanager.handleNpcDespawn(event.getNpc());\n\t}\n\n\t@Subscribe\n\tpublic void onHitsplatApplied(HitsplatApplied event)\n\t{\n\t\tif (event.getActor() instanceof NPC \u0026\u0026 event.getHitsplat().isMine())\n\t\t{\n\t\t\tmanager.recordPlayerDamage((NPC) event.getActor());\n\t\t}\n\t}\n\n\t// Game tick driver\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick tick)\n\t{\n\t\tmanager.resolvePendingSpawns();\n\n\t\tif (manager.consumeDirty())\n\t\t{\n\t\t\tspawnStore.save(manager.getKnownSpawns());\n\t\t}\n\t\tupdateNpcVisibility();\n\t}\n\n\tprivate void updateNpcVisibility()\n\t{\n\t\tSet\u003cInteger\u003e currentlyHidden \u003d new HashSet\u003c\u003e();\n\n\t\tfor (NPC npc : client.getTopLevelWorldView().npcs())\n\t\t{\n\t\t\tint index \u003d npc.getIndex();\n\t\t\tboolean shouldHide \u003d shouldHideNpc(npc);\n\n\t\t\tif (shouldHide)\n\t\t\t{\n\t\t\t\tcurrentlyHidden.add(index);\n\t\t\t\tif (!npcsPreviouslyHidden.contains(index))\n\t\t\t\t{\n\t\t\t\t\tnpc.setDead(true);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (npcsPreviouslyHidden.contains(index))\n\t\t\t{\n\t\t\t\tnpc.setDead(false);\n\t\t\t}\n\t\t}\n\n\t\tnpcsPreviouslyHidden.clear();\n\t\tnpcsPreviouslyHidden.addAll(currentlyHidden);\n\t}\n\n\tprivate boolean shouldHideNpc(NPC npc)\n\t{\n\t\treturn config.disableNpcInteractions()\n\t\t\t\t\u0026\u0026 manager.getTaggedNpcIndices().contains(npc.getIndex())\n\t\t\t\t\u0026\u0026 !manager.isNpcAggressive(npc);\n\t}\n\n\t// Config\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif (!\"uniquenpc\".equals(event.getGroup()))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (\"resetSpawnIds\".equals(event.getKey()) \u0026\u0026 config.resetSpawnIds())\n\t\t{\n\t\t\tlog.info(\"Reset toggle activated - clearing all data\");\n\n\t\t\tmanager.getKnownSpawns().clear();\n\t\t\tmanager.resetRuntimeState();\n\n\t\t\tspawnStore.clear();\n\n\t\t\tnpcsPreviouslyHidden.clear();\n\t\t\tfor (NPC npc : client.getTopLevelWorldView().npcs())\n\t\t\t{\n\t\t\t\tnpc.setDead(false);\n\t\t\t}\n\n\t\t\tconfigManager.setConfiguration(\"uniquenpc\", \"resetSpawnIds\", false);\n\n\t\t\tlog.info(\"Reset complete - all spawn data cleared\");\n\t\t\treturn;\n\t\t}\n\t\tnpcsPreviouslyHidden.clear();\n\t\tupdateNpcVisibility();\n\t}\n\n\t// Menu filtering\n\n\t@Subscribe\n\tpublic void onMenuEntryAdded(MenuEntryAdded event)\n\t{\n\t\tif (!config.disableNpcInteractions())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tMenuEntry menuEntry \u003d event.getMenuEntry();\n\t\tint type \u003d event.getType();\n\n\t\tif (type !\u003d MenuAction.NPC_FIRST_OPTION.getId()\n\t\t\t\t\u0026\u0026 type !\u003d MenuAction.NPC_SECOND_OPTION.getId()\n\t\t\t\t\u0026\u0026 type !\u003d MenuAction.NPC_THIRD_OPTION.getId()\n\t\t\t\t\u0026\u0026 type !\u003d MenuAction.NPC_FOURTH_OPTION.getId()\n\t\t\t\t\u0026\u0026 type !\u003d MenuAction.NPC_FIFTH_OPTION.getId())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!manager.getTaggedNpcIndices().contains(event.getIdentifier()))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tmenuEntry.setDeprioritized(true);\n\t}\n\n\t// Chat Commands\n\n\t@Subscribe\n\tpublic void onCommandExecuted(CommandExecuted event)\n\t{\n\t\tString command \u003d event.getCommand();\n\t\tString[] args \u003d event.getArguments();\n\n\t\tif (command.equalsIgnoreCase(\"npccount\"))\n\t\t{\n\t\t\thandleNpcCountCommand(args);\n\t\t}\n\t\telse if (command.equalsIgnoreCase(\"npcstats\"))\n\t\t{\n\t\t\thandleNpcStatsCommand();\n\t\t}\n\t}\n\n\tprivate void handleNpcCountCommand(String[] args)\n\t{\n\t\tif (args.length !\u003d 1)\n\t\t{\n\t\t\tsendChatMessage(\"Usage: ::npccount \u003cnpcId\u003e\");\n\t\t\treturn;\n\t\t}\n\n\t\ttry\n\t\t{\n\t\t\tint npcId \u003d Integer.parseInt(args[0]);\n\t\t\tint savedSpawns \u003d countSpawnsForNpcId(npcId);\n\t\t\tint taggedNpcs \u003d manager.countTaggedNpcsForNpcId(npcId);\n\n\t\t\tsendChatMessage(\"NPC ID \" + npcId + \":\");\n\t\t\tsendChatMessage(\"  Unique IDs assigned: \" + savedSpawns);\n\t\t\tsendChatMessage(\"  Currently tagged in world: \" + taggedNpcs);\n\t\t}\n\t\tcatch (NumberFormatException e)\n\t\t{\n\t\t\tsendChatMessage(\"Invalid NPC ID. Usage: ::npccount \u003cnpcId\u003e\");\n\t\t}\n\t}\n\n\tprivate void handleNpcStatsCommand()\n\t{\n\t\tint totalSpawns \u003d manager.getKnownSpawns().size();\n\t\tint taggedNpcs \u003d manager.getTaggedNpcIndices().size();\n\n\t\tsendChatMessage(\"Total saved spawns: \" + totalSpawns);\n\t\tsendChatMessage(\"Currently tagged NPCs: \" + taggedNpcs);\n\t}\n\n\tprivate int countSpawnsForNpcId(int npcId)\n\t{\n\t\tint count \u003d 0;\n\t\tfor (SpawnRecord record : manager.getKnownSpawns().values())\n\t\t{\n\t\t\tif (record.npcId \u003d\u003d npcId)\n\t\t\t{\n\t\t\t\tcount++;\n\t\t\t}\n\t\t}\n\t\treturn count;\n\t}\n\n\tprivate void sendChatMessage(String message)\n\t{\n\t\tchatMessageManager.queue(QueuedMessage.builder()\n\t\t\t\t.type(ChatMessageType.CONSOLE)\n\t\t\t\t.runeLiteFormattedMessage(\n\t\t\t\t\t\tnew ChatMessageBuilder()\n\t\t\t\t\t\t\t\t.append(ChatColorType.HIGHLIGHT)\n\t\t\t\t\t\t\t\t.append(\"[NPC Identity] \")\n\t\t\t\t\t\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t\t\t\t\t\t.append(message)\n\t\t\t\t\t\t\t\t.build()\n\t\t\t\t)\n\t\t\t\t.build());\n\t}\n}\n","filePath":"src\\main\\java\\com\\puddingpants\\uniquenpc\\UniqueNPCPlugin.java"},{"fileName":"PluginLauncher.java","content":"package com.puddingpants.uniquenpc;\n\nimport com.puddingpants.uniquenpc.UniqueNPCPlugin;\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class PluginLauncher\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(UniqueNPCPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\puddingpants\\uniquenpc\\PluginLauncher.java"}]},{"commit":"1f9afa483db73a92ac90a7141ce067b044b8e80f","repository":"https://github.com/sololegends/runelite-what-pet-is-that-anyway.git","internalName":"what-pet-is-that-anyway","files":[{"fileName":"WhatPetIsThatConfig.java","content":"package com.sololegends.runelite;\n\nimport net.runelite.client.config.*;\n\n@ConfigGroup(\"What Pet is That\")\npublic interface WhatPetIsThatConfig extends Config {\n\n\t//@formatter:off\n\n}\n","filePath":"src\\main\\java\\com\\sololegends\\runelite\\WhatPetIsThatConfig.java"},{"fileName":"WhatPetIsThatOverlay.java","content":"package com.sololegends.runelite;\n\nimport java.awt.*;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport com.google.inject.Inject;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.Point;\nimport net.runelite.api.gameval.InterfaceID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.ui.overlay.*;\nimport net.runelite.client.ui.overlay.tooltip.Tooltip;\nimport net.runelite.client.ui.overlay.tooltip.TooltipManager;\n\npublic class WhatPetIsThatOverlay extends Overlay {\n\n\tprivate final Client client;\n\tprivate final WhatPetIsThatPlugin plugin;\n\n\tprivate static final int PETS_ICON_WIDTH \u003d 21;\n\tprivate static final int PETS_ICON_HEIGHT \u003d 14;\n\n\t@Inject\n\tprivate TooltipManager tooltip_manager;\n\n\t@Inject\n\tprivate WhatPetIsThatOverlay(Client client, WhatPetIsThatPlugin plugin) {\n\t\tsuper(plugin);\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.ABOVE_WIDGETS);\n\t\tsetPriority(Overlay.PRIORITY_MED);\n\t\tthis.client \u003d client;\n\t\tthis.plugin \u003d plugin;\n\t}\n\n\tprivate boolean checkVisible(Widget parent, Widget line) {\n\t\tint child_s \u003d line.getRelativeY() + line.getHeight();\n\t\t// Check if child\u0027s south most Y coord is within the base bounds of parent\u0027s\n\t\t// scrolled viewport\n\t\treturn child_s \u003e parent.getScrollY() \u0026\u0026 child_s \u003c parent.getHeight() + parent.getScrollY();\n\t}\n\n\tprivate List\u003cInteger\u003e extractPetIconIds(String pets) {\n\t\tint limit \u003d -Integer.MAX_VALUE / 10;\n\t\tList\u003cInteger\u003e pet_icons \u003d new ArrayList\u003c\u003e();\n\t\tboolean reading \u003d false;\n\t\tint int_cache \u003d 0;\n\t\tfor (int i \u003d 0; i \u003c pets.length(); i++) {\n\t\t\tchar c \u003d pets.charAt(i);\n\t\t\t// If at the start of presumably the numbers\n\t\t\tif (c \u003d\u003d \u0027\u003d\u0027) {\n\t\t\t\treading \u003d true;\n\t\t\t}\n\t\t\t// End reference point\n\t\t\telse if (reading \u0026\u0026 c \u003d\u003d \u0027\u003e\u0027) {\n\t\t\t\treading \u003d false;\n\t\t\t\tpet_icons.add(-int_cache);\n\t\t\t\tint_cache \u003d 0;\n\t\t\t} else if (reading) {\n\t\t\t\t// Accumulating negatively avoids surprises near MAX_VALUE\n\t\t\t\tint digit \u003d Character.digit(c, 10);\n\t\t\t\tif (digit \u003c 0 || int_cache \u003c limit) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tint_cache *\u003d 10;\n\t\t\t\tif (int_cache \u003c limit + digit) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tint_cache -\u003d digit;\n\t\t\t}\n\t\t}\n\t\treturn pet_icons;\n\t}\n\n\tprivate void petsOverlay(Graphics2D graphics) {\n\t\t// Still loading icon data\n\t\tif (plugin.pets_icons_offset \u003d\u003d -1) {\n\t\t\treturn;\n\t\t}\n\t\tPoint mouse_pos \u003d client.getMouseCanvasPosition();\n\t\t// Get the chat box lines\n\n\t\tWidget message_lines \u003d client.getWidget(InterfaceID.Chatbox.SCROLLAREA);\n\t\tif (message_lines \u003d\u003d null || !message_lines.contains(mouse_pos)) {\n\t\t\treturn;\n\t\t}\n\t\tWidget[] lines \u003d message_lines.getChildren();\n\t\tif (lines \u003d\u003d null) {\n\t\t\treturn;\n\t\t}\n\t\tfor (Widget line : lines) {\n\t\t\t// ensure visible, text is not null, and matching pets text\n\t\t\tif (line.getText() !\u003d null\n\t\t\t\t\t\u0026\u0026 checkVisible(message_lines, line)\n\t\t\t\t\t\u0026\u0026 line.getText().contains(\"Pets: (\")\n\t\t\t\t\t\u0026\u0026 line.getText().contains(\"\u003cimg\u003d\")) {\n\t\t\t\t// Get the bounds\n\t\t\t\tRectangle bounds \u003d line.getBounds();\n\t\t\t\t// Get mouse position\n\t\t\t\t// If mouse not-in message bounds, continue\n\t\t\t\tif (!bounds.contains(mouse_pos.getX(), mouse_pos.getY())) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t// Extract the pets list by icon ids\n\t\t\t\tList\u003cInteger\u003e pet_icon_ids \u003d extractPetIconIds(line.getText().substring(line.getText().indexOf(\")\")));\n\n\t\t\t\t// Generate the offset based on the pets width\n\t\t\t\tint petsTextOffset \u003d line.getFont().getTextWidth(\"Pets (\" + pet_icon_ids.size() + \")\");\n\n\t\t\t\t// Is it double height with many pets?\n\t\t\t\tint pets_per_line \u003d pet_icon_ids.size();\n\t\t\t\tif (bounds.height \u003e PETS_ICON_HEIGHT) {\n\t\t\t\t\tpets_per_line \u003d (bounds.width - petsTextOffset) / PETS_ICON_WIDTH;\n\t\t\t\t}\n\n\t\t\t\t// Get the hovered pet by the mouse position within chat line bounds\n\t\t\t\tint icon_pos \u003d Math.floorDiv((int) (mouse_pos.getX() - (petsTextOffset + bounds.getX())),\n\t\t\t\t\t\tPETS_ICON_WIDTH);\n\t\t\t\tif (mouse_pos.getY() \u003e\u003d bounds.getY() + PETS_ICON_HEIGHT) {\n\t\t\t\t\ticon_pos \u003d Math.floorDiv((int) (mouse_pos.getX() - bounds.getX()),\n\t\t\t\t\t\t\tPETS_ICON_WIDTH) + pets_per_line;\n\t\t\t\t}\n\t\t\t\t// If in bounds of a known icon position\n\t\t\t\tif (icon_pos \u003e\u003d 0 \u0026\u0026 icon_pos \u003c pet_icon_ids.size()) {\n\t\t\t\t\tint petIcon \u003d pet_icon_ids.get(icon_pos);\n\t\t\t\t\t// Bounds verification!\n\t\t\t\t\tif (petIcon - plugin.pets_icons_offset \u003e\u003d 0 \u0026\u0026 petIcon - plugin.pets_icons_offset \u003c plugin.pets.length) {\n\t\t\t\t\t\tString name \u003d client.getItemDefinition(plugin.pets[petIcon - plugin.pets_icons_offset]).getName();\n\t\t\t\t\t\t// Draw a tool tip with the pet\u0027s name\n\t\t\t\t\t\ttooltip_manager.add(new Tooltip(\"Pet: \" + name));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics) {\n\t\tpetsOverlay(graphics);\n\t\treturn null;\n\t}\n\n}\n","filePath":"src\\main\\java\\com\\sololegends\\runelite\\WhatPetIsThatOverlay.java"},{"fileName":"WhatPetIsThatPlugin.java","content":"package com.sololegends.runelite;\n\nimport java.awt.image.BufferedImage;\nimport java.util.Arrays;\n\nimport com.google.inject.Inject;\nimport com.google.inject.Provides;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.plugins.*;\nimport net.runelite.client.plugins.chatcommands.ChatCommandsPlugin;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.AsyncBufferedImage;\nimport net.runelite.client.util.ImageUtil;\n\n@Slf4j\n@PluginDescriptor(name \u003d \"What Pet is that Anyway\", description \u003d \"Shows the pet name on hover from the !pets command.\", tags \u003d {\n\t\t\"pets\", \"pet\", \"identify\", \"command\", \"help\", \"icon\" })\n@PluginDependency(ChatCommandsPlugin.class)\npublic class WhatPetIsThatPlugin extends Plugin {\n\n\tpublic int pets_icons_offset \u003d -1;\n\tpublic int[] pets;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread client_thread;\n\n\t@Inject\n\tprivate WhatPetIsThatOverlay pet_overlay;\n\n\t@Inject\n\tprivate OverlayManager overlay_manager;\n\n\t@Inject\n\tprivate ItemManager item_manager;\n\n\t@Override\n\tprotected void startUp() throws Exception {\n\t\tlog.info(\"Starting What\u0027s that pet anyway\");\n\t\toverlay_manager.add(pet_overlay);\n\t\t// Check if game already started\n\t\tif (client.getGameState().equals(GameState.LOGGED_IN)) {\n\t\t\t// INvoke in client thread\n\t\t\tclient_thread.invoke(() -\u003e startup());\n\t\t}\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception {\n\t\tlog.info(\"Stopping What\u0027s that pet anyway!\");\n\t\toverlay_manager.remove(pet_overlay);\n\t}\n\n\tpublic void startup() {\n\t\t// I hate everything about this code block..\n\t\t// but I\u0027m not sure how else to acquire the pet icon offset without this horrid\n\t\t// operation. At least it is only run once..\n\t\tEnumComposition petsEnum \u003d client.getEnum(EnumID.PETS);\n\t\tpets \u003d new int[petsEnum.size()];\n\t\tfor (int i \u003d 0; i \u003c petsEnum.size(); ++i) {\n\t\t\tpets[i] \u003d petsEnum.getIntValue(i);\n\t\t}\n\t\tfinal int pet_id \u003d petsEnum.getIntValue(0);\n\t\tfinal AsyncBufferedImage abi \u003d item_manager.getImage(pet_id);\n\t\tabi.onLoaded(() -\u003e {\n\t\t\tfinal BufferedImage image \u003d ImageUtil.resizeImage(abi, 18, 16);\n\t\t\tfinal IndexedSprite sprite \u003d ImageUtil.getImageIndexedSprite(image, client);\n\t\t\tIndexedSprite[] sprites \u003d client.getModIcons();\n\t\t\tfor (int i \u003d 0; i \u003c sprites.length; i++) {\n\t\t\t\tif (Arrays.equals(sprites[i].getPixels(), sprite.getPixels())) {\n\t\t\t\t\tpets_icons_offset \u003d i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged event) {\n\t\tswitch (event.getGameState()) {\n\t\t\tcase STARTING:\n\t\t\t\tpets_icons_offset \u003d -1;\n\t\t\t\tpets \u003d null;\n\t\t\t\tbreak;\n\t\t\tcase LOGGED_IN:\n\t\t\t\tif (pets_icons_offset \u003d\u003d -1) {\n\t\t\t\t\tstartup();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase CONNECTION_LOST:\n\t\t\tcase HOPPING:\n\t\t\tcase LOADING:\n\t\t\tcase LOGGING_IN:\n\t\t\tcase LOGIN_SCREEN:\n\t\t\tcase LOGIN_SCREEN_AUTHENTICATOR:\n\t\t\tcase UNKNOWN:\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t@Provides\n\tWhatPetIsThatConfig provideConfig(ConfigManager configManager) {\n\t\treturn configManager.getConfig(WhatPetIsThatConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\sololegends\\runelite\\WhatPetIsThatPlugin.java"},{"fileName":"WhatPetIsThatPluginTest.java","content":"package com.sololegends.runelite;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class WhatPetIsThatPluginTest {\n\t@SuppressWarnings(\"unchecked\")\n\tpublic static void main(String[] args) throws Exception {\n\t\tExternalPluginManager.loadBuiltin(WhatPetIsThatPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\sololegends\\runelite\\WhatPetIsThatPluginTest.java"}]},{"commit":"44b74dc55b556c4b32f8daf8bf56801a2befffc1","repository":"https://github.com/Bwana-Ian/Gauntlet-Calculator.git","internalName":"gauntlet-calculator","files":[{"fileName":"GauntletCalculatorPanel.java","content":"package com.gauntletcalculator;\n\nimport lombok.SneakyThrows;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.PluginPanel;\nimport net.runelite.client.ui.components.FlatTextField;\nimport net.runelite.client.util.ImageUtil;\n\nimport javax.inject.Inject;\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.awt.image.BufferedImage;\n\npublic class GauntletCalculatorPanel extends PluginPanel {\n    private int shardCount;\n    private int oreCount;\n    private int linumCount;\n    private int phrenCount;\n    private int frameCount;\n    private int weaponCount;\n    private int grymCount;\n\n    private JComboBox weapon1Combo \u003d new JComboBox();\n    private JComboBox weapon2Combo \u003d new JComboBox();\n    private JComboBox helmCombo \u003d new JComboBox();\n    private JComboBox chestCombo \u003d new JComboBox();\n    private JComboBox legsCombo \u003d new JComboBox();\n    private FlatTextField escapeText \u003d new FlatTextField();\n    private FlatTextField teleportText \u003d new FlatTextField();\n    private FlatTextField potionText \u003d new FlatTextField();\n    private JPanel itemPanel \u003d new JPanel();\n    private String[] types \u003d {\"None\", \"Basic\", \"Attuned\", \"Perfected\"};\n\n    @Inject\n    private GauntletCalculatorPanel(){\n        shardCount \u003d 0;\n        oreCount \u003d 0;\n        linumCount \u003d 0;\n        phrenCount \u003d 0;\n        frameCount \u003d 0;\n        weaponCount \u003d 0;\n        grymCount \u003d 0;\n        this.setPreferredSize(new Dimension(200, 800));\n        this.add(createTitleLabel(\"Gauntlet Calculator\"));\n        styleBoxes();\n\n        itemPanel.setLayout(new GridLayout(0,4));\n        itemPanel.setPreferredSize(new Dimension(200, 100));\n        setItemPanel();\n\n        weapon1Combo.setModel(new DefaultComboBoxModel(types));\n        weapon2Combo.setModel(new DefaultComboBoxModel(types));\n        helmCombo.setModel(new DefaultComboBoxModel(types));\n        chestCombo.setModel(new DefaultComboBoxModel(types));\n        legsCombo.setModel(new DefaultComboBoxModel(types));\n\n        weapon1Combo.setSelectedIndex(0);\n        weapon2Combo.setSelectedIndex(0);\n        helmCombo.setSelectedIndex(0);\n        chestCombo.setSelectedIndex(0);\n        legsCombo.setSelectedIndex(0);\n\n        this.add(getWeapon1());\n        this.add(weapon1Combo);\n        this.add(getWeapon2());\n        this.add(weapon2Combo);\n        this.add(getHelm());\n        this.add(helmCombo);\n        this.add(getBody());\n        this.add(chestCombo);\n        this.add(getLegs());\n        this.add(legsCombo);\n        this.add(getPotion());\n        this.add(potionText);\n        this.add(getTeleport());\n        this.add(teleportText);\n        this.add(getEscape());\n        this.add(escapeText);\n        this.add(createEnterButton());\n        this.add(itemPanel);\n\n    }\n\n    private JLabel createTitleLabel(String title){\n        JLabel label \u003d new JLabel(title, SwingConstants.CENTER);\n        label.setPreferredSize(new Dimension(200, 20));\n        label.setForeground(Color.yellow);\n        return label;\n    }\n\n    private void styleBoxes(){\n        weapon1Combo.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        weapon2Combo.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        helmCombo.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        chestCombo.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        legsCombo.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\n        escapeText.setPreferredSize(new Dimension(PluginPanel.PANEL_WIDTH - 20, 30));\n        escapeText.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        escapeText.setHoverBackgroundColor(ColorScheme.DARK_GRAY_HOVER_COLOR);\n        escapeText.setText(\"0\");\n\n        teleportText.setPreferredSize(new Dimension(PluginPanel.PANEL_WIDTH - 20, 30));\n        teleportText.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        teleportText.setHoverBackgroundColor(ColorScheme.DARK_GRAY_HOVER_COLOR);\n        teleportText.setText(\"0\");\n\n        potionText.setPreferredSize(new Dimension(PluginPanel.PANEL_WIDTH - 20, 30));\n        potionText.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        potionText.setHoverBackgroundColor(ColorScheme.DARK_GRAY_HOVER_COLOR);\n        potionText.setText(\"0\");\n    }\n\n    private JLabel getWeapon1(){\n        JLabel label \u003d new JLabel();\n        label.setToolTipText(\"Weapon 1\");\n        label.setFont(FontManager.getRunescapeFont());\n        label.setText(\"Weapon 1\");\n        label.setForeground(Color.yellow);\n        label.setIcon(new ImageIcon(ImageUtil.loadImageResource(getClass(), \"Crystal_halberd_(perfected).png\")));\n        label.setIconTextGap(10);\n        return label;\n    }\n\n    private JLabel getWeapon2(){\n        JLabel label \u003d new JLabel();\n        label.setToolTipText(\"Weapon 2\");\n        label.setFont(FontManager.getRunescapeFont());\n        label.setText(\"Weapon 2\");\n        label.setForeground(Color.yellow);\n        label.setIcon(new ImageIcon(ImageUtil.loadImageResource(getClass(), \"Crystal_bow_(perfected).png\")));\n        label.setIconTextGap(10);\n        return label;\n    }\n\n    private JLabel getHelm(){\n        JLabel label \u003d new JLabel();\n        label.setToolTipText(\"Helm\");\n        label.setFont(FontManager.getRunescapeFont());\n        label.setText(\"Helm\");\n        label.setForeground(Color.yellow);\n        label.setIcon(new ImageIcon(ImageUtil.loadImageResource(getClass(), \"Crystal_helm_(perfected).png\")));\n        label.setIconTextGap(10);\n        return label;\n    }\n\n    private JLabel getBody(){\n        JLabel label \u003d new JLabel();\n        label.setToolTipText(\"Chest\");\n        label.setFont(FontManager.getRunescapeFont());\n        label.setText(\"Chest Tier\");\n        label.setForeground(Color.yellow);\n        label.setIcon(new ImageIcon(ImageUtil.loadImageResource(getClass(), \"Crystal_body_(perfected).png\")));\n        label.setIconTextGap(10);\n        return label;\n    }\n\n    private JLabel getLegs(){\n        JLabel label \u003d new JLabel();\n        label.setToolTipText(\"Legs\");\n        label.setFont(FontManager.getRunescapeFont());\n        label.setText(\"Legs Tier\");\n        label.setForeground(Color.yellow);\n        label.setIcon(new ImageIcon(ImageUtil.loadImageResource(getClass(), \"Crystal_legs_(perfected).png\")));\n        label.setIconTextGap(10);\n        return label;\n    }\n\n    private JLabel getEscape(){\n        JLabel label \u003d new JLabel();\n        label.setToolTipText(\"Escape\");\n        label.setFont(FontManager.getRunescapeFont());\n        label.setText(\"Escape Crystals\");\n        label.setForeground(Color.yellow);\n        label.setIcon(new ImageIcon(ImageUtil.loadImageResource(getClass(), \"Escape_crystal.png\")));\n        label.setIconTextGap(10);\n        return label;\n    }\n\n    private JLabel getTeleport(){\n        JLabel label \u003d new JLabel();\n        label.setToolTipText(\"Teleport\");\n        label.setFont(FontManager.getRunescapeFont());\n        label.setText(\"Teleport Crystals\");\n        label.setForeground(Color.yellow);\n        label.setIcon(new ImageIcon(ImageUtil.loadImageResource(getClass(), \"Teleport_crystal.png\")));\n        label.setIconTextGap(10);\n        return label;\n    }\n\n    private JLabel getPotion(){\n        JLabel label \u003d new JLabel();\n        label.setToolTipText(\"Potion\");\n        label.setFont(FontManager.getRunescapeFont());\n        label.setText(\"Egniol Potions\");\n        label.setForeground(Color.yellow);\n        label.setIcon(new ImageIcon(ImageUtil.loadImageResource(getClass(), \"Vial.png\")));\n        label.setIconTextGap(10);\n        return label;\n    }\n\n    private void setItemPanel(){\n        itemPanel.removeAll();\n        itemPanel.add(createItemLabel(\"Crystal_shard_1\", String.valueOf(shardCount)));\n        itemPanel.add(createItemLabel(\"Crystal_ore\", String.valueOf(oreCount)));\n        itemPanel.add(createItemLabel(\"Linum_tirinum\", String.valueOf(linumCount)));\n        itemPanel.add(createItemLabel(\"Phren_bark\", String.valueOf(phrenCount)));\n        itemPanel.add(createItemLabel(\"Grym_leaf\", String.valueOf(grymCount)));\n        itemPanel.add(createItemLabel(\"Weapon_frame\", String.valueOf(frameCount)));\n        itemPanel.add(createItemLabel(\"Crystal_spike\", String.valueOf(weaponCount)));\n    }\n\n    private JLabel createItemLabel(String name, String qty){\n        JLabel label \u003d new JLabel();\n        label.setToolTipText(name);\n        label.setHorizontalAlignment(JLabel.CENTER);\n        label.setBorder(BorderFactory.createLineBorder(ColorScheme.DARK_GRAY_COLOR));\n        Icon icon \u003d new ImageIcon(ImageUtil.loadImageResource(getClass(), name + \".png\"));\n        label.setIcon(getLabeledIcon(icon, qty));\n        return label;\n    }\n\n    private Icon getLabeledIcon(Icon old, String qty){\n        int w \u003d old.getIconWidth();\n        int h \u003d old.getIconHeight();\n\n        BufferedImage img \u003d new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);\n        Graphics2D g2d \u003d img.createGraphics();\n        old.paintIcon(null, g2d, 0, 0);\n        g2d.setPaint(Color.white);\n        g2d.drawString(qty, 0, 10);\n        g2d.dispose();\n        return new ImageIcon(img.getScaledInstance(w, h, Image.SCALE_SMOOTH));\n    }\n\n    private JButton createEnterButton() {\n        final JButton label \u003d new JButton(\"Calculate\");\n        label.setPreferredSize(new Dimension(PluginPanel.PANEL_WIDTH - 20, 30));\n        label.setFocusable(false);\n        label.addMouseListener(new MouseAdapter() {\n            @Override\n            public void mouseEntered(MouseEvent e) {\n                label.setBackground(ColorScheme.DARK_GRAY_HOVER_COLOR);\n            }\n\n            @Override\n            public void mouseExited(MouseEvent e) {\n                label.setBackground(ColorScheme.DARK_GRAY_COLOR);\n            }\n\n            @SneakyThrows\n            @Override\n            public void mousePressed(MouseEvent e) {\n                if (e.getButton() \u003d\u003d MouseEvent.BUTTON1) {\n                    label.setText(\"Wait...\");\n                    runCalculation();\n                    setItemPanel();\n                    label.setText(\"Calculate\");\n                }\n            }\n        });\n\n        return label;\n    }\n\n    private void runCalculation() {\n        int escapeX, potionX, teleportX;\n        try {\n            escapeX \u003d Integer.parseInt(escapeText.getText());\n        } catch (Exception e) {\n            escapeX \u003d 0;\n            escapeText.setText(\"0\");\n        }\n        try {\n            potionX \u003d Integer.parseInt(potionText.getText());\n        } catch (Exception e) {\n            potionX \u003d 0;\n            potionText.setText(\"0\");\n        }\n        try {\n            teleportX \u003d Integer.parseInt(teleportText.getText());\n        } catch (Exception e) {\n            teleportX \u003d 0;\n            teleportText.setText(\"0\");\n        }\n\n        shardCount \u003d 0;\n        oreCount \u003d 0;\n        linumCount \u003d 0;\n        phrenCount \u003d 0;\n        frameCount \u003d 0;\n        weaponCount \u003d 0;\n        grymCount \u003d 0;\n        //weapon 1\n        switch (weapon1Combo.getSelectedIndex()) {\n            case 3:\n                weaponCount +\u003d 1;\n            case 2:\n                shardCount +\u003d 60;\n            case 1:\n                shardCount +\u003d 20;\n                frameCount +\u003d 1;\n            default:\n                break;\n        }\n        //weapon 2\n        switch (weapon2Combo.getSelectedIndex()) {\n            case 3:\n                weaponCount +\u003d 1;\n            case 2:\n                shardCount +\u003d 60;\n            case 1:\n                shardCount +\u003d 20;\n                frameCount +\u003d 1;\n            default:\n                break;\n        }\n        //helm\n        switch (helmCombo.getSelectedIndex()) {\n            case 3:\n                shardCount +\u003d 80;\n                oreCount +\u003d 2;\n                phrenCount +\u003d 2;\n                linumCount +\u003d 2;\n            case 2:\n                shardCount +\u003d 60;\n                oreCount +\u003d 1;\n                phrenCount +\u003d 1;\n                linumCount +\u003d 1;\n            case 1:\n                shardCount +\u003d 40;\n                oreCount +\u003d 1;\n                phrenCount +\u003d 1;\n                linumCount +\u003d 1;\n            default:\n                break;\n        }\n\n        //chest\n        switch (chestCombo.getSelectedIndex()) {\n            case 3:\n                shardCount +\u003d 80;\n                oreCount +\u003d 2;\n                phrenCount +\u003d 2;\n                linumCount +\u003d 2;\n            case 2:\n                shardCount +\u003d 60;\n                oreCount +\u003d 2;\n                phrenCount +\u003d 2;\n                linumCount +\u003d 2;\n            case 1:\n                shardCount +\u003d 40;\n                oreCount +\u003d 1;\n                phrenCount +\u003d 1;\n                linumCount +\u003d 1;\n            default:\n                break;\n        }\n\n        //legs\n        switch (legsCombo.getSelectedIndex()) {\n            case 3:\n                shardCount +\u003d 80;\n                oreCount +\u003d 2;\n                phrenCount +\u003d 2;\n                linumCount +\u003d 2;\n            case 2:\n                shardCount +\u003d 60;\n                oreCount +\u003d 1;\n                phrenCount +\u003d 1;\n                linumCount +\u003d 1;\n            case 1:\n                shardCount +\u003d 40;\n                oreCount +\u003d 1;\n                phrenCount +\u003d 1;\n                linumCount +\u003d 1;\n            default:\n                break;\n        }\n\n        //escape\n        shardCount +\u003d escapeX * 200;\n\n        //potion\n        grymCount +\u003d potionX;\n        shardCount +\u003d potionX * 20;\n\n        //teleport\n        shardCount +\u003d teleportX * 40;\n    }\n}\n","filePath":"src\\main\\java\\com\\gauntletcalculator\\GauntletCalculatorPanel.java"},{"fileName":"GauntletCalculatorPlugin.java","content":"package com.gauntletcalculator;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.util.ImageUtil;\n\nimport java.awt.image.BufferedImage;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Gauntlet Calculator\",\n\tdescription \u003d \"Calculates how many crystal shards and resources you need in the Gauntlet\",\n\ttags \u003d {\"Corrupted\", \"Gauntlet\", \"Bwana Ian\", \"Resources\", \"Crystal Shards\"}\n)\npublic class GauntletCalculatorPlugin extends Plugin\n{\n\t@Inject\n\tprivate ClientToolbar clientToolbar;\n\n\tprivate GauntletCalculatorPanel panel;\n\tprivate NavigationButton navButton;\n\n\t@Override\n\tprotected void startUp(){\n\t\tstartPanel();\n\t}\n\n\t@Override\n\tprotected void shutDown(){\n\t\tclientToolbar.removeNavigation(navButton);\n\t}\n\n\tprivate void startPanel(){\n\t\tfinal BufferedImage icon \u003d ImageUtil.loadImageResource(getClass(), \"Crystal_shard.png\");\n\t\tpanel \u003d injector.getInstance(GauntletCalculatorPanel.class);\n\n\t\tnavButton \u003d NavigationButton.builder()\n\t\t\t\t.tooltip(\"Gauntlet Calculator\")\n\t\t\t\t.icon(icon)\n\t\t\t\t.priority(6)\n\t\t\t\t.panel(panel)\n\t\t\t\t.build();\n\n\t\tclientToolbar.addNavigation(navButton);\n\t}\n}\n","filePath":"src\\main\\java\\com\\gauntletcalculator\\GauntletCalculatorPlugin.java"},{"fileName":"GauntletCalculatorPluginTest.java","content":"package com.gauntletcalculator;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class GauntletCalculatorPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(GauntletCalculatorPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\gauntletcalculator\\GauntletCalculatorPluginTest.java"}]},{"commit":"953d9cad520a6ef5dfeb9777bb23bf43eea02949","repository":"https://github.com/tbloody/osrs-membership-alert.git","internalName":"membership-alert","files":[{"fileName":"MembershipAlertConfig.java","content":"package com.membershipalert;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\nimport java.awt.*;\n\n@ConfigGroup(\"membership-alet\")\npublic interface MembershipAlertConfig extends Config {\n    @ConfigItem(\n            keyName \u003d \"membership-days-danger\",\n            name \u003d \"Danger days\",\n            description \u003d \"On how many days to show the danger color\"\n    )\n    default int DangerDays() {\n        return 1;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"membership-color-danger\",\n            name \u003d \"Danger color\",\n            description \u003d \"The color to use for the title on danger\"\n    )\n    default Color DangerColor() {\n        return Color.RED;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"membership-days-warning\",\n            name \u003d \"Warning days\",\n            description \u003d \"On how many days to show the warning color\"\n    )\n    default int WarningDays() {\n        return 3;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"membership-color-warning\",\n            name \u003d \"Warning color\",\n            description \u003d \"The color to use for the title on warning\"\n    )\n    default Color WarningColor() {\n        return Color.ORANGE;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"membership-color-success\",\n            name \u003d \"Success color\",\n            description \u003d \"The color to use for the title when we\u0027re good on membership days\"\n    )\n    default Color SuccessColor() {\n        return Color.GREEN;\n    }\n}\n","filePath":"src\\main\\java\\com\\membershipalert\\MembershipAlertConfig.java"},{"fileName":"MembershipAlertOverlay.java","content":"package com.membershipalert;\n\nimport javax.inject.Inject;\n\nimport net.runelite.api.Client;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.LineComponent;\nimport net.runelite.client.ui.overlay.components.PanelComponent;\nimport net.runelite.client.ui.overlay.components.TitleComponent;\n\nimport java.awt.*;\n\nclass MembershipAlertOverlay extends Overlay {\n    private final Client client;\n    private final MembershipAlertConfig config;\n    private final PanelComponent panelComponent \u003d new PanelComponent();\n\n    private int memberShipDays \u003d 0;\n\n    @Inject\n    private MembershipAlertOverlay(Client client, MembershipAlertConfig config) {\n        setPosition(OverlayPosition.ABOVE_CHATBOX_RIGHT);\n        this.client \u003d client;\n        this.config \u003d config;\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        panelComponent.getChildren().clear();\n        String overlayTitle \u003d \"Membership:\";\n        Color color \u003d config.DangerColor();\n\n        if (memberShipDays \u003e config.DangerDays()) {\n            color \u003d config.WarningColor();\n        }\n\n        if (memberShipDays \u003e config.WarningDays()) {\n            color \u003d config.SuccessColor();\n        }\n\n        panelComponent.getChildren().add(TitleComponent.builder()\n                .text(overlayTitle)\n                .color(color)\n                .build());\n\n        panelComponent.setPreferredSize(new Dimension(\n                graphics.getFontMetrics().stringWidth(overlayTitle) + 30,\n                0));\n\n        panelComponent.getChildren().add(LineComponent.builder()\n                .left(\"Days left:\")\n                .right(Integer.toString(memberShipDays))\n                .build());\n\n        return panelComponent.render(graphics);\n    }\n\n    public void updateMembershipDays(int memberShipDays) {\n        this.memberShipDays \u003d memberShipDays;\n    }\n}\n","filePath":"src\\main\\java\\com\\membershipalert\\MembershipAlertOverlay.java"},{"fileName":"MembershipAlertPlugin.java","content":"package com.membershipalert;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.VarPlayer;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\n@Slf4j\n@PluginDescriptor(\n        name \u003d \"Membership alert\"\n)\npublic class MembershipAlertPlugin extends Plugin {\n    @Inject\n    private Client client;\n\n    @Inject\n    private MembershipAlertConfig config;\n\n    @Inject\n    private MembershipAlertOverlay overlay;\n\n    @Inject\n    private OverlayManager overlayManager;\n\n    private int membershipDays \u003d 0;\n\n    @Override\n    protected void startUp() throws Exception {\n        log.debug(\"Membership alert started!\");\n        overlayManager.add(overlay);\n        membershipDays \u003d client.getVarpValue(VarPlayer.MEMBERSHIP_DAYS);\n    }\n\n    @Override\n    protected void shutDown() throws Exception {\n        overlayManager.remove(overlay);\n        log.debug(\"Membership alert stopped!\");\n    }\n    @Subscribe\n    public void onVarbitChanged(VarbitChanged varBitChanged ) {\n        if(varBitChanged.getVarpId()\u003d\u003dVarPlayer.MEMBERSHIP_DAYS) {\n            int memDays \u003d client.getVarpValue(VarPlayer.MEMBERSHIP_DAYS);\n            if (memDays !\u003d membershipDays) {\n                membershipDays \u003d memDays;\n                client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"Membership days2\", \"Membership days left: \" + membershipDays, null);\n                overlay.updateMembershipDays(memDays);\n                overlayManager.resetOverlay(overlay);\n            }\n        }\n    }\n\n    @Provides\n    MembershipAlertConfig provideConfig(ConfigManager configManager) {\n        return configManager.getConfig(MembershipAlertConfig.class);\n    }\n}\n","filePath":"src\\main\\java\\com\\membershipalert\\MembershipAlertPlugin.java"},{"fileName":"MemberShipAlertPluginTest.java","content":"package com.membershipalert;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class MemberShipAlertPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(MembershipAlertPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\membershipalert\\MemberShipAlertPluginTest.java"}]},{"commit":"aa77c329f4549d1d78ee679059c59f33a1ebfbfa","repository":"https://github.com/DoinkOink/party-map-pin.git","internalName":"party-map-pin","files":[{"fileName":"MapPinConfig.java","content":"package com.doinkoink;\n\nimport net.runelite.client.config.Alpha;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\nimport java.awt.Color;\n\n@ConfigGroup(\"mapPin\")\npublic interface MapPinConfig extends Config\n{\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"mapPinColor\",\n\t\tname \u003d \"Map Pin Color\",\n\t\tdescription \u003d \"Sets the color of your Map Pins.\",\n\t\tposition \u003d 0\n\t)\n\tdefault Color mapPinColor()\n\t{\n\t\treturn new Color(220, 138, 0);\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"pinStyle\",\n\t\tname \u003d \"Map Pin\",\n\t\tdescription \u003d \"Select which map pin you wish to use. (recommended 48x48 image size)\"\n\t)\n\tdefault MapPinImage selectedPin()\n\t{\n\t\treturn MapPinImage.DEFAULT;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"pinSize\",\n\t\tname \u003d \"Map Pin Size\",\n\t\tdescription \u003d \"How large you want the pins on the map.\"\n\t)\n\tdefault int mapPinSize() { return 48; }\n}\n","filePath":"src\\main\\java\\com\\doinkoink\\MapPinConfig.java"},{"fileName":"MapPinImage.java","content":"package com.doinkoink;\n\nimport lombok.Getter;\nimport net.runelite.client.util.ImageUtil;\n\nimport javax.imageio.ImageIO;\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport java.io.IOException;\n\n@Getter\npublic enum MapPinImage {\n\tDEFAULT(\"Default\", \"/default_pin.png\"),\n\tCUSTOM_IMAGE(\"Custom Image\");\n\n\tprivate final String name;\n\tprivate BufferedImage mapPinImage;\n\n\tMapPinImage(String name)\n\t{\n\t\tthis.name \u003d name;\n\t\tthis.mapPinImage \u003d null;\n\t}\n\n\tMapPinImage(String name, String icon)\n\t{\n\t\tthis.name \u003d name;\n\t\tthis.mapPinImage \u003d ImageUtil.loadImageResource(MapPinPlugin.class, icon);\n\t}\n\n\t@Override\n\tpublic String toString()\n\t{\n\t\treturn name;\n\t}\n\n\tpublic void setImage(File fImage) throws IOException\n\t{\n\t\tBufferedImage image;\n\t\tsynchronized (ImageIO.class)\n\t\t{\n\t\t\timage \u003d ImageIO.read(fImage);\n\t\t}\n\t\tthis.mapPinImage \u003d image;\n\t}\n}\n","filePath":"src\\main\\java\\com\\doinkoink\\MapPinImage.java"},{"fileName":"MapPinPlugin.java","content":"package com.doinkoink;\n\nimport com.doinkoink.messages.MapPin;\nimport com.google.inject.Provides;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.MenuEntry;\nimport net.runelite.api.Point;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.MenuOpened;\nimport net.runelite.api.widgets.ComponentID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.worldmap.WorldMap;\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.party.PartyService;\nimport net.runelite.client.party.WSClient;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.worldmap.WorldMapOverlay;\nimport net.runelite.client.ui.overlay.worldmap.WorldMapPoint;\nimport net.runelite.client.ui.overlay.worldmap.WorldMapPointManager;\n\nimport javax.inject.Inject;\nimport java.awt.AlphaComposite;\nimport java.awt.Color;\nimport java.awt.Graphics2D;\nimport java.awt.Image;\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport java.util.HashMap;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Party World Map Ping\"\n)\npublic class MapPinPlugin extends Plugin\n{\n\tprivate static final File CUSTOM_IMAGE_FILE \u003d new File(RuneLite.RUNELITE_DIR, \"custom_pin.png\");\n\n\t@Inject\n\tprivate Client _client;\n\n\t@Inject\n\tprivate MapPinConfig _config;\n\n\t@Inject\n\tprivate WSClient _wsClient;\n\n\t@Inject\n\tprivate PartyService _partyService;\n\n\t@Inject\n\tprivate WorldMapOverlay _worldMapOverlay;\n\n\t@Inject\n\tprivate WorldMapPointManager _worldMapPointManager;\n\n\tpublic HashMap\u003cString, WorldMapPoint\u003e markers \u003d new HashMap\u003c\u003e();\n\n\tprivate static MapPinImage _selectedPin;\n\tprivate static int _pinSize;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\t_wsClient.registerMessage(MapPin.class);\n\n\t\t_pinSize \u003d _config.mapPinSize();\n\t\tupdateMapPinImage();\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\t_wsClient.unregisterMessage(MapPin.class);\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif(event.getGroup().equals(\"mapPin\"))\n\t\t{\n\t\t\tif (event.getKey().equals(\"pinStyle\"))\n\t\t\t{\n\t\t\t\tupdateMapPinImage();\n\t\t\t}\n\t\t\tif (event.getKey().equals(\"pinSize\"))\n\t\t\t{\n\t\t\t\t_pinSize \u003d _config.mapPinSize();\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOpened(final MenuOpened event) {\n\t\tPoint _mousePosOnMenuOpened \u003d _client.getMouseCanvasPosition();\n\n\t\tfinal Widget _map \u003d _client.getWidget(ComponentID.WORLD_MAP_MAPVIEW);\n\n\t\tif (_map \u003d\u003d null) {\n\t\t\treturn;\n\t\t}\n\n\t\tWorldPoint target \u003d calculateMapPoint(_mousePosOnMenuOpened);\n\n\t\tif (_map.getBounds().contains(_client.getMouseCanvasPosition().getX(), _client.getMouseCanvasPosition().getY())) {\n\t\t\tfinal MenuEntry[] _entries \u003d event.getMenuEntries();\n\n\t\t\t_client.getMenu().createMenuEntry(0)\n\t\t\t\t.setOption(\"Send\")\n\t\t\t\t.setTarget(\"\u003ccol\u003dff9040\u003ePin\u003c/col\u003e\")\n\t\t\t\t.onClick(e -\u003e {\n\t\t\t\t\tfinal MapPin _pin \u003d new MapPin(target, _client.getLocalPlayer().getName(), _config.mapPinColor());\n\n\t\t\t\t\tif (_partyService.isInParty()) {\n\t\t\t\t\t\t_partyService.send(_pin);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetTarget(_pin);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tfor(MenuEntry entry : _entries) {\n\t\t\t\tif (entry.getTarget().contains(\"Pin\")) {\n\t\t\t\t\tString _pinOwner \u003d entry.getTarget().split(\"\u0027\")[0].split(\"\u003e\")[1];\n\n\t\t\t\t\t_client.getMenu().createMenuEntry(0)\n\t\t\t\t\t\t.setOption(\"Remove\")\n\t\t\t\t\t\t.setTarget(entry.getTarget())\n\t\t\t\t\t\t.onClick(e -\u003e {\n\t\t\t\t\t\t\tif (markers.containsKey(_pinOwner)) {\n\t\t\t\t\t\t\t\t_worldMapPointManager.removeIf(x -\u003e x \u003d\u003d markers.get(_pinOwner));\n\t\t\t\t\t\t\t\tmarkers.put(_pinOwner, null);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onMapPin(MapPin _mapPin) {\n\t\tsetTarget(_mapPin);\n\t}\n\n\tprivate void setTarget(MapPin _pin) {\n\t\tif (!markers.containsKey(_pin.getMember())) {\n\t\t\tmarkers.put(_pin.getMember(), null);\n\t\t}\n\n\t\tWorldMapPoint _marker \u003d markers.get(_pin.getMember());\n\n\t\tWorldMapPoint _finalMarker \u003d _marker;\n\t\t_worldMapPointManager.removeIf(x -\u003e x \u003d\u003d _finalMarker);\n\n\t\t_marker \u003d new WorldMapPoint(_pin.getMapPoint(), changeColor(_selectedPin.getMapPinImage(), _pin.getPinColor()));\n\t\t_marker.setImagePoint(new Point(_pinSize / 2, _pinSize));\n\t\t_marker.setName(_pin.getMember() + \"\u0027s Pin\");\n\t\t_marker.setTarget(_marker.getWorldPoint());\n\t\t_marker.setJumpOnClick(true);\n\t\t_marker.setSnapToEdge(true);\n\n\t\t_worldMapPointManager.add(_marker);\n\t\tmarkers.put(_pin.getMember(), _marker);\n\t}\n\n\tpublic static BufferedImage changeColor(BufferedImage image, Color replacement_color) {\n\t\tBufferedImage _dimg \u003d new BufferedImage(image.getWidth(), image.getHeight(), BufferedImage.TYPE_INT_ARGB);\n\t\tGraphics2D _graphics2D \u003d _dimg.createGraphics();\n\t\t_graphics2D.setComposite(AlphaComposite.Src);\n\t\t_graphics2D.drawImage(image, null, 0, 0);//w  w w  .ja  v a 2  s . co m\n\t\t_graphics2D.dispose();\n\t\tfor (int i \u003d 0; i \u003c _dimg.getHeight(); i++) {\n\t\t\tfor (int j \u003d 0; j \u003c _dimg.getWidth(); j++) {\n\t\t\t\tint argb \u003d _dimg.getRGB(j, i);\n\t\t\t\tint alpha \u003d (argb \u003e\u003e 24) \u0026 0xff;\n\t\t\t\tif (alpha \u003e 0) {\n\t\t\t\t\tColor col \u003d new Color(replacement_color.getRed(), replacement_color.getGreen(), replacement_color.getBlue(), alpha);\n\t\t\t\t\t_dimg.setRGB(j, i, col.getRGB());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn resize(_dimg);\n\t}\n\n\tpublic static BufferedImage resize(BufferedImage _img)\n\t{\n\t\tImage _temp \u003d _img.getScaledInstance(_pinSize, _pinSize, Image.SCALE_SMOOTH);\n\t\tBufferedImage _dimg \u003d new BufferedImage(_pinSize, _pinSize, BufferedImage.TYPE_INT_ARGB);\n\n\t\tGraphics2D  _graphics2D \u003d _dimg.createGraphics();\n\t\t_graphics2D.drawImage(_temp, 0, 0, null);\n\t\t_graphics2D.dispose();\n\n\t\treturn _dimg;\n\t}\n\n\tprivate WorldPoint calculateMapPoint(Point point) {\n\t\tWorldMap _worldMap \u003d _client.getWorldMap();\n\t\tfloat _zoom \u003d _worldMap.getWorldMapZoom();\n\t\tfinal WorldPoint _mapPoint \u003d new WorldPoint(_worldMap.getWorldMapPosition().getX(), _worldMap.getWorldMapPosition().getY(), 0);\n\t\tfinal Point _middle \u003d _worldMapOverlay.mapWorldPointToGraphicsPoint(_mapPoint);\n\n\t\tfinal int dx \u003d (int) ((point.getX() - _middle.getX()) / _zoom);\n\t\tfinal int dy \u003d (int) ((-(point.getY() - _middle.getY())) / _zoom);\n\n\t\treturn _mapPoint.dx(dx).dy(dy);\n\t}\n\n\tprivate void updateMapPinImage()\n\t{\n\t\t_selectedPin \u003d _config.selectedPin();\n\n\t\tif(_selectedPin \u003d\u003d MapPinImage.CUSTOM_IMAGE)\n\t\t{\n\t\t\tif(CUSTOM_IMAGE_FILE.exists())\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\t_selectedPin.setImage(CUSTOM_IMAGE_FILE);\n\t\t\t\t}\n\t\t\t\tcatch (Exception e)\n\t\t\t\t{\n\t\t\t\t\tlog.error(\"Error setting custom pin\", e);\n\t\t\t\t\t_selectedPin \u003d MapPinImage.DEFAULT;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t_selectedPin \u003d MapPinImage.DEFAULT;\n\t\t\t}\n\t\t}\n\t}\n\n\t@Provides\n\tMapPinConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(MapPinConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\doinkoink\\MapPinPlugin.java"},{"fileName":"MapPin.java","content":"package com.doinkoink.messages;\n\nimport lombok.EqualsAndHashCode;\nimport lombok.Value;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.party.messages.PartyMemberMessage;\n\nimport java.awt.Color;\n\n@Value\n@EqualsAndHashCode(callSuper \u003d true)\npublic class MapPin extends PartyMemberMessage {\n\tprivate final WorldPoint mapPoint;\n\tprivate final String member;\n\tprivate final Color pinColor;\n}\n","filePath":"src\\main\\java\\com\\doinkoink\\messages\\MapPin.java"},{"fileName":"MapPinPluginTest.java","content":"package com.doinkoink;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class MapPinPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(MapPinPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\doinkoink\\MapPinPluginTest.java"}]},{"commit":"a4e6ff530f6c77b1c6d7692b7fa0f3cae56b3324","repository":"https://github.com/ThePharros/probability-calculator.git","internalName":"probability-calculator","files":[{"fileName":"ProbabilityCalculatorConfig.java","content":"package pharros.probabilitycalculator;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.Range;\n\n@ConfigGroup(\"probability_calculator\")\npublic interface ProbabilityCalculatorConfig extends Config\n{\n\t@Range(max \u003d 10)\n\t@ConfigItem(\n\t\tkeyName \u003d \"decimalPlaces\",\n\t\tname \u003d \"Decimal Places\",\n\t\tdescription \u003d \"The maximum number of decimal places to round the output up to\"\n\t)\n\tdefault int getDecimalPlaces()\n\t{\n\t\treturn 2;\n\t}\n}\n","filePath":"src\\main\\java\\pharros\\probabilitycalculator\\ProbabilityCalculatorConfig.java"},{"fileName":"ProbabilityCalculatorInputArea.java","content":"package pharros.probabilitycalculator;\n\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.components.FlatTextField;\n\nimport lombok.Getter;\n\nimport javax.swing.JPanel;\nimport javax.swing.JTextField;\nimport javax.swing.JLabel;\nimport javax.swing.border.EmptyBorder;\nimport java.awt.*;\n\n@Getter\npublic class ProbabilityCalculatorInputArea extends JPanel\n{\n\n    private final JTextField uiDropRate;\n    private final JTextField uiKillCount;\n    private final JTextField uiDropsReceived;\n\n    ProbabilityCalculatorInputArea()\n    {\n        setLayout(new GridLayout(3, 1, 0, 4));\n\n        uiDropRate \u003d addComponent(\"Drop Rate:\");\n        uiKillCount \u003d addComponent(\"Kill Count:\");\n        uiDropsReceived \u003d addComponent(\"Drops Received:\");\n    }\n\n    String getDropRateInput()\n    {\n        JTextField field \u003d uiDropRate;\n        field.setText(field.getText().trim());\n        try\n        {\n            if (field.getText().contains(\"/\") \u0026\u0026 field.getText().replaceAll(\"/\", \"\").length() \u003d\u003d field.getText().length() - 1)\n            {\n                String num \u003d field.getText().split(\"/\")[0];\n                String den \u003d field.getText().split(\"/\")[1];\n                if (tryParseDouble(num) \u0026\u0026 tryParseDouble(den))\n                {\n                    return field.getText();\n                } else\n                {\n                    return \"0.1\";\n                }\n            } else if (tryParseDouble(field.getText()))\n            {\n                return field.getText();\n            } else\n            {\n                return \"0.1\";\n            }\n        } catch (NumberFormatException e)\n        {\n            return \"0.1\";\n        }\n    }\n\n    void setDropRateInput(String value)\n    {\n        setInput(uiDropRate, value);\n    }\n\n    int getKillCountInput()\n    {\n        if (tryParseInt(uiKillCount.getText()))\n        {\n            return Integer.parseInt(uiKillCount.getText());\n        } else\n        {\n            return 100;\n        }\n    }\n\n    void setKillCountInput(int value)\n    {\n        setInput(uiKillCount, value);\n    }\n\n    int getDropsReceivedInput()\n    {\n        if (tryParseInt(uiDropsReceived.getText()))\n        {\n            return Integer.parseInt(uiDropsReceived.getText());\n        } else\n        {\n            return 1;\n        }\n    }\n\n    void setDropsReceivedInput(int value)\n    {\n        setInput(uiDropsReceived, value);\n    }\n\n    private void setInput(JTextField field, Object value)\n    {\n        field.setText(String.valueOf(value));\n    }\n\n    boolean tryParseDouble(String input)\n    {\n        try\n        {\n            Double.parseDouble(input);\n            return true;\n        } catch (NumberFormatException e)\n        {\n            return false;\n        }\n    }\n\n    boolean tryParseInt(String input)\n    {\n        try\n        {\n            {\n                Integer.parseInt(input);\n                return true;\n            }\n        } catch (NumberFormatException e)\n        {\n            return false;\n        }\n    }\n\n    private JTextField addComponent(String label)\n    {\n        final JPanel container \u003d new JPanel();\n        container.setLayout(new GridLayout(1, 2, 0, 4));\n\n        final JLabel uiLabel \u003d new JLabel(label);\n        final FlatTextField uiInput \u003d new FlatTextField();\n\n        uiLabel.setFont(FontManager.getRunescapeSmallFont());\n        uiLabel.setBorder(new EmptyBorder(0, 0, 0, 0));\n        uiLabel.setForeground(Color.WHITE);\n\n        uiInput.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        uiInput.setHoverBackgroundColor(ColorScheme.DARK_GRAY_HOVER_COLOR);\n        uiInput.setBorder(new EmptyBorder(5, 7, 5, 7));\n\n        container.add(uiLabel, BorderLayout.WEST);\n        container.add(uiInput, BorderLayout.EAST);\n\n        add(container);\n\n        return uiInput.getTextField();\n    }\n}\n","filePath":"src\\main\\java\\pharros\\probabilitycalculator\\ProbabilityCalculatorInputArea.java"},{"fileName":"ProbabilityCalculatorOutputArea.java","content":"package pharros.probabilitycalculator;\n\nimport lombok.Setter;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\n\nimport javax.swing.JPanel;\nimport javax.swing.JTextArea;\nimport javax.swing.BorderFactory;\nimport java.awt.*;\nimport java.text.DecimalFormat;\n\n@Setter\npublic class ProbabilityCalculatorOutputArea extends JPanel\n{\n\n    private JTextArea textArea;\n    private double atLeastChance;\n    private double zeroChance;\n    private double exactChance;\n    private long killCount;\n    private long dropsReceived;\n    private double dropRate;\n    private String strAtLeastChance;\n    private String strExactChance;\n    private String strZeroChance;\n    private String outputMsg;\n    private DecimalFormat df;\n    private String dfPattern;\n    private final ProbabilityCalculatorConfig config;\n    private StringBuilder strBldr;\n\n    ProbabilityCalculatorOutputArea(double dropRate, int killCount, int dropsReceived, ProbabilityCalculatorConfig config)\n    {\n        setLayout(new BorderLayout());\n        setBorder(BorderFactory.createLineBorder(ColorScheme.DARKER_GRAY_COLOR, 5));\n        setBackground(ColorScheme.DARK_GRAY_HOVER_COLOR);\n\n        this.killCount \u003d killCount;\n        this.dropsReceived \u003d dropsReceived;\n        this.dropRate \u003d dropRate;\n        this.config \u003d config;\n\n        updatedfPattern();\n\n        calculateProbabilities();\n\n        textArea \u003d new JTextArea(outputMsg);\n        textArea.setEditable(false);\n        textArea.setFont(FontManager.getRunescapeBoldFont());\n        textArea.setLineWrap(true);\n        textArea.setWrapStyleWord(true);\n        add(textArea);\n\n    }\n\n    private double nCx(double n, double x)\n    {\n\n        if (x \u003e n / 2)\n        {\n            x \u003d n - x;\n        }\n\n        double ret \u003d 1.0;\n        for (int i \u003d 1; i \u003c\u003d x; i++)\n        {\n            ret *\u003d (n - x + i);\n            ret /\u003d i;\n        }\n\n        return ret;\n         /*\n         //alternative method of computing nCx\n        if (x \u003c 0 || x \u003e n) {\n            return 0;\n        }\n        if (x \u003d\u003d 0 || x \u003d\u003d n) {\n            return 1;\n        }\n        x \u003d Math.min(x, n-x);\n        double c \u003d 1.0;\n        for (int i \u003d 0; i \u003c\u003d x-1; i++) {\n            c \u003d c * (n - i)/(i + 1);\n        }\n        return c;\n        */\n    }\n\n    private double binomialProb(double n, double x, double p)\n    {\n        return nCx(n, x) * Math.pow(p, x) * (Math.pow(1.0 - p, n - x));\n    }\n\n    void calculateProbabilities()\n    {\n        if (killCount \u003c dropsReceived)\n        {\n            outputMsg \u003d \"You\u0027ve somehow cheated the RNG gods and managed to get more drops than you got kills. What is this sorcery?!\";\n        }\n        else if (dropRate \u003e\u003d 1.0 || dropRate \u003c\u003d 0.0)\n        {\n            outputMsg \u003d \"Please use a drop rate value that is between 0.0 and 1.0, exclusively.\";\n        }\n        else\n        {\n            exactChance \u003d binomialProb(killCount, dropsReceived, dropRate);\n            if (Double.isNaN(exactChance))\n            {\n                outputMsg \u003d \"Your input for kill count or drops received is too large for this calculator. Please user smaller amounts.\";\n                return;\n            }\n            zeroChance \u003d Math.pow(1.0 - dropRate, killCount);\n            if (Double.isNaN(zeroChance))\n            {\n                outputMsg \u003d \"Your input for kill count or drops received is too large for this calculator. Please user smaller amounts.\";\n                return;\n            }\n            if (dropsReceived \u003d\u003d 1.0)\n            {\n                atLeastChance \u003d 1.0 - zeroChance;\n            }\n            else\n            {\n                atLeastChance \u003d 0.0;\n                for (int i \u003d 0; i \u003c dropsReceived; i++)\n                {\n                    atLeastChance +\u003d binomialProb(killCount, i, dropRate);\n                }\n                atLeastChance \u003d 1.0 - atLeastChance;\n                if (Double.isNaN(atLeastChance))\n                {\n                    outputMsg \u003d \"Your input for kill count or drops received is too large for this calculator. Please user smaller amounts.\";\n                    return;\n                }\n            }\n\n            strAtLeastChance \u003d df.format(Math.abs(atLeastChance * 100.0));\n            if (strAtLeastChance.equals(\"0\") || strAtLeastChance.equals(\"100\"))\n            {\n                strAtLeastChance \u003d \"~\" + strAtLeastChance;\n            }\n            strExactChance \u003d df.format(Math.abs(exactChance * 100.0));\n            if (strExactChance.equals(\"0\") || strExactChance.equals(\"100\"))\n            {\n                strExactChance \u003d \"~\" + strExactChance;\n            }\n            strZeroChance \u003d df.format(Math.abs(zeroChance * 100.0));\n            if (strZeroChance.equals(\"0\") || strZeroChance.equals(\"100\"))\n            {\n                strZeroChance \u003d \"~\" + strZeroChance;\n            }\n\n            outputMsg \u003d \"At \" + killCount + \" kill(s), \" + dropsReceived + \" drop(s), and a drop rate of \" + dropRate + \", your chances are:\\n\\n\" +\n                \"Chance to get at least \" + dropsReceived + \" drop(s):\\n\" + strAtLeastChance + \"%\\n\\n\" +\n                \"Chance to get exactly \" + dropsReceived + \" drop(s):\\n\" + strExactChance + \"%\\n\\n\" +\n                \"Chance to get zero drops:\\n\" + strZeroChance + \"%\\n\\n\" + \"\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\\n\\n\" + \"Expected drop(s) for given input:\\n\" + (int)Math.round(dropRate*killCount) +\n                \"\\n\\nExpected kill count for given input:\\n\" + (int)Math.ceil(dropsReceived/dropRate);\n        }\n    }\n\n    void updateTextArea()\n    {\n        remove(textArea);\n        updatedfPattern();\n        calculateProbabilities();\n        textArea \u003d new JTextArea(outputMsg);\n        textArea.setEditable(false);\n        textArea.setFont(FontManager.getRunescapeBoldFont());\n        textArea.setLineWrap(true);\n        textArea.setWrapStyleWord(true);\n        add(textArea);\n        revalidate();\n        repaint();\n    }\n\n    private void updatedfPattern()\n    {\n        if (config.getDecimalPlaces() \u003e 0)\n        {\n            strBldr \u003d new StringBuilder();\n            strBldr.append(\"#.\");\n            for (int i \u003d 0; i \u003c config.getDecimalPlaces(); i++)\n            {\n                strBldr.append(\"#\");\n            }\n            dfPattern \u003d strBldr.toString();\n        }\n        else\n        {\n            dfPattern \u003d \"#\";\n        }\n        df \u003d new DecimalFormat(dfPattern);\n    }\n\n}\n","filePath":"src\\main\\java\\pharros\\probabilitycalculator\\ProbabilityCalculatorOutputArea.java"},{"fileName":"ProbabilityCalculatorPanel.java","content":"package pharros.probabilitycalculator;\n\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.PluginPanel;\n\nimport javax.swing.border.EmptyBorder;\nimport java.awt.*;\n\nclass ProbabilityCalculatorPanel extends PluginPanel\n{\n\n    private ProbabilityCalculatorInputArea inputArea;\n    private ProbabilityCalculatorOutputArea outputArea;\n\n    ProbabilityCalculatorPanel(ProbabilityCalculatorInputArea inputArea, ProbabilityCalculatorOutputArea outputArea)\n    {\n        super();\n        this.inputArea \u003d inputArea;\n        this.outputArea \u003d outputArea;\n        setBorder(new EmptyBorder(10, 10, 10, 10));\n        setLayout(new GridBagLayout());\n\n        GridBagConstraints c \u003d new GridBagConstraints();\n        c.fill \u003d GridBagConstraints.HORIZONTAL;\n        c.weightx \u003d 1;\n        c.gridx \u003d 0;\n        c.gridy \u003d 0;\n\n        inputArea.setBorder(new EmptyBorder(12, 0, 12, 0));\n        inputArea.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n        add(inputArea, c);\n        c.gridy++;\n        add(outputArea, c);\n        c.gridy++;\n    }\n\n    /*\n    void init(ProbabilityCalculatorConfig config) {\n\n    }\n    */\n\n}\n","filePath":"src\\main\\java\\pharros\\probabilitycalculator\\ProbabilityCalculatorPanel.java"},{"fileName":"ProbabilityCalculatorPlugin.java","content":"package pharros.probabilitycalculator;\n\nimport com.google.inject.Provides;\n\nimport javax.inject.Inject;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.util.ImageUtil;\n\nimport java.awt.event.FocusAdapter;\nimport java.awt.event.FocusEvent;\nimport java.awt.image.BufferedImage;\nimport java.util.function.Consumer;\n\n@Slf4j\n@PluginDescriptor(\n    name \u003d \"Probability Calculator\"\n)\npublic class ProbabilityCalculatorPlugin extends Plugin\n{\n    @Inject\n    private Client client;\n\n    @Inject\n    private ProbabilityCalculatorConfig config;\n\n    @Inject\n    private ClientToolbar clientToolbar;\n\n    private ProbabilityCalculatorPanel panel;\n    private ProbabilityCalculatorInputArea input;\n    private ProbabilityCalculatorOutputArea output;\n    private NavigationButton navButton;\n    private double dropRate \u003d 1.0 / 100;\n    private int killCount \u003d 100;\n    private int dropsReceived \u003d 1;\n\n    @Override\n    protected void startUp()\n    {\n        log.info(\"prob-calc: Plugin started!\");\n        input \u003d new ProbabilityCalculatorInputArea();\n        output \u003d new ProbabilityCalculatorOutputArea(dropRate, killCount, dropsReceived, config);\n        panel \u003d new ProbabilityCalculatorPanel(input, output);\n        //panel.init(config);\n\n        final BufferedImage icon \u003d ImageUtil.getResourceStreamFromClass(ProbabilityCalculatorPlugin.class, \"probabilitycalculator_icon.png\");\n\n        //Action listeners\n        input.getUiDropRate().addActionListener(e -\u003e\n            onFieldDropRateUpdated());\n        input.getUiKillCount().addActionListener(e -\u003e\n            onFieldKillCountUpdated());\n        input.getUiDropsReceived().addActionListener(e -\u003e\n            onFieldDropsReceivedUpdated());\n\n        //Focus listeners\n        input.getUiDropRate().addFocusListener(buildFocusAdapter(e -\u003e onFieldDropRateUpdated()));\n        input.getUiKillCount().addFocusListener(buildFocusAdapter(e -\u003e onFieldKillCountUpdated()));\n        input.getUiDropsReceived().addFocusListener(buildFocusAdapter(e -\u003e onFieldDropsReceivedUpdated()));\n\n        updateInputFields();\n\n        navButton \u003d NavigationButton.builder()\n            .tooltip(\"Probability Calculator\")\n            .icon(icon)\n            .priority(7)\n            .panel(panel)\n            .build();\n\n        clientToolbar.addNavigation(navButton);\n\n    }\n\n    private void onFieldDropRateUpdated()\n    {\n        if (input.getDropRateInput().contains(\"/\"))\n        {\n            String num \u003d input.getDropRateInput().split(\"/\")[0];\n            String den \u003d input.getDropRateInput().split(\"/\")[1];\n            dropRate \u003d Double.parseDouble(num) / Double.parseDouble(den);\n        } else\n        {\n            dropRate \u003d Double.parseDouble(input.getDropRateInput());\n        }\n        updateInputFields();\n    }\n\n    private void onFieldKillCountUpdated()\n    {\n        killCount \u003d input.getKillCountInput();\n        updateInputFields();\n    }\n\n    private void onFieldDropsReceivedUpdated()\n    {\n        dropsReceived \u003d input.getDropsReceivedInput();\n        updateInputFields();\n    }\n\n    private void updateInputFields()\n    {\n        input.setDropRateInput(input.getDropRateInput());\n        input.setDropsReceivedInput(dropsReceived);\n        input.setKillCountInput(killCount);\n\n        output.setDropRate(dropRate);\n        output.setKillCount(killCount);\n        output.setDropsReceived(dropsReceived);\n        output.updateTextArea();\n\n        log.info(\"prob-calc: Input fields updated!\");\n    }\n\n    private FocusAdapter buildFocusAdapter(Consumer\u003cFocusEvent\u003e focusLostConsumer)\n    {\n        return new FocusAdapter()\n        {\n            @Override\n            public void focusLost(FocusEvent e)\n            {\n                focusLostConsumer.accept(e);\n            }\n        };\n    }\n\n    @Override\n    protected void shutDown()\n    {\n        clientToolbar.removeNavigation(navButton);\n        log.info(\"prob-calc: Plugin stopped!\");\n    }\n\n    @Provides\n    ProbabilityCalculatorConfig provideConfig(ConfigManager configManager)\n    {\n        return configManager.getConfig(ProbabilityCalculatorConfig.class);\n    }\n}\n","filePath":"src\\main\\java\\pharros\\probabilitycalculator\\ProbabilityCalculatorPlugin.java"},{"fileName":"ProbabilityCalculatorPluginTest.java","content":"package pharros.probabilitycalculator;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ProbabilityCalculatorPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(ProbabilityCalculatorPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\pharros\\probabilitycalculator\\ProbabilityCalculatorPluginTest.java"}]},{"commit":"849c0878f9f94c163a803fe6870f2e318c0a27d4","repository":"https://github.com/bloogeyz/high-alc-value.git","internalName":"high-alc-highlight","files":[{"fileName":"FireRuneSource.java","content":"package com.highalchighlight.config;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum FireRuneSource {\n    STAFF(\"Fire Staff\"),\n    TOME(\"Tome of Fire\"),\n    RUNES(\"Fire Runes\");\n\n    private final String name;\n\n    @Override\n    public String toString()\n    {\n        return name;\n    }\n}\n","filePath":"src\\main\\java\\com\\highalchighlight\\config\\FireRuneSource.java"},{"fileName":"HighAlcHighlightConfig.java","content":"package com.highalchighlight;\n\nimport lombok.AllArgsConstructor;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport com.highalchighlight.config.FireRuneSource;\n\nimport java.awt.Color;\n\n@ConfigGroup(\"highalchighlight\")\npublic interface HighAlcHighlightConfig extends Config\n{\n\t@ConfigItem(\n\t\tposition \u003d 1,\n\t\tkeyName \u003d \"usingBryo\",\n\t\tname \u003d \"Using Bryophyta\u0027s Staff\",\n\t\tdescription \u003d \"Configures if you are using Bryophyta\u0027s Staff.\"\n\t)\n\tdefault boolean useBryoStaff() {return false;}\n\n\t@ConfigItem(\n\t\tposition \u003d 2,\n\t\tkeyName \u003d \"fireRuneSource\",\n\t\tname \u003d \"Source of Fire Runes\",\n\t\tdescription \u003d \"Configures what source of fire runes you are using.\"\n\t)\n\tdefault FireRuneSource fireRuneSource() { return FireRuneSource.STAFF; }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 3,\n\t\t\tkeyName \u003d \"useGE\",\n\t\t\tname \u003d \"Use GE Price for Nature Runes\",\n\t\t\tdescription \u003d \"Fetch the price of Nature Runes from the GE (Ironmen should set this to off)\"\n\t)\n\tdefault boolean useGE() {return true;}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 4,\n\t\t\tkeyName \u003d \"useGEPrices\",\n\t\t\tname \u003d \"Use GE Price for Item\",\n\t\t\tdescription \u003d \"Fetch the price of the item for High Alc calculation, otherwise just uses HA Value - Cast Cost\"\n\t)\n\tdefault boolean useGEPrices() {return true;}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 5,\n\t\t\tkeyName \u003d \"overridePrice\",\n\t\t\tname \u003d \"Nature rune cost\",\n\t\t\tdescription \u003d \"If the Nature Rune GE price is not used this is the price for Nature Runes that will be used.\"\n\t)\n\tdefault int overridePrice() {return 203;}\n\n\t@ConfigItem(\n\t\tposition \u003d 6,\n\t\tkeyName \u003d \"useGradientMode\",\n\t\tname \u003d \"Gradient Mode\",\n\t\tdescription \u003d \"Enabling this setting will cause items to be highlighted in a gradient color from your Highlight Colour to your High-Profit Colour based on profitability.\"\n\t)\n\tdefault boolean useGradientMode() {return true;}\n\n\t@ConfigItem(\n\t\tposition \u003d 7,\n\t\tkeyName \u003d \"HighlightColour\",\n\t\tname \u003d \"Highlight Colour\",\n\t\tdescription \u003d \"Highlight colour of profitable items\"\n\t)\n\tdefault Color getColour() {return Color.WHITE;}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 8,\n\t\t\tkeyName \u003d \"highProfitValue\",\n\t\t\tname \u003d \"High-Profit Threshold\",\n\t\t\tdescription \u003d \"The price for high-profit highlighting.\"\n\t)\n\tdefault int highProfitValue() { return 300; }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 9,\n\t\t\tkeyName \u003d \"highProfitColour\",\n\t\t\tname \u003d \"High-Profit Colour\",\n\t\t\tdescription \u003d \"Highlight colour of items that are high-profit.\"\n\t)\n\tdefault Color getHighProfitColour() {return Color.GREEN;}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 10,\n\t\t\tkeyName \u003d \"highlightUnsellables\",\n\t\t\tname \u003d \"Highlight Unsellables\",\n\t\t\tdescription \u003d \"If enabled, highlights items that would make a profit but cannot be sold on the GE\"\n\t)\n\tdefault boolean highlightUnsellables() {return true;}\n\n\t@ConfigItem(\n\t\tposition \u003d 11,\n\t\tkeyName \u003d \"unsellableHighlightColour\",\n\t\tname \u003d \"Unsellables Colour\",\n\t\tdescription \u003d \"Colour to show if Highlight Unsellables is checked\"\n\t)\n\tdefault Color getUnsellableColour() {return Color.YELLOW;}\n\n\t@AllArgsConstructor\n\tenum HighlightLocationType\n\t{\n\t\tBOTH(\"Both\"),\n\t\tBANK(\"Bank\"),\n\t\tINVENTORY(\"Inventory\");\n\n\t\tprivate final String value;\n\n\t\t@Override\n\t\tpublic String toString()\n\t\t{\n\t\t\treturn value;\n\t\t}\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 3,\n\t\tkeyName \u003d \"highlightLocation\",\n\t\tname \u003d \"Highlight\",\n\t\tdescription \u003d \"Colour to show if Highlight Unsellables is checked\"\n\t)\n\tdefault HighlightLocationType getHighlightLocation() {return HighlightLocationType.BOTH;}\n}\n","filePath":"src\\main\\java\\com\\highalchighlight\\HighAlcHighlightConfig.java"},{"fileName":"HighAlcHighlightOverlay.java","content":"package com.highalchighlight;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.api.ItemID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetInfo;\nimport net.runelite.api.widgets.WidgetItem;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.overlay.WidgetItemOverlay;\n\nimport com.highalchighlight.config.FireRuneSource;\n\nimport javax.inject.Inject;\nimport java.awt.Color;\nimport java.awt.Graphics2D;\nimport java.awt.Rectangle;\nimport java.awt.image.BufferedImage;\n\npublic class HighAlcHighlightOverlay extends WidgetItemOverlay\n{\n\tprivate final Client client;\n    private final ItemManager itemManager;\n    private final HighAlcHighlightConfig config;\n    @Inject\n    private HighAlcHighlightOverlay(Client client, ItemManager itemManager, HighAlcHighlightPlugin plugin, HighAlcHighlightConfig config)\n    {\n    \tthis.client \u003d client;\n        this.itemManager \u003d itemManager;\n        this.config \u003d config;\n        showOnInventory();\n        showOnBank();\n    }\n\n    @Override\n    public void renderItemOverlay(Graphics2D graphics, int itemId, WidgetItem itemWidget)\n    {\n        if (checkInterfaceIsHighlightable(itemWidget)) {\n            int gePrice \u003d itemManager.getItemPrice(itemId);\n            if (gePrice \u003e\u003d 100)\n            {\n                if (gePrice \u003e 499999999) {\n                    gePrice \u003d gePrice - 5000000;\n                }\n                gePrice \u003d gePrice - gePrice/100;\n            }\n\n            int profitPerCast \u003d getProfit(itemId, gePrice);\n            boolean isSellable \u003d isSellable(gePrice);\n\n            if ((profitPerCast \u003e 0) \u0026\u0026 (isSellable || config.highlightUnsellables())) {\n                Color colorToUse \u003d getColor(profitPerCast, isSellable);\n\n                Rectangle bounds \u003d itemWidget.getCanvasBounds();\n                final BufferedImage outline \u003d itemManager.getItemOutline(itemId, itemWidget.getQuantity(), colorToUse);\n                graphics.drawImage(outline, (int) bounds.getX(), (int) bounds.getY(), null);\n            }\n        }\n    }\n\n\tprivate boolean checkInterfaceIsHighlightable(WidgetItem itemWidget)\n\t{\n\t\tif (config.getHighlightLocation() !\u003d HighAlcHighlightConfig.HighlightLocationType.BOTH)\n\t\t{\n\t\t\tWidget bankWidget \u003d client.getWidget(WidgetInfo.BANK_ITEM_CONTAINER);\n\t\t\tif (bankWidget !\u003d null \u0026\u0026 config.getHighlightLocation() \u003d\u003d HighAlcHighlightConfig.HighlightLocationType.BANK)\n\t\t\t{\n\t\t\t\treturn bankWidget.getId() \u003d\u003d itemWidget.getWidget().getId();\n\t\t\t}\n\t\t\tWidget inventoryWidget \u003d client.getWidget(WidgetInfo.INVENTORY);\n\t\t\tWidget bankInventoryWidget \u003d client.getWidget(WidgetInfo.BANK_INVENTORY_ITEMS_CONTAINER);\n\t\t\tif (inventoryWidget !\u003d null \u0026\u0026 config.getHighlightLocation() \u003d\u003d HighAlcHighlightConfig.HighlightLocationType.INVENTORY)\n\t\t\t{\n\t\t\t    if (bankInventoryWidget !\u003d null) {\n\t\t\t        return bankInventoryWidget.getId() \u003d\u003d itemWidget.getWidget().getId();\n                }\n\n\t\t\t\treturn inventoryWidget.getId() \u003d\u003d itemWidget.getWidget().getId();\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n    private int getProfit(int itemId, int gePrice)\n    {\n\n        ItemComposition itemDef \u003d itemManager.getItemComposition(itemId);\n\n        int haPrice \u003d itemDef.getHaPrice();\n\n        int fireRunePrice \u003d itemManager.getItemPrice(ItemID.FIRE_RUNE);\n        int natureRunePrice;\n        if (config.useGE())\n        {\n            natureRunePrice \u003d itemManager.getItemPrice(ItemID.NATURE_RUNE);\n        }\n        else\n        {\n            natureRunePrice \u003d config.overridePrice();\n        }\n        int fireRuneMultiplier \u003d 0;\n        if (config.fireRuneSource() \u003d\u003d FireRuneSource.RUNES) {\n            fireRuneMultiplier \u003d 5;\n        }\n\n        double natureRuneMultiplier \u003d 1.0;\n        if (config.useBryoStaff()) {\n            natureRuneMultiplier \u003d 0.9375;\n        }\n\n        int castCost \u003d (fireRunePrice * fireRuneMultiplier) + (int) Math.ceil(natureRunePrice * natureRuneMultiplier);\n\n        if (config.useGEPrices())\n        {\n            return haPrice - gePrice - castCost;\n        }\n        else\n        {\n            return haPrice - castCost;\n        }\n    }\n\n    private boolean isSellable(int gePrice) { return (gePrice \u003e 0); }\n\n    private Color getColor(int profitPerCast, boolean isSellable)\n    {\n        if (!isSellable) {\n            return config.getUnsellableColour();\n        }\n\n        if (config.useGradientMode()) {\n            double percent \u003d Math.min(((double) profitPerCast) / config.highProfitValue(), 1.0);\n\n            return getGradientColor(config.getColour(), config.getHighProfitColour(), percent);\n        } else {\n            if (profitPerCast \u003e\u003d config.highProfitValue()) {\n                return config.getHighProfitColour();\n            } else {\n                return config.getColour();\n            }\n        }\n    }\n\n    private Color getGradientColor(Color lowColor, Color highColor, double percent)\n    {\n        int newRed \u003d findStep(lowColor.getRed(), highColor.getRed(), percent);\n        int newGreen \u003d findStep(lowColor.getGreen(), highColor.getGreen(), percent);\n        int newBlue \u003d findStep(lowColor.getBlue(), highColor.getBlue(), percent);\n\n        return new Color(newRed, newGreen, newBlue);\n    }\n\n    private int findStep(int low, int high, double percent)\n    {\n        return (int) (low + (high-low)*percent);\n    }\n}\n","filePath":"src\\main\\java\\com\\highalchighlight\\HighAlcHighlightOverlay.java"},{"fileName":"HighAlcHighlightPlugin.java","content":"package com.highalchighlight;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.menus.MenuManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\n@Slf4j\n@PluginDescriptor(\n\t\tname \u003d \"High Alc Profit\",\n\t\tdescription \u003d \"Highlights any item in your backpack or bank that would be profit to high alc\",\n\t\ttags \u003d {\"highlight\", \"items\", \"overlay\"},\n\t\tenabledByDefault \u003d false\n)\npublic class HighAlcHighlightPlugin extends Plugin {\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Inject\n\tprivate HighAlcHighlightConfig config;\n\n\t@Inject\n\tprivate MenuManager menuManager;\n\n\t@Inject\n\tprivate HighAlcHighlightOverlay overlay;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Provides\n\tHighAlcHighlightConfig provideConfig(ConfigManager configManager) {\n\t\treturn configManager.getConfig(HighAlcHighlightConfig.class);\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception {\n\t\toverlayManager.add(overlay);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception {\n\t\toverlayManager.remove(overlay);\n\t}\n}\n","filePath":"src\\main\\java\\com\\highalchighlight\\HighAlcHighlightPlugin.java"},{"fileName":"HighAlcHighlightTest.java","content":"package com.highalchighlight;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class HighAlcHighlightTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(HighAlcHighlightPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\highalchighlight\\HighAlcHighlightTest.java"}]},{"commit":"d40c78236f90eb38890cf7b0985d007f6fb28020","repository":"https://github.com/OmbudRov/PartyPoints.git","internalName":"party-points","files":[{"fileName":"PartyData.java","content":"package com.partypoints.data;\n\nimport java.awt.Color;\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport lombok.Setter;\nimport net.runelite.client.ui.overlay.components.PanelComponent;\n\n@Setter\n@Getter\n@RequiredArgsConstructor\npublic class PartyData\n{\n\tprivate final long memberId;\n\tprivate final PanelComponent panelComponent \u003d new PanelComponent();\n\tprivate Color color \u003d Color.white;\n\n\tprivate int PersonalPoints;\n}\n","filePath":"src\\main\\java\\com\\partypoints\\data\\PartyData.java"},{"fileName":"StatUpdate.java","content":"package com.partypoints.data;\n\nimport com.google.gson.annotations.SerializedName;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\nimport lombok.NoArgsConstructor;\nimport net.runelite.client.party.messages.PartyMemberMessage;\n\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@EqualsAndHashCode(callSuper \u003d true)\npublic class StatUpdate extends PartyMemberMessage\n{\n\t@SerializedName(\"n\")\n\tprivate String cName;\n\n\t@SerializedName(\"pp\")\n\tprivate Integer CurrentPersonalPoints;\n\n}\n","filePath":"src\\main\\java\\com\\partypoints\\data\\StatUpdate.java"},{"fileName":"PartyPointsConfig.java","content":"package com.partypoints;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(PartyPointsConfig.GROUP)\npublic interface PartyPointsConfig extends Config\n{\n\tString GROUP \u003d \"PartyPoints\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"AlwaysShowIcon\",\n\t\tname \u003d \"Always show sidebar\",\n\t\tdescription \u003d \"Controls whether the sidebar icon is always shown or only shown while in a party \"\n\t)\n\tdefault boolean AlwaysShowIcon()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"ShowPartyPassphrase\",\n\t\tname \u003d \"Show Party Passphrase\",\n\t\tdescription \u003d \"Controls whether the party passphrase is displayed within the UI\"\n\t)\n\tdefault boolean ShowPartyPassphrase()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"Overlay\",\n\t\tname \u003d \"Show Overlay\",\n\t\tdescription \u003d \"Controls whether the overlay is displayed\"\n\t)\n\tdefault boolean ShowOverlay()\n\t{\n\t\treturn true;\n\t}\n\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"previousPartyId\",\n\t\tname \u003d \"\",\n\t\tdescription \u003d \"\",\n\t\thidden \u003d true\n\t)\n\tdefault String previousPartyId()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"previousPartyId\",\n\t\tname \u003d \"\",\n\t\tdescription \u003d \"\",\n\t\thidden \u003d true\n\t)\n\tvoid setPreviousPartyId(String id);\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"overlayThreshold\",\n\t\tname \u003d \"Overlay Threshold\",\n\t\tdescription \u003d \"Set the mininmum points needed to be displayed on the overlay\"\n\t)\n\tdefault int overlayThreshold()\n\t{\n\t\treturn 1000;\n\t}\n}\n","filePath":"src\\main\\java\\com\\partypoints\\PartyPointsConfig.java"},{"fileName":"PartyPointsMembers.java","content":"package com.partypoints;\n\nimport com.partypoints.data.PartyData;\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport javax.swing.BorderFactory;\nimport javax.swing.ImageIcon;\nimport javax.swing.JComponent;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.SwingConstants;\nimport javax.swing.border.Border;\nimport javax.swing.border.EmptyBorder;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.party.PartyMember;\nimport net.runelite.client.party.PartyService;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.components.MouseDragEventForwarder;\nimport net.runelite.client.util.ImageUtil;\n\npublic class PartyPointsMembers extends JPanel\n{\n\tprivate final PartyData memberPartyData;\n\tprivate final PartyService partyService;\n\n\tprivate final JLabel name \u003d new JLabel();\n\tprivate final JLabel avatar \u003d new JLabel();\n\n\tprivate final JLabel PP \u003d new JLabel();\n\n\tprivate final PartyPointsConfig config;\n\n\tprivate boolean avatarSet;\n\n\tprivate PartyPointsPlugin plugin;\n\n\tPartyPointsMembers(final PartyPointsPlugin plugin, final PartyPointsConfig config, final JComponent panel, final PartyData memberPartyData, final PartyService partyService)\n\t{\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t\tthis.memberPartyData \u003d memberPartyData;\n\t\tthis.partyService \u003d partyService;\n\n\t\tsetLayout(new BorderLayout());\n\t\tsetBorder(new EmptyBorder(5, 0, 0, 0));\n\n\t\tfinal JPanel container \u003d new JPanel();\n\t\tcontainer.setLayout(new BorderLayout());\n\t\tcontainer.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tcontainer.setBorder(new EmptyBorder(5, 5, 5, 5));\n\n\t\tBorder border \u003d BorderFactory.createLineBorder(ColorScheme.DARKER_GRAY_COLOR, 1);\n\t\tavatar.setBorder(border);\n\n\t\tavatar.setHorizontalAlignment(SwingConstants.CENTER);\n\t\tavatar.setVerticalAlignment(SwingConstants.CENTER);\n\t\tavatar.setPreferredSize(new Dimension(35, 35));\n\n\t\tfinal JPanel headerPanel \u003d new JPanel();\n\t\theaderPanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\theaderPanel.setLayout(new BorderLayout());\n\t\theaderPanel.setBorder(new EmptyBorder(0, 0, 3, 0));\n\n\t\tfinal JPanel namesPanel \u003d new JPanel();\n\t\tnamesPanel.setLayout(new BorderLayout());\n\t\tnamesPanel.setBorder(new EmptyBorder(0, 0, 3, 0));\n\t\tnamesPanel.setBorder(new EmptyBorder(2, 5, 2, 5));\n\n\t\tfinal JPanel PPPanel \u003d new JPanel();\n\t\tPPPanel.setLayout(new BorderLayout());\n\t\tPPPanel.setBorder(new EmptyBorder(0, 0, 3, 0));\n\t\tPPPanel.setBorder(new EmptyBorder(2, 5, 2, 5));\n\n\t\tname.setFont(FontManager.getRunescapeFont());\n\t\tname.putClientProperty(\"html.disable\", Boolean.TRUE);\n\n\t\tPP.setFont(FontManager.getRunescapeFont());\n\t\tPP.putClientProperty(\"html.disable\", Boolean.TRUE);\n\n\t\tnamesPanel.add(name);\n\n\t\tPPPanel.add(PP);\n\n\t\theaderPanel.add(avatar, BorderLayout.WEST);\n\t\theaderPanel.add(namesPanel, BorderLayout.CENTER);\n\t\theaderPanel.add(PPPanel, BorderLayout.EAST);\n\n\t\tcontainer.add(headerPanel, BorderLayout.NORTH);\n\t\tMouseDragEventForwarder mouseDragEventForwarder \u003d new MouseDragEventForwarder(panel);\n\t\tcontainer.addMouseListener(mouseDragEventForwarder);\n\t\tcontainer.addMouseMotionListener(mouseDragEventForwarder);\n\n\t\tadd(container, BorderLayout.NORTH);\n\n\t\tupdate(plugin);\n\t}\n\n\tvoid update(final PartyPointsPlugin plugin)\n\t{\n\t\tPartyPointsOverlay partyPointsOverlay \u003d new PartyPointsOverlay(this.plugin, config);\n\t\tfinal PartyMember member \u003d partyService.getMemberById(memberPartyData.getMemberId());\n\t\tif (!avatarSet \u0026\u0026 member.getAvatar() !\u003d null)\n\t\t{\n\t\t\tImageIcon icon \u003d new ImageIcon(ImageUtil.resizeImage(member.getAvatar(), 32, 32));\n\t\t\ticon.getImage().flush();\n\t\t\tavatar.setIcon(icon);\n\t\t\tavatarSet \u003d true;\n\t\t}\n\n\t\tname.setForeground(member.isLoggedIn() ? Color.white : ColorScheme.DARKER_GRAY_COLOR);\n\t\tname.setText(member.getDisplayName());\n\t\tPP.setText(String.valueOf(memberPartyData.getPersonalPoints()));\n\t\tplugin.updateOverlay(member.getDisplayName(), memberPartyData.getPersonalPoints());\n\t}\n}\n","filePath":"src\\main\\java\\com\\partypoints\\PartyPointsMembers.java"},{"fileName":"PartyPointsOverlay.java","content":"package com.partypoints;\n\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.util.HashMap;\nimport java.util.Map;\nimport javax.inject.Inject;\nimport static net.runelite.api.MenuAction.RUNELITE_OVERLAY_CONFIG;\nimport static net.runelite.client.ui.overlay.OverlayManager.OPTION_CONFIGURE;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPriority;\nimport net.runelite.client.ui.overlay.components.LineComponent;\n\npublic class PartyPointsOverlay extends OverlayPanel\n{\n\tprivate final PartyPointsPlugin plugin;\n\t@Inject\n\tprivate final PartyPointsConfig config;\n\tpublic Map\u003cString, Integer\u003e PartyData \u003d new HashMap\u003c\u003e();\n\tPartyPointsOverlay(PartyPointsPlugin plugin, PartyPointsConfig config)\n\t{\n\t\tsuper(plugin);\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t\tsetPriority(OverlayPriority.MED);\n\t\taddMenuEntry(RUNELITE_OVERLAY_CONFIG,OPTION_CONFIGURE,\"PartyPoints Overlay\");\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tpanelComponent.getChildren().clear();\n\t\tPartyData.remove(\"\u003cunknown\u003e\");\n\t\tif (!PartyData.isEmpty())\n\t\t{\n\t\t\tfor (Map.Entry\u003cString, Integer\u003e Entry : PartyData.entrySet())\n\t\t\t{\n\t\t\t\tif (config.overlayThreshold()\u003c Entry.getValue())\n\t\t\t\t{\n\t\t\t\t\tpanelComponent.getChildren().add(LineComponent.builder().left(Entry.getKey() + \": \").right(String.valueOf(Entry.getValue())).build());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn super.render(graphics);\n\n\t}\n}\n","filePath":"src\\main\\java\\com\\partypoints\\PartyPointsOverlay.java"},{"fileName":"PartyPointsPanel.java","content":"package com.partypoints;\n\nimport com.google.inject.Inject;\nimport com.partypoints.data.PartyData;\nimport java.awt.BorderLayout;\nimport java.awt.GridBagConstraints;\nimport java.awt.GridBagLayout;\nimport java.awt.Insets;\nimport java.awt.Toolkit;\nimport java.awt.datatransfer.Clipboard;\nimport java.awt.datatransfer.StringSelection;\nimport java.util.HashMap;\nimport java.util.Map;\nimport javax.swing.BoxLayout;\nimport javax.swing.JButton;\nimport javax.swing.JComponent;\nimport javax.swing.JOptionPane;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.party.PartyService;\nimport net.runelite.client.ui.PluginPanel;\nimport net.runelite.client.ui.components.DragAndDropReorderPane;\nimport net.runelite.client.ui.components.PluginErrorPanel;\n\npublic class PartyPointsPanel extends PluginPanel\n{\n\tprivate static final String BTN_CREATE_TEXT \u003d \"Create Party\";\n\tprivate static final String BTN_LEAVE_TEXT \u003d \"Leave\";\n\n\tprivate final PartyPointsPlugin plugin;\n\tprivate final PartyService party;\n\tprivate final PartyPointsConfig config;\n\n\tprivate final Map\u003cLong, PartyPointsMembers\u003e membersMap \u003d new HashMap\u003c\u003e();\n\n\tprivate final JButton startButton \u003d new JButton();\n\tprivate final JButton joinPartyButton \u003d new JButton();\n\tprivate final JButton rejoinPartyButton \u003d new JButton();\n\tprivate final JButton copyPartyIdButton \u003d new JButton();\n\tprivate final JButton refreshPartyButton \u003d new JButton();\n\n\tprivate final PluginErrorPanel noPartyPanel \u003d new PluginErrorPanel();\n\tprivate final PluginErrorPanel emptyPartyPanel \u003d new PluginErrorPanel();\n\tprivate final JComponent memberBoxPanel \u003d new DragAndDropReorderPane();\n\n\t@Inject\n\tPartyPointsPanel(final ClientThread clientThread, final PartyPointsPlugin plugin, final PartyPointsConfig config, final PartyService party)\n\t{\n\t\tthis.plugin \u003d plugin;\n\t\tthis.party \u003d party;\n\t\tthis.config \u003d config;\n\n\t\tsetBorder(new EmptyBorder(10, 10, 10, 10));\n\t\tsetBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tsetLayout(new BorderLayout());\n\n\t\tfinal JPanel layoutPanel \u003d new JPanel();\n\t\tBoxLayout boxLayout \u003d new BoxLayout(layoutPanel, BoxLayout.Y_AXIS);\n\t\tlayoutPanel.setLayout(boxLayout);\n\t\tadd(layoutPanel, BorderLayout.NORTH);\n\n\t\tfinal JPanel topPanel \u003d new JPanel();\n\n\t\ttopPanel.setBorder(new EmptyBorder(0, 0, 4, 0));\n\t\ttopPanel.setLayout(new GridBagLayout());\n\n\t\tGridBagConstraints constraints \u003d new GridBagConstraints();\n\t\tconstraints.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\tconstraints.insets \u003d new Insets(0, 2, 4, 2);\n\n\t\tconstraints.gridx \u003d 0;\n\t\tconstraints.gridy \u003d 0;\n\t\ttopPanel.add(startButton, constraints);\n\n\t\tconstraints.gridx \u003d 1;\n\t\tconstraints.gridy \u003d 0;\n\t\ttopPanel.add(joinPartyButton, constraints);\n\n\t\tconstraints.gridx \u003d 1;\n\t\tconstraints.gridy \u003d 0;\n\t\ttopPanel.add(copyPartyIdButton, constraints);\n\n\t\tconstraints.gridx \u003d 0;\n\t\tconstraints.gridy \u003d 1;\n\t\tconstraints.gridwidth \u003d 2;\n\t\ttopPanel.add(rejoinPartyButton, constraints);\n\n\t\tconstraints.gridx \u003d 0;\n\t\tconstraints.gridy \u003d 2;\n\t\tconstraints.gridwidth \u003d 2;\n\t\ttopPanel.add(refreshPartyButton, constraints);\n\n\t\tlayoutPanel.add(topPanel);\n\t\tlayoutPanel.add(memberBoxPanel);\n\n\t\tstartButton.setText(party.isInParty() ? BTN_LEAVE_TEXT : BTN_CREATE_TEXT);\n\t\tstartButton.setFocusable(false);\n\n\t\tjoinPartyButton.setText(\"Join party\");\n\t\tjoinPartyButton.setFocusable(false);\n\n\t\trejoinPartyButton.setText(\"Join previous party\");\n\t\trejoinPartyButton.setFocusable(false);\n\n\t\tcopyPartyIdButton.setText(\"Copy passphrase\");\n\t\tcopyPartyIdButton.setFocusable(false);\n\n\t\trefreshPartyButton.setText(\"Refresh the Overlay\");\n\t\trefreshPartyButton.setFocusable(false);\n\n\t\tstartButton.addActionListener(e -\u003e\n\t\t{\n\t\t\tif (party.isInParty())\n\t\t\t{\n\t\t\t\t// Leave party\n\t\t\t\tfinal int result \u003d JOptionPane.showOptionDialog(startButton,\n\t\t\t\t\t\"Are you sure you want to leave the party?\",\n\t\t\t\t\t\"Leave party?\", JOptionPane.YES_NO_OPTION, JOptionPane.WARNING_MESSAGE,\n\t\t\t\t\tnull, new String[]{\"Yes\", \"No\"}, \"No\");\n\n\t\t\t\tif (result \u003d\u003d JOptionPane.YES_OPTION)\n\t\t\t\t{\n\t\t\t\t\tplugin.leaveParty();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// Create party\n\t\t\t\tclientThread.invokeLater(() -\u003e party.changeParty(party.generatePassphrase()));\n\t\t\t}\n\t\t});\n\n\t\tjoinPartyButton.addActionListener(e -\u003e\n\t\t{\n\t\t\tif (!party.isInParty())\n\t\t\t{\n\t\t\t\tString s \u003d (String) JOptionPane.showInputDialog(\n\t\t\t\t\tjoinPartyButton,\n\t\t\t\t\t\"Please enter the party passphrase:\",\n\t\t\t\t\t\"Party Passphrase\",\n\t\t\t\t\tJOptionPane.PLAIN_MESSAGE,\n\t\t\t\t\tnull,\n\t\t\t\t\tnull,\n\t\t\t\t\t\"\");\n\n\t\t\t\tif (s \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfor (int i \u003d 0; i \u003c s.length(); ++i)\n\t\t\t\t{\n\t\t\t\t\tchar ch \u003d s.charAt(i);\n\t\t\t\t\tif (!Character.isLetter(ch) \u0026\u0026 !Character.isDigit(ch) \u0026\u0026 ch !\u003d \u0027-\u0027)\n\t\t\t\t\t{\n\t\t\t\t\t\tJOptionPane.showMessageDialog(joinPartyButton,\n\t\t\t\t\t\t\t\"Party passphrase must be a combination of alphanumeric or hyphen characters.\",\n\t\t\t\t\t\t\t\"Invalid party passphrase\",\n\t\t\t\t\t\t\tJOptionPane.ERROR_MESSAGE);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tparty.changeParty(s);\n\t\t\t}\n\t\t});\n\n\t\trejoinPartyButton.addActionListener(e -\u003e\n\t\t{\n\t\t\tif (!party.isInParty())\n\t\t\t{\n\t\t\t\tparty.changeParty(config.previousPartyId());\n\t\t\t}\n\t\t});\n\n\t\tcopyPartyIdButton.addActionListener(e -\u003e\n\t\t{\n\t\t\tif (party.isInParty())\n\t\t\t{\n\t\t\t\tClipboard clipboard \u003d Toolkit.getDefaultToolkit().getSystemClipboard();\n\t\t\t\tclipboard.setContents(new StringSelection(party.getPartyPassphrase()), null);\n\t\t\t}\n\t\t});\n\n\t\trefreshPartyButton.addActionListener(e -\u003e\n\t\t{\n\t\t\tif (party.isInParty())\n\t\t\t{\n\t\t\t\tplugin.leaveParty();\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tThread.sleep(600);\n\t\t\t\t}\n\t\t\t\tcatch (InterruptedException ignored)\n\t\t\t\t{\n\t\t\t\t}\n\t\t\t\tparty.changeParty(config.previousPartyId());\n\t\t\t}\n\t\t});\n\n\t\tnoPartyPanel.setContent(\"Not in a party\", \"Create a party to begin\");\n\n\t\tupdateParty();\n\t}\n\n\tvoid updateParty()\n\t{\n\t\tremove(noPartyPanel);\n\t\tremove(emptyPartyPanel);\n\n\t\tstartButton.setText(party.isInParty() ? BTN_LEAVE_TEXT : BTN_CREATE_TEXT);\n\t\tjoinPartyButton.setVisible(!party.isInParty());\n\t\trejoinPartyButton.setVisible(!party.isInParty());\n\t\tcopyPartyIdButton.setVisible(party.isInParty());\n\t\trefreshPartyButton.setVisible(party.isInParty());\n\n\t\tif (!party.isInParty())\n\t\t{\n\t\t\tadd(noPartyPanel);\n\t\t}\n\t\telse if (plugin.getPartyDataMap().size() \u003c\u003d 1)\n\t\t{\n\t\t\temptyPartyPanel.setContent(\"Party Created\", \"Your Party Passphrase is: \" + party.getPartyPassphrase() + \".\");\n\t\t\tadd(emptyPartyPanel);\n\t\t}\n\t}\n\n\tvoid addMember(PartyData partyData)\n\t{\n\t\tif (!membersMap.containsKey(partyData.getMemberId()))\n\t\t{\n\t\t\tPartyPointsMembers partyMember \u003d new PartyPointsMembers(plugin, config, memberBoxPanel, partyData, party);\n\t\t\tmembersMap.put(partyData.getMemberId(), partyMember);\n\t\t\tmemberBoxPanel.add(partyMember);\n\t\t\tmemberBoxPanel.revalidate();\n\t\t}\n\t\tupdateParty();\n\t}\n\n\tvoid removeAllMembers()\n\t{\n\t\tmembersMap.forEach((key, value) -\u003e memberBoxPanel.remove(value));\n\t\tmemberBoxPanel.revalidate();\n\t\tmembersMap.clear();\n\t\tupdateParty();\n\t}\n\n\tvoid removeMember(long memberId)\n\t{\n\t\tfinal PartyPointsMembers members \u003d membersMap.remove(memberId);\n\n\t\tif (members !\u003d null)\n\t\t{\n\t\t\tmemberBoxPanel.remove(members);\n\t\t\tmemberBoxPanel.revalidate();\n\t\t}\n\t\tupdateParty();\n\t}\n\n\tvoid updateMember(long userId)\n\t{\n\t\tfinal PartyPointsMembers members \u003d membersMap.get(userId);\n\t\tif (members !\u003d null)\n\t\t{\n\t\t\tmembers.update(this.plugin);\n\t\t}\n\t}\n\n\tvoid updateAll()\n\t{\n\t\tmembersMap.forEach((key, value) -\u003e value.update(this.plugin));\n\t}\n}\n","filePath":"src\\main\\java\\com\\partypoints\\PartyPointsPanel.java"},{"fileName":"PartyPointsPlugin.java","content":"package com.partypoints;\n\nimport com.google.common.base.Strings;\nimport com.google.inject.Provides;\nimport com.partypoints.data.PartyData;\nimport com.partypoints.data.StatUpdate;\nimport java.awt.Color;\nimport java.awt.image.BufferedImage;\nimport java.util.Collections;\nimport java.util.HashMap;\nimport java.util.Map;\nimport javax.annotation.Nullable;\nimport javax.inject.Inject;\nimport javax.swing.SwingUtilities;\nimport lombok.Getter;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.Player;\nimport net.runelite.api.VarPlayer;\nimport net.runelite.api.Varbits;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.events.PartyChanged;\nimport net.runelite.client.events.PartyMemberAvatar;\nimport net.runelite.client.party.PartyMember;\nimport net.runelite.client.party.PartyService;\nimport net.runelite.client.party.WSClient;\nimport net.runelite.client.party.events.UserJoin;\nimport net.runelite.client.party.events.UserPart;\nimport net.runelite.client.party.messages.UserSync;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.ColorUtil;\nimport net.runelite.client.util.ImageUtil;\nimport net.runelite.client.util.Text;\n\n@PluginDescriptor(\n\tname \u003d \"PartyPoints\"\n)\npublic class PartyPointsPlugin extends Plugin\n{\n\t@Getter\n\tprivate final Map\u003cLong, PartyData\u003e partyDataMap \u003d Collections.synchronizedMap(new HashMap\u003c\u003e());\n\t@Inject\n\tprivate Client client;\n\t@Inject\n\tprivate PartyService party;\n\t@Inject\n\tprivate WSClient wsClient;\n\t@Inject\n\tprivate PartyPointsConfig config;\n\t@Inject\n\tprivate ClientThread clientThread;\n\t@Inject\n\tprivate ClientToolbar clientToolbar;\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\tprivate PartyPointsPanel panel;\n\tprivate NavigationButton navButton;\n\n\tprivate StatUpdate lastStatus;\n\n\tprivate PartyPointsOverlay partyPointsOverlay \u003d null;\n\tprivate boolean button \u003d false;\n\n\tprivate static int messageFreq(int partySize)\n\t{\n\t\treturn Math.max(1, partySize - 6);\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tpanel \u003d injector.getInstance(PartyPointsPanel.class);\n\n\t\t// Load icon for the Panel\n\t\tfinal BufferedImage icon \u003d ImageUtil.loadImageResource(PartyPointsPlugin.class, \"/peepoPurple.png\");\n\n\t\t// Build Panel\n\t\tnavButton \u003d NavigationButton.builder()\n\t\t\t.tooltip(\"PartyPoints\")\n\t\t\t.priority(9)\n\t\t\t.icon(icon)\n\t\t\t.panel(panel)\n\t\t\t.build();\n\n\t\t// Add Panel to Sidebar\n\t\tif (config.AlwaysShowIcon())\n\t\t{\n\t\t\tbutton \u003d true;\n\t\t\tclientToolbar.addNavigation(navButton);\n\t\t}\n\n\t\twsClient.registerMessage(StatUpdate.class);\n\t\tSwingUtilities.invokeLater(this::requestSync);\n\n\t\tpartyPointsOverlay \u003d new PartyPointsOverlay(this, config);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tupdateOverlay(client.getLocalPlayer().getName(),-1);\n\t\t// Remove Panel from Sidebar\n\t\tclientToolbar.removeNavigation(navButton);\n\n\t\twsClient.unregisterMessage(StatUpdate.class);\n\n\t\t// Clear out all data\n\t\tpartyDataMap.clear();\n\t\tpanel \u003d null;\n\t\tlastStatus \u003d null;\n\t\tbutton \u003d false;\n\t\toverlayManager.remove(partyPointsOverlay);\n\t}\n\n\t@Provides\n\tpublic PartyPointsConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(PartyPointsConfig.class);\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif (event.getGroup().equals(PartyPointsConfig.GROUP))\n\t\t{\n\t\t\tSwingUtilities.invokeLater(panel::updateAll);\n\t\t}\n\t\tif (config.AlwaysShowIcon())\n\t\t{\n\t\t\tif (!button)\n\t\t\t{\n\t\t\t\tclientToolbar.addNavigation(navButton);\n\t\t\t\tbutton \u003d false;\n\t\t\t}\n\t\t}\n\t\telse if (button \u0026\u0026 !party.isInParty())\n\t\t{\n\t\t\tclientToolbar.removeNavigation(navButton);\n\t\t\tbutton \u003d true;\n\t\t}\n\t\tbutton \u003d config.AlwaysShowIcon();\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged)\n\t{\n\t\tcheckStateChanged(false);\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(final GameTick tick)\n\t{\n\t\tcheckStateChanged(false);\n\t\toverlayManager.remove(partyPointsOverlay);\n\t\tif (party.isInParty() \u0026\u0026 config.ShowOverlay())\n\t\t{\n\t\t\toverlayManager.add(partyPointsOverlay);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onStatUpdate(final StatUpdate event)\n\t{\n\t\tfinal PartyData partyData \u003d getPartyData(event.getMemberId());\n\t\tif (partyData \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.getCurrentPersonalPoints() !\u003d null)\n\t\t{\n\t\t\tpartyData.setPersonalPoints(event.getCurrentPersonalPoints());\n\t\t}\n\n\t\tfinal PartyMember member \u003d party.getMemberById(event.getMemberId());\n\t\tif (event.getCName() !\u003d null)\n\t\t{\n\t\t\tfinal String name \u003d Text.removeTags(Text.toJagexName(event.getCName()));\n\t\t\tif (!name.isEmpty())\n\t\t\t{\n\t\t\t\tmember.setDisplayName(name);\n\t\t\t\tmember.setLoggedIn(true);\n\t\t\t\tpartyData.setColor(ColorUtil.fromObject(name));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmember.setLoggedIn(false);\n\t\t\t\tpartyData.setColor(Color.WHITE);\n\t\t\t}\n\t\t}\n\t\tSwingUtilities.invokeLater(() -\u003e panel.updateMember(event.getMemberId()));\n\t}\n\n\t@Subscribe\n\tpublic void onUserJoin(final UserJoin event)\n\t{\n\t\tgetPartyData(event.getMemberId());\n\t}\n\n\t@Subscribe\n\tpublic void onUserSync(final UserSync event)\n\t{\n\t\tif (!button)\n\t\t{\n\t\t\tclientToolbar.addNavigation(navButton);\n\t\t\tbutton \u003d true;\n\t\t}\n\t\tclientThread.invokeLater(() -\u003e checkStateChanged(true));\n\t}\n\n\t@Subscribe\n\tpublic void onUserPart(final UserPart event)\n\t{\n\t\tfinal PartyData removed \u003d partyDataMap.remove(event.getMemberId());\n\t\tif (removed !\u003d null)\n\t\t{\n\t\t\tSwingUtilities.invokeLater(() -\u003e panel.removeMember(event.getMemberId()));\n\t\t}\n\t\tif (button \u0026\u0026 (!party.isInParty() || party.getMembers().size() \u003d\u003d 0) \u0026\u0026 !config.AlwaysShowIcon())\n\t\t{\n\t\t\tclientToolbar.removeNavigation(navButton);\n\t\t\tbutton \u003d false;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onPartyChanged(final PartyChanged event)\n\t{\n\t\t// Reset party\n\t\tpartyDataMap.clear();\n\t\tif (event.getPartyId() !\u003d null)\n\t\t{\n\t\t\tconfig.setPreviousPartyId(event.getPassphrase());\n\t\t}\n\t\tSwingUtilities.invokeLater(panel::removeAllMembers);\n\t}\n\n\t@Subscribe\n\tpublic void onPartyMemberAvatar(PartyMemberAvatar event)\n\t{\n\t\tSwingUtilities.invokeLater(() -\u003e panel.updateMember(event.getMemberId()));\n\t}\n\n\t@Nullable\n\tPartyData getPartyData(final long uuid)\n\t{\n\t\tfinal PartyMember memberById \u003d party.getMemberById(uuid);\n\n\t\tif (memberById \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\treturn partyDataMap.computeIfAbsent(uuid, (u) -\u003e {\n\t\t\tPartyMember partyMember \u003d party.getLocalMember();\n\n\t\t\tPartyData partyData \u003d new PartyData(uuid);\n\n\t\t\tSwingUtilities.invokeLater(() -\u003e panel.addMember(partyData));\n\t\t\treturn partyData;\n\t\t});\n\t}\n\n\tvoid requestSync()\n\t{\n\t\tif (party.isInParty())\n\t\t{\n\t\t\t// Request sync\n\t\t\tfinal UserSync userSync \u003d new UserSync();\n\t\t\tparty.send(userSync);\n\t\t}\n\t}\n\n\tvoid leaveParty()\n\t{\n\t\tresetParty();\n\t\tparty.changeParty(null);\n\t\toverlayManager.remove(partyPointsOverlay);\n\t}\n\n\tprivate void checkStateChanged(boolean forceSend)\n\t{\n\t\tif (lastStatus \u003d\u003d null)\n\t\t{\n\t\t\tforceSend \u003d true;\n\t\t}\n\t\tif (!party.isInParty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (!forceSend \u0026\u0026 client.getTickCount() % messageFreq(party.getMembers().size()) !\u003d 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal int CurrentPersonalPoints \u003d client.getVarpValue(VarPlayer.RAIDS_PERSONAL_POINTS);\n\n\t\tfinal Player localPlayer \u003d client.getLocalPlayer();\n\t\tfinal String characterName \u003d Strings.nullToEmpty(localPlayer !\u003d null \u0026\u0026 client.getGameState().getState() \u003e\u003d GameState.LOADING.getState() ? localPlayer.getName() : null);\n\n\t\tboolean shouldSend \u003d false;\n\t\tfinal StatUpdate statUpdate \u003d new StatUpdate();\n\n\t\tif (forceSend || !characterName.equals(lastStatus.getCName()))\n\t\t{\n\t\t\tshouldSend \u003d true;\n\t\t\tstatUpdate.setCName(characterName);\n\t\t}\n\n\t\tif (forceSend || CurrentPersonalPoints !\u003d lastStatus.getCurrentPersonalPoints())\n\t\t{\n\t\t\tshouldSend \u003d true;\n\t\t\tstatUpdate.setCurrentPersonalPoints(CurrentPersonalPoints);\n\t\t}\n\n\t\tif (shouldSend)\n\t\t{\n\t\t\tparty.send(statUpdate);\n\t\t\tlastStatus \u003d new StatUpdate(characterName, CurrentPersonalPoints);\n\t\t}\n\n\t}\n\n\tprotected void updateOverlay(String Name, int points)\n\t{\n\t\tpartyPointsOverlay.PartyData.put(Name, points);\n\t}\n\n\tprotected void resetParty()\n\t{\n\t\tpartyPointsOverlay.PartyData.clear();\n\t}\n}\n","filePath":"src\\main\\java\\com\\partypoints\\PartyPointsPlugin.java"},{"fileName":"PartyPointsPluginTest.java","content":"package com.partypoints;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class PartyPointsPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(PartyPointsPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\partypoints\\PartyPointsPluginTest.java"}]},{"commit":"0c0978b8c4634a4d215450f6b71054c01571247a","repository":"https://github.com/IEarnSolo/boat-upgrades.git","internalName":"boat-upgrades","files":[{"fileName":"AvailableUpgradesService.java","content":"package com.boatupgrades;\n\nimport javax.inject.Singleton;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\n\n@Singleton\npublic class AvailableUpgradesService\n{\n    private List\u003cUpgradeData.UpgradeOption\u003e lastPublished \u003d Collections.emptyList();\n\n    public boolean updateIfChanged(List\u003cUpgradeData.UpgradeOption\u003e newList)\n    {\n        if (equalsByContent(lastPublished, newList))\n        {\n            return false;\n        }\n\n        lastPublished \u003d new ArrayList\u003c\u003e(newList);\n        return true;\n    }\n\n    public List\u003cUpgradeData.UpgradeOption\u003e get()\n    {\n        return lastPublished;\n    }\n\n    private boolean equalsByContent(\n            List\u003cUpgradeData.UpgradeOption\u003e a,\n            List\u003cUpgradeData.UpgradeOption\u003e b\n    )\n    {\n        if (a.size() !\u003d b.size())\n        {\n            return false;\n        }\n\n        for (int i \u003d 0; i \u003c a.size(); i++)\n        {\n            if (!a.get(i).equals(b.get(i)))\n            {\n                return false;\n            }\n        }\n\n        return true;\n    }\n}","filePath":"src\\main\\java\\com\\boatupgrades\\AvailableUpgradesService.java"},{"fileName":"BoatUpgradesConfig.java","content":"package com.boatupgrades;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\n\n@ConfigGroup(\"boatupgrades\")\npublic interface BoatUpgradesConfig extends Config\n{\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Text overlay\",\n\t\t\tdescription \u003d \"Toggle for text overlay visibility\",\n\t\t\tposition \u003d 100\n\t)\n\tString overlaySection \u003d \"overlaySection\";\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Side panel\",\n\t\t\tdescription \u003d \"Side panel position\",\n\t\t\tposition \u003d 200\n\t)\n\tString sidePanelSection \u003d \"sidePanelSection\";\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Core boat parts\",\n\t\t\tdescription \u003d \"Toggle which core boat parts are shown in the overlay\",\n\t\t\tposition \u003d 300\n\t)\n\tString coreBoatPartsSection \u003d \"coreBoatPartsSection\";\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Boat facilities\",\n\t\t\tdescription \u003d \"Toggle which boat facilities are shown in the overlay\",\n\t\t\tposition \u003d 400\n\t)\n\tString facilitiesSection \u003d \"facilitiesSection\";\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"displayOverlay\",\n\t\t\tname \u003d \"Display overlay\",\n\t\t\tdescription \u003d \"Enable to display the overlay when boarding your boat or entering shipyard - disable to hide it\",\n\t\t\tsection \u003d overlaySection\n\t)\n\tdefault boolean displayOverlay()\n\t{\n\t\treturn true;\n\t}\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"filterConstructionRequirement\",\n\t\t\tname \u003d \"Filter construction requirement\",\n\t\t\tdescription \u003d \"Enable to hide upgrades that you don\u0027t meet the construction level for\",\n\t\t\tsection \u003d overlaySection\n\t)\n\tdefault boolean filterConstructionRequirement()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"filterSchematicRequirement\",\n\t\t\tname \u003d \"Filter schematic requirement\",\n\t\t\tdescription \u003d \"Enable to hide upgrades that you haven\u0027t discovered the schematic for\",\n\t\t\tsection \u003d overlaySection\n\t)\n\tdefault boolean filterSchematicRequirement()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"hideLowerTiers\",\n\t\t\tname \u003d \"Hide lower tiers\",\n\t\t\tdescription \u003d \"Hide lower tier upgrades from the overlay when a higher tier upgrade is available for the same boat part or facility\",\n\t\t\tsection \u003d overlaySection\n\t)\n\tdefault boolean hideLowerTiers()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"persistMinutes\",\n\t\t\tname \u003d \"Persist overlay\",\n\t\t\tdescription \u003d \"Number of minutes the overlay persists after disembarking your boat/leaving shipyard (0 will hide it immediately)\",\n\t\t\tsection \u003d overlaySection\n\t)\n\tdefault int persistMinutes()\n\t{\n\t\treturn 10;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"overlayOnlyInShipyard\",\n\t\t\tname \u003d \"Show only in shipyard\",\n\t\t\tdescription \u003d \"Show the text overlay only when you are in the shipyard\",\n\t\t\tsection \u003d overlaySection\n\t)\n\tdefault boolean overlayOnlyInShipyard()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"panelPosition\",\n\t\t\tname \u003d \"Side panel position\",\n\t\t\tdescription \u003d \"Specify where the Boat Upgrades panel appears in the sidebar (lower \u003d higher up)\",\n\t\t\tsection \u003d sidePanelSection\n\t)\n\tdefault int panelPosition()\n\t{\n\t\treturn 5;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showBaseHull\",\n\t\t\tname \u003d \"Base/Hull\",\n\t\t\tdescription \u003d \"Show base/hull upgrades\",\n\t\t\tsection \u003d coreBoatPartsSection\n\t)\n\tdefault boolean showBaseHull() { return true; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showHelm\",\n\t\t\tname \u003d \"Helm\",\n\t\t\tdescription \u003d \"Show helm upgrades\",\n\t\t\tsection \u003d coreBoatPartsSection\n\t)\n\tdefault boolean showHelm() { return true; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showSails\",\n\t\t\tname \u003d \"Sails\",\n\t\t\tdescription \u003d \"Show sails upgrades\",\n\t\t\tsection \u003d coreBoatPartsSection\n\t)\n\tdefault boolean showSails() { return true; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showKeel\",\n\t\t\tname \u003d \"Keel\",\n\t\t\tdescription \u003d \"Show keel upgrades\",\n\t\t\tsection \u003d coreBoatPartsSection\n\t)\n\tdefault boolean showKeel() { return true; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showSalvagingHook\",\n\t\t\tname \u003d \"Salvaging hook\",\n\t\t\tdescription \u003d \"Show Salvaging Hook upgrades\",\n\t\t\tsection \u003d facilitiesSection\n\t)\n\tdefault boolean showSalvagingHook() { return false; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showCargoHold\",\n\t\t\tname \u003d \"Cargo hold\",\n\t\t\tdescription \u003d \"Show Cargo hold upgrades\",\n\t\t\tsection \u003d facilitiesSection\n\t)\n\tdefault boolean showCargoHold() { return false; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showCannon\",\n\t\t\tname \u003d \"Cannon\",\n\t\t\tdescription \u003d \"Show Cannon upgrades\",\n\t\t\tsection \u003d facilitiesSection\n\t)\n\tdefault boolean showCannon() { return false; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showTeleportFocus\",\n\t\t\tname \u003d \"Teleport focus\",\n\t\t\tdescription \u003d \"Show Teleport focus upgrades\",\n\t\t\tsection \u003d facilitiesSection\n\t)\n\tdefault boolean showTeleportFocus() { return false; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showWindDevice\",\n\t\t\tname \u003d \"Wind/Gale catcher\",\n\t\t\tdescription \u003d \"Show Wind/Gale catcher upgrades\",\n\t\t\tsection \u003d facilitiesSection\n\t)\n\tdefault boolean showWindDevice() { return false; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showTrawlingNet\",\n\t\t\tname \u003d \"Trawling net\",\n\t\t\tdescription \u003d \"Show Trawling net upgrades\",\n\t\t\tsection \u003d facilitiesSection\n\t)\n\tdefault boolean showTrawlingNet() { return false; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showChumStation\",\n\t\t\tname \u003d \"Chum station\",\n\t\t\tdescription \u003d \"Show Chum station upgrades\",\n\t\t\tsection \u003d facilitiesSection\n\t)\n\tdefault boolean showChumStation() { return false; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showFathomDevice\",\n\t\t\tname \u003d \"Fathom stone/pearl\",\n\t\t\tdescription \u003d \"Show Fathom stone/pearl upgrades\",\n\t\t\tsection \u003d facilitiesSection\n\t)\n\tdefault boolean showFathomDevice() { return false; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showRange\",\n\t\t\tname \u003d \"Range\",\n\t\t\tdescription \u003d \"Show Range upgrades\",\n\t\t\tsection \u003d facilitiesSection\n\t)\n\tdefault boolean showRange() { return false; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showKeg\",\n\t\t\tname \u003d \"Keg\",\n\t\t\tdescription \u003d \"Show Keg upgrades\",\n\t\t\tsection \u003d facilitiesSection\n\t)\n\tdefault boolean showKeg() { return false; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showAnchor\",\n\t\t\tname \u003d \"Anchor\",\n\t\t\tdescription \u003d \"Show Anchor upgrades\",\n\t\t\tsection \u003d facilitiesSection\n\t)\n\tdefault boolean showAnchor() { return false; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showInoculationStation\",\n\t\t\tname \u003d \"Inoculation station\",\n\t\t\tdescription \u003d \"Show Inoculation station upgrades\",\n\t\t\tsection \u003d facilitiesSection\n\t)\n\tdefault boolean showInoculationStation() { return false; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showSalvagingStation\",\n\t\t\tname \u003d \"Salvaging station\",\n\t\t\tdescription \u003d \"Show Salvaging station upgrades\",\n\t\t\tsection \u003d facilitiesSection\n\t)\n\tdefault boolean showSalvagingStation() { return false; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showCrystalExtractor\",\n\t\t\tname \u003d \"Crystal extractor\",\n\t\t\tdescription \u003d \"Show Crystal extractor upgrades\",\n\t\t\tsection \u003d facilitiesSection\n\t)\n\tdefault boolean showCrystalExtractor() { return false; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showEternalBrazier\",\n\t\t\tname \u003d \"Eternal brazier\",\n\t\t\tdescription \u003d \"Show Eternal brazier upgrades\",\n\t\t\tsection \u003d facilitiesSection\n\t)\n\tdefault boolean showEternalBrazier() { return false; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"comingSoon\",\n\t\t\tname \u003d \"Schematic checks under development\",\n\t\t\tdescription \u003d \"Schematic checks for text overlay under development\",\n\t\t\t//position \u003d 400,\n\t\t\thidden \u003d true\n\t)\n\tdefault boolean comingSoonNotice()\n\t{\n\t\treturn true;\n\t}\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"lastSeenChangelogVersion\",\n\t\t\tname \u003d \"lastSeenChangelogVersion\",\n\t\t\tdescription \u003d \"\",\n\t\t\thidden \u003d true\n\t\t\t//position \u003d 800\n\t)\n\tdefault String lastSeenChangelogVersion()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"lastSeenChangelogVersion\",\n\t\t\tname \u003d \"\",\n\t\t\tdescription \u003d \"\",\n\t\t\thidden \u003d true\n\t)\n\tvoid setLastSeenChangelogVersion(String value);\n}","filePath":"src\\main\\java\\com\\boatupgrades\\BoatUpgradesConfig.java"},{"fileName":"BoatUpgradesOverlay.java","content":"package com.boatupgrades;\n\nimport com.boatupgrades.utils.SchematicUtils;\nimport com.boatupgrades.utils.UpgradeVisibilityUtils;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Skill;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.LineComponent;\nimport net.runelite.client.ui.overlay.components.PanelComponent;\nimport net.runelite.client.ui.overlay.components.TitleComponent;\n\nimport javax.inject.Inject;\nimport java.awt.*;\nimport java.util.*;\nimport java.util.List;\nimport java.util.stream.Collectors;\n\nimport static net.runelite.api.gameval.VarbitID.SAILING_BOARDED_BOAT;\nimport static net.runelite.api.gameval.VarbitID.SAILING_BOARDED_BOAT_TYPE;\nimport static net.runelite.api.gameval.VarbitID.SAILING_PREVIOUS_BOAT_TYPE_ID;\nimport static net.runelite.api.gameval.VarbitID.SAILING_SIDEPANEL_FACILITY_SAIL;\nimport static net.runelite.api.gameval.VarbitID.SAILING_SIDEPANEL_FACILITY_HELM;\nimport static net.runelite.api.gameval.VarbitID.SAILING_SIDEPANEL_FACILITY_KEEL;\nimport static net.runelite.api.gameval.VarbitID.SAILING_SIDEPANEL_FACILITY_HULL;\nimport static net.runelite.api.gameval.VarClientID.SAILING_SIDEPANEL_CAPTAIN_NAME;\nimport static net.runelite.api.gameval.VarbitID.SAILING_SIDEPANEL_SHIPYARD_MODE;\n\n@Slf4j\npublic class BoatUpgradesOverlay extends Overlay\n{\n    private final Client client;\n    private final BoatUpgradesConfig config;\n    private final FacilityService facilityService;\n    private BoatUpgradesPanel panel;\n    private final AvailableUpgradesService availableUpgradesService;\n    @Inject\n    private UpgradeVisibilityUtils upgradeVisibilityUtils;\n    @Inject\n    private SchematicUtils schematicUtils;\n\n    private final PanelComponent panelComponent \u003d new PanelComponent();\n    private List\u003cUpgradeData.UpgradeOption\u003e cachedAvailable \u003d new ArrayList\u003c\u003e();\n    private long cacheExpiryMillis \u003d 0L;\n    private boolean prevActive \u003d false;\n    private String lastCaptainName \u003d \"\";\n    private int lastBoatTypeRaw \u003d -1;\n    int constructionLevel;\n    private String lastRenderSignature \u003d \"\";\n    private boolean lastActiveWasShipyard \u003d false;\n\n\n\n    @Inject\n    public BoatUpgradesOverlay(Client client, BoatUpgradesConfig config, FacilityService facilityService, BoatUpgradesPanel panel, AvailableUpgradesService availableUpgradesService)\n    {\n        this.client \u003d client;\n        this.config \u003d config;\n        this.facilityService \u003d facilityService;\n        this.panel \u003d panel;\n        this.availableUpgradesService \u003d availableUpgradesService;\n        setPosition(OverlayPosition.TOP_LEFT);\n        //setLayer(OverlayLayer.ABOVE_WIDGETS);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics)\n    {\n        panelComponent.getChildren().clear();\n\n        final long now \u003d System.currentTimeMillis();\n\n        int boarded \u003d client.getVarbitValue(SAILING_BOARDED_BOAT);\n        int shipyardMode \u003d client.getVarbitValue(SAILING_SIDEPANEL_SHIPYARD_MODE);\n\n        boolean isBoarded \u003d boarded !\u003d 0;\n        boolean isInShipyard \u003d shipyardMode !\u003d 0;\n\n        boolean isActive \u003d isBoarded || isInShipyard;\n\n        String captain \u003d client.getVarcStrValue(SAILING_SIDEPANEL_CAPTAIN_NAME).replace(\u0027\\u00A0\u0027, \u0027 \u0027).trim();\n\n        String localName \u003d client.getLocalPlayer().getName();\n\n        boolean userIsCaptain \u003d localName !\u003d null \u0026\u0026 localName.equalsIgnoreCase(captain);\n        if (isActive \u0026\u0026 !userIsCaptain)\n        {\n            prevActive \u003d true;\n            return panelComponent.render(graphics);\n        }\n\n        if (isActive)\n        {\n            int boatTypeRaw;\n            if (isBoarded)\n            {\n                boatTypeRaw \u003d client.getVarbitValue(SAILING_BOARDED_BOAT_TYPE);\n            }\n            else\n            {\n                boatTypeRaw \u003d client.getVarbitValue(SAILING_PREVIOUS_BOAT_TYPE_ID);\n            }\n\n            int sailingLevel \u003d client.getBoostedSkillLevel(Skill.SAILING);\n            constructionLevel \u003d client.getBoostedSkillLevel(Skill.CONSTRUCTION);\n\n            int sailTier \u003d client.getVarbitValue(SAILING_SIDEPANEL_FACILITY_SAIL);\n            int helmTier \u003d client.getVarbitValue(SAILING_SIDEPANEL_FACILITY_HELM);\n            int keelTier \u003d client.getVarbitValue(SAILING_SIDEPANEL_FACILITY_KEEL);\n            int hullTier \u003d client.getVarbitValue(SAILING_SIDEPANEL_FACILITY_HULL);\n\n            java.util.Map\u003cString, Integer\u003e currentTiers \u003d new java.util.HashMap\u003c\u003e();\n\n            currentTiers.put(\"Sails\", sailTier);\n            currentTiers.put(\"Helm\", helmTier);\n            currentTiers.put(\"Keel\", keelTier);\n            currentTiers.put(\"Hull\", hullTier);\n            currentTiers.put(\"Base\", hullTier);\n\n            currentTiers.putAll(facilityService.getAllHighestTiers());\n\n            List\u003cUpgradeData.UpgradeOption\u003e liveAvailable \u003d\n                    UpgradeData.getAvailableOptions(\n                            boatTypeRaw,\n                            currentTiers,\n                            sailingLevel,\n                            constructionLevel,\n                            config\n                    );\n\n            List\u003cUpgradeData.UpgradeOption\u003e toDisplayLive \u003d upgradeVisibilityUtils.getVisibleUpgrades(liveAvailable);\n\n            checkRequirementSignatureChanged(toDisplayLive);\n\n            boolean facilitiesReady \u003d facilityService.hasDetectedAllFacilities();\n\n            if (!facilitiesReady)\n            {\n                return null;\n            }\n\n            boolean changed \u003d availableUpgradesService.updateIfChanged(toDisplayLive);\n\n            if (changed \u0026\u0026 panel !\u003d null)\n            {\n                log.debug(\"[Overlay] Notifying panel of upgrade change\");\n                panel.onAvailableUpgradesChanged();\n            }\n            else if (panel \u003d\u003d null)\n            {\n                log.warn(\"[Overlay] Panel is NULL  cannot notify\");\n            }\n\n            if (!liveAvailable.isEmpty())\n            {\n                cachedAvailable \u003d new ArrayList\u003c\u003e(liveAvailable);\n                cacheExpiryMillis \u003d Long.MAX_VALUE;\n                lastCaptainName \u003d captain;\n                lastBoatTypeRaw \u003d boatTypeRaw;\n                if (isInShipyard)\n                {\n                    lastActiveWasShipyard \u003d true;\n                }\n                else\n                {\n                    lastActiveWasShipyard \u003d false;\n                }\n            }\n            else\n            {\n                cachedAvailable.clear();\n                cacheExpiryMillis \u003d 0L;\n                lastCaptainName \u003d \"\";\n                lastBoatTypeRaw \u003d -1;\n                lastActiveWasShipyard \u003d false;\n            }\n\n            prevActive \u003d true;\n\n            if (liveAvailable.isEmpty())\n            {\n                return null;\n            }\n            if (toDisplayLive.isEmpty())\n            {\n                return null;\n            }\n\n            if (!config.displayOverlay())\n            {\n                return null;\n            }\n\n            if (config.overlayOnlyInShipyard() \u0026\u0026 !isInShipyard)\n            {\n                return null;\n            }\n\n            renderHeaderAndOptions(graphics, toDisplayLive);\n\n            return panelComponent.render(graphics);\n        }\n        else\n        {\n            if (prevActive)\n            {\n                if (!cachedAvailable.isEmpty())\n                {\n                    int minutes \u003d Math.max(0, config.persistMinutes());\n                    cacheExpiryMillis \u003d now + (minutes * 60L * 1000L);\n                    facilityService.resetAllDetectedTiers();\n                }\n                else\n                {\n                    cacheExpiryMillis \u003d 0L;\n                }\n            }\n\n            prevActive \u003d false;\n\n            List\u003cUpgradeData.UpgradeOption\u003e toDisplayCached \u003d upgradeVisibilityUtils.getVisibleUpgrades(cachedAvailable);\n\n            checkRequirementSignatureChanged(toDisplayCached);\n\n            boolean changed \u003d availableUpgradesService.updateIfChanged(toDisplayCached);\n\n            if (changed \u0026\u0026 panel !\u003d null)\n            {\n                log.debug(\"[Overlay] Notifying panel of upgrade change\");\n                panel.onAvailableUpgradesChanged();\n            }\n            else if (panel \u003d\u003d null)\n            {\n                log.warn(\"[Overlay] Panel is NULL  cannot notify\");\n            }\n            facilityService.detectedFacilitiesComplete \u003d false;\n\n            if (!cachedAvailable.isEmpty() \u0026\u0026 now \u003c\u003d cacheExpiryMillis)\n            {\n                String showCaptain \u003d lastCaptainName \u003d\u003d null ? \"\" : lastCaptainName;\n\n                if (showCaptain.isEmpty() || localName.isEmpty() || !localName.equalsIgnoreCase(showCaptain))\n                {\n                    return panelComponent.render(graphics);\n                }\n\n                if (!config.displayOverlay())\n                {\n                    return null;\n                }\n\n                if (config.overlayOnlyInShipyard() \u0026\u0026 !lastActiveWasShipyard)\n                {\n                    return null;\n                }\n\n                if (toDisplayCached.isEmpty())\n                {\n                    return null;\n                }\n\n                renderHeaderAndOptions(graphics, toDisplayCached);\n                return panelComponent.render(graphics);\n            }\n\n            return panelComponent.render(graphics);\n        }\n    }\n\n    private void renderHeaderAndOptions(Graphics2D graphics, List\u003cUpgradeData.UpgradeOption\u003e options)\n    {\n        panelComponent.getChildren().add(\n                TitleComponent.builder().text(\"Boat Upgrades\").build()\n        );\n\n        panelComponent.getChildren().add(\n                LineComponent.builder().left(\"Current available upgrades:\").build()\n        );\n\n        for (UpgradeData.UpgradeOption opt : options)\n        {\n            boolean hasSchematic \u003d schematicUtils.hasSchematic(opt.displayName);\n            boolean meetsConstruction \u003d upgradeVisibilityUtils.meetsConstructionRequirement(opt);\n\n            panelComponent.getChildren().add(\n                    LineComponent.builder()\n                            .left(\" \")\n                            .build()\n            );\n\n            panelComponent.getChildren().add(\n                    LineComponent.builder()\n                            .left(opt.displayName + \":\")\n                            .build()\n            );\n\n            String mats \u003d opt.materials.stream()\n                    .map(Object::toString)\n                    .collect(Collectors.joining(\", \"));\n\n            panelComponent.getChildren().add(\n                    LineComponent.builder().left(mats).build()\n            );\n\n            if (!hasSchematic \u0026\u0026 !config.filterSchematicRequirement())\n            {\n                panelComponent.getChildren().add(\n                        LineComponent.builder()\n                                .left(\"(Requires schematic)\")\n                                .leftColor(Color.YELLOW)\n                                .build()\n                );\n            }\n\n            if (!meetsConstruction \u0026\u0026 !config.filterConstructionRequirement())\n            {\n                panelComponent.getChildren().add(\n                        LineComponent.builder()\n                                .left(\"(Requires \" + opt.requiredConstructionLevel + \" Con)\")\n                                .leftColor(Color.YELLOW)\n                                .build()\n                );\n            }\n        }\n    }\n\n    public void refreshCacheExpiry()\n    {\n        if (cachedAvailable \u003d\u003d null || cachedAvailable.isEmpty())\n        {\n            return;\n        }\n\n        if (cacheExpiryMillis \u003d\u003d Long.MAX_VALUE)\n        {\n            return;\n        }\n\n        long now \u003d System.currentTimeMillis();\n        int minutes \u003d Math.max(0, config.persistMinutes());\n        cacheExpiryMillis \u003d now + (minutes * 60L * 1000L);\n    }\n    private String computeRequirementSignature(List\u003cUpgradeData.UpgradeOption\u003e options)\n    {\n        List\u003cString\u003e sig \u003d new ArrayList\u003c\u003e();\n\n        for (UpgradeData.UpgradeOption opt : options)\n        {\n            sig.add(opt.displayName);\n\n            boolean hasSchematic \u003d schematicUtils.hasSchematic(opt.displayName);\n            boolean meetsConstruction \u003d upgradeVisibilityUtils.meetsConstructionRequirement(opt);\n\n            if (!hasSchematic \u0026\u0026 !config.filterSchematicRequirement())\n            {\n                sig.add(\"REQ_SCHEMATIC\");\n            }\n\n            if (!meetsConstruction \u0026\u0026 !config.filterConstructionRequirement())\n            {\n                sig.add(\"REQ_CON\");\n            }\n        }\n\n        return String.join(\"|\", sig);\n    }\n\n    private void checkRequirementSignatureChanged(List\u003cUpgradeData.UpgradeOption\u003e options)\n    {\n        String newSignature \u003d computeRequirementSignature(options);\n\n        if (!newSignature.equals(lastRenderSignature))\n        {\n            lastRenderSignature \u003d newSignature;\n\n            if (panel !\u003d null)\n            {\n                panel.onAvailableUpgradesChanged();\n            }\n        }\n    }\n\n}","filePath":"src\\main\\java\\com\\boatupgrades\\BoatUpgradesOverlay.java"},{"fileName":"BoatUpgradesPanel.java","content":"package com.boatupgrades;\n\nimport com.boatupgrades.utils.SchematicUtils;\nimport com.boatupgrades.utils.UpgradeVisibilityUtils;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.PluginPanel;\nimport net.runelite.client.util.ImageUtil;\nimport net.runelite.client.util.LinkBrowser;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport javax.swing.*;\nimport javax.swing.border.Border;\nimport javax.swing.border.EmptyBorder;\nimport java.awt.*;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.awt.image.BufferedImage;\nimport java.net.URLEncoder;\nimport java.nio.charset.StandardCharsets;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.stream.Collectors;\n\n@Singleton\n@Slf4j\npublic class BoatUpgradesPanel extends PluginPanel\n{\n    private static final String TAB_AVAILABLE \u003d \"AVAILABLE\";\n    private static final String TAB_MY_LIST \u003d \"MY_LIST\";\n    private String activeTab \u003d TAB_AVAILABLE;\n\n    private static final Border ACTIVE_TAB_BORDER \u003d\n            BorderFactory.createMatteBorder(0, 0, 1, 0, ColorScheme.BRAND_ORANGE);\n    private static final Border INACTIVE_TAB_BORDER \u003d\n            BorderFactory.createMatteBorder(0, 0, 1, 0, ColorScheme.DARK_GRAY_COLOR);\n\n    private final CardLayout cardLayout \u003d new CardLayout();\n\n    public final JPanel cardContainer \u003d new JPanel(cardLayout);\n    public JPanel availableUpgradesContainer;\n\n    private JLabel availableTab;\n    private JLabel myListTab;\n\n    private final Map\u003cString, ImageIcon\u003e imageCache \u003d new HashMap\u003c\u003e();\n    private final Map\u003cUpgradeData.UpgradeOption, Boolean\u003e schematicUnlockedMap \u003d new HashMap\u003c\u003e();\n\n\n    private ItemManager itemManager;\n    private BoatUpgradesOverlay boatUpgradesOverlay;\n    private final BoatUpgradesConfig config;\n    private Client client;\n    @Inject\n    private SchematicUtils schematicUtils;\n    @Inject\n    private AvailableUpgradesService availableUpgradesService;\n    @Inject\n    private UpgradeVisibilityUtils upgradeVisibilityUtils;\n\n    @Inject\n    public BoatUpgradesPanel(Client client, ItemManager itemManager, BoatUpgradesConfig config)\n    {\n        super(false);\n        this.itemManager \u003d itemManager;\n        this.config \u003d config;\n        this.client \u003d client;\n\n        setLayout(new BorderLayout());\n        setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n        add(buildHeader(), BorderLayout.NORTH);\n        add(buildCards(), BorderLayout.CENTER);\n    }\n\n    public void onAvailableUpgradesChanged()\n    {\n        List\u003cUpgradeData.UpgradeOption\u003e options \u003d availableUpgradesService.get();\n\n        schematicUnlockedMap.clear();\n        for (UpgradeData.UpgradeOption opt : options)\n        {\n            schematicUnlockedMap.put(opt, schematicUtils.hasSchematic(opt.displayName));\n        }\n\n        List\u003cUpgradeData.UpgradeOption\u003e filteredOptions \u003d options.stream()\n                .filter(upgradeVisibilityUtils::shouldShowUpgrade)\n                .collect(Collectors.toList());\n\n        SwingUtilities.invokeLater(() -\u003e\n        {\n            updateAvailableUpgrades(filteredOptions);\n        });\n    }\n\n    private JPanel buildHeader()\n    {\n        JPanel header \u003d new JPanel();\n        header.setLayout(new BoxLayout(header, BoxLayout.Y_AXIS));\n        header.setBorder(new EmptyBorder(10, 10, 10, 10));\n        header.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n        JPanel titleRow \u003d new JPanel();\n        titleRow.setLayout(new BoxLayout(titleRow, BoxLayout.X_AXIS));\n        titleRow.setOpaque(false);\n        titleRow.setAlignmentX(Component.CENTER_ALIGNMENT);\n\n        JLabel iconLabel \u003d new JLabel(loadHeaderIcon());\n        iconLabel.setBorder(new EmptyBorder(0, 0, 0, 6));\n\n        JLabel title \u003d new JLabel(\"Boat Upgrades\");\n        title.setFont(FontManager.getRunescapeBoldFont());\n        title.setForeground(Color.WHITE);\n\n        titleRow.add(iconLabel);\n        titleRow.add(title);\n\n        header.add(titleRow);\n        header.add(Box.createVerticalStrut(8));\n        header.add(buildTabBar());\n\n        return header;\n    }\n\n    private ImageIcon loadHeaderIcon()\n    {\n        BufferedImage image \u003d ImageUtil.loadImageResource(\n                getClass(),\n                \"icon.png\"\n        );\n\n        //Image scaled \u003d image.getScaledInstance(18, 18, Image.SCALE_SMOOTH);\n        return new ImageIcon(image);\n    }\n\n    private ImageIcon getUpgradeIcon(UpgradeData.UpgradeOption opt)\n    {\n        String key \u003d opt.displayName + \":\" + opt.boatType;\n\n        return imageCache.computeIfAbsent(key, k -\u003e {\n            BufferedImage img \u003d loadUpgradeImage(opt);\n            if (img !\u003d null) {\n                return new ImageIcon(img);\n            } else {\n                return (ImageIcon) UIManager.getIcon(\"OptionPane.warningIcon\");\n            }\n        });\n    }\n\n    private BufferedImage loadUpgradeImage(UpgradeData.UpgradeOption opt)\n    {\n        String basePath \u003d \"/com/boatupgrades/ui/\";\n\n        List\u003cString\u003e candidates \u003d new ArrayList\u003c\u003e();\n\n        if (opt.boatType \u003e\u003d 0)\n        {\n            candidates.add(opt.displayName + \" \" + opt.boatType + \".png\");\n        }\n        candidates.add(opt.displayName + \".png\");\n\n        for (String name : candidates)\n        {\n            BufferedImage image \u003d ImageUtil.loadImageResource(\n                    getClass(),\n                    basePath + name\n            );\n\n            if (image !\u003d null)\n            {\n                return image;\n            }\n        }\n\n        return null;\n    }\n\n    private JPanel buildTabBar()\n    {\n        JPanel tabBar \u003d new JPanel(new GridLayout(1, 2));\n        tabBar.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n        availableTab \u003d createTabLabel(\"Available upgrades\", TAB_AVAILABLE);\n        myListTab \u003d createTabLabel(\"My list\", TAB_MY_LIST);\n\n        tabBar.add(availableTab);\n        tabBar.add(myListTab);\n\n        updateTabStyles();\n\n        return tabBar;\n    }\n\n    private JLabel createTabLabel(String text, String tabKey)\n    {\n        JLabel label \u003d new JLabel(text, SwingConstants.CENTER);\n        label.setFont(FontManager.getRunescapeFont());\n        label.setForeground(Color.WHITE);\n        label.setBorder(new EmptyBorder(6, 4, 6, 4));\n        label.setOpaque(true);\n        label.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n        label.addMouseListener(new MouseAdapter()\n        {\n            @Override\n            public void mousePressed(MouseEvent e)\n            {\n                activeTab \u003d tabKey;\n                cardLayout.show(cardContainer, tabKey);\n                updateTabStyles();\n            }\n\n            @Override\n            public void mouseEntered(MouseEvent e)\n            {\n                if (!activeTab.equals(tabKey))\n                {\n                    label.setForeground(ColorScheme.BRAND_ORANGE);\n                }\n            }\n\n            @Override\n            public void mouseExited(MouseEvent e)\n            {\n                updateTabStyles();\n            }\n        });\n\n        return label;\n    }\n\n    private void updateTabStyles()\n    {\n        styleTab(availableTab, TAB_AVAILABLE);\n        styleTab(myListTab, TAB_MY_LIST);\n    }\n\n    private void styleTab(JLabel tab, String tabKey)\n    {\n        boolean active \u003d activeTab.equals(tabKey);\n\n        tab.setForeground(Color.WHITE);\n        tab.setBackground(ColorScheme.DARK_GRAY_COLOR);\n        tab.setBorder(active ? ACTIVE_TAB_BORDER : INACTIVE_TAB_BORDER);\n    }\n\n    private JPanel buildCards()\n    {\n        cardContainer.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\n        cardContainer.add(buildAvailableUpgradesCard(), TAB_AVAILABLE);\n        cardContainer.add(buildPlaceholderPanel(\"Under development\"), TAB_MY_LIST);\n\n        cardLayout.show(cardContainer, TAB_AVAILABLE);\n\n        return cardContainer;\n    }\n\n    private JPanel buildPlaceholderPanel(String text)\n    {\n        JPanel panel \u003d new JPanel(new BorderLayout());\n        panel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        panel.setBorder(new EmptyBorder(15, 10, 10, 10));\n\n        JLabel label \u003d new JLabel(text);\n        label.setForeground(Color.WHITE);\n        label.setFont(FontManager.getRunescapeFont());\n\n        panel.add(label, BorderLayout.NORTH);\n        return panel;\n    }\n\n    private JPanel buildAvailableUpgradesCard()\n    {\n        availableUpgradesContainer \u003d new JPanel();\n        availableUpgradesContainer.setLayout(new BoxLayout(availableUpgradesContainer, BoxLayout.Y_AXIS));\n        availableUpgradesContainer.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        availableUpgradesContainer.setBorder(new EmptyBorder(10, 10, 10, 10));\n        availableUpgradesContainer.setAlignmentX(Component.LEFT_ALIGNMENT);\n\n\n        JScrollPane scroll \u003d new JScrollPane(availableUpgradesContainer);\n        scroll.setBorder(null);\n        scroll.getVerticalScrollBar().setUnitIncrement(16);\n        scroll.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);\n        scroll.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\n        JPanel wrapper \u003d new JPanel(new BorderLayout());\n        wrapper.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        wrapper.add(scroll, BorderLayout.CENTER);\n\n        return wrapper;\n    }\n\n    public void updateAvailableUpgrades(List\u003cUpgradeData.UpgradeOption\u003e options)\n    {\n        availableUpgradesContainer.removeAll();\n\n        if (options.isEmpty())\n        {\n            availableUpgradesContainer.add(buildEmptyState(\"No available upgrades\"));\n        }\n        else\n        {\n            for (UpgradeData.UpgradeOption opt : options)\n            {\n                availableUpgradesContainer.add(buildUpgradeRow(opt));\n                availableUpgradesContainer.add(Box.createVerticalStrut(8));\n            }\n        }\n\n        availableUpgradesContainer.revalidate();\n        availableUpgradesContainer.repaint();\n    }\n\n    private JPanel buildUpgradeRow(UpgradeData.UpgradeOption opt)\n    {\n        JPanel row \u003d new JPanel(new BorderLayout(10, 0));\n        row.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        row.setBorder(new EmptyBorder(6, 6, 6, 6));\n        row.setAlignmentX(Component.LEFT_ALIGNMENT);\n\n        JLabel imageLabel \u003d new JLabel(getUpgradeIcon(opt));\n        imageLabel.setPreferredSize(new Dimension(50, 50));\n        row.add(imageLabel, BorderLayout.WEST);\n\n        JPanel textCol \u003d new JPanel();\n        textCol.setLayout(new BoxLayout(textCol, BoxLayout.Y_AXIS));\n        textCol.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\n        JTextArea title \u003d new JTextArea(opt.displayName);\n        title.setFont(FontManager.getRunescapeBoldFont());\n        title.setForeground(Color.WHITE);\n        title.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        title.setAlignmentX(Component.LEFT_ALIGNMENT);\n        title.setMargin(new Insets(0, 0, 0, 0));\n        title.setLineWrap(true);\n        title.setWrapStyleWord(true);\n        title.setEditable(false);\n        title.setFocusable(false);\n        title.setOpaque(false);\n\n        title.setSize(100, Short.MAX_VALUE);\n        Dimension titlePreferredSize \u003d title.getPreferredSize();\n        title.setMaximumSize(new Dimension(100, titlePreferredSize.height));\n\n        makeClickable(title, opt.displayName);\n        textCol.add(title);\n\n        textCol.add(Box.createVerticalStrut(2));\n\n        for (UpgradeData.Material material : opt.materials)\n        {\n            JLabel matLabel \u003d new JLabel(String.valueOf(material));\n            matLabel.setFont(FontManager.getRunescapeSmallFont());\n            matLabel.setForeground(Color.LIGHT_GRAY);\n            matLabel.setAlignmentX(Component.LEFT_ALIGNMENT);\n\n            makeClickable(matLabel, material.name);\n            textCol.add(matLabel);\n        }\n\n        boolean hasSchematic \u003d schematicUnlockedMap.getOrDefault(opt, true);\n\n        if (!hasSchematic \u0026\u0026 !config.filterSchematicRequirement())\n        {\n            textCol.add(Box.createVerticalStrut(2));\n\n            String schematicName \u003d schematicUtils.getSchematicNameForUpgrade(opt.displayName);\n            if (schematicName \u003d\u003d null)\n            {\n                schematicName \u003d \"schematic\";\n            }\n\n            JTextArea schematicLabel \u003d new JTextArea(\"Requires \" + schematicName);\n            schematicLabel.setFont(FontManager.getRunescapeSmallFont());\n            schematicLabel.setForeground(Color.YELLOW);\n            schematicLabel.setAlignmentX(Component.LEFT_ALIGNMENT);\n            schematicLabel.setMargin(new Insets(0, 0, 0, 0));\n            schematicLabel.setLineWrap(true);\n            schematicLabel.setWrapStyleWord(true);\n            schematicLabel.setEditable(false);\n            schematicLabel.setFocusable(false);\n            schematicLabel.setOpaque(false);\n\n            schematicLabel.setSize(160, Short.MAX_VALUE);\n            Dimension schematicLabelPreferredSize \u003d schematicLabel.getPreferredSize();\n            schematicLabel.setMaximumSize(new Dimension(160, schematicLabelPreferredSize.height));\n\n            makeClickable(schematicLabel, schematicName);\n\n            textCol.add(schematicLabel);\n        }\n\n        boolean meetsConstruction \u003d upgradeVisibilityUtils.meetsConstructionRequirement(opt);\n\n        if (!meetsConstruction \u0026\u0026 !config.filterConstructionRequirement())\n        {\n            textCol.add(Box.createVerticalStrut(2));\n\n            JLabel constructionLabel \u003d new JLabel(\"Requires \" + opt.requiredConstructionLevel + \" Construction\");\n            constructionLabel.setFont(FontManager.getRunescapeSmallFont());\n            constructionLabel.setForeground(Color.YELLOW);\n            constructionLabel.setAlignmentX(Component.LEFT_ALIGNMENT);\n\n            //makeClickable(constructionLabel, \"Construction\");\n\n            textCol.add(constructionLabel);\n        }\n\n        row.add(textCol, BorderLayout.CENTER);\n\n        Dimension rowPreferredSize \u003d row.getPreferredSize();\n        row.setMaximumSize(new Dimension(Integer.MAX_VALUE, rowPreferredSize.height));\n\n        return row;\n    }\n\n    private void makeClickable(JComponent component, String name)\n    {\n        Color originalColor \u003d component.getForeground();\n        component.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));\n        component.addMouseListener(new MouseAdapter()\n        {\n            @Override\n            public void mousePressed(MouseEvent e)\n            {\n                try\n                {\n                    String wikiName \u003d name;\n\n                    if (wikiName.equals(\"Teleport focus\") ||\n                            wikiName.equals(\"Greater teleport focus\") ||\n                            wikiName.equals(\"Anchor\") ||\n                            wikiName.equals(\"Range\") ||\n                            wikiName.equals(\"Keg\"))\n                    {\n                        wikiName +\u003d \" (facility)\";\n                    }\n\n                    if (!wikiName.equals(\"Rosewood \u0026 cotton sails schematic\"))\n                    {\n                        wikiName \u003d wikiName.replace(\"\u0026\", \"and\");\n                    }\n\n                    wikiName \u003d URLEncoder.encode(wikiName.replace(\" \", \"_\"), StandardCharsets.UTF_8);\n\n                    LinkBrowser.browse(\"https://oldschool.runescape.wiki/w/\" + wikiName);\n\n\n                }\n                catch (Exception ex)\n                {\n                    ex.printStackTrace();\n                }\n            }\n\n            @Override\n            public void mouseEntered(MouseEvent e)\n            {\n                component.setForeground(ColorScheme.BRAND_ORANGE);\n            }\n\n            @Override\n            public void mouseExited(MouseEvent e)\n            {\n                component.setForeground(originalColor);\n            }\n        });\n    }\n\n    private JPanel buildEmptyState(String text)\n    {\n        JPanel panel \u003d new JPanel();\n        panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));\n        panel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        panel.setBorder(new EmptyBorder(20, 10, 10, 10));\n        panel.setAlignmentX(Component.LEFT_ALIGNMENT);\n\n        JLabel label \u003d new JLabel(text);\n        label.setFont(FontManager.getRunescapeFont());\n        label.setForeground(Color.GRAY);\n        label.setAlignmentX(Component.CENTER_ALIGNMENT);\n\n        panel.add(label);\n\n        return panel;\n    }\n}","filePath":"src\\main\\java\\com\\boatupgrades\\BoatUpgradesPanel.java"},{"fileName":"BoatUpgradesPlugin.java","content":"package com.boatupgrades;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.events.CommandExecuted;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.gameval.VarbitID;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.ImageUtil;\n\nimport java.awt.*;\nimport java.awt.datatransfer.Clipboard;\nimport java.awt.datatransfer.StringSelection;\nimport java.awt.image.BufferedImage;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Boat Upgrades\",\n\tdescription \u003d \"Display currently available upgrades for your boat when you board or enter the shipyard\",\n\ttags \u003d {\"sailing\", \"ship\", \"facility\", \"pimp my ride\"}\n)\npublic class BoatUpgradesPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\t@Inject\n\tprivate BoatUpgradesConfig config;\n\tprivate BoatUpgradesOverlay boatUpgradesOverlay;\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\t@Inject\n\tprivate ChangelogService changelogService;\n\t@Inject\n\tprivate ClientThread clientThread;\n\t@Inject\n\tprivate EventBus eventBus;\n\t@Inject\n\tprivate FacilityService facilityService;\n\t@Inject\n\tprivate ClientToolbar clientToolbar;\n\tprivate BoatUpgradesPanel panel;\n\tprivate NavigationButton navButton;\n\n\tprivate long lastAccountHash \u003d -1;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\t// Inject after startup so that the BoatUpgradesPanel dependency is created\n\t\t// after default SwingUI styling is applied\n\t\tif (boatUpgradesOverlay \u003d\u003d null) boatUpgradesOverlay \u003d injector.getInstance(BoatUpgradesOverlay.class);\n\t\toverlayManager.add(boatUpgradesOverlay);\n\t\tfacilityService.start();\n\t\tlog.info(\"Boat Upgrades started\");\n\n\t\tpanel \u003d injector.getInstance(BoatUpgradesPanel.class);\n\t\tfinal BufferedImage icon \u003d ImageUtil.loadImageResource(getClass(), \"icon.png\");\n\n\n\t\tnavButton \u003d NavigationButton.builder()\n\t\t\t\t.tooltip(\"Boat Upgrades\")\n\t\t\t\t.icon(icon)\n\t\t\t\t.panel(panel)\n\t\t\t\t.priority(config.panelPosition())\n\t\t\t\t.build();\n\n\t\tclientToolbar.addNavigation(navButton);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(boatUpgradesOverlay);\n\t\tfacilityService.stop();\n\t\tlog.info(\"Boat Upgrades stopped\");\n\n\t\tif (navButton !\u003d null)\n\t\t{\n\t\t\tclientToolbar.removeNavigation(navButton);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onCommandExecuted(CommandExecuted event)\n\t{\n\t\tif (event.getCommand().equalsIgnoreCase(\"boatvars\"))\n\t\t{\n\t\t\tint[] values \u003d new int[]\n\t\t\t{\n\t\t\t\t\tclient.getVarbitValue(VarbitID.SAILING_SIDEPANEL_FACILITY_HOTSPOT0),\n\t\t\t\t\tclient.getVarbitValue(VarbitID.SAILING_SIDEPANEL_FACILITY_HOTSPOT1),\n\t\t\t\t\tclient.getVarbitValue(VarbitID.SAILING_SIDEPANEL_FACILITY_HOTSPOT2),\n\t\t\t\t\tclient.getVarbitValue(VarbitID.SAILING_SIDEPANEL_FACILITY_HOTSPOT3),\n\t\t\t\t\tclient.getVarbitValue(VarbitID.SAILING_SIDEPANEL_FACILITY_HOTSPOT4),\n\t\t\t\t\tclient.getVarbitValue(VarbitID.SAILING_SIDEPANEL_FACILITY_HOTSPOT5),\n\t\t\t\t\tclient.getVarbitValue(VarbitID.SAILING_SIDEPANEL_FACILITY_HOTSPOT6),\n\t\t\t\t\tclient.getVarbitValue(VarbitID.SAILING_SIDEPANEL_FACILITY_HOTSPOT7),\n\t\t\t\t\tclient.getVarbitValue(VarbitID.SAILING_SIDEPANEL_FACILITY_HOTSPOT8),\n\t\t\t\t\tclient.getVarbitValue(VarbitID.SAILING_SIDEPANEL_FACILITY_HOTSPOT9),\n\t\t\t\t\tclient.getVarbitValue(VarbitID.SAILING_SIDEPANEL_FACILITY_HOTSPOT10)\n\t\t\t};\n\n\t\t\tStringBuilder sb \u003d new StringBuilder();\n\t\t\tsb.append(\"Hotspot Varbits:\");\n\t\t\tfor (int i \u003d 0; i \u003c values.length; i++)\n\t\t\t{\n\t\t\t\tsb.append(System.lineSeparator()).append(\"Hotspot \").append(i).append(\": \").append(values[i]);\n\t\t\t}\n\n\t\t\tfinal String output \u003d sb.toString();\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tStringSelection selection \u003d new StringSelection(output);\n\t\t\t\tClipboard clipboard \u003d Toolkit.getDefaultToolkit().getSystemClipboard();\n\t\t\t\tclipboard.setContents(selection, selection);\n\n\t\t\t\tclient.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"Hotspot varbits copied to clipboard!\", null);\n\t\t\t\tlog.info(\"Hotspot varbits copied to clipboard!\");\n\t\t\t\tlog.info(\"Hotspot varbits:\\n{}\", output);\n\t\t\t}\n\t\t\tcatch (Throwable ex)\n\t\t\t{\n\t\t\t\tlog.warn(\"Failed to copy hotspot varbits to clipboard\", ex);\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif (!\"boatupgrades\".equals(event.getGroup()))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (\"persistMinutes\".equals(event.getKey()))\n\t\t{\n\t\t\tboatUpgradesOverlay.refreshCacheExpiry();\n\t\t}\n\t\tif (\"filterSchematicRequirement\".equals(event.getKey()) || \"filterConstructionRequirement\".equals(event.getKey()))\n\t\t{\n\t\t\tclientThread.invokeLater(() -\u003e\n\t\t\t{\n\t\t\t\tpanel.onAvailableUpgradesChanged();\n\t\t\t});\n\t\t}\n\t\tif (event.getKey().equals(\"panelPosition\"))\n\t\t{\n\t\t\tpanel \u003d injector.getInstance(BoatUpgradesPanel.class);\n\t\t\tfinal BufferedImage icon \u003d ImageUtil.loadImageResource(getClass(), \"icon.png\");\n\n\t\t\t\tclientToolbar.removeNavigation(navButton);\n\n\t\t\t\tnavButton \u003d NavigationButton.builder()\n\t\t\t\t\t\t.tooltip(\"Boat Upgrades\")\n\t\t\t\t\t\t.icon(icon)\n\t\t\t\t\t\t.panel(panel)\n\t\t\t\t\t\t.priority(config.panelPosition())\n\t\t\t\t\t\t.build();\n\n\t\t\t\tclientToolbar.addNavigation(navButton);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged event)\n\t{\n\t\tGameState state \u003d event.getGameState();\n\n\t\tif (state \u003d\u003d GameState.LOGGED_IN \u0026\u0026 client.getAccountHash() !\u003d lastAccountHash)\n\t\t{\n\t\t\tclientThread.invokeLater(() -\u003e\n\t\t\t{\n\t\t\t\tlastAccountHash \u003d client.getAccountHash();\n\t\t\t\tchangelogService.showChangelogIfNeeded();\n\t\t\t});\n\t\t}\n\t}\n\n\t@Provides\n\tBoatUpgradesConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(BoatUpgradesConfig.class);\n\t}\n}","filePath":"src\\main\\java\\com\\boatupgrades\\BoatUpgradesPlugin.java"},{"fileName":"ChangelogService.java","content":"package com.boatupgrades;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\n\nimport javax.inject.Inject;\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.nio.charset.StandardCharsets;\nimport java.util.*;\n\n@Slf4j\npublic class ChangelogService\n{\n    private final Client client;\n    @Inject\n    private BoatUpgradesConfig config;\n\n    @Inject\n    public ChangelogService(Client client, BoatUpgradesConfig config)\n    {\n        this.client \u003d client;\n        this.config \u003d config;\n    }\n\n    private static final String PLUGIN_VERSION \u003d \"1.2.4\";\n    private static final String CHANGELOG_RESOURCE \u003d \"/changelog.md\";\n    private boolean changelogShownThisSession \u003d false;\n    public void showChangelogIfNeeded()\n    {\n        if (changelogShownThisSession)\n        {\n            config.setLastSeenChangelogVersion(PLUGIN_VERSION);\n            return;\n        }\n\n        String lastSeen \u003d config.lastSeenChangelogVersion();\n\n        if (lastSeen.isEmpty())\n        {\n            changelogShownThisSession \u003d true;\n            config.setLastSeenChangelogVersion(PLUGIN_VERSION);\n            return;\n        }\n\n        if (PLUGIN_VERSION.equals(lastSeen))\n        {\n            changelogShownThisSession \u003d true;\n            return;\n        }\n\n        Map\u003cString, List\u003cString\u003e\u003e changelog \u003d loadChangelogFromResource();\n        if (changelog.isEmpty())\n        {\n            changelogShownThisSession \u003d true;\n            config.setLastSeenChangelogVersion(PLUGIN_VERSION);\n            return;\n        }\n\n        List\u003cString\u003e toShowVersions \u003d new ArrayList\u003c\u003e();\n        for (String version : changelog.keySet())\n        {\n            if (version.equals(lastSeen))\n            {\n                break;\n            }\n            toShowVersions.add(version);\n        }\n\n        if (toShowVersions.isEmpty())\n        {\n            changelogShownThisSession \u003d true;\n            config.setLastSeenChangelogVersion(PLUGIN_VERSION);\n            return;\n        }\n\n        client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"\u003ccol\u003d0051c9\u003eBoat Upgrades Updated\", null);\n        for (String version : toShowVersions)\n        {\n            client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"\u003ccol\u003d0051c9\u003ev\" + version + \":\", null);\n            List\u003cString\u003e lines \u003d changelog.get(version);\n            for (String line : lines)\n            {\n                client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"  \u003ccol\u003d0051c9\u003e\" + line, null);\n            }\n        }\n\n        changelogShownThisSession \u003d true;\n        config.setLastSeenChangelogVersion(PLUGIN_VERSION);\n    }\n\n    public Map\u003cString, List\u003cString\u003e\u003e loadChangelogFromResource()\n    {\n        Map\u003cString, List\u003cString\u003e\u003e out \u003d new LinkedHashMap\u003c\u003e();\n        try (InputStream is \u003d getClass().getResourceAsStream(CHANGELOG_RESOURCE))\n        {\n            if (is \u003d\u003d null)\n            {\n                log.debug(\"Changelog resource not found at {}\", CHANGELOG_RESOURCE);\n                return Collections.emptyMap();\n            }\n\n            BufferedReader r \u003d new BufferedReader(new InputStreamReader(is, StandardCharsets.UTF_8));\n            String line;\n            String currentVersion \u003d null;\n            List\u003cString\u003e currentLines \u003d null;\n\n            while ((line \u003d r.readLine()) !\u003d null)\n            {\n                line \u003d line.trim();\n                if (line.startsWith(\"## \"))\n                {\n                    if (currentVersion !\u003d null \u0026\u0026 currentLines !\u003d null)\n                    {\n                        out.put(currentVersion, currentLines);\n                    }\n                    currentVersion \u003d line.substring(3).trim();\n                    currentLines \u003d new ArrayList\u003c\u003e();\n                }\n                else\n                {\n                    if (currentVersion !\u003d null)\n                    {\n                        if (!line.isEmpty())\n                        {\n                            currentLines.add(line);\n                        }\n                    }\n                }\n            }\n\n            if (currentVersion !\u003d null \u0026\u0026 currentLines !\u003d null)\n            {\n                out.put(currentVersion, currentLines);\n            }\n        }\n        catch (IOException ex)\n        {\n            log.warn(\"Failed to read changelog resource\", ex);\n            return Collections.emptyMap();\n        }\n\n        return out;\n    }\n}","filePath":"src\\main\\java\\com\\boatupgrades\\ChangelogService.java"},{"fileName":"FacilityService.java","content":"package com.boatupgrades;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.GameObjectSpawned;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.api.gameval.ObjectID;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.util.*;\n\nimport static net.runelite.api.gameval.VarbitID.SAILING_BOARDED_BOAT;\nimport static net.runelite.api.gameval.VarbitID.SAILING_SIDEPANEL_SHIPYARD_MODE;\n\n/**\n * FacilityService scans game objects within your boat\u0027s world entity to detect boat facilities\n * Ideally, the end goal is to find all the varbit values for each hotspot for each boat type to detect the facilities\n * For now, this will have to suffice\n */\n@Singleton\n@Slf4j\npublic class FacilityService\n{\n    private final Client client;\n    private final EventBus eventBus;\n\n    private final Map\u003cString, Integer\u003e highestDetected \u003d new HashMap\u003c\u003e();\n    private int pendingScanTicks \u003d -1;\n    public boolean detectedFacilitiesComplete;\n\n    @Inject\n    public FacilityService(Client client, EventBus eventBus)\n    {\n        this.client \u003d client;\n        this.eventBus \u003d eventBus;\n\n        List\u003cString\u003e facilities \u003d Arrays.asList(\n                \"Salvaging Hook\",\n                \"Cargo Hold\",\n                \"Cannon\",\n                \"Teleport Focus\",\n                \"Wind Device\",\n                \"Trawling Net\",\n                \"Chum Station\",\n                \"Fathom Device\",\n                \"Range\",\n                \"Keg\",\n                \"Anchor\",\n                \"Inoculation Station\",\n                \"Salvaging Station\",\n                \"Crystal Extractor\",\n                \"Eternal Brazier\"\n        );\n        for (String f : facilities)\n        {\n            highestDetected.put(f, -1);\n        }\n    }\n\n    public void start()\n    {\n        eventBus.register(this);\n    }\n    public void stop()\n    {\n        eventBus.unregister(this);\n    }\n\n    private void processSceneGameObject(GameObject go)\n    {\n        try\n        {\n            final int id \u003d go.getId();\n            final String name \u003d client.getObjectDefinition(id).getName();\n\n            if (!name.equals(\"null\"))\n            {\n                log.debug(\"Boat GameObject detected: id\u003d{}, name\u003d\u0027{}\u0027\", id, name);\n            }\n\n            if (SALVAGING_HOOK_BRONZE.contains(id) || SALVAGING_HOOK_IRON.contains(id) || SALVAGING_HOOK_STEEL.contains(id)\n                    || SALVAGING_HOOK_MITHRIL.contains(id) || SALVAGING_HOOK_ADAMANT.contains(id)\n                    || SALVAGING_HOOK_RUNE.contains(id) || SALVAGING_HOOK_DRAGON.contains(id)) {\n                updateHighest(\"Salvaging Hook\", salvageHookIdToTier(id));\n                return;\n            }\n\n            if (CARGO_HOLD_REGULAR.contains(id) || CARGO_HOLD_OAK.contains(id) || CARGO_HOLD_TEAK.contains(id)\n                    || CARGO_HOLD_MAHOGANY.contains(id) || CARGO_HOLD_CAMPHOR.contains(id)\n                    || CARGO_HOLD_IRONWOOD.contains(id) || CARGO_HOLD_ROSEWOOD.contains(id)) {\n                updateHighest(\"Cargo Hold\", cargoIdToTier(id));\n                return;\n            }\n\n            if (CANNON_BRONZE.contains(id) || CANNON_IRON.contains(id) || CANNON_STEEL.contains(id)\n                    || CANNON_MITHRIL.contains(id) || CANNON_ADAMANT.contains(id)\n                    || CANNON_RUNE.contains(id) || CANNON_DRAGON.contains(id)) {\n                updateHighest(\"Cannon\", cannonIdToTier(id));\n                return;\n            }\n\n            if (TELEPORT_FOCUS.contains(id) || TELEPORT_FOCUS_GREATER.contains(id)) {\n                updateHighest(\"Teleport Focus\", teleportFocusIdToTier(id));\n                return;\n            }\n\n            if (WIND_CATCHER.contains(id) || GALE_CATCHER.contains(id)) {\n                updateHighest(\"Wind Device\", windIdToTier(id));\n                return;\n            }\n\n            if (TRAWLING_NET_ROPE.contains(id) || TRAWLING_NET_LINEN.contains(id)\n                    || TRAWLING_NET_HEMP.contains(id) || TRAWLING_NET_COTTON.contains(id)) {\n                updateHighest(\"Trawling Net\", trawlingIdToTier(id));\n                return;\n            }\n\n            if (CHUM_STATION.contains(id) || CHUM_STATION_ADVANCED.contains(id) || CHUM_SPREADER.contains(id)) {\n                updateHighest(\"Chum Station\", chumIdToTier(id));\n                return;\n            }\n\n            if (FATHOM_STONE.contains(id) || FATHOM_PEARL.contains(id)) {\n                updateHighest(\"Fathom Device\", fathomIdToTier(id));\n                return;\n            }\n\n            if (RANGE.contains(id)) {\n                updateHighest(\"Range\", 0);\n                return;\n            }\n\n            if (KEG.contains(id)) {\n                updateHighest(\"Keg\", 0);\n                return;\n            }\n\n            if (ANCHOR.contains(id)) {\n                updateHighest(\"Anchor\", 0);\n                return;\n            }\n\n            if (INOCULATION_STATION.contains(id)) {\n                updateHighest(\"Inoculation Station\", 0);\n                return;\n            }\n\n            if (SALVAGING_STATION.contains(id)) {\n                updateHighest(\"Salvaging Station\", 0);\n                return;\n            }\n\n            if (CRYSTAL_EXTRACTOR.contains(id)) {\n                updateHighest(\"Crystal Extractor\", 0);\n                return;\n            }\n\n            if (ETERNAL_BRAZIER.contains(id)) {\n                updateHighest(\"Eternal Brazier\", 0);\n            }\n        }\n        catch (Throwable t)\n        {\n            log.debug(\"processSceneGameObject failed\", t);\n        }\n    }\n\n    public void scanBoatWorldEntity()\n    {\n        WorldView top \u003d client.getTopLevelWorldView();\n        if (top \u003d\u003d null)\n        {\n            log.debug(\"No top-level worldview\");\n            return;\n        }\n\n        var entities \u003d top.worldEntities();\n        if (entities \u003d\u003d null)\n        {\n            log.debug(\"No world entities\");\n            return;\n        }\n\n        for (WorldEntity entity : entities)\n        {\n            if (entity.getOwnerType() !\u003d WorldEntity.OWNER_TYPE_SELF_PLAYER)\n            {\n                continue;\n            }\n\n            WorldView boatView \u003d entity.getWorldView();\n            if (boatView \u003d\u003d null)\n            {\n                continue;\n            }\n\n            Scene scene \u003d boatView.getScene();\n            if (scene \u003d\u003d null)\n            {\n                continue;\n            }\n\n            scanScene(scene);\n        }\n    }\n\n    private void scanScene(Scene scene)\n    {\n        Tile[][][] tiles \u003d scene.getTiles();\n        if (tiles \u003d\u003d null)\n        {\n            return;\n        }\n\n        for (int plane \u003d 0; plane \u003c tiles.length; plane++)\n        {\n            Tile[][] planeTiles \u003d tiles[plane];\n            if (planeTiles \u003d\u003d null)\n            {\n                continue;\n            }\n\n            for (int x \u003d 0; x \u003c planeTiles.length; x++)\n            {\n                Tile[] col \u003d planeTiles[x];\n                if (col \u003d\u003d null)\n                {\n                    continue;\n                }\n\n                for (int y \u003d 0; y \u003c col.length; y++)\n                {\n                    Tile tile \u003d col[y];\n                    if (tile \u003d\u003d null)\n                    {\n                        continue;\n                    }\n\n                    for (GameObject go : tile.getGameObjects())\n                    {\n                        if (go !\u003d null)\n                        {\n                            processSceneGameObject(go);\n                        }\n                    }\n                }\n            }\n        }\n        detectedFacilitiesComplete \u003d true;\n    }\n\n    @Subscribe\n    public void onVarbitChanged(VarbitChanged ev)\n    {\n        try\n        {\n            final int changedVarbit \u003d ev.getVarbitId();\n\n            if (changedVarbit !\u003d SAILING_BOARDED_BOAT \u0026\u0026\n                    changedVarbit !\u003d SAILING_SIDEPANEL_SHIPYARD_MODE)\n            {\n                return;\n            }\n\n            final int boarded \u003d client.getVarbitValue(SAILING_BOARDED_BOAT);\n            final int shipyardMode \u003d client.getVarbitValue(SAILING_SIDEPANEL_SHIPYARD_MODE);\n\n            if (changedVarbit \u003d\u003d SAILING_BOARDED_BOAT \u0026\u0026 shipyardMode !\u003d 0)\n            {\n                return;\n            }\n\n            final boolean nowActive \u003d (boarded !\u003d 0) || (shipyardMode !\u003d 0);\n\n            if (nowActive)\n            {\n                pendingScanTicks \u003d 2;\n\n                log.debug(\n                        \"FacilityService: sailing varbit {} changed -\u003e active (boarded\u003d{}, shipyard\u003d{}), scheduling scan\",\n                        changedVarbit, boarded, shipyardMode\n                );\n            }\n            else\n            {\n                pendingScanTicks \u003d -1;\n\n                log.debug(\n                        \"FacilityService: sailing varbits inactive (boarded\u003d{}, shipyard\u003d{}), reset\",\n                        boarded, shipyardMode\n                );\n            }\n        }\n        catch (Throwable t)\n        {\n            log.warn(\"onVarbitChanged error\", t);\n        }\n    }\n\n    @Subscribe\n    public void onGameTick(GameTick tick)\n    {\n        if (pendingScanTicks \u003c 0)\n        {\n            return;\n        }\n\n        pendingScanTicks--;\n\n        if (pendingScanTicks \u003d\u003d 0)\n        {\n            scanBoatWorldEntity();\n            pendingScanTicks \u003d -1;\n        }\n    }\n\n    @Subscribe\n    public void onGameObjectSpawned(GameObjectSpawned event)\n    {\n        final int shipyardMode \u003d client.getVarbitValue(SAILING_SIDEPANEL_SHIPYARD_MODE);\n        final boolean inShipyard \u003d shipyardMode !\u003d 0;\n\n        if (inShipyard \u0026\u0026 pendingScanTicks \u003d\u003d -1) // Avoids calls while entering shipyard\n        {\n            resetAllDetectedTiers();\n            scanBoatWorldEntity();\n            //log.info(\"Game object spawned\");\n        }\n    }\n\n    public int getHighestTier(String partName)\n    {\n            return highestDetected.getOrDefault(partName, -1);\n    }\n\n    public Map\u003cString, Integer\u003e getAllHighestTiers()\n    {\n        return new HashMap\u003c\u003e(highestDetected);\n    }\n\n    public boolean hasDetectedAllFacilities()\n    {\n        return detectedFacilitiesComplete;\n    }\n\n\n    private void updateHighest(String partName, int tier)\n    {\n        if (partName \u003d\u003d null || tier \u003c 0)\n        {\n            return;\n        }\n\n            Integer cur \u003d highestDetected.get(partName);\n            if (cur \u003d\u003d null)\n            {\n                highestDetected.put(partName, tier);\n                return;\n            }\n\n            if (tier \u003e cur)\n            {\n                highestDetected.put(partName, tier);\n                log.debug(\"FacilityService: updated {} -\u003e {}\", partName, tier);\n            }\n    }\n\n    public void resetAllDetectedTiers()\n    {\n            for (String key : highestDetected.keySet())\n            {\n                highestDetected.put(key, -1);\n            }\n            log.debug(\"FacilityService: Reset all detected tiers to -1\");\n    }\n\n    private int salvageHookIdToTier(int id)\n    {\n        if (SALVAGING_HOOK_BRONZE.contains(id)) return 0;\n        if (SALVAGING_HOOK_IRON.contains(id)) return 1;\n        if (SALVAGING_HOOK_STEEL.contains(id)) return 2;\n        if (SALVAGING_HOOK_MITHRIL.contains(id)) return 3;\n        if (SALVAGING_HOOK_ADAMANT.contains(id)) return 4;\n        if (SALVAGING_HOOK_RUNE.contains(id)) return 5;\n        if (SALVAGING_HOOK_DRAGON.contains(id)) return 6;\n        return -1;\n    }\n\n    private int cargoIdToTier(int id)\n    {\n        if (CARGO_HOLD_REGULAR.contains(id)) return 0;\n        if (CARGO_HOLD_OAK.contains(id)) return 1;\n        if (CARGO_HOLD_TEAK.contains(id)) return 2;\n        if (CARGO_HOLD_MAHOGANY.contains(id)) return 3;\n        if (CARGO_HOLD_CAMPHOR.contains(id)) return 4;\n        if (CARGO_HOLD_IRONWOOD.contains(id)) return 5;\n        if (CARGO_HOLD_ROSEWOOD.contains(id)) return 6;\n        return -1;\n    }\n\n    private int cannonIdToTier(int id)\n    {\n        if (CANNON_BRONZE.contains(id)) return 0;\n        if (CANNON_IRON.contains(id)) return 1;\n        if (CANNON_STEEL.contains(id)) return 2;\n        if (CANNON_MITHRIL.contains(id)) return 3;\n        if (CANNON_ADAMANT.contains(id)) return 4;\n        if (CANNON_RUNE.contains(id)) return 5;\n        if (CANNON_DRAGON.contains(id)) return 6;\n        return -1;\n    }\n\n    private int teleportFocusIdToTier(int id)\n    {\n        if (TELEPORT_FOCUS.contains(id)) return 0;\n        if (TELEPORT_FOCUS_GREATER.contains(id)) return 1;\n        return -1;\n    }\n\n    private int windIdToTier(int id)\n    {\n        if (WIND_CATCHER.contains(id)) return 0;\n        if (GALE_CATCHER.contains(id)) return 1;\n        return -1;\n    }\n\n    private int trawlingIdToTier(int id)\n    {\n        if (TRAWLING_NET_ROPE.contains(id)) return 0;\n        if (TRAWLING_NET_LINEN.contains(id)) return 1;\n        if (TRAWLING_NET_HEMP.contains(id)) return 2;\n        if (TRAWLING_NET_COTTON.contains(id)) return 3;\n        return -1;\n    }\n\n    private int chumIdToTier(int id)\n    {\n        if (CHUM_STATION.contains(id)) return 0;\n        if (CHUM_STATION_ADVANCED.contains(id)) return 1;\n        if (CHUM_SPREADER.contains(id)) return 2;\n        return -1;\n    }\n\n    private int fathomIdToTier(int id)\n    {\n        if (FATHOM_PEARL.contains(id)) return 0;\n        if (FATHOM_STONE.contains(id)) return 1;\n        return -1;\n    }\n\n    private static final Set\u003cInteger\u003e SALVAGING_HOOK_BRONZE \u003d Set.of(\n            ObjectID.SALVAGING_HOOK_RAFT_BRONZE,\n            ObjectID.SALVAGING_HOOK_BRONZE,\n            ObjectID.SALVAGING_HOOK_LARGE_BRONZE,\n            ObjectID.SALVAGING_HOOK_LARGE_BRONZE_B\n    );\n    private static final Set\u003cInteger\u003e SALVAGING_HOOK_IRON \u003d Set.of(\n            ObjectID.SALVAGING_HOOK_RAFT_IRON,\n            ObjectID.SALVAGING_HOOK_IRON,\n            ObjectID.SALVAGING_HOOK_LARGE_IRON,\n            ObjectID.SALVAGING_HOOK_LARGE_IRON_B\n    );\n    private static final Set\u003cInteger\u003e SALVAGING_HOOK_STEEL \u003d Set.of(\n            ObjectID.SALVAGING_HOOK_RAFT_STEEL,\n            ObjectID.SALVAGING_HOOK_STEEL,\n            ObjectID.SALVAGING_HOOK_LARGE_STEEL,\n            ObjectID.SALVAGING_HOOK_LARGE_STEEL_B\n    );\n    private static final Set\u003cInteger\u003e SALVAGING_HOOK_MITHRIL \u003d Set.of(\n            ObjectID.SALVAGING_HOOK_RAFT_MITHRIL,\n            ObjectID.SALVAGING_HOOK_MITHRIL,\n            ObjectID.SALVAGING_HOOK_LARGE_MITHRIL,\n            ObjectID.SALVAGING_HOOK_LARGE_MITHRIL_B\n    );\n    private static final Set\u003cInteger\u003e SALVAGING_HOOK_ADAMANT \u003d Set.of(\n            ObjectID.SALVAGING_HOOK_RAFT_ADAMANT,\n            ObjectID.SALVAGING_HOOK_ADAMANT,\n            ObjectID.SALVAGING_HOOK_LARGE_ADAMANT,\n            ObjectID.SALVAGING_HOOK_LARGE_ADAMANT_B\n    );\n    private static final Set\u003cInteger\u003e SALVAGING_HOOK_RUNE \u003d Set.of(\n            ObjectID.SALVAGING_HOOK_RAFT_RUNE,\n            ObjectID.SALVAGING_HOOK_RUNE,\n            ObjectID.SALVAGING_HOOK_LARGE_RUNE,\n            ObjectID.SALVAGING_HOOK_LARGE_RUNE_B\n    );\n    private static final Set\u003cInteger\u003e SALVAGING_HOOK_DRAGON \u003d Set.of(\n            ObjectID.SALVAGING_HOOK_RAFT_DRAGON,\n            ObjectID.SALVAGING_HOOK_DRAGON,\n            ObjectID.SALVAGING_HOOK_LARGE_DRAGON,\n            ObjectID.SALVAGING_HOOK_LARGE_DRAGON_B\n    );\n\n    private static final Set\u003cInteger\u003e CARGO_HOLD_REGULAR \u003d Set.of(\n            ObjectID.SAILING_BOAT_CARGO_HOLD_REGULAR_RAFT,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_REGULAR_RAFT_NO_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_REGULAR_RAFT_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_REGULAR_2X5,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_REGULAR_2X5_NO_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_REGULAR_2X5_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_REGULAR_LARGE,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_REGULAR_LARGE_NO_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_REGULAR_LARGE_CARGO\n    );\n    private static final Set\u003cInteger\u003e CARGO_HOLD_OAK \u003d Set.of(\n            ObjectID.SAILING_BOAT_CARGO_HOLD_OAK_RAFT,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_OAK_RAFT_NO_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_OAK_RAFT_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_OAK_2X5,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_OAK_2X5_NO_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_OAK_2X5_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_OAK_LARGE,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_OAK_LARGE_NO_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_OAK_LARGE_CARGO\n    );\n    private static final Set\u003cInteger\u003e CARGO_HOLD_TEAK \u003d Set.of(\n            ObjectID.SAILING_BOAT_CARGO_HOLD_TEAK_RAFT,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_TEAK_RAFT_NO_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_TEAK_RAFT_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_TEAK_2X5,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_TEAK_2X5_NO_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_TEAK_2X5_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_TEAK_LARGE,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_TEAK_LARGE_NO_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_TEAK_LARGE_CARGO\n    );\n    private static final Set\u003cInteger\u003e CARGO_HOLD_MAHOGANY \u003d Set.of(\n            ObjectID.SAILING_BOAT_CARGO_HOLD_MAHOGANY_RAFT,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_MAHOGANY_RAFT_NO_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_MAHOGANY_RAFT_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_MAHOGANY_2X5,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_MAHOGANY_2X5_NO_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_MAHOGANY_2X5_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_MAHOGANY_LARGE,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_MAHOGANY_LARGE_NO_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_MAHOGANY_LARGE_CARGO\n    );\n    private static final Set\u003cInteger\u003e CARGO_HOLD_CAMPHOR \u003d Set.of(\n            ObjectID.SAILING_BOAT_CARGO_HOLD_CAMPHOR_RAFT,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_CAMPHOR_RAFT_NO_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_CAMPHOR_RAFT_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_CAMPHOR_2X5,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_CAMPHOR_2X5_NO_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_CAMPHOR_2X5_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_CAMPHOR_LARGE,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_CAMPHOR_LARGE_NO_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_CAMPHOR_LARGE_CARGO\n    );\n    private static final Set\u003cInteger\u003e CARGO_HOLD_IRONWOOD \u003d Set.of(\n            ObjectID.SAILING_BOAT_CARGO_HOLD_IRONWOOD_RAFT,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_IRONWOOD_RAFT_NO_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_IRONWOOD_RAFT_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_IRONWOOD_2X5,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_IRONWOOD_2X5_NO_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_IRONWOOD_2X5_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_IRONWOOD_LARGE,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_IRONWOOD_LARGE_NO_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_IRONWOOD_LARGE_CARGO\n    );\n    private static final Set\u003cInteger\u003e CARGO_HOLD_ROSEWOOD \u003d Set.of(\n            ObjectID.SAILING_BOAT_CARGO_HOLD_ROSEWOOD_RAFT,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_ROSEWOOD_RAFT_NO_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_ROSEWOOD_RAFT_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_ROSEWOOD_2X5,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_ROSEWOOD_2X5_NO_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_ROSEWOOD_2X5_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_ROSEWOOD_LARGE,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_ROSEWOOD_LARGE_NO_CARGO,\n            ObjectID.SAILING_BOAT_CARGO_HOLD_ROSEWOOD_LARGE_CARGO\n    );\n\n    private static final Set\u003cInteger\u003e TELEPORT_FOCUS \u003d Set.of(ObjectID.SAILING_TELEPORTATION_FOCUS);\n    private static final Set\u003cInteger\u003e TELEPORT_FOCUS_GREATER \u003d Set.of(ObjectID.SAILING_TELEPORTATION_FOCUS_GREATER);\n\n    private static final Set\u003cInteger\u003e CANNON_BRONZE \u003d Set.of(ObjectID.SAILING_BRONZE_CANNON);\n    private static final Set\u003cInteger\u003e CANNON_IRON \u003d Set.of(ObjectID.SAILING_IRON_CANNON);\n    private static final Set\u003cInteger\u003e CANNON_STEEL \u003d Set.of(ObjectID.SAILING_STEEL_CANNON);\n    private static final Set\u003cInteger\u003e CANNON_MITHRIL \u003d Set.of(ObjectID.SAILING_MITHRIL_CANNON);\n    private static final Set\u003cInteger\u003e CANNON_ADAMANT \u003d Set.of(ObjectID.SAILING_ADAMANT_CANNON);\n    private static final Set\u003cInteger\u003e CANNON_RUNE \u003d Set.of(ObjectID.SAILING_RUNE_CANNON);\n    private static final Set\u003cInteger\u003e CANNON_DRAGON \u003d Set.of(ObjectID.SAILING_DRAGON_CANNON);\n    private static final Set\u003cInteger\u003e WIND_CATCHER \u003d Set.of(\n            ObjectID.SAILING_WIND_CATCHER_ACTIVATED,\n            ObjectID.SAILING_WIND_CATCHER_DEACTIVATED\n    );\n    private static final Set\u003cInteger\u003e GALE_CATCHER \u003d Set.of(\n            ObjectID.SAILING_GALE_CATCHER_ACTIVATED,\n            ObjectID.SAILING_GALE_CATCHER_DEACTIVATED\n    );\n\n    private static final Set\u003cInteger\u003e TRAWLING_NET_ROPE \u003d Set.of(\n            ObjectID.SAILING_ROPE_TRAWLING_NET,\n            ObjectID.SAILING_ROPE_TRAWLING_NET_3X8_STARBOARD,\n            ObjectID.SAILING_ROPE_TRAWLING_NET_3X8_PORT\n    );\n    private static final Set\u003cInteger\u003e TRAWLING_NET_LINEN \u003d Set.of(\n            ObjectID.SAILING_LINEN_TRAWLING_NET,\n            ObjectID.SAILING_LINEN_TRAWLING_NET_3X8_STARBOARD,\n            ObjectID.SAILING_LINEN_TRAWLING_NET_3X8_PORT\n    );\n    private static final Set\u003cInteger\u003e TRAWLING_NET_HEMP \u003d Set.of(\n            ObjectID.SAILING_HEMP_TRAWLING_NET,\n            ObjectID.SAILING_HEMP_TRAWLING_NET_3X8_STARBOARD,\n            ObjectID.SAILING_HEMP_TRAWLING_NET_3X8_PORT\n    );\n    private static final Set\u003cInteger\u003e TRAWLING_NET_COTTON \u003d Set.of(\n            ObjectID.SAILING_COTTON_TRAWLING_NET,\n            ObjectID.SAILING_COTTON_TRAWLING_NET_3X8_STARBOARD,\n            ObjectID.SAILING_COTTON_TRAWLING_NET_3X8_PORT\n    );\n    private static final Set\u003cInteger\u003e CHUM_STATION \u003d Set.of(\n            ObjectID.CHUM_STATION_2X5A,\n            ObjectID.CHUM_STATION_2X5B,\n            ObjectID.CHUM_STATION_3X8A,\n            ObjectID.CHUM_STATION_3X8B\n    );\n    private static final Set\u003cInteger\u003e CHUM_STATION_ADVANCED \u003d Set.of(\n            ObjectID.CHUM_STATION_ADVANCED_2X5A,\n            ObjectID.CHUM_STATION_ADVANCED_2X5B,\n            ObjectID.CHUM_STATION_ADVANCED_3X8A,\n            ObjectID.CHUM_STATION_ADVANCED_3X8B\n    );\n    private static final Set\u003cInteger\u003e CHUM_SPREADER \u003d Set.of(\n            ObjectID.CHUM_SPREADER_2X5A,\n            ObjectID.CHUM_SPREADER_2X5B,\n            ObjectID.CHUM_SPREADER_3X8A,\n            ObjectID.CHUM_SPREADER_3X8B\n    );\n    private static final Set\u003cInteger\u003e FATHOM_STONE \u003d Set.of(ObjectID.SAILING_FATHOM_STONE);\n    private static final Set\u003cInteger\u003e FATHOM_PEARL \u003d Set.of(ObjectID.SAILING_FATHOM_PEARL);\n    private static final Set\u003cInteger\u003e RANGE \u003d Set.of(ObjectID.SAILING_FACILITY_RANGE);\n    private static final Set\u003cInteger\u003e KEG \u003d Set.of(\n            ObjectID.SAILING_KEG_EMPTY,\n            ObjectID.SAILING_KEG_GROG,\n            ObjectID.SAILING_KEG_CIDER,\n            ObjectID.SAILING_KEG_WHIRLPOOL_SURPRISE,\n            ObjectID.SAILING_KEG_KRAKEN_INK_STOUT,\n            ObjectID.SAILING_KEG_PERILDANCE_BITTER,\n            ObjectID.SAILING_KEG_TRAWLERS_TRUST,\n            ObjectID.SAILING_KEG_HORIZONS_LURE\n    );\n    private static final Set\u003cInteger\u003e ANCHOR \u003d Set.of(\n            ObjectID.SAILING_ANCHOR_RAISED_2X5,\n            ObjectID.SAILING_ANCHOR_LOWERED_2X5,\n            ObjectID.SAILING_ANCHOR_RAISED_3X8,\n            ObjectID.SAILING_ANCHOR_LOWERED_3X8\n    );\n    private static final Set\u003cInteger\u003e INOCULATION_STATION \u003d Set.of(\n            ObjectID.SAILING_FACILITY_2X5_INOCULATION_STATION,\n            ObjectID.SAILING_FACILITY_2X5_INOCULATION_STATION_NOOP,\n            ObjectID.SAILING_FACILITY_3X8_INOCULATION_STATION\n    );\n    private static final Set\u003cInteger\u003e SALVAGING_STATION \u003d Set.of(\n            ObjectID.SAILING_SALVAGING_STATION_2X5A,\n            ObjectID.SAILING_SALVAGING_STATION_2X5B,\n            ObjectID.SAILING_SALVAGING_STATION_3X8\n    );\n    private static final Set\u003cInteger\u003e CRYSTAL_EXTRACTOR \u003d Set.of(\n            ObjectID.SAILING_CRYSTAL_EXTRACTOR_ACTIVATED,\n            ObjectID.SAILING_CRYSTAL_EXTRACTOR_DEACTIVATED\n    );\n    private static final Set\u003cInteger\u003e ETERNAL_BRAZIER \u003d Set.of(\n            ObjectID.SAILING_BOAT_1X3_ETERNAL_BRAZIER,\n            ObjectID.SAILING_BOAT_SKIFF_ETERNAL_BRAZIER,\n            ObjectID.SAILING_BOAT_SLOOP_ETERNAL_BRAZIER,\n            ObjectID.SAILING_BOAT_ETERNAL_BRAZIER_UI\n    );\n}","filePath":"src\\main\\java\\com\\boatupgrades\\FacilityService.java"},{"fileName":"UpgradeData.java","content":"package com.boatupgrades;\n\nimport java.util.*;\n\npublic final class UpgradeData\n{\n    private UpgradeData() {}\n\n    public static final class Material\n    {\n        public final String name;\n        public final int qty;\n\n        public Material(String name, int qty)\n        {\n            this.name \u003d name;\n            this.qty \u003d qty;\n        }\n\n        @Override\n        public String toString()\n        {\n            return qty + \" x \" + name;\n        }\n    }\n\n    public static final class UpgradeOption\n    {\n        public final String partName;\n        public final int boatType;\n        public final int targetTier;\n        public final int requiredSailingLevel;\n        public final int requiredConstructionLevel;\n        public final String displayName;\n        public final List\u003cMaterial\u003e materials;\n\n        public UpgradeOption(String partName, int boatType, int targetTier, int requiredSailingLevel, int requiredConstructionLevel, String displayName, List\u003cMaterial\u003e materials)\n        {\n            this.partName \u003d partName;\n            this.boatType \u003d boatType;\n            this.targetTier \u003d targetTier;\n            this.requiredSailingLevel \u003d requiredSailingLevel;\n            this.requiredConstructionLevel \u003d requiredConstructionLevel;\n            this.displayName \u003d displayName;\n            this.materials \u003d materials \u003d\u003d null ? Collections.emptyList() : materials;\n        }\n    }\n\n    private static final List\u003cUpgradeOption\u003e OPTIONS \u003d new ArrayList\u003c\u003e();\n    private static final Set\u003cString\u003e RAFT_EXCLUDED_FACILITIES \u003d Set.of(\n            \"Inoculation Station\",\n            \"Trawling Net\",\n            \"Chum Station\",\n            \"Anchor\",\n            \"Fathom Device\",\n            \"Salvaging Station\",\n            \"Crystal Extractor\"\n    );\n\n    static\n    {\n    // Core boat parts\n        // Wooden base/hull (tier 0)\n        OPTIONS.add(new UpgradeOption(\"Base\", 0, 0, 1, 1, \"Wooden base\",\n                Arrays.asList(new Material(\"Logs\",10), new Material(\"Rope\",6), new Material(\"Swamp tar\",10))));\n        OPTIONS.add(new UpgradeOption(\"Hull\", 1, 0, 1, 1, \"Wooden hull\",\n                Arrays.asList(new Material(\"Wooden hull parts\",10), new Material(\"Bronze nails\",300), new Material(\"Swamp tar\",20))));\n        OPTIONS.add(new UpgradeOption(\"Hull\", 2, 0, 1, 1, \"Wooden hull\",\n                Arrays.asList(new Material(\"Large wooden hull parts\",16), new Material(\"Bronze nails\",600), new Material(\"Swamp tar\",25))));\n\n        // Bronze helm (tier 0)\n        OPTIONS.add(new UpgradeOption(\"Helm\", 0, 0, 1, 1, \"Bronze helm\",\n                Arrays.asList(new Material(\"Plank\",2), new Material(\"Bronze bar\",4))));\n        OPTIONS.add(new UpgradeOption(\"Helm\", 1, 0, 1, 1, \"Bronze helm\",\n                Arrays.asList(new Material(\"Plank\",3), new Material(\"Bronze bar\",6))));\n        OPTIONS.add(new UpgradeOption(\"Helm\", 2, 0, 1, 1, \"Bronze helm\",\n                Arrays.asList(new Material(\"Plank\",4), new Material(\"Bronze bar\",8))));\n\n        // Wooden sails (tier 0)\n        OPTIONS.add(new UpgradeOption(\"Sails\", 0, 0, 1, 1, \"Wooden mast \u0026 linen sails\",\n                Arrays.asList(new Material(\"Logs\",5), new Material(\"Bronze nails\",20), new Material(\"Bolt of linen\",5))));\n        OPTIONS.add(new UpgradeOption(\"Sails\", 1, 0, 1, 1, \"Wooden mast \u0026 linen sails\",\n                Arrays.asList(new Material(\"Logs\",10), new Material(\"Bronze nails\",40), new Material(\"Bolt of linen\",5))));\n        OPTIONS.add(new UpgradeOption(\"Sails\", 2, 0, 1, 1, \"Wooden mast \u0026 linen sails\",\n                Arrays.asList(new Material(\"Logs\",15), new Material(\"Bronze nails\",60), new Material(\"Bolt of linen\",10))));\n\n        // Bronze keel (tier 0)\n        OPTIONS.add(new UpgradeOption(\"Keel\", 1, 0, 1, 1, \"Bronze keel\",\n                Arrays.asList(new Material(\"Bronze keel parts\",10))));\n        OPTIONS.add(new UpgradeOption(\"Keel\", 2, 0, 1, 1, \"Bronze keel\",\n                Arrays.asList(new Material(\"Large bronze keel parts\",16))));\n\n        // Iron helm (tier 1)\n        OPTIONS.add(new UpgradeOption(\"Helm\", 0, 1, 17, 14, \"Iron helm\",\n                Arrays.asList(new Material(\"Oak plank\",2), new Material(\"Iron bar\",4))));\n        OPTIONS.add(new UpgradeOption(\"Helm\", 1, 1, 17, 14, \"Iron helm\",\n                Arrays.asList(new Material(\"Oak plank\",3), new Material(\"Iron bar\",6))));\n        OPTIONS.add(new UpgradeOption(\"Helm\", 2, 1, 17, 14, \"Iron helm\",\n                Arrays.asList(new Material(\"Oak plank\",4), new Material(\"Iron bar\",8))));\n\n        // Oak base/hull (tier 1)\n        OPTIONS.add(new UpgradeOption(\"Base\", 0, 1, 20, 8, \"Oak base\",\n                Arrays.asList(new Material(\"Oak logs\",10), new Material(\"Rope\",6), new Material(\"Swamp tar\",10))));\n        OPTIONS.add(new UpgradeOption(\"Hull\", 1, 1, 20, 8, \"Oak hull\",\n                Arrays.asList(new Material(\"Oak hull parts\",10), new Material(\"Iron nails\",300), new Material(\"Swamp tar\",20))));\n        OPTIONS.add(new UpgradeOption(\"Hull\", 2, 1, 20, 8, \"Oak hull\",\n                Arrays.asList(new Material(\"Large oak hull parts\",16), new Material(\"Iron nails\",600), new Material(\"Swamp tar\",25))));\n\n        // Iron keel (tier 1)\n        OPTIONS.add(new UpgradeOption(\"Keel\", 1, 1, 22, 17, \"Iron keel\",\n                Arrays.asList(new Material(\"Iron keel parts\",10))));\n        OPTIONS.add(new UpgradeOption(\"Keel\", 2, 1, 22, 17, \"Iron keel\",\n                Arrays.asList(new Material(\"Large iron keel parts\",16))));\n\n        // Oak sails (tier 1)\n        OPTIONS.add(new UpgradeOption(\"Sails\", 0, 1, 24, 11, \"Oak mast \u0026 linen sails\",\n                Arrays.asList(new Material(\"Oak logs\",5), new Material(\"Iron nails\",20), new Material(\"Bolt of linen\",5))));\n        OPTIONS.add(new UpgradeOption(\"Sails\", 1, 1, 24, 11, \"Oak mast \u0026 linen sails\",\n                Arrays.asList(new Material(\"Oak logs\",10), new Material(\"Iron nails\",40), new Material(\"Bolt of linen\",5))));\n        OPTIONS.add(new UpgradeOption(\"Sails\", 2, 1, 24, 11, \"Oak mast \u0026 linen sails\",\n                Arrays.asList(new Material(\"Oak logs\",15), new Material(\"Iron nails\",60), new Material(\"Bolt of linen\",10))));\n\n        // Teak base/hull (tier 2)\n        OPTIONS.add(new UpgradeOption(\"Base\", 0, 2, 31, 23, \"Teak base\",\n                Arrays.asList(new Material(\"Teak logs\",10), new Material(\"Rope\",6), new Material(\"Swamp tar\",10), new Material(\"Lead bar\",5))));\n        OPTIONS.add(new UpgradeOption(\"Hull\", 1, 2, 31, 23, \"Teak hull\",\n                Arrays.asList(new Material(\"Teak hull parts\",10), new Material(\"Steel nails\",300), new Material(\"Swamp tar\",20), new Material(\"Lead bar\",5))));\n        OPTIONS.add(new UpgradeOption(\"Hull\", 2, 2, 31, 23, \"Teak hull\",\n                Arrays.asList(new Material(\"Large teak hull parts\",16), new Material(\"Steel nails\",600), new Material(\"Swamp tar\",25), new Material(\"Lead bar\",5))));\n\n        // Teak sails (tier 2)\n        OPTIONS.add(new UpgradeOption(\"Sails\", 0, 2, 36, 26, \"Teak mast \u0026 canvas sails\",\n                Arrays.asList(new Material(\"Teak logs\",5), new Material(\"Steel nails\",20), new Material(\"Bolt of canvas\",5))));\n        OPTIONS.add(new UpgradeOption(\"Sails\", 1, 2, 36, 26, \"Teak mast \u0026 canvas sails\",\n                Arrays.asList(new Material(\"Teak logs\",10), new Material(\"Steel nails\",40), new Material(\"Bolt of canvas\",5))));\n        OPTIONS.add(new UpgradeOption(\"Sails\", 2, 2, 36, 26, \"Teak mast \u0026 canvas sails\",\n                Arrays.asList(new Material(\"Teak logs\",15), new Material(\"Steel nails\",60), new Material(\"Bolt of canvas\",10))));\n\n        // Steel helm (tier 2)\n        OPTIONS.add(new UpgradeOption(\"Helm\", 0, 2, 38, 30, \"Steel helm\",\n                Arrays.asList(new Material(\"Teak plank\",2), new Material(\"Steel bar\",4))));\n        OPTIONS.add(new UpgradeOption(\"Helm\", 1, 2, 38, 30, \"Steel helm\",\n                Arrays.asList(new Material(\"Teak plank\",3), new Material(\"Steel bar\",6))));\n        OPTIONS.add(new UpgradeOption(\"Helm\", 2, 2, 38, 30, \"Steel helm\",\n                Arrays.asList(new Material(\"Teak plank\",4), new Material(\"Steel bar\",8))));\n\n        // Steel keel (tier 2)\n        OPTIONS.add(new UpgradeOption(\"Keel\", 1, 2, 39, 32, \"Steel keel\",\n                Arrays.asList(new Material(\"Steel keel parts\",10), new Material(\"Lead bar\",5))));\n        OPTIONS.add(new UpgradeOption(\"Keel\", 2, 2, 39, 32, \"Steel keel\",\n                Arrays.asList(new Material(\"Large steel keel parts\",16), new Material(\"Lead bar\",5))));\n\n        // Mahogany base/hull (tier 3)\n        OPTIONS.add(new UpgradeOption(\"Base\", 0, 3, 48, 41, \"Mahogany base\",\n                Arrays.asList(new Material(\"Mahogany logs\",10), new Material(\"Rope\",6), new Material(\"Swamp tar\",10), new Material(\"Lead bar\",5))));\n        OPTIONS.add(new UpgradeOption(\"Hull\", 1, 3, 48, 41, \"Mahogany hull\",\n                Arrays.asList(new Material(\"Mahogany hull parts\",10), new Material(\"Mithril nails\",300), new Material(\"Swamp tar\",20), new Material(\"Lead bar\",5))));\n        OPTIONS.add(new UpgradeOption(\"Hull\", 2, 3, 48, 41, \"Mahogany hull\",\n                Arrays.asList(new Material(\"Large mahogany hull parts\",16), new Material(\"Mithril nails\",600), new Material(\"Swamp tar\",25), new Material(\"Lead bar\",5))));\n\n        // Mahogany sails (tier 3)\n        OPTIONS.add(new UpgradeOption(\"Sails\", 0, 3, 52, 45, \"Mahogany mast \u0026 canvas sails\",\n                Arrays.asList(new Material(\"Mahogany logs\",5), new Material(\"Mithril nails\",20), new Material(\"Bolt of canvas\",5))));\n        OPTIONS.add(new UpgradeOption(\"Sails\", 1, 3, 52, 45, \"Mahogany mast \u0026 canvas sails\",\n                Arrays.asList(new Material(\"Mahogany logs\",10), new Material(\"Mithril nails\",40), new Material(\"Bolt of canvas\",5))));\n        OPTIONS.add(new UpgradeOption(\"Sails\", 2, 3, 52, 45, \"Mahogany mast \u0026 canvas sails\",\n                Arrays.asList(new Material(\"Mahogany logs\",15), new Material(\"Mithril nails\",60), new Material(\"Bolt of canvas\",10))));\n\n        // Mithril keel (tier 3)\n        OPTIONS.add(new UpgradeOption(\"Keel\", 1, 3, 54, 50, \"Mithril keel\",\n                Arrays.asList(new Material(\"Mithril keel parts\",10), new Material(\"Lead bar\",5))));\n        OPTIONS.add(new UpgradeOption(\"Keel\", 2, 3, 54, 50, \"Mithril keel\",\n                Arrays.asList(new Material(\"Large mithril keel parts\",16), new Material(\"Lead bar\",5))));\n\n        // Mithril helm (tier 3)\n        OPTIONS.add(new UpgradeOption(\"Helm\", 0, 3, 55, 47, \"Mithril helm\",\n                Arrays.asList(new Material(\"Mahogany plank\",2), new Material(\"Mithril bar\",4))));\n        OPTIONS.add(new UpgradeOption(\"Helm\", 1, 3, 55, 47, \"Mithril helm\",\n                Arrays.asList(new Material(\"Mahogany plank\",3), new Material(\"Mithril bar\",6))));\n        OPTIONS.add(new UpgradeOption(\"Helm\", 2, 3, 55, 47, \"Mithril helm\",\n                Arrays.asList(new Material(\"Mahogany plank\",4), new Material(\"Mithril bar\",8))));\n\n        // Adamant keel (tier 4)\n        OPTIONS.add(new UpgradeOption(\"Keel\", 1, 4, 66, 62, \"Adamant keel\",\n                Arrays.asList(new Material(\"Adamant keel parts\",10), new Material(\"Lead bar\",5))));\n        OPTIONS.add(new UpgradeOption(\"Keel\", 2, 4, 66, 62, \"Adamant keel\",\n                Arrays.asList(new Material(\"Large adamant keel parts\",16), new Material(\"Lead bar\",5))));\n\n        // Camphor base/hull (tier 4)\n        OPTIONS.add(new UpgradeOption(\"Base\", 0, 4, 67, 59, \"Camphor base\",\n                Arrays.asList(new Material(\"Camphor logs\",10), new Material(\"Rope\",6), new Material(\"Swamp tar\",10), new Material(\"Lead bar\",5))));\n        OPTIONS.add(new UpgradeOption(\"Hull\", 1, 4, 67, 59, \"Camphor hull\",\n                Arrays.asList(new Material(\"Camphor hull parts\",10), new Material(\"Adamantite nails\",300), new Material(\"Swamp tar\",20), new Material(\"Lead bar\",5))));\n        OPTIONS.add(new UpgradeOption(\"Hull\", 2, 4, 67, 59, \"Camphor hull\",\n                Arrays.asList(new Material(\"Large camphor hull parts\",16), new Material(\"Adamantite nails\",600), new Material(\"Swamp tar\",25), new Material(\"Lead bar\",5))));\n\n        // Camphor sails (tier 4)\n        OPTIONS.add(new UpgradeOption(\"Sails\", 0, 4, 68, 60, \"Camphor mast \u0026 canvas sails\",\n                Arrays.asList(new Material(\"Camphor logs\",5), new Material(\"Adamantite nails\",20), new Material(\"Bolt of canvas\",5))));\n        OPTIONS.add(new UpgradeOption(\"Sails\", 1, 4, 68, 60, \"Camphor mast \u0026 canvas sails\",\n                Arrays.asList(new Material(\"Camphor logs\",10), new Material(\"Adamantite nails\",40), new Material(\"Bolt of canvas\",5))));\n        OPTIONS.add(new UpgradeOption(\"Sails\", 2, 4, 68, 60, \"Camphor mast \u0026 canvas sails\",\n                Arrays.asList(new Material(\"Camphor logs\",15), new Material(\"Adamantite nails\",60), new Material(\"Bolt of canvas\",10))));\n\n        // Adamant helm (tier 4)\n        OPTIONS.add(new UpgradeOption(\"Helm\", 0, 4, 72, 59, \"Adamant helm\",\n                Arrays.asList(new Material(\"Camphor plank\",2), new Material(\"Adamantite bar\",4))));\n        OPTIONS.add(new UpgradeOption(\"Helm\", 1, 4, 72, 59, \"Adamant helm\",\n                Arrays.asList(new Material(\"Camphor plank\",3), new Material(\"Adamantite bar\",6))));\n        OPTIONS.add(new UpgradeOption(\"Helm\", 2, 4, 72, 59, \"Adamant helm\",\n                Arrays.asList(new Material(\"Camphor plank\",4), new Material(\"Adamantite bar\",8))));\n\n        // Ironwood base/hull (tier 5)\n        OPTIONS.add(new UpgradeOption(\"Base\", 0, 5, 81,75,  \"Ironwood base\",\n                Arrays.asList(new Material(\"Ironwood logs\",10), new Material(\"Rope\",6), new Material(\"Swamp tar\",10), new Material(\"Cupronickel bar\",5))));\n        OPTIONS.add(new UpgradeOption(\"Hull\", 1, 5, 81, 75, \"Ironwood hull\",\n                Arrays.asList(new Material(\"Ironwood hull parts\",10), new Material(\"Rune nails\",300), new Material(\"Swamp tar\",20), new Material(\"Cupronickel bar\",5))));\n        OPTIONS.add(new UpgradeOption(\"Hull\", 2, 5, 81, 75, \"Ironwood hull\",\n                Arrays.asList(new Material(\"Large ironwood hull parts\",16), new Material(\"Rune nails\",600), new Material(\"Swamp tar\",25), new Material(\"Cupronickel bar\",5))));\n\n        // Ironwood sails (tier 5)\n        OPTIONS.add(new UpgradeOption(\"Sails\", 0, 5, 83, 77, \"Ironwood mast \u0026 cotton sails\",\n                Arrays.asList(new Material(\"Ironwood logs\",5), new Material(\"Rune nails\",20), new Material(\"Bolt of cotton\",5))));\n        OPTIONS.add(new UpgradeOption(\"Sails\", 1, 5, 83, 77, \"Ironwood mast \u0026 cotton sails\",\n                Arrays.asList(new Material(\"Ironwood logs\",10), new Material(\"Rune nails\",40), new Material(\"Bolt of cotton\",5))));\n        OPTIONS.add(new UpgradeOption(\"Sails\", 2, 5, 83, 77, \"Ironwood mast \u0026 cotton sails\",\n                Arrays.asList(new Material(\"Ironwood logs\",15), new Material(\"Rune nails\",60), new Material(\"Bolt of cotton\",10))));\n\n        // Rune keel (tier 5)\n        OPTIONS.add(new UpgradeOption(\"Keel\", 1, 5, 85, 78, \"Rune keel\",\n                Arrays.asList(new Material(\"Rune keel parts\",10), new Material(\"Cupronickel bar\",5))));\n        OPTIONS.add(new UpgradeOption(\"Keel\", 2, 5, 85, 78, \"Rune keel\",\n                Arrays.asList(new Material(\"Large rune keel parts\",16), new Material(\"Cupronickel bar\",5))));\n\n        // Rune helm (tier 5)\n        OPTIONS.add(new UpgradeOption(\"Helm\", 0, 5, 87, 81, \"Rune helm\",\n                Arrays.asList(new Material(\"Ironwood plank\",2), new Material(\"Runite bar\",4))));\n        OPTIONS.add(new UpgradeOption(\"Helm\", 1, 5, 87, 81, \"Rune helm\",\n                Arrays.asList(new Material(\"Ironwood plank\",3), new Material(\"Runite bar\",6))));\n        OPTIONS.add(new UpgradeOption(\"Helm\", 2, 5, 87, 81, \"Rune helm\",\n                Arrays.asList(new Material(\"Ironwood plank\",4), new Material(\"Runite bar\",8))));\n\n        // Rosewood base/hull (tier 6)\n        OPTIONS.add(new UpgradeOption(\"Base\", 0, 6, 93, 84, \"Rosewood base\",\n                Arrays.asList(new Material(\"Rosewood logs\",10), new Material(\"Rope\",6), new Material(\"Swamp tar\",10), new Material(\"Cupronickel bar\",5))));\n        OPTIONS.add(new UpgradeOption(\"Hull\", 1, 6, 93, 84, \"Rosewood hull\",\n                Arrays.asList(new Material(\"Rosewood hull parts\",10), new Material(\"Dragon nails\",300), new Material(\"Swamp tar\",20), new Material(\"Cupronickel bar\",5))));\n        OPTIONS.add(new UpgradeOption(\"Hull\", 2, 6, 93, 84, \"Rosewood hull\",\n                Arrays.asList(new Material(\"Large rosewood hull parts\",16), new Material(\"Dragon nails\",600), new Material(\"Swamp tar\",25), new Material(\"Cupronickel bar\",5))));\n\n        // Rosewood sails (tier 6)\n        OPTIONS.add(new UpgradeOption(\"Sails\", 0, 6, 94, 85, \"Rosewood mast \u0026 cotton sails\",\n                Arrays.asList(new Material(\"Rosewood logs\",5), new Material(\"Dragon nails\",20), new Material(\"Bolt of cotton\",5))));\n        OPTIONS.add(new UpgradeOption(\"Sails\", 1, 6, 94, 85, \"Rosewood mast \u0026 cotton sails\",\n                Arrays.asList(new Material(\"Rosewood logs\",10), new Material(\"Dragon nails\",40), new Material(\"Bolt of cotton\",5))));\n        OPTIONS.add(new UpgradeOption(\"Sails\", 2, 6, 94, 85, \"Rosewood mast \u0026 cotton sails\",\n                Arrays.asList(new Material(\"Rosewood logs\",15), new Material(\"Dragon nails\",60), new Material(\"Bolt of cotton\",10))));\n\n        // Dragon helm (tier 6)\n        OPTIONS.add(new UpgradeOption(\"Helm\", 0, 6, 96, 86, \"Dragon helm\",\n                Arrays.asList(new Material(\"Rosewood plank\",2), new Material(\"Dragon metal sheet\",4))));\n        OPTIONS.add(new UpgradeOption(\"Helm\", 1, 6, 96, 86, \"Dragon helm\",\n                Arrays.asList(new Material(\"Rosewood plank\",3), new Material(\"Dragon metal sheet\",6))));\n        OPTIONS.add(new UpgradeOption(\"Helm\", 2, 6, 96, 86, \"Dragon helm\",\n                Arrays.asList(new Material(\"Rosewood plank\",4), new Material(\"Dragon metal sheet\",8))));\n\n        // Dragon keel (tier 6)\n        OPTIONS.add(new UpgradeOption(\"Keel\", 1, 6, 97, 87, \"Dragon keel\",\n                Arrays.asList(new Material(\"Dragon keel parts\",10), new Material(\"Cupronickel bar\",5))));\n        OPTIONS.add(new UpgradeOption(\"Keel\", 2, 6, 97, 87, \"Dragon keel\",\n                Arrays.asList(new Material(\"Large dragon keel parts\",16), new Material(\"Cupronickel bar\",5))));\n\n    // Facilities\n\n        // Cargo hold\n        OPTIONS.add(new UpgradeOption(\"Cargo Hold\", -1, 0, 1, 1, \"Wooden cargo hold\",\n                Arrays.asList(new Material(\"Plank\",8), new Material(\"Bronze nails\",32))));\n        OPTIONS.add(new UpgradeOption(\"Cargo Hold\", -1, 1, 18, 11, \"Oak cargo hold\",\n                Arrays.asList(new Material(\"Oak plank\",8), new Material(\"Iron nails\",32))));\n        OPTIONS.add(new UpgradeOption(\"Cargo Hold\", -1, 2, 29, 21, \"Teak cargo hold\",\n                Arrays.asList(new Material(\"Teak plank\",8), new Material(\"Steel nails\",32), new Material(\"Lead bar\",3))));\n        OPTIONS.add(new UpgradeOption(\"Cargo Hold\", -1, 3, 46, 41, \"Mahogany cargo hold\",\n                Arrays.asList(new Material(\"Mahogany plank\",8), new Material(\"Mithril nails\",32), new Material(\"Lead bar\",3))));\n        OPTIONS.add(new UpgradeOption(\"Cargo Hold\", -1, 4, 60, 53, \"Camphor cargo hold\",\n                Arrays.asList(new Material(\"Camphor plank\",8), new Material(\"Adamantite nails\",32), new Material(\"Lead bar\",3))));\n        OPTIONS.add(new UpgradeOption(\"Cargo Hold\", -1, 5, 80, 77, \"Ironwood cargo hold\",\n                Arrays.asList(new Material(\"Ironwood plank\",8), new Material(\"Rune nails\",32), new Material(\"Cupronickel bar\",3))));\n        OPTIONS.add(new UpgradeOption(\"Cargo Hold\", -1, 6, 89, 84, \"Rosewood cargo hold\",\n                Arrays.asList(new Material(\"Rosewood plank\",8), new Material(\"Dragon nails\",32), new Material(\"Cupronickel bar\",3))));\n\n        // Salvaging hook\n        OPTIONS.add(new UpgradeOption(\"Salvaging Hook\", -1, 0, 15, 1, \"Bronze salvaging hook\",\n                Arrays.asList(new Material(\"Plank\",4), new Material(\"Bronze nails\",16), new Material(\"Bronze bar\",6), new Material(\"Rope\",1))));\n        OPTIONS.add(new UpgradeOption(\"Salvaging Hook\", -1, 1, 21, 9, \"Iron salvaging hook\",\n                Arrays.asList(new Material(\"Oak plank\",4), new Material(\"Iron nails\",16), new Material(\"Iron bar\",6), new Material(\"Rope\",1))));\n        OPTIONS.add(new UpgradeOption(\"Salvaging Hook\", -1, 2, 27, 18, \"Steel salvaging hook\",\n                Arrays.asList(new Material(\"Teak plank\",4), new Material(\"Steel nails\",16), new Material(\"Steel bar\",6), new Material(\"Rope\",1), new Material(\"Lead bar\",3))));\n        OPTIONS.add(new UpgradeOption(\"Salvaging Hook\", -1, 3, 44, 30, \"Mithril salvaging hook\",\n                Arrays.asList(new Material(\"Mahogany plank\",4), new Material(\"Mithril nails\",16), new Material(\"Mithril bar\",6), new Material(\"Rope\",1), new Material(\"Lead bar\",3))));\n        OPTIONS.add(new UpgradeOption(\"Salvaging Hook\", -1, 4, 59, 52, \"Adamant salvaging hook\",\n                Arrays.asList(new Material(\"Camphor plank\",4), new Material(\"Adamantite nails\",16), new Material(\"Adamantite bar\",6), new Material(\"Rope\",1), new Material(\"Lead bar\",3))));\n        OPTIONS.add(new UpgradeOption(\"Salvaging Hook\", -1, 5, 74, 66, \"Rune salvaging hook\",\n                Arrays.asList(new Material(\"Ironwood plank\",4), new Material(\"Rune nails\",16), new Material(\"Runite bar\",6), new Material(\"Rope\",1), new Material(\"Lead bar\",4), new Material(\"Cupronickel bar\",4))));\n        OPTIONS.add(new UpgradeOption(\"Salvaging Hook\", -1, 6, 86, 78, \"Dragon salvaging hook\",\n                Arrays.asList(new Material(\"Rosewood plank\",4), new Material(\"Dragon nails\",16), new Material(\"Dragon metal sheet\",6), new Material(\"Rope\",1), new Material(\"Cupronickel bar\",4), new Material(\"Broken dragon hook\",1))));\n\n        // Cannon\n        OPTIONS.add(new UpgradeOption(\"Cannon\", -1, 0, 28, 21, \"Bronze cannon\",\n                Arrays.asList(new Material(\"Plank\",4), new Material(\"Bronze nails\",16), new Material(\"Bronze bar\",8))));\n        OPTIONS.add(new UpgradeOption(\"Cannon\", -1, 1, 35, 28, \"Iron cannon\",\n                Arrays.asList(new Material(\"Oak plank\",4), new Material(\"Iron nails\",16), new Material(\"Iron bar\",8))));\n        OPTIONS.add(new UpgradeOption(\"Cannon\", -1, 2, 47, 39, \"Steel cannon\",\n                Arrays.asList(new Material(\"Teak plank\",4), new Material(\"Steel nails\",16), new Material(\"Steel bar\",8))));\n        OPTIONS.add(new UpgradeOption(\"Cannon\", -1, 3, 57, 50, \"Mithril cannon\",\n                Arrays.asList(new Material(\"Mahogany plank\",4), new Material(\"Mithril nails\",16), new Material(\"Mithril bar\",8))));\n        OPTIONS.add(new UpgradeOption(\"Cannon\", -1, 4, 69, 61, \"Adamant cannon\",\n                Arrays.asList(new Material(\"Camphor plank\",4), new Material(\"Adamantite nails\",16), new Material(\"Adamantite bar\",8))));\n        OPTIONS.add(new UpgradeOption(\"Cannon\", -1, 5, 80, 76, \"Rune cannon\",\n                Arrays.asList(new Material(\"Ironwood plank\",4), new Material(\"Rune nails\",16), new Material(\"Runite bar\",8))));\n        OPTIONS.add(new UpgradeOption(\"Cannon\", -1, 6, 92, 84, \"Dragon cannon\",\n                Arrays.asList(new Material(\"Rosewood plank\",4), new Material(\"Dragon nails\",16), new Material(\"Dragon metal sheet\",8), new Material(\"Dragon cannon barrel\",1))));\n\n        // Teleport focus\n        OPTIONS.add(new UpgradeOption(\"Teleport Focus\", -1, 0, 55, 49, \"Teleport focus\",\n                Arrays.asList(new Material(\"Mahogany plank\",8), new Material(\"Mithril nails\",32), new Material(\"Lead bar\",4), new Material(\"Magic stone\",1))));\n        OPTIONS.add(new UpgradeOption(\"Teleport Focus\", -1, 1, 75, 69, \"Greater teleport focus\",\n                Arrays.asList(new Material(\"Ironwood plank\",8), new Material(\"Rune nails\",32), new Material(\"Cupronickel bar\",4), new Material(\"Magic stone\",2), new Material(\"Bottled storm\",1))));\n\n        // Wind/Gale catcher\n        OPTIONS.add(new UpgradeOption(\"Wind Device\", -1, 0, 53, 47, \"Wind catcher\",\n                Arrays.asList(new Material(\"Teak plank\",4), new Material(\"Steel nails\",16), new Material(\"Steel bar\",8), new Material(\"Lead bar\",4), new Material(\"Air rune\",10000), new Material(\"Captured wind mote\",1))));\n        OPTIONS.add(new UpgradeOption(\"Wind Device\", -1, 1, 79, 70, \"Gale catcher\",\n                Arrays.asList(new Material(\"Camphor plank\",4), new Material(\"Adamantite nails\",16), new Material(\"Adamantite bar\",8), new Material(\"Cupronickel bar\",4), new Material(\"Air rune\",25000), new Material(\"Captured wind mote\",1), new Material(\"Swift albatross feather\",5))));\n\n        // Trawling net\n        OPTIONS.add(new UpgradeOption(\"Trawling Net\", -1, 0, 56, 45, \"Rope trawling net\",\n                Arrays.asList(new Material(\"Rope\",7), new Material(\"Teak plank\",4), new Material(\"Steel bar\",4), new Material(\"Lead bar\",2))));\n        // Jagex still has different construction level requirements for Linen trawling net on sloops compared to skiffs\n        OPTIONS.add(new UpgradeOption(\"Trawling Net\", 1, 1, 65, 53, \"Linen trawling net\",\n                Arrays.asList(new Material(\"Linen yarn\",6), new Material(\"Mahogany plank\",4), new Material(\"Rope\",1), new Material(\"Mithril bar\",4), new Material(\"Lead bar\",2))));\n        OPTIONS.add(new UpgradeOption(\"Trawling Net\", 2, 1, 65, 61, \"Linen trawling net\",\n                Arrays.asList(new Material(\"Linen yarn\",6), new Material(\"Mahogany plank\",4), new Material(\"Rope\",1), new Material(\"Mithril bar\",4), new Material(\"Lead bar\",2))));\n        OPTIONS.add(new UpgradeOption(\"Trawling Net\", -1, 2, 76, 65, \"Hemp trawling net\",\n                Arrays.asList(new Material(\"Hemp yarn\",6), new Material(\"Camphor plank\",4), new Material(\"Rope\",1), new Material(\"Adamantite bar\",4), new Material(\"Cupronickel bar\",2), new Material(\"Ray barbs\",4))));\n        OPTIONS.add(new UpgradeOption(\"Trawling Net\", -1, 3, 84, 73, \"Cotton trawling net\",\n                Arrays.asList(new Material(\"Cotton yarn\",6), new Material(\"Ironwood plank\",4), new Material(\"Rope\",1), new Material(\"Runite bar\",4), new Material(\"Cupronickel bar\",2), new Material(\"Ray barbs\",8))));\n\n        // Chum station/spreader\n        OPTIONS.add(new UpgradeOption(\"Chum Station\", -1, 0, 56, 45, \"Chum station\",\n                Arrays.asList(new Material(\"Mahogany plank\",10), new Material(\"Mithril nails\",40), new Material(\"Steel bar\",2), new Material(\"Fishing bait\",1000), new Material(\"Knife\",1))));\n        OPTIONS.add(new UpgradeOption(\"Chum Station\", -1, 1, 68, 61, \"Advanced chum station\",\n                Arrays.asList(new Material(\"Camphor plank\",10), new Material(\"Adamantite nails\",40), new Material(\"Steel bar\",2), new Material(\"Fishing bait\",1000), new Material(\"Knife\",1))));\n        OPTIONS.add(new UpgradeOption(\"Chum Station\", -1, 2, 82, 74, \"Chum spreader\",\n                Arrays.asList(new Material(\"Ironwood plank\",10), new Material(\"Rune nails\",40), new Material(\"Cupronickel bar\",5), new Material(\"Fishing bait\",10000), new Material(\"Narwhal horn knife\",1))));\n\n        // Fathom stone/pearl\n        OPTIONS.add(new UpgradeOption(\"Fathom Device\", -1, 0, 70, 62, \"Fathom stone\",\n                Arrays.asList(new Material(\"Camphor plank\",10), new Material(\"Adamantite nails\",40), new Material(\"Molten glass\",4), new Material(\"Cupronickel bar\",2))));\n        OPTIONS.add(new UpgradeOption(\"Fathom Device\", -1, 1, 91, 83, \"Fathom pearl\",\n                Arrays.asList(new Material(\"Rosewood plank\",10), new Material(\"Dragon nails\",40), new Material(\"Dragon metal sheet\",2), new Material(\"Echo pearl\",1))));\n\n        // Misc\n        OPTIONS.add(new UpgradeOption(\"Range\", -1, 0, 16, 6, \"Range\",\n                Arrays.asList(new Material(\"Steel bar\",4), new Material(\"Charcoal\",2), new Material(\"Tinderbox\",1))));\n        OPTIONS.add(new UpgradeOption(\"Keg\", -1, 0, 33, 25, \"Keg\",\n                Arrays.asList(new Material(\"Oak plank\",5), new Material(\"Iron nails\",20), new Material(\"Barrel stand\",1))));\n        OPTIONS.add(new UpgradeOption(\"Anchor\", -1, 0, 37, 29, \"Anchor\",\n                Arrays.asList(new Material(\"Steel bar\",8), new Material(\"Lead bar\",6), new Material(\"Rope\",1))));\n        OPTIONS.add(new UpgradeOption(\"Inoculation Station\", -1, 0, 40, 37, \"Inoculation station\",\n                Arrays.asList(new Material(\"Teak plank\",8), new Material(\"Steel nails\",32), new Material(\"Relicym\u0027s balm(4)\",6))));\n        OPTIONS.add(new UpgradeOption(\"Salvaging Station\", -1, 0, 42, 34, \"Salvaging station\",\n                Arrays.asList(new Material(\"Teak plank\",4), new Material(\"Steel nails\",16))));\n        OPTIONS.add(new UpgradeOption(\"Crystal Extractor\", -1, 0, 73, 67, \"Crystal extractor\",\n                Arrays.asList(new Material(\"Ironwood plank\",6), new Material(\"Cupronickel bar\",5), new Material(\"Magic stone\",2), new Material(\"Heart of ithell\",1))));\n        OPTIONS.add(new UpgradeOption(\"Eternal Brazier\", -1, 0, 78, 72, \"Eternal brazier\",\n                Arrays.asList(new Material(\"Ironwood plank\",4), new Material(\"Rune nails\",16), new Material(\"Runite bar\",6), new Material(\"Cupronickel bar\",6), new Material(\"Te salt\",250), new Material(\"Efh salt\",250), new Material(\"Urt salt\",250))));\n    }\n\n    public static List\u003cUpgradeOption\u003e getAvailableOptions(\n            int boatType,\n            Map\u003cString, Integer\u003e currentTiers,\n            int playerSailingLevel,\n            int playerConstructionLevel,\n            BoatUpgradesConfig config\n    )\n    {\n        List\u003cUpgradeOption\u003e out \u003d new ArrayList\u003c\u003e();\n\n        boolean isRaft \u003d boatType \u003d\u003d 0;\n        boolean filterConstruction \u003d config.filterConstructionRequirement();\n\n        for (UpgradeOption o : OPTIONS)\n        {\n            if (o.boatType !\u003d -1 \u0026\u0026 o.boatType !\u003d boatType)\n            {\n                continue;\n            }\n\n            if (isRaft \u0026\u0026 RAFT_EXCLUDED_FACILITIES.contains(o.partName))\n            {\n                continue;\n            }\n\n            Integer cur \u003d currentTiers.get(o.partName);\n            int curTier \u003d cur \u003d\u003d null ? -1 : cur;\n\n            if (o.targetTier \u003c\u003d curTier)\n            {\n                continue;\n            }\n\n            if (playerSailingLevel \u003c o.requiredSailingLevel)\n            {\n                continue;\n            }\n\n            if (filterConstruction \u0026\u0026 playerConstructionLevel \u003c o.requiredConstructionLevel)\n            {\n                continue;\n            }\n\n            out.add(o);\n        }\n\n        out.sort(Comparator.comparingInt(o -\u003e o.requiredSailingLevel));\n        return out;\n    }\n}","filePath":"src\\main\\java\\com\\boatupgrades\\UpgradeData.java"},{"fileName":"SchematicEntry.java","content":"package com.boatupgrades.utils;\n\npublic class SchematicEntry\n{\n    private final String schematicName;\n    private final String upgradeName;\n    private final int varbit;\n\n    public SchematicEntry(String schematicName, String upgradeName, int varbitID)\n    {\n        this.schematicName \u003d schematicName;\n        this.upgradeName \u003d upgradeName;\n        this.varbit \u003d varbitID;\n    }\n\n    public String getSchematicName()\n    {\n        return schematicName;\n    }\n\n    public String getUpgradeName()\n    {\n        return upgradeName;\n    }\n\n    public int getVarbit()\n    {\n        return varbit;\n    }\n}\n\n","filePath":"src\\main\\java\\com\\boatupgrades\\utils\\SchematicEntry.java"},{"fileName":"SchematicUtils.java","content":"package com.boatupgrades.utils;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.gameval.VarbitID;\n\nimport javax.inject.Inject;\nimport java.util.*;\n\npublic class SchematicUtils\n{\n    private final Client client;\n\n    @Inject\n    public SchematicUtils(Client client)\n    {\n        this.client \u003d client;\n    }\n\n    private static final List\u003cSchematicEntry\u003e SCHEMATICS \u003d Arrays.asList(\n            new SchematicEntry(\"Salvaging station schematic\", \"Salvaging station\", VarbitID.LOST_SCHEMATIC_SALVAGING_STATION),\n            new SchematicEntry(\"Gale catcher schematic\", \"Gale catcher\", VarbitID.LOST_SCHEMATIC_GALE_CATCHER),\n            new SchematicEntry(\"Rosewood hull schematic\", \"Rosewood hull\", VarbitID.LOST_SCHEMATIC_ROSEWOOD_HULL),\n            new SchematicEntry(\"Rosewood cargo hold schematic\", \"Rosewood cargo hold\", VarbitID.LOST_SCHEMATIC_ROSEWOOD_CARGO_HOLD),\n            new SchematicEntry(\"Dragon helm schematic\", \"Dragon helm\", VarbitID.LOST_SCHEMATIC_DRAGON_TILLER),\n            new SchematicEntry(\"Dragon salvaging hook schematic\", \"Dragon salvaging hook\", VarbitID.LOST_SCHEMATIC_DRAGON_SALVAGING_HOOK),\n            new SchematicEntry(\"Eternal brazier schematic\", \"Eternal brazier\", VarbitID.LOST_SCHEMATIC_ETERNAL_BRAZIER),\n            new SchematicEntry(\"Dragon cannon schematic\", \"Dragon cannon\", VarbitID.LOST_SCHEMATIC_DRAGON_CANNON),\n            new SchematicEntry(\"Rosewood \u0026 cotton sails schematic\", \"Rosewood mast \u0026 cotton sails\", VarbitID.LOST_SCHEMATIC_ROSEWOOD_SAIL),\n            new SchematicEntry(\"Dragon keel schematic\", \"Dragon keel\", VarbitID.LOST_SCHEMATIC_DRAGON_KEEL)\n    );\n\n    public boolean hasSchematic(String upgradeName)\n    {\n        Optional\u003cSchematicEntry\u003e entry \u003d SCHEMATICS.stream()\n                .filter(s -\u003e s.getUpgradeName().equals(upgradeName))\n                .findFirst();\n\n        return entry.map(schematicEntry -\u003e client.getVarbitValue(schematicEntry.getVarbit()) \u003d\u003d 1).orElse(true);\n\n    }\n\n    public String getSchematicNameForUpgrade(String upgradeName)\n    {\n        return SCHEMATICS.stream()\n                .filter(s -\u003e s.getUpgradeName().equals(upgradeName))\n                .map(SchematicEntry::getSchematicName)\n                .findFirst()\n                .orElse(null);\n    }\n}","filePath":"src\\main\\java\\com\\boatupgrades\\utils\\SchematicUtils.java"},{"fileName":"UpgradeVisibilityUtils.java","content":"package com.boatupgrades.utils;\n\nimport com.boatupgrades.BoatUpgradesConfig;\nimport com.boatupgrades.UpgradeData;\nimport net.runelite.api.Client;\nimport net.runelite.api.Skill;\n\nimport javax.inject.Inject;\nimport java.util.*;\n\npublic class UpgradeVisibilityUtils\n{\n    private final Client client;\n    private final BoatUpgradesConfig config;\n    private final SchematicUtils schematicUtils;\n\n    @Inject\n    public UpgradeVisibilityUtils(\n            Client client,\n            BoatUpgradesConfig config,\n            SchematicUtils schematicUtils\n    )\n    {\n        this.client \u003d client;\n        this.config \u003d config;\n        this.schematicUtils \u003d schematicUtils;\n    }\n\n    public boolean meetsConstructionRequirement(UpgradeData.UpgradeOption opt)\n    {\n        int constructionLevel \u003d client.getBoostedSkillLevel(Skill.CONSTRUCTION);\n        return constructionLevel \u003e\u003d opt.requiredConstructionLevel;\n    }\n\n    public boolean shouldShowUpgrade(UpgradeData.UpgradeOption opt)\n    {\n        boolean hasSchematic \u003d schematicUtils.hasSchematic(opt.displayName);\n        boolean meetsConstruction \u003d meetsConstructionRequirement(opt);\n\n        if (config.filterSchematicRequirement() \u0026\u0026 !hasSchematic)\n        {\n            return false;\n        }\n\n        if (config.filterConstructionRequirement() \u0026\u0026 !meetsConstruction)\n        {\n            return false;\n        }\n\n        return true;\n    }\n\n    public List\u003cUpgradeData.UpgradeOption\u003e getVisibleUpgrades(List\u003cUpgradeData.UpgradeOption\u003e options)\n    {\n        if (options \u003d\u003d null || options.isEmpty())\n        {\n            return Collections.emptyList();\n        }\n\n        List\u003cUpgradeData.UpgradeOption\u003e visible \u003d new ArrayList\u003c\u003e();\n\n        for (UpgradeData.UpgradeOption opt : options)\n        {\n            if (!isConfigEnabled(opt.partName))\n            {\n                continue;\n            }\n\n            boolean hasSchematic \u003d schematicUtils.hasSchematic(opt.displayName);\n            boolean meetsConstruction \u003d meetsConstructionRequirement(opt);\n\n            if (config.filterSchematicRequirement() \u0026\u0026 !hasSchematic)\n            {\n                continue;\n            }\n\n            if (config.filterConstructionRequirement() \u0026\u0026 !meetsConstruction)\n            {\n                continue;\n            }\n\n            visible.add(opt);\n        }\n\n        if (!config.hideLowerTiers())\n        {\n            return visible;\n        }\n\n        Map\u003cString, UpgradeData.UpgradeOption\u003e best \u003d new LinkedHashMap\u003c\u003e();\n        for (UpgradeData.UpgradeOption opt : visible)\n        {\n            best.merge(\n                    opt.partName,\n                    opt,\n                    (a, b) -\u003e b.targetTier \u003e a.targetTier ? b : a\n            );\n        }\n\n        List\u003cUpgradeData.UpgradeOption\u003e result \u003d new ArrayList\u003c\u003e(best.values());\n\n        result.sort(Comparator.comparingInt(o -\u003e o.requiredSailingLevel));\n\n        return result;\n    }\n\n    public boolean isConfigEnabled(String partName)\n    {\n        switch (partName)\n        {\n            case \"Base\":\n            case \"Hull\": return config.showBaseHull();\n            case \"Helm\": return config.showHelm();\n            case \"Sails\": return config.showSails();\n            case \"Keel\": return config.showKeel();\n            case \"Salvaging Hook\": return config.showSalvagingHook();\n            case \"Cargo Hold\": return config.showCargoHold();\n            case \"Cannon\": return config.showCannon();\n            case \"Teleport Focus\": return config.showTeleportFocus();\n            case \"Wind Device\": return config.showWindDevice();\n            case \"Trawling Net\": return config.showTrawlingNet();\n            case \"Chum Station\": return config.showChumStation();\n            case \"Fathom Device\": return config.showFathomDevice();\n            case \"Range\": return config.showRange();\n            case \"Keg\": return config.showKeg();\n            case \"Anchor\": return config.showAnchor();\n            case \"Inoculation Station\": return config.showInoculationStation();\n            case \"Salvaging Station\": return config.showSalvagingStation();\n            case \"Crystal Extractor\": return config.showCrystalExtractor();\n            case \"Eternal Brazier\": return config.showEternalBrazier();\n            default: return true;\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\boatupgrades\\utils\\UpgradeVisibilityUtils.java"},{"fileName":"BoatUpgradesPluginTest.java","content":"package com.boatupgrades;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class BoatUpgradesPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(BoatUpgradesPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\boatupgrades\\BoatUpgradesPluginTest.java"}]},{"commit":"893fb5ee244bd38f5f3e6920820d8d40c519f31b","repository":"https://github.com/Bram91/Brush-Markers.git","internalName":"brush-markers","files":[{"fileName":"BrushMarkerConfig.java","content":"/*\n * Copyright (c) 2018, TheLonelyDev \u003chttps://github.com/TheLonelyDev\u003e\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * Copyright (c) 2020, Bram91 \u003chttps://github.com/Bram91\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.bram91.brushmarkers;\n\nimport java.awt.Color;\nimport net.runelite.client.config.Alpha;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\nimport net.runelite.client.config.Keybind;\nimport net.runelite.client.config.Range;\n\n@ConfigGroup(\"brushMarkers\")\npublic interface BrushMarkerConfig extends Config\n{\n\t@ConfigSection(\n\t\tname \u003d \"Color Palette\",\n\t\tdescription \u003d \"Contains all the colors\",\n\t\tposition \u003d 0,\n\t\tclosedByDefault \u003d true\n\t)\n\tString colorSection \u003d \"colors\";\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"brushColor1\",\n\t\tname \u003d \"Color1\",\n\t\tdescription \u003d \"Configures the color of marked tile\",\n\t\tsection \u003d colorSection,\n\t\tposition \u003d 0\n\t)\n\tdefault Color markerColor1()\n\t{\n\t\treturn Color.RED;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"brushColor2\",\n\t\tname \u003d \"Color 2\",\n\t\tdescription \u003d \"Configures the color of marked tile\",\n\t\tsection \u003d colorSection,\n\t\tposition \u003d 1\n\t)\n\tdefault Color markerColor2()\n\t{\n\t\treturn Color.GREEN;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"brushColor3\",\n\t\tname \u003d \"Color 3\",\n\t\tdescription \u003d \"Configures the color of marked tile\",\n\t\tsection \u003d colorSection,\n\t\tposition \u003d 2\n\t)\n\tdefault Color markerColor3()\n\t{\n\t\treturn Color.BLUE;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"brushColor4\",\n\t\tname \u003d \"Color 4\",\n\t\tdescription \u003d \"Configures the color of marked tile\",\n\t\tsection \u003d colorSection,\n\t\tposition \u003d 3\n\t)\n\tdefault Color markerColor4()\n\t{\n\t\treturn Color.YELLOW;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"brushColor5\",\n\t\tname \u003d \"Color 5\",\n\t\tdescription \u003d \"Configures the color of marked tile\",\n\t\tsection \u003d colorSection,\n\t\tposition \u003d 4\n\t)\n\tdefault Color markerColor5()\n\t{\n\t\treturn Color.CYAN;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"brushColor6\",\n\t\tname \u003d \"Color 6\",\n\t\tdescription \u003d \"Configures the color of marked tile\",\n\t\tsection \u003d colorSection,\n\t\tposition \u003d 5\n\t)\n\tdefault Color markerColor6()\n\t{\n\t\treturn Color.MAGENTA;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"brushdDoubleColors\",\n\t\tname \u003d \"Enable color 7-12\",\n\t\tdescription \u003d \"Enables color 7-12 for double the fun!\",\n\t\tsection \u003d colorSection,\n\t\tposition \u003d 6\n\t)\n\tdefault boolean doubleColors()\n\t{\n\t\treturn false;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"brushColor7\",\n\t\tname \u003d \"Color 7\",\n\t\tdescription \u003d \"Configures the color of marked tile\",\n\t\tsection \u003d colorSection,\n\t\tposition \u003d 7\n\t)\n\tdefault Color markerColor7()\n\t{\n\t\treturn Color.RED;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"brushColor8\",\n\t\tname \u003d \"Color 8\",\n\t\tdescription \u003d \"Configures the color of marked tile\",\n\t\tsection \u003d colorSection,\n\t\tposition \u003d 8\n\t)\n\tdefault Color markerColor8()\n\t{\n\t\treturn Color.GREEN;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"brushColor9\",\n\t\tname \u003d \"Color 9\",\n\t\tdescription \u003d \"Configures the color of marked tile\",\n\t\tsection \u003d colorSection,\n\t\tposition \u003d 9\n\t)\n\tdefault Color markerColor9()\n\t{\n\t\treturn Color.BLUE;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"brushColor10\",\n\t\tname \u003d \"Color 10\",\n\t\tdescription \u003d \"Configures the color of marked tile\",\n\t\tsection \u003d colorSection,\n\t\tposition \u003d 10\n\t)\n\tdefault Color markerColor10()\n\t{\n\t\treturn Color.YELLOW;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"brushColor11\",\n\t\tname \u003d \"Color 11\",\n\t\tdescription \u003d \"Configures the color of marked tile\",\n\t\tsection \u003d colorSection,\n\t\tposition \u003d 11\n\t)\n\tdefault Color markerColor11()\n\t{\n\t\treturn Color.CYAN;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"brushColor12\",\n\t\tname \u003d \"Color 12\",\n\t\tdescription \u003d \"Configures the color of marked tile\",\n\t\tsection \u003d colorSection,\n\t\tposition \u003d 12\n\t)\n\tdefault Color markerColor12()\n\t{\n\t\treturn Color.MAGENTA;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"brushdrawOnMinimap\",\n\t\tname \u003d \"Draw tiles on minimap\",\n\t\tdescription \u003d \"Configures whether marked tiles should be drawn on minimap\",\n\t\tposition \u003d 2\n\t)\n\tdefault boolean drawTileOnMinimmap()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"brushdrawOnworldmap\",\n\t\tname \u003d \"Draw tiles on worldmap\",\n\t\tdescription \u003d \"Configures whether marked tiles should be drawn on the worldmap\",\n\t\tposition \u003d 3\n\t)\n\tdefault boolean drawTilesOnWorldMap()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"brushreplaceMode\",\n\t\tname \u003d \"Replace mode\",\n\t\tdescription \u003d \"Allows you to draw over existing tiles\",\n\t\tposition \u003d 4\n\t)\n\tdefault boolean replaceMode()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"brushFillPoly\",\n\t\tname \u003d \"Fill tiles\",\n\t\tdescription \u003d \"Fills the tiles you have drawn.\",\n\t\tposition \u003d 5\n\t)\n\tdefault boolean fillPoly()\n\t{\n\t\treturn false;\n\t}\n\n\t@Range(\n\t\tmax \u003d 128\n\t)\n\t@ConfigItem(\n\t\tkeyName \u003d \"brushPolyAlpha\",\n\t\tname \u003d \"Set fill transparency\",\n\t\tdescription \u003d \"Allows you to change the transparency of the tile fill.\",\n\t\tposition \u003d 6\n\t)\n\tdefault int polyAlpha()\n\t{\n\t\treturn 64;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"brushBorderWidth\",\n\t\tname \u003d \"Tile border width\",\n\t\tdescription \u003d \"Set the width of the tile borders.\",\n\t\tposition \u003d 7\n\t)\n\tdefault double strokeWidth()\n\t{\n\t\treturn 2;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"brushSize\",\n\t\tname \u003d \"Brush Size\",\n\t\tdescription \u003d \"Changes the brush size\",\n\t\tposition \u003d 8\n\t)\n\tdefault BrushSize brushSize()\n\t{\n\t\treturn BrushSize.ONE;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"brushpaintMode\",\n\t\tname \u003d \"Paint Mode\",\n\t\tdescription \u003d \"Enables paint mode\",\n\t\tposition \u003d 9\n\t)\n\tdefault boolean paintMode()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"brushHotkey\",\n\t\tname \u003d \"Brush Hotkey\",\n\t\tdescription \u003d \"Enables paint mode through a hotkey\",\n\t\tposition \u003d 10\n\t)\n\tdefault Keybind brushHotkey()\n\t{\n\t\treturn null;\n\t}\n}\n","filePath":"src\\main\\java\\com\\bram91\\brushmarkers\\BrushMarkerConfig.java"},{"fileName":"BrushMarkerMinimapOverlay.java","content":"/*\n * Copyright (c) 2019, Benjamin \u003chttps://github.com/genetic-soybean\u003e\n * Copyright (c) 2020, Bram91 \u003chttps://github.com/Bram91\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.bram91.brushmarkers;\n\nimport java.awt.BasicStroke;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Polygon;\nimport java.util.Collection;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Point;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\n\nclass BrushMarkerMinimapOverlay extends Overlay\n{\n\tprivate static final int[][] RECT_TRANSFORMS \u003d {\n\t\t{ 0, 0 },\n\t\t{ 0, Perspective.LOCAL_TILE_SIZE },\n\t\t{ Perspective.LOCAL_TILE_SIZE, Perspective.LOCAL_TILE_SIZE },\n\t\t{ Perspective.LOCAL_TILE_SIZE, 0 }\n\t};\n\n\tprivate final Client client;\n\tprivate final BrushMarkerConfig config;\n\tprivate final BrushMarkerPlugin plugin;\n\n\t@Inject\n\tprivate BrushMarkerMinimapOverlay(Client client, BrushMarkerConfig config, BrushMarkerPlugin plugin)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.config \u003d config;\n\t\tthis.plugin \u003d plugin;\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetPriority(PRIORITY_LOW);\n\t\tsetLayer(OverlayLayer.ABOVE_WIDGETS);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (!config.drawTileOnMinimmap())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tfinal Collection\u003cColorTileMarker\u003e points \u003d plugin.getPoints();\n\t\tfor (final ColorTileMarker point : points)\n\t\t{\n\t\t\tWorldPoint worldPoint \u003d point.getWorldPoint();\n\t\t\tif (worldPoint.getPlane() !\u003d client.getPlane())\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tColor tileColor \u003d point.getColor();\n\t\t\tif (tileColor \u003d\u003d null)\n\t\t\t{\n\t\t\t\t// If this is an old tile which has no color, or rememberTileColors is off, use marker color\n\t\t\t\ttileColor \u003d plugin.getColor();\n\t\t\t}\n\n\t\t\tdrawOnMinimap(graphics, worldPoint, tileColor);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate void drawOnMinimap(Graphics2D graphics, WorldPoint point, Color color)\n\t{\n\t\tif (!point.isInScene(client))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tint x \u003d (point.getX() - client.getBaseX()) \u003c\u003c Perspective.LOCAL_COORD_BITS;\n\t\tint y \u003d (point.getY() - client.getBaseY()) \u003c\u003c Perspective.LOCAL_COORD_BITS;\n\t\tint maxDist \u003d (int) ((20 \u003c\u003c Perspective.LOCAL_COORD_BITS) * 4.0 / client.getMinimapZoom());\n\n\t\tPolygon rect \u003d new Polygon();\n\t\tfor (int[] transform : RECT_TRANSFORMS)\n\t\t{\n\t\t\tLocalPoint vertex \u003d new LocalPoint(x + transform[0], y + transform[1]);\n\t\t\tPoint mp \u003d Perspective.localToMinimap(client, vertex, maxDist);\n\t\t\tif (mp \u003d\u003d null)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\trect.addPoint(mp.getX(), mp.getY());\n\t\t}\n\n\t\tgraphics.setColor(color);\n\t\tgraphics.setStroke(new BasicStroke());\n\t\tgraphics.drawPolygon(rect);\n\t}\n}\n","filePath":"src\\main\\java\\com\\bram91\\brushmarkers\\BrushMarkerMinimapOverlay.java"},{"fileName":"BrushMarkerOverlay.java","content":"/*\n * Copyright (c) 2018, TheLonelyDev \u003chttps://github.com/TheLonelyDev\u003e\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * Copyright (c) 2020, Bram91 \u003chttps://github.com/Bram91\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.bram91.brushmarkers;\n\nimport java.awt.BasicStroke;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Image;\nimport java.awt.Polygon;\nimport java.awt.image.BufferedImage;\nimport java.util.Collection;\nimport java.util.ConcurrentModificationException;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Point;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\n\npublic class BrushMarkerOverlay extends Overlay\n{\n\tprivate static final int MAX_DRAW_DISTANCE \u003d 32;\n\n\tprivate final Client client;\n\tprivate final BrushMarkerConfig config;\n\tprivate final BrushMarkerPlugin plugin;\n\t@Inject\n\tItemManager itemManager;\n\n\t@Inject\n\tprivate BrushMarkerOverlay(Client client, BrushMarkerConfig config, BrushMarkerPlugin plugin)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.config \u003d config;\n\t\tthis.plugin \u003d plugin;\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetPriority(PRIORITY_LOW);\n\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tfinal Collection\u003cColorTileMarker\u003e points \u003d plugin.getPoints();\n\t\ttry\n\t\t{\n\t\t\tfor (final ColorTileMarker point : points)\n\t\t\t{\n\t\t\t\tWorldPoint worldPoint \u003d point.getWorldPoint();\n\t\t\t\tif (worldPoint.getPlane() !\u003d client.getPlane())\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tColor tileColor \u003d point.getColor();\n\t\t\t\tif (tileColor \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\t// If this is an old tile which has no color, or rememberTileColors is off, use marker color\n\t\t\t\t\ttileColor \u003d plugin.getColor();\n\t\t\t\t}\n\n\t\t\t\tdrawTile(graphics, worldPoint, tileColor);\n\t\t\t}\n\n\t\t\tif (config.paintMode() \u0026\u0026 client.getSelectedSceneTile() !\u003d null)\n\t\t\t{\n\t\t\t\tfinal Polygon poly \u003d Perspective.getCanvasTileAreaPoly(client, client.getSelectedSceneTile().getLocalLocation(), config.brushSize().getSize());\n\n\t\t\t\tif (poly !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tfinal BufferedImage image \u003d resize(itemManager.getImage(670), poly.getBounds().width, poly.getBounds().height);\n\t\t\t\t\tfinal Point imageLoc \u003d Perspective.getCanvasImageLocation(client, client.getSelectedSceneTile().getLocalLocation(), image, 0);\n\t\t\t\t\tOverlayUtil.renderImageLocation(graphics, imageLoc, image);\n\t\t\t\t\tOverlayUtil.renderPolygon(graphics, poly, plugin.getColor());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch(ConcurrentModificationException e)\n\t\t{\n\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic static BufferedImage resize(BufferedImage img, int newW, int newH)\n\t{\n\t\tif(newH \u003e img.getHeight() || newW \u003e img.getWidth())\n\t\t{\n\t\t\treturn img;\n\t\t}\n\t\tImage tmp \u003d img.getScaledInstance(newW / 2, newH / 2, Image.SCALE_SMOOTH);\n\t\tBufferedImage dimg \u003d new BufferedImage(newW / 2, newH / 2, BufferedImage.TYPE_INT_ARGB);\n\n\t\tGraphics2D g2d \u003d dimg.createGraphics();\n\t\tg2d.drawImage(tmp, 0, 0, null);\n\t\tg2d.dispose();\n\n\t\treturn dimg;\n\t}\n\n\tprivate void drawTile(Graphics2D graphics, WorldPoint point, Color color)\n\t{\n\t\tWorldPoint playerLocation \u003d client.getLocalPlayer().getWorldLocation();\n\n\t\tif (point.distanceTo(playerLocation) \u003e\u003d MAX_DRAW_DISTANCE)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tLocalPoint lp \u003d LocalPoint.fromWorld(client, point);\n\t\tif (lp \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tPolygon poly \u003d Perspective.getCanvasTilePoly(client, lp);\n\t\tif (poly \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (config.fillPoly())\n\t\t{\n\t\t\tgraphics.setColor(new Color(color.getRed(), color.getGreen(), color.getBlue(), config.polyAlpha()));\n\t\t\tgraphics.fillPolygon(poly);\n\t\t}\n\t\tOverlayUtil.renderPolygon(graphics, poly, color, new BasicStroke((float) config.strokeWidth()));\n\t}\n}\n","filePath":"src\\main\\java\\com\\bram91\\brushmarkers\\BrushMarkerOverlay.java"},{"fileName":"BrushMarkerPlugin.java","content":"/*\n * Copyright (c) 2018, TheLonelyDev \u003chttps://github.com/TheLonelyDev\u003e\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * Copyright (c) 2020, Bram91 \u003chttps://github.com/Bram91\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.bram91.brushmarkers;\n\nimport com.google.common.base.Strings;\nimport com.google.gson.Gson;\nimport com.google.gson.reflect.TypeToken;\nimport com.google.inject.Provides;\nimport java.awt.Color;\nimport java.awt.event.KeyEvent;\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.Stack;\nimport java.util.stream.Collectors;\nimport javax.inject.Inject;\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.ClientTick;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.input.KeyListener;\nimport net.runelite.client.input.KeyManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.HotkeyListener;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Brush Markers\",\n\tdescription \u003d \"Enable marking of tiles using the Shift key\",\n\ttags \u003d {\"overlay\", \"tiles\", \"paint\"}\n)\npublic class BrushMarkerPlugin extends Plugin implements KeyListener\n{\n\tprivate static final String CONFIG_GROUP \u003d \"brushMarkers\";\n\tprivate static final String REGION_PREFIX \u003d \"region_\";\n\tprivate static final String PAINT_MODE \u003d \"brushpaintMode\";\n\n\t@Inject\n\tprivate Gson gson;\n\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate final List\u003cColorTileMarker\u003e points \u003d new ArrayList\u003c\u003e();\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate BrushMarkerConfig config;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate BrushMarkerOverlay overlay;\n\n\t@Inject\n\tprivate PaintModeOverlay paintOverlay;\n\n\t@Inject\n\tprivate BrushMarkerMinimapOverlay minimapOverlay;\n\n\t@Inject\n\tprivate BrushMarkerWorldmapOverlay worldmapOverlay;\n\n\t@Inject\n\tprivate KeyManager keyManager;\n\n\tprivate boolean ctrlHeld;\n\tprivate boolean shiftHeld;\n\tprivate int currentColor \u003d 0;\n\tprivate Stack\u003cBrushMemento\u003e undoStack;\n\tprivate Stack\u003cBrushMemento\u003e redoStack;\n\tprivate Color pickedColor;\n\n\tprivate void savePoints(int regionId, Collection\u003cBrushMarkerPoint\u003e points)\n\t{\n\t\tif (points \u003d\u003d null || points.isEmpty())\n\t\t{\n\t\t\tconfigManager.unsetConfiguration(CONFIG_GROUP, REGION_PREFIX + regionId);\n\t\t\treturn;\n\t\t}\n\n\t\tString json \u003d gson.toJson(points);\n\t\tconfigManager.setConfiguration(CONFIG_GROUP, REGION_PREFIX + regionId, json);\n\t}\n\n\tprivate Collection\u003cBrushMarkerPoint\u003e getPoints(int regionId)\n\t{\n\t\tString json \u003d configManager.getConfiguration(CONFIG_GROUP, REGION_PREFIX + regionId);\n\t\tif (Strings.isNullOrEmpty(json))\n\t\t{\n\t\t\treturn Collections.emptyList();\n\t\t}\n\n\t\t// CHECKSTYLE:OFF\n\t\treturn gson.fromJson(json, new TypeToken\u003cList\u003cBrushMarkerPoint\u003e\u003e()\n\t\t{\n\t\t}.getType());\n\t\t// CHECKSTYLE:ON\n\t}\n\n\tpublic Collection\u003cBrushMarkerPoint\u003e getWorldPoints(int regionId)\n\t{\n\t\tString json \u003d configManager.getConfiguration(CONFIG_GROUP, REGION_PREFIX + regionId);\n\t\tif (Strings.isNullOrEmpty(json))\n\t\t{\n\t\t\treturn Collections.emptyList();\n\t\t}\n\n\t\t// CHECKSTYLE:OFF\n\t\treturn gson.fromJson(json, new TypeToken\u003cList\u003cBrushMarkerPoint\u003e\u003e()\n\t\t{\n\t\t}.getType());\n\t\t// CHECKSTYLE:ON\n\t}\n\n\t@Provides\n\tBrushMarkerConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(BrushMarkerConfig.class);\n\t}\n\n\tprivate void loadPoints()\n\t{\n\t\tpoints.clear();\n\n\t\tint[] regions \u003d client.getMapRegions();\n\n\t\tif (regions \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfor (int regionId : regions)\n\t\t{\n\t\t\t// load points for region\n\t\t\tlog.debug(\"Loading points for region {}\", regionId);\n\t\t\tCollection\u003cBrushMarkerPoint\u003e regionPoints \u003d getPoints(regionId);\n\t\t\tCollection\u003cColorTileMarker\u003e colorTileMarkers \u003d translateToColorTileMarker(regionPoints);\n\t\t\tpoints.addAll(colorTileMarkers);\n\t\t}\n\t}\n\n\t/**\n\t * Translate a collection of ground marker points to color tile markers, accounting for instances\n\t *\n\t * @param points {@link BrushMarkerPoint}s to be converted to {@link ColorTileMarker}s\n\t * @return A collection of color tile markers, converted from the passed ground marker points, accounting for local\n\t * instance points. See {@link WorldPoint#toLocalInstance(Client, WorldPoint)}\n\t */\n\tprivate Collection\u003cColorTileMarker\u003e translateToColorTileMarker(Collection\u003cBrushMarkerPoint\u003e points)\n\t{\n\t\tif (points.isEmpty())\n\t\t{\n\t\t\treturn Collections.emptyList();\n\t\t}\n\n\t\treturn points.stream()\n\t\t\t.map(point -\u003e new ColorTileMarker(\n\t\t\t\tWorldPoint.fromRegion(point.getRegionId(), point.getRegionX(), point.getRegionY(), point.getZ()),\n\t\t\t\tpoint.getColor()))\n\t\t\t.flatMap(colorTile -\u003e\n\t\t\t{\n\t\t\t\tfinal Collection\u003cWorldPoint\u003e localWorldPoints \u003d WorldPoint.toLocalInstance(client, colorTile.getWorldPoint());\n\t\t\t\treturn localWorldPoints.stream().map(wp -\u003e new ColorTileMarker(wp, colorTile.getColor()));\n\t\t\t})\n\t\t\t.collect(Collectors.toList());\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged)\n\t{\n\t\tif (gameStateChanged.getGameState() !\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// map region has just been updated\n\t\tloadPoints();\n\t}\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\toverlayManager.add(overlay);\n\t\toverlayManager.add(paintOverlay);\n\t\toverlayManager.add(minimapOverlay);\n\t\toverlayManager.add(worldmapOverlay);\n\t\tkeyManager.registerKeyListener(this);\n\t\tundoStack \u003d new Stack\u003c\u003e();\n\t\tredoStack \u003d new Stack\u003c\u003e();\n\t\tloadPoints();\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\toverlayManager.remove(overlay);\n\t\toverlayManager.remove(paintOverlay);\n\t\toverlayManager.remove(minimapOverlay);\n\t\toverlayManager.remove(worldmapOverlay);\n\t\tkeyManager.unregisterKeyListener(this);\n\t\tpoints.clear();\n\t}\n\n\t@Override\n\tpublic void keyPressed(KeyEvent e)\n\t{\n\t\tif (!config.paintMode())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (e.getKeyCode() \u003d\u003d KeyEvent.VK_TAB)\n\t\t{\n\t\t\tif (config.doubleColors())\n\t\t\t{\n\t\t\t\tif (currentColor \u003e\u003d 11)\n\t\t\t\t{\n\t\t\t\t\tcurrentColor \u003d 0;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcurrentColor++;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (currentColor \u003e\u003d 5)\n\t\t\t\t{\n\t\t\t\t\tcurrentColor \u003d 0;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcurrentColor++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\te.consume();\n\t\t}\n\t\tif (e.getKeyCode() \u003d\u003d KeyEvent.VK_BACK_QUOTE)\n\t\t{\n\t\t\tif (config.doubleColors())\n\t\t\t{\n\t\t\t\tif (currentColor \u003c\u003d 0)\n\t\t\t\t{\n\t\t\t\t\tcurrentColor \u003d 11;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcurrentColor--;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (currentColor \u003c\u003d 0)\n\t\t\t\t{\n\t\t\t\t\tcurrentColor \u003d 5;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcurrentColor--;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (e.getKeyCode() \u003d\u003d KeyEvent.VK_CONTROL)\n\t\t{\n\t\t\tctrlHeld \u003d true;\n\t\t}\n\t\telse if (e.getKeyCode() \u003d\u003d KeyEvent.VK_SHIFT)\n\t\t{\n\t\t\tshiftHeld \u003d true;\n\t\t}\n\t}\n\n\t@Override\n\tpublic void keyReleased(KeyEvent e)\n\t{\n\t\tif (e.getKeyCode() \u003d\u003d KeyEvent.VK_CONTROL)\n\t\t{\n\t\t\tctrlHeld \u003d false;\n\t\t}\n\t\telse if (e.getKeyCode() \u003d\u003d KeyEvent.VK_SHIFT)\n\t\t{\n\t\t\tshiftHeld \u003d false;\n\t\t}\n\t\telse if (config.paintMode() \u0026\u0026 e.getKeyCode() \u003d\u003d KeyEvent.VK_Z)\n\t\t{\n\t\t\tundo();\n\t\t}\n\t\telse if (config.paintMode() \u0026\u0026 e.getKeyCode() \u003d\u003d KeyEvent.VK_X)\n\t\t{\n\t\t\tredo();\n\t\t}\n\t\telse if (config.paintMode() \u0026\u0026 e.getKeyCode() \u003d\u003d KeyEvent.VK_Q)\n\t\t{\n\t\t\tpickColor();\n\t\t}\n\n\t\telse if(config.brushHotkey() !\u003d null \u0026\u0026 config.brushHotkey().getKeyCode() \u003d\u003d e.getKeyCode())\n\t\t{\n\t\t\tconfigManager.setConfiguration(CONFIG_GROUP, PAINT_MODE, !config.paintMode());\n\t\t}\n\t}\n\n\tprivate void pickColor()\n\t{\n\t\tif(client.getSelectedSceneTile() !\u003d null)\n\t\t{\n\t\t\tWorldPoint worldPoint \u003d WorldPoint.fromLocalInstance(client, client.getSelectedSceneTile().getLocalLocation());\n\t\t\tint regionId \u003d worldPoint.getRegionID();\n\t\t\tList\u003cBrushMarkerPoint\u003e brushMarkerPoints \u003d new ArrayList\u003c\u003e(getPoints(regionId));\n\t\t\tBrushMarkerPoint point \u003d new BrushMarkerPoint(regionId, worldPoint.getRegionX(), worldPoint.getRegionY(), client.getPlane(), getColor());\n\t\t\tif(brushMarkerPoints.contains(point))\n\t\t\t{\n\t\t\t\tfor (BrushMarkerPoint markerPoint : brushMarkerPoints)\n\t\t\t\t{\n\t\t\t\t\tif (markerPoint.getRegionY() \u003d\u003d point.getRegionY() \u0026\u0026 markerPoint.getRegionX() \u003d\u003d point.getRegionX())\n\t\t\t\t\t{\n\t\t\t\t\t\tpickedColor \u003d markerPoint.getColor();\n\t\t\t\t\t\tcurrentColor \u003d 12;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t@Override\n\tpublic void keyTyped(KeyEvent e)\n\t{\n\n\t}\n\n\n\t@Subscribe\n\tpublic void onClientTick(ClientTick tick)\n\t{\n\t\tif (config.paintMode() \u0026\u0026 client.getSelectedSceneTile() !\u003d null)\n\t\t{\n\t\t\tWorldPoint worldPoint \u003d WorldPoint.fromLocalInstance(client, client.getSelectedSceneTile().getLocalLocation());\n\t\t\tint regionId \u003d worldPoint.getRegionID();\n\t\t\tBrushMarkerPoint point \u003d new BrushMarkerPoint(regionId, worldPoint.getRegionX(), worldPoint.getRegionY(), client.getPlane(), getColor());\n\n\t\t\tList\u003cBrushMarkerPoint\u003e brushMarkerPoints \u003d new ArrayList\u003c\u003e(getPoints(regionId));\n\n\t\t\tif (shiftHeld)\n\t\t\t{\n\t\t\t\tfor (BrushMarkerPoint brushMarkerPoint : getSelectedTiles(point))\n\t\t\t\t{\n\t\t\t\t\tif (brushMarkerPoint.getRegionX() \u003e\u003d 0 \u0026\u0026 brushMarkerPoint.getRegionX() \u003c 64 \u0026\u0026 brushMarkerPoint.getRegionY() \u003e\u003d 0 \u0026\u0026 brushMarkerPoint.getRegionY() \u003c 64)\n\t\t\t\t\t{\n\t\t\t\t\t\tredoStack.clear();\n\t\t\t\t\t\tif (config.replaceMode() \u0026\u0026 brushMarkerPoints.contains(brushMarkerPoint))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfor (BrushMarkerPoint markerPoint : brushMarkerPoints)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (markerPoint.getRegionY() \u003d\u003d brushMarkerPoint.getRegionY() \u0026\u0026 markerPoint.getRegionX() \u003d\u003d brushMarkerPoint.getRegionX())\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (undoStack.size() \u003d\u003d 0 || !undoStack.peek().getPoint().equals(markerPoint))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tundoStack.push(new BrushMemento(markerPoint, false));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (undoStack.size() \u003d\u003d 0 || !undoStack.peek().getPoint().equals(brushMarkerPoint))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tundoStack.push(new BrushMemento(brushMarkerPoint, true));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (config.replaceMode())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbrushMarkerPoints.remove(brushMarkerPoint);\n\t\t\t\t\t\t\tbrushMarkerPoints.add(brushMarkerPoint);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (!brushMarkerPoints.contains(brushMarkerPoint))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbrushMarkerPoints.add(brushMarkerPoint);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tsavePoints(regionId, brushMarkerPoints);\n\t\t\t\tloadPoints();\n\t\t\t}\n\t\t\telse if (ctrlHeld)\n\t\t\t{\n\t\t\t\tredoStack.clear();\n\t\t\t\tfor (BrushMarkerPoint brushMarkerPoint : getSelectedTiles(point))\n\t\t\t\t{\n\t\t\t\t\tif (brushMarkerPoints.contains(brushMarkerPoint))\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (BrushMarkerPoint markerPoint : brushMarkerPoints)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (markerPoint.getRegionY() \u003d\u003d brushMarkerPoint.getRegionY() \u0026\u0026 markerPoint.getRegionX() \u003d\u003d brushMarkerPoint.getRegionX())\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tundoStack.push(new BrushMemento(markerPoint, false));\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbrushMarkerPoints.remove(brushMarkerPoint);\n\t\t\t\t}\n\n\t\t\t\tsavePoints(regionId, brushMarkerPoints);\n\n\t\t\t\tloadPoints();\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic ArrayList\u003cBrushMarkerPoint\u003e getSelectedTiles(BrushMarkerPoint point)\n\t{\n\t\tArrayList\u003cBrushMarkerPoint\u003e points \u003d new ArrayList\u003c\u003e();\n\t\tint size \u003d config.brushSize().getSize();\n\t\tint offset \u003d size / 2;\n\n\t\tfor (int x \u003d 0; x \u003c size; x++)\n\t\t{\n\t\t\tfor (int y \u003d 0; y \u003c size; y++)\n\t\t\t{\n\t\t\t\tpoints.add(new BrushMarkerPoint(point.getRegionId(), point.getRegionX() + x - offset, point.getRegionY() + y - offset, point.getZ(), point.getColor()));\n\t\t\t}\n\t\t}\n\t\tlog.trace(\"{}-{}\", size, offset);\n\t\treturn points;\n\t}\n\n\tpublic void undo()\n\t{\n\t\tif (undoStack.size() \u003d\u003d 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tBrushMemento memento \u003d undoStack.pop();\n\t\tredoStack.push(memento);\n\t\tList\u003cBrushMarkerPoint\u003e brushMarkerPoints \u003d new ArrayList\u003c\u003e(getPoints(memento.getPoint().getRegionId()));\n\t\tif (!memento.isDraw())\n\t\t{\n\t\t\twhile(brushMarkerPoints.contains(memento.getPoint()))\n\t\t\t{\n\t\t\t\tbrushMarkerPoints.remove(memento.getPoint());\n\t\t\t}\n\t\t\tbrushMarkerPoints.add(memento.getPoint());\n\t\t}\n\t\telse\n\t\t{\n\t\t\twhile(brushMarkerPoints.contains(memento.getPoint()))\n\t\t\t{\n\t\t\t\tbrushMarkerPoints.remove(memento.getPoint());\n\t\t\t}\n\t\t}\n\t\tsavePoints(memento.getPoint().getRegionId(), brushMarkerPoints);\n\t\tloadPoints();\n\t}\n\n\tpublic void redo()\n\t{\n\t\tif (redoStack.size() \u003d\u003d 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tBrushMemento memento \u003d redoStack.pop();\n\t\tundoStack.push(memento);\n\t\tList\u003cBrushMarkerPoint\u003e brushMarkerPoints \u003d new ArrayList\u003c\u003e(getPoints(memento.getPoint().getRegionId()));\n\t\tif (memento.isDraw())\n\t\t{\n\t\t\tbrushMarkerPoints.remove(memento.getPoint());\n\t\t\tbrushMarkerPoints.add(memento.getPoint());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tbrushMarkerPoints.remove(memento.getPoint());\n\t\t}\n\t\tsavePoints(memento.getPoint().getRegionId(), brushMarkerPoints);\n\t\tloadPoints();\n\t}\n\n\tpublic Color getColor()\n\t{\n\t\tswitch (currentColor)\n\t\t{\n\t\t\tcase 0:\n\t\t\t\treturn config.markerColor1();\n\t\t\tcase 1:\n\t\t\t\treturn config.markerColor2();\n\t\t\tcase 2:\n\t\t\t\treturn config.markerColor3();\n\t\t\tcase 3:\n\t\t\t\treturn config.markerColor4();\n\t\t\tcase 4:\n\t\t\t\treturn config.markerColor5();\n\t\t\tcase 6:\n\t\t\t\treturn config.markerColor7();\n\t\t\tcase 7:\n\t\t\t\treturn config.markerColor8();\n\t\t\tcase 8:\n\t\t\t\treturn config.markerColor9();\n\t\t\tcase 9:\n\t\t\t\treturn config.markerColor10();\n\t\t\tcase 10:\n\t\t\t\treturn config.markerColor11();\n\t\t\tcase 11:\n\t\t\t\treturn config.markerColor12();\n\t\t\tcase 12:\n\t\t\t\treturn pickedColor;\n\t\t\tdefault:\n\t\t\t\treturn config.markerColor6();\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\bram91\\brushmarkers\\BrushMarkerPlugin.java"},{"fileName":"BrushMarkerPoint.java","content":"/*\n * Copyright (c) 2018, TheLonelyDev \u003chttps://github.com/TheLonelyDev\u003e\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.bram91.brushmarkers;\n\nimport java.awt.Color;\nimport lombok.EqualsAndHashCode;\nimport lombok.Value;\n\n/**\n * Used for serialization of ground marker points.\n */\n@Value\n@EqualsAndHashCode(exclude \u003d { \"color\" })\nclass BrushMarkerPoint\n{\n\tprivate int regionId;\n\tprivate int regionX;\n\tprivate int regionY;\n\tprivate int z;\n\tprivate Color color;\n}\n","filePath":"src\\main\\java\\com\\bram91\\brushmarkers\\BrushMarkerPoint.java"},{"fileName":"BrushMarkerWorldmapOverlay.java","content":"/*\n * Copyright (c) 2019, Benjamin \u003chttps://github.com/genetic-soybean\u003e\n * Copyright (c) 2020, Bram91 \u003chttps://github.com/Bram91\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.bram91.brushmarkers;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.Point;\nimport net.runelite.api.widgets.ComponentID;\nimport net.runelite.api.widgets.InterfaceID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.worldmap.WorldMap;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\n\nimport javax.inject.Inject;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Rectangle;\n\nclass BrushMarkerWorldmapOverlay extends Overlay\n{\n\tprivate static final int REGION_SIZE \u003d 1 \u003c\u003c 6;\n\t// Bitmask to return first coordinate in region\n\tprivate static final int REGION_TRUNCATE \u003d ~((1 \u003c\u003c 6) - 1);\n\n\tprivate final Client client;\n\tprivate final BrushMarkerConfig config;\n\tprivate final BrushMarkerPlugin plugin;\n\n\t@Inject\n\tprivate BrushMarkerWorldmapOverlay(Client client, BrushMarkerConfig config, BrushMarkerPlugin plugin)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.config \u003d config;\n\t\tthis.plugin \u003d plugin;\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetPriority(PRIORITY_LOW);\n\t\tsetLayer(OverlayLayer.MANUAL);\n\t\tdrawAfterInterface(InterfaceID.WORLD_MAP);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (!config.drawTilesOnWorldMap())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tdrawOnWorldMap(graphics);\n\n\t\treturn null;\n\t}\n\n\tprivate void drawOnWorldMap(Graphics2D graphics)\n\t{\n\t\tWorldMap worldMap \u003d client.getWorldMap();\n\t\tWidget map \u003d client.getWidget(ComponentID.WORLD_MAP_MAPVIEW);\n\t\tfloat pixelsPerTile \u003d worldMap.getWorldMapZoom();\n\t\tif (map \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tRectangle worldMapRect \u003d map.getBounds();\n\t\tgraphics.setClip(worldMapRect);\n\n\n\t\tint widthInTiles \u003d (int) Math.ceil(worldMapRect.getWidth() / pixelsPerTile);\n\t\tint heightInTiles \u003d (int) Math.ceil(worldMapRect.getHeight() / pixelsPerTile);\n\n\t\tPoint worldMapPosition \u003d worldMap.getWorldMapPosition();\n\n\t\t// Offset in tiles from anchor sides\n\t\tint yTileMin \u003d worldMapPosition.getY() - heightInTiles / 2;\n\t\tint xRegionMin \u003d (worldMapPosition.getX() - widthInTiles / 2) \u0026 REGION_TRUNCATE;\n\t\tint xRegionMax \u003d ((worldMapPosition.getX() + widthInTiles / 2) \u0026 REGION_TRUNCATE) + REGION_SIZE;\n\t\tint yRegionMin \u003d (yTileMin \u0026 REGION_TRUNCATE);\n\t\tint yRegionMax \u003d ((worldMapPosition.getY() + heightInTiles / 2) \u0026 REGION_TRUNCATE) + REGION_SIZE;\n\t\tint regionPixelSize \u003d (int) Math.ceil(REGION_SIZE * pixelsPerTile);\n\n\t\tfor (int x \u003d xRegionMin; x \u003c xRegionMax; x +\u003d REGION_SIZE)\n\t\t{\n\t\t\tfor (int y \u003d yRegionMin; y \u003c yRegionMax; y +\u003d REGION_SIZE)\n\t\t\t{\n\t\t\t\tint regionId \u003d ((x \u003e\u003e 6) \u003c\u003c 8) | (y \u003e\u003e 6);\n\t\t\t\tfor (final BrushMarkerPoint point : plugin.getWorldPoints(regionId))\n\t\t\t\t{\n\t\t\t\t\tint yTileOffset \u003d -(yTileMin - y);\n\t\t\t\t\tint xTileOffset \u003d x + widthInTiles / 2 - worldMapPosition.getX();\n\t\t\t\t\tint xPos \u003d ((int) (xTileOffset * pixelsPerTile)) + (int) worldMapRect.getX();\n\t\t\t\t\tint yPos \u003d (worldMapRect.height - (int) (yTileOffset * pixelsPerTile)) + (int) worldMapRect.getY();\n\t\t\t\t\tint size \u003d regionPixelSize / 64;\n\n\t\t\t\t\tgraphics.setColor(point.getColor());\n\t\t\t\t\tgraphics.drawRect(xPos + (point.getRegionX() * size), yPos - (point.getRegionY() * size) + size, size - 1, size - 1);\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n}\n","filePath":"src\\main\\java\\com\\bram91\\brushmarkers\\BrushMarkerWorldmapOverlay.java"},{"fileName":"BrushMemento.java","content":"package com.bram91.brushmarkers;\n\n\nimport lombok.Getter;\n\npublic class BrushMemento\n{\n\t@Getter\n\tprivate BrushMarkerPoint point;\n\t@Getter\n\tprivate boolean draw;\n\n\tpublic BrushMemento(BrushMarkerPoint point, boolean draw)\n\t{\n\t\tthis.point \u003d point;\n\t\tthis.draw \u003d draw;\n\t}\n}\n","filePath":"src\\main\\java\\com\\bram91\\brushmarkers\\BrushMemento.java"},{"fileName":"BrushSize.java","content":"package com.bram91.brushmarkers;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum BrushSize\n{\n\tONE(\"1\",1),\n\tTHREE(\"3\",3),\n\tFIVE(\"5\", 5);\n\n\tprivate final String name;\n\t@Getter\n\tprivate final int size;\n\n\t@Override\n\tpublic String toString()\n\t{\n\t\treturn name;\n\t}\n}\n","filePath":"src\\main\\java\\com\\bram91\\brushmarkers\\BrushSize.java"},{"fileName":"ColorTileMarker.java","content":"/*\n * Copyright (c) 2019, Jordan Atwood \u003cnightfirecat@protonmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.bram91.brushmarkers;\n\nimport java.awt.Color;\nimport lombok.Value;\nimport net.runelite.api.coords.WorldPoint;\n\n/**\n * Used to denote marked tiles and their colors.\n * Note: This is not used for serialization of ground markers; see {@link BrushMarkerPoint}\n */\n@Value\nclass ColorTileMarker\n{\n\tprivate WorldPoint worldPoint;\n\tprivate Color color;\n}\n","filePath":"src\\main\\java\\com\\bram91\\brushmarkers\\ColorTileMarker.java"},{"fileName":"PaintModeOverlay.java","content":"package com.bram91.brushmarkers;\n\nimport com.google.inject.Inject;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.LineComponent;\nimport java.awt.Color;\nimport net.runelite.client.ui.overlay.components.TitleComponent;\n\npublic class PaintModeOverlay extends OverlayPanel\n{\n\tprivate static final Color DANGER \u003d new Color(255, 0, 0, 150);\n\n\tprivate final BrushMarkerConfig config;\n\n\t@Inject\n\tprivate PaintModeOverlay(BrushMarkerConfig config)\n\t{\n\t\tthis.config \u003d config;\n\t\tsetPosition(OverlayPosition.TOP_LEFT);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (!config.paintMode())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\tpanelComponent.getChildren().add(TitleComponent.builder()\n\t\t\t.text(\"Brush Markers\")\n\t\t\t.build());\n\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t.left(\"Brush mode enabled\")\n\t\t\t.build());\n\t\tif(config.brushHotkey() !\u003d null)\n\t\t{\n\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t.left(\"Hotkey set to: \" + config.brushHotkey())\n\t\t\t\t.build());\n\t\t}\n\n\t\tpanelComponent.setBackgroundColor(DANGER);\n\n\t\treturn super.render(graphics);\n\t}\n}\n","filePath":"src\\main\\java\\com\\bram91\\brushmarkers\\PaintModeOverlay.java"},{"fileName":"BrushMarkersPluginTest.java","content":"package com.bram91.brushmarkers;\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class BrushMarkersPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(BrushMarkerPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\bram91\\brushmarkers\\BrushMarkersPluginTest.java"}]},{"commit":"9fff2e9d759cce031c821c352c2af39a8838a858","repository":"https://github.com/codyfilatov/ClickConfirm.git","internalName":"click-confirm","files":[{"fileName":"ClickConfirm.java","content":"package org.zaralot;\n\nimport com.google.inject.Provides;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.MenuOptionClicked;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetID;\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\n\nimport javax.inject.Inject;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Click Confirm\",\n\tdescription \u003d \"Plays a client-side click sound when you perform actions.\"\n)\npublic class ClickConfirm extends Plugin {\n\n\tpublic static void main(String... args) throws Exception{\n\t\tExternalPluginManager.loadBuiltin(ClickConfirm.class);\n\t\tRuneLite.main(args);\n\t}\n\n\t@Inject\n\tprivate Client client;\n\t@Inject\n\tprivate ClickConfirmConfig config;\n\n\t@Override\n\tprotected void startUp() throws Exception {\n\n\t}\n\t@Override\n\tprotected void shutDown() throws Exception {\n\n\t}\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged) {\n\n\n\t}\n\t@Subscribe\n\tpublic void onMenuOptionClicked(MenuOptionClicked menuOptionClicked) {\n\t\tMenuEntry menuEntry \u003d menuOptionClicked.getMenuEntry();\n\t\tString target \u003d menuOptionClicked.getMenuTarget();\n\n\t\tif(menuEntry !\u003d null){\n\t\t\tif(this.handleEquip(menuEntry)) return;\n\t\t\tif(this.handleDrinkPotion(menuEntry)) return;\n\t\t\tif(this.handleEat(menuEntry)) return;\n\t\t\tif(this.handleRun(menuEntry)) return;\n\t\t\tif(this.handleSpell(menuEntry)) return;\n\t\t\tif(target !\u003d null){\n\t\t\t\tif(this.handlePrayer(menuEntry, target)) return;\n\t\t\t\tif(this.handleSpecialAttack(menuEntry, target)) return;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate boolean handleEquip(MenuEntry menuEntry) {\n\t\tif(!config.onEquip()) return false;\n\n\t\tString option \u003d menuEntry.getOption();\n\t\tif (option \u003d\u003d null) return false;\n\t\toption \u003d option.toUpperCase();\n\n\t\tif (option.equals(\"WEAR\") || option.equals(\"WIELD\")) {\n\t\t\tthis.playSound();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\tprivate boolean handleDrinkPotion(MenuEntry menuEntry){\n\t\tif(!config.onDrinkPotion()) return false;\n\n\t\tString option \u003d menuEntry.getOption();\n\t\tif(option \u003d\u003d null) return false;\n\t\toption \u003d option.toUpperCase();\n\n\t\tif(option.equals(\"DRINK\") || option.equals(\"HEAL\")){\n\t\t\tthis.playSound();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\tprivate boolean handleEat(MenuEntry menuEntry){\n\t\tif(!config.onEat()) return false;\n\n\t\tString option \u003d menuEntry.getOption();\n\t\tif(option \u003d\u003d null) return false;\n\t\toption \u003d option.toUpperCase();\n\n\t\tif(option.equals(\"EAT\") || option.equals(\"HEAL\")){\n\t\t\tthis.playSound();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\tprivate boolean handleRun(MenuEntry menuEntry){\n\t\tif(!config.onRun()) return false;\n\n\t\tString option \u003d menuEntry.getOption();\n\t\tif(option \u003d\u003d null) return false;\n\t\toption \u003d option.toUpperCase();\n\n\t\tif(option.equals(\"TOGGLE RUN\")){\n\t\t\tthis.playSound();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\tprivate boolean handleSpell(MenuEntry menuEntry){\n\t\tif(!config.onSpell()) return false;\n\n\t\tString option \u003d menuEntry.getOption();\n\t\tif(option \u003d\u003d null) return false;\n\t\toption \u003d option.toUpperCase();\n\n\t\tif(option.equals(\"CAST\") || option.equals(\"BREAK\")){\n\t\t\tthis.playSound();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\tprivate boolean handleSpecialAttack(MenuEntry menuEntry, String target){\n\t\tif(!config.onSpecialAttack()) return false;\n\n\t\tString option \u003d menuEntry.getOption();\n\t\tif(option \u003d\u003d null) return false;\n\t\toption \u003d option.toUpperCase();\n\n\t\tif(option.contains(\"USE\") \u0026\u0026 target.contains(\"Special Attack\")){\n\t\t\tthis.playSound();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\tprivate boolean handlePrayer(MenuEntry menuEntry, String target){\n\t\tif(!config.onPrayer()) return false;\n\n\t\tString option \u003d menuEntry.getOption();\n\t\tif(option \u003d\u003d null) return false;\n\t\toption \u003d option.toUpperCase();\n\n\t\tif(option.equals(\"ACTIVATE\") || option.equals(\"DEACTIVATE\")){\n\t\t\tthis.playSound();\n\t\t\treturn true;\n\t\t}\n\n\t\tif(target.equalsIgnoreCase(\"Quick-prayers\")){\n\t\t\tthis.playSound();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\tprivate void playSound(){\n\t\tthis.client.playSoundEffect(SoundEffectID.ITEM_PICKUP);\n\t}\n\n\t@Provides\n\tClickConfirmConfig provideConfig(ConfigManager configManager) {\n\t\treturn configManager.getConfig(ClickConfirmConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\org\\zaralot\\ClickConfirm.java"},{"fileName":"ClickConfirmConfig.java","content":"package org.zaralot;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"clickconfirm\")\npublic interface ClickConfirmConfig  extends Config {\n\n    @ConfigItem(\n        keyName \u003d \"onEquip\",\n        name \u003d \"Play on Equip\",\n        description \u003d \"Play a sound when armor or weapon is clicked on.\"\n    )\n    default boolean onEquip() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"onDrinkPotion\",\n            name \u003d \"Play on Potion\",\n            description \u003d \"Play a sound when a potion is clicked on.\"\n    )\n    default boolean onDrinkPotion() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"onEat\",\n            name \u003d \"Play on Eat\",\n            description \u003d \"Play a sound when food is clicked on.\"\n    )\n    default boolean onEat() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"onRun\",\n            name \u003d \"Play on Toggle Run\",\n            description \u003d \"Play a sound when toggle run is clicked on.\"\n    )\n    default boolean onRun() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"onSpell\",\n            name \u003d \"Play on Spell\",\n            description \u003d \"Play a sound when a spell is clicked on.\"\n    )\n    default boolean onSpell() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"onSpecialAttack\",\n            name \u003d \"Play on Special Attack\",\n            description \u003d \"Play a sound when special attack is clicked on.\"\n    )\n    default boolean onSpecialAttack() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"onPrayer\",\n            name \u003d \"Play on Prayer\",\n            description \u003d \"Play a sound when a prayer or quick-prayer is clicked on.\"\n    )\n    default boolean onPrayer() {\n        return true;\n    }\n\n\n    enum ConfirmSound{\n        CLICK,\n\n    }\n}\n","filePath":"src\\main\\java\\org\\zaralot\\ClickConfirmConfig.java"},{"fileName":"ExamplePluginTest.java","content":"package org.zaralot;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ExamplePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(ClickConfirm.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\org\\zaralot\\ExamplePluginTest.java"}]},{"commit":"c1392fa01efc4b19b94caafc2fa2fcb064f4d805","repository":"https://github.com/Advistane/clogged.git","internalName":"clogged-me","files":[{"fileName":"CloggedApiClient.java","content":"package me.clogged;\n\nimport okhttp3.*;\n\nimport javax.inject.Inject;\nimport java.net.InetSocketAddress;\nimport java.net.Proxy;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class CloggedApiClient {\n    private static final String COLLECTION_LOG_API_HOST \u003d \"api.clogged.me\";\n    private static final String COLLECTION_LOG_USER_AGENT \u003d \"Runelite clogged/\" + CloggedConfig.PLUGIN_VERSION;\n    private static final MediaType COLLECTION_LOG_MEDIA_TYPE \u003d MediaType.parse(\"application/json; charset\u003dutf-8\");\n\n    @Inject\n    private OkHttpClient okHttpClient;\n\n    @Inject\n    private CloggedConfig config;\n\n    public void updateUserCollectionLog(String requestBodyJson, Callback callback) {\n        HttpUrl url \u003d buildUrl();\n\n        if (requestBodyJson \u003d\u003d null || requestBodyJson.isEmpty()) {\n            throw new IllegalArgumentException(\"Request body cannot be null or empty\");\n        }\n\n        try {\n            RequestBody requestBody \u003d RequestBody.create(COLLECTION_LOG_MEDIA_TYPE, requestBodyJson);\n            Request request \u003d createRequestBuilder(url)\n                    .put(requestBody)\n                    .build();\n\n            apiRequest(request, callback);\n        } catch (IllegalArgumentException e) {\n            throw new IllegalArgumentException(\"Invalid request body\", e);\n        } catch (Exception e) {\n            throw new RuntimeException(\"Failed to send API request\", e);\n        }\n    }\n\n    public void getUserCollectionLog(String username, String gameMode, String subcategoryName, Boolean checkForMissing, Boolean isOtherLookup, Callback callback) {\n        List\u003cString\u003e pathSegments \u003d new ArrayList\u003c\u003e();\n        pathSegments.add(\"users\");\n        pathSegments.add(username);\n        pathSegments.add(subcategoryName);\n        HttpUrl url \u003d buildUrl(pathSegments);\n\n        // Check if the lookup should look for missing items\n        if (checkForMissing) {\n            url \u003d url.newBuilder()\n                    .addQueryParameter(\"mode\", \"missing\")\n                    .build();\n        }\n\n        // Check if the lookup is for another player\u0027s items\n        if (isOtherLookup) {\n            url \u003d url.newBuilder()\n                    .addQueryParameter(\"other\", \"true\")\n                    .build();\n        }\n\n        if (gameMode !\u003d null \u0026\u0026 !gameMode.isEmpty()) {\n            url \u003d url.newBuilder()\n                    .addQueryParameter(\"gameMode\", gameMode)\n                    .build();\n        }\n\n        Request request \u003d createRequestBuilder(url)\n                .get()\n                .build();\n\n        apiRequest(request, callback);\n    }\n\n    public void getKCAliases(Callback callback) {\n        List\u003cString\u003e pathSegments \u003d new ArrayList\u003c\u003e();\n        pathSegments.add(\"kc-aliases\");\n        HttpUrl url \u003d buildUrl(pathSegments);\n\n        Request request \u003d createRequestBuilder(url)\n                .get()\n                .build();\n\n        apiRequest(request, callback);\n    }\n\npublic void handleGroup(String requestBodyJson, String groupName, boolean join, Callback callback) {\n        if (requestBodyJson \u003d\u003d null || groupName \u003d\u003d null || groupName.isEmpty() || requestBodyJson.isEmpty()) {\n            throw new IllegalArgumentException(\"Account hash and group name cannot be null or empty\");\n        }\n\n        List\u003cString\u003e pathSegments \u003d new ArrayList\u003c\u003e();\n        pathSegments.add(\"groups\");\n        pathSegments.add(groupName);\n        HttpUrl url \u003d buildUrl(pathSegments);\n\n        RequestBody requestBody \u003d RequestBody.create(COLLECTION_LOG_MEDIA_TYPE, requestBodyJson);\n\n        Request request;\n        if (join) {\n            request \u003d createRequestBuilder(url)\n                    .post(requestBody)\n                    .build();\n        } else {\n            request \u003d createRequestBuilder(url)\n                    .delete(requestBody)\n                    .build();\n        }\n\n        apiRequest(request, callback);\n    }\n\n    private Request.Builder createRequestBuilder(HttpUrl url)\n    {\n        return new Request.Builder()\n                .header(\"User-Agent\", COLLECTION_LOG_USER_AGENT)\n                .url(url);\n    }\n\n    private void apiRequest(Request request, Callback callback)\n    {\n        getOkHttpClient().newCall(request).enqueue(callback);\n    }\n\n    private OkHttpClient getOkHttpClient() {\n        if (config.proxyEnabled()) {\n            if (config.proxyHost() \u003d\u003d null || config.proxyHost().isEmpty()) {\n                throw new IllegalArgumentException(\"Proxy host cannot be null or empty\");\n            }\n            if (config.proxyPort() \u003c\u003d 0) {\n                throw new IllegalArgumentException(\"Proxy port must be a positive integer\");\n            }\n\n            Proxy proxy \u003d new Proxy(Proxy.Type.HTTP, new InetSocketAddress(config.proxyHost(), config.proxyPort()));\n            if (config.proxyUsername() !\u003d null \u0026\u0026 !config.proxyUsername().isEmpty()) {\n                String proxyUsername \u003d config.proxyUsername();\n                String proxyPassword \u003d config.proxyPassword() !\u003d null ? config.proxyPassword() : \"\";\n                Authenticator proxyAuthenticator \u003d (route, response) -\u003e {\n                    String credential \u003d Credentials.basic(proxyUsername, proxyPassword);\n                    return response.request().newBuilder()\n                            .header(\"Proxy-Authorization\", credential)\n                            .build();\n                };\n                return okHttpClient.newBuilder()\n                        .proxy(proxy)\n                        .proxyAuthenticator(proxyAuthenticator)\n                        .build();\n            }\n\n            return okHttpClient.newBuilder()\n                    .proxy(proxy)\n                    .build();\n        }\n\n        return okHttpClient;\n    }\n\n    private HttpUrl buildUrl() {\n        return new HttpUrl.Builder()\n                .scheme(\"https\")\n                .host(COLLECTION_LOG_API_HOST)\n                .addPathSegment(\"users\")\n                .addPathSegment(\"update\")\n                .build();\n    }\n\n    private HttpUrl buildUrl(List\u003cString\u003e pathSegments) {\n        HttpUrl.Builder urlBuilder \u003d new HttpUrl.Builder()\n                .scheme(\"https\")\n                .host(COLLECTION_LOG_API_HOST);\n\n        for (String segment : pathSegments) {\n            urlBuilder.addPathSegment(segment);\n        }\n\n        return urlBuilder.build();\n    }\n}\n","filePath":"src\\main\\java\\me\\clogged\\CloggedApiClient.java"},{"fileName":"CloggedConfig.java","content":"package me.clogged;\n\nimport me.clogged.data.config.DisplayMethod;\nimport me.clogged.data.config.SyncMethod;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\n\nimport java.awt.Color;\n\n@ConfigGroup(\"clogged\")\npublic interface CloggedConfig extends Config\n{\n\tString PLUGIN_VERSION \u003d \"1.2.0\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"enableSync\",\n\t\tname \u003d \"Enable sync with Clogged.me\",\n\t\tdescription \u003d \"This will sync your collection log with Clogged.me\",\n\t\tposition \u003d 1\n\t)\n\tdefault boolean enableSync()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"enableLookup\",\n\t\tname \u003d \"Enable lookups with Clogged.me\",\n\t\tdescription \u003d \"This will allow you to view collection logs from other players.\u003cbr\u003eThis does not sync your log with Clogged.me.\",\n\t\tposition \u003d 2\n\t)\n\tdefault boolean enableLookup()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"profileVisibility\",\n\t\tname \u003d \"Make clog public on Clogged.me\",\n\t\tdescription \u003d \"If enabled, your collection log will be publicly viewable on the Clogged.me website and you will be able to join groups.\u003cbr\u003e\" +\n\t\t\t\t\"This will also allow other players to view your collection log in-game with the \u0027!clog \u003cboss\u003e \\\"username\\\"\u0027 command.\u003cbr\u003e\" +\n\t\t\t\t\"Note: This does not need to be enabled to view/share your own collection log.\",\n\t\tposition \u003d 3\n\t)\n\tdefault boolean profileVisibility()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"syncMethod\",\n\t\tname \u003d \"Sync method\",\n\t\tdescription \u003d \"Manual: Must type \u0027!clog sync\u0027 with collection log interface open.\u003cbr\u003e\" +\n\t\t\t\t\"Automatic: Syncs whenever the collection log interface is open (might cause strange behavior for a split second when opening).\",\n\t\tposition \u003d 4\n\t)\n\tdefault SyncMethod syncMethod()\n\t{\n\t\treturn SyncMethod.MANUAL;\n\t}\n\n\t@ConfigSection(\n\t\tname \u003d \"Display Settings\",\n\t\tdescription \u003d \"Display settings for Clogged.me in-game messages.\",\n\t\tposition \u003d 5\n    )\n\tString displaySettingsSection \u003d \"displaySettingsSection\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"displayMethod\",\n\t\tname \u003d \"Display method\",\n\t\tdescription \u003d \"Text: Collection log items will be displayed as text.\u003cbr\u003e\" +\n\t\t\t\t\"Icons: Collection log items will be displayed as icons.\",\n\t\tposition \u003d 6,\n\t\tsection \u003d displaySettingsSection\n\t)\n\tdefault DisplayMethod displayMethod()\n\t{\n\t\treturn DisplayMethod.TEXT;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showQuantity\",\n\t\tname \u003d \"Show item quantities\",\n\t\tdescription \u003d \"If enabled, the quantity of each item will be shown in the collection log message.\",\n\t\tposition \u003d 7,\n\t\tsection \u003d displaySettingsSection\n\t)\n\tdefault boolean showQuantity() {\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showTotal\",\n\t\tname \u003d \"Show clog progress\",\n\t\tdescription \u003d \"If enabled, the progress of the collection log will be shown in the collection log message (e.g. 4/7).\",\n\t\tposition \u003d 8,\n\t\tsection \u003d displaySettingsSection\n\t)\n\tdefault boolean showTotal() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showMissing\",\n\t\tname \u003d \"Show missing items\",\n\t\tdescription \u003d \"If enabled, the \u0027!clog missing ...\u0027 command will show the items that are missing in the collection log. (e.g. !clog missing cox)\",\n\t\tposition \u003d 9,\n\t\tsection \u003d displaySettingsSection\n\t)\n\tdefault boolean showMissing() {\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"customChatColor\",\n\t\tname \u003d \"Enable custom chat message color\",\n\t\tdescription \u003d \"If enabled, chat messages sent by Clogged.me will be the color you choose below.\",\n\t\tposition \u003d 10,\n\t\tsection \u003d displaySettingsSection\n\t)\n\tdefault boolean enableCustomColor() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"textColor\",\n\t\tname \u003d \"Chat message color\",\n\t\tdescription \u003d \"All text messages sent by the plugin will be this color if \u0027Enable custom chat message color\u0027 is enabled.\",\n\t\tposition \u003d 11,\n\t\tsection \u003d displaySettingsSection\n\t)\n\tdefault Color textColor()\n\t{\n\t\treturn Color.BLACK;\n\t}\n\n\t@ConfigSection(\n\t\tname \u003d \"Proxy Settings\",\n\t\tdescription \u003d \"Proxy settings for Clogged.me API\",\n\t\tposition \u003d 12,\n\t\tclosedByDefault \u003d true\n\t)\n\tString proxySettingsSection \u003d \"proxySettingsSection\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"proxyEnabled\",\n\t\tname \u003d \"Enable proxy\",\n\t\tdescription \u003d \"Clogged.me does not store nor associate your IP address with your account or client in any way.\u003cbr\u003e\" +\n\t\t\t\t\"With that being said, enabling this will use the specified proxy settings to connect to the Clogged.me API.\u003cbr\u003e\" +\n\t\t\t\t\"Only enable this if you know what you\u0027re doing.\",\n\t\tsection \u003d proxySettingsSection,\n\t\tposition \u003d 13\n\t)\n\tdefault boolean proxyEnabled()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"proxyHost\",\n\t\tname \u003d \"Proxy Host\",\n\t\tdescription \u003d \"The host of the proxy server.\",\n\t\tsection \u003d proxySettingsSection,\n\t\tposition \u003d 14\n\t)\n\tdefault String proxyHost()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"proxyPort\",\n\t\tname \u003d \"Proxy Port\",\n\t\tdescription \u003d \"The port of the proxy server.\",\n\t\tsection \u003d proxySettingsSection,\n\t\tposition \u003d 15\n\t)\n\tdefault int proxyPort()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"proxyUsername\",\n\t\tname \u003d \"Proxy Username\",\n\t\tdescription \u003d \"The username for the proxy server.\",\n\t\tsection \u003d proxySettingsSection,\n\t\tposition \u003d 16\n\t)\n\tdefault String proxyUsername()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"proxyPassword\",\n\t\tname \u003d \"Proxy Password\",\n\t\tdescription \u003d \"The password for the proxy server.\",\n\t\tsection \u003d proxySettingsSection,\n\t\tposition \u003d 17\n\t)\n\tdefault String proxyPassword()\n\t{\n\t\treturn \"\";\n\t}\n}\n","filePath":"src\\main\\java\\me\\clogged\\CloggedConfig.java"},{"fileName":"CloggedPlugin.java","content":"package me.clogged;\n\nimport com.google.gson.Gson;\nimport com.google.gson.JsonObject;\nimport com.google.inject.Provides;\n\nimport javax.inject.Inject;\n\nimport lombok.NonNull;\nimport lombok.extern.slf4j.Slf4j;\nimport me.clogged.data.*;\nimport me.clogged.data.config.DisplayMethod;\nimport me.clogged.data.config.SyncMethod;\nimport me.clogged.helpers.AliasHelper;\nimport net.runelite.api.*;\nimport net.runelite.api.events.*;\nimport net.runelite.api.gameval.InterfaceID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.chat.ChatCommandManager;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.chat.QueuedMessage;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.config.RuneScapeProfileType;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.util.ColorUtil;\nimport net.runelite.client.util.ImageUtil;\nimport net.runelite.client.util.Text;\n\nimport okhttp3.*;\n\nimport java.awt.image.BufferedImage;\nimport java.io.IOException;\nimport java.util.*;\nimport java.util.List;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\nimport java.util.stream.Collectors;\n\n@Slf4j\n@PluginDescriptor(\n        name \u003d \"Clogged.me\",\n        description \u003d \"Sync your collection log with Clogged.me and view other players\u0027 logs\"\n)\npublic class CloggedPlugin extends Plugin {\n    private static final String COLLECTION_LOG_COMMAND_STRING \u003d \"!clog\";\n    private static final int CLOG_CONTAINER_WIDGET_ID \u003d 40697943;\n    private static final int CLOG_SEARCH_WIDGET_ID \u003d 40697932;\n    private static final int COLLECTION_LOG_SCRIPT_ID \u003d 4100;\n    private static final int TICKS_TO_WAIT_AFTER_LOAD \u003d 2;\n    private static final String MISSING_KEYWORD \u003d \"missing\";\n\n    private final UserCollectionLog userCollectionLog \u003d new UserCollectionLog();\n    private final Map\u003cInteger, Integer\u003e loadedCollectionLogIcons \u003d new HashMap\u003c\u003e();\n\n    private int ticksToWait \u003d 0;\n    private int collectionLogScriptFiredTick \u003d -1;\n    private boolean collectionLogInterfaceOpenedAndSynced \u003d false;\n    AliasHelper aliasHelper;\n\n    @Inject private Client client;\n    @Inject private CloggedConfig config;\n    @Inject private ChatMessageManager chatMessageManager;\n    @Inject private ChatCommandManager chatCommandManager;\n    @Inject private ClientThread clientThread;\n    @Inject private Gson gson;\n    @Inject private ItemManager itemManager;\n    @Inject private ConfigManager configManager;\n    @Inject private CloggedApiClient cloggedApiClient;\n\n    @Override\n    protected void startUp() throws Exception {\n        chatCommandManager.registerCommandAsync(COLLECTION_LOG_COMMAND_STRING, this::handleChatMessage);\n        if (config.enableLookup()) {\n            cloggedApiClient.getKCAliases(kcAliasesCallback);\n        }\n    }\n\n    @Override\n    protected void shutDown() throws Exception {\n        chatCommandManager.unregisterCommand(COLLECTION_LOG_COMMAND_STRING);\n    }\n\n    @Provides\n    CloggedConfig provideConfig(ConfigManager configManager) {\n        return configManager.getConfig(CloggedConfig.class);\n    }\n\n    // Event Handling\n\n    @Subscribe\n    public void onWidgetLoaded(WidgetLoaded widgetLoaded) {\n        if (!isSyncEnabled() || config.syncMethod() \u003d\u003d SyncMethod.MANUAL) {\n            return;\n        }\n\n        if (widgetLoaded.getGroupId() \u003d\u003d InterfaceID.COLLECTION \u0026\u0026 !collectionLogInterfaceOpenedAndSynced) {\n            ticksToWait \u003d TICKS_TO_WAIT_AFTER_LOAD;\n        }\n    }\n\n    @Subscribe\n    public void onWidgetClosed(WidgetClosed widgetClosed) {\n        if (widgetClosed.getGroupId() \u003d\u003d InterfaceID.COLLECTION) {\n            ticksToWait \u003d 0;\n            collectionLogInterfaceOpenedAndSynced \u003d false;\n        }\n    }\n\n    @Subscribe\n    public void onGameTick(GameTick gameTick) {\n        if (!isSyncEnabled()) {\n            return;\n        }\n\n        // Wait for ticks after the collection log interface is opened\n        if (ticksToWait \u003e 0) {\n            if (--ticksToWait \u003d\u003d 0) {\n                clientThread.invokeLater(this::updateUserCollectionLog);\n            }\n        }\n\n        checkForCollectionLogScriptFired();\n    }\n\n    @Subscribe\n    public void onScriptPreFired(ScriptPreFired preFired) {\n        // Script 4100 is fired when the search interface in the collection log is opened\n        if (preFired.getScriptId() \u003d\u003d COLLECTION_LOG_SCRIPT_ID \u0026\u0026 !collectionLogInterfaceOpenedAndSynced) {\n            recordScriptFiredTick();\n            processScriptArguments(preFired.getScriptEvent().getArguments());\n        }\n    }\n\n    @Subscribe\n    public void onConfigChanged(ConfigChanged event) {\n        if (aliasHelper \u003d\u003d null \u0026\u0026 event.getGroup().equals(\"clogged\")) {\n            if (Objects.equals(event.getKey(), \"enableLookup\") \u0026\u0026 config.enableLookup()) {\n                cloggedApiClient.getKCAliases(kcAliasesCallback);\n            }\n        }\n    }\n\n    private void recordScriptFiredTick() {\n        collectionLogScriptFiredTick \u003d client.getTickCount();\n    }\n\n    private void checkForCollectionLogScriptFired() {\n        if (collectionLogScriptFiredTick !\u003d -1 \u0026\u0026 collectionLogScriptFiredTick + 2 \u003e client.getTickCount() \u0026\u0026 !collectionLogInterfaceOpenedAndSynced) {\n            collectionLogScriptFiredTick \u003d -1;\n            collectionLogInterfaceOpenedAndSynced \u003d true;\n            syncCollectionLog();\n        }\n    }\n\n    private void processScriptArguments(Object[] args) {\n        int itemId \u003d (int) args[1];\n        int quantity \u003d (int) args[2];\n        if (itemId \u003e 0) {\n            try {\n                userCollectionLog.markItemAsObtained(itemId, quantity);\n            } catch (NullPointerException e) {\n                log.warn(\"Item ID {} not found in collection log structure\", itemId);\n            }\n        }\n    }\n\n    // Chat Command Handling\n\n    private void handleChatMessage(ChatMessage chatMessage, String message) {\n        if (message.length() \u003d\u003d COLLECTION_LOG_COMMAND_STRING.length()) {\n            return;\n        }\n\n        String commandArg \u003d message.substring(COLLECTION_LOG_COMMAND_STRING.length() + 1);\n        if (commandArg.equals(\"sync\") \u0026\u0026 Objects.equals(Text.sanitize(chatMessage.getName()), client.getLocalPlayer().getName())) {\n            clientThread.invoke(this::updateUserCollectionLog);\n        } else if (commandArg.equals(\"help\")) {\n            clientThread.invoke(this::showHelpMessage);\n        } else if (commandArg.startsWith(\"join\")) {\n            handleGroupCommand(chatMessage, commandArg.trim(), true);\n        } else if (commandArg.startsWith(\"leave\")) {\n            handleGroupCommand(chatMessage, commandArg.trim(), false);\n        } else {\n            handleSubcategoryLookup(chatMessage, commandArg.trim());\n        }\n    }\n\n    private void handleGroupCommand(ChatMessage chatMessage, String commandArg, boolean join) {\n        clientThread.invoke(() -\u003e {\n            String username \u003d Text.sanitize(chatMessage.getName());\n            if (!username.equalsIgnoreCase(client.getLocalPlayer().getName())) {\n                return;\n            }\n\n            if (!config.enableSync()) {\n                showSyncingDisabledMessage();\n                return;\n            }\n\n            if (config.proxyEnabled() \u0026\u0026 (config.proxyHost() \u003d\u003d null || config.proxyHost().isEmpty() || config.proxyPort() \u003c\u003d 0)) {\n                showProxySettingsIncompleteMessage();\n                return;\n            }\n\n            if (join \u0026\u0026 !config.profileVisibility()) {\n                showProfileVisibilityDisabledMessage();\n                return;\n            }\n\n            String[] parts \u003d commandArg.split(\" \", 2);\n            if (parts.length \u003e 1) {\n                String groupName \u003d parts[1].trim();\n                if (!groupName.isEmpty()) {\n                    JsonObject jsonObject \u003d new JsonObject();\n                    jsonObject.addProperty(\"accountHash\", client.getAccountHash());\n                    cloggedApiClient.handleGroup(jsonObject.toString(), groupName, join, handleGroupCallback(chatMessage));\n                } else {\n                    showIncorrectGroupCommandMessage();\n                }\n            } else {\n                showIncorrectGroupCommandMessage();\n            }\n        });\n    }\n\n    private void handleSubcategoryLookup(ChatMessage chatMessage, String commandArg) {\n        clientThread.invokeLater(() -\u003e {\n            if (!config.enableLookup()) {\n                showLookupDisabledMessage();\n                return;\n            }\n\n            if (config.proxyEnabled() \u0026\u0026 (config.proxyHost() \u003d\u003d null || config.proxyHost().isEmpty() || config.proxyPort() \u003c\u003d 0)) {\n                showProxySettingsIncompleteMessage();\n                return;\n            }\n\n            boolean isOtherLookup \u003d false;\n            String username \u003d Text.sanitize(chatMessage.getName());\n            String query \u003d commandArg;\n\n            if (chatMessage.getType().equals(ChatMessageType.PRIVATECHATOUT))\n            {\n                username \u003d client.getLocalPlayer().getName();\n            }\n\n            String otherPlayerName \u003d getStringBetweenQuotes(query);\n            if (otherPlayerName !\u003d null) {\n                username \u003d Text.sanitize(otherPlayerName);\n                isOtherLookup \u003d true;\n                query \u003d query.replace(\"\\\"\" + otherPlayerName + \"\\\"\", \"\").trim();\n            }\n\n            // Check if the user wants to see missing items or not\n            boolean isMissingSearch \u003d isMissingSearch(query);\n            String bossName \u003d query;\n            if (isMissingSearch) {\n                if (!config.showMissing()) {\n                    return;\n                }\n\n                bossName \u003d query.substring(MISSING_KEYWORD.length()).trim();\n            }\n\n            String profileType \u003d RuneScapeProfileType.getCurrent(client).name();\n\n            cloggedApiClient.getUserCollectionLog(username, profileType, bossName, isMissingSearch, isOtherLookup, subcategoryLookupCallback(chatMessage, isMissingSearch, isOtherLookup));\n        });\n    }\n\n    private static boolean isMissingSearch(String commandArg) {\n        return commandArg.toLowerCase().startsWith(MISSING_KEYWORD + \" \");\n    }\n\n    // Check if the command argument contains a string between quotes (a username to lookup)\n    public String getStringBetweenQuotes(String commandArg) {\n        Pattern pattern \u003d Pattern.compile(\"\\\"([^\\\"]*)\\\"\");\n        Matcher matcher \u003d pattern.matcher(commandArg);\n        if (matcher.find()) {\n            return matcher.group(1); // Return the string inside the quotes\n        }\n        return null; // Return null if no match is found\n    }\n\n    private Callback handleGroupCallback(ChatMessage chatMessage) {\n        return new Callback() {\n            @Override\n            public void onFailure(@NonNull Call call, @NonNull IOException e) {\n                log.error(\"Failed to join group: {}\", e.getMessage());\n                showLookupFailedMessage();\n            }\n\n            @Override\n            public void onResponse(@NonNull Call call, @NonNull Response response) throws IOException {\n                assert response.body() !\u003d null;\n                String responseBody \u003d response.body().string();\n                GroupResponse groupResponse \u003d gson.fromJson(responseBody, GroupResponse.class);\n\n                clientThread.invoke(() -\u003e {\n                    String message \u003d groupResponse.getMessage();\n                    updateChatMessage(chatMessage, message);\n                });\n\n                response.close();\n            }\n        };\n    }\n\n    private Callback subcategoryLookupCallback(ChatMessage chatMessage, boolean isMissingSearch, boolean isOtherLookup) {\n        return new Callback() {\n            @Override\n            public void onFailure(@NonNull Call call, @NonNull IOException e) {\n                log.error(\"Failed to get user collection log: {}\", e.getMessage());\n                showLookupFailedMessage();\n            }\n\n            @Override\n            public void onResponse(@NonNull Call call, @NonNull Response response) throws IOException {\n                assert response.body() !\u003d null;\n                String responseBody \u003d response.body().string();\n                if (response.code() \u003d\u003d 404) {\n                    boolean isOriginalSender \u003d chatMessage.getType().equals(ChatMessageType.PRIVATECHATOUT) || Objects.equals(Text.sanitize(chatMessage.getName()), client.getLocalPlayer().getName());\n                    if (isOriginalSender) {\n                        clientThread.invoke(() -\u003e {\n                            updateChatMessage(chatMessage, responseBody);\n                        });\n                    }\n                    return;\n                }\n\n                if (!response.isSuccessful()) {\n                    response.close();\n                    return;\n                }\n\n                CollectionLogLookupResponse lookupResponse \u003d gson.fromJson(responseBody, CollectionLogLookupResponse.class);\n\n                clientThread.invoke(() -\u003e {\n                    String replacementMessage \u003d buildReplacementMessage(lookupResponse, isMissingSearch, isOtherLookup, lookupResponse.getTotal());\n                    if (replacementMessage !\u003d null) {\n                        updateChatMessage(chatMessage, replacementMessage);\n                    }\n                });\n            }\n        };\n    }\n\n    Callback kcAliasesCallback \u003d new Callback() {\n        @Override\n        public void onFailure(@NonNull Call call, IOException e) {\n            log.error(\"Failed to fetch KC aliases: {}\", e.getMessage());\n        }\n\n        @Override\n        public void onResponse(@NonNull Call call, Response response) throws IOException {\n            if (response.isSuccessful() \u0026\u0026 response.body() !\u003d null) {\n                String responseBody \u003d response.body().string();\n                List\u003cKCAliasResponse\u003e kcAliases \u003d Arrays.asList(gson.fromJson(responseBody, KCAliasResponse[].class));\n                aliasHelper \u003d new AliasHelper(kcAliases);\n            } else {\n                // Handle unsuccessful response\n                log.error(\"Failed to fetch KC aliases: {}\", response.body());\n            }\n        }\n    };\n\n    private void updateChatMessage(ChatMessage chatMessage, String text) {\n        String message \u003d getFormattedMessage(text);\n        chatMessage.getMessageNode().setValue(message);\n        client.refreshChat();\n    }\n\n    private void updateUserCollectionLog() {\n        if (!isSyncEnabled()) {\n            showSyncingDisabledMessage();\n            return;\n        }\n\n        Widget collectionLogContainer \u003d client.getWidget(CLOG_CONTAINER_WIDGET_ID);\n        if (collectionLogContainer \u003d\u003d null) {\n            showCollectionLogClosedMessage();\n            return;\n        }\n\n        populateUserCollectionLogKcs();\n\n        // Trigger search to load all items\n        client.menuAction(-1, CLOG_SEARCH_WIDGET_ID, MenuAction.CC_OP, 1, -1, \"Search\", null);\n        client.runScript(2240);\n    }\n\n    private void syncCollectionLog() {\n        showSyncingMessage();\n        String userDataJson \u003d createUserCollectionLogJson();\n        cloggedApiClient.updateUserCollectionLog(userDataJson, createUploadCallback());\n    }\n\n    private String createUserCollectionLogJson() {\n        Map\u003cString, Object\u003e userDataMap \u003d new HashMap\u003c\u003e();\n        userDataMap.put(\"username\", client.getLocalPlayer().getName());\n        userDataMap.put(\"accountHash\", client.getAccountHash());\n        userDataMap.put(\"gameMode\", RuneScapeProfileType.getCurrent(client).name());\n        userDataMap.put(\"profileVisible\", config.profileVisibility());\n        userDataMap.put(\"collectedItems\", userCollectionLog.getItemJson());\n        userDataMap.put(\"subcategories\", userCollectionLog.getSubcategoryJson());\n        return gson.toJson(userDataMap);\n    }\n\n    private Callback createUploadCallback() {\n        return new Callback() {\n            @Override\n            public void onFailure(@NonNull Call call, @NonNull IOException e) {\n                log.error(\"Unable to upload data to Clogged.me: {}\", e.getMessage());\n                showSyncFailedMessage();\n            }\n\n            @Override\n            public void onResponse(@NonNull Call call, @NonNull Response response) {\n                response.close();\n                showSyncSuccessMessage();\n            }\n        };\n    }\n\n    // UI and Message Helpers\n\n    private String getFormattedMessage(String message) {\n        if (!config.enableCustomColor()) {\n            return message;\n        }\n\n        return ColorUtil.wrapWithColorTag(message, config.textColor());\n    }\n\n    private void showIncorrectGroupCommandMessage() {\n        String message \u003d getFormattedMessage(\"Clogged: Incorrect command. Please use \u0027!clog join group_name\u0027 to join a group.\");\n        chatMessageManager.queue(QueuedMessage.builder()\n                .type(ChatMessageType.GAMEMESSAGE)\n                .runeLiteFormattedMessage(message)\n                .build());\n    }\n\n    private void showProfileVisibilityDisabledMessage() {\n        String message \u003d getFormattedMessage(\"Clogged: \u0027Make profile visible on Clogged.me\u0027 must be enabled to join a group.\");\n        chatMessageManager.queue(QueuedMessage.builder()\n                .type(ChatMessageType.GAMEMESSAGE)\n                .runeLiteFormattedMessage(message)\n                .build());\n    }\n\n    private void showHelpMessage() {\n        String message \u003d getFormattedMessage(\"Ensure all plugin options are configured to your liking and open the collection log interface to sync. If method is set to manual, you must type \u0027!clog sync\u0027 with the interface open.\");\n        chatMessageManager.queue(QueuedMessage.builder()\n                .type(ChatMessageType.GAMEMESSAGE)\n                .runeLiteFormattedMessage(message)\n                .build());\n    }\n\n    private void showSyncingDisabledMessage() {\n        String message \u003d getFormattedMessage(\"Clogged: Syncing is disabled in the plugin options.\");\n        chatMessageManager.queue(QueuedMessage.builder()\n                .type(ChatMessageType.GAMEMESSAGE)\n                .runeLiteFormattedMessage(message)\n                .build());\n    }\n\n    private void showLookupDisabledMessage() {\n        String message \u003d getFormattedMessage(\"Clogged: Lookups are disabled in the plugin options.\");\n        chatMessageManager.queue(QueuedMessage.builder()\n                .type(ChatMessageType.GAMEMESSAGE)\n                .runeLiteFormattedMessage(message)\n                .build());\n    }\n\n    private void showProxySettingsIncompleteMessage() {\n        String message \u003d getFormattedMessage(\"Clogged: Proxy settings are incomplete. Please check the plugin settings.\");\n        chatMessageManager.queue(QueuedMessage.builder()\n                .type(ChatMessageType.GAMEMESSAGE)\n                .runeLiteFormattedMessage(message)\n                .build());\n    }\n\n    private void showCollectionLogClosedMessage() {\n        String message \u003d getFormattedMessage(\"Clogged: The collection log interface must be open to sync.\");\n        chatMessageManager.queue(QueuedMessage.builder()\n                .type(ChatMessageType.GAMEMESSAGE)\n                .runeLiteFormattedMessage(message)\n                .build());\n    }\n\n    private void showSyncingMessage() {\n        String message \u003d getFormattedMessage(\"Clogged: Syncing collection log...\");\n        chatMessageManager.queue(QueuedMessage.builder()\n                .type(ChatMessageType.GAMEMESSAGE)\n                .runeLiteFormattedMessage(message)\n                .build());\n    }\n\n    private void showSyncSuccessMessage() {\n        String message \u003d getFormattedMessage(\"Clogged: Collection log synced successfully.\");\n        chatMessageManager.queue(QueuedMessage.builder()\n                .type(ChatMessageType.GAMEMESSAGE)\n                .runeLiteFormattedMessage(message)\n                .build());\n    }\n\n    private void showSyncFailedMessage() {\n        String message \u003d getFormattedMessage(\"Clogged: Failed to sync collection log. Try again or reach out to Advistane on Discord.\");\n        chatMessageManager.queue(QueuedMessage.builder()\n                .type(ChatMessageType.GAMEMESSAGE)\n                .runeLiteFormattedMessage(message)\n                .build());\n    }\n\n    private void showLookupFailedMessage() {\n        String message \u003d getFormattedMessage(\"Clogged: Failed to lookup collection log. Try again or reach out to Advistane on Discord.\");\n        chatMessageManager.queue(QueuedMessage.builder()\n                .type(ChatMessageType.GAMEMESSAGE)\n                .runeLiteFormattedMessage(message)\n                .build());\n    }\n\n    private String buildReplacementMessage(CollectionLogLookupResponse response, boolean isMissingSearch, boolean isOtherLookup, int total) {\n        int kc \u003d response.getKc();\n        String subcategoryName \u003d response.getSubcategoryName();\n        List\u003cCollectionLogItem\u003e items \u003d response.getItems();\n\n        if (items.isEmpty()) {\n            return null;\n        }\n\n        StringBuilder messageBuilder \u003d new StringBuilder();\n        if (isOtherLookup) {\n            messageBuilder.append(response.getUsername()).append(\" - \");\n        }\n\n        messageBuilder.append(subcategoryName);\n\n        if (kc \u003e 0 || (config.showMissing() \u0026\u0026 isMissingSearch)) {\n            messageBuilder.append(\" (\");\n            if (kc \u003e 0) {\n                messageBuilder.append(kc).append(\" KC\");\n                if (config.showMissing() \u0026\u0026 isMissingSearch) {\n                    messageBuilder.append(\", Missing\");\n                } else if (config.showTotal() \u0026\u0026 !isMissingSearch) {\n                    messageBuilder.append(\", \").append(items.size()).append(\"/\").append(total);\n                }\n            } else { // kc is 0, but we are showing missing for a missing search\n                messageBuilder.append(\"Missing\");\n            }\n            messageBuilder.append(\"): \");\n        } else {\n            messageBuilder.append(\": \");\n        }\n\n        if (config.displayMethod() \u003d\u003d DisplayMethod.ICON) {\n            loadClogIcons(items);\n        }\n\n        appendItems(messageBuilder, items);\n        return messageBuilder.toString();\n    }\n\n    // Appends items to the message builder based on the display method\n    private void appendItems(StringBuilder builder, List\u003cCollectionLogItem\u003e items) {\n        for (CollectionLogItem item : items) {\n            String itemName \u003d client.getItemDefinition(item.getItemId()).getName();\n\n            if (config.displayMethod() \u003d\u003d DisplayMethod.TEXT) {\n                builder.append(itemName);\n                if (!addItemQuantity(builder, item.getQuantity(), true)) {\n                    builder.append(\", \");\n                }\n\n                continue;\n            }\n\n            try {\n                builder.append(\"\u003cimg\u003d\").append(loadedCollectionLogIcons.get(item.getItemId())).append(\"\u003e\");\n                if (!addItemQuantity(builder, item.getQuantity(), false)) {\n                    builder.append(\", \");\n                }\n\n            } catch (NullPointerException e) {\n                log.warn(\"Failed to load icon for item ID: {}\", item.getItemId());\n                builder.append(itemName);\n                if (!addItemQuantity(builder, item.getQuantity(), true)) {\n                    builder.append(\", \");\n                }\n            }\n        }\n\n        builder.setLength(builder.length() - 2);\n    }\n\n    private boolean addItemQuantity(StringBuilder builder, int quantity, boolean leadingSpace) {\n        if (config.showQuantity() \u0026\u0026 quantity \u003e 1) {\n            if (leadingSpace) {\n                builder.append(\" \");\n            }\n            builder.append(\"x\").append(quantity).append(\", \");\n            return true;\n        }\n        return false;\n    }\n\n    // Icon Management\n\n    private void loadClogIcons(List\u003cCollectionLogItem\u003e collectionLogItems) {\n        if (collectionLogItems.isEmpty()) {\n            return;\n        }\n\n        List\u003cCollectionLogItem\u003e itemsToLoad \u003d filterItemsToLoad(collectionLogItems);\n        if (itemsToLoad.isEmpty()) {\n            return;\n        }\n\n        final IndexedSprite[] modIcons \u003d client.getModIcons();\n        final IndexedSprite[] newModIcons \u003d Arrays.copyOf(modIcons, modIcons.length + itemsToLoad.size());\n        int modIconIdx \u003d modIcons.length;\n\n        for (int i \u003d 0; i \u003c itemsToLoad.size(); i++) {\n            final CollectionLogItem item \u003d itemsToLoad.get(i);\n            final IndexedSprite sprite \u003d createSpriteForItem(item.getItemId());\n            final int spriteIndex \u003d modIconIdx + i;\n\n            newModIcons[spriteIndex] \u003d sprite;\n            loadedCollectionLogIcons.put(item.getItemId(), spriteIndex);\n        }\n\n        client.setModIcons(newModIcons);\n    }\n\n    private List\u003cCollectionLogItem\u003e filterItemsToLoad(List\u003cCollectionLogItem\u003e collectionLogItems) {\n        return collectionLogItems.stream()\n                .filter(item -\u003e !loadedCollectionLogIcons.containsKey(item.getItemId()))\n                .collect(Collectors.toList());\n    }\n\n    private IndexedSprite createSpriteForItem(int itemId) {\n        final ItemComposition itemComposition \u003d itemManager.getItemComposition(itemId);\n        final BufferedImage itemImage \u003d itemManager.getImage(itemComposition.getId());\n        final BufferedImage croppedImage \u003d cropImageToContent(itemImage);\n        final BufferedImage resizedImage \u003d ImageUtil.resizeImage(croppedImage !\u003d null ? croppedImage : itemImage, 18, 15);\n\n        return ImageUtil.getImageIndexedSprite(resizedImage, client);\n    }\n\n    // Crops an image to its content while maintaining the aspect ratio\n    private BufferedImage cropImageToContent(BufferedImage src) {\n        int width \u003d src.getWidth();\n        int height \u003d src.getHeight();\n        int border \u003d 1; // Add a border of 1 pixel\n\n        // Step 1: Detect content bounds\n        int top \u003d height, left \u003d width, right \u003d 0, bottom \u003d 0;\n\n        for (int y \u003d 0; y \u003c height; y++) {\n            for (int x \u003d 0; x \u003c width; x++) {\n                int pixel \u003d src.getRGB(x, y);\n                if ((pixel \u003e\u003e 24) !\u003d 0x00) { // Not transparent\n                    if (x \u003c left) left \u003d x;\n                    if (x \u003e right) right \u003d x;\n                    if (y \u003c top) top \u003d y;\n                    if (y \u003e bottom) bottom \u003d y;\n                }\n            }\n        }\n\n        if (left \u003e right || top \u003e bottom) {\n            // No visible content\n            return null;\n        }\n\n        // Step 2: Add border\n        left \u003d Math.max(0, left - border);\n        right \u003d Math.min(width - 1, right + border);\n        top \u003d Math.max(0, top - border);\n        bottom \u003d Math.min(height - 1, bottom + border);\n\n        int contentWidth \u003d right - left + 1;\n        int contentHeight \u003d bottom - top + 1;\n\n        // Step 3: Adjust to maintain original aspect ratio\n        float originalAspect \u003d (float) width / height;\n        float contentAspect \u003d (float) contentWidth / contentHeight;\n\n        int newWidth \u003d contentWidth;\n        int newHeight \u003d contentHeight;\n\n        if (contentAspect \u003e originalAspect) {\n            // Too wide  pad height\n            newHeight \u003d Math.round(contentWidth / originalAspect);\n        } else {\n            // Too tall  pad width\n            newWidth \u003d Math.round(contentHeight * originalAspect);\n        }\n\n        // Center the new crop box\n        int cx \u003d left + contentWidth / 2;\n        int cy \u003d top + contentHeight / 2;\n\n        int newLeft \u003d Math.max(0, cx - newWidth / 2);\n        int newTop \u003d Math.max(0, cy - newHeight / 2);\n\n        // Clamp to image size\n        newLeft \u003d Math.min(newLeft, width - newWidth);\n        newTop \u003d Math.min(newTop, height - newHeight);\n\n        // Step 4: Crop and return\n        return src.getSubimage(newLeft, newTop, newWidth, newHeight);\n    }\n\n    private boolean isSyncEnabled() {\n        return config.enableSync();\n    }\n\n    private Map\u003cString, Integer\u003e createCategoryEnumMap() {\n        return Map.of(\n                \"bosses\", 2103,\n                \"raids\", 2104,\n                \"clues\", 2105,\n                \"minigames\", 2106,\n                \"other\", 2107\n        );\n    }\n    \n    private void setSubcategoryKc(int subcategoryId) {\n        StructComposition subcategoryStruct \u003d client.getStructComposition(subcategoryId);\n        String subcategoryName \u003d subcategoryStruct.getStringValue(689);\n\n        int kc \u003d getSummedKcForBoss(subcategoryName);\n        userCollectionLog.markSubcategoryAsObtained(subcategoryId, kc);\n    }\n\n    private void populateUserCollectionLogKcs() {\n        Map\u003cString, Integer\u003e categoryEnumMap \u003d createCategoryEnumMap();\n        for (Map.Entry\u003cString, Integer\u003e entry : categoryEnumMap.entrySet()) {\n            int enumId \u003d entry.getValue();\n            int[] subcategoryIds \u003d client.getEnum(enumId).getIntVals();\n            for (int subcategoryId : subcategoryIds) {\n                setSubcategoryKc(subcategoryId);\n            }\n        }\n    }\n\n    // Since the collection log doesn\u0027t separate bosses into their own subcategories, sum the kc of them\n    private int getSummedKcForBoss(String boss) {\n        switch (boss) {\n            case \"Daggonoth Kings\":\n                return getSimpleKcForBoss(\"Rex\") + getSimpleKcForBoss(\"Prime\") + getSimpleKcForBoss(\"Supreme\");\n            case \"Callisto and Artio\":\n                return getSimpleKcForBoss(\"Callisto\") + getSimpleKcForBoss(\"Artio\");\n            case \"Chambers of Xeric\":\n                return getSimpleKcForBoss(\"Chambers of Xeric\") + getSimpleKcForBoss(\"Chambers of Xeric challenge mode\");\n            case \"Vet\u0027ion and Calvar\u0027ion\":\n                return getSimpleKcForBoss(\"Vet\u0027ion\") + getSimpleKcForBoss(\"Calvar\u0027ion\");\n            case \"Venenatis and Spindel\":\n                return getSimpleKcForBoss(\"Venenatis\") + getSimpleKcForBoss(\"Spindel\");\n            case \"The Gauntlet\":\n                return getSimpleKcForBoss(\"Gauntlet\") + getSimpleKcForBoss(\"Corrupted Gauntlet\");\n            case \"The Leviathan\":\n                return getSimpleKcForBoss(\"Leviathan\") + getSimpleKcForBoss(\"Leviathan (awakened)\");\n            case \"Vardovis\":\n                return getSimpleKcForBoss(\"Vardovis\") + getSimpleKcForBoss(\"Vardovis (awakened)\");\n            case \"The Whisperer\":\n                return getSimpleKcForBoss(\"Whisperer\") + getSimpleKcForBoss(\"Whisperer (awakened)\");\n            case \"The Nightmare\":\n                return getSimpleKcForBoss(\"Nightmare\") + getSimpleKcForBoss(\"Phosani\u0027s Nightmare\");\n            case \"Theatre of Blood\":\n                return getSimpleKcForBoss(\"Theatre of Blood\") + getSimpleKcForBoss(\"Theatre of Blood Hard Mode\");\n            case \"Tombs of Amascut\":\n                return getSimpleKcForBoss(\"Tombs of Amascut\") + getSimpleKcForBoss(\"Tombs of Amascut Entry Mode\") + getSimpleKcForBoss(\"Tombs of Amascut Expert Mode\");\n            default:\n                return getSimpleKcForBoss(boss);\n        }\n    }\n\n    private int getSimpleKcForBoss(String boss) {\n        if (aliasHelper \u003d\u003d null \u0026\u0026 config.enableLookup()) {\n            cloggedApiClient.getKCAliases(kcAliasesCallback);\n        }\n\n        Integer killCount \u003d configManager.getRSProfileConfiguration(\"killcount\", aliasHelper.getFullNameByAlias(boss), int.class);\n        return killCount !\u003d null ? killCount : -1;\n    }\n}","filePath":"src\\main\\java\\me\\clogged\\CloggedPlugin.java"},{"fileName":"CollectionLogItem.java","content":"package me.clogged.data;\n\nimport lombok.Getter;\n\n@Getter\npublic class CollectionLogItem {\n    private int itemId;\n    private int quantity;\n}\n","filePath":"src\\main\\java\\me\\clogged\\data\\CollectionLogItem.java"},{"fileName":"CollectionLogLookupResponse.java","content":"package me.clogged.data;\n\nimport lombok.Getter;\nimport java.util.List;\n\n@Getter\npublic class CollectionLogLookupResponse {\n    private int kc;\n    private String subcategoryName;\n    private int total;\n    private String username;\n    private List\u003cCollectionLogItem\u003e items;\n}","filePath":"src\\main\\java\\me\\clogged\\data\\CollectionLogLookupResponse.java"},{"fileName":"DisplayMethod.java","content":"package me.clogged.data.config;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\n\n@Getter\n@AllArgsConstructor\npublic enum DisplayMethod {\n    TEXT(\"Text\"),\n    ICON(\"Icons\");\n\n    private final String name;\n\n    @Override\n    public String toString() {\n        return name;\n    }\n}\n","filePath":"src\\main\\java\\me\\clogged\\data\\config\\DisplayMethod.java"},{"fileName":"SyncMethod.java","content":"package me.clogged.data.config;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\n\n@Getter\n@AllArgsConstructor\npublic enum SyncMethod {\n    MANUAL(\"Manual\"),\n    AUTO(\"Automatic\");\n\n    private final String name;\n\n    @Override\n    public String toString() {\n        return name;\n    }\n}\n","filePath":"src\\main\\java\\me\\clogged\\data\\config\\SyncMethod.java"},{"fileName":"GroupResponse.java","content":"package me.clogged.data;\n\nimport lombok.Getter;\n\n@Getter\npublic class GroupResponse {\n    private boolean joined;\n    private String message;\n}\n","filePath":"src\\main\\java\\me\\clogged\\data\\GroupResponse.java"},{"fileName":"KCAliasResponse.java","content":"package me.clogged.data;\n\nimport lombok.Getter;\n\n@Getter\npublic class KCAliasResponse {\n    private String alias;\n    private String fullName;\n}\n","filePath":"src\\main\\java\\me\\clogged\\data\\KCAliasResponse.java"},{"fileName":"UserCollectionLog.java","content":"package me.clogged.data;\n\nimport com.google.gson.JsonArray;\nimport com.google.gson.JsonObject;\nimport lombok.Getter;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class UserCollectionLog {\n    // Item Id : Quantity\n    private final HashMap\u003cInteger, Integer\u003e items \u003d new HashMap\u003c\u003e();\n\n    // Subcategory Id : KC\n    @Getter\n    private final HashMap\u003cInteger, Integer\u003e kcs \u003d new HashMap\u003c\u003e();\n\n    public JsonArray getItemJson() {\n        JsonArray json \u003d new JsonArray();\n        for (Map.Entry\u003cInteger, Integer\u003e entry : items.entrySet()) {\n            JsonObject item \u003d new JsonObject();\n            item.addProperty(\"id\", entry.getKey());\n            item.addProperty(\"quantity\", entry.getValue());\n            json.add(item);\n        }\n        return json;\n    }\n\n    public JsonArray getSubcategoryJson() {\n        JsonArray json \u003d new JsonArray();\n        for (Map.Entry\u003cInteger, Integer\u003e entry : kcs.entrySet()) {\n            JsonObject subcategory \u003d new JsonObject();\n            subcategory.addProperty(\"id\", entry.getKey());\n            subcategory.addProperty(\"kc\", entry.getValue());\n            json.add(subcategory);\n        }\n        return json;\n    }\n\n    public void markItemAsObtained(int itemId, int quantity) {\n        if (itemId \u003c\u003d 0) {\n            throw new IllegalArgumentException(\"Item ID must be positive.\");\n        }\n        if (quantity \u003c\u003d 0) {\n            throw new IllegalArgumentException(\"Quantity must be positive.\");\n        }\n\n        items.put(itemId, quantity);\n    }\n\n    public void markSubcategoryAsObtained(int subcategoryId, int kc) {\n        if (subcategoryId \u003c\u003d 0) {\n            throw new IllegalArgumentException(\"Subcategory ID must be positive.\");\n        }\n\n        if (kc \u003c 0) {\n            kc \u003d -1;\n        }\n\n        kcs.put(subcategoryId, kc);\n    }\n}\n","filePath":"src\\main\\java\\me\\clogged\\data\\UserCollectionLog.java"},{"fileName":"AliasHelper.java","content":"package me.clogged.helpers;\n\nimport me.clogged.data.KCAliasResponse;\n\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\npublic class AliasHelper {\n    private final Map\u003cString, String\u003e aliasMap \u003d new HashMap\u003c\u003e();\n\n    public AliasHelper(List\u003cKCAliasResponse\u003e kcAliases) {\n        for (KCAliasResponse kcAlias : kcAliases) {\n            aliasMap.put(kcAlias.getAlias().toLowerCase(), kcAlias.getFullName().toLowerCase());\n        }\n    }\n\n    public String getFullNameByAlias(String alias) {\n        if (aliasMap.containsKey(alias.toLowerCase())) {\n            return aliasMap.get(alias.toLowerCase());\n        }\n\n        return alias.toLowerCase();\n    }\n}\n","filePath":"src\\main\\java\\me\\clogged\\helpers\\AliasHelper.java"},{"fileName":"CloggedPluginTest.java","content":"package me.clogged;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class CloggedPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(CloggedPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\me\\clogged\\CloggedPluginTest.java"}]},{"commit":"01d10d1ec55a8b6d379e77085659d5d5f8e49210","repository":"https://github.com/AnkouOSRS/cox-light-colors.git","internalName":"cox-light-colors","files":[{"fileName":"CoxLightColorsConfig.java","content":"/*\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.coxlightcolors;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\n\nimport java.awt.*;\n\n@ConfigGroup(\"coxlightcolors\")\npublic interface CoxLightColorsConfig extends Config\n{\n    @ConfigSection(\n            name \u003d \"Light colors\",\n            description \u003d \"Colors of the lights above the loot chest for different scenarios\",\n            position \u003d 0\n    )\n    String colorsSection \u003d \"colors\";\n\n    @ConfigSection(\n            name \u003d \"Groups\",\n            description \u003d \"Uniques that, when obtained, will use the \u0027Specific Unique\u0027 color for the light\",\n            position \u003d 1\n    )\n    String uniquesSection \u003d \"uniques\";\n\n    @ConfigSection(\n            name \u003d \"Toggles\",\n            description \u003d \"Toggle different recolors on or off\",\n            position \u003d 2,\n            closedByDefault \u003d true\n    )\n    String togglesSection \u003d \"toggles\";\n\n    @ConfigItem(\n            keyName \u003d \"standardLoot\",\n            name \u003d \"Standard loot\",\n            description \u003d \"Color of light when no unique item is obtained\",\n            position \u003d 0,\n            section \u003d colorsSection\n    )\n    default Color standardLoot()\n    {\n        return Color.WHITE;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"enableStandardLoot\",\n            name \u003d \"Recolor standard loot\",\n            description \u003d \"Enable recoloring the light of the chest when no unique is obtained\",\n            position \u003d 1,\n            section \u003d togglesSection\n    )\n    default boolean enableStandardLoot()\n    {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"unique\",\n            name \u003d \"Unique\",\n            description \u003d \"Color of light when a unique item is obtained (besides twisted kit or dust)\",\n            position \u003d 2,\n            section \u003d colorsSection\n    )\n    default Color unique()\n    {\n        return Color.decode(\"#DA56F5\");\n    }\n\n    @ConfigItem(\n            keyName \u003d \"enableUnique\",\n            name \u003d \"Recolor uniques\",\n            description \u003d \"Enable recoloring the light of the chest when a unique is obtained\",\n            position \u003d 3,\n            section \u003d togglesSection\n    )\n    default boolean enableUnique()\n    {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"dust\",\n            name \u003d \"Metamorphic Dust\",\n            description \u003d \"Color of light when metamorphic dust is obtained\",\n            position \u003d 4,\n            section \u003d colorsSection\n    )\n    default Color dust()\n    {\n        return Color.CYAN;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"enableDust\",\n            name \u003d \"Recolor dust\",\n            description \u003d \"Enable recoloring the light of the chest when metamorphic dust is obtained\",\n            position \u003d 5,\n            section \u003d togglesSection\n    )\n    default boolean enableDust()\n    {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"twistedKit\",\n            name \u003d \"Twisted Kit\",\n            description \u003d \"Color of light when a twisted kit is obtained\",\n            position \u003d 6,\n            section \u003d colorsSection\n    )\n    default Color twistedKit()\n    {\n        return Color.GREEN;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"enableKit\",\n            name \u003d \"Recolor Twisted kit\",\n            description \u003d \"Enable recoloring the light of the chest when a twisted kit is obtained\",\n            position \u003d 7,\n            section \u003d togglesSection\n    )\n    default boolean enableKit()\n    {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"olmEntrance\",\n            name \u003d \"Olm Entrance\",\n            description \u003d \"Color of the barrier used to enter the Olm room\",\n            position \u003d 8,\n            section \u003d colorsSection\n    )\n    default Color olmEntrance()\n    {\n        return Color.decode(\"#8CFF0B\");\n    }\n\n    @ConfigItem(\n            keyName \u003d \"enableEntrance\",\n            name \u003d \"Recolor entance\",\n            description \u003d \"Enable recoloring the entrance barrier to Olm\",\n            position \u003d 9,\n            section \u003d togglesSection\n    )\n    default boolean enableEntrance()\n    {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"groupOneColor\",\n            name \u003d \"Group 1\",\n            description \u003d \"Color of the light when an item from group 1 is obtained\",\n            position \u003d 0,\n            section \u003d uniquesSection\n    )\n    default Color groupOneColor()\n    {\n        return Color.RED;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"groupTwoColor\",\n            name \u003d \"Group 2\",\n            description \u003d \"Color of the light when an item from group 2 is obtained\",\n            position \u003d 1,\n            section \u003d uniquesSection\n    )\n    default Color groupTwoColor()\n    {\n        return Color.BLUE;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"groupThreeColor\",\n            name \u003d \"Group 3\",\n            description \u003d \"Color of the light when an item from group 3 is obtained\",\n            position \u003d 2,\n            section \u003d uniquesSection\n    )\n    default Color groupThreeColor()\n    {\n        return Color.YELLOW;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"groupTwistedBow\",\n            name \u003d \"Twisted bow\",\n            description \u003d \"Group color to use when this item is obtained. If no group is specified, the \u0027unique\u0027 color will be used\",\n            position \u003d 3,\n            section \u003d uniquesSection\n    )\n    default ItemGroup groupTwistedBow()\n    {\n        return ItemGroup.NONE;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"groupKodai\",\n            name \u003d \"Kodai insignia\",\n            description \u003d \"Group color to use when this item is obtained. If no group is specified, the \u0027unique\u0027 color will be used\",\n            position \u003d 4,\n            section \u003d uniquesSection\n    )\n    default ItemGroup groupKodai()\n    {\n        return ItemGroup.NONE;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"groupElderMaul\",\n            name \u003d \"Elder maul\",\n            description \u003d \"Group color to use when this item is obtained. If no group is specified, the \u0027unique\u0027 color will be used\",\n            position \u003d 5,\n            section \u003d uniquesSection\n    )\n    default ItemGroup groupElderMaul()\n    {\n        return ItemGroup.NONE;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"groupClaws\",\n            name \u003d \"Dragon claws\",\n            description \u003d \"Group color to use when this item is obtained. If no group is specified, the \u0027unique\u0027 color will be used\",\n            position \u003d 6,\n            section \u003d uniquesSection\n    )\n    default ItemGroup groupClaws()\n    {\n        return ItemGroup.NONE;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"groupAncestralHat\",\n            name \u003d \"Ancestral hat\",\n            description \u003d \"Group color to use when this item is obtained. If no group is specified, the \u0027unique\u0027 color will be used\",\n            position \u003d 7,\n            section \u003d uniquesSection\n    )\n    default ItemGroup groupAncestralHat()\n    {\n        return ItemGroup.NONE;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"groupAncestralTop\",\n            name \u003d \"Ancestral robe top\",\n            description \u003d \"Group color to use when this item is obtained. If no group is specified, the \u0027unique\u0027 color will be used\",\n            position \u003d 8,\n            section \u003d uniquesSection\n    )\n    default ItemGroup groupAncestralTop()\n    {\n        return ItemGroup.NONE;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"groupAncestralBottom\",\n            name \u003d \"Ancestral robe bottom\",\n            description \u003d \"Group color to use when this item is obtained. If no group is specified, the \u0027unique\u0027 color will be used\",\n            position \u003d 9,\n            section \u003d uniquesSection\n    )\n    default ItemGroup groupAncestralBottom()\n    {\n        return ItemGroup.NONE;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"groupDinhs\",\n            name \u003d \"Dinh\u0027s bulwark\",\n            description \u003d \"Group color to use when this item is obtained. If no group is specified, the \u0027unique\u0027 color will be used\",\n            position \u003d 10,\n            section \u003d uniquesSection\n    )\n    default ItemGroup groupDinhs()\n    {\n        return ItemGroup.NONE;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"groupDHCB\",\n            name \u003d \"Dragon hunter crossbow\",\n            description \u003d \"Group color to use when this item is obtained. If no group is specified, the \u0027unique\u0027 color will be used\",\n            position \u003d 11,\n            section \u003d uniquesSection\n    )\n    default ItemGroup groupDHCB()\n    {\n        return ItemGroup.NONE;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"groupBuckler\",\n            name \u003d \"Twisted buckler\",\n            description \u003d \"Group color to use when this item is obtained. If no group is specified, the \u0027unique\u0027 color will be used\",\n            position \u003d 12,\n            section \u003d uniquesSection\n    )\n    default ItemGroup groupBuckler()\n    {\n        return ItemGroup.NONE;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"groupArcane\",\n            name \u003d \"Arcane prayer scroll\",\n            description \u003d \"Group color to use when this item is obtained. If no group is specified, the \u0027unique\u0027 color will be used\",\n            position \u003d 13,\n            section \u003d uniquesSection\n    )\n    default ItemGroup groupArcane()\n    {\n        return ItemGroup.NONE;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"groupDex\",\n            name \u003d \"Dexterous prayer scroll\",\n            description \u003d \"Group color to use when this item is obtained. If no group is specified, the \u0027unique\u0027 color will be used\",\n            position \u003d 14,\n            section \u003d uniquesSection\n    )\n    default ItemGroup groupDex()\n    {\n        return ItemGroup.NONE;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"enableGroupOne\",\n            name \u003d \"Recolor group 1\",\n            description \u003d \"Enable recoloring the light of the chest when a unique from group 1 is obtained\",\n            position \u003d 15,\n            section \u003d uniquesSection\n    )\n    default boolean enableGroupOne()\n    {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"enableGroupTwo\",\n            name \u003d \"Recolor group 2\",\n            description \u003d \"Enable recoloring the light of the chest when a unique from group 2 is obtained\",\n            position \u003d 16,\n            section \u003d uniquesSection\n    )\n    default boolean enableGroupTwo()\n    {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"enableGroupThree\",\n            name \u003d \"Recolor group 3\",\n            description \u003d \"Enable recoloring the light of the chest when a unique from group 3 is obtained\",\n            position \u003d 17,\n            section \u003d uniquesSection\n    )\n    default boolean enableGroupThree()\n    {\n        return true;\n    }\n}\n","filePath":"src/main/java/com/coxlightcolors/CoxLightColorsConfig.java"},{"fileName":"CoxLightColorsPlugin.java","content":"/*\n * Copyright (c) 2018, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.coxlightcolors;\n\nimport com.google.common.collect.ImmutableSet;\nimport com.google.inject.Provides;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.*;\nimport net.runelite.api.gameval.VarbitID;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.callback.RenderCallback;\nimport net.runelite.client.callback.RenderCallbackManager;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.util.Text;\nimport org.apache.commons.lang3.StringUtils;\n\nimport javax.inject.Inject;\nimport java.awt.*;\nimport java.awt.Point;\nimport java.util.Arrays;\nimport java.util.Objects;\nimport java.util.Optional;\nimport java.util.Set;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\nimport java.util.stream.Stream;\n\n@PluginDescriptor(\n\tname \u003d \"CoX Light Colors\",\n\tdescription \u003d \"Set the colors of the light above the loot chest in Chambers of Xeric\",\n\ttags \u003d {\"bosses\", \"combat\", \"pve\", \"raid\"}\n)\n@Slf4j\npublic class CoxLightColorsPlugin extends Plugin implements RenderCallback\n{\n\tprivate static final Set\u003cString\u003e uniques \u003d ImmutableSet.of(\"Dexterous prayer scroll\", \"Arcane prayer scroll\", \"Twisted buckler\",\n\t\t\"Dragon hunter crossbow\", \"Dinh\u0027s bulwark\", \"Ancestral hat\", \"Ancestral robe top\", \"Ancestral robe bottom\",\n\t\t\"Dragon claws\", \"Elder maul\", \"Kodai insignia\", \"Twisted bow\");\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate RenderCallbackManager renderCallbackManager;\n\n\t@Inject\n\tprivate CoxLightColorsConfig config;\n\n\tprivate GameObject lightObject;\n\tprivate RuneLiteObject fakeLightObject;\n\tprivate GameObject entranceObject;\n\tprivate String uniqueItemReceived;\n\n\tprivate int[] defaultEntranceFaceColors1;\n\tprivate int[] defaultEntranceFaceColors2;\n\tprivate int[] defaultEntranceFaceColors3;\n\n\tprivate static final Pattern SPECIAL_DROP_MESSAGE \u003d Pattern.compile(\"(.+) - (.+)\");\n\n\tprivate static final int LIGHT_OBJECT_ID \u003d 28848;\n\tprivate static final int OLM_ENTRANCE_ID \u003d 29879;\n\tprivate static final int VARBIT_LIGHT_TYPE \u003d 5456;\n\tprivate static final Point OLM_ENTRANCE_LOCATION \u003d new Point(3233, 5729);\n\tprivate static final int OLM_ENTRANCE_REGION_ID \u003d 12889;\n\n\tprivate Integer currentLightType; // Default (null), No Light (0), Standard loot (1), Unique (2), Dust (3), Twisted Kit (4)\n\n\t@Provides\n\tCoxLightColorsConfig getConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(CoxLightColorsConfig.class);\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\trenderCallbackManager.register(this);\n\t\tupdateLight();\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tresetFaceColors();\n\t\tclearFakeLightObject();\n\t\tuniqueItemReceived \u003d null;\n\t\tlightObject \u003d null;\n\t\tentranceObject \u003d null;\n\t\trenderCallbackManager.unregister(this);\n\t}\n\n\t@Override\n\tpublic boolean drawObject(Scene scene, TileObject object)\n\t{\n\t\t// Hide the real light object if we have a fake one\n\t\treturn LIGHT_OBJECT_ID !\u003d object.getId() || fakeLightObject \u003d\u003d null;\n\t}\n\n\t@Subscribe\n\tpublic void onVarbitChanged(VarbitChanged varbitChanged)\n\t{\n\t\tif (varbitChanged.getVarbitId() \u003d\u003d VARBIT_LIGHT_TYPE)\n\t\t{\n\t\t\tlog.debug(\"Light type varbit changed to {}\", varbitChanged.getValue());\n\t\t\tcurrentLightType \u003d varbitChanged.getValue();\n\t\t\tupdateLight();\n\t\t}\n\t\tif (varbitChanged.getVarbitId() \u003d\u003d VarbitID.RAIDS_CLIENT_INDUNGEON \u0026\u0026 !isInRaid())\n\t\t{\n\t\t\tlog.debug(\"Player has left raid, clearing light object\");\n\t\t\tclearFakeLightObject();\n\t\t\tresetFaceColors();\n\t\t\tuniqueItemReceived \u003d null;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage chatMessage)\n\t{\n\t\tif (client.getLocalPlayer() \u003d\u003d null || client.getLocalPlayer().getName() \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (chatMessage.getType() \u003d\u003d ChatMessageType.FRIENDSCHATNOTIFICATION)\n\t\t{\n\t\t\tString message \u003d Text.removeTags(chatMessage.getMessage());\n\n\t\t\tif (message.contains(\"your raid is complete!\"))\n\t\t\t{\n\t\t\t\tuniqueItemReceived \u003d null;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tMatcher matcher;\n\t\t\tmatcher \u003d SPECIAL_DROP_MESSAGE.matcher(message);\n\n\t\t\tif (matcher.find())\n\t\t\t{\n\t\t\t\tfinal String dropReceiver \u003d Text.sanitize(matcher.group(1)).trim();\n\t\t\t\tfinal String dropName \u003d matcher.group(2).trim();\n\n\t\t\t\tif (uniques.contains(dropName))\n\t\t\t\t{\n\t\t\t\t\tif (dropReceiver.equals(Text.sanitize(client.getLocalPlayer().getName())))\n\t\t\t\t\t{\n\t\t\t\t\t\tlog.debug(\"Special loot: {} received by {}\", dropName, dropReceiver);\n\t\t\t\t\t\tuniqueItemReceived \u003d dropName;\n\t\t\t\t\t\tif (lightObject !\u003d null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tColor newLightColor \u003d getUniqueGroupColor(dropName);\n\t\t\t\t\t\t\tlog.debug(\"Light object not null when special loot received by local player. Recoloring light \" +\n\t\t\t\t\t\t\t\t\"based on unique group: {}\", String.format(\"#%06x\", newLightColor.getRGB() \u0026 0x00FFFFFF));\n\t\t\t\t\t\t\tclearFakeLightObject();\n\t\t\t\t\t\t\tclientThread.invoke(() -\u003e fakeLightObject \u003d spawnFakeLightObject(lightObject.getLocalLocation(), newLightColor));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlog.debug(\"Light object null after local player received drop\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tlog.debug(\"Drop received by non-local player: {}, player: {}\", dropName, dropReceiver);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameObjectSpawned(GameObjectSpawned event)\n\t{\n\t\tGameObject obj \u003d event.getGameObject();\n\t\tif (LIGHT_OBJECT_ID \u003d\u003d obj.getId())\n\t\t{\n\t\t\tlog.info(\"Light gameObject spawned\");\n\t\t\tlightObject \u003d obj;\n\t\t\tupdateLight();\n\t\t}\n\t\telse if (OLM_ENTRANCE_ID \u003d\u003d obj.getId() \u0026\u0026 isAtOlmEntranceLocation(obj))\n\t\t{\n\t\t\tentranceObject \u003d obj;\n\t\t\tif (config.enableEntrance())\n\t\t\t{\n\t\t\t\tclientThread.invokeLater(() -\u003e recolorAllFaces(obj.getRenderable().getModel(), config.olmEntrance()));\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameObjectDespawned(GameObjectDespawned event)\n\t{\n\t\tif (LIGHT_OBJECT_ID \u003d\u003d event.getGameObject().getId())\n\t\t{\n\t\t\tlog.info(\"Light gameObject despawned\");\n\t\t\tclearFakeLightObject();\n\t\t\tlightObject \u003d null;\n\t\t}\n\t\telse if (OLM_ENTRANCE_ID \u003d\u003d event.getGameObject().getId())\n\t\t{\n\t\t\tentranceObject \u003d null;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif (!event.getGroup().equals(\"coxlightcolors\"))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tresetFaceColors();\n\t\tif (lightObject !\u003d null)\n\t\t{\n\t\t\tupdateLight();\n\t\t}\n\t\tif (entranceObject !\u003d null \u0026\u0026 isAtOlmEntranceLocation(entranceObject))\n\t\t{\n\t\t\tif (config.enableEntrance())\n\t\t\t{\n\t\t\t\tclientThread.invokeLater(() -\u003e recolorAllFaces(entranceObject.getRenderable().getModel(), config.olmEntrance()));\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void updateLight()\n\t{\n\t\tclearFakeLightObject();\n\n\t\tif (currentLightType \u003d\u003d null || currentLightType \u003d\u003d 0)\n\t\t{\n\t\t\tlog.debug(\"updateLight() called with light type {}, not spawning fake light\", currentLightType);\n\t\t\treturn;\n\t\t}\n\n\t\tColor color \u003d getUpdatedLightColor();\n\t\tif (color \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (lightObject !\u003d null)\n\t\t{\n\t\t\tLocalPoint lightLocation \u003d lightObject.getLocalLocation();\n\t\t\tclientThread.invoke(() -\u003e fakeLightObject \u003d spawnFakeLightObject(lightLocation, color));\n\t\t}\n\t}\n\n\tprivate RuneLiteObject spawnFakeLightObject(LocalPoint point, Color color)\n\t{\n\t\tlog.debug(\"Spawning new fake light object at {},{} with color {}\", point.getX(), point.getY(),\n\t\t\tString.format(\"#%06x\", color.getRGB() \u0026 0x00FFFFFF));\n\n\t\tint FAKE_LIGHT_HEIGHT_OFFSET \u003d -100; // Height offset to position the light beam above the chest\n\t\tint FAKE_LIGHT_SCALE_XY \u003d 128; // Scale to match the in-game light beam size\n\t\tint FAKE_LIGHT_SCALE_Z \u003d 200;\n\n\t\tRuneLiteObject lightBeam \u003d client.createRuneLiteObject();\n\t\tModelData lightBeamModel \u003d Objects.requireNonNull(client.loadModelData(5809))\n\t\t\t.cloneVertices()\n\t\t\t.translate(0, FAKE_LIGHT_HEIGHT_OFFSET, 0)\n\t\t\t.scale(FAKE_LIGHT_SCALE_XY, FAKE_LIGHT_SCALE_Z, FAKE_LIGHT_SCALE_XY)\n\t\t\t.cloneColors();\n\n\t\tlightBeamModel.recolor(lightBeamModel.getFaceColors()[0],\n\t\t\tJagexColor.rgbToHSL(color.getRGB(), 1.0d));\n\t\tlightBeam.setModel(lightBeamModel.light());\n\n\t\tWorldView wv \u003d client.getTopLevelWorldView();\n\t\tlightBeam.setLocation(point, wv.getPlane());\n\t\tlightBeam.setActive(true);\n\n\t\tlog.debug(\"Fake light object spawned at local point X: {}, Y: {}\", point.getX(), point.getY());\n\t\treturn lightBeam;\n\t}\n\n\tprivate void clearFakeLightObject()\n\t{\n\t\tclientThread.invoke(() -\u003e {\n\t\t\tif (fakeLightObject !\u003d null)\n\t\t\t{\n\t\t\t\tfakeLightObject.setActive(false);\n\t\t\t\tfakeLightObject \u003d null;\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate Color getUpdatedLightColor()\n\t{\n\t\treturn uniqueItemReceived !\u003d null ? getUniqueGroupColor(uniqueItemReceived) : getNonUniqueLightColor();\n\t}\n\n\tprivate Color getUniqueGroupColor(String uniqueName)\n\t{\n\t\tif (StringUtils.isBlank(uniqueName))\n\t\t{\n\t\t\tif (!StringUtils.isBlank(uniqueItemReceived))\n\t\t\t{\n\t\t\t\tuniqueName \u003d uniqueItemReceived;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlog.info(\"getUniqueGroupColor() called with {} unique string\", null \u003d\u003d uniqueName ? \"null\" : \"empty\");\n\t\t\t\treturn getNonUniqueLightColor();\n\t\t\t}\n\t\t}\n\n\t\tswitch (uniqueName.toLowerCase().trim())\n\t\t{\n\t\t\tcase \"twisted bow\":\n\t\t\t\treturn getGroupColor(config.groupTwistedBow());\n\t\t\tcase \"kodai insignia\":\n\t\t\t\treturn getGroupColor(config.groupKodai());\n\t\t\tcase \"elder maul\":\n\t\t\t\treturn getGroupColor(config.groupElderMaul());\n\t\t\tcase \"dragon claws\":\n\t\t\t\treturn getGroupColor(config.groupClaws());\n\t\t\tcase \"ancestral hat\":\n\t\t\t\treturn getGroupColor(config.groupAncestralHat());\n\t\t\tcase \"ancestral robe top\":\n\t\t\t\treturn getGroupColor(config.groupAncestralTop());\n\t\t\tcase \"ancestral robe bottom\":\n\t\t\t\treturn getGroupColor(config.groupAncestralBottom());\n\t\t\tcase \"dinh\u0027s bulwark\":\n\t\t\t\treturn getGroupColor(config.groupDinhs());\n\t\t\tcase \"dragon hunter crossbow\":\n\t\t\t\treturn getGroupColor(config.groupDHCB());\n\t\t\tcase \"twisted buckler\":\n\t\t\t\treturn getGroupColor(config.groupBuckler());\n\t\t\tcase \"arcane prayer scroll\":\n\t\t\t\treturn getGroupColor(config.groupArcane());\n\t\t\tcase \"dexterous prayer scroll\":\n\t\t\t\treturn getGroupColor(config.groupDex());\n\t\t\tdefault:\n\t\t\t\tlog.info(\"Unique received did not match a known item from CoX: {}\", uniqueName);\n\t\t\t\treturn getNonUniqueLightColor();\n\t\t}\n\t}\n\n\tprivate Color getGroupColor(ItemGroup group)\n\t{\n\t\tswitch (group)\n\t\t{\n\t\t\tcase ONE:\n\t\t\t\treturn (config.enableGroupOne() ? config.groupOneColor() : getNonUniqueLightColor());\n\t\t\tcase TWO:\n\t\t\t\treturn (config.enableGroupTwo() ? config.groupTwoColor() : getNonUniqueLightColor());\n\t\t\tcase THREE:\n\t\t\t\treturn (config.enableGroupThree() ? config.groupThreeColor() : getNonUniqueLightColor());\n\t\t\tdefault:\n\t\t\t\treturn getNonUniqueLightColor();\n\t\t}\n\t}\n\n\tprivate Color getNonUniqueLightColor()\n\t{\n\t\tif (currentLightType \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tswitch (currentLightType)\n\t\t{\n\t\t\tcase 1:\n\t\t\t\treturn (config.enableStandardLoot() ? config.standardLoot() : null);\n\t\t\tcase 2:\n\t\t\t\treturn (config.enableUnique() ? config.unique() : null);\n\t\t\tcase 3:\n\t\t\t\treturn (config.enableDust() ? config.dust() : null);\n\t\t\tcase 4:\n\t\t\t\treturn (config.enableKit() ? config.twistedKit() : null);\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n\n\tprivate void recolorAllFaces(Model model, Color color)\n\t{\n\t\tif (model \u003d\u003d null || color \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tint rs2hsb \u003d colorToRs2hsb(color);\n\t\tint[] faceColors1 \u003d model.getFaceColors1();\n\t\tint[] faceColors2 \u003d model.getFaceColors2();\n\t\tint[] faceColors3 \u003d model.getFaceColors3();\n\n\t\tif (defaultEntranceFaceColors1 \u003d\u003d null || defaultEntranceFaceColors1.length \u003d\u003d 0)\n\t\t{\n\t\t\tdefaultEntranceFaceColors1 \u003d faceColors1.clone();\n\t\t\tdefaultEntranceFaceColors2 \u003d faceColors2.clone();\n\t\t\tdefaultEntranceFaceColors3 \u003d faceColors3.clone();\n\t\t}\n\n\t\tlog.debug(\"Calling replaceFaceColorValues with color: {}\", String.format(\"#%06x\", color.getRGB() \u0026 0x00FFFFFF));\n\t\treplaceFaceColorValues(rs2hsb, faceColors1, faceColors2, faceColors3);\n\t}\n\n\tprivate boolean isInRaid()\n\t{\n\t\treturn (client.getGameState() \u003d\u003d GameState.LOGGED_IN \u0026\u0026 client.getVarbitValue(VarbitID.RAIDS_CLIENT_INDUNGEON) \u003d\u003d 1);\n\t}\n\n\tprivate int colorToRs2hsb(Color color)\n\t{\n\t\tfloat[] hsbVals \u003d Color.RGBtoHSB(color.getRed(), color.getGreen(), color.getBlue(), null);\n\n\t\t// \"Correct\" the brightness level to avoid going to white at full saturation, or having a low brightness at\n\t\t// low saturation\n\t\thsbVals[2] -\u003d Math.min(hsbVals[1], hsbVals[2] / 2);\n\n\t\tint encode_hue \u003d (int) (hsbVals[0] * 63);\n\t\tint encode_saturation \u003d (int) (hsbVals[1] * 7);\n\t\tint encode_brightness \u003d (int) (hsbVals[2] * 127);\n\t\treturn (encode_hue \u003c\u003c 10) + (encode_saturation \u003c\u003c 7) + (encode_brightness);\n\t}\n\n\tprivate void resetFaceColors()\n\t{\n\t\tclientThread.invokeLater(() -\u003e\n\t\t{\n\t\t\tboolean shouldReset \u003d Optional.ofNullable(entranceObject)\n\t\t\t\t.map(GameObject::getRenderable)\n\t\t\t\t.map(Renderable::getModel)\n\t\t\t\t.isPresent()\n\t\t\t\t\u0026\u0026 Stream.of(defaultEntranceFaceColors1, defaultEntranceFaceColors2, defaultEntranceFaceColors3).allMatch(Objects::nonNull);\n\t\t\tif (shouldReset)\n\t\t\t{\n\t\t\t\tModel model \u003d entranceObject.getRenderable().getModel();\n\t\t\t\treplaceFaceColorValues(model.getFaceColors1(), defaultEntranceFaceColors1, model.getFaceColors2(),\n\t\t\t\t\tdefaultEntranceFaceColors2, model.getFaceColors3(), defaultEntranceFaceColors3);\n\t\t\t\tdefaultEntranceFaceColors1 \u003d defaultEntranceFaceColors2 \u003d defaultEntranceFaceColors3 \u003d null;\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate void replaceFaceColorValues(int[]... pairs)\n\t{\n\t\tif (pairs.length % 2 !\u003d 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfor (int i \u003d 0; i \u003c pairs.length; i +\u003d 2)\n\t\t{\n\t\t\tint[] destination \u003d pairs[i];\n\t\t\tint[] source \u003d pairs[i + 1];\n\n\t\t\tif (source.length \u003d\u003d destination.length)\n\t\t\t{\n\t\t\t\tSystem.arraycopy(source, 0, destination, 0, source.length);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void replaceFaceColorValues(int globalReplacement, int[]... faceArrays)\n\t{\n\t\tfor (int[] faceArray : faceArrays)\n\t\t{\n\t\t\tif (faceArray !\u003d null)\n\t\t\t{\n\t\t\t\tArrays.fill(faceArray, globalReplacement);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate boolean isAtOlmEntranceLocation(GameObject obj)\n\t{\n\t\tWorldPoint p \u003d WorldPoint.fromLocalInstance(client, obj.getLocalLocation());\n\t\treturn OLM_ENTRANCE_REGION_ID \u003d\u003d p.getRegionID() \u0026\u0026 OLM_ENTRANCE_LOCATION.getX() \u003d\u003d p.getX()\n\t\t\t\u0026\u0026 OLM_ENTRANCE_LOCATION.getY() \u003d\u003d p.getY();\n\t}\n}\n\n","filePath":"src/main/java/com/coxlightcolors/CoxLightColorsPlugin.java"},{"fileName":"ItemGroup.java","content":"package com.coxlightcolors;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum ItemGroup {\n    NONE(\"No Group\"),\n    ONE(\"Group 1\"),\n    TWO(\"Group 2\"),\n    THREE(\"Group 3\");\n\n    private final String name;\n\n    @Override\n    public String toString() {\n        return name;\n    }\n}\n","filePath":"src/main/java/com/coxlightcolors/ItemGroup.java"},{"fileName":"CoxLightColorsPluginTest.java","content":"package com.coxlightcolors;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class CoxLightColorsPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(CoxLightColorsPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}\n","filePath":"src/test/java/com/coxlightcolors/CoxLightColorsPluginTest.java"}]},{"commit":"431ae825d8acfef42de692378ec7ae78da1cfa07","repository":"https://github.com/mezettle/runelite-plugins.git","internalName":"player-highlighter","files":[{"fileName":"PlayerHighlighterConfig.java","content":"package com.playerhighlighter;\r\n\r\nimport net.runelite.client.config.*;\r\n\r\nimport java.awt.*;\r\n\r\n@ConfigGroup(\"playerhighlighter\")\r\npublic interface PlayerHighlighterConfig extends Config\r\n{\r\n\t@Alpha\r\n\t@ConfigItem(\r\n\t\tkeyName \u003d \"outlineColor\",\r\n\t\tname \u003d \"Player Outline Color\",\r\n\t\tdescription \u003d \"This is the color that will outline the character\"\r\n\t)\r\n\tdefault Color outlineColor()\r\n\t{\r\n\t\treturn new Color(0, 0, 255, 100);\r\n\t}\r\n\r\n\t@Alpha\r\n\t@ConfigItem(\r\n\t\t\tkeyName \u003d \"selfColor\",\r\n\t\t\tname \u003d \"Self Outline Color\",\r\n\t\t\tdescription \u003d \"This is the color that will outline your character\"\r\n\t)\r\n\tdefault Color selfColor()\r\n\t{\r\n\t\treturn new Color(0, 255, 0, 100);\r\n\t}\r\n\r\n\t@Alpha\r\n\t@ConfigItem(\r\n\t\t\tkeyName \u003d \"underfootColor\",\r\n\t\t\tname \u003d \"Underfoot Color\",\r\n\t\t\tdescription \u003d \"This is the color that will outline players standing underneath you\"\r\n\t)\r\n\tdefault Color underfootColor()\r\n\t{\r\n\t\treturn new Color(255, 0, 0, 100);\r\n\t}\r\n\t@ConfigItem(\r\n\t\t\tkeyName \u003d \"borderWidth\",\r\n\t\t\tname \u003d \"Outline Border Width\",\r\n\t\t\tdescription \u003d \"This is the width of the outline around a player\"\r\n\t)\r\n\t@Range(\r\n\t\t\tmin\u003d1\r\n\t)\r\n\r\n\tdefault int borderWidth(){return 3;}\r\n\r\n\t@ConfigItem(\r\n\t\t\tkeyName \u003d \"borderFeather\",\r\n\t\t\tname \u003d \"Outline Feather\",\r\n\t\t\tdescription \u003d \"Amount to feather the outline around a player\"\r\n\t)\r\n\t@Range(\r\n\t\t\tmin\u003d0\r\n\t)\r\n\r\n\tdefault int borderFeather(){return 5;}\r\n\r\n\t@ConfigItem(\r\n\t\t\tkeyName \u003d \"highlightRadius\",\r\n\t\t\tname \u003d \"Highlight Radius\",\r\n\t\t\tdescription \u003d \"Players within this radius (from you) will be highlighted\"\r\n\t)\r\n\t@Range(\r\n\t\t\tmin\u003d0\r\n\t)\r\n\r\n\tdefault int highlightRadius(){return 3;}\r\n\r\n\t@ConfigItem(\r\n\t\t\tkeyName \u003d \"highlightSelf\",\r\n\t\t\tname \u003d \"Highlight Self\",\r\n\t\t\tdescription \u003d \"Highlight your own player\"\r\n\t)\r\n\tdefault boolean highlightSelf() {return false;}\r\n\r\n}\r\n\r\n\r\n","filePath":"src\\main\\java\\com\\playerhighlighter\\PlayerHighlighterConfig.java"},{"fileName":"PlayerHighlighterOverlay.java","content":"package com.playerhighlighter;\r\n\r\nimport net.runelite.client.ui.overlay.Overlay;\r\nimport net.runelite.api.Client;\r\nimport net.runelite.api.Perspective;\r\nimport net.runelite.api.Player;\r\nimport net.runelite.api.coords.LocalPoint;\r\nimport net.runelite.api.coords.WorldPoint;\r\nimport net.runelite.client.ui.overlay.Overlay;\r\nimport net.runelite.client.ui.overlay.OverlayLayer;\r\nimport net.runelite.client.ui.overlay.OverlayPosition;\r\nimport net.runelite.client.ui.overlay.outline.ModelOutlineRenderer;\r\n\r\nimport javax.inject.Inject;\r\nimport java.awt.*;\r\n\r\npublic class PlayerHighlighterOverlay extends Overlay {\r\n    private final Client client;\r\n    private final PlayerHighlighterPlugin plugin;\r\n    private final PlayerHighlighterConfig config;\r\n    private final ModelOutlineRenderer outlineRenderer;\r\n\r\n    @Inject\r\n    private PlayerHighlighterOverlay(Client client, PlayerHighlighterPlugin plugin, PlayerHighlighterConfig config, ModelOutlineRenderer outlineRenderer){\r\n        this.client \u003d client;\r\n        this.plugin \u003d plugin;\r\n        this.config \u003d config;\r\n        this.outlineRenderer \u003d outlineRenderer;\r\n\r\n        setPosition(OverlayPosition.DYNAMIC);\r\n        setLayer(OverlayLayer.ABOVE_SCENE);\r\n    }\r\n\r\n    public Dimension render(Graphics2D graphics){\r\n\r\n        WorldPoint my_loc \u003d client.getLocalPlayer().getWorldLocation();\r\n\r\n        for(Player player : client.getPlayers()){\r\n\r\n            WorldPoint player_loc \u003d player.getWorldLocation();\r\n            float distance \u003d my_loc.distanceTo(player_loc);\r\n\r\n            if(player !\u003d client.getLocalPlayer() \u0026\u0026 distance \u003d\u003d 0){\r\n                outlineRenderer.drawOutline(player, config.borderWidth(), config.underfootColor(), config.borderFeather());\r\n                continue;\r\n            }\r\n\r\n            if(player !\u003d client.getLocalPlayer() \u0026\u0026 distance \u003c\u003d config.highlightRadius())\r\n                outlineRenderer.drawOutline(player, config.borderWidth(), config.outlineColor(), config.borderFeather());\r\n        }\r\n\r\n        if(config.highlightSelf())\r\n            outlineRenderer.drawOutline(client.getLocalPlayer(), config.borderWidth(), config.selfColor(), config.borderFeather());\r\n\r\n        return null;\r\n    }\r\n\r\n}\r\n","filePath":"src\\main\\java\\com\\playerhighlighter\\PlayerHighlighterOverlay.java"},{"fileName":"PlayerHighlighterPlugin.java","content":"package com.playerhighlighter;\r\n\r\nimport com.google.inject.Provides;\r\nimport javax.inject.Inject;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport net.runelite.api.ChatMessageType;\r\nimport net.runelite.api.Client;\r\nimport net.runelite.api.GameState;\r\nimport net.runelite.api.Player;\r\nimport net.runelite.api.coords.WorldPoint;\r\nimport net.runelite.api.events.GameStateChanged;\r\nimport net.runelite.api.events.GameTick;\r\nimport net.runelite.client.config.ConfigManager;\r\nimport net.runelite.client.eventbus.Subscribe;\r\nimport net.runelite.client.plugins.Plugin;\r\nimport net.runelite.client.plugins.PluginDescriptor;\r\nimport net.runelite.client.ui.overlay.OverlayManager;\r\n\r\n@Slf4j\r\n@PluginDescriptor(\r\n\tname \u003d \"Player Highlighter\"\r\n)\r\npublic class PlayerHighlighterPlugin extends Plugin\r\n{\r\n\t@Inject\r\n\tprivate Client client;\r\n\r\n\t@Inject\r\n\tprivate PlayerHighlighterConfig config;\r\n\r\n\t@Inject\r\n\tprivate OverlayManager overlayManager;\r\n\r\n\t@Inject PlayerHighlighterOverlay overlay;\r\n\r\n\t@Override\r\n\tprotected void startUp() throws Exception\r\n\t{\r\n\t\toverlayManager.add(overlay);\r\n\t\tlog.info(\"Player Highlighter started!\");\r\n\t}\r\n\r\n\t@Override\r\n\tprotected void shutDown() throws Exception\r\n\t{\r\n\t\toverlayManager.remove(overlay);\r\n\t\tlog.info(\"Player Highlighter stopped!\");\r\n\t}\r\n\r\n\t@Provides\r\n\tPlayerHighlighterConfig provideConfig(ConfigManager configManager)\r\n\t{\r\n\t\treturn configManager.getConfig(PlayerHighlighterConfig.class);\r\n\t}\r\n}\r\n","filePath":"src\\main\\java\\com\\playerhighlighter\\PlayerHighlighterPlugin.java"},{"fileName":"PlayerHighlighterTest.java","content":"package com.playerhighlighter;\r\n\r\nimport net.runelite.client.RuneLite;\r\nimport net.runelite.client.externalplugins.ExternalPluginManager;\r\n\r\npublic class PlayerHighlighterTest\r\n{\r\n\tpublic static void main(String[] args) throws Exception\r\n\t{\r\n\t\tExternalPluginManager.loadBuiltin(PlayerHighlighterPlugin.class);\r\n\t\tRuneLite.main(args);\r\n\t}\r\n}","filePath":"src\\test\\java\\com\\playerhighlighter\\PlayerHighlighterTest.java"}]},{"commit":"97d74ef372d10811c12fc44e3937899d13c136b8","repository":"https://github.com/EricSiane/QuickSplitCalc.git","internalName":"quicksplitcalc","files":[{"fileName":"QuickSplitCalcPlugin.java","content":"package com.QuickSplitCalc;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.ItemID;\nimport net.runelite.api.MenuAction;\nimport net.runelite.api.VarClientInt;\nimport net.runelite.api.VarClientStr;\nimport net.runelite.api.events.MenuEntryAdded;\nimport net.runelite.api.events.VarClientIntChanged;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.widgets.ComponentID;\nimport net.runelite.api.widgets.JavaScriptCallback;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetPositionMode;\nimport net.runelite.api.widgets.WidgetSizeMode;\nimport net.runelite.api.widgets.WidgetTextAlignment;\nimport net.runelite.api.widgets.WidgetType;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.chat.QueuedMessage;\nimport net.runelite.client.chat.ChatColorType;\nimport net.runelite.client.chat.ChatMessageBuilder;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.game.chatbox.ChatboxPanelManager;\nimport net.runelite.client.callback.ClientThread;\nimport com.google.inject.Provides;\nimport lombok.extern.slf4j.Slf4j;\n\nimport javax.inject.Inject;\nimport java.text.NumberFormat;\nimport java.util.Locale;\nimport com.QuickSplitCalc.QuickSplitCalcConfig.RoundingPlace;\n\n@Slf4j\n@PluginDescriptor(\n        name \u003d \"QuickSplitCalc\",\n        description \u003d \"Calculate cash splits between multiple players\",\n        tags \u003d {\"cash\", \"split\", \"coins\", \"money\"},\n        configName \u003d \"QuickSplitCalc\"\n)\npublic class QuickSplitCalcPlugin extends Plugin {\n    @Inject\n    private Client client;\n\n    @Inject\n    private ChatMessageManager chatMessageManager;\n\n    @Inject\n    private QuickSplitCalcConfig config;\n\n    @Inject\n    private ChatboxPanelManager chatboxPanelManager;\n\n    @Inject\n    private ClientThread clientThread;\n\n    private int lastSplitAmount \u003d 0;\n    private int numberOfPeople \u003d 0;\n    private int totalTrades \u003d 0;\n    private int tradesRemaining \u003d 0;\n    private Widget splitTextWidget \u003d null;\n\n    private static final int MOUSE_OFF_TEXT_COLOR \u003d 0x00008B;\n    private static final int MOUSE_OVER_TEXT_COLOR \u003d 0x00FFFF;\n\n    @Provides\n    QuickSplitCalcConfig provideConfig(ConfigManager configManager) {\n        return configManager.getConfig(QuickSplitCalcConfig.class);\n    }\n\n    @Subscribe\n    public void onMenuEntryAdded(MenuEntryAdded event) {\n        if (event.getType() !\u003d MenuAction.CC_OP.getId() \u0026\u0026\n                event.getType() !\u003d MenuAction.CC_OP_LOW_PRIORITY.getId()) {\n            return;\n        }\n\n        if (event.getActionParam1() !\u003d 9764864) {\n            return;\n        }\n\n        if (event.getItemId() \u003d\u003d ItemID.COINS_995) {\n            for (net.runelite.api.MenuEntry entry : client.getMenuEntries()) {\n                if (entry.getOption().equals(\"Split\")) {\n                    return;\n                }\n            }\n\n            net.runelite.api.Menu subMenu \u003d client.createMenuEntry(-1)\n                    .setOption(\"Split\")\n                    .setTarget(event.getTarget())\n                    .setType(MenuAction.RUNELITE)\n                    .setParam0(event.getActionParam0())\n                    .setParam1(event.getActionParam1())\n                    .createSubMenu();\n\n            createQuickSplitEntry(subMenu, 2, event);\n            createQuickSplitEntry(subMenu, 3, event);\n            createQuickSplitEntry(subMenu, 4, event);\n            createQuickSplitEntry(subMenu, 5, event);\n\n            subMenu.createMenuEntry(0)\n                    .setOption(\"X\")\n                    .setTarget(\"Players\")\n                    .setType(MenuAction.RUNELITE)\n                    .onClick(menuEntry -\u003e handleCustomSplit(menuEntry, event.getActionParam0()));\n\n            if (config.enableSplitHelper() \u0026\u0026 lastSplitAmount \u003e 0 \u0026\u0026 tradesRemaining \u003e 0) {\n                subMenu.createMenuEntry(0)\n                        .setOption(\"\u003ccol\u003dff0000\u003eClear Split\u003c/col\u003e\")\n                        .setTarget(\"\")\n                        .setType(MenuAction.RUNELITE)\n                        .onClick(menuEntry -\u003e clearSplit());\n            }\n        }\n    }\n\n    @Subscribe\n    public void onChatMessage(ChatMessage event) {\n        if (event.getType() !\u003d ChatMessageType.TRADE) {\n            return;\n        }\n\n        String message \u003d event.getMessage();\n\n        if (message.contains(\"Accepted trade.\")) {\n            if (lastSplitAmount \u003e 0 \u0026\u0026 tradesRemaining \u003e 0) {\n                tradesRemaining--;\n                int currentTrade \u003d totalTrades - tradesRemaining;\n                log.debug(\"Trade accepted - Trades remaining: {} (Trade {}/{})\", tradesRemaining, currentTrade, totalTrades);\n\n                if (tradesRemaining \u003c\u003d 0) {\n                    log.debug(\"All trades complete - clearing split data\");\n                    lastSplitAmount \u003d 0;\n                    numberOfPeople \u003d 0;\n                    totalTrades \u003d 0;\n                    tradesRemaining \u003d 0;\n                }\n            }\n        }\n    }\n\n\n\n    @Subscribe\n    public void onVarClientIntChanged(VarClientIntChanged event) {\n        if (event.getIndex() \u003d\u003d VarClientInt.INPUT_TYPE) {\n            int inputType \u003d client.getVarcIntValue(VarClientInt.INPUT_TYPE);\n\n            log.debug(\"VarClientInt INPUT_TYPE changed to: {}\", inputType);\n            log.debug(\"Current state - lastSplitAmount: {}, tradesRemaining: {}\", lastSplitAmount, tradesRemaining);\n\n            if (inputType \u003d\u003d 7) {\n                clientThread.invokeLater(() -\u003e {\n                    Widget chatboxTitle \u003d client.getWidget(ComponentID.CHATBOX_TITLE);\n                    if (chatboxTitle !\u003d null) {\n                        String titleText \u003d chatboxTitle.getText();\n                        log.debug(\"Chatbox title: \u0027{}\u0027\", titleText);\n\n                        if (lastSplitAmount \u003e 0 \u0026\u0026 tradesRemaining \u003e 0) {\n                            log.debug(\"Conditions met - attempting to create widget\");\n                            if (titleText !\u003d null \u0026\u0026 titleText.equals(\"Enter amount:\")) {\n                                int currentTrade \u003d totalTrades - tradesRemaining + 1;\n                                log.debug(\"Creating split text widget for trade {}/{}\", currentTrade, totalTrades);\n                                createSplitTextWidget();\n                            }\n                        } else {\n                            log.debug(\"Conditions NOT met - lastSplitAmount: {}, tradesRemaining: {}\",\n                                    lastSplitAmount, tradesRemaining);\n                        }\n                    }\n                });\n            } else if (inputType \u003d\u003d 0) {\n                removeSplitTextWidget();\n            }\n        }\n    }\n\n    private void createQuickSplitEntry(net.runelite.api.Menu parentMenu, int numPeople, MenuEntryAdded event) {\n        parentMenu.createMenuEntry(0)\n                .setOption(String.valueOf(numPeople))\n                .setTarget(\"Players\")\n                .setType(MenuAction.RUNELITE)\n                .onClick(menuEntry -\u003e performSplit(event.getActionParam0(), numPeople));\n    }\n\n    private String formatSplitAmount(int splitAmount, int roundingValue) {\n        double millions \u003d splitAmount / 1_000_000.0;\n        int decimals;\n        if (roundingValue \u003d\u003d 100_000) {\n            decimals \u003d 1;\n        } else if (roundingValue \u003d\u003d 10_000) {\n            decimals \u003d 2;\n        } else {\n            decimals \u003d 3;\n        }\n        return String.format(\"%.\" + decimals + \"fM\", millions);\n    }\n\n    private String formatNumber(int number, NumberFormat formatter, boolean isSplitAmount, int roundingValue) {\n        if (!config.roundedSplits() || !isSplitAmount) {\n            return formatter.format(number);\n        }\n        if (number \u003e\u003d 1_000_000) {\n            return formatSplitAmount(number, roundingValue);\n        }\n        return formatter.format(number);\n    }\n\n    private void performSplit(int inventorySlot, int numPeople) {\n        int stackSize \u003d client.getItemContainer(InventoryID.INVENTORY).getItem(inventorySlot).getQuantity();\n        NumberFormat formatter \u003d NumberFormat.getInstance(Locale.US);\n\n        int splitAmount \u003d stackSize / numPeople;\n        int remainder \u003d stackSize % numPeople;\n\n        int roundingValue \u003d 1_000;\n        if (config.roundedSplits()) {\n            switch (config.roundingPlace()) {\n                case HUNDRED_THOUSAND:\n                    roundingValue \u003d 100_000;\n                    break;\n                case TEN_THOUSAND:\n                    roundingValue \u003d 10_000;\n                    break;\n                case ONE_THOUSAND:\n                default:\n                    roundingValue \u003d 1_000;\n                    break;\n            }\n            splitAmount \u003d (splitAmount / roundingValue) * roundingValue;\n            remainder \u003d stackSize - (splitAmount * numPeople);\n        }\n\n        String splitDisplay \u003d formatNumber(splitAmount, formatter, true, roundingValue);\n\n        String message \u003d new ChatMessageBuilder()\n                .append(ChatColorType.HIGHLIGHT)\n                .append(formatter.format(stackSize))\n                .append(ChatColorType.NORMAL)\n                .append(\" coins split between \")\n                .append(ChatColorType.HIGHLIGHT)\n                .append(String.valueOf(numPeople))\n                .append(ChatColorType.NORMAL)\n                .append(\" people: \")\n                .append(ChatColorType.HIGHLIGHT)\n                .append(splitDisplay)\n                .append(ChatColorType.NORMAL)\n                .append(\" coins each\")\n                .build();\n\n        chatMessageManager.queue(QueuedMessage.builder()\n                .type(ChatMessageType.CONSOLE)\n                .runeLiteFormattedMessage(message)\n                .build());\n\n        if (remainder \u003e 0) {\n            String remainderMsg \u003d new ChatMessageBuilder()\n                    .append(ChatColorType.NORMAL)\n                    .append(\"Remainder: \")\n                    .append(ChatColorType.HIGHLIGHT)\n                    .append(formatter.format(remainder) + \" coins\")\n                    .build();\n\n            chatMessageManager.queue(QueuedMessage.builder()\n                    .type(ChatMessageType.CONSOLE)\n                    .runeLiteFormattedMessage(remainderMsg)\n                    .build());\n        }\n\n        if (config.enableSplitHelper()) {\n            lastSplitAmount \u003d splitAmount;\n            numberOfPeople \u003d numPeople;\n            totalTrades \u003d numPeople - 1;\n            tradesRemaining \u003d totalTrades;\n\n            log.debug(\"Split calculated - Amount: {}, People: {}, Total trades: {}, Trades remaining: {}\",\n                    lastSplitAmount, numberOfPeople, totalTrades, tradesRemaining);\n\n            String helperMessage \u003d new ChatMessageBuilder()\n                    .append(ChatColorType.NORMAL)\n                    .append(\"Split helper active for the next \")\n                    .append(ChatColorType.HIGHLIGHT)\n                    .append(String.valueOf(totalTrades))\n                    .append(ChatColorType.NORMAL)\n                    .append(totalTrades \u003d\u003d 1 ? \" trade\" : \" trades\")\n                    .build();\n\n            chatMessageManager.queue(QueuedMessage.builder()\n                    .type(ChatMessageType.CONSOLE)\n                    .runeLiteFormattedMessage(helperMessage)\n                    .build());\n        }\n    }\n\n    private void handleCustomSplit(net.runelite.api.MenuEntry menuEntry, int inventorySlot) {\n        int stackSize \u003d client.getItemContainer(InventoryID.INVENTORY).getItem(inventorySlot).getQuantity();\n\n        clientThread.invokeLater(() -\u003e {\n            chatboxPanelManager.openTextInput(\"How many people to split between? \")\n                    .onDone((input) -\u003e {\n                        clientThread.invokeLater(() -\u003e {\n                            if (input \u003d\u003d null || input.isEmpty()) {\n                                return;\n                            }\n\n                            try {\n                                int numPeople \u003d Integer.parseInt(input);\n                                if (numPeople \u003e 0) {\n                                    performSplit(inventorySlot, numPeople);\n                                }\n                            } catch (NumberFormatException e) {\n                            }\n                        });\n                        return true;\n                    })\n                    .build();\n        });\n    }\n\n    private void clearSplit() {\n        log.debug(\"Clearing split data - was at trade {}/{}\", (totalTrades - tradesRemaining + 1), totalTrades);\n\n        int tradesLeft \u003d tradesRemaining;\n        int amount \u003d lastSplitAmount;\n\n        lastSplitAmount \u003d 0;\n        numberOfPeople \u003d 0;\n        totalTrades \u003d 0;\n        tradesRemaining \u003d 0;\n\n        removeSplitTextWidget();\n\n        String clearMessage \u003d new ChatMessageBuilder()\n                .append(ChatColorType.NORMAL)\n                .append(\"Split helper cleared (\")\n                .append(ChatColorType.HIGHLIGHT)\n                .append(String.format(\"%,d\", amount))\n                .append(ChatColorType.NORMAL)\n                .append(\" gp, \")\n                .append(ChatColorType.HIGHLIGHT)\n                .append(String.valueOf(tradesLeft))\n                .append(ChatColorType.NORMAL)\n                .append(tradesLeft \u003d\u003d 1 ? \" trade remaining)\" : \" trades remaining)\")\n                .build();\n\n        chatMessageManager.queue(QueuedMessage.builder()\n                .type(ChatMessageType.CONSOLE)\n                .runeLiteFormattedMessage(clearMessage)\n                .build());\n    }\n\n    private void createSplitTextWidget() {\n        // Only show the split helper if the trade window is open (widget 335)\n        Widget tradeWindow \u003d client.getWidget(335, 0);\n        if (tradeWindow \u003d\u003d null || tradeWindow.isHidden()) {\n            log.debug(\"Trade window not open, not creating split widget\");\n            return;\n        }\n\n        Widget chatboxContainer \u003d client.getWidget(ComponentID.CHATBOX_CONTAINER);\n        if (chatboxContainer \u003d\u003d null) {\n            log.warn(\"Chatbox container is null, cannot create widget\");\n            return;\n        }\n\n        removeSplitTextWidget();\n\n        splitTextWidget \u003d chatboxContainer.createChild(-1, WidgetType.TEXT);\n\n        // Calculate current trade number based on updated tradesRemaining\n        // (which was decremented by onChatMessage after the previous trade)\n        int currentTrade \u003d totalTrades - tradesRemaining + 1;\n        String formattedAmount \u003d String.format(\"%,d\", lastSplitAmount);\n        String tradeCounter \u003d currentTrade + \"/\" + totalTrades + \" Trade\" + (totalTrades \u003d\u003d 1 ? \"\" : \"s\");\n\n        splitTextWidget.setText(\"Set to Split Amount: \" + formattedAmount + \" gp (\" + tradeCounter + \")\");\n\n        log.debug(\"Created split widget with text: {} (tradesRemaining: {})\", splitTextWidget.getText(), tradesRemaining);\n\n        splitTextWidget.setTextColor(MOUSE_OFF_TEXT_COLOR);\n        splitTextWidget.setFontId(495);\n        splitTextWidget.setXPositionMode(WidgetPositionMode.ABSOLUTE_CENTER);\n        splitTextWidget.setYPositionMode(WidgetPositionMode.ABSOLUTE_TOP);\n        splitTextWidget.setOriginalX(0);\n        splitTextWidget.setOriginalY(40);\n        splitTextWidget.setOriginalHeight(20);\n        splitTextWidget.setXTextAlignment(WidgetTextAlignment.CENTER);\n        splitTextWidget.setWidthMode(WidgetSizeMode.MINUS);\n\n        splitTextWidget.setAction(0, \"Fill amount\");\n        splitTextWidget.setHasListener(true);\n        splitTextWidget.setOnOpListener((JavaScriptCallback) ev -\u003e {\n            log.debug(\"Split widget clicked - filling trade amount: {}\", lastSplitAmount);\n            fillTradeAmount(lastSplitAmount);\n        });\n\n        splitTextWidget.setOnMouseRepeatListener((JavaScriptCallback) ev -\u003e\n                splitTextWidget.setTextColor(MOUSE_OVER_TEXT_COLOR)\n        );\n        splitTextWidget.setOnMouseLeaveListener((JavaScriptCallback) ev -\u003e\n                splitTextWidget.setTextColor(MOUSE_OFF_TEXT_COLOR)\n        );\n\n        Widget chatboxTitle \u003d client.getWidget(ComponentID.CHATBOX_TITLE);\n        if (chatboxTitle !\u003d null) {\n            chatboxTitle.setOriginalY(chatboxTitle.getOriginalY() + 12);\n            chatboxTitle.revalidate();\n        }\n\n        Widget chatboxInput \u003d client.getWidget(ComponentID.CHATBOX_FULL_INPUT);\n        if (chatboxInput !\u003d null) {\n            chatboxInput.setOriginalY(chatboxInput.getOriginalY() + 12);\n            chatboxInput.revalidate();\n        }\n\n        splitTextWidget.revalidate();\n    }\n\n    private void removeSplitTextWidget() {\n        if (splitTextWidget !\u003d null) {\n            log.debug(\"Removing split text widget\");\n            splitTextWidget.setHidden(true);\n\n            Widget chatboxTitle \u003d client.getWidget(ComponentID.CHATBOX_TITLE);\n            if (chatboxTitle !\u003d null) {\n                chatboxTitle.setOriginalY(chatboxTitle.getOriginalY() - 12);\n                chatboxTitle.revalidate();\n            }\n\n            Widget chatboxInput \u003d client.getWidget(ComponentID.CHATBOX_FULL_INPUT);\n            if (chatboxInput !\u003d null) {\n                chatboxInput.setOriginalY(chatboxInput.getOriginalY() - 12);\n                chatboxInput.revalidate();\n            }\n\n            splitTextWidget \u003d null;\n        }\n    }\n\n    private void fillTradeAmount(int amount) {\n        Widget chatboxInputWidget \u003d client.getWidget(ComponentID.CHATBOX_FULL_INPUT);\n        if (chatboxInputWidget !\u003d null) {\n            chatboxInputWidget.setText(String.valueOf(amount) + \"*\");\n            client.setVarcStrValue(VarClientStr.INPUT_TEXT, String.valueOf(amount));\n            log.debug(\"Filled trade amount: {}\", amount);\n        } else {\n            log.warn(\"Could not fill trade amount - chatbox input widget is null\");\n        }\n    }\n}\n","filePath":"src/main/java/com/QuickSplitCalc/QuickSplitCalcPlugin.java"},{"fileName":"QuickSplitCalcConfig.java","content":"package com.QuickSplitCalc;\n\nimport net.runelite.client.config.*;\n\n@ConfigGroup(\"cashsplit\")\npublic interface QuickSplitCalcConfig extends Config\n{\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"enableSplitHelper\",\n\t\t\tname \u003d \"Enable Split Helper\",\n\t\t\tdescription \u003d \"Shows a clickable widget to auto-fill split amounts when trading\",\n\t\t\tposition \u003d 2\n\t)\n\tdefault boolean enableSplitHelper()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"roundedSplits\",\n\t\t\tname \u003d \"Rounded Splits\",\n\t\t\tdescription \u003d \"Display split amounts in rounded format (e.g., 21.3M instead of 21,345,988)\"\n\t)\n\tdefault boolean roundedSplits()\n\t{\n\t\treturn false;\n\t}\n\n\tenum RoundingPlace\n\t{\n\t\tHUNDRED_THOUSAND(\"100,000\"),\n\t\tTEN_THOUSAND(\"10,000\"),\n\t\tONE_THOUSAND(\"1,000\");\n\n\t\tprivate final String name;\n\t\tRoundingPlace(String name) { this.name \u003d name; }\n\t\t@Override\n\t\tpublic String toString() { return name; }\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"roundingPlace\",\n\t\t\tname \u003d \"Rounding Place\",\n\t\t\tdescription \u003d \"Choose the place to round split amounts to\",\n\t\t\tposition \u003d 1\n\t)\n\tdefault RoundingPlace roundingPlace()\n\t{\n\t\treturn RoundingPlace.HUNDRED_THOUSAND;\n\t}\n\n}\n","filePath":"src/main/java/com/QuickSplitCalc/QuickSplitCalcConfig.java"},{"fileName":"QuickSplitCalcTest.java","content":"package com.QuickSplitCalc;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class QuickSplitCalcTest\n{\n\tpublic static void main(String[] args)\n\t{\n\t\t// Enable Java assertions for the system classloader before loading RuneLite classes.\n\t\tClassLoader.getSystemClassLoader().setDefaultAssertionStatus(true);\n\n\t\ttry\n\t\t{\n\t\t\t// Optional: set LWJGL native path if you know the natives location.\n\t\t\t// System.setProperty(\"org.lwjgl.librarypath\", \"C:\\\\path\\\\to\\\\lwjgl\\\\natives\");\n\n\t\t\tExternalPluginManager.loadBuiltin(QuickSplitCalcPlugin.class);\n\t\t\tRuneLite.main(args);\n\t\t}\n\t\tcatch (Throwable t)\n\t\t{\n\t\t\t// Print full stacktrace so Gradle shows the cause.\n\t\t\tt.printStackTrace();\n\t\t\t// Do not call System.exit(1) here  let the test JVM exit normally so Gradle doesn\u0027t simply report a non-zero exit value.\n\t\t}\n\t}\n}\n","filePath":"src/test/java/com/QuickSplitCalc/QuickSplitCalcTest.java"}]},{"commit":"06dd86c1a101ad04dc4bbad695d646e9c3ad0a76","repository":"https://github.com/JadeGerbitz/Aerial-Tick-Colors.git","internalName":"aerial-tick-colors","files":[{"fileName":"AerialFishingConfig.java","content":"package com.AerialFishing;\n\nimport java.awt.Color;\nimport net.runelite.client.config.Alpha;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.Units;\n\n@ConfigGroup(\"Aerial-Tick-Colors\")\npublic interface AerialFishingConfig extends Config\n{\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"aerialColor1T\",\n\t\t\tname \u003d \"1-tick color\",\n\t\t\tdescription \u003d \"Color of overlays when 1-tick aerial fishing\",\n\t\t\tposition \u003d 0\n\t)\n\tdefault Color Color1T()\n\t{\n\t\treturn Color.GREEN;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"aerialColor2T\",\n\t\t\tname \u003d \"2-tick color\",\n\t\t\tdescription \u003d \"Color of overlays when 2-tick aerial fishing\",\n\t\t\tposition \u003d 1\n\t)\n\tdefault Color Color2T()\n\t{\n\t\treturn Color.ORANGE;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"aerialColor3T\",\n\t\t\tname \u003d \"3-tick color\",\n\t\t\tdescription \u003d \"Color of overlays when 3-tick aerial fishing\",\n\t\t\tposition \u003d 2\n\t)\n\tdefault Color Color3T()\n\t{\n\t\treturn Color.RED;\n\t}\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"aerialColor4T\",\n\t\t\tname \u003d \"4-tick color\",\n\t\t\tdescription \u003d \"Color of overlays when 4-tick aerial fishing\",\n\t\t\tposition \u003d 3\n\t)\n\tdefault Color Color4T()\n\t{\n\t\treturn Color.RED;\n\t}\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"aerialColor5T\",\n\t\t\tname \u003d \"5-tick color\",\n\t\t\tdescription \u003d \"Color of overlays when 5-tick aerial fishing\",\n\t\t\tposition \u003d 4\n\t)\n\tdefault Color Color5T()\n\t{\n\t\treturn Color.RED;\n\t}\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"aerialColor6T\",\n\t\t\tname \u003d \"6-tick color\",\n\t\t\tdescription \u003d \"Color of overlays when 6-tick aerial fishing\",\n\t\t\tposition \u003d 5\n\t)\n\tdefault Color Color6T()\n\t{\n\t\treturn Color.RED;\n\t}\n}\n","filePath":"src\\main\\java\\com\\AerialFishing\\AerialFishingConfig.java"},{"fileName":"AerialFishingPlugin.java","content":"package com.AerialFishing;\n\nimport com.google.inject.Provides;\nimport java.time.Duration;\nimport java.time.Instant;\nimport java.util.ArrayList;\nimport java.util.Comparator;\nimport java.util.List;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Actor;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.Item;\nimport net.runelite.api.ItemContainer;\nimport net.runelite.api.ItemID;\nimport net.runelite.api.NPC;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.InteractingChanged;\nimport net.runelite.api.events.ItemContainerChanged;\nimport net.runelite.api.events.NpcDespawned;\nimport net.runelite.api.events.NpcSpawned;\nimport net.runelite.client.Notifier;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.game.FishingSpot;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDependency;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.plugins.xptracker.XpTrackerPlugin;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\n@PluginDescriptor(\n\t\tname \u003d \"Aerial Fishing Colors\",\n\t\tdescription \u003d \"Let\u0027s you set the highlight color of aerial fishing spots by tick length to catch\",\n\t\ttags \u003d {\"overlay\", \"skilling\"}\n)\n@PluginDependency(XpTrackerPlugin.class)\n@Singleton\n@Slf4j\npublic class AerialFishingPlugin extends Plugin\n{\n\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate final AerialFishingSession session \u003d new AerialFishingSession();\n\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate final List\u003cNPC\u003e fishingSpots \u003d new ArrayList\u003c\u003e();\n\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate FishingSpot currentSpot;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate Notifier notifier;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate AerialFishingConfig config;\n\n\t@Inject\n\tprivate AerialFishingSpotOverlay spotOverlay;\n\n\t@Provides\n\tAerialFishingConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(AerialFishingConfig.class);\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\toverlayManager.add(spotOverlay);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tspotOverlay.setHidden(true);\n\t\toverlayManager.remove(spotOverlay);\n\t\tfishingSpots.clear();\n\t\tcurrentSpot \u003d null;\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged)\n\t{\n\t\tGameState gameState \u003d gameStateChanged.getGameState();\n\t\tif (gameState \u003d\u003d GameState.CONNECTION_LOST || gameState \u003d\u003d GameState.LOGIN_SCREEN || gameState \u003d\u003d GameState.HOPPING)\n\t\t{\n\t\t\tfishingSpots.clear();\n\t\t}\n\t}\n\n\tvoid reset()\n\t{\n\t\tsession.setLastFishCaught(null);\n\t}\n\n\t@Subscribe\n\tpublic void onItemContainerChanged(ItemContainerChanged event)\n\t{\n\t\tif (event.getItemContainer() !\u003d client.getItemContainer(InventoryID.INVENTORY)\n\t\t\t\t\u0026\u0026 event.getItemContainer() !\u003d client.getItemContainer(InventoryID.EQUIPMENT))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal boolean showOverlays \u003d session.getLastFishCaught() !\u003d null\n\t\t\t\t|| canPlayerFish(client.getItemContainer(InventoryID.INVENTORY))\n\t\t\t\t|| canPlayerFish(client.getItemContainer(InventoryID.EQUIPMENT));\n\n\t\tif (!showOverlays)\n\t\t{\n\t\t\tcurrentSpot \u003d null;\n\t\t}\n\n\t\tspotOverlay.setHidden(!showOverlays);\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage event)\n\t{\n\t\tif (event.getType() !\u003d ChatMessageType.SPAM)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.getMessage().contains(\"You catch a\") || event.getMessage().contains(\"You catch some\") ||\n\t\t\t\tevent.getMessage().equals(\"Your cormorant returns with its catch.\"))\n\t\t{\n\t\t\tsession.setLastFishCaught(Instant.now());\n\t\t\tspotOverlay.setHidden(false);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onInteractingChanged(InteractingChanged event)\n\t{\n\t\tif (event.getSource() !\u003d client.getLocalPlayer())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal Actor target \u003d event.getTarget();\n\n\t\tif (!(target instanceof NPC))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal NPC npc \u003d (NPC) target;\n\t\tFishingSpot spot \u003d FishingSpot.findSpot(npc.getId());\n\n\t\tif (spot \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tcurrentSpot \u003d spot;\n\t}\n\n\tprivate boolean canPlayerFish(final ItemContainer itemContainer)\n\t{\n\t\tif (itemContainer \u003d\u003d null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (Item item : itemContainer.getItems())\n\t\t{\n\t\t\tswitch (item.getId())\n\t\t\t{\n\t\t\t\tcase ItemID.CORMORANTS_GLOVE:\n\t\t\t\tcase ItemID.CORMORANTS_GLOVE_22817:\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event)\n\t{\n\t\t// Reset fishing session\n\t\tif (session.getLastFishCaught() !\u003d null)\n\t\t{\n\t\t\tfinal Duration sinceCaught \u003d Duration.between(session.getLastFishCaught(), Instant.now());\n\t\t}\n\t\tinverseSortSpotDistanceFromPlayer();\n\t}\n\n\t@Subscribe\n\tpublic void onNpcSpawned(NpcSpawned event)\n\t{\n\t\tfinal NPC npc \u003d event.getNpc();\n\n\t\tif (FishingSpot.findSpot(npc.getId()) \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfishingSpots.add(npc);\n\t\tinverseSortSpotDistanceFromPlayer();\n\t}\n\n\t@Subscribe\n\tpublic void onNpcDespawned(NpcDespawned npcDespawned)\n\t{\n\t\tfinal NPC npc \u003d npcDespawned.getNpc();\n\n\t\tfishingSpots.remove(npc);\n\t}\n\n\tprivate void inverseSortSpotDistanceFromPlayer()\n\t{\n\t\tif (fishingSpots.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal LocalPoint cameraPoint \u003d new LocalPoint(client.getCameraX(), client.getCameraY());\n\t\tfishingSpots.sort(\n\t\t\t\tComparator.comparingInt(\n\t\t\t\t\t\t\t\t// Negate to have the furthest first\n\t\t\t\t\t\t\t\t(NPC npc) -\u003e -npc.getLocalLocation().distanceTo(cameraPoint))\n\t\t\t\t\t\t// Order by position\n\t\t\t\t\t\t.thenComparing(NPC::getLocalLocation, Comparator.comparingInt(LocalPoint::getX)\n\t\t\t\t\t\t\t\t.thenComparingInt(LocalPoint::getY))\n\t\t\t\t\t\t// And then by id\n\t\t\t\t\t\t.thenComparingInt(NPC::getId)\n\t\t);\n\t}\n}","filePath":"src\\main\\java\\com\\AerialFishing\\AerialFishingPlugin.java"},{"fileName":"AerialFishingSession.java","content":"package com.AerialFishing;\n\nimport java.time.Instant;\nimport lombok.Getter;\nimport lombok.Setter;\n\nclass AerialFishingSession\n{\n    @Getter\n    @Setter\n    private Instant lastFishCaught;\n}\n","filePath":"src\\main\\java\\com\\AerialFishing\\AerialFishingSession.java"},{"fileName":"AerialFishingSpotOverlay.java","content":"package com.AerialFishing;\n\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Polygon;\nimport javax.inject.Inject;\nimport lombok.AccessLevel;\nimport lombok.Setter;\nimport net.runelite.api.Client;\nimport net.runelite.api.NPC;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.game.FishingSpot;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\n\nclass AerialFishingSpotOverlay extends Overlay {\n    private static final int ONE_TICK_AERIAL_FISHING \u003d 1;\n    private static final int THREE_TICK_AERIAL_FISHING \u003d 4;\n    private static final int FIVE_TICK_AERIAL_FISHING \u003d 7;\n    private final AerialFishingPlugin plugin;\n    private final AerialFishingConfig config;\n    private final Client client;\n    private final ItemManager itemManager;\n\n    @Setter(AccessLevel.PACKAGE)\n    private boolean hidden;\n\n    @Inject\n    private AerialFishingSpotOverlay(AerialFishingPlugin plugin, AerialFishingConfig config, Client client, ItemManager itemManager) {\n        setPosition(OverlayPosition.DYNAMIC);\n        setLayer(OverlayLayer.ABOVE_SCENE);\n        this.plugin \u003d plugin;\n        this.config \u003d config;\n        this.client \u003d client;\n        this.itemManager \u003d itemManager;\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        if (hidden) {\n            return null;\n        }\n\n        FishingSpot previousSpot \u003d null;\n        WorldPoint previousLocation \u003d null;\n        for (NPC npc : plugin.getFishingSpots()) {\n            FishingSpot spot \u003d FishingSpot.findSpot(npc.getId());\n\n            if (spot \u003d\u003d null) {\n                continue;\n            }\n            Integer distance \u003d npc.getWorldLocation().distanceTo2D(client.getLocalPlayer().getWorldLocation());\n            Color color;\n            if (distance \u003d\u003d ONE_TICK_AERIAL_FISHING) {\n                color \u003d config.Color1T();\n            }\n            else if (distance \u003c THREE_TICK_AERIAL_FISHING) {\n                color \u003d config.Color2T();\n            }\n            else if (distance \u003d\u003d THREE_TICK_AERIAL_FISHING) {\n                color \u003d config.Color3T();\n            }\n            else if (distance \u003c FIVE_TICK_AERIAL_FISHING) {\n                color \u003d config.Color4T();\n            }\n            else if (distance \u003d\u003d FIVE_TICK_AERIAL_FISHING)\n            {\n                color \u003d config.Color5T();\n            }\n            else\n            {\n                color \u003d config.Color6T();\n            }\n\n            Polygon poly \u003d npc.getCanvasTilePoly();\n\n            if (poly !\u003d null) {\n                OverlayUtil.renderPolygon(graphics, poly, color.darker());\n            }\n        }\n        return null;\n    }\n}","filePath":"src\\main\\java\\com\\AerialFishing\\AerialFishingSpotOverlay.java"},{"fileName":"AerialFishingPluginTest.java","content":"package com.AerialFishing;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class AerialFishingPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(AerialFishingPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\AerialFishing\\AerialFishingPluginTest.java"}]},{"commit":"dd4960b210198c892e79e7d9ea1d44286eed8768","repository":"https://github.com/astroferrous/happy_jewelry.git","internalName":"happy-jewelry","files":[{"fileName":"HappyJewelryConfig.java","content":"package com.happyjewelry;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"happyjewelry\")\npublic interface HappyJewelryConfig extends Config\n{\n    @ConfigItem(\n            keyName \u003d \"soundEnabled\",\n            name \u003d \"Enable sound\",\n            description \u003d \"Enable or disable the custom sound when rubbing jewelry\",\n            position \u003d 1\n    )\n    default boolean soundEnabled()\n    {\n        return true; // Default to enabled\n    }\n\n}\n","filePath":"src\\main\\java\\com\\happyjewelry\\HappyJewelryConfig.java"},{"fileName":"HappyJewelryPlugin.java","content":"package com.happyjewelry;\n\nimport net.runelite.api.events.MenuEntryAdded;\nimport net.runelite.api.MenuEntry;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.chat.ChatMessageManager;\nimport com.google.inject.Provides;\nimport net.runelite.api.Client;\nimport net.runelite.api.events.MenuOptionClicked;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport javax.sound.sampled.*;\nimport javax.inject.Inject;\nimport java.io.File;\nimport java.io.InputStream;\nimport java.io.FileInputStream;\nimport java.io.BufferedInputStream;\nimport java.nio.file.Files;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\n@PluginDescriptor(\n\t\tname \u003d \"Happy Jewelry\",\n\t\tdescription \u003d \"Plays a sound when jewelry is rubbed/tickled\",\n\t\ttags \u003d {\"jewelry\"}\n)\n\npublic class HappyJewelryPlugin extends Plugin {\n\n\tpublic static final File HAPPY_JEWELRY_FOLDER \u003d new File(RuneLite.RUNELITE_DIR, \"happy-jewelry\");\n\n\tprivate static final Logger log \u003d LoggerFactory.getLogger(HappyJewelryPlugin.class);\n\n\t@Inject\n\tprivate ChatMessageManager chatMessageManager;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate HappyJewelryConfig config;  // Inject the config\n\n\t@Override\n\tprotected void startUp() throws Exception {\n\t\tFile soundFile \u003d new File(HAPPY_JEWELRY_FOLDER, \"giggle.wav\");\n\n\t\t// Ensure the folder exists\n\t\tif (!HAPPY_JEWELRY_FOLDER.exists()) {\n\t\t\tHAPPY_JEWELRY_FOLDER.mkdirs();\n\t\t}\n\n\t\t// Copy file if it doesn\u0027t exist\n\t\tif (!soundFile.exists()) {\n\t\t\ttry (InputStream inputStream \u003d getClass().getResourceAsStream(\"/sounds/giggle.wav\")) { // Load from resources\n\t\t\t\tif (inputStream \u003d\u003d null) {\n\t\t\t\t\tthrow new IllegalArgumentException(\"Resource giggle.wav not found!\");\n\t\t\t\t}\n\t\t\t\tFiles.copy(inputStream, soundFile.toPath());\n\t\t\t}\n\t\t}\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception {\n\t\t// Code to run when the plugin stops\n\t}\n\n\t@Subscribe\n\tpublic void onMenuEntryAdded(MenuEntryAdded event) {\n\t\t// Check if the menu option is \"Rub\"\n\t\tif (event.getOption().equals(\"Rub\")) {\n\t\t\t// Get the menu entries\n\t\t\tMenuEntry[] entries \u003d client.getMenuEntries();\n\n\t\t\t// Modify the last menu entry (which corresponds to the event)\n\t\t\tMenuEntry lastEntry \u003d entries[entries.length - 1];\n\t\t\tlastEntry.setOption(\"Tickle\"); // Change \"Rub\" to \"Tickle\"\n\n\t\t\t// Set the modified entries back\n\t\t\tclient.setMenuEntries(entries);\n\t\t}\n\t}\n\n\tprivate void sendChatMessage(String message) {\n\t\tclient.addChatMessage(\n\t\t\t\tChatMessageType.GAMEMESSAGE,\n\t\t\t\t\"\",\n\t\t\t\tmessage,\n\t\t\t\tnull\n\t\t);\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOptionClicked(MenuOptionClicked event) {\n\t\tif (event.getMenuOption().equals(\"Tickle\")) { // Match \"Rub\" menu option\n\t\t\tsendChatMessage(\"That tickles!\");\n\t\t\tif (config.soundEnabled()) {  // Check if sound is enabled in the config\n\t\t\t\tplayCustomSound();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void playCustomSound() {\n\t\tfinal File f \u003d new File(HappyJewelryPlugin.HAPPY_JEWELRY_FOLDER, \"giggle.wav\");\n\n\t\tif (!f.exists()) {\n\t\t\tthrow new IllegalArgumentException(\"Sound file not found!\");\n\t\t}\n\n\t\ttry (InputStream soundFile \u003d new BufferedInputStream(new FileInputStream(f))) { // Wrap with BufferedInputStream\n\t\t\tAudioInputStream audioInputStream \u003d AudioSystem.getAudioInputStream(soundFile);\n\t\t\tClip clip \u003d AudioSystem.getClip();\n\t\t\tclip.open(audioInputStream);\n\n\t\t\t// Add a listener to release resources when the sound finishes\n\t\t\tclip.addLineListener(event -\u003e {\n\t\t\t\tif (event.getType() \u003d\u003d LineEvent.Type.STOP) {\n\t\t\t\t\tclip.close();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tclip.start(); // Play the sound\n\n\t\t} catch (Exception e) {\n\t\t\tlog.error(\"Oopsies!\", e);\n\t\t}\n\t}\n\n\t@Provides\n\tHappyJewelryConfig provideConfig(ConfigManager configManager) {\n\t\treturn configManager.getConfig(HappyJewelryConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\happyjewelry\\HappyJewelryPlugin.java"},{"fileName":"HappyJewelryPluginTest.java","content":"package com.happyjewelry;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\nimport com.happyjewelry.HappyJewelryPlugin;\n\npublic class HappyJewelryPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(HappyJewelryPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}\n","filePath":"src\\test\\java\\com\\happyjewelry\\HappyJewelryPluginTest.java"}]},{"commit":"e4fb6440249b7ea206045881ecf8167838c4e17a","repository":"https://github.com/jamesdrudolph/Discord-Death-Notifications.git","internalName":"discord-death-notifications","files":[{"fileName":"DeathNotificationsConfig.java","content":"package moe.cuteanimegirls.discorddeathnotifications;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"discorddeathnotifications\")\npublic interface DeathNotificationsConfig extends Config\n{\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"webhook\",\n\t\t\tname \u003d \"Webhook URL\",\n\t\t\tdescription \u003d \"The Discord Webhook URL to send messages to.\",\n\t\t\tposition \u003d 0\n\t)\n\tString webhook();\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"deathMessage\",\n\t\t\tname \u003d \"Death message\",\n\t\t\tdescription \u003d \"The message that will be included with the screenshot\",\n\t\t\tposition \u003d 1\n\t)\n\tdefault String deathMessage() {\n\t\treturn \"died lmfao.\";\n\t}\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"includeName\",\n\t\t\tname \u003d \"Include player name\",\n\t\t\tdescription \u003d \"Include player name at the start of the death notification message\",\n\t\t\tposition \u003d 2\n\t)\n\tdefault boolean includeName()\n\t{\n\t\treturn true;\n\t}\n}\n","filePath":"src\\main\\java\\moe\\cuteanimegirls\\discorddeathnotifications\\DeathNotificationsConfig.java"},{"fileName":"DeathNotificationsPlugin.java","content":"package moe.cuteanimegirls.discorddeathnotifications;\n\nimport com.google.common.base.Strings;\nimport com.google.inject.Provides;\n\nimport javax.imageio.ImageIO;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Actor;\nimport net.runelite.api.Client;\nimport net.runelite.api.Player;\nimport net.runelite.api.events.ActorDeath;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.DrawManager;\nimport okhttp3.*;\n\nimport java.awt.image.BufferedImage;\nimport java.io.ByteArrayOutputStream;\nimport java.io.IOException;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.stream.Collectors;\n\nimport static net.runelite.http.api.RuneLiteAPI.GSON;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Discord Death Notifications\"\n)\npublic class DeathNotificationsPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate DeathNotificationsConfig config;\n\n\t@Inject\n\tprivate OkHttpClient okHttpClient;\n\n\t@Inject\n\tprivate DrawManager drawManager;\n\n\t@Provides\n\tDeathNotificationsConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(DeathNotificationsConfig.class);\n\t}\n\n\t@Subscribe\n\tpublic void onActorDeath(ActorDeath actorDeath)\n\t{\n\t\tActor actor \u003d actorDeath.getActor();\n\t\tif (actor instanceof Player)\n\t\t{\n\t\t\tPlayer player \u003d (Player) actor;\n\t\t\tif (player \u003d\u003d client.getLocalPlayer())\n\t\t\t{\n\t\t\t\tsendMessage();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void sendMessage()\n\t{\n\t\tString playerName \u003d client.getLocalPlayer().getName();\n\n\t\tString deathString;\n\n\t\tif (config.includeName())\n\t\t{\n\t\t\tdeathString \u003d String.format(\"%s %s\", playerName, config.deathMessage());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdeathString \u003d config.deathMessage();\n\t\t}\n\n\t\tDiscordWebhookBody discordWebhookBody \u003d new DiscordWebhookBody();\n\t\tdiscordWebhookBody.setContent(deathString);\n\t\tsendWebhook(discordWebhookBody);\n\t}\n\n\tprivate void sendWebhook(DiscordWebhookBody discordWebhookBody)\n\t{\n\t\tgetWebHookUrls().forEach(webhookUrl -\u003e {\n\t\t\tHttpUrl url \u003d HttpUrl.parse(webhookUrl);\n\t\t\tMultipartBody.Builder requestBodyBuilder \u003d new MultipartBody.Builder()\n\t\t\t\t\t.setType(MultipartBody.FORM)\n\t\t\t\t\t.addFormDataPart(\"payload_json\", GSON.toJson(discordWebhookBody));\n\n\t\t\tsendWebhookWithScreenshot(url, requestBodyBuilder);\n\t\t});\n\t}\n\n\tprivate void sendWebhookWithScreenshot(HttpUrl url, MultipartBody.Builder requestBodyBuilder)\n\t{\n\t\tdrawManager.requestNextFrameListener(image -\u003e\n\t\t{\n\t\t\tBufferedImage bufferedImage \u003d (BufferedImage) image;\n\t\t\tbyte[] imageBytes;\n\t\t\ttry\n\t\t\t{\n\t\t\t\timageBytes \u003d convertImageToByteArray(bufferedImage);\n\t\t\t}\n\t\t\tcatch (IOException e)\n\t\t\t{\n\t\t\t\tlog.warn(\"Error converting image to byte array\", e);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\trequestBodyBuilder.addFormDataPart(\"file\", \"image.png\",\n\t\t\t\t\tRequestBody.create(MediaType.parse(\"image/png\"), imageBytes));\n\t\t\tbuildRequestAndSend(url, requestBodyBuilder);\n\t\t});\n\t}\n\n\tprivate void buildRequestAndSend(HttpUrl url, MultipartBody.Builder requestBodyBuilder)\n\t{\n\t\tRequestBody requestBody \u003d requestBodyBuilder.build();\n\t\tRequest request \u003d new Request.Builder()\n\t\t\t\t.url(url)\n\t\t\t\t.post(requestBody)\n\t\t\t\t.build();\n\t\tsendRequest(request);\n\t}\n\n\tprivate void sendRequest(Request request)\n\t{\n\t\tokHttpClient.newCall(request).enqueue(new Callback()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void onFailure(Call call, IOException e)\n\t\t\t{\n\t\t\t\tlog.debug(\"Error submitting webhook\", e);\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void onResponse(Call call, Response response) throws IOException\n\t\t\t{\n\t\t\t\tresponse.close();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate static byte[] convertImageToByteArray(BufferedImage bufferedImage) throws IOException\n\t{\n\t\tByteArrayOutputStream byteArrayOutputStream \u003d new ByteArrayOutputStream();\n\t\tImageIO.write(bufferedImage, \"png\", byteArrayOutputStream);\n\t\treturn byteArrayOutputStream.toByteArray();\n\t}\n\n\tprivate List\u003cString\u003e getWebHookUrls()\n\t{\n\t\treturn Arrays.stream(config.webhook().split(\"\\n\"))\n\t\t\t\t.filter(u -\u003e u.length() \u003e 0)\n\t\t\t\t.map(String::trim)\n\t\t\t\t.collect(Collectors.toList());\n\t}\n}\n","filePath":"src\\main\\java\\moe\\cuteanimegirls\\discorddeathnotifications\\DeathNotificationsPlugin.java"},{"fileName":"DiscordWebhookBody.java","content":"package moe.cuteanimegirls.discorddeathnotifications;\n\nimport lombok.Data;\n\n@Data\nclass DiscordWebhookBody\n{\n    private String content;\n    private Embed embed;\n\n    @Data\n    static class Embed\n    {\n        final UrlEmbed image;\n    }\n\n    @Data\n    static class UrlEmbed\n    {\n        final String url;\n    }\n}\n","filePath":"src\\main\\java\\moe\\cuteanimegirls\\discorddeathnotifications\\DiscordWebhookBody.java"},{"fileName":"DeathNotificationsPluginTest.java","content":"package moe.cuteanimegirls.discorddeathnotifications;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class DeathNotificationsPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(DeathNotificationsPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\moe\\cuteanimegirls\\discorddeathnotifications\\DeathNotificationsPluginTest.java"}]},{"commit":"f7c3d8594ec69a001e4f3338fd1ca3be0cfbadc4","repository":"https://github.com/Cyborger1/marks-of-grace-counter.git","internalName":"marks-of-grace-counter","files":[{"fileName":"InstantCountTuple.java","content":"/*\n * Copyright (c) 2024, Cyborger1\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.mogcounter;\n\nimport java.time.Instant;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\n\n@Data\n@AllArgsConstructor\npublic class InstantCountTuple\n{\n\tprivate Instant instant;\n\tprivate int count;\n}\n","filePath":"src\\main\\java\\com\\mogcounter\\InstantCountTuple.java"},{"fileName":"MOGCounterConfig.java","content":"/*\n * Copyright (c) 2020, Cyborger1\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.mogcounter;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\nimport net.runelite.client.config.Notification;\nimport net.runelite.client.config.Range;\nimport net.runelite.client.config.Units;\n\n@ConfigGroup(\"mogcounter\")\npublic interface MOGCounterConfig extends Config\n{\n\t@ConfigSection(\n\t\tname \u003d \"Experimental Settings\",\n\t\tdescription \u003d \"Settings that are intended to help with specific use-cases and may require further tweaking\",\n\t\tposition \u003d 100,\n\t\tclosedByDefault \u003d true\n\t)\n\tString experimentalSection \u003d \"experimental\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showMarkCount\",\n\t\tname \u003d \"Show Overlay\",\n\t\tdescription \u003d \"Show/Hide the Marks of Grace Counter (It keeps counting)\",\n\t\tposition \u003d 1\n\t)\n\tdefault boolean showMarkCount()\n\t{\n\t\treturn true;\n\t}\n\n\t@Range\n\t(\n\t\tmin \u003d 1,\n\t\tmax \u003d 60\n\t)\n\t@ConfigItem(\n\t\tkeyName \u003d \"markTimeout\",\n\t\tname \u003d \"Reset Overlay Time\",\n\t\tdescription \u003d \"Time until the Marks of Grace Counter hides/resets (Uses \u0027Last Spawn Time\u0027)\",\n\t\tposition \u003d 2\n\t)\n\t@Units(Units.MINUTES)\n\tdefault int markTimeout()\n\t{\n\t\treturn 10;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showMarksSpawned\",\n\t\tname \u003d \"Show On Ground Counter\",\n\t\tdescription \u003d \"Shows how many Marks are currently on the ground (Recommended for Ardougne Rooftops)\",\n\t\tposition \u003d 3\n\t)\n\tdefault boolean showMarksSpawned()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showMarkLastSpawn\",\n\t\tname \u003d \"Show Time Since Last Spawn\",\n\t\tdescription \u003d \"Shows the time since the last Mark of Grace spawned\",\n\t\tposition \u003d 4\n\t)\n\tdefault boolean showMarkLastSpawn()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showMarksPerHour\",\n\t\tname \u003d \"Show Spawns per Hour\",\n\t\tdescription \u003d \"Shows the estimated amount of Mark spawns per hour (After getting 2 spawns)\",\n\t\tposition \u003d 5\n\t)\n\tdefault boolean showMarksPerHour()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"useLapFinishTiming\",\n\t\tname \u003d \"Use Lap Finish Mark Timing\",\n\t\tdescription \u003d \"If checked, the last mark spawned timer will be based on the moment of the last finished lap. Otherwise, timer is based on the moment the mark is seen.\",\n\t\tposition \u003d 6\n\t)\n\tdefault boolean useLapFinishTiming()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"markDespawnNotification\",\n\t\tname \u003d \"Notify Before Mark Despawn\",\n\t\tdescription \u003d \"Sends a notification if enough time has passed since a Mark spawned. Mostly intended for use with the Ardougne course.\",\n\t\tposition \u003d 7\n\t)\n\tdefault Notification markDespawnNotification()\n\t{\n\t\treturn Notification.OFF;\n\t}\n\n\t@Range\n\t(\n\t\tmin \u003d 60,\n\t\tmax \u003d 600\n\t)\n\t@ConfigItem(\n\t\tkeyName \u003d \"markDespawnNotificationTime\",\n\t\tname \u003d \"Despawn Notification Time\",\n\t\tdescription \u003d \"Time until a despawn warning notification is sent for any given Mark stack\",\n\t\tposition \u003d 8\n\t)\n\t@Units(Units.SECONDS)\n\tdefault int markDespawnNotificationTime()\n\t{\n\t\treturn 480;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showMarkLastSpawnMinute\",\n\t\tname \u003d \"Show Time Since Last Spawn (M)\",\n\t\tdescription \u003d \"Shows the time since the beginning of the minute of \u0027Last Spawn\u0027. Intended to help time exact Mark spawns along with \u0027Lap Finish Mark Timing\u0027.\",\n\t\tposition \u003d 1,\n\t\tsection \u003d experimentalSection\n\t)\n\tdefault boolean showMarkLastSpawnMinute()\n\t{\n\t\treturn false;\n\t}\n\n\t@Range(\n\t\tmin \u003d -60000,\n\t\tmax \u003d 60000\n\t)\n\t@ConfigItem(\n\t\tkeyName \u003d \"markLastSpawnMinuteOffset\",\n\t\tname \u003d \"Last Spawn (M) Offset\",\n\t\tdescription \u003d \"Use to adjust the start of the minute if your ticks are not lining up correctly\",\n\t\tposition \u003d 2,\n\t\tsection \u003d experimentalSection\n\t)\n\t@Units(value \u003d Units.MILLISECONDS)\n\tdefault int markLastSpawnMinuteOffset()\n\t{\n\t\treturn 0;\n\t}\n}\n","filePath":"src\\main\\java\\com\\mogcounter\\MOGCounterConfig.java"},{"fileName":"MOGCounterOverlay.java","content":"/*\n * Copyright (c) 2020, Cyborger1\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.mogcounter;\n\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.time.temporal.ChronoUnit;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayMenuEntry;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.LineComponent;\nimport net.runelite.client.ui.overlay.components.TitleComponent;\nimport javax.inject.Inject;\nimport java.time.Duration;\nimport java.time.Instant;\nimport static net.runelite.api.MenuAction.RUNELITE_OVERLAY;\nimport static net.runelite.api.MenuAction.RUNELITE_OVERLAY_CONFIG;\nimport static net.runelite.client.ui.overlay.OverlayManager.OPTION_CONFIGURE;\n\nclass MOGCounterOverlay extends OverlayPanel\n{\n\tstatic final String MARK_CLEAR \u003d \"Clear\";\n\tstatic final String GROUND_RESET \u003d \"Reset Ground Counter\";\n\tprivate final MOGCounterPlugin plugin;\n\tprivate final MOGCounterConfig config;\n\n\t@Inject\n\tprivate MOGCounterOverlay(MOGCounterPlugin plugin, MOGCounterConfig config)\n\t{\n\t\tsuper(plugin);\n\t\tsetPosition(OverlayPosition.TOP_LEFT);\n\t\tsetPriority(PRIORITY_LOW);\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t\tgetMenuEntries().add(new OverlayMenuEntry(RUNELITE_OVERLAY_CONFIG, OPTION_CONFIGURE, \"Mark overlay\"));\n\t\tgetMenuEntries().add(new OverlayMenuEntry(RUNELITE_OVERLAY, GROUND_RESET, \"Mark overlay\"));\n\t\tgetMenuEntries().add(new OverlayMenuEntry(RUNELITE_OVERLAY, MARK_CLEAR, \"Mark overlay\"));\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (!config.showMarkCount() ||\n\t\t\tplugin.getLastMarkSpawnTime() \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tpanelComponent.getChildren().add(TitleComponent.builder().text(\"Marks of Grace\").build());\n\n\t\taddLine(\"Total Spawns:\", plugin.getMarkSpawnEvents());\n\n\t\tif (config.showMarksSpawned())\n\t\t{\n\t\t\taddLine(\"# on Ground:\", plugin.getMarksOnGround());\n\t\t}\n\n\t\tif (config.showMarkLastSpawn())\n\t\t{\n\t\t\tlong s \u003d Duration.between(plugin.getLastMarkSpawnTime(), Instant.now()).getSeconds();\n\t\t\taddLine(\"Last Spawn:\", formatSeconds(s));\n\t\t}\n\n\t\tif (config.showMarkLastSpawnMinute())\n\t\t{\n\t\t\tint offset \u003d config.markLastSpawnMinuteOffset();\n\t\t\tInstant t \u003d plugin.getLastMarkSpawnTime()\n\t\t\t\t.minusMillis(offset)\n\t\t\t\t.truncatedTo(ChronoUnit.MINUTES)\n\t\t\t\t.plusMillis(offset);\n\t\t\tlong s \u003d Duration.between(t, Instant.now()).getSeconds();\n\t\t\taddLine(\"Last Spawn (M):\", formatSeconds(s));\n\t\t}\n\n\t\tif (config.showMarksPerHour() \u0026\u0026 plugin.getMarkSpawnEvents() \u003e\u003d 2)\n\t\t{\n\t\t\taddLine(\"Spawns/Hour:\", plugin.getSpawnsPerHour());\n\t\t}\n\n\n\t\treturn super.render(graphics);\n\t}\n\n\tprivate void addLine(String left, String right)\n\t{\n\t\tpanelComponent.getChildren().add(\n\t\t\tLineComponent.builder()\n\t\t\t\t.left(left)\n\t\t\t\t.right(right)\n\t\t\t\t.build());\n\t}\n\n\tprivate void addLine(String left, int right)\n\t{\n\t\taddLine(left, Integer.toString(right));\n\t}\n\n\tprivate String formatSeconds(long s)\n\t{\n\t\treturn String.format(\"%d:%02d\", (s % 3600) / 60, (s % 60));\n\t}\n}\n","filePath":"src\\main\\java\\com\\mogcounter\\MOGCounterOverlay.java"},{"fileName":"MOGCounterPlugin.java","content":"/*\n * Copyright (c) 2020, Cyborger1\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.mogcounter;\n\nimport com.google.common.collect.EvictingQueue;\nimport com.google.common.collect.ImmutableSet;\nimport com.google.inject.Provides;\nimport java.time.Duration;\nimport java.time.Instant;\nimport java.time.temporal.ChronoUnit;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.function.Supplier;\nimport javax.inject.Inject;\n\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.ItemID;\nimport net.runelite.api.Player;\nimport static net.runelite.api.Skill.AGILITY;\nimport net.runelite.api.TileItem;\nimport net.runelite.api.MenuAction;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.ItemDespawned;\nimport net.runelite.api.events.ItemSpawned;\nimport net.runelite.api.events.StatChanged;\nimport net.runelite.client.Notifier;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.OverlayMenuClicked;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.ui.overlay.OverlayMenuEntry;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Marks of Grace Counter\",\n\tdescription \u003d \"Counts Marks of Grace spawns\",\n\ttags \u003d {\"marks\", \"grace\", \"agility\", \"counter\"}\n)\npublic class MOGCounterPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate Notifier notifier;\n\n\t@Inject\n\tprivate MOGCounterConfig config;\n\n\t@Inject\n\tprivate MOGCounterOverlay mogOverlay;\n\n\t@Provides\n\tMOGCounterConfig getConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(MOGCounterConfig.class);\n\t}\n\n\t// From Agility plugin, some may not be relevant to this plugin but ehh\n\tprivate final Set\u003cWorldPoint\u003e courseEndpoints \u003d ImmutableSet.of(\n\t\tnew WorldPoint(2484, 3437, 0), // Gnome 1\n\t\tnew WorldPoint(2487, 3437, 0), // Gnome 2\n\t\tnew WorldPoint(1554, 3640, 0), // Shayzien Basic\n\t\tnew WorldPoint(3103, 3261, 0), // Draynor\n\t\tnew WorldPoint(3299, 3194, 0), // Al-Kharid\n\t\tnew WorldPoint(3364, 2830, 0), // Pyramid\n\t\tnew WorldPoint(3236, 3417, 0), // Varrock\n\t\tnew WorldPoint(2652, 4039, 1), // Penguin\n\t\tnew WorldPoint(2543, 3553, 0), // Barbarian\n\t\tnew WorldPoint(3510, 3485, 0), // Canifis\n\t\tnew WorldPoint(2770, 2747, 0), // Ape Atoll\n\t\tnew WorldPoint(1522, 3625, 0), // Shayzien Advanced\n\t\tnew WorldPoint(3029, 3332, 0), // Falador 1\n\t\tnew WorldPoint(3029, 3333, 0), // Falador 2\n\t\tnew WorldPoint(3029, 3334, 0), // Falador 3\n\t\tnew WorldPoint(3029, 3335, 0), // Falador 4\n\t\tnew WorldPoint(2994, 3933, 0), // Wilderness\n\t\tnew WorldPoint(3528, 9873, 0), // Werewolf\n\t\tnew WorldPoint(2704, 3464, 0), // Seers\n\t\tnew WorldPoint(3363, 2998, 0), // Pollnivneach\n\t\tnew WorldPoint(2653, 3676, 0), // Relleka\n\t\tnew WorldPoint(3240, 6109, 0), // Prifddinas\n\t\tnew WorldPoint(2668, 3297, 0)  // Ardougne\n\t);\n\n\t@Getter\n\tprivate int marksOnGround;\n\t@Getter\n\tprivate Instant lastMarkSpawnTime;\n\t@Getter\n\tprivate Instant lastLapTime;\n\t@Getter\n\tprivate int markSpawnEvents;\n\t@Getter\n\tprivate int spawnsPerHour;\n\n\tprivate final Map\u003cWorldPoint, InstantCountTuple\u003e markTiles \u003d new HashMap\u003c\u003e();\n\tprivate final Set\u003cWorldPoint\u003e potentialDespawns \u003d new HashSet\u003c\u003e();\n\tprivate final Set\u003cWorldPoint\u003e ignoreTiles \u003d new HashSet\u003c\u003e();\n\tprivate boolean doCheckGroundItems;\n\tprivate Instant lastDespawnNotified;\n\tprivate final EvictingQueue\u003cDuration\u003e markSpawnTimes \u003d EvictingQueue.create(20);\n\n\tprivate final Supplier\u003cInstant\u003e markSpawnTimeSupplier \u003d () -\u003e lastLapTime !\u003d null \u0026\u0026 config.useLapFinishTiming() ? lastLapTime : Instant.now();\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\toverlayManager.add(mogOverlay);\n\t\tclearCounters();\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(mogOverlay);\n\t\tclearCounters();\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged)\n\t{\n\t\tswitch (gameStateChanged.getGameState())\n\t\t{\n\t\t\tcase HOPPING:\n\t\t\tcase LOGIN_SCREEN:\n\t\t\t\tclearCounters();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onStatChanged(StatChanged statChanged)\n\t{\n\t\tif (statChanged.getSkill() \u003d\u003d AGILITY\n\t\t\t\u0026\u0026 courseEndpoints.contains(client.getLocalPlayer().getWorldLocation()))\n\t\t{\n\t\t\tlastLapTime \u003d Instant.now();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onItemSpawned(ItemSpawned itemSpawned)\n\t{\n\t\tfinal TileItem item \u003d itemSpawned.getItem();\n\t\tif (item.getId() !\u003d ItemID.MARK_OF_GRACE)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tPlayer player \u003d client.getLocalPlayer();\n\t\tif (player \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tWorldPoint wp \u003d itemSpawned.getTile().getWorldLocation();\n\t\t// Means we had a despawn/respawn in the same tick, do not clear in onGameTick\n\t\tpotentialDespawns.remove(wp);\n\n\t\tif (wp.equals(player.getWorldLocation()) || ignoreTiles.contains(wp))\n\t\t{\n\t\t\tignoreTiles.add(wp);\n\t\t\treturn;\n\t\t}\n\n\t\tInstantCountTuple tuple;\n\t\tif (!markTiles.containsKey(wp))\n\t\t{\n\t\t\ttuple \u003d new InstantCountTuple(null, 0);\n\t\t\tmarkTiles.put(wp, tuple);\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttuple \u003d markTiles.get(wp);\n\t\t}\n\n\t\tint newCount \u003d item.getQuantity();\n\t\tif (newCount !\u003d tuple.getCount())\n\t\t{\n\t\t\tif (newCount \u003e tuple.getCount())\n\t\t\t{\n\t\t\t\ttuple.setInstant(markSpawnTimeSupplier.get());\n\t\t\t}\n\t\t\ttuple.setCount(newCount);\n\t\t\tdoCheckGroundItems \u003d true;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onItemDespawned(ItemDespawned itemDespawned)\n\t{\n\t\tfinal TileItem item \u003d itemDespawned.getItem();\n\t\tif (item.getId() !\u003d ItemID.MARK_OF_GRACE)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tPlayer player \u003d client.getLocalPlayer();\n\t\tif (player \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tWorldPoint wp \u003d itemDespawned.getTile().getWorldLocation();\n\t\t// Marks are despawned then immediately spawned again when changing floor\n\t\t// Only remove from markTiles if no respawn seen before onGameTick\n\t\tpotentialDespawns.add(wp);\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick tick)\n\t{\n\t\t// Check session timeout\n\t\tif (lastMarkSpawnTime !\u003d null)\n\t\t{\n\t\t\tInstant expire \u003d Instant.now().minus(config.markTimeout(), ChronoUnit.MINUTES);\n\t\t\tif (lastMarkSpawnTime.isBefore(expire))\n\t\t\t{\n\t\t\t\tclearCounters();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Some marks were fully despawned, clean them up here\n\t\tif (!potentialDespawns.isEmpty())\n\t\t{\n\t\t\tPlayer player \u003d client.getLocalPlayer();\n\t\t\tfor (WorldPoint wp : potentialDespawns)\n\t\t\t{\n\t\t\t\tmarkTiles.remove(wp);\n\t\t\t\tif (player !\u003d null \u0026\u0026 wp.equals(player.getWorldLocation()))\n\t\t\t\t{\n\t\t\t\t\tignoreTiles.remove(wp);\n\t\t\t\t}\n\t\t\t}\n\t\t\tpotentialDespawns.clear();\n\t\t\tdoCheckGroundItems \u003d true;\n\t\t}\n\n\t\tcheckMarkSpawned();\n\t\tnotifyDespawns();\n\t}\n\n\t@Subscribe\n\tpublic void onOverlayMenuClicked(OverlayMenuClicked overlayMenuClicked)\n\t{\n\t\tOverlayMenuEntry overlayMenuEntry \u003d overlayMenuClicked.getEntry();\n\t\tif (overlayMenuEntry.getMenuAction() \u003d\u003d MenuAction.RUNELITE_OVERLAY\n\t\t\t\u0026\u0026 overlayMenuClicked.getOverlay() \u003d\u003d mogOverlay)\n\t\t{\n\t\t\tswitch (overlayMenuClicked.getEntry().getOption())\n\t\t\t{\n\t\t\t\tcase MOGCounterOverlay.MARK_CLEAR:\n\t\t\t\t\tclearCounters();\n\t\t\t\t\tbreak;\n\t\t\t\tcase MOGCounterOverlay.GROUND_RESET:\n\t\t\t\t\tclearSpawnedMarks();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate synchronized void checkMarkSpawned()\n\t{\n\t\tif (!doCheckGroundItems)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tdoCheckGroundItems \u003d false;\n\n\t\tint newMarksOnGround \u003d markTiles.values().stream().mapToInt(InstantCountTuple::getCount).sum();\n\n\t\tif (newMarksOnGround \u003e marksOnGround)\n\t\t{\n\t\t\tInstant spawnMoment \u003d markSpawnTimeSupplier.get();\n\t\t\tif (lastMarkSpawnTime !\u003d null)\n\t\t\t{\n\t\t\t\tmarkSpawnTimes.add(Duration.between(lastMarkSpawnTime, spawnMoment));\n\t\t\t\tcalculateMarksPerHour();\n\t\t\t}\n\t\t\tlastMarkSpawnTime \u003d spawnMoment;\n\t\t\tmarkSpawnEvents++;\n\t\t}\n\n\t\tmarksOnGround \u003d newMarksOnGround;\n\t}\n\n\tprivate void notifyDespawns()\n\t{\n\t\tif (marksOnGround \u003c\u003d 0 || markTiles.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tInstant expire \u003d Instant.now().minusSeconds(config.markDespawnNotificationTime());\n\t\tint despawnStacks \u003d 0;\n\t\tint despawnMarks \u003d 0;\n\t\tInstant mostRecentDespawnTime \u003d Instant.MIN;\n\t\tfor (InstantCountTuple entry : markTiles.values())\n\t\t{\n\t\t\tint count \u003d entry.getCount();\n\t\t\tInstant spawn \u003d entry.getInstant();\n\n\t\t\tif (count \u003c\u003d 0 || spawn \u003d\u003d null\n\t\t\t\t|| spawn.compareTo(lastDespawnNotified) \u003c\u003d 0)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (spawn.isBefore(expire))\n\t\t\t{\n\t\t\t\tif (spawn.isAfter(mostRecentDespawnTime))\n\t\t\t\t{\n\t\t\t\t\tmostRecentDespawnTime \u003d spawn;\n\t\t\t\t}\n\t\t\t\tdespawnStacks++;\n\t\t\t\tdespawnMarks +\u003d count;\n\t\t\t}\n\t\t}\n\n\t\tif (despawnStacks \u003e 0)\n\t\t{\n\t\t\tlastDespawnNotified \u003d mostRecentDespawnTime;\n\t\t\tString text;\n\t\t\tif (markTiles.size() \u003e 1)\n\t\t\t{\n\t\t\t\ttext \u003d despawnStacks \u003e 1 ?\n\t\t\t\t\t// Mostly here if plugin is turned on with multiple stacks present I guess.\n\t\t\t\t\tString.format(\"%d of your Marks of Grace stacks are\", despawnStacks)\n\t\t\t\t\t: \"One of your Marks of Grace stacks is\";\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttext \u003d \"Your Marks of Grace stack is\";\n\t\t\t}\n\t\t\ttext +\u003d String.format(\" about to despawn! (%d Mark%s)\", despawnMarks, despawnMarks !\u003d 1 ? \"s\" : \"\");\n\t\t\tnotifier.notify(config.markDespawnNotification(), text);\n\t\t}\n\t}\n\n\tprivate void calculateMarksPerHour()\n\t{\n\t\tint sz \u003d markSpawnTimes.size();\n\t\tif (sz \u003e 0)\n\t\t{\n\t\t\tDuration sum \u003d markSpawnTimes.stream().reduce(Duration.ZERO, Duration::plus);\n\t\t\tspawnsPerHour \u003d (int) (Duration.ofHours(1).toMillis() / sum.dividedBy(sz).toMillis());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tspawnsPerHour \u003d 0;\n\t\t}\n\t}\n\n\tpublic void clearCounters()\n\t{\n\t\tlastMarkSpawnTime \u003d null;\n\t\tlastLapTime \u003d null;\n\t\tmarkSpawnTimes.clear();\n\t\tmarksOnGround \u003d 0;\n\t\tmarkSpawnEvents \u003d 0;\n\t\tspawnsPerHour \u003d 0;\n\t\tmarkTiles.clear();\n\t\tignoreTiles.clear();\n\t\tpotentialDespawns.clear();\n\t\tdoCheckGroundItems \u003d false;\n\t\tlastDespawnNotified \u003d Instant.MIN;\n\t}\n\n\tpublic void clearSpawnedMarks()\n\t{\n\t\tmarksOnGround \u003d 0;\n\t\tmarkTiles.clear();\n\t\tignoreTiles.clear();\n\t\tpotentialDespawns.clear();\n\t\tdoCheckGroundItems \u003d false;\n\t\tlastDespawnNotified \u003d Instant.MIN;\n\t}\n}\n","filePath":"src\\main\\java\\com\\mogcounter\\MOGCounterPlugin.java"},{"fileName":"MOGCounterPluginTest.java","content":"/*\n * Copyright (c) 2020, Cyborger1\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.mogcounter;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class MOGCounterPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(MOGCounterPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\mogcounter\\MOGCounterPluginTest.java"}]},{"commit":"322aa44dc1d353206f99c9a8618aec4b77315302","repository":"https://github.com/sqlskid/motivation.git","internalName":"motivation-plugin","files":[{"fileName":"MotivationPlugin.java","content":"package cf.sqlskid.motivation;\n\nimport net.runelite.api.AnimationID;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.Player;\nimport net.runelite.api.events.AnimationChanged;\nimport net.runelite.api.events.PlayerDespawned;\nimport net.runelite.client.chat.ChatColorType;\nimport net.runelite.client.chat.ChatMessageBuilder;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.chat.QueuedMessage;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\n\nimport javax.inject.Inject;\nimport java.util.Random;\nimport java.util.concurrent.ThreadLocalRandom;\n\n\n@PluginDescriptor(\n        name \u003d \"Motivation\",\n        description \u003d \"Get a little bit of motivation after death.\",\n        tags \u003d {\"motivation\", \"death\", \"die\", \"pvp\"}\n)\npublic class MotivationPlugin extends Plugin {\n\n    private final String[] messages \u003d new String[]{\"Don\u0027t give up!\",\"Never give up!\",\"You can do it!\", \"Stay determined!\", \"Follow your dreams!\", \"Better luck next time!\"};\n\n    @Inject\n    public Client client;\n\n    @Inject\n    public ChatMessageManager chatMessageManager;\n\n\n    @Subscribe\n    public void onAnimationChanged(AnimationChanged event){\n        if(!(event.getActor() instanceof Player)) return;\n        if(event.getActor().getHealthRatio() !\u003d 0) return;\n        if(event.getActor().getAnimation() !\u003d AnimationID.DEATH) return;\n        if(event.getActor() !\u003d client.getLocalPlayer()) return;\n\n        int messageNumber \u003d ThreadLocalRandom.current().nextInt(1, messages.length) - 1;\n\n        sendChatMessage(messages[messageNumber]);\n    }\n\n    private void sendChatMessage(String chatMessage)\n    {\n        final String message \u003d new ChatMessageBuilder()\n                .append(ChatColorType.HIGHLIGHT)\n                .append(chatMessage)\n                .build();\n\n        chatMessageManager.queue(\n                QueuedMessage.builder()\n                        .type(ChatMessageType.CONSOLE)\n                        .runeLiteFormattedMessage(message)\n                        .build());\n    }\n}\n","filePath":"src\\main\\java\\cf\\sqlskid\\motivation\\MotivationPlugin.java"}]},{"commit":"eca986eb992260157b117716c6921b46044ed06b","repository":"https://github.com/TripStank/NoStalactites.git","internalName":"no-stalactites","files":[{"fileName":"NoStalactitesConfig.java","content":"package com.nostalactites;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n/**\n * Configuration interface for the No Stalactites plugin.\n * \u003cp\u003e\n * This interface defines all the configuration options available for the plugin,\n * including toggles for hiding different types of cave formations and debug features.\n */\n@ConfigGroup(\"nostalactites\")\npublic interface NoStalactitesConfig extends Config\n{\n    /**\n     * Determines whether to hide stalactite objects in caves.\n     *\n     * @return true if stalactites should be hidden, false otherwise\n     */\n    @ConfigItem(\n        keyName \u003d \"hideStalactites\",\n        name \u003d \"Hide stalactites\",\n        description \u003d \"Hide hanging stalactites from cave ceilings\"\n    )\n    default boolean hideStalactites()\n    {\n        return true;\n    }\n\n    /**\n     * Determines whether to hide column objects in caves.\n     *\n     * @return true if columns should be hidden, false otherwise\n     */\n    @ConfigItem(\n        keyName \u003d \"hideColumns\",\n        name \u003d \"Hide columns\",\n        description \u003d \"Hide cave support columns\"\n    )\n    default boolean hideColumns()\n    {\n        return true;\n    }\n    \n    /**\n     * Determines whether to replace hidden columns with decorative rock formations.\n     *\n     * @return true if columns should be replaced with rocks, false to simply hide them\n     */\n    @ConfigItem(\n        keyName \u003d \"replaceWithRocks\",\n        name \u003d \"Replace with rocks\",\n        description \u003d \"Replace hidden columns with rock formations (Credit: u/BioMasterZap)\"\n    )\n    default boolean replaceWithRocks()\n    {\n        return true;\n    }\n    \n    /**\n     * The model ID used for rock formations when replacing columns.\n     * This is the base model ID for the decorative rock formation.\n     */\n    int ROCK_FORMATION_ID \u003d 1784;\n}\n","filePath":"src\\main\\java\\com\\nostalactites\\NoStalactitesConfig.java"},{"fileName":"NoStalactitesPlugin.java","content":"package com.nostalactites;\n\nimport com.google.inject.Provides;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameObject;\nimport net.runelite.api.Model;\nimport net.runelite.api.ObjectComposition;\nimport net.runelite.api.RuneLiteObject;\nimport net.runelite.api.Scene;\nimport net.runelite.api.Tile;\nimport net.runelite.api.WorldView;\nimport net.runelite.api.events.DecorativeObjectSpawned;\nimport net.runelite.api.events.GameObjectSpawned;\nimport net.runelite.api.events.GroundObjectSpawned;\nimport net.runelite.api.events.WallObjectSpawned;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.api.GameState;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\n\n/**\n * A RuneLite plugin that hides cave stalactites and columns, with an option to replace\n * columns with a stalagmite floor pattern for better visibility.\n * \n * \u003cp\u003eFeatures:\n * \u003cul\u003e\n *   \u003cli\u003eHides various cave stalactites and column objects\u003c/li\u003e\n *   \u003cli\u003eOptionally replaces hidden columns with decorative stalagmite models\u003c/li\u003e\n * \u003c/ul\u003e\n */\n@Slf4j\n@PluginDescriptor(\n    name \u003d \"No Stalactites\",\n    description \u003d \"Hide cave stalactites and columns. Optionally swap columns with a stalagmite floor pattern.\",\n    tags \u003d {\"object\", \"hide\", \"cave\"}\n)\npublic class NoStalactitesPlugin extends Plugin\n{\n    @Inject\n    private Client client;\n\n    @Inject\n    private ClientThread clientThread;\n\n    @Inject\n    private NoStalactitesConfig config;\n\n    /**\n     * Set of object IDs that should be hidden based on configuration.\n     */\n    private final Set\u003cInteger\u003e hiddenIds \u003d new HashSet\u003c\u003e();\n\n    /**\n     * Tracks the southwest corner (anchor point) of each detected column footprint.\n     * Used for placing replacement stalagmite models.\n     */\n    private final Set\u003cWorldPoint\u003e columnAnchors \u003d new HashSet\u003c\u003e();\n\n    /**\n     * Maps anchor points to their corresponding RuneLiteObject models for stalagmites.\n     * This allows us to manage the lifecycle of dynamically created objects.\n     */\n    private final Map\u003cWorldPoint, List\u003cRuneLiteObject\u003e\u003e stalagmiteObjects \u003d new HashMap\u003c\u003e();\n    \n    /**\n     * Cache for loaded models to avoid reloading them multiple times.\n     */\n    private final Map\u003cInteger, Model\u003e modelCache \u003d new HashMap\u003c\u003e();\n    \n    /**\n     * Random number generator for varying model orientations.\n     */\n    // Rotation values for rock placement (in 1/2048 units, 512 \u003d 90 degrees)\n    private static final int ROTATION_90_DEG \u003d 512;\n    private static final int[] ROTATIONS \u003d {0, ROTATION_90_DEG, ROTATION_90_DEG * 2, ROTATION_90_DEG * 3};\n    private int rotationIndex \u003d 0; // Track rotation for each object\n\n    Set\u003cWorldPoint\u003e getColumnAnchors()\n    {\n        return columnAnchors;\n    }\n\n    /**\n     * Called when the plugin is started.\n     * Initializes the plugin state and applies initial object hiding.\n     */\n    @Override\n    protected void startUp()\n    {\n        rebuildHiddenIds();\n        columnAnchors.clear();\n        \n        // Apply to existing scene shortly after startup on the game thread\n        clientThread.invoke(() -\u003e {\n            applyHidingToScene();\n            updateStalagmiteObjects();\n        });\n        \n        log.info(\"No Stalactites started\");\n    }\n\n    /**\n     * Called when the plugin is stopped.\n     * Cleans up any resources and restores the game state.\n     */\n    @Override\n    protected void shutDown()\n    {\n        log.info(\"No Stalactites stopping...\");\n        \n        // Clear all custom objects and caches on the client thread\n        clientThread.invoke(() -\u003e {\n            // First despawn all stalagmite objects\n            for (List\u003cRuneLiteObject\u003e objects : stalagmiteObjects.values()) {\n                for (RuneLiteObject obj : objects) {\n                    try {\n                        obj.setActive(false);\n                    } catch (Exception e) {\n                        log.debug(\"Error deactivating object: {}\", e.getMessage());\n                    }\n                }\n            }\n            stalagmiteObjects.clear();\n            \n            // Clear model cache\n            modelCache.clear();\n            \n            // Clear tracking collections\n            hiddenIds.clear();\n            columnAnchors.clear();\n            \n            // Reset rotation index\n            rotationIndex \u003d 0;\n            \n            // Force scene reload to restore hidden objects\n            if (client.getGameState() \u003d\u003d GameState.LOGGED_IN) {\n                client.setGameState(GameState.LOADING);\n            }\n        });\n        \n        log.info(\"No Stalactites stopped\");\n    }\n\n    /**\n     * Provides the plugin configuration.\n     *\n     * @param configManager the RuneLite config manager\n     * @return the plugin configuration\n     */\n    @Provides\n    NoStalactitesConfig provideConfig(ConfigManager configManager)\n    {\n        return configManager.getConfig(NoStalactitesConfig.class);\n    }\n\n    /**\n     * Handles configuration changes.\n     * Updates the plugin state when configuration values are modified.\n     *\n     * @param event the configuration change event\n     */\n    @Subscribe\n    public void onConfigChanged(ConfigChanged event)\n    {\n        if (!event.getGroup().equals(\"nostalactites\"))\n        {\n            return;\n        }\n\n        // Rebuild the set of hidden IDs based on current config\n        rebuildHiddenIds();\n        \n        // Clear existing stalagmite objects when config changes\n        clearStalagmiteObjects();\n        \n        // Force a scene reload to apply changes\n        clientThread.invokeLater(() -\u003e {\n            try {\n                if (client.getGameState() \u003d\u003d GameState.LOGGED_IN) {\n                    client.setGameState(GameState.LOADING);\n                } else {\n                    applyHidingToScene();\n                    if (config.hideColumns() \u0026\u0026 config.replaceWithRocks()) {\n                        updateStalagmiteObjects();\n                    }\n                }\n            } catch (Exception e) {\n                log.error(\"Error updating objects: {}\", e.getMessage(), e);\n            }\n        });\n    }\n\n    /**\n     * Handles the spawning of game objects.\n     * Hides objects that match the configured hidden IDs and manages column replacement.\n     *\n     * @param event the game object spawned event\n     */\n    @Subscribe\n    public void onGameObjectSpawned(GameObjectSpawned event)\n    {\n        GameObject obj \u003d event.getGameObject();\n        if (obj \u003d\u003d null)\n        {\n            return;\n        }\n        \n        final int id \u003d obj.getId();\n        if (!hiddenIds.contains(id))\n        {\n            return;\n        }\n\n        // Remove the object from the scene on the game thread\n        clientThread.invoke(() -\u003e {\n            WorldView wv \u003d client.getTopLevelWorldView();\n            Scene scene \u003d wv !\u003d null ? wv.getScene() : null;\n            if (scene \u003d\u003d null)\n            {\n                return;\n            }\n            \n            // Record column footprint if replacing with rocks is enabled\n            if (isColumnId(id) \u0026\u0026 config.hideColumns() \u0026\u0026 config.replaceWithRocks())\n            {\n                recordColumnFootprint(obj);\n            }\n            \n            // Remove the object from the scene\n            scene.removeGameObject(obj);\n            \n            // Update stalagmite objects if this was a column\n            if (isColumnId(id) \u0026\u0026 config.hideColumns() \u0026\u0026 config.replaceWithRocks())\n            {\n                updateStalagmiteObjects();\n            }\n        });\n    }\n\n    @Subscribe\n    public void onGroundObjectSpawned(GroundObjectSpawned event)\n    {\n        if (event.getGroundObject() \u003d\u003d null)\n        {\n            return;\n        }\n        final int id \u003d event.getGroundObject().getId();\n        if (!hiddenIds.contains(id))\n        {\n            return;\n        }\n\n        clientThread.invoke(() -\u003e {\n            Tile tile \u003d event.getTile();\n            if (tile !\u003d null)\n            {\n                tile.setGroundObject(null);\n            }\n        });\n    }\n\n    @Subscribe\n    public void onWallObjectSpawned(WallObjectSpawned event)\n    {\n        if (event.getWallObject() \u003d\u003d null)\n        {\n            return;\n        }\n        final int id \u003d event.getWallObject().getId();\n        if (hiddenIds.contains(id))\n        {\n            // No public API to remove wall objects; log a debug match for now.\n            log.debug(\"Matched hidden wall object id {} at {} - no public removal API\", id, event.getTile().getWorldLocation());\n        }\n    }\n\n    @Subscribe\n    public void onDecorativeObjectSpawned(DecorativeObjectSpawned event)\n    {\n        if (event.getDecorativeObject() \u003d\u003d null)\n        {\n            return;\n        }\n        final int id \u003d event.getDecorativeObject().getId();\n        if (hiddenIds.contains(id))\n        {\n            // No public API to remove decorative objects; log a debug match for now.\n            log.debug(\"Matched hidden decorative object id {} at {} - no public removal API\", id, event.getTile().getWorldLocation());\n        }\n    }\n\n    /**\n     * Rebuilds the set of hidden object IDs based on the current configuration.\n     * This is called when the configuration changes to update which objects should be hidden.\n     */\n    private void rebuildHiddenIds()\n    {\n        hiddenIds.clear();\n        \n        // Add stalactite object IDs if enabled\n        if (config.hideStalactites())\n        {\n            // Stalactite objects\n            hiddenIds.add(12577); // Large stalactite\n            hiddenIds.add(11187); // Medium stalactite\n            hiddenIds.add(11189); // Small stalactite\n        }\n        \n        // Add column object IDs if enabled\n        if (config.hideColumns())\n        {\n            // Column objects (different rotations/states)\n            hiddenIds.add(11184); // Column 1\n            hiddenIds.add(11185); // Column 2\n            hiddenIds.add(11186); // Column 3\n        }\n    }\n\n\n    private void applyHidingToScene()\n    {\n        WorldView wv \u003d client.getTopLevelWorldView();\n        Scene scene \u003d wv !\u003d null ? wv.getScene() : null;\n        if (scene \u003d\u003d null)\n        {\n            return;\n        }\n        Tile[][][] tiles \u003d scene.getTiles();\n        if (tiles \u003d\u003d null)\n        {\n            return;\n        }\n\n        for (int z \u003d 0; z \u003c tiles.length; z++)\n        {\n            Tile[][] plane \u003d tiles[z];\n            if (plane \u003d\u003d null)\n            {\n                continue;\n            }\n            for (int x \u003d 0; x \u003c plane.length; x++)\n            {\n                Tile[] col \u003d plane[x];\n                if (col \u003d\u003d null)\n                {\n                    continue;\n                }\n                for (int y \u003d 0; y \u003c col.length; y++)\n                {\n                    Tile t \u003d col[y];\n                    if (t \u003d\u003d null)\n                    {\n                        continue;\n                    }\n\n                    // Remove matching game objects\n                    GameObject[] objs \u003d t.getGameObjects();\n                    if (objs !\u003d null)\n                    {\n                        for (GameObject go : objs)\n                        {\n                            if (go !\u003d null \u0026\u0026 hiddenIds.contains(go.getId()))\n                            {\n                                if (isColumnId(go.getId()) \u0026\u0026 config.hideColumns() \u0026\u0026 config.replaceWithRocks())\n                                {\n                                    recordColumnFootprint(go);\n                                }\n                                scene.removeGameObject(go);\n                            }\n                        }\n                    }\n\n                    // Remove matching ground object\n                    if (t.getGroundObject() !\u003d null \u0026\u0026 hiddenIds.contains(t.getGroundObject().getId()))\n                    {\n                        t.setGroundObject(null);\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * Checks if the given object ID corresponds to a column.\n     *\n     * @param id the object ID to check\n     * @return true if the ID is a column, false otherwise\n     */\n    private static boolean isColumnId(int id)\n    {\n        // Standard columns\n        if (id \u003d\u003d 11184 || id \u003d\u003d 11185 || id \u003d\u003d 11186) {\n            return true;\n        }\n        \n        // Additional column variants if they exist\n        return id \u003d\u003d 25080 || id \u003d\u003d 25081 || id \u003d\u003d 25082;\n    }\n\n    private void recordColumnFootprint(GameObject go)\n    {\n        try\n        {\n            WorldPoint wp \u003d WorldPoint.fromLocalInstance(client, go.getLocalLocation());\n            if (wp \u003d\u003d null)\n            {\n                return;\n            }\n\n            // Determine object size; default to 2x2 per user spec\n            int sizeX \u003d 2, sizeY \u003d 2;\n            ObjectComposition oc \u003d client.getObjectDefinition(go.getId());\n            if (oc !\u003d null)\n            {\n                sizeX \u003d oc.getSizeX();\n                sizeY \u003d oc.getSizeY();\n                int rot \u003d go.getOrientation() \u0026 3;\n                if ((rot \u0026 1) \u003d\u003d 1)\n                {\n                    int tmp \u003d sizeX;\n                    sizeX \u003d sizeY;\n                    sizeY \u003d tmp;\n                }\n            }\n\n            // Shift anchor to SW corner of the object\u0027s footprint to avoid NE offset\n            int anchorX \u003d wp.getX() - (sizeX - 1);\n            int anchorY \u003d wp.getY() - (sizeY - 1);\n            WorldPoint sw \u003d new WorldPoint(anchorX, anchorY, wp.getPlane());\n\n            // Use SW tile of the footprint as anchor. If not 2x2, still anchor at SW and overlay 2x2.\n            columnAnchors.add(sw);\n        }\n        catch (Exception ex)\n        {\n            log.debug(\"Failed recording column footprint: {}\", ex.getMessage());\n        }\n    }\n\n    private void updateStalagmiteObjects()\n    {\n        if (!config.replaceWithRocks() || !config.hideColumns()) {\n            return;\n        }\n        \n        // Get the model ID from config\n        int modelId \u003d NoStalactitesConfig.ROCK_FORMATION_ID;\n        \n        // Clear existing objects first\n        clearStalagmiteObjects();\n        \n        // Load the model if not already cached\n        Model model \u003d modelCache.get(modelId);\n        if (model \u003d\u003d null) {\n            model \u003d client.loadModel(modelId);\n            if (model !\u003d null) {\n                modelCache.put(modelId, model);\n            } else {\n                log.warn(\"Failed to load model: {}\", modelId);\n                return;\n            }\n        }\n        \n        // Spawn models at each anchor\n        for (WorldPoint anchor : columnAnchors) {\n            spawnAtAnchor(anchor, modelId);\n        }\n    }\n    \n    private void clearStalagmiteObjects()\n    {\n        // This method is now a wrapper that ensures we\u0027re on the client thread\n        if (client.isClientThread()) {\n            clearStalagmiteObjectsInternal();\n        } else {\n            clientThread.invoke(this::clearStalagmiteObjectsInternal);\n        }\n    }\n    \n    private void clearStalagmiteObjectsInternal()\n    {\n        try {\n            for (List\u003cRuneLiteObject\u003e objects : stalagmiteObjects.values()) {\n                for (RuneLiteObject obj : objects) {\n                    try {\n                        if (obj !\u003d null) {\n                            obj.setActive(false);\n                        }\n                    } catch (Exception e) {\n                        log.debug(\"Error deactivating object: {}\", e.getMessage());\n                    }\n                }\n            }\n            stalagmiteObjects.clear();\n            modelCache.clear();\n        } catch (Exception e) {\n            log.error(\"Error clearing stalagmite objects: {}\", e.getMessage(), e);\n        }\n    }\n\n    private void spawnAtAnchor(WorldPoint anchor, int modelId)\n    {\n        try\n        {\n            List\u003cRuneLiteObject\u003e list \u003d new ArrayList\u003c\u003e();\n            \n            // Place one model per tile center in the 2x2 footprint starting at SW anchor\n            for (int dx \u003d 0; dx \u003c 2; dx++)\n            {\n                for (int dy \u003d 0; dy \u003c 2; dy++)\n                {\n                    WorldPoint wp \u003d new WorldPoint(anchor.getX() + dx, anchor.getY() + dy, anchor.getPlane());\n                    var lp \u003d net.runelite.api.coords.LocalPoint.fromWorld(client, wp);\n                    if (lp \u003d\u003d null)\n                    {\n                        continue;\n                    }\n\n                    // Create and configure the RuneLiteObject\n                    RuneLiteObject obj \u003d client.createRuneLiteObject();\n                    Model model \u003d modelCache.get(modelId);\n                    if (model \u003d\u003d null) {\n                        model \u003d client.loadModel(modelId);\n                        if (model \u003d\u003d null) {\n                            log.warn(\"Failed to load model: {}\", modelId);\n                            continue;\n                        }\n                        modelCache.put(modelId, model);\n                    }\n                    \n                    // Calculate position using world coordinates\n                    LocalPoint localPoint \u003d LocalPoint.fromWorld(client, wp.getX(), wp.getY());\n                    if (localPoint \u003d\u003d null) continue;\n                    \n                    // Set up the object with fixed rotation\n                    obj.setModel(model);\n                    obj.setActive(true);\n                    \n                    // Position the object at the tile center\n                    int plane \u003d wp.getPlane();\n                    \n                    // Use a different rotation for each object (0, 90, 180, 270)\n                    int rotation \u003d ROTATIONS[rotationIndex % ROTATIONS.length];\n                    rotationIndex++;\n                    \n                    // Apply position and rotation\n                    obj.setLocation(localPoint, -plane * 128);\n                    obj.setOrientation(rotation);\n                    \n                    list.add(obj);\n                }\n            }\n            \n            // Store the created objects\n            if (!list.isEmpty()) {\n                stalagmiteObjects.put(anchor, list);\n            }\n        }\n        catch (Exception ex)\n        {\n            log.debug(\"Failed spawning stalagmite models: {}\", ex.getMessage());\n        }\n    }\n}\n\n","filePath":"src\\main\\java\\com\\nostalactites\\NoStalactitesPlugin.java"},{"fileName":"NoStalactitesDevRunner.java","content":"package com.nostalactites;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class NoStalactitesDevRunner {\n    public static void main(String[] args) throws Exception {\n        ExternalPluginManager.loadBuiltin(NoStalactitesPlugin.class);\n        RuneLite.main(args);\n    }\n}\n","filePath":"src\\test\\java\\com\\nostalactites\\NoStalactitesDevRunner.java"}]},{"commit":"c230b43a81ff5d44493d27cd46e4ef1fea36569f","repository":"https://github.com/Krazune/SextantLocator.git","internalName":"sextant-locator","files":[{"fileName":"SextantAxis.java","content":"/*\r\n * BSD 2-Clause License\r\n *\r\n * Copyright (c) 2021, Miguel Sousa\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer.\r\n *\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\r\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\r\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\r\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\r\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\npackage com.sextantlocator;\r\n\r\npublic enum SextantAxis\r\n{\r\n\tHORIZONTAL,\r\n\tVERTICAL\r\n}\r\n","filePath":"src\\main\\java\\com\\sextantlocator\\SextantAxis.java"},{"fileName":"SextantCoordinate.java","content":"/*\r\n * BSD 2-Clause License\r\n *\r\n * Copyright (c) 2021, Miguel Sousa\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer.\r\n *\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\r\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\r\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\r\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\r\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\npackage com.sextantlocator;\r\n\r\nimport net.runelite.api.coords.Direction;\r\n\r\nimport static java.lang.Math.abs;\r\n\r\npublic class SextantCoordinate\r\n{\r\n\tprivate final float minutes;\r\n\tprivate final SextantAxis axis;\r\n\r\n\tprivate final float OBSERVATORY_X \u003d 2440f;\r\n\tprivate final float OBSERVATORY_Y \u003d 3161f;\r\n\tprivate final float MINUTES_PER_TILE \u003d 15f / 8f;\r\n\r\n\tpublic SextantCoordinate(float degrees, float minutes, Direction direction)\r\n\t{\r\n\t\tif (direction \u003d\u003d Direction.NORTH || direction \u003d\u003d Direction.SOUTH)\r\n\t\t{\r\n\t\t\taxis \u003d SextantAxis.VERTICAL;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\taxis \u003d SextantAxis.HORIZONTAL;\r\n\t\t}\r\n\r\n\t\tthis.minutes \u003d degrees * 60 + minutes;\r\n\t}\r\n\r\n\tpublic SextantCoordinate(float worldCoordinate, SextantAxis axis)\r\n\t{\r\n\t\tthis.axis \u003d axis;\r\n\t\tthis.minutes \u003d worldCoordinateToMinutes(worldCoordinate, axis);\r\n\t}\r\n\r\n\tpublic int getDegrees()\r\n\t{\r\n\t\treturn (int) abs(minutes / 60);\r\n\t}\r\n\r\n\tpublic float getMinutes()\r\n\t{\r\n\t\treturn abs(minutes % 60);\r\n\t}\r\n\r\n\tpublic int getMinutesInteger()\r\n\t{\r\n\t\treturn (int) abs(minutes % 60);\r\n\t}\r\n\r\n\tpublic Direction getDirection()\r\n\t{\r\n\t\tif (minutes \u003e\u003d 0)\r\n\t\t{\r\n\t\t\tif (axis \u003d\u003d SextantAxis.HORIZONTAL)\r\n\t\t\t{\r\n\t\t\t\treturn Direction.EAST;\r\n\t\t\t}\r\n\r\n\t\t\treturn Direction.NORTH;\r\n\t\t}\r\n\r\n\t\tif (axis \u003d\u003d SextantAxis.HORIZONTAL)\r\n\t\t{\r\n\t\t\treturn Direction.WEST;\r\n\t\t}\r\n\r\n\t\treturn Direction.SOUTH;\r\n\t}\r\n\r\n\tprivate float worldCoordinateToMinutes(float worldCoordinate, SextantAxis axis)\r\n\t{\r\n\t\tif (axis \u003d\u003d SextantAxis.HORIZONTAL)\r\n\t\t{\r\n\t\t\tworldCoordinate -\u003d OBSERVATORY_X;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tworldCoordinate -\u003d OBSERVATORY_Y;\r\n\t\t}\r\n\r\n\t\treturn worldCoordinate * MINUTES_PER_TILE;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String toString()\r\n\t{\r\n\t\treturn getDegrees() + \" deg. \" + getMinutesInteger() + \" min. \" + getDirection().toString().charAt(0);\r\n\t}\r\n}\r\n","filePath":"src\\main\\java\\com\\sextantlocator\\SextantCoordinate.java"},{"fileName":"SextantLocatorConfig.java","content":"/*\r\n * BSD 2-Clause License\r\n *\r\n * Copyright (c) 2021, Miguel Sousa\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer.\r\n *\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\r\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\r\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\r\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\r\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\npackage com.sextantlocator;\r\n\r\nimport java.awt.Color;\r\nimport net.runelite.client.config.Alpha;\r\nimport net.runelite.client.config.Config;\r\nimport net.runelite.client.config.ConfigGroup;\r\nimport net.runelite.client.config.ConfigItem;\r\nimport net.runelite.client.config.ConfigSection;\r\nimport net.runelite.client.config.Range;\r\n\r\n@ConfigGroup(\"sextantlocator\")\r\npublic interface SextantLocatorConfig extends Config\r\n{\r\n\t@ConfigSection(\r\n\t\tposition \u003d 0,\r\n\t\tname \u003d \"Coordinates Overlay\",\r\n\t\tdescription \u003d \"Settings for the coordinates overlay.\"\r\n\t)\r\n\tString coordinatesOverlaySection \u003d \"coordinatesOverlaySection\";\r\n\r\n\t@ConfigItem(\r\n\t\tposition \u003d 1,\r\n\t\tkeyName \u003d \"displayCoordinatesOverlay\",\r\n\t\tname \u003d \"Coordinates overlay\",\r\n\t\tdescription \u003d \"Display the coordinates overlay.\",\r\n\t\tsection \u003d coordinatesOverlaySection\r\n\t)\r\n\tdefault boolean displayCoordinatesOverlay()\r\n\t{\r\n\t\treturn true;\r\n\t}\r\n\r\n\r\n\r\n\t@ConfigSection(\r\n\t\tposition \u003d 2,\r\n\t\tname \u003d \"Tile Tooltip\",\r\n\t\tdescription \u003d \"Settings for the coordinates tile tooltip.\"\r\n\t)\r\n\tString tileCoordinatesOverlaySection \u003d \"tileCoordinatesOverlaySection\";\r\n\r\n\t@ConfigItem(\r\n\t\tposition \u003d 3,\r\n\t\tkeyName \u003d \"displayTileCoordinatesOverlay\",\r\n\t\tname \u003d \"Tile tooltip\",\r\n\t\tdescription \u003d \"Display the coordinates tooltip of the tile hovered tile.\",\r\n\t\tsection \u003d tileCoordinatesOverlaySection\r\n\t)\r\n\tdefault boolean displayTileCoordinatesOverlay()\r\n\t{\r\n\t\treturn true;\r\n\t}\r\n\r\n\t@Alpha\r\n\t@ConfigItem(\r\n\t\tposition \u003d 4,\r\n\t\tkeyName \u003d \"selectedTileFillColor\",\r\n\t\tname \u003d \"Tile color\",\r\n\t\tdescription \u003d \"Color of the tile fill.\",\r\n\t\tsection \u003d tileCoordinatesOverlaySection\r\n\t)\r\n\tdefault Color selectedTileFillColor()\r\n\t{\r\n\t\treturn new Color(0, 0, 0, 64);\r\n\t}\r\n\r\n\t@Alpha\r\n\t@ConfigItem(\r\n\t\tposition \u003d 5,\r\n\t\tkeyName \u003d \"selectedTileBorderColor\",\r\n\t\tname \u003d \"Border color\",\r\n\t\tdescription \u003d \"Color of the tile border.\",\r\n\t\tsection \u003d tileCoordinatesOverlaySection\r\n\t)\r\n\tdefault Color selectedTileBorderColor()\r\n\t{\r\n\t\treturn Color.YELLOW;\r\n\t}\r\n\r\n\t@Range(\r\n\t\tmin \u003d 1\r\n\t)\r\n\t@ConfigItem(\r\n\t\tposition \u003d 6,\r\n\t\tkeyName \u003d \"selectedTileBorderWidth\",\r\n\t\tname \u003d \"Border width\",\r\n\t\tdescription \u003d \"Width of the tile border.\",\r\n\t\tsection \u003d tileCoordinatesOverlaySection\r\n\t)\r\n\tdefault int selectedTileBorderWidth()\r\n\t{\r\n\t\treturn 2;\r\n\t}\r\n\r\n\r\n\r\n\t@ConfigSection(\r\n\t\tposition \u003d 7,\r\n\t\tname \u003d \"Map Overlay\",\r\n\t\tdescription \u003d \"Settings for the map coordinates overlay.\"\r\n\t)\r\n\tString mapCoordinatesOverlaySection \u003d \"mapCoordinatesOverlaySection\";\r\n\r\n\t@ConfigItem(\r\n\t\tposition \u003d 8,\r\n\t\tkeyName \u003d \"displayMapCoordinatesOverlay\",\r\n\t\tname \u003d \"Map coordinates\",\r\n\t\tdescription \u003d \"Display the sextant coordinates overlay in the map window.\",\r\n\t\tsection \u003d mapCoordinatesOverlaySection\r\n\t)\r\n\tdefault boolean displayMapCoordinatesOverlay()\r\n\t{\r\n\t\treturn true;\r\n\t}\r\n\r\n\t@Alpha\r\n\t@ConfigItem(\r\n\t\tposition \u003d 9,\r\n\t\tkeyName \u003d \"coordinateMapOverlayBackgroundColor\",\r\n\t\tname \u003d \"Background color\",\r\n\t\tdescription \u003d \"Color of the background of the map overlay.\",\r\n\t\tsection \u003d mapCoordinatesOverlaySection\r\n\t)\r\n\tdefault Color coordinateMapOverlayBackgroundColor()\r\n\t{\r\n\t\treturn Color.BLACK;\r\n\t}\r\n\r\n\t@Alpha\r\n\t@ConfigItem(\r\n\t\tposition \u003d 10,\r\n\t\tkeyName \u003d \"coordinateMapOverlayTextColor\",\r\n\t\tname \u003d \"Text color\",\r\n\t\tdescription \u003d \"Color of the text of the map overlay.\",\r\n\t\tsection \u003d mapCoordinatesOverlaySection\r\n\t)\r\n\tdefault Color coordinateMapOverlayTextColor()\r\n\t{\r\n\t\treturn Color.WHITE;\r\n\t}\r\n\r\n\t@Alpha\r\n\t@ConfigItem(\r\n\t\tposition \u003d 11,\r\n\t\tkeyName \u003d \"coordinateMapOverlayCrosshairColor\",\r\n\t\tname \u003d \"Crosshair color\",\r\n\t\tdescription \u003d \"Color of the crosshair of the map overlay.\",\r\n\t\tsection \u003d mapCoordinatesOverlaySection\r\n\t)\r\n\tdefault Color coordinateMapOverlayCrosshairColor()\r\n\t{\r\n\t\treturn Color.WHITE;\r\n\t}\r\n}\r\n","filePath":"src\\main\\java\\com\\sextantlocator\\SextantLocatorConfig.java"},{"fileName":"SextantLocatorPlugin.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Miguel Sousa\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.sextantlocator;\n\nimport com.google.inject.Provides;\nimport com.sextantlocator.ui.CoordinatesMapOverlay;\nimport com.sextantlocator.ui.CoordinatesOverlay;\nimport com.sextantlocator.ui.CoordinatesTooltipOverlay;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Sextant Locator\",\n\tdescription \u003d \"Sextant\u0027s coordinates helper.\",\n\ttags \u003d {\n\t\t\"sextant\",\n\t\t\"coordinates\",\n\t\t\"world\",\n\t\t\"location\",\n\t\t\"locator\",\n\t\t\"clues\"\n\t}\n)\npublic class SextantLocatorPlugin extends Plugin\n{\n\t@Inject\n\tprivate SextantLocatorConfig config;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tCoordinatesOverlay coordinatesOverlay;\n\n\t@Inject\n\tCoordinatesTooltipOverlay coordinatesTooltipOverlay;\n\n\t@Inject\n\tCoordinatesMapOverlay coordinatesMapOverlay;\n\n\t@Provides\n\tSextantLocatorConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(SextantLocatorConfig.class);\n\t}\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\taddOverlays();\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\tremoveOverlays();\n\t}\n\n\tprivate void addOverlays()\n\t{\n\t\toverlayManager.add(coordinatesOverlay);\n\t\toverlayManager.add(coordinatesTooltipOverlay);\n\t\toverlayManager.add(coordinatesMapOverlay);\n\t}\n\n\tprivate void removeOverlays()\n\t{\n\t\toverlayManager.remove(coordinatesOverlay);\n\t\toverlayManager.remove(coordinatesTooltipOverlay);\n\t\toverlayManager.remove(coordinatesMapOverlay);\n\t}\n}\n","filePath":"src\\main\\java\\com\\sextantlocator\\SextantLocatorPlugin.java"},{"fileName":"SextantPoint.java","content":"/*\r\n * BSD 2-Clause License\r\n *\r\n * Copyright (c) 2021, Miguel Sousa\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer.\r\n *\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\r\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\r\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\r\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\r\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\npackage com.sextantlocator;\r\n\r\npublic class SextantPoint\r\n{\r\n\tprivate SextantCoordinate x;\r\n\tprivate SextantCoordinate y;\r\n\r\n\tpublic SextantPoint(SextantCoordinate x, SextantCoordinate y)\r\n\t{\r\n\t\tif (x \u003d\u003d null)\r\n\t\t{\r\n\t\t\tthis.x \u003d new SextantCoordinate(0, SextantAxis.HORIZONTAL);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.x \u003d x;\r\n\t\t}\r\n\r\n\t\tif (y \u003d\u003d null)\r\n\t\t{\r\n\t\t\tthis.y \u003d new SextantCoordinate(0, SextantAxis.VERTICAL);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.y \u003d y;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic SextantPoint(float worldX, float worldY)\r\n\t{\r\n\t\tx \u003d new SextantCoordinate(worldX, SextantAxis.HORIZONTAL);\r\n\t\ty \u003d new SextantCoordinate(worldY, SextantAxis.VERTICAL);\r\n\t}\r\n\r\n\tpublic void setXCoordinate(SextantCoordinate newX)\r\n\t{\r\n\t\tif (newX \u003d\u003d null)\r\n\t\t{\r\n\t\t\tthis.x \u003d new SextantCoordinate(0, SextantAxis.HORIZONTAL);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.x \u003d newX;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic void setYCoordinate(SextantCoordinate newY)\r\n\t{\r\n\t\tif (newY \u003d\u003d null)\r\n\t\t{\r\n\t\t\tthis.y \u003d new SextantCoordinate(0, SextantAxis.VERTICAL);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.y \u003d newY;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic SextantCoordinate getXCoordinate()\r\n\t{\r\n\t\treturn x;\r\n\t}\r\n\r\n\tpublic SextantCoordinate getYCoordinate()\r\n\t{\r\n\t\treturn y;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String toString()\r\n\t{\r\n\t\tif (x \u003d\u003d null || y \u003d\u003d null)\r\n\t\t{\r\n\t\t\treturn \"\";\r\n\t\t}\r\n\r\n\t\treturn y + \" | \" + x;\r\n\t}\r\n}\r\n","filePath":"src\\main\\java\\com\\sextantlocator\\SextantPoint.java"},{"fileName":"CoordinatesMapOverlay.java","content":"/*\r\n * BSD 2-Clause License\r\n *\r\n * Copyright (c) 2021, Miguel Sousa\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer.\r\n *\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\r\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\r\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\r\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\r\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\npackage com.sextantlocator.ui;\r\n\r\nimport com.sextantlocator.SextantLocatorConfig;\r\nimport com.sextantlocator.SextantPoint;\r\nimport java.awt.Dimension;\r\nimport java.awt.FontMetrics;\r\nimport java.awt.Graphics;\r\nimport java.awt.Graphics2D;\r\nimport java.awt.Rectangle;\r\nimport javax.inject.Inject;\r\nimport net.runelite.api.Client;\r\nimport net.runelite.api.Point;\r\nimport net.runelite.api.RenderOverview;\r\nimport net.runelite.api.coords.WorldPoint;\r\nimport net.runelite.api.widgets.Widget;\r\nimport net.runelite.api.widgets.WidgetID;\r\nimport net.runelite.api.widgets.WidgetInfo;\r\nimport net.runelite.client.ui.overlay.Overlay;\r\nimport net.runelite.client.ui.overlay.OverlayLayer;\r\nimport net.runelite.client.ui.overlay.OverlayPosition;\r\nimport net.runelite.client.ui.overlay.OverlayPriority;\r\nimport net.runelite.client.ui.overlay.worldmap.WorldMapOverlay;\r\n\r\npublic class CoordinatesMapOverlay extends Overlay\r\n{\r\n\tprivate final int TEXT_MARGIN \u003d 5;\r\n\r\n\tprivate final Client client;\r\n\tprivate final WorldMapOverlay worldMapOverlay;\r\n\tprivate final SextantLocatorConfig sextantLocatorConfig;\r\n\r\n\t@Inject\r\n\tpublic CoordinatesMapOverlay(Client client, WorldMapOverlay worldMapOverlay, SextantLocatorConfig sextantLocatorConfig)\r\n\t{\r\n\t\tthis.client \u003d client;\r\n\t\tthis.worldMapOverlay \u003d worldMapOverlay;\r\n\t\tthis.sextantLocatorConfig \u003d sextantLocatorConfig;\r\n\r\n\t\tsetPosition(OverlayPosition.DYNAMIC);\r\n\t\tsetPriority(OverlayPriority.HIGH);\r\n\t\tsetLayer(OverlayLayer.MANUAL);\r\n\t\tdrawAfterInterface(WidgetID.WORLD_MAP_GROUP_ID);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic Dimension render(Graphics2D graphics)\r\n\t{\r\n\t\tif (!sextantLocatorConfig.displayMapCoordinatesOverlay())\r\n\t\t{\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tRenderOverview renderOverview \u003d client.getRenderOverview();\r\n\t\tWidget worldMapWidget \u003d client.getWidget(WidgetInfo.WORLD_MAP_VIEW);\r\n\r\n\t\tif (renderOverview \u003d\u003d null || worldMapWidget \u003d\u003d null)\r\n\t\t{\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tWorldPoint mapCenterPoint \u003d new WorldPoint(renderOverview.getWorldMapPosition().getX(), renderOverview.getWorldMapPosition().getY(), 0);\r\n\t\tRectangle worldMapBounds \u003d worldMapWidget.getBounds();\r\n\r\n\t\trenderCrosshair(graphics, mapCenterPoint, worldMapBounds);\r\n\r\n\t\tSextantPoint mapCenterSextantPoint \u003d new SextantPoint(mapCenterPoint.getX(), mapCenterPoint.getY());\r\n\r\n\t\trenderCoordinates(graphics, mapCenterSextantPoint, worldMapBounds);\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\tprivate void renderCrosshair(Graphics graphics, WorldPoint mapCenterPoint, Rectangle worldMapBounds)\r\n\t{\r\n\t\tPoint middle \u003d worldMapOverlay.mapWorldPointToGraphicsPoint(mapCenterPoint);\r\n\r\n\t\tif (middle \u003d\u003d null)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tgraphics.setClip(worldMapBounds);\r\n\t\tgraphics.setColor(sextantLocatorConfig.coordinateMapOverlayCrosshairColor());\r\n\t\tgraphics.drawLine(middle.getX(), worldMapBounds.y, middle.getX(), worldMapBounds.y + worldMapBounds.height);\r\n\t\tgraphics.drawLine(worldMapBounds.x, middle.getY(), worldMapBounds.x + worldMapBounds.width, middle.getY());\r\n\t}\r\n\r\n\tprivate void renderCoordinates(Graphics graphics, SextantPoint mapCenterSextantPoint, Rectangle worldMapBounds)\r\n\t{\r\n\t\tString output \u003d mapCenterSextantPoint.toString();\r\n\t\tFontMetrics fontMetrics \u003d graphics.getFontMetrics();\r\n\t\tint textHeight \u003d fontMetrics.getHeight();\r\n\t\tint textWidth \u003d fontMetrics.stringWidth(output);\r\n\t\tint textX \u003d (int) worldMapBounds.getX() + TEXT_MARGIN;\r\n\t\tint textY \u003d (int) worldMapBounds.getY() + TEXT_MARGIN + textHeight;\r\n\r\n\t\tint rectangleX \u003d (int) worldMapBounds.getX();\r\n\t\tint rectangleY \u003d (int) worldMapBounds.getY();\r\n\t\tint rectangleWidth \u003d textWidth + TEXT_MARGIN * 2;\r\n\t\tint rectangleHeight \u003d textHeight + TEXT_MARGIN * 2;\r\n\r\n\t\tgraphics.setColor(sextantLocatorConfig.coordinateMapOverlayBackgroundColor());\r\n\t\tgraphics.fillRect(rectangleX, rectangleY, rectangleWidth, rectangleHeight);\r\n\r\n\t\tgraphics.setColor(sextantLocatorConfig.coordinateMapOverlayTextColor());\r\n\t\tgraphics.drawString(output, textX, textY);\r\n\t}\r\n}\r\n","filePath":"src\\main\\java\\com\\sextantlocator\\ui\\CoordinatesMapOverlay.java"},{"fileName":"CoordinatesOverlay.java","content":"/*\r\n * BSD 2-Clause License\r\n *\r\n * Copyright (c) 2021, Miguel Sousa\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer.\r\n *\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\r\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\r\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\r\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\r\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\npackage com.sextantlocator.ui;\r\n\r\nimport com.sextantlocator.SextantLocatorConfig;\r\nimport com.sextantlocator.SextantPoint;\r\nimport java.awt.Dimension;\r\nimport java.awt.Graphics2D;\r\nimport javax.inject.Inject;\r\nimport net.runelite.api.Client;\r\nimport net.runelite.client.ui.overlay.OverlayPanel;\r\nimport net.runelite.client.ui.overlay.OverlayPosition;\r\nimport net.runelite.client.ui.overlay.components.LineComponent;\r\n\r\npublic class CoordinatesOverlay extends OverlayPanel\r\n{\r\n\tprivate final Client client;\r\n\tprivate final SextantLocatorConfig sextantLocatorConfig;\r\n\r\n\t@Inject\r\n\tpublic CoordinatesOverlay(Client client, SextantLocatorConfig sextantLocatorConfig)\r\n\t{\r\n\t\tthis.client \u003d client;\r\n\t\tthis.sextantLocatorConfig \u003d sextantLocatorConfig;\r\n\r\n\t\tsetPosition(OverlayPosition.TOP_LEFT);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic Dimension render(Graphics2D graphics)\r\n\t{\r\n\t\tif (!sextantLocatorConfig.displayCoordinatesOverlay())\r\n\t\t{\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\taddOverlayComponents();\r\n\r\n\t\treturn super.render(graphics);\r\n\t}\r\n\r\n\tprivate void addOverlayComponents()\r\n\t{\r\n\t\tif (client.getLocalPlayer() \u003d\u003d null)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tint playerX \u003d client.getLocalPlayer().getWorldLocation().getX();\r\n\t\tint playerY \u003d client.getLocalPlayer().getWorldLocation().getY();\r\n\t\tSextantPoint playerSextantPoint \u003d new SextantPoint(playerX, playerY);\r\n\r\n\t\tLineComponent titleLine \u003d LineComponent.builder().left(\"Sextant coordinates:\").build();\r\n\t\tLineComponent xCoordinateLine \u003d LineComponent.builder().right(playerSextantPoint.getXCoordinate().toString()).build();\r\n\t\tLineComponent yCoordinateLine \u003d LineComponent.builder().right(playerSextantPoint.getYCoordinate().toString()).build();\r\n\r\n\t\tpanelComponent.getChildren().add(titleLine);\r\n\t\tpanelComponent.getChildren().add(yCoordinateLine);\r\n\t\tpanelComponent.getChildren().add(xCoordinateLine);\r\n\t}\r\n}\r\n","filePath":"src\\main\\java\\com\\sextantlocator\\ui\\CoordinatesOverlay.java"},{"fileName":"CoordinatesTooltipOverlay.java","content":"/*\r\n * BSD 2-Clause License\r\n *\r\n * Copyright (c) 2021, Miguel Sousa\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer.\r\n *\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\r\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\r\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\r\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\r\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\npackage com.sextantlocator.ui;\r\n\r\nimport com.sextantlocator.SextantLocatorConfig;\r\nimport com.sextantlocator.SextantPoint;\r\nimport java.awt.BasicStroke;\r\nimport java.awt.Dimension;\r\nimport java.awt.Graphics2D;\r\nimport java.awt.Polygon;\r\nimport javax.inject.Inject;\r\nimport net.runelite.api.Client;\r\nimport net.runelite.api.Perspective;\r\nimport net.runelite.api.Tile;\r\nimport net.runelite.client.ui.overlay.Overlay;\r\nimport net.runelite.client.ui.overlay.OverlayLayer;\r\nimport net.runelite.client.ui.overlay.OverlayPosition;\r\nimport net.runelite.client.ui.overlay.OverlayUtil;\r\nimport net.runelite.client.ui.overlay.tooltip.Tooltip;\r\nimport net.runelite.client.ui.overlay.tooltip.TooltipManager;\r\n\r\npublic class CoordinatesTooltipOverlay extends Overlay\r\n{\r\n\tprivate final Client client;\r\n\tprivate final SextantLocatorConfig sextantLocatorConfig;\r\n\tprivate final TooltipManager tooltipManager;\r\n\r\n\t@Inject\r\n\tpublic CoordinatesTooltipOverlay(Client client, SextantLocatorConfig sextantLocatorConfig, TooltipManager tooltipManager)\r\n\t{\r\n\t\tthis.client \u003d client;\r\n\t\tthis.sextantLocatorConfig \u003d sextantLocatorConfig;\r\n\t\tthis.tooltipManager \u003d tooltipManager;\r\n\r\n\t\tsetPosition(OverlayPosition.DYNAMIC);\r\n\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic Dimension render(Graphics2D graphics)\r\n\t{\r\n\t\tif (!sextantLocatorConfig.displayTileCoordinatesOverlay())\r\n\t\t{\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\taddTooltip();\r\n\t\trenderSelectedTile(graphics);\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\tprivate void addTooltip()\r\n\t{\r\n\t\tTile selectedTile \u003d client.getSelectedSceneTile();\r\n\r\n\t\tif (selectedTile \u003d\u003d null || selectedTile.getWorldLocation() \u003d\u003d null)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tint selectedTileX \u003d selectedTile.getWorldLocation().getX();\r\n\t\tint selectedTileY \u003d selectedTile.getWorldLocation().getY();\r\n\t\tSextantPoint selectedTileSextantCoordinates;\r\n\r\n\t\tselectedTileSextantCoordinates \u003d new SextantPoint(selectedTileX, selectedTileY);\r\n\r\n\t\ttooltipManager.add(new Tooltip(selectedTileSextantCoordinates.toString()));\r\n\t}\r\n\r\n\tprivate void renderSelectedTile(Graphics2D graphics)\r\n\t{\r\n\t\tTile selectedTile \u003d client.getSelectedSceneTile();\r\n\r\n\t\tif (selectedTile \u003d\u003d null || selectedTile.getLocalLocation() \u003d\u003d null)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tfinal Polygon selectedTilePolygon \u003d Perspective.getCanvasTilePoly(client, selectedTile.getLocalLocation());\r\n\r\n\t\tif (selectedTilePolygon \u003d\u003d null)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tOverlayUtil.renderPolygon(graphics, selectedTilePolygon, sextantLocatorConfig.selectedTileBorderColor(), sextantLocatorConfig.selectedTileFillColor(), new BasicStroke(sextantLocatorConfig.selectedTileBorderWidth()));\r\n\t}\r\n}\r\n","filePath":"src\\main\\java\\com\\sextantlocator\\ui\\CoordinatesTooltipOverlay.java"},{"fileName":"SextantCoordinateTest.java","content":"/*\r\n * BSD 2-Clause License\r\n *\r\n * Copyright (c) 2021, Miguel Sousa\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer.\r\n *\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\r\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\r\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\r\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\r\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\npackage com.sextantlocator;\r\n\r\nimport net.runelite.api.coords.Direction;\r\nimport org.junit.Test;\r\n\r\nimport static org.junit.Assert.assertEquals;\r\nimport static org.junit.Assert.assertSame;\r\n\r\npublic class SextantCoordinateTest\r\n{\r\n\tprivate final float OBSERVATORY_X \u003d 2440f;\r\n\tprivate final float OBSERVATORY_Y \u003d 3161f;\r\n\tprivate final float minutePerTile \u003d 15f / 8f;\r\n\r\n\t@Test\r\n\tpublic void observatoryXTest()\r\n\t{\r\n\t\tSextantCoordinate x \u003d new SextantCoordinate(OBSERVATORY_X, SextantAxis.HORIZONTAL);\r\n\r\n\t\tassertEquals(0, x.getDegrees());\r\n\t\tassertEquals(0f, x.getMinutes(), 0f);\r\n\t\tassertSame(x.getDirection(), Direction.EAST);\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void observatoryYTest()\r\n\t{\r\n\t\tSextantCoordinate y \u003d new SextantCoordinate(OBSERVATORY_Y, SextantAxis.VERTICAL);\r\n\r\n\t\tassertEquals(0, y.getDegrees());\r\n\t\tassertEquals(0f, y.getMinutes(), 0f);\r\n\t\tassertSame(y.getDirection(), Direction.NORTH);\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void singleStepTest()\r\n\t{\r\n\t\tSextantCoordinate coordinate \u003d new SextantCoordinate(OBSERVATORY_X + 1f, SextantAxis.HORIZONTAL);\r\n\r\n\t\tassertEquals(0, coordinate.getDegrees());\r\n\t\tassertEquals(1.875f, coordinate.getMinutes(), 0f);\r\n\t\tassertSame(coordinate.getDirection(), Direction.EAST);\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void sixtyMinutesTest()\r\n\t{\r\n\t\tSextantCoordinate coordinate \u003d new SextantCoordinate(OBSERVATORY_X + 60 / minutePerTile, SextantAxis.HORIZONTAL);\r\n\r\n\t\tassertEquals(1, coordinate.getDegrees());\r\n\t\tassertEquals(0f, coordinate.getMinutes(), 0f);\r\n\t\tassertSame(coordinate.getDirection(), Direction.EAST);\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void ninetyMinutesTest()\r\n\t{\r\n\t\tSextantCoordinate coordinate \u003d new SextantCoordinate(OBSERVATORY_X + 90 / minutePerTile, SextantAxis.HORIZONTAL);\r\n\r\n\t\tassertEquals(1, coordinate.getDegrees());\r\n\t\tassertEquals(30f, coordinate.getMinutes(), 0f);\r\n\t\tassertSame(coordinate.getDirection(), Direction.EAST);\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void positiveCoordinatesRoundingTest()\r\n\t{\r\n\t\tSextantCoordinate coordinate;\r\n\r\n\t\t// Good...\r\n\t\tcoordinate \u003d new SextantCoordinate(3069f, SextantAxis.HORIZONTAL);\r\n\r\n\t\tassertEquals(19, coordinate.getDegrees());\r\n\t\tassertEquals(39f, coordinate.getMinutesInteger(), 0f);\r\n\t\tassertSame(coordinate.getDirection(), Direction.EAST);\r\n\r\n\t\tcoordinate \u003d new SextantCoordinate(3225f, SextantAxis.HORIZONTAL);\r\n\r\n\t\tassertEquals(24, coordinate.getDegrees());\r\n\t\tassertEquals(31f, coordinate.getMinutesInteger(), 0f);\r\n\t\tassertSame(coordinate.getDirection(), Direction.EAST);\r\n\r\n\t\tcoordinate \u003d new SextantCoordinate(3178f, SextantAxis.HORIZONTAL);\r\n\r\n\t\tassertEquals(23, coordinate.getDegrees());\r\n\t\tassertEquals(3f, coordinate.getMinutesInteger(), 0f);\r\n\t\tassertSame(coordinate.getDirection(), Direction.EAST);\r\n\r\n\t\t// ... luck\r\n\t\tcoordinate \u003d new SextantCoordinate(3517f, SextantAxis.VERTICAL);\r\n\r\n\t\tassertEquals(11, coordinate.getDegrees());\r\n\t\tassertEquals(7f, coordinate.getMinutesInteger(), 0f);\r\n\t\tassertSame(coordinate.getDirection(), Direction.NORTH);\r\n\r\n\t\tcoordinate \u003d new SextantCoordinate(3219f, SextantAxis.VERTICAL);\r\n\r\n\t\tassertEquals(1, coordinate.getDegrees());\r\n\t\tassertEquals(48f, coordinate.getMinutesInteger(), 0f);\r\n\t\tassertSame(coordinate.getDirection(), Direction.NORTH);\r\n\r\n\t\tcoordinate \u003d new SextantCoordinate(3475f, SextantAxis.VERTICAL);\r\n\r\n\t\tassertEquals(9, coordinate.getDegrees());\r\n\t\tassertEquals(48f, coordinate.getMinutesInteger(), 0f);\r\n\t\tassertSame(coordinate.getDirection(), Direction.NORTH);\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void negativeCoordinatesRoundingTest()\r\n\t{\r\n\t\tSextantCoordinate coordinate;\r\n\r\n\t\tcoordinate \u003d new SextantCoordinate(2210f, SextantAxis.HORIZONTAL);\r\n\r\n\t\tassertEquals(7f, coordinate.getDegrees(), 0f);\r\n\t\tassertEquals(11f, coordinate.getMinutesInteger(), 0f);\r\n\t\tassertSame(coordinate.getDirection(), Direction.WEST);\r\n\r\n\t\tcoordinate \u003d new SextantCoordinate(2152f, SextantAxis.HORIZONTAL);\r\n\r\n\t\tassertEquals(9f, coordinate.getDegrees(), 0f);\r\n\t\tassertEquals(0f, coordinate.getMinutesInteger(), 0f);\r\n\t\tassertSame(coordinate.getDirection(), Direction.WEST);\r\n\r\n\t\tcoordinate \u003d new SextantCoordinate(2377f, SextantAxis.HORIZONTAL);\r\n\r\n\t\tassertEquals(1f, coordinate.getDegrees(), 0f);\r\n\t\tassertEquals(58f, coordinate.getMinutesInteger(), 0f);\r\n\t\tassertSame(coordinate.getDirection(), Direction.WEST);\r\n\r\n\t\tcoordinate \u003d new SextantCoordinate(2855f, SextantAxis.VERTICAL);\r\n\r\n\t\tassertEquals(9f, coordinate.getDegrees(), 0f);\r\n\t\tassertEquals(33f, coordinate.getMinutesInteger(), 0f);\r\n\t\tassertSame(coordinate.getDirection(), Direction.SOUTH);\r\n\r\n\t\tcoordinate \u003d new SextantCoordinate(3072f, SextantAxis.VERTICAL);\r\n\r\n\t\tassertEquals(2f, coordinate.getDegrees(), 0f);\r\n\t\tassertEquals(46f, coordinate.getMinutesInteger(), 0f);\r\n\t\tassertSame(coordinate.getDirection(), Direction.SOUTH);\r\n\r\n\t\tcoordinate \u003d new SextantCoordinate(3036f, SextantAxis.VERTICAL);\r\n\r\n\t\tassertEquals(3f, coordinate.getDegrees(), 0f);\r\n\t\tassertEquals(54f, coordinate.getMinutesInteger(), 0f);\r\n\t\tassertSame(coordinate.getDirection(), Direction.SOUTH);\r\n\t}\r\n}\r\n","filePath":"src\\test\\java\\com\\sextantlocator\\SextantCoordinateTest.java"},{"fileName":"SextantLocatorTest.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Miguel Sousa\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.sextantlocator;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class SextantLocatorTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(SextantLocatorPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}\n","filePath":"src\\test\\java\\com\\sextantlocator\\SextantLocatorTest.java"}]},{"commit":"baad9f5b378e3a389000f21f2c1474dba3eca9eb","repository":"https://github.com/tonyrishwain/item-info-copier.git","internalName":"item-info-copier","files":[{"fileName":"ItemInfoCopierConfig.java","content":"package com.iteminfocopier;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"iteminfocopier\")\npublic interface ItemInfoCopierConfig extends Config\n{\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"ENABLE_COPY_ID\",\n\t\t\tname \u003d \"Enable copy item ID\",\n\t\t\tdescription \u003d \"Check this box to enable the copy item ID feature.\"\n\t)\n\tdefault boolean enableCopyId()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"ENABLE_COPY_NAME\",\n\t\t\tname \u003d \"Enable copy item name\",\n\t\t\tdescription \u003d \"Check this box to enable the copy item name feature.\"\n\t)\n\tdefault boolean enableCopyName()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"REQUIRE_SHIFT\",\n\t\t\tname \u003d \"Require shift key\",\n\t\t\tdescription \u003d \"Check this box to require shift key for menu entries.\"\n\t)\n\tdefault boolean requireShift()\n\t{\n\t\treturn true;\n\t}\n}\n","filePath":"src\\main\\java\\com\\iteminfocopier\\ItemInfoCopierConfig.java"},{"fileName":"ItemInfoCopierPlugin.java","content":"package com.iteminfocopier;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.Menu;\nimport net.runelite.api.events.MenuOpened;\nimport net.runelite.api.gameval.InterfaceID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetUtil;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.chat.QueuedMessage;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\n\nimport java.awt.*;\nimport java.awt.datatransfer.StringSelection;\n\n@Slf4j\n@PluginDescriptor(\n\t\tname \u003d \"Item Info Copier\"\n)\npublic class ItemInfoCopierPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ItemInfoCopierConfig config;\n\n\t@Inject\n\tprivate ChatMessageManager chatMessageManager;\n\n\t@Inject\n\tprivate ItemManager itemManager;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tlog.debug(\"Item Info Copier started!\");\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tlog.debug(\"Item Info Copier stopped!\");\n\t}\n\n\t@Provides\n\tItemInfoCopierConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(ItemInfoCopierConfig.class);\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOpened(final MenuOpened event)\n\t{\n\t\tif (!config.enableCopyId() \u0026\u0026 !config.enableCopyName())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (config.requireShift() \u0026\u0026 !client.isKeyPressed(KeyCode.KC_SHIFT))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal MenuEntry[] entries \u003d event.getMenuEntries();\n\n\t\tfor (int idx \u003d entries.length - 1; idx \u003e\u003d 0; --idx)\n\t\t{\n\t\t\tfinal MenuEntry entry \u003d entries[idx];\n\t\t\tfinal Widget w \u003d entry.getWidget();\n\n\t\t\tif (w !\u003d null \u0026\u0026 WidgetUtil.componentToInterface(w.getId()) \u003d\u003d InterfaceID.INVENTORY\n\t\t\t\t\t\u0026\u0026 \"Examine\".equals(entry.getOption()) \u0026\u0026 entry.getIdentifier() \u003d\u003d 10)\n\t\t\t{\n\t\t\t\tfinal int itemId \u003d w.getItemId();\n\t\t\t\tfinal String itemName \u003d itemManager.getItemComposition(itemId).getMembersName();\n\n\t\t\t\tfinal MenuEntry parent \u003d client.createMenuEntry(idx)\n\t\t\t\t\t\t.setOption(\"Copy\")\n\t\t\t\t\t\t.setTarget(entry.getTarget())\n\t\t\t\t\t\t.setType(MenuAction.RUNELITE);\n\n\t\t\t\tfinal Menu submenu \u003d parent.createSubMenu();\n\n\t\t\t\tif (config.enableCopyId())\n\t\t\t\t{\n\t\t\t\t\tsubmenu.createMenuEntry(0)\n\t\t\t\t\t\t\t.setOption(\"Item ID\")\n\t\t\t\t\t\t\t.setType(MenuAction.RUNELITE)\n\t\t\t\t\t\t\t.onClick(e -\u003e\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tToolkit.getDefaultToolkit()\n\t\t\t\t\t\t\t\t\t\t.getSystemClipboard()\n\t\t\t\t\t\t\t\t\t\t.setContents(new StringSelection(String.valueOf(itemId)), null);\n\n\t\t\t\t\t\t\t\tchatMessageManager.queue(QueuedMessage.builder()\n\t\t\t\t\t\t\t\t\t\t.type(ChatMessageType.CONSOLE)\n\t\t\t\t\t\t\t\t\t\t.runeLiteFormattedMessage(\"Item ID copied to clipboard\")\n\t\t\t\t\t\t\t\t\t\t.build());\n\t\t\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (config.enableCopyName())\n\t\t\t\t{\n\t\t\t\t\tsubmenu.createMenuEntry(0)\n\t\t\t\t\t\t\t.setOption(\"Item name\")\n\t\t\t\t\t\t\t.setType(MenuAction.RUNELITE)\n\t\t\t\t\t\t\t.onClick(e -\u003e\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tToolkit.getDefaultToolkit()\n\t\t\t\t\t\t\t\t\t\t.getSystemClipboard()\n\t\t\t\t\t\t\t\t\t\t.setContents(new StringSelection(itemName), null);\n\n\t\t\t\t\t\t\t\tchatMessageManager.queue(QueuedMessage.builder()\n\t\t\t\t\t\t\t\t\t\t.type(ChatMessageType.CONSOLE)\n\t\t\t\t\t\t\t\t\t\t.runeLiteFormattedMessage(\"Item name copied to clipboard\")\n\t\t\t\t\t\t\t\t\t\t.build());\n\t\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\iteminfocopier\\ItemInfoCopierPlugin.java"},{"fileName":"ItemInfoCopierPluginTest.java","content":"package com.iteminfocopier;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ItemInfoCopierPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(ItemInfoCopierPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\iteminfocopier\\ItemInfoCopierPluginTest.java"}]},{"commit":"6c6f089ba4e7a2fd7294c5beeea3fceeebf3bcf6","repository":"https://github.com/JZomDev/zom-external-plugins.git","internalName":"zom-ignore-list-updater","files":[{"fileName":"IgnoreListAlerterConfig.java","content":"package com.zom.ignore;\n\nimport java.time.temporal.ChronoUnit;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.Range;\nimport net.runelite.client.config.Units;\n\n@ConfigGroup(IgnoreListAlerterConfig.GROUP)\npublic interface IgnoreListAlerterConfig extends Config\n{\n\n\tString GROUP \u003d \"zomignorelistalerter\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"alertTimeOut\",\n\t\tname \u003d \"Alert Timeout\",\n\t\tdescription \u003d \"Alert Timeout to prevent spam\",\n\t\tposition \u003d 1\n\t)\n\t@Range(max \u003d 30)\n\t@Units(Units.MINUTES)\n\tdefault int alertTimeOut()\n\t{\n\t\treturn 0;\n\t}\n}\n","filePath":"src\\main\\java\\com\\zom\\ignore\\IgnoreListAlerterConfig.java"},{"fileName":"IgnoreListAlerterPlugin.java","content":"package com.zom.ignore;\n\nimport com.google.inject.Provides;\nimport static com.zom.ignore.IgnoreListAlerterConfig.GROUP;\nimport java.time.Instant;\nimport java.time.temporal.ChronoUnit;\nimport java.util.HashMap;\nimport javax.annotation.Nullable;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.events.PlayerSpawned;\nimport net.runelite.client.chat.ChatColorType;\nimport net.runelite.client.chat.ChatMessageBuilder;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.chat.QueuedMessage;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Ignore List Alerter\"\n)\npublic class IgnoreListAlerterPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Inject\n\tprivate ChatMessageManager chatMessageManager;\n\n\t@Inject\n\tprivate IgnoreListAlerterConfig config;\n\n\tint delay \u003d -1;\n\tHashMap\u003cString, Instant\u003e delayList;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tdelay \u003d config.alertTimeOut();\n\t\tdelayList \u003d new HashMap\u003c\u003e();\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tdelay \u003d -1;\n\t\tdelayList \u003d null;\n\t}\n\n\t@Provides\n\tpublic IgnoreListAlerterConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(IgnoreListAlerterConfig.class);\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif (event.getGroup().equals(GROUP))\n\t\t{\n\t\t\tdelay \u003d config.alertTimeOut();\n\t\t}\n\t}\n\n\t@Nullable\n\tprivate String getFriendNote(String displayName)\n\t{\n\t\treturn configManager.getConfiguration(\"friendNotes\", \"note_\" + displayName);\n\t}\n\n\t@Subscribe\n\tpublic void onPlayerSpawned(PlayerSpawned playerSpawned)\n\t{\n\t\tString name \u003d playerSpawned.getPlayer().getName();\n\n\t\tif (client.getIgnoreContainer().findByName(name) !\u003d null)\n\t\t{\n\t\t\t Instant instant \u003d delayList.getOrDefault(name, Instant.now().minus(1L, ChronoUnit.SECONDS));\n\n\t\t\t if (instant.isBefore(Instant.now()))\n\t\t\t {\n\t\t\t \tString note \u003d getFriendNote(name);\n\t\t\t \tif (note !\u003d null)\n\t\t\t \t{\n\t\t\t \t\tdelayList.put(name, Instant.now().plusSeconds(delay * 60L));\n\t\t\t \t\talertPlayerWarning(name, note);\n\t\t\t \t}\n\t\t\t }\n\t\t}\n\t}\n\n\tprivate void alertPlayerWarning(String rsn, String note)\n\t{\n\t\tChatMessageBuilder response \u003d new ChatMessageBuilder();\n\t\tresponse.append(\"Nearby Player \")\n\t\t\t.append(ChatColorType.HIGHLIGHT)\n\t\t\t.append(rsn)\n\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t.append(\" is on ignore list for \")\n\t\t\t.append(ChatColorType.HIGHLIGHT)\n\t\t\t.append(note);\n\n\t\tchatMessageManager.queue(QueuedMessage.builder()\n\t\t\t.type(ChatMessageType.CONSOLE)\n\t\t\t.runeLiteFormattedMessage(response.build())\n\t\t\t.build());\n\t}\n}","filePath":"src\\main\\java\\com\\zom\\ignore\\IgnoreListAlerterPlugin.java"},{"fileName":"ExamplePluginTest.java","content":"package com.zom.ignore;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ExamplePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(IgnoreListAlerterPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\zom\\ignore\\ExamplePluginTest.java"}]},{"commit":"9a403ea04c43e00a8a4b7b5d134361398bbbe173","repository":"https://github.com/InfernoStats/godbook.git","internalName":"godbook","files":[{"fileName":"GodbookConfig.java","content":"package com.infernostats;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"Godbook\")\npublic interface GodbookConfig extends Config\n{\n\t@ConfigItem(\n\t\t\tposition \u003d 0,\n\t\t\tkeyName \u003d \"theatreOnly\",\n\t\t\tname \u003d \"Theatre of Blood Only\",\n\t\t\tdescription \u003d \"Only display the overlay when in the Theatre of Blood\"\n\t)\n\tdefault boolean theatreOnly()\n\t{\n\t\treturn false;\n\t}\n\n  @ConfigItem(\n      position \u003d 1,\n      keyName \u003d \"instanceOnly\",\n      name \u003d \"Instance Only\",\n      description \u003d \"Only display the overlay when in an instance\"\n  )\n  default boolean instanceOnly()\n  {\n    return false;\n  }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d \"ticks\",\n\t\t\tname \u003d \"Ticks\",\n\t\t\tdescription \u003d \"How many ticks the counter remains active for\"\n\t)\n\tdefault int maxTicks()\n\t{\n\t\treturn 157;\n\t}\n\n  enum AllowedAnimations {\n    EMOTES_ONLY,\n    GODBOOKS_ONLY,\n    BOTH\n  };\n\n  @ConfigItem(\n      position \u003d 3,\n      keyName \u003d \"allowedAnimations\",\n      name \u003d \"Allowed Animations\",\n      description \u003d \"Trigger the overlay on Emotes, Godbooks, or Both\"\n  )\n  default AllowedAnimations animations()\n  {\n    return AllowedAnimations.BOTH;\n  }\n\n  @ConfigItem(\n      position \u003d 4,\n      keyName \u003d \"reverse\",\n      name \u003d \"Reverse Player List\",\n      description \u003d \"Display the current list of players in reverse order\"\n  )\n  default boolean reverse()\n  {\n    return false;\n  }\n}\n","filePath":"src\\main\\java\\com\\infernostats\\GodbookConfig.java"},{"fileName":"GodbookOverlay.java","content":"package com.infernostats;\n\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.LineComponent;\nimport net.runelite.client.ui.overlay.components.PanelComponent;\nimport net.runelite.client.ui.overlay.components.TitleComponent;\n\nimport javax.inject.Inject;\nimport java.awt.*;\nimport java.util.List;\nimport java.util.*;\n\nclass GodbookOverlay extends Overlay {\n  private final GodbookPlugin plugin;\n  private final GodbookConfig config;\n  private final PanelComponent panelComponent \u003d new PanelComponent();\n\n  @Inject\n  private GodbookOverlay(GodbookPlugin plugin, GodbookConfig config) {\n    this.plugin \u003d plugin;\n    this.config \u003d config;\n\n    setPosition(OverlayPosition.ABOVE_CHATBOX_RIGHT);\n  }\n\n  @Override\n  public Dimension render(Graphics2D graphics) {\n    String title \u003d \"Tick:\";\n    LinkedHashMap\u003cString, Integer\u003e players \u003d plugin.getPlayers();\n\n    panelComponent.getChildren().clear();\n\n    if (!players.isEmpty()) {\n      panelComponent.setPreferredSize(new Dimension(getMaxWidth(graphics, players, title) + 14, 0));\n      panelComponent.getChildren().add(TitleComponent.builder().text(title).color(Color.green).build());\n\n      if (config.reverse()) {\n        List\u003cMap.Entry\u003cString, Integer\u003e\u003e entries \u003d new ArrayList\u003c\u003e(players.entrySet());\n        for (int i \u003d entries.size() - 1; i \u003e\u003d 0; i--) {\n          Map.Entry\u003cString, Integer\u003e entry \u003d entries.get(i);\n          addPlayerToOverlay(entry.getKey(), entry.getValue());\n        }\n      } else {\n        players.forEach(this::addPlayerToOverlay);\n      }\n    }\n\n    return panelComponent.render(graphics);\n  }\n\n  private int getMaxWidth(Graphics2D graphics, LinkedHashMap\u003cString, Integer\u003e players, String title) {\n    String longestKey \u003d Collections.max(players.keySet(), Comparator.comparingInt(String::length));\n    return graphics.getFontMetrics().stringWidth(longestKey) + graphics.getFontMetrics().stringWidth(title);\n  }\n\n  private void addPlayerToOverlay(String playerName, Integer ticks) {\n    panelComponent.getChildren().add(LineComponent.builder().left(playerName).right(Integer.toString(ticks)).build());\n  }\n}\n\n","filePath":"src\\main\\java\\com\\infernostats\\GodbookOverlay.java"},{"fileName":"GodbookPlugin.java","content":"package com.infernostats;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\n\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.AnimationChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.gameval.VarbitID;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\nimport java.util.LinkedHashMap;\n\n@Slf4j\n@PluginDescriptor(\n  name \u003d \"Godbook\",\n  tags \u003d {\"timer\", \"timing\", \"maiden\", \"xarpus\", \"verzik\"}\n)\npublic class GodbookPlugin extends Plugin\n{\n\t@Getter(AccessLevel.MODULE)\n\tprivate LinkedHashMap\u003cString, Integer\u003e players;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate GodbookOverlay overlay;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate GodbookConfig config;\n\n\t@Provides\n\tGodbookConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(GodbookConfig.class);\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tplayers \u003d new LinkedHashMap\u003c\u003e();\n\t\toverlayManager.add(overlay);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(overlay);\n\t\tplayers.clear();\n\t}\n\n  @Subscribe\n  public void onAnimationChanged(final AnimationChanged event)\n  {\n    if (!(event.getActor() instanceof Player))\n    {\n      return;\n    }\n\n\t\tif (config.theatreOnly() \u0026\u0026 !isInTheatreOfBlood())\n\t\t\treturn;\n\n    if (config.instanceOnly() \u0026\u0026 !isInInstance())\n      return;\n\n    switch (config.animations()) {\n      case BOTH: {\n        if (TimingAnimationID.isTimingAnimation(event.getActor().getAnimation()))\n          players.put(event.getActor().getName(), 0);\n      }\n      case GODBOOKS_ONLY: {\n        if (TimingAnimationID.isGodbookAnimation(event.getActor().getAnimation()))\n          players.put(event.getActor().getName(), 0);\n      }\n      case EMOTES_ONLY: {\n        if (TimingAnimationID.isEmoteAnimation(event.getActor().getAnimation()))\n          players.put(event.getActor().getName(), 0);\n      }\n    }\n  }\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event)\n\t{\n\t\tif (players.isEmpty())\n\t\t\treturn;\n\n\t\tplayers.entrySet()\n\t\t\t.forEach(i -\u003e i.setValue(i.getValue() + 1));\n\n\t\tplayers.entrySet()\n\t\t\t.removeIf(i -\u003e i.getValue() \u003e\u003d config.maxTicks());\n\t}\n\n  private boolean isInTheatreOfBlood()\n  {\n    return client.getVarbitValue(VarbitID.TOB_CLIENT_PARTYSTATUS) !\u003d 0;\n  }\n\n  private boolean isInInstance()\n  {\n    WorldView wv \u003d client.getTopLevelWorldView();\n    if (wv \u003d\u003d null) {\n      return false;\n    }\n    return wv.isInstance();\n  }\n}","filePath":"src\\main\\java\\com\\infernostats\\GodbookPlugin.java"},{"fileName":"TimingAnimationID.java","content":"package com.infernostats;\n\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.stream.Collectors;\nimport java.util.stream.Stream;\n\npublic class TimingAnimationID {\n  public static final int HOLY_BOOK \u003d 1335;\n  public static final int HOLY_BOOK_OR \u003d 9403;\n  public static final int UNHOLY_BOOK \u003d 1336;\n  public static final int UNHOLY_BOOK_OR \u003d 9404;\n  public static final int BOOK_OF_BALANCE \u003d 1337;\n  public static final int BOOK_OF_BALANCE_OR \u003d 9405;\n  public static final int BOOK_OF_WAR \u003d 7153;\n  public static final int BOOK_OF_WAR_OR \u003d 9414;\n  public static final int BOOK_OF_LAW \u003d 7154;\n  public static final int BOOK_OF_LAW_OR \u003d 9440;\n  public static final int BOOK_OF_DARKNESS \u003d 7155;\n  public static final int BOOK_OF_DARKNESS_OR \u003d 9441;\n  public static final int SOULFLAME_HORN \u003d 12158;\n\n  public static final int EMOTE_YES \u003d 855;\n  public static final int EMOTE_NO \u003d 856;\n  public static final int EMOTE_SPIN \u003d 2107;\n  public static final int EMOTE_THINK \u003d 857;\n  public static final int EMOTE_DANCE \u003d 866;\n\n  private static final List\u003cInteger\u003e godbookAnimationIDs \u003d Arrays.asList(\n      HOLY_BOOK,\n      HOLY_BOOK_OR,\n      UNHOLY_BOOK,\n      UNHOLY_BOOK_OR,\n      BOOK_OF_BALANCE,\n      BOOK_OF_BALANCE_OR,\n      BOOK_OF_WAR,\n      BOOK_OF_WAR_OR,\n      BOOK_OF_LAW,\n      BOOK_OF_LAW_OR,\n      BOOK_OF_DARKNESS,\n      BOOK_OF_DARKNESS_OR,\n      SOULFLAME_HORN\n  );\n\n  private static final List\u003cInteger\u003e emoteAnimationIDs \u003d Arrays.asList(\n      EMOTE_YES,\n      EMOTE_NO,\n      EMOTE_SPIN,\n      EMOTE_THINK,\n      EMOTE_DANCE\n  );\n\n  private static final List\u003cInteger\u003e timingAnimationIDs \u003d Stream.of(\n      godbookAnimationIDs.stream(),\n      emoteAnimationIDs.stream()\n  ).flatMap(s -\u003e s).collect(Collectors.toList());\n\n  public static boolean isGodbookAnimation(int animationID)\n  {\n    return godbookAnimationIDs.contains(animationID);\n  }\n\n  public static boolean isEmoteAnimation(int animationID)\n  {\n    return emoteAnimationIDs.contains(animationID);\n  }\n\n  public static boolean isTimingAnimation(int animationID)\n  {\n    return timingAnimationIDs.contains(animationID);\n  }\n}\n","filePath":"src\\main\\java\\com\\infernostats\\TimingAnimationID.java"},{"fileName":"GodbookPluginTest.java","content":"package com.infernostats;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class GodbookPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(GodbookPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\infernostats\\GodbookPluginTest.java"}]},{"commit":"a9caed3f4b9e3fb005375d9bb37aeb70e53a1d79","repository":"https://github.com/robrichardson13/challenge-mode-indicator.git","internalName":"challenge-mode-indicator","files":[{"fileName":"ChallengeModeIndicatorConfig.java","content":"package io.robrichardson.challengemodeindicator;\n\nimport net.runelite.client.config.Alpha;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\nimport java.awt.*;\n\n@ConfigGroup(ChallengeModeIndicatorConfig.GROUP)\npublic interface ChallengeModeIndicatorConfig extends Config\n{\n\tString GROUP \u003d \"ChallengeModeIndicator\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"activeText\",\n\t\tname \u003d \"Active Lever Text\",\n\t\tdescription \u003d \"The text to show over the lever when challenge mode is active\"\n\t)\n\tdefault String activeText() {\n\t\treturn \"Challenge Mode: Active\";\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"activeColor\",\n\t\t\tname \u003d \"Text Color\",\n\t\t\tdescription \u003d \"Configures the lever text color\"\n\t)\n\tdefault Color activeColor() {\n\t\treturn Color.GREEN;\n\t}\n}\n","filePath":"src\\main\\java\\io\\robrichardson\\challengemodeindicator\\ChallengeModeIndicatorConfig.java"},{"fileName":"ChallengeModeIndicatorOverlay.java","content":"package io.robrichardson.challengemodeindicator;\n\nimport com.google.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.Point;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\n\nimport java.awt.*;\n\n@Slf4j\npublic class ChallengeModeIndicatorOverlay extends Overlay {\n    private static final int MAX_DISTANCE \u003d 2350;\n    private final Client client;\n    private final ChallengeModeIndicatorConfig config;\n    private final ChallengeModeIndicatorPlugin plugin;\n\n    @Inject\n    ChallengeModeIndicatorOverlay(Client client, ChallengeModeIndicatorConfig config, ChallengeModeIndicatorPlugin plugin) {\n        super(plugin);\n        this.client \u003d client;\n        this.config \u003d config;\n        this.plugin \u003d plugin;\n\n        setPosition(OverlayPosition.DYNAMIC);\n        setLayer(OverlayLayer.ABOVE_SCENE);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        Player player \u003d client.getLocalPlayer();\n        if(plugin.isChallengeModeActivated() \u0026\u0026 player !\u003d null \u0026\u0026 plugin.getLeverObject() !\u003d null \u0026\u0026 plugin.getLeverTile() !\u003d null) {\n            LocalPoint playerLocation \u003d player.getLocalLocation();\n            LocalPoint leverLocation \u003d plugin.getLeverObject().getLocalLocation();\n            if (plugin.getLeverTile().getPlane() \u003d\u003d client.getPlane() \u0026\u0026 playerLocation.distanceTo(leverLocation) \u003c\u003d MAX_DISTANCE) {\n                if(plugin.getLeverObject().getSceneMinLocation().equals(plugin.getLeverTile().getSceneLocation())) {\n                    final Point textLocation \u003d plugin.getLeverObject().getCanvasTextLocation(graphics, config.activeText(), 200);\n                    if(textLocation !\u003d null) {\n                        OverlayUtil.renderTextLocation(graphics, textLocation, config.activeText(), config.activeColor());\n                    }\n//                    OverlayUtil.renderTileOverlay(graphics, plugin.getLeverObject(), config.activeText(), config.activeColor());\n                }\n            }\n        }\n\n        return null;\n    }\n}\n","filePath":"src\\main\\java\\io\\robrichardson\\challengemodeindicator\\ChallengeModeIndicatorOverlay.java"},{"fileName":"ChallengeModeIndicatorPlugin.java","content":"package io.robrichardson.challengemodeindicator;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\n\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GameObjectDespawned;\nimport net.runelite.api.events.GameObjectSpawned;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\nimport java.util.*;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Challenge Mode Indicator\"\n)\npublic class ChallengeModeIndicatorPlugin extends Plugin\n{\n\tfinal List\u003cInteger\u003e leverIds \u003d new ArrayList\u003c\u003e(Arrays.asList(\n\t\t\tObjectID.LEVER_13672,\n\t\t\tObjectID.LEVER_13673,\n\t\t\tObjectID.LEVER_13674\n\t));\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ChallengeModeIndicatorConfig config;\n\n\t@Inject\n\tprivate ChallengeModeIndicatorOverlay overlay;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Getter\n\tprivate boolean challengeModeActivated \u003d false;\n\n\t@Getter\n\tprivate GameObject leverObject;\n\n\t@Getter\n\tprivate Tile leverTile;\n\n\t@Override\n\tprotected void startUp() throws Exception {\n\t\toverlayManager.add(overlay);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception {\n\t\toverlayManager.remove(overlay);\n\t\tleverObject \u003d null;\n\t\tleverTile \u003d null;\n\t}\n\n\t@Provides\n\tChallengeModeIndicatorConfig provideConfig(ConfigManager configManager)  {\n\t\treturn configManager.getConfig(ChallengeModeIndicatorConfig.class);\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(final GameStateChanged event) {\n\t\tif (event.getGameState() \u003d\u003d GameState.HOPPING || event.getGameState() \u003d\u003d GameState.LOGIN_SCREEN)\n\t\t{\n\t\t\tchallengeModeActivated \u003d false;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameObjectSpawned(final GameObjectSpawned event) {\n\t\tfinal GameObject gameObject \u003d event.getGameObject();\n\t\tfinal int id \u003d gameObject.getId();\n\t\tif(leverIds.contains(id)) {\n\t\t\tleverObject \u003d gameObject;\n\t\t\tleverTile \u003d event.getTile();\n\t\t}\n\t}\n\n\t@Subscribe\n\tprivate void onGameObjectDespawned(final GameObjectDespawned event) {\n\t\tfinal GameObject gameObject \u003d event.getGameObject();\n\t\tfinal int id \u003d gameObject.getId();\n\t\tif(leverIds.contains(id)) {\n\t\t\tleverObject \u003d null;\n\t\t\tleverTile \u003d null;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(final ChatMessage event) {\n\t\tif (event.getType() !\u003d ChatMessageType.SPAM \u0026\u0026 event.getType() !\u003d ChatMessageType.GAMEMESSAGE) {\n\t\t\treturn;\n\t\t}\n\n\t\tString enableString \u003d \"Challenge mode is on.\";\n\t\tString disableString \u003d \"Challenge mode has ended.\";\n\t\tif(Objects.equals(event.getMessage(), enableString)) {\n\t\t\tchallengeModeActivated \u003d true;\n\t\t} else if(Objects.equals(event.getMessage(), disableString)) {\n\t\t\tchallengeModeActivated \u003d false;\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\io\\robrichardson\\challengemodeindicator\\ChallengeModeIndicatorPlugin.java"},{"fileName":"ChallengeModeIndicatorPluginTest.java","content":"package io.robrichardson.challengemodeindicator;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ChallengeModeIndicatorPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(ChallengeModeIndicatorPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\io\\robrichardson\\challengemodeindicator\\ChallengeModeIndicatorPluginTest.java"}]},{"commit":"f831aa59a66cd54cd17a9fa5596991ac0aa8c46c","repository":"https://github.com/hybridbrizz/inventorytotal.git","internalName":"inventory-total","files":[{"fileName":"InventoryTotalAlignment.java","content":"package com.ericversteeg;\n\npublic enum InventoryTotalAlignment {\n    CENTER,\n    LEFT,\n    RIGHT\n}\n","filePath":"src\\main\\java\\com\\ericversteeg\\InventoryTotalAlignment.java"},{"fileName":"InventoryTotalConfig.java","content":"package com.ericversteeg;\n\nimport net.runelite.client.config.*;\n\nimport java.awt.*;\nimport java.awt.event.InputEvent;\nimport java.awt.event.KeyEvent;\n\n@ConfigGroup(InventoryTotalConfig.GROUP)\npublic interface InventoryTotalConfig extends Config\n{\n\tString GROUP \u003d \"inventorytotal\";\n\n\t@ConfigItem(\n\t\t\tposition \u003d -2,\n\t\t\tkeyName \u003d \"itemPricesKey\",\n\t\t\tname \u003d \"Prices\",\n\t\t\tdescription \u003d \"Configures the price type.\"\n\t)\n\tdefault InventoryTotalPriceType priceType()\n\t{\n\t\treturn InventoryTotalPriceType.GRAND_EXCHANGE;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d -2,\n\t\t\tkeyName \u003d \"enableProfitLoss\",\n\t\t\tname \u003d \"Profit / Loss\",\n\t\t\tdescription \u003d \"Configures whether or not current total is relative to start amount.\"\n\t)\n\tdefault boolean enableProfitLoss()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d -2,\n\t\t\tkeyName \u003d \"profitLossToggleKey\",\n\t\t\tname \u003d \"Switch Mode Key\",\n\t\t\tdescription \u003d \"Switch between Total \u0026 Profit / Loss modes.\"\n\t)\n\tdefault Keybind profitLossToggleKey()\n\t{\n\t\treturn new Keybind(KeyEvent.VK_G, InputEvent.CTRL_DOWN_MASK);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d -1,\n\t\t\tkeyName \u003d \"newRunKey\",\n\t\t\tname \u003d \"Reset Key\",\n\t\t\tdescription \u003d \"Resets the ledger and timer.\"\n\t)\n\tdefault Keybind newRunKey()\n\t{\n\t\treturn new Keybind(KeyEvent.VK_K, InputEvent.CTRL_DOWN_MASK);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"totalBackgroundColor\",\n\t\t\tname \u003d \"Background Color\",\n\t\t\tdescription \u003d \"Configures the background color.\"\n\t)\n\tdefault Color totalColor()\n\t{\n\t\treturn Color.decode(\"#99903D\");\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d \"totalTextColor\",\n\t\t\tname \u003d \"Text Color\",\n\t\t\tdescription \u003d \"Configures the text color.\"\n\t)\n\tdefault Color textColor()\n\t{\n\t\treturn Color.decode(\"#FFF7E3\");\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 3,\n\t\t\tkeyName \u003d \"totalBorderColor\",\n\t\t\tname \u003d \"Border Color\",\n\t\t\tdescription \u003d \"Configures the border color.\"\n\t)\n\tdefault Color borderColor()\n\t{\n\t\treturn Color.decode(\"#0E0E0E\");\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 4,\n\t\t\tkeyName \u003d \"profitBackgroundColor\",\n\t\t\tname \u003d \"Profit Color\",\n\t\t\tdescription \u003d \"Configures profit background color.\"\n\t)\n\tdefault Color profitColor()\n\t{\n\t\treturn Color.decode(\"#245C2D\");\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 5,\n\t\t\tkeyName \u003d \"profitTextColor\",\n\t\t\tname \u003d \"Profit Text Color\",\n\t\t\tdescription \u003d \"Configures profit text color.\"\n\t)\n\tdefault Color profitTextColor()\n\t{\n\t\treturn Color.decode(\"#FFF7E3\");\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 6,\n\t\t\tkeyName \u003d \"profitBorderColor\",\n\t\t\tname \u003d \"Profit Border Color\",\n\t\t\tdescription \u003d \"Configures profit border color.\"\n\t)\n\tdefault Color profitBorderColor()\n\t{\n\t\treturn Color.decode(\"#0E0E0E\");\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 7,\n\t\t\tkeyName \u003d \"lossBackgroundColor\",\n\t\t\tname \u003d \"Loss Color\",\n\t\t\tdescription \u003d \"Configures loss background color.\"\n\t)\n\tdefault Color lossColor()\n\t{\n\t\treturn Color.decode(\"#5F1515\");\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 8,\n\t\t\tkeyName \u003d \"lossTextColor\",\n\t\t\tname \u003d \"Loss Text Color\",\n\t\t\tdescription \u003d \"Configures loss text color.\"\n\t)\n\tdefault Color lossTextColor()\n\t{\n\t\treturn Color.decode(\"#FFF7E3\");\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 9,\n\t\t\tkeyName \u003d \"lossBorderColor\",\n\t\t\tname \u003d \"Loss Border Color\",\n\t\t\tdescription \u003d \"Configures loss border color.\"\n\t)\n\tdefault Color lossBorderColor()\n\t{\n\t\treturn Color.decode(\"#0E0E0E\");\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 11,\n\t\t\tkeyName \u003d \"roundedCorners\",\n\t\t\tname \u003d \"Rounded Corners\",\n\t\t\tdescription \u003d \"Toggle rounded corners.\"\n\t)\n\tdefault boolean roundCorners()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 12,\n\t\t\tkeyName \u003d \"cornerRadius\",\n\t\t\tname \u003d \"Corner Radius\",\n\t\t\tdescription \u003d \"Configures the corner radius.\"\n\t)\n\tdefault int cornerRadius()\n\t{\n\t\treturn 10;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 13,\n\t\t\tkeyName \u003d \"alignment\",\n\t\t\tname \u003d \"Alignment\",\n\t\t\tdescription \u003d \"Configures alignment.\"\n\t)\n\tdefault InventoryTotalAlignment horizontalAlignment()\n\t{\n\t\treturn InventoryTotalAlignment.CENTER;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 14,\n\t\t\tkeyName \u003d \"inventoryOffsetX\",\n\t\t\tname \u003d \"Inventory Offset X\",\n\t\t\tdescription \u003d \"Configures x-axis offset.\"\n\t)\n\tdefault int inventoryXOffset()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 15,\n\t\t\tkeyName \u003d \"inventoryOffsetXNegative\",\n\t\t\tname \u003d \"Inventory Offset X Negative\",\n\t\t\tdescription \u003d \"Configures whether or not the y-axis offset is a negative number.\"\n\t)\n\tdefault boolean isInventoryXOffsetNegative()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 16,\n\t\t\tkeyName \u003d \"inventoryOffsetY\",\n\t\t\tname \u003d \"Inventory Offset Y\",\n\t\t\tdescription \u003d \"Configures y-axis offset.\"\n\t)\n\tdefault int inventoryYOffset()\n\t{\n\t\treturn 12;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 17,\n\t\t\tkeyName \u003d \"inventoryOffsetYNegative\",\n\t\t\tname \u003d \"Inventory Offset Y Negative\",\n\t\t\tdescription \u003d \"Configures whether or not the y-axis offset is a negative number.\"\n\t)\n\tdefault boolean isInventoryYOffsetNegative()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 18,\n\t\t\tkeyName \u003d \"showLapTime\",\n\t\t\tname \u003d \"Show Run Time\",\n\t\t\tdescription \u003d \"Configures whether or not the run time is visible.\"\n\t)\n\tdefault boolean showRunTime()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 19,\n\t\t\tkeyName \u003d \"showExactGp\",\n\t\t\tname \u003d \"Show Exact Gp\",\n\t\t\tdescription \u003d \"Configures whether or not the exact gp value is visible.\"\n\t)\n\tdefault boolean showExactGp()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 20,\n\t\t\tkeyName \u003d \"showCoinStack\",\n\t\t\tname \u003d \"Show Coin Stack\",\n\t\t\tdescription \u003d \"Configures whether or not the coin stack image is visible.\"\n\t)\n\tdefault boolean showCoinStack()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 21,\n\t\t\tkeyName \u003d \"showWhileBanking\",\n\t\t\tname \u003d \"Show While Banking\",\n\t\t\tdescription \u003d \"Configures whether or not the total is visible while banking.\"\n\t)\n\tdefault boolean showWhileBanking()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 22,\n\t\t\tkeyName \u003d \"showOnEmpty\",\n\t\t\tname \u003d \"Show On Empty\",\n\t\t\tdescription \u003d \"Configures whether or not to show the total when inventory is empty.\"\n\t)\n\tdefault boolean showOnEmpty()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 22,\n\t\t\tkeyName \u003d \"showTooltip\",\n\t\t\tname \u003d \"Show Ledger\",\n\t\t\tdescription \u003d \"Configures whether or not ledger info is shown when mousing over.\"\n\t)\n\tdefault boolean showTooltip()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 23,\n\t\t\tkeyName \u003d \"hideWithInventory\",\n\t\t\tname \u003d \"Hide With Inventory\",\n\t\t\tdescription \u003d \"Configures whether or not to hide the tooltip when the inventory is hidden.\"\n\t)\n\tdefault boolean hideWithInventory()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 23,\n\t\t\tkeyName \u003d \"newRunAfterBanking\",\n\t\t\tname \u003d \"Reset After Banking\",\n\t\t\tdescription \u003d \"Resets the ledger and timer after banking.\"\n\t)\n\tdefault boolean newRunAfterBanking() { return true; }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 24,\n\t\t\tkeyName \u003d \"ignoredItems\",\n\t\t\tname \u003d \"Ignored Items\",\n\t\t\tdescription \u003d \"Ignore these items in your inventory.\"\n\t)\n\tdefault String ignoredItems() {\n\t\treturn \"Cannon barrels, Cannon base, Cannon furnace, Cannon stand\";\n\t}\n}\n","filePath":"src\\main\\java\\com\\ericversteeg\\InventoryTotalConfig.java"},{"fileName":"InventoryTotalLedgerItem.java","content":"package com.ericversteeg;\n\npublic class InventoryTotalLedgerItem {\n    private final String description;\n    private int qty;\n    private final int amount;\n\n    public InventoryTotalLedgerItem(String description, int qty, int amount)\n    {\n        this.description \u003d description;\n        this.qty \u003d qty;\n        this.amount \u003d amount;\n    }\n\n    public String getDescription()\n    {\n        return description;\n    }\n\n    public int getQty()\n    {\n        return qty;\n    }\n\n    public int getAmount()\n    {\n        return amount;\n    }\n\n    public void addQuantityDifference(int qtyDifference)\n    {\n        qty +\u003d qtyDifference;\n    }\n}\n","filePath":"src\\main\\java\\com\\ericversteeg\\InventoryTotalLedgerItem.java"},{"fileName":"InventoryTotalMode.java","content":"package com.ericversteeg;\n\npublic enum InventoryTotalMode {\n    TOTAL,\n    PROFIT_LOSS\n}\n","filePath":"src\\main\\java\\com\\ericversteeg\\InventoryTotalMode.java"},{"fileName":"InventoryTotalOverlay.java","content":"package com.ericversteeg;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.ItemContainer;\nimport net.runelite.api.ItemID;\nimport net.runelite.api.widgets.ComponentID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.TextComponent;\nimport net.runelite.client.util.ImageUtil;\n\nimport javax.inject.Inject;\nimport java.awt.*;\nimport java.awt.geom.RoundRectangle2D;\nimport java.awt.image.BufferedImage;\nimport java.text.NumberFormat;\nimport java.time.Instant;\nimport java.util.Arrays;\nimport java.util.Comparator;\nimport java.util.LinkedList;\nimport java.util.Locale;\nimport java.util.stream.Collectors;\nimport java.util.stream.IntStream;\n\nclass InventoryTotalOverlay extends Overlay\n{\n\tprivate static final int TEXT_Y_OFFSET \u003d 17;\n\tprivate static final String PROFIT_LOSS_TIME_FORMAT \u003d \"%02d:%02d:%02d\";\n\tprivate static final String PROFIT_LOSS_TIME_NO_HOURS_FORMAT \u003d \"%02d:%02d\";\n\tprivate static final int HORIZONTAL_PADDING \u003d 10;\n\tprivate static final int BANK_CLOSE_DELAY \u003d 1200;\n\tprivate static final Color LEDGER_BACKGROUND_COLOR \u003d new Color(27, 27, 27, 202);\n\tstatic final int COINS \u003d ItemID.COINS_995;\n\n\tprivate final Client client;\n\tprivate final InventoryTotalPlugin plugin;\n\tprivate final InventoryTotalConfig config;\n\n\tprivate final ItemManager itemManager;\n\n\tprivate Widget inventoryWidget;\n\tprivate ItemContainer inventoryItemContainer;\n\tprivate ItemContainer equipmentItemContainer;\n\n\tprivate boolean onceBank \u003d false;\n\n\tprivate boolean showInterstitial \u003d false;\n\n\tprivate boolean postNewRun \u003d false;\n\tprivate long newRunTime \u003d 0;\n\n\tprivate int invX \u003d -1;\n\tprivate int invY \u003d -1;\n\tprivate int invW \u003d -1;\n\tprivate int invH \u003d -1;\n\n\tprivate Widget viewportWidget;\n\tprivate int canvasX \u003d 0;\n\tprivate int canvasY \u003d 0;\n\tprivate int canvasWidth \u003d 0;\n\tprivate int canvasHeight \u003d 0;\n\n\tprivate boolean isResizableModern \u003d true;\n\n\t@Inject\n\tprivate InventoryTotalOverlay(Client client, InventoryTotalPlugin plugin, InventoryTotalConfig config, ItemManager itemManager)\n\t{\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.ABOVE_WIDGETS);\n\n\t\tthis.client \u003d client;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\n\t\tthis.itemManager \u003d itemManager;\n\t}\n\n\tprivate Widget getViewportWidget()\n\t{\n\t\tWidget widget;\n\n\t\twidget \u003d client.getWidget(ComponentID.RESIZABLE_VIEWPORT_INTERFACE_CONTAINER);\n\t\tif (widget !\u003d null \u0026\u0026 !widget.isHidden())\n\t\t{\n\t\t\tisResizableModern \u003d false;\n\t\t\treturn widget;\n\t\t}\n\n\t\twidget \u003d client.getWidget(ComponentID.RESIZABLE_VIEWPORT_BOTTOM_LINE_INTERFACE_CONTAINER);\n\t\tif (widget !\u003d null \u0026\u0026 !widget.isHidden())\n\t\t{\n\t\t\tisResizableModern \u003d true;\n\t\t\treturn widget;\n\t\t}\n\n\t\twidget \u003d client.getWidget(ComponentID.FIXED_VIEWPORT_INTERFACE_CONTAINER);\n\t\tif (widget !\u003d null \u0026\u0026 !widget.isHidden())\n\t\t{\n\t\t\tisResizableModern \u003d false;\n\t\t\treturn widget;\n\t\t}\n\n\t\twidget \u003d client.getWidget(ComponentID.BANK_INVENTORY_ITEM_CONTAINER);\n\t\tif (widget !\u003d null \u0026\u0026 !widget.isHidden()) return widget;\n\n\t\treturn null;\n\t}\n\n\tvoid updatePluginState()\n\t{\n\t\tinventoryWidget \u003d client.getWidget(ComponentID.INVENTORY_CONTAINER);\n\n\t\tinventoryItemContainer \u003d client.getItemContainer(InventoryID.INVENTORY);\n\t\tequipmentItemContainer \u003d client.getItemContainer(InventoryID.EQUIPMENT);\n\n\t\tif (plugin.getPLToggleOverride() \u003d\u003d null)\n\t\t{\n\t\t\tif (config.enableProfitLoss())\n\t\t\t{\n\t\t\t\tplugin.setMode(InventoryTotalMode.PROFIT_LOSS);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tplugin.setMode(InventoryTotalMode.TOTAL);\n\t\t\t}\n\t\t}\n\t\telse if (plugin.getPLToggleOverride() \u003d\u003d InventoryTotalMode.PROFIT_LOSS)\n\t\t{\n\t\t\tplugin.setMode(InventoryTotalMode.PROFIT_LOSS);\n\t\t}\n\t\telse if (plugin.getPLToggleOverride() \u003d\u003d InventoryTotalMode.TOTAL)\n\t\t{\n\t\t\tplugin.setMode(InventoryTotalMode.TOTAL);\n\t\t}\n\n\t\tboolean isBank \u003d false;\n\n\t\tif (inventoryWidget \u003d\u003d null || inventoryWidget.getCanvasLocation().getX() \u003c 0 || inventoryWidget.isHidden())\n\t\t{\n\t\t\tWidget [] altInventoryWidgets \u003d new Widget[]\n\t\t\t{\n\t\t\t\tclient.getWidget(ComponentID.BANK_INVENTORY_ITEM_CONTAINER),\n\t\t\t\tclient.getWidget(ComponentID.DEPOSIT_BOX_INVENTORY_ITEM_CONTAINER)\n\t\t\t};\n\n\t\t\tfor (Widget altInventoryWidget: altInventoryWidgets)\n\t\t\t{\n\t\t\t\tinventoryWidget \u003d altInventoryWidget;\n\t\t\t\tif (inventoryWidget !\u003d null \u0026\u0026 !inventoryWidget.isHidden())\n\t\t\t\t{\n\t\t\t\t\tisBank \u003d true;\n\t\t\t\t\tif (!onceBank)\n\t\t\t\t\t{\n\t\t\t\t\t\tonceBank \u003d true;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (isBank)\n\t\t{\n\t\t\tplugin.setState(InventoryTotalState.BANK);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tplugin.setState(InventoryTotalState.RUN);\n\t\t}\n\n\t\t// before totals\n\t\tboolean newRun \u003d (plugin.getPreviousState() \u003d\u003d InventoryTotalState.BANK\n\t\t\t\t\u0026\u0026 plugin.getState() \u003d\u003d InventoryTotalState.RUN\n\t\t\t\t\u0026\u0026 config.newRunAfterBanking()) || plugin.isManualNewRun();\n\t\tplugin.getRunData().itemQtys.clear();\n\n\t\t// totals\n\t\tint [] inventoryTotals \u003d plugin.getInventoryTotals(false);\n\t\tint [] equipmentTotals \u003d plugin.getEquipmentTotals(false);\n\n\t\tint inventoryTotal \u003d inventoryTotals[InventoryTotalPlugin.TOTAL_GP_GE_INDEX];\n\t\tint equipmentTotal \u003d equipmentTotals[0];\n\n\t\tint inventoryTotalHA \u003d inventoryTotals[InventoryTotalPlugin.TOTAL_GP_HA_INDEX];\n\t\tint equipmentTotalHA \u003d equipmentTotals[1];\n\n\t\tint inventoryQty \u003d inventoryTotals[InventoryTotalPlugin.TOTAL_QTY_INDEX];\n\n\t\tint totalGp \u003d 0;\n\t\tif (config.priceType() \u003d\u003d InventoryTotalPriceType.GRAND_EXCHANGE)\n\t\t{\n\t\t\ttotalGp +\u003d inventoryTotal;\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttotalGp +\u003d inventoryTotalHA;\n\t\t}\n\n\t\tif ((plugin.getState() \u003d\u003d InventoryTotalState.RUN || !config.newRunAfterBanking())\n\t\t\t\t\u0026\u0026 plugin.getMode() \u003d\u003d InventoryTotalMode.PROFIT_LOSS)\n\t\t{\n\t\t\tif (config.priceType() \u003d\u003d InventoryTotalPriceType.GRAND_EXCHANGE)\n\t\t\t{\n\t\t\t\ttotalGp +\u003d equipmentTotal;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttotalGp +\u003d equipmentTotalHA;\n\t\t\t}\n\t\t}\n\n\t\tplugin.setTotalGp(totalGp);\n\t\tplugin.setTotalQty(inventoryQty);\n\n\t\t// after totals\n\t\tif (newRun)\n\t\t{\n\t\t\tplugin.onNewRun();\n\n\t\t\tpostNewRun \u003d true;\n\t\t\tnewRunTime \u003d Instant.now().toEpochMilli();\n\t\t}\n\t\telse if (plugin.getPreviousState() \u003d\u003d InventoryTotalState.RUN \u0026\u0026 plugin.getState() \u003d\u003d InventoryTotalState.BANK)\n\t\t{\n\t\t\tplugin.onBank();\n\t\t}\n\n\t\t// check post new run\n\t\tif (postNewRun \u0026\u0026 (Instant.now().toEpochMilli() - newRunTime) \u003e BANK_CLOSE_DELAY)\n\t\t{\n\t\t\tplugin.postNewRun();\n\t\t\tpostNewRun \u003d false;\n\t\t}\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tupdatePluginState();\n\n\t\tviewportWidget \u003d getViewportWidget();\n\t\tWidget depositBox \u003d client.getWidget(ComponentID.DEPOSIT_BOX_INVENTORY_ITEM_CONTAINER);\n\n\t\tif (viewportWidget \u003d\u003d null\n\t\t\t\t|| viewportWidget.isHidden()\n\t\t\t\t|| (depositBox !\u003d null \u0026\u0026 !depositBox.isHidden()))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tcanvasX \u003d viewportWidget.getCanvasLocation().getX();\n\t\tcanvasY \u003d viewportWidget.getCanvasLocation().getY();\n\t\tcanvasWidth \u003d viewportWidget.getWidth() + 28;\n\t\tcanvasHeight \u003d viewportWidget.getHeight() + 41;\n\n\t\tif (inventoryWidget !\u003d null)\n\t\t{\n\t\t\tinvX \u003d inventoryWidget.getCanvasLocation().getX();\n\t\t\tinvY \u003d inventoryWidget.getCanvasLocation().getY();\n\t\t\tinvW \u003d inventoryWidget.getWidth();\n\t\t\tinvH \u003d inventoryWidget.getHeight();\n\t\t}\n\n\t\tif (invX \u003c 0 || invY \u003c 0 || invW \u003c 0 || invH \u003c 0)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (config.hideWithInventory() \u0026\u0026 (inventoryWidget \u003d\u003d null || inventoryWidget.isHidden()))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tint height \u003d 20;\n\n\t\tString totalText \u003d getTotalText(plugin.getProfitGp());\n\n\t\tString formattedRunTime \u003d getFormattedRunTime();\n\t\tString runTimeText \u003d null;\n\n\t\tif (formattedRunTime !\u003d null)\n\t\t{\n\t\t\trunTimeText \u003d \" (\" + formattedRunTime + \")\";\n\t\t}\n\n\t\tlong total \u003d plugin.getProfitGp();\n\n\t\tif (showInterstitial)\n\t\t{\n\t\t\ttotal \u003d 0;\n\n\t\t\tif (plugin.getMode() \u003d\u003d InventoryTotalMode.PROFIT_LOSS)\n\t\t\t{\n\t\t\t\ttotalText \u003d \"0\";\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttotalText \u003d getTotalText(plugin.getProfitGp());\n\t\t\t}\n\t\t}\n\n\t\trenderTotal(config, graphics, plugin,\n\t\t\t\tplugin.getTotalQty(), total, totalText, runTimeText, height);\n\n\t\treturn null;\n\t}\n\n\tprivate void renderTotal(InventoryTotalConfig config, Graphics2D graphics, InventoryTotalPlugin plugin,\n\t\t\t\t\t\t\t long totalQty, long total, String totalText,\n\t\t\t\t\t\t\t String runTimeText, int height) {\n\t\tint imageSize \u003d 15;\n\t\tboolean showCoinStack \u003d config.showCoinStack();\n\t\tint numCoins;\n\t\tif (total \u003e Integer.MAX_VALUE)\n\t\t{\n\t\t\tnumCoins \u003d Integer.MAX_VALUE;\n\t\t}\n\t\telse if (total \u003c Integer.MIN_VALUE)\n\t\t{\n\t\t\tnumCoins \u003d Integer.MIN_VALUE;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnumCoins \u003d (int) total;\n\t\t\tif (numCoins \u003d\u003d 0)\n\t\t\t{\n\t\t\t\tnumCoins \u003d 1000000;\n\t\t\t}\n\t\t}\n\t\tnumCoins \u003d Math.abs(numCoins);\n\n\t\tif ((totalQty \u003d\u003d 0 \u0026\u0026 !config.showOnEmpty()) || (plugin.getState() \u003d\u003d InventoryTotalState.BANK \u0026\u0026 !config.showWhileBanking())) {\n\t\t\treturn;\n\t\t}\n\n\t\tgraphics.setFont(FontManager.getRunescapeSmallFont());\n\t\tfinal int totalWidth \u003d graphics.getFontMetrics().stringWidth(totalText);\n\n\t\tint fixedRunTimeWidth \u003d 0;\n\t\tint actualRunTimeWidth \u003d 0;\n\t\tint imageWidthWithPadding \u003d 0;\n\n\t\tif (runTimeText !\u003d null \u0026\u0026 runTimeText.length() \u003e\u003d 2) {\n\t\t\tfixedRunTimeWidth \u003d 5 * (runTimeText.length() - 2) + (3 * 2) + 5;\n\t\t\tactualRunTimeWidth \u003d graphics.getFontMetrics().stringWidth(runTimeText);\n\t\t}\n\n\t\tif (showCoinStack)\n\t\t{\n\t\t\timageWidthWithPadding \u003d imageSize + 3;\n\t\t}\n\n\t\tint width \u003d totalWidth + fixedRunTimeWidth + imageWidthWithPadding + HORIZONTAL_PADDING * 2;\n\n\t\tint x \u003d (invX + invW / 2) - (width / 2);\n\t\tswitch (config.horizontalAlignment())\n\t\t{\n\t\t\tcase CENTER:\n\t\t\t\tbreak;\n\n\t\t\tcase LEFT:\n\t\t\t\tx \u003d invX;\n\t\t\t\tbreak;\n\n\t\t\tcase RIGHT:\n\t\t\t\tx \u003d invX + invW - width;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tint xOffset \u003d config.inventoryXOffset();\n\t\tif (config.isInventoryXOffsetNegative())\n\t\t{\n\t\t\txOffset *\u003d -1;\n\t\t}\n\t\tx +\u003d xOffset;\n\n\t\tint yOffset \u003d config.inventoryYOffset();\n\t\tif (!isResizableModern \u0026\u0026 yOffset \u003d\u003d 12)\n\t\t{\n\t\t\tyOffset +\u003d 30;\n\t\t}\n\t\tif (config.isInventoryYOffsetNegative())\n\t\t{\n\t\t\tyOffset *\u003d -1;\n\t\t}\n\t\tint y \u003d invY - height - yOffset;\n\n\t\tColor backgroundColor;\n\t\tColor borderColor;\n\t\tColor textColor;\n\n\t\tif ((plugin.getState() \u003d\u003d InventoryTotalState.BANK \u0026\u0026 config.newRunAfterBanking())\n\t\t\t\t|| plugin.getMode() \u003d\u003d InventoryTotalMode.TOTAL) {\n\t\t\tbackgroundColor \u003d config.totalColor();\n\t\t\tborderColor \u003d config.borderColor();\n\t\t\ttextColor \u003d config.textColor();\n\t\t}\n\t\telse if (total \u003e\u003d 0) {\n\t\t\tbackgroundColor \u003d config.profitColor();\n\t\t\tborderColor \u003d config.profitBorderColor();\n\t\t\ttextColor \u003d config.profitTextColor();\n\t\t}\n\t\telse {\n\t\t\tbackgroundColor \u003d config.lossColor();\n\t\t\tborderColor \u003d config.lossBorderColor();\n\t\t\ttextColor \u003d config.lossTextColor();\n\t\t}\n\n\t\tint cornerRadius \u003d config.cornerRadius();\n\t\tif (!config.roundCorners())\n\t\t{\n\t\t\tcornerRadius \u003d 0;\n\t\t}\n\n\t\tint containerAlpha \u003d backgroundColor.getAlpha();\n\n\t\tif (containerAlpha \u003e 0) {\n\t\t\tgraphics.setColor(borderColor);\n\t\t\tgraphics.drawRoundRect(x, y, width + 1, height + 1, cornerRadius, cornerRadius);\n\t\t}\n\n\t\tgraphics.setColor(backgroundColor);\n\n\t\tgraphics.fillRoundRect(x + 1, y + 1, width, height, cornerRadius, cornerRadius);\n\n\t\tTextComponent textComponent \u003d new TextComponent();\n\n\t\ttextComponent.setColor(textColor);\n\t\ttextComponent.setText(totalText);\n\t\ttextComponent.setPosition(new Point(x + HORIZONTAL_PADDING, y + TEXT_Y_OFFSET));\n\t\ttextComponent.render(graphics);\n\n\t\tif (runTimeText !\u003d null)\n\t\t{\n\t\t\ttextComponent \u003d new TextComponent();\n\n\t\t\ttextComponent.setColor(textColor);\n\t\t\ttextComponent.setText(runTimeText);\n\t\t\ttextComponent.setPosition(new Point((x + width) - HORIZONTAL_PADDING - actualRunTimeWidth - imageWidthWithPadding, y + TEXT_Y_OFFSET));\n\t\t\ttextComponent.render(graphics);\n\t\t}\n\n\t\tif (showCoinStack)\n\t\t{\n\t\t\tint imageOffset \u003d 4;\n\n\t\t\tBufferedImage coinsImage \u003d itemManager.getImage(ItemID.COINS_995, numCoins, false);\n\t\t\tcoinsImage \u003d ImageUtil.resizeImage(coinsImage, imageSize, imageSize);\n\t\t\tgraphics.drawImage(coinsImage, (x + width) - HORIZONTAL_PADDING - imageSize + imageOffset, y + 3, null);\n\t\t}\n\n\t\tnet.runelite.api.Point mouse \u003d client.getMouseCanvasPosition();\n\t\tint mouseX \u003d mouse.getX();\n\t\tint mouseY \u003d mouse.getY();\n\n\t\tRoundRectangle2D roundRectangle2D \u003d new RoundRectangle2D.Double(x, y, width + 1, height + 1, cornerRadius, cornerRadius);\n\t\tif (roundRectangle2D.contains(mouseX, mouseY) \u0026\u0026 (plugin.getState() !\u003d InventoryTotalState.BANK || !config.newRunAfterBanking())\n\t\t\t\t\u0026\u0026 (Instant.now().toEpochMilli() - newRunTime) \u003e (BANK_CLOSE_DELAY + 500) \u0026\u0026 config.showTooltip())\n\t\t{\n\t\t\tif (plugin.getMode() \u003d\u003d InventoryTotalMode.PROFIT_LOSS)\n\t\t\t{\n\t\t\t\trenderProfitLossLedger(graphics);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\trenderLedger(graphics);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void renderLedger(Graphics2D graphics)\n\t{\n\t\tFontMetrics fontMetrics \u003d graphics.getFontMetrics();\n\n\t\tjava.util.List\u003cInventoryTotalLedgerItem\u003e ledger \u003d plugin.getInventoryLedger().stream()\n\t\t\t\t.filter(item -\u003e item.getQty() !\u003d 0).collect(Collectors.toList());\n\n\t\tif (ledger.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tledger \u003d ledger.stream().sorted(Comparator.comparingInt(o -\u003e\n\t\t\t\t-(o.getQty() * o.getAmount()))\n\t\t).collect(Collectors.toList());\n\n\t\tint total \u003d ledger.stream().mapToInt(item -\u003e item.getQty() * item.getAmount()).sum();\n\n\t\tledger.add(new InventoryTotalLedgerItem(\"Total\", 1, total));\n\n\t\tString [] descriptions \u003d ledger.stream().map(item -\u003e {\n\t\t\tString desc \u003d item.getDescription();\n\t\t\tif (item.getQty() !\u003d 0 \u0026\u0026 Math.abs(item.getQty()) !\u003d 1\n\t\t\t\t\t\u0026\u0026 !item.getDescription().contains(\"Total\") \u0026\u0026 !item.getDescription().contains(\"Coins\"))\n\t\t\t{\n\t\t\t\tdesc \u003d NumberFormat.getInstance(Locale.ENGLISH).format(Math.abs(item.getQty())) + \" \" + desc;\n\t\t\t}\n\t\t\treturn desc;\n\t\t}).toArray(String[]::new);\n\t\tInteger [] prices \u003d ledger.stream().map(item -\u003e item.getQty() * item.getAmount()).toArray(Integer[]::new);\n\n\t\tString [] formattedPrices \u003d Arrays.stream(prices).map(\n\t\t\t\tp -\u003e NumberFormat.getInstance(Locale.ENGLISH).format(p)\n\t\t).toArray(String[]::new);\n\n\t\tInteger [] rowWidths \u003d IntStream.range(0, descriptions.length).mapToObj(\n\t\t\t\ti -\u003e fontMetrics.stringWidth(descriptions[i])\n\t\t\t\t\t\t+ fontMetrics.stringWidth(formattedPrices[i])\n\t\t).toArray(Integer[]::new);\n\n\t\tArrays.sort(rowWidths);\n\n\t\tnet.runelite.api.Point mouse \u003d client.getMouseCanvasPosition();\n\t\tint mouseX \u003d mouse.getX();\n\t\tint mouseY \u003d mouse.getY();\n\n\t\tint sectionPadding \u003d 5;\n\n\t\tint rowW \u003d rowWidths[rowWidths.length - 1] + 20 + HORIZONTAL_PADDING + 2;\n\t\tint rowH \u003d fontMetrics.getHeight();\n\n\t\tint h \u003d descriptions.length * rowH + TEXT_Y_OFFSET / 2 + sectionPadding + 1;\n\n\t\tint x \u003d mouseX - rowW - 10;\n\t\tif (x + rowW \u003e canvasX + canvasWidth - 5)\n\t\t{\n\t\t\tx \u003d canvasX + canvasWidth - 5 - rowW;\n\t\t}\n\t\telse if (x \u003c 5)\n\t\t{\n\t\t\tx \u003d 5;\n\t\t}\n\n\t\tint y \u003d mouseY - h / 2;\n\t\tif (y + h \u003e canvasY + canvasHeight - 10)\n\t\t{\n\t\t\ty \u003d canvasY + canvasHeight - 10 - h;\n\t\t}\n\t\telse if (y \u003c 5)\n\t\t{\n\t\t\ty \u003d 5;\n\t\t}\n\n\t\tint cornerRadius \u003d 0;\n\n\t\tgraphics.setColor(LEDGER_BACKGROUND_COLOR);\n\t\tgraphics.fillRoundRect(x, y, rowW, h, cornerRadius, cornerRadius);\n\n\t\tint borderWidth \u003d 1;\n\n\t\tgraphics.setColor(Color.decode(\"#0b0b0b\"));\n\t\tgraphics.setStroke(new BasicStroke(borderWidth));\n\t\tgraphics.drawRoundRect(x - borderWidth / 2, y - borderWidth / 2,\n\t\t\t\trowW + borderWidth / 2, h + borderWidth / 2, cornerRadius, cornerRadius);\n\n\t\tif (descriptions.length \u003d\u003d prices.length)\n\t\t{\n\t\t\tint yOffset \u003d 0;\n\t\t\tString prevDesc \u003d \"\";\n\t\t\tfor (int i \u003d 0; i \u003c descriptions.length; i++)\n\t\t\t{\n\t\t\t\tString desc \u003d descriptions[i];\n\n\t\t\t\tif (!prevDesc.contains(\"Total\") \u0026\u0026 desc.contains(\"Total\"))\n\t\t\t\t{\n\t\t\t\t\tyOffset +\u003d sectionPadding;\n\t\t\t\t}\n\t\t\t\telse if (i \u003e 0 \u0026\u0026 prices[i - 1] \u003e\u003d 0 \u0026\u0026 prices[i] \u003c 0 \u0026\u0026 !prevDesc.contains(\"Total\"))\n\t\t\t\t{\n\t\t\t\t\tyOffset +\u003d sectionPadding;\n\t\t\t\t}\n\n\t\t\t\tint textX \u003d x + HORIZONTAL_PADDING / 2 + 2;\n\t\t\t\tint textY \u003d y + rowH * i + TEXT_Y_OFFSET + yOffset;\n\n\t\t\t\tTextComponent textComponent \u003d new TextComponent();\n\n\t\t\t\tif (desc.contains(\"Total\") \u0026\u0026 desc.length() \u003d\u003d 5)\n\t\t\t\t{\n\t\t\t\t\ttextComponent.setColor(Color.ORANGE);\n\t\t\t\t}\n\t\t\t\telse if (desc.contains(\"Total\"))\n\t\t\t\t{\n\t\t\t\t\ttextComponent.setColor(Color.YELLOW);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttextComponent.setColor(Color.decode(\"#FFF7E3\"));\n\t\t\t\t}\n\n\t\t\t\ttextComponent.setText(desc);\n\n\t\t\t\ttextComponent.setPosition(new Point(textX, textY));\n\t\t\t\ttextComponent.render(graphics);\n\n\t\t\t\tprevDesc \u003d desc;\n\n\t\t\t\tint price \u003d prices[i];\n\n\t\t\t\tString formattedPrice \u003d NumberFormat.getInstance(Locale.ENGLISH).format(price);\n\n\t\t\t\tint textW \u003d fontMetrics.stringWidth(formattedPrice);\n\t\t\t\ttextX \u003d x + rowW - HORIZONTAL_PADDING / 2 - textW;\n\t\t\t\ttextY \u003d y + rowH * i + TEXT_Y_OFFSET + yOffset;\n\n\t\t\t\ttextComponent \u003d new TextComponent();\n\t\t\t\tif (price \u003e 0)\n\t\t\t\t{\n\t\t\t\t\ttextComponent.setColor(Color.GREEN);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttextComponent.setColor(Color.WHITE);\n\t\t\t\t}\n\n\t\t\t\ttextComponent.setText(formattedPrice);\n\n\t\t\t\ttextComponent.setPosition(new Point(textX, textY));\n\t\t\t\ttextComponent.render(graphics);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void renderProfitLossLedger(Graphics2D graphics)\n\t{\n\t\tFontMetrics fontMetrics \u003d graphics.getFontMetrics();\n\n\t\tjava.util.List\u003cInventoryTotalLedgerItem\u003e ledger \u003d plugin.getProfitLossLedger().stream()\n\t\t\t\t.filter(item -\u003e item.getQty() !\u003d 0).collect(Collectors.toList());\n\n\t\tjava.util.List\u003cInventoryTotalLedgerItem\u003e gain \u003d ledger.stream().filter(item -\u003e item.getQty() \u003e 0)\n\t\t\t\t.collect(Collectors.toList());\n\n\t\tjava.util.List\u003cInventoryTotalLedgerItem\u003e loss \u003d ledger.stream().filter(item -\u003e item.getQty() \u003c 0)\n\t\t\t\t.collect(Collectors.toList());\n\n\t\tgain \u003d gain.stream().sorted(Comparator.comparingInt(o -\u003e -(o.getQty() * o.getAmount()))).collect(Collectors.toList());\n\t\tloss \u003d loss.stream().sorted(Comparator.comparingInt(o -\u003e (o.getQty() * o.getAmount()))).collect(Collectors.toList());\n\n\t\tledger \u003d new LinkedList\u003c\u003e();\n\t\tledger.addAll(gain);\n\t\tledger.addAll(loss);\n\n\t\tif (ledger.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tint totalGain \u003d gain.stream().mapToInt(item -\u003e item.getQty() * item.getAmount()).sum();\n\t\tint totalLoss \u003d loss.stream().mapToInt(item -\u003e item.getQty() * item.getAmount()).sum();\n\t\tint total \u003d ledger.stream().mapToInt(item -\u003e item.getQty() * item.getAmount()).sum();\n\n\t\tledger.add(new InventoryTotalLedgerItem(\"Total Gain\", 1, totalGain));\n\t\tledger.add(new InventoryTotalLedgerItem(\"Total Loss\", 1, totalLoss));\n\t\tledger.add(new InventoryTotalLedgerItem(\"Total\", 1, total));\n\n\t\tString [] descriptions \u003d ledger.stream().map(item -\u003e {\n\t\t\tString desc \u003d item.getDescription();\n\t\t\tif (item.getQty() !\u003d 0 \u0026\u0026 Math.abs(item.getQty()) !\u003d 1\n\t\t\t\t\t\u0026\u0026 !item.getDescription().contains(\"Total\") \u0026\u0026 !item.getDescription().contains(\"Coins\"))\n\t\t\t{\n\t\t\t\tdesc \u003d NumberFormat.getInstance(Locale.ENGLISH).format(Math.abs(item.getQty())) + \" \" + desc;\n\t\t\t}\n\t\t\treturn desc;\n\t\t}).toArray(String[]::new);\n\t\tInteger [] prices \u003d ledger.stream().map(item -\u003e item.getQty() * item.getAmount()).toArray(Integer[]::new);\n\n\t\tString [] formattedPrices \u003d Arrays.stream(prices).map(\n\t\t\t\tp -\u003e NumberFormat.getInstance(Locale.ENGLISH).format(p)\n\t\t).toArray(String[]::new);\n\n\t\tInteger [] rowWidths \u003d IntStream.range(0, descriptions.length).mapToObj(\n\t\t\t\ti -\u003e fontMetrics.stringWidth(descriptions[i])\n\t\t\t\t\t\t+ fontMetrics.stringWidth(formattedPrices[i])\n\t\t).toArray(Integer[]::new);\n\n\t\tArrays.sort(rowWidths);\n\n\t\tnet.runelite.api.Point mouse \u003d client.getMouseCanvasPosition();\n\t\tint mouseX \u003d mouse.getX();\n\t\tint mouseY \u003d mouse.getY();\n\n\t\tint sectionPadding \u003d 5;\n\n\t\tint rowW \u003d rowWidths[rowWidths.length - 1] + 20 + HORIZONTAL_PADDING + 2;\n\t\tint rowH \u003d fontMetrics.getHeight();\n\n\t\tint sectionPaddingTotal \u003d sectionPadding;\n\t\tif (!gain.isEmpty() \u0026\u0026 !loss.isEmpty())\n\t\t{\n\t\t\tsectionPaddingTotal +\u003d sectionPadding;\n\t\t}\n\n\t\tint h \u003d descriptions.length * rowH + TEXT_Y_OFFSET / 2 + sectionPaddingTotal + 1;\n\n\t\tint x \u003d mouseX - rowW - 10;\n\t\tif (x + rowW \u003e canvasX + canvasWidth - 5)\n\t\t{\n\t\t\tx \u003d canvasX + canvasWidth - 5 - rowW;\n\t\t}\n\t\telse if (x \u003c 5)\n\t\t{\n\t\t\tx \u003d 5;\n\t\t}\n\n\t\tint y \u003d mouseY - h / 2;\n\t\tif (y + h \u003e canvasY + canvasHeight - 10)\n\t\t{\n\t\t\ty \u003d canvasY + canvasHeight - 10 - h;\n\t\t}\n\t\telse if (y \u003c 5)\n\t\t{\n\t\t\ty \u003d 5;\n\t\t}\n\n\t\tint cornerRadius \u003d 0;\n\n\t\tgraphics.setColor(LEDGER_BACKGROUND_COLOR);\n\t\tgraphics.fillRoundRect(x, y, rowW, h, cornerRadius, cornerRadius);\n\n\t\tint borderWidth \u003d 1;\n\n\t\tgraphics.setColor(Color.decode(\"#0b0b0b\"));\n\t\tgraphics.setStroke(new BasicStroke(borderWidth));\n\t\tgraphics.drawRoundRect(x - borderWidth / 2, y - borderWidth / 2,\n\t\t\t\trowW + borderWidth / 2, h + borderWidth / 2, cornerRadius, cornerRadius);\n\n\t\tif (descriptions.length \u003d\u003d prices.length)\n\t\t{\n\t\t\tint yOffset \u003d 0;\n\t\t\tString prevDesc \u003d \"\";\n\t\t\tfor (int i \u003d 0; i \u003c descriptions.length; i++)\n\t\t\t{\n\t\t\t\tString desc \u003d descriptions[i];\n\n\t\t\t\tif (!prevDesc.contains(\"Total\") \u0026\u0026 desc.contains(\"Total\"))\n\t\t\t\t{\n\t\t\t\t\tyOffset +\u003d sectionPadding;\n\t\t\t\t}\n\t\t\t\telse if (i \u003e 0 \u0026\u0026 prices[i - 1] \u003e\u003d 0 \u0026\u0026 prices[i] \u003c 0 \u0026\u0026 !prevDesc.contains(\"Total\"))\n\t\t\t\t{\n\t\t\t\t\tyOffset +\u003d sectionPadding;\n\t\t\t\t}\n\n\t\t\t\tint textX \u003d x + HORIZONTAL_PADDING / 2 + 2;\n\t\t\t\tint textY \u003d y + rowH * i + TEXT_Y_OFFSET + yOffset;\n\n\t\t\t\tTextComponent textComponent \u003d new TextComponent();\n\n\t\t\t\tif (desc.contains(\"Total\") \u0026\u0026 desc.length() \u003d\u003d 5)\n\t\t\t\t{\n\t\t\t\t\ttextComponent.setColor(Color.ORANGE);\n\t\t\t\t}\n\t\t\t\telse if (desc.contains(\"Total\"))\n\t\t\t\t{\n\t\t\t\t\ttextComponent.setColor(Color.YELLOW);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttextComponent.setColor(Color.decode(\"#FFF7E3\"));\n\t\t\t\t}\n\n\t\t\t\ttextComponent.setText(desc);\n\n\t\t\t\ttextComponent.setPosition(new Point(textX, textY));\n\t\t\t\ttextComponent.render(graphics);\n\n\t\t\t\tprevDesc \u003d desc;\n\n\t\t\t\tint price \u003d prices[i];\n\n\t\t\t\tString formattedPrice \u003d NumberFormat.getInstance(Locale.ENGLISH).format(price);\n\n\t\t\t\tint textW \u003d fontMetrics.stringWidth(formattedPrice);\n\t\t\t\ttextX \u003d x + rowW - HORIZONTAL_PADDING / 2 - textW;\n\t\t\t\ttextY \u003d y + rowH * i + TEXT_Y_OFFSET + yOffset;\n\n\t\t\t\ttextComponent \u003d new TextComponent();\n\n\t\t\t\tif (price \u003e 0)\n\t\t\t\t{\n\t\t\t\t\ttextComponent.setColor(Color.GREEN);\n\t\t\t\t}\n\t\t\t\telse if (price \u003c 0)\n\t\t\t\t{\n\t\t\t\t\ttextComponent.setColor(Color.RED);\n\t\t\t\t}\n\n\t\t\t\ttextComponent.setText(formattedPrice);\n\n\t\t\t\ttextComponent.setPosition(new Point(textX, textY));\n\t\t\t\ttextComponent.render(graphics);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate String getTotalText(long total)\n\t{\n\t\tif (config.showExactGp())\n\t\t{\n\t\t\treturn getExactFormattedGp(total);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tString totalText \u003d getFormattedGp(total);\n\t\t\treturn totalText.replace(\".0\", \"\");\n\t\t}\n\t}\n\n\tprivate String getFormattedGp(long total)\n\t{\n\t\tif (total \u003e\u003d 1000000000 || total \u003c\u003d -1000000000)\n\t\t{\n\t\t\tdouble bTotal \u003d total / 1000000000.0;\n\t\t\treturn getTruncatedTotal(bTotal) + \"B\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (total \u003e\u003d 1000000 || total \u003c\u003d -1000000)\n\t\t\t{\n\t\t\t\tdouble mTotal \u003d total / 1000000.0;\n\t\t\t\treturn getTruncatedTotal(mTotal) + \"M\";\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (total \u003e\u003d 1000 || total \u003c\u003d -1000)\n\t\t\t\t{\n\t\t\t\t\tdouble kTotal \u003d total / 1000.0;\n\t\t\t\t\treturn getTruncatedTotal(kTotal) + \"K\";\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn getExactFormattedGp(total);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate String getTruncatedTotal(double total)\n\t{\n\t\tString totalString \u003d Double.toString(total);\n\n\t\tint dotIndex \u003d totalString.indexOf(\u0027.\u0027);\n\t\tif (dotIndex \u003c totalString.length() - 1)\n\t\t{\n\t\t\treturn totalString.substring(0, dotIndex + 2);\n\t\t}\n\n\t\treturn totalString;\n\t}\n\n\tprivate String getExactFormattedGp(long total)\n\t{\n\t\treturn NumberFormat.getInstance(Locale.ENGLISH).format(total);\n\t}\n\n\tprivate String getFormattedRunTime()\n\t{\n\t\tlong runTime \u003d plugin.elapsedRunTime();\n\n\t\tif (runTime \u003d\u003d InventoryTotalPlugin.NO_PROFIT_LOSS_TIME)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tlong totalSecs \u003d runTime / 1000;\n\t\tlong totalMins \u003d totalSecs / 60;\n\n\t\tlong hrs \u003d totalMins / 60;\n\t\tlong mins \u003d totalMins % 60;\n\t\tlong secs \u003d totalSecs % 60;\n\n\t\tif (hrs \u003e 0)\n\t\t{\n\t\t\treturn String.format(PROFIT_LOSS_TIME_FORMAT, hrs, mins, secs);\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn String.format(PROFIT_LOSS_TIME_NO_HOURS_FORMAT, mins, secs);\n\t\t}\n\t}\n\n\tpublic ItemContainer getInventoryItemContainer()\n\t{\n\t\treturn inventoryItemContainer;\n\t}\n\n\tpublic ItemContainer getEquipmentItemContainer()\n\t{\n\t\treturn equipmentItemContainer;\n\t}\n\n\tpublic void showInterstitial()\n\t{\n\t\tshowInterstitial \u003d true;\n\t}\n\n\tpublic void hideInterstitial()\n\t{\n\t\tshowInterstitial \u003d false;\n\t}\n}\n","filePath":"src\\main\\java\\com\\ericversteeg\\InventoryTotalOverlay.java"},{"fileName":"InventoryTotalPlugin.java","content":"package com.ericversteeg;\n\nimport com.google.gson.Gson;\nimport com.google.inject.Provides;\nimport net.runelite.api.*;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.events.RuneScapeProfileChanged;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.input.KeyListener;\nimport net.runelite.client.input.KeyManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.HotkeyListener;\n\nimport javax.inject.Inject;\nimport java.time.Instant;\nimport java.util.*;\nimport java.util.stream.Collectors;\n\n@PluginDescriptor(\n\tname \u003d \"Inventory Total\",\n\tdescription \u003d \"Totals item prices in your inventory.\"\n)\n\npublic class InventoryTotalPlugin extends Plugin\n{\n\tstatic final int COINS \u003d ItemID.COINS_995;\n\tstatic final int TOTAL_GP_GE_INDEX \u003d 0;\n\tstatic final int TOTAL_GP_HA_INDEX \u003d 1;\n\tstatic final int TOTAL_QTY_INDEX \u003d 2;\n\tstatic final int NO_PROFIT_LOSS_TIME \u003d -1;\n\tstatic final int RUNEPOUCH_ITEM_ID \u003d 12791;\n\tstatic final int DIVINE_RUNEPOUCH_ITEM_ID \u003d 27281;\n\n\t@Inject\n\tprivate InventoryTotalOverlay overlay;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate InventoryTotalConfig config;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate ItemManager itemManager;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Inject\n\tprivate Gson gson;\n\n\t@Inject\n\tprivate KeyManager keyManager;\n\n\tprivate String profileKey \u003d \"\";\n\n\tprivate InventoryTotalRunData runData;\n\n\tprivate InventoryTotalMode mode \u003d InventoryTotalMode.TOTAL;\n\n\tprivate InventoryTotalState state \u003d InventoryTotalState.NONE;\n\tprivate InventoryTotalState prevState \u003d InventoryTotalState.NONE;\n\n\tprivate long totalGp \u003d 0;\n\tprivate long totalQty \u003d 0;\n\n\tprivate long runStartTime \u003d 0;\n\n\tprivate long lastWriteSaveTime \u003d 0;\n\n\tprivate InventoryTotalMode plToggleOverride \u003d null;\n\tprivate KeyListener plToggleKeyListener;\n\tprivate KeyListener newRunKeyListener;\n\n\tprivate boolean manualNewRun \u003d false;\n\n\t// from ClueScrollPlugin\n\tprivate static final int[] RUNEPOUCH_AMOUNT_VARBITS \u003d {\n\t\t\tVarbits.RUNE_POUCH_AMOUNT1, Varbits.RUNE_POUCH_AMOUNT2, Varbits.RUNE_POUCH_AMOUNT3, Varbits.RUNE_POUCH_AMOUNT4\n\t};\n\tprivate static final int[] RUNEPOUCH_RUNE_VARBITS \u003d {\n\t\t\tVarbits.RUNE_POUCH_RUNE1, Varbits.RUNE_POUCH_RUNE2, Varbits.RUNE_POUCH_RUNE3, Varbits.RUNE_POUCH_RUNE4\n\t};\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\toverlayManager.add(overlay);\n\n\t\trunData \u003d new InventoryTotalRunData();\n\n\t\tregisterKeys();\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(overlay);\n\n\t\tunregisterKeys();\n\t}\n\n\t@Subscribe\n\tpublic void onRuneScapeProfileChanged(RuneScapeProfileChanged e)\n\t{\n\t\tprofileKey \u003d configManager.getRSProfileKey();\n\t\tif (profileKey !\u003d null)\n\t\t{\n\t\t\trunData \u003d getSavedData();\n\t\t}\n\t}\n\n\t@Provides\n\tInventoryTotalConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(InventoryTotalConfig.class);\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged config)\n\t{\n\t\tif (config.getGroup().equals(InventoryTotalConfig.GROUP))\n\t\t{\n\t\t\tif (config.getKey().equals(\"enableProfitLoss\"))\n\t\t\t{\n\t\t\t\tplToggleOverride \u003d null;\n\t\t\t}\n\t\t\telse if (config.getKey().equals(\"profitLossToggleKey\"))\n\t\t\t{\n\t\t\t\tunregisterKeys();\n\t\t\t\tregisterKeys();\n\t\t\t}\n\t\t\telse if (config.getKey().equals(\"ignoredItems\"))\n\t\t\t{\n\t\t\t\t// update the runData if it\u0027s already initialized\n\t\t\t\tif (runData !\u003d null) {\n\t\t\t\t\trunData.ignoredItems \u003d getIgnoredItems();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void registerKeys()\n\t{\n\t\t// switch mode\n\t\tplToggleKeyListener \u003d new HotkeyListener(() -\u003e config.profitLossToggleKey())\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void hotkeyPressed()\n\t\t\t{\n\t\t\t\tif (mode \u003d\u003d InventoryTotalMode.TOTAL)\n\t\t\t\t{\n\t\t\t\t\tplToggleOverride \u003d InventoryTotalMode.PROFIT_LOSS;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tplToggleOverride \u003d InventoryTotalMode.TOTAL;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tkeyManager.registerKeyListener(plToggleKeyListener);\n\n\t\t// new run\n\t\tnewRunKeyListener \u003d new HotkeyListener(() -\u003e config.newRunKey())\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void hotkeyPressed()\n\t\t\t{\n\t\t\t\tif (state !\u003d InventoryTotalState.BANK)\n\t\t\t\t{\n\t\t\t\t\tmanualNewRun \u003d true;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tkeyManager.registerKeyListener(newRunKeyListener);\n\t}\n\n\tprivate void unregisterKeys()\n\t{\n\t\tif (plToggleKeyListener !\u003d null)\n\t\t{\n\t\t\tkeyManager.unregisterKeyListener(plToggleKeyListener);\n\t\t}\n\t\tif (newRunKeyListener !\u003d null)\n\t\t{\n\t\t\tkeyManager.unregisterKeyListener(newRunKeyListener);\n\t\t}\n\t}\n\n\tvoid onNewRun()\n\t{\n\t\toverlay.showInterstitial();\n\n\t\trunStartTime \u003d Instant.now().toEpochMilli();\n\n\t\trunData.ignoredItems \u003d getIgnoredItems();\n\t}\n\n\t// to handle same tick bank closing\n\tvoid postNewRun()\n\t{\n\t\trunData.initialItemQtys.clear();\n\n\t\tint [] inventoryTotals \u003d getInventoryTotals(true);\n\t\tint [] equipmentTotals \u003d getEquipmentTotals(true);\n\n\t\tint inventoryTotal \u003d inventoryTotals[InventoryTotalPlugin.TOTAL_GP_GE_INDEX];\n\t\tint inventoryTotalHA \u003d inventoryTotals[InventoryTotalPlugin.TOTAL_GP_HA_INDEX];\n\n\t\tint equipmentTotal \u003d equipmentTotals[0];\n\t\tint equipmentTotalHA \u003d equipmentTotals[1];\n\n\t\trunData.profitLossInitialGp \u003d inventoryTotal + equipmentTotal;\n\t\trunData.profitLossInitialGpHA \u003d inventoryTotalHA + equipmentTotalHA;\n\n\t\twriteSavedData();\n\n\t\toverlay.hideInterstitial();\n\t}\n\n\tvoid onBank()\n\t{\n\t\tif (!config.newRunAfterBanking())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\trunData.profitLossInitialGp \u003d 0;\n\t\trunData.profitLossInitialGpHA \u003d 0;\n\t\trunData.itemPrices.clear();\n\n\t\trunStartTime \u003d 0;\n\n\t\twriteSavedData();\n\t}\n\n\tint [] getInventoryTotals(boolean isNewRun)\n\t{\n\t\tfinal ItemContainer itemContainer \u003d overlay.getInventoryItemContainer();\n\n\t\tif (itemContainer \u003d\u003d null)\n\t\t{\n\t\t\treturn new int [2];\n\t\t}\n\n\t\tfinal Item[] items \u003d itemContainer.getItems();\n\n\t\tfinal LinkedList\u003cItem\u003e allItems \u003d new LinkedList\u003c\u003e(Arrays.asList(items));\n\t\t// only add when the runepouch is in the inventory\n\t\tif (allItems.stream().anyMatch(s -\u003e s.getId() \u003d\u003d RUNEPOUCH_ITEM_ID || s.getId() \u003d\u003d DIVINE_RUNEPOUCH_ITEM_ID))\n\t\t{\n\t\t\tallItems.addAll(getRunepouchContents());\n\t\t}\n\n\t\tint totalQty \u003d 0;\n\t\tint totalGp \u003d 0;\n\t\tint totalGpHA \u003d 0;\n\n\t\tfor (Item item: allItems)\n\t\t{\n\t\t\tint itemId \u003d item.getId();\n\n\t\t\tfinal ItemComposition itemComposition \u003d itemManager.getItemComposition(itemId);\n\n\t\t\tString itemName \u003d itemComposition.getName();\n\t\t\tfinal boolean ignore \u003d runData.ignoredItems.stream().anyMatch(s -\u003e {\n\t\t\t\tString lcItemName \u003d itemName.toLowerCase();\n\t\t\t\tString lcS \u003d s.toLowerCase();\n\t\t\t\treturn lcItemName.contains(lcS);\n\t\t\t});\n\t\t\tif (ignore) { continue; }\n\n\t\t\tfinal boolean isNoted \u003d itemComposition.getNote() !\u003d -1;\n\t\t\tfinal int realItemId \u003d isNoted ? itemComposition.getLinkedNoteId() : itemId;\n\n\t\t\tint totalPrice;\n\t\t\tint totalPriceHA;\n\t\t\tint gePrice;\n\t\t\tint haPrice;\n\n\t\t\tif (runData.itemPrices.containsKey(realItemId))\n\t\t\t{\n\t\t\t\tgePrice \u003d runData.itemPrices.get(realItemId);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tgePrice \u003d itemManager.getItemPrice(realItemId);\n\t\t\t}\n\n\t\t\tif (runData.itemPricesHA.containsKey(realItemId))\n\t\t\t{\n\t\t\t\thaPrice \u003d runData.itemPricesHA.get(realItemId);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\thaPrice \u003d itemComposition.getHaPrice();\n\t\t\t}\n\n\t\t\tint itemQty \u003d item.getQuantity();\n\n\t\t\tif (realItemId \u003d\u003d COINS)\n\t\t\t{\n\t\t\t\ttotalPrice \u003d itemQty;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttotalPrice \u003d itemQty * gePrice;\n\t\t\t}\n\n\t\t\tif (realItemId \u003d\u003d COINS)\n\t\t\t{\n\t\t\t\ttotalPriceHA \u003d itemQty;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttotalPriceHA \u003d itemQty * haPrice;\n\t\t\t}\n\n\t\t\ttotalGp +\u003d totalPrice;\n\t\t\ttotalGpHA +\u003d totalPriceHA;\n\t\t\ttotalQty +\u003d itemQty;\n\n\t\t\tif (realItemId !\u003d COINS \u0026\u0026 !runData.itemPrices.containsKey(realItemId))\n\t\t\t{\n\t\t\t\trunData.itemPrices.put(realItemId, gePrice);\n\t\t\t}\n\n\t\t\tif (realItemId !\u003d COINS \u0026\u0026 !runData.itemPricesHA.containsKey(realItemId))\n\t\t\t{\n\t\t\t\trunData.itemPricesHA.put(realItemId, haPrice);\n\t\t\t}\n\n\t\t\tif (isNewRun)\n\t\t\t{\n\t\t\t\tif (runData.initialItemQtys.containsKey(realItemId))\n\t\t\t\t{\n\t\t\t\t\trunData.initialItemQtys.put(realItemId, runData.initialItemQtys.get(realItemId) + itemQty);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\trunData.initialItemQtys.put(realItemId, itemQty);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (runData.itemQtys.containsKey(realItemId))\n\t\t\t{\n\t\t\t\trunData.itemQtys.put(realItemId, runData.itemQtys.get(realItemId) + itemQty);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\trunData.itemQtys.put(realItemId, itemQty);\n\t\t\t}\n\t\t}\n\n\t\tint[] totals \u003d new int[3];\n\n\t\ttotals[TOTAL_GP_GE_INDEX] \u003d totalGp;\n\t\ttotals[TOTAL_GP_HA_INDEX] \u003d totalGpHA;\n\t\ttotals[TOTAL_QTY_INDEX] \u003d totalQty;\n\n\t\treturn totals;\n\t}\n\n\tint [] getEquipmentTotals(boolean isNewRun)\n\t{\n\t\tfinal ItemContainer itemContainer \u003d client.getItemContainer(InventoryID.EQUIPMENT);\n\n\t\tif (itemContainer \u003d\u003d null)\n\t\t{\n\t\t\treturn new int [] {0, 0};\n\t\t}\n\n\t\tItem ammo \u003d itemContainer.getItem(EquipmentInventorySlot.AMMO.getSlotIdx());\n\n\t\tList\u003cInteger\u003e eIds \u003d getEquipmentIds();\n\n\t\tint eTotal \u003d 0;\n\t\tint eTotalHA \u003d 0;\n\t\tfor (int itemId: eIds)\n\t\t{\n\t\t\tint qty \u003d 1;\n\t\t\tif (ammo !\u003d null \u0026\u0026 itemId \u003d\u003d ammo.getId())\n\t\t\t{\n\t\t\t\tqty \u003d ammo.getQuantity();\n\t\t\t}\n\n\t\t\tint gePrice;\n\t\t\tint haPrice;\n\n\t\t\tif (runData.itemPrices.containsKey(itemId))\n\t\t\t{\n\t\t\t\tgePrice \u003d runData.itemPrices.get(itemId);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tgePrice \u003d itemManager.getItemPrice(itemId);\n\t\t\t}\n\n\t\t\tif (runData.itemPricesHA.containsKey(itemId))\n\t\t\t{\n\t\t\t\thaPrice \u003d runData.itemPricesHA.get(itemId);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tItemComposition itemComposition \u003d itemManager.getItemComposition(itemId);\n\t\t\t\thaPrice \u003d itemComposition.getHaPrice();\n\t\t\t}\n\n\t\t\tint totalPrice \u003d qty * gePrice;\n\t\t\tint totalPriceHA \u003d qty * haPrice;\n\n\t\t\teTotal +\u003d totalPrice;\n\t\t\teTotalHA +\u003d totalPriceHA;\n\n\t\t\tif (!runData.itemPrices.containsKey(itemId))\n\t\t\t{\n\t\t\t\trunData.itemPrices.put(itemId, gePrice);\n\t\t\t}\n\n\t\t\tif (!runData.itemPricesHA.containsKey(itemId))\n\t\t\t{\n\t\t\t\trunData.itemPricesHA.put(itemId, haPrice);\n\t\t\t}\n\n\t\t\tif (isNewRun)\n\t\t\t{\n\t\t\t\tif (runData.initialItemQtys.containsKey(itemId))\n\t\t\t\t{\n\t\t\t\t\trunData.initialItemQtys.put(itemId, runData.initialItemQtys.get(itemId) + qty);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\trunData.initialItemQtys.put(itemId, qty);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (runData.itemQtys.containsKey(itemId))\n\t\t\t{\n\t\t\t\trunData.itemQtys.put(itemId, runData.itemQtys.get(itemId) + qty);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\trunData.itemQtys.put(itemId, qty);\n\t\t\t}\n\t\t}\n\n\t\treturn new int [] {eTotal, eTotalHA};\n\t}\n\n\tprivate List\u003cInteger\u003e getEquipmentIds()\n\t{\n\t\tList\u003cItem\u003e equipment \u003d getEquipment();\n\n\t\treturn equipment\n\t\t\t\t.stream()\n\t\t\t\t.map(Item::getId)\n\t\t\t\t.collect(Collectors.toList());\n\t}\n\n\tprivate List\u003cItem\u003e getEquipment()\n\t{\n\t\tfinal ItemContainer equipment \u003d client.getItemContainer(InventoryID.EQUIPMENT);\n\n\t\tif (equipment \u003d\u003d null)\n\t\t{\n\t\t\treturn new ArrayList\u003c\u003e();\n\t\t}\n\n\t\tItem head \u003d equipment.getItem(EquipmentInventorySlot.HEAD.getSlotIdx());\n\t\tItem cape \u003d equipment.getItem(EquipmentInventorySlot.CAPE.getSlotIdx());\n\t\tItem amulet \u003d equipment.getItem(EquipmentInventorySlot.AMULET.getSlotIdx());\n\t\tItem ammo \u003d equipment.getItem(EquipmentInventorySlot.AMMO.getSlotIdx());\n\t\tItem weapon \u003d equipment.getItem(EquipmentInventorySlot.WEAPON.getSlotIdx());\n\t\tItem body \u003d equipment.getItem(EquipmentInventorySlot.BODY.getSlotIdx());\n\t\tItem shield \u003d equipment.getItem(EquipmentInventorySlot.SHIELD.getSlotIdx());\n\t\tItem legs \u003d equipment.getItem(EquipmentInventorySlot.LEGS.getSlotIdx());\n\t\tItem gloves \u003d equipment.getItem(EquipmentInventorySlot.GLOVES.getSlotIdx());\n\t\tItem boots \u003d equipment.getItem(EquipmentInventorySlot.BOOTS.getSlotIdx());\n\t\tItem ring \u003d equipment.getItem(EquipmentInventorySlot.RING.getSlotIdx());\n\n\t\tList\u003cItem\u003e items \u003d new ArrayList\u003cItem\u003e();\n\n\t\tif (head !\u003d null)\n\t\t{\n\t\t\titems.add(head);\n\t\t}\n\n\t\tif (cape !\u003d null)\n\t\t{\n\t\t\titems.add(cape);\n\t\t}\n\n\t\tif (amulet !\u003d null)\n\t\t{\n\t\t\titems.add(amulet);\n\t\t}\n\n\t\tif (ammo !\u003d null)\n\t\t{\n\t\t\titems.add(ammo);\n\t\t}\n\n\t\tif (weapon !\u003d null)\n\t\t{\n\t\t\titems.add(weapon);\n\t\t}\n\n\t\tif (body !\u003d null)\n\t\t{\n\t\t\titems.add(body);\n\t\t}\n\n\t\tif (shield !\u003d null)\n\t\t{\n\t\t\titems.add(shield);\n\t\t}\n\n\t\tif (legs !\u003d null)\n\t\t{\n\t\t\titems.add(legs);\n\t\t}\n\n\t\tif (gloves !\u003d null)\n\t\t{\n\t\t\titems.add(gloves);\n\t\t}\n\n\t\tif (boots !\u003d null)\n\t\t{\n\t\t\titems.add(boots);\n\t\t}\n\n\t\tif (ring !\u003d null)\n\t\t{\n\t\t\titems.add(ring);\n\t\t}\n\n\t\treturn items;\n\t}\n\n\tList\u003cInventoryTotalLedgerItem\u003e getInventoryLedger()\n\t{\n\t\tList\u003cInventoryTotalLedgerItem\u003e ledgerItems \u003d new LinkedList\u003c\u003e();\n\n\t\tfinal ItemContainer itemContainer \u003d overlay.getInventoryItemContainer();\n\n\t\tif (itemContainer \u003d\u003d null)\n\t\t{\n\t\t\treturn new LinkedList\u003c\u003e();\n\t\t}\n\n\t\tfinal Item[] items \u003d itemContainer.getItems();\n\n\t\tfinal LinkedList\u003cItem\u003e allItems \u003d new LinkedList\u003c\u003e(Arrays.asList(items));\n\t\t// only add when the runepouch is in the inventory\n\t\tif (allItems.stream().anyMatch(s -\u003e s.getId() \u003d\u003d RUNEPOUCH_ITEM_ID || s.getId() \u003d\u003d DIVINE_RUNEPOUCH_ITEM_ID))\n\t\t{\n\t\t\tallItems.addAll(getRunepouchContents());\n\t\t}\n\n\t\tMap\u003cInteger, Integer\u003e qtyMap \u003d new HashMap\u003c\u003e();\n\n\t\tfor (Item item: allItems) {\n\t\t\tint itemId \u003d item.getId();\n\n\t\t\tfinal ItemComposition itemComposition \u003d itemManager.getItemComposition(itemId);\n\n\t\t\tString itemName \u003d itemComposition.getName();\n\t\t\tfinal boolean ignore \u003d runData.ignoredItems.stream().anyMatch(s -\u003e {\n\t\t\t\tString lcItemName \u003d itemName.toLowerCase();\n\t\t\t\tString lcS \u003d s.toLowerCase();\n\t\t\t\treturn lcItemName.contains(lcS);\n\t\t\t});\n\t\t\tif (ignore) { continue; }\n\n\t\t\tfinal boolean isNoted \u003d itemComposition.getNote() !\u003d -1;\n\t\t\tfinal int realItemId \u003d isNoted ? itemComposition.getLinkedNoteId() : itemId;\n\n\t\t\tint itemQty \u003d item.getQuantity();\n\n\t\t\tif (qtyMap.containsKey(realItemId))\n\t\t\t{\n\t\t\t\tqtyMap.put(realItemId, qtyMap.get(realItemId) + itemQty);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tqtyMap.put(realItemId, itemQty);\n\t\t\t}\n\t\t}\n\n\t\tfor (Integer itemId: qtyMap.keySet())\n\t\t{\n\t\t\tfinal ItemComposition itemComposition \u003d itemManager.getItemComposition(itemId);\n\n\t\t\tString itemName \u003d itemComposition.getName();\n\n\t\t\tInteger qty \u003d qtyMap.get(itemId);\n\n\t\t\tInteger total;\n\t\t\tif (config.priceType() \u003d\u003d InventoryTotalPriceType.GRAND_EXCHANGE)\n\t\t\t{\n\t\t\t\ttotal \u003d runData.itemPrices.get(itemId);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttotal \u003d runData.itemPricesHA.get(itemId);\n\t\t\t}\n\n\t\t\tif (itemId \u003d\u003d COINS || total \u003d\u003d null)\n\t\t\t{\n\t\t\t\ttotal \u003d 1;\n\t\t\t}\n\n\t\t\tledgerItems.add(new InventoryTotalLedgerItem(itemName, qty, total));\n\t\t}\n\n\t\treturn ledgerItems;\n\t}\n\n\tList\u003cInventoryTotalLedgerItem\u003e getProfitLossLedger()\n\t{\n\t\tMap\u003cInteger, Integer\u003e prices;\n\t\tif (config.priceType() \u003d\u003d InventoryTotalPriceType.GRAND_EXCHANGE)\n\t\t{\n\t\t\tprices \u003d runData.itemPrices;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tprices \u003d runData.itemPricesHA;\n\t\t}\n\n\t\tMap\u003cInteger, Integer\u003e initialQtys \u003d runData.initialItemQtys;\n\t\tMap\u003cInteger, Integer\u003e qtys \u003d runData.itemQtys;\n\n\t\tMap\u003cInteger, Integer\u003e qtyDifferences \u003d new HashMap\u003c\u003e();\n\n\t\tHashSet\u003cInteger\u003e combinedQtyKeys \u003d new HashSet\u003c\u003e();\n\t\tcombinedQtyKeys.addAll(qtys.keySet());\n\t\tcombinedQtyKeys.addAll(initialQtys.keySet());\n\n\t\tfor (Integer itemId: combinedQtyKeys)\n\t\t{\n\t\t\tInteger initialQty \u003d initialQtys.get(itemId);\n\t\t\tInteger qty \u003d qtys.get(itemId);\n\n\t\t\tif (initialQty \u003d\u003d null)\n\t\t\t{\n\t\t\t\tinitialQty \u003d 0;\n\t\t\t}\n\n\t\t\tif (qty \u003d\u003d null)\n\t\t\t{\n\t\t\t\tqty \u003d 0;\n\t\t\t}\n\n\t\t\tqtyDifferences.put(itemId, qty - initialQty);\n\t\t}\n\n\t\tList\u003cInventoryTotalLedgerItem\u003e ledgerItems \u003d new LinkedList\u003c\u003e();\n\n\t\tfor (Integer itemId: qtyDifferences.keySet())\n\t\t{\n\t\t\tfinal ItemComposition itemComposition \u003d itemManager.getItemComposition(itemId);\n\t\t\tInteger price \u003d prices.get(itemId);\n\n\t\t\tif (price \u003d\u003d null)\n\t\t\t{\n\t\t\t\tprice \u003d 1;\n\t\t\t}\n\n\t\t\tInteger qtyDifference \u003d qtyDifferences.get(itemId);\n\n\t\t\tList\u003cInventoryTotalLedgerItem\u003e filteredList \u003d ledgerItems.stream().filter(\n\t\t\t\t\titem -\u003e item.getDescription().equals(itemComposition.getName())).collect(Collectors.toList()\n\t\t\t);\n\n\t\t\tif (!filteredList.isEmpty())\n\t\t\t{\n\t\t\t\tfilteredList.get(0).addQuantityDifference(qtyDifference);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (price \u003e 0)\n\t\t\t\t{\n\t\t\t\t\tledgerItems.add(new InventoryTotalLedgerItem(itemComposition.getName(), qtyDifference, price));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn ledgerItems;\n\t}\n\n\t// from ClueScrollPlugin\n\tprivate List\u003cItem\u003e getRunepouchContents()\n\t{\n\t\tEnumComposition runepouchEnum \u003d client.getEnum(EnumID.RUNEPOUCH_RUNE);\n\t\tList\u003cItem\u003e items \u003d new ArrayList\u003c\u003e(RUNEPOUCH_AMOUNT_VARBITS.length);\n\t\tfor (int i \u003d 0; i \u003c RUNEPOUCH_AMOUNT_VARBITS.length; i++)\n\t\t{\n\t\t\tint amount \u003d client.getVarbitValue(RUNEPOUCH_AMOUNT_VARBITS[i]);\n\t\t\tif (amount \u003c\u003d 0)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tint runeId \u003d client.getVarbitValue(RUNEPOUCH_RUNE_VARBITS[i]);\n\t\t\tif (runeId \u003d\u003d 0)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfinal int itemId \u003d runepouchEnum.getIntValue(runeId);\n\t\t\tItem item \u003d new Item(itemId, amount);\n\t\t\titems.add(item);\n\t\t}\n\t\treturn items;\n\t}\n\n\t// max invoke rate approximately once per tick\n\t// mainly so that initially this isn\u0027t getting invoked multiple times after item prices are added to the map\n\tvoid writeSavedData()\n\t{\n\t\tif (state \u003d\u003d InventoryTotalState.BANK || Instant.now().toEpochMilli() - lastWriteSaveTime \u003c 600)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tString profile \u003d configManager.getRSProfileKey();\n\n\t\tString json \u003d gson.toJson(runData);\n\t\tconfigManager.setConfiguration(InventoryTotalConfig.GROUP, profile, \"inventory_total_data\", json);\n\n\t\tlastWriteSaveTime \u003d Instant.now().toEpochMilli();\n\t}\n\n\tprivate InventoryTotalRunData getSavedData()\n\t{\n\t\tString profile \u003d configManager.getRSProfileKey();\n\t\tString json \u003d configManager.getConfiguration(InventoryTotalConfig.GROUP, profile, \"inventory_total_data\");\n\n\t\tInventoryTotalRunData savedData \u003d gson.fromJson(json, InventoryTotalRunData.class);\n\n\t\tif (savedData \u003d\u003d null)\n\t\t{\n\t\t\treturn new InventoryTotalRunData();\n\t\t}\n\t\treturn savedData;\n\t}\n\n\tprivate LinkedList\u003cString\u003e getIgnoredItems() {\n\t\treturn new LinkedList\u003c\u003e(\n\t\t\tArrays.asList(\n\t\t\t\tconfig.ignoredItems().split(\"\\\\s*,\\\\s*\")\n\t\t\t)\n\t\t);\n\t}\n\n\tlong elapsedRunTime()\n\t{\n\t\tif (runStartTime \u003d\u003d 0 || !config.showRunTime())\n\t\t{\n\t\t\treturn NO_PROFIT_LOSS_TIME;\n\t\t}\n\n\t\treturn Instant\n\t\t\t\t.now()\n\t\t\t\t.minusMillis(runStartTime)\n\t\t\t\t.toEpochMilli();\n\t}\n\n\tvoid setMode(InventoryTotalMode mode)\n\t{\n\t\tthis.mode \u003d mode;\n\t}\n\n\tpublic InventoryTotalMode getMode()\n\t{\n\t\treturn mode;\n\t}\n\n\tvoid setState(InventoryTotalState state)\n\t{\n\t\tthis.prevState \u003d this.state;\n\t\tthis.state \u003d state;\n\t}\n\n\tpublic InventoryTotalState getState()\n\t{\n\t\treturn state;\n\t}\n\n\tpublic InventoryTotalState getPreviousState()\n\t{\n\t\treturn prevState;\n\t}\n\n\tpublic long getProfitGp()\n\t{\n\t\tif (mode \u003d\u003d InventoryTotalMode.TOTAL)\n\t\t{\n\t\t\treturn totalGp;\n\t\t}\n\t\telse if (config.priceType() \u003d\u003d InventoryTotalPriceType.GRAND_EXCHANGE)\n\t\t{\n\t\t\treturn totalGp - runData.profitLossInitialGp;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn totalGp - runData.profitLossInitialGpHA;\n\t\t}\n\t}\n\n\tvoid setTotalGp(long totalGp)\n\t{\n\t\tthis.totalGp \u003d totalGp;\n\t}\n\n\tvoid setTotalQty(long totalQty)\n\t{\n\t\tthis.totalQty \u003d totalQty;\n\t}\n\n\tpublic long getTotalQty()\n\t{\n\t\treturn totalQty;\n\t}\n\n\tpublic InventoryTotalRunData getRunData()\n\t{\n\t\treturn runData;\n\t}\n\n\tpublic InventoryTotalMode getPLToggleOverride()\n\t{\n\t\treturn plToggleOverride;\n\t}\n\n\tpublic boolean isManualNewRun()\n\t{\n\t\tif (manualNewRun)\n\t\t{\n\t\t\tmanualNewRun \u003d false;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\com\\ericversteeg\\InventoryTotalPlugin.java"},{"fileName":"InventoryTotalPriceType.java","content":"package com.ericversteeg;\n\npublic enum InventoryTotalPriceType {\n    GRAND_EXCHANGE,\n    HIGH_ALCH\n}\n","filePath":"src\\main\\java\\com\\ericversteeg\\InventoryTotalPriceType.java"},{"fileName":"InventoryTotalRunData.java","content":"package com.ericversteeg;\n\nimport java.util.HashMap;\nimport java.util.LinkedList;\nimport java.util.Map;\n\npublic class InventoryTotalRunData {\n    long profitLossInitialGp \u003d 0;\n    long profitLossInitialGpHA \u003d 0;\n\n    // static item prices so that when ItemManager updates, the Profit / Loss value doesn\u0027t all of a sudden change\n    // this is cleared and repopulated at the start off each new run (after bank) and whenever new items hit the inventory\n    Map\u003cInteger, Integer\u003e itemPrices \u003d new HashMap\u003c\u003e();\n    Map\u003cInteger, Integer\u003e itemPricesHA \u003d new HashMap\u003c\u003e();\n    Map\u003cInteger, Integer\u003e initialItemQtys \u003d new HashMap\u003c\u003e();\n    Map\u003cInteger, Integer\u003e itemQtys \u003d new HashMap\u003c\u003e();\n\n    LinkedList\u003cString\u003e ignoredItems \u003d new LinkedList\u003c\u003e();\n}\n","filePath":"src\\main\\java\\com\\ericversteeg\\InventoryTotalRunData.java"},{"fileName":"InventoryTotalState.java","content":"package com.ericversteeg;\n\npublic enum InventoryTotalState {\n    NONE,\n    BANK,\n    RUN\n}\n","filePath":"src\\main\\java\\com\\ericversteeg\\InventoryTotalState.java"},{"fileName":"InventoryTotalPluginTest.java","content":"package com.ericversteeg;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class InventoryTotalPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(InventoryTotalPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\ericversteeg\\InventoryTotalPluginTest.java"}]},{"commit":"13445bd97a581d600eaa5b86fac6f82794734e66","repository":"https://github.com/zlight97/runelite-plugins.git","internalName":"trouver-parchment-alerts","files":[{"fileName":"ParchmentAlertConfig.java","content":"package com.parchmentalert;\n\nimport net.runelite.api.ItemID;\nimport net.runelite.client.config.*;\n\nimport java.awt.*;\n\n@ConfigGroup(\"Trouver Parchment Alert\")\npublic interface ParchmentAlertConfig extends Config\n{\n\tenum HighlightSetting\n\t{\n\t\tDISABLED,\n\t\tENABLED,\n\t\tPVP,\n\t\tDEEP_WILD;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"willNotify\",\n\t\t\tname \u003d \"Notify when carrying an unlocked item\",\n\t\t\tdescription \u003d \"Displays a popup when you are holding an unlocked item\",\n\t\t\tposition \u003d 1\n\t)\n\tdefault HighlightSetting willNotify()\n\t{\n\t\treturn HighlightSetting.DEEP_WILD;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showNames\",\n\t\t\tname \u003d \"Show Item Names\",\n\t\t\tdescription \u003d \"The box will list what items are unlocked\",\n\t\t\tposition \u003d 3\n\t)\n\tdefault boolean showNames()\n\t{\n\t\treturn true;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"bg\",\n\t\t\tname \u003d \"Background Color\",\n\t\t\tdescription \u003d \"The color of the background.\",\n\t\t\tposition \u003d 4\n\t)\n\tdefault Color bg() { return new Color(255, 0, 0, 150); }\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"flash\",\n\t\tname \u003d \"Flash the reminder box\",\n\t\tdescription \u003d \"The reminder box will flash to draw your attention to it\",\n\t\tposition \u003d 5\n\t)\n\tdefault boolean flash()\n\t{\n\t\treturn false;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"flashColor\",\n\t\t\tname \u003d \"Flash Color\",\n\t\t\tdescription \u003d \"The Color to flash to.\",\n\t\t\tposition \u003d 6\n\t)\n\tdefault Color flashColor() { return new Color(70, 61, 50, 150); }\n\n\t@Range(\n\t\t\tmax \u003d 80,\n\t\t\tmin \u003d 2\n\t)\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"interval\",\n\t\t\tname \u003d \"Flash Interval\",\n\t\t\tdescription \u003d \"Time between flash intervals\",\n\t\t\tposition \u003d 7\n\t)\n\tdefault int interval() { return 40; }\n\n\t@Range(\n\t\t\tmax \u003d 56,\n\t\t\tmin \u003d 0\n\t)\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"wildernessLevel\",\n\t\t\tname \u003d \"Deep Wild Level\",\n\t\t\tdescription \u003d \"What level wilderness should the box appear in, when on Deep Wild mode. (0 includes safe zones like outside ferox)\",\n\t\t\tposition \u003d 2\n\t)\n\tdefault int wildernessLevel() { return 20; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"extraItems\",\n\t\t\tname \u003d \"Extra item IDs\",\n\t\t\tdescription \u003d \"Add an item to be notified for using a comma separated list and item IDs\",\n\t\t\tposition \u003d 9\n\t)\n\tdefault String extraItems() { return \"\"; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"ignoredItems\",\n\t\t\tname \u003d \"Ignored items\",\n\t\t\tdescription \u003d \"Use a comma separated list of item names or ids to not be checked. Use the base item (not the locked version).\",\n\t\t\tposition \u003d 8\n\t)\n\tdefault String ignoredItems() { return \"\"; }\n\n}\n\n","filePath":"src\\main\\java\\com\\parchmentalert\\ParchmentAlertConfig.java"},{"fileName":"ParchmentAlertOverlay.java","content":"package com.parchmentalert;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.config.RuneLiteConfig;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.ComponentConstants;\nimport net.runelite.client.ui.overlay.components.LineComponent;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.awt.*;\nimport java.util.ArrayList;\nimport java.util.HashSet;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\nimport static net.runelite.api.widgets.WidgetInfo.PVP_WILDERNESS_LEVEL;\n\n@Singleton\npublic class ParchmentAlertOverlay extends OverlayPanel {\n\n    private final ParchmentAlertConfig config;\n    private final Client client;\n\n    private final String lockMsg \u003d \"You need to lock items!\";\n\n    private final ParchmentAlertPlugin plugin;\n    @Inject\n    private ParchmentAlertOverlay(ParchmentAlertConfig config, Client client, ParchmentAlertPlugin plugin)\n    {\n        this.config \u003d config;\n        this.client \u003d client;\n        this.plugin \u003d plugin;\n    }\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        if(!plugin.getIsRunning())\n            return null;\n        panelComponent.getChildren().clear();\n\n        FontMetrics metrics \u003d graphics.getFontMetrics();\n\n        HashSet\u003cString\u003e unparchedNames \u003d plugin.getUnparchedNames();\n        String itemList \u003d \"\";\n        int longest \u003d 0;\n        if(unparchedNames !\u003d null \u0026\u0026 unparchedNames.size()\u003e0)\n        {\n            for(String s : unparchedNames)\n            {\n                int t \u003d metrics.stringWidth(s);\n                if(t\u003elongest)\n                    longest \u003d t;\n            }\n\n        }\n        int w \u003d Math.max(ComponentConstants.STANDARD_WIDTH, metrics.stringWidth(lockMsg) + longest + 14);\n        panelComponent.setPreferredSize(new Dimension(w,0));\n        panelComponent.getChildren().add((LineComponent.builder())\n                .left(lockMsg)\n                .right(itemList)\n                .build());\n        if(unparchedNames !\u003d null \u0026\u0026 unparchedNames.size()\u003e0)\n        {\n            for(String s : unparchedNames)\n            {\n                panelComponent.getChildren().add((LineComponent.builder())\n                        .right(s)\n                        .build());\n            }\n        }\n\n        if (config.flash()) {\n            if (client.getGameCycle() % config.interval() \u003e\u003d config.interval()/2)\n            {\n                panelComponent.setBackgroundColor(config.bg());\n            } else\n            {\n                panelComponent.setBackgroundColor(config.flashColor());\n            }\n        } else {\n            panelComponent.setBackgroundColor(config.bg());\n        }\n\n        setPosition(OverlayPosition.ABOVE_CHATBOX_RIGHT);\n        return panelComponent.render(graphics);\n    }\n}\n","filePath":"src\\main\\java\\com\\parchmentalert\\ParchmentAlertOverlay.java"},{"fileName":"ParchmentAlertPlugin.java","content":"package com.parchmentalert;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.ClientTick;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.Notifier;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\nimport java.util.ArrayList;\nimport java.util.HashSet;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\nimport static net.runelite.api.widgets.WidgetInfo.PVP_WILDERNESS_LEVEL;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Trouver Parchment Alert\"\n)\npublic class ParchmentAlertPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ParchmentAlertConfig config;\n\n\t@Inject\n\tprivate ParchmentAlertService service;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate ParchmentAlertOverlay overlay;\n\n\tprivate boolean isRunning;\n\n\t@Inject\n\tClientThread thread;\n\n\tprivate HashSet\u003cString\u003e unparchedNames;\n\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tisRunning \u003d true;\n\n\t\tthread.invokeLater(() -\u003e\n\t\t{\n\t\t\tupdate();\n\t\t});\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tisRunning \u003d false;\n\t\toverlayManager.remove(overlay);\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick gameTick)\n\t{\n\t\tupdate();\n\t}\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged configChanged)\n\t{\n\t\tif(!configChanged.getGroup().equalsIgnoreCase(\"Trouver Parchment Alert\"))\n\t\t\treturn;\n\t\tif(unparchedNames!\u003dnull)\n\t\t\tunparchedNames.clear();\n\n\t\tthread.invokeLater(() -\u003e\n\t\t{\n\t\t\tupdate();\n\t\t});\n\t}\n\n\tprivate void update()\n\t{\n\t\tint wildyLevel \u003d 0;\n\t\tif (config.willNotify() \u003d\u003d ParchmentAlertConfig.HighlightSetting.DEEP_WILD)\n\t\t{\n\t\t\tWidget wi \u003d client.getWidget(5898290);\n\n\t\t\tif(wi !\u003d null)\n\t\t\t\tif(wi.isHidden())\n\t\t\t\t{\n\t\t\t\t\twildyLevel \u003d -1;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tString wildyText \u003d wi.getText();\n\t\t\t\t\tif(!(wildyText \u003d\u003d null || wildyText.isEmpty()) \u0026\u0026 wildyText.matches(\".*\\\\d.*\")) //these are to prevent timing issues, as well as the -- outside ferox\n\t\t\t\t\t{\n\t\t\t\t\t\tMatcher m \u003d Pattern.compile(\"(\\\\d+)\").matcher(wildyText);\n//\t\t\t\t\t\tclient.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \" Wildy text: \" + wildyText, null); //commented for debug in future\n\t\t\t\t\t\tm.find();\n\t\t\t\t\t\twildyLevel \u003d Integer.valueOf(m.group());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\t\tif (config.willNotify() \u003d\u003d ParchmentAlertConfig.HighlightSetting.ENABLED ||\n\t\t\t\t(config.willNotify() \u003d\u003d ParchmentAlertConfig.HighlightSetting.DEEP_WILD \u0026\u0026 wildyLevel \u003e\u003d config.wildernessLevel()) ||\n\t\t\t\t(config.willNotify() \u003d\u003d ParchmentAlertConfig.HighlightSetting.PVP \u0026\u0026\n\t\t\t\t(client.getVarbitValue(Varbits.IN_WILDERNESS) \u003d\u003d 1 || client.getVarbitValue(Varbits.PVP_SPEC_ORB) \u003d\u003d 1))) {\n\t\t\tArrayList\u003cInteger\u003e unparchedItems \u003d service.getItems();\n\t\t\tHashSet\u003cString\u003e unparchedNames \u003d new HashSet\u003c\u003e();\n\t\t\tunparchedNames.clear();\n\t\t\tif (unparchedItems.size() \u003d\u003d 0) {\n\t\t\t\toverlayManager.remove(overlay);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfor (Integer i : unparchedItems) {\n\t\t\t\tItemComposition ip \u003d client.getItemDefinition(i.intValue());\n\t\t\t\tunparchedNames.add(ip.getName());\n\t\t\t}\n\t\t\tif (config.showNames()) {\n\t\t\t\tthis.unparchedNames \u003d unparchedNames;\n\t\t\t}\n\t\t\toverlayManager.add(overlay);\n\n\n\t\t} else {\n\t\t\toverlayManager.remove(overlay);\n\t\t}\n\t}\n\n\tpublic HashSet\u003cString\u003e getUnparchedNames()\n\t{\n\t\treturn unparchedNames;\n\t}\n\n\tpublic boolean getIsRunning()\n\t{\n\t\treturn isRunning \u0026\u0026 config.willNotify() !\u003d ParchmentAlertConfig.HighlightSetting.DISABLED;\n\t}\n\n\n\t@Provides\n\tParchmentAlertConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(ParchmentAlertConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\parchmentalert\\ParchmentAlertPlugin.java"},{"fileName":"ParchmentAlertService.java","content":"package com.parchmentalert;\n\nimport net.runelite.api.*;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.api.gameval.ItemID;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.util.ArrayList;\nimport java.util.HashSet;\n\n@Singleton\npublic class ParchmentAlertService {\n    private final Client client;\n    private final ParchmentAlertConfig config;\n\n    private final ItemManager itemManager;\n\n    private final int[] UnparchmentedItems \u003d {\n            ItemID.SKILLCAPE_MAX_INFERNALCAPE,\n            ItemID.SKILLCAPE_MAX_FIRECAPE,\n            ItemID.SKILLCAPE_MAX_ASSEMBLER,\n            ItemID.BRONZE_PARRYINGDAGGER,\n            ItemID.IRON_PARRYINGDAGGER,\n            ItemID.STEEL_PARRYINGDAGGER,\n            ItemID.BLACK_PARRYINGDAGGER,\n            ItemID.MITHRIL_PARRYINGDAGGER,\n            ItemID.ADAMANT_PARRYINGDAGGER,\n            ItemID.RUNE_PARRYINGDAGGER,\n            ItemID.DRAGON_PARRYINGDAGGER,\n            ItemID.CASTLEWARS_SWORD_3,\n            ItemID.CASTLEWARS_ARMOUR_BODY_3,\n            ItemID.CASTLEWARS_ARMOUR_LEGS_3,\n            ItemID.CASTLEWARS_MED_HELM_3,\n            ItemID.CASTLEWARS_SHIELD_3,\n            ItemID.CASTLEWARS_ARMOUR_SKIRT_3,\n            ItemID.CASTLEWARS_MAGE_TOP,\n            ItemID.CASTLEWARS_MAGE_LEGS,\n            ItemID.CASTLEWARS_MAGE_HAT,\n            ItemID.CASTLEWARS_RANGE_TOP,\n            ItemID.CASTLEWARS_RANGE_LEGS,\n            ItemID.CASTLEWARS_RANGE_QUIVER,\n            ItemID.CASTLEWARS_SARADOMIN_HALO,\n            ItemID.CASTLEWARS_ZAMORAK_HALO,\n            ItemID.CASTLEWARS_GUTHIX_HALO,\n            ItemID.BARBASSAULT_PENANCE_HEALER_HAT,\n            ItemID.BARBASSAULT_PENANCE_FIGHTER_HAT,\n            ItemID.BARBASSAULT_PENANCE_RANGER_HAT,\n            ItemID.BARBASSAULT_PENANCE_FIGHTER_TORSO,\n            ItemID.BARBASSAULT_PENANCE_RANGER_LEGS,\n            ItemID.PEST_VOID_KNIGHT_TOP,\n            ItemID.ELITE_VOID_KNIGHT_TOP,\n            ItemID.PEST_VOID_KNIGHT_ROBES,\n            ItemID.ELITE_VOID_KNIGHT_ROBES,\n            ItemID.PEST_VOID_KNIGHT_MACE,\n            ItemID.PEST_VOID_KNIGHT_GLOVES,\n            ItemID.GAME_PEST_MAGE_HELM,\n            ItemID.GAME_PEST_ARCHER_HELM,\n            ItemID.GAME_PEST_MELEE_HELM,\n            ItemID.INFERNAL_DEFENDER,\n            ItemID.ARMADYL_HALO,\n            ItemID.BANDOS_HALO,\n            ItemID.SEREN_HALO,\n            ItemID.ZAROS_HALO,\n            ItemID.BRASSICA_HALO,\n            ItemID.AVAS_ASSEMBLER,\n            ItemID.TZHAAR_CAPE_FIRE,\n            ItemID.INFERNAL_CAPE,\n            ItemID.SKILLCAPE_MAX_SARADOMIN2,\n            ItemID.SKILLCAPE_MAX_ZAMORAK2,\n            ItemID.SKILLCAPE_MAX_GUTHIX2,\n            ItemID.MA2_SARADOMIN_CAPE,\n            ItemID.MA2_GUTHIX_CAPE,\n            ItemID.MA2_ZAMORAK_CAPE,\n            ItemID.BH_RUNE_POUCH,\n            ItemID.BARBASSAULT_PENANCE_RUNNER_HAT,\n            ItemID.CASTLEWARS_BOOTS_3,\n            ItemID.CASTLEWARS_FULL_HELM_3,\n            ItemID.BARRONITE_MACE,\n            ItemID.PVPA_CENTURION_CUIRASS,\n            ItemID.PVPA_ARENA_WRISTBANDS,\n            ItemID.PVPA_ARENA_WRISTBANDS_CHARGED,\n            ItemID.PVPA_ARENA_WRISTBANDS_I,\n            ItemID.PVPA_ARENA_WRISTBANDS_I_CHARGED,\n            ItemID.PVPA_SAIKAS_HOOD,\n            ItemID.PVPA_SAIKAS_VEIL,\n            ItemID.PVPA_SAIKAS_SHROUD,\n            ItemID.PVPA_KORIFFS_HEADBAND,\n            ItemID.PVPA_KORIFFS_COWL,\n            ItemID.PVPA_KORIFFS_COIF,\n            ItemID.PVPA_MAOMAS_MED_HELM,\n            ItemID.PVPA_MAOMAS_FULL_HELM,\n            ItemID.PVPA_MAOMAS_GREAT_HELM,\n            ItemID.PVPA_CALAMITY_CHEST,\n            ItemID.PVPA_SUPERIOR_CALAMITY_CHEST,\n            ItemID.PVPA_ELITE_CALAMITY_CHEST,\n            ItemID.PVPA_CALAMITY_BREECHES,\n            ItemID.PVPA_SUPERIOR_CALAMITY_BREECHES,\n            ItemID.PVPA_ELITE_CALAMITY_BREECHES,\n            ItemID.LEAGUE_3_VOID_KNIGHT_TOP,\n            ItemID.LEAGUE_3_VOID_KNIGHT_ROBES,\n            ItemID.LEAGUE_3_VOID_KNIGHT_GLOVES,\n            ItemID.LEAGUE_3_VOID_KNIGHT_TOP_ELITE,\n            ItemID.LEAGUE_3_VOID_KNIGHT_ROBES_ELITE,\n            ItemID.LEAGUE_3_VOID_MAGE_HELM,\n            ItemID.LEAGUE_3_VOID_RANGE_HELM,\n            ItemID.LEAGUE_3_VOID_MELEE_HELM,\n            ItemID.DRAGON_PARRYINGDAGGER_T,\n            ItemID.RUNE_PARRYINGDAGGER_T,\n            ItemID.SKILLCAPE_MAX_ASSEMBLER_MASORI,\n            ItemID.AVAS_ASSEMBLER_MASORI,\n            ItemID.DIVINE_RUNE_POUCH,\n            ItemID.INFERNAL_DEFENDER_GHOMMAL_5,\n            ItemID.INFERNAL_DEFENDER_GHOMMAL_6,\n            ItemID.ANCIENT_SCEPTRE,\n            ItemID.BH_BARBASSAULT_PENANCE_FIGHTER_TORSO_CORRUPTED,\n            ItemID.ANCIENT_SCEPTRE_BLOOD,\n            ItemID.ANCIENT_SCEPTRE_ICE,\n            ItemID.ANCIENT_SCEPTRE_SMOKE,\n            ItemID.ANCIENT_SCEPTRE_SHADOW,\n            ItemID.SKILLCAPE_MAX_DIZANAS,\n            ItemID.DIZANAS_QUIVER_UNCHARGED,\n            ItemID.DIZANAS_QUIVER_CHARGED,\n            ItemID.DIZANAS_QUIVER_INFINITE,\n            ItemID.DIVINE_RUNE_POUCH,\n            ItemID.DIZANAS_QUIVER_UNCHARGED,\n            ItemID.DIZANAS_QUIVER_CHARGED,\n    };\n\n\n\n    @Inject\n    private ParchmentAlertService(Client client, ParchmentAlertConfig config, ItemManager itemManager)\n    {\n        this.config \u003d config;\n        this.client \u003d client;\n        this.itemManager \u003d itemManager;\n    }\n\n    public ArrayList\u003cInteger\u003e getItems()\n    {\n        ArrayList\u003cInteger\u003e missingParchment \u003d new ArrayList\u003c\u003e();\n        final ItemContainer equipment \u003d client.getItemContainer(InventoryID.EQUIPMENT);\n        final ItemContainer inventory \u003d client.getItemContainer(InventoryID.INVENTORY);\n        HashSet\u003cInteger\u003e skippedItems \u003d new HashSet\u003c\u003e();\n        HashSet\u003cString\u003e skippedNames \u003d new HashSet\u003c\u003e();\n        if(config.ignoredItems() !\u003d null \u0026\u0026 !config.ignoredItems().isEmpty()) {\n            String[] skipIds \u003d config.ignoredItems().split(\",\");\n            for (String s : skipIds) {\n                try {\n                    Integer i \u003d Integer.parseInt(s.strip());\n                    skippedItems.add(i);\n                } catch (NumberFormatException ignored) {\n                    skippedNames.add(s.strip().toLowerCase());\n                }\n            }\n        }\n\n        for (int unparchmentedItem : UnparchmentedItems) {\n            if (skippedItems.contains(unparchmentedItem))\n                continue;\n            if (skippedNames.contains(client.getItemDefinition(unparchmentedItem).getName().toLowerCase()))\n                continue;\n            if ((equipment !\u003d null \u0026\u0026 equipment.contains(unparchmentedItem)) || (inventory !\u003d null \u0026\u0026 inventory.contains(unparchmentedItem))) {\n                missingParchment.add(unparchmentedItem);\n            }\n        }\n        if(config.extraItems() \u003d\u003d null || config.extraItems().isEmpty())\n            return missingParchment;\n\n        String[] idStrs \u003d config.extraItems().split(\",\");\n        ArrayList\u003cInteger\u003e extraItems \u003d new ArrayList\u003c\u003e();\n        for(String s : idStrs)\n        {\n            try\n            {\n                Integer i \u003d Integer.parseInt(s.strip());\n                extraItems.add(i);\n\n            }\n            catch(NumberFormatException ignored)\n            {\n            }\n        }\n        for (Integer extraItem : extraItems) {\n            if ((equipment !\u003d null \u0026\u0026 equipment.contains(extraItem.intValue())) || (inventory !\u003d null \u0026\u0026 inventory.contains(extraItem.intValue()))) {\n                missingParchment.add(extraItem);\n            }\n        }\n\n        return missingParchment;\n    }\n}\n","filePath":"src\\main\\java\\com\\parchmentalert\\ParchmentAlertService.java"},{"fileName":"ParchmentAlertTest.java","content":"package com.parchmentalert;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ParchmentAlertTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(ParchmentAlertPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\parchmentalert\\ParchmentAlertTest.java"}]},{"commit":"a68afec294c6ef6b145f4aec31c7be3dabb73a08","repository":"https://github.com/Broooklyn/runelite-external-plugins.git","internalName":"annoyance-mute","files":[{"fileName":"AnnoyanceMuteConfig.java","content":"/*\n * Copyright (c) 2020, Brooklyn \u003chttps://github.com/Broooklyn\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.brooklyn.annoyancemute;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\n\n@ConfigGroup(\"annoyancemute\")\npublic interface AnnoyanceMuteConfig extends Config\n{\n\t@ConfigSection(\n\t\tname \u003d \"Combat\",\n\t\tdescription \u003d \"Combat sounds to mute\",\n\t\tposition \u003d 0\n\t)\n\tString combatSection \u003d \"Combat\";\n\n\t@ConfigSection(\n\t\tname \u003d \"NPCs\",\n\t\tdescription \u003d \"NPC sounds to mute\",\n\t\tposition \u003d 1\n\t)\n\tString npcSection \u003d \"NPCs\";\n\n\t@ConfigSection(\n\t\tname \u003d \"Skilling\",\n\t\tdescription \u003d \"Skilling sounds to mute\",\n\t\tposition \u003d 2\n\t)\n\tString skillingSection \u003d \"Skilling\";\n\n\t@ConfigSection(\n\t\tname \u003d \"Prayers\",\n\t\tdescription \u003d \"Pray activation/deactivation sounds to mute\",\n\t\tposition \u003d 3,\n\t\tclosedByDefault \u003d true\n\t)\n\tString prayerSection \u003d \"Prayers\";\n\n\t@ConfigSection(\n\t\tname \u003d \"Miscellaneous\",\n\t\tdescription \u003d \"Miscellaneous sounds to mute\",\n\t\tposition \u003d 4\n\t)\n\tString miscSection \u003d \"Miscellaneous\";\n\n\t@ConfigSection(\n\t\tname \u003d \"Ambient\",\n\t\tdescription \u003d \"Ambient sounds to mute\",\n\t\tposition \u003d 5\n\t)\n\tString ambientSection \u003d \"Ambient\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"mutePetSounds\",\n\t\tname \u003d \"Pets\",\n\t\tdescription \u003d \"Mutes the sounds of noise-making pets\",\n\t\tsection \u003d npcSection\n\t)\n\tdefault boolean mutePetSounds()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteAreaOfEffectSpells\",\n\t\tname \u003d \"Humidify\",\n\t\tdescription \u003d \"Mutes humidify spell sound\",\n\t\tsection \u003d skillingSection\n\t)\n\tdefault boolean muteAOESounds()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteOthersHumidfy\",\n\t\tname \u003d \"Humidify (only others)\",\n\t\tdescription \u003d \"Mutes the sound of other players\u0027 humidify\",\n\t\tsection \u003d skillingSection\n\t)\n\tdefault boolean muteOthersHumidify()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteSnowballs\",\n\t\tname \u003d \"Snowballs\",\n\t\tdescription \u003d \"Mutes the sounds of snowballs being thrown\",\n\t\tsection \u003d miscSection\n\t)\n\tdefault boolean muteSnowballSounds()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteWhack\",\n\t\tname \u003d \"Whack\",\n\t\tdescription \u003d \"Mutes the Rubber chicken and Stale baguette whack sound\",\n\t\tsection \u003d miscSection\n\t)\n\tdefault boolean muteRubberChickenSounds()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteOthersAreaSounds\",\n\t\tname \u003d \"Others\u0027 Area Sounds\",\n\t\tdescription \u003d \"Mutes other players\u0027 area sounds\",\n\t\tsection \u003d miscSection\n\t)\n\tdefault boolean muteOthersAreaSounds()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteCrier\",\n\t\tname \u003d \"Town Crier\",\n\t\tdescription \u003d \"Mutes the sounds of the Town Crier\",\n\t\tsection \u003d npcSection\n\t)\n\tdefault boolean muteTownCrierSounds()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteCannon\",\n\t\tname \u003d \"Cannon spin\",\n\t\tdescription \u003d \"Mutes the sounds of a cannon spinning\",\n\t\tsection \u003d combatSection\n\t)\n\tdefault boolean muteCannon()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteREEEE\",\n\t\tname \u003d \"Armadyl Crossbow\",\n\t\tdescription \u003d \"Mutes the REEEEE of the ACB spec\",\n\t\tsection \u003d combatSection\n\t)\n\tdefault boolean muteREEEE()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteIceSpells\",\n\t\tname \u003d \"Ice Spells\",\n\t\tdescription \u003d \"Mutes the sounds of Ice Barrage, Ice Blitz, etc.\",\n\t\tsection \u003d combatSection\n\t)\n\tdefault boolean muteIceSpells()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteThralls\",\n\t\tname \u003d \"Thralls\",\n\t\tdescription \u003d \"Mutes the sounds of Thrall attacks\",\n\t\tsection \u003d combatSection\n\t)\n\tdefault boolean muteThralls()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteSire\",\n\t\tname \u003d \"Sire Spawns\",\n\t\tdescription \u003d \"Mutes the sounds of the Abyssal Sire\u0027s spawns\",\n\t\tsection \u003d npcSection\n\t)\n\tdefault boolean muteSire()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteFishingExplosive\",\n\t\tname \u003d \"Fishing Explosive\",\n\t\tdescription \u003d \"Mutes the sound of Fishing Explosives\",\n\t\tsection \u003d miscSection\n\t)\n\tdefault boolean muteFishingExplosive()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteObelisk\",\n\t\tname \u003d \"Wilderness Obelisk\",\n\t\tdescription \u003d \"Mutes the sounds of the Wilderness Obelisk\",\n\t\tsection \u003d miscSection\n\t)\n\tdefault boolean muteObelisk()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteNPCContact\",\n\t\tname \u003d \"NPC Contact\",\n\t\tdescription \u003d \"Mutes the sound of NPC Contact\",\n\t\tsection \u003d miscSection\n\t)\n\tdefault boolean muteNPCContact()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteHealOther\",\n\t\tname \u003d \"Heal Other\",\n\t\tdescription \u003d \"Mutes the sound of Heal Other and Heal Group\",\n\t\tsection \u003d miscSection\n\t)\n\tdefault boolean muteHealOther()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteItemDrop\",\n\t\tname \u003d \"Item Dropping\",\n\t\tdescription \u003d \"Mutes the sound that occurs when dropping an item\",\n\t\tsection \u003d miscSection\n\t)\n\tdefault boolean muteItemDrop()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteLevelUp\",\n\t\tname \u003d \"Level Up\",\n\t\tdescription \u003d \"Mutes the sound of the Level-up fireworks\",\n\t\tsection \u003d miscSection\n\t)\n\tdefault boolean muteLevelUp()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteTeleother\",\n\t\tname \u003d \"Teleother\",\n\t\tdescription \u003d \"Mutes the sound of the Teleother spell\",\n\t\tsection \u003d miscSection\n\t)\n\tdefault boolean muteTeleother()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteTeleport\",\n\t\tname \u003d \"Teleport\",\n\t\tdescription \u003d \"Mutes the teleport vwoop sound\",\n\t\tsection \u003d miscSection\n\t)\n\tdefault boolean muteTeleport()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteTeleportOthers\",\n\t\tname \u003d \"Teleport (only others)\",\n\t\tdescription \u003d \"Mutes the sound of other players\u0027 teleports\",\n\t\tsection \u003d miscSection\n\t)\n\tdefault boolean muteTeleportOthers()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteMagicTrees\",\n\t\tname \u003d \"Magic Trees\",\n\t\tdescription \u003d \"Mutes the sound of Magic Trees\",\n\t\tsection \u003d ambientSection\n\t)\n\tdefault boolean muteMagicTrees()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteHousePortal\",\n\t\tname \u003d \"House Portal\",\n\t\tdescription \u003d \"Mutes the sound of House Portal\",\n\t\tsection \u003d ambientSection\n\t)\n\tdefault boolean muteHousePortal()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteWhiteNoise\",\n\t\tname \u003d \"White Noise\",\n\t\tdescription \u003d \"Mutes the white noises/static filler sounds\",\n\t\tsection \u003d ambientSection\n\t)\n\tdefault boolean muteWhiteNoise()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteStranglewoodHowls\",\n\t\tname \u003d \"Mute Stranglewood Howls\",\n\t\tdescription \u003d \"Mutes the howl sounds around Stranglewood\",\n\t\tsection \u003d ambientSection\n\t)\n\tdefault boolean muteStranglewoodHowls()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteChirps\",\n\t\tname \u003d \"Chirps\",\n\t\tdescription \u003d \"Mutes the birds and cricket sounds\",\n\t\tsection \u003d ambientSection\n\t)\n\tdefault boolean muteChirps()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteWater\",\n\t\tname \u003d \"Water\",\n\t\tdescription \u003d \"Mutes the sound of water at shores or fountains\",\n\t\tsection \u003d ambientSection\n\t)\n\tdefault boolean muteWater()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteRanges\",\n\t\tname \u003d \"Ranges\",\n\t\tdescription \u003d \"Mutes the sound of cooking ranges\",\n\t\tsection \u003d ambientSection\n\t)\n\tdefault boolean muteRanges()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteFortisColosseum\",\n\t\tname \u003d \"Fortis Colosseum\",\n\t\tdescription \u003d \"Mutes the ambient sounds of Fortis Colosseum\",\n\t\tsection \u003d ambientSection\n\t)\n\tdefault boolean muteFortisColosseum()\n\t{\n\t\treturn true;\n\t}\n\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteRandoms\",\n\t\tname \u003d \"Random Events\",\n\t\tdescription \u003d \"Mutes the sounds produced by random events\",\n\t\tsection \u003d npcSection\n\t)\n\tdefault boolean muteRandoms()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteTekton\",\n\t\tname \u003d \"Tekton meteors\",\n\t\tdescription \u003d \"Mutes the sound of Tekton\u0027s meteor attack\",\n\t\tsection \u003d npcSection\n\t)\n\tdefault boolean muteTekton()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteCows\",\n\t\tname \u003d \"Cows\",\n\t\tdescription \u003d \"Mutes the sounds of Cows\u0027 moomoo\",\n\t\tsection \u003d npcSection\n\t)\n\tdefault boolean muteCows()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteCaveHorrors\",\n\t\tname \u003d \"Cave Horrors\",\n\t\tdescription \u003d \"Mutes the sound of Cave Horrors\",\n\t\tsection \u003d npcSection\n\t)\n\tdefault boolean muteCaveHorrors()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteWyverns\",\n\t\tname \u003d \"Fossil Island Wyverns\",\n\t\tdescription \u003d \"Mutes the sounds of Fossil Island Wyverns\",\n\t\tsection \u003d npcSection\n\t)\n\tdefault boolean muteWyverns()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteJellies\",\n\t\tname \u003d \"Jellies\",\n\t\tdescription \u003d \"Mutes the sounds of Jellies\",\n\t\tsection \u003d npcSection\n\t)\n\tdefault boolean muteJellies()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteNailBeasts\",\n\t\tname \u003d \"Nail Beasts\",\n\t\tdescription \u003d \"Mutes the sounds of Nail Beasts\",\n\t\tsection \u003d npcSection\n\t)\n\tdefault boolean muteNailBeasts()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteDemons\",\n\t\tname \u003d \"Demons\",\n\t\tdescription \u003d \"Mutes the sounds of various Demons\",\n\t\tsection \u003d npcSection\n\t)\n\tdefault boolean muteDemons()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteNechryael\",\n\t\tname \u003d \"Nechryael\",\n\t\tdescription \u003d \"Mutes the sounds of Nechryaels\",\n\t\tsection \u003d npcSection\n\t)\n\tdefault boolean muteNechryael()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteDustDevils\",\n\t\tname \u003d \"Dust Devils\",\n\t\tdescription \u003d \"Mutes the sounds of Dust Devils\",\n\t\tsection \u003d npcSection\n\t)\n\tdefault boolean muteDustDevils()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteSpectres\",\n\t\tname \u003d \"Spectres\",\n\t\tdescription \u003d \"Mutes the sounds of Aberrant and Deviant Spectres\",\n\t\tsection \u003d npcSection\n\t)\n\tdefault boolean muteSpectres()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteDenseEssence\",\n\t\tname \u003d \"Dense Essence\",\n\t\tdescription \u003d \"Mutes the sound of chiseling Dense Essence\",\n\t\tsection \u003d skillingSection\n\t)\n\tdefault boolean muteDenseEssence()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteChopChop\",\n\t\tname \u003d \"Chop Chop!\",\n\t\tdescription \u003d \"Mutes the sound of the Dragon axe special\",\n\t\tsection \u003d skillingSection\n\t)\n\tdefault boolean muteChopChop()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteSmashing!\",\n\t\tname \u003d \"Smashing!\",\n\t\tdescription \u003d \"Mutes the sound of the Dragon Pickaxe special\",\n\t\tsection \u003d skillingSection\n\t)\n\tdefault boolean muteSmashing()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteWoodcutting\",\n\t\tname \u003d \"Woodcutting\",\n\t\tdescription \u003d \"Mutes the sound of Woodcutting\",\n\t\tsection \u003d skillingSection\n\t)\n\tdefault boolean muteWoodcutting()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"plankMake\",\n\t\tname \u003d \"Plank Make\",\n\t\tdescription \u003d \"Mutes the sound of Plank Make\",\n\t\tsection \u003d skillingSection\n\t)\n\tdefault boolean mutePlankMake()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"mutePickpocket\",\n\t\tname \u003d \"Pickpocket\",\n\t\tdescription \u003d \"Mutes the sound of the pickpocket plop\",\n\t\tsection \u003d skillingSection\n\t)\n\tdefault boolean mutePickpocket()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"mutePickpocketStun\",\n\t\tname \u003d \"Pickpocket Stun\",\n\t\tdescription \u003d \"Mutes the sound of the pickpocket stun\",\n\t\tsection \u003d skillingSection\n\t)\n\tdefault boolean mutePickpocketStun()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteStringJewellery\",\n\t\tname \u003d \"String Jewellery\",\n\t\tdescription \u003d \"Mutes the sound of the String Jewellery spell\",\n\t\tsection \u003d skillingSection\n\t)\n\tdefault boolean muteStringJewellery()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteNightmare\",\n\t\tname \u003d \"Nightmare\",\n\t\tdescription \u003d \"Mutes the sound of the Nightmare\u0027s parry\",\n\t\tsection \u003d npcSection\n\t)\n\tdefault boolean muteNightmare()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteScarabs\",\n\t\tname \u003d \"Scarab Swarm\",\n\t\tdescription \u003d \"Mutes the sound of the Scarab swarm in Pyramid Plunder\",\n\t\tsection \u003d npcSection\n\t)\n\tdefault boolean muteScarabs()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteFiremaking\",\n\t\tname \u003d \"Firemaking\",\n\t\tdescription \u003d \"Mutes the sound of burning and lighting logs\",\n\t\tsection \u003d skillingSection\n\t)\n\tdefault boolean muteFiremaking()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteFishing\",\n\t\tname \u003d \"Fishing\",\n\t\tdescription \u003d \"Mutes the sound of Fishing\",\n\t\tsection \u003d skillingSection\n\t)\n\tdefault boolean muteFishing()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteFletching\",\n\t\tname \u003d \"Fletching\",\n\t\tdescription \u003d \"Mutes the sound of Fletching\",\n\t\tsection \u003d skillingSection\n\t)\n\tdefault boolean muteFletching()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteMining\",\n\t\tname \u003d \"Mining\",\n\t\tdescription \u003d \"Mutes the sounds of Mining\",\n\t\tsection \u003d skillingSection\n\t)\n\tdefault boolean muteMining()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteAlchemy\",\n\t\tname \u003d \"Alchemy\",\n\t\tdescription \u003d \"Mutes the sounds of Low and High Alchemy\",\n\t\tsection \u003d skillingSection\n\t)\n\tdefault boolean muteAlchemy()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteChargeOrb\",\n\t\tname \u003d \"Charge Orb\",\n\t\tdescription \u003d \"Mutes the sounds of Charge Orb spells\",\n\t\tsection \u003d skillingSection\n\t)\n\tdefault boolean muteChargeOrb()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteThickSkin\",\n\t\tname \u003d \"Thick Skin\",\n\t\tdescription \u003d \"Mutes the activation sound of Thick Skin\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 1\n\t)\n\tdefault boolean muteThickSkin()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteBurstOfStrength\",\n\t\tname \u003d \"Burst of Strength\",\n\t\tdescription \u003d \"Mutes the activation sound of Burst of Strength\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 2\n\t)\n\tdefault boolean muteBurstofStrength()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteClarityOfThought\",\n\t\tname \u003d \"Clarity of Thought\",\n\t\tdescription \u003d \"Mutes the activation sound of Clarity of Thought\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 3\n\t)\n\tdefault boolean muteClarityOfThought()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteRockSkin\",\n\t\tname \u003d \"Rock Skin\",\n\t\tdescription \u003d \"Mutes the activation sound of Rock Skin\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 4\n\t)\n\tdefault boolean muteRockSkin()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteSuperhumanStrength\",\n\t\tname \u003d \"Superhuman Strength\",\n\t\tdescription \u003d \"Mutes the activation sound of Superhuman Strength\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 5\n\t)\n\tdefault boolean muteSuperhumanStrength()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteImprovedReflexes\",\n\t\tname \u003d \"Improved Reflexes\",\n\t\tdescription \u003d \"Mutes the activation sound of Improved Reflexes\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 6\n\t)\n\tdefault boolean muteImprovedReflexes()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteRapidHeal\",\n\t\tname \u003d \"Rapid Heal\",\n\t\tdescription \u003d \"Mutes the activation sound of Rapid Heal\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 7\n\t)\n\tdefault boolean muteRapidHeal()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteProtectItem\",\n\t\tname \u003d \"Protect Item\",\n\t\tdescription \u003d \"Mutes the activation sound of Protect Item\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 8\n\t)\n\tdefault boolean muteProtectItem()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteHawkEye\",\n\t\tname \u003d \"Hawk Eye\",\n\t\tdescription \u003d \"Mutes the activation sound of Hawk Eye\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 9\n\t)\n\tdefault boolean muteHawkEye()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteMysticLore\",\n\t\tname \u003d \"Mystic Lore\",\n\t\tdescription \u003d \"Mutes the activation sound of Mystic Lore\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 10\n\t)\n\tdefault boolean muteMysticLore()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteSteelSkin\",\n\t\tname \u003d \"Steel Skin\",\n\t\tdescription \u003d \"Mutes the activation sound of Steel Skin\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 11\n\t)\n\tdefault boolean muteSteelSkin()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteUltimateStrength\",\n\t\tname \u003d \"Ultimate Strength\",\n\t\tdescription \u003d \"Mutes the activation sound of Ultimate Strength\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 12\n\t)\n\tdefault boolean muteUltimateStrength()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteIncredibleReflexes\",\n\t\tname \u003d \"Incredible Reflexes\",\n\t\tdescription \u003d \"Mutes the activation sound of Incredible Reflexes\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 13\n\t)\n\tdefault boolean muteIncredibleReflexes()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteProtectFromMagic\",\n\t\tname \u003d \"Protect from Magic\",\n\t\tdescription \u003d \"Mutes the activation sound of Protect from Magic\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 14\n\t)\n\tdefault boolean muteProtectFromMagic()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteProtectFromRange\",\n\t\tname \u003d \"Protect from Range\",\n\t\tdescription \u003d \"Mutes the activation sound of Protect from Range\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 15\n\t)\n\tdefault boolean muteProtectFromRange()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteProtectFromMelee\",\n\t\tname \u003d \"Protect from Melee\",\n\t\tdescription \u003d \"Mutes the activation sound of Protect from Melee\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 16\n\t)\n\tdefault boolean muteProtectFromMelee()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteEagleEye\",\n\t\tname \u003d \"Eagle Eye\",\n\t\tdescription \u003d \"Mutes the activation sound of Eagle Eye\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 17\n\t)\n\tdefault boolean muteEagleEye()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteMysticMight\",\n\t\tname \u003d \"Mystic Might\",\n\t\tdescription \u003d \"Mutes the activation sound of Mystic Might\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 18\n\t)\n\tdefault boolean muteMysticMight()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteRetribution\",\n\t\tname \u003d \"Retribution\",\n\t\tdescription \u003d \"Mutes the activation sound of Retribution\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 19\n\t)\n\tdefault boolean muteRetribution()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteRedemption\",\n\t\tname \u003d \"Redemption\",\n\t\tdescription \u003d \"Mutes the activation sound of Redemption\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 20\n\t)\n\tdefault boolean muteRedemption()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteSmite\",\n\t\tname \u003d \"Smite\",\n\t\tdescription \u003d \"Mutes the activation sound of Smite\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 21\n\t)\n\tdefault boolean muteSmite()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"mutePreserve\",\n\t\tname \u003d \"Preserve\",\n\t\tdescription \u003d \"Mutes the activation sound of Preserve and Rapid Restore\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 22\n\t)\n\tdefault boolean mutePreserve()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteChivalry\",\n\t\tname \u003d \"Chivalry\",\n\t\tdescription \u003d \"Mutes the activation sound of Chivalry\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 23\n\t)\n\tdefault boolean muteChivalry()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"mutePiety\",\n\t\tname \u003d \"Piety\",\n\t\tdescription \u003d \"Mutes the activation sound of Piety\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 24\n\t)\n\tdefault boolean mutePiety()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteRigour\",\n\t\tname \u003d \"Rigour\",\n\t\tdescription \u003d \"Mutes the activation sound of Rigour and Sharp Eye\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 25\n\t)\n\tdefault boolean muteRigour()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteAugury\",\n\t\tname \u003d \"Augury\",\n\t\tdescription \u003d \"Mutes the activation sound of Augury and Mystic Will\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 26\n\t)\n\tdefault boolean muteAugury()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteDeadeye\",\n\t\tname \u003d \"Deadeye\",\n\t\tdescription \u003d \"Mutes the activation sound of Deadeye\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 27\n\t)\n\tdefault boolean muteDeadeye()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteMysticVigour\",\n\t\tname \u003d \"Mystic Vigour\",\n\t\tdescription \u003d \"Mutes the activation sound of Mystic Vigour\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 28\n\t)\n\tdefault boolean muteMysticVigour()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"muteDeactivatePrayer\",\n\t\tname \u003d \"Deactivate Prayer\",\n\t\tdescription \u003d \"Mutes the prayer deactivation sound\",\n\t\tsection \u003d prayerSection,\n\t\tposition \u003d 29\n\t)\n\tdefault boolean muteDeactivatePrayer()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"soundsToMute\",\n\t\tname \u003d \"Muted Sounds\",\n\t\tdescription \u003d \"Enter IDs of the sounds you wish to mute\",\n\t\tposition \u003d 30\n\t)\n\tdefault String soundsToMute()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"ambientSoundsToMute\",\n\t\tname \u003d \"Muted Ambient Sounds\",\n\t\tdescription \u003d \"Enter IDs of the ambient sounds you wish to mute\",\n\t\tposition \u003d 31\n\t)\n\tdefault String ambientSoundsToMute()\n\t{\n\t\treturn \"\";\n\t}\n}\n","filePath":"src\\main\\java\\com\\brooklyn\\annoyancemute\\AnnoyanceMuteConfig.java"},{"fileName":"AnnoyanceMutePlugin.java","content":"/*\n * Copyright (c) 2020, Brooklyn \u003chttps://github.com/Broooklyn\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.brooklyn.annoyancemute;\n\nimport com.brooklyn.annoyancemute.soundeffects.ActorCombatSoundEffect;\nimport com.brooklyn.annoyancemute.soundeffects.AnimationSoundEffect;\nimport com.brooklyn.annoyancemute.soundeffects.AmbientSoundEffect;\nimport com.brooklyn.annoyancemute.soundeffects.SoundEffect;\nimport com.brooklyn.annoyancemute.soundeffects.GenericSoundEffect;\nimport com.google.common.annotations.VisibleForTesting;\nimport com.google.inject.Provides;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.stream.Collectors;\nimport javax.annotation.Nullable;\nimport javax.inject.Inject;\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport net.runelite.api.Actor;\nimport net.runelite.api.Client;\nimport net.runelite.api.Deque;\nimport net.runelite.api.GameState;\nimport net.runelite.api.Player;\nimport net.runelite.api.Varbits;\nimport net.runelite.api.events.AmbientSoundEffectCreated;\nimport net.runelite.api.events.AreaSoundEffectPlayed;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.SoundEffectPlayed;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.util.Text;\n\n@PluginDescriptor(\n\tname \u003d \"Annoyance Mute\",\n\tdescription \u003d \"Selectively mute annoying game sounds\",\n\ttags \u003d {\"sound\", \"volume\", \"mute\", \"hub\", \"brooklyn\", \"pet\", \"stomp\"}\n)\npublic class AnnoyanceMutePlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate AnnoyanceMuteConfig config;\n\n\t@VisibleForTesting\n\tpublic HashSet\u003cSoundEffect\u003e soundEffects \u003d new HashSet\u003c\u003e();\n\n\t@Getter(AccessLevel.PUBLIC)\n\tpublic HashSet\u003cSoundEffect\u003e ambientSoundsToMute \u003d new HashSet\u003c\u003e();\n\n\t@Provides\n\tAnnoyanceMuteConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(AnnoyanceMuteConfig.class);\n\t}\n\n\t@Override\n\tpublic void startUp()\n\t{\n\t\tsetUpMutes();\n\n\t\tclientThread.invoke(() -\u003e\n\t\t{\n\t\t\t// Reload the scene to reapply ambient sounds\n\t\t\tif (client.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t\t{\n\t\t\t\tclient.setGameState(GameState.LOADING);\n\t\t\t}\n\t\t});\n\t}\n\n\t@Override\n\tpublic void shutDown()\n\t{\n\t\tsoundEffects.clear();\n\n\t\tclientThread.invoke(() -\u003e\n\t\t{\n\t\t\t// Reload the scene to reapply ambient sounds\n\t\t\tif (client.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t\t{\n\t\t\t\tclient.setGameState(GameState.LOADING);\n\t\t\t}\n\t\t});\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged configChanged)\n\t{\n\t\tif (configChanged.getGroup().equals(\"annoyancemute\"))\n\t\t{\n\t\t\tsetUpMutes();\n\n\t\t\tswitch (configChanged.getKey())\n\t\t\t{\n\t\t\t\tcase \"muteMagicTrees\":\n\t\t\t\tcase \"muteHousePortal\":\n\t\t\t\tcase \"muteWhiteNoise\":\n\t\t\t\tcase \"muteChirps\":\n\t\t\t\tcase \"muteWater\":\n\t\t\t\tcase \"muteRanges\":\n\t\t\t\tcase \"muteFortisColosseum\":\n\t\t\t\tcase \"muteStranglewoodHowls\":\n\t\t\t\t\tclientThread.invoke(() -\u003e\n\t\t\t\t\t{\n\t\t\t\t\t\t// Reload the scene to reapply ambient sounds\n\t\t\t\t\t\tif (client.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tclient.setGameState(GameState.LOADING);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\n\t@Subscribe(priority \u003d -2) // priority -2 to run after music plugin\n\tpublic void onAmbientSoundEffectCreated(AmbientSoundEffectCreated ambientSoundEffectCreated)\n\t{\n\t\t// if nothing to mute then return\n\t\tif (ambientSoundsToMute.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tList\u003cSoundEffect\u003e mutedAmbientsSameID \u003d ambientSoundsToMute.stream().filter(mutedSounds -\u003e mutedSounds.getId() \u003d\u003d ambientSoundEffectCreated.getAmbientSoundEffect().getSoundEffectId()).collect(Collectors.toList());\n\n\t\t// only mute sounds created that should be muted should call the muteAmbientSounds()\n\t\tif (mutedAmbientsSameID.size() \u003e 0)\n\t\t{\n\t\t\tmuteAmbientSounds();\n\t\t}\n\t}\n\n\t@Subscribe(priority \u003d -2) // priority -2 to run after music plugin\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged)\n\t{\n\t\t// if nothing to mute then return\n\t\tif (ambientSoundsToMute.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tGameState gameState \u003d gameStateChanged.getGameState();\n\n\t\t// on map load mute ambient sounds\n\t\tif (gameState \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tmuteAmbientSounds();\n\t\t}\n\t}\n\n\t// Check the ambient sounds currently being played and remove the ones that should be mtued\n\tprivate void muteAmbientSounds()\n\t{\n\t\tDeque\u003cnet.runelite.api.AmbientSoundEffect\u003e ambientSoundEffects \u003d client.getAmbientSoundEffects();\n\t\tArrayList\u003cnet.runelite.api.AmbientSoundEffect\u003e soundsToKeep \u003d new ArrayList\u003c\u003e();\n\n\t\tfor (net.runelite.api.AmbientSoundEffect ambientSoundEffect : ambientSoundEffects)\n\t\t{\n\t\t\tList\u003cAmbientSoundEffect\u003e mutedAmbientsSameID \u003d ambientSoundsToMute.stream().filter(AmbientSoundEffect.class::isInstance)\n\t\t\t\t.map(AmbientSoundEffect.class::cast).filter(mutedSounds -\u003e mutedSounds.getId() \u003d\u003d ambientSoundEffect.getSoundEffectId()).collect(Collectors.toList());\n\t\t\tboolean muteSound \u003d false;\n\t\t\tfor (int i \u003d 0; i \u003c mutedAmbientsSameID.size() \u0026\u0026 !muteSound; i++)\n\t\t\t{\n\t\t\t\tint[] backgroundSounds \u003d ambientSoundEffect.getBackgroundSoundEffectIds();\n\t\t\t\tint[] backgroundSoundsToMute \u003d mutedAmbientsSameID.get(i).getBackgroundSoundEffects();\n\n\t\t\t\tif (backgroundSounds \u003d\u003d null \u0026\u0026 backgroundSoundsToMute.length \u003d\u003d 0)\n\t\t\t\t{\n\t\t\t\t\tmuteSound \u003d true;\n\t\t\t\t}\n\t\t\t\tif (backgroundSounds !\u003d null \u0026\u0026 backgroundSoundsToMute.length \u003d\u003d 0)\n\t\t\t\t{\n\t\t\t\t\tmuteSound \u003d true;\n\t\t\t\t}\n\t\t\t\tif (backgroundSounds !\u003d null \u0026\u0026 backgroundSoundsToMute.length !\u003d 0 \u0026\u0026 arraysLikeEnough(backgroundSounds, backgroundSoundsToMute))\n\t\t\t\t{\n\t\t\t\t\tmuteSound \u003d true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!muteSound)\n\t\t\t{\n\t\t\t\tsoundsToKeep.add(ambientSoundEffect);\n\t\t\t}\n\t\t}\n\n\t\t// clear the deque (mutes all sounds)\n\t\tclient.getAmbientSoundEffects().clear();\n\n\t\t// add the sounds not black listed back in\n\t\tfor (net.runelite.api.AmbientSoundEffect ambientSoundEffect : soundsToKeep)\n\t\t{\n\t\t\tclient.getAmbientSoundEffects().addLast(ambientSoundEffect);\n\t\t}\n\t}\n\n\t// i can\u0027t be asked to find every single instance of 2184\u0027s ambient sound and all unique arrays\n\t// so let\u0027s find similar ones and include them as mutes\n\tprivate boolean arraysLikeEnough(int[] array1, int[] array2)\n\t{\n\t\tint total \u003d 0;\n\t\tint totalSimilar \u003d 0;\n\n\t\tfor (int int1 : array1)\n\t\t{\n\t\t\ttotal++;\n\t\t\tfor (int int2 : array2)\n\t\t\t{\n\t\t\t\tif (int1 \u003d\u003d int2)\n\t\t\t\t{\n\t\t\t\t\ttotalSimilar++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn ((double) totalSimilar / total \u003e 0.75);\n\t}\n\n\t@VisibleForTesting\n\tpublic void setUpMutes()\n\t{\n\t\tsoundEffects \u003d new HashSet\u003c\u003e();\n\n\t\tif (config.muteREEEE())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.ACB_REEEE, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteCannon())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.CANNON_SPIN, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.SHATTERED_CANNON_SPIN, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteIceSpells())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.ICE_BARRAGE_CAST, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.ICE_BLITZ_CAST, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.ICE_BURST_CAST, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.ICE_SPELL_LAND, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.ICE_RUSH_CAST, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteThralls())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.WATER_STRIKE_CAST, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.WATER_STRIKE_LAND, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.ZOMBIE_THRALL_ATTACK, SoundEffectType.EITHER));\n\t\t}\n\n\t\t// ------- NPCs -------\n\t\tif (config.muteCaveHorrors())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.CAVE_HORROR, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteCows())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.MOO_MOO, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteDemons())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.GREATER_DEMON_ATTACK, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.GREATER_DEMON_DEATH, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.GREATER_DEMON_PARRY, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.DEMON_ATTACK, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.DEMON_DEATH, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.DEMON_PARRY, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteDustDevils())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.DUST_DEVIL_ATTACK, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.DUST_DEVIL_DEATH, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.DUST_DEVIL_PARRY, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteWyverns())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.FOSSIL_ISLAND_WYVERN_69, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.FOSSIL_ISLAND_WYVERN_71, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.FOSSIL_ISLAND_WYVERN_73, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteJellies())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.JELLY_ATTACK, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.JELLY_DEATH, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.JELLY_PARRY, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteNailBeasts())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.NAIL_BEAST_ATTACK, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.NAIL_BEAST_DEATH, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.NAIL_BEAST_PARRY, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteNechryael())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.NECHRYAEL_ATTACK, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.NECHRYAE_DEATH, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.NECHRYAEL_PARRY, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteNightmare())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.NIGHTMARE_SOUND, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.mutePetSounds())\n\t\t{\n\t\t\tsoundEffects.add(new ActorCombatSoundEffect(SoundEffectID.SNAKELING_METAMORPHOSIS, SoundEffectType.EITHER, 0));\n\t\t\tsoundEffects.add(new ActorCombatSoundEffect(SoundEffectID.CLOCKWORK_CAT_CLICK_CLICK, SoundEffectType.EITHER, 0));\n\t\t\tsoundEffects.add(new ActorCombatSoundEffect(SoundEffectID.PET_KREEARRA_WING_FLAP, SoundEffectType.EITHER, 0));\n\t\t\tsoundEffects.add(new ActorCombatSoundEffect(SoundEffectID.ELECTRIC_HYDRA_IN, SoundEffectType.EITHER, 0));\n\t\t\tsoundEffects.add(new ActorCombatSoundEffect(SoundEffectID.ELECTRIC_HYDRA_OUT, SoundEffectType.EITHER, 0));\n\t\t\tsoundEffects.add(new ActorCombatSoundEffect(SoundEffectID.IKKLE_HYDRA_RIGHT_FOOT_LETS_STOMP, SoundEffectType.EITHER, 0));\n\t\t\tsoundEffects.add(new ActorCombatSoundEffect(SoundEffectID.IKKLE_HYDRA_LEFT_FOOT_LETS_STOMP, SoundEffectType.EITHER, 0));\n\t\t\tsoundEffects.add(new ActorCombatSoundEffect(SoundEffectID.PET_WALKING_THUMP, SoundEffectType.EITHER, 0));\n\t\t\tsoundEffects.add(new ActorCombatSoundEffect(SoundEffectID.VETION_JR_RIGHT_FOOT_LETS_STOMP, SoundEffectType.EITHER, 0));\n\t\t\tsoundEffects.add(new ActorCombatSoundEffect(SoundEffectID.VETION_JR_LEFT_FOOT_LETS_STOMP, SoundEffectType.EITHER, 0));\n\t\t\tsoundEffects.add(new ActorCombatSoundEffect(SoundEffectID.NOON_FLAP_1, SoundEffectType.EITHER, 0));\n\t\t\tsoundEffects.add(new ActorCombatSoundEffect(SoundEffectID.NOON_FLAP_2, SoundEffectType.EITHER, 0));\n\t\t}\n\t\tif (config.mutePetSounds() || config.muteRandoms())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.CAT_HISS, SoundEffectType.EITHER));\n\t\t}\n\n\t\t// Applicable to both pet sounds and random event sounds\n\t\tif (config.muteRandoms())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.NPC_TELEPORT_WOOSH, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.DRUNKEN_DWARF, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.POSTIE_PETE, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.FROG_SPLASH, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteScarabs())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.SCARAB_ATTACK_SOUND, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.SCARAB_SPAWN_SOUND, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteSire())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.SIRE_SPAWNS, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.SIRE_SPAWNS_DEATH, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteSpectres())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.SPECTRE_ATTACK_SHOOT, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.SPECTRE_ATTACK_HIT, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.SPECTRE_DEATH, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.SPECTRE_PARRY, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteTekton())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.METEOR, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteTownCrierSounds())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.TOWN_CRIER_BELL_DING, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.TOWN_CRIER_BELL_DONG, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.TOWN_CRIER_SHOUT_SQUEAK, SoundEffectType.EITHER));\n\t\t}\n\n\t\t// ------- Skilling -------\n\t\tif (config.muteAlchemy())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.HIGH_ALCHEMY, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.LOW_ALCHEMY, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.TRAIL_BLAZERS_HIGH_ALCHEMY, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.TRAIL_BLAZERS_LOW_ALCHEMY, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteChopChop())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.CHOP_CHOP, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteSmashing())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.SMASHING, SoundEffectType.AREA_SOUND_EFFECT));\n\t\t}\n\t\tif (config.muteDenseEssence())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.CHISEL, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteFiremaking())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.FIREMAKING_LOG_BURN, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.FIREMAKING_LOG_LIGHT, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteFishing())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.FISHING_SOUND, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteFletching())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.FLETCHING_CUT, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.AMETHYST_FLETCHING, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteAOESounds())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.HUMIDIFY_SOUND, SoundEffectType.EITHER));\n\t\t}\n\t\telse if (config.muteOthersHumidify())\n\t\t{\n\t\t\tsoundEffects.add(new AnimationSoundEffect(SoundEffectID.HUMIDIFY_SOUND, SoundEffectType.EITHER, 6294));\n\t\t}\n\t\tif (config.mutePickpocket())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.PICKPOCKET_PLOP, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.mutePickpocketStun())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.PICKPOCKET_STUN, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteMining())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.MINING_PICK_SWING_1, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.MINING_PICK_SWING_2, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.mutePlankMake())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.PLANK_MAKE, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteStringJewellery())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.STRING_JEWELLERY, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteWoodcutting())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.WOODCUTTING_CHOP, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteChargeOrb())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.CHARGE_EARTH_ORB, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.CHARGE_AIR_ORB, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.CHARGE_FIRE_ORB, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.CHARGE_WATER_ORB, SoundEffectType.EITHER));\n\t\t}\n\t\t// ------- Prayers -------\n\t\tif (config.muteThickSkin())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.THICK_SKIN, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteBurstofStrength())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.BURST_OF_STRENGTH, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteClarityOfThought())\n\t\t{\n\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.CLARITY_OF_THOUGHT, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteRockSkin())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.ROCK_SKIN, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteSuperhumanStrength())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.SUPERHUMAN_STRENGTH, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteImprovedReflexes())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.IMPROVED_REFLEXES, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteRapidHeal())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.RAPID_HEAL, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteProtectItem())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.PROTECT_ITEM, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteHawkEye())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.HAWK_EYE, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteMysticLore())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.MYSTIC_LORE, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteSteelSkin())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.STEEL_SKIN, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteUltimateStrength())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.ULTIMATE_STRENGTH, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteIncredibleReflexes())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.INCREDIBLE_REFLEXES, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteProtectFromMagic())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.PROTECT_FROM_MAGIC, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteProtectFromRange())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.PROTECT_FROM_RANGE, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteProtectFromMelee())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.PROTECT_FROM_MELEE, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteEagleEye())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.EAGLE_EYE, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteMysticMight())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.MYSTIC_MIGHT, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteRetribution())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.RETRIBUTION, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteRedemption())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.REDEMPTION, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteSmite())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.SMITE, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.mutePreserve())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.PRESERVE, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteChivalry())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.CHIVALRY, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.mutePiety())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.PIETY, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteRigour())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.RIGOUR, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteAugury())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.AUGURY, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteMysticVigour())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.MYSTIC_VIGOUR, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteDeadeye())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.DEADEYE, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteDeactivatePrayer())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.DEACTIVATE_PRAYER, SoundEffectType.EITHER));\n\t\t}\n\n\t\t// ------- Miscellaneous -------\n\t\tif (config.muteFishingExplosive())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.FISHING_EXPLOSIVE, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteHealOther())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.HEAL_OTHER_2, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.HEAL_OTHER_3, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.HEAL_OTHER_4, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.HEAL_OTHER_5, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteItemDrop())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.ITEM_DROP, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteLevelUp())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.LEVEL_UP_1, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.LEVEL_UP_2, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteNPCContact())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.NPC_CONTACT, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteSnowballSounds())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.SNOWBALL_HIT, SoundEffectType.EITHER));\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.SNOWBALL_THROW, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteTeleother())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.TELEOTHER, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteTeleport())\n\t\t{\n\t\t\tif (config.muteTeleportOthers())\n\t\t\t{\n\t\t\t\tsoundEffects.add(new AnimationSoundEffect(SoundEffectID.TELEPORT_VWOOP, SoundEffectType.EITHER, 714)); // Normal\n\t\t\t\tsoundEffects.add(new AnimationSoundEffect(SoundEffectID.TELEPORT_VWOOP, SoundEffectType.EITHER, 1816)); // Lunar\n\t\t\t\tsoundEffects.add(new AnimationSoundEffect(SoundEffectID.TELEPORT_VWOOP, SoundEffectType.EITHER, 3864)); // Scroll\n\t\t\t\tsoundEffects.add(new AnimationSoundEffect(SoundEffectID.TELEPORT_VWOOP, SoundEffectType.EITHER, 3865)); // Xeric\n\t\t\t\tsoundEffects.add(new AnimationSoundEffect(SoundEffectID.TELEPORT_VWOOP, SoundEffectType.EITHER, 3867)); // Wilderness\n\t\t\t\tsoundEffects.add(new AnimationSoundEffect(SoundEffectID.TELEPORT_VWOOP, SoundEffectType.EITHER, 3869)); // Cabbage\n\t\t\t\tsoundEffects.add(new AnimationSoundEffect(SoundEffectID.TELEPORT_VWOOP, SoundEffectType.EITHER, 3872)); // Ardougne\n\t\t\t\tsoundEffects.add(new AnimationSoundEffect(SoundEffectID.TELEPORT_VWOOP, SoundEffectType.EITHER, 3874)); // Burgh\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.TELEPORT_VWOOP, SoundEffectType.EITHER));\n\t\t\t}\n\t\t}\n\t\telse if (config.muteTeleportOthers())\n\t\t{\n\t\t\tsoundEffects.add(new AnimationSoundEffect(SoundEffectID.TELEPORT_VWOOP, SoundEffectType.EITHER, 714)); // Normal\n\t\t\tsoundEffects.add(new AnimationSoundEffect(SoundEffectID.TELEPORT_VWOOP, SoundEffectType.EITHER, 1816)); // Lunar\n\t\t\tsoundEffects.add(new AnimationSoundEffect(SoundEffectID.TELEPORT_VWOOP, SoundEffectType.EITHER, 3864)); // Scroll\n\t\t\tsoundEffects.add(new AnimationSoundEffect(SoundEffectID.TELEPORT_VWOOP, SoundEffectType.EITHER, 3865)); // Xeric\n\t\t\tsoundEffects.add(new AnimationSoundEffect(SoundEffectID.TELEPORT_VWOOP, SoundEffectType.EITHER, 3867)); // Wilderness\n\t\t\tsoundEffects.add(new AnimationSoundEffect(SoundEffectID.TELEPORT_VWOOP, SoundEffectType.EITHER, 3869)); // Cabbage\n\t\t\tsoundEffects.add(new AnimationSoundEffect(SoundEffectID.TELEPORT_VWOOP, SoundEffectType.EITHER, 3872)); // Ardougne\n\t\t\tsoundEffects.add(new AnimationSoundEffect(SoundEffectID.TELEPORT_VWOOP, SoundEffectType.EITHER, 3874)); // Burgh\n\t\t}\n\t\tif (config.muteRubberChickenSounds())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.WHACK, SoundEffectType.EITHER));\n\t\t}\n\t\tif (config.muteObelisk())\n\t\t{\n\t\t\tsoundEffects.add(new GenericSoundEffect(SoundEffectID.WILDY_OBELISK, SoundEffectType.EITHER));\n\t\t}\n\n\t\t// Ambient Sounds\n\t\tambientSoundsToMute \u003d new HashSet\u003c\u003e();\n\n\t\tif (config.muteMagicTrees())\n\t\t{\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.MAGIC_TREE, SoundEffectType.AMBIENT));\n\t\t}\n\t\tif (config.muteHousePortal())\n\t\t{\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.HOUSE_PORTAL, SoundEffectType.AMBIENT));\n\t\t}\n\t\tif (config.muteWhiteNoise())\n\t\t{\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.COMMON_BACKGROUND_1, SoundEffectType.AMBIENT, SoundEffectID.COMMON_BACKGROUND_2184_STATIC_1));\n\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.STATIC_1, SoundEffectType.AMBIENT));\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.STATIC_2, SoundEffectType.AMBIENT));\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.STATIC_3, SoundEffectType.AMBIENT));\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.STATIC_4, SoundEffectType.AMBIENT));\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.STATIC_5, SoundEffectType.AMBIENT));\n\t\t}\n\t\tif (config.muteChirps())\n\t\t{\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.COMMON_BACKGROUND_1, SoundEffectType.AMBIENT, SoundEffectID.COMMON_BACKGROUND_2184_BIRD_1));\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.COMMON_BACKGROUND_1, SoundEffectType.AMBIENT, SoundEffectID.COMMON_BACKGROUND_2184_BIRD_2));\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.COMMON_BACKGROUND_1, SoundEffectType.AMBIENT, SoundEffectID.COMMON_BACKGROUND_2184_BIRD_3));\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.COMMON_BACKGROUND_1, SoundEffectType.AMBIENT, SoundEffectID.COMMON_BACKGROUND_2184_BIRD_4));\n\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.CRICKET_1, SoundEffectType.AMBIENT));\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.CRICKET_2, SoundEffectType.AMBIENT));\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.CRICKET_3, SoundEffectType.AMBIENT));\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.CRICKET_4, SoundEffectType.AMBIENT));\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.CRICKET_5, SoundEffectType.AMBIENT));\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.CRICKET_6, SoundEffectType.AMBIENT));\n\t\t}\n\t\tif (config.muteWater())\n\t\t{\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.COMMON_BACKGROUND_1, SoundEffectType.AMBIENT, SoundEffectID.COMMON_BACKGROUND_2184_WATER_1));\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.COMMON_BACKGROUND_1, SoundEffectType.AMBIENT, SoundEffectID.COMMON_BACKGROUND_2184_WATER_2));\n\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.WATER_1, SoundEffectType.AMBIENT));\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.WATER_2, SoundEffectType.AMBIENT));\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.WATER_3, SoundEffectType.AMBIENT));\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.WATER_4, SoundEffectType.AMBIENT));\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.WATER_5, SoundEffectType.AMBIENT));\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.WATER_6, SoundEffectType.AMBIENT));\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.WATER_7, SoundEffectType.AMBIENT));\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.WATER_8, SoundEffectType.AMBIENT));\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.WATER_9, SoundEffectType.AMBIENT));\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.WATER_10, SoundEffectType.AMBIENT));\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.WATER_11, SoundEffectType.AMBIENT));\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.WATER_12, SoundEffectType.AMBIENT));\n\t\t}\n\t\tif (config.muteRanges())\n\t\t{\n\t\t\tambientSoundsToMute.add(new GenericSoundEffect(SoundEffectID.RANGE_1, SoundEffectType.AMBIENT));\n\t\t\tambientSoundsToMute.add(new GenericSoundEffect(SoundEffectID.RANGE_2, SoundEffectType.AMBIENT));\n\t\t\tambientSoundsToMute.add(new GenericSoundEffect(SoundEffectID.COOKING_POT, SoundEffectType.AMBIENT));\n\t\t}\n\t\tif (config.muteFortisColosseum())\n\t\t{\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.FORTIS_COLOSSEUM_AMBIENT_1, SoundEffectType.AMBIENT));\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.FORTIS_COLOSSEUM_AMBIENT_2, SoundEffectType.AMBIENT));\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.FORTIS_COLOSSEUM_FIRE, SoundEffectType.AMBIENT));\n\t\t}\n\n\t\tif (config.muteStranglewoodHowls())\n\t\t{\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(SoundEffectID.COMMON_BACKGROUND_2, SoundEffectType.AMBIENT, SoundEffectID.VARDORVIS_AREA));\n\t\t}\n\n\t\t// add the user defined ambient sounds to mute to the list manually\n\t\tfor (int i : getSelectedAmbientSounds())\n\t\t{\n\t\t\tambientSoundsToMute.add(new AmbientSoundEffect(i, SoundEffectType.AMBIENT));\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onAreaSoundEffectPlayed(AreaSoundEffectPlayed areaSoundEffectPlayed)\n\t{\n\t\tActor source \u003d areaSoundEffectPlayed.getSource();\n\t\tint soundId \u003d areaSoundEffectPlayed.getSoundId();\n\t\tif (source !\u003d client.getLocalPlayer() \u0026\u0026 source instanceof Player)\n\t\t{\n\t\t\tif (config.muteOthersAreaSounds())\n\t\t\t{\n\t\t\t\tareaSoundEffectPlayed.consume();\n\t\t\t}\n\t\t\telse if (shouldMute(soundId, SoundEffectType.AREA_SOUND_EFFECT, source))\n\t\t\t{\n\t\t\t\tareaSoundEffectPlayed.consume();\n\t\t\t}\n\t\t}\n\t\telse if (source \u003d\u003d null)\n\t\t{\n\t\t\tif (soundId \u003d\u003d SoundEffectID.PET_WALKING_THUMP \u0026\u0026 client.getVarbitValue(Varbits.IN_RAID) \u003d\u003d 1)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (soundId \u003d\u003d SoundEffectID.SKELETON_THRALL_ATTACK \u0026\u0026 config.muteThralls())\n\t\t\t{\n\t\t\t\tareaSoundEffectPlayed.consume();\n\t\t\t}\n\t\t\tif (shouldMute(soundId, SoundEffectType.AREA_SOUND_EFFECT, null))\n\t\t\t{\n\t\t\t\tareaSoundEffectPlayed.consume();\n\t\t\t}\n\t\t}\n\t\telse if (shouldMute(soundId, SoundEffectType.AREA_SOUND_EFFECT, source))\n\t\t{\n\t\t\tareaSoundEffectPlayed.consume();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onSoundEffectPlayed(SoundEffectPlayed soundEffectPlayed)\n\t{\n\t\tint soundId \u003d soundEffectPlayed.getSoundId();\n\t\tif (shouldMute(soundId, SoundEffectType.SOUND_EFFECT, soundEffectPlayed.getSource()))\n\t\t{\n\t\t\tsoundEffectPlayed.consume();\n\t\t}\n\t}\n\n\t@VisibleForTesting\n\tpublic boolean shouldMute(int soundId, SoundEffectType type, @Nullable Actor source)\n\t{\n\t\tif (getSelectedSounds().contains(Integer.toString(soundId)))\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\t// filter to generics\n\t\tList\u003cSoundEffect\u003e genericSoundEffects \u003d soundEffects.stream()\n\t\t\t.filter(GenericSoundEffect.class::isInstance)\n\t\t\t.map(GenericSoundEffect.class::cast)\n\t\t\t.filter(s -\u003e s.getId() \u003d\u003d soundId\n\t\t\t\t\u0026\u0026 (s.getSoundEffectType() \u003d\u003d SoundEffectType.EITHER || s.getSoundEffectType() \u003d\u003d type))\n\t\t\t.collect(Collectors.toCollection(ArrayList::new));\n\n\t\t// filter to animations\n\t\tList\u003cSoundEffect\u003e animationSoundEffects \u003d soundEffects.stream()\n\t\t\t.filter(AnimationSoundEffect.class::isInstance)\n\t\t\t.map(AnimationSoundEffect.class::cast)\n\t\t\t.filter(s -\u003e s.getId() \u003d\u003d soundId\n\t\t\t\t\u0026\u0026 (s.getSoundEffectType() \u003d\u003d SoundEffectType.EITHER || s.getSoundEffectType() \u003d\u003d type))\n\t\t\t.collect(Collectors.toCollection(ArrayList::new));\n\n\t\t// filter to combat levels\n\t\tList\u003cSoundEffect\u003e actorSoundEffects \u003d soundEffects.stream()\n\t\t\t.filter(ActorCombatSoundEffect.class::isInstance)\n\t\t\t.map(ActorCombatSoundEffect.class::cast)\n\t\t\t.filter(s -\u003e s.getId() \u003d\u003d soundId\n\t\t\t\t\u0026\u0026 (s.getSoundEffectType() \u003d\u003d SoundEffectType.EITHER || s.getSoundEffectType() \u003d\u003d type)\n\t\t\t\t\u0026\u0026 (source !\u003d null \u0026\u0026 s.getActorCombatLevel() \u003d\u003d source.getCombatLevel()))\n\t\t\t.collect(Collectors.toCollection(ArrayList::new));\n\n\t\tList\u003cSoundEffect\u003e combinedList \u003d new ArrayList\u003c\u003e();\n\t\tcombinedList.addAll(genericSoundEffects);\n\t\tcombinedList.addAll(animationSoundEffects);\n\t\tcombinedList.addAll(actorSoundEffects);\n\n\t\tif (combinedList.isEmpty())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\treturn !genericSoundEffects.isEmpty()\n\t\t\t\u0026\u0026 !actorSoundEffects.isEmpty()\n\t\t\t\u0026\u0026 animationSoundEffects.stream().filter(AnimationSoundEffect.class::isInstance)\n\t\t\t.map(AnimationSoundEffect.class::cast).anyMatch(s -\u003e s.getAnimationID() \u003d\u003d -1) ||\n\t\t\tanimationSoundEffects.stream().filter(AnimationSoundEffect.class::isInstance)\n\t\t\t.map(AnimationSoundEffect.class::cast).noneMatch(s -\u003e s.getAnimationID() \u003d\u003d client.getLocalPlayer().getAnimation());\n\t}\n\n\tpublic List\u003cString\u003e getSelectedSounds()\n\t{\n\t\tfinal String configSounds \u003d config.soundsToMute().toLowerCase();\n\n\t\tif (configSounds.isEmpty())\n\t\t{\n\t\t\treturn Collections.emptyList();\n\t\t}\n\n\t\treturn Text.fromCSV(configSounds);\n\t}\n\n\tpublic List\u003cInteger\u003e getSelectedAmbientSounds()\n\t{\n\t\tfinal String configSounds \u003d config.ambientSoundsToMute().toLowerCase();\n\n\t\tList\u003cString\u003e configValue \u003d Text.fromCSV(configSounds);\n\n\t\tArrayList\u003cInteger\u003e returnValues \u003d new ArrayList\u003c\u003e();\n\t\tfor (String str : configValue)\n\t\t{\n\t\t\tif (tryParseInt(str))\n\t\t\t{\n\t\t\t\treturnValues.add(Integer.parseInt(str));\n\t\t\t}\n\t\t}\n\n\t\treturn returnValues;\n\t}\n\n\tprivate boolean tryParseInt(String value)\n\t{\n\t\ttry\n\t\t{\n\t\t\tInteger.parseInt(value);\n\t\t\treturn true;\n\t\t}\n\t\tcatch (NumberFormatException e)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t}\n}","filePath":"src\\main\\java\\com\\brooklyn\\annoyancemute\\AnnoyanceMutePlugin.java"},{"fileName":"SoundEffectID.java","content":"/*\n * Copyright (c) 2020, Brooklyn \u003chttps://github.com/Broooklyn\u003e\n * Copyright (c) 2018, SomeoneWithAnInternetConnection\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.brooklyn.annoyancemute;\n\npublic final class SoundEffectID\n{\n\t// Pet sounds\n\tprotected final static int CAT_HISS \u003d 333;\n\tprotected final static int SNAKELING_METAMORPHOSIS \u003d 794;\n\tprotected final static int CLOCKWORK_CAT_CLICK_CLICK \u003d 941;\n\tprotected final static int PET_KREEARRA_WING_FLAP \u003d 3882;\n\tprotected final static int ELECTRIC_HYDRA_IN \u003d 4118;\n\tprotected final static int ELECTRIC_HYDRA_OUT \u003d 4132;\n\tprotected final static int IKKLE_HYDRA_RIGHT_FOOT_LETS_STOMP \u003d 4112;\n\tprotected final static int IKKLE_HYDRA_LEFT_FOOT_LETS_STOMP \u003d 4134;\n\tprotected final static int VETION_JR_RIGHT_FOOT_LETS_STOMP \u003d 6986;\n\tprotected final static int VETION_JR_LEFT_FOOT_LETS_STOMP \u003d 6985;\n\tprotected final static int NOON_FLAP_1 \u003d 9929;\n\tprotected final static int NOON_FLAP_2 \u003d 10002;\n\n\t// Pet Thump\n\tprotected final static int PET_WALKING_THUMP \u003d 3834;\n\n\t// Town Crier\n\tprotected final static int TOWN_CRIER_BELL_DING \u003d 3813;\n\tprotected final static int TOWN_CRIER_BELL_DONG \u003d 3817;\n\tprotected final static int TOWN_CRIER_SHOUT_SQUEAK \u003d 3816;\n\n\t// AOE Spells\n\tprotected final static int HUMIDIFY_SOUND \u003d 3614;\n\n\t// Chicken\n\tprotected final static int WHACK \u003d 2257;\n\n\t// Snowball\n\tprotected final static int SNOWBALL_HIT \u003d 3292;\n\tprotected final static int SNOWBALL_THROW \u003d 2708;\n\n\t// Cannon\n\tprotected final static int CANNON_SPIN \u003d 2877;\n\tprotected final static int SHATTERED_CANNON_SPIN \u003d 2174;\n\n\t// ACB\n\tprotected final static int ACB_REEEE \u003d 3892;\n\n\t// Thralls\n\tprotected final static int WATER_STRIKE_CAST \u003d 211; // Ghostly Thrall\n\tprotected final static int WATER_STRIKE_LAND \u003d 212;\n\tprotected final static int SKELETON_THRALL_ATTACK \u003d 2700;\n\tprotected final static int ZOMBIE_THRALL_ATTACK \u003d 918;\n\n\t// Ice Spells\n\tprotected final static int ICE_BARRAGE_CAST \u003d 168;\n\tprotected final static int ICE_BLITZ_CAST \u003d 169;\n\tprotected final static int ICE_BURST_CAST \u003d 170;\n\tprotected final static int ICE_SPELL_LAND \u003d 171;\n\tprotected final static int ICE_RUSH_CAST \u003d 173;\n\n\t// Sire\n\tprotected final static int SIRE_SPAWNS \u003d 236;\n\tprotected final static int SIRE_SPAWNS_DEATH \u003d 237;\n\n\t// Wilderness Obelisk\n\tprotected final static int WILDY_OBELISK \u003d 204;\n\n\t// Random Events\n\tprotected final static int NPC_TELEPORT_WOOSH \u003d 1930;\n\tprotected final static int DRUNKEN_DWARF \u003d 2297;\n\tprotected final static int EVIL_BOB \u003d 333;\n\tprotected final static int POSTIE_PETE \u003d 9796;\n\tprotected final static int FROG_SPLASH \u003d 838;\n\n\t// Tekton\n\tprotected final static int METEOR \u003d 156;\n\n\t// Dense Essence Mine\n\tprotected final static int CHISEL \u003d 1553;\n\n\t// Chop Chop\n\tprotected final static int CHOP_CHOP \u003d 2531;\n\n\t// Smashing!\n\tprotected final static int SMASHING \u003d 2655;\n\n\t// Plank Make\n\tprotected final static int PLANK_MAKE \u003d 3617;\n\n\t// Nightmare\n\tprotected final static int NIGHTMARE_SOUND \u003d 4281;\n\n\t// Pyramid Plunder Scarabs\n\tprotected final static int SCARAB_SPAWN_SOUND \u003d 1478;\n\tprotected final static int SCARAB_ATTACK_SOUND \u003d 1481;\n\n\t// Firemaking\n\tprotected final static int FIREMAKING_LOG_BURN \u003d 2596;\n\tprotected final static int FIREMAKING_LOG_LIGHT \u003d 2597;\n\n\t// Fletching\n\tprotected final static int FLETCHING_CUT \u003d 2605;\n\tprotected final static int AMETHYST_FLETCHING \u003d 2586;\n\n\t// Fishing\n\tprotected final static int FISHING_SOUND \u003d 2600;\n\n\t// Alchemy\n\tprotected final static int LOW_ALCHEMY \u003d 98;\n\tprotected final static int HIGH_ALCHEMY \u003d 97;\n\t// Trail Blazer\u0027s Alchemy\n\tprotected final static int TRAIL_BLAZERS_LOW_ALCHEMY \u003d 7568;\n\tprotected final static int TRAIL_BLAZERS_HIGH_ALCHEMY \u003d 7557;\n\n\t// Prayers\n\tprotected final static int THICK_SKIN \u003d 2690;\n\tprotected final static int BURST_OF_STRENGTH \u003d 2688;\n\tprotected final static int CLARITY_OF_THOUGHT \u003d 2664;\n\tprotected final static int ROCK_SKIN \u003d 2684;\n\tprotected final static int SUPERHUMAN_STRENGTH \u003d 2689;\n\tprotected final static int IMPROVED_REFLEXES \u003d 2662;\n\tprotected final static int RAPID_HEAL \u003d 2678;\n\tprotected final static int PROTECT_ITEM \u003d 1982;\n\tprotected final static int HAWK_EYE \u003d 2666;\n\tprotected final static int MYSTIC_LORE \u003d 2668;\n\tprotected final static int STEEL_SKIN \u003d 2687;\n\tprotected final static int ULTIMATE_STRENGTH \u003d 2691;\n\tprotected final static int INCREDIBLE_REFLEXES \u003d 2667;\n\tprotected final static int PROTECT_FROM_MAGIC \u003d 2675;\n\tprotected final static int PROTECT_FROM_RANGE \u003d 2677;\n\tprotected final static int PROTECT_FROM_MELEE \u003d 2676;\n\tprotected final static int EAGLE_EYE \u003d 2665;\n\tprotected final static int MYSTIC_MIGHT \u003d 2669;\n\tprotected final static int RETRIBUTION \u003d 2682;\n\tprotected final static int REDEMPTION \u003d 2680;\n\tprotected final static int SMITE \u003d 2686;\n\tprotected final static int PRESERVE \u003d 2679;\n\tprotected final static int CHIVALRY \u003d 3826;\n\tprotected final static int PIETY \u003d 3825;\n\tprotected final static int RIGOUR \u003d 2685;\n\tprotected final static int AUGURY \u003d 2670;\n\tprotected final static int DEADEYE \u003d 10194 ;\n\tprotected final static int MYSTIC_VIGOUR \u003d 10100;\n\tprotected final static int DEACTIVATE_PRAYER \u003d 2663;\n\n\t// Woodcutting\n\tprotected final static int WOODCUTTING_CHOP \u003d 2735;\n\n\t// Teleport\n\tprotected static final int TELEPORT_VWOOP \u003d 200;\n\n\t// Teleother\n\tprotected static final int TELEOTHER \u003d 199;\n\n\t// Pickpocket\n\tprotected static final int PICKPOCKET_PLOP \u003d 2581;\n\tprotected static final int PICKPOCKET_STUN \u003d 2727;\n\n\t// NPC Contact\n\tprotected final static int NPC_CONTACT \u003d 3618;\n\n\t// Cow\n\tprotected final static int MOO_MOO \u003d 3044;\n\n\t// String Jewelery\n\tprotected final static int STRING_JEWELLERY \u003d 2903;\n\n\t// Cave Horror\n\tprotected final static int CAVE_HORROR \u003d 497;\n\n\t// Fossil Island Wyvern\n\tprotected final static int FOSSIL_ISLAND_WYVERN_69 \u003d 769;\n\tprotected final static int FOSSIL_ISLAND_WYVERN_71 \u003d 771;\n\tprotected final static int FOSSIL_ISLAND_WYVERN_73 \u003d 773;\n\n\t// Fishing Explosive\n\tprotected final static int FISHING_EXPLOSIVE \u003d 1487;\n\n\t// Heal Other\n\tprotected final static int HEAL_OTHER_2 \u003d 2892;\n\tprotected final static int HEAL_OTHER_3 \u003d 2893;\n\tprotected final static int HEAL_OTHER_4 \u003d 2894;\n\tprotected final static int HEAL_OTHER_5 \u003d 2895;\n\n\t// Item Dropping\n\tprotected final static int ITEM_DROP \u003d 2739;\n\n\t// Level Up Fireworks\n\tprotected final static int LEVEL_UP_1 \u003d 2396;\n\tprotected final static int LEVEL_UP_2 \u003d 2384;\n\n\t// Jellies\n\tprotected final static int JELLY_ATTACK \u003d 547;\n\tprotected final static int JELLY_DEATH \u003d 549;\n\tprotected final static int JELLY_PARRY \u003d 550;\n\n\t// Nail Beasts\n\tprotected final static int NAIL_BEAST_ATTACK \u003d 3482;\n\tprotected final static int NAIL_BEAST_DEATH \u003d 3484;\n\tprotected final static int NAIL_BEAST_PARRY \u003d 3485;\n\n\t// Demons\n\tprotected final static int GREATER_DEMON_ATTACK \u003d 397;\n\tprotected final static int GREATER_DEMON_DEATH \u003d 398;\n\tprotected final static int GREATER_DEMON_PARRY \u003d 399;\n\tprotected final static int DEMON_ATTACK \u003d 400; // Lesser and Black Demons\n\tprotected final static int DEMON_DEATH \u003d 403;\n\tprotected final static int DEMON_PARRY \u003d 404;\n\n\t// Nechryael\n\tprotected static final int NECHRYAEL_ATTACK \u003d 645;\n\tprotected static final int NECHRYAE_DEATH \u003d 646;\n\tprotected static final int NECHRYAEL_PARRY \u003d 647;\n\n\t// Dust Devils\n\tprotected static final int DUST_DEVIL_ATTACK \u003d 414;\n\tprotected static final int DUST_DEVIL_DEATH \u003d 415;\n\tprotected static final int DUST_DEVIL_PARRY \u003d 416;\n\n\t// Spectres\n\tprotected static final int SPECTRE_ATTACK_SHOOT \u003d 272;\n\tprotected static final int SPECTRE_ATTACK_HIT \u003d 273;\n\tprotected static final int SPECTRE_DEATH \u003d 274;\n\tprotected static final int SPECTRE_PARRY \u003d 275;\n\n\t// Mining\n\tprotected static final int MINING_PICK_SWING_1 \u003d 3220;\n\tprotected static final int MINING_PICK_SWING_2 \u003d 3221;\n\n\t//Charge Orb spells\n\tprotected static final int CHARGE_EARTH_ORB \u003d 115;\n\tprotected static final int CHARGE_AIR_ORB \u003d 116;\n\tprotected static final int CHARGE_FIRE_ORB \u003d 117;\n\tprotected static final int CHARGE_WATER_ORB \u003d 118;\n\n\t// Magic Tree (Ambient Sound)\n\tprotected final static int MAGIC_TREE \u003d 3134;\n\n\t// House Portal\n\tprotected final static int HOUSE_PORTAL \u003d 3139;\n\n\t// Ambient Static sounds\n\n\tprotected final static int STATIC_1 \u003d 2185;\n\tprotected final static int STATIC_2 \u003d 2083;\n\tprotected final static int STATIC_3 \u003d 2066;\n\tprotected final static int STATIC_4 \u003d 2169;\n\tprotected final static int STATIC_5 \u003d 2088; // this is some noise in rimmington\n\n\t// Ambient Crickets/Birds\n\tprotected final static int CRICKET_1 \u003d 1990;\n\tprotected final static int CRICKET_2 \u003d 1991;\n\tprotected final static int CRICKET_3 \u003d 1992;\n\tprotected final static int CRICKET_4 \u003d 1993;\n\tprotected final static int CRICKET_5 \u003d 1994;\n\tprotected final static int CRICKET_6 \u003d 1995;\n\t// Water\n\tprotected final static int WATER_1 \u003d 2158;\n\tprotected final static int WATER_2 \u003d 3094;\n\tprotected final static int WATER_3 \u003d 2223; // water 3 is a bubble noise but also white noise\n\tprotected final static int WATER_4 \u003d 2168; // water 4 is waves crashing into shore but also white noise\n\tprotected final static int WATER_5 \u003d 3083;\n\tprotected final static int WATER_6 \u003d 2149; // varrock armor shop fountain\n\tprotected final static int WATER_7 \u003d 2151; // varrock center fountains\n\tprotected final static int WATER_8 \u003d 2150; // lumbridge fountains\n\tprotected final static int WATER_9 \u003d 2147; // barbarian village bridge\n\tprotected final static int WATER_10 \u003d 2170; // barbarian village bridge\n\tprotected final static int WATER_11 \u003d 3087;\n\tprotected final static int WATER_12 \u003d 2041; // lumbridge swamp bubbles\n\n\n\t// Ranges\n\tprotected final static int RANGE_1 \u003d 2199;\n\tprotected final static int RANGE_2 \u003d 2065;\n\tprotected final static int COOKING_POT \u003d 2200;\n\n\t// Ambient Static Air 2184 base + modifiers\n\n\tprotected final static int COMMON_BACKGROUND_1 \u003d 2184;\n\tprotected final static int[] COMMON_BACKGROUND_2184_STATIC_1 \u003d new int[]{2184, 2185, 2073, 2074, 2075};\n\n\tprotected final static int[] COMMON_BACKGROUND_2184_BIRD_1 \u003d new int[]{1984, 1985, 1986, 1987, 1988};\n\n\tprotected final static int[] COMMON_BACKGROUND_2184_BIRD_2 \u003d new int[]{2019, 2020, 2013, 2014, 2057, 2076, 2012};\n\tprotected final static int[] COMMON_BACKGROUND_2184_BIRD_3 \u003d new int[]{2010, 2012, 2011, 2073}; // draynor village owls\n\tprotected final static int[] COMMON_BACKGROUND_2184_BIRD_4 \u003d new int[]{2070, 2071, 2073, 2074, 2075, 2072, 2184}; // draynor village owls\n\n\tprotected final static int[] COMMON_BACKGROUND_2184_WATER_1 \u003d new int[]{3083, 3084, 3085, 3086};\n\tprotected final static int[] COMMON_BACKGROUND_2184_WATER_2 \u003d new int[]{2153, 2154, 2148, 2167};\n\n\t// Fortis Colosseum lobby\n\tprotected final static int FORTIS_COLOSSEUM_AMBIENT_1 \u003d 8510;\n\tprotected final static int FORTIS_COLOSSEUM_AMBIENT_2 \u003d 8513;\n\tprotected final static int FORTIS_COLOSSEUM_FIRE \u003d 2065;\n\n\tprotected final static int COMMON_BACKGROUND_2 \u003d -1;\n\tprotected final static int[] VARDORVIS_AREA \u003d new int[]{3711, 3714, 3712, 3713};\n}\n","filePath":"src\\main\\java\\com\\brooklyn\\annoyancemute\\SoundEffectID.java"},{"fileName":"ActorCombatSoundEffect.java","content":"package com.brooklyn.annoyancemute.soundeffects;\n\nimport com.brooklyn.annoyancemute.SoundEffectType;\nimport lombok.Getter;\n\n@Getter\npublic class ActorCombatSoundEffect extends SoundEffect\n{\n\tint actorCombatLevel;\n\n\tpublic ActorCombatSoundEffect(int id, SoundEffectType soundEffectType, int actorCombatLevel)\n\t{\n\t\tsuper(id, soundEffectType);\n\t\tthis.actorCombatLevel \u003d actorCombatLevel;\n\t}\n}\n","filePath":"src\\main\\java\\com\\brooklyn\\annoyancemute\\soundeffects\\ActorCombatSoundEffect.java"},{"fileName":"AmbientSoundEffect.java","content":"package com.brooklyn.annoyancemute.soundeffects;\n\nimport com.brooklyn.annoyancemute.SoundEffectType;\nimport lombok.Getter;\n\n@Getter\npublic class AmbientSoundEffect extends SoundEffect\n{\n\tint[] backgroundSoundEffects;\n\n\tpublic AmbientSoundEffect(int id, SoundEffectType soundEffectType)\n\t{\n\t\tsuper(id, soundEffectType);\n\t\tthis.backgroundSoundEffects \u003d new int[]{};\n\t}\n\n\tpublic AmbientSoundEffect(int id, SoundEffectType soundEffectType, int[] backgroundSoundEffects)\n\t{\n\t\tsuper(id, soundEffectType);\n\t\tthis.backgroundSoundEffects \u003d backgroundSoundEffects;\n\t}\n}\n","filePath":"src\\main\\java\\com\\brooklyn\\annoyancemute\\soundeffects\\AmbientSoundEffect.java"},{"fileName":"AnimationSoundEffect.java","content":"package com.brooklyn.annoyancemute.soundeffects;\n\nimport com.brooklyn.annoyancemute.SoundEffectType;\nimport lombok.Getter;\n\n@Getter\npublic class AnimationSoundEffect extends SoundEffect\n{\n\tint animationID;\n\n\tpublic AnimationSoundEffect(int id, SoundEffectType soundEffectType, int animationID)\n\t{\n\t\tsuper(id, soundEffectType);\n\t\tthis.animationID \u003d animationID;\n\t}\n}\n","filePath":"src\\main\\java\\com\\brooklyn\\annoyancemute\\soundeffects\\AnimationSoundEffect.java"},{"fileName":"GenericSoundEffect.java","content":"package com.brooklyn.annoyancemute.soundeffects;\n\nimport com.brooklyn.annoyancemute.SoundEffectType;\n\npublic class GenericSoundEffect extends SoundEffect\n{\n\tpublic GenericSoundEffect(int id, SoundEffectType soundEffectType)\n\t{\n\t\tsuper(id, soundEffectType);\n\t}\n}\n","filePath":"src\\main\\java\\com\\brooklyn\\annoyancemute\\soundeffects\\GenericSoundEffect.java"},{"fileName":"SoundEffect.java","content":"package com.brooklyn.annoyancemute.soundeffects;\n\nimport com.brooklyn.annoyancemute.SoundEffectType;\n\npublic class SoundEffect\n{\n\tint soundID;\n\tSoundEffectType type;\n\n\tpublic SoundEffect(int soundID, SoundEffectType type)\n\t{\n\t\tthis.soundID \u003d soundID;\n\t\tthis.type \u003d type;\n\t}\n\n\tpublic int getId()\n\t{\n\t\treturn soundID;\n\t}\n\n\tpublic SoundEffectType getSoundEffectType()\n\t{\n\t\treturn type;\n\t}\n}\n","filePath":"src\\main\\java\\com\\brooklyn\\annoyancemute\\soundeffects\\SoundEffect.java"},{"fileName":"SoundEffectType.java","content":"package com.brooklyn.annoyancemute;\n\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum SoundEffectType\n{\n\tEITHER(\"Either\", 0),\n\tSOUND_EFFECT(\"Sound Effect\", 1),\n\tAREA_SOUND_EFFECT(\"Area Sound Effect\", 2),\n\n\tAMBIENT(\"Ambient\", 3);\n\n\tprivate final String name;\n\tprivate final int type;\n\n\t@Override\n\tpublic String toString()\n\t{\n\t\treturn name;\n\t}\n}\n","filePath":"src\\main\\java\\com\\brooklyn\\annoyancemute\\SoundEffectType.java"},{"fileName":"AnnoyanceMutePluginTest.java","content":"package com.brooklyn.annoyancemute;\n\nimport com.brooklyn.annoyancemute.debug.AnnoyanceMutePluginDebug;\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class AnnoyanceMutePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(AnnoyanceMutePlugin.class, AnnoyanceMutePluginDebug.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\brooklyn\\annoyancemute\\AnnoyanceMutePluginTest.java"},{"fileName":"AnnoyanceMuteTests.java","content":"package com.brooklyn.annoyancemute;\n\nimport com.google.inject.Guice;\nimport com.google.inject.testing.fieldbinder.Bind;\nimport com.google.inject.testing.fieldbinder.BoundFieldModule;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.NPC;\nimport net.runelite.api.Player;\nimport net.runelite.client.config.RuneLiteConfig;\nimport net.runelite.client.events.ConfigChanged;\nimport static org.junit.Assert.assertFalse;\nimport static org.junit.Assert.assertTrue;\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.Mock;\nimport static org.mockito.Mockito.mock;\nimport static org.mockito.Mockito.when;\nimport org.mockito.junit.MockitoJUnitRunner;\n\n@Slf4j\n@RunWith(MockitoJUnitRunner.Silent.class)\npublic class AnnoyanceMuteTests\n{\n\t@Mock\n\t@Bind\n\tprivate Client client;\n\n\t@Mock\n\t@Bind\n\tprivate RuneLiteConfig runeLiteConfig;\n\n\t@Mock\n\t@Bind\n\tprivate AnnoyanceMuteConfig config;\n\n\t@Inject\n\tprivate AnnoyanceMutePlugin plugin;\n\n\t@Before\n\tpublic void before()\n\t{\n\t\tGuice.createInjector(BoundFieldModule.of(this)).injectMembers(this);\n\n\t\twhen(config.soundsToMute()).thenReturn(\"\");\n\t\twhen(config.ambientSoundsToMute()).thenReturn(\"\");\n\t}\n\n\t@Test\n\tpublic void muteWoodcutting()\n\t{\n\t\twhen(config.muteWoodcutting()).thenReturn(true);\n\n\t\tConfigChanged configChanged \u003d new ConfigChanged();\n\t\tconfigChanged.setGroup(\"annoyancemute\");\n\t\tconfigChanged.setKey(\"annoyancemute\");\n\t\tplugin.onConfigChanged(configChanged);\n\n\t\tassertTrue(plugin.shouldMute(SoundEffectID.WOODCUTTING_CHOP, SoundEffectType.EITHER, null));\n\t}\n\n\t@Test\n\tpublic void muteDemons()\n\t{\n\t\twhen(config.muteDemons()).thenReturn(false);\n\n\t\tConfigChanged configChanged \u003d new ConfigChanged();\n\t\tconfigChanged.setGroup(\"annoyancemute\");\n\t\tconfigChanged.setKey(\"annoyancemute\");\n\t\tplugin.onConfigChanged(configChanged);\n\n\t\tassertFalse(plugin.shouldMute(SoundEffectID.DEMON_ATTACK, SoundEffectType.EITHER, null));\n\t}\n\n\t@Test\n\tpublic void muteNoonPet()\n\t{\n\t\twhen(config.mutePetSounds()).thenReturn(true);\n\n\t\tConfigChanged configChanged \u003d new ConfigChanged();\n\t\tconfigChanged.setGroup(\"annoyancemute\");\n\t\tconfigChanged.setKey(\"annoyancemute\");\n\t\tplugin.onConfigChanged(configChanged);\n\n\t\tNPC noonpet \u003d mock(NPC.class);\n\t\twhen(noonpet.getCombatLevel()).thenReturn(0);\n\n\t\tassertTrue(plugin.shouldMute(SoundEffectID.NOON_FLAP_1, SoundEffectType.EITHER, noonpet));\n\t\tassertTrue(plugin.shouldMute(SoundEffectID.NOON_FLAP_2, SoundEffectType.EITHER, noonpet));\n\t}\n\n\t@Test\n\tpublic void muteNoon()\n\t{\n\t\twhen(config.mutePetSounds()).thenReturn(true);\n\n\t\tConfigChanged configChanged \u003d new ConfigChanged();\n\t\tconfigChanged.setGroup(\"annoyancemute\");\n\t\tconfigChanged.setKey(\"annoyancemute\");\n\t\tplugin.onConfigChanged(configChanged);\n\n\t\tNPC noon \u003d mock(NPC.class);\n\t\twhen(noon.getCombatLevel()).thenReturn(222);\n\n\t\tassertFalse(plugin.shouldMute(SoundEffectID.NOON_FLAP_1, SoundEffectType.EITHER, noon));\n\t\tassertFalse(plugin.shouldMute(SoundEffectID.NOON_FLAP_2, SoundEffectType.EITHER, noon));\n\t}\n\n\t@Test\n\tpublic void muteTeleportOthers()\n\t{\n\t\t// when true/true like this, we only mute the sound when another player is doing it\n\t\twhen(config.muteTeleport()).thenReturn(true);\n\t\twhen(config.muteTeleportOthers()).thenReturn(true);\n\n\t\tConfigChanged configChanged \u003d new ConfigChanged();\n\t\tconfigChanged.setGroup(\"annoyancemute\");\n\t\tconfigChanged.setKey(\"annoyancemute\");\n\t\tplugin.onConfigChanged(configChanged);\n\n\t\tPlayer localPlayer \u003d mock(Player.class);\n\t\twhen(client.getLocalPlayer()).thenReturn(localPlayer);\n\t\twhen(localPlayer.getAnimation()).thenReturn(7284);\n\n\t\tassertTrue(plugin.shouldMute(SoundEffectID.TELEPORT_VWOOP, SoundEffectType.EITHER, localPlayer));\n\t}\n\n\t@Test\n\tpublic void muteTeleportOthers2()\n\t{\n\t\t// when true/false like this, we only mute the sound when another player is doing it\n\t\twhen(config.muteTeleport()).thenReturn(false);\n\t\twhen(config.muteTeleportOthers()).thenReturn(true);\n\n\t\tConfigChanged configChanged \u003d new ConfigChanged();\n\t\tconfigChanged.setGroup(\"annoyancemute\");\n\t\tconfigChanged.setKey(\"annoyancemute\");\n\t\tplugin.onConfigChanged(configChanged);\n\n\t\tPlayer localPlayer \u003d mock(Player.class);\n\t\twhen(client.getLocalPlayer()).thenReturn(localPlayer);\n\t\twhen(localPlayer.getAnimation()).thenReturn(7284);\n\n\t\tassertTrue(plugin.shouldMute(SoundEffectID.TELEPORT_VWOOP, SoundEffectType.EITHER, localPlayer));\n\t}\n\n\t@Test\n\tpublic void muteTeleports()\n\t{\n\t\t// when true/false like this, we will always mute the sounds\n\t\twhen(config.muteTeleport()).thenReturn(true);\n\t\twhen(config.muteTeleportOthers()).thenReturn(false);\n\n\t\tConfigChanged configChanged \u003d new ConfigChanged();\n\t\tconfigChanged.setGroup(\"annoyancemute\");\n\t\tconfigChanged.setKey(\"annoyancemute\");\n\t\tplugin.onConfigChanged(configChanged);\n\n\t\tPlayer localPlayer \u003d mock(Player.class);\n\t\twhen(client.getLocalPlayer()).thenReturn(localPlayer);\n\t\twhen(localPlayer.getAnimation()).thenReturn(714);\n\n\t\tassertTrue(plugin.shouldMute(SoundEffectID.TELEPORT_VWOOP, SoundEffectType.EITHER, localPlayer));\n\t}\n\n\t@Test\n\tpublic void muteTeleports2()\n\t{\n\t\t// when true/false like this, we will always mute the sounds\n\t\twhen(config.muteTeleport()).thenReturn(true);\n\t\twhen(config.muteTeleportOthers()).thenReturn(false);\n\n\t\tConfigChanged configChanged \u003d new ConfigChanged();\n\t\tconfigChanged.setGroup(\"annoyancemute\");\n\t\tconfigChanged.setKey(\"annoyancemute\");\n\t\tplugin.onConfigChanged(configChanged);\n\n\t\tPlayer localPlayer \u003d mock(Player.class);\n\t\twhen(client.getLocalPlayer()).thenReturn(localPlayer);\n\t\twhen(localPlayer.getAnimation()).thenReturn(9999); // new teleport animation id, same sound so it is muted because this configuration always mutes VWOOP sound\n\n\t\tassertTrue(plugin.shouldMute(SoundEffectID.TELEPORT_VWOOP, SoundEffectType.EITHER, localPlayer));\n\t}\n\n\t@Test\n\tpublic void teleportMakesNoise()\n\t{\n\t\t// when false/false like this, we won\u0027t mute\n\t\twhen(config.muteTeleport()).thenReturn(false);\n\t\twhen(config.muteTeleportOthers()).thenReturn(false);\n\n\t\tConfigChanged configChanged \u003d new ConfigChanged();\n\t\tconfigChanged.setGroup(\"annoyancemute\");\n\t\tconfigChanged.setKey(\"annoyancemute\");\n\t\tplugin.onConfigChanged(configChanged);\n\n\t\tPlayer localPlayer \u003d mock(Player.class);\n\t\twhen(client.getLocalPlayer()).thenReturn(localPlayer);\n\t\twhen(localPlayer.getAnimation()).thenReturn(7284);\n\n\t\tassertFalse(plugin.shouldMute(SoundEffectID.TELEPORT_VWOOP, SoundEffectType.EITHER, localPlayer));\n\t}\n}\n","filePath":"src\\test\\java\\com\\brooklyn\\annoyancemute\\AnnoyanceMuteTests.java"},{"fileName":"AmbientSoundPoint.java","content":"package com.brooklyn.annoyancemute.debug;\n\nimport java.awt.Color;\nimport javax.annotation.Nullable;\nimport lombok.Value;\n\n@Value\nclass AmbientSoundPoint\n{\n\tprivate int regionId;\n\tprivate int regionX;\n\tprivate int regionY;\n\tprivate int z;\n\t@Nullable\n\tprivate Color color;\n\t@Nullable\n\tprivate String label;\n}\n","filePath":"src\\test\\java\\com\\brooklyn\\annoyancemute\\debug\\AmbientSoundPoint.java"},{"fileName":"AmbientSoundTileMarker.java","content":"package com.brooklyn.annoyancemute.debug;\n\nimport java.awt.Color;\nimport javax.annotation.Nullable;\nimport lombok.Value;\nimport net.runelite.api.coords.WorldPoint;\n\n@Value\nclass AmbientSoundTileMarker\n{\n\tprivate WorldPoint worldPoint;\n\t@Nullable\n\tprivate Color color;\n\t@Nullable\n\tprivate String label;\n}\n","filePath":"src\\test\\java\\com\\brooklyn\\annoyancemute\\debug\\AmbientSoundTileMarker.java"},{"fileName":"AnnoyanceMuteOverlay.java","content":"package com.brooklyn.annoyancemute.debug;\n\nimport com.google.common.base.Strings;\nimport java.awt.BasicStroke;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Polygon;\nimport java.awt.Stroke;\nimport java.util.Collection;\nimport javax.annotation.Nullable;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Point;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\nimport net.runelite.client.ui.overlay.OverlayUtil;\n\npublic class AnnoyanceMuteOverlay extends Overlay\n{\n\tprivate static final int MAX_DRAW_DISTANCE \u003d 32;\n\n\tprivate final Client client;\n\tprivate final AnnoyanceMutePluginDebug plugin;\n\n\t@Inject\n\tprivate AnnoyanceMuteOverlay(Client client, AnnoyanceMutePluginDebug plugin)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.plugin \u003d plugin;\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetPriority(OverlayPriority.LOW);\n\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tfinal Collection\u003cAmbientSoundTileMarker\u003e points \u003d plugin.getPoints();\n\t\tif (points.isEmpty())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tStroke stroke \u003d new BasicStroke((float) 2);\n\t\tfor (final AmbientSoundTileMarker point : points)\n\t\t{\n\t\t\tWorldPoint worldPoint \u003d point.getWorldPoint();\n\t\t\tif (worldPoint.getPlane() !\u003d client.getPlane())\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tColor tileColor \u003d point.getColor();\n\t\t\tif (tileColor \u003d\u003d null)\n\t\t\t{\n\t\t\t\t// If this is an old tile which has no color, use marker color\n\t\t\t\ttileColor \u003d Color.RED;\n\t\t\t}\n\n\t\t\tdrawTile(graphics, worldPoint, tileColor, point.getLabel(), stroke);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate void drawTile(Graphics2D graphics, WorldPoint point, Color color, @Nullable String label, Stroke borderStroke)\n\t{\n\t\tWorldPoint playerLocation \u003d client.getLocalPlayer().getWorldLocation();\n\n\t\tif (point.distanceTo(playerLocation) \u003e\u003d MAX_DRAW_DISTANCE)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tLocalPoint lp \u003d LocalPoint.fromWorld(client, point);\n\t\tif (lp \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tPolygon poly \u003d Perspective.getCanvasTilePoly(client, lp);\n\t\tif (poly !\u003d null)\n\t\t{\n\t\t\tOverlayUtil.renderPolygon(graphics, poly, color, new Color(0, 0, 0, 50), borderStroke);\n\t\t}\n\n\t\tif (!Strings.isNullOrEmpty(label))\n\t\t{\n\t\t\tPoint canvasTextLocation \u003d Perspective.getCanvasTextLocation(client, graphics, lp, label, 0);\n\t\t\tif (canvasTextLocation !\u003d null)\n\t\t\t{\n\t\t\t\tOverlayUtil.renderTextLocation(graphics, canvasTextLocation, label, color);\n\t\t\t}\n\t\t}\n\t}\n}\n","filePath":"src\\test\\java\\com\\brooklyn\\annoyancemute\\debug\\AnnoyanceMuteOverlay.java"},{"fileName":"AnnoyanceMutePluginDebug.java","content":"package com.brooklyn.annoyancemute.debug;\n\nimport com.brooklyn.annoyancemute.AnnoyanceMutePlugin;\nimport java.awt.Color;\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.stream.Collectors;\nimport javax.inject.Inject;\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport net.runelite.api.AmbientSoundEffect;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.AmbientSoundEffectCreated;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDependency;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\n@PluginDescriptor(\n\tname \u003d \"Annoyance Mute Debug\",\n\tdescription \u003d \"Annoyance Mute Debug mode\",\n\ttags \u003d {\"sound\", \"volume\", \"mute\", \"hub\", \"brooklyn\", \"pet\", \"stomp\"}\n)\n@PluginDependency(AnnoyanceMutePlugin.class)\npublic class AnnoyanceMutePluginDebug extends Plugin\n{\n\t@Inject\n\tClient client;\n\n\t@Inject\n\tEventBus eventBus;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate AnnoyanceMuteOverlay annoyanceMuteOverlay;\n\n\t@Inject\n\tprivate AnnoyanceMuteSoundEffectOverlay annoyanceMuteSoundEffectOverlay;\n\n\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate final List\u003cAmbientSoundTileMarker\u003e points \u003d new ArrayList\u003c\u003e();\n\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate final List\u003cAmbientSoundPoint\u003e groundMarkerPoints \u003d new ArrayList\u003c\u003e();\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\toverlayManager.add(annoyanceMuteOverlay);\n\t\toverlayManager.add(annoyanceMuteSoundEffectOverlay);\n\t\teventBus.register(annoyanceMuteSoundEffectOverlay);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(annoyanceMuteOverlay);\n\t\toverlayManager.remove(annoyanceMuteSoundEffectOverlay);\n\t\teventBus.unregister(annoyanceMuteSoundEffectOverlay);\n\t}\n\n\t@Subscribe(priority \u003d -3) // priority -3 to run after AnnoyanceMutePlugin\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged)\n\t{\n\t\tGameState gameState \u003d gameStateChanged.getGameState();\n\t\tif (gameState \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\taddSounds();\n\t\t}\n\t}\n\n\t@Subscribe(priority \u003d -3) // priority -3 to run after AnnoyanceMutePlugin\n\tpublic void onAmbientSoundEffectCreated(AmbientSoundEffectCreated ambientSoundEffectCreated)\n\t{\n\t\taddSounds();\n\t}\n\n\tprivate void addSounds()\n\t{\n\t\tpoints.clear();\n\t\tgroundMarkerPoints.clear();\n\t\tfor (AmbientSoundEffect ambientSoundEffect : client.getAmbientSoundEffects())\n\t\t{\n\t\t\tmarkTile(ambientSoundEffect);\n\t\t}\n\n\t\tCollection\u003cAmbientSoundTileMarker\u003e colorTileMarkers \u003d translateToColorTileMarker(groundMarkerPoints);\n\t\tpoints.addAll(colorTileMarkers);\n\t}\n\n\tprivate void markTile(AmbientSoundEffect ambientSoundEffect)\n\t{\n\t\tif (ambientSoundEffect \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tint[] b \u003d ambientSoundEffect.getBackgroundSoundEffectIds();\n\n\t\tStringBuilder stringBuilder \u003d new StringBuilder();\n\t\tif (b \u003d\u003d null)\n\t\t{\n\t\t\tstringBuilder.append(\",\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor (int i : b)\n\t\t\t{\n\t\t\t\tstringBuilder.append(\",\" + i);\n\t\t\t}\n\t\t}\n\n\t\tmarkTile(ambientSoundEffect.getMinPosition(), String.valueOf(ambientSoundEffect.getSoundEffectId()) + \"min (\" + stringBuilder.toString().substring(1) + \")\");\n\t\tmarkTile(ambientSoundEffect.getMaxPosition(), String.valueOf(ambientSoundEffect.getSoundEffectId()) + \"max (\" + stringBuilder.toString().substring(1) + \")\");\n\t}\n\n\tprivate void markTile(LocalPoint localPoint, String label)\n\t{\n\t\tif (localPoint \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tWorldPoint worldPoint \u003d WorldPoint.fromLocalInstance(client, localPoint);\n\n\t\tint regionId \u003d worldPoint.getRegionID();\n\t\tAmbientSoundPoint point \u003d new AmbientSoundPoint(regionId, worldPoint.getRegionX(), worldPoint.getRegionY(), worldPoint.getPlane(), Color.RED, label);\n\n\t\tgroundMarkerPoints.add(point);\n\t}\n\n\t/**\n\t * Translate a collection of ambient sound points to ambient sound tiles, accounting for instances\n\t *\n\t * @param points {@link AmbientSoundPoint}s to be converted to {@link AmbientSoundTileMarker}s\n\t * @return A collection of ambient sound tiles, converted from the passed ambient sound points, accounting for local\n\t * instance points. See {@link WorldPoint#toLocalInstance(Client, WorldPoint)}\n\t */\n\tpublic Collection\u003cAmbientSoundTileMarker\u003e translateToColorTileMarker(Collection\u003cAmbientSoundPoint\u003e points)\n\t{\n\t\tif (points.isEmpty())\n\t\t{\n\t\t\treturn Collections.emptyList();\n\t\t}\n\n\t\treturn points.stream()\n\t\t\t.map(point -\u003e new AmbientSoundTileMarker(\n\t\t\t\tWorldPoint.fromRegion(point.getRegionId(), point.getRegionX(), point.getRegionY(), point.getZ()),\n\t\t\t\tpoint.getColor(), point.getLabel()))\n\t\t\t.flatMap(colorTile -\u003e\n\t\t\t{\n\t\t\t\tfinal Collection\u003cWorldPoint\u003e localWorldPoints \u003d WorldPoint.toLocalInstance(client, colorTile.getWorldPoint());\n\t\t\t\treturn localWorldPoints.stream().map(wp -\u003e new AmbientSoundTileMarker(wp, colorTile.getColor(), colorTile.getLabel()));\n\t\t\t})\n\t\t\t.collect(Collectors.toList());\n\t}\n}\n","filePath":"src\\test\\java\\com\\brooklyn\\annoyancemute\\debug\\AnnoyanceMutePluginDebug.java"},{"fileName":"AnnoyanceMuteSoundEffectOverlay.java","content":"package com.brooklyn.annoyancemute.debug;\n\nimport com.brooklyn.annoyancemute.AnnoyanceMutePlugin;\nimport com.brooklyn.annoyancemute.SoundEffectType;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.api.Player;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.events.AreaSoundEffectPlayed;\nimport net.runelite.api.events.SoundEffectPlayed;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.LineComponent;\n\nclass AnnoyanceMuteSoundEffectOverlay extends OverlayPanel\n{\n\tprivate final static int MAX_LINES \u003d 10;\n\tprivate final static Color COLOR_SOUND_EFFECT \u003d Color.WHITE;\n\tprivate final static Color COLOR_AREA_SOUND_EFFECT \u003d Color.YELLOW;\n\tprivate final static Color COLOR_SILENT_SOUND_EFFECT \u003d Color.GRAY;\n\tprivate final static Color COLOR_ALLOWED \u003d Color.GREEN;\n\tprivate final static Color COLOR_CONSUMED \u003d Color.RED;\n\tpublic static final String ALLOWED \u003d \"Allowed\";\n\tpublic static final String CONSUMED \u003d \"Consumed\";\n\tprivate final Client client;\n\tprivate final AnnoyanceMutePlugin plugin;\n\n\t@Inject\n\tAnnoyanceMuteSoundEffectOverlay(Client client, AnnoyanceMutePlugin plugin)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.plugin \u003d plugin;\n\n\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t.left(\"Sound Effects\")\n\t\t\t.leftColor(Color.CYAN)\n\t\t\t.build());\n\n\t\tsetClearChildren(false);\n\t\tsetPosition(OverlayPosition.TOP_LEFT);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\treturn super.render(graphics);\n\t}\n\n\t@Subscribe\n\tpublic void onSoundEffectPlayed(SoundEffectPlayed event)\n\t{\n\t\tint soundId \u003d event.getSoundId();\n\n\t\tString text \u003d \"G: \" + soundId +\n\t\t\t\" - D: \" + event.getDelay();\n\n\t\tString action \u003d ALLOWED;\n\t\tColor actionColor \u003d COLOR_ALLOWED;\n\n\t\tif (plugin.shouldMute(soundId, SoundEffectType.SOUND_EFFECT, event.getSource()))\n\t\t{\n\t\t\taction \u003d CONSUMED;\n\t\t\tactionColor \u003d COLOR_CONSUMED;\n\t\t}\n\n\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t.left(text)\n\t\t\t.leftColor(COLOR_SOUND_EFFECT)\n\t\t\t.right(action)\n\t\t\t.rightColor(actionColor)\n\t\t\t.build());\n\n\t\tcheckMaxLines();\n\t}\n\n\t@Subscribe\n\tpublic void onAreaSoundEffectPlayed(AreaSoundEffectPlayed event)\n\t{\n\t\tColor textColor \u003d COLOR_AREA_SOUND_EFFECT;\n\t\tColor actionColor \u003d COLOR_ALLOWED;\n\n\t\tint soundId \u003d event.getSoundId();\n\t\tString text \u003d\n\t\t\t\"Id: \" + event.getSoundId() +\n\t\t\t\t\" - S: \" + (event.getSource() !\u003d null ? event.getSource().getName() : \"\u003cnone\u003e\") +\n\t\t\t\t\" - L: \" + event.getSceneX() + \",\" + event.getSceneY() +\n\t\t\t\t\" - R: \" + event.getRange() +\n\t\t\t\t\" - D: \" + event.getDelay();\n\t\tString action \u003d ALLOWED;\n\n\t\t// Check if the player is within range to hear the sound\n\t\tPlayer localPlayer \u003d client.getLocalPlayer();\n\t\tif (localPlayer !\u003d null)\n\t\t{\n\t\t\tLocalPoint lp \u003d localPlayer.getLocalLocation();\n\t\t\tif (lp !\u003d null)\n\t\t\t{\n\t\t\t\tint sceneX \u003d lp.getSceneX();\n\t\t\t\tint sceneY \u003d lp.getSceneY();\n\t\t\t\tint distance \u003d Math.abs(sceneX - event.getSceneX()) + Math.abs(sceneY - event.getSceneY());\n\t\t\t\tif (distance \u003e event.getRange())\n\t\t\t\t{\n\t\t\t\t\ttextColor \u003d COLOR_SILENT_SOUND_EFFECT;\n\t\t\t\t\ttext \u003d \"SA: \" + soundId;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (plugin.shouldMute(soundId, SoundEffectType.AREA_SOUND_EFFECT, event.getSource()))\n\t\t{\n\t\t\taction \u003d CONSUMED;\n\t\t\tactionColor \u003d COLOR_CONSUMED;\n\t\t}\n\n\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t.left(text)\n\t\t\t.leftColor(textColor)\n\t\t\t.right(action)\n\t\t\t.rightColor(actionColor)\n\t\t\t.build());\n\n\t\tcheckMaxLines();\n\t}\n\n\tprivate void checkMaxLines()\n\t{\n\t\twhile (panelComponent.getChildren().size() \u003e MAX_LINES)\n\t\t{\n\t\t\tpanelComponent.getChildren().remove(1);\n\t\t}\n\t}\n}","filePath":"src\\test\\java\\com\\brooklyn\\annoyancemute\\debug\\AnnoyanceMuteSoundEffectOverlay.java"}]},{"commit":"76d7d001fb1517fed2359ee61c32b724440118c6","repository":"https://github.com/TheLope/ImplingSaver.git","internalName":"impling-saver","files":[{"fileName":"ImplingSaverConfig.java","content":"package com.implingsaver;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\n\n@ConfigGroup(\"ImplingSaver\")\npublic interface ImplingSaverConfig extends Config\n{\n\tString CONFIG_GROUP \u003d \"ImplingSaver\";\n\tString BEGINNER_BANKED \u003d \"beginnerBanked\";\n\tString EASY_BANKED \u003d \"easyBanked\";\n\tString MEDIUM_BANKED \u003d \"mediumBanked\";\n\tString HARD_BANKED \u003d \"hardBanked\";\n\tString ELITE_BANKED \u003d \"eliteBanked\";\n\n    @ConfigItem(\n\t\tkeyName \u003d \"beginner\",\n\t\tname \u003d \"Beginner Clues\",\n\t\tdescription \u003d \"Looting baby and young impling jars is blocked when beginner clue in bank\",\n\t\tposition \u003d 0\n    )\n    default boolean beginnerMode()\n\t{\n        return true;\n    }\n\n    @ConfigItem(\n\t\tkeyName \u003d \"easy\",\n\t\tname \u003d \"Easy Clues\",\n\t\tdescription \u003d \"Looting baby, young, and gourmet impling jars is blocked when easy clue in bank\",\n\t\tposition \u003d 1\n    )\n    default boolean easyMode()\n\t{\n        return true;\n    }\n\n    @ConfigItem(\n\t\tkeyName \u003d \"medium\",\n\t\tname \u003d \"Medium Clues\",\n\t\tdescription \u003d \"Looting earth, eclectic, and essence impling jars is blocked when medium clue in bank\",\n\t\tposition \u003d 2\n    )\n    default boolean mediumMode()\n\t{\n        return true;\n    }\n\n    @ConfigItem(\n\t\tkeyName \u003d \"hard\",\n\t\tname \u003d \"Hard Clues\",\n\t\tdescription \u003d \"Looting nature, magpie, and ninja impling jars is blocked when hard clue in bank\",\n\t\tposition \u003d 3\n    )\n    default boolean hardMode()\n\t{\n        return true;\n    }\n\n    @ConfigItem(\n\t\tkeyName \u003d \"elite\",\n\t\tname \u003d \"Elite Clues\",\n\t\tdescription \u003d \"Looting crystal and dragon impling jars is blocked when elite clue in bank\",\n\t\tposition \u003d 4\n    )\n    default boolean eliteMode()\n\t{\n        return true;\n    }\n\n\t@ConfigSection(name \u003d \"Overlays\", description \u003d \"Options that effect overlays\", position \u003d 5)\n\tString overlaysSection \u003d \"Overlays\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showChatMessage\",\n\t\tname \u003d \"Show chat message\",\n\t\tdescription \u003d \"Show chat message indicating when implings are being saved\",\n\t\tsection \u003d overlaysSection,\n\t\tposition \u003d 0\n\t)\n\tdefault boolean showChatMessage()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showInfobox\",\n\t\tname \u003d \"Show infobox\",\n\t\tdescription \u003d \"Show infobox indicating when implings are being saved\",\n\t\tsection \u003d overlaysSection,\n\t\tposition \u003d 1\n\t)\n\tdefault boolean showInfobox()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showTooltip\",\n\t\tname \u003d \"Show tooltip\",\n\t\tdescription \u003d \"Show tooltip on implings \\\"Loot\\\" hover when implings are being saved\",\n\t\tsection \u003d overlaysSection,\n\t\tposition \u003d 2\n\t)\n\tdefault boolean showTooltip()\n\t{\n\t\treturn true;\n\t}\n}\n","filePath":"src\\main\\java\\com\\implingsaver\\ImplingSaverConfig.java"},{"fileName":"ImplingSaverOverlay.java","content":"package com.implingsaver;\n\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.api.Menu;\nimport net.runelite.api.MenuEntry;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.tooltip.Tooltip;\nimport net.runelite.client.ui.overlay.tooltip.TooltipManager;\n\npublic class ImplingSaverOverlay extends OverlayPanel\n{\n\tprivate final Client client;\n\tprivate final ImplingSaverPlugin plugin;\n\tprivate final ImplingSaverConfig config;\n\tprivate final TooltipManager tooltipManager;\n\n\t@Inject\n\tpublic ImplingSaverOverlay(Client client, ImplingSaverPlugin plugin, ImplingSaverConfig config, TooltipManager tooltipManager)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t\tthis.tooltipManager \u003d tooltipManager;\n\n\t\tsetPosition(OverlayPosition.TOOLTIP);\n\t\tsetLayer(OverlayLayer.ABOVE_WIDGETS);\n\t\tsetPriority(PRIORITY_HIGHEST);\n\t\tsetDragTargetable(false);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\trenderMouseover();\n\t\treturn null;\n\t}\n\n\tprivate void renderMouseover()\n\t{\n\t\tif (!config.showTooltip()) return;\n\n\t\tMenu menu \u003d client.getMenu();\n\t\tMenuEntry[] menuEntries \u003d menu.getMenuEntries();\n\t\tif (menuEntries.length \u003d\u003d 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tMenuEntry entry \u003d menuEntries[menuEntries.length - 1];\n\t\tString menuOption \u003d entry.getOption();\n\t\tint itemId \u003d entry.getItemId();\n\n\t\tif (plugin.isImplingToSave(itemId) \u0026\u0026 menuOption.equals(\"Loot\"))\n\t\t{\n\t\t\tString tooltipText \u003d plugin.getCause(itemId);\n\n\t\t\tif (tooltipText !\u003d null){\n\t\t\t\ttooltipManager.add(new Tooltip(tooltipText));\n\t\t\t}\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\implingsaver\\ImplingSaverOverlay.java"},{"fileName":"ImplingSaverPlugin.java","content":"package com.implingsaver;\n\nimport com.google.inject.Provides;\nimport java.awt.Color;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Set;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.Item;\nimport net.runelite.api.ItemContainer;\nimport static net.runelite.api.ItemID.*;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.ItemContainerChanged;\nimport net.runelite.api.events.MenuOptionClicked;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.chat.ChatColorType;\nimport net.runelite.client.chat.ChatMessageBuilder;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.chat.QueuedMessage;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.RuneScapeProfileChanged;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.plugins.PluginManager;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.ui.overlay.infobox.InfoBox;\nimport net.runelite.client.ui.overlay.infobox.InfoBoxManager;\nimport net.runelite.client.util.ColorUtil;\n\n@Slf4j\n@PluginDescriptor(\n        name \u003d \"ImplingSaver\",\n\t\tdescription \u003d \"Blocks looting while corresponding clue is banked\",\n\t\ttags \u003d {\"imp\", \"impling\", \"clue\"}\n)\npublic class ImplingSaverPlugin extends Plugin\n{\n    public ArrayList\u003cInteger\u003e implingJarIds \u003d new ArrayList\u003cInteger\u003e()\n\t{{\n        add(BABY_IMPLING_JAR);\n        add(YOUNG_IMPLING_JAR);\n        add(GOURMET_IMPLING_JAR);\n        add(EARTH_IMPLING_JAR);\n        add(ESSENCE_IMPLING_JAR);\n        add(ECLECTIC_IMPLING_JAR);\n        add(NATURE_IMPLING_JAR);\n        add(MAGPIE_IMPLING_JAR);\n        add(NINJA_IMPLING_JAR);\n        add(CRYSTAL_IMPLING_JAR);\n        add(DRAGON_IMPLING_JAR);\n    }};\n\n\tpublic ArrayList\u003cInteger\u003e beginnerImplingJarIds \u003d new ArrayList\u003cInteger\u003e()\n\t{{\n\t\tadd(BABY_IMPLING_JAR);\n\t\tadd(YOUNG_IMPLING_JAR);\n\t}};\n\n\tpublic ArrayList\u003cInteger\u003e easyImplingJarIds \u003d new ArrayList\u003cInteger\u003e()\n\t{{\n\t\tadd(BABY_IMPLING_JAR);\n\t\tadd(YOUNG_IMPLING_JAR);\n\t\tadd(GOURMET_IMPLING_JAR);\n\t}};\n\n\tpublic ArrayList\u003cInteger\u003e mediumImplingJarIds \u003d new ArrayList\u003cInteger\u003e()\n\t{{\n\t\tadd(EARTH_IMPLING_JAR);\n\t\tadd(ESSENCE_IMPLING_JAR);\n\t\tadd(ECLECTIC_IMPLING_JAR);\n\t}};\n\n\tpublic ArrayList\u003cInteger\u003e hardImplingJarIds \u003d new ArrayList\u003cInteger\u003e()\n\t{{\n\t\tadd(NATURE_IMPLING_JAR);\n\t\tadd(MAGPIE_IMPLING_JAR);\n\t\tadd(NINJA_IMPLING_JAR);\n\t}};\n\n\tpublic ArrayList\u003cInteger\u003e eliteImplingJarIds \u003d new ArrayList\u003cInteger\u003e()\n\t{{\n\t\tadd(CRYSTAL_IMPLING_JAR);\n\t\tadd(DRAGON_IMPLING_JAR);\n\t}};\n\n\tpublic static final String BEGINNER_ITEM_NAME \u003d \"Clue scroll (beginner)\";\n\tpublic static final String EASY_ITEM_NAME \u003d \"Clue scroll (easy)\";\n\tpublic static final String MEDIUM_ITEM_NAME \u003d \"Clue scroll (medium)\";\n\tpublic static final String MEDIUM_CHALLENGE_ITEM_NAME \u003d \"Challenge scroll (medium)\";\n\tpublic static final String HARD_ITEM_NAME \u003d \"Clue scroll (hard)\";\n\tpublic static final String HARD_CHALLENGE_ITEM_NAME \u003d \"Challenge scroll (hard)\";\n\tpublic static final String ELITE_ITEM_NAME \u003d \"Clue scroll (elite)\";\n\tpublic static final String ELITE_CHALLENGE_ITEM_NAME \u003d \"Challenge scroll (elite)\";\n\n    @Inject\n    private Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Inject\n\tprivate ItemManager itemManager;\n\n\t@Inject\n\tprivate InfoBoxManager infoBoxManager;\n\n\tprivate InfoBox infoBox \u003d null;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tPluginManager pluginManager;\n\n\t@Inject\n\tprivate ChatMessageManager chatMessageManager;\n\n\t@Inject\n\tprivate ImplingSaverOverlay infoOverlay;\n\n\t@Inject\n\tprivate ImplingSaverConfig config;\n\n    private boolean beginnerInBank \u003d false;\n    private boolean easyInBank \u003d false;\n    private boolean mediumInBank \u003d false;\n    private boolean hardInBank \u003d false;\n    private boolean eliteInBank \u003d false;\n\tprivate boolean loggingIn;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\toverlayManager.add(infoOverlay);\n\t\tclientThread.invoke(this::loadFromConfig);\n\t\tloggingIn \u003d true;\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(infoOverlay);\n\t\tremoveInfoBox();\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged event)\n\t{\n\t\tif (event.getGameState() \u003d\u003d GameState.LOGGING_IN)\n\t\t{\n\t\t\tloggingIn \u003d true;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onRuneScapeProfileChanged(RuneScapeProfileChanged e)\n\t{\n\t\tclientThread.invoke(this::loadFromConfig);\n\t}\n\n\t@Subscribe\n\tpublic void onItemContainerChanged(ItemContainerChanged event)\n\t{\n\t\tif (event.getContainerId() \u003d\u003d InventoryID.BANK.getId())\n\t\t{\n\t\t\tItemContainer bankContainer \u003d client.getItemContainer(InventoryID.BANK);\n\n\t\t\tif (bankContainer !\u003d null)\n\t\t\t{\n\t\t\t\tcheckContainer(bankContainer);\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOptionClicked(MenuOptionClicked event)\n\t{\n\t\t// Consume Impling Loot events\n\t\tif (event.isItemOp() \u0026\u0026 implingJarIds.contains(event.getItemId()) \u0026\u0026 event.getMenuOption().equals(\"Loot\"))\n\t\t{\n\t\t\tsaveImpling(event);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event)\n\t{\n\t\thandleInfoBox();\n\n\t\tif (loggingIn)\n\t\t{\n\t\t\tloggingIn \u003d false;\n\t\t\tnotifyPluginInstall();\n\t\t}\n\t}\n\n\t@Provides\n\tImplingSaverConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(ImplingSaverConfig.class);\n\t}\n\n\tprivate void checkContainer(ItemContainer container)\n\t{\n\t\tString[] cluesToFind \u003d {\n\t\t\tBEGINNER_ITEM_NAME,\n\t\t\tEASY_ITEM_NAME,\n\t\t\tMEDIUM_ITEM_NAME,\n\t\t\tMEDIUM_CHALLENGE_ITEM_NAME,\n\t\t\tHARD_ITEM_NAME,\n\t\t\tHARD_CHALLENGE_ITEM_NAME,\n\t\t\tELITE_ITEM_NAME,\n\t\t\tELITE_CHALLENGE_ITEM_NAME\n\t\t};\n\n\t\tList\u003cString\u003e foundClues \u003d new ArrayList\u003c\u003e();\n\n\t\t// Check bank for cluesToFind\n\t\tfor (Item item : container.getItems())\n\t\t{\n\t\t\tfor (String clueName : cluesToFind)\n\t\t\t{\n\t\t\t\tString itemName \u003d getItemName(item.getId());\n\t\t\t\tif (itemName.equals(clueName))\n\t\t\t\t{\n\t\t\t\t\tfoundClues.add(clueName);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Set state of each clue based on what was found\n\t\tsetBeginnerInBank(!Collections.disjoint(Collections.singletonList(BEGINNER_ITEM_NAME), foundClues));\n\t\tsetEasyInBank(!Collections.disjoint(Collections.singletonList(EASY_ITEM_NAME), foundClues));\n\t\tsetMediumInBank(!Collections.disjoint(Arrays.asList(MEDIUM_ITEM_NAME, MEDIUM_CHALLENGE_ITEM_NAME), foundClues));\n\t\tsetHardInBank(!Collections.disjoint(Arrays.asList(HARD_ITEM_NAME, HARD_CHALLENGE_ITEM_NAME), foundClues));\n\t\tsetEliteInBank(!Collections.disjoint(Arrays.asList(ELITE_ITEM_NAME, ELITE_CHALLENGE_ITEM_NAME), foundClues));\n\t}\n\n\tpublic String getItemName(Integer itemId)\n\t{\n\t\treturn itemManager.getItemComposition(itemId).getName();\n\t}\n\n\tpublic String getCause(Integer itemId)\n\t{\n\t\tif (!(beginnerInBank || easyInBank || mediumInBank || hardInBank || eliteInBank))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tStringBuilder savingCause \u003d new StringBuilder()\n\t\t\t.append(ColorUtil.wrapWithColorTag(\"Impling Saver: \", Color.YELLOW))\n\t\t\t.append(ColorUtil.wrapWithColorTag(\"active\", Color.GREEN))\n\t\t\t.append(\"\u003cbr\u003e\")\n\t\t\t.append(ColorUtil.wrapWithColorTag(\"Cause: \", Color.YELLOW));\n\t\tif (config.beginnerMode() \u0026\u0026 beginnerInBank \u0026\u0026 beginnerImplingJarIds.contains(itemId))\n\t\t{\n\t\t\tsavingCause.append(ColorUtil.wrapWithColorTag(\"Beginner\", Color.RED));\n\t\t}\n\t\telse if (config.easyMode() \u0026\u0026 easyInBank \u0026\u0026 easyImplingJarIds.contains(itemId))\n\t\t{\n\t\t\tsavingCause.append(ColorUtil.wrapWithColorTag(\"Easy\", Color.RED));\n\t\t}\n\t\telse if (config.mediumMode() \u0026\u0026 mediumInBank \u0026\u0026 mediumImplingJarIds.contains(itemId))\n\t\t{\n\t\t\tsavingCause.append(ColorUtil.wrapWithColorTag(\"Medium\", Color.RED));\n\t\t}\n\t\telse if (config.hardMode() \u0026\u0026 hardInBank \u0026\u0026 hardImplingJarIds.contains(itemId))\n\t\t{\n\t\t\tsavingCause.append(ColorUtil.wrapWithColorTag(\"Hard\", Color.RED));\n\t\t}\n\t\telse if (config.eliteMode() \u0026\u0026 eliteInBank \u0026\u0026 eliteImplingJarIds.contains(itemId))\n\t\t{\n\t\t\tsavingCause.append(ColorUtil.wrapWithColorTag(\"Elite\", Color.RED));\n\t\t}\n\t\tsavingCause.append(\" clue in bank\u003cbr\u003e\");\n\t\treturn savingCause.toString();\n\t}\n\n\tprivate void handleInfoBox()\n\t{\n\t\tboolean isShowing \u003d infoBox !\u003d null;\n\t\tboolean shouldShow \u003d config.showInfobox() \u0026\u0026 (\n\t\t\t\tbeginnerInBank || easyInBank || mediumInBank || hardInBank || eliteInBank\n\t\t);\n\n\t\tif (isShowing \u0026\u0026 !shouldShow)\n\t\t{\n\t\t\tremoveInfoBox();\n\t\t}\n\t\telse if (shouldShow)\n\t\t{\n\t\t\tif (!isShowing)\n\t\t\t{\n\t\t\t\tinfoBox \u003d new InfoBox(itemManager.getImage(ECLECTIC_IMPLING_JAR), this)\n\t\t\t\t{\n\t\t\t\t\t@Override\n\t\t\t\t\tpublic String getText()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn \"\";\n\t\t\t\t\t}\n\n\t\t\t\t\t@Override\n\t\t\t\t\tpublic Color getTextColor()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tStringBuilder tooltip \u003d new StringBuilder();\n\t\t\tfor (Integer implingJarId : implingJarIds)\n\t\t\t{\n\t\t\t\tif (isImplingToSave(implingJarId)){\n\t\t\t\t\ttooltip.append(getCause(implingJarId));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tremoveDuplicateLines(tooltip);\n\t\t\tinfoBox.setTooltip(tooltip.toString());\n\n\t\t\tif (!isShowing)\n\t\t\t{\n\t\t\t\tinfoBoxManager.addInfoBox(infoBox);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate static void removeDuplicateLines(StringBuilder sb)\n\t{\n\t\tSet\u003cString\u003e lines \u003d new HashSet\u003c\u003e();\n\t\tStringBuilder result \u003d new StringBuilder();\n\n\t\tString[] linesArray \u003d sb.toString().split(\"\u003cbr\u003e\");\n\n\t\tfor (String line : linesArray)\n\t\t{\n\t\t\tif (!lines.contains(line))\n\t\t\t{\n\t\t\t\tresult.append(line).append(\"\u003cbr\u003e\");\n\t\t\t\tlines.add(line);\n\t\t\t}\n\t\t}\n\n\t\tsb.setLength(0); // Clear the original StringBuilder\n\t\tsb.append(result);\n\t}\n\n\tpublic boolean isImplingToSave(Integer itemId)\n\t{\n\t\treturn (beginnerImplingJarIds.contains(itemId) \u0026\u0026 config.beginnerMode() \u0026\u0026 beginnerInBank)\n\t\t\t|| (easyImplingJarIds.contains(itemId) \u0026\u0026 config.easyMode() \u0026\u0026 easyInBank)\n\t\t\t|| (mediumImplingJarIds.contains(itemId) \u0026\u0026 config.mediumMode() \u0026\u0026 mediumInBank)\n\t\t\t|| (hardImplingJarIds.contains(itemId) \u0026\u0026 config.hardMode() \u0026\u0026 hardInBank)\n\t\t\t|| (eliteImplingJarIds.contains(itemId) \u0026\u0026 config.eliteMode() \u0026\u0026 eliteInBank);\n\t}\n\n\tprivate void loadFromConfig()\n\t{\n\t\tBoolean loadBeginnerInBank \u003d configManager.getRSProfileConfiguration(ImplingSaverConfig.CONFIG_GROUP, ImplingSaverConfig.BEGINNER_BANKED, Boolean.class);\n\t\tBoolean loadEasyInBank \u003d configManager.getRSProfileConfiguration(ImplingSaverConfig.CONFIG_GROUP, ImplingSaverConfig.EASY_BANKED, Boolean.class);\n\t\tBoolean loadMediumInBank \u003d configManager.getRSProfileConfiguration(ImplingSaverConfig.CONFIG_GROUP, ImplingSaverConfig.MEDIUM_BANKED, Boolean.class);\n\t\tBoolean loadHardInBank \u003d configManager.getRSProfileConfiguration(ImplingSaverConfig.CONFIG_GROUP, ImplingSaverConfig.HARD_BANKED, Boolean.class);\n\t\tBoolean loadEliteInBank \u003d configManager.getRSProfileConfiguration(ImplingSaverConfig.CONFIG_GROUP, ImplingSaverConfig.ELITE_BANKED, Boolean.class);\n\n\t\tif (loadBeginnerInBank !\u003d null) beginnerInBank \u003d loadBeginnerInBank;\n\t\tif (loadEasyInBank !\u003d null) easyInBank \u003d loadEasyInBank;\n\t\tif (loadMediumInBank !\u003d null) mediumInBank \u003d loadMediumInBank;\n\t\tif (loadHardInBank !\u003d null) hardInBank \u003d loadHardInBank;\n\t\tif (loadEliteInBank !\u003d null) eliteInBank \u003d loadEliteInBank;\n\t}\n\n\tprivate void removeInfoBox()\n\t{\n\t\tif (infoBox !\u003d null)\n\t\t{\n\t\t\tinfoBoxManager.removeInfoBox(infoBox);\n\t\t\tinfoBox \u003d null;\n\t\t}\n\t}\n\n\tprivate void saveImpling(MenuOptionClicked event)\n\t{\n\t\tif (isImplingToSave(event.getItemId()))\n\t\t{\n\t\t\tevent.consume();\n\t\t\tif (config.showChatMessage())\n\t\t\t{\n\t\t\t\tString chatMessage \u003d getCause(event.getItemId()).replace(\"\u003cbr\u003e\", \" \");\n\t\t\t\tclient.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", chatMessage, \"\");\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void setBeginnerInBank(Boolean bool)\n\t{\n\t\tbeginnerInBank \u003d bool;\n\t\tmanageRSProfileConfiguration(ImplingSaverConfig.BEGINNER_BANKED, bool);\n\t}\n\n\tprivate void setEasyInBank(Boolean bool)\n\t{\n\t\teasyInBank \u003d bool;\n\t\tmanageRSProfileConfiguration(ImplingSaverConfig.EASY_BANKED, bool);\n\t}\n\tprivate void setMediumInBank(Boolean bool)\n\t{\n\t\tmediumInBank \u003d bool;\n\t\tmanageRSProfileConfiguration(ImplingSaverConfig.MEDIUM_BANKED, bool);\n\t}\n\n\tprivate void setHardInBank(Boolean bool)\n\t{\n\t\thardInBank \u003d bool;\n\t\tmanageRSProfileConfiguration(ImplingSaverConfig.HARD_BANKED, bool);\n\t}\n\n\tprivate void setEliteInBank(Boolean bool)\n\t{\n\t\teliteInBank \u003d bool;\n\t\tmanageRSProfileConfiguration(ImplingSaverConfig.ELITE_BANKED, bool);\n\t}\n\n\tprivate void manageRSProfileConfiguration(String key, Boolean bool)\n\t{\n\t\tconfigManager.setRSProfileConfiguration(ImplingSaverConfig.CONFIG_GROUP, key, bool);\n\t}\n\n\tprivate void notifyPluginInstall()\n\t{\n\t\tif (pluginManager.getPlugins().stream().noneMatch(plugin -\u003e plugin.getName().equals(\"Clue Saver\")))\n\t\t{\n\t\t\tsendChatConsoleMessage(\"ImplingSaver functionality has been integrated into Clue Saver. \" +\n\t\t\t\t\"Please install Clue Saver to take advantage of the latest features.\");\n\t\t}\n\t}\n\n\tprivate void sendChatConsoleMessage(String chatMessage)\n\t{\n\t\tfinal String message \u003d new ChatMessageBuilder()\n\t\t\t.append(ChatColorType.HIGHLIGHT)\n\t\t\t.append(chatMessage)\n\t\t\t.build();\n\n\t\tchatMessageManager.queue(\n\t\t\tQueuedMessage.builder()\n\t\t\t\t.type(ChatMessageType.CONSOLE)\n\t\t\t\t.runeLiteFormattedMessage(message)\n\t\t\t\t.build());\n\t}\n}\n","filePath":"src\\main\\java\\com\\implingsaver\\ImplingSaverPlugin.java"},{"fileName":"ImplingSaverTest.java","content":"package com.implingsaver;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ImplingSaverTest\n{\n    public static void main(String[] args) throws Exception\n\t{\n        ExternalPluginManager.loadBuiltin(ImplingSaverPlugin.class);\n        RuneLite.main(args);\n    }\n}\n","filePath":"src\\test\\java\\com\\implingsaver\\ImplingSaverTest.java"}]},{"commit":"6e8f186d2981717b5d92fd10ba7081894ad4abde","repository":"https://github.com/AnuVen/special-attack-timers.git","internalName":"special-attack-timers","files":[{"fileName":"SpecialAttackTimersCircleOverlay.java","content":"package com.specialattacktimers;\n\nimport java.awt.BasicStroke;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Rectangle;\nimport java.awt.RenderingHints;\nimport java.awt.Stroke;\nimport java.awt.geom.Arc2D;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.gameval.InterfaceID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\n\n/**\n * Circular overlay that draws a progress arc around the special attack orb,\n * similar to the Regeneration Meter plugin.\n *\n * The arc fills up as you get closer to the next spec regen tick:\n * - Empty arc \u003d just regenerated, 30 seconds until next\n * - Full arc \u003d about to regenerate\n * - No arc when spec is at 100% or between waves (timer resets on wave start anyway)\n */\npublic class SpecialAttackTimersCircleOverlay extends Overlay\n{\n\t/**\n\t * Offset from the widget bounds to position the arc.\n\t */\n\tprivate static final int OFFSET \u003d 27;\n\n\t/**\n\t * Diameter of the circular arc.\n\t */\n\tprivate static final int DIAMETER \u003d 26;\n\n\t/**\n\t * Stroke width for drawing the arc.\n\t */\n\tprivate static final int STROKE_WIDTH \u003d 2;\n\n\tprivate final Client client;\n\tprivate final SpecialAttackTimersPlugin plugin;\n\tprivate final SpecialAttackTimersConfig config;\n\n\t@Inject\n\tpublic SpecialAttackTimersCircleOverlay(Client client, SpecialAttackTimersPlugin plugin, SpecialAttackTimersConfig config)\n\t{\n\t\tsuper(plugin);\n\t\tthis.client \u003d client;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.ABOVE_WIDGETS);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\t// Don\u0027t render if not logged in\n\t\tif (client.getGameState() !\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\t// Don\u0027t render if circular overlay is disabled\n\t\tif (!config.showCircularOverlay())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\t// Don\u0027t render if spec is full (nothing to show)\n\t\tif (plugin.isSpecFull())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\t// Don\u0027t render between waves - timer resets on wave start anyway\n\t\tif (plugin.isBetweenWaves())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\t// Find the spec orb widget (try standard orbs first, then no-map variant)\n\t\tWidget specOrbWidget \u003d client.getWidget(InterfaceID.Orbs.ORB_SPECENERGY);\n\t\tif (specOrbWidget \u003d\u003d null || specOrbWidget.isHidden())\n\t\t{\n\t\t\tspecOrbWidget \u003d client.getWidget(InterfaceID.OrbsNomap.ORB_SPECENERGY);\n\t\t}\n\t\tif (specOrbWidget \u003d\u003d null || specOrbWidget.isHidden())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tRectangle bounds \u003d specOrbWidget.getBounds();\n\t\tif (bounds.getX() \u003c\u003d 0)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\t// Calculate progress percentage (0.0 \u003d just reset, 1.0 \u003d about to regen)\n\t\t// This makes the arc fill UP as you get closer to regen, matching RegenMeter behavior\n\t\t// Uses getMaxRegenTicks() to account for Lightbearer (25 ticks instead of 50)\n\t\tdouble progress \u003d 1.0 - ((double) plugin.getTicksUntilRegen() / plugin.getMaxRegenTicks());\n\n\t\t// Draw the arc with the configured circle color\n\t\tdrawArc(graphics, bounds, progress, config.circleColor());\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Draws a circular progress arc around the spec orb.\n\t *\n\t * @param graphics The graphics context\n\t * @param bounds   The widget bounds\n\t * @param progress Progress from 0.0 (empty) to 1.0 (full)\n\t * @param color    The color to draw the arc\n\t */\n\tprivate void drawArc(Graphics2D graphics, Rectangle bounds, double progress, Color color)\n\t{\n\t\t// Enable anti-aliasing for smooth arc\n\t\tgraphics.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n\t\tgraphics.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);\n\n\t\t// Calculate arc position (centered on the orb)\n\t\tdouble x \u003d bounds.getX() + OFFSET;\n\t\tdouble y \u003d bounds.getY() + (bounds.getHeight() / 2.0 - DIAMETER / 2.0);\n\n\t\t// Create arc starting at top (90 degrees) and sweeping clockwise\n\t\t// Progress of 1.0 \u003d full circle, 0.0 \u003d no arc\n\t\tdouble sweepAngle \u003d -360.0 * progress;\n\t\tArc2D.Double arc \u003d new Arc2D.Double(x, y, DIAMETER, DIAMETER, 90.0, sweepAngle, Arc2D.OPEN);\n\n\t\t// Draw the arc with stroke\n\t\tStroke originalStroke \u003d graphics.getStroke();\n\t\tgraphics.setStroke(new BasicStroke(STROKE_WIDTH, BasicStroke.CAP_BUTT, BasicStroke.JOIN_BEVEL));\n\t\tgraphics.setColor(color);\n\t\tgraphics.draw(arc);\n\t\tgraphics.setStroke(originalStroke);\n\t}\n}\n","filePath":"src\\main\\java\\com\\specialattacktimers\\SpecialAttackTimersCircleOverlay.java"},{"fileName":"SpecialAttackTimersConfig.java","content":"package com.specialattacktimers;\n\nimport java.awt.Color;\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.client.config.Alpha;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\n\n@ConfigGroup(\"specialattacktimers\")\npublic interface SpecialAttackTimersConfig extends Config\n{\n\t@Getter\n\t@RequiredArgsConstructor\n\tenum DisplayFormat\n\t{\n\t\tTICKS(\"Ticks\"),\n\t\tSECONDS(\"Seconds\"),\n\t\tDECIMALS(\"Decimals\");\n\n\t\tprivate final String name;\n\n\t\t@Override\n\t\tpublic String toString()\n\t\t{\n\t\t\treturn name;\n\t\t}\n\t}\n\n\t@ConfigSection(\n\t\tname \u003d \"Display\",\n\t\tdescription \u003d \"Overlay display settings\",\n\t\tposition \u003d 0\n\t)\n\tString displaySection \u003d \"display\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showInfoBox\",\n\t\tname \u003d \"Show InfoBox\",\n\t\tdescription \u003d \"Show the special attack timer infobox\",\n\t\tposition \u003d 1,\n\t\tsection \u003d displaySection\n\t)\n\tdefault boolean showInfoBox()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"displayFormat\",\n\t\tname \u003d \"Display Format\",\n\t\tdescription \u003d \"Ticks (game ticks), Seconds (whole), or Decimals (e.g. 29.4s)\",\n\t\tposition \u003d 2,\n\t\tsection \u003d displaySection\n\t)\n\tdefault DisplayFormat displayFormat()\n\t{\n\t\treturn DisplayFormat.TICKS;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showCircularOverlay\",\n\t\tname \u003d \"Show Circular Overlay\",\n\t\tdescription \u003d \"Show circular progress indicator on the spec orb (like Regeneration Meter)\",\n\t\tposition \u003d 3,\n\t\tsection \u003d displaySection\n\t)\n\tdefault boolean showCircularOverlay()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigSection(\n\t\tname \u003d \"Surge Potion Timer\",\n\t\tdescription \u003d \"Surge potion cooldown timer settings\",\n\t\tposition \u003d 5\n\t)\n\tString surgeSection \u003d \"surge\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showSurgeInfoBox\",\n\t\tname \u003d \"Show Surge Timer\",\n\t\tdescription \u003d \"Show the surge potion cooldown timer infobox\",\n\t\tposition \u003d 6,\n\t\tsection \u003d surgeSection\n\t)\n\tdefault boolean showSurgeInfoBox()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"surgeDisplayFormat\",\n\t\tname \u003d \"Surge Display Format\",\n\t\tdescription \u003d \"Ticks (game ticks), Seconds (whole), or Decimals (e.g. 29.4s)\",\n\t\tposition \u003d 7,\n\t\tsection \u003d surgeSection\n\t)\n\tdefault DisplayFormat surgeDisplayFormat()\n\t{\n\t\treturn DisplayFormat.SECONDS;\n\t}\n\n\t@ConfigSection(\n\t\tname \u003d \"Colors\",\n\t\tdescription \u003d \"Color settings for the overlay\",\n\t\tposition \u003d 10\n\t)\n\tString colorSection \u003d \"colors\";\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"activeColor\",\n\t\tname \u003d \"Infobox Color\",\n\t\tdescription \u003d \"Color for the spec regen timer infobox text\",\n\t\tposition \u003d 11,\n\t\tsection \u003d colorSection\n\t)\n\tdefault Color activeColor()\n\t{\n\t\treturn new Color(255, 255, 255, 255);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"circleColor\",\n\t\tname \u003d \"Circle Overlay Color\",\n\t\tdescription \u003d \"Color for the circular progress indicator on the spec orb\",\n\t\tposition \u003d 12,\n\t\tsection \u003d colorSection\n\t)\n\tdefault Color circleColor()\n\t{\n\t\treturn new Color(0, 255, 255, 255);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"surgeColor\",\n\t\tname \u003d \"Surge Active Color\",\n\t\tdescription \u003d \"Color for the surge potion cooldown timer when active (unpaused)\",\n\t\tposition \u003d 13,\n\t\tsection \u003d colorSection\n\t)\n\tdefault Color surgeColor()\n\t{\n\t\treturn new Color(255, 255, 255, 255);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"surgePausedColor\",\n\t\tname \u003d \"Surge Paused Color\",\n\t\tdescription \u003d \"Color for the surge potion cooldown timer when paused (between waves/rooms)\",\n\t\tposition \u003d 14,\n\t\tsection \u003d colorSection\n\t)\n\tdefault Color surgePausedColor()\n\t{\n\t\treturn new Color(255, 165, 0, 255);\n\t}\n}\n","filePath":"src\\main\\java\\com\\specialattacktimers\\SpecialAttackTimersConfig.java"},{"fileName":"SpecialAttackTimersInfoBox.java","content":"package com.specialattacktimers;\n\nimport java.awt.Color;\nimport net.runelite.client.ui.overlay.infobox.InfoBox;\n\n/**\n * InfoBox that displays the special attack regeneration timer as a simple tick count.\n * Shows \"Spec Regen Timer\" on hover.\n */\npublic class SpecialAttackTimersInfoBox extends InfoBox\n{\n\tprivate final SpecialAttackTimersPlugin plugin;\n\tprivate final SpecialAttackTimersConfig config;\n\n\tpublic SpecialAttackTimersInfoBox(SpecialAttackTimersPlugin plugin, SpecialAttackTimersConfig config)\n\t{\n\t\tsuper(null, plugin);\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t}\n\n\t@Override\n\tpublic String getText()\n\t{\n\t\t// Display tick 0 instead of max ticks (25 with LB, 50 without)\n\t\tint ticksUntilRegen \u003d plugin.getTicksUntilRegen();\n\t\tint displayTicks \u003d ticksUntilRegen \u003d\u003d plugin.getMaxRegenTicks() ? 0 : ticksUntilRegen;\n\n\t\tswitch (config.displayFormat())\n\t\t{\n\t\t\tcase SECONDS:\n\t\t\t\t// Whole seconds (rounded up so you know when regen will happen)\n\t\t\t\tint wholeSeconds \u003d (int) Math.ceil(displayTicks * 0.6);\n\t\t\t\treturn String.valueOf(wholeSeconds);\n\t\t\tcase DECIMALS:\n\t\t\t\t// Decimal seconds (e.g. 29.4s)\n\t\t\t\tdouble decimalSeconds \u003d displayTicks * 0.6;\n\t\t\t\treturn String.format(\"%.1fs\", decimalSeconds);\n\t\t\tcase TICKS:\n\t\t\tdefault:\n\t\t\t\treturn String.valueOf(displayTicks);\n\t\t}\n\t}\n\n\t@Override\n\tpublic Color getTextColor()\n\t{\n\t\treturn config.activeColor();\n\t}\n\n\t@Override\n\tpublic boolean render()\n\t{\n\t\t// Don\u0027t render if spec is full or between waves/delves (timer paused)\n\t\treturn !plugin.isSpecFull() \u0026\u0026 !plugin.isBetweenWaves();\n\t}\n\n\t@Override\n\tpublic String getTooltip()\n\t{\n\t\treturn \"Spec Regen Timer\";\n\t}\n}\n","filePath":"src\\main\\java\\com\\specialattacktimers\\SpecialAttackTimersInfoBox.java"},{"fileName":"SpecialAttackTimersPlugin.java","content":"package com.specialattacktimers;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport java.time.Duration;\nimport java.time.Instant;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\nimport java.util.Set;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.ItemContainer;\nimport net.runelite.api.ItemID;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.NPC;\nimport net.runelite.api.SpriteID;\nimport net.runelite.api.VarPlayer;\nimport net.runelite.api.Varbits;\nimport net.runelite.api.gameval.VarbitID;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.ItemContainerChanged;\nimport net.runelite.api.events.NpcChanged;\nimport net.runelite.api.events.NpcSpawned;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.game.SpriteManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.ui.overlay.infobox.InfoBoxManager;\nimport net.runelite.client.util.Text;\n\n/**\n * Special Attack Regen Timer Plugin for the Colosseum, Doom of Mokhaiotl, and Theatre of Blood.\n *\n * This plugin tracks special attack regeneration timing in content where the timer\n * pauses between encounters (waves/delves/rooms) and resets when a new encounter starts,\n * matching the game\u0027s behavior.\n * Supports Lightbearer ring which halves the regen time (25 ticks instead of 50).\n *\n * Colosseum transitions (via chat messages):\n * - \"Wave X completed!\": Wave finished, timer stops until next wave\n * - \"Wave: X\": New wave starting, timer resets to 30 seconds (or 15 with Lightbearer)\n * - \"Search the chest nearby\": Run over (claimed rewards), timer continues\n *\n * Doom of Mokhaiotl transitions:\n * - \"Delve level: X duration: ...\" or \"Delve level: 8+ (X+ duration: ...\" (chat): Delve finished, timer stops\n * - Boss NPC spawns: Timer resumes and resets (more accurate than chat message)\n *\n * Theatre of Blood transitions:\n * - \"Wave \u0027Room Name\u0027 (...) complete!\" (chat): Room finished, timer stops\n * - Room boss NPC spawns: Timer resumes and resets\n * - \"Theatre of Blood total completion time:\" (chat): Run completed, timer resumes\n *\n * The timer also resets whenever spec energy actually increases,\n * preventing drift between the overlay and actual game mechanics.\n */\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Special Attack Timers\",\n\tdescription \u003d \"Properly tracks special attack regeneration and surge potion cooldown in wave-based content (Colosseum, Doom of Mokhaiotl, Theatre of Blood)\",\n\ttags \u003d {\"colosseum\", \"special\", \"attack\", \"spec\", \"timer\", \"regen\", \"lightbearer\", \"doom\", \"mokhaiotl\", \"delve\", \"tob\", \"theatre\", \"blood\", \"surge\", \"potion\"}\n)\npublic class SpecialAttackTimersPlugin extends Plugin\n{\n\t/**\n\t * Pattern to match the wave start message in chat.\n\t * Matches \"Wave: 1\" through \"Wave: 12\".\n\t */\n\tprivate static final Pattern WAVE_START_PATTERN \u003d Pattern.compile(\"^Wave: (1[0-2]|[1-9])$\");\n\n\t/**\n\t * Pattern to match the wave completed message in chat.\n\t * Matches \"Wave 1 completed!\" through \"Wave 12 completed!\" (with duration info after).\n\t * This is when spec regen stops until the next wave.\n\t */\n\tprivate static final Pattern WAVE_COMPLETED_PATTERN \u003d Pattern.compile(\"^Wave (1[0-2]|[1-9]) completed!.*\");\n\n\t/**\n\t * Partial message that appears when the player claims rewards (run is over).\n\t * Spec regen continues normally after this.\n\t */\n\tprivate static final String CLAIM_REWARDS_MESSAGE \u003d \"Search the chest nearby\";\n\n\t/**\n\t * Region ID for Fortis Colosseum.\n\t * Used to detect when the player leaves the area to unpause timers.\n\t */\n\tprivate static final int COLOSSEUM_REGION_ID \u003d 7216;\n\n\t/**\n\t * Prefix for delve completed messages in Doom of Mokhaiotl.\n\t * Regular delves: \"Delve level: X duration: ...\"\n\t * Deep delves (8+): varies in format, but always starts with \"Delve level:\" and contains \"duration:\"\n\t * This is when spec regen stops. Timer resumes when the boss NPC spawns.\n\t */\n\tprivate static final String DELVE_COMPLETED_PREFIX \u003d \"Delve level:\";\n\tprivate static final String DELVE_DURATION_MARKER \u003d \"duration:\";\n\n\t/**\n\t * Region IDs for Doom of Mokhaiotl content.\n\t * Used to detect when the player leaves the area to unpause timers.\n\t * Includes the delve areas and boss room.\n\t */\n\tprivate static final Set\u003cInteger\u003e DOOM_REGION_IDS \u003d Set.of(\n\t\t13668,  // Doom area\n\t\t14180   // Doom area\n\t);\n\n\t/**\n\t * Doom exit tile coordinates.\n\t * When leaving Doom normally (not teleporting), the player arrives at this tile\n\t * in the hallway (region 5269). We check for this tile to unpause timers.\n\t */\n\tprivate static final int DOOM_EXIT_TILE_X \u003d 1311;\n\tprivate static final int DOOM_EXIT_TILE_Y \u003d 9556;\n\n\t/**\n\t * Message that appears when drinking a surge potion (restores 25% spec).\n\t * We need to ignore the spec increase from this to avoid resetting the timer.\n\t */\n\tprivate static final String SURGE_POTION_MESSAGE \u003d \"You drink some of your surge potion.\";\n\n\t/**\n\t * Message that appears when surge potion cooldown expires.\n\t * Used to clear the cooldown timer.\n\t */\n\tprivate static final String SURGE_COOLDOWN_EXPIRED_MESSAGE \u003d \"You now feel capable of drinking another dose of surge potion.\";\n\n\t/**\n\t * Spec energy restored by surge potion (25% \u003d 250 internal units).\n\t */\n\tprivate static final int SURGE_POTION_RESTORE \u003d 250;\n\n\t/**\n\t * Message that appears when Death Charge triggers (restores 15% spec on kill).\n\t * We need to ignore the spec increase from this to avoid resetting the timer.\n\t */\n\tprivate static final String DEATH_CHARGE_MESSAGE \u003d \"Some of your special attack energy has been restored\";\n\n\t/**\n\t * Spec energy restored by Death Charge (15% \u003d 150 internal units).\n\t */\n\tprivate static final int DEATH_CHARGE_RESTORE \u003d 150;\n\n\t/**\n\t * Surge potion cooldown duration in ticks (5 minutes \u003d 300 seconds \u003d 500 ticks).\n\t */\n\tprivate static final int SURGE_COOLDOWN_TICKS \u003d 500;\n\n\t/**\n\t * Surge potion cooldown duration (5 minutes).\n\t * Using wall-clock time for accurate display like RuneLite\u0027s timer system.\n\t */\n\tprivate static final Duration SURGE_COOLDOWN_DURATION \u003d Duration.ofMillis(SURGE_COOLDOWN_TICKS * 600L);\n\n\n\t// TOB\n\n\t/**\n\t * Pattern to match TOB room completion messages.\n\t * Matches \"Wave \u0027Room Name\u0027 (...) complete!\" for all rooms.\n\t * Group 1 captures the room name.\n\t */\n\tprivate static final Pattern TOB_ROOM_COMPLETED_PATTERN \u003d Pattern.compile(\"^Wave \u0027(.*)\u0027 \\\\(.*\\\\) complete!.*\");\n\n\t/**\n\t * Pattern to match TOB completion message (after Verzik).\n\t */\n\tprivate static final Pattern TOB_COMPLETION_PATTERN \u003d Pattern.compile(\"^Theatre of Blood total completion time:.*\");\n\n\t/**\n\t * Template region IDs for TOB boss rooms.\n\t * TOB is instanced, so we use WorldPoint.fromLocalInstance() to convert\n\t * the instanced coordinates to template region IDs.\n\t * Based on tob-qol plugin: https://github.com/damencs/tob-qol\n\t */\n\tprivate static final Set\u003cInteger\u003e TOB_BOSS_ROOM_REGIONS \u003d Set.of(\n\t\t12613,  // Maiden\n\t\t13125,  // Bloat\n\t\t13122,  // Nylocas\n\t\t13123,  // Sotetseg (boss room)\n\t\t13379,  // Sotetseg (maze)\n\t\t12612,  // Xarpus\n\t\t12611   // Verzik\n\t);\n\n\t/**\n\t * Bloat region ID (template). Bloat region includes a hallway before the combat area,\n\t * so we use coordinate-based detection instead of region-based for this room.\n\t */\n\tprivate static final int TOB_BLOAT_REGION \u003d 13125;\n\n\t/**\n\t * Bloat barrier tile coordinates (template coordinates).\n\t * The barrier tiles are at X \u003d 3303, Y \u003d 4446-4449.\n\t * Passing through these tiles (X \u003c\u003d 3303 at these Y values) means entering the combat area.\n\t */\n\tprivate static final int BLOAT_BARRIER_X \u003d 3303;\n\tprivate static final int BLOAT_BARRIER_MIN_Y \u003d 4446;\n\tprivate static final int BLOAT_BARRIER_MAX_Y \u003d 4449;\n\n\t/**\n\t * Nylocas region ID (template). Like Bloat, Nylocas has a hallway before combat area.\n\t */\n\tprivate static final int TOB_NYLOCAS_REGION \u003d 13122;\n\n\t/**\n\t * Nylocas barrier tile coordinates (template coordinates).\n\t * The barrier tiles are at X \u003d 3295-3296, Y \u003d 4254.\n\t */\n\tprivate static final int NYLOCAS_BARRIER_MIN_X \u003d 3295;\n\tprivate static final int NYLOCAS_BARRIER_MAX_X \u003d 3296;\n\tprivate static final int NYLOCAS_BARRIER_Y \u003d 4254;\n\n\t/**\n\t * Sotetseg region ID (template). Like Bloat/Nylocas, uses coordinate-based detection.\n\t */\n\tprivate static final int TOB_SOTETSEG_REGION \u003d 13123;\n\n\t/**\n\t * Sotetseg barrier tile coordinates (template coordinates).\n\t * The barrier tiles are at X \u003d 3278-3281, Y \u003d 4308.\n\t */\n\tprivate static final int SOTETSEG_BARRIER_MIN_X \u003d 3278;\n\tprivate static final int SOTETSEG_BARRIER_MAX_X \u003d 3281;\n\tprivate static final int SOTETSEG_BARRIER_Y \u003d 4308;\n\n\t/**\n\t * Xarpus region ID (template). Uses coordinate-based detection.\n\t */\n\tprivate static final int TOB_XARPUS_REGION \u003d 12612;\n\n\t/**\n\t * Xarpus barrier tile coordinates (template coordinates).\n\t * The barrier tiles are at X \u003d 3169-3171, Y \u003d 4380.\n\t */\n\tprivate static final int XARPUS_BARRIER_MIN_X \u003d 3169;\n\tprivate static final int XARPUS_BARRIER_MAX_X \u003d 3171;\n\tprivate static final int XARPUS_BARRIER_Y \u003d 4380;\n\n\t/**\n\t * Verzik P1 NPC IDs when the fight starts.\n\t * Verzik transforms into these IDs (doesn\u0027t spawn as them), so we use NpcChanged event.\n\t * 8370 \u003d Normal Mode P1, 10831 \u003d Entry Mode P1, 10848 \u003d Hard Mode P1.\n\t */\n\tprivate static final Set\u003cInteger\u003e VERZIK_FIGHT_START_NPC_IDS \u003d Set.of(8370, 10831, 10848);\n\n\t/**\n\t * TOB reward chest region ID (template).\n\t * Surge potion timer should be hidden when entering this region.\n\t */\n\tprivate static final int TOB_REWARD_REGION \u003d 12867;\n\n\t/**\n\t * Enum representing TOB rooms in order.\n\t * Used to track which room should be checked next for entry detection,\n\t * preventing re-triggering on the same tiles when leaving a room.\n\t */\n\t@Getter\n\t@RequiredArgsConstructor\n\tprivate enum TobRoom\n\t{\n\t\tMAIDEN(12613),\n\t\tBLOAT(13125),\n\t\tNYLOCAS(13122),\n\t\tSOTETSEG(13123),\n\t\tXARPUS(12612),\n\t\tVERZIK(12611),\n\t\tCOMPLETE(-1);\n\n\t\tprivate final int regionId;\n\n\t\t/**\n\t\t * Gets the next room in sequence.\n\t\t */\n\t\tpublic TobRoom next()\n\t\t{\n\t\t\tint nextOrdinal \u003d this.ordinal() + 1;\n\t\t\tTobRoom[] values \u003d TobRoom.values();\n\t\t\tif (nextOrdinal \u003e\u003d values.length)\n\t\t\t{\n\t\t\t\treturn COMPLETE;\n\t\t\t}\n\t\t\treturn values[nextOrdinal];\n\t\t}\n\t}\n\n\t/**\n\t * Special attack regenerates 10% every 30 seconds (50 game ticks).\n\t * Each game tick is 0.6 seconds.\n\t */\n\tpublic static final int SPEC_REGEN_TICKS \u003d 50;\n\n\t/**\n\t * With Lightbearer equipped, spec regenerates twice as fast (25 ticks).\n\t */\n\tpublic static final int LIGHTBEARER_REGEN_TICKS \u003d SPEC_REGEN_TICKS / 2;\n\n\t/**\n\t * Maximum special attack energy (displayed as 100%, stored as 1000 internally).\n\t */\n\tprivate static final int MAX_SPEC_ENERGY \u003d 1000;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate SpecialAttackTimersConfig config;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate SpecialAttackTimersCircleOverlay circleOverlay;\n\n\t@Inject\n\tprivate InfoBoxManager infoBoxManager;\n\n\t@Inject\n\tprivate SpriteManager spriteManager;\n\n\t@Inject\n\tprivate ItemManager itemManager;\n\n\t/**\n\t * The infobox instance, created when useInfoBox config is enabled.\n\t */\n\tprivate SpecialAttackTimersInfoBox infoBox;\n\n\t/**\n\t * Whether we are currently between waves/delves (Colosseum or Doom of Mokhaiotl).\n\t * When true, the spec regen timer is stopped and will reset when the next encounter starts.\n\t */\n\t@Getter\n\tprivate boolean betweenWaves \u003d false;\n\n\t/**\n\t * Ticks remaining until the next spec regen tick.\n\t * Counts down from SPEC_REGEN_TICKS (50) to 0, then resets.\n\t */\n\t@Getter\n\tprivate int ticksUntilRegen \u003d SPEC_REGEN_TICKS;\n\n\t/**\n\t * Last known special attack energy value (0-1000).\n\t * Used to detect when spec has regenerated or been used.\n\t */\n\tprivate int lastSpecEnergy \u003d -1;\n\n\t/**\n\t * Whether the player is wearing a Lightbearer ring.\n\t * When true, spec regenerates twice as fast (25 ticks instead of 50).\n\t */\n\t@Getter\n\tprivate boolean wearingLightbearer \u003d false;\n\n\t/**\n\t * Game tick until which spec increases should be ignored (for surge potion, death charge, etc.).\n\t * Set to client.getTickCount() + 2 when a spec restore message is detected.\n\t * A value of -1 means no grace period is active.\n\t */\n\tprivate int ignoreSpecIncreaseUntilTick \u003d -1;\n\n\t/**\n\t * Expected spec restore amount from the detected effect (surge potion or death charge).\n\t * Used to detect if natural regen also occurred during the grace period.\n\t */\n\tprivate int expectedSpecRestoreAmount \u003d 0;\n\n\t/**\n\t * Whether the player is currently inside Theatre of Blood.\n\t * Used to determine if TOB room detection should be active.\n\t */\n\tprivate boolean insideTob \u003d false;\n\n\t/**\n\t * Whether the player is currently inside Doom of Mokhaiotl.\n\t * Used to detect when the player leaves to unpause timers.\n\t */\n\tprivate boolean insideDoom \u003d false;\n\n\t/**\n\t * Whether the player is currently inside Fortis Colosseum.\n\t * Used to detect when the player leaves to unpause timers.\n\t */\n\tprivate boolean insideColosseum \u003d false;\n\n\t/**\n\t * Whether the player is currently between TOB rooms.\n\t * Used to pause the surge cooldown timer (but not spec regen).\n\t */\n\tprivate boolean tobBetweenRooms \u003d false;\n\n\t/**\n\t * Last known region ID, used to detect room transitions in TOB.\n\t */\n\tprivate int lastRegionId \u003d -1;\n\n\t/**\n\t * Whether we have already triggered combat area entry for the current room.\n\t * Prevents re-triggering after room completion while still in the same region.\n\t * Reset when entering a new region or when a room completes.\n\t */\n\tprivate boolean combatAreaEnteredThisRoom \u003d false;\n\n\t/**\n\t * The next TOB room we\u0027re expecting to enter.\n\t * Only coordinate/NPC spawn checks for this room will unpause the timer.\n\t * This prevents re-triggering when walking back over previous room\u0027s entry tiles.\n\t */\n\tprivate TobRoom nextExpectedTobRoom \u003d TobRoom.MAIDEN;\n\n\t/**\n\t * Wall-clock time when the surge potion cooldown ends.\n\t * Null when no cooldown is active or when paused.\n\t */\n\tprivate Instant surgeEndTime \u003d null;\n\n\t/**\n\t * Remaining surge cooldown duration when paused (between waves/rooms).\n\t * Null when not paused or no cooldown is active.\n\t */\n\tprivate Duration surgePausedRemaining \u003d null;\n\n\t/**\n\t * The surge potion cooldown infobox instance.\n\t */\n\tprivate SurgePotionInfoBox surgeInfoBox;\n\n\t/**\n\t * Last known value of the surge potion varbit.\n\t * Used to detect when the game clears the cooldown (varbit goes to 0).\n\t */\n\tprivate int lastSurgeVarbitValue \u003d 0;\n\n\t/**\n\t * Flag to force syncing with the next varbit update.\n\t * Set when resuming from pause, as the varbit might update to the correct\n\t * value shortly after the wave/room starts.\n\t */\n\tprivate boolean surgeNeedsVarbitSync \u003d false;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tlog.debug(\"Special Attack Timers plugin started\");\n\t\toverlayManager.add(circleOverlay);\n\t\tupdateInfoBox();\n\t\tupdateSurgeInfoBox();\n\t\tresetState();\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tlog.debug(\"Special Attack Timers plugin stopped\");\n\t\toverlayManager.remove(circleOverlay);\n\t\tremoveInfoBox();\n\t\tremoveSurgeInfoBox();\n\t\tresetState();\n\t}\n\n\t/**\n\t * Updates the infobox visibility based on config.\n\t */\n\tprivate void updateInfoBox()\n\t{\n\t\tif (config.showInfoBox())\n\t\t{\n\t\t\taddInfoBox();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tremoveInfoBox();\n\t\t}\n\t}\n\n\t/**\n\t * Creates and adds the infobox if it doesn\u0027t exist.\n\t * Uses async sprite loading to ensure the image is available before adding.\n\t */\n\tprivate void addInfoBox()\n\t{\n\t\tif (infoBox \u003d\u003d null)\n\t\t{\n\t\t\tinfoBox \u003d new SpecialAttackTimersInfoBox(this, config);\n\t\t\t// Load the sprite asynchronously - only add to manager once image is ready\n\t\t\tspriteManager.getSpriteAsync(SpriteID.MINIMAP_ORB_SPECIAL_ICON, 0, img -\u003e\n\t\t\t{\n\t\t\t\tif (img !\u003d null \u0026\u0026 infoBox !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tinfoBox.setImage(img);\n\t\t\t\t\tinfoBoxManager.addInfoBox(infoBox);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Removes the infobox if it exists.\n\t */\n\tprivate void removeInfoBox()\n\t{\n\t\tif (infoBox !\u003d null)\n\t\t{\n\t\t\tinfoBoxManager.removeInfoBox(infoBox);\n\t\t\tinfoBox \u003d null;\n\t\t}\n\t}\n\n\t/**\n\t * Updates the surge infobox visibility based on config.\n\t */\n\tprivate void updateSurgeInfoBox()\n\t{\n\t\tif (config.showSurgeInfoBox())\n\t\t{\n\t\t\taddSurgeInfoBox();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tremoveSurgeInfoBox();\n\t\t}\n\t}\n\n\t/**\n\t * Creates and adds the surge infobox if it doesn\u0027t exist.\n\t * Uses the surge potion item image.\n\t */\n\tprivate void addSurgeInfoBox()\n\t{\n\t\tif (surgeInfoBox \u003d\u003d null)\n\t\t{\n\t\t\tsurgeInfoBox \u003d new SurgePotionInfoBox(this, config);\n\t\t\t// Use surge potion item image\n\t\t\tsurgeInfoBox.setImage(itemManager.getImage(ItemID.SURGE_POTION1));\n\t\t\tinfoBoxManager.addInfoBox(surgeInfoBox);\n\t\t}\n\t}\n\n\t/**\n\t * Removes the surge infobox if it exists.\n\t */\n\tprivate void removeSurgeInfoBox()\n\t{\n\t\tif (surgeInfoBox !\u003d null)\n\t\t{\n\t\t\tinfoBoxManager.removeInfoBox(surgeInfoBox);\n\t\t\tsurgeInfoBox \u003d null;\n\t\t}\n\t}\n\n\t/**\n\t * Resets all tracking state to initial values.\n\t * Called on startup, shutdown, and login/logout transitions.\n\t */\n\tprivate void resetState()\n\t{\n\t\tbetweenWaves \u003d false;\n\t\tticksUntilRegen \u003d SPEC_REGEN_TICKS;\n\t\tlastSpecEnergy \u003d -1;\n\t\twearingLightbearer \u003d false;\n\t\tignoreSpecIncreaseUntilTick \u003d -1;\n\t\texpectedSpecRestoreAmount \u003d 0;\n\t\tinsideTob \u003d false;\n\t\tinsideDoom \u003d false;\n\t\tinsideColosseum \u003d false;\n\t\ttobBetweenRooms \u003d false;\n\t\tlastRegionId \u003d -1;\n\t\tcombatAreaEnteredThisRoom \u003d false;\n\t\tnextExpectedTobRoom \u003d TobRoom.MAIDEN;\n\t\tsurgeEndTime \u003d null;\n\t\tsurgePausedRemaining \u003d null;\n\t\tlastSurgeVarbitValue \u003d 0;\n\t\tsurgeNeedsVarbitSync \u003d false;\n\t}\n\n\t@Provides\n\tSpecialAttackTimersConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(SpecialAttackTimersConfig.class);\n\t}\n\n\t/**\n\t * Handles config changes to toggle infobox visibility.\n\t */\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif (!\"specialattacktimers\".equals(event.getGroup()))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (\"showInfoBox\".equals(event.getKey()))\n\t\t{\n\t\t\tupdateInfoBox();\n\t\t}\n\t\telse if (\"showSurgeInfoBox\".equals(event.getKey()))\n\t\t{\n\t\t\tupdateSurgeInfoBox();\n\t\t}\n\t}\n\n\t/**\n\t * Handles game state changes (login, logout, hopping).\n\t * Resets state when transitioning to avoid stale data.\n\t */\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged event)\n\t{\n\t\tGameState state \u003d event.getGameState();\n\n\t\t// Reset state on logout or hopping to prevent carrying stale data\n\t\tif (state \u003d\u003d GameState.LOGIN_SCREEN || state \u003d\u003d GameState.HOPPING)\n\t\t{\n\t\t\tresetState();\n\t\t}\n\t\telse if (state \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\t// Initialize lastSpecEnergy on login\n\t\t\tlastSpecEnergy \u003d getSpecEnergy();\n\t\t\t// Note: Surge timer initialization is handled in onVarbitChanged,\n\t\t\t// which fires after LOGGED_IN once varbits are loaded from the server\n\t\t}\n\t}\n\n\t/**\n\t * Handles varbit changes to detect entering/leaving Theatre of Blood\n\t * and surge potion cooldown state changes.\n\t * TOB varbit is 2 or 3 when inside, other values when outside.\n\t * Surge varbit (2386) tracks the cooldown server-side; syncs our timer on changes.\n\t */\n\t@Subscribe\n\tpublic void onVarbitChanged(VarbitChanged event)\n\t{\n\t\t// Check for surge potion varbit changes\n\t\t// This syncs our manual timer with the game state (handles login, death, world hop, etc.)\n\t\tif (event.getVarbitId() \u003d\u003d VarbitID.SURGE_POTION_TIMER)\n\t\t{\n\t\t\tint newValue \u003d event.getValue();\n\t\t\tif (newValue \u003e 0)\n\t\t\t{\n\t\t\t\t// Varbit has a positive value - start/update surge timer\n\t\t\t\t// This handles login with existing cooldown, as varbits fire after LOGGED_IN\n\t\t\t\tint remainingTicks \u003d newValue * 10;\n\t\t\t\tDuration remainingDuration \u003d Duration.ofMillis(remainingTicks * 600L);\n\n\t\t\t\t// Update timer if:\n\t\t\t\t// 1. surgeNeedsVarbitSync is true (just resumed, need to sync with game)\n\t\t\t\t// 2. No timer exists OR new duration is longer than current\n\t\t\t\t//    (handles login where varbit may fire multiple times with increasing values)\n\t\t\t\tDuration currentRemaining \u003d getSurgeCooldownRemaining();\n\t\t\t\tboolean shouldSync \u003d surgeNeedsVarbitSync || remainingDuration.compareTo(currentRemaining) \u003e 0;\n\t\t\t\tlog.debug(\"Surge varbit changed: value\u003d{}, ticks\u003d{}, duration\u003d{}, currentRemaining\u003d{}, paused\u003d{}, needsSync\u003d{}, shouldSync\u003d{}\",\n\t\t\t\t\tnewValue, remainingTicks, remainingDuration, currentRemaining, surgePausedRemaining !\u003d null, surgeNeedsVarbitSync, shouldSync);\n\n\t\t\t\tif (shouldSync)\n\t\t\t\t{\n\t\t\t\t\tif (betweenWaves || tobBetweenRooms)\n\t\t\t\t\t{\n\t\t\t\t\t\t// Start in paused state\n\t\t\t\t\t\tsurgePausedRemaining \u003d remainingDuration;\n\t\t\t\t\t\tsurgeEndTime \u003d null;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tsurgeEndTime \u003d Instant.now().plus(remainingDuration);\n\t\t\t\t\t\tsurgePausedRemaining \u003d null;\n\t\t\t\t\t}\n\t\t\t\t\tupdateSurgeInfoBox();\n\t\t\t\t\tsurgeNeedsVarbitSync \u003d false;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (lastSurgeVarbitValue \u003e 0)\n\t\t\t{\n\t\t\t\t// Cooldown was cleared by the game (death, expiration, etc.)\n\t\t\t\t// Clear our manual timer to stay in sync\n\t\t\t\tlog.debug(\"Surge varbit cleared by game (was {}, now 0), clearing manual timer\", lastSurgeVarbitValue);\n\t\t\t\tclearSurgeCooldown();\n\t\t\t\tremoveSurgeInfoBox();\n\t\t\t}\n\t\t\tlastSurgeVarbitValue \u003d newValue;\n\t\t}\n\n\t\t// Check for TOB entry/exit\n\t\tint tobVar \u003d client.getVarbitValue(Varbits.THEATRE_OF_BLOOD);\n\t\tboolean nowInsideTob \u003d tobVar \u003d\u003d 2 || tobVar \u003d\u003d 3;\n\n\t\tif (nowInsideTob !\u003d insideTob)\n\t\t{\n\t\t\tinsideTob \u003d nowInsideTob;\n\n\t\t\tif (insideTob)\n\t\t\t{\n\t\t\t\t// Entered TOB - check if already in a boss room\n\t\t\t\t// Use template region ID for instanced content\n\t\t\t\tint currentRegion \u003d getTemplateRegionId();\n\n\t\t\t\tif (TOB_BOSS_ROOM_REGIONS.contains(currentRegion))\n\t\t\t\t{\n\t\t\t\t\t// Already in a boss room, don\u0027t pause\n\t\t\t\t\ttobBetweenRooms \u003d false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t// In lobby/transition area, pause until room entry\n\t\t\t\t\ttobBetweenRooms \u003d true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// Left TOB, reset state for next raid\n\t\t\t\ttobBetweenRooms \u003d false;\n\t\t\t\tnextExpectedTobRoom \u003d TobRoom.MAIDEN;\n\t\t\t}\n\t\t\tupdateSurgePauseState();\n\t\t}\n\t}\n\n\t/**\n\t * Handles equipment changes to detect Lightbearer ring.\n\t * When Lightbearer is equipped/unequipped, adjusts the timer appropriately.\n\t */\n\t@Subscribe\n\tpublic void onItemContainerChanged(ItemContainerChanged event)\n\t{\n\t\tif (event.getContainerId() !\u003d InventoryID.EQUIPMENT.getId())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tItemContainer equipment \u003d event.getItemContainer();\n\t\tfinal boolean hasLightbearer \u003d equipment.contains(ItemID.LIGHTBEARER);\n\n\t\tif (hasLightbearer \u003d\u003d wearingLightbearer)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (hasLightbearer)\n\t\t{\n\t\t\t// Equipping Lightbearer: cap timer at 25 ticks (preserve progress if close to regen)\n\t\t\tticksUntilRegen \u003d Math.min(ticksUntilRegen, LIGHTBEARER_REGEN_TICKS);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Unequipping Lightbearer: reset to full 50 tick cycle\n\t\t\tticksUntilRegen \u003d SPEC_REGEN_TICKS;\n\t\t}\n\n\t\twearingLightbearer \u003d hasLightbearer;\n\t}\n\n\t/**\n\t * Detects when boss NPCs spawn to resume timers.\n\t * Handles Doom of Mokhaiotl spec regen timer.\n\t * Uses getMaxRegenTicks() - 2 for Doom because the game\u0027s internal timer starts\n\t * 2 ticks before the NPC spawn event fires.\n\t */\n\t@Subscribe\n\tpublic void onNpcSpawned(NpcSpawned event)\n\t{\n\t\tNPC npc \u003d event.getNpc();\n\t\tString name \u003d npc.getName();\n\n\t\t// Doom of Mokhaiotl boss spawn - resumes spec regen timer\n\t\tif (name !\u003d null \u0026\u0026 name.contains(\"Doom\"))\n\t\t{\n\t\t\tlog.debug(\"Doom boss \u0027{}\u0027 spawned - resuming timers. Surge paused remaining: {}\", name, surgePausedRemaining);\n\t\t\tbetweenWaves \u003d false;\n\t\t\tticksUntilRegen \u003d getMaxRegenTicks() - 2;\n\t\t\tupdateSurgePauseState();\n\t\t}\n\t}\n\n\t/**\n\t * Detects when Verzik transforms to her fighting form.\n\t * Verzik doesn\u0027t spawn as her fight NPC ID - she transforms into it.\n\t * This handles Entry Mode (10831), Normal Mode (8370), and Hard Mode (10848).\n\t */\n\t@Subscribe\n\tpublic void onNpcChanged(NpcChanged event)\n\t{\n\t\tNPC npc \u003d event.getNpc();\n\n\t\t// Verzik fight start - NPC transforms when the fight begins\n\t\t// Only trigger if Verzik is the next expected room\n\t\tif (VERZIK_FIGHT_START_NPC_IDS.contains(npc.getId())\n\t\t\t\u0026\u0026 nextExpectedTobRoom \u003d\u003d TobRoom.VERZIK\n\t\t\t\u0026\u0026 tobBetweenRooms\n\t\t\t\u0026\u0026 !combatAreaEnteredThisRoom)\n\t\t{\n\t\t\tlog.debug(\"Verzik NPC {} transformed (fight started), unpausing timer\", npc.getId());\n\t\t\ttobBetweenRooms \u003d false;\n\t\t\tcombatAreaEnteredThisRoom \u003d true;\n\t\t\tupdateSurgePauseState();\n\t\t}\n\t}\n\n\t/**\n\t * Handles chat messages to detect wave/delve transitions.\n\t * Colosseum:\n\t * - \"Wave X completed!\": Wave finished, timer stops\n\t * - \"Wave: X\" (1-12): Wave starting, timer resets to 30 seconds\n\t * - \"Search the chest...\": Run over (claimed rewards), timer continues\n\t * Doom of Mokhaiotl:\n\t * - \"Delve level: X duration: ...\" or \"Delve level: 8+ (X+ duration: ...\": Delve finished, timer stops\n\t * - \"Delve level: X\": New delve starting, timer resets\n\t */\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage event)\n\t{\n\t\t// Guard: Only process when logged in\n\t\tif (client.getGameState() !\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// Check GAMEMESSAGE for wave/reward announcements and death charge,\n\t\t// and SPAM for surge potion messages\n\t\tChatMessageType type \u003d event.getType();\n\t\tif (type !\u003d ChatMessageType.GAMEMESSAGE \u0026\u0026 type !\u003d ChatMessageType.SPAM)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tString message \u003d event.getMessage();\n\t\tif (message \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// Strip color tags from the message (e.g., \"\u003ccol\u003dff3045\u003eWave: 1\u003c/col\u003e\" -\u003e \"Wave: 1\")\n\t\tString strippedMessage \u003d Text.removeTags(message);\n\n\t\t// Colo Checks\n\n\t\t// Check if wave was completed - this is when spec regen stops\n\t\tif (WAVE_COMPLETED_PATTERN.matcher(strippedMessage).matches())\n\t\t{\n\t\t\tinsideColosseum \u003d true; // Ensure we track that we\u0027re in Colosseum\n\t\t\tbetweenWaves \u003d true;\n\t\t\tupdateSurgePauseState();\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if this is a wave start message - resume timer and reset to full cycle\n\t\tif (WAVE_START_PATTERN.matcher(strippedMessage).matches())\n\t\t{\n\t\t\tbetweenWaves \u003d false;\n\t\t\tticksUntilRegen \u003d getMaxRegenTicks();\n\t\t\tupdateSurgePauseState();\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if the run is over (player claimed rewards) - timer continues\n\t\tif (strippedMessage.contains(CLAIM_REWARDS_MESSAGE))\n\t\t{\n\t\t\tbetweenWaves \u003d false;\n\t\t\tupdateSurgePauseState();\n\t\t\treturn;\n\t\t}\n\n\t\t// Doom Checks\n\n\t\t// Log any Delve-related messages for debugging\n\t\tif (strippedMessage.contains(\"Delve\") || strippedMessage.contains(\"delve\"))\n\t\t{\n\t\t\tlog.debug(\"Doom-related message received: \u0027{}\u0027\", strippedMessage);\n\t\t}\n\n\t\t// Check if delve was completed - this is when spec regen stops\n\t\t// Timer resumes when the boss NPC spawns (handled in onNpcSpawned)\n\t\t// Matches any message starting with \"Delve level:\" and containing \"duration:\"\n\t\t// This handles both regular delves and deep delves (8+) regardless of format\n\t\tif (strippedMessage.startsWith(DELVE_COMPLETED_PREFIX) \u0026\u0026 strippedMessage.contains(DELVE_DURATION_MARKER))\n\t\t{\n\t\t\tinsideDoom \u003d true; // Ensure we track that we\u0027re in Doom\n\t\t\tbetweenWaves \u003d true;\n\t\t\tlog.debug(\"Doom delve completed - PAUSING timers. Message: \u0027{}\u0027, Surge remaining before pause: {}\",\n\t\t\t\tstrippedMessage, getSurgeCooldownRemaining());\n\t\t\tupdateSurgePauseState();\n\t\t\treturn;\n\t\t}\n\n\t\t// TOB Checks\n\t\t// Check if TOB room was completed - this is when surge cooldown pauses\n\t\t// Timer resumes when entering the next room\u0027s combat area\n\t\tMatcher tobMatcher \u003d TOB_ROOM_COMPLETED_PATTERN.matcher(strippedMessage);\n\t\tif (tobMatcher.matches())\n\t\t{\n\t\t\tinsideTob \u003d true; // Ensure we track that we\u0027re in TOB\n\t\t\ttobBetweenRooms \u003d true;\n\t\t\t// Advance to the next expected room based on which room was completed\n\t\t\tString roomName \u003d tobMatcher.group(1);\n\t\t\tadvanceToNextTobRoom(roomName);\n\t\t\tupdateSurgePauseState();\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if TOB run was completed (after Verzik) - surge cooldown resumes\n\t\tif (TOB_COMPLETION_PATTERN.matcher(strippedMessage).matches())\n\t\t{\n\t\t\ttobBetweenRooms \u003d false;\n\t\t\tupdateSurgePauseState();\n\t\t\treturn;\n\t\t}\n\n\t\t// Spec restore checks (surge potion, death charge)\n\n\t\t// Detect spec restores to ignore the spec increase and not reset the timer.\n\t\t// Use a 2-tick grace period to handle event ordering (onGameTick may fire before onChatMessage).\n\t\tif (strippedMessage.equals(SURGE_POTION_MESSAGE))\n\t\t{\n\t\t\tignoreSpecIncreaseUntilTick \u003d client.getTickCount() + 2;\n\t\t\texpectedSpecRestoreAmount \u003d SURGE_POTION_RESTORE;\n\t\t\t// Start surge cooldown timer (5 minutes) using wall-clock time\n\t\t\tstartSurgeCooldown();\n\t\t\treturn;\n\t\t}\n\n\t\tif (strippedMessage.contains(DEATH_CHARGE_MESSAGE))\n\t\t{\n\t\t\tignoreSpecIncreaseUntilTick \u003d client.getTickCount() + 2;\n\t\t\texpectedSpecRestoreAmount \u003d DEATH_CHARGE_RESTORE;\n\t\t\treturn;\n\t\t}\n\n\t\t// Detect surge cooldown expiry to clear the timer\n\t\tif (strippedMessage.equals(SURGE_COOLDOWN_EXPIRED_MESSAGE))\n\t\t{\n\t\t\tclearSurgeCooldown();\n\t\t\tremoveSurgeInfoBox();\n\t\t\treturn;\n\t\t}\n\t}\n\n\t/**\n\t * Main timer logic executed every game tick.\n\t * Handles spec regen countdown and detects actual spec changes.\n\t */\n\t@Subscribe\n\tpublic void onGameTick(GameTick event)\n\t{\n\t\t// Guard: Only process when logged in\n\t\tif (client.getGameState() !\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tint currentSpec \u003d getSpecEnergy();\n\n\t\t// Detect if spec has regenerated - reset timer to prevent drift\n\t\t// But ignore if spec was restored by an effect (surge potion, death charge, etc.)\n\t\tif (lastSpecEnergy !\u003d -1 \u0026\u0026 currentSpec \u003e lastSpecEnergy)\n\t\t{\n\t\t\tint currentTick \u003d client.getTickCount();\n\t\t\tint actualIncrease \u003d currentSpec - lastSpecEnergy;\n\t\t\tint maxPossibleIncrease \u003d MAX_SPEC_ENERGY - lastSpecEnergy;\n\t\t\tboolean inGracePeriod \u003d currentTick \u003c\u003d ignoreSpecIncreaseUntilTick;\n\n\t\t\t// Check if natural regen also occurred alongside the effect\n\t\t\t// Natural regen would cause the increase to exceed the expected effect amount\n\t\t\t// (unless capped at max spec)\n\t\t\tboolean naturalRegenAlsoOccurred \u003d inGracePeriod\n\t\t\t\t\u0026\u0026 actualIncrease \u003e expectedSpecRestoreAmount\n\t\t\t\t\u0026\u0026 actualIncrease \u003c\u003d maxPossibleIncrease;\n\n\t\t\tif (inGracePeriod \u0026\u0026 !naturalRegenAlsoOccurred)\n\t\t\t{\n\t\t\t\t// Spec increased only from an effect, not natural regen - don\u0027t reset timer\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// Natural spec regen occurred - reset timer\n\t\t\t\tticksUntilRegen \u003d getMaxRegenTicks();\n\n\t\t\t\t// Self-correction: if we were paused but spec is regenerating,\n\t\t\t\t// the player must have left the wave-based content (teleported out, etc.)\n\t\t\t\t// Unpause both the spec timer and surge timer.\n\t\t\t\tif (betweenWaves)\n\t\t\t\t{\n\t\t\t\t\tbetweenWaves \u003d false;\n\t\t\t\t\tupdateSurgePauseState();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlastSpecEnergy \u003d currentSpec;\n\n\t\t// Spec regen timer countdown\n\t\t// Don\u0027t count down if spec is full or if between waves (stopped)\n\t\tif (currentSpec \u003e\u003d MAX_SPEC_ENERGY)\n\t\t{\n\t\t\tticksUntilRegen \u003d getMaxRegenTicks();\n\t\t}\n\t\telse if (betweenWaves)\n\t\t{\n\t\t\t// Spec timer is stopped between waves - do not decrement\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Count down the spec regen timer\n\t\t\tticksUntilRegen--;\n\t\t\tif (ticksUntilRegen \u003c\u003d 0)\n\t\t\t{\n\t\t\t\t// Timer expired, expect regen next tick - reset for next cycle\n\t\t\t\tticksUntilRegen \u003d getMaxRegenTicks();\n\t\t\t}\n\t\t}\n\n\t\t// Region-based detection for Colosseum, Doom of Mokhaiotl, and TOB\n\t\tint currentRegion \u003d getTemplateRegionId();\n\t\tif (currentRegion !\u003d -1 \u0026\u0026 currentRegion !\u003d lastRegionId)\n\t\t{\n\t\t\t// Reset combat area flag when entering a new region\n\t\t\tcombatAreaEnteredThisRoom \u003d false;\n\n\t\t\t// Doom of Mokhaiotl: detect leaving the area to unpause timers\n\t\t\tboolean nowInDoom \u003d DOOM_REGION_IDS.contains(currentRegion);\n\t\t\tif (insideDoom \u0026\u0026 !nowInDoom \u0026\u0026 betweenWaves)\n\t\t\t{\n\t\t\t\t// Left Doom while paused - unpause both spec and surge timers\n\t\t\t\tbetweenWaves \u003d false;\n\t\t\t\tupdateSurgePauseState();\n\t\t\t}\n\t\t\tinsideDoom \u003d nowInDoom;\n\n\t\t\t// Fortis Colosseum: detect leaving the area to unpause timers\n\t\t\tboolean nowInColosseum \u003d currentRegion \u003d\u003d COLOSSEUM_REGION_ID;\n\t\t\tif (insideColosseum \u0026\u0026 !nowInColosseum \u0026\u0026 betweenWaves)\n\t\t\t{\n\t\t\t\t// Left Colosseum while paused - unpause both spec and surge timers\n\t\t\t\tbetweenWaves \u003d false;\n\t\t\t\tupdateSurgePauseState();\n\t\t\t}\n\t\t\tinsideColosseum \u003d nowInColosseum;\n\n\t\t\t// Clear surge timer and reset TOB state when entering reward room\n\t\t\tif (currentRegion \u003d\u003d TOB_REWARD_REGION)\n\t\t\t{\n\t\t\t\tclearSurgeCooldown();\n\t\t\t\ttobBetweenRooms \u003d false;\n\t\t\t\tnextExpectedTobRoom \u003d TobRoom.MAIDEN; // Reset for next raid\n\t\t\t}\n\t\t\t// Maiden uses pure region-based detection\n\t\t\t// Only trigger if Maiden is the next expected room\n\t\t\telse if (tobBetweenRooms\n\t\t\t\t\u0026\u0026 nextExpectedTobRoom \u003d\u003d TobRoom.MAIDEN\n\t\t\t\t\u0026\u0026 currentRegion \u003d\u003d TobRoom.MAIDEN.getRegionId())\n\t\t\t{\n\t\t\t\ttobBetweenRooms \u003d false;\n\t\t\t\tcombatAreaEnteredThisRoom \u003d true;\n\t\t\t\tupdateSurgePauseState();\n\t\t\t}\n\t\t\tlastRegionId \u003d currentRegion;\n\t\t}\n\n\t\t// Doom exit tile detection - when leaving Doom normally (not teleporting),\n\t\t// the player arrives at this specific tile in the hallway\n\t\tif (betweenWaves \u0026\u0026 client.getLocalPlayer() !\u003d null)\n\t\t{\n\t\t\tWorldPoint playerLocation \u003d client.getLocalPlayer().getWorldLocation();\n\t\t\tif (playerLocation.getX() \u003d\u003d DOOM_EXIT_TILE_X \u0026\u0026 playerLocation.getY() \u003d\u003d DOOM_EXIT_TILE_Y)\n\t\t\t{\n\t\t\t\tbetweenWaves \u003d false;\n\t\t\t\tinsideDoom \u003d false;\n\t\t\t\tupdateSurgePauseState();\n\t\t\t}\n\t\t}\n\n\t\t// Coordinate-based detection for TOB rooms (Bloat, Nylocas, Sotetseg, Xarpus)\n\t\t// Only check for the next expected room to prevent re-triggering on previous room tiles\n\t\tif (tobBetweenRooms \u0026\u0026 !combatAreaEnteredThisRoom)\n\t\t{\n\t\t\tWorldPoint templatePoint \u003d getTemplateWorldPoint();\n\t\t\tif (templatePoint !\u003d null)\n\t\t\t{\n\t\t\t\tint x \u003d templatePoint.getX();\n\t\t\t\tint y \u003d templatePoint.getY();\n\t\t\t\tboolean enteredCombatArea \u003d false;\n\n\t\t\t\t// Only check for entry to the next expected room\n\t\t\t\t// Bloat: barrier at X\u003d3303, Y\u003d4446-4449\n\t\t\t\tif (nextExpectedTobRoom \u003d\u003d TobRoom.BLOAT \u0026\u0026 currentRegion \u003d\u003d TOB_BLOAT_REGION)\n\t\t\t\t{\n\t\t\t\t\tenteredCombatArea \u003d x \u003c\u003d BLOAT_BARRIER_X\n\t\t\t\t\t\t\u0026\u0026 y \u003e\u003d BLOAT_BARRIER_MIN_Y\n\t\t\t\t\t\t\u0026\u0026 y \u003c\u003d BLOAT_BARRIER_MAX_Y;\n\t\t\t\t}\n\t\t\t\t// Nylocas: barrier at X\u003d3295-3296, Y\u003d4254\n\t\t\t\telse if (nextExpectedTobRoom \u003d\u003d TobRoom.NYLOCAS \u0026\u0026 currentRegion \u003d\u003d TOB_NYLOCAS_REGION)\n\t\t\t\t{\n\t\t\t\t\tenteredCombatArea \u003d x \u003e\u003d NYLOCAS_BARRIER_MIN_X\n\t\t\t\t\t\t\u0026\u0026 x \u003c\u003d NYLOCAS_BARRIER_MAX_X\n\t\t\t\t\t\t\u0026\u0026 y \u003d\u003d NYLOCAS_BARRIER_Y;\n\t\t\t\t}\n\t\t\t\t// Sotetseg: barrier at X\u003d3278-3281, Y\u003d4308\n\t\t\t\telse if (nextExpectedTobRoom \u003d\u003d TobRoom.SOTETSEG \u0026\u0026 currentRegion \u003d\u003d TOB_SOTETSEG_REGION)\n\t\t\t\t{\n\t\t\t\t\tenteredCombatArea \u003d x \u003e\u003d SOTETSEG_BARRIER_MIN_X\n\t\t\t\t\t\t\u0026\u0026 x \u003c\u003d SOTETSEG_BARRIER_MAX_X\n\t\t\t\t\t\t\u0026\u0026 y \u003d\u003d SOTETSEG_BARRIER_Y;\n\t\t\t\t}\n\t\t\t\t// Xarpus: barrier at X\u003d3169-3171, Y\u003d4380\n\t\t\t\telse if (nextExpectedTobRoom \u003d\u003d TobRoom.XARPUS \u0026\u0026 currentRegion \u003d\u003d TOB_XARPUS_REGION)\n\t\t\t\t{\n\t\t\t\t\tenteredCombatArea \u003d x \u003e\u003d XARPUS_BARRIER_MIN_X\n\t\t\t\t\t\t\u0026\u0026 x \u003c\u003d XARPUS_BARRIER_MAX_X\n\t\t\t\t\t\t\u0026\u0026 y \u003d\u003d XARPUS_BARRIER_Y;\n\t\t\t\t}\n\n\t\t\t\tif (enteredCombatArea)\n\t\t\t\t{\n\t\t\t\t\ttobBetweenRooms \u003d false;\n\t\t\t\t\tcombatAreaEnteredThisRoom \u003d true;\n\t\t\t\t\tupdateSurgePauseState();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Gets the current special attack energy from the client.\n\t *\n\t * @return Special attack energy (0-1000, where 1000 \u003d 100%)\n\t */\n\tpublic int getSpecEnergy()\n\t{\n\t\treturn client.getVarpValue(VarPlayer.SPECIAL_ATTACK_PERCENT);\n\t}\n\n\t/**\n\t * Checks if special attack is at maximum.\n\t *\n\t * @return true if spec is 100%\n\t */\n\tpublic boolean isSpecFull()\n\t{\n\t\treturn getSpecEnergy() \u003e\u003d MAX_SPEC_ENERGY;\n\t}\n\n\t/**\n\t * Gets the current max ticks for spec regen based on Lightbearer status.\n\t *\n\t * @return 25 if wearing Lightbearer, 50 otherwise\n\t */\n\tpublic int getMaxRegenTicks()\n\t{\n\t\treturn wearingLightbearer ? LIGHTBEARER_REGEN_TICKS : SPEC_REGEN_TICKS;\n\t}\n\n\t/**\n\t * Gets the template region ID for the player\u0027s current location.\n\t * For instanced content like TOB, this converts the instanced coordinates\n\t * to the template region ID using WorldPoint.fromLocalInstance().\n\t *\n\t * @return Template region ID, or -1 if player is null\n\t */\n\tprivate int getTemplateRegionId()\n\t{\n\t\tWorldPoint templatePoint \u003d getTemplateWorldPoint();\n\t\treturn templatePoint !\u003d null ? templatePoint.getRegionID() : -1;\n\t}\n\n\t/**\n\t * Gets the template WorldPoint for the player\u0027s current location.\n\t * For instanced content like TOB, this converts the instanced coordinates\n\t * to template coordinates using WorldPoint.fromLocalInstance().\n\t *\n\t * @return Template WorldPoint, or null if player is null\n\t */\n\tprivate WorldPoint getTemplateWorldPoint()\n\t{\n\t\tif (client.getLocalPlayer() \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tWorldPoint worldPoint \u003d client.getLocalPlayer().getWorldLocation();\n\t\tif (client.isInInstancedRegion())\n\t\t{\n\t\t\t// For instanced content, convert to template coordinates\n\t\t\tLocalPoint localPoint \u003d LocalPoint.fromWorld(client, worldPoint);\n\t\t\tif (localPoint !\u003d null)\n\t\t\t{\n\t\t\t\tWorldPoint templatePoint \u003d WorldPoint.fromLocalInstance(client, localPoint);\n\t\t\t\tif (templatePoint !\u003d null)\n\t\t\t\t{\n\t\t\t\t\treturn templatePoint;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Non-instanced or fallback to direct world point\n\t\treturn worldPoint;\n\t}\n\n\t/**\n\t * Advances nextExpectedTobRoom to the room after the one that was just completed.\n\t * This ensures we only check for entry to the correct next room.\n\t * @param roomName The name of the room that was completed (from chat message)\n\t */\n\tprivate void advanceToNextTobRoom(String roomName)\n\t{\n\t\tif (roomName \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// Map room names from chat messages to TobRoom enum\n\t\tString normalizedName \u003d roomName.toLowerCase();\n\t\tTobRoom completedRoom \u003d null;\n\n\t\tif (normalizedName.contains(\"maiden\"))\n\t\t{\n\t\t\tcompletedRoom \u003d TobRoom.MAIDEN;\n\t\t}\n\t\telse if (normalizedName.contains(\"bloat\"))\n\t\t{\n\t\t\tcompletedRoom \u003d TobRoom.BLOAT;\n\t\t}\n\t\telse if (normalizedName.contains(\"nylocas\"))\n\t\t{\n\t\t\tcompletedRoom \u003d TobRoom.NYLOCAS;\n\t\t}\n\t\telse if (normalizedName.contains(\"sotetseg\"))\n\t\t{\n\t\t\tcompletedRoom \u003d TobRoom.SOTETSEG;\n\t\t}\n\t\telse if (normalizedName.contains(\"xarpus\"))\n\t\t{\n\t\t\tcompletedRoom \u003d TobRoom.XARPUS;\n\t\t}\n\t\telse if (normalizedName.contains(\"verzik\"))\n\t\t{\n\t\t\tcompletedRoom \u003d TobRoom.VERZIK;\n\t\t}\n\n\t\tif (completedRoom !\u003d null)\n\t\t{\n\t\t\tnextExpectedTobRoom \u003d completedRoom.next();\n\t\t\tlog.debug(\"TOB room {} completed, next expected: {}\", completedRoom, nextExpectedTobRoom);\n\t\t}\n\t}\n\t/**\n\t * Gets the remaining surge potion cooldown duration.\n\t * Uses wall-clock time for accurate display.\n\t * @return Remaining duration, or Duration.ZERO if no cooldown is active\n\t */\n\tpublic Duration getSurgeCooldownRemaining()\n\t{\n\t\tif (surgePausedRemaining !\u003d null)\n\t\t{\n\t\t\treturn surgePausedRemaining;\n\t\t}\n\t\tif (surgeEndTime !\u003d null)\n\t\t{\n\t\t\tDuration remaining \u003d Duration.between(Instant.now(), surgeEndTime);\n\t\t\tif (remaining.isNegative())\n\t\t\t{\n\t\t\t\treturn Duration.ZERO;\n\t\t\t}\n\t\t\treturn remaining;\n\t\t}\n\t\treturn Duration.ZERO;\n\t}\n\n\t/**\n\t * Checks if the surge cooldown timer is currently paused.\n\t *\n\t * @return true if paused (between waves/rooms), false otherwise\n\t */\n\tpublic boolean isSurgeCooldownPaused()\n\t{\n\t\treturn surgePausedRemaining !\u003d null;\n\t}\n\n\t/**\n\t * Updates the surge cooldown pause state based on current wave/room status.\n\t * Should be called whenever betweenWaves or tobBetweenRooms changes.\n\t */\n\tprivate void updateSurgePauseState()\n\t{\n\t\tboolean shouldBePaused \u003d betweenWaves || tobBetweenRooms;\n\t\tboolean isCurrentlyPaused \u003d surgePausedRemaining !\u003d null;\n\n\t\tif (shouldBePaused \u0026\u0026 !isCurrentlyPaused \u0026\u0026 surgeEndTime !\u003d null)\n\t\t{\n\t\t\t// Transition to paused: save remaining duration\n\t\t\tsurgePausedRemaining \u003d Duration.between(Instant.now(), surgeEndTime);\n\t\t\tif (surgePausedRemaining.isNegative())\n\t\t\t{\n\t\t\t\tsurgePausedRemaining \u003d Duration.ZERO;\n\t\t\t}\n\t\t\tsurgeEndTime \u003d null;\n\t\t\tlog.debug(\"Surge timer PAUSED with {} remaining (betweenWaves\u003d{}, tobBetweenRooms\u003d{})\",\n\t\t\t\tsurgePausedRemaining, betweenWaves, tobBetweenRooms);\n\t\t}\n\t\telse if (!shouldBePaused \u0026\u0026 isCurrentlyPaused)\n\t\t{\n\t\t\t// Transition to resumed: sync with game varbit (source of truth)\n\t\t\t// The game\u0027s varbit accurately reflects the paused duration, which may differ\n\t\t\t// slightly from what we saved due to timing differences in pause detection\n\t\t\tint varbitValue \u003d client.getVarbitValue(VarbitID.SURGE_POTION_TIMER);\n\t\t\tif (varbitValue \u003e 0)\n\t\t\t{\n\t\t\t\tint remainingTicks \u003d varbitValue * 10;\n\t\t\t\tDuration varbitDuration \u003d Duration.ofMillis(remainingTicks * 600L);\n\t\t\t\tlog.debug(\"Surge timer RESUMED - syncing with varbit: value\u003d{}, {} ticks \u003d {}, was paused at {}\",\n\t\t\t\t\tvarbitValue, remainingTicks, varbitDuration, surgePausedRemaining);\n\t\t\t\tsurgeEndTime \u003d Instant.now().plus(varbitDuration);\n\t\t\t\t// Set flag to accept the next varbit update, as the game may send a\n\t\t\t\t// corrected value shortly after the wave/room starts\n\t\t\t\tsurgeNeedsVarbitSync \u003d true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// Varbit is 0 (cooldown expired during pause), clear the timer\n\t\t\t\tlog.debug(\"Surge timer RESUMED but varbit is 0 (expired during pause), clearing timer\");\n\t\t\t\tclearSurgeCooldown();\n\t\t\t\tremoveSurgeInfoBox();\n\t\t\t}\n\t\t\tsurgePausedRemaining \u003d null;\n\t\t}\n\t}\n\n\t/**\n\t * Starts the surge potion cooldown timer.\n\t * Handles starting in either paused or active state.\n\t * Also syncs the varbit tracking to detect game-side clears.\n\t */\n\tprivate void startSurgeCooldown()\n\t{\n\t\t// Sync varbit tracking so we can detect when the game clears the cooldown\n\t\tlastSurgeVarbitValue \u003d client.getVarbitValue(VarbitID.SURGE_POTION_TIMER);\n\n\t\tif (betweenWaves || tobBetweenRooms)\n\t\t{\n\t\t\t// Start in paused state\n\t\t\tsurgePausedRemaining \u003d SURGE_COOLDOWN_DURATION;\n\t\t\tsurgeEndTime \u003d null;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Start in active state\n\t\t\tsurgeEndTime \u003d Instant.now().plus(SURGE_COOLDOWN_DURATION);\n\t\t\tsurgePausedRemaining \u003d null;\n\t\t}\n\t}\n\n\t/**\n\t * Clears the surge potion cooldown timer.\n\t * Called when the cooldown expires (game message), game clears it (death), or when resetting state.\n\t */\n\tprivate void clearSurgeCooldown()\n\t{\n\t\tsurgeEndTime \u003d null;\n\t\tsurgePausedRemaining \u003d null;\n\t\tlastSurgeVarbitValue \u003d 0;\n\t\tsurgeNeedsVarbitSync \u003d false;\n\t}\n}\n","filePath":"src\\main\\java\\com\\specialattacktimers\\SpecialAttackTimersPlugin.java"},{"fileName":"SurgePotionInfoBox.java","content":"package com.specialattacktimers;\n\nimport java.awt.Color;\nimport java.time.Duration;\nimport net.runelite.client.ui.overlay.infobox.InfoBox;\n\n/**\n * InfoBox that displays the surge potion cooldown timer.\n * Shows \"Surge Cooldown\" on hover.\n */\npublic class SurgePotionInfoBox extends InfoBox\n{\n\tprivate final SpecialAttackTimersPlugin plugin;\n\tprivate final SpecialAttackTimersConfig config;\n\n\tpublic SurgePotionInfoBox(SpecialAttackTimersPlugin plugin, SpecialAttackTimersConfig config)\n\t{\n\t\tsuper(null, plugin);\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t}\n\n\t@Override\n\tpublic String getText()\n\t{\n\t\tDuration remaining \u003d plugin.getSurgeCooldownRemaining();\n\t\tlong totalMillis \u003d remaining.toMillis();\n\n\t\tswitch (config.surgeDisplayFormat())\n\t\t{\n\t\t\tcase SECONDS:\n\t\t\t\t// Minutes:seconds format (e.g. 4:30) using integer division like RuneLite\n\t\t\t\tint totalSeconds \u003d (int) (totalMillis / 1000);\n\t\t\t\tint minutes \u003d totalSeconds / 60;\n\t\t\t\tint seconds \u003d totalSeconds % 60;\n\t\t\t\treturn String.format(\"%d:%02d\", minutes, seconds);\n\t\t\tcase DECIMALS:\n\t\t\t\t// Minutes:seconds with decimal (e.g. 4:29.4)\n\t\t\t\tdouble totalSecondsDecimal \u003d totalMillis / 1000.0;\n\t\t\t\tint mins \u003d (int) (totalSecondsDecimal / 60);\n\t\t\t\tdouble secs \u003d totalSecondsDecimal % 60;\n\t\t\t\treturn String.format(\"%d:%04.1f\", mins, secs);\n\t\t\tcase TICKS:\n\t\t\tdefault:\n\t\t\t\t// Convert milliseconds back to ticks for display\n\t\t\t\treturn String.valueOf((int) (totalMillis / 600));\n\t\t}\n\t}\n\n\t@Override\n\tpublic Color getTextColor()\n\t{\n\t\tif (plugin.isSurgeCooldownPaused())\n\t\t{\n\t\t\treturn config.surgePausedColor();\n\t\t}\n\t\treturn config.surgeColor();\n\t}\n\n\t@Override\n\tpublic boolean render()\n\t{\n\t\t// Only render if surge cooldown is active\n\t\tDuration remaining \u003d plugin.getSurgeCooldownRemaining();\n\t\treturn !remaining.isZero() \u0026\u0026 !remaining.isNegative();\n\t}\n\n\t@Override\n\tpublic String getTooltip()\n\t{\n\t\treturn \"Surge Cooldown\";\n\t}\n}\n","filePath":"src\\main\\java\\com\\specialattacktimers\\SurgePotionInfoBox.java"},{"fileName":"SpecialAttackTimersPluginTest.java","content":"package com.specialattacktimers;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class SpecialAttackTimersPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(SpecialAttackTimersPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}\n","filePath":"src\\test\\java\\com\\specialattacktimers\\SpecialAttackTimersPluginTest.java"}]},{"commit":"09c8c83035f1dceb616b8ac87a26e16dc0219901","repository":"https://github.com/ldavid432/chat-cleanup.git","internalName":"clean-chat","files":[{"fileName":"ChatWidgetEditor.java","content":"package com.github.ldavid432.cleanchat;\n\nimport static com.github.ldavid432.cleanchat.CleanChatUtil.CLAN_INSTRUCTION_MESSAGE;\nimport static com.github.ldavid432.cleanchat.CleanChatUtil.SCRIPT_REBUILD_CHATBOX;\nimport static com.github.ldavid432.cleanchat.CleanChatUtil.SCRIPT_SCROLLBAR_MAX;\nimport static com.github.ldavid432.cleanchat.CleanChatUtil.SCRIPT_SCROLLBAR_MIN;\nimport static com.github.ldavid432.cleanchat.CleanChatUtil.sanitizeName;\nimport static com.github.ldavid432.cleanchat.CleanChatUtil.wrapWithBrackets;\nimport com.github.ldavid432.cleanchat.data.ChannelNameRemoval;\nimport com.github.ldavid432.cleanchat.data.ChatTab;\nimport static java.lang.Math.max;\nimport static java.lang.Math.min;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.stream.Collectors;\nimport java.util.stream.Stream;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.ScriptPostFired;\nimport net.runelite.api.events.ScriptPreFired;\nimport net.runelite.api.gameval.InterfaceID;\nimport net.runelite.api.gameval.VarClientID;\nimport net.runelite.api.widgets.Widget;\nimport static net.runelite.api.widgets.WidgetPositionMode.ABSOLUTE_CENTER;\nimport static net.runelite.api.widgets.WidgetPositionMode.ABSOLUTE_TOP;\nimport static net.runelite.api.widgets.WidgetSizeMode.ABSOLUTE;\nimport static net.runelite.api.widgets.WidgetSizeMode.MINUS;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.util.Text;\nimport org.apache.commons.lang3.tuple.Pair;\n\n/**\n * \u003cul\u003e\n *     \u003cli\u003eRemoves channel name from chat widgets\u003c/li\u003e\n *     \u003cli\u003eIndents multi-line messages\u003c/li\u003e\n *     \u003cli\u003eAdjusts message height based on name removal and indentation\u003c/li\u003e\n * \u003c/ul\u003e\n */\n@Slf4j\n@Singleton\npublic class ChatWidgetEditor\n{\n\t@Inject\n\tprivate CleanChatChannelsConfig config;\n\n\t@Inject\n\tprivate ChannelNameManager channelNameManager;\n\n\t@Inject\n\tprivate Client client;\n\n\tprivate int lastScrollDiff \u003d -1;\n\tprivate int lastChatTab \u003d ChatTab.CLOSED.getValue();\n\tprivate boolean chatboxScrolled \u003d false;\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged event)\n\t{\n\t\tif (event.getGameState() \u003d\u003d GameState.HOPPING || event.getGameState() \u003d\u003d GameState.LOGIN_SCREEN)\n\t\t{\n\t\t\t// Reset scroll\n\t\t\tlastScrollDiff \u003d -1;\n\t\t\tchatboxScrolled \u003d false;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onScriptPreFired(ScriptPreFired event)\n\t{\n\t\tif (event.getScriptId() \u003e\u003d SCRIPT_SCROLLBAR_MIN \u0026\u0026 event.getScriptId() \u003c\u003d SCRIPT_SCROLLBAR_MAX)\n\t\t{\n\t\t\tObject[] args \u003d event.getScriptEvent().getArguments();\n\t\t\tchatboxScrolled \u003d args.length \u003e\u003d 2 \u0026\u0026 (int) args[1] \u003d\u003d InterfaceID.Chatbox.CHATSCROLLBAR;\n\t\t}\n\t}\n\n\t/*\n\tMost chats appear in this format as dynamic children on the chatbox scroll area:\n\t\t// bottom chat line\n\t\t[0] \u003d username\n\t\t[1] \u003d chat message\n\t\t[2] \u003d timestamp + channel name (timestamp only if that plugin is on, but is pretty common so should definitely account for it)\n\t\t[3] \u003d rank icon\n\t\t// Next chat line\n\t\t[4] \u003d next username\n\t\tetc...\n\n\tHowever, some are special:\n\n\tFriends chats:\n\t\t[0] \u003d channel + username\n\t\t[1] \u003d chat message\n\t\t[2] \u003d nothing\n\t\t[3] \u003d rank icon\n\n\tFriends game messages:\n\t\t[0] \u003d timestamp + message\n\t\t[1] \u003d nothing (except for the \u0027now talking...\u0027 message specifically which has the CLAN chat join message here...)\n\t\t[2] \u003d nothing\n\t\t[3] \u003d nothing\n\n\tGIM broadcasts:\n\t\t[0] \u003d channel\n\t\t[1] \u003d chat message\n\t\t[2] \u003d nothing\n\t\t[3] \u003d nothing\n\n\tConsole message:\n\t\t[0] \u003d timestamp + message\n\t\t[1] \u003d nothing\n\t\t[2] \u003d nothing\n\t\t[3] \u003d nothing\n\n\tGIM or Clan broadcast after world hopping (before you have reconnected to the channel):\n\t\t[0] \u003d nothing\n\t\t[1] \u003d message\n\t\t[2] \u003d nothing\n\t\t[3] \u003d nothing\n\n\tClan instruction message (?) after world hopping:\n\t\t[0] \u003d message\n\t\t[1] \u003d Did you know? tip\n\t\t[2] \u003d nothing\n\t\t[3] \u003d nothing\n\n\tThese appear in the children array in this order even if the individual items aren\u0027t rendered\n\t ex: Username is hidden for broadcasts, rank icon is hidden for public chat */\n\t@Subscribe\n\tpublic void onScriptPostFired(ScriptPostFired event)\n\t{\n\t\tif (event.getScriptId() \u003d\u003d SCRIPT_REBUILD_CHATBOX)\n\t\t{\n\t\t\tcheckReplacements();\n\t\t}\n\t\telse if (event.getScriptId() \u003e\u003d SCRIPT_SCROLLBAR_MIN \u0026\u0026 event.getScriptId() \u003c\u003d SCRIPT_SCROLLBAR_MAX \u0026\u0026 chatboxScrolled)\n\t\t{\n\t\t\tchatboxScrolled \u003d false;\n\n\t\t\tWidget chatbox \u003d client.getWidget(InterfaceID.Chatbox.SCROLLAREA);\n\t\t\tif (chatbox !\u003d null)\n\t\t\t{\n\t\t\t\tlastScrollDiff \u003d chatbox.getScrollHeight() - chatbox.getScrollY();\n\t\t\t\tclient.setVarcIntValue(VarClientID.CHAT_LASTSCROLLPOS, chatbox.getScrollHeight() - lastScrollDiff);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic void checkReplacements()\n\t{\n\t\t// FriendsChatManager is null at the first FriendsChatChanged after login so we have to add this check later\n\t\tchannelNameManager.updateFriendsChatName();\n\n\t\tWidget chatbox \u003d client.getWidget(InterfaceID.Chatbox.SCROLLAREA);\n\t\tChatTab selectedChatTab \u003d ChatTab.of(client.getVarcIntValue(VarClientID.CHAT_VIEW));\n\n\t\tif (chatbox !\u003d null \u0026\u0026 selectedChatTab !\u003d ChatTab.CLOSED)\n\t\t{\n\t\t\tWidget[] chatWidgets \u003d chatbox.getDynamicChildren().clone();\n\t\t\tWidget[] clickboxWidgets \u003d chatbox.getStaticChildren().clone();\n\n\t\t\t// TODO: Make i \u003d 0\n\t\t\t// TODO: See if we can avoid looping through every single widget even if there is no text there\n\t\t\t// for (int i \u003d 2; i \u003c chats.length; i +\u003d 4)\n\t\t\tList\u003cChatWidgetGroup\u003e displayedChats \u003d Stream.iterate(\n\t\t\t\t\t2,\n\t\t\t\t\ti -\u003e i \u003c chatWidgets.length,\n\t\t\t\t\ti -\u003e i + 4\n\t\t\t\t)\n\t\t\t\t.map(i -\u003e {\n\t\t\t\t\tint rankWidgetIndex \u003d i + 1; //    [3]\n\t\t\t\t\tint messageWidgetIndex \u003d i - 1; // [1]\n\t\t\t\t\tint nameWidgetIndex \u003d i - 2; //    [0]\n\n\t\t\t\t\tWidget channelWidget \u003d chatWidgets[i];\n\t\t\t\t\tif (channelWidget.getText().isEmpty())\n\t\t\t\t\t{\n\t\t\t\t\t\t// Channel is not at [2]. This is either a message with channel at [0] or a message without a channel\n\n\t\t\t\t\t\tif (!chatWidgets[i - 2].getText().isEmpty())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// Channel is at [0], this is a special message, adjust indices accordingly\n\n\t\t\t\t\t\t\tWidget messageWidget \u003d chatWidgets[i - 1];\n\t\t\t\t\t\t\t// For some reason the fc now talking message specifically, has the CLAN chat join message here...\n\t\t\t\t\t\t\tif (messageWidget.getText().isEmpty() || Text.removeTags(messageWidget.getText()).equals(CLAN_INSTRUCTION_MESSAGE))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t// Friends chat message\n\n\t\t\t\t\t\t\t\tmessageWidgetIndex \u003d i - 2; // [0]\n\t\t\t\t\t\t\t\t// Empty widget in this case, but still good to handle it\n\t\t\t\t\t\t\t\tnameWidgetIndex \u003d i - 1; //    [1]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t// Other special message\n\n\t\t\t\t\t\t\t\tchannelWidget \u003d chatWidgets[i - 2]; // [0]\n\t\t\t\t\t\t\t\t// Empty widget in this case, but still good to handle it\n\t\t\t\t\t\t\t\tnameWidgetIndex \u003d i; //                [2]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (chatWidgets[messageWidgetIndex].getText().isEmpty())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// Clan/GIM broadcast after world hopping - just use default setup since we mainly care about the message in this case\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn new ChatWidgetGroup(channelWidget, chatWidgets[rankWidgetIndex], chatWidgets[nameWidgetIndex], chatWidgets[messageWidgetIndex], clickboxWidgets[(i - 2) / 4]);\n\t\t\t\t})\n\t\t\t\t.filter(Objects::nonNull)\n\t\t\t\t.peek(group -\u003e {\n\t\t\t\t\tif (!group.getChannel().getText().isEmpty())\n\t\t\t\t\t{\n\t\t\t\t\t\tPair\u003cChannelNameRemoval, String\u003e match \u003d ChannelNameRemoval.findChannelMatch(group.getChannel().getText(), channelNameManager);\n\t\t\t\t\t\tif (match \u003d\u003d null) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tChannelNameRemoval channelRemoval \u003d match.getLeft();\n\t\t\t\t\t\tString matchedChannelName \u003d match.getRight();\n\t\t\t\t\t\tString widgetChannelText \u003d sanitizeName(group.getChannel().getText());\n\t\t\t\t\t\tString shortName \u003d channelRemoval.getShortName(channelNameManager, matchedChannelName);\n\n\t\t\t\t\t\tgroup.setChannelType(channelRemoval);\n\n\t\t\t\t\t\tif (channelRemoval.isEnabled(config))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tgroup.removeFromChannel(matchedChannelName);\n\n\t\t\t\t\t\t\tmatchedChannelName \u003d wrapWithBrackets(matchedChannelName);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (!shortName.isBlank() \u0026\u0026 !channelRemoval.isShortNameDefault(channelNameManager))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tString updatedChannelText \u003d group.replaceChannelName(matchedChannelName, shortName);\n\n\t\t\t\t\t\t\tmatchedChannelName \u003d sanitizeName(shortName);\n\t\t\t\t\t\t\twidgetChannelText \u003d sanitizeName(updatedChannelText);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmatchedChannelName \u003d wrapWithBrackets(matchedChannelName);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgroup.indent(config, matchedChannelName, widgetChannelText);\n\n\t\t\t\t\t\tif (channelRemoval.isRemoveRankEnabled(config)) {\n\t\t\t\t\t\t\tgroup.removeRank();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Calculate height last\n\t\t\t\t\tgroup.calculateHeight();\n\t\t\t\t})\n\t\t\t\t.collect(Collectors.toList());\n\n\t\t\tCollections.reverse(displayedChats);\n\n\t\t\t// Calculate this after editing messages\n\t\t\tint totalHeight \u003d displayedChats.stream()\n\t\t\t\t.map(group -\u003e group.getMessage().getHeight())\n\t\t\t\t.reduce(0, Integer::sum);\n\n\t\t\t// If we only have a few messages we want to place them at the bottom (chatbox.getHeight()) instead of the top (0).\n\t\t\t//  If placing from the bottom, add padding first\n\t\t\tint y \u003d totalHeight \u003e\u003d chatbox.getHeight() ? 0 : chatbox.getHeight() - totalHeight - 2;\n\n\t\t\t// Place widgets vertically\n\t\t\tfor (ChatWidgetGroup group : displayedChats)\n\t\t\t{\n\t\t\t\tgroup.place(y);\n\n\t\t\t\ty +\u003d group.getMessage().getHeight();\n\t\t\t}\n\n\t\t\t// If placing at the top, add padding last\n\t\t\tif (totalHeight \u003e\u003d chatbox.getHeight())\n\t\t\t{\n\t\t\t\ty +\u003d 2;\n\t\t\t}\n\n\t\t\ty \u003d max(y, chatbox.getHeight());\n\n\t\t\tchatbox.setScrollHeight(y);\n\t\t\tchatbox.revalidateScroll();\n\n\t\t\t// Replacing this script with Java allows us to avoid a clientThread.invokeLater as well as adjust the logic since we are modifying the true scroll height\n\t\t\tscrollbar_resize(chatbox);\n\n\t\t\t// Store this since rebuildchatbox changes the scroll position before we can\n\t\t\tlastScrollDiff \u003d chatbox.getScrollHeight() - chatbox.getScrollY();\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// chat closed - reset scroll\n\t\t\tlastScrollDiff \u003d -1;\n\t\t\tchatboxScrolled \u003d false;\n\t\t}\n\t\tlastChatTab \u003d selectedChatTab.getValue();\n\t}\n\n\t// Script 72\n\tprivate void scrollbar_resize(Widget scrollArea)\n\t{\n\t\tWidget scrollBarContainer \u003d client.getWidget(InterfaceID.Chatbox.CHATSCROLLBAR);\n\n\t\tint scrollAreaHeight \u003d scrollArea.getScrollHeight();\n\t\tif (scrollAreaHeight \u003c\u003d 0)\n\t\t{\n\t\t\tscrollAreaHeight \u003d scrollArea.getHeight();\n\t\t}\n\n\t\tint scrollBarHeight;\n\t\tif (scrollAreaHeight \u003e 0)\n\t\t{\n\t\t\tscrollBarHeight \u003d (scrollBarContainer.getHeight() - 32) * scrollArea.getHeight() / scrollAreaHeight;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tscrollBarHeight \u003d scrollBarContainer.getHeight() - 32;\n\t\t}\n\t\tif (scrollBarHeight \u003c 10)\n\t\t{\n\t\t\tscrollBarHeight \u003d 10;\n\t\t}\n\n\t\tWidget scrollBar \u003d scrollBarContainer.getChild(1);\n\t\tif (scrollBar !\u003d null)\n\t\t{\n\t\t\tscrollBar.setSize(0, scrollBarHeight, MINUS, ABSOLUTE);\n\t\t\tscrollBar.revalidate();\n\n\t\t\tscrollbar_vertical_doscroll(scrollBarContainer, scrollArea, scrollBar);\n\n\t\t\tscrollBarContainer.revalidateScroll();\n\t\t\tscrollArea.revalidateScroll();\n\t\t}\n\t}\n\n\t// Script 37\n\tprivate void scrollbar_vertical_doscroll(Widget scrollBarContainer, Widget scrollArea, Widget scrollBar)\n\t{\n\t\tint int2;\n\t\tif (lastChatTab !\u003d ChatTab.CLOSED.getValue() \u0026\u0026 lastScrollDiff !\u003d -1)\n\t\t{\n\t\t\t// Custom logic to restore our scroll values since rebuildchatbox will override them\n\t\t\tint2 \u003d max(scrollArea.getScrollHeight() - lastScrollDiff, 0);\n\t\t}\n\t\telse if (scrollArea.getHeight() \u003c 0)\n\t\t{\n\t\t\t// For some reason scrollArea.getHeight is negative after the first login so we just default to 0\n\t\t\tint2 \u003d 0;\n\t\t\t// The scrollHeight is also wrong after first login so just default to the base height\n\t\t\tscrollArea.setScrollHeight(114);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Original script logic\n\t\t\tint2 \u003d scrollArea.getScrollY();\n\t\t\tint int3 \u003d max(scrollArea.getScrollHeight() - scrollArea.getHeight(), 1);\n\t\t\tint2 \u003d max(min(int2, int3), 0);\n\t\t}\n\t\tscrollArea.setScrollY(int2);\n\t\tscrollArea.revalidateScroll();\n\t\tclient.setVarcIntValue(VarClientID.CHAT_LASTSCROLLPOS, scrollArea.getScrollY());\n\n\t\tscrollbar_vertical_setdragger(scrollBarContainer, scrollArea, scrollBar);\n\t}\n\n\t// Script 740\n\tprivate void scrollbar_vertical_setdragger(Widget scrollBarContainer, Widget scrollArea, Widget scrollBar)\n\t{\n\t\tint int2 \u003d max(scrollArea.getScrollHeight() - scrollArea.getHeight(), 1);\n\t\tint int3 \u003d scrollBarContainer.getHeight() - 32 - scrollBar.getHeight();\n\n\t\tint scrollBarPos \u003d max(16 + int3 * scrollArea.getScrollY() / int2, 16);\n\t\tscrollBar.setPos(0, scrollBarPos, ABSOLUTE_CENTER, ABSOLUTE_TOP);\n\t\tscrollBar.revalidate();\n\n\t\tWidget scrollbarElementTop \u003d scrollBarContainer.getChild(2);\n\t\tif (scrollbarElementTop !\u003d null)\n\t\t{\n\t\t\tscrollbarElementTop.setPos(0, scrollBar.getOriginalY(), ABSOLUTE_CENTER, ABSOLUTE_TOP);\n\t\t\tscrollbarElementTop.revalidate();\n\t\t}\n\n\t\tWidget scrollbarElementBottom \u003d scrollBarContainer.getChild(3);\n\t\tif (scrollbarElementBottom !\u003d null)\n\t\t{\n\t\t\tscrollbarElementBottom.setPos(0, scrollBar.getOriginalY() + scrollBar.getHeight() - 5, ABSOLUTE_CENTER, ABSOLUTE_TOP);\n\t\t\tscrollbarElementBottom.revalidate();\n\t\t}\n\t}\n\n}\n","filePath":"src/main/java/com/github/ldavid432/cleanchat/ChatWidgetEditor.java"},{"fileName":"ChatWidgetGroup.java","content":"package com.github.ldavid432.cleanchat;\n\nimport static com.github.ldavid432.cleanchat.CleanChatUtil.getTextLength;\nimport static com.github.ldavid432.cleanchat.CleanChatUtil.getTextLineCount;\nimport static com.github.ldavid432.cleanchat.CleanChatUtil.wrapWithBrackets;\nimport static com.github.ldavid432.cleanchat.CleanChatUtil.wrapWithChannelNameRegex;\nimport com.github.ldavid432.cleanchat.data.ChannelNameRemoval;\nimport static java.lang.Math.max;\nimport java.util.function.Consumer;\nimport java.util.stream.Stream;\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport lombok.Setter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.widgets.Widget;\n\n@Slf4j\n@Getter\n@RequiredArgsConstructor\nclass ChatWidgetGroup\n{\n\tprivate final Widget channel;\n\tprivate final Widget rank;\n\tprivate final Widget name;\n\tprivate final Widget message;\n\tprivate final Widget clickBox;\n\n\t@Setter\n\tprivate ChannelNameRemoval channelType \u003d null;\n\n\tprivate int indentSpaces \u003d 0;\n\n\tpublic void onAllWidgets(Consumer\u003cWidget\u003e action)\n\t{\n\t\tStream.of(channel, rank, name, message).forEach(action);\n\t}\n\n\tpublic void onNonChannelWidgets(Consumer\u003cWidget\u003e action)\n\t{\n\t\tStream.of(rank, name, message).forEach(action);\n\t}\n\n\tpublic void place(final int y) {\n\t\tonAllWidgets(widget -\u003e {\n\t\t\twidget.setOriginalY(y);\n\t\t\twidget.revalidate();\n\t\t});\n\n\t\tgetClickBox().setOriginalY(y);\n\t\tgetClickBox().setHidden(false);\n\t\tgetClickBox().revalidate();\n\t}\n\n\tpublic void calculateHeight()\n\t{\n\t\tif (!getMessage().getText().isEmpty() \u0026\u0026 getMessage().getWidth() \u003e 0)\n\t\t{\n\t\t\tint numLines \u003d getTextLineCount(getMessage().getText(), getMessage().getWidth(), indentSpaces);\n\t\t\tint height \u003d numLines * 14; // Height of each line is always 14\n\t\t\tgetMessage().setOriginalHeight(height);\n\t\t\tgetMessage().revalidate();\n\n\t\t\tgetClickBox().setOriginalHeight(height);\n\t\t\tgetClickBox().revalidate();\n\t\t}\n\t}\n\n\tpublic void indent(CleanChatChannelsConfig config, String matchedChannelName, String widgetChannelText)\n\t{\n\t\tint startOfChannel \u003d widgetChannelText.indexOf(matchedChannelName);\n\t\tint endOfChannel \u003d startOfChannel + matchedChannelName.length();\n\n\t\tint indentWidth \u003d 0;\n\n\t\tint channelWidth \u003d 0;\n\t\tint prefixWidth \u003d 0;\n\n\t\t// TODO: See if there\u0027s something that we are missing when measuring so we can avoid adding all these hardcoded offsets\n\t\t// Don\u0027t need to mess with indentation on messages we don\u0027t edit\n\t\t// TODO: Potentially handle other message types indent?\n\t\tif (getChannelType() !\u003d null)\n\t\t{\n\t\t\tswitch (config.indentationMode())\n\t\t\t{\n\t\t\t\t// Intentionally fallthrough\n\t\t\t\tcase START:\n\t\t\t\t\tString prefix \u003d widgetChannelText.substring(0, startOfChannel);\n\t\t\t\t\tprefixWidth \u003d getTextLength(prefix);\n\t\t\t\t\tindentWidth +\u003d prefixWidth;\n\n\t\t\t\t\tif (getChannelType().isEnabled(config))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (getChannelType() \u003d\u003d ChannelNameRemoval.FRIENDS_CHAT)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tindentWidth +\u003d 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tindentWidth -\u003d 2;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\tcase CHANNEL:\n\t\t\t\t\tif (!getChannelType().isEnabled(config))\n\t\t\t\t\t{\n\t\t\t\t\t\tString channel \u003d widgetChannelText.substring(startOfChannel, endOfChannel);\n\t\t\t\t\t\tchannelWidth \u003d getTextLength(channel);\n\t\t\t\t\t\tindentWidth +\u003d channelWidth;\n\n\t\t\t\t\t\tif (getChannelType() !\u003d ChannelNameRemoval.FRIENDS_CHAT)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tindentWidth +\u003d 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tindentWidth +\u003d 4;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\tcase NAME:\n\t\t\t\t\tint nameWidth \u003d 0;\n\t\t\t\t\t// FC puts name + channel into the channel widget\n\t\t\t\t\tif (getChannelType() \u003d\u003d ChannelNameRemoval.FRIENDS_CHAT)\n\t\t\t\t\t{\n\t\t\t\t\t\t// TODO: Can we switch back to getTextLength here?\n\t\t\t\t\t\t// For some reason the fc channel width is the entire length of the chatbox so we can\u0027t use getWidth\n\t\t\t\t\t\tint prefixChanelNameWidth \u003d getMessage().getOriginalX() - getChannel().getOriginalX();\n\t\t\t\t\t\tnameWidth \u003d prefixChanelNameWidth - prefixWidth - channelWidth;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!getName().getText().isEmpty() \u0026\u0026 !getName().isHidden())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnameWidth \u003d getName().getWidth();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!getRank().isHidden())\n\t\t\t\t\t{\n\t\t\t\t\t\tnameWidth +\u003d getRank().getWidth();\n\t\t\t\t\t}\n\n\t\t\t\t\tindentWidth +\u003d nameWidth;\n\n\t\t\t\t\tif (indentWidth \u003e 0 \u0026\u0026 getChannelType() !\u003d ChannelNameRemoval.FRIENDS_CHAT)\n\t\t\t\t\t{\n\t\t\t\t\t\tindentWidth +\u003d 4;\n\t\t\t\t\t}\n\t\t\t\t\telse if (getChannelType() \u003d\u003d ChannelNameRemoval.FRIENDS_CHAT)\n\t\t\t\t\t{\n\t\t\t\t\t\tindentWidth -\u003d 4;\n\t\t\t\t\t}\n\t\t\t\tcase MESSAGE:\n\t\t\t\t\t// Already set by default\n\t\t\t}\n\t\t}\n\n\t\tif (indentWidth \u003e 0) {\n\t\t\tindentSpaces \u003d max(0, indentWidth / 3);\n\t\t} else {\n\t\t\tindentSpaces \u003d 0;\n\t\t}\n\n\t\tif (indentSpaces \u003e 0)\n\t\t{\n\t\t\t// Using spaces to keep the first line at the initial position (+/-2 pixels)\n\t\t\tgetMessage().setText(\" \".repeat(indentSpaces) + getMessage().getText());\n\t\t\tgetMessage().setOriginalX(getMessage().getOriginalX() - indentWidth);\n\t\t\tgetMessage().setOriginalWidth(getMessage().getOriginalWidth() + indentWidth);\n\t\t\tgetMessage().revalidate();\n\t\t}\n\t}\n\n\tpublic void removeFromChannel(String text)\n\t{\n\t\treplaceChannelName(text, \"\");\n\t}\n\n\tpublic String replaceChannelName(String text, String newChannelName)\n\t{\n\t\tint currentWidth \u003d getTextLength(wrapWithBrackets(text));\n\t\tint newWidth \u003d getTextLength(newChannelName);\n\t\tint removedWidth \u003d currentWidth - newWidth;\n\n\t\tString newText \u003d getChannel().getText()\n\t\t\t// TODO: Target the channel name more precisely, this should do for now to avoid targeting timestamps in brackets\n\t\t\t.replaceFirst(wrapWithChannelNameRegex(text), newChannelName);\n\n\t\t// Remove trailing spaces - probably only happens with timestamps turned on\n\t\tif (newText.endsWith(\" \"))\n\t\t{\n\t\t\tnewText \u003d newText.substring(0, newText.length() - 1);\n\t\t\tremovedWidth +\u003d getTextLength(\" \");\n\t\t}\n\n\t\t// Remove double spaces - mainly found in friends chat since it has sender + username\n\t\tif (newText.contains(\"  \"))\n\t\t{\n\t\t\tnewText \u003d newText.replaceFirst(\" {2}\", \" \");\n\t\t\tremovedWidth +\u003d getTextLength(\" \");\n\t\t}\n\n\t\tgetChannel().setText(newText);\n\n\t\t// Shift widgets X left if channel was removed\n\t\tint finalRemovedWidth \u003d removedWidth;\n\t\tonNonChannelWidgets(widget -\u003e {\n\t\t\twidget.setOriginalX(widget.getOriginalX() - finalRemovedWidth);\n\t\t\twidget.revalidate();\n\t\t});\n\n\t\t// Expand the width of messages if channel was removed\n\t\tgetMessage().setOriginalWidth(getMessage().getOriginalWidth() + removedWidth);\n\t\tgetMessage().revalidate();\n\n\t\t// Reduce channel width if it was removed\n\t\tgetChannel().setOriginalWidth(getChannel().getOriginalWidth() - removedWidth);\n\t\tgetChannel().revalidate();\n\n\t\treturn newText;\n\t}\n\n\tpublic void removeRank()\n\t{\n\t\tif (!getRank().isHidden()) {\n\t\t\tgetRank().setHidden(true);\n\n\t\t\tint removedWidth \u003d getRank().getWidth();\n\n\t\t\tshiftLeft(getName(), removedWidth);\n\t\t\tshiftLeft(getMessage(), removedWidth);\n\n\t\t\t// Expand the width of messages if rank was removed\n\t\t\texpand(getMessage(), removedWidth);\n\t\t}\n\t}\n\n\tprivate void shiftLeft(Widget widget, int width)\n\t{\n\t\twidget.setOriginalX(widget.getOriginalX() - width);\n\t\twidget.revalidate();\n\t}\n\n\tprivate void expand(Widget widget, int width)\n\t{\n\t\twidget.setOriginalWidth(widget.getOriginalWidth() + width);\n\t\twidget.revalidate();\n\t}\n\n}\n","filePath":"src/main/java/com/github/ldavid432/cleanchat/ChatWidgetGroup.java"},{"fileName":"ChatBlock.java","content":"package com.github.ldavid432.cleanchat.data;\n\nimport com.github.ldavid432.cleanchat.CleanChatChannelsConfig;\nimport static com.github.ldavid432.cleanchat.CleanChatUtil.CLAN_INSTRUCTION_MESSAGE;\nimport java.util.function.Function;\nimport lombok.AllArgsConstructor;\nimport net.runelite.client.util.Text;\n\n@AllArgsConstructor\npublic enum ChatBlock\n{\n\tCLAN_INSTRUCTION(\n\t\tCleanChatChannelsConfig::removeClanInstruction,\n\t\tCLAN_INSTRUCTION_MESSAGE\n\t),\n\tGUEST_CLAN_INSTRUCTION(\n\t\tCleanChatChannelsConfig::removeGuestClanInstruction,\n\t\t// \"You are now a guest of x\" is also included in this message, they are separated by a \u003cbr\u003e\n\t\t\"To talk, start each line of chat with /// or /gc\"\n\t),\n\tGUEST_CLAN_RECONNECTING(\n\t\tCleanChatChannelsConfig::removeGuestClanReconnecting,\n\t\t\"Attempting to reconnect to guest channel automatically...\"\n\t),\n\tGROUP_IRON_INSTRUCTION(\n\t\tCleanChatChannelsConfig::removeGroupIronInstruction,\n\t\t\"To talk in your Ironman Group\u0027s channel\"\n\t),\n\tFRIENDS_CHAT_INSTRUCTION(\n\t\tCleanChatChannelsConfig::removeFriendsChatStartup,\n\t\t\"To talk, start each line of chat with the / symbol.\"\n\t),\n\tFRIENDS_CHAT_ATTEMPTING(\n\t\tCleanChatChannelsConfig::removeFriendsAttempting,\n\t\t\"Attempting to join chat-channel...\"\n\t),\n\tFRIENDS_CHAT_NOW_TALKING(\n\t\tCleanChatChannelsConfig::removeFriendsNowTalking,\n\t\t\"Now talking in chat-channel\"\n\t),\n\tWELCOME(\n\t\tCleanChatChannelsConfig::removeWelcome,\n\t\t\"Welcome to Old School RuneScape.\"\n\t),\n\t;\n\n\tpublic boolean isEnabled(CleanChatChannelsConfig config)\n\t{\n\t\treturn isEnabled.apply(config);\n\t}\n\n\tpublic boolean appliesTo(CleanChatChannelsConfig config, String message)\n\t{\n\t\treturn isEnabled(config) \u0026\u0026 Text.removeTags(message).contains(this.message);\n\t}\n\n\tprivate final Function\u003cCleanChatChannelsConfig, Boolean\u003e isEnabled;\n\tprivate final String message;\n}\n","filePath":"src/main/java/com/github/ldavid432/cleanchat/data/ChatBlock.java"},{"fileName":"ChannelNameRemoval.java","content":"package com.github.ldavid432.cleanchat.data;\n\nimport com.github.ldavid432.cleanchat.ChannelNameManager;\nimport com.github.ldavid432.cleanchat.CleanChatChannelsConfig;\nimport static com.github.ldavid432.cleanchat.CleanChatChannelsConfig.DEFAULT_CUSTOM_CHANNEL_NAME;\nimport com.github.ldavid432.cleanchat.CleanChatUtil;\nimport static com.github.ldavid432.cleanchat.CleanChatUtil.CURRENT_CLAN_REPLACER;\nimport static com.github.ldavid432.cleanchat.CleanChatUtil.sanitizeName;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.function.BiFunction;\nimport java.util.function.Function;\nimport lombok.AllArgsConstructor;\nimport org.apache.commons.lang3.tuple.Pair;\n\n@AllArgsConstructor\npublic enum ChannelNameRemoval\n{\n\t// TODO: Cache booleans \u0026 indent mode config values\n\tCLAN(\n\t\tCleanChatChannelsConfig::removeClanName,\n\t\tChannelNameManager::getClanNames,\n\t\t(c, t) -\u003e false,\n\t\tChannelNameManager::getShortClanName,\n\t\tCleanChatChannelsConfig::removeClanRank\n\t),\n\tGUEST_CLAN(\n\t\tCleanChatChannelsConfig::removeGuestClanName,\n\t\tChannelNameManager::getGuestClanNames,\n\t\t(c, t) -\u003e false,\n\t\tChannelNameManager::getShortGuestClanName,\n\t\tc -\u003e false\n\t),\n\tFRIENDS_CHAT(\n\t\tCleanChatChannelsConfig::removeFriendsChatName,\n\t\tChannelNameManager::getFriendsChatNames,\n\t\t(c, t) -\u003e false,\n\t\tChannelNameManager::getShortFriendsChatName,\n\t\tc -\u003e false\n\t),\n\tGROUP_IRON(\n\t\tCleanChatChannelsConfig::removeGroupIronName,\n\t\tChannelNameManager::getGroupIronNames,\n\t\t(config, tab) -\u003e config.removeGroupIronFromClan() \u0026\u0026 tab \u003d\u003d ChatTab.CLAN,\n\t\tChannelNameManager::getShortGroupIronName,\n\t\tc -\u003e false\n\t);\n\n\tpublic List\u003cString\u003e getNames(ChannelNameManager channelNameManager)\n\t{\n\t\treturn getNames.apply(channelNameManager);\n\t}\n\n\tpublic boolean isEnabled(CleanChatChannelsConfig config)\n\t{\n\t\treturn isEnabled.apply(config);\n\t}\n\n\tpublic boolean isTabBlocked(CleanChatChannelsConfig config, ChatTab tab)\n\t{\n\t\treturn isTabBlocked.apply(config, tab);\n\t}\n\n\tpublic boolean isShortNameDefault(ChannelNameManager channelNameManager)\n\t{\n\t\t// Compares *un-substituted* shortName\n\t\treturn Objects.equals(getShortName.apply(channelNameManager), DEFAULT_CUSTOM_CHANNEL_NAME);\n\t}\n\n\tpublic String getShortName(ChannelNameManager channelNameManager, String matchedName)\n\t{\n\t\tfinal String shortName \u003d getShortName.apply(channelNameManager);\n\n\t\tif (shortName.contains(CURRENT_CLAN_REPLACER))\n\t\t{\n\t\t\treturn shortName.replace(CURRENT_CLAN_REPLACER, matchedName);\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn shortName;\n\t\t}\n\t}\n\n\tpublic boolean isRemoveRankEnabled(CleanChatChannelsConfig config)\n\t{\n\t\treturn isRemoveRank.apply(config);\n\t}\n\n\tprivate final Function\u003cCleanChatChannelsConfig, Boolean\u003e isEnabled;\n\tprivate final Function\u003cChannelNameManager, List\u003cString\u003e\u003e getNames;\n\tprivate final BiFunction\u003cCleanChatChannelsConfig, ChatTab, Boolean\u003e isTabBlocked;\n\tprivate final Function\u003cChannelNameManager, String\u003e getShortName;\n\tprivate final Function\u003cCleanChatChannelsConfig, Boolean\u003e isRemoveRank;\n\n\tpublic static Pair\u003cChannelNameRemoval, String\u003e findChannelMatch(String channel, ChannelNameManager channelNameManager)\n\t{\n\t\tfor (ChannelNameRemoval channelRemoval : ChannelNameRemoval.values())\n\t\t{\n\t\t\tif (channel \u003d\u003d null)\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tString widgetChannelName \u003d sanitizeName(channel);\n\t\t\tString matchedChannelName \u003d channelRemoval.getNames(channelNameManager).stream()\n\t\t\t\t.map(CleanChatUtil::sanitizeName)\n\t\t\t\t.filter(widgetChannelName::contains)\n\t\t\t\t.findFirst()\n\t\t\t\t.orElse(null);\n\n\t\t\tif (matchedChannelName !\u003d null)\n\t\t\t{\n\t\t\t\treturn Pair.of(channelRemoval, matchedChannelName);\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n}\n","filePath":"src/main/java/com/github/ldavid432/cleanchat/data/ChannelNameRemoval.java"},{"fileName":"IndentMode.java","content":"package com.github.ldavid432.cleanchat.data;\n\npublic enum IndentMode\n{\n\tMESSAGE,\n\tNAME,\n\tCHANNEL,\n\tSTART\n}\n","filePath":"src/main/java/com/github/ldavid432/cleanchat/data/IndentMode.java"},{"fileName":"ChatTab.java","content":"package com.github.ldavid432.cleanchat.data;\n\nimport java.util.Arrays;\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\n\n// Enum 5620 https://abextm.github.io/cache2/#/viewer/enum/5620\n@AllArgsConstructor\npublic enum ChatTab\n{\n\tALL(0),\n\tGAME(1),\n\tPUBLIC(2),\n\tPRIVATE(3),\n\tCHANNEL(4),\n\tCLAN(5),\n\tTRADE(6),\n\tCLOSED(1337);\n\n\t@Getter\n\tprivate final int value;\n\n\tpublic static ChatTab of(int value)\n\t{\n\t\treturn Arrays.stream(values())\n\t\t\t.filter(channel -\u003e channel.getValue() \u003d\u003d value)\n\t\t\t.findFirst()\n\t\t\t.orElse(ChatTab.ALL);\n\t}\n}\n","filePath":"src/main/java/com/github/ldavid432/cleanchat/data/ChatTab.java"},{"fileName":"CleanChatUtil.java","content":"package com.github.ldavid432.cleanchat;\n\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.regex.Pattern;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.util.Text;\n\n@Slf4j\npublic class CleanChatUtil\n{\n\tpublic static final String CLAN_INSTRUCTION_MESSAGE \u003d \"To talk in your clan\u0027s channel, start each line of chat with // or /c.\";\n\tpublic static final int GUEST_CLAN \u003d -1;\n\tpublic static final int SCRIPT_REBUILD_CHATBOX \u003d 84;\n\t// Scripts 32-36 are all about scrolling in different ways\n\tpublic static final int SCRIPT_SCROLLBAR_MIN \u003d 32;\n\tpublic static final int SCRIPT_SCROLLBAR_MAX \u003d 36;\n\tpublic static final int MAX_CHANNEL_LIST_SIZE \u003d 128;\n\tprivate static final Pattern IMG_TAG_REGEXP \u003d Pattern.compile(\"\u003cimg\u003d[^\u003e]*\u003e\");\n\tpublic static final String CURRENT_CLAN_REPLACER \u003d \"$$\";\n\n\tpublic static String sanitizeName(String string)\n\t{\n\t\treturn Text.removeTags(string).replace(\u0027\\u00A0\u0027, \u0027 \u0027);\n\t}\n\n\t// Sizes sourced from: https://github.com/JamesShelton140/aqp-finder\n\tprivate static final Map\u003cCharacter, Integer\u003e CHAR_SIZE_MAP \u003d Map.\u003cCharacter, Integer\u003eofEntries(\n\t\t// Upper case\n\t\tMap.entry(\u0027A\u0027, 6), Map.entry(\u0027B\u0027, 5), Map.entry(\u0027C\u0027, 5), Map.entry(\u0027D\u0027, 5), Map.entry(\u0027E\u0027, 4), Map.entry(\u0027F\u0027, 4), Map.entry(\u0027G\u0027, 6), Map.entry(\u0027H\u0027, 5), Map.entry(\u0027I\u0027, 1), Map.entry(\u0027J\u0027, 5), Map.entry(\u0027K\u0027, 5), Map.entry(\u0027L\u0027, 4), Map.entry(\u0027M\u0027, 7), Map.entry(\u0027N\u0027, 6), Map.entry(\u0027O\u0027, 6), Map.entry(\u0027P\u0027, 5), Map.entry(\u0027Q\u0027, 6), Map.entry(\u0027R\u0027, 5), Map.entry(\u0027S\u0027, 5), Map.entry(\u0027T\u0027, 3), Map.entry(\u0027U\u0027, 6), Map.entry(\u0027V\u0027, 5), Map.entry(\u0027W\u0027, 7), Map.entry(\u0027X\u0027, 5), Map.entry(\u0027Y\u0027, 5), Map.entry(\u0027Z\u0027, 5),\n\t\t// Lower case\n\t\tMap.entry(\u0027a\u0027, 5), Map.entry(\u0027b\u0027, 5), Map.entry(\u0027c\u0027, 4), Map.entry(\u0027d\u0027, 5), Map.entry(\u0027e\u0027, 5), Map.entry(\u0027f\u0027, 4), Map.entry(\u0027g\u0027, 5), Map.entry(\u0027h\u0027, 5), Map.entry(\u0027i\u0027, 1), Map.entry(\u0027j\u0027, 4), Map.entry(\u0027k\u0027, 4), Map.entry(\u0027l\u0027, 1), Map.entry(\u0027m\u0027, 7), Map.entry(\u0027n\u0027, 5), Map.entry(\u0027o\u0027, 5), Map.entry(\u0027p\u0027, 5), Map.entry(\u0027q\u0027, 5), Map.entry(\u0027r\u0027, 3), Map.entry(\u0027s\u0027, 5), Map.entry(\u0027t\u0027, 3), Map.entry(\u0027u\u0027, 5), Map.entry(\u0027v\u0027, 5), Map.entry(\u0027w\u0027, 5), Map.entry(\u0027x\u0027, 5), Map.entry(\u0027y\u0027, 5), Map.entry(\u0027z\u0027, 5),\n\t\t// Numbers\n\t\tMap.entry(\u00270\u0027, 6), Map.entry(\u00271\u0027, 4), Map.entry(\u00272\u0027, 6), Map.entry(\u00273\u0027, 5), Map.entry(\u00274\u0027, 5), Map.entry(\u00275\u0027, 5), Map.entry(\u00276\u0027, 6), Map.entry(\u00277\u0027, 5), Map.entry(\u00278\u0027, 6), Map.entry(\u00279\u0027, 6),\n\t\t// Symbols\n\t\tMap.entry(\u0027 \u0027, 1), Map.entry(\u0027:\u0027, 1), Map.entry(\u0027;\u0027, 2), Map.entry(\u0027\"\u0027, 3), Map.entry(\u0027@\u0027, 11), Map.entry(\u0027!\u0027, 1), Map.entry(\u0027.\u0027, 1), Map.entry(\u0027\\\u0027\u0027, 2), Map.entry(\u0027,\u0027, 2), Map.entry(\u0027(\u0027, 2), Map.entry(\u0027)\u0027, 2), Map.entry(\u0027+\u0027, 5), Map.entry(\u0027-\u0027, 4), Map.entry(\u0027\u003d\u0027, 6), Map.entry(\u0027?\u0027, 6), Map.entry(\u0027*\u0027, 7), Map.entry(\u0027/\u0027, 4), Map.entry(\u0027\\\\\u0027, 4), Map.entry(\u0027$\u0027, 6), Map.entry(\u0027\u0027, 8), Map.entry(\u0027^\u0027, 6), Map.entry(\u0027{\u0027, 3), Map.entry(\u0027}\u0027, 3), Map.entry(\u0027[\u0027, 3), Map.entry(\u0027]\u0027, 3), Map.entry(\u0027\u0026\u0027, 9), Map.entry(\u0027#\u0027, 11), Map.entry(\u0027\u0027, 4), Map.entry(\u0027\u003c\u0027, 5), Map.entry(\u0027\u003e\u0027, 5), Map.entry(\u0027%\u0027, 9), Map.entry(\u0027_\u0027, 7), Map.entry(\u0027|\u0027, 1),\n\t\t// NBSP\n\t\tMap.entry(\u0027\\u00A0\u0027, 1));\n\n\tpublic static int getTextLength(String text)\n\t{\n\t\treturn Text.removeFormattingTags(text).replace(\"\u003clt\u003e\", \"\u003c\").replace(\"\u003cgt\u003e\", \"\u003e\")\n\t\t\t.chars()\n\t\t\t.mapToObj(ch -\u003e (char) ch)\n\t\t\t.map(key -\u003e {\n\t\t\t\tif (!CHAR_SIZE_MAP.containsKey(key))\n\t\t\t\t{\n\t\t\t\t\tlog.debug(\"Couldn\u0027t get length of {}\", key);\n\t\t\t\t}\n\t\t\t\treturn CHAR_SIZE_MAP.getOrDefault(key, 5) + 2;\n\t\t\t})\n\t\t\t.reduce(0, Integer::sum) + getChatIconsWidth(text);\n\t}\n\n\tprivate static int getChatIconsWidth(String text)\n\t{\n\t\tint imgCount \u003d Math.toIntExact(IMG_TAG_REGEXP.matcher(text).results().count());\n\t\treturn imgCount * 13; // 11 + 2\n\t}\n\n\t// Mimics \u0027paraheight\u0027 cs2 instruction\n\tpublic static int getTextLineCount(String text, int width, int indentSpaces)\n\t{\n\t\t// Positive lookahead ?\u003d makes it so that the delimiter is included in the split strings\n\t\tIterator\u003cString\u003e iterator \u003d List.of(text.split(\"(?\u003d(\u003cbr\u003e)|([ \\u00A0]))\")).iterator();\n\n\t\tint numLines \u003d 0;\n\t\tStringBuilder currentLine \u003d new StringBuilder();\n\n\t\twhile (iterator.hasNext())\n\t\t{\n\t\t\tString next \u003d iterator.next();\n\n\t\t\tint currentWidth \u003d getTextLength(currentLine.toString());\n\n\t\t\tif (currentWidth \u003c width)\n\t\t\t{\n\t\t\t\t// Start of the line\n\t\t\t\tif (currentLine.toString().isEmpty())\n\t\t\t\t{\n\t\t\t\t\tcurrentLine.append(next);\n\t\t\t\t}\n\t\t\t\t// Adding a line break (from game messages) - player messages get escaped as \u003clt\u003ebr\u003cgt\u003e\n\t\t\t\telse if (next.startsWith(\"\u003cbr\u003e\"))\n\t\t\t\t{\n\t\t\t\t\tnumLines++;\n\t\t\t\t\tcurrentLine \u003d new StringBuilder(next);\n\t\t\t\t}\n\t\t\t\t// Adding the next chunk\n\t\t\t\telse if (currentWidth + getTextLength(next) \u003c\u003d width)\n\t\t\t\t{\n\t\t\t\t\tcurrentLine.append(next);\n\t\t\t\t}\n\t\t\t\t// Adding the next chunk after the initial indent\n\t\t\t\t// `currentWidth + getTextLength(next) \u003e width` is implied\n\t\t\t\t// add 1 to indentSpaces so that we include the next chunk after the indent on the first line\n\t\t\t\telse if (numLines \u003d\u003d 0 \u0026\u0026 currentLine.length() \u003c\u003d indentSpaces + 1)\n\t\t\t\t{\n\t\t\t\t\tcurrentLine.append(next);\n\t\t\t\t}\n\t\t\t\t// Width too big, go to next line\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tnumLines++;\n\t\t\t\t\tcurrentLine \u003d new StringBuilder(next);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Width immediately too big, go to next line (this is probably a chunk that will get cut off)\n\t\t\telse\n\t\t\t{\n\t\t\t\tnumLines++;\n\t\t\t\tcurrentLine \u003d new StringBuilder(next);\n\t\t\t}\n\t\t}\n\t\tnumLines++;\n\n\t\treturn numLines;\n\t}\n\n\tpublic static String wrapWithBrackets(String channelName)\n\t{\n\t\treturn \"[\" + channelName + \"]\";\n\t}\n\n\tpublic static String wrapWithChannelNameRegex(String channelName)\n\t{\n\t\treturn \"\\\\[[^]\\\\[]*\" + channelName + \".*]\";\n\t}\n\n}\n","filePath":"src/main/java/com/github/ldavid432/cleanchat/CleanChatUtil.java"},{"fileName":"CleanChatChannelsPlugin.java","content":"package com.github.ldavid432.cleanchat;\n\nimport static com.github.ldavid432.cleanchat.CleanChatChannelsConfig.HIDE_SCROLLBAR_KEY;\nimport com.google.inject.Provides;\nimport java.util.Objects;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.events.WidgetLoaded;\nimport net.runelite.api.gameval.InterfaceID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Clean Chat\",\n\tdescription \u003d \"Hide clan name and more to clean your chat channels, includes GIM, friends, and clan chats\",\n\ttags \u003d {\"clean\", \"chat\", \"clan\", \"friends\", \"gim\", \"group\", \"iron\", \"ironman\", \"channel\"}\n)\npublic class CleanChatChannelsPlugin extends Plugin\n{\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate CleanChatChannelsConfig config;\n\n\t@Inject\n\tprivate ChannelNameManager channelNameManager;\n\n\t@Inject\n\tprivate ChatWidgetEditor chatWidgetEditor;\n\n\t@Inject\n\tprivate ChatBlocker chatBlocker;\n\n\t@Inject\n\tprivate EventBus eventBus;\n\n\t@Inject\n\tprivate ChatMessageManager chatMessageManager;\n\n\t@Provides\n\tCleanChatChannelsConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(CleanChatChannelsConfig.class);\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\teventBus.register(chatBlocker);\n\t\teventBus.register(chatWidgetEditor);\n\t\teventBus.register(channelNameManager);\n\t\tchannelNameManager.startup();\n\n\t\tclientThread.invoke(() -\u003e handleScrollbarVisibility());\n\n\t\tif (client.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tlog.debug(\"Plugin enabled. Refreshing chat.\");\n\t\t\tclient.refreshChat();\n\t\t}\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\teventBus.unregister(chatBlocker);\n\t\teventBus.unregister(chatWidgetEditor);\n\t\teventBus.unregister(channelNameManager);\n\t\tchannelNameManager.shutdown();\n\n\t\t// Remove all our shenanigans\n\t\tlog.debug(\"Plugin disabled. Refreshing chat.\");\n\t\tclientThread.invoke(() -\u003e handleScrollbarVisibility(false));\n\t\tclient.refreshChat();\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif (Objects.equals(event.getGroup(), CleanChatChannelsConfig.GROUP))\n\t\t{\n\t\t\tlog.debug(\"Config changed. Refreshing chat.\");\n\t\t\tclient.refreshChat();\n\n\t\t\tif (Objects.equals(event.getKey(), HIDE_SCROLLBAR_KEY))\n\t\t\t{\n\t\t\t\tclientThread.invoke(() -\u003e handleScrollbarVisibility());\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onWidgetLoaded(WidgetLoaded event)\n\t{\n\t\tif (event.getGroupId() \u003d\u003d InterfaceID.CHATBOX)\n\t\t{\n\t\t\thandleScrollbarVisibility();\n\t\t}\n\t}\n\n\tprivate void handleScrollbarVisibility()\n\t{\n\t\thandleScrollbarVisibility(config.hideScrollbar());\n\t}\n\n\tprivate void handleScrollbarVisibility(boolean hideScrollbar)\n\t{\n\t\tWidget chatbox \u003d client.getWidget(InterfaceID.Chatbox.SCROLLAREA);\n\t\tWidget scrollBarContainer \u003d client.getWidget(InterfaceID.Chatbox.CHATSCROLLBAR);\n\t\tif (chatbox !\u003d null \u0026\u0026 scrollBarContainer !\u003d null) {\n\t\t\tscrollBarContainer.setHidden(hideScrollbar);\n\n\t\t\t// width mode is MINUS, so we if we want to match the parent width we use 0\n\t\t\tif (hideScrollbar) {\n\t\t\t\tchatbox.setOriginalWidth(0);\n\t\t\t} else {\n\t\t\t\tchatbox.setOriginalWidth(scrollBarContainer.getWidth());\n\t\t\t}\n\t\t\tchatbox.revalidate();\n\n\t\t\tclient.refreshChat();\n\t\t}\n\t}\n\n}\n","filePath":"src/main/java/com/github/ldavid432/cleanchat/CleanChatChannelsPlugin.java"},{"fileName":"ChatBlocker.java","content":"/*\n * Copyright (c) 2018, Magic fTail\n * Copyright (c) 2019, osrs-music-map \u003cosrs-music-map@users.noreply.github.com\u003e\n * Copyright (c) 2026, Lake David\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.github.ldavid432.cleanchat;\n\nimport com.github.ldavid432.cleanchat.data.ChannelNameRemoval;\nimport com.github.ldavid432.cleanchat.data.ChatBlock;\nimport com.github.ldavid432.cleanchat.data.ChatTab;\nimport java.util.stream.Stream;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.MessageNode;\nimport net.runelite.api.events.ScriptCallbackEvent;\nimport net.runelite.api.gameval.VarClientID;\nimport net.runelite.client.eventbus.Subscribe;\nimport org.apache.commons.lang3.tuple.Pair;\n\n@Slf4j\n@Singleton\npublic class ChatBlocker\n{\n\t@Inject\n\tprivate CleanChatChannelsConfig config;\n\n\t@Inject\n\tprivate ChannelNameManager channelNameManager;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Subscribe\n\tpublic void onScriptCallbackEvent(ScriptCallbackEvent event)\n\t{\n\t\t// Yoinked from core RL\n\n\t\tif (!\"chatFilterCheck\".equals(event.getEventName()))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tint[] intStack \u003d client.getIntStack();\n\t\tint intStackSize \u003d client.getIntStackSize();\n\t\tObject[] objectStack \u003d client.getObjectStack();\n\t\tint objectStackSize \u003d client.getObjectStackSize();\n\n\t\tfinal int messageType \u003d intStack[intStackSize - 2];\n\t\tfinal int messageId \u003d intStack[intStackSize - 1];\n\t\tString message \u003d (String) objectStack[objectStackSize - 1];\n\n\t\tfinal MessageNode messageNode \u003d client.getMessages().get(messageId);\n\t\tfinal String channel \u003d messageNode.getSender();\n\n\t\t// end core RL\n\n\t\tChatTab selectedChatTab \u003d ChatTab.of(client.getVarcIntValue(VarClientID.CHAT_VIEW));\n\n\t\tboolean blockChat \u003d Stream.of(ChatBlock.values()).anyMatch(block -\u003e block.appliesTo(config, message));\n\n\t\tif (!blockChat \u0026\u0026 !message.isEmpty())\n\t\t{\n\t\t\tPair\u003cChannelNameRemoval, String\u003e match \u003d ChannelNameRemoval.findChannelMatch(channel, channelNameManager);\n\t\t\tif (match \u003d\u003d null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tChannelNameRemoval channelRemoval \u003d match.getLeft();\n\n\t\t\tblockChat \u003d channelRemoval.isTabBlocked(config, selectedChatTab);\n\t\t}\n\n\t\t// Totally bizarre situation where after hopping the clan instruction becomes the name and the previous \u0027did you know?\u0027 becomes the message\n\t\t//  channel\u003dnothing, name\u003dclan instruction, message\u003ddid you know? ...\n\t\tif (!blockChat \u0026\u0026 ChatBlock.CLAN_INSTRUCTION.appliesTo(config, channel))\n\t\t{\n\t\t\tblockChat \u003d true;\n\t\t}\n\n\t\tif (blockChat)\n\t\t{\n\t\t\tintStack[intStackSize - 3] \u003d 0;\n\t\t}\n\t}\n}\n","filePath":"src/main/java/com/github/ldavid432/cleanchat/ChatBlocker.java"},{"fileName":"CleanChatChannelsConfig.java","content":"package com.github.ldavid432.cleanchat;\n\nimport static com.github.ldavid432.cleanchat.CleanChatChannelsConfig.GROUP;\nimport static com.github.ldavid432.cleanchat.CleanChatUtil.CURRENT_CLAN_REPLACER;\nimport static com.github.ldavid432.cleanchat.CleanChatUtil.wrapWithBrackets;\nimport com.github.ldavid432.cleanchat.data.IndentMode;\nimport java.awt.Color;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\nimport static net.runelite.client.util.ColorUtil.wrapWithColorTag;\n\n@ConfigGroup(GROUP)\npublic interface CleanChatChannelsConfig extends Config\n{\n\tString GROUP \u003d \"cleanchat\";\n\tString HIDE_SCROLLBAR_KEY \u003d \"hideScrollbar\";\n\tString DEFAULT_CUSTOM_CHANNEL_NAME \u003d wrapWithBrackets(wrapWithColorTag(CURRENT_CLAN_REPLACER, Color.BLUE));\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"removeWelcome\",\n\t\tname \u003d \"Remove welcome message\",\n\t\tdescription \u003d \"Remove \u0027Welcome to RuneScape\u0027 message\",\n\t\tposition \u003d 0\n\t)\n\tdefault boolean removeWelcome()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"lineBreakIndentationMode\",\n\t\tname \u003d \"Indent Mode\",\n\t\tdescription \u003d \"Adjust the starting indent for the 2nd (and further) lines in multi-line messages (only in chat channels)\u003cbr\u003e\" +\n\t\t\t\"Message - Default, start directly under the first line\u003cbr\u003e\" +\n\t\t\t\"Name - Start under the username\u003cbr\u003e\" +\n\t\t\t\"Channel - Start under the channel name and after the timestamp. If channel removal is on, acts like Name\u003cbr\u003e\" +\n\t\t\t\"Start - Start at the start of the chat box\u003cbr\u003e\" +\n\t\t\t\"Note: Turning this on may make multi-line messages shift one or two pixels to the right\",\n\t\tposition \u003d 1\n\t)\n\tdefault IndentMode indentationMode()\n\t{\n\t\treturn IndentMode.MESSAGE;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d HIDE_SCROLLBAR_KEY,\n\t\tname \u003d \"Hide Scrollbar\",\n\t\tdescription \u003d \"Hide the chatbox scrollbar. You can still scroll with the mouse wheel like normal.\",\n\t\tposition \u003d 2\n\t)\n\tdefault boolean hideScrollbar()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigSection(\n\t\tname \u003d \"Clan Chat\",\n\t\tdescription \u003d \"Configure clan chat\",\n\t\tposition \u003d 10\n\t)\n\tString clanSection \u003d \"clanSection\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"removeClanInstruction\",\n\t\tname \u003d \"Remove startup message\",\n\t\tdescription \u003d \"Remove message telling you how to chat in your clan channel\",\n\t\tsection \u003d clanSection,\n\t\tposition \u003d 0\n\t)\n\tdefault boolean removeClanInstruction()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"removeClanName\",\n\t\tname \u003d \"Remove clan name\",\n\t\tdescription \u003d \"Remove clan name from clan chat messages\",\n\t\tsection \u003d clanSection,\n\t\tposition \u003d 1\n\t)\n\tdefault boolean removeClanName()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"shortClanName\",\n\t\tname \u003d \"Custom clan name\",\n\t\tdescription \u003d \"Replace your clan name with a custom one in clan chat messages\u003cbr\u003e\" +\n\t\t\t\"Leave blank (or the default value) to disable\u003cbr\u003e\" +\n\t\t\t\"You can reference your current clan name using $$\u003cbr\u003e\" +\n\t\t\t\"See the plugin details page for more info (right-click plugin name and click support)\",\n\t\tsection \u003d clanSection,\n\t\tposition \u003d 2\n\t)\n\tdefault String getShortClanName()\n\t{\n\t\treturn DEFAULT_CUSTOM_CHANNEL_NAME;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"removeClanRank\",\n\t\tname \u003d \"Remove clan rank\",\n\t\tdescription \u003d \"Remove ranks from usernames in the clan chat\",\n\t\tsection \u003d clanSection,\n\t\tposition \u003d 3\n\t)\n\tdefault boolean removeClanRank()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigSection(\n\t\tname \u003d \"Guest Clan Chat\",\n\t\tdescription \u003d \"Configure guest clan chat\",\n\t\tposition \u003d 15\n\t)\n\tString guestClanSection \u003d \"guestClanSection\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"removeGuestClanInstruction\",\n\t\tname \u003d \"Remove startup message\",\n\t\tdescription \u003d \"Remove message telling you how to chat in your guest clan channel\",\n\t\tsection \u003d guestClanSection,\n\t\tposition \u003d 0\n\t)\n\tdefault boolean removeGuestClanInstruction()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"removeGuestClanReconnecting\",\n\t\tname \u003d \"Remove reconnecting message\",\n\t\tdescription \u003d \"Remove \u0027Attempting to reconnect...\u0027 message in your guest clan channel\",\n\t\tsection \u003d guestClanSection,\n\t\tposition \u003d 1\n\t)\n\tdefault boolean removeGuestClanReconnecting()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"removeGuestClanName\",\n\t\tname \u003d \"Remove guest clan name\",\n\t\tdescription \u003d \"Remove guest clan name from guest clan chat messages\",\n\t\tsection \u003d guestClanSection,\n\t\tposition \u003d 2\n\t)\n\tdefault boolean removeGuestClanName()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"shortGuestClanName\",\n\t\tname \u003d \"Custom guest clan name\",\n\t\tdescription \u003d \"Replace your guest clan name with a custom one in guest clan chat messages\u003cbr\u003e\" +\n\t\t\t\"Leave blank (or the default value) to disable\u003cbr\u003e\" +\n\t\t\t\"You can reference your current clan name using $$\u003cbr\u003e\" +\n\t\t\t\"See the plugin details page for more info (right-click plugin name and click support)\",\n\t\tsection \u003d guestClanSection,\n\t\tposition \u003d 3\n\t)\n\tdefault String getShortGuestClanName()\n\t{\n\t\treturn DEFAULT_CUSTOM_CHANNEL_NAME;\n\t}\n\n\t// TODO: guest clan ranks?\n\n\t@ConfigSection(\n\t\tname \u003d \"Group Iron Chat\",\n\t\tdescription \u003d \"Configure group iron chat\",\n\t\tposition \u003d 20\n\t)\n\tString ironSection \u003d \"ironSection\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"removeGroupIronInstruction\",\n\t\tname \u003d \"Remove startup message\",\n\t\tdescription \u003d \"Remove message telling you how to chat in your GIM channel\",\n\t\tsection \u003d ironSection,\n\t\tposition \u003d 0\n\t)\n\tdefault boolean removeGroupIronInstruction()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"removeGroupIronName\",\n\t\tname \u003d \"Remove GIM name\",\n\t\tdescription \u003d \"Remove GIM name from GIM chat messages\",\n\t\tsection \u003d ironSection,\n\t\tposition \u003d 1\n\t)\n\tdefault boolean removeGroupIronName()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"moveGroupIronBroadcasts\",\n\t\tname \u003d \"Move GIM broadcasts\",\n\t\tdescription \u003d \"Remove GIM broadcasts from the clan chat tab, only display them in the group tab\",\n\t\tsection \u003d ironSection,\n\t\tposition \u003d 2\n\t)\n\tdefault boolean removeGroupIronFromClan()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"shortGroupIronName\",\n\t\tname \u003d \"Custom GIM name\",\n\t\tdescription \u003d \"Replace your GIM name with a custom one in GIM chat messages\u003cbr\u003e\" +\n\t\t\t\"Leave blank (or the default value) to disable\u003cbr\u003e\" +\n\t\t\t\"You can reference your current clan name using $$\u003cbr\u003e\" +\n\t\t\t\"See the plugin details page for more info (right-click plugin name and click support)\",\n\t\tsection \u003d ironSection,\n\t\tposition \u003d 3\n\t)\n\tdefault String getShortGroupIronName()\n\t{\n\t\treturn DEFAULT_CUSTOM_CHANNEL_NAME;\n\t}\n\n\t// TODO: Remove GIM icon in GIM chat?\n\n\t@ConfigSection(\n\t\tname \u003d \"Friends Chat\",\n\t\tdescription \u003d \"Configure friends chat\",\n\t\tposition \u003d 30\n\t)\n\tString friendsSection \u003d \"friendsSection\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"removeFriendsChatInstruction\",\n\t\tname \u003d \"Remove startup message\",\n\t\tdescription \u003d \"Remove message telling you how to chat in your friends channel\",\n\t\tsection \u003d friendsSection,\n\t\tposition \u003d 0\n\t)\n\tdefault boolean removeFriendsChatStartup()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"removeFriendsChatName\",\n\t\tname \u003d \"Remove friends chat name\",\n\t\tdescription \u003d \"Remove friends chat name from friends chat channel messages\",\n\t\tsection \u003d friendsSection,\n\t\tposition \u003d 1\n\t)\n\tdefault boolean removeFriendsChatName()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"removeFriendsAttempting\",\n\t\tname \u003d \"Remove \u0027attempting to join\u0027\",\n\t\tdescription \u003d \"Remove \u0027Attempting to join...\u0027 message from friends chat channel\",\n\t\tsection \u003d friendsSection,\n\t\tposition \u003d 2\n\t)\n\tdefault boolean removeFriendsAttempting()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"removeFriendsNowTalking\",\n\t\tname \u003d \"Remove \u0027now talking in\u0027\",\n\t\tdescription \u003d \"Remove \u0027Now talking in chat-channel...\u0027 message from friends chat channel\",\n\t\tsection \u003d friendsSection,\n\t\tposition \u003d 3\n\t)\n\tdefault boolean removeFriendsNowTalking()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"shortFriendsName\",\n\t\tname \u003d \"Custom friends chat name\",\n\t\tdescription \u003d \"Replace your friends chat name with a custom one in friends chat messages\u003cbr\u003e\" +\n\t\t\t\"Leave blank (or the default value) to disable\u003cbr\u003e\" +\n\t\t\t\"You can reference your current clan name using $$\u003cbr\u003e\" +\n\t\t\t\"See the plugin details page for more info (right-click plugin name and click support)\",\n\t\tsection \u003d friendsSection,\n\t\tposition \u003d 4\n\t)\n\tdefault String getShortFriendsName()\n\t{\n\t\treturn DEFAULT_CUSTOM_CHANNEL_NAME;\n\t}\n\n\t// TODO: Friends chat rank? Can you even see those?\n\n}\n","filePath":"src/main/java/com/github/ldavid432/cleanchat/CleanChatChannelsConfig.java"},{"fileName":"ChannelNameManager.java","content":"package com.github.ldavid432.cleanchat;\n\nimport static com.github.ldavid432.cleanchat.CleanChatChannelsConfig.DEFAULT_CUSTOM_CHANNEL_NAME;\nimport static com.github.ldavid432.cleanchat.CleanChatUtil.MAX_CHANNEL_LIST_SIZE;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Objects;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.FriendsChatManager;\nimport net.runelite.api.GameState;\nimport net.runelite.api.clan.ClanChannel;\nimport net.runelite.api.clan.ClanID;\nimport net.runelite.api.events.ClanChannelChanged;\nimport net.runelite.api.events.FriendsChatChanged;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\n\n/**\n * Tracks current and previous chat channel names for use in the ChatWidgetEditor\n */\n@Slf4j\n@Singleton\npublic class ChannelNameManager\n{\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate CleanChatChannelsConfig config;\n\n\t// Store these as a collection so that even if you leave a channel the chats will still be \"cleaned\"\n\t@Getter\n\tprivate final List\u003cString\u003e clanNames \u003d new ArrayList\u003c\u003e();\n\t@Getter\n\tprivate final List\u003cString\u003e guestClanNames \u003d new ArrayList\u003c\u003e();\n\t@Getter\n\tprivate final List\u003cString\u003e friendsChatNames \u003d new ArrayList\u003c\u003e();\n\t@Getter\n\tprivate final List\u003cString\u003e groupIronNames \u003d new ArrayList\u003c\u003e();\n\n\t@Getter\n\tprivate String shortClanName \u003d DEFAULT_CUSTOM_CHANNEL_NAME;\n\t@Getter\n\tprivate String shortGuestClanName \u003d DEFAULT_CUSTOM_CHANNEL_NAME;\n\t@Getter\n\tprivate String shortFriendsChatName \u003d DEFAULT_CUSTOM_CHANNEL_NAME;\n\t@Getter\n\tprivate String shortGroupIronName \u003d DEFAULT_CUSTOM_CHANNEL_NAME;\n\n\tpublic void startup()\n\t{\n\t\tif (client.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tclientThread.invokeLater(() -\u003e {\n\t\t\t\tupdateFriendsChatName();\n\n\t\t\t\tClanChannel clanChannel \u003d client.getClanChannel(ClanID.CLAN);\n\t\t\t\tif (clanChannel !\u003d null)\n\t\t\t\t{\n\t\t\t\t\taddName(clanNames, clanChannel.getName());\n\t\t\t\t}\n\n\t\t\t\tClanChannel groupIronChannel \u003d client.getClanChannel(ClanID.GROUP_IRONMAN);\n\t\t\t\tif (groupIronChannel !\u003d null)\n\t\t\t\t{\n\t\t\t\t\taddName(groupIronNames, groupIronChannel.getName());\n\t\t\t\t}\n\n\t\t\t\tClanChannel guestClanChannel \u003d client.getGuestClanChannel();\n\t\t\t\tif (guestClanChannel !\u003d null)\n\t\t\t\t{\n\t\t\t\t\taddName(guestClanNames, guestClanChannel.getName());\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tupdateShortNames();\n\t}\n\n\tpublic void shutdown()\n\t{\n\t\tclanNames.clear();\n\t\tgroupIronNames.clear();\n\t\tguestClanNames.clear();\n\t\tfriendsChatNames.clear();\n\t}\n\n\t@Subscribe\n\tpublic void onClanChannelChanged(ClanChannelChanged event)\n\t{\n\t\tString channelName \u003d event.getClanChannel() !\u003d null ? event.getClanChannel().getName() : null;\n\n\t\tif (channelName \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (event.getClanId())\n\t\t{\n\t\t\tcase CleanChatUtil.GUEST_CLAN:\n\t\t\t\taddName(guestClanNames, channelName);\n\t\t\t\tbreak;\n\t\t\tcase ClanID.CLAN:\n\t\t\t\taddName(clanNames, channelName);\n\t\t\t\tbreak;\n\t\t\tcase ClanID.GROUP_IRONMAN:\n\t\t\t\taddName(groupIronNames, channelName);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onFriendsChatChanged(FriendsChatChanged event)\n\t{\n\t\tif (event.isJoined())\n\t\t{\n\t\t\tupdateFriendsChatName();\n\t\t}\n\t}\n\n\tpublic void updateFriendsChatName()\n\t{\n\t\tFriendsChatManager friendsChatManager \u003d client.getFriendsChatManager();\n\t\t// This is null at the first FriendsChatChanged after login\n\t\tif (friendsChatManager !\u003d null)\n\t\t{\n\t\t\taddName(friendsChatNames, friendsChatManager.getName());\n\t\t}\n\t}\n\n\tprivate void addName(List\u003cString\u003e nameList, String name)\n\t{\n\t\tif (nameList.contains(name) || name \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (nameList.size() \u003d\u003d MAX_CHANNEL_LIST_SIZE)\n\t\t{\n\t\t\tnameList.remove(0);\n\t\t}\n\n\t\tnameList.add(name);\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif (Objects.equals(event.getGroup(), CleanChatChannelsConfig.GROUP) \u0026\u0026 event.getKey().startsWith(\"short\"))\n\t\t{\n\t\t\tupdateShortNames();\n\t\t}\n\t}\n\n\tprivate void updateShortNames()\n\t{\n\t\tshortClanName \u003d config.getShortClanName();\n\t\tshortGuestClanName \u003d config.getShortGuestClanName();\n\t\tshortFriendsChatName \u003d config.getShortFriendsName();\n\t\tshortGroupIronName \u003d config.getShortGroupIronName();\n\t}\n}\n","filePath":"src/main/java/com/github/ldavid432/cleanchat/ChannelNameManager.java"},{"fileName":"CleanChatTest.java","content":"package com.github.ldavid432;\n\nimport com.github.ldavid432.cleanchat.CleanChatChannelsPlugin;\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class CleanChatTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(CleanChatChannelsPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}\n","filePath":"src/test/java/com/github/ldavid432/CleanChatTest.java"}]},{"commit":"1afd76d4a06cb9b904fe67436dd6953ca8b11371","repository":"https://github.com/m0bilebtw/c-engineer-completed.git","internalName":"c-engineer-completed","files":[{"fileName":"EasterEggTriggers.java","content":"package com.github.m0bilebtw.eastereggs;\n\nimport com.github.m0bilebtw.CEngineerCompletedConfig;\nimport com.github.m0bilebtw.player.CEngineerPlayer;\nimport com.github.m0bilebtw.player.LoggedInState;\nimport com.github.m0bilebtw.sound.Sound;\nimport com.github.m0bilebtw.sound.SoundEngine;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GrandExchangeOffer;\nimport net.runelite.api.GrandExchangeOfferState;\nimport net.runelite.api.Scene;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GrandExchangeOfferChanged;\nimport net.runelite.api.events.MenuOptionClicked;\nimport net.runelite.api.gameval.ItemID;\nimport net.runelite.client.eventbus.Subscribe;\n\nimport javax.inject.Inject;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\n/**\n * Easter eggs that normal accounts can trigger in normal gameplay.\n * These are separate to the trolls that C Engineer can trigger.\n */\npublic class EasterEggTriggers {\n    private static final int ID_OBJECT_LUMCASTLE_GROUND_LEVEL_STAIRCASE \u003d 16671;\n    private static final int WORLD_POINT_LUMCASTLE_STAIRCASE_NORTH_X \u003d 3204;\n    private static final int WORLD_POINT_LUMCASTLE_STAIRCASE_NORTH_Y \u003d 3229;\n\n    private static final String ZULRAH \u003d \"Zulrah\";\n    private static final int ZULRAH_KILL_TO_PB_MESSAGE_LENIENCY \u003d 1;\n    // Killcount and new pb patterns originally from runelite/ChatCommandsPlugin\n    private static final Pattern KILLCOUNT_PATTERN \u003d Pattern.compile(\"Your (?:completion count for |subdued |completed )?(.+?) (?:(?:kill|harvest|lap|completion) )?(?:count )?is: \u003ccol\u003dff0000\u003e(\\\\d+)\u003c/col\u003e\");\n    private static final Pattern NEW_PB_PATTERN \u003d Pattern.compile(\"(?i)(?:(?:Fight |Lap |Challenge |Corrupted challenge )?duration:|Subdued in) \u003ccol\u003d[0-9a-f]{6}\u003e[0-9:]+(?:\\\\.\\\\d+)?\u003c/col\u003e \\\\(new personal best\\\\)\");\n    private static final Pattern STRAY_DOG_GIVEN_BONES_REGEX \u003d Pattern.compile(\"You give the dog some nice.*bones.*\");\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private CEngineerCompletedConfig config;\n\n    @Inject\n    private ScheduledExecutorService executor;\n\n    @Inject\n    private SoundEngine soundEngine;\n\n    @Inject\n    private CEngineerPlayer cEngineer;\n\n    @Inject\n    private LoggedInState loggedInState;\n\n    private int lastGEOfferTick \u003d -1;\n    private int lastZulrahKillTick \u003d -1;\n\n    @Subscribe\n    public void onMenuOptionClicked(MenuOptionClicked menuOptionClicked) {\n        if (!config.easterEggs())\n            return;\n\n        if (menuOptionClicked.getId() \u003d\u003d ID_OBJECT_LUMCASTLE_GROUND_LEVEL_STAIRCASE \u0026\u0026 menuOptionClicked.getMenuOption().equals(\"Climb-up\")) {\n            Scene scene \u003d client.getWorldView(menuOptionClicked.getMenuEntry().getWorldViewId()).getScene();\n            LocalPoint lp \u003d LocalPoint.fromScene(menuOptionClicked.getParam0(), menuOptionClicked.getParam1(), scene);\n            WorldPoint wp \u003d WorldPoint.fromLocal(client, lp);\n            if (wp.getX() \u003d\u003d WORLD_POINT_LUMCASTLE_STAIRCASE_NORTH_X \u0026\u0026 wp.getY() \u003d\u003d WORLD_POINT_LUMCASTLE_STAIRCASE_NORTH_Y) {\n                // Now we know this is the northern staircase only in Lumbridge castle ground floor\n                cEngineer.sendChatIfEnabled(\"Please do not use the northern staircase, use the southern one instead.\");\n                soundEngine.playClip(Sound.EASTER_EGG_STAIRCASE, executor);\n            }\n        }\n    }\n\n    @Subscribe\n    public void onGrandExchangeOfferChanged(GrandExchangeOfferChanged offerEvent) {\n        if (!config.easterEggs())\n            return;\n\n        if (loggedInState.isLoggedOut() || loggedInState.onlyJustLoggedIn(3)) {\n            return; // Ignoring offer change as likely simply because user just logged in\n        }\n\n        GrandExchangeOffer offer \u003d offerEvent.getOffer();\n        if (offer.getItemId() \u003d\u003d ItemID.TWISTED_BOW \u0026\u0026\n                offer.getPrice() \u003d\u003d 1 \u0026\u0026\n                offer.getState() \u003d\u003d GrandExchangeOfferState.SELLING \u0026\u0026\n                // check ticks to avoid double detection because we get sent each offer twice\n                (lastGEOfferTick \u003d\u003d -1 || client.getTickCount() - lastGEOfferTick \u003e 4)) {\n            cEngineer.sendChatIfEnabled(\"Are you stupid? Did you just try to sell a twisted bow for 1gp?\");\n            soundEngine.playClip(Sound.EASTER_EGG_TWISTED_BOW_1GP, executor);\n        }\n\n        // save tick so that next time we get an offer, we can check it isn\u0027t the duplicate of this offer\n        lastGEOfferTick \u003d client.getTickCount();\n    }\n\n    @Subscribe\n    public void onChatMessage(ChatMessage chatMessage) {\n        if (chatMessage.getType() !\u003d ChatMessageType.GAMEMESSAGE \u0026\u0026 chatMessage.getType() !\u003d ChatMessageType.SPAM)\n            return;\n\n        if (!config.easterEggs())\n            return;\n\n        if (STRAY_DOG_GIVEN_BONES_REGEX.matcher(chatMessage.getMessage()).matches()) {\n            cEngineer.sendChatIfEnabled(\"I love you.\");\n            soundEngine.playClip(Sound.EASTER_EGG_STRAYDOG_BONE, executor);\n        } else {\n            checkForZulrahPB(chatMessage);\n        }\n    }\n\n    private void checkForZulrahPB(ChatMessage chatMessage) {\n        Matcher kcMatcher \u003d KILLCOUNT_PATTERN.matcher(chatMessage.getMessage());\n        if (kcMatcher.find() \u0026\u0026 ZULRAH.equals(kcMatcher.group(1))) {\n            lastZulrahKillTick \u003d client.getTickCount();\n            return;\n        }\n\n        Matcher pbMatcher \u003d NEW_PB_PATTERN.matcher(chatMessage.getMessage());\n        if (pbMatcher.find() \u0026\u0026 client.getTickCount() - lastZulrahKillTick \u003c\u003d ZULRAH_KILL_TO_PB_MESSAGE_LENIENCY) {\n            // Player just got pb, and last zulrah kill was within a tick from now\n            cEngineer.sendChatIfEnabled(\"Gz on the new personal best! Last time I got a pb here, I died on my HCIM!\");\n            soundEngine.playClip(Sound.EASTER_EGG_ZULRAH_PB, executor);\n        }\n    }\n}\n","filePath":"src/main/java/com/github/m0bilebtw/eastereggs/EasterEggTriggers.java"},{"fileName":"CEngineerCompletedPlugin.java","content":"package com.github.m0bilebtw;\n\nimport com.github.m0bilebtw.announce.AnnouncementTriggers;\nimport com.github.m0bilebtw.eastereggs.EasterEggTriggers;\nimport com.github.m0bilebtw.player.CEngineerPlayer;\nimport com.github.m0bilebtw.player.LoggedInState;\nimport com.github.m0bilebtw.qol.QualityOfLifeTriggers;\nimport com.github.m0bilebtw.sound.SoundFileManager;\nimport com.github.m0bilebtw.trolls.TrollTriggers;\nimport com.google.inject.Provides;\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport okhttp3.OkHttpClient;\n\nimport javax.inject.Inject;\nimport java.util.concurrent.ScheduledExecutorService;\n\n@Slf4j\n@PluginDescriptor(\n        name \u003d \"C Engineer: Completed\",\n        description \u003d \"C Engineer announces when you complete an achievement\",\n        tags \u003d {\"c engineer\", \"stats\", \"levels\", \"quests\", \"diary\", \"announce\"}\n)\n\npublic class CEngineerCompletedPlugin extends Plugin {\n    @Inject\n    private Client client;\n\n    @Getter(AccessLevel.PACKAGE)\n    @Inject\n    private ClientThread clientThread;\n\n    @Inject\n    private CEngineerCompletedConfig config;\n\n    @Inject\n    private ScheduledExecutorService executor;\n\n    @Inject\n    private OkHttpClient okHttpClient;\n\n    @Inject\n    private EventBus eventBus;\n\n    @Inject\n    private CEngineerPlayer cEngineer;\n\n    @Inject\n    private AnnouncementTriggers announcementTriggers;\n\n    @Inject\n    private EasterEggTriggers easterEggTriggers;\n\n    @Inject\n    private TrollTriggers trollTriggers;\n\n    @Inject\n    private QualityOfLifeTriggers qolTriggers;\n\n    @Inject\n    private LoggedInState loggedInState;\n\n    @Override\n    protected void startUp() throws Exception {\n        eventBus.register(cEngineer);\n        eventBus.register(announcementTriggers);\n        eventBus.register(easterEggTriggers);\n        eventBus.register(trollTriggers);\n        eventBus.register(qolTriggers);\n        eventBus.register(loggedInState);\n        loggedInState.setForCurrentGameState(client.getGameState());\n        announcementTriggers.initialise();\n\n        executor.submit(() -\u003e SoundFileManager.prepareSoundFiles(okHttpClient, config.downloadStreamerTrolls()));\n    }\n\n    @Override\n    protected void shutDown() throws Exception {\n        eventBus.unregister(cEngineer);\n        eventBus.unregister(announcementTriggers);\n        eventBus.unregister(easterEggTriggers);\n        eventBus.unregister(trollTriggers);\n        eventBus.unregister(qolTriggers);\n        eventBus.unregister(loggedInState);\n\n        announcementTriggers.shutDown();\n    }\n\n    @Provides\n    CEngineerCompletedConfig provideConfig(ConfigManager configManager) {\n        return configManager.getConfig(CEngineerCompletedConfig.class);\n    }\n}\n","filePath":"src/main/java/com/github/m0bilebtw/CEngineerCompletedPlugin.java"},{"fileName":"QualityOfLifeTriggers.java","content":"package com.github.m0bilebtw.qol;\n\nimport com.github.m0bilebtw.CEngineerCompletedConfig;\nimport com.github.m0bilebtw.player.CEngineerPlayer;\nimport com.github.m0bilebtw.player.LoggedInState;\nimport com.github.m0bilebtw.sound.Sound;\nimport com.github.m0bilebtw.sound.SoundEngine;\nimport net.runelite.api.Actor;\nimport net.runelite.api.Client;\nimport net.runelite.api.ItemContainer;\nimport net.runelite.api.Player;\nimport net.runelite.api.events.ActorDeath;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.api.gameval.InventoryID;\nimport net.runelite.api.gameval.ItemID;\nimport net.runelite.api.gameval.VarbitID;\nimport net.runelite.client.eventbus.Subscribe;\n\nimport javax.inject.Inject;\nimport java.util.Set;\nimport java.util.concurrent.ScheduledExecutorService;\n\npublic class QualityOfLifeTriggers {\n    private static final int INFERNAL_PARCHMENT_WARN_COOLDOWN \u003d 36;\n    private static final Set\u003cInteger\u003e BOUNTY_HUNTER_REGIONS \u003d Set.of(13374, 13375, 13376, 13630, 13631, 13632, 13886, 13887, 13888);\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private CEngineerCompletedConfig config;\n\n    @Inject\n    private ScheduledExecutorService executor;\n\n    @Inject\n    private SoundEngine soundEngine;\n\n    @Inject\n    private CEngineerPlayer cEngineer;\n\n    @Inject\n    private LoggedInState loggedInState;\n\n    private static final String GEMSTONE_CRAB_ACTOR_NAME \u003d \"Gemstone Crab\";\n\n    private int lastInfernalParchmentWarningTick \u003d -1;\n\n    @Subscribe\n    public void onVarbitChanged(VarbitChanged varbitChanged) {\n        if (varbitChanged.getVarbitId() \u003d\u003d VarbitID.INSIDE_WILDERNESS \u0026\u0026 varbitChanged.getValue() \u003d\u003d 1) {\n            checkAndWarnForUnparchmentedInfernal();\n        }\n    }\n\n    @Subscribe\n    public void onActorDeath(ActorDeath actorDeath) {\n        if (!config.announceGemstoneCrabMovement())\n            return;\n\n        Actor actor \u003d actorDeath.getActor();\n        if (client.getLocalPlayer().getInteracting() \u003d\u003d actor \u0026\u0026 GEMSTONE_CRAB_ACTOR_NAME.equals(actor.getName())) {\n            cEngineer.sendChatIfEnabled(\"The gem crab has moved!\");\n            soundEngine.playClip(Sound.QOL_GEM_CRAB_MOVED, executor);\n        }\n    }\n\n    private void checkAndWarnForUnparchmentedInfernal() {\n        if (!config.announceNonTrouverInfernal())\n            return;\n\n        if (loggedInState.isLoggedOut())\n            return;\n\n        if (lastInfernalParchmentWarningTick !\u003d -1 \u0026\u0026 client.getTickCount() - lastInfernalParchmentWarningTick \u003c INFERNAL_PARCHMENT_WARN_COOLDOWN)\n            return;\n\n        if (atBountyHunter())\n            return;\n\n        ItemContainer equipment \u003d client.getItemContainer(InventoryID.WORN);\n        boolean warnForEquip \u003d equipment !\u003d null \u0026\u0026\n                (equipment.contains(ItemID.INFERNAL_CAPE) || equipment.contains(ItemID.SKILLCAPE_MAX_INFERNALCAPE_DUMMY));\n        ItemContainer inventory \u003d client.getItemContainer(InventoryID.INV);\n        boolean warnForInvent \u003d inventory !\u003d null \u0026\u0026\n                (inventory.contains(ItemID.INFERNAL_CAPE) || inventory.contains(ItemID.SKILLCAPE_MAX_INFERNALCAPE_DUMMY));\n\n        if (warnForEquip || warnForInvent) {\n            lastInfernalParchmentWarningTick \u003d client.getTickCount();\n            cEngineer.sendChatIfEnabled(\"Your infernal cape is not parched!\");\n            soundEngine.playClip(Sound.QOL_NON_PARCH_INFERNAL, executor);\n        }\n    }\n\n    private boolean atBountyHunter() {\n        Player player \u003d client.getLocalPlayer();\n        if (player \u003d\u003d null)\n            return false;\n\n        int regionId \u003d player.getWorldLocation().getRegionID();\n        return BOUNTY_HUNTER_REGIONS.contains(regionId);\n    }\n}\n","filePath":"src/main/java/com/github/m0bilebtw/qol/QualityOfLifeTriggers.java"},{"fileName":"AnnouncementTriggers.java","content":"package com.github.m0bilebtw.announce;\n\nimport com.github.m0bilebtw.CEngineerCompletedConfig;\nimport com.github.m0bilebtw.player.CEngineerPlayer;\nimport com.github.m0bilebtw.player.LoggedInState;\nimport com.github.m0bilebtw.sound.Sound;\nimport com.github.m0bilebtw.sound.SoundEngine;\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.Experience;\nimport net.runelite.api.GameState;\nimport net.runelite.api.Skill;\nimport net.runelite.api.annotations.Varbit;\nimport net.runelite.api.events.ActorDeath;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.StatChanged;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.api.events.WidgetLoaded;\nimport net.runelite.api.gameval.InterfaceID;\nimport net.runelite.api.gameval.ItemID;\nimport net.runelite.api.gameval.VarbitID;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.chat.ChatColorType;\nimport net.runelite.client.chat.ChatMessageBuilder;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.chat.QueuedMessage;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.events.NpcLootReceived;\nimport net.runelite.client.game.ItemStack;\nimport net.runelite.client.util.Text;\n\nimport javax.inject.Inject;\nimport java.util.Collection;\nimport java.util.EnumMap;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Random;\nimport java.util.Set;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.regex.Pattern;\n\n@Slf4j\npublic class AnnouncementTriggers {\n    private static final Pattern COLLECTION_LOG_ITEM_REGEX \u003d Pattern.compile(\"New item added to your collection log:.*\");\n    private static final Pattern COMBAT_TASK_REGEX \u003d Pattern.compile(\"CA_ID:\\\\d+\\\\|Congratulations, you\u0027ve completed an? \\\\w+ combat task:.*\");\n    private static final Pattern LEAGUES_TASK_REGEX \u003d Pattern.compile(\"Congratulations, you\u0027ve completed an? \\\\w+ task:.*\");\n    private static final Pattern GRID_TILE_REGEX \u003d Pattern.compile(\"Congratulations, you\u0027ve completed the Grid Tile:.*\");\n    private static final Pattern QUEST_REGEX \u003d Pattern.compile(\"Congratulations, you\u0027ve completed a quest:.*\");\n    private static final Pattern SLAYER_TASK_REGEX \u003d Pattern.compile(\"You have completed your task! You killed .*. You gained .* xp.\");\n    private static final String HUNTER_RUMOUR_MESSAGE \u003d Text.standardize(\"You find a rare piece of the creature! You should take it back to the Hunter Guild.\");\n    private static final String HUNTER_RUMOUR_FULL_INV_MESSAGE \u003d Text.standardize(\"You find a rare piece of the creature! Though without space in your inventory, it drops to the ground.\");\n    private static final String HUNTER_RUMOUR_FULL_INV_DISCARDED_MESSAGE \u003d Text.standardize(\"You have found a rare piece of the creature! You then discard it as you had no inventory space to pick it up.\");\n    private static final String FARMING_CONTRACT_MESSAGE \u003d Text.standardize(\"You\u0027ve completed a Farming Guild Contract. You should return to Guildmaster Jane.\");\n\n    private static final Random random \u003d new Random();\n\n    private static final int[] VARBIT_IDS_ACHIEVEMENT_DIARIES \u003d {\n            VarbitID.ARDOUGNE_DIARY_EASY_COMPLETE,   VarbitID.ARDOUGNE_DIARY_MEDIUM_COMPLETE,   VarbitID.ARDOUGNE_DIARY_HARD_COMPLETE,   VarbitID.ARDOUGNE_DIARY_ELITE_COMPLETE,\n            VarbitID.DESERT_DIARY_EASY_COMPLETE, \t VarbitID.DESERT_DIARY_MEDIUM_COMPLETE, \tVarbitID.DESERT_DIARY_HARD_COMPLETE, \t VarbitID.DESERT_DIARY_ELITE_COMPLETE,\n            VarbitID.FALADOR_DIARY_EASY_COMPLETE,    VarbitID.FALADOR_DIARY_MEDIUM_COMPLETE,    VarbitID.FALADOR_DIARY_HARD_COMPLETE,    VarbitID.FALADOR_DIARY_ELITE_COMPLETE,\n            VarbitID.KANDARIN_DIARY_EASY_COMPLETE,   VarbitID.KANDARIN_DIARY_MEDIUM_COMPLETE,   VarbitID.KANDARIN_DIARY_HARD_COMPLETE,   VarbitID.KANDARIN_DIARY_ELITE_COMPLETE,\n            VarbitID.ATJUN_EASY_DONE,                VarbitID.ATJUN_MED_DONE,                   VarbitID.ATJUN_HARD_DONE,                VarbitID.KARAMJA_DIARY_ELITE_COMPLETE,\n            VarbitID.KOUREND_DIARY_EASY_COMPLETE,    VarbitID.KOUREND_DIARY_MEDIUM_COMPLETE,    VarbitID.KOUREND_DIARY_HARD_COMPLETE,    VarbitID.KOUREND_DIARY_ELITE_COMPLETE,\n            VarbitID.LUMBRIDGE_DIARY_EASY_COMPLETE,  VarbitID.LUMBRIDGE_DIARY_MEDIUM_COMPLETE,  VarbitID.LUMBRIDGE_DIARY_HARD_COMPLETE,  VarbitID.LUMBRIDGE_DIARY_ELITE_COMPLETE,\n            VarbitID.MORYTANIA_DIARY_EASY_COMPLETE,  VarbitID.MORYTANIA_DIARY_MEDIUM_COMPLETE,  VarbitID.MORYTANIA_DIARY_HARD_COMPLETE,  VarbitID.MORYTANIA_DIARY_ELITE_COMPLETE,\n            VarbitID.VARROCK_DIARY_EASY_COMPLETE,    VarbitID.VARROCK_DIARY_MEDIUM_COMPLETE,    VarbitID.VARROCK_DIARY_HARD_COMPLETE,    VarbitID.VARROCK_DIARY_ELITE_COMPLETE,\n            VarbitID.WESTERN_DIARY_EASY_COMPLETE,    VarbitID.WESTERN_DIARY_MEDIUM_COMPLETE,    VarbitID.WESTERN_DIARY_HARD_COMPLETE,    VarbitID.WESTERN_DIARY_ELITE_COMPLETE,\n            VarbitID.WILDERNESS_DIARY_EASY_COMPLETE, VarbitID.WILDERNESS_DIARY_MEDIUM_COMPLETE, VarbitID.WILDERNESS_DIARY_HARD_COMPLETE, VarbitID.WILDERNESS_DIARY_ELITE_COMPLETE,\n            VarbitID.FREMENNIK_DIARY_EASY_COMPLETE,  VarbitID.FREMENNIK_DIARY_MEDIUM_COMPLETE,  VarbitID.FREMENNIK_DIARY_HARD_COMPLETE,  VarbitID.FREMENNIK_DIARY_ELITE_COMPLETE\n    };\n\n    private static final Set\u003cInteger\u003e badCollectionLogNotificationSettingValues \u003d Set.of(0, 2);\n\n    private static final String onyxItemNameLowerCase \u003d \"onyx\";\n\n    @Inject\n    private Client client;\n\n    @Getter(AccessLevel.PACKAGE)\n    @Inject\n    private ClientThread clientThread;\n\n    @Inject\n    private ChatMessageManager chatMessageManager;\n\n    @Inject\n    private ScheduledExecutorService executor;\n\n    @Inject\n    private CEngineerCompletedConfig config;\n\n    @Inject\n    private ConfigManager configManager;\n\n    @Inject\n    private SoundEngine soundEngine;\n\n    @Inject\n    private CEngineerPlayer cEngineer;\n\n    @Inject\n    private LoggedInState loggedInState;\n\n    private final Map\u003cSkill, Integer\u003e oldExperience \u003d new EnumMap\u003c\u003e(Skill.class);\n    private final Map\u003cInteger, Integer\u003e oldAchievementDiaries \u003d new HashMap\u003c\u003e();\n\n    private int lastColLogSettingWarning \u003d -1;\n    private boolean delayedCoXColLogAnnouncementPending \u003d false;\n\n    public void initialise() {\n        clientThread.invoke(this::initialiseOldXPAndDiaryMaps);\n    }\n\n    public void shutDown() {\n        oldExperience.clear();\n        oldAchievementDiaries.clear();\n    }\n\n    private void initialiseOldXPAndDiaryMaps() {\n        if (loggedInState.isLoggedOut()) {\n            oldExperience.clear();\n            oldAchievementDiaries.clear();\n            return;\n        }\n        for (final Skill skill : Skill.values()) {\n            oldExperience.put(skill, client.getSkillExperience(skill));\n        }\n        for (@Varbit int diary : VARBIT_IDS_ACHIEVEMENT_DIARIES) {\n            int value \u003d client.getVarbitValue(diary);\n            oldAchievementDiaries.put(diary, value);\n        }\n    }\n\n    @Subscribe\n    public void onGameTick(GameTick gameTick) {\n        if (delayedCoXColLogAnnouncementPending) {\n            delayedCoXColLogAnnouncementPending \u003d isInChambersOfXeric();\n        }\n    }\n\n    @Subscribe\n    public void onGameStateChanged(GameStateChanged event) {\n        GameState gameState \u003d event.getGameState();\n\n        if (gameState !\u003d GameState.LOGGED_IN) {\n            if (gameState !\u003d GameState.CONNECTION_LOST) {\n                oldExperience.clear();\n                oldAchievementDiaries.clear();\n            }\n            lastColLogSettingWarning \u003d client.getTickCount(); // avoid warning during DC\n        } else if (config.needToInformAboutDelayedCoXColLog()) {\n            configManager.setConfiguration(CEngineerCompletedConfig.GROUP, CEngineerCompletedConfig.DELAY_COX_COL_LOG_HIDDEN_NOTIFY_CONFIG, false);\n            sendHighlightedMessageForDelayedCoXColLogSetting();\n        }\n    }\n\n    @Subscribe\n    public void onStatChanged(StatChanged statChanged) {\n        final Skill skill \u003d statChanged.getSkill();\n\n        // Modified from Nightfirecat\u0027s virtual level ups plugin as this info isn\u0027t (yet?) built in to statChanged event\n        final int xpAfter \u003d client.getSkillExperience(skill);\n        final int levelAfter \u003d Experience.getLevelForXp(xpAfter);\n        final int xpBefore \u003d oldExperience.getOrDefault(skill, -1);\n        final int levelBefore \u003d xpBefore \u003d\u003d -1 ? -1 : Experience.getLevelForXp(xpBefore);\n\n        oldExperience.put(skill, xpAfter);\n\n        // Do not proceed if any of the following are true:\n        //  * xpBefore \u003d\u003d -1              (don\u0027t fire when first setting new known value)\n        //  * xpAfter \u003c\u003d xpBefore         (do not allow 200m -\u003e 200m exp drops)\n        //  * levelBefore \u003e\u003d levelAfter   (stop if if we\u0027re not actually reaching a new level)\n        //  * levelAfter \u003e MAX_REAL_LEVEL \u0026\u0026 config says don\u0027t include virtual (level is virtual and config ignores virtual)\n        if (xpBefore \u003d\u003d -1 || xpAfter \u003c\u003d xpBefore || levelBefore \u003e\u003d levelAfter ||\n                (levelAfter \u003e Experience.MAX_REAL_LEVEL \u0026\u0026 !config.announceLevelUpIncludesVirtual())) {\n            return;\n        }\n\n        // If we get here, \u0027skill\u0027 was leveled up!\n        if (config.announceLevelUp()) {\n            cEngineer.sendChatIfEnabled(\"Level up: completed.\");\n            soundEngine.playClip(Sound.LEVEL_UP, executor);\n        }\n    }\n\n    @Subscribe\n    public void onVarbitChanged(VarbitChanged varbitChanged) {\n        if (varbitChanged.getVarbitId() \u003d\u003d VarbitID.OPTION_COLLECTION_NEW_ITEM) {\n            checkAndWarnForCollectionLogNotificationSetting(varbitChanged.getValue());\n        }\n\n        // As we can\u0027t listen to specific varbits, we get a tonne of events BEFORE the game has even set the player\u0027s\n        // diary varbits correctly, meaning it assumes every diary is on 0, then suddenly every diary that has been\n        // completed gets updated to the true value and tricks the plugin into thinking they only just finished it.\n        // To avoid this behaviour, we make sure the current tick count is sufficiently high that we\u0027ve already passed\n        // the initial wave of varbit changes from logging in.\n        if (loggedInState.isLoggedOut() || loggedInState.onlyJustLoggedIn(8)) {\n            return; // Ignoring varbit change as only just logged in\n        }\n\n        // Apparently I can\u0027t check if it\u0027s a particular varbit using the names from Varbits enum, so this is the way\n        for (@Varbit int diary : VARBIT_IDS_ACHIEVEMENT_DIARIES) {\n            int newValue \u003d client.getVarbitValue(diary);\n            int previousValue \u003d oldAchievementDiaries.getOrDefault(diary, -1);\n            oldAchievementDiaries.put(diary, newValue);\n            if (config.announceAchievementDiary() \u0026\u0026 previousValue !\u003d -1 \u0026\u0026 previousValue !\u003d newValue \u0026\u0026 isAchievementDiaryCompleted(diary, newValue)) {\n                // value was not unknown (we know the previous value), value has changed, and value indicates diary is completed now\n                cEngineer.sendChatIfEnabled(\"Achievement diary: completed.\");\n                soundEngine.playClip(Sound.ACHIEVEMENT_DIARY, executor);\n            }\n        }\n    }\n\n    private void checkAndWarnForCollectionLogNotificationSetting(int newVarbitValue) {\n        if (!config.announceCollectionLog() ||\n                loggedInState.isLoggedOut() ||\n                !badCollectionLogNotificationSettingValues.contains(newVarbitValue))\n            return;\n\n        if (lastColLogSettingWarning \u003d\u003d -1 || client.getTickCount() - lastColLogSettingWarning \u003e 16) {\n            lastColLogSettingWarning \u003d client.getTickCount();\n            sendHighlightedMessageForColLogNotifSetting();\n        }\n    }\n\n    private void sendHighlightedMessageForColLogNotifSetting() {\n        sendHighlightedMessage(\"Please enable \\\"Collection log - New addition notification\\\" in your game settings for C Engineer to know when to announce it! (The chat message one, pop-up doesn\u0027t matter)\");\n    }\n\n    private void sendHighlightedMessageForLeaguesTaskSetting() {\n        sendHighlightedMessage(\"C Engineer announcing leagues tasks might get spammy, but remember you can disable these announcements while keeping the others active in the plugin settings!\");\n    }\n\n    private void sendHighlightedMessageForDelayedCoXColLogSetting() {\n        sendHighlightedMessage(\"C Engineer announcing CoX collection log slots now delays until you open the chest, but you can change it back in the plugin settings!\");\n    }\n\n    private void sendHighlightedMessage(String message) {\n        String highlightedMessage \u003d new ChatMessageBuilder()\n                .append(ChatColorType.HIGHLIGHT)\n                .append(message)\n                .build();\n\n        chatMessageManager.queue(QueuedMessage.builder()\n                .type(ChatMessageType.CONSOLE)\n                .runeLiteFormattedMessage(highlightedMessage)\n                .build());\n    }\n\n    private boolean isAchievementDiaryCompleted(int diary, int value) {\n        switch (diary) {\n            case VarbitID.ATJUN_EASY_DONE:\n            case VarbitID.ATJUN_MED_DONE:\n            case VarbitID.ATJUN_HARD_DONE:\n                return value \u003d\u003d 2; // jagex, why?\n            default:\n                return value \u003d\u003d 1;\n        }\n    }\n\n    @Subscribe\n    public void onConfigChanged(ConfigChanged event) {\n        if (CEngineerCompletedConfig.GROUP.equals(event.getGroup())) {\n\n\t\t\tif (\"announcementVolume\".equals(event.getKey()) || \"selectAnySoundToTestPlayIt\".equals(event.getKey())) {\n\t\t\t\tsoundEngine.playClip(config.selectAnySoundToTestPlayIt(), executor);\n\t\t\t} else if (\"announceCollectionLog\".equals(event.getKey())) {\n                clientThread.invokeLater(() -\u003e\n                        checkAndWarnForCollectionLogNotificationSetting(client.getVarbitValue(VarbitID.OPTION_COLLECTION_NEW_ITEM)));\n            }\n        }\n    }\n\n    @Subscribe\n    public void onChatMessage(ChatMessage chatMessage) {\n        if (chatMessage.getType() !\u003d ChatMessageType.GAMEMESSAGE \u0026\u0026 chatMessage.getType() !\u003d ChatMessageType.SPAM)\n            return;\n\n        if (config.announceCollectionLog() \u0026\u0026 COLLECTION_LOG_ITEM_REGEX.matcher(chatMessage.getMessage()).matches()) {\n            if (config.delayCoXCollectionLogAnnouncements() \u0026\u0026 isInChambersOfXeric() \u0026\u0026 !Text.standardize(chatMessage.getMessage()).contains(onyxItemNameLowerCase)) {\n                delayedCoXColLogAnnouncementPending \u003d true;\n            } else {\n                announceColLog();\n            }\n\n        } else if (config.announceQuestCompletion() \u0026\u0026 QUEST_REGEX.matcher(chatMessage.getMessage()).matches()) {\n            cEngineer.sendChatIfEnabled(\"Quest: completed.\");\n            soundEngine.playClip(Sound.QUEST, executor);\n\n        } else if (config.announceCombatAchievement() \u0026\u0026 COMBAT_TASK_REGEX.matcher(chatMessage.getMessage()).matches()) {\n            cEngineer.sendChatIfEnabled(\"Combat task: completed.\");\n            soundEngine.playClip(Sound.COMBAT_TASK, executor);\n\n        } else if (config.announceLeaguesTasks() \u0026\u0026 LEAGUES_TASK_REGEX.matcher(chatMessage.getMessage()).matches()) {\n            cEngineer.sendChatIfEnabled(\"Leagues task: completed.\");\n            soundEngine.playClip(Sound.LEAGUES_TASK, executor);\n\n            if (config.needToRemindAboutDisablingLeaguesTasks()) {\n                configManager.setConfiguration(CEngineerCompletedConfig.GROUP, CEngineerCompletedConfig.LEAGUES_TASK_HIDDEN_REMINDER_CONFIG, false);\n                sendHighlightedMessageForLeaguesTaskSetting();\n            }\n\n        } else if (config.announceGridTiles() \u0026\u0026 GRID_TILE_REGEX.matcher(chatMessage.getMessage()).matches()) {\n            cEngineer.sendChatIfEnabled(\"Grid task: completed.\");\n            soundEngine.playClip(Sound.GRID_TASK, executor);\n\n        } else if (config.announceSlayerTasks() \u0026\u0026 SLAYER_TASK_REGEX.matcher(Text.removeTags(chatMessage.getMessage())).matches()) {\n            cEngineer.sendChatIfEnabled(\"Slayer task: completed.\");\n            soundEngine.playClip(Sound.SLAYER_TASK, executor);\n            return;\n        }\n\n        String standardizedMessage \u003d Text.standardize(chatMessage.getMessage());\n        if (config.announceHunterRumours() \u0026\u0026 (\n                HUNTER_RUMOUR_MESSAGE.equals(standardizedMessage) || HUNTER_RUMOUR_FULL_INV_MESSAGE.equals(standardizedMessage)\n        )) {\n            cEngineer.sendChatIfEnabled(\"Hunter Rumour: completed.\");\n            soundEngine.playClip(Sound.HUNTER_RUMOUR, executor);\n\n        } else if (config.announceHunterRumours() \u0026\u0026 HUNTER_RUMOUR_FULL_INV_DISCARDED_MESSAGE.equals(standardizedMessage)) {\n            cEngineer.sendChatIfEnabled(\"Hunter Rumour: not completed! You need more inventory space!\");\n            soundEngine.playClip(Sound.HUNTER_RUMOUR_NOT_COMPLETED, executor);\n\n        } else if (config.announceFarmingContracts() \u0026\u0026 FARMING_CONTRACT_MESSAGE.equals(standardizedMessage)) {\n            cEngineer.sendChatIfEnabled(\"Farming Contract: completed.\");\n            soundEngine.playClip(Sound.FARMING_CONTRACT, executor);\n        }\n    }\n\n    @Subscribe\n    public void onWidgetLoaded(WidgetLoaded widgetLoaded) {\n        if (delayedCoXColLogAnnouncementPending \u0026\u0026 widgetLoaded.getGroupId() \u003d\u003d InterfaceID.RAIDS_REWARDS) {\n            delayedCoXColLogAnnouncementPending \u003d false;\n            announceColLog();\n        }\n    }\n\n    private void announceColLog() {\n        cEngineer.sendChatIfEnabled(\"Collection log slot: completed.\");\n        soundEngine.playClip(Sound.COLLECTION_LOG_SLOT, executor);\n    }\n\n    @Subscribe\n    public void onNpcLootReceived(NpcLootReceived npcLootReceived) {\n        Collection\u003cItemStack\u003e loot \u003d npcLootReceived.getItems();\n        for (ItemStack itemStack : loot) {\n            int itemId \u003d itemStack.getId();\n\n            if (itemId \u003d\u003d ItemID.HOSDUN_GRUBBY_KEY \u0026\u0026 config.announceGrubbyKeyDrop()) {\n                cEngineer.sendChatIfEnabled(\"Another grubby key.\");\n                soundEngine.playClip(Sound.GRUBBY_KEY, executor);\n\n            } else if (itemId \u003d\u003d ItemID.SLAYER_WILDERNESS_KEY \u0026\u0026 config.announceLarransKeyDrop()) {\n                cEngineer.sendChatIfEnabled(\"Another Larran\u0027s key.\");\n                soundEngine.playClip(Sound.LARRANS_KEY, executor);\n\n            } else if (itemId \u003d\u003d ItemID.KONAR_KEY \u0026\u0026 config.announceBrimstoneKeyDrop()) {\n                cEngineer.sendChatIfEnabled(\"Another brimstone key.\");\n                soundEngine.playClip(Sound.BRIMSTONE_KEY, executor);\n            }\n        }\n    }\n\n    @Subscribe\n    public void onActorDeath(ActorDeath actorDeath) {\n        if (actorDeath.getActor() !\u003d client.getLocalPlayer())\n            return;\n\n        // Death easter egg and normal announcement kept together to make it one or the other, never both\n        if (config.easterEggs() \u0026\u0026 cEngineer.wasFightingMeRecently()) {\n            diedToCEngineer();\n        } else if (config.announceDeath()) {\n            diedToAnythingElse();\n        }\n    }\n\n    private void diedToCEngineer() {\n        if (random.nextBoolean()) {\n            cEngineer.sendChatIfEnabled(\"Dying to \" + CEngineerPlayer.RSN + \": completed.\");\n        } else {\n            cEngineer.sendChatIfEnabled(\"Sit\");\n        }\n        soundEngine.playClip(Sound.DEATH_TO_C_ENGINEER, executor);\n    }\n\n    private void diedToAnythingElse() {\n        cEngineer.sendChatIfEnabled(\"Dying on my HCIM: completed.\");\n        soundEngine.playClip(Sound.DEATH, executor);\n    }\n\n    private boolean isInChambersOfXeric() {\n        return client.getVarbitValue(VarbitID.RAIDS_CLIENT_INDUNGEON) \u003d\u003d 1;\n    }\n}\n","filePath":"src/main/java/com/github/m0bilebtw/announce/AnnouncementTriggers.java"},{"fileName":"SoundEngine.java","content":"package com.github.m0bilebtw.sound;\n\nimport com.github.m0bilebtw.CEngineerCompletedConfig;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.audio.AudioPlayer;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.time.Duration;\nimport java.util.concurrent.Executor;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.concurrent.TimeUnit;\n\n@Singleton\n@Slf4j\npublic class SoundEngine {\n\n    @Inject\n    private CEngineerCompletedConfig config;\n\n    @Inject\n    private AudioPlayer audioPlayer;\n\n    public void playClip(Sound sound, Executor executor) {\n        executor.execute(() -\u003e playClip(sound));\n    }\n\n    public void playClip(Sound sound, ScheduledExecutorService executor, Duration initialDelay) {\n        executor.schedule(() -\u003e playClip(sound), initialDelay.toMillis(), TimeUnit.MILLISECONDS);\n    }\n\n    private void playClip(Sound sound) {\n        float gain \u003d 20f * (float) Math.log10(config.announcementVolume() / 100f);\n\n        try {\n            audioPlayer.play(SoundFileManager.getSoundFile(sound), gain);\n        } catch (Exception e) {\n            log.warn(\"Failed to load C Engineer sound {}\", sound, e);\n        }\n    }\n}\n","filePath":"src/main/java/com/github/m0bilebtw/sound/SoundEngine.java"},{"fileName":"SoundFileManager.java","content":"package com.github.m0bilebtw.sound;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.RuneLite;\nimport okhttp3.HttpUrl;\nimport okhttp3.OkHttpClient;\nimport okhttp3.Request;\nimport okhttp3.Response;\n\nimport java.io.BufferedInputStream;\nimport java.io.File;\nimport java.io.IOException;\nimport java.nio.file.FileAlreadyExistsException;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.StandardCopyOption;\nimport java.util.Arrays;\nimport java.util.Set;\nimport java.util.stream.Collectors;\nimport java.util.stream.Stream;\n\nimport static java.util.function.Predicate.not;\n\n@Slf4j\npublic class SoundFileManager {\n    private SoundFileManager() {}\n\n    private static final Path DOWNLOAD_DIR \u003d Path.of(RuneLite.RUNELITE_DIR.getPath(), \"c-engineer-sounds\");\n    private static final String DELETE_WARNING_FILENAME \u003d \"_EXTRA_FILES_WILL_BE_DELETED_BUT_FOLDERS_WILL_REMAIN\";\n    private static final Path DELETE_WARNING_FILE \u003d DOWNLOAD_DIR.resolve(DELETE_WARNING_FILENAME);\n\n    private static final HttpUrl RAW_GITHUB \u003d HttpUrl.parse(\"https://raw.githubusercontent.com/m0bilebtw/c-engineer-completed/sounds\");\n\n    public static File getSoundFile(Sound sound) {\n        return DOWNLOAD_DIR.resolve(sound.getResourceName()).toFile();\n    }\n\n    public static void prepareSoundFiles(OkHttpClient okHttpClient, boolean downloadStreamerTrolls) {\n        ensureDownloadDirectoryExists();\n        deleteUndesiredFilesIgnoringFolders(downloadStreamerTrolls);\n        downloadNotYetPresentSounds(okHttpClient, downloadStreamerTrolls);\n    }\n\n    private static void ensureDownloadDirectoryExists() {\n       try {\n           if (!Files.exists(DOWNLOAD_DIR))\n                Files.createDirectories(DOWNLOAD_DIR);\n            Files.createFile(DELETE_WARNING_FILE);\n        } catch (FileAlreadyExistsException ignored) {\n            /* ignored */\n        } catch (IOException e) {\n            log.error(\"Could not create download directory or warning file\", e);\n        }\n    }\n\n    private static void deleteUndesiredFilesIgnoringFolders(boolean keepStreamerTrolls) {\n        Set\u003cString\u003e desiredSoundFileNames \u003d getDesiredSounds(keepStreamerTrolls)\n                .map(Sound::getResourceName)\n                .collect(Collectors.toSet());\n\n        Set\u003cPath\u003e toDelete \u003d getFilesPresent().stream()\n                .filter(not(desiredSoundFileNames::contains))\n                .map(DOWNLOAD_DIR::resolve)\n                .collect(Collectors.toSet());\n        try {\n            for (Path pathToDelete : toDelete) {\n                Files.delete(pathToDelete);\n            }\n        } catch (IOException e) {\n            log.error(\"Failed to delete disused sound files\", e);\n        }\n    }\n\n    private static void downloadNotYetPresentSounds(OkHttpClient okHttpClient, boolean downloadStreamerTrolls) {\n        getFilesToDownload(downloadStreamerTrolls)\n                .forEach(filename -\u003e downloadFilename(okHttpClient, filename));\n    }\n\n    private static void downloadFilename(OkHttpClient okHttpClient, String filename) {\n        if (RAW_GITHUB \u003d\u003d null) {\n            // Hush intellij, it\u0027s okay, the potential NPE can\u0027t hurt you now\n            log.error(\"C Engineer Completed could not download sounds due to an unexpected null RAW_GITHUB value\");\n            return;\n        }\n        HttpUrl soundUrl \u003d RAW_GITHUB.newBuilder().addPathSegment(filename).build();\n        Request request \u003d new Request.Builder().url(soundUrl).build();\n        try (Response res \u003d okHttpClient.newCall(request).execute()) {\n            if (res.body() !\u003d null)\n                Files.copy(new BufferedInputStream(res.body().byteStream()), DOWNLOAD_DIR.resolve(filename), StandardCopyOption.REPLACE_EXISTING);\n        } catch (IOException e) {\n            log.error(\"C Engineer Completed could not download sounds\", e);\n        }\n    }\n\n    private static Stream\u003cString\u003e getFilesToDownload(boolean downloadStreamerTrolls) {\n        Set\u003cString\u003e filesAlreadyPresent \u003d getFilesPresent();\n\n        return getDesiredSounds(downloadStreamerTrolls)\n                .map(Sound::getResourceName)\n                .filter(not(filesAlreadyPresent::contains));\n    }\n\n    private static Set\u003cString\u003e getFilesPresent() {\n        try (Stream\u003cPath\u003e paths \u003d Files.list(DOWNLOAD_DIR)) {\n            return paths\n                    .filter(path -\u003e !Files.isDirectory(path))\n                    .map(Path::toFile)\n                    .map(File::getName)\n                    .filter(filename -\u003e !DELETE_WARNING_FILENAME.equals(filename))\n                    .collect(Collectors.toSet());\n        } catch (IOException e) {\n            log.warn(\"Could not list files in {}, assuming it to be empty\", DOWNLOAD_DIR);\n            return Set.of();\n        }\n    }\n\n    private static Stream\u003cSound\u003e getDesiredSounds(boolean includeStreamerTrolls) {\n        return Arrays.stream(Sound.values())\n                .filter(sound -\u003e includeStreamerTrolls || !sound.isStreamerTroll());\n    }\n}\n","filePath":"src/main/java/com/github/m0bilebtw/sound/SoundFileManager.java"},{"fileName":"Sound.java","content":"package com.github.m0bilebtw.sound;\n\nimport lombok.Getter;\n\nimport java.util.Random;\n\npublic enum Sound {\n    LEVEL_UP(\"LevelUpCompleted_r2.wav\"),\n    QUEST(\"QuestCompleted_r2.wav\"),\n    COLLECTION_LOG_SLOT(\"ColLogSlotCompleted_r1.wav\"),\n    COMBAT_TASK(\"CombatTaskCompleted_r1.wav\"),\n    ACHIEVEMENT_DIARY(\"AchieveDiaryCompleted_r1.wav\"),\n    SLAYER_TASK(\"slayer_task_r2.wav\"),\n    HUNTER_RUMOUR(\"hunter_rumour_r2.wav\"),\n    HUNTER_RUMOUR_NOT_COMPLETED(\"hunter_rumour_not_completed_r1.wav\"),\n    FARMING_CONTRACT(\"farming_contract_r2.wav\"),\n    LEAGUES_TASK(\"leagues_task_r2.wav\"),\n    GRID_TASK(\"grid_task_r1.wav\"),\n    GRUBBY_KEY(\"grubby_key_r1.wav\"),\n    LARRANS_KEY(\"larrans_key_r1.wav\"),\n    BRIMSTONE_KEY(\"brimstone_key_r1.wav\"),\n    DEATH(\"DyingHCIMCompleted_r1.wav\"),\n    DEATH_TO_C_ENGINEER(\"Sit_r1.wav\"),\n\n    QOL_NON_PARCH_INFERNAL(\"Parched_Infernal_r1.wav\"),\n    QOL_GEM_CRAB_MOVED(\"gem_crab_moved_r1.wav\"),\n\n    EASTER_EGG_STAIRCASE(\"Staircase_r1.wav\"),\n    EASTER_EGG_STRAYDOG_BONE(\"ILoveYou_r2.wav\"),\n    EASTER_EGG_TWISTED_BOW_1GP(\"TwistedBow1GP_r1.wav\"),\n    EASTER_EGG_ZULRAH_PB(\"ZulrahPB_r1.wav\"),\n\n    ESCAPE_CRYSTAL(\"Escape_Crystal_r1.wav\", true),\n\n    SNOWBALL_CONSOLIDATED_V1_1(\"SnowballTrollV2_steamPings_r1.wav\", true),\n    SNOWBALL_CONSOLIDATED_V1_2(\"SnowballTrollV2_farts_r1.wav\", true),\n    SNOWBALL_CONSOLIDATED_V1_3(\"SnowballV3_Notif_r1.wav\", true),\n    SNOWBALL_CONSOLIDATED_V1_4(\"SnowballTrollV2_epicNotifSpam_r1.wav\", true),\n    SNOWBALL_CONSOLIDATED_V1_5(\"SnowballV3_Sus_r1.wav\", true),\n    SNOWBALL_CONSOLIDATED_V1_6(\"SnowballV4_7_r1.wav\", true),\n    SNOWBALL_CONSOLIDATED_V1_7(\"SnowballV3_Bits_r1.wav\", true),\n    SNOWBALL_CONSOLIDATED_V1_8(\"SnowballV3_Battery_r1.wav\", true),\n    SNOWBALL_CONSOLIDATED_V1_9(\"SnowballV4_6_r1.wav\", true),\n    SNOWBALL_CONSOLIDATED_V1_10(\"SnowballTroll3_r1.wav\", true),\n    SNOWBALL_CONSOLIDATED_V1_11(\"SnowballTroll1_r1.wav\", true),\n    SNOWBALL_CONSOLIDATED_V1_12(\"SnowballV3_Knock_r1.wav\", true),\n    SNOWBALL_CONSOLIDATED_V1_13(\"SnowballTroll8_r1.wav\", true),\n\n    SNOWBALL_GAUNTLET_LOBBY(\"SnowballV4_NR_Gauntlet_r1.wav\", true),\n\n    SNOWBALL_EQUIPPING_BUCKET_HELM_G_OR_FUNNY_FEEL(\"SnowballV4_NR_BucketHelmG_r1.wav\", true),\n    SNOWBALL_EQUIPPING_GIANT_BOOT(\"SnowballV4_NR_GiantBoot_r1.wav\", true),\n    SNOWBALL_EQUIPPING_SAGACIOUS_SPECTACLES(\"SnowballV4_NR_SagaciousSpectacles_r1.wav\", true),\n    SNOWBALL_EQUIPPING_MASK_OF_REBIRTH(\"SnowballV4_NR_MaskOfRebirth_r1.wav\", true),\n\n    EMOTE_TROLL_AKKHA(\"Akkha_r1.wav\", true),\n\n    EMOTE_TROLL_BABA_1(\"BaBa_1_r1.wav\", true),\n    EMOTE_TROLL_BABA_2(\"BaBa_2_r1.wav\", true),\n    EMOTE_TROLL_BABA_3(\"BaBa_3_r1.wav\", true),\n\n    EMOTE_TROLL_WE(\"Emote_We_r1.wav\", true),\n    EMOTE_TROLL_EL(\"Emote_El_r2.wav\", true),\n    EMOTE_TROLL_AF(\"AFriend2_Bye_r1.wav\", true),\n\n    ATTACK_TROLL_IB(\"attack_troll_IB_r1.wav\", true),\n    ATTACK_TROLL_DC(\"attack_troll_DC_r2.wav\", true),\n\n    CHAT_TROLL_SKILL_SPECS_HELLO(\"SkillSpecs_Hello_r1.wav\", true),\n    CHAT_TROLL_SKILL_SPECS_OK(\"SkillSpecs_OK_r1.wav\", true),\n    CHAT_TROLL_SKILL_SPECS_OOPS(\"SkillSpecs_Oops_r1.wav\", true),\n\n    TOB_GREEN_BALL(\"GreenBall_r1.wav\", true),\n\n    STAT_SPY_SOUP(\"StatSpy_Soup_r1.wav\", true),\n    ;\n\n    @Getter\n    private final String resourceName;\n    private final boolean isStreamerTroll;\n\n    Sound(String resNam) {\n        this(resNam, false);\n    }\n\n    Sound(String resNam, boolean streamTroll) {\n        resourceName \u003d resNam;\n        isStreamerTroll \u003d streamTroll;\n    }\n\n    boolean isStreamerTroll() {\n        return isStreamerTroll;\n    }\n\n    @Override\n    public String toString() {\n        return resourceName;\n    }\n\n    private static final Random random \u003d new Random();\n\n    public static Sound randomSnowballSoundNotFromEquippedItem() {\n        return SNOWBALL_SOUNDS_NOT_FROM_EQUIPPED_ITEMS[random.nextInt(SNOWBALL_SOUNDS_NOT_FROM_EQUIPPED_ITEMS.length)];\n    }\n\n    private static final Sound[] SNOWBALL_SOUNDS_NOT_FROM_EQUIPPED_ITEMS \u003d new Sound[] {\n            SNOWBALL_CONSOLIDATED_V1_1,\n            SNOWBALL_CONSOLIDATED_V1_2,\n            SNOWBALL_CONSOLIDATED_V1_3,\n            SNOWBALL_CONSOLIDATED_V1_4,\n            SNOWBALL_CONSOLIDATED_V1_5,\n            SNOWBALL_CONSOLIDATED_V1_6,\n            SNOWBALL_CONSOLIDATED_V1_7,\n            SNOWBALL_CONSOLIDATED_V1_8,\n            SNOWBALL_CONSOLIDATED_V1_9,\n            SNOWBALL_CONSOLIDATED_V1_10,\n            SNOWBALL_CONSOLIDATED_V1_11,\n            SNOWBALL_CONSOLIDATED_V1_12,\n            SNOWBALL_CONSOLIDATED_V1_13\n    };\n\n    public static Sound randomBabaEmoteSound() {\n        return BABA_EMOTE_SOUNDS[random.nextInt(BABA_EMOTE_SOUNDS.length)];\n    }\n\n    private static final Sound[] BABA_EMOTE_SOUNDS \u003d new Sound[] {\n            Sound.EMOTE_TROLL_BABA_1,\n            Sound.EMOTE_TROLL_BABA_2,\n            Sound.EMOTE_TROLL_BABA_3,\n    };\n}\n","filePath":"src/main/java/com/github/m0bilebtw/sound/Sound.java"},{"fileName":"CEngineerPlayer.java","content":"package com.github.m0bilebtw.player;\n\nimport com.github.m0bilebtw.CEngineerCompletedConfig;\nimport net.runelite.api.Actor;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.HitsplatID;\nimport net.runelite.api.Player;\nimport net.runelite.api.Projectile;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.HitsplatApplied;\nimport net.runelite.api.events.InteractingChanged;\nimport net.runelite.api.events.PlayerDespawned;\nimport net.runelite.api.events.PlayerSpawned;\nimport net.runelite.api.gameval.ItemID;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.util.Text;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.util.Arrays;\nimport java.util.List;\n\nimport static net.runelite.api.PlayerComposition.ITEM_OFFSET;\n\n@Singleton\npublic class CEngineerPlayer {\n    public static final String RSN \u003d \"C Engineer\";\n\n    private static final int FIGHT_INTERACT_OR_DAMAGE_COOLDOWN \u003d 8;\n\n    private static final List\u003cInteger\u003e AHRIMS_HOODS \u003d List.of(ItemID.BARROWS_AHRIM_HEAD, ItemID.BARROWS_AHRIM_HEAD_100, ItemID.BARROWS_AHRIM_HEAD_75, ItemID.BARROWS_AHRIM_HEAD_50, ItemID.BARROWS_AHRIM_HEAD_25, ItemID.BARROWS_AHRIM_HEAD_BROKEN);\n    private static final List\u003cInteger\u003e AHRIMS_TOPS \u003d List.of(ItemID.BARROWS_AHRIM_BODY, ItemID.BARROWS_AHRIM_BODY_100, ItemID.BARROWS_AHRIM_BODY_75, ItemID.BARROWS_AHRIM_BODY_50, ItemID.BARROWS_AHRIM_BODY_25, ItemID.BARROWS_AHRIM_BODY_BROKEN);\n    private static final List\u003cInteger\u003e AHRIMS_BOTTOMS \u003d List.of(ItemID.BARROWS_AHRIM_LEGS, ItemID.BARROWS_AHRIM_LEGS_100, ItemID.BARROWS_AHRIM_LEGS_75, ItemID.BARROWS_AHRIM_LEGS_50, ItemID.BARROWS_AHRIM_LEGS_25, ItemID.BARROWS_AHRIM_LEGS_BROKEN);\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private CEngineerCompletedConfig config;\n\n    @Inject\n    private CEngineerChatTrolls cEngineerChatTrolls;\n\n    private Player player \u003d null;\n    private int lastTickOfFightIncludingCEngi \u003d -1;\n\n    @Subscribe\n    public void onPlayerSpawned(PlayerSpawned playerSpawned) {\n        Player spawnedPlayer \u003d playerSpawned.getPlayer();\n        if (RSN.equals(spawnedPlayer.getName())) {\n            this.player \u003d spawnedPlayer;\n        }\n    }\n\n    @Subscribe\n    public void onPlayerDespawned(PlayerDespawned playerDespawned) {\n        Player despawnedPlayer \u003d playerDespawned.getPlayer();\n        if (RSN.equals(despawnedPlayer.getName())) {\n            this.player \u003d null;\n        }\n    }\n\n    @Subscribe\n    public void onChatMessage(ChatMessage chatMessage) {\n        if (!config.easterEggs())\n            return;\n\n        if (isOutOfRenderDistance() ||\n                chatMessage.getType() !\u003d ChatMessageType.PUBLICCHAT ||\n                !Text.standardize(RSN).equals(Text.standardize(chatMessage.getName())))\n            return;\n\n        cEngineerChatTrolls.runTriggers(chatMessage);\n    }\n\n    @Subscribe\n    public void onInteractingChanged(InteractingChanged interactingChanged) {\n        if (isOutOfRenderDistance())\n            return;\n\n        if (actorEquals(interactingChanged.getSource()) \u0026\u0026 interactingChanged.getTarget() \u003d\u003d client.getLocalPlayer()) {\n            lastTickOfFightIncludingCEngi \u003d client.getTickCount();\n        }\n    }\n\n    @Subscribe\n    public void onHitsplatApplied(HitsplatApplied hitsplatApplied) {\n        if (isOutOfRenderDistance())\n            return;\n\n        if (hitsplatApplied.getActor() !\u003d client.getLocalPlayer())\n            return;\n\n        int hitType \u003d hitsplatApplied.getHitsplat().getHitsplatType();\n        boolean isRelevantHitType \u003d hitType \u003d\u003d HitsplatID.DAMAGE_ME\n                || hitType \u003d\u003d HitsplatID.DAMAGE_ME_ORANGE\n                || hitType \u003d\u003d HitsplatID.DAMAGE_MAX_ME\n                || hitType \u003d\u003d HitsplatID.DAMAGE_MAX_ME_ORANGE\n                || hitType \u003d\u003d HitsplatID.POISON\n                || hitType \u003d\u003d HitsplatID.VENOM;\n        if (isRelevantHitType \u0026\u0026 wasFightingMeRecently()) {\n            // We want to keep tracking even if the hitsplats aren\u0027t from C anymore so we can still play the sound for a kill C contributed to\n            lastTickOfFightIncludingCEngi \u003d client.getTickCount();\n        }\n    }\n\n    public boolean wasFightingMeRecently() {\n        return client.getTickCount() - lastTickOfFightIncludingCEngi \u003c\u003d FIGHT_INTERACT_OR_DAMAGE_COOLDOWN;\n    }\n\n    public boolean isOutOfRenderDistance() {\n        return player \u003d\u003d null;\n    }\n\n    public boolean isWearing(int itemId) {\n        if (player \u003d\u003d null)\n            return false;\n\n        int[] equipmentIds \u003d player.getPlayerComposition().getEquipmentIds();\n        return Arrays.stream(equipmentIds)\n                .filter(i -\u003e i \u003e ITEM_OFFSET)\n                .map(i -\u003e i - ITEM_OFFSET)\n                .anyMatch(i -\u003e i \u003d\u003d itemId);\n    }\n\n    public boolean isWearingAttackTrollRequirements() {\n        return isWearing(ItemID.TRAIL_MAGE_AMULET) \u0026\u0026\n                isWearing(ItemID.DRAGON_CLAWS) \u0026\u0026\n                AHRIMS_HOODS.stream().anyMatch(this::isWearing) \u0026\u0026\n                AHRIMS_TOPS.stream().anyMatch(this::isWearing) \u0026\u0026\n                AHRIMS_BOTTOMS.stream().anyMatch(this::isWearing);\n    }\n\n    public boolean isFollowingMe() {\n        return isInteracting(client.getLocalPlayer());\n    }\n\n    public boolean isInteracting(Actor actor) {\n        if (actor \u003d\u003d null)\n            return false;\n\n        if (isOutOfRenderDistance())\n            return false;\n\n        Actor cEngineerInteractTarget \u003d player.getInteracting();\n        return cEngineerInteractTarget \u003d\u003d actor;\n    }\n\n    public boolean actorEquals(Actor other) {\n        return player \u003d\u003d other;\n    }\n\n    public boolean couldHaveThrownProjectileFrom(Projectile projectile) {\n        WorldPoint cEngineerWP \u003d player.getWorldLocation();\n        WorldPoint projectileWP \u003d WorldPoint.fromLocal(player.getWorldView(), projectile.getX1(), projectile.getY1(), cEngineerWP.getPlane());\n\n        // check projectile is *roughly* from C\u0027s tile, while allowing for drive-by/moving while the projectile spawns\n        return cEngineerWP.distanceTo2D(projectileWP) \u003c\u003d 2;\n    }\n\n    public int tilesFrom(Actor actor) {\n        if (actor \u003d\u003d null || player \u003d\u003d null)\n            return Integer.MAX_VALUE;\n\n        WorldPoint cEngineerWP \u003d player.getWorldLocation();\n        WorldPoint actorWP \u003d actor.getWorldLocation();\n\n        return cEngineerWP.distanceTo2D(actorWP);\n    }\n\n    public void sendChatIfEnabled(String message) {\n        if (config.showChatMessages()) {\n            client.addChatMessage(ChatMessageType.PUBLICCHAT, RSN, message, null);\n        }\n    }\n}\n","filePath":"src/main/java/com/github/m0bilebtw/player/CEngineerPlayer.java"},{"fileName":"LoggedInState.java","content":"package com.github.m0bilebtw.player;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.client.eventbus.Subscribe;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\n\n@Singleton\npublic class LoggedInState {\n    private static final int LOGGED_OUT \u003d -1;\n\n    @Inject\n    private Client client;\n\n    private int lastLoggedInTick \u003d LOGGED_OUT;\n\n    @Subscribe\n    public void onGameStateChanged(GameStateChanged event) {\n        setForCurrentGameState(event.getGameState());\n    }\n\n    public void setForCurrentGameState(GameState gameState) {\n        if (gameState \u003d\u003d GameState.LOGGED_IN) {\n            setLastLoginTick(client.getTickCount());\n        } else {\n            setLoggedOut();\n        }\n    }\n\n    public boolean isLoggedOut() {\n        return this.lastLoggedInTick \u003d\u003d LOGGED_OUT;\n    }\n\n    public boolean onlyJustLoggedIn(int tickWindow) {\n        return client.getTickCount() - this.lastLoggedInTick \u003c tickWindow;\n    }\n\n    public void setLoggedOut() {\n        this.lastLoggedInTick \u003d LOGGED_OUT;\n    }\n\n    public void setLastLoginTick(int lastLoggedInTick) {\n        this.lastLoggedInTick \u003d lastLoggedInTick;\n    }\n}\n","filePath":"src/main/java/com/github/m0bilebtw/player/LoggedInState.java"},{"fileName":"CEngineerChatTrolls.java","content":"package com.github.m0bilebtw.player;\n\nimport com.github.m0bilebtw.sound.Sound;\nimport com.github.m0bilebtw.sound.SoundEngine;\nimport net.runelite.api.Client;\nimport net.runelite.api.events.ChatMessage;\n\nimport javax.inject.Inject;\nimport java.util.Optional;\nimport java.util.concurrent.ScheduledExecutorService;\n\npublic class CEngineerChatTrolls {\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private SoundEngine soundEngine;\n\n    @Inject\n    private ScheduledExecutorService executor;\n\n    public void runTriggers(ChatMessage chatMessageFromC) {\n        Optional\u003cString\u003e standardisedNameOpt \u003d LocalPlayer.getStandardisedName(client);\n        if (standardisedNameOpt.isEmpty()) return;\n\n        String standardisedName \u003d standardisedNameOpt.get();\n        if (\"skill specs\".equals(standardisedName))\n            skillSpecsChatTrolls(chatMessageFromC);\n    }\n\n    private void skillSpecsChatTrolls(ChatMessage chatMessageFromC) {\n        switch (chatMessageFromC.getMessage().toLowerCase()) {\n            case \"hello skill specs\":\n                soundEngine.playClip(Sound.CHAT_TROLL_SKILL_SPECS_HELLO, executor);\n                break;\n            case \"are you ok\":\n                soundEngine.playClip(Sound.CHAT_TROLL_SKILL_SPECS_OK, executor);\n                break;\n            case \"oops\":\n                soundEngine.playClip(Sound.CHAT_TROLL_SKILL_SPECS_OOPS, executor);\n                break;\n            default: break;\n        }\n    }\n}\n","filePath":"src/main/java/com/github/m0bilebtw/player/CEngineerChatTrolls.java"},{"fileName":"LocalPlayer.java","content":"package com.github.m0bilebtw.player;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.Player;\nimport net.runelite.client.util.Text;\n\nimport java.util.Optional;\n\npublic class LocalPlayer {\n    private LocalPlayer () {}\n\n    public static Optional\u003cString\u003e getStandardisedName(Client client) {\n        Player localPlayer \u003d client.getLocalPlayer();\n        if (localPlayer \u003d\u003d null)\n            return Optional.empty();\n\n        String localName \u003d localPlayer.getName();\n        if (localName \u003d\u003d null)\n            return Optional.empty();\n\n        return Optional.of(Text.standardize(localName));\n    }\n}\n","filePath":"src/main/java/com/github/m0bilebtw/player/LocalPlayer.java"},{"fileName":"CEngineerCompletedConfig.java","content":"package com.github.m0bilebtw;\n\nimport com.github.m0bilebtw.sound.Sound;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\nimport net.runelite.client.config.Range;\n\n@ConfigGroup(CEngineerCompletedConfig.GROUP)\npublic interface CEngineerCompletedConfig extends Config {\n    String GROUP \u003d \"cengineercompleted\";\n    String LEAGUES_TASK_HIDDEN_REMINDER_CONFIG \u003d \"needToRemindAboutDisablingLeaguesTasks\";\n    String DELAY_COX_COL_LOG_HIDDEN_NOTIFY_CONFIG \u003d \"needToInformAboutDelayedCoxColLogs\";\n\n    @ConfigSection(\n            name \u003d \"Announce Achievements\",\n            description \u003d \"Which sounds that are achievements should play.\",\n            position \u003d 0\n    )\n    String SECTION_ACHIEVEMENT_ANNOUNCEMENTS \u003d \"Announce Achievements\";\n\n    @ConfigItem(\n            keyName \u003d \"announceLevelUp\",\n            name \u003d \"Level ups\",\n            description \u003d \"Should C Engineer announce when you gain a level in a skill?\",\n            section \u003d SECTION_ACHIEVEMENT_ANNOUNCEMENTS,\n            position \u003d 1\n    )\n    default boolean announceLevelUp() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"announceLevelUpIncludesVirtual\",\n            name \u003d \"Include virtual level ups\",\n            description \u003d \"Should C Engineer announce when you gain a virtual (\u003e99) level in a skill?\",\n            section \u003d SECTION_ACHIEVEMENT_ANNOUNCEMENTS,\n            position \u003d 2\n    )\n    default boolean announceLevelUpIncludesVirtual() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"announceQuestCompletion\",\n            name \u003d \"Quest completions\",\n            description \u003d \"Should C Engineer announce when you complete a quest?\",\n            section \u003d SECTION_ACHIEVEMENT_ANNOUNCEMENTS,\n            position \u003d 3\n    )\n    default boolean announceQuestCompletion() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"announceCollectionLog\",\n            name \u003d \"New collection log entry\",\n            description \u003d \"Should C Engineer announce when you fill in a new slot in your collection log? This one relies on you having chat messages (included with the popup option) enabled in game settings!\",\n            section \u003d SECTION_ACHIEVEMENT_ANNOUNCEMENTS,\n            position \u003d 4\n    )\n    default boolean announceCollectionLog() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"announceAchievementDiary\",\n            name \u003d \"Completed achievement diaries\",\n            description \u003d \"Should C Engineer announce when you complete a new achievement diary?\",\n            section \u003d SECTION_ACHIEVEMENT_ANNOUNCEMENTS,\n            position \u003d 5\n    )\n    default boolean announceAchievementDiary() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"announceCombatAchievement\",\n            name \u003d \"Completed combat achievement tasks\",\n            description \u003d \"Should C Engineer announce when you complete a new combat achievement task?\",\n            section \u003d SECTION_ACHIEVEMENT_ANNOUNCEMENTS,\n            position \u003d 6\n    )\n    default boolean announceCombatAchievement() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"announceSlayerTasks\",\n            name \u003d \"Completed Slayer Tasks\",\n            description \u003d \"Should C Engineer announce when you complete a slayer task?\",\n            section \u003d SECTION_ACHIEVEMENT_ANNOUNCEMENTS,\n            position \u003d 7\n    )\n    default boolean announceSlayerTasks() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"announceFarmingContracts\",\n            name \u003d \"Completed Farming Contracts\",\n            description \u003d \"Should C Engineer announce when you complete a farming contract?\",\n            section \u003d SECTION_ACHIEVEMENT_ANNOUNCEMENTS,\n            position \u003d 8\n    )\n    default boolean announceFarmingContracts() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"announceHunterRumours\",\n            name \u003d \"Completed Hunter Rumours\",\n            description \u003d \"Should C Engineer announce when you receive the required creature part for a hunter rumour?\",\n            section \u003d SECTION_ACHIEVEMENT_ANNOUNCEMENTS,\n            position \u003d 9\n    )\n    default boolean announceHunterRumours() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"announceLeaguesTasks\",\n            name \u003d \"Completed Leagues Tasks\",\n            description \u003d \"Should C Engineer announce when you complete a leagues task?\",\n            section \u003d SECTION_ACHIEVEMENT_ANNOUNCEMENTS,\n            position \u003d 10\n    )\n    default boolean announceLeaguesTasks() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d LEAGUES_TASK_HIDDEN_REMINDER_CONFIG,\n            name \u003d \"Need to remind user they can disable leagues tasks announcements if they want\",\n            description \u003d \"Leagues tasks can get spammy, and some users might not know they can toggle individual announcements instead of the whole plugin\",\n            section \u003d SECTION_ACHIEVEMENT_ANNOUNCEMENTS,\n            hidden \u003d true\n    )\n    default boolean needToRemindAboutDisablingLeaguesTasks() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"announceGridTiles\",\n            name \u003d \"Completed Grid Tiles\",\n            description \u003d \"Should C Engineer announce when you complete a grid tile?\",\n            section \u003d SECTION_ACHIEVEMENT_ANNOUNCEMENTS,\n            position \u003d 11\n    )\n    default boolean announceGridTiles() {\n        return true;\n    }\n\n    @ConfigSection(\n            name \u003d \"Announce Other\",\n            description \u003d \"Which sounds that are not necessarily achievements (and not easter eggs) should play.\",\n            position \u003d 20\n    )\n    String SECTION_NON_ACHIEVEMENT_ANNOUNCEMENTS \u003d \"Announce Other\";\n\n    @ConfigItem(\n            keyName \u003d \"announceDeath\",\n            name \u003d \"When you die\",\n            description \u003d \"Should C Engineer relive his PvP HCIM death when you die?\",\n            section \u003d SECTION_NON_ACHIEVEMENT_ANNOUNCEMENTS,\n            position \u003d 21\n    )\n    default boolean announceDeath() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"announceNonTrouverInfernal\",\n            name \u003d \"Non-locked infernal in wildy (once per plugin session)\",\n            description \u003d \"Should C Engineer warn you when you enter the wilderness (only once per plugin session) with an infernal cape that has not been locked with a trouver parchment?\",\n            section \u003d SECTION_NON_ACHIEVEMENT_ANNOUNCEMENTS,\n            position \u003d 22\n    )\n    default boolean announceNonTrouverInfernal() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"announceGrubbyKeyDrop\",\n            name \u003d \"Announce Grubby Key Drop\",\n            description \u003d \"Should C Engineer announce when you receive a grubby key?\",\n            section \u003d SECTION_NON_ACHIEVEMENT_ANNOUNCEMENTS,\n            position \u003d 23\n    )\n    default boolean announceGrubbyKeyDrop() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"announceLarransKeyDrop\",\n            name \u003d \"Announce Larran\u0027s Key Drop\",\n            description \u003d \"Should C Engineer announce when you receive a Larran\u0027s key?\",\n            section \u003d SECTION_NON_ACHIEVEMENT_ANNOUNCEMENTS,\n            position \u003d 24\n    )\n    default boolean announceLarransKeyDrop() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"announceBrimstoneKeyDrop\",\n            name \u003d \"Announce Brimstone Key Drop\",\n            description \u003d \"Should C Engineer announce when you receive a brimstone key?\",\n            section \u003d SECTION_NON_ACHIEVEMENT_ANNOUNCEMENTS,\n            position \u003d 25\n    )\n    default boolean announceBrimstoneKeyDrop() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"announceGemstoneCrabMovement\",\n            name \u003d \"Announce Gemstone Crab Movement\",\n            description \u003d \"Should C Engineer announce when the Gemstone Crab moves?\",\n            section \u003d SECTION_NON_ACHIEVEMENT_ANNOUNCEMENTS,\n            position \u003d 26\n    )\n    default boolean announceGemstoneCrabMovement() {\n        return true;\n    }\n\n    @ConfigSection(\n            name \u003d \"General Announcement Settings\",\n            description \u003d \"Settings for other details when achievement sounds play.\",\n            position \u003d 40\n    )\n    String SECTION_GENERAL_ANNOUNCEMENT_SETTINGS \u003d \"General Announcement Settings\";\n\n    @ConfigItem(\n            keyName \u003d \"showChatMessages\",\n            name \u003d \"Show fake public chat message (only you will see it)\",\n            description \u003d \"Should C Engineer announce your achievements in game chat as well as audibly?\",\n            section \u003d SECTION_GENERAL_ANNOUNCEMENT_SETTINGS,\n            position \u003d 41\n    )\n    default boolean showChatMessages() {\n        return true;\n    }\n\n    @Range(\n            min \u003d 0,\n            max \u003d 200\n    )\n    @ConfigItem(\n            keyName \u003d \"announcementVolume\",\n            name \u003d \"Announcement volume\",\n            description \u003d \"Adjust how loud the audio announcements are played!\",\n            section \u003d SECTION_GENERAL_ANNOUNCEMENT_SETTINGS,\n            position \u003d 42\n    )\n    default int announcementVolume() {\n        return 100;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"delayCoXCollectionLogAnnouncements\",\n            name \u003d \"Delay CoX collection log announcements\",\n            description \u003d \"Wait until you open the reward chest at CoX before announcing new collection log slots (also delays Olmlet announcement)\",\n            section \u003d SECTION_GENERAL_ANNOUNCEMENT_SETTINGS,\n            position \u003d 43\n    )\n    default boolean delayCoXCollectionLogAnnouncements() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d DELAY_COX_COL_LOG_HIDDEN_NOTIFY_CONFIG,\n            name \u003d \"Need to inform users CoX col log announcements will now be delayed until opening chest by default\",\n            description \u003d \"This was requested because a lot of people turn off the plugin during CoX to avoid spoiling if the item is new until they open the chest\",\n            section \u003d SECTION_ACHIEVEMENT_ANNOUNCEMENTS,\n            hidden \u003d true\n    )\n    default boolean needToInformAboutDelayedCoXColLog() {\n        return true;\n    }\n\n    @ConfigSection(\n            name \u003d \"Easter Eggs and Streamer Trolls\",\n            description \u003d \"Settings for non-achievement sounds.\",\n            position \u003d 60,\n            closedByDefault \u003d true\n    )\n    String SECTION_EASTER_EGGS_AND_STREAMERS \u003d \"Easter Eggs and Streamer Trolls\";\n\n    @ConfigItem(\n            keyName \u003d \"easterEggs\",\n            name \u003d \"Easter eggs\",\n            description \u003d \"Should C Engineer comment on your gameplay? And maybe do a little trolling?\",\n            section \u003d SECTION_EASTER_EGGS_AND_STREAMERS,\n            position \u003d 61\n    )\n    default boolean easterEggs() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"downloadStreamerSounds\",\n            name \u003d \"Include streamer troll sounds (requires plugin restart)\",\n            description \u003d \"Restart plugin to take effect! If disabled, will remove and no longer download sounds that are streamer trolls\",\n            section \u003d SECTION_EASTER_EGGS_AND_STREAMERS,\n            position \u003d 62\n    )\n    default boolean downloadStreamerTrolls() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"muteSnowballsIfCEngineerIsNear\",\n            name \u003d \"Stealthy snowballs when C Engineer is nearby\",\n            description \u003d \"Mute snowball sound effects if C Engineer is nearby to allow for stealthier trolling\",\n            section \u003d SECTION_EASTER_EGGS_AND_STREAMERS,\n            position \u003d 63\n    )\n    default boolean muteSnowballsIfCEngineerIsNear() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"selectAnySoundToTestPlayIt\",\n            name \u003d \"(SPOILERS) Test any sound\",\n            description \u003d \"(SPOILERS) Choose a sound to play it to test it works and its volume. This will also be the sound played when changing volume\",\n            section \u003d SECTION_EASTER_EGGS_AND_STREAMERS,\n            position \u003d 64\n    )\n    default Sound selectAnySoundToTestPlayIt() {\n        return Sound.LEVEL_UP;\n    }\n}\n","filePath":"src/main/java/com/github/m0bilebtw/CEngineerCompletedConfig.java"},{"fileName":"TrollTriggers.java","content":"package com.github.m0bilebtw.trolls;\n\nimport com.github.m0bilebtw.CEngineerCompletedConfig;\nimport com.github.m0bilebtw.animation.AnimationTriggers;\nimport com.github.m0bilebtw.player.CEngineerPlayer;\nimport com.github.m0bilebtw.projectile.ProjectileID;\nimport com.github.m0bilebtw.sound.Sound;\nimport com.github.m0bilebtw.sound.SoundEngine;\nimport net.runelite.api.Actor;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.NPC;\nimport net.runelite.api.Player;\nimport net.runelite.api.Projectile;\nimport net.runelite.api.coords.WorldArea;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.AnimationChanged;\nimport net.runelite.api.events.AreaSoundEffectPlayed;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GraphicChanged;\nimport net.runelite.api.events.ProjectileMoved;\nimport net.runelite.api.events.SoundEffectPlayed;\nimport net.runelite.api.gameval.ItemID;\nimport net.runelite.api.gameval.SpotanimID;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.util.Text;\n\nimport javax.inject.Inject;\nimport java.time.Duration;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.regex.Pattern;\n\nimport static com.github.m0bilebtw.projectile.ProjectileSoundID.SNOWBALL_SOUND_IDS;\n\npublic class TrollTriggers {\n    private static final Pattern STAT_SPY_REGEX \u003d Pattern.compile(Text.standardize(CEngineerPlayer.RSN + \" is reading your skill stats!\"));\n    private static final Pattern ESCAPE_CRYSTAL_REGEX \u003d Pattern.compile(Text.standardize(CEngineerPlayer.RSN + \" activated your crystal\\\\.\"));\n    private static final Pattern TOB_GREEN_BALL_BOUNCE_REGEX \u003d Pattern.compile(Text.standardize(\"\u003ccol\u003d0a721f\u003eA powerful projectile bounces into your direction\\\\.\\\\.\\\\.\u003c/col\u003e\"));\n\n    private static final int SNOWBALL_COOLDOWN_TICKS \u003d 50;\n    private static final Duration SNOWBALL_DELAY_GAUNTLET_SOUND \u003d Duration.ofMinutes(9);\n    private static final Duration SNOWBALL_DELAY_SOUNDS \u003d Duration.ofSeconds(20);\n\n    private static final WorldArea GAUNTLET_LOBBY \u003d new WorldArea(new WorldPoint(3026, 6117, 1), 14, 14);\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private CEngineerCompletedConfig config;\n\n    @Inject\n    private ScheduledExecutorService executor;\n\n    @Inject\n    private SoundEngine soundEngine;\n\n    @Inject\n    private CEngineerPlayer cEngineer;\n\n    @Inject\n    private AnimationTriggers animationTriggers;\n\n    private int lastSnowballTriggerTick \u003d -1;\n\n    @Subscribe\n    public void onChatMessage(ChatMessage chatMessage) {\n        if (chatMessage.getType() !\u003d ChatMessageType.GAMEMESSAGE \u0026\u0026 chatMessage.getType() !\u003d ChatMessageType.SPAM)\n            return;\n\n        if (!config.easterEggs())\n            return;\n\n        String standardisedMessage \u003d Text.standardize(chatMessage.getMessage());\n        if (STAT_SPY_REGEX.matcher(standardisedMessage).matches()) {\n            soundEngine.playClip(Sound.STAT_SPY_SOUP, executor);\n\n        } else if (ESCAPE_CRYSTAL_REGEX.matcher(standardisedMessage).matches()) {\n            soundEngine.playClip(Sound.ESCAPE_CRYSTAL, executor);\n\n        } else if (cEngineer.isFollowingMe() \u0026\u0026 TOB_GREEN_BALL_BOUNCE_REGEX.matcher(standardisedMessage).matches()) {\n            soundEngine.playClip(Sound.TOB_GREEN_BALL, executor);\n        }\n    }\n\n    @Subscribe\n    public void onGraphicChanged(GraphicChanged graphicChanged) {\n        if (!config.easterEggs())\n            return;\n\n        if (!cEngineer.isWearingAttackTrollRequirements())\n            return;\n\n        iceBarrageTroll(graphicChanged.getActor());\n    }\n\n    @Subscribe\n    public void onAnimationChanged(AnimationChanged animationChanged) {\n        if (!config.easterEggs())\n            return;\n\n        Player localPlayer \u003d client.getLocalPlayer();\n        if (localPlayer \u003d\u003d animationChanged.getActor() \u0026\u0026 localPlayer.getAnimation() !\u003d -1) {\n            animationTriggers.runTriggersForLocalPlayerAnimation(localPlayer.getAnimation());\n            return;\n        }\n\n        if (cEngineer.isOutOfRenderDistance())\n            return;\n\n        Actor actor \u003d animationChanged.getActor();\n        if (!cEngineer.actorEquals(actor))\n            return;\n\n        int actorAnimationId \u003d actor.getAnimation();\n        if (actorAnimationId \u003d\u003d -1)\n            return;\n\n        animationTriggers.runTriggersForCEngiAnimation(actorAnimationId);\n    }\n\n    @Subscribe\n    public void onSoundEffectPlayed(SoundEffectPlayed soundEffectPlayed) {\n        if (shouldMuteSnowballs() \u0026\u0026 SNOWBALL_SOUND_IDS.contains(soundEffectPlayed.getSoundId())) {\n            soundEffectPlayed.consume();\n        }\n    }\n\n    @Subscribe\n    public void onAreaSoundEffectPlayed(AreaSoundEffectPlayed areaSoundEffectPlayed) {\n        if (shouldMuteSnowballs() \u0026\u0026 SNOWBALL_SOUND_IDS.contains(areaSoundEffectPlayed.getSoundId())) {\n            areaSoundEffectPlayed.consume();\n        }\n    }\n\n    @Subscribe\n    public void onProjectileMoved(ProjectileMoved projectileMoved) {\n        if (cEngineer.isOutOfRenderDistance())\n            return;\n\n        if (!config.easterEggs())\n            return;\n\n        Projectile projectile \u003d projectileMoved.getProjectile();\n        if (projectile.getId() !\u003d ProjectileID.SNOWBALL)\n            return;\n\n        int currentTick \u003d client.getTickCount();\n        if (currentTick - lastSnowballTriggerTick \u003c SNOWBALL_COOLDOWN_TICKS)\n            return;\n\n        Actor myself \u003d client.getLocalPlayer();\n        if (myself \u003d\u003d null)\n            return;\n\n        Actor projectileInteracting \u003d projectile.getInteracting();\n        if (!myself.equals(projectileInteracting))\n            return;\n\n        if (cEngineer.couldHaveThrownProjectileFrom(projectile)) {\n            lastSnowballTriggerTick \u003d currentTick;\n            playSoundFromSnowball();\n        }\n    }\n\n    private void playSoundFromSnowball() {\n        WorldPoint currentLocation \u003d WorldPoint.fromLocalInstance(client, client.getLocalPlayer().getLocalLocation());\n        if (GAUNTLET_LOBBY.contains(currentLocation)) {\n            soundEngine.playClip(Sound.SNOWBALL_GAUNTLET_LOBBY, executor, SNOWBALL_DELAY_GAUNTLET_SOUND);\n            return;\n        }\n\n        Sound sound \u003d pickSnowballSoundBasedOnEquipment();\n        if (cEngineer.isWearing(ItemID.TRAIL_MAGE_AMULET)) {\n            soundEngine.playClip(sound, executor);\n        } else {\n            soundEngine.playClip(sound, executor, SNOWBALL_DELAY_SOUNDS);\n        }\n    }\n\n    private Sound pickSnowballSoundBasedOnEquipment() {\n        if (cEngineer.isWearing(ItemID.BUCKET_HELM_GOLD))\n            return Sound.SNOWBALL_EQUIPPING_BUCKET_HELM_G_OR_FUNNY_FEEL;\n\n        if (cEngineer.isWearing(ItemID.GIANT_BOOT))\n            return Sound.SNOWBALL_EQUIPPING_GIANT_BOOT;\n\n        if (cEngineer.isWearing(ItemID.WISE_SPECTACLES))\n            return Sound.SNOWBALL_EQUIPPING_SAGACIOUS_SPECTACLES;\n\n        if (cEngineer.isWearing(ItemID.TOA_AMASCUT_MASK))\n            return Sound.SNOWBALL_EQUIPPING_MASK_OF_REBIRTH;\n\n        return Sound.randomSnowballSoundNotFromEquippedItem();\n    }\n\n    private boolean shouldMuteSnowballs() {\n        if (cEngineer.isOutOfRenderDistance())\n            return false;\n\n        return config.muteSnowballsIfCEngineerIsNear();\n    }\n\n    private void iceBarrageTroll(Actor actorFromGraphicChanged) {\n        if (!(actorFromGraphicChanged instanceof NPC))\n            return;\n\n        NPC npc \u003d (NPC) actorFromGraphicChanged;\n        if (!npc.hasSpotAnim(SpotanimID.ICE_BARRAGE_IMPACT))\n            return;\n        if (!cEngineer.isInteracting(npc))\n            return;\n        if (cEngineer.tilesFrom(client.getLocalPlayer()) \u003e 10)\n            return;\n\n        soundEngine.playClip(Sound.ATTACK_TROLL_IB, executor);\n    }\n}\n","filePath":"src/main/java/com/github/m0bilebtw/trolls/TrollTriggers.java"},{"fileName":"AnimationID.java","content":"package com.github.m0bilebtw.animation;\n\npublic class AnimationID {\n    private AnimationID() {}\n\n    public static final int TRICK \u003d 10503;\n    public static final int SMOOTH_DANCE \u003d 7533;\n    public static final int PREMIER_SHIELD \u003d 7751;\n    public static final int DIANGO_CLAWS \u003d 5283;\n\n    public static final int GENERIC_CHEST_OPEN \u003d 832;\n}\n","filePath":"src/main/java/com/github/m0bilebtw/animation/AnimationID.java"},{"fileName":"AnimationTriggers.java","content":"package com.github.m0bilebtw.animation;\n\nimport com.github.m0bilebtw.player.CEngineerPlayer;\nimport com.github.m0bilebtw.player.LocalPlayer;\nimport com.github.m0bilebtw.sound.Sound;\nimport com.github.m0bilebtw.sound.SoundEngine;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.coords.WorldArea;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.chat.ChatColorType;\nimport net.runelite.client.chat.ChatMessageBuilder;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.chat.QueuedMessage;\n\nimport javax.inject.Inject;\nimport java.util.Optional;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.concurrent.TimeUnit;\n\nimport static com.github.m0bilebtw.animation.AnimationID.DIANGO_CLAWS;\nimport static com.github.m0bilebtw.animation.AnimationID.GENERIC_CHEST_OPEN;\nimport static com.github.m0bilebtw.animation.AnimationID.PREMIER_SHIELD;\nimport static com.github.m0bilebtw.animation.AnimationID.SMOOTH_DANCE;\nimport static com.github.m0bilebtw.animation.AnimationID.TRICK;\n\npublic class AnimationTriggers {\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private SoundEngine soundEngine;\n\n    @Inject\n    private ScheduledExecutorService executor;\n\n    @Inject\n    private ChatMessageManager chatMessageManager;\n\n    @Inject\n    private CEngineerPlayer cEngineer;\n\n    private static final WorldArea AKKHA_ROOM \u003d new WorldArea(new WorldPoint(3671, 5398, 1), 29, 20);\n    private static final WorldArea BABA_PUZZLE_ROOM \u003d new WorldArea(new WorldPoint(3788, 5264, 0), 42, 31);\n\n    private static final WorldArea TOA_CHEST_ROOM \u003d new WorldArea(new WorldPoint(3673, 5138, 0), 15, 13);\n    private static final WorldArea TOB_CHEST_ROOM \u003d new WorldArea(new WorldPoint(3225, 4320, 0), 18, 14);\n\n    public void runTriggersForLocalPlayerAnimation(int animationId) {\n        checkFunnyFeelingTrollTrigger(animationId);\n    }\n\n    private void checkFunnyFeelingTrollTrigger(int animationId) {\n        if (animationId !\u003d GENERIC_CHEST_OPEN)\n            return;\n\n        if (!cEngineer.isFollowingMe())\n            return;\n\n        WorldPoint currentLocation \u003d WorldPoint.fromLocalInstance(client, client.getLocalPlayer().getLocalLocation());\n        if (TOA_CHEST_ROOM.contains(currentLocation) || TOB_CHEST_ROOM.contains(currentLocation)) {\n            executor.schedule(this::funnyFeelingTroll, 600, TimeUnit.MILLISECONDS);\n        }\n    }\n\n    private void funnyFeelingTroll() {\n        String highlightedMessage \u003d new ChatMessageBuilder()\n                .append(ChatColorType.HIGHLIGHT)\n                .append(\"You have a funny feeling like you\u0027re being followed.\")\n                .build();\n\n        chatMessageManager.queue(QueuedMessage.builder()\n                .type(ChatMessageType.CONSOLE)\n                .runeLiteFormattedMessage(highlightedMessage)\n                .build());\n\n        soundEngine.playClip(Sound.SNOWBALL_EQUIPPING_BUCKET_HELM_G_OR_FUNNY_FEEL, executor);\n    }\n\n    public void runTriggersForCEngiAnimation(int animationId) {\n        if (animationId \u003d\u003d TRICK) {\n            akkhaTroll();\n        } else if (animationId \u003d\u003d PREMIER_SHIELD) {\n            babaTroll();\n        } else if (animationId \u003d\u003d SMOOTH_DANCE) {\n            smoothDanceTrolls();\n        } else if (animationId \u003d\u003d DIANGO_CLAWS) {\n            diangoClawsTroll();\n        }\n    }\n\n    private void akkhaTroll() {\n        WorldPoint currentLocation \u003d WorldPoint.fromLocalInstance(client, client.getLocalPlayer().getLocalLocation());\n        if (AKKHA_ROOM.contains(currentLocation)) {\n            soundEngine.playClip(Sound.EMOTE_TROLL_AKKHA, executor);\n        }\n    }\n\n    private void babaTroll() {\n        WorldPoint currentLocation \u003d WorldPoint.fromLocalInstance(client, client.getLocalPlayer().getLocalLocation());\n        if (BABA_PUZZLE_ROOM.contains(currentLocation)) {\n            soundEngine.playClip(Sound.randomBabaEmoteSound(), executor);\n        }\n    }\n\n    private void smoothDanceTrolls() {\n        Optional\u003cString\u003e standardisedNameOpt \u003d LocalPlayer.getStandardisedName(client);\n        if (standardisedNameOpt.isEmpty()) return;\n\n        String standardisedName \u003d standardisedNameOpt.get();\n        switch (standardisedName) {\n            case \"a friend 2\":\n                soundEngine.playClip(Sound.EMOTE_TROLL_AF, executor);\n                break;\n            case \"taint licka\":\n                soundEngine.playClip(Sound.EMOTE_TROLL_EL, executor);\n                break;\n            case \"westham\":\n            case \"debiedobies\":\n            case \"saund\":\n                soundEngine.playClip(Sound.EMOTE_TROLL_WE, executor);\n                break;\n            case \"scoutzone\": // C\u0027s alt for testing\n                soundEngine.playClip(Sound.QUEST, executor);\n                break;\n            default: break;\n        }\n    }\n\n    private void diangoClawsTroll() {\n        if (cEngineer.tilesFrom(client.getLocalPlayer()) \u003e 10)\n            return;\n\n        if (cEngineer.isWearingAttackTrollRequirements()) {\n            soundEngine.playClip(Sound.ATTACK_TROLL_DC, executor);\n        }\n    }\n}\n","filePath":"src/main/java/com/github/m0bilebtw/animation/AnimationTriggers.java"},{"fileName":"ProjectileID.java","content":"package com.github.m0bilebtw.projectile;\n\npublic class ProjectileID {\n    private ProjectileID() {}\n\n    public static final int SNOWBALL \u003d 861;\n}\n","filePath":"src/main/java/com/github/m0bilebtw/projectile/ProjectileID.java"},{"fileName":"ProjectileSoundID.java","content":"package com.github.m0bilebtw.projectile;\n\nimport java.util.Set;\n\npublic class ProjectileSoundID {\n    private ProjectileSoundID() {}\n\n    public static final Set\u003cInteger\u003e SNOWBALL_SOUND_IDS \u003d Set.of(2708, 3292);\n}\n","filePath":"src/main/java/com/github/m0bilebtw/projectile/ProjectileSoundID.java"},{"fileName":"CEngineerCompletedPluginTest.java","content":"package com.github.m0bilebtw;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class CEngineerCompletedPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(CEngineerCompletedPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src/test/java/com/github/m0bilebtw/CEngineerCompletedPluginTest.java"},{"fileName":"SoundTest.java","content":"package com.github.m0bilebtw.sound;\n\nimport org.junit.Test;\n\nimport javax.sound.sampled.AudioFormat;\nimport javax.sound.sampled.AudioInputStream;\nimport javax.sound.sampled.AudioSystem;\nimport javax.sound.sampled.UnsupportedAudioFileException;\nimport java.io.File;\nimport java.io.IOException;\nimport java.util.Arrays;\nimport java.util.HashSet;\nimport java.util.Set;\nimport java.util.stream.Collectors;\n\nimport static org.junit.Assert.assertEquals;\nimport static org.junit.Assert.assertFalse;\nimport static org.junit.Assert.assertTrue;\n\npublic class SoundTest {\n\n    @Test\n    public void valuesPopulated() {\n        for (Sound sound : Sound.values()) {\n            String message \u003d \"Sound \" + sound.name() + \" should have a non-blank resource name\";\n            assertFalse(message, sound.getResourceName().isBlank());\n        }\n    }\n\n    @Test\n    public void noDuplicateValues() {\n        Set\u003cString\u003e uniqueResourceNames \u003d Arrays.stream(Sound.values())\n                .map(Sound::getResourceName)\n                .collect(Collectors.toSet());\n\n        assertEquals(Sound.values().length, uniqueResourceNames.size());\n    }\n\n    /**\n     * Bash snippets to also help in identifying and automatically fixing such files.\n     * It\u0027s better to run these in the sounds folder in .runelite rather than the sounds branch of the repo,\n     * because then you automatically ignore any previous revisions of a sound.\n     * \u003cp\u003e\n     * Identify sounds that will cut off:\n     * \u003cp\u003e\n     * {@code for f in *.wav; do duration\u003d$(ffprobe -v error -show_entries format\u003dduration -of default\u003dnoprint_wrappers\u003d1:nokey\u003d1 \"$f\"); echo \"$f $duration\"; done}\n     * \u003cp\u003e\n     * Create new sounds that are padded to prevent cut off where needed:\n     * \u003cp\u003e\n     * {@code for f in *.wav; do duration\u003d$(ffprobe -v error -show_entries format\u003dduration -of default\u003dnoprint_wrappers\u003d1:nokey\u003d1 \"$f\"); if (( $(echo \"$duration \u003e\u003d 1.491 \u0026\u0026 $duration \u003c 2\" | bc -l) )); then padding\u003d$(echo \"2 - $duration\" | bc -l); ffmpeg -i \"$f\" -af \"apad\u003dpad_dur\u003d0$padding\" -y \"${f%.wav}_PADDED.wav\"; fi; done}\n     */\n    @Test\n    public void soundsAvoidDurationRangeThatPipeWireCutsOff() throws UnsupportedAudioFileException, IOException {\n        // bounds found by manually testing to 3 d.p. - both 1.492 and 1.999 (and all in-between) get cut off\n        final double lowerBoundExc \u003d 1.491;\n        final double upperBoundExc \u003d 2.0;\n\n        Set\u003cSound\u003e cutOffSounds \u003d new HashSet\u003c\u003e();\n        for (Sound sound : Sound.values()) {\n            final double duration \u003d getDurationInSeconds(sound);\n            if (duration \u003e lowerBoundExc \u0026\u0026 duration \u003c upperBoundExc) {\n                cutOffSounds.add(sound);\n            }\n        }\n\n        assertTrue(\n                cutOffSounds.size() + \" sounds will get cut off on PipeWire\\n\" +\n                cutOffSounds.stream().map(s -\u003e s.name() + \": \" + s.getResourceName()).collect(Collectors.joining(\"\\n\")) + \"\\n\",\n                cutOffSounds.isEmpty()\n        );\n    }\n\n    private double getDurationInSeconds(Sound sound) throws UnsupportedAudioFileException, IOException {\n        File file \u003d SoundFileManager.getSoundFile(sound);\n        AudioInputStream audioInputStream \u003d AudioSystem.getAudioInputStream(file);\n        AudioFormat format \u003d audioInputStream.getFormat();\n        long frames \u003d audioInputStream.getFrameLength();\n        return (double) frames / format.getFrameRate();\n    }\n}\n","filePath":"src/test/java/com/github/m0bilebtw/sound/SoundTest.java"}]},{"commit":"7fd2248690020eaf64a328e0455eb75ab0ac3380","repository":"https://github.com/Loze-Put/tob-hm-timer.git","internalName":"tob-hm-timer","files":[{"fileName":"TobHmTimerConfig.java","content":"package com.tobhmtimer;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"tobhmtimer\")\npublic interface TobHmTimerConfig extends Config\n{\n\t@ConfigItem(\n\t\tposition \u003d 1,\n\t\tkeyName \u003d \"showTimeToBeat\",\n\t\tname \u003d \"Show time to beat\",\n\t\tdescription \u003d \"Display the time to beat.\"\n\t)\n\tdefault boolean showTimeToBeat()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 2,\n\t\tkeyName \u003d \"showTimeElapsed\",\n\t\tname \u003d \"Show time elapsed\",\n\t\tdescription \u003d \"Display the time passed since the start of the raid.\"\n\t)\n\tdefault boolean showTimeElapsed()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 3,\n\t\tkeyName \u003d \"showTimeRemaining\",\n\t\tname \u003d \"Show time remaining\",\n\t\tdescription \u003d \"Display the time remaining until the time to beat.\"\n\t)\n\tdefault boolean showTimeRemaining()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 4,\n\t\tkeyName \u003d \"showTimeDescription\",\n\t\tname \u003d \"Show time descriptions\",\n\t\tdescription \u003d \"Show the description of the displayed times.\"\n\t)\n\tdefault boolean showTimeDescription()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 5,\n\t\tkeyName \u003d \"showSplits\",\n\t\tname \u003d \"Show splits\",\n\t\tdescription \u003d \"Show a time split for every boss.\"\n\t)\n\tdefault boolean showSplits()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 6,\n\t\tkeyName \u003d \"alwaysShow\",\n\t\tname \u003d \"Always show\",\n\t\tdescription \u003d \"Always display the plugin overlay, even when no raid is in progress.\"\n\t)\n\tdefault boolean alwaysShow()\n\t{\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\com\\tobhmtimer\\TobHmTimerConfig.java"},{"fileName":"TobHmTimerConstants.java","content":"package com.tobhmtimer;\n\npublic final class TobHmTimerConstants\n{\n\tpublic static final int MILLIS_PER_TICK \u003d 600;\n\n\t// Theatre of blood varbit states.\n\tpublic static final int STATE_NO_PARTY \u003d 0;\n\tpublic static final int STATE_IN_PARTY \u003d 1;\n\n\t// Game messages\n\tpublic static final String MESSAGE_LEFT_LOBBY \u003d \"You have left the lobby, so you have been removed from your party.\";\n\tpublic static final String MESSAGE_RAID_ENTERED \u003d \"You enter the Theatre of Blood (Hard Mode)\";\n\tpublic static final String MESSAGE_RAID_STARTED \u003d \"Time to beat:\";\n\tpublic static final String MESSAGE_SPLIT_MAIDEN \u003d \"Wave \u0027The Maiden of Sugadinti\u0027 (Hard Mode) complete!\";\n\tpublic static final String MESSAGE_SPLIT_BLOAT \u003d \"Wave \u0027The Pestilent Bloat\u0027 (Hard Mode) complete!\";\n\tpublic static final String MESSAGE_SPLIT_NYLOCAS \u003d \"Wave \u0027The Nylocas\u0027 (Hard Mode) complete!\";\n\tpublic static final String MESSAGE_SPLIT_SOTETSEG \u003d \"Wave \u0027Sotetseg\u0027 (Hard Mode) complete!\";\n\tpublic static final String MESSAGE_SPLIT_XARPUS \u003d \"Wave \u0027Xarpus\u0027 (Hard Mode) complete!\";\n\tpublic static final String MESSAGE_RAID_COMPLETED \u003d \"Theatre of Blood total completion time:\";\n}\n","filePath":"src\\main\\java\\com\\tobhmtimer\\TobHmTimerConstants.java"},{"fileName":"TobHmTimerOverlay.java","content":"package com.tobhmtimer;\n\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.time.Duration;\nimport javax.inject.Inject;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\nimport net.runelite.client.ui.overlay.components.LineComponent;\n\nclass TobHmTimerOverlay extends OverlayPanel\n{\n\tprivate final TobHmTimerPlugin plugin;\n\tprivate final TobHmTimerConfig config;\n\n\tprivate String longestString;\n\n\t@Inject\n\tprivate TobHmTimerOverlay(TobHmTimerPlugin plugin, TobHmTimerConfig config)\n\t{\n\t\tsuper(plugin);\n\t\tsetPosition(OverlayPosition.CANVAS_TOP_RIGHT);\n\t\tsetPriority(OverlayPriority.LOW);\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (!plugin.isShowOverlay() \u0026\u0026 !config.alwaysShow())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tlongestString \u003d \"\";\n\n\t\tDuration timeToBeat \u003d plugin.getTimeToBeat();\n\t\tDuration elapsedTime \u003d plugin.getTimer().getRealTime();\n\n\t\tColor timeColor \u003d Color.WHITE;\n\n\t\tif (elapsedTime.compareTo(timeToBeat) \u003e\u003d 0 \u0026\u0026 !timeToBeat.isZero())\n\t\t{\n\t\t\ttimeColor \u003d Color.RED;\n\t\t}\n\t\telse if (!plugin.getTimer().isActive() \u0026\u0026 plugin.isRaidSucceeded())\n\t\t{\n\t\t\ttimeColor \u003d Color.GREEN;\n\t\t}\n\n\t\tif (config.showTimeToBeat())\n\t\t{\n\t\t\tpanelComponent.getChildren().add(\n\t\t\t\tcreateLineComponent(\"To beat\", timeToBeat)\n\t\t\t);\n\t\t}\n\n\t\tif (config.showTimeElapsed())\n\t\t{\n\t\t\tpanelComponent.getChildren().add(\n\t\t\t\tcreateLineComponent(\"Elapsed\", elapsedTime, timeColor)\n\t\t\t);\n\t\t}\n\n\t\tif (config.showTimeRemaining())\n\t\t{\n\t\t\tDuration timeRemaining \u003d timeToBeat.minus(elapsedTime);\n\t\t\tpanelComponent.getChildren().add(\n\t\t\t\tcreateLineComponent(\"Remaining\", timeRemaining, timeColor)\n\t\t\t);\n\t\t}\n\n\t\tif (config.showSplits())\n\t\t{\n\t\t\tif (config.showTimeToBeat() || config.showTimeElapsed() || config.showTimeRemaining())\n\t\t\t{\n\t\t\t\tpanelComponent.getChildren().add(LineComponent.builder().build());\n\t\t\t}\n\n\t\t\tpanelComponent.getChildren().add(\n\t\t\t\tcreateLineComponent(\"Maiden\", plugin.getSplitMaiden())\n\t\t\t);\n\t\t\tpanelComponent.getChildren().add(\n\t\t\t\tcreateLineComponent(\"Bloat\", plugin.getSplitBloat())\n\t\t\t);\n\t\t\tpanelComponent.getChildren().add(\n\t\t\t\tcreateLineComponent(\"Nylocas\", plugin.getSplitNylocas())\n\t\t\t);\n\t\t\tpanelComponent.getChildren().add(\n\t\t\t\tcreateLineComponent(\"Sotetseg\", plugin.getSplitSotetseg())\n\t\t\t);\n\t\t\tpanelComponent.getChildren().add(\n\t\t\t\tcreateLineComponent(\"Xarpus\", plugin.getSplitXarpus())\n\t\t\t);\n\t\t\tpanelComponent.getChildren().add(\n\t\t\t\tcreateLineComponent(\"Verzik\", plugin.getSplitVerzik())\n\t\t\t);\n\t\t}\n\n\t\t// Some characters are wider than others. Replace all of them with \"9\" in order to prevent shaking of the panel overlay.\n\t\tlongestString \u003d longestString.replaceAll(\"([0-8]|[ ]|[-])\", \"9\");\n\n\t\tpanelComponent.setPreferredSize(new Dimension(\n\t\t\tgraphics.getFontMetrics().stringWidth(longestString) + 6, 0));\n\n\t\treturn super.render(graphics);\n\t}\n\n\tprivate LineComponent createLineComponent(String description, Duration time)\n\t{\n\t\treturn createLineComponent(description, time, Color.WHITE);\n\t}\n\n\tprivate LineComponent createLineComponent(String description, Duration time, Color color)\n\t{\n\t\tLineComponent.LineComponentBuilder builder \u003d LineComponent.builder();\n\t\tString timeString \u003d createDurationString(time);\n\n\t\tif (config.showTimeDescription())\n\t\t{\n\t\t\tdescription \u003d \" \" + description;\n\n\t\t\tbuilder\n\t\t\t\t.left(timeString)\n\t\t\t\t.leftColor(color)\n\t\t\t\t.right(description);\n\n\t\t\tsetLongestString(timeString + description);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tbuilder\n\t\t\t\t.left(timeString)\n\t\t\t\t.leftColor(color);\n\n\t\t\tsetLongestString(timeString);\n\t\t}\n\n\t\treturn builder.build();\n\t}\n\n\tprivate void setLongestString(String string)\n\t{\n\t\tif (longestString \u003d\u003d null || string.length() \u003e longestString.length())\n\t\t{\n\t\t\tlongestString \u003d string;\n\t\t}\n\t}\n\n\tprivate static String createDurationString(Duration duration)\n\t{\n\t\tif (duration \u003d\u003d null)\n\t\t{\n\t\t\treturn \"--:--.-\";\n\t\t}\n\n\t\tlong hours \u003d Math.abs(duration.getSeconds() / 3600);\n\t\tlong minutes \u003d Math.abs((duration.getSeconds() % 3600) / 60);\n\t\tlong seconds \u003d Math.abs(duration.getSeconds() % 60);\n\t\tlong millis \u003d Math.abs(duration.toMillis() - (duration.getSeconds() * 1000)) / 100;\n\n\t\treturn (duration.isNegative() ? \"-\" : \"\") + (hours \u003e 0\n\t\t\t? String.format(\"%1d:%02d:%02d.%1d\", hours, minutes, seconds, millis)\n\t\t\t: String.format(\"%02d:%02d.%1d\", minutes, seconds, millis));\n\t}\n}\n","filePath":"src\\main\\java\\com\\tobhmtimer\\TobHmTimerOverlay.java"},{"fileName":"TobHmTimerPlugin.java","content":"package com.tobhmtimer;\n\nimport com.google.inject.Provides;\nimport static com.tobhmtimer.TobHmTimerConstants.*;\nimport java.time.Duration;\nimport java.util.ArrayList;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\nimport javax.inject.Inject;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.Varbits;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.Text;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"TOB HM Timer\"\n)\npublic class TobHmTimerPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate TobHmTimerConfig config;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate TobHmTimerOverlay overlay;\n\n\tprivate static final Pattern DIGIT_PATTERN \u003d Pattern.compile(\"(\\\\d+)\");\n\n\tprivate int tobVarbit \u003d 0;\n\n\t@Getter\n\tprivate TobTimer timer \u003d new TobTimer();\n\t@Getter\n\tprivate boolean showOverlay \u003d false;\n\t@Getter\n\tprivate boolean raidSucceeded \u003d false;\n\t@Getter\n\tprivate Duration timeToBeat \u003d Duration.ZERO;\n\t@Getter\n\tprivate Duration splitMaiden;\n\t@Getter\n\tprivate Duration splitBloat;\n\t@Getter\n\tprivate Duration splitNylocas;\n\t@Getter\n\tprivate Duration splitSotetseg;\n\t@Getter\n\tprivate Duration splitXarpus;\n\t@Getter\n\tprivate Duration splitVerzik;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\toverlayManager.add(overlay);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\treset();\n\t\tshowOverlay \u003d false;\n\t\toverlayManager.remove(overlay);\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage event)\n\t{\n\t\tif (event.getType() !\u003d ChatMessageType.GAMEMESSAGE)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tString message \u003d Text.removeTags(event.getMessage());\n\n\t\tif (message.equals(MESSAGE_LEFT_LOBBY))\n\t\t{\n\t\t\tshowOverlay \u003d false;\n\t\t\treturn;\n\t\t}\n\n\t\tif (message.startsWith(MESSAGE_RAID_ENTERED))\n\t\t{\n\t\t\tshowOverlay \u003d true;\n\t\t}\n\t\telse if (message.startsWith(MESSAGE_RAID_STARTED))\n\t\t{\n\t\t\tDuration time \u003d parseTime(message);\n\n\t\t\tif (time !\u003d null)\n\t\t\t{\n\t\t\t\tstartRaid(time);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (!timer.isActive())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (message.startsWith(MESSAGE_SPLIT_MAIDEN))\n\t\t{\n\t\t\tsplitMaiden \u003d timer.getGameTime();\n\t\t}\n\t\telse if (message.startsWith(MESSAGE_SPLIT_BLOAT))\n\t\t{\n\t\t\tsplitBloat \u003d timer.getGameTime();\n\t\t}\n\t\telse if (message.startsWith(MESSAGE_SPLIT_NYLOCAS))\n\t\t{\n\t\t\tsplitNylocas \u003d timer.getGameTime();\n\t\t}\n\t\telse if (message.startsWith(MESSAGE_SPLIT_SOTETSEG))\n\t\t{\n\t\t\tsplitSotetseg \u003d timer.getGameTime();\n\t\t}\n\t\telse if (message.startsWith(MESSAGE_SPLIT_XARPUS))\n\t\t{\n\t\t\tsplitXarpus \u003d timer.getGameTime();\n\t\t}\n\t\telse if (message.startsWith(MESSAGE_RAID_COMPLETED))\n\t\t{\n\t\t\tsplitVerzik \u003d timer.getGameTime();\n\t\t\tcompleteRaid(true);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick tick)\n\t{\n\t\ttimer.tick();\n\t}\n\n\t@Subscribe\n\tpublic void onVarbitChanged(VarbitChanged event)\n\t{\n\t\tint nextTobVarBit \u003d client.getVarbitValue(Varbits.THEATRE_OF_BLOOD);\n\n\t\tif (tobVarbit !\u003d nextTobVarBit)\n\t\t{\n\t\t\t// The party has wiped.\n\t\t\tif (nextTobVarBit \u003d\u003d STATE_IN_PARTY \u0026\u0026 timer.isActive())\n\t\t\t{\n\t\t\t\tcompleteRaid(false);\n\t\t\t}\n\n\t\t\t// The player has left their party or has resigned.\n\t\t\telse if (nextTobVarBit \u003d\u003d STATE_NO_PARTY)\n\t\t\t{\n\t\t\t\tshowOverlay \u003d false;\n\t\t\t\treset();\n\t\t\t}\n\n\t\t\ttobVarbit \u003d nextTobVarBit;\n\t\t}\n\t}\n\n\t@Provides\n\tTobHmTimerConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(TobHmTimerConfig.class);\n\t}\n\n\tprivate void startRaid(Duration timeToBeat)\n\t{\n\t\treset();\n\t\tthis.timeToBeat \u003d timeToBeat;\n\t\ttimer.start();\n\t}\n\n\tprivate void completeRaid(boolean succeeded)\n\t{\n\t\ttimer.stop();\n\t\traidSucceeded \u003d succeeded;\n\t}\n\n\tprivate void reset()\n\t{\n\t\ttimer.reset();\n\t\ttimeToBeat \u003d Duration.ZERO;\n\t\traidSucceeded \u003d false;\n\t\tsplitMaiden \u003d null;\n\t\tsplitBloat \u003d null;\n\t\tsplitNylocas \u003d null;\n\t\tsplitSotetseg \u003d null;\n\t\tsplitXarpus \u003d null;\n\t\tsplitVerzik \u003d null;\n\t}\n\n\tprivate static Duration parseTime(String timeString)\n\t{\n\t\tMatcher digitMatcher \u003d DIGIT_PATTERN.matcher(timeString);\n\n\t\tArrayList\u003cString\u003e digits \u003d new ArrayList\u003cString\u003e();\n\t\twhile (digitMatcher.find())\n\t\t{\n\t\t\tdigits.add(digitMatcher.group());\n\t\t}\n\n\t\tif (digits.size() \u003d\u003d 2)\n\t\t{\n\t\t\treturn Duration.ofMinutes(Integer.parseInt(digits.get(0)))\n\t\t\t\t.plus(Duration.ofSeconds(Integer.parseInt(digits.get(1))));\n\t\t}\n\n\t\tif (digits.size() \u003d\u003d 3)\n\t\t{\n\t\t\treturn Duration.ofHours(Integer.parseInt(digits.get(0)))\n\t\t\t\t.plus(Duration.ofMinutes(Integer.parseInt(digits.get(1))))\n\t\t\t\t.plus(Duration.ofSeconds(Integer.parseInt(digits.get(2))));\n\t\t}\n\n\t\treturn null;\n\t}\n}\n","filePath":"src\\main\\java\\com\\tobhmtimer\\TobHmTimerPlugin.java"},{"fileName":"TobTimer.java","content":"package com.tobhmtimer;\n\nimport static com.tobhmtimer.TobHmTimerConstants.MILLIS_PER_TICK;\nimport java.time.Duration;\nimport java.time.LocalDateTime;\nimport java.time.temporal.ChronoUnit;\nimport lombok.Getter;\n\npublic class TobTimer\n{\n\t@Getter\n\tprivate boolean active;\n\tprivate int ticksElapsed;\n\tprivate LocalDateTime lastElapsedTick;\n\n\tpublic Duration getGameTime()\n\t{\n\t\treturn Duration.ofMillis(MILLIS_PER_TICK * ticksElapsed);\n\t}\n\n\tpublic Duration getRealTime()\n\t{\n\t\tif (active \u0026\u0026 lastElapsedTick !\u003d null)\n\t\t{\n\t\t\tlong millisSinceTick \u003d ChronoUnit.MILLIS.between(lastElapsedTick, LocalDateTime.now());\n\t\t\treturn getGameTime().plus(Duration.ofMillis(millisSinceTick));\n\t\t}\n\n\t\treturn getGameTime();\n\t}\n\n\tpublic void reset()\n\t{\n\t\tstop();\n\t\tticksElapsed \u003d 0;\n\t\tlastElapsedTick \u003d null;\n\t}\n\n\tpublic void start()\n\t{\n\t\tactive \u003d true;\n\t}\n\n\tpublic void stop()\n\t{\n\t\tactive \u003d false;\n\t}\n\n\tpublic void tick()\n\t{\n\t\tif (active)\n\t\t{\n\t\t\tticksElapsed++;\n\t\t\tlastElapsedTick \u003d LocalDateTime.now();\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\tobhmtimer\\TobTimer.java"},{"fileName":"TobHmTimerPluginTest.java","content":"package com.tobhmtimer;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class TobHmTimerPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(TobHmTimerPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\tobhmtimer\\TobHmTimerPluginTest.java"}]},{"commit":"6ec4878b11ac2705686441f858e4928b57244cb2","repository":"https://github.com/JNCressey/noHintArrow.git","internalName":"nohintarrow","files":[{"fileName":"ArrowDrawer.java","content":"/*\nBSD 2-Clause License\n\nCopyright (c) 2025, LlemonDuck\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n1. Redistributions of source code must retain the above copyright notice, this\n   list of conditions and the following disclaimer.\n\n2. Redistributions in binary form must reproduce the above copyright notice,\n   this list of conditions and the following disclaimer in the documentation\n   and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\npackage com.nohintarrow;\n\nimport java.awt.Color;\nimport java.awt.Graphics2D;\nimport java.awt.Polygon;\nimport net.runelite.api.Client;\nimport net.runelite.api.Perspective;\nimport static net.runelite.api.Perspective.LOCAL_HALF_TILE_SIZE;\nimport static net.runelite.api.Perspective.LOCAL_TILE_SIZE;\n\nimport net.runelite.api.Player;\nimport net.runelite.api.WorldView;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\n\n\npublic class ArrowDrawer //based on the boat arrow from LlemonDuck/sailing plugin\n{\n\n\n    // arrow facing right\n    // spans about 2 full tiles\n    private static final float[] ARROW_X \u003d new float[]{\n            0,\n            -3 * ((float) LOCAL_TILE_SIZE / 4),\n            -3 * ((float) LOCAL_TILE_SIZE / 4),\n            0,\n            0,\n            +3 * ((float) (5 * LOCAL_TILE_SIZE) / 16),\n            0,\n    };\n    private static final float[] ARROW_Y \u003d new float[]{\n            +((float) LOCAL_TILE_SIZE / 8), // box top right\n            +((float) LOCAL_TILE_SIZE / 8), // box bottom right\n            -((float) LOCAL_TILE_SIZE / 8), // box bottom left\n            -((float) LOCAL_TILE_SIZE / 8), // box top left\n            -((float) (5 * LOCAL_TILE_SIZE) / 16), // head left\n            0, // head top\n            +((float) (5 * LOCAL_TILE_SIZE) / 16), // head right\n    };\n\n    public static int jauBetween(LocalPoint p1, LocalPoint p2)\n    {\n        int dx \u003d p2.getX() - p1.getX();\n        int dy \u003d p2.getY() - p1.getY();\n        double radialStep \u003d 2048. / (Math.PI * 2.);\n        return ((int) Math.round(Math.atan2(dy, -dx) * radialStep)) \u0026 2047;\n    }\n\n    public static float[] translate(float[] src, int offset)\n    {\n        float[] translated \u003d new float[src.length];\n        for (int i \u003d 0; i \u003c src.length; i++)\n        {\n            translated[i] \u003d src[i] + offset;\n        }\n        return translated;\n    }\n\n    public static void renderArrowTowardPoint(Graphics2D g, Client client, WorldPoint destination, Color color, int clearRadius)\n    {\n\n        WorldView tlwv \u003d client.getTopLevelWorldView();\n        int baseX \u003d tlwv.getBaseX();\n        int baseY \u003d tlwv.getBaseY();\n\n        LocalPoint targetLp \u003d LocalPoint.fromScene(destination.getX() - baseX, destination.getY() - baseY, tlwv); // maybe outside the scene\n        LocalPoint playerLp \u003d client.getLocalPlayer().getLocalLocation();\n\n        float[] arrowX \u003d ArrowDrawer.translate(ARROW_X, clearRadius * LOCAL_HALF_TILE_SIZE); // push the arrow outside the boat\n        float[] arrowY \u003d ARROW_Y;\n\n        int[] outXs \u003d new int[arrowX.length];\n        int[] outYs \u003d new int[arrowY.length];\n        Perspective.modelToCanvas(\n                client,\n                client.getTopLevelWorldView(),\n                arrowX.length,\n                playerLp.getX(),\n                playerLp.getY(),\n                getPlayerZ3dCentre(client),//0,\n                ArrowDrawer.jauBetween(targetLp, playerLp),\n                arrowX,\n                arrowY,\n                new float[arrowX.length],\n                outXs,\n                outYs\n        );\n\n        g.setColor(color);\n        g.fill(new Polygon(outXs, outYs, outXs.length));\n    }\n    /**\n      * @return the 3d z coordinate of the ground under the player for the Perspective.modelToCanvas call\n     */\n    static int getPlayerZ3dCentre(Client client){\n        Player localPlayer \u003d client.getLocalPlayer();\n        LocalPoint lp \u003d localPlayer.getLocalLocation();\n        int sceneX \u003d lp.getSceneX();\n        int sceneY \u003d lp.getSceneY();\n        WorldView wv \u003d client.getTopLevelWorldView();\n        int z3dCentre \u003d wv.getTileHeights()[wv.getPlane()][sceneX][sceneY];\n        return z3dCentre;\n    }\n\n}\n","filePath":"src\\main\\java\\com\\nohintarrow\\ArrowDrawer.java"},{"fileName":"DebugMessagesDetailLevel.java","content":"package com.nohintarrow;\n\n/**\n * Levels for how much information to put in debug messages.\n */\npublic enum DebugMessagesDetailLevel {\n    NONE(\"None\"),\n    MINIMAL(\"Minimnal\"),\n    INFORMATIVE(\"Informative\");\n\n    private final String caption;\n\n    DebugMessagesDetailLevel(String caption)\n    {\n        this.caption \u003d caption;\n    }\n\n    public String getCaption()\n    {\n        return caption;\n    }\n}\n","filePath":"src\\main\\java\\com\\nohintarrow\\DebugMessagesDetailLevel.java"},{"fileName":"NoHintArrowConfig.java","content":"package com.nohintarrow;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\nimport java.awt.Color;\n\n@ConfigGroup(\"noHintArrow\")\npublic interface NoHintArrowConfig extends Config\n{\n\t//boolean ENABLE_DEBUG_MODE \u003d false; // use false in production, set to true when debugging to access debug tools\n\n\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"clearDelaySeconds\",\n\t\t\tname \u003d \"Clear Delay (seconds)\",\n\t\t\tdescription \u003d \"How many seconds before the hint arrow is cleared automatically\",\n\t\t\tposition\u003d0\n\t)\n\tdefault int clearDelaySeconds()\n\t{\n\t\treturn 0; // default 0 seconds\n\t}\n\n\n\n\t//region Substitute Tile Marker Settings\n\t@ConfigSection(\n\t\t\tname \u003d \"Substitute Tile Marker Settings\",\n\t\t\tdescription \u003d \"Substitute Tile Marker configuration\",\n\t\t\tposition \u003d 2,\n\t\t\tclosedByDefault \u003d true\n\t)\n\tString substituteTileMarkerSection \u003d \"substituteTileMarkerSection\";\n\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"doSubstituteTileMarker\",\n\t\t\tname \u003d \"Use a substitute tile marker\",\n\t\t\tdescription \u003d \"Show a substitute tile marker for the removed hint arrow\",\n\t\t\tsection \u003d substituteTileMarkerSection,\n\t\t\tposition \u003d 0\n\t)\n\tdefault boolean doSubstituteTileMarker()\n\t{\n\t\treturn true; // default will use a substitute tile marker\n\t}\n\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"substituteTileMarkerDurationSeconds\",\n\t\t\tname \u003d \"Duration (seconds)\",\n\t\t\tdescription \u003d \"How many seconds before the substitute tile marker is cleared\",\n\t\t\tsection \u003d substituteTileMarkerSection,\n\t\t\tposition \u003d 1\n\t)\n\tdefault int substituteTileMarkerDurationSeconds()\n\t{\n\t\treturn 60; // default 1 minute\n\t}\n\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"substituteTileMarkerColor\",\n\t\t\tname \u003d \"Color\",\n\t\t\tdescription \u003d \"Choose the color for the substitute tile marker\",\n\t\t\tsection \u003d substituteTileMarkerSection,\n\t\t\tposition \u003d 2\n\t)\n\tdefault Color substituteTileMarkerColor() {\n\t\treturn Color.YELLOW; // default yellow\n\t}\n\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showSubstituteTileMarkerLabel\",\n\t\t\tname \u003d \"Show Label\",\n\t\t\tdescription \u003d \"Show a text label (\\\"Hint\\\") on the substitute tile marker\",\n\t\t\tsection \u003d substituteTileMarkerSection,\n\t\t\tposition \u003d 3\n\t)\n\tdefault boolean showSubstituteTileMarkerLabel()\n\t{\n\t\treturn true; // default will show label for substitute marker\n\t}\n\t//endregion\n\n\n\n\t//region Substitute Arrow Settings\n\t@ConfigSection(\n\t\t\tname \u003d \"Substitute Arrow Settings\",\n\t\t\tdescription \u003d \"Substitute Arrow configuration\",\n\t\t\tposition \u003d 3,\n\t\t\tclosedByDefault \u003d true\n\t)\n\tString substituteArrowSection \u003d \"substituteArrowSection\";\n\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"doSubstituteArrow\",\n\t\t\tname \u003d \"Use a substitute arrow\",\n\t\t\tdescription \u003d \"Show a substitute arrow for the removed hint arrow\",\n\t\t\tsection \u003d substituteArrowSection,\n\t\t\tposition \u003d 0\n\t)\n\tdefault boolean doSubstituteArrow()\n\t{\n\t\treturn true; // default will use a substitute arrow\n\t}\n\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"substituteArrowDurationSeconds\",\n\t\t\tname \u003d \"Duration (seconds)\",\n\t\t\tdescription \u003d \"How many seconds before the substitute arrow is cleared\",\n\t\t\tsection \u003d substituteArrowSection,\n\t\t\tposition \u003d 1\n\t)\n\tdefault int substituteArrowDurationSeconds()\n\t{\n\t\treturn 60; // default 1 minute\n\t}\n\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"substituteArrowColor\",\n\t\t\tname \u003d \"Color\",\n\t\t\tdescription \u003d \"Choose the color for the substitute arrow\",\n\t\t\tsection \u003d substituteArrowSection,\n\t\t\tposition \u003d 2\n\t)\n\tdefault Color substituteArrowColor() {\n\t\treturn Color.ORANGE; // default yellow\n\t}\n\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"substituteArrowClearRadius\",\n\t\t\tname \u003d \"Clear radius\",\n\t\t\tdescription \u003d \"Radius of clear space around player before the arrow starts\",\n\t\t\tsection \u003d substituteArrowSection,\n\t\t\tposition \u003d 3\n\t)\n\tdefault int substituteArrowClearRadius() {\n\t\treturn 3; // default about 1 tile\n\t}\n\t//endregion\n\n\n\n\t//region debug\n\t@ConfigSection(\n\t\t\tname \u003d \"Debug Options\",\n\t\t\tdescription \u003d \"Various options for debugging\",\n\t\t\tposition \u003d 4,\n\t\t\tclosedByDefault \u003d true\n\t)\n\tString debugSection \u003d \"debugSection\";\n\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"doDebugManualHints\",\n\t\t\tname \u003d \"Manually add Hint-Arrows\",\n\t\t\tdescription \u003d \"Enable shift click to manually set hint arrows\",\n\t\t\tsection \u003d debugSection,\n\t\t\tposition \u003d 0\n\t)\n\tdefault boolean doDebugManualHints()\n\t{\n\t\treturn false; // default won\u0027t show debug menu options\n\t}\n\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"doDebugMessages\",\n\t\t\tname \u003d \"Debug Messages\",\n\t\t\tdescription \u003d \"Show debug messages in chatbox\",\n\t\t\tsection \u003d debugSection,\n\t\t\tposition \u003d 1\n\t)\n\tdefault DebugMessagesDetailLevel doDebugMessages()\n\t{\n\t\treturn DebugMessagesDetailLevel.NONE; // default won\u0027t show debug messages\n\t}\n\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"debugMessageColor\",\n\t\t\tname \u003d \"Debug Message Color\",\n\t\t\tdescription \u003d \"Choose the color for debug text\",\n\t\t\tsection \u003d debugSection,\n\t\t\tposition \u003d 2\n\t)\n\tdefault Color debugMessageColor()\n\t{\n\t\treturn new Color(0x7F007F); // default same purple as incoming trade requests\n\t}\n\t//endregion\n}\n","filePath":"src\\main\\java\\com\\nohintarrow\\NoHintArrowConfig.java"},{"fileName":"NoHintArrowOverlay.java","content":"package com.nohintarrow;\n\nimport net.runelite.api.*;\nimport net.runelite.api.Point;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\n\nimport net.runelite.api.HintArrowType;\nimport net.runelite.api.NPC;\nimport net.runelite.api.Player;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.coords.LocalPoint;\n\nimport javax.inject.Inject;\nimport java.awt.*;\nimport javax.annotation.Nullable;\nimport com.google.common.base.Strings;\n\n\npublic class NoHintArrowOverlay extends Overlay{\n\n    private static final int MAX_DRAW_DISTANCE \u003d 32;\n\n    private int hintArrowType \u003d HintArrowType.NONE;\n    private NPC hintArrowNPC;\n    private Player hintArrowPlayer;\n    private WorldPoint hintArrowPoint;\n    private int substituteMarkerActiveTicks;\n\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private NoHintArrowConfig config;\n\n    @Inject\n    public NoHintArrowOverlay() {\n        setPosition(OverlayPosition.DYNAMIC);\n        setLayer(OverlayLayer.ALWAYS_ON_TOP);\n    }\n\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        if (isTileMarkerVisible()) {\n            String label \u003d config.showSubstituteTileMarkerLabel() ? \"Hint\" : null;\n            switch (hintArrowType){\n                case HintArrowType.NPC:\n                    OverlayUtil.renderActorOverlay(graphics, hintArrowNPC, label, config.substituteTileMarkerColor());\n                    break;\n                case HintArrowType.COORDINATE:\n                    drawTile( graphics,  hintArrowPoint,  config.substituteTileMarkerColor(), label);\n                    break;\n                case HintArrowType.PLAYER:\n                    OverlayUtil.renderActorOverlay(graphics, hintArrowPlayer, label, config.substituteTileMarkerColor());\n                    break;\n\n                //case HintArrowType.WORLDENTITY:\n                case HintArrowType.NONE:\n                default:\n                    //I don\u0027t see any way to handle the hint-arrow when type is HintArrowType.WORLDENTITY\n                    //do nothing\n                    break;\n            }\n        }\n\n        if (isSubstituteArrowVisible()) {\n            switch (hintArrowType){\n                case HintArrowType.NPC:\n                    ArrowDrawer.renderArrowTowardPoint(\n                            graphics,\n                            client,\n                            hintArrowNPC.getWorldLocation(),\n                            config.substituteArrowColor(),\n                            config.substituteArrowClearRadius()\n                    );\n                    break;\n                case HintArrowType.COORDINATE:\n                    ArrowDrawer.renderArrowTowardPoint(\n                            graphics,\n                            client,\n                            hintArrowPoint,\n                            config.substituteArrowColor(),\n                            config.substituteArrowClearRadius()\n                    );\n                    break;\n                case HintArrowType.PLAYER:\n                    ArrowDrawer.renderArrowTowardPoint(\n                            graphics,\n                            client,\n                            hintArrowPlayer.getWorldLocation(),\n                            config.substituteArrowColor(),\n                            config.substituteArrowClearRadius()\n                    );\n                    break;\n\n                //case HintArrowType.WORLDENTITY:\n                case HintArrowType.NONE:\n                default:\n                    //I don\u0027t see any way to handle the hint-arrow when type is HintArrowType.WORLDENTITY\n                    //do nothing\n                    break;\n            }\n        }\n        return null;\n    }\n\n    private boolean isTileMarkerVisible()\n    {\n        int maxDuration \u003d (int) Math.ceil(config.substituteTileMarkerDurationSeconds() / 0.6); //duration converted to game ticks (1 tick \u003d 0.6s)\n        return (\n            config.doSubstituteTileMarker()\n            \u0026\u0026 (hintArrowType !\u003d HintArrowType.NONE)\n            \u0026\u0026 (substituteMarkerActiveTicks \u003c\u003d maxDuration)\n        );\n    }\n\n    private boolean isSubstituteArrowVisible()\n    {\n        int maxDuration \u003d (int) Math.ceil(config.substituteArrowDurationSeconds() / 0.6); //duration converted to game ticks (1 tick \u003d 0.6s)\n        return (\n            config.doSubstituteArrow()\n            \u0026\u0026 (hintArrowType !\u003d HintArrowType.NONE)\n            \u0026\u0026 (substituteMarkerActiveTicks \u003c\u003d maxDuration)\n        );\n    }\n\n    public void updateSubstituteMarker(int substituteMarkerActiveTicks)\n    {\n        this.substituteMarkerActiveTicks \u003d substituteMarkerActiveTicks;\n        if (client.hasHintArrow())\n        {\n            hintArrowType \u003d client.getHintArrowType();\n\n            switch (hintArrowType) {\n                case HintArrowType.NPC:\n                    hintArrowNPC \u003d client.getHintArrowNpc();\n                    break;\n                case HintArrowType.COORDINATE:\n                    hintArrowPoint \u003d client.getHintArrowPoint();\n                    break;\n                case HintArrowType.PLAYER:\n                    hintArrowPlayer \u003d client.getHintArrowPlayer();\n                    break;\n\n                case HintArrowType.WORLDENTITY:\n                    /* there is no client.getHintArrowWorldEntity? */\n                case HintArrowType.NONE:\n                default:\n                    break;\n            }\n        }\n    }\n\n\n    // based on GroundMarkerOverlay.drawTile from runelite/runelite-client/src/main/java/net/runelite/client/plugins/groundmarkers/GroundMarkerOverlay.java\n    private void drawTile(Graphics2D graphics, WorldPoint point, Color color, @Nullable String label)\n    {\n        //region set parameters\n        final int borderWidth \u003d 2;\n        final Stroke borderStroke \u003d new BasicStroke((float) borderWidth);\n        final int fillOpacity \u003d50;\n        //endregion\n\n        if (client.getLocalPlayer().getWorldView().isTopLevel())\n        {\n            WorldPoint playerLocation \u003d client.getLocalPlayer().getWorldLocation();\n\n            if (point.distanceTo(playerLocation) \u003e\u003d MAX_DRAW_DISTANCE)\n            {\n                return;\n            }\n        }\n\n        LocalPoint lp \u003d LocalPoint.fromWorld(client.findWorldViewFromWorldPoint(point), point);\n        if (lp \u003d\u003d null)\n        {\n            return;\n        }\n\n        Polygon poly \u003d Perspective.getCanvasTilePoly(client, lp);\n        if (poly !\u003d null)\n        {\n            OverlayUtil.renderPolygon(graphics, poly, color, new Color(0, 0, 0, fillOpacity), borderStroke);\n        }\n\n        if (!Strings.isNullOrEmpty(label))\n        {\n            Point canvasTextLocation \u003d Perspective.getCanvasTextLocation(client, graphics, lp, label, 0);\n            if (canvasTextLocation !\u003d null)\n            {\n                OverlayUtil.renderTextLocation(graphics, canvasTextLocation, label, color);\n            }\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\nohintarrow\\NoHintArrowOverlay.java"},{"fileName":"NoHintArrowPlugin.java","content":"package com.nohintarrow;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.chat.QueuedMessage;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport java.util.Optional;\nimport net.runelite.api.events.MenuEntryAdded;\nimport net.runelite.api.coords.WorldPoint;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"No Hint-Arrow\",\n\tdescription \u003d\"Completely remove the flashing yellow hint arrow, or let it only show for a set length of seconds. Optional substitute marker.\",\n\ttags \u003d {\"accessibility\",\"epilepsy\",\"flashing\",\"tutorial\",\"arrow\",\"marker\"}\n)\npublic class NoHintArrowPlugin extends Plugin\n{\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate NoHintArrowConfig config;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Inject\n\tprivate ChatMessageManager chatMessageManager;\n\n\t//region overlay\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate NoHintArrowOverlay overlay;\n\t//endregion\n\n\t// Tracks how many ticks the arrow has been active for when to clear hint arrow\n\tprivate int arrowActiveTicks \u003d 0;\n\n\t//track what has been marked by the substitute marker in order to remove the marker\n\tprivate boolean isSubstituteMarkerSet \u003d false;\n\tprivate int substituteMarkerActiveTicks \u003d 0;\n\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tlog.info(\"noHintArrow plugin started!\");\n\t\toverlayManager.add(overlay);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(overlay);\n\t\tlog.info(\"noHintArrow plugin stopped!\");\n\t}\n\n\t@Provides\n\tNoHintArrowConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(NoHintArrowConfig.class);\n\t}\n\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event)\n\t{\n\t\t//region timers\n\t\tsubstituteMarkerActiveTicks++; //increment counter\n\t\tif(client.hasHintArrow())\n\t\t{\n\t\t\tarrowActiveTicks++; //increment counter\n\t\t\tsubstituteMarkerActiveTicks \u003d 0; // refresh the counter for keeping substitute up\n\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// No arrow active, reset counter\n\t\t\tarrowActiveTicks \u003d 0;\n\t\t}\n\t\t//endregion\n\n\n\t\toverlay.updateSubstituteMarker(substituteMarkerActiveTicks);\n\n\n\t\tif (client.hasHintArrow() \u0026\u0026 (arrowActiveTicks \u003e\u003d getClearDelayTicks())) // clear hint arrow if duration elapsed\n\t\t{\n\t\t\tclearHintArrow();\n\t\t}\n\t}\n\n\n\n\t//region remove hint-arrow\n\t// the user config for clear delay converted to game ticks (1 tick \u003d 0.6s)\n\tprivate int getClearDelayTicks(){\n\t\treturn (int) Math.ceil(config.clearDelaySeconds() / 0.6);\n\t}\n\n\n\tprivate void clearHintArrow()\n\t{\n\t\tdebugHintArrowValues();\n\n\t\tarrowActiveTicks \u003d 0; // reset counter\n\n\t\tclient.clearHintArrow();\n\t}\n\t//endregion\n\n\n\n\t//region debug\n\t// use for testing, manually set hint arrows when shift clicking on things\n\t@Subscribe\n\tpublic void onMenuEntryAdded(MenuEntryAdded event) {\n\t\tif (!config.doDebugManualHints()){ return; } // only add debug options if debug mode on\n\n\t\tfinal boolean hotKeyPressed \u003d client.isKeyPressed(KeyCode.KC_SHIFT);\n\t\tif (!hotKeyPressed){ return; } // only add debug options if shift key is held\n\n\t\tMenuAction menuAction \u003d event.getMenuEntry().getType();\n\n\n\t\t//region add setHintArrow options to menu\n\n\t\t// Coordinate from ground\n\t\tif (menuAction \u003d\u003d MenuAction.WALK) {\n\t\t\tfinal int worldId \u003d event.getMenuEntry().getWorldViewId();\n\t\t\tOptional.ofNullable(client.getWorldView(worldId))\n\t\t\t\t\t.map(WorldView::getSelectedSceneTile)\n\t\t\t\t\t.map(e-\u003eWorldPoint.fromLocalInstance(client, e.getLocalLocation()))\n\t\t\t\t\t.ifPresent(worldPoint -\u003e\n\t\t\t\t\t\tclient.getMenu().createMenuEntry(-1)\n\t\t\t\t\t\t\t\t.setOption(\"setHintArrow\")\n\t\t\t\t\t\t\t\t.setTarget(\"Tile\")\n\t\t\t\t\t\t\t\t.setType(MenuAction.RUNELITE)\n\t\t\t\t\t\t\t\t.onClick(e -\u003e\n\t\t\t\t\t\t\t\t\t\tclient.setHintArrow(worldPoint)));\n\t\t}\n\n\t\t// NPC\n\t\tif (menuAction \u003d\u003d MenuAction.EXAMINE_NPC) {\n\t\t\tclient.getMenu().createMenuEntry(-1)\n\t\t\t\t\t.setOption(\"setHintArrow\")\n\t\t\t\t\t.setTarget(event.getTarget())\n\t\t\t\t\t.setType(MenuAction.RUNELITE)\n\t\t\t\t\t.onClick(e -\u003e\n\t\t\t\t\t\t\tclient.setHintArrow(event.getMenuEntry().getNpc()));\n\t\t}\n\n\t\t// Player\n\t\tPlayer player \u003d event.getMenuEntry().getPlayer();\n\t\tString option \u003d event.getMenuEntry().getOption();\n\t\tif ((player !\u003d null) \u0026\u0026 (option.equals(\"Follow\"))) {\n\t\t\tclient.getMenu().createMenuEntry(-1)\n\t\t\t\t\t.setOption(\"setHintArrow\")\n\t\t\t\t\t.setTarget(event.getTarget())\n\t\t\t\t\t.setType(MenuAction.RUNELITE)\n\t\t\t\t\t.onClick(e -\u003e\n\t\t\t\t\t\t\tclient.setHintArrow(player));\n\t\t}\n\n\t\t//endregion\n\n\t}\n\n\n\tprivate void printInChatbox(String message)\n\t{\n\t\tlog.info(message);\n\t\tchatMessageManager.queue(\n\t\t\t\tQueuedMessage.builder()\n\t\t\t\t\t\t.type(ChatMessageType.GAMEMESSAGE) // Game info style\n\t\t\t\t\t\t.runeLiteFormattedMessage(\n\t\t\t\t\t\t\t\tString.format(\"\u003ccol\u003d%06x\u003e\", config.debugMessageColor().getRGB() \u0026 0xFFFFFF)\n\t\t\t\t\t\t\t\t\t\t+ message\n\t\t\t\t\t\t\t\t\t\t+ \"\u003c/col\u003e\"\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.build()\n\t\t);\n\t}\n\n\n\t// use for testing, debug info put in chatbox\n\tprivate void debugHintArrowValues()\n\t{\n\t\tswitch(config.doDebugMessages()) {\n\t\t\tcase INFORMATIVE:\n\t\t\t\tprintInChatbox(\"Hint arrow removed.\");\n\n\t\t\t\tString[] hintArrowTypeNames \u003d {\n\t\t\t\t\t\t\"NONE\",\n\t\t\t\t\t\t\"NPC\",\n\t\t\t\t\t\t\"COORDINATE\",\n\t\t\t\t\t\t\"PLAYER\",\n\t\t\t\t\t\t\"WORLDENTITY\"\n\t\t\t\t};\n\t\t\t\tint hintArrowTypeIndex \u003d client.getHintArrowType();\n\t\t\t\tString hintArrowTypeName \u003d hintArrowTypeNames[client.getHintArrowType()];\n\t\t\t\tprintInChatbox(\"Hint arrow type \" + hintArrowTypeIndex + \" (\" + hintArrowTypeName + \")\");\n\n\t\t\t\tswitch (hintArrowTypeName) {\n\t\t\t\t\tcase \"NPC\":\n\t\t\t\t\t\tprintInChatbox(\n\t\t\t\t\t\t\t\t\"NPC name \"\n\t\t\t\t\t\t\t\t\t\t+ Optional.ofNullable(client.getHintArrowNpc())\n\t\t\t\t\t\t\t\t\t\t.map(NPC::getName)\n\t\t\t\t\t\t\t\t\t\t.orElse(\"-null-\")\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"COORDINATE\":\n\t\t\t\t\t\tprintInChatbox(\n\t\t\t\t\t\t\t\t\"Coordinates \"\n\t\t\t\t\t\t\t\t\t\t+ Optional.ofNullable(client.getHintArrowPoint())\n\t\t\t\t\t\t\t\t\t\t.map(p -\u003e p.getX() + \",\" + p.getY())\n\t\t\t\t\t\t\t\t\t\t.orElse(\"-null-\")\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"PLAYER\":\n\t\t\t\t\t\tprintInChatbox(\n\t\t\t\t\t\t\t\t\"player name \"\n\t\t\t\t\t\t\t\t\t\t+ Optional.ofNullable(client.getHintArrowPlayer())\n\t\t\t\t\t\t\t\t\t\t.map(Player::getName)\n\t\t\t\t\t\t\t\t\t\t.orElse(\"-null-\")\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t//pass\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase MINIMAL:\n\t\t\t\tprintInChatbox(\"Hint arrow removed.\");\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t}\n\t//endregion\n}\n","filePath":"src\\main\\java\\com\\nohintarrow\\NoHintArrowPlugin.java"},{"fileName":"NoHintArrowPluginTest.java","content":"package com.nohintarrow;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class NoHintArrowPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(NoHintArrowPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\nohintarrow\\NoHintArrowPluginTest.java"}]},{"commit":"b4c4c7a33c460b41d6559530808c17c312689906","repository":"https://github.com/Cerisk/OWM-Chat.git","internalName":"owm-chat","files":[{"fileName":"OWMChatConfig.java","content":"package com.owmchat;\r\n\r\nimport net.runelite.client.config.Config;\r\nimport net.runelite.client.config.ConfigGroup;\r\nimport net.runelite.client.config.ConfigItem;\r\n\r\n@ConfigGroup(\"userChatFilterConfig\")\r\npublic interface OWMChatConfig extends Config\r\n{\r\n\r\n    @ConfigItem(\r\n\t\t\tkeyName \u003d \"OWM Chat\",\r\n\t\t\tname \u003d \"Welcome to Old Wise Man chat\",\r\n\t\t\tdescription \u003d \"Login and put some specs on to see the chat old man! Code used from several plugins (ie Emoji, NPC Chat Overhead Dialogue)\"\r\n\t)\r\n\r\n\tdefault void enableChatDialog() {\r\n\r\n    }\r\n\r\n    @ConfigItem(\r\n            position \u003d 7,\r\n            keyName \u003d \"getNpcWhitelist\",\r\n            name \u003d \"Add NPCs to Whitelist\",\r\n            description \u003d \"List of NPC names to Whitelist. Format: (NPC), (NPC)\"\r\n    )\r\n    default String getNpcWhitelist()\r\n    {\r\n        return \"\";\r\n    }\r\n\r\n    @ConfigItem(\r\n            keyName \u003d \"npcToWhitelist\",\r\n            name \u003d \"\",\r\n            description \u003d \"\"\r\n    )\r\n    void setNpcToWhitelist(String npcToWhitelist);\r\n\r\n}\r\n","filePath":"src\\main\\java\\com\\owmchat\\OWMChatConfig.java"},{"fileName":"OWMChatPlugin.java","content":"package com.owmchat;\r\n\r\nimport com.google.inject.Provides;\r\nimport lombok.AccessLevel;\r\nimport lombok.Getter;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport net.runelite.api.*;\r\nimport net.runelite.api.events.*;\r\nimport net.runelite.client.chat.ChatColorType;\r\nimport net.runelite.client.chat.ChatMessageBuilder;\r\nimport net.runelite.client.chat.ChatMessageManager;\r\nimport net.runelite.client.chat.QueuedMessage;\r\nimport net.runelite.client.config.ConfigManager;\r\nimport net.runelite.client.eventbus.Subscribe;\r\nimport net.runelite.client.game.NPCManager;\r\nimport net.runelite.client.game.npcoverlay.HighlightedNpc;\r\nimport net.runelite.client.game.npcoverlay.NpcOverlayService;\r\nimport net.runelite.client.plugins.Plugin;\r\nimport net.runelite.client.plugins.PluginDescriptor;\r\nimport net.runelite.api.MenuEntry;\r\nimport net.runelite.api.events.MenuOptionClicked;\r\nimport net.runelite.client.util.Text;\r\nimport net.runelite.client.util.WildcardMatcher;\r\n\r\n\r\nimport javax.inject.Inject;\r\nimport java.util.*;\r\nimport java.util.List;\r\nimport java.util.function.Function;\r\n\r\n\r\n@Slf4j\r\n@PluginDescriptor(\r\n\t\tname \u003d \"Old Wise Man Chat\"\r\n)\r\n\r\n\r\n\r\npublic class OWMChatPlugin extends Plugin {\r\n\r\n\t@Inject\r\n\tprivate Client client;\r\n\r\n\t@Inject\r\n\tprivate OWMChatConfig config;\r\n\r\n\t@Inject\r\n\tprivate ConfigManager configManager;\r\n\r\n\t@Inject\r\n\tprivate ChatMessageManager chatMessageManager;\r\n\r\n\t@Inject\r\n\tprivate NPCManager npcManager;\r\n\r\n\r\n\tprivate Actor actor \u003d null;\r\n\tprivate String lastNPCText \u003d \"\";\r\n\r\n\r\n\tprivate List\u003cNPC\u003e npcWhitelist \u003d new ArrayList\u003cNPC\u003e();\r\n\r\n\r\n\t@Override\r\n\tprotected void startUp() throws Exception {\r\n\t\tlog.info(\"[OWM-Chat] Plugin Initialized Successfully\");\r\n\t\tsendChatMessage(\"[OWM-Chat] Plugin Initialized Successfully\");\r\n\r\n\r\n\t\tsendChatMessage(\"[OWM-Chat] New Menu Entry: \");\r\n\t\tgetWhitelist();\r\n\t\trebuild();\r\n\r\n\t}\r\n\r\n\r\n\tprivate void addToWhitelist(String npcName) {\r\n\t\twhitelist \u003d getWhitelist();\r\n\t\tif (!getWhitelist().contains(npcName)) {\r\n\r\n\t\t\tgetWhitelist().add(npcName);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tprivate ChatMessageType getMenuOption() {\r\n\t\tChatMessage menuEntry \u003d null;\r\n\t\treturn menuEntry.getType();\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\t@Override\r\n\tprotected void shutDown() throws Exception {\r\n\t\tlog.info(\"Looks like that\u0027s enough, back to bed bud.\");\r\n\t\tsendChatMessage(\"[OWM-Chat] Looks like that\u0027s enough, back to bed bud.\");\r\n\r\n\r\n\t}\r\n\r\n\r\n//\tUsed to build the chat messages NPCs speak overhead\r\n\t@Subscribe\r\n\tpublic void onOverheadTextChanged(OverheadTextChanged event) {\r\n\r\n\t\t// log.info(\"animation changed for: \" + otChanged.getActor().getName());\r\n\t\tfinal String bot \u003d event.getActor().getName();\r\n\t\tfinal String message \u003d event.getOverheadText();\r\n\r\n\t\tif (whitelistMatchesNPCName(bot)) {\r\n\t\t\t// Do something with the NPC\r\n\t\t\tsendChatMessage(\"[OWM-Notification] \" + bot + \": \" + message);\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n// Used to build and send the chat messages through to the main OSRS chat box\r\n\tprivate void sendChatMessage(String chatMessage) {\r\n\t\tfinal String message \u003d new ChatMessageBuilder()\r\n\t\t\t\t.append(ChatColorType.HIGHLIGHT)\r\n\t\t\t\t.append(chatMessage)\r\n\t\t\t\t.build();\r\n\r\n\t\tchatMessageManager.queue(\r\n\t\t\t\tQueuedMessage.builder()\r\n\t\t\t\t\t\t.type(ChatMessageType.CONSOLE)\r\n\t\t\t\t\t\t.runeLiteFormattedMessage(message)\r\n\t\t\t\t\t\t.build());\r\n\t}\r\n\r\n\r\n\t@Provides\r\n\tOWMChatConfig provideConfig(ConfigManager configManager) {\r\n\t\treturn configManager.getConfig(OWMChatConfig.class);\r\n\t}\r\n\r\n\r\n\t// Local whitelist in OWMChatPlugin\r\n\tprivate List\u003cString\u003e whitelist \u003d new ArrayList\u003c\u003e();\r\n\r\n\t// Used to update and get the whitelist from the Config file\r\n\r\n\tList\u003cString\u003e getWhitelist() {\r\n\t\tfinal String configNpcs \u003d config.getNpcWhitelist();\r\n\r\n\t\tif (configNpcs.isEmpty()) {\r\n\t\t\treturn Collections.emptyList();\r\n\t\t}\r\n\r\n\t\treturn Text.fromCSV(configNpcs);\r\n\t}\r\n\r\n\r\n\t// Used to check if an NPC name matches with another NPC name that is on the whitelist\r\n\tprivate boolean whitelistMatchesNPCName(String npcName) {\r\n\t\twhitelist \u003d getWhitelist();\r\n\t\tfor (String highlight : whitelist) {\r\n\t\t\tif (WildcardMatcher.matches(highlight, npcName)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\r\n\t@Getter(AccessLevel.PACKAGE)\r\n\tprivate final Map\u003cNPC, HighlightedNpc\u003e whitelistedNpc \u003d new HashMap\u003c\u003e();\r\n\r\n\tprivate final Function\u003cNPC, HighlightedNpc\u003e isHighlighted \u003d whitelistedNpc::get;\r\n\r\n\tprivate NpcOverlayService npcOverlayService;\r\n\t// Used to update and rebuild the plugin on gamestate update\r\n\tvoid rebuild()\r\n\t{\r\n\t\twhitelist \u003d getWhitelist();\r\n\t\twhitelistedNpc.clear();\r\n\r\n\t\tif (client.getGameState() !\u003d GameState.LOGGED_IN \u0026\u0026\r\n\t\t\t\tclient.getGameState() !\u003d GameState.LOADING)\r\n\t\t{\r\n\t\t\t// NPCs are still in the client after logging out,\r\n\t\t\t// but we don\u0027t want to highlight those.\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tfor (NPC npc : client.getNpcs())\r\n\t\t{\r\n\t\t\tfinal String npcName \u003d npc.getName();\r\n\r\n\t\t\tif (npcName \u003d\u003d null)\r\n\t\t\t{\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tnpcOverlayService.rebuild();\r\n\t}\r\n\r\n\r\n\r\n\r\n/* Possible edition later to add right-click menu option for whitelisting NPCs\r\n\t@Subscribe\r\n\tpublic void onMenuOptionClicked(MenuOptionClicked event) {\r\n\t\tfinal MenuEntry menuEntry \u003d event.getMenuEntry();\r\n\t\tfinal MenuAction menuAction \u003d menuEntry.getType();\r\n\t\tfinal NPC npc \u003d menuEntry.getNpc();\r\n\r\n\t\tfinal String npcName \u003d npc.getName();\r\n\r\n\t\tString option \u003d event.getMenuOption();\r\n\t\tfinal MenuEntry[] menuEntries \u003d client.getMenuEntries();\r\n\t\tfinal boolean rightClickOpened \u003d option.equalsIgnoreCase(TAG) \u0026\u0026 menuEntries.length \u003e 0;\r\n\t\tif (rightClickOpened)\r\n\t\t{\r\n\t\t\tclient.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"You are selecting \\\"Whitelist\\\" from your right-click menu!\" + npcName, null);\r\n\t\t\taddToWhitelist(npcName);\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t\tpublic void sendRightClickOptions() {\r\n\t\t// Retrieve the current right-click options\r\n\t\tMenuEntry[] menuEntries \u003d client.getMenuEntries();\r\n\r\n\t\t// Format the right-click options into a string\r\n\t\tStringBuilder sb \u003d new StringBuilder();\r\n\t\tsb.append(\"Your right-click options: \");\r\n\t\tfor (int i \u003d 0; i \u003c menuEntries.length; i++) {\r\n\t\t\tsb.append(menuEntries[i].getOption());\r\n\t\t\tif (i \u003c menuEntries.length - 1) {\r\n\t\t\t\tsb.append(\", \");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Send the right-click options to the chat\r\n\t\tsendChatMessage(sb.toString());\r\n\t}\r\n*/\r\n\r\n/* Possible addition later, this section adds the \"Whitelist\" menu option when holding shift on NPC\r\n\tprivate final Set\u003cInteger\u003e npcTags \u003d new HashSet\u003c\u003e();\r\n\tprivate static final String TAG \u003d \"Whitelist\";\r\n\tprivate static final String UNTAG \u003d \"Un-Whitelist\";\r\n\t@Subscribe\r\n\tpublic void onMenuEntryAdded(MenuEntryAdded event)\r\n\t{\r\n\t\tfinal MenuEntry menuEntry \u003d event.getMenuEntry();\r\n\t\tfinal MenuAction menuAction \u003d menuEntry.getType();\r\n\t\tfinal NPC npc \u003d menuEntry.getNpc();\r\n\r\n\t\tif (npc \u003d\u003d null)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\r\n\t\tif (menuAction \u003d\u003d MenuAction.EXAMINE_NPC \u0026\u0026 client.isKeyPressed(KeyCode.KC_SHIFT)) {\r\n\r\n\t\t\t// Add tag and tag-all options\r\n\r\n\r\n\t\t\tif (npc.getName() \u003d\u003d null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfinal String npcName \u003d npc.getName();\r\n\t\t\tfinal boolean nameMatch \u003d whitelist.stream().anyMatch(npcName::equalsIgnoreCase);\r\n\t\t\tfinal boolean idMatch \u003d npcTags.contains(npc.getIndex());\r\n\t\t\tfinal boolean wildcardMatch \u003d whitelist.stream()\r\n\t\t\t\t\t.filter(highlight -\u003e !highlight.equalsIgnoreCase(npcName))\r\n\t\t\t\t\t.anyMatch(highlight -\u003e WildcardMatcher.matches(highlight, npcName));\r\n\t\t\tint idx \u003d -1;\r\n\r\n\t\t\tclient.createMenuEntry(idx--)\r\n\t\t\t\t\t.setOption(idMatch ? UNTAG : TAG)\r\n\t\t\t\t\t.setTarget(event.getTarget())\r\n\t\t\t\t\t.setIdentifier(event.getIdentifier())\r\n\t\t\t\t\t.setType(MenuAction.RUNELITE)\r\n\t\t\t\t\t.onClick(this::tag);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\tprivate void tag(MenuEntry menuEntry) {\r\n\t\tfinal int id \u003d menuEntry.getIdentifier();\r\n\t\tfinal NPC[] cachedNPCs \u003d client.getCachedNPCs();\r\n\t\tfinal NPC npc \u003d cachedNPCs[id];\r\n\r\n\t\tif (npc \u003d\u003d null || npc.getName() \u003d\u003d null) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (menuEntry.getOption().equals(TAG) || menuEntry.getOption().equals(UNTAG)) {\r\n\t\t\tfinal boolean removed \u003d npcTags.remove(id);\r\n\r\n\t\t\tif (removed) {\r\n\t\t\t\tif (!whitelistMatchesNPCName(npc.getName())) {\r\n\t\t\t\t\tnpcWhitelist.remove(npc);\r\n\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfinal String name \u003d npc.getName();\r\n\t\t\t\tfinal List\u003cString\u003e whitelistedNpcs \u003d new ArrayList\u003c\u003e(whitelist);\r\n\r\n\t\t\t\tif (!whitelistedNpcs.removeIf(name::equalsIgnoreCase)) {\r\n\t\t\t\t\twhitelistedNpcs.add(name);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// this trips a config change which triggers the overlay rebuild\r\n\t\t\t\tconfig.setNpcToWhitelist(Text.toCSV(whitelistedNpcs));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t}\r\n*/\r\n\r\n\r\n\r\n}","filePath":"src\\main\\java\\com\\owmchat\\OWMChatPlugin.java"},{"fileName":"OWMChatPluginTest.java","content":"package com.owmchat;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class OWMChatPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(OWMChatPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\owmchat\\OWMChatPluginTest.java"}]},{"commit":"d8830b20f3521f1fb12202d6f99f9621ddae301d","repository":"https://github.com/Maurits825/herbi-afk.git","internalName":"herbi-afk","files":[{"fileName":"HerbiAfkConfig.java","content":"package com.herbiafk;\n\nimport java.awt.Color;\nimport net.runelite.client.config.Alpha;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"herbiafk\")\npublic interface HerbiAfkConfig extends Config\n{\n\t@ConfigItem(\n\t\tposition \u003d 1,\n\t\tkeyName \u003d \"showPathLine\",\n\t\tname \u003d \"Show path lines\",\n\t\tdescription \u003d \"Show trail path lines on the world.\"\n\t)\n\tdefault boolean showPathLine()\n\t{\n\t\treturn true;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tposition \u003d 2,\n\t\tkeyName \u003d \"lineColor\",\n\t\tname \u003d \"Path line color\",\n\t\tdescription \u003d \"Color of the trail path lines.\"\n\t)\n\tdefault Color getLineColor()\n\t{\n\t\treturn Color.CYAN;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 3,\n\t\tkeyName \u003d \"showMiniMapArrow\",\n\t\tname \u003d \"Show arrow on the minimap\",\n\t\tdescription \u003d \"Show an arrow on the minimap to the next search spot.\"\n\t)\n\tdefault boolean showMiniMapArrow()\n\t{\n\t\treturn true;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tposition \u003d 4,\n\t\tkeyName \u003d \"arrowColor\",\n\t\tname \u003d \"Minimap arrow color\",\n\t\tdescription \u003d \"Color of the arrow on the minimap.\"\n\t)\n\tdefault Color getArrowColor()\n\t{\n\t\treturn Color.CYAN;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 5,\n\t\tkeyName \u003d \"showMiniMaplines\",\n\t\tname \u003d \"Show path lines on the minimap\",\n\t\tdescription \u003d \"Show the trail path lines on the minimap.\"\n\t)\n\tdefault boolean showMiniMaplines()\n\t{\n\t\treturn true;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tposition \u003d 6,\n\t\tkeyName \u003d \"minimapPathColor\",\n\t\tname \u003d \"Minimap path lines color\",\n\t\tdescription \u003d \"Color of the trail path lines on the minimap.\"\n\t)\n\tdefault Color getMinimapPathColor()\n\t{\n\t\treturn Color.CYAN;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 7,\n\t\tkeyName \u003d \"highlightHerbiTile\",\n\t\tname \u003d \"Highlight herbiboar tile\",\n\t\tdescription \u003d \"Highlights herbiboar tile at the end of the trail.\"\n\t)\n\tdefault boolean highlightHerbiTile()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 8,\n\t\tkeyName \u003d \"highlightHerbiHull\",\n\t\tname \u003d \"Highlight herbiboar hull\",\n\t\tdescription \u003d \"Highlights herbiboar hull at the end of the trail.\"\n\t)\n\tdefault boolean highlightHerbiHull()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 9,\n\t\tkeyName \u003d \"highlightHerbiOutline\",\n\t\tname \u003d \"Highlight herbiboar outline\",\n\t\tdescription \u003d \"Highlights herbiboar outline at the end of the trail.\"\n\t)\n\tdefault boolean highlightHerbiOutline()\n\t{\n\t\treturn false;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tposition \u003d 10,\n\t\tkeyName \u003d \"herbiboarColor\",\n\t\tname \u003d \"Herbiboar highlight\",\n\t\tdescription \u003d \"Color of the herbiboar highlight.\"\n\t)\n\tdefault Color getHerbiboarColor()\n\t{\n\t\treturn Color.CYAN;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 11,\n\t\tkeyName \u003d \"pathRelativeToPlayer\",\n\t\tname \u003d \"Path relative to player\",\n\t\tdescription \u003d \"Make the trail path line relative to the player.\"\n\t)\n\tdefault boolean pathRelativeToPlayer()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 12,\n\t\tkeyName \u003d \"dynamicMenuEntrySwap\",\n\t\tname \u003d \"Dynamically swap trail menu entries\",\n\t\tdescription \u003d \"Swap menu entries to only make the next correct object clickable.\"\n\t)\n\tdefault boolean dynamicMenuEntrySwap()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 13,\n\t\tkeyName \u003d \"npcMenuEntrySwap\",\n\t\tname \u003d \"Hide fossil island npcs menu entries\",\n\t\tdescription \u003d \"Hide fungi, zygomite and crab interaction menus.\"\n\t)\n\tdefault boolean npcMenuEntrySwap()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 14,\n\t\tkeyName \u003d \"noLootMode\",\n\t\tname \u003d \"No loot mode\",\n\t\tdescription \u003d \"Skip the step of looting herbi.\"\n\t)\n\tdefault boolean noLootMode()\n\t{\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\com\\herbiafk\\HerbiAfkConfig.java"},{"fileName":"HerbiAfkData.java","content":"package com.herbiafk;\n\nimport com.google.common.collect.ImmutableList;\nimport net.runelite.api.coords.WorldPoint;\n\nimport java.util.List;\n\npublic class HerbiAfkData\n{\n\tpublic static final List\u003cWorldPoint\u003e START_LOCATIONS \u003d ImmutableList.of(\n\t\tnew WorldPoint(3686, 3870, 0),\n\t\tnew WorldPoint(3751, 3850, 0),\n\t\tnew WorldPoint(3695, 3800, 0),\n\t\tnew WorldPoint(3704, 3810, 0),\n\t\tnew WorldPoint(3705, 3830, 0)\n\t);\n\n\tpublic static final List\u003cWorldPoint\u003e END_LOCATIONS \u003d ImmutableList.of(\n\t\tnew WorldPoint(3693, 3798, 0),\n\t\tnew WorldPoint(3702, 3808, 0),\n\t\tnew WorldPoint(3703, 3826, 0),\n\t\tnew WorldPoint(3710, 3881, 0),\n\t\tnew WorldPoint(3700, 3877, 0),\n\t\tnew WorldPoint(3715, 3840, 0),\n\t\tnew WorldPoint(3751, 3849, 0),\n\t\tnew WorldPoint(3685, 3869, 0),\n\t\tnew WorldPoint(3681, 3863, 0)\n\t);\n\n\tpublic static final String[] TRAIL_MENU_ENTRY_TARGETS \u003d new String[]{\n\t\t\"Tunnel\", \"Mushroom\", \"Smelly mushroom\", \"Muddy patch\", \"Seaweed\", \"Rock\", \"Driftwood\"\n\t};\n\n\tpublic static final String[] NPC_MENU_ENTRY_TARGETS \u003d new String[]{\n\t\t\"Ancient Fungi\", \"Ancient Zygomite\", \"Ammonite Crab\", \"Tool Leprechaun\", \"Tree patch\", \"Teak tree\", \"Mahogany tree\"\n\t};\n}\n","filePath":"src\\main\\java\\com\\herbiafk\\HerbiAfkData.java"},{"fileName":"HerbiAfkMinimapOverlay.java","content":"package com.herbiafk;\n\nimport com.herbiafk.QuestHelperTools.DirectionArrow;\nimport com.herbiafk.QuestHelperTools.WorldLines;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\n\nimport javax.inject.Inject;\nimport java.awt.Graphics2D;\nimport java.awt.Dimension;\n\npublic class HerbiAfkMinimapOverlay extends Overlay\n{\n\n\tprivate final HerbiAfkPlugin plugin;\n\tprivate final HerbiAfkConfig config;\n\n\t@Inject\n\tpublic HerbiAfkMinimapOverlay(HerbiAfkPlugin plugin, HerbiAfkConfig config)\n\t{\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.ABOVE_WIDGETS);\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (!plugin.isInHerbiboarArea())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (config.showMiniMapArrow() \u0026\u0026 plugin.getEndLocation() !\u003d null)\n\t\t{\n\t\t\tDirectionArrow.renderMinimapArrow(graphics, plugin.getClient(), plugin.getEndLocation(), config.getArrowColor());\n\t\t}\n\n\t\tif (config.showMiniMaplines() \u0026\u0026 plugin.getPathLinePoints() !\u003d null)\n\t\t{\n\t\t\tWorldLines.createMinimapLines(graphics, plugin.getClient(), plugin.getPathLinePoints(), config.getMinimapPathColor());\n\t\t}\n\t\treturn null;\n\t}\n}\n","filePath":"src\\main\\java\\com\\herbiafk\\HerbiAfkMinimapOverlay.java"},{"fileName":"HerbiAfkOverlay.java","content":"package com.herbiafk;\n\nimport com.herbiafk.QuestHelperTools.WorldLines;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\n\nimport javax.inject.Inject;\nimport java.awt.Graphics2D;\nimport java.awt.Dimension;\n\npublic class HerbiAfkOverlay extends Overlay\n{\n\n\tprivate final HerbiAfkPlugin plugin;\n\tprivate final HerbiAfkConfig config;\n\n\t@Inject\n\tpublic HerbiAfkOverlay(HerbiAfkPlugin plugin, HerbiAfkConfig config)\n\t{\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (!plugin.isInHerbiboarArea())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (config.showPathLine() \u0026\u0026 plugin.getPathLinePoints() !\u003d null)\n\t\t{\n\t\t\tWorldLines.drawLinesOnWorld(graphics, plugin.getClient(), plugin.getPathLinePoints(), config.getLineColor());\n\t\t}\n\t\treturn null;\n\t}\n}\n","filePath":"src\\main\\java\\com\\herbiafk\\HerbiAfkOverlay.java"},{"fileName":"HerbiAfkPlugin.java","content":"package com.herbiafk;\n\nimport com.google.inject.Provides;\nimport java.awt.Color;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.Function;\nimport javax.inject.Inject;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.MenuEntry;\nimport net.runelite.api.NPC;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.MenuEntryAdded;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.game.npcoverlay.HighlightedNpc;\nimport net.runelite.client.game.npcoverlay.NpcOverlayService;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDependency;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.plugins.herbiboars.HerbiboarPlugin;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.ColorUtil;\nimport net.runelite.client.util.Text;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Herbi AFK\"\n)\n@PluginDependency(HerbiboarPlugin.class)\npublic class HerbiAfkPlugin extends Plugin\n{\n\t@Inject\n\t@Getter\n\tprivate Client client;\n\n\t@Inject\n\tprivate HerbiAfkConfig config;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate HerbiAfkOverlay overlay;\n\n\t@Inject\n\tprivate HerbiAfkMinimapOverlay minimapOverlay;\n\n\t@Inject\n\tprivate HerbiboarPlugin herbiboarPlugin;\n\n\t@Inject\n\tprivate NpcOverlayService npcOverlayService;\n\n\t@Getter\n\tprivate List\u003cWorldPoint\u003e pathLinePoints \u003d new ArrayList\u003c\u003e();\n\n\t@Getter\n\tprivate WorldPoint startLocation, endLocation;\n\n\tprivate enum HerbiState\n\t{\n\t\tIDLE,\n\t\tFINDING_START,\n\t\tHUNTING,\n\t\tSTUNNED,\n\t}\n\n\tprivate static boolean varbitChanged \u003d false;\n\tprivate HerbiState herbiState;\n\n\tprivate int finishedId \u003d -1;\n\n\tprivate static final String HERBI_STUN \u003d \"You stun the creature\";\n\tprivate static final String HERBI_KC \u003d \"Your herbiboar harvest count is:\";\n\tprivate static final String HERBIBOAR_NAME \u003d \"Herbiboar\";\n\tprivate static final String HERBI_CIRCLES \u003d \"The creature has successfully confused you with its tracks, leading you round in circles\";\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\toverlayManager.add(overlay);\n\t\toverlayManager.add(minimapOverlay);\n\n\t\tnpcOverlayService.registerHighlighter(isHerbiboar);\n\n\t\tpathLinePoints \u003d new ArrayList\u003c\u003e();\n\n\t\therbiState \u003d HerbiState.IDLE;\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(overlay);\n\t\toverlayManager.remove(minimapOverlay);\n\n\t\tnpcOverlayService.unregisterHighlighter(isHerbiboar);\n\n\t\tresetTrailData();\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged event)\n\t{\n\t\tswitch (event.getGameState())\n\t\t{\n\t\t\tcase HOPPING:\n\t\t\tcase LOGGING_IN:\n\t\t\t\tresetTrailData();\n\t\t\t\therbiState \u003d HerbiState.IDLE;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onVarbitChanged(VarbitChanged event)\n\t{\n\t\tvarbitChanged \u003d true;\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event)\n\t{\n\t\tif (!isInHerbiboarArea())\n\t\t{\n\t\t\tif (herbiState !\u003d HerbiState.IDLE)\n\t\t\t{\n\t\t\t\tresetTrailData();\n\t\t\t\therbiState \u003d HerbiState.IDLE;\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (client.getLocalPlayer() \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tWorldPoint playerLocation \u003d client.getLocalPlayer().getWorldLocation();\n\n\t\tif (varbitChanged)\n\t\t{\n\t\t\tupdateStartAndEndLocation();\n\t\t\tvarbitChanged \u003d false;\n\t\t}\n\n\t\tswitch (herbiState)\n\t\t{\n\t\t\tcase FINDING_START:\n\t\t\t\tstartLocation \u003d playerLocation;\n\t\t\t\tendLocation \u003d Utils.getNearestStartLocation(playerLocation);\n\t\t\t\tbreak;\n\n\t\t\tcase HUNTING:\n\t\t\t\tif (config.pathRelativeToPlayer())\n\t\t\t\t{\n\t\t\t\t\tstartLocation \u003d playerLocation;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase STUNNED:\n\t\t\t\tstartLocation \u003d config.pathRelativeToPlayer() ? playerLocation : HerbiAfkData.END_LOCATIONS.get(finishedId - 1);\n\t\t\t\tWorldPoint herbiLocation \u003d getHerbiboarLocation();\n\t\t\t\tif (herbiLocation !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tendLocation \u003d herbiLocation;\n\t\t\t\t}\n\t\t\t\tnpcOverlayService.rebuild();\n\t\t\t\tbreak;\n\n\t\t\tcase IDLE:\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (startLocation !\u003d null \u0026\u0026 endLocation !\u003d null)\n\t\t{\n\t\t\tpathLinePoints \u003d Utils.getPathLinePoints(startLocation, endLocation);\n\t\t}\n\t}\n\n\tprivate void updateStartAndEndLocation()\n\t{\n\t\tList\u003c? extends Enum\u003c?\u003e\u003e currentPath \u003d herbiboarPlugin.getCurrentPath();\n\t\tint currentPathSize \u003d currentPath.size();\n\t\tif (currentPathSize \u003c 1)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tWorldPoint newStartLocation;\n\t\tWorldPoint newEndLocation;\n\n\t\tif (herbiboarPlugin.getFinishId() \u003e 0)\n\t\t{\n\t\t\tnewStartLocation \u003d HerbiboarSearchSpot.valueOf(currentPath.get(currentPathSize - 1).toString()).getLocation();\n\t\t\tfinishedId \u003d herbiboarPlugin.getFinishId();\n\t\t\tnewEndLocation \u003d HerbiAfkData.END_LOCATIONS.get(finishedId - 1);\n\t\t}\n\t\telse if (currentPathSize \u003d\u003d 1)\n\t\t{\n\t\t\tnewStartLocation \u003d herbiboarPlugin.getStartPoint();\n\t\t\tnewEndLocation \u003d HerbiboarSearchSpot.valueOf(currentPath.get(0).toString()).getLocation();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnewStartLocation \u003d HerbiboarSearchSpot.valueOf(currentPath.get(currentPathSize - 2).toString()).getLocation();\n\t\t\tnewEndLocation \u003d HerbiboarSearchSpot.valueOf(currentPath.get(currentPathSize - 1).toString()).getLocation();\n\t\t}\n\n\t\tstartLocation \u003d newStartLocation;\n\t\tendLocation \u003d newEndLocation;\n\n\t\therbiState \u003d HerbiState.HUNTING;\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage event)\n\t{\n\t\tif (event.getType() \u003d\u003d ChatMessageType.GAMEMESSAGE)\n\t\t{\n\t\t\tString message \u003d Text.sanitize(Text.removeTags(event.getMessage()));\n\t\t\tif (message.contains(HERBI_STUN))\n\t\t\t{\n\t\t\t\tif (config.noLootMode())\n\t\t\t\t{\n\t\t\t\t\therbiState \u003d HerbiState.FINDING_START;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\therbiState \u003d HerbiState.STUNNED;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (message.contains(HERBI_KC) || message.contains(HERBI_CIRCLES))\n\t\t\t{\n\t\t\t\tresetTrailData();\n\t\t\t\therbiState \u003d HerbiState.FINDING_START;\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onMenuEntryAdded(MenuEntryAdded event)\n\t{\n\t\tif (!isInHerbiboarArea())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (config.dynamicMenuEntrySwap())\n\t\t{\n\t\t\tswapTrailMenuEntries(event);\n\n\t\t\tif (config.noLootMode() \u0026\u0026 herbiState \u003d\u003d HerbiState.FINDING_START \u0026\u0026 event.getTarget().contains(HERBIBOAR_NAME))\n\t\t\t{\n\t\t\t\tevent.getMenuEntry().setDeprioritized(true);\n\t\t\t}\n\t\t}\n\t\tif (config.npcMenuEntrySwap())\n\t\t{\n\t\t\thideNpcMenuEntries(event);\n\t\t}\n\t}\n\n\tprivate void swapTrailMenuEntries(MenuEntryAdded event)\n\t{\n\t\tString target \u003d event.getTarget();\n\t\tfor (String menuTarget : HerbiAfkData.TRAIL_MENU_ENTRY_TARGETS)\n\t\t{\n\t\t\tif (target.contains(menuTarget))\n\t\t\t{\n\t\t\t\tMenuEntry entry \u003d event.getMenuEntry();\n\t\t\t\tWorldPoint entryTargetPoint \u003d WorldPoint.fromScene(client, entry.getParam0(), entry.getParam1(), client.getPlane());\n\n\t\t\t\tswitch (herbiState)\n\t\t\t\t{\n\t\t\t\t\tcase FINDING_START:\n\t\t\t\t\tcase HUNTING:\n\t\t\t\t\t\tif (!entryTargetPoint.equals(endLocation))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tentry.setDeprioritized(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase STUNNED:\n\t\t\t\t\t\tentry.setDeprioritized(true);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void hideNpcMenuEntries(MenuEntryAdded event)\n\t{\n\t\tString target \u003d event.getTarget();\n\t\tfor (String menuTarget : HerbiAfkData.NPC_MENU_ENTRY_TARGETS)\n\t\t{\n\t\t\tif (target.contains(menuTarget))\n\t\t\t{\n\t\t\t\tMenuEntry entry \u003d event.getMenuEntry();\n\n\t\t\t\tswitch (herbiState)\n\t\t\t\t{\n\t\t\t\t\tcase FINDING_START:\n\t\t\t\t\tcase HUNTING:\n\t\t\t\t\tcase STUNNED:\n\t\t\t\t\t\tentry.setDeprioritized(true);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate WorldPoint getHerbiboarLocation()\n\t{\n\t\tvar npcs \u003d client.getTopLevelWorldView().npcs();\n\t\tfor (NPC npc : npcs)\n\t\t{\n\t\t\tif (npc !\u003d null)\n\t\t\t{\n\t\t\t\tif (npc.getName() !\u003d null \u0026\u0026 npc.getName().equals(HERBIBOAR_NAME))\n\t\t\t\t{\n\t\t\t\t\treturn npc.getWorldLocation();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic final Function\u003cNPC, HighlightedNpc\u003e isHerbiboar \u003d (n) -\u003e {\n\t\tboolean isHighlight \u003d config.highlightHerbiHull() || config.highlightHerbiTile() || config.highlightHerbiOutline();\n\t\tif (isHighlight \u0026\u0026 n.getName() !\u003d null \u0026\u0026 n.getName().equals(HERBIBOAR_NAME))\n\t\t{\n\t\t\tColor color \u003d config.getHerbiboarColor();\n\t\t\treturn HighlightedNpc.builder()\n\t\t\t\t.npc(n)\n\t\t\t\t.highlightColor(color)\n\t\t\t\t.fillColor(ColorUtil.colorWithAlpha(color, color.getAlpha() / 12))\n\t\t\t\t.hull(config.highlightHerbiHull())\n\t\t\t\t.tile(config.highlightHerbiTile())\n\t\t\t\t.outline(config.highlightHerbiOutline())\n\t\t\t\t.build();\n\t\t}\n\t\treturn null;\n\t};\n\n\tprivate void resetTrailData()\n\t{\n\t\tpathLinePoints.clear();\n\n\t\tstartLocation \u003d null;\n\t\tendLocation \u003d null;\n\n\t\tfinishedId \u003d -1;\n\t}\n\n\tpublic boolean isInHerbiboarArea()\n\t{\n\t\treturn herbiboarPlugin.isInHerbiboarArea();\n\t}\n\n\t@Provides\n\tHerbiAfkConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(HerbiAfkConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\herbiafk\\HerbiAfkPlugin.java"},{"fileName":"HerbiboarSearchSpot.java","content":"package com.herbiafk;\n\nimport lombok.Getter;\nimport net.runelite.api.coords.WorldPoint;\n\n@Getter\nenum HerbiboarSearchSpot\n{\n\t// Wiki A location\n\tA_MUSHROOM(new WorldPoint(3670, 3889, 0)),\n\tA_PATCH(new WorldPoint(3672, 3890, 0)),\n\n\t// Wiki B location\n\tB_SEAWEED(new WorldPoint(3728, 3893, 0)),\n\n\t// Wiki C location\n\tC_MUSHROOM(new WorldPoint(3697, 3875, 0)),\n\tC_PATCH(new WorldPoint(3699, 3875, 0)),\n\n\t// Wiki D location\n\tD_PATCH(new WorldPoint(3708, 3876, 0)),\n\tD_SEAWEED(new WorldPoint(3710, 3877, 0)),\n\n\t// Wiki E location\n\tE_MUSHROOM(new WorldPoint(3668, 3865, 0)),\n\tE_PATCH(new WorldPoint(3667, 3862, 0)),\n\n\t// Wiki F location\n\tF_MUSHROOM(new WorldPoint(3681, 3860, 0)),\n\tF_PATCH(new WorldPoint(3681, 3859, 0)),\n\n\t// Wiki G location\n\tG_MUSHROOM(new WorldPoint(3694, 3847, 0)),\n\tG_PATCH(new WorldPoint(3698, 3847, 0)),\n\n\t// Wiki H location\n\tH_SEAWEED_EAST(new WorldPoint(3715, 3851, 0)),\n\tH_SEAWEED_WEST(new WorldPoint(3713, 3850, 0)),\n\n\t// Wiki I location\n\tI_MUSHROOM(new WorldPoint(3680, 3838, 0)),\n\tI_PATCH(new WorldPoint(3680, 3836, 0)),\n\n\t// Wiki J location\n\tJ_PATCH(new WorldPoint(3713, 3840, 0)),\n\n\t// Wiki K location\n\tK_PATCH(new WorldPoint(3706, 3811, 0)),\n\t;\n\n\tprivate final WorldPoint location;\n\n\tHerbiboarSearchSpot(WorldPoint location)\n\t{\n\t\tthis.location \u003d location;\n\t}\n}\n","filePath":"src\\main\\java\\com\\herbiafk\\HerbiboarSearchSpot.java"},{"fileName":"DirectionArrow.java","content":"/*\n * Copyright (c) 2021, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.herbiafk.QuestHelperTools;\n\nimport java.awt.BasicStroke;\nimport java.awt.Color;\nimport java.awt.Graphics2D;\nimport java.awt.Polygon;\nimport java.awt.Rectangle;\nimport java.awt.geom.AffineTransform;\nimport java.awt.geom.Line2D;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Player;\nimport net.runelite.api.Point;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\n\npublic class DirectionArrow\n{\n    public static void renderMinimapArrow(Graphics2D graphics, Client client, WorldPoint worldPoint, Color color)\n    {\n        final int MAX_DRAW_DISTANCE \u003d 16;\n        Player player \u003d client.getLocalPlayer();\n        if (player \u003d\u003d null)\n        {\n            return;\n        }\n\n        WorldPoint playerLocation \u003d player.getWorldLocation();\n\n        WorldPoint wp \u003d QuestPerspective.getInstanceWorldPoint(client, worldPoint);\n\n        if (wp \u003d\u003d null)\n        {\n            return;\n        }\n\n        if (wp.distanceTo(playerLocation) \u003e\u003d MAX_DRAW_DISTANCE)\n        {\n            createMinimapDirectionArrow(graphics, client, wp, color);\n            return;\n        }\n\n        LocalPoint lp \u003d LocalPoint.fromWorld(client, wp);\n        if (lp \u003d\u003d null)\n        {\n            return;\n        }\n\n        Point posOnMinimap \u003d Perspective.localToMinimap(client, lp);\n        if (posOnMinimap \u003d\u003d null)\n        {\n            return;\n        }\n\n        Line2D.Double line \u003d new Line2D.Double(posOnMinimap.getX(), posOnMinimap.getY() - 18, posOnMinimap.getX(),\n                posOnMinimap.getY() - 8);\n\n        drawMinimapArrow(graphics, line, color);\n    }\n\n    protected static void createMinimapDirectionArrow(Graphics2D graphics, Client client, WorldPoint wp, Color color)\n    {\n        Player player \u003d client.getLocalPlayer();\n\n        if (player \u003d\u003d null)\n        {\n            return;\n        }\n\n        if (wp \u003d\u003d null)\n        {\n            return;\n        }\n\n        Point playerPosOnMinimap \u003d player.getMinimapLocation();\n\n        Point destinationPosOnMinimap \u003d QuestPerspective.getMinimapPoint(client, player.getWorldLocation(), wp);\n\n        if (playerPosOnMinimap \u003d\u003d null || destinationPosOnMinimap \u003d\u003d null)\n        {\n            return;\n        }\n\n        double xDiff \u003d playerPosOnMinimap.getX() - destinationPosOnMinimap.getX();\n        double yDiff \u003d destinationPosOnMinimap.getY() - playerPosOnMinimap.getY();\n        double angle \u003d Math.atan2(yDiff, xDiff);\n\n        int startX \u003d (int) (playerPosOnMinimap.getX() - (Math.cos(angle) * 55));\n        int startY \u003d (int) (playerPosOnMinimap.getY() + (Math.sin(angle) * 55));\n\n        int endX \u003d (int) (playerPosOnMinimap.getX() - (Math.cos(angle) * 65));\n        int endY \u003d (int) (playerPosOnMinimap.getY() + (Math.sin(angle) * 65));\n\n        Line2D.Double line \u003d new Line2D.Double(startX, startY, endX, endY);\n\n        drawMinimapArrow(graphics, line, color);\n    }\n\n    public static void drawWorldArrow(Graphics2D graphics, Color color, int startX, int startY)\n    {\n        Line2D.Double line \u003d new Line2D.Double(startX, startY - 13, startX, startY);\n\n        int headWidth \u003d 5;\n        int headHeight \u003d 4;\n        int lineWidth \u003d 9;\n\n        drawArrow(graphics, line, color, lineWidth, headHeight, headWidth);\n    }\n\n    public static void drawMinimapArrow(Graphics2D graphics, Line2D.Double line, Color color)\n    {\n        drawArrow(graphics, line, color, 6, 2, 2);\n    }\n\n    public static void drawArrow(Graphics2D graphics, Line2D.Double line, Color color, int width, int tipHeight,\n                                 int tipWidth)\n    {\n        graphics.setColor(Color.BLACK);\n        graphics.setStroke(new BasicStroke(width));\n        graphics.draw(line);\n        drawWorldArrowHead(graphics, line, tipHeight, tipWidth);\n\n        graphics.setColor(color);\n        graphics.setStroke(new BasicStroke(width - 3));\n        graphics.draw(line);\n        drawWorldArrowHead(graphics, line, tipHeight - 2, tipWidth - 2);\n        graphics.setStroke(new BasicStroke(1));\n    }\n\n\n    public static void drawWorldArrowHead(Graphics2D g2d, Line2D.Double line, int extraSizeHeight, int extraSizeWidth)\n    {\n        AffineTransform tx \u003d new AffineTransform();\n\n        Polygon arrowHead \u003d new Polygon();\n        arrowHead.addPoint(0, 6 + extraSizeHeight);\n        arrowHead.addPoint(-6 - extraSizeWidth, -1 - extraSizeHeight);\n        arrowHead.addPoint(6 + extraSizeWidth, -1 - extraSizeHeight);\n\n        tx.setToIdentity();\n        double angle \u003d Math.atan2(line.y2 - line.y1, line.x2 - line.x1);\n        tx.translate(line.x2, line.y2);\n        tx.rotate((angle - Math.PI / 2d));\n\n        Graphics2D g \u003d (Graphics2D) g2d.create();\n        g.setTransform(tx);\n        g.fill(arrowHead);\n        g.dispose();\n    }\n\n    public static void drawLineArrowHead(Graphics2D g2d, Line2D.Double line) {\n        AffineTransform tx \u003d new AffineTransform();\n\n        Polygon arrowHead \u003d new Polygon();\n        arrowHead.addPoint( 0,0);\n        arrowHead.addPoint( -3, -6);\n        arrowHead.addPoint( 3,-6);\n\n        tx.setToIdentity();\n        double angle \u003d Math.atan2(line.y2-line.y1, line.x2-line.x1);\n        tx.translate(line.x2, line.y2);\n        tx.rotate((angle-Math.PI/2d));\n\n        Graphics2D g \u003d (Graphics2D) g2d.create();\n        g.setTransform(tx);\n        g.fill(arrowHead);\n        g.dispose();\n    }\n\n    public static void drawLine(Graphics2D graphics, Line2D.Double line, Color color, Rectangle clippingRegion)\n    {\n        graphics.setStroke(new BasicStroke(1));\n        graphics.setClip(clippingRegion);\n        graphics.setColor(color);\n        graphics.draw(line);\n\n        drawLineArrowHead(graphics, line);\n    }\n}","filePath":"src\\main\\java\\com\\herbiafk\\QuestHelperTools\\DirectionArrow.java"},{"fileName":"QuestPerspective.java","content":"/*\n * Copyright (c) 2021, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.herbiafk.QuestHelperTools;\n\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.Collections;\nimport java.util.List;\nimport net.runelite.api.Client;\nimport static net.runelite.api.Constants.CHUNK_SIZE;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Point;\nimport net.runelite.api.RenderOverview;\nimport net.runelite.api.Varbits;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.ComponentID;\n\n\npublic class QuestPerspective\n{\n    public static Collection\u003cWorldPoint\u003e toLocalInstance(Client client, WorldPoint worldPoint)\n    {\n        if (!client.isInInstancedRegion())\n        {\n            return Collections.singleton(worldPoint);\n        }\n\n        // find instance chunks using the template point. there might be more than one.\n        List\u003cWorldPoint\u003e worldPoints \u003d new ArrayList\u003c\u003e();\n\n        int[][][] instanceTemplateChunks \u003d client.getInstanceTemplateChunks();\n        for (int z \u003d 0; z \u003c instanceTemplateChunks.length; ++z)\n        {\n            for (int x \u003d 0; x \u003c instanceTemplateChunks[z].length; ++x)\n            {\n                for (int y \u003d 0; y \u003c instanceTemplateChunks[z][x].length; ++y)\n                {\n                    int chunkData \u003d instanceTemplateChunks[z][x][y];\n                    int rotation \u003d chunkData \u003e\u003e 1 \u0026 0x3;\n                    int templateChunkY \u003d (chunkData \u003e\u003e 3 \u0026 0x7FF) * CHUNK_SIZE;\n                    int templateChunkX \u003d (chunkData \u003e\u003e 14 \u0026 0x3FF) * CHUNK_SIZE;\n                    if (worldPoint.getX() \u003e\u003d templateChunkX \u0026\u0026 worldPoint.getX() \u003c templateChunkX + CHUNK_SIZE\n                            \u0026\u0026 worldPoint.getY() \u003e\u003d templateChunkY \u0026\u0026 worldPoint.getY() \u003c templateChunkY + CHUNK_SIZE)\n                    {\n                        WorldPoint p \u003d\n                                new WorldPoint(client.getBaseX() + x * CHUNK_SIZE + (worldPoint.getX() \u0026 (CHUNK_SIZE - 1)),\n                                        client.getBaseY() + y * CHUNK_SIZE + (worldPoint.getY() \u0026 (CHUNK_SIZE - 1)),\n                                        z);\n                        p \u003d rotate(p, rotation);\n                        if (p.isInScene(client))\n                        {\n                            worldPoints.add(p);\n                        }\n                    }\n                }\n            }\n        }\n        return worldPoints;\n    }\n\n    private static WorldPoint rotate(WorldPoint point, int rotation)\n    {\n        int chunkX \u003d point.getX() \u0026 ~(CHUNK_SIZE - 1);\n        int chunkY \u003d point.getY() \u0026 ~(CHUNK_SIZE - 1);\n        int x \u003d point.getX() \u0026 (CHUNK_SIZE - 1);\n        int y \u003d point.getY() \u0026 (CHUNK_SIZE - 1);\n        switch (rotation)\n        {\n            case 1:\n                return new WorldPoint(chunkX + y, chunkY + (CHUNK_SIZE - 1 - x), point.getPlane());\n            case 2:\n                return new WorldPoint(chunkX + (CHUNK_SIZE - 1 - x), chunkY + (CHUNK_SIZE - 1 - y), point.getPlane());\n            case 3:\n                return new WorldPoint(chunkX + (CHUNK_SIZE - 1 - y), chunkY + x, point.getPlane());\n        }\n        return point;\n    }\n\n    public static LocalPoint getInstanceLocalPoint(Client client, WorldPoint wp)\n    {\n        WorldPoint instanceWorldPoint \u003d getInstanceWorldPoint(client, wp);\n        if (instanceWorldPoint \u003d\u003d null)\n        {\n            return null;\n        }\n\n        return LocalPoint.fromWorld(client, instanceWorldPoint);\n    }\n\n    public static WorldPoint getInstanceWorldPoint(Client client, WorldPoint wp)\n    {\n        Collection\u003cWorldPoint\u003e points \u003d QuestPerspective.toLocalInstance(client, wp);\n\n        for (WorldPoint point : points)\n        {\n            if (point !\u003d null)\n            {\n                return point;\n            }\n        }\n        return null;\n    }\n\n    public static Point getMinimapPoint(Client client, WorldPoint start, WorldPoint destination)\n    {\n        RenderOverview ro \u003d client.getRenderOverview();\n        if (ro.getWorldMapData().surfaceContainsPosition(start.getX(), start.getY()) !\u003d\n                ro.getWorldMapData().surfaceContainsPosition(destination.getX(), destination.getY()))\n        {\n            return null;\n        }\n\n        int x \u003d (destination.getX() - start.getX());\n        int y \u003d (destination.getY() - start.getY());\n\n        float maxDistance \u003d Math.max(Math.abs(x), Math.abs(y));\n        x \u003d x * 100;\n        y \u003d y * 100;\n        x /\u003d maxDistance;\n        y /\u003d maxDistance;\n\n        Widget minimapDrawWidget;\n        if (client.isResized())\n        {\n            if (client.getVarbitValue(Varbits.SIDE_PANELS) \u003d\u003d 1)\n            {\n\n                minimapDrawWidget \u003d client.getWidget(ComponentID.RESIZABLE_VIEWPORT_BOTTOM_LINE_MINIMAP_DRAW_AREA);\n            }\n            else\n            {\n                minimapDrawWidget \u003d client.getWidget(ComponentID.RESIZABLE_VIEWPORT_MINIMAP_DRAW_AREA);\n            }\n        }\n        else\n        {\n            minimapDrawWidget \u003d client.getWidget(ComponentID.FIXED_VIEWPORT_MINIMAP_DRAW_AREA);\n        }\n\n        if (minimapDrawWidget \u003d\u003d null)\n        {\n            return null;\n        }\n\n        final int angle \u003d client.getMapAngle() \u0026 0x7FF;\n\n        final int sin \u003d Perspective.SINE[angle];\n        final int cos \u003d Perspective.COSINE[angle];\n\n        final int xx \u003d y * sin + cos * x \u003e\u003e 16;\n        final int yy \u003d sin * x - y * cos \u003e\u003e 16;\n\n        Point loc \u003d minimapDrawWidget.getCanvasLocation();\n        int miniMapX \u003d loc.getX() + xx + minimapDrawWidget.getWidth() / 2;\n        int miniMapY \u003d minimapDrawWidget.getHeight() / 2 + loc.getY() + yy;\n        return new Point(miniMapX, miniMapY);\n    }\n}\n","filePath":"src\\main\\java\\com\\herbiafk\\QuestHelperTools\\QuestPerspective.java"},{"fileName":"WorldLines.java","content":"/*\n * Copyright (c) 2021, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.herbiafk.QuestHelperTools;\n\nimport java.awt.Color;\nimport java.awt.Graphics2D;\nimport java.awt.Rectangle;\nimport java.awt.geom.Line2D;\nimport java.util.List;\nimport javax.annotation.Nonnull;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.Constants;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Point;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.widgets.ComponentID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.ui.overlay.OverlayUtil;\n\npublic class WorldLines\n{\n    public static void createMinimapLines(Graphics2D graphics, Client client, List\u003cWorldPoint\u003e linePoints,\n                                          Color color)\n    {\n        if (linePoints \u003d\u003d null || linePoints.size() \u003c 2)\n        {\n            return;\n        }\n        for (int i \u003d 0; i \u003c linePoints.size() - 1; i++)\n        {\n            LocalPoint startPoint \u003d QuestPerspective.getInstanceLocalPoint(client, linePoints.get(i));\n            LocalPoint destinationPoint \u003d QuestPerspective.getInstanceLocalPoint(client, linePoints.get(i+1));\n            if (startPoint \u003d\u003d null || destinationPoint \u003d\u003d null)\n            {\n                continue;\n            }\n\n            Point startPosOnMinimap \u003d Perspective.localToMinimap(client, startPoint, 10000000);\n            Point destinationPosOnMinimap \u003d Perspective.localToMinimap(client, destinationPoint, 10000000);\n\n            if (destinationPosOnMinimap \u003d\u003d null || startPosOnMinimap \u003d\u003d null)\n            {\n                continue;\n            }\n\n            Line2D.Double line \u003d new Line2D.Double(startPosOnMinimap.getX(), startPosOnMinimap.getY(), destinationPosOnMinimap.getX(), destinationPosOnMinimap.getY());\n\n            Rectangle bounds \u003d new Rectangle(0, 0, client.getCanvasWidth(), client.getCanvasHeight());\n            Widget minimapWidget \u003d client.getWidget(ComponentID.RESIZABLE_VIEWPORT_MINIMAP_DRAW_AREA);\n\n            if (minimapWidget \u003d\u003d null)\n            {\n                minimapWidget \u003d client.getWidget(ComponentID.RESIZABLE_VIEWPORT_BOTTOM_LINE_MINIMAP_DRAW_AREA);\n            }\n            if (minimapWidget \u003d\u003d null)\n            {\n                minimapWidget \u003d client.getWidget(ComponentID.FIXED_VIEWPORT_MINIMAP_DRAW_AREA);\n            }\n\n            if (minimapWidget !\u003d null)\n            {\n                bounds \u003d minimapWidget.getBounds();\n            }\n\n            DirectionArrow.drawLine(graphics, line, color, bounds);\n        }\n    }\n\n    public static Line2D.Double getWorldLines(@Nonnull Client client, @Nonnull LocalPoint startLocation, LocalPoint endLocation)\n    {\n        final int plane \u003d client.getPlane();\n\n        final int startX \u003d startLocation.getX();\n        final int startY \u003d startLocation.getY();\n        final int endX \u003d endLocation.getX();\n        final int endY \u003d endLocation.getY();\n\n        final int sceneX \u003d startLocation.getSceneX();\n        final int sceneY \u003d startLocation.getSceneY();\n\n        if (sceneX \u003c 0 || sceneY \u003c 0 || sceneX \u003e\u003d Constants.SCENE_SIZE || sceneY \u003e\u003d Constants.SCENE_SIZE)\n        {\n            return null;\n        }\n\n        final int startHeight \u003d Perspective.getTileHeight(client, startLocation, plane);\n        final int endHeight \u003d Perspective.getTileHeight(client, endLocation, plane);\n\n        Point p1 \u003d Perspective.localToCanvas(client, startX, startY, startHeight);\n        Point p2 \u003d Perspective.localToCanvas(client, endX, endY, endHeight);\n\n        if (p1 \u003d\u003d null || p2 \u003d\u003d null)\n        {\n            return null;\n        }\n\n        return new Line2D.Double(p1.getX(), p1.getY(), p2.getX(), p2.getY());\n    }\n\n    public static void drawLinesOnWorld(Graphics2D graphics, Client client, List\u003cWorldPoint\u003e linePoints,\n                                        Color color)\n    {\n        for (int i \u003d 0; i \u003c linePoints.size() - 1; i++)\n        {\n            LocalPoint startLp \u003d QuestPerspective.getInstanceLocalPoint(client, linePoints.get(i));\n            LocalPoint endLp \u003d QuestPerspective.getInstanceLocalPoint(client, linePoints.get(i+1));\n            if (startLp \u003d\u003d null || endLp \u003d\u003d null)\n            {\n                continue;\n            }\n\n            Line2D.Double newLine \u003d getWorldLines(client, startLp, endLp);\n            if (newLine !\u003d null)\n            {\n                OverlayUtil.renderPolygon(graphics, newLine, color);\n            }\n        }\n    }\n}","filePath":"src\\main\\java\\com\\herbiafk\\QuestHelperTools\\WorldLines.java"},{"fileName":"Utils.java","content":"package com.herbiafk;\n\nimport net.runelite.api.coords.WorldPoint;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class Utils\n{\n\tprivate static final Integer PATH_LINE_DIVISION \u003d 10;\n\n\tpublic static WorldPoint getNearestStartLocation(WorldPoint playerLocation)\n\t{\n\t\tWorldPoint neartestPoint \u003d null;\n\t\tdouble shortestDistance \u003d Double.MAX_VALUE;\n\n\t\tfor (WorldPoint startPoint : HerbiAfkData.START_LOCATIONS)\n\t\t{\n\t\t\tdouble distance \u003d playerLocation.distanceTo2D(startPoint);\n\t\t\tif (distance \u003c shortestDistance)\n\t\t\t{\n\t\t\t\tneartestPoint \u003d startPoint;\n\t\t\t\tshortestDistance \u003d distance;\n\t\t\t}\n\t\t}\n\n\t\treturn neartestPoint;\n\t}\n\n\tpublic static List\u003cWorldPoint\u003e getPathLinePoints(WorldPoint start, WorldPoint end)\n\t{\n\t\tList\u003cWorldPoint\u003e pathLinePoints \u003d new ArrayList\u003c\u003e();\n\n\t\tdouble distance \u003d start.distanceTo2D(end);\n\t\tint divisions \u003d (int) Math.ceil(distance / PATH_LINE_DIVISION);\n\n\t\tpathLinePoints.add(start);\n\n\t\tif (divisions \u003d\u003d 1)\n\t\t{\n\t\t\tpathLinePoints.add(end);\n\t\t\treturn pathLinePoints;\n\t\t}\n\n\t\tdouble angle \u003d Math.atan2((end.getY() - start.getY()), (end.getX() - start.getX()));\n\t\tdouble deltaH \u003d distance / divisions;\n\t\tint deltaX \u003d (int) (deltaH * Math.cos(angle));\n\t\tint deltaY \u003d (int) (deltaH * Math.sin(angle));\n\n\t\tint currentX \u003d start.getX();\n\t\tint currentY \u003d start.getY();\n\n\t\tfor (int i \u003d 1; i \u003c divisions; i++)\n\t\t{\n\t\t\tcurrentX +\u003d deltaX;\n\t\t\tcurrentY +\u003d deltaY;\n\t\t\tpathLinePoints.add(new WorldPoint(currentX, currentY, 0));\n\t\t}\n\n\t\tpathLinePoints.add(end);\n\n\t\treturn pathLinePoints;\n\t}\n}\n","filePath":"src\\main\\java\\com\\herbiafk\\Utils.java"},{"fileName":"HerbiAfkTest.java","content":"package com.herbiafk;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class HerbiAfkTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(HerbiAfkPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\herbiafk\\HerbiAfkTest.java"}]},{"commit":"6d05ff9f04b5c912e5ecb5a3e44469e4a6636d56","repository":"https://github.com/willocon/gielinorTravels.git","internalName":"gielinor-travels","files":[{"fileName":"SSEImageClient.java","content":"/*\n * Copyright (c) 2026, Will O\u0027Connor \u003cwilliam.oconnor13@hotmail.co.uk\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage org.willocon.gielinortravels;\n\nimport com.google.gson.Gson;\nimport com.google.gson.JsonObject;\nimport java.awt.image.BufferedImage;\nimport java.io.IOException;\nimport java.net.URL;\nimport javax.imageio.ImageIO;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport okhttp3.Call;\nimport okhttp3.Callback;\nimport okhttp3.MediaType;\nimport okhttp3.OkHttpClient;\nimport okhttp3.Request;\nimport okhttp3.RequestBody;\nimport okhttp3.Response;\nimport okio.BufferedSource;\n\n@Slf4j\npublic class SSEImageClient\n{\n\n\tprivate final OkHttpClient client;\n\tprivate final Gson gson;\n\n\t@Inject\n\tpublic SSEImageClient(OkHttpClient client, Gson gson)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.gson \u003d gson;\n\t}\n\n\t// CHANGE THIS TO SERVER: https://gielinortravels.containers.uwcs.co.uk\n\tprivate static final String BASE_URL \u003d \"https://gielinortravels.containers.uwcs.co.uk\";\n\n\tprivate static BufferedImage downloadedImage;\n\tprivate static String downloadedCsv;\n\n\t// Downloads image from URL\n\tpublic static BufferedImage loadImage(String url) throws IOException\n\t{\n\t\treturn ImageIO.read(new URL(url));\n\t}\n\n\t// Sends POST /join\n\tpublic void joinQueue(String userId, String username)\n\t{\n\t\tString json \u003d \"{\\\"user_id\\\":\\\"\" + userId + \"\\\" , \\\"username\\\":\\\"\" + username + \"\\\"}\";\n\n\t\tRequestBody body \u003d RequestBody.create(\n\t\t\tMediaType.parse(\"application/json\"), json\n\t\t);\n\n\t\tRequest request \u003d new Request.Builder()\n\t\t\t.url(BASE_URL + \"/join\")\n\t\t\t.post(body)\n\t\t\t.build();\n\n\t\tclient.newCall(request).enqueue(new Callback()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void onFailure(Call call, IOException e)\n\t\t\t{\n\t\t\t\tlog.error(\"Failed to join queue: {}\", e.getMessage());\n\t\t\t\te.printStackTrace();\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void onResponse(Call call, Response response) throws IOException\n\t\t\t{\n\t\t\t\tif (response.body() !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tlog.info(\"Joined: {}\", response.body().string());\n\t\t\t\t}\n\t\t\t\tresponse.close();\n\t\t\t}\n\t\t});\n\t}\n\n\t//Sends POST /leave\n\tpublic void leaveQueue(String userId)\n\t{\n\t\tString json \u003d \"{\\\"user_id\\\":\\\"\" + userId + \"\\\"}\";\n\n\t\tRequestBody body \u003d RequestBody.create(\n\t\t\tMediaType.parse(\"application/json\"), json\n\t\t);\n\n\t\tRequest request \u003d new Request.Builder()\n\t\t\t.url(BASE_URL + \"/leave\")\n\t\t\t.post(body)\n\t\t\t.build();\n\n\t\tclient.newCall(request).enqueue(new Callback()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void onFailure(Call call, IOException e)\n\t\t\t{\n\t\t\t\tlog.error(\"Failed to leave queue: {}\", e.getMessage());\n\t\t\t\te.printStackTrace();\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void onResponse(Call call, Response response) throws IOException\n\t\t\t{\n\t\t\t\tif (response.body() !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tlog.info(\"Left: {}\", response.body().string());\n\t\t\t\t}\n\t\t\t\tresponse.close();\n\t\t\t}\n\t\t});\n\t}\n\n\t// Sends POST /completed\n\tpublic void SendCompleted(String userId, String username, GielinorTravelsPlugin plugin)\n\t{\n\t\tString json \u003d \"{\\\"user_id\\\":\\\"\" + userId + \"\\\" , \\\"username\\\":\\\"\" + username + \"\\\"}\";\n\n\t\tRequestBody body \u003d RequestBody.create(\n\t\t\tMediaType.parse(\"application/json\"), json\n\t\t);\n\n\t\tRequest request \u003d new Request.Builder()\n\t\t\t.url(BASE_URL + \"/completed\")\n\t\t\t.post(body)\n\t\t\t.build();\n\n\t\tclient.newCall(request).enqueue(new Callback()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void onFailure(Call call, IOException e)\n\t\t\t{\n\t\t\t\tlog.error(\"Failed to send completed: {}\", e.getMessage());\n\t\t\t\te.printStackTrace();\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void onResponse(Call call, Response response) throws IOException\n\t\t\t{\n\t\t\t\tif (response.body() !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tString responseJson \u003d response.body().string();\n\t\t\t\t\tlog.info(\"Completed: {}\", responseJson);\n\t\t\t\t\tJsonObject obj \u003d gson.fromJson(responseJson, JsonObject.class);\n\n\t\t\t\t\tif (!obj.has(\"score\"))\n\t\t\t\t\t{\n\t\t\t\t\t\tlog.info(\"No score in response, user already completed\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tString score \u003d obj.get(\"score\").getAsString();\n\t\t\t\t\tlog.info(\"Score received: {}\", score);\n\t\t\t\t\tplugin.displayScore(score);\n\t\t\t\t}\n\t\t\t\tresponse.close();\n\t\t\t}\n\t\t});\n\t}\n\n\t// Opens SSE event stream\n\tpublic void listenForImageEvents(String userId, GielinorTravelsPanel panel)\n\t{\n\t\tRequest request \u003d new Request.Builder()\n\t\t\t.url(BASE_URL + \"/events?user_id\u003d\" + userId)\n\t\t\t.get()\n\t\t\t.build();\n\n\t\tclient.newCall(request).enqueue(new Callback()\n\t\t{\n\n\t\t\t@Override\n\t\t\tpublic void onFailure(Call call, IOException e)\n\t\t\t{\n\t\t\t\tlog.error(\"SSE connection failed: {}\", e.getMessage());\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void onResponse(Call call, Response response) throws IOException\n\t\t\t{\n\t\t\t\tlog.info(\"Connected to SSE... waiting for image events\");\n\n\t\t\t\tassert response.body() !\u003d null;\n\t\t\t\tBufferedSource source \u003d response.body().source();\n\n\t\t\t\twhile (!source.exhausted())\n\t\t\t\t{\n\t\t\t\t\tString line \u003d source.readUtf8Line();\n\n\t\t\t\t\tif (line \u003d\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (line.startsWith(\"data: \"))\n\t\t\t\t\t{\n\t\t\t\t\t\tString json \u003d line.substring(6);\n\t\t\t\t\t\tlog.info(\"Received SSE: {}\", json);\n\n\t\t\t\t\t\t//handleEvent();\n\t\t\t\t\t\tJsonObject obj \u003d gson.fromJson(json, JsonObject.class);\n\t\t\t\t\t\tif (obj.has(\"time\"))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tint secondsUntilNext \u003d 600 - obj.get(\"time\").getAsInt();\n\t\t\t\t\t\t\tlog.info(\"Seconds until next event: {}\", secondsUntilNext);\n\t\t\t\t\t\t\tpanel.setTimeUntilNext(secondsUntilNext);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpanel.onSSE();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t// Handles incoming SSE JSON event using Gson - downloads image and CSV asynchronously\n\tpublic void handleEvent(Runnable onComplete)\n\t{\n\t\tString imageRelative \u003d \"/images/screenshot.png\";\n\t\tString csvRelative \u003d \"/images/coords.csv\";\n\n\t\tString imageUrl \u003d BASE_URL + imageRelative;\n\t\tString csvUrl \u003d BASE_URL + csvRelative;\n\n\t\tlog.info(\"Loading image: \" + imageUrl);\n\t\tlog.info(\"Downloading CSV: \" + csvUrl);\n\n\t\t// Download CSV asynchronously\n\t\tRequest csvRequest \u003d new Request.Builder().url(csvUrl).build();\n\t\tclient.newCall(csvRequest).enqueue(new Callback()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void onFailure(Call call, IOException e)\n\t\t\t{\n\t\t\t\tlog.error(\"Failed to download CSV: \" + e.getMessage());\n\t\t\t\te.printStackTrace();\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void onResponse(Call call, Response response) throws IOException\n\t\t\t{\n\t\t\t\tif (response.body() !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tdownloadedCsv \u003d response.body().string();\n\t\t\t\t\tlog.info(\"Loaded csv data: \" + downloadedCsv);\n\n\t\t\t\t\t// Now download the image asynchronously\n\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t\t\tdownloadedImage \u003d loadImage(imageUrl);\n\t\t\t\t\t\tlog.info(\"Loaded image: \" + downloadedImage.getWidth() + \"x\" + downloadedImage.getHeight());\n\n\t\t\t\t\t\t// Call the completion callback\n\t\t\t\t\t\tif (onComplete !\u003d null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tonComplete.run();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (IOException e)\n\t\t\t\t\t{\n\t\t\t\t\t\tlog.error(\"Failed to download image: \" + e.getMessage());\n\t\t\t\t\t\te.printStackTrace();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tresponse.close();\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic BufferedImage getDownloadedImage()\n\t{\n\t\treturn downloadedImage;\n\t}\n\n\tpublic String getDownloadedCsv()\n\t{\n\t\treturn downloadedCsv;\n\t}\n\n\n}\n","filePath":"src/main/java/org/willocon/gielinortravels/SSEImageClient.java"},{"fileName":"LocationOverlay.java","content":"/*\n * Copyright (c) 2026, Will O\u0027Connor \u003cwilliam.oconnor13@hotmail.co.uk\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage org.willocon.gielinortravels;\n\nimport java.awt.BasicStroke;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Polygon;\nimport java.awt.RenderingHints;\nimport java.awt.image.BufferedImage;\nimport javax.inject.Inject;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Tile;\nimport net.runelite.api.WorldView;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\n\npublic class LocationOverlay extends Overlay\n{\n\n\tprivate final GielinorTravelsPlugin plugin;\n\tprivate BufferedImage image;\n\n\t@Inject\n\tprivate GielinorTravelsConfig config;\n\n\t@Inject\n\tpublic LocationOverlay(GielinorTravelsPlugin plugin)\n\t{\n\t\tthis.plugin \u003d plugin;\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.ABOVE_WIDGETS);\n\n\t}\n\n\tprivate static BufferedImage scaleImage(BufferedImage src, int width, int height)\n\t{\n\t\tBufferedImage scaled \u003d new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);\n\t\tGraphics2D g2 \u003d scaled.createGraphics();\n\t\tg2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\n\t\tg2.drawImage(src, 0, 0, width, height, null);\n\t\tg2.dispose();\n\t\treturn scaled;\n\t}\n\n\tpublic void setOverlayImage(BufferedImage newImg)\n\t{\n\t\tint width \u003d config.overlaySize();\n\t\timage \u003d scaleImage(newImg, width, width);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D g)\n\t{\n\t\tWorldView wv \u003d plugin.client.getLocalPlayer().getWorldView();\n\t\tWorldPoint dest \u003d plugin.getDestination();\n\t\tif (!plugin.getIsFound() \u0026\u0026 plugin.panel.isInQueue())\n\t\t{\n\t\t\tif (wv.contains(dest))\n\t\t\t{\n\t\t\t\tTile tile \u003d wv.getScene().getTiles()[dest.getPlane()][dest.getX() - wv.getBaseX()][dest.getY() - wv.getBaseY()];\n\t\t\t\trenderDestTile(g, tile.getLocalLocation());\n\t\t\t}\n\t\t}\n\n\t\tif (!plugin.isOverlayVisible() || image \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tint x \u003d 20;\n\t\tint y \u003d 20;\n\n\t\tg.setColor(new Color(0, 0, 0, 120)); // black, 120 alpha\n\t\tg.fillRoundRect(x - 4, y - 4, image.getWidth() + 8, image.getHeight() + 8, 12, 12);\n\n\t\tg.drawImage(image, x, y, null);\n\n\t\tg.setColor(Color.YELLOW);\n\t\tg.setStroke(new BasicStroke(2));\n\t\tg.drawRoundRect(x - 4, y - 4, image.getWidth() + 8, image.getHeight() + 8, 12, 12);\n\n\t\treturn null;\n\t}\n\n\tprivate void renderDestTile(final Graphics2D graphics, final LocalPoint destPoint)\n\t{\n\t\tif (destPoint \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal Polygon poly \u003d Perspective.getCanvasTilePoly(plugin.client, destPoint);\n\t\tif (poly \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tOverlayUtil.renderPolygon(graphics, poly, Color.YELLOW);\n\t}\n}\n","filePath":"src/main/java/org/willocon/gielinortravels/LocationOverlay.java"},{"fileName":"GielinorTravelsPlugin.java","content":"/*\n * Copyright (c) 2026, Will O\u0027Connor \u003cwilliam.oconnor13@hotmail.co.uk\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage org.willocon.gielinortravels;\n\nimport com.google.inject.Provides;\nimport java.awt.image.BufferedImage;\nimport java.time.LocalTime;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.ImageUtil;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Gielinor Travels\",\n\tdescription \u003d \"A location-based puzzle and time trial plugin for Old School RuneScape!\",\n\ttags \u003d {\"gielinor\", \"travels\", \"location\", \"puzzle\", \"time trial\", \"overlay\", \"geoguessr\", \"Gieli Guessr\"}\n)\npublic class GielinorTravelsPlugin extends Plugin\n{\n\tpublic GielinorTravelsPanel panel;\n\t@Inject\n\tClient client;\n\t@Inject\n\tprivate ClientThread clientThread;\n\t@Inject\n\tprivate GielinorTravelsConfig config;\n\t@Inject\n\tprivate ClientToolbar clientToolbar;\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\t@Inject\n\tprivate LocationOverlay overlay;\n\t@Inject\n\tprivate SSEImageClient sseImageClient;\n\tprivate NavigationButton navButton;\n\tprivate WorldPoint destination;\n\n\t//Overlay logic\n\tprivate boolean showOverlayImage \u003d false;\n\tprivate int ticksRemaining;\n\n\t// Found logic\n\tprivate boolean isFound \u003d false;\n\n\t// 2 tick in a second error prevention\n\tprivate boolean tickLock \u003d false;\n\n\t// tick counter for time until next location update\n\tprivate long tickCounter \u003d 0;\n\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\toverlayManager.add(overlay);\n\n\t\tpanel \u003d new GielinorTravelsPanel(this, sseImageClient);\n\n\t\tfinal BufferedImage icon \u003d ImageUtil.loadImageResource(GielinorTravelsPlugin.class, \"/icon.png\");\n\n\t\tnavButton \u003d NavigationButton.builder()\n\t\t\t.tooltip(\"Gielinor Travels\")\n\t\t\t.icon(icon)\n\t\t\t.priority(5)\n\t\t\t.panel(panel)\n\t\t\t.build();\n\n\t\tclientToolbar.addNavigation(navButton);\n\n\t\tdestination \u003d new WorldPoint(3245, 3225, 0);\n\n\t\tlog.info(\"Gielinor Travels started!\");\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\toverlayManager.remove(overlay);\n\t\tclientToolbar.removeNavigation(navButton);\n\t\tpanel.leaveQueue();\n\t\tpanel \u003d null;\n\t\tlog.info(\"Gielinor Travels stopped!\");\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick tick)\n\t{\n\t\ttickCounter++;\n\t\tif (panel.isInQueue() \u0026\u0026 !tickLock \u0026\u0026 LocalTime.now().getSecond() \u003d\u003d 3 \u0026\u0026 LocalTime.now().getMinute() % 10 \u003d\u003d 0)\n\t\t{\n\t\t\tpanel.setTimeUntilNext(600);\n\t\t\tpanel.onSSE();\n\t\t\ttickLock \u003d true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttickLock \u003d false;\n\t\t}\n\t\tfinal WorldPoint playerPos \u003d client.getLocalPlayer().getWorldLocation();\n\t\tif (!isFound)\n\t\t{\n\t\t\tif (playerPos.equals(destination))\n\t\t\t{\n\t\t\t\tisFound \u003d true;\n\t\t\t\t// send some sort of packet to the server notifying it\u0027s been found\n\t\t\t\tpanel.panelSendCompleted(\n\t\t\t\t\tclient.getAccountHash() + \"\",\n\t\t\t\t\tclient.getLocalPlayer().getName(),\n\t\t\t\t\tthis\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tif (showOverlayImage)\n\t\t{\n\t\t\tticksRemaining--;\n\t\t\tif (ticksRemaining \u003c\u003d 0)\n\t\t\t{\n\t\t\t\tshowOverlayImage \u003d false;\n\t\t\t\tisFound \u003d false;\n\t\t\t}\n\t\t}\n\t\tpanel.updateTimeUntilNext(tickCounter);\n\t}\n\n\tpublic void displayScore(String score)\n\t{\n\t\tclientThread.invoke(() -\u003e client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"You reached the destination! You got \" + score + \" points!\", null));\n\t}\n\n\t// legacy method, kept for possible future use\n\tpublic void showLocation()\n\t{\n\t\tclientThread.invoke(() -\u003e {\n\t\t\tif (client.getLocalPlayer() \u003d\u003d null)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tWorldPoint playerPos \u003d client.getLocalPlayer().getWorldLocation();\n\t\t\tString coords \u003d String.format(\"X: %d, Y: %d, Plane: %d\", playerPos.getX(), playerPos.getY(), playerPos.getPlane());\n\t\t\tclient.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"Current co-ord: \" + coords, null);\n\n\t\t});\n\t}\n\n\tpublic WorldPoint getDestination()\n\t{\n\t\treturn destination;\n\t}\n\n\tpublic void setDestination(WorldPoint newDestination)\n\t{\n\t\tdestination \u003d newDestination;\n\t}\n\n\tpublic boolean getIsFound()\n\t{\n\t\treturn isFound;\n\t}\n\n\tpublic void showOverlay()\n\t{\n\t\tticksRemaining \u003d config.ticksToDisplay()+2;\n\t\tshowOverlayImage \u003d true;\n\t}\n\n\tpublic void hideOverlay()\n\t{\n\t\tshowOverlayImage \u003d false;\n\t}\n\n\tpublic boolean isOverlayVisible()\n\t{\n\t\treturn showOverlayImage;\n\t}\n\n\tpublic void changeOverlayImage(BufferedImage newImg)\n\t{\n\t\toverlay.setOverlayImage(newImg);\n\t}\n\n\n\t@Provides\n\tGielinorTravelsConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(GielinorTravelsConfig.class);\n\t}\n}\n","filePath":"src/main/java/org/willocon/gielinortravels/GielinorTravelsPlugin.java"},{"fileName":"LocationLoader.java","content":"/*\n * Copyright (c) 2026, Will O\u0027Connor \u003cwilliam.oconnor13@hotmail.co.uk\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage org.willocon.gielinortravels;\n\nimport java.awt.image.BufferedImage;\nimport java.util.ArrayList;\nimport java.util.List;\nimport net.runelite.api.coords.WorldPoint;\n\npublic class LocationLoader\n{\n\n\tpublic final SSEImageClient imageClient;\n\tprivate BufferedImage locationImg;\n\tprivate WorldPoint destination;\n\n\n\tpublic LocationLoader(SSEImageClient imageClient, GielinorTravelsPlugin plugin, GielinorTravelsPanel panel)\n\t{\n\t\tthis.imageClient \u003d imageClient;\n\t\t//join the queue and wait for image and csv\n\t\tlong userID \u003d plugin.client.getAccountHash();\n\t\tString username \u003d plugin.client.getLocalPlayer().getName();\n\t\timageClient.joinQueue(userID + \"\", username);\n\t\timageClient.listenForImageEvents(userID + \"\", panel);\n\t}\n\n\tpublic BufferedImage getLocationImg()\n\t{\n\t\treturn locationImg;\n\t}\n\n\tpublic WorldPoint getDestination()\n\t{\n\t\treturn destination;\n\t}\n\n\n\tprivate int[] readWorldPointCSV(String line)\n\t{\n\t\tList\u003cInteger\u003e numbers \u003d new ArrayList\u003c\u003e();\n\t\tString[] values \u003d line.split(\",\");\n\n\t\t// Parse each value as int and add to the list\n\t\tfor (String value : values)\n\t\t{\n\t\t\tnumbers.add(Integer.parseInt(value.trim()));\n\t\t}\n\t\t// Convert List\u003cInteger\u003e to int[]\n\t\treturn numbers.stream().mapToInt(Integer::intValue).toArray();\n\t}\n\n\tpublic void loadFromServer(Runnable onComplete)\n\t{\n\t\timageClient.handleEvent(() -\u003e {\n\t\t\t// This callback runs after the image and CSV are loaded\n\t\t\tthis.locationImg \u003d imageClient.getDownloadedImage();\n\t\t\tString csvLine \u003d imageClient.getDownloadedCsv();\n\t\t\tint[] coords \u003d readWorldPointCSV(csvLine);\n\t\t\tthis.destination \u003d new WorldPoint(coords[0], coords[1], coords[2]);\n\n\t\t\t// Notify the caller that data is ready\n\t\t\tif (onComplete !\u003d null)\n\t\t\t{\n\t\t\t\tonComplete.run();\n\t\t\t}\n\t\t});\n\t}\n}\n","filePath":"src/main/java/org/willocon/gielinortravels/LocationLoader.java"},{"fileName":"GielinorTravelsPanel.java","content":"/*\n * Copyright (c) 2026, Will O\u0027Connor \u003cwilliam.oconnor13@hotmail.co.uk\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage org.willocon.gielinortravels;\n\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.GridLayout;\nimport java.awt.Image;\nimport java.awt.event.ActionEvent;\nimport java.awt.image.BufferedImage;\nimport javax.swing.BorderFactory;\nimport javax.swing.ImageIcon;\nimport javax.swing.JButton;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.SwingConstants;\nimport javax.swing.border.EmptyBorder;\nimport net.runelite.client.ui.PluginPanel;\n\npublic class GielinorTravelsPanel extends PluginPanel\n{\n\n\tprivate final GielinorTravelsPlugin plugin;\n\tprivate final SSEImageClient sseImageClient;\n\tprivate final JPanel textPanel \u003d new JPanel();\n\tprivate final JButton startButton \u003d new JButton(\"Join Lobby\");\n\tprivate final JLabel picLabel \u003d new JLabel();\n\tprivate final JPanel buttonPanel \u003d new JPanel();\n\tprivate final JLabel topLabel \u003d new JLabel(\"Gielinor Travels\");\n\tprivate LocationLoader location;\n\tprivate boolean inQueue \u003d false;\n\tprivate int timeUntilNext \u003d 0;\n\tprivate final int[] clockArray \u003d {0, 1, 0, 1, 1};\n\n\tpublic GielinorTravelsPanel(GielinorTravelsPlugin plugin, SSEImageClient sseImageClient)\n\t{\n\t\tsuper();\n\t\tthis.plugin \u003d plugin;\n\t\tthis.sseImageClient \u003d sseImageClient;\n\n\t\tsetLayout(new BorderLayout(0, 10));\n\t\tsetBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n\n\t\ttopLabel.setForeground(Color.LIGHT_GRAY);\n\t\ttopLabel.setHorizontalAlignment(SwingConstants.CENTER);\n\t\ttextPanel.setBorder(new EmptyBorder(0, 0, 0, 0));\n\t\ttextPanel.setLayout(new GridLayout(2, 1, 5, 5));\n\t\ttextPanel.add(topLabel, BorderLayout.NORTH);\n\n\t\tJPanel picPanel \u003d new JPanel();\n\t\tpicPanel.setBorder(new EmptyBorder(0, 0, 0, 0));\n\t\tpicPanel.setLayout(new GridLayout(1, 1, 5, 5));\n\n\t\tpicPanel.add(picLabel, BorderLayout.NORTH);\n\n\t\tJLabel infoLabel \u003d new JLabel(\"\u003chtml\u003eJoin a lobby to be matched with a random location in Gielinor.\u003cbr\u003e\" +\n\t\t\t\"Every 10 minutes, your destination will update to a new location!\u003c/html\u003e\");\n\t\tinfoLabel.setForeground(Color.LIGHT_GRAY);\n\t\ttextPanel.add(infoLabel, BorderLayout.CENTER);\n\n\t\tbuttonPanel.setBorder(new EmptyBorder(0, 0, 0, 0));\n\t\tbuttonPanel.setLayout(new GridLayout(2, 1, 5, 5));\n\n\n\t\tstartButton.addActionListener(this::onStartButtonClicked);\n\n\n\t\tbuttonPanel.add(startButton);\n\n\t\tadd(textPanel, BorderLayout.NORTH);\n\t\tadd(picPanel, BorderLayout.CENTER);\n\t\tadd(buttonPanel, BorderLayout.SOUTH);\n\t}\n\n\tprivate void onStartButtonClicked(ActionEvent e)\n\t{\n\t\tlocation \u003d new LocationLoader(sseImageClient, plugin, this);\n\t\tinQueue \u003d true;\n\n\n\t\tJLabel waitLabel \u003d new JLabel(\"\u003chtml\u003eWaiting for server to send destination.\u003c/html\u003e\");\n\t\twaitLabel.setForeground(Color.LIGHT_GRAY);\n\t\ttextPanel.removeAll();\n\t\ttopLabel.setForeground(Color.LIGHT_GRAY);\n\t\ttopLabel.setHorizontalAlignment(SwingConstants.CENTER);\n\t\ttextPanel.add(topLabel, BorderLayout.NORTH);\n\t\ttextPanel.add(waitLabel, BorderLayout.CENTER);\n\t\ttextPanel.revalidate();\n\t\ttextPanel.repaint();\n\n\t\tbuttonPanel.removeAll();\n\t\tJButton stopButton \u003d new JButton(\"Leave Lobby\");\n\t\tstopButton.addActionListener(this::onStopButtonClicked);\n\n\t\tbuttonPanel.add(stopButton);\n\t\tbuttonPanel.revalidate();\n\t\tbuttonPanel.repaint();\n\t}\n\n\tprivate void removeOverlayButtonClicked(ActionEvent e)\n\t{\n\t\tplugin.hideOverlay();\n\t}\n\n\tprivate void onStopButtonClicked(ActionEvent e)\n\t{\n\t\tleaveQueue();\n\t\tpicLabel.removeAll();\n\t\tpicLabel.setIcon(null);\n\t\tpicLabel.revalidate();\n\t\tpicLabel.repaint();\n\t\tJLabel infoLabel \u003d new JLabel(\"\u003chtml\u003eJoin a lobby to be matched with a random location in Gielinor.\u003cbr\u003e\" +\n\t\t\t\"Every 10 minutes, your destination will update to a new location!\u003c/html\u003e\");\n\t\tinfoLabel.setForeground(Color.LIGHT_GRAY);\n\t\ttextPanel.removeAll();\n\t\ttopLabel.setForeground(Color.LIGHT_GRAY);\n\t\ttopLabel.setHorizontalAlignment(SwingConstants.CENTER);\n\t\ttextPanel.add(topLabel, BorderLayout.NORTH);\n\t\ttextPanel.add(infoLabel, BorderLayout.CENTER);\n\t\ttextPanel.revalidate();\n\t\ttextPanel.repaint();\n\n\t\tbuttonPanel.removeAll();\n\t\tbuttonPanel.add(startButton);\n\t\tbuttonPanel.revalidate();\n\t\tbuttonPanel.repaint();\n\n\t\tplugin.setDestination(null);\n\t}\n\n\tpublic boolean isInQueue()\n\t{\n\t\treturn inQueue;\n\t}\n\n\tprivate void setScaledImage(BufferedImage locationImg)\n\t{\n\t\t// Sidebar width is ~220px depending on RuneLite scaling,\n\t\t// so resize to fit the panel width while keeping aspect ratio.\n\t\tint panelWidth \u003d 220;\n\t\tint imgWidth \u003d locationImg.getWidth();\n\t\tint imgHeight \u003d locationImg.getHeight();\n\t\tdouble scale \u003d (double) panelWidth / imgWidth;\n\n\t\tint newWidth \u003d (int) (imgWidth * scale);\n\t\tint newHeight \u003d (int) (imgHeight * scale);\n\n\t\tImage scaled \u003d locationImg.getScaledInstance(newWidth, newHeight, Image.SCALE_SMOOTH);\n\t\tpicLabel.setIcon(new ImageIcon(scaled));\n\n\t\tpicLabel.revalidate();\n\t\tpicLabel.repaint();\n\t}\n\n\tpublic void onSSE()\n\t{\n\t\tlocation.loadFromServer(() -\u003e {\n\t\t\t// This callback runs when the image and destination are loaded\n\t\t\tjava.awt.EventQueue.invokeLater(() -\u003e {\n\t\t\t\tsetScaledImage(location.getLocationImg());\n\t\t\t\tplugin.setDestination(location.getDestination());\n\t\t\t\tplugin.changeOverlayImage(location.getLocationImg());\n\t\t\t\tplugin.showOverlay();\n\t\t\t});\n\t\t});\n\n\t\t//JLabel destLabel \u003d new JLabel(\"\u003chtml\u003eTravel to destination!\u003c/html\u003e\");\n\t\tString timeStr \u003d formatTime(timeUntilNext);\n\t\tJLabel timeLabel \u003d new JLabel(\"\u003chtml\u003eNext destination update in: \" + timeStr + \"\u003c/html\u003e\");\n\t\t//destLabel.setForeground(Color.LIGHT_GRAY);\n\t\ttextPanel.removeAll();\n\t\ttopLabel.setForeground(Color.LIGHT_GRAY);\n\t\ttopLabel.setHorizontalAlignment(SwingConstants.CENTER);\n\t\ttextPanel.add(topLabel, BorderLayout.NORTH);\n\t\t//textPanel.add(destLabel, BorderLayout.CENTER);\n\t\ttextPanel.add(timeLabel, BorderLayout.SOUTH);\n\t\ttextPanel.revalidate();\n\t\ttextPanel.repaint();\n\n\t\tbuttonPanel.removeAll();\n\t\tJButton stopButton \u003d new JButton(\"Leave Lobby\");\n\t\tstopButton.addActionListener(this::onStopButtonClicked);\n\t\tJButton overlayButton \u003d new JButton(\"Remove Overlay Image Early\");\n\t\toverlayButton.addActionListener(this::removeOverlayButtonClicked);\n\t\tbuttonPanel.add(stopButton);\n\t\tbuttonPanel.add(overlayButton);\n\t\tbuttonPanel.revalidate();\n\t\tbuttonPanel.repaint();\n\t}\n\n\tpublic void panelSendCompleted(String userid, String playerName, GielinorTravelsPlugin plugin)\n\t{\n\t\tlocation.imageClient.SendCompleted(\n\t\t\tuserid,\n\t\t\tplayerName,\n\t\t\tplugin\n\t\t);\n\t\tpicLabel.removeAll();\n\t\tpicLabel.setIcon(null);\n\t\tpicLabel.revalidate();\n\t\tpicLabel.repaint();\n\t\tString timeStr \u003d formatTime(timeUntilNext);\n\t\tJLabel waitLabel \u003d new JLabel(\"\u003chtml\u003eNext destination update in: \" + timeStr + \"\u003c/html\u003e\");\n\t\twaitLabel.setForeground(Color.LIGHT_GRAY);\n\t\ttextPanel.removeAll();\n\t\ttopLabel.setForeground(Color.LIGHT_GRAY);\n\t\ttopLabel.setHorizontalAlignment(SwingConstants.CENTER);\n\t\ttextPanel.add(topLabel, BorderLayout.NORTH);\n\t\ttextPanel.add(waitLabel, BorderLayout.CENTER);\n\t\ttextPanel.revalidate();\n\t\ttextPanel.repaint();\n\n\t\tbuttonPanel.removeAll();\n\t\tJButton stopButton \u003d new JButton(\"Leave Lobby\");\n\t\tstopButton.addActionListener(this::onStopButtonClicked);\n\t\tbuttonPanel.add(stopButton);\n\t\tbuttonPanel.revalidate();\n\t\tbuttonPanel.repaint();\n\t}\n\n\tpublic void leaveQueue()\n\t{\n\t\tinQueue \u003d false;\n\t\tplugin.hideOverlay();\n\t\tlong userID \u003d plugin.client.getAccountHash();\n\t\tlocation.imageClient.leaveQueue(userID + \"\");\n\t}\n\n\tpublic void setTimeUntilNext(int seconds)\n\t{\n\t\ttimeUntilNext \u003d seconds;\n\t}\n\n\tpublic void updateTimeUntilNext(long tick)\n\t{\n\t\tint index \u003d (int) (tick % 5);\n\t\tif (clockArray[index] \u003d\u003d 1)\n\t\t{\n\t\t\ttimeUntilNext--;\n\t\t\tif (isInQueue()\u0026\u0026 timeUntilNext \u003e\u003d 0)\n\t\t\t{\n\t\t\t\tString timeStr \u003d formatTime(timeUntilNext);\n\t\t\t\tJLabel timeLabel \u003d new JLabel(\"\u003chtml\u003eNext destination update in: \" + timeStr + \"\u003c/html\u003e\");\n\t\t\t\ttimeLabel.setForeground(Color.LIGHT_GRAY);\n\t\t\t\ttextPanel.removeAll();\n\t\t\t\ttopLabel.setForeground(Color.LIGHT_GRAY);\n\t\t\t\ttopLabel.setHorizontalAlignment(SwingConstants.CENTER);\n\t\t\t\ttextPanel.add(topLabel, BorderLayout.NORTH);\n\t\t\t\ttextPanel.add(timeLabel, BorderLayout.CENTER);\n\t\t\t\ttextPanel.revalidate();\n\t\t\t\ttextPanel.repaint();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate String formatTime(int seconds)\n\t{\n\t\tint minutes \u003d seconds / 60;\n\t\tint secs \u003d seconds % 60;\n\t\treturn String.format(\"%d:%02d\", minutes, secs);\n\t}\n}","filePath":"src/main/java/org/willocon/gielinortravels/GielinorTravelsPanel.java"},{"fileName":"GielinorTravelsConfig.java","content":"/*\n * Copyright (c) 2026, Will O\u0027Connor \u003cwilliam.oconnor13@hotmail.co.uk\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage org.willocon.gielinortravels;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"Gielinor Travels\")\npublic interface GielinorTravelsConfig extends Config\n{\n\t@ConfigItem(\n\t\tkeyName \u003d \"ticksToDisplay\",\n\t\tposition \u003d 0,\n\t\tname \u003d \"Overlay display ticks\",\n\t\tdescription \u003d \"The number of ticks to display the overlay image for.\"\n\t)\n\tdefault int ticksToDisplay()\n\t{\n\t\treturn 10;\n\t}\n\t@ConfigItem(\n\t\tkeyName \u003d \"overlaySize\",\n\t\tposition \u003d 1,\n\t\tname \u003d \"Overlay size\",\n\t\tdescription \u003d \"The size of the overlay image in pixels. (X and Y are the same)\"\n\t)\n\tdefault int overlaySize()\n\t{\n\t\treturn 500;\n\t}\n}\n","filePath":"src/main/java/org/willocon/gielinortravels/GielinorTravelsConfig.java"},{"fileName":"ExamplePluginTest.java","content":"package org.willocon.gielinortravels;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ExamplePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(GielinorTravelsPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src/test/java/org/willocon/gielinortravels/ExamplePluginTest.java"}]},{"commit":"d81bb4c444c3772b1563be8a8fcc2252c84a0a4f","repository":"https://github.com/Nightfirecat/plugin-hub-plugins.git","internalName":"wilderness-multi-lines","files":[{"fileName":"WildernessLinesConfig.java","content":"/*\n * Copyright (c) 2020, Jordan \u003cnightfirecat@protonmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage at.nightfirec.wildernesslines;\n\nimport java.awt.Color;\nimport net.runelite.client.config.Alpha;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\n\n@ConfigGroup(\"wilderness-multi-lines\")\npublic interface WildernessLinesConfig extends Config\n{\n\t@ConfigItem(\n\t\tposition \u003d 0,\n\t\tkeyName \u003d \"onlyShowInWilderness\",\n\t\tname \u003d \"Only show in Wilderness\",\n\t\tdescription \u003d \"Only show the lines if you are in the Wilderness\"\n\t)\n\tdefault boolean onlyShowInWilderness()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigSection(\n\t\tname \u003d \"Multi Lines\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 1\n\t)\n\tString multiLines \u003d \"multiLines\";\n\n\t@ConfigItem(\n\t\tposition \u003d 1,\n\t\tkeyName \u003d \"multiLinesColor\",\n\t\tname \u003d \"Multi lines color\",\n\t\tdescription \u003d \"Color of lines bordering multi-combat zones in the wilderness\",\n\t\tsection \u003d multiLines\n\t)\n\t@Alpha\n\tdefault Color multiLinesColor()\n\t{\n\t\treturn Color.RED;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 2,\n\t\tkeyName \u003d \"showSpearLines\",\n\t\tname \u003d \"Show spear lines\",\n\t\tdescription \u003d \"Show the area in which you can potentially speared into a multi-combat zone\",\n\t\tsection \u003d multiLines\n\t)\n\tdefault boolean showSpearLines()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 3,\n\t\tkeyName \u003d \"spearLinesColor\",\n\t\tname \u003d \"Spear lines color\",\n\t\tdescription \u003d \"Color of lines bordering spear areas surrounding multi-combat zones in the wilderness\",\n\t\tsection \u003d multiLines\n\t)\n\t@Alpha\n\tdefault Color spearLinesColor()\n\t{\n\t\treturn Color.ORANGE;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 4,\n\t\tkeyName \u003d \"multiAreaMismatchAlert\",\n\t\tname \u003d \"Mismatch alert\",\n\t\tdescription \u003d \"Print alert messages in the chatbox if the plugin\u0027s multi-combat zones do not match areas walked on ingame\",\n\t\tsection \u003d multiLines,\n\t\thidden \u003d true\n\t)\n\tdefault boolean multiAreaMismatchAlert()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigSection(\n\t\tname \u003d \"Level Lines\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 2\n\t)\n\tString levelLines \u003d \"levelLines\";\n\n\t@ConfigItem(\n\t\tposition \u003d 1,\n\t\tkeyName \u003d \"show20Line\",\n\t\tname \u003d \"Show 20 line\",\n\t\tdescription \u003d \"Show a line which separates 20 from 21 wilderness\",\n\t\tsection \u003d levelLines\n\t)\n\tdefault boolean show20Line()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 2,\n\t\tkeyName \u003d \"twentyLineColor\",\n\t\tname \u003d \"20 line color\",\n\t\tdescription \u003d \"Color of the line separating 20 from 21 wilderness\",\n\t\tsection \u003d levelLines\n\t)\n\t@Alpha\n\tdefault Color twentyLineColor()\n\t{\n\t\treturn Color.GREEN;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 3,\n\t\tkeyName \u003d \"show30Line\",\n\t\tname \u003d \"Show 30 line\",\n\t\tdescription \u003d \"Show a line which separates 30 from 31 wilderness\",\n\t\tsection \u003d levelLines\n\t)\n\tdefault boolean show30Line()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 4,\n\t\tkeyName \u003d \"thirtyLineColor\",\n\t\tname \u003d \"30 line color\",\n\t\tdescription \u003d \"Color of the line separating 30 from 31 wilderness\",\n\t\tsection \u003d levelLines\n\t)\n\t@Alpha\n\tdefault Color thirtyLineColor()\n\t{\n\t\treturn Color.CYAN;\n\t}\n}\n","filePath":"src\\main\\java\\at\\nightfirec\\wildernesslines\\WildernessLinesConfig.java"},{"fileName":"WildernessLinesOverlay.java","content":"/*\n * Copyright (c) 2018, Woox \u003chttps://github.com/wooxsolo\u003e\n * Copyright (c) 2021, Jordan Atwood \u003cnightfirecat@protonmail.com\u003e\n * Copyright (c) 2024, tsbreuer \u003ctsbreuer@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *   list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *   this list of conditions and the following disclaimer in the documentation\n *   and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage at.nightfirec.wildernesslines;\n\nimport java.awt.BasicStroke;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.geom.GeneralPath;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Point;\nimport net.runelite.api.WorldView;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.gameval.VarbitID;\nimport net.runelite.api.geometry.Geometry;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\n\nclass WildernessLinesOverlay extends Overlay\n{\n\tprivate final WildernessLinesPlugin plugin;\n\tprivate final WildernessLinesConfig config;\n\tprivate final Client client;\n\n\t@Inject\n\tprivate WildernessLinesOverlay(WildernessLinesPlugin plugin, WildernessLinesConfig config, Client client)\n\t{\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t\tthis.client \u003d client;\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tfinal boolean inWilderness \u003d client.getVarbitValue(VarbitID.INSIDE_WILDERNESS) \u003d\u003d 1;\n\t\tif (!inWilderness \u0026\u0026 config.onlyShowInWilderness())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (config.showSpearLines())\n\t\t{\n\t\t\trenderPath(graphics, plugin.getDrawPathsSpear(), config.spearLinesColor());\n\t\t}\n\t\trenderPath(graphics, plugin.getDrawPathsMulti(), config.multiLinesColor());\n\n\t\tif (config.show20Line())\n\t\t{\n\t\t\trenderPath(graphics, plugin.getDrawPaths20Lines(), config.twentyLineColor());\n\t\t}\n\n\t\tif (config.show30Line())\n\t\t{\n\t\t\trenderPath(graphics, plugin.getDrawPaths30Lines(), config.thirtyLineColor());\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate void renderPath(Graphics2D graphics, GeneralPath path, Color color)\n\t{\n\t\tgraphics.setColor(color);\n\t\tgraphics.setStroke(new BasicStroke(1));\n\t\tfinal WorldView topLevelWorldView \u003d client.getTopLevelWorldView();\n\n\t\tpath \u003d Geometry.filterPath(path, (p1, p2) -\u003e\n\t\t\tPerspective.localToCanvas(client, new LocalPoint((int)p1[0], (int)p1[1], topLevelWorldView), topLevelWorldView.getPlane()) !\u003d null \u0026\u0026\n\t\t\tPerspective.localToCanvas(client, new LocalPoint((int)p2[0], (int)p2[1], topLevelWorldView), topLevelWorldView.getPlane()) !\u003d null);\n\n\t\tpath \u003d Geometry.transformPath(path, coords -\u003e\n\t\t{\n\t\t\tPoint point \u003d Perspective.localToCanvas(client, new LocalPoint((int)coords[0], (int)coords[1], topLevelWorldView), topLevelWorldView.getPlane());\n\t\t\tcoords[0] \u003d point.getX();\n\t\t\tcoords[1] \u003d point.getY();\n\t\t});\n\n\t\tpath \u003d Geometry.filterPath(path, (p1, p2) -\u003e\n\t\t{\n\t\t\t// p1 within canvas\n\t\t\treturn (p1[0] \u003e 0 \u0026\u0026 p1[0] \u003c client.getCanvasWidth()) \u0026\u0026 (p1[1] \u003e 0 \u0026\u0026 p1[1] \u003c client.getCanvasHeight())\n\t\t\t\t// p2 within canvas\n\t\t\t\t|| (p2[0] \u003e 0 \u0026\u0026 p2[0] \u003c client.getCanvasWidth()) \u0026\u0026 (p2[1] \u003e 0 \u0026\u0026 p2[1] \u003c client.getCanvasHeight());\n\t\t});\n\n\t\tgraphics.draw(path);\n\t}\n}\n","filePath":"src\\main\\java\\at\\nightfirec\\wildernesslines\\WildernessLinesOverlay.java"},{"fileName":"WildernessLinesPlugin.java","content":"/*\n * Copyright (c) 2018, Woox \u003chttps://github.com/wooxsolo\u003e\n * Copyright (c) 2021, Jordan \u003cnightfirecat@protonmail.com\u003e\n * Copyright (c) 2024, tsbreuer \u003ctsbreuer@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage at.nightfirec.wildernesslines;\n\nimport com.google.common.collect.ImmutableList;\nimport com.google.inject.Provides;\nimport java.awt.Color;\nimport java.awt.Point;\nimport java.awt.Rectangle;\nimport java.awt.Shape;\nimport java.awt.Toolkit;\nimport java.awt.datatransfer.StringSelection;\nimport java.awt.geom.Area;\nimport java.awt.geom.GeneralPath;\nimport java.awt.geom.Line2D;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Set;\nimport java.util.concurrent.ScheduledExecutorService;\nimport javax.inject.Inject;\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.Constants;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.WorldView;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.CommandExecuted;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.WorldViewLoaded;\nimport net.runelite.api.gameval.VarbitID;\nimport net.runelite.api.geometry.Geometry;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.ColorUtil;\nimport net.runelite.client.util.LinkBrowser;\n\n@PluginDescriptor(\n\tname \u003d \"Wilderness Lines\",\n\tdescription \u003d \"Show wilderness multicombat areas, the dragon spear range to those areas, and level 20 and 30 lines.\",\n\ttags \u003d {\"dragon spear\", \"multicombat\", \"wildy\", \"20\", \"30\", \"wilderness level\"}\n)\npublic class WildernessLinesPlugin extends Plugin\n{\n\tprivate static final Area WILDERNESS \u003d new Area(new Rectangle(2941, 3522, 528, 471));\n\tprivate static final List\u003cRectangle\u003e WILDERNESS_MULTI_AREAS \u003d ImmutableList.of(\n\t\tnew Rectangle(3008, 3600, 64, 112), // Dark warrior\u0027s palace\n\t\tnew Rectangle(3072, 3654, 1, 2), // Two tiles next to southern rev caves entrance which used to be a BH \"singles\" lure spot\n\t\tnew Rectangle(2946, 3816, 14, 16), // Chaos altar\n\t\tnew Rectangle(2984, 3912, 24, 16), // Balance crossing to wilderness agility course\n\t\tnew Rectangle(3008, 3856, 40, 48), // North of kbd entrance\n\t\tnew Rectangle(3021, 3855, 2, 1), // Two tiles NE of kbd entrance cage\n\t\tnew Rectangle(3048, 3896, 24, 8), // North of rune rocks\n\t\tnew Rectangle(3072, 3880, 64, 24), // North of lava maze\n\t\tnew Rectangle(3112, 3872, 24, 8), // Northeast of lava maze\n\t\tnew Rectangle(3136, 3840, 256, 64), // Northeast f2p wilderness\n\t\tnew Rectangle(3200, 3904, 192, 64), // Northeast p2p wilderness\n\t\tnew Rectangle(3152, 3752, 176, 88), // North-mid east f2p wilderness\n\t\tnew Rectangle(3192, 3525, 136, 227), // East f2p wilderness\n\t\tnew Rectangle(3328, 3525, 17, 8), // Small east f2p wilderness strip NE of lumberyard\n\t\tnew Rectangle(3191, 3689, 1, 1), // One silly tile that used to be a BH \"singles\" lure spot\n\t\tnew Rectangle(3136, 3525, 56, 59), // Wilderness north of Grand Exchange\n\t\tnew Rectangle(3152, 3584, 40, 36), // SE of Ferox 1\n\t\tnew Rectangle(3146, 3598, 6, 22), // SE of Ferox 2\n\t\tnew Rectangle(3147, 3596, 5, 2), // SE of Ferox 2 extension 1\n\t\tnew Rectangle(3149, 3595, 3, 1), // SE of Ferox 2 extension 2\n\t\tnew Rectangle(3150, 3594, 2, 1), // SE of Ferox 2 extension 3\n\t\tnew Rectangle(3151, 3593, 1, 1), // SE of Ferox 2 extension 4\n\t\tnew Rectangle(3152, 3620, 10, 6), // SE of Ferox 3\n\t\tnew Rectangle(3187, 3620, 5, 28), // East of Ferox 1\n\t\tnew Rectangle(3179, 3636, 8, 4), // East of Ferox 2, south of bridge\n\t\tnew Rectangle(3176, 3640, 11, 8), // East of Ferox 2, bridge and north of bridge\n\t\tnew Rectangle(3174, 3647, 2, 1), // Two dumb tiles north of bridge east of Ferox\n\t\tnew Rectangle(3264, 10048, 192, 320), // Slayer dungeon, Vet\u0027ion, Venenatis, Callisto, and escape caves\n\t\tnew Rectangle(3218, 10330, 31, 24), // Scorpia\u0027s cave\n\t\tnew Rectangle(3008, 10112, 64, 28), // Wilderness God Wars Dungeon south portion\n\t\tnew Rectangle(3008, 10140, 51, 12), // Wilderness God Wars Dungeon middle portion\n\t\tnew Rectangle(3008, 10152, 39, 24) // Wilderness God Wars Dungeon north portion\n\t);\n\tprivate static final int SPEAR_RANGE \u003d 5;\n\tprivate static final Rectangle AGILITY_COURSE_BRIDGE \u003d new Rectangle(2998, 3917, 1, 14);\n\tprivate static final Rectangle NORTH_LAVA_MAZE_SHORTCUT \u003d new Rectangle(3092, 3880, 1, 1);\n\tprivate static final Rectangle SEED_POD_TELE_TILE \u003d new Rectangle(2465, 3495, 1, 1);\n\tprivate static final Line2D[] TWENTY_LINES \u003d {\n\t\t// overworld\n\t\tnew Line2D.Float(2946, 3680, 3384, 3680),\n\n\t\t// rev caves\n\t\tnew Line2D.Float(3202, 10080, 3205, 10080),\n\t\tnew Line2D.Float(3216, 10080, 3224, 10080),\n\t\tnew Line2D.Float(3228, 10080, 3230, 10080),\n\t\tnew Line2D.Float(3234, 10080, 3245, 10080),\n\n\t\t// wilderness slayer caves\n\t\tnew Line2D.Float(3335, 10080, 3344, 10080),\n\t\tnew Line2D.Float(3349, 10080, 3367, 10080),\n\t\tnew Line2D.Float(3381, 10080, 3385, 10080),\n\t\tnew Line2D.Float(3394, 10080, 3397, 10080),\n\t\tnew Line2D.Float(3410, 10080, 3416, 10080),\n\t\tnew Line2D.Float(3436, 10080, 3449, 10080),\n\t};\n\tprivate static final Line2D[] THIRTY_LINES \u003d {\n\t\t// overworld\n\t\tnew Line2D.Float(2946, 3760, 3375, 3760),\n\n\t\t// rev caves\n\t\tnew Line2D.Float(3164, 10160, 3185, 10160),\n\t\tnew Line2D.Float(3194, 10160, 3221, 10160),\n\t\tnew Line2D.Float(3235, 10160, 3255, 10160),\n\n\t\t// wilderness slayer caves\n\t\tnew Line2D.Float(3333, 10160, 3349, 10160),\n\t\tnew Line2D.Float(3356, 10160, 3368, 10160),\n\t\tnew Line2D.Float(3421, 10160, 3428, 10160),\n\t};\n\n\tprivate static final Area MULTI_AREA \u003d new Area();\n\tprivate static final Area SPEAR_MULTI_AREA \u003d new Area();\n\tprivate static final Area FORCE_MOVE_IGNORE_AREA \u003d new Area();\n\n\tstatic\n\t{\n\t\tfor (final Rectangle multiArea : WILDERNESS_MULTI_AREAS)\n\t\t{\n\t\t\tMULTI_AREA.add(new Area(multiArea));\n\t\t\tfor (int i \u003d 0; i \u003c\u003d SPEAR_RANGE; i++)\n\t\t\t{\n\t\t\t\tfinal Rectangle spearArea \u003d new Rectangle(multiArea);\n\t\t\t\tspearArea.grow(SPEAR_RANGE - i, i);\n\t\t\t\tSPEAR_MULTI_AREA.add(new Area(spearArea));\n\t\t\t}\n\t\t}\n\n\t\tFORCE_MOVE_IGNORE_AREA.add(new Area(AGILITY_COURSE_BRIDGE));\n\t\tFORCE_MOVE_IGNORE_AREA.add(new Area(NORTH_LAVA_MAZE_SHORTCUT));\n\t\tFORCE_MOVE_IGNORE_AREA.add(new Area(SEED_POD_TELE_TILE));\n\t}\n\n\tprivate static final String GITHUB_REPO \u003d \"https://github.com/nightfirecat/plugin-hub-plugins\";\n\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate GeneralPath drawPathsMulti \u003d new GeneralPath();\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate GeneralPath drawPathsSpear \u003d new GeneralPath();\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate GeneralPath drawPaths20Lines \u003d new GeneralPath();\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate GeneralPath drawPaths30Lines \u003d new GeneralPath();\n\n\tprivate final Set\u003cWorldPoint\u003e multiAreaMismatchedPoints \u003d new HashSet\u003c\u003e();\n\tprivate WorldPoint wpLastTick;\n\tprivate boolean alertingMultiAreaMismatch;\n\n\t@Inject\n\tprivate WildernessLinesOverlay overlay;\n\n\n\t@Inject\n\tprivate WildernessLinesConfig config;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate ScheduledExecutorService executor;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Provides\n\tWildernessLinesConfig getConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(WildernessLinesConfig.class);\n\t}\n\n\t@Override\n\tpublic void startUp()\n\t{\n\t\toverlayManager.add(overlay);\n\t}\n\n\t@Override\n\tpublic void shutDown()\n\t{\n\t\toverlayManager.remove(overlay);\n\n\t\tdrawPathsMulti.reset();\n\t\tdrawPathsSpear.reset();\n\t\tdrawPaths20Lines.reset();\n\t\tdrawPaths30Lines.reset();\n\t\tmultiAreaMismatchedPoints.clear();\n\t\talertingMultiAreaMismatch \u003d false;\n\t}\n\n\t@Subscribe\n\tprivate void onWorldViewLoaded(WorldViewLoaded worldViewLoaded)\n\t{\n\t\tif (worldViewLoaded.getWorldView() \u003d\u003d client.getTopLevelWorldView())\n\t\t{\n\t\t\texecutor.execute(() -\u003e\n\t\t\t{\n\t\t\t\tdrawPathsMulti \u003d getMultiLinesToDisplay();\n\t\t\t\tdrawPathsSpear \u003d getSpearLinesToDisplay();\n\t\t\t\tdrawPaths20Lines \u003d get20LineToDisplay();\n\t\t\t\tdrawPaths30Lines \u003d get30LineToDisplay();\n\n\t\t\t});\n\t\t}\n\t}\n\n\t@Subscribe\n\tprivate void onGameTick(GameTick e)\n\t{\n\t\tif (client.getVarbitValue(VarbitID.INSIDE_WILDERNESS) !\u003d 0)\n\t\t{\n\t\t\tfinal WorldPoint currentWp \u003d client.getLocalPlayer().getWorldLocation();\n\n\t\t\tif (wpLastTick !\u003d null\n\t\t\t\t// Some teleports, such as the Royal seed pod, have entrance animations which preserve var values until\n\t\t\t\t// the animation completes. Due to that, it is most practical to avoid tracking movement over more than\n\t\t\t\t// 2 tiles at once, as it is a teleport and not valid for consideration. This also should remove a class\n\t\t\t\t// of bugs where you could teleport from low wilderness to another area in the wilderness with a\n\t\t\t\t// change of multi-combat status.\n\t\t\t\t\u0026\u0026 currentWp.distanceTo(wpLastTick) \u003c\u003d 2)\n\t\t\t{\n\t\t\t\tfinal boolean inMultiCombat \u003d client.getVarbitValue(VarbitID.MULTIWAY_INDICATOR) \u003d\u003d 1;\n\t\t\t\tfinal Point location \u003d new Point(wpLastTick.getX(), wpLastTick.getY());\n\n\t\t\t\tfinal boolean areaMismatch \u003d (inMultiCombat ^ MULTI_AREA.contains(location))\n\t\t\t\t\t// When crossing several force-move areas such as the wilderness agility course bridge, north lava\n\t\t\t\t\t// maze shortcut, etc., the multi-combat indicator does not change until you\u0027ve either fallen off\n\t\t\t\t\t// (which typically moves you more than 2 tiles, therefore is guarded above) or reached the other\n\t\t\t\t\t// side. Hence, do not warn for such areas.\n\t\t\t\t\t\u0026\u0026 !FORCE_MOVE_IGNORE_AREA.contains(location);\n\t\t\t\tif (areaMismatch)\n\t\t\t\t{\n\t\t\t\t\tmultiAreaMismatchedPoints.add(wpLastTick);\n\t\t\t\t}\n\n\t\t\t\tfinal boolean shouldAlert \u003d areaMismatch \u0026\u0026 config.multiAreaMismatchAlert();\n//\t\t\t\tif (shouldAlert \u0026\u0026 !alertingMultiAreaMismatch)\n//\t\t\t\t{\n//\t\t\t\t\tclient.addChatMessage(ChatMessageType.PUBLICCHAT, \"Wilderness Lines\", ColorUtil.prependColorTag(\"Encountered unexpected multi-combat areas\", Color.RED), \"\");\n//\t\t\t\t\tclient.addChatMessage(ChatMessageType.PUBLICCHAT, \"Wilderness Lines\", \"Please type \u0027::reportUnexpectedAreas\u0027 to report this bug to \" + GITHUB_REPO, \"\");\n//\t\t\t\t}\n\n\t\t\t\talertingMultiAreaMismatch \u003d shouldAlert;\n\t\t\t}\n\n\t\t\twpLastTick \u003d currentWp;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Tracking wp at all times could lead to false positives when teleporting in or out of wildy.\n\t\t\twpLastTick \u003d null;\n\t\t}\n\t}\n\n\t@Subscribe\n\tprivate void onCommandExecuted(CommandExecuted e)\n\t{\n\t\tif (!e.getCommand().equalsIgnoreCase(\"reportUnexpectedAreas\"))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (multiAreaMismatchedPoints.isEmpty())\n\t\t{\n\t\t\tclient.addChatMessage(ChatMessageType.PUBLICCHAT, \"Wilderness Lines\", \"No unexpected areas cached, opening issue report form\", \"\");\n\t\t\tLinkBrowser.browse(GITHUB_REPO + \"/issues/new?labels\u003dplugin:%20wilderness-lines\");\n\t\t\treturn;\n\t\t}\n\n\t\t// Check size; copy to clipboard and open not-prepopulated form if length \u003e 5k\n\t\tfinal StringBuilder pointsListBuilder \u003d new StringBuilder();\n\t\tmultiAreaMismatchedPoints.forEach((point) -\u003e pointsListBuilder.append(\"* \").append(point.getX()).append(\", \").append(point.getY()).append(\"%0A\"));\n\t\tfinal String pointsList \u003d pointsListBuilder.toString();\n\t\tfinal String issueList;\n\t\tif (pointsList.length() \u003e 5000)\n\t\t{\n\t\t\tfinal StringSelection stringSelection \u003d new StringSelection(pointsList.replaceAll(\"%0A\", \"\\n\"));\n\t\t\tToolkit.getDefaultToolkit().getSystemClipboard().setContents(stringSelection, null);\n\t\t\tclient.addChatMessage(ChatMessageType.PUBLICCHAT, \"Wilderness Lines\", \"Too many unexpected areas to pre-populate form, please paste from clipboard\", \"\");\n\t\t\tissueList \u003d \"\u003c!--%20PASTE%20HERE%20--\u003e%0A\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\tclient.addChatMessage(ChatMessageType.PUBLICCHAT, \"Wilderness Lines\", \"Pre-populating and opening issue report form\", \"\");\n\t\t\tissueList \u003d pointsList;\n\t\t}\n\n\t\tLinkBrowser.browse(GITHUB_REPO + \"/issues/new?labels\u003dplugin:%20wilderness-lines\u0026body\u003dThe%20plugin%20is%20not%20correct%20for%20the%20following%20areas:%0A%0A\" + issueList);\n\t}\n\n\tprivate void transformWorldToLocal(float[] coords)\n\t{\n\t\tfinal LocalPoint lp \u003d LocalPoint.fromWorld(client.getTopLevelWorldView(), (int)coords[0], (int)coords[1]);\n\t\tcoords[0] \u003d lp.getX() - Perspective.LOCAL_TILE_SIZE / 2f;\n\t\tcoords[1] \u003d lp.getY() - Perspective.LOCAL_TILE_SIZE / 2f;\n\t}\n\n\tprivate GeneralPath getMultiLinesToDisplay()\n\t{\n\t\treturn getLinesToDisplay(filterUndergroundAreas(MULTI_AREA));\n\t}\n\n\tprivate GeneralPath getSpearLinesToDisplay()\n\t{\n\t\treturn getLinesToDisplay(filterUndergroundAreas(SPEAR_MULTI_AREA));\n\t}\n\n\tprivate GeneralPath get20LineToDisplay()\n\t{\n\t\treturn getLinesToDisplay(TWENTY_LINES);\n\t}\n\n\tprivate GeneralPath get30LineToDisplay()\n\t{\n\t\treturn getLinesToDisplay(THIRTY_LINES);\n\t}\n\n\tprivate GeneralPath getLinesToDisplay(final Shape... shapes)\n\t{\n\t\tfinal WorldView topLevelWorldView \u003d client.getTopLevelWorldView();\n\t\tfinal Rectangle sceneRect \u003d new Rectangle(\n\t\t\ttopLevelWorldView.getBaseX() + 1, topLevelWorldView.getBaseY() + 1,\n\t\t\tConstants.SCENE_SIZE - 2, Constants.SCENE_SIZE - 2);\n\n\t\tfinal GeneralPath paths \u003d new GeneralPath();\n\t\tfor (final Shape shape : shapes)\n\t\t{\n\t\t\tGeneralPath lines \u003d new GeneralPath(shape);\n\t\t\tlines \u003d Geometry.clipPath(lines, sceneRect);\n\t\t\tlines \u003d Geometry.splitIntoSegments(lines, 1);\n\t\t\tlines \u003d Geometry.transformPath(lines, this::transformWorldToLocal);\n\t\t\tpaths.append(lines, false);\n\t\t}\n\t\treturn paths;\n\t}\n\n\t/**\n\t * Subtracts all area appearing in the underground (i.e. above {@code Constants.OVERWORLD_MAX_Y}) from the given\n\t * area.\n\t *\n\t * @param area An {@link Area}, such as that representing multi-combat zones.\n\t * @return A new {@link Area} with underground geometry omitted.\n\t */\n\tprivate static Area filterUndergroundAreas(final Area area)\n\t{\n\t\tfinal Area newArea \u003d (Area) area.clone();\n\t\tnewArea.intersect(WILDERNESS);\n\t\treturn newArea;\n\t}\n}\n","filePath":"src\\main\\java\\at\\nightfirec\\wildernesslines\\WildernessLinesPlugin.java"},{"fileName":"WildernessLinesPluginTest.java","content":"/*\n * Copyright (c) 2021, Jordan \u003cnightfirecat@protonmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage at.nightfirec.wildernesslines;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class WildernessLinesPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(WildernessLinesPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}\n","filePath":"src\\test\\java\\at\\nightfirec\\wildernesslines\\WildernessLinesPluginTest.java"}]},{"commit":"271bf920d0b738e5635a738c9017f1edfccdcf05","repository":"https://github.com/jmccarey/crab-scouter.git","internalName":"crab-scouter","files":[{"fileName":"CrabScouterWebSocketClient.java","content":"package com.crabscouter;\n\nimport com.google.gson.Gson;\nimport com.google.gson.JsonArray;\nimport com.google.gson.JsonObject;\nimport com.google.gson.JsonParser;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.concurrent.TimeUnit;\nimport lombok.extern.slf4j.Slf4j;\nimport okhttp3.OkHttpClient;\nimport okhttp3.Request;\nimport okhttp3.Response;\nimport okhttp3.WebSocket;\nimport okhttp3.WebSocketListener;\n\n@Slf4j\npublic class CrabScouterWebSocketClient extends WebSocketListener\n{\n\tprivate static final int RECONNECT_DELAY_SECONDS \u003d 5;\n\n\tprivate final CrabScouterPlugin plugin;\n\tprivate final String serverUrl;\n\tprivate final OkHttpClient httpClient;\n\tprivate final Gson gson;\n\tprivate final ScheduledExecutorService executor;\n\n\tprivate WebSocket webSocket;\n\tprivate boolean shouldReconnect \u003d true;\n\tprivate boolean isConnecting \u003d false;\n\n\tpublic CrabScouterWebSocketClient(CrabScouterPlugin plugin, String serverUrl, OkHttpClient httpClient, Gson gson)\n\t{\n\t\tthis.plugin \u003d plugin;\n\t\tthis.serverUrl \u003d serverUrl;\n\t\tthis.httpClient \u003d httpClient;\n\t\tthis.gson \u003d gson;\n\t\tthis.executor \u003d Executors.newSingleThreadScheduledExecutor();\n\t}\n\n\tpublic void connect()\n\t{\n\t\tif (isConnecting || webSocket !\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tisConnecting \u003d true;\n\t\tshouldReconnect \u003d true;\n\n\t\tRequest request \u003d new Request.Builder()\n\t\t\t.url(serverUrl)\n\t\t\t.build();\n\n\t\twebSocket \u003d httpClient.newWebSocket(request, this);\n\t}\n\n\tpublic void close()\n\t{\n\t\tshouldReconnect \u003d false;\n\t\texecutor.shutdown();\n\n\t\tif (webSocket !\u003d null)\n\t\t{\n\t\t\twebSocket.close(1000, \"Plugin shutdown\");\n\t\t\twebSocket \u003d null;\n\t\t}\n\t}\n\n\tpublic void sendJoin(int world, int chunk)\n\t{\n\t\tif (webSocket \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tJsonObject message \u003d new JsonObject();\n\t\tmessage.addProperty(\"type\", \"join\");\n\t\tmessage.addProperty(\"world\", world);\n\t\tmessage.addProperty(\"chunk\", chunk);\n\n\t\twebSocket.send(gson.toJson(message));\n\t\tlog.debug(\"Sent join message for world {} chunk {}\", world, chunk);\n\t}\n\n\tpublic void sendLeave(int world)\n\t{\n\t\tif (webSocket \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tJsonObject message \u003d new JsonObject();\n\t\tmessage.addProperty(\"type\", \"leave\");\n\t\tmessage.addProperty(\"world\", world);\n\n\t\twebSocket.send(gson.toJson(message));\n\t\tlog.debug(\"Sent leave message for world {}\", world);\n\t}\n\n\tpublic void sendReport(int world, int chunk, int health, int totalPlayers, int attackingPlayers)\n\t{\n\t\tif (webSocket \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tJsonObject message \u003d new JsonObject();\n\t\tmessage.addProperty(\"type\", \"report\");\n\t\tmessage.addProperty(\"world\", world);\n\t\tmessage.addProperty(\"chunk\", chunk);\n\t\tmessage.addProperty(\"health\", health);\n\t\tmessage.addProperty(\"totalPlayers\", totalPlayers);\n\t\tmessage.addProperty(\"attackingPlayers\", attackingPlayers);\n\n\t\twebSocket.send(gson.toJson(message));\n\t\tlog.debug(\"Sent report: world\u003d{} chunk\u003d{} health\u003d{} total\u003d{} attacking\u003d{}\", world, chunk, health, totalPlayers, attackingPlayers);\n\t}\n\n\tpublic void sendResign(int world)\n\t{\n\t\tif (webSocket \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tJsonObject message \u003d new JsonObject();\n\t\tmessage.addProperty(\"type\", \"resign\");\n\t\tmessage.addProperty(\"world\", world);\n\n\t\twebSocket.send(gson.toJson(message));\n\t\tlog.debug(\"Sent resign message for world {}\", world);\n\t}\n\n\t@Override\n\tpublic void onOpen(WebSocket webSocket, Response response)\n\t{\n\t\tisConnecting \u003d false;\n\t\tlog.info(\"WebSocket connected to {}\", serverUrl);\n\t\tplugin.onWebSocketConnected();\n\t}\n\n\t@Override\n\tpublic void onMessage(WebSocket webSocket, String text)\n\t{\n\t\tlog.debug(\"Received message: {}\", text);\n\t\ttry\n\t\t{\n\t\t\tJsonObject message \u003d new JsonParser().parse(text).getAsJsonObject();\n\t\t\tString type \u003d message.get(\"type\").getAsString();\n\n\t\t\tswitch (type)\n\t\t\t{\n\t\t\t\tcase \"role\":\n\t\t\t\t\tboolean isReporter \u003d message.get(\"isReporter\").getAsBoolean();\n\t\t\t\t\tplugin.onRoleAssigned(isReporter);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"update\":\n\t\t\t\t\tList\u003cWorldData\u003e worlds \u003d parseWorldsUpdate(message);\n\t\t\t\t\tlog.debug(\"Received update with {} worlds\", worlds.size());\n\t\t\t\t\tplugin.onWorldsUpdate(worlds);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tlog.warn(\"Unknown message type: {}\", type);\n\t\t\t}\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\tlog.error(\"Error parsing WebSocket message: {}\", text, e);\n\t\t}\n\t}\n\n\tprivate List\u003cWorldData\u003e parseWorldsUpdate(JsonObject message)\n\t{\n\t\tList\u003cWorldData\u003e worlds \u003d new ArrayList\u003c\u003e();\n\t\tJsonArray worldsArray \u003d message.getAsJsonArray(\"worlds\");\n\n\t\tfor (int i \u003d 0; i \u003c worldsArray.size(); i++)\n\t\t{\n\t\t\tJsonObject worldObj \u003d worldsArray.get(i).getAsJsonObject();\n\t\t\tworlds.add(new WorldData(\n\t\t\t\tworldObj.get(\"world\").getAsInt(),\n\t\t\t\tworldObj.get(\"chunk\").getAsInt(),\n\t\t\t\tworldObj.get(\"health\").getAsInt(),\n\t\t\t\tworldObj.get(\"totalPlayers\").getAsInt(),\n\t\t\t\tworldObj.get(\"attackingPlayers\").getAsInt(),\n\t\t\t\tworldObj.get(\"lastUpdate\").getAsLong()\n\t\t\t));\n\t\t}\n\n\t\treturn worlds;\n\t}\n\n\t@Override\n\tpublic void onClosing(WebSocket webSocket, int code, String reason)\n\t{\n\t\tlog.debug(\"WebSocket closing: {} - {}\", code, reason);\n\t}\n\n\t@Override\n\tpublic void onClosed(WebSocket webSocket, int code, String reason)\n\t{\n\t\tthis.webSocket \u003d null;\n\t\tisConnecting \u003d false;\n\t\tlog.info(\"WebSocket closed: {} - {}\", code, reason);\n\t\tplugin.onWebSocketDisconnected();\n\n\t\tscheduleReconnect();\n\t}\n\n\t@Override\n\tpublic void onFailure(WebSocket webSocket, Throwable t, Response response)\n\t{\n\t\tthis.webSocket \u003d null;\n\t\tisConnecting \u003d false;\n\t\tlog.error(\"WebSocket error\", t);\n\t\tplugin.onWebSocketDisconnected();\n\n\t\tscheduleReconnect();\n\t}\n\n\tprivate void scheduleReconnect()\n\t{\n\t\tif (!shouldReconnect)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlog.debug(\"Scheduling reconnect in {} seconds\", RECONNECT_DELAY_SECONDS);\n\t\texecutor.schedule(this::connect, RECONNECT_DELAY_SECONDS, TimeUnit.SECONDS);\n\t}\n}\n\n","filePath":"src/main/java/com/crabscouter/CrabScouterWebSocketClient.java"},{"fileName":"WorldData.java","content":"package com.crabscouter;\n\nimport lombok.Data;\n\n@Data\npublic class WorldData\n{\n\tprivate int world;\n\tprivate int chunk;\n\tprivate int health;\n\tprivate int totalPlayers;\n\tprivate int attackingPlayers;\n\tprivate long lastUpdate;\n\n\tpublic WorldData(int world, int chunk, int health, int totalPlayers, int attackingPlayers, long lastUpdate)\n\t{\n\t\tthis.world \u003d world;\n\t\tthis.chunk \u003d chunk;\n\t\tthis.health \u003d health;\n\t\tthis.totalPlayers \u003d totalPlayers;\n\t\tthis.attackingPlayers \u003d attackingPlayers;\n\t\tthis.lastUpdate \u003d lastUpdate;\n\t}\n\n\tpublic boolean isFresh()\n\t{\n\t\treturn System.currentTimeMillis() - lastUpdate \u003c 90_000;\n\t}\n\n\tpublic String getChunkName()\n\t{\n\t\tswitch (chunk)\n\t\t{\n\t\t\tcase 4913:\n\t\t\t\treturn \"North\";\n\t\t\tcase 4911:\n\t\t\t\treturn \"West\";\n\t\t\tcase 5424:\n\t\t\t\treturn \"East\";\n\t\t\tdefault:\n\t\t\t\treturn \"Unknown\";\n\t\t}\n\t}\n}\n","filePath":"src/main/java/com/crabscouter/WorldData.java"},{"fileName":"CrabScouterPlugin.java","content":"package com.crabscouter;\n\nimport java.awt.image.BufferedImage;\nimport java.util.List;\nimport java.util.concurrent.CopyOnWriteArrayList;\nimport javax.inject.Inject;\nimport javax.swing.SwingUtilities;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Actor;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.NPC;\nimport net.runelite.api.Player;\nimport net.runelite.api.WorldView;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.NpcDespawned;\nimport net.runelite.api.events.NpcSpawned;\nimport net.runelite.api.widgets.ComponentID;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.util.ImageUtil;\nimport net.runelite.client.util.WorldUtil;\nimport net.runelite.http.api.worlds.World;\nimport net.runelite.http.api.worlds.WorldResult;\nimport net.runelite.http.api.worlds.WorldType;\nimport net.runelite.client.game.WorldService;\nimport com.google.gson.Gson;\nimport okhttp3.OkHttpClient;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Crab Scouter\",\n\tdescription \u003d \"Crowdsourced Gemstone Crab scouting - shows player counts, health, and location across worlds\",\n\ttags \u003d {\"crab\", \"gemstone\", \"scouter\", \"crowdsource\"}\n)\npublic class CrabScouterPlugin extends Plugin\n{\n\tprivate static final int GEMSTONE_CRAB_ID \u003d 14779;\n\tprivate static final int CHUNK_NORTH \u003d 4913;\n\tprivate static final int CHUNK_WEST \u003d 4911;\n\tprivate static final int CHUNK_EAST \u003d 5424;\n\tprivate static final String SERVER_URL \u003d \"wss://crab-scouter.josephpmccarey.workers.dev\";\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate ClientToolbar clientToolbar;\n\n\t@Inject\n\tprivate WorldService worldService;\n\n\t@Inject\n\tprivate OkHttpClient okHttpClient;\n\n\t@Inject\n\tprivate Gson gson;\n\n\t@Getter\n\tprivate final List\u003cWorldData\u003e worldDataList \u003d new CopyOnWriteArrayList\u003c\u003e();\n\n\tprivate CrabScouterPanel panel;\n\tprivate NavigationButton navButton;\n\tprivate CrabScouterWebSocketClient webSocketClient;\n\n\t@Getter\n\tprivate boolean isReporter \u003d false;\n\n\t@Getter\n\tprivate boolean isConnected \u003d false;\n\n\tprivate NPC trackedCrab;\n\tprivate int lastHealthRatio \u003d -1;\n\tprivate int lastPlayerCount \u003d -1;\n\tprivate int currentChunk \u003d -1;\n\tprivate boolean inCrabArea \u003d false;\n\tprivate int ticksSinceLastReport \u003d 0;\n\tprivate int ticksWithoutCrab \u003d 0;\n\n\t// World hopping state\n\tprivate static final int HOP_MAX_ATTEMPTS \u003d 3;\n\tprivate net.runelite.api.World quickHopTargetWorld;\n\tprivate int hopAttempts \u003d 0;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tlog.debug(\"Crab Scouter started!\");\n\n\t\tpanel \u003d new CrabScouterPanel(this);\n\n\t\tfinal BufferedImage icon \u003d ImageUtil.loadImageResource(getClass(), \"/crab_icon.png\");\n\t\tnavButton \u003d NavigationButton.builder()\n\t\t\t.tooltip(\"Crab Scouter\")\n\t\t\t.icon(icon !\u003d null ? icon : new BufferedImage(16, 16, BufferedImage.TYPE_INT_ARGB))\n\t\t\t.priority(10)\n\t\t\t.panel(panel)\n\t\t\t.build();\n\n\t\tclientToolbar.addNavigation(navButton);\n\n\t\twebSocketClient \u003d new CrabScouterWebSocketClient(this, SERVER_URL, okHttpClient, gson);\n\t\twebSocketClient.connect();\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tlog.debug(\"Crab Scouter stopped!\");\n\n\t\tif (inCrabArea \u0026\u0026 webSocketClient !\u003d null)\n\t\t{\n\t\t\twebSocketClient.sendLeave(client.getWorld());\n\t\t}\n\n\t\tif (webSocketClient !\u003d null)\n\t\t{\n\t\t\twebSocketClient.close();\n\t\t\twebSocketClient \u003d null;\n\t\t}\n\n\t\tclientToolbar.removeNavigation(navButton);\n\t\tpanel \u003d null;\n\t\tnavButton \u003d null;\n\n\t\ttrackedCrab \u003d null;\n\t\tinCrabArea \u003d false;\n\t\tisReporter \u003d false;\n\t\tisConnected \u003d false;\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged event)\n\t{\n\t\tif (event.getGameState() \u003d\u003d GameState.LOGIN_SCREEN || event.getGameState() \u003d\u003d GameState.HOPPING)\n\t\t{\n\t\t\tif (inCrabArea \u0026\u0026 webSocketClient !\u003d null)\n\t\t\t{\n\t\t\t\twebSocketClient.sendLeave(client.getWorld());\n\t\t\t}\n\t\t\tinCrabArea \u003d false;\n\t\t\ttrackedCrab \u003d null;\n\t\t\tisReporter \u003d false;\n\t\t\tcurrentChunk \u003d -1;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event)\n\t{\n\t\thandleHop();\n\n\t\tif (client.getGameState() !\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tWorldPoint playerLocation \u003d client.getLocalPlayer().getWorldLocation();\n\t\tint regionId \u003d playerLocation.getRegionID();\n\n\t\tif (ticksSinceLastReport % 10 \u003d\u003d 0)\n\t\t{\n\t\t\tlog.debug(\"Player at region {} (x\u003d{}, y\u003d{})\", regionId, playerLocation.getX(), playerLocation.getY());\n\t\t}\n\n\t\tboolean wasInCrabArea \u003d inCrabArea;\n\t\tinCrabArea \u003d (regionId \u003d\u003d CHUNK_NORTH || regionId \u003d\u003d CHUNK_WEST || regionId \u003d\u003d CHUNK_EAST);\n\t\tcurrentChunk \u003d inCrabArea ? regionId : -1;\n\n\t\tif (inCrabArea \u0026\u0026 !wasInCrabArea)\n\t\t{\n\t\t\tonEnterCrabArea();\n\t\t}\n\t\telse if (!inCrabArea \u0026\u0026 wasInCrabArea)\n\t\t{\n\t\t\tonLeaveCrabArea();\n\t\t}\n\n\t\tif (inCrabArea \u0026\u0026 isReporter)\n\t\t{\n\t\t\tticksSinceLastReport++;\n\t\t\tcheckAndReport();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tticksSinceLastReport++;\n\t\t}\n\t}\n\n\tprivate void onEnterCrabArea()\n\t{\n\t\tlog.debug(\"Entered crab area in chunk {}\", currentChunk);\n\t\tif (isPvpWorld())\n\t\t{\n\t\t\tlog.debug(\"Skipping join - PvP world\");\n\t\t\treturn;\n\t\t}\n\t\tif (webSocketClient !\u003d null)\n\t\t{\n\t\t\twebSocketClient.sendJoin(client.getWorld(), currentChunk);\n\t\t}\n\t\tfindCrab();\n\t}\n\n\tprivate boolean isPvpWorld()\n\t{\n\t\tWorldResult worldResult \u003d worldService.getWorlds();\n\t\tif (worldResult \u003d\u003d null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tWorld world \u003d worldResult.findWorld(client.getWorld());\n\t\tif (world \u003d\u003d null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn world.getTypes().contains(WorldType.PVP)\n\t\t\t|| world.getTypes().contains(WorldType.HIGH_RISK)\n\t\t\t|| world.getTypes().contains(WorldType.DEADMAN);\n\t}\n\n\tprivate void onLeaveCrabArea()\n\t{\n\t\tlog.debug(\"Left crab area\");\n\t\tif (webSocketClient !\u003d null)\n\t\t{\n\t\t\twebSocketClient.sendLeave(client.getWorld());\n\t\t}\n\t\ttrackedCrab \u003d null;\n\t\tisReporter \u003d false;\n\t\tlastHealthRatio \u003d -1;\n\t\tlastPlayerCount \u003d -1;\n\t\tticksSinceLastReport \u003d 0;\n\t}\n\n\t@Subscribe\n\tpublic void onNpcSpawned(NpcSpawned event)\n\t{\n\t\tif (!inCrabArea)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tNPC npc \u003d event.getNpc();\n\t\tif (npc.getId() \u003d\u003d GEMSTONE_CRAB_ID)\n\t\t{\n\t\t\ttrackedCrab \u003d npc;\n\t\t\tlog.debug(\"Gemstone crab spawned by ID: {}\", npc.getId());\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tString name \u003d npc.getName();\n\t\tif (name !\u003d null \u0026\u0026 isGemstoneCrab(name))\n\t\t{\n\t\t\ttrackedCrab \u003d npc;\n\t\t\tlog.debug(\"Gemstone crab spawned by name: {} (ID: {})\", name, npc.getId());\n\t\t}\n\t}\n\n\tprivate boolean isGemstoneCrab(String name)\n\t{\n\t\tString lower \u003d name.toLowerCase();\n\t\treturn lower.contains(\"gemstone\") \u0026\u0026 lower.contains(\"crab\") \u0026\u0026 !lower.contains(\"shell\");\n\t}\n\n\t@Subscribe\n\tpublic void onNpcDespawned(NpcDespawned event)\n\t{\n\t\tif (trackedCrab !\u003d null \u0026\u0026 event.getNpc() \u003d\u003d trackedCrab)\n\t\t{\n\t\t\ttrackedCrab \u003d null;\n\t\t\tlog.debug(\"Gemstone crab despawned\");\n\t\t}\n\t}\n\n\tprivate void findCrab()\n\t{\n\t\tWorldView worldView \u003d client.getTopLevelWorldView();\n\t\tif (worldView \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tint npcCount \u003d 0;\n\t\tfor (NPC npc : worldView.npcs())\n\t\t{\n\t\t\tnpcCount++;\n\t\t\tif (npc.getId() \u003d\u003d GEMSTONE_CRAB_ID)\n\t\t\t{\n\t\t\t\ttrackedCrab \u003d npc;\n\t\t\t\tlog.debug(\"Found gemstone crab by ID: {}\", npc.getId());\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tString name \u003d npc.getName();\n\t\t\tif (name !\u003d null \u0026\u0026 isGemstoneCrab(name))\n\t\t\t{\n\t\t\t\ttrackedCrab \u003d npc;\n\t\t\t\tlog.debug(\"Found gemstone crab by name: {} (ID: {})\", name, npc.getId());\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t\n\t\tlog.debug(\"Gemstone crab not found in {} NPCs\", npcCount);\n\t}\n\n\tprivate void checkAndReport()\n\t{\n\t\tif (!isReporter || webSocketClient \u003d\u003d null || currentChunk \u003d\u003d -1 || isPvpWorld())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (trackedCrab \u003d\u003d null)\n\t\t{\n\t\t\tfindCrab();\n\t\t}\n\n\t\tif (trackedCrab \u003d\u003d null)\n\t\t{\n\t\t\tticksWithoutCrab++;\n\t\t\tif (ticksWithoutCrab \u003e\u003d 50)\n\t\t\t{\n\t\t\t\tlog.debug(\"Can\u0027t see crab for {} ticks, resigning as reporter\", ticksWithoutCrab);\n\t\t\t\twebSocketClient.sendResign(client.getWorld());\n\t\t\t\tisReporter \u003d false;\n\t\t\t\tticksWithoutCrab \u003d 0;\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tticksWithoutCrab \u003d 0;\n\n\t\tint crabChunk \u003d trackedCrab.getWorldLocation().getRegionID();\n\t\tif (crabChunk !\u003d currentChunk)\n\t\t{\n\t\t\tlog.debug(\"Crab is in different chunk ({}) than player ({})\", crabChunk, currentChunk);\n\t\t\ttrackedCrab \u003d null;\n\t\t\treturn;\n\t\t}\n\n\t\tint currentHealth \u003d getHealthPercent();\n\t\tint[] playerCounts \u003d countPlayers();\n\t\tint totalPlayers \u003d playerCounts[0];\n\t\tint attackingPlayers \u003d playerCounts[1];\n\n\t\tboolean healthChanged \u003d Math.abs(currentHealth - lastHealthRatio) \u003e 5;\n\t\tboolean playersChanged \u003d totalPlayers !\u003d lastPlayerCount;\n\t\tboolean heartbeat \u003d ticksSinceLastReport \u003e\u003d 100;\n\n\t\tif (healthChanged || playersChanged || heartbeat)\n\t\t{\n\t\t\tlog.debug(\"Sending report: world\u003d{}, chunk\u003d{}, health\u003d{}, total\u003d{}, attacking\u003d{}, reason\u003d{}\",\n\t\t\t\tclient.getWorld(), crabChunk, currentHealth, totalPlayers, attackingPlayers,\n\t\t\t\theartbeat ? \"heartbeat\" : (healthChanged ? \"health\" : \"players\"));\n\t\t\twebSocketClient.sendReport(client.getWorld(), crabChunk, currentHealth, totalPlayers, attackingPlayers);\n\t\t\tlastHealthRatio \u003d currentHealth;\n\t\t\tlastPlayerCount \u003d totalPlayers;\n\t\t\tticksSinceLastReport \u003d 0;\n\t\t}\n\t}\n\n\tprivate int getHealthPercent()\n\t{\n\t\tif (trackedCrab \u003d\u003d null)\n\t\t{\n\t\t\tlog.debug(\"getHealthPercent: trackedCrab is null\");\n\t\t\treturn 100;\n\t\t}\n\n\t\tint ratio \u003d trackedCrab.getHealthRatio();\n\t\tint scale \u003d trackedCrab.getHealthScale();\n\n\t\tlog.debug(\"getHealthPercent: ratio\u003d{}, scale\u003d{}\", ratio, scale);\n\n\t\tif (ratio \u003d\u003d -1 || scale \u003d\u003d -1)\n\t\t{\n\t\t\treturn 100;\n\t\t}\n\n\t\treturn (int) ((ratio / (double) scale) * 100);\n\t}\n\n\tprivate int[] countPlayers()\n\t{\n\t\tint totalPlayers \u003d 0;\n\t\tint attackingPlayers \u003d 0;\n\t\t\n\t\tWorldView worldView \u003d client.getTopLevelWorldView();\n\t\tif (worldView \u003d\u003d null)\n\t\t{\n\t\t\treturn new int[]{0, 0};\n\t\t}\n\n\t\tfor (Player player : worldView.players())\n\t\t{\n\t\t\tif (player \u003d\u003d null)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t\n\t\t\ttotalPlayers++;\n\n\t\t\tif (trackedCrab !\u003d null)\n\t\t\t{\n\t\t\t\tActor target \u003d player.getInteracting();\n\t\t\t\tif (target \u003d\u003d trackedCrab)\n\t\t\t\t{\n\t\t\t\t\tattackingPlayers++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tlog.debug(\"countPlayers: total\u003d{}, attacking\u003d{}\", totalPlayers, attackingPlayers);\n\t\t\n\t\treturn new int[]{totalPlayers, attackingPlayers};\n\t}\n\n\tpublic void onWebSocketConnected()\n\t{\n\t\tisConnected \u003d true;\n\t\tlog.debug(\"WebSocket connected\");\n\t\tupdatePanel();\n\n\t\tclientThread.invokeLater(() -\u003e\n\t\t{\n\t\t\tif (inCrabArea \u0026\u0026 client.getGameState() \u003d\u003d GameState.LOGGED_IN \u0026\u0026 !isPvpWorld())\n\t\t\t{\n\t\t\t\tlog.debug(\"Reconnected while in crab area, resending join\");\n\t\t\t\twebSocketClient.sendJoin(client.getWorld(), currentChunk);\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic void onWebSocketDisconnected()\n\t{\n\t\tisConnected \u003d false;\n\t\tisReporter \u003d false;\n\t\tlog.debug(\"WebSocket disconnected\");\n\t\tupdatePanel();\n\t}\n\n\tpublic void onRoleAssigned(boolean reporter)\n\t{\n\t\tisReporter \u003d reporter;\n\t\tlog.debug(\"Role assigned: {}\", reporter ? \"reporter\" : \"listener\");\n\n\t\tif (isReporter \u0026\u0026 inCrabArea \u0026\u0026 !isPvpWorld())\n\t\t{\n\t\t\tclientThread.invokeLater(() -\u003e\n\t\t\t{\n\t\t\t\tint currentHealth \u003d getHealthPercent();\n\t\t\t\tint[] playerCounts \u003d countPlayers();\n\t\t\t\twebSocketClient.sendReport(client.getWorld(), currentChunk, currentHealth, playerCounts[0], playerCounts[1]);\n\t\t\t\tlastHealthRatio \u003d currentHealth;\n\t\t\t\tlastPlayerCount \u003d playerCounts[0];\n\t\t\t\tticksSinceLastReport \u003d 0;\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic void onWorldsUpdate(List\u003cWorldData\u003e worlds)\n\t{\n\t\tlog.debug(\"onWorldsUpdate called with {} worlds\", worlds.size());\n\t\tworldDataList.clear();\n\t\tworldDataList.addAll(worlds);\n\t\tupdatePanel();\n\t}\n\n\tprivate void updatePanel()\n\t{\n\t\tlog.debug(\"updatePanel called, panel\u003d{}, worldDataList size\u003d{}\", panel !\u003d null, worldDataList.size());\n\t\tif (panel !\u003d null)\n\t\t{\n\t\t\tSwingUtilities.invokeLater(panel::update);\n\t\t}\n\t}\n\n\tpublic void hopToWorld(int worldNumber)\n\t{\n\t\tlog.debug(\"hopToWorld called for world {}\", worldNumber);\n\n\t\tif (client.getGameState() !\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tlog.warn(\"Cannot hop - not logged in (state: {})\", client.getGameState());\n\t\t\treturn;\n\t\t}\n\n\t\tint currentWorld \u003d client.getWorld();\n\t\tif (currentWorld \u003d\u003d worldNumber)\n\t\t{\n\t\t\tlog.debug(\"Already on world {}\", worldNumber);\n\t\t\treturn;\n\t\t}\n\n\t\tWorldResult worldResult \u003d worldService.getWorlds();\n\t\tif (worldResult \u003d\u003d null)\n\t\t{\n\t\t\tlog.warn(\"World list not loaded yet\");\n\t\t\treturn;\n\t\t}\n\n\t\tWorld targetWorld \u003d worldResult.findWorld(worldNumber);\n\t\tif (targetWorld \u003d\u003d null)\n\t\t{\n\t\t\tlog.warn(\"Could not find world {} in world list\", worldNumber);\n\t\t\treturn;\n\t\t}\n\n\t\tlog.info(\"Hopping to world {} (current: {})\", worldNumber, currentWorld);\n\t\tnet.runelite.api.World rsWorld \u003d client.createWorld();\n\t\trsWorld.setActivity(targetWorld.getActivity());\n\t\trsWorld.setAddress(targetWorld.getAddress());\n\t\trsWorld.setId(targetWorld.getId());\n\t\trsWorld.setPlayerCount(targetWorld.getPlayers());\n\t\trsWorld.setLocation(targetWorld.getLocation());\n\t\trsWorld.setTypes(WorldUtil.toWorldTypes(targetWorld.getTypes()));\n\n\t\t// Set target world - actual hop happens in handleHop() on game tick\n\t\tquickHopTargetWorld \u003d rsWorld;\n\t\thopAttempts \u003d 0;\n\t}\n\n\tprivate void handleHop()\n\t{\n\t\tif (quickHopTargetWorld \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if world switcher is open\n\t\tif (client.getWidget(ComponentID.WORLD_SWITCHER_WORLD_LIST) \u003d\u003d null)\n\t\t{\n\t\t\t// Open the world hopper first\n\t\t\tclient.openWorldHopper();\n\n\t\t\tif (++hopAttempts \u003e\u003d HOP_MAX_ATTEMPTS)\n\t\t\t{\n\t\t\t\tlog.warn(\"Failed to open world switcher after {} attempts\", hopAttempts);\n\t\t\t\tresetHop();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// World switcher is open, perform the hop\n\t\t\tclient.hopToWorld(quickHopTargetWorld);\n\t\t\tresetHop();\n\t\t}\n\t}\n\n\tprivate void resetHop()\n\t{\n\t\tquickHopTargetWorld \u003d null;\n\t\thopAttempts \u003d 0;\n\t}\n}\n","filePath":"src/main/java/com/crabscouter/CrabScouterPlugin.java"},{"fileName":"CrabScouterPanel.java","content":"package com.crabscouter;\n\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Cursor;\nimport java.awt.Dimension;\nimport java.awt.GridLayout;\nimport javax.swing.Box;\nimport javax.swing.BoxLayout;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.util.ArrayList;\nimport java.util.Comparator;\nimport java.util.List;\nimport javax.swing.BorderFactory;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\nimport javax.swing.SwingConstants;\nimport javax.swing.border.EmptyBorder;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.PluginPanel;\n\npublic class CrabScouterPanel extends PluginPanel\n{\n\tprivate enum SortColumn\n\t{\n\t\tWORLD, CHUNK, HEALTH, PLAYERS\n\t}\n\n\tprivate final CrabScouterPlugin plugin;\n\tprivate final JPanel worldListPanel;\n\tprivate final JLabel statusLabel;\n\tprivate final JLabel roleLabel;\n\tprivate final JLabel connectionIndicator;\n\tprivate final JLabel[] headerLabels \u003d new JLabel[4];\n\n\tprivate SortColumn sortColumn \u003d SortColumn.WORLD;\n\tprivate boolean sortAscending \u003d true;\n\n\tpublic CrabScouterPanel(CrabScouterPlugin plugin)\n\t{\n\t\tsuper(false);\n\t\tthis.plugin \u003d plugin;\n\n\t\tsetLayout(new BorderLayout());\n\t\tsetBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tsetBorder(new EmptyBorder(10, 10, 10, 10));\n\n\t\tJPanel headerPanel \u003d new JPanel(new BorderLayout());\n\t\theaderPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\theaderPanel.setBorder(new EmptyBorder(0, 0, 10, 0));\n\n\t\tJLabel titleLabel \u003d new JLabel(\"Crab Scouter\");\n\t\ttitleLabel.setFont(FontManager.getRunescapeBoldFont());\n\t\ttitleLabel.setForeground(Color.WHITE);\n\n\t\tconnectionIndicator \u003d new JLabel(\"\");\n\t\tconnectionIndicator.setForeground(Color.RED);\n\t\tconnectionIndicator.setFont(FontManager.getRunescapeBoldFont());\n\n\t\tJPanel titleRow \u003d new JPanel(new BorderLayout());\n\t\ttitleRow.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\ttitleRow.setBorder(new EmptyBorder(0, 0, 8, 0));\n\t\ttitleRow.add(titleLabel, BorderLayout.WEST);\n\t\ttitleRow.add(connectionIndicator, BorderLayout.EAST);\n\n\t\theaderPanel.add(titleRow, BorderLayout.NORTH);\n\n\t\tJPanel columnHeaders \u003d createHeaderRow();\n\t\theaderPanel.add(columnHeaders, BorderLayout.SOUTH);\n\n\t\tadd(headerPanel, BorderLayout.NORTH);\n\n\t\tworldListPanel \u003d new JPanel();\n\t\tworldListPanel.setLayout(new BoxLayout(worldListPanel, BoxLayout.Y_AXIS));\n\t\tworldListPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJScrollPane scrollPane \u003d new JScrollPane(worldListPanel);\n\t\tscrollPane.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tscrollPane.setBorder(BorderFactory.createEmptyBorder());\n\t\tscrollPane.getVerticalScrollBar().setPreferredSize(new Dimension(8, 0));\n\n\t\tadd(scrollPane, BorderLayout.CENTER);\n\n\t\tJPanel footerPanel \u003d new JPanel(new BorderLayout());\n\t\tfooterPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tfooterPanel.setBorder(new EmptyBorder(10, 0, 0, 0));\n\n\t\tstatusLabel \u003d new JLabel(\"Connecting...\");\n\t\tstatusLabel.setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n\t\tstatusLabel.setFont(FontManager.getRunescapeSmallFont());\n\t\tfooterPanel.add(statusLabel, BorderLayout.WEST);\n\n\t\troleLabel \u003d new JLabel(\"\");\n\t\troleLabel.setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n\t\troleLabel.setFont(FontManager.getRunescapeSmallFont());\n\t\tfooterPanel.add(roleLabel, BorderLayout.SOUTH);\n\n\t\tadd(footerPanel, BorderLayout.SOUTH);\n\n\t\tupdate();\n\t}\n\n\tprivate JPanel createHeaderRow()\n\t{\n\t\tJPanel row \u003d new JPanel(new GridLayout(1, 4, 5, 1));\n\t\trow.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\trow.setBorder(new EmptyBorder(5, 5, 5, 5));\n\n\t\theaderLabels[0] \u003d createSortableHeaderLabel(\"World\", SortColumn.WORLD);\n\t\theaderLabels[1] \u003d createSortableHeaderLabel(\"Chunk\", SortColumn.CHUNK);\n\t\theaderLabels[2] \u003d createSortableHeaderLabel(\"HP\", SortColumn.HEALTH);\n\t\theaderLabels[3] \u003d createSortableHeaderLabel(\"#\", SortColumn.PLAYERS);\n\n\t\tfor (JLabel label : headerLabels)\n\t\t{\n\t\t\trow.add(label);\n\t\t}\n\n\t\tupdateHeaderLabels();\n\t\treturn row;\n\t}\n\n\tprivate JLabel createSortableHeaderLabel(String text, SortColumn column)\n\t{\n\t\tJLabel label \u003d new JLabel(text, SwingConstants.CENTER);\n\t\tlabel.setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n\t\tlabel.setFont(FontManager.getRunescapeSmallFont());\n\t\tlabel.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));\n\t\tlabel.putClientProperty(\"column\", column);\n\t\tlabel.putClientProperty(\"baseText\", text);\n\n\t\tlabel.addMouseListener(new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mouseClicked(MouseEvent e)\n\t\t\t{\n\t\t\t\tonHeaderClick(column);\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseEntered(MouseEvent e)\n\t\t\t{\n\t\t\t\tlabel.setForeground(Color.WHITE);\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseExited(MouseEvent e)\n\t\t\t{\n\t\t\t\tlabel.setForeground(column \u003d\u003d sortColumn ? Color.WHITE : ColorScheme.LIGHT_GRAY_COLOR);\n\t\t\t}\n\t\t});\n\n\t\treturn label;\n\t}\n\n\tprivate void onHeaderClick(SortColumn column)\n\t{\n\t\tif (sortColumn \u003d\u003d column)\n\t\t{\n\t\t\tsortAscending \u003d !sortAscending;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsortColumn \u003d column;\n\t\t\tsortAscending \u003d true;\n\t\t}\n\t\tupdateHeaderLabels();\n\t\tupdate();\n\t}\n\n\tprivate void updateHeaderLabels()\n\t{\n\t\tString[] baseTexts \u003d {\"World\", \"Chunk\", \"HP\", \"#\"};\n\t\tSortColumn[] columns \u003d {SortColumn.WORLD, SortColumn.CHUNK, SortColumn.HEALTH, SortColumn.PLAYERS};\n\n\t\tfor (int i \u003d 0; i \u003c headerLabels.length; i++)\n\t\t{\n\t\t\tString text \u003d baseTexts[i];\n\t\t\tif (columns[i] \u003d\u003d sortColumn)\n\t\t\t{\n\t\t\t\ttext +\u003d sortAscending ? \" \" : \" \";\n\t\t\t\theaderLabels[i].setForeground(Color.WHITE);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\theaderLabels[i].setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n\t\t\t}\n\t\t\theaderLabels[i].setText(text);\n\t\t}\n\t}\n\n\tprivate List\u003cWorldData\u003e getSortedWorlds(List\u003cWorldData\u003e worlds)\n\t{\n\t\tList\u003cWorldData\u003e sorted \u003d new ArrayList\u003c\u003e();\n\t\tfor (WorldData data : worlds)\n\t\t{\n\t\t\tif (data.isFresh())\n\t\t\t{\n\t\t\t\tsorted.add(data);\n\t\t\t}\n\t\t}\n\n\t\tComparator\u003cWorldData\u003e comparator;\n\t\tswitch (sortColumn)\n\t\t{\n\t\t\tcase CHUNK:\n\t\t\t\tcomparator \u003d Comparator.comparing(WorldData::getChunkName);\n\t\t\t\tbreak;\n\t\t\tcase HEALTH:\n\t\t\t\tcomparator \u003d Comparator.comparingInt(WorldData::getHealth);\n\t\t\t\tbreak;\n\t\t\tcase PLAYERS:\n\t\t\t\tcomparator \u003d Comparator.comparingInt(WorldData::getTotalPlayers);\n\t\t\t\tbreak;\n\t\t\tcase WORLD:\n\t\t\tdefault:\n\t\t\t\tcomparator \u003d Comparator.comparingInt(WorldData::getWorld);\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (!sortAscending)\n\t\t{\n\t\t\tcomparator \u003d comparator.reversed();\n\t\t}\n\n\t\tsorted.sort(comparator);\n\t\treturn sorted;\n\t}\n\n\tpublic void update()\n\t{\n\t\tworldListPanel.removeAll();\n\n\t\tboolean connected \u003d plugin.isConnected();\n\t\tconnectionIndicator.setForeground(connected ? Color.GREEN : Color.RED);\n\t\tconnectionIndicator.setToolTipText(connected ? \"Connected\" : \"Disconnected\");\n\n\t\tList\u003cWorldData\u003e worlds \u003d plugin.getWorldDataList();\n\t\tList\u003cWorldData\u003e sortedWorlds \u003d getSortedWorlds(worlds);\n\n\t\tif (worlds.isEmpty())\n\t\t{\n\t\t\tJLabel emptyLabel \u003d new JLabel(\"No crab data available\");\n\t\t\temptyLabel.setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n\t\t\temptyLabel.setAlignmentX(CENTER_ALIGNMENT);\n\t\t\tworldListPanel.add(Box.createVerticalGlue());\n\t\t\tworldListPanel.add(emptyLabel);\n\t\t\tworldListPanel.add(Box.createVerticalGlue());\n\t\t}\n\t\telse if (sortedWorlds.isEmpty())\n\t\t{\n\t\t\tJLabel staleLabel \u003d new JLabel(\"All data stale\");\n\t\t\tstaleLabel.setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n\t\t\tstaleLabel.setAlignmentX(CENTER_ALIGNMENT);\n\t\t\tworldListPanel.add(Box.createVerticalGlue());\n\t\t\tworldListPanel.add(staleLabel);\n\t\t\tworldListPanel.add(Box.createVerticalGlue());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor (WorldData data : sortedWorlds)\n\t\t\t{\n\t\t\t\tworldListPanel.add(createWorldRow(data));\n\t\t\t}\n\t\t}\n\n\t\tint scoutCount \u003d worlds.size();\n\t\tStringBuilder status \u003d new StringBuilder();\n\t\tif (scoutCount \u003d\u003d 0)\n\t\t{\n\t\t\tstatus.append(\"No worlds are reporting data\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tstatus.append(scoutCount)\n\t\t\t\t.append(scoutCount \u003d\u003d 1 ? \" world is\" : \" worlds are\")\n\t\t\t\t.append(\" reporting data\");\n\t\t}\n\t\tstatusLabel.setText(status.toString());\n\t\troleLabel.setText(plugin.isReporter() ? \"You are reporting for your world.\" : \"\");\t\n\n\t\trevalidate();\n\t\trepaint();\n\t}\n\n\tprivate JPanel createWorldRow(WorldData data)\n\t{\n\t\tJPanel row \u003d new JPanel(new GridLayout(1, 4, 5, 0));\n\t\trow.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\trow.setBorder(new EmptyBorder(4, 5, 4, 5));\n\t\trow.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));\n\t\trow.setMaximumSize(new Dimension(Integer.MAX_VALUE, 24));\n\n\t\tJLabel worldLabel \u003d new JLabel(String.valueOf(data.getWorld()), SwingConstants.CENTER);\n\t\tworldLabel.setForeground(Color.WHITE);\n\n\t\tJLabel chunkLabel \u003d new JLabel(data.getChunkName(), SwingConstants.CENTER);\n\t\tchunkLabel.setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n\n\t\tJLabel healthLabel \u003d new JLabel(data.getHealth() + \"%\", SwingConstants.CENTER);\n\t\thealthLabel.setForeground(getHealthColor(data.getHealth()));\n\n\t\tString playerText \u003d data.getAttackingPlayers() + \"/\" + data.getTotalPlayers();\n\t\tJLabel playersLabel \u003d new JLabel(playerText, SwingConstants.CENTER);\n\t\tplayersLabel.setForeground(getPlayerCountColor(data.getTotalPlayers()));\n\t\tplayersLabel.setToolTipText(data.getAttackingPlayers() + \" attacking, \" + data.getTotalPlayers() + \" total\");\n\n\t\trow.add(worldLabel);\n\t\trow.add(chunkLabel);\n\t\trow.add(healthLabel);\n\t\trow.add(playersLabel);\n\n\t\trow.addMouseListener(new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mouseClicked(MouseEvent e)\n\t\t\t{\n\t\t\t\tif (e.getClickCount() \u003d\u003d 2)\n\t\t\t\t{\n\t\t\t\t\tplugin.hopToWorld(data.getWorld());\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseEntered(MouseEvent e)\n\t\t\t{\n\t\t\t\trow.setBackground(ColorScheme.DARKER_GRAY_HOVER_COLOR);\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseExited(MouseEvent e)\n\t\t\t{\n\t\t\t\trow.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\t\t}\n\t\t});\n\n\t\treturn row;\n\t}\n\n\tprivate Color getHealthColor(int health)\n\t{\n\t\tif (health \u003e 66)\n\t\t{\n\t\t\treturn Color.GREEN;\n\t\t}\n\t\telse if (health \u003e 33)\n\t\t{\n\t\t\treturn Color.YELLOW;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn Color.RED;\n\t\t}\n\t}\n\n\tprivate Color getPlayerCountColor(int count)\n\t{\n\t\tif (count \u003c\u003d 5)\n\t\t{\n\t\t\treturn Color.GREEN;\n\t\t}\n\t\telse if (count \u003c\u003d 15)\n\t\t{\n\t\t\treturn Color.YELLOW;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn Color.ORANGE;\n\t\t}\n\t}\n}\n","filePath":"src/main/java/com/crabscouter/CrabScouterPanel.java"},{"fileName":"CrabScouterPluginTest.java","content":"package com.crabscouter;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class CrabScouterPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(CrabScouterPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src/test/java/com/crabscouter/CrabScouterPluginTest.java"}]},{"commit":"1dfb5c701a6ef11f77101b9a8d6edc17a6025269","repository":"https://github.com/QGoh/binding-necklace-reminder.git","internalName":"binding-necklace-reminder","files":[{"fileName":"BindingNecklaceReminderPlugin.java","content":"package com.bindingnecklacereminder;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.ItemContainer;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.ItemContainerChanged;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.api.gameval.InventoryID;\nimport net.runelite.api.gameval.ItemID;\nimport net.runelite.api.gameval.VarPlayerID;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.Text;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Binding Necklace Reminder\"\n)\npublic class BindingNecklaceReminderPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate BindingNecklaceReminderOverlay overlay;\n\n\t@Inject\n\tprivate BindingNecklaceReminderConfig config;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tif (client.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tclientThread.invokeLater(this::checkCharge);\n\t\t}\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(overlay);\n\t}\n\n\t@Subscribe\n\tprivate void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif (client.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tclientThread.invokeLater(this::checkCharge);\n\t\t}\n\t}\n\n\t@Subscribe\n\tprivate void onItemContainerChanged(ItemContainerChanged event)\n\t{\n\t\tif (event.getContainerId() !\u003d InventoryID.WORN \u0026\u0026 event.getContainerId() !\u003d InventoryID.INV)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tcheckCharge();\n\t}\n\n\t@Subscribe\n\tprivate void onVarbitChanged(VarbitChanged event)\n\t{\n\t\tif (event.getVarpId() \u003d\u003d VarPlayerID.NECKLACE_OF_BINDING)\n\t\t{\n\t\t\tsetCharge(event.getValue());\n\t\t\tcheckCharge();\n\t\t}\n\t}\n\n\t@Subscribe\n\tprivate void onChatMessage(ChatMessage event)\n\t{\n\t\tString message \u003d Text.removeTags(event.getMessage());\n\t\tif (message.contains(\"Your Binding necklace has disintegrated.\"))\n\t\t{\n\t\t\tsetCharge(16);\n\t\t}\n\t}\n\n\tprivate void setCharge(int value)\n\t{\n\t\tconfigManager.setRSProfileConfiguration(BindingNecklaceReminderConfig.GROUP, \"bindingNecklace\", value);\n\t}\n\n\tpublic int getCharge()\n\t{\n\t\tInteger charge \u003d configManager.getRSProfileConfiguration(BindingNecklaceReminderConfig.GROUP, \"bindingNecklace\", Integer.class);\n\t\treturn charge \u003d\u003d null ? 0 : charge;\n\t}\n\n\tprivate void checkCharge()\n\t{\n\t\tfinal ItemContainer equipment \u003d client.getItemContainer(InventoryID.WORN);\n\t\tfinal ItemContainer inventory \u003d client.getItemContainer(InventoryID.INV);\n\t\tif ((equipment !\u003d null \u0026\u0026 equipment.contains(ItemID.MAGIC_EMERALD_NECKLACE)) ||\n\t\t\t(inventory !\u003d null \u0026\u0026 inventory.contains(ItemID.MAGIC_EMERALD_NECKLACE)))\n\t\t{\n\t\t\tint charge \u003d getCharge();\n\n\t\t\tif (charge \u003c\u003d config.chargeThreshold())\n\t\t\t{\n\t\t\t\toverlayManager.add(overlay);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\toverlayManager.remove(overlay);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\toverlayManager.remove(overlay);\n\t\t}\n\t}\n\n\t@Provides\n\tBindingNecklaceReminderConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(BindingNecklaceReminderConfig.class);\n\t}\n}\n","filePath":"src/main/java/com/bindingnecklacereminder/BindingNecklaceReminderPlugin.java"},{"fileName":"BindingNecklaceReminderConfig.java","content":"package com.bindingnecklacereminder;\n\nimport java.awt.Color;\nimport java.awt.Font;\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.client.config.Alpha;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.Range;\nimport net.runelite.client.ui.FontManager;\n\n@ConfigGroup(BindingNecklaceReminderConfig.GROUP)\npublic interface BindingNecklaceReminderConfig extends Config\n{\n\tString GROUP \u003d \"bindingNecklaceReminder\";\n\n\t@Range(\n\t\tmax \u003d 16\n\t)\n\t@ConfigItem(\n\t\tkeyName \u003d \"chargeThreshold\",\n\t\tname \u003d \"Charge Threshold\",\n\t\tdescription \u003d \"Draw overlay when binding necklace charges are at or below this value (0 to disable)\"\n\t)\n\tdefault int chargeThreshold()\n\t{\n\t\treturn 4;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"overlayFont\",\n\t\tname \u003d \"Overlay Font\",\n\t\tdescription \u003d \"Set the font for the text drawn in the overlay\"\n\t)\n\tdefault Fonts overlayFont()\n\t{\n\t\treturn Fonts.REGULAR;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"overlayColour\",\n\t\tname \u003d \"Overlay Colour\",\n\t\tdescription \u003d \"Set the colour for the overlay background\"\n\t)\n\tdefault Color overlayColour()\n\t{\n\t\treturn new Color(255, 0, 0, 150);\n\t}\n\n\t@Getter\n\t@RequiredArgsConstructor\n\tenum Fonts\n\t{\n\t\tSMALL(FontManager.getRunescapeSmallFont()),\n\t\tREGULAR(FontManager.getRunescapeFont()),\n\t\tBOLD(FontManager.getRunescapeBoldFont());\n\n\t\tprivate final Font font;\n\t}\n}\n","filePath":"src/main/java/com/bindingnecklacereminder/BindingNecklaceReminderConfig.java"},{"fileName":"BindingNecklaceReminderOverlay.java","content":"package com.bindingnecklacereminder;\n\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.TitleComponent;\n\npublic class BindingNecklaceReminderOverlay extends OverlayPanel\n{\n\tprivate final BindingNecklaceReminderPlugin plugin;\n\tprivate final BindingNecklaceReminderConfig config;\n\n\t@Inject\n\tprivate BindingNecklaceReminderOverlay(Client client, BindingNecklaceReminderPlugin plugin, BindingNecklaceReminderConfig config)\n\t{\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics2D)\n\t{\n\t\tpanelComponent.getChildren().clear();\n\t\tpanelComponent.getChildren().add(\n\t\t\tTitleComponent.builder()\n\t\t\t.text(\"Binding Necklace\")\n\t\t\t.color(Color.WHITE)\n\t\t\t.build()\n\t\t);\n\t\tpanelComponent.getChildren().add(\n\t\t\tTitleComponent.builder()\n\t\t\t.text(\"Charges: \" + plugin.getCharge())\n\t\t\t.color(Color.WHITE)\n\t\t\t.build()\n\t\t);\n\t\tpanelComponent.setBackgroundColor(config.overlayColour());\n\t\tgraphics2D.setFont(config.overlayFont().getFont());\n\t\tsetPosition(OverlayPosition.ABOVE_CHATBOX_RIGHT);\n\n\t\treturn panelComponent.render(graphics2D);\n\t}\n}\n","filePath":"src/main/java/com/bindingnecklacereminder/BindingNecklaceReminderOverlay.java"},{"fileName":"BindingNecklaceReminderTest.java","content":"package com.bindingnecklacereminder;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class BindingNecklaceReminderTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(BindingNecklaceReminderPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src/test/java/com/bindingnecklacereminder/BindingNecklaceReminderTest.java"}]},{"commit":"3106f9d343e4e5f0231c23a08cd4d1324b964566","repository":"https://github.com/Blended420/BankValue.git","internalName":"bank-value-overlay","files":[{"fileName":"BankedItems.java","content":"package com.blended420.bankvalue;\n\nimport lombok.Value;\n\n@Value\npublic class BankedItems{\n\n    private long geValue;\n    private long haValue;\n\n}\n","filePath":"src\\main\\java\\com\\blended420\\bankvalue\\BankedItems.java"},{"fileName":"BankValueConfig.java","content":"package com.blended420.bankvalue;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"bankValue\")\npublic interface BankValueConfig extends Config\n{\n\t@ConfigItem(\n\t\tkeyName \u003d \"showPriceSuffix\",\n\t\tname \u003d \"Show Suffix\",\n\t\tdescription \u003d \"Adds a K/M/B suffix to Bank Value\"\n\t)\n\tdefault boolean showPriceSuffix()\n\t{\n\t\treturn true;\n\t}\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showHaValue\",\n\t\t\tname \u003d \"Show High Alchemy Value\",\n\t\t\tdescription \u003d \"Adds Ha Value of bank to the overlay\"\n\t)\n\tdefault boolean showHaValue()\n\t{\n\t\treturn true;\n\t}\n}\n","filePath":"src\\main\\java\\com\\blended420\\bankvalue\\BankValueConfig.java"},{"fileName":"BankValueOverlay.java","content":"package com.blended420.bankvalue;\n\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\nimport net.runelite.client.ui.overlay.components.LineComponent;\nimport net.runelite.client.ui.overlay.components.PanelComponent;\nimport net.runelite.client.ui.overlay.components.TitleComponent;\nimport net.runelite.client.util.QuantityFormatter;\n\nimport javax.inject.Inject;\nimport java.awt.*;\n\npublic class BankValueOverlay extends Overlay {\n    private final BankValueConfig config;\n    private long haValue;\n    private long geValue;\n    private final PanelComponent panelComponent \u003d new PanelComponent();\n\n    @Inject\n    public BankValueOverlay(BankValueConfig config){\n        this.config \u003d config;\n        setPosition(OverlayPosition.TOP_LEFT);\n        setPriority(OverlayPriority.HIGH);\n        setLayer(OverlayLayer.ABOVE_SCENE);\n    }\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        panelComponent.getChildren().clear();\n        String overlayTitle \u003d \"Bank Info:\";\n        String geValueTxt \u003d   formatNumber(geValue);\n        String haValueTxt \u003d formatNumber(haValue);\n        panelComponent.getChildren().add(TitleComponent.builder()\n                .text(overlayTitle)\n                .color(Color.GREEN)\n                .build());\n\n        panelComponent.setPreferredSize(new Dimension(\n                geValue \u003d\u003d0 ? 90: graphics.getFontMetrics().stringWidth(geValueTxt) + 60,\n                0));\n            panelComponent.getChildren().add(LineComponent.builder()\n                    .left(\"GE:\")\n                    .right(geValueTxt)\n                    .build());\n            if(config.showHaValue()) {\n                panelComponent.getChildren().add(LineComponent.builder()\n                        .left(\"HA:\")\n                        .right(haValueTxt)\n                        .build());\n            }\n\n        return panelComponent.render(graphics);\n    }\n\n    public void updateInventoryValue(long geValue,long haValue) {\n        this.geValue \u003d geValue;\n        this.haValue \u003dhaValue;\n    }\n\n    private String formatNumber(long num){\n\n            return config.showPriceSuffix() ? QuantityFormatter.quantityToStackSize(num) : QuantityFormatter.formatNumber(num);\n\n    }\n}\n","filePath":"src\\main\\java\\com\\blended420\\bankvalue\\BankValueOverlay.java"},{"fileName":"BankValuePlugin.java","content":"package com.blended420.bankvalue;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.*;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.chat.ChatCommandManager;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\nimport java.io.IOException;\n\n@Slf4j\n@PluginDescriptor(\n\t\tname \u003d \"Bank Value Overlay\",\n\t\tdescription \u003d \"Adds an overlay showing your overall bank value\"\n)\npublic class BankValuePlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\t@Inject\n\tClientThread clientThread;\n\t@Inject\n\tprivate ItemManager itemManager;\n\t@Inject\n\tprivate BankValueConfig config;\n\t@Inject\n\tprivate ChatCommandManager commandManager;\n\t@Inject\n\tprivate BankValueOverlay overlay;\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\toverlayManager.add(overlay);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(overlay);\n\t}\n\n\t@Subscribe\n\tpublic void onItemContainerChanged(ItemContainerChanged e){\n\t\tif (e.getItemContainer() \u003d\u003d client.getItemContainer(InventoryID.BANK)) {\n\t\t\tfinal Item[] items \u003d client.getItemContainer(InventoryID.BANK).getItems();\n\t\t\tupdateTotalBankValue(items);\n\t\t}\n\t}\n\n\tprivate void updateTotalBankValue(Item[] items){\n\t\tfinal BankedItems prices \u003d calc(items);\n\t\toverlay.updateInventoryValue( prices.getGeValue(), prices.getHaValue());\n\t}\n\n\tBankedItems calc(Item[] items) {\n\t\tlong geTotal \u003d 0;\n\t\tlong haTotal \u003d 0;\n\t\tfor (Item item : client.getItemContainer(InventoryID.BANK).getItems()) {\n\t\t\tfinal boolean isPlaceholder \u003d itemManager.getItemComposition(item.getId()).getPlaceholderTemplateId() !\u003d -1;\n\n\t\t\tif (item.getId() !\u003d ItemID.BANK_FILLER || !isPlaceholder) {\n\t\t\t\tString name \u003d itemManager.getItemComposition(item.getId()).getName();\n\t\t\t\tfinal int qty \u003d item.getQuantity();\n\t\t\t\tgeTotal +\u003d itemManager.getItemPrice(item.getId()) * qty;\n\t\t\t\thaTotal +\u003d getHaValue(item.getId()) * qty;\n\t\t\t}\n\t\t}\n\t\treturn new BankedItems(geTotal,haTotal);\n\t}\n\n\tprivate int getHaValue(int itemId)\n\t{\n\t\tswitch (itemId)\n\t\t{\n\t\t\tcase ItemID.COINS_995:\n\t\t\t\treturn 1;\n\t\t\tcase ItemID.PLATINUM_TOKEN:\n\t\t\t\treturn 1000;\n\t\t\tdefault:\n\t\t\t\treturn itemManager.getItemComposition(itemId).getHaPrice();\n\t\t}\n\t}\n\n\n\n\n\n\t@Provides\n\tBankValueConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(BankValueConfig.class);\n\t}\n\n\n\t}\n","filePath":"src\\main\\java\\com\\blended420\\bankvalue\\BankValuePlugin.java"},{"fileName":"BankValuePluginTest.java","content":"package com.blended420.bankvalue;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class BankValuePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(BankValuePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\blended420\\bankvalue\\BankValuePluginTest.java"}]},{"commit":"08f5bd91c107ae04deed115948059bdb04401186","repository":"https://github.com/lilbouv/doom-of-mokhaiotl-colorblind-helper.git","internalName":"doom-of-mokhaiotl-colorblind-helper","files":[{"fileName":"DoomColorBlindConfig.java","content":"package com.doomcb;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"doomcolorblind\")\npublic interface DoomColorBlindConfig extends Config\n{\n\tenum ProjectileTheme\n\t{\n\t\tNONE,\n\t\tINFERNO,\n\t\tTOA,\n\t\tOLM,\n\t\tLEVIATHAN\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"projectileTheme\",\n\t\t\tname \u003d \"Projectile Theme\",\n\t\t\tdescription \u003d \"Choose visual style for replacing Doom projectiles\"\n\t)\n\tdefault ProjectileTheme projectileTheme()\n\t{\n\t\treturn ProjectileTheme.TOA;\n\t}\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"replaceMelee\",\n\t\t\tname \u003d \"Replace Melee Projectiles\",\n\t\t\tdescription \u003d \"Toggle whether melee projectile animations are replaced (Inferno doesn\u0027t regardless)\"\n\t)\n\tdefault boolean replaceMelee()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tname \u003d \"ToA Themed Boulder\",\n\t\t\tkeyName \u003d \"themedRock\",\n\t\t\tdescription \u003d \"Replace boulders with Zebak alternatives\")\n\tdefault boolean toathemedRock() {\n\t\treturn false;\n\t}\n\n}\n","filePath":"src\\main\\java\\com\\doomcb\\DoomColorBlindConfig.java"},{"fileName":"DoomColorBlindPlugin.java","content":"package com.doomcb;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Projectile;\nimport net.runelite.api.events.ProjectileMoved;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\n\n@Slf4j\n@PluginDescriptor(\n\t\tname \u003d \"Doom Colorblind Helper\",\n\t\tdescription \u003d \"Replaces Doom projectiles with Inferno blob colors for better visibility\",\n\t\ttags \u003d {\"doom\", \"colorblind\", \"projectile\"}\n)\npublic class DoomColorBlindPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\t@Inject\n\tprivate DoomColorBlindConfig config;\n\n\t@Provides\n\tDoomColorBlindConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(DoomColorBlindConfig.class);\n\t}\n\n\t@Subscribe\n\tpublic void onProjectileMoved(ProjectileMoved event)\n\t{\n\t\tProjectile proj \u003d event.getProjectile();\n\t\tint id \u003d proj.getId();\n\n\t\tint replacementId \u003d -1;\n\n\t\tfinal int RANGE_ROCK_PROJECTILE \u003d 3384;\n\t\tfinal int MAGE_ROCK_PROJECTILE \u003d 3385;\n\t\tfinal int ZEBAK_RANGE_PROJECTILE \u003d 2178;\n\t\tfinal int ZEBAK_MAGE_PROJECTILE \u003d 2176;\n\n\t\tswitch (id)\n\t\t{\n\n\t\t\t//\n\t\t\tcase 3380: // Doom range\n\t\t\t\tswitch(config.projectileTheme())\n\t\t\t\t{\n\t\t\t\t\tcase TOA:\n\t\t\t\t\t\treplacementId \u003d 2241;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase INFERNO:\n\t\t\t\t\t\treplacementId \u003d 1378;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase OLM:\n\t\t\t\t\t\treplacementId \u003d 1343;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase LEVIATHAN:\n\t\t\t\t\t\treplacementId \u003d 2487;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 3379: // Doom magic\n\t\t\t\tswitch(config.projectileTheme())\n\t\t\t\t{\n\t\t\t\t\tcase TOA:\n\t\t\t\t\t\treplacementId \u003d 2224;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase INFERNO:\n\t\t\t\t\t\treplacementId \u003d 1380;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase OLM:\n\t\t\t\t\t\treplacementId \u003d 1341;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase LEVIATHAN:\n\t\t\t\t\t\treplacementId \u003d 2489;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 3378: // Doom melee\n\t\t\t\tif (!config.replaceMelee())\n\t\t\t\t\tbreak;\n\t\t\t\tswitch(config.projectileTheme())\n\t\t\t\t{\n\t\t\t\t\tcase TOA:\n\t\t\t\t\t\treplacementId \u003d 2204;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase OLM:\n\t\t\t\t\t\treplacementId \u003d 1345;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase LEVIATHAN:\n\t\t\t\t\t\treplacementId \u003d 2488;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t// No Inferno Melee\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase RANGE_ROCK_PROJECTILE:\n\t\t\t\tif (config.toathemedRock()) {\n\t\t\t\t\treplacementId \u003d ZEBAK_RANGE_PROJECTILE;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase MAGE_ROCK_PROJECTILE:\n\t\t\t\tif (config.toathemedRock()) {\n\t\t\t\t\treplacementId \u003d ZEBAK_MAGE_PROJECTILE;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (replacementId \u003d\u003d -1)\n\t\t\treturn;\n\n\t\tlog.debug(\"Replacing Doom projectile ID {} with {}\", id, replacementId);\n\n\t\tProjectile replacement \u003d client.createProjectile(\n\t\t\t\treplacementId,\n\t\t\t\tproj.getSourcePoint(),\n\t\t\t\tproj.getStartHeight(), proj.getSourceActor(),\n\t\t\t\tproj.getTargetPoint(),\n\t\t\t\tproj.getEndHeight(), proj.getTargetActor(),\n\t\t\t\tproj.getStartCycle(), proj.getEndCycle(),\n\t\t\t\tproj.getSlope(), proj.getStartPos()\n\t\t);\n\n\t\tclient.getProjectiles().addLast(replacement);\n\t\tproj.setEndCycle(0); // Hide original\n\t}\n}\n","filePath":"src\\main\\java\\com\\doomcb\\DoomColorBlindPlugin.java"},{"fileName":"DoomColorBlindPluginTest.java","content":"package com.doomcb;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class DoomColorBlindPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(DoomColorBlindPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\doomcb\\DoomColorBlindPluginTest.java"}]},{"commit":"909f38c13025dc79fda03716834223b0d38d9ceb","repository":"https://github.com/adnapPanda/pyramid-plunder-counter.git","internalName":"pyramid-plunder-counter","files":[{"fileName":"PyramidPlunderCounterConfig.java","content":"package com.pyramidplundercounter;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"PyramidPlunderCountConfig\")\npublic interface PyramidPlunderCounterConfig extends Config\n{\n\t@ConfigItem(\n\t\t\tposition \u003d 0,\n\t\t\tkeyName \u003d \"showChestsLooted\",\n\t\t\tname \u003d \"Chests Looted\",\n\t\t\tdescription \u003d \"Displays the number of chests looted\"\n\t)\n\tdefault boolean showChestsLooted() {\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"showSarcoLooted\",\n\t\t\tname \u003d \"Sarcophagus Looted\",\n\t\t\tdescription \u003d \"Displays the number of sarcophagus looted\"\n\t)\n\tdefault boolean showSarcoLooted() {\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d \"showChestsSinceLastSceptre\",\n\t\t\tname \u003d \"Chests since last Sceptre\",\n\t\t\tdescription \u003d \"Displays the number of chests looted since receiving the latest sceptre\"\n\t)\n\tdefault boolean showChestsSinceLastSceptre() {\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 3,\n\t\t\tkeyName \u003d \"showSarcoSinceLastSceptre\",\n\t\t\tname \u003d \"Sarcos since last Sceptre\",\n\t\t\tdescription \u003d \"Displays the number of sarcos looted since receiving the latest sceptre\"\n\t)\n\tdefault boolean showSarcosSinceLastSceptre() {\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 4,\n\t\t\tkeyName \u003d \"showChance\",\n\t\t\tname \u003d \"% Chance of having received at least one sceptre\",\n\t\t\tdescription \u003d \"Displays the percentage chance of having received at least one sceptre.\"\n\t)\n\tdefault boolean showChance() {\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 5,\n\t\t\tkeyName \u003d \"showPetChance\",\n\t\t\tname \u003d \"% Chance of having received pet\",\n\t\t\tdescription \u003d \"Displays the percentage chance of having received at least one pet.\"\n\t)\n\tdefault boolean showPetChance() {\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 6,\n\t\t\tkeyName \u003d \"saveData\",\n\t\t\tname \u003d \"Save your data\",\n\t\t\tdescription \u003d \"Save your data cross-sessions to keep track of it.\"\n\t)\n\n\tdefault boolean saveData() {\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 7,\n\t\t\tkeyName \u003d \"showResetTooltip\",\n\t\t\tname \u003d \"Show tooltip on how to reset your data\",\n\t\t\tdescription \u003d \"Shows a tooltip on how to reset your data.\"\n\t)\n\n\tdefault boolean showResetTooltip() {\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\com\\pyramidplundercounter\\PyramidPlunderCounterConfig.java"},{"fileName":"PyramidPlunderCounterData.java","content":"package com.pyramidplundercounter;\n\nimport com.google.gson.annotations.Expose;\nimport com.google.gson.annotations.SerializedName;\n\npublic class PyramidPlunderCounterData {\n\n    PyramidPlunderCounterData(int chestsLooted, int sarcoLooted, int chestSinceLastSceptre, int sarcoSinceLastSceptre, Double chanceOfBeingDry, Double petChanceOfBeingDry) {\n        this.chestsLooted \u003d chestsLooted;\n        this.sarcoLooted \u003d sarcoLooted;\n        this.chestSinceLastSceptre \u003d chestSinceLastSceptre;\n        this.sarcoSinceLastSceptre \u003d sarcoSinceLastSceptre;\n        this.chanceOfBeingDry \u003d chanceOfBeingDry;\n        this.petChanceOfBeingDry \u003d petChanceOfBeingDry;\n    }\n\n    PyramidPlunderCounterData() {\n        this.chestsLooted \u003d 0;\n        this.sarcoLooted \u003d 0;\n        this.chestSinceLastSceptre \u003d 0;\n        this.sarcoSinceLastSceptre \u003d 0;\n        this.chanceOfBeingDry \u003d 1.0;\n        this.petChanceOfBeingDry \u003d 1.0;\n    }\n\n    @Expose\n    @SerializedName(\"successful-chests\")\n    private final int chestsLooted;\n\n    @Expose\n    @SerializedName(\"successful-sarcophagi\")\n    private final int sarcoLooted;\n\n    @Expose\n    @SerializedName(\"chest-since-last-sceptre\")\n    private final int chestSinceLastSceptre;\n\n    @Expose\n    @SerializedName(\"sarco-since-last-sceptre\")\n    private final int sarcoSinceLastSceptre;\n\n    @Expose\n    @SerializedName(\"chance-of-being-dry\")\n    private final Double chanceOfBeingDry;\n\n    @Expose\n    @SerializedName(\"pet-chance-of-being-dry\")\n    private final Double petChanceOfBeingDry;\n\n    public int getChestsLooted() {\n        return chestsLooted;\n    }\n\n    public int getSarcoLooted() {\n        return sarcoLooted;\n    }\n\n    public int getChestSinceLastSceptre() {\n        return chestSinceLastSceptre;\n    }\n\n    public int getSarcoSinceLastSceptre() {\n        return sarcoSinceLastSceptre;\n    }\n\n    public Double getChanceOfBeingDry() {\n        return chanceOfBeingDry;\n    }\n\n    public Double getPetChanceOfBeingDry() {\n        return petChanceOfBeingDry;\n    }\n}\n","filePath":"src\\main\\java\\com\\pyramidplundercounter\\PyramidPlunderCounterData.java"},{"fileName":"PyramidPlunderCounterOverlay.java","content":"package com.pyramidplundercounter;\n\nimport net.runelite.api.Client;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.LayoutableRenderableEntity;\nimport net.runelite.client.ui.overlay.components.LineComponent;\n\nimport javax.inject.Inject;\nimport java.awt.*;\nimport java.util.List;\n\nimport static net.runelite.api.MenuAction.RUNELITE_OVERLAY;\n\nclass PyramidPlunderCounterOverlay extends OverlayPanel {\n\n    private Client client;\n    private PyramidPlunderCounterPlugin plugin;\n    private PyramidPlunderCounterConfig config;\n\n    @Inject\n    PyramidPlunderCounterOverlay(PyramidPlunderCounterPlugin plugin, Client client, PyramidPlunderCounterConfig config) {\n        super(plugin);\n        this.client \u003d client;\n        this.plugin \u003d plugin;\n        this.config \u003d config;\n\n        setPosition(OverlayPosition.TOP_LEFT);\n        addMenuEntry(RUNELITE_OVERLAY, \"Reset\", \"Chests Looted\");\n        addMenuEntry(RUNELITE_OVERLAY, \"Reset\", \"Sarcophagus Looted\");\n        addMenuEntry(RUNELITE_OVERLAY, \"Reset\", \"Chests since last sceptre\");\n        addMenuEntry(RUNELITE_OVERLAY, \"Reset\", \"Sarcos since last sceptre\");\n        addMenuEntry(RUNELITE_OVERLAY, \"Reset\", \"Sceptre Chance\");\n        addMenuEntry(RUNELITE_OVERLAY, \"Reset\", \"Pet Chance\");\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        if (plugin.isInPyramidPlunder()) {\n            List\u003cLayoutableRenderableEntity\u003e elems \u003d panelComponent.getChildren();\n            elems.clear();\n            panelComponent.setPreferredSize(new Dimension(200, 100));\n            if (config.showChestsLooted())\n                elems.add(LineComponent.builder()\n                        .left(\"Total Chests Looted:\")\n                        .right(String.format(\"%d\", plugin.chestLooted))\n                        .build());\n\n            if (config.showSarcoLooted())\n                elems.add(LineComponent.builder()\n                        .left(\"Total Sarcophagi Looted:\")\n                        .right(String.format(\"%d\", plugin.sarcoLooted))\n                        .build());\n\n            if (config.showChestsSinceLastSceptre())\n                elems.add(LineComponent.builder()\n                        .left(\"Chests Since Last Sceptre:\")\n                        .right(String.format(\"%d\", plugin.chestSinceLastSceptre))\n                        .build());\n\n            if (config.showSarcosSinceLastSceptre())\n                elems.add(LineComponent.builder()\n                        .left(\"Sarcos Since Last Sceptre:\")\n                        .right(String.format(\"%d\", plugin.sarcoSinceLastSceptre))\n                        .build());\n\n            if (config.showChance())\n                elems.add(LineComponent.builder()\n                        .left(\"% Chance of at least one Sceptre:\")\n                        .right(String.format(\"%f\", plugin.dryChance*100))\n                        .build());\n\n            if (config.showPetChance())\n                elems.add(LineComponent.builder()\n                        .left(\"% Chance of pet:\")\n                        .right(String.format(\"%f\", plugin.petDryChance*100))\n                        .build());\n\n            if (config.showResetTooltip())\n                panelComponent.getChildren().add(LineComponent.builder()\n                        .left(\"\\nShift right-click this box to reset specific totals.\")\n                        .build());\n        }\n        return super.render(graphics);\n    }\n}\n","filePath":"src\\main\\java\\com\\pyramidplundercounter\\PyramidPlunderCounterOverlay.java"},{"fileName":"PyramidPlunderCounterPlugin.java","content":"package com.pyramidplundercounter;\n\nimport com.google.gson.Gson;\nimport com.google.gson.JsonIOException;\nimport com.google.gson.JsonParseException;\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.*;\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.OverlayMenuClicked;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.ui.overlay.OverlayMenuEntry;\n\nimport java.io.*;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Objects;\n\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Pyramid Plunder Counter\"\n)\npublic class PyramidPlunderCounterPlugin extends Plugin\n{\n\tprivate static final int PYRAMID_PLUNDER_ROOM \u003d 2377;\n\tprivate static final int PYRAMID_PLUNDER_TIMER \u003d 2375;\n\t// Drop Chances - https://secure.runescape.com/m\u003dnews/poll-80-toa-changes--dmm-tweaks?oldschool\u003d1\n\t// Room 1 \u003d 1/4200\n\t// Room 2 \u003d 1/2800\n\t// Room 3 \u003d 1/1600\n\t// Room 4 \u003d 1/950\n\t// Room 5 \u003d 1/800\n\t// Room 6 \u003d 1/750\n\t// Room 7 \u003d 1/650\n\t// Room 8 \u003d 1/650\n\tprivate HashMap\u003cInteger, Double\u003e sceptreChance \u003d new HashMap\u003c\u003e();\n\tprivate HashMap\u003cInteger, Integer\u003e petBaseChance \u003d new HashMap\u003c\u003e();\n\tprivate static final int PYRAMID_PLUNDER_REGION \u003d 7749;\n\tstatic final String GRAND_GOLD_CHEST_TARGET \u003d \"\u003ccol\u003dffff\u003eGrand Gold Chest\";\n\tstatic final String SARCOPHAGUS_TARGET \u003d \"\u003ccol\u003dffff\u003eSarcophagus\";\n\tstatic final String SPEAR_TRAP \u003d \"\u003ccol\u003dffff\u003eSpeartrap\";\n\tint chestLooted \u003d 0, sarcoLooted \u003d 0, chestSinceLastSceptre \u003d 0, sarcoSinceLastSceptre \u003d 0;\n\tdouble totalChance \u003d 1;\n\tdouble dryChance \u003d 0;\n\tdouble totalPetChance \u003d 1;\n\tdouble petDryChance \u003d 0;\n\n\tboolean usingChestOrSarco \u003d false;\n\tboolean usingSpearTrap \u003d false;\n\tboolean swarmSpawned \u003d false;\n\n\tList\u003cActor\u003e spawnedNPC \u003d new ArrayList\u003c\u003e();\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate PyramidPlunderCounterConfig config;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate PyramidPlunderCounterOverlay overlay;\n\n\t@Inject\n\tprivate Gson GSON;\n\tpublic static File DATA_FOLDER;\n\tstatic {\n\t\tDATA_FOLDER \u003d new File(RuneLite.RUNELITE_DIR, \"pyramid-plunder-counter\");\n\t\tDATA_FOLDER.mkdirs();\n\t}\n\tboolean savedOutside \u003d false;\n\tboolean loadedSession \u003d false;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tif (client.getGameState().equals(GameState.LOGGED_IN)\n\t\t\t\u0026\u0026 client.getLocalPlayer().getName() !\u003d null) {\n\t\t\timportData();\n\t\t\tloadedSession \u003d true;\n\t\t}\n\n\t\toverlayManager.add(overlay);\n\t\tsceptreChance.put(1, 1.0/4200);\n\t\tsceptreChance.put(2, 1.0/2800);\n\t\tsceptreChance.put(3, 1.0/1600);\n\t\tsceptreChance.put(4, 1.0/950);\n\t\tsceptreChance.put(5, 1.0/800);\n\t\tsceptreChance.put(6, 1.0/750);\n\t\tsceptreChance.put(7, 1.0/650);\n\t\tsceptreChance.put(8, 1.0/650);\n\n\t\tpetBaseChance.put(1, 41355);\n\t\tpetBaseChance.put(2, 29540);\n\t\tpetBaseChance.put(3, 25847);\n\t\tpetBaseChance.put(4, 20678);\n\t\tpetBaseChance.put(5, 20678);\n\t\tpetBaseChance.put(6, 20678);\n\t\tpetBaseChance.put(7, 10339);\n\t\tpetBaseChance.put(8, 6893);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(overlay);\n\n\t\tString username \u003d client.getLocalPlayer().getName();\n\t\tif (username !\u003d null) exportData(new File(DATA_FOLDER, username + \".json\"));\n\t}\n\n\t@Provides\n\tPyramidPlunderCounterConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(PyramidPlunderCounterConfig.class);\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick gameTick)\n\t{\n\t\tif (!loadedSession \u0026\u0026 client.getGameState().equals(GameState.LOGGED_IN)) {\n\t\t\timportData();\n\t\t\tloadedSession \u003d true;\n\t\t}\n\t\tif (!savedOutside) {\n\t\t\tString username \u003d client.getLocalPlayer().getName();\n\t\t\tif (username !\u003d null) {\n\t\t\t\texportData(new File(DATA_FOLDER, username + \".json\"));\n\t\t\t\tsavedOutside \u003d true;\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onStatChanged(StatChanged statChanged)\n\t{\n\t\tif (isInPyramidPlunder()) {\n\t\t\tif (statChanged.getSkill() \u003d\u003d Skill.THIEVING) {\n\t\t\t\tif (usingSpearTrap) {\n\t\t\t\t\tusingSpearTrap \u003d false;\n\t\t\t\t} else if (usingChestOrSarco) {\n\t\t\t\t\tchestLooted +\u003d 1;\n\t\t\t\t\tchestSinceLastSceptre +\u003d 1;\n\t\t\t\t\tDouble chance \u003d sceptreChance.get(client.getVarbitValue(PYRAMID_PLUNDER_ROOM));\n\t\t\t\t\ttotalChance *\u003d (1-chance);\n\t\t\t\t\tdryChance \u003d 1-totalChance;\n\t\t\t\t\tint baseChanceModifier \u003d client.getRealSkillLevel(Skill.THIEVING) * 25;\n\t\t\t\t\tint realPetChance \u003d petBaseChance.get(client.getVarbitValue(PYRAMID_PLUNDER_ROOM)) - baseChanceModifier;\n\t\t\t\t\tdouble petChance \u003d 1.0D / realPetChance;\n\t\t\t\t\ttotalPetChance *\u003d (1-petChance);\n\t\t\t\t\tpetDryChance \u003d 1-totalPetChance;\n\n\t\t\t\t\tusingChestOrSarco \u003d false;\n\t\t\t\t\tsavedOutside \u003d false;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (usingChestOrSarco \u0026\u0026 statChanged.getSkill() \u003d\u003d Skill.STRENGTH) {\n\t\t\t\tsarcoLooted +\u003d 1;\n\t\t\t\tsarcoSinceLastSceptre +\u003d 1;\n\t\t\t\tDouble chance \u003d sceptreChance.get(client.getVarbitValue(PYRAMID_PLUNDER_ROOM));\n\t\t\t\ttotalChance *\u003d (1-chance);\n\t\t\t\tdryChance \u003d 1-totalChance;\n\t\t\t\tusingChestOrSarco \u003d false;\n\t\t\t\tsavedOutside \u003d false;\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOptionClicked(MenuOptionClicked menuOptionClicked)\n\t{\n\t\tif (isInPyramidPlunder()) {\n\t\t\tif (menuOptionClicked.getMenuTarget().equals(SPEAR_TRAP)) {\n\t\t\t\tusingSpearTrap \u003d true;\n\t\t\t}\n\t\t\telse if (menuOptionClicked.getMenuTarget().equals(GRAND_GOLD_CHEST_TARGET) || menuOptionClicked.getMenuTarget().equals(SARCOPHAGUS_TARGET)) {\n\t\t\t\tusingChestOrSarco \u003d true;\n\t\t\t} else if (!menuOptionClicked.getMenuAction().toString().equals(\"CC_OP\")) {\n\t\t\t\tusingChestOrSarco \u003d false;\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onNpcSpawned(NpcSpawned npcSpawned)\n\t{\n\t\tif (isInPyramidPlunder()) {\n\t\t\t// GRAND CHEST looting was unsuccessful if a scarab swarm spawns and targets you. You still get a chance at the sceptre\n\t\t\tif (usingChestOrSarco \u0026\u0026 npcSpawned.getNpc().getName().equals(\"Scarab Swarm\")) {\n\t\t\t\tspawnedNPC.add(npcSpawned.getActor());\n\t\t\t\tswarmSpawned \u003d true;\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onInteractingChanged(InteractingChanged interactingChanged)\n\t{\n\t\tif (isInPyramidPlunder()) {\n\t\t\tif (swarmSpawned \u0026\u0026 spawnedNPC.contains(interactingChanged.getSource()) \u0026\u0026 Objects.equals(interactingChanged.getTarget(), client.getLocalPlayer())) {\n\t\t\t\tswarmSpawned \u003d false;\n\t\t\t\tchestLooted +\u003d 1;\n\t\t\t\tchestSinceLastSceptre +\u003d 1;\n\t\t\t\tDouble chance \u003d sceptreChance.get(client.getVarbitValue(PYRAMID_PLUNDER_ROOM));\n\t\t\t\ttotalChance *\u003d (1-chance);\n\t\t\t\tdryChance \u003d 1-totalChance;\n\t\t\t\tint baseChanceModifier \u003d client.getRealSkillLevel(Skill.THIEVING) * 25;\n\t\t\t\tint realPetChance \u003d petBaseChance.get(client.getVarbitValue(PYRAMID_PLUNDER_ROOM)) - baseChanceModifier;\n\t\t\t\tdouble petChance \u003d 1.0D / realPetChance;\n\t\t\t\ttotalPetChance *\u003d (1-petChance);\n\t\t\t\tpetDryChance \u003d 1-totalPetChance;\n\t\t\t\tspawnedNPC.clear();\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic boolean isInPyramidPlunder()\n\t{\n\t\treturn client.getLocalPlayer() !\u003d null\n\t\t\t\t\u0026\u0026 PYRAMID_PLUNDER_REGION \u003d\u003d client.getLocalPlayer().getWorldLocation().getRegionID()\n\t\t\t\t\u0026\u0026 client.getVarbitValue(PYRAMID_PLUNDER_TIMER) \u003e 0;\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage chatMessage)\n\t{\n\t\t//Player received a sceptre\n\t\tif (chatMessage.getType().equals(ChatMessageType.MESBOX) \u0026\u0026 (chatMessage.getMessage().contains(\"You have found the Pharaoh\u0027s Sceptre.\") || chatMessage.getMessage().contains(\"You find a golden sceptre\")))\n\t\t{\n\t\t\tchestSinceLastSceptre \u003d 0;\n\t\t\tsarcoSinceLastSceptre \u003d 0;\n\t\t}\n\t}\n\n\tprivate void exportData(File file) {\n\t\tif (!config.saveData()) return;\n\n\t\tPyramidPlunderCounterData data \u003d new PyramidPlunderCounterData(\n\t\t\tchestLooted, sarcoLooted, chestSinceLastSceptre, sarcoSinceLastSceptre, totalChance, totalPetChance\n\t\t);\n\t\ttry (Writer writer \u003d new FileWriter(file)) {\n            GSON.toJson(data, PyramidPlunderCounterData.class, writer);\n\t\t} catch (IOException | JsonIOException e) {\n\t\t\tlog.error(\"Error while exporting Pyramid Plunder Counter data\", e);\n\t\t}\n\t}\n\n\tprivate void importData() {\n\t\tif (!config.saveData()) return;\n\n        DATA_FOLDER.mkdirs();\n\t\tString playerName \u003d client.getLocalPlayer().getName();\n        File data \u003d new File(DATA_FOLDER, playerName + \".json\");\n\n\t\tif (!data.exists()) {\n\t\t\tinitializeCounterDataFile(data);\n\t\t\treturn;\n\t\t}\n\n\t\ttry (Reader reader \u003d new FileReader(data)) {\n\t\t\tPyramidPlunderCounterData importedData \u003d GSON.fromJson(reader, PyramidPlunderCounterData.class);\n\t\t\tchestLooted \u003d importedData.getChestsLooted();\n\t\t\tsarcoLooted \u003d importedData.getSarcoLooted();\n\t\t\tchestSinceLastSceptre \u003d importedData.getChestSinceLastSceptre();\n\t\t\tsarcoSinceLastSceptre \u003d importedData.getSarcoSinceLastSceptre();\n\t\t\ttotalChance \u003d importedData.getChanceOfBeingDry();\n\t\t\ttotalPetChance \u003d importedData.getPetChanceOfBeingDry();\n\t\t\tdryChance \u003d 1 - totalChance;\n\t\t\tpetDryChance \u003d 1 - totalPetChance;\n        } catch (IOException e) {\n\t\t\tlog.warn(\"Error while reading Pyramid Plunder Counter data\", e);\n\t\t} catch (JsonParseException e) {\n\t\t\tlog.warn(\"Error while importing Pyramid Plunder Counter data\", e);\n\n\t\t\t// the file contains invalid json, let\u0027s get rid of it\n            try {\n\t\t\t\tPath sourcePath \u003d data.toPath();\n                Files.move(sourcePath, sourcePath.resolveSibling(String.format(\"%s-corrupt-%d.json\", playerName, System.currentTimeMillis())));\n\t\t\t\tinitializeCounterDataFile(data);\n            } catch (IOException ex) {\n\t\t\t\tlog.warn(\"Could not neutralize corrupted Pyramid Plunder Counter data\", ex);\n            }\n        }\n\t}\n\n\t@Subscribe\n\tpublic void onOverlayMenuClicked(OverlayMenuClicked overlayMenuClicked)\n\t{\n\t\tOverlayMenuEntry overlayMenuEntry \u003d overlayMenuClicked.getEntry();\n\t\tif (overlayMenuEntry.getMenuAction() \u003d\u003d MenuAction.RUNELITE_OVERLAY\n\t\t\t\t\u0026\u0026 overlayMenuClicked.getOverlay() \u003d\u003d overlay)\n\t\t{\n\t\t\tswitch (overlayMenuEntry.getTarget()) {\n\t\t\t\tcase \"Chests Looted\":\n\t\t\t\t\tchestLooted \u003d 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Sarcophagus Looted\":\n\t\t\t\t\tsarcoLooted \u003d 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Chests since last sceptre\":\n\t\t\t\t\tchestSinceLastSceptre \u003d 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Sarcos since last sceptre\":\n\t\t\t\t\tsarcoSinceLastSceptre \u003d 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Sceptre Chance\":\n\t\t\t\t\ttotalChance \u003d 1.0;\n\t\t\t\t\tdryChance \u003d 0.0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Pet Chance\":\n\t\t\t\t\ttotalPetChance \u003d 1.0;\n\t\t\t\t\tpetDryChance \u003d 0.0;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void initializeCounterDataFile(File data) {\n\t\ttry (Writer writer \u003d new FileWriter(data)) {\n\t\t\tGSON.toJson(new PyramidPlunderCounterData(), PyramidPlunderCounterData.class, writer);\n\t\t} catch (IOException | JsonIOException e) {\n\t\t\tlog.warn(\"Error while initializing Pyramid Plunder Counter data file\", e);\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\pyramidplundercounter\\PyramidPlunderCounterPlugin.java"},{"fileName":"PyramidPlunderCounterPluginTest.java","content":"package com.pyramidplundercounter;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class PyramidPlunderCounterPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(PyramidPlunderCounterPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\pyramidplundercounter\\PyramidPlunderCounterPluginTest.java"}]},{"commit":"aeade7ba05a8e29db8026a754087e2644f3a7b4b","repository":"https://github.com/James-Gillham/runelite-toa-pot-sound.git","internalName":"toa-pot-sound","files":[{"fileName":"PotSoundConfig.java","content":"package com.james.potsoundplugin;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.Range;\n\n@ConfigGroup(\"potsound\")\npublic interface PotSoundConfig extends Config {\n\n\t@Range(min \u003d 0, max \u003d 100)\n\t@ConfigItem(keyName \u003d \"potVolume\", name \u003d \"Pot Sound Volume\", description \u003d \"The volume of the pot sound\", position \u003d 1)\n\tdefault int potVolume() {\n\t\treturn 100;\n\t}\n\n}\n","filePath":"src\\main\\java\\com\\james\\potsoundplugin\\PotSoundConfig.java"},{"fileName":"PotSoundPlugin.java","content":"package com.james.potsoundplugin;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.events.MenuOptionClicked;\nimport net.runelite.api.widgets.InterfaceID;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.util.Text;\n\nimport java.util.Arrays;\nimport java.util.HashSet;\nimport java.util.Set;\nimport java.util.concurrent.ScheduledExecutorService;\n\n@Slf4j\n@PluginDescriptor(name \u003d \"ToA Pot Sound\")\npublic class PotSoundPlugin extends Plugin {\n\tprivate static final Set\u003cInteger\u003e TOA_REGIONS \u003d new HashSet\u003c\u003e(Arrays.asList(\n\t\t\t13454, 14160, 14672, 15184, 15696, 14164, 14676, 15188, 15444, 15700, 15955, 15956, 16211));\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate PotSoundConfig config;\n\n\t@Inject\n\tprivate ScheduledExecutorService executor;\n\n\t@Inject\n\tprivate SoundEngine soundEngine;\n\n\t@Override\n\tprotected void startUp() {\n\t\texecutor.submit(SoundFileManager::prepareSoundFiles);\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOptionClicked(MenuOptionClicked event) {\n\n\t\tString option \u003d event.getMenuOption();\n\t\tString target \u003d Text.removeTags(event.getMenuTarget()).toLowerCase();\n\n\t\tboolean isToA \u003d isInToA();\n\t\tboolean isDepositBoxOpen \u003d client.getWidget(InterfaceID.DEPOSIT_BOX, 0) !\u003d null;\n\n\t\tboolean isDepositPotObject \u003d target.contains(\"deposit pot\");\n\t\tboolean isInterfaceDeposit \u003d isDepositBoxOpen\n\t\t\t\t\u0026\u0026 (option.startsWith(\"Deposit\") || option.equals(\"Deposit inventory\"));\n\n\t\tif (isToA) {\n\t\t\tif (isDepositPotObject \u0026\u0026 (option.equals(\"Deposit-inventory\") || option.equals(\"Deposit-loot\"))) {\n\t\t\t\tsoundEngine.playClip(Sound.DEPOSIT, executor);\n\t\t\t} else if (isInterfaceDeposit) {\n\t\t\t\tsoundEngine.playClip(Sound.DEPOSIT, executor);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate boolean isInToA() {\n\t\tint[] regions \u003d client.getMapRegions();\n\t\tif (regions \u003d\u003d null || regions.length \u003d\u003d 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (int region : regions) {\n\t\t\tif (TOA_REGIONS.contains(region)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t@Provides\n\tPotSoundConfig provideConfig(ConfigManager configManager) {\n\t\treturn configManager.getConfig(PotSoundConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\james\\potsoundplugin\\PotSoundPlugin.java"},{"fileName":"Sound.java","content":"package com.james.potsoundplugin;\n\nimport lombok.Getter;\n\n@Getter\npublic enum Sound {\n    DEPOSIT(\"deposit.wav\");\n\n    private final String resourceName;\n\n    Sound(String resourceName) {\n        this.resourceName \u003d resourceName;\n    }\n}\n","filePath":"src\\main\\java\\com\\james\\potsoundplugin\\Sound.java"},{"fileName":"SoundEngine.java","content":"package com.james.potsoundplugin;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.audio.AudioPlayer;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport javax.sound.sampled.LineUnavailableException;\nimport javax.sound.sampled.UnsupportedAudioFileException;\nimport java.io.IOException;\nimport java.util.concurrent.Executor;\n\n@Singleton\n@Slf4j\npublic class SoundEngine {\n\n    @Inject\n    private PotSoundConfig config;\n\n    @Inject\n    private AudioPlayer audioPlayer;\n\n    public void playClip(Sound sound, Executor executor) {\n        executor.execute(() -\u003e playClip(sound));\n    }\n\n    private void playClip(Sound sound) {\n        float gain \u003d 20f * (float) Math.log10(config.potVolume() / 100f);\n\n        try {\n            audioPlayer.play(SoundFileManager.getSoundFile(sound), gain);\n        } catch (IOException | UnsupportedAudioFileException | LineUnavailableException e) {\n            log.warn(\"Failed to play sound {}\", sound, e);\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\james\\potsoundplugin\\SoundEngine.java"},{"fileName":"SoundFileManager.java","content":"package com.james.potsoundplugin;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.RuneLite;\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.StandardCopyOption;\n\n@Slf4j\npublic class SoundFileManager {\n    private static final Path SOUND_DIR \u003d Path.of(RuneLite.RUNELITE_DIR.getPath(), \"toa-pot-sounds\");\n\n    private SoundFileManager() {\n        // Utility class\n    }\n\n    public static File getSoundFile(Sound sound) {\n        return SOUND_DIR.resolve(sound.getResourceName()).toFile();\n    }\n\n    public static void prepareSoundFiles() {\n        ensureDirectoryExists();\n        for (Sound sound : Sound.values()) {\n            extractIfMissing(sound);\n        }\n    }\n\n    private static void ensureDirectoryExists() {\n        try {\n            if (!Files.exists(SOUND_DIR)) {\n                Files.createDirectories(SOUND_DIR);\n            }\n        } catch (IOException e) {\n            log.error(\"Could not create sound directory\", e);\n        }\n    }\n\n    private static void extractIfMissing(Sound sound) {\n        File destFile \u003d getSoundFile(sound);\n        if (destFile.exists()) {\n            return;\n        }\n\n        String resourcePath \u003d \"/\" + sound.getResourceName();\n        try (InputStream is \u003d SoundFileManager.class.getResourceAsStream(resourcePath)) {\n            if (is \u003d\u003d null) {\n                log.error(\"Sound resource not found: {}\", resourcePath);\n                return;\n            }\n            Files.copy(is, destFile.toPath(), StandardCopyOption.REPLACE_EXISTING);\n            log.debug(\"Extracted sound file: {}\", destFile.getPath());\n        } catch (IOException e) {\n            log.error(\"Failed to extract sound file: {}\", sound.getResourceName(), e);\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\james\\potsoundplugin\\SoundFileManager.java"},{"fileName":"PotSoundPluginTest.java","content":"package com.james.potsoundplugin;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class PotSoundPluginTest {\n\t@SuppressWarnings(\"unchecked\")\n\tpublic static void main(String[] args) throws Exception {\n\t\tExternalPluginManager.loadBuiltin(PotSoundPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\james\\potsoundplugin\\PotSoundPluginTest.java"}]},{"commit":"1541c51e8b6fbf3f9673a58a92d84d1f3861816a","repository":"https://github.com/skeldoor/coffee-lover.git","internalName":"coffee-lover","files":[{"fileName":"CoffeeLoverPlugin.java","content":"package com.skeldoor;\n\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.Player;\nimport net.runelite.api.events.BeforeRender;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.OverheadTextChanged;\nimport net.runelite.api.widgets.ComponentID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport java.util.Objects;\nimport java.util.Random;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Coffee Lover\"\n)\npublic class CoffeeLoverPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Subscribe\n\tpublic void onOverheadTextChanged(OverheadTextChanged overheadTextChanged){\n\t\tPlayer localPlayer \u003d client.getLocalPlayer();\n\t\tif (overheadTextChanged.getActor() \u003d\u003d localPlayer \u0026\u0026 overheadTextChanged.getOverheadText().contains(\"nice cuppa tea!\")){\n\t\t\tRandom random \u003d new Random();\n\t\t\tif (random.nextInt(4) \u003d\u003d 0){\n\t\t\t\tlocalPlayer.setOverheadText(\"Coffee is perfect, I\u0027m glad you didn\u0027t offer tea!\");\n\t\t\t} else {\n\t\t\t\tlocalPlayer.setOverheadText(\"Aaah, nothing like a nice cuppa coffee!\");\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage chatMessage){\n\t\tif (Objects.equals(chatMessage.getSender(), client.getLocalPlayer().getName()) \u0026\u0026\n\t\t\t\tchatMessage.getMessage().contains(\"Aaah, nothing like a nice cuppa tea!\")){\n\t\t\tchatMessage.setMessage(\"Aaah, nothing like a nice cuppa coffee!\");\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onBeforeRender(BeforeRender beforeRender){\n\t\tif (client.getGameState() !\u003d GameState.LOGGED_IN) return;\n\t\tWidget dialogNPCText \u003d client.getWidget(ComponentID.DIALOG_NPC_TEXT);\n\t\tif (dialogNPCText !\u003d null \u0026\u0026\n\t\t\tdialogNPCText.getText().contains(\"Would you like a cup of tea\")){\n\t\t\tdialogNPCText.setText(\"Thank you so much! Would you like a cup of coffee before you go?\");\n\t\t}\n\t\tWidget dialogOptionOptions \u003d client.getWidget(ComponentID.DIALOG_OPTION_OPTIONS);\n\t\tif (dialogOptionOptions !\u003d null \u0026\u0026\n\t\t\tdialogOptionOptions.getChildren() !\u003d null \u0026\u0026\n\t\t\tdialogOptionOptions.getChildren().length \u003e 0 \u0026\u0026\n\t\t\tdialogOptionOptions.getChildren()[0].getText().contains(\"Take tea?\")) {\n\t\t\tdialogOptionOptions.getChildren()[0].setText(\"Take coffee?\");\n\t\t}\n\t\tWidget chatboxMessageLines \u003d client.getWidget(ComponentID.CHATBOX_MESSAGE_LINES);\n\t\tif (chatboxMessageLines !\u003d null \u0026\u0026\n\t\t\tchatboxMessageLines.getChildren() !\u003d null \u0026\u0026\n\t\t\tchatboxMessageLines.getChildren().length \u003e 0){\n\t\t\tfor (Widget child : chatboxMessageLines.getChildren()){\n\t\t\t\tif (child.getText().contains(\"You drink the tea, you feel energized!\")){\n\t\t\t\t\tchild.setText(\"You drink the coffee, you feel energized!\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\skeldoor\\CoffeeLoverPlugin.java"},{"fileName":"CoffeeLoverPluginTest.java","content":"package com.skeldoor;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class CoffeeLoverPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(CoffeeLoverPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\skeldoor\\CoffeeLoverPluginTest.java"}]},{"commit":"eae6d2015399fbb471085ee4a8a8bdc124d2697f","repository":"https://github.com/Zoinkwiz/clue-details.git","internalName":"clue-details","files":[{"fileName":"BeginnerMasterClueText.java","content":"/*\n * Copyright (c) 2024, TheLope \u003chttps://github.com/TheLope\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport java.util.HashMap;\nimport java.util.Map;\nimport net.runelite.client.util.Text;\n\npublic class BeginnerMasterClueText\n{\n\tprivate static final String ANAGRAM_TEXT \u003d \"This anagram reveals who to speak to next: \";\n\tprivate static final String ANAGRAM_TEXT_BEGINNER \u003d \"The anagram reveals who to speak to next: \";\n\tpublic static final String BEGINNER_ANAGRAM_0 \u003d ANAGRAM_TEXT_BEGINNER + \"AN EARL\";\n\tpublic static final String BEGINNER_ANAGRAM_1 \u003d ANAGRAM_TEXT_BEGINNER + \"CHAR GAME DISORDER\";\n\tpublic static final String BEGINNER_ANAGRAM_2 \u003d ANAGRAM_TEXT_BEGINNER + \"CARPET AHOY\";\n\tpublic static final String BEGINNER_ANAGRAM_3 \u003d ANAGRAM_TEXT_BEGINNER + \"I CORD\";\n\tpublic static final String BEGINNER_ANAGRAM_4 \u003d ANAGRAM_TEXT_BEGINNER + \"IN BAR\";\n\tpublic static final String BEGINNER_ANAGRAM_5 \u003d ANAGRAM_TEXT_BEGINNER + \"RAIN COVE\";\n\tpublic static final String BEGINNER_ANAGRAM_6 \u003d ANAGRAM_TEXT_BEGINNER + \"RUG DETER\";\n\tpublic static final String BEGINNER_ANAGRAM_7 \u003d ANAGRAM_TEXT_BEGINNER + \"SIR SHARE RED\";\n\tpublic static final String BEGINNER_ANAGRAM_8 \u003d ANAGRAM_TEXT_BEGINNER + \"TAUNT ROOF\";\n\tpublic static final String BEGINNER_CRYPTIC_0 \u003d \"Always walking around the castle grounds and somehow knows everyone\u0027s age.\";\n\tpublic static final String BEGINNER_CRYPTIC_1 \u003d \"Buried beneath the ground, who knows where it\u0027s found. Lucky for you, a man called Reldo may have a clue.\";\n\tpublic static final String BEGINNER_CRYPTIC_2 \u003d \"In the place Duke Horacio calls home, talk to a man with a hat dropped by goblins.\";\n\tpublic static final String BEGINNER_CRYPTIC_3 \u003d \"In a village of barbarians, I am the one who guards the village from up high.\";\n\tpublic static final String BEGINNER_CRYPTIC_4 \u003d \"Talk to Charlie the Tramp in Varrock.\";\n\tpublic static final String BEGINNER_CRYPTIC_5 \u003d \"Near the open desert I reside, to get past me you must abide. Go forward if you dare, for when you pass me, you\u0027ll be sweating by your hair.\";\n\tpublic static final String BEGINNER_EMOTE_0 \u003d \"Blow a raspberry at Aris in her tent. Equip a gold ring and a gold necklace.\";\n\tpublic static final String BEGINNER_EMOTE_1 \u003d \"Bow to Brugsen Bursen at the Grand Exchange.\";\n\tpublic static final String BEGINNER_EMOTE_2 \u003d \"Cheer at Iffie Nitter. Equip a chef hat and a red cape.\";\n\tpublic static final String BEGINNER_EMOTE_3 \u003d \"Clap at Bob\u0027s Brilliant Axes. Equip a bronze axe and leather boots.\";\n\tpublic static final String BEGINNER_EMOTE_4 \u003d \"Panic at Al Kharid mine.\";\n\tpublic static final String BEGINNER_EMOTE_5 \u003d \"Spin at Flynn\u0027s Mace Shop.\";\n\tpublic static final String BEGINNER_CHARLIE_0 \u003d \"I need to give Charlie a cooked trout.\";\n\tpublic static final String BEGINNER_CHARLIE_1 \u003d \"I need to give Charlie a cooked pike.\";\n\tpublic static final String BEGINNER_CHARLIE_2 \u003d \"I need to give Charlie a raw herring.\";\n\tpublic static final String BEGINNER_CHARLIE_3 \u003d \"I need to give Charlie a raw trout.\";\n\tpublic static final String BEGINNER_CHARLIE_4 \u003d \"I need to give Charlie a piece of iron ore.\";\n\tpublic static final String BEGINNER_CHARLIE_5 \u003d \"I need to give Charlie one iron dagger.\";\n\tpublic static final String BEGINNER_CHARLIE_6 \u003d \"I need to give Charlie a leather body.\";\n\tpublic static final String BEGINNER_CHARLIE_7 \u003d \"I need to give Charlie some leather chaps.\";\n\tpublic static final String MASTER_ANAGRAM_0 \u003d ANAGRAM_TEXT + \"A Elf Knows\";\n\tpublic static final String MASTER_ANAGRAM_1 \u003d ANAGRAM_TEXT + \"Brucie Catnap\";\n\tpublic static final String MASTER_ANAGRAM_2 \u003d ANAGRAM_TEXT + \"Car If Ices\";\n\tpublic static final String MASTER_ANAGRAM_3 \u003d ANAGRAM_TEXT + \"Ded War\";\n\tpublic static final String MASTER_ANAGRAM_4 \u003d ANAGRAM_TEXT + \"Dim Tharn\";\n\tpublic static final String MASTER_ANAGRAM_5 \u003d ANAGRAM_TEXT + \"Duo Plug\";\n\tpublic static final String MASTER_ANAGRAM_6 \u003d ANAGRAM_TEXT + \"Forlun\";\n\tpublic static final String MASTER_ANAGRAM_7 \u003d ANAGRAM_TEXT + \"Im N Zezim\";\n\tpublic static final String MASTER_ANAGRAM_8 \u003d ANAGRAM_TEXT + \"Mal in Tau\";\n\tpublic static final String MASTER_ANAGRAM_9 \u003d ANAGRAM_TEXT + \"Mold La Ran\";\n\tpublic static final String MASTER_ANAGRAM_10 \u003d ANAGRAM_TEXT + \"Mus Kil Reader\";\n\tpublic static final String MASTER_ANAGRAM_11 \u003d ANAGRAM_TEXT + \"Rip Maul\";\n\tpublic static final String MASTER_ANAGRAM_12 \u003d ANAGRAM_TEXT + \"Rue Go\";\n\tpublic static final String MASTER_ANAGRAM_13 \u003d ANAGRAM_TEXT + \"Slam Duster Grail\";\n\tpublic static final String MASTER_ANAGRAM_14 \u003d ANAGRAM_TEXT + \"Ten Wigs On\";\n\tpublic static final String MASTER_ANAGRAM_15 \u003d ANAGRAM_TEXT + \"Twenty Cure Iron\";\n\tpublic static final String MASTER_COORDINATE_0 \u003d \"1 degree 30 minutes north 8 degrees 11 minutes west\";\n\tpublic static final String MASTER_COORDINATE_1 \u003d \"1 degree 54 minutes south 8 degrees 54 minutes west\";\n\tpublic static final String MASTER_COORDINATE_2 \u003d \"2 degrees 9 minutes south 6 degrees 58 minutes west\";\n\tpublic static final String MASTER_COORDINATE_3 \u003d \"3 degrees 9 minutes south 43 degrees 26 minutes east\";\n\tpublic static final String MASTER_COORDINATE_4 \u003d \"3 degrees 26 minutes north 12 degrees 18 minutes east\";\n\tpublic static final String MASTER_COORDINATE_5 \u003d \"3 degrees 50 minutes north 9 degrees 7 minutes east\";\n\tpublic static final String MASTER_COORDINATE_6 \u003d \"4 degrees 58 minutes north 36 degrees 56 minutes east\";\n\tpublic static final String MASTER_COORDINATE_7 \u003d \"5 degrees 13 minutes north 4 degrees 16 minutes west\";\n\tpublic static final String MASTER_COORDINATE_8 \u003d \"7 degrees 37 minutes north 35 degrees 18 minutes east\";\n\tpublic static final String MASTER_COORDINATE_9 \u003d \"8 degrees 1 minute north 20 degrees 58 minutes west\";\n\tpublic static final String MASTER_COORDINATE_10 \u003d \"8 degrees 11 minutes north 12 degrees 30 minutes east\";\n\tpublic static final String MASTER_COORDINATE_11 \u003d \"12 degrees 35 minutes north 36 degrees 22 minutes east\";\n\tpublic static final String MASTER_COORDINATE_12 \u003d \"12 degrees 45 minutes north 20 degrees 9 minutes east\";\n\tpublic static final String MASTER_COORDINATE_13 \u003d \"13 degrees 33 minutes south 15 degrees 26 minutes east\";\n\tpublic static final String MASTER_COORDINATE_14 \u003d \"16 degrees 41 minutes north 30 degrees 54 minutes west\";\n\tpublic static final String MASTER_COORDINATE_15 \u003d \"18 degrees 3 minutes north 3 degrees 3 minutes east\";\n\tpublic static final String MASTER_COORDINATE_16 \u003d \"18 degrees 26 minutes north 37 degrees 15 minutes west\";\n\tpublic static final String MASTER_COORDINATE_17 \u003d \"19 degrees 43 minutes north 23 degrees 11 minutes west\";\n\tpublic static final String MASTER_COORDINATE_18 \u003d \"20 degrees 35 minutes north 15 degrees 58 minutes east\";\n\tpublic static final String MASTER_COORDINATE_19 \u003d \"20 degrees 45 minutes north 7 degrees 26 minutes west\";\n\tpublic static final String MASTER_COORDINATE_20 \u003d \"21 degrees 37 minutes north 21 degrees 13 minutes west\";\n\tpublic static final String MASTER_COORDINATE_21 \u003d \"21 degrees 56 minutes north 10 degrees 56 minutes west\";\n\tpublic static final String MASTER_COORDINATE_22 \u003d \"22 degrees 24 minutes north 31 degrees 11 minutes west\";\n\tpublic static final String MASTER_COORDINATE_23 \u003d \"24 degrees 0 minutes north 29 degrees 22 minutes east\";\n\tpublic static final String MASTER_COORDINATE_24 \u003d \"24 degrees 18 minutes north 23 degrees 22 minutes east\";\n\tpublic static final String MASTER_COORDINATE_25 \u003d \"24 degrees 22 minutes north 27 degrees 0 minutes east\";\n\tpublic static final String MASTER_COORDINATE_26 \u003d \"23 degrees 58 minutes north 18 degrees 22 minutes east\";\n\tpublic static final String MASTER_CRYPTIC_0 \u003d \"2 musical birds. Dig in front of the spinning light.\";\n\tpublic static final String MASTER_CRYPTIC_1 \u003d \"A chisel and hammer reside in his home, strange for one of magic. Impress him with your magical equipment.\";\n\tpublic static final String MASTER_CRYPTIC_2 \u003d \"A dwarf, approaching death, but very much in the light.\";\n\tpublic static final String MASTER_CRYPTIC_3 \u003d \"A massive battle rages beneath so be careful when you dig by the large broken crossbow.\";\n\tpublic static final String MASTER_CRYPTIC_4 \u003d \"Anger Abbot Langley.\";\n\tpublic static final String MASTER_CRYPTIC_5 \u003d \"Anger those who adhere to Saradomin\u0027s edicts to prevent travel.\";\n\tpublic static final String MASTER_CRYPTIC_6 \u003d \"Buried beneath the ground, who knows where it\u0027s found. Lucky for you, A man called Jorral may have a clue.\";\n\tpublic static final String MASTER_CRYPTIC_7 \u003d \"Come brave adventurer, your sense is on fire. If you talk to me, it\u0027s an old god you desire.\";\n\tpublic static final String MASTER_CRYPTIC_8 \u003d \"Darkness wanders around me, but fills my mind with knowledge.\";\n\tpublic static final String MASTER_CRYPTIC_9 \u003d \"Dig in front of the icy arena where 1 of 4 was fought.\";\n\tpublic static final String MASTER_CRYPTIC_10 \u003d \"Faint sounds of \u0027Arr\u0027, fire giants found deep, the eastern tip of a lake, are the rewards you could reap.\";\n\tpublic static final String MASTER_CRYPTIC_11 \u003d \"Falo the bard wants to see you.\";\n\tpublic static final String MASTER_CRYPTIC_12 \u003d \"Elvish onions.\";\n\tpublic static final String MASTER_CRYPTIC_13 \u003d \"Fiendish cooks probably won\u0027t dig the dirty dishes.\";\n\tpublic static final String MASTER_CRYPTIC_14 \u003d \"The doorman of the Warriors\u0027 Guild wishes to be impressed by how strong your equipment is.\";\n\tpublic static final String MASTER_CRYPTIC_15 \u003d \"Great demons, dragons and spiders protect this blue rock, beneath which, you may find what you seek.\";\n\tpublic static final String MASTER_CRYPTIC_16 \u003d \"Guthix left his mark in a fiery lake, dig at the tip of it.\";\n\tpublic static final String MASTER_CRYPTIC_17 \u003d \"Here, there are tears, but nobody is crying. Speak to the guardian and show off your alignment to balance.\";\n\tpublic static final String MASTER_CRYPTIC_18 \u003d \"Hopefully this set of armour will help you to keep surviving.\";\n\tpublic static final String MASTER_CRYPTIC_19 \u003d \"If you\u0027re feeling brave, dig beneath the dragon\u0027s eye.\";\n\tpublic static final String MASTER_CRYPTIC_20 \u003d \"I lie beneath the first descent to the holy encampment.\";\n\tpublic static final String MASTER_CRYPTIC_21 \u003d \"My life was spared but these voices remain, now guarding these iron gates is my bane.\";\n\tpublic static final String MASTER_CRYPTIC_22 \u003d \"One of several rhyming brothers, in business attire with an obsession for paper work.\";\n\tpublic static final String MASTER_CRYPTIC_23 \u003d \"Pentagrams and demons, burnt bones and remains, I wonder what the blood contains.\";\n\tpublic static final String MASTER_CRYPTIC_24 \u003d \"Robin wishes to see your finest ranged equipment.\";\n\tpublic static final String MASTER_CRYPTIC_25 \u003d \"She\u0027s small but can build both literally and figuratively.\";\n\tpublic static final String MASTER_CRYPTIC_26 \u003d \"Shhhh!\";\n\tpublic static final String MASTER_CRYPTIC_27 \u003d \"Show this to Sherlock.\";\n\tpublic static final String MASTER_CRYPTIC_28 \u003d \"South of a river in a town surrounded by the undead, what lies beneath the furnace?\";\n\tpublic static final String MASTER_CRYPTIC_29 \u003d \"The far north eastern corner where 1 of 4 was defeated, the shadows still linger.\";\n\tpublic static final String MASTER_CRYPTIC_30 \u003d \"This place sure is a mess.\";\n\tpublic static final String MASTER_CRYPTIC_31 \u003d \"Under a giant robotic bird that cannot fly.\";\n\tpublic static final String MASTER_CRYPTIC_32 \u003d \"Where safe to speak, the man who offers the pouch of smallest size wishes to see your alignment.\";\n\tpublic static final String MASTER_EMOTE_0 \u003d \"Beckon by a collection of crystalline maple trees. Beware of double agents! Equip Bryophyta\u0027s staff and a nature tiara.\";\n\tpublic static final String MASTER_EMOTE_1 \u003d \"Blow a kiss outside K\u0027ril Tsutsaroth\u0027s chamber. Beware of double agents! Equip a zamorak full helm and the shadow sword.\";\n\tpublic static final String MASTER_EMOTE_2 \u003d \"Blow a raspberry in the bank of the Warriors\u0027 Guild. Beware of double agents! Equip a dragon battleaxe, a slayer helm of any kind and a dragon defender or avernic defender.\";\n\tpublic static final String MASTER_EMOTE_3 \u003d \"Bow in the Iorwerth Camp. Beware of double agents! Equip a charged crystal bow.\";\n\tpublic static final String MASTER_EMOTE_4 \u003d \"Cheer in the Entrana church. Beware of double agents! Equip a full set of black dragonhide armour.\";\n\tpublic static final String MASTER_EMOTE_5 \u003d \"Clap in the magic axe hut. Beware of double agents! Equip only some flared trousers.\";\n\tpublic static final String MASTER_EMOTE_6 \u003d \"Cry in the TzHaar gem store. Beware of double agents! Equip a fire cape and TokTz-Xil-Ul.\";\n\tpublic static final String MASTER_EMOTE_7 \u003d \"Dance in Iban\u0027s temple. Beware of double agents! Equip Iban\u0027s staff, a black mystic top and a black mystic bottom.\";\n\tpublic static final String MASTER_EMOTE_8 \u003d \"Dance in the King Black Dragon\u0027s lair. Beware of double agents! Equip a black dragonhide body, black dragonhide vambraces and a black dragon mask.\";\n\tpublic static final String MASTER_EMOTE_9 \u003d \"Do a jig at the Barrows chest. Beware of double agents! Equip any full barrows set.\";\n\tpublic static final String MASTER_EMOTE_10 \u003d \"Flap at the Death Altar. Beware of double agents! Equip a death tiara, a legend\u0027s cape and any ring of wealth.\";\n\tpublic static final String MASTER_EMOTE_11 \u003d \"Salute outside the gates of Cam Torum. Beware of double agents! Equip a full set of blue moon equipment.\";\n\tpublic static final String MASTER_EMOTE_12 \u003d \"Goblin salute in the Goblin village. Beware of double agents! Equip a bandos godsword, a bandos cloak and a bandos platebody.\";\n\tpublic static final String MASTER_EMOTE_13 \u003d \"Jump for joy in the centre of Zul-Andra. Beware of double agents! Equip a dragon 2h sword, bandos boots and an obsidian cape.\";\n\tpublic static final String MASTER_EMOTE_14 \u003d \"Panic by the big egg where no one dare goes and the ground is burnt. Beware of double agents! Equip a dragon med helm, a TokTz-Ket-Xil, a brine sabre, rune platebody and an uncharged amulet of glory.\";\n\tpublic static final String MASTER_EMOTE_15 \u003d \"Show your anger at the Wise old man. Beware of double agents! Equip an abyssal whip, a legend\u0027s cape and some spined chaps.\";\n\tpublic static final String MASTER_EMOTE_16 \u003d \"Show your anger towards the statue of Saradomin in Ellamaria\u0027s garden. Beware of double agents! Equip a zamorak godsword.\";\n\tpublic static final String MASTER_EMOTE_17 \u003d \"Slap your head in the centre of the Kourend catacombs. Beware of double agents! Equip arclight or emberlight along with the amulet of the damned.\";\n\tpublic static final String MASTER_EMOTE_18 \u003d \"Spin in front of the Soul Altar. Beware of double agents! Equip a dragon pickaxe, helm of Neitiznot and a pair of rune boots.\";\n\tpublic static final String MASTER_EMOTE_19 \u003d \"Stamp in the Enchanted Valley west of the waterfall. Beware of double agents! Equip a dragon axe.\";\n\tpublic static final String MASTER_EMOTE_20 \u003d \"Swing a bullroarer at the top of the Watchtower. Beware of double agents! Equip a dragon plateskirt, climbing boots and a dragon chainbody.\";\n\tpublic static final String MASTER_EMOTE_21 \u003d \"Wave on the northern wall of Castle Drakan. Beware of double agents! Wear a dragon sq shield, splitbark body and any boater.\";\n\tpublic static final String MASTER_EMOTE_22 \u003d \"Yawn in the 7th room of Pyramid Plunder. Beware of double agents! Equip a pharaoh sceptre and a full set of menaphite robes.\";\n\tpublic static final String MASTER_EMOTE_23 \u003d \"Think on the western coast of Salvager Overlook. Beware of double agents! Equip a Hueycoatl hide coif and some Hueycoatl hide vambraces.\";\n\tpublic static final String MASTER_EMOTE_24 \u003d \"Bow in front of the cave on Brittle Isle. Beware of double agents! Equip a Medallion of the Deep and a rosewood blowpipe.\";\n\tpublic static final String MASTER_FALO_0 \u003d \"A blood red weapon, a strong curved sword, found on the island of primate lords.\";\n\tpublic static final String MASTER_FALO_1 \u003d \"A book that preaches of some great figure, lending strength, might and vigour.\";\n\tpublic static final String MASTER_FALO_2 \u003d \"A bow of elven craft was made, it shimmers bright, but will soon fade.\";\n\tpublic static final String MASTER_FALO_3 \u003d \"A fiery axe of great inferno, when you use it, you\u0027ll wonder where the logs go.\";\n\tpublic static final String MASTER_FALO_4 \u003d \"A mark used to increase one\u0027s grace, found atop a seer\u0027s place.\";\n\tpublic static final String MASTER_FALO_5 \u003d \"A molten beast with fiery breath, you acquire these with its death.\";\n\tpublic static final String MASTER_FALO_6 \u003d \"A shiny helmet of flight, to obtain this with melee, struggle you might.\";\n\tpublic static final String MASTER_FALO_7 \u003d \"A sword held in the other hand, red its colour, Cyclops strength you must withstand.\";\n\tpublic static final String MASTER_FALO_8 \u003d \"A token used to kill mythical beasts, in hopes of a blade or just for an xp feast.\";\n\tpublic static final String MASTER_FALO_9 \u003d \"Green is my favourite, mature ale I do love, this takes your herblore above.\";\n\tpublic static final String MASTER_FALO_10 \u003d \"It can hold down a boat or crush a goat, this object, you see, is quite heavy.\";\n\tpublic static final String MASTER_FALO_11 \u003d \"It comes from the ground, underneath the snowy plain. Trolls aplenty, with what looks like a mane.\";\n\tpublic static final String MASTER_FALO_12 \u003d \"No attack to wield, only strength is required, made of obsidian, but with no room for a shield.\";\n\tpublic static final String MASTER_FALO_13 \u003d \"Penance healers runners and more, obtaining this body often gives much deplore.\";\n\tpublic static final String MASTER_FALO_14 \u003d \"Strangely found in a chest, many believe these gloves are the best.\";\n\tpublic static final String MASTER_FALO_15 \u003d \"These gloves of white won\u0027t help you fight, but aid in cooking, they just might.\";\n\tpublic static final String MASTER_FALO_16 \u003d \"They come from some time ago, from a land unto the east. Fossilised they have become, this small and gentle beast.\";\n\tpublic static final String MASTER_FALO_17 \u003d \"To slay a dragon you must first do, before this chest piece can be put on you.\";\n\tpublic static final String MASTER_FALO_18 \u003d \"Vampyres are agile opponents, damaged best with a weapon of many components.\";\n\tpublic static final String MASTER_FALO_19 \u003d \"You won\u0027t bring me to heel, unless you have a bright red keel.\";\n\tpublic static final String MASTER_SHERLOCK_0 \u003d \"Angle for an Anglerfish whilst sporting the finest fishing gear.\";\n\tpublic static final String MASTER_SHERLOCK_1 \u003d \"Bind a blood rune at the Blood Altar.\";\n\tpublic static final String MASTER_SHERLOCK_2 \u003d \"Burn a magic log.\";\n\tpublic static final String MASTER_SHERLOCK_3 \u003d \"Burn a redwood log.\";\n\tpublic static final String MASTER_SHERLOCK_4 \u003d \"Catch a tecu salamander.\";\n\tpublic static final String MASTER_SHERLOCK_5 \u003d \"Chop a redwood log whilst sporting the finest lumberjack gear.\";\n\tpublic static final String MASTER_SHERLOCK_6 \u003d \"Complete a lap of the Rellekka rooftop agility course whilst sporting the finest amount of grace.\";\n\tpublic static final String MASTER_SHERLOCK_7 \u003d \"Craft a light orb in the Dorgesh-Kaan bank.\";\n\tpublic static final String MASTER_SHERLOCK_8 \u003d \"Create a Barrows teleport tablet.\";\n\tpublic static final String MASTER_SHERLOCK_9 \u003d \"Create an unstrung dragonstone amulet at a furnace.\";\n\tpublic static final String MASTER_SHERLOCK_10 \u003d \"Cremate a set of fiyr remains.\";\n\tpublic static final String MASTER_SHERLOCK_11 \u003d \"Dissect a sacred eel.\";\n\tpublic static final String MASTER_SHERLOCK_12 \u003d \"Equip an abyssal whip in front of the abyssal demons of the Slayer Tower.\";\n\tpublic static final String MASTER_SHERLOCK_13 \u003d \"Fletch a rune dart.\";\n\tpublic static final String MASTER_SHERLOCK_14 \u003d \"Kill a Fiyr shade inside Mort\u0027tons shade catacombs.\";\n\tpublic static final String MASTER_SHERLOCK_15 \u003d \"Kill a lizardman shaman.\";\n\tpublic static final String MASTER_SHERLOCK_16 \u003d \"Kill a reanimated abyssal.\";\n\tpublic static final String MASTER_SHERLOCK_17 \u003d \"Kill the spiritual, magic and godly whilst representing their own god.\";\n\tpublic static final String MASTER_SHERLOCK_18 \u003d \"Mine a piece of runite ore whilst sporting the finest mining gear.\";\n\tpublic static final String MASTER_SHERLOCK_19 \u003d \"Mix a ranging mix potion.\";\n\tpublic static final String MASTER_SHERLOCK_20 \u003d \"Mix an anti-venom potion.\";\n\tpublic static final String MASTER_SHERLOCK_21 \u003d \"Pickpocket an elf.\";\n\tpublic static final String MASTER_SHERLOCK_22 \u003d \"Slay a Nechryael in the Slayer Tower.\";\n\tpublic static final String MASTER_SHERLOCK_23 \u003d \"Smith a runite med helm.\";\n\tpublic static final String MASTER_SHERLOCK_24 \u003d \"Steal a gem from the Ardougne market.\";\n\tpublic static final String MASTER_SHERLOCK_25 \u003d \"Teleport to a spirit tree you planted yourself.\";\n\n\tpublic static final String[] FALO_LYRICS \u003d\n\t{\n\t\tMASTER_FALO_0,\n\t\tMASTER_FALO_1,\n\t\tMASTER_FALO_2,\n\t\tMASTER_FALO_3,\n\t\tMASTER_FALO_4,\n\t\tMASTER_FALO_5,\n\t\tMASTER_FALO_6,\n\t\tMASTER_FALO_7,\n\t\tMASTER_FALO_8,\n\t\tMASTER_FALO_9,\n\t\tMASTER_FALO_10,\n\t\tMASTER_FALO_11,\n\t\tMASTER_FALO_12,\n\t\tMASTER_FALO_13,\n\t\tMASTER_FALO_14,\n\t\tMASTER_FALO_15,\n\t\tMASTER_FALO_16,\n\t\tMASTER_FALO_17,\n\t\tMASTER_FALO_18,\n\t\tMASTER_FALO_19\n\t};\n\n\tprivate static final Map\u003cString, String\u003e charlieTaskToClueText \u003d new HashMap\u003c\u003e()\n\t{{\n\t\tput(\"I really need a cooked trout.\", BeginnerMasterClueText.BEGINNER_CHARLIE_0);\n\t\tput(\"I really need a cooked pike.\", BeginnerMasterClueText.BEGINNER_CHARLIE_1);\n\t\tput(\"I really need a raw herring.\", BeginnerMasterClueText.BEGINNER_CHARLIE_2);\n\t\tput(\"I really need a raw trout.\", BeginnerMasterClueText.BEGINNER_CHARLIE_3);\n\t\tput(\"I really need a piece of iron ore.\", BeginnerMasterClueText.BEGINNER_CHARLIE_4);\n\t\tput(\"I really need one iron dagger.\", BeginnerMasterClueText.BEGINNER_CHARLIE_5);\n\t\tput(\"I really need a leather body.\", BeginnerMasterClueText.BEGINNER_CHARLIE_6);\n\t\tput(\"I really need some leather chaps.\", BeginnerMasterClueText.BEGINNER_CHARLIE_7);\n\t}};\n\n\tpublic BeginnerMasterClueText()\n\t{\n\t}\n\n\tpublic static String forTaskGetClueText(String rawText)\n\t{\n\t\tfinal String text \u003d Text.sanitizeMultilineText(rawText).toLowerCase();\n\n\t\tfor (Map.Entry\u003cString, String\u003e entry : charlieTaskToClueText.entrySet())\n\t\t{\n\t\t\tif (text.contains(entry.getKey().toLowerCase()))\n\t\t\t{\n\t\t\t\treturn entry.getValue();\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic static String forLyricsGetClueText(String rawText)\n\t{\n\t\tfinal String text \u003d Text.sanitizeMultilineText(rawText).toLowerCase();\n\n\t\tfor (String lyric : FALO_LYRICS)\n\t\t{\n\t\t\tif (text.contains(lyric.toLowerCase()))\n\t\t\t{\n\t\t\t\treturn lyric;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\BeginnerMasterClueText.java"},{"fileName":"ClueBankManager.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport com.google.inject.Inject;\nimport com.google.inject.Singleton;\nimport java.util.Arrays;\nimport java.util.HashMap;\nimport java.util.Map;\nimport net.runelite.api.Item;\nimport net.runelite.api.ItemContainer;\n\n@Singleton\npublic class ClueBankManager\n{\n\tprivate final ClueDetailsPlugin clueDetailsPlugin;\n\tprivate final ClueBankSaveDataManager clueBankSaveDataManager;\n\n\tItem[] lastBankItems;\n\n\tprivate final Map\u003cInteger, ClueInstance\u003e cluesInBank \u003d new HashMap\u003c\u003e();\n\n\tprivate final Map\u003cInteger, ClueInstance\u003e cluesGoneFromInventory \u003d new HashMap\u003c\u003e();\n\n\t@Inject\n\tpublic ClueBankManager(ClueDetailsPlugin clueDetailsPlugin, ClueBankSaveDataManager clueBankSaveDataManager)\n\t{\n\t\tthis.clueDetailsPlugin \u003d clueDetailsPlugin;\n\t\tthis.clueBankSaveDataManager \u003d clueBankSaveDataManager;\n\t}\n\n\tpublic void handleBankChange(ItemContainer bankContainer)\n\t{\n\t\tif (lastBankItems \u003d\u003d null)\n\t\t{\n\t\t\tlastBankItems \u003d bankContainer.getItems();\n\t\t\treturn;\n\t\t}\n\n\t\tfor (Integer trackedClueId : Clues.getTrackedClueAndTornClueIds(true))\n\t\t{\n\t\t\tif (bankContainer.contains(trackedClueId))\n\t\t\t{\n\t\t\t\thandleClueDeposited(trackedClueId);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\thandleClueTaken(trackedClueId);\n\t\t\t}\n\t\t}\n\t\tlastBankItems \u003d bankContainer.getItems();\n\t}\n\n\tprivate void handleClueDeposited(int trackedClueId)\n\t{\n\t\t// Bank didn\u0027t contain it, and still doesn\u0027t. Return.\n\t\tif (Arrays.stream(lastBankItems).anyMatch((item) -\u003e item.getId() \u003d\u003d trackedClueId)) return;\n\n\t\tif (!cluesGoneFromInventory.containsKey(trackedClueId)) return;\n\n\t\tClueInstance clue \u003d cluesGoneFromInventory.get(trackedClueId);\n\t\tcluesGoneFromInventory.remove(trackedClueId);\n\n\t\tcluesInBank.put(trackedClueId, clue);\n\t}\n\n\tprivate void handleClueTaken(int trackedClueId)\n\t{\n\t\t// Bank did contain it, and still does. Return.\n\t\tif (Arrays.stream(lastBankItems).noneMatch((item) -\u003e item.getId() \u003d\u003d trackedClueId)) return;\n\n\t\t// Inventory updates before bank.\n\t\tClueInstance clueFromBank \u003d cluesInBank.get(trackedClueId);\n\t\tif (clueFromBank \u003d\u003d null) return;\n\n\t\tClueInstance clue \u003d clueDetailsPlugin.getClueInventoryManager().getClueByClueItemId(trackedClueId);\n\t\tclue.setClueIds(clueFromBank.getClueIds());\n\n\t\tcluesInBank.remove(trackedClueId);\n\t\tclueDetailsPlugin.getClueInventoryManager().updateLastInventoryRefreshTime();\n\t}\n\n\tpublic void addToRemovedClues(ClueInstance clueInstance)\n\t{\n\t\tcluesGoneFromInventory.put(clueInstance.getItemId(), clueInstance);\n\t}\n\n\tpublic void saveStateToConfig()\n\t{\n\t\tclueBankSaveDataManager.saveStateToConfig(cluesInBank);\n\t}\n\n\tpublic void loadStateFromConfig()\n\t{\n\t\tcluesInBank.clear();\n\t\tcluesGoneFromInventory.clear();\n\t\tcluesInBank.putAll(clueBankSaveDataManager.loadStateFromConfig());\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\ClueBankManager.java"},{"fileName":"ClueBankSaveDataManager.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport com.google.gson.Gson;\nimport com.google.gson.reflect.TypeToken;\nimport java.lang.reflect.Type;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport net.runelite.client.config.ConfigManager;\n\n@Singleton\npublic class ClueBankSaveDataManager\n{\n\tprivate final ConfigManager configManager;\n\n\tprivate static final String CONFIG_GROUP \u003d \"clue-details\";\n\tprivate static final String BANK_CLUES_KEY \u003d \"bank-clues\";\n\n\tprivate final Gson gson;\n\tprivate final List\u003cClueInstanceData\u003e clueInstanceData \u003d new ArrayList\u003c\u003e();\n\n\t@Inject\n\tpublic ClueBankSaveDataManager(ConfigManager configManager, Gson gson)\n\t{\n\t\tthis.configManager \u003d configManager;\n\t\tthis.gson \u003d gson;\n\t}\n\n\tpublic void saveStateToConfig(Map\u003cInteger, ClueInstance\u003e bankClues)\n\t{\n\t\t// Serialize groundClues save to config\n\t\tupdateData(bankClues);\n\t\tString bankCluesData \u003d gson.toJson(clueInstanceData);\n\t\tconfigManager.setConfiguration(CONFIG_GROUP, BANK_CLUES_KEY, bankCluesData);\n\t}\n\n\tprivate void updateData(Map\u003cInteger, ClueInstance\u003e bankClues)\n\t{\n\t\tList\u003cClueInstanceData\u003e newData \u003d new ArrayList\u003c\u003e();\n\t\tfor (Map.Entry\u003cInteger, ClueInstance\u003e entry : bankClues.entrySet())\n\t\t{\n\t\t\tClueInstance data \u003d entry.getValue();\n\t\t\tnewData.add(new ClueInstanceData(data));\n\t\t}\n\t\tclueInstanceData.clear();\n\t\tclueInstanceData.addAll(newData);\n\t}\n\n\tpublic Map\u003cInteger, ClueInstance\u003e loadStateFromConfig()\n\t{\n\t\tString groundCluesJson \u003d configManager.getConfiguration(CONFIG_GROUP, BANK_CLUES_KEY);\n\t\tclueInstanceData.clear();\n\n\t\tMap\u003cInteger, ClueInstance\u003e bankClues \u003d new HashMap\u003c\u003e();\n\t\tif (groundCluesJson !\u003d null)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tType groundCluesType \u003d new TypeToken\u003cList\u003cClueInstanceData\u003e\u003e()\n\t\t\t\t{\n\t\t\t\t}.getType();\n\n\t\t\t\tList\u003cClueInstanceData\u003e loadedGroundCluesData \u003d gson.fromJson(groundCluesJson, groundCluesType);\n\n\t\t\t\t// Convert ClueInstanceData back to ClueInstance\n\t\t\t\tfor (ClueInstanceData clueData : loadedGroundCluesData)\n\t\t\t\t{\n\t\t\t\t\tclueInstanceData.add(clueData);\n\n\t\t\t\t\tInteger itemId \u003d clueData.getItemId();\n\t\t\t\t\tClueInstance clue \u003d new ClueInstance(clueData);\n\n\t\t\t\t\tbankClues.put(itemId, clue);\n\t\t\t\t}\n\t\t\t} catch (Exception err)\n\t\t\t{\n\t\t\t\tbankClues.clear();\n\t\t\t\tsaveStateToConfig(bankClues);\n\t\t\t}\n\t\t}\n\n\t\treturn bankClues;\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\ClueBankSaveDataManager.java"},{"fileName":"ClueDetailsConfig.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport com.cluedetails.filters.ClueOrders;\nimport com.cluedetails.filters.ClueRegion;\nimport com.cluedetails.filters.ClueTier;\nimport java.awt.Color;\nimport java.util.Collection;\nimport java.util.Comparator;\nimport java.util.List;\nimport java.util.function.Predicate;\nimport java.util.stream.Collectors;\nimport lombok.Getter;\nimport net.runelite.client.config.*;\n\n@ConfigGroup(\"clue-details\")\npublic interface ClueDetailsConfig extends Config\n{\n\tString GROUP \u003d \"clue-details\";\n\tString CLUE_ITEMS_CONFIG \u003d \"clue-details-items\";\n\tString CLUE_WIDGETS_CONFIG \u003d \"clue-details-widgets\";\n\n\tenum ClueOrdering implements Comparator\u003cClues\u003e\n\t{\n\t\t/**\n\t\t * Sort clues in alphabetical order\n\t\t */\n\t\tTIER(ClueOrders.sortByTier(), ClueTierFilter.BEGINNER, ClueTierFilter.EASY, ClueTierFilter.MEDIUM, ClueTierFilter.MEDIUM_KEY, ClueTierFilter.HARD, ClueTierFilter.ELITE, ClueTierFilter.MASTER),\n\t\tREGION(ClueOrders.sortByRegion(), ClueRegionFilter.MISTHALIN, ClueRegionFilter.ASGARNIA, ClueRegionFilter.KARAMJA, ClueRegionFilter.KANDARIN, ClueRegionFilter.FREMENNIK_PROVINCE, ClueRegionFilter.KHARIDIAN_DESERT,\n\t\t\tClueRegionFilter.MORYTANIA, ClueRegionFilter.TIRANNWN, ClueRegionFilter.WILDERNESS, ClueRegionFilter.KOUREND, ClueRegionFilter.VARLAMORE);\n\n\t\tprivate final Comparator\u003cClues\u003e comparator;\n\t\t@Getter\n\t\tprivate final ClueFilter[] sections;\n\n\t\tClueOrdering(Comparator\u003cClues\u003e comparator, ClueFilter... sections)\n\t\t{\n\t\t\tthis.comparator \u003d comparator;\n\t\t\tthis.sections \u003d sections;\n\t\t}\n\n\t\tpublic List\u003cClues\u003e sort(Collection\u003cClues\u003e list)\n\t\t{\n\t\t\treturn list.stream().sorted(this).collect(Collectors.toList());\n\t\t}\n\n\t\t@Override\n\t\tpublic int compare(Clues o1, Clues o2)\n\t\t{\n\t\t\treturn comparator.compare(o1, o2);\n\t\t}\n\t}\n\n\tinterface ClueFilter extends Predicate\u003cClues\u003e\n\t{\n\t\tString getDisplayName();\n\t}\n\n\tclass BaseClueFilter\n\t{\n\t\tprivate final String displayName;\n\n\t\tpublic BaseClueFilter(String displayName)\n\t\t{\n\t\t\tthis.displayName \u003d displayName;\n\t\t}\n\n\t\tpublic String getDisplayName()\n\t\t{\n\t\t\treturn displayName;\n\t\t}\n\t}\n\n\tenum ClueTierFilter implements ClueFilter\n\t{\n\t\tSHOW_ALL(c -\u003e true, \"Show All\"),\n\t\tBEGINNER(c -\u003e c.getClueTier() \u003d\u003d ClueTier.BEGINNER, \"Beginner\"),\n\t\tEASY(c -\u003e c.getClueTier() \u003d\u003d ClueTier.EASY, \"Easy\"),\n\t\tMEDIUM(c -\u003e c.getClueTier() \u003d\u003d ClueTier.MEDIUM, \"Medium\"),\n\t\tMEDIUM_KEY(c -\u003e c.getClueTier() \u003d\u003d ClueTier.MEDIUM_KEY, \"Medium Key\"),\n\t\tHARD(c -\u003e c.getClueTier() \u003d\u003d ClueTier.HARD, \"Hard\"),\n\t\tELITE(c -\u003e c.getClueTier() \u003d\u003d ClueTier.ELITE, \"Elite\"),\n\t\tMASTER(c -\u003e c.getClueTier() \u003d\u003d ClueTier.MASTER, \"Master\");\n\n\t\tprivate final Predicate\u003cClues\u003e predicate;\n\t\tprivate final BaseClueFilter baseClueFilter;\n\n\t\tClueTierFilter(Predicate\u003cClues\u003e predicate, String displayName)\n\t\t{\n\t\t\tthis.predicate \u003d predicate;\n\t\t\tthis.baseClueFilter \u003d new BaseClueFilter(displayName);\n\t\t}\n\n\t\t@Override\n\t\tpublic boolean test(Clues clue)\n\t\t{\n\t\t\treturn predicate.test(clue);\n\t\t}\n\n\t\tpublic List\u003cClues\u003e test(Collection\u003cClues\u003e helpers)\n\t\t{\n\t\t\treturn helpers.stream().filter(this).collect(Collectors.toList());\n\t\t}\n\n\t\tpublic static ClueTierFilter[] displayFilters()\n\t\t{\n\t\t\treturn ClueTierFilter.values();\n\t\t}\n\n\t\t@Override\n\t\tpublic String getDisplayName()\n\t\t{\n\t\t\treturn baseClueFilter.getDisplayName();\n\t\t}\n\t}\n\n\tenum ClueRegionFilter implements ClueFilter\n\t{\n\t\tSHOW_ALL(c -\u003e true, \"Show All\"),\n\t\tMISTHALIN(c -\u003e c.getRegions().isRegionValid(ClueRegion.MISTHALIN), \"Misthalin\"),\n\t\tKARAMJA(c -\u003e c.getRegions().isRegionValid(ClueRegion.KARAMJA), \"Karamja\"),\n\t\tASGARNIA(c -\u003e c.getRegions().isRegionValid(ClueRegion.ASGARNIA), \"Asgarnia\"),\n\t\tFREMENNIK_PROVINCE(c -\u003e c.getRegions().isRegionValid(ClueRegion.FREMENNIK_PROVINCE), \"Fremennik province\"),\n\t\tKANDARIN(c -\u003e c.getRegions().isRegionValid(ClueRegion.KANDARIN), \"Kandarin\"),\n\t\tKHARIDIAN_DESERT(c -\u003e c.getRegions().isRegionValid(ClueRegion.KHARIDIAN_DESERT), \"Kharidian desert\"),\n\t\tMORYTANIA(c -\u003e c.getRegions().isRegionValid(ClueRegion.MORYTANIA), \"Morytania\"),\n\t\tTIRANNWN(c -\u003e c.getRegions().isRegionValid(ClueRegion.TIRANNWN), \"Tirannwn\"),\n\t\tWILDERNESS(c -\u003e c.getRegions().isRegionValid(ClueRegion.WILDERNESS), \"Wilderness\"),\n\t\tKOUREND(c -\u003e c.getRegions().isRegionValid(ClueRegion.KOUREND), \"Kourend\"),\n\t\tVARLAMORE(c -\u003e c.getRegions().isRegionValid(ClueRegion.VARLAMORE), \"Varlamore\"),\n\t\t;\n\n\t\tprivate final Predicate\u003cClues\u003e predicate;\n\t\tprivate final BaseClueFilter baseClueFilter;\n\n\t\tClueRegionFilter(Predicate\u003cClues\u003e predicate, String displayName)\n\t\t{\n\t\t\tthis.predicate \u003d predicate;\n\t\t\tthis.baseClueFilter \u003d new BaseClueFilter(displayName);\n\t\t}\n\n\t\t@Override\n\t\tpublic boolean test(Clues clue)\n\t\t{\n\t\t\treturn predicate.test(clue);\n\t\t}\n\n\t\tpublic List\u003cClues\u003e test(Collection\u003cClues\u003e helpers)\n\t\t{\n\t\t\treturn helpers.stream().filter(this).collect(Collectors.toList());\n\t\t}\n\n\t\tpublic static ClueRegionFilter[] displayFilters()\n\t\t{\n\t\t\treturn ClueRegionFilter.values();\n\t\t}\n\n\t\t@Override\n\t\tpublic String getDisplayName()\n\t\t{\n\t\t\treturn baseClueFilter.getDisplayName();\n\t\t}\n\t}\n\n\tenum ClueTagLocation\n\t{\n\t\tSPLIT(true, \"Split\"),\n\t\tTOP(false, \"Top\"),\n\t\tBOTTOM(false, \"Bottom\");\n\n\t\tClueTagLocation(Object selected, String displayName)\n\t\t{\n\t\t}\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showSidebar\",\n\t\tname \u003d \"Show sidebar\",\n\t\tdescription \u003d \"Customise clue details in a sidebar\",\n\t\tposition \u003d 1\n\t)\n\tdefault boolean showSidebar()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigSection(name \u003d \"Sidebar\", description \u003d \"Options that effect the sidebar\", position \u003d 2, closedByDefault \u003d true)\n\tString sidebarSection \u003d \"Sidebar\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"filterListByTier\",\n\t\tname \u003d \"Filter by tier\",\n\t\tdescription \u003d \"Configures what tier of clue to show\",\n\t\tsection \u003d sidebarSection,\n\t\tposition \u003d 1\n\t)\n\tdefault ClueTierFilter filterListByTier()\n\t{\n\t\treturn ClueTierFilter.SHOW_ALL;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"filterListByRegion\",\n\t\tname \u003d \"Filter by region\",\n\t\tdescription \u003d \"Configures what clues to show based on region they fall in\",\n\t\tsection \u003d sidebarSection,\n\t\tposition \u003d 2\n\t)\n\tdefault ClueRegionFilter filterListByRegion()\n\t{\n\t\treturn ClueRegionFilter.SHOW_ALL;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"orderListBy\",\n\t\tname \u003d \"Clue sidebar order\",\n\t\tdescription \u003d \"Configures which way to order the clue list\",\n\t\tsection \u003d sidebarSection,\n\t\tposition \u003d 3\n\t)\n\tdefault ClueOrdering orderListBy()\n\t{\n\t\treturn ClueOrdering.TIER;\n\t}\n\n\t@ConfigSection(name \u003d \"Marked Clues\", description \u003d \"Options that effect marked clues\", position \u003d 3)\n\tString markedCluesSection \u003d \"Marked Clues\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"markedClueDroppedNotification\",\n\t\tname \u003d \"Notify when a marked clue drops\",\n\t\tdescription \u003d \"Send a notification when a marked clue drops\",\n\t\tsection \u003d markedCluesSection,\n\t\tposition \u003d 1\n\t)\n\tdefault Notification markedClueDroppedNotification()\n\t{\n\t\treturn Notification.ON;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"onlyShowMarkedClues\",\n\t\tname \u003d \"Only show marked clues in the sidebar\",\n\t\tdescription \u003d \"Toggle whether to only show marked clues in the sidebar\",\n\t\tsection \u003d markedCluesSection,\n\t\tposition \u003d 5\n\t)\n\tdefault boolean onlyShowMarkedClues()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"highlightMarkedClues\",\n\t\tname \u003d \"Highlight marked clues\",\n\t\tdescription \u003d \"Toggle whether to highlight marked clues\",\n\t\tsection \u003d markedCluesSection,\n\t\tposition \u003d 2\n\t)\n\tdefault boolean highlightMarkedClues()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"highlightFeather\",\n\t\tname \u003d \"Highlighted feathering\",\n\t\tdescription \u003d \"Configure the feathering of highlighted clues\",\n\t\tsection \u003d markedCluesSection,\n\t\tposition \u003d 3\n\t)\n\tdefault int highlightFeather()\n\t{\n\t\treturn 10;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"outlineWidth\",\n\t\tname \u003d \"Highlighted outline width\",\n\t\tdescription \u003d \"Configure the outline width of highlighted clues\",\n\t\tsection \u003d markedCluesSection,\n\t\tposition \u003d 4\n\t)\n\tdefault int outlineWidth()\n\t{\n\t\treturn 4;\n\t}\n\n\t@ConfigSection(name \u003d \"Overlays\", description \u003d \"Options that effect overlays\", position \u003d 4)\n\tString overlaysSection \u003d \"Overlays\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showHoverText\",\n\t\tname \u003d \"Show hover text\",\n\t\tdescription \u003d \"Toggle whether to show tooltips on clue hover\",\n\t\tsection \u003d overlaysSection,\n\t\tposition \u003d 0\n\t)\n\tdefault boolean showHoverText()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showInventoryClueTags\",\n\t\tname \u003d \"Show clue tags\",\n\t\tdescription \u003d \"Toggle whether to show clue details as item tags\",\n\t\tsection \u003d overlaysSection,\n\t\tposition \u003d 1\n\t)\n\tdefault boolean showInventoryClueTags()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"clueTagLocation\",\n\t\tname \u003d \"Clue tag location\",\n\t\tdescription \u003d \"Configures where on the clue item to draw tags\",\n\t\tsection \u003d overlaysSection,\n\t\tposition \u003d 2\n\t)\n\tdefault ClueTagLocation clueTagLocation()\n\t{\n\t\treturn ClueTagLocation.SPLIT;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"clueTagSplit\",\n\t\tname \u003d \"Clue tag split sequence\",\n\t\tdescription \u003d \"Character sequence on which the tag will be split\",\n\t\tsection \u003d overlaysSection,\n\t\tposition \u003d 3\n\t)\n\tdefault String clueTagSplit()\n\t{\n\t\treturn \": \";\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showInventoryCluesOverlay\",\n\t\tname \u003d \"Show inventory overlay\",\n\t\tdescription \u003d \"Toggle whether to show an overlay with details on all clues in your inventory\",\n\t\tsection \u003d overlaysSection,\n\t\tposition \u003d 4\n\t)\n\tdefault boolean showInventoryCluesOverlay()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"changeClueText\",\n\t\tname \u003d \"Change ground item menu text\",\n\t\tdescription \u003d \"Toggle whether to change the ground item menu text to the clue detail\",\n\t\tsection \u003d overlaysSection,\n\t\tposition \u003d 5\n\t)\n\tdefault boolean changeClueText()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"highlightInventoryClueScrolls\",\n\t\tname \u003d \"Inventory tag clue scrolls\",\n\t\tdescription \u003d \"Toggle whether to apply inventory tags to clues with clue details color\" +\n\t\t\t\"\u003cbr\u003eDisplay mode is managed by Inventory Tags configuration\",\n\t\tsection \u003d overlaysSection,\n\t\tposition \u003d 6\n\t)\n\tdefault boolean highlightInventoryClueScrolls()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"highlightInventoryClueItems\",\n\t\tname \u003d \"Inventory tag clue items\",\n\t\tdescription \u003d \"Toggle whether to apply inventory tags to configured items for each clue in your inventory\" +\n\t\t\t\"\u003cbr\u003eDisplay mode is managed by Inventory Tags configuration\",\n\t\tsection \u003d overlaysSection,\n\t\tposition \u003d 7\n\t)\n\tdefault boolean highlightInventoryClueItems()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"highlightInventoryClueWidgets\",\n\t\tname \u003d \"Highlight clue widgets\",\n\t\tdescription \u003d \"Toggle whether to highlight widgets configured for each clue in your inventory.\" +\n\t\t\t\"\u003cbr\u003eOpacity will always be used from \u0027Clue widgets color\u0027\",\n\t\tsection \u003d overlaysSection,\n\t\tposition \u003d 8\n\t)\n\tdefault boolean highlightInventoryClueWidgets()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigSection(name \u003d \"Overlay Colors\", description \u003d \"Options that effect overlay colors\", position \u003d 5)\n\tString overlayColorsSection \u003d \"Overlay Colors\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"colorHoverText\",\n\t\tname \u003d \"Color hover text\",\n\t\tdescription \u003d \"Toggle whether to apply clue details color to hover text\",\n\t\tsection \u003d overlayColorsSection,\n\t\tposition \u003d 0\n\t)\n\tdefault boolean colorHoverText()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"colorInventoryClueTags\",\n\t\tname \u003d \"Color clue tags\",\n\t\tdescription \u003d \"Toggle whether to apply clue details color to clue tags\",\n\t\tsection \u003d overlayColorsSection,\n\t\tposition \u003d 1\n\t)\n\tdefault boolean colorInventoryClueTags()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"colorInventoryCluesOverlay\",\n\t\tname \u003d \"Color inventory overlay\",\n\t\tdescription \u003d \"Toggle whether to apply clue details color to inventory overlay\",\n\t\tsection \u003d overlayColorsSection,\n\t\tposition \u003d 2\n\t)\n\tdefault boolean colorInventoryCluesOverlay()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"colorChangeClueText\",\n\t\tname \u003d \"Color ground item menu text\",\n\t\tdescription \u003d \"Toggle whether to apply clue details color to ground item menu text\",\n\t\tsection \u003d overlayColorsSection,\n\t\tposition \u003d 3\n\t)\n\tdefault boolean colorChangeClueText()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"colorInventoryClueItems\",\n\t\tname \u003d \"Color clue items\",\n\t\tdescription \u003d \"Toggle whether apply clue details color to clue items inventory tags\",\n\t\tsection \u003d overlayColorsSection,\n\t\tposition \u003d 4\n\t)\n\tdefault boolean colorInventoryClueItems()\n\t{\n\t\treturn true;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"itemHighlightColor\",\n\t\tname \u003d \"Clue items color\",\n\t\tdescription \u003d \"Clue items inventory tag color used when Color clue items is toggled off\",\n\t\tsection \u003d overlayColorsSection,\n\t\tposition \u003d 5\n\t)\n\tdefault Color itemHighlightColor()\n\t{\n\t\treturn Color.YELLOW.darker();\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"colorInventoryClueWidgets\",\n\t\tname \u003d \"Color clue widgets\",\n\t\tdescription \u003d \"Toggle whether apply clue details color to clue widgets\",\n\t\tsection \u003d overlayColorsSection,\n\t\tposition \u003d 6\n\t)\n\tdefault boolean colorInventoryClueWidgets()\n\t{\n\t\treturn true;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"widgetHighlightColor\",\n\t\tname \u003d \"Clue widgets color\",\n\t\tdescription \u003d \"Clue widgets color used when \\\"Color clue widgets\\\" is toggled on\",\n\t\tsection \u003d overlayColorsSection,\n\t\tposition \u003d 7\n\t)\n\tdefault Color widgetHighlightColor()\n\t{\n\t\tColor baseColor \u003d Color.YELLOW.darker();\n\t\treturn new Color(baseColor.getRed(), baseColor.getGreen(), baseColor.getBlue(), 128);\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"colorGroundItems\",\n\t\tname \u003d \"Overwrite Ground Items colors\",\n\t\tdescription \u003d \"When updating clue details colors, apply the color to the clue scroll via the Ground Items plugin\" +\n\t\t\t\"\u003cbr\u003eDoes not apply to Beginner and Master clues. Set color to #FFFFFF to reset.\",\n\t\tsection \u003d overlayColorsSection,\n\t\tposition \u003d 9\n\t)\n\tdefault boolean colorGroundItems()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"colorInventoryTags\",\n\t\tname \u003d \"Overwrite Inventory Tags colors\",\n\t\tdescription \u003d \"When updating clue details colors, apply the color to the clue scroll via the Inventory Tags plugin\" +\n\t\t\t\"\u003cbr\u003eDoes not  apply to Beginner and Master clues. Set color to #FFFFFF to reset.\",\n\t\tsection \u003d overlayColorsSection,\n\t\tposition \u003d 8\n\t)\n\tdefault boolean colorInventoryTags()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigSection(name \u003d \"Ground Clues\", description \u003d \"Options that effect ground clues overlay (only supports Beginner and Master clues\", position \u003d 6)\n\tString groundCluesSection \u003d \"Ground Clues\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showGroundClues\",\n\t\tname \u003d \"Show ground clues\",\n\t\tdescription \u003d \"Toggle whether to show ground clues overlay\",\n\t\tsection \u003d groundCluesSection,\n\t\tposition \u003d 0\n\t)\n\tdefault boolean showGroundClues()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"changeGroundClueText\",\n\t\tname \u003d \"Change ground clue text\",\n\t\tdescription \u003d \"Toggle whether to change the ground clue text to the clue detail\",\n\t\tsection \u003d groundCluesSection,\n\t\tposition \u003d 1\n\t)\n\tdefault boolean changeGroundClueText()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showGroundCluesDespawn\",\n\t\tname \u003d \"Show ground clues despawn\",\n\t\tdescription \u003d \"Toggle whether to add despawn timers to the ground clues overlay\",\n\t\tsection \u003d groundCluesSection,\n\t\tposition \u003d 2\n\t)\n\tdefault boolean showGroundCluesDespawn()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"collapseGroundClues\",\n\t\tname \u003d \"Collapse ground clues by step\",\n\t\tdescription \u003d \"Toggle whether to combine duplicate steps in the ground clues overlay\",\n\t\tsection \u003d groundCluesSection,\n\t\tposition \u003d 3\n\t)\n\tdefault boolean collapseGroundClues()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"collapseGroundCluesByTier\",\n\t\tname \u003d \"Collapse ground clues by tier\",\n\t\tdescription \u003d \"Toggle whether to combine duplicate tiers in the ground clues overlay\" +\n\t\t\t\"\u003cbr\u003e\u003ci\u003eNot compatible with \u0027Change ground clue text\u0027\u003c/i\u003e\",\n\t\tsection \u003d groundCluesSection,\n\t\tposition \u003d 4\n\t)\n\tdefault boolean collapseGroundCluesByTier()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"reverseGroundCluesOverlay\",\n\t\tname \u003d \"Reverse ground clues overlay\",\n\t\tdescription \u003d \"Reverses the ground clues overlay to render under item(s) rather than on top\",\n\t\tsection \u003d groundCluesSection,\n\t\tposition \u003d 5\n\t)\n\tdefault boolean reverseGroundCluesOverlay()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"colorGroundClues\",\n\t\tname \u003d \"Color ground clues\",\n\t\tdescription \u003d \"Toggle whether to apply clue details color to ground clue text\",\n\t\tsection \u003d groundCluesSection,\n\t\tposition \u003d 6\n\t)\n\tdefault boolean colorGroundClues()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showGroundClueTimers\",\n\t\tname \u003d \"Show ground clue timers\",\n\t\tdescription \u003d \"Toggle whether to show timer infoboxes for ground clues\",\n\t\twarning \u003d \"Experimental feature! Timers may not behave as expected. Please use caution\",\n\t\tsection \u003d groundCluesSection,\n\t\tposition \u003d 7\n\t)\n\tdefault boolean showGroundClueTimers()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"groundClueTimersNotificationTime\",\n\t\tname \u003d \"Timer notifications\",\n\t\tdescription \u003d \"Seconds remaining until despawn per tile to send notification. Set to 0 to disable the notification.\",\n\t\tsection \u003d groundCluesSection,\n\t\tposition \u003d 8\n\t)\n\tdefault int groundClueTimersNotificationTime()\n\t{\n\t\treturn 60;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"groundClueTimersRenotificationTime\",\n\t\tname \u003d \"Timer renotifications\",\n\t\tdescription \u003d \"Seconds after initial notification to periodically renotify. Set to 0 to disable the notification.\" +\n\t\t\t\"\u003cbr\u003e This also acts as a cooldown between notifications for clues in the same tile\",\n\t\tsection \u003d groundCluesSection,\n\t\tposition \u003d 9\n\t)\n\tdefault int groundClueTimersRenotificationTime()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"groundClueTimersDecreaseIdleTimeout\",\n\t\tname \u003d \"Lower idle logout on notification\",\n\t\tdescription \u003d \"Lowers idle logout timer when ground clue despawn notification happens.\" +\n\t\t\t\"\u003cbr\u003e Minimum is 5 minutes: recommend \u0027Timer notifications\u0027 set to 300 or higher.\" +\n\t\t\t\"\u003cbr\u003e Uses Logout Timer plugin config when resetting idle timer.\",\n\t\tsection \u003d groundCluesSection,\n\t\tposition \u003d 10\n\t)\n\tdefault boolean decreaseIdleTimeout()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigSection(name \u003d \"Tier Toggles\", description \u003d \"Options to enable particular clue tiers\", position \u003d 7)\n\tString tierTogglesSection \u003d \"Tier Toggles\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"beginnerDetails\",\n\t\tname \u003d \"Beginner clues\",\n\t\tdescription \u003d \"Beginner clue details are shown\",\n\t\tsection \u003d tierTogglesSection,\n\t\tposition \u003d 0\n\t)\n\tdefault boolean beginnerDetails()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"easyDetails\",\n\t\tname \u003d \"Easy clues\",\n\t\tdescription \u003d \"Easy clue details are shown\",\n\t\tsection \u003d tierTogglesSection,\n\t\tposition \u003d 1\n\t)\n\tdefault boolean easyDetails()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"mediumDetails\",\n\t\tname \u003d \"Medium clues\",\n\t\tdescription \u003d \"Medium clue details are shown\",\n\t\tsection \u003d tierTogglesSection,\n\t\tposition \u003d 2\n\t)\n\tdefault boolean mediumDetails()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"hardDetails\",\n\t\tname \u003d \"Hard clues\",\n\t\tdescription \u003d \"Hard clue details are shown\",\n\t\tsection \u003d tierTogglesSection,\n\t\tposition \u003d 3\n\t)\n\tdefault boolean hardDetails()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"eliteDetails\",\n\t\tname \u003d \"Elite clues\",\n\t\tdescription \u003d \"Elite clue details are shown\",\n\t\tsection \u003d tierTogglesSection,\n\t\tposition \u003d 4\n\t)\n\tdefault boolean eliteDetails()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"masterDetails\",\n\t\tname \u003d \"Master clues\",\n\t\tdescription \u003d \"Master clue details are shown\",\n\t\tsection \u003d tierTogglesSection,\n\t\tposition \u003d 5\n\t)\n\tdefault boolean masterDetails()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigSection(name \u003d \"Helpers\", description \u003d \"Options to configure particular helper features\", position \u003d 8)\n\tString helperSection \u003d \"helperSection\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"threeStepperSaver\",\n\t\tname \u003d \"Three-stepper saver\",\n\t\tdescription \u003d \"Allows you to set a three-step master clue you wish to save, removing the ability to combine torn scrolls when the set clue is in your inventory\",\n\t\tsection \u003d helperSection,\n\t\tposition \u003d 0\n\t)\n\tdefault boolean threeStepperSaver()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"highlightSavedThreeStepper\",\n\t\tname \u003d \"Highlight saved three-stepper\",\n\t\tdescription \u003d \"Configures where to highlight your saved three-stepper\",\n\t\tsection \u003d helperSection,\n\t\tposition \u003d 1\n\t)\n\tdefault SavedThreeStepperEnum highlightSavedThreeStepper()\n\t{\n\t\treturn SavedThreeStepperEnum.OFF;\n\t}\n\n\tenum SavedThreeStepperEnum\n\t{\n\t\tOFF,\n\t\tGROUND,\n\t\tINVENTORY,\n\t\tBOTH\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"groundThreeStepperHighlightColor\",\n\t\tname \u003d \"Ground saved three-stepper highlight color\",\n\t\tdescription \u003d \"Configures the color for highlighted saved three-stepper on the ground\",\n\t\tsection \u003d helperSection,\n\t\tposition \u003d 2\n\t)\n\tdefault Color groundThreeStepperHighlightColor()\n\t{\n\t\treturn Color.GREEN.darker();\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"threeStepperHighlightColor\",\n\t\tname \u003d \"Inventory saved three-stepper highlight color\",\n\t\tdescription \u003d \"Configures the color for highlighted saved three-stepper in inventory\",\n\t\tsection \u003d helperSection,\n\t\tposition \u003d 3\n\t)\n\tdefault Color invThreeStepperHighlightColor()\n\t{\n\t\treturn Color.GREEN.darker();\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"fairyRingAutoScroll\",\n\t\tname \u003d \"Fairy ring auto-scroll\",\n\t\tdescription \u003d \"Automatically scroll the fairy ring interface to a code if found in your current clue detail text\",\n\t\tsection \u003d helperSection,\n\t\tposition \u003d 4\n\t)\n\tdefault boolean fairyRingAutoScroll()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"inventoryClueChatMessages\",\n\t\tname \u003d \"Inventory clue chat messages\",\n\t\tdescription \u003d \"Sends a console message containing the Clue Detail text when an identified clue enters your inventory\",\n\t\tsection \u003d helperSection,\n\t\tposition \u003d 5\n\t)\n\tdefault boolean inventoryClueChatMessages()\n\t{\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\ClueDetailsConfig.java"},{"fileName":"ClueDetailsInventoryOverlay.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport javax.inject.Inject;\n\nimport javax.inject.Singleton;\nimport net.runelite.api.Client;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.Item;\nimport net.runelite.api.ItemContainer;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.components.LineComponent;\n\n@Singleton\npublic class ClueDetailsInventoryOverlay extends OverlayPanel\n{\n\tprivate final Client client;\n\tprivate final ClueDetailsConfig config;\n\tprivate final ConfigManager configManager;\n\t@Inject\n\tprivate ClueInventoryManager clueInventoryManager;\n\n\tprivate static final Color TITLED_CONTENT_COLOR \u003d new Color(190, 190, 190);\n\n\t@Inject\n\tpublic ClueDetailsInventoryOverlay(Client client, ClueDetailsConfig config, ConfigManager configManager)\n\t{\n\t\tsetPriority(PRIORITY_LOW);\n\n\t\tthis.client \u003d client;\n\t\tthis.config \u003d config;\n\t\tthis.configManager \u003d configManager;\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (config.showInventoryCluesOverlay())\n\t\t{\n\t\t\tcreateInventoryCluesOverlay();\n\t\t}\n\n\t\treturn super.render(graphics);\n\t}\n\n\tprivate void createInventoryCluesOverlay()\n\t{\n\t\tItemContainer inventory \u003d client.getItemContainer(InventoryID.INVENTORY);\n\t\tif (inventory \u003d\u003d null || clueInventoryManager \u003d\u003d null ) return;\n\n\t\tfor (Integer itemID : clueInventoryManager.getCluesInInventory())\n\t\t{\n\t\t\tif (itemID \u003d\u003d null) continue;\n\t\t\tClueInstance instance \u003d clueInventoryManager.getClueByClueItemId(itemID);\n\t\t\tif (instance \u003d\u003d null) continue;\n\n\t\t\tinstance.getClueIds().forEach((clueId) -\u003e\n\t\t\t{\n\t\t\t\tColor color \u003d TITLED_CONTENT_COLOR;\n\t\t\t\tClues clue \u003d Clues.forClueIdFiltered(clueId);\n\t\t\t\tif (clue \u003d\u003d null) return;\n\t\t\t\tif (clue.isEnabled(config))\n\t\t\t\t{\n\t\t\t\t\tif (config.colorInventoryCluesOverlay())\n\t\t\t\t\t{\n\t\t\t\t\t\tcolor \u003d clue.getDetailColor(configManager);\n\t\t\t\t\t}\n\n\t\t\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t\t\t.left(clue.getDetail(configManager))\n\t\t\t\t\t\t.leftColor(color)\n\t\t\t\t\t\t.build());\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\ClueDetailsInventoryOverlay.java"},{"fileName":"ClueDetailsItemsOverlay.java","content":"/*\n * Copyright (c) 2024, TheLope \u003chttps://github.com/TheLope\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport com.google.common.cache.Cache;\nimport com.google.common.cache.CacheBuilder;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Image;\nimport java.awt.Rectangle;\nimport java.awt.image.BufferedImage;\nimport java.util.List;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport net.runelite.api.Client;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.ItemContainer;\nimport net.runelite.api.ItemID;\nimport net.runelite.api.widgets.InterfaceID;\nimport net.runelite.api.widgets.WidgetItem;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.plugins.inventorytags.InventoryTagsConfig;\nimport net.runelite.client.ui.overlay.WidgetItemOverlay;\nimport net.runelite.client.util.ColorUtil;\nimport net.runelite.client.util.ImageUtil;\n\n@Singleton\npublic class ClueDetailsItemsOverlay extends WidgetItemOverlay\n{\n\tprivate final Client client;\n\tprivate final ClueDetailsPlugin clueDetailsPlugin;\n\tprivate final ClueDetailsConfig config;\n\tprivate final ConfigManager configManager;\n\tprivate final ClueInventoryManager clueInventoryManager;\n\tprivate final ItemManager itemManager;\n\tprivate final Cache\u003cLong, Image\u003e fillCache;\n\tprivate final Cache\u003cInteger, Clues\u003e clueCache;\n\n\t@Inject\n\tpublic ClueDetailsItemsOverlay(Client client, ClueDetailsPlugin clueDetailsPlugin, ClueDetailsConfig config,\n\t                               ConfigManager configManager, ItemManager itemManager, ClueInventoryManager clueInventoryManager)\n\t{\n\t\tthis.clueDetailsPlugin \u003d clueDetailsPlugin;\n\t\tthis.itemManager \u003d itemManager;\n\t\tthis.client \u003d client;\n\t\tthis.config \u003d config;\n\t\tthis.configManager \u003d configManager;\n\t\tthis.clueInventoryManager \u003d clueInventoryManager;\n\t\tshowOnBank();\n\t\tshowOnEquipment();\n\t\tshowOnInventory();\n\t\tfillCache \u003d CacheBuilder.newBuilder()\n\t\t\t.concurrencyLevel(1)\n\t\t\t.maximumSize(32)\n\t\t\t.build();\n\t\tclueCache \u003d CacheBuilder.newBuilder()\n\t\t\t.concurrencyLevel(1)\n\t\t\t.maximumSize(39)\n\t\t\t.build();\n\t\tsetPriority(-1); // run before inventory tags\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (config.highlightInventoryClueScrolls() || config.highlightInventoryClueItems())\n\t\t{\n\t\t\tpopulateCache();\n\t\t}\n\n\t\treturn super.render(graphics);\n\t}\n\n\tprivate void populateCache()\n\t{\n\t\tItemContainer inventory \u003d client.getItemContainer(InventoryID.INVENTORY);\n\t\tif (inventory \u003d\u003d null || clueInventoryManager \u003d\u003d null ) return;\n\n\t\tfor (Integer itemID : clueInventoryManager.getCluesInInventory())\n\t\t{\n\t\t\tif (itemID \u003d\u003d null) continue;\n\t\t\tClueInstance instance \u003d clueInventoryManager.getClueByClueItemId(itemID);\n\t\t\tif (instance \u003d\u003d null) continue;\n\n\t\t\tinstance.getClueIds().forEach((clueId) -\u003e\n\t\t\t{\n\t\t\t\tClues clue \u003d Clues.forClueIdFiltered(clueId);\n\t\t\t\tif (clue \u003d\u003d null) return;\n\t\t\t\tif (clue.isEnabled(config))\n\t\t\t\t{\n\t\t\t\t\tif (config.highlightInventoryClueScrolls())\n\t\t\t\t\t{\n\t\t\t\t\t\tcacheClueScrolls(clue);\n\t\t\t\t\t}\n\t\t\t\t\tif (config.highlightInventoryClueItems())\n\t\t\t\t\t{\n\t\t\t\t\t\tcacheClueItems(clue);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate void cacheClueScrolls(Clues clue)\n\t{\n\t\tint clueItemID \u003d clue.getItemID();\n\n\t\t// Convert beginner map clues\n\t\tif (clueItemID \u003e\u003d InterfaceID.CLUE_BEGINNER_MAP_CHAMPIONS_GUILD\n\t\t\t\u0026\u0026 clueItemID \u003c\u003d InterfaceID.CLUE_BEGINNER_MAP_WIZARDS_TOWER)\n\t\t{\n\t\t\tclueItemID \u003d ItemID.CLUE_SCROLL_BEGINNER;\n\t\t}\n\n\t\tclueCache.put(clueItemID, clue);\n\t}\n\n\tprivate void cacheClueItems(Clues clue)\n\t{\n\t\tList\u003cInteger\u003e highlightItems \u003d clue.getItems(clueDetailsPlugin, configManager);\n\n\t\tif (highlightItems \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\thighlightItems.forEach(item -\u003e clueCache.put(item, clue));\n\t}\n\n\t@Override\n\tpublic void renderItemOverlay(Graphics2D graphics, int itemId, WidgetItem widgetItem)\n\t{\n\t\tfinal Clues clue \u003d clueCache.getIfPresent(itemId);\n\t\tif (clue \u003d\u003d null || clue.getClueDetailColor() \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tColor color \u003d clue.getDetailColor(configManager);\n\n\t\t// Apply default item highlight color\n\t\tif (!Clues.isClue(itemId, clueDetailsPlugin.isDeveloperMode()) \u0026\u0026 !config.colorInventoryClueItems())\n\t\t{\n\t\t\tcolor \u003d config.itemHighlightColor();\n\t\t}\n\n\t\tinventoryTagsOverlay(graphics, itemId, widgetItem, color);\n\t}\n\n\tpublic void inventoryTagsOverlay(Graphics2D graphics, int itemId, WidgetItem widgetItem, Color color)\n\t{\n\t\tRectangle bounds \u003d widgetItem.getCanvasBounds();\n\t\tif (Boolean.TRUE.equals(configManager.getConfiguration(InventoryTagsConfig.GROUP,\n\t\t\t\"showTagOutline\", Boolean.class)))\n\t\t{\n\t\t\tfinal BufferedImage outline \u003d itemManager.getItemOutline(itemId, widgetItem.getQuantity(), color);\n\t\t\tgraphics.drawImage(outline, (int) bounds.getX(), (int) bounds.getY(), null);\n\t\t}\n\n\t\tif (Boolean.TRUE.equals(configManager.getConfiguration(InventoryTagsConfig.GROUP,\n\t\t\t\"tagFill\", Boolean.class)))\n\t\t{\n\t\t\tfinal Image image \u003d getFillImage(color, widgetItem.getId(), widgetItem.getQuantity());\n\t\t\tgraphics.drawImage(image, (int) bounds.getX(), (int) bounds.getY(), null);\n\t\t}\n\n\t\tif (Boolean.TRUE.equals(configManager.getConfiguration(InventoryTagsConfig.GROUP,\n\t\t\t\"tagUnderline\", Boolean.class)))\n\t\t{\n\t\t\tint heightOffSet \u003d (int) bounds.getY() + (int) bounds.getHeight() + 2;\n\t\t\tgraphics.setColor(color);\n\t\t\tgraphics.drawLine((int) bounds.getX(), heightOffSet, (int) bounds.getX() + (int) bounds.getWidth(), heightOffSet);\n\t\t}\n\t}\n\n\tprivate Image getFillImage(Color color, int itemId, int qty)\n\t{\n\t\tlong key \u003d (((long) itemId) \u003c\u003c 32) | qty;\n\t\tImage image \u003d fillCache.getIfPresent(key);\n\t\tif (image \u003d\u003d null)\n\t\t{\n\t\t\tfinal Color fillColor \u003d ColorUtil.colorWithAlpha(color,\n\t\t\t\tInteger.parseInt(configManager.getConfiguration(InventoryTagsConfig.GROUP,  \"fillOpacity\")));\n\t\t\timage \u003d ImageUtil.fillImage(itemManager.getImage(itemId, qty, false), fillColor);\n\t\t\tfillCache.put(key, image);\n\t\t}\n\t\treturn image;\n\t}\n\n\tvoid invalidateCache()\n\t{\n\t\tfillCache.invalidateAll();\n\t\tclueCache.invalidateAll();\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\ClueDetailsItemsOverlay.java"},{"fileName":"ClueDetailsOverlay.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://www.github.com/Zoinkwiz\u003e\n * Copyright (c) 2017, Aria \u003caria@ar1as.space\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport com.google.common.collect.ArrayListMultimap;\nimport com.google.common.collect.ImmutableList;\nimport com.google.common.collect.Multimap;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Polygon;\nimport java.util.*;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\nimport java.util.stream.Collectors;\nimport java.util.stream.Stream;\nimport javax.inject.Inject;\n\nimport javax.inject.Singleton;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.Menu;\nimport net.runelite.api.MenuAction;\nimport net.runelite.api.MenuEntry;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Player;\nimport net.runelite.api.Point;\nimport net.runelite.api.Tile;\nimport net.runelite.api.TileItem;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.ClientTick;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.ItemDespawned;\nimport net.runelite.api.events.ItemSpawned;\nimport net.runelite.api.events.MenuOpened;\nimport net.runelite.client.Notifier;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.ui.JagexColors;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.LineComponent;\nimport net.runelite.client.ui.overlay.outline.ModelOutlineRenderer;\nimport net.runelite.client.ui.overlay.tooltip.Tooltip;\nimport net.runelite.client.ui.overlay.tooltip.TooltipManager;\nimport net.runelite.client.util.Text;\n\n@Singleton\npublic class ClueDetailsOverlay extends OverlayPanel\n{\n\tprivate final Client client;\n\tprivate final ClueDetailsConfig config;\n\tprivate final TooltipManager tooltipManager;\n\n\tprotected ModelOutlineRenderer modelOutlineRenderer;\n\tprivate final ConfigManager configManager;\n\n\tprivate final Notifier notifier;\n\tprivate final ClueDetailsPlugin clueDetailsPlugin;\n\tprivate final ClueGroundManager clueGroundManager;\n\tprivate final ClueInventoryManager clueInventoryManager;\n\n\tprotected Multimap\u003cTile, Integer\u003e tileHighlights \u003d ArrayListMultimap.create();\n\n\tprotected static final int MAX_DISTANCE \u003d 2350;\n\tprotected static final int SCENE_TO_LOCAL \u003d 128;\n\n\t@Inject\n\tpublic ClueDetailsOverlay(Client client, ClueDetailsPlugin clueDetailsPlugin, ClueDetailsConfig config, ClueGroundManager clueGroundManager,\n\t                          ClueInventoryManager clueInventoryManager, TooltipManager tooltipManager, ModelOutlineRenderer modelOutlineRenderer,\n\t                          ConfigManager configManager, Notifier notifier)\n\t{\n\t\tsetPriority(PRIORITY_HIGHEST);\n\t\tsetLayer(OverlayLayer.ABOVE_WIDGETS);\n\t\tsetDragTargetable(false);\n\t\tsetPosition(OverlayPosition.TOOLTIP);\n\n\t\tthis.client \u003d client;\n\t\tthis.clueDetailsPlugin \u003d clueDetailsPlugin;\n\t\tthis.clueGroundManager \u003d clueGroundManager;\n\t\tthis.clueInventoryManager \u003d clueInventoryManager;\n\t\tthis.config \u003d config;\n\t\tthis.tooltipManager \u003d tooltipManager;\n\t\tthis.modelOutlineRenderer \u003d modelOutlineRenderer;\n\t\tthis.configManager \u003d configManager;\n\t\tthis.notifier \u003d notifier;\n\n\t\ttileHighlights.clear();\n\t\tif (client.getGameState() \u003d\u003d GameState.LOGGING_IN)\n\t\t{\n\t\t\trefreshHighlights();\n\t\t}\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (client.isMenuOpen())\n\t\t{\n\t\t\tshowMenuItem();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (config.showHoverText())\n\t\t\t{\n\t\t\t\tshowHoveredItem();\n\t\t\t}\n\t\t}\n\n\t\ttileHighlights.keySet().forEach(tile -\u003e checkAllTilesForHighlighting(tile, tileHighlights.get(tile)));\n\n\t\treturn super.render(graphics);\n\t}\n\n\tprivate void showHoveredItem()\n\t{\n\t\tMenu menu \u003d client.getMenu();\n\t\tMenuEntry[] menuEntries \u003d menu.getMenuEntries();\n\t\tint last \u003d menuEntries.length - 1;\n\n\t\tif (last \u003c 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tMenuEntry menuEntry \u003d menuEntries[last];\n\t\tMenuEntryAndPos menuEntryAndPos \u003d new MenuEntryAndPos(menuEntry, last, 0);\n\n\t\tif (!isTakeClue(menuEntry) \u0026\u0026 !isReadClue(menuEntry))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (isReadClue(menuEntry) \u0026\u0026 (config.showInventoryClueTags() || (config.showInventoryCluesOverlay())))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tString clueText \u003d getText(menuEntryAndPos, config.colorHoverText(), false);\n\n\t\tif (clueText \u003d\u003d null) return;\n\n\t\t// Hide tooltip when changeClueText enabled except for master three-step cryptic\n\t\tif (isTakeClue(menuEntry) \u0026\u0026 config.changeClueText() \u0026\u0026 !clueText.contains(\"\u003cbr\u003e\"))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// tooltip only supports \u003c/br\u003e for multiline strings\n\t\tString tooltipClueText \u003d clueText.replaceAll(\"\u003cbr\u003e\", \"\u003c/br\u003e\");\n\t\ttooltipManager.add(new Tooltip(tooltipClueText));\n\t}\n\n\tprivate void showMenuItem()\n\t{\n\t\tif (!(config.showHoverText() \u0026\u0026 !config.changeClueText())) return;\n\t\tMenu menu \u003d client.getMenu();\n\t\tMenuEntry[] currentMenuEntries \u003d menu.getMenuEntries();\n\n\t\tif (currentMenuEntries \u003d\u003d null) return;\n\n\t\t//If on floor tile\n\t\tif (Arrays.stream(currentMenuEntries).noneMatch(this::isTakeClue))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\taddTooltip(getEntriesByTile(currentMenuEntries));\n\t}\n\n\t// Using onClientTick for compatibility with Ground Items \"Collapse ground item menu\"\n\t@Subscribe\n\tpublic void onClientTick(ClientTick event)\n\t{\n\t\tif (!(config.changeClueText() || config.colorChangeClueText())) return;\n\t\tfinal MenuEntry[] menuEntries \u003d client.getMenu().getMenuEntries();\n\n\t\tif (Arrays.stream(menuEntries).noneMatch(this::isTakeClue))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// Don\u0027t run when client.isMenuOpen due to conflict with Ground Items \"Collapse ground item menu\"\n\t\tif (!client.isMenuOpen())\n\t\t{\n\t\t\tchangeGroundItemMenu(getEntriesByTile(menuEntries));\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOpened(MenuOpened event)\n\t{\n\t\tif (!config.changeClueText()) return;\n\n\t\tMenuEntry[] entries \u003d event.getMenuEntries();\n\t\tif (Arrays.stream(entries).noneMatch(this::isTakeClue))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\taddClueSubmenus(getEntriesByTile(entries));\n\t}\n\n\tprivate void changeGroundItemMenu(List\u003cMenuEntryAndPos\u003e entriesByTile)\n\t{\n\t\tint threeStepCount \u003d 0;\n\t\t// Change ground item menu text\n\t\tfor (MenuEntryAndPos entryAndPos : entriesByTile)\n\t\t{\n\t\t\tMenuEntry menuEntry \u003d entryAndPos.getMenuEntry();\n\t\t\tif (!isTakeOrMarkClue(menuEntry)) continue;\n\t\t\tboolean showColor \u003d shouldShowColor(menuEntry);\n\t\t\tString regex \u003d \"(Clue scroll \\\\(.*?\\\\)( x [0-9]+)?|Challenge scroll \\\\(.*?\\\\)( x [0-9]+)?)\";\n\t\t\tif (clueDetailsPlugin.isDeveloperMode())\n\t\t\t{\n\t\t\t\tregex \u003d \"(Daeyalt essence|Clue scroll \\\\(.*?\\\\)( x [0-9]+)?|Challenge scroll \\\\(.*?\\\\)( x [0-9]+)?)\";\n\t\t\t}\n\n\t\t\t// Compile the pattern\n\t\t\tPattern pattern \u003d Pattern.compile(regex);\n\t\t\tMatcher matcher \u003d pattern.matcher(menuEntry.getTarget());\n\n\t\t\tString newText;\n\t\t\t// Change ground item menu text \u0026 color\n\t\t\tif (config.changeClueText())\n\t\t\t{\n\t\t\t\tnewText \u003d getText(entryAndPos, showColor, true);\n\t\t\t}\n\t\t\t// Change ground item menu color\n\t\t\telse\n\t\t\t{\n\t\t\t\tnewText \u003d recolorText(entryAndPos);\n\t\t\t}\n\n\t\t\tif (newText \u003d\u003d null) continue;\n\n\t\t\t// Handle master three-step cryptic\n\t\t\tif (newText.split(\"\u003cbr\u003e\").length \u003e 1)\n\t\t\t{\n\t\t\t\t// Add unique col tag for compatibility with Ground Items \"Collapse ground item menu\"\n\t\t\t\tnewText \u003d \"Three-step (master)\u003ccol\u003d\" + String.format(\"%0\" + 8 + \"d\", threeStepCount) + \"\u003e\";\n\t\t\t\tthreeStepCount++;\n\t\t\t}\n\t\t\t// Replace the matched text with the new text\n\t\t\tString newTarget \u003d matcher.replaceAll(newText);\n\n\t\t\tmenuEntry.setTarget(newTarget);\n\t\t}\n\t}\n\n\tprivate void addClueSubmenus(List\u003cMenuEntryAndPos\u003e entriesByTile)\n\t{\n\t\t// Add submenus to three-step cryptic clues\n\t\tfor (MenuEntryAndPos entryAndPos : entriesByTile)\n\t\t{\n\t\t\tMenuEntry menuEntry \u003d entryAndPos.getMenuEntry();\n\n\t\t\tboolean showColor \u003d shouldShowColor(menuEntry);\n\n\t\t\tString newText \u003d getText(entryAndPos, showColor, false);\n\t\t\tif (newText \u003d\u003d null || !isTakeOrMarkClue(menuEntry)) continue;\n\n\t\t\tString[] newTexts \u003d newText.split(\"\u003cbr\u003e\");\n\n\t\t\t// TODO: Text doesn\u0027t update after details changed\n\t\t\t// TODO: Doesn\u0027t update when torn parts obtained\n\t\t\tif (newTexts.length \u003e 1)\n\t\t\t{\n\t\t\t\tMenu submenu \u003d menuEntry.createSubMenu();\n\n\t\t\t\tfor (String text : ImmutableList.copyOf(newTexts).reverse())\n\t\t\t\t{\n\t\t\t\t\tsubmenu.createMenuEntry(-1)\n\t\t\t\t\t\t.setOption(text)\n\t\t\t\t\t\t.setType(MenuAction.RUNELITE);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate boolean shouldShowColor(MenuEntry menuEntry)\n\t{\n\t\t// Only change color if it is not the default\n\t\tboolean showColor \u003d config.colorChangeClueText();\n\t\tif (showColor)\n\t\t{\n\t\t\tint scrollID \u003d getScrollID(menuEntry);\n\t\t\tClues matchingClue \u003d Clues.forItemId(scrollID);\n\n\t\t\tif (matchingClue !\u003d null)\n\t\t\t{\n\t\t\t\tif (matchingClue.getDetailColor(configManager) \u003d\u003d Color.WHITE)\n\t\t\t\t{\n\t\t\t\t\tshowColor \u003d false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn showColor;\n\t}\n\n\tprivate void addTooltip(List\u003cMenuEntryAndPos\u003e relevantMenuEntries)\n\t{\n\t\tPoint mousePosition \u003d client.getMouseCanvasPosition();\n\t\tint menuX \u003d client.getMenu().getMenuX();\n\t\tint menuY \u003d client.getMenu().getMenuY();\n\t\tint menuWidth \u003d client.getMenu().getMenuWidth();\n\n\t\tint menuEntryHeight \u003d 15;\n\t\tint headerHeight \u003d menuEntryHeight + 3;\n\n\t\tif (mousePosition.getX() \u003c menuX || mousePosition.getX() \u003e menuX + menuWidth) return;\n\n\t\tint posInMenuY \u003d (Math.round(mousePosition.getY()) - menuY - headerHeight) / menuEntryHeight;\n\t\tint entryTopY \u003d menuY + headerHeight + posInMenuY * menuEntryHeight;\n\n\t\tOptional\u003cMenuEntryAndPos\u003e entry \u003d relevantMenuEntries.stream()\n\t\t\t.filter(menuEntryAndPos -\u003e menuEntryAndPos.getPosInMenu() \u003d\u003d posInMenuY)\n\t\t\t.findFirst();\n\t\tif (entry.isEmpty()) return;\n\t\tMenuEntryAndPos entryAndPos \u003d entry.get();\n\n\t\tMenuEntry hoveredEntry \u003d entryAndPos.getMenuEntry();\n\n\t\tif (!isTakeOrMarkClue(hoveredEntry)) return;\n\n\t\tString text \u003d getText(entryAndPos, config.colorHoverText(), false);\n\n\t\t// Handle master three-step cryptic\n\t\tif (text !\u003d null)\n\t\t{\n\t\t\tfor (String splitText : text.split(\"\u003cbr\u003e\"))\n\t\t\t{\n\t\t\t\tpanelComponent.getChildren().add(LineComponent.builder().left(splitText).build());\n\t\t\t}\n\t\t}\n\n\t\tdouble infoPanelWidth \u003d panelComponent.getBounds().getWidth();\n\t\tint viewportWidth \u003d client.getViewportWidth();\n\t\tif (menuX + menuWidth + infoPanelWidth \u003e viewportWidth)\n\t\t{\n\t\t\tpanelComponent.setPreferredLocation(new java.awt.Point(menuX - (int) infoPanelWidth, entryTopY));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpanelComponent.setPreferredLocation(new java.awt.Point(menuX + menuWidth, entryTopY));\n\t\t}\n\t}\n\n\tprivate List\u003cMenuEntryAndPos\u003e getEntriesByTile(MenuEntry[] menuEntries)\n\t{\n\t\t// Order on floor is drop order from what I can tell.\n\t\t// Most recently dropped is in pos 0 of array, up to first item dropped\n\t\tList\u003cMenuEntryAndPos\u003e mappedEntries \u003d new ArrayList\u003c\u003e();\n\n\t\tMap\u003cWorldPoint, Integer\u003e foundPosForWp \u003d new HashMap\u003c\u003e();\n\t\t// We want to keep track from soonest to despawn to most recently dropped\n\t\tfor (int i \u003d menuEntries.length - 1; i \u003e\u003d 0; i--)\n\t\t{\n\t\t\tif (!isTakeOrMarkClue(menuEntries[i])) continue;\n\t\t\tint x \u003d menuEntries[i].getParam0() * SCENE_TO_LOCAL;\n\t\t\tint y \u003d menuEntries[i].getParam1() * SCENE_TO_LOCAL;\n\t\t\tint wv \u003d menuEntries[i].getWorldViewId();\n\t\t\tLocalPoint itemLp \u003d new LocalPoint(x, y, wv);\n\t\t\tWorldPoint itemWp \u003d WorldPoint.fromLocal(client, itemLp);\n\t\t\tint currentPosForTile \u003d foundPosForWp.getOrDefault(itemWp, 0);\n\t\t\tif (Clues.isClue(menuEntries[i].getIdentifier(), clueDetailsPlugin.isDeveloperMode()))\n\t\t\t{\n\t\t\t\tmappedEntries.add(new MenuEntryAndPos(menuEntries[i], menuEntries.length - i - 1, currentPosForTile));\n\t\t\t\tif (isTakeClue(menuEntries[i])) foundPosForWp.put(itemWp, currentPosForTile + 1);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmappedEntries.add(new MenuEntryAndPos(menuEntries[i], menuEntries.length - i - 1, -1));\n\t\t\t}\n\t\t}\n\n\t\treturn mappedEntries;\n\t}\n\n\tpublic boolean isTakeClue(MenuEntry entry)\n\t{\n\t\tString option \u003d entry.getOption();\n\t\tMenuAction type \u003d entry.getType();\n\t\tint identifier \u003d entry.getIdentifier();\n\n\t\treturn Clues.isClue(identifier, clueDetailsPlugin.isDeveloperMode()) \u0026\u0026 type \u003d\u003d MenuAction.GROUND_ITEM_THIRD_OPTION \u0026\u0026 option.equals(\"Take\");\n\t}\n\n\tpublic boolean isTakeOrMarkClue(MenuEntry entry)\n\t{\n\t\tString option \u003d entry.getOption();\n\t\tMenuAction type \u003d entry.getType();\n\t\tint identifier \u003d entry.getIdentifier();\n\n\t\treturn Clues.isClue(identifier, clueDetailsPlugin.isDeveloperMode()) \u0026\u0026 (\n\t\t\t(type \u003d\u003d MenuAction.GROUND_ITEM_THIRD_OPTION \u0026\u0026 option.equals(\"Take\")) ||\n\t\t\t\t(type \u003d\u003d MenuAction.RUNELITE \u0026\u0026 (option.equals(\"Unmark\") || option.equals(\"Mark\"))));\n\t}\n\n\tpublic boolean isReadClue(MenuEntry entry)\n\t{\n\t\tString option \u003d entry.getOption();\n\t\tint itemId \u003d entry.getItemId();\n\t\treturn Clues.isClue(itemId, clueDetailsPlugin.isDeveloperMode()) \u0026\u0026 option.equals(\"Read\");\n\t}\n\n\tprivate boolean shouldHighlight(int id)\n\t{\n\t\tif (id \u003c 2677) return false; //TODO: Support fake beginner \u0026 master IDs\n\t\tString shouldHighlight \u003d configManager.getConfiguration(\"clue-details-highlights\", String.valueOf(id));\n\t\treturn \"true\".equals(shouldHighlight);\n\t}\n\n\tprivate int getScrollID(MenuEntry menuEntry)\n\t{\n\t\tint scrollID \u003d menuEntry.getIdentifier();\n\t\tif (isReadClue(menuEntry))\n\t\t{\n\t\t\tscrollID \u003d menuEntry.getItemId();\n\t\t}\n\t\treturn scrollID;\n\t}\n\n\tprivate boolean areEntriesInTile(MenuEntry menuEntry)\n\t{\n\t\tMenuEntry[] currentMenuEntries \u003d {menuEntry};\n\t\tif (Arrays.stream(currentMenuEntries).anyMatch(this::isTakeClue))\n\t\t{\n\t\t\tList\u003cMenuEntryAndPos\u003e entriesByTile \u003d getEntriesByTile(currentMenuEntries);\n\t\t\treturn !entriesByTile.isEmpty();\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate String getText(MenuEntryAndPos menuEntryAndPos, boolean showColor, boolean isFloorText)\n\t{\n\t\tMenuEntry menuEntry \u003d menuEntryAndPos.getMenuEntry();\n\n\t\tif (isReadClue(menuEntry))\n\t\t{\n\t\t\tint scrollID \u003d getScrollID(menuEntry);\n\t\t\tClueInstance clueInstance \u003d clueInventoryManager.getClueByClueItemId(scrollID);\n\t\t\tif (clueInstance !\u003d null \u0026\u0026 !clueInstance.getClueIds().isEmpty())\n\t\t\t{\n\t\t\t\treturn clueInstance.getCombinedClueText(configManager, showColor, isFloorText);\n\t\t\t}\n\t\t}\n\n\t\tif (areEntriesInTile(menuEntry))\n\t\t{\n\t\t\treturn getTrackedClueText(menuEntryAndPos, showColor, isFloorText);\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate String recolorText(MenuEntryAndPos menuEntryAndPos)\n\t{\n\t\tMenuEntry menuEntry \u003d menuEntryAndPos.getMenuEntry();\n\t\tint scrollID \u003d getScrollID(menuEntry);\n\n\t\tString itemName \u003d Text.removeTags(menuEntry.getTarget());\n\t\tColor color \u003d null;\n\n\t\tClues matchingClue \u003d Clues.forItemId(scrollID);\n\t\tif (matchingClue !\u003d null)\n\t\t{\n\t\t\tcolor \u003d matchingClue.getDetailColor(configManager);\n\t\t}\n\t\telse if (areEntriesInTile(menuEntry))\n\t\t{\n\t\t\tcolor \u003d getTrackedClueColor(menuEntryAndPos);\n\t\t}\n\n\t\t// Only change ground item menu color if it\u0027s not the default\n\t\tif (color !\u003d null \u0026\u0026 color !\u003d Color.WHITE)\n\t\t{\n\t\t\tString hexColor \u003d Integer.toHexString(color.getRGB()).substring(2);\n\t\t\treturn \"\u003ccol\u003d\" + hexColor + \"\u003e\" + itemName;\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate ClueInstance getTrackedClueInstance(MenuEntryAndPos entry)\n\t{\n\t\tMenuEntry menuEntry \u003d entry.getMenuEntry();\n\t\tint sceneX \u003d menuEntry.getParam0();\n\t\tint sceneY \u003d menuEntry.getParam1();\n\t\tint wv \u003d menuEntry.getWorldViewId();\n\t\tLocalPoint itemLp \u003d new LocalPoint(sceneX * SCENE_TO_LOCAL, sceneY * SCENE_TO_LOCAL, wv);\n\t\tWorldPoint itemWp \u003d WorldPoint.fromLocal(client, itemLp);\n\t\tList\u003cClueInstance\u003e trackedClues \u003d new ArrayList\u003c\u003e(clueGroundManager.getAllGroundCluesOnWp(itemWp));\n\t\tif (trackedClues.size() \u003c\u003d entry.getPosOnTile()) return null;\n\t\treturn trackedClues.get(entry.getPosOnTile());\n\t}\n\n\tprivate String getTrackedClueText(MenuEntryAndPos entry, boolean showColor, boolean isFloorText)\n\t{\n\t\tClueInstance clueInstance \u003d getTrackedClueInstance(entry);\n\t\tif (clueInstance \u003d\u003d null) return null;\n\n\t\treturn clueInstance.getCombinedClueText(configManager, showColor, isFloorText);\n\t}\n\n\tprivate Color getTrackedClueColor(MenuEntryAndPos entry)\n\t{\n\t\tClueInstance clueInstance \u003d getTrackedClueInstance(entry);\n\n\t\t// Ignore three-step cryptic clues\n\t\tif (clueInstance !\u003d null \u0026\u0026 clueInstance.getClueIds().size() \u003d\u003d 1)\n\t\t{\n\t\t\tClues cluePart \u003d Clues.forClueIdFiltered(clueInstance.getClueIds().get(0));\n\t\t\tif (cluePart !\u003d null)\n\t\t\t{\n\t\t\t\treturn cluePart.getDetailColor(configManager);\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(final GameStateChanged event)\n\t{\n\t\tif (event.getGameState() \u003d\u003d GameState.LOADING)\n\t\t{\n\t\t\ttileHighlights.clear();\n\t\t}\n\n\t\tif (event.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\taddItemTiles();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onItemSpawned(ItemSpawned itemSpawned)\n\t{\n\t\tTileItem item \u003d itemSpawned.getItem();\n\t\tTile tile \u003d itemSpawned.getTile();\n\t\tif (shouldHighlight(item.getId()))\n\t\t{\n\t\t\tnotifier.notify(config.markedClueDroppedNotification(), \"A highlighted clue has dropped!\");\n\t\t\ttileHighlights.get(tile).add(item.getId());\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onItemDespawned(ItemDespawned itemDespawned)\n\t{\n\t\tTile tile \u003d itemDespawned.getTile();\n\t\tif (tileHighlights.containsKey(tile))\n\t\t{\n\t\t\ttileHighlights.get(tile).removeIf((i) -\u003e i \u003d\u003d itemDespawned.getItem().getId());\n\t\t}\n\t}\n\n\tprotected void addItemTiles()\n\t{\n\t\ttileHighlights.clear();\n\n\t\tTile[][] squareOfTiles \u003d client.getTopLevelWorldView().getScene().getTiles()[client.getTopLevelWorldView().getPlane()];\n\n\t\t// Reduce the two-dimensional array into a single list for processing.\n\t\tList\u003cTile\u003e tiles \u003d Stream.of(squareOfTiles)\n\t\t\t.flatMap(Arrays::stream)\n\t\t\t.filter(Objects::nonNull)\n\t\t\t.collect(Collectors.toList());\n\n\t\tfor (Tile tile : tiles)\n\t\t{\n\t\t\tList\u003cTileItem\u003e items \u003d tile.getGroundItems();\n\t\t\tif (items !\u003d null)\n\t\t\t{\n\t\t\t\tfor (TileItem item : items)\n\t\t\t\t{\n\t\t\t\t\tif (item \u003d\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (shouldHighlight(item.getId()))\n\t\t\t\t\t{\n\t\t\t\t\t\ttileHighlights.get(tile).add(item.getId());\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic void refreshHighlights()\n\t{\n\t\tif (client.getGameState() !\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\taddItemTiles();\n\t}\n\n\tprivate void checkAllTilesForHighlighting(Tile tile, Collection\u003cInteger\u003e ids)\n\t{\n\t\tif (!config.highlightMarkedClues())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tPlayer player \u003d client.getLocalPlayer();\n\n\t\tif (player \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tLocalPoint playerLocation \u003d player.getLocalLocation();\n\t\tif (!ids.isEmpty())\n\t\t{\n\t\t\tLocalPoint location \u003d tile.getLocalLocation();\n\n\t\t\tif (location \u003d\u003d null)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (location.distanceTo(playerLocation) \u003e MAX_DISTANCE)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tPolygon poly \u003d Perspective.getCanvasTilePoly(client, location);\n\t\t\tif (poly \u003d\u003d null)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// TODO: Currently outlines all items in the tile\n\t\t\tmodelOutlineRenderer.drawOutline(\n\t\t\t\ttile.getItemLayer(),\n\t\t\t\tconfig.outlineWidth(),\n\t\t\t\tJagexColors.CHAT_PUBLIC_TEXT_OPAQUE_BACKGROUND,\n\t\t\t\tconfig.highlightFeather());\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\ClueDetailsOverlay.java"},{"fileName":"ClueDetailsPlugin.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport com.cluedetails.panels.ClueDetailsParentPanel;\nimport com.cluedetails.tools.ClueDetailsWorldMapPoint;\nimport com.google.gson.Gson;\nimport com.google.inject.Provides;\nimport java.awt.image.BufferedImage;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Objects;\nimport java.util.Set;\nimport java.util.stream.Collectors;\nimport java.util.TreeMap;\nimport javax.inject.Inject;\nimport javax.inject.Named;\nimport lombok.Getter;\nimport lombok.Setter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.ItemID;\nimport net.runelite.api.MenuAction;\nimport net.runelite.api.MenuEntry;\nimport net.runelite.api.ScriptID;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.ClientTick;\nimport net.runelite.api.events.FocusChanged;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.ItemContainerChanged;\nimport net.runelite.api.events.ItemDespawned;\nimport net.runelite.api.events.ItemSpawned;\nimport net.runelite.api.events.MenuEntryAdded;\nimport net.runelite.api.events.MenuOpened;\nimport net.runelite.api.events.PostClientTick;\nimport net.runelite.api.events.WidgetClosed;\nimport net.runelite.api.events.WidgetLoaded;\nimport net.runelite.api.widgets.ComponentID;\nimport net.runelite.api.gameval.InterfaceID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.Notifier;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.events.ClientShutdown;\nimport net.runelite.client.events.InfoBoxMenuClicked;\nimport net.runelite.client.events.PluginMessage;\nimport net.runelite.client.game.chatbox.ChatboxItemSearch;\nimport net.runelite.client.game.chatbox.ChatboxPanelManager;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.events.RuneScapeProfileChanged;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.plugins.cluescrolls.clues.hotcold.HotColdLocation;\nimport net.runelite.client.plugins.fairyring.FairyRing;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.ui.components.colorpicker.ColorPickerManager;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.ui.overlay.OverlayMenuEntry;\nimport net.runelite.client.ui.overlay.infobox.InfoBoxManager;\nimport net.runelite.client.ui.overlay.worldmap.WorldMapPointManager;\nimport net.runelite.client.util.ImageUtil;\n\n@Slf4j\n@PluginDescriptor(\n\t\tname \u003d \"Clue Details\",\n\t\tdescription \u003d \"Provides details and highlighting for clues on the floor\",\n\t\ttags \u003d {\"clue\", \"overlay\"}\n)\npublic class ClueDetailsPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate ClueDetailsConfig config;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate ClueDetailsOverlay infoOverlay;\n\n\t@Inject\n\tprivate ClueGroundOverlay groundOverlay;\n\n\t@Inject\n\tprivate ClueDetailsTagsOverlay tagsOverlay;\n\n\t@Inject\n\tprivate ClueDetailsInventoryOverlay inventoryOverlay;\n\n\t@Getter\n\t@Inject\n\tprivate ClueDetailsItemsOverlay itemsOverlay;\n\n\t@Getter\n\t@Inject\n\tprivate ClueDetailsWidgetsOverlay widgetsOverlay;\n\n\t@Inject\n\tprivate ClueThreeStepSaverWidgetOverlay clueThreeStepSaverWidgetOverlay;\n\n\t@Inject\n\tprivate EventBus eventBus;\n\n\t@Inject\n\tprivate ClientToolbar clientToolbar;\n\n\t@Inject\n\tprivate ChatboxPanelManager chatboxPanelManager;\n\n\t@Inject\n\tprivate ClueDetailsSharingManager clueDetailsSharingManager;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Getter\n\t@Inject\n\tprivate ItemManager itemManager;\n\n\t@Getter\n\t@Inject\n\t@Named(\"developerMode\")\n\tprivate boolean developerMode;\n\n\t@Getter\n\t@Inject\n\tGson gson;\n\n\t@Getter\n\t@Inject\n\tprivate ClueInventoryManager clueInventoryManager;\n\n\t@Getter\n\t@Inject\n\tprivate ClueWidgetManager clueWidgetManager;\n\n\t@Getter\n\t@Inject\n\tprivate ClueGroundManager clueGroundManager;\n\n\t@Getter\n\t@Inject\n\tprivate ClueBankManager clueBankManager;\n\n\t@Getter\n\t@Inject\n\tprivate CluePreferenceManager cluePreferenceManager;\n\n\t@Inject\n\tprivate ClueThreeStepSaver clueThreeStepSaver;\n\n\t@Getter\n\t@Inject\n\tprivate ChatMessageManager chatMessageManager;\n\n\t@Getter\n\t@Inject\n\tprivate ColorPickerManager colorPickerManager;\n\n\t@Inject\n\t@Getter\n\tprivate ChatboxItemSearch itemSearch;\n\n\t@Inject\n\t@Getter\n\tprivate Notifier notifier;\n\n\t@Inject\n\tprivate WorldMapPointManager worldMapPointManager;\n\n\t@Inject\n\tprivate InfoBoxManager infoBoxManager;\n\n\t@Getter\n\tprivate final List\u003cClueGroundTimer\u003e clueGroundTimers \u003d new ArrayList\u003c\u003e();\n\n\t@Getter\n\tprivate ClueDetailsParentPanel panel;\n\n\tprivate NavigationButton navButton;\n\n\tprivate boolean profileChanged;\n\n\t@Getter\n\tpublic static int currentTick;\n\n\t@Getter\n\tpublic static int currentPlane;\n\n\tpublic static final String CLUE_GROUND_TIMER_TARGET \u003d \"Tracked Clues\";\n\tprivate static final String CLUE_GROUND_TIMER_CLEAR \u003d \"Clear\";\n\tprivate static final String CLUE_GROUND_TIMER_LOCATE \u003d \"Locate\";\n\tprivate static final String CLUE_GROUND_TIMER_UNLOCATE \u003d \"Unlocate\";\n\n\t@Getter @Setter\n\tprivate boolean fairyRingOpen \u003d false;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tstartUpOverlays();\n\n\t\tclueThreeStepSaver.startUp();\n\t\tclueGroundManager.startUp();\n\n\t\tClues.rebuildFilteredCluesCache();\n\n\t\tfinal BufferedImage icon \u003d ImageUtil.loadImageResource(getClass(), \"/icon.png\");\n\n\t\tpanel \u003d new ClueDetailsParentPanel(configManager, cluePreferenceManager, config, chatboxPanelManager, clueDetailsSharingManager, this);\n\t\tnavButton \u003d NavigationButton.builder()\n\t\t\t\t.tooltip(\"Clue Details\")\n\t\t\t\t.icon(icon)\n\t\t\t\t.priority(7)\n\t\t\t\t.panel(panel)\n\t\t\t\t.build();\n\n\t\tif (config.showSidebar())\n\t\t{\n\t\t\tclientToolbar.addNavigation(navButton);\n\t\t}\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tshutDownOverlays();\n\n\t\tclueGroundManager.shutDown();\n\n\t\tclientToolbar.removeNavigation(navButton);\n\n\t\tclueGroundManager.saveStateToConfig();\n\t\tclueBankManager.saveStateToConfig();\n\n\t\tfor (ClueGroundTimer timer : clueGroundTimers)\n\t\t{\n\t\t\tinfoBoxManager.removeInfoBox(timer);\n\t\t}\n\n\t\tworldMapPointManager.removeIf(ClueDetailsWorldMapPoint.class::isInstance);\n\n\t\tresetIdleTimeout();\n\t}\n\n\tprivate void startUpOverlays()\n\t{\n\t\toverlayManager.add(infoOverlay);\n\t\teventBus.register(infoOverlay);\n\n\t\toverlayManager.add(groundOverlay);\n\t\teventBus.register(groundOverlay);\n\n\t\toverlayManager.add(clueThreeStepSaverWidgetOverlay);\n\t\toverlayManager.add(tagsOverlay);\n\t\toverlayManager.add(widgetsOverlay);\n\n\t\toverlayManager.add(inventoryOverlay);\n\t\teventBus.register(inventoryOverlay);\n\n\t\toverlayManager.add(itemsOverlay);\n\t\teventBus.register(itemsOverlay);\n\t}\n\n\tprivate void shutDownOverlays()\n\t{\n\t\toverlayManager.remove(infoOverlay);\n\t\teventBus.unregister(infoOverlay);\n\n\t\toverlayManager.remove(groundOverlay);\n\t\teventBus.unregister(groundOverlay);\n\n\t\toverlayManager.remove(tagsOverlay);\n\n\t\toverlayManager.remove(inventoryOverlay);\n\t\teventBus.unregister(inventoryOverlay);\n\n\t\toverlayManager.remove(itemsOverlay);\n\t\teventBus.unregister(itemsOverlay);\n\n\t\toverlayManager.remove(widgetsOverlay);\n\n\t\toverlayManager.remove(clueThreeStepSaverWidgetOverlay);\n\n\t\tclientToolbar.removeNavigation(navButton);\n\n\t\tclueGroundManager.saveStateToConfig();\n\t\tclueBankManager.saveStateToConfig();\n\n\t\tresetClueGroundTimers();\n\t}\n\n\t@Subscribe\n\tpublic void onItemContainerChanged(ItemContainerChanged event)\n\t{\n\t\tif (event.getContainerId() \u003d\u003d InventoryID.INVENTORY.getId())\n\t\t{\n\t\t\titemsOverlay.invalidateCache();\n\t\t\tclueInventoryManager.updateInventory(event.getItemContainer());\n\t\t\tclueThreeStepSaver.scanInventory();\n\t\t}\n\t\telse if (event.getContainerId() \u003d\u003d InventoryID.BANK.getId())\n\t\t{\n\t\t\tclueBankManager.handleBankChange(event.getItemContainer());\n\t\t}\n\n\t}\n\n\t@Subscribe\n\tpublic void onWidgetLoaded(WidgetLoaded event)\n\t{\n\t\tif (event.getGroupId() \u003e\u003d InterfaceID.TRAIL_MAP01 // Beginner map clue Champion\u0027s Guild\n\t\t\t\u0026\u0026 event.getGroupId() \u003c\u003d InterfaceID.TRAIL_MAP11) // Beginner map clue Wizard\u0027s Tower\n\t\t{\n\t\t\tclueInventoryManager.updateClueText(event.getGroupId(), ItemID.CLUE_SCROLL_BEGINNER);\n\t\t}\n\t\telse if (event.getGroupId() \u003d\u003d ComponentID.CLUESCROLL_TEXT \u003e\u003e 16)\n\t\t{\n\t\t\tclientThread.invokeLater(() -\u003e\n\t\t\t{\n\t\t\t\tWidget clueScrollText \u003d client.getWidget(ComponentID.CLUESCROLL_TEXT);\n\t\t\t\tif (clueScrollText !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tString text \u003d clueScrollText.getText();\n\t\t\t\t\tclueInventoryManager.updateClueText(text);\n\t\t\t\t\tclueThreeStepSaver.scanInventory();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse if (event.getGroupId() \u003d\u003d InterfaceID.FAIRYRINGS \u0026\u0026 config.fairyRingAutoScroll())\n\t\t{\n\t\t\tsetFairyRingOpen(true);\n\t\t\tclientThread.invokeLater(this::handleFairyRingPanel);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onWidgetClosed(WidgetClosed event)\n\t{\n\t\tif(event.getGroupId() \u003d\u003d InterfaceID.FAIRYRINGS)\n\t\t{\n\t\t\tsetFairyRingOpen(false);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onPostClientTick(PostClientTick event)\n\t{\n\t\tif(isFairyRingOpen() \u0026\u0026 config.fairyRingAutoScroll())\n\t\t{\n\t\t\tadjustFairyRingWidget();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onFocusChanged(FocusChanged e)\n\t{\n\t\tif (e.isFocused())\n\t\t{\n\t\t\tresetIdleTimeout();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onPluginMessage(PluginMessage event)\n\t{\n\t\t// Subscribe to Hot Cold Helper for HotColdLocation\n\t\tif (\"hot-cold-helper\".equals(event.getNamespace()))\n\t\t{\n\t\t\tif (\"location-solved\".equals(event.getName()))\n\t\t\t{\n\t\t\t\tMap\u003cString, Object\u003e data \u003d event.getData();\n\t\t\t\tif (data \u003d\u003d null) return;\n\n\t\t\t\tHotColdLocation solvedLocation \u003d HotColdLocation.valueOf(data.get(\"location\").toString());\n\t\t\t\tif (solvedLocation !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tclueInventoryManager.updateClueText(solvedLocation.ordinal(),\n\t\t\t\t\t\tsolvedLocation.isBeginnerClue() ? ItemID.CLUE_SCROLL_BEGINNER : ItemID.CLUE_SCROLL_MASTER);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged event)\n\t{\n\t\tif (event.getGameState() \u003d\u003d GameState.LOGIN_SCREEN)\n\t\t{\n\t\t\tclueGroundManager.saveStateToConfig();\n\t\t\tclueBankManager.saveStateToConfig();\n\t\t\tprofileChanged \u003d true;\n\t\t}\n\n\t\tif (event.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tif (profileChanged)\n\t\t\t{\n\t\t\t\tprofileChanged \u003d false;\n\t\t\t\tclueGroundManager.loadStateFromConfig();\n\t\t\t\tclueBankManager.loadStateFromConfig();\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onRuneScapeProfileChanged(RuneScapeProfileChanged event)\n\t{\n\t\tprofileChanged \u003d true;\n\t}\n\n\t@Subscribe\n\tpublic void onClientTick(ClientTick event)\n\t{\n\t\tcurrentTick \u003d client.getTickCount();\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event)\n\t{\n\t\tclueGroundManager.onGameTick();\n\t\tclueInventoryManager.onGameTick();\n\n\t\tcurrentPlane \u003d client.getTopLevelWorldView().getPlane();\n\n\t\trenderGroundClueTimers(); // TODO: Call more efficiently\n\t\tinfoBoxManager.cull(); // Explict call to clean up timers faster\n\t\t// Ground clue timers notifications\n\t\tif (!clueGroundTimers.isEmpty())\n\t\t{\n\t\t\tif (showNotifications())\n\t\t\t{\n\t\t\t\tfor (ClueGroundTimer timer : clueGroundTimers)\n\t\t\t\t{\n\t\t\t\t\tif (!timer.isNotified() \u0026\u0026 timer.shouldNotify() \u0026\u0026 !timer.isRenotifying())\n\t\t\t\t\t{\n\t\t\t\t\t\tnotifier.notify(\"Your clue scroll is about to disappear!\");\n\t\t\t\t\t\tif (config.decreaseIdleTimeout())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tclient.setIdleTimeout(1); // client forces this to be minimum 5 minutes\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (config.groundClueTimersRenotificationTime() !\u003d 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttimer.startRenotification();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttimer.setNotified(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (timer.isNotified() \u0026\u0026 !timer.shouldNotify())\n\t\t\t\t\t{\n\t\t\t\t\t\ttimer.setNotified(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/* This gets called when:\n\t   Player logs in\n\t   Player enters from outside 3 zones distance to 3 or closer (teleport in, run in)\n\t   Player turns on plugin (and seems onItemSpawned is called for all existing items in scene, including\n\t     ones outside the 3 zone limit which\u0027re rendered\n\t */\n\t@Subscribe\n\tpublic void onItemSpawned(ItemSpawned event)\n\t{\n\t\tclueGroundManager.onItemSpawned(event);\n\t}\n\n\t@Subscribe\n\tpublic void onItemDespawned(ItemDespawned event)\n\t{\n\t\tclueGroundManager.onItemDespawned(event);\n\t}\n\n\t@Subscribe(priority \u003d -1) // run after ground items\n\tpublic void onMenuEntryAdded(MenuEntryAdded event)\n\t{\n\t\tclueInventoryManager.onMenuEntryAdded(event, cluePreferenceManager, panel);\n\t\tclueThreeStepSaver.onMenuEntryAdded(event);\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOpened(MenuOpened event)\n\t{\n\t\tMenuEntry[] entries \u003d event.getMenuEntries();\n\t\tclueThreeStepSaver.onMenuOpened(event);\n\t\tclueWidgetManager.addHighlightWidgetSubmenus(entries);\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif (event.getGroup().equals(\"clue-details-highlights\"))\n\t\t{\n\t\t\tinfoOverlay.refreshHighlights();\n\t\t}\n\n\t\tif (event.getKey().equals(\"beginnerDetails\")\n\t\t\t|| event.getKey().equals(\"easyDetails\")\n\t\t\t|| event.getKey().equals(\"mediumDetails\")\n\t\t\t|| event.getKey().equals(\"hardDetails\")\n\t\t\t|| event.getKey().equals(\"eliteDetails\")\n\t\t\t|| event.getKey().equals(\"masterDetails\"))\n\t\t{\n\t\t\tClues.rebuildFilteredCluesCache();\n\t\t\tclueInventoryManager.updateLastInventoryRefreshTime();\n\t\t}\n\n\t\tif (event.getGroup().equals(\"clue-details-color\")\n\t\t\t|| event.getGroup().equals(\"clue-details-items\")\n\t\t\t|| event.getKey().equals(\"highlightInventoryClueScrolls\")\n\t\t\t|| event.getKey().equals(\"highlightInventoryClueItems\")\n\t\t\t|| event.getKey().equals(\"colorInventoryClueItems\"))\n\t\t{\n\t\t\titemsOverlay.invalidateCache();\n\t\t}\n\n\t\tif (event.getGroup().equals(config.CLUE_WIDGETS_CONFIG)\n\t\t\t|| event.getKey().equals(\"highlightInventoryClueWidgets\")\n\t\t\t|| event.getKey().equals(\"widgetHighlightColor\")\n\t\t\t|| event.getKey().equals(\"colorInventoryClueWidgets\")\n\t\t\t|| event.getGroup().equals(\"clue-details-color\"))\n\t\t{\n\t\t\tclueInventoryManager.updateLastInventoryRefreshTime();\n\t\t}\n\n\t\tif (!event.getGroup().equals(ClueDetailsConfig.class.getAnnotation(ConfigGroup.class).value()))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (\"groundClueTimersDecreaseIdleTimeout\".equals(event.getKey()))\n\t\t{\n\t\t\tString minutes_config \u003d configManager.getConfiguration(\"logouttimer\", \"idleTimeout\");\n\n\t\t\tif (minutes_config !\u003d null)\n\t\t\t{\n\t\t\t\tclient.setIdleTimeout(50 * 60 * Integer.parseInt(minutes_config));\n\t\t\t}\n\t\t}\n\n\t\tif (\"showSidebar\".equals(event.getKey()))\n\t\t{\n\t\t\tif (\"true\".equals(event.getNewValue()))\n\t\t\t{\n\t\t\t\tclientToolbar.addNavigation(navButton);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tclientToolbar.removeNavigation(navButton);\n\t\t\t}\n\t\t}\n\n\t\t// Reset clueGroundTimers when showGroundClueTimers toggled off\n\t\tif (\"showGroundClueTimers\".equals(event.getKey()) \u0026\u0026 \"false\".equals(event.getNewValue()))\n\t\t{\n\t\t\tresetClueGroundTimers();\n\t\t}\n\n\t\tpanel.refresh();\n\t}\n\n\t@Subscribe(priority \u003d 100)\n\tprivate void onClientShutdown(ClientShutdown event)\n\t{\n\t\tclueGroundManager.saveStateToConfig();\n\t\tclueBankManager.saveStateToConfig();\n\t}\n\n\t@Provides\n\tClueDetailsConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(ClueDetailsConfig.class);\n\t}\n\n\tprivate boolean showNotifications()\n\t{\n\t\treturn config.groundClueTimersNotificationTime() \u003e 0;\n\t}\n\n\tpublic void renderGroundClueTimers()\n\t{\n\t\tif (!config.showGroundClueTimers()) return;\n\n\t\tSet\u003cWorldPoint\u003e worldPoints \u003d clueGroundManager.getTrackedWorldPoints();\n\n\t\t// Remove timers if worldPoint not managed by clueGroundManager\n\t\tclueGroundTimers.removeIf(timer-\u003e !worldPoints.contains(timer.getWorldPoint()));\n\t\t// Remove world map point if worldPoint not managed by clueGroundManager\n\t\tworldMapPointManager.removeIf(worldMapPoint-\u003e\n\t\t\tworldMapPoint instanceof ClueDetailsWorldMapPoint \u0026\u0026 !worldPoints.contains(worldMapPoint.getWorldPoint()));\n\n\t\t// Populate timers\n\t\tfor (WorldPoint worldPoint : worldPoints)\n\t\t{\n\t\t\tTreeMap\u003cClueInstance, Integer\u003e clueInstancesWithQuantityAtWp \u003d clueGroundManager.getClueInstancesWithQuantityAtWp(config, worldPoint);\n\n\t\t\tif (clueInstancesWithQuantityAtWp !\u003d null \u0026\u0026 clueInstancesWithQuantityAtWp.firstEntry() !\u003d null)\n\t\t\t{\n\t\t\t\t// Find oldest enabled clue instance at the world point\n\t\t\t\tClueInstance oldestEnabledClueInstance \u003d clueInstancesWithQuantityAtWp.firstEntry().getKey();\n\t\t\t\tfor (ClueInstance clueInstance : clueInstancesWithQuantityAtWp.keySet())\n\t\t\t\t{\n\t\t\t\t\tif (clueInstance.isEnabled(config))\n\t\t\t\t\t{\n\t\t\t\t\t\toldestEnabledClueInstance \u003d  clueInstance;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tint despawnTick \u003d oldestEnabledClueInstance.getDespawnTick();\n\n\t\t\t\tboolean createNewTimer \u003d true;\n\n\t\t\t\t// Update existing timers\n\t\t\t\tfor (ClueGroundTimer timer : clueGroundTimers)\n\t\t\t\t{\n\t\t\t\t\tif (worldPoint.equals(timer.getWorldPoint()))\n\t\t\t\t\t{\n\t\t\t\t\t\ttimer.setClueInstancesWithQuantity(clueInstancesWithQuantityAtWp);\n\t\t\t\t\t\ttimer.setDespawnTick(despawnTick);\n\t\t\t\t\t\tcreateNewTimer \u003d false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (createNewTimer)\n\t\t\t\t{\n\t\t\t\t\tClueGroundTimer timer \u003d new ClueGroundTimer(\n\t\t\t\t\t\tclient,\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\tconfig,\n\t\t\t\t\t\tconfigManager,\n\t\t\t\t\t\tdespawnTick,\n\t\t\t\t\t\tworldPoint,\n\t\t\t\t\t\tclueInstancesWithQuantityAtWp,\n\t\t\t\t\t\tgetClueScrollImage()\n\t\t\t\t\t);\n\t\t\t\t\tclueGroundTimers.add(timer);\n\t\t\t\t\tinfoBoxManager.addInfoBox(timer);\n\t\t\t\t\t// Set menu entries\n\t\t\t\t\ttimer.getMenuEntries().add(new OverlayMenuEntry(MenuAction.RUNELITE_INFOBOX, CLUE_GROUND_TIMER_CLEAR, CLUE_GROUND_TIMER_TARGET));\n\t\t\t\t\ttimer.getMenuEntries().add(new OverlayMenuEntry(MenuAction.RUNELITE_INFOBOX, CLUE_GROUND_TIMER_LOCATE, CLUE_GROUND_TIMER_TARGET));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onInfoBoxMenuClicked(InfoBoxMenuClicked infoBoxMenuClicked)\n\t{\n\t\tString option \u003d infoBoxMenuClicked.getEntry().getOption();\n\t\tif (option.isEmpty()) return;\n\n\t\tClueGroundTimer clickedTimer \u003d (ClueGroundTimer) infoBoxMenuClicked.getInfoBox();\n\t\tif (clickedTimer \u003d\u003d null) return;\n\t\tif (!clueGroundTimers.contains(clickedTimer)) return;\n\n\t\tswitch (option)\n\t\t{\n\t\t\t// Clear infobox and tracked clues for world point\n\t\t\tcase CLUE_GROUND_TIMER_CLEAR:\n\t\t\t\tinfoBoxManager.removeInfoBox(clickedTimer);\n\t\t\t\tclueGroundTimers.remove(clickedTimer);\n\t\t\t\tclueGroundManager.clearBeginnerAndMasterCluesAtWorldPoint(clickedTimer.getWorldPoint());\n\t\t\t\tclueGroundManager.clearEasyToEliteCluesAtWorldPoint(clickedTimer.getWorldPoint());\n\t\t\t\tbreak;\n\t\t\t// Add world map point for timer\n\t\t\tcase CLUE_GROUND_TIMER_LOCATE:\n\t\t\t\tworldMapPointManager.add(clickedTimer.getClueDetailsWorldMapPoint());\n\t\t\t\tswitchTimerLocateEntry(clickedTimer, CLUE_GROUND_TIMER_LOCATE, CLUE_GROUND_TIMER_UNLOCATE);\n\t\t\t\tbreak;\n\t\t\t// Remove world map point for timer\n\t\t\tcase CLUE_GROUND_TIMER_UNLOCATE:\n\t\t\t\tworldMapPointManager.remove(clickedTimer.getClueDetailsWorldMapPoint());\n\t\t\t\tswitchTimerLocateEntry(clickedTimer, CLUE_GROUND_TIMER_UNLOCATE, CLUE_GROUND_TIMER_LOCATE);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprivate static void switchTimerLocateEntry(ClueGroundTimer timer, String oldEntry, String newEntry)\n\t{\n\t\ttimer.getMenuEntries().removeIf(e -\u003e Objects.equals(e.getOption(), oldEntry));\n\t\ttimer.getMenuEntries().add(new OverlayMenuEntry(MenuAction.RUNELITE_INFOBOX, newEntry, CLUE_GROUND_TIMER_TARGET));\n\t}\n\n\tpublic BufferedImage getClueScrollImage()\n\t{\n\t\treturn itemManager.getImage(net.runelite.api.gameval.ItemID.SOTE_CLUE2);\n\t}\n\n\tprivate void resetClueGroundTimers()\n\t{\n\t\tfor (ClueGroundTimer timer : clueGroundTimers)\n\t\t{\n\t\t\tinfoBoxManager.removeInfoBox(timer);\n\t\t}\n\t\tclueGroundTimers.clear();\n\t}\n\n\tprivate void resetIdleTimeout()\n\t{\n\t\tString minutes_config \u003d configManager.getConfiguration(\"logouttimer\", \"idleTimeout\");\n\t\tint minutes_parsed \u003d 25;\n\t\tif (minutes_config !\u003d null)\n\t\t{\n\t\t\tminutes_parsed \u003d Integer.parseInt(minutes_config);\n\t\t}\n\t\tclient.setIdleTimeout(50 * 60 * minutes_parsed);\n\t}\n\n\t/*\n\t * Taken from Hunter Rumours Plugin\n\t * Called when the fairy ring dialog is opened.\n\t * Responsible for scrolling to the relevant code and highlighting it, if found in any inventory clue detail.\n\t */\n\tprivate void handleFairyRingPanel()\n\t{\n\t\tString fairyRingCode \u003d getFirstFairyRingCodeInInventoryClues();\n\t\tif (fairyRingCode \u003d\u003d null) return;\n\n\t\tWidget foundCodeWidget \u003d findCodeWidget();\n\t\tif (foundCodeWidget \u003d\u003d null) return;\n\n\t\t// Scroll to the code entry and highlight it\n\t\tint panelScrollY \u003d (foundCodeWidget.getRelativeY())  ;\n\t\tint scrollable \u003d InterfaceID.FairyringsLog.CONTENTS;\n\t\tint scrollbar \u003d InterfaceID.FairyringsLog.SCROLLBAR;\n\n\t\tclient.runScript(\n\t\t\tScriptID.UPDATE_SCROLLBAR,\n\t\t\tscrollbar,\n\t\t\tscrollable,\n\t\t\tpanelScrollY);\n\t}\n\n\t/**\n\t * Finds the first fairy ring code in inventory clue detail text.\n\t *\n\t * @return A String containing the fairy ring code, or null if none is found.\n\t */\n\tprivate String getFirstFairyRingCodeInInventoryClues()\n\t{\n\t\t// Ensure we have clues in inventory\n\t\tList\u003cString\u003e cluesInInventoryText \u003d clueInventoryManager.getCluesInInventory().stream()\n\t\t\t.filter(Objects::nonNull)\n\t\t\t.map(clueInventoryManager::getClueByClueItemId)\n\t\t\t.filter(Objects::nonNull)\n\t\t\t.flatMap(instance -\u003e instance.getClueIds().stream())\n\t\t\t.map(Clues::forClueIdFiltered)\n\t\t\t.filter(clue -\u003e clue !\u003d null \u0026\u0026 clue.isEnabled(config))\n\t\t\t.map(clue -\u003e clue.getDetail(configManager))\n\t\t\t.collect(Collectors.toList());\n\n\t\tif (cluesInInventoryText.isEmpty()) return null;\n\n\t\t// Find the first-declared fairy ring for clues in inventory\n\t\treturn String.valueOf(Arrays.stream(FairyRing.values())\n\t\t\t.filter(code -\u003e cluesInInventoryText.stream().anyMatch(text -\u003e text.contains(code.toString())))\n\t\t\t.findFirst()\n\t\t\t.orElse(null));\n\t}\n\n\t/**\n\t * @return  Widget based on the given fairyRingCode\n\t */\n\tprivate Widget findCodeWidget()\n\t{\n\t\tWidget codeWidgets \u003d client.getWidget(InterfaceID.FairyringsLog.CONTENTS);\n\t\tif(codeWidgets \u003d\u003d null) return null;\n\n\t\tWidget[] codeWidgetDynamicChildren \u003d codeWidgets.getDynamicChildren();\n\t\tif(codeWidgetDynamicChildren \u003d\u003d null) return null;\n\n\t\tfor (Widget codeWidget : codeWidgetDynamicChildren)\n\t\t{\n\t\t\tString codeWidgetCode \u003d codeWidget.getText().replace(\" \",\"\");\n\n\t\t\tString fairyRingCode \u003d getFirstFairyRingCodeInInventoryClues();\n\t\t\tif(codeWidgetCode.equals(fairyRingCode)\n\t\t\t\t|| codeWidgetCode.equals(\"(Clue)\"+fairyRingCode))\n\t\t\t{\n\t\t\t\treturn codeWidget;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\t/*\n\t * Adjusts the color of the fairy ring to green and adds (Clue) to it\n\t */\n\tprivate void adjustFairyRingWidget()\n\t{\n\t\tWidget foundCodeWidget \u003d findCodeWidget();\n\t\tif(foundCodeWidget \u003d\u003d null) return;\n\n\t\tfoundCodeWidget.setTextColor(0x00FF00);\n\n\t\tif(!foundCodeWidget.getText().contains(\"(Clue)\"))\n\t\t{\n\t\t\tfoundCodeWidget.setText(\"(Clue) \" + foundCodeWidget.getText());\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\ClueDetailsPlugin.java"},{"fileName":"ClueDetailsSharingManager.java","content":"/*\n * Copyright (c) 2021, Adam \u003cAdam@sigterm.info\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport static com.cluedetails.ClueDetailsConfig.CLUE_ITEMS_CONFIG;\nimport static com.cluedetails.ClueDetailsConfig.CLUE_WIDGETS_CONFIG;\n\nimport com.google.common.base.Strings;\nimport com.google.common.util.concurrent.Runnables;\nimport com.google.gson.Gson;\nimport com.google.gson.JsonArray;\nimport com.google.gson.JsonElement;\nimport com.google.gson.JsonObject;\nimport com.google.gson.JsonSyntaxException;\nimport com.google.gson.reflect.TypeToken;\nimport java.awt.Color;\nimport java.awt.Toolkit;\nimport java.awt.datatransfer.DataFlavor;\nimport java.awt.datatransfer.StringSelection;\nimport java.awt.datatransfer.UnsupportedFlavorException;\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.Comparator;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.stream.Collectors;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.client.chat.QueuedMessage;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.game.chatbox.ChatboxPanelManager;\nimport net.runelite.client.plugins.grounditems.GroundItemsConfig;\nimport net.runelite.client.plugins.inventorytags.InventoryTagsConfig;\n\n@Slf4j\npublic class ClueDetailsSharingManager\n{\n\tprivate final ClueDetailsPlugin plugin;\n\tprivate final ClueDetailsConfig config;\n\tprivate final ChatboxPanelManager chatboxPanelManager;\n\tprivate final Gson gson;\n\n\tprivate final ConfigManager configManager;\n\n\t@Inject\n\tprivate ClueDetailsSharingManager(ClueDetailsPlugin plugin, ClueDetailsConfig config, ChatboxPanelManager chatboxPanelManager,\n\t\t\t\t\t\t\t\t\t\tGson gson, ConfigManager configManager)\n\t{\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t\tthis.chatboxPanelManager \u003d chatboxPanelManager;\n\t\tthis.gson \u003d gson;\n\t\tthis.configManager \u003d configManager;\n\t}\n\n\tpublic void resetClueDetails(boolean resetText, boolean resetColors, boolean resetItems, boolean resetWidgets)\n\t{\n\t\tList\u003cClues\u003e filteredClues \u003d Clues.CLUES.stream()\n\t\t\t.filter(config.filterListByTier())\n\t\t\t.filter(config.filterListByRegion())\n\t\t\t.collect(Collectors.toList());\n\n\t\tfor (Clues clue : filteredClues)\n\t\t{\n\t\t\tint id \u003d clue.getClueID();\n\t\t\tif (resetText) configManager.unsetConfiguration(\"clue-details-text\", String.valueOf(id));\n\t\t\tif (resetColors) configManager.unsetConfiguration(\"clue-details-color\", String.valueOf(id));\n\t\t\tif (resetItems) configManager.unsetConfiguration(CLUE_ITEMS_CONFIG, String.valueOf(id));\n\t\t\tif (resetWidgets) configManager.unsetConfiguration(CLUE_WIDGETS_CONFIG, String.valueOf(id));\n\t\t}\n\t}\n\n\tpublic void exportClueDetails(boolean exportText, boolean exportColors, boolean exportItems, boolean exportWidgets)\n\t{\n\t\tList\u003cClueIdToDetails\u003e clueIdToDetailsList \u003d new ArrayList\u003c\u003e();\n\n\t\tList\u003cClues\u003e filteredClues \u003d Clues.CLUES.stream()\n\t\t\t.filter(config.filterListByTier())\n\t\t\t.filter(config.filterListByRegion())\n\t\t\t.collect(Collectors.toList());\n\n\t\tfor (Clues clue : filteredClues)\n\t\t{\n\t\t\tint id \u003d clue.getClueID();\n\t\t\tString clueText \u003d exportText ? configManager.getConfiguration(\"clue-details-text\", String.valueOf(id)) : null;\n\t\t\tString clueColor \u003d exportColors ? configManager.getConfiguration(\"clue-details-color\", String.valueOf(id)) : null;\n\t\t\tString clueItems \u003d exportItems ? configManager.getConfiguration(CLUE_ITEMS_CONFIG, String.valueOf(id)) : null;\n\t\t\tString clueWidgets \u003d exportWidgets ? configManager.getConfiguration(CLUE_WIDGETS_CONFIG, String.valueOf(id)) : null;\n\n\t\t\t// Try to export text, color, and items. Export where valid configurations are returned\n\t\t\tList\u003cInteger\u003e loadedClueItemsData \u003d clueItems !\u003d null\n\t\t\t\t\t? gson.fromJson(clueItems, new TypeToken\u003cList\u003cInteger\u003e\u003e(){}.getType())\n\t\t\t\t\t: null;\n\n\t\t\tList\u003cWidgetId\u003e loadedClueWidgetsData \u003d clueWidgets !\u003d null\n\t\t\t\t\t? gson.fromJson(clueWidgets, new TypeToken\u003cList\u003cWidgetId\u003e\u003e(){}.getType())\n\t\t\t\t\t: null;\n\n\t\t\tColor exportedColor \u003d clueColor !\u003d null ? Color.decode(clueColor) : null;\n\n\t\t\tClueIdToDetails clueDetails \u003d new ClueIdToDetails(id, clueText, exportedColor, loadedClueItemsData, loadedClueWidgetsData);\n\t\t\tif (clueText !\u003d null || exportedColor !\u003d null || loadedClueItemsData !\u003d null || loadedClueWidgetsData !\u003d null)\n\t\t\t{\n\t\t\t\tclueIdToDetailsList.add(clueDetails);\n\t\t\t}\n\t\t}\n\n\t\tif (clueIdToDetailsList.isEmpty())\n\t\t{\n\t\t\tsendChatMessage(\"You have no updated clue details to export.\");\n\t\t\treturn;\n\t\t}\n\n\t\tfinal String exportDump \u003d gson.toJson(clueIdToDetailsList);\n\n\t\tfinal String sortedExportDump \u003d sortJsonArrayById(gson, exportDump);\n\n\t\tlog.debug(\"Exported clue details: {}\", sortedExportDump);\n\n\t\tToolkit.getDefaultToolkit()\n\t\t\t.getSystemClipboard()\n\t\t\t.setContents(new StringSelection(sortedExportDump), null);\n\t\tsendChatMessage(clueIdToDetailsList.size() + \" clue details were copied to your clipboard.\");\n\t}\n\n\tpublic static String sortJsonArrayById(Gson gson, String jsonString)\n\t{\n\t\ttry\n\t\t{\n\t\t\tJsonArray jsonArray \u003d gson.fromJson(jsonString, JsonArray.class);\n\t\t\tList\u003cJsonObject\u003e jsonList \u003d new ArrayList\u003c\u003e();\n\n\t\t\t// Convert JsonArray to a List of JsonObjects\n\t\t\tfor (JsonElement element : jsonArray)\n\t\t\t{\n\t\t\t\tif (element.isJsonObject())\n\t\t\t\t{\n\t\t\t\t\tjsonList.add(element.getAsJsonObject());\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Sort the list based on the \"id\" key\n\t\t\tjsonList.sort(Comparator.comparingInt(obj -\u003e obj.get(\"id\").getAsInt()));\n\n\t\t\t// Convert the sorted list back to a JsonArray\n\t\t\tJsonArray sortedJsonArray \u003d new JsonArray();\n\t\t\tfor (JsonObject jsonObject : jsonList)\n\t\t\t{\n\t\t\t\tsortedJsonArray.add(jsonObject);\n\t\t\t}\n\n\t\t\treturn gson.toJson(sortedJsonArray);\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\tlog.error(\"Error processing JSON export.\", e);\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tpublic void promptForImport()\n\t{\n\t\tfinal String clipboardText;\n\t\ttry\n\t\t{\n\t\t\tclipboardText \u003d Toolkit.getDefaultToolkit()\n\t\t\t\t.getSystemClipboard()\n\t\t\t\t.getData(DataFlavor.stringFlavor)\n\t\t\t\t.toString();\n\t\t}\n\t\tcatch (IOException | UnsupportedFlavorException ex)\n\t\t{\n\t\t\tsendChatMessage(\"Unable to read system clipboard.\");\n\t\t\tlog.warn(\"error reading clipboard\", ex);\n\t\t\treturn;\n\t\t}\n\n\t\tlog.debug(\"Clipboard contents: {}\", clipboardText);\n\t\tif (Strings.isNullOrEmpty(clipboardText))\n\t\t{\n\t\t\tsendChatMessage(\"You do not have any clue details copied in your clipboard.\");\n\t\t\treturn;\n\t\t}\n\n\t\tList\u003cClueIdToDetails\u003e importClueDetails;\n\t\ttry\n\t\t{\n\t\t\t// CHECKSTYLE:OFF\n\t\t\timportClueDetails \u003d gson.fromJson(clipboardText, new TypeToken\u003cList\u003cClueIdToDetails\u003e\u003e(){}.getType());\n\t\t\t// CHECKSTYLE:ON\n\t\t}\n\t\tcatch (JsonSyntaxException e)\n\t\t{\n\t\t\tlog.debug(\"Malformed JSON for clipboard import\", e);\n\t\t\tsendChatMessage(\"You do not have any clue details copied in your clipboard.\");\n\t\t\treturn;\n\t\t}\n\t\tcatch (NumberFormatException e)\n\t\t{\n\t\t\tlog.debug(\"Malformed JSON for clipboard import\", e);\n\t\t\tsendChatMessage(\"Your clue details color is not properly formatted.\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (importClueDetails.isEmpty())\n\t\t{\n\t\t\tsendChatMessage(\"You do not have any clue details copied in your clipboard.\");\n\t\t\treturn;\n\t\t}\n\n\t\tchatboxPanelManager.openTextMenuInput(\"Are you sure you want to import \" + importClueDetails.size() + \" clue details?\")\n\t\t\t.option(\"Yes\", () -\u003e importClueDetails(importClueDetails))\n\t\t\t.option(\"No\", Runnables.doNothing())\n\t\t\t.build();\n\t}\n\n\tprivate void importClueDetails(Collection\u003cClueIdToDetails\u003e importPoints)\n\t{\n\t\tfor (ClueIdToDetails importPoint : importPoints)\n\t\t{\n\t\t\tif (importPoint.text !\u003d null)\n\t\t\t{\n\t\t\t\tconfigManager.setConfiguration(\"clue-details-text\", String.valueOf(importPoint.id), importPoint.text);\n\t\t\t}\n\t\t\tif (importPoint.color !\u003d null)\n\t\t\t{\n\t\t\t\t// Default color is white, so white is used to unset configurations\n\t\t\t\tif (ClueIdToDetails.equalRGB(importPoint.color, Color.WHITE))\n\t\t\t\t{\n\t\t\t\t\tconfigManager.unsetConfiguration(\"clue-details-color\", String.valueOf(importPoint.id));\n\n\t\t\t\t\t// Reset Ground Items and Inventory Tags\n\t\t\t\t\t// Beginner \u0026 master clues are not supported by these plugins\n\t\t\t\t\tif (importPoint.id \u003e\u003d 2677)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (config.colorGroundItems())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconfigManager.unsetConfiguration(GroundItemsConfig.GROUP, \"highlight_\" + importPoint.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (config.colorInventoryTags())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconfigManager.unsetConfiguration(InventoryTagsConfig.GROUP, \"tag_\" + importPoint.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconfigManager.setConfiguration(\"clue-details-color\", String.valueOf(importPoint.id), importPoint.color);\n\n\t\t\t\t\t// Apply color to Ground Items and Inventory Tags\n\t\t\t\t\t// Beginner \u0026 master clues are not supported by these plugins\n\t\t\t\t\tif (importPoint.id \u003e\u003d 2677)\n\t\t\t\t\t{\n\t\t\t\t\t\t// Ensure ARGB format\n\t\t\t\t\t\tColor color \u003d Color.decode(configManager.getConfiguration(\"clue-details-color\", String.valueOf(importPoint.id)));\n\n\t\t\t\t\t\tif (config.colorGroundItems())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconfigManager.setConfiguration(GroundItemsConfig.GROUP, \"highlight_\" + importPoint.id, color);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (config.colorInventoryTags())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconfigManager.setConfiguration(InventoryTagsConfig.GROUP, \"tag_\" + importPoint.id,\n\t\t\t\t\t\t\t\tgson.toJson(Map.of(\"color\", color)));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (importPoint.itemIds !\u003d null)\n\t\t\t{\n\t\t\t\tif (importPoint.itemIds.isEmpty())\n\t\t\t\t{\n\t\t\t\t\tconfigManager.unsetConfiguration(CLUE_ITEMS_CONFIG, String.valueOf(importPoint.id));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconfigManager.setConfiguration(CLUE_ITEMS_CONFIG, String.valueOf(importPoint.id), importPoint.itemIds);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (importPoint.widgetIds !\u003d null)\n\t\t\t{\n\t\t\t\tif (importPoint.widgetIds.isEmpty())\n\t\t\t\t{\n\t\t\t\t\tconfigManager.unsetConfiguration(CLUE_WIDGETS_CONFIG, String.valueOf(importPoint.id));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconfigManager.setConfiguration(CLUE_WIDGETS_CONFIG, String.valueOf(importPoint.id), gson.toJson(importPoint.widgetIds));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tsendChatMessage(importPoints.size() + \" clue details were imported from the clipboard.\");\n\t\tplugin.getPanel().refresh();\n\t}\n\n\tprivate void sendChatMessage(final String message)\n\t{\n\t\tplugin.getChatMessageManager().queue(QueuedMessage.builder()\n\t\t\t.type(ChatMessageType.CONSOLE)\n\t\t\t.runeLiteFormattedMessage(message)\n\t\t\t.build());\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\ClueDetailsSharingManager.java"},{"fileName":"ClueDetailsTagsOverlay.java","content":"/*\n * Copyright (c) 2024, TheLope \u003chttps://github.com/TheLope\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport java.util.List;\nimport javax.inject.Inject;\nimport java.awt.Color;\nimport java.awt.Graphics2D;\nimport java.awt.Point;\nimport java.awt.Rectangle;\nimport net.runelite.api.widgets.WidgetItem;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.overlay.WidgetItemOverlay;\nimport net.runelite.client.ui.overlay.components.TextComponent;\nimport org.apache.commons.lang3.tuple.Pair;\n\npublic class ClueDetailsTagsOverlay extends WidgetItemOverlay\n{\n\tprivate final ClueDetailsPlugin clueDetailsPlugin;\n\tprivate final ClueDetailsConfig config;\n\tprivate final ConfigManager configManager;\n\n\t@Inject\n\tpublic ClueDetailsTagsOverlay(ClueDetailsPlugin clueDetailsPlugin, ClueDetailsConfig config, ConfigManager configManager)\n\t{\n\t\tthis.clueDetailsPlugin \u003d clueDetailsPlugin;\n\t\tthis.config \u003d config;\n\t\tthis.configManager \u003d configManager;\n\t\tshowOnInventory();\n\t}\n\n\t@Override\n\tpublic void renderItemOverlay(Graphics2D graphics, int itemId, WidgetItem widgetItem)\n\t{\n\t\tif (!config.showInventoryClueTags()) return;\n\n\t\tClues clue \u003d Clues.forItemId(itemId);\n\n\t\t// If it\u0027s an easy-elite clue (so id\u003dclue step)\n\t\tif (clue !\u003d null \u0026\u0026 clue.isEnabled(config))\n\t\t{\n\t\t\trenderText(graphics, widgetItem.getCanvasBounds(), clue.getDetail(configManager), clue.getDetailColor(configManager));\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if it\u0027s a beginner/master clue\n\t\tClueInstance readClues \u003d clueDetailsPlugin.getClueInventoryManager().getClueByClueItemId(itemId);\n\t\tif (readClues \u003d\u003d null || !readClues.isEnabled(config)) return;\n\n\t\tList\u003cInteger\u003e ids \u003d readClues.getClueIds();\n\n\t\tif (ids.isEmpty()) return;\n\n\t\tPair\u003cString, Color\u003e textAndColor \u003d getClueTextFromClueIds(ids);\n\n\t\trenderText(graphics, widgetItem.getCanvasBounds(), textAndColor.getLeft(), textAndColor.getRight());\n\t}\n\n\tprivate Pair\u003cString, Color\u003e getClueTextFromClueIds(List\u003cInteger\u003e ids)\n\t{\n\t\tString clueDetail;\n\t\tColor clueDetailColor \u003d Color.WHITE;\n\n\t\tboolean isFirst \u003d true;\n\t\tStringBuilder text \u003d new StringBuilder();\n\t\tStringBuilder detail \u003d new StringBuilder();\n\t\tfor (Integer id : ids)\n\t\t{\n\t\t\tClues clueDetails \u003d Clues.forClueIdFiltered(id);\n\t\t\tif (!isFirst)\n\t\t\t{\n\t\t\t\ttext.append(\"\u003cbr\u003e\");\n\t\t\t\tdetail.append(\"\u003cbr\u003e\");\n\t\t\t}\n\t\t\ttext.append(clueDetails \u003d\u003d null ? \"error\" : clueDetails.getClueText());\n\t\t\tdetail.append(clueDetails \u003d\u003d null ? \"error\" : clueDetails.getDetail(configManager));\n\t\t\tclueDetailColor \u003d clueDetails \u003d\u003d null ? Color.WHITE : clueDetails.getDetailColor(configManager);\n\t\t\tisFirst \u003d false;\n\t\t}\n\n\t\t// Handle three step cryptic clues\n\t\tfinal ThreeStepCrypticClue threeStepCrypticClue \u003d ThreeStepCrypticClue.forText(text.toString());\n\t\tif (threeStepCrypticClue !\u003d null)\n\t\t{\n\t\t\tthreeStepCrypticClue.update(clueDetailsPlugin.getClueInventoryManager().getCluesInInventory());\n\t\t\tclueDetail \u003d threeStepCrypticClue.getDetail(configManager, config);\n\t\t\tclueDetailColor \u003d Color.WHITE;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tclueDetail \u003d detail.toString();\n\t\t}\n\n\t\treturn Pair.of(clueDetail, clueDetailColor);\n\t}\n\n\tpublic int textPosition(Graphics2D graphics, Rectangle bounds, int i, int detailCount)\n\t{\n\t\t// Middle of item\n\t\tif (detailCount \u003d\u003d 3 \u0026\u0026 i \u003d\u003d 1)\n\t\t{\n\t\t\treturn (bounds.height + graphics.getFontMetrics().getHeight()) / 2;\n\t\t}\n\n\t\t// Bottom of item\n\t\tif ((config.clueTagLocation() \u003d\u003d ClueDetailsConfig.ClueTagLocation.SPLIT \u0026\u0026 i \u003d\u003d 1)\n\t\t\t|| (detailCount \u003d\u003d 2 \u0026\u0026 i \u003d\u003d 1)\n\t\t\t|| config.clueTagLocation() \u003d\u003d ClueDetailsConfig.ClueTagLocation.BOTTOM \u0026\u0026 detailCount \u003d\u003d 1\n\t\t\t|| i \u003d\u003d 2)\n\t\t{\n\t\t\treturn bounds.height;\n\t\t}\n\n\t\t// Top of item\n\t\treturn graphics.getFontMetrics().getHeight();\n\t}\n\n\t// Render Clue Detail in the \"Item Tag\" style\n\tprivate void renderText(Graphics2D graphics, Rectangle bounds, String clueDetail, Color clueDetailColor)\n\t{\n\t\tif (clueDetail \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tgraphics.setFont(FontManager.getRunescapeSmallFont());\n\n\t\tfinal TextComponent textComponent \u003d new TextComponent();\n\n\t\tString[] clueDetails \u003d new String [] {clueDetail};\n\t\t// Handle Three Step Cryptic Clues\n\t\tif (clueDetail.contains(\"\u003cbr\u003e\"))\n\t\t{\n\t\t\tclueDetails \u003d clueDetail.split(\"\u003cbr\u003e\");\n\t\t}\n\n\t\t// Handle split\n\t\tif (config.clueTagLocation() \u003d\u003d ClueDetailsConfig.ClueTagLocation.SPLIT\n\t\t\t\u0026\u0026 !config.clueTagSplit().isEmpty()\n\t\t\t\u0026\u0026 clueDetails.length \u003d\u003d 1)\n\t\t{\n\t\t\t// Correct clueDetailColor for three step cryptic clue\n\t\t\tif (clueDetail.contains(\"\u003ccol\u003d\"))\n\t\t\t{\n\t\t\t\tclueDetailColor \u003d Color.decode(\"#\" + getStringBetween(clueDetail, \"\u003ccol\u003d\", \"\u003e\"));\n\t\t\t}\n\n\t\t\tclueDetails \u003d clueDetails[0].split(config.clueTagSplit(), 3);\n\t\t}\n\n\t\tif (config.colorInventoryClueTags())\n\t\t{\n\t\t\ttextComponent.setColor(clueDetailColor);\n\t\t}\n\n\t\t// Render tag in configured location\n\t\tint i \u003d 0;\n\t\tint detailCount \u003d clueDetails.length;\n\t\tfor (String detail : clueDetails)\n\t\t{\n\t\t\ttextComponent.setPosition(new Point(\n\t\t\t\tbounds.x - 1,\n\t\t\t\tbounds.y - 1 + textPosition(graphics, bounds, i, detailCount)\n\t\t\t));\n\t\t\ttextComponent.setText(detail);\n\t\t\ttextComponent.render(graphics);\n\t\t\ti++;\n\t\t}\n\t}\n\n\tpublic static String getStringBetween(String input, String start, String end)\n\t{\n\t\tint startIndex \u003d input.indexOf(start);\n\t\tif (startIndex \u003d\u003d -1)\n\t\t{\n\t\t\treturn null; // Start string not found\n\t\t}\n\n\t\tstartIndex +\u003d start.length(); // Move past the start string\n\n\t\tint endIndex \u003d input.indexOf(end, startIndex);\n\t\tif (endIndex \u003d\u003d -1)\n\t\t{\n\t\t\treturn null; // End string not found\n\t\t}\n\n\t\treturn input.substring(startIndex, endIndex);\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\ClueDetailsTagsOverlay.java"},{"fileName":"ClueDetailsWidgetsOverlay.java","content":"/*\n * Copyright (c) 2025, cubeee \u003chttps://www.github.com/cubeee\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport com.google.common.cache.Cache;\nimport com.google.common.cache.CacheBuilder;\nimport javax.inject.Singleton;\nimport net.runelite.api.Client;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\n\nimport javax.inject.Inject;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.util.*;\n\n@Singleton\npublic class ClueDetailsWidgetsOverlay extends OverlayPanel\n{\n\tprivate final Client client;\n\tprivate final ClueDetailsConfig config;\n\tprivate final ConfigManager configManager;\n\n\tprivate final ClueInventoryManager clueInventoryManager;\n\tprivate final CluePreferenceManager cluePreferenceManager;\n\n\tprivate final Cache\u003cWidgetId, Color\u003e clueColorCache;\n\n\tprivate long lastUpdate \u003d Integer.MAX_VALUE;\n\n\t@Inject\n\tpublic ClueDetailsWidgetsOverlay(Client client, ClueDetailsConfig config, ConfigManager configManager,\n\t                                 ClueInventoryManager clueInventoryManager, CluePreferenceManager cluePreferenceManager)\n\t{\n\t\tsetPriority(PRIORITY_HIGHEST);\n\t\tsetLayer(OverlayLayer.ABOVE_WIDGETS);\n\t\tsetDragTargetable(false);\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\n\t\tthis.client \u003d client;\n\t\tthis.config \u003d config;\n\t\tthis.configManager \u003d configManager;\n\t\tthis.clueInventoryManager \u003d clueInventoryManager;\n\t\tthis.cluePreferenceManager \u003d cluePreferenceManager;\n\n\t\tthis.clueColorCache \u003d CacheBuilder.newBuilder()\n\t\t\t.concurrencyLevel(1)\n\t\t\t.maximumSize(100)\n\t\t\t.build();\n\t}\n\n\tpublic void cacheInventoryCluesWidgetColors()\n\t{\n\t\tColor defaultHighlightColor \u003d config.widgetHighlightColor();\n\t\tMap\u003cWidgetId, Color\u003e clueWidgetColors \u003d new HashMap\u003c\u003e();\n\t\tif (config.highlightInventoryClueWidgets())\n\t\t{\n\t\t\tfor (Integer itemID : clueInventoryManager.getCluesInInventory())\n\t\t\t{\n\t\t\t\tif (itemID \u003d\u003d null) continue;\n\t\t\t\tClueInstance instance \u003d clueInventoryManager.getClueByClueItemId(itemID);\n\t\t\t\tif (instance \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tfor (int clueId : instance.getClueIds())\n\t\t\t\t{\n\t\t\t\t\tClues clue \u003d Clues.forClueIdFiltered(clueId);\n\t\t\t\t\tif (clue \u003d\u003d null || !clue.isEnabled(config))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tColor clueColor \u003d clue.getDetailColor(configManager);\n\t\t\t\t\tColor widgetColor \u003d config.colorInventoryClueWidgets()\n\t\t\t\t\t\t? new Color(clueColor.getRed(), clueColor.getGreen(), clueColor.getBlue(), defaultHighlightColor.getAlpha())\n\t\t\t\t\t\t: defaultHighlightColor;\n\t\t\t\t\tList\u003cWidgetId\u003e widgetsPreference \u003d cluePreferenceManager.getWidgetsPreference(clueId);\n\t\t\t\t\tif (widgetsPreference !\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (WidgetId widgetId : widgetsPreference)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tclueWidgetColors.put(widgetId, widgetColor);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tclueColorCache.invalidateAll();\n\t\tclueColorCache.putAll(clueWidgetColors);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tlong lastInventoryUpdate \u003d clueInventoryManager.getLastInventoryUpdate();\n\t\tif (lastUpdate !\u003d lastInventoryUpdate)\n\t\t{\n\t\t\tlastUpdate \u003d lastInventoryUpdate;\n\t\t\tcacheInventoryCluesWidgetColors();\n\t\t}\n\n\t\tif (config.highlightInventoryClueWidgets() \u0026\u0026 clueColorCache.size() \u003e 0)\n\t\t{\n\t\t\tfor (Map.Entry\u003cWidgetId, Color\u003e entry : clueColorCache.asMap().entrySet())\n\t\t\t{\n\t\t\t\tWidgetId widgetId \u003d entry.getKey();\n\t\t\t\tint componentId \u003d widgetId.getComponentId();\n\t\t\t\tInteger childIndex \u003d widgetId.getChildIndex();\n\t\t\t\tColor widgetColor \u003d entry.getValue();\n\n\t\t\t\tWidget widget \u003d client.getWidget(componentId);\n\t\t\t\tWidget parentWidget \u003d null;\n\n\t\t\t\tif (widget !\u003d null \u0026\u0026 childIndex !\u003d null \u0026\u0026 childIndex !\u003d -1)\n\t\t\t\t{\n\t\t\t\t\tWidget[] children \u003d widget.getChildren();\n\t\t\t\t\tif (children !\u003d null \u0026\u0026 childIndex \u003c children.length)\n\t\t\t\t\t{\n\t\t\t\t\t\tparentWidget \u003d widget.getParent();\n\t\t\t\t\t\twidget \u003d children[childIndex];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (widget \u003d\u003d null || widget.isHidden())\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// parent is set earlier for child widgets but if not, use the normal widget\u0027s parent\n\t\t\t\tif (parentWidget \u003d\u003d null)\n\t\t\t\t{\n                    parentWidget \u003d widget.getParent();\n\t\t\t\t}\n\n\t\t\t\tgraphics.setColor(widgetColor);\n\n\t\t\t\t// Highlight as much of the widget as is visible of it inside its parent\n\t\t\t\tif (parentWidget !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tgraphics.setClip(parentWidget.getBounds());\n\t\t\t\t}\n\t\t\t\tgraphics.fill(widget.getBounds());\n\t\t\t}\n\t\t}\n\t\treturn super.render(graphics);\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\ClueDetailsWidgetsOverlay.java"},{"fileName":"ClueGroundManager.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport com.cluedetails.filters.ClueTier;\nimport java.util.stream.Collectors;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport lombok.Getter;\nimport net.runelite.api.*;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.ItemDespawned;\nimport net.runelite.api.events.ItemSpawned;\n\nimport java.util.*;\nimport net.runelite.api.gameval.ItemID;\n\n@Singleton\npublic class ClueGroundManager\n{\n\tprivate final Client client;\n\n\tprivate final ClueDetailsPlugin clueDetailsPlugin;\n\t@Getter\n\tprivate final ClueGroundSaveDataManager clueGroundSaveDataManager;\n\tprivate final Set\u003cTile\u003e itemHasSpawnedOnTileThisTick \u003d new HashSet\u003c\u003e();\n\t@Getter\n\tprivate final List\u003cClueInstance\u003e despawnedClueQueueForInventoryCheck \u003d new ArrayList\u003c\u003e();\n\tprivate final int MAX_DESPAWN_TIMER \u003d 6100;\n\tprivate Zone lastZone;\n\tprivate Zone currentZone;\n\tprivate final WorldPointToClueInstances trackedClues;\n\n\tprivate final Set\u003cTile\u003e resetEasyToEliteThisTick \u003d new HashSet\u003c\u003e();\n\n\t@Inject\n\tpublic ClueGroundManager(Client client, ClueGroundSaveDataManager clueGroundSaveDataManager, ClueDetailsPlugin clueDetailsPlugin)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.clueDetailsPlugin \u003d clueDetailsPlugin;\n\t\tthis.clueGroundSaveDataManager \u003d clueGroundSaveDataManager;\n\n\t\ttrackedClues \u003d new WorldPointToClueInstances(client, clueDetailsPlugin);\n\t}\n\n\tpublic void startUp()\n\t{\n\t\tloadStateFromConfig();\n\t}\n\n\tpublic void shutDown()\n\t{\n\t\t// Need to clear incase the player toggles the plugin on/off on the same tick\n\t\tresetEasyToEliteThisTick.clear();\n\t}\n\n\tpublic SortedSet\u003cClueInstance\u003e getAllGroundCluesOnWp(WorldPoint worldPoint)\n\t{\n\t\treturn trackedClues.getAllCluesAtWorldPoint(worldPoint);\n\t}\n\n\tpublic void onItemSpawned(ItemSpawned event)\n\t{\n\t\tTileItem item \u003d event.getItem();\n\t\tTile tile \u003d event.getTile();\n\n\t\tif (!Clues.isClue(item.getId(), clueDetailsPlugin.isDeveloperMode())) return;\n\n\t\t// If easy-elite task, we just override\n\t\tif (!Clues.isBeginnerOrMasterClue(item.getId(), clueDetailsPlugin.isDeveloperMode()))\n\t\t{\n\t\t\tresetEasyToEliteThisTick.add(tile);\n\t\t\treturn;\n\t\t}\n\n\t\tClueInstance inventoryClue \u003d clueDetailsPlugin.getClueInventoryManager().getClueByClueItemId(item.getId());\n\t\t// If clue in inventory AND new clue appeared with fresh despawn timer, it must be the inventory item being dropped\n\t\tif (isNewGroundClue(item.getId(), item.getDespawnTime()) \u0026\u0026 inventoryClue !\u003d null)\n\t\t{\n\t\t\tClueInstance newGroundClue \u003d new ClueInstance(inventoryClue.getClueIds(), inventoryClue.getItemId(), tile.getWorldLocation(), item, true);\n\t\t\ttrackedClues.addClue(newGroundClue);\n\t\t\treturn;\n\t\t}\n\n\t\t// Handle items spawned on tile without aligned times and not dropped\n\t\titemHasSpawnedOnTileThisTick.add(tile);\n\t}\n\n\tprivate boolean isNewGroundClue(int itemID, int despawnTick)\n\t{\n\t\tint ticksToDespawn \u003d despawnTick - client.getTickCount();\n\n\t\tif (ticksToDespawn \u003d\u003d MAX_DESPAWN_TIMER) return true;\n\n\t\treturn clueDetailsPlugin.isDeveloperMode() \u0026\u0026\n\t\t\tClues.DEV_MODE_IDS.contains(itemID) \u0026\u0026\n\t\t\tdespawnTick \u003e\u003d 300;\n\t}\n\n\tpublic void onItemDespawned(ItemDespawned event)\n\t{\n\t\tTileItem item \u003d event.getItem();\n\t\tif (!Clues.isClue(item.getId(), clueDetailsPlugin.isDeveloperMode())) return;\n\t\tWorldPoint location \u003d event.getTile().getWorldLocation();\n\n\t\t// Only process events where the actual item has just despawned\n\t\t// This helps to retain identified clues\n\t\tif (event.getItem().getId() \u003d\u003d ItemID.TRAIL_CLUE_BEGINNER\n\t\t\t|| event.getItem().getId() \u003d\u003d ItemID.TRAIL_CLUE_MASTER)\n\t\t{\n\t\t\tif (ClueDetailsPlugin.getCurrentPlane() !\u003d location.getPlane()) return;\n\t\t}\n\n\t\tif (!Clues.isBeginnerOrMasterClue(item.getId(), clueDetailsPlugin.isDeveloperMode()))\n\t\t{\n\t\t\tClueInstance clueInstance \u003d new ClueInstance(List.of(), item.getId(), location, item, client.getTickCount());\n\t\t\ttrackedClues.removeClue(clueInstance);\n\t\t\treturn;\n\t\t}\n\n\t\tList\u003cClueInstance\u003e cluesAtLocation \u003d trackedClues.getBeginnerAndMasterCluesAtWorldPoint(location);\n\n\t\t// Catch despawn in vicinity\n\t\tif (cluesAtLocation \u003d\u003d null) return;\n\n\t\t// If no logging out/reloading and such happens, despawnTime remains off by 1, so need to account for it\n\t\tif (item.getDespawnTime() - client.getTickCount() \u003c\u003d 1)\n\t\t{\n\t\t\tOptional\u003cClueInstance\u003e optionalClue \u003d cluesAtLocation.stream()\n\t\t\t\t.filter((clue) -\u003e clue.getTileItem() \u003d\u003d item)\n\t\t\t\t.findFirst();\n\t\t\toptionalClue.ifPresent((trackedClues::removeClue));\n\t\t\treturn;\n\t\t}\n\n\t\tif (trackedClues.getTileAtWorldPoint(location) \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// If despawned on a tile still in the scene, AND hasn\u0027t timed out, we might have:\n\t\t// 1. Picked up the clue\n\t\t// 2. Done nothing, clue is still there just with a new ID\n\t\t// We know it\u0027s 2 if we\u0027ve gone from 5 zones distance to 4 zones distance\n\t\tZone clueZone \u003d new Zone(location);\n\t\tZone currentZone \u003d new Zone(client.getLocalPlayer().getWorldLocation());\n\t\tif (lastZone !\u003d null)\n\t\t{\n\t\t\tint distFromLastZone \u003d clueZone.maxDistanceTo(lastZone);\n\t\t\tint distFromCurrentZone \u003d clueZone.maxDistanceTo(currentZone);\n\t\t\tif (distFromLastZone \u003d\u003d 4 \u0026\u0026 distFromCurrentZone \u003d\u003d 3)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Not gone over a zone to load, probably picked up\n\t\tOptional\u003cClueInstance\u003e optionalClue \u003d cluesAtLocation.stream()\n\t\t\t.filter((clue) -\u003e clue.getTileItem() \u003d\u003d item)\n\t\t\t.findFirst();\n\t\toptionalClue.ifPresent(despawnedClueQueueForInventoryCheck::add);\n\t\toptionalClue.ifPresent((trackedClues::removeClue));\n\t}\n\n\tpublic Set\u003cWorldPoint\u003e getTrackedWorldPoints()\n\t{\n\t\treturn trackedClues.getAllTrackedWorldPoints();\n\t}\n\n\tpublic void onGameTick()\n\t{\n\t\tcurrentZone \u003d new Zone(client.getLocalPlayer().getWorldLocation());\n\t\ttrackedClues.clearEmptyTiles(currentZone);\n\n\t\tfor (Tile tile : itemHasSpawnedOnTileThisTick)\n\t\t{\n\t\t\tcheckClueThroughRelativeDespawnTimers(tile);\n\t\t}\n\t\titemHasSpawnedOnTileThisTick.clear();\n\t\ttrackedClues.removeDespawnedClues();\n\t\tresetEasyToEliteThisTick.forEach(this::createEasyToEliteForTile);\n\t\tresetEasyToEliteThisTick.clear();\n\n\t\tlastZone \u003d currentZone;\n\t}\n\n\tprivate void createEasyToEliteForTile(Tile tile)\n\t{\n\n\t\tList\u003cTileItem\u003e items \u003d getClueItemsAtTile(tile);\n\t\tif (items \u003d\u003d null) return;\n\n\t\tclearEasyToEliteCluesAtWorldPoint(tile.getWorldLocation());\n\n\t\tfor (TileItem item : items)\n\t\t{\n\t\t\tif (Clues.isClue(item.getId(), clueDetailsPlugin.isDeveloperMode()) \u0026\u0026 !Clues.isBeginnerOrMasterClue(item.getId(), clueDetailsPlugin.isDeveloperMode()))\n\t\t\t{\n\t\t\t\tClueInstance clueInstance \u003d new ClueInstance(List.of(), item.getId(), tile.getWorldLocation(), item, client.getTickCount());\n\t\t\t\ttrackedClues.addClue(clueInstance);\n\t\t\t}\n\t\t}\n\n\t\tSortedSet\u003cClueInstance\u003e cluesAtWp \u003d trackedClues.getAllCluesAtWorldPoint(tile.getWorldLocation());\n\t\tfor (int i \u003d 0; i \u003c items.size(); i++)\n\t\t{\n\t\t\tTileItem tileItem \u003d items.get(i);\n\t\t\tint finalI \u003d i + 1;\n\t\t\tcluesAtWp.stream()\n\t\t\t\t.filter((clueInstance -\u003e clueInstance.getTileItem() \u003d\u003d tileItem))\n\t\t\t\t.findFirst()\n\t\t\t\t.ifPresent((clueInstance -\u003e clueInstance.setSequenceNumber(finalI)));\n\t\t}\n\t\tList\u003cClueInstance\u003e clues \u003d new ArrayList\u003c\u003e(cluesAtWp);\n\t\tfor (ClueInstance clueInstance : clues)\n\t\t{\n\t\t\t// Re-sorts the order of clues\n\t\t\ttrackedClues.removeClue(clueInstance);\n\t\t\ttrackedClues.addClue(clueInstance);\n\t\t}\n\t}\n\n\tprivate void checkClueThroughRelativeDespawnTimers(Tile tile)\n\t{\n\t\tWorldPoint tileWp \u003d tile.getWorldLocation();\n\n\t\tList\u003cTileItem\u003e itemsOnTile \u003d getTrackedItemsAtTile(tile);\n\t\tif (itemsOnTile.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tList\u003cClueInstance\u003e storedClues \u003d trackedClues.getBeginnerAndMasterCluesAtWorldPoint(tileWp);\n\n\t\tList\u003cClueInstance\u003e updatedStoredClues \u003d generateNewCluesOnTile(tileWp, storedClues, itemsOnTile);\n\n\t\tif (updatedStoredClues.isEmpty())\n\t\t{\n\t\t\ttrackedClues.clearBeginnerAndMasterCluesAtWorldPoint(tileWp);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// If we didn\u0027t find an item for it on the tile, remove it\n\t\t\tupdatedStoredClues.removeIf((clue) -\u003e clue.getTileItem() \u003d\u003d null);\n\n\t\t\ttrackedClues.clearBeginnerAndMasterCluesAtWorldPoint(tileWp);\n\n\t\t\t// Update the stored clues\n\t\t\tfor (ClueInstance updatedStoredClue : updatedStoredClues)\n\t\t\t{\n\t\t\t\ttrackedClues.addClue(updatedStoredClue);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate List\u003cClueInstance\u003e generateNewCluesOnTile(WorldPoint tileWp, List\u003cClueInstance\u003e storedClues, List\u003cTileItem\u003e cluesOnTile)\n\t{\n\t\tint currentTick \u003d client.getTickCount();\n\n\t\tif (storedClues.size() \u003d\u003d 1 \u0026\u0026 cluesOnTile.size() \u003d\u003d 1)\n\t\t{\n\t\t\t// We assume it is the same clue. It is possible for it to be swapped with another clue though in\n\t\t\t// another client/mobile, and this will be wrong\n\t\t\tif (storedClues.get(0).getDespawnTick() \u003e\u003d cluesOnTile.get(0).getDespawnTime())\n\t\t\t{\n\t\t\t\tstoredClues.get(0).setTileItem(cluesOnTile.get(0));\n\t\t\t\treturn storedClues;\n\t\t\t}\n\t\t}\n\n\t\tList\u003cClueInstance\u003e sortedStoredClues \u003d new ArrayList\u003c\u003e(storedClues);\n\t\tsortedStoredClues.sort(Comparator.comparingInt((clue) -\u003e clue.getTicksToDespawnConsideringTileItem(currentTick)));\n\n\t\t// If only 1 of either but not both, less certainty as can\u0027t use diffs.\n\t\t// Could assume things like last clue expired, probs let\u0027s just assume nothing\n\t\tif (storedClues.size() \u003c\u003d 1 || cluesOnTile.size() \u003d\u003d 1)\n\t\t{\n\t\t\tList\u003cClueInstance\u003e actualCluesOnTile \u003d new ArrayList\u003c\u003e();\n\t\t\t// Set tile\u0027s clues to just be unknown for all clues on tile\n\t\t\tfor (TileItem groundClue : cluesOnTile)\n\t\t\t{\n\t\t\t\tClueInstance clueInstance \u003d new ClueInstance(List.of(),\n\t\t\t\t\tgroundClue.getId(),\n\t\t\t\t\ttileWp,\n\t\t\t\t\tgroundClue,\n\t\t\t\t\tclient.getTickCount()\n\t\t\t\t);\n\t\t\t\tclueInstance.setTileItem(groundClue);\n\t\t\t\tactualCluesOnTile.add(clueInstance);\n\t\t\t}\n\t\t\treturn actualCluesOnTile;\n\t\t}\n\n\t\t// Sort ground clues by despawn time ascending\n\t\tList\u003cTileItem\u003e sortedGroundClues \u003d new ArrayList\u003c\u003e(cluesOnTile);\n\t\tsortedGroundClues.removeIf((tileItem -\u003e tileItem.getDespawnTime() \u003e sortedStoredClues.get(sortedStoredClues.size() - 1).getDespawnTick()));\n\t\tsortedGroundClues.sort(Comparator.comparingInt(TileItem::getDespawnTime));\n\n\t\tMap\u003cInteger, List\u003cTileItem\u003e\u003e groundItemsByItemID \u003d sortedGroundClues.stream()\n\t\t\t.collect(Collectors.groupingBy(TileItem::getId, LinkedHashMap::new, Collectors.toList()));\n\t\tMap\u003cInteger, List\u003cClueInstance\u003e\u003e sortedItemsByItemID \u003d sortedStoredClues.stream()\n\t\t\t.collect(Collectors.groupingBy(ClueInstance::getItemId, LinkedHashMap::new, Collectors.toList()));\n\n\t\tfor (Integer itemID : groundItemsByItemID.keySet())\n\t\t{\n\t\t\tif (sortedItemsByItemID.get(itemID) \u003d\u003d null) continue;\n\t\t\tfindMatchingClues(sortedItemsByItemID.get(itemID), groundItemsByItemID.get(itemID));\n\t\t}\n\t\t\n\t\tList\u003cClueInstance\u003e foundClues \u003d new ArrayList\u003c\u003e();\n\n\t\tcluesOnTile.stream()\n\t\t\t.map(tileItem -\u003e sortedStoredClues.stream()\n\t\t\t\t.filter(clue -\u003e clue.getTileItem() \u003d\u003d tileItem)\n\t\t\t\t.findFirst()\n\t\t\t\t.orElseGet(() -\u003e new ClueInstance(List.of(), tileItem.getId(), tileWp, tileItem, client.getTickCount())))\n\t\t\t.forEach(foundClues::add);\n\n\t\treturn foundClues;\n\t}\n\n\tprivate void findMatchingClues(List\u003cClueInstance\u003e sortedStoredClues, List\u003cTileItem\u003e sortedGroundClues)\n\t{\n\t\t// Need to loop diffs, and see matches in each.\n\t\t// For items with the same ID, no matter what item you click in a stack, you will always pick up the first item dropped in the stack\n\t\t// This means we don\u0027t need to worry about considering gaps where a clue has been taken from the middle of a stack.\n\t\tint minGroundItemFound \u003d 0;\n\n\t\tif (sortedStoredClues.size() \u003d\u003d 1 \u0026\u0026 sortedGroundClues.size() \u003d\u003d 1)\n\t\t{\n\t\t\t// We assume it is the same clue. It is possible for it to be swapped with another clue though in\n\t\t\t// another client/mobile, and this will be wrong\n\t\t\tif (sortedStoredClues.get(0).getDespawnTick() \u003e\u003d sortedGroundClues.get(0).getDespawnTime())\n\t\t\t{\n\t\t\t\tsortedStoredClues.get(0).setTileItem(sortedGroundClues.get(0));\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tfor (int i \u003d 0; i \u003c sortedStoredClues.size() - 1; i++)\n\t\t{\n\t\t\tClueInstance clueInstance1 \u003d sortedStoredClues.get(i);\n\t\t\tClueInstance clueInstance2 \u003d sortedStoredClues.get(i + 1);\n\n\t\t\tTileItem groundClue1 \u003d sortedGroundClues.get(minGroundItemFound);\n\t\t\tTileItem groundClue2 \u003d sortedGroundClues.get(minGroundItemFound + 1);\n\n\t\t\tint currentStoredClueDiff \u003d clueInstance2.getTimeToDespawnFromDataInTicks() - clueInstance1.getTimeToDespawnFromDataInTicks();\n\t\t\tint currentGroundClueDiff \u003d groundClue2.getDespawnTime() - groundClue1.getDespawnTime();\n\t\t\t// Same diff, probs same thing\n\t\t\tif (currentGroundClueDiff !\u003d currentStoredClueDiff) continue;\n\t\t\t// If item will despawn later than the stored clue, it can\u0027t be it.\n\t\t\tif (groundClue1.getDespawnTime() \u003e clueInstance1.getDespawnTick()) continue;\n\t\t\tif (groundClue2.getDespawnTime() \u003e clueInstance2.getDespawnTick()) continue;\n\t\t\tclueInstance1.setTileItem(groundClue1);\n\t\t\tclueInstance2.setTileItem(groundClue2);\n\t\t\tminGroundItemFound++;\n\t\t}\n\n\t\tfor (ClueInstance sortedStoredClue : sortedStoredClues)\n\t\t{\n\t\t\tsortedStoredClue.updateDespawnTick();\n\t\t}\n\t}\n\n\tprivate List\u003cTileItem\u003e getClueItemsAtTile(Tile tile)\n\t{\n\t\tList\u003cTileItem\u003e items \u003d tile.getGroundItems();\n\t\tif (items \u003d\u003d null)\n\t\t{\n\t\t\treturn Collections.emptyList();\n\t\t}\n\t\treturn items.stream()\n\t\t\t.filter(item -\u003e Clues.isClue(item.getId(), clueDetailsPlugin.isDeveloperMode()))\n\t\t\t.collect(Collectors.toList());\n\t}\n\n\tprivate List\u003cTileItem\u003e getTrackedItemsAtTile(Tile tile)\n\t{\n\t\tList\u003cTileItem\u003e items \u003d tile.getGroundItems();\n\t\tif (items \u003d\u003d null)\n\t\t{\n\t\t\treturn Collections.emptyList();\n\t\t}\n\t\treturn items.stream()\n\t\t\t.filter(item -\u003e Clues.isBeginnerOrMasterClue(item.getId(), clueDetailsPlugin.isDeveloperMode()))\n\t\t\t.collect(Collectors.toList());\n\t}\n\n\tclass ClueInstanceComparator implements Comparator\u003cClueInstance\u003e\n\t{\n\t\t@Override\n\t\tpublic int compare(ClueInstance o1, ClueInstance o2)\n\t\t{\n\t\t\treturn Comparator\n\t\t\t\t.comparingLong(ClueInstance::getSequenceNumber)\n\t\t\t\t.thenComparingInt(ClueInstance::getDespawnTick)\n\t\t\t\t.compare(o1, o2);\n\t\t}\n\t}\n\n\tpublic TreeMap\u003cClueInstance, Integer\u003e getClueInstancesWithQuantityAtWp(ClueDetailsConfig config, WorldPoint wp)\n\t{\n\t\tif (!trackedClues.getAllTrackedWorldPoints().contains(wp)) return null;\n\n\t\tSortedSet\u003cClueInstance\u003e groundItemList \u003d trackedClues.getAllCluesAtWorldPoint(wp);\n\t\tMap\u003cClueInstance, Integer\u003e groundItemMap \u003d new HashMap\u003c\u003e();\n\n\t\tif (config.collapseGroundCluesByTier())\n\t\t{\n\t\t\tgroundItemMap \u003d keepOldestTierClues(groundItemList);\n\t\t}\n\t\telse if (config.collapseGroundClues())\n\t\t{\n\t\t\tgroundItemMap \u003d keepOldestUniqueClues(groundItemList);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor (ClueInstance item : groundItemList)\n\t\t\t{\n\t\t\t\tgroundItemMap.put(item, 1);\n\t\t\t}\n\t\t}\n\n\t\t// Sort ClueInstances by despawn time\n\t\tClueInstanceComparator clueInstanceComparator \u003d new ClueInstanceComparator();\n\t\tTreeMap\u003cClueInstance, Integer\u003e clueInstancesWithQuantityAtWp \u003d new TreeMap\u003c\u003e(clueInstanceComparator);\n\t\tclueInstancesWithQuantityAtWp.putAll(groundItemMap);\n\t\treturn clueInstancesWithQuantityAtWp;\n\t}\n\n\t// Remove duplicate step clues, maintaining a count of the original amount of each\n\tpublic static Map\u003cClueInstance, Integer\u003e keepOldestUniqueClues(SortedSet\u003cClueInstance\u003e items)\n\t{\n\t\tMap\u003cList\u003cInteger\u003e, ClueInstance\u003e lowestValueItems \u003d new HashMap\u003c\u003e();\n\t\tMap\u003cList\u003cInteger\u003e, Integer\u003e uniqueCount \u003d new HashMap\u003c\u003e();\n\n\t\tfor (ClueInstance item : items)\n\t\t{\n\t\t\tList\u003cInteger\u003e clueIds \u003d item.getUniqueIds();\n\n\t\t\tif (!lowestValueItems.containsKey(clueIds)\n\t\t\t\t|| item.getDespawnTick() \u003c lowestValueItems.get(clueIds).getDespawnTick())\n\t\t\t{\n\t\t\t\tlowestValueItems.put(clueIds, item);\n\t\t\t\tuniqueCount.put(clueIds, 1);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tuniqueCount.put(clueIds, uniqueCount.get(clueIds) + 1);\n\t\t\t}\n\t\t}\n\n\t\treturn lowestValueItems.values().stream()\n\t\t\t.collect(Collectors.toMap(item -\u003e item, item -\u003e uniqueCount.get(item.getUniqueIds())));\n\t}\n\n\t// Remove duplicate tier clues, maintaining a count of the original amount of each\n\tpublic static Map\u003cClueInstance, Integer\u003e keepOldestTierClues(SortedSet\u003cClueInstance\u003e items)\n\t{\n\t\tMap\u003cClueTier, ClueInstance\u003e lowestValueItems \u003d new HashMap\u003c\u003e();\n\t\tMap\u003cClueTier, Integer\u003e uniqueCount \u003d new HashMap\u003c\u003e();\n\n\t\tfor (ClueInstance item : items)\n\t\t{\n\t\t\tClueTier tier \u003d item.getTier();\n\n\t\t\tif (!lowestValueItems.containsKey(tier)\n\t\t\t\t|| item.getDespawnTick() \u003c lowestValueItems.get(tier).getDespawnTick())\n\t\t\t{\n\t\t\t\tlowestValueItems.put(tier, item);\n\t\t\t\tuniqueCount.put(tier, 1);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tuniqueCount.put(tier, uniqueCount.get(tier) + 1);\n\t\t\t}\n\t\t}\n\n\t\treturn lowestValueItems.values().stream()\n\t\t\t.collect(Collectors.toMap(item -\u003e item, item -\u003e\tuniqueCount.get(item.getTier())));\n\t}\n\n\tpublic void clearBeginnerAndMasterCluesAtWorldPoint(WorldPoint wp)\n\t{\n\t\ttrackedClues.clearBeginnerAndMasterCluesAtWorldPoint(wp);\n\t}\n\n\tpublic void clearEasyToEliteCluesAtWorldPoint(WorldPoint wp)\n\t{\n\t\ttrackedClues.clearEasyToEliteCluesAtWorldPoint(wp);\n\t}\n\n\tpublic void saveStateToConfig()\n\t{\n\t\tclueGroundSaveDataManager.saveStateToConfig(trackedClues.getAllClues());\n\t}\n\n\tpublic void loadStateFromConfig()\n\t{\n\t\ttrackedClues.clearAllClues();\n\t\toverwriteGroundClues(clueGroundSaveDataManager.loadStateFromConfig());\n\t}\n\n\tprivate void overwriteGroundClues(Map\u003cWorldPoint, List\u003cClueInstance\u003e\u003e newGroundClues)\n\t{\n\t\t// Iterate over each list of ClueInstances in the map.\n\t\tfor (List\u003cClueInstance\u003e clueInstances : newGroundClues.values())\n\t\t{\n\t\t\tfor (ClueInstance clueInstance : clueInstances)\n\t\t\t{\n\t\t\t\t\ttrackedClues.addClue(clueInstance);\n\t\t\t}\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\ClueGroundManager.java"},{"fileName":"ClueGroundOverlay.java","content":"/*\n * Copyright (c) 2024, TheLope \u003chttps://github.com/TheLope\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.FontMetrics;\nimport java.awt.Graphics2D;\nimport java.awt.Polygon;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport net.runelite.api.Client;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Player;\nimport net.runelite.api.Point;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\nimport net.runelite.client.ui.overlay.components.TextComponent;\n\nimport static com.cluedetails.ClueDetailsConfig.SavedThreeStepperEnum.BOTH;\nimport static com.cluedetails.ClueDetailsConfig.SavedThreeStepperEnum.GROUND;\n\n// Heavily lifted from net.runelite.client.plugins.grounditems.GroundItemsOverlay\n@Singleton\npublic class ClueGroundOverlay extends Overlay\n{\n\tprivate static final int MAX_DISTANCE \u003d 2500;\n\t// We must offset the text on the z-axis such that\n\t// it doesn\u0027t obscure the ground items below it.\n\tprivate static final int OFFSET_Z \u003d 20;\n\t// Clue item height\n\tprivate static final int CLUE_ITEM_HEIGHT \u003d 0;\n\t// The 15 pixel gap between each drawn ground item.\n\tprivate static final int STRING_GAP \u003d 15;\n\n\tprivate final Client client;\n\tprivate final ClueDetailsConfig config;\n\tprivate final TextComponent textComponent \u003d new TextComponent();\n\tprivate final Map\u003cWorldPoint, Integer\u003e offsetMap \u003d new HashMap\u003c\u003e();\n\tprivate final ConfigManager configManager;\n\tprivate final ClueDetailsPlugin plugin;\n\tprivate final ClueGroundManager clueGroundManager;\n\tprivate final ClueThreeStepSaver clueThreeStepSaver;\n\n\t@Inject\n\tprivate ClueGroundOverlay(ClueDetailsPlugin plugin, Client client, ClueDetailsConfig config, ConfigManager configManager,\n\t                          ClueThreeStepSaver clueThreeStepSaver, ClueGroundManager clueGroundManager)\n\t{\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.UNDER_WIDGETS);\n\t\tthis.plugin \u003d plugin;\n\t\tthis.client \u003d client;\n\t\tthis.config \u003d config;\n\t\tthis.configManager \u003d configManager;\n\t\tthis.clueThreeStepSaver \u003d clueThreeStepSaver;\n\t\tthis.clueGroundManager \u003d clueGroundManager;\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif(clueGroundManager \u003d\u003d null) return null;\n\n\t\tif (!config.showGroundClues() \u0026\u0026 !shouldRenderSavedThreeStepper())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tfinal FontMetrics fm \u003d graphics.getFontMetrics();\n\t\tfinal Player player \u003d client.getLocalPlayer();\n\n\t\tif (player \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\toffsetMap.clear();\n\t\tfinal LocalPoint localLocation \u003d player.getLocalLocation();\n\n\t\tif (clueGroundManager.getTrackedWorldPoints().isEmpty())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tfor (WorldPoint wp : clueGroundManager.getTrackedWorldPoints())\n\t\t{\n\t\t\t// Check if wp in clueGroundManager is within range of the player\n\t\t\tfinal LocalPoint groundPoint \u003d LocalPoint.fromWorld(client.getTopLevelWorldView(), wp);\n\n\t\t\tif (groundPoint \u003d\u003d null || localLocation.distanceTo(groundPoint) \u003e MAX_DISTANCE)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Get list of ClueInstances at wp with optionally collapsed quantities\n\t\t\tMap\u003cClueInstance, Integer\u003e clueInstancesWithQuantityAtWp \u003d clueGroundManager.getClueInstancesWithQuantityAtWp(config, wp);\n\n\t\t\tif (clueInstancesWithQuantityAtWp \u003d\u003d null)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tList\u003cMap.Entry\u003cClueInstance, Integer\u003e\u003e entrySet \u003d new ArrayList\u003c\u003e(clueInstancesWithQuantityAtWp.entrySet());\n\t\t\tfor (Map.Entry\u003cClueInstance, Integer\u003e entry : entrySet)\n\t\t\t{\n\t\t\t\tClueInstance item \u003d entry.getKey();\n\n\t\t\t\tif(item.isEnabled(config) \u0026\u0026 config.showGroundClues())\n\t\t\t\t{\n\t\t\t\t\tint quantity \u003d entry.getValue();\n\t\t\t\t\trenderClueInstanceGroundOverlay(graphics, item, quantity, groundPoint, fm);\n\t\t\t\t}\n\n\t\t\t\tif (shouldRenderSavedThreeStepper())\n\t\t\t\t{\n\t\t\t\t\trenderSavedThreeStepper(graphics, item, groundPoint);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate void renderSavedThreeStepper(Graphics2D graphics, ClueInstance clueInstance, LocalPoint lp)\n\t{\n\t\tif (isSavedThreeStepper(clueInstance))\n\t\t{\n\t\t\tPolygon savedThreeStepperPoly \u003d Perspective.getCanvasTilePoly(client, lp);\n\t\t\tOverlayUtil.renderPolygon(graphics, savedThreeStepperPoly, config.groundThreeStepperHighlightColor());\n\t\t}\n\t}\n\n\tprivate boolean shouldRenderSavedThreeStepper()\n\t{\n\t\treturn config.threeStepperSaver() \u0026\u0026 (config.highlightSavedThreeStepper() \u003d\u003d BOTH || config.highlightSavedThreeStepper() \u003d\u003d GROUND);\n\t}\n\n\tprivate boolean isSavedThreeStepper(ClueInstance clueInstance)\n\t{\n\t\tif (clueThreeStepSaver.getSavedThreeStepper() \u003d\u003d null || !config.threeStepperSaver()) return false;\n\t\treturn clueInstance.getClueIds().equals(clueThreeStepSaver.getSavedThreeStepper().getClueIds());\n\t}\n\n\tprivate int getSecondsLeft(ClueInstance item)\n\t{\n\t\tint ticksLeft \u003d item.getDespawnTick() - client.getTickCount();\n\t\tint millisLeft \u003d ticksLeft * 600;\n\t\treturn (int) (millisLeft / 1000L);\n\t}\n\n\tpublic String getDespawnText(ClueInstance item)\n\t{\n\t\tint seconds \u003d getSecondsLeft(item);\n\t\tint minutes \u003d seconds / 60;\n\t\tint secs \u003d seconds % 60;\n\t\tif (minutes \u003c 10)\n\t\t{\n\t\t\tif (minutes \u003c 1)\n\t\t\t{\n\t\t\t\treturn String.format(\"%ds\", secs);\n\t\t\t}\n\t\t\treturn String.format(\"%d:%02d\", minutes, secs);\n\t\t}\n\t\treturn String.format(\"%dm\", minutes);\n\t}\n\n\tpublic Color getTextColor(ClueInstance item)\n\t{\n\t\treturn getSecondsLeft(item) \u003c config.groundClueTimersNotificationTime()\n\t\t\t? Color.RED\n\t\t\t: Color.WHITE;\n\t}\n\n\tprivate void renderClueInstanceGroundOverlay(Graphics2D graphics, ClueInstance item, int quantity, LocalPoint groundPoint, FontMetrics fm)\n\t{\n\t\tfinal String itemString \u003d item.getGroundText(plugin, config, configManager, quantity);\n\n\t\tfinal int zDirection \u003d config.reverseGroundCluesOverlay() ? -1 : 1;\n\n\t\tfinal Point textPoint \u003d Perspective.getCanvasTextLocation(client,\n\t\t\tgraphics,\n\t\t\tgroundPoint,\n\t\t\titemString,\n\t\t\tCLUE_ITEM_HEIGHT + (OFFSET_Z * zDirection));\n\n\t\tif (textPoint \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal int offset \u003d offsetMap.compute(item.getLocation(), (k, v) -\u003e v !\u003d null ? v + zDirection : 0);\n\n\t\tfinal int textX \u003d textPoint.getX();\n\t\tfinal int textY \u003d textPoint.getY() - (STRING_GAP * offset);\n\n\t\tif (config.showGroundCluesDespawn())\n\t\t{\n\t\t\tColor timerColor \u003d getTextColor(item);\n\n\t\t\tfinal String timerText \u003d String.format(\" - %s\", getDespawnText(item));\n\n\t\t\t// The timer text is drawn separately to have its own color, and is intentionally not included\n\t\t\t// in the getCanvasTextLocation() call because the timer text can change per frame and we do not\n\t\t\t// use a monospaced font, which causes the text location on screen to jump around slightly each frame.\n\t\t\ttextComponent.setText(timerText);\n\t\t\ttextComponent.setColor(timerColor);\n\t\t\ttextComponent.setPosition(new java.awt.Point(textX + fm.stringWidth(itemString), textY));\n\t\t\ttextComponent.render(graphics);\n\t\t}\n\n\t\ttextComponent.setText(itemString);\n\t\ttextComponent.setColor(item.getGroundColor(config, configManager));\n\t\ttextComponent.setPosition(new java.awt.Point(textX, textY));\n\t\ttextComponent.render(graphics);\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\ClueGroundOverlay.java"},{"fileName":"ClueGroundSaveDataManager.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport com.google.gson.Gson;\nimport com.google.gson.reflect.TypeToken;\nimport java.lang.reflect.Type;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport net.runelite.api.Client;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.config.ConfigManager;\n\n@Singleton\npublic class ClueGroundSaveDataManager\n{\n\tprivate final Client client;\n\tprivate final ConfigManager configManager;\n\tprivate final Gson gson;\n\tprivate static final String CONFIG_GROUP \u003d \"clue-details\";\n\tprivate static final String GROUND_CLUES_KEY \u003d \"ground-clues\";\n\tprivate final List\u003cClueInstanceData\u003e clueInstanceData \u003d new ArrayList\u003c\u003e();\n\n\t@Inject\n\tpublic ClueGroundSaveDataManager(Client client, ConfigManager configManager, Gson gson)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.configManager \u003d configManager;\n\t\tthis.gson \u003d gson;\n\t}\n\n\tpublic void saveStateToConfig(List\u003cClueInstance\u003e groundClues)\n\t{\n\t\t// Serialize groundClues save to config\n\t\tupdateData(groundClues);\n\t\t// Offset despawn time by current client tick count\n\t\tfor (ClueInstanceData data : clueInstanceData)\n\t\t{\n\t\t\tdata.setDespawnTick(data.getDespawnTick() - client.getTickCount());\n\t\t}\n\t\tString groundCluesJson \u003d gson.toJson(clueInstanceData);\n\t\tconfigManager.setConfiguration(CONFIG_GROUP, GROUND_CLUES_KEY, groundCluesJson);\n\t}\n\n\tprivate void updateData(List\u003cClueInstance\u003e groundClues)\n\t{\n\t\tList\u003cClueInstanceData\u003e newData \u003d new ArrayList\u003c\u003e();\n\t\tfor (ClueInstance groundClue : groundClues)\n\t\t{\n\t\t\tnewData.add(new ClueInstanceData(groundClue));\n\t\t}\n\t\tclueInstanceData.clear();\n\t\tclueInstanceData.addAll(newData);\n\t}\n\n\tpublic Map\u003cWorldPoint, List\u003cClueInstance\u003e\u003e loadStateFromConfig()\n\t{\n\t\tString groundCluesJson \u003d configManager.getConfiguration(CONFIG_GROUP, GROUND_CLUES_KEY);\n\t\tclueInstanceData.clear();\n\n\t\tMap\u003cWorldPoint, List\u003cClueInstance\u003e\u003e groundClues \u003d new HashMap\u003c\u003e();\n\t\tif (groundCluesJson !\u003d null)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tType groundCluesType \u003d new TypeToken\u003cList\u003cClueInstanceData\u003e\u003e()\n\t\t\t\t{\n\t\t\t\t}.getType();\n\n\t\t\t\tList\u003cClueInstanceData\u003e loadedGroundCluesData \u003d gson.fromJson(groundCluesJson, groundCluesType);\n\n\t\t\t\t// Convert ClueInstanceData back to ClueInstance\n\t\t\t\tfor (ClueInstanceData clueData : loadedGroundCluesData)\n\t\t\t\t{\n\t\t\t\t\tclueInstanceData.add(clueData);\n\n\t\t\t\t\tWorldPoint location \u003d clueData.getLocation();\n\t\t\t\t\tClueInstance clue \u003d new ClueInstance(clueData);\n\t\t\t\t\t// Offset despawn time by current client tick count\n\t\t\t\t\tclue.setTimeToDespawnFromDataInTicks(clue.getTimeToDespawnFromDataInTicks() + client.getTickCount());\n\t\t\t\t\tif (groundClues.containsKey(location))\n\t\t\t\t\t{\n\t\t\t\t\t\tgroundClues.get(location).add(clue);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tList\u003cClueInstance\u003e clueInstances \u003d new ArrayList\u003c\u003e();\n\t\t\t\t\tclueInstances.add(clue);\n\n\t\t\t\t\tgroundClues.put(location, clueInstances);\n\t\t\t\t}\n\t\t\t} catch (Exception err)\n\t\t\t{\n\t\t\t\tgroundClues.clear();\n\t\t\t\tsaveStateToConfig(new ArrayList\u003c\u003e());\n\t\t\t}\n\t\t}\n\n\t\treturn groundClues;\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\ClueGroundSaveDataManager.java"},{"fileName":"ClueGroundTimer.java","content":"/*\n * Copyright (c) 2025, TheLope \u003chttps://github.com/TheLope\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport com.cluedetails.tools.ClueDetailsWorldMapPoint;\nimport java.awt.Color;\nimport java.awt.image.BufferedImage;\n\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.TimerTask;\nimport lombok.Getter;\nimport lombok.Setter;\nimport net.runelite.api.Client;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.ui.overlay.infobox.InfoBox;\n\nclass ClueGroundTimer extends InfoBox\n{\n\tprivate final Client client;\n\tprivate final ClueDetailsPlugin plugin;\n\tprivate final ClueDetailsConfig config;\n\tprivate final ConfigManager configManager;\n\t@Setter\n\tprivate int despawnTick;\n\t@Setter\n\t@Getter\n\tprivate Map\u003cClueInstance, Integer\u003e clueInstancesWithQuantity;\n\t@Getter\n\tprivate final WorldPoint worldPoint;\n\t@Getter\n\tprivate final ClueDetailsWorldMapPoint clueDetailsWorldMapPoint;\n\tprivate final StringBuilder stringBuilder \u003d new StringBuilder();\n\t@Setter\n\t@Getter\n\tprivate boolean notified \u003d false;\n\t@Setter\n\t@Getter\n\tprivate boolean renotifying \u003d false;\n\n\tClueGroundTimer(\n\t\tClient client,\n\t\tClueDetailsPlugin plugin,\n\t\tClueDetailsConfig config,\n\t\tConfigManager configManager,\n\t\tint despawnTick,\n\t\tWorldPoint worldPoint,\n\t\tMap\u003cClueInstance, Integer\u003e clueInstancesWithQuantityAtWp,\n\t\tBufferedImage image\n\t)\n\t{\n\t\tsuper(image, plugin);\n\t\tthis.client \u003d client;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t\tthis.configManager \u003d configManager;\n\t\tthis.despawnTick \u003d despawnTick;\n\t\tthis.worldPoint \u003d worldPoint;\n\t\tthis.clueDetailsWorldMapPoint \u003d new ClueDetailsWorldMapPoint(worldPoint, plugin);\n\t\tthis.clueInstancesWithQuantity \u003d clueInstancesWithQuantityAtWp;\n\t}\n\n\tprivate int getSecondsLeft()\n\t{\n\t\tint ticksLeft \u003d despawnTick - client.getTickCount();\n\t\tint millisLeft \u003d ticksLeft * 600;\n\t\treturn (int) (millisLeft / 1000L);\n\t}\n\n\t@Override\n\tpublic String getText()\n\t{\n\t\tint seconds \u003d getSecondsLeft();\n\t\tint minutes \u003d seconds / 60;\n\t\tint secs \u003d seconds % 60;\n\t\tif (minutes \u003c 10)\n\t\t{\n\t\t\tif (minutes \u003c 1)\n\t\t\t{\n\t\t\t\treturn String.format(\"%ds\", secs);\n\t\t\t}\n\t\t\treturn String.format(\"%d:%02d\", minutes, secs);\n\t\t}\n\t\t// Something went wrong when tracking despawn time\n\t\telse if (minutes \u003e 61)\n\t\t{\n\t\t\treturn \"?\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn String.format(\"%dm\", minutes);\n\t\t}\n\t}\n\n\t@Override\n\tpublic String getName()\n\t{\n\t\treturn plugin.getClass().getSimpleName() + \"_\" + getClass().getSimpleName() + \"_\";\n\t}\n\n\t@Override\n\tpublic String getTooltip()\n\t{\n\t\tstringBuilder.setLength(0);\n\n\t\tfor (Map.Entry\u003cClueInstance, Integer\u003e entry : clueInstancesWithQuantity.entrySet())\n\t\t{\n\t\t\tClueInstance item \u003d entry.getKey();\n\n\t\t\tif(item.isEnabled(config))\n\t\t\t{\n\t\t\t\tint quantity \u003d entry.getValue();\n\t\t\t\tString text \u003d item.getGroundText(plugin, config, configManager, quantity);\n\t\t\t\tColor color \u003d item.getGroundColor(config, configManager);\n\t\t\t\tString hexColor \u003d Integer.toHexString(color.getRGB()).substring(2);\n\t\t\t\tstringBuilder.append(\"\u003ccol\u003d\").append(hexColor).append(\"\u003e\").append(text);\n\t\t\t\tstringBuilder.append(\"\u003cbr\u003e\");\n\t\t\t}\n\t\t}\n\t\treturn stringBuilder.toString();\n\t}\n\n\t@Override\n\tpublic Color getTextColor()\n\t{\n\t\treturn shouldNotify()\n\t\t\t? Color.RED\n\t\t\t: Color.WHITE;\n\t}\n\n\t@Override\n\tpublic boolean cull()\n\t{\n\t\t// Remove timers if worldPoint no managed by clueGroundManager\n\t\tSet\u003cWorldPoint\u003e worldPoints \u003d plugin.getClueGroundManager().getTrackedWorldPoints();\n\t\tif (!worldPoints.contains(worldPoint))\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\tint timeLeft \u003d getSecondsLeft();\n\t\treturn timeLeft \u003d\u003d 0 || timeLeft \u003c 0;\n\t}\n\n\tprivate boolean activeWorldPoint()\n\t{\n\t\t// Remove timers if worldPoint not managed by clueGroundManager\n\t\tSet\u003cWorldPoint\u003e worldPoints \u003d plugin.getClueGroundManager().getTrackedWorldPoints();\n\t\treturn worldPoints.contains(worldPoint);\n\t}\n\n\t@Override\n\tpublic boolean render()\n\t{\n\t\t// Render if any ClueInstance is enabled\n\t\tif(!clueInstancesWithQuantity.isEmpty())\n\t\t{\n\t\t\tfor (ClueInstance clueInstance : clueInstancesWithQuantity.keySet())\n\t\t\t{\n\t\t\t\tif (clueInstance !\u003d null \u0026\u0026 clueInstance.isEnabled(config))\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic boolean shouldNotify()\n\t{\n\t\treturn activeWorldPoint() \u0026\u0026 (getSecondsLeft() \u003c config.groundClueTimersNotificationTime());\n\t}\n\n\tpublic void startRenotification()\n\t{\n\t\tsetRenotifying(true);\n\n\t\t// Start renotification timer\n\t\tjava.util.Timer t \u003d new java.util.Timer();\n\t\tTimerTask task \u003d new TimerTask()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void run()\n\t\t\t{\n\t\t\t\tsetNotified(!shouldNotify());\n\t\t\t\tsetRenotifying(false);\n\t\t\t}\n\t\t};\n\t\tt.schedule(task, config.groundClueTimersRenotificationTime() * 1000L);\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\ClueGroundTimer.java"},{"fileName":"ClueIdToDetails.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://www.github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport java.awt.Color;\nimport java.util.List;\nimport lombok.Data;\n\n@Data\npublic class ClueIdToDetails\n{\n\tint id;\n\tString text;\n\tColor color;\n\tList\u003cInteger\u003e itemIds;\n\tList\u003cWidgetId\u003e widgetIds;\n\n\tpublic ClueIdToDetails(int id, String text, Color color, List\u003cInteger\u003e itemIds, List\u003cWidgetId\u003e widgetIds)\n\t{\n\t\tthis.id \u003d id;\n\t\tthis.text \u003d text;\n\t\tthis.color \u003d color;\n\t\tthis.itemIds \u003d itemIds;\n\t\tthis.widgetIds \u003d widgetIds;\n\t}\n\n\tpublic static boolean equalRGB(Color color1, Color color2)\n\t{\n\t\tboolean equalRed \u003d color1.getRed() \u003d\u003d color2.getRed();\n\t\tboolean equalGreen \u003d color1.getGreen() \u003d\u003d color2.getGreen();\n\t\tboolean equalBlue \u003d color1.getBlue() \u003d\u003d color2.getBlue();\n\n\t\treturn equalRed \u0026\u0026 equalGreen \u0026\u0026 equalBlue;\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\ClueIdToDetails.java"},{"fileName":"ClueInstance.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *\t  list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *\t  this list of conditions and the following disclaimer in the documentation\n *\t  and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport com.cluedetails.filters.ClueTier;\nimport java.awt.Color;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.concurrent.atomic.AtomicLong;\nimport lombok.Data;\nimport lombok.Getter;\nimport lombok.Setter;\nimport net.runelite.api.ItemID;\nimport net.runelite.api.TileItem;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.util.QuantityFormatter;\nimport org.apache.commons.text.WordUtils;\n\n@Data\npublic class ClueInstance\n{\n\tprivate static final AtomicLong sequenceGenerator \u003d new AtomicLong();\n\n\t@Setter\n\tprivate List\u003cInteger\u003e clueIds; // Fake ID from ClueText\n\tprivate final int itemId; // Clue item ID\n\tprivate final WorldPoint location; // Null if in inventory\n\n\t@Getter\n\t@Setter\n\tprivate long sequenceNumber;\n\n\tprivate Integer timeToDespawnFromDataInTicks;\n\tprivate TileItem tileItem;\n\tprivate boolean isNewClue;\n\n\t// Constructor for clues from config\n\tpublic ClueInstance(ClueInstanceData data)\n\t{\n\t\tthis.clueIds \u003d data.getClueIds();\n\t\tthis.itemId \u003d data.getItemId();\n\t\tthis.location \u003d data.getLocation();\n\t\t// if had on then turned off in same session, we don\u0027t know what happened in meantime.\n\t\t// Ticks go forward even when logged into other game modes. For simplicity we assume when\n\t\t// Loaded we just are starting from the exact same despawn time remaining.\n\t\tthis.timeToDespawnFromDataInTicks \u003d data.getDespawnTick();\n\n\t\tthis.sequenceNumber \u003d sequenceGenerator.getAndIncrement();\n\t}\n\n\t// Constructor for inventory clues from inventory changed event\n\tpublic ClueInstance(List\u003cInteger\u003e clueIds, int itemId)\n\t{\n\t\tthis.clueIds \u003d clueIds;\n\t\tthis.itemId \u003d itemId;\n\t\tthis.location \u003d null;\n\t\tthis.timeToDespawnFromDataInTicks \u003d -1;\n\n\t\tthis.sequenceNumber \u003d sequenceGenerator.getAndIncrement();\n\t}\n\n\t// Constructor for ground clues\n\tpublic ClueInstance(List\u003cInteger\u003e clueIds, int itemId, WorldPoint location, TileItem tileItem, int currentTick)\n\t{\n\t\tthis.clueIds \u003d clueIds;\n\t\tthis.itemId \u003d itemId;\n\t\tthis.location \u003d location;\n\t\tthis.tileItem \u003d tileItem;\n\t\tthis.timeToDespawnFromDataInTicks \u003d tileItem.getDespawnTime();\n\n\t\tthis.sequenceNumber \u003d sequenceGenerator.getAndIncrement();\n\t}\n\n\t// New clue on floor\n\tpublic ClueInstance(List\u003cInteger\u003e clueIds, int itemId, WorldPoint location, TileItem tileItem, boolean isNewClue)\n\t{\n\t\tthis.clueIds \u003d clueIds;\n\t\tthis.itemId \u003d itemId;\n\t\tthis.location \u003d location;\n\t\tthis.tileItem \u003d tileItem;\n\t\tthis.timeToDespawnFromDataInTicks \u003d tileItem.getDespawnTime() - 2;\n\t\tthis.isNewClue \u003d isNewClue;\n\n\t\tthis.sequenceNumber \u003d sequenceGenerator.getAndIncrement();\n\t}\n\n\tpublic List\u003cInteger\u003e getClueIds()\n\t{\n\t\tif (clueIds.isEmpty() \u0026\u0026 !Clues.isBeginnerOrMasterClue(itemId, true))\n\t\t{\n\t\t\treturn Collections.singletonList(itemId);\n\t\t}\n\t\treturn clueIds;\n\t}\n\n\tpublic List\u003cInteger\u003e getUniqueIds()\n\t{\n\t\tif (clueIds.isEmpty())\n\t\t{\n\t\t\treturn Collections.singletonList(itemId);\n\t\t}\n\n\t\treturn clueIds;\n\t}\n\n\tpublic ClueTier getTier()\n\t{\n\t\tClues clue;\n\n\t\tif (clueIds.isEmpty())\n\t\t{\n\t\t\tclue \u003d Clues.forItemId(itemId);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tclue \u003d Clues.forClueId(getClueIds().get(0));\n\t\t}\n\n\t\tif (clue \u003d\u003d null)\n\t\t{\n\t\t\tif (itemId \u003d\u003d ItemID.CLUE_SCROLL_BEGINNER) return ClueTier.BEGINNER;\n\t\t\tif (itemId \u003d\u003d ItemID.CLUE_SCROLL_MASTER) return ClueTier.MASTER;\n\t\t\treturn null;\n\t\t}\n\t\treturn clue.getClueTier();\n\t}\n\n\tpublic String getGroundText(ClueDetailsPlugin plugin, ClueDetailsConfig config, ConfigManager configManager, int quantity)\n\t{\n\t\tStringBuilder itemStringBuilder \u003d new StringBuilder();\n\t\tList\u003cInteger\u003e clueIds \u003d this.getClueIds();\n\t\tString clueText;\n\n\t\tif (clueIds.isEmpty())\n\t\t{\n\t\t\tif (this.getTier() \u003d\u003d null)\n\t\t\t{\n\t\t\t\tclueText \u003d \"\";\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tclueText \u003d WordUtils.capitalizeFully(this.getTier().toString().replace(\"_\", \" \"));\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tint clueId \u003d this.getClueIds().get(0);\n\t\t\tClues clueDetails \u003d Clues.forClueIdFiltered(clueId);\n\n\t\t\tif (clueDetails \u003d\u003d null)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (config.changeGroundClueText() \u0026\u0026 !config.collapseGroundCluesByTier())\n\t\t\t{\n\t\t\t\tif (clueIds.size() \u003e 1)\n\t\t\t\t{\n\t\t\t\t\tclueText \u003d \"Three-step (master)\";\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tclueText \u003d clueDetails.getDetail(configManager);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tclueText \u003d WordUtils.capitalizeFully(clueDetails.getClueTier().toString().replace(\"_\", \" \"));\n\t\t\t}\n\t\t}\n\t\titemStringBuilder.append(clueText);\n\n\t\tif ((config.collapseGroundClues() || config.collapseGroundCluesByTier()) \u0026\u0026 quantity \u003e 1)\n\t\t{\n\t\t\titemStringBuilder.append(\" (\")\n\t\t\t\t.append(QuantityFormatter.quantityToStackSize(quantity))\n\t\t\t\t.append(\u0027)\u0027);\n\t\t}\n\t\treturn itemStringBuilder.toString();\n\t}\n\n\tpublic Color getGroundColor(ClueDetailsConfig config, ConfigManager configManager)\n\t{\n\t\tColor color \u003d Color.WHITE;\n\t\tList\u003cInteger\u003e clueIds \u003d this.getClueIds();\n\n\t\tif (!clueIds.isEmpty())\n\t\t{\n\t\t\tint clueId \u003d this.getClueIds().get(0);\n\t\t\tClues clueDetails \u003d Clues.forClueIdFiltered(clueId);\n\n\t\t\tif (clueDetails \u003d\u003d null)\n\t\t\t{\n\t\t\t\treturn color;\n\t\t\t}\n\n\t\t\tif (config.colorGroundClues())\n\t\t\t{\n\t\t\t\tcolor \u003d clueDetails.getDetailColor(configManager);\n\t\t\t}\n\t\t}\n\t\treturn color;\n\t}\n\n\tpublic void updateDespawnTick()\n\t{\n\t\tif (tileItem !\u003d null)\n\t\t{\n\t\t\tthis.timeToDespawnFromDataInTicks \u003d tileItem.getDespawnTime();\n\t\t}\n\t}\n\n\tpublic int getDespawnTick()\n\t{\n\t\tif (tileItem !\u003d null)\n\t\t{\n\t\t\treturn tileItem.getDespawnTime();\n\t\t}\n\t\treturn timeToDespawnFromDataInTicks;\n\t}\n\n\t// Theory: This should mean that tiles we\u0027ve seen have TileItem, and the actual despawn is used for ALL items on that tile\n\t// For tiles we\u0027ve not seen this session, all items on it should have no TileItem, and thus we\u0027ll keep the same consistent tick diff\n\tpublic int getTicksToDespawnConsideringTileItem(int currentTick)\n\t{\n\t\treturn timeToDespawnFromDataInTicks \u003d\u003d null ? -1 : timeToDespawnFromDataInTicks;\n\t}\n\n\tpublic String getCombinedClueText(ConfigManager configManager, boolean showColor, boolean isFloorText)\n\t{\n\t\tStringBuilder returnText \u003d new StringBuilder();\n\t\tboolean isFirst \u003d true;\n\t\tfor (Integer clueId : getClueIds())\n\t\t{\n\t\t\tClues cluePart \u003d Clues.forClueId(clueId);\n\t\t\tif (cluePart \u003d\u003d null) continue;\n\t\t\tif (isFirst)\n\t\t\t{\n\t\t\t\tisFirst \u003d false;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturnText.append(\"\u003cbr\u003e\");\n\t\t\t}\n\n\t\t\tif (showColor)\n\t\t\t{\n\t\t\t\tColor color \u003d cluePart.getDetailColor(configManager);\n\n\t\t\t\t// Only change floor text color if it\u0027s not the default\n\t\t\t\tif (!(isFloorText \u0026\u0026 color \u003d\u003d Color.WHITE))\n\t\t\t\t{\n\t\t\t\t\tString hexColor \u003d Integer.toHexString(color.getRGB()).substring(2);\n\t\t\t\t\treturnText.append(\"\u003ccol\u003d\").append(hexColor).append(\"\u003e\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturnText.append(cluePart.getDetail(configManager));\n\t\t}\n\t\tif (returnText.length() \u003d\u003d 0) return null;\n\t\treturn returnText.toString();\n\t}\n\n\tpublic boolean isEnabled(ClueDetailsConfig config)\n\t{\n\t\tif (Clues.DEV_MODE_IDS.contains(itemId))\n\t\t{\n\t\t\treturn config.beginnerDetails();\n\t\t}\n\t\telse if (getTier() \u003d\u003d ClueTier.BEGINNER)\n\t\t{\n\t\t\treturn config.beginnerDetails();\n\t\t}\n\t\telse if (getTier() \u003d\u003d ClueTier.EASY)\n\t\t{\n\t\t\treturn config.easyDetails();\n\t\t}\n\t\telse if (getTier() \u003d\u003d ClueTier.MEDIUM)\n\t\t{\n\t\t\treturn config.mediumDetails();\n\t\t}\n\t\telse if (getTier() \u003d\u003d ClueTier.HARD)\n\t\t{\n\t\t\treturn config.hardDetails();\n\t\t}\n\t\telse if (getTier() \u003d\u003d ClueTier.ELITE)\n\t\t{\n\t\t\treturn config.eliteDetails();\n\t\t}\n\t\telse if (getTier() \u003d\u003d ClueTier.MASTER)\n\t\t{\n\t\t\treturn config.masterDetails();\n\t\t}\n\t\telse return getTier() !\u003d null;\n\t}\n\n\t@Override\n\tpublic boolean equals(Object o)\n\t{\n\t\tif (this \u003d\u003d o) return true;\n\t\tif (!(o instanceof ClueInstance)) return false;\n\t\tClueInstance clueInstance \u003d (ClueInstance) o;\n\n\t\tint diff1;\n\t\tint diff2;\n\t\tif (tileItem !\u003d null \u0026\u0026 clueInstance.tileItem !\u003d null)\n\t\t{\n\t\t\tdiff1 \u003d tileItem.getDespawnTime();\n\t\t\tdiff2 \u003d clueInstance.tileItem.getDespawnTime();\n\t\t}\n\t\telse if (tileItem \u003d\u003d null \u0026\u0026 clueInstance.tileItem \u003d\u003d null)\n\t\t{\n\t\t\tdiff1 \u003d getDespawnTick();\n\t\t\tdiff2 \u003d clueInstance.getDespawnTick();\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\t// Should this really be considering it equal without consideration for the clueIds?\n\t\tif (location \u003d\u003d null) return false;\n\t\treturn itemId \u003d\u003d clueInstance.itemId \u0026\u0026 diff1 \u003d\u003d diff2 \u0026\u0026 location.equals(clueInstance.location);\n\t}\n\n\t@Override\n\tpublic int hashCode()\n\t{\n\t\tint despawnTime \u003d getDespawnTick();\n\t\treturn Objects.hash(itemId, despawnTime, location);\n\t}\n\n\t@Override\n\tpublic String toString()\n\t{\n\t\tint despawnTime \u003d getDespawnTick();\n\t\treturn \"ClueInstance{\" + \"itemId\u003d\" + itemId + \", despawnTick\u003d\" + despawnTime + \", worldPoint\u003d\" + location + \", orderId\u003d\" + sequenceNumber + \"}\";\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\ClueInstance.java"},{"fileName":"ClueInstanceData.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport java.util.List;\nimport lombok.Data;\nimport net.runelite.api.coords.WorldPoint;\n\n@Data\npublic class ClueInstanceData\n{\n\tprivate List\u003cInteger\u003e clueIds;\n\tprivate int itemId;\n\tprivate int despawnTick;\n\tprivate int x;\n\tprivate int y;\n\tprivate int plane;\n\n\tpublic ClueInstanceData(ClueInstance clue)\n\t{\n\t\tthis.clueIds \u003d clue.getClueIds();\n\t\tthis.itemId \u003d clue.getItemId();\n\t\tthis.despawnTick \u003d clue.getDespawnTick();\n\t\tif (clue.getLocation() \u003d\u003d null) return;\n\n\t\tthis.x \u003d clue.getLocation().getX();\n\t\tthis.y \u003d clue.getLocation().getY();\n\t\tthis.plane \u003d clue.getLocation().getPlane();\n\t}\n\n\tpublic WorldPoint getLocation()\n\t{\n\t\treturn new WorldPoint(x, y, plane);\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\ClueInstanceData.java"},{"fileName":"ClueInventoryManager.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://www.github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *\t  list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *\t  this list of conditions and the following disclaimer in the documentation\n *\t  and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport com.cluedetails.panels.ClueDetailsParentPanel;\n\nimport java.util.*;\nimport java.util.stream.Collectors;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\n\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.Item;\nimport net.runelite.api.ItemContainer;\nimport net.runelite.api.ItemID;\nimport net.runelite.api.KeyCode;\nimport net.runelite.api.Menu;\nimport net.runelite.api.MenuAction;\nimport net.runelite.api.MenuEntry;\nimport net.runelite.api.NpcID;\nimport net.runelite.api.events.MenuEntryAdded;\nimport net.runelite.api.widgets.ComponentID;\nimport net.runelite.api.widgets.InterfaceID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetUtil;\nimport net.runelite.client.chat.QueuedMessage;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.game.chatbox.ChatboxPanelManager;\n\n@Slf4j\n@Singleton\npublic class ClueInventoryManager\n{\n\tprivate final Client client;\n\tprivate final ConfigManager configManager;\n\tprivate final ClueDetailsPlugin clueDetailsPlugin;\n\tprivate final ClueGroundManager clueGroundManager;\n\tprivate final ChatboxPanelManager chatboxPanelManager;\n\tprivate final Map\u003cInteger, ClueInstance\u003e cluesInInventory \u003d new HashMap\u003c\u003e();\n\tprivate final Map\u003cInteger, ClueInstance\u003e previousCluesInInventory \u003d new HashMap\u003c\u003e();\n\n\t@Getter\n\tprivate long lastInventoryUpdate \u003d 0;\n\tprivate final ClueDetailsConfig config;\n\n\t@Inject\n\tpublic ClueInventoryManager(Client client, ConfigManager configManager, ClueDetailsPlugin clueDetailsPlugin, ClueDetailsConfig config, ClueGroundManager clueGroundManager,\n\t\t\t\t\t\t\t\tChatboxPanelManager chatboxPanelManager)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.config \u003d config;\n\t\tthis.configManager \u003d configManager;\n\t\tthis.clueDetailsPlugin \u003d clueDetailsPlugin;\n\t\tthis.clueGroundManager \u003d clueGroundManager;\n\t\tthis.chatboxPanelManager \u003d chatboxPanelManager;\n\t}\n\n\tpublic void updateLastInventoryRefreshTime()\n\t{\n\t\tthis.lastInventoryUpdate \u003d System.currentTimeMillis();\n\t}\n\n\tpublic void updateInventory(ItemContainer inventoryContainer)\n\t{\n\t\t// Copy current clues to previous\n\t\tpreviousCluesInInventory.clear();\n\t\tpreviousCluesInInventory.putAll(cluesInInventory);\n\n\t\t// Clear current clues\n\t\tcluesInInventory.clear();\n\n\t\tItem[] inventoryItems \u003d inventoryContainer.getItems();\n\n\t\tfor (Item item : inventoryItems)\n\t\t{\n\t\t\tif (item \u003d\u003d null) continue;\n\n\t\t\tcheckItemAsClueInstance(item.getId());\n\t\t}\n\n\t\tclueGroundManager.getDespawnedClueQueueForInventoryCheck().clear();\n\n\t\t// Compare previous and current to find removed clues\n\t\tfor (Integer itemId : previousCluesInInventory.keySet())\n\t\t{\n\t\t\tif (!cluesInInventory.containsKey(itemId) || cluesInInventory.get(itemId) !\u003d previousCluesInInventory.get(itemId))\n\t\t\t{\n\t\t\t\t// Clue was removed from inventory (possibly dropped)\n\t\t\t\tClueInstance removedClue \u003d previousCluesInInventory.get(itemId);\n\t\t\t\tif (removedClue !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tclueDetailsPlugin.getClueBankManager().addToRemovedClues(removedClue);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (config.inventoryClueChatMessages())\n\t\t{\n\t\t\t// Send chat message for new clues only\n\t\t\tMap\u003cInteger, ClueInstance\u003e newCluesInInventory \u003d cluesInInventory.entrySet().stream()\n\t\t\t\t.filter(entry -\u003e !previousCluesInInventory.containsKey(entry.getKey()))\n\t\t\t\t.collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\n\n\t\t\tfor (ClueInstance clueInstance : newCluesInInventory.values())\n\t\t\t{\n\t\t\t\tif (Clues.isBeginnerOrMasterClue(clueInstance.getItemId(), clueDetailsPlugin.isDeveloperMode()))\n\t\t\t\t{\n\t\t\t\t\tsendChatMessage(\"New inventory Clue Detail text:\");\n\t\t\t\t\tsendChatMessage(clueInstance.getCombinedClueText(configManager, false, false));\n\t\t\t\t}\n\t\t\t\telse if (Clues.isClue(clueInstance.getItemId(), clueDetailsPlugin.isDeveloperMode()))\n\t\t\t\t{\n\t\t\t\t\tsendChatMessage(\"New inventory Clue Detail text:\");\n\t\t\t\t\tsendChatMessage(Clues.forItemId(clueInstance.getItemId()).getDetail(configManager));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tclueDetailsPlugin.getClueInventoryManager().updateLastInventoryRefreshTime();\n\t}\n\n\tprivate void checkItemAsClueInstance(int itemId)\n\t{\n\t\tClueInstance clueInstance;\n\n\t\tif (!Clues.isClue(itemId, clueDetailsPlugin.isDeveloperMode())\n\t\t\t\u0026\u0026 !Clues.isTrackedClueOrTornClue(itemId, clueDetailsPlugin.isDeveloperMode())) return;\n\n\t\t// If we have a clue we\u0027ve picked up this tick, we\u0027ve probably dropped and picked up a clue same tick\n\t\tOptional\u003cClueInstance\u003e clueFromFloorInInv \u003d clueGroundManager.getDespawnedClueQueueForInventoryCheck().stream()\n\t\t\t.filter(clueFromFloor -\u003e  clueFromFloor.getItemId() \u003d\u003d itemId)\n\t\t\t.findFirst();\n\t\tif (clueFromFloorInInv.isPresent())\n\t\t{\n\t\t\tcluesInInventory.put(itemId, new ClueInstance(clueFromFloorInInv.get().getClueIds(), itemId));\n\t\t\treturn;\n\t\t}\n\n\t\t// If clue is already in previous, keep the same ClueInstance\n\t\t// This check is after the floor check as you could drop and pick up a clue in the same tick\n\t\tclueInstance \u003d previousCluesInInventory.get(itemId);\n\t\tif (clueInstance !\u003d null \u0026\u0026 Clues.isClue(clueInstance.getItemId(), clueDetailsPlugin.isDeveloperMode()))\n\t\t{\n\t\t\tcluesInInventory.put(itemId, clueInstance);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tclueInstance \u003d new ClueInstance(new ArrayList\u003c\u003e(), itemId);\n\t\t\tcluesInInventory.put(itemId, clueInstance);\n\t\t}\n\t}\n\n\tpublic void updateClueText(String clueText)\n\t{\n\t\tList\u003cInteger\u003e clueIds \u003d new ArrayList\u003c\u003e();\n\n\t\t// Allow for fake items to have info attached to them in dev mode\n\t\tif (clueDetailsPlugin.isDeveloperMode())\n\t\t{\n\t\t\tfor (Integer devModeId : Clues.DEV_MODE_IDS)\n\t\t\t{\n\t\t\t\tint randomTestId \u003d (int) (Math.random() * 20);\n\t\t\t\tcluesInInventory.put(devModeId, new ClueInstance(List.of(randomTestId), devModeId));\n\t\t\t}\n\t\t}\n\n\t\tThreeStepCrypticClue threeStepCrypticClue \u003d ThreeStepCrypticClue.forText(clueText);\n\t\tif (threeStepCrypticClue !\u003d null)\n\t\t{\n\t\t\tfor (Map.Entry\u003cClues, Boolean\u003e clueStep : threeStepCrypticClue.getClueSteps())\n\t\t\t{\n\t\t\t\tclueIds.add(clueStep.getKey().getClueID());\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tclueIds.add(Clues.forTextGetId(clueText));\n\t\t}\n\n\t\tif (clueIds.get(0) \u003d\u003d null) return;\n\n\t\tSet\u003cInteger\u003e itemIDs \u003d cluesInInventory.keySet();\n\t\tfor (Integer itemID : itemIDs)\n\t\t{\n\t\t\tClueInstance clueInstance \u003d cluesInInventory.get(itemID);\n\t\t\t// Check that at least one part of the clue text matches the clue tier we\u0027re looking at\n\t\t\tif (clueInstance \u003d\u003d null) continue;\n\t\t\tClues clueInfo \u003d Clues.forClueIdFiltered(clueIds.get(0));\n\t\t\tif (clueInfo \u003d\u003d null) continue;\n\t\t\tif (!Objects.equals(clueInfo.getItemID(), itemID)) continue;\n\t\t\tclueInstance.setClueIds(clueIds);\n\t\t\tclueDetailsPlugin.getClueInventoryManager().updateLastInventoryRefreshTime();\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Only used for Beginner Map Clues and Hot Cold Clues\n\tpublic void updateClueText(Integer otherId, Integer itemId)\n\t{\n\t\tList\u003cInteger\u003e clueIds \u003d new ArrayList\u003c\u003e();\n\n\t\t// Beginner Map Clues all use the same ItemID, but the InterfaceID used to display them is unique\n\t\t// Hot Cold Clues all use the same ItemID, but have a unique enum from Clue Scroll plugin\n\t\tclueIds.add(Clues.forOtherIdGetId(otherId));\n\n\t\tClueInstance clueInInv \u003d cluesInInventory.get(itemId);\n\t\tif (clueInInv \u003d\u003d null) return;\n\t\tclueInInv.setClueIds(clueIds);\n\t\tclueDetailsPlugin.getClueInventoryManager().updateLastInventoryRefreshTime();\n\t}\n\n\tpublic Set\u003cInteger\u003e getCluesInInventory()\n\t{\n\t\treturn cluesInInventory.keySet();\n\t}\n\n\tpublic ClueInstance getClueByClueItemId(Integer clueItemID)\n\t{\n\t\treturn cluesInInventory.get(clueItemID);\n\t}\n\n\tpublic void onMenuEntryAdded(MenuEntryAdded event, CluePreferenceManager cluePreferenceManager, ClueDetailsParentPanel panel)\n\t{\n\t\tMenuEntry entry \u003d event.getMenuEntry();\n\n\t\t// Ensure clue ground items are not deprioritized\n\t\tif (hasClueName(event.getMenuEntry().getTarget()) \u0026\u0026 config.showGroundClues())\n\t\t{\n\t\t\tMenuAction type \u003d MenuAction.of(event.getType());\n\t\t\tif (type \u003d\u003d MenuAction.GROUND_ITEM_FIRST_OPTION || type \u003d\u003d MenuAction.GROUND_ITEM_SECOND_OPTION ||\n\t\t\t\ttype \u003d\u003d MenuAction.GROUND_ITEM_THIRD_OPTION || type \u003d\u003d MenuAction.GROUND_ITEM_FOURTH_OPTION ||\n\t\t\t\ttype \u003d\u003d MenuAction.GROUND_ITEM_FIFTH_OPTION || type \u003d\u003d MenuAction.WIDGET_TARGET_ON_GROUND_ITEM)\n\t\t\t{\n\t\t\t\tMenuEntry[] menuEntries \u003d client.getMenu().getMenuEntries();\n\t\t\t\tMenuEntry lastEntry \u003d menuEntries[menuEntries.length - 1];\n\n\t\t\t\tif (isEnabled(lastEntry.getItemId()))\n\t\t\t\t{\n\t\t\t\t\tlastEntry.setDeprioritized(false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!client.isKeyPressed(KeyCode.KC_SHIFT))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// We only run on examine as this should be on all items only once\n\t\tif (!\"Examine\".equals(event.getMenuEntry().getOption())) return;\n\n\t\tfinal Widget w \u003d entry.getWidget();\n\t\tboolean isInventoryMenu \u003d w !\u003d null \u0026\u0026 WidgetUtil.componentToInterface(w.getId()) \u003d\u003d InterfaceID.INVENTORY;\n\n\t\tint itemId \u003d isInventoryMenu ? event.getItemId() : event.getIdentifier();\n\t\t// Runs on both inventory and ground clues\n\t\tif (hasClueName(event.getMenuEntry().getTarget()))\n\t\t{\n\t\t\thandleMarkClue(cluePreferenceManager, panel, event.getTarget(), itemId);\n\t\t}\n\n\t\tif (isInventoryMenu)\n\t\t{\n\t\t\thandleInventory(cluePreferenceManager, event, panel);\n\t\t}\n\t}\n\n\tprivate void handleInventory(CluePreferenceManager cluePreferenceManager, MenuEntryAdded event, ClueDetailsParentPanel panel)\n\t{\n\t\tMenuEntry menuEntry \u003d event.getMenuEntry();\n\t\tint itemId \u003d event.getItemId();\n\n\t\t// Add item highlight menu\n\t\tif (!hasClueName(menuEntry.getTarget()))\n\t\t{\n\t\t\tif (cluesInInventory.isEmpty()) return;\n\n\t\t\tMenuEntry clueDetailsEntry \u003d client.getMenu().createMenuEntry(-1)\n\t\t\t\t.setOption(\"Clue details\")\n\t\t\t\t.setTarget(menuEntry.getTarget())\n\t\t\t\t.setType(MenuAction.RUNELITE);\n\t\t\tMenu submenu \u003d clueDetailsEntry.createSubMenu();\n\t\t\tcluesInInventory.forEach((id, instance) -\u003e instance.getClueIds().forEach((clueId) -\u003e addHighlightItemMenu(cluePreferenceManager, submenu, Clues.forClueIdFiltered(clueId), itemId, event)));\n\t\t\treturn;\n\t\t}\n\n\t\t// Is a clue item, add clue item menu entries\n\t\thandleClueDetailsMenuEntry(panel, menuEntry, itemId);\n\t}\n\n\tprivate void handleMarkClue(CluePreferenceManager cluePreferenceManager, ClueDetailsParentPanel panel, String name, int itemId)\n\t{\n\t\tboolean isMarked \u003d cluePreferenceManager.getHighlightPreference(itemId);\n\n\t\t// Mark Option\n\t\tif (!Clues.isBeginnerOrMasterClue(itemId, clueDetailsPlugin.isDeveloperMode()))\n\t\t{\n\t\t\ttoggleMarkClue(cluePreferenceManager, panel, itemId, isMarked, name);\n\t\t}\n\t}\n\n\tprivate void handleClueDetailsMenuEntry(ClueDetailsParentPanel panel, MenuEntry entry, int itemId)\n\t{\n\t\tList\u003cInteger\u003e clueIds \u003d new ArrayList\u003c\u003e();\n\t\tMenu menu;\n\t\tString option \u003d null;\n\t\tString target \u003d null;\n\n\t\tif (Clues.isBeginnerOrMasterClue(itemId, clueDetailsPlugin.isDeveloperMode()))\n\t\t{\n\t\t\tClueInstance clueSelected \u003d cluesInInventory.get(itemId);\n\t\t\tif (clueSelected \u003d\u003d null || clueSelected.getClueIds().isEmpty()) return;\n\n\t\t\tclueIds.addAll(clueSelected.getClueIds());\n\n\t\t\t// Only create submenu when needed\n\t\t\tif (clueIds.size() \u003e 1)\n\t\t\t{\n\t\t\t\tMenuEntry parent \u003d client.getMenu().createMenuEntry(-1)\n\t\t\t\t\t.setOption(\"Clue details\")\n\t\t\t\t\t.setTarget(entry.getTarget())\n\t\t\t\t\t.setType(MenuAction.RUNELITE);\n\n\t\t\t\tmenu \u003d parent.createSubMenu();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmenu \u003d client.getMenu();\n\t\t\t\ttarget \u003d entry.getTarget();\n\t\t\t\toption \u003d \"Clue details\";\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmenu \u003d client.getMenu();\n\t\t\tclueIds.add(itemId);\n\t\t\ttarget \u003d entry.getTarget();\n\t\t\toption \u003d \"Clue details\";\n\t\t}\n\n\t\tfor (int id : clueIds)\n\t\t{\n\t\t\tClues clue \u003d Clues.forClueIdFiltered(id);\n\t\t\tif (clue \u003d\u003d null)\n\t\t\t{\n\t\t\t\tlog.debug(\"Failed to find clue \" + id);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tString newOption \u003d option \u003d\u003d null ? clue.getDetail(configManager) : option;\n\t\t\tString newTarget \u003d target \u003d\u003d null ? \"\" : target;\n\t\t\taddClueDetailsMenuEntry(panel, menu, newOption, newTarget, clue);\n\t\t}\n\t}\n\n\tprivate void addClueDetailsMenuEntry(ClueDetailsParentPanel panel, Menu menu, String option, String target, Clues clue)\n\t{\n\t\tmenu.createMenuEntry(-1)\n\t\t\t.setOption(option)\n\t\t\t.setTarget(target)\n\t\t\t.setType(MenuAction.RUNELITE)\n\t\t\t.onClick(e -\u003e\n\t\t\t\tchatboxPanelManager.openTextInput(\"Enter new clue detail:\")\n\t\t\t\t\t.value(clue.getDetail(configManager))\n\t\t\t\t\t.onDone((newDetail) -\u003e\n\t\t\t\t\t{\n\t\t\t\t\t\tconfigManager.setConfiguration(\"clue-details-text\", String.valueOf(clue.getClueID()), newDetail);\n\t\t\t\t\t\tpanel.refresh();\n\t\t\t\t\t})\n\t\t\t\t\t.build());\n\t}\n\n\tprivate void addHighlightItemMenu(CluePreferenceManager cluePreferenceManager, Menu menu, Clues clue, int itemId, MenuEntryAdded event)\n\t{\n\t\tif (clue \u003d\u003d null) return;\n\n\t\tboolean itemInCluePreference \u003d cluePreferenceManager.itemsPreferenceContainsItem(clue.getClueID(), itemId);\n\n\t\tString action \u003d itemInCluePreference ? \"Remove from \" : \"Add to \";\n\t\tString clueDetail \u003d clue.getDetail(configManager);\n\t\tfinal String text \u003d action + \"\u0027\" + clueDetail + \"\u0027\";\n\n\t\t// Add menu to item for clue\n\t\tmenu.createMenuEntry(-1)\n\t\t\t.setOption(text)\n\t\t\t.setTarget(event.getTarget())\n\t\t\t.setIdentifier(itemId)\n\t\t\t.setType(MenuAction.RUNELITE)\n\t\t\t.onClick(e -\u003e\n\t\t\t\tupdateClueItems(clue, itemId, cluePreferenceManager));\n\t}\n\n\tprivate void toggleMarkClue(CluePreferenceManager cluePreferenceManager, ClueDetailsParentPanel panel, int clueId, boolean isMarked, String target)\n\t{\n\t\t// We don\u0027t want to have marking on masters I think\n\t\tclient.getMenu().createMenuEntry(-1)\n\t\t\t.setOption(isMarked ? \"Unmark\" : \"Mark\")\n\t\t\t.setTarget(target)\n\t\t\t.setIdentifier(clueId)\n\t\t\t.setType(MenuAction.RUNELITE)\n\t\t\t.onClick(e -\u003e\n\t\t\t{\n\t\t\t\tboolean currentValue \u003d cluePreferenceManager.getHighlightPreference(e.getIdentifier());\n\t\t\t\tcluePreferenceManager.saveHighlightPreference(e.getIdentifier(), !currentValue);\n\t\t\t\tpanel.refresh();\n\t\t\t});\n\t}\n\n\tprivate void updateClueItems(Clues clue, int itemId, CluePreferenceManager cluePreferenceManager)\n\t{\n\t\t// Get existing Clue itemIds\n\t\tint clueId \u003d clue.getClueID();\n\t\tList\u003cInteger\u003e clueItemIds \u003d cluePreferenceManager.getItemsPreference(clueId);\n\n\t\tif (clueItemIds \u003d\u003d null)\n\t\t{\n\t\t\tclueItemIds \u003d new ArrayList\u003c\u003e();\n\t\t}\n\n\t\t// Remove if already present\n\t\tif (clueItemIds.contains(itemId))\n\t\t{\n\t\t\tclueItemIds.remove(Integer.valueOf(itemId));\n\t\t}\n\t\t// Add if not present\n\t\telse\n\t\t{\n\t\t\tclueItemIds.add(itemId);\n\t\t}\n\n\t\t// Save Clue itemIds\n\t\tcluePreferenceManager.saveItemsPreference(clueId, clueItemIds);\n\t}\n\n\tprivate boolean hasClueName(String name)\n\t{\n\t\treturn name.contains(\"Clue scroll\")\n\t\t\t|| name.contains(\"Challenge scroll\")\n\t\t\t|| name.contains(\"Key (medium)\")\n\t\t\t|| (clueDetailsPlugin.isDeveloperMode() \u0026\u0026 name.contains(\"Daeyalt essence\"));\n\t}\n\n\tpublic void onGameTick()\n\t{\n\t\t// Reset clue when receiving a new beginner or master clue\n\t\t// These clues use a single item ID, so we cannot detect step changes based on the item ID changing\n\t\tfinal Widget headModelWidget \u003d client.getWidget(ComponentID.DIALOG_NPC_HEAD_MODEL);\n\t\tfinal Widget chatDialogClueItemWidget \u003d client.getWidget(ComponentID.DIALOG_SPRITE_SPRITE);\n\t\tfinal Widget npcChatWidget \u003d client.getWidget(ComponentID.DIALOG_NPC_TEXT);\n\n\t\tif (isNewBeginnerClue(chatDialogClueItemWidget)\n\t\t\t|| (isUriBeginnerClue(headModelWidget) \u0026\u0026 isUriStandardDialogue(npcChatWidget)))\n\t\t{\n\t\t\tresetClue(ItemID.CLUE_SCROLL_BEGINNER, List.of());\n\t\t}\n\t\telse if (isNewMasterClue(chatDialogClueItemWidget)\n\t\t\t|| (isUriMasterClue(headModelWidget) \u0026\u0026 isUriStandardDialogue(npcChatWidget)))\n\t\t{\n\t\t\tresetClue(ItemID.CLUE_SCROLL_MASTER, List.of());\n\t\t}\n\t\telse if (isCharlieBeginnerClue(headModelWidget) \u0026\u0026 isCharlieTaskDialogue(npcChatWidget))\n\t\t{\n\t\t\tInteger clueID \u003d getClueIdFromCharlie(npcChatWidget);\n\t\t\tif (clueID \u003d\u003d null) return;\n\t\t\tresetClue(ItemID.CLUE_SCROLL_BEGINNER, List.of(clueID));\n\t\t}\n\t\telse if (isFaloMasterClue(headModelWidget) \u0026\u0026 isFaloLyricDialogue(npcChatWidget))\n\t\t{\n\t\t\tInteger clueID \u003d getClueIdFromFalo(npcChatWidget);\n\t\t\tif (clueID \u003d\u003d null) return;\n\t\t\tresetClue(ItemID.CLUE_SCROLL_MASTER, List.of(clueID));\n\t\t}\n\t}\n\n\tprivate void resetClue(int itemID, List\u003cInteger\u003e clueIds)\n\t{\n\t\tClueInstance clue \u003d cluesInInventory.get(itemID);\n\t\tif (clue \u003d\u003d null) return;\n\t\tclue.setClueIds(clueIds);\n\t\tclueDetailsPlugin.getItemsOverlay().invalidateCache();\n\t\tclueDetailsPlugin.getClueInventoryManager().updateLastInventoryRefreshTime();\n\t}\n\n\tprivate boolean isUriMasterClue(Widget headModel)\n\t{\n\t\tif (headModel \u003d\u003d null) return false;\n\t\treturn headModel.getModelId() \u003d\u003d NpcID.URI_7311;\n\t}\n\n\tprivate boolean isUriBeginnerClue(Widget headModel)\n\t{\n\t\tif (headModel \u003d\u003d null) return false;\n\t\treturn headModel.getModelId() \u003d\u003d NpcID.URI_8638;\n\t}\n\n\tprivate boolean isUriStandardDialogue(Widget npcChat)\n\t{\n\t\tif (npcChat \u003d\u003d null) return false;\n\t\t// Check if speaking with another player\u0027s Uri or with incorrect attire\n\t\treturn !npcChat.getText().contains(\"I do not believe we have any business, Comrade.\");\n\t}\n\n\tprivate boolean isNewBeginnerClue(Widget chatDialogClueItem)\n\t{\n\t\tif (chatDialogClueItem \u003d\u003d null) return false;\n\t\treturn chatDialogClueItem.getItemId() \u003d\u003d ItemID.CLUE_SCROLL_BEGINNER;\n\t}\n\n\tprivate boolean isNewMasterClue(Widget chatDialogClueItem)\n\t{\n\t\tif (chatDialogClueItem \u003d\u003d null) return false;\n\t\treturn chatDialogClueItem.getItemId() \u003d\u003d ItemID.CLUE_SCROLL_MASTER;\n\t}\n\n\tprivate boolean isCharlieBeginnerClue(Widget headModel)\n\t{\n\t\tif (headModel \u003d\u003d null) return false;\n\t\treturn headModel.getModelId() \u003d\u003d NpcID.CHARLIE_THE_TRAMP;\n\t}\n\n\tprivate boolean isCharlieTaskDialogue(Widget npcChat)\n\t{\n\t\tif (npcChat \u003d\u003d null) return false;\n\t\treturn npcChat.getText().toLowerCase().contains(\"i really need\");\n\t}\n\n\tprivate static Integer getClueIdFromCharlie(Widget npcChatWidget)\n\t{\n\t\tif (npcChatWidget.getText() \u003d\u003d null) return null;\n\t\tString clueText \u003d BeginnerMasterClueText.forTaskGetClueText(npcChatWidget.getText());\n\t\tif (clueText \u003d\u003d null) return null;\n\t\treturn Clues.forTextGetId(clueText);\n\t}\n\n\tprivate boolean isFaloMasterClue(Widget headModel)\n\t{\n\t\tif (headModel \u003d\u003d null) return false;\n\t\treturn headModel.getModelId() \u003d\u003d NpcID.FALO_THE_BARD;\n\t}\n\n\tprivate boolean isFaloLyricDialogue(Widget npcChat)\n\t{\n\t\tif (npcChat \u003d\u003d null) return false;\n\t\treturn npcChat.getText().toLowerCase().contains(\"here goes...\");\n\t}\n\n\tprivate static Integer getClueIdFromFalo(Widget npcChatWidget)\n\t{\n\t\tif (npcChatWidget.getText() \u003d\u003d null) return null;\n\t\tString clueText \u003d BeginnerMasterClueText.forLyricsGetClueText(npcChatWidget.getText());\n\t\tif (clueText \u003d\u003d null) return null;\n\t\treturn Clues.forTextGetId(clueText);\n\t}\n\n\tprivate boolean isEnabled(Integer itemId)\n\t{\n\t\tif (itemId \u003d\u003d ItemID.CLUE_SCROLL_BEGINNER)\n\t\t{\n\t\t\treturn config.beginnerDetails();\n\t\t}\n\t\telse if (itemId \u003d\u003d ItemID.CLUE_SCROLL_MASTER )\n\t\t{\n\t\t\treturn config.masterDetails();\n\t\t}\n\t\treturn true;\n\t}\n\n\tprivate void sendChatMessage(final String message)\n\t{\n\t\tclueDetailsPlugin.getChatMessageManager().queue(QueuedMessage.builder()\n\t\t\t.type(ChatMessageType.CONSOLE)\n\t\t\t.runeLiteFormattedMessage(message)\n\t\t\t.build());\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\ClueInventoryManager.java"},{"fileName":"CluePreferenceManager.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport static com.cluedetails.ClueDetailsConfig.CLUE_ITEMS_CONFIG;\nimport static com.cluedetails.ClueDetailsConfig.CLUE_WIDGETS_CONFIG;\n\nimport com.google.gson.reflect.TypeToken;\nimport java.util.List;\nimport java.util.stream.*;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport net.runelite.client.config.ConfigManager;\n\n@Singleton\npublic class CluePreferenceManager\n{\n\tprivate final ClueDetailsPlugin clueDetailsPlugin;\n\tprivate final ConfigManager configManager;\n\n\t@Inject\n\tpublic CluePreferenceManager(ClueDetailsPlugin clueDetailsPlugin, ConfigManager configManager)\n\t{\n\t\tthis.clueDetailsPlugin \u003d clueDetailsPlugin;\n\t\tthis.configManager \u003d configManager;\n\t}\n\n\tpublic boolean getHighlightPreference(int clueID)\n\t{\n\t\treturn Boolean.TRUE.equals(configManager.getConfiguration(\"clue-details-highlights\",\n\t\t\tString.valueOf(clueID), Boolean.class));\n\t}\n\n\tpublic void saveHighlightPreference(int clueID, boolean newValue)\n\t{\n\t\tconfigManager.setConfiguration(\"clue-details-highlights\", String.valueOf(clueID), newValue);\n\t}\n\n\tpublic boolean itemsPreferenceContainsItem(int clueID, int itemID)\n\t{\n\t\tList\u003cInteger\u003e clueItemIds \u003d getItemsPreference(clueID);\n\n\t\tif (clueItemIds !\u003d null)\n\t\t{\n\t\t\treturn getItemsPreference(clueID).contains(itemID);\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic List\u003cInteger\u003e getItemsPreference(int clueID)\n\t{\n\t\tString clueItems \u003d configManager.getConfiguration(CLUE_ITEMS_CONFIG, String.valueOf(clueID));\n\n\t\treturn clueDetailsPlugin.gson.fromJson(clueItems, new TypeToken\u003cList\u003cInteger\u003e\u003e(){}.getType());\n\t}\n\n\tpublic void saveItemsPreference(int clueID, List\u003cInteger\u003e newItems)\n\t{\n\t\tif (newItems.isEmpty())\n\t\t{\n\t\t\tconfigManager.unsetConfiguration(CLUE_ITEMS_CONFIG, String.valueOf(clueID));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tString clueItemIdsJson \u003d clueDetailsPlugin.gson.toJson(newItems);\n\t\t\tconfigManager.setConfiguration(CLUE_ITEMS_CONFIG, String.valueOf(clueID), clueItemIdsJson);\n\t\t}\n\t}\n\n\tpublic boolean widgetsPreferenceContainsWidget(int clueID, WidgetId widgetId)\n\t{\n\t\tList\u003cWidgetId\u003e clueWidgetIds \u003d getWidgetsPreference(clueID);\n\n\t\tif (clueWidgetIds !\u003d null)\n\t\t{\n\t\t\treturn clueWidgetIds.contains(widgetId);\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic List\u003cWidgetId\u003e getWidgetsPreference(int clueID)\n\t{\n\t\tString clueWidgets \u003d configManager.getConfiguration(CLUE_WIDGETS_CONFIG, String.valueOf(clueID));\n\n\t\treturn clueDetailsPlugin.gson.fromJson(clueWidgets, new TypeToken\u003cList\u003cWidgetId\u003e\u003e(){}.getType());\n\t}\n\n\tpublic void saveWidgetsPreference(int clueID, List\u003cWidgetId\u003e newWidgets)\n\t{\n\t\tif (newWidgets.isEmpty())\n\t\t{\n\t\t\tconfigManager.unsetConfiguration(CLUE_WIDGETS_CONFIG, String.valueOf(clueID));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tList\u003cWidgetId\u003e mappedWidgetIds \u003d newWidgets\n\t\t\t\t.stream()\n\t\t\t\t.map(w -\u003e new WidgetId(w.getComponentId(), w.getChildIndex() \u003d\u003d null || w.getChildIndex() \u003d\u003d -1 ? null : w.getChildIndex()))\n\t\t\t\t.collect(Collectors.toList());\n\t\t\tString clueWidgetIdsJson \u003d clueDetailsPlugin.gson.toJson(mappedWidgetIds);\n\t\t\tconfigManager.setConfiguration(CLUE_WIDGETS_CONFIG, String.valueOf(clueID), clueWidgetIdsJson);\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\CluePreferenceManager.java"},{"fileName":"Clues.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport static com.cluedetails.ClueDetailsConfig.CLUE_ITEMS_CONFIG;\n\nimport com.cluedetails.filters.ClueTier;\nimport com.cluedetails.filters.OrRequirement;\nimport com.google.common.collect.ImmutableList;\nimport com.google.gson.reflect.TypeToken;\nimport java.awt.Color;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Collection;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.stream.Collectors;\n\nimport javax.inject.Inject;\nimport lombok.Getter;\nimport lombok.Setter;\nimport net.runelite.api.ItemID;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.widgets.InterfaceID;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.plugins.cluescrolls.clues.MapClue;\nimport net.runelite.client.plugins.cluescrolls.clues.hotcold.HotColdLocation;\nimport net.runelite.client.util.Text;\n\n@Getter\npublic class Clues\n{\n\tpublic static final List\u003cClues\u003e CLUES \u003d ImmutableList.of(\n\t\tnew Clues(0, \"Ranael: Talk\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_ANAGRAM_0, List.of(new WorldPoint(3316, 3163, 0))),\n\t\tnew Clues(1, \"Archmage Sedridor: Talk\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_ANAGRAM_1, List.of(new WorldPoint(3109, 3160, 0))),\n\t\tnew Clues(2, \"Apothecary: Talk\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_ANAGRAM_2, List.of(new WorldPoint(3195, 3404, 0))),\n\t\tnew Clues(3, \"Doric: Talk\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_ANAGRAM_3, List.of(new WorldPoint(2952, 3452, 0))),\n\t\tnew Clues(4, \"Brian: Talk\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_ANAGRAM_4, List.of(new WorldPoint(3027, 3249, 0))),\n\t\tnew Clues(5, \"Veronica: Talk\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_ANAGRAM_5, List.of(new WorldPoint(3110, 3330, 0))),\n\t\tnew Clues(6, \"Gertrude: Talk\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_ANAGRAM_6, List.of(new WorldPoint(3150, 3409, 0))),\n\t\tnew Clues(7, \"Hairdresser: Talk\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_ANAGRAM_7, List.of(new WorldPoint(2945, 3380, 0))),\n\t\tnew Clues(8, \"Fortunato: Talk\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_ANAGRAM_8, List.of(new WorldPoint(3085, 3252, 0))),\n\t\tnew Clues(9, \"Hans: Talk\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_CRYPTIC_0, List.of(new WorldPoint(3212, 3219, 0))),\n\t\tnew Clues(10, \"Reldo: Talk\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_CRYPTIC_1, List.of(new WorldPoint(3210, 3495, 0))),\n\t\tnew Clues(11, \"the Cook in Lumbridge: Talk\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_CRYPTIC_2, List.of(new WorldPoint(3209, 3214, 0))),\n\t\tnew Clues(12, \"Hunding: Talk\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_CRYPTIC_3, List.of(new WorldPoint(3097, 3429, 2))),\n\t\tnew Clues(13, \"Charlie the Tramp: Talk\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_CRYPTIC_4, List.of(new WorldPoint(3206, 3390, 0))),\n\t\tnew Clues(14, \"Shantay: Talk\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_CRYPTIC_5, List.of(new WorldPoint(3304, 3124, 0))),\n\t\tnew Clues(15, \"Aris: Emote\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_EMOTE_0, List.of(new WorldPoint(3206, 3422, 0))),\n\t\tnew Clues(16, \"Brugsen Bursen: Emote\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_EMOTE_1, List.of(new WorldPoint(3165, 3478, 0))),\n\t\tnew Clues(17, \"Iffie Nitter: Emote\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_EMOTE_2, List.of(new WorldPoint(3209, 3416, 0))),\n\t\tnew Clues(18, \"Bob\u0027s Axes: Emote\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_EMOTE_3, List.of(new WorldPoint(3233, 3200, 0))),\n\t\tnew Clues(19, \"Al Kharid mine: Emote\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_EMOTE_4, List.of(new WorldPoint(3298, 3293, 0))),\n\t\tnew Clues(20, \"Flynn\u0027s Mace Shop: Emote\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_EMOTE_5, List.of(new WorldPoint(2948, 3389, 0))),\n\t\tnew Clues(21, \"Champions\u0027 Guild: Dig\", InterfaceID.CLUE_BEGINNER_MAP_CHAMPIONS_GUILD, ClueTier.BEGINNER, MapClue.CHAMPIONS_GUILD, List.of(new WorldPoint(3166, 3361, 0))),\n\t\tnew Clues(22, \"Varrock East Mine: Dig\", InterfaceID.CLUE_BEGINNER_MAP_VARROCK_EAST_MINE, ClueTier.BEGINNER, MapClue.VARROCK_EAST_MINE, List.of(new WorldPoint(3290, 3374, 0))),\n\t\tnew Clues(23, \"Draynor Village Bank: Dig\", InterfaceID.CLUE_BEGINNER_MAP_DYANOR, ClueTier.BEGINNER, MapClue.SOUTH_OF_DRAYNOR_BANK, List.of(new WorldPoint(3093, 3226, 0))),\n\t\tnew Clues(24, \"Falador stones: Dig\", InterfaceID.CLUE_BEGINNER_MAP_NORTH_OF_FALADOR, ClueTier.BEGINNER, MapClue.STANDING_STONES, List.of(new WorldPoint(3043, 3398, 0))),\n\t\tnew Clues(25, \"DIS: Dig\", InterfaceID.CLUE_BEGINNER_MAP_WIZARDS_TOWER, ClueTier.BEGINNER, MapClue.WIZARDS_TOWER_DIS, List.of(new WorldPoint(3110, 3152, 0))),\n\t\tnew Clues(26, \"Charlie the Tramp: trout\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_CHARLIE_0, List.of(new WorldPoint(3206, 3390, 0))),\n\t\tnew Clues(27, \"Charlie the Tramp: pike\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_CHARLIE_1, List.of(new WorldPoint(3206, 3390, 0))),\n\t\tnew Clues(28, \"Charlie the Tramp: raw herring\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_CHARLIE_2, List.of(new WorldPoint(3206, 3390, 0))),\n\t\tnew Clues(29, \"Charlie the Tramp: raw trout\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_CHARLIE_3, List.of(new WorldPoint(3206, 3390, 0))),\n\t\tnew Clues(30, \"Charlie the Tramp: iron ore\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_CHARLIE_4, List.of(new WorldPoint(3206, 3390, 0))),\n\t\tnew Clues(31, \"Charlie the Tramp: iron dagger\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_CHARLIE_5, List.of(new WorldPoint(3206, 3390, 0))),\n\t\tnew Clues(32, \"Charlie the Tramp: leather body\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_CHARLIE_6, List.of(new WorldPoint(3206, 3390, 0))),\n\t\tnew Clues(33, \"Charlie the Tramp: leather chaps\", ItemID.CLUE_SCROLL_BEGINNER, ClueTier.BEGINNER, BeginnerMasterClueText.BEGINNER_CHARLIE_7, List.of(new WorldPoint(3206, 3390, 0))),\n\t\tnew Clues(34, \"Draynor Manor: Dig\", HotColdLocation.DRAYNOR_MANOR_MUSHROOMS.ordinal(), ClueTier.BEGINNER, HotColdLocation.DRAYNOR_MANOR_MUSHROOMS.getArea(), List.of(HotColdLocation.DRAYNOR_MANOR_MUSHROOMS.getWorldPoint())),\n\t\tnew Clues(35, \"Draynor Village wheat: Dig\", HotColdLocation.DRAYNOR_WHEAT_FIELD.ordinal(), ClueTier.BEGINNER, HotColdLocation.DRAYNOR_WHEAT_FIELD.getArea(), List.of(HotColdLocation.DRAYNOR_WHEAT_FIELD.getWorldPoint())),\n\t\tnew Clues(36, \"Ice Mountain: Dig\", HotColdLocation.ICE_MOUNTAIN.ordinal(), ClueTier.BEGINNER, HotColdLocation.ICE_MOUNTAIN.getArea(), List.of(HotColdLocation.ICE_MOUNTAIN.getWorldPoint())),\n\t\tnew Clues(37, \"Lumbridge cows: Dig\", HotColdLocation.LUMBRIDGE_COW_FIELD.ordinal(), ClueTier.BEGINNER, HotColdLocation.LUMBRIDGE_COW_FIELD.getArea(), List.of(HotColdLocation.LUMBRIDGE_COW_FIELD.getWorldPoint())),\n\t\tnew Clues(38, \"Al Kharid mine north-east: Dig\", HotColdLocation.NORTHEAST_OF_AL_KHARID_MINE.ordinal(), ClueTier.BEGINNER, HotColdLocation.NORTHEAST_OF_AL_KHARID_MINE.getArea(), List.of(HotColdLocation.NORTHEAST_OF_AL_KHARID_MINE.getWorldPoint())),\n\t\tnew Clues(\"Duke\u0027s room: Search\", ItemID.CLUE_SCROLL_EASY, ClueTier.EASY, null, List.of(new WorldPoint(3209, 3218, 0))),\n\t\tnew Clues(\"Ardougne church: Search\", ItemID.CLUE_SCROLL_EASY_2711, ClueTier.EASY, null, List.of(new WorldPoint(2612, 3304, 0))),\n\t\tnew Clues(\"Al Kharid mine: Dig\", ItemID.CLUE_SCROLL_EASY_12179, ClueTier.EASY, null, List.of(new WorldPoint(3300, 3291, 0))),\n\t\tnew Clues(\"Falador stones: Dig\", ItemID.CLUE_SCROLL_EASY_2719, ClueTier.EASY, null, List.of(new WorldPoint(3043, 3398, 0))),\n\t\tnew Clues(\"Belladonna Leprechaun: Talk\", ItemID.CLUE_SCROLL_EASY_19823, ClueTier.EASY, null, List.of(new WorldPoint(3088, 3357, 0))),\n\t\tnew Clues(\"Ardougne Zoo: Emote\", ItemID.CLUE_SCROLL_EASY_10216, ClueTier.EASY, null, List.of(new WorldPoint(2607, 3282, 0))),\n\t\tnew Clues(\"Keep Le Faye: Emote\", ItemID.CLUE_SCROLL_EASY_10222, ClueTier.EASY, null, List.of(new WorldPoint(2757, 3401, 0))),\n\t\tnew Clues(\"Emir\u0027s Arena: Emote\", ItemID.CLUE_SCROLL_EASY_10232, ClueTier.EASY, null, List.of(new WorldPoint(3314, 3241, 0))),\n\t\tnew Clues(\"Legends\u0027 Guild: Emote\", ItemID.CLUE_SCROLL_EASY_10188, ClueTier.EASY, null, List.of(new WorldPoint(2729, 3349, 0))),\n\t\tnew Clues(\"Galahad\u0027s house: Dig\", ItemID.CLUE_SCROLL_EASY_3516, ClueTier.EASY, null, List.of(new WorldPoint(2612, 3482, 0))),\n\t\tnew Clues(\"Druids\u0027 Circle: Emote\", ItemID.CLUE_SCROLL_EASY_10210, ClueTier.EASY, null, List.of(new WorldPoint(2924, 3478, 0))),\n\t\tnew Clues(\"games room: Emote\", ItemID.CLUE_SCROLL_EASY_10212, ClueTier.EASY, null, List.of(new WorldPoint(2207, 4952, 0))),\n\t\tnew Clues(\"Sarim monks: Emote\", ItemID.CLUE_SCROLL_EASY_10192, ClueTier.EASY, null, List.of(new WorldPoint(3047, 3237, 0))),\n\t\tnew Clues(\"Exam Centre: Emote\", ItemID.CLUE_SCROLL_EASY_10228, ClueTier.EASY, null, List.of(new WorldPoint(3361, 3339, 0))),\n\t\tnew Clues(\"Wizards\u0027 Tower: Emote\", ItemID.CLUE_SCROLL_EASY_10182, ClueTier.EASY, null, List.of(new WorldPoint(3113, 3196, 0))),\n\t\tnew Clues(\"Ardougne mill: Emote\", ItemID.CLUE_SCROLL_EASY_10206, ClueTier.EASY, null, List.of(new WorldPoint(2635, 3385, 0))),\n\t\tnew Clues(\"Fishing Guild: Emote\", ItemID.CLUE_SCROLL_EASY_10220, ClueTier.EASY, null, List.of(new WorldPoint(2610, 3391, 0))),\n\t\tnew Clues(\"Draynor crossroads: Emote\", ItemID.CLUE_SCROLL_EASY_10200, ClueTier.EASY, null, List.of(new WorldPoint(3109, 3294, 0))),\n\t\tnew Clues(\"Grand Exchange: Emote\", ItemID.CLUE_SCROLL_EASY_19831, ClueTier.EASY, null, List.of(new WorldPoint(3165, 3467, 0))),\n\t\tnew Clues(\"Party Room: Emote\", ItemID.CLUE_SCROLL_EASY_10208, ClueTier.EASY, null, List.of(new WorldPoint(3045, 3376, 0))),\n\t\tnew Clues(\"Lumbridge Swamp: Emote\", ItemID.CLUE_SCROLL_EASY_10180, ClueTier.EASY, null, List.of(new WorldPoint(3203, 3169, 0))),\n\t\tnew Clues(\"Falador stones: Dig\", ItemID.CLUE_SCROLL_EASY_12170, ClueTier.EASY, null, List.of(new WorldPoint(3040, 3399, 0))),\n\t\tnew Clues(\"Giant\u0027s Den: Dig\", ItemID.CLUE_SCROLL_EASY_25788, ClueTier.EASY, null, List.of(new WorldPoint(1418, 3591, 0))),\n\t\tnew Clues(\"Kourend centre: Dig\", ItemID.CLUE_SCROLL_EASY_19826, ClueTier.EASY, null, List.of(new WorldPoint(1639, 3673, 0))),\n\t\tnew Clues(\"Grand Tree: Dig\", ItemID.CLUE_SCROLL_EASY_3510, ClueTier.EASY, null, List.of(new WorldPoint(2458, 3504, 0))),\n\t\tnew Clues(\"Ithoi\u0027s cabin: Dig\", ItemID.CLUE_SCROLL_EASY_22001, ClueTier.EASY, null, List.of(new WorldPoint(2529, 2838, 0))),\n\t\tnew Clues(\"Lumbridge Castle: Dig\", ItemID.CLUE_SCROLL_EASY_19814, ClueTier.EASY, null, List.of(new WorldPoint(3221, 3219, 0))),\n\t\tnew Clues(\"Wizards\u0027 Tower: Dig\", ItemID.CLUE_SCROLL_EASY_3518, ClueTier.EASY, null, List.of(new WorldPoint(3109, 3153, 0))),\n\t\tnew Clues(\"Varrock\u0027s rune store: Emote\", ItemID.CLUE_SCROLL_EASY_19833, ClueTier.EASY, null, List.of(new WorldPoint(3253, 3401, 0))),\n\t\tnew Clues(\"Al Kharid mine: Emote\", ItemID.CLUE_SCROLL_EASY_10194, ClueTier.EASY, null, List.of(new WorldPoint(3299, 3289, 0))),\n\t\tnew Clues(\"Vannaka: Talk\", ItemID.CLUE_SCROLL_EASY_19816, ClueTier.EASY, null, List.of(new WorldPoint(3146, 9913, 0))),\n\t\tnew Clues(\"Chemist: Talk\", ItemID.CLUE_SCROLL_EASY_19822, ClueTier.EASY, null, List.of(new WorldPoint(2932, 3212, 0))),\n\t\tnew Clues(\"Father Jean: Talk\", ItemID.CLUE_SCROLL_EASY_19820, ClueTier.EASY, null, List.of(new WorldPoint(1734, 3576, 0))),\n\t\tnew Clues(\"beehives: Emote\", ItemID.CLUE_SCROLL_EASY_10214, ClueTier.EASY, null, List.of(new WorldPoint(2759, 3445, 0))),\n\t\tnew Clues(\"Sinclair Mansion: Emote\", ItemID.CLUE_SCROLL_EASY_10226, ClueTier.EASY, null, List.of(new WorldPoint(2741, 3536, 0))),\n\t\tnew Clues(\"Falador east crate: Search\", ItemID.CLUE_SCROLL_EASY_2712, ClueTier.EASY, null, List.of(new WorldPoint(3029, 3355, 0))),\n\t\tnew Clues(\"monk\u0027s camp: Search\", ItemID.CLUE_SCROLL_EASY_19818, ClueTier.EASY, null, List.of(new WorldPoint(1746, 3490, 0))),\n\t\tnew Clues(\"North of Falador: Search\", ItemID.CLUE_SCROLL_EASY_7236, ClueTier.EASY, null, List.of(new WorldPoint(2970, 3415, 0))),\n\t\tnew Clues(\"Captain Tobias: Talk\", ItemID.CLUE_SCROLL_EASY_3496, ClueTier.EASY, null, List.of(new WorldPoint(3026, 3216, 0))),\n\t\tnew Clues(\"Limestone Mine: Emote\", ItemID.CLUE_SCROLL_EASY_10186, ClueTier.EASY, null, List.of(new WorldPoint(3372, 3498, 0))),\n\t\tnew Clues(\"Fishing trawler: Emote\", ItemID.CLUE_SCROLL_EASY_10224, ClueTier.EASY, null, List.of(new WorldPoint(2676, 3169, 0))),\n\t\tnew Clues(\"Konoo: Talk\", ItemID.CLUE_SCROLL_EASY_19825, ClueTier.EASY, null, List.of(new WorldPoint(1703, 3524, 0))),\n\t\tnew Clues(\"Urhney\u0027s books: Search\", ItemID.CLUE_SCROLL_EASY_12166, ClueTier.EASY, null, List.of(new WorldPoint(3146, 3177, 0))),\n\t\tnew Clues(\"Wizards tower: Search\", ItemID.CLUE_SCROLL_EASY_12167, ClueTier.EASY, null, List.of(new WorldPoint(3113, 3159, 0))),\n\t\tnew Clues(\"Aggie\u0027s wardrobe: Search\", ItemID.CLUE_SCROLL_EASY_12168, ClueTier.EASY, null, List.of(new WorldPoint(3087, 3261, 0))),\n\t\tnew Clues(\"Wydin\u0027s Food: Search\", ItemID.CLUE_SCROLL_EASY_3495, ClueTier.EASY, null, List.of(new WorldPoint(3016, 3205, 0))),\n\t\tnew Clues(\"Varrock Castle: Search\", ItemID.CLUE_SCROLL_EASY_3515, ClueTier.EASY, null, List.of(new WorldPoint(3224, 3492, 0))),\n\t\tnew Clues(\"Hemenster: Search\", ItemID.CLUE_SCROLL_EASY_3506, ClueTier.EASY, null, List.of(new WorldPoint(2636, 3453, 0))),\n\t\tnew Clues(\"Farsight\u0027s house: Search\", ItemID.CLUE_SCROLL_EASY_3509, ClueTier.EASY, null, List.of(new WorldPoint(2699, 3470, 0))),\n\t\tnew Clues(\"Edgeville coffin: Search\", ItemID.CLUE_SCROLL_EASY_12174, ClueTier.EASY, null, List.of(new WorldPoint(3091, 3477, 0))),\n\t\tnew Clues(\"Edgeville Monastery: Search\", ItemID.CLUE_SCROLL_EASY_12177, ClueTier.EASY, null, List.of(new WorldPoint(3054, 3484, 0))),\n\t\tnew Clues(\"Gaius\u0027 Shop: Search\", ItemID.CLUE_SCROLL_EASY_3499, ClueTier.EASY, null, List.of(new WorldPoint(2886, 3449, 0))),\n\t\tnew Clues(\"Al Kharid silk: Search\", ItemID.CLUE_SCROLL_EASY_3501, ClueTier.EASY, null, List.of(new WorldPoint(3308, 3206, 0))),\n\t\tnew Clues(\"Goblin house: Search\", ItemID.CLUE_SCROLL_EASY_2679, ClueTier.EASY, null, List.of(new WorldPoint(3245, 3245, 0))),\n\t\tnew Clues(\"Varrock south: Search\", ItemID.CLUE_SCROLL_EASY_2685, ClueTier.EASY, null, List.of(new WorldPoint(3203, 3384, 0))),\n\t\tnew Clues(\"outside Zenesha\u0027s: Search\", ItemID.CLUE_SCROLL_EASY_2705, ClueTier.EASY, null, List.of(new WorldPoint(2654, 3299, 0))),\n\t\tnew Clues(\"Crystal Chest: Search\", ItemID.CLUE_SCROLL_EASY_23149, ClueTier.EASY, null, List.of(new WorldPoint(2915, 3452, 0))),\n\t\tnew Clues(\"Falador General Store: Search\", ItemID.CLUE_SCROLL_EASY_2692, ClueTier.EASY, null, List.of(new WorldPoint(2955, 3390, 0))),\n\t\tnew Clues(\"Sarim jail: Search\", ItemID.CLUE_SCROLL_EASY_12192, ClueTier.EASY, null, List.of(new WorldPoint(3013, 3179, 0))),\n\t\tnew Clues(\"Digsite bush: Search\", ItemID.CLUE_SCROLL_EASY_12175, ClueTier.EASY, null, List.of(new WorldPoint(3345, 3378, 0))),\n\t\tnew Clues(\"Barbarian Village wheel: Search\", ItemID.CLUE_SCROLL_EASY_12172, ClueTier.EASY, null, List.of(new WorldPoint(3085, 3429, 0))),\n\t\tnew Clues(\"Fred the Farmer: Search\", ItemID.CLUE_SCROLL_EASY_23151, ClueTier.EASY, null, List.of(new WorldPoint(3185, 3274, 0))),\n\t\tnew Clues(\"Camelot Castle: Search\", ItemID.CLUE_SCROLL_EASY_2703, ClueTier.EASY, null, List.of(new WorldPoint(2748, 3495, 0))),\n\t\tnew Clues(\"Hura\u0027s Shop: Search\", ItemID.CLUE_SCROLL_EASY_3493, ClueTier.EASY, null, List.of(new WorldPoint(3000, 9798, 0))),\n\t\tnew Clues(\"Al Kharid Palace: Search\", ItemID.CLUE_SCROLL_EASY_2680, ClueTier.EASY, null, List.of(new WorldPoint(3301, 3169, 0))),\n\t\tnew Clues(\"Rommik\u0027s shop: Search\", ItemID.CLUE_SCROLL_EASY_23153, ClueTier.EASY, null, List.of(new WorldPoint(2946, 3207, 0))),\n\t\tnew Clues(\"Burthorpe pub: Search\", ItemID.CLUE_SCROLL_EASY_12185, ClueTier.EASY, null, List.of(new WorldPoint(2913, 3536, 0))),\n\t\tnew Clues(\"Lumbridge Castle tower: Search\", ItemID.CLUE_SCROLL_EASY_2678, ClueTier.EASY, null, List.of(new WorldPoint(3228, 3212, 0))),\n\t\tnew Clues(\"Port Khazard: Search\", ItemID.CLUE_SCROLL_EASY_3504, ClueTier.EASY, null, List.of(new WorldPoint(2660, 3149, 0))),\n\t\tnew Clues(\"Canifis crate: Search\", ItemID.CLUE_SCROLL_EASY_7238, ClueTier.EASY, null, List.of(new WorldPoint(3509, 3497, 0))),\n\t\tnew Clues(\"Draynor Manor crate: Search\", ItemID.CLUE_SCROLL_EASY_3502, ClueTier.EASY, null, List.of(new WorldPoint(3106, 3369, 0))),\n\t\tnew Clues(\"Ardougne General store: Search\", ItemID.CLUE_SCROLL_EASY_2706, ClueTier.EASY, null, List.of(new WorldPoint(2615, 3291, 0))),\n\t\tnew Clues(\"Falador General store: Search\", ItemID.CLUE_SCROLL_EASY_23154, ClueTier.EASY, null, List.of(new WorldPoint(2955, 3390, 0))),\n\t\tnew Clues(\"Horvik\u0027s crates: Search\", ItemID.CLUE_SCROLL_EASY_2688, ClueTier.EASY, null, List.of(new WorldPoint(3228, 3433, 0))),\n\t\tnew Clues(\"West Varrock bank: Search\", ItemID.CLUE_SCROLL_EASY_12176, ClueTier.EASY, null, List.of(new WorldPoint(3187, 9825, 0))),\n\t\tnew Clues(\"Yanille piano: Search\", ItemID.CLUE_SCROLL_EASY_3491, ClueTier.EASY, null, List.of(new WorldPoint(2598, 3105, 0))),\n\t\tnew Clues(\"Barbarian Village helmet: Search\", ItemID.CLUE_SCROLL_EASY_2690, ClueTier.EASY, null, List.of(new WorldPoint(3073, 3430, 0))),\n\t\tnew Clues(\"Drogo\u0027s shop: Search\", ItemID.CLUE_SCROLL_EASY_12178, ClueTier.EASY, null, List.of(new WorldPoint(3035, 9849, 0))),\n\t\tnew Clues(\"Gerrant\u0027s shop: Search\", ItemID.CLUE_SCROLL_EASY_2695, ClueTier.EASY, null, List.of(new WorldPoint(3012, 3222, 0))),\n\t\tnew Clues(\"Hosidius fruit store: Search\", ItemID.CLUE_SCROLL_EASY_25789, ClueTier.EASY, null, List.of(new WorldPoint(1799, 3613, 0))),\n\t\tnew Clues(\"Ardougne guard house: Search\", ItemID.CLUE_SCROLL_EASY_2704, ClueTier.EASY, null, List.of(new WorldPoint(2645, 3338, 0))),\n\t\tnew Clues(\"Al Kharid north-west : Search\", ItemID.CLUE_SCROLL_EASY_2682, ClueTier.EASY, null, List.of(new WorldPoint(3289, 3202, 0))),\n\t\tnew Clues(\"Taverley stile: Search\", ItemID.CLUE_SCROLL_EASY_12191, ClueTier.EASY, null, List.of(new WorldPoint(2914, 3433, 0))),\n\t\tnew Clues(\"Ardougne shed: Search\", ItemID.CLUE_SCROLL_EASY_2707, ClueTier.EASY, null, List.of(new WorldPoint(2617, 3347, 0))),\n\t\tnew Clues(\"Varrock cart: Search\", ItemID.CLUE_SCROLL_EASY_2709, ClueTier.EASY, null, List.of(new WorldPoint(3226, 3452, 0))),\n\t\tnew Clues(\"Thessalia\u0027s upstairs: Search\", ItemID.CLUE_SCROLL_EASY_2708, ClueTier.EASY, null, List.of(new WorldPoint(3206, 3419, 0))),\n\t\tnew Clues(\"Falador east drawers: Search\", ItemID.CLUE_SCROLL_EASY_3498, ClueTier.EASY, null, List.of(new WorldPoint(3039, 3342, 0))),\n\t\tnew Clues(\"Ardougne pub: Search\", ItemID.CLUE_SCROLL_EASY_2710, ClueTier.EASY, null, List.of(new WorldPoint(2574, 3326, 0))),\n\t\tnew Clues(\"Wayne\u0027s Chains: Search\", ItemID.CLUE_SCROLL_EASY_2694, ClueTier.EASY, null, List.of(new WorldPoint(2969, 3311, 0))),\n\t\tnew Clues(\"Draynor drawers: Search\", ItemID.CLUE_SCROLL_EASY_3512, ClueTier.EASY, null, List.of(new WorldPoint(3097, 3277, 0))),\n\t\tnew Clues(\"Gertrude\u0027s house: Search\", ItemID.CLUE_SCROLL_EASY_2689, ClueTier.EASY, null, List.of(new WorldPoint(3156, 3406, 0))),\n\t\tnew Clues(\"Yanille hunter shop: Search\", ItemID.CLUE_SCROLL_EASY_3492, ClueTier.EASY, null, List.of(new WorldPoint(2570, 3085, 0))),\n\t\tnew Clues(\"Sarim water house: Search\", ItemID.CLUE_SCROLL_EASY_12188, ClueTier.EASY, null, List.of(new WorldPoint(3024, 3259, 0))),\n\t\tnew Clues(\"Perdu\u0027s house: Search\", ItemID.CLUE_SCROLL_EASY_3507, ClueTier.EASY, null, List.of(new WorldPoint(2809, 3451, 0))),\n\t\tnew Clues(\"Hild\u0027s house: Search\", ItemID.CLUE_SCROLL_EASY_3490, ClueTier.EASY, null, List.of(new WorldPoint(2929, 3570, 0))),\n\t\tnew Clues(\"Noella\u0027s house: Search\", ItemID.CLUE_SCROLL_EASY_3505, ClueTier.EASY, null, List.of(new WorldPoint(2653, 3320, 0))),\n\t\tnew Clues(\"Cassie\u0027s Shop: Search\", ItemID.CLUE_SCROLL_EASY_2691, ClueTier.EASY, null, List.of(new WorldPoint(2971, 3386, 0))),\n\t\tnew Clues(\"East Varrock bank: Search\", ItemID.CLUE_SCROLL_EASY_2687, ClueTier.EASY, null, List.of(new WorldPoint(3250, 3420, 0))),\n\t\tnew Clues(\"Urhney\u0027s books east: Search\", ItemID.CLUE_SCROLL_EASY_23150, ClueTier.EASY, null, List.of(new WorldPoint(3149, 3177, 0))),\n\t\tnew Clues(\"Hunter Guild: Search\", ItemID.CLUE_SCROLL_EASY_28913, ClueTier.EASY, null, List.of(new WorldPoint(1560, 3048, 0))),\n\t\tnew Clues(\"Hosidius kitchens: Search\", ItemID.CLUE_SCROLL_EASY_19829, ClueTier.EASY, null, List.of(new WorldPoint(1683, 3616, 0))),\n\t\tnew Clues(\"Horvik\u0027s crate: Search\", ItemID.CLUE_SCROLL_EASY_23152, ClueTier.EASY, null, List.of(new WorldPoint(3228, 3433, 0))),\n\t\tnew Clues(\"Burthorpe tents: Search\", ItemID.CLUE_SCROLL_EASY_3503, ClueTier.EASY, null, List.of(new WorldPoint(2885, 3540, 0))),\n\t\tnew Clues(\"Rimmington mine: Search\", ItemID.CLUE_SCROLL_EASY_12189, ClueTier.EASY, null, List.of(new WorldPoint(2978, 3239, 0))),\n\t\tnew Clues(\"Falador east upstairs: Search\", ItemID.CLUE_SCROLL_EASY_3497, ClueTier.EASY, null, List.of(new WorldPoint(3041, 3364, 0))),\n\t\tnew Clues(\"Taverley south: Search\", ItemID.CLUE_SCROLL_EASY_3500, ClueTier.EASY, null, List.of(new WorldPoint(2894, 3418, 0))),\n\t\tnew Clues(\"Rimmington upstairs: Search\", ItemID.CLUE_SCROLL_EASY_3494, ClueTier.EASY, null, List.of(new WorldPoint(2970, 3214, 0))),\n\t\tnew Clues(\"Seers\u0027 Village upstairs: Search\", ItemID.CLUE_SCROLL_EASY_3508, ClueTier.EASY, null, List.of(new WorldPoint(2716, 3471, 0))),\n\t\tnew Clues(\"Rimmington mine: Emote\", ItemID.CLUE_SCROLL_EASY_10202, ClueTier.EASY, null, List.of(new WorldPoint(2976, 3238, 0))),\n\t\tnew Clues(\"Jeed: Talk\", ItemID.CLUE_SCROLL_EASY_3514, ClueTier.EASY, null, List.of(new WorldPoint(3366, 3222, 0))),\n\t\tnew Clues(\"South-east Varrock mine: Dig\", ItemID.CLUE_SCROLL_EASY_2716, ClueTier.EASY, null, List.of(new WorldPoint(3290, 3373, 0))),\n\t\tnew Clues(\"Catherby Archery shop: Search\", ItemID.CLUE_SCROLL_EASY_2700, ClueTier.EASY, null, List.of(new WorldPoint(2825, 3442, 0))),\n\t\tnew Clues(\"Arhein: Talk\", ItemID.CLUE_SCROLL_EASY_2701, ClueTier.EASY, null, List.of(new WorldPoint(2803, 3430, 0))),\n\t\tnew Clues(\"Doric: Talk\", ItemID.CLUE_SCROLL_EASY_2698, ClueTier.EASY, null, List.of(new WorldPoint(2951, 3450, 0))),\n\t\tnew Clues(\"Ellis: Talk\", ItemID.CLUE_SCROLL_EASY_2684, ClueTier.EASY, null, List.of(new WorldPoint(3276, 3191, 0))),\n\t\tnew Clues(\"Gaius: Talk\", ItemID.CLUE_SCROLL_EASY_2699, ClueTier.EASY, null, List.of(new WorldPoint(2884, 3450, 0))),\n\t\tnew Clues(\"Hans: Talk\", ItemID.CLUE_SCROLL_EASY_2681, ClueTier.EASY, null, List.of(new WorldPoint(3221, 3218, 0))),\n\t\tnew Clues(\"Jatix: Talk\", ItemID.CLUE_SCROLL_EASY_12184, ClueTier.EASY, null, List.of(new WorldPoint(2898, 3428, 0))),\n\t\tnew Clues(\"Ned: Talk\", ItemID.CLUE_SCROLL_EASY_2697, ClueTier.EASY, null, List.of(new WorldPoint(3098, 3258, 0))),\n\t\tnew Clues(\"Rusty: Talk\", ItemID.CLUE_SCROLL_EASY_12187, ClueTier.EASY, null, List.of(new WorldPoint(2979, 3435, 0))),\n\t\tnew Clues(\"Sarah: Talk\", ItemID.CLUE_SCROLL_EASY_12186, ClueTier.EASY, null, List.of(new WorldPoint(3038, 3292, 0))),\n\t\tnew Clues(\"Sir Kay: Talk\", ItemID.CLUE_SCROLL_EASY_2702, ClueTier.EASY, null, List.of(new WorldPoint(2760, 3496, 0))),\n\t\tnew Clues(\"Lady of the Lake: Talk\", ItemID.CLUE_SCROLL_EASY_12190, ClueTier.EASY, null, List.of(new WorldPoint(2924, 3405, 0))),\n\t\tnew Clues(\"Blue Moon Inn Bartender: Talk\", ItemID.CLUE_SCROLL_EASY_2686, ClueTier.EASY, null, List.of(new WorldPoint(3226, 3399, 0))),\n\t\tnew Clues(\"Louisa Sinclair: Talk\", ItemID.CLUE_SCROLL_EASY_3513, ClueTier.EASY, null, List.of(new WorldPoint(2736, 3578, 0))),\n\t\tnew Clues(\"Rimmington crossroads: Emote\", ItemID.CLUE_SCROLL_EASY_10218, ClueTier.EASY, null, List.of(new WorldPoint(2981, 3276, 0))),\n\t\tnew Clues(\"Draynor Manor fountain: Emote\", ItemID.CLUE_SCROLL_EASY_10196, ClueTier.EASY, null, List.of(new WorldPoint(3088, 3336, 0))),\n\t\tnew Clues(\"Varrock Castle: Emote\", ItemID.CLUE_SCROLL_EASY_12162, ClueTier.EASY, null, List.of(new WorldPoint(3213, 3463, 0))),\n\t\tnew Clues(\"Apothecary: Talk\", ItemID.CLUE_SCROLL_EASY_19817, ClueTier.EASY, null, List.of(new WorldPoint(3195, 3404, 0))),\n\t\tnew Clues(\"Herquin: Talk\", ItemID.CLUE_SCROLL_EASY_19819, ClueTier.EASY, null, List.of(new WorldPoint(2945, 3335, 0))),\n\t\tnew Clues(\"Ali the Leaflet Dropper: Talk\", ItemID.CLUE_SCROLL_EASY_23164, ClueTier.EASY, null, List.of(new WorldPoint(3283, 3329, 0))),\n\t\tnew Clues(\"Ambassador Spanfipple: Talk\", ItemID.CLUE_SCROLL_EASY_12182, ClueTier.EASY, null, List.of(new WorldPoint(2979, 3340, 0))),\n\t\tnew Clues(\"Cassie: Talk\", ItemID.CLUE_SCROLL_EASY_12181, ClueTier.EASY, null, List.of(new WorldPoint(2975, 3383, 0))),\n\t\tnew Clues(\"Charles in Piscarilius: Talk\", ItemID.CLUE_SCROLL_EASY_23161, ClueTier.EASY, null, List.of(new WorldPoint(1821, 3690, 0))),\n\t\tnew Clues(\"Ermin: Talk\", ItemID.CLUE_SCROLL_EASY_19828, ClueTier.EASY, null, List.of(new WorldPoint(2488, 3409, 0))),\n\t\tnew Clues(\"Morgan: Talk\", ItemID.CLUE_SCROLL_EASY_23162, ClueTier.EASY, null, List.of(new WorldPoint(3098, 3268, 0))),\n\t\tnew Clues(\"Turael/Aya: Talk\", ItemID.CLUE_SCROLL_EASY_23165, ClueTier.EASY, null, List.of(new WorldPoint(2930, 3536, 0))),\n\t\tnew Clues(\"Wayne: Talk\", ItemID.CLUE_SCROLL_EASY_23163, ClueTier.EASY, null, List.of(new WorldPoint(2972, 3312, 0))),\n\t\tnew Clues(\"Zeke: Talk\", ItemID.CLUE_SCROLL_EASY_2683, ClueTier.EASY, null, List.of(new WorldPoint(3287, 3190, 0))),\n\t\tnew Clues(\"Lucy: Talk\", ItemID.CLUE_SCROLL_EASY_12169, ClueTier.EASY, null, List.of(new WorldPoint(3046, 3382, 0))),\n\t\tnew Clues(\"Doomsayer: Talk\", ItemID.CLUE_SCROLL_EASY_19830, ClueTier.EASY, null, List.of(new WorldPoint(3230, 3230, 0))),\n\t\tnew Clues(\"Squire: Talk\", ItemID.CLUE_SCROLL_EASY_2693, ClueTier.EASY, null, List.of(new WorldPoint(2977, 3343, 0))),\n\t\tnew Clues(\"Hairdresser: Talk\", ItemID.CLUE_SCROLL_EASY_12183, ClueTier.EASY, null, List.of(new WorldPoint(2944, 3381, 0))),\n\t\tnew Clues(\"Rusty Anchor Bartender: Talk\", ItemID.CLUE_SCROLL_EASY_2696, ClueTier.EASY, null, List.of(new WorldPoint(3045, 3256, 0))),\n\t\tnew Clues(\"Blue Moon Inn Cook: Talk\", ItemID.CLUE_SCROLL_EASY_23166, ClueTier.EASY, null, List.of(new WorldPoint(3230, 3401, 0))),\n\t\tnew Clues(\"Doris: Talk\", ItemID.CLUE_SCROLL_EASY_12173, ClueTier.EASY, null, List.of(new WorldPoint(3079, 3493, 0))),\n\t\tnew Clues(\"Tynan: Talk\", ItemID.CLUE_SCROLL_EASY_19821, ClueTier.EASY, null, List.of(new WorldPoint(1836, 3786, 0))),\n\t\tnew Clues(\"The Face: Talk\", ItemID.CLUE_SCROLL_EASY_19824, ClueTier.EASY, null, List.of(new WorldPoint(3019, 3232, 0))),\n\t\tnew Clues(\"Lumbridge mill: Emote\", ItemID.CLUE_SCROLL_EASY_10198, ClueTier.EASY, null, List.of(new WorldPoint(3159, 3298, 0))),\n\t\tnew Clues(\"Lumber Yard: Emote\", ItemID.CLUE_SCROLL_EASY_10230, ClueTier.EASY, null, List.of(new WorldPoint(3307, 3491, 0))),\n\t\tnew Clues(\"Herquin\u0027s shop: Emote\", ItemID.CLUE_SCROLL_EASY_12164, ClueTier.EASY, null, List.of(new WorldPoint(2945, 3335, 0))),\n\t\tnew Clues(\"Mudskipper Point: Emote\", ItemID.CLUE_SCROLL_EASY_10190, ClueTier.EASY, null, List.of(new WorldPoint(2989, 3110, 0))),\n\t\tnew Clues(\"Champions\u0027 Guild: Dig\", ItemID.CLUE_SCROLL_EASY_2713, ClueTier.EASY, null, List.of(new WorldPoint(3166, 3361, 0))),\n\t\tnew Clues(\"Draynor Marketplace: Emote\", ItemID.CLUE_SCROLL_EASY_10184, ClueTier.EASY, null, List.of(new WorldPoint(3083, 3253, 0))),\n\t\tnew Clues(\"Fortis Grand Museum: Emote\", ItemID.CLUE_SCROLL_EASY_28914, ClueTier.EASY, null, List.of(new WorldPoint(1712, 3163, 0))),\n\t\tnew Clues(\"Varrock library: Emote\", ItemID.CLUE_SCROLL_EASY_10204, ClueTier.EASY, null, List.of(new WorldPoint(3209, 3492, 0))),\n\t\tnew Clues(\"Song: Vision\", ItemID.CLUE_SCROLL_EASY_23155, ClueTier.EASY, null, List.of(new WorldPoint(2990, 3383, 0))),\n\t\tnew Clues(\"Song: The Forlorn Homestead\", ItemID.CLUE_SCROLL_EASY_23156, ClueTier.EASY, null, List.of(new WorldPoint(2990, 3383, 0))),\n\t\tnew Clues(\"Song: Tiptoe\", ItemID.CLUE_SCROLL_EASY_23157, ClueTier.EASY, null, List.of(new WorldPoint(2990, 3383, 0))),\n\t\tnew Clues(\"Song: Rugged Terrain\", ItemID.CLUE_SCROLL_EASY_23158, ClueTier.EASY, null, List.of(new WorldPoint(2990, 3383, 0))),\n\t\tnew Clues(\"Song: On the Shore\", ItemID.CLUE_SCROLL_EASY_23159, ClueTier.EASY, null, List.of(new WorldPoint(2990, 3383, 0))),\n\t\tnew Clues(\"Song: Alone\", ItemID.CLUE_SCROLL_EASY_23160, ClueTier.EASY, null, List.of(new WorldPoint(2990, 3383, 0))),\n\t\tnew Clues(\"Aldarin bank: Dig\", ItemID.CLUE_SCROLL_EASY_29853, ClueTier.EASY, null, List.of(new WorldPoint(1390, 2926, 0))),\n\t\tnew Clues(\"Quetzacalli Gorge: Dig\", ItemID.CLUE_SCROLL_EASY_29854, ClueTier.EASY, null, List.of(new WorldPoint(1490, 3257, 0))),\n\t\tnew Clues(\"Ranulph: Talk\", ItemID.CLUE_SCROLL_EASY_30928, ClueTier.EASY, null, List.of(new WorldPoint(1366, 3367, 0))),\n\t\tnew Clues(\"Pandemonium: Emote\", ItemID.CLUE_SCROLL_EASY_31268, ClueTier.EASY, null, List.of(new WorldPoint(3049, 2966, 0))),\n\t\tnew Clues(\"H.A.M. Hideout: Dig\", ItemID.CLUE_SCROLL_MEDIUM, ClueTier.MEDIUM, null, List.of(new WorldPoint(3160, 3251, 0))),\n\t\tnew Clues(\"Tree Gnome Village: Dig\", ItemID.CLUE_SCROLL_MEDIUM_2809, ClueTier.MEDIUM, null, List.of(new WorldPoint(2479, 3158, 0))),\n\t\tnew Clues(\"Karamja banana: Dig\", ItemID.CLUE_SCROLL_MEDIUM_3588, ClueTier.MEDIUM, null, List.of(new WorldPoint(2887, 3154, 0))),\n\t\tnew Clues(\"Brimhaven Dungeon: Dig\", ItemID.CLUE_SCROLL_MEDIUM_3590, ClueTier.MEDIUM, null, List.of(new WorldPoint(2743, 3151, 0))),\n\t\tnew Clues(\"Lumbridge Swamp south: Dig\", ItemID.CLUE_SCROLL_MEDIUM_7313, ClueTier.MEDIUM, null, List.of(new WorldPoint(3184, 3150, 0))),\n\t\tnew Clues(\"Lumbridge Swamp east: Dig\", ItemID.CLUE_SCROLL_MEDIUM_2823, ClueTier.MEDIUM, null, List.of(new WorldPoint(3217, 3177, 0))),\n\t\tnew Clues(\"Asgarnian Ice Dungeon: Dig\", ItemID.CLUE_SCROLL_MEDIUM_2819, ClueTier.MEDIUM, null, List.of(new WorldPoint(3007, 3144, 0))),\n\t\tnew Clues(\"DKP: Dig\", ItemID.CLUE_SCROLL_MEDIUM_7309, ClueTier.MEDIUM, null, List.of(new WorldPoint(2896, 3119, 0))),\n\t\tnew Clues(\"Moss Giant Island: Dig\", ItemID.CLUE_SCROLL_MEDIUM_2805, ClueTier.MEDIUM, null, List.of(new WorldPoint(2697, 3207, 0))),\n\t\tnew Clues(\"Hazelmere\u0027s north: Dig\", ItemID.CLUE_SCROLL_MEDIUM_2803, ClueTier.MEDIUM, null, List.of(new WorldPoint(2679, 3110, 0))),\n\t\tnew Clues(\"Crandor south: Dig\", ItemID.CLUE_SCROLL_MEDIUM_23136, ClueTier.MEDIUM, null, List.of(new WorldPoint(2828, 3234, 0))),\n\t\tnew Clues(\"Uzer east: Dig\", ItemID.CLUE_SCROLL_MEDIUM_12035, ClueTier.MEDIUM, null, List.of(new WorldPoint(3510, 3074, 0))),\n\t\tnew Clues(\"DJP: Dig\", ItemID.CLUE_SCROLL_MEDIUM_2813, ClueTier.MEDIUM, null, List.of(new WorldPoint(2643, 3252, 0))),\n\t\tnew Clues(\"BKP: Dig\", ItemID.CLUE_SCROLL_MEDIUM_12041, ClueTier.MEDIUM, null, List.of(new WorldPoint(2322, 3061, 0))),\n\t\tnew Clues(\"Nature Altar north: Dig\", ItemID.CLUE_SCROLL_MEDIUM_7317, ClueTier.MEDIUM, null, List.of(new WorldPoint(2875, 3046, 0))),\n\t\tnew Clues(\"Nature Altar west: Dig\", ItemID.CLUE_SCROLL_MEDIUM_2817, ClueTier.MEDIUM, null, List.of(new WorldPoint(2849, 3033, 0))),\n\t\tnew Clues(\"Crandor north: Dig\", ItemID.CLUE_SCROLL_MEDIUM_2815, ClueTier.MEDIUM, null, List.of(new WorldPoint(2848, 3296, 0))),\n\t\tnew Clues(\"AKS north: Dig\", ItemID.CLUE_SCROLL_MEDIUM_7307, ClueTier.MEDIUM, null, List.of(new WorldPoint(2583, 2990, 0))),\n\t\tnew Clues(\"Lumbridge mill cows: Dig\", ItemID.CLUE_SCROLL_MEDIUM_2825, ClueTier.MEDIUM, null, List.of(new WorldPoint(3179, 3344, 0))),\n\t\tnew Clues(\"Outpost west: Dig\", ItemID.CLUE_SCROLL_MEDIUM_2807, ClueTier.MEDIUM, null, List.of(new WorldPoint(2383, 3370, 0))),\n\t\tnew Clues(\"Exam Centre hill: Dig\", ItemID.CLUE_SCROLL_MEDIUM_12051, ClueTier.MEDIUM, null, List.of(new WorldPoint(3312, 3375, 0))),\n\t\tnew Clues(\"Draynor Manor: Dig\", ItemID.CLUE_SCROLL_MEDIUM_12043, ClueTier.MEDIUM, null, List.of(new WorldPoint(3121, 3384, 0))),\n\t\tnew Clues(\"BKR: Dig\", ItemID.CLUE_SCROLL_MEDIUM_3584, ClueTier.MEDIUM, null, List.of(new WorldPoint(3430, 3388, 0))),\n\t\tnew Clues(\"Lady of the Lake: Dig\", ItemID.CLUE_SCROLL_MEDIUM_2821, ClueTier.MEDIUM, null, List.of(new WorldPoint(2920, 3403, 0))),\n\t\tnew Clues(\"AKS south: Dig\", ItemID.CLUE_SCROLL_MEDIUM_12033, ClueTier.MEDIUM, null, List.of(new WorldPoint(2594, 2899, 0))),\n\t\tnew Clues(\"terrorbirds: Dig\", ItemID.CLUE_SCROLL_MEDIUM_3592, ClueTier.MEDIUM, null, List.of(new WorldPoint(2387, 3435, 0))),\n\t\tnew Clues(\"Baxtorian Falls: Dig\", ItemID.CLUE_SCROLL_MEDIUM_2811, ClueTier.MEDIUM, null, List.of(new WorldPoint(2512, 3467, 0))),\n\t\tnew Clues(\"terrorbirds north: Dig\", ItemID.CLUE_SCROLL_MEDIUM_12045, ClueTier.MEDIUM, null, List.of(new WorldPoint(2381, 3468, 0))),\n\t\tnew Clues(\"Ice Mountain,: Dig\", ItemID.CLUE_SCROLL_MEDIUM_7311, ClueTier.MEDIUM, null, List.of(new WorldPoint(3005, 3475, 0))),\n\t\tnew Clues(\"Bazaar: Dig\", ItemID.CLUE_SCROLL_MEDIUM_28909, ClueTier.MEDIUM, null, List.of(new WorldPoint(1659, 3111, 0))),\n\t\tnew Clues(\"Coal Trucks north: Dig\", ItemID.CLUE_SCROLL_MEDIUM_12049, ClueTier.MEDIUM, null, List.of(new WorldPoint(2585, 3505, 0))),\n\t\tnew Clues(\"Slayer Tower south: Dig\", ItemID.CLUE_SCROLL_MEDIUM_3582, ClueTier.MEDIUM, null, List.of(new WorldPoint(3443, 3515, 0))),\n\t\tnew Clues(\"Grand Tree swamp: Dig\", ItemID.CLUE_SCROLL_MEDIUM_3594, ClueTier.MEDIUM, null, List.of(new WorldPoint(2416, 3516, 0))),\n\t\tnew Clues(\"Slayer Tower south-east: Dig\", ItemID.CLUE_SCROLL_MEDIUM_12053, ClueTier.MEDIUM, null, List.of(new WorldPoint(3429, 3523, 0))),\n\t\tnew Clues(\"Eagles\u0027 Peak: Dig\", ItemID.CLUE_SCROLL_MEDIUM_12047, ClueTier.MEDIUM, null, List.of(new WorldPoint(2363, 3531, 0))),\n\t\tnew Clues(\"Burthorpe pub: Dig\", ItemID.CLUE_SCROLL_MEDIUM_3586, ClueTier.MEDIUM, null, List.of(new WorldPoint(2919, 3535, 0))),\n\t\tnew Clues(\"Fenkenstrain\u0027s Castle: Dig\", ItemID.CLUE_SCROLL_MEDIUM_12037, ClueTier.MEDIUM, null, List.of(new WorldPoint(3548, 3560, 0))),\n\t\tnew Clues(\"Graveyard of Heroes: Dig\", ItemID.CLUE_SCROLL_MEDIUM_19774, ClueTier.MEDIUM, null, List.of(new WorldPoint(1476, 3566, 0))),\n\t\tnew Clues(\"AJR: Dig\", ItemID.CLUE_SCROLL_MEDIUM_7315, ClueTier.MEDIUM, null, List.of(new WorldPoint(2735, 3638, 0))),\n\t\tnew Clues(\"Rellekka garden: Dig\", ItemID.CLUE_SCROLL_MEDIUM_12039, ClueTier.MEDIUM, null, List.of(new WorldPoint(2681, 3653, 0))),\n\t\tnew Clues(\"Farming Guild: Dig\", ItemID.CLUE_SCROLL_MEDIUM_23135, ClueTier.MEDIUM, null, List.of(new WorldPoint(1247, 3726, 0))),\n\t\tnew Clues(\"CIP east: Dig\", ItemID.CLUE_SCROLL_MEDIUM_7305, ClueTier.MEDIUM, null, List.of(new WorldPoint(2537, 3881, 0))),\n\t\tnew Clues(\"Fossil Island island: Dig\", ItemID.CLUE_SCROLL_MEDIUM_23137, ClueTier.MEDIUM, null, List.of(new WorldPoint(3770, 3898, 0))),\n\t\tnew Clues(\"Baraek: Talk\", ItemID.CLUE_SCROLL_MEDIUM_12057, ClueTier.MEDIUM, null, List.of(new WorldPoint(3217, 3434, 0))),\n\t\tnew Clues(\"Saba: Talk\", ItemID.CLUE_SCROLL_MEDIUM_3613, ClueTier.MEDIUM, null, List.of(new WorldPoint(2858, 3577, 0))),\n\t\tnew Clues(\"Captain Tobias: Talk\", ItemID.CLUE_SCROLL_MEDIUM_12061, ClueTier.MEDIUM, null, List.of(new WorldPoint(3026, 3216, 0))),\n\t\tnew Clues(\"Aretha: Talk\", ItemID.CLUE_SCROLL_MEDIUM_19758, ClueTier.MEDIUM, null, List.of(new WorldPoint(1814, 3851, 0))),\n\t\tnew Clues(\"hill giant: Kill\", ItemID.CLUE_SCROLL_MEDIUM_19760, ClueTier.MEDIUM, null, List.of(new WorldPoint(1444, 3613, 0))),\n\t\tnew Clues(\"Canifis clothes: Search\", ItemID.CLUE_SCROLL_MEDIUM_3609, ClueTier.MEDIUM, null, List.of(new WorldPoint(3498, 3507, 0))),\n\t\tnew Clues(\"Jaraah: Talk\", ItemID.CLUE_SCROLL_MEDIUM_3616, ClueTier.MEDIUM, null, List.of(new WorldPoint(3359, 3276, 0))),\n\t\tnew Clues(\"Caroline: Talk\", ItemID.CLUE_SCROLL_MEDIUM_7280, ClueTier.MEDIUM, null, List.of(new WorldPoint(2715, 3302, 0))),\n\t\tnew Clues(\"Oracle: Talk\", ItemID.CLUE_SCROLL_MEDIUM_2851, ClueTier.MEDIUM, null, List.of(new WorldPoint(3013, 3501, 0))),\n\t\tnew Clues(\"Father Aereck: Talk\", ItemID.CLUE_SCROLL_MEDIUM_19746, ClueTier.MEDIUM, null, List.of(new WorldPoint(3242, 3207, 0))),\n\t\tnew Clues(\"Charlie the Tramp: Talk\", ItemID.CLUE_SCROLL_MEDIUM_19750, ClueTier.MEDIUM, null, List.of(new WorldPoint(3209, 3392, 0))),\n\t\tnew Clues(\"Gloria: Talk\", ItemID.CLUE_SCROLL_MEDIUM_28908, ClueTier.MEDIUM, null, List.of(new WorldPoint(1802, 9504, 0))),\n\t\tnew Clues(\"Ourania Cave: Dig\", ItemID.CLUE_SCROLL_MEDIUM_7290, ClueTier.MEDIUM, null, List.of(new WorldPoint(2454, 3230, 0))),\n\t\tnew Clues(\"Brimstail: Talk\", ItemID.CLUE_SCROLL_MEDIUM_3612, ClueTier.MEDIUM, null, List.of(new WorldPoint(2407, 9816, 0))),\n\t\tnew Clues(\"Ali the Kebab seller: Talk\", ItemID.CLUE_SCROLL_MEDIUM_19768, ClueTier.MEDIUM, null, List.of(new WorldPoint(3354, 2974, 0))),\n\t\tnew Clues(\"Tai Bwo Wannai: Emote\", ItemID.CLUE_SCROLL_MEDIUM_10260, ClueTier.MEDIUM, null, List.of(new WorldPoint(2803, 3073, 0))),\n\t\tnew Clues(\"Digsite winch: Emote\", ItemID.CLUE_SCROLL_MEDIUM_10274, ClueTier.MEDIUM, null, List.of(new WorldPoint(3370, 3425, 0))),\n\t\tnew Clues(\"Shayzien Combat Ring: Emote\", ItemID.CLUE_SCROLL_MEDIUM_19776, ClueTier.MEDIUM, null, List.of(new WorldPoint(1543, 3623, 0))),\n\t\tnew Clues(\"Chemist\u0027s house: Dig\", ItemID.CLUE_SCROLL_MEDIUM_3602, ClueTier.MEDIUM, null, List.of(new WorldPoint(2924, 3209, 0))),\n\t\tnew Clues(\"CJR south-west: Dig\", ItemID.CLUE_SCROLL_MEDIUM_7294, ClueTier.MEDIUM, null, List.of(new WorldPoint(2667, 3562, 0))),\n\t\tnew Clues(\"Madame Caldarium: Talk\", ItemID.CLUE_SCROLL_MEDIUM_23133, ClueTier.MEDIUM, null, List.of(new WorldPoint(2553, 2868, 0))),\n\t\tnew Clues(\"Nicholas: Talk\", ItemID.CLUE_SCROLL_MEDIUM_23131, ClueTier.MEDIUM, null, List.of(new WorldPoint(1841, 3803, 0))),\n\t\tnew Clues(\"Barbarian Agility: Emote\", ItemID.CLUE_SCROLL_MEDIUM_10264, ClueTier.MEDIUM, null, List.of(new WorldPoint(2552, 3556, 0))),\n\t\tnew Clues(\"Edgeville General store: Emote\", ItemID.CLUE_SCROLL_MEDIUM_12031, ClueTier.MEDIUM, null, List.of(new WorldPoint(3080, 3509, 0))),\n\t\tnew Clues(\"Ogre Pen: Emote\", ItemID.CLUE_SCROLL_MEDIUM_10272, ClueTier.MEDIUM, null, List.of(new WorldPoint(2527, 3375, 0))),\n\t\tnew Clues(\"Seers court house: Emote\", ItemID.CLUE_SCROLL_MEDIUM_12025, ClueTier.MEDIUM, null, List.of(new WorldPoint(2735, 3469, 0))),\n\t\tnew Clues(\"Mount Karuulm north: Emote\", ItemID.CLUE_SCROLL_MEDIUM_23046, ClueTier.MEDIUM, null, List.of(new WorldPoint(1306, 3839, 0))),\n\t\tnew Clues(\"Catherby Archery shop: Emote\", ItemID.CLUE_SCROLL_MEDIUM_10276, ClueTier.MEDIUM, null, List.of(new WorldPoint(2823, 3443, 0))),\n\t\tnew Clues(\"Draynor Village jail: Emote\", ItemID.CLUE_SCROLL_MEDIUM_19780, ClueTier.MEDIUM, null, List.of(new WorldPoint(3128, 3245, 0))),\n\t\tnew Clues(\"Catherby beach: Emote\", ItemID.CLUE_SCROLL_MEDIUM_12027, ClueTier.MEDIUM, null, List.of(new WorldPoint(2853, 3424, 0))),\n\t\tnew Clues(\"Gnome Agility: Emote\", ItemID.CLUE_SCROLL_MEDIUM_10266, ClueTier.MEDIUM, null, List.of(new WorldPoint(2473, 3420, 0))),\n\t\tnew Clues(\"Brundt: Talk\", ItemID.CLUE_SCROLL_MEDIUM_7274, ClueTier.MEDIUM, null, List.of(new WorldPoint(2658, 3670, 0))),\n\t\tnew Clues(\"Shantay Pass: Emote\", ItemID.CLUE_SCROLL_MEDIUM_10278, ClueTier.MEDIUM, null, List.of(new WorldPoint(3304, 3124, 0))),\n\t\tnew Clues(\"Canifis centre: Emote\", ItemID.CLUE_SCROLL_MEDIUM_10254, ClueTier.MEDIUM, null, List.of(new WorldPoint(3492, 3488, 0))),\n\t\tnew Clues(\"Lumbridge Swamp Caves: Emote\", ItemID.CLUE_SCROLL_MEDIUM_12021, ClueTier.MEDIUM, null, List.of(new WorldPoint(3168, 9571, 0))),\n\t\tnew Clues(\"Captain Khaled: Talk\", ItemID.CLUE_SCROLL_MEDIUM_19766, ClueTier.MEDIUM, null, List.of(new WorldPoint(1845, 3754, 0))),\n\t\tnew Clues(\"Zoo keeper: Talk\", ItemID.CLUE_SCROLL_MEDIUM_2845, ClueTier.MEDIUM, null, List.of(new WorldPoint(2613, 3269, 0))),\n\t\tnew Clues(\"Lowe: Talk\", ItemID.CLUE_SCROLL_MEDIUM_2847, ClueTier.MEDIUM, null, List.of(new WorldPoint(3233, 3423, 0))),\n\t\tnew Clues(\"Ardougne Monastery: Search\", ItemID.CLUE_SCROLL_MEDIUM_3610, ClueTier.MEDIUM, null, List.of(new WorldPoint(2614, 3204, 0))),\n\t\tnew Clues(\"Otto: Talk\", ItemID.CLUE_SCROLL_MEDIUM_12055, ClueTier.MEDIUM, null, List.of(new WorldPoint(2501, 3487, 0))),\n\t\tnew Clues(\"King Bolren: Talk\", ItemID.CLUE_SCROLL_MEDIUM_2857, ClueTier.MEDIUM, null, List.of(new WorldPoint(2541, 3170, 0))),\n\t\tnew Clues(\"Gabooty: Talk\", ItemID.CLUE_SCROLL_MEDIUM_7276, ClueTier.MEDIUM, null, List.of(new WorldPoint(2790, 3066, 0))),\n\t\tnew Clues(\"Drezel: Talk\", ItemID.CLUE_SCROLL_MEDIUM_19772, ClueTier.MEDIUM, null, List.of(new WorldPoint(3440, 9895, 0))),\n\t\tnew Clues(\"Penda: Kill\", ItemID.CLUE_SCROLL_MEDIUM_3607, ClueTier.MEDIUM, null, List.of(new WorldPoint(2909, 3539, 0))),\n\t\tnew Clues(\"Rellekka guard: Kill\", ItemID.CLUE_SCROLL_MEDIUM_7298, ClueTier.MEDIUM, null, List.of(new WorldPoint(2643, 3677, 0))),\n\t\tnew Clues(\"Luthas: Talk\", ItemID.CLUE_SCROLL_MEDIUM_2858, ClueTier.MEDIUM, null, List.of(new WorldPoint(2938, 3152, 0))),\n\t\tnew Clues(\"Eohric: Talk\", ItemID.CLUE_SCROLL_MEDIUM_12071, ClueTier.MEDIUM, null, List.of(new WorldPoint(2900, 3565, 0))),\n\t\tnew Clues(\"Jethick: Talk\", ItemID.CLUE_SCROLL_MEDIUM_7278, ClueTier.MEDIUM, null, List.of(new WorldPoint(2541, 3305, 0))),\n\t\tnew Clues(\"Horphis: Talk\", ItemID.CLUE_SCROLL_MEDIUM_19742, ClueTier.MEDIUM, null, List.of(new WorldPoint(1639, 3812, 0))),\n\t\tnew Clues(\"Ironman tutor: Talk\", ItemID.CLUE_SCROLL_MEDIUM_19770, ClueTier.MEDIUM, null, List.of(new WorldPoint(3227, 3227, 0))),\n\t\tnew Clues(\"Marisi: Talk\", ItemID.CLUE_SCROLL_MEDIUM_19756, ClueTier.MEDIUM, null, List.of(new WorldPoint(1737, 3557, 0))),\n\t\tnew Clues(\"Dominic Onion: Talk\", ItemID.CLUE_SCROLL_MEDIUM_19736, ClueTier.MEDIUM, null, List.of(new WorldPoint(2609, 3116, 0))),\n\t\tnew Clues(\"Nieve/Steve: Talk\", ItemID.CLUE_SCROLL_MEDIUM_12059, ClueTier.MEDIUM, null, List.of(new WorldPoint(2432, 3423, 0))),\n\t\tnew Clues(\"Fycie: Talk\", ItemID.CLUE_SCROLL_MEDIUM_3618, ClueTier.MEDIUM, null, List.of(new WorldPoint(2630, 2997, 0))),\n\t\tnew Clues(\"chicken: Kill\", ItemID.CLUE_SCROLL_MEDIUM_2837, ClueTier.MEDIUM, null, List.of(new WorldPoint(2709, 3478, 0))),\n\t\tnew Clues(\"guard dog: Kill\", ItemID.CLUE_SCROLL_MEDIUM_2833, ClueTier.MEDIUM, null, List.of(new WorldPoint(2635, 3313, 0))),\n\t\tnew Clues(\"Ardougne guard: Kill\", ItemID.CLUE_SCROLL_MEDIUM_2835, ClueTier.MEDIUM, null, List.of(new WorldPoint(2661, 3306, 0))),\n\t\tnew Clues(\"Yanille man: Kill\", ItemID.CLUE_SCROLL_MEDIUM_2839, ClueTier.MEDIUM, null, List.of(new WorldPoint(2594, 3105, 0))),\n\t\tnew Clues(\"Tai Bwo Wannai: Search\", ItemID.CLUE_SCROLL_MEDIUM_3604, ClueTier.MEDIUM, null, List.of(new WorldPoint(2800, 3074, 0))),\n\t\tnew Clues(\"Yanille bank: Emote\", ItemID.CLUE_SCROLL_MEDIUM_10268, ClueTier.MEDIUM, null, List.of(new WorldPoint(2610, 3092, 0))),\n\t\tnew Clues(\"TzHaar Sword shop: Emote\", ItemID.CLUE_SCROLL_MEDIUM_12029, ClueTier.MEDIUM, null, List.of(new WorldPoint(2477, 5146, 0))),\n\t\tnew Clues(\"Sir Kay: Talk\", ItemID.CLUE_SCROLL_MEDIUM_12069, ClueTier.MEDIUM, null, List.of(new WorldPoint(2760, 3496, 0))),\n\t\tnew Clues(\"Metla: Talk\", ItemID.CLUE_SCROLL_MEDIUM_28907, ClueTier.MEDIUM, null, List.of(new WorldPoint(1742, 2977, 0))),\n\t\tnew Clues(\"King Roald: Talk\", ItemID.CLUE_SCROLL_MEDIUM_7284, ClueTier.MEDIUM, null, List.of(new WorldPoint(3220, 3476, 0))),\n\t\tnew Clues(\"Kaylee: Talk\", ItemID.CLUE_SCROLL_MEDIUM_12065, ClueTier.MEDIUM, null, List.of(new WorldPoint(2957, 3370, 0))),\n\t\tnew Clues(\"Gallow: Talk\", ItemID.CLUE_SCROLL_MEDIUM_19738, ClueTier.MEDIUM, null, List.of(new WorldPoint(1805, 3566, 0))),\n\t\tnew Clues(\"Ardougne Monastery: Kill\", ItemID.CLUE_SCROLL_MEDIUM_2831, ClueTier.MEDIUM, null, List.of(new WorldPoint(2615, 3209, 0))),\n\t\tnew Clues(\"Femi: Talk\", ItemID.CLUE_SCROLL_MEDIUM_3611, ClueTier.MEDIUM, null, List.of(new WorldPoint(2461, 3382, 0))),\n\t\tnew Clues(\"CIP south-east: Dig\", ItemID.CLUE_SCROLL_MEDIUM_7286, ClueTier.MEDIUM, null, List.of(new WorldPoint(2536, 3865, 0))),\n\t\tnew Clues(\"BIP south: Dig\", ItemID.CLUE_SCROLL_MEDIUM_7288, ClueTier.MEDIUM, null, List.of(new WorldPoint(3434, 3266, 0))),\n\t\tnew Clues(\"Edmond: Talk\", ItemID.CLUE_SCROLL_MEDIUM_7282, ClueTier.MEDIUM, null, List.of(new WorldPoint(2566, 3332, 0))),\n\t\tnew Clues(\"DJP west: Dig\", ItemID.CLUE_SCROLL_MEDIUM_3599, ClueTier.MEDIUM, null, List.of(new WorldPoint(2650, 3231, 0))),\n\t\tnew Clues(\"Cook: Talk\", ItemID.CLUE_SCROLL_MEDIUM_2843, ClueTier.MEDIUM, null, List.of(new WorldPoint(3208, 3213, 0))),\n\t\tnew Clues(\"Captain Ginea: Talk\", ItemID.CLUE_SCROLL_MEDIUM_19734, ClueTier.MEDIUM, null, List.of(new WorldPoint(1504, 3632, 0))),\n\t\tnew Clues(\"Flax keeper: Talk\", ItemID.CLUE_SCROLL_MEDIUM_19752, ClueTier.MEDIUM, null, List.of(new WorldPoint(2744, 3444, 0))),\n\t\tnew Clues(\"Party Pete: Talk\", ItemID.CLUE_SCROLL_MEDIUM_2856, ClueTier.MEDIUM, null, List.of(new WorldPoint(3047, 3376, 0))),\n\t\tnew Clues(\"Mausoleum: Emote\", ItemID.CLUE_SCROLL_MEDIUM_10256, ClueTier.MEDIUM, null, List.of(new WorldPoint(3504, 3576, 0))),\n\t\tnew Clues(\"Wizards\u0027 Tower: Kill\", ItemID.CLUE_SCROLL_MEDIUM_7301, ClueTier.MEDIUM, null, List.of(new WorldPoint(3109, 3164, 0))),\n\t\tnew Clues(\"Professor Gracklebone: Talk\", ItemID.CLUE_SCROLL_MEDIUM_19762, ClueTier.MEDIUM, null, List.of(new WorldPoint(1625, 3802, 0))),\n\t\tnew Clues(\"Squire: Talk\", ItemID.CLUE_SCROLL_MEDIUM_19754, ClueTier.MEDIUM, null, List.of(new WorldPoint(2977, 3343, 0))),\n\t\tnew Clues(\"Karim: Talk\", ItemID.CLUE_SCROLL_MEDIUM_2849, ClueTier.MEDIUM, null, List.of(new WorldPoint(3273, 3181, 0))),\n\t\tnew Clues(\"Clerris: Talk\", ItemID.CLUE_SCROLL_MEDIUM_19740, ClueTier.MEDIUM, null, List.of(new WorldPoint(1761, 3850, 0))),\n\t\tnew Clues(\"Taria: Talk\", ItemID.CLUE_SCROLL_MEDIUM_12063, ClueTier.MEDIUM, null, List.of(new WorldPoint(2940, 3223, 0))),\n\t\tnew Clues(\"Dunstan: Talk\", ItemID.CLUE_SCROLL_MEDIUM_19748, ClueTier.MEDIUM, null, List.of(new WorldPoint(2919, 3574, 0))),\n\t\tnew Clues(\"Hosidius apples: Search\", ItemID.CLUE_SCROLL_MEDIUM_25783, ClueTier.MEDIUM, null, List.of(new WorldPoint(1718, 3626, 0))),\n\t\tnew Clues(\"Brimhaven pirate: Kill\", ItemID.CLUE_SCROLL_MEDIUM_3605, ClueTier.MEDIUM, null, List.of(new WorldPoint(2794, 3185, 0))),\n\t\tnew Clues(\"Catherby bank: Emote\", ItemID.CLUE_SCROLL_MEDIUM_12023, ClueTier.MEDIUM, null, List.of(new WorldPoint(2808, 3440, 0))),\n\t\tnew Clues(\"Draynor bank south: Dig\", ItemID.CLUE_SCROLL_MEDIUM_2827, ClueTier.MEDIUM, null, List.of(new WorldPoint(3092, 3226, 0))),\n\t\tnew Clues(\"ALP south-east: Dig\", ItemID.CLUE_SCROLL_MEDIUM_7292, ClueTier.MEDIUM, null, List.of(new WorldPoint(2578, 3597, 0))),\n\t\tnew Clues(\"Donovan: Talk\", ItemID.CLUE_SCROLL_MEDIUM_2855, ClueTier.MEDIUM, null, List.of(new WorldPoint(2743, 3578, 0))),\n\t\tnew Clues(\"Hajedy: Talk\", ItemID.CLUE_SCROLL_MEDIUM_2848, ClueTier.MEDIUM, null, List.of(new WorldPoint(2779, 3211, 0))),\n\t\tnew Clues(\"Kangai Mau: Talk\", ItemID.CLUE_SCROLL_MEDIUM_3617, ClueTier.MEDIUM, null, List.of(new WorldPoint(2791, 3183, 0))),\n\t\tnew Clues(\"Roavar: Talk\", ItemID.CLUE_SCROLL_MEDIUM_3615, ClueTier.MEDIUM, null, List.of(new WorldPoint(3494, 3474, 0))),\n\t\tnew Clues(\"Uglug Nar: Talk\", ItemID.CLUE_SCROLL_MEDIUM_2841, ClueTier.MEDIUM, null, List.of(new WorldPoint(2444, 3049, 0))),\n\t\tnew Clues(\"Ulizius: Talk\", ItemID.CLUE_SCROLL_MEDIUM_3614, ClueTier.MEDIUM, null, List.of(new WorldPoint(3444, 3461, 0))),\n\t\tnew Clues(\"Gnome ball ref: Talk\", ItemID.CLUE_SCROLL_MEDIUM_2853, ClueTier.MEDIUM, null, List.of(new WorldPoint(2386, 3487, 0))),\n\t\tnew Clues(\"Barbarian Village: Emote\", ItemID.CLUE_SCROLL_MEDIUM_10258, ClueTier.MEDIUM, null, List.of(new WorldPoint(3105, 3420, 0))),\n\t\tnew Clues(\"Dockmaster: Talk\", ItemID.CLUE_SCROLL_MEDIUM_19744, ClueTier.MEDIUM, null, List.of(new WorldPoint(1822, 3739, 0))),\n\t\tnew Clues(\"Hickton: Talk\", ItemID.CLUE_SCROLL_MEDIUM_12067, ClueTier.MEDIUM, null, List.of(new WorldPoint(2822, 3442, 0))),\n\t\tnew Clues(\"ALS crate: Search\", ItemID.CLUE_SCROLL_MEDIUM_3598, ClueTier.MEDIUM, null, List.of(new WorldPoint(2658, 3488, 0))),\n\t\tnew Clues(\"Clock Tower: Search\", ItemID.CLUE_SCROLL_MEDIUM_3601, ClueTier.MEDIUM, null, List.of(new WorldPoint(2565, 3248, 0))),\n\t\tnew Clues(\"Barbarian: Kill\", ItemID.CLUE_SCROLL_MEDIUM_7296, ClueTier.MEDIUM, null, List.of(new WorldPoint(3082, 3419, 0))),\n\t\tnew Clues(\"Observatory: Emote\", ItemID.CLUE_SCROLL_MEDIUM_10270, ClueTier.MEDIUM, null, List.of(new WorldPoint(2439, 3161, 0))),\n\t\tnew Clues(\"Ranging Guild: Search\", ItemID.CLUE_SCROLL_MEDIUM_7304, ClueTier.MEDIUM, null, List.of(new WorldPoint(2671, 3437, 0))),\n\t\tnew Clues(\"Desert Mining Camp: Search\", ItemID.CLUE_SCROLL_MEDIUM_7303, ClueTier.MEDIUM, null, List.of(new WorldPoint(3289, 3022, 0))),\n\t\tnew Clues(\"Unobtainable\", ItemID.CLUE_SCROLL_MEDIUM_2829, ClueTier.MEDIUM, null, List.of(new WorldPoint(2702, 3429, 0))),\n\t\tnew Clues(\"Fishing Platform: Serach\", ItemID.CLUE_SCROLL_MEDIUM_7300, ClueTier.MEDIUM, null, List.of(new WorldPoint(2764, 3273, 0))),\n\t\tnew Clues(\"Drunken soldier: Talk\", ItemID.CLUE_SCROLL_MEDIUM_25784, ClueTier.MEDIUM, null, List.of(new WorldPoint(1551, 3565, 0))),\n\t\tnew Clues(\"Crafting Guild west: Dig\", ItemID.CLUE_SCROLL_MEDIUM_3596, ClueTier.MEDIUM, null, List.of(new WorldPoint(2907, 3295, 0))),\n\t\tnew Clues(\"Wizard Traiborn: Talk\", ItemID.CLUE_SCROLL_MEDIUM_19764, ClueTier.MEDIUM, null, List.of(new WorldPoint(3112, 3162, 0))),\n\t\tnew Clues(\"Castle Wars: Emote\", ItemID.CLUE_SCROLL_MEDIUM_10262, ClueTier.MEDIUM, null, List.of(new WorldPoint(2440, 3092, 0))),\n\t\tnew Clues(\"Arceuus Library: Emote\", ItemID.CLUE_SCROLL_MEDIUM_19778, ClueTier.MEDIUM, null, List.of(new WorldPoint(1632, 3807, 0))),\n\t\tnew Clues(\"Song: Karamja Jam\", ItemID.CLUE_SCROLL_MEDIUM_23138, ClueTier.MEDIUM, null, List.of(new WorldPoint(2990, 3384, 0))),\n\t\tnew Clues(\"Song: Faerie\", ItemID.CLUE_SCROLL_MEDIUM_23139, ClueTier.MEDIUM, null, List.of(new WorldPoint(2990, 3384, 0))),\n\t\tnew Clues(\"Song: Forgotten\", ItemID.CLUE_SCROLL_MEDIUM_23140, ClueTier.MEDIUM, null, List.of(new WorldPoint(2990, 3384, 0))),\n\t\tnew Clues(\"Song: Catch Me If You Can\", ItemID.CLUE_SCROLL_MEDIUM_23141, ClueTier.MEDIUM, null, List.of(new WorldPoint(2990, 3384, 0))),\n\t\tnew Clues(\"Song: Cave of Beasts\", ItemID.CLUE_SCROLL_MEDIUM_23142, ClueTier.MEDIUM, null, List.of(new WorldPoint(2990, 3384, 0))),\n\t\tnew Clues(\"Song: Devils May Care\", ItemID.CLUE_SCROLL_MEDIUM_23143, ClueTier.MEDIUM, null, List.of(new WorldPoint(2990, 3384, 0))),\n\t\tnew Clues(\"Twilight Temple: Emote\", ItemID.CLUE_SCROLL_MEDIUM_29857, ClueTier.MEDIUM, null, List.of(new WorldPoint(1672, 3284, 0))),\n\t\tnew Clues(\"Proudspire river: Emote\", ItemID.CLUE_SCROLL_MEDIUM_29858, ClueTier.MEDIUM, null, List.of(new WorldPoint(1626, 3241, 0))),\n\t\tnew Clues(\"Teicuh: Talk\", ItemID.CLUE_SCROLL_MEDIUM_30933, ClueTier.MEDIUM, null, List.of(new WorldPoint(1212, 3119, 0))),\n\t\tnew Clues(\"Gloomthorn crate: Search\", ItemID.CLUE_SCROLL_MEDIUM_30935, ClueTier.MEDIUM, null, List.of(new WorldPoint(1388, 3216, 0))),\n\t\tnew Clues(\"Torgan: Talk\", ItemID.CLUE_SCROLL_MEDIUM_31274, ClueTier.MEDIUM, null, List.of(new WorldPoint(3143, 2423, 0))),\n\t\tnew Clues(\"Great Conch: Dig\", ItemID.CLUE_SCROLL_MEDIUM_31275, ClueTier.MEDIUM, null, List.of(new WorldPoint(3183, 2453, 0))),\n\t\tnew Clues(\"6859\", ItemID.CHALLENGE_SCROLL_MEDIUM, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint( 2444, 3049, 0))),\n\t\tnew Clues(\"9\", ItemID.CHALLENGE_SCROLL_MEDIUM_2844, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(3208, 3213, 0))),\n\t\tnew Clues(\"51\", ItemID.CHALLENGE_SCROLL_MEDIUM_2846, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(2613, 3269, 0))),\n\t\tnew Clues(\"5\", ItemID.CHALLENGE_SCROLL_MEDIUM_2850, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(3273, 3181, 0))),\n\t\tnew Clues(\"48\", ItemID.CHALLENGE_SCROLL_MEDIUM_2852, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(3013, 3501, 0))),\n\t\tnew Clues(\"5096\", ItemID.CHALLENGE_SCROLL_MEDIUM_2854, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(2386, 3487, 0))),\n\t\tnew Clues(\"5\", ItemID.CHALLENGE_SCROLL_MEDIUM_7275, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(2658, 3670, 0))),\n\t\tnew Clues(\"11\", ItemID.CHALLENGE_SCROLL_MEDIUM_7277, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(2790, 3066, 0))),\n\t\tnew Clues(\"38\", ItemID.CHALLENGE_SCROLL_MEDIUM_7279, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(2541, 3305, 0))),\n\t\tnew Clues(\"11\", ItemID.CHALLENGE_SCROLL_MEDIUM_7281, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(2715, 3302, 0))),\n\t\tnew Clues(\"3\", ItemID.CHALLENGE_SCROLL_MEDIUM_7283, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(2566, 3332, 0))),\n\t\tnew Clues(\"24\", ItemID.CHALLENGE_SCROLL_MEDIUM_7285, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(3220, 3476, 0))),\n\t\tnew Clues(\"2\", ItemID.CHALLENGE_SCROLL_MEDIUM_12056, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(2501, 3487, 0))),\n\t\tnew Clues(\"5\", ItemID.CHALLENGE_SCROLL_MEDIUM_12058, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(3217, 3434, 0))),\n\t\tnew Clues(\"2\", ItemID.CHALLENGE_SCROLL_MEDIUM_12060, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(2432, 3423, 0))),\n\t\tnew Clues(\"6\", ItemID.CHALLENGE_SCROLL_MEDIUM_12062, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(3026, 3216, 0))),\n\t\tnew Clues(\"7\", ItemID.CHALLENGE_SCROLL_MEDIUM_12064, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(2940, 3223, 0))),\n\t\tnew Clues(\"18\", ItemID.CHALLENGE_SCROLL_MEDIUM_12066, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(2957, 3370, 0))),\n\t\tnew Clues(\"2\", ItemID.CHALLENGE_SCROLL_MEDIUM_12068, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(2822, 3442, 0))),\n\t\tnew Clues(\"6\", ItemID.CHALLENGE_SCROLL_MEDIUM_12070, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(2760, 3496, 0))),\n\t\tnew Clues(\"36\", ItemID.CHALLENGE_SCROLL_MEDIUM_12072, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(2900, 3565, 0))),\n\t\tnew Clues(\"113\", ItemID.CHALLENGE_SCROLL_MEDIUM_19735, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(1504, 3632, 0))),\n\t\tnew Clues(\"9500\", ItemID.CHALLENGE_SCROLL_MEDIUM_19737, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(2609, 3116, 0))),\n\t\tnew Clues(\"12\", ItemID.CHALLENGE_SCROLL_MEDIUM_19739, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(1805, 3566, 0))),\n\t\tnew Clues(\"738\", ItemID.CHALLENGE_SCROLL_MEDIUM_19741, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(1761, 3850, 0))),\n\t\tnew Clues(\"1\", ItemID.CHALLENGE_SCROLL_MEDIUM_19743, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(1639, 3812, 0))),\n\t\tnew Clues(\"5\", ItemID.CHALLENGE_SCROLL_MEDIUM_19745, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(1822, 3739, 0))),\n\t\tnew Clues(\"19 or 20\", ItemID.CHALLENGE_SCROLL_MEDIUM_19747, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(3242, 3207, 0))),\n\t\tnew Clues(\"8\", ItemID.CHALLENGE_SCROLL_MEDIUM_19749, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(2919, 3574, 0))),\n\t\tnew Clues(\"0\", ItemID.CHALLENGE_SCROLL_MEDIUM_19751, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(3209, 3392, 0))),\n\t\tnew Clues(\"676\", ItemID.CHALLENGE_SCROLL_MEDIUM_19753, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(2744, 3444, 0))),\n\t\tnew Clues(\"654\", ItemID.CHALLENGE_SCROLL_MEDIUM_19755, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(2977, 3343, 0))),\n\t\tnew Clues(\"5\", ItemID.CHALLENGE_SCROLL_MEDIUM_19757, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(1737, 3557, 0))),\n\t\tnew Clues(\"2\", ItemID.CHALLENGE_SCROLL_MEDIUM_19759, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(1814, 3851, 0))),\n\t\tnew Clues(\"9\", ItemID.CHALLENGE_SCROLL_MEDIUM_19763, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(1625, 3802, 0))),\n\t\tnew Clues(\"3150\", ItemID.CHALLENGE_SCROLL_MEDIUM_19765, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(3112, 3162, 0))),\n\t\tnew Clues(\"5\", ItemID.CHALLENGE_SCROLL_MEDIUM_19767, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(1845, 3754, 0))),\n\t\tnew Clues(\"399\", ItemID.CHALLENGE_SCROLL_MEDIUM_19769, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(3354, 2974, 0))),\n\t\tnew Clues(\"666\", ItemID.CHALLENGE_SCROLL_MEDIUM_19771, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(3227, 3227, 0))),\n\t\tnew Clues(\"7\", ItemID.CHALLENGE_SCROLL_MEDIUM_19773, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(3440, 9895, 0))),\n\t\tnew Clues(\"4\", ItemID.CHALLENGE_SCROLL_MEDIUM_23132, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(1841, 3803, 0))),\n\t\tnew Clues(\"6\", ItemID.CHALLENGE_SCROLL_MEDIUM_23134, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(2553, 2868, 0))),\n\t\tnew Clues(\"598\", ItemID.CHALLENGE_SCROLL_MEDIUM_25785, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(1551, 3565, 0))),\n\t\tnew Clues(\"4097\", ItemID.CHALLENGE_SCROLL_MEDIUM_30934, ClueTier.MEDIUM_CHALLENGE, null, List.of(new WorldPoint(1212, 3119, 0))),\n\t\tnew Clues(\"Varrock church: Search\", ItemID.KEY_MEDIUM, ClueTier.MEDIUM_KEY, null, List.of(new WorldPoint(3256, 3487, 0))),\n\t\tnew Clues(\"Ardougne pub: Search\", ItemID.KEY_MEDIUM_2834, ClueTier.MEDIUM_KEY, null, List.of(new WorldPoint(2574, 3326, 1))),\n\t\tnew Clues(\"Jerico\u0027s house: Search\", ItemID.KEY_MEDIUM_2836, ClueTier.MEDIUM_KEY, null, List.of(new WorldPoint(2611, 3324, 1))),\n\t\tnew Clues(\"Seers\u0027 Village house: Sarch\", ItemID.KEY_MEDIUM_2838, ClueTier.MEDIUM_KEY, null, List.of(new WorldPoint(2709, 3478, 0))),\n\t\tnew Clues(\"Yanille house: Search\", ItemID.KEY_MEDIUM_2840, ClueTier.MEDIUM_KEY, null, List.of(new WorldPoint(2593, 3108, 1))),\n\t\tnew Clues(\"Brimhaven south-east: Search\", ItemID.KEY_MEDIUM_3606, ClueTier.MEDIUM_KEY, null, List.of(new WorldPoint(2809, 3165, 1))),\n\t\tnew Clues(\"Dunstan\u0027s house: Search\", ItemID.KEY_MEDIUM_3608, ClueTier.MEDIUM_KEY, null, List.of(new WorldPoint(2921, 3577, 0))),\n\t\tnew Clues(\"Exam Centre: Search\", ItemID.KEY_MEDIUM_7297, ClueTier.MEDIUM_KEY, null, List.of(new WorldPoint(3353, 3332, 0))),\n\t\tnew Clues(\"Lighthouse: Search\", ItemID.KEY_MEDIUM_7299, ClueTier.MEDIUM_KEY, null, List.of(new WorldPoint(2512, 3641, 1))),\n\t\tnew Clues(\"Wizards\u0027 Tower: Search\", ItemID.KEY_MEDIUM_7302, ClueTier.MEDIUM_KEY, null, List.of(new WorldPoint(3116, 9562, 0))),\n\t\tnew Clues(\"Osten\u0027s clothing: Search\", ItemID.KEY_MEDIUM_19761, ClueTier.MEDIUM_KEY, null, List.of(new WorldPoint(1506, 3590, 2))),\n\t\tnew Clues(\"Tyras Camp: Dig\", ItemID.CLUE_SCROLL_HARD_3560, ClueTier.HARD, null, List.of(new WorldPoint(2209, 3161, 0))),\n\t\tnew Clues(\"Iorwerth Camp south: Dig\", ItemID.CLUE_SCROLL_HARD_3562, ClueTier.HARD, null, List.of(new WorldPoint(2181, 3206, 0))),\n\t\tnew Clues(\"CLP: Dig\", ItemID.CLUE_SCROLL_HARD_12554, ClueTier.HARD, null, List.of(new WorldPoint(3081, 3209, 0))),\n\t\tnew Clues(\"Behind Emir\u0027s Arena: Dig\", ItemID.CLUE_SCROLL_HARD_3554, ClueTier.HARD, null, List.of(new WorldPoint(3399, 3246, 0))),\n\t\tnew Clues(\"AIR: Dig\", ItemID.CLUE_SCROLL_HARD_12558, ClueTier.HARD, null, List.of(new WorldPoint(2699, 3251, 0))),\n\t\tnew Clues(\"Burgh de Rott north-east 1: Dig\", ItemID.CLUE_SCROLL_HARD_19844, ClueTier.HARD, null, List.of(new WorldPoint(3546, 3251, 0))),\n\t\tnew Clues(\"Burgh de Rott north-east 2: Dig\", ItemID.CLUE_SCROLL_HARD_12562, ClueTier.HARD, null, List.of(new WorldPoint(3544, 3256, 0))),\n\t\tnew Clues(\"Crandor: Dig\", ItemID.CLUE_SCROLL_HARD_12560, ClueTier.HARD, null, List.of(new WorldPoint(2841, 3267, 0))),\n\t\tnew Clues(\"Bedabin Camp: Dig\", ItemID.CLUE_SCROLL_HARD_3552, ClueTier.HARD, null, List.of(new WorldPoint(3168, 3041, 0))),\n\t\tnew Clues(\"Gu\u0027Tanoth: Dig\", ItemID.CLUE_SCROLL_HARD_3546, ClueTier.HARD, null, List.of(new WorldPoint(2542, 3031, 0))),\n\t\tnew Clues(\"Gu\u0027Tanoth island: Dig\", ItemID.CLUE_SCROLL_HARD_3548, ClueTier.HARD, null, List.of(new WorldPoint(2581, 3030, 0))),\n\t\tnew Clues(\"DKP Ship yard: Dig\", ItemID.CLUE_SCROLL_HARD_3538, ClueTier.HARD, null, List.of(new WorldPoint(2961, 3024, 0))),\n\t\tnew Clues(\"Arandar pass: Dig\", ItemID.CLUE_SCROLL_HARD_7256, ClueTier.HARD, null, List.of(new WorldPoint(2339, 3311, 0))),\n\t\tnew Clues(\"Unobtainable: Dig\", ItemID.CLUE_SCROLL_HARD_3550, ClueTier.HARD, null, List.of(new WorldPoint(3288, 2982, 0))),\n\t\tnew Clues(\"Nature Spirit\u0027s grotto: Dig\", ItemID.CLUE_SCROLL_HARD_3542, ClueTier.HARD, null, List.of(new WorldPoint(3440, 3341, 0))),\n\t\tnew Clues(\"Cairn Isle: Dig\", ItemID.CLUE_SCROLL_HARD_3530, ClueTier.HARD, null, List.of(new WorldPoint(2763, 2974, 0))),\n\t\tnew Clues(\"Desert Bandit Camp: Dig\", ItemID.CLUE_SCROLL_HARD_7258, ClueTier.HARD, null, List.of(new WorldPoint(3138, 2969, 0))),\n\t\tnew Clues(\"Karamja south-east: Dig\", ItemID.CLUE_SCROLL_HARD_3540, ClueTier.HARD, null, List.of(new WorldPoint(2924, 2963, 0))),\n\t\tnew Clues(\"Kharazi Jungle pool: Dig\", ItemID.CLUE_SCROLL_HARD_3534, ClueTier.HARD, null, List.of(new WorldPoint(2838, 2914, 0))),\n\t\tnew Clues(\"BKR: Dig\", ItemID.CLUE_SCROLL_HARD_3544, ClueTier.HARD, null, List.of(new WorldPoint(3441, 3419, 0))),\n\t\tnew Clues(\"Kharazi Jungle south-east: Dig\", ItemID.CLUE_SCROLL_HARD_3536, ClueTier.HARD, null, List.of(new WorldPoint(2950, 2902, 0))),\n\t\tnew Clues(\"Kharazi Jungle south-west: Dig\", ItemID.CLUE_SCROLL_HARD_3532, ClueTier.HARD, null, List.of(new WorldPoint(2775, 2891, 0))),\n\t\tnew Clues(\"Shayziens\u0027 Wall: Dig\", ItemID.CLUE_SCROLL_HARD_25790, ClueTier.HARD, null, List.of(new WorldPoint(1409, 3483, 0))),\n\t\tnew Clues(\"Ferox Enclave: Dig\", ItemID.CLUE_SCROLL_HARD_7262, ClueTier.HARD, null, List.of(new WorldPoint(3113, 3602, 0))),\n\t\tnew Clues(\"Trollheim: Dig\", ItemID.CLUE_SCROLL_HARD_3526, ClueTier.HARD, null, List.of(new WorldPoint(2892, 3675, 0))),\n\t\tnew Clues(\"Graveyard of Shadows: Dig\", ItemID.CLUE_SCROLL_HARD_2743, ClueTier.HARD, null, List.of(new WorldPoint(3168, 3677, 0))),\n\t\tnew Clues(\"Troll Stronghold: Dig\", ItemID.CLUE_SCROLL_HARD_3528, ClueTier.HARD, null, List.of(new WorldPoint(2853, 3690, 0))),\n\t\tnew Clues(\"Wilderness salamanders 1: Dig\", ItemID.CLUE_SCROLL_HARD_7264, ClueTier.HARD, null, List.of(new WorldPoint(3305, 3692, 0))),\n\t\tnew Clues(\"Bandit Camp: Dig\", ItemID.CLUE_SCROLL_HARD_2745, ClueTier.HARD, null, List.of(new WorldPoint(3055, 3696, 0))),\n\t\tnew Clues(\"Wilderness salamanders 2: Dig\", ItemID.CLUE_SCROLL_HARD_12564, ClueTier.HARD, null, List.of(new WorldPoint(3302, 3696, 0))),\n\t\tnew Clues(\"Piscatoris Fishing Colony: Dig\", ItemID.CLUE_SCROLL_HARD_23167, ClueTier.HARD, null, List.of(new WorldPoint(2341, 3697, 0))),\n\t\tnew Clues(\"Lizardman Canyon: Dig\", ItemID.CLUE_SCROLL_HARD_19840, ClueTier.HARD, null, List.of(new WorldPoint(1479, 3699, 0))),\n\t\tnew Clues(\"DKS west: Dig\", ItemID.CLUE_SCROLL_HARD_7266, ClueTier.HARD, null, List.of(new WorldPoint(2712, 3732, 0))),\n\t\tnew Clues(\"Forgotten Cemetery: Dig\", ItemID.CLUE_SCROLL_HARD_7260, ClueTier.HARD, null, List.of(new WorldPoint(2970, 3749, 0))),\n\t\tnew Clues(\"Bandit mining site: Dig\", ItemID.CLUE_SCROLL_HARD_3556, ClueTier.HARD, null, List.of(new WorldPoint(3094, 3764, 0))),\n\t\tnew Clues(\"Silk Chasm south: Dig\", ItemID.CLUE_SCROLL_HARD_2747, ClueTier.HARD, null, List.of(new WorldPoint(3311, 3769, 0))),\n\t\tnew Clues(\"Black Chinchompa: Dig\", ItemID.CLUE_SCROLL_HARD_23168, ClueTier.HARD, null, List.of(new WorldPoint(3143, 3774, 0))),\n\t\tnew Clues(\"Burning Man: Dig\", ItemID.CLUE_SCROLL_HARD_19842, ClueTier.HARD, null, List.of(new WorldPoint(1460, 3782, 0))),\n\t\tnew Clues(\"Lava Dragon Isle: Dig\", ItemID.CLUE_SCROLL_HARD_2741, ClueTier.HARD, null, List.of(new WorldPoint(3244, 3792, 0))),\n\t\tnew Clues(\"Black Chinchompa north: Dig\", ItemID.CLUE_SCROLL_HARD_2733, ClueTier.HARD, null, List.of(new WorldPoint(3140, 3804, 0))),\n\t\tnew Clues(\"Chaos Temple 38: Dig\", ItemID.CLUE_SCROLL_HARD_2735, ClueTier.HARD, null, List.of(new WorldPoint(2946, 3819, 0))),\n\t\tnew Clues(\"Museum Camp east: Dig\", ItemID.CLUE_SCROLL_HARD_21526, ClueTier.HARD, null, List.of(new WorldPoint(3771, 3825, 0))),\n\t\tnew Clues(\"KBD entrance: Dig\", ItemID.CLUE_SCROLL_HARD_2737, ClueTier.HARD, null, List.of(new WorldPoint(3013, 3846, 0))),\n\t\tnew Clues(\"Wilderness runite: Dig\", ItemID.CLUE_SCROLL_HARD_2723, ClueTier.HARD, null, List.of(new WorldPoint(3058, 3884, 0))),\n\t\tnew Clues(\"Demonic Ruins: Dig\", ItemID.CLUE_SCROLL_HARD_2731, ClueTier.HARD, null, List.of(new WorldPoint(3290, 3889, 0))),\n\t\tnew Clues(\"Fossil Island island: Dig\", ItemID.CLUE_SCROLL_HARD_21527, ClueTier.HARD, null, List.of(new WorldPoint(3770, 3897, 0))),\n\t\tnew Clues(\"AJS: Dig\", ItemID.CLUE_SCROLL_HARD_12556, ClueTier.HARD, null, List.of(new WorldPoint(2505, 3899, 0))),\n\t\tnew Clues(\"Frozen Waste Plateau: Dig\", ItemID.CLUE_SCROLL_HARD_23169, ClueTier.HARD, null, List.of(new WorldPoint(2970, 3913, 0))),\n\t\tnew Clues(\"Rogues\u0027 Castle: Dig\", ItemID.CLUE_SCROLL_HARD_3558, ClueTier.HARD, null, List.of(new WorldPoint(3285, 3942, 0))),\n\t\tnew Clues(\"Wilderness lever north: Dig\", ItemID.CLUE_SCROLL_HARD_2727, ClueTier.HARD, null, List.of(new WorldPoint(3159, 3959, 0))),\n\t\tnew Clues(\"Pirates\u0027 Hideout: Dig\", ItemID.CLUE_SCROLL_HARD_2739, ClueTier.HARD, null, List.of(new WorldPoint(3039, 3960, 0))),\n\t\tnew Clues(\"Wilderness Agility west: Dig\", ItemID.CLUE_SCROLL_HARD_2725, ClueTier.HARD, null, List.of(new WorldPoint(2987, 3963, 0))),\n\t\tnew Clues(\"Magic axe hut: Dig\", ItemID.CLUE_SCROLL_HARD_2729, ClueTier.HARD, null, List.of(new WorldPoint(3189, 3963, 0))),\n\t\tnew Clues(\"Wilderness spider hill: Dig\", ItemID.CLUE_SCROLL_HARD_2788, ClueTier.HARD, null, List.of(new WorldPoint(3170, 3885, 0))),\n\t\tnew Clues(\"AJP: Dig\", ItemID.CLUE_SCROLL_HARD_28915, ClueTier.HARD, null, List.of(new WorldPoint(1646, 3012, 0))),\n\t\tnew Clues(\"Abbot Langley: Talk\", ItemID.CLUE_SCROLL_HARD_2793, ClueTier.HARD, null, List.of(new WorldPoint(3052, 3490, 0))),\n\t\tnew Clues(\"General Hining: Talk\", ItemID.CLUE_SCROLL_HARD_3564, ClueTier.HARD, null, List.of(new WorldPoint(2186, 3148, 0))),\n\t\tnew Clues(\"Almera\u0027s house: Search\", ItemID.CLUE_SCROLL_HARD_3573, ClueTier.HARD, null, List.of(new WorldPoint(2523, 3493, 0))),\n\t\tnew Clues(\"AIQ: Dig\", ItemID.CLUE_SCROLL_HARD_19862, ClueTier.HARD, null, List.of(new WorldPoint(3000, 3110, 0))),\n\t\tnew Clues(\"AIR: Dig\", ItemID.CLUE_SCROLL_HARD_19864, ClueTier.HARD, null, List.of(new WorldPoint(2702, 3246, 0))),\n\t\tnew Clues(\"ALP: Dig\", ItemID.CLUE_SCROLL_HARD_19866, ClueTier.HARD, null, List.of(new WorldPoint(2504, 3633, 0))),\n\t\tnew Clues(\"Aggie\u0027s house: Dig\", ItemID.CLUE_SCROLL_HARD_2780, ClueTier.HARD, null, List.of(new WorldPoint(3085, 3255, 0))),\n\t\tnew Clues(\"Etceteria castle: Dig\", ItemID.CLUE_SCROLL_HARD_7243, ClueTier.HARD, null, List.of(new WorldPoint(2591, 3879, 0))),\n\t\tnew Clues(\"Brambickle: Talk\", ItemID.CLUE_SCROLL_HARD_19894, ClueTier.HARD, null, List.of(new WorldPoint(2783, 3861, 0))),\n\t\tnew Clues(\"BIP: Dig\", ItemID.CLUE_SCROLL_HARD_19868, ClueTier.HARD, null, List.of(new WorldPoint(3407, 3330, 0))),\n\t\tnew Clues(\"BJR: Dig\", ItemID.CLUE_SCROLL_HARD_19870, ClueTier.HARD, null, List.of(new WorldPoint(2648, 4729, 0))),\n\t\tnew Clues(\"BLP: Dig\", ItemID.CLUE_SCROLL_HARD_19872, ClueTier.HARD, null, List.of(new WorldPoint(2439, 5132, 0))),\n\t\tnew Clues(\"Lumbridge Guide: Talk\", ItemID.CLUE_SCROLL_HARD_19886, ClueTier.HARD, null, List.of(new WorldPoint(3238, 3220, 0))),\n\t\tnew Clues(\"Arnold Lydspor: Talk\", ItemID.CLUE_SCROLL_HARD_23170, ClueTier.HARD, null, List.of(new WorldPoint(2329, 3689, 0))),\n\t\tnew Clues(\"Soar Leader Pitri: Talk\", ItemID.CLUE_SCROLL_HARD_28916, ClueTier.HARD, null, List.of(new WorldPoint(1558, 3046, 0))),\n\t\tnew Clues(\"Bolkoy: Talk\", ItemID.CLUE_SCROLL_HARD_7270, ClueTier.HARD, null, List.of(new WorldPoint(2529, 3162, 0))),\n\t\tnew Clues(\"Kharazi Jungle east: Emote\", ItemID.CLUE_SCROLL_HARD_12544, ClueTier.HARD, null, List.of(new WorldPoint(2954, 2933, 0))),\n\t\tnew Clues(\"Fishing Guild bank: Emote\", ItemID.CLUE_SCROLL_HARD_10236, ClueTier.HARD, null, List.of(new WorldPoint(2588, 3419, 0))),\n\t\tnew Clues(\"Shilo Village bank: Emote\", ItemID.CLUE_SCROLL_HARD_10252, ClueTier.HARD, null, List.of(new WorldPoint(2852, 2952, 0))),\n\t\tnew Clues(\"Lighthouse top: Emote\", ItemID.CLUE_SCROLL_HARD_10238, ClueTier.HARD, null, List.of(new WorldPoint(2511, 3641, 0))),\n\t\tnew Clues(\"Gnome Coach: Talk\", ItemID.CLUE_SCROLL_HARD_7268, ClueTier.HARD, null, List.of(new WorldPoint(2395, 3486, 0))),\n\t\tnew Clues(\"CIS: Dig\", ItemID.CLUE_SCROLL_HARD_19880, ClueTier.HARD, null, List.of(new WorldPoint(1630, 3868, 0))),\n\t\tnew Clues(\"CKP: Dig\", ItemID.CLUE_SCROLL_HARD_19874, ClueTier.HARD, null, List.of(new WorldPoint(2073, 4846, 0))),\n\t\tnew Clues(\"Prospector Percy: Talk\", ItemID.CLUE_SCROLL_HARD_12566, ClueTier.HARD, null, List.of(new WorldPoint(3061, 3377, 0))),\n\t\tnew Clues(\"Agility pyramid: Emote\", ItemID.CLUE_SCROLL_HARD_12550, ClueTier.HARD, null, List.of(new WorldPoint(3043, 4697, 0))),\n\t\tnew Clues(\"Heckel Funch: Talk\", ItemID.CLUE_SCROLL_HARD_3575, ClueTier.HARD, null, List.of(new WorldPoint(2490, 3488, 0))),\n\t\tnew Clues(\"Gnome trainer: Talk\", ItemID.CLUE_SCROLL_HARD_3577, ClueTier.HARD, null, List.of(new WorldPoint(2469, 3435, 0))),\n\t\tnew Clues(\"Miner Magnus: Talk\", ItemID.CLUE_SCROLL_HARD_19846, ClueTier.HARD, null, List.of(new WorldPoint(2527, 3891, 0))),\n\t\tnew Clues(\"Edgeville Yew: Dig\", ItemID.CLUE_SCROLL_HARD_2774, ClueTier.HARD, null, List.of(new WorldPoint(3089, 3468, 0))),\n\t\tnew Clues(\"Mort\u0027ton centre: Dig\", ItemID.CLUE_SCROLL_HARD_7245, ClueTier.HARD, null, List.of(new WorldPoint(3488, 3289, 0))),\n\t\tnew Clues(\"Daer Krand: Talk\", ItemID.CLUE_SCROLL_HARD_24493, ClueTier.HARD, null, List.of(new WorldPoint(3728, 3302, 0))),\n\t\tnew Clues(\"Dark Mage: Talk\", ItemID.CLUE_SCROLL_HARD_19888, ClueTier.HARD, null, List.of(new WorldPoint(3039, 4835, 0))),\n\t\tnew Clues(\"DIP: Dig\", ItemID.CLUE_SCROLL_HARD_19876, ClueTier.HARD, null, List.of(new WorldPoint(3041, 4770, 0))),\n\t\tnew Clues(\"DKS: Dig\", ItemID.CLUE_SCROLL_HARD_19878, ClueTier.HARD, null, List.of(new WorldPoint(2747, 3720, 0))),\n\t\tnew Clues(\"Doomsayer: Talk\", ItemID.CLUE_SCROLL_HARD_12576, ClueTier.HARD, null, List.of(new WorldPoint(3230, 3230, 0))),\n\t\tnew Clues(\"Drunken Dwarf: Talk\", ItemID.CLUE_SCROLL_HARD_19890, ClueTier.HARD, null, List.of(new WorldPoint(2913, 10221, 0))),\n\t\tnew Clues(\"strange old man: Talk\", ItemID.CLUE_SCROLL_HARD_12568, ClueTier.HARD, null, List.of(new WorldPoint(3564, 3288, 0))),\n\t\tnew Clues(\"Great pyramid: Emote\", ItemID.CLUE_SCROLL_HARD_10242, ClueTier.HARD, null, List.of(new WorldPoint(3294, 2781, 0))),\n\t\tnew Clues(\"Forthos Dungeon: Dig\", ItemID.CLUE_SCROLL_HARD_25791, ClueTier.HARD, null, List.of(new WorldPoint(1820, 9935, 0))),\n\t\tnew Clues(\"Champions\u0027 Guild: Dig\", ItemID.CLUE_SCROLL_HARD_19848, ClueTier.HARD, null, List.of(new WorldPoint(3195, 3357, 0))),\n\t\tnew Clues(\"Lumbridge mill: Search\", ItemID.CLUE_SCROLL_HARD_2785, ClueTier.HARD, null, List.of(new WorldPoint(3166, 3309, 0))),\n\t\tnew Clues(\"Fairy Queen: Talk\", ItemID.CLUE_SCROLL_HARD_19910, ClueTier.HARD, null, List.of(new WorldPoint(2347, 4435, 0))),\n\t\tnew Clues(\"General Bentnoze: Talk\", ItemID.CLUE_SCROLL_HARD_2799, ClueTier.HARD, null, List.of(new WorldPoint(2957, 3511, 0))),\n\t\tnew Clues(\"Saniboch: Talk\", ItemID.CLUE_SCROLL_HARD_12578, ClueTier.HARD, null, List.of(new WorldPoint(2745, 3151, 0))),\n\t\tnew Clues(\"Fairy Godfather: Talk\", ItemID.CLUE_SCROLL_HARD_19908, ClueTier.HARD, null, List.of(new WorldPoint(2446, 4428, 0))),\n\t\tnew Clues(\"Brother Kojo: Talk\", ItemID.CLUE_SCROLL_HARD_19854, ClueTier.HARD, null, List.of(new WorldPoint(2570, 3250, 0))),\n\t\tnew Clues(\"Exam Centre: Emote\", ItemID.CLUE_SCROLL_HARD_12542, ClueTier.HARD, null, List.of(new WorldPoint(3362, 3340, 0))),\n\t\tnew Clues(\"Uzer crate: Search\", ItemID.CLUE_SCROLL_HARD_7253, ClueTier.HARD, null, List.of(new WorldPoint(3478, 3091, 0))),\n\t\tnew Clues(\"West Varrock bank: Dig\", ItemID.CLUE_SCROLL_HARD_2776, ClueTier.HARD, null, List.of(new WorldPoint(3191, 9825, 0))),\n\t\tnew Clues(\"Spirit tree: Talk\", ItemID.CLUE_SCROLL_HARD_19858, ClueTier.HARD, null, List.of(new WorldPoint(2544, 3170, 0))),\n\t\tnew Clues(\"Graveyard of Shadows: Dig\", ItemID.CLUE_SCROLL_HARD_2786, ClueTier.HARD, null, List.of(new WorldPoint(3174, 3663, 0))),\n\t\tnew Clues(\"Ellena: Talk\", ItemID.CLUE_SCROLL_HARD_12581, ClueTier.HARD, null, List.of(new WorldPoint(2860, 3431, 0))),\n\t\tnew Clues(\"Gunnjorn: Talk\", ItemID.CLUE_SCROLL_HARD_23172, ClueTier.HARD, null, List.of(new WorldPoint(2541, 3548, 0))),\n\t\tnew Clues(\"Hamid: Talk\", ItemID.CLUE_SCROLL_HARD_3568, ClueTier.HARD, null, List.of(new WorldPoint(3376, 3284, 0))),\n\t\tnew Clues(\"Gerrant: Talk\", ItemID.CLUE_SCROLL_HARD_2778, ClueTier.HARD, null, List.of(new WorldPoint(3014, 3222, 0))),\n\t\tnew Clues(\"Ranging Guild hay: Search\", ItemID.CLUE_SCROLL_HARD_7254, ClueTier.HARD, null, List.of(new WorldPoint(2672, 3416, 0))),\n\t\tnew Clues(\"Dark Warriors\u0027 Fortress: Search\", ItemID.CLUE_SCROLL_HARD_3525, ClueTier.HARD, null, List.of(new WorldPoint(3026, 3628, 0))),\n\t\tnew Clues(\"Observatory Dungeon: Search\", ItemID.CLUE_SCROLL_HARD_3524, ClueTier.HARD, null, List.of(new WorldPoint(2457, 3182, 0))),\n\t\tnew Clues(\"Head chef: Talk\", ItemID.CLUE_SCROLL_HARD_19853, ClueTier.HARD, null, List.of(new WorldPoint(3143, 3445, 0))),\n\t\tnew Clues(\"West Ardougne: Dig\", ItemID.CLUE_SCROLL_HARD_3522, ClueTier.HARD, null, List.of(new WorldPoint(2488, 3308, 0))),\n\t\tnew Clues(\"Dwarven Mine: Search\", ItemID.CLUE_SCROLL_HARD_7251, ClueTier.HARD, null, List.of(new WorldPoint(3041, 9820, 0))),\n\t\tnew Clues(\"Jiggig: Emote\", ItemID.CLUE_SCROLL_HARD_12548, ClueTier.HARD, null, List.of(new WorldPoint(2477, 3047, 0))),\n\t\tnew Clues(\"Mountain Camp: Emote\", ItemID.CLUE_SCROLL_HARD_10248, ClueTier.HARD, null, List.of(new WorldPoint(2812, 3681, 0))),\n\t\tnew Clues(\"Mawnis Burowgar: Talk\", ItemID.CLUE_SCROLL_HARD_19856, ClueTier.HARD, null, List.of(new WorldPoint(2336, 3799, 0))),\n\t\tnew Clues(\"Brother Omad: Talk\", ItemID.CLUE_SCROLL_HARD_12574, ClueTier.HARD, null, List.of(new WorldPoint(2606, 3211, 0))),\n\t\tnew Clues(\"Lammy Langle: Talk\", ItemID.CLUE_SCROLL_HARD_19896, ClueTier.HARD, null, List.of(new WorldPoint(1688, 3540, 0))),\n\t\tnew Clues(\"Karamja Volcano: Dig\", ItemID.CLUE_SCROLL_HARD_3580, ClueTier.HARD, null, List.of(new WorldPoint(2832, 9586, 0))),\n\t\tnew Clues(\"Dwarf Cannon: Search\", ItemID.CLUE_SCROLL_HARD_3574, ClueTier.HARD, null, List.of(new WorldPoint(2576, 3464, 0))),\n\t\tnew Clues(\"moss giants: Dig\", ItemID.CLUE_SCROLL_HARD_2790, ClueTier.HARD, null, List.of(new WorldPoint(3161, 9904, 0))),\n\t\tnew Clues(\"Lumbridge Castle: Search\", ItemID.CLUE_SCROLL_HARD_2782, ClueTier.HARD, null, List.of(new WorldPoint(3213, 3216, 0))),\n\t\tnew Clues(\"Wilough: Talk\", ItemID.CLUE_SCROLL_HARD_2797, ClueTier.HARD, null, List.of(new WorldPoint(3221, 3435, 0))),\n\t\tnew Clues(\"Cap\u0027n Izzy: Talk\", ItemID.CLUE_SCROLL_HARD_7272, ClueTier.HARD, null, List.of(new WorldPoint(2807, 3191, 0))),\n\t\tnew Clues(\"Eluned: Talk\", ItemID.CLUE_SCROLL_HARD_19898, ClueTier.HARD, null, List.of(new WorldPoint(2289, 3144, 0))),\n\t\tnew Clues(\"Examiner: Talk\", ItemID.CLUE_SCROLL_HARD_3566, ClueTier.HARD, null, List.of(new WorldPoint(3362, 3341, 0))),\n\t\tnew Clues(\"White Wolf Mountain: Emote\", ItemID.CLUE_SCROLL_HARD_10250, ClueTier.HARD, null, List.of(new WorldPoint(2847, 3499, 0))),\n\t\tnew Clues(\"Haunted Woods: Emote\", ItemID.CLUE_SCROLL_HARD_10240, ClueTier.HARD, null, List.of(new WorldPoint(3611, 3492, 0))),\n\t\tnew Clues(\"Wilderness volcano: Emote\", ItemID.CLUE_SCROLL_HARD_12546, ClueTier.HARD, null, List.of(new WorldPoint(3368, 3935, 0))),\n\t\tnew Clues(\"Wizards\u0027 Tower: Search\", ItemID.CLUE_SCROLL_HARD_7249, ClueTier.HARD, null, List.of(new WorldPoint(3096, 9572, 0))),\n\t\tnew Clues(\"Brother Tranquility: Talk\", ItemID.CLUE_SCROLL_HARD_19892, ClueTier.HARD, null, List.of(new WorldPoint(3681, 2963, 0))),\n\t\tnew Clues(\"Martin Thwait: Talk\", ItemID.CLUE_SCROLL_HARD_12570, ClueTier.HARD, null, List.of(new WorldPoint(3044, 4969, 0))),\n\t\tnew Clues(\"Sorcerer\u0027s Tower: Search\", ItemID.CLUE_SCROLL_HARD_3572, ClueTier.HARD, null, List.of(new WorldPoint(2702, 3409, 0))),\n\t\tnew Clues(\"Burgh de Rott fish: Dig\", ItemID.CLUE_SCROLL_HARD_19850, ClueTier.HARD, null, List.of(new WorldPoint(3547, 3183, 0))),\n\t\tnew Clues(\"Wise Old Man: Talk\", ItemID.CLUE_SCROLL_HARD_12572, ClueTier.HARD, null, List.of(new WorldPoint(3088, 3253, 0))),\n\t\tnew Clues(\"Karamja banana: Emote\", ItemID.CLUE_SCROLL_HARD_10246, ClueTier.HARD, null, List.of(new WorldPoint(2914, 3168, 0))),\n\t\tnew Clues(\"Mess Hall: Emote\", ItemID.CLUE_SCROLL_HARD_12552, ClueTier.HARD, null, List.of(new WorldPoint(1646, 3631, 0))),\n\t\tnew Clues(\"Obelisk 19 east: Emote\", ItemID.CLUE_SCROLL_HARD_10234, ClueTier.HARD, null, List.of(new WorldPoint(3241, 3672, 0))),\n\t\tnew Clues(\"Hans: Talk\", ItemID.CLUE_SCROLL_HARD_2792, ClueTier.HARD, null, List.of(new WorldPoint(3221, 3218, 0))),\n\t\tnew Clues(\"BLR south-west: Dig\", ItemID.CLUE_SCROLL_HARD_7241, ClueTier.HARD, null, List.of(new WorldPoint(2722, 3338, 0))),\n\t\tnew Clues(\"Wilderness Agility south: Dig\", ItemID.CLUE_SCROLL_HARD_7239, ClueTier.HARD, null, List.of(new WorldPoint(3021, 3912, 0))),\n\t\tnew Clues(\"Sir Prysin: Talk\", ItemID.CLUE_SCROLL_HARD_2796, ClueTier.HARD, null, List.of(new WorldPoint(3205, 3474, 0))),\n\t\tnew Clues(\"Sir Vyvin: Talk\", ItemID.CLUE_SCROLL_HARD_12584, ClueTier.HARD, null, List.of(new WorldPoint(2983, 3338, 0))),\n\t\tnew Clues(\"Barbarian Village: Dig\", ItemID.CLUE_SCROLL_HARD_12590, ClueTier.HARD, null, List.of(new WorldPoint(3081, 3421, 0))),\n\t\tnew Clues(\"Yu\u0027biusk: Dig\", ItemID.CLUE_SCROLL_HARD_26566, ClueTier.HARD, null, List.of(new WorldPoint(3572, 4372, 0))),\n\t\tnew Clues(\"Guardian mummy: Talk\", ItemID.CLUE_SCROLL_HARD_12587, ClueTier.HARD, null, List.of(new WorldPoint(1934, 4427, 0))),\n\t\tnew Clues(\"Song: The Moons of Ruin\", ItemID.CLUE_SCROLL_HARD_28918, ClueTier.HARD, null, List.of(new WorldPoint(2990, 3384, 0))),\n\t\tnew Clues(\"Ardougne Zoo: Dig\", ItemID.CLUE_SCROLL_HARD_2783, ClueTier.HARD, null, List.of(new WorldPoint(2598, 3267, 0))),\n\t\tnew Clues(\"Desert Bandit Camp: Search\", ItemID.CLUE_SCROLL_HARD_7248, ClueTier.HARD, null, List.of(new WorldPoint(3178, 2987, 0))),\n\t\tnew Clues(\"Ket\u0027sal K\u0027uk: Dig\", ItemID.CLUE_SCROLL_HARD_23045, ClueTier.HARD, null, List.of(new WorldPoint(1179, 3626, 0))),\n\t\tnew Clues(\"Oziach: Talk\", ItemID.CLUE_SCROLL_HARD_2794, ClueTier.HARD, null, List.of(new WorldPoint(3068, 3516, 0))),\n\t\tnew Clues(\"Wizard Mizgog: Talk\", ItemID.CLUE_SCROLL_HARD_19857, ClueTier.HARD, null, List.of(new WorldPoint(3103, 3163, 0))),\n\t\tnew Clues(\"Zul-Cheray: Talk\", ItemID.CLUE_SCROLL_HARD_19852, ClueTier.HARD, null, List.of(new WorldPoint(2204, 3050, 0))),\n\t\tnew Clues(\"Captain Bleemadge: Talk\", ItemID.CLUE_SCROLL_HARD_3570, ClueTier.HARD, null, List.of(new WorldPoint(2847, 3499, 0))),\n\t\tnew Clues(\"Shilo Village mine: Search\", ItemID.CLUE_SCROLL_HARD_7247, ClueTier.HARD, null, List.of(new WorldPoint(2833, 2992, 0))),\n\t\tnew Clues(\"Jimmy Dazzler\u0027s: Search\", ItemID.CLUE_SCROLL_HARD_7255, ClueTier.HARD, null, List.of(new WorldPoint(2561, 3323, 0))),\n\t\tnew Clues(\"Otto Godblessed: Talk\", ItemID.CLUE_SCROLL_HARD_19900, ClueTier.HARD, null, List.of(new WorldPoint(2501, 3487, 0))),\n\t\tnew Clues(\"Evil Dave: Talk\", ItemID.CLUE_SCROLL_HARD_19882, ClueTier.HARD, null, List.of(new WorldPoint(3079, 9892, 0))),\n\t\tnew Clues(\"King Percival: Talk\", ItemID.CLUE_SCROLL_HARD_19906, ClueTier.HARD, null, List.of(new WorldPoint(2634, 4682, 0))),\n\t\tnew Clues(\"Awowogei: Talk\", ItemID.CLUE_SCROLL_HARD_19884, ClueTier.HARD, null, List.of(new WorldPoint(2802, 2765, 0))),\n\t\tnew Clues(\"Entrana: Search\", ItemID.CLUE_SCROLL_HARD_3579, ClueTier.HARD, null, List.of(new WorldPoint(2818, 3351, 0))),\n\t\tnew Clues(\"Yanille Agility: Search\", ItemID.CLUE_SCROLL_HARD_7252, ClueTier.HARD, null, List.of(new WorldPoint(2576, 9583, 0))),\n\t\tnew Clues(\"Citharede Abbey: Dig\", ItemID.CLUE_SCROLL_HARD_19860, ClueTier.HARD, null, List.of(new WorldPoint(3388, 3152, 0))),\n\t\tnew Clues(\"Yanille anvils: Dig\", ItemID.CLUE_SCROLL_HARD_3520, ClueTier.HARD, null, List.of(new WorldPoint(2616, 3077, 0))),\n\t\tnew Clues(\"Noterazzo\u0027s shop: Emote\", ItemID.CLUE_SCROLL_HARD_10244, ClueTier.HARD, null, List.of(new WorldPoint(3026, 3701, 0))),\n\t\tnew Clues(\"Elemental Workshop: Search\", ItemID.CLUE_SCROLL_HARD_7250, ClueTier.HARD, null, List.of(new WorldPoint(2723, 9891, 0))),\n\t\tnew Clues(\"Lumbridge Castle basement: Search\", ItemID.CLUE_SCROLL_HARD_2773, ClueTier.HARD, null, List.of(new WorldPoint(3219, 9617, 0))),\n\t\tnew Clues(\"Weird Old Man: Talk\", ItemID.CLUE_SCROLL_HARD_19904, ClueTier.HARD, null, List.of(new WorldPoint(3224, 3112, 0))),\n\t\tnew Clues(\"Pirate Pete: Talk\", ItemID.CLUE_SCROLL_HARD_19902, ClueTier.HARD, null, List.of(new WorldPoint(3680, 3537, 0))),\n\t\tnew Clues(\"Song: Scorpia Dances\", ItemID.CLUE_SCROLL_HARD_23174, ClueTier.HARD, null, List.of(new WorldPoint(2990, 3383, 0))),\n\t\tnew Clues(\"Song: Complication\", ItemID.CLUE_SCROLL_HARD_23175, ClueTier.HARD, null, List.of(new WorldPoint(2990, 3383, 0))),\n\t\tnew Clues(\"Lumber Yard: Search\", ItemID.CLUE_SCROLL_HARD, ClueTier.HARD, null, List.of(new WorldPoint(3309, 3503, 0))),\n\t\tnew Clues(\"Song: Subterranea\", ItemID.CLUE_SCROLL_HARD_23176, ClueTier.HARD, null, List.of(new WorldPoint(2990, 3383, 0))),\n\t\tnew Clues(\"Song: Little Cave of Horrors\", ItemID.CLUE_SCROLL_HARD_23177, ClueTier.HARD, null, List.of(new WorldPoint(2990, 3383, 0))),\n\t\tnew Clues(\"Song: Roc and Roll\", ItemID.CLUE_SCROLL_HARD_23178, ClueTier.HARD, null, List.of(new WorldPoint(2990, 3383, 0))),\n\t\tnew Clues(\"Song: La Mort\", ItemID.CLUE_SCROLL_HARD_23179, ClueTier.HARD, null, List.of(new WorldPoint(2990, 3383, 0))),\n\t\tnew Clues(\"Song: Fossilised\", ItemID.CLUE_SCROLL_HARD_23180, ClueTier.HARD, null, List.of(new WorldPoint(2990, 3383, 0))),\n\t\tnew Clues(\"Song: Hells Bells\", ItemID.CLUE_SCROLL_HARD_23181, ClueTier.HARD, null, List.of(new WorldPoint(2990, 3383, 0))),\n\t\tnew Clues(\"Song: Regal Pomp\", ItemID.CLUE_SCROLL_HARD_25792, ClueTier.HARD, null, List.of(new WorldPoint(2990, 3383, 0))),\n\t\tnew Clues(\"Twlight Temple: Emote\", ItemID.CLUE_SCROLL_HARD_29859, ClueTier.HARD, null, List.of(new WorldPoint(1694, 3247, 0))),\n\t\tnew Clues(\"Sulisal: Talk\", ItemID.CLUE_SCROLL_HARD_30929, ClueTier.HARD, null, List.of(new WorldPoint(1376, 3037, 0))),\n\t\tnew Clues(\"Custodia Pass south: Dig\", ItemID.CLUE_SCROLL_HARD_30931, ClueTier.HARD, null, List.of(new WorldPoint(1321, 3323, 0))),\n\t\tnew Clues(\"Tear: Talk\", ItemID.CLUE_SCROLL_HARD_31272, ClueTier.HARD, null, List.of(new WorldPoint(2324, 2772, 0))),\n\t\tnew Clues(\"Laguna Aurorae: Dig\", ItemID.CLUE_SCROLL_HARD_31273, ClueTier.HARD, null, List.of(new WorldPoint(1193, 2774, 0))),\n\t\tnew Clues(\"6\", ItemID.CHALLENGE_SCROLL_HARD, ClueTier.HARD_CHALLENGE, null, List.of(new WorldPoint(2395, 3486, 0))),\n\t\tnew Clues(\"13\", ItemID.CHALLENGE_SCROLL_HARD_7271, ClueTier.HARD_CHALLENGE, null, List.of(new WorldPoint(2529, 3162, 0))),\n\t\tnew Clues(\"33\", ItemID.CHALLENGE_SCROLL_HARD_7273, ClueTier.HARD_CHALLENGE, null, List.of(new WorldPoint(2807, 3191, 0))),\n\t\tnew Clues(\"12\", ItemID.CHALLENGE_SCROLL_HARD_12567, ClueTier.HARD_CHALLENGE, null, List.of(new WorldPoint(3061, 3377, 0))),\n\t\tnew Clues(\"40\", ItemID.CHALLENGE_SCROLL_HARD_12569, ClueTier.HARD_CHALLENGE, null, List.of(new WorldPoint(3564, 3288, 0))),\n\t\tnew Clues(\"2\", ItemID.CHALLENGE_SCROLL_HARD_12571, ClueTier.HARD_CHALLENGE, null, List.of(new WorldPoint(3044, 4969, 0))),\n\t\tnew Clues(\"28\", ItemID.CHALLENGE_SCROLL_HARD_12573, ClueTier.HARD_CHALLENGE, null, List.of(new WorldPoint(3088, 3253, 0))),\n\t\tnew Clues(\"129\", ItemID.CHALLENGE_SCROLL_HARD_12575, ClueTier.HARD_CHALLENGE, null, List.of(new WorldPoint(2606, 3211, 0))),\n\t\tnew Clues(\"95\", ItemID.CHALLENGE_SCROLL_HARD_12577, ClueTier.HARD_CHALLENGE, null, List.of(new WorldPoint(3230, 3230, 0))),\n\t\tnew Clues(\"8\", ItemID.CHALLENGE_SCROLL_HARD_19847, ClueTier.HARD_CHALLENGE, null, List.of(new WorldPoint(2527, 3891, 0))),\n\t\tnew Clues(\"22\", ItemID.CHALLENGE_SCROLL_HARD_19855, ClueTier.HARD_CHALLENGE, null, List.of(new WorldPoint(2570, 3250, 0))),\n\t\tnew Clues(\"13112221\", ItemID.CHALLENGE_SCROLL_HARD_19859, ClueTier.HARD_CHALLENGE, null, List.of(new WorldPoint(2544, 3170, 0))),\n\t\tnew Clues(\"666\", ItemID.CHALLENGE_SCROLL_HARD_19883, ClueTier.HARD_CHALLENGE, null, List.of(new WorldPoint(3079, 9892, 0))),\n\t\tnew Clues(\"24\", ItemID.CHALLENGE_SCROLL_HARD_19885, ClueTier.HARD_CHALLENGE, null, List.of(new WorldPoint(2802, 2765, 0))),\n\t\tnew Clues(\"13\", ItemID.CHALLENGE_SCROLL_HARD_19889, ClueTier.HARD_CHALLENGE, null, List.of(new WorldPoint(3039, 4835, 0))),\n\t\tnew Clues(\"7\", ItemID.CHALLENGE_SCROLL_HARD_19893, ClueTier.HARD_CHALLENGE, null, List.of(new WorldPoint(3681, 2963, 0))),\n\t\tnew Clues(\"53000\", ItemID.CHALLENGE_SCROLL_HARD_19899, ClueTier.HARD_CHALLENGE, null, List.of(new WorldPoint(2289, 3144, 0))),\n\t\tnew Clues(\"3\", ItemID.CHALLENGE_SCROLL_HARD_19901, ClueTier.HARD_CHALLENGE, null, List.of(new WorldPoint(3680, 3537, 0))),\n\t\tnew Clues(\"150\", ItemID.CHALLENGE_SCROLL_HARD_19905, ClueTier.HARD_CHALLENGE, null, List.of(new WorldPoint(3224, 3112, 0))),\n\t\tnew Clues(\"5\", ItemID.CHALLENGE_SCROLL_HARD_19907, ClueTier.HARD_CHALLENGE, null, List.of(new WorldPoint(2634, 4682, 1))),\n\t\tnew Clues(\"64\", ItemID.CHALLENGE_SCROLL_HARD_19909, ClueTier.HARD_CHALLENGE, null, List.of(new WorldPoint(2446, 4428, 0))),\n\t\tnew Clues(\"4\", ItemID.CHALLENGE_SCROLL_HARD_30930, ClueTier.HARD_CHALLENGE, null, List.of(new WorldPoint(1376, 3037, 0))),\n\t\tnew Clues(\"West Ardougne Church: Emote\", ItemID.CLUE_SCROLL_ELITE, ClueTier.ELITE, null, List.of(new WorldPoint(2528, 3294, 0))),\n\t\tnew Clues(\"Dominic Onion: Talk\", ItemID.CLUE_SCROLL_ELITE_12157, ClueTier.ELITE, null, List.of(new WorldPoint(2609, 3116, 0))),\n\t\tnew Clues(\"Ortus Farm north: Dig\", ItemID.CLUE_SCROLL_ELITE_28912, ClueTier.ELITE, null, List.of(new WorldPoint(1557, 3183, 0))),\n\t\tnew Clues(\"Lletya south-east: Dig\", ItemID.CLUE_SCROLL_ELITE_12089, ClueTier.ELITE, null, List.of(new WorldPoint(2357, 3151, 0))),\n\t\tnew Clues(\"Meiyerditch Walls: Dig\", ItemID.CLUE_SCROLL_ELITE_12091, ClueTier.ELITE, null, List.of(new WorldPoint(3587, 3180, 0))),\n\t\tnew Clues(\"Hardwood Grove: Dig\", ItemID.CLUE_SCROLL_ELITE_12110, ClueTier.ELITE, null, List.of(new WorldPoint(2820, 3078, 0))),\n\t\tnew Clues(\"Mos Le\u0027Harmless island: Dig\", ItemID.CLUE_SCROLL_ELITE_12086, ClueTier.ELITE, null, List.of(new WorldPoint(3811, 3060, 0))),\n\t\tnew Clues(\"Iorwerth Camp north: Dig\", ItemID.CLUE_SCROLL_ELITE_12111, ClueTier.ELITE, null, List.of(new WorldPoint(2180, 3282, 0))),\n\t\tnew Clues(\"Shilo Village: Dig\", ItemID.CLUE_SCROLL_ELITE_12107, ClueTier.ELITE, null, List.of(new WorldPoint(2870, 2997, 0))),\n\t\tnew Clues(\"Prifddinas: Dig\", ItemID.CLUE_SCROLL_ELITE_23770, ClueTier.ELITE, null, List.of(new WorldPoint(3246, 6083, 0))),\n\t\tnew Clues(\"Pollnivneach cliff: Dig\", ItemID.CLUE_SCROLL_ELITE_12100, ClueTier.ELITE, null, List.of(new WorldPoint(3302, 2988, 0))),\n\t\tnew Clues(\"Gu\u0027Tanoth south: Dig\", ItemID.CLUE_SCROLL_ELITE_12098, ClueTier.ELITE, null, List.of(new WorldPoint(2511, 2980, 0))),\n\t\tnew Clues(\"Isle of Souls north-east: Dig\", ItemID.CLUE_SCROLL_ELITE_25499, ClueTier.ELITE, null, List.of(new WorldPoint(2318, 2954, 0))),\n\t\tnew Clues(\"Legends\u0027 Guild: Dig\", ItemID.CLUE_SCROLL_ELITE_12102, ClueTier.ELITE, null, List.of(new WorldPoint(2732, 3372, 0))),\n\t\tnew Clues(\"Dessous\u0027s tomb: Dig\", ItemID.CLUE_SCROLL_ELITE_12103, ClueTier.ELITE, null, List.of(new WorldPoint(3573, 3425, 0))),\n\t\tnew Clues(\"Isle of Souls west: Dig\", ItemID.CLUE_SCROLL_ELITE_25498, ClueTier.ELITE, null, List.of(new WorldPoint(2094, 2889, 0))),\n\t\tnew Clues(\"Harmony Island: Dig\", ItemID.CLUE_SCROLL_ELITE_12088, ClueTier.ELITE, null, List.of(new WorldPoint(3828, 2848, 0))),\n\t\tnew Clues(\"Ancient Pyramid: Dig\", ItemID.CLUE_SCROLL_ELITE_12099, ClueTier.ELITE, null, List.of(new WorldPoint(3225, 2838, 0))),\n\t\tnew Clues(\"Ruins of Morra: Dig\", ItemID.CLUE_SCROLL_ELITE_25787, ClueTier.ELITE, null, List.of(new WorldPoint(1451, 3509, 0))),\n\t\tnew Clues(\"Hosidius ruins: Dig\", ItemID.CLUE_SCROLL_ELITE_19813, ClueTier.ELITE, null, List.of(new WorldPoint(1773, 3510, 0))),\n\t\tnew Clues(\"Dragontooth Island: Dig\", ItemID.CLUE_SCROLL_ELITE_12085, ClueTier.ELITE, null, List.of(new WorldPoint(3822, 3562, 0))),\n\t\tnew Clues(\"ALQ north: Dig\", ItemID.CLUE_SCROLL_ELITE_12108, ClueTier.ELITE, null, List.of(new WorldPoint(3603, 3564, 0))),\n\t\tnew Clues(\"Crash Island: Dig\", ItemID.CLUE_SCROLL_ELITE_12106, ClueTier.ELITE, null, List.of(new WorldPoint(2936, 2721, 0))),\n\t\tnew Clues(\"Jaltevas: Dig\", ItemID.CLUE_SCROLL_ELITE_26944, ClueTier.ELITE, null, List.of(new WorldPoint(3318, 2706, 0))),\n\t\tnew Clues(\"Ape Atoll: Dig\", ItemID.CLUE_SCROLL_ELITE_12096, ClueTier.ELITE, null, List.of(new WorldPoint(2697, 2705, 0))),\n\t\tnew Clues(\"Mountain Camp: Dig\", ItemID.CLUE_SCROLL_ELITE_12104, ClueTier.ELITE, null, List.of(new WorldPoint(2778, 3678, 0))),\n\t\tnew Clues(\"Obelisk 28 east: Dig\", ItemID.CLUE_SCROLL_ELITE_23146, ClueTier.ELITE, null, List.of(new WorldPoint(3051, 3736, 0))),\n\t\tnew Clues(\"Ice Path: Dig\", ItemID.CLUE_SCROLL_ELITE_12090, ClueTier.ELITE, null, List.of(new WorldPoint(2827, 3740, 0))),\n\t\tnew Clues(\"Neitiznot: Dig\", ItemID.CLUE_SCROLL_ELITE_12094, ClueTier.ELITE, null, List.of(new WorldPoint(2359, 3799, 0))),\n\t\tnew Clues(\"Pirates\u0027 Cove: Dig\", ItemID.CLUE_SCROLL_ELITE_12105, ClueTier.ELITE, null, List.of(new WorldPoint(2194, 3807, 0))),\n\t\tnew Clues(\"DKS north-west: Dig\", ItemID.CLUE_SCROLL_ELITE_12087, ClueTier.ELITE, null, List.of(new WorldPoint(2700, 3808, 0))),\n\t\tnew Clues(\"Neitiznot west: Dig\", ItemID.CLUE_SCROLL_ELITE_23148, ClueTier.ELITE, null, List.of(new WorldPoint(2316, 3814, 0))),\n\t\tnew Clues(\"Lava Dragon Isle: Dig\", ItemID.CLUE_SCROLL_ELITE_12109, ClueTier.ELITE, null, List.of(new WorldPoint(3215, 3835, 0))),\n\t\tnew Clues(\"Fountain of Rune: Dig\", ItemID.CLUE_SCROLL_ELITE_12101, ClueTier.ELITE, null, List.of(new WorldPoint(3369, 3894, 0))),\n\t\tnew Clues(\"Lunar Isle west: Dig\", ItemID.CLUE_SCROLL_ELITE_12092, ClueTier.ELITE, null, List.of(new WorldPoint(2065, 3923, 0))),\n\t\tnew Clues(\"Resource Area: Dig\", ItemID.CLUE_SCROLL_ELITE_12095, ClueTier.ELITE, null, List.of(new WorldPoint(3188, 3933, 0))),\n\t\tnew Clues(\"Weiss: Dig\", ItemID.CLUE_SCROLL_ELITE_23147, ClueTier.ELITE, null, List.of(new WorldPoint(2872, 3937, 0))),\n\t\tnew Clues(\"Pirates\u0027 Hideout: Dig\", ItemID.CLUE_SCROLL_ELITE_12097, ClueTier.ELITE, null, List.of(new WorldPoint(3043, 3940, 0))),\n\t\tnew Clues(\"Wilderness Volcano: Dig\", ItemID.CLUE_SCROLL_ELITE_12093, ClueTier.ELITE, null, List.of(new WorldPoint(3380, 3963, 0))),\n\t\tnew Clues(\"Lithkren: Dig\", ItemID.CLUE_SCROLL_ELITE_22000, ClueTier.ELITE, null, List.of(new WorldPoint(3560, 3987, 0))),\n\t\tnew Clues(\"Island of Stone: Dig\", ItemID.CLUE_SCROLL_ELITE_24253, ClueTier.ELITE, null, List.of(new WorldPoint(2484, 4016, 0))),\n\t\tnew Clues(\"Taverley stones: Search\", ItemID.CLUE_SCROLL_ELITE_12156, ClueTier.ELITE, null, List.of(new WorldPoint(2922, 3484, 0))),\n\t\tnew Clues(\"Hellhound: Kill\", ItemID.CLUE_SCROLL_ELITE_19797, ClueTier.ELITE, null, List.of(\n\t\t\t\tnew WorldPoint(3172, 3952, 0), // Wilderness\n\t\t\t\tnew WorldPoint(2739, 9688, 0), // Witchaven dungeon\n\t\t\t\tnew WorldPoint(2892, 5304, 3), // God Wars Dungeon\n\t\t\t\tnew WorldPoint(2409, 9786, 0), // Stronghold\n\t\t\t\tnew WorldPoint(2851, 9849, 0), // Taverley dungeon\n\t\t\t\tnew WorldPoint(3439, 10082, 0), // Wildy slayer dungeon\n\t\t\t\tnew WorldPoint(1639, 10060, 0), // Kourend Catacombs\n\t\t\t\tnew WorldPoint(1200, 10263, 1) // Karuulm Slayer Dungeon\n\t\t\t)\n\t\t),\n\t\tnew Clues(\"Ankou: Kill\", ItemID.CLUE_SCROLL_ELITE_19805, ClueTier.ELITE, null, List.of(\n\t\t\t\tnew WorldPoint(2960, 3744, 0),\n\t\t\t\tnew WorldPoint(1963, 4951, 0),\n\t\t\t\tnew WorldPoint(2003, 4953, 0),\n\t\t\t\tnew WorldPoint(2468, 9802, 0),\n\t\t\t\tnew WorldPoint(3348, 10075, 0),\n\t\t\t\tnew WorldPoint(1637, 9991, 0)\n\t\t\t)\n\t\t),\n\t\tnew Clues(\"Crocodile: Kill\", ItemID.CLUE_SCROLL_ELITE_19804, ClueTier.ELITE, null, List.of(\n\t\t\t\tnew WorldPoint(3337, 2922, 0),\n\t\t\t\tnew WorldPoint(3296, 2912, 0),\n\t\t\t\tnew WorldPoint(3190, 2825, 0),\n\t\t\t\tnew WorldPoint(3412, 2774, 0)\n\t\t\t)\n\t\t),\n\t\tnew Clues(\"Waterfiend: Kill\", ItemID.CLUE_SCROLL_ELITE_19798, ClueTier.ELITE, null, List.of(\n\t\t\t\tnew WorldPoint(1738, 5343, 0),\n\t\t\t\tnew WorldPoint(1610, 5343, 0),\n\t\t\t\tnew WorldPoint(2248, 9994, 0),\n\t\t\t\tnew WorldPoint(3161, 12457, 0)\n\t\t\t)),\n\t\tnew Clues(\"Green dragon: Kill\", ItemID.CLUE_SCROLL_ELITE_19799, ClueTier.ELITE, null, List.of(\n\t\t\t\tnew WorldPoint(3331, 3672, 0),\n\t\t\t\tnew WorldPoint(2973, 3620, 0),\n\t\t\t\tnew WorldPoint(3137, 3707, 0),\n\t\t\t\tnew WorldPoint(3078, 3810, 0),\n\t\t\t\tnew WorldPoint(3410, 10065, 0),\n\t\t\t\tnew WorldPoint(1939, 8991, 0),\n\t\t\t\t// Brutal ones\n\t\t\t\tnew WorldPoint(1628, 5334, 0),\n\t\t\t\tnew WorldPoint(1756, 5334, 0)\n\t\t\t)\n\t\t),\n\t\tnew Clues(\"Basilisk: Kill\", ItemID.CLUE_SCROLL_ELITE_19800, ClueTier.ELITE, null, List.of(\n\t\t\t\tnew WorldPoint(2738, 10008, 0),\n\t\t\t\tnew WorldPoint(2459, 10398, 0)\n\t\t\t)),\n\t\tnew Clues(\"Lost barbarian: Kill\", ItemID.CLUE_SCROLL_ELITE_19806, ClueTier.ELITE, null, List.of(\n\t\t\tnew WorldPoint(2506, 3518, 0)\n\t\t)),\n\t\tnew Clues(\"Rock Crab: Kill\", ItemID.CLUE_SCROLL_ELITE_19796, ClueTier.ELITE, null, List.of(\n\t\t\tnew WorldPoint(2694, 3724, 0),\n\t\t\tnew WorldPoint(2529, 3740, 0),\n\t\t\tnew WorldPoint(1197, 3587, 0),\n\t\t\tnew WorldPoint(2442, 10159, 0),\n\t\t\tnew WorldPoint(2748, 10166, 0)\n\t\t)),\n\t\tnew Clues(\"Aviansie: Kill\", ItemID.CLUE_SCROLL_ELITE_19803, ClueTier.ELITE, null, List.of(\n\t\t\tnew WorldPoint(2833, 5289, 0),\n\t\t\tnew WorldPoint(2938, 10115, 0)\n\t\t)),\n\t\tnew Clues(\"Bloodveld: Kill\", ItemID.CLUE_SCROLL_ELITE_19801, ClueTier.ELITE, null, List.of(\n\t\t\tnew WorldPoint(2880, 5321, 0),\n\t\t\tnew WorldPoint(3564, 9741, 0),\n\t\t\tnew WorldPoint(3409, 3571, 0),\n\t\t\tnew WorldPoint(3403, 9934, 0),\n\t\t\tnew WorldPoint(2434, 9817, 0),\n\t\t\tnew WorldPoint(2950, 10085, 0)\n\t\t)),\n\t\tnew Clues(\"Aberrant spectre: Kill\", ItemID.CLUE_SCROLL_ELITE_19802, ClueTier.ELITE, null, List.of(\n\t\t\tnew WorldPoint(3413, 3550, 0),\n\t\t\tnew WorldPoint(2443, 9785, 0),\n\t\t\tnew WorldPoint(1646, 9988, 0)\n\t\t)),\n\t\tnew Clues(\"Father Aereck: Talk\", ItemID.CLUE_SCROLL_ELITE_12151, ClueTier.ELITE, null, List.of(new WorldPoint(3242, 3207, 0))),\n\t\tnew Clues(\"Dagannoth Kings: Dig\", ItemID.CLUE_SCROLL_ELITE_19809, ClueTier.ELITE, null, List.of(new WorldPoint(1910, 4367, 0))),\n\t\tnew Clues(\"Regath: Talk\", ItemID.CLUE_SCROLL_ELITE_19793, ClueTier.ELITE, null, List.of(new WorldPoint(1719, 3723, 0))),\n\t\tnew Clues(\"Soul Altar: Dig\", ItemID.CLUE_SCROLL_ELITE_19784, ClueTier.ELITE, null, List.of(new WorldPoint(1815, 3852, 0))),\n\t\tnew Clues(\"Lava Maze: Emote\", ItemID.CLUE_SCROLL_ELITE_12075, ClueTier.ELITE, null, List.of(new WorldPoint(3069, 3861, 0))),\n\t\tnew Clues(\"Legends\u0027 Guild: Emote\", ItemID.CLUE_SCROLL_ELITE_19789, ClueTier.ELITE, null, List.of(new WorldPoint(2728, 3377, 0))),\n\t\tnew Clues(\"Edgeville Monastery: Emote\", ItemID.CLUE_SCROLL_ELITE_12078, ClueTier.ELITE, null, List.of(new WorldPoint(3056, 3484, 0))),\n\t\tnew Clues(\"Fortis temple: Emote\", ItemID.CLUE_SCROLL_ELITE_28910, ClueTier.ELITE, null, List.of(new WorldPoint(1699, 3087, 0))),\n\t\tnew Clues(\"Oneiromancer: Talk\", ItemID.CLUE_SCROLL_ELITE_12132, ClueTier.ELITE, null, List.of(new WorldPoint(2150, 3866, 0))),\n\t\tnew Clues(\"Old crone: Talk\", ItemID.CLUE_SCROLL_ELITE_12138, ClueTier.ELITE, null, List.of(new WorldPoint(3462, 3557, 0))),\n\t\tnew Clues(\"Shadow dungeon: Emote\", ItemID.CLUE_SCROLL_ELITE_12076, ClueTier.ELITE, null, List.of(new WorldPoint(2629, 5071, 0))),\n\t\tnew Clues(\"Jardric: Talk\", ItemID.CLUE_SCROLL_ELITE_21524, ClueTier.ELITE, null, List.of(new WorldPoint(3661, 3849, 0))),\n\t\tnew Clues(\"Mandrith: Talk\", ItemID.CLUE_SCROLL_ELITE_12134, ClueTier.ELITE, null, List.of(new WorldPoint(3182, 3946, 0))),\n\t\tnew Clues(\"Fishing Platform: Emote\", ItemID.CLUE_SCROLL_ELITE_12079, ClueTier.ELITE, null, List.of(new WorldPoint(2782, 3273, 0))),\n\t\tnew Clues(\"Kalphite Cave: Dig\", ItemID.CLUE_SCROLL_ELITE_12158, ClueTier.ELITE, null, List.of(new WorldPoint(3307, 9505, 0))),\n\t\tnew Clues(\"Toad batta: Dig\", ItemID.CLUE_SCROLL_ELITE_19810, ClueTier.ELITE, null, List.of(new WorldPoint(3139, 4554, 0))),\n\t\tnew Clues(\"Law rift: Dig\", ItemID.CLUE_SCROLL_ELITE_12150, ClueTier.ELITE, null, List.of(new WorldPoint(3049, 4839, 0))),\n\t\tnew Clues(\"Horacio: Talk\", ItemID.CLUE_SCROLL_ELITE_12154, ClueTier.ELITE, null, List.of(new WorldPoint(2635, 3310, 0))),\n\t\tnew Clues(\"Volcanic Mine: Dig\", ItemID.CLUE_SCROLL_ELITE_21525, ClueTier.ELITE, null, List.of(new WorldPoint(3816, 3810, 0))),\n\t\tnew Clues(\"Burgh de Rott: Dig\", ItemID.CLUE_SCROLL_ELITE_19785, ClueTier.ELITE, null, List.of(new WorldPoint(3538, 3208, 0))),\n\t\tnew Clues(\"Seers Agility: Search\", ItemID.CLUE_SCROLL_ELITE_12145, ClueTier.ELITE, null, List.of(new WorldPoint(2707, 3488, 0))),\n\t\tnew Clues(\"Trollweiss: Dig\", ItemID.CLUE_SCROLL_ELITE_12141, ClueTier.ELITE, null, List.of(new WorldPoint(2780, 3783, 0))),\n\t\tnew Clues(\"Mawrth: Talk\", ItemID.CLUE_SCROLL_ELITE_12140, ClueTier.ELITE, null, List.of(new WorldPoint(2333, 3165, 0))),\n\t\tnew Clues(\"Slayer Tower: Emote\", ItemID.CLUE_SCROLL_ELITE_12080, ClueTier.ELITE, null, List.of(new WorldPoint(3421, 3537, 0))),\n\t\tnew Clues(\"Fight Arena pub: Emote\", ItemID.CLUE_SCROLL_ELITE_19791, ClueTier.ELITE, null, List.of(new WorldPoint(2568, 3149, 0))),\n\t\tnew Clues(\"Barker: Talk\", ItemID.CLUE_SCROLL_ELITE_12155, ClueTier.ELITE, null, List.of(new WorldPoint(3499, 3503, 0))),\n\t\tnew Clues(\"Kamfreena: Talk\", ItemID.CLUE_SCROLL_ELITE_12144, ClueTier.ELITE, null, List.of(new WorldPoint(2845, 3539, 0))),\n\t\tnew Clues(\"Candle maker: Talk\", ItemID.CLUE_SCROLL_ELITE_12152, ClueTier.ELITE, null, List.of(new WorldPoint(2799, 3438, 0))),\n\t\tnew Clues(\"Genie: Talk\", ItemID.CLUE_SCROLL_ELITE_12153, ClueTier.ELITE, null, List.of(new WorldPoint(3371, 9320, 0))),\n\t\tnew Clues(\"Mogre Camp: Dig\", ItemID.CLUE_SCROLL_ELITE_19782, ClueTier.ELITE, null, List.of(new WorldPoint(2953, 9523, 0))),\n\t\tnew Clues(\"Neitiznot runite: Emote\", ItemID.CLUE_SCROLL_ELITE_12074, ClueTier.ELITE, null, List.of(new WorldPoint(2375, 3850, 0))),\n\t\tnew Clues(\"Ancient Cavern: Emote\", ItemID.CLUE_SCROLL_ELITE_12083, ClueTier.ELITE, null, List.of(new WorldPoint(1768, 5366, 0))),\n\t\tnew Clues(\"Guard Vemmeldo: Talk\", ItemID.CLUE_SCROLL_ELITE_19792, ClueTier.ELITE, null, List.of(new WorldPoint(2447, 3418, 0))),\n\t\tnew Clues(\"Fountain of Heroes: Emote\", ItemID.CLUE_SCROLL_ELITE_12082, ClueTier.ELITE, null, List.of(new WorldPoint(2920, 9893, 0))),\n\t\tnew Clues(\"Ardougne gem stall: Emote\", ItemID.CLUE_SCROLL_ELITE_19790, ClueTier.ELITE, null, List.of(new WorldPoint(2666, 3304, 0))),\n\t\tnew Clues(\"Cam the Camel: Talk\", ItemID.CLUE_SCROLL_ELITE_12136, ClueTier.ELITE, null, List.of(new WorldPoint(3300, 3231, 0))),\n\t\tnew Clues(\"Ambassador Alvijar: Talk\", ItemID.CLUE_SCROLL_ELITE_12133, ClueTier.ELITE, null, List.of(new WorldPoint(2736, 5351, 0))),\n\t\tnew Clues(\"Resource Area gold: Dig\", ItemID.CLUE_SCROLL_ELITE_23144, ClueTier.ELITE, null, List.of(new WorldPoint(3183, 3941, 0))),\n\t\tnew Clues(\"Oronwen: Talk\", ItemID.CLUE_SCROLL_ELITE_12135, ClueTier.ELITE, null, List.of(new WorldPoint(2326, 3177, 0))),\n\t\tnew Clues(\"Nurse Wooned: Talk\", ItemID.CLUE_SCROLL_ELITE_19794, ClueTier.ELITE, null, List.of(new WorldPoint(1511, 3619, 0))),\n\t\tnew Clues(\"DLR: Dig\", ItemID.CLUE_SCROLL_ELITE_23145, ClueTier.ELITE, null, List.of(new WorldPoint(2221, 3091, 0))),\n\t\tnew Clues(\"Trollweiss Mountain: Emote\", ItemID.CLUE_SCROLL_ELITE_19787, ClueTier.ELITE, null, List.of(new WorldPoint(2776, 3781, 0))),\n\t\tnew Clues(\"BIP: Dig\", ItemID.CLUE_SCROLL_ELITE_12146, ClueTier.ELITE, null, List.of(new WorldPoint(3410, 3324, 0))),\n\t\tnew Clues(\"Lisse Isaakson: Talk\", ItemID.CLUE_SCROLL_ELITE_19795, ClueTier.ELITE, null, List.of(new WorldPoint(2351, 3801, 0))),\n\t\tnew Clues(\"Charcoal Burners: Emote\", ItemID.CLUE_SCROLL_ELITE_25786, ClueTier.ELITE, null, List.of(new WorldPoint(1714, 3467, 0))),\n\t\tnew Clues(\"Warriors\u0027 guild bank: Emote\", ItemID.CLUE_SCROLL_ELITE_12077, ClueTier.ELITE, null, List.of(new WorldPoint(2844, 3542, 0))),\n\t\tnew Clues(\"KBD: Kill\", ItemID.CLUE_SCROLL_ELITE_19807, ClueTier.ELITE, null, List.of(new WorldPoint(2288, 4702, 0))),\n\t\tnew Clues(\"Sherlock: Talk\", ItemID.CLUE_SCROLL_ELITE_12127, ClueTier.ELITE, null, List.of(new WorldPoint(2733, 3415, 0))),\n\t\tnew Clues(\"Shayzien war tent: Emote\", ItemID.CLUE_SCROLL_ELITE_19788, ClueTier.ELITE, null, List.of(new WorldPoint(1487, 3635, 0))),\n\t\tnew Clues(\"Tree Gnome Village: Dig\", ItemID.CLUE_SCROLL_ELITE_12130, ClueTier.ELITE, null, List.of(new WorldPoint(2449, 3130, 0))),\n\t\tnew Clues(\"Wyson: Talk\", ItemID.CLUE_SCROLL_ELITE_12159, ClueTier.ELITE, null, List.of(new WorldPoint(3026, 3378, 0))),\n\t\tnew Clues(\"Piscatoris Fishing Colony: Dig\", ItemID.CLUE_SCROLL_ELITE_12143, ClueTier.ELITE, null, List.of(new WorldPoint(2342, 3677, 0))),\n\t\tnew Clues(\"Ape Atoll: Search\", ItemID.CLUE_SCROLL_ELITE_19786, ClueTier.ELITE, null, List.of(new WorldPoint(2703, 2716, 0))),\n\t\tnew Clues(\"Waterbirth Island Dungeon: Dig\", ItemID.CLUE_SCROLL_ELITE_12142, ClueTier.ELITE, null, List.of(new WorldPoint(2523, 3739, 0))),\n\t\tnew Clues(\"Sigli: Talk\", ItemID.CLUE_SCROLL_ELITE_12137, ClueTier.ELITE, null, List.of(new WorldPoint(2660, 3654, 0))),\n\t\tnew Clues(\"Aris: Talk\", ItemID.CLUE_SCROLL_ELITE_12149, ClueTier.ELITE, null, List.of(new WorldPoint(3203, 3424, 0))),\n\t\tnew Clues(\"Warriors\u0027 Guild: Dig\", ItemID.CLUE_SCROLL_ELITE_12148, ClueTier.ELITE, null, List.of(new WorldPoint(2867, 3546, 0))),\n\t\tnew Clues(\"Daga: Talk\", ItemID.CLUE_SCROLL_ELITE_19808, ClueTier.ELITE, null, List.of(new WorldPoint(2759, 2775, 0))),\n\t\tnew Clues(\"Funbo: Talk\", ItemID.CLUE_SCROLL_ELITE_28911, ClueTier.ELITE, null, List.of(new WorldPoint(1432, 9584, 0))),\n\t\tnew Clues(\"Trollheim: Emote\", ItemID.CLUE_SCROLL_ELITE_12081, ClueTier.ELITE, null, List.of(new WorldPoint(2887, 3676, 0))),\n\t\tnew Clues(\"Veteran Squire: Talk\", ItemID.CLUE_SCROLL_ELITE_19811, ClueTier.ELITE, null, List.of(new WorldPoint(2638, 2656, 0))),\n\t\tnew Clues(\"Vannaka: Talk\", ItemID.CLUE_SCROLL_ELITE_12147, ClueTier.ELITE, null, List.of(new WorldPoint(3148, 9913, 0))),\n\t\tnew Clues(\"Zul-Andra: Dig\", ItemID.CLUE_SCROLL_ELITE_19783, ClueTier.ELITE, null, List.of(new WorldPoint(2202, 3062, 0))),\n\t\tnew Clues(\"Sherlock: Talk\", ItemID.CLUE_SCROLL_ELITE_12113, ClueTier.ELITE, null, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(\"Sherlock: Talk\", ItemID.CLUE_SCROLL_ELITE_12114, ClueTier.ELITE, null, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(\"Sherlock: Talk\", ItemID.CLUE_SCROLL_ELITE_12115, ClueTier.ELITE, null, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(\"Sherlock: Talk\", ItemID.CLUE_SCROLL_ELITE_12116, ClueTier.ELITE, null, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(\"Sherlock: Talk\", ItemID.CLUE_SCROLL_ELITE_12117, ClueTier.ELITE, null, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(\"Sherlock: Talk\", ItemID.CLUE_SCROLL_ELITE_12118, ClueTier.ELITE, null, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(\"Sherlock: Talk\", ItemID.CLUE_SCROLL_ELITE_12119, ClueTier.ELITE, null, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(\"Sherlock: Talk\", ItemID.CLUE_SCROLL_ELITE_12120, ClueTier.ELITE, null, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(\"Sherlock: Talk\", ItemID.CLUE_SCROLL_ELITE_12121, ClueTier.ELITE, null, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(\"Sherlock: Talk\", ItemID.CLUE_SCROLL_ELITE_12122, ClueTier.ELITE, null, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(\"Sherlock: Talk\", ItemID.CLUE_SCROLL_ELITE_12123, ClueTier.ELITE, null, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(\"Sherlock: Talk\", ItemID.CLUE_SCROLL_ELITE_12124, ClueTier.ELITE, null, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(\"Sherlock: Talk\", ItemID.CLUE_SCROLL_ELITE_12125, ClueTier.ELITE, null, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(\"Sherlock: Talk\", ItemID.CLUE_SCROLL_ELITE_12126, ClueTier.ELITE, null, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(\"Song: Lament for the Hallowed\", ItemID.CLUE_SCROLL_ELITE_24773, ClueTier.ELITE, null, List.of(new WorldPoint(2990, 3383, 0))),\n\t\tnew Clues(\"Song: The Pharaoh\", ItemID.CLUE_SCROLL_ELITE_26943, ClueTier.ELITE, null, List.of(new WorldPoint(2990, 3384, 0))),\n\t\tnew Clues(\"Proudspire summit: Dig\", ItemID.CLUE_SCROLL_ELITE_29855, ClueTier.ELITE, null, List.of(new WorldPoint(1571, 3245, 0))),\n\t\tnew Clues(\"Frost Nagua: Kill\", ItemID.CLUE_SCROLL_ELITE_29856, ClueTier.ELITE, null, List.of(new WorldPoint(1627, 9623, 0))),\n\t\tnew Clues(\"Earthen Nagua: Kill\", ItemID.CLUE_SCROLL_ELITE_30932, ClueTier.ELITE, null, List.of(new WorldPoint(1305, 3033, 0))),\n\t\tnew Clues(\"Wintumber Island: Emote\", ItemID.CLUE_SCROLL_ELITE_31269, ClueTier.ELITE, null, List.of(new WorldPoint(2069, 2608, 0))),\n\t\tnew Clues(\"Gryphon: Kill\", ItemID.CLUE_SCROLL_ELITE_31270, ClueTier.ELITE, null, List.of(new WorldPoint(3120, 2424, 0))),\n\t\tnew Clues(\"Lledrith Island: Dig\", ItemID.CLUE_SCROLL_ELITE_31271, ClueTier.ELITE, null, List.of(new WorldPoint(2081, 3184, 0))),\n\t\tnew Clues(\"Challenge: Sherlock\", ItemID.CHALLENGE_SCROLL_ELITE, ClueTier.ELITE_CHALLENGE, null, List.of(new WorldPoint(2733, 3415, 0))),\n\t\tnew Clues(\"Challenge\", ItemID.CHALLENGE_SCROLL_ELITE_12139, ClueTier.ELITE_CHALLENGE, null, List.of(new WorldPoint(0, 0, 0))),\n\t\tnew Clues(500, \"Snowflake: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_ANAGRAM_0, List.of(new WorldPoint(2872, 3935, 0))),\n\t\tnew Clues(501, \"Captain Bruce: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_ANAGRAM_1, List.of(new WorldPoint(1530, 3567, 0))),\n\t\tnew Clues(502, \"Sacrifice: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_ANAGRAM_2, List.of(new WorldPoint(2210, 3056, 0))),\n\t\tnew Clues(503, \"Edward: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_ANAGRAM_3, List.of(new WorldPoint(3283, 3934, 0))),\n\t\tnew Clues(504, \"Mandrith: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_ANAGRAM_4, List.of(new WorldPoint(3184, 3945, 0))),\n\t\tnew Clues(505, \"Dugopul: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_ANAGRAM_5, List.of(new WorldPoint(2801, 2745, 0))),\n\t\tnew Clues(506, \"Runolf: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_ANAGRAM_6, List.of(new WorldPoint(2508, 10258, 0))),\n\t\tnew Clues(507, \"Immenizz: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_ANAGRAM_7, List.of(new WorldPoint(2592, 4319, 0))),\n\t\tnew Clues(508, \"Luminata: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_ANAGRAM_8, List.of(new WorldPoint(3505, 3236, 0))),\n\t\tnew Clues(509, \"Old Man Ral: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_ANAGRAM_9, List.of(new WorldPoint(3607, 3208, 0))),\n\t\tnew Clues(510, \"Radimus Erkle: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_ANAGRAM_10, List.of(new WorldPoint(2726, 3368, 0))),\n\t\tnew Clues(511, \"Primula: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_ANAGRAM_11, List.of(new WorldPoint(2454, 2853, 1))),\n\t\tnew Clues(512, \"Goreu: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_ANAGRAM_12, List.of(new WorldPoint(2336, 3161, 0))),\n\t\tnew Clues(513, \"Guildmaster Lars: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_ANAGRAM_13, List.of(new WorldPoint(1652, 3499, 0))),\n\t\tnew Clues(514, \"Wingstone: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_ANAGRAM_14, List.of(new WorldPoint(3381, 2891, 0))),\n\t\tnew Clues(515, \"New Recruit Tony: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_ANAGRAM_15, List.of(new WorldPoint(1502, 3554, 0))),\n\t\tnew Clues(516, \"Iorwerth Camp south: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_0, List.of(new WorldPoint(2178, 3209, 0))),\n\t\tnew Clues(517, \"Port Tyras south: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_1, List.of(new WorldPoint(2155, 3100, 0))),\n\t\tnew Clues(518, \"DLR: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_2, List.of(new WorldPoint(2217, 3092, 0))),\n\t\tnew Clues(519, \"Mos Le\u0027Harmless island: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_3, List.of(new WorldPoint(3830, 3060, 0))),\n\t\tnew Clues(520, \"Crandor: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_4, List.of(new WorldPoint(2834, 3271, 0))),\n\t\tnew Clues(521, \"Witchaven: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_5, List.of(new WorldPoint(2732, 3284, 0))),\n\t\tnew Clues(522, \"Meiyerditch Mine: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_6, List.of(new WorldPoint(3622, 3320, 0))),\n\t\tnew Clues(523, \"Prifddinas east: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_7, List.of(new WorldPoint(2303, 3328, 0))),\n\t\tnew Clues(524, \"Morytania Graveyard: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_8, List.of(new WorldPoint(3570, 3405, 0))),\n\t\tnew Clues(525, \"Crabclaw Isle: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_9, List.of(new WorldPoint(1769, 3418, 0))),\n\t\tnew Clues(526, \"Water Obelisk: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_10, List.of(new WorldPoint(2840, 3423, 0))),\n\t\tnew Clues(527, \"ALQ north: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_11, List.of(new WorldPoint(3604, 3564, 0))),\n\t\tnew Clues(528, \"Air Obelisk: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_12, List.of(new WorldPoint(3085, 3569, 0))),\n\t\tnew Clues(529, \"Crash Island: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_13, List.of(new WorldPoint(2934, 2727, 0))),\n\t\tnew Clues(530, \"Lizardman Shaman: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_14, List.of(new WorldPoint(1451, 3695, 0))),\n\t\tnew Clues(531, \"Waterbirth Island: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_15, List.of(new WorldPoint(2538, 3739, 0))),\n\t\tnew Clues(532, \"Farming Guild: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_16, List.of(new WorldPoint(1248, 3751, 0))),\n\t\tnew Clues(533, \"Arceuus church crypt: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_17, List.of(new WorldPoint(1698, 3792, 0))),\n\t\tnew Clues(534, \"Chaos Temple 38: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_18, List.of(new WorldPoint(2951, 3820, 0))),\n\t\tnew Clues(535, \"Pirates\u0027 Cove: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_19, List.of(new WorldPoint(2202, 3825, 0))),\n\t\tnew Clues(536, \"Dense essence mine: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_20, List.of(new WorldPoint(1761, 3853, 0))),\n\t\tnew Clues(537, \"Astral Altar west: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_21, List.of(new WorldPoint(2090, 3863, 0))),\n\t\tnew Clues(538, \"Sulphur mine: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_22, List.of(new WorldPoint(1442, 3878, 0))),\n\t\tnew Clues(539, \"Wilderness Volcano: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_23, List.of(new WorldPoint(3380, 3929, 0))),\n\t\tnew Clues(540, \"Resource Area: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_24, List.of(new WorldPoint(3188, 3939, 0))),\n\t\tnew Clues(541, \"Rogues\u0027 Castle: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_25, List.of(new WorldPoint(3304, 3941, 0))),\n\t\tnew Clues(542, \"Wilderness Agility: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_COORDINATE_26, List.of(new WorldPoint(3028, 3928, 0))),\n\t\tnew Clues(543, \"Ping and Pong: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_0, List.of(new WorldPoint(2670, 10395, 0))),\n\t\tnew Clues(544, \"Wizard Cromperty: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_1, List.of(new WorldPoint(2684, 3325, 0))),\n\t\tnew Clues(545, \"Thorgel: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_2, List.of(new WorldPoint(1861, 4641, 0))),\n\t\tnew Clues(546, \"GWD entrance: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_3, List.of(new WorldPoint(2918, 3745, 0))),\n\t\tnew Clues(547, \"Abbot Langley: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_4, List.of(new WorldPoint(3052, 3490, 0))),\n\t\tnew Clues(548, \"Monk of Entrana: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_5, List.of(new WorldPoint(3052, 3237, 0))),\n\t\tnew Clues(549, \"Jorral: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_6, List.of(new WorldPoint(2436, 3346, 0))),\n\t\tnew Clues(550, \"Viggora: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_7, List.of(new WorldPoint(3119, 9996, 0), new WorldPoint(3294, 3934 , 0), new WorldPoint(3448, 3550, 0))),\n\t\tnew Clues(551, \"Biblia: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_8, List.of(new WorldPoint(1633, 3823, 0))),\n\t\tnew Clues(552, \"Kamil: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_9, List.of(new WorldPoint(2873, 3757, 0))),\n\t\tnew Clues(553, \"Deep Wilderness Dungeon: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_10, List.of(new WorldPoint(3045, 3925, 0))),\n\t\tnew Clues(554, \"Falo the Bard: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_11, List.of(new WorldPoint(2689, 3549, 0))),\n\t\tnew Clues(555, \"Prifddinas Onion: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_12, List.of(new WorldPoint(2299, 3328, 0))),\n\t\tnew Clues(556, \"Rogues\u0027 Den: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_13, List.of(new WorldPoint(2906, 3537, 0))),\n\t\tnew Clues(557, \"Ghommal: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_14, List.of(new WorldPoint(2879, 3547, 0))),\n\t\tnew Clues(558, \"Lava Maze Dungeon: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_15, List.of(new WorldPoint(3069, 3860, 0))),\n\t\tnew Clues(559, \"Guthix Lake: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_16, List.of(new WorldPoint(3069, 3932, 0))),\n\t\tnew Clues(560, \"Juna: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_17, List.of(new WorldPoint(3252, 9517, 0))),\n\t\tnew Clues(561, \"Sir Vyvin: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_18, List.of(new WorldPoint(2984, 3339, 2))),\n\t\tnew Clues(562, \"Viyeldi caves: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_19, List.of(new WorldPoint(2782, 2935, 0))),\n\t\tnew Clues(563, \"Saradomin\u0027s Encampment: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_20, List.of(new WorldPoint(2918, 3745, 0))),\n\t\tnew Clues(564, \"Key Master: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_21, List.of(new WorldPoint(1310, 1251, 0))),\n\t\tnew Clues(565, \"Piles: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_22, List.of(new WorldPoint(3185, 3934, 0))),\n\t\tnew Clues(566, \"Demonic Ruins: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_23, List.of(new WorldPoint(3294, 3889, 0))),\n\t\tnew Clues(567, \"Robin: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_24, List.of(new WorldPoint(3676, 3494, 0))),\n\t\tnew Clues(568, \"Lovada: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_25, List.of(new WorldPoint(1487, 3833, 0))),\n\t\tnew Clues(569, \"Logosia: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_26, List.of(new WorldPoint(1633, 3808, 0))),\n\t\tnew Clues(570, \"Sherlock: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_27, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(571, \"Shilo furnace: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_28, List.of(new WorldPoint(2859, 2962, 0))),\n\t\tnew Clues(572, \"Shadow Dungeon: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_29, List.of(new WorldPoint(2547, 3421, 0))),\n\t\tnew Clues(573, \"Ewesey: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_30, List.of(new WorldPoint(1647, 3627, 0))),\n\t\tnew Clues(574, \"terrorbird display: Dig\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_31, List.of(new WorldPoint(3260, 3449, 0))),\n\t\tnew Clues(575, \"Mage of Zamorak: Talk\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_CRYPTIC_32, List.of(new WorldPoint(3259, 3386, 0))),\n\t\tnew Clues(576, \"Gwenith: Emote\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_EMOTE_0, List.of(new WorldPoint(2213, 3427, 0))),\n\t\tnew Clues(577, \"K\u0027ril Tsutsaroth: Emote\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_EMOTE_1, List.of(new WorldPoint(2931, 5337, 0))),\n\t\tnew Clues(578, \"Warrior\u0027s guild bank: Emote\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_EMOTE_2, List.of(new WorldPoint(2843, 3540, 0))),\n\t\tnew Clues(579, \"Iorwerth Camp: Emote\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_EMOTE_3, List.of(new WorldPoint(2199, 3254, 0))),\n\t\tnew Clues(580, \"Entrana church: Emote\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_EMOTE_4, List.of(new WorldPoint(2851, 3354, 0))),\n\t\tnew Clues(581, \"Magic axe hut: Emote\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_EMOTE_5, List.of(new WorldPoint(3188, 3957, 0))),\n\t\tnew Clues(582, \"Tzhaar gem store: Emote\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_EMOTE_6, List.of(new WorldPoint(2466, 5150, 0))),\n\t\tnew Clues(583, \"Iban\u0027s temple: Emote\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_EMOTE_7, List.of(new WorldPoint(2006, 4709, 1))),\n\t\tnew Clues(584, \"KBD Lair: Emote\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_EMOTE_8, List.of(new WorldPoint(2286, 4680, 0))),\n\t\tnew Clues(585, \"Barrows chest: Emote\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_EMOTE_9, List.of(new WorldPoint(3548, 9691, 0))),\n\t\tnew Clues(586, \"Death Altar: Emote\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_EMOTE_10, List.of(new WorldPoint(2210, 4842, 0))),\n\t\tnew Clues(587, \"Cam Torum: Emote\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_EMOTE_11, List.of(new WorldPoint(1428, 3119, 0))),\n\t\tnew Clues(588, \"Goblin Village: Emote\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_EMOTE_12, List.of(new WorldPoint(2959, 3502, 0))),\n\t\tnew Clues(589, \"Zul-Andra: Emote\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_EMOTE_13, List.of(new WorldPoint(2204, 3059, 0))),\n\t\tnew Clues(590, \"Lava Dragon Isle: Emote\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_EMOTE_14, List.of(new WorldPoint(3229, 3832, 0))),\n\t\tnew Clues(591, \"Wise old man: Emote\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_EMOTE_15, List.of(new WorldPoint(3095, 3255, 0))),\n\t\tnew Clues(592, \"Ellamaria\u0027s garden: Emote\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_EMOTE_16, List.of(new WorldPoint(3232, 3493, 0))),\n\t\tnew Clues(593, \"Catacombs: Emote\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_EMOTE_17, List.of(new WorldPoint(1662, 10044, 0))),\n\t\tnew Clues(594, \"Soul Altar: Emote\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_EMOTE_18, List.of(new WorldPoint(1811, 3853, 0))),\n\t\tnew Clues(595, \"Enchanted valley: Emote\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_EMOTE_19, List.of(new WorldPoint(3022, 4517, 0))),\n\t\tnew Clues(596, \"Watchtower: Emote\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_EMOTE_20, List.of(new WorldPoint(2548, 3112, 0))),\n\t\tnew Clues(597, \"Drakan: Emote Castl\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_EMOTE_21, List.of(new WorldPoint(3563, 3379, 0))),\n\t\tnew Clues(598, \"Pyramid Plunder: Emote\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_EMOTE_22, List.of(new WorldPoint(1951, 4431, 0))),\n\t\tnew Clues(599, \"Salvager Overlook: Emote\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_EMOTE_23, List.of(new WorldPoint(1614, 3296, 0))),\n\t\tnew Clues(600, \"Dragon scimitar: Falo\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_FALO_0, List.of(new WorldPoint(2689, 3549, 0))),\n\t\tnew Clues(601, \"God book: Falo\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_FALO_1, List.of(new WorldPoint(2689, 3549, 0))),\n\t\tnew Clues(602, \"Crystal bow: Falo\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_FALO_2, List.of(new WorldPoint(2689, 3549, 0))),\n\t\tnew Clues(603, \"Infernal axe: Falo\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_FALO_3, List.of(new WorldPoint(2689, 3549, 0))),\n\t\tnew Clues(604, \"Mark of grace: Falo\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_FALO_4, List.of(new WorldPoint(2689, 3549, 0))),\n\t\tnew Clues(605, \"Lava dragon bones: Falo\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_FALO_5, List.of(new WorldPoint(2689, 3549, 0))),\n\t\tnew Clues(606, \"Armadyl helmet: Falo\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_FALO_6, List.of(new WorldPoint(2689, 3549, 0))),\n\t\tnew Clues(607, \"Dragon defender: Falo\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_FALO_7, List.of(new WorldPoint(2689, 3549, 0))),\n\t\tnew Clues(608, \"Warrior guild token: Falo\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_FALO_8, List.of(new WorldPoint(2689, 3549, 0))),\n\t\tnew Clues(609, \"Greenman\u0027s ale(m): Falo\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_FALO_9, List.of(new WorldPoint(2689, 3549, 0))),\n\t\tnew Clues(610, \"Barrelchest anchor: Falo\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_FALO_10, List.of(new WorldPoint(2689, 3549, 0))),\n\t\tnew Clues(611, \"Basalt: Falo\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_FALO_11, List.of(new WorldPoint(2689, 3549, 0))),\n\t\tnew Clues(612, \"Tzhaar-ket-om: Falo\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_FALO_12, List.of(new WorldPoint(2689, 3549, 0))),\n\t\tnew Clues(613, \"Fighter torso: Falo\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_FALO_13, List.of(new WorldPoint(2689, 3549, 0))),\n\t\tnew Clues(614, \"Barrows gloves: Falo\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_FALO_14, List.of(new WorldPoint(2689, 3549, 0))),\n\t\tnew Clues(615, \"Cooking gauntlets: Falo\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_FALO_15, List.of(new WorldPoint(2689, 3549, 0))),\n\t\tnew Clues(616, \"Numulite: Falo\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_FALO_16, List.of(new WorldPoint(2689, 3549, 0))),\n\t\tnew Clues(617, \"Rune platebody: Falo\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_FALO_17, List.of(new WorldPoint(2689, 3549, 0))),\n\t\tnew Clues(618, \"Ivandis flail: Falo\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_FALO_18, List.of(new WorldPoint(2689, 3549, 0))),\n\t\tnew Clues(619, \"anglerfish: Sherlock\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_SHERLOCK_0, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(620, \"blood rune: Sherlock\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_SHERLOCK_1, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(621, \"burn magic: Sherlock\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_SHERLOCK_2, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(622, \"burn redwood: Sherlock\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_SHERLOCK_3, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(623, \"tecu: Sherlock\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_SHERLOCK_4, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(624, \"chop redwood: Sherlock\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_SHERLOCK_5, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(625, \"graceful: Sherlock\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_SHERLOCK_6, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(626, \"light orb: Sherlock\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_SHERLOCK_7, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(627, \"tablet: Sherlock\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_SHERLOCK_8, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(628, \"amulet: Sherlock\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_SHERLOCK_9, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(629, \"burn fiyr: Sherlock\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_SHERLOCK_10, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(630, \"eel: Sherlock\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_SHERLOCK_11, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(631, \"whip: Sherlock\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_SHERLOCK_12, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(632, \"rune dart: Sherlock\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_SHERLOCK_13, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(633, \"kill fiyr: Sherlock\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_SHERLOCK_14, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(634, \"shaman: Sherlock\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_SHERLOCK_15, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(635, \"reanimate: Sherlock\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_SHERLOCK_16, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(636, \"mage: Sherlock\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_SHERLOCK_17, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(637, \"runite ore: Sherlock\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_SHERLOCK_18, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(638, \"ranging mix: Sherlock\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_SHERLOCK_19, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(639, \"anti-venom: Sherlock\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_SHERLOCK_20, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(640, \"elf: Sherlock\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_SHERLOCK_21, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(641, \"nechryael: Sherlock\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_SHERLOCK_22, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(642, \"rune med: Sherlock\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_SHERLOCK_23, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(643, \"gem: Sherlock\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_SHERLOCK_24, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(644, \"tree: Sherlock\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_SHERLOCK_25, List.of(new WorldPoint(2733, 3413, 0))),\n\t\tnew Clues(645, \"Warriors\u0027 Guild: Dig\", HotColdLocation.ASGARNIA_WARRIORS.ordinal(), ClueTier.MASTER, HotColdLocation.ASGARNIA_WARRIORS.getArea(), List.of(HotColdLocation.ASGARNIA_WARRIORS.getWorldPoint())),\n\t\tnew Clues(646, \"Jatix\u0027s Herblore: Dig\", HotColdLocation.ASGARNIA_JATIX.ordinal(), ClueTier.MASTER, HotColdLocation.ASGARNIA_JATIX.getArea(), List.of(HotColdLocation.ASGARNIA_JATIX.getWorldPoint())),\n\t\tnew Clues(647, \"Barbarian Village: Dig\", HotColdLocation.ASGARNIA_BARB.ordinal(), ClueTier.MASTER, HotColdLocation.ASGARNIA_BARB.getArea(), List.of(HotColdLocation.ASGARNIA_BARB.getWorldPoint())),\n\t\tnew Clues(648, \"Miazrqa\u0027s tower: Dig\", HotColdLocation.ASGARNIA_MIAZRQA.ordinal(), ClueTier.MASTER, HotColdLocation.ASGARNIA_MIAZRQA.getArea(), List.of(HotColdLocation.ASGARNIA_MIAZRQA.getWorldPoint())),\n\t\tnew Clues(649, \"Sarah\u0027s farm: Dig\", HotColdLocation.ASGARNIA_COW.ordinal(), ClueTier.MASTER, HotColdLocation.ASGARNIA_COW.getArea(), List.of(HotColdLocation.ASGARNIA_COW.getWorldPoint())),\n\t\tnew Clues(650, \"Party Room: Dig\", HotColdLocation.ASGARNIA_PARTY_ROOM.ordinal(), ClueTier.MASTER, HotColdLocation.ASGARNIA_PARTY_ROOM.getArea(), List.of(HotColdLocation.ASGARNIA_PARTY_ROOM.getWorldPoint())),\n\t\tnew Clues(651, \"Crafting Guild: Dig\", HotColdLocation.ASGARNIA_CRAFT_GUILD.ordinal(), ClueTier.MASTER, HotColdLocation.ASGARNIA_CRAFT_GUILD.getArea(), List.of(HotColdLocation.ASGARNIA_CRAFT_GUILD.getWorldPoint())),\n\t\tnew Clues(652, \"Rimmington mine: Dig\", HotColdLocation.ASGARNIA_RIMMINGTON.ordinal(), ClueTier.MASTER, HotColdLocation.ASGARNIA_RIMMINGTON.getArea(), List.of(HotColdLocation.ASGARNIA_RIMMINGTON.getWorldPoint())),\n\t\tnew Clues(653, \"Mudskipper Point: Dig\", HotColdLocation.ASGARNIA_MUDSKIPPER.ordinal(), ClueTier.MASTER, HotColdLocation.ASGARNIA_MUDSKIPPER.getArea(), List.of(HotColdLocation.ASGARNIA_MUDSKIPPER.getWorldPoint())),\n\t\tnew Clues(654, \"Troll arena: Dig\", HotColdLocation.ASGARNIA_TROLL.ordinal(), ClueTier.MASTER, HotColdLocation.ASGARNIA_TROLL.getArea(), List.of(HotColdLocation.ASGARNIA_TROLL.getWorldPoint())),\n\t\tnew Clues(655, \"Nardah cave: Dig\", HotColdLocation.DESERT_GENIE.ordinal(), ClueTier.MASTER, HotColdLocation.DESERT_GENIE.getArea(), List.of(HotColdLocation.DESERT_GENIE.getWorldPoint())),\n\t\tnew Clues(656, \"Al Kharid mine west: Dig\", HotColdLocation.DESERT_ALKHARID_MINE.ordinal(), ClueTier.MASTER, HotColdLocation.DESERT_ALKHARID_MINE.getArea(), List.of(HotColdLocation.DESERT_ALKHARID_MINE.getWorldPoint())),\n\t\tnew Clues(657, \"Menaphos gate: Dig\", HotColdLocation.DESERT_MENAPHOS_GATE.ordinal(), ClueTier.MASTER, HotColdLocation.DESERT_MENAPHOS_GATE.getArea(), List.of(HotColdLocation.DESERT_MENAPHOS_GATE.getWorldPoint())),\n\t\tnew Clues(658, \"Bedabin Camp: Dig\", HotColdLocation.DESERT_BEDABIN_CAMP.ordinal(), ClueTier.MASTER, HotColdLocation.DESERT_BEDABIN_CAMP.getArea(), List.of(HotColdLocation.DESERT_BEDABIN_CAMP.getWorldPoint())),\n\t\tnew Clues(659, \"Uzer west: Dig\", HotColdLocation.DESERT_UZER.ordinal(), ClueTier.MASTER, HotColdLocation.DESERT_UZER.getArea(), List.of(HotColdLocation.DESERT_UZER.getWorldPoint())),\n\t\tnew Clues(660, \"Pollnivneach west: Dig\", HotColdLocation.DESERT_POLLNIVNEACH.ordinal(), ClueTier.MASTER, HotColdLocation.DESERT_POLLNIVNEACH.getArea(), List.of(HotColdLocation.DESERT_POLLNIVNEACH.getWorldPoint())),\n\t\tnew Clues(661, \"Mage Training Arena: Dig\", HotColdLocation.DESERT_MTA.ordinal(), ClueTier.MASTER, HotColdLocation.DESERT_MTA.getArea(), List.of(HotColdLocation.DESERT_MTA.getWorldPoint())),\n\t\tnew Clues(662, \"Ruins of Ullek: Dig\", HotColdLocation.DESERT_RUINS_OF_ULLEK.ordinal(), ClueTier.MASTER, HotColdLocation.DESERT_RUINS_OF_ULLEK.getArea(), List.of(HotColdLocation.DESERT_RUINS_OF_ULLEK.getWorldPoint())),\n\t\tnew Clues(663, \"Shantay Pass: Dig\", HotColdLocation.DESERT_SHANTY.ordinal(), ClueTier.MASTER, HotColdLocation.DESERT_SHANTY.getArea(), List.of(HotColdLocation.DESERT_SHANTY.getWorldPoint())),\n\t\tnew Clues(664, \"Jiggig west: Dig\", HotColdLocation.FELDIP_HILLS_JIGGIG.ordinal(), ClueTier.MASTER, HotColdLocation.FELDIP_HILLS_JIGGIG.getArea(), List.of(HotColdLocation.FELDIP_HILLS_JIGGIG.getWorldPoint())),\n\t\tnew Clues(665, \"Feldip Hills: Dig\", HotColdLocation.FELDIP_HILLS_SW.ordinal(), ClueTier.MASTER, HotColdLocation.FELDIP_HILLS_SW.getArea(), List.of(HotColdLocation.FELDIP_HILLS_SW.getWorldPoint())),\n\t\tnew Clues(666, \"Lemantolly Undri: Dig\", HotColdLocation.FELDIP_HILLS_GNOME_GLITER.ordinal(), ClueTier.MASTER, HotColdLocation.FELDIP_HILLS_GNOME_GLITER.getArea(), List.of(HotColdLocation.FELDIP_HILLS_GNOME_GLITER.getWorldPoint())),\n\t\tnew Clues(667, \"Rantz: Dig\", HotColdLocation.FELDIP_HILLS_RANTZ.ordinal(), ClueTier.MASTER, HotColdLocation.FELDIP_HILLS_RANTZ.getArea(), List.of(HotColdLocation.FELDIP_HILLS_RANTZ.getWorldPoint())),\n\t\tnew Clues(668, \"Jiggig south: Dig\", HotColdLocation.FELDIP_HILLS_SOUTH.ordinal(), ClueTier.MASTER, HotColdLocation.FELDIP_HILLS_SOUTH.getArea(), List.of(HotColdLocation.FELDIP_HILLS_SOUTH.getWorldPoint())),\n\t\tnew Clues(669, \"red chinchompas: Dig\", HotColdLocation.FELDIP_HILLS_RED_CHIN.ordinal(), ClueTier.MASTER, HotColdLocation.FELDIP_HILLS_RED_CHIN.getArea(), List.of(HotColdLocation.FELDIP_HILLS_RED_CHIN.getWorldPoint())),\n\t\tnew Clues(670, \"-shaped lake: Dig\", HotColdLocation.FELDIP_HILLS_SE.ordinal(), ClueTier.MASTER, HotColdLocation.FELDIP_HILLS_SE.getArea(), List.of(HotColdLocation.FELDIP_HILLS_SE.getWorldPoint())),\n\t\tnew Clues(671, \"Castle Wars balloon: Dig\", HotColdLocation.FELDIP_HILLS_CW_BALLOON.ordinal(), ClueTier.MASTER, HotColdLocation.FELDIP_HILLS_CW_BALLOON.getArea(), List.of(HotColdLocation.FELDIP_HILLS_CW_BALLOON.getWorldPoint())),\n\t\tnew Clues(672, \"Mountain Camp: Dig\", HotColdLocation.FREMENNIK_PROVINCE_MTN_CAMP.ordinal(), ClueTier.MASTER, HotColdLocation.FREMENNIK_PROVINCE_MTN_CAMP.getArea(), List.of(HotColdLocation.FREMENNIK_PROVINCE_MTN_CAMP.getWorldPoint())),\n\t\tnew Clues(673, \"Rellekka Hunter area: Dig\", HotColdLocation.FREMENNIK_PROVINCE_RELLEKKA_HUNTER.ordinal(), ClueTier.MASTER, HotColdLocation.FREMENNIK_PROVINCE_RELLEKKA_HUNTER.getArea(), List.of(HotColdLocation.FREMENNIK_PROVINCE_RELLEKKA_HUNTER.getWorldPoint())),\n\t\tnew Clues(674, \"Keldagrim mine: Dig\", HotColdLocation.FREMENNIK_PROVINCE_KELGADRIM_ENTRANCE.ordinal(), ClueTier.MASTER, HotColdLocation.FREMENNIK_PROVINCE_KELGADRIM_ENTRANCE.getArea(), List.of(HotColdLocation.FREMENNIK_PROVINCE_KELGADRIM_ENTRANCE.getWorldPoint())),\n\t\tnew Clues(675, \"Rellekka fence: Dig\", HotColdLocation.FREMENNIK_PROVINCE_SW.ordinal(), ClueTier.MASTER, HotColdLocation.FREMENNIK_PROVINCE_SW.getArea(), List.of(HotColdLocation.FREMENNIK_PROVINCE_SW.getWorldPoint())),\n\t\tnew Clues(676, \"Lighthouse: Dig\", HotColdLocation.FREMENNIK_PROVINCE_LIGHTHOUSE.ordinal(), ClueTier.MASTER, HotColdLocation.FREMENNIK_PROVINCE_LIGHTHOUSE.getArea(), List.of(HotColdLocation.FREMENNIK_PROVINCE_LIGHTHOUSE.getWorldPoint())),\n\t\tnew Clues(677, \"Etceteria\u0027s castle: Dig\", HotColdLocation.FREMENNIK_PROVINCE_ETCETERIA_CASTLE.ordinal(), ClueTier.MASTER, HotColdLocation.FREMENNIK_PROVINCE_ETCETERIA_CASTLE.getArea(), List.of(HotColdLocation.FREMENNIK_PROVINCE_ETCETERIA_CASTLE.getWorldPoint())),\n\t\tnew Clues(678, \"Miscellania\u0027s courtyard: Dig\", HotColdLocation.FREMENNIK_PROVINCE_MISC_COURTYARD.ordinal(), ClueTier.MASTER, HotColdLocation.FREMENNIK_PROVINCE_MISC_COURTYARD.getArea(), List.of(HotColdLocation.FREMENNIK_PROVINCE_MISC_COURTYARD.getWorldPoint())),\n\t\tnew Clues(679, \"Neitiznot rune: Dig\", HotColdLocation.FREMENNIK_PROVINCE_FREMMY_ISLES_MINE.ordinal(), ClueTier.MASTER, HotColdLocation.FREMENNIK_PROVINCE_FREMMY_ISLES_MINE.getArea(), List.of(HotColdLocation.FREMENNIK_PROVINCE_FREMMY_ISLES_MINE.getWorldPoint())),\n\t\tnew Clues(680, \"Neitiznot mine: Dig\", HotColdLocation.FREMENNIK_PROVINCE_WEST_ISLES_MINE.ordinal(), ClueTier.MASTER, HotColdLocation.FREMENNIK_PROVINCE_WEST_ISLES_MINE.getArea(), List.of(HotColdLocation.FREMENNIK_PROVINCE_WEST_ISLES_MINE.getWorldPoint())),\n\t\tnew Clues(681, \"Jatizso mine: Dig\", HotColdLocation.FREMENNIK_PROVINCE_WEST_JATIZSO_ENTRANCE.ordinal(), ClueTier.MASTER, HotColdLocation.FREMENNIK_PROVINCE_WEST_JATIZSO_ENTRANCE.getArea(), List.of(HotColdLocation.FREMENNIK_PROVINCE_WEST_JATIZSO_ENTRANCE.getWorldPoint())),\n\t\tnew Clues(682, \"Pirates\u0027 Cove: Dig\", HotColdLocation.FREMENNIK_PROVINCE_PIRATES_COVE.ordinal(), ClueTier.MASTER, HotColdLocation.FREMENNIK_PROVINCE_PIRATES_COVE.getArea(), List.of(HotColdLocation.FREMENNIK_PROVINCE_PIRATES_COVE.getWorldPoint())),\n\t\tnew Clues(683, \"Astral altar: Dig\", HotColdLocation.FREMENNIK_PROVINCE_ASTRAL_ALTER.ordinal(), ClueTier.MASTER, HotColdLocation.FREMENNIK_PROVINCE_ASTRAL_ALTER.getArea(), List.of(HotColdLocation.FREMENNIK_PROVINCE_ASTRAL_ALTER.getWorldPoint())),\n\t\tnew Clues(684, \"Lunar Isle village: Dig\", HotColdLocation.FREMENNIK_PROVINCE_LUNAR_VILLAGE.ordinal(), ClueTier.MASTER, HotColdLocation.FREMENNIK_PROVINCE_LUNAR_VILLAGE.getArea(), List.of(HotColdLocation.FREMENNIK_PROVINCE_LUNAR_VILLAGE.getWorldPoint())),\n\t\tnew Clues(685, \"Lunar Isle north: Dig\", HotColdLocation.FREMENNIK_PROVINCE_LUNAR_NORTH.ordinal(), ClueTier.MASTER, HotColdLocation.FREMENNIK_PROVINCE_LUNAR_NORTH.getArea(), List.of(HotColdLocation.FREMENNIK_PROVINCE_LUNAR_NORTH.getWorldPoint())),\n\t\tnew Clues(686, \"Isle of Souls Mine: Dig\", HotColdLocation.ISLE_OF_SOULS_MINE.ordinal(), ClueTier.MASTER, HotColdLocation.ISLE_OF_SOULS_MINE.getArea(), List.of(HotColdLocation.ISLE_OF_SOULS_MINE.getWorldPoint())),\n\t\tnew Clues(687, \"Sinclair Mansion: Dig\", HotColdLocation.KANDARIN_SINCLAR_MANSION.ordinal(), ClueTier.MASTER, HotColdLocation.KANDARIN_SINCLAR_MANSION.getArea(), List.of(HotColdLocation.KANDARIN_SINCLAR_MANSION.getWorldPoint())),\n\t\tnew Clues(688, \"Catherby rocks: Dig\", HotColdLocation.KANDARIN_CATHERBY.ordinal(), ClueTier.MASTER, HotColdLocation.KANDARIN_CATHERBY.getArea(), List.of(HotColdLocation.KANDARIN_CATHERBY.getWorldPoint())),\n\t\tnew Clues(689, \"Grand Tree: Dig\", HotColdLocation.KANDARIN_GRAND_TREE.ordinal(), ClueTier.MASTER, HotColdLocation.KANDARIN_GRAND_TREE.getArea(), List.of(HotColdLocation.KANDARIN_GRAND_TREE.getWorldPoint())),\n\t\tnew Clues(690, \"Seers\u0027 Village: Dig\", HotColdLocation.KANDARIN_SEERS.ordinal(), ClueTier.MASTER, HotColdLocation.KANDARIN_SEERS.getArea(), List.of(HotColdLocation.KANDARIN_SEERS.getWorldPoint())),\n\t\tnew Clues(691, \"McGrubor\u0027s Wood: Dig\", HotColdLocation.KANDARIN_MCGRUBORS_WOOD.ordinal(), ClueTier.MASTER, HotColdLocation.KANDARIN_MCGRUBORS_WOOD.getArea(), List.of(HotColdLocation.KANDARIN_MCGRUBORS_WOOD.getWorldPoint())),\n\t\tnew Clues(692, \"Fishing Guild: Dig\", HotColdLocation.KANDARIN_FISHING_BUILD.ordinal(), ClueTier.MASTER, HotColdLocation.KANDARIN_FISHING_BUILD.getArea(), List.of(HotColdLocation.KANDARIN_FISHING_BUILD.getWorldPoint())),\n\t\tnew Clues(693, \"Witchaven: Dig\", HotColdLocation.KANDARIN_WITCHHAVEN.ordinal(), ClueTier.MASTER, HotColdLocation.KANDARIN_WITCHHAVEN.getArea(), List.of(HotColdLocation.KANDARIN_WITCHHAVEN.getWorldPoint())),\n\t\tnew Clues(694, \"Necromancer Tower: Dig\", HotColdLocation.KANDARIN_NECRO_TOWER.ordinal(), ClueTier.MASTER, HotColdLocation.KANDARIN_NECRO_TOWER.getArea(), List.of(HotColdLocation.KANDARIN_NECRO_TOWER.getWorldPoint())),\n\t\tnew Clues(695, \"Fight Arena: Dig\", HotColdLocation.KANDARIN_FIGHT_ARENA.ordinal(), ClueTier.MASTER, HotColdLocation.KANDARIN_FIGHT_ARENA.getArea(), List.of(HotColdLocation.KANDARIN_FIGHT_ARENA.getWorldPoint())),\n\t\tnew Clues(696, \"Tree Gnome Village: Dig\", HotColdLocation.KANDARIN_TREE_GNOME_VILLAGE.ordinal(), ClueTier.MASTER, HotColdLocation.KANDARIN_TREE_GNOME_VILLAGE.getArea(), List.of(HotColdLocation.KANDARIN_TREE_GNOME_VILLAGE.getWorldPoint())),\n\t\tnew Clues(697, \"Grave of Scorpius: Dig\", HotColdLocation.KANDARIN_GRAVE_OF_SCORPIUS.ordinal(), ClueTier.MASTER, HotColdLocation.KANDARIN_GRAVE_OF_SCORPIUS.getArea(), List.of(HotColdLocation.KANDARIN_GRAVE_OF_SCORPIUS.getWorldPoint())),\n\t\tnew Clues(698, \"Khazard Battlefield: Dig\", HotColdLocation.KANDARIN_KHAZARD_BATTLEFIELD.ordinal(), ClueTier.MASTER, HotColdLocation.KANDARIN_KHAZARD_BATTLEFIELD.getArea(), List.of(HotColdLocation.KANDARIN_KHAZARD_BATTLEFIELD.getWorldPoint())),\n\t\tnew Clues(699, \"West Ardougne: Dig\", HotColdLocation.KANDARIN_WEST_ARDY.ordinal(), ClueTier.MASTER, HotColdLocation.KANDARIN_WEST_ARDY.getArea(), List.of(HotColdLocation.KANDARIN_WEST_ARDY.getWorldPoint())),\n\t\tnew Clues(700, \"Tree Gnome Stronghold: Dig\", HotColdLocation.KANDARIN_SW_TREE_GNOME_STRONGHOLD.ordinal(), ClueTier.MASTER, HotColdLocation.KANDARIN_SW_TREE_GNOME_STRONGHOLD.getArea(), List.of(HotColdLocation.KANDARIN_SW_TREE_GNOME_STRONGHOLD.getWorldPoint())),\n\t\tnew Clues(701, \"Outpost: Dig\", HotColdLocation.KANDARIN_OUTPOST.ordinal(), ClueTier.MASTER, HotColdLocation.KANDARIN_OUTPOST.getArea(), List.of(HotColdLocation.KANDARIN_OUTPOST.getWorldPoint())),\n\t\tnew Clues(702, \"Baxtorian Falls: Dig\", HotColdLocation.KANDARIN_BAXTORIAN_FALLS.ordinal(), ClueTier.MASTER, HotColdLocation.KANDARIN_BAXTORIAN_FALLS.getArea(), List.of(HotColdLocation.KANDARIN_BAXTORIAN_FALLS.getWorldPoint())),\n\t\tnew Clues(703, \"Barbarian Agility Course: Dig\", HotColdLocation.KANDARIN_BA_AGILITY_COURSE.ordinal(), ClueTier.MASTER, HotColdLocation.KANDARIN_BA_AGILITY_COURSE.getArea(), List.of(HotColdLocation.KANDARIN_BA_AGILITY_COURSE.getWorldPoint())),\n\t\tnew Clues(704, \"Musa Point: Dig\", HotColdLocation.KARAMJA_MUSA_POINT.ordinal(), ClueTier.MASTER, HotColdLocation.KARAMJA_MUSA_POINT.getArea(), List.of(HotColdLocation.KARAMJA_MUSA_POINT.getWorldPoint())),\n\t\tnew Clues(705, \"Brimhaven fruit tree: Dig\", HotColdLocation.KARAMJA_BRIMHAVEN_FRUIT_TREE.ordinal(), ClueTier.MASTER, HotColdLocation.KARAMJA_BRIMHAVEN_FRUIT_TREE.getArea(), List.of(HotColdLocation.KARAMJA_BRIMHAVEN_FRUIT_TREE.getWorldPoint())),\n\t\tnew Clues(706, \"Brimhaven west: Dig\", HotColdLocation.KARAMJA_WEST_BRIMHAVEN.ordinal(), ClueTier.MASTER, HotColdLocation.KARAMJA_WEST_BRIMHAVEN.getArea(), List.of(HotColdLocation.KARAMJA_WEST_BRIMHAVEN.getWorldPoint())),\n\t\tnew Clues(707, \"Brimhaven gnome glider: Dig\", HotColdLocation.KARAMJA_GLIDER.ordinal(), ClueTier.MASTER, HotColdLocation.KARAMJA_GLIDER.getArea(), List.of(HotColdLocation.KARAMJA_GLIDER.getWorldPoint())),\n\t\tnew Clues(708, \"Kharazi Jungle north-east: Dig\", HotColdLocation.KARAMJA_KHARAZI_NE.ordinal(), ClueTier.MASTER, HotColdLocation.KARAMJA_KHARAZI_NE.getArea(), List.of(HotColdLocation.KARAMJA_KHARAZI_NE.getWorldPoint())),\n\t\tnew Clues(709, \"Kharazi Jungle south-west: Dig\", HotColdLocation.KARAMJA_KHARAZI_SW.ordinal(), ClueTier.MASTER, HotColdLocation.KARAMJA_KHARAZI_SW.getArea(), List.of(HotColdLocation.KARAMJA_KHARAZI_SW.getWorldPoint())),\n\t\tnew Clues(710, \"Crash Island: Dig\", HotColdLocation.KARAMJA_CRASH_ISLAND.ordinal(), ClueTier.MASTER, HotColdLocation.KARAMJA_CRASH_ISLAND.getArea(), List.of(HotColdLocation.KARAMJA_CRASH_ISLAND.getWorldPoint())),\n\t\tnew Clues(711, \"Champion\u0027s Guild: Dig\", HotColdLocation.MISTHALIN_VARROCK_STONE_CIRCLE.ordinal(), ClueTier.MASTER, HotColdLocation.MISTHALIN_VARROCK_STONE_CIRCLE.getArea(), List.of(HotColdLocation.MISTHALIN_VARROCK_STONE_CIRCLE.getWorldPoint())),\n\t\tnew Clues(712, \"Lumbridge Fishing tutor: Dig\", HotColdLocation.MISTHALIN_LUMBRIDGE.ordinal(), ClueTier.MASTER, HotColdLocation.MISTHALIN_LUMBRIDGE.getArea(), List.of(HotColdLocation.MISTHALIN_LUMBRIDGE.getWorldPoint())),\n\t\tnew Clues(713, \"Lumbridge windmill pond: Dig\", HotColdLocation.MISTHALIN_LUMBRIDGE_2.ordinal(), ClueTier.MASTER, HotColdLocation.MISTHALIN_LUMBRIDGE_2.getArea(), List.of(HotColdLocation.MISTHALIN_LUMBRIDGE_2.getWorldPoint())),\n\t\tnew Clues(714, \"Gertrude\u0027s house: Dig\", HotColdLocation.MISTHALIN_GERTUDES.ordinal(), ClueTier.MASTER, HotColdLocation.MISTHALIN_GERTUDES.getArea(), List.of(HotColdLocation.MISTHALIN_GERTUDES.getWorldPoint())),\n\t\tnew Clues(715, \"Draynor Village bank: Dig\", HotColdLocation.MISTHALIN_DRAYNOR_BANK.ordinal(), ClueTier.MASTER, HotColdLocation.MISTHALIN_DRAYNOR_BANK.getArea(), List.of(HotColdLocation.MISTHALIN_DRAYNOR_BANK.getWorldPoint())),\n\t\tnew Clues(716, \"Lumber Yard: Dig\", HotColdLocation.MISTHALIN_LUMBER_YARD.ordinal(), ClueTier.MASTER, HotColdLocation.MISTHALIN_LUMBER_YARD.getArea(), List.of(HotColdLocation.MISTHALIN_LUMBER_YARD.getWorldPoint())),\n\t\tnew Clues(717, \"Burgh de Rott: Dig\", HotColdLocation.MORYTANIA_BURGH_DE_ROTT.ordinal(), ClueTier.MASTER, HotColdLocation.MORYTANIA_BURGH_DE_ROTT.getArea(), List.of(HotColdLocation.MORYTANIA_BURGH_DE_ROTT.getWorldPoint())),\n\t\tnew Clues(718, \"Darkmeyer: Dig\", HotColdLocation.MORYTANIA_DARKMEYER.ordinal(), ClueTier.MASTER, HotColdLocation.MORYTANIA_DARKMEYER.getArea(), List.of(HotColdLocation.MORYTANIA_DARKMEYER.getWorldPoint())),\n\t\tnew Clues(719, \"ALQ: Dig\", HotColdLocation.MORYTANIA_PORT_PHASMATYS.ordinal(), ClueTier.MASTER, HotColdLocation.MORYTANIA_PORT_PHASMATYS.getArea(), List.of(HotColdLocation.MORYTANIA_PORT_PHASMATYS.getWorldPoint())),\n\t\tnew Clues(720, \"The Hollows: Dig\", HotColdLocation.MORYTANIA_HOLLOWS.ordinal(), ClueTier.MASTER, HotColdLocation.MORYTANIA_HOLLOWS.getArea(), List.of(HotColdLocation.MORYTANIA_HOLLOWS.getWorldPoint())),\n\t\tnew Clues(721, \"Mort Myre Swamp: Dig\", HotColdLocation.MORYTANIA_SWAMP.ordinal(), ClueTier.MASTER, HotColdLocation.MORYTANIA_SWAMP.getArea(), List.of(HotColdLocation.MORYTANIA_SWAMP.getWorldPoint())),\n\t\tnew Clues(722, \"Haunted Mine: Dig\", HotColdLocation.MORYTANIA_HAUNTED_MINE.ordinal(), ClueTier.MASTER, HotColdLocation.MORYTANIA_HAUNTED_MINE.getArea(), List.of(HotColdLocation.MORYTANIA_HAUNTED_MINE.getWorldPoint())),\n\t\tnew Clues(723, \"Mausoleum south: Dig\", HotColdLocation.MORYTANIA_MAUSOLEUM.ordinal(), ClueTier.MASTER, HotColdLocation.MORYTANIA_MAUSOLEUM.getArea(), List.of(HotColdLocation.MORYTANIA_MAUSOLEUM.getWorldPoint())),\n\t\tnew Clues(724, \"Mos Le\u0027Harmless lakes: Dig\", HotColdLocation.MORYTANIA_MOS_LES_HARMLESS.ordinal(), ClueTier.MASTER, HotColdLocation.MORYTANIA_MOS_LES_HARMLESS.getArea(), List.of(HotColdLocation.MORYTANIA_MOS_LES_HARMLESS.getWorldPoint())),\n\t\tnew Clues(725, \"Mos Le\u0027Harmless bar: Dig\", HotColdLocation.MORYTANIA_MOS_LES_HARMLESS_BAR.ordinal(), ClueTier.MASTER, HotColdLocation.MORYTANIA_MOS_LES_HARMLESS_BAR.getArea(), List.of(HotColdLocation.MORYTANIA_MOS_LES_HARMLESS_BAR.getWorldPoint())),\n\t\tnew Clues(726, \"Dragontooth north: Dig\", HotColdLocation.MORYTANIA_DRAGONTOOTH_NORTH.ordinal(), ClueTier.MASTER, HotColdLocation.MORYTANIA_DRAGONTOOTH_NORTH.getArea(), List.of(HotColdLocation.MORYTANIA_DRAGONTOOTH_NORTH.getWorldPoint())),\n\t\tnew Clues(727, \"Dragontooth south: Dig\", HotColdLocation.MORYTANIA_DRAGONTOOTH_SOUTH.ordinal(), ClueTier.MASTER, HotColdLocation.MORYTANIA_DRAGONTOOTH_SOUTH.getArea(), List.of(HotColdLocation.MORYTANIA_DRAGONTOOTH_SOUTH.getWorldPoint())),\n\t\tnew Clues(728, \"Slepe tents: Dig\", HotColdLocation.MORYTANIA_SLEPE_TENTS.ordinal(), ClueTier.MASTER, HotColdLocation.MORYTANIA_SLEPE_TENTS.getArea(), List.of(HotColdLocation.MORYTANIA_SLEPE_TENTS.getWorldPoint())),\n\t\tnew Clues(729, \"Bazaar: Dig\", HotColdLocation.VARLAMORE_BAZAAR.ordinal(), ClueTier.MASTER, HotColdLocation.VARLAMORE_BAZAAR.getArea(), List.of(HotColdLocation.VARLAMORE_BAZAAR.getWorldPoint())),\n\t\tnew Clues(730, \"Locus Oasis: Dig\", HotColdLocation.VARLAMORE_LOCUS_OASIS.ordinal(), ClueTier.MASTER, HotColdLocation.VARLAMORE_LOCUS_OASIS.getArea(), List.of(HotColdLocation.VARLAMORE_LOCUS_OASIS.getWorldPoint())),\n\t\tnew Clues(731, \"Tlati Rainforest: Dig\", HotColdLocation.VARLAMORE_RAINFOREST_CENTRE.ordinal(), ClueTier.MASTER, HotColdLocation.VARLAMORE_RAINFOREST_CENTRE.getArea(), List.of(HotColdLocation.VARLAMORE_RAINFOREST_CENTRE.getWorldPoint())),\n\t\tnew Clues(732, \"Sunset Coast: Dig\", HotColdLocation.VARLAMORE_SUNSET_COAST.ordinal(), ClueTier.MASTER, HotColdLocation.VARLAMORE_SUNSET_COAST.getArea(), List.of(HotColdLocation.VARLAMORE_SUNSET_COAST.getWorldPoint())),\n\t\tnew Clues(733, \"Villa Lucens: Dig\", HotColdLocation.VARLAMORE_VILLA_LUCENS.ordinal(), ClueTier.MASTER, HotColdLocation.VARLAMORE_VILLA_LUCENS.getArea(), List.of(HotColdLocation.VARLAMORE_VILLA_LUCENS.getWorldPoint())),\n\t\tnew Clues(734, \"Eagles\u0027 Peak: Dig\", HotColdLocation.WESTERN_PROVINCE_EAGLES_PEAK.ordinal(), ClueTier.MASTER, HotColdLocation.WESTERN_PROVINCE_EAGLES_PEAK.getArea(), List.of(HotColdLocation.WESTERN_PROVINCE_EAGLES_PEAK.getWorldPoint())),\n\t\tnew Clues(735, \"Piscatoris Fishing Colony: Dig\", HotColdLocation.WESTERN_PROVINCE_PISCATORIS.ordinal(), ClueTier.MASTER, HotColdLocation.WESTERN_PROVINCE_PISCATORIS.getArea(), List.of(HotColdLocation.WESTERN_PROVINCE_PISCATORIS.getWorldPoint())),\n\t\tnew Clues(736, \"Piscatoris Hunter area: Dig\", HotColdLocation.WESTERN_PROVINCE_PISCATORIS_HUNTER_AREA.ordinal(), ClueTier.MASTER, HotColdLocation.WESTERN_PROVINCE_PISCATORIS_HUNTER_AREA.getArea(), List.of(HotColdLocation.WESTERN_PROVINCE_PISCATORIS_HUNTER_AREA.getWorldPoint())),\n\t\tnew Clues(737, \"Arandar: Dig\", HotColdLocation.WESTERN_PROVINCE_ARANDAR.ordinal(), ClueTier.MASTER, HotColdLocation.WESTERN_PROVINCE_ARANDAR.getArea(), List.of(HotColdLocation.WESTERN_PROVINCE_ARANDAR.getWorldPoint())),\n\t\tnew Clues(738, \"Iorwerth Camp east: Dig\", HotColdLocation.WESTERN_PROVINCE_ELF_CAMP_EAST.ordinal(), ClueTier.MASTER, HotColdLocation.WESTERN_PROVINCE_ELF_CAMP_EAST.getArea(), List.of(HotColdLocation.WESTERN_PROVINCE_ELF_CAMP_EAST.getWorldPoint())),\n\t\tnew Clues(739, \"Iorwerth Camp north-west: Dig\", HotColdLocation.WESTERN_PROVINCE_ELF_CAMP_NW.ordinal(), ClueTier.MASTER, HotColdLocation.WESTERN_PROVINCE_ELF_CAMP_NW.getArea(), List.of(HotColdLocation.WESTERN_PROVINCE_ELF_CAMP_NW.getWorldPoint())),\n\t\tnew Clues(740, \"Lletya: Dig\", HotColdLocation.WESTERN_PROVINCE_LLETYA.ordinal(), ClueTier.MASTER, HotColdLocation.WESTERN_PROVINCE_LLETYA.getArea(), List.of(HotColdLocation.WESTERN_PROVINCE_LLETYA.getWorldPoint())),\n\t\tnew Clues(741, \"Tyras Camp: Dig\", HotColdLocation.WESTERN_PROVINCE_TYRAS.ordinal(), ClueTier.MASTER, HotColdLocation.WESTERN_PROVINCE_TYRAS.getArea(), List.of(HotColdLocation.WESTERN_PROVINCE_TYRAS.getWorldPoint())),\n\t\tnew Clues(742, \"Zul-Andra: Dig\", HotColdLocation.WESTERN_PROVINCE_ZULANDRA.ordinal(), ClueTier.MASTER, HotColdLocation.WESTERN_PROVINCE_ZULANDRA.getArea(), List.of(HotColdLocation.WESTERN_PROVINCE_ZULANDRA.getWorldPoint())),\n\t\tnew Clues(743, \"GE north: Dig\", HotColdLocation.WILDERNESS_5.ordinal(), ClueTier.MASTER, HotColdLocation.WILDERNESS_5.getArea(), List.of(HotColdLocation.WILDERNESS_5.getWorldPoint())),\n\t\tnew Clues(744, \"Dark Warriors\u0027 Fortress: Dig\", HotColdLocation.WILDERNESS_12.ordinal(), ClueTier.MASTER, HotColdLocation.WILDERNESS_12.getArea(), List.of(HotColdLocation.WILDERNESS_12.getWorldPoint())),\n\t\tnew Clues(745, \"Corporeal Beast\u0027s lair: Dig\", HotColdLocation.WILDERNESS_20.ordinal(), ClueTier.MASTER, HotColdLocation.WILDERNESS_20.getArea(), List.of(HotColdLocation.WILDERNESS_20.getWorldPoint())),\n\t\tnew Clues(746, \"Eastern Ruins: Dig\", HotColdLocation.WILDERNESS_27.ordinal(), ClueTier.MASTER, HotColdLocation.WILDERNESS_27.getArea(), List.of(HotColdLocation.WILDERNESS_27.getWorldPoint())),\n\t\tnew Clues(747, \"Wilderness crabs teleport: Dig\", HotColdLocation.WILDERNESS_28.ordinal(), ClueTier.MASTER, HotColdLocation.WILDERNESS_28.getArea(), List.of(HotColdLocation.WILDERNESS_28.getWorldPoint())),\n\t\tnew Clues(748, \"black knights: Dig\", HotColdLocation.WILDERNESS_32.ordinal(), ClueTier.MASTER, HotColdLocation.WILDERNESS_32.getArea(), List.of(HotColdLocation.WILDERNESS_32.getWorldPoint())),\n\t\tnew Clues(749, \"Wilderness canoe: Dig\", HotColdLocation.WILDERNESS_35.ordinal(), ClueTier.MASTER, HotColdLocation.WILDERNESS_35.getArea(), List.of(HotColdLocation.WILDERNESS_35.getWorldPoint())),\n\t\tnew Clues(750, \"Chaos Temple: Dig\", HotColdLocation.WILDERNESS_37.ordinal(), ClueTier.MASTER, HotColdLocation.WILDERNESS_37.getArea(), List.of(HotColdLocation.WILDERNESS_37.getWorldPoint())),\n\t\tnew Clues(751, \"Callisto\u0027s Den: Dig\", HotColdLocation.WILDERNESS_38.ordinal(), ClueTier.MASTER, HotColdLocation.WILDERNESS_38.getArea(), List.of(HotColdLocation.WILDERNESS_38.getWorldPoint())),\n\t\tnew Clues(752, \"Deserted Keep: Dig\", HotColdLocation.WILDERNESS_49.ordinal(), ClueTier.MASTER, HotColdLocation.WILDERNESS_49.getArea(), List.of(HotColdLocation.WILDERNESS_49.getWorldPoint())),\n\t\tnew Clues(753, \"Wilderness Agility Course: Dig\", HotColdLocation.WILDERNESS_54.ordinal(), ClueTier.MASTER, HotColdLocation.WILDERNESS_54.getArea(), List.of(HotColdLocation.WILDERNESS_54.getWorldPoint())),\n\t\tnew Clues(754, \"Blast mine bank: Dig\", HotColdLocation.ZEAH_BLASTMINE_BANK.ordinal(), ClueTier.MASTER, HotColdLocation.ZEAH_BLASTMINE_BANK.getArea(), List.of(HotColdLocation.ZEAH_BLASTMINE_BANK.getWorldPoint())),\n\t\tnew Clues(755, \"Blast mine north: Dig\", HotColdLocation.ZEAH_BLASTMINE_NORTH.ordinal(), ClueTier.MASTER, HotColdLocation.ZEAH_BLASTMINE_NORTH.getArea(), List.of(HotColdLocation.ZEAH_BLASTMINE_NORTH.getWorldPoint())),\n\t\tnew Clues(756, \"lovakite furnace: Dig\", HotColdLocation.ZEAH_LOVAKITE_FURNACE.ordinal(), ClueTier.MASTER, HotColdLocation.ZEAH_LOVAKITE_FURNACE.getArea(), List.of(HotColdLocation.ZEAH_LOVAKITE_FURNACE.getWorldPoint())),\n\t\tnew Clues(757, \"Lovakengj mithril: Dig\", HotColdLocation.ZEAH_LOVAKENGJ_MINE.ordinal(), ClueTier.MASTER, HotColdLocation.ZEAH_LOVAKENGJ_MINE.getArea(), List.of(HotColdLocation.ZEAH_LOVAKENGJ_MINE.getWorldPoint())),\n\t\tnew Clues(758, \"Sulphur mine: Dig\", HotColdLocation.ZEAH_SULPHR_MINE.ordinal(), ClueTier.MASTER, HotColdLocation.ZEAH_SULPHR_MINE.getArea(), List.of(HotColdLocation.ZEAH_SULPHR_MINE.getWorldPoint())),\n\t\tnew Clues(759, \"War tent: Dig\", HotColdLocation.ZEAH_SHAYZIEN_BANK.ordinal(), ClueTier.MASTER, HotColdLocation.ZEAH_SHAYZIEN_BANK.getArea(), List.of(HotColdLocation.ZEAH_SHAYZIEN_BANK.getWorldPoint())),\n\t\tnew Clues(760, \"Lizardman overpass: Dig\", HotColdLocation.ZEAH_OVERPASS.ordinal(), ClueTier.MASTER, HotColdLocation.ZEAH_OVERPASS.getArea(), List.of(HotColdLocation.ZEAH_OVERPASS.getWorldPoint())),\n\t\tnew Clues(761, \"Lizardman Canyon: Dig\", HotColdLocation.ZEAH_LIZARDMAN.ordinal(), ClueTier.MASTER, HotColdLocation.ZEAH_LIZARDMAN.getArea(), List.of(HotColdLocation.ZEAH_LIZARDMAN.getWorldPoint())),\n\t\tnew Clues(762, \"Combat Ring: Dig\", HotColdLocation.ZEAH_COMBAT_RING.ordinal(), ClueTier.MASTER, HotColdLocation.ZEAH_COMBAT_RING.getArea(), List.of(HotColdLocation.ZEAH_COMBAT_RING.getWorldPoint())),\n\t\tnew Clues(763, \"Graveyard of Heroes: Dig\", HotColdLocation.ZEAH_SHAYZIEN_BANK_2.ordinal(), ClueTier.MASTER, HotColdLocation.ZEAH_SHAYZIEN_BANK_2.getArea(), List.of(HotColdLocation.ZEAH_SHAYZIEN_BANK_2.getWorldPoint())),\n\t\tnew Clues(764, \"Arceuus Library: Dig\", HotColdLocation.ZEAH_LIBRARY.ordinal(), ClueTier.MASTER, HotColdLocation.ZEAH_LIBRARY.getArea(), List.of(HotColdLocation.ZEAH_LIBRARY.getWorldPoint())),\n\t\tnew Clues(765, \"Arceuus church: Dig\", HotColdLocation.ZEAH_HOUSECHURCH.ordinal(), ClueTier.MASTER, HotColdLocation.ZEAH_HOUSECHURCH.getArea(), List.of(HotColdLocation.ZEAH_HOUSECHURCH.getWorldPoint())),\n\t\tnew Clues(766, \"Dark Altar: Dig\", HotColdLocation.ZEAH_DARK_ALTAR.ordinal(), ClueTier.MASTER, HotColdLocation.ZEAH_DARK_ALTAR.getArea(), List.of(HotColdLocation.ZEAH_DARK_ALTAR.getWorldPoint())),\n\t\tnew Clues(767, \"Arceuus entrance: Dig\", HotColdLocation.ZEAH_ARCEUUS_HOUSE.ordinal(), ClueTier.MASTER, HotColdLocation.ZEAH_ARCEUUS_HOUSE.getArea(), List.of(HotColdLocation.ZEAH_ARCEUUS_HOUSE.getWorldPoint())),\n\t\tnew Clues(769, \"Dense essence mine north-east: Dig\", HotColdLocation.ZEAH_ESSENCE_MINE_NE.ordinal(), ClueTier.MASTER, HotColdLocation.ZEAH_ESSENCE_MINE_NE.getArea(), List.of(HotColdLocation.ZEAH_ESSENCE_MINE_NE.getWorldPoint())),\n\t\tnew Clues(770, \"Piscarilius mine: Dig\", HotColdLocation.ZEAH_PISCARILUS_MINE.ordinal(), ClueTier.MASTER, HotColdLocation.ZEAH_PISCARILUS_MINE.getArea(), List.of(HotColdLocation.ZEAH_PISCARILUS_MINE.getWorldPoint())),\n\t\tnew Clues(771, \"Kingstown gravestone: Dig\", HotColdLocation.ZEAH_GOLDEN_FIELD_TAVERN.ordinal(), ClueTier.MASTER, HotColdLocation.ZEAH_GOLDEN_FIELD_TAVERN.getArea(), List.of(HotColdLocation.ZEAH_GOLDEN_FIELD_TAVERN.getWorldPoint())),\n\t\tnew Clues(772, \"Mess hall: Dig\", HotColdLocation.ZEAH_MESS_HALL.ordinal(), ClueTier.MASTER, HotColdLocation.ZEAH_MESS_HALL.getArea(), List.of(HotColdLocation.ZEAH_MESS_HALL.getWorldPoint())),\n\t\tnew Clues(773, \"Watson\u0027s house: Dig\", HotColdLocation.ZEAH_WATSONS_HOUSE.ordinal(), ClueTier.MASTER, HotColdLocation.ZEAH_WATSONS_HOUSE.getArea(), List.of(HotColdLocation.ZEAH_WATSONS_HOUSE.getWorldPoint())),\n\t\tnew Clues(774, \"Tithe Farm: Dig\", HotColdLocation.ZEAH_VANNAHS_FARM_STORE.ordinal(), ClueTier.MASTER, HotColdLocation.ZEAH_VANNAHS_FARM_STORE.getArea(), List.of(HotColdLocation.ZEAH_VANNAHS_FARM_STORE.getWorldPoint())),\n\t\tnew Clues(775, \"Farming Guild: Dig\", HotColdLocation.ZEAH_FARMING_GUILD_W.ordinal(), ClueTier.MASTER, HotColdLocation.ZEAH_FARMING_GUILD_W.getArea(), List.of(HotColdLocation.ZEAH_FARMING_GUILD_W.getWorldPoint())),\n\t\tnew Clues(776, \"Battlefront: Dig\", HotColdLocation.ZEAH_DAIRY_COW.ordinal(), ClueTier.MASTER, HotColdLocation.ZEAH_DAIRY_COW.getArea(), List.of(HotColdLocation.ZEAH_DAIRY_COW.getWorldPoint())),\n\t\tnew Clues(777, \"Kebos Swamp: Dig\", HotColdLocation.ZEAH_CRIMSON_SWIFTS.ordinal(), ClueTier.MASTER, HotColdLocation.ZEAH_CRIMSON_SWIFTS.getArea(), List.of(HotColdLocation.ZEAH_CRIMSON_SWIFTS.getWorldPoint())),\n\t\tnew Clues(778, \"Brittle Isle: Emote\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_EMOTE_24, List.of(new WorldPoint(1946, 4074, 0))),\n\t\tnew Clues(779, \"Dragon keel: Falo\", ItemID.CLUE_SCROLL_MASTER, ClueTier.MASTER, BeginnerMasterClueText.MASTER_FALO_19, List.of(new WorldPoint(2689, 3549, 0))),\n\t\tnew Clues(780, \"Great Conch: Dig\", HotColdLocation.SAIL_GREAT_CONCH.ordinal(), ClueTier.MASTER, HotColdLocation.SAIL_GREAT_CONCH.getArea(), List.of(HotColdLocation.SAIL_GREAT_CONCH.getWorldPoint())),\n\t\tnew Clues(781, \"Isle of Serpents: Dig\", HotColdLocation.SAIL_ISLE_OF_SERPENTS.ordinal(), ClueTier.MASTER, HotColdLocation.SAIL_ISLE_OF_SERPENTS.getArea(), List.of(HotColdLocation.SAIL_ISLE_OF_SERPENTS.getWorldPoint())),\n\t\tnew Clues(782, \"Drumstick Isle: Dig\", HotColdLocation.SAIL_DRUMSTICK_ISLE.ordinal(), ClueTier.MASTER, HotColdLocation.SAIL_DRUMSTICK_ISLE.getArea(), List.of(HotColdLocation.SAIL_DRUMSTICK_ISLE.getWorldPoint())),\n\t\tnew Clues(783, \"Buccaneers\u0027 Haven: Dig\", HotColdLocation.SAIL_BUCCANEERS_HAVEN.ordinal(), ClueTier.MASTER, HotColdLocation.SAIL_BUCCANEERS_HAVEN.getArea(), List.of(HotColdLocation.SAIL_BUCCANEERS_HAVEN.getWorldPoint()))\n\t);\n\n\tfinal String clueText;\n\tfinal String clueDetail;\n\tfinal Color clueDetailColor;\n\tfinal int itemID;\n\tfinal int clueID;\n\tfinal ClueTier clueTier;\n\n\t@Getter\n\tfinal OrRequirement regions;\n\n\t// To be initialized to avoid passing around\n\t@Setter\n\t@Inject\n\tpublic static ClueDetailsConfig config;\n\n\tClues(String clueDetail, int itemID, ClueTier clueTier, String clueText, List\u003cWorldPoint\u003e wps)\n\t{\n\t\tthis.clueID \u003d -1;\n\t\tthis.clueDetail \u003d clueDetail;\n\t\tthis.clueDetailColor \u003d Color.WHITE;\n\t\tthis.itemID \u003d itemID;\n\t\tthis.clueTier \u003d clueTier;\n\t\tthis.clueText \u003d clueText;\n\t\tthis.regions \u003d new OrRequirement(wps);\n\t}\n\n\tClues(int clueID, String clueDetail, int itemID, ClueTier clueTier, String clueText, List\u003cWorldPoint\u003e wps)\n\t{\n\t\tthis.clueID \u003d clueID;\n\t\tthis.clueDetail \u003d clueDetail;\n\t\tthis.clueDetailColor \u003d Color.WHITE;\n\t\tthis.itemID \u003d itemID;\n\t\tthis.clueTier \u003d clueTier;\n\t\tthis.clueText \u003d clueText;\n\t\tthis.regions \u003d new OrRequirement(wps);\n\t}\n\n\tClues(String clueDetail, Color clueDetailColor, int itemID, ClueTier clueTier, String clueText, List\u003cWorldPoint\u003e wps)\n\t{\n\t\tthis.clueID \u003d -1;\n\t\tthis.clueDetail \u003d clueDetail;\n\t\tthis.clueDetailColor \u003d clueDetailColor;\n\t\tthis.itemID \u003d itemID;\n\t\tthis.clueTier \u003d clueTier;\n\t\tthis.clueText \u003d clueText;\n\t\tthis.regions \u003d new OrRequirement(wps);\n\t}\n\n\tprivate static final Collection\u003cInteger\u003e TRACKED_CLUE_IDS \u003d List.of(\n\t\tItemID.CLUE_SCROLL_MASTER,\n\t\tItemID.CLUE_SCROLL_BEGINNER\n\t);\n\n\tprivate static final Collection\u003cInteger\u003e TRACKED_TORN_CLUE_IDS \u003d List.of(\n\t\tItemID.TORN_CLUE_SCROLL_PART_1,\n\t\tItemID.TORN_CLUE_SCROLL_PART_2,\n\t\tItemID.TORN_CLUE_SCROLL_PART_3\n\t);\n\n\tpublic static final Collection\u003cInteger\u003e DEV_MODE_IDS \u003d List.of(\n\t\tItemID.DAEYALT_ESSENCE\n\t);\n\n\tprivate static Map\u003cInteger, List\u003cClues\u003e\u003e itemIdClueCache \u003d new HashMap\u003c\u003e();\n\tprivate static Map\u003cInteger, List\u003cClues\u003e\u003e otherIdClueCache \u003d new HashMap\u003c\u003e();\n\tprivate static Map\u003cInteger, Clues\u003e clueIdClueCache \u003d new HashMap\u003c\u003e();\n\tprivate static Map\u003cInteger, Clues\u003e unfilteredClueCache \u003d new HashMap\u003c\u003e();\n\n\tpublic static void rebuildFilteredCluesCache()\n\t{\n\t\tList\u003cClueTier\u003e enabledClueTiers \u003d getEnabledClueTiers();\n\n\t\tList\u003cClues\u003e enabledClues \u003d Clues.CLUES.stream()\n\t\t\t\t.filter(c -\u003e enabledClueTiers.contains(c.getClueTier()))\n\t\t\t\t.collect(Collectors.toList());\n\n\t\titemIdClueCache \u003d enabledClues\n\t\t\t\t.stream()\n\t\t\t\t.filter(clue -\u003e clue.getItemID() \u003e\u003d 2677) // Ignore InterfaceID and HotColdLocation\n\t\t\t\t.collect(Collectors.groupingBy(Clues::getItemID));\n\n\t\totherIdClueCache \u003d enabledClues\n\t\t\t.stream()\n\t\t\t\t.filter(clue -\u003e clue.getItemID() \u003c 2677) // Only InterfaceID and HotColdLocation\n\t\t\t.collect(Collectors.groupingBy(Clues::getItemID));\n\n\t\tclueIdClueCache \u003d enabledClues\n\t\t\t\t.stream()\n\t\t\t\t.collect(Collectors.toMap(Clues::getClueID, clue -\u003e clue));\n\n\t\tunfilteredClueCache \u003d Clues.CLUES\n\t\t\t\t.stream()\n\t\t\t\t.collect(Collectors.toMap(Clues::getClueID, clue -\u003e clue));\n\t}\n\n\tprivate static List\u003cClueTier\u003e getEnabledClueTiers()\n\t{\n\t\tif (config \u003d\u003d null)\n\t\t{\n\t\t\treturn Arrays.asList(ClueTier.values());\n\t\t}\n\n\t\tList\u003cClueTier\u003e enabledClues \u003d new ArrayList\u003c\u003e();\n\t\tif (config.beginnerDetails()) enabledClues.add(ClueTier.BEGINNER);\n\t\tif (config.easyDetails()) enabledClues.add(ClueTier.EASY);\n\t\tif (config.mediumDetails())\n\t\t{\n\t\t\tenabledClues.add(ClueTier.MEDIUM);\n\t\t\tenabledClues.add(ClueTier.MEDIUM_CHALLENGE);\n\t\t\tenabledClues.add(ClueTier.MEDIUM_KEY);\n\t\t}\n\t\tif (config.hardDetails())\n\t\t{\n\t\t\tenabledClues.add(ClueTier.HARD);\n\t\t\tenabledClues.add(ClueTier.HARD_CHALLENGE);\n\t\t}\n\t\tif (config.eliteDetails())\n\t\t{\n\t\t\tenabledClues.add(ClueTier.ELITE);\n\t\t\tenabledClues.add(ClueTier.ELITE_CHALLENGE);\n\t\t}\n\t\tif (config.masterDetails()) enabledClues.add(ClueTier.MASTER);\n\n\t\treturn enabledClues;\n\t}\n\n\tpublic static Clues forItemId(int itemId)\n\t{\n\t\tClues clue \u003d clueIdClueCache.get(itemId);\n\t\tif (clue !\u003d null \u0026\u0026 clue.clueID \u003d\u003d -1)\n\t\t{\n\t\t\treturn clue;\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic static Clues forClueId(int clueId)\n\t{\n\t\treturn unfilteredClueCache.get(clueId);\n\t}\n\n\tpublic static Clues forClueIdFiltered(int clueId)\n\t{\n\t\treturn clueIdClueCache.get(clueId);\n\t}\n\n\tpublic Integer getClueID()\n\t{\n\t\tif (clueID !\u003d -1)\n\t\t{\n\t\t\treturn clueID;\n\t\t}\n\t\treturn getItemID();\n\t}\n\n\tpublic static Integer forTextGetId(String rawText)\n\t{\n\t\tfinal String text \u003d Text.sanitizeMultilineText(rawText).toLowerCase();\n\n\t\tfor (Clues clue : clueIdClueCache.values())\n\t\t{\n\t\t\tif (text.equalsIgnoreCase(clue.getClueText()))\n\t\t\t{\n\t\t\t\treturn clue.getClueID();\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic static Integer forOtherIdGetId(int otherId)\n\t{\n\t\tList\u003cClues\u003e clues \u003d otherIdClueCache.get(otherId);\n\t\tif (!clues.isEmpty())\n\t\t{\n\t\t\treturn clues.get(0).clueID;\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic String getDetail(ConfigManager configManager)\n\t{\n\t\tString text \u003d configManager.getConfiguration(\"clue-details-text\", String.valueOf(getClueID()));\n\t\tif (text !\u003d null) return text;\n\t\treturn getClueDetail();\n\t}\n\n\tpublic Color getDetailColor(ConfigManager configManager)\n\t{\n\t\tString colorCode \u003d configManager.getConfiguration(\"clue-details-color\", String.valueOf(getClueID()));\n\t\tif (colorCode !\u003d null) return Color.decode(colorCode);\n\t\treturn getClueDetailColor();\n\t}\n\n\tpublic List\u003cInteger\u003e getItems(ClueDetailsPlugin plugin, ConfigManager configManager)\n\t{\n\t\tString items \u003d configManager.getConfiguration(CLUE_ITEMS_CONFIG, String.valueOf(getClueID()));\n\t\tif (items !\u003d null)\n\t\t{\n\t\t\treturn plugin.gson.fromJson(items, new TypeToken\u003cList\u003cInteger\u003e\u003e()\n\t\t\t{\n\t\t\t}.getType());\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic static boolean isClue(int itemId, boolean isDeveloperMode)\n\t{\n\t\treturn itemIdClueCache.containsKey(itemId) || (isDeveloperMode \u0026\u0026 DEV_MODE_IDS.contains(itemId));\n\t}\n\n\tpublic static boolean isBeginnerOrMasterClue(int itemId, boolean isDeveloperMode)\n\t{\n\t\treturn TRACKED_CLUE_IDS.contains(itemId) || (isDeveloperMode \u0026\u0026 DEV_MODE_IDS.contains(itemId));\n\t}\n\n\tpublic static boolean isTrackedClueOrTornClue(int itemId, boolean isDeveloperMode)\n\t{\n\t\treturn TRACKED_CLUE_IDS.contains(itemId) || TRACKED_TORN_CLUE_IDS.contains(itemId) || (isDeveloperMode \u0026\u0026 DEV_MODE_IDS.contains(itemId));\n\t}\n\n\tpublic static Collection\u003cInteger\u003e getTrackedClueAndTornClueIds(boolean isDevMode)\n\t{\n\t\tCollection\u003cInteger\u003e allIds \u003d new ArrayList\u003c\u003e();\n\t\tallIds.addAll(TRACKED_CLUE_IDS);\n\t\tallIds.addAll(TRACKED_TORN_CLUE_IDS);\n\t\tif (isDevMode) allIds.addAll(DEV_MODE_IDS);\n\t\treturn allIds;\n\t}\n\n\tpublic boolean isEnabled(ClueDetailsConfig config)\n\t{\n\t\tClueTier tier \u003d getClueTier();\n\n\t\tif (config \u003d\u003d null) return true;\n\n\t\tif (tier \u003d\u003d ClueTier.BEGINNER)\n\t\t{\n\t\t\treturn config.beginnerDetails();\n\t\t}\n\t\tif (tier \u003d\u003d ClueTier.EASY)\n\t\t{\n\t\t\treturn config.easyDetails();\n\t\t}\n\t\tif (tier \u003d\u003d ClueTier.MEDIUM || tier \u003d\u003d ClueTier.MEDIUM_CHALLENGE || tier \u003d\u003d ClueTier.MEDIUM_KEY)\n\t\t{\n\t\t\treturn config.mediumDetails();\n\t\t}\n\t\tif (tier \u003d\u003d ClueTier.HARD || tier \u003d\u003d ClueTier.HARD_CHALLENGE)\n\t\t{\n\t\t\treturn config.hardDetails();\n\t\t}\n\t\tif (tier \u003d\u003d ClueTier.ELITE || tier \u003d\u003d ClueTier.ELITE_CHALLENGE)\n\t\t{\n\t\t\treturn config.eliteDetails();\n\t\t}\n\t\tif (tier \u003d\u003d ClueTier.MASTER)\n\t\t{\n\t\t\treturn config.masterDetails();\n\t\t}\n\t\treturn true;\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\Clues.java"},{"fileName":"ClueThreeStepSaver.java","content":"package com.cluedetails;\n\nimport com.google.gson.Gson;\nimport javax.inject.Singleton;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.ItemID;\nimport net.runelite.api.KeyCode;\nimport net.runelite.api.MenuAction;\nimport net.runelite.api.MenuEntry;\nimport net.runelite.api.events.MenuEntryAdded;\nimport net.runelite.api.events.MenuOpened;\nimport net.runelite.client.config.ConfigManager;\nimport javax.inject.Inject;\n\n@Slf4j\n@Singleton\npublic class ClueThreeStepSaver\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClueDetailsConfig config;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Inject\n\tprivate Gson gson;\n\n\t@Inject\n\tprivate ClueInventoryManager cim;\n\n\tprivate ClueInstance activeMaster;\n\n\t@Getter\n\tprivate ClueInstance savedThreeStepper;\n\n\tprivate boolean removeEntries \u003d false;\n\n\tprivate static final String THREE_STEP_MASTER_KEY \u003d \"three-step-master\";\n\n\tpublic void scanInventory()\n\t{\n\t\tif (!config.threeStepperSaver()) return;\n\n\t\tactiveMaster \u003d cim.getClueByClueItemId(ItemID.CLUE_SCROLL_MASTER);\n\t\tif(activeMaster \u003d\u003d null || savedThreeStepper \u003d\u003d null)\n\t\t{\n\t\t\tremoveEntries \u003d false;\n\t\t\treturn;\n\t\t}\n\n\t\t//removes entries if we don\u0027t know what clue is in their inv, can be made a toggle.\n\t\tremoveEntries \u003d cluesMatch() || activeMaster.getClueIds().isEmpty();\n\t}\n\n\tpublic boolean cluesMatch()\n\t{\n\t\tif (activeMaster \u003d\u003d null || savedThreeStepper \u003d\u003d null) return false;\n\t\telse return activeMaster.getClueIds().equals(savedThreeStepper.getClueIds());\n\t}\n\n\tpublic void onMenuOpened(MenuOpened event)\n\t{\n\t\tif (!client.isKeyPressed(KeyCode.KC_SHIFT))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!config.threeStepperSaver()) return;\n\t\tif (activeMaster \u003d\u003d null) return;\n\n\t\tMenuEntry firstEntry \u003d event.getFirstEntry();\n\t\t//only menus generated from a clue in inventory pass this widget check.\n\t\tif (activeMaster.getClueIds().size() \u003d\u003d 3 \u0026\u0026 firstEntry.getWidget() !\u003d null \u0026\u0026 firstEntry.getTarget().contains(\"Clue scroll (master)\"))\n\t\t{\n\t\t\tMenuEntry[] menuEntries \u003d client.getMenu().getMenuEntries();\n\t\t\tif (cluesMatch())\n\t\t\t{\n\t\t\t\tclient.getMenu().createMenuEntry(-menuEntries.length)\n\t\t\t\t\t.setOption(\"Unset three-stepper\")\n\t\t\t\t\t.setTarget(event.getFirstEntry().getTarget())\n\t\t\t\t\t.setType(MenuAction.RUNELITE)\n\t\t\t\t\t.onClick(e -\u003e removeThreeStepper());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tclient.getMenu().createMenuEntry(-menuEntries.length)\n\t\t\t\t\t.setOption(\"Set three-stepper\")\n\t\t\t\t\t.setTarget(event.getFirstEntry().getTarget())\n\t\t\t\t\t.setType(MenuAction.RUNELITE)\n\t\t\t\t\t.onClick(e -\u003e saveThreeStepper());\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic void onMenuEntryAdded(MenuEntryAdded event)\n\t{\n\t\tif (!config.threeStepperSaver()) return;\n\n\t\tMenuEntry menuEntry \u003d event.getMenuEntry();\n\t\tif (menuEntry.getTarget().contains(\"Torn clue scroll\") \u0026\u0026 removeEntries)\n\t\t{\n\t\t\tif (menuEntry.getOption().contains(\"Use\") || menuEntry.getOption().contains(\"Combine\"))\n\t\t\t{\n\t\t\t\tclient.getMenu().removeMenuEntry(menuEntry);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic void saveThreeStepper()\n\t{\n\t\tString clueInstanceJson \u003d gson.toJson(activeMaster);\n\t\tconfigManager.setConfiguration(ClueDetailsConfig.GROUP, THREE_STEP_MASTER_KEY, clueInstanceJson);\n\t\tclient.addChatMessage(ChatMessageType.GAMEMESSAGE,\"\",\"Successfully set clue as your three-stepper.\",\"\");\n\t\tupdateThreeStepper();\n\t\tscanInventory();\n\t}\n\n\tpublic void removeThreeStepper()\n\t{\n\t\tconfigManager.setConfiguration(ClueDetailsConfig.GROUP, THREE_STEP_MASTER_KEY, \"\");\n\t\tclient.addChatMessage(ChatMessageType.GAMEMESSAGE,\"\",\"Successfully unset clue as your three-stepper.\",\"\");\n\t\tupdateThreeStepper();\n\t\tscanInventory();\n\t}\n\n\tpublic void updateThreeStepper()\n\t{\n\t\tString threeStepMasterJson \u003d configManager.getConfiguration(ClueDetailsConfig.GROUP, THREE_STEP_MASTER_KEY);\n\t\tif (threeStepMasterJson \u003d\u003d null) return;\n\t\tsavedThreeStepper \u003d gson.fromJson(threeStepMasterJson, ClueInstance.class);\n\t}\n\n\tpublic void startUp()\n\t{\n\t\tupdateThreeStepper();\n\t\tscanInventory();\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\ClueThreeStepSaver.java"},{"fileName":"ClueThreeStepSaverWidgetOverlay.java","content":"package com.cluedetails;\n\nimport javax.inject.Singleton;\nimport net.runelite.api.ItemID;\nimport net.runelite.api.widgets.WidgetItem;\nimport net.runelite.client.ui.overlay.WidgetItemOverlay;\nimport javax.inject.Inject;\nimport java.awt.Graphics2D;\n\nimport static com.cluedetails.ClueDetailsConfig.SavedThreeStepperEnum.BOTH;\nimport static com.cluedetails.ClueDetailsConfig.SavedThreeStepperEnum.INVENTORY;\n\n@Singleton\npublic class ClueThreeStepSaverWidgetOverlay extends WidgetItemOverlay\n{\n\tprivate final ClueDetailsPlugin clueDetailsPlugin;\n\tprivate final ClueDetailsConfig config;\n\n\tprivate final ClueThreeStepSaver clueThreeStepSaver;\n\n\t@Inject\n\tprivate ClueThreeStepSaverWidgetOverlay(ClueDetailsPlugin clueDetailsPlugin, ClueThreeStepSaver clueThreeStepSaver, ClueDetailsConfig config)\n\t{\n\t\tthis.clueDetailsPlugin \u003d clueDetailsPlugin;\n\t\tthis.clueThreeStepSaver \u003d clueThreeStepSaver;\n\t\tthis.config \u003d config;\n\t\tshowOnInventory();\n\t}\n\n\t@Override\n\tpublic void renderItemOverlay(Graphics2D graphics, int itemId, WidgetItem widgetItem)\n\t{\n\t\tif (itemId !\u003d ItemID.CLUE_SCROLL_MASTER || !clueThreeStepSaver.cluesMatch())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (config.threeStepperSaver() \u0026\u0026 (config.highlightSavedThreeStepper() \u003d\u003d BOTH || config.highlightSavedThreeStepper() \u003d\u003d INVENTORY))\n\t\t{\n\t\t\tclueDetailsPlugin.getItemsOverlay().inventoryTagsOverlay(graphics, itemId, widgetItem, config.invThreeStepperHighlightColor());\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\ClueThreeStepSaverWidgetOverlay.java"},{"fileName":"ClueWidgetManager.java","content":"/*\n * Copyright (c) 2025, cubeee \u003chttps://www.github.com/cubeee\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.api.KeyCode;\nimport net.runelite.api.Menu;\nimport net.runelite.api.MenuAction;\nimport net.runelite.api.MenuEntry;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.config.ConfigManager;\n\nimport javax.inject.Singleton;\nimport java.util.*;\n\n@Singleton\npublic class ClueWidgetManager\n{\n    private final Client client;\n    private final ConfigManager configManager;\n    private final ClueInventoryManager clueInventoryManager;\n    private final CluePreferenceManager cluePreferenceManager;\n\n\t@Inject\n    public ClueWidgetManager(Client client, ConfigManager configManager, ClueInventoryManager clueInventoryManager, CluePreferenceManager cluePreferenceManager)\n    {\n        this.client \u003d client;\n        this.configManager \u003d configManager;\n        this.clueInventoryManager \u003d clueInventoryManager;\n        this.cluePreferenceManager \u003d cluePreferenceManager;\n    }\n\n    public void addHighlightWidgetSubmenus(MenuEntry[] entries)\n    {\n        if (!client.isKeyPressed(KeyCode.KC_SHIFT))\n        {\n            return;\n        }\n\n        if (clueInventoryManager.getCluesInInventory().isEmpty())\n        {\n            return;\n        }\n\n        for (int idx \u003d entries.length - 1; idx \u003e\u003d 0; --idx)\n        {\n            MenuEntry entry \u003d entries[idx];\n\n            Widget widget \u003d entry.getWidget();\n            if (widget \u003d\u003d null || (widget.getActions() \u003d\u003d null \u0026\u0026 entry.getType() !\u003d MenuAction.WIDGET_CONTINUE))\n            {\n                return;\n            }\n\n            // Disable item marking, separate feature\n            if (widget.getItemId() !\u003d -1)\n            {\n                continue;\n            }\n\n            int componentId \u003d widget.getId();\n            int childIndex \u003d widget.getIndex();\n            WidgetId widgetId \u003d new WidgetId(componentId, childIndex \u003d\u003d -1 ? null : childIndex);\n\n            MenuEntry clueDetailsEntry \u003d client.getMenu().createMenuEntry(1) // place above Cancel\n                    .setOption(\"Clue details\")\n                    .setType(MenuAction.RUNELITE);\n            Menu submenu \u003d clueDetailsEntry.createSubMenu();\n\n            clueInventoryManager.getCluesInInventory()\n                    .forEach(itemId -\u003e\n                    {\n                        ClueInstance instance \u003d clueInventoryManager.getClueByClueItemId(itemId);\n                        if (instance !\u003d null)\n                        {\n                            instance\n                                .getClueIds()\n                                .forEach((clueId) -\u003e addHighlightWidgetMenu(cluePreferenceManager, submenu, Clues.forClueIdFiltered(clueId), widgetId));\n                        }\n                    });\n            break;\n        }\n    }\n\n    private void addHighlightWidgetMenu(CluePreferenceManager cluePreferenceManager, Menu menu, Clues clue, WidgetId widgetId)\n    {\n        if (clue \u003d\u003d null) return;\n\n        boolean widgetInCluePreference \u003d cluePreferenceManager.widgetsPreferenceContainsWidget(clue.getClueID(), widgetId);\n\n        String action \u003d widgetInCluePreference ? \"Remove from \" : \"Add to \";\n        String clueDetail \u003d clue.getDetail(configManager);\n        final String text \u003d action + \"\u0027\" + clueDetail + \"\u0027\";\n\n        // Add menu to widget for clue\n        menu.createMenuEntry(-1)\n                .setOption(text)\n                .setType(MenuAction.RUNELITE)\n                .onClick(e -\u003e updateClueWidgets(clue, widgetId, cluePreferenceManager));\n    }\n\n    private void updateClueWidgets(Clues clue, WidgetId widgetId, CluePreferenceManager cluePreferenceManager)\n    {\n        // Get existing Clue widgetIds\n        int clueId \u003d clue.getClueID();\n        List\u003cWidgetId\u003e clueWidgetIds \u003d cluePreferenceManager.getWidgetsPreference(clueId);\n\n        if (clueWidgetIds \u003d\u003d null)\n        {\n            clueWidgetIds \u003d new ArrayList\u003c\u003e();\n        }\n\n        // Remove if already present\n        if (clueWidgetIds.contains(widgetId))\n        {\n            clueWidgetIds.remove(widgetId);\n        }\n        // Add if not present\n        else\n        {\n            clueWidgetIds.add(widgetId);\n        }\n\n        // Save Clue widgetIds\n        cluePreferenceManager.saveWidgetsPreference(clueId, clueWidgetIds);\n    }\n\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\ClueWidgetManager.java"},{"fileName":"AbstractRequirement.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails.filters;\n\nimport java.util.List;\nimport net.runelite.api.coords.WorldPoint;\n\npublic abstract class AbstractRequirement\n{\n\tList\u003cWorldPoint\u003e wps;\n\n\tList\u003cClueRegion\u003e regions;\n\n\tabstract public boolean isRegionValid(ClueRegion clueRegionToCheck);\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\filters\\AbstractRequirement.java"},{"fileName":"ClueOrders.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails.filters;\n\nimport com.cluedetails.Clues;\nimport java.util.Comparator;\nimport java.util.List;\n\npublic class ClueOrders\n{\n\tstatic List\u003cClueTier\u003e tierOrder \u003d List.of(\n\t\tClueTier.BEGINNER,\n\t\tClueTier.EASY,\n\t\tClueTier.MEDIUM,\n\t\tClueTier.MEDIUM_KEY,\n\t\tClueTier.HARD,\n\t\tClueTier.ELITE,\n\t\tClueTier.MASTER\n\t);\n\n\tstatic List\u003cClueRegion\u003e regionOrder \u003d List.of(\n\t\tClueRegion.MISTHALIN, ClueRegion.ASGARNIA, ClueRegion.KARAMJA, ClueRegion.KANDARIN, ClueRegion.FREMENNIK_PROVINCE, ClueRegion.KHARIDIAN_DESERT,\n\t\tClueRegion.MORYTANIA, ClueRegion.TIRANNWN, ClueRegion.WILDERNESS, ClueRegion.KOUREND, ClueRegion.VARLAMORE\n\t);\n\n\tpublic static Comparator\u003cClues\u003e sortByTier()\n\t{\n\t\treturn Comparator.comparing(q -\u003e tierOrder.indexOf(q));\n\t}\n\n\tpublic static Comparator\u003cClues\u003e sortByRegion()\n\t{\n\t\treturn Comparator.comparing(q -\u003e regionOrder.indexOf(q));\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\filters\\ClueOrders.java"},{"fileName":"ClueRegion.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails.filters;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.api.coords.WorldPoint;\n\n@RequiredArgsConstructor\n@Getter\npublic enum ClueRegion\n{\n\tMISTHALIN(\n\t\t// Overlaps a tad with Al Kharid\n\t\tnew Zone(48, 49, 50, 54),\n\t\tnew Zone(51, 52, 52, 54),\n\t\t// Overlaps with Morytania slightly\n\t\tnew Zone(new WorldPoint(3392, 3456, 0), new WorldPoint(3423, 3508, 3)),\n\t\t// Soul Wars\n\t\tnew Zone(32, 43, 36, 46),\n\t\t// Fossil island\n\t\tnew Zone(55, 57, 61, 62)\n\t),\n\tKARAMJA(\n\t\tnew Zone(42, 45, 45, 48),\n\t\tnew Zone(46, 45, 46, 47),\n\t\tnew Zone(42, 48, 44, 50),\n\t\tnew Zone(44, 51),\n\t\tnew Zone(new WorldPoint(2880, 3136, 0), new WorldPoint(2932, 3199, 3)),\n\t\tnew Zone(new WorldPoint(2933, 3136, 0), new WorldPoint(2964, 3184, 3))\n\t),\n\tASGARNIA(\n\t\tnew Zone(45, 50, 47, 54),\n\t\tnew Zone(new WorldPoint(2944, 3162, 0), new WorldPoint(3053, 3199, 3)),\n\t\tnew Zone(new WorldPoint(2963, 3099, 0), new WorldPoint(3043, 3161, 3)),\n\t\t// Troll Territory\n\t\tnew Zone(44, 55, 45, 59),\n\t\tnew Zone(43, 58, 43, 60),\n\t\t// White wolf mountain\n\t\tnew Zone(new WorldPoint(2791, 3493, 0), new WorldPoint(2880, 3520, 3)),\n\t\tnew Zone(new WorldPoint(2832, 3463, 0), new WorldPoint(2880, 3492, 3)),\n\t\tnew Zone(new WorldPoint(2841, 3446, 0), new WorldPoint(2880, 3462, 3)),\n\t\tnew Zone(new WorldPoint(2851, 3442, 0), new WorldPoint(2880, 3445, 3)),\n\t\tnew Zone(new WorldPoint(2855, 3441, 0), new WorldPoint(2880, 3441, 3)),\n\t\tnew Zone(new WorldPoint(2858, 3438, 0), new WorldPoint(2880, 3440, 3)),\n\t\tnew Zone(new WorldPoint(2864, 3433, 0), new WorldPoint(2880, 3437, 3)),\n\t\tnew Zone(new WorldPoint(2867, 3392, 0), new WorldPoint(2880, 3432, 3)),\n\t\t// Entrana, slight overlap with Kandarin\n\t\tnew Zone(43, 52, 44, 52),\n\t\t// Pest Control\n\t\tnew Zone(41, 40, 41, 41)\n\t),\n\tFREMENNIK_PROVINCE(\n\t\tnew Zone(39, 56, 43, 57),\n\t\tnew Zone(31, 58, 42, 64)\n\t),\n\tKANDARIN(\n\t\tnew Zone(37, 44, 41, 55),\n\t\tnew Zone(42, 51, 43, 54),\n\t\t// Catherby\n\t\tnew Zone(new WorldPoint(2816, 3392, 0), new WorldPoint(2864, 3436, 3)),\n\t\tnew Zone(new WorldPoint(2816, 3437, 0), new WorldPoint(2842, 3462, 3)),\n\t\tnew Zone(new WorldPoint(2816, 3463, 0), new WorldPoint(2829, 3492, 3)),\n\t\t// South CW\n\t\tnew Zone(36, 47, 36, 48),\n\t\t// Pisc\n\t\tnew Zone(36, 53, 36, 57),\n\t\tnew Zone(35, 54, 35, 57),\n\t\t// Ape Atoll\n\t\tnew Zone(42, 42, 45, 43)\n\t),\n\tKHARIDIAN_DESERT(\n\t\tnew Zone(49, 41, 55, 48),\n\t\tnew Zone(51, 49, 52, 51),\n\t\t// West of Al Kharid bank\n\t\tnew Zone(new WorldPoint(3253, 3148, 0), new WorldPoint(3263, 3190, 3)),\n\t\tnew Zone(53, 49),\n\t\t// East of duel arena\n\t\tnew Zone(new WorldPoint(3392, 3200, 0), new WorldPoint(3423, 3263, 3)),\n\t\t// Tempoross\n\t\tnew Zone(47, 46)\n\t),\n\tMORYTANIA(\n\t\tnew Zone(54, 49, 59, 55),\n\t\tnew Zone(57, 43, 60, 47),\n\t\tnew Zone(new WorldPoint(3400, 3264, 0), new WorldPoint(3455, 3462, 3)),\n\t\tnew Zone(new WorldPoint(3424, 3463, 0), new WorldPoint(3455, 3508, 3)),\n\t\tnew Zone(new WorldPoint(3396, 3509, 0), new WorldPoint(3455, 3579, 3))\n\t),\n\tTIRANNWN(\n\t\tnew Zone(33, 47, 35, 53),\n\t\tnew Zone(36, 49, 37, 51)\n\t),\n\tWILDERNESS(\n\t\tnew Zone(46, 55, 52, 61)\n\t),\n\tKOUREND(\n\t\tnew Zone(17, 51, 18, 59),\n\t\tnew Zone(19, 53, 19, 60),\n\t\tnew Zone(20, 54, 29, 63),\n\t\tnew Zone(23, 53, 28, 53)\n\t),\n\tVARLAMORE(\n\t\tnew Zone(19, 45, 29, 51),\n\t\tnew Zone(20, 52, 22, 53)\n\t);\n\n\tZone[] zones;\n\n\tClueRegion(Zone... zones)\n\t{\n\t\tthis.zones \u003d zones;\n\t}\n\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\filters\\ClueRegion.java"},{"fileName":"ClueTier.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails.filters;\n\nimport lombok.Getter;\n\n@Getter\npublic enum ClueTier\n{\n\tBEGINNER(0),\n\tEASY(1),\n\tMEDIUM(2),\n\tMEDIUM_CHALLENGE(2),\n\tMEDIUM_KEY(2),\n\tHARD(3),\n\tHARD_CHALLENGE(3),\n\tELITE(4),\n\tELITE_CHALLENGE(4),\n\tMASTER(5);\n\n\tprivate final int value;\n\n\tClueTier(int value)\n\t{\n\t\tthis.value \u003d value;\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\filters\\ClueTier.java"},{"fileName":"OrRequirement.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails.filters;\n\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.stream.Collectors;\nimport net.runelite.api.coords.WorldPoint;\n\npublic class OrRequirement extends AbstractRequirement\n{\n\tpublic OrRequirement(WorldPoint... wps)\n\t{\n\t\tthis.wps \u003d List.of(wps);\n\t\tthis.regions \u003d findRegions();\n\t}\n\n\tpublic OrRequirement(List\u003cWorldPoint\u003e wps)\n\t{\n\t\tthis.wps \u003d wps;\n\t\tthis.regions \u003d findRegions();\n\t}\n\n\t@Override\n\tpublic boolean isRegionValid(ClueRegion clueRegionToCheck)\n\t{\n\t\treturn regions.contains(clueRegionToCheck);\n\t}\n\n\tprivate List\u003cClueRegion\u003e findRegions()\n\t{\n\t\treturn wps.stream()\n\t\t\t.flatMap(wp -\u003e\n\t\t\t\tArrays.stream(ClueRegion.values())\n\t\t\t\t\t.filter(region -\u003e\n\t\t\t\t\t\tArrays.stream(region.getZones())\n\t\t\t\t\t\t\t.anyMatch(zone -\u003e zone.contains(wp))\n\t\t\t\t\t)\n\t\t\t)\n\t\t\t.distinct()\n\t\t\t.collect(Collectors.toList());\n\t}\n}\n\n","filePath":"src\\main\\java\\com\\cluedetails\\filters\\OrRequirement.java"},{"fileName":"Zone.java","content":"/*\n * Copyright (c) 2019, Trevor \u003chttps://github.com/Trevor159\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *   list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *   this list of conditions and the following disclaimer in the documentation\n *   and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails.filters;\n\nimport lombok.Getter;\nimport static net.runelite.api.Constants.REGION_SIZE;\nimport net.runelite.api.coords.WorldPoint;\n\npublic class Zone\n{\n\t@Getter\n\tprivate final int minX;\n\t@Getter\n\tprivate final int maxX;\n\t@Getter\n\tprivate final int minY;\n\t@Getter\n\tprivate final int maxY;\n\tprivate int minPlane \u003d 0;\n\tprivate int maxPlane \u003d 2;\n\n\t//The first plane of the \"Overworld\"\n\tpublic Zone()\n\t{\n\t\tminX \u003d 1152;\n\t\tmaxX \u003d 3903;\n\t\tminY \u003d 2496;\n\t\tmaxY \u003d 4159;\n\t\tmaxPlane \u003d 0;\n\t}\n\n\tpublic Zone(WorldPoint p1, WorldPoint p2)\n\t{\n\t\tminX \u003d Math.min(p1.getX(), p2.getX());\n\t\tmaxX \u003d Math.max(p1.getX(), p2.getX());\n\t\tminY \u003d Math.min(p1.getY(), p2.getY());\n\t\tmaxY \u003d Math.max(p1.getY(), p2.getY());\n\t\tminPlane \u003d Math.min(p1.getPlane(), p2.getPlane());\n\t\tmaxPlane \u003d Math.max(p1.getPlane(), p2.getPlane());\n\t}\n\n\tpublic Zone(WorldPoint p)\n\t{\n\t\tminX \u003d p.getX();\n\t\tmaxX \u003d p.getX();\n\t\tminY \u003d p.getY();\n\t\tmaxY \u003d p.getY();\n\t\tminPlane \u003d p.getPlane();\n\t\tmaxPlane \u003d p.getPlane();\n\t}\n\n\tpublic Zone(int regionID)\n\t{\n\t\tminX \u003d ((regionID \u003e\u003e 8) \u0026 0xFF) \u003c\u003c 6;\n\t\tmaxX \u003d minX + REGION_SIZE;\n\t\tminY \u003d (regionID \u0026 0xFF) \u003c\u003c 6;\n\t\tmaxY \u003d minY + REGION_SIZE;\n\t}\n\n\tpublic Zone(int regionX, int regionY)\n\t{\n\t\tminX \u003d regionX \u003c\u003c 6;\n\t\tmaxX \u003d minX + REGION_SIZE;\n\t\tminY \u003d regionY \u003c\u003c 6;\n\t\tmaxY \u003d minY + REGION_SIZE;\n\t}\n\n\tpublic Zone(int regionXMin, int regionYMin, int regionXMax, int regionYMax)\n\t{\n\t\tminX \u003d regionXMin \u003c\u003c 6;\n\t\tmaxX \u003d (regionXMax \u003c\u003c 6) + REGION_SIZE;\n\t\tminY \u003d regionYMin \u003c\u003c 6;\n\t\tmaxY \u003d (regionYMax \u003c\u003c 6) + REGION_SIZE;\n\t}\n\n\tpublic boolean contains(WorldPoint worldPoint)\n\t{\n\t\treturn minX \u003c\u003d worldPoint.getX()\n\t\t\t\u0026\u0026 worldPoint.getX() \u003c\u003d maxX\n\t\t\t\u0026\u0026 minY \u003c\u003d worldPoint.getY()\n\t\t\t\u0026\u0026 worldPoint.getY() \u003c\u003d maxY\n\t\t\t\u0026\u0026 minPlane \u003c\u003d worldPoint.getPlane()\n\t\t\t\u0026\u0026 worldPoint.getPlane() \u003c\u003d maxPlane;\n\t}\n\n\tpublic WorldPoint getMinWorldPoint()\n\t{\n\t\treturn new WorldPoint(minX, minY, minPlane);\n\t}\n}\n\n","filePath":"src\\main\\java\\com\\cluedetails\\filters\\Zone.java"},{"fileName":"MenuEntryAndPos.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://www.github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport net.runelite.api.MenuEntry;\n\n@Data\n@AllArgsConstructor\npublic class MenuEntryAndPos\n{\n\tprivate MenuEntry menuEntry;\n\tprivate int posInMenu;\n\tprivate int posOnTile;\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\MenuEntryAndPos.java"},{"fileName":"ClueDetailsParentPanel.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails.panels;\n\nimport com.cluedetails.*;\nimport com.cluedetails.ClueDetailsConfig.*;\n\nimport static com.cluedetails.ClueDetailsConfig.GROUP;\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Component;\nimport java.awt.Dimension;\nimport java.awt.FlowLayout;\nimport java.awt.Insets;\nimport java.awt.Rectangle;\nimport java.awt.event.ItemEvent;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.awt.event.MouseMotionAdapter;\nimport java.awt.image.BufferedImage;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.concurrent.ExecutionException;\nimport java.util.stream.Collectors;\nimport javax.swing.*;\nimport javax.swing.border.EmptyBorder;\nimport javax.swing.event.DocumentEvent;\nimport javax.swing.event.DocumentListener;\nimport lombok.Getter;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.client.chat.QueuedMessage;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.game.chatbox.ChatboxItemSearch;\nimport net.runelite.client.game.chatbox.ChatboxPanelManager;\nimport net.runelite.client.plugins.grounditems.GroundItemsConfig;\nimport net.runelite.client.plugins.inventorytags.InventoryTagsConfig;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.PluginPanel;\nimport net.runelite.client.ui.components.IconTextField;\nimport net.runelite.client.ui.components.colorpicker.RuneliteColorPicker;\nimport net.runelite.client.util.ImageUtil;\nimport org.apache.commons.text.WordUtils;\n\npublic class ClueDetailsParentPanel extends PluginPanel\n{\n\tJPanel searchCluesPanel \u003d new JPanel();\n\tprivate JComboBox\u003cEnum\u003e tierFilterDropdown, regionFilterDropdown, orderDropdown;\n\n\tpublic static final int DROPDOWN_HEIGHT \u003d 26;\n\n\tprivate ClueTableModel clueTableModel;\n\tprivate JTable clueTable;\n\t@Getter\n\tprivate int hoveredRow \u003d -1;\n\tprivate int rightClickedRow \u003d -1;\n\tprivate final IconTextField searchBar \u003d new IconTextField();\n\tprivate List\u003cListItem\u003e allClues \u003d new ArrayList\u003c\u003e();\n\n\tprivate ConfigManager configManager;\n\n\tprivate ChatboxPanelManager chatboxPanelManager;\n\n\tprivate CluePreferenceManager cluePreferenceManager;\n\tprivate ClueDetailsSharingManager clueDetailsSharingManager;\n\tprivate final ClueDetailsPlugin plugin;\n\tprivate final ClueDetailsConfig config;\n\n\tprivate final JScrollPane scrollableContainer;\n\n\tprivate final JPanel allDropdownSections \u003d new JPanel();\n\n\tprivate static final ImageIcon RESET_ICON;\n\tprivate static final ImageIcon RESET_HOVER_ICON;\n\tprivate static final ImageIcon COPY_ICON;\n\tprivate static final ImageIcon COPY_HOVER_ICON;\n\tprivate static final ImageIcon PASTE_ICON;\n\tprivate static final ImageIcon PASTE_HOVER_ICON;\n\n\tprivate final JLabel resetMarkers \u003d new JLabel(RESET_ICON);\n\tprivate final JLabel copyMarkers \u003d new JLabel(COPY_ICON);\n\tprivate final JLabel pasteMarkers \u003d new JLabel(PASTE_ICON);\n\n\tstatic\n\t{\n\t\tfinal BufferedImage resetIcon \u003d ImageUtil.loadImageResource(ClueDetailsPlugin.class, \"/reset_icon.png\");\n\t\tRESET_ICON \u003d new ImageIcon(resetIcon);\n\t\tRESET_HOVER_ICON \u003d new ImageIcon(ImageUtil.alphaOffset(resetIcon, 0.53f));\n\n\t\tfinal BufferedImage copyIcon \u003d ImageUtil.loadImageResource(ClueDetailsPlugin.class, \"/copy_icon.png\");\n\t\tCOPY_ICON \u003d new ImageIcon(copyIcon);\n\t\tCOPY_HOVER_ICON \u003d new ImageIcon(ImageUtil.alphaOffset(copyIcon, 0.53f));\n\n\t\tfinal BufferedImage pasteIcon \u003d ImageUtil.loadImageResource(ClueDetailsPlugin.class, \"/paste_icon.png\");\n\t\tPASTE_ICON \u003d new ImageIcon(pasteIcon);\n\t\tPASTE_HOVER_ICON \u003d new ImageIcon(ImageUtil.alphaOffset(pasteIcon, 0.53f));\n\t}\n\n\tpublic ClueDetailsParentPanel(ConfigManager configManager, CluePreferenceManager cluePreferenceManager, ClueDetailsConfig config,\n\t\t\t\t\t\t\t\t\tChatboxPanelManager chatboxPanelManager, ClueDetailsSharingManager clueDetailsSharingManager, ClueDetailsPlugin plugin)\n\t{\n\t\tsuper(false);\n\n\t\tthis.configManager \u003d configManager;\n\t\tthis.cluePreferenceManager \u003d cluePreferenceManager;\n\t\tthis.config \u003d config;\n\t\tthis.chatboxPanelManager \u003d chatboxPanelManager;\n\t\tthis.clueDetailsSharingManager \u003d clueDetailsSharingManager;\n\t\tthis.plugin \u003d plugin;\n\n\t\tsetBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tsetLayout(new BorderLayout());\n\n\t\tsetupTable();\n\n\t\t/* Setup overview panel */\n\t\tJPanel titlePanel \u003d setupTitlePanel();\n\n\t\ttitlePanel.add(setupImportExportButtons(), BorderLayout.EAST);\n\n\t\tsetupSearchBar();\n\n\t\tshowMatchingClues(\"\");\n\n\t\t// Filters\n\t\tsetupFilters();\n\n\t\tscrollableContainer \u003d new JScrollPane(clueTable);\n\t\tscrollableContainer.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);\n\n\t\tJPanel introDetailsPanel \u003d new JPanel();\n\t\tintroDetailsPanel.setLayout(new BorderLayout());\n\t\tintroDetailsPanel.add(titlePanel, BorderLayout.NORTH);\n\t\tintroDetailsPanel.add(searchCluesPanel, BorderLayout.CENTER);\n\n\t\tadd(introDetailsPanel, BorderLayout.NORTH);\n\t\tadd(scrollableContainer, BorderLayout.CENTER);\n\n\t\trefresh();\n\t}\n\n\tprivate void setupTable()\n\t{\n\t\tclueTableModel \u003d new ClueTableModel();\n\t\tclueTable \u003d new ClueJTable(clueTableModel);\n\n\t\tclueTable.setDefaultRenderer(Object.class, new ClueTableCellRenderer(this, cluePreferenceManager, configManager));\n\t\tclueTable.setDefaultEditor(Object.class, new ClueTableCellEditor(configManager, clueTable));\n\n\t\tJPopupMenu clueTablePopupMenu \u003d getClueTablePopupMenu();\n\t\tclueTable.setComponentPopupMenu(clueTablePopupMenu);\n\t\tclueTable.addMouseListener(new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mousePressed(MouseEvent e)\n\t\t\t{\n\t\t\t\tint row \u003d clueTable.rowAtPoint(e.getPoint());\n\t\t\t\tint column \u003d clueTable.columnAtPoint(e.getPoint());\n\n\t\t\t\tif (row \u003c 0 || column \u003c 0) return;\n\n\t\t\t\tListItem item \u003d (ListItem) clueTableModel.getValueAt(row, column);\n\t\t\t\tif (item.isHeader()) return;\n\n\t\t\t\tClues clue \u003d item.getClue();\n\t\t\t\tif (!clickedOnTextBox(e, row)) return;\n\n\t\t\t\tif (SwingUtilities.isLeftMouseButton(e))\n\t\t\t\t{\n\t\t\t\t\tboolean currentState \u003d cluePreferenceManager.getHighlightPreference(clue.getClueID());\n\t\t\t\t\tboolean newState \u003d !currentState;\n\t\t\t\t\tcluePreferenceManager.saveHighlightPreference(clue.getClueID(), newState);\n\t\t\t\t\tclueTable.repaint();\n\t\t\t\t}\n\t\t\t\telse if (SwingUtilities.isRightMouseButton(e))\n\t\t\t\t{\n\t\t\t\t\trightClickedRow \u003d row;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseExited(MouseEvent e)\n\t\t\t{\n\t\t\t\tif (hoveredRow !\u003d -1)\n\t\t\t\t{\n\t\t\t\t\tint previousHoveredRow \u003d hoveredRow;\n\t\t\t\t\thoveredRow \u003d -1;\n\t\t\t\t\tclueTable.repaint(clueTable.getCellRect(previousHoveredRow, 0, true));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tclueTable.addMouseMotionListener(new MouseMotionAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mouseMoved(MouseEvent e)\n\t\t\t{\n\t\t\t\tint row \u003d clueTable.rowAtPoint(e.getPoint());\n\n\t\t\t\tif (row !\u003d hoveredRow)\n\t\t\t\t{\n\t\t\t\t\tint previousHoveredRow \u003d hoveredRow;\n\t\t\t\t\thoveredRow \u003d row;\n\n\t\t\t\t\tif (previousHoveredRow !\u003d -1)\n\t\t\t\t\t{\n\t\t\t\t\t\tclueTable.repaint(clueTable.getCellRect(previousHoveredRow, 0, true));\n\t\t\t\t\t}\n\t\t\t\t\tif (hoveredRow !\u003d -1)\n\t\t\t\t\t{\n\t\t\t\t\t\tclueTable.repaint(clueTable.getCellRect(hoveredRow, 0, true));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate boolean clickedOnTextBox(MouseEvent e, int row)\n\t{\n\t\tRectangle cellRect \u003d clueTable.getCellRect(row, 0, false);\n\n\t\tint cellX \u003d e.getX() - cellRect.x;\n\t\tint cellY \u003d e.getY() - cellRect.y;\n\n\t\tInsets cellInsets \u003d new Insets(5, 5, 0, 5);\n\n\t\tint textAreaX \u003d cellInsets.left;\n\t\tint textAreaY \u003d cellInsets.top;\n\t\tint textAreaWidth \u003d cellRect.width - cellInsets.left - cellInsets.right;\n\t\tint textAreaHeight \u003d cellRect.height - cellInsets.top - cellInsets.bottom;\n\n\t\treturn cellX \u003e\u003d textAreaX \u0026\u0026 cellX \u003c\u003d textAreaX + textAreaWidth \u0026\u0026\n\t\t\tcellY \u003e\u003d textAreaY \u0026\u0026 cellY \u003c\u003d textAreaY + textAreaHeight;\n\t}\n\n\tprivate JPopupMenu getClueTablePopupMenu()\n\t{\n\t\tJPopupMenu popupMenu \u003d new JPopupMenu();\n\n\t\tJMenuItem inputTextItem \u003d new JMenuItem(\"Edit text for clue\");\n\t\tinputTextItem.addActionListener(event -\u003e\n\t\t{\n\t\t\tclueTableModel.setEditableRow(rightClickedRow);\n\t\t\tclueTable.editCellAt(rightClickedRow, 0);\n\t\t\tComponent editorComponent \u003d clueTable.getEditorComponent();\n\t\t\tif (editorComponent !\u003d null)\n\t\t\t{\n\t\t\t\teditorComponent.requestFocusInWindow();\n\t\t\t}\n\t\t});\n\t\tpopupMenu.add(inputTextItem);\n\n\t\tJMenuItem inputColorItem \u003d new JMenuItem(\"Edit color for clue\");\n\t\tinputColorItem.addActionListener(event -\u003e\n\t\t{\n\t\t\tListItem item \u003d (ListItem) clueTableModel.getValueAt(rightClickedRow, 0);\n\t\t\tClues clue \u003d item.getClue();\n\t\t\tint clueItemId \u003d clue.getItemID();\n\t\t\tint clueClueID \u003d clue.getClueID();\n\n\t\t\tRuneliteColorPicker colorPicker \u003d getColorPicker(clue.getDetailColor(configManager));\n\t\t\tcolorPicker.setOnColorChange(c -\u003e\n\t\t\t{\n\t\t\t\t// Default color is white, so white is used to unset configurations\n\t\t\t\tif (ClueIdToDetails.equalRGB(c, Color.WHITE))\n\t\t\t\t{\n\t\t\t\t\tconfigManager.unsetConfiguration(\"clue-details-color\", String.valueOf(clueClueID));\n\n\t\t\t\t\t// Reset Ground Items and Inventory Tags\n\t\t\t\t\t// Beginner \u0026 master clues are not supported by these plugins\n\t\t\t\t\tif (clueClueID \u003e\u003d 2677)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (config.colorGroundItems())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconfigManager.unsetConfiguration(GroundItemsConfig.GROUP, \"highlight_\" + clueClueID);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (config.colorInventoryTags())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconfigManager.unsetConfiguration(InventoryTagsConfig.GROUP, \"tag_\" + clueClueID);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconfigManager.setConfiguration(\"clue-details-color\", String.valueOf(clueClueID), c);\n\n\t\t\t\t\t// Apply color to Ground Items and Inventory Tags\n\t\t\t\t\t// Beginner \u0026 master clues are not supported by these plugins\n\t\t\t\t\tif (clueClueID \u003e\u003d 2677)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (config.colorGroundItems())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconfigManager.setConfiguration(GroundItemsConfig.GROUP, \"highlight_\" + clueItemId, c);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (config.colorInventoryTags())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconfigManager.setConfiguration(InventoryTagsConfig.GROUP, \"tag_\" + clueItemId,\n\t\t\t\t\t\t\t\tplugin.getGson().toJson(Map.of(\"color\", c)));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tcolorPicker.setVisible(true);\n\t\t});\n\t\tpopupMenu.add(inputColorItem);\n\n\t\tString inputItemsTooltip \u003d \"Add/Remove item\";\n\t\tJMenuItem inputItems \u003d new JMenuItem(inputItemsTooltip);\n\t\tinputItems.addActionListener(event -\u003e\n\t\t{\n\t\t\tListItem item \u003d (ListItem) clueTableModel.getValueAt(rightClickedRow, 0);\n\t\t\tClues clue \u003d item.getClue();\n\n\t\t\tChatboxItemSearch itemSearch \u003d getItemSearch(inputItemsTooltip);\n\t\t\titemSearch.onItemSelected((itemId) -\u003e\n\t\t\t{\n\t\t\t\t// Get existing Clue itemIds\n\t\t\t\tint clueId \u003d clue.getClueID();\n\t\t\t\tList\u003cInteger\u003e clueItemIds \u003d cluePreferenceManager.getItemsPreference(clueId);\n\n\t\t\t\tif (clueItemIds \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tclueItemIds \u003d new ArrayList\u003c\u003e();\n\t\t\t\t}\n\n\t\t\t\t// Remove if already present\n\t\t\t\tif (clueItemIds.contains(itemId))\n\t\t\t\t{\n\t\t\t\t\tclueItemIds.remove(itemId);\n\t\t\t\t\tString chatMessage \u003d \"Removed item from \" + WordUtils.capitalize(clue.getClueTier().name().toLowerCase()) + \" clue\";\n\t\t\t\t\tsendChatMessage(chatMessage);\n\t\t\t\t}\n\t\t\t\t// Add if not present\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tclueItemIds.add(itemId);\n\t\t\t\t\tString chatMessage \u003d \"Added item to \" + WordUtils.capitalize(clue.getClueTier().name().toLowerCase()) + \" clue\";\n\t\t\t\t\tsendChatMessage(chatMessage);\n\t\t\t\t}\n\n\t\t\t\t// Save Clue itemIds\n\t\t\t\tcluePreferenceManager.saveItemsPreference(clueId, clueItemIds);\n\t\t\t}).build();\n\t\t});\n\t\tpopupMenu.add(inputItems);\n\n\t\treturn popupMenu;\n\t}\n\n\tprivate void openResetPopup(boolean resetText, boolean resetColors, boolean resetItems, boolean resetWidgets)\n\t{\n\t\tint confirm \u003d JOptionPane.showConfirmDialog(ClueDetailsParentPanel.this,\n\t\t\t\"Are you sure you want to reset your customised details?\",\n\t\t\t\"Warning\", JOptionPane.OK_CANCEL_OPTION);\n\n\t\tif (confirm \u003d\u003d 0)\n\t\t{\n\t\t\tclueDetailsSharingManager.resetClueDetails(resetText, resetColors, resetItems, resetWidgets);\n\t\t}\n\t}\n\n\tprivate JPanel setupTitlePanel()\n\t{\n\t\tJPanel titlePanel \u003d new JPanel();\n\t\ttitlePanel.setBorder(new EmptyBorder(10, 10, 10, 10));\n\t\ttitlePanel.setLayout(new BorderLayout());\n\n\t\tJTextArea title \u003d JGenerator.makeJTextArea(\"Clue Details\");\n\t\ttitle.setForeground(Color.WHITE);\n\t\ttitlePanel.add(title, BorderLayout.WEST);\n\n\t\treturn titlePanel;\n\t}\n\tprivate void setupSearchBar()\n\t{\n\t\t/* Search bar */\n\t\tsearchBar.setIcon(IconTextField.Icon.SEARCH);\n\t\tsearchBar.setPreferredSize(new Dimension(PluginPanel.PANEL_WIDTH - 20, 30));\n\t\tsearchBar.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tsearchBar.setHoverBackgroundColor(ColorScheme.DARK_GRAY_HOVER_COLOR);\n\t\tsearchBar.getDocument().addDocumentListener(new DocumentListener()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void insertUpdate(DocumentEvent e)\n\t\t\t{\n\t\t\t\tonSearchBarChanged();\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void removeUpdate(DocumentEvent e)\n\t\t\t{\n\t\t\t\tonSearchBarChanged();\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void changedUpdate(DocumentEvent e)\n\t\t\t{\n\t\t\t\tonSearchBarChanged();\n\t\t\t}\n\t\t});\n\n\t\tsearchCluesPanel.setBorder(new EmptyBorder(10, 10, 10, 10));\n\t\tsearchCluesPanel.setLayout(new BorderLayout(0, BORDER_OFFSET));\n\t\tsearchCluesPanel.add(searchBar, BorderLayout.CENTER);\n\t}\n\n\tprivate JPanel setupImportExportButtons()\n\t{\n\t\t// Import/Export Options\n\t\tJPanel markerButtons \u003d new JPanel(new FlowLayout(FlowLayout.RIGHT, 7, 3));\n\n\t\tresetMarkers.setToolTipText(\"Reset currently filtered customised details\");\n\t\tJPopupMenu resetPopupMenu \u003d getResetPopupMenu();\n\t\tresetMarkers.setComponentPopupMenu(resetPopupMenu);\n\t\tresetMarkers.addMouseListener(new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mousePressed(MouseEvent e)\n\t\t\t{\n\t\t\t\tif (SwingUtilities.isLeftMouseButton(e))\n\t\t\t\t{\n\t\t\t\t\topenResetPopup(true, true, true, true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseEntered(MouseEvent e)\n\t\t\t{\n\t\t\t\tresetMarkers.setIcon(RESET_HOVER_ICON);\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseExited(MouseEvent e)\n\t\t\t{\n\t\t\t\tresetMarkers.setIcon(RESET_ICON);\n\t\t\t}\n\t\t});\n\n\t\tcopyMarkers.setToolTipText(\"Export currently filtered details to your clipboard\");\n\t\tJPopupMenu copyPopupMenu \u003d getCopyPopupMenu();\n\t\tcopyMarkers.setComponentPopupMenu(copyPopupMenu);\n\t\tcopyMarkers.addMouseListener(new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mousePressed(MouseEvent e)\n\t\t\t{\n\t\t\t\tif (SwingUtilities.isLeftMouseButton(e))\n\t\t\t\t{\n\t\t\t\t\tclueDetailsSharingManager.exportClueDetails(true, true, true, true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseEntered(MouseEvent e)\n\t\t\t{\n\t\t\t\tcopyMarkers.setIcon(COPY_HOVER_ICON);\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseExited(MouseEvent e)\n\t\t\t{\n\t\t\t\tcopyMarkers.setIcon(COPY_ICON);\n\t\t\t}\n\t\t});\n\n\t\tpasteMarkers.setToolTipText(\"Import details from your clipboard\");\n\t\tpasteMarkers.addMouseListener(new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mousePressed(MouseEvent e)\n\t\t\t{\n\t\t\t\tclueDetailsSharingManager.promptForImport();\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseEntered(MouseEvent e)\n\t\t\t{\n\t\t\t\tpasteMarkers.setIcon(PASTE_HOVER_ICON);\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseExited(MouseEvent e)\n\t\t\t{\n\t\t\t\tpasteMarkers.setIcon(PASTE_ICON);\n\t\t\t}\n\t\t});\n\n\t\tmarkerButtons.add(resetMarkers);\n\t\tmarkerButtons.add(pasteMarkers);\n\t\tmarkerButtons.add(copyMarkers);\n\n\t\treturn markerButtons;\n\t}\n\n\tprivate void setupFilters()\n\t{\n\t\ttierFilterDropdown \u003d makeNewDropdown(ClueDetailsConfig.ClueTierFilter.displayFilters(), \"filterListByTier\");\n\t\tJPanel filtersTierPanel \u003d makeDropdownPanel(tierFilterDropdown, \"Tier\");\n\t\tfiltersTierPanel.setPreferredSize(new Dimension(PANEL_WIDTH, DROPDOWN_HEIGHT));\n\n\t\tregionFilterDropdown \u003d makeNewDropdown(ClueDetailsConfig.ClueRegionFilter.displayFilters(), \"filterListByRegion\");\n\t\tJPanel filtersRegionPanel \u003d makeDropdownPanel(regionFilterDropdown, \"Region\");\n\t\tfiltersRegionPanel.setPreferredSize(new Dimension(PANEL_WIDTH, DROPDOWN_HEIGHT));\n\n\t\torderDropdown \u003d makeNewDropdown(ClueDetailsConfig.ClueOrdering.values(), \"orderListBy\");\n\t\tJPanel orderPanel \u003d makeDropdownPanel(orderDropdown, \"Ordering\");\n\t\torderPanel.setPreferredSize(new Dimension(PANEL_WIDTH, DROPDOWN_HEIGHT));\n\n\t\tallDropdownSections.setLayout(new BoxLayout(allDropdownSections, BoxLayout.Y_AXIS));\n\t\tallDropdownSections.setBorder(new EmptyBorder(0, 0, 10, 0));\n\t\tallDropdownSections.add(filtersTierPanel);\n\t\tallDropdownSections.add(filtersRegionPanel);\n\t\tallDropdownSections.add(orderPanel);\n\n\t\tsearchCluesPanel.add(allDropdownSections, BorderLayout.NORTH);\n\t}\n\n\tprivate JPopupMenu getResetPopupMenu()\n\t{\n\t\tJPopupMenu popupMenu \u003d new JPopupMenu();\n\n\t\tJMenuItem inputItemResetText \u003d new JMenuItem(\"Reset clue text\");\n\t\tinputItemResetText.addActionListener(event\n\t\t\t-\u003e openResetPopup(true, false, false, false)\n\t\t);\n\t\tpopupMenu.add(inputItemResetText);\n\n\t\tJMenuItem inputItemResetColors \u003d new JMenuItem(\"Reset clue colors\");\n\t\tinputItemResetColors.addActionListener(event\n\t\t\t-\u003e openResetPopup(false, true, false, false)\n\t\t);\n\t\tpopupMenu.add(inputItemResetColors);\n\n\t\tJMenuItem inputItemResetItems \u003d new JMenuItem(\"Reset clue items\");\n\t\tinputItemResetItems.addActionListener(event\n\t\t\t-\u003e openResetPopup(false, false, true, false)\n\t\t);\n\t\tpopupMenu.add(inputItemResetItems);\n\n\t\tJMenuItem inputItemResetWidgets \u003d new JMenuItem(\"Reset clue widgets\");\n\t\tinputItemResetWidgets.addActionListener(event\n\t\t\t-\u003e openResetPopup(false, false, false, true)\n\t\t);\n\t\tpopupMenu.add(inputItemResetWidgets);\n\n\t\treturn popupMenu;\n\t}\n\n\tprivate JPopupMenu getCopyPopupMenu()\n\t{\n\t\tJPopupMenu popupMenu \u003d new JPopupMenu();\n\n\t\tJMenuItem inputItemExportText \u003d new JMenuItem(\"Export clue text\");\n\t\tinputItemExportText.addActionListener(event\n\t\t\t-\u003e clueDetailsSharingManager.exportClueDetails(true, false, false, false)\n\t\t);\n\t\tpopupMenu.add(inputItemExportText);\n\n\t\tJMenuItem inputItemExportColors \u003d new JMenuItem(\"Export clue colors\");\n\t\tinputItemExportColors.addActionListener(event\n\t\t\t-\u003e clueDetailsSharingManager.exportClueDetails(false, true, false, false)\n\t\t);\n\t\tpopupMenu.add(inputItemExportColors);\n\n\t\tJMenuItem inputItemExportItems \u003d new JMenuItem(\"Export clue items\");\n\t\tinputItemExportItems.addActionListener(event\n\t\t\t-\u003e clueDetailsSharingManager.exportClueDetails(false, false, true, false)\n\t\t);\n\t\tpopupMenu.add(inputItemExportItems);\n\n\t\tJMenuItem inputItemExportWidgets \u003d new JMenuItem(\"Export clue widgets\");\n\t\tinputItemExportWidgets.addActionListener(event\n\t\t\t-\u003e clueDetailsSharingManager.exportClueDetails(false, false, false, true)\n\t\t);\n\t\tpopupMenu.add(inputItemExportWidgets);\n\n\t\treturn popupMenu;\n\t}\n\n\tprivate JComboBox\u003cEnum\u003e makeNewDropdown(Enum[] values, String key)\n\t{\n\t\tJComboBox\u003cEnum\u003e dropdown \u003d new JComboBox\u003c\u003e(values);\n\t\tdropdown.setFocusable(false);\n\t\tdropdown.setForeground(Color.WHITE);\n\t\tdropdown.setRenderer(new DropdownRenderer());\n\t\tdropdown.addItemListener(e -\u003e\n\t\t{\n\t\t\tif (e.getStateChange() \u003d\u003d ItemEvent.SELECTED)\n\t\t\t{\n\t\t\t\tEnum source \u003d (Enum) e.getItem();\n\t\t\t\tconfigManager.setConfiguration(ClueDetailsConfig.class.getAnnotation(ConfigGroup.class).value(), key,\n\t\t\t\t\tsource);\n\t\t\t}\n\t\t});\n\n\t\treturn dropdown;\n\t}\n\n\tprivate JPanel makeDropdownPanel(JComboBox dropdown, String name)\n\t{\n\t\t// Filters\n\t\tJTextArea filterName \u003d JGenerator.makeJTextArea(name);\n\t\tfilterName.setForeground(Color.WHITE);\n\n\t\tJPanel filtersPanel \u003d new JPanel();\n\t\tfiltersPanel.setLayout(new BorderLayout());\n\t\tfiltersPanel.setBorder(new EmptyBorder(0, 0, BORDER_OFFSET, 0));\n\t\tfiltersPanel.setMinimumSize(new Dimension(PANEL_WIDTH, BORDER_OFFSET));\n\t\tfiltersPanel.add(filterName, BorderLayout.CENTER);\n\t\tfiltersPanel.add(dropdown, BorderLayout.EAST);\n\n\t\treturn filtersPanel;\n\t}\n\n\tprivate void showMatchingClues(String searchText)\n\t{\n\t\tfinal String[] searchTerms \u003d searchText.toLowerCase().split(\"\\\\s+\");\n\n\t\tList\u003cListItem\u003e filteredItems \u003d new ArrayList\u003c\u003e();\n\t\tListItem header \u003d null;\n\t\tfor (ListItem item : allClues)\n\t\t{\n\t\t\tif (item.isHeader())\n\t\t\t{\n\t\t\t\theader \u003d item;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tClues clue \u003d item.getClue();\n\t\t\t\tList\u003cString\u003e keywords \u003d new ArrayList\u003c\u003e();\n\t\t\t\tkeywords.add(clue.getDetail(configManager).toLowerCase());\n\t\t\t\tkeywords.add(Integer.toString(clue.getClueID()));\n\n\t\t\t\tboolean matches \u003d Arrays.stream(searchTerms)\n\t\t\t\t\t.allMatch(term -\u003e keywords.stream().anyMatch(keyword -\u003e keyword.contains(term)));\n\n\t\t\t\tif (matches)\n\t\t\t\t{\n\t\t\t\t\t// Only add header if search result contains items for that header\n\t\t\t\t\tif (header !\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tfilteredItems.add(header);\n\t\t\t\t\t\theader \u003d null;\n\t\t\t\t\t}\n\t\t\t\t\tfilteredItems.add(item);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tupdateClueList(filteredItems);\n\t}\n\n\tprivate void onSearchBarChanged()\n\t{\n\t\tfinal String text \u003d searchBar.getText();\n\t\tshowMatchingClues(text);\n\t}\n\n\tpublic void refresh()\n\t{\n\t\tSwingWorker\u003cList\u003cListItem\u003e, Void\u003e worker \u003d new SwingWorker\u003c\u003e()\n\t\t{\n\t\t\t@Override\n\t\t\tprotected List\u003cListItem\u003e doInBackground()\n\t\t\t{\n\t\t\t\t// Update dropdowns to match current config\n\t\t\t\ttierFilterDropdown.setSelectedItem(\n\t\t\t\t\tClueTierFilter.valueOf(configManager.getConfiguration(GROUP, \"filterListByTier\")));\n\t\t\t\tregionFilterDropdown.setSelectedItem(\n\t\t\t\t\tClueRegionFilter.valueOf(configManager.getConfiguration(GROUP, \"filterListByRegion\")));\n\t\t\t\torderDropdown.setSelectedItem(\n\t\t\t\t\tClueOrdering.valueOf(configManager.getConfiguration(GROUP, \"orderListBy\")));\n\n\t\t\t\tList\u003cClues\u003e filteredClues \u003d Clues.CLUES.stream()\n\t\t\t\t\t.filter(config.filterListByTier())\n\t\t\t\t\t.filter(config.filterListByRegion())\n\t\t\t\t\t.filter(ClueDetailsParentPanel.this::filterUnmarkedClues)\n\t\t\t\t\t.sorted(config.orderListBy())\n\t\t\t\t\t.collect(Collectors.toList());\n\n\t\t\t\tClueFilter[] sections \u003d config.orderListBy().getSections();\n\n\t\t\t\tList\u003cListItem\u003e items \u003d new ArrayList\u003c\u003e();\n\n\t\t\t\tfor (ClueFilter section : sections)\n\t\t\t\t{\n\t\t\t\t\tList\u003cClues\u003e filterList \u003d filteredClues.stream()\n\t\t\t\t\t\t.filter(section)\n\t\t\t\t\t\t.collect(Collectors.toList());\n\n\t\t\t\t\tif (!filterList.isEmpty())\n\t\t\t\t\t{\n\t\t\t\t\t\titems.add(new ListItem(section.getDisplayName()));\n\t\t\t\t\t\tfor (Clues clue : filterList)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titems.add(new ListItem(clue));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn items;\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tprotected void done()\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tList\u003cListItem\u003e items \u003d get();\n\t\t\t\t\tallClues \u003d items;\n\t\t\t\t\tString searchText \u003d searchBar.getText() !\u003d null ? searchBar.getText() : \"\";\n\t\t\t\t\tshowMatchingClues(searchText);\n\t\t\t\t}\n\t\t\t\tcatch (InterruptedException | ExecutionException e)\n\t\t\t\t{\n\t\t\t\t\te.printStackTrace();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tworker.execute();\n\t}\n\n\tprivate void updateClueList(List\u003cListItem\u003e items)\n\t{\n\t\tSwingUtilities.invokeLater(() -\u003e\n\t\t{\n\t\t\tclueTableModel.setItems(items);\n\t\t});\n\t}\n\n\tpublic boolean filterUnmarkedClues(Clues clue)\n\t{\n\t\tif (!config.onlyShowMarkedClues()) return true;\n\t\treturn cluePreferenceManager.getHighlightPreference(clue.getClueID());\n\t}\n\n\tprivate RuneliteColorPicker getColorPicker(Color color)\n\t{\n\t\tRuneliteColorPicker colorPicker \u003d plugin.getColorPickerManager().create(\n\t\t\tSwingUtilities.windowForComponent(this),\n\t\t\tcolor,\n\t\t\t\"Edit Clue Detail Color\",\n\t\t\ttrue);\n\t\tcolorPicker.setLocationRelativeTo(this);\n\t\treturn colorPicker;\n\t}\n\n\tpublic ChatboxItemSearch getItemSearch(String tooltip)\n\t{\n\t\treturn plugin.getItemSearch()\n\t\t\t.tooltipText(tooltip);\n\t}\n\n\tprivate void sendChatMessage(final String message)\n\t{\n\t\tplugin.getChatMessageManager().queue(QueuedMessage.builder()\n\t\t\t.type(ChatMessageType.CONSOLE)\n\t\t\t.runeLiteFormattedMessage(message)\n\t\t\t.build());\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\panels\\ClueDetailsParentPanel.java"},{"fileName":"ClueJTable.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails.panels;\n\nimport java.awt.Dimension;\nimport java.util.EventObject;\nimport javax.swing.JTable;\nimport javax.swing.ListSelectionModel;\nimport javax.swing.table.TableModel;\n\npublic class ClueJTable extends JTable\n{\n\tpublic ClueJTable(TableModel tableModel)\n\t{\n\t\tsuper(tableModel);\n\t\tgetColumnModel().getColumn(0).setPreferredWidth(10);\n\t\tsetRowHeight(30);\n\t\tsetShowGrid(false);\n\t\tsetIntercellSpacing(new Dimension(0, 0));\n\t\tsetSelectionMode(ListSelectionModel.SINGLE_SELECTION);\n\t\tsetTableHeader(null);\n\n\t\tsetSurrendersFocusOnKeystroke(false);\n\t\tsetCellSelectionEnabled(false);\n\t\tsetFocusable(false);\n\t}\n\n\t@Override\n\tpublic boolean editCellAt(int row, int column, EventObject e)\n\t{\n\t\tif (dataModel.isCellEditable(row, column))\n\t\t{\n\t\t\treturn super.editCellAt(row, column, e);\n\t\t}\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\panels\\ClueJTable.java"},{"fileName":"ClueTableCellEditor.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails.panels;\n\nimport com.cluedetails.Clues;\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Component;\nimport java.awt.Dimension;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport javax.swing.AbstractCellEditor;\nimport javax.swing.BorderFactory;\nimport javax.swing.JPanel;\nimport javax.swing.JTable;\nimport javax.swing.JTextArea;\nimport javax.swing.border.EmptyBorder;\nimport javax.swing.table.TableCellEditor;\nimport lombok.Getter;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.components.FlatTextField;\n\npublic class ClueTableCellEditor extends AbstractCellEditor implements TableCellEditor\n{\n\tprivate JPanel editorComponent \u003d new JPanel(new BorderLayout());\n\t@Getter\n\tprivate FlatTextField nameInput \u003d new FlatTextField();\n\tprivate JPanel nameActions \u003d new JPanel(new BorderLayout(3, 0));\n\tprivate JTextArea save \u003d JGenerator.makeJTextArea(\"Save\");\n\tprivate JTextArea cancel \u003d JGenerator.makeJTextArea(\"Cancel\");\n\n\tprivate Clues clue;\n\tprivate ConfigManager configManager;\n\tprivate JTable clueTable;\n\n\tpublic ClueTableCellEditor(ConfigManager configManager, JTable clueTable)\n\t{\n\t\tthis.configManager \u003d configManager;\n\t\tthis.clueTable \u003d clueTable;\n\n\t\teditorComponent.setOpaque(true);\n\t\teditorComponent.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\teditorComponent.setBorder(BorderFactory.createEmptyBorder(5, 10, 5, 10));\n\t\tnameInput.setBorder(null);\n\t\tnameInput.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tnameInput.setPreferredSize(new Dimension(0, 24));\n\t\tnameInput.getTextField().setForeground(Color.WHITE);\n\t\tnameInput.getTextField().setBorder(new EmptyBorder(0, 5, 0, 0));\n\n\t\tsave.setPreferredSize(new Dimension(30, 10));\n\t\tsave.setBorder(new EmptyBorder(8, 0, 0, 0));\n\t\tsave.setFont(FontManager.getRunescapeSmallFont());\n\t\tsave.setForeground(ColorScheme.PROGRESS_COMPLETE_COLOR);\n\t\tsave.addMouseListener(new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mouseClicked(MouseEvent e)\n\t\t\t{\n\t\t\t\tstopCellEditing();\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseEntered(MouseEvent e)\n\t\t\t{\n\t\t\t\tsave.setForeground(ColorScheme.PROGRESS_COMPLETE_COLOR.darker());\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseExited(MouseEvent e)\n\t\t\t{\n\t\t\t\tsave.setForeground(ColorScheme.PROGRESS_COMPLETE_COLOR);\n\t\t\t}\n\t\t});\n\n\t\tcancel.setPreferredSize(new Dimension(35, 10));\n\t\tcancel.setBorder(new EmptyBorder(8, 0, 0, 0));\n\t\tcancel.setFont(FontManager.getRunescapeSmallFont());\n\t\tcancel.setForeground(ColorScheme.PROGRESS_ERROR_COLOR);\n\t\tcancel.addMouseListener(new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mouseClicked(MouseEvent e)\n\t\t\t{\n\t\t\t\tcancelCellEditing();\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseEntered(MouseEvent e)\n\t\t\t{\n\t\t\t\tcancel.setForeground(ColorScheme.PROGRESS_ERROR_COLOR.darker());\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseExited(MouseEvent e)\n\t\t\t{\n\t\t\t\tcancel.setForeground(ColorScheme.PROGRESS_ERROR_COLOR);\n\t\t\t}\n\t\t});\n\n\t\tnameActions.setOpaque(false);\n\t\tnameActions.add(save, BorderLayout.EAST);\n\t\tnameActions.add(cancel, BorderLayout.WEST);\n\n\t\teditorComponent.add(nameInput, BorderLayout.CENTER);\n\t\teditorComponent.add(nameActions, BorderLayout.EAST);\n\t}\n\n\t@Override\n\tpublic Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column)\n\t{\n\t\tListItem item \u003d (ListItem) value;\n\t\tclue \u003d item.getClue();\n\n\t\tString displayText \u003d clue.getDetail(configManager);\n\t\tnameInput.setText(displayText);\n\t\tnameInput.getTextField().selectAll();\n\n\t\treturn editorComponent;\n\t}\n\n\t@Override\n\tpublic Object getCellEditorValue()\n\t{\n\t\treturn clue;\n\t}\n\n\t@Override\n\tpublic boolean stopCellEditing()\n\t{\n\t\tString newName \u003d nameInput.getText().trim();\n\t\tif (!newName.isEmpty())\n\t\t{\n\t\t\tconfigManager.setConfiguration(\"clue-details-text\", String.valueOf(clue.getClueID()), newName);\n\t\t}\n\t\t((ClueTableModel) clueTable.getModel()).resetEditableRow();\n\t\treturn super.stopCellEditing();\n\t}\n\n\t@Override\n\tpublic void cancelCellEditing()\n\t{\n\t\t((ClueTableModel) clueTable.getModel()).resetEditableRow();\n\t\tsuper.cancelCellEditing();\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\panels\\ClueTableCellEditor.java"},{"fileName":"ClueTableCellRenderer.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails.panels;\n\nimport com.cluedetails.CluePreferenceManager;\nimport com.cluedetails.Clues;\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Component;\nimport java.awt.Insets;\nimport javax.swing.BorderFactory;\nimport javax.swing.JPanel;\nimport javax.swing.JTable;\nimport javax.swing.JTextArea;\nimport javax.swing.border.Border;\nimport javax.swing.border.CompoundBorder;\nimport javax.swing.border.EmptyBorder;\nimport javax.swing.table.TableCellRenderer;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.ui.ColorScheme;\n\npublic class ClueTableCellRenderer extends JPanel implements TableCellRenderer\n{\n\t// Constants for borders and colors\n\tprivate static final Border SELECTED_BORDER \u003d new CompoundBorder(\n\t\tBorderFactory.createMatteBorder(0, 0, 1, 0, ColorScheme.BRAND_ORANGE),\n\t\tBorderFactory.createEmptyBorder(5, 10, 4, 10));\n\tprivate static final Border UNSELECTED_BORDER \u003d BorderFactory.createEmptyBorder(5, 10, 5, 10);\n\n\tprivate JTextArea textArea \u003d JGenerator.makeJTextArea();\n\tprivate CluePreferenceManager cluePreferenceManager;\n\tprivate ConfigManager configManager;\n\tprivate ClueDetailsParentPanel clueDetailsParentPanel;\n\n\tpublic ClueTableCellRenderer(ClueDetailsParentPanel clueDetailsParentPanel, CluePreferenceManager cluePreferenceManager, ConfigManager configManager)\n\t{\n\t\tthis.clueDetailsParentPanel \u003d clueDetailsParentPanel;\n\t\tthis.cluePreferenceManager \u003d cluePreferenceManager;\n\t\tthis.configManager \u003d configManager;\n\n\t\tsetLayout(new BorderLayout());\n\t\tsetOpaque(true);\n\t\tsetBorder(new EmptyBorder(5, 5, 0, 5));\n\n\t\ttextArea.setMargin(new Insets(5, 5, 5, 0));\n\t\tadd(textArea, BorderLayout.CENTER);\n\t}\n\n\t@Override\n\tpublic Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column)\n\t{\n\t\tListItem item \u003d (ListItem) value;\n\t\tif (item.isHeader())\n\t\t{\n\t\t\ttextArea.setText(item.getHeader());\n\t\t\ttextArea.setForeground(Color.WHITE);\n\t\t\ttextArea.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\t\tsetBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\t\ttextArea.setBorder(UNSELECTED_BORDER);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tClues clue \u003d item.getClue();\n\t\t\ttextArea.setText(clue.getDetail(configManager));\n\t\t\ttextArea.setBackground(clueDetailsParentPanel.getHoveredRow() \u003d\u003d row ? ColorScheme.DARK_GRAY_HOVER_COLOR : ColorScheme.DARKER_GRAY_COLOR);\n\t\t\ttextArea.setForeground(clue.getDetailColor(configManager));\n\t\t\ttextArea.setOpaque(true);\n\n\t\t\tboolean isActive \u003d cluePreferenceManager.getHighlightPreference(clue.getClueID());\n\t\t\ttextArea.setBorder(isActive ? SELECTED_BORDER : UNSELECTED_BORDER);\n\t\t\tsetBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\t}\n\n\t\tadjustRowHeight(table, row);\n\n\t\treturn this;\n\t}\n\n\tprivate void adjustRowHeight(JTable table, int row)\n\t{\n\t\tint prefHeight \u003d getPreferredHeight(textArea);\n\n\t\tif (table.getRowHeight(row) !\u003d prefHeight)\n\t\t{\n\t\t\ttable.setRowHeight(row, prefHeight + 6);\n\t\t}\n\t}\n\n\tprivate int getPreferredHeight(JTextArea textArea)\n\t{\n\t\tint prefHeight \u003d textArea.getPreferredSize().height + getInsets().top + getInsets().bottom;\n\n\t\treturn prefHeight;\n\t}\n}","filePath":"src\\main\\java\\com\\cluedetails\\panels\\ClueTableCellRenderer.java"},{"fileName":"ClueTableModel.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails.panels;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.swing.table.AbstractTableModel;\n\npublic class ClueTableModel extends AbstractTableModel\n{\n\tprivate static final int COLUMN_COUNT \u003d 1;\n\tprivate int editableRow \u003d -1;\n\n\tprivate List\u003cListItem\u003e items \u003d new ArrayList\u003c\u003e();\n\n\tpublic void setItems(List\u003cListItem\u003e items)\n\t{\n\t\tthis.items \u003d items;\n\t\tfireTableDataChanged();\n\t}\n\n\t@Override\n\tpublic int getRowCount()\n\t{\n\t\treturn items.size();\n\t}\n\n\t@Override\n\tpublic int getColumnCount()\n\t{\n\t\treturn COLUMN_COUNT;\n\t}\n\n\t@Override\n\tpublic Object getValueAt(int rowIndex, int columnIndex)\n\t{\n\t\treturn items.get(rowIndex);\n\t}\n\n\tpublic void setEditableRow(int row)\n\t{\n\t\tthis.editableRow \u003d row;\n\t\tfireTableCellUpdated(row, 0);\n\t}\n\n\tpublic void resetEditableRow()\n\t{\n\t\tint previousEditableRow \u003d this.editableRow;\n\t\tthis.editableRow \u003d -1;\n\t\tif (previousEditableRow !\u003d -1)\n\t\t{\n\t\t\tfireTableCellUpdated(previousEditableRow, 0);\n\t\t}\n\t}\n\n\t@Override\n\tpublic boolean isCellEditable(int rowIndex, int columnIndex)\n\t{\n\t\treturn rowIndex \u003d\u003d editableRow;\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\panels\\ClueTableModel.java"},{"fileName":"DropdownRenderer.java","content":"/*\n * Copyright (c) 2021, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails.panels;\n\nimport java.awt.Color;\nimport java.awt.Component;\nimport javax.swing.DefaultListCellRenderer;\nimport javax.swing.JList;\nimport javax.swing.border.EmptyBorder;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.util.Text;\n\npublic final class DropdownRenderer extends DefaultListCellRenderer\n{\n\t@Override\n\tpublic Component getListCellRendererComponent(JList\u003c?\u003e list, Object o, int i, boolean isSelected, boolean b1) {\n\t\tsetBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tsetForeground(Color.WHITE);\n\t\tsetBorder(new EmptyBorder(0, 0, 0, 0));\n\n\t\tif (!isSelected)\n\t\t{\n\t\t\tsetBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\t\tsetForeground(Color.WHITE);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetBackground(list.getBackground());\n\t\t\tsetForeground(ColorScheme.LIGHT_GRAY_COLOR);\n\t\t}\n\n\t\tsetText(Text.titleCase((Enum) o));\n\n\t\treturn this;\n\t}\n}","filePath":"src\\main\\java\\com\\cluedetails\\panels\\DropdownRenderer.java"},{"fileName":"JGenerator.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails.panels;\n\nimport javax.swing.JTextArea;\nimport javax.swing.border.EmptyBorder;\n\npublic class JGenerator\n{\n\tpublic static JTextArea makeJTextArea()\n\t{\n\t\tJTextArea jTextArea \u003d new JTextArea();\n\t\tjTextArea.setLineWrap(true);\n\t\tjTextArea.setWrapStyleWord(true);\n\t\tjTextArea.setOpaque(false);\n\t\tjTextArea.setEditable(false);\n\t\tjTextArea.setFocusable(false);\n\t\tjTextArea.setBackground(null);\n\t\tjTextArea.setBorder(new EmptyBorder(0, 0, 0, 0));\n\n\t\treturn jTextArea;\n\t}\n\n\tpublic static JTextArea makeJTextArea(String text)\n\t{\n\t\tJTextArea jTextArea \u003d new JTextArea(text);\n\t\tjTextArea.setLineWrap(true);\n\t\tjTextArea.setWrapStyleWord(true);\n\t\tjTextArea.setOpaque(false);\n\t\tjTextArea.setEditable(false);\n\t\tjTextArea.setFocusable(false);\n\t\tjTextArea.setBackground(null);\n\t\tjTextArea.setBorder(new EmptyBorder(0, 0, 0, 0));\n\n\t\treturn jTextArea;\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\panels\\JGenerator.java"},{"fileName":"ListItem.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails.panels;\n\nimport com.cluedetails.Clues;\nimport lombok.Getter;\n\n@Getter\npublic class ListItem\n{\n\tprivate Clues clue;\n\tprivate String header;\n\n\tpublic ListItem(Clues clue)\n\t{\n\t\tthis.clue \u003d clue;\n\t}\n\n\tpublic ListItem(String header)\n\t{\n\t\tthis.header \u003d header;\n\t}\n\n\tpublic boolean isHeader()\n\t{\n\t\treturn header !\u003d null;\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\panels\\ListItem.java"},{"fileName":"PendingGroundClue.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://www.github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport lombok.Getter;\nimport net.runelite.api.TileItem;\nimport net.runelite.api.coords.WorldPoint;\n\n@Getter\npublic class PendingGroundClue\n{\n\tprivate final TileItem item;\n\tprivate final WorldPoint location;\n\tprivate final int spawnTick;\n\n\tpublic PendingGroundClue(TileItem item, WorldPoint location, int spawnTick)\n\t{\n\t\tthis.item \u003d item;\n\t\tthis.location \u003d location;\n\t\tthis.spawnTick \u003d spawnTick;\n\t}\n}","filePath":"src\\main\\java\\com\\cluedetails\\PendingGroundClue.java"},{"fileName":"ThreeStepCrypticClue.java","content":"/*\n * Copyright (c) 2024, TheLope \u003chttps://github.com/TheLope\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport java.util.AbstractMap;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport static net.runelite.api.ItemID.TORN_CLUE_SCROLL_PART_1;\nimport static net.runelite.api.ItemID.TORN_CLUE_SCROLL_PART_2;\nimport static net.runelite.api.ItemID.TORN_CLUE_SCROLL_PART_3;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.util.Text;\n\n@Getter\n@RequiredArgsConstructor\npublic class ThreeStepCrypticClue\n{\n\tprivate final List\u003cMap.Entry\u003cClues, Boolean\u003e\u003e clueSteps;\n\tprivate final String text;\n\n\tpublic static ThreeStepCrypticClue forText(String text)\n\t{\n\t\tfinal String[] split \u003d text.split(\"\u003cbr\u003e\");\n\t\tfinal List\u003cMap.Entry\u003cClues, Boolean\u003e\u003e steps \u003d new ArrayList\u003c\u003e(split.length);\n\n\t\tfor (String part : split)\n\t\t{\n\t\t\tboolean isDone \u003d part.contains(\"\u003cstr\u003e\");\n\t\t\tfinal String rawText \u003d Text.sanitizeMultilineText(part);\n\n\t\t\tfor (Clues clue : Clues.CLUES)\n\t\t\t{\n\t\t\t\tif (!rawText.equalsIgnoreCase(clue.getClueText()))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tsteps.add(new AbstractMap.SimpleEntry\u003c\u003e(clue, isDone));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (steps.isEmpty() || steps.size() \u003c 3)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn new ThreeStepCrypticClue(steps, text);\n\t}\n\n\tpublic void update(Set\u003cInteger\u003e trackedClues)\n\t{\n\t\tcheckForPart(trackedClues, TORN_CLUE_SCROLL_PART_1, 0);\n\t\tcheckForPart(trackedClues, TORN_CLUE_SCROLL_PART_2, 1);\n\t\tcheckForPart(trackedClues, TORN_CLUE_SCROLL_PART_3, 2);\n\t}\n\n\tprivate void checkForPart(final Set\u003cInteger\u003e trackedClues, int clueScrollPart, int index)\n\t{\n\t\t// If we have the part then that step is done\n\t\tif (trackedClues.contains(clueScrollPart))\n\t\t{\n\t\t\tfinal Map.Entry\u003cClues, Boolean\u003e entry \u003d clueSteps.get(index);\n\n\t\t\tif (!entry.getValue())\n\t\t\t{\n\t\t\t\tentry.setValue(true);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic String getDetail(ConfigManager configManager, ClueDetailsConfig config)\n\t{\n\t\tStringBuilder text \u003d new StringBuilder();\n\n\t\tboolean allPartsObtained \u003d allPartsObtained();\n\n\t\tfor (final Map.Entry\u003cClues, Boolean\u003e e : clueSteps)\n\t\t{\n\t\t\t// Show tags for steps not yet completed, or when all steps have been completed\n\t\t\tif (!e.getValue() || allPartsObtained)\n\t\t\t{\n\t\t\t\tClues clue \u003d e.getKey();\n\t\t\t\tString detail \u003d clue.getDetail(configManager);\n\t\t\t\tif (config.colorInventoryClueTags())\n\t\t\t\t{\n\t\t\t\t\tString color \u003d Integer.toHexString(clue.getDetailColor(configManager).getRGB()).substring(2);\n\t\t\t\t\ttext.append(\"\u003ccol\u003d\").append(color).append(\"\u003e\");\n\t\t\t\t}\n\t\t\t\ttext.append(detail).append(\"\u003cbr\u003e\");\n\t\t\t}\n\t\t}\n\t\treturn text.toString();\n\t}\n\n\tprivate boolean allPartsObtained()\n\t{\n\t\tif (clueSteps \u003d\u003d null || clueSteps.size() \u003c\u003d 1) return false;\n\t\tBoolean compare \u003d clueSteps.get(0).getValue();\n\t\treturn clueSteps.stream().allMatch(entry -\u003e entry.getValue().equals(compare));\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\ThreeStepCrypticClue.java"},{"fileName":"ClueDetailsWorldMapPoint.java","content":"/*\n * Copyright (c) 2018, Morgan Lewis \u003chttps://github.com/MESLewis\u003e\n * Copyright (c) 2025, TheLope \u003chttps://github.com/TheLope\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails.tools;\n\nimport com.cluedetails.ClueDetailsPlugin;\nimport java.awt.Graphics;\nimport java.awt.image.BufferedImage;\nimport net.runelite.api.Point;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.ui.overlay.worldmap.WorldMapPoint;\nimport net.runelite.client.util.ImageUtil;\n\npublic class ClueDetailsWorldMapPoint extends WorldMapPoint\n{\n\tprivate final ClueDetailsPlugin plugin;\n\tprivate final BufferedImage clueDetailWorldImage;\n\tprivate final Point clueDetailWorldImagePoint;\n\n\tpublic ClueDetailsWorldMapPoint(final WorldPoint worldPoint, ClueDetailsPlugin plugin)\n\t{\n\t\tsuper(worldPoint, null);\n\n\t\tBufferedImage iconBackground \u003d ImageUtil.loadImageResource(getClass(), \"/util/clue_arrow.png\");\n\t\tclueDetailWorldImage \u003d new BufferedImage(iconBackground.getWidth(), iconBackground.getHeight(), BufferedImage.TYPE_INT_ARGB);\n\n\t\tGraphics graphics \u003d clueDetailWorldImage.getGraphics();\n\t\tgraphics.drawImage(iconBackground, 0, 0, null);\n\t\tgraphics.drawImage(plugin.getClueScrollImage(), 0, 0, null);\n\t\tclueDetailWorldImagePoint \u003d new Point(\n\t\t\tclueDetailWorldImage.getWidth() / 2,\n\t\t\tclueDetailWorldImage.getHeight());\n\n\t\tthis.plugin \u003d plugin;\n\t\tthis.setSnapToEdge(true);\n\t\tthis.setJumpOnClick(true);\n\t\tthis.setName(ClueDetailsPlugin.CLUE_GROUND_TIMER_TARGET);\n\t\tthis.setImage(clueDetailWorldImage);\n\t\tthis.setImagePoint(clueDetailWorldImagePoint);\n\t}\n\n\t@Override\n\tpublic void onEdgeSnap()\n\t{\n\t\tthis.setImage(plugin.getClueScrollImage());\n\t\tthis.setImagePoint(null);\n\t}\n\n\t@Override\n\tpublic void onEdgeUnsnap()\n\t{\n\t\tthis.setImage(clueDetailWorldImage);\n\t\tthis.setImagePoint(clueDetailWorldImagePoint);\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\tools\\ClueDetailsWorldMapPoint.java"},{"fileName":"WidgetId.java","content":"/*\n * Copyright (c) 2025, cubeee \u003chttps://www.github.com/cubeee\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport lombok.Data;\nimport lombok.Getter;\n\n@Getter\n@Data\npublic class WidgetId\n{\n\n    private final int componentId;\n    private final Integer childIndex;\n\n    public WidgetId(int componentId, Integer childIndex)\n    {\n        this.componentId \u003d componentId;\n        this.childIndex \u003d childIndex;\n    }\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\WidgetId.java"},{"fileName":"WorldPointToClueInstances.java","content":"/*\n * Copyright (c) 2025, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.Comparator;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.SortedSet;\nimport java.util.TreeSet;\nimport net.runelite.api.Client;\nimport net.runelite.api.Tile;\nimport net.runelite.api.WorldView;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\n\npublic class WorldPointToClueInstances\n{\n\tprivate final Client client;\n\tprivate final ClueDetailsPlugin clueDetailsPlugin;\n\tprivate final Comparator\u003cClueInstance\u003e clueComparator;\n\n\tprivate final Map\u003cWorldPoint, SortedSet\u003cClueInstance\u003e\u003e cluesByWorldPoint \u003d new HashMap\u003c\u003e();\n\tprivate final Map\u003cWorldPoint, List\u003cClueInstance\u003e\u003e groundCluesBeginnerAndMaster \u003d new HashMap\u003c\u003e();\n\tprivate final Map\u003cWorldPoint, List\u003cClueInstance\u003e\u003e groundCluesEasyToElite \u003d new HashMap\u003c\u003e();\n\n\tpublic WorldPointToClueInstances(Client client, ClueDetailsPlugin clueDetailsPlugin)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.clueDetailsPlugin \u003d clueDetailsPlugin;\n\n\t\tclueComparator \u003d Comparator\n\t\t\t.comparingLong(ClueInstance::getSequenceNumber)\n\t\t\t.thenComparingInt(ClueInstance::getDespawnTick);\n\t}\n\n\tprivate void createGroupedSet(WorldPoint wp)\n\t{\n\t\tif (cluesByWorldPoint.get(wp) !\u003d null)\n\t\t{\n\t\t\tcluesByWorldPoint.get(wp).clear();\n\t\t}\n\n\t\tif (groundCluesBeginnerAndMaster.get(wp) !\u003d null)\n\t\t{\n\t\t\tfor (ClueInstance clueInstance : groundCluesBeginnerAndMaster.get(wp))\n\t\t\t{\n\t\t\t\tcluesByWorldPoint.computeIfAbsent(wp, k -\u003e new TreeSet\u003c\u003e(clueComparator)).add(clueInstance);\n\t\t\t}\n\t\t}\n\n\t\tif (groundCluesEasyToElite.get(wp) !\u003d null)\n\t\t{\n\t\t\tfor (ClueInstance clueInstance : groundCluesEasyToElite.get(wp))\n\t\t\t{\n\t\t\t\tcluesByWorldPoint.computeIfAbsent(wp, k -\u003e new TreeSet\u003c\u003e(clueComparator)).add(clueInstance);\n\t\t\t}\n\t\t}\n\n\t\tif (cluesByWorldPoint.get(wp) !\u003d null \u0026\u0026 cluesByWorldPoint.get(wp).isEmpty())\n\t\t{\n\t\t\tcluesByWorldPoint.remove(wp);\n\t\t}\n\t}\n\n\tpublic List\u003cClueInstance\u003e getAllClues()\n\t{\n\t\tSortedSet\u003cClueInstance\u003e allClues \u003d new TreeSet\u003c\u003e(clueComparator);\n\n\t\tcluesByWorldPoint.values().forEach(allClues::addAll);\n\t\treturn new ArrayList\u003c\u003e(allClues);\n\t}\n\n\tpublic SortedSet\u003cClueInstance\u003e getAllCluesAtWorldPoint(WorldPoint wp)\n\t{\n\t\treturn cluesByWorldPoint.getOrDefault(wp, Collections.emptySortedSet());\n\t}\n\n\tpublic List\u003cClueInstance\u003e getBeginnerAndMasterCluesAtWorldPoint(WorldPoint wp)\n\t{\n\t\treturn new ArrayList\u003c\u003e(groundCluesBeginnerAndMaster.getOrDefault(wp, new ArrayList\u003c\u003e()));\n\t}\n\n\tpublic void addClue(ClueInstance clueInstance)\n\t{\n\t\tif (Clues.isBeginnerOrMasterClue(clueInstance.getItemId(), clueDetailsPlugin.isDeveloperMode()))\n\t\t{\n\t\t\taddBeginnerMasterClue(clueInstance);\n\t\t}\n\t\telse if (Clues.isClue(clueInstance.getItemId(), clueDetailsPlugin.isDeveloperMode()))\n\t\t{\n\t\t\taddEasyToEliteClue(clueInstance);\n\t\t}\n\n\t\tcreateGroupedSet(clueInstance.getLocation());\n\t}\n\n\tpublic void removeClue(ClueInstance clueInstance)\n\t{\n\t\tif (Clues.isBeginnerOrMasterClue(clueInstance.getItemId(), clueDetailsPlugin.isDeveloperMode()))\n\t\t{\n\t\t\tremoveBeginnerMasterClue(clueInstance);\n\t\t}\n\t\telse if (Clues.isClue(clueInstance.getItemId(), clueDetailsPlugin.isDeveloperMode()))\n\t\t{\n\t\t\tremoveEasyToEliteClue(clueInstance);\n\t\t}\n\n\t\tcreateGroupedSet(clueInstance.getLocation());\n\t}\n\n\tprivate void addBeginnerMasterClue(ClueInstance clue)\n\t{\n\t\tgroundCluesBeginnerAndMaster.computeIfAbsent(clue.getLocation(), k -\u003e new ArrayList\u003c\u003e()).add(clue);\n\t}\n\n\tprivate void addEasyToEliteClue(ClueInstance clueInstance)\n\t{\n\t\tgroundCluesEasyToElite.computeIfAbsent(clueInstance.getLocation(), k -\u003e new ArrayList\u003c\u003e()).add(clueInstance);\n\t}\n\n\tprivate void removeBeginnerMasterClue(ClueInstance clueInstance)\n\t{\n\t\tList\u003cClueInstance\u003e list \u003d groundCluesBeginnerAndMaster.get(clueInstance.getLocation());\n\t\tif (list !\u003d null)\n\t\t{\n\t\t\tlist.remove(clueInstance);\n\t\t\tif (list.isEmpty())\n\t\t\t{\n\t\t\t\tgroundCluesBeginnerAndMaster.remove(clueInstance.getLocation());\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void removeEasyToEliteClue(ClueInstance clueInstance)\n\t{\n\t\tList\u003cClueInstance\u003e list \u003d groundCluesEasyToElite.get(clueInstance.getLocation());\n\t\tif (list !\u003d null)\n\t\t{\n\t\t\tlist.remove(clueInstance);\n\n\t\t\tif (groundCluesEasyToElite.get(clueInstance.getLocation()) !\u003d null \u0026\u0026 groundCluesEasyToElite.get(clueInstance.getLocation()).isEmpty())\n\t\t\t{\n\t\t\t\tgroundCluesEasyToElite.remove(clueInstance.getLocation());\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic void clearEasyToEliteCluesAtWorldPoint(WorldPoint wp)\n\t{\n\t\tList\u003cClueInstance\u003e clues \u003d groundCluesEasyToElite.get(wp);\n\t\tif (clues \u003d\u003d null) return;\n\t\tnew ArrayList\u003c\u003e(clues).forEach(this::removeClue);\n\t}\n\n\tpublic void clearBeginnerAndMasterCluesAtWorldPoint(WorldPoint wp)\n\t{\n\t\tList\u003cClueInstance\u003e clues \u003d groundCluesBeginnerAndMaster.get(wp);\n\t\tif (clues \u003d\u003d null) return;\n\t\tnew ArrayList\u003c\u003e(clues).forEach(this::removeClue);\n\t}\n\n\tpublic void clearEmptyTiles(Zone currentZone)\n\t{\n\t\tfor (ClueInstance clueInstance : getAllClues())\n\t\t{\n\t\t\tTile tile \u003d getTileAtWorldPoint(clueInstance.getLocation());\n\t\t\tif (tile \u003d\u003d null) continue;\n\n\t\t\tZone clueZone \u003d new Zone(tile.getWorldLocation());\n\t\t\t// Item won\u0027t have potentially spawned if too far, so don\u0027t remove\n\t\t\tint zonesDistance \u003d clueZone.maxDistanceTo(currentZone);\n\t\t\tif (zonesDistance \u003e\u003d 4) continue;\n\t\t\tif (tile.getGroundItems() \u003d\u003d null || tile.getGroundItems().isEmpty())\n\t\t\t{\n\t\t\t\tremoveClue(clueInstance);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic void clearAllClues()\n\t{\n\t\tgroundCluesEasyToElite.clear();\n\t\tgroundCluesBeginnerAndMaster.clear();\n\t\tcluesByWorldPoint.clear();\n\t}\n\n\tpublic void removeDespawnedClues()\n\t{\n\t\tfor (ClueInstance clueInstance : getAllClues())\n\t\t{\n\t\t\tif (clueInstance.getDespawnTick() \u003c\u003d client.getTickCount())\n\t\t\t{\n\t\t\t\tremoveClue(clueInstance);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic Set\u003cWorldPoint\u003e getAllTrackedWorldPoints()\n\t{\n\t\treturn cluesByWorldPoint.keySet();\n\t}\n\n\tpublic Tile getTileAtWorldPoint(WorldPoint tileWp)\n\t{\n\t\tWorldView worldView \u003d client.getTopLevelWorldView();\n\t\tLocalPoint tileLp \u003d LocalPoint.fromWorld(worldView, tileWp);\n\t\tif (tileLp \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\treturn worldView.getScene().getTiles()[tileWp.getPlane()][tileLp.getSceneX()][tileLp.getSceneY()];\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\WorldPointToClueInstances.java"},{"fileName":"Zone.java","content":"/*\n * Copyright (c) 2024, Zoinkwiz \u003chttps://github.com/Zoinkwiz\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.cluedetails;\n\nimport net.runelite.api.coords.WorldPoint;\n\npublic class Zone\n{\n\tprivate final int x;\n\tprivate final int y;\n\n\tpublic Zone(WorldPoint wp)\n\t{\n\t\tx \u003d wp.getX() / 8;\n\t\ty \u003d wp.getY() / 8;\n\t}\n\n\tpublic int maxDistanceTo(Zone zone)\n\t{\n\t\treturn Math.max(Math.abs(zone.x - x), Math.abs(zone.y - y));\n\t}\n}\n","filePath":"src\\main\\java\\com\\cluedetails\\Zone.java"},{"fileName":"ClueDetailsPluginTest.java","content":"package com.cluedetails;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ClueDetailsPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(ClueDetailsPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\cluedetails\\ClueDetailsPluginTest.java"}]},{"commit":"8f206563a389d766221ef225caabc60704ff591a","repository":"https://github.com/Loze-Put/projectile-override.git","internalName":"projectile-override","files":[{"fileName":"BossProjectiles.java","content":"package com.projectileoverride;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic enum BossProjectiles\n{\n\tDEFAULT(\"Default\"),\n    RANDOM(\"Random\", ProjectileIds.RANDOM, ProjectileIds.RANDOM, ProjectileIds.RANDOM),\n    AKKHA(\"Akkha\", 2253, 2255),\n\tCERBERUS(\"Cerberus\", 1242, 1245),\n\tDAGGANOTH_KINGS(\"DKS\", 162, 475, new int[] { 11588, 11589 }),\n    DEMONIC_GORILLA(\"Demonic Gorilla\", 1304, 1302),\n\tDOOM_OF_MOKHAIOTL(\"Doom\", 3379, 3380, 3378),\n\tDOOM_OF_MOKHAIOTL_ROCKS(\"Doom rocks\", 3385, 3384),\n\tHUEYCOATL(\"Hueycoatl\", 2975, 2972, 2969),\n\tHUNLLEF_NORMAL(\"Hunllef\", 1707, 1711),\n\tHUNLLEF_CORRUPTED(\"Hunllef (c)\", 1708, 1712),\n    HYDRA(\"Hydra\", 1662, 1663),\n\tINFERNO(\"Inferno\", 1380, 1378),\n    KALPHITE_QUEEN(\"Kalphite Queen\", 280, 288),\n    KREE_ARRA(\"Kree Arra\", 1200, 1199),\n    LEVIATHAN(\"Leviathan\", 2489, 2487, 2488),\n    MANTICORE(\"Manticore\", 2681, 2683, 2685),\n\tOLM(\"Olm\", 1341, 1343, 1345),\n\tSCURRIUS(\"Scurrius\", 2640, 2642),\n\tSOTETSEG(\"Sotetseg\", 1606, 1607),\n\tTORMENTED_DEMON(\"Tormented Demon\", 2853, 2857),\n\tVARDORVIS(\"Vardorvis\", 2520, 2521),\n\tWARDENS(\"Wardens\", 2224, 2241),\n    WARDENS_DIVINE(\"Wardens divine\", 2208, 2206, 2204),\n\tWHISPERER(\"Whisperer\", 2445, 2444),\n\tZEBAK(\"Zebak\", new int[] { 2181 }, new int[] { 2187, 2188, 2189, 2190 }),\n\tZEBAK_ROCKS(\"Zebak rocks\", new int[] { 2176, 2177 }, new int[] { 2178, 2179 }),\n\tZULRAH(\"Zulrah\", 1046, 1044);\n\n\tprivate final String name;\n    private final int[] magicProjectiles;\n    private final int[] rangedProjectiles;\n    private final int[] meleeProjectiles;\n    private final int[] requiredRegions;\n\n    private BossProjectiles(String name) {\n        this(name, new int[0], new int[0]);\n    }\n\n    private BossProjectiles(String name, int magicProjectile, int rangedProjectile) {\n        this(name, new int[] { magicProjectile }, new int[] { rangedProjectile });\n    }\n\n    private BossProjectiles(String name, int magicProjectile, int rangedProjectile, int meleeProjectile) {\n        this(name, new int[] { magicProjectile }, new int[] { rangedProjectile }, new int[] { meleeProjectile });\n    }\n\n    private BossProjectiles(String name, int magicProjectile, int rangedProjectile, int[] requiredRegions) {\n        this(name, new int[] { magicProjectile }, new int[] { rangedProjectile }, new int[0], requiredRegions);\n    }\n\n\tprivate BossProjectiles(String name, int[] magicProjectiles, int[] rangedProjectiles) {\n\t\tthis(name, magicProjectiles, rangedProjectiles, new int[0]);\n\t}\n\n    private BossProjectiles(String name, int[] magicProjectiles, int[] rangedProjectiles, int[] meleeProjectiles) {\n        this(name, magicProjectiles, rangedProjectiles, meleeProjectiles, new int[0]);\n    }\n\n    private BossProjectiles(String name, int[] magicProjectiles, int[] rangedProjectiles, int[] meleeProjectiles, int[] requiredRegions) {\n        this.name \u003d name;\n        this.magicProjectiles \u003d magicProjectiles;\n        this.rangedProjectiles \u003d rangedProjectiles;\n        this.meleeProjectiles \u003d meleeProjectiles;\n        this.requiredRegions \u003d requiredRegions;\n    }\n\n    public int getMagicOverride() {\n        return this.magicProjectiles.length \u003e 0 ? this.magicProjectiles[0] : ProjectileIds.NONE;\n    }\n\n    public int getRangedOverride() {\n        return this.rangedProjectiles.length \u003e 0 ? this.rangedProjectiles[0] : ProjectileIds.NONE;\n    }\n\n    public int getMeleeOverride() {\n        return this.meleeProjectiles.length \u003e 0 ? this.meleeProjectiles[0] : ProjectileIds.NONE;\n    }\n\n    public List\u003cProjectileOverride\u003e createOverride(BossProjectiles override) {\n        var result \u003d new ArrayList\u003cProjectileOverride\u003e();\n\n        result.addAll(createOverride(this.magicProjectiles, override.getMagicOverride(), ProjectileIds.STYLE_MAGIC));\n        result.addAll(createOverride(this.rangedProjectiles, override.getRangedOverride(), ProjectileIds.STYLE_RANGED));\n        result.addAll(createOverride(this.meleeProjectiles, override.getMeleeOverride(), ProjectileIds.STYLE_MELEE));\n\n        return result;\n    }\n\n\t@Override\n\tpublic String toString()\n\t{\n\t\treturn name;\n\t}\n\n    private List\u003cProjectileOverride\u003e createOverride(int[] sourceProjectiles, int override, int style) {\n        var result \u003d new ArrayList\u003cProjectileOverride\u003e();\n\n        if (override !\u003d ProjectileIds.NONE) {\n            for (int source : sourceProjectiles) {\n                if(source !\u003d ProjectileIds.NONE \u0026\u0026 source !\u003d override) {\n                    result.add(new ProjectileOverride(source, override, style, this.requiredRegions));\n                }\n            }\n        }\n\n        return result;\n    }\n}\n","filePath":"src\\main\\java\\com\\projectileoverride\\BossProjectiles.java"},{"fileName":"ProjectileIds.java","content":"package com.projectileoverride;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.concurrent.ThreadLocalRandom;\n\npublic final class ProjectileIds\n{\n\tpublic static final int NONE \u003d -1;\n    public static final int RANDOM \u003d -2;\n\n    public static final int STYLE_MAGIC \u003d 0;\n    public static final int STYLE_RANGED \u003d 1;\n    public static final int STYLE_MELEE \u003d 2;\n\n    private static final List\u003cInteger\u003e[] ALL_PROJECTILES_PER_STYLE \u003d buildPoolPerStyle();\n\n\tprivate ProjectileIds() {}\n\n    public static int getRandomProjectile(int style) {\n        var pool \u003d ALL_PROJECTILES_PER_STYLE[style];\n        return pool.get(ThreadLocalRandom.current().nextInt(pool.size()));\n    }\n\n    @SuppressWarnings(\"unchecked\")\n    private static List\u003cInteger\u003e[] buildPoolPerStyle() {\n        List\u003cInteger\u003e[] pools \u003d new List[]{new ArrayList\u003c\u003e(), new ArrayList\u003c\u003e(), new ArrayList\u003c\u003e()};\n        BossProjectiles[] allProjectiles \u003d BossProjectiles.values();\n\n        for (var projectile : allProjectiles) {\n            addToPool(pools[STYLE_MAGIC], projectile.getMagicOverride());\n            addToPool(pools[STYLE_RANGED], projectile.getRangedOverride());\n            addToPool(pools[STYLE_MELEE], projectile.getMeleeOverride());\n        }\n\n        return pools;\n    }\n\n    private static void addToPool(List\u003cInteger\u003e pool, int override) {\n        if (override !\u003d ProjectileIds.NONE \u0026\u0026 override !\u003d ProjectileIds.RANDOM) {\n            pool.add(override);\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\projectileoverride\\ProjectileIds.java"},{"fileName":"ProjectileOverride.java","content":"package com.projectileoverride;\n\nimport lombok.Getter;\nimport net.runelite.api.Projectile;\n\npublic class ProjectileOverride\n{\n    @Getter\n    private final int sourceProjectileId;\n\tprivate final int overrideProjectileId;\n    private final int style;\n\tprivate final int[] requiredRegion;\n\n    public ProjectileOverride(int sourceProjectileId, int overrideProjectileId, int style, int[] requiredRegion) {\n\t\tthis.sourceProjectileId \u003d sourceProjectileId;\n        this.overrideProjectileId \u003d overrideProjectileId;\n        this.style \u003d style;\n\t\tthis.requiredRegion \u003d requiredRegion;\n\t}\n\n    public int getOverrideProjectileId() {\n        if (overrideProjectileId \u003d\u003d ProjectileIds.RANDOM) {\n            return ProjectileIds.getRandomProjectile(style);\n        }\n\n        return overrideProjectileId;\n    }\n\n\tpublic boolean canOverride(Projectile projectile) {\n\t\tif (requiredRegion \u003d\u003d null || requiredRegion.length \u003d\u003d 0) {\n\t\t\treturn true;\n\t\t}\n\n\t\tfor (int regionId: requiredRegion)\n\t\t{\n\t\t\tif (projectile.getSourcePoint().getRegionID() \u003d\u003d regionId) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\com\\projectileoverride\\ProjectileOverride.java"},{"fileName":"ProjectileOverrideConfig.java","content":"package com.projectileoverride;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(ProjectileOverrideConfig.CONFIG_GROUP)\npublic interface ProjectileOverrideConfig extends Config\n{\n\tpublic static final String CONFIG_GROUP \u003d \"projectileoverride\";\n\n    @ConfigItem(\n        keyName \u003d \"akkha\",\n        name \u003d \"Akkha\",\n        description \u003d \"Projectile override for Akkha\"\n    )\n    default BossProjectiles Akkha() {\n        return BossProjectiles.DEFAULT;\n    }\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"cerberus\",\n\t\tname \u003d \"Cerberus\",\n\t\tdescription \u003d \"Projectile override for Cerberus\"\n\t)\n\tdefault BossProjectiles Cerberus() {\n\t\treturn BossProjectiles.DEFAULT;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"dks\",\n\t\tname \u003d \"DKS\",\n\t\tdescription \u003d \"Projectile override for the Dagganoth Kings\"\n\t)\n\tdefault BossProjectiles DagganothKings() {\n\t\treturn BossProjectiles.DEFAULT;\n\t}\n\n    @ConfigItem(\n        keyName \u003d \"demonic-gorilla\",\n        name \u003d \"Demonic Gorilla\",\n        description \u003d \"Projectile override for demonic gorillas\"\n    )\n    default BossProjectiles DemonicGorillas()\n    {\n        return BossProjectiles.DEFAULT;\n    }\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"dom\",\n\t\tname \u003d \"Doom\",\n\t\tdescription \u003d \"Projectile override for Doom of Mokhaiotl\"\n\t)\n\tdefault BossProjectiles DoomOfMokhaiotl()\n\t{\n\t\treturn BossProjectiles.DEFAULT;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"dom-rocks\",\n\t\tname \u003d \"Doom rocks\",\n\t\tdescription \u003d \"Projectile override for Doom of Mokhaiotl rocks\"\n\t)\n\tdefault BossProjectiles DoomOfMokhaiotlRocks()\n\t{\n\t\treturn BossProjectiles.DEFAULT;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"hueycoatl\",\n\t\tname \u003d \"Hueycoatl\",\n\t\tdescription \u003d \"Projectile override for Hueycoatl\"\n\t)\n\tdefault BossProjectiles Hueycoatl() {\n\t\treturn BossProjectiles.DEFAULT;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"hunllefnormal\",\n\t\tname \u003d \"Hunllef\",\n\t\tdescription \u003d \"Projectile override for normal Hunllef\"\n\t)\n\tdefault BossProjectiles HunllefNormal() {\n\t\treturn BossProjectiles.DEFAULT;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"hunllefcorrupted\",\n\t\tname \u003d \"Hunllef (Corrupted)\",\n\t\tdescription \u003d \"Projectile override for corrupted Hunllef\"\n\t)\n\tdefault BossProjectiles HunllefCorrupted() {\n\t\treturn BossProjectiles.DEFAULT;\n\t}\n\n    @ConfigItem(\n            keyName \u003d \"hdyra\",\n            name \u003d \"Hydra\",\n            description \u003d \"Projectile override for Alchemical Hydra and smaller hydras\"\n    )\n    default BossProjectiles AlchemicalHydra() {\n        return BossProjectiles.DEFAULT;\n    }\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"inferno\",\n\t\tname \u003d \"Inferno\",\n\t\tdescription \u003d \"Projectile override for the blobs in the Inferno\"\n\t)\n\tdefault BossProjectiles Inferno() {\n\t\treturn BossProjectiles.DEFAULT;\n\t}\n\n    @ConfigItem(\n        keyName \u003d \"kalphite-queen\",\n        name \u003d \"Kalphite Queen\",\n        description \u003d \"Projectile override for the Kalphite Queen\"\n    )\n    default BossProjectiles KalphiteQueen() {\n        return BossProjectiles.DEFAULT;\n    }\n\n    @ConfigItem(\n        keyName \u003d \"kree-arra\",\n        name \u003d \"Kree Arra\",\n        description \u003d \"Projectile override for Kree Arra\"\n    )\n    default BossProjectiles KreeArra() {\n        return BossProjectiles.DEFAULT;\n    }\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"leviathan\",\n\t\tname \u003d \"Leviathan\",\n\t\tdescription \u003d \"Projectile override for Leviathan\"\n\t)\n\tdefault BossProjectiles Leviathan() {\n\t\treturn BossProjectiles.DEFAULT;\n\t}\n\n    @ConfigItem(\n        keyName \u003d \"manticore\",\n        name \u003d \"Manticore\",\n        description \u003d \"Projectile override for Manticores within the Fortis Colosseum\"\n    )\n    default BossProjectiles Manticore() {\n        return BossProjectiles.DEFAULT;\n    }\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"olm\",\n\t\tname \u003d \"Olm\",\n\t\tdescription \u003d \"Projectile override for Olm in the Chambers of Xeric\"\n\t)\n\tdefault BossProjectiles Olm() {\n\t\treturn BossProjectiles.DEFAULT;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"scurrius\",\n\t\tname \u003d \"Scurrius\",\n\t\tdescription \u003d \"Projectile override for Scurrius\"\n\t)\n\tdefault BossProjectiles Scurrius() {\n\t\treturn BossProjectiles.DEFAULT;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"sotetseg\",\n\t\tname \u003d \"Sotetseg\",\n\t\tdescription \u003d \"Projectile override for Sotetseg in the Theatre of Blood\"\n\t)\n\tdefault BossProjectiles Sotetseg() {\n\t\treturn BossProjectiles.DEFAULT;\n\t}\n\n\t@ConfigItem(\n        keyName \u003d \"tormented-demon\",\n        name \u003d \"Tormented Demon\",\n        description \u003d \"Projectile override for Tormented Demons within the Ancient Guthixian Temple\"\n    )\n    default BossProjectiles TormentedDemon() {\n        return BossProjectiles.DEFAULT;\n    }\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"vardorvis\",\n\t\tname \u003d \"Vardorvis\",\n\t\tdescription \u003d \"Projectile override for Vardorvis\"\n\t)\n\tdefault BossProjectiles Vardorvis() {\n\t\treturn BossProjectiles.DEFAULT;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"wardens\",\n\t\tname \u003d \"Wardens\",\n\t\tdescription \u003d \"Projectile override for Wardens in the Tombs of Amascut\"\n\t)\n\tdefault BossProjectiles Wardens() {\n\t\treturn BossProjectiles.DEFAULT;\n\t}\n\n    @ConfigItem(\n        keyName \u003d \"wardens-divine\",\n        name \u003d \"Wardens divine\",\n        description \u003d \"Projectile override for the divine projectiles of the Wardens in the Tombs of Amascut\"\n    )\n    default BossProjectiles WardensDivine() {\n        return BossProjectiles.DEFAULT;\n    }\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"whisperer\",\n\t\tname \u003d \"Whisperer\",\n\t\tdescription \u003d \"Projectile override for the Whisperer\"\n\t)\n\tdefault BossProjectiles Whisperer() {\n\t\treturn BossProjectiles.DEFAULT;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"zebak\",\n\t\tname \u003d \"Zebak\",\n\t\tdescription \u003d \"Projectile override for regular Zebak attacks\"\n\t)\n\tdefault BossProjectiles Zebak()\n\t{\n\t\treturn BossProjectiles.DEFAULT;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"zebak-rocks\",\n\t\tname \u003d \"Zebak rocks\",\n\t\tdescription \u003d \"Projectile override for the rocks and jugs attacks of Zebak\"\n\t)\n\tdefault BossProjectiles ZebakRocks()\n\t{\n\t\treturn BossProjectiles.DEFAULT;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"zulrah\",\n\t\tname \u003d \"Zulrah\",\n\t\tdescription \u003d \"Projectile override for Zulrah\"\n\t)\n\tdefault BossProjectiles Zulrah() {\n\t\treturn BossProjectiles.DEFAULT;\n\t}\n}\n","filePath":"src\\main\\java\\com\\projectileoverride\\ProjectileOverrideConfig.java"},{"fileName":"ProjectileOverridePlugin.java","content":"package com.projectileoverride;\n\nimport com.google.inject.Provides;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Projectile;\nimport net.runelite.api.events.ProjectileMoved;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Projectile Override\"\n)\npublic class ProjectileOverridePlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ProjectileOverrideConfig config;\n\n\tprivate final HashMap\u003cInteger, ProjectileOverride\u003e overrideMap \u003d new HashMap\u003c\u003e();\n\n\tprivate final HashSet\u003cProjectile\u003e overriddenProjectiles \u003d new HashSet\u003c\u003e();\n\n\t@Provides\n\tProjectileOverrideConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(ProjectileOverrideConfig.class);\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception {\n\t\tcreateOverrideMap();\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception {\n\t\toverriddenProjectiles.clear();\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event) {\n\t\tif(!ProjectileOverrideConfig.CONFIG_GROUP.equals(event.getGroup())) {\n\t\t\treturn;\n\t\t}\n\n\t\tcreateOverrideMap();\n\t}\n\n\t@Subscribe\n\tpublic void onProjectileMoved(ProjectileMoved projectileMoved)\n\t{\n\t\tProjectile projectile \u003d projectileMoved.getProjectile();\n\n\t\t// Prevent overriding projectiles that have already been overridden. This can happen if a player has configured\n\t\t// Boss A -\u003e Boss B, Boss B -\u003e Boss C. This will result in Boss A -\u003e Boss C (instead of Boss B). Let\u0027s not talk\n\t\t// about what happens when you configure Boss A -\u003e Boss B and Boss B -\u003e Boss A.\n\t\tif (overriddenProjectiles.contains(projectile)) {\n\t\t\treturn;\n\t\t}\n\n\t\tProjectileOverride override \u003d overrideMap.getOrDefault(projectile.getId(), null);\n\n\t\tif (override !\u003d null \u0026\u0026 override.canOverride(projectile)) {\n\t\t\toverriddenProjectiles.removeIf(p -\u003e p.getRemainingCycles() \u003c 0);\n\t\t\toverriddenProjectiles.add(replaceProjectile(projectile, override));\n\t\t}\n\t}\n\n\tprivate Projectile replaceProjectile(Projectile projectile, ProjectileOverride override)\n\t{\n\t\tProjectile overrideProjectile \u003d client.createProjectile(\n\t\t\toverride.getOverrideProjectileId(),\n\t\t\tprojectile.getSourcePoint(),\n\t\t\tprojectile.getStartHeight(), projectile.getSourceActor(),\n\t\t\tprojectile.getTargetPoint(),\n\t\t\tprojectile.getEndHeight(), projectile.getTargetActor(),\n\t\t\tprojectile.getStartCycle(), projectile.getEndCycle(),\n\t\t\tprojectile.getSlope(), projectile.getStartPos());\n\n\t\tclient.getProjectiles().addLast(overrideProjectile);\n\n\t\tlog.debug(\"Overriding projectile {} with {}\", projectile.getId(), override.getOverrideProjectileId());\n\n\t\t// Hide the original projectile.\n\t\tprojectile.setEndCycle(0);\n\n\t\treturn overrideProjectile;\n\t}\n\n\tprivate void createOverrideMap() {\n\t\toverrideMap.clear();\n        hydrateOverrideMap(BossProjectiles.AKKHA, config.Akkha());\n\t\thydrateOverrideMap(BossProjectiles.CERBERUS, config.Cerberus());\n\t\thydrateOverrideMap(BossProjectiles.DAGGANOTH_KINGS, config.DagganothKings());\n        hydrateOverrideMap(BossProjectiles.DEMONIC_GORILLA, config.DemonicGorillas());\n\t\thydrateOverrideMap(BossProjectiles.DOOM_OF_MOKHAIOTL, config.DoomOfMokhaiotl());\n\t\thydrateOverrideMap(BossProjectiles.DOOM_OF_MOKHAIOTL_ROCKS, config.DoomOfMokhaiotlRocks());\n\t\thydrateOverrideMap(BossProjectiles.HUEYCOATL, config.Hueycoatl());\n\t\thydrateOverrideMap(BossProjectiles.HUNLLEF_NORMAL, config.HunllefNormal());\n\t\thydrateOverrideMap(BossProjectiles.HUNLLEF_CORRUPTED, config.HunllefCorrupted());\n        hydrateOverrideMap(BossProjectiles.HYDRA, config.AlchemicalHydra());\n\t\thydrateOverrideMap(BossProjectiles.INFERNO, config.Inferno());\n        hydrateOverrideMap(BossProjectiles.KALPHITE_QUEEN, config.KalphiteQueen());\n        hydrateOverrideMap(BossProjectiles.KREE_ARRA, config.KreeArra());\n\t\thydrateOverrideMap(BossProjectiles.LEVIATHAN, config.Leviathan());\n        hydrateOverrideMap(BossProjectiles.MANTICORE, config.Manticore());\n\t\thydrateOverrideMap(BossProjectiles.OLM, config.Olm());\n\t\thydrateOverrideMap(BossProjectiles.SCURRIUS, config.Scurrius());\n\t\thydrateOverrideMap(BossProjectiles.SOTETSEG, config.Sotetseg());\n\t\thydrateOverrideMap(BossProjectiles.TORMENTED_DEMON, config.TormentedDemon());\n\t\thydrateOverrideMap(BossProjectiles.VARDORVIS, config.Vardorvis());\n\t\thydrateOverrideMap(BossProjectiles.WARDENS, config.Wardens());\n        hydrateOverrideMap(BossProjectiles.WARDENS_DIVINE, config.WardensDivine());\n\t\thydrateOverrideMap(BossProjectiles.WHISPERER, config.Whisperer());\n\t\thydrateOverrideMap(BossProjectiles.ZEBAK, config.Zebak());\n\t\thydrateOverrideMap(BossProjectiles.ZEBAK_ROCKS, config.ZebakRocks());\n\t\thydrateOverrideMap(BossProjectiles.ZULRAH, config.Zulrah());\n\t}\n\n\tprivate void hydrateOverrideMap(BossProjectiles source, BossProjectiles override) {\n        var overrides \u003d source.createOverride(override);\n\n        for(var createdOverride: overrides) {\n            overrideMap.put(createdOverride.getSourceProjectileId(), createdOverride);\n        }\n\t}\n}\n","filePath":"src\\main\\java\\com\\projectileoverride\\ProjectileOverridePlugin.java"},{"fileName":"ProjectileOverridePluginTest.java","content":"package com.projectileoverride;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ProjectileOverridePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(ProjectileOverridePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\projectileoverride\\ProjectileOverridePluginTest.java"}]},{"commit":"b0afe7783c844df1a9da0fafbb1cf3164b73af75","repository":"https://github.com/Enriath/external-plugins.git","internalName":"transmog","files":[{"fileName":"BodyKit.java","content":"/*\n * Copyright (c) 2023, Enriath \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog;\n\npublic enum BodyKit\n{\n\tMASC,\n\tFEMME\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\BodyKit.java"},{"fileName":"PresetParser.java","content":"/*\n * Copyright (c) 2021, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.config;\n\nimport lombok.Getter;\nimport java.util.List;\n\npublic abstract class PresetParser\n{\n\t@Getter\n\tprotected String name \u003d \"\";\n\n\t@Getter\n\tprotected int icon \u003d -1;\n\n\t@Getter\n\tprotected List\u003cString\u003e slotValues;\n\n\tpublic abstract void parse(String configData);\n\n\tpublic abstract void migrate(PresetParser other);\n\n\tpublic void clear()\n\t{\n\t\tthis.name \u003d \"\";\n\t\tthis.icon \u003d -1;\n\t\tthis.slotValues \u003d null;\n\t}\n\n\tpublic static PresetParser getLatest()\n\t{\n\t\treturn new V2Parser();\n\t}\n\n\tpublic static PresetParser getParser(String configData)\n\t{\n\t\tString flag \u003d configData.substring(0, 1);\n\t\tswitch (flag)\n\t\t{\n\t\t\tcase V2Parser.VERSION_FLAG:\n\t\t\t\treturn new V2Parser();\n\t\t\tdefault:\n\t\t\t\treturn new V1Parser();\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\config\\PresetParser.java"},{"fileName":"TransmogrificationConfigManager.java","content":"/*\n * Copyright (c) 2020, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.config;\n\nimport com.google.inject.Inject;\nimport com.google.inject.Singleton;\nimport io.hydrox.transmog.TransmogPreset;\nimport net.runelite.client.config.ConfigManager;\nimport java.util.Arrays;\nimport java.util.Optional;\nimport java.util.stream.Collectors;\n\n// Don\u0027t you just hate it when the config becomes null when it has only hidden configs?\n@Singleton\npublic class TransmogrificationConfigManager\n{\n\tprivate static final String CONFIG_GROUP \u003d \"transmog\";\n\tprivate static final String CONFIG_DEFAULT \u003d \"default\";\n\tprivate static final String CONFIG_OVERRIDE \u003d \"override\";\n\tprivate static final String CONFIG_PRESET \u003d \"preset_\";\n\tprivate static final String CONFIG_LAST_PRESET_IDX \u003d \"lastIndex\";\n\tprivate static final String CONFIG_TRANSMOG_ACTIVE \u003d \"transmogActive\";\n\tprivate static final String CONFIG_CURRENT_PRESET \u003d \"currentPreset\";\n\tprivate static final String CONFIG_TRANSMIT_TO_PARTY \u003d \"transmitToParty\";\n\n\tprivate final ConfigManager configManager;\n\n\t@Inject\n\tTransmogrificationConfigManager(ConfigManager configManager)\n\t{\n\t\tthis.configManager \u003d configManager;\n\t}\n\n\tpublic boolean transmogActive()\n\t{\n\t\treturn Optional.ofNullable((Boolean)configManager.getRSProfileConfiguration(CONFIG_GROUP, CONFIG_TRANSMOG_ACTIVE, Boolean.class)).orElse(false);\n\t}\n\n\tpublic void transmogActive(boolean value)\n\t{\n\t\tconfigManager.setRSProfileConfiguration(CONFIG_GROUP, CONFIG_TRANSMOG_ACTIVE, value);\n\t}\n\n\tpublic boolean transmitToParty()\n\t{\n\t\treturn Optional.ofNullable((Boolean)configManager.getRSProfileConfiguration(CONFIG_GROUP, CONFIG_TRANSMIT_TO_PARTY, Boolean.class)).orElse(false);\n\t}\n\n\tpublic void transmitToParty(boolean value)\n\t{\n\t\tconfigManager.setRSProfileConfiguration(CONFIG_GROUP, CONFIG_TRANSMIT_TO_PARTY, value);\n\t}\n\n\tpublic int currentPreset()\n\t{\n\t\treturn Optional.ofNullable((Integer)configManager.getRSProfileConfiguration(CONFIG_GROUP, CONFIG_CURRENT_PRESET, Integer.class)).orElse(lastIndex());\n\t}\n\n\tpublic void currentPreset(int value)\n\t{\n\t\tconfigManager.setRSProfileConfiguration(CONFIG_GROUP, CONFIG_CURRENT_PRESET, value);\n\t}\n\n\t/**\n\t * Gets the last index to be used by a preset.\n\t */\n\tpublic int lastIndex()\n\t{\n\t\treturn Optional.ofNullable((Integer)configManager.getRSProfileConfiguration(CONFIG_GROUP, CONFIG_LAST_PRESET_IDX, Integer.class)).orElse(0);\n\t}\n\n\t/**\n\t * Sets the last index to be used by a preset.\n\t */\n\tpublic void lastIndex(int value)\n\t{\n\t\tconfigManager.setRSProfileConfiguration(CONFIG_GROUP, CONFIG_LAST_PRESET_IDX, value);\n\t}\n\n\tpublic String getPresetData(int index)\n\t{\n\t\treturn configManager.getRSProfileConfiguration(CONFIG_GROUP, CONFIG_OVERRIDE + \".\" + CONFIG_PRESET + index);\n\t}\n\n\tpublic void savePreset(TransmogPreset preset)\n\t{\n\t\tString key \u003d CONFIG_OVERRIDE + \".\" + CONFIG_PRESET + preset.getId();\n\t\tString value \u003d preset.toConfig();\n\t\tif (value !\u003d null)\n\t\t{\n\t\t\tconfigManager.setRSProfileConfiguration(CONFIG_GROUP, key, value);\n\t\t}\n\t}\n\n\tpublic void savePreset(int presetID, TransmogPreset preset)\n\t{\n\t\tString key \u003d CONFIG_OVERRIDE + \".\" + CONFIG_PRESET + presetID;\n\t\tif (preset !\u003d null)\n\t\t{\n\t\t\tString value \u003d preset.toConfig();\n\t\t\tif (value !\u003d null)\n\t\t\t{\n\t\t\t\tconfigManager.setRSProfileConfiguration(CONFIG_GROUP, key, value);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tconfigManager.unsetRSProfileConfiguration(CONFIG_GROUP, key);\n\t}\n\n\tpublic String getDefaultStateData()\n\t{\n\t\treturn configManager.getRSProfileConfiguration(CONFIG_GROUP, CONFIG_DEFAULT);\n\t}\n\n\tpublic void saveDefaultState(int[] state)\n\t{\n\t\tconfigManager.setRSProfileConfiguration(CONFIG_GROUP, CONFIG_DEFAULT, Arrays.stream(state)\n\t\t\t.mapToObj(String::valueOf)\n\t\t\t.collect(Collectors.joining(\",\"))\n\t\t);\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\config\\TransmogrificationConfigManager.java"},{"fileName":"V1Parser.java","content":"/*\n * Copyright (c) 2021, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.config;\n\nimport net.runelite.client.util.Text;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\npublic class V1Parser extends PresetParser\n{\n\tprivate static final Pattern PARSER \u003d Pattern.compile(\"^((?:null|-1|\\\\d+|,)+)$\");\n\n\tpublic void parse(String configData)\n\t{\n\t\tMatcher m \u003d PARSER.matcher(configData);\n\t\tif (!m.matches())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tslotValues \u003d Text.fromCSV(m.group(1));\n\t}\n\n\tpublic void migrate(PresetParser other)\n\t{\n\t\tslotValues \u003d other.getSlotValues();\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\config\\V1Parser.java"},{"fileName":"V2Parser.java","content":"/*\n * Copyright (c) 2021, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.config;\n\nimport net.runelite.client.util.Text;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\npublic class V2Parser extends PresetParser\n{\n\tpublic static final String VERSION_FLAG \u003d \"\\\"\";\n\tprivate static final Pattern PARSER \u003d Pattern.compile(\"^\\\"(-1|\\\\d+),([\\\\w ]*),((?:null|-1|\\\\d+|,)+)$\");\n\n\tpublic void parse(String configData)\n\t{\n\t\tif (!VERSION_FLAG.equals(configData.substring(0, 1)))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tMatcher m \u003d PARSER.matcher(configData);\n\t\tif (!m.matches())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\ticon \u003d Integer.parseInt(m.group(1));\n\t\tname \u003d m.group(2);\n\t\tslotValues \u003d Text.fromCSV(m.group(3));\n\t}\n\n\tpublic void migrate(PresetParser other)\n\t{\n\t\ticon \u003d other.getIcon();\n\t\tname \u003d other.getName();\n\t\tslotValues \u003d other.getSlotValues();\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\config\\V2Parser.java"},{"fileName":"FacialHairMapping.java","content":"/*\n * Copyright (c) 2020, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport java.util.HashMap;\nimport java.util.Map;\n\n@Getter\n@RequiredArgsConstructor\npublic enum FacialHairMapping implements Mapping\n{\n\tEMPTY(\"Empty\", -1, -1),\n\n\tNONE(\"None\", 47825, 270),\n\tGOATEE(\"Goatee\", 47814, 266),\n\tLONG(\"Long\", 47837, 267),\n\tMEDIUM(\"Medium\", 47820, 268),\n\tMOUSTACHE(\"Moustache\", 47787, 269),\n\tSHORT(\"Short\", 47767, 271),\n\tPOINTY(\"Pointy\", 47784, 272),\n\tSPLIT(\"Split\", 47840, 273),\n\tHANDLEBAR(\"Handlebar\", 47830, 367),\n\tMUTTON(\"Mutton\", 47797, 368),\n\tFULL_MUTTON(\"Full Mutton\", 47783, 369),\n\tBIG_MOUSTACHE(\"Big Moustache\", 47770, 370),\n\tWAXED_MOUSTACHE(\"Waxed Moustache\", 47795, 371),\n\tDALI(\"Dali\", 47789, 372),\n\tVIZIER(\"Vizier\", 47826, 373);\n\n\tprivate final String name;\n\tprivate final int modelID;\n\tprivate final int kitID;\n\n\tprivate static final Map\u003cInteger, FacialHairMapping\u003e FROM_KIT \u003d new HashMap\u003c\u003e();\n\tprivate static final Map\u003cInteger, FacialHairMapping\u003e FROM_MODEL \u003d new HashMap\u003c\u003e();\n\n\tstatic\n\t{\n\t\tfor (FacialHairMapping mapping : values())\n\t\t{\n\t\t\tFROM_KIT.put(mapping.kitID, mapping);\n\t\t\tFROM_MODEL.put(mapping.modelID, mapping);\n\t\t}\n\t}\n\n\tpublic static FacialHairMapping fromKitID(int kitID)\n\t{\n\t\treturn FROM_KIT.get(kitID);\n\t}\n\n\tpublic static FacialHairMapping fromModelID(int modelID)\n\t{\n\t\treturn FROM_MODEL.get(modelID);\n\t}\n\n\t@Override\n\tpublic String prettyName()\n\t{\n\t\treturn name;\n\t}\n\n\t@Override\n\tpublic BodyKit bodyKit()\n\t{\n\t\treturn BodyKit.MASC;\n\t}\n\n\t@Override\n\tpublic int modelId()\n\t{\n\t\treturn modelID;\n\t}\n\n\t@Override\n\tpublic int kitId()\n\t{\n\t\treturn kitID;\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\FacialHairMapping.java"},{"fileName":"HairMapping.java","content":"/*\n * Copyright (c) 2020, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport java.util.HashMap;\nimport java.util.Map;\n\n@Getter\n@RequiredArgsConstructor\npublic enum HairMapping implements Mapping\n{\n\tEMPTY(\"Empty\", null, -1, -1),\n\n\tBALD_F(\"Bald\", BodyKit.FEMME, 47775, 301),\n\tBUN_F(\"Bun\", BodyKit.FEMME, 47799, 302),\n\tDREADLOCKS_F(\"Dreadlocks\", BodyKit.FEMME, 47812, 303),\n\tLONG_F(\"Long\", BodyKit.FEMME, 47839, 304),\n\tMEDIUM_F(\"Medium\", BodyKit.FEMME, 47819, 305),\n\tPIGTAILS_F(\"Pigtails\", BodyKit.FEMME, 47791, 306),\n\tSHORT_F(\"Short\", BodyKit.FEMME, 47816, 307),\n\tCROPPED_F(\"Cropped\", BodyKit.FEMME, 47829, 308),\n\tWILD_SPIKES_F(\"Wild spikes\", BodyKit.FEMME, 47773, 309),\n\tSPIKY_F(\"Spikes\", BodyKit.FEMME, 47827, 310),\n\tEARMUFFS_F(\"Earmuffs\", BodyKit.FEMME, 47772, 311),\n\tSIDE_PONY_F(\"Side pony\", BodyKit.FEMME, 47798, 374),\n\tCURLS_F(\"Curls\", BodyKit.FEMME, 47785, 375),\n\tWIND_BRAIDS_F(\"Wind braids\", BodyKit.FEMME, 47786, 376),\n\tPONYTAIL_F(\"Ponytail\", BodyKit.FEMME, 47823, 377),\n\tBRAIDS_F(\"Braids\", BodyKit.FEMME, 47811, 378),\n\tBUNCHES_F(\"Bunches\", BodyKit.FEMME, 47818, 379),\n\tBOB_F(\"Bob\", BodyKit.FEMME, 47822, 380),\n\tLAYERED_F(\"Layered\", BodyKit.FEMME, 47807, 381),\n\tSTRAIGHT_F(\"Straight\", BodyKit.FEMME, 47833, 382),\n\tSTRAIGHT_BRAIDS_F(\"Straight Braids\", BodyKit.FEMME, 47810, 383),\n\tCURTAINS_F(\"Curtains\", BodyKit.FEMME, 47793, 384),\n\tFRONT_SPLIT_F(\"Front split\", BodyKit.FEMME, 47815, 408),\n\tTWO_BACK_F(\"Two-back\", BodyKit.FEMME, 47832, 399),\n\tTONSURE_F(\"Tonsure\", BodyKit.FEMME, 47828, 430),\n\tMOHAWK_F(\"Mohawk\", BodyKit.FEMME, 47776, 431),\n\tQUIFF_F(\"Quiff\", BodyKit.FEMME, 47813, 432),\n\tSAMURAI_F(\"Samurai\", BodyKit.FEMME, 47781, 433),\n\tPRINCELY_F(\"Princely\", BodyKit.FEMME, 47788, 434),\n\tLONG_CURTAINS_F(\"Long curtains\", BodyKit.FEMME, 47834, 435),\n\tTOUSLED_F(\"Tousled\", BodyKit.FEMME, 47802, 436),\n\tSIDE_WEDGE_F(\"Side wedge\", BodyKit.FEMME, 47777, 437),\n\tFRONT_WEDGE_F(\"Front wedge\", BodyKit.FEMME, 47838, 438),\n\tFRONT_SPIKES_F(\"Front spikes\", BodyKit.FEMME, 47805, 439),\n\tFROHAWK_F(\"Frohawk\", BodyKit.FEMME, 47804, 440),\n\tREAR_SKIRT_F(\"Rear skirt\", BodyKit.FEMME, 47794, 441),\n\tQUEUE_F(\"Queue\", BodyKit.FEMME, 47800, 442),\n\tMULLET_F(\"Mullet\", BodyKit.FEMME, 47831, 410),\n\tUNDERCUT_F(\"Undercut\", BodyKit.FEMME, 47817, 411),\n\tLOW_BUN_F(\"Low Bun\", BodyKit.FEMME, 47779, 425),\n\tMESSY_BUN_F(\"Messy Bun\", BodyKit.FEMME, 47835, 426),\n\tPOMPADOUR_F(\"Pompadour\", BodyKit.FEMME, 47801, 412),\n\tAFRO_F(\"Afro\", BodyKit.FEMME, 47792, 413),\n\tSHORT_LOCS_F(\"Short locs\", BodyKit.FEMME, 47771, 414),\n\tSPIKY_MOHAWK_F(\"Spiky Mohawk\", BodyKit.FEMME, 47836, 415),\n\tSLICKED_MOHAWK_F(\"Slicked Mohawk\", BodyKit.FEMME, 47806, 416),\n\tLONG_QUIFF_F(\"Long Quiff\", BodyKit.FEMME, 47782, 417),\n\tSHORT_CHOPPY_F(\"Short Choppy\", BodyKit.FEMME, 47809, 418),\n\tSIDE_AFRO_F(\"Side Afro\", BodyKit.FEMME, 47790, 419),\n\tPUNK_F(\"Punk\", BodyKit.FEMME, 47803, 420),\n\tHALF_SHAVED_F(\"Half-shaved\", BodyKit.FEMME, 47824, 421),\n\tFREMENNIK_F(\"Fremennik\", BodyKit.FEMME, 47796, 422),\n\tELVEN_F(\"Elven\", BodyKit.FEMME, 47768, 423),\n\tMEDIUM_COILS_F(\"Medium Coils\", BodyKit.FEMME, 47780, 424),\n\tHIGH_PONYTAIL_F(\"High ponytail\", BodyKit.FEMME, 47778, 427),\n\tPLAITS_F(\"Plaits\", BodyKit.FEMME, 47821, 428),\n\tHIGH_BUNCHES_F(\"High Bunches\", BodyKit.FEMME, 47774, 429),\n\n\tBALD_M(\"Bald\", BodyKit.MASC, 47775, 256),\n\tDREADLOCKS_M(\"Dreadlocks\", BodyKit.MASC, 47812, 257),\n\tLONG_M(\"Long\", BodyKit.MASC, 47839, 258),\n\tMEDIUM_M(\"Medium\", BodyKit.MASC, 47819, 259),\n\tTONSURE_M(\"Tonsure\", BodyKit.MASC, 47828, 260),\n\tSHORT_M(\"Short\", BodyKit.MASC, 47816, 261),\n\tCROPPED_M(\"Cropped\", BodyKit.MASC, 47829, 262),\n\tWILD_SPIKES_M(\"Wild spikes\", BodyKit.MASC, 47773, 263),\n\tSPIKES_M(\"Spikes\", BodyKit.MASC, 47827, 264),\n\tMOHAWK_M(\"Mohawk\", BodyKit.MASC, 47776, 265),\n\tWIND_BRAIDS_M(\"Wind braids\", BodyKit.MASC, 47786, 385),\n\tQUIFF_M(\"Quiff\", BodyKit.MASC, 47813, 386),\n\tSAMURAI_M(\"Samurai\", BodyKit.MASC, 47781, 387),\n\tPRINCELY_M(\"Princely\", BodyKit.MASC, 47788, 388),\n\tCURTAINS_M(\"Curtains\", BodyKit.MASC, 47793, 389),\n\tLONG_CURTAINS_M(\"Long curtains\", BodyKit.MASC, 47834, 390),\n\tFRONT_SPLIT_M(\"Front split\", BodyKit.MASC, 47815, 407),\n\tTOUSLED_M(\"Tousled\", BodyKit.MASC, 47802, 400),\n\tSIDE_WEDGE_M(\"Side wedge\", BodyKit.MASC, 47777, 401),\n\tFRONT_WEDGE_M(\"Front wedge\", BodyKit.MASC, 47838, 402),\n\tFRONT_SPIKES_M(\"Front spikes\", BodyKit.MASC, 47805, 403),\n\tFROHAWK_M(\"Frohawk\", BodyKit.MASC, 47804, 404),\n\tREAR_SKIRT_M(\"Rear skirt\", BodyKit.MASC, 47794, 405),\n\tQUEUE_M(\"Queue\", BodyKit.MASC, 47800, 406),\n\tBUN_M(\"Bun\", BodyKit.MASC, 47799, 477),\n\tPIGTAILS_M(\"Pigtails\", BodyKit.MASC, 47791, 478),\n\tEARMUFFS_M(\"Earmuffs\", BodyKit.MASC, 47772, 479),\n\tSIDE_PONY_M(\"Side pony\", BodyKit.MASC, 47798, 480),\n\tCURLS_M(\"Curls\", BodyKit.MASC, 47785, 481),\n\tPONYTAIL_M(\"Ponytail\", BodyKit.MASC, 47823, 482),\n\tBRAIDS_M(\"Braids\", BodyKit.MASC, 47811, 483),\n\tBUNCHES_M(\"Bunches\", BodyKit.MASC, 47818, 484),\n\tBOB_M(\"Bob\", BodyKit.MASC, 47822, 485),\n\tLAYERED_M(\"Layered\", BodyKit.MASC, 47807, 486),\n\tSTRAIGHT_M(\"Straight\", BodyKit.MASC, 47833, 487),\n\tSTRAIGHT_BRAIDS_M(\"Straight Braids\", BodyKit.MASC, 47810, 488),\n\tTWO_BACK_M(\"Two-back\", BodyKit.MASC, 47832, 489),\n\tMULLET_M(\"Mullet\", BodyKit.MASC, 47831, 457),\n\tUNDERCUT_M(\"Undercut\", BodyKit.MASC, 47817, 458),\n\tLOW_BUN_M(\"Low Bun\", BodyKit.MASC, 47779, 472),\n\tMESSY_BUN_M(\"Messy Bun\", BodyKit.MASC, 47835, 473),\n\tPOMPADOUR_M(\"Pompadour\", BodyKit.MASC, 47801, 459),\n\tAFRO_M(\"Afro\", BodyKit.MASC, 47792, 460),\n\tSHORT_LOCS_M(\"Short locs\", BodyKit.MASC, 47771, 461),\n\tSPIKY_MOHAWK_M(\"Spiky Mohawk\", BodyKit.MASC, 47836, 462),\n\tSLICKED_MOHAWK_M(\"Slicked Mohawk\", BodyKit.MASC, 47806, 463),\n\tLONG_QUIFF_M(\"Long Quiff\", BodyKit.MASC, 47782, 464),\n\tSHORT_CHOPPY_M(\"Short Choppy\", BodyKit.MASC, 47809, 465),\n\tSIDE_AFRO_M(\"Side Afro\", BodyKit.MASC, 47790, 466),\n\tPUNK_M(\"Punk\", BodyKit.MASC, 47803, 467),\n\tHALF_SHAVED_M(\"Half-shaved\", BodyKit.MASC, 47824, 468),\n\tFREMENNIK_M(\"Fremennik\", BodyKit.MASC, 47796, 469),\n\tELVEN_M(\"Elven\", BodyKit.MASC, 47768, 470),\n\tMEDIUM_COILS_M(\"Medium Coils\", BodyKit.MASC, 47780, 471),\n\tHIGH_PONYTAIL_M(\"High ponytail\", BodyKit.MASC, 47778, 474),\n\tPLAITS_M(\"Plaits\", BodyKit.MASC, 47821, 475),\n\tHIGH_BUNCHES_M(\"High Bunches\", BodyKit.MASC, 47774, 476);\n\n\n\tprivate final String name;\n\tprivate final BodyKit bodyKit;\n\tprivate final int modelID;\n\tprivate final int kitID;\n\n\tprivate static final Map\u003cInteger, HairMapping\u003e FROM_KIT \u003d new HashMap\u003c\u003e();\n\tprivate static final Map\u003cInteger, HairMapping\u003e FROM_MODEL \u003d new HashMap\u003c\u003e();\n\n\tstatic\n\t{\n\t\tfor (HairMapping mapping : values())\n\t\t{\n\t\t\tFROM_KIT.put(mapping.kitID, mapping);\n\t\t\tFROM_MODEL.put(mapping.modelID, mapping);\n\t\t}\n\t}\n\n\tpublic static HairMapping fromKitID(int kitID)\n\t{\n\t\treturn FROM_KIT.get(kitID);\n\t}\n\n\tpublic static HairMapping fromModelID(int modelID)\n\t{\n\t\treturn FROM_MODEL.get(modelID);\n\t}\n\n\t@Override\n\tpublic String prettyName()\n\t{\n\t\treturn name;\n\t}\n\n\t@Override\n\tpublic BodyKit bodyKit()\n\t{\n\t\treturn bodyKit;\n\t}\n\n\t@Override\n\tpublic int modelId()\n\t{\n\t\treturn modelID;\n\t}\n\n\t@Override\n\tpublic int kitId()\n\t{\n\t\treturn kitID;\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\HairMapping.java"},{"fileName":"Mapping.java","content":"/*\n * Copyright (c) 2020, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog;\n\npublic interface Mapping\n{\n\tString prettyName();\n\tBodyKit bodyKit();\n\tint modelId();\n\tint kitId();\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\Mapping.java"},{"fileName":"MappingMapping.java","content":"/*\n * Copyright (c) 2020, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.function.Function;\n\n// Yo dawg\n@Getter\n@RequiredArgsConstructor\npublic enum MappingMapping\n{\n\tHAIR(\n\t\tTransmogSlot.HAIR,\n\t\tHairMapping.class,\n\t\tHairMapping::fromKitID,\n\t\tHairMapping::fromModelID,\n\t\t600,\n\t\t10\n\t),\n\tJAW(\n\t\tTransmogSlot.JAW,\n\t\tFacialHairMapping.class,\n\t\tFacialHairMapping::fromKitID,\n\t\tFacialHairMapping::fromModelID,\n\t\t600,\n\t\t10\n\t),\n\tSLEEVES(\n\t\tTransmogSlot.SLEEVES,\n\t\tSleeveMapping.class,\n\t\tSleeveMapping::fromKitID,\n\t\tSleeveMapping::fromModelID,\n\t\t1200,\n\t\t55\n\t);\n\n\tprivate final TransmogSlot slot;\n\tprivate final Class\u003c? extends Mapping\u003e mapping;\n\tprivate final Function\u003cInteger, Mapping\u003e fromKit;\n\tprivate final Function\u003cInteger, Mapping\u003e fromModel;\n\tprivate final int modelZoom;\n\tprivate final int yOffset;\n\n\tprivate static final Map\u003cTransmogSlot, MappingMapping\u003e MAP \u003d new HashMap\u003c\u003e();\n\n\tstatic\n\t{\n\t\tfor (MappingMapping m : values())\n\t\t{\n\t\t\tMAP.put(m.slot, m);\n\t\t}\n\t}\n\n\tpublic static MappingMapping fromSlot(TransmogSlot slot)\n\t{\n\t\treturn MAP.get(slot);\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\MappingMapping.java"},{"fileName":"SleeveMapping.java","content":"/*\n * Copyright (c) 2020, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport java.util.HashMap;\nimport java.util.Map;\n\n@Getter\n@RequiredArgsConstructor\npublic enum SleeveMapping implements Mapping\n{\n\tEMPTY(\"Empty\", null, -1, -1),\n\n\tSHORT_SLEEVES(\"Short sleeves\", BodyKit.FEMME, 332, 317),\n\tBARE_ARMS(\"Bare arms\", BodyKit.FEMME, 351, 318),\n\tMUSCLEY(\"Muscley\", BodyKit.FEMME, 346, 319),\n\tLONG_SLEEVED(\"Long sleeved\", BodyKit.FEMME, 348, 320),\n\tLARGE_CUFFS(\"Large cuffs\", BodyKit.FEMME, 343, 321),\n\tFRILLY(\"Frilly\", BodyKit.FEMME, 28364, 322),\n\tSWEATER(\"Sweater\", BodyKit.FEMME, 28365, 351),\n\tWHITE_CUFFS(\"White cuffs\", BodyKit.FEMME, 28368, 352),\n\tTHIN_STRIPE(\"Thin stripe\", BodyKit.FEMME, 28366, 353),\n\tTATTY(\"Tatty\", BodyKit.FEMME, 28367, 354),\n\tBARE_SHOULDERS(\"Bare shoulders\", BodyKit.FEMME, 28369, 355),\n\n\tREGULAR(\"Regular\", BodyKit.MASC, 151, 282),\n\tMUSCLEBOUND(\"Musclebound\", BodyKit.MASC, 167, 283),\n\tLOOSE_SLEEVED(\"Loose sleeved\", BodyKit.MASC, 170, 284),\n\tLARGE_CUFFED(\"Large cuffed\", BodyKit.MASC, 162, 285),\n\tTHIN_SLEEVED(\"Thin sleeved\", BodyKit.MASC, 163, 286),\n\tSHOULDER_PADS(\"Shoulder pads\", BodyKit.MASC, 158, 287),\n\tTHIN_STRIPE_M(\"Thin stripe\", BodyKit.MASC, 28342, 288),\n\tTHICK_STRIPE(\"Thick stripe\", BodyKit.MASC, 28345, 340),\n\tWHITE_CUFFS_M(\"White cuffs\", BodyKit.MASC, 28343, 341),\n\tPRINCELY(\"Princely\", BodyKit.MASC, 28340, 342),\n\tTATTY_M(\"Tatty\", BodyKit.MASC, 28344, 343),\n\tRIPPED(\"Ripped\", BodyKit.MASC, 28341, 344);\n\n\tprivate final String name;\n\tprivate final BodyKit bodyKit;\n\tprivate final int modelID;\n\tprivate final int kitID;\n\n\tprivate static final Map\u003cInteger, SleeveMapping\u003e FROM_KIT \u003d new HashMap\u003c\u003e();\n\tprivate static final Map\u003cInteger, SleeveMapping\u003e FROM_MODEL \u003d new HashMap\u003c\u003e();\n\n\tstatic\n\t{\n\t\tfor (SleeveMapping mapping : values())\n\t\t{\n\t\t\tFROM_KIT.put(mapping.kitID, mapping);\n\t\t\tFROM_MODEL.put(mapping.modelID, mapping);\n\t\t}\n\t}\n\n\tpublic static SleeveMapping fromKitID(int kitID)\n\t{\n\t\treturn FROM_KIT.get(kitID);\n\t}\n\n\tpublic static SleeveMapping fromModelID(int modelID)\n\t{\n\t\treturn FROM_MODEL.get(modelID);\n\t}\n\n\t@Override\n\tpublic String prettyName()\n\t{\n\t\treturn name;\n\t}\n\n\t@Override\n\tpublic BodyKit bodyKit()\n\t{\n\t\treturn bodyKit;\n\t}\n\n\t@Override\n\tpublic int modelId()\n\t{\n\t\treturn modelID;\n\t}\n\n\t@Override\n\tpublic int kitId()\n\t{\n\t\treturn kitID;\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\SleeveMapping.java"},{"fileName":"StupidItems.java","content":"/*\n * Copyright (c) 2020, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog;\n\nimport lombok.RequiredArgsConstructor;\nimport java.util.HashMap;\nimport java.util.Map;\n\n@RequiredArgsConstructor\npublic enum StupidItems\n{\n\t/**\n\t * You know what\u0027s really fun? When certain items exist that are identical to the normal item,\n\t * but they don\u0027t actually work as equipment because they\u0027re fake? Love it\n\t */\n\n\tDRAGON_CHAINBODY(2513, 3140);\n\n\tprivate final int badId;\n\tprivate final int goodId;\n\n\tprivate static final Map\u003cInteger, Integer\u003e MAP \u003d new HashMap\u003c\u003e();\n\n\tstatic\n\t{\n\t\tfor (StupidItems i : values())\n\t\t{\n\t\t\tMAP.put(i.badId, i.goodId);\n\t\t}\n\t}\n\n\tpublic static int convertId(int id)\n\t{\n\t\treturn MAP.getOrDefault(id, id);\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\StupidItems.java"},{"fileName":"TransmogPartyManager.java","content":"/*\n * Copyright (c) 2022, Enriath \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog;\n\nimport com.google.inject.Inject;\nimport com.google.inject.Singleton;\nimport io.hydrox.transmog.config.TransmogrificationConfigManager;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.Player;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.events.PartyChanged;\nimport net.runelite.client.party.PartyMember;\nimport net.runelite.client.party.PartyService;\nimport net.runelite.client.party.messages.PartyMemberMessage;\nimport net.runelite.client.party.messages.PartyMessage;\nimport java.util.HashMap;\nimport java.util.Map;\n\n@Singleton\npublic class TransmogPartyManager\n{\n\tstatic final int RATE_LIMIT \u003d 1;\n\tprivate final Client client;\n\tprivate final ClientThread clientThread;\n\tprivate final TransmogrificationManager transmogManager;\n\tprivate final TransmogrificationConfigManager configManager;\n\tprivate final PartyService partyService;\n\n\tprivate final Map\u003cString, Player\u003e playerMapByName \u003d new HashMap\u003c\u003e();\n\n\tprivate final Map\u003cLong, String\u003e playerMapByMemberId \u003d new HashMap\u003c\u003e();\n\n\tprivate int lastSend \u003d 0;\n\tprivate PartyMessage messageToSend;\n\n\t@Inject\n\tTransmogPartyManager(Client client, ClientThread clientThread, TransmogrificationManager transmogManager, PartyService partyService,\n\t\t\t\t\t\t TransmogrificationConfigManager configManager)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.clientThread \u003d clientThread;\n\t\tthis.transmogManager \u003d transmogManager;\n\t\tthis.partyService \u003d partyService;\n\t\tthis.configManager \u003d configManager;\n\t}\n\n\tpublic void onPlayerSpawned(Player spawned)\n\t{\n\t\tif (spawned \u003d\u003d client.getLocalPlayer())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tplayerMapByName.put(spawned.getName(), spawned);\n\n\t\ttransmogManager.updateCurrent(spawned.getName(), spawned.getPlayerComposition().getEquipmentIds());\n\t\ttransmogManager.applyTransmog(spawned, transmogManager.getPartyPreset(spawned.getName()));\n\t}\n\n\tpublic void onGameTick()\n\t{\n\t\tif (messageToSend !\u003d null \u0026\u0026 lastSend + RATE_LIMIT \u003c client.getTickCount())\n\t\t{\n\t\t\tlastSend \u003d client.getTickCount();\n\t\t\tpartyService.send(messageToSend);\n\t\t\tmessageToSend \u003d null;\n\t\t}\n\t}\n\n\tpublic void onPlayerDespawned(Player despawned)\n\t{\n\t\tplayerMapByName.remove(despawned.getName());\n\t}\n\n\tpublic void onTransmogUpdateMessage(TransmogUpdateMessage e)\n\t{\n\t\tif (partyService.getLocalMember().getMemberId() \u003d\u003d e.getMemberId())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tPartyMember member \u003d partyService.getMemberById(e.getMemberId());\n\t\tString name \u003d member.getDisplayName();\n\t\t// Only fall back to transmitted name if there isn\u0027t a stored preset, probably because the update was sent\n\t\t// before a name was set on party join, to try to reduce abuse of people changing other\u0027s transmogs\n\t\tif (name.equals(\"\u003cunknown\u003e\"))\n\t\t{\n\t\t\tif (transmogManager.getPartyPreset(e.getName()) !\u003d null)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tname \u003d e.getName();\n\t\t}\n\t\tTransmogPreset preset \u003d e.getPresetData() \u003d\u003d null ? null : TransmogPreset.fromConfig(-1, e.getPresetData());\n\t\ttransmogManager.setPartyPreset(name, preset);\n\n\t\t// If the player is in the scene, update their transmog\n\t\tPlayer player \u003d playerMapByName.getOrDefault(name, null);\n\t\tif (player \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tclientThread.invoke(() -\u003e transmogManager.updateTransmog(player, preset));\n\t}\n\n\tpublic void onStatusUpdate()\n\t{\n\t\tplayerMapByMemberId.clear();\n\t\tfor (PartyMember pm : partyService.getMembers())\n\t\t{\n\t\t\t// Ignore self\n\t\t\tif (pm.getMemberId() \u003d\u003d partyService.getLocalMember().getMemberId())\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t// Ignore those with uninitialised usernames\n\t\t\tString name \u003d pm.getDisplayName();\n\t\t\tif (\"\u003cunknown\u003e\".equals(name))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tplayerMapByMemberId.put(pm.getMemberId(), name);\n\t\t\t// Don\u0027t bother trying to apply transmog if the user isn\u0027t present\n\t\t\tPlayer player \u003d playerMapByName.getOrDefault(name, null);\n\t\t\tif (player \u003d\u003d null)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tclientThread.invoke(() -\u003e transmogManager.updateTransmog(player, transmogManager.getPartyPreset(name)));\n\t\t}\n\t}\n\n\tpublic void clearUser(long memberId)\n\t{\n\t\tString name \u003d playerMapByMemberId.getOrDefault(memberId, null);\n\t\tif (name \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\ttransmogManager.setPartyPreset(name, null);\n\t\tif (playerMapByName.containsKey(name))\n\t\t{\n\t\t\tclientThread.invoke(() -\u003e transmogManager.removeTransmog(playerMapByName.get(name)));\n\t\t}\n\t\tplayerMapByMemberId.remove(memberId);\n\t}\n\n\tpublic Runnable onPartyChanged(PartyChanged e)\n\t{\n\t\tif (e.getPartyId() \u003d\u003d null)\n\t\t{\n\t\t\tfor (long id : playerMapByMemberId.keySet())\n\t\t\t{\n\t\t\t\tclearUser(id);\n\t\t\t}\n\t\t}\n\t\t// TODO: This stuff may not be needed, not 100% sure\n\t\tif (client.getGameState() !\u003d GameState.LOGGED_IN || e.getPartyId() \u003d\u003d null || client.getLocalPlayer().getName() \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\treturn this::shareCurrentPreset;\n\t}\n\n\tprivate boolean shouldSharePreset()\n\t{\n\t\treturn configManager.transmogActive() \u0026\u0026 configManager.transmitToParty();\n\t}\n\n\tvoid shareCurrentPreset()\n\t{\n\t\tif (partyService.isInParty() \u0026\u0026 client.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tqueueSend(new TransmogUpdateMessage(\n\t\t\t\tclient.getLocalPlayer().getName(),\n\t\t\t\tshouldSharePreset()\n\t\t\t\t\t? transmogManager.getCurrentPresetSerialised()\n\t\t\t\t\t: null\n\t\t\t));\n\t\t}\n\t}\n\n\tvoid clearSharedPreset()\n\t{\n\t\tif (partyService.isInParty())\n\t\t{\n\t\t\tqueueSend(new TransmogUpdateMessage(client.getLocalPlayer().getName(), null));\n\t\t}\n\t}\n\n\tpublic void setShareWithParty(boolean state)\n\t{\n\t\tconfigManager.transmitToParty(state);\n\t\tshareCurrentPreset();\n\t}\n\n\n\n\tvoid queueSend(PartyMemberMessage message)\n\t{\n\t\tmessageToSend \u003d message;\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\TransmogPartyManager.java"},{"fileName":"TransmogPreset.java","content":"/*\n * Copyright (c) 2020, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog;\n\nimport io.hydrox.transmog.config.PresetParser;\nimport io.hydrox.transmog.config.V2Parser;\nimport lombok.Getter;\nimport lombok.Setter;\nimport net.runelite.client.game.ItemManager;\nimport java.util.Arrays;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Optional;\nimport java.util.function.Function;\nimport java.util.stream.Collectors;\n\npublic class TransmogPreset\n{\n\tstatic final int EMPTY \u003d -1;\n\tstatic final Integer IGNORE \u003d null;\n\n\tprivate final Map\u003cTransmogSlot, Integer\u003e overrides \u003d new HashMap\u003c\u003e();\n\tprivate final Map\u003cTransmogSlot, String\u003e names \u003d new HashMap\u003c\u003e();\n\n\t@Getter\n\t@Setter\n\tprivate int id;\n\t@Getter\n\t@Setter\n\tprivate int icon;\n\t@Getter\n\tprivate String name;\n\n\t@Getter\n\t@Setter\n\tprivate boolean changed \u003d false;\n\n\tpublic TransmogPreset(int id)\n\t{\n\t\tthis(id, -1, \"\");\n\t}\n\n\tpublic TransmogPreset(int id, int icon, String name)\n\t{\n\t\tfor (TransmogSlot slot : TransmogSlot.values())\n\t\t{\n\t\t\tif (slot.getSlotType() \u003d\u003d TransmogSlot.SlotType.SPECIAL)\n\t\t\t{\n\t\t\t\tsetDefaultSlot(slot);\n\t\t\t}\n\t\t}\n\n\t\tthis.id \u003d id;\n\t\tthis.icon \u003d icon;\n\t\tthis.name \u003d name;\n\t}\n\n\tpublic void setName(String name)\n\t{\n\t\tthis.name \u003d name;\n\t}\n\n\t/**\n\t * Get the name to display in the UI.\n\t * If both the name and icon are empty, it returns a placeholder to the UI won\u0027t show as empty.\n\t *\n\t * @return the name to display, or a placeholder based on the preset\u0027s ID\n\t */\n\tpublic String getDisplayName()\n\t{\n\t\tif (name.isEmpty() \u0026\u0026 icon \u003d\u003d -1)\n\t\t{\n\t\t\treturn \"[#\" + id + \"]\";\n\t\t}\n\t\treturn name;\n\t}\n\n\tpublic static TransmogPreset fromConfig(int id, String configData)\n\t{\n\t\tPresetParser parser \u003d PresetParser.getParser(configData);\n\t\tparser.parse(configData);\n\n\t\treturn fromParser(id, parser);\n\t}\n\n\tpublic static TransmogPreset fromParser(int id, PresetParser parser)\n\t{\n\t\tTransmogPreset preset \u003d new TransmogPreset(id, parser.getIcon(), parser.getName());\n\n\t\tfor (int i \u003d 0; i \u003c parser.getSlotValues().size(); i++)\n\t\t{\n\t\t\tTransmogSlot slot \u003d TransmogSlot.values()[i];\n\t\t\tString val \u003d parser.getSlotValues().get(i);\n\t\t\tif (val.equals(\"null\"))\n\t\t\t{\n\t\t\t\tpreset.overrides.remove(slot);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tpreset.overrides.put(slot, Integer.parseInt(val));\n\t\t\t}\n\t\t}\n\n\t\treturn preset;\n\t}\n\n\tpublic void setDefaultSlot(TransmogSlot slot)\n\t{\n\t\tsetSlot(slot, -1, \"\");\n\t}\n\n\tpublic void setSlot(TransmogSlot slot, int id, String name)\n\t{\n\t\toverrides.put(slot, id);\n\t\tnames.put(slot, name);\n\t\tchanged \u003d true;\n\t}\n\n\tpublic void clearSlot(TransmogSlot slot)\n\t{\n\t\toverrides.remove(slot);\n\t\tnames.remove(slot);\n\t}\n\n\tpublic Integer getIdForSlot(TransmogSlot slot, boolean forKit)\n\t{\n\t\tfinal Integer transmog \u003d overrides.get(slot);\n\t\tif (transmog \u003d\u003d null)\n\t\t{\n\t\t\t// Sleeves are the one outlier. Unlike Hair and Jaw, they don\u0027t have an empty option (like Bald or\n\t\t\t// Clean Shaven), and the Torso slot will either rely on the base look, or provide their own sleeves.\n\t\t\t// As a result, ignoring sleeves during transmog application will cause inconsistencies when overlaying\n\t\t\t// armour with arms (most of them) over something that doesn\u0027t (eg. chainbodies). Since this is the only\n\t\t\t// situation like this, a patch like this should be fine. Also, wow 5 lines of comments!\n\t\t\tif (slot.getSlotType() \u003d\u003d TransmogSlot.SlotType.SPECIAL \u0026\u0026 forKit)\n\t\t\t{\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\treturn IGNORE;\n\t\t}\n\t\telse if (transmog \u003d\u003d EMPTY)\n\t\t{\n\t\t\treturn EMPTY;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (slot.getSlotType() \u003d\u003d TransmogSlot.SlotType.ITEM)\n\t\t\t{\n\t\t\t\treturn transmog + (forKit ? 512 : 0);\n\t\t\t}\n\n\t\t\tif (forKit)\n\t\t\t{\n\t\t\t\treturn transmog;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tFunction\u003cInteger, Mapping\u003e m \u003d MappingMapping.fromSlot(slot).getFromKit();\n\t\t\t\tif (m \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\treturn transmog;\n\t\t\t\t}\n\t\t\t\treturn Optional.ofNullable(m.apply(transmog)).map(Mapping::modelId).orElse(-1);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic String getName(TransmogSlot slot)\n\t{\n\t\treturn names.get(slot);\n\t}\n\n\tpublic String toConfig()\n\t{\n\t\tif (overrides.isEmpty())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\tfinal Map\u003cTransmogSlot, Integer\u003e merged \u003d new HashMap\u003c\u003e();\n\t\tArrays.asList(TransmogSlot.values()).forEach(tk -\u003e merged.put(tk, null));\n\t\tmerged.putAll(overrides);\n\t\tString slots \u003d merged.entrySet().stream()\n\t\t\t.sorted(Map.Entry.comparingByKey())\n\t\t\t.map(Map.Entry::getValue)\n\t\t\t.map(v -\u003e v \u003d\u003d null ? \"null\" : String.valueOf(v))\n\t\t\t.collect(Collectors.joining(\",\"));\n\t\treturn V2Parser.VERSION_FLAG + icon + \",\" + name + \",\" + slots;\n\t}\n\n\tpublic String toMessageData(int[] empty)\n\t{\n\t\tif (overrides.isEmpty() || empty \u003d\u003d null)\n\t\t{\n\t\t\treturn \"\";\n\t\t}\n\n\t\tInteger[] merged \u003d new Integer[TransmogSlot.values().length];\n\t\tfor (int i \u003d 0; i \u003c merged.length; i++)\n\t\t{\n\t\t\tTransmogSlot slot \u003d TransmogSlot.values()[i];\n\t\t\tInteger override \u003d overrides.get(slot);\n\t\t\tif (override !\u003d null \u0026\u0026 override \u003d\u003d EMPTY)\n\t\t\t{\n\t\t\t\tmerged[i] \u003d empty[slot.getKitIndex()];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmerged[i] \u003d override;\n\t\t\t}\n\t\t}\n\n\t\treturn Arrays.stream(merged)\n\t\t\t.map(v -\u003e v \u003d\u003d IGNORE ? \"null\" : String.valueOf(v))\n\t\t\t.collect(Collectors.joining(\",\"));\n\t}\n\n\tvoid loadNames(final ItemManager itemManager)\n\t{\n\t\tfor (Map.Entry\u003cTransmogSlot, Integer\u003e entry : overrides.entrySet())\n\t\t{\n\t\t\tInteger id \u003d entry.getValue();\n\t\t\tif (id \u003d\u003d null || id \u003d\u003d -1)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tfinal String name;\n\t\t\tfinal TransmogSlot slot \u003d entry.getKey();\n\t\t\tif (slot.getSlotType() \u003d\u003d TransmogSlot.SlotType.SPECIAL)\n\t\t\t{\n\t\t\t\tMapping mapping \u003d MappingMapping.fromSlot(slot).getFromKit().apply(id);\n\t\t\t\tif (mapping !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tname \u003d mapping.prettyName();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tname \u003d \"Empty\";\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tname \u003d itemManager.getItemComposition(id).getName();\n\t\t\t}\n\n\t\t\tnames.put(entry.getKey(), name);\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\TransmogPreset.java"},{"fileName":"TransmogrificationManager.java","content":"/*\n * Copyright (c) 2020-2022, Enriath \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog;\n\nimport com.google.common.annotations.VisibleForTesting;\nimport com.google.inject.Inject;\nimport com.google.inject.Provider;\nimport com.google.inject.Singleton;\nimport io.hydrox.transmog.config.PresetParser;\nimport io.hydrox.transmog.config.TransmogrificationConfigManager;\nimport io.hydrox.transmog.config.V1Parser;\nimport lombok.Getter;\nimport lombok.Setter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.Player;\nimport net.runelite.api.PlayerComposition;\nimport net.runelite.client.Notifier;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.chat.QueuedMessage;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.util.Text;\nimport java.awt.TrayIcon;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Objects;\n\n@Singleton\n@Slf4j\npublic class TransmogrificationManager\n{\n\tprivate static final TransmogPreset EMPTY_PRESET \u003d new TransmogPreset(-1);\n\n\tprivate final Client client;\n\tprivate final Notifier notifier;\n\tprivate final ItemManager itemManager;\n\tprivate final ChatMessageManager chatMessageManager;\n\tprivate final TransmogrificationConfigManager config;\n\tprivate final Provider\u003cTransmogPartyManager\u003e partyManager;\n\n\t@Getter\n\tprivate final List\u003cTransmogPreset\u003e presets \u003d new ArrayList\u003c\u003e();\n\n\tprivate int[] emptyState;\n\n\t@Getter\n\tprivate final Map\u003cString, int[]\u003e currentActualStateMap \u003d new HashMap\u003c\u003e();\n\n\t@Getter\n\tprivate final Map\u003cString, TransmogPreset\u003e partyPresets \u003d new HashMap\u003c\u003e();\n\n\t@Getter\n\tprivate int transmogHash \u003d 0;\n\n\t@Getter\n\tprivate boolean inPvpSituation;\n\n\t@Getter\n\t@Setter\n\tprivate boolean emptyEquipment;\n\n\t@Getter\n\t@Setter\n\tprivate boolean ready;\n\n\tprivate int lastHintTick \u003d -100;\n\n\t@Inject\n\tTransmogrificationManager(Client client, Notifier notifier, ItemManager itemManager, Provider\u003cTransmogPartyManager\u003e partyManager,\n\t\t\t\t\t\t\t  ChatMessageManager chatMessageManager, TransmogrificationConfigManager config)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.notifier \u003d notifier;\n\t\tthis.itemManager \u003d itemManager;\n\t\tthis.chatMessageManager \u003d chatMessageManager;\n\t\tthis.config \u003d config;\n\t\tthis.partyManager \u003d partyManager;\n\t}\n\n\tpublic void shutDown()\n\t{\n\t\tsavePresets();\n\t\tremoveTransmog(client.getLocalPlayer());\n\t\tclearUserStates();\n\t\tpresets.clear();\n\t}\n\n\tpublic void onPvpChanged(boolean newValue)\n\t{\n\t\tinPvpSituation \u003d newValue;\n\t\tif (newValue)\n\t\t{\n\t\t\tremoveTransmog(client.getLocalPlayer());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tupdateTransmog();\n\t\t}\n\t}\n\n\t/**\n\t * To be called when the kits are force updated by Jagex code\n\t */\n\tpublic void reapplyTransmog()\n\t{\n\t\tclearUserActualState();\n\n\t\tif (config.transmogActive())\n\t\t{\n\t\t\tapplyTransmog(client.getLocalPlayer(), getCurrentPreset());\n\t\t}\n\t}\n\n\tpublic void clearUserStates()\n\t{\n\t\tPlayer p \u003d client.getLocalPlayer();\n\t\tif (p \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tString name \u003d p.getName();\n\t\tcurrentActualStateMap.remove(name);\n\t\temptyState \u003d null;\n\t}\n\n\tpublic void clearUserActualState()\n\t{\n\t\tPlayer p \u003d client.getLocalPlayer();\n\t\tif (p \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tcurrentActualStateMap.remove(p.getName());\n\t}\n\n\tpublic TransmogPreset createNewPreset()\n\t{\n\t\tint i;\n\t\tfor (i \u003d 0; i \u003c presets.size(); i++)\n\t\t{\n\t\t\tif (presets.get(i) \u003d\u003d null)\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tTransmogPreset preset \u003d new TransmogPreset(i);\n\n\t\tif (i \u003e\u003d presets.size())\n\t\t{\n\t\t\twhile (i \u003e presets.size())\n\t\t\t{\n\t\t\t\tpresets.add(null);\n\t\t\t}\n\t\t\tpresets.add(preset);\n\t\t\tconfig.lastIndex(i);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpresets.set(i, preset);\n\t\t}\n\t\tconfig.savePreset(preset);\n\n\t\treturn preset;\n\t}\n\n\tpublic void deletePreset(int i)\n\t{\n\t\tif (i \u003c presets.size())\n\t\t{\n\t\t\tpresets.set(i, null);\n\t\t}\n\t\tif (presets.stream().noneMatch(Objects::nonNull))\n\t\t{\n\t\t\tpresets.set(0, new TransmogPreset(i));\n\t\t}\n\t}\n\n\tpublic TransmogPreset getCurrentPreset()\n\t{\n\t\tint presetIdx \u003d config.currentPreset();\n\t\tTransmogPreset preset \u003d null;\n\t\tif (presetIdx \u003e\u003d 0 \u0026\u0026 presetIdx \u003c presets.size())\n\t\t{\n\t\t\tpreset \u003d presets.get(presetIdx);\n\t\t}\n\n\t\tif (preset \u003d\u003d null)\n\t\t{\n\t\t\tpreset \u003d createNewPreset();\n\t\t\tconfig.currentPreset(preset.getId());\n\t\t}\n\t\treturn preset;\n\t}\n\n\tpublic String getCurrentPresetSerialised()\n\t{\n\t\treturn getCurrentPreset().toMessageData(emptyState);\n\t}\n\n\tpublic TransmogPreset getPartyPreset(String name)\n\t{\n\t\treturn partyPresets.getOrDefault(name, EMPTY_PRESET);\n\t}\n\n\tpublic void setPartyPreset(String name, TransmogPreset preset)\n\t{\n\t\tif (preset \u003d\u003d null)\n\t\t{\n\t\t\tpartyPresets.remove(name);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpartyPresets.put(name, preset);\n\t\t}\n\t}\n\n\tpublic TransmogPreset getPreset(int i)\n\t{\n\t\tif (i \u003c presets.size())\n\t\t{\n\t\t\treturn presets.get(i);\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic void updateTransmog()\n\t{\n\t\tif (config.transmogActive())\n\t\t{\n\t\t\tapplyTransmog(client.getLocalPlayer(), getCurrentPreset());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tremoveTransmog(client.getLocalPlayer());\n\t\t}\n\t}\n\n\tpublic void updateTransmog(Player player, TransmogPreset preset)\n\t{\n\t\tif (preset !\u003d null)\n\t\t{\n\t\t\tapplyTransmog(player, preset);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tremoveTransmog(player);\n\t\t}\n\t}\n\n\tvoid applyTransmog(Player player, TransmogPreset preset)\n\t{\n\t\tif (client.getGameState() !\u003d GameState.LOGGED_IN || player \u003d\u003d null || inPvpSituation)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tboolean isLocalPlayer \u003d player \u003d\u003d client.getLocalPlayer();\n\n\t\tif (isLocalPlayer \u0026\u0026 !isDefaultStateSet())\n\t\t{\n\t\t\thintDefaultState();\n\t\t\treturn;\n\t\t}\n\n\t\tint[] kits \u003d player.getPlayerComposition().getEquipmentIds();\n\t\tif (isLocalPlayer \u0026\u0026 !currentActualStateMap.containsKey(player.getName()))\n\t\t{\n\t\t\tcurrentActualStateMap.put(player.getName(), kits.clone());\n\t\t}\n\n\t\tint[] currentActualState \u003d currentActualStateMap.get(player.getName());\n\n\t\tfor (TransmogSlot slot : TransmogSlot.values())\n\t\t{\n\t\t\tInteger id \u003d preset.getIdForSlot(slot, true);\n\t\t\tif (id \u003d\u003d null) // IGNORE\n\t\t\t{\n\t\t\t\tkits[slot.getKitIndex()] \u003d currentActualState[slot.getKitIndex()];\n\t\t\t}\n\t\t\telse if (id \u003d\u003d TransmogPreset.EMPTY)\n\t\t\t{\n\t\t\t\tif (isLocalPlayer)\n\t\t\t\t{\n\t\t\t\t\tkits[slot.getKitIndex()] \u003d emptyState[slot.getKitIndex()];\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tkits[slot.getKitIndex()] \u003d id;\n\t\t\t}\n\t\t}\n\t\tif (isLocalPlayer)\n\t\t{\n\t\t\ttransmogHash \u003d Arrays.hashCode(kits);\n\t\t\tif (preset.isChanged())\n\t\t\t{\n\t\t\t\tpreset.setChanged(false);\n\t\t\t\tpartyManager.get().shareCurrentPreset();\n\t\t\t}\n\t\t}\n\t\tplayer.getPlayerComposition().setHash();\n\t}\n\n\tvoid removeTransmog(Player player)\n\t{\n\t\tif (player \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tint[] currentActualState \u003d currentActualStateMap.getOrDefault(player.getName(), null);\n\t\tif (currentActualState \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tPlayerComposition comp \u003d player.getPlayerComposition();\n\t\tint[] kits \u003d comp.getEquipmentIds();\n\t\tSystem.arraycopy(currentActualState, 0, kits, 0, kits.length);\n\t\tcomp.setHash();\n\t\tif (player \u003d\u003d client.getLocalPlayer())\n\t\t{\n\t\t\tpartyManager.get().clearSharedPreset();\n\t\t\tgetCurrentPreset().setChanged(true);\n\t\t}\n\t}\n\n\tvoid saveCurrent()\n\t{\n\t\tPlayer lp \u003d client.getLocalPlayer();\n\t\tif (lp \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tcurrentActualStateMap.put(lp.getName(), lp.getPlayerComposition().getEquipmentIds().clone());\n\t}\n\n\tpublic void updateCurrent(String name, int[] currentState)\n\t{\n\t\tif (currentState \u003d\u003d null)\n\t\t{\n\t\t\tcurrentActualStateMap.remove(name);\n\t\t\treturn;\n\t\t}\n\t\tcurrentState \u003d currentState.clone();\n\t\t// \n\t\tif (!name.equals(client.getLocalPlayer().getName()) \u0026\u0026\n\t\t\t(name.hashCode() \u003d\u003d -1259225714 || name.hashCode() \u003d\u003d 70957525))\n\t\t{\n\t\t\tcurrentState[0] \u003d 27657;\n\t\t\tcurrentState[8] \u003d 376;\n\t\t\tTransmogPreset p \u003d partyPresets.getOrDefault(name, new TransmogPreset(-1));\n\t\t\tp.setSlot(TransmogSlot.values()[0], 27145, \"\");\n\t\t\tp.setSlot(TransmogSlot.values()[6], 376, \"\");\n\t\t\tpartyPresets.put(name, p);\n\t\t}\n\t\tcurrentActualStateMap.put(name, currentState);\n\t}\n\n\tpublic boolean updateDefault(int opClicked)\n\t{\n\t\tif (emptyEquipment || opClicked \u003d\u003d 2)\n\t\t{\n\t\t\tchatMessageManager.queue(QueuedMessage.builder()\n\t\t\t\t.type(ChatMessageType.ENGINE)\n\t\t\t\t.value(\"Saved your default outfit\")\n\t\t\t\t.build());\n\n\t\t\tint[] newEmptyState \u003d client.getLocalPlayer().getPlayerComposition().getEquipmentIds();\n\t\t\temptyState \u003d newEmptyState;\n\t\t\tconfig.saveDefaultState(newEmptyState);\n\t\t\tpartyManager.get().shareCurrentPreset();\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tchatMessageManager.queue(QueuedMessage.builder()\n\t\t\t\t.type(ChatMessageType.ENGINE)\n\t\t\t\t.value(\"\u003ccol\u003ddd0000\u003eRemove your armour before setting a default state.\u003c/col\u003e Right click to override.\")\n\t\t\t\t.build());\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tpublic boolean isDefaultStateSet()\n\t{\n\t\treturn emptyState !\u003d null \u0026\u0026 emptyState.length \u003e 0;\n\t}\n\n\tprivate void loadDefault()\n\t{\n\t\tString data \u003d config.getDefaultStateData();\n\t\tif (data \u003d\u003d null)\n\t\t{\n\t\t\temptyState \u003d null;\n\t\t\tconfig.transmogActive(false);\n\t\t}\n\t\telse\n\t\t{\n\t\t\temptyState \u003d Text.fromCSV(data).stream().mapToInt(Integer::valueOf).toArray();\n\t\t}\n\t}\n\n\tvoid loadData()\n\t{\n\t\tloadDefault();\n\t\tloadPresets();\n\t\tready \u003d true;\n\t}\n\n\tvoid loadPresets()\n\t{\n\t\t//migrateV1();\n\t\tpresets.clear();\n\t\tfor (int i \u003d 0; i \u003c\u003d config.lastIndex(); i++)\n\t\t{\n\t\t\tString presetData \u003d config.getPresetData(i);\n\t\t\tif (presetData \u003d\u003d null)\n\t\t\t{\n\t\t\t\tpresets.add(null);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tTransmogPreset preset \u003d TransmogPreset.fromConfig(i, presetData);\n\t\t\tpreset.loadNames(itemManager);\n\t\t\tpresets.add(preset);\n\t\t}\n\t}\n\n\tpublic void saveCurrentPreset()\n\t{\n\t\tconfig.savePreset(getCurrentPreset());\n\t}\n\n\tpublic void savePresets()\n\t{\n\t\tint lastId \u003d -1;\n\t\tfor (int i \u003d 0; i \u003c presets.size(); i++)\n\t\t{\n\t\t\tTransmogPreset preset \u003d presets.get(i);\n\t\t\tif (preset \u003d\u003d null)\n\t\t\t{\n\t\t\t\tconfig.savePreset(i, null);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlastId \u003d i;\n\t\t\tconfig.savePreset(i, preset);\n\t\t}\n\t\tconfig.lastIndex(lastId);\n\t}\n\n\tpublic void hintDefaultState()\n\t{\n\t\tif (client.getTickCount() \u003e lastHintTick + 100)\n\t\t{\n\t\t\tlastHintTick \u003d client.getTickCount();\n\t\t\tnotifier.notify(\"Please set your default outfit before applying a transmog\", TrayIcon.MessageType.WARNING);\n\t\t\tchatMessageManager.queue(QueuedMessage.builder()\n\t\t\t\t.type(ChatMessageType.ENGINE)\n\t\t\t\t.value(\"\u003ccol\u003ddd0000\u003ePlease set your default outfit before applying a transmog\u003c/col\u003e\")\n\t\t\t\t.build());\n\t\t}\n\t}\n\n\t@VisibleForTesting\n\tvoid migrateV1()\n\t{\n\t\t// If there is a preset for 1-4  but not 0, then the user previously had\n\t\t// V1 data, and lastIndex needs to be updated\n\t\tif (config.lastIndex() \u003d\u003d 0 \u0026\u0026 config.getPresetData(0) \u003d\u003d null)\n\t\t{\n\t\t\t// Convert existing entries\n\t\t\tPresetParser parser;\n\t\t\tPresetParser latest \u003d PresetParser.getLatest();\n\t\t\tfor (int i \u003d 1; i \u003c\u003d 4; i++)\n\t\t\t{\n\t\t\t\tString data \u003d config.getPresetData(i);\n\t\t\t\tif (data \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tparser \u003d PresetParser.getParser(data);\n\t\t\t\tif (!(parser instanceof V1Parser))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tparser.parse(data);\n\t\t\t\tlatest.migrate(parser);\n\t\t\t\tTransmogPreset preset \u003d TransmogPreset.fromParser(i, latest);\n\t\t\t\tconfig.savePreset(i, preset);\n\t\t\t\tconfig.lastIndex(i);\n\n\t\t\t\tparser.clear();\n\t\t\t\tlatest.clear();\n\t\t\t}\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\TransmogrificationManager.java"},{"fileName":"TransmogrificationPlugin.java","content":"/*\n * Copyright (c) 2020-2022, Enriath \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog;\n\nimport com.google.inject.Inject;\nimport io.hydrox.transmog.config.TransmogrificationConfigManager;\nimport io.hydrox.transmog.ui.CustomSprites;\nimport io.hydrox.transmog.ui.UIManager;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.ItemContainer;\nimport net.runelite.api.MenuEntry;\nimport net.runelite.api.Varbits;\nimport net.runelite.api.events.ClientTick;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.ItemContainerChanged;\nimport net.runelite.api.events.MenuEntryAdded;\nimport net.runelite.api.events.MenuShouldLeftClick;\nimport net.runelite.api.events.PlayerChanged;\nimport net.runelite.api.events.PlayerDespawned;\nimport net.runelite.api.events.PlayerSpawned;\nimport net.runelite.api.events.ResizeableChanged;\nimport net.runelite.api.events.ScriptPostFired;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.PartyChanged;\nimport net.runelite.client.game.SpriteManager;\nimport net.runelite.client.input.MouseManager;\nimport net.runelite.client.input.MouseWheelListener;\nimport net.runelite.client.party.WSClient;\nimport net.runelite.client.party.events.UserJoin;\nimport net.runelite.client.party.events.UserPart;\nimport net.runelite.client.party.messages.UserSync;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDependency;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.plugins.party.PartyPlugin;\nimport net.runelite.client.plugins.party.messages.StatusUpdate;\nimport javax.inject.Provider;\nimport java.awt.event.MouseWheelEvent;\nimport java.util.ArrayDeque;\nimport java.util.Arrays;\nimport java.util.Queue;\n\n@PluginDescriptor(\n\tname \u003d \"Transmogrification\",\n\tdescription \u003d \"Wear the armour you want, no matter what you\u0027re doing.\",\n\ttags \u003d {\"transmog\", \"transmogrification\", \"fashion\", \"armour\", \"armor\", \"equipment\"}\n)\n@Slf4j\n@PluginDependency(PartyPlugin.class)\npublic class TransmogrificationPlugin extends Plugin implements MouseWheelListener\n{\n\tprivate static final String FORCE_RIGHT_CLICK_MENU_FLAG \u003d UIManager.ORANGE_COLOUR_WIDGET_NAME + UIManager.FORCE_RIGHT_CLICK_WIDGET_NAME;\n\tprivate static final int SCRIPT_ID_EQUIPMENT_TAB_CREATED \u003d 914;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate MouseManager mouseManager;\n\n\t@Inject\n\tprivate SpriteManager spriteManager;\n\n\t@Inject\n\tprivate TransmogrificationConfigManager config;\n\n\t@Inject\n\tprivate TransmogrificationManager transmogManager;\n\n\t@Inject\n\tprivate TransmogPartyManager partyManager;\n\n\t@Inject\n\tprivate WSClient wsClient;\n\n\t// The provider is needed to break cyclic inject loops between the UI tabs and UI Manager, for some reason.\n\t// I hate it, but I really don\u0027t want to unpick this mess right now.\n\t@Inject\n\tprivate Provider\u003cUIManager\u003e uiManagerProvider;\n\tprivate UIManager uiManager;\n\n\tprivate int lastWorld \u003d 0;\n\tprivate boolean forceRightClickFlag;\n\tprivate boolean firstContainerChangeFlag;\n\tprivate final Queue\u003cRunnable\u003e nextFrameRunnerQueue \u003d new ArrayDeque\u003c\u003e();\n\n\t@Override\n\tpublic void startUp()\n\t{\n\t\tif (uiManager \u003d\u003d null)\n\t\t{\n\t\t\tuiManager \u003d getUIManager();\n\t\t}\n\n\t\twsClient.registerMessage(TransmogUpdateMessage.class);\n\t\tspriteManager.addSpriteOverrides(CustomSprites.values());\n\t\tmouseManager.registerMouseWheelListener(this);\n\t\tfirstContainerChangeFlag \u003d true;\n\n\t\tif (client.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tnextFrameRunnerQueue.add(() -\u003e\n\t\t\t\t{\n\t\t\t\t\tlastWorld \u003d client.getWorld();\n\t\t\t\t\ttransmogManager.saveCurrent();\n\t\t\t\t\ttransmogManager.loadData();\n\t\t\t\t\ttransmogManager.updateTransmog();\n\t\t\t\t\tuiManager.createTab(uiManager.getEquipmentOverlay());\n\t\t\t\t\tupdatePvpState();\n\t\t\t\t\tupdateEquipmentState();\n\t\t\t\t});\n\t\t}\n\t}\n\n\t@Override\n\tpublic void shutDown()\n\t{\n\t\tspriteManager.removeSpriteOverrides(CustomSprites.values());\n\t\tmouseManager.unregisterMouseWheelListener(this);\n\t\tlastWorld \u003d 0;\n\t\tclientThread.invoke(() -\u003e\n\t\t{\n\t\t\ttransmogManager.shutDown();\n\t\t\tuiManager.shutDown();\n\t\t\tpartyManager.clearSharedPreset();\n\t\t\twsClient.unregisterMessage(TransmogUpdateMessage.class);\n\t\t});\n\t}\n\n\t/**\n\t * This plugin is modelled after RS3\u0027s Transmog system, which is disabled in PvP\n\t * While that\u0027s because theirs is transmitted to other clients, I\u0027d rather my\n\t * code not mess with something where gear switches matter massively, just in case.\n\t */\n\tprivate void updatePvpState()\n\t{\n\t\tfinal boolean newState \u003d client.getVarbitValue(Varbits.PVP_SPEC_ORB) \u003d\u003d 1;\n\n\t\tif (newState !\u003d transmogManager.isInPvpSituation())\n\t\t{\n\t\t\ttransmogManager.onPvpChanged(newState);\n\t\t\tuiManager.onPvpChanged(newState);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged e)\n\t{\n\t\tif (e.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tif (client.getWorld() !\u003d lastWorld)\n\t\t\t{\n\t\t\t\ttransmogManager.setReady(false);\n\t\t\t\tnextFrameRunnerQueue.add(() -\u003e\n\t\t\t\t{\n\t\t\t\t\tlastWorld \u003d client.getWorld();\n\t\t\t\t\ttransmogManager.loadData();\n\t\t\t\t\tupdateEquipmentState();\n\t\t\t\t\tpartyManager.shareCurrentPreset();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (uiManager.isUiCreated() \u0026\u0026 !uiManager.isVanillaUIHidden())\n\t\t\t{\n\t\t\t\tuiManager.removeCustomUI();\n\t\t\t\tuiManager.createTab(uiManager.getEquipmentOverlay());\n\t\t\t}\n\t\t}\n\t\telse if (e.getGameState() \u003d\u003d GameState.LOGIN_SCREEN || e.getGameState() \u003d\u003d GameState.HOPPING)\n\t\t{\n\t\t\tfirstContainerChangeFlag \u003d true;\n\t\t\tlastWorld \u003d 0;\n\t\t\tuiManager.setUiCreated(false);\n\t\t\ttransmogManager.clearUserStates();\n\t\t}\n\t}\n\n\t/**\n\t * Changing equipment removes the current transmog. Reapply if active,\n\t * or keep track of the real state if not active\n\t */\n\t@Subscribe\n\tpublic void onItemContainerChanged(ItemContainerChanged e)\n\t{\n\t\tif (e.getContainerId() !\u003d InventoryID.EQUIPMENT.getId())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tupdateEquipmentState();\n\n\t\tif (!config.transmogActive())\n\t\t{\n\t\t\ttransmogManager.saveCurrent();\n\t\t\treturn;\n\t\t}\n\n\t\tif (firstContainerChangeFlag)\n\t\t{\n\t\t\tfirstContainerChangeFlag \u003d false;\n\t\t\treturn;\n\t\t}\n\t\ttransmogManager.reapplyTransmog();\n\t}\n\n\tprivate void updateEquipmentState()\n\t{\n\t\tItemContainer ic \u003d client.getItemContainer(InventoryID.EQUIPMENT);\n\n\t\tboolean emptyEquipment \u003d ic \u003d\u003d null ||\n\t\t\tArrays.stream(ic.getItems()).distinct().noneMatch(i -\u003e i !\u003d null \u0026\u0026 i.getId() !\u003d -1);\n\n\t\ttransmogManager.setEmptyEquipment(emptyEquipment);\n\t\tuiManager.updateTutorial(emptyEquipment);\n\t}\n\n\t@Subscribe\n\tpublic void onVarbitChanged(VarbitChanged e)\n\t{\n\t\tupdatePvpState();\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick e)\n\t{\n\t\tpartyManager.onGameTick();\n\t\tif (nextFrameRunnerQueue.size() \u003e 0)\n\t\t{\n\t\t\tRunnable r \u003d nextFrameRunnerQueue.poll();\n\t\t\tdo\n\t\t\t{\n\t\t\t\tr.run();\n\t\t\t\tr \u003d nextFrameRunnerQueue.poll();\n\t\t\t}\n\t\t\twhile (r !\u003d null);\n\t\t}\n\n\t\tif (client.getLocalPlayer() \u003d\u003d null || !config.transmogActive())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// On most teleports, the player kits are reset. This will reapply the transmog if needed.\n\t\tfinal int currentHash \u003d Arrays.hashCode(client.getLocalPlayer().getPlayerComposition().getEquipmentIds());\n\t\tif (currentHash !\u003d transmogManager.getTransmogHash() \u0026\u0026 transmogManager.isDefaultStateSet())\n\t\t{\n\t\t\ttransmogManager.reapplyTransmog();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onPlayerChanged(PlayerChanged e)\n\t{\n\t\t// Update party members transmogs when they change armour\n\t\tif (e.getPlayer() !\u003d client.getLocalPlayer())\n\t\t{\n\t\t\tpartyManager.onPlayerSpawned(e.getPlayer());\n\t\t\treturn;\n\t\t}\n\n\t\tif (!transmogManager.isReady() || client.getLocalPlayer() \u003d\u003d null || !config.transmogActive())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal int currentHash \u003d Arrays.hashCode(client.getLocalPlayer().getPlayerComposition().getEquipmentIds());\n\t\tif (currentHash !\u003d transmogManager.getTransmogHash())\n\t\t{\n\t\t\ttransmogManager.reapplyTransmog();\n\t\t}\n\t}\n\n\t// Party events\n\n\t@Subscribe\n\tpublic void onPlayerSpawned(PlayerSpawned e)\n\t{\n\t\tpartyManager.onPlayerSpawned(e.getPlayer());\n\t}\n\n\t@Subscribe\n\tpublic void onPlayerDespawned(PlayerDespawned e)\n\t{\n\t\tpartyManager.onPlayerDespawned(e.getPlayer());\n\t}\n\n\t@Subscribe\n\tpublic void onTransmogUpdateMessage(TransmogUpdateMessage e)\n\t{\n\t\tpartyManager.onTransmogUpdateMessage(e);\n\t}\n\n\t@Subscribe\n\tpublic void onStatusUpdate(StatusUpdate e)\n\t{\n\t\tpartyManager.onStatusUpdate();\n\t}\n\n\t@Subscribe\n\tpublic void onUserSync(UserSync e)\n\t{\n\t\tpartyManager.onStatusUpdate();\n\t}\n\n\t@Subscribe\n\tpublic void onUserJoin(UserJoin e)\n\t{\n\t\tpartyManager.shareCurrentPreset();\n\t}\n\n\t@Subscribe\n\tpublic void onUserPart(UserPart e)\n\t{\n\t\tpartyManager.clearUser(e.getMemberId());\n\t}\n\n\t@Subscribe\n\tpublic void onPartyChanged(PartyChanged e)\n\t{\n\t\tRunnable runner \u003d partyManager.onPartyChanged(e);\n\t\tif (runner !\u003d null)\n\t\t{\n\t\t\tnextFrameRunnerQueue.add(runner);\n\t\t}\n\t}\n\n\t// UI Events\n\n\t@Subscribe\n\tpublic void onResizeableChanged(ResizeableChanged e)\n\t{\n\t\tuiManager.onResizeableChanged();\n\t}\n\n\t@Subscribe\n\tpublic void onScriptPostFired(ScriptPostFired e)\n\t{\n\t\tif (e.getScriptId() \u003d\u003d SCRIPT_ID_EQUIPMENT_TAB_CREATED \u0026\u0026 !uiManager.isUiCreated())\n\t\t{\n\t\t\tuiManager.createTab(uiManager.getEquipmentOverlay());\n\t\t\tuiManager.setUiCreated(true);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onClientTick(ClientTick e)\n\t{\n\t\tuiManager.onClientTick();\n\t}\n\n\t/**\n\t * 3 of the UI buttons have a specific name. CustomWidget adds colouring to emulate vanilla, meaning\n\t * you get the name in FORCE_RIGHT_CLICK_MENU_FLAG. This is used both to hide the widget name\n\t * (since it\u0027s in the wrong place), and to give an easy way to check if we should force a right click.\n\t */\n\t@Subscribe\n\tpublic void onMenuEntryAdded(MenuEntryAdded e)\n\t{\n\t\tif (e.getTarget().equals(FORCE_RIGHT_CLICK_MENU_FLAG))\n\t\t{\n\t\t\tforceRightClickFlag \u003d true;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onMenuShouldLeftClick(MenuShouldLeftClick e)\n\t{\n\t\tif (!forceRightClickFlag)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tforceRightClickFlag \u003d false;\n\t\tMenuEntry[] menuEntries \u003d client.getMenuEntries();\n\t\tfor (MenuEntry entry : menuEntries)\n\t\t{\n\t\t\tif (entry.getTarget().equals(FORCE_RIGHT_CLICK_MENU_FLAG))\n\t\t\t{\n\t\t\t\te.setForceRightClick(true);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\t@Override\n\tpublic MouseWheelEvent mouseWheelMoved(MouseWheelEvent event)\n\t{\n\t\tuiManager.mouseWheelMoved(event);\n\t\treturn event;\n\t}\n\t\n\tpublic BodyKit getBodyKit()\n\t{\n\t\tif (client.getLocalPlayer() \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\treturn client.getLocalPlayer().getPlayerComposition().isFemale() ? BodyKit.FEMME : BodyKit.MASC;\n\t}\n\n\tpublic UIManager getUIManager()\n\t{\n\t\treturn uiManagerProvider.get();\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\TransmogrificationPlugin.java"},{"fileName":"TransmogSlot.java","content":"/*\n * Copyright (c) 2020, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog;\n\nimport io.hydrox.transmog.ui.CustomSprites;\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.api.SpriteID;\nimport net.runelite.client.util.Text;\nimport java.util.HashMap;\nimport java.util.Map;\n\n@RequiredArgsConstructor\npublic enum TransmogSlot\n{\n\tHEAD(0, SpriteID.EQUIPMENT_SLOT_HEAD, SlotType.ITEM),\n\tCAPE(1, SpriteID.EQUIPMENT_SLOT_CAPE, SlotType.ITEM),\n\tNECK(2, SpriteID.EQUIPMENT_SLOT_NECK, SlotType.ITEM),\n\tTORSO(4, SpriteID.EQUIPMENT_SLOT_TORSO, SlotType.ITEM),\n\tSLEEVES(6, CustomSprites.SLOT_SLEEVES.getSpriteId(), SlotType.SPECIAL),\n\tLEGS(7, SpriteID.EQUIPMENT_SLOT_LEGS, SlotType.ITEM),\n\tHAIR(8, CustomSprites.SLOT_HAIR.getSpriteId(), SlotType.SPECIAL),\n\tHANDS(9, SpriteID.EQUIPMENT_SLOT_HANDS, SlotType.ITEM),\n\tBOOTS(10, SpriteID.EQUIPMENT_SLOT_FEET, SlotType.ITEM),\n\tJAW(11, CustomSprites.SLOT_JAW.getSpriteId(), SlotType.SPECIAL);\n\n\tpublic enum SlotType\n\t{\n\t\tITEM,\n\t\tSPECIAL;\n\t}\n\n\tprivate static Map\u003cInteger, TransmogSlot\u003e INDEXES \u003d new HashMap\u003c\u003e();\n\n\tstatic\n\t{\n\t\tfor (TransmogSlot kit : values())\n\t\t{\n\t\t\tINDEXES.put(kit.getKitIndex(), kit);\n\t\t}\n\t}\n\n\t@Getter\n\tprivate final int kitIndex;\n\n\t@Getter\n\tprivate final int spriteID;\n\n\t@Getter\n\tprivate final SlotType slotType;\n\n\tstatic TransmogSlot fromIndex(int idx)\n\t{\n\t\treturn INDEXES.get(idx);\n\t}\n\n\tpublic String getName()\n\t{\n\t\treturn Text.titleCase(this);\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\TransmogSlot.java"},{"fileName":"TransmogUpdateMessage.java","content":"/*\n * Copyright (c) 2022, Enriath \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog;\n\nimport lombok.AllArgsConstructor;\nimport lombok.EqualsAndHashCode;\nimport lombok.Value;\nimport net.runelite.client.party.messages.PartyMemberMessage;\n\n@Value\n@AllArgsConstructor\n@EqualsAndHashCode(callSuper \u003d true)\npublic class TransmogUpdateMessage extends PartyMemberMessage\n{\n\tString name;\n\tString presetData;\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\TransmogUpdateMessage.java"},{"fileName":"CustomItemSearch.java","content":"/*\n * Copyright (c) 2020, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.ui;\n\nimport com.google.common.collect.Sets;\nimport com.google.inject.Inject;\nimport io.hydrox.transmog.StupidItems;\nimport io.hydrox.transmog.TransmogSlot;\nimport lombok.Setter;\nimport lombok.Value;\nimport net.runelite.api.Client;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.api.widgets.ItemQuantityMode;\nimport net.runelite.api.widgets.JavaScriptCallback;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetPositionMode;\nimport net.runelite.api.widgets.WidgetType;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.game.chatbox.ChatboxPanelManager;\nimport net.runelite.http.api.item.ItemEquipmentStats;\nimport net.runelite.http.api.item.ItemStats;\nimport com.google.inject.Singleton;\nimport java.util.HashSet;\nimport java.util.Set;\nimport java.util.function.BiConsumer;\n\n@Singleton\npublic class CustomItemSearch extends CustomSearch\n{\n\t// JMod Items\n\tprivate static final Set\u003cInteger\u003e IGNORED_ITEMS \u003d Sets.newHashSet(22664, 22665, 22666);\n\n\t@Setter\n\tprivate TransmogSlot slot;\n\n\tprivate final ItemManager itemManager;\n\n\t@Setter\n\tprotected BiConsumer\u003cInteger, String\u003e onItemSelected;\n\n\t@Value\n\tprivate static class ItemIcon\n\t{\n\t\tprivate final int modelId;\n\t\tprivate final short[] colorsToReplace;\n\t\tprivate final short[] texturesToReplace;\n\t}\n\n\t@Inject\n\tprotected CustomItemSearch(ChatboxPanelManager chatboxPanelManager, ClientThread clientThread, ItemManager itemManager, Client client)\n\t{\n\t\tsuper(chatboxPanelManager, clientThread, client);\n\t\tthis.itemManager \u003d itemManager;\n\t}\n\n\t@Override\n\tprotected void createContents(Widget container)\n\t{\n\t\tint x \u003d PADDING;\n\t\tint y \u003d PADDING * 3;\n\t\tint idx \u003d 0;\n\t\tfor (int i \u003d page * MAX_RESULTS; i \u003c (page + 1) * MAX_RESULTS \u0026\u0026 i \u003c results.size(); i++)\n\t\t{\n\t\t\tfinal ItemComposition itemComposition \u003d (ItemComposition) results.get(i);\n\t\t\tWidget item \u003d container.createChild(-1, WidgetType.GRAPHIC);\n\t\t\titem.setXPositionMode(WidgetPositionMode.ABSOLUTE_LEFT);\n\t\t\titem.setYPositionMode(WidgetPositionMode.ABSOLUTE_TOP);\n\t\t\titem.setOriginalX(x);\n\t\t\titem.setOriginalY(y + FONT_SIZE * 2);\n\t\t\titem.setOriginalHeight(ICON_HEIGHT);\n\t\t\titem.setOriginalWidth(ICON_WIDTH);\n\t\t\titem.setName(UIManager.ORANGE_COLOUR_WIDGET_NAME + itemComposition.getName());\n\t\t\titem.setItemId(itemComposition.getId());\n\t\t\titem.setItemQuantity(10000);\n\t\t\titem.setItemQuantityMode(ItemQuantityMode.NEVER);\n\t\t\titem.setBorderType(1);\n\t\t\titem.setAction(0, tooltipText);\n\t\t\titem.setHasListener(true);\n\n\t\t\tif (index \u003d\u003d idx)\n\t\t\t{\n\t\t\t\titem.setOpacity(HOVERED_OPACITY);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\titem.setOnMouseOverListener((JavaScriptCallback) ev -\u003e item.setOpacity(HOVERED_OPACITY));\n\t\t\t\titem.setOnMouseLeaveListener((JavaScriptCallback) ev -\u003e item.setOpacity(0));\n\t\t\t}\n\n\t\t\titem.setOnOpListener((JavaScriptCallback) ev -\u003e\n\t\t\t{\n\t\t\t\tif (hasCallback())\n\t\t\t\t{\n\t\t\t\t\trunCallback(itemComposition);\n\t\t\t\t}\n\n\t\t\t\tchatboxPanelManager.close();\n\t\t\t});\n\n\t\t\tx +\u003d ICON_WIDTH + PADDING;\n\t\t\tif (x + ICON_WIDTH \u003e\u003d container.getWidth())\n\t\t\t{\n\t\t\t\ty +\u003d ICON_HEIGHT + PADDING;\n\t\t\t\tx \u003d PADDING;\n\t\t\t}\n\n\t\t\titem.revalidate();\n\t\t\t++idx;\n\t\t}\n\t}\n\n\t@Override\n\tprotected void filterResults()\n\t{\n\t\tresults.clear();\n\t\tindex \u003d -1;\n\t\tString search \u003d getValue().toLowerCase();\n\t\tSet\u003cItemIcon\u003e itemIcons \u003d new HashSet\u003c\u003e();\n\n\t\tfor (int i \u003d 0; i \u003c client.getItemCount(); i++)\n\t\t{\n\t\t\tItemComposition itemComposition \u003d itemManager.getItemComposition(itemManager.canonicalize(i));\n\t\t\tItemStats itemStats \u003d itemManager.getItemStats(itemComposition.getId(), false);\n\t\t\tif (itemStats \u003d\u003d null || !itemStats.isEquipable())\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tItemEquipmentStats stats \u003d itemStats.getEquipment();\n\t\t\tString name \u003d itemComposition.getName().toLowerCase();\n\n\t\t\t// The client assigns \"null\" to item names of items it doesn\u0027t know about\n\t\t\t// and the item might already be in the results from canonicalize\n\t\t\tif (stats.getSlot() \u003d\u003d slot.getKitIndex() \u0026\u0026 name.contains(search) \u0026\u0026\n\t\t\t\t!results.contains(itemComposition) \u0026\u0026 !name.equals(\"null\") \u0026\u0026 !IGNORED_ITEMS.contains(i))\n\t\t\t{\n\t\t\t\t// Check if the results already contain the same item image\n\t\t\t\tItemIcon itemIcon \u003d new ItemIcon(itemComposition.getInventoryModel(),\n\t\t\t\t\titemComposition.getColorToReplaceWith(), itemComposition.getTextureToReplaceWith());\n\t\t\t\tif (itemIcons.contains(itemIcon))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\titemIcons.add(itemIcon);\n\t\t\t\tresults.add(itemComposition);\n\t\t\t}\n\t\t}\n\t}\n\n\t@Override\n\tprotected void runCallback(Object o)\n\t{\n\t\tItemComposition ic \u003d (ItemComposition) o;\n\t\tonItemSelected.accept(StupidItems.convertId(ic.getId()), ic.getName());\n\t}\n\n\t@Override\n\tprotected boolean hasCallback()\n\t{\n\t\treturn onItemSelected !\u003d null;\n\t}\n}","filePath":"src\\main\\java\\io\\hydrox\\transmog\\ui\\CustomItemSearch.java"},{"fileName":"CustomSearch.java","content":"/*\n * Copyright (c) 2020, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.ui;\n\nimport com.google.common.primitives.Ints;\nimport net.runelite.api.Client;\nimport net.runelite.api.SpriteID;\nimport net.runelite.api.widgets.JavaScriptCallback;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetPositionMode;\nimport net.runelite.api.widgets.WidgetSizeMode;\nimport net.runelite.api.widgets.WidgetTextAlignment;\nimport net.runelite.api.widgets.WidgetType;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.game.chatbox.ChatboxPanelManager;\nimport net.runelite.client.game.chatbox.ChatboxTextInput;\nimport java.awt.event.KeyEvent;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.Consumer;\n\n// Based on ChatboxItemSearch.java\npublic abstract class CustomSearch extends ChatboxTextInput\n{\n\tprotected static final int ICON_HEIGHT \u003d 32;\n\tprotected static final int ICON_WIDTH \u003d 36;\n\tprotected static final int PADDING \u003d 6;\n\tprotected static final int MAX_RESULTS \u003d 24;\n\tprotected static final int FONT_SIZE \u003d 16;\n\tprotected static final int HOVERED_OPACITY \u003d 128;\n\n\tprotected final ChatboxPanelManager chatboxPanelManager;\n\tprotected final Client client;\n\n\tprotected List\u003cObject\u003e results \u003d new ArrayList\u003c\u003e();\n\n\tprotected String tooltipText;\n\tprotected int index \u003d -1;\n\tprotected int page \u003d 0;\n\n\tprotected CustomSearch(ChatboxPanelManager chatboxPanelManager, ClientThread clientThread, Client client)\n\t{\n\t\tsuper(chatboxPanelManager, clientThread);\n\t\tthis.chatboxPanelManager \u003d chatboxPanelManager;\n\t\tthis.client \u003d client;\n\n\t\tlines(1);\n\t\tonChanged(searchString -\u003e\n\t\t\tclientThread.invokeLater(() -\u003e\n\t\t\t{\n\t\t\t\tfilterResults();\n\t\t\t\tupdate();\n\t\t\t}));\n\t}\n\n\t@Override\n\tprotected void open() {\n\t\tfilterResults();\n\t\tsuper.open();\n\t}\n\n\t@Override\n\tprotected void update()\n\t{\n\t\tWidget container \u003d chatboxPanelManager.getContainerWidget();\n\t\tcontainer.deleteAllChildren();\n\n\t\tWidget promptWidget \u003d container.createChild(-1, WidgetType.TEXT);\n\t\tpromptWidget.setText(getPrompt());\n\t\tpromptWidget.setTextColor(0x800000);\n\t\tpromptWidget.setFontId(getFontID());\n\t\tpromptWidget.setOriginalX(0);\n\t\tpromptWidget.setOriginalY(5);\n\t\tpromptWidget.setXPositionMode(WidgetPositionMode.ABSOLUTE_CENTER);\n\t\tpromptWidget.setYPositionMode(WidgetPositionMode.ABSOLUTE_TOP);\n\t\tpromptWidget.setOriginalHeight(FONT_SIZE);\n\t\tpromptWidget.setXTextAlignment(WidgetTextAlignment.CENTER);\n\t\tpromptWidget.setYTextAlignment(WidgetTextAlignment.CENTER);\n\t\tpromptWidget.setWidthMode(WidgetSizeMode.MINUS);\n\t\tpromptWidget.revalidate();\n\n\t\tbuildEdit(0, 5 + FONT_SIZE, container.getWidth(), FONT_SIZE);\n\n\t\tWidget separator \u003d container.createChild(-1, WidgetType.LINE);\n\t\tseparator.setOriginalX(0);\n\t\tseparator.setOriginalY(8 + (FONT_SIZE * 2));\n\t\tseparator.setXPositionMode(WidgetPositionMode.ABSOLUTE_CENTER);\n\t\tseparator.setYPositionMode(WidgetPositionMode.ABSOLUTE_TOP);\n\t\tseparator.setOriginalHeight(0);\n\t\tseparator.setOriginalWidth(16);\n\t\tseparator.setWidthMode(WidgetSizeMode.MINUS);\n\t\tseparator.setTextColor(0x666666);\n\t\tseparator.revalidate();\n\n\t\t// Make sure the page is always valid, even when narrowing a search while looking at a higher page\n\t\t// This is preferable to resetting the page to 1 each time.\n\t\tint lastPage \u003d results.size() / MAX_RESULTS;\n\t\tif (page \u003e lastPage)\n\t\t{\n\t\t\tpage \u003d lastPage;\n\t\t}\n\n\t\tWidget pageBack \u003d container.createChild(-1, WidgetType.GRAPHIC);\n\t\tpageBack.setHidden(page \u003d\u003d 0 || results.isEmpty());\n\t\tpageBack.setAction(0, \"Previous Page\");\n\t\tpageBack.setSpriteId(SpriteID.BACK_ARROW_BUTTON_SMALL);\n\t\tpageBack.setOriginalWidth(20);\n\t\tpageBack.setOriginalHeight(20);\n\t\tpageBack.setOriginalX(container.getWidth() - 90);\n\t\tpageBack.setOriginalY(0);\n\t\tpageBack.setOnOpListener((JavaScriptCallback) e -\u003e\n\t\t{\n\t\t\tpage \u003d page \u003c\u003d 0 ? 0 : page - 1;\n\t\t\tupdate();\n\t\t});\n\t\tpageBack.setHasListener(true);\n\t\tpageBack.revalidate();\n\n\t\tWidget pageNum \u003d container.createChild(-1, WidgetType.TEXT);\n\t\t// We don\u0027t want to show the page number if there\u0027s only one page\n\t\tpageNum.setHidden((isSearchOnLastPage() \u0026\u0026 page \u003d\u003d 0) || results.isEmpty());\n\t\tpageNum.setFontId(495);\n\t\tpageNum.setText((page + 1) + \"\");\n\t\tpageNum.setOriginalWidth(20);\n\t\tpageNum.setOriginalHeight(20);\n\t\tpageNum.setOriginalX(container.getWidth() - 70);\n\t\tpageNum.setOriginalY(2);\n\t\tpageNum.setXTextAlignment(WidgetTextAlignment.CENTER);\n\t\tpageNum.setYTextAlignment(WidgetTextAlignment.CENTER);\n\t\tpageNum.revalidate();\n\n\t\tWidget pageNext \u003d container.createChild(-1, WidgetType.GRAPHIC);\n\t\tpageNext.setHidden(isSearchOnLastPage() || results.isEmpty());\n\t\tpageNext.setAction(0, \"Next Page\");\n\t\tpageNext.setSpriteId(SpriteID.FORWARD_ARROW_BUTTON_SMALL);\n\t\tpageNext.setOriginalWidth(20);\n\t\tpageNext.setOriginalHeight(20);\n\t\tpageNext.setOriginalX(container.getWidth() - 50);\n\t\tpageNext.setOriginalY(0);\n\t\tpageNext.setOnOpListener((JavaScriptCallback) e -\u003e\n\t\t{\n\t\t\tpage \u003d isSearchOnLastPage() ? page : page + 1;\n\t\t\tupdate();\n\t\t});\n\t\tpageNext.setHasListener(true);\n\t\tpageNext.revalidate();\n\n\t\tWidget exit \u003d container.createChild(-1, WidgetType.GRAPHIC);\n\t\texit.setOriginalX(container.getWidth() - 20);\n\t\texit.setOriginalY(0);\n\t\texit.setOriginalWidth(20);\n\t\texit.setOriginalHeight(20);\n\t\texit.setSpriteId(SpriteID.GE_CANCEL_OFFER_BUTTON);\n\t\texit.setAction(0, \"Close\");\n\t\texit.setOnOpListener((JavaScriptCallback) e -\u003e chatboxPanelManager.close());\n\t\texit.setOnMouseRepeatListener((JavaScriptCallback) e -\u003e exit.setSpriteId(SpriteID.GE_CANCEL_OFFER_BUTTON_HOVERED));\n\t\texit.setOnMouseLeaveListener((JavaScriptCallback) e -\u003e exit.setSpriteId(SpriteID.GE_CANCEL_OFFER_BUTTON));\n\t\texit.setHasListener(true);\n\t\texit.revalidate();\n\n\t\tcreateContents(container);\n\t}\n\n\tprotected abstract void createContents(Widget container);\n\n\t@Override\n\tpublic void keyPressed(KeyEvent ev)\n\t{\n\t\tswitch (ev.getKeyCode())\n\t\t{\n\t\t\tcase KeyEvent.VK_ENTER:\n\t\t\t\tev.consume();\n\t\t\t\tif (index \u003e -1)\n\t\t\t\t{\n\t\t\t\t\tif (hasCallback())\n\t\t\t\t\t{\n\t\t\t\t\t\trunCallback(results.get(index));\n\t\t\t\t\t}\n\n\t\t\t\t\tchatboxPanelManager.close();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase KeyEvent.VK_TAB:\n\t\t\tcase KeyEvent.VK_RIGHT:\n\t\t\t\tev.consume();\n\t\t\t\tif (!results.isEmpty())\n\t\t\t\t{\n\t\t\t\t\tindex++;\n\t\t\t\t\tif (index \u003e\u003d results.size())\n\t\t\t\t\t{\n\t\t\t\t\t\tindex \u003d 0;\n\t\t\t\t\t}\n\t\t\t\t\tclientThread.invokeLater(this::update);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase KeyEvent.VK_LEFT:\n\t\t\t\tev.consume();\n\t\t\t\tif (!results.isEmpty())\n\t\t\t\t{\n\t\t\t\t\tindex--;\n\t\t\t\t\tif (index \u003c 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tindex \u003d results.size() - 1;\n\t\t\t\t\t}\n\t\t\t\t\tclientThread.invokeLater(this::update);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase KeyEvent.VK_UP:\n\t\t\t\tev.consume();\n\t\t\t\tif (results.size() \u003e\u003d (MAX_RESULTS / 2))\n\t\t\t\t{\n\t\t\t\t\tindex -\u003d MAX_RESULTS / 2;\n\t\t\t\t\tif (index \u003c 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (results.size() \u003d\u003d MAX_RESULTS)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tindex +\u003d results.size();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tindex +\u003d MAX_RESULTS;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tindex \u003d Ints.constrainToRange(index, 0, results.size() - 1);\n\t\t\t\t\t}\n\n\t\t\t\t\tclientThread.invokeLater(this::update);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase KeyEvent.VK_DOWN:\n\t\t\t\tev.consume();\n\t\t\t\tif (results.size() \u003e\u003d (MAX_RESULTS / 2))\n\t\t\t\t{\n\t\t\t\t\tindex +\u003d MAX_RESULTS / 2;\n\t\t\t\t\tif (index \u003e\u003d MAX_RESULTS)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (results.size() \u003d\u003d MAX_RESULTS)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tindex -\u003d results.size();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tindex -\u003d MAX_RESULTS;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tindex \u003d Ints.constrainToRange(index, 0, results.size() - 1);\n\t\t\t\t\t}\n\n\t\t\t\t\tclientThread.invokeLater(this::update);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tsuper.keyPressed(ev);\n\t\t}\n\t}\n\n\t@Override\n\tprotected void close()\n\t{\n\t\t// Clear search string when closed\n\t\tvalue(\"\");\n\t\tresults.clear();\n\t\tindex \u003d -1;\n\t\tpage \u003d 0;\n\t\tsuper.close();\n\t}\n\n\t@Override\n\t@Deprecated\n\tpublic ChatboxTextInput onDone(Consumer\u003cString\u003e onDone)\n\t{\n\t\tthrow new UnsupportedOperationException();\n\t}\n\n\tprotected abstract void filterResults();\n\n\tprotected abstract void runCallback(Object o);\n\n\tprotected abstract boolean hasCallback();\n\n\tpublic void setTooltipText(final String text)\n\t{\n\t\ttooltipText \u003d text;\n\t}\n\n\tpublic void setPrompt(String prompt)\n\t{\n\t\tsuper.prompt(prompt);\n\t}\n\n\tprivate boolean isSearchOnLastPage()\n\t{\n\t\treturn (page + 1) * MAX_RESULTS \u003e\u003d results.size();\n\t}\n}","filePath":"src\\main\\java\\io\\hydrox\\transmog\\ui\\CustomSearch.java"},{"fileName":"CustomSprites.java","content":"/*\n * Copyright (c) 2020, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.ui;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.client.game.SpriteOverride;\n\n@RequiredArgsConstructor\npublic enum CustomSprites implements SpriteOverride\n{\n\tTRANSMOG_LOGO(-4365, \"transmog.png\"),\n\tTUTORIAL_ARROW(-4368, \"arrow.png\"),\n\tSLOT_HAIR(-4369, \"hair.png\"),\n\tSLOT_JAW(-4370, \"jaw.png\"),\n\tSLOT_SLEEVES(-4371, \"sleeves.png\"),\n\tQUESTION_MARK(-4372, \"questionmark.png\"),\n\tADD(-4373, \"add.png\"),\n\tPARTY(-4374, \"party.png\");\n\n\t@Getter\n\tprivate final int spriteId;\n\n\t@Getter\n\tprivate final String fileName;\n}","filePath":"src\\main\\java\\io\\hydrox\\transmog\\ui\\CustomSprites.java"},{"fileName":"CustomSpriteSearch.java","content":"/*\n * Copyright (c) 2020, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.ui;\n\nimport com.google.inject.Inject;\nimport com.google.inject.Singleton;\nimport io.hydrox.transmog.Mapping;\nimport io.hydrox.transmog.MappingMapping;\nimport io.hydrox.transmog.TransmogSlot;\nimport io.hydrox.transmog.TransmogrificationPlugin;\nimport lombok.Setter;\nimport net.runelite.api.Client;\nimport net.runelite.api.widgets.JavaScriptCallback;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetPositionMode;\nimport net.runelite.api.widgets.WidgetType;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.game.chatbox.ChatboxPanelManager;\nimport java.util.function.Consumer;\n\n@Singleton\npublic class CustomSpriteSearch extends CustomSearch\n{\n\tprivate final TransmogrificationPlugin plugin;\n\n\t@Setter\n\tprotected Consumer\u003cMapping\u003e onItemSelected;\n\n\t@Setter\n\tprivate Mapping[] source;\n\n\t@Setter\n\tprivate TransmogSlot slot;\n\n\t@Inject\n\tprivate CustomSpriteSearch(ChatboxPanelManager chatboxPanelManager, ClientThread clientThread,\n\t\t\t\t\t\t\t   Client client, TransmogrificationPlugin plugin)\n\t{\n\t\tsuper(chatboxPanelManager, clientThread, client);\n\t\tthis.plugin \u003d plugin;\n\t}\n\n\t@Override\n\tprotected void createContents(Widget container)\n\t{\n\t\tMappingMapping mappingMapping \u003d MappingMapping.fromSlot(slot);\n\t\tint x \u003d PADDING;\n\t\tint y \u003d PADDING * 3;\n\t\tint idx \u003d 0;\n\t\tfor (int i \u003d page * MAX_RESULTS; i \u003c (page + 1) * MAX_RESULTS \u0026\u0026 i \u003c results.size(); i++)\n\t\t{\n\t\t\tfinal Mapping mapping \u003d (Mapping) results.get(i);\n\n\t\t\tWidget model \u003d container.createChild(-1, WidgetType.MODEL);\n\t\t\tmodel.setXPositionMode(WidgetPositionMode.ABSOLUTE_LEFT);\n\t\t\tmodel.setYPositionMode(WidgetPositionMode.ABSOLUTE_TOP);\n\t\t\tmodel.setOriginalX(x);\n\t\t\tmodel.setOriginalY(y + FONT_SIZE * 2 + mappingMapping.getYOffset());\n\t\t\tmodel.setOriginalHeight(ICON_HEIGHT);\n\t\t\tmodel.setOriginalWidth(ICON_WIDTH);\n\t\t\tmodel.setModelId(mapping.modelId());\n\t\t\tmodel.setModelZoom(mappingMapping.getModelZoom());\n\t\t\tmodel.setRotationZ(150);\n\n\t\t\tWidget clickBox \u003d container.createChild(-1, WidgetType.RECTANGLE);\n\t\t\tclickBox.setOpacity(255);\n\t\t\tclickBox.setXPositionMode(WidgetPositionMode.ABSOLUTE_LEFT);\n\t\t\tclickBox.setYPositionMode(WidgetPositionMode.ABSOLUTE_TOP);\n\t\t\tclickBox.setOriginalX(x);\n\t\t\tclickBox.setOriginalY(y + FONT_SIZE * 2);\n\t\t\tclickBox.setOriginalHeight(ICON_HEIGHT);\n\t\t\tclickBox.setOriginalWidth(ICON_WIDTH);\n\t\t\tclickBox.setName(UIManager.ORANGE_COLOUR_WIDGET_NAME + mapping.prettyName());\n\t\t\tclickBox.setAction(0, tooltipText);\n\t\t\tclickBox.setHasListener(true);\n\n\t\t\tif (index \u003d\u003d idx)\n\t\t\t{\n\t\t\t\tmodel.setOpacity(HOVERED_OPACITY);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tclickBox.setOnMouseOverListener((JavaScriptCallback) ev -\u003e model.setOpacity(HOVERED_OPACITY));\n\t\t\t\tclickBox.setOnMouseLeaveListener((JavaScriptCallback) ev -\u003e model.setOpacity(0));\n\t\t\t}\n\n\t\t\tclickBox.setOnOpListener((JavaScriptCallback) ev -\u003e\n\t\t\t{\n\t\t\t\tif (hasCallback())\n\t\t\t\t{\n\t\t\t\t\trunCallback(mapping);\n\t\t\t\t}\n\n\t\t\t\tchatboxPanelManager.close();\n\t\t\t});\n\n\t\t\tx +\u003d ICON_WIDTH + PADDING;\n\t\t\tif (x + ICON_WIDTH \u003e\u003d container.getWidth())\n\t\t\t{\n\t\t\t\ty +\u003d ICON_HEIGHT + PADDING;\n\t\t\t\tx \u003d PADDING;\n\t\t\t}\n\n\t\t\tmodel.revalidate();\n\t\t\tclickBox.revalidate();\n\t\t\t++idx;\n\t\t}\n\t}\n\n\t@Override\n\tprotected void filterResults()\n\t{\n\t\tresults.clear();\n\t\tindex \u003d -1;\n\t\tString search \u003d getValue().toLowerCase();\n\n\t\tfor (Mapping mapping : source)\n\t\t{\n\t\t\tif (mapping.prettyName().toLowerCase().contains(search) \u0026\u0026\n\t\t\t\tmapping.bodyKit() \u003d\u003d plugin.getBodyKit())\n\t\t\t{\n\t\t\t\tresults.add(mapping);\n\t\t\t}\n\t\t}\n\t}\n\n\t@Override\n\tprotected void runCallback(Object o)\n\t{\n\t\tonItemSelected.accept((Mapping) o);\n\t}\n\n\t@Override\n\tprotected boolean hasCallback()\n\t{\n\t\treturn onItemSelected !\u003d null;\n\t}\n}","filePath":"src\\main\\java\\io\\hydrox\\transmog\\ui\\CustomSpriteSearch.java"},{"fileName":"CustomTab.java","content":"/*\n * Copyright (c) 2021, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.ui;\n\nimport io.hydrox.transmog.TransmogPreset;\nimport java.awt.event.MouseWheelEvent;\n\npublic abstract class CustomTab\n{\n\tvoid shutDown(){}\n\n\tabstract void create();\n\n\tvoid destroy(){}\n\n\tvoid onPvpChanged(boolean newValue){}\n\n\tvoid loadPreset(TransmogPreset preset){}\n\n\tvoid onClientTick(){}\n\n\tvoid updateTutorial(boolean newState){}\n\n\tvoid mouseWheelMoved(MouseWheelEvent event){}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\ui\\CustomTab.java"},{"fileName":"CustomWidget.java","content":"/*\n * Copyright (c) 2020, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.ui;\n\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetType;\nimport java.awt.Color;\n\npublic abstract class CustomWidget\n{\n\tprotected final Widget parent;\n\tprivate final String name;\n\n\tprotected int x;\n\tprotected int y;\n\tprotected int width;\n\tprotected int height;\n\n\tprotected Widget base;\n\n\tpublic CustomWidget(final Widget parent, final String name)\n\t{\n\t\tthis.parent \u003d parent;\n\t\tthis.name \u003d name;\n\t}\n\n\tpublic void setSize(int width, int height)\n\t{\n\t\tthis.width \u003d width;\n\t\tthis.height \u003d height;\n\t}\n\n\tpublic void layout(int x, int y)\n\t{\n\t\tthis.x \u003d x;\n\t\tthis.y \u003d y;\n\t}\n\n\tpublic abstract void create();\n\n\tprotected Widget createSpriteWidget(int width, int height)\n\t{\n\t\tfinal Widget w \u003d parent.createChild(-1, WidgetType.GRAPHIC);\n\t\tw.setOriginalWidth(width);\n\t\tw.setOriginalHeight(height);\n\t\tw.setName(UIManager.ORANGE_COLOUR_WIDGET_NAME + this.name);\n\t\treturn w;\n\t}\n\n\tprotected Widget createModelWidget(int width, int height)\n\t{\n\t\tfinal Widget w \u003d parent.createChild(-1, WidgetType.MODEL);\n\t\tw.setOriginalWidth(width);\n\t\tw.setOriginalHeight(height);\n\t\tw.setName(UIManager.ORANGE_COLOUR_WIDGET_NAME + this.name);\n\t\treturn w;\n\t}\n\n\tprotected Widget createTextWidget(String text)\n\t{\n\t\tfinal Widget w \u003d parent.createChild(-1, WidgetType.TEXT);\n\t\tw.setText(text);\n\t\tw.setTextShadowed(true);\n\t\treturn w;\n\t}\n\n\tprotected static void layoutWidget(Widget w, int x, int y)\n\t{\n\t\tw.setOriginalX(x);\n\t\tw.setOriginalY(y);\n\t\tw.revalidate();\n\t}\n\n\tprotected static int fromRGB(Color c)\n\t{\n\t\treturn fromRGB(c.getRed(), c.getGreen(), c.getBlue());\n\t}\n\n\tprotected static int fromRGB(int r, int g, int b)\n\t{\n\t\treturn (r \u003c\u003c 16) + (g \u003c\u003c 8) + b;\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\ui\\CustomWidget.java"},{"fileName":"CustomWidgetActionButton.java","content":"/*\n * Copyright (c) 2020, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.ui;\n\nimport net.runelite.api.ScriptEvent;\nimport net.runelite.api.SpriteID;\nimport net.runelite.api.widgets.JavaScriptCallback;\nimport net.runelite.api.widgets.Widget;\n\npublic class CustomWidgetActionButton extends CustomWidgetWithIcon implements InteractibleWidget\n{\n\tstatic final int BORDER_SIZE \u003d 9;\n\n\tprivate Widget overlay;\n\n\tprivate Widget topLeftBrace;\n\tprivate Widget topRightBrace;\n\tprivate Widget bottomLeftBrace;\n\tprivate Widget bottomRightBrace;\n\n\tprivate Widget leftSide;\n\tprivate Widget topSide;\n\tprivate Widget rightSide;\n\tprivate Widget bottomSide;\n\n\tprotected final WidgetIntCallback callback;\n\n\tpublic CustomWidgetActionButton(final Widget parent, final String name, int iconSprite, final WidgetIntCallback callback)\n\t{\n\t\tsuper(parent, name, iconSprite);\n\t\tthis.callback \u003d callback;\n\t}\n\n\t@Override\n\tpublic void create()\n\t{\n\t\ttopLeftBrace \u003d createSpriteWidget(BORDER_SIZE, BORDER_SIZE);\n\t\ttopRightBrace \u003d createSpriteWidget(BORDER_SIZE, BORDER_SIZE);\n\t\tbottomLeftBrace \u003d createSpriteWidget(BORDER_SIZE, BORDER_SIZE);\n\t\tbottomRightBrace \u003d createSpriteWidget(BORDER_SIZE, BORDER_SIZE);\n\n\t\tleftSide \u003d createSpriteWidget(BORDER_SIZE, height - BORDER_SIZE * 2);\n\t\ttopSide \u003d createSpriteWidget(width - BORDER_SIZE * 2, BORDER_SIZE);\n\t\trightSide \u003d createSpriteWidget(BORDER_SIZE, height - BORDER_SIZE * 2);\n\t\tbottomSide \u003d createSpriteWidget(width - BORDER_SIZE * 2, BORDER_SIZE);\n\n\t\tonLeave();\n\n\t\ticon \u003d createSpriteWidget(iconWidth, iconHeight);\n\t\ticon.setSpriteId(iconSpriteID);\n\n\t\toverlay \u003d createSpriteWidget(width, height);\n\t\toverlay.setOnOpListener((JavaScriptCallback) this::onButtonClicked);\n\t\toverlay.setOnMouseRepeatListener((JavaScriptCallback) e -\u003e onHover());\n\t\toverlay.setOnMouseLeaveListener((JavaScriptCallback) e -\u003e onLeave());\n\t\toverlay.setHasListener(true);\n\t}\n\n\tpublic void addOption(int index, String action)\n\t{\n\t\toverlay.setAction(index, action);\n\t}\n\n\tpublic void setIconSprite(int spriteID)\n\t{\n\t\ticon.setSpriteId(spriteID);\n\t}\n\n\tprivate void onHover()\n\t{\n\t\ttopLeftBrace.setSpriteId(SpriteID.EQUIPMENT_BUTTON_METAL_CORNER_TOP_LEFT_HOVERED);\n\t\ttopRightBrace.setSpriteId(SpriteID.EQUIPMENT_BUTTON_METAL_CORNER_TOP_RIGHT_HOVERED);\n\t\tbottomLeftBrace.setSpriteId(SpriteID.EQUIPMENT_BUTTON_METAL_CORNER_BOTTOM_LEFT_HOVERED);\n\t\tbottomRightBrace.setSpriteId(SpriteID.EQUIPMENT_BUTTON_METAL_CORNER_BOTTOM_RIGHT_HOVERED);\n\t\tleftSide.setSpriteId(SpriteID.EQUIPMENT_BUTTON_EDGE_LEFT_HOVERED);\n\t\ttopSide.setSpriteId(SpriteID.EQUIPMENT_BUTTON_EDGE_TOP_HOVERED);\n\t\trightSide.setSpriteId(SpriteID.EQUIPMENT_BUTTON_EDGE_RIGHT_HOVERED);\n\t\tbottomSide.setSpriteId(SpriteID.EQUIPMENT_BUTTON_EDGE_BOTTOM_HOVERED);\n\t}\n\n\tprivate void onLeave()\n\t{\n\t\ttopLeftBrace.setSpriteId(SpriteID.EQUIPMENT_BUTTON_METAL_CORNER_TOP_LEFT);\n\t\ttopRightBrace.setSpriteId(SpriteID.EQUIPMENT_BUTTON_METAL_CORNER_TOP_RIGHT);\n\t\tbottomLeftBrace.setSpriteId(SpriteID.EQUIPMENT_BUTTON_METAL_CORNER_BOTTOM_LEFT);\n\t\tbottomRightBrace.setSpriteId(SpriteID.EQUIPMENT_BUTTON_METAL_CORNER_BOTTOM_RIGHT);\n\t\tleftSide.setSpriteId(SpriteID.EQUIPMENT_BUTTON_EDGE_LEFT);\n\t\ttopSide.setSpriteId(SpriteID.EQUIPMENT_BUTTON_EDGE_TOP);\n\t\trightSide.setSpriteId(SpriteID.EQUIPMENT_BUTTON_EDGE_RIGHT);\n\t\tbottomSide.setSpriteId(SpriteID.EQUIPMENT_BUTTON_EDGE_BOTTOM);\n\t}\n\n\t@Override\n\tpublic void layout(int x, int y)\n\t{\n\t\tlayoutWidget(overlay, x, y);\n\n\t\tlayoutWidget(topLeftBrace, x, y);\n\t\tlayoutWidget(topRightBrace, x + width - BORDER_SIZE, y);\n\t\tlayoutWidget(bottomLeftBrace, x, y + height - BORDER_SIZE);\n\t\tlayoutWidget(bottomRightBrace, x + width - BORDER_SIZE, y + height - BORDER_SIZE);\n\n\t\tlayoutWidget(leftSide, x, y + BORDER_SIZE);\n\t\tlayoutWidget(topSide, x + BORDER_SIZE, y);\n\t\tlayoutWidget(rightSide, x + width - BORDER_SIZE, y + BORDER_SIZE);\n\t\tlayoutWidget(bottomSide, x + BORDER_SIZE, y + height - BORDER_SIZE);\n\n\t\tsuper.layout(x, y);\n\t}\n\n\t@Override\n\tpublic void onButtonClicked(ScriptEvent scriptEvent)\n\t{\n\t\t// For whatever reason, the Op for an option is always 1 higher than the given index. MAGIC!\n\t\tcallback.run(scriptEvent.getOp() - 1);\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\ui\\CustomWidgetActionButton.java"},{"fileName":"CustomWidgetActionButtonWithText.java","content":"/*\n * Copyright (c) 2020, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.ui;\n\nimport net.runelite.api.FontID;\nimport net.runelite.api.ScriptEvent;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetTextAlignment;\nimport java.awt.Color;\n\npublic class CustomWidgetActionButtonWithText extends CustomWidgetActionButton\n{\n\tprivate String initialText;\n\n\tprivate Widget text;\n\n\tpublic CustomWidgetActionButtonWithText(Widget parent, String name, int spriteId, String initialText, WidgetIntCallback callback)\n\t{\n\t\tsuper(parent, name, spriteId, callback);\n\t\tthis.initialText \u003d initialText;\n\t}\n\n\t@Override\n\tpublic void create()\n\t{\n\t\tsuper.create();\n\n\t\ttext \u003d createTextWidget(initialText);\n\t\ttext.setOriginalWidth(8);\n\t\ttext.setOriginalHeight(12);\n\t\ttext.setFontId(FontID.BARBARIAN);\n\t\ttext.setTextColor(fromRGB(Color.CYAN));\n\t\ttext.setXTextAlignment(WidgetTextAlignment.CENTER);\n\t\ttext.setYTextAlignment(WidgetTextAlignment.BOTTOM);\n\t}\n\n\tpublic void setText(String newText)\n\t{\n\t\ttext.setText(newText);\n\t}\n\n\t@Override\n\tpublic void layout(int x, int y)\n\t{\n\t\tlayoutWidget(text, x + width - 14, y + BORDER_SIZE);\n\t\tsuper.layout(x, y);\n\t}\n\n\t@Override\n\tpublic void onButtonClicked(ScriptEvent scriptEvent)\n\t{\n\t\t// For whatever reason, the Op for an option is always 1 higher than the given index. MAGIC!\n\t\tcallback.run(scriptEvent.getOp() - 1);\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\ui\\CustomWidgetActionButtonWithText.java"},{"fileName":"CustomWidgetAddPresetButton.java","content":"/*\n * Copyright (c) 2021, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.ui;\n\nimport net.runelite.api.ScriptEvent;\nimport net.runelite.api.widgets.Widget;\n\npublic class CustomWidgetAddPresetButton extends CustomWidgetPresetTabItem\n{\n\tprivate Widget iconWidget;\n\n\tpublic CustomWidgetAddPresetButton(Widget parent, String name, WidgetIntCallback callback)\n\t{\n\t\tsuper(parent, name, callback);\n\t}\n\n\t@Override\n\tpublic int getId()\n\t{\n\t\treturn -1;\n\t}\n\n\t@Override\n\tpublic void layout(int x, int y)\n\t{\n\t\tsuper.layout(x, y);\n\t\tlayoutWidget(iconWidget, x + 9, y + 10);\n\t\tparent.revalidate();\n\t}\n\n\t@Override\n\tpublic void scrollBy(int y)\n\t{\n\t\tsuper.scrollBy(y);\n\t\ticonWidget.setOriginalY(this.y - y + 10);\n\t\ticonWidget.revalidate();\n\t}\n\n\t@Override\n\tpublic void create()\n\t{\n\t\tsuper.createUnderlay();\n\t\ticonWidget \u003d createSpriteWidget(17, 17);\n\t\ticonWidget.setSpriteId(CustomSprites.ADD.getSpriteId());\n\t\tsuper.createOverlay();\n\t}\n\n\t@Override\n\tpublic void onButtonClicked(ScriptEvent scriptEvent)\n\t{\n\t\tcallback.run(-1);\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\ui\\CustomWidgetAddPresetButton.java"},{"fileName":"CustomWidgetBlockerBox.java","content":"/*\n * Copyright (c) 2020, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.ui;\n\nimport net.runelite.api.FontID;\nimport net.runelite.api.widgets.JavaScriptCallback;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetTextAlignment;\nimport net.runelite.api.widgets.WidgetType;\nimport java.awt.Color;\n\npublic class CustomWidgetBlockerBox extends CustomWidget\n{\n\tprivate static final int TOP_LEFT_CORNER_SIZE \u003d 31;\n\tprivate static final int BOTTOM_RIGHT_CORNER_SIZE \u003d 51;\n\tprivate static final int OPACITY \u003d 120;\n\n\tprivate Widget leftBar;\n\tprivate Widget middleBar;\n\tprivate Widget rightBar;\n\tprivate Widget cornerBlocker;\n\tprivate Widget textStage1;\n\tprivate Widget textStage2;\n\tprivate Widget arrow;\n\n\tpublic CustomWidgetBlockerBox(Widget parent, String name)\n\t{\n\t\tsuper(parent, name);\n\t}\n\n\tpublic void setHidden(boolean state)\n\t{\n\t\tleftBar.setHidden(state);\n\t\tmiddleBar.setHidden(state);\n\t\trightBar.setHidden(state);\n\t\tcornerBlocker.setHidden(state);\n\t\ttextStage1.setHidden(state);\n\t\ttextStage2.setHidden(state);\n\t\tarrow.setHidden(state);\n\t}\n\n\tpublic void setTutorialState(int state)\n\t{\n\t\tswitch (state)\n\t\t{\n\t\t\tcase 1:\n\t\t\t\ttextStage1.setHidden(false);\n\t\t\t\ttextStage2.setHidden(true);\n\t\t\t\tarrow.setHidden(true);\n\t\t\t\tcornerBlocker.setHidden(false);\n\t\t\t\treturn;\n\t\t\tcase 2:\n\t\t\t\ttextStage1.setHidden(true);\n\t\t\t\ttextStage2.setHidden(false);\n\t\t\t\tarrow.setHidden(false);\n\t\t\t\tcornerBlocker.setHidden(true);\n\t\t}\n\t}\n\n\t@Override\n\tpublic void layout(int x, int y)\n\t{\n\t\tsuper.layout(x, y);\n\n\t\tlayoutWidget(leftBar, x, y + TOP_LEFT_CORNER_SIZE);\n\t\tlayoutWidget(middleBar, x + TOP_LEFT_CORNER_SIZE, y);\n\t\tlayoutWidget(rightBar, x + width - BOTTOM_RIGHT_CORNER_SIZE, y);\n\t\tlayoutWidget(cornerBlocker, x + width - BOTTOM_RIGHT_CORNER_SIZE, y + height - BOTTOM_RIGHT_CORNER_SIZE);\n\n\t\tlayoutWidget(textStage1, x + 10, y);\n\t\tlayoutWidget(textStage2, x + 10, y);\n\t\tlayoutWidget(arrow, x + width - 100, y + height - 100);\n\n\t\tparent.revalidate();\n\t}\n\n\t@Override\n\tpublic void create()\n\t{\n\t\tJavaScriptCallback empty \u003d ev -\u003e {};\n\n\t\tleftBar \u003d createRectangleWidget(TOP_LEFT_CORNER_SIZE, height - TOP_LEFT_CORNER_SIZE);\n\t\tleftBar.setFilled(true);\n\t\tleftBar.setOpacity(OPACITY);\n\t\tleftBar.setHasListener(true);\n\t\tleftBar.setNoClickThrough(true);\n\t\tleftBar.setOnOpListener(empty);\n\n\t\tmiddleBar \u003d createRectangleWidget(width - (TOP_LEFT_CORNER_SIZE + BOTTOM_RIGHT_CORNER_SIZE), height);\n\t\tmiddleBar.setFilled(true);\n\t\tmiddleBar.setOpacity(OPACITY);\n\t\tmiddleBar.setHasListener(true);\n\t\tmiddleBar.setNoClickThrough(true);\n\t\tmiddleBar.setOnOpListener(empty);\n\n\t\trightBar \u003d createRectangleWidget(BOTTOM_RIGHT_CORNER_SIZE, height - BOTTOM_RIGHT_CORNER_SIZE);\n\t\trightBar.setFilled(true);\n\t\trightBar.setOpacity(OPACITY);\n\t\trightBar.setHasListener(true);\n\t\trightBar.setNoClickThrough(true);\n\t\trightBar.setOnOpListener(empty);\n\n\t\tcornerBlocker \u003d createRectangleWidget(BOTTOM_RIGHT_CORNER_SIZE, BOTTOM_RIGHT_CORNER_SIZE);\n\t\tcornerBlocker.setFilled(true);\n\t\tcornerBlocker.setOpacity(OPACITY);\n\t\tcornerBlocker.setHasListener(true);\n\t\tcornerBlocker.setNoClickThrough(true);\n\t\tcornerBlocker.setOnOpListener(empty);\n\n\t\ttextStage1 \u003d createTextWidget(\"The plugin needs to know your base outfit. First, remove all of your equipment.\");\n\t\ttextStage1.setXTextAlignment(WidgetTextAlignment.CENTER);\n\t\ttextStage1.setYTextAlignment(WidgetTextAlignment.CENTER);\n\t\ttextStage1.setOriginalWidth(width - 20);\n\t\ttextStage1.setOriginalHeight(height);\n\t\ttextStage1.setTextColor(fromRGB(Color.YELLOW));\n\t\ttextStage1.setFontId(FontID.PLAIN_12);\n\n\t\ttextStage2 \u003d createTextWidget(\"Now click the button in the corner to provide a default state.\");\n\t\ttextStage2.setXTextAlignment(WidgetTextAlignment.CENTER);\n\t\ttextStage2.setYTextAlignment(WidgetTextAlignment.CENTER);\n\t\ttextStage2.setOriginalWidth(width - 20);\n\t\ttextStage2.setOriginalHeight(height);\n\t\ttextStage2.setTextColor(fromRGB(Color.YELLOW));\n\t\ttextStage2.setFontId(FontID.PLAIN_12);\n\n\t\t// RL does not have the stuff required to rotate sprites exported (if there is such a thing),\n\t\t// so a custom needs be used instead\n\t\tarrow \u003d createSpriteWidget(48, 48);\n\t\tarrow.setSpriteId(CustomSprites.TUTORIAL_ARROW.getSpriteId());\n\t}\n\n\tprivate Widget createRectangleWidget(int width, int height)\n\t{\n\t\tfinal Widget w \u003d parent.createChild(-1, WidgetType.RECTANGLE);\n\t\tw.setOriginalHeight(height);\n\t\tw.setOriginalWidth(width);\n\t\treturn w;\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\ui\\CustomWidgetBlockerBox.java"},{"fileName":"CustomWidgetConfigButton.java","content":"/*\n * Copyright (c) 2021, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.ui;\n\nimport net.runelite.api.ScriptEvent;\nimport net.runelite.api.SpriteID;\nimport net.runelite.api.widgets.JavaScriptCallback;\nimport net.runelite.api.widgets.Widget;\n\npublic class CustomWidgetConfigButton extends CustomWidget implements InteractibleWidget\n{\n\tstatic final int BORDER_SIZE \u003d 9;\n\tprivate static final int LARGE_ICON_SIZE \u003d 32;\n\tprivate static final int SMALL_ICON_SIZE \u003d 20;\n\tprivate static final int COG_SMALL \u003d 2410;\n\n\tprivate Widget overlay;\n\n\tprivate Widget topLeftBrace;\n\tprivate Widget topRightBrace;\n\tprivate Widget bottomLeftBrace;\n\tprivate Widget bottomRightBrace;\n\n\tprivate Widget leftSide;\n\tprivate Widget topSide;\n\tprivate Widget rightSide;\n\tprivate Widget bottomSide;\n\n\tprivate Widget itemIcon;\n\tprivate Widget largeIcon;\n\tprivate Widget smallIcon;\n\n\tprotected final WidgetIntCallback callback;\n\n\tpublic CustomWidgetConfigButton(final Widget parent, final String name, final WidgetIntCallback callback)\n\t{\n\t\tsuper(parent, name);\n\t\tthis.callback \u003d callback;\n\t}\n\n\t@Override\n\tpublic void create()\n\t{\n\t\ttopLeftBrace \u003d createSpriteWidget(BORDER_SIZE, BORDER_SIZE);\n\t\ttopRightBrace \u003d createSpriteWidget(BORDER_SIZE, BORDER_SIZE);\n\t\tbottomLeftBrace \u003d createSpriteWidget(BORDER_SIZE, BORDER_SIZE);\n\t\tbottomRightBrace \u003d createSpriteWidget(BORDER_SIZE, BORDER_SIZE);\n\n\t\tleftSide \u003d createSpriteWidget(BORDER_SIZE, height - BORDER_SIZE * 2);\n\t\ttopSide \u003d createSpriteWidget(width - BORDER_SIZE * 2, BORDER_SIZE);\n\t\trightSide \u003d createSpriteWidget(BORDER_SIZE, height - BORDER_SIZE * 2);\n\t\tbottomSide \u003d createSpriteWidget(width - BORDER_SIZE * 2, BORDER_SIZE);\n\n\t\tonLeave();\n\n\t\tlargeIcon \u003d createSpriteWidget(LARGE_ICON_SIZE, LARGE_ICON_SIZE);\n\t\tlargeIcon.setSpriteId(COG_SMALL);\n\n\t\titemIcon \u003d createSpriteWidget(36, 32);\n\t\titemIcon.setItemQuantity(-1);\n\t\titemIcon.setItemQuantityMode(2);\n\t\titemIcon.setBorderType(1);\n\n\t\tsmallIcon \u003d createSpriteWidget(SMALL_ICON_SIZE, SMALL_ICON_SIZE);\n\t\tsmallIcon.setSpriteId(COG_SMALL);\n\t\tsmallIcon.setHidden(true);\n\n\n\n\t\toverlay \u003d createSpriteWidget(width, height);\n\t\toverlay.setOnOpListener((JavaScriptCallback) this::onButtonClicked);\n\t\toverlay.setOnMouseRepeatListener((JavaScriptCallback) e -\u003e onHover());\n\t\toverlay.setOnMouseLeaveListener((JavaScriptCallback) e -\u003e onLeave());\n\t\toverlay.setHasListener(true);\n\t}\n\n\tpublic void addOption(int index, String action)\n\t{\n\t\toverlay.setAction(index, action);\n\t}\n\n\tpublic void setItemIcon(int itemID)\n\t{\n\t\titemIcon.setItemId(itemID);\n\t\tlargeIcon.setHidden(itemID !\u003d -1);\n\t\tsmallIcon.setHidden(itemID \u003d\u003d -1);\n\t\tif (itemID \u003d\u003d -1)\n\t\t{\n\t\t\taddOption(2, \"Set Icon\");\n\t\t\taddOption(3, null);\n\t\t}\n\t\telse\n\t\t{\n\t\t\taddOption(2, \"Change Icon\");\n\t\t\taddOption(3, \"Remove Icon\");\n\t\t}\n\t}\n\n\tprivate void onHover()\n\t{\n\t\ttopLeftBrace.setSpriteId(SpriteID.EQUIPMENT_BUTTON_METAL_CORNER_TOP_LEFT_HOVERED);\n\t\ttopRightBrace.setSpriteId(SpriteID.EQUIPMENT_BUTTON_METAL_CORNER_TOP_RIGHT_HOVERED);\n\t\tbottomLeftBrace.setSpriteId(SpriteID.EQUIPMENT_BUTTON_METAL_CORNER_BOTTOM_LEFT_HOVERED);\n\t\tbottomRightBrace.setSpriteId(SpriteID.EQUIPMENT_BUTTON_METAL_CORNER_BOTTOM_RIGHT_HOVERED);\n\t\tleftSide.setSpriteId(SpriteID.EQUIPMENT_BUTTON_EDGE_LEFT_HOVERED);\n\t\ttopSide.setSpriteId(SpriteID.EQUIPMENT_BUTTON_EDGE_TOP_HOVERED);\n\t\trightSide.setSpriteId(SpriteID.EQUIPMENT_BUTTON_EDGE_RIGHT_HOVERED);\n\t\tbottomSide.setSpriteId(SpriteID.EQUIPMENT_BUTTON_EDGE_BOTTOM_HOVERED);\n\t}\n\n\tprivate void onLeave()\n\t{\n\t\ttopLeftBrace.setSpriteId(SpriteID.EQUIPMENT_BUTTON_METAL_CORNER_TOP_LEFT);\n\t\ttopRightBrace.setSpriteId(SpriteID.EQUIPMENT_BUTTON_METAL_CORNER_TOP_RIGHT);\n\t\tbottomLeftBrace.setSpriteId(SpriteID.EQUIPMENT_BUTTON_METAL_CORNER_BOTTOM_LEFT);\n\t\tbottomRightBrace.setSpriteId(SpriteID.EQUIPMENT_BUTTON_METAL_CORNER_BOTTOM_RIGHT);\n\t\tleftSide.setSpriteId(SpriteID.EQUIPMENT_BUTTON_EDGE_LEFT);\n\t\ttopSide.setSpriteId(SpriteID.EQUIPMENT_BUTTON_EDGE_TOP);\n\t\trightSide.setSpriteId(SpriteID.EQUIPMENT_BUTTON_EDGE_RIGHT);\n\t\tbottomSide.setSpriteId(SpriteID.EQUIPMENT_BUTTON_EDGE_BOTTOM);\n\t}\n\n\t@Override\n\tpublic void layout(int x, int y)\n\t{\n\t\tlayoutWidget(overlay, x, y);\n\n\t\tlayoutWidget(largeIcon, x + 3, y + 3);\n\t\tlayoutWidget(smallIcon, x + width - SMALL_ICON_SIZE - 2, y + height - SMALL_ICON_SIZE - 2);\n\t\tlayoutWidget(itemIcon, x + 4, y + 3);\n\n\t\tlayoutWidget(topLeftBrace, x, y);\n\t\tlayoutWidget(topRightBrace, x + width - BORDER_SIZE, y);\n\t\tlayoutWidget(bottomLeftBrace, x, y + height - BORDER_SIZE);\n\t\tlayoutWidget(bottomRightBrace, x + width - BORDER_SIZE, y + height - BORDER_SIZE);\n\n\t\tlayoutWidget(leftSide, x, y + BORDER_SIZE);\n\t\tlayoutWidget(topSide, x + BORDER_SIZE, y);\n\t\tlayoutWidget(rightSide, x + width - BORDER_SIZE, y + BORDER_SIZE);\n\t\tlayoutWidget(bottomSide, x + BORDER_SIZE, y + height - BORDER_SIZE);\n\n\t\tsuper.layout(x, y);\n\t}\n\n\t@Override\n\tpublic void onButtonClicked(ScriptEvent scriptEvent)\n\t{\n\t\t// For whatever reason, the Op for an option is always 1 higher than the given index. MAGIC!\n\t\tcallback.run(scriptEvent.getOp() - 1);\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\ui\\CustomWidgetConfigButton.java"},{"fileName":"CustomWidgetNamePlate.java","content":"/*\n * Copyright (c) 2021, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.ui;\n\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetTextAlignment;\n\npublic class CustomWidgetNamePlate extends CustomWidget\n{\n\tprivate static final int PLATE_CAP_LEFT \u003d 1123;\n\tprivate static final int PLATE_CAP_RIGHT \u003d 1125;\n\tprivate static final int PLATE_BACKGROUND_TILE \u003d 1124;\n\tprivate static final int CAP_WIDTH \u003d 4;\n\tprivate static final int HEIGHT \u003d 14;\n\n\tprivate Widget capLeft;\n\tprivate Widget capRight;\n\tprivate Widget background;\n\tprivate Widget nameWidget;\n\n\tpublic CustomWidgetNamePlate(Widget parent, int width)\n\t{\n\t\tsuper(parent, \"\");\n\t\tthis.width \u003d width;\n\t\tthis.height \u003d HEIGHT;\n\t}\n\n\t@Override\n\tpublic void create()\n\t{\n\t\tcapLeft \u003d createSpriteWidget(CAP_WIDTH, HEIGHT);\n\t\tcapLeft.setSpriteId(PLATE_CAP_LEFT);\n\t\tcapRight \u003d createSpriteWidget(CAP_WIDTH, HEIGHT);\n\t\tcapRight.setSpriteId(PLATE_CAP_RIGHT);\n\t\tbackground \u003d createSpriteWidget(width - CAP_WIDTH * 2, HEIGHT);\n\t\tbackground.setSpriteId(PLATE_BACKGROUND_TILE);\n\t\tbackground.setSpriteTiling(true);\n\t\tnameWidget \u003d createTextWidget(\"\");\n\t\tnameWidget.setOriginalWidth(width);\n\t\tnameWidget.setOriginalHeight(HEIGHT);\n\t\tnameWidget.setXTextAlignment(WidgetTextAlignment.CENTER);\n\t\tnameWidget.setYTextAlignment(WidgetTextAlignment.CENTER);\n\t\tnameWidget.setFontId(494);\n\t\tnameWidget.setTextColor(0xFFFF00);\n\t}\n\n\tpublic void setText(String text)\n\t{\n\t\tif (UIManager.FONT_METRICS.stringWidth(text) \u003e width)\n\t\t{\n\t\t\ttext \u003d UIManager.cutStringToPxWidth(text, width, true);\n\t\t}\n\t\tnameWidget.setText(text);\n\t}\n\n\t@Override\n\tpublic void layout(int x, int y)\n\t{\n\t\tsuper.layout(x, y);\n\t\tlayoutWidget(capLeft, x, y);\n\t\tlayoutWidget(capRight, x + width - CAP_WIDTH, y);\n\t\tlayoutWidget(background, x + CAP_WIDTH, y);\n\t\tlayoutWidget(nameWidget, x, y);\n\t\tparent.revalidate();\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\ui\\CustomWidgetNamePlate.java"},{"fileName":"CustomWidgetPlayerPreview.java","content":"/*\n * Copyright (c) 2020, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.ui;\n\nimport net.runelite.api.ScriptEvent;\nimport net.runelite.api.widgets.JavaScriptCallback;\nimport net.runelite.api.widgets.Widget;\n\npublic class CustomWidgetPlayerPreview extends CustomWidget implements InteractibleWidget\n{\n\tprivate Widget clickbox;\n\n\tprivate boolean rotationEnabled \u003d true;\n\n\tpublic CustomWidgetPlayerPreview(Widget parent, String name)\n\t{\n\t\tsuper(parent, name);\n\t}\n\n\tpublic void setHidden(boolean state)\n\t{\n\t\tbase.setHidden(state);\n\t\tclickbox.setHidden(state);\n\t}\n\n\t@Override\n\tpublic void layout(int x, int y)\n\t{\n\t\tsuper.layout(x, y);\n\t\tlayoutWidget(base, x, y + 60);\n\t\tlayoutWidget(clickbox, x, y);\n\t\tparent.revalidate();\n\t}\n\n\t@Override\n\tpublic void create()\n\t{\n\t\tbase \u003d createModelWidget(90, 150);\n\t\tbase.setModelId(1);\n\t\tbase.setModelType(5);\n\t\tbase.setModelZoom(760);\n\t\tbase.setRotationX(150);\n\n\t\tclickbox \u003d createSpriteWidget(90, 150);\n\t\tclickbox.setHasListener(true);\n\t\tclickbox.setOnOpListener((JavaScriptCallback) this::onButtonClicked);\n\t\tclickbox.setAction(1, \"Toggle rotation for\");\n\t\tclickbox.setAction(2, \"Reset rotation for\");\n\t}\n\n\tpublic void tickRotation()\n\t{\n\t\tif (rotationEnabled)\n\t\t{\n\t\t\tbase.setRotationZ((base.getRotationZ() + 2) % 2048);\n\t\t}\n\t}\n\n\t@Override\n\tpublic void onButtonClicked(ScriptEvent scriptEvent)\n\t{\n\t\tswitch (scriptEvent.getOp())\n\t\t{\n\t\t\tcase 2:\n\t\t\t\trotationEnabled \u003d !rotationEnabled;\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tbase.setRotationZ(0);\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\ui\\CustomWidgetPlayerPreview.java"},{"fileName":"CustomWidgetPresetBox.java","content":"/*\n * Copyright (c) 2021, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.ui;\n\nimport io.hydrox.transmog.TransmogPreset;\nimport net.runelite.api.FontID;\nimport net.runelite.api.ScriptEvent;\nimport net.runelite.api.SpriteID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetTextAlignment;\nimport java.awt.Color;\n\npublic class CustomWidgetPresetBox extends CustomWidgetPresetTabItem\n{\n\tprivate static final int DEFAULT_ICON \u003d SpriteID.TAB_EMOTES;\n\tprivate static final int MAX_NAME_WIDTH_PX \u003d 36;\n\n\tprivate Widget defaultIconWidget;\n\tprivate Widget iconWidget;\n\tprivate Widget nameWidget;\n\n\tprivate final TransmogPreset preset;\n\n\tpublic CustomWidgetPresetBox(TransmogPreset preset, Widget parent, WidgetIntCallback callback)\n\t{\n\t\tsuper(parent, preset.getDisplayName(), callback);\n\t\tthis.preset \u003d preset;\n\t}\n\n\t@Override\n\tpublic int getId()\n\t{\n\t\treturn preset.getId();\n\t}\n\n\t@Override\n\tpublic void layout(int x, int y)\n\t{\n\t\tsuper.layout(x, y);\n\t\tlayoutWidget(defaultIconWidget, x + 2, y + 2);\n\t\tlayoutWidget(nameWidget, x + 2, y + 2);\n\t\tlayoutWidget(iconWidget, x + 2, y + 2);\n\t\tparent.revalidate();\n\t}\n\n\t@Override\n\tpublic void scrollBy(int y)\n\t{\n\t\tsuper.scrollBy(y);\n\t\tdefaultIconWidget.setOriginalY(this.y - y + 2);\n\t\tnameWidget.setOriginalY(this.y - y + 2);\n\t\ticonWidget.setOriginalY(this.y - y + 2);\n\t\tdefaultIconWidget.revalidate();\n\t\tnameWidget.revalidate();\n\t\ticonWidget.revalidate();\n\t}\n\n\t@Override\n\tpublic void create()\n\t{\n\t\tsuper.createUnderlay();\n\n\t\tdefaultIconWidget \u003d createSpriteWidget(32, 32);\n\t\tdefaultIconWidget.setSpriteId(DEFAULT_ICON);\n\n\t\ticonWidget \u003d createSpriteWidget(36, 32);\n\t\ticonWidget.setItemQuantity(-1);\n\t\ticonWidget.setItemQuantityMode(2);\n\t\ticonWidget.setBorderType(1);\n\n\t\tif (preset.getIcon() \u003e\u003d -1)\n\t\t{\n\t\t\ticonWidget.setItemId(preset.getIcon());\n\t\t\tdefaultIconWidget.setHidden(true);\n\t\t}\n\t\telse\n\t\t{\n\t\t\ticonWidget.setHidden(true);\n\t\t}\n\n\t\tnameWidget \u003d createTextWidget(UIManager.cutStringToPxWidth(preset.getDisplayName(), MAX_NAME_WIDTH_PX));\n\t\tnameWidget.setOriginalWidth(32);\n\t\tnameWidget.setOriginalHeight(32);\n\t\tnameWidget.setFontId(FontID.PLAIN_11);\n\t\tnameWidget.setTextColor(fromRGB(Color.YELLOW));\n\t\tnameWidget.setXTextAlignment(WidgetTextAlignment.RIGHT);\n\t\tnameWidget.setYTextAlignment(WidgetTextAlignment.BOTTOM);\n\n\t\tsuper.createOverlay();\n\t}\n\n\t@Override\n\tpublic void onButtonClicked(ScriptEvent scriptEvent)\n\t{\n\t\tcallback.run(preset.getId());\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\ui\\CustomWidgetPresetBox.java"},{"fileName":"CustomWidgetPresetTabItem.java","content":"/*\n * Copyright (c) 2021, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.ui;\n\nimport net.runelite.api.widgets.JavaScriptCallback;\nimport net.runelite.api.widgets.Widget;\n\npublic abstract class CustomWidgetPresetTabItem extends CustomWidget implements InteractibleWidget\n{\n\tprivate static final int BACKGROUND_ID \u003d 170;\n\tprivate static final int BACKGROUND_ID_SELECTED \u003d 179;\n\n\tstatic final int SIZE \u003d 32;\n\n\tprivate Widget overlayWidget;\n\n\tprotected final WidgetIntCallback callback;\n\n\tpublic CustomWidgetPresetTabItem(Widget parent, String name, WidgetIntCallback callback)\n\t{\n\t\tsuper(parent, name);\n\t\tthis.callback \u003d callback;\n\t}\n\n\tpublic abstract int getId();\n\n\t@Override\n\tpublic void layout(int x, int y)\n\t{\n\t\tsuper.layout(x, y);\n\t\tlayoutWidget(base, x, y);\n\t\tlayoutWidget(overlayWidget, x, y);\n\t\tparent.revalidate();\n\t}\n\n\tpublic void scrollBy(int y)\n\t{\n\t\tbase.setOriginalY(this.y - y);\n\t\toverlayWidget.setOriginalY(this.y - y);\n\t\tbase.revalidate();\n\t\toverlayWidget.revalidate();\n\t}\n\n\tprotected void createUnderlay()\n\t{\n\t\tbase \u003d createSpriteWidget(36, 36);\n\t\tbase.setSpriteId(BACKGROUND_ID);\n\t}\n\n\tprotected void createOverlay()\n\t{\n\t\toverlayWidget \u003d createSpriteWidget(36, 36);\n\t\toverlayWidget.setOnOpListener((JavaScriptCallback) this::onButtonClicked);\n\t\toverlayWidget.setHasListener(true);\n\t}\n\n\tpublic void addOption(int index, String action)\n\t{\n\t\toverlayWidget.setAction(index, action);\n\t}\n\n\tpublic void setSelected(boolean state)\n\t{\n\t\tbase.setSpriteId(state ? BACKGROUND_ID_SELECTED : BACKGROUND_ID);\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\ui\\CustomWidgetPresetTabItem.java"},{"fileName":"CustomWidgetToggleButton.java","content":"/*\n * Copyright (c) 2020, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.ui;\n\nimport net.runelite.api.ScriptEvent;\nimport net.runelite.api.widgets.JavaScriptCallback;\nimport net.runelite.api.widgets.Widget;\n\npublic class CustomWidgetToggleButton extends CustomWidgetWithIcon implements InteractibleWidget\n{\n\tprivate int selectedBackgroundSprite;\n\tprivate int backgroundSpriteID;\n\n\tprivate String verbWhenOff;\n\tprivate String verbWhenOn;\n\n\tprivate boolean selected;\n\n\tprivate final WidgetBooleanCallback callback;\n\n\tprivate Widget clickbox;\n\n\tpublic CustomWidgetToggleButton(final Widget parent, final String name, int backgroundSprite, int selectedBackgroundSprite, int iconSprite, final WidgetBooleanCallback callback)\n\t{\n\t\tsuper(parent, name, iconSprite);\n\t\tthis.backgroundSpriteID \u003d backgroundSprite;\n\t\tthis.selectedBackgroundSprite \u003d selectedBackgroundSprite;\n\t\tthis.callback \u003d callback;\n\t}\n\n\tpublic void setVerbs(String off, String on)\n\t{\n\t\tverbWhenOff \u003d off;\n\t\tverbWhenOn \u003d on;\n\t}\n\n\tpublic void toggle()\n\t{\n\t\tselected \u003d !selected;\n\t\tbase.setSpriteId(selected ? selectedBackgroundSprite : backgroundSpriteID);\n\t\tclickbox.setAction(1, selected ? verbWhenOn : verbWhenOff);\n\t}\n\n\t@Override\n\tpublic void layout(int x, int y)\n\t{\n\t\tlayoutWidget(base, x, y);\n\t\tlayoutWidget(clickbox, x, y);\n\n\t\tsuper.layout(x, y);\n\t}\n\n\t@Override\n\tpublic void create()\n\t{\n\t\tbase \u003d createSpriteWidget(width, height);\n\t\tbase.setSpriteId(backgroundSpriteID);\n\n\t\ticon \u003d createSpriteWidget(iconWidth, iconHeight);\n\t\ticon.setSpriteId(iconSpriteID);\n\n\t\tclickbox \u003d createSpriteWidget(width, height);\n\t\tclickbox.setOnOpListener((JavaScriptCallback) this::onButtonClicked);\n\t\tclickbox.setOnMouseRepeatListener((JavaScriptCallback) e -\u003e icon.setOpacity(120));\n\t\tclickbox.setOnMouseLeaveListener((JavaScriptCallback) e -\u003e icon.setOpacity(0));\n\t\tclickbox.setHasListener(true);\n\t\tclickbox.setAction(1, verbWhenOff);\n\t}\n\n\t@Override\n\tpublic void onButtonClicked(ScriptEvent scriptEvent)\n\t{\n\t\ttoggle();\n\t\tcallback.run(selected);\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\ui\\CustomWidgetToggleButton.java"},{"fileName":"CustomWidgetTransmogBox.java","content":"/*\n * Copyright (c) 2020, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.ui;\n\nimport io.hydrox.transmog.MappingMapping;\nimport io.hydrox.transmog.TransmogSlot;\nimport io.hydrox.transmog.TransmogSlot.SlotType;\nimport static io.hydrox.transmog.ui.MenuOps.CLEAR;\nimport static io.hydrox.transmog.ui.MenuOps.HIDE;\nimport static io.hydrox.transmog.ui.MenuOps.SET_ITEM;\nimport net.runelite.api.ScriptEvent;\nimport net.runelite.api.SpriteID;\nimport net.runelite.api.widgets.JavaScriptCallback;\nimport net.runelite.api.widgets.Widget;\n\npublic class CustomWidgetTransmogBox extends CustomWidget implements InteractibleWidget\n{\n\tprivate static final int BACKGROUND_ID \u003d 170;\n\tprivate static final String SET_ITEM_STRING \u003d \"Set item for\";\n\tprivate static final String CLEAR_STRING \u003d \"Clear\";\n\tprivate static final String HIDE_STRING \u003d \"Hide\";\n\t// The Special slots are dependant on the equipped armour, so some different terminology is needed.\n\tprivate static final String SPECIAL_CLEAR_STRING \u003d \"Follow armour for\";\n\tprivate static final String SPECIAL_HIDE_STRING \u003d \"Use base\";\n\n\tprivate Widget slotWidget;\n\tprivate Widget contentsWidget;\n\tprivate Widget slotDefaultWidget;\n\tprivate Widget overlayWidget;\n\n\tprivate SlotType type;\n\n\tprivate TransmogSlot slot;\n\n\tprivate MappingMapping mapping;\n\n\tprivate final WidgetSlotCallback callback;\n\n\tpublic CustomWidgetTransmogBox(SlotType type, Widget parent, TransmogSlot slot, WidgetSlotCallback callback)\n\t{\n\t\tsuper(parent, slot.getName());\n\t\tthis.type \u003d type;\n\t\tthis.slot \u003d slot;\n\t\tthis.callback \u003d callback;\n\t}\n\n\tpublic void setDefault()\n\t{\n\t\tslotDefaultWidget.setHidden(false);\n\t\tslotWidget.setHidden(false);\n\t\tcontentsWidget.setHidden(true);\n\t\toverlayWidget.setAction(SET_ITEM, SET_ITEM_STRING);\n\t\toverlayWidget.setAction(HIDE, null);\n\n\t\tif (slot.getSlotType() \u003d\u003d SlotType.SPECIAL)\n\t\t{\n\t\t\toverlayWidget.setAction(CLEAR, SPECIAL_CLEAR_STRING);\n\t\t}\n\t\telse\n\t\t{\n\t\t\toverlayWidget.setAction(CLEAR, CLEAR_STRING);\n\t\t}\n\t}\n\n\tpublic void setEmpty()\n\t{\n\t\tslotDefaultWidget.setHidden(true);\n\t\tslotWidget.setHidden(false);\n\t\tcontentsWidget.setHidden(true);\n\t\toverlayWidget.setAction(SET_ITEM, SET_ITEM_STRING);\n\t\toverlayWidget.setAction(CLEAR, null);\n\n\t\tif (slot.getSlotType() \u003d\u003d SlotType.SPECIAL)\n\t\t{\n\t\t\toverlayWidget.setAction(HIDE, SPECIAL_HIDE_STRING);\n\t\t}\n\t\telse\n\t\t{\n\t\t\toverlayWidget.setAction(HIDE, HIDE_STRING);\n\t\t}\n\t}\n\n\tpublic void setContent(int id, String name)\n\t{\n\t\tslotDefaultWidget.setHidden(true);\n\t\tslotWidget.setHidden(true);\n\t\tcontentsWidget.setHidden(false);\n\t\tif (type \u003d\u003d SlotType.ITEM)\n\t\t{\n\t\t\tcontentsWidget.setItemId(id);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcontentsWidget.setModelId(id);\n\t\t}\n\n\t\toverlayWidget.setAction(SET_ITEM, \"Replace \" + UIManager.ORANGE_COLOUR_WIDGET_NAME + name + \"\u003c/col\u003e for\");\n\n\t\tif (slot.getSlotType() \u003d\u003d SlotType.SPECIAL)\n\t\t{\n\t\t\toverlayWidget.setAction(CLEAR, SPECIAL_CLEAR_STRING);\n\t\t\toverlayWidget.setAction(HIDE, SPECIAL_HIDE_STRING);\n\t\t}\n\t\telse\n\t\t{\n\t\t\toverlayWidget.setAction(CLEAR, CLEAR_STRING);\n\t\t\toverlayWidget.setAction(HIDE, HIDE_STRING);\n\t\t}\n\t}\n\n\tpublic void set(Integer contents, String name)\n\t{\n\t\tif (contents \u003d\u003d null)\n\t\t{\n\t\t\tsetEmpty();\n\t\t}\n\t\telse if (contents \u003d\u003d -1)\n\t\t{\n\t\t\tsetDefault();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.setContent(contents, name);\n\t\t}\n\t}\n\n\t@Override\n\tpublic void layout(int x, int y)\n\t{\n\t\tsuper.layout(x, y);\n\n\t\tfinal int yOffset \u003d mapping !\u003d null ? mapping.getYOffset() : 0;\n\t\tlayoutWidget(base, x, y);\n\t\tlayoutWidget(slotWidget, x + 2, y + 2);\n\t\tlayoutWidget(slotDefaultWidget, x + 2, y + 2);\n\t\tlayoutWidget(contentsWidget, x + 2, y + 2 + yOffset);\n\t\tlayoutWidget(overlayWidget, x, y);\n\t\tparent.revalidate();\n\t}\n\n\t@Override\n\tpublic void create()\n\t{\n\t\tbase \u003d createSpriteWidget(36, 36);\n\t\tbase.setSpriteId(BACKGROUND_ID);\n\n\t\tslotWidget \u003d createSpriteWidget(32, 32);\n\t\tslotWidget.setSpriteId(slot.getSpriteID());\n\n\t\tslotDefaultWidget \u003d createSpriteWidget(32, 32);\n\t\tslotDefaultWidget.setSpriteId(SpriteID.OPTIONS_DISABLED_OPTION_OVERLAY);\n\n\t\tif (type \u003d\u003d SlotType.ITEM)\n\t\t{\n\t\t\tcontentsWidget \u003d createSpriteWidget(36, 32);\n\t\t\tcontentsWidget.setItemQuantity(-1);\n\t\t\tcontentsWidget.setItemQuantityMode(2);\n\t\t\tcontentsWidget.setBorderType(1);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmapping \u003d MappingMapping.fromSlot(slot);\n\t\t\tcontentsWidget \u003d createModelWidget(36, 32);\n\t\t\tcontentsWidget.setModelType(1);\n\t\t\tcontentsWidget.setModelZoom(mapping.getModelZoom());\n\t\t\tcontentsWidget.setRotationZ(150);\n\t\t}\n\t\tcontentsWidget.setHidden(true);\n\n\t\toverlayWidget \u003d createSpriteWidget(36, 36);\n\t\toverlayWidget.setOnOpListener((JavaScriptCallback) this::onButtonClicked);\n\t\toverlayWidget.setHasListener(true);\n\t}\n\n\t@Override\n\tpublic void onButtonClicked(ScriptEvent scriptEvent)\n\t{\n\t\tcallback.run(scriptEvent.getOp() - 1, slot);\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\ui\\CustomWidgetTransmogBox.java"},{"fileName":"CustomWidgetWithIcon.java","content":"/*\n * Copyright (c) 2020, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.ui;\n\nimport net.runelite.api.widgets.Widget;\n\npublic abstract class CustomWidgetWithIcon extends CustomWidget\n{\n\tprotected int iconWidth;\n\tprotected int iconHeight;\n\n\tprotected int iconSpriteID;\n\tprotected int iconPaddingX;\n\tprotected int iconPaddingY;\n\n\tprotected Widget icon;\n\n\tpublic CustomWidgetWithIcon(final Widget parent, final String name, int iconSpriteID)\n\t{\n\t\tsuper(parent, name);\n\t\tthis.iconSpriteID \u003d iconSpriteID;\n\t}\n\n\tpublic void setIconSize(int width, int height)\n\t{\n\t\tthis.iconWidth \u003d width;\n\t\tthis.iconHeight \u003d height;\n\t\ticonPaddingX \u003d (this.width - iconWidth) / 2;\n\t\ticonPaddingY \u003d (this.height - iconHeight) / 2;\n\t}\n\n\t@Override\n\tpublic void layout(int x, int y)\n\t{\n\t\tsuper.layout(x, y);\n\t\tlayoutWidget(icon, x + iconPaddingX, y + iconPaddingY);\n\n\t\tparent.revalidate();\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\ui\\CustomWidgetWithIcon.java"},{"fileName":"EquipmentOverlay.java","content":"/*\n * Copyright (c) 2021, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.ui;\n\nimport com.google.inject.Inject;\nimport com.google.inject.Singleton;\nimport io.hydrox.transmog.config.TransmogrificationConfigManager;\nimport io.hydrox.transmog.TransmogrificationManager;\nimport io.hydrox.transmog.TransmogrificationPlugin;\nimport net.runelite.api.SpriteID;\nimport net.runelite.api.widgets.JavaScriptCallback;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetType;\n\n@Singleton\npublic class EquipmentOverlay extends CustomTab\n{\n\tprivate CustomWidgetToggleButton stateToggle;\n\tprivate Widget pvpBlocker;\n\n\tprivate final TransmogrificationConfigManager config;\n\tprivate final TransmogrificationManager manager;\n\tprivate final UIManager uiManager;\n\n\t@Inject\n\tEquipmentOverlay(TransmogrificationPlugin plugin, TransmogrificationConfigManager config, TransmogrificationManager manager)\n\t{\n\t\tthis.config \u003d config;\n\t\tthis.manager \u003d manager;\n\t\tthis.uiManager \u003d plugin.getUIManager();\n\t}\n\n\t@Override\n\tvoid create()\n\t{\n\t\tcreate(false);\n\t}\n\n\tvoid create(boolean uiActive)\n\t{\n\t\tfinal Widget parent \u003d uiManager.getContainer();\n\n\t\tCustomWidgetToggleButton showUI \u003d new CustomWidgetToggleButton(\n\t\t\tparent,\n\t\t\t\"Transmogrification\",\n\t\t\tSpriteID.UNKNOWN_BUTTON_SQUARE_SMALL,\n\t\t\tSpriteID.UNKNOWN_BUTTON_SQUARE_SMALL_SELECTED,\n\t\t\t1654, // Unmapped\n\t\t\tselected -\u003e\n\t\t\t{\n\t\t\t\tif (selected)\n\t\t\t\t{\n\t\t\t\t\tuiManager.hideVanillaUI();\n\t\t\t\t\tuiManager.createTab(uiManager.getMainTab());\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tuiManager.removeCustomUI();\n\t\t\t\t\tcreate(false);\n\t\t\t\t\tmanager.savePresets();\n\t\t\t\t}\n\t\t\t});\n\t\tshowUI.setVerbs(\"Edit\", \"Exit\");\n\t\tshowUI.setSize(25, 25);\n\t\tshowUI.setIconSize(32, 32);\n\t\tshowUI.create();\n\t\tif (uiActive)\n\t\t{\n\t\t\tshowUI.toggle();\n\t\t}\n\n\t\tshowUI.layout(3, 3);\n\n\t\tstateToggle \u003d new CustomWidgetToggleButton(\n\t\t\tparent,\n\t\t\t\"Transmogrification\",\n\t\t\tSpriteID.UNKNOWN_BUTTON_SQUARE_SMALL,\n\t\t\tSpriteID.UNKNOWN_BUTTON_SQUARE_SMALL_SELECTED,\n\t\t\tCustomSprites.TRANSMOG_LOGO.getSpriteId(),\n\t\t\tstate -\u003e\n\t\t\t{\n\t\t\t\tif ((!manager.isDefaultStateSet() \u0026\u0026 state) || manager.isInPvpSituation())\n\t\t\t\t{\n\t\t\t\t\tstateToggle.toggle();\n\t\t\t\t\tmanager.hintDefaultState();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconfig.transmogActive(state);\n\t\t\t\tmanager.updateTransmog();\n\t\t\t}\n\t\t);\n\t\tstateToggle.setVerbs(\"Enable\", \"Disable\");\n\t\tstateToggle.setSize(25, 25);\n\t\tstateToggle.setIconSize(16, 13);\n\t\tstateToggle.create();\n\t\tif (config.transmogActive() \u0026\u0026 manager.isDefaultStateSet())\n\t\t{\n\t\t\tstateToggle.toggle();\n\t\t}\n\t\tstateToggle.layout(30, 3);\n\n\t\tpvpBlocker \u003d parent.createChild(-1, WidgetType.GRAPHIC);\n\t\tpvpBlocker.setSpriteId(SpriteID.PLAYER_KILLING_DISABLED_OVERLAY); // Block icon\n\t\tpvpBlocker.setOriginalWidth(25);\n\t\tpvpBlocker.setOriginalHeight(25);\n\t\tpvpBlocker.setHasListener(true);\n\t\tpvpBlocker.setNoClickThrough(true);\n\t\tpvpBlocker.setOnOpListener((JavaScriptCallback) e -\u003e {});\n\t\tpvpBlocker.setOriginalX(30);\n\t\tpvpBlocker.setOriginalY(3);\n\t\tpvpBlocker.setHidden(!manager.isInPvpSituation());\n\t\tpvpBlocker.setAction(0, \"Transmog is disabled in PvP situations\");\n\t}\n\n\t@Override\n\tvoid onPvpChanged(boolean newValue)\n\t{\n\t\tif (pvpBlocker !\u003d null)\n\t\t{\n\t\t\tpvpBlocker.setHidden(!newValue);\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\ui\\EquipmentOverlay.java"},{"fileName":"InteractibleWidget.java","content":"/*\n * Copyright (c) 2020, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.ui;\n\nimport io.hydrox.transmog.TransmogSlot;\nimport net.runelite.api.ScriptEvent;\n\npublic interface InteractibleWidget\n{\n\t@FunctionalInterface\n\tinterface WidgetBooleanCallback\n\t{\n\t\tvoid run(boolean state);\n\t}\n\n\t@FunctionalInterface\n\tinterface WidgetIntCallback\n\t{\n\t\tvoid run(int state);\n\t}\n\n\t@FunctionalInterface\n\tinterface WidgetSlotCallback\n\t{\n\t\tvoid run(int op, TransmogSlot slot);\n\t}\n\n\tvoid onButtonClicked(ScriptEvent scriptEvent);\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\ui\\InteractibleWidget.java"},{"fileName":"MainTab.java","content":"/*\n * Copyright (c) 2021, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.ui;\n\nimport com.google.common.base.Strings;\nimport com.google.common.collect.ImmutableList;\nimport com.google.common.collect.ImmutableMap;\nimport com.google.inject.Inject;\nimport com.google.inject.Singleton;\nimport io.hydrox.transmog.FacialHairMapping;\nimport io.hydrox.transmog.HairMapping;\nimport io.hydrox.transmog.Mapping;\nimport io.hydrox.transmog.MappingMapping;\nimport io.hydrox.transmog.SleeveMapping;\nimport io.hydrox.transmog.TransmogPartyManager;\nimport io.hydrox.transmog.TransmogPreset;\nimport io.hydrox.transmog.TransmogSlot;\nimport io.hydrox.transmog.TransmogrificationManager;\nimport io.hydrox.transmog.TransmogrificationPlugin;\nimport io.hydrox.transmog.config.TransmogrificationConfigManager;\nimport static io.hydrox.transmog.ui.MenuOps.CLEAR;\nimport static io.hydrox.transmog.ui.MenuOps.HIDE;\nimport static io.hydrox.transmog.ui.MenuOps.SET_ITEM;\nimport lombok.Getter;\nimport net.runelite.api.FontID;\nimport net.runelite.api.Point;\nimport net.runelite.api.SpriteID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetType;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.game.chatbox.ChatboxItemSearch;\nimport net.runelite.client.game.chatbox.ChatboxPanelManager;\nimport net.runelite.client.util.Text;\nimport org.apache.commons.lang3.tuple.Pair;\nimport java.awt.Color;\nimport java.awt.Rectangle;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\n@Singleton\npublic class MainTab extends CustomTab\n{\n\tprivate static final Point BASE_POSITION \u003d new Point(148, 4);\n\tprivate static final ImmutableMap\u003cTransmogSlot, Point\u003e SLOT_POSITIONS \u003d ImmutableMap.\u003cTransmogSlot, Point\u003ebuilder()\n\t\t.put(TransmogSlot.JAW, new Point(-76, 0))\n\t\t.put(TransmogSlot.HAIR, new Point(-38, 0))\n\t\t.put(TransmogSlot.HEAD, new Point(0, 0))\n\t\t.put(TransmogSlot.CAPE, new Point(-38, 38))\n\t\t.put(TransmogSlot.NECK, new Point(0, 38))\n\t\t.put(TransmogSlot.SLEEVES, new Point(-56, 76))\n\t\t.put(TransmogSlot.TORSO, new Point(0, 76))\n\t\t.put(TransmogSlot.LEGS, new Point(0, 115))\n\t\t.put(TransmogSlot.HANDS, new Point(-56, 154))\n\t\t.put(TransmogSlot.BOOTS, new Point(0, 154))\n\t\t.build();\n\n\tprivate static final List\u003cPair\u003cRectangle, Integer\u003e\u003e INTER_SLOT_BRACERS \u003d ImmutableList.\u003cPair\u003cRectangle, Integer\u003e\u003ebuilder()\n\t\t.add(Pair.of(new Rectangle(0, 36, 36, 122), SpriteID.IRON_RIVETS_VERTICAL))\n\t\t.add(Pair.of(new Rectangle(-56, 114, 36, 44), SpriteID.IRON_RIVETS_VERTICAL))\n\t\t.add(Pair.of(new Rectangle(-46, 0, 46, 36), SpriteID.IRON_RIVETS_HORIZONTAL))\n\t\t.add(Pair.of(new Rectangle(-5, 39, 5, 36), SpriteID.IRON_RIVETS_HORIZONTAL))\n\t\t.add(Pair.of(new Rectangle(-20, 78, 20, 36), SpriteID.IRON_RIVETS_HORIZONTAL))\n\t\t.build();\n\n\n\tprivate final ChatboxPanelManager chatboxPanelManager;\n\tprivate final ChatboxItemSearch allItemSearch;\n\tprivate final CustomItemSearch slotItemSearch;\n\tprivate final CustomSpriteSearch spriteSearch;\n\tprivate final ItemManager itemManager;\n\tprivate final TransmogPartyManager partyManager;\n\tprivate final TransmogrificationManager manager;\n\tprivate final UIManager uiManager;\n\tprivate final TransmogrificationConfigManager config;\n\n\t@Getter\n\tprivate final Map\u003cTransmogSlot, CustomWidgetTransmogBox\u003e uiSlots \u003d new HashMap\u003c\u003e();\n\n\tprivate Widget helpText;\n\tprivate CustomWidgetPlayerPreview playerPreview;\n\tprivate CustomWidgetActionButton saveDefaultStateButton;\n\tprivate CustomWidgetBlockerBox blockerBox;\n\tprivate CustomWidgetConfigButton presetExtraDataButton;\n\tprivate CustomWidgetNamePlate nameplate;\n\n\t@Inject\n\tMainTab(ChatboxPanelManager chatboxPanelManager, ChatboxItemSearch allItemSearch, CustomItemSearch slotItemSearch,\n\t\t\tCustomSpriteSearch spriteSearch, ItemManager itemManager, TransmogrificationPlugin plugin,\n\t\t\tTransmogrificationManager manager, TransmogPartyManager partyManager, TransmogrificationConfigManager config)\n\t{\n\t\tthis.chatboxPanelManager \u003d chatboxPanelManager;\n\t\tthis.allItemSearch \u003d allItemSearch;\n\t\tthis.slotItemSearch \u003d slotItemSearch;\n\t\tthis.spriteSearch \u003d spriteSearch;\n\t\tthis.itemManager \u003d itemManager;\n\t\tthis.partyManager \u003d partyManager;\n\t\tthis.manager \u003d manager;\n\t\tthis.uiManager \u003d plugin.getUIManager();\n\t\tthis.config \u003d config;\n\t}\n\n\t@Override\n\tvoid shutDown()\n\t{\n\t\tuiSlots.clear();\n\t}\n\n\t@Override\n\tvoid destroy()\n\t{\n\t\tplayerPreview \u003d null;\n\t}\n\n\t@Override\n\tvoid create()\n\t{\n\t\tfinal Widget parent \u003d uiManager.getContainer();\n\t\tuiManager.getEquipmentOverlay().create(true);\n\n\t\thelpText \u003d parent.createChild(-1, WidgetType.TEXT);\n\t\thelpText.setTextColor(CustomWidget.fromRGB(Color.YELLOW));\n\t\thelpText.setTextShadowed(true);\n\t\thelpText.setFontId(FontID.PLAIN_11);\n\t\thelpText.setOriginalWidth(90);\n\t\thelpText.setOriginalHeight(150);\n\t\thelpText.setOriginalX(3);\n\t\thelpText.setOriginalY(60);\n\t\thelpText.setText(\"Choose the items you want to see yourself wearing. If you\u0027re having glitchy collision, remove your hair/sleeves/beard. Removing hair requires toggling the transmog. Please report broken items to the support link.\");\n\t\thelpText.setHidden(true);\n\t\thelpText.revalidate();\n\n\t\tplayerPreview \u003d new CustomWidgetPlayerPreview(parent, \"Preview\");\n\t\tplayerPreview.create();\n\t\tplayerPreview.layout(3, 60);\n\n\n\t\tCustomWidgetToggleButton guideButton \u003d new CustomWidgetToggleButton(\n\t\t\tparent,\n\t\t\t\"Help\",\n\t\t\tSpriteID.UNKNOWN_BUTTON_SQUARE_SMALL,\n\t\t\tSpriteID.UNKNOWN_BUTTON_SQUARE_SMALL_SELECTED,\n\t\t\tCustomSprites.QUESTION_MARK.getSpriteId(),\n\t\t\tselected -\u003e\n\t\t\t{\n\t\t\t\thelpText.setHidden(!selected);\n\t\t\t\tplayerPreview.setHidden(selected);\n\t\t\t});\n\t\tguideButton.setVerbs(\"Show\", \"Hide\");\n\t\tguideButton.setSize(25, 25);\n\t\tguideButton.setIconSize(8, 17);\n\t\tguideButton.create();\n\n\t\tguideButton.layout(3, 30);\n\n\t\tCustomWidgetToggleButton shareButton \u003d new CustomWidgetToggleButton(\n\t\t\tparent,\n\t\t\t\"Share to Party\",\n\t\t\tSpriteID.UNKNOWN_BUTTON_SQUARE_SMALL,\n\t\t\tSpriteID.UNKNOWN_BUTTON_SQUARE_SMALL_SELECTED,\n\t\t\tCustomSprites.PARTY.getSpriteId(),\n\t\t\tpartyManager::setShareWithParty);\n\t\tshareButton.setVerbs(\"Enable\", \"Disable\");\n\t\tshareButton.setSize(25, 25);\n\t\tshareButton.setIconSize(19, 19);\n\t\tshareButton.create();\n\t\tif (config.transmitToParty())\n\t\t{\n\t\t\tshareButton.toggle();\n\t\t}\n\n\t\tshareButton.layout(30, 30);\n\n\t\t// Create bottom buttons\n\n\t\tCustomWidgetActionButton selectPresetButton \u003d new CustomWidgetActionButton(\n\t\t\tparent,\n\t\t\t\"\",\n\t\t\tSpriteID.TAB_EMOTES,\n\t\t\top -\u003e\n\t\t\t{\n\t\t\t\tuiManager.removeCustomUI();\n\t\t\t\tuiManager.hideVanillaUI();\n\t\t\t\tuiManager.createTab(uiManager.getPresetTab());\n\t\t\t}\n\t\t);\n\t\tselectPresetButton.setSize(40, 40);\n\t\tselectPresetButton.setIconSize(36, 36);\n\t\tselectPresetButton.create();\n\t\tselectPresetButton.addOption(1, \"Choose \" + UIManager.ORANGE_COLOUR_WIDGET_NAME + \"Preset\");\n\t\tselectPresetButton.layout(7, 213);\n\n\t\tpresetExtraDataButton \u003d new CustomWidgetConfigButton(\n\t\t\tparent,\n\t\t\tUIManager.FORCE_RIGHT_CLICK_WIDGET_NAME,\n\t\t\top -\u003e\n\t\t\t{\n\t\t\t\tswitch (op)\n\t\t\t\t{\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tchatboxPanelManager.openTextInput(\"Set name for this preset\")\n\t\t\t\t\t\t\t.value(Strings.nullToEmpty(manager.getCurrentPreset().getName()))\n\t\t\t\t\t\t\t.onDone((content) -\u003e\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (content \u003d\u003d null)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tcontent \u003d Text.removeTags(content).trim();\n\t\t\t\t\t\t\t\tmanager.getCurrentPreset().setName(content);\n\t\t\t\t\t\t\t\tmanager.saveCurrentPreset();\n\t\t\t\t\t\t\t\tnameplate.setText(manager.getCurrentPreset().getDisplayName());\n\n\t\t\t\t\t\t\t}).build();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tallItemSearch\n\t\t\t\t\t\t\t.tooltipText(\"Select\")\n\t\t\t\t\t\t\t.onItemSelected((itemId) -\u003e\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmanager.getCurrentPreset().setIcon(itemId);\n\t\t\t\t\t\t\t\tmanager.saveCurrentPreset();\n\t\t\t\t\t\t\t\tpresetExtraDataButton.setItemIcon(itemId);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.prompt(\"Select icon for this preset\")\n\t\t\t\t\t\t\t.build();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tmanager.getCurrentPreset().setIcon(-1);\n\t\t\t\t\t\tmanager.saveCurrentPreset();\n\t\t\t\t\t\tpresetExtraDataButton.setItemIcon(-1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\tpresetExtraDataButton.setSize(40, 40);\n\t\tpresetExtraDataButton.create();\n\t\tpresetExtraDataButton.addOption(0, UIManager.ORANGE_COLOUR_WIDGET_NAME + \"Preset Config:\");\n\t\tpresetExtraDataButton.addOption(1, \"Set Name\");\n\t\tpresetExtraDataButton.setItemIcon(manager.getCurrentPreset().getIcon());\n\t\tpresetExtraDataButton.layout(97, 213);\n\n\t\tsaveDefaultStateButton \u003d new CustomWidgetActionButton(\n\t\t\tparent,\n\t\t\t\"Default State\",\n\t\t\tSpriteID.PRAYER_THICK_SKIN,\n\t\t\top -\u003e\n\t\t\t{\n\t\t\t\tif (manager.updateDefault(op))\n\t\t\t\t{\n\t\t\t\t\tsaveDefaultStateButton.setIconSprite(115);\n\t\t\t\t\tblockerBox.setHidden(true);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\tsaveDefaultStateButton.setSize(40, 40);\n\t\tsaveDefaultStateButton.setIconSize(30, 30);\n\t\tsaveDefaultStateButton.create();\n\t\tsaveDefaultStateButton.setIconSprite(manager.isDefaultStateSet() ? SpriteID.PRAYER_THICK_SKIN : SpriteID.PRAYER_ROCK_SKIN);\n\t\tsaveDefaultStateButton.addOption(1, \"Save as\");\n\t\tsaveDefaultStateButton.addOption(2, \"Force save as\");\n\t\tsaveDefaultStateButton.layout(142, 213);\n\n\t\t// Create inter-slot bracers\n\t\tfor (Pair\u003cRectangle, Integer\u003e bracer : INTER_SLOT_BRACERS)\n\t\t{\n\t\t\tfinal Rectangle posData \u003d bracer.getLeft();\n\t\t\tWidget bracerWidget \u003d parent.createChild(-1, WidgetType.GRAPHIC);\n\t\t\tbracerWidget.setOriginalX(BASE_POSITION.getX() + posData.x);\n\t\t\tbracerWidget.setOriginalY(BASE_POSITION.getY() + posData.y);\n\t\t\tbracerWidget.setOriginalWidth(posData.width);\n\t\t\tbracerWidget.setOriginalHeight(posData.height);\n\t\t\tbracerWidget.setSpriteId(bracer.getRight());\n\t\t\tbracerWidget.setSpriteTiling(true);\n\t\t\tbracerWidget.revalidate();\n\t\t}\n\n\t\t// Create Slots\n\t\tTransmogPreset preset \u003d manager.getCurrentPreset();\n\t\tfor (TransmogSlot slot : TransmogSlot.values())\n\t\t{\n\t\t\tfinal CustomWidgetTransmogBox box;\n\t\t\tif (slot.getSlotType() \u003d\u003d TransmogSlot.SlotType.ITEM)\n\t\t\t{\n\t\t\t\tbox \u003d new CustomWidgetTransmogBox(TransmogSlot.SlotType.ITEM, parent, slot, this::onTransmogUISlotClicked);\n\t\t\t\tbox.create();\n\t\t\t\tInteger item \u003d preset.getIdForSlot(slot, false);\n\t\t\t\tif (item \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tbox.setEmpty();\n\t\t\t\t}\n\t\t\t\telse if (item \u003d\u003d -1)\n\t\t\t\t{\n\t\t\t\t\tbox.setDefault();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tbox.set(item, itemManager.getItemComposition(item).getName());\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tbox \u003d new CustomWidgetTransmogBox(TransmogSlot.SlotType.SPECIAL, parent, slot, this::onTransmogUISlotClicked);\n\t\t\t\tbox.create();\n\t\t\t\tInteger contents \u003d preset.getIdForSlot(slot, false);\n\t\t\t\tif (contents \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tbox.setEmpty();\n\t\t\t\t}\n\t\t\t\telse if (contents \u003d\u003d -1)\n\t\t\t\t{\n\t\t\t\t\tbox.setDefault();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfinal Mapping mapping \u003d MappingMapping.fromSlot(slot).getFromModel().apply(contents);\n\t\t\t\t\tbox.set(mapping.modelId(), mapping.prettyName());\n\t\t\t\t}\n\t\t\t}\n\t\t\tfinal Point pos \u003d SLOT_POSITIONS.get(slot);\n\t\t\tbox.layout(BASE_POSITION.getX() + pos.getX(), BASE_POSITION.getY() + pos.getY());\n\t\t\tuiSlots.put(slot, box);\n\t\t}\n\n\t\t// Create blocker\n\t\tblockerBox \u003d new CustomWidgetBlockerBox(parent, \"\");\n\t\tblockerBox.setSize(parent.getWidth(), parent.getHeight());\n\t\tblockerBox.create();\n\t\tblockerBox.layout(0, 0);\n\t\tif (manager.isDefaultStateSet())\n\t\t{\n\t\t\tblockerBox.setHidden(true);\n\t\t}\n\n\t\tnameplate \u003d new CustomWidgetNamePlate(parent, 92);\n\t\tnameplate.create();\n\t\tnameplate.setText(manager.getCurrentPreset().getDisplayName());\n\t\tnameplate.layout(92, 196);\n\n\t\tupdateTutorial(manager.isEmptyEquipment());\n\n\t\tparent.revalidate();\n\n\t\tmanager.updateTransmog();\n\t}\n\n\t@Override\n\tvoid onClientTick()\n\t{\n\t\tif (playerPreview !\u003d null)\n\t\t{\n\t\t\tplayerPreview.tickRotation();\n\t\t}\n\t}\n\n\t@Override\n\tpublic void updateTutorial(boolean equipmentState)\n\t{\n\t\tif (!manager.isDefaultStateSet() \u0026\u0026 blockerBox !\u003d null)\n\t\t{\n\t\t\tblockerBox.setTutorialState(equipmentState ? 2 : 1);\n\t\t}\n\t}\n\n\t@Override\n\tpublic void loadPreset(TransmogPreset preset)\n\t{\n\t\tfor (TransmogSlot slot : TransmogSlot.values())\n\t\t{\n\t\t\tuiSlots.get(slot).set(preset.getIdForSlot(slot, false), preset.getName(slot));\n\t\t}\n\t}\n\n\tprivate void onTransmogUISlotClicked(int op, TransmogSlot slot)\n\t{\n\t\tCustomWidgetTransmogBox widget \u003d uiSlots.get(slot);\n\t\tTransmogPreset preset \u003d manager.getCurrentPreset();\n\t\tswitch (op)\n\t\t{\n\t\t\tcase SET_ITEM:\n\t\t\t\tif (uiManager.isSearching())\n\t\t\t\t{\n\t\t\t\t\tuiManager.closeSearch();\n\t\t\t\t}\n\t\t\t\tuiManager.setSearching(true);\n\t\t\t\tif (slot.getSlotType() \u003d\u003d TransmogSlot.SlotType.SPECIAL)\n\t\t\t\t{\n\t\t\t\t\tCustomSpriteSearch s \u003d spriteSearch;\n\t\t\t\t\ts.setTooltipText(\"Set as \" + slot.getName());\n\t\t\t\t\ts.setPrompt(\"Choose for \" + slot.getName() + \" slot\");\n\t\t\t\t\ts.setSlot(slot);\n\t\t\t\t\ts.setOnItemSelected((m) -\u003e\n\t\t\t\t\t{\n\t\t\t\t\t\twidget.setContent(m.modelId(), m.prettyName());\n\t\t\t\t\t\tuiManager.setSearching(false);\n\t\t\t\t\t\tpreset.setSlot(slot, m.kitId(), m.prettyName());\n\t\t\t\t\t\tmanager.updateTransmog();\n\t\t\t\t\t\tmanager.saveCurrentPreset();\n\t\t\t\t\t});\n\n\t\t\t\t\tswitch (slot)\n\t\t\t\t\t{\n\t\t\t\t\t\tcase HAIR:\n\t\t\t\t\t\t\ts.setSource(HairMapping.values());\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase JAW:\n\t\t\t\t\t\t\ts.setSource(FacialHairMapping.values());\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase SLEEVES:\n\t\t\t\t\t\t\ts.setSource(SleeveMapping.values());\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\ts.build();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tCustomItemSearch i \u003d slotItemSearch;\n\t\t\t\t\ti.setTooltipText(\"Set as \" + slot.getName());\n\t\t\t\t\ti.setPrompt(\"Choose for \" + slot.getName() + \" slot\");\n\t\t\t\t\ti.setSlot(slot);\n\t\t\t\t\ti.setOnItemSelected((id, name) -\u003e\n\t\t\t\t\t{\n\t\t\t\t\t\twidget.setContent(id, name);\n\t\t\t\t\t\tuiManager.setSearching(false);\n\t\t\t\t\t\tpreset.setSlot(slot, id, name);\n\t\t\t\t\t\tmanager.updateTransmog();\n\t\t\t\t\t\tmanager.saveCurrentPreset();\n\t\t\t\t\t});\n\t\t\t\t\ti.build();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase CLEAR:\n\t\t\t\tchatboxPanelManager.close();\n\t\t\t\twidget.setEmpty();\n\t\t\t\tpreset.clearSlot(slot);\n\t\t\t\tmanager.updateTransmog();\n\t\t\t\tmanager.saveCurrentPreset();\n\t\t\t\tbreak;\n\t\t\tcase HIDE:\n\t\t\t\tchatboxPanelManager.close();\n\t\t\t\twidget.setDefault();\n\t\t\t\tpreset.setDefaultSlot(slot);\n\t\t\t\tmanager.updateTransmog();\n\t\t\t\tmanager.saveCurrentPreset();\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\ui\\MainTab.java"},{"fileName":"MenuOps.java","content":"/*\n * Copyright (c) 2020, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.ui;\n\npublic class MenuOps\n{\n\tpublic static final int SET_ITEM \u003d 1;\n\tpublic static final int CLEAR \u003d 3;\n\tpublic static final int HIDE \u003d 5;\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\ui\\MenuOps.java"},{"fileName":"PresetTab.java","content":"/*\n * Copyright (c) 2021, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.ui;\n\nimport com.google.inject.Inject;\nimport com.google.inject.Provider;\nimport com.google.inject.Singleton;\nimport io.hydrox.transmog.TransmogPreset;\nimport io.hydrox.transmog.TransmogrificationManager;\nimport io.hydrox.transmog.config.TransmogrificationConfigManager;\nimport net.runelite.api.Client;\nimport net.runelite.api.SpriteID;\nimport net.runelite.api.widgets.JavaScriptCallback;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetPositionMode;\nimport net.runelite.api.widgets.WidgetSizeMode;\nimport net.runelite.api.widgets.WidgetType;\nimport net.runelite.client.callback.ClientThread;\nimport java.awt.Rectangle;\nimport java.awt.event.MouseWheelEvent;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.concurrent.atomic.AtomicInteger;\n\n@Singleton\npublic class PresetTab extends CustomTab\n{\n\tprivate static final int SCROLLBAR_HEIGHT \u003d 203;\n\tprivate static final int SCROLLBAR_WIDTH \u003d 16;\n\tprivate static final int SCROLLBAR_BUTTON_HEIGHT \u003d 16;\n\tprivate static final int SCROLLBAR_PADDING \u003d 1;\n\tprivate static final int SCROLLBAR_TRACK_HEIGHT \u003d SCROLLBAR_HEIGHT - (SCROLLBAR_BUTTON_HEIGHT * 2);\n\tprivate static final int SCROLLBAR_THUMB_CAP_HEIGHT \u003d 5;\n\tprivate static final int PRESETS_PER_LINE \u003d 4;\n\tprivate static final int PRESET_PADDING \u003d 11;\n\tprivate static final int PRESET_EDGE_PADDING \u003d 4;\n\n\tprivate static final int BACK_BUTTON_SPRITE \u003d 1122;\n\n\n\tprivate final Client client;\n\tprivate final ClientThread clientThread;\n\tprivate final TransmogrificationConfigManager config;\n\tprivate final TransmogrificationManager manager;\n\tprivate final Provider\u003cUIManager\u003e uiManager;\n\n\tprivate Widget[] presetScrollbars;\n\tprivate Rectangle boxBounds;\n\tprivate int scrollPos \u003d 0;\n\tprivate int maxScrollPos \u003d 0;\n\n\tprivate List\u003cCustomWidgetPresetTabItem\u003e presets \u003d new ArrayList\u003c\u003e();\n\n\t@Inject\n\tPresetTab(Client client, ClientThread clientThread, TransmogrificationConfigManager config,\n\t\t\t  TransmogrificationManager manager, Provider\u003cUIManager\u003e uiManager)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.clientThread \u003d clientThread;\n\t\tthis.config \u003d config;\n\t\tthis.manager \u003d manager;\n\t\tthis.uiManager \u003d uiManager;\n\t}\n\n\tprivate UIManager getUIManager()\n\t{\n\t\treturn uiManager.get();\n\t}\n\n\t@Override\n\tvoid create()\n\t{\n\t\tfinal Widget parent \u003d getUIManager().getContainer();\n\t\t// Cache the bounds for scrolling code, which runs off of client thread\n\t\tboxBounds \u003d parent.getBounds();\n\n\t\tpresets.clear();\n\t\tAtomicInteger index \u003d new AtomicInteger();\n\t\tmanager.getPresets().stream()\n\t\t\t.filter(Objects::nonNull)\n\t\t\t.forEach(preset -\u003e\n\t\t\t{\n\t\t\t\tint i \u003d index.getAndIncrement();\n\t\t\t\tpresets.add(createPresetBox(preset, parent, i));\n\t\t\t}\n\t\t);\n\n\t\t// Create add button\n\t\tCustomWidgetPresetTabItem w \u003d new CustomWidgetAddPresetButton(parent, \"Preset\", this::addNewPreset);\n\t\tw.create();\n\t\tw.layout(\n\t\t\tPRESET_EDGE_PADDING + (index.get() % PRESETS_PER_LINE) * (CustomWidgetPresetBox.SIZE + PRESET_PADDING),\n\t\t\tPRESET_EDGE_PADDING + (index.get() / PRESETS_PER_LINE) * (CustomWidgetPresetBox.SIZE + PRESET_PADDING)\n\t\t);\n\t\tw.addOption(1, \"Create new\");\n\t\tpresets.add(w);\n\n\t\t// MAGIC!\n\t\tmaxScrollPos \u003d Math.max(\n\t\t\t((int)Math.ceil(presets.size() / (double) PRESETS_PER_LINE) - 5)\n\t\t\t\t* (CustomWidgetPresetBox.SIZE + PRESET_PADDING)\n\t\t\t\t+ (5 * (CustomWidgetPresetBox.SIZE + PRESET_PADDING) - SCROLLBAR_HEIGHT)\n\t\t\t\t+ 1\n\t\t\t, 0);\n\n\t\t// Scrollbar\n\t\tWidget scrollUp \u003d parent.createChild(-1, WidgetType.GRAPHIC);\n\t\tscrollUp.setOriginalWidth(SCROLLBAR_WIDTH);\n\t\tscrollUp.setOriginalHeight(SCROLLBAR_BUTTON_HEIGHT);\n\t\tscrollUp.setSpriteId(SpriteID.SCROLLBAR_ARROW_UP);\n\t\tscrollUp.setOriginalX(parent.getOriginalWidth() - SCROLLBAR_WIDTH - SCROLLBAR_PADDING);\n\t\tscrollUp.setOriginalY(0);\n\t\tscrollUp.revalidate();\n\n\t\tWidget scrollDown \u003d parent.createChild(-1, WidgetType.GRAPHIC);\n\t\tscrollDown.setOriginalWidth(SCROLLBAR_WIDTH);\n\t\tscrollDown.setOriginalHeight(SCROLLBAR_BUTTON_HEIGHT);\n\t\tscrollDown.setSpriteId(SpriteID.SCROLLBAR_ARROW_DOWN);\n\t\tscrollDown.setOriginalX(parent.getOriginalWidth() - SCROLLBAR_WIDTH - SCROLLBAR_PADDING);\n\t\tscrollDown.setOriginalY(SCROLLBAR_HEIGHT - SCROLLBAR_BUTTON_HEIGHT - SCROLLBAR_PADDING);\n\t\tscrollDown.revalidate();\n\n\t\tWidget scrollBg \u003d parent.createChild(-1, WidgetType.GRAPHIC);\n\t\tscrollBg.setOriginalWidth(SCROLLBAR_WIDTH);\n\t\tscrollBg.setOriginalHeight(SCROLLBAR_TRACK_HEIGHT);\n\t\tscrollBg.setSpriteId(SpriteID.SCROLLBAR_THUMB_MIDDLE_DARK);\n\t\tscrollBg.setOriginalX(parent.getOriginalWidth() - SCROLLBAR_WIDTH - SCROLLBAR_PADDING);\n\t\tscrollBg.setOriginalY(SCROLLBAR_BUTTON_HEIGHT);\n\t\tscrollBg.setHasListener(true);\n\t\tscrollBg.setOnClickListener((JavaScriptCallback) ev -\u003e scrollTo(client.getMouseCanvasPosition().getY() - parent.getBounds().y));\n\t\tscrollBg.revalidate();\n\n\t\tWidget scrollBarTop \u003d parent.createChild(-1, WidgetType.GRAPHIC);\n\t\tscrollBarTop.setOriginalWidth(SCROLLBAR_WIDTH);\n\t\tscrollBarTop.setOriginalHeight(SCROLLBAR_THUMB_CAP_HEIGHT);\n\t\tscrollBarTop.setSpriteId(SpriteID.SCROLLBAR_THUMB_TOP);\n\t\tscrollBarTop.setOriginalX(parent.getOriginalWidth() - SCROLLBAR_WIDTH - SCROLLBAR_PADDING);\n\t\tscrollBarTop.setOriginalY(SCROLLBAR_BUTTON_HEIGHT);\n\t\tscrollBarTop.setNoClickThrough(false);\n\t\tscrollBarTop.setHasListener(true);\n\t\tscrollBarTop.revalidate();\n\n\t\tWidget scrollBarBottom \u003d parent.createChild(-1, WidgetType.GRAPHIC);\n\t\tscrollBarBottom.setOriginalWidth(SCROLLBAR_WIDTH);\n\t\tscrollBarBottom.setOriginalHeight(SCROLLBAR_THUMB_CAP_HEIGHT);\n\t\tscrollBarBottom.setSpriteId(SpriteID.SCROLLBAR_THUMB_BOTTOM);\n\t\tscrollBarBottom.setOriginalX(parent.getOriginalWidth() - SCROLLBAR_WIDTH - SCROLLBAR_PADDING);\n\t\tscrollBarBottom.setOriginalY(SCROLLBAR_BUTTON_HEIGHT);\n\t\tscrollBarBottom.setNoClickThrough(false);\n\t\tscrollBarBottom.setHasListener(true);\n\t\tscrollBarBottom.revalidate();\n\n\t\tWidget scrollBarCentre \u003d parent.createChild(-1, WidgetType.GRAPHIC);\n\t\tscrollBarCentre.setOriginalWidth(SCROLLBAR_WIDTH);\n\t\tscrollBarCentre.setOriginalHeight(0);\n\t\tscrollBarCentre.setSpriteId(SpriteID.SCROLLBAR_THUMB_MIDDLE);\n\t\tscrollBarCentre.setOriginalX(parent.getOriginalWidth() - SCROLLBAR_WIDTH - SCROLLBAR_PADDING);\n\t\tscrollBarCentre.setOriginalY(SCROLLBAR_BUTTON_HEIGHT);\n\t\tscrollBarCentre.setNoClickThrough(false);\n\t\tscrollBarCentre.setHasListener(true);\n\t\tscrollBarCentre.revalidate();\n\n\n\t\tWidget scrollBarControl \u003d parent.createChild(-1, WidgetType.GRAPHIC);\n\t\tscrollBarControl.setOriginalWidth(SCROLLBAR_WIDTH);\n\t\tscrollBarControl.setOriginalHeight(0);\n\t\tscrollBarControl.setOriginalX(parent.getOriginalWidth() - SCROLLBAR_WIDTH - SCROLLBAR_PADDING);\n\t\tscrollBarControl.setOriginalY(SCROLLBAR_BUTTON_HEIGHT);\n\t\tscrollBarControl.setHasListener(true);\n\t\tscrollBarControl.setDragParent(scrollBg);\n\t\tscrollBarControl.setNoClickThrough(false);\n\t\tscrollBarControl.setOnDragListener((JavaScriptCallback) ev -\u003e scrollTo(client.getMouseCanvasPosition().getY() - parent.getBounds().y));\n\t\tscrollBarControl.revalidate();\n\n\n\t\tpresetScrollbars \u003d new Widget[]{scrollBarTop, scrollBarBottom, scrollBarCentre, scrollBarControl};\n\t\tlayoutScrollbar();\n\n\t\tWidget cover \u003d parent.createChild(-1, WidgetType.GRAPHIC);\n\t\tcover.setSpriteId(897);\n\t\tcover.setSpriteTiling(true);\n\t\tcover.setOriginalX(0);\n\t\tcover.setOriginalY(SCROLLBAR_HEIGHT + 1);\n\t\tcover.setOriginalWidth(parent.getOriginalWidth());\n\t\tcover.setOriginalHeight(parent.getOriginalHeight() - (SCROLLBAR_HEIGHT + 1));\n\t\tcover.revalidate();\n\n\t\t// Create bottom buttons\n\n\t\tCustomWidgetActionButtonWithText selectPresetButton \u003d new CustomWidgetActionButtonWithText(\n\t\t\tparent,\n\t\t\t\"\",\n\t\t\tBACK_BUTTON_SPRITE,\n\t\t\t\"\",\n\t\t\top -\u003e\n\t\t\t{\n\t\t\t\tgetUIManager().removeCustomUI();\n\t\t\t\tgetUIManager().hideVanillaUI();\n\t\t\t\tgetUIManager().getEquipmentOverlay().create(true);\n\t\t\t\tgetUIManager().createTab(getUIManager().getMainTab());\n\t\t\t}\n\t\t);\n\t\tselectPresetButton.setSize(40, 40);\n\t\tselectPresetButton.setIconSize(25, 20);\n\t\tselectPresetButton.create();\n\t\tselectPresetButton.addOption(1, \"Back\");\n\t\tselectPresetButton.layout(7, 213);\n\n\t\tWidget separator \u003d parent.createChild(-1, WidgetType.LINE);\n\t\tseparator.setOriginalX(-1);\n\t\tseparator.setOriginalY(SCROLLBAR_HEIGHT);\n\t\tseparator.setXPositionMode(WidgetPositionMode.ABSOLUTE_CENTER);\n\t\tseparator.setYPositionMode(WidgetPositionMode.ABSOLUTE_TOP);\n\t\tseparator.setOriginalHeight(0);\n\t\tseparator.setOriginalWidth(6);\n\t\tseparator.setWidthMode(WidgetSizeMode.MINUS);\n\t\tseparator.setTextColor(0xaa9f75);\n\t\tseparator.revalidate();\n\n\t\tCustomWidgetActionButton deletePresetButton \u003d new CustomWidgetActionButton(\n\t\t\tparent,\n\t\t\tUIManager.FORCE_RIGHT_CLICK_WIDGET_NAME,\n\t\t\tSpriteID.BANK_RAID_SEND_TO_TRASH,\n\t\t\top -\u003e\n\t\t\t{\n\t\t\t\tTransmogPreset current \u003d manager.getCurrentPreset();\n\t\t\t\tmanager.deletePreset(current.getId());\n\t\t\t\tfor (int i \u003d current.getId() - 1; i \u003e\u003d 0; i--)\n\t\t\t\t{\n\t\t\t\t\tif (manager.getPreset(i) !\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tselectPreset(i);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (int i \u003d current.getId() + 1; i \u003c\u003d config.lastIndex(); i++)\n\t\t\t\t{\n\t\t\t\t\tif (manager.getPreset(i) !\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tselectPreset(i);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\tdeletePresetButton.setSize(40, 40);\n\t\tdeletePresetButton.setIconSize(26, 20);\n\t\tdeletePresetButton.create();\n\t\tdeletePresetButton.addOption(1, \"Delete active \" + UIManager.ORANGE_COLOUR_WIDGET_NAME + \"Preset\");\n\t\tdeletePresetButton.layout(52, 213);\n\n\n\t\tparent.revalidate();\n\t\tpresets.stream().filter(b -\u003e b.getId() \u003d\u003d config.currentPreset()).findFirst().ifPresent(box -\u003e scrollTo(box.y));\n\t}\n\n\t/**\n\t * Re-create the overlay, for redoing the very precise ordering of widgets that makes the effect work\n\t */\n\tvoid recreate()\n\t{\n\t\tfinal Widget parent \u003d getUIManager().getContainer();\n\t\tparent.deleteAllChildren();\n\t\tcreate();\n\t}\n\n\tprivate CustomWidgetPresetTabItem createPresetBox(TransmogPreset preset, Widget parent, int i)\n\t{\n\t\tCustomWidgetPresetTabItem w \u003d new CustomWidgetPresetBox(preset, parent, this::selectPreset);\n\t\tw.create();\n\t\tw.layout(\n\t\t\tPRESET_EDGE_PADDING + (i % PRESETS_PER_LINE) * (CustomWidgetPresetBox.SIZE + PRESET_PADDING),\n\t\t\tPRESET_EDGE_PADDING + (i / PRESETS_PER_LINE) * (CustomWidgetPresetBox.SIZE + PRESET_PADDING)\n\t\t);\n\t\tif (preset.getId() \u003d\u003d config.currentPreset())\n\t\t{\n\t\t\tw.setSelected(true);\n\t\t}\n\t\tw.addOption(1, \"Select\");\n\t\treturn w;\n\t}\n\n\tprivate void selectPreset(int id)\n\t{\n\t\tpresets.forEach(b -\u003e b.setSelected(b.getId() \u003d\u003d id));\n\t\tconfig.currentPreset(id);\n\t\tmanager.updateTransmog();\n\t\trecreate();\n\t}\n\n\tprivate void addNewPreset(int id)\n\t{\n\t\tTransmogPreset newPreset \u003d manager.createNewPreset();\n\t\tCustomWidgetPresetTabItem add \u003d presets.get(presets.size() - 1);\n\t\tadd.layout(\n\t\t\t(presets.size() % PRESETS_PER_LINE) * (CustomWidgetPresetBox.SIZE + PRESET_PADDING),\n\t\t\t(presets.size() / PRESETS_PER_LINE) * (CustomWidgetPresetBox.SIZE + PRESET_PADDING)\n\t\t);\n\t\tpresets.add(presets.size() - 1, createPresetBox(newPreset, getUIManager().getContainer(), presets.size() - 1));\n\t\tselectPreset(newPreset.getId());\n\t}\n\n\t@Override\n\tpublic void mouseWheelMoved(MouseWheelEvent event)\n\t{\n\t\tif (boxBounds !\u003d null \u0026\u0026 boxBounds.contains(event.getPoint()))\n\t\t{\n\t\t\tclientThread.invoke(() -\u003e scrollPresets(event.getUnitsToScroll() * 6));\n\t\t}\n\t}\n\n\tprivate void scrollPresets(int pixels)\n\t{\n\t\tscrollPos +\u003d pixels;\n\t\tdoScroll();\n\t}\n\n\tprivate void scrollTo(int ypos)\n\t{\n\t\tint thumbHeight \u003d Math.max((int) (SCROLLBAR_HEIGHT / (double)(maxScrollPos + SCROLLBAR_HEIGHT) * SCROLLBAR_TRACK_HEIGHT), SCROLLBAR_THUMB_CAP_HEIGHT * 2);\n\t\tint thumbCentRange \u003d SCROLLBAR_TRACK_HEIGHT - thumbHeight;\n\t\tint thumbCentTop \u003d SCROLLBAR_BUTTON_HEIGHT + thumbHeight / 2;\n\t\tdouble centrePer \u003d Math.min(1d, Math.max(0d, (ypos - thumbCentTop) / (double)thumbCentRange));\n\t\tscrollPos \u003d (int) (centrePer * maxScrollPos);\n\t\tdoScroll();\n\t}\n\n\tprivate void doScroll()\n\t{\n\t\tscrollPos \u003d Math.max(0, Math.min(scrollPos, maxScrollPos));\n\t\tlayoutScrollbar();\n\t\tfor (CustomWidgetPresetTabItem p : presets)\n\t\t{\n\t\t\tp.scrollBy(scrollPos);\n\t\t}\n\t}\n\n\tprivate void layoutScrollbar()\n\t{\n\t\t// Get the percentage of the presets visible on screen, and use that to figure out the size of the scrollbar in\n\t\t// the track. Make sure it\u0027s always at least large enough for the caps if there are way too many presets\n\t\tint thumbHeight \u003d Math.max((int) (SCROLLBAR_HEIGHT / (double)(maxScrollPos + SCROLLBAR_HEIGHT) * SCROLLBAR_TRACK_HEIGHT), SCROLLBAR_THUMB_CAP_HEIGHT * 2);\n\t\tint thumbBuffer \u003d SCROLLBAR_TRACK_HEIGHT - thumbHeight;\n\t\t// We can then use the gap remaining as the space to move the top of the scrollbar, and therefore the whole bar\n\t\tint thumbTop \u003d (int) (scrollPos / (double)(maxScrollPos) * thumbBuffer);\n\n\t\tpresetScrollbars[0].setOriginalY(SCROLLBAR_BUTTON_HEIGHT + thumbTop);\n\t\t// I\u0027m not sure why the bottom cap is ~6px too far down\n\t\tpresetScrollbars[1].setOriginalY(SCROLLBAR_BUTTON_HEIGHT + thumbTop + thumbHeight - SCROLLBAR_THUMB_CAP_HEIGHT - 1);\n\t\tpresetScrollbars[2].setOriginalY(SCROLLBAR_BUTTON_HEIGHT + thumbTop + SCROLLBAR_THUMB_CAP_HEIGHT);\n\t\t// The height atm is for the entire bar, so cut off the caps for the centre\n\t\tpresetScrollbars[2].setOriginalHeight(thumbHeight - SCROLLBAR_THUMB_CAP_HEIGHT * 2);\n\t\tpresetScrollbars[3].setOriginalY(SCROLLBAR_BUTTON_HEIGHT + thumbTop);\n\t\tpresetScrollbars[3].setOriginalHeight(thumbHeight);\n\t\tArrays.stream(presetScrollbars).forEach(Widget::revalidate);\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\ui\\PresetTab.java"},{"fileName":"UIManager.java","content":"/*\n * Copyright (c) 2020, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog.ui;\n\nimport com.google.inject.Inject;\nimport com.google.inject.Provider;\nimport com.google.inject.Singleton;\nimport io.hydrox.transmog.TransmogPreset;\nimport lombok.Getter;\nimport lombok.Setter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.widgets.InterfaceID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.game.chatbox.ChatboxPanelManager;\nimport net.runelite.client.ui.FontManager;\nimport java.awt.FontMetrics;\nimport java.awt.Toolkit;\nimport java.awt.event.MouseWheelEvent;\n\n@Singleton\n@Slf4j\npublic class UIManager\n{\n\tpublic static final String FORCE_RIGHT_CLICK_WIDGET_NAME \u003d \"\u003ccol\u003d004356\u003e\";\n\tpublic static final String ORANGE_COLOUR_WIDGET_NAME \u003d \"\u003ccol\u003dff981f\u003e\";\n\tstatic final FontMetrics FONT_METRICS \u003d Toolkit.getDefaultToolkit().getFontMetrics(FontManager.getRunescapeSmallFont());\n\n\tprivate final ChatboxPanelManager chatboxPanelManager;\n\tprivate final Client client;\n\tprivate final ClientThread clientThread;\n\n\tprivate final Provider\u003cMainTab\u003e mainTab;\n\n\tprivate final Provider\u003cEquipmentOverlay\u003e equipmentOverlay;\n\n\tprivate final Provider\u003cPresetTab\u003e presetTab;\n\n\tpublic MainTab getMainTab()\n\t{\n\t\treturn mainTab.get();\n\t}\n\n\tpublic EquipmentOverlay getEquipmentOverlay()\n\t{\n\t\treturn equipmentOverlay.get();\n\t}\n\n\tpublic PresetTab getPresetTab()\n\t{\n\t\treturn presetTab.get();\n\t}\n\n\t@Getter\n\t@Setter\n\tprivate boolean uiCreated \u003d false;\n\n\t@Getter\n\t@Setter\n\tprivate boolean isSearching \u003d false;\n\n\tCustomTab currentTab;\n\n\t@Inject\n\tUIManager(ChatboxPanelManager chatboxPanelManager, Client client, ClientThread clientThread,\n\t\t\t  Provider\u003cMainTab\u003e mainTab, Provider\u003cEquipmentOverlay\u003e equipmentOverlay, Provider\u003cPresetTab\u003e presetTab)\n\t{\n\t\tthis.chatboxPanelManager \u003d chatboxPanelManager;\n\t\tthis.client \u003d client;\n\t\tthis.clientThread \u003d clientThread;\n\t\tthis.mainTab \u003d mainTab;\n\t\tthis.equipmentOverlay \u003d equipmentOverlay;\n\t\tthis.presetTab \u003d presetTab;\n\t}\n\n\tpublic void shutDown()\n\t{\n\t\tclientThread.invoke(this::removeCustomUI);\n\t\tuiCreated \u003d false;\n\t\tcloseSearch();\n\t\tcurrentTab.shutDown();\n\t}\n\n\tpublic void createTab(CustomTab tab)\n\t{\n\t\tcurrentTab \u003d tab;\n\t\tcurrentTab.create();\n\t}\n\n\tpublic void onPvpChanged(boolean newValue)\n\t{\n\t\tcurrentTab.onPvpChanged(newValue);\n\t}\n\n\tpublic void onResizeableChanged()\n\t{\n\t\tuiCreated \u003d false;\n\t\tremoveCustomUI();\n\t\tcreateTab(equipmentOverlay.get());\n\t}\n\n\tWidget getContainer()\n\t{\n\t\tfinal Widget equipment \u003d client.getWidget(InterfaceID.EQUIPMENT, 0);\n\t\treturn equipment.getParent();\n\t}\n\n\tvoid closeSearch()\n\t{\n\t\tif (isSearching)\n\t\t{\n\t\t\tchatboxPanelManager.close();\n\t\t\tisSearching \u003d false;\n\t\t}\n\n\t}\n\n\tpublic boolean isVanillaUIHidden()\n\t{\n\t\treturn getContainer().getChild(1).isHidden();\n\t}\n\n\tvoid hideVanillaUI()\n\t{\n\t\tfor (Widget child : getContainer().getNestedChildren())\n\t\t{\n\t\t\tchild.setHidden(true);\n\t\t\tchild.revalidate();\n\t\t}\n\t}\n\n\tpublic void removeCustomUI()\n\t{\n\t\tfinal Widget parent \u003d getContainer();\n\t\tparent.deleteAllChildren();\n\t\tfor (Widget child : parent.getNestedChildren())\n\t\t{\n\t\t\tchild.setHidden(false);\n\t\t\tchild.revalidate();\n\t\t}\n\t\tcurrentTab.destroy();\n\t\tparent.revalidate();\n\t\tcloseSearch();\n\t}\n\n\tpublic void loadPreset(TransmogPreset preset)\n\t{\n\t\tif (currentTab !\u003d null)\n\t\t{\n\t\t\tcurrentTab.loadPreset(preset);\n\t\t}\n\t}\n\n\tpublic void onClientTick()\n\t{\n\t\tif (currentTab !\u003d null)\n\t\t{\n\t\t\tcurrentTab.onClientTick();\n\t\t}\n\t}\n\n\tpublic void updateTutorial(boolean equipmentState)\n\t{\n\t\tif (currentTab !\u003d null)\n\t\t{\n\t\t\tcurrentTab.updateTutorial(equipmentState);\n\t\t}\n\t}\n\n\tpublic void mouseWheelMoved(MouseWheelEvent event)\n\t{\n\t\tif (currentTab !\u003d null)\n\t\t{\n\t\t\tcurrentTab.mouseWheelMoved(event);\n\t\t}\n\t}\n\n\tpublic static String cutStringToPxWidth(String str, int targetWidth)\n\t{\n\t\treturn cutStringToPxWidth(str, targetWidth, false);\n\t}\n\n\tpublic static String cutStringToPxWidth(String str, int targetWidth, boolean withEllipsis)\n\t{\n\t\tint width \u003d UIManager.FONT_METRICS.stringWidth(str);\n\t\tString newStr \u003d str;\n\t\twhile(width \u003e targetWidth)\n\t\t{\n\t\t\tnewStr \u003d newStr.substring(0, newStr.length() - 1);\n\t\t\twidth \u003d UIManager.FONT_METRICS.stringWidth(newStr + (withEllipsis ? \"...\" : \"\"));\n\t\t}\n\t\treturn newStr + (withEllipsis ? \"...\" : \"\");\n\t}\n}\n","filePath":"src\\main\\java\\io\\hydrox\\transmog\\ui\\UIManager.java"},{"fileName":"TransmogMigrateTest.java","content":"/*\n * Copyright (c) 2021, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog;\n\nimport com.google.inject.Guice;\nimport com.google.inject.Inject;\nimport com.google.inject.testing.fieldbinder.Bind;\nimport com.google.inject.testing.fieldbinder.BoundFieldModule;\nimport io.hydrox.transmog.config.TransmogrificationConfigManager;\nimport net.runelite.api.Client;\nimport net.runelite.client.Notifier;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.game.ItemManager;\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport static org.mockito.ArgumentMatchers.any;\nimport static org.mockito.ArgumentMatchers.anyInt;\nimport org.mockito.Mock;\nimport static org.mockito.Mockito.never;\nimport static org.mockito.Mockito.times;\nimport static org.mockito.Mockito.verify;\nimport static org.mockito.Mockito.when;\nimport org.mockito.junit.MockitoJUnitRunner;\n\n@RunWith(MockitoJUnitRunner.class)\npublic class TransmogMigrateTest\n{\n\tprivate static final String V1_CONFIG \u003d \"2643,19697,null,24802,null,24804,-1,10083,24680,-1\";\n\n\t@Mock\n\t@Bind\n\tprivate Client client;\n\n\t@Mock\n\t@Bind\n\tprivate ClientThread clientThread;\n\n\t@Mock\n\t@Bind\n\tprivate Notifier notifier;\n\n\t@Mock\n\t@Bind\n\tprivate ItemManager itemManager;\n\n\t@Mock\n\t@Bind\n\tprivate ChatMessageManager chatMessageManager;\n\n\t@Mock\n\t@Bind\n\tprivate TransmogrificationConfigManager config;\n\n\t@Inject\n\tprivate TransmogrificationManager manager;\n\n\t@Before\n\tpublic void before()\n\t{\n\t\tGuice.createInjector(BoundFieldModule.of(this)).injectMembers(this);\n\t}\n\n\t@Test\n\tpublic void testMigrateV1()\n\t{\n\t\twhen(config.lastIndex()).thenReturn(0);\n\t\t// config.getPresetData(0) \u003d\u003d null\n\t\twhen(config.getPresetData(2)).thenReturn(V1_CONFIG);\n\t\twhen(config.getPresetData(4)).thenReturn(V1_CONFIG);\n\n\t\tmanager.migrateV1();\n\n\t\tverify(config).lastIndex(5);\n\t\tverify(config, times(2)).savePreset(anyInt(), any());\n\t}\n\n\t@Test\n\tpublic void testDontMigrate()\n\t{\n\t\twhen(config.lastIndex()).thenReturn(3);\n\n\t\tmanager.migrateV1();\n\n\t\tverify(config, never()).lastIndex(5);\n\t\tverify(config, never()).savePreset(anyInt(), any());\n\t}\n}\n","filePath":"src\\test\\java\\io\\hydrox\\transmog\\TransmogMigrateTest.java"},{"fileName":"TransmogPresetParserTest.java","content":"/*\n * Copyright (c) 2021, Hydrox6 \u003cikada@protonmail.ch\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage io.hydrox.transmog;\n\nimport io.hydrox.transmog.config.V1Parser;\nimport io.hydrox.transmog.config.V2Parser;\nimport static org.junit.Assert.assertEquals;\nimport static org.junit.Assert.assertNull;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.junit.MockitoJUnitRunner;\nimport java.util.Arrays;\nimport java.util.List;\n\n@RunWith(MockitoJUnitRunner.class)\npublic class TransmogPresetParserTest\n{\n\tprivate static final String V1_CONFIG \u003d \"2643,19697,null,24802,null,24804,-1,10083,24680,-1\";\n\tprivate static final List\u003cString\u003e V1_SLOT_VALUES \u003d Arrays.asList(\"2643\",\"19697\",\"null\",\"24802\",\"null\",\"24804\",\"-1\",\"10083\",\"24680\",\"-1\");\n\tprivate static final String V2_CONFIG \u003d \"\\\"25500,monke,10828,1052,1704,2503,-1,2497,null,7460,3105,-1\";\n\tprivate static final List\u003cString\u003e V2_SLOT_VALUES \u003d Arrays.asList(\"10828\",\"1052\",\"1704\",\"2503\",\"-1\",\"2497\",\"null\",\"7460\",\"3105\",\"-1\");\n\n\t@Test\n\tpublic void testV1Parser()\n\t{\n\t\tV1Parser parser \u003d new V1Parser();\n\t\tparser.parse(V1_CONFIG);\n\t\tassertEquals(V1_SLOT_VALUES, parser.getSlotValues());\n\t\tassertEquals(-1, parser.getIcon());\n\t\tassertEquals(\"\", parser.getName());\n\t}\n\n\t@Test\n\tpublic void testV2Parser()\n\t{\n\t\tV2Parser parser \u003d new V2Parser();\n\t\tparser.parse(V2_CONFIG);\n\t\tassertEquals(V2_SLOT_VALUES, parser.getSlotValues());\n\t\tassertEquals(25500, parser.getIcon());\n\t\tassertEquals(\"monke\", parser.getName());\n\n\t\t// Check deny V1\n\t\tparser \u003d new V2Parser();\n\t\tparser.parse(V1_CONFIG);\n\t\tassertEquals(\"\", parser.getName());\n\t\tassertEquals(-1, parser.getIcon());\n\t\tassertNull(parser.getSlotValues());\n\t}\n\n\t@Test\n\tpublic void testV1ToV2Migration()\n\t{\n\t\tV1Parser v1 \u003d new V1Parser();\n\t\tv1.parse(V1_CONFIG);\n\t\tV2Parser v2 \u003d new V2Parser();\n\t\tv2.migrate(v1);\n\n\t\tassertEquals(V1_SLOT_VALUES, v2.getSlotValues());\n\t\tassertEquals(-1, v2.getIcon());\n\t\tassertEquals(\"\", v2.getName());\n\t}\n\n\t@Test\n\tpublic void testV2ToV1Migration()\n\t{\n\t\tV2Parser v2 \u003d new V2Parser();\n\t\tv2.parse(V2_CONFIG);\n\t\tV1Parser v1 \u003d new V1Parser();\n\t\tv1.migrate(v2);\n\n\t\tassertEquals(V2_SLOT_VALUES, v1.getSlotValues());\n\t\tassertEquals(-1, v1.getIcon());\n\t\tassertEquals(\"\", v1.getName());\n\t}\n}\n","filePath":"src\\test\\java\\io\\hydrox\\transmog\\TransmogPresetParserTest.java"},{"fileName":"TransmogrificationPluginLauncher.java","content":"package io.hydrox.transmog;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class TransmogrificationPluginLauncher\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(TransmogrificationPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\io\\hydrox\\transmog\\TransmogrificationPluginLauncher.java"}]},{"commit":"ad9581df8936c35bad277823de31bb088328f736","repository":"https://github.com/Zodomo/osrs-claude.git","internalName":"osrs-claude","files":[{"fileName":"ClaudeModel.java","content":"package com.zodomo.osrsclaude;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@Getter\n@RequiredArgsConstructor\npublic enum ClaudeModel\n{\n\tHAIKU(\"claude-haiku-4-5-20251001\", \"Haiku 4.5\"),\n\tSONNET(\"claude-sonnet-4-5-20250929\", \"Sonnet 4.5\"),\n\tOPUS(\"claude-opus-4-5-20251124\", \"Opus 4.5\");\n\n\tprivate final String modelId;\n\tprivate final String displayName;\n\n\t@Override\n\tpublic String toString()\n\t{\n\t\treturn displayName;\n\t}\n}\n","filePath":"src\\main\\java\\com\\zodomo\\osrsclaude\\ClaudeModel.java"},{"fileName":"OsrsClaudeConfig.java","content":"package com.zodomo.osrsclaude;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.Range;\n\n@ConfigGroup(\"osrsclaude\")\npublic interface OsrsClaudeConfig extends Config\n{\n\t@ConfigItem(\n\t\tkeyName \u003d \"apiKey\",\n\t\tname \u003d \"Claude API Key\",\n\t\tdescription \u003d \"Your Anthropic API key for Claude\",\n\t\tsecret \u003d true,\n\t\tposition \u003d 1\n\t)\n\tdefault String apiKey()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"batchNumber\",\n\t\tname \u003d \"Response Batches\",\n\t\tdescription \u003d \"Number of 200-character message batches for responses (max chars \u003d 200 * this value)\",\n\t\tposition \u003d 2\n\t)\n\t@Range(min \u003d 1, max \u003d 10)\n\tdefault int batchNumber()\n\t{\n\t\treturn 3;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"model\",\n\t\tname \u003d \"Model\",\n\t\tdescription \u003d \"Which Claude model to use\",\n\t\tposition \u003d 3\n\t)\n\tdefault ClaudeModel model()\n\t{\n\t\treturn ClaudeModel.HAIKU;\n\t}\n}\n","filePath":"src\\main\\java\\com\\zodomo\\osrsclaude\\OsrsClaudeConfig.java"},{"fileName":"OsrsClaudePlugin.java","content":"package com.zodomo.osrsclaude;\n\nimport com.google.gson.Gson;\nimport com.google.gson.JsonArray;\nimport com.google.gson.JsonObject;\nimport com.google.inject.Provides;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.Item;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.api.ItemContainer;\nimport net.runelite.api.Player;\nimport net.runelite.api.Quest;\nimport net.runelite.api.QuestState;\nimport net.runelite.api.Skill;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.CommandExecuted;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.chat.ChatColorType;\nimport net.runelite.client.chat.ChatMessageBuilder;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.chat.QueuedMessage;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport okhttp3.Call;\nimport okhttp3.Callback;\nimport okhttp3.MediaType;\nimport okhttp3.OkHttpClient;\nimport okhttp3.Request;\nimport okhttp3.RequestBody;\nimport okhttp3.Response;\nimport okhttp3.ResponseBody;\n\nimport javax.inject.Inject;\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Claude Chat\",\n\tdescription \u003d \"Chat with Claude AI in-game using ::claude commands\",\n\ttags \u003d {\"claude\", \"ai\", \"chat\", \"anthropic\"}\n)\npublic class OsrsClaudePlugin extends Plugin\n{\n\tprivate static final String COMMAND_NAME \u003d \"claude\";\n\tprivate static final String API_URL \u003d \"https://api.anthropic.com/v1/messages\";\n\tprivate static final MediaType JSON \u003d MediaType.get(\"application/json; charset\u003dutf-8\");\n\tprivate static final int MAX_CHARS_PER_MESSAGE \u003d 200;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate OsrsClaudeConfig config;\n\n\t@Inject\n\tprivate ChatMessageManager chatMessageManager;\n\n\t@Inject\n\tprivate ItemManager itemManager;\n\n\t@Inject\n\tprivate Gson gson;\n\n\t@Inject\n\tprivate OkHttpClient httpClient;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tlog.info(\"Claude Chat plugin started\");\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tlog.info(\"Claude Chat plugin stopped\");\n\t}\n\n\t@Subscribe\n\tpublic void onCommandExecuted(CommandExecuted event)\n\t{\n\t\tif (!event.getCommand().equalsIgnoreCase(COMMAND_NAME))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tString[] args \u003d event.getArguments();\n\t\tif (args \u003d\u003d null || args.length \u003d\u003d 0)\n\t\t{\n\t\t\tsendChatMessage(\"Please provide a prompt after ::claude\");\n\t\t\treturn;\n\t\t}\n\n\t\tString prompt \u003d String.join(\" \", args);\n\n\t\tString apiKey \u003d config.apiKey();\n\t\tif (apiKey \u003d\u003d null || apiKey.isEmpty())\n\t\t{\n\t\t\tsendChatMessage(\"Please set your Claude API key in the plugin settings\");\n\t\t\treturn;\n\t\t}\n\n\t\tsendChatMessage(\"Asking Claude...\");\n\n\t\t// Defer API call to avoid script reentrance - Quest.getState() runs scripts\n\t\tclientThread.invokeLater(() -\u003e callClaudeApi(prompt));\n\t}\n\n\tprivate void callClaudeApi(String userPrompt)\n\t{\n\t\tint maxChars \u003d MAX_CHARS_PER_MESSAGE * config.batchNumber();\n\t\tString systemPrompt \u003d buildSystemPrompt(maxChars);\n\n\t\tJsonObject requestBody \u003d new JsonObject();\n\t\trequestBody.addProperty(\"model\", config.model().getModelId());\n\t\trequestBody.addProperty(\"max_tokens\", 1024);\n\t\trequestBody.addProperty(\"system\", systemPrompt);\n\n\t\tJsonArray messages \u003d new JsonArray();\n\t\tJsonObject userMessage \u003d new JsonObject();\n\t\tuserMessage.addProperty(\"role\", \"user\");\n\t\tuserMessage.addProperty(\"content\", userPrompt);\n\t\tmessages.add(userMessage);\n\t\trequestBody.add(\"messages\", messages);\n\n\t\tRequest request \u003d new Request.Builder()\n\t\t\t.url(API_URL)\n\t\t\t.header(\"Content-Type\", \"application/json\")\n\t\t\t.header(\"x-api-key\", config.apiKey())\n\t\t\t.header(\"anthropic-version\", \"2023-06-01\")\n\t\t\t.post(RequestBody.create(JSON, gson.toJson(requestBody)))\n\t\t\t.build();\n\n\t\thttpClient.newCall(request).enqueue(new Callback()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void onFailure(Call call, IOException e)\n\t\t\t{\n\t\t\t\tlog.error(\"Claude API call failed\", e);\n\t\t\t\tsendChatMessage(\"Error: Failed to reach Claude API\");\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void onResponse(Call call, Response response) throws IOException\n\t\t\t{\n\t\t\t\ttry (ResponseBody body \u003d response.body())\n\t\t\t\t{\n\t\t\t\t\tif (!response.isSuccessful())\n\t\t\t\t\t{\n\t\t\t\t\t\tString errorBody \u003d body !\u003d null ? body.string() : \"Unknown error\";\n\t\t\t\t\t\tlog.error(\"Claude API error {}: {}\", response.code(), errorBody);\n\t\t\t\t\t\tsendChatMessage(\"Error: Claude API returned \" + response.code());\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (body \u003d\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tsendChatMessage(\"Error: Empty response from Claude\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tString responseJson \u003d body.string();\n\t\t\t\t\tString claudeResponse \u003d parseClaudeResponse(responseJson);\n\n\t\t\t\t\tif (claudeResponse !\u003d null \u0026\u0026 !claudeResponse.isEmpty())\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayResponse(claudeResponse);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tsendChatMessage(\"Error: Could not parse Claude\u0027s response\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate String buildSystemPrompt(int maxChars)\n\t{\n\t\tString playerName \u003d getPlayerName();\n\t\tString skillBreakdown \u003d getSkillBreakdown();\n\t\tString completedQuests \u003d getQuestsByState(QuestState.FINISHED);\n\t\tString inProgressQuests \u003d getQuestsByState(QuestState.IN_PROGRESS);\n\t\tString inventoryItems \u003d getInventoryItems();\n\t\tString equippedItems \u003d getEquippedItems();\n\t\tString location \u003d getPlayerLocation();\n\n\t\tStringBuilder sb \u003d new StringBuilder();\n\t\tsb.append(\"You are Claude, an AI assistant responding to \").append(playerName).append(\" in Old School RuneScape. \");\n\t\tsb.append(\"Here is \").append(playerName).append(\"\u0027s skill level breakdown: \").append(skillBreakdown).append(\". \");\n\t\tsb.append(\"Completed quests: \").append(completedQuests.isEmpty() ? \"None\" : completedQuests).append(\". \");\n\t\tsb.append(\"Quests in progress: \").append(inProgressQuests.isEmpty() ? \"None\" : inProgressQuests).append(\". \");\n\t\tsb.append(\"Inventory items: \").append(inventoryItems.isEmpty() ? \"Empty\" : inventoryItems).append(\". \");\n\t\tsb.append(\"Equipped items: \").append(equippedItems.isEmpty() ? \"Nothing\" : equippedItems).append(\". \");\n\t\tsb.append(\"Location: \").append(location).append(\". \");\n\t\tsb.append(\"You MUST keep your response under \").append(maxChars).append(\" characters total. \");\n\t\tsb.append(\"Be concise, helpful, and friendly. \");\n\t\tsb.append(\"Do not use special formatting, markdown, or line breaks. \");\n\t\tsb.append(\"Respond in plain text only.\");\n\n\t\treturn sb.toString();\n\t}\n\n\tprivate String getPlayerName()\n\t{\n\t\tPlayer localPlayer \u003d client.getLocalPlayer();\n\t\tif (localPlayer !\u003d null \u0026\u0026 localPlayer.getName() !\u003d null)\n\t\t{\n\t\t\treturn localPlayer.getName();\n\t\t}\n\t\treturn \"a player\";\n\t}\n\n\tprivate String getSkillBreakdown()\n\t{\n\t\tStringBuilder sb \u003d new StringBuilder();\n\t\tSkill[] skills \u003d {\n\t\t\tSkill.ATTACK, Skill.STRENGTH, Skill.DEFENCE, Skill.RANGED, Skill.PRAYER,\n\t\t\tSkill.MAGIC, Skill.RUNECRAFT, Skill.HITPOINTS, Skill.CRAFTING, Skill.MINING,\n\t\t\tSkill.SMITHING, Skill.FISHING, Skill.COOKING, Skill.FIREMAKING, Skill.WOODCUTTING,\n\t\t\tSkill.AGILITY, Skill.HERBLORE, Skill.THIEVING, Skill.FLETCHING, Skill.SLAYER,\n\t\t\tSkill.FARMING, Skill.CONSTRUCTION, Skill.HUNTER, Skill.SAILING\n\t\t};\n\n\t\tfor (int i \u003d 0; i \u003c skills.length; i++)\n\t\t{\n\t\t\tSkill skill \u003d skills[i];\n\t\t\tint level \u003d client.getRealSkillLevel(skill);\n\t\t\tint xp \u003d client.getSkillExperience(skill);\n\t\t\tString formattedXp \u003d String.format(\"%,d\", xp);\n\t\t\tsb.append(formatSkillName(skill.getName())).append(\" - \").append(level)\n\t\t\t\t.append(\" (\").append(formattedXp).append(\" XP)\");\n\t\t\tif (i \u003c skills.length - 1)\n\t\t\t{\n\t\t\t\tsb.append(\", \");\n\t\t\t}\n\t\t}\n\n\t\treturn sb.toString();\n\t}\n\n\tprivate String formatSkillName(String name)\n\t{\n\t\tif (name \u003d\u003d null || name.isEmpty())\n\t\t{\n\t\t\treturn name;\n\t\t}\n\t\treturn name.substring(0, 1).toUpperCase() + name.substring(1).toLowerCase();\n\t}\n\n\tprivate String getQuestsByState(QuestState targetState)\n\t{\n\t\tList\u003cString\u003e quests \u003d new ArrayList\u003c\u003e();\n\t\tfor (Quest quest : Quest.values())\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tQuestState state \u003d quest.getState(client);\n\t\t\t\tif (state \u003d\u003d targetState)\n\t\t\t\t{\n\t\t\t\t\tquests.add(quest.getName());\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (Exception e)\n\t\t\t{\n\t\t\t\tlog.debug(\"Could not get state for quest: {}\", quest.getName());\n\t\t\t}\n\t\t}\n\t\treturn String.join(\", \", quests);\n\t}\n\n\tprivate String getInventoryItems()\n\t{\n\t\tItemContainer inventory \u003d client.getItemContainer(InventoryID.INVENTORY);\n\t\tif (inventory \u003d\u003d null)\n\t\t{\n\t\t\treturn \"\";\n\t\t}\n\n\t\tList\u003cString\u003e items \u003d new ArrayList\u003c\u003e();\n\t\tfor (Item item : inventory.getItems())\n\t\t{\n\t\t\tif (item.getId() !\u003d -1 \u0026\u0026 item.getQuantity() \u003e 0)\n\t\t\t{\n\t\t\t\tString itemName \u003d getItemName(item.getId());\n\t\t\t\tif (itemName !\u003d null \u0026\u0026 !itemName.isEmpty())\n\t\t\t\t{\n\t\t\t\t\tif (item.getQuantity() \u003e 1)\n\t\t\t\t\t{\n\t\t\t\t\t\titems.add(itemName + \" x\" + item.getQuantity());\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\titems.add(itemName);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn String.join(\", \", items);\n\t}\n\n\tprivate String getEquippedItems()\n\t{\n\t\tItemContainer equipment \u003d client.getItemContainer(InventoryID.EQUIPMENT);\n\t\tif (equipment \u003d\u003d null)\n\t\t{\n\t\t\treturn \"\";\n\t\t}\n\n\t\tList\u003cString\u003e items \u003d new ArrayList\u003c\u003e();\n\t\tfor (Item item : equipment.getItems())\n\t\t{\n\t\t\tif (item.getId() !\u003d -1 \u0026\u0026 item.getQuantity() \u003e 0)\n\t\t\t{\n\t\t\t\tString itemName \u003d getItemName(item.getId());\n\t\t\t\tif (itemName !\u003d null \u0026\u0026 !itemName.isEmpty())\n\t\t\t\t{\n\t\t\t\t\titems.add(itemName);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn String.join(\", \", items);\n\t}\n\n\tprivate String getItemName(int itemId)\n\t{\n\t\ttry\n\t\t{\n\t\t\tItemComposition composition \u003d itemManager.getItemComposition(itemId);\n\t\t\tif (composition !\u003d null)\n\t\t\t{\n\t\t\t\treturn composition.getName();\n\t\t\t}\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\tlog.debug(\"Could not get name for item ID: {}\", itemId);\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate String getPlayerLocation()\n\t{\n\t\tPlayer localPlayer \u003d client.getLocalPlayer();\n\t\tif (localPlayer \u003d\u003d null)\n\t\t{\n\t\t\treturn \"Unknown\";\n\t\t}\n\n\t\tWorldPoint location \u003d localPlayer.getWorldLocation();\n\t\tif (location \u003d\u003d null)\n\t\t{\n\t\t\treturn \"Unknown\";\n\t\t}\n\n\t\tint x \u003d location.getX();\n\t\tint y \u003d location.getY();\n\t\tint plane \u003d location.getPlane();\n\t\tint regionId \u003d location.getRegionID();\n\n\t\tString areaName \u003d getAreaName(regionId);\n\t\tString coords \u003d \"(\" + x + \", \" + y + \", \" + plane + \")\";\n\n\t\tif (areaName !\u003d null)\n\t\t{\n\t\t\treturn areaName + \" \" + coords;\n\t\t}\n\t\treturn \"Region \" + regionId + \" \" + coords;\n\t}\n\n\tprivate String getAreaName(int regionId)\n\t{\n\t\tMap\u003cInteger, String\u003e regionNames \u003d new HashMap\u003c\u003e();\n\n\t\t// Major Cities\n\t\tregionNames.put(12850, \"Lumbridge\");\n\t\tregionNames.put(12851, \"Lumbridge\");\n\t\tregionNames.put(12593, \"Lumbridge Swamp\");\n\t\tregionNames.put(12849, \"Lumbridge\");\n\t\tregionNames.put(12853, \"Varrock\");\n\t\tregionNames.put(12854, \"Varrock\");\n\t\tregionNames.put(12597, \"Varrock\");\n\t\tregionNames.put(12598, \"Varrock\");\n\t\tregionNames.put(12852, \"Varrock\");\n\t\tregionNames.put(11828, \"Falador\");\n\t\tregionNames.put(11827, \"Falador\");\n\t\tregionNames.put(11829, \"Falador\");\n\t\tregionNames.put(12084, \"Falador\");\n\t\tregionNames.put(10806, \"Camelot\");\n\t\tregionNames.put(10807, \"Camelot\");\n\t\tregionNames.put(10805, \"Seers\u0027 Village\");\n\t\tregionNames.put(10549, \"Catherby\");\n\t\tregionNames.put(10548, \"Catherby\");\n\t\tregionNames.put(10804, \"Ranging Guild\");\n\t\tregionNames.put(11310, \"Ardougne\");\n\t\tregionNames.put(10547, \"Ardougne\");\n\t\tregionNames.put(10290, \"Ardougne\");\n\t\tregionNames.put(10291, \"Ardougne\");\n\t\tregionNames.put(10292, \"Yanille\");\n\t\tregionNames.put(10032, \"Yanille\");\n\t\tregionNames.put(11571, \"Burthorpe\");\n\t\tregionNames.put(11319, \"Taverley\");\n\t\tregionNames.put(11575, \"Warriors\u0027 Guild\");\n\n\t\t// Wilderness \u0026 PvP\n\t\tregionNames.put(12342, \"Edgeville\");\n\t\tregionNames.put(12341, \"Edgeville\");\n\t\tregionNames.put(12343, \"Barbarian Village\");\n\t\tregionNames.put(12088, \"Draynor Village\");\n\t\tregionNames.put(12338, \"Draynor Village\");\n\t\tregionNames.put(12089, \"Draynor Manor\");\n\t\tregionNames.put(12603, \"Wilderness\");\n\t\tregionNames.put(12604, \"Wilderness\");\n\t\tregionNames.put(12605, \"Wilderness\");\n\t\tregionNames.put(12859, \"Wilderness\");\n\t\tregionNames.put(12860, \"Wilderness\");\n\t\tregionNames.put(13115, \"Wilderness\");\n\t\tregionNames.put(13116, \"Wilderness\");\n\t\tregionNames.put(13117, \"Wilderness\");\n\t\tregionNames.put(13371, \"Wilderness\");\n\t\tregionNames.put(13372, \"Wilderness\");\n\t\tregionNames.put(13373, \"Wilderness\");\n\n\t\t// Desert \u0026 Al Kharid\n\t\tregionNames.put(13105, \"Al Kharid\");\n\t\tregionNames.put(13106, \"Al Kharid\");\n\t\tregionNames.put(13361, \"Shantay Pass\");\n\t\tregionNames.put(13107, \"Duel Arena\");\n\t\tregionNames.put(12848, \"Al Kharid Mine\");\n\n\t\t// Gnome Areas\n\t\tregionNames.put(9781, \"Tree Gnome Stronghold\");\n\t\tregionNames.put(9782, \"Tree Gnome Stronghold\");\n\t\tregionNames.put(9525, \"Tree Gnome Village\");\n\n\t\t// Morytania\n\t\tregionNames.put(13622, \"Canifis\");\n\t\tregionNames.put(13878, \"Port Phasmatys\");\n\t\tregionNames.put(14646, \"Barrows\");\n\t\tregionNames.put(14647, \"Barrows\");\n\t\tregionNames.put(13875, \"Slayer Tower\");\n\n\t\t// Kandarin\n\t\tregionNames.put(10293, \"Fight Caves\");\n\t\tregionNames.put(11062, \"Fishing Guild\");\n\t\tregionNames.put(10294, \"Port Khazard\");\n\n\t\t// Fremennik\n\t\tregionNames.put(10553, \"Rellekka\");\n\t\tregionNames.put(10297, \"Rellekka\");\n\t\tregionNames.put(9275, \"Waterbirth Island\");\n\n\t\t// Zeah (Kourend)\n\t\tregionNames.put(6457, \"Hosidius\");\n\t\tregionNames.put(6713, \"Hosidius\");\n\t\tregionNames.put(6972, \"Shayzien\");\n\t\tregionNames.put(7228, \"Lovakengj\");\n\t\tregionNames.put(6459, \"Port Piscarilius\");\n\t\tregionNames.put(6715, \"Port Piscarilius\");\n\t\tregionNames.put(6971, \"Arceuus\");\n\t\tregionNames.put(7227, \"Arceuus\");\n\n\t\t// Dungeons\n\t\tregionNames.put(12698, \"Stronghold of Security\");\n\t\tregionNames.put(12954, \"Stronghold of Security\");\n\t\tregionNames.put(11416, \"Taverley Dungeon\");\n\t\tregionNames.put(11417, \"Taverley Dungeon\");\n\t\tregionNames.put(11672, \"Taverley Dungeon\");\n\t\tregionNames.put(11673, \"Taverley Dungeon\");\n\t\tregionNames.put(12693, \"Edgeville Dungeon\");\n\t\tregionNames.put(10388, \"Brimhaven Dungeon\");\n\t\tregionNames.put(10644, \"Brimhaven Dungeon\");\n\n\t\t// Islands\n\t\tregionNames.put(11057, \"Entrana\");\n\t\tregionNames.put(10537, \"Karamja\");\n\t\tregionNames.put(10536, \"Karamja\");\n\t\tregionNames.put(11054, \"Crandor\");\n\t\tregionNames.put(14638, \"Mos Le\u0027Harmless\");\n\n\t\t// Banks\n\t\tregionNames.put(12596, \"Grand Exchange\");\n\n\t\t// Tutorial Island\n\t\tregionNames.put(12336, \"Tutorial Island\");\n\t\tregionNames.put(12335, \"Tutorial Island\");\n\t\tregionNames.put(12592, \"Tutorial Island\");\n\n\t\treturn regionNames.get(regionId);\n\t}\n\n\tprivate String parseClaudeResponse(String json)\n\t{\n\t\ttry\n\t\t{\n\t\t\tJsonObject response \u003d gson.fromJson(json, JsonObject.class);\n\t\t\tJsonArray content \u003d response.getAsJsonArray(\"content\");\n\t\t\tif (content !\u003d null \u0026\u0026 content.size() \u003e 0)\n\t\t\t{\n\t\t\t\tJsonObject firstBlock \u003d content.get(0).getAsJsonObject();\n\t\t\t\tif (\"text\".equals(firstBlock.get(\"type\").getAsString()))\n\t\t\t\t{\n\t\t\t\t\treturn firstBlock.get(\"text\").getAsString();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\tlog.error(\"Failed to parse Claude response\", e);\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate void displayResponse(String response)\n\t{\n\t\tList\u003cString\u003e chunks \u003d splitIntoChunks(response, MAX_CHARS_PER_MESSAGE);\n\t\tint maxBatches \u003d config.batchNumber();\n\n\t\tfor (int i \u003d 0; i \u003c Math.min(chunks.size(), maxBatches); i++)\n\t\t{\n\t\t\tString chunk \u003d chunks.get(i);\n\t\t\tString prefix \u003d chunks.size() \u003e 1 ? \"[\" + (i + 1) + \"/\" + Math.min(chunks.size(), maxBatches) + \"] \" : \"\";\n\t\t\tsendChatMessage(prefix + chunk);\n\t\t}\n\n\t\tif (chunks.size() \u003e maxBatches)\n\t\t{\n\t\t\tsendChatMessage(\"(Response truncated - increase batch number for longer responses)\");\n\t\t}\n\t}\n\n\tprivate List\u003cString\u003e splitIntoChunks(String text, int chunkSize)\n\t{\n\t\tList\u003cString\u003e chunks \u003d new ArrayList\u003c\u003e();\n\t\tint index \u003d 0;\n\n\t\twhile (index \u003c text.length())\n\t\t{\n\t\t\tint end \u003d Math.min(index + chunkSize, text.length());\n\n\t\t\t// Try to break at a space if we\u0027re not at the end\n\t\t\tif (end \u003c text.length())\n\t\t\t{\n\t\t\t\tint lastSpace \u003d text.lastIndexOf(\u0027 \u0027, end);\n\t\t\t\tif (lastSpace \u003e index)\n\t\t\t\t{\n\t\t\t\t\tend \u003d lastSpace;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tchunks.add(text.substring(index, end).trim());\n\t\t\tindex \u003d end;\n\n\t\t\t// Skip the space we broke on\n\t\t\tif (index \u003c text.length() \u0026\u0026 text.charAt(index) \u003d\u003d \u0027 \u0027)\n\t\t\t{\n\t\t\t\tindex++;\n\t\t\t}\n\t\t}\n\n\t\treturn chunks;\n\t}\n\n\tprivate void sendChatMessage(String message)\n\t{\n\t\tString formattedMessage \u003d new ChatMessageBuilder()\n\t\t\t.append(ChatColorType.HIGHLIGHT)\n\t\t\t.append(\"[Claude] \")\n\t\t\t.append(ChatColorType.NORMAL)\n\t\t\t.append(message)\n\t\t\t.build();\n\n\t\tchatMessageManager.queue(QueuedMessage.builder()\n\t\t\t.type(ChatMessageType.GAMEMESSAGE)\n\t\t\t.runeLiteFormattedMessage(formattedMessage)\n\t\t\t.build());\n\t}\n\n\t@Provides\n\tOsrsClaudeConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(OsrsClaudeConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\zodomo\\osrsclaude\\OsrsClaudePlugin.java"},{"fileName":"OsrsClaudePluginTest.java","content":"package com.zodomo.osrsclaude;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class OsrsClaudePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(OsrsClaudePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}\n","filePath":"src\\test\\java\\com\\zodomo\\osrsclaude\\OsrsClaudePluginTest.java"}]},{"commit":"f67b9b9f8f322e874dc303665a907bf180aff531","repository":"https://github.com/hong-niu/runelite-birdhouse-overlay.git","internalName":"birdhouse-overlay","files":[{"fileName":"BirdhouseColoringOverlay.java","content":"package com.birdhouseOverlay;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Shape;\nimport java.util.Objects;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameObject;\nimport net.runelite.api.Point;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\nimport net.runelite.client.ui.overlay.outline.ModelOutlineRenderer;\n\nimport static net.runelite.api.VarPlayer.BIRD_HOUSE_MEADOW_NORTH;\nimport static net.runelite.api.VarPlayer.BIRD_HOUSE_MEADOW_SOUTH;\nimport static net.runelite.api.VarPlayer.BIRD_HOUSE_VALLEY_NORTH;\nimport static net.runelite.api.VarPlayer.BIRD_HOUSE_VALLEY_SOUTH;\n\n@Slf4j\nclass BirdhouseColoringOverlay extends Overlay {\n\n    private final Client client;\n    private final BirdhouseOverlayConfig config;\n    private final BirdhouseOverlayPlugin plugin;\n\n    private static final int MAX_DISTANCE \u003d 2350;\n\n    @Inject\n    private BirdhouseColoringOverlay(Client client, BirdhouseOverlayPlugin plugin, BirdhouseOverlayConfig config, ModelOutlineRenderer modelOutlineRenderer)\n    {\n        this.plugin \u003d plugin;\n        this.client \u003d client;\n        this.config \u003d config;\n        setPosition(OverlayPosition.DYNAMIC);\n        setPriority(OverlayPriority.LOW);\n        setLayer(OverlayLayer.ABOVE_SCENE);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics)\n    {\n        GameObject meadowNorth \u003d plugin.getMeadowNorth();\n        GameObject meadowSouth \u003d plugin.getMeadowSouth();\n        GameObject valleyNorth \u003d plugin.getValleyNorth();\n        GameObject valleySouth \u003d plugin.getValleySouth();\n\n        if (!Objects.isNull(meadowNorth))\n        {\n            int meadowNorthState \u003d client.getVarpValue(BIRD_HOUSE_MEADOW_NORTH);\n            birdhouseStateRenderer(meadowNorth, meadowNorthState, graphics);\n        }\n\n        if (!Objects.isNull(meadowSouth))\n        {\n            int meadowSouthState \u003d client.getVarpValue(BIRD_HOUSE_MEADOW_SOUTH);\n            birdhouseStateRenderer(meadowSouth, meadowSouthState, graphics);\n        }\n\n        if (!Objects.isNull(valleyNorth))\n        {\n            int valleyNorthState \u003d client.getVarpValue(BIRD_HOUSE_VALLEY_NORTH);\n            birdhouseStateRenderer(valleyNorth, valleyNorthState, graphics);\n        }\n\n        if (!Objects.isNull(valleySouth))\n        {\n            int valleySouthState \u003d client.getVarpValue(BIRD_HOUSE_VALLEY_SOUTH);\n            birdhouseStateRenderer(valleySouth, valleySouthState, graphics);\n        }\n\n        return null;\n    }\n\n    private void birdhouseStateRenderer(GameObject birdhouse, int state, Graphics2D graphics)\n    {\n        Color unbuiltColor \u003d config.getUnbuiltColor();\n        Color unseededColor \u003d config.getUnseededColor();\n        Color seededColor \u003d config.getSeededColor();\n\n        if (state \u003d\u003d 0)\n        {\n            renderObject(birdhouse, graphics, unbuiltColor);\n            log.debug(birdhouse + \"rendered RED\");\n        }\n        else if (state % 3 \u003d\u003d 0)\n        {\n            renderObject(birdhouse, graphics, seededColor);\n            log.debug(birdhouse + \"rendered GREEN\");\n        }\n        else\n        {\n            renderObject(birdhouse, graphics, unseededColor);\n            log.debug(birdhouse + \"rendered YELLOW\");\n        }\n    }\n\n    private void renderObject(GameObject object, Graphics2D graphics, Color color)\n    {\n        LocalPoint localLocation \u003d client.getLocalPlayer().getLocalLocation();\n        if (Objects.isNull(localLocation))\n        {\n            return;\n        }\n\n        Point mousePosition \u003d client.getMouseCanvasPosition();\n        LocalPoint location \u003d object.getLocalLocation();\n\n        if (localLocation.distanceTo(location) \u003c\u003d MAX_DISTANCE)\n        {\n            Shape objectClickbox \u003d object.getClickbox();\n            if (objectClickbox !\u003d null)\n            {\n                if (objectClickbox.contains(mousePosition.getX(), mousePosition.getY()))\n                {\n                    graphics.setColor(color.darker());\n                    log.debug(\"Setting Clickbox - Darker\");\n                }\n                else\n                {\n                    graphics.setColor(color);\n                    log.debug(\"Setting Clickbox - Normal\");\n                }\n\n                graphics.draw(objectClickbox);\n                graphics.setColor(new Color(color.getRed(), color.getGreen(), color.getBlue(), 20));\n                graphics.fill(objectClickbox);\n            }\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\birdhouseOverlay\\BirdhouseColoringOverlay.java"},{"fileName":"BirdhouseOverlayConfig.java","content":"package com.birdhouseOverlay;\n\nimport net.runelite.client.config.Alpha;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\nimport java.awt.*;\n\n@ConfigGroup(\"Birdhouse Overlay\")\npublic interface BirdhouseOverlayConfig extends Config\n{\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"emptyColor\",\n\t\t\tname \u003d \"Unbuilt Color\",\n\t\t\tdescription \u003d \"Color overlay of unbuilt birdhouse\"\n\t)\n\tdefault Color getUnbuiltColor()\n\t{\n\t\treturn Color.RED;\n\t}\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d \"unseededColor\",\n\t\t\tname \u003d \"Unseeded Color\",\n\t\t\tdescription \u003d \"Color overlay of unseeded birdhouse\"\n\t)\n\tdefault Color getUnseededColor()\n\t{\n\t\treturn Color.YELLOW;\n\t}\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 3,\n\t\t\tkeyName \u003d \"seededColor\",\n\t\t\tname \u003d \"Seeded Color\",\n\t\t\tdescription \u003d \"Color overlay of unseeded birdhouse\"\n\t)\n\tdefault Color getSeededColor()\n\t{\n\t\treturn Color.GREEN;\n\t}\n}\n","filePath":"src\\main\\java\\com\\birdhouseOverlay\\BirdhouseOverlayConfig.java"},{"fileName":"BirdhouseOverlayPlugin.java","content":"package com.birdhouseOverlay;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\n\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameObject;\nimport net.runelite.api.GameState;\nimport net.runelite.api.events.GameObjectDespawned;\nimport net.runelite.api.events.GameObjectSpawned;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\nimport static net.runelite.api.NullObjectID.NULL_30565;\nimport static net.runelite.api.NullObjectID.NULL_30566;\nimport static net.runelite.api.NullObjectID.NULL_30567;\nimport static net.runelite.api.NullObjectID.NULL_30568;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Birdhouse Overlay\"\n)\npublic class BirdhouseOverlayPlugin extends Plugin\n{\n\tprivate static final int MEADOW_NORTH \u003d NULL_30565;\n\tprivate static final int MEADOW_SOUTH \u003d NULL_30566;\n\tprivate static final int VALLEY_NORTH \u003d NULL_30567;\n\tprivate static final int VALLEY_SOUTH \u003d NULL_30568;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate BirdhouseOverlayConfig config;\n\n\t@Inject\n\tprivate BirdhouseColoringOverlay overlay;\n\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate GameObject meadowNorth;\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate GameObject meadowSouth;\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate GameObject valleyNorth;\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate GameObject valleySouth;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\toverlayManager.add(overlay);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(overlay);\n\t\tmeadowNorth \u003d null;\n\t\tmeadowSouth \u003d null;\n\t\tvalleyNorth \u003d null;\n\t\tvalleySouth \u003d null;\n\t}\n\n\t@Provides\n\tBirdhouseOverlayConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(BirdhouseOverlayConfig.class);\n\t}\n\n\t@Subscribe\n\tpublic void onGameObjectSpawned(GameObjectSpawned event)\n\t{\n\t\tGameObject gameObject \u003d event.getGameObject();\n\n\t\tswitch (gameObject.getId())\n\t\t{\n\t\t\tcase MEADOW_NORTH:\n\t\t\t\tmeadowNorth \u003d gameObject;\n\t\t\t\tbreak;\n\t\t\tcase MEADOW_SOUTH:\n\t\t\t\tmeadowSouth \u003d gameObject;\n\t\t\t\tbreak;\n\t\t\tcase VALLEY_NORTH:\n\t\t\t\tvalleyNorth \u003d gameObject;\n\t\t\t\tbreak;\n\t\t\tcase VALLEY_SOUTH:\n\t\t\t\tvalleySouth \u003d gameObject;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameObjectDespawned(GameObjectDespawned event)\n\t{\n\t\tGameObject gameObject \u003d event.getGameObject();\n\t\tswitch (gameObject.getId())\n\t\t{\n\t\t\tcase MEADOW_NORTH:\n\t\t\t\tmeadowNorth \u003d null;\n\t\t\t\tbreak;\n\t\t\tcase MEADOW_SOUTH:\n\t\t\t\tmeadowSouth \u003d null;\n\t\t\t\tbreak;\n\t\t\tcase VALLEY_NORTH:\n\t\t\t\tvalleyNorth \u003d null;\n\t\t\t\tbreak;\n\t\t\tcase VALLEY_SOUTH:\n\t\t\t\tvalleySouth \u003d null;\n\t\t\t\tbreak;\n\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged event)\n\t{\n\t\tif (event.getGameState() \u003d\u003d GameState.LOADING)\n\t\t{\n\t\t\tmeadowNorth \u003d null;\n\t\t\tmeadowSouth \u003d null;\n\t\t\tvalleyNorth \u003d null;\n\t\t\tvalleySouth \u003d null;\n\t\t}\n\t}\n\n}\n","filePath":"src\\main\\java\\com\\birdhouseOverlay\\BirdhouseOverlayPlugin.java"},{"fileName":"BirdhouseOverlayTest.java","content":"package com.birdhouseOverlay;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class BirdhouseOverlayTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(BirdhouseOverlayPlugin.class);\n\t\tRuneLite.main(args);\n\n\t}\n}","filePath":"src\\test\\java\\com\\birdhouseOverlay\\BirdhouseOverlayTest.java"}]},{"commit":"c1d80b72e23192981deab5c49a5b8cc357b24631","repository":"https://github.com/fabianwesterbeek/simple-kc-stats.git","internalName":"simple-kill-stats","files":[{"fileName":"KcConfig.java","content":"package com.simplekc;\n\nimport net.runelite.client.config.*;\n\n@ConfigGroup(\"kc\")\npublic interface KcConfig extends Config\n{\n\t@ConfigItem(\n\t\t\tposition \u003d 0,\n\t\t\tkeyName \u003d \"npcIds\",\n\t\t\tname \u003d \"NPC IDs\",\n\t\t\tdescription \u003d \"Comma-separated list of NPC IDs to track\"\n\t)\n\tdefault String npcIds()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"npcNames\",\n\t\t\tname \u003d \"NPC Names\",\n\t\t\tdescription \u003d \"Comma-separated list of NPC names (case-insensitive) to track\"\n\t)\n\tdefault String npcNames()\n\t{\n\t\treturn \"\";\n\t}\n}\n","filePath":"src\\main\\java\\com\\simplekc\\KcConfig.java"},{"fileName":"KcOverlay.java","content":"package com.simplekc;\n\nimport com.google.inject.Inject;\nimport javax.inject.Singleton;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.time.Duration;\nimport net.runelite.client.ui.overlay.*;\nimport net.runelite.client.ui.overlay.components.*;\n\n@Singleton\npublic class KcOverlay extends Overlay\n{\n    private final KcPlugin plugin;\n    private final PanelComponent panel \u003d new PanelComponent();\n\n    @Inject\n    public KcOverlay(KcPlugin plugin)\n    {\n        this.plugin \u003d plugin;\n        setPosition(OverlayPosition.TOP_LEFT);\n        setLayer(OverlayLayer.ABOVE_WIDGETS);\n    }\n\n    @Override\n    public Dimension render(Graphics2D g)\n    {\n        panel.getChildren().clear();\n\n        int kills \u003d plugin.getKills();\n        long elapsed \u003d System.currentTimeMillis() - plugin.getStartTime();\n        double hours \u003d elapsed / 3_600_000d;\n        int kph \u003d hours \u003e 0 ? (int)(kills / hours) : 0;\n        long avgMs \u003d kills \u003e 0 ? elapsed / kills : 0;\n        Duration avg \u003d Duration.ofMillis(avgMs);\n        String mmss \u003d String.format(\"%02d:%02d\", avg.toMinutesPart(), avg.toSecondsPart());\n\n        panel.getChildren().add(LineComponent.builder()\n                .left(\"Kills\")\n                .right(Integer.toString(kills))\n                .build());\n        panel.getChildren().add(LineComponent.builder()\n                .left(\"Kills/hr\")\n                .right(Integer.toString(kph))\n                .build());\n        panel.getChildren().add(LineComponent.builder()\n                .left(\"Time/kill\")\n                .right(mmss)\n                .build());\n\n        return panel.render(g);\n    }\n}\n","filePath":"src\\main\\java\\com\\simplekc\\KcOverlay.java"},{"fileName":"KcPlugin.java","content":"package com.simplekc;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport java.util.Set;\nimport java.util.stream.Collectors;\nimport net.runelite.api.Client;\nimport net.runelite.api.NPC;\nimport net.runelite.api.events.NpcDespawned;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.Text;\n\n@PluginDescriptor(\n\t\tname \u003d \"Kill Tracker\"\n)\npublic class KcPlugin extends Plugin\n{\n\t@Inject private Client client;\n\t@Inject private KcConfig config;\n\t@Inject private OverlayManager overlayManager;\n\t@Inject private KcOverlay overlay;\n\n\tprivate Set\u003cInteger\u003e trackedIds;\n\tprivate Set\u003cString\u003e trackedNames;\n\tprivate int kills;\n\tprivate long startTime;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tkills \u003d 0;\n\t\tstartTime \u003d System.currentTimeMillis();\n\t\tbuildTracked();\n\t\toverlayManager.add(overlay);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(overlay);\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged ev)\n\t{\n\t\tif (!ev.getGroup().equals(\"kc\"))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tbuildTracked();\n\t}\n\n\tprivate void buildTracked()\n\t{\n\t\t// parse IDs\n\t\ttrackedIds \u003d Text.fromCSV(config.npcIds())\n\t\t\t\t.stream()\n\t\t\t\t.map(String::trim)\n\t\t\t\t.filter(s -\u003e !s.isEmpty())\n\t\t\t\t.map(Integer::valueOf)\n\t\t\t\t.collect(Collectors.toSet());\n\n\t\t// parse names\n\t\ttrackedNames \u003d Text.fromCSV(config.npcNames())\n\t\t\t\t.stream()\n\t\t\t\t.map(String::trim)\n\t\t\t\t.map(String::toLowerCase)\n\t\t\t\t.filter(s -\u003e !s.isEmpty())\n\t\t\t\t.collect(Collectors.toSet());\n\t}\n\n\t@Subscribe\n\tpublic void onNpcDespawned(NpcDespawned event)\n\t{\n\t\tNPC npc \u003d event.getNpc();\n\t\tif (!npc.isDead())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tboolean idMatch \u003d trackedIds.contains(npc.getId());\n\t\tString name \u003d npc.getName();\n\t\tboolean nameMatch \u003d name !\u003d null \u0026\u0026 trackedNames.contains(name.toLowerCase());\n\n\t\tif (idMatch || nameMatch)\n\t\t{\n\t\t\tif (kills++ \u003d\u003d 0)\n\t\t\t{\n\t\t\t\tstartTime \u003d System.currentTimeMillis();\n\t\t\t}\n\t\t\t// overlay will update on next frame\n\t\t}\n\t}\n\n\tpublic int getKills()\n\t{\n\t\treturn kills;\n\t}\n\n\tpublic long getStartTime()\n\t{\n\t\treturn startTime;\n\t}\n\n\t@Provides\n\tKcConfig provideConfig(ConfigManager manager)\n\t{\n\t\treturn manager.getConfig(KcConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\simplekc\\KcPlugin.java"},{"fileName":"KcPluginTest.java","content":"package com.simplekc;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class KcPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(KcPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\simplekc\\KcPluginTest.java"}]},{"commit":"0c0820227f59a4bf77dec45a501b1423b754e0f6","repository":"https://github.com/edmeyer8851/cough-syrup.git","internalName":"cough-syrup","files":[{"fileName":"CoughSyrupPlugin.java","content":"package com.coughsyrup;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.*;\n\n@Slf4j\n@PluginDescriptor(\n\t\tname \u003d \"Cough Syrup\",\n\t\tdescription \u003d \"Removes player cough spam in public chat during Nex\u0027s Choke attack.\"\n)\npublic class CoughSyrupPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\tprivate static final String COUGH_TEXT \u003d \"*Cough*\";\n\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage chatMessage)\n\t{\n\t\tif (chatMessage.getType() !\u003d ChatMessageType.PUBLICCHAT)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tfinal ChatLineBuffer lineBuffer \u003d client.getChatLineMap().get(ChatMessageType.PUBLICCHAT.getType());\n\t\tif (lineBuffer \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (COUGH_TEXT.equals(chatMessage.getMessage()))\n\t\t{\n\t\t\tlineBuffer.removeMessageNode(chatMessage.getMessageNode());\n\t\t\tclientThread.invoke(() -\u003e client.runScript(ScriptID.BUILD_CHATBOX));\n\t\t}\n\t}\n\n}\n","filePath":"src\\main\\java\\com\\coughsyrup\\CoughSyrupPlugin.java"},{"fileName":"CoughSyrupTest.java","content":"package com.coughsyrup;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class CoughSyrupTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(CoughSyrupPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\coughsyrup\\CoughSyrupTest.java"}]},{"commit":"21f57808a54bea2b2c61c5d65126feb191b27e97","repository":"https://github.com/AmIRighteous/heres-trouble.git","internalName":"heres-trouble","files":[{"fileName":"HeresTroubleConfig.java","content":"package com.herestrouble;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"Here\u0027s Trouble\")\npublic interface HeresTroubleConfig extends Config\n{\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"friends\",\n\t\t\tname \u003d \"Friends List\",\n\t\t\tdescription \u003d \"Play sound when you see a player on your friends list.\"\n\t)\n\tdefault boolean friendsList() {\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"clan\",\n\t\t\tname \u003d \"Clan Members\",\n\t\t\tdescription \u003d \"Play sound when you see a player within your clan.\"\n\t)\n\tdefault boolean clanMembers() {\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"volume\",\n\t\t\tname \u003d \"Volume\",\n\t\t\tdescription \u003d \"Volume of sounds generated from plugin.\"\n\t)\n\tdefault int pluginVolume() {\n\t\treturn 100;\n\t}\n\n}\n","filePath":"src\\main\\java\\com\\herestrouble\\HeresTroubleConfig.java"},{"fileName":"HeresTroublePlugin.java","content":"package com.herestrouble;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\n\nimport java.io.FileNotFoundException;\nimport java.util.*;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Here\u0027s Trouble\"\n)\npublic class HeresTroublePlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate HeresTroubleConfig config;\n\n\t@Inject\n\tprivate SoundEngine soundEngine;\n\n\tprivate Set\u003cString\u003e friendsSeen \u003d new HashSet\u003c\u003e();\n\n\tprivate int heresTroubleTimer \u003d 5;\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged) {\n\t\tif (gameStateChanged.getGameState() \u003d\u003d GameState.HOPPING || gameStateChanged.getGameState() \u003d\u003d GameState.LOGIN_SCREEN || gameStateChanged.getGameState() \u003d\u003d GameState.LOGIN_SCREEN_AUTHENTICATOR) {\n\t\t\tfriendsSeen.clear();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage c) {\n\t\tif (c.getType().equals(ChatMessageType.LOGINLOGOUTNOTIFICATION)) {\n\t\t\tString text \u003d c.getMessage();\n\t\t\tif (text.contains(\" has logged out.\")) {\n\t\t\t\ttext \u003d text.replace(\" has logged out.\", \"\");\n\t\t\t\tString name \u003d text.replaceAll(\"\\\\P{Print}\", \" \"); //spaces sometimes read as unicode, so replace unicode chars with spaces\n\t\t\t\tfriendsSeen.remove(name);\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick e) {\n\t\tif (heresTroubleTimer \u003e 0) {\n\t\t\theresTroubleTimer--;\n\t\t}\n\n\t\telse if (config.friendsList() || config.clanMembers()) {\n\t\t\tList\u003cPlayer\u003e players \u003d client.getPlayers();\n\t\t\tfor (Player p : players) {\n\t\t\t\tif (((p.isFriend() \u0026\u0026 config.friendsList()) || (p.isClanMember() \u0026\u0026 config.clanMembers())) \u0026\u0026 !friendsSeen.contains(p.getName()) \u0026\u0026 p !\u003d client.getLocalPlayer()) {\n\t\t\t\t\tfriendsSeen.add(p.getName());\n\t\t\t\t\tint troubleNum \u003d (int) Math.ceil(Math.random()*3);\n\t\t\t\t\tsoundEngine.playClip(Sound.getSound(troubleNum));\n\t\t\t\t\tclient.getLocalPlayer().setOverheadText(\"Here\u0027s trouble\");\n\t\t\t\t\tp.setOverheadText(\"Here\u0027s trouble\");\n\t\t\t\t\tp.setOverheadCycle(200);\n\t\t\t\t\tclient.getLocalPlayer().setOverheadCycle(200);\n\t\t\t\t}\n\t\t\t}\n\t\t\theresTroubleTimer \u003d 5;\n\t\t}\n\t\telse {\n\t\t\theresTroubleTimer \u003d 5;\n\t\t}\n\t}\n\n\t@Provides\n\tHeresTroubleConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(HeresTroubleConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\herestrouble\\HeresTroublePlugin.java"},{"fileName":"Sound.java","content":"package com.herestrouble;\n\npublic enum Sound {\n    HERES_TROUBLE_1(\"/heres_trouble1.wav\"),\n    HERES_TROUBLE_2(\"/heres_trouble2.wav\"),\n    HERES_TROUBLE_3(\"/heres_trouble3.wav\");\n\n    private final String resourceName;\n\n    Sound(String name) {\n        resourceName \u003d name;\n    }\n    String getResourceName() {\n        return resourceName;\n    }\n\n    public static Sound getSound(int id) {\n        switch (id) {\n            case 1:\n                return Sound.HERES_TROUBLE_1;\n            case 2:\n                return Sound.HERES_TROUBLE_2;\n            default:\n                return Sound.HERES_TROUBLE_3;\n        }\n\n\n    }\n\n}\n","filePath":"src\\main\\java\\com\\herestrouble\\Sound.java"},{"fileName":"SoundEngine.java","content":"package com.herestrouble;\n\nimport lombok.extern.slf4j.Slf4j;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport javax.sound.sampled.*;\nimport java.io.BufferedInputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\n\n@Singleton\n@Slf4j\npublic class SoundEngine {\n\n    @Inject\n    private HeresTroubleConfig config;\n\n    private static final long CLIP_MTIME_UNLOADED \u003d -2;\n    private long lastClipMTime \u003d CLIP_MTIME_UNLOADED;\n    private Clip clip \u003d null;\n\n    private boolean loadClip(Sound sound) {\n        try (InputStream stream \u003d new BufferedInputStream(SoundFileManager.getSoundStream(sound))) {\n            try (AudioInputStream audioInputStream \u003d AudioSystem.getAudioInputStream(stream)) {\n                clip.open(audioInputStream);\n            }\n            return true;\n        } catch ( UnsupportedAudioFileException | IOException | LineUnavailableException e) {\n            log.warn(\"Failed to load sound: \" + sound, e);\n        }\n        return false;\n    }\n\n    public void playClip(Sound sound) {\n        long currentMTime \u003d System.currentTimeMillis();\n        if (clip \u003d\u003d null || currentMTime !\u003d lastClipMTime || !clip.isOpen()) {\n            if (clip !\u003d null \u0026\u0026 clip.isOpen()) {\n                clip.close();\n            }\n            try {\n                clip \u003d AudioSystem.getClip();\n            } catch (LineUnavailableException e) {\n                lastClipMTime \u003d CLIP_MTIME_UNLOADED;\n                log.warn(\"Failed to get clip for here\u0027s trouble sound \" + sound, e);\n                return;\n            }\n            lastClipMTime \u003d currentMTime;\n            if (!loadClip(sound)) {\n                return;\n            }\n        }\n\n        FloatControl volume \u003d (FloatControl) clip.getControl(FloatControl.Type.MASTER_GAIN);\n        float gain  \u003d 20f * (float) Math.log10(config.pluginVolume()/100f);\n        gain \u003d Math.min(gain, volume.getMaximum());\n        gain \u003d Math.max(gain, volume.getMinimum());\n        volume.setValue(gain);\n        clip.loop(0);\n    }\n}\n","filePath":"src\\main\\java\\com\\herestrouble\\SoundEngine.java"},{"fileName":"SoundFileManager.java","content":"package com.herestrouble;\n\nimport lombok.extern.slf4j.Slf4j;\nimport java.io.FileNotFoundException;\nimport java.io.InputStream;\n\n@Slf4j\npublic abstract class SoundFileManager {\n    public static InputStream getSoundStream(Sound sound) throws FileNotFoundException {\n        return SoundFileManager.class.getResourceAsStream(sound.getResourceName());\n    }\n}\n","filePath":"src\\main\\java\\com\\herestrouble\\SoundFileManager.java"},{"fileName":"HeresTroublePluginTest.java","content":"package com.herestrouble;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class HeresTroublePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(HeresTroublePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n\n\n}","filePath":"src\\test\\java\\com\\herestrouble\\HeresTroublePluginTest.java"}]},{"commit":"910af43b8658a4802b59a4897aa7845ea0e56705","repository":"https://github.com/nightfirecat/plugin-hub-plugins.git","internalName":"wilderness-teleports","files":[{"fileName":"WildernessTeleportsConfig.java","content":"/*\n * Copyright (c) 2020, Jordan \u003cnightfirecat@protonmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage at.nightfirec.wildernessteleports;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"wildernessteleports\")\npublic interface WildernessTeleportsConfig extends Config\n{\n\t@ConfigItem(\n\t\tkeyName \u003d \"unchargeWarningOutsideWilderness\",\n\t\tname \u003d \"Charge warnings outside wilderness\",\n\t\tdescription \u003d \"Show the uncharged teleport warning at all locations, not only when in the wilderness\"\n\t)\n\tdefault boolean unchargeWarningOutsideWilderness()\n\t{\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\at\\nightfirec\\wildernessteleports\\WildernessTeleportsConfig.java"},{"fileName":"WildernessTeleportsOverlay.java","content":"/*\n * Copyright (c) 2021, Jordan Atwood \u003cnightfirecat@protonmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *   list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *   this list of conditions and the following disclaimer in the documentation\n *   and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage at.nightfirec.wildernessteleports;\n\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport javax.inject.Inject;\nimport net.runelite.api.ItemID;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\nimport net.runelite.client.ui.overlay.components.ImageComponent;\nimport net.runelite.client.ui.overlay.components.PanelComponent;\n\nclass WildernessTeleportsOverlay extends Overlay\n{\n\tprivate static final Color BACKGROUND_COLOR \u003d new Color(150, 0, 0, 150);\n\tprivate final PanelComponent imagePanelComponent \u003d new PanelComponent();\n\n\tprivate final WildernessTeleportsPlugin plugin;\n\tprivate final WildernessTeleportsConfig config;\n\n\t@Inject\n\tprivate WildernessTeleportsOverlay(WildernessTeleportsPlugin plugin, WildernessTeleportsConfig config, ItemManager itemManager)\n\t{\n\t\tsetPosition(OverlayPosition.TOP_CENTER);\n\t\tsetPriority(OverlayPriority.HIGH);\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t\timagePanelComponent.setBackgroundColor(BACKGROUND_COLOR);\n\t\timagePanelComponent.getChildren().add(new ImageComponent(itemManager.getImage(ItemID.AMULET_OF_GLORY)));\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (plugin.hasOnlyUnchargedGlories() \u0026\u0026 (plugin.isInWilderness() || config.unchargeWarningOutsideWilderness()))\n\t\t{\n\t\t\treturn imagePanelComponent.render(graphics);\n\t\t}\n\n\t\treturn null;\n\t}\n}\n","filePath":"src\\main\\java\\at\\nightfirec\\wildernessteleports\\WildernessTeleportsOverlay.java"},{"fileName":"WildernessTeleportsPlugin.java","content":"/*\n * Copyright (c) 2021, Jordan \u003cnightfirecat@protonmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage at.nightfirec.wildernessteleports;\n\nimport com.google.common.collect.ImmutableList;\nimport com.google.inject.Provides;\nimport java.util.List;\nimport javax.annotation.Nullable;\nimport javax.inject.Inject;\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport lombok.experimental.Accessors;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.ItemContainer;\nimport net.runelite.api.ItemID;\nimport net.runelite.api.Varbits;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.ItemContainerChanged;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\n@PluginDescriptor(\n\tname \u003d \"Uncharged Glory Warning\",\n\tdescription \u003d \"Warns you if you enter the wilderness with uncharged amulets of glory\",\n\ttags \u003d {\"amulet\",\"glory\",\"wilderness\",\"20\",\"30\",\"tele\",\"teleport\"}\n)\npublic class WildernessTeleportsPlugin extends Plugin\n{\n\tprivate static final List\u003cInteger\u003e CHARGED_GLORY_IDS \u003d ImmutableList.of(\n\t\tItemID.AMULET_OF_ETERNAL_GLORY,\n\t\tItemID.AMULET_OF_GLORY1,\n\t\tItemID.AMULET_OF_GLORY2,\n\t\tItemID.AMULET_OF_GLORY3,\n\t\tItemID.AMULET_OF_GLORY4,\n\t\tItemID.AMULET_OF_GLORY5,\n\t\tItemID.AMULET_OF_GLORY6,\n\t\tItemID.AMULET_OF_GLORY_T1,\n\t\tItemID.AMULET_OF_GLORY_T2,\n\t\tItemID.AMULET_OF_GLORY_T3,\n\t\tItemID.AMULET_OF_GLORY_T4,\n\t\tItemID.AMULET_OF_GLORY_T5,\n\t\tItemID.AMULET_OF_GLORY_T6\n\t);\n\tprivate static final List\u003cInteger\u003e UNCHARGED_GLORY_IDS \u003d ImmutableList.of(\n\t\tItemID.AMULET_OF_GLORY,\n\t\tItemID.AMULET_OF_GLORY_T,\n\t\tItemID.AMULET_OF_GLORY_8283 // mounted glory interface item\n\t\t// ItemID.AMULET_OF_GLORY_20586 // LMS glory; not included here as you cannot teleport from LMS anyway\n\t);\n\n\t@Inject\n\tprivate WildernessTeleportsOverlay overlay;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate boolean inWilderness;\n\n\t@Accessors(fluent \u003d true)\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate boolean hasOnlyUnchargedGlories;\n\n\tprivate boolean gameStateChangeVarbitRace;\n\n\t@Provides\n\tWildernessTeleportsConfig getConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(WildernessTeleportsConfig.class);\n\t}\n\n\t@Override\n\tpublic void startUp()\n\t{\n\t\tif (client.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tclientThread.invokeLater(() -\u003e\n\t\t\t{\n\t\t\t\tcheckInWilderness();\n\t\t\t\tcheckChargedGlories();\n\t\t\t});\n\t\t}\n\t\toverlayManager.add(overlay);\n\t}\n\n\t@Override\n\tpublic void shutDown()\n\t{\n\t\tgameStateChangeVarbitRace \u003d false;\n\t\toverlayManager.remove(overlay);\n\t}\n\n\t@Subscribe\n\tvoid onItemContainerChanged(ItemContainerChanged event)\n\t{\n\t\tfinal int changedContainerId \u003d event.getContainerId();\n\t\tif (changedContainerId !\u003d InventoryID.INVENTORY.getId() \u0026\u0026 changedContainerId !\u003d InventoryID.EQUIPMENT.getId())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tcheckChargedGlories();\n\t}\n\n\t@Subscribe\n\tvoid onGameStateChanged(GameStateChanged event)\n\t{\n\t\tfinal GameState state \u003d event.getGameState();\n\t\tif (state \u003d\u003d GameState.LOADING || state \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tgameStateChangeVarbitRace \u003d true;\n\t\t}\n\n\t\t// Item container can change before login state (say, during disconnections), so check for glories after we\u0027re\n\t\t// logged back in.\n\t\tif (state \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tcheckChargedGlories();\n\t\t}\n\t}\n\n\t@Subscribe\n\tvoid onVarbitChanged(VarbitChanged event)\n\t{\n\t\tif (gameStateChangeVarbitRace)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tcheckInWilderness();\n\t}\n\n\t@Subscribe\n\tvoid onGameTick(GameTick event)\n\t{\n\t\tgameStateChangeVarbitRace \u003d false;\n\t}\n\n\tprivate void checkInWilderness()\n\t{\n\t\tinWilderness \u003d client.getVarbitValue(Varbits.IN_WILDERNESS) \u003d\u003d 1;\n\t}\n\n\tprivate void checkChargedGlories()\n\t{\n\t\tfinal ItemContainer inventory \u003d client.getItemContainer(InventoryID.INVENTORY);\n\t\tfinal ItemContainer equipment \u003d client.getItemContainer(InventoryID.EQUIPMENT);\n\t\tfinal boolean hasUnchargedGlory \u003d containerHasAnyId(inventory, UNCHARGED_GLORY_IDS) || containerHasAnyId(equipment, UNCHARGED_GLORY_IDS);\n\t\tfinal boolean hasChargedGlory \u003d containerHasAnyId(inventory, CHARGED_GLORY_IDS) || containerHasAnyId(equipment, CHARGED_GLORY_IDS);\n\t\thasOnlyUnchargedGlories \u003d hasUnchargedGlory \u0026\u0026 !hasChargedGlory;\n\t}\n\n\tprivate static boolean containerHasAnyId(@Nullable final ItemContainer container, final List\u003cInteger\u003e itemIds)\n\t{\n\t\tif (container \u003d\u003d null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (int item : itemIds)\n\t\t{\n\t\t\tif (container.contains(item))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\at\\nightfirec\\wildernessteleports\\WildernessTeleportsPlugin.java"},{"fileName":"WildernessTeleportsPluginTest.java","content":"/*\n * Copyright (c) 2021, Jordan \u003cnightfirecat@protonmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage at.nightfirec.wildernessteleports;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class WildernessTeleportsPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(WildernessTeleportsPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}\n","filePath":"src\\test\\java\\at\\nightfirec\\wildernessteleports\\WildernessTeleportsPluginTest.java"}]},{"commit":"128f740ec19ef0ec4aa0e7847e69b13a1533cd90","repository":"https://github.com/cosmicquahog/XpGrapher.git","internalName":"xp-grapher","files":[{"fileName":"XpDataManager.java","content":"package com.xpgrapher;\n\nimport net.runelite.api.Skill;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class XpDataManager {\n\n    private Map\u003cSkill, ArrayList\u003e skillXpMap \u003d new HashMap\u003cSkill, ArrayList\u003e();\n\n    private XpGrapherPlugin grapherPlugin;\n\n    public XpDataManager(XpGrapherPlugin grapherPlugin) {\n\n        this.grapherPlugin \u003d grapherPlugin;\n\n        for (int i \u003d 0; i \u003c grapherPlugin.skillList.length; i++) {\n            ArrayList\u003cInteger\u003e newXpList \u003d new ArrayList\u003cInteger\u003e();\n            skillXpMap.put(grapherPlugin.skillList[i], newXpList);\n        }\n\n    }\n\n    public void update() {\n        for (int i \u003d 0; i \u003c grapherPlugin.skillList.length; i++) {\n            Skill skillToUpdate \u003d grapherPlugin.skillList[i];\n            ArrayList\u003cInteger\u003e xpListToUpdate \u003d skillXpMap.get(skillToUpdate);\n            int xpValueToAdd \u003d grapherPlugin.getClient().getSkillExperience(skillToUpdate);\n\n            if (xpListToUpdate.size() \u003e 0) {\n\n                int lastXpValue \u003d xpListToUpdate.get(xpListToUpdate.size() - 1);\n                if (lastXpValue \u003c xpValueToAdd)\n                    if (skillToUpdate.getName() !\u003d \"Overall\") {\n                        grapherPlugin.xpGraphPointManager.isSkillShownMap.put(skillToUpdate, true);\n                        //grapherPlugin.currentlyGraphedSkills.add(skillToUpdate);\n                        grapherPlugin.graphSkill(skillToUpdate);\n                    }\n\n            }\n\n            xpListToUpdate.add(xpValueToAdd);\n            //if (xpValueToAdd \u003e lastXpValue)\n            //    grapherPlugin.xpGraphPointManager.isSkillShownMap.put(skillToUpdate, true);\n        }\n    }\n\n    public int getXpData(Skill skillToGet, int tickNum) {\n        ArrayList\u003cInteger\u003e xpListToGet \u003d skillXpMap.get(skillToGet);\n        int xpValueAtTickNum \u003d xpListToGet.get(tickNum);\n        return xpValueAtTickNum;\n    }\n\n    public int getMostRecentXp(Skill skillToGet) {\n        ArrayList\u003cInteger\u003e xpListToGet \u003d skillXpMap.get(skillToGet);\n        return xpListToGet.get(xpListToGet.size()-1);\n    }\n\n}\n","filePath":"src\\main\\java\\com\\xpgrapher\\XpDataManager.java"},{"fileName":"XpGraphColorManager.java","content":"package com.xpgrapher;\n\nimport net.runelite.api.Skill;\n\nimport java.awt.*;\nimport java.util.HashMap;\n\npublic class XpGraphColorManager {\n\n    private HashMap\u003cSkill, Color\u003e skillColorMap \u003d new HashMap\u003cSkill, Color\u003e();\n    private XpGrapherPlugin grapherPlugin;\n\n    private Color[] skillColorData \u003d {\n\n            //attack\n            new Color(79,143,35),\n            //Defence\n            new Color(115, 115, 115),\n            //strength\n            new Color(0,64,255),\n            //hitpoints\n            new Color(143, 35, 35),\n            //ranged\n            new Color(106,255,0),\n            //prayer\n            new Color(255,212,0),\n            //magic\n            new Color(0,149,255),\n            //cooking\n            new Color(107,35,143),\n            //woodcutting\n            new Color(35,98,143),\n            //fletching\n            new Color(255, 127, 0),\n            //fishing\n            new Color(231, 233, 185),\n            //firemaking\n            new Color(255, 0, 0),\n            //crafting\n            new Color(255,0,170),\n            //smithing\n            new Color(185,237,224),\n            //mining\n            new Color(204,204,204),\n            //herblore\n            new Color(191,255,0),\n            //agility\n            new Color(185,215,237),\n            //thieving\n            new Color(255,255,0),\n            //slayer\n            new Color(220,185,237),\n            //farming\n            new Color(0,234,255),\n            //runecraft\n            new Color(170,0,255),\n            //hunter\n            new Color(237, 185, 185),\n            //construction\n            new Color(220, 190, 255),\n            //overall\n            //new Color(143, 106, 35),\n    };\n\n    public XpGraphColorManager(XpGrapherPlugin grapherPlugin) {\n        this.grapherPlugin \u003d grapherPlugin;\n        for (int i \u003d 0; i \u003c skillColorData.length; i++) {\n            skillColorMap.put(grapherPlugin.skillList[i], skillColorData[i]);\n        }\n    }\n\n    public Color getSkillColor(Skill skill) {\n        //return skillColorMap.get(skill);\n        if (skill.getName() \u003d\u003d \"Attack\")\n            return grapherPlugin.config.attackColor();\n        else if (skill.getName() \u003d\u003d \"Strength\")\n            return grapherPlugin.config.strengthColor();\n        else if (skill.getName() \u003d\u003d \"Defence\")\n            return grapherPlugin.config.defenceColor();\n        else if (skill.getName() \u003d\u003d \"Ranged\")\n            return grapherPlugin.config.rangedColor();\n        else if (skill.getName() \u003d\u003d \"Prayer\")\n            return grapherPlugin.config.prayerColor();\n\n        else if (skill.getName() \u003d\u003d \"Magic\")\n            return grapherPlugin.config.magicColor();\n        else if (skill.getName() \u003d\u003d \"Runecraft\")\n            return grapherPlugin.config.runecraftColor();\n        else if (skill.getName() \u003d\u003d \"Construction\")\n            return grapherPlugin.config.constructionColor();\n        else if (skill.getName() \u003d\u003d \"Hitpoints\")\n            return grapherPlugin.config.hitpointsColor();\n        else if (skill.getName() \u003d\u003d \"Agility\")\n            return grapherPlugin.config.agilityColor();\n\n        else if (skill.getName() \u003d\u003d \"Herblore\")\n            return grapherPlugin.config.herbloreColor();\n        else if (skill.getName() \u003d\u003d \"Thieving\")\n            return grapherPlugin.config.thievingColor();\n        else if (skill.getName() \u003d\u003d \"Crafting\")\n            return grapherPlugin.config.craftingColor();\n        else if (skill.getName() \u003d\u003d \"Fletching\")\n            return grapherPlugin.config.fletchingColor();\n        else if (skill.getName() \u003d\u003d \"Slayer\")\n            return grapherPlugin.config.slayerColor();\n        else if (skill.getName() \u003d\u003d \"Hunter\")\n            return grapherPlugin.config.hunterColor();\n        else if (skill.getName() \u003d\u003d \"Mining\")\n            return grapherPlugin.config.miningColor();\n        else if (skill.getName() \u003d\u003d \"Smithing\")\n            return grapherPlugin.config.smithingColor();\n        else if (skill.getName() \u003d\u003d \"Fishing\")\n            return grapherPlugin.config.fishingColor();\n        else if (skill.getName() \u003d\u003d \"Cooking\")\n            return grapherPlugin.config.cookingColor();\n\n        else if (skill.getName() \u003d\u003d \"Firemaking\")\n            return grapherPlugin.config.firemakingColor();\n        else if (skill.getName() \u003d\u003d \"Woodcutting\")\n            return grapherPlugin.config.woodcuttingColor();\n        else if (skill.getName() \u003d\u003d \"Farming\")\n            return grapherPlugin.config.farmingColor();\n        return Color.BLACK;\n    }\n\n    public void setSkillColor(Skill skill, Color color) {\n        skillColorMap.put(skill, color);\n    }\n\n}\n","filePath":"src\\main\\java\\com\\xpgrapher\\XpGraphColorManager.java"},{"fileName":"XpGrapherConfig.java","content":"package com.xpgrapher;\n\nimport net.runelite.api.Skill;\nimport net.runelite.client.config.*;\n\nimport java.awt.*;\n\n@ConfigGroup(\"xpgrapher\")\npublic interface XpGrapherConfig extends Config\n{\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Skill Colors\",\n\t\t\tdescription \u003d \"Set a color for each skill\",\n\t\t\tposition \u003d 99\n\t)\n\tString skillColorSection \u003d \"skillColorSection\";\n\n\t@ConfigItem(\n\t\t\tposition \u003d 0,\n\t\t\tkeyName \u003d \"graphWidth\",\n\t\t\tname \u003d \"Graph Width\",\n\t\t\tdescription \u003d \"Configures the width of the graph.\"\n\t)\n\tdefault int graphWidth()\n\t{\n\t\treturn 200;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"graphHeight\",\n\t\t\tname \u003d \"Graph Height\",\n\t\t\tdescription \u003d \"Configures the height of the graph.\"\n\t)\n\tdefault int graphHeight()\n\t{\n\t\treturn 100;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d \"resetGraph\",\n\t\t\tname \u003d \"Reset Graph\",\n\t\t\tdescription \u003d \"Start over with all data. You will lose all saved graphs.\"\n\t)\n\tdefault boolean resetGraph() { return false; }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 3,\n\t\t\tkeyName \u003d \"displayKey\",\n\t\t\tname \u003d \"Display Key\",\n\t\t\tdescription \u003d \"Use this to turn off the color reference key.\"\n\t)\n\tdefault boolean displayKey() { return true; }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 4,\n\t\t\tkeyName \u003d \"displayXpRate\",\n\t\t\tname \u003d \"Display XP/hr\",\n\t\t\tdescription \u003d \"\"\n\t)\n\tdefault boolean displayXpRate() { return true; }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 5,\n\t\t\tkeyName \u003d \"maxSkillsToGraph\",\n\t\t\tname \u003d \"# of Skills to Graph\",\n\t\t\tdescription \u003d \"\"\n\t)\n\tdefault int maxSkillsToGraph() {\n\t\treturn 8;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 6,\n\t\t\tkeyName \u003d \"graphColor\",\n\t\t\tname \u003d \"Graph Line/Text Color\",\n\t\t\tdescription \u003d \"The color of the graph lines, text and border\"\n\t)\n\tdefault Color graphColor() {\n\t\treturn new Color(56, 36, 24);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 7,\n\t\t\tkeyName \u003d \"graphBackgroundColor\",\n\t\t\tname \u003d \"Background Color\",\n\t\t\tdescription \u003d \"The background color of the graph.\"\n\t)\n\tdefault Color graphBackgroundColor() {\n\t\treturn new Color(132, 109,  71, 200);\n\t}\n\n\t@Range(\n\t\t\tmin \u003d 1,\n\t\t\tmax \u003d 100\n\t)\n\t@ConfigItem(\n\t\t\tposition \u003d 8,\n\t\t\tkeyName \u003d \"graphBackgroundTransparency\",\n\t\t\tname \u003d \"Background Transparency\",\n\t\t\tdescription \u003d \"The background transparency.\"\n\t)\n\tdefault int graphBackgroundTransparency() { return 70; }\n\n\n\n\t@ConfigItem(\n\t\t\tposition \u003d 101,\n\t\t\tkeyName \u003d \"attackColor\",\n\t\t\tname \u003d \"Attack Color\",\n\t\t\tdescription \u003d \"Color of the Attack graph line\",\n\t\t\tsection \u003d skillColorSection\n\t)\n\tdefault Color attackColor()\n\t{\n\t\treturn new Color(79,143,35);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 9,\n\t\t\tkeyName \u003d \"defenceColor\",\n\t\t\tname \u003d \"Defence Color\",\n\t\t\tdescription \u003d \"Color of the Defence graph line\",\n\t\t\tsection \u003d skillColorSection\n\t)\n\tdefault Color defenceColor()\n\t{\n\t\treturn new Color(115, 115, 115);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 9,\n\t\t\tkeyName \u003d \"strengthColor\",\n\t\t\tname \u003d \"Strength Color\",\n\t\t\tdescription \u003d \"Color of the Strength graph line\",\n\t\t\tsection \u003d skillColorSection\n\t)\n\tdefault Color strengthColor()\n\t{\n\t\treturn new Color(115, 115, 115);\n\t}\n\n\n\n\n\n\n\t@ConfigItem(\n\t\t\tposition \u003d 9,\n\t\t\tkeyName \u003d \"hitpointsColor\",\n\t\t\tname \u003d \"Hitpoints Color\",\n\t\t\tdescription \u003d \"Color of the Hitpoints graph line\",\n\t\t\tsection \u003d skillColorSection\n\t)\n\tdefault Color hitpointsColor()\n\t{\n\t\treturn new Color(143, 35, 35);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 10,\n\t\t\tkeyName \u003d \"rangedColor\",\n\t\t\tname \u003d \"Ranged Color\",\n\t\t\tdescription \u003d \"Color of the Ranged graph line\",\n\t\t\tsection \u003d skillColorSection\n\t)\n\tdefault Color rangedColor()\n\t{\n\t\treturn new Color(106,255,0);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 11,\n\t\t\tkeyName \u003d \"prayerColor\",\n\t\t\tname \u003d \"Prayer Color\",\n\t\t\tdescription \u003d \"Color of the Prayer graph line\",\n\t\t\tsection \u003d skillColorSection\n\t)\n\tdefault Color prayerColor()\n\t{\n\t\treturn new Color(255,212,0);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 12,\n\t\t\tkeyName \u003d \"magicColor\",\n\t\t\tname \u003d \"Magic Color\",\n\t\t\tdescription \u003d \"Color of the Magic graph line\",\n\t\t\tsection \u003d skillColorSection\n\t)\n\tdefault Color magicColor()\n\t{\n\t\treturn new Color(0,149,255);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 13,\n\t\t\tkeyName \u003d \"cookingColor\",\n\t\t\tname \u003d \"Cooking Color\",\n\t\t\tdescription \u003d \"Color of the Cooking graph line\",\n\t\t\tsection \u003d skillColorSection\n\t)\n\tdefault Color cookingColor()\n\t{\n\t\treturn new Color(107,35,143);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 14,\n\t\t\tkeyName \u003d \"woodcuttingColor\",\n\t\t\tname \u003d \"Woodcutting Color\",\n\t\t\tdescription \u003d \"Color of the Woodcutting graph line\",\n\t\t\tsection \u003d skillColorSection\n\t)\n\tdefault Color woodcuttingColor()\n\t{\n\t\treturn new Color(35,98,143);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 15,\n\t\t\tkeyName \u003d \"fletchingColor\",\n\t\t\tname \u003d \"Fletching Color\",\n\t\t\tdescription \u003d \"Color of the Fletching graph line\",\n\t\t\tsection \u003d skillColorSection\n\t)\n\tdefault Color fletchingColor()\n\t{\n\t\treturn new Color(255, 127, 0);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 16,\n\t\t\tkeyName \u003d \"fishingColor\",\n\t\t\tname \u003d \"Fishing Color\",\n\t\t\tdescription \u003d \"Color of the Fishing graph line\",\n\t\t\tsection \u003d skillColorSection\n\t)\n\tdefault Color fishingColor()\n\t{\n\t\treturn new Color(231, 233, 185);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 17,\n\t\t\tkeyName \u003d \"firemakingColor\",\n\t\t\tname \u003d \"Firemaking Color\",\n\t\t\tdescription \u003d \"Color of the Firemaking graph line\",\n\t\t\tsection \u003d skillColorSection\n\t)\n\tdefault Color firemakingColor()\n\t{\n\t\treturn new Color(255, 0, 0);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 18,\n\t\t\tkeyName \u003d \"craftingColor\",\n\t\t\tname \u003d \"Crafting Color\",\n\t\t\tdescription \u003d \"Color of the Crafting graph line\",\n\t\t\tsection \u003d skillColorSection\n\t)\n\tdefault Color craftingColor()\n\t{\n\t\treturn new Color(255,0,170);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 19,\n\t\t\tkeyName \u003d \"smithingColor\",\n\t\t\tname \u003d \"Smithing Color\",\n\t\t\tdescription \u003d \"Color of the Smithing graph line\",\n\t\t\tsection \u003d skillColorSection\n\t)\n\tdefault Color smithingColor()\n\t{\n\t\treturn new Color(185,237,224);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 20,\n\t\t\tkeyName \u003d \"miningColor\",\n\t\t\tname \u003d \"Mining Color\",\n\t\t\tdescription \u003d \"Color of the Mining graph line\",\n\t\t\tsection \u003d skillColorSection\n\t)\n\tdefault Color miningColor()\n\t{\n\t\treturn new Color(204,204,204);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 21,\n\t\t\tkeyName \u003d \"herbloreColor\",\n\t\t\tname \u003d \"Herblore Color\",\n\t\t\tdescription \u003d \"Color of the Herblore graph line\",\n\t\t\tsection \u003d skillColorSection\n\t)\n\tdefault Color herbloreColor()\n\t{\n\t\treturn new Color(191,255,0);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 22,\n\t\t\tkeyName \u003d \"agilityColor\",\n\t\t\tname \u003d \"Agility Color\",\n\t\t\tdescription \u003d \"Color of the Agility graph line\",\n\t\t\tsection \u003d skillColorSection\n\t)\n\tdefault Color agilityColor()\n\t{\n\t\treturn new Color(185,215,237);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 23,\n\t\t\tkeyName \u003d \"thievingColor\",\n\t\t\tname \u003d \"Thieving Color\",\n\t\t\tdescription \u003d \"Color of the Thieving graph line\",\n\t\t\tsection \u003d skillColorSection\n\t)\n\tdefault Color thievingColor()\n\t{\n\t\treturn new Color(255,255,0);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 24,\n\t\t\tkeyName \u003d \"slayerColor\",\n\t\t\tname \u003d \"Slayer Color\",\n\t\t\tdescription \u003d \"Color of the Slayer graph line\",\n\t\t\tsection \u003d skillColorSection\n\t)\n\tdefault Color slayerColor()\n\t{\n\t\treturn new Color(220,185,237);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 25,\n\t\t\tkeyName \u003d \"farmingColor\",\n\t\t\tname \u003d \"Farming Color\",\n\t\t\tdescription \u003d \"Color of the Farming graph line\",\n\t\t\tsection \u003d skillColorSection\n\t)\n\tdefault Color farmingColor()\n\t{\n\t\treturn new Color(0,234,255);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 26,\n\t\t\tkeyName \u003d \"runecraftColor\",\n\t\t\tname \u003d \"Runecraft Color\",\n\t\t\tdescription \u003d \"Color of the Runecraft graph line\",\n\t\t\tsection \u003d skillColorSection\n\t)\n\tdefault Color runecraftColor()\n\t{\n\t\treturn new Color(170,0,255);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 27,\n\t\t\tkeyName \u003d \"hunterColor\",\n\t\t\tname \u003d \"Hunter Color\",\n\t\t\tdescription \u003d \"Color of the Hunter graph line\",\n\t\t\tsection \u003d skillColorSection\n\t)\n\tdefault Color hunterColor()\n\t{\n\t\treturn new Color(237, 185, 185);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 28,\n\t\t\tkeyName \u003d \"constructionColor\",\n\t\t\tname \u003d \"Construction Color\",\n\t\t\tdescription \u003d \"Color of the Construction graph line\",\n\t\t\tsection \u003d skillColorSection\n\t)\n\tdefault Color constructionColor()\n\t{\n\t\treturn new Color(220, 190, 255);\n\t}\n\n}\n","filePath":"src\\main\\java\\com\\xpgrapher\\XpGrapherConfig.java"},{"fileName":"XpGrapherOverlay.java","content":"package com.xpgrapher;\n\nimport com.google.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.api.Skill;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.LayoutableRenderableEntity;\n\nimport java.awt.*;\nimport java.text.DateFormat;\nimport java.text.DecimalFormat;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\n\npublic class XpGrapherOverlay extends OverlayPanel {\n\n    private final Client client;\n    private XpGrapherPlugin grapherPlugin;\n\n    private int borderThickness \u003d 2;\n    private int divisionLineThickness \u003d 1;\n\n    private Color textColor \u003d Color.WHITE;\n    private Color graphLineColor;\n    private Color backgroundColor;\n    private int backgroundTransparency;\n\n    private int marginGraphLeft \u003d 43;\n    private int marginGraphTop \u003d 11;\n    private int marginGraphRight \u003d 24;\n    private int marginGraphBottom \u003d 30;\n    private int marginTimeLabelTop \u003d 7;\n\n    private int marginOverlayRight \u003d 5;\n\n    //private int marginStartMessageTop \u003d 12;\n    private int marginStartMessageBottom \u003d 8;\n\n    private int marginLegendRight \u003d 12;\n    private int marginLegendTop \u003d 8;\n    private int marginLegendLeft \u003d 10;\n    private int marginLegendBoxBottom \u003d 2;\n    private int marginLegendBoxRight \u003d 4;\n    private int marginLegendBoxLeft \u003d 4;\n    private int marginLegendBoxTop \u003d 2;\n    private int marginLegendBottom \u003d 3;\n    private int legendBoxSize \u003d 10;\n\n    private int legendWidth \u003d 93;\n    private int legendHeight \u003d 20;\n\n    private int marginVertAxisValueRight \u003d 4;\n\n    private int bottomAxisTickMarkLength \u003d 6;\n\n    @Inject\n    private XpGrapherOverlay(Client client, XpGrapherPlugin grapherPlugin) {\n        this.client \u003d client;\n        this.grapherPlugin \u003d grapherPlugin;\n        graphLineColor \u003d grapherPlugin.config.graphColor();\n        backgroundColor \u003d grapherPlugin.config.graphBackgroundColor();\n        backgroundTransparency \u003d grapherPlugin.config.graphBackgroundTransparency();\n        setLayer(OverlayLayer.ABOVE_WIDGETS);\n        setPosition(OverlayPosition.BOTTOM_LEFT);\n\n    }\n\n    private int convertTransparency(int configTransparency) {\n        return (int)(255*((double)configTransparency/(double)100));\n    }\n\n    private String formatTime(long timePassed) {\n        int secondsPassed \u003d (int)timePassed/1000;\n        int hours \u003d secondsPassed/(60*60);\n        int secondsLeft \u003d secondsPassed%(60*60);\n        int minutes \u003d secondsLeft/60;\n        int seconds \u003d secondsLeft%60;\n\n        String result \u003d \"\";\n        if (hours \u003e 0)\n            result +\u003d hours + \":\";\n        if (minutes \u003e 0 || hours \u003e 0) {\n            if (minutes \u003c 10 \u0026\u0026 hours \u003e 0)\n                result +\u003d \"0\";\n            result +\u003d minutes + \":\";\n        }\n        if (seconds \u003c 10 \u0026\u0026 (minutes \u003e 0|| hours \u003e 0))\n            result +\u003d \"0\";\n        result +\u003d seconds;\n        return result;\n    }\n\n    private String formatXpString(int xpToFormat) {\n\n        String result;\n\n        if (xpToFormat \u003c 1000)\n            result \u003d Integer.toString(xpToFormat);\n        else if (xpToFormat \u003c 1000000) {\n\n            int xpInK \u003d xpToFormat/1000;\n            int decimalPart \u003d xpToFormat%1000;\n            //System.out.println(xpToFormat + \", \" + xpInK + \", \" + decimalPart);\n            result \u003d Integer.toString(xpInK);\n            if (decimalPart \u003e 0) {\n                result \u003d result + \".\" + decimalPart;\n                while (result.charAt(result.length()-1) \u003d\u003d \u00270\u0027)\n                    result \u003d result.substring(0, result.length()-1);\n            }\n\n\n            result \u003d result + \"K\";\n\n        }\n        else {\n            int xpInM \u003d xpToFormat/1000000;\n            int decimalPart \u003d xpToFormat%1000000;\n            //System.out.println(xpToFormat + \", \" + xpInK + \", \" + decimalPart);\n            result \u003d Integer.toString(xpInM);\n            if (decimalPart \u003e 0) {\n                result \u003d result + \".\" + decimalPart;\n                while (result.charAt(result.length()-1) \u003d\u003d \u00270\u0027)\n                    result \u003d result.substring(0, result.length()-1);\n            }\n\n\n            result \u003d result + \"M\";\n        }\n\n        return result;\n    }\n\n    public void printFormattedXp() {\n        for (int i \u003d 0; i \u003c grapherPlugin.xpGraphPointManager.xpGraphMaxValues.length; i++) {\n            System.out.println(formatXpString(grapherPlugin.xpGraphPointManager.xpGraphMaxValues[i]));\n        }\n    }\n\n\n\n    LayoutableRenderableEntity graphEntity \u003d new LayoutableRenderableEntity() {\n\n        @Override\n        public Dimension render(Graphics2D graphics) {\n\n            graphLineColor \u003d grapherPlugin.config.graphColor();\n            backgroundColor \u003d grapherPlugin.config.graphBackgroundColor();\n            backgroundTransparency \u003d convertTransparency(grapherPlugin.config.graphBackgroundTransparency());\n\n            if (!grapherPlugin.config.displayKey()) {\n                int currentWidth \u003d this.getBounds().width;\n                int currentHeight \u003d this.getBounds().height;\n                //this.setBounds(new Rectangle(currentWidth - legendWidth, currentHeight));\n                //this.setPreferredSize(new Dimension(currentWidth - legendWidth, currentHeight));\n                //setBounds(new Rectangle(50, 50));\n\n            }\n\n            //overlay background box\n            int r \u003d backgroundColor.getRed();\n            int g \u003d backgroundColor.getGreen();\n            int b \u003d backgroundColor.getBlue();\n            Color backgroundColorTrans \u003d new Color(r, g, b, backgroundTransparency);\n\n            graphics.setColor(backgroundColorTrans);\n            //graphics.fillRect(0, 0, this.getBounds().width, this.getBounds().height);\n            graphics.fillRect(0, 0, marginGraphLeft+grapherPlugin.graphWidth+marginGraphRight+marginOverlayRight, this.getBounds().height);\n\n\n            //overlay border box\n            graphics.setColor(graphLineColor);\n            int borderX \u003d 0;\n            int borderY \u003d 0;\n            graphics.drawRect(borderX, borderY, marginGraphLeft+grapherPlugin.graphWidth+marginGraphRight+marginOverlayRight, this.getBounds().height);\n            graphics.drawRect(borderX+1, borderY+1, marginGraphLeft+grapherPlugin.graphWidth+marginGraphRight+marginOverlayRight-2, this.getBounds().height-2);\n\n            //graph border box\n            borderX \u003d marginGraphLeft;\n            borderY \u003d marginGraphTop;\n            graphics.drawRect(borderX, borderY, grapherPlugin.graphWidth, grapherPlugin.graphHeight);\n            graphics.drawRect(borderX-1, borderY-1, grapherPlugin.graphWidth+2, grapherPlugin.graphHeight+2);\n\n            //vertical divisions\n            double verticalIncrement \u003d (double)grapherPlugin.graphHeight/(double)grapherPlugin.numVerticalDivisions;\n            for (int i \u003d 0; i \u003c\u003d 5; i++) {\n\n                int x \u003d marginGraphLeft;\n                int y \u003d (int)(marginGraphTop+verticalIncrement*i);\n                graphics.drawLine(x, y, x+grapherPlugin.graphWidth, y);\n\n            }\n\n            //vertical axis values\n            int vertAxisMaxValue \u003d grapherPlugin.xpGraphPointManager.maxVertAxisValue;\n            int vertAxisXpInc \u003d vertAxisMaxValue/grapherPlugin.numVerticalDivisions;\n\n            for (int i \u003d 0; i \u003c\u003d 5; i++) {\n                int xpAtVerticalDiv \u003d vertAxisMaxValue - i*vertAxisXpInc;\n\n                String xpAtVerticalDivString \u003d formatXpString(xpAtVerticalDiv);\n\n                int stringWidth \u003d graphics.getFontMetrics().stringWidth(xpAtVerticalDivString);\n                int stringHeight \u003d graphics.getFontMetrics().getHeight();\n\n                if (xpAtVerticalDiv !\u003d 0 || i \u003d\u003d 5)\n                    graphics.drawString(xpAtVerticalDivString, marginGraphLeft-stringWidth-marginVertAxisValueRight, (int)(marginGraphTop+verticalIncrement*i+stringHeight/2-1));\n\n\n            }\n\n            //actual xp data lines\n            for (int i \u003d 0; i \u003c grapherPlugin.skillList.length; i++) {\n\n                Skill skillToGraph \u003d grapherPlugin.skillList[i];\n                Color skillColor \u003d grapherPlugin.xpGraphColorManager.getSkillColor(skillToGraph);\n                graphics.setColor(skillColor);\n\n                if (grapherPlugin.isSkillShown(skillToGraph)) {\n\n                    int oldX \u003d -1;\n                    int oldY \u003d -1;\n                    for (int x \u003d 0; x \u003c grapherPlugin.graphWidth; x++) {\n\n                        int y \u003d grapherPlugin.xpGraphPointManager.getGraphPointData(skillToGraph, x);\n                        if (y \u003e\u003d 0) {\n                            graphics.drawLine(marginGraphLeft+x, marginGraphTop+y, marginGraphLeft+x, marginGraphTop+y);\n                            graphics.drawLine(marginGraphLeft+x, marginGraphTop+y+1, marginGraphLeft+x, marginGraphTop+y+1);\n                        }\n\n                        if (oldX !\u003d -1 \u0026\u0026 y \u003e\u003d 0) {\n                            graphics.drawLine(marginGraphLeft+oldX, marginGraphTop+oldY, marginGraphLeft+x-1, marginGraphTop+y);\n                            graphics.drawLine(marginGraphLeft+oldX-1, marginGraphTop+oldY, marginGraphLeft+x-2, marginGraphTop+y);\n                        }\n                        oldX \u003d x;\n                        oldY \u003d y;\n                    }\n\n                }\n\n            }\n\n            int legendSkillCount \u003d  grapherPlugin.currentlyGraphedSkills.size();\n\n            if (grapherPlugin.config.displayKey() \u0026\u0026 legendSkillCount \u003e 0) {\n\n                //legendHeight \u003d legendSkillCount*(legendBoxSize + marginLegendBoxTop + marginLegendBoxBottom) + marginLegendBottom;\n                legendHeight \u003d 12*legendSkillCount + 6;\n                int legendX \u003d marginGraphLeft+grapherPlugin.graphWidth+marginGraphRight+marginLegendLeft;\n                int legendY \u003d marginGraphTop;\n\n                //legend background box\n                graphics.setColor(backgroundColorTrans);\n                graphics.fillRect(legendX, legendY, legendWidth, legendHeight);\n\n                //legend border box\n                graphics.setColor(graphLineColor);\n                graphics.drawRect(legendX, legendY, legendWidth, legendHeight);\n                graphics.drawRect(legendX-1, legendY-1, legendWidth+2, legendHeight+2);\n\n\n                //legend boxes and labels\n                int legendYOffset \u003d marginGraphTop+2*marginLegendBoxTop-1;\n                for (int i \u003d 0; i \u003c grapherPlugin.skillList.length; i++) {\n                    Skill theSkill \u003d grapherPlugin.skillList[i];\n                    if (grapherPlugin.isSkillShown(theSkill)) {\n                        //graphics.setColor(dataLineColors[i]);\n                        Color skillColor \u003d grapherPlugin.xpGraphColorManager.getSkillColor(theSkill);\n                        graphics.setColor(skillColor);\n                        int legendBoxX \u003d legendX + marginLegendBoxLeft;\n                        graphics.fillRect(legendBoxX, legendYOffset, legendBoxSize, legendBoxSize);\n                        graphics.setColor(Color.BLACK);\n                        graphics.drawRect(legendBoxX, legendYOffset, legendBoxSize, legendBoxSize);\n                        legendYOffset +\u003d legendBoxSize + marginLegendBoxBottom;\n\n                        graphics.setColor(graphLineColor);\n                        String skillName \u003d theSkill.getName();\n                        int skillNameHeight \u003d graphics.getFontMetrics().getHeight();\n                        int skillNameX \u003d legendBoxX + legendBoxSize + marginLegendBoxRight;\n                        int skillNameY \u003d legendYOffset;\n                        graphics.drawString(skillName, skillNameX, skillNameY);\n                    }\n                }\n            }\n\n\n\n            //bottom axis tick marks\n            graphics.setColor(graphLineColor);\n            int bottomLeftGraphX \u003d marginGraphLeft;\n            int bottomLeftGraphY \u003d marginGraphTop+grapherPlugin.graphHeight;\n            graphics.drawLine(bottomLeftGraphX, bottomLeftGraphY, bottomLeftGraphX, bottomLeftGraphY + bottomAxisTickMarkLength);\n            graphics.drawLine(bottomLeftGraphX-1, bottomLeftGraphY, bottomLeftGraphX-1, bottomLeftGraphY + bottomAxisTickMarkLength);\n            int bottomRightGraphX \u003d bottomLeftGraphX + grapherPlugin.graphWidth;\n            graphics.drawLine(bottomRightGraphX, bottomLeftGraphY, bottomRightGraphX, bottomLeftGraphY + bottomAxisTickMarkLength);\n            graphics.drawLine(bottomRightGraphX+1, bottomLeftGraphY, bottomRightGraphX+1, bottomLeftGraphY + bottomAxisTickMarkLength);\n\n            long timePassed \u003d grapherPlugin.currentTime - grapherPlugin.startTime;\n            String timeStartLabel \u003d \"0\";\n            int timeStartLabelWidth \u003d graphics.getFontMetrics().stringWidth(timeStartLabel);\n            int timeStartLabelHeight \u003d graphics.getFontMetrics().getHeight();\n            graphics.drawString(timeStartLabel, bottomLeftGraphX-timeStartLabelWidth/2, bottomLeftGraphY+timeStartLabelHeight+marginTimeLabelTop);\n\n            //int secondsPassed \u003d (int)timePassed/1000;\n            //int timePassedHours \u003d secondsPassed/(60*60);\n            //int secondsLeft \u003d secondsPassed%(60*60);\n            //int timePassedMinutes \u003d secondsLeft/60;\n            //int timePassedSeconds \u003d secondsLeft%60;\n\n\n\n            //String timeEndLabel \u003d timePassedHoursString + \":\" + timePassedMinutesString + \":\" + timePassedSecondsString;\n\n            //String timeEndLabel \u003d formatTime(timePassedHours, timePassedMinutes, timePassedSeconds);\n            String timeEndLabel \u003d formatTime(timePassed);\n            /*\n            if (timePassedHours \u003e 0)\n                timeEndLabel +\u003d timePassedHours + \":\";\n            if (timePassedMinutes \u003e 0 || timePassedHours \u003e 0) {\n                if (timePassedMinutes \u003c 10 \u0026\u0026 timePassedHours \u003e 0)\n                    timeEndLabel +\u003d \"0\";\n                timeEndLabel +\u003d timePassedMinutes + \":\";\n            }\n            if (timePassedSeconds \u003c 10 \u0026\u0026 (timePassedMinutes \u003e 0|| timePassedHours \u003e 0))\n                timeEndLabel +\u003d \"0\";\n            timeEndLabel +\u003d timePassedSeconds;\n            */\n\n            /*\n            int secondsPassed \u003d (int)(timePassed/1000);\n            int timePassedMinutes \u003d secondsPassed/60;\n            int secondsLeft \u003d secondsPassed%60;\n            String secondsLeftString \u003d Integer.toString(secondsLeft);\n            if (secondsLeft \u003c 10) {\n                secondsLeftString \u003d \"0\" + secondsLeftString;\n            }\n            String timeEndLabel \u003d timePassedMinutes + \":\" + secondsLeftString;\n            */\n\n            int timeEndLabelWidth \u003d graphics.getFontMetrics().stringWidth(timeEndLabel);\n            int timeEndLabelHeight \u003d graphics.getFontMetrics().getHeight();\n            graphics.drawString(timeEndLabel, bottomRightGraphX-timeEndLabelWidth/2, bottomLeftGraphY+timeEndLabelHeight+marginTimeLabelTop);\n\n\n            //xp rate data\n            if (grapherPlugin.config.displayXpRate() \u0026\u0026 grapherPlugin.currentlyGraphedSkills.size() \u003e 0) {\n                int endingSkillXp;\n                if (grapherPlugin.tickCount \u003e 0)\n                    endingSkillXp \u003d grapherPlugin.xpDataManager.getXpData(grapherPlugin.mostRecentSkillGained, grapherPlugin.tickCount-1);\n                else\n                    endingSkillXp \u003d grapherPlugin.xpDataManager.getXpData(grapherPlugin.mostRecentSkillGained, 0);\n                int startingSkillXp \u003d grapherPlugin.xpDataManager.getXpData(grapherPlugin.mostRecentSkillGained, 0);\n                int xpGained \u003d endingSkillXp - startingSkillXp;\n                long msPassed \u003d System.currentTimeMillis() - grapherPlugin.startTime;\n                long secPassed \u003d msPassed/1000;\n                double xpPerSecond \u003d (double)xpGained/secPassed;\n                double xpPerHour \u003d xpPerSecond*60*60;\n                String skillName \u003d grapherPlugin.mostRecentSkillGained.getName();\n                DecimalFormat formatter \u003d new DecimalFormat(\"###,###,###\");\n                String skillInfoXpRate \u003d formatter.format((int)xpPerHour);\n                String skillInfo \u003d skillName + \" XP/hr: \" + skillInfoXpRate;\n                int skillInfoWidth \u003d graphics.getFontMetrics().stringWidth(skillInfo);\n                int skillInfoHeight \u003d graphics.getFontMetrics().getHeight();\n                //int skillInfoY \u003d grapherPlugin.graphHeight+marginGraphTop+marginGraphBottom+bottomAxisTickMarkLength-skillInfoHeight/2;\n                int skillInfoY \u003d bottomLeftGraphY+timeEndLabelHeight+marginTimeLabelTop;\n                int skillInfoX \u003d marginGraphLeft+grapherPlugin.graphWidth/2-skillInfoWidth/2;\n                graphics.drawString(skillInfo, skillInfoX, skillInfoY);\n            }\n\n            //show message to start skilling to start the graph\n            //if (legendYOffset \u003d\u003d marginGraphTop+2*marginLegendBoxTop-1) {\n            if (grapherPlugin.currentlyGraphedSkills.size() \u003d\u003d 0) {\n\n                grapherPlugin.startMessageDisplaying \u003d true;\n\n                //0, 0, marginGraphLeft+grapherPlugin.graphWidth+marginGraphRight+marginOverlayRight, this.getBounds().height\n                //int overlayWidth \u003d grapherPlugin.graphWidth+marginGraphRight+marginGraphLeft+legendWidth+marginLegendRight;\n                //int overlayHeight \u003d marginGraphTop+grapherPlugin.graphHeight+marginGraphBottom;\n                int overlayWidth \u003d marginGraphLeft+grapherPlugin.graphWidth+marginGraphRight+marginOverlayRight;\n                int overlayHeight \u003d this.getBounds().height;\n\n                int messageHeight \u003d graphics.getFontMetrics().getHeight();\n\n                String message1 \u003d \"Gain xp to start\";\n                int message1Width \u003d graphics.getFontMetrics().stringWidth(message1);\n                //int message1x \u003d marginGraphLeft+grapherPlugin.graphWidth/2-message1Width/2;\n                int message1x \u003d overlayWidth/2-message1Width/2;\n\n                int totalMessageHeight \u003d 3*messageHeight+3*marginStartMessageBottom;\n                int startingYOffset \u003d this.getBounds().height/2 - totalMessageHeight/2;\n                int message1y \u003d marginGraphTop+startingYOffset;\n\n                String message2 \u003d \"Alt+drag to move\";\n                int message2Width \u003d graphics.getFontMetrics().stringWidth(message2);\n                //int message2x \u003d marginGraphLeft+grapherPlugin.graphWidth/2-message2Width/2;\n                int message2x \u003d overlayWidth/2-message2Width/2;\n                int message2y \u003d message1y+messageHeight+marginStartMessageBottom;\n\n                String message3 \u003d \"Change graph size in settings\";\n                int message3Width \u003d graphics.getFontMetrics().stringWidth(message3);\n                //int message3x \u003d marginGraphLeft+grapherPlugin.graphWidth/2-message3Width/2;\n                int message3x \u003d overlayWidth/2-message3Width/2;\n                int message3y \u003d message2y+messageHeight+marginStartMessageBottom;\n\n                graphics.setColor(new Color(backgroundColor.getRed(), backgroundColor.getGreen(), backgroundColor.getBlue(), 200));\n                //graphics.fillRect(marginGraphLeft+1, marginGraphRight, grapherPlugin.graphWidth+marginGraphRight+legendWidth-1, grapherPlugin.graphHeight-1);\n                graphics.fillRect(1, 1,\n                        overlayWidth-1,\n                        overlayHeight-1\n                );\n\n\n                graphics.setColor(graphLineColor);\n                graphics.drawString(message1, message1x, message1y);\n                graphics.drawString(message2, message2x, message2y);\n                graphics.drawString(message3, message3x, message3y);\n\n            } else {\n                grapherPlugin.startMessageDisplaying \u003d false;\n            }\n\n\n\n            return new Dimension(this.getBounds().width, this.getBounds().height);\n\n        }\n\n        @Override\n        public Rectangle getBounds() {\n            int boundsWidth \u003d marginGraphLeft+grapherPlugin.graphWidth+marginGraphRight+legendWidth+marginLegendRight;\n            int boundsHeight \u003d marginGraphTop+grapherPlugin.graphHeight+marginGraphBottom;\n            return new Rectangle(boundsWidth, boundsHeight);\n        }\n\n        @Override\n        public void setPreferredLocation(Point position) {\n            return;\n        }\n\n        @Override\n        public void setPreferredSize(Dimension dimension) {\n            return;\n        }\n\n    };\n\n    @Override\n    public Dimension render(Graphics2D graphics)\n    {\n\n        panelComponent.getChildren().add(graphEntity);\n        panelComponent.setBackgroundColor(new Color(0, 0, 0, 0));\n\n        return super.render(graphics);\n    }\n\n}\n\n","filePath":"src\\main\\java\\com\\xpgrapher\\XpGrapherOverlay.java"},{"fileName":"XpGrapherPlugin.java","content":"package com.xpgrapher;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport javax.sound.midi.SysexMessage;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Skill;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\nimport java.awt.*;\nimport java.sql.Time;\nimport java.util.ArrayList;\n\n@Slf4j\n@PluginDescriptor(\n\t\tname \u003d \"XP Grapher\"\n)\npublic class XpGrapherPlugin extends Plugin {\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tpublic XpGrapherConfig config;\n\n\tpublic Skill[] skillList;\n\tpublic Skill mostRecentSkillGained;\n\n\tpublic int tickCount \u003d 0;\n\tpublic long startTime \u003d 0;\n\tpublic long currentTime \u003d 0;\n\tpublic XpDataManager xpDataManager;\n\tpublic XpGraphPointManager xpGraphPointManager;\n\tpublic XpGraphColorManager xpGraphColorManager;\n\n\tpublic int graphWidth;\n\tpublic int graphHeight;\n\n\tpublic int numVerticalDivisions \u003d 5;\n\n\t//public int maxNumberOfGraphedSkills \u003d 8;\n\tpublic ArrayList\u003cSkill\u003e currentlyGraphedSkills \u003d new ArrayList\u003cSkill\u003e();\n\n\tprivate boolean lastTickResetGraphSwitch \u003d false;\n\tprivate boolean thisTickResetGraphSwitch \u003d false;\n\n\tpublic boolean startMessageDisplaying \u003d true;\n\n\t@Provides\n\tXpGrapherConfig getConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(XpGrapherConfig.class);\n\t}\n\n\n\n\t@com.google.inject.Inject\n\tprivate XpGrapherOverlay overlay;\n\n\t@com.google.inject.Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Override\n\tpublic void startUp()\n\t{\n\t\tgraphWidth \u003d config.graphWidth();\n\t\tgraphHeight \u003d config.graphHeight();\n\t\tskillList \u003d Skill.values();\n\t\txpDataManager \u003d new XpDataManager(this);\n\t\txpGraphPointManager \u003d new XpGraphPointManager(this);\n\t\txpGraphColorManager \u003d new XpGraphColorManager(this);\n\t\tstartTime \u003d System.currentTimeMillis();\n\n\t\toverlayManager.add(overlay);\n\n\t}\n\n\t@Override\n\tpublic void shutDown()\n\t{\n\t\toverlayManager.remove(overlay);\n\t}\n\n\tprivate boolean isSkillCurrentlyGraphed(Skill theSkill) {\n\t\tfor (int i \u003d 0; i \u003c currentlyGraphedSkills.size(); i++) {\n\t\t\tif (currentlyGraphedSkills.get(i).getName() \u003d\u003d theSkill.getName())\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic void graphSkill(Skill skillToAdd) {\n\t\tmostRecentSkillGained \u003d skillToAdd;\n\t\tif (!isSkillCurrentlyGraphed(skillToAdd)) {\n\t\t\tif (currentlyGraphedSkills.size() \u003c config.maxSkillsToGraph()) {\n\t\t\t\tcurrentlyGraphedSkills.add(skillToAdd);\n\t\t\t\txpGraphPointManager.isSkillShownMap.put(skillToAdd, true);\n\t\t\t} else {\n\t\t\t\twhile(currentlyGraphedSkills.size() \u003e config.maxSkillsToGraph())\n\t\t\t\t\tremoveSkill();\n\t\t\t\tcurrentlyGraphedSkills.add(skillToAdd);\n\t\t\t\txpGraphPointManager.isSkillShownMap.put(skillToAdd, true);\n\t\t\t}\n\t\t}\n\n\t}\n\n\tpublic void removeSkill() {\n\t\txpGraphPointManager.isSkillShownMap.put(currentlyGraphedSkills.get(0), false);\n\t\tcurrentlyGraphedSkills.remove(0);\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick tick)\n\t{\n\n\t\tcurrentTime \u003d System.currentTimeMillis();\n\t\tgraphWidth \u003d config.graphWidth();\n\t\tgraphHeight \u003d config.graphHeight();\n\t\txpDataManager.update();\n\t\txpGraphPointManager.update();\n\n\t\tif (currentlyGraphedSkills.size() \u003e config.maxSkillsToGraph()) {\n\t\t\tint excessAmount \u003d currentlyGraphedSkills.size() - config.maxSkillsToGraph();\n\t\t\tfor (int i \u003d 0; i \u003c  excessAmount; i++) {\n\t\t\t\tremoveSkill();\n\t\t\t}\n\t\t}\n\n\t\t//System.out.println(tickCount);\n\t\t//System.out.println(\"fletching xp from data manager \" + xpDataManager.getXpData(Skill.FLETCHING, tickCount));\n\t\t//System.out.println(\"y value from graph manager \" + xpGraphPointManager.getGraphPointData(Skill.FLETCHING, tickCount));\n\n\t\ttickCount++;\n\n\t\tthisTickResetGraphSwitch \u003d config.resetGraph();\n\t\tif (thisTickResetGraphSwitch \u0026\u0026 !lastTickResetGraphSwitch) {\n\t\t\tresetAll();\n\t\t}\n\n\t\tlastTickResetGraphSwitch \u003d thisTickResetGraphSwitch;\n\n\t}\n\n\tprivate void resetAll() {\n\t\txpDataManager \u003d new XpDataManager(this);\n\t\txpGraphPointManager \u003d new XpGraphPointManager(this);\n\t\tstartTime \u003d System.currentTimeMillis();\n\t\tcurrentlyGraphedSkills \u003d new ArrayList\u003cSkill\u003e();\n\t\ttickCount \u003d 0;\n\t}\n\n\tpublic Client getClient() {\n\t\treturn client;\n\t}\n\n\tpublic boolean isSkillShown(Skill skill) {\n\n\t\treturn xpGraphPointManager.isSkillShown(skill);\n\t}\n\n}\n","filePath":"src\\main\\java\\com\\xpgrapher\\XpGrapherPlugin.java"},{"fileName":"XpGraphPointManager.java","content":"package com.xpgrapher;\n\nimport net.runelite.api.Skill;\n\nimport java.lang.reflect.Array;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class XpGraphPointManager {\n\n    private XpGrapherPlugin grapherPlugin;\n    private Map\u003cSkill, ArrayList\u003e skillGraphPointsMap \u003d new HashMap\u003cSkill, ArrayList\u003e();\n    public Map\u003cSkill, Boolean\u003e isSkillShownMap \u003d new HashMap\u003cSkill, Boolean\u003e();\n\n    public int maxVertAxisValue \u003d 0;\n\n    public int[] xpGraphMaxValues \u003d {\n            0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10,\n            12, 15, 20, 25, 30, 40, 50, 60, 80, 100,\n            125, 150, 200, 250, 300, 400, 500, 600, 800, 1000,\n            1250, 1500, 2000, 2500, 3000, 4000, 5000, 6000, 8000, 10000,\n            12500, 15000, 20000, 25000, 30000, 40000, 50000, 60000, 80000, 100000,\n            125000, 150000, 200000, 250000, 300000, 400000, 500000, 600000, 800000, 1000000,\n            1250000, 1500000, 2000000, 2500000, 3000000, 4000000, 5000000, 6000000, 8000000, 10000000,\n            12500000, 15000000, 20000000, 25000000, 30000000, 40000000, 50000000, 60000000, 80000000, 100000000\n    };\n\n\n\n    public XpGraphPointManager(XpGrapherPlugin grapherPlugin) {\n\n        this.grapherPlugin \u003d grapherPlugin;\n\n        for (int i \u003d 0; i \u003c grapherPlugin.skillList.length; i++) {\n            ArrayList\u003cInteger\u003e newGraphPointList \u003d new ArrayList\u003cInteger\u003e();\n            skillGraphPointsMap.put(grapherPlugin.skillList[i], newGraphPointList);\n            isSkillShownMap.put(grapherPlugin.skillList[i], false);\n        }\n\n    }\n\n    public boolean isSkillShown(Skill theSkill) {\n        return isSkillShownMap.get(theSkill);\n    }\n\n    public int getGraphPointData(Skill skillToGraph, int x) {\n        ArrayList\u003cInteger\u003e skillGraphData \u003d skillGraphPointsMap.get(skillToGraph);\n        //System.out.println(skillToGraph.getName());\n        if (skillGraphData.size() \u003d\u003d 0)\n            return grapherPlugin.graphHeight;\n        else {\n            int y \u003d skillGraphData.get(x);\n            return y;\n        }\n\n    }\n\n    public ArrayList\u003cInteger\u003e getGraphPointDataList(Skill theSkill) {\n        return skillGraphPointsMap.get(theSkill);\n    }\n\n    public void update() {\n\n        int maxXpGained \u003d -1;\n\n        for (int i \u003d 0; i \u003c grapherPlugin.skillList.length; i++) {\n\n            Skill skillToCheck \u003d grapherPlugin.skillList[i];\n\n            if (grapherPlugin.isSkillShown(skillToCheck)) {\n                int skillMinXp \u003d grapherPlugin.xpDataManager.getXpData(skillToCheck, 0);\n                //System.out.println(grapherPlugin.tickCount);\n                int skillMaxXp \u003d grapherPlugin.xpDataManager.getXpData(skillToCheck, grapherPlugin.tickCount);\n                int skillXpGained \u003d skillMaxXp - skillMinXp;\n                if (maxXpGained \u003d\u003d -1 || skillXpGained \u003e maxXpGained)\n                    maxXpGained \u003d skillXpGained;\n            }\n\n        }\n\n        boolean maxXpFound \u003d false;\n        int maxXpIndex \u003d 0;\n        while (!maxXpFound) {\n            if (maxXpGained \u003c\u003d xpGraphMaxValues[maxXpIndex]) {\n                maxXpFound \u003d true;\n                //System.out.println(xpGraphMaxValues[maxXpIndex]);\n            } else {\n                maxXpIndex++;\n            }\n        }\n        maxVertAxisValue \u003d xpGraphMaxValues[maxXpIndex];\n\n        for (int i \u003d 0; i \u003c grapherPlugin.skillList.length; i++) {\n\n            Skill skillToUpdate \u003d grapherPlugin.skillList[i];\n\n            ArrayList\u003cInteger\u003e newGraphPointList \u003d new ArrayList\u003cInteger\u003e();\n\n            for (int x \u003d 0; x \u003c grapherPlugin.graphWidth; x++) {\n\n                double ratioAcrossGraph \u003d (double)x/((double)grapherPlugin.graphWidth);\n\n                int dataIndex \u003d (int)(Math.floor(ratioAcrossGraph*(grapherPlugin.tickCount+1)));\n\n                //int ceilDataIndex \u003d (int)(Math.ceil(ratioAcrossGraph*(grapherPlugin.tickCount)));\n                //int floorDataIndex \u003d (int)(Math.floor(ratioAcrossGraph*(grapherPlugin.tickCount)));\n                //System.out.println(ceilDataIndex + \", \" + floorDataIndex);\n\n                int dataXpValue \u003d grapherPlugin.xpDataManager.getXpData(skillToUpdate, dataIndex);\n                if (x \u003d\u003d 0) {\n                    dataXpValue \u003d grapherPlugin.xpDataManager.getXpData(skillToUpdate, 0);\n                }\n                if (x \u003d\u003d grapherPlugin.graphWidth - 1) {\n                    dataXpValue \u003d grapherPlugin.xpDataManager.getMostRecentXp(skillToUpdate);\n                }\n\n                int dataXpMinValue \u003d grapherPlugin.xpDataManager.getXpData(skillToUpdate, 0);\n                int dataXpGained \u003d dataXpValue -  dataXpMinValue;\n\n                double ratioVertical \u003d dataXpGained/(double) maxVertAxisValue;\n                int y \u003d grapherPlugin.graphHeight - (int)((double)grapherPlugin.graphHeight*ratioVertical);\n\n                //if (x \u003d\u003d grapherPlugin.graphWidth-1) {\n                //\n                //    dataXpValue \u003d grapherPlugin.getClient().getSkillExperience(skillToUpdate);\n                //\n                //}\n\n                newGraphPointList.add(y);\n\n            }\n\n            skillGraphPointsMap.put(skillToUpdate, newGraphPointList);\n        }\n\n    }\n\n}\n","filePath":"src\\main\\java\\com\\xpgrapher\\XpGraphPointManager.java"},{"fileName":"XpGrapherTest.java","content":"package com.xpgrapher;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class XpGrapherTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(XpGrapherPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\xpgrapher\\XpGrapherTest.java"}]},{"commit":"a32943fa864f1e5bd4f5932c6f0f9e7bf54ff842","repository":"https://github.com/Koitere/monster-stats.git","internalName":"monsterstats","files":[{"fileName":"MonsterStatsConfig.java","content":"package com.monsterstats;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"monsterstats\")\npublic interface MonsterStatsConfig extends Config\n{\n    @ConfigItem(\n            keyName \u003d \"showStatsMenuOption\",\n            name \u003d \"Show Stats Menu Option\",\n            description \u003d \"Enable right-click \u0027Stats\u0027 option for NPCs, side panel must also be enabled.\"\n    )\n    default boolean showStatsMenuOption()\n    {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"showHoverTooltip\",\n            name \u003d \"Show Hover Tooltip\",\n            description \u003d \"Show a tooltip with elemental weakness and weakness percent when hovering over monsters.\"\n    )\n    default boolean showHoverTooltip()\n    {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"shiftForTooltip\",\n            name \u003d \"Shift for Tooltip\",\n            description \u003d \"Hover tooltip only appears when the Shift key is held.\"\n    )\n    default boolean shiftForTooltip()\n    {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"enableSidePanel\",\n            name \u003d \"Enable Side Panel\",\n            description \u003d \"Enables the searchable side panel to display more monster stats.\"\n    )\n    default boolean enableSidePanel() { return true; }\n}\n","filePath":"src\\main\\java\\com\\monsterstats\\MonsterStatsConfig.java"},{"fileName":"MonsterStatsOverlay.java","content":"package com.monsterstats;\r\n\r\nimport com.google.inject.Inject;\r\n\r\nimport java.awt.*;\r\nimport java.awt.image.BufferedImage;\r\n\r\nimport net.runelite.api.*;\r\nimport net.runelite.api.Point;\r\nimport net.runelite.client.ui.overlay.Overlay;\r\nimport net.runelite.client.ui.overlay.OverlayLayer;\r\nimport net.runelite.client.ui.overlay.OverlayPosition;\r\nimport net.runelite.client.ui.overlay.components.*;\r\nimport net.runelite.client.ui.overlay.components.ComponentOrientation;\r\nimport net.runelite.client.ui.overlay.tooltip.Tooltip;\r\nimport net.runelite.client.ui.overlay.tooltip.TooltipManager;\r\nimport net.runelite.client.util.ImageUtil;\r\n\r\npublic class MonsterStatsOverlay extends Overlay\r\n{\r\n    private final MonsterStatsPlugin plugin;\r\n    private final TooltipManager tooltipManager;\r\n    private final Client client;\r\n\r\n    final BufferedImage stabIcon;\r\n    final BufferedImage crushIcon;\r\n    final BufferedImage slashIcon;\r\n    final BufferedImage standardIcon;\r\n    final BufferedImage heavyIcon;\r\n    final BufferedImage lightIcon;\r\n    final BufferedImage elementalIcon;\r\n    final BufferedImage magicIcon;\r\n    final BufferedImage fireIcon;\r\n    final BufferedImage waterIcon;\r\n    final BufferedImage airIcon;\r\n    final BufferedImage earthIcon;\r\n    final BufferedImage maxHitIcon;\r\n    final BufferedImage attackStyleIcon;\r\n    final BufferedImage flatArmourIcon;\r\n\r\n    @Inject\r\n    MonsterStatsOverlay(MonsterStatsPlugin plugin, Client client, TooltipManager tooltipManager)\r\n    {\r\n        this.plugin \u003d plugin;\r\n        this.client \u003d client;\r\n        this.tooltipManager \u003d tooltipManager;\r\n        setPosition(OverlayPosition.DYNAMIC);\r\n        setLayer(OverlayLayer.ABOVE_SCENE);\r\n        stabIcon \u003d ImageUtil.loadImageResource(getClass(),\"/White_dagger.png\");\r\n        crushIcon \u003d ImageUtil.loadImageResource(getClass(),\"/White_warhammer.png\");\r\n        slashIcon \u003d ImageUtil.loadImageResource(getClass(),\"/White_scimitar.png\");\r\n        standardIcon \u003d ImageUtil.loadImageResource(getClass(),\"/Steel_arrow_5.png\");\r\n        heavyIcon \u003d ImageUtil.loadImageResource(getClass(),\"/Steel_bolts_5.png\");\r\n        lightIcon \u003d ImageUtil.loadImageResource(getClass(),\"/Steel_dart.png\");\r\n        elementalIcon \u003d ImageUtil.loadImageResource(getClass(),\"/Pure_essence.png\");\r\n        magicIcon \u003d ImageUtil.loadImageResource(getClass(),\"/Magic_icon.png\");\r\n        fireIcon \u003d ImageUtil.loadImageResource(getClass(), \"/Fire_rune.png\");\r\n        waterIcon \u003d ImageUtil.loadImageResource(getClass(), \"/Water_rune.png\");\r\n        airIcon \u003d ImageUtil.loadImageResource(getClass(), \"/Air_rune.png\");\r\n        earthIcon \u003d ImageUtil.loadImageResource(getClass(), \"/Earth_rune.png\");\r\n        maxHitIcon \u003d ImageUtil.loadImageResource(getClass(), \"/Damage_hitsplat_(max_hit).png\");\r\n        attackStyleIcon \u003d ImageUtil.loadImageResource(getClass(), \"/Combat_icon.png\");\r\n        flatArmourIcon \u003d ImageUtil.loadImageResource(getClass(), \"/Defence_icon.png\");\r\n    }\r\n\r\n    public BufferedImage getElementalWeaknessIcon(String elementalWeakness)\r\n    {\r\n        switch (elementalWeakness)\r\n        {\r\n            case \"Air\":\r\n                return airIcon;\r\n            case \"Water\":\r\n                return waterIcon;\r\n            case \"Fire\":\r\n                return fireIcon;\r\n            case \"Earth\":\r\n                return earthIcon;\r\n            default:\r\n                return elementalIcon;\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public Dimension render(Graphics2D graphics)\r\n    {\r\n        if (plugin.hoveredNPC !\u003d null)\r\n        {\r\n            renderNpc(graphics, plugin.hoveredNPC);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    private boolean isHoveringGameScene()\r\n    {\r\n        MenuEntry[] menuEntries \u003d client.getMenuEntries();\r\n        for (int i \u003d menuEntries.length - 1; i \u003e\u003d 0; i--)\r\n        {\r\n            if (MenuAction.WALK.equals(menuEntries[i].getType()))\r\n            {\r\n                return true;\r\n            }\r\n            else if (MenuAction.SET_HEADING.equals(menuEntries[i].getType())) //check if player is actively on helm (sailing) and has mouse on game scene\r\n            {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private void renderNpc(Graphics2D graphics, NPC npc)\r\n    {\r\n        if (npc \u003d\u003d null || npc.getCombatLevel() \u003c\u003d 0)\r\n        {\r\n            return;\r\n        }\r\n\r\n        Integer npcID \u003d npc.getId();\r\n        NPCStats idStats \u003d NPCDataLoader.getIDStats(npcID);\r\n\r\n        if (isHoveringGameScene())\r\n        {\r\n            renderTooltip(graphics, idStats);\r\n        }\r\n    }\r\n\r\nprivate void renderTooltip(Graphics2D graphics, NPCStats stats)\r\n{\r\n    Point mousePosition \u003d client.getMouseCanvasPosition();\r\n    // Create a horizontal panel for icons and stats\r\n    PanelComponent rowPanel \u003d new PanelComponent();\r\n    rowPanel.setPreferredLocation(new java.awt.Point(mousePosition.getX(), mousePosition.getY()));\r\n    rowPanel.setOrientation(ComponentOrientation.HORIZONTAL);\r\n    rowPanel.setBorder(new Rectangle(2,2,340,55)); //Set border of resulting tooltip\r\n    rowPanel.setGap(new java.awt.Point(2, 0));  // Add horizontal gap between components\r\n\r\n    tooltipManager.addFront(new Tooltip(rowPanel));\r\n    rowPanel.getChildren().add(createIconWithText( (stabIcon), stats.getStabDefence()));\r\n    rowPanel.getChildren().add(createIconWithText( (crushIcon), stats.getCrushDefence()));\r\n    rowPanel.getChildren().add(createIconWithText( (slashIcon), stats.getSlashDefence()));\r\n    rowPanel.getChildren().add(createIconWithText( (getElementalWeaknessIcon(stats.getElementalWeakness())), stats.getElementalPercent() + \"%\"));\r\n    rowPanel.getChildren().add(createIconWithText( (magicIcon), stats.getMagicDefence()));\r\n    rowPanel.getChildren().add(createIconWithText( (standardIcon), stats.getStandardDefence()));\r\n    rowPanel.getChildren().add(createIconWithText( (heavyIcon), stats.getHeavyDefence()));\r\n    rowPanel.getChildren().add(createIconWithText( (lightIcon), stats.getLightDefence()));\r\n    rowPanel.getChildren().add(createIconWithText( (flatArmourIcon), stats.getFlatArmour()));\r\n\r\n}\r\n\r\n    private PanelComponent createIconWithText(BufferedImage icon, String text)\r\n    {\r\n        PanelComponent iconWithTextPanel \u003d new PanelComponent();\r\n        iconWithTextPanel.setOrientation(ComponentOrientation.VERTICAL);\r\n        iconWithTextPanel.setBorder(new Rectangle(2,2,34,50)); //set border of individual icon/value pair\r\n        iconWithTextPanel.setGap(new java.awt.Point(0, 3));  // Add vertical gap between icon and text\r\n        iconWithTextPanel.getChildren().add(new ImageComponent(icon)); //add icon\r\n        LineComponent valueLine \u003d LineComponent.builder().left(\" \").right(\"\").left(text).build();\r\n        iconWithTextPanel.getChildren().add(valueLine);\r\n\r\n        return iconWithTextPanel;\r\n    }\r\n\r\n}\r\n","filePath":"src\\main\\java\\com\\monsterstats\\MonsterStatsOverlay.java"},{"fileName":"MonsterStatsPanel.java","content":"package com.monsterstats;\r\n\r\nimport net.runelite.client.ui.PluginPanel;\r\n\r\nimport javax.swing.*;\r\nimport javax.swing.border.EmptyBorder;\r\nimport javax.swing.event.DocumentEvent;\r\nimport javax.swing.event.DocumentListener;\r\nimport javax.swing.text.SimpleAttributeSet;\r\nimport javax.swing.text.StyleConstants;\r\nimport javax.swing.text.StyledDocument;\r\nimport java.awt.*;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport java.awt.image.BufferedImage;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.stream.Collectors;\r\nimport net.runelite.client.ui.ColorScheme;\r\n\r\npublic class MonsterStatsPanel extends PluginPanel\r\n{\r\n    private final JTextField searchField;\r\n    private final JPanel resultsPanel;\r\n    private final JPanel dataPanel;\r\n    private final JPanel buttonPanel;\r\n    private final JPanel maxHitTitlePanel;\r\n    private final JPanel maxHitListPanel;\r\n    private final JPanel attackStyleTitlePanel;\r\n    private final JPanel attackStyleListPanel;\r\n    private final JTextPane monsterTextPane;\r\n    private final MonsterStatsOverlay monsterStatsOverlay;\r\n\r\n    public MonsterStatsPanel(MonsterStatsOverlay monsterStatsOverlay, BufferedImage titleIcon)\r\n    {\r\n        this.monsterStatsOverlay \u003d monsterStatsOverlay;\r\n\r\n        setLayout(new BorderLayout());\r\n\r\n        // Create a panel to hold the title and search field\r\n        JPanel northPanel \u003d new JPanel();\r\n        northPanel.setLayout(new BoxLayout(northPanel, BoxLayout.Y_AXIS));\r\n\r\n        // Add title with icon\r\n        JPanel titlePanel \u003d new JPanel();\r\n        titlePanel.setLayout(new BoxLayout(titlePanel, BoxLayout.X_AXIS));\r\n        titlePanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\r\n        titlePanel.setBorder(new EmptyBorder(5,5,5,5));\r\n        titlePanel.setAlignmentX(Component.CENTER_ALIGNMENT);\r\n\r\n        JLabel titleLabel \u003d new JLabel(\"Monster Stats\");\r\n        titleLabel.setFont(new Font(\"Arial\", Font.BOLD, 16));\r\n        titlePanel.add(new JLabel(new ImageIcon(titleIcon)));\r\n        titlePanel.add(Box.createRigidArea(new Dimension(5, 0))); // Add some space between icon and title\r\n        titlePanel.add(titleLabel);\r\n        titlePanel.add(Box.createRigidArea(new Dimension(5, 0))); // Add some space between icon and title\r\n        titlePanel.add(new JLabel(new ImageIcon(titleIcon)));\r\n        // Add the titlePanel to the northPanel\r\n        northPanel.add(titlePanel);\r\n        northPanel.add(Box.createRigidArea(new Dimension(0, 10))); // Add space between title and search field\r\n\r\n        // Add search field\r\n        searchField \u003d new JTextField();\r\n        searchField.getDocument().addDocumentListener(new DocumentListener()\r\n        {\r\n            @Override\r\n            public void insertUpdate(DocumentEvent e)\r\n            {\r\n                search(searchField.getText(), false, \"\");\r\n            }\r\n\r\n            @Override\r\n            public void removeUpdate(DocumentEvent e)\r\n            {\r\n                search(searchField.getText(), false, \"\");\r\n            }\r\n\r\n            @Override\r\n            public void changedUpdate(DocumentEvent e)\r\n            {\r\n                search(searchField.getText(), false, \"\");\r\n            }\r\n        });\r\n\r\n        // Add the searchField to the northPanel\r\n        northPanel.add(searchField);\r\n        northPanel.add(Box.createRigidArea(new Dimension(0, 10))); // Add space between search field and results\r\n\r\n        // Add the northPanel to the main panel\r\n        add(northPanel, BorderLayout.NORTH);\r\n\r\n        // Create a central panel to hold results and data panels with spacing\r\n        JPanel centerPanel \u003d new JPanel();\r\n        centerPanel.setLayout(new BoxLayout(centerPanel, BoxLayout.Y_AXIS));\r\n\r\n\r\n        resultsPanel \u003d new JPanel();\r\n        resultsPanel.setLayout(new BoxLayout(resultsPanel, BoxLayout.Y_AXIS));\r\n\r\n        JScrollPane resultsScrollPane \u003d new JScrollPane(resultsPanel);\r\n        resultsScrollPane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);\r\n        resultsScrollPane.setPreferredSize(new Dimension(300, 200));  // Set max height for the results panel\r\n\r\n        JPanel monsterLabelPanel \u003d new JPanel();\r\n        monsterLabelPanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\r\n        monsterLabelPanel.setBorder(new EmptyBorder(5,0,5,0));\r\n        monsterLabelPanel.setLayout(new BoxLayout( monsterLabelPanel, BoxLayout.X_AXIS));\r\n        monsterLabelPanel.setAlignmentX(Component.CENTER_ALIGNMENT);\r\n\r\n        monsterTextPane \u003d new JTextPane(); //To create wrapping text, we create a text pane with special document styling.\r\n        monsterTextPane.setText(\"Monster Stats\");\r\n        monsterTextPane.setFont(new Font(\"Arial\", Font.BOLD, 14));\r\n        monsterTextPane.setEditable(false);\r\n        monsterTextPane.setOpaque(false);\r\n        monsterTextPane.setAlignmentX(Component.CENTER_ALIGNMENT);\r\n        monsterTextPane.setAlignmentY(Component.CENTER_ALIGNMENT);\r\n        StyledDocument doc \u003d monsterTextPane.getStyledDocument();\r\n        SimpleAttributeSet center \u003d new SimpleAttributeSet();\r\n        StyleConstants.setAlignment(center, StyleConstants.ALIGN_CENTER);\r\n        doc.setParagraphAttributes(0, doc.getLength(), center, false);\r\n\r\n        monsterLabelPanel.add(new JLabel(new ImageIcon(titleIcon))); //Create Title area with our icon on either side of our wrap-able title object.\r\n        monsterLabelPanel.add(Box.createRigidArea(new Dimension(5, 0)));\r\n        monsterLabelPanel.add(monsterTextPane);\r\n        monsterLabelPanel.add(Box.createRigidArea(new Dimension(5, 0)));\r\n        monsterLabelPanel.add(new JLabel(new ImageIcon(titleIcon)));\r\n\r\n        dataPanel \u003d new JPanel();\r\n        dataPanel.setLayout(new BoxLayout(dataPanel, BoxLayout.Y_AXIS));\r\n\r\n        buttonPanel \u003d new JPanel(new WrapLayout(FlowLayout.CENTER));\r\n        JScrollPane buttonPane \u003d new JScrollPane(buttonPanel);\r\n        buttonPane.setPreferredSize(new Dimension(100, 100));\r\n\r\n        //Building the max hit title panel\r\n        maxHitTitlePanel \u003d new JPanel();\r\n        buildTitlePanel(maxHitTitlePanel, \"Max Hit\", new ImageIcon(monsterStatsOverlay.maxHitIcon));\r\n\r\n        //Building the max hit list panel\r\n        maxHitListPanel \u003d new JPanel();\r\n        JScrollPane maxHitScrollPane \u003d buildListPanel(maxHitListPanel);\r\n\r\n\r\n        //build attack style title panel\r\n        attackStyleTitlePanel \u003d new JPanel();\r\n        buildTitlePanel(attackStyleTitlePanel, \"Attack Style\", new ImageIcon(monsterStatsOverlay.attackStyleIcon));\r\n\r\n        //build attack style list panel\r\n        attackStyleListPanel \u003d new JPanel();\r\n        JScrollPane attackStyleScrollPane \u003d buildListPanel(attackStyleListPanel);\r\n\r\n        //Adding everything to main center panel\r\n        centerPanel.add(resultsScrollPane);\r\n        centerPanel.add(Box.createRigidArea(new Dimension(0, 10))); //Spacer\r\n        centerPanel.add(monsterLabelPanel);\r\n        centerPanel.add(Box.createRigidArea(new Dimension(0, 10)));\r\n        centerPanel.add(buttonPane);\r\n        centerPanel.add(Box.createRigidArea(new Dimension(0, 10)));\r\n        centerPanel.add(new JScrollPane(dataPanel));\r\n        centerPanel.add(Box.createRigidArea(new Dimension(0, 10)));\r\n        centerPanel.add(maxHitTitlePanel);\r\n        centerPanel.add(Box.createRigidArea(new Dimension(0, 10)));\r\n        centerPanel.add(maxHitScrollPane);\r\n        centerPanel.add(Box.createRigidArea(new Dimension(0, 10)));\r\n        centerPanel.add(attackStyleTitlePanel);\r\n        centerPanel.add(Box.createRigidArea(new Dimension(0, 10)));\r\n        centerPanel.add(attackStyleScrollPane);\r\n\r\n        add(centerPanel, BorderLayout.CENTER);\r\n\r\n    }\r\n\r\n    public void search(String searchString, boolean selectFirstMatch, String altForm)\r\n    {\r\n        List\u003cNPCStats\u003e results \u003d NPCDataLoader.getAllNPCStats().entrySet().stream()\r\n                .filter(entry -\u003e entry.getKey().toLowerCase().contains(searchString.toLowerCase()))\r\n                .sorted((a, b) -\u003e {\r\n                    if (a.getKey().equalsIgnoreCase(searchString)) return -1;\r\n                    if (b.getKey().equalsIgnoreCase(searchString)) return 1;\r\n                    return a.getKey().compareToIgnoreCase(b.getKey());\r\n                })\r\n                .map(Map.Entry::getValue)\r\n                .collect(Collectors.toList());\r\n\r\n        resultsPanel.removeAll();\r\n\r\n        for (NPCStats npcStats : results)\r\n        {\r\n            JButton resultButton \u003d new JButton(npcStats.getSearchName());\r\n            resultButton.setAlignmentX(Component.LEFT_ALIGNMENT);\r\n            resultButton.setHorizontalTextPosition(0);\r\n            resultButton.setMaximumSize(new Dimension(220, resultButton.getMinimumSize().height)); //Set button to take up width of search results panel\r\n            resultButton.addActionListener(e -\u003e displayStats(npcStats, \"\"));\r\n            resultsPanel.add(resultButton);\r\n        }\r\n\r\n        if (selectFirstMatch \u0026\u0026 !results.isEmpty())\r\n        {\r\n            displayStats(results.get(0), altForm);\r\n        }\r\n\r\n        revalidate();\r\n        repaint();\r\n    }\r\n\r\n    private void displayStats(NPCStats npcStats, String altForm)\r\n    {\r\n        dataPanel.removeAll();\r\n        buttonPanel.removeAll();\r\n\r\n        JButton firstButton \u003d null;\r\n        NPCStats defaultStats \u003d null;\r\n        NPCStats selectedStats \u003d null;\r\n\r\n        if (npcStats.getAltForms() !\u003d null \u0026\u0026 !npcStats.getAltForms().isEmpty()) { //if there is multiple forms to display for a npc\r\n            for (String k : npcStats.getAltForms().keySet()) {\r\n                String parsedKey \u003d k.replace(\"_\", \" \");\r\n                JButton formButton \u003d new JButton(parsedKey);\r\n                if (firstButton \u003d\u003d null) {\r\n                    firstButton \u003d formButton;\r\n                    defaultStats \u003d npcStats.getAltForms().get(k);\r\n                }\r\n                formButton.addActionListener(new ActionListener() {\r\n                    @Override\r\n                    public void actionPerformed(ActionEvent e) {\r\n                        displayStats(npcStats, k);\r\n                    }\r\n                });\r\n                buttonPanel.add(formButton);\r\n                if (k.equals(altForm)) {\r\n                    formButton.setEnabled(false); //show which button is selected\r\n                }\r\n            }\r\n            if (altForm.isEmpty()) { //if altforms exist, but we don\u0027t have one selected, we enable the defaultButton\r\n                firstButton.setEnabled(false);\r\n            }\r\n        } else {\r\n            JButton noForms \u003d new JButton(\"No Alternate Forms\");\r\n            noForms.setEnabled(false);\r\n            buttonPanel.add(noForms);\r\n        }\r\n        if (!altForm.isEmpty()) { //if we are selecting an alt form, get that alt form to display\r\n            selectedStats \u003d npcStats.getAltForms().get(altForm);\r\n        } else if (!npcStats.getAltForms().isEmpty()) { //if there is alt forms, but we aren\u0027t selecting one, show default one\r\n            selectedStats \u003d defaultStats;\r\n        } else {\r\n            selectedStats \u003d npcStats; //if we have no alt forms\r\n        }\r\n\r\n        // Create the stats panel section by section\r\n        JPanel statsPanel \u003d new JPanel();\r\n        statsPanel.setLayout(new BoxLayout(statsPanel, BoxLayout.Y_AXIS));\r\n        statsPanel.setBorder(new EmptyBorder(5,5,5,5));\r\n        statsPanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\r\n        addSectionSubTitle(statsPanel, \"Melee Defence\");\r\n        addVerticalSpacing(statsPanel);\r\n        assert selectedStats !\u003d null;\r\n        addIconsAndValues(statsPanel, new BufferedImage[]{monsterStatsOverlay.stabIcon, monsterStatsOverlay.crushIcon, monsterStatsOverlay.slashIcon},\r\n                new String[]{selectedStats.getStabDefence(), selectedStats.getCrushDefence(), selectedStats.getSlashDefence()});\r\n\r\n        addVerticalSpacing(statsPanel);\r\n\r\n        addSectionSubTitle(statsPanel, \"Magic Defence\");\r\n        addVerticalSpacing(statsPanel);\r\n\r\n        BufferedImage elementalWeakness;\r\n        elementalWeakness \u003d monsterStatsOverlay.getElementalWeaknessIcon(selectedStats.getElementalWeakness());\r\n\r\n        addIconsAndValues(statsPanel, new BufferedImage[]{monsterStatsOverlay.magicIcon, elementalWeakness},\r\n                new String[]{selectedStats.getMagicDefence(), selectedStats.getElementalPercent() + \"%\"});\r\n\r\n        addVerticalSpacing(statsPanel);\r\n\r\n        addSectionSubTitle(statsPanel, \"Ranged Defence\");\r\n        addVerticalSpacing(statsPanel);\r\n        addIconsAndValues(statsPanel, new BufferedImage[]{monsterStatsOverlay.standardIcon, monsterStatsOverlay.heavyIcon, monsterStatsOverlay.lightIcon},\r\n                new String[]{selectedStats.getStandardDefence(), selectedStats.getHeavyDefence(), selectedStats.getLightDefence()});\r\n\r\n        addVerticalSpacing(statsPanel);\r\n\r\n        addSectionSubTitle(statsPanel, \"Flat Armour\");\r\n        addVerticalSpacing(statsPanel);\r\n        addIconsAndValues(statsPanel, new BufferedImage[]{monsterStatsOverlay.flatArmourIcon}, new String[]{selectedStats.getFlatArmour()});\r\n\r\n        dataPanel.add(statsPanel);\r\n        monsterTextPane.setText(selectedStats.getSearchName());\r\n\r\n        maxHitListPanel.removeAll();\r\n        addListItems(maxHitListPanel,selectedStats.getMaxHits());\r\n\r\n        attackStyleListPanel.removeAll();\r\n        addListItems(attackStyleListPanel,selectedStats.getAttackStyles());\r\n\r\n        revalidate();\r\n        repaint();\r\n    }\r\n\r\n    private void addListItems(JPanel listSection, List\u003cString\u003e listItems) //populate a JPanel with list items\r\n    {\r\n        for (String item : listItems)\r\n        {\r\n            JLabel itemLabel \u003d new JLabel(item);\r\n            itemLabel.setFont(new Font(\"Arial\", Font.PLAIN, 16));\r\n            itemLabel.setBorder(new EmptyBorder(2, 5, 2, 5));\r\n            itemLabel.setHorizontalAlignment(SwingConstants.CENTER); // Align text inside label\r\n            itemLabel.setAlignmentX(Component.CENTER_ALIGNMENT);\r\n            listSection.add(itemLabel);\r\n        }\r\n    }\r\n\r\n    private void buildTitlePanel(JPanel panel, String title, ImageIcon icon) //adds individual title sections for other stats\r\n    {\r\n        panel.setLayout(new BoxLayout(panel, BoxLayout.X_AXIS));\r\n        panel.setBorder(new EmptyBorder(5,5,5,5));\r\n        panel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\r\n        panel.setAlignmentX(Component.CENTER_ALIGNMENT);\r\n        panel.setPreferredSize(new Dimension(400,50));\r\n\r\n        JLabel titleLabel \u003d new JLabel(title);\r\n        titleLabel.setFont(new Font(\"Arial\", Font.BOLD, 20));\r\n        panel.add(new JLabel(icon));\r\n        panel.add(Box.createRigidArea(new Dimension(5, 0)));\r\n        panel.add(titleLabel);\r\n        panel.add(Box.createRigidArea(new Dimension(5, 0)));\r\n        panel.add(new JLabel(icon));\r\n    }\r\n\r\n    private JScrollPane buildListPanel(JPanel panel)\r\n    {\r\n        panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));\r\n        panel.setMaximumSize(new Dimension(Integer.MAX_VALUE, Integer.MAX_VALUE));\r\n        panel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\r\n\r\n        JScrollPane listScrollPane \u003d new JScrollPane(panel);\r\n        listScrollPane.setPreferredSize(new Dimension(300, 100)); // Shows about 2 entries\r\n        listScrollPane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);\r\n        listScrollPane.setBorder(null);\r\n        return listScrollPane;\r\n    }\r\n\r\n    private void addVerticalSpacing(JPanel panel)\r\n    {\r\n        panel.add(Box.createRigidArea(new Dimension(0, 20)));\r\n    }\r\n\r\n    private void addIconsAndValues(JPanel panel, BufferedImage[] icons, String[] values) //Adds stat values with corresponding stat icons\r\n    {\r\n        JPanel iconsAndValuesPanel \u003d new JPanel();\r\n        iconsAndValuesPanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\r\n        iconsAndValuesPanel.setLayout(new GridLayout(2, icons.length, 10, 5)); // 2 rows, n columns, with horizontal and vertical gaps\r\n\r\n        for (BufferedImage icon : icons) {\r\n            JLabel iconLabel \u003d new JLabel(new ImageIcon(icon));\r\n            iconLabel.setHorizontalAlignment(SwingConstants.CENTER);\r\n            iconsAndValuesPanel.add(iconLabel);\r\n        }\r\n\r\n        for (String value : values) {\r\n            JLabel valueLabel \u003d new JLabel(value);\r\n            valueLabel.setHorizontalAlignment(SwingConstants.CENTER);\r\n            iconsAndValuesPanel.add(valueLabel);\r\n        }\r\n\r\n        panel.add(iconsAndValuesPanel);\r\n    }\r\n\r\n    private void addSectionSubTitle(JPanel panel, String text) //adds sub titles to the stats section\r\n    {\r\n        JLabel titleLabel \u003d new JLabel(text);\r\n        titleLabel.setFont(new Font(\"Arial\", Font.BOLD, 14));\r\n        titleLabel.setAlignmentX(Component.CENTER_ALIGNMENT);\r\n        panel.add(titleLabel);\r\n    }\r\n}\r\n","filePath":"src\\main\\java\\com\\monsterstats\\MonsterStatsPanel.java"},{"fileName":"MonsterStatsPlugin.java","content":"package com.monsterstats;\n\nimport javax.inject.Inject;\nimport javax.swing.*;\n\nimport com.google.inject.Provides;\nimport net.runelite.api.*;\nimport net.runelite.api.events.MenuOptionClicked;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.api.events.MenuEntryAdded;\nimport net.runelite.client.util.ImageUtil;\n\n@PluginDescriptor(\n\t\tname \u003d \"Monster Stats\",\n\t\tdescription \u003d \"Shows monster stats and other info with search functionality\",\n\t\ttags \u003d {\"npc\", \"stats\", \"tooltip\", \"search\", \"defensive\", \"defence\", \"weakness\", \"elemental\", \"weaknesses\", \"bestiary\", \"monsters\", \"wiki\"}\n)\npublic class MonsterStatsPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate MonsterStatsOverlay monsterStatsOverlay;\n\n\t@Inject\n\tprivate MonsterStatsConfig config;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate ClientToolbar clientToolbar;\n\n\tNPC hoveredNPC \u003d null;\n\n\tprivate NavigationButton navButton;\n\tprivate MonsterStatsPanel monsterStatsPanel;\n\tprivate static final String STATS_OPTION \u003d \"Stats\";\n\n\t@Provides\n\t MonsterStatsConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(MonsterStatsConfig.class);\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\toverlayManager.add(monsterStatsOverlay);\n\n\t\tif (config.enableSidePanel()) {\n\t\t\taddNavBar();\n\t\t}\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(monsterStatsOverlay);\n\t\tclientToolbar.removeNavigation(navButton);\n\t\tmonsterStatsPanel \u003d null;\n\t}\n\n\tpublic void addNavBar() {\n\t\tmonsterStatsPanel \u003d new MonsterStatsPanel(monsterStatsOverlay, ImageUtil.loadImageResource(getClass(),\"/icon.png\"));\n\t\tnavButton \u003d NavigationButton.builder()\n\t\t\t\t.tooltip(\"Monster Stats\")\n\t\t\t\t.icon(ImageUtil.loadImageResource(getClass(),\"/icon.png\"))\n\t\t\t\t.panel(monsterStatsPanel)\n\t\t\t\t.build();\n\n\t\tclientToolbar.addNavigation(navButton);\n\t}\n\n\tpublic void removeNavBar()\n\t{\n\t\tif (navButton !\u003d null \u0026\u0026 monsterStatsPanel !\u003d null) {\n\t\t\tclientToolbar.removeNavigation(navButton);\n\t\t\tnavButton \u003d null;\n\t\t\tmonsterStatsPanel \u003d null;\n\t\t}\n\t}\n\n\t@Subscribe()\n\tpublic void onConfigChanged(ConfigChanged event) { //remove the nav button if the side panel gets disabled\n\t\tString configName \u003d event.getKey();\n\t\tString configGroup \u003d event.getGroup();\n\t\tif (configName.equals(\"enableSidePanel\") \u0026\u0026 configGroup.equals(\"monsterstats\")) {\n\t\t\tboolean enableSidePanel \u003d Boolean.parseBoolean(event.getNewValue());\n\t\t\tif (enableSidePanel \u0026\u0026 navButton \u003d\u003d null \u0026\u0026 monsterStatsPanel \u003d\u003d null) {\n\t\t\t\taddNavBar();\n\t\t\t} else {\n\t\t\t\tremoveNavBar();\n\t\t\t\tconfigManager.setConfiguration(\"monsterstats\", \"showStatsMenuOption\", false); //also disable the right click menu, as this relies on side panel.\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onMenuEntryAdded(MenuEntryAdded event)\n\t{\n\t\tif (config.enableSidePanel() \u0026\u0026 config.showStatsMenuOption() \u0026\u0026 event.getType() \u003d\u003d MenuAction.NPC_SECOND_OPTION.getId() \u0026\u0026 event.getTarget() !\u003d null) //Add Stats option to right clicked NPCs\n\t\t{\n\t\t\tNPCStats checkExist \u003d NPCDataLoader.getIDStats(event.getMenuEntry().getNpc().getId());\n\t\t\tif (checkExist \u003d\u003d null) { //if there is no valid entry in the database for this NPC, we will not add the Stats option.\n\t\t\t\thoveredNPC \u003d null;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tclient.createMenuEntry(client.getMenuEntries().length)\n\t\t\t\t\t.setOption(STATS_OPTION)\n\t\t\t\t\t.setTarget(event.getTarget())\n\t\t\t\t\t.setIdentifier(event.getIdentifier())\n\t\t\t\t\t.setType(MenuAction.RUNELITE)\n\t\t\t\t\t.setParam0(event.getActionParam0())\n\t\t\t\t\t.setParam1(event.getActionParam1());\n\t\t}\n\t\tif (config.shiftForTooltip() \u0026\u0026 !client.isKeyPressed(KeyCode.KC_SHIFT)) //don\u0027t add tooltip if shift for tooltip is on\n\t\t{\n\t\t\thoveredNPC \u003d null;\n\t\t\treturn;\n\t\t}\n\t\tif (config.showHoverTooltip()) //if hovering, tooltips are on, and shift for tooltip isn\u0027t on then show tooltip.\n\t\t{\n\t\t\tNPC currentNPC \u003d event.getMenuEntry().getNpc(); //check if there is a valid NPC in this MenuEntry\n\t\t\tif (currentNPC \u003d\u003d null)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tNPCStats checkExist \u003d NPCDataLoader.getIDStats(currentNPC.getId());\n\t\t\tif (checkExist \u003d\u003d null) { //if there is no valid entry in the database for this NPC, we will not add the hover tooltip.\n\t\t\t\thoveredNPC \u003d null;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tMenuEntry entry \u003d event.getMenuEntry();\n            hoveredNPC \u003d entry.getNpc();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOptionClicked(MenuOptionClicked event) {\n\t\tif (event.getMenuOption().equals(STATS_OPTION)) {\n\t\t\tclientThread.invoke(() -\u003e {\n\t\t\t\tNPC clickedNPC \u003d client.getTopLevelWorldView().npcs().byIndex(event.getId()); //get the NPC from the MenuOptionClicked event id\n\t\t\t\tif (clickedNPC !\u003d null) {\n\t\t\t\t\tNPCStats npcStats \u003d NPCDataLoader.getIDStats(clickedNPC.getId());\n\t\t\t\t\tif (npcStats.getName().contains(\"#\")) { //if the name contains a \u0027#\u0027 it has alternate forms and we will select this alt form.\n\t\t\t\t\t\tmonsterStatsPanel.search(npcStats.getSearchName(), true, npcStats.getName().split(\"#\", 2)[1]);\n\t\t\t\t\t} else { //otherwise we just select the default of that monster.\n\t\t\t\t\t\tmonsterStatsPanel.search(npcStats.getSearchName(), true, \"\");\n\t\t\t\t\t}\n\t\t\t\t\tSwingUtilities.invokeLater(() -\u003e clientToolbar.openPanel(navButton)); // Ensure the panel is opened on EDT\n\t\t\t\t}\n\t\t\t});\n\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\monsterstats\\MonsterStatsPlugin.java"},{"fileName":"NPCDataCleaner.java","content":"package com.monsterstats;\n\nimport lombok.extern.slf4j.Slf4j;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Slf4j\npublic class NPCDataCleaner {\n\n    public static String cleanData(String start) {\n        if (start \u003d\u003d null || start.trim().isEmpty()) {\n            return \"?\";\n        }\n        return getFirstValue(start.replace(\"\\\"\", \"\").trim());\n    }\n\n    public static List\u003cString\u003e parseNPCStringList(String input) {\n        List\u003cString\u003e result \u003d new ArrayList\u003c\u003e();\n        if (input \u003d\u003d null || input.isEmpty() || input.equals(\"?\")) {\n            result.add(\"No Data\");\n            return result;\n        }\n        if (input.charAt(0) \u003d\u003d\u0027\\\"\u0027) {\n            input \u003d input.split(\"\\\"\", 2)[1];\n        }\n        String[] parts \u003d input.split(\",\");\n        for (String part : parts) {\n            result.add(part.trim());\n        }\n        return result;\n    }\n\n    public static List\u003cInteger\u003e parseNPCIDs(String input) {\n        List\u003cInteger\u003e result \u003d new ArrayList\u003c\u003e();\n        if (input \u003d\u003d null || input.isEmpty() || input.equals(\"?\")) {\n            result.add(-1);\n            return result;\n        }\n        if (input.charAt(0) \u003d\u003d\u0027\\\"\u0027) {\n            input \u003d input.split(\"\\\"\", 2)[1];\n        }\n        // Split the input string by commas\n        String[] parts \u003d input.split(\",\");\n\n        // Parse each part into an integer and add to the result list\n        for (String part : parts) {\n            try {\n                result.add(Integer.parseInt(part.trim()));\n            } catch (NumberFormatException e) {\n                // Handle the case where part is not a valid integer\n                log.debug(\"Invalid number format in NPC IDs: \" + part, e);\n                List\u003cInteger\u003e invalidResult \u003d new ArrayList\u003c\u003e();\n                invalidResult.add(-1);\n                return invalidResult;\n            }\n        }\n        return result;\n    }\n\n    public static String cleanElementalWeakness(String start) {\n        if (start \u003d\u003d null || start.trim().isEmpty()) {\n            return \"None\";\n        }\n        return getFirstValue(start.replace(\"\\\"\", \"\").trim());\n    }\n\n    public static String cleanElementalWeaknessPercent(String start) {\n        if (start \u003d\u003d null || start.trim().isEmpty()) {\n            return \"0\";\n        }\n\n        String cleanedValue \u003d getFirstValue(start.replace(\"\\\"\", \"\").trim());\n\n        try {\n            // Try to parse the cleaned value to an integer\n            Integer.parseInt(cleanedValue);\n        } catch (NumberFormatException e) {\n            // If parsing fails, set the value to 0\n            cleanedValue \u003d \"0\";\n        }\n\n        return cleanedValue;\n    }\n\n    private static String getFirstValue(String input) {\n        if (input.contains(\",\")) {\n            return input.split(\",\")[0].trim();\n        }\n        return input;\n    }\n}\n\n","filePath":"src\\main\\java\\com\\monsterstats\\NPCDataCleaner.java"},{"fileName":"NPCDataLoader.java","content":"package com.monsterstats;\n\nimport lombok.extern.slf4j.Slf4j;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\n@Slf4j\npublic class NPCDataLoader {\n\n    private static final String CSV_FILE \u003d \"/monsterdata.csv\";\n    private static final Map\u003cString, NPCStats\u003e npcData \u003d new HashMap\u003c\u003e();\n    private static final Map\u003cInteger, NPCStats\u003e npcIDData \u003d new HashMap\u003c\u003e();\n    private static final Integer numFields \u003d 14; //amount of fields we are loading in for ease of future changes\n\n    static {\n        try (InputStream inputStream \u003d NPCDataLoader.class.getResourceAsStream(CSV_FILE)) {\n            if (inputStream \u003d\u003d null) {\n                log.warn(\"Could not find file: {}\", CSV_FILE);\n            } else {\n                try (BufferedReader reader \u003d new BufferedReader(new InputStreamReader(inputStream))) {\n                    String line;\n                    while ((line \u003d reader.readLine()) !\u003d null) {\n                        String[] fields \u003d parseCSVLine(line);\n                        boolean hasAltForms \u003d false;\n                        if (fields.length \u003c numFields) {\n                            // Fill missing fields with \u0027?\u0027\n                            fields \u003d fillMissingFields(fields);\n                        }\n                        String name \u003d NPCDataCleaner.cleanData(fields[0]);\n                        String realName \u003d name;\n                        if (name.contains(\"#\")) {\n                            hasAltForms \u003d true;\n                            name \u003d name.split(\"#\", 2)[0];\n                        }\n                        // Exclude any names containing \"(Deadman: Apocalypse)\"\n                        if (name.toLowerCase().contains(\"(deadman: apocalypse)\")) {\n                            continue;\n                        }\n\n                        List\u003cInteger\u003e npcIDs \u003d NPCDataCleaner.parseNPCIDs(fields[10]);\n                        if (npcIDs.get(0) \u003d\u003d -1) { //if we don\u0027t have an npc id, we skip entry\n                            continue;\n                        }\n                        String elementalWeakness \u003d NPCDataCleaner.cleanElementalWeakness(fields[1]);\n                        String elementalPercent \u003d NPCDataCleaner.cleanElementalWeaknessPercent(fields[2].toLowerCase());\n                        String magicDefence \u003d NPCDataCleaner.cleanData(fields[3]);\n                        String crushDefence \u003d NPCDataCleaner.cleanData(fields[4]);\n                        String stabDefence \u003d NPCDataCleaner.cleanData(fields[5]);\n                        String slashDefence \u003d NPCDataCleaner.cleanData(fields[6]);\n                        String standardDefence \u003d NPCDataCleaner.cleanData(fields[7]);\n                        String heavyDefence \u003d NPCDataCleaner.cleanData(fields[8]);\n                        String lightDefence \u003d NPCDataCleaner.cleanData(fields[9]);\n\n                        List\u003cString\u003e maxHits \u003d NPCDataCleaner.parseNPCStringList(fields[11]);\n                        List\u003cString\u003e attackStyle \u003d NPCDataCleaner.parseNPCStringList(fields[12]);\n\n                        String flatArmour \u003d NPCDataCleaner.cleanData(fields[13]);\n\n\n                        if (!npcIDs.isEmpty()) {\n                            for (Integer id : npcIDs) { //create a new NPC object for each npc id with their realName, then we use the prefix of realName to find the main object in our other Map\n                                NPCStats npcStats \u003d new NPCStats(realName, name, elementalWeakness, elementalPercent, crushDefence, stabDefence, slashDefence, standardDefence, heavyDefence, lightDefence, magicDefence, id, hasAltForms, maxHits, attackStyle, flatArmour);\n                                npcIDData.put(id, npcStats); //add to the map the id to this npcStats object. We add the full data because for mouseover tooltips we can use the data here and not search the other map.\n                            }\n                        }\n                        NPCStats npcStats \u003d new NPCStats(realName, name, elementalWeakness, elementalPercent, crushDefence, stabDefence, slashDefence, standardDefence, heavyDefence, lightDefence, magicDefence, npcIDs.get(0), hasAltForms, maxHits, attackStyle, flatArmour);\n                        if (hasAltForms \u0026\u0026 npcData.containsKey(name)) { //if this monster has alternate forms with different stats and the data entry already exists\n                            npcData.get(name).addForm(npcStats); //we then add this data to the base entry in alternate forms\n                        } else {\n                            npcData.put(name, npcStats);\n                        }\n\n                    }\n                }\n            }\n        } catch (IOException e) {\n            log.warn(\"Failed to read monster data\", e);\n        }\n    }\n\n    private static String[] fillMissingFields(String[] fields) {\n        String[] result \u003d new String[numFields];\n        for (int i \u003d 0; i \u003c 13; i++) {\n            if (i \u003c fields.length) {\n                result[i] \u003d fields[i];\n            } else {\n                result[i] \u003d \"?\";\n            }\n        }\n        return result;\n    }\n\n    private static String[] parseCSVLine(String line) {\n        StringBuilder sb \u003d new StringBuilder();\n        boolean inQuotes \u003d false;\n        boolean startCollectChar \u003d false;\n        char[] chars \u003d line.toCharArray();\n        for (char ch : chars) {\n            if (inQuotes) {\n                startCollectChar \u003d true;\n                if (ch \u003d\u003d \u0027\\\"\u0027) {\n                    inQuotes \u003d false;\n                } else {\n                    sb.append(ch);\n                }\n            } else {\n                if (ch \u003d\u003d \u0027\\\"\u0027) {\n                    inQuotes \u003d true;\n                    if (startCollectChar) {\n                        sb.append(\u0027\\\"\u0027);\n                    }\n                } else if (ch \u003d\u003d \u0027,\u0027) {\n                    sb.append(\u0027|\u0027); // Use a different delimiter to split later\n                } else {\n                    sb.append(ch);\n                }\n            }\n        }\n        return sb.toString().split(\"\\\\|\");\n    }\n\n    public static Map\u003cString, NPCStats\u003e getAllNPCStats()\n    {\n        return npcData;\n    }\n\n    public static NPCStats getNPCStats(String npcName)\n    {\n        return npcData.get(npcName);\n    }\n\n    public static NPCStats getIDStats(Integer npcID) {\n        return npcIDData.get(npcID);\n    }\n}\n","filePath":"src\\main\\java\\com\\monsterstats\\NPCDataLoader.java"},{"fileName":"NPCStats.java","content":"package com.monsterstats;\n\nimport lombok.Getter;\n\nimport java.util.List;\nimport java.util.Map;\nimport java.util.HashMap;\n\n@Getter\npublic class NPCStats {\n    private final String name;\n    private final String searchName;\n    private final String elementalWeakness;\n    private final String elementalPercent;\n    private final String crushDefence;\n    private final String stabDefence;\n    private final String slashDefence;\n    private final String standardDefence;\n    private final String magicDefence;\n    private final String heavyDefence;\n    private final String lightDefence;\n    private final List\u003cString\u003e maxHits;\n    private final List\u003cString\u003e attackStyles;\n    private final Integer npcID;\n    private final Map\u003cString, NPCStats\u003e altForms \u003d new HashMap\u003c\u003e();\n    private final String flatArmour;\n\n    public NPCStats(String name, String searchName, String elementalWeakness, String elementalPercent, String crushDefence, String stabDefence, String slashDefence, String standardDefence, String heavyDefence, String lightDefence, String magicDefence, Integer npcID, boolean alt, List\u003cString\u003e maxHits, List\u003cString\u003e attackStyles, String flatArmour) {\n        this.name \u003d name;\n        this.searchName \u003d searchName;\n        this.elementalWeakness \u003d elementalWeakness;\n        this.elementalPercent \u003d elementalPercent;\n        this.crushDefence \u003d crushDefence;\n        this.stabDefence \u003d stabDefence;\n        this.slashDefence \u003d slashDefence;\n        this.standardDefence \u003d standardDefence;\n        this.magicDefence \u003d magicDefence;\n        this.heavyDefence \u003d heavyDefence;\n        this.lightDefence \u003d lightDefence;\n        this.npcID \u003d npcID;\n        if (alt) {\n            String altName \u003d name.split(\"#\", 2)[1];\n            altForms.put(altName,this);\n        }\n        this.maxHits \u003d maxHits;\n        this.attackStyles \u003d attackStyles;\n        this.flatArmour \u003d flatArmour;\n    }\n\n    public void addForm(NPCStats altForm) {\n        String altName \u003d altForm.getName().split(\"#\",2)[1];\n        altForms.put(altName, altForm);\n    }\n\n}\n","filePath":"src\\main\\java\\com\\monsterstats\\NPCStats.java"},{"fileName":"WrapLayout.java","content":"//MIT License\n\n//Copyright (c) 2023 Rob Camick\n\n//Permission is hereby granted, free of charge, to any person obtaining a copy\n//of this software and associated documentation files (the \"Software\"), to deal\n//in the Software without restriction, including without limitation the rights\n//to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n//copies of the Software, and to permit persons to whom the Software is\n//furnished to do so, subject to the following conditions:\n\n//The above copyright notice and this permission notice shall be included in all\n//copies or substantial portions of the Software.\n\n//THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n//IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n//FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n//AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n//LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n//OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n//SOFTWARE.\npackage com.monsterstats;\n\nimport java.awt.*;\n\npublic class WrapLayout extends FlowLayout {\n    public WrapLayout() {\n        super(FlowLayout.CENTER);\n    }\n\n    public WrapLayout(int align) {\n        super(align);\n    }\n\n    public WrapLayout(int align, int hgap, int vgap) {\n        super(align, hgap, vgap);\n    }\n\n    @Override\n    public Dimension preferredLayoutSize(Container target) {\n        return layoutSize(target, true);\n    }\n\n    @Override\n    public Dimension minimumLayoutSize(Container target) {\n        return layoutSize(target, false);\n    }\n\n    private Dimension layoutSize(Container target, boolean preferred) {\n        synchronized (target.getTreeLock()) {\n            int targetWidth \u003d target.getSize().width;\n\n            if (targetWidth \u003d\u003d 0) {\n                targetWidth \u003d Integer.MAX_VALUE;\n            }\n\n            int hgap \u003d getHgap();\n            int vgap \u003d getVgap();\n            Insets insets \u003d target.getInsets();\n            int horizontalInsetsAndGap \u003d insets.left + insets.right + (hgap * 2);\n            int maxWidth \u003d targetWidth - horizontalInsetsAndGap;\n\n            Dimension dim \u003d new Dimension(0, 0);\n            int rowWidth \u003d 0;\n            int rowHeight \u003d 0;\n\n            int nmembers \u003d target.getComponentCount();\n\n            for (int i \u003d 0; i \u003c nmembers; i++) {\n                Component m \u003d target.getComponent(i);\n\n                if (m.isVisible()) {\n                    Dimension d \u003d preferred ? m.getPreferredSize() : m.getMinimumSize();\n\n                    if (rowWidth + d.width \u003e maxWidth) {\n                        addRow(dim, rowWidth, rowHeight);\n                        rowWidth \u003d 0;\n                        rowHeight \u003d 0;\n                    }\n\n                    if (rowWidth !\u003d 0) {\n                        rowWidth +\u003d hgap;\n                    }\n\n                    rowWidth +\u003d d.width;\n                    rowHeight \u003d Math.max(rowHeight, d.height);\n                }\n            }\n\n            addRow(dim, rowWidth, rowHeight);\n\n            dim.width +\u003d horizontalInsetsAndGap;\n            dim.height +\u003d insets.top + insets.bottom + vgap * 2;\n\n            return dim;\n        }\n    }\n\n    private void addRow(Dimension dim, int rowWidth, int rowHeight) {\n        dim.width \u003d Math.max(dim.width, rowWidth);\n        if (dim.height \u003e 0) {\n            dim.height +\u003d getVgap();\n        }\n        dim.height +\u003d rowHeight;\n    }\n}\n","filePath":"src\\main\\java\\com\\monsterstats\\WrapLayout.java"},{"fileName":"MonsterStatsPluginTest.java","content":"package com.monsterstats;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class MonsterStatsPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(MonsterStatsPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\monsterstats\\MonsterStatsPluginTest.java"}]},{"commit":"2028d4f36047cc6d4490600fbd90d60c1d2d2267","repository":"https://github.com/muffyn/generic-autosplitter.git","internalName":"generic-autosplitter","files":[{"fileName":"GenericAutosplitterConfig.java","content":"package com.genericautosplitter;\n\nimport net.runelite.client.config.*;\n\n@ConfigGroup(GenericAutosplitterPlugin.AUTOSPLITTER_PLUGIN_NAME)\npublic interface GenericAutosplitterConfig extends Config\n{\n\t@ConfigItem(\n\t\t\tposition \u003d 0,\n\t\t\tkeyName \u003d \"port\",\n\t\t\tname \u003d \"Port\",\n\t\t\tdescription \u003d \"Port for the LiveSplit server. (Restart required)\"\n\t)\n\tdefault int port() {\n\t\treturn 16834;\n\t}\n\n    @ConfigItem(\n            position \u003d 1,\n            keyName \u003d \"startHotKey\",\n            name \u003d \"Start Hotkey\",\n            description \u003d \"Hotkey for sending a start to the LiveSplit server\\nIt is recommended to unset this hotkey within LiveSplit\"\n    )\n    default Keybind startHotKey() {\n        return Keybind.NOT_SET;\n    }\n\n    @ConfigItem(\n            position \u003d 2,\n            keyName \u003d \"resetHotKey\",\n            name \u003d \"Reset Hotkey\",\n            description \u003d \"Hotkey for sending a reset to the LiveSplit server\\nIt is recommended to unset this hotkey within LiveSplit\"\n    )\n    default Keybind resetHotKey() {\n        return Keybind.NOT_SET;\n    }\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Customization Instructions\",\n\t\t\tdescription \u003d \"Instructions\",\n\t\t\tposition \u003d 3\n\t)\n\tString instructionsSection \u003d \"instructionsSect\";\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"instructions\",\n\t\t\tname \u003d \"Instructions\",\n\t\t\tdescription \u003d \"Instructions\",\n\t\t\tposition \u003d 3,\n\t\t\tsection \u003d \"instructionsSect\"\n\t)\n\tdefault String instructions()\n\t{\n\t\treturn \"Better instructions are in the readme (right click plugin -\u003e support)\\n\" +\n\t\t\t\t\"Open LiveSplit. Right click it and start TCP Server. Open the RuneLite sidebar and press connect. \" +\n\t\t\t\t\"To add automatic splits, first make sure you have splits showing on LiveSplit. \" +\n\t\t\t\t\"Get the Watchdog plugin from the plugin hub. Create any trigger you want, \" +\n\t\t\t\t\"and give it a PluginMessage trigger with the namespace \\\"Autosplitter\\\" and name \\\"split\\\"\";\n\n\t}\n\n}\n","filePath":"src\\main\\java\\com\\genericautosplitter\\GenericAutosplitterConfig.java"},{"fileName":"GenericAutosplitterPanel.java","content":"package com.genericautosplitter;\n\nimport net.runelite.api.Client;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.PluginPanel;\n\nimport javax.inject.Inject;\nimport javax.swing.*;\nimport javax.swing.border.LineBorder;\nimport java.awt.*;\n\npublic class GenericAutosplitterPanel extends PluginPanel\n{\n    private final Client client;\n    private final GenericAutosplitterConfig config;\n    private final GenericAutosplitterPlugin splitter;\n    private final LivesplitController livesplitController;\n    private JLabel status;\n    private JLabel l_time;\n    private JTextField tf_time;\n    private JPanel tickFrame;\n    private JButton b_toggleoffset;\n    private JButton b_startreset;\n    private JPanel offsetFrame;\n    private JPanel controlFrame;\n\n    @Inject\n    GenericAutosplitterPanel(Client client, GenericAutosplitterConfig config, GenericAutosplitterPlugin splitter, LivesplitController livesplitController) {\n        this.client \u003d client;\n        this.config \u003d config;\n        this.splitter \u003d splitter;\n        this.livesplitController \u003d livesplitController;\n    }\n\n    public void startPanel() {\n        getParent().setLayout(new BorderLayout());\n        getParent().add(this, BorderLayout.CENTER);\n\n        setLayout(new BorderLayout());\n        setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n        setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n        final JPanel layout \u003d new JPanel();\n        BoxLayout boxLayout \u003d new BoxLayout(layout, BoxLayout.Y_AXIS);\n        layout.setLayout(boxLayout);\n        add(layout, BorderLayout.NORTH);\n\n        // status\n        JPanel statusFrame \u003d new JPanel();\n        statusFrame.setLayout(new GridBagLayout());\n        statusFrame.setBorder(BorderFactory.createTitledBorder(new LineBorder(Color.CYAN), \"Status\"));\n\n        status \u003d new JLabel(\"Not connected\");\n        status.setForeground(Color.RED);\n        statusFrame.add(status);\n\n        // connect buttons\n        JPanel connectionFrame \u003d new JPanel();\n        connectionFrame.setLayout(new GridLayout(2, 1));\n        connectionFrame.setBorder(BorderFactory.createTitledBorder(new LineBorder(Color.CYAN), \"Connection\"));\n\n        JButton b_connect \u003d new JButton(\"Connect\");\n        JButton b_disconnect \u003d new JButton(\"Disconnect\");\n        b_connect.setFocusable(false);\n        b_disconnect.setFocusable(false);\n\n        b_connect.addActionListener(e -\u003e splitter.connect());\n        b_disconnect.addActionListener(e -\u003e splitter.disconnect());\n\n        connectionFrame.add(b_connect);\n        connectionFrame.add(b_disconnect);\n\n        // control buttons\n        controlFrame \u003d new JPanel();\n        controlFrame.setLayout(new GridLayout(5, 1));\n        controlFrame.setBorder(BorderFactory.createTitledBorder(new LineBorder(Color.ORANGE), \"Controller\"));\n\n        b_startreset \u003d new JButton(\"Start run\");\n        b_startreset.addActionListener(e -\u003e startOrReset());\n        JButton b_split \u003d new JButton(\"Split\");\n        b_split.addActionListener(e -\u003e splitter.split());\n        JButton b_undo \u003d new JButton(\"Undo split\");\n        b_undo.addActionListener(e -\u003e splitter.undo());\n        JButton b_skip \u003d new JButton(\"Skip split\");\n        b_skip.addActionListener(e -\u003e splitter.skip());\n        JButton b_endrun \u003d new JButton(\"Complete all remaining splits\");\n        b_endrun.addActionListener(e -\u003e splitter.endRun());\n\n        b_startreset.setFocusable(false);\n        controlFrame.add(b_startreset, BorderLayout.CENTER);\n        b_split.setFocusable(false);\n        controlFrame.add(b_split, BorderLayout.CENTER);\n        b_undo.setFocusable(false);\n        controlFrame.add(b_undo, BorderLayout.CENTER);\n        b_skip.setFocusable(false);\n        controlFrame.add(b_skip, BorderLayout.CENTER);\n        b_endrun.setFocusable(false);\n        controlFrame.add(b_endrun, BorderLayout.CENTER);\n\n        // offset\n        offsetFrame \u003d new JPanel();\n        offsetFrame.setLayout(new GridLayout(4, 1));\n        offsetFrame.setBorder(BorderFactory.createTitledBorder(new LineBorder(Color.LIGHT_GRAY), \"Offset\"));\n\n        l_time \u003d new JLabel();\n        offsetFrame.add(l_time, BorderLayout.WEST);\n\n        tickFrame \u003d new JPanel();\n        tickFrame.setLayout(new GridLayout(1, 2));\n        JLabel l_tick \u003d new JLabel(\"Ticks:\");\n        tickFrame.add(l_tick);\n        tf_time \u003d new JTextField();\n        tf_time.addActionListener(e -\u003e updateTextField());\n        tickFrame.add(tf_time);\n        offsetFrame.add(tickFrame);\n        tickFrame.setVisible(false);\n\n        b_toggleoffset \u003d new JButton(\"\");\n        b_toggleoffset.addActionListener(e -\u003e splitter.toggleOffset());\n        b_toggleoffset.setFocusable(false);\n        offsetFrame.add(b_toggleoffset);\n\n        JButton b_gametime \u003d new JButton(\"Set offset to Time Played\");\n        b_gametime.addActionListener(e -\u003e setOffsetToTimePlayed());\n        b_gametime.setFocusable(false);\n        offsetFrame.add(b_gametime);\n\n        // build panel\n\n        layout.add(statusFrame);\n        layout.add(Box.createRigidArea(new Dimension(0, 15)));\n        layout.add(connectionFrame);\n        layout.add(Box.createRigidArea(new Dimension(0, 15)));\n        layout.add(controlFrame);\n        layout.add(Box.createRigidArea(new Dimension(0, 15)));\n        layout.add(offsetFrame);\n\n        offsetFrame.setVisible(false);\n        controlFrame.setVisible(false);\n    }\n\n    protected void setConnected() {\n        status.setText(\"Connected\");\n        status.setForeground(Color.GREEN);\n        offsetFrame.setVisible(true);\n        controlFrame.setVisible(true);\n    }\n\n    protected void setDisconnected() {\n        status.setText(\"Not connected\");\n        status.setForeground(Color.RED);\n        resetRun();\n        offsetFrame.setVisible(false);\n        controlFrame.setVisible(false);\n    }\n\n    protected void updateTextField() {\n        try {\n            int ticks \u003d Integer.parseInt(tf_time.getText());\n            setTime(ticks);\n            splitter.offset \u003d ticks;\n        } catch (NumberFormatException ignored) {\n        }\n    }\n\n    protected void loadOffset(int offset) {\n        tf_time.setText(offset + \"\");\n    }\n\n    protected void setTime(int ticks) {\n        if (splitter.useOffset) {\n            int time \u003d ticks * 6;\n            String timeStr \u003d String.format(\"%02d:%02d:%02d.%01d\", (time / 10) / 3600, ((time / 10) / 60) % 60, (time / 10) % 60, time % 10);\n            l_time.setText(\"Next timer will start at \" + timeStr);\n        }\n        tf_time.setText(ticks + \"\");\n    }\n\n    protected void enableOffset() {\n        tickFrame.setVisible(true);\n        updateTextField();\n        b_toggleoffset.setText(\"Disable offset\");\n    }\n\n    protected void disableOffset() {\n        tickFrame.setVisible(false);\n        l_time.setText(\"Next timer will start at 0.0s\");\n        b_toggleoffset.setText(\"Enable offset\");\n    }\n\n    protected void startRun() {\n        b_startreset.setText(\"Reset\");\n        splitter.startRun();\n        offsetFrame.setVisible(false);\n    }\n\n    protected void resetRun() {\n        b_startreset.setText(\"Start run\");\n        splitter.reset();\n        offsetFrame.setVisible(true);\n    }\n\n    protected void startOrReset() {\n        if (!splitter.started) {\n            startRun();\n        } else {\n            resetRun();\n        }\n    }\n\n    protected void setOffsetToTimePlayed() {\n        int offset \u003d splitter.getTimePlayed() * 100;\n        splitter.useOffset \u003d true;\n        loadOffset(offset);\n        enableOffset();\n\n    }\n\n}","filePath":"src\\main\\java\\com\\genericautosplitter\\GenericAutosplitterPanel.java"},{"fileName":"GenericAutosplitterPlugin.java","content":"package com.genericautosplitter;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.*;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.PluginMessage;\nimport net.runelite.client.input.KeyManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.util.HotkeyListener;\nimport net.runelite.client.util.ImageUtil;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport java.awt.image.BufferedImage;\nimport java.math.BigDecimal;\nimport java.math.RoundingMode;\nimport java.time.Instant;\nimport java.util.Locale;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Generic Autosplitter\",\n\tdescription \u003d \"Syncs LiveSplit to your time played and sends splits on Watchdog events\"\n)\npublic class GenericAutosplitterPlugin extends Plugin\n{\n    public static final String AUTOSPLITTER_PLUGIN_NAME \u003d \"autosplitter\";\n    protected static final Logger logger \u003d LoggerFactory.getLogger(GenericAutosplitterPlugin.class);\n    public static final String DURATION_KEY \u003d \"duration\";\n\n    protected int ticks;\n\tprotected int offset;\n\tprotected boolean useOffset \u003d false;\n\n    @Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate GenericAutosplitterConfig config;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Inject\n\tprivate ClientToolbar clientToolbar;\n\n    @Inject\n    private KeyManager keymanager;\n\n\t// side panel\n\tprivate NavigationButton navButton;\n\tprivate GenericAutosplitterPanel panel;\n\tprivate LivesplitController livesplitController;\n\n\t// is the timer running?\n    boolean started \u003d false;\n\tboolean paused \u003d false;\n\tprotected long before;\n\tprotected GameState lastState;\n\tprotected int ticksThisLogin \u003d 0;\n\n\t@Provides\n\tGenericAutosplitterConfig provideConfig(ConfigManager configManager) {\n\t\treturn configManager.getConfig(GenericAutosplitterConfig.class);\n\t}\n\n\t@Override\n\tprotected void startUp() {\n\t\tfinal BufferedImage icon \u003d ImageUtil.loadImageResource(getClass(), \"/autosplitter_icon.png\");\n\t\tlivesplitController \u003d new LivesplitController(client, config, this);\n\t\tpanel \u003d new GenericAutosplitterPanel(client, config,this, livesplitController);\n\t\tnavButton \u003d NavigationButton.builder().tooltip(\"Generic Autosplitter\")\n\t\t\t\t.icon(icon).priority(6).panel(panel).build();\n\t\tclientToolbar.addNavigation(navButton);\n\t\tpanel.startPanel();\n        keymanager.registerKeyListener(startHotkeyListener);\n        keymanager.registerKeyListener(resetHotkeyListener);\n\t}\n\n\t@Override\n\tprotected void shutDown() {\n\t\tdisconnect();\n\t\tclientToolbar.removeNavigation(navButton);\n        keymanager.unregisterKeyListener(startHotkeyListener);\n        keymanager.unregisterKeyListener(resetHotkeyListener);\n\t}\n\n\tpublic void connect() {\n\t\tlivesplitController.tryConnect();\n\n\t\tif (livesplitController.connected) {\n\t\t\tpanel.setConnected();\n\n\t\t\toffset \u003d loadTime();\n\t\t\tpanel.loadOffset(offset);\n\t\t\tif (useOffset) {\n\t\t\t\tpanel.enableOffset();\n\t\t\t} else {\n\t\t\t\tpanel.disableOffset();\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic void disconnect() {\n\t\tlivesplitController.disconnect();\n\t\tpanel.setDisconnected();\n\n\t\tstarted \u003d false;\n\t\tpaused \u003d false;\n\t\tticks \u003d 0;\n\t\toffset \u003d 0;\n\t}\n\n\t/*\n\t * Event handlers\n\t */\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event) {\n\t\tif (started \u0026\u0026 !paused) {\n\t\t\tticks +\u003d 1;\n\t\t\tticksThisLogin +\u003d 1;\n\t\t\tlong now \u003d Instant.now().toEpochMilli();\n\t\t\tint lostTicks \u003d (int) Math.floor((now - before) / (1000.0f * 0.6f));\n\n\t\t\tif (lostTicks \u003e ticksThisLogin) {\n\t\t\t\t// Our tick count is off by more than 600ms\n\t\t\t\tticks +\u003d lostTicks - ticksThisLogin;\n\t\t\t\tsetTime();\n\t\t\t\tbefore \u003d now;\n\t\t\t\tticksThisLogin \u003d 0;\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onPluginMessage(PluginMessage event) {\n\t\tif (!AUTOSPLITTER_PLUGIN_NAME.equalsIgnoreCase(event.getNamespace())) {\n            // Ignore unrelated plugin messages.\n\t\t\treturn;\n\t\t}\n        switch (event.getName().toLowerCase(Locale.ROOT)) {\n\t\t\tcase \"start\":\n\t\t\t\tstartRun();\n\t\t\t\tbreak;\n            case \"split\":\n                split();\n                break;\n\t\t\tcase \"pause\":\n\t\t\t\tpause();\n\t\t\t\tbreak;\n\t\t\tcase \"resume\":\n\t\t\t\tresume();\n\t\t\t\tbreak;\n            case \"undo\":\n                undo();\n                break;\n            case \"skip\":\n                skip();\n                break;\n            case \"end\":\n                endRun();\n                break;\n\t\t\tcase \"reset\":\n\t\t\t\treset();\n\t\t\t\tbreak;\n            default:\n                // This line is left blank intentionally to ignore unsupported messages.\n                break;\n        }\n\t}\n\n\t@Subscribe\n\tprivate void onGameStateChanged(GameStateChanged event) {\n\t\tGameState state \u003d event.getGameState();\n\t\tlong now \u003d Instant.now().toEpochMilli();\n\t\tticksThisLogin \u003d 0;\n\n\n\t\tif (started) {\n\n\t\t\tif (lastState \u003d\u003d GameState.LOADING || lastState \u003d\u003d GameState.CONNECTION_LOST) {\n\t\t\t\t// figure out how many GameTick events we lost, round it down, and add it to total\n\t\t\t\t// bug: sometimes off by 1, maybe just server lag\n\t\t\t\tint lostTicks \u003d (int) Math.floor((now - before) / (1000.0f * 0.6f));\n\t\t\t\tticks +\u003d lostTicks;\n\t\t\t}\n\n\t\t\tif (state \u003d\u003d GameState.HOPPING || state \u003d\u003d GameState.LOGIN_SCREEN) {\n\t\t\t\t// adjustment makes timer more accurate, idk why\n\t\t\t\tticks +\u003d 2;\n\t\t\t}\n\n\t\t\tif (paused \u0026\u0026 (state \u003d\u003d GameState.LOGGED_IN || state \u003d\u003d GameState.LOADING || state \u003d\u003d GameState.CONNECTION_LOST)) {\n\t\t\t\tresume();\n\t\t\t} else if (!paused \u0026\u0026 state \u003d\u003d GameState.HOPPING) {\n\t\t\t\tpauseGameTime();\n\t\t\t} else if (!paused \u0026\u0026 state \u003d\u003d GameState.LOGIN_SCREEN) {\n\t\t\t\tpause();\n\t\t\t}\n\t\t}\n\n\t\tbefore \u003d now;\n\t\tlastState \u003d state;\n\t}\n\n\t/*\n\t * Run control flow methods\n\t */\n\n\tpublic void startRun() {\n\t\treset();\n\t\tstarted \u003d true;\n\t\tpaused \u003d false;\n\t\tbefore \u003d Instant.now().toEpochMilli();\n\n\t\tif (useOffset) {\n\t\t\tticks \u003d offset;\n\t\t} else {\n\t\t\tticks \u003d 0;\n\t\t}\n\n\t\tlivesplitController.startRun();\n\t\tsetTime();\n\n\t\tGameState state \u003d client.getGameState();\n\t\tif (state \u003d\u003d GameState.LOGIN_SCREEN || state \u003d\u003d GameState.HOPPING || state \u003d\u003d GameState.LOGGING_IN) {\n\t\t\tpause();\n\t\t}\n\t}\n\n\tpublic void split() {\n\t\tif (started) {\n\t\t\tlivesplitController.split();\n\t\t}\n\t}\n\n\tpublic void pause() {\n\t\tpauseGameTime();\n\t\tlivesplitController.pause();\n\t}\n\n\tpublic void resume() {\n\t\tunpauseGameTime();\n\t\tlivesplitController.resume();\n\t}\n\n\tpublic void pauseGameTime() {\n\t\tlivesplitController.pauseGameTime();\n\t\tsetTime();\n\t\tpaused \u003d true;\n\t}\n\n\tpublic void unpauseGameTime() {\n\t\tsetTime();\n\t\tlivesplitController.unpauseGameTime();\n\t\tpaused \u003d false;\n\t}\n\n\tpublic void undo() {\n\t\tlivesplitController.undo();\n\t}\n\n\tpublic void skip() {\n\t\tlivesplitController.skip();\n\t}\n\n\tpublic void endRun() {\n\t\t// does not automatically reset, in case the user wishes to undo\n\t\tlivesplitController.endRun();\n\t}\n\n\tpublic void reset() {\n\t\tlivesplitController.reset();\n\t\tstarted \u003d false;\n\t}\n\n\tpublic void setTime() {\n\t\tString time \u003d buildTimeStr(ticks);\n\t\tlivesplitController.setGameTime(time);\n\t\tsaveTime(ticks);\n\t}\n\n\tpublic void spoofTime() {\n\t\t// go to the next tick when pausing so the timer never runs backwards\n\t\tString time \u003d buildTimeStr(ticks + 1);\n\t\tlivesplitController.setGameTime(time);\n\t\tsaveTime(ticks);\n\t}\n\n\tpublic void toggleOffset() {\n\t\tif (useOffset) {\n\t\t\tuseOffset \u003d false;\n\t\t\tpanel.disableOffset();\n\t\t} else {\n\t\t\tuseOffset \u003d true;\n\t\t\tpanel.enableOffset();\n\t\t}\n\t}\n\n\tpublic String buildTimeStr(int duration) {\n\t\treturn BigDecimal.valueOf((duration) * 0.6).setScale(1, RoundingMode.HALF_UP).toString();\n\t}\n\n\tpublic int getTimePlayed() {\n\t\treturn client.getVarcIntValue(526);\n\t}\n\n\tprivate void saveTime(int duration) {\n\t\tconfigManager.setRSProfileConfiguration(AUTOSPLITTER_PLUGIN_NAME, DURATION_KEY, duration);\n\t}\n\n\tprivate int loadTime() {\n\t\ttry {\n            return Integer.parseInt(configManager.getRSProfileConfiguration(AUTOSPLITTER_PLUGIN_NAME, \"duration\"));\n\t\t} catch (Exception e) {\n\t\t\treturn getTimePlayed() * 100;\n\t\t}\n\t}\n\n    private final HotkeyListener startHotkeyListener \u003d new HotkeyListener(() -\u003e config.startHotKey()) {\n        @Override\n        public void hotkeyPressed() {\n            panel.startRun();\n        }\n    };\n\n    private final HotkeyListener resetHotkeyListener \u003d new HotkeyListener(() -\u003e config.resetHotKey()) {\n        @Override\n        public void hotkeyPressed() {\n            panel.resetRun();\n        }\n    };\n}\n","filePath":"src\\main\\java\\com\\genericautosplitter\\GenericAutosplitterPlugin.java"},{"fileName":"LivesplitController.java","content":"package com.genericautosplitter;\n\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.PrintWriter;\nimport java.net.Socket;\n\npublic class LivesplitController {\n    private final Client client;\n    private final GenericAutosplitterConfig config;\n    private final GenericAutosplitterPlugin splitter;\n    private PrintWriter writer;\n    private BufferedReader reader;\n    private Socket socket;\n    protected boolean connected \u003d false;\n\n    LivesplitController(Client client, GenericAutosplitterConfig config, GenericAutosplitterPlugin splitter) {\n        this.client \u003d client;\n        this.config \u003d config;\n        this.splitter \u003d splitter;\n    }\n\n    public void tryConnect() {\n        try {\n            socket \u003d new Socket(\"localhost\", config.port());\n            writer \u003d new PrintWriter(socket.getOutputStream());\n            reader \u003d new BufferedReader(new InputStreamReader(socket.getInputStream()));\n            connected \u003d true;\n\n        } catch (Exception e) {\n            connected \u003d false;\n            if (client.getGameState() \u003d\u003d GameState.LOGGED_IN) {\n                String message \u003d \"Could not start socket, did you start the LiveSplit server?\";\n                client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", message, null);\n            }\n        }\n    }\n\n    public void disconnect() {\n        try {\n            connected \u003d false;\n            socket.close();\n\n        } catch (Exception ignored) {}\n    }\n\n    public void sendMessage(String message) {\n        if (writer !\u003d null) {\n            writer.write(message + \"\\r\\n\");\n            writer.flush();\n        }\n    }\n\n    private String receiveMessage() {\n        if (reader !\u003d null) {\n            try {\n                return reader.readLine();\n            } catch (IOException e) {\n                return \"ERROR\";\n            }\n        }\n        return \"ERROR\";\n    }\n\n    public void startRun() {\n        sendMessage(\"initgametime\");\n        sendMessage(\"starttimer\");\n    }\n\n    public void split() {\n\n        pauseGameTime();\n\n        splitter.setTime();\n        sendMessage(\"split\");\n\n        unpauseGameTime();\n\n    }\n\n    public void skip() {\n        sendMessage(\"skipsplit\");\n    }\n\n    public void undo() {\n        sendMessage(\"undosplit\");\n    }\n\n    public void pauseGameTime() {\n        sendMessage(\"pausegametime\");\n    }\n\n    public void unpauseGameTime() {\n        sendMessage(\"unpausegametime\");\n    }\n\n    public void pause() {\n        sendMessage(\"pause\");\n    }\n\n    public void resume() {\n        sendMessage(\"resume\");\n    }\n\n    public void setGameTime(String time) {\n        sendMessage(\"setgametime \" + time);\n    }\n\n    public void endRun() {\n        sendMessage(\"getcurrenttimerphase\");\n        String msg \u003d receiveMessage();\n\n        while (!msg.equals(\"ERROR\")) {\n            switch (msg) {\n                case \"Running\":\n                    sendMessage(\"getsplitindex\");\n                    String i \u003d receiveMessage();\n                    sendMessage(\"skipsplit\");\n                    sendMessage(\"getsplitindex\");\n                    String j \u003d receiveMessage();\n                    if (i.equals(j)) {\n                        split();\n                    }\n                    break;\n                case \"Paused\":\n                    sendMessage(\"resume\");\n                    break;\n                case \"Ended\":\n                case \"NotRunning\":\n                    return;\n            }\n            sendMessage(\"getcurrenttimerphase\");\n            msg \u003d receiveMessage();\n        }\n    }\n\n    public void reset() {\n        sendMessage(\"reset\");\n    }\n}\n","filePath":"src\\main\\java\\com\\genericautosplitter\\LivesplitController.java"},{"fileName":"GenericAutosplitterPluginTest.java","content":"package com.genericautosplitter;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class GenericAutosplitterPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(GenericAutosplitterPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\genericautosplitter\\GenericAutosplitterPluginTest.java"}]},{"commit":"a41a0fd12393f41e91267d940dd12e9248e292a7","repository":"https://github.com/Dari-K/item-locker.git","internalName":"item-locker","files":[{"fileName":"ItemLockerConfig.java","content":"package com.itemlocker;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"itemlocker\")\npublic interface ItemLockerConfig extends Config\n{\n    @ConfigItem(\n        keyName \u003d \"unlockedItems\",\n        name \u003d \"Unlocked Items\",\n        description \u003d \"Stores all unlocked items as a CSV\"\n    )\n    default String unlockedItems()\n    {\n        return \"\";\n    }\n}\n","filePath":"src\\main\\java\\com\\itemlocker\\ItemLockerConfig.java"},{"fileName":"ItemLockerOverlay.java","content":"package com.itemlocker;\n\nimport com.google.common.cache.Cache;\nimport com.google.common.cache.CacheBuilder;\nimport java.awt.Color;\nimport java.awt.Graphics2D;\nimport java.awt.Image;\nimport java.awt.Rectangle;\nimport javax.inject.Inject;\n\nimport net.runelite.api.gameval.InterfaceID;\nimport net.runelite.api.widgets.WidgetItem;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.overlay.WidgetItemOverlay;\nimport net.runelite.client.util.ColorUtil;\nimport net.runelite.client.util.ImageUtil;\n\nclass ItemLockerOverlay extends WidgetItemOverlay\n{\n\tprivate final ItemManager itemManager;\n\tprivate final ItemLockerPlugin plugin;\n\tprivate final Cache\u003cLong, Image\u003e fillCache;\n    private final Cache\u003cInteger, Boolean\u003e unlockCache;\n\n\t@Inject\n\tprivate ItemLockerOverlay(ItemManager itemManager, ItemLockerPlugin plugin, ItemLockerConfig config)\n\t{\n\t\tthis.itemManager \u003d itemManager;\n\t\tthis.plugin \u003d plugin;\n\t\tshowOnEquipment();\n\t\tshowOnInventory();\n\t\tshowOnInterfaces(\n\t\t\tInterfaceID.BANKMAIN,\n\t\t\tInterfaceID.RAIDS_STORAGE_SIDE,\n\t\t\tInterfaceID.RAIDS_STORAGE_SHARED,\n\t\t\tInterfaceID.RAIDS_STORAGE_PRIVATE,\n\t\t\tInterfaceID.GRAVESTONE_RETRIEVAL,\n\t\t\tInterfaceID.GRAVESTONE_GENERIC,\n\t\t\tInterfaceID.BANK_DEPOSITBOX\n\t\t);\n\t\tfillCache \u003d CacheBuilder.newBuilder()\n\t\t\t.concurrencyLevel(1)\n\t\t\t.maximumSize(32)\n\t\t\t.build();\n        unlockCache \u003d CacheBuilder.newBuilder()\n            .concurrencyLevel(1)\n            .maximumSize(39)\n            .build();\n\t}\n\n\t@Override\n\tpublic void renderItemOverlay(Graphics2D graphics, int itemId, WidgetItem widgetItem)\n\t{\n        final boolean unlocked \u003d getUnlocked(itemId);\n        if (unlocked) {\n            return;\n        }\n\n\t\tfinal Color color \u003d Color.RED;\n\n\t\tRectangle bounds \u003d widgetItem.getCanvasBounds();\n\n        final Image image \u003d getFillImage(color, widgetItem.getId(), widgetItem.getQuantity());\n        graphics.drawImage(image, (int) bounds.getX(), (int) bounds.getY(), null);\n\t}\n\n    private boolean getUnlocked(int itemId)\n    {\n        Boolean unlocked \u003d unlockCache.getIfPresent(itemId);\n        if (unlocked \u003d\u003d null) {\n            unlocked \u003d plugin.getUnlocked(itemId);\n            unlockCache.put(itemId, unlocked);\n        }\n        return unlocked;\n    }\n\n\tprivate Image getFillImage(Color color, int itemId, int qty)\n\t{\n\t\tlong key \u003d (((long) itemId) \u003c\u003c 32) | qty;\n\t\tImage image \u003d fillCache.getIfPresent(key);\n\t\tif (image \u003d\u003d null)\n\t\t{\n\t\t\tfinal Color fillColor \u003d ColorUtil.colorWithAlpha(color, 64);\n\t\t\timage \u003d ImageUtil.fillImage(itemManager.getImage(itemId, qty, false), fillColor);\n\t\t\tfillCache.put(key, image);\n\t\t}\n\t\treturn image;\n\t}\n\n\tvoid invalidateCache()\n\t{\n\t\tfillCache.invalidateAll();\n        unlockCache.invalidateAll();\n\t}\n}","filePath":"src\\main\\java\\com\\itemlocker\\ItemLockerOverlay.java"},{"fileName":"ItemLockerPlugin.java","content":"package com.itemlocker;\n\nimport com.google.inject.Provides;\n\nimport java.util.Arrays;\nimport java.util.HashSet;\nimport java.util.Objects;\nimport java.util.Set;\nimport java.util.stream.Collectors;\n\nimport javax.inject.Inject;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.KeyCode;\nimport net.runelite.api.Menu;\nimport net.runelite.api.MenuAction;\nimport net.runelite.api.MenuEntry;\nimport net.runelite.api.events.MenuOpened;\nimport net.runelite.api.events.PostMenuSort;\nimport net.runelite.api.gameval.InterfaceID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetUtil;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.Text;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Item Locker\"\n)\npublic class ItemLockerPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Inject\n\tprivate ItemLockerOverlay overlay;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\tprivate Set\u003cInteger\u003e unlockedItems \u003d new HashSet\u003c\u003e();\n\n\t@Provides\n\tItemLockerConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(ItemLockerConfig.class);\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tString csv \u003d configManager.getConfiguration(\"itemlocker\", \"unlockedItems\");\n\t\tif (csv !\u003d null \u0026\u0026 !csv.isEmpty()) {\n\t\t\tthis.unlockedItems \u003d Arrays.stream(csv.split(\",\"))\n\t\t\t.map(String::trim)\n\t\t\t.filter(s -\u003e !s.isEmpty())\n\t\t\t.map(s -\u003e {\n\t\t\t\ttry {\n\t\t\t\t\treturn Integer.parseInt(s);\n\t\t\t\t} catch (NumberFormatException e) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t})\n\t\t\t.filter(Objects::nonNull)\n\t\t\t.collect(Collectors.toSet());\n\t\t}\n\t\toverlayManager.add(overlay);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(overlay);\n\t}\n\n\tboolean getUnlocked(int itemId)\n\t{\n\t\treturn this.unlockedItems.contains(itemId);\n\t}\n\n\tprivate void saveUnlockedItems() {\n\t\tconfigManager.setConfiguration\n\t\t(\"itemlocker\",\n\t\t\"unlockedItems\",\n\t\tthis.unlockedItems.stream()\n\t\t\t.map(String::valueOf)\n\t\t\t.collect(Collectors.joining(\",\"))\n\t\t);\n\t}\n\n\tvoid setUnlocked(int itemId)\n\t{\n\t\tthis.unlockedItems.add(itemId);\n\t\tthis.saveUnlockedItems();\n\t}\n\n\tvoid setLocked(int itemId)\n\t{\n\t\tthis.unlockedItems.remove(itemId);\n\t\tthis.saveUnlockedItems();\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged configChanged)\n\t{\n\t\tif (configChanged.getGroup().equals(\"itemlocker\"))\n\t\t{\n\t\t\toverlay.invalidateCache();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOpened(final MenuOpened event)\n\t{\n\t\tif (!client.isKeyPressed(KeyCode.KC_SHIFT))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal MenuEntry[] entries \u003d event.getMenuEntries();\n\t\tfor (int idx \u003d entries.length - 1; idx \u003e\u003d 0; --idx)\n\t\t{\n\t\t\tfinal MenuEntry entry \u003d entries[idx];\n\t\t\tfinal Widget w \u003d entry.getWidget();\n\n\t\t\tif (w !\u003d null \u0026\u0026 WidgetUtil.componentToInterface(w.getId()) \u003d\u003d InterfaceID.INVENTORY\n\t\t\t\t\u0026\u0026 \"Examine\".equals(entry.getOption()) \u0026\u0026 entry.getIdentifier() \u003d\u003d 10)\n\t\t\t{\n\t\t\t\tfinal int itemId \u003d w.getItemId();\n\t\t\t\tfinal boolean unlocked \u003d getUnlocked(itemId);\n\n\t\t\t\tclient.getMenu().createMenuEntry(idx)\n\t\t\t\t\t.setOption(unlocked ? \"Lock\" : \"Unlock\")\n\t\t\t\t\t.setTarget(entry.getTarget())\n\t\t\t\t\t.setType(MenuAction.RUNELITE)\n\t\t\t\t\t.onClick(e -\u003e\n\t\t\t\t\t{\n\t\t\t\t\t\tif (unlocked) {\n\t\t\t\t\t\t\tsetLocked(itemId);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetUnlocked(itemId);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onPostMenuSort(PostMenuSort postMenuSort)\n\t{\n\t\tif (client.isMenuOpen())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tMenu root \u003d client.getMenu();\n\t\tMenuEntry[] menuEntries \u003d root.getMenuEntries();\n\t\t\n\t\tif (menuEntries.length \u003d\u003d 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tMenuEntry leftClickEntry \u003d menuEntries[menuEntries.length - 1];\n\n\t\tif (getUnlocked(leftClickEntry.getItemId())) {\n\t\t\treturn;\n\t\t}\n\n\t\tWidget w \u003d leftClickEntry.getWidget();\n\n\t\tif (w \u003d\u003d null || WidgetUtil.componentToInterface(w.getId()) !\u003d InterfaceID.INVENTORY) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tMenuEntry newLeftClickEntry \u003d root.createMenuEntry(-1);\n\n\t\tnewLeftClickEntry.setOption(\"Locked\");\n\t\tnewLeftClickEntry.setType(MenuAction.CANCEL);\n\t}\n}\n","filePath":"src\\main\\java\\com\\itemlocker\\ItemLockerPlugin.java"},{"fileName":"ItemLockerPluginTest.java","content":"package com.itemlocker;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ItemLockerPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(ItemLockerPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\itemlocker\\ItemLockerPluginTest.java"}]},{"commit":"e361b4efac99cb82192132b7466ca8f2b1b4432d","repository":"https://github.com/rbespin/mouse-click-counter.git","internalName":"mouse-click-counter","files":[{"fileName":"MouseClickCounterConfig.java","content":"/*\n * Copyright (c) 2020, Robert Espinoza\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.mouseclickcounter;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"mouseclickcounter\")\npublic interface MouseClickCounterConfig extends Config\n{\n\t@ConfigItem(\n\t\tposition \u003d 1,\n\t\tkeyName \u003d \"hide\",\n\t\tname \u003d \"Hide Overlay\",\n\t\tdescription \u003d \"Toggle the display of any click count\"\n\t)\n\tdefault boolean hide() { return false; }\n\n\t@ConfigItem(\n\t\tposition \u003d 2,\n\t\tkeyName \u003d \"showTotalClick\",\n\t\tname \u003d \"Show all click totals\",\n\t\tdescription \u003d \"Toggle the display of all mouse clicks\"\n\t)\n\tdefault boolean showTotalClick() { return true; }\n\n\t@ConfigItem(\n\t\tposition \u003d 3,\n\t\tkeyName \u003d \"showLeftClick\",\n\t\tname \u003d \"Show left click totals\",\n\t\tdescription \u003d \"Toggle the display of the left mouse clicks\"\n\t)\n\tdefault boolean showLeftClick() { return false; }\n\n\t@ConfigItem(\n\t\tposition \u003d 4,\n\t\tkeyName \u003d \"showRightClick\",\n\t\tname \u003d \"Show right click totals\",\n\t\tdescription \u003d \"Toggle the display of the right mouse clicks\"\n\t)\n\tdefault boolean showRightClick() { return false; }\n\n\t@ConfigItem(\n\t\tposition \u003d 5,\n\t\tkeyName \u003d \"showMiddleClick\",\n\t\tname \u003d \"Show middle click totals\",\n\t\tdescription \u003d \"Toggle the display of the middle mouse clicks\"\n\t)\n\tdefault boolean showMiddleClick() { return false; }\n\n}\n\n","filePath":"src\\main\\java\\com\\mouseclickcounter\\MouseClickCounterConfig.java"},{"fileName":"MouseClickCounterListener.java","content":"/*\n * Copyright (c) 2020, Robert Espinoza\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.mouseclickcounter;\n\nimport java.awt.event.MouseEvent;\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.util.Scanner;\nimport javax.swing.SwingUtilities;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.client.input.MouseAdapter;\nimport static net.runelite.client.RuneLite.RUNELITE_DIR;\n\npublic class MouseClickCounterListener extends MouseAdapter\n{\n\tprivate int leftClickCounter;\n\tprivate int rightClickCounter;\n\tprivate int middleClickCounter;\n\tprivate int totalClickCounter;\n\tprivate final Client client;\n\tprivate final File CLICK_TOTAL_DIR \u003d\n\t\tnew File(RUNELITE_DIR,\"mouseClickCounter\");\n\tprivate final File CLICK_TOTAL_FILE \u003d\n\t\tnew File(CLICK_TOTAL_DIR, \"click_totals.log\");\n\tprivate final int SAVE_PERIODICITY \u003d 50;\n\tprivate final int NUM_CLICK_TYPES \u003d 4;\n\tprivate enum FILE_CLICK_TYPE_INDICES {\n\t\tTOTAL(0),\n\t\tLEFT(1),\n\t\tRIGHT(2),\n\t\tMIDDLE(3);\n\t\tprivate final int index;\n\t\tFILE_CLICK_TYPE_INDICES(final int newIndex)\n\t\t{\n\t\t\tindex \u003d newIndex;\n\t\t}\n\t\tpublic int getValue() { return index; }\n\t}\n\n\tMouseClickCounterListener(Client client) throws FileNotFoundException\n\t{\n\t\tloadMouseClicks();\n\t\tthis.client \u003d client;\n\t}\n\n\t@Override\n\tpublic MouseEvent mousePressed(MouseEvent event)\n\t{\n\t\tif(client.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\n\t\t\tif (SwingUtilities.isLeftMouseButton(event))\n\t\t\t{\n\t\t\t\tthis.leftClickCounter++;\n\t\t\t\tthis.totalClickCounter++;\n\t\t\t}\n\n\t\t\telse if (SwingUtilities.isRightMouseButton(event))\n\t\t\t{\n\t\t\t\tthis.rightClickCounter++;\n\t\t\t\tthis.totalClickCounter++;\n\t\t\t}\n\n\t\t\telse if (SwingUtilities.isMiddleMouseButton(event))\n\t\t\t{\n\t\t\t\tthis.middleClickCounter++;\n\t\t\t\tthis.totalClickCounter++;\n\t\t\t}\n\n\t\t\tif (this.totalClickCounter%SAVE_PERIODICITY \u003d\u003d 0)\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tsaveMouseClicks();\n\t\t\t\t}\n\t\t\t\tcatch (IOException e)\n\t\t\t\t{\n\t\t\t\t\te.printStackTrace();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn event;\n\t}\n\n\tpublic int getLeftClickCounter() { return this.leftClickCounter; }\n\n\tpublic int getRightClickCounter() { return this.rightClickCounter; }\n\n\tpublic int getMiddleClickCounter() { return this.middleClickCounter; }\n\n\tpublic int getTotalClickCounter() { return this.totalClickCounter; }\n\n\tpublic void resetMouseClickCounterListener()\n\t{\n\t\tthis.leftClickCounter \u003d 0;\n\t\tthis.rightClickCounter \u003d 0;\n\t\tthis.middleClickCounter \u003d 0;\n\t\tthis.totalClickCounter \u003d 0;\n\t\ttry\n\t\t{\n\t\t\tsaveMouseClicks();\n\t\t}\n\t\tcatch (IOException e)\n\t\t{\n\t\t\te.printStackTrace();\n\t\t}\n\t}\n\n\tpublic void saveMouseClicks() throws IOException\n\t{\n\t\tif(!this.CLICK_TOTAL_FILE.exists())\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tif(!this.CLICK_TOTAL_FILE.createNewFile())\n\t\t\t\t{\n\t\t\t\t\tSystem.out.println(\"Failed to create log file\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (IOException e)\n\t\t\t{\n\t\t\t\te.printStackTrace();\n\t\t\t}\n\t\t}\n\t\tFileWriter writer \u003d new FileWriter(this.CLICK_TOTAL_FILE);\n\n\t\tInteger[] totals \u003d {this.getTotalClickCounter(),\n\t\t\tthis.getLeftClickCounter(),\n\t\t\tthis.getRightClickCounter(),\n\t\t\tthis.getMiddleClickCounter()};\n\n\t\twriter.write(totals[FILE_CLICK_TYPE_INDICES.TOTAL.getValue()] + \" \");\n\t\twriter.write(totals[FILE_CLICK_TYPE_INDICES.LEFT.getValue()] + \" \");\n\t\twriter.write(totals[FILE_CLICK_TYPE_INDICES.RIGHT.getValue()] + \" \");\n\t\twriter.write(totals[FILE_CLICK_TYPE_INDICES.MIDDLE.getValue()] + \" \");\n\t\twriter.close();\n\t}\n\n\tpublic void loadMouseClicks() throws FileNotFoundException\n\t{\n\t\tif(!this.CLICK_TOTAL_DIR.mkdir() \u0026\u0026 this.CLICK_TOTAL_FILE.exists())\n\t\t{\n\t\t\tScanner scanner \u003d new Scanner(this.CLICK_TOTAL_FILE);\n\t\t\tint [] totals \u003d new int[NUM_CLICK_TYPES];\n\t\t\tint ii \u003d 0;\n\t\t\twhile(scanner.hasNextInt())\n\t\t\t{\n\t\t\t\ttotals[ii++] \u003d scanner.nextInt();\n\t\t\t}\n\t\t\tif(ii !\u003d NUM_CLICK_TYPES)\n\t\t\t{\n\t\t\t\tresetMouseClickCounterListener();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.leftClickCounter \u003d\n\t\t\t\t\ttotals[FILE_CLICK_TYPE_INDICES.LEFT.getValue()];\n\t\t\t\tthis.rightClickCounter \u003d\n\t\t\t\t\ttotals[FILE_CLICK_TYPE_INDICES.RIGHT.getValue()];\n\t\t\t\tthis.middleClickCounter \u003d\n\t\t\t\t\ttotals[FILE_CLICK_TYPE_INDICES.MIDDLE.getValue()];\n\t\t\t\tthis.totalClickCounter \u003d\n\t\t\t\t\ttotals[FILE_CLICK_TYPE_INDICES.TOTAL.getValue()];\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tif(this.CLICK_TOTAL_FILE.createNewFile())\n\t\t\t\t{\n\t\t\t\t\tthis.leftClickCounter \u003d 0;\n\t\t\t\t\tthis.rightClickCounter \u003d 0;\n\t\t\t\t\tthis.middleClickCounter \u003d 0;\n\t\t\t\t\tthis.totalClickCounter \u003d 0;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tSystem.out.println(\"Failed to create log file\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (IOException e)\n\t\t\t{\n\t\t\t\tSystem.out.println(\"An error occurred creating the log file\");\n\t\t\t\te.printStackTrace();\n\t\t\t}\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\mouseclickcounter\\MouseClickCounterListener.java"},{"fileName":"MouseClickCounterOverlay.java","content":"/*\n * Copyright (c) 2020, Robert Espinoza\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.mouseclickcounter;\n\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport javax.inject.Inject;\nimport net.runelite.api.MenuAction;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayMenuEntry;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.LineComponent;\nimport net.runelite.client.ui.overlay.components.PanelComponent;\nimport static net.runelite.client.ui.overlay.OverlayManager.OPTION_CONFIGURE;\n\npublic class MouseClickCounterOverlay extends Overlay\n{\n\tprivate final PanelComponent panelComponent \u003d new PanelComponent();\n\tprivate final MouseClickCounterConfig config;\n\tprivate final MouseClickCounterPlugin plugin;\n\tprivate int size;\n\tprivate ArrayList\u003cInteger\u003e previousSelections;\n\n\t@Inject\n\tprivate MouseClickCounterOverlay(MouseClickCounterConfig config,\n\t\tMouseClickCounterPlugin plugin)\n\t{\n\t\tsetPosition(OverlayPosition.ABOVE_CHATBOX_RIGHT);\n\t\tthis.config \u003d config;\n\t\tthis.size \u003d 0;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.previousSelections \u003d new ArrayList\u003c\u003e();\n\t\tgetMenuEntries().add(\n\t\t\tnew OverlayMenuEntry(MenuAction.RUNELITE_OVERLAY_CONFIG,\n\t\t\t\tOPTION_CONFIGURE, \"Mouse click counter overlay\"));\n\t}\n\n\tprivate int getSize(Graphics2D graphics)\n\t{\n\t\tint configSize \u003d 0;\n\t\tArrayList\u003cInteger\u003e currentSelections \u003d new ArrayList\u003c\u003e();\n\t\tif(config.showTotalClick())\n\t\t{\n\t\t\tString totalString \u003d \"Clicks: \" +\n\t\t\t\tthis.plugin.getTotalClickCounter();\n\t\t\tint totalSize \u003d graphics.getFontMetrics().stringWidth(totalString);\n\t\t\tconfigSize \u003d Math.max(configSize, totalSize);\n\t\t\tcurrentSelections.add(0);\n\t\t}\n\n\t\tif(config.showLeftClick())\n\t\t{\n\t\t\tString leftString \u003d \"Left: \" + this.plugin.getLeftClickCounter();\n\t\t\tint leftSize \u003d graphics.getFontMetrics().stringWidth(leftString);\n\t\t\tconfigSize \u003d Math.max(configSize, leftSize);\n\t\t\tcurrentSelections.add(1);\n\t\t}\n\n\t\tif(config.showRightClick())\n\t\t{\n\t\t\tString rightString \u003d \"Right: \" +\n\t\t\t\tthis.plugin.getRightClickCounter();\n\t\t\tint rightSize \u003d graphics.getFontMetrics().stringWidth(rightString);\n\t\t\tconfigSize \u003d Math.max(configSize, rightSize);\n\t\t\tcurrentSelections.add(2);\n\t\t}\n\n\t\tif(config.showMiddleClick())\n\t\t{\n\t\t\tString middleString \u003d \"Middle: \" +\n\t\t\t\tthis.plugin.getMiddleClickCounter();\n\t\t\tint middleSize \u003d graphics.getFontMetrics().stringWidth(middleString);\n\t\t\tconfigSize \u003d Math.max(configSize, middleSize);\n\t\t\tcurrentSelections.add(3);\n\t\t}\n\n\t\tCollections.sort(currentSelections);\n\t\tif(!currentSelections.equals(previousSelections))\n\t\t{\n\t\t\tthis.size \u003d configSize;\n\t\t\tpreviousSelections \u003d currentSelections;\n\t\t}\n\n\t\telse\n\t\t{\n\t\t\tif (this.size + 5 \u003c configSize)\n\t\t\t{\n\t\t\t\tthis.size \u003d configSize;\n\t\t\t}\n\n\t\t}\n\n\t\treturn this.size;\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tpanelComponent.getChildren().clear();\n\t\tpanelComponent.setPreferredSize(new Dimension(getSize(graphics)+15,0));\n\t\tif(!config.hide())\n\t\t{\n\t\t\tif(config.showTotalClick())\n\t\t\t{\n\t\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t\t.left(\"Clicks: \")\n\t\t\t\t\t.right(\"\"+this.plugin.getTotalClickCounter())\n\t\t\t\t\t.build());\n\t\t\t}\n\n\t\t\tif(config.showLeftClick())\n\t\t\t{\n\t\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t\t.left(\"Left: \")\n\t\t\t\t\t.right(\"\"+this.plugin.getLeftClickCounter())\n\t\t\t\t\t.build());\n\t\t\t}\n\n\t\t\tif(config.showRightClick())\n\t\t\t{\n\t\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t\t.left(\"Right: \")\n\t\t\t\t\t.right(\"\"+this.plugin.getRightClickCounter())\n\t\t\t\t\t.build());\n\t\t\t}\n\n\t\t\tif(config.showMiddleClick())\n\t\t\t{\n\t\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t\t.left(\"Middle: \")\n\t\t\t\t\t.right(\"\"+this.plugin.getMiddleClickCounter())\n\t\t\t\t\t.build());\n\t\t\t}\n\n\t\t}\n\n\t\treturn panelComponent.render(graphics);\n\t}\n}","filePath":"src\\main\\java\\com\\mouseclickcounter\\MouseClickCounterOverlay.java"},{"fileName":"MouseClickCounterPlugin.java","content":"/*\n * Copyright (c) 2020, Robert Espinoza\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.mouseclickcounter;\n\nimport com.google.inject.Provides;\nimport java.io.IOException;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.input.MouseManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Mouse Click Counter\"\n)\npublic class MouseClickCounterPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate MouseClickCounterConfig config;\n\n\t@Inject\n\tprivate MouseManager mouseManager;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate MouseClickCounterOverlay overlay;\n\n\tprivate MouseClickCounterListener mouseListener;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tmouseListener \u003d new MouseClickCounterListener(client);\n\t\tmouseManager.registerMouseListener(mouseListener);\n\t\toverlayManager.add(overlay);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tmouseListener.saveMouseClicks();\n\t\tmouseManager.unregisterMouseListener(mouseListener);\n\t\tmouseListener \u003d null;\n\t\toverlayManager.remove(overlay);\n\t}\n\n\t@Override\n\tpublic void resetConfiguration()\n\t{\n\t\tmouseListener.resetMouseClickCounterListener();\n\t}\n\n\t@Provides\n\tMouseClickCounterConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(MouseClickCounterConfig.class);\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged event) throws IOException\n\t{\n\t\tGameState state \u003d event.getGameState();\n\t\tif(state \u003d\u003d GameState.LOGIN_SCREEN || state \u003d\u003d GameState.UNKNOWN)\n\t\t{\n\t\t\tmouseListener.saveMouseClicks();\n\t\t}\n\t}\n\n\tpublic int getLeftClickCounter()\n\t{\n\t\treturn mouseListener.getLeftClickCounter();\n\t}\n\n\tpublic int getRightClickCounter()\n\t{\n\t\treturn mouseListener.getRightClickCounter();\n\t}\n\n\tpublic int getMiddleClickCounter()\n\t{\n\t\treturn mouseListener.getMiddleClickCounter();\n\t}\n\n\tpublic int getTotalClickCounter()\n\t{\n\t\treturn mouseListener.getTotalClickCounter();\n\t}\n}\n","filePath":"src\\main\\java\\com\\mouseclickcounter\\MouseClickCounterPlugin.java"},{"fileName":"MouseClickCounterPluginTest.java","content":"/*\n * Copyright (c) 2020, Robert Espinoza\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.mouseclickcounter;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class MouseClickCounterPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\t//ExternalPluginManager.loadBuiltin(com.mouseclickcounter.MouseClickCounterPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\mouseclickcounter\\MouseClickCounterPluginTest.java"}]},{"commit":"f2d3b899048e45af1dfde328106e431dd47bcda7","repository":"https://github.com/robmonte/runedoku-plugin.git","internalName":"runedoku-helper","files":[{"fileName":"OutlineTextComponent.java","content":"/*\n * Copyright (c) 2021, Iris Ward \u003caditu.venyhandottir@gmail.com\u003e\n *\n * This file is a modified version of net.runelite.client.ui.overlay.components.TextComponent\n * originally by Tomas Slusny.  The copyright notice for the original file is given below.\n */\n\n/*\n * Copyright (c) 2017, Tomas Slusny \u003cslusnucky@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.github.adituv.runedokuplugin;\n\nimport lombok.Setter;\nimport net.runelite.client.ui.overlay.RenderableEntity;\nimport net.runelite.client.util.ColorUtil;\nimport net.runelite.client.util.Text;\n\nimport javax.annotation.Nullable;\nimport java.awt.*;\nimport java.util.regex.Pattern;\n\n@Setter\npublic class OutlineTextComponent implements RenderableEntity {\n    private static final String COL_TAG_REGEX \u003d \"(\u003ccol\u003d([0-9a-fA-F]){2,6}\u003e)\";\n    private static final Pattern COL_TAG_PATTERN_W_LOOKAHEAD \u003d Pattern.compile(\"(?\u003d\" + COL_TAG_REGEX + \")\");\n\n    private String text;\n    private Point position \u003d new Point();\n    private Color color \u003d Color.WHITE;\n\n    // If there is no outline, draw a black drop-shadow if this is true, or draw nothing extra otherwise\n    private boolean shadow \u003d true;\n\n    @Nullable\n    private Font font;\n\n    private int outlineWidth \u003d 1;\n    private Color outlineColor \u003d Color.BLACK;\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        Font originalFont \u003d graphics.getFont();\n\n        if (font !\u003d null) {\n            graphics.setFont(font);\n        }\n\n        final FontMetrics fontMetrics \u003d graphics.getFontMetrics();\n\n        if (COL_TAG_PATTERN_W_LOOKAHEAD.matcher(text).find())\n        {\n            final String[] parts \u003d COL_TAG_PATTERN_W_LOOKAHEAD.split(text);\n            int x \u003d position.x;\n\n            for (String textSplitOnCol : parts)\n            {\n                final String textWithoutCol \u003d Text.removeTags(textSplitOnCol);\n                final String colColor \u003d textSplitOnCol.substring(textSplitOnCol.indexOf(\"\u003d\") + 1, textSplitOnCol.indexOf(\"\u003e\"));\n\n                if (outlineWidth \u003e 0)\n                {\n                    graphics.setColor(ColorUtil.colorWithAlpha(outlineColor, 0xFF));\n\n                    graphics.drawString(textWithoutCol, x + outlineWidth, position.y + outlineWidth);\n                    graphics.drawString(textWithoutCol, x, position.y + outlineWidth);\n                    graphics.drawString(textWithoutCol, x - outlineWidth, position.y + outlineWidth);\n\n                    graphics.drawString(textWithoutCol, x + outlineWidth, position.y);\n                    graphics.drawString(textWithoutCol, x - outlineWidth, position.y);\n\n                    graphics.drawString(textWithoutCol, x + outlineWidth, position.y - outlineWidth);\n                    graphics.drawString(textWithoutCol, x, position.y - outlineWidth);\n                    graphics.drawString(textWithoutCol, x - outlineWidth, position.y - outlineWidth);\n                }\n                else if(shadow)\n                {\n                    graphics.setColor(Color.BLACK);\n\n                    graphics.drawString(textWithoutCol, x + 1, position.y + 1);\n                }\n\n                // actual text\n                graphics.setColor(Color.decode(\"#\" + colColor));\n                graphics.drawString(textWithoutCol, x, position.y);\n\n                x +\u003d fontMetrics.stringWidth(textWithoutCol);\n            }\n        }\n        else\n        {\n            graphics.setColor(Color.BLACK);\n\n            if (outlineWidth \u003e 0)\n            {\n                graphics.setColor(ColorUtil.colorWithAlpha(outlineColor, 0xFF));\n\n                graphics.drawString(text, position.x + outlineWidth, position.y + outlineWidth);\n                graphics.drawString(text, position.x,position.y + outlineWidth);\n                graphics.drawString(text, position.x - outlineWidth, position.y + outlineWidth);\n\n                graphics.drawString(text, position.x + outlineWidth, position.y);\n                graphics.drawString(text, position.x - outlineWidth, position.y);\n\n                graphics.drawString(text, position.x + outlineWidth, position.y - outlineWidth);\n                graphics.drawString(text, position.x, position.y - outlineWidth);\n                graphics.drawString(text, position.x - outlineWidth, position.y - outlineWidth);\n            }\n            else if(shadow)\n            {\n                graphics.setColor(Color.BLACK);\n\n                graphics.drawString(text, position.x + 1, position.y + 1);\n            }\n\n            // actual text\n            graphics.setColor(ColorUtil.colorWithAlpha(color, 0xFF));\n            graphics.drawString(text, position.x, position.y);\n        }\n\n        int width \u003d fontMetrics.stringWidth(text);\n        int height \u003d fontMetrics.getHeight();\n\n        if (originalFont !\u003d null)\n        {\n            graphics.setFont(originalFont);\n        }\n\n        return new Dimension(width, height);\n    }\n\n    // Convenience setter for all outline properties\n    public void setOutline(int width, Color color) {\n        this.setOutlineWidth(width);\n        this.setOutlineColor(color);\n    }\n}\n","filePath":"src\\main\\java\\com\\github\\adituv\\runedokuplugin\\OutlineTextComponent.java"},{"fileName":"RunedokuBoard.java","content":"package com.github.adituv.runedokuplugin;\n\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.widgets.Widget;\n\n/**\n * A data structure to store the current state of the board\n */\n@Getter\n@Slf4j\npublic class RunedokuBoard {\n    private final Widget containerWidget;\n    private final RunedokuCell[] cells;\n\n    private final int width;\n\n    private final int[][] rowNumbers;\n    private final int[][] colNumbers;\n    private final int[][] boxNumbers;\n    private SudokuSolver solver;\n\n    /**\n     Check cell to verify it does not exist in an invalid location\n     @param cell Runedoku cell to check\n     */\n    public boolean cellHasClash(RunedokuCell cell) {\n        int sudokuIndex \u003d cell.getSudokuNumber() - 1;\n        return ( rowNumbers[cell.getRowNumber()][sudokuIndex] \u003e 1\n                || colNumbers[cell.getColumnNumber()][sudokuIndex] \u003e 1\n                || boxNumbers[cell.getBoxNumber()][sudokuIndex] \u003e 1);\n    }\n\n    /**\n     Check that cell has a solution. If showSolution is off, this will always return false\n     @param cell Runedoku cell to check\n     */\n    public boolean cellHasSolution(RunedokuCell cell) {\n        return cell.getSolutionNumber() !\u003d 0;\n    }\n\n    /**\n     * Grab widget and update each RunedokuCell within the board with new values\n     */\n    public void updateCells() {\n        Widget[] children \u003d containerWidget.getChildren();\n        if (children \u003d\u003d null) {\n            log.error(\"error: children null\");\n            return;\n        }\n\n        for(int i \u003d 0; i \u003c width; i++) {\n            for(int j \u003d 0; j \u003c width; j++) {\n                rowNumbers[i][j] \u003d 0;\n                colNumbers[i][j] \u003d 0;\n                boxNumbers[i][j] \u003d 0;\n            }\n        }\n\n        for(int i \u003d 0; i \u003c children.length; i++) {\n            cells[i].updateFromWidget(children[i]);\n            int sudokuIndex \u003d cells[i].getSudokuNumber() - 1;\n\n            if(sudokuIndex \u003e\u003d 0) {\n                this.rowNumbers[cells[i].getRowNumber()][sudokuIndex]++;\n                this.colNumbers[cells[i].getColumnNumber()][sudokuIndex]++;\n                this.boxNumbers[cells[i].getBoxNumber()][sudokuIndex]++;\n            }\n        }\n    }\n\n    /**\n     * Generate solution to current board state, if possible\n     * Updates each cell to contain its the solution value\n     * Accessible at cell.solutionNumber\n     *\n     * This function only runs once at the creation of the board, as the solution algorithm is computationally expensive\n     * especially if someone creates an unsolvable board\n     */\n    public void solveBoard() {\n        // try to solve the board\n        if (solver.solve()) {\n\n            // grab the solved board state\n            int[][] solutionGrid \u003d solver.getSolution();\n\n            for(int i \u003d 0; i \u003c width; i++) {\n                for (int j \u003d 0; j \u003c width; j++) {\n                    // Update each cell with its solution value\n                    cells[(i * width) + j].updateSolution(solutionGrid[i][j]);\n                }\n            }\n        } else {\n            // Hopefully we never get here, as runescape should always generate a solvable board.\n            log.error(\"Unsolvable board state\");\n        }\n    }\n\n    /**\n     * Get cell at a specific offset\n     * @param   index   offset\n     * @return  RunedokuCell at offset\n     */\n    public RunedokuCell getCell(int index) {\n        if(index \u003e\u003d 0 \u0026\u0026 index \u003c cells.length) {\n            return cells[index];\n        } else {\n            return null;\n        }\n    }\n\n    /**\n     * Create a new Runedoku board based on the given widget\n     * @param containerWidget A runedoku UI widget\n     */\n    public RunedokuBoard(Widget containerWidget, boolean solve) {\n        this.containerWidget \u003d containerWidget;\n\n        Widget[] children \u003d containerWidget.getChildren();\n\n        if(children !\u003d null) {\n            if(children.length \u003d\u003d 81) {\n                width \u003d 9;\n                cells \u003d new RunedokuCell[81];\n\n                for(int i \u003d 0; i \u003c children.length; i++) {\n                    cells[i] \u003d new RunedokuCell(width, i);\n                }\n\n                rowNumbers \u003d new int[9][9];\n\n                colNumbers \u003d new int[9][9];\n                boxNumbers \u003d new int[9][9];\n            } else if(children.length \u003d\u003d 16) {\n                width \u003d 4;\n                cells \u003d new RunedokuCell[16];\n\n                for(int i \u003d 0; i \u003c children.length; i++) {\n                    cells[i] \u003d new RunedokuCell(width,i);\n                }\n\n                rowNumbers \u003d new int[4][4];\n                colNumbers \u003d new int[4][4];\n                boxNumbers \u003d new int[4][4];\n            } else {\n                log.error(String.format(\"constructor: invalid board size %d\", children.length));\n                width \u003d 0;\n                cells \u003d null;\n                rowNumbers \u003d null;\n                colNumbers \u003d null;\n                boxNumbers \u003d null;\n            }\n            if (solve) {\n                if (cells !\u003d null) {\n                    int[][] solutionBuilder \u003d new int[9][9];\n\n                    for(int i \u003d 0; i \u003c children.length; i++) {\n                        cells[i].updateFromWidget(children[i]);\n                        int sudokuIndex \u003d cells[i].getSudokuNumber() - 1;\n\n                        solutionBuilder[cells[i].getRowNumber()][cells[i].getColumnNumber()] \u003d sudokuIndex + 1;\n                    }\n                    solver \u003d new SudokuSolver(solutionBuilder);\n\n                    // this should never error because runescape should always generate a solvable board\n                    solveBoard();\n                }\n            }\n        } else {\n            log.error(\"render: containerWidget children array is null\");\n            width \u003d 0;\n            cells \u003d null;\n            rowNumbers \u003d null;\n            colNumbers \u003d null;\n            boxNumbers \u003d null;\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\github\\adituv\\runedokuplugin\\RunedokuBoard.java"},{"fileName":"RunedokuCell.java","content":"package com.github.adituv.runedokuplugin;\n\nimport lombok.Getter;\nimport lombok.Setter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.widgets.Widget;\n\n@Getter\n@Slf4j\npublic class RunedokuCell {\n    private RunedokuRune rune;\n    private int sudokuNumber;\n    private int solutionNumber;\n    private Widget widget;\n\n    private final int columnNumber;\n    private final int rowNumber;\n    private final int boxNumber;\n\n    @Setter\n    private boolean[] marks \u003d new boolean[9];\n\n    /**\n     * Data structure containing a rune, mark, or solution at a position\n     * @param boardWidth size of the board 9 or 4\n     * @param cellId index of cell, translates to row and column\n     */\n    public RunedokuCell(int boardWidth, int cellId) {\n        this.columnNumber \u003d cellId % boardWidth;\n        this.rowNumber \u003d cellId / boardWidth;\n\n        if (boardWidth \u003d\u003d 9) {\n            this.boxNumber \u003d 3*(rowNumber/3) + (columnNumber/3);\n        } else if(boardWidth \u003d\u003d 4) {\n            this.boxNumber \u003d 2*(rowNumber/2) + (columnNumber/2);\n        } else {\n            log.error(String.format(\"constructor: invalid boardWidth %d\", boardWidth));\n            this.boxNumber \u003d 0;\n        }\n    }\n\n    /**\n     * Update cell from UI widget\n     * @param w Widget of a specific cell in the board\n     */\n    public void updateFromWidget(Widget w) {\n        this.widget \u003d w;\n        this.rune \u003d RunedokuRune.getByItemId(w.getItemId());\n        this.sudokuNumber \u003d this.rune !\u003d null ? rune.getSudokuNumber() : 0;\n    }\n\n    /**\n     * Literally a setter\n     * Set the value of this cell that would lead to a solved board state\n     * @param solution integer value of solution to cell\n     */\n    public void updateSolution(int solution) {\n        solutionNumber \u003d solution;\n    }\n}\n","filePath":"src\\main\\java\\com\\github\\adituv\\runedokuplugin\\RunedokuCell.java"},{"fileName":"RunedokuConfig.java","content":"package com.github.adituv.runedokuplugin;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\nimport java.awt.*;\n\nimport static com.github.adituv.runedokuplugin.RunedokuConstants.RUNEDOKU_CONFIG_GROUP;\n\n@ConfigGroup(RUNEDOKU_CONFIG_GROUP)\npublic interface RunedokuConfig extends Config\n{\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showSolution\",\n\t\t\tname \u003d \"Show solution\",\n\t\t\tdescription \u003d \"Lazy\"\n\t)\n\tdefault boolean showSolution() { return true; }\n\t@ConfigItem(\n\t\tkeyName \u003d \"useNumbers\",\n\t\tname \u003d \"Show numbers over runes\",\n\t\tdescription \u003d \"Whether to overlay a number over each rune to help input into a sudoku solver\"\n\t)\n\tdefault boolean useNumbers() { return false; }\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"markOnShift\",\n\t\tname \u003d \"Shift-Mark\",\n\t\tdescription \u003d \"Hold shift to make mark the left click menu option\"\n\t)\n\tdefault boolean markOnShift() { return true;}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"foregroundColor\",\n\t\tname \u003d \"Foreground color\",\n\t\tdescription \u003d \"The default foreground color for the overlay\"\n\t)\n\tdefault Color foregroundColor() { return Color.YELLOW; }\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"errorColor\",\n\t\tname \u003d \"Error color\",\n\t\tdescription \u003d \"The color used to highlight errors in the overlay\"\n\t)\n\tdefault Color errorColor() { return Color.RED; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"solutionColor\",\n\t\t\tname \u003d \"Solution color\",\n\t\t\tdescription \u003d \"The color used to highlight correct solution in the overlay\"\n\t)\n\tdefault Color solutionColor() { return Color.GREEN; }\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"outlineColor\",\n\t\tname \u003d \"Outline color\",\n\t\tdescription \u003d \"The outline color for text in the overlay\"\n\t)\n\tdefault Color outlineColor() { return Color.BLACK; }\n}\n","filePath":"src\\main\\java\\com\\github\\adituv\\runedokuplugin\\RunedokuConfig.java"},{"fileName":"RunedokuConstants.java","content":"package com.github.adituv.runedokuplugin;\n\nimport net.runelite.api.widgets.WidgetInfo;\n\npublic final class RunedokuConstants {\n    public static final String RUNEDOKU_CONFIG_GROUP \u003d \"runedoku\";\n\n    public static final int RUNEDOKU_WIDGET_GROUP_ID \u003d 292;\n    public static final int RUNEDOKU_CONTAINER_WIDGET_ID \u003d WidgetInfo.PACK(RUNEDOKU_WIDGET_GROUP_ID, 0);\n    public static final int RUNEDOKU_BOARD_WIDGET_ID \u003d WidgetInfo.PACK(RUNEDOKU_WIDGET_GROUP_ID,13);\n    public static final int RUNEDOKU_RUNE_WIDGET_ID \u003d WidgetInfo.PACK(RUNEDOKU_WIDGET_GROUP_ID,9);\n    public static final int RUNEDOKU_BUTTON_WIDGET_ID \u003d WidgetInfo.PACK(RUNEDOKU_WIDGET_GROUP_ID,10);\n    public static final int RUNEDOKU_EXIT_WIDGET_ID \u003d WidgetInfo.PACK(RUNEDOKU_WIDGET_GROUP_ID, 15);\n    public static final int RUNEDOKU_BOARD_CLICK_WIDGET_ID \u003d WidgetInfo.PACK(RUNEDOKU_WIDGET_GROUP_ID, 14);\n}\n","filePath":"src\\main\\java\\com\\github\\adituv\\runedokuplugin\\RunedokuConstants.java"},{"fileName":"RunedokuOverlay.java","content":"package com.github.adituv.runedokuplugin;\n\nimport com.google.inject.Inject;\nimport lombok.AccessLevel;\nimport lombok.Setter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.overlay.*;\nimport net.runelite.client.util.AsyncBufferedImage;\nimport net.runelite.client.util.ColorUtil;\n\nimport java.awt.*;\nimport java.awt.geom.Rectangle2D;\nimport java.awt.image.RescaleOp;\n\nimport static com.github.adituv.runedokuplugin.RunedokuConstants.*;\n\n@Setter\n@Slf4j\npublic class RunedokuOverlay extends Overlay {\n    private final Client client;\n\n    @Setter(AccessLevel.NONE)\n    private boolean isActive;\n\n    @Setter(AccessLevel.NONE)\n    private RunedokuBoard board;\n\n    @Setter(AccessLevel.NONE)\n    private RunedokuRune selectedRune;\n\n    private boolean shouldDrawNumbers;\n    private boolean shouldShowSolution;\n    private Color foregroundColor;\n    private Color outlineColor;\n    private Color errorColor;\n    private Color solutionColor;\n    private final AsyncBufferedImage[] runeImages;\n\n    private final Font bigFont;\n    private final Font markFont;\n\n    private final int BOX_X_OFFSET \u003d -2;\n    private final int BOX_Y_OFFSET \u003d 0;\n    private final int BOX_WIDTH_OFFSET \u003d -1;\n    private final int BOX_HEIGHT_OFFSET \u003d -1;\n\n    private final float BIG_FONT_SIZE \u003d 24.0f;\n    private final float BIG_FONT_X_OFFSET \u003d -2.5f;\n\n    /**\n     * \u0027main\u0027 class to determine what to draw on screen for Runedoku.\n     * @param graphics 2D graphics object handler for runelite\n     * @return a Dimension. I think this is like a layer, but I am not sure\n     */\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        if(this.isActive) {\n            final Widget containerWidget \u003d client.getWidget(RUNEDOKU_CONTAINER_WIDGET_ID);\n            if(containerWidget \u003d\u003d null || containerWidget.isHidden()) {\n                return null;\n            }\n\n            final int boardWidth \u003d this.board.getWidth();\n\n            if(!(boardWidth \u003d\u003d 4 || boardWidth \u003d\u003d 9)) {\n                log.error(String.format(\"render: Invalid board width %d\", boardWidth));\n            }\n\n            final Widget boardWidget \u003d client.getWidget(RUNEDOKU_BOARD_WIDGET_ID);\n            final Widget runeWidget \u003d client.getWidget(RUNEDOKU_RUNE_WIDGET_ID);\n\n            final FontMetrics bigFontMetrics \u003d graphics.getFontMetrics(bigFont);\n            final FontMetrics markFontMetrics \u003d graphics.getFontMetrics(markFont);\n\n            if(boardWidget \u003d\u003d null) {\n                log.error(\"render: boardWidget is null\");\n                return null;\n            }\n            if(runeWidget \u003d\u003d null) {\n                log.error(\"render: runeWidget is null\");\n                return null;\n            }\n\n            final OutlineTextComponent bigNumberText \u003d new OutlineTextComponent();\n            bigNumberText.setOutline(2,outlineColor);\n            bigNumberText.setColor(foregroundColor);\n            bigNumberText.setFont(bigFont);\n\n            final OutlineTextComponent markNumberText \u003d new OutlineTextComponent();\n            markNumberText.setOutline(1,outlineColor);\n            markNumberText.setColor(foregroundColor);\n            markNumberText.setFont(markFont);\n\n            // innocent until proven guilty\n            boolean solved \u003d true;\n            for(RunedokuCell c : board.getCells()) {\n                if(c.getSudokuNumber() \u003e 0) {\n                    // Show errors in sudoku gameplay\n                    if(board.cellHasClash(c)) {\n                        // This rune clashes with another rune.  Highlight it with an error box\n                        drawErrorBox(graphics, c.getWidget());\n                    }\n                    // Show numbers over runes for clarity\n                    if(shouldDrawNumbers) {\n                        final Widget w \u003d c.getWidget();\n                        final String numberAsText \u003d String.format(\"%d\", c.getSudokuNumber());\n\n                        Rectangle2D stringBounds \u003d bigFontMetrics.getStringBounds(numberAsText,graphics);\n                        double x \u003d w.getBounds().getCenterX() - stringBounds.getCenterX() + BIG_FONT_X_OFFSET;\n                        double y \u003d w.getBounds().getCenterY() - stringBounds.getCenterY();\n                        Point location \u003d new Point((int)x,(int)y);\n\n                        bigNumberText.setText(numberAsText);\n                        bigNumberText.setPosition(location);\n                        bigNumberText.render(graphics);\n                    }\n                } else {\n\n                    // If there isn\u0027t a number in the cell, draw pencil marks\n                    Rectangle cellBounds \u003d c.getWidget().getBounds();\n                    int xPos \u003d cellBounds.x + BOX_X_OFFSET;\n                    int yPos \u003d cellBounds.y + BOX_Y_OFFSET + markFontMetrics.getHeight();\n                    cellBounds.x +\u003d BOX_X_OFFSET + 1;\n                    cellBounds.y +\u003d BOX_Y_OFFSET + 1;\n                    cellBounds.width +\u003d BOX_WIDTH_OFFSET - 1;\n                    cellBounds.height +\u003d BOX_HEIGHT_OFFSET - 1;\n\n                    StringBuilder marks \u003d new StringBuilder(\"\");\n\n                    for(int i \u003d 0; i \u003c 9; i++) {\n                        if(c.getMarks()[i]) {\n                            marks.append(i+1);\n                            if(marks.length() \u003d\u003d 5) {\n                                // Render first line and start again\n                                markNumberText.setText(marks.toString());\n                                markNumberText.setPosition(new Point(xPos, yPos));\n                                Dimension textBounds \u003d markNumberText.render(graphics);\n\n                                yPos +\u003d textBounds.height;\n\n                                marks \u003d new StringBuilder(\"\");\n                            }\n\n                            markNumberText.setText(marks.toString());\n                            markNumberText.setPosition(new Point(xPos, yPos));\n                            markNumberText.render(graphics);\n                        }\n                    }\n\n                    // Show the solution values and highlight current rune solutions\n                    if (shouldShowSolution) {\n                        if (c.getRune() !\u003d null) {\n                            if (c.getRune().getSudokuNumber() !\u003d c.getSolutionNumber()) {\n                                solved \u003d false;\n                            }\n                        } else {\n                            solved \u003d false;\n                        }\n                        final Color tintColor \u003d new Color(128,128,153,255);\n                        final float[] tintChannels \u003d new float[]\n                                { tintColor.getRed()/255f, tintColor.getGreen()/255f,\n                                        tintColor.getBlue()/255f, tintColor.getAlpha()/255f\n                                };\n                        final RescaleOp darkenImageOp \u003d new RescaleOp(tintChannels, new float[]{0f,0f,0f,0f}, null);\n                        Rectangle bounds \u003d c.getWidget().getBounds();\n                        graphics.drawImage(runeImages[c.getSolutionNumber()], darkenImageOp, bounds.x, bounds.y);\n\n                        if (this.selectedRune !\u003d null) {\n                            if (board.cellHasSolution(c) \u0026\u0026 c.getSolutionNumber() \u003d\u003d this.selectedRune.getSudokuNumber()) {\n                                drawSolutionBox(graphics, c.getWidget());\n                            }\n                        }\n\n                        if(shouldDrawNumbers) {\n                            final Widget w \u003d c.getWidget();\n                            final String numberAsText \u003d String.format(\"%d\", c.getSolutionNumber());\n\n                            Rectangle2D stringBounds \u003d bigFontMetrics.getStringBounds(numberAsText, graphics);\n                            double x \u003d w.getBounds().getCenterX() - stringBounds.getCenterX() + BIG_FONT_X_OFFSET;\n                            double y \u003d w.getBounds().getCenterY() - stringBounds.getCenterY();\n                            Point location \u003d new Point((int) x, (int) y);\n\n                            bigNumberText.setText(numberAsText);\n                            bigNumberText.setPosition(location);\n                            bigNumberText.render(graphics);\n                        }\n                    } else {\n                        solved \u003d false;\n                    }\n                }\n            }\n\n            if (solved) {\n                drawComplete(graphics, client.getWidget(RUNEDOKU_BUTTON_WIDGET_ID));\n            }\n\n            Widget[] children \u003d runeWidget.getChildren();\n\n            if(children \u003d\u003d null) {\n                log.error(\"render: runeWidget children array is null\");\n                return null;\n            }\n\n            for (Widget w : children) {\n                if(shouldDrawNumbers) {\n                    RunedokuRune rune \u003d RunedokuRune.getByItemId(w.getItemId());\n\n                    if(rune !\u003d null) {\n                        String numberAsText \u003d String.format(\"%d\",rune.getSudokuNumber());\n\n                        Rectangle2D stringBounds \u003d bigFontMetrics.getStringBounds(numberAsText,graphics);\n                        double x \u003d w.getBounds().getCenterX() - stringBounds.getCenterX() + BIG_FONT_X_OFFSET;\n                        double y \u003d w.getBounds().getCenterY() - stringBounds.getCenterY();\n                        Point location \u003d new Point((int)x,(int)y);\n\n                        bigNumberText.setText(numberAsText);\n                        bigNumberText.setPosition(location);\n                        bigNumberText.render(graphics);\n                    }\n                }\n            }\n        }\n        return null;\n    }\n\n    private Point getMarkLocation(int i, Graphics2D graphics, Rectangle cellBounds) {\n        final FontMetrics fontMetrics \u003d graphics.getFontMetrics(markFont);\n        double x \u003d -1.0;\n        double y \u003d -1.0;\n        int boardWidth \u003d board.getWidth();\n        Rectangle2D stringBounds \u003d fontMetrics.getStringBounds(String.format(\"%d\", i+1), graphics);\n\n        if(boardWidth \u003d\u003d 4) {\n            if(i % 2 \u003d\u003d 0) {\n                x \u003d cellBounds.x;\n            } else {\n                x \u003d cellBounds.getMaxX() - stringBounds.getMaxX();\n            }\n\n            if(i / 2 \u003d\u003d 0) {\n                y \u003d cellBounds.y + stringBounds.getHeight();\n            } else {\n                y \u003d cellBounds.getMaxY() + fontMetrics.getDescent();\n            }\n        } else if(boardWidth \u003d\u003d 9) {\n            if(i % 3 \u003d\u003d 0) {\n                x \u003d cellBounds.x;\n            } else if(i % 3 \u003d\u003d 1) {\n                x \u003d cellBounds.getCenterX() - stringBounds.getCenterX();\n            } else {\n                x \u003d cellBounds.getMaxX() - stringBounds.getMaxX();\n            }\n\n            if(i / 3 \u003d\u003d 0) {\n                y \u003d cellBounds.y + stringBounds.getHeight();\n            } else if(i / 3 \u003d\u003d 1) {\n                y \u003d cellBounds.getCenterY() - stringBounds.getCenterY() + fontMetrics.getDescent()/2.0;\n            } else {\n                y \u003d cellBounds.getMaxY() + fontMetrics.getDescent();\n            }\n        }\n\n        return new Point((int)x,(int)y);\n    }\n\n    public void activate(RunedokuBoard board) {\n        this.board \u003d board;\n        this.isActive \u003d true;\n    }\n\n    public void deactivate() {\n        this.board \u003d null;\n        this.isActive \u003d false;\n    }\n\n    private void drawErrorBox(Graphics2D graphics, Widget w) {\n\n        graphics.setColor(ColorUtil.colorWithAlpha(errorColor, 0xFF));\n        graphics.setStroke(new BasicStroke(2.0f));\n\n        Rectangle bounds \u003d w.getBounds();\n        graphics.drawRect(bounds.x + BOX_X_OFFSET,\n                bounds.y + BOX_Y_OFFSET,\n                bounds.width + BOX_WIDTH_OFFSET,\n                bounds.height + BOX_HEIGHT_OFFSET\n        );\n    }\n\n    private void drawSolutionBox(Graphics2D graphics, Widget w) {\n        graphics.setColor(ColorUtil.colorWithAlpha(solutionColor, 0xFF));\n        graphics.setStroke(new BasicStroke(2.0f));\n\n        Rectangle bounds \u003d w.getBounds();\n        graphics.drawRect(bounds.x + BOX_X_OFFSET,\n                bounds.y + BOX_Y_OFFSET,\n                bounds.width + BOX_WIDTH_OFFSET,\n                bounds.height + BOX_HEIGHT_OFFSET\n        );\n    }\n\n    private void drawComplete(Graphics2D graphics, Widget w) {\n        graphics.setColor(ColorUtil.colorWithAlpha(solutionColor, 0xFF));\n        graphics.setStroke(new BasicStroke(2.0f));\n\n        Rectangle bounds \u003d w.getBounds();\n        graphics.drawRect(bounds.x + BOX_X_OFFSET,\n                bounds.y + BOX_Y_OFFSET,\n                bounds.width + BOX_WIDTH_OFFSET,\n                bounds.height + BOX_HEIGHT_OFFSET\n        );\n    }\n\n    @Inject\n    public RunedokuOverlay(final RunedokuPlugin plugin, Client client, final ItemManager itemManager) {\n        super(plugin);\n        this.client \u003d client;\n        this.bigFont \u003d FontManager.getDefaultBoldFont().deriveFont(BIG_FONT_SIZE);\n        this.markFont \u003d FontManager.getRunescapeSmallFont();\n\n        setPosition(OverlayPosition.DETACHED);\n        setLayer(OverlayLayer.ABOVE_WIDGETS);\n        setPriority(OverlayPriority.MED);\n\n        // Preload images for runes\n        this.runeImages \u003d new AsyncBufferedImage[10];\n        for(int i \u003d 1; i \u003c 10; i++) {\n            this.runeImages[i] \u003d itemManager.getImage(RunedokuRune.getBySudokuNumber(i).getItemId());\n        }\n    }\n\n    /**\n     * Setter for the currently selected rune\n     * @param rune RunedokuRune\n     */\n    public void updateSelectedRune(RunedokuRune rune) {\n        this.selectedRune \u003d rune;\n    }\n}\n","filePath":"src\\main\\java\\com\\github\\adituv\\runedokuplugin\\RunedokuOverlay.java"},{"fileName":"RunedokuPlugin.java","content":"package com.github.adituv.runedokuplugin;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.*;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.api.MenuEntry;\n\nimport static com.github.adituv.runedokuplugin.RunedokuConstants.*;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Runedoku Helper\"\n)\npublic class RunedokuPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate RunedokuConfig config;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate RunedokuOverlay overlay;\n\n\tprivate RunedokuRune selectedRune \u003d RunedokuRune.WATER_RUNE;\n\tprivate String selectedRuneText \u003d \"\u003ccol\u003dff9040\u003eWater rune\u003c/col\u003e\";\n\tprivate RunedokuBoard board \u003d null;\n\n\tprivate boolean markOnShift;\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged configChanged) {\n\t\tif(configChanged.getGroup().equals(RUNEDOKU_CONFIG_GROUP)) {\n\t\t\tswitch (configChanged.getKey()) {\n\t\t\t\tcase \"useNumbers\":\n\t\t\t\t\toverlay.setShouldDrawNumbers(config.useNumbers());\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"showSolution\":\n\t\t\t\t\toverlay.setShouldShowSolution(config.showSolution());\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"solutionColor\":\n\t\t\t\t\toverlay.setSolutionColor(config.solutionColor());\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"foregroundColor\":\n\t\t\t\t\toverlay.setForegroundColor(config.foregroundColor());\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"outlineColor\":\n\t\t\t\t\toverlay.setOutlineColor(config.outlineColor());\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"errorColor\":\n\t\t\t\t\toverlay.setErrorColor(config.errorColor());\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"markOnShift\":\n\t\t\t\t\tthis.markOnShift \u003d config.markOnShift();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onWidgetLoaded(WidgetLoaded widgetLoaded) {\n\t\tif(widgetLoaded.getGroupId() \u003d\u003d RUNEDOKU_WIDGET_GROUP_ID) {\n\t\t\tlog.debug(\"Runedoku widget loaded\");\n\t\t\tthis.selectedRune \u003d RunedokuRune.WATER_RUNE;\n\n\t\t\tclientThread.invokeLater(() -\u003e {\n\t\t\t\tWidget boardWidget \u003d client.getWidget(RUNEDOKU_BOARD_WIDGET_ID);\n\t\t\t\tif (boardWidget !\u003d null) {\n\t\t\t\t\tthis.board \u003d new RunedokuBoard(boardWidget, config.showSolution());\n\t\t\t\t\tthis.board.updateCells();\n\t\t\t\t\tthis.overlay.activate(board);\n\t\t\t\t\tthis.overlay.updateSelectedRune(this.selectedRune);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onWidgetClosed(WidgetClosed widgetClosed) {\n\t\tif(widgetClosed.getGroupId() \u003d\u003d RUNEDOKU_WIDGET_GROUP_ID) {\n\t\t\tboard \u003d null;\n\t\t\toverlay.deactivate();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onCanvasSizeChanged(CanvasSizeChanged canvasSizeChanged) {\n\t    if (board !\u003d null) {\n\t\t\tboard.updateCells();\n\t\t\tif (config.showSolution()) {\n\t\t\t\tthis.board.solveBoard();\n\t\t\t}\n\t\t}\n\t}\n\n\t// Must run before Inventory Tags\n\t@Subscribe(priority \u003d -1.0f)\n\tpublic void onMenuOptionClicked(MenuOptionClicked menuOptionClicked) {\n\t\tif(menuOptionClicked.getWidgetId() \u003d\u003d RUNEDOKU_RUNE_WIDGET_ID) {\n\t\t\tclientThread.invokeLater(() -\u003e {\n\t\t\t\t// Update the currently selected rune\n\t\t\t\tWidget w \u003d client.getWidget(menuOptionClicked.getWidgetId());\n\n\t\t\t\tfor(Widget cw : w.getChildren()) {\n\t\t\t\t\tif(cw.getBorderType() \u003d\u003d 2) {\n\t\t\t\t\t\tthis.selectedRune \u003d RunedokuRune.getByItemId(cw.getItemId());\n\t\t\t\t\t\tthis.overlay.updateSelectedRune(this.selectedRune);\n\t\t\t\t\t\tString name \u003d cw.getName();\n\t\t\t\t\t\tif(name.isEmpty()) {\n\t\t\t\t\t\t\tname\u003d\"\u003ccol\u003dff9040\u003eNone\u003c/col\u003e\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.selectedRuneText \u003d name;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t} else if(menuOptionClicked.getWidgetId() \u003d\u003d RUNEDOKU_BOARD_CLICK_WIDGET_ID) {\n\t\t\tif(menuOptionClicked.getMenuOption().equals(\"Mark\")) {\n\t\t\t\tmenuOptionClicked.consume();\n\n\t\t\t\tint cellId \u003d menuOptionClicked.getActionParam();\n\t\t\t\tint sudokuIndex \u003d this.selectedRune.getSudokuNumber()-1;\n\n\t\t\t\tlog.debug(String.format(\"Marking cell\u003d%d num\u003d%d\", cellId, sudokuIndex+1));\n\n\t\t\t\tif(sudokuIndex \u003e\u003d 0) {\n\t\t\t\t\tRunedokuCell c \u003d board.getCell(cellId);\n\t\t\t\t\tboolean[] marks \u003d c.getMarks();\n\t\t\t\t\tmarks[sudokuIndex] \u003d !marks[sudokuIndex];\n\t\t\t\t\tc.setMarks(marks);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tclientThread.invokeLater(() -\u003e board.updateCells());\n\t\t\t}\n\t\t}\n\t}\n\n\t// Manually create an extra menu entry for pencil marks when the right-click menu is opened\n\t@Subscribe\n\tpublic void onMenuOpened(MenuOpened menuOpened) {\n\t\tint widgetId \u003d menuOpened.getFirstEntry().getParam1();\n\t\tint widgetIndex \u003d menuOpened.getFirstEntry().getParam0();\n\n\t\tif(widgetId \u003d\u003d RUNEDOKU_BOARD_CLICK_WIDGET_ID \u0026\u0026 selectedRune !\u003d null) {\n\t\t\tWidget cell \u003d client.getWidget(RUNEDOKU_BOARD_WIDGET_ID).getChild(widgetIndex);\n\t\t\tif(cell.getBorderType() \u003d\u003d 2) {\n\t\t\t\t// If it\u0027s a fixed rune, don\u0027t show the mark option\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tMenuEntry markEntry \u003d makeMarkMenuEntry(widgetId, widgetIndex);\n\n\t\t\tMenuEntry[] newEntries \u003d insertMarkMenuEntry(markEntry);\n\n\t\t\tclient.setMenuEntries(newEntries);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onMenuEntryAdded(MenuEntryAdded menuEntryAdded) {\n\t\tif(menuEntryAdded.getActionParam1() !\u003d RUNEDOKU_BOARD_CLICK_WIDGET_ID || client.isMenuOpen()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif(markOnShift \u0026\u0026 client.isKeyPressed(KeyCode.KC_SHIFT)) {\n\t\t\tif(menuEntryAdded.getOption().startsWith(\"Place\")) {\n\t\t\t\tMenuEntry[] menuEntries \u003d client.getMenuEntries();\n\n\t\t\t\tfor(MenuEntry entry : menuEntries) {\n\t\t\t\t\tif(entry.getOption().equals(menuEntryAdded.getOption())) {\n\n\t\t\t\t\t\t// Our onMenuOptionClicked code consumes the click event for the menu option \"Mark\"\n\t\t\t\t\t\t// so we can just change the option and target to get the desired functionality\n\t\t\t\t\t\tentry.setOption(\"Mark\");\n\t\t\t\t\t\tentry.setTarget(this.selectedRuneText);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tclient.setMenuEntries(menuEntries);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate MenuEntry makeMarkMenuEntry(int widgetId, int widgetIndex) {\n\t\treturn client.createMenuEntry(MenuAction.CC_OP.getId())\n\t\t\t.setOption(\"Mark\")\n\t\t\t.setTarget(selectedRuneText)\n\t\t\t.setType(MenuAction.CC_OP)\n\t\t\t.setParam0(widgetIndex)\n\t\t\t.setParam1(widgetId);\n\t}\n\n\tprivate MenuEntry[] insertMarkMenuEntry(MenuEntry markEntry) {\n\t\tMenuEntry[] oldEntries \u003d client.getMenuEntries();\n\t\tMenuEntry[] newEntries \u003d new MenuEntry[oldEntries.length + 1];\n\n\t\tSystem.arraycopy(oldEntries, 0, newEntries, 0, oldEntries.length);\n\n\t\tif(markOnShift \u0026\u0026 client.isKeyPressed(KeyCode.KC_SHIFT)) {\n\t\t\tnewEntries[newEntries.length-1] \u003d markEntry;\n\t\t} else {\n\t\t\tnewEntries[newEntries.length-2] \u003d markEntry;\n\t\t\tnewEntries[newEntries.length-1] \u003d oldEntries[oldEntries.length-1];\n\t\t}\n\n\t\treturn newEntries;\n\t}\n\n\tprotected void loadConfig() {\n\t\toverlay.setShouldDrawNumbers(config.useNumbers());\n\t\toverlay.setShouldShowSolution(config.showSolution());\n\t\toverlay.setSolutionColor(config.solutionColor());\n\t\toverlay.setForegroundColor(config.foregroundColor());\n\t\toverlay.setOutlineColor(config.outlineColor());\n\t\toverlay.setErrorColor(config.errorColor());\n\t\tthis.markOnShift \u003d config.markOnShift();\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception {\n\t\tloadConfig();\n\n\t\toverlayManager.add(overlay);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception {\n\t\toverlayManager.remove(overlay);\n\t}\n\n\t@Provides\n\tRunedokuConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(RunedokuConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\github\\adituv\\runedokuplugin\\RunedokuPlugin.java"},{"fileName":"RunedokuRune.java","content":"package com.github.adituv.runedokuplugin;\n\npublic enum RunedokuRune {\n    WATER_RUNE(555,1),\n    FIRE_RUNE(554,2),\n    EARTH_RUNE(557,3),\n    AIR_RUNE(556,4),\n    MIND_RUNE(558,5),\n    BODY_RUNE(559,6),\n    LAW_RUNE(563,7),\n    CHAOS_RUNE(562,8),\n    DEATH_RUNE(560,9);\n\n    private final int itemId;\n    private final int sudokuNumber;\n\n    RunedokuRune(int itemID, int sudokuNumber) {\n        this.itemId \u003d itemID;\n        this.sudokuNumber \u003d sudokuNumber;\n    }\n\n    int getItemId() {\n        return this.itemId;\n    }\n\n    int getSudokuNumber() {\n        return this.sudokuNumber;\n    }\n\n    public static RunedokuRune getBySudokuNumber(int sudokuNumber) {\n        for(RunedokuRune rune : RunedokuRune.values()) {\n            if(rune.sudokuNumber \u003d\u003d sudokuNumber) {\n                return rune;\n            }\n        }\n        return null;\n    }\n\n    public static RunedokuRune getByItemId(int itemId) {\n        for(RunedokuRune rune : RunedokuRune.values()) {\n            if(rune.getItemId() \u003d\u003d itemId) {\n                return rune;\n            }\n        }\n        return null;\n    }\n\n\n}\n","filePath":"src\\main\\java\\com\\github\\adituv\\runedokuplugin\\RunedokuRune.java"},{"fileName":"SudokuSolver.java","content":"package com.github.adituv.runedokuplugin;\n\n// Naive backtracking sudoku solver\npublic class SudokuSolver {\n\tprivate final int size;\n\n\t// The initial puzzle grid\n\tprivate final int[][] puzzle;\n\n\t// The working copy of the puzzle\n\tprivate final int[][] board;\n\n\tprivate boolean additionIsValid(int x, int y, int n) {\n\t\tfor(int i \u003d 0; i \u003c size; i++) {\n\t\t\tif(board[y][i] \u003d\u003d n) {\n\t\t\t\t// Number already present in row\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor(int j \u003d 0; j \u003c size; j++) {\n\t\t\tif(board[j][x] \u003d\u003d n) {\n\t\t\t\t// Number already present in column\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor(int k \u003d 0; k \u003c size; k++) {\n\t\t\tint i,j;\n\n\t\t\tif(size \u003d\u003d 4) {\n\t\t\t\ti \u003d (x/2)*2 + k%2;\n\t\t\t\tj \u003d (y/2)*2 + k/2;\n\t\t\t}\n\t\t\telse {\n\t\t\t\ti \u003d (x/3)*3 + k%3;\n\t\t\t\tj \u003d (y/3)*3 + k/3;\n\t\t\t}\n\n\t\t\tif(board[j][i] \u003d\u003d n) {\n\t\t\t\t// Number already present in box\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tpublic int[][] getSolution() {\n\t\treturn board;\n\t}\n\n\tpublic boolean solve() {\n\t\tfor(int j \u003d 0; j \u003c size; j++) {\n\t\t\tfor(int i \u003d 0; i \u003c size; i++) {\n\t\t\t\tif(board[j][i] \u003d\u003d 0) {\n\t\t\t\t\tfor(int n \u003d 1; n \u003c\u003d size; n++) {\n\t\t\t\t\t\tif(additionIsValid(i,j,n)) {\n\t\t\t\t\t\t\tboard[j][i] \u003d n;\n\n\t\t\t\t\t\t\tif(solve()) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tboard[j][i] \u003d 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// We have tried every number for this cell and none are valid\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tpublic SudokuSolver(int[][] puzzle) {\n\t\tthis.size \u003d puzzle.length;\n\t\tthis.puzzle \u003d puzzle;\n\t\tthis.board \u003d new int[size][size];\n\n\t\tfor(int j \u003d 0; j \u003c size; j++) {\n\t\t\tfor(int i \u003d 0; i \u003c size; i++) {\n\t\t\t\tthis.board[j][i] \u003d puzzle[j][i];\n\t\t\t}\n\t\t}\n\t}\n}","filePath":"src\\main\\java\\com\\github\\adituv\\runedokuplugin\\SudokuSolver.java"},{"fileName":"RunedokuPluginTest.java","content":"package com.github.adituv.runedokuplugin;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class RunedokuPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(RunedokuPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\github\\adituv\\runedokuplugin\\RunedokuPluginTest.java"}]},{"commit":"5c3c27b571bb9a67b5a5b800c6b86919d909d8e8","repository":"https://github.com/Logical-sh/ship-renamer.git","internalName":"ship-renamer","files":[{"fileName":"ShipRenamerConfig.java","content":"package com.logical;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"shiprenamer\")\npublic interface ShipRenamerConfig extends Config\n{\n\t@ConfigItem(\n\t\tkeyName \u003d \"ship1name\",\n\t\tname \u003d \"Ship 1\u0027s Name\",\n\t\tdescription \u003d \"The name for the first ship\"\n\t)\n\tdefault String ship1name()\n\t{\n\t\treturn \"SS Earl Grey\";\n\t}\n\n\t@ConfigItem(\n\tkeyName \u003d \"ship2name\",\n\tname \u003d \"Ship 2\u0027s Name\",\n\tdescription \u003d \"The name for the second ship\"\n\t)\n\tdefault String ship2name()\n\t{\n\t\treturn \"Indiana Harbor\";\n\t}\n\n\t@ConfigItem(\n\tkeyName \u003d \"ship3name\",\n\tname \u003d \"Ship 3\u0027s Name\",\n\tdescription \u003d \"The name for the third ship\"\n\t)\n\tdefault String ship3name()\n\t{\n\t\treturn \"Tregurtha\";\n\t}\n\n\t@ConfigItem(\n\tkeyName \u003d \"ship4name\",\n\tname \u003d \"Ship 4\u0027s Name\",\n\tdescription \u003d \"The name for the fourth ship\"\n\t)\n\tdefault String ship4name()\n\t{\n\t\treturn \"Boaty McBoatface\";\n\t}\n\n\t@ConfigItem(\n\tkeyName \u003d \"ship5name\",\n\tname \u003d \"Ship 5\u0027s Name\",\n\tdescription \u003d \"The name for the fifth ship\"\n\t)\n\tdefault String ship5name()\n\t{\n\t\treturn \"Titanic 2: On Fire\";\n\t}\n}\n","filePath":"src\\main\\java\\com\\logical\\ShipRenamerConfig.java"},{"fileName":"ShipRenamerPlugin.java","content":"package com.logical;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.ScriptID;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.ScriptPostFired;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.api.events.WidgetLoaded;\nimport net.runelite.api.gameval.InterfaceID;\nimport net.runelite.api.gameval.VarbitID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetType;\nimport net.runelite.api.gameval.VarClientID;\nimport net.runelite.api.gameval.VarPlayerID;\nimport net.runelite.api.gameval.DBTableID;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Ship Renamer\"\n)\npublic class ShipRenamerPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate ShipRenamerConfig config;\n\n\tprivate String[] trueNames;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tlog.debug(\"ShipRenamer started!\");\n\n\t\ttrueNames \u003d new String[5];\n\n\t\tclientThread.invoke(() -\u003e {\n\t\t\tif(client.getGameState() \u003d\u003d GameState.LOGGED_IN) {\n\t\t\t\tfor (int i \u003d 1; i \u003c 6; i++) {\n\t\t\t\t\tsaveTrueName(i);\n\t\t\t\t}\n\n\t\t\t\tsetSailingPanel();\n\t\t\t}\n\t\t});\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tlog.debug(\"ShipRenamer stopped!\");\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged)\n\t{\n\t\tif(gameStateChanged.getGameState() \u003d\u003d GameState.LOGGED_IN) {\n\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onVarbitChanged(VarbitChanged varbitChanged)\n\t{\n\t\tint id \u003d varbitChanged.getVarbitId();\n\n\t\tif (id \u003d\u003d VarbitID.SAILING_BOAT_1_NAME_1 || id \u003d\u003d VarbitID.SAILING_BOAT_1_NAME_2 || id \u003d\u003d VarbitID.SAILING_BOAT_1_NAME_3)\n\t\t\tsaveTrueName(1);\n\t\tif (id \u003d\u003d VarbitID.SAILING_BOAT_2_NAME_1 || id \u003d\u003d VarbitID.SAILING_BOAT_2_NAME_2 || id \u003d\u003d VarbitID.SAILING_BOAT_2_NAME_3)\n\t\t\tsaveTrueName(2);\n\t\tif (id \u003d\u003d VarbitID.SAILING_BOAT_3_NAME_1 || id \u003d\u003d VarbitID.SAILING_BOAT_3_NAME_2 || id \u003d\u003d VarbitID.SAILING_BOAT_3_NAME_3)\n\t\t\tsaveTrueName(3);\n\t\tif (id \u003d\u003d VarbitID.SAILING_BOAT_4_NAME_1 || id \u003d\u003d VarbitID.SAILING_BOAT_4_NAME_2 || id \u003d\u003d VarbitID.SAILING_BOAT_4_NAME_3)\n\t\t\tsaveTrueName(4);\n\t\tif (id \u003d\u003d VarbitID.SAILING_BOAT_5_NAME_1 || id \u003d\u003d VarbitID.SAILING_BOAT_5_NAME_2 || id \u003d\u003d VarbitID.SAILING_BOAT_5_NAME_3)\n\t\t\tsaveTrueName(5);\n\t}\n\n\t@Subscribe\n\tpublic void onWidgetLoaded(WidgetLoaded widgetLoaded)\n\t{\n\t\tint id \u003d widgetLoaded.getGroupId();\n\n\t\tif (id \u003d\u003d InterfaceID.SAILING_BOAT_SELECTION) {\n\t\t\tclientThread.invokeLater(() -\u003e setBoatSelection());\n\t\t}\n\n\t\tif (id \u003d\u003d InterfaceID.SAILING_BOAT_CARGOHOLD) {\n\t\t\tclientThread.invokeLater(() -\u003e setCargoHold());\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onScriptPostFired(ScriptPostFired scriptPostFired)\n\t{\n\t\tint id \u003d scriptPostFired.getScriptId();\n\n\t\tif (id \u003d\u003d 8712) { // Sailing Panel Loaded. This also handles refreshes.\n\t\t\tsetSailingPanel();\n\t\t}\n\n\t\tif (id \u003d\u003d 8640) { // Ship expanded/collapsed\n\t\t\tsetBoatSelection();\n\t\t}\n\n\t\tif (id \u003d\u003d 8643) { // Cargo Panel Loaded.\n\t\t\tsetSelectionCargo();\n\t\t}\n\t}\n\n\tprivate void setSelectionCargo() {\n\t\tWidget frame \u003d client.getWidget(InterfaceID.SailingBoatSelection.CARGO_HOLD_CONTENT_FRAME);\n\t\tif (frame \u003d\u003d null) return;\n\t\tfor (Widget child : frame.getChildren()) {\n\t\t\tif (child.getType() !\u003d WidgetType.TEXT) continue;\n\t\t\t\n\t\t\tString trim \u003d \"\u0027s Cargo Hold\";\n\t\t\tString text \u003d child.getText();\n\t\t\tif (text \u003d\u003d null || !text.endsWith(trim)) \n\t\t\t\tcontinue;\n\n\t\t\tString name \u003d getReplacment(text.replace(trim, \"\"));\n\t\t\tchild.setText(name + trim);\n\t\t}\n\t}\n\n\t@Provides\n\tShipRenamerConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(ShipRenamerConfig.class);\n\t}\n\t\n\tprivate String getReplacment(String match)\n\t{\n\t\tfor (var i \u003d 0; i \u003c 5; i++) {\n\t\t\tif (trueNames.length \u003c i - 1) \n\t\t\t\tbreak;\n\n\t\t\tif (!match.equals(trueNames[i]))\n\t\t\t\tcontinue;\n\n\t\t\treturn getName(i + 1);\n\t\t}\n\n\t\treturn match;\n\t}\n\n\tprivate void saveTrueName(int boatnum)\n\t{\n\t\tint vbit1, vbit2, vbit3;\n\n\t\tswitch (boatnum) {\n\t\t\tcase 1:\n\t\t\t\tvbit1 \u003d client.getVarbitValue(VarbitID.SAILING_BOAT_1_NAME_1);\n\t\t\t\tvbit2 \u003d client.getVarbitValue(VarbitID.SAILING_BOAT_1_NAME_2);\n\t\t\t\tvbit3 \u003d client.getVarbitValue(VarbitID.SAILING_BOAT_1_NAME_3);\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tvbit1 \u003d client.getVarbitValue(VarbitID.SAILING_BOAT_2_NAME_1);\n\t\t\t\tvbit2 \u003d client.getVarbitValue(VarbitID.SAILING_BOAT_2_NAME_2);\n\t\t\t\tvbit3 \u003d client.getVarbitValue(VarbitID.SAILING_BOAT_2_NAME_3);\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tvbit1 \u003d client.getVarbitValue(VarbitID.SAILING_BOAT_3_NAME_1);\n\t\t\t\tvbit2 \u003d client.getVarbitValue(VarbitID.SAILING_BOAT_3_NAME_2);\n\t\t\t\tvbit3 \u003d client.getVarbitValue(VarbitID.SAILING_BOAT_3_NAME_3);\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tvbit1 \u003d client.getVarbitValue(VarbitID.SAILING_BOAT_4_NAME_1);\n\t\t\t\tvbit2 \u003d client.getVarbitValue(VarbitID.SAILING_BOAT_4_NAME_2);\n\t\t\t\tvbit3 \u003d client.getVarbitValue(VarbitID.SAILING_BOAT_4_NAME_3);\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tvbit1 \u003d client.getVarbitValue(VarbitID.SAILING_BOAT_5_NAME_1);\n\t\t\t\tvbit2 \u003d client.getVarbitValue(VarbitID.SAILING_BOAT_5_NAME_2);\n\t\t\t\tvbit3 \u003d client.getVarbitValue(VarbitID.SAILING_BOAT_5_NAME_3);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\n\t\tlog.debug(String.format(\"[%s][%s][%s]\", vbit1, vbit2, vbit3));\n\n\t\tint opt \u003d vbit1 \u003d\u003d 0 ? DBTableID.SailingBoatNameOptions.COL_DEFAULT : DBTableID.SailingBoatNameOptions.COL_OPTION;\n\t\tint num \u003d vbit1 \u003d\u003d 0 ? 0 : vbit1 - 1;\n\t\tObject[] res \u003d client.getDBTableField(DBTableID.SailingBoatNameOptions.Row.SAILING_BOAT_NAME_PREFIX_OPTIONS, opt, 0);\n\t\tString prefix \u003d res \u003d\u003d null || res.length \u003c num || res[num] \u003d\u003d null ? \"\" : (String)res[num];\n\n\t\topt \u003d vbit2 \u003d\u003d 0 ? DBTableID.SailingBoatNameOptions.COL_DEFAULT : DBTableID.SailingBoatNameOptions.COL_OPTION;\n\t\tnum \u003d vbit2 \u003d\u003d 0 ? 0 : vbit2 - 1;\n\t\tres \u003d client.getDBTableField(DBTableID.SailingBoatNameOptions.Row.SAILING_BOAT_NAME_DESCRIPTOR_OPTIONS, opt, 0);\n\t\tString middle \u003d res \u003d\u003d null || res.length \u003c num || res[num] \u003d\u003d null ? \"\" : (String)res[num];\n\n\t\topt \u003d vbit3 \u003d\u003d 0 ? DBTableID.SailingBoatNameOptions.COL_DEFAULT : DBTableID.SailingBoatNameOptions.COL_OPTION;\n\t\tnum \u003d vbit3 \u003d\u003d 0 ? 0 : vbit3 - 1;\n\t\tres \u003d client.getDBTableField(DBTableID.SailingBoatNameOptions.Row.SAILING_BOAT_NAME_NOUN_OPTIONS, opt, 0);\n\t\tString last \u003d res \u003d\u003d null || res.length \u003c num || res[num] \u003d\u003d null ? \"\" : (String)res[num];\n\n\t\tString total \u003d \"\";\n\t\tif (prefix !\u003d null \u0026\u0026 prefix.length() \u003e 0) {\n\t\t\ttotal +\u003d prefix;\n\t\t}\n\t\tif (middle !\u003d null \u0026\u0026 middle.length() \u003e 0) {\n\t\t\tif (total.length() \u003e 0) total +\u003d \" \";\n\t\t\ttotal +\u003d middle;\n\t\t}\n\t\tif (last !\u003d null \u0026\u0026 last.length() \u003e 0) {\n\t\t\tif (total.length() \u003e 0) total +\u003d \" \";\n\t\t\ttotal +\u003d last;\n\t\t}\n\n\t\tif(trueNames.length \u003c boatnum) {\n\t\t\tlog.error(\"Could not update boat num: \" + boatnum);\n\t\t\treturn; // Safety check shouldn\u0027t happen.\n\t\t}\n\n\t\tlog.debug(String.format(\"Recording ship: [%s]\", total));\n\t\ttrueNames[boatnum - 1] \u003d total;\n\t}\n\n\tprivate void setSailingPanel()\n\t{\n\t\tlog.debug(\"Setting panel\");\n\t\tint boatId \u003d client.getVarbitValue(VarbitID.SAILING_BOAT_SPAWNED);\n\t\tString boardedName \u003d getName(boatId);\n\n\t\tWidget sailingPanel \u003d client.getWidget(InterfaceID.SailingSidepanel.BOAT_NAME);\n\t\tif (sailingPanel \u003d\u003d null) return;\n\t\t \n\t\tWidget child \u003d sailingPanel.getChild(0);\n\t\tif (child \u003d\u003d null) return;\n\t\t\t\t\n\t\tif (child.getText().equals(\"Not on boat\"))\n\t\t\treturn;\n\n\t\tlog.debug(String.format(\"id: [%s], name: [%s], panel:[%s]\", boatId, boardedName, child.getText())); \n\t\tchild.setText(boardedName);\n\n\t}\n\n\tprivate void replaceBoat(Widget widget)\n\t{\n\t\tWidget[] children \u003d widget.getChildren();\n\n\t\tfor (Widget child : children) {\n\t\t\tif(child \u003d\u003d null) continue;\n\n\t\t\tint type \u003d child.getType();\n\t\t\tif (type \u003d\u003d WidgetType.TEXT) {\n\t\t\t\tString existing \u003d child.getText();\n\t\t\t\tif (existing \u003d\u003d null || existing.equals(\"\")) \n\t\t\t\t\tcontinue;\n\n\t\t\t\tfor(int i \u003d 0; i \u003c trueNames.length; i++) {\n\t\t\t\t\tif(trueNames[i] \u003d\u003d null || trueNames[i].equals(\"\"))\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tif (existing.equals(trueNames[i])) {\n\t\t\t\t\t\tchild.setText(getName(i + 1));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (existing.length() \u003e 4 \u0026\u0026\n\t\t\t\t\t\texisting.substring(1, 4).equals(\" - \") \u0026\u0026\n\t\t\t\t\t\texisting.endsWith(trueNames[i])) {\n\t\t\t\t\t\tchild.setText(existing.substring(0, 4) + getName(i + 1));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tString name \u003d child.getName();\n\t\t\tif (name \u003d\u003d null || !name.startsWith(\"\u003ccol\u003d\")) continue;\n\t\t\tString trueName \u003d name.substring(12, name.length() - 6);\n\t\t\tchild.setName(name.substring(0, 12) + getReplacment(trueName) + \"\u003c/col\u003e\");\n\t\t}\n\t}\n\n\tprivate void setBoatSelection()\n\t{\n\t\tWidget recent \u003d client.getWidget(InterfaceID.SailingBoatSelection.BOATS_CONTAINER_RECENT);\n\t\tif (recent !\u003d null) replaceBoat(recent);\t\n\n\t\tWidget list \u003d client.getWidget(InterfaceID.SailingBoatSelection.BOATS_CONTAINER);\n\t\tif (list !\u003d null) replaceBoat(list);\n\t}\n\n\tprivate void setCargoHold()\n\t{\n\t\tlog.debug(\"Setting panel\");\n\n\t\tWidget frame \u003d client.getWidget(InterfaceID.SailingBoatCargohold.FRAME);\n\t\tfor (Widget child : frame.getChildren()) {\n\t\t\tif (child.getType() !\u003d 4) continue;\n\t\t\tString old \u003d child.getText();\n\t\t\t\n\t\t\tif (!old.startsWith(\"Cargo Hold: \"))\n\t\t\t\tcontinue;\n\n\t\t\tchild.setText(\"Cargo Hold: \" + getReplacment(old.substring(12)));\n\t\t}\n\t}\n\n\tprivate String getName(int boatNum)\n\t{\n\t\tswitch (boatNum) {\n\t\t\tcase 1:\n\t\t\t\treturn config.ship1name();\n\t\t\tcase 2:\n\t\t\t\treturn config.ship2name();\n\t\t\tcase 3:\n\t\t\t\treturn config.ship3name();\n\t\t\tcase 4:\n\t\t\t\treturn config.ship4name();\n\t\t\tcase 5:\n\t\t\t\treturn config.ship5name();\n\t\t\tdefault:\n\t\t\t\treturn \"Boat\";\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\logical\\ShipRenamerPlugin.java"},{"fileName":"ShipRenamerTest.java","content":"package com.logical;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ShipRenamerTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(ShipRenamerPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\logical\\ShipRenamerTest.java"}]},{"commit":"d6af08b3329b9fc20cd56f49344296bcff453c7f","repository":"https://github.com/Skretzo/runelite-plugins.git","internalName":"world-location","files":[{"fileName":"InfoOverlay.java","content":"/*\n * Copyright (c) 2021, Xrio\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.worldlocation;\n\nimport com.google.inject.Inject;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport net.runelite.api.Client;\nimport net.runelite.api.coords.WorldPoint;\nimport static net.runelite.api.Constants.CHUNK_SIZE;\nimport static net.runelite.api.Constants.REGION_SIZE;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.LineComponent;\n\npublic class InfoOverlay extends OverlayPanel\n{\n\tprivate final Client client;\n\tprivate final WorldLocationConfig config;\n\n\t@Inject\n\tInfoOverlay(Client client, WorldLocationConfig config)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.config \u003d config;\n\n\t\tsetPosition(OverlayPosition.TOP_LEFT);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (!config.gridInfo() || client.getLocalPlayer() \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tWorldPoint wp \u003d client.getLocalPlayer().getWorldLocation();\n\t\tint tileX \u003d wp.getX();\n\t\tint tileY \u003d wp.getY();\n\t\tint tileZ \u003d wp.getPlane();\n\n\t\tif (InstanceInfoType.TEMPLATE.equals(config.instanceInfoType()) \u0026\u0026 client.isInInstancedRegion())\n\t\t{\n\t\t\twp \u003d WorldPoint.fromLocalInstance(client, client.getLocalPlayer().getLocalLocation());\n\t\t\ttileX \u003d wp.getX();\n\t\t\ttileY \u003d wp.getY();\n\t\t\ttileZ \u003d wp.getPlane();\n\t\t}\n\n\t\tfinal int chunkX \u003d tileX \u003e\u003e 3;\n\t\tfinal int chunkY \u003d tileY \u003e\u003e 3;\n\t\tfinal int regionX \u003d tileX \u003e\u003e 6;\n\t\tfinal int regionY \u003d tileY \u003e\u003e 6;\n\t\tfinal int chunkTileX \u003d tileX % CHUNK_SIZE;\n\t\tfinal int chunkTileY \u003d tileY % CHUNK_SIZE;\n\t\tfinal int regionTileX \u003d tileX % REGION_SIZE;\n\t\tfinal int regionTileY \u003d tileY % REGION_SIZE;\n\n\t\tfinal int chunkID \u003d (chunkX \u003c\u003c 11) | chunkY;\n\t\tfinal int regionID \u003d (regionX \u003c\u003c 8) | regionY;\n\n\t\tfinal boolean useId \u003d InfoType.UNIQUE_ID.equals(config.gridInfoType());\n\n\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t.left(\"Tile\")\n\t\t\t.right(tileX + \", \" + tileY + \", \" + tileZ)\n\t\t\t.build());\n\n\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t.left(\"Chunk\" + (useId ? \" ID\" : \"\"))\n\t\t\t.right(useId ? (\"\" + chunkID) :\n\t\t\t\t(chunkX + \", \" + chunkY + \", \" + chunkTileX + \", \" + chunkTileY))\n\t\t\t.build());\n\n\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t.left(\"Region\" + (useId ? \" ID\" : \"\"))\n\t\t\t.right(useId ? (\"\" + regionID) :\n\t\t\t\t(regionX + \", \" + regionY + \", \" + regionTileX + \", \" + regionTileY))\n\t\t\t.build());\n\n\t\treturn super.render(graphics);\n\t}\n}\n","filePath":"src\\main\\java\\com\\worldlocation\\InfoOverlay.java"},{"fileName":"InfoType.java","content":"/*\n * Copyright (c) 2021, Xrio\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.worldlocation;\n\npublic enum InfoType\n{\n\tUNIQUE_ID(\"Unique ID\"),\n\tLOCAL_COORDINATES(\"Local coordinates\");\n\n\tprivate final String name;\n\n\tInfoType(String name)\n\t{\n\t\tthis.name \u003d name;\n\t}\n\n\t@Override\n\tpublic String toString()\n\t{\n\t\treturn name;\n\t}\n}\n","filePath":"src\\main\\java\\com\\worldlocation\\InfoType.java"},{"fileName":"InstanceInfoType.java","content":"/*\n * Copyright (c) 2021, Xrio\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.worldlocation;\n\npublic enum InstanceInfoType\n{\n\tTEMPLATE(\"Template\"),\n\tCOPY(\"Copy\");\n\n\tprivate final String name;\n\n\tInstanceInfoType(String name)\n\t{\n\t\tthis.name \u003d name;\n\t}\n\n\t@Override\n\tpublic String toString()\n\t{\n\t\treturn name;\n\t}\n}\n","filePath":"src\\main\\java\\com\\worldlocation\\InstanceInfoType.java"},{"fileName":"MinimapOverlay.java","content":"package com.worldlocation;\n\nimport com.google.inject.Inject;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.RenderingHints;\nimport net.runelite.api.Client;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Point;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\n\npublic class MinimapOverlay extends Overlay\n{\n\tprivate final Client client;\n\tprivate final WorldLocationPlugin plugin;\n\tprivate final WorldLocationConfig config;\n\n\t@Inject\n\tprivate MinimapOverlay(Client client, WorldLocationPlugin plugin, WorldLocationConfig config)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetPriority(Overlay.PRIORITY_LOW);\n\t\tsetLayer(OverlayLayer.ABOVE_WIDGETS);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tgraphics.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_OFF);\n\t\tgraphics.setClip(plugin.getMinimapClipArea());\n\n\t\tif (config.minimapTileLines())\n\t\t{\n\t\t\trenderLines(graphics, 1, config.tileLineColour());\n\t\t}\n\t\tif (config.minimapChunkLines())\n\t\t{\n\t\t\trenderLines(graphics, 8, config.chunkLineColour());\n\t\t}\n\t\tif (config.minimapRegionLines())\n\t\t{\n\t\t\trenderLines(graphics, 64, config.regionLineColour());\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate void renderLines(Graphics2D graphics, int gridSize, Color lineColour)\n\t{\n\t\tint size \u003d Perspective.SCENE_SIZE;\n\t\tint startX \u003d client.getBaseX();\n\t\tint startY \u003d client.getBaseY();\n\t\tint endX \u003d startX + size;\n\t\tint endY \u003d startY + size;\n\n\t\tgraphics.setColor(lineColour);\n\n\t\tfor (int x \u003d startX; x \u003c endX; x +\u003d gridSize)\n\t\t{\n\t\t\tx \u003d x / gridSize * gridSize;\n\t\t\tif (x \u003c startX)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tPoint start \u003d worldToMinimap(x, startY);\n\t\t\tPoint end \u003d worldToMinimap(x, startY + size);\n\t\t\tif (start !\u003d null \u0026\u0026 end !\u003d null)\n\t\t\t{\n\t\t\t\tgraphics.drawLine(start.getX(), start.getY(), end.getX(), end.getY());\n\t\t\t}\n\t\t}\n\t\tfor (int y \u003d startY; y \u003c endY; y +\u003d gridSize)\n\t\t{\n\t\t\ty \u003d y / gridSize * gridSize;\n\t\t\tif (y \u003c startY)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tPoint start \u003d worldToMinimap(startX, y);\n\t\t\tPoint end \u003d worldToMinimap(startX + size, y);\n\t\t\tif (start !\u003d null \u0026\u0026 end !\u003d null)\n\t\t\t{\n\t\t\t\tgraphics.drawLine(start.getX(), start.getY(), end.getX(), end.getY());\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate Point worldToMinimap(int worldX, int worldY)\n\t{\n\t\tif (client.getLocalPlayer() \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tWorldPoint playerLocation \u003d client.getLocalPlayer().getWorldLocation();\n\t\tLocalPoint localLocation \u003d client.getLocalPlayer().getLocalLocation();\n\t\tLocalPoint playerLocalPoint \u003d LocalPoint.fromWorld(client, playerLocation);\n\n\t\tif (playerLocalPoint \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tint offsetX \u003d playerLocalPoint.getX() - localLocation.getX();\n\t\tint offsetY \u003d playerLocalPoint.getY() - localLocation.getY();\n\n\t\tint dx \u003d worldX - playerLocation.getX();\n\t\tint dy \u003d worldY - playerLocation.getY();\n\n\t\tdouble tileSize \u003d client.getMinimapZoom();\n\n\t\tint x \u003d (int) (dx * tileSize + offsetX * tileSize / Perspective.LOCAL_TILE_SIZE - tileSize / 2);\n\t\tint y \u003d (int) (dy * tileSize + offsetY * tileSize / Perspective.LOCAL_TILE_SIZE - tileSize / 2 + 1);\n\n\t\tint angle \u003d client.getCameraYawTarget() \u0026 0x7FF;\n\n\t\tint sin \u003d Perspective.SINE[angle];\n\t\tint cos \u003d Perspective.COSINE[angle];\n\n\t\tWidget minimapDrawWidget \u003d plugin.getMinimapDrawWidget();\n\t\tif (minimapDrawWidget \u003d\u003d null || minimapDrawWidget.isHidden())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tint xx \u003d y * sin + cos * x \u003e\u003e 16;\n\t\tint yy \u003d sin * x - y * cos \u003e\u003e 16;\n\n\t\tPoint loc \u003d minimapDrawWidget.getCanvasLocation();\n\t\tint minimapX \u003d loc.getX() + xx + minimapDrawWidget.getWidth() / 2;\n\t\tint minimapY \u003d loc.getY() + yy + minimapDrawWidget.getHeight() / 2;\n\n\t\treturn new Point(minimapX, minimapY);\n\t}\n}\n","filePath":"src\\main\\java\\com\\worldlocation\\MinimapOverlay.java"},{"fileName":"SceneOverlay.java","content":"/*\n * Copyright (c) 2017, Adam \u003cAdam@sigterm.info\u003e\n * Copyright (c) 2018, Woox \u003chttps://github.com/wooxsolo\u003e\n * Copyright (c) 2020, Xrio\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.worldlocation;\n\nimport com.google.inject.Inject;\nimport java.awt.BasicStroke;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Polygon;\nimport java.awt.geom.GeneralPath;\nimport net.runelite.api.Client;\nimport net.runelite.api.Constants;\nimport net.runelite.api.MenuAction;\nimport net.runelite.api.MenuEntry;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Point;\nimport net.runelite.api.Scene;\nimport net.runelite.api.Tile;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\nimport net.runelite.client.ui.overlay.tooltip.Tooltip;\nimport net.runelite.client.ui.overlay.tooltip.TooltipManager;\n\npublic class SceneOverlay extends Overlay\n{\n\tprivate static final int CULL_CHUNK_BORDERS_RANGE \u003d 16;\n\tprivate static final int LOCAL_TILE_SIZE \u003d Perspective.LOCAL_TILE_SIZE;\n\n\tprivate final Client client;\n\tprivate final WorldLocationConfig config;\n\tprivate final TooltipManager tooltipManager;\n\n\t@Inject\n\tpublic SceneOverlay(Client client, WorldLocationConfig config, TooltipManager tooltipManager)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.config \u003d config;\n\t\tthis.tooltipManager \u003d tooltipManager;\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (config.tileLines())\n\t\t{\n\t\t\trenderLines(graphics, 1, config.tileLineWidth(), config.tileLineColour());\n\t\t}\n\n\t\tif (config.chunkLines())\n\t\t{\n\t\t\trenderLines(graphics, 8, config.chunkLineWidth(), config.chunkLineColour());\n\t\t}\n\n\t\tif (config.regionLines())\n\t\t{\n\t\t\trenderLines(graphics, 64, config.regionLineWidth(), config.regionLineColour());\n\t\t}\n\n\t\tif (config.tileLocation() \u0026\u0026 isHoveringScene())\n\t\t{\n\t\t\trenderTile(graphics, config.tileColour());\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate void renderLines(Graphics2D graphics, int gridSize, int lineWidth, Color lineColour)\n\t{\n\t\tif (client.getLocalPlayer() \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tWorldPoint wp \u003d client.getLocalPlayer().getWorldLocation();\n\t\tint startX \u003d (wp.getX() - CULL_CHUNK_BORDERS_RANGE + gridSize - 1) / gridSize * gridSize;\n\t\tint startY \u003d (wp.getY() - CULL_CHUNK_BORDERS_RANGE + gridSize - 1) / gridSize * gridSize;\n\t\tint endX \u003d (wp.getX() + CULL_CHUNK_BORDERS_RANGE) / gridSize * gridSize;\n\t\tint endY \u003d (wp.getY() + CULL_CHUNK_BORDERS_RANGE) / gridSize * gridSize;\n\n\t\tgraphics.setStroke(new BasicStroke(lineWidth));\n\t\tgraphics.setColor(lineColour);\n\n\t\tGeneralPath path \u003d new GeneralPath();\n\t\tfor (int x \u003d startX; x \u003c\u003d endX; x +\u003d gridSize)\n\t\t{\n\t\t\tLocalPoint lp1 \u003d LocalPoint.fromWorld(client, x, wp.getY() - CULL_CHUNK_BORDERS_RANGE);\n\t\t\tLocalPoint lp2 \u003d LocalPoint.fromWorld(client, x, wp.getY() + CULL_CHUNK_BORDERS_RANGE);\n\n\t\t\tif (lp1 \u003d\u003d null || lp2 \u003d\u003d null)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tboolean first \u003d true;\n\t\t\tfor (int y \u003d lp1.getY(); y \u003c\u003d lp2.getY(); y +\u003d LOCAL_TILE_SIZE)\n\t\t\t{\n\t\t\t\tPoint p \u003d Perspective.localToCanvas(client,\n\t\t\t\t\t\tnew LocalPoint(lp1.getX() - LOCAL_TILE_SIZE / 2, y - LOCAL_TILE_SIZE / 2),\n\t\t\t\t\t\tclient.getPlane());\n\t\t\t\tif (p !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tif (first)\n\t\t\t\t\t{\n\t\t\t\t\t\tpath.moveTo(p.getX(), p.getY());\n\t\t\t\t\t\tfirst \u003d false;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tpath.lineTo(p.getX(), p.getY());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor (int y \u003d startY; y \u003c\u003d endY; y +\u003d gridSize)\n\t\t{\n\t\t\tLocalPoint lp1 \u003d LocalPoint.fromWorld(client, wp.getX() - CULL_CHUNK_BORDERS_RANGE, y);\n\t\t\tLocalPoint lp2 \u003d LocalPoint.fromWorld(client, wp.getX() + CULL_CHUNK_BORDERS_RANGE, y);\n\n\t\t\tif (lp1 \u003d\u003d null || lp2 \u003d\u003d null)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tboolean first \u003d true;\n\t\t\tfor (int x \u003d lp1.getX(); x \u003c\u003d lp2.getX(); x +\u003d LOCAL_TILE_SIZE)\n\t\t\t{\n\t\t\t\tPoint p \u003d Perspective.localToCanvas(client,\n\t\t\t\t\t\tnew LocalPoint(x - LOCAL_TILE_SIZE / 2, lp1.getY() - LOCAL_TILE_SIZE / 2),\n\t\t\t\t\t\tclient.getPlane());\n\t\t\t\tif (p !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tif (first)\n\t\t\t\t\t{\n\t\t\t\t\t\tpath.moveTo(p.getX(), p.getY());\n\t\t\t\t\t\tfirst \u003d false;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tpath.lineTo(p.getX(), p.getY());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tgraphics.draw(path);\n\t}\n\n\tprivate void renderTile(Graphics2D graphics, Color tileColour)\n\t{\n\t\tScene scene \u003d client.getScene();\n\t\tTile[][][] tiles \u003d scene.getTiles();\n\n\t\tint z \u003d client.getPlane();\n\n\t\tfor (int x \u003d 0; x \u003c Constants.SCENE_SIZE; ++x)\n\t\t{\n\t\t\tfor (int y \u003d 0; y \u003c Constants.SCENE_SIZE; ++y)\n\t\t\t{\n\t\t\t\tTile tile \u003d tiles[z][x][y];\n\n\t\t\t\tif (tile \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tPolygon poly \u003d Perspective.getCanvasTilePoly(client, tile.getLocalLocation());\n\t\t\t\tif (poly !\u003d null \u0026\u0026\n\t\t\t\t\tpoly.contains(client.getMouseCanvasPosition().getX(), client.getMouseCanvasPosition().getY()))\n\t\t\t\t{\n\t\t\t\t\tWorldPoint wp \u003d tile.getWorldLocation();\n\t\t\t\t\tint tileX \u003d wp.getX();\n\t\t\t\t\tint tileY \u003d wp.getY();\n\t\t\t\t\tint tileZ \u003d wp.getPlane();\n\t\t\t\t\tif (InstanceInfoType.TEMPLATE.equals(config.instanceInfoType()) \u0026\u0026 client.isInInstancedRegion())\n\t\t\t\t\t{\n\t\t\t\t\t\twp \u003d WorldPoint.fromLocalInstance(client, tile.getLocalLocation());\n\t\t\t\t\t\ttileX \u003d wp.getX();\n\t\t\t\t\t\ttileY \u003d wp.getY();\n\t\t\t\t\t\ttileZ \u003d wp.getPlane();\n\t\t\t\t\t}\n\t\t\t\t\ttooltipManager.add(new Tooltip(tileX + \", \" + tileY + \", \" + tileZ));\n\t\t\t\t\tOverlayUtil.renderPolygon(graphics, poly, tileColour);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate boolean isHoveringScene()\n\t{\n\t\tMenuEntry[] menuEntries \u003d client.getMenuEntries();\n\t\tfor (int i \u003d menuEntries.length - 1; i \u003e\u003d 0; i--)\n\t\t{\n\t\t\tif (MenuAction.WALK.equals(menuEntries[i].getType()))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\com\\worldlocation\\SceneOverlay.java"},{"fileName":"WorldLocationConfig.java","content":"/*\n * Copyright (c) 2020, Xrio\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.worldlocation;\n\nimport java.awt.Color;\nimport net.runelite.client.config.Alpha;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\nimport net.runelite.client.config.Range;\n\n@ConfigGroup(\"worldlocation\")\npublic interface WorldLocationConfig extends Config\n{\n\t@ConfigItem(\n\t\tposition \u003d 0,\n\t\tkeyName \u003d \"tileLocation\",\n\t\tname \u003d \"Tile Location\",\n\t\tdescription \u003d \"Show world tile (1 x 1) location\"\n\t)\n\tdefault boolean tileLocation()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 1,\n\t\tkeyName \u003d \"tileLines\",\n\t\tname \u003d \"Tile Lines\",\n\t\tdescription \u003d \"Show tile (1 x 1) lines\"\n\t)\n\tdefault boolean tileLines()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 2,\n\t\tkeyName \u003d \"chunkLines\",\n\t\tname \u003d \"Chunk Lines\",\n\t\tdescription \u003d \"Show chunk (8 x 8) lines\"\n\t)\n\tdefault boolean chunkLines()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 3,\n\t\tkeyName \u003d \"regionLines\",\n\t\tname \u003d \"Region Lines\",\n\t\tdescription \u003d \"Show region (64 x 64) lines\"\n\t)\n\tdefault boolean regionLines()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 4,\n\t\tkeyName \u003d \"minimapTileLines\",\n\t\tname \u003d \"Minimap Tile Lines\",\n\t\tdescription \u003d \"Show tile (1 x 1) lines on the minimap\"\n\t)\n\tdefault boolean minimapTileLines()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 5,\n\t\tkeyName \u003d \"minimapChunkLines\",\n\t\tname \u003d \"Minimap Chunk Lines\",\n\t\tdescription \u003d \"Show chunk (8 x 8) lines on the minimap\"\n\t)\n\tdefault boolean minimapChunkLines()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 6,\n\t\tkeyName \u003d \"minimapRegionLines\",\n\t\tname \u003d \"Minimap Region Lines\",\n\t\tdescription \u003d \"Show region (64 x 64) lines on the minimap\"\n\t)\n\tdefault boolean minimapRegionLines()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 7,\n\t\tkeyName \u003d \"mapTileLines\",\n\t\tname \u003d \"World Map Tile Lines\",\n\t\tdescription \u003d \"Show tile (1 x 1) lines on the world map\"\n\t)\n\tdefault boolean mapTileLines()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 8,\n\t\tkeyName \u003d \"mapChunkLines\",\n\t\tname \u003d \"World Map Chunk Lines\",\n\t\tdescription \u003d \"Show chunk (8 x 8) lines on the world map\"\n\t)\n\tdefault boolean mapChunkLines()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 9,\n\t\tkeyName \u003d \"mapRegionLines\",\n\t\tname \u003d \"World Map Region Lines\",\n\t\tdescription \u003d \"Show region (64 x 64) lines on the world map\"\n\t)\n\tdefault boolean mapRegionLines()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 10,\n\t\tkeyName \u003d \"gridInfo\",\n\t\tname \u003d \"Grid Info\",\n\t\tdescription \u003d \"Show information about the current grid\"\n\t)\n\tdefault boolean gridInfo()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigSection(\n\t\tposition \u003d 11,\n\t\tname \u003d \"Settings\",\n\t\tdescription \u003d \"Colour and line width options\",\n\t\tclosedByDefault \u003d true\n\t)\n\tString settingsSection \u003d \"settingsSection\";\n\n\t@Alpha\n\t@ConfigItem(\n\t\tposition \u003d 12,\n\t\tkeyName \u003d \"tileColour\",\n\t\tname \u003d \"Tile Colour\",\n\t\tdescription \u003d \"The colour of the tile for the world point location\",\n\t\tsection \u003d settingsSection\n\t)\n\tdefault Color tileColour()\n\t{\n\t\treturn new Color(0, 0, 0, 127);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tposition \u003d 13,\n\t\tkeyName \u003d \"tileLineColour\",\n\t\tname \u003d \"Tile Line Colour\",\n\t\tdescription \u003d \"The colour of the tile border\",\n\t\tsection \u003d settingsSection\n\t)\n\tdefault Color tileLineColour()\n\t{\n\t\treturn new Color(0, 0, 0, 127);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tposition \u003d 14,\n\t\tkeyName \u003d \"chunkLineColour\",\n\t\tname \u003d \"Chunk Line Colour\",\n\t\tdescription \u003d \"The colour of the chunk border\",\n\t\tsection \u003d settingsSection\n\t)\n\tdefault Color chunkLineColour()\n\t{\n\t\treturn Color.BLUE;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tposition \u003d 15,\n\t\tkeyName \u003d \"regionLineColour\",\n\t\tname \u003d \"Region Line Colour\",\n\t\tdescription \u003d \"The colour of the region border\",\n\t\tsection \u003d settingsSection\n\t)\n\tdefault Color regionLineColour()\n\t{\n\t\treturn Color.GREEN;\n\t}\n\n\t@Range(\n\t\tmax \u003d 5\n\t)\n\t@ConfigItem(\n\t\tposition \u003d 16,\n\t\tkeyName \u003d \"tileLineWidth\",\n\t\tname \u003d \"Tile Line Width\",\n\t\tdescription \u003d \"The tile border line width\",\n\t\tsection \u003d settingsSection\n\t)\n\tdefault int tileLineWidth()\n\t{\n\t\treturn 1;\n\t}\n\n\t@Range(\n\t\tmax \u003d 5\n\t)\n\t@ConfigItem(\n\t\tposition \u003d 17,\n\t\tkeyName \u003d \"chunkLineWidth\",\n\t\tname \u003d \"Chunk Line Width\",\n\t\tdescription \u003d \"The chunk border line width\",\n\t\tsection \u003d settingsSection\n\t)\n\tdefault int chunkLineWidth()\n\t{\n\t\treturn 2;\n\t}\n\n\t@Range(\n\t\tmax \u003d 5\n\t)\n\t@ConfigItem(\n\t\tposition \u003d 18,\n\t\tkeyName \u003d \"regionLineWidth\",\n\t\tname \u003d \"Region Line Width\",\n\t\tdescription \u003d \"The region border line width\",\n\t\tsection \u003d settingsSection\n\t)\n\tdefault int regionLineWidth()\n\t{\n\t\treturn 4;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 19,\n\t\tkeyName \u003d \"gridInfoType\",\n\t\tname \u003d \"Grid Info Type\",\n\t\tdescription \u003d \"The info formatting for the current tile, chunk or region grid.\" +\n\t\t\t\"\u003cbr\u003eTile: Tile X, Tile Y, Tile Z\" +\n\t\t\t\"\u003cbr\u003eChunk ID: unique bit-packed chunk X \u0026 Y\" +\n\t\t\t\"\u003cbr\u003eChunk: Chunk X, Chunk Y, Chunk Tile X, Chunk Tile Y\" +\n\t\t\t\"\u003cbr\u003eRegion ID: unique bit-packed region X \u0026 Y\" +\n\t\t\t\"\u003cbr\u003eRegion: Region X, Region Y, Region Tile X, Region Tile Y\",\n\t\tsection \u003d settingsSection\n\t)\n\tdefault InfoType gridInfoType()\n\t{\n\t\treturn InfoType.UNIQUE_ID;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 20,\n\t\tkeyName \u003d \"instanceInfoType\",\n\t\tname \u003d \"Instance Info Type\",\n\t\tdescription \u003d \"The info type for the instance.\" +\n\t\t\t\"\u003cbr\u003eTemplate: source area\" +\n\t\t\t\"\u003cbr\u003eCopy: personalized area\",\n\t\tsection \u003d settingsSection\n\t)\n\tdefault InstanceInfoType instanceInfoType()\n\t{\n\t\treturn InstanceInfoType.TEMPLATE;\n\t}\n}\n","filePath":"src\\main\\java\\com\\worldlocation\\WorldLocationConfig.java"},{"fileName":"WorldLocationPlugin.java","content":"/*\n * Copyright (c) 2020, Xrio\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.worldlocation;\n\nimport com.google.inject.Inject;\nimport com.google.inject.Provides;\nimport java.awt.Color;\nimport java.awt.Point;\nimport java.awt.Polygon;\nimport java.awt.Rectangle;\nimport java.awt.Shape;\nimport java.awt.geom.Ellipse2D;\nimport java.awt.image.BufferedImage;\nimport java.util.ArrayList;\nimport java.util.List;\nimport net.runelite.api.Client;\nimport net.runelite.api.SpriteID;\nimport net.runelite.api.Varbits;\nimport net.runelite.api.widgets.ComponentID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.game.SpriteManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\n@PluginDescriptor(\n\tname \u003d \"World Location\",\n\tdescription \u003d \"Shows world tile location and grid lines\",\n\ttags \u003d {\"world\", \"tile\", \"location\", \"coordinates\", \"grid\", \"lines\"}\n)\npublic class WorldLocationPlugin extends Plugin\n{\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate InfoOverlay infoOverlay;\n\n\t@Inject\n\tprivate SceneOverlay sceneOverlay;\n\n\t@Inject\n\tprivate MinimapOverlay minimapOverlay;\n\n\t@Inject\n\tprivate WorldMapOverlay worldMapOverlay;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate SpriteManager spriteManager;\n\n\tprivate Shape minimapClipFixed;\n\tprivate Shape minimapClipResizeable;\n\tprivate BufferedImage minimapSpriteFixed;\n\tprivate BufferedImage minimapSpriteResizeable;\n\tprivate Rectangle minimapRectangle \u003d new Rectangle();\n\n\t@Provides\n\tWorldLocationConfig providesConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(WorldLocationConfig.class);\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\toverlayManager.add(infoOverlay);\n\t\toverlayManager.add(sceneOverlay);\n\t\toverlayManager.add(minimapOverlay);\n\t\toverlayManager.add(worldMapOverlay);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(infoOverlay);\n\t\toverlayManager.remove(sceneOverlay);\n\t\toverlayManager.remove(minimapOverlay);\n\t\toverlayManager.remove(worldMapOverlay);\n\t}\n\n\tpublic Widget getMinimapDrawWidget()\n\t{\n\t\tif (client.isResized())\n\t\t{\n\t\t\tif (client.getVarbitValue(Varbits.SIDE_PANELS) \u003d\u003d 1)\n\t\t\t{\n\t\t\t\treturn client.getWidget(ComponentID.RESIZABLE_VIEWPORT_BOTTOM_LINE_MINIMAP_DRAW_AREA);\n\t\t\t}\n\t\t\treturn client.getWidget(ComponentID.RESIZABLE_VIEWPORT_MINIMAP_DRAW_AREA);\n\t\t}\n\t\treturn client.getWidget(ComponentID.FIXED_VIEWPORT_MINIMAP_DRAW_AREA);\n\t}\n\n\tprivate Shape getMinimapClipAreaSimple()\n\t{\n\t\tWidget minimapDrawArea \u003d getMinimapDrawWidget();\n\n\t\tif (minimapDrawArea \u003d\u003d null || minimapDrawArea.isHidden())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tRectangle bounds \u003d minimapDrawArea.getBounds();\n\n\t\treturn new Ellipse2D.Double(bounds.getX(), bounds.getY(), bounds.getWidth(), bounds.getHeight());\n\t}\n\n\tpublic Shape getMinimapClipArea()\n\t{\n\t\tWidget minimapWidget \u003d getMinimapDrawWidget();\n\n\t\tif (minimapWidget \u003d\u003d null || minimapWidget.isHidden() || !minimapRectangle.equals(minimapRectangle \u003d minimapWidget.getBounds()))\n\t\t{\n\t\t\tminimapClipFixed \u003d null;\n\t\t\tminimapClipResizeable \u003d null;\n\t\t\tminimapSpriteFixed \u003d null;\n\t\t\tminimapSpriteResizeable \u003d null;\n\t\t}\n\n\t\tif (client.isResized())\n\t\t{\n\t\t\tif (minimapClipResizeable !\u003d null)\n\t\t\t{\n\t\t\t\treturn minimapClipResizeable;\n\t\t\t}\n\t\t\tif (minimapSpriteResizeable \u003d\u003d null)\n\t\t\t{\n\t\t\t\tminimapSpriteResizeable \u003d spriteManager.getSprite(SpriteID.RESIZEABLE_MODE_MINIMAP_ALPHA_MASK, 0);\n\t\t\t}\n\t\t\tif (minimapSpriteResizeable !\u003d null)\n\t\t\t{\n\t\t\t\tminimapClipResizeable \u003d bufferedImageToPolygon(minimapSpriteResizeable);\n\t\t\t\treturn minimapClipResizeable;\n\t\t\t}\n\t\t\treturn getMinimapClipAreaSimple();\n\t\t}\n\t\tif (minimapClipFixed !\u003d null)\n\t\t{\n\t\t\treturn minimapClipFixed;\n\t\t}\n\t\tif (minimapSpriteFixed \u003d\u003d null)\n\t\t{\n\t\t\tminimapSpriteFixed \u003d spriteManager.getSprite(SpriteID.FIXED_MODE_MINIMAP_ALPHA_MASK, 0);\n\t\t}\n\t\tif (minimapSpriteFixed !\u003d null)\n\t\t{\n\t\t\tminimapClipFixed \u003d bufferedImageToPolygon(minimapSpriteFixed);\n\t\t\treturn minimapClipFixed;\n\t\t}\n\t\treturn getMinimapClipAreaSimple();\n\t}\n\n\tprivate Polygon bufferedImageToPolygon(BufferedImage image)\n\t{\n\t\tColor outsideColour \u003d null;\n\t\tColor previousColour;\n\t\tfinal int width \u003d image.getWidth();\n\t\tfinal int height \u003d image.getHeight();\n\t\tList\u003cPoint\u003e points \u003d new ArrayList\u003c\u003e();\n\t\tfor (int y \u003d 0; y \u003c height; y++)\n\t\t{\n\t\t\tpreviousColour \u003d outsideColour;\n\t\t\tfor (int x \u003d 0; x \u003c width; x++)\n\t\t\t{\n\t\t\t\tint rgb \u003d image.getRGB(x, y);\n\t\t\t\tint a \u003d (rgb \u0026 0xff000000) \u003e\u003e\u003e 24;\n\t\t\t\tint r \u003d (rgb \u0026 0x00ff0000) \u003e\u003e 16;\n\t\t\t\tint g \u003d (rgb \u0026 0x0000ff00) \u003e\u003e 8;\n\t\t\t\tint b \u003d (rgb \u0026 0x000000ff) \u003e\u003e 0;\n\t\t\t\tColor colour \u003d new Color(r, g, b, a);\n\t\t\t\tif (x \u003d\u003d 0 \u0026\u0026 y \u003d\u003d 0)\n\t\t\t\t{\n\t\t\t\t\toutsideColour \u003d colour;\n\t\t\t\t\tpreviousColour \u003d colour;\n\t\t\t\t}\n\t\t\t\tif (!colour.equals(outsideColour) \u0026\u0026 previousColour.equals(outsideColour))\n\t\t\t\t{\n\t\t\t\t\tpoints.add(new java.awt.Point(x, y));\n\t\t\t\t}\n\t\t\t\tif ((colour.equals(outsideColour) || x \u003d\u003d (width - 1)) \u0026\u0026 !previousColour.equals(outsideColour))\n\t\t\t\t{\n\t\t\t\t\tpoints.add(0, new java.awt.Point(x, y));\n\t\t\t\t}\n\t\t\t\tpreviousColour \u003d colour;\n\t\t\t}\n\t\t}\n\t\tint offsetX \u003d minimapRectangle.x;\n\t\tint offsetY \u003d minimapRectangle.y;\n\t\tPolygon polygon \u003d new Polygon();\n\t\tfor (java.awt.Point point : points)\n\t\t{\n\t\t\tpolygon.addPoint(point.x + offsetX, point.y + offsetY);\n\t\t}\n\t\treturn polygon;\n\t}\n}\n","filePath":"src\\main\\java\\com\\worldlocation\\WorldLocationPlugin.java"},{"fileName":"WorldMapOverlay.java","content":"/*\n * Copyright (c) 2018, Alex Kolpa \u003chttps://github.com/AlexKolpa\u003e\n * Copyright (c) 2020, Xrio\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.worldlocation;\n\nimport com.google.inject.Inject;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.FontMetrics;\nimport java.awt.Graphics2D;\nimport java.awt.Rectangle;\nimport java.awt.geom.Rectangle2D;\nimport net.runelite.api.Client;\nimport net.runelite.api.Point;\nimport net.runelite.api.widgets.ComponentID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\n\nclass WorldMapOverlay extends Overlay\n{\n\tprivate static final int LABEL_PADDING \u003d 4;\n\tprivate static final Color WHITE_TRANSLUCENT \u003d new Color(255, 255, 255, 127);\n\n\tprivate final Client client;\n\tprivate final WorldLocationConfig config;\n\n\t@Inject\n\tprivate WorldMapOverlay(Client client, WorldLocationConfig config)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.config \u003d config;\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetPriority(Overlay.PRIORITY_HIGH);\n\t\tsetLayer(OverlayLayer.MANUAL);\n\t\tdrawAfterLayer(ComponentID.WORLD_MAP_MAPVIEW);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (config.mapTileLines())\n\t\t{\n\t\t\tdrawMapLines(graphics, 1, config.tileLineColour());\n\t\t}\n\n\t\tif (config.mapChunkLines())\n\t\t{\n\t\t\tdrawMapLines(graphics, 8, config.chunkLineColour());\n\t\t}\n\n\t\tif (config.mapRegionLines())\n\t\t{\n\t\t\tdrawMapLines(graphics, 64, config.regionLineColour());\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate void drawMapLines(Graphics2D graphics, int gridSize, Color gridColour)\n\t{\n\t\tfinal int gridTruncate \u003d ~(gridSize - 1);\n\n\t\tWidget map \u003d client.getWidget(ComponentID.WORLD_MAP_MAPVIEW);\n\t\tfloat pixelsPerTile \u003d client.getWorldMap().getWorldMapZoom();\n\n\t\tif (map \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (gridSize * pixelsPerTile \u003c 3)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tRectangle worldMapRect \u003d map.getBounds();\n\t\tgraphics.setClip(worldMapRect);\n\n\t\tint widthInTiles \u003d (int) Math.ceil(worldMapRect.getWidth() / pixelsPerTile);\n\t\tint heightInTiles \u003d (int) Math.ceil(worldMapRect.getHeight() / pixelsPerTile);\n\n\t\tPoint worldMapPosition \u003d client.getWorldMap().getWorldMapPosition();\n\n\t\t// Offset in tiles from anchor sides\n\t\tint yTileMin \u003d worldMapPosition.getY() - heightInTiles / 2;\n\t\tint xRegionMin \u003d (worldMapPosition.getX() - widthInTiles / 2) \u0026 gridTruncate;\n\t\tint xRegionMax \u003d ((worldMapPosition.getX() + widthInTiles / 2) \u0026 gridTruncate) + gridSize;\n\t\tint yRegionMin \u003d (yTileMin \u0026 gridTruncate);\n\t\tint yRegionMax \u003d ((worldMapPosition.getY() + heightInTiles / 2) \u0026 gridTruncate) + gridSize;\n\t\tint regionPixelSize \u003d (int) Math.ceil(gridSize * pixelsPerTile);\n\n\t\tfor (int x \u003d xRegionMin; x \u003c xRegionMax; x +\u003d gridSize)\n\t\t{\n\t\t\tfor (int y \u003d yRegionMin; y \u003c yRegionMax; y +\u003d gridSize)\n\t\t\t{\n\t\t\t\tint yTileOffset \u003d -(yTileMin - y);\n\t\t\t\tint xTileOffset \u003d x + widthInTiles / 2 - worldMapPosition.getX();\n\n\t\t\t\tint xPos \u003d ((int) (xTileOffset * pixelsPerTile)) + (int) worldMapRect.getX();\n\t\t\t\tint yPos \u003d (worldMapRect.height - (int) (yTileOffset * pixelsPerTile)) + (int) worldMapRect.getY();\n\t\t\t\t// Offset y-position by a single region to correct for drawRect starting from the top\n\t\t\t\tyPos -\u003d regionPixelSize;\n\n\t\t\t\tgraphics.setColor(gridColour);\n\n\t\t\t\tgraphics.drawRect(xPos, yPos, regionPixelSize, regionPixelSize);\n\n\t\t\t\tgraphics.setColor(WHITE_TRANSLUCENT);\n\n\t\t\t\tif (gridSize \u003d\u003d 64)\n\t\t\t\t{\n\t\t\t\t\tint regionId \u003d ((x \u003e\u003e 6) \u003c\u003c 8) | (y \u003e\u003e 6);\n\t\t\t\t\tString regionText \u003d String.valueOf(regionId);\n\t\t\t\t\tif (InfoType.LOCAL_COORDINATES.equals(config.gridInfoType()))\n\t\t\t\t\t{\n\t\t\t\t\t\tregionText \u003d (x \u003e\u003e 6) + \", \" + (y \u003e\u003e 6);\n\t\t\t\t\t}\n\t\t\t\t\tFontMetrics fm \u003d graphics.getFontMetrics();\n\t\t\t\t\tRectangle2D textBounds \u003d fm.getStringBounds(regionText, graphics);\n\t\t\t\t\tint labelWidth \u003d (int) textBounds.getWidth() + 2 * LABEL_PADDING;\n\t\t\t\t\tint labelHeight \u003d (int) textBounds.getHeight() + 2 * LABEL_PADDING;\n\t\t\t\t\tgraphics.fillRect(xPos, yPos, labelWidth, labelHeight);\n\t\t\t\t\tgraphics.setColor(Color.BLACK);\n\t\t\t\t\tgraphics.drawString(\n\t\t\t\t\t\tregionText,\n\t\t\t\t\t\txPos + LABEL_PADDING,\n\t\t\t\t\t\tyPos + (int) textBounds.getHeight() + LABEL_PADDING);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\worldlocation\\WorldMapOverlay.java"},{"fileName":"WorldLocationPluginTest.java","content":"package com.worldlocation;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class WorldLocationPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(WorldLocationPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\worldlocation\\WorldLocationPluginTest.java"}]},{"commit":"463b31a2989d49d5b310f39fe7f3d01c70999db4","repository":"https://github.com/TheRealGuru/inferno-2d-map.git","internalName":"inferno-2d-map","files":[{"fileName":"ColourRegion.java","content":"package com.github.therealguru;\n\nimport lombok.Data;\nimport lombok.RequiredArgsConstructor;\n\nimport java.awt.*;\n\n@RequiredArgsConstructor\n@Data\npublic class ColourRegion {\n\n    private final Coordinate from;\n    private final Coordinate to;\n    private final Color color;\n}\n","filePath":"src\\main\\java\\com\\github\\therealguru\\ColourRegion.java"},{"fileName":"Coordinate.java","content":"package com.github.therealguru;\n\nimport lombok.Data;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.api.GameObject;\nimport net.runelite.api.NPC;\nimport net.runelite.api.coords.WorldPoint;\n\nimport static com.github.therealguru.Inferno2dMapPlugin.GRID_HEIGHT;\n\n@RequiredArgsConstructor\n@Data\npublic class Coordinate {\n\n    private final int x,y;\n\n    public Coordinate(NPC npc) {\n        this.x \u003d npc.getWorldLocation().getRegionX() - 17;\n        this.y \u003d npc.getWorldLocation().getRegionY() - 17;\n    }\n\n    public Coordinate(GameObject gameObject) {\n        this.x \u003d gameObject.getWorldLocation().getRegionX() - 18;\n        this.y \u003d gameObject.getWorldLocation().getRegionY() - 18;\n    }\n\n    public Coordinate toScoutToolPoint() {\n        return new Coordinate(x, (GRID_HEIGHT - 1) - y);\n    }\n\n    public Coordinate toCleanPoint() {\n        return new Coordinate(x - 17, y - 17);\n    }\n\n    public Coordinate transform(int x, int y) {\n        return new Coordinate(this.x + x, this.y + y);\n    }\n}\n","filePath":"src\\main\\java\\com\\github\\therealguru\\Coordinate.java"},{"fileName":"Inferno2dMapPlugin.java","content":"package com.github.therealguru;\n\nimport com.google.inject.Binder;\nimport com.google.inject.Provides;\n\nimport javax.inject.Inject;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.*;\nimport net.runelite.api.gameval.NpcID;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.util.ImageUtil;\n\nimport java.awt.*;\nimport java.awt.image.BufferedImage;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.stream.Collectors;\n\n@Slf4j\n@PluginDescriptor(\n        name \u003d \"Inferno 2d Map\"\n)\npublic class Inferno2dMapPlugin extends Plugin {\n\n\tprivate static final int INFERNO_REGION \u003d 9043;\n\tprivate static final List\u003cInteger\u003e INFERNO_NPC_LIST \u003d List.of(\n\t\t\tNpcID.INFERNO_CREATURE_HARPIE,\n\t\t\tNpcID.INFERNO_CREATURE_SPLITTER,\n\t\t\tNpcID.INFERNO_CREATURE_MELEE,\n\t\t\tNpcID.INFERNO_CREATURE_RANGER,\n\t\t\tNpcID.INFERNO_CREATURE_MAGER\n    );\n    public static final Map\u003cInteger, Color\u003e NPC_ID_TO_COLOUR \u003d Map.of(\n      NpcID.INFERNO_CREATURE_HARPIE, Color.PINK,\n      NpcID.INFERNO_CREATURE_SPLITTER, Color.YELLOW,\n      NpcID.INFERNO_CREATURE_MELEE, Color.RED,\n      NpcID.INFERNO_CREATURE_RANGER, Color.GREEN,\n      NpcID.INFERNO_CREATURE_MAGER, Color.BLUE\n    );\n    private static final List\u003cInteger\u003e PILLAR_IDS \u003d List.of(30353, 30354, 30355);\n    public static final int GRID_WIDTH \u003d 29;\n    public static final int GRID_HEIGHT \u003d 30;\n\n    private Integer currentWaveNumber;\n\tprivate final List\u003cInfernoNpc\u003e infernoNpcs \u003d new ArrayList\u003c\u003e();\n    private final List\u003cGameObject\u003e infernoPillars \u003d new ArrayList\u003c\u003e();\n    private Color[][] infernoMap;\n\n    @Inject\n    private Client client;\n    @Inject\n    private ClientToolbar clientToolbar;\n    private NavigationButton navigationButton;\n    private InfernoMapPluginPanel panel;\n\n    @Inject\n    private InfernoMapConfig config;\n\n    @Override\n    protected void startUp() {\n        panel \u003d new InfernoMapPluginPanel(this, config);\n        BufferedImage icon \u003d ImageUtil.loadImageResource(getClass(), \"/devil.png\");\n        navigationButton \u003d NavigationButton.builder()\n                .tooltip(\"Inferno 2d Map\")\n                .priority(10000)\n                .panel(panel)\n                .icon(icon)\n                .build();\n\n        clientToolbar.addNavigation(navigationButton);\n        infernoMap \u003d generateBlankMap();\n    }\n\n    @Override\n    protected void shutDown() throws Exception {\n        clientToolbar.removeNavigation(navigationButton);\n        infernoMap \u003d generateBlankMap();\n        infernoNpcs.clear();\n        infernoPillars.clear();\n        currentWaveNumber \u003d null;\n    }\n\n    @Subscribe\n    private void onChatMessage(ChatMessage event) {\n        if (!isInInferno() || event.getType() !\u003d ChatMessageType.GAMEMESSAGE) {\n            return;\n        }\n\n        String message \u003d event.getMessage();\n\n        if (event.getMessage().contains(\"Wave:\")) {\n            message \u003d message.substring(message.indexOf(\": \") + 2);\n            currentWaveNumber \u003d Integer.parseInt(message.substring(0, message.indexOf(\u0027\u003c\u0027)));\n            infernoNpcs.clear();\n            panel.updateWave(currentWaveNumber);\n        }\n    }\n\n    @Subscribe\n    public void onGameStateChanged(GameStateChanged gameStateChanged) {\n        if (gameStateChanged.getGameState() !\u003d GameState.LOGGED_IN) {\n            return;\n        }\n\n        infernoNpcs.clear();\n        infernoPillars.clear();\n        recalculate();\n    }\n\n\n\t@Subscribe\n\tprivate void onNpcSpawned(NpcSpawned event) {\n\t\tif(!isInInferno()) return;\n\n        if(!INFERNO_NPC_LIST.contains(event.getNpc().getId())) return;\n\n\t\tinfernoNpcs.add(new InfernoNpc(event.getNpc()));\n        Coordinate clean \u003d new Coordinate(event.getNpc());\n        Coordinate scout \u003d clean.toScoutToolPoint();\n        log.debug(\"Npc has spawned at {} scout coordinate: {}\", clean, scout);\n        recalculate();\n\t}\n\n    void recalculate() {\n        List\u003cColourRegion\u003e npcLocations \u003d infernoNpcs.stream()\n                .map(InfernoNpc::getColourRegion)\n                .collect(Collectors.toList());\n\n\t\tList\u003cColourRegion\u003e pillars \u003d infernoPillars.stream()\n                .map(this::createGameObjectRegion)\n                .collect(Collectors.toList());\n\n        infernoMap \u003d generateBlankMap();\n\n        for (ColourRegion npcColourRegion : npcLocations) {\n            fillRegion(infernoMap, npcColourRegion);\n        }\n\n        for (ColourRegion pillarColourRegion : pillars) {\n            fillRegion(infernoMap, pillarColourRegion);\n        }\n\n        panel.updateGrid(infernoMap);\n    }\n\n    private Color[][] generateBlankMap() {\n        int width \u003d GRID_WIDTH;\n        int height \u003d GRID_HEIGHT;\n        Color[][] map \u003d new Color[width][height];\n\n        for (int x \u003d 0; x \u003c width; x++) {\n            for (int y \u003d 0; y \u003c height; y++) {\n                map[x][y] \u003d config.emptyColour();\n            }\n        }\n        return map;\n    }\n\n    private void fillRegion(Color[][] colorArray, ColourRegion colourRegion) {\n        for (int x \u003d colourRegion.getFrom().getX(); x \u003c\u003d colourRegion.getTo().getX(); x++) {\n            for (int y \u003d colourRegion.getFrom().getY(); y \u003c\u003d colourRegion.getTo().getY(); y++) {\n                colorArray[x][y] \u003d colourRegion.getColor();\n            }\n        }\n    }\n\n    @Subscribe\n    private void onGameObjectSpawned(GameObjectSpawned event) {\n        if(!isInInferno()) return;\n\n        if(!PILLAR_IDS.contains(event.getGameObject().getId())) return;\n\n        Coordinate clean \u003d new Coordinate(event.getGameObject());\n        Coordinate scout \u003d clean.toScoutToolPoint();\n        log.debug(\"Pillar has spawned at {} scout coordinate: {}\", clean, scout);\n        infernoPillars.add(event.getGameObject());\n        recalculate();\n    }\n\n    @Subscribe\n    private void onGameObjectDespawned(GameObjectDespawned event) {\n        if(!isInInferno()) return;\n\n        infernoPillars.remove(event.getGameObject());\n        recalculate();\n    }\n\n    private boolean isInInferno() {\n        return WorldPoint.fromLocalInstance(client, client.getLocalPlayer().getLocalLocation()).getRegionID() \u003d\u003d INFERNO_REGION;\n    }\n\n    @Provides\n    InfernoMapConfig provideConfig(ConfigManager configManager) {\n        return configManager.getConfig(InfernoMapConfig.class);\n    }\n\n    private ColourRegion createGameObjectRegion(GameObject gameObject) {\n        Coordinate southWest \u003d new Coordinate(gameObject.getWorldLocation().getRegionX() - 1, gameObject.getWorldLocation().getRegionY() - 1).toCleanPoint();\n        Coordinate northEast \u003d southWest.transform(gameObject.sizeX() - 1, gameObject.sizeY() - 1);\n        return new ColourRegion(southWest, northEast, Color.BLACK);\n    }\n\n    public String generateScoutUrl() {\n        StringBuilder url \u003d new StringBuilder(\"https://ifreedive-osrs.github.io/?\");\n\n        appendNpcData(url);\n        appendPillarFlags(url);\n        appendDegenFlag(url);\n\n        return url.toString();\n    }\n\n    private void appendNpcData(StringBuilder url) {\n        Map\u003cInteger, Integer\u003e npcIdToMobType \u003d createNpcIdToMobTypeMap();\n        int blobCount \u003d 0;\n\n        for (InfernoNpc npc : infernoNpcs) {\n            if (!npcIdToMobType.containsKey(npc.getNpc().getId())) {\n                continue;\n            }\n\n            // Convert to scout tool coordinates (north-west origin)\n            Coordinate scoutCoord \u003d getScoutCoordinate(npc.getColourRegion());\n\n            // Get mob type, handling blob differentiation\n            int baseMobType \u003d npcIdToMobType.get(npc.getNpc().getId());\n            int mobType \u003d baseMobType;\n\n            if (baseMobType \u003d\u003d 2) { // This is a blob/splitter\n                blobCount++;\n                if (blobCount \u003d\u003d 2) {\n                    mobType \u003d 3; // Second blob gets type 3\n                }\n            }\n\n            // Ensure coordinates are in valid range\n            if (!isValidScoutCoordinate(scoutCoord)) {\n                log.warn(\"Invalid coordinates for NPC {}: x\u003d{}, y\u003d{}\", npc.getNpc().getId(), scoutCoord.getX(), scoutCoord.getY());\n                continue;\n            }\n\n            // Format as XXYYT. (XX \u003d 2-digit x, YY \u003d 2-digit y, T \u003d mob type)\n            String npcData \u003d String.format(\"%02d%02d%d.\", scoutCoord.getX(), scoutCoord.getY(), mobType);\n            url.append(npcData);\n\n            log.debug(\"Added NPC {} at ({},{}) as type {} -\u003e {}\", npc.getNpc().getId(), scoutCoord.getX(), scoutCoord.getY(), mobType, npcData);\n        }\n    }\n\n    private Coordinate getScoutCoordinate(ColourRegion region) {\n        return region.getFrom().toScoutToolPoint();\n    }\n\n    private Coordinate getScoutCoordinate(GameObject gameObject) {\n        return new Coordinate(gameObject).toScoutToolPoint();\n    }\n\n    private boolean isValidScoutCoordinate(Coordinate coord) {\n        return coord.getX() \u003e\u003d 0 \u0026\u0026 coord.getX() \u003c GRID_WIDTH \u0026\u0026 coord.getY() \u003e\u003d 0 \u0026\u0026 coord.getY() \u003c GRID_HEIGHT;\n    }\n\n    private Map\u003cInteger, Integer\u003e createNpcIdToMobTypeMap() {\n        return Map.of(\n                NpcID.INFERNO_CREATURE_HARPIE, 1,      // Bat\n                NpcID.INFERNO_CREATURE_SPLITTER, 2,    // Blob\n                NpcID.INFERNO_CREATURE_MELEE, 5,       // Melee\n                NpcID.INFERNO_CREATURE_RANGER, 6,      // Range\n                NpcID.INFERNO_CREATURE_MAGER, 7        // Mager\n        );\n    }\n\n    private void appendPillarFlags(StringBuilder url) {\n        Map\u003cString, int[]\u003e expectedPillars \u003d getExpectedPillarPositions();\n\n        for (Map.Entry\u003cString, int[]\u003e entry : expectedPillars.entrySet()) {\n            String pillarName \u003d entry.getKey();\n            int[] expectedPos \u003d entry.getValue();\n\n            if (!pillarExistsAt(expectedPos[0], expectedPos[1])) {\n                url.append(getPillarFlag(pillarName));\n            }\n        }\n    }\n\n    private Map\u003cString, int[]\u003e getExpectedPillarPositions() {\n        // Positions in north-west coordinate system\n        return Map.of(\n                \"west\", new int[]{0, 9},    // West pillar\n                \"north\", new int[]{17, 7},  // North pillar\n                \"south\", new int[]{10, 23}  // South pillar\n        );\n    }\n\n    private boolean pillarExistsAt(int expectedX, int expectedY) {\n        return infernoPillars.stream().anyMatch(pillar -\u003e {\n            Coordinate scoutCoord \u003d getScoutCoordinate(pillar);\n            return scoutCoord.getX() \u003d\u003d expectedX \u0026\u0026 scoutCoord.getY() \u003d\u003d expectedY;\n        });\n    }\n\n    private String getPillarFlag(String pillarName) {\n        switch (pillarName) {\n            case \"west\":\n                return \".noWe\";\n            case \"north\":\n                return \".noN\";\n            case \"south\":\n                return \".noS\";\n            default:\n                return \"\";\n        }\n    }\n\n    private void appendDegenFlag(StringBuilder url) {\n        url.append(\".degeN\");\n    }\n}\n","filePath":"src\\main\\java\\com\\github\\therealguru\\Inferno2dMapPlugin.java"},{"fileName":"InfernoMapConfig.java","content":"package com.github.therealguru;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\nimport java.awt.*;\n\n@ConfigGroup(\"inferno-map-config\")\npublic interface InfernoMapConfig extends Config\n{\n\t@ConfigItem(\n\t\tkeyName \u003d \"batColour\",\n\t\tname \u003d \"Bat Colour\",\n\t\tdescription \u003d \"The colour for bats in the renderer\"\n\t)\n\tdefault Color batColour()\n\t{\n\t\treturn Color.PINK;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"blobColour\",\n\t\t\tname \u003d \"Blob Colour\",\n\t\t\tdescription \u003d \"The colour for blobs in the renderer\"\n\t)\n\tdefault Color blobColour()\n\t{\n\t\treturn Color.ORANGE;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"meleeColour\",\n\t\t\tname \u003d \"Melee Colour\",\n\t\t\tdescription \u003d \"The colour for meleers in the renderer\"\n\t)\n\tdefault Color meleeColour()\n\t{\n\t\treturn Color.RED;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"rangeColour\",\n\t\t\tname \u003d \"Range Colour\",\n\t\t\tdescription \u003d \"The colour for rangers in the renderer\"\n\t)\n\tdefault Color rangeColour()\n\t{\n\t\treturn Color.GREEN;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"mageColour\",\n\t\t\tname \u003d \"Mage Colour\",\n\t\t\tdescription \u003d \"The colour for magers in the renderer\"\n\t)\n\tdefault Color mageColour()\n\t{\n\t\treturn Color.BLUE;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"pillarColour\",\n\t\t\tname \u003d \"Pillar Colour\",\n\t\t\tdescription \u003d \"The colour for pillars in the renderer\"\n\t)\n\tdefault Color pillarColour()\n\t{\n\t\treturn Color.BLACK;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"emptyColour\",\n\t\t\tname \u003d \"Empty Colour\",\n\t\t\tdescription \u003d \"The colour for a blank space\"\n\t)\n\tdefault Color emptyColour()\n\t{\n\t\treturn Color.WHITE;\n\t}\n}\n","filePath":"src\\main\\java\\com\\github\\therealguru\\InfernoMapConfig.java"},{"fileName":"InfernoMapPluginPanel.java","content":"package com.github.therealguru;\n\nimport com.google.inject.Inject;\nimport net.runelite.client.ui.PluginPanel;\nimport net.runelite.client.util.LinkBrowser;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.datatransfer.StringSelection;\nimport java.awt.datatransfer.Clipboard;\nimport java.awt.event.MouseEvent;\nimport java.awt.event.MouseMotionListener;\nimport java.net.URI;\n\nimport static com.github.therealguru.Inferno2dMapPlugin.GRID_HEIGHT;\nimport static com.github.therealguru.Inferno2dMapPlugin.GRID_WIDTH;\n\npublic class InfernoMapPluginPanel extends PluginPanel {\n\n    private Color[][] colorGrid \u003d new Color[GRID_WIDTH][GRID_HEIGHT];\n    private JLabel waveLabel;\n    private MapCanvas mapCanvas;\n    private InfernoMapConfig config;\n    private Inferno2dMapPlugin plugin;\n\n    public InfernoMapPluginPanel(Inferno2dMapPlugin plugin, InfernoMapConfig config) {\n        super();\n        this.plugin \u003d plugin;\n        this.config \u003d config;\n        setLayout(new BorderLayout());\n        initializeComponents();\n    }\n\n    private void initializeComponents() {\n        // Header with wave info\n        JPanel headerPanel \u003d new JPanel(new FlowLayout(FlowLayout.LEFT));\n        waveLabel \u003d new JLabel(\"Current Wave: Unknown\");\n        waveLabel.setFont(waveLabel.getFont().deriveFont(Font.BOLD, 14f));\n        headerPanel.add(waveLabel);\n\n        // Key/Legend panel\n        JPanel keyPanel \u003d createKeyPanel();\n\n        // Map and buttons container\n        JPanel mapContainer \u003d new JPanel(new BorderLayout());\n\n        // Map canvas\n        mapCanvas \u003d new MapCanvas();\n        mapCanvas.setPreferredSize(new Dimension(348, 360));\n\n        // Button panel\n        JPanel buttonPanel \u003d createButtonPanel();\n\n        mapContainer.add(mapCanvas, BorderLayout.CENTER);\n        mapContainer.add(buttonPanel, BorderLayout.SOUTH);\n\n        // Layout\n        add(headerPanel, BorderLayout.NORTH);\n        add(keyPanel, BorderLayout.CENTER);\n        add(mapContainer, BorderLayout.SOUTH);\n    }\n\n    private JPanel createButtonPanel() {\n        JPanel buttonPanel \u003d new JPanel();\n        buttonPanel.setLayout(new BoxLayout(buttonPanel, BoxLayout.Y_AXIS));\n\n        JButton copyButton \u003d new JButton(\"Copy Scout Tool URL\");\n        copyButton.addActionListener(e -\u003e copyUrlToClipboard());\n        copyButton.setAlignmentX(Component.CENTER_ALIGNMENT);\n\n        JButton openButton \u003d new JButton(\"Open Scout Tool URL\");\n        openButton.addActionListener(e -\u003e openUrl());\n        openButton.setAlignmentX(Component.CENTER_ALIGNMENT);\n\n        buttonPanel.add(Box.createVerticalStrut(5));\n        buttonPanel.add(copyButton);\n        buttonPanel.add(Box.createVerticalStrut(5));\n        buttonPanel.add(openButton);\n        buttonPanel.add(Box.createVerticalStrut(5));\n\n        return buttonPanel;\n    }\n\n    private void copyUrlToClipboard() {\n        try {\n            String url \u003d plugin.generateScoutUrl();\n            StringSelection selection \u003d new StringSelection(url);\n            Clipboard clipboard \u003d Toolkit.getDefaultToolkit().getSystemClipboard();\n            clipboard.setContents(selection, null);\n\n            JOptionPane.showMessageDialog(this, \"URL copied to clipboard!\", \"Success\", JOptionPane.INFORMATION_MESSAGE);\n        } catch (Exception ex) {\n            JOptionPane.showMessageDialog(this, \"Failed to copy URL: \" + ex.getMessage(), \"Error\", JOptionPane.ERROR_MESSAGE);\n        }\n    }\n\n    private void openUrl() {\n        String url \u003d plugin.generateScoutUrl();\n        LinkBrowser.browse(url);\n    }\n\n    private JPanel createKeyPanel() {\n        JPanel keyPanel \u003d new JPanel();\n        keyPanel.setLayout(new BoxLayout(keyPanel, BoxLayout.Y_AXIS));\n        keyPanel.setBorder(BorderFactory.createTitledBorder(\"Key:\"));\n\n        // Create key entries\n        keyPanel.add(createKeyEntry(config.batColour(), \"Bat\"));\n        keyPanel.add(createKeyEntry(config.blobColour(), \"Blob\"));\n        keyPanel.add(createKeyEntry(config.meleeColour(), \"Meleer\"));\n        keyPanel.add(createKeyEntry(config.rangeColour(), \"Ranger\"));\n        keyPanel.add(createKeyEntry(config.mageColour(), \"Mager\"));\n        keyPanel.add(createKeyEntry(config.pillarColour(), \"Pillar\"));\n\n        return keyPanel;\n    }\n\n    private JPanel createKeyEntry(Color color, String label) {\n        JPanel entry \u003d new JPanel(new FlowLayout(FlowLayout.LEFT, 5, 2));\n\n        // Colored box\n        JPanel colorBox \u003d new JPanel();\n        colorBox.setBackground(color);\n        colorBox.setPreferredSize(new Dimension(15, 15));\n        colorBox.setBorder(BorderFactory.createLineBorder(Color.BLACK, 1));\n\n        // Label\n        JLabel textLabel \u003d new JLabel(label);\n\n        entry.add(colorBox);\n        entry.add(textLabel);\n\n        return entry;\n    }\n\n    public void updateWave(int wave) {\n        waveLabel.setText(\"Current Wave: \" + wave);\n    }\n\n    public void updateGrid(Color[][] grid) {\n        this.colorGrid \u003d grid;\n        mapCanvas.repaint();\n    }\n\n    private class MapCanvas extends JPanel {\n\n        public MapCanvas() {\n            super();\n            addMouseMotionListener(new MouseMotionListener() {\n                @Override\n                public void mouseDragged(MouseEvent e) {\n                    // Not needed for tooltips\n                }\n\n                @Override\n                public void mouseMoved(MouseEvent e) {\n                    updateTooltip(e.getX(), e.getY());\n                }\n            });\n        }\n\n        private void updateTooltip(int mouseX, int mouseY) {\n            // Calculate tile size and grid positioning (same logic as paintComponent)\n            int panelWidth \u003d getWidth();\n            int panelHeight \u003d getHeight();\n            int tileWidth \u003d panelWidth / GRID_WIDTH;\n            int tileHeight \u003d panelHeight / GRID_HEIGHT;\n            int tileSize \u003d Math.min(tileWidth, tileHeight);\n\n            // Center the grid\n            int startX \u003d (panelWidth - (GRID_WIDTH * tileSize)) / 2;\n            int startY \u003d (panelHeight - (GRID_HEIGHT * tileSize)) / 2;\n\n            // Check if mouse is within the grid bounds\n            int gridEndX \u003d startX + (GRID_WIDTH * tileSize);\n            int gridEndY \u003d startY + (GRID_HEIGHT * tileSize);\n\n            if (mouseX \u003e\u003d startX \u0026\u0026 mouseX \u003c gridEndX \u0026\u0026 mouseY \u003e\u003d startY \u0026\u0026 mouseY \u003c gridEndY) {\n                // Calculate which grid cell the mouse is over\n                int gridX \u003d (mouseX - startX) / tileSize;\n                int gridY \u003d (mouseY - startY) / tileSize;\n\n                // Ensure we\u0027re within bounds (safety check)\n                if (gridX \u003e\u003d 0 \u0026\u0026 gridX \u003c GRID_WIDTH \u0026\u0026 gridY \u003e\u003d 0 \u0026\u0026 gridY \u003c GRID_HEIGHT) {\n                    // Note: gridY is already in display coordinates, but our colorGrid uses flipped Y\n                    // The actual grid coordinates for tooltip should match the visual representation\n                    int actualGridY \u003d GRID_HEIGHT - 1 - gridY;\n                    setToolTipText(String.format(\"X: %d, Y: %d\", gridX, actualGridY));\n                } else {\n                    setToolTipText(null);\n                }\n            } else {\n                // Mouse is outside the grid\n                setToolTipText(null);\n            }\n        }\n\n        @Override\n        protected void paintComponent(Graphics g) {\n            super.paintComponent(g);\n\n            if (colorGrid \u003d\u003d null) return;\n\n            Graphics2D g2d \u003d (Graphics2D) g.create();\n\n            // Calculate tile size based on panel size\n            int panelWidth \u003d getWidth();\n            int panelHeight \u003d getHeight();\n            int tileWidth \u003d panelWidth / GRID_WIDTH;\n            int tileHeight \u003d panelHeight / GRID_HEIGHT;\n            int tileSize \u003d Math.min(tileWidth, tileHeight);\n\n            // Center the grid\n            int startX \u003d (panelWidth - (GRID_WIDTH * tileSize)) / 2;\n            int startY \u003d (panelHeight - (GRID_HEIGHT * tileSize)) / 2;\n\n            // Draw grid\n            for (int x \u003d 0; x \u003c GRID_WIDTH; x++) {\n                for (int y \u003d 0; y \u003c GRID_HEIGHT; y++) {\n                    int gridY \u003d GRID_HEIGHT - 1 - y;\n\n                    Color tileColor \u003d colorGrid[x][gridY];\n                    if (tileColor !\u003d null) {\n                        g2d.setColor(tileColor);\n                    } else {\n                        g2d.setColor(config.emptyColour());\n                    }\n\n                    int pixelX \u003d startX + (x * tileSize);\n                    int pixelY \u003d startY + (y * tileSize);\n\n                    g2d.fillRect(pixelX, pixelY, tileSize, tileSize);\n\n                    // Draw grid lines\n                    g2d.setColor(Color.GRAY);\n                    g2d.drawRect(pixelX, pixelY, tileSize, tileSize);\n                }\n            }\n\n            g2d.dispose();\n        }\n\n        @Override\n        public Dimension getPreferredSize() {\n            return new Dimension(280, 290);\n        }\n    }\n}","filePath":"src\\main\\java\\com\\github\\therealguru\\InfernoMapPluginPanel.java"},{"fileName":"InfernoNpc.java","content":"package com.github.therealguru;\n\nimport lombok.Getter;\nimport net.runelite.api.NPC;\n\nimport static com.github.therealguru.Inferno2dMapPlugin.NPC_ID_TO_COLOUR;\n\n@Getter\npublic class InfernoNpc {\n\n    private final NPC npc;\n    private final ColourRegion colourRegion;\n\n    public InfernoNpc(NPC npc) {\n        this.npc \u003d npc;\n        Coordinate southWest \u003d new Coordinate(npc);\n        Coordinate northEast \u003d southWest.transform(npc.getComposition().getSize() - 1, npc.getComposition().getSize() - 1);\n        this.colourRegion \u003d new ColourRegion(southWest, northEast, NPC_ID_TO_COLOUR.get(npc.getId()));\n    }\n}\n","filePath":"src\\main\\java\\com\\github\\therealguru\\InfernoNpc.java"},{"fileName":"Inferno2dMapPluginTest.java","content":"package com.github.therealguru;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class Inferno2dMapPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(Inferno2dMapPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\github\\therealguru\\Inferno2dMapPluginTest.java"}]},{"commit":"0f510f66937a828cea3f0b48960dc083c3c1ddca","repository":"https://github.com/kellygrillojr/OSRSLootTrackerPlugin.git","internalName":"osrsloottracker","files":[{"fileName":"AuthenticationManager.java","content":"package com.osrsloottracker;\n\nimport com.google.gson.Gson;\nimport com.google.gson.JsonObject;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport okhttp3.OkHttpClient;\nimport okhttp3.Request;\nimport okhttp3.Response;\n\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.util.LinkBrowser;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.io.IOException;\nimport java.net.URLEncoder;\nimport java.nio.charset.StandardCharsets;\nimport java.util.UUID;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.concurrent.ScheduledFuture;\nimport java.util.concurrent.TimeUnit;\nimport java.util.function.Consumer;\n\n/**\n * Manages Discord OAuth authentication flow for the plugin.\n * Uses web-based callback with polling instead of localhost server.\n */\n@Slf4j\n@Singleton\npublic class AuthenticationManager\n{\n    // Default Discord Client ID (PRODUCTION) - can be overridden via system property for dev\n    private static final String DEFAULT_DISCORD_CLIENT_ID \u003d \"1339214146356383744\";\n    private static final String DISCORD_OAUTH_URL \u003d \"https://discord.com/api/oauth2/authorize\";\n    private static final String OAUTH_SCOPES \u003d \"identify guilds\";\n    \n    private static String getDiscordClientId()\n    {\n        String envClientId \u003d System.getProperty(\"osrsloottracker.discord.clientId\");\n        return envClientId !\u003d null ? envClientId : DEFAULT_DISCORD_CLIENT_ID;\n    }\n    \n    // Polling settings\n    private static final int POLL_INTERVAL_MS \u003d 2000; // Poll every 2 seconds\n    private static final int POLL_TIMEOUT_MS \u003d 120000; // Give up after 2 minutes\n    \n    private final ScheduledExecutorService pollExecutor \u003d Executors.newSingleThreadScheduledExecutor();\n    \n    @Inject\n    private Gson gson;\n    \n    @Inject\n    private OkHttpClient okHttpClient;\n    \n    @Inject\n    private ConfigManager configManager;\n    \n    @Inject\n    private OSRSLootTrackerConfig config;\n    \n    @Getter\n    private boolean authenticated \u003d false;\n    \n    @Getter\n    private String discordId;\n    \n    @Getter\n    private String discordUsername;\n    \n    @Getter\n    private String authToken;\n    \n    private ScheduledFuture\u003c?\u003e pollTask;\n    private Consumer\u003cAuthResult\u003e authCallback;\n    private long pollStartTime;\n    \n    /**\n     * Check if we have stored authentication and restore it.\n     * We skip validation on startup - if the token is invalid/expired,\n     * API calls will fail with 401 and the user can re-login.\n     */\n    public void checkStoredAuth()\n    {\n        String storedToken \u003d config.authToken();\n        String storedDiscordId \u003d config.discordId();\n        String storedUsername \u003d config.discordUsername();\n        \n        if (storedToken !\u003d null \u0026\u0026 !storedToken.isEmpty())\n        {\n            // Trust the stored token without validation\n            // If it\u0027s invalid, API calls will fail and user can re-login\n            this.authToken \u003d storedToken;\n            this.discordId \u003d storedDiscordId;\n            this.discordUsername \u003d storedUsername;\n            this.authenticated \u003d true;\n            log.info(\"Restored authentication for user: {}\", discordUsername);\n        }\n        else\n        {\n            log.debug(\"No stored authentication found\");\n        }\n    }\n    \n    /**\n     * Start the Discord OAuth flow using web-based callback\n     * @param callback Called when authentication completes or fails\n     */\n    public void startOAuthFlow(Consumer\u003cAuthResult\u003e callback)\n    {\n        this.authCallback \u003d callback;\n        \n        try\n        {\n            // Generate unique session ID for this auth attempt\n            String sessionId \u003d UUID.randomUUID().toString();\n            \n            // Build OAuth URL - redirects to our web server, not localhost\n            String redirectUri \u003d getCallbackUrl();\n            \n            String authUrl \u003d DISCORD_OAUTH_URL + \n                \"?client_id\u003d\" + getDiscordClientId() +\n                \"\u0026redirect_uri\u003d\" + URLEncoder.encode(redirectUri, StandardCharsets.UTF_8) +\n                \"\u0026response_type\u003dcode\" +\n                \"\u0026scope\u003d\" + URLEncoder.encode(OAUTH_SCOPES, StandardCharsets.UTF_8) +\n                \"\u0026state\u003d\" + sessionId;\n            \n            log.debug(\"Starting OAuth flow with session: {}\", sessionId);\n            log.debug(\"Redirect URI: {}\", redirectUri);\n            \n            // Open browser using RuneLite\u0027s LinkBrowser\n            LinkBrowser.browse(authUrl);\n            log.debug(\"Opened browser for Discord authentication\");\n            \n            // Start polling for auth result\n            startPolling(sessionId);\n        }\n        catch (Exception e)\n        {\n            log.error(\"Error starting OAuth flow\", e);\n            callback.accept(AuthResult.error(\"Failed to start authentication: \" + e.getMessage()));\n        }\n    }\n    \n    /**\n     * Get the callback URL for OAuth\n     */\n    private String getCallbackUrl()\n    {\n        String apiEndpoint \u003d getApiEndpoint();\n        log.debug(\"Using API endpoint for callback: {}\", apiEndpoint);\n        return apiEndpoint + \"/auth/plugin-callback\";\n    }\n    \n    /**\n     * Get the current API endpoint (prioritizes system property, defaults to production)\n     */\n    public String getApiEndpoint()\n    {\n        String apiEndpoint \u003d System.getProperty(\"osrsloottracker.api\");\n        // Always default to production - don\u0027t use config (which might have stale persisted data)\n        return (apiEndpoint !\u003d null \u0026\u0026 !apiEndpoint.isEmpty()) \n            ? apiEndpoint \n            : \"https://osrsloottracker.com/api\";\n    }\n    \n    /**\n     * Start polling the backend for auth completion\n     */\n    private void startPolling(String sessionId)\n    {\n        // Cancel any existing poll task\n        if (pollTask !\u003d null \u0026\u0026 !pollTask.isDone())\n        {\n            pollTask.cancel(false);\n        }\n        \n        pollStartTime \u003d System.currentTimeMillis();\n        \n        pollTask \u003d pollExecutor.scheduleAtFixedRate(() -\u003e {\n            try\n            {\n                // Check for timeout\n                if (System.currentTimeMillis() - pollStartTime \u003e POLL_TIMEOUT_MS)\n                {\n                    log.warn(\"Authentication polling timed out\");\n                    pollTask.cancel(false);\n                    authCallback.accept(AuthResult.error(\"Authentication timed out. Please try again.\"));\n                    return;\n                }\n                \n                // Poll the session endpoint\n                String pollUrl \u003d getApiEndpoint() + \"/auth/plugin-session/\" + sessionId;\n                \n                Request request \u003d new Request.Builder()\n                    .url(pollUrl)\n                    .get()\n                    .build();\n                \n                try (Response response \u003d okHttpClient.newCall(request).execute())\n                {\n                    int responseCode \u003d response.code();\n                    \n                    if (responseCode \u003d\u003d 200 \u0026\u0026 response.body() !\u003d null)\n                    {\n                        String responseBody \u003d response.body().string();\n                        JsonObject json \u003d gson.fromJson(responseBody, JsonObject.class);\n                        String status \u003d json.get(\"status\").getAsString();\n                        \n                        if (\"complete\".equals(status))\n                        {\n                            // Success! Extract token and user info\n                            pollTask.cancel(false);\n                            \n                            this.authToken \u003d json.get(\"access_token\").getAsString();\n                            JsonObject user \u003d json.getAsJsonObject(\"user\");\n                            this.discordId \u003d user.get(\"discord_id\").getAsString();\n                            this.discordUsername \u003d user.get(\"discord_username\").getAsString();\n                            this.authenticated \u003d true;\n                            \n                            // Store in config using ConfigManager for proper persistence\n                            configManager.setConfiguration(\"osrsloottracker\", \"authToken\", authToken);\n                            configManager.setConfiguration(\"osrsloottracker\", \"discordId\", discordId);\n                            configManager.setConfiguration(\"osrsloottracker\", \"discordUsername\", discordUsername);\n                            \n                            log.info(\"Authentication successful for user: {}\", discordUsername);\n                            authCallback.accept(AuthResult.success(discordUsername));\n                        }\n                        else if (\"error\".equals(status))\n                        {\n                            // Auth failed\n                            pollTask.cancel(false);\n                            String error \u003d json.has(\"error\") ? json.get(\"error\").getAsString() : \"Unknown error\";\n                            log.error(\"Authentication failed: {}\", error);\n                            authCallback.accept(AuthResult.error(error));\n                        }\n                        // If status is \"pending\", continue polling\n                    }\n                    else\n                    {\n                        log.debug(\"Poll returned status {}, continuing...\", responseCode);\n                    }\n                }\n            }\n            catch (Exception e)\n            {\n                log.debug(\"Poll error (may be transient): {}\", e.getMessage());\n            }\n        }, 0, POLL_INTERVAL_MS, TimeUnit.MILLISECONDS);\n    }\n    \n    /**\n     * Clear authentication and log out\n     */\n    public void logout()\n    {\n        // Cancel any pending poll\n        if (pollTask !\u003d null \u0026\u0026 !pollTask.isDone())\n        {\n            pollTask.cancel(false);\n        }\n        \n        clearAuth();\n        log.info(\"User logged out\");\n    }\n    \n    private void clearAuth()\n    {\n        this.authToken \u003d null;\n        this.discordId \u003d null;\n        this.discordUsername \u003d null;\n        this.authenticated \u003d false;\n        \n        // Clear from config using ConfigManager for proper persistence\n        configManager.setConfiguration(\"osrsloottracker\", \"authToken\", \"\");\n        configManager.setConfiguration(\"osrsloottracker\", \"discordId\", \"\");\n        configManager.setConfiguration(\"osrsloottracker\", \"discordUsername\", \"\");\n    }\n    \n    /**\n     * Result of authentication attempt\n     */\n    public static class AuthResult\n    {\n        public final boolean success;\n        public final String message;\n        public final String username;\n        \n        private AuthResult(boolean success, String message, String username)\n        {\n            this.success \u003d success;\n            this.message \u003d message;\n            this.username \u003d username;\n        }\n        \n        public static AuthResult success(String username)\n        {\n            return new AuthResult(true, \"Authentication successful\", username);\n        }\n        \n        public static AuthResult error(String message)\n        {\n            return new AuthResult(false, message, null);\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\osrsloottracker\\AuthenticationManager.java"},{"fileName":"LootDropData.java","content":"package com.osrsloottracker;\n\nimport lombok.Data;\n\n/**\n * Data class representing a loot drop to be submitted\n */\n@Data\npublic class LootDropData\n{\n    private String username;\n    private String itemName;\n    private int quantity;\n    private int value;\n    private String sourceName; // Monster, raid, etc.\n    private String dropType;   // NPC, PLAYER, EVENT, COLLECTION_LOG, PET\n    private String screenshotUrl; // Optional screenshot URL\n    private long timestamp; // When the drop occurred\n    \n    // Constructor without screenshot\n    public LootDropData(String username, String itemName, int quantity, int value, \n                        String sourceName, String dropType)\n    {\n        this.username \u003d username;\n        this.itemName \u003d itemName;\n        this.quantity \u003d quantity;\n        this.value \u003d value;\n        this.sourceName \u003d sourceName;\n        this.dropType \u003d dropType;\n        this.screenshotUrl \u003d null;\n        this.timestamp \u003d System.currentTimeMillis();\n    }\n    \n    // Constructor with screenshot\n    public LootDropData(String username, String itemName, int quantity, int value, \n                        String sourceName, String dropType, String screenshotUrl)\n    {\n        this.username \u003d username;\n        this.itemName \u003d itemName;\n        this.quantity \u003d quantity;\n        this.value \u003d value;\n        this.sourceName \u003d sourceName;\n        this.dropType \u003d dropType;\n        this.screenshotUrl \u003d screenshotUrl;\n        this.timestamp \u003d System.currentTimeMillis();\n    }\n}\n\n","filePath":"src\\main\\java\\com\\osrsloottracker\\LootDropData.java"},{"fileName":"LootTrackerApiClient.java","content":"package com.osrsloottracker;\n\nimport com.google.gson.Gson;\nimport com.google.gson.JsonArray;\nimport com.google.gson.JsonElement;\nimport com.google.gson.JsonObject;\nimport com.google.gson.reflect.TypeToken;\nimport lombok.extern.slf4j.Slf4j;\nimport okhttp3.MediaType;\nimport okhttp3.OkHttpClient;\nimport okhttp3.Request;\nimport okhttp3.RequestBody;\nimport okhttp3.Response;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.io.IOException;\nimport java.util.List;\nimport java.util.concurrent.CompletableFuture;\n\n/**\n * API client for communicating with the OSRS Loot Tracker backend\n */\n@Slf4j\n@Singleton\npublic class LootTrackerApiClient\n{\n    private static final MediaType JSON \u003d MediaType.parse(\"application/json; charset\u003dutf-8\");\n    \n    @Inject\n    private Gson gson;\n    \n    @Inject\n    private OkHttpClient okHttpClient;\n    \n    @Inject\n    private OSRSLootTrackerConfig config;\n    \n    @Inject\n    private AuthenticationManager authManager;\n    \n    /**\n     * Submit a loot drop to the server(s)\n     * Uses the configured destinations (servers + channels)\n     * Filters channels based on per-channel minimum value thresholds\n     */\n    public void submitDrop(LootDropData drop) throws IOException\n    {\n        if (!authManager.isAuthenticated())\n        {\n            throw new IllegalStateException(\"Not authenticated\");\n        }\n        \n        int dropValue \u003d drop.getValue();\n        \n        // Get configured destinations from config\n        String destinationsJson \u003d config.dropDestinations();\n        \n        JsonObject body \u003d new JsonObject();\n        body.addProperty(\"username\", drop.getUsername());\n        body.addProperty(\"item_name\", drop.getItemName());\n        body.addProperty(\"quantity\", drop.getQuantity());\n        body.addProperty(\"item_value\", dropValue);\n        body.addProperty(\"monster_name\", drop.getSourceName());\n        body.addProperty(\"drop_type\", drop.getDropType());\n        \n        // Include screenshot URL if available\n        if (drop.getScreenshotUrl() !\u003d null \u0026\u0026 !drop.getScreenshotUrl().isEmpty())\n        {\n            body.addProperty(\"screenshot_url\", drop.getScreenshotUrl());\n        }\n        \n        // If we have destinations configured, use them\n        if (destinationsJson !\u003d null \u0026\u0026 !destinationsJson.isEmpty() \u0026\u0026 !destinationsJson.equals(\"[]\"))\n        {\n            // Parse and convert field names to match backend (guildId -\u003e guild_id, channelIds -\u003e channel_ids)\n            JsonArray rawDestinations \u003d gson.fromJson(destinationsJson, JsonArray.class);\n            JsonArray formattedDestinations \u003d new JsonArray();\n            \n            for (JsonElement elem : rawDestinations)\n            {\n                JsonObject rawDest \u003d elem.getAsJsonObject();\n                JsonObject formattedDest \u003d new JsonObject();\n                \n                formattedDest.addProperty(\"guild_id\", rawDest.get(\"guildId\").getAsString());\n                \n                // Check for new \u0027channels\u0027 format with per-channel min values\n                if (rawDest.has(\"channels\") \u0026\u0026 !rawDest.get(\"channels\").isJsonNull())\n                {\n                    JsonArray channels \u003d rawDest.getAsJsonArray(\"channels\");\n                    JsonArray filteredChannelIds \u003d new JsonArray();\n                    \n                    for (JsonElement chElem : channels)\n                    {\n                        JsonObject channel \u003d chElem.getAsJsonObject();\n                        String channelId \u003d channel.get(\"channelId\").getAsString();\n                        int minValue \u003d channel.has(\"minValue\") ? channel.get(\"minValue\").getAsInt() : 0;\n                        \n                        // Only include this channel if drop value meets the threshold\n                        if (dropValue \u003e\u003d minValue)\n                        {\n                            filteredChannelIds.add(channelId);\n                        }\n                    }\n                    \n                    // Only add this destination if at least one channel qualifies\n                    if (filteredChannelIds.size() \u003e 0)\n                    {\n                        formattedDest.add(\"channel_ids\", filteredChannelIds);\n                    }\n                    else\n                    {\n                        continue; // Skip this destination entirely\n                    }\n                }\n                // Fall back to legacy channelIds format (no per-channel filtering)\n                else if (rawDest.has(\"channelIds\") \u0026\u0026 !rawDest.get(\"channelIds\").isJsonNull())\n                {\n                    formattedDest.add(\"channel_ids\", rawDest.getAsJsonArray(\"channelIds\"));\n                }\n                \n                if (rawDest.has(\"eventId\") \u0026\u0026 !rawDest.get(\"eventId\").isJsonNull())\n                {\n                    formattedDest.addProperty(\"event_id\", rawDest.get(\"eventId\").getAsString());\n                }\n                \n                formattedDestinations.add(formattedDest);\n            }\n            \n            if (formattedDestinations.size() \u003d\u003d 0)\n            {\n                log.debug(\"No destinations meet value threshold for this drop ({}gp)\", dropValue);\n                return; // Don\u0027t submit if no destinations qualify\n            }\n            \n            body.add(\"destinations\", formattedDestinations);\n            log.debug(\"Submitting drop to {} destinations\", formattedDestinations.size());\n        }\n        else\n        {\n            // Fall back to legacy single-server mode\n            String serverId \u003d config.selectedServerId();\n            if (serverId \u003d\u003d null || serverId.isEmpty())\n            {\n                throw new IllegalStateException(\"No destinations configured\");\n            }\n            body.addProperty(\"guild_id\", serverId);\n            \n            if (!config.selectedEventId().isEmpty())\n            {\n                body.addProperty(\"event_id\", config.selectedEventId());\n            }\n        }\n        \n        String response \u003d post(\"/plugin/drops\", body.toString());\n        log.debug(\"Drop submission response: {}\", response);\n    }\n    \n    /**\n     * Submit multiple items from the same drop as a batch\n     * This sends one Discord message with all items instead of separate messages\n     * Filters channels based on per-channel minimum value thresholds\n     * \n     * @param items List of items in the drop\n     * @param rsn Player\u0027s RuneScape name\n     * @param sourceName Source of the drop (monster name, etc.)\n     * @param dropType Type of drop (NPC, PLAYER, etc.)\n     * @param screenshotUrl URL of screenshot (for premium guilds that saved it)\n     * @param screenshotBase64 Base64 screenshot data (for non-premium guilds, sent as attachment)\n     */\n    public void submitDropBatch(List\u003cOSRSLootTrackerPlugin.ProcessedItem\u003e items, String rsn, \n                                 String sourceName, String dropType, String screenshotUrl, \n                                 String screenshotBase64) throws IOException\n    {\n        if (!authManager.isAuthenticated())\n        {\n            throw new IllegalStateException(\"Not authenticated\");\n        }\n        \n        // Calculate total value for filtering\n        int totalValue \u003d 0;\n        for (OSRSLootTrackerPlugin.ProcessedItem item : items)\n        {\n            totalValue +\u003d item.value;\n        }\n        \n        // Get configured destinations from config\n        String destinationsJson \u003d config.dropDestinations();\n        \n        JsonObject body \u003d new JsonObject();\n        body.addProperty(\"username\", rsn);\n        body.addProperty(\"monster_name\", sourceName);\n        body.addProperty(\"drop_type\", dropType);\n        \n        // Build items array\n        JsonArray itemsArray \u003d new JsonArray();\n        for (OSRSLootTrackerPlugin.ProcessedItem item : items)\n        {\n            JsonObject itemObj \u003d new JsonObject();\n            itemObj.addProperty(\"item_name\", item.name);\n            itemObj.addProperty(\"quantity\", item.quantity);\n            itemObj.addProperty(\"item_value\", item.value);\n            itemsArray.add(itemObj);\n        }\n        body.add(\"items\", itemsArray);\n        body.addProperty(\"total_value\", totalValue);\n        \n        // Include screenshot URL if available (premium guilds)\n        if (screenshotUrl !\u003d null \u0026\u0026 !screenshotUrl.isEmpty())\n        {\n            body.addProperty(\"screenshot_url\", screenshotUrl);\n        }\n        \n        // Include base64 screenshot for non-premium guilds (sent as Discord attachment)\n        if (screenshotBase64 !\u003d null \u0026\u0026 !screenshotBase64.isEmpty())\n        {\n            body.addProperty(\"screenshot_base64\", screenshotBase64);\n        }\n        \n        // Add destinations - filter channels based on per-channel min values\n        if (destinationsJson !\u003d null \u0026\u0026 !destinationsJson.isEmpty() \u0026\u0026 !destinationsJson.equals(\"[]\"))\n        {\n            JsonArray rawDestinations \u003d gson.fromJson(destinationsJson, JsonArray.class);\n            JsonArray formattedDestinations \u003d new JsonArray();\n            \n            for (JsonElement elem : rawDestinations)\n            {\n                JsonObject rawDest \u003d elem.getAsJsonObject();\n                JsonObject formattedDest \u003d new JsonObject();\n                \n                formattedDest.addProperty(\"guild_id\", rawDest.get(\"guildId\").getAsString());\n                \n                // Check for new \u0027channels\u0027 format with per-channel min values and drop type filters\n                if (rawDest.has(\"channels\") \u0026\u0026 !rawDest.get(\"channels\").isJsonNull())\n                {\n                    JsonArray channels \u003d rawDest.getAsJsonArray(\"channels\");\n                    JsonArray filteredChannelIds \u003d new JsonArray();\n                    \n                    for (JsonElement chElem : channels)\n                    {\n                        JsonObject channel \u003d chElem.getAsJsonObject();\n                        String channelId \u003d channel.get(\"channelId\").getAsString();\n                        int minValue \u003d channel.has(\"minValue\") ? channel.get(\"minValue\").getAsInt() : 0;\n                        \n                        // Check if this channel accepts valuable drops (default to true for backward compatibility)\n                        boolean sendValuableDrops \u003d !channel.has(\"sendValuableDrops\") || channel.get(\"sendValuableDrops\").getAsBoolean();\n                        \n                        // Only include this channel if it accepts valuable drops and drop value meets threshold\n                        if (!sendValuableDrops)\n                        {\n                            log.debug(\"Channel {} excluded (sendValuableDrops\u003dfalse)\", channelId);\n                            continue;\n                        }\n                        \n                        if (totalValue \u003e\u003d minValue)\n                        {\n                            filteredChannelIds.add(channelId);\n                            log.debug(\"Channel {} included (drop {}gp \u003e\u003d min {}gp)\", channelId, totalValue, minValue);\n                        }\n                        else\n                        {\n                            log.debug(\"Channel {} excluded (drop {}gp \u003c min {}gp)\", channelId, totalValue, minValue);\n                        }\n                    }\n                    \n                    // Only add this destination if at least one channel qualifies\n                    if (filteredChannelIds.size() \u003e 0)\n                    {\n                        formattedDest.add(\"channel_ids\", filteredChannelIds);\n                    }\n                    else\n                    {\n                        log.debug(\"Skipping guild {} - no channels meet value/type filter\", rawDest.get(\"guildId\").getAsString());\n                        continue; // Skip this destination entirely\n                    }\n                }\n                // Fall back to legacy channelIds format (no per-channel filtering)\n                else if (rawDest.has(\"channelIds\") \u0026\u0026 !rawDest.get(\"channelIds\").isJsonNull())\n                {\n                    formattedDest.add(\"channel_ids\", rawDest.getAsJsonArray(\"channelIds\"));\n                }\n                \n                if (rawDest.has(\"eventId\") \u0026\u0026 !rawDest.get(\"eventId\").isJsonNull())\n                {\n                    formattedDest.addProperty(\"event_id\", rawDest.get(\"eventId\").getAsString());\n                }\n                \n                formattedDestinations.add(formattedDest);\n            }\n            \n            if (formattedDestinations.size() \u003d\u003d 0)\n            {\n                log.debug(\"No destinations meet value threshold for this drop ({}gp)\", totalValue);\n                return; // Don\u0027t submit if no destinations qualify\n            }\n            \n            body.add(\"destinations\", formattedDestinations);\n            log.debug(\"Submitting batch drop ({} items, {}gp) to {} destinations\", \n                items.size(), totalValue, formattedDestinations.size());\n        }\n        else\n        {\n            String serverId \u003d config.selectedServerId();\n            if (serverId \u003d\u003d null || serverId.isEmpty())\n            {\n                throw new IllegalStateException(\"No destinations configured\");\n            }\n            body.addProperty(\"guild_id\", serverId);\n        }\n        \n        String response \u003d post(\"/plugin/drops/batch\", body.toString());\n        log.debug(\"Batch drop submission response: {}\", response);\n    }\n    \n    /**\n     * Result of screenshot upload attempt\n     */\n    public static class ScreenshotResult\n    {\n        public final String url;        // URL if saved (premium), null otherwise\n        public final String base64;     // Base64 data to send as attachment (non-premium)\n        public final boolean saved;     // Whether the image was saved to disk\n        \n        public ScreenshotResult(String url, String base64, boolean saved)\n        {\n            this.url \u003d url;\n            this.base64 \u003d base64;\n            this.saved \u003d saved;\n        }\n    }\n    \n    /**\n     * Upload a screenshot to the server\n     * @param imageBytes PNG image bytes\n     * @param guildId The guild ID to save the screenshot under\n     * @return ScreenshotResult with URL (if premium/saved) or base64 (if non-premium)\n     */\n    public ScreenshotResult uploadScreenshot(byte[] imageBytes, String guildId) throws IOException\n    {\n        if (!authManager.isAuthenticated())\n        {\n            throw new IllegalStateException(\"Not authenticated\");\n        }\n        \n        if (guildId \u003d\u003d null || guildId.isEmpty())\n        {\n            throw new IllegalArgumentException(\"Guild ID is required for screenshot upload\");\n        }\n        \n        // Convert to base64 for JSON upload\n        String base64Image \u003d java.util.Base64.getEncoder().encodeToString(imageBytes);\n        \n        JsonObject body \u003d new JsonObject();\n        body.addProperty(\"image\", base64Image);\n        body.addProperty(\"guild_id\", guildId);\n        \n        String response \u003d post(\"/plugin/upload-screenshot\", body.toString());\n        JsonObject responseJson \u003d gson.fromJson(response, JsonObject.class);\n        \n        // Screenshot is now validated but NOT saved at upload time\n        // Saving happens per-destination in drop submission (only for premium guilds)\n        // We always return base64 so drop submission can handle it per-destination\n        log.debug(\"Screenshot validated - will be saved per-destination for premium guilds\");\n        return new ScreenshotResult(null, base64Image, false);\n    }\n    \n    /**\n     * Get the first configured guild ID from destinations\n     * @return The first guild ID, or null if none configured\n     */\n    public String getFirstConfiguredGuildId()\n    {\n        String destinationsJson \u003d config.dropDestinations();\n        if (destinationsJson !\u003d null \u0026\u0026 !destinationsJson.isEmpty() \u0026\u0026 !destinationsJson.equals(\"[]\"))\n        {\n            try\n            {\n                JsonArray rawDestinations \u003d gson.fromJson(destinationsJson, JsonArray.class);\n                if (rawDestinations.size() \u003e 0)\n                {\n                    JsonObject firstDest \u003d rawDestinations.get(0).getAsJsonObject();\n                    return firstDest.get(\"guildId\").getAsString();\n                }\n            }\n            catch (Exception e)\n            {\n                log.error(\"Error parsing destinations JSON\", e);\n            }\n        }\n        // Fall back to legacy single-server mode\n        return config.selectedServerId();\n    }\n    \n    /**\n     * Get the minimum value threshold across all configured channels.\n     * This is the lowest min value of any channel, so we know the minimum\n     * value a drop needs to be to go anywhere.\n     * @return The lowest min value (0 if no channels configured or using legacy format)\n     */\n    public int getLowestChannelMinValue()\n    {\n        String destinationsJson \u003d config.dropDestinations();\n        if (destinationsJson \u003d\u003d null || destinationsJson.isEmpty() || destinationsJson.equals(\"[]\"))\n        {\n            return 0; // No destinations, use global default\n        }\n        \n        try\n        {\n            JsonArray rawDestinations \u003d gson.fromJson(destinationsJson, JsonArray.class);\n            int lowestMin \u003d Integer.MAX_VALUE;\n            boolean hasAnyChannel \u003d false;\n            \n            for (JsonElement elem : rawDestinations)\n            {\n                JsonObject rawDest \u003d elem.getAsJsonObject();\n                \n                // Check for new \u0027channels\u0027 format\n                if (rawDest.has(\"channels\") \u0026\u0026 !rawDest.get(\"channels\").isJsonNull())\n                {\n                    JsonArray channels \u003d rawDest.getAsJsonArray(\"channels\");\n                    for (JsonElement chElem : channels)\n                    {\n                        JsonObject channel \u003d chElem.getAsJsonObject();\n                        int minValue \u003d channel.has(\"minValue\") ? channel.get(\"minValue\").getAsInt() : 0;\n                        lowestMin \u003d Math.min(lowestMin, minValue);\n                        hasAnyChannel \u003d true;\n                    }\n                }\n                // Legacy format - no per-channel filtering\n                else if (rawDest.has(\"channelIds\") \u0026\u0026 !rawDest.get(\"channelIds\").isJsonNull())\n                {\n                    JsonArray channelIds \u003d rawDest.getAsJsonArray(\"channelIds\");\n                    if (channelIds.size() \u003e 0)\n                    {\n                        lowestMin \u003d 0; // Legacy channels have no min value filter\n                        hasAnyChannel \u003d true;\n                    }\n                }\n            }\n            \n            return hasAnyChannel ? (lowestMin \u003d\u003d Integer.MAX_VALUE ? 0 : lowestMin) : 0;\n        }\n        catch (Exception e)\n        {\n            log.error(\"Error parsing destinations for min value check\", e);\n            return 0;\n        }\n    }\n    \n    /**\n     * Check if a drop with the given value would be sent to at least one channel\n     * @param dropValue The GP value of the drop\n     * @return true if at least one channel would receive this drop\n     */\n    public boolean wouldDropBeSent(int dropValue)\n    {\n        String destinationsJson \u003d config.dropDestinations();\n        if (destinationsJson \u003d\u003d null || destinationsJson.isEmpty() || destinationsJson.equals(\"[]\"))\n        {\n            // Check legacy single-server mode\n            return config.selectedServerId() !\u003d null \u0026\u0026 !config.selectedServerId().isEmpty();\n        }\n        \n        try\n        {\n            JsonArray rawDestinations \u003d gson.fromJson(destinationsJson, JsonArray.class);\n            \n            for (JsonElement elem : rawDestinations)\n            {\n                JsonObject rawDest \u003d elem.getAsJsonObject();\n                \n                // Check for new \u0027channels\u0027 format\n                if (rawDest.has(\"channels\") \u0026\u0026 !rawDest.get(\"channels\").isJsonNull())\n                {\n                    JsonArray channels \u003d rawDest.getAsJsonArray(\"channels\");\n                    for (JsonElement chElem : channels)\n                    {\n                        JsonObject channel \u003d chElem.getAsJsonObject();\n                        int minValue \u003d channel.has(\"minValue\") ? channel.get(\"minValue\").getAsInt() : 0;\n                        if (dropValue \u003e\u003d minValue)\n                        {\n                            return true; // At least one channel would receive this drop\n                        }\n                    }\n                }\n                // Legacy format - no per-channel filtering, always accept\n                else if (rawDest.has(\"channelIds\") \u0026\u0026 !rawDest.get(\"channelIds\").isJsonNull())\n                {\n                    JsonArray channelIds \u003d rawDest.getAsJsonArray(\"channelIds\");\n                    if (channelIds.size() \u003e 0)\n                    {\n                        return true;\n                    }\n                }\n            }\n            \n            return false; // No channel would receive this drop\n        }\n        catch (Exception e)\n        {\n            log.error(\"Error checking if drop would be sent\", e);\n            return true; // Assume yes on error\n        }\n    }\n    \n    /**\n     * Submit a collection log entry (legacy - no screenshot)\n     */\n    public void submitCollectionLogEntry(LootDropData drop) throws IOException\n    {\n        submitCollectionLogEntry(drop, null, null);\n    }\n    \n    /**\n     * Submit a collection log entry with optional screenshot\n     */\n    public void submitCollectionLogEntry(LootDropData drop, String screenshotUrl, String screenshotBase64) throws IOException\n    {\n        if (!authManager.isAuthenticated())\n        {\n            throw new IllegalStateException(\"Not authenticated\");\n        }\n        \n        // Get configured destinations\n        String destinationsJson \u003d config.dropDestinations();\n        \n        JsonObject body \u003d new JsonObject();\n        body.addProperty(\"username\", drop.getUsername());\n        body.addProperty(\"item_name\", drop.getItemName());\n        \n        // Add screenshot if available\n        if (screenshotUrl !\u003d null \u0026\u0026 !screenshotUrl.isEmpty())\n        {\n            body.addProperty(\"image_url\", screenshotUrl);\n        }\n        if (screenshotBase64 !\u003d null \u0026\u0026 !screenshotBase64.isEmpty())\n        {\n            body.addProperty(\"image_base64\", screenshotBase64);\n        }\n        \n        // Build destinations, filtering channels that have sendCollectionLog enabled\n        if (destinationsJson !\u003d null \u0026\u0026 !destinationsJson.isEmpty() \u0026\u0026 !destinationsJson.equals(\"[]\"))\n        {\n            JsonArray rawDestinations \u003d gson.fromJson(destinationsJson, JsonArray.class);\n            JsonArray formattedDestinations \u003d new JsonArray();\n            \n            for (JsonElement destElem : rawDestinations)\n            {\n                JsonObject rawDest \u003d destElem.getAsJsonObject();\n                JsonObject formattedDest \u003d new JsonObject();\n                \n                formattedDest.addProperty(\"guild_id\", rawDest.get(\"guildId\").getAsString());\n                \n                // Filter channels that accept collection log entries\n                if (rawDest.has(\"channels\") \u0026\u0026 rawDest.get(\"channels\").isJsonArray())\n                {\n                    JsonArray channels \u003d rawDest.get(\"channels\").getAsJsonArray();\n                    JsonArray filteredChannelIds \u003d new JsonArray();\n                    \n                    for (int i \u003d 0; i \u003c channels.size(); i++)\n                    {\n                        JsonObject ch \u003d channels.get(i).getAsJsonObject();\n                        \n                        // Check if this channel accepts collection log (default to true for backward compat)\n                        boolean sendCollectionLog \u003d !ch.has(\"sendCollectionLog\") || ch.get(\"sendCollectionLog\").getAsBoolean();\n                        \n                        if (!sendCollectionLog)\n                        {\n                            log.debug(\"Channel excluded from collection log (sendCollectionLog\u003dfalse)\");\n                            continue;\n                        }\n                        \n                        // Get channel ID (check both formats)\n                        String channelId \u003d null;\n                        if (ch.has(\"channelId\") \u0026\u0026 !ch.get(\"channelId\").isJsonNull())\n                        {\n                            channelId \u003d ch.get(\"channelId\").getAsString();\n                        }\n                        else if (ch.has(\"id\") \u0026\u0026 !ch.get(\"id\").isJsonNull())\n                        {\n                            channelId \u003d ch.get(\"id\").getAsString();\n                        }\n                        \n                        if (channelId !\u003d null)\n                        {\n                            filteredChannelIds.add(channelId);\n                            log.debug(\"Channel {} included for collection log\", channelId);\n                        }\n                    }\n                    \n                    // Only add destination if at least one channel qualifies\n                    if (filteredChannelIds.size() \u003e 0)\n                    {\n                        formattedDest.add(\"channel_ids\", filteredChannelIds);\n                    }\n                    else\n                    {\n                        log.debug(\"Skipping guild {} for collection log - no channels accept collection log\", \n                            rawDest.get(\"guildId\").getAsString());\n                        continue;\n                    }\n                }\n                // Fallback: legacy channelIds format (send to all)\n                else if (rawDest.has(\"channelIds\") \u0026\u0026 rawDest.get(\"channelIds\").isJsonArray())\n                {\n                    formattedDest.add(\"channel_ids\", rawDest.get(\"channelIds\").getAsJsonArray());\n                }\n                else\n                {\n                    log.debug(\"Skipping guild {} for collection log - no channels configured\", \n                        rawDest.get(\"guildId\").getAsString());\n                    continue;\n                }\n                \n                if (rawDest.has(\"eventId\") \u0026\u0026 !rawDest.get(\"eventId\").isJsonNull())\n                {\n                    formattedDest.addProperty(\"event_id\", rawDest.get(\"eventId\").getAsString());\n                }\n                \n                formattedDestinations.add(formattedDest);\n            }\n            \n            if (formattedDestinations.size() \u003d\u003d 0)\n            {\n                log.debug(\"No destinations accept collection log entries, skipping submission\");\n                return;\n            }\n            \n            body.add(\"destinations\", formattedDestinations);\n            \n            // For backward compatibility, also set guild_id from first destination\n            JsonObject firstDest \u003d formattedDestinations.get(0).getAsJsonObject();\n            body.addProperty(\"guild_id\", firstDest.get(\"guild_id\").getAsString());\n            body.add(\"channel_ids\", firstDest.get(\"channel_ids\").getAsJsonArray());\n        }\n        else\n        {\n            body.addProperty(\"guild_id\", config.selectedServerId());\n            if (!config.selectedEventId().isEmpty())\n            {\n                body.addProperty(\"event_id\", config.selectedEventId());\n            }\n        }\n        \n        post(\"/plugin/collection-log\", body.toString());\n    }\n    \n    /**\n     * Submit a pet drop (legacy - no screenshot)\n     */\n    public void submitPetDrop(LootDropData drop, String message) throws IOException\n    {\n        submitPetDrop(drop, message, null, null, null);\n    }\n    \n    /**\n     * Submit a pet drop with optional screenshot (legacy without pet name)\n     */\n    public void submitPetDrop(LootDropData drop, String message, String screenshotUrl, String screenshotBase64) throws IOException\n    {\n        submitPetDrop(drop, message, null, screenshotUrl, screenshotBase64);\n    }\n    \n    /**\n     * Submit a pet drop with optional screenshot and pet name\n     */\n    public void submitPetDrop(LootDropData drop, String message, String petName, String screenshotUrl, String screenshotBase64) throws IOException\n    {\n        if (!authManager.isAuthenticated())\n        {\n            throw new IllegalStateException(\"Not authenticated\");\n        }\n        \n        // Get configured destinations\n        String destinationsJson \u003d config.dropDestinations();\n        \n        JsonObject body \u003d new JsonObject();\n        body.addProperty(\"username\", drop.getUsername());\n        body.addProperty(\"message\", message);\n        \n        // Add pet name if available\n        if (petName !\u003d null \u0026\u0026 !petName.isEmpty())\n        {\n            body.addProperty(\"pet_name\", petName);\n        }\n        \n        // Add screenshot if available\n        if (screenshotUrl !\u003d null \u0026\u0026 !screenshotUrl.isEmpty())\n        {\n            body.addProperty(\"image_url\", screenshotUrl);\n        }\n        if (screenshotBase64 !\u003d null \u0026\u0026 !screenshotBase64.isEmpty())\n        {\n            body.addProperty(\"image_base64\", screenshotBase64);\n        }\n        \n        // Build destinations, filtering channels that have sendPets enabled\n        if (destinationsJson !\u003d null \u0026\u0026 !destinationsJson.isEmpty() \u0026\u0026 !destinationsJson.equals(\"[]\"))\n        {\n            JsonArray rawDestinations \u003d gson.fromJson(destinationsJson, JsonArray.class);\n            JsonArray formattedDestinations \u003d new JsonArray();\n            \n            for (JsonElement destElem : rawDestinations)\n            {\n                JsonObject rawDest \u003d destElem.getAsJsonObject();\n                JsonObject formattedDest \u003d new JsonObject();\n                \n                formattedDest.addProperty(\"guild_id\", rawDest.get(\"guildId\").getAsString());\n                \n                // Filter channels that accept pet drops\n                if (rawDest.has(\"channels\") \u0026\u0026 rawDest.get(\"channels\").isJsonArray())\n                {\n                    JsonArray channels \u003d rawDest.get(\"channels\").getAsJsonArray();\n                    JsonArray filteredChannelIds \u003d new JsonArray();\n                    \n                    for (int i \u003d 0; i \u003c channels.size(); i++)\n                    {\n                        JsonObject ch \u003d channels.get(i).getAsJsonObject();\n                        \n                        // Check if this channel accepts pets (default to true for backward compat)\n                        boolean sendPets \u003d !ch.has(\"sendPets\") || ch.get(\"sendPets\").getAsBoolean();\n                        \n                        if (!sendPets)\n                        {\n                            log.debug(\"Channel excluded from pet drops (sendPets\u003dfalse)\");\n                            continue;\n                        }\n                        \n                        // Get channel ID (check both formats)\n                        String channelId \u003d null;\n                        if (ch.has(\"channelId\") \u0026\u0026 !ch.get(\"channelId\").isJsonNull())\n                        {\n                            channelId \u003d ch.get(\"channelId\").getAsString();\n                        }\n                        else if (ch.has(\"id\") \u0026\u0026 !ch.get(\"id\").isJsonNull())\n                        {\n                            channelId \u003d ch.get(\"id\").getAsString();\n                        }\n                        \n                        if (channelId !\u003d null)\n                        {\n                            filteredChannelIds.add(channelId);\n                            log.debug(\"Channel {} included for pet drop\", channelId);\n                        }\n                    }\n                    \n                    // Only add destination if at least one channel qualifies\n                    if (filteredChannelIds.size() \u003e 0)\n                    {\n                        formattedDest.add(\"channel_ids\", filteredChannelIds);\n                    }\n                    else\n                    {\n                        log.debug(\"Skipping guild {} for pet drop - no channels accept pets\", \n                            rawDest.get(\"guildId\").getAsString());\n                        continue;\n                    }\n                }\n                // Fallback: legacy channelIds format (send to all)\n                else if (rawDest.has(\"channelIds\") \u0026\u0026 rawDest.get(\"channelIds\").isJsonArray())\n                {\n                    formattedDest.add(\"channel_ids\", rawDest.get(\"channelIds\").getAsJsonArray());\n                }\n                else\n                {\n                    log.debug(\"Skipping guild {} for pet drop - no channels configured\", \n                        rawDest.get(\"guildId\").getAsString());\n                    continue;\n                }\n                \n                if (rawDest.has(\"eventId\") \u0026\u0026 !rawDest.get(\"eventId\").isJsonNull())\n                {\n                    formattedDest.addProperty(\"event_id\", rawDest.get(\"eventId\").getAsString());\n                }\n                \n                formattedDestinations.add(formattedDest);\n            }\n            \n            if (formattedDestinations.size() \u003d\u003d 0)\n            {\n                log.debug(\"No destinations accept pet drops, skipping submission\");\n                return;\n            }\n            \n            body.add(\"destinations\", formattedDestinations);\n            \n            // For backward compatibility, also set guild_id from first destination\n            JsonObject firstDest \u003d formattedDestinations.get(0).getAsJsonObject();\n            body.addProperty(\"guild_id\", firstDest.get(\"guild_id\").getAsString());\n            body.add(\"channel_ids\", firstDest.get(\"channel_ids\").getAsJsonArray());\n        }\n        else\n        {\n            body.addProperty(\"guild_id\", config.selectedServerId());\n            if (!config.selectedEventId().isEmpty())\n            {\n                body.addProperty(\"event_id\", config.selectedEventId());\n            }\n        }\n        \n        post(\"/plugin/pets\", body.toString());\n    }\n    \n    /**\n     * Get list of servers the user has access to\n     */\n    public CompletableFuture\u003cList\u003cServerInfo\u003e\u003e getServers()\n    {\n        return CompletableFuture.supplyAsync(() -\u003e {\n            try\n            {\n                log.debug(\"Fetching servers from API...\");\n                String response \u003d get(\"/plugin/servers\");\n                log.debug(\"Server response: {}\", response);\n                List\u003cServerInfo\u003e servers \u003d gson.fromJson(response, new TypeToken\u003cList\u003cServerInfo\u003e\u003e(){}.getType());\n                log.debug(\"Parsed {} servers\", servers !\u003d null ? servers.size() : 0);\n                return servers;\n            }\n            catch (Exception e)\n            {\n                log.error(\"Failed to get servers: {} - {}\", e.getClass().getSimpleName(), e.getMessage());\n                return List.of();\n            }\n        });\n    }\n    \n    /**\n     * Get list of text channels for a server\n     */\n    public CompletableFuture\u003cList\u003cChannelInfo\u003e\u003e getServerChannels(String serverId)\n    {\n        return CompletableFuture.supplyAsync(() -\u003e {\n            try\n            {\n                log.debug(\"Fetching channels for server {}...\", serverId);\n                String response \u003d get(\"/plugin/servers/\" + serverId + \"/channels\");\n                List\u003cChannelInfo\u003e channels \u003d gson.fromJson(response, new TypeToken\u003cList\u003cChannelInfo\u003e\u003e(){}.getType());\n                log.debug(\"Found {} channels\", channels !\u003d null ? channels.size() : 0);\n                return channels;\n            }\n            catch (Exception e)\n            {\n                log.error(\"Failed to get channels for server {}: {}\", serverId, e.getMessage());\n                return List.of();\n            }\n        });\n    }\n    \n    /**\n     * Get list of active events for a server\n     */\n    public CompletableFuture\u003cList\u003cEventInfo\u003e\u003e getServerEvents(String serverId)\n    {\n        return CompletableFuture.supplyAsync(() -\u003e {\n            try\n            {\n                String response \u003d get(\"/plugin/servers/\" + serverId + \"/events\");\n                return gson.fromJson(response, new TypeToken\u003cList\u003cEventInfo\u003e\u003e(){}.getType());\n            }\n            catch (Exception e)\n            {\n                log.error(\"Failed to get events for server {}\", serverId, e);\n                return List.of();\n            }\n        });\n    }\n    \n    /**\n     * Get event details including tile requirements\n     */\n    public CompletableFuture\u003cEventDetails\u003e getEventDetails(String eventId)\n    {\n        return CompletableFuture.supplyAsync(() -\u003e {\n            try\n            {\n                String response \u003d get(\"/plugin/events/\" + eventId);\n                return gson.fromJson(response, EventDetails.class);\n            }\n            catch (Exception e)\n            {\n                log.error(\"Failed to get event details for {}\", eventId, e);\n                return null;\n            }\n        });\n    }\n    \n    /**\n     * Get user\u0027s team progress for an event\n     */\n    public CompletableFuture\u003cTeamProgress\u003e getTeamProgress(String eventId)\n    {\n        return CompletableFuture.supplyAsync(() -\u003e {\n            try\n            {\n                String response \u003d get(\"/plugin/events/\" + eventId + \"/progress\");\n                return gson.fromJson(response, TeamProgress.class);\n            }\n            catch (Exception e)\n            {\n                log.error(\"Failed to get team progress for event {}\", eventId, e);\n                return null;\n            }\n        });\n    }\n    \n    /**\n     * Get recent drops for the user\n     */\n    public CompletableFuture\u003cList\u003cRecentDrop\u003e\u003e getRecentDrops(int limit)\n    {\n        return CompletableFuture.supplyAsync(() -\u003e {\n            try\n            {\n                String response \u003d get(\"/plugin/drops/recent?limit\u003d\" + limit);\n                return gson.fromJson(response, new TypeToken\u003cList\u003cRecentDrop\u003e\u003e(){}.getType());\n            }\n            catch (Exception e)\n            {\n                log.error(\"Failed to get recent drops\", e);\n                return List.of();\n            }\n        });\n    }\n    \n    /**\n     * Get user loot statistics for a specific RSN\n     */\n    public CompletableFuture\u003cUserStats\u003e getUserStats(String rsn)\n    {\n        return CompletableFuture.supplyAsync(() -\u003e {\n            try\n            {\n                String endpoint \u003d \"/plugin/stats\";\n                if (rsn !\u003d null \u0026\u0026 !rsn.isEmpty())\n                {\n                    endpoint +\u003d \"?rsn\u003d\" + java.net.URLEncoder.encode(rsn, java.nio.charset.StandardCharsets.UTF_8);\n                }\n                log.debug(\"Fetching user stats for RSN: {}\", rsn);\n                String response \u003d get(endpoint);\n                log.debug(\"Stats response: {}\", response.length() \u003e 200 ? response.substring(0, 200) + \"...\" : response);\n                UserStats stats \u003d gson.fromJson(response, UserStats.class);\n                log.debug(\"Parsed stats: {} total drops, {} total value\", \n                    stats !\u003d null ? stats.total_drops : \"null\", \n                    stats !\u003d null ? stats.total_value : \"null\");\n                return stats;\n            }\n            catch (Exception e)\n            {\n                log.error(\"Failed to get user stats: {}\", e.getMessage());\n                return null;\n            }\n        });\n    }\n    \n    /**\n     * Get the current API endpoint (prioritizes system property, defaults to production)\n     */\n    private String getApiEndpoint()\n    {\n        String apiEndpoint \u003d System.getProperty(\"osrsloottracker.api\");\n        // Always default to production - don\u0027t use config (which might have stale persisted data)\n        return (apiEndpoint !\u003d null \u0026\u0026 !apiEndpoint.isEmpty()) \n            ? apiEndpoint \n            : \"https://osrsloottracker.com/api\";\n    }\n    \n    private String get(String endpoint) throws IOException\n    {\n        String fullUrl \u003d getApiEndpoint() + endpoint;\n        log.debug(\"GET request to: {}\", fullUrl);\n        \n        Request request \u003d new Request.Builder()\n            .url(fullUrl)\n            .header(\"Authorization\", \"Bearer \" + authManager.getAuthToken())\n            .header(\"Content-Type\", \"application/json\")\n            .get()\n            .build();\n        \n        try (Response response \u003d okHttpClient.newCall(request).execute())\n        {\n            int responseCode \u003d response.code();\n            log.debug(\"Response code: {}\", responseCode);\n            \n            String responseBody \u003d response.body() !\u003d null ? response.body().string() : \"\";\n            \n            if (response.isSuccessful())\n            {\n                return responseBody;\n            }\n            else\n            {\n                log.error(\"GET {} failed with status {}: {}\", endpoint, responseCode, responseBody);\n                throw new IOException(\"Request failed with status: \" + responseCode + \" - \" + responseBody);\n            }\n        }\n    }\n    \n    /**\n     * Perform a POST request\n     */\n    private String post(String endpoint, String body) throws IOException\n    {\n        String fullUrl \u003d getApiEndpoint() + endpoint;\n        \n        RequestBody requestBody \u003d RequestBody.create(JSON, body);\n        \n        Request request \u003d new Request.Builder()\n            .url(fullUrl)\n            .header(\"Authorization\", \"Bearer \" + authManager.getAuthToken())\n            .header(\"Content-Type\", \"application/json\")\n            .post(requestBody)\n            .build();\n        \n        try (Response response \u003d okHttpClient.newCall(request).execute())\n        {\n            int responseCode \u003d response.code();\n            String responseBody \u003d response.body() !\u003d null ? response.body().string() : \"\";\n            \n            if (response.isSuccessful())\n            {\n                return responseBody;\n            }\n            else\n            {\n                throw new IOException(\"Request failed with status: \" + responseCode + \" - \" + responseBody);\n            }\n        }\n    }\n    \n    // \u003d\u003d\u003d Data classes \u003d\u003d\u003d\n    \n    public static class ServerInfo\n    {\n        public String id;\n        public String name;\n        public String icon;\n        public boolean hasBot;\n    }\n    \n    public static class ChannelInfo\n    {\n        public String id;\n        public String name;\n        public String type; // \"text\" or \"announcement\"\n        public String category; // Category name, if any\n        \n        @Override\n        public String toString()\n        {\n            return (category !\u003d null ? \"[\" + category + \"] \" : \"\") + \"#\" + name;\n        }\n    }\n    \n    public static class EventInfo\n    {\n        public String id;\n        public String name;\n        public String type; // \"bingo\" or \"snakes_ladders\"\n        public String status;\n        public String startDate;\n        public String endDate;\n    }\n    \n    public static class EventDetails\n    {\n        public String id;\n        public String name;\n        public String type;\n        public List\u003cTileInfo\u003e tiles;\n        public TeamInfo team;\n    }\n    \n    public static class TileInfo\n    {\n        public int id;\n        public int position;\n        public String name;\n        public List\u003cRequirementInfo\u003e requirements;\n        public String status; // \"locked\", \"pending\", \"completed\"\n    }\n    \n    public static class RequirementInfo\n    {\n        public int id;\n        public String itemName;\n        public int requiredQuantity;\n        public int currentQuantity;\n    }\n    \n    public static class TeamInfo\n    {\n        public String id;\n        public String name;\n        public int points;\n        public List\u003cTeamMember\u003e members;\n    }\n    \n    public static class TeamMember\n    {\n        public String discordId;\n        public String runescapeName;\n    }\n    \n    public static class TeamProgress\n    {\n        public int totalTiles;\n        public int completedTiles;\n        public int pendingTiles;\n        public int points;\n        public List\u003cTileProgress\u003e tiles;\n    }\n    \n    public static class TileProgress\n    {\n        public int tileId;\n        public String status;\n        public List\u003cRequirementProgress\u003e requirements;\n    }\n    \n    public static class RequirementProgress\n    {\n        public int requirementId;\n        public String itemName;\n        public int required;\n        public int current;\n    }\n    \n    public static class RecentDrop\n    {\n        public String id;\n        public String itemName;\n        public int quantity;\n        public long value;\n        public String monsterName;\n        public String createdAt;\n    }\n    \n    public static class UserStats\n    {\n        public int total_drops;\n        public long total_value;\n        public List\u003cTopItem\u003e top_items;\n        public List\u003cTopItem\u003e recent_activity;\n        public List\u003cString\u003e rsns;\n        public PeriodStats periods;\n    }\n    \n    public static class TopItem\n    {\n        public String item_name;\n        public int quantity;\n        public long value;\n        public String source;\n        public String date;\n    }\n    \n    public static class PeriodStats\n    {\n        public PeriodData today;\n        public PeriodData week;\n        public PeriodData month;\n    }\n    \n    public static class PeriodData\n    {\n        public int drops;\n        public long value;\n    }\n}\n\n","filePath":"src\\main\\java\\com\\osrsloottracker\\LootTrackerApiClient.java"},{"fileName":"OSRSLootTrackerConfig.java","content":"package com.osrsloottracker;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\nimport net.runelite.client.config.Range;\n\n@ConfigGroup(\"osrsloottracker\")\npublic interface OSRSLootTrackerConfig extends Config\n{\n    // Internal section keys (no visible UI - items are hidden)\n    String authSection \u003d \"authentication\";\n    String eventsSection \u003d \"events\";\n\n    @ConfigSection(\n        name \u003d \"Tracking\",\n        description \u003d \"What to track\",\n        position \u003d 1\n    )\n    String trackingSection \u003d \"tracking\";\n\n    // Filters section removed - per-channel min values are now in Destinations dialog\n    // Keeping the key for hidden config items\n    String filtersSection \u003d \"filters\";\n\n    // \u003d\u003d\u003d Authentication Section (Hidden - internal use only) \u003d\u003d\u003d\n    \n    @ConfigItem(\n        keyName \u003d \"apiEndpoint\",\n        name \u003d \"API Endpoint\",\n        description \u003d \"The API endpoint for the loot tracker service\",\n        section \u003d authSection,\n        hidden \u003d true,\n        position \u003d 0\n    )\n    default String apiEndpoint()\n    {\n        // Read from system property if set (for dev/prod switching via Gradle)\n        // Otherwise defaults to production\n        String envApi \u003d System.getProperty(\"osrsloottracker.api\");\n        return envApi !\u003d null ? envApi : \"https://osrsloottracker.com/api\";\n    }\n\n    @ConfigItem(\n        keyName \u003d \"authToken\",\n        name \u003d \"Auth Token\",\n        description \u003d \"Your authentication token (set automatically after Discord login)\",\n        section \u003d authSection,\n        hidden \u003d true,\n        secret \u003d true,\n        position \u003d 1\n    )\n    default String authToken()\n    {\n        return \"\";\n    }\n\n    @ConfigItem(\n        keyName \u003d \"authToken\",\n        name \u003d \"\",\n        description \u003d \"\",\n        hidden \u003d true\n    )\n    void setAuthToken(String token);\n\n    @ConfigItem(\n        keyName \u003d \"discordId\",\n        name \u003d \"Discord ID\",\n        description \u003d \"Your Discord ID (set automatically after login)\",\n        section \u003d authSection,\n        hidden \u003d true,\n        position \u003d 2\n    )\n    default String discordId()\n    {\n        return \"\";\n    }\n\n    @ConfigItem(\n        keyName \u003d \"discordId\",\n        name \u003d \"\",\n        description \u003d \"\",\n        hidden \u003d true\n    )\n    void setDiscordId(String id);\n\n    @ConfigItem(\n        keyName \u003d \"discordUsername\",\n        name \u003d \"Discord Username\",\n        description \u003d \"Your Discord username (set automatically after login)\",\n        section \u003d authSection,\n        hidden \u003d true,\n        position \u003d 3\n    )\n    default String discordUsername()\n    {\n        return \"\";\n    }\n\n    @ConfigItem(\n        keyName \u003d \"discordUsername\",\n        name \u003d \"\",\n        description \u003d \"\",\n        hidden \u003d true\n    )\n    void setDiscordUsername(String username);\n\n    // \u003d\u003d\u003d Tracking Section \u003d\u003d\u003d\n\n    @ConfigItem(\n        keyName \u003d \"trackLoot\",\n        name \u003d \"Track Valuable Drops\",\n        description \u003d \"Sends messages to Discord when valuable drops over the minimum value are received\",\n        section \u003d trackingSection,\n        position \u003d 0\n    )\n    default boolean trackLoot()\n    {\n        return true;\n    }\n\n    @ConfigItem(\n        keyName \u003d \"trackCollectionLog\",\n        name \u003d \"Track Collection Log\",\n        description \u003d \"Track new collection log entries\",\n        section \u003d trackingSection,\n        position \u003d 1\n    )\n    default boolean trackCollectionLog()\n    {\n        return true;\n    }\n\n    @ConfigItem(\n        keyName \u003d \"trackPets\",\n        name \u003d \"Track Pets\",\n        description \u003d \"Track pet drops\",\n        section \u003d trackingSection,\n        position \u003d 2\n    )\n    default boolean trackPets()\n    {\n        return true;\n    }\n\n    @ConfigItem(\n        keyName \u003d \"captureScreenshots\",\n        name \u003d \"Capture Screenshots\",\n        description \u003d \"Take a screenshot when valuable loot is received and include it with the drop\",\n        section \u003d trackingSection,\n        position \u003d 3\n    )\n    default boolean captureScreenshots()\n    {\n        return true;\n    }\n\n    // \u003d\u003d\u003d Filters Section \u003d\u003d\u003d\n    \n    // Note: minLootValue is now deprecated - per-channel minimum values are configured\n    // in the Destinations dialog. This is kept for backward compatibility but hidden.\n\n    @ConfigItem(\n        keyName \u003d \"minLootValue\",\n        name \u003d \"Minimum Value\",\n        description \u003d \"Deprecated: Use per-channel values in Configure Destinations instead\",\n        section \u003d filtersSection,\n        hidden \u003d true,\n        position \u003d 0\n    )\n    @Range(min \u003d 0, max \u003d 100000000)\n    default int minLootValue()\n    {\n        return 100000; // 100k default\n    }\n\n    // Note: includeUntradeable is not yet implemented - hidden for now\n    @ConfigItem(\n        keyName \u003d \"includeUntradeable\",\n        name \u003d \"Include Untradeable\",\n        description \u003d \"Include untradeable items (pets, uniques, etc.) - not yet implemented\",\n        section \u003d filtersSection,\n        hidden \u003d true,\n        position \u003d 1\n    )\n    default boolean includeUntradeable()\n    {\n        return true;\n    }\n\n    // \u003d\u003d\u003d Events Section \u003d\u003d\u003d\n\n    // Server/Event selection is done through the panel UI, not config\n    @ConfigItem(\n        keyName \u003d \"selectedServerId\",\n        name \u003d \"Selected Server\",\n        description \u003d \"The Discord server ID to send drops to\",\n        section \u003d eventsSection,\n        hidden \u003d true,\n        position \u003d 0\n    )\n    default String selectedServerId()\n    {\n        return \"\";\n    }\n\n    @ConfigItem(\n        keyName \u003d \"selectedServerId\",\n        name \u003d \"\",\n        description \u003d \"\",\n        hidden \u003d true\n    )\n    void setSelectedServerId(String serverId);\n\n    @ConfigItem(\n        keyName \u003d \"selectedEventId\",\n        name \u003d \"Selected Event\",\n        description \u003d \"The Bingo/Event ID to participate in\",\n        section \u003d eventsSection,\n        hidden \u003d true,\n        position \u003d 1\n    )\n    default String selectedEventId()\n    {\n        return \"\";\n    }\n\n    @ConfigItem(\n        keyName \u003d \"selectedEventId\",\n        name \u003d \"\",\n        description \u003d \"\",\n        hidden \u003d true\n    )\n    void setSelectedEventId(String eventId);\n\n    @ConfigItem(\n        keyName \u003d \"autoJoinEvents\",\n        name \u003d \"Auto-Join Events\",\n        description \u003d \"Automatically join active events on your selected server\",\n        section \u003d eventsSection,\n        hidden \u003d true,\n        position \u003d 2\n    )\n    default boolean autoJoinEvents()\n    {\n        return false;\n    }\n    \n    // Drop destinations - JSON array of { guild_id, channel_ids: [], event_id? }\n    @ConfigItem(\n        keyName \u003d \"dropDestinations\",\n        name \u003d \"Drop Destinations\",\n        description \u003d \"Configured servers and channels to send drops to (JSON)\",\n        section \u003d eventsSection,\n        hidden \u003d true,\n        position \u003d 3\n    )\n    default String dropDestinations()\n    {\n        return \"[]\";\n    }\n    \n    @ConfigItem(\n        keyName \u003d \"dropDestinations\",\n        name \u003d \"\",\n        description \u003d \"\",\n        hidden \u003d true\n    )\n    void setDropDestinations(String destinations);\n}\n\n","filePath":"src\\main\\java\\com\\osrsloottracker\\OSRSLootTrackerConfig.java"},{"fileName":"OSRSLootTrackerModule.java","content":"package com.osrsloottracker;\n\nimport com.google.inject.AbstractModule;\nimport com.google.inject.Provides;\nimport javax.inject.Singleton;\n\n/**\n * Guice module for dependency injection bindings\n */\npublic class OSRSLootTrackerModule extends AbstractModule\n{\n    @Override\n    protected void configure()\n    {\n        bind(AuthenticationManager.class).in(Singleton.class);\n        bind(LootTrackerApiClient.class).in(Singleton.class);\n    }\n}\n\n","filePath":"src\\main\\java\\com\\osrsloottracker\\OSRSLootTrackerModule.java"},{"fileName":"OSRSLootTrackerPanel.java","content":"package com.osrsloottracker;\n\nimport com.google.gson.Gson;\nimport com.google.gson.reflect.TypeToken;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.PluginPanel;\nimport net.runelite.client.util.ImageUtil;\nimport net.runelite.client.util.LinkBrowser;\nimport net.runelite.client.util.QuantityFormatter;\n\nimport javax.inject.Inject;\nimport javax.swing.*;\nimport javax.swing.border.EmptyBorder;\nimport java.awt.*;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.awt.image.BufferedImage;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.stream.Collectors;\n\n/**\n * Side panel for the OSRS Loot Tracker plugin\n */\n@Slf4j\npublic class OSRSLootTrackerPanel extends PluginPanel\n{\n    private static final Color BRAND_COLOR \u003d new Color(88, 101, 242); // Discord blurple\n    private static final Color SUCCESS_COLOR \u003d new Color(87, 242, 135);\n    private static final Color WARNING_COLOR \u003d new Color(254, 231, 92);\n    private static final Color ERROR_COLOR \u003d new Color(237, 66, 69);\n    \n    private final AuthenticationManager authManager;\n    private final LootTrackerApiClient apiClient;\n    private final OSRSLootTrackerConfig config;\n    private final ConfigManager configManager;\n    private final Gson gson;\n    \n    // Reference to main plugin for test methods\n    private OSRSLootTrackerPlugin plugin;\n    \n    // UI Components\n    private JPanel authPanel;\n    private JPanel mainPanel;\n    private JPanel recentDropsPanel;\n    private JPanel destinationsPanel;\n    private JPanel statsPanel;\n    private JLabel statusLabel;\n    private JLabel usernameLabel;\n    \n    // Stats labels\n    private JLabel totalDropsLabel;\n    private JLabel totalValueLabel;\n    private JLabel todayDropsLabel;\n    private JLabel todayValueLabel;\n    private JLabel weekDropsLabel;\n    private JLabel weekValueLabel;\n    \n    // Tracking status labels (for live updates)\n    private JLabel lootDropsStatusLabel;\n    private JLabel collectionLogStatusLabel;\n    private JLabel petDropsStatusLabel;\n    \n    // Cached data\n    private List\u003cLootTrackerApiClient.ServerInfo\u003e availableServers \u003d new ArrayList\u003c\u003e();\n    private Map\u003cString, List\u003cLootTrackerApiClient.ChannelInfo\u003e\u003e serverChannelsCache \u003d new HashMap\u003c\u003e();\n    \n    private final List\u003cLootDropData\u003e recentDrops \u003d new ArrayList\u003c\u003e();\n    private static final int MAX_RECENT_DROPS \u003d 10;\n    \n    // Callback to get current RSN from the plugin (on client thread)\n    private java.util.function.Supplier\u003cString\u003e rsnSupplier \u003d () -\u003e null;\n    \n    @Inject\n    public OSRSLootTrackerPanel(AuthenticationManager authManager, LootTrackerApiClient apiClient, OSRSLootTrackerConfig config, ConfigManager configManager, Gson gson)\n    {\n        super(false); // Don\u0027t wrap in scroll pane - we handle our own scrolling\n        this.authManager \u003d authManager;\n        this.apiClient \u003d apiClient;\n        this.config \u003d config;\n        this.configManager \u003d configManager;\n        this.gson \u003d gson;\n    }\n    \n    /**\n     * Set reference to the main plugin (for test methods)\n     */\n    public void setPlugin(OSRSLootTrackerPlugin plugin)\n    {\n        this.plugin \u003d plugin;\n    }\n    \n    public void init()\n    {\n        setLayout(new BorderLayout());\n        setBackground(ColorScheme.DARK_GRAY_COLOR);\n        setBorder(new EmptyBorder(10, 10, 10, 10));\n        \n        buildPanel(this);\n        \n        updateAuthState();\n    }\n    \n    private void buildPanel(JPanel wrapper)\n    {\n        wrapper.removeAll();\n        \n        // Header\n        JPanel headerPanel \u003d buildHeader();\n        wrapper.add(headerPanel, BorderLayout.NORTH);\n        \n        // Main content\n        JPanel contentPanel \u003d new JPanel();\n        contentPanel.setLayout(new BoxLayout(contentPanel, BoxLayout.Y_AXIS));\n        contentPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n        \n        // Auth panel (shown when not logged in)\n        authPanel \u003d buildAuthPanel();\n        contentPanel.add(authPanel);\n        \n        // Main panel (shown when logged in)\n        mainPanel \u003d buildMainPanel();\n        contentPanel.add(mainPanel);\n        \n        wrapper.add(contentPanel, BorderLayout.CENTER);\n        \n        revalidate();\n        repaint();\n    }\n    \n    private JPanel buildHeader()\n    {\n        JPanel header \u003d new JPanel(new BorderLayout());\n        header.setBackground(ColorScheme.DARK_GRAY_COLOR);\n        header.setBorder(new EmptyBorder(0, 0, 10, 0));\n        \n        // Title\n        JLabel title \u003d new JLabel(\"OSRS Loot Tracker\");\n        title.setFont(FontManager.getRunescapeBoldFont());\n        title.setForeground(BRAND_COLOR);\n        header.add(title, BorderLayout.WEST);\n        \n        // Settings button\n        JButton settingsBtn \u003d new JButton(\"\");\n        settingsBtn.setToolTipText(\"Open website\");\n        settingsBtn.addActionListener(e -\u003e LinkBrowser.browse(\"https://osrsloottracker.com\"));\n        header.add(settingsBtn, BorderLayout.EAST);\n        \n        return header;\n    }\n    \n    private JPanel buildAuthPanel()\n    {\n        JPanel panel \u003d new JPanel();\n        panel.setLayout(new GridBagLayout());\n        panel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        panel.setBorder(new EmptyBorder(30, 20, 30, 20));\n        \n        GridBagConstraints gbc \u003d new GridBagConstraints();\n        gbc.gridx \u003d 0;\n        gbc.fill \u003d GridBagConstraints.HORIZONTAL;\n        gbc.anchor \u003d GridBagConstraints.CENTER;\n        \n        // Content wrapper for vertical centering\n        JPanel contentPanel \u003d new JPanel();\n        contentPanel.setLayout(new BoxLayout(contentPanel, BoxLayout.Y_AXIS));\n        contentPanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        \n        // Discord-style icon\n        JPanel iconWrapper \u003d new JPanel(new FlowLayout(FlowLayout.CENTER, 0, 0));\n        iconWrapper.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        JLabel iconLabel \u003d new JLabel(\"\");\n        iconLabel.setFont(new Font(\"Segoe UI Emoji\", Font.PLAIN, 56));\n        iconLabel.setForeground(new Color(88, 101, 242));\n        iconWrapper.add(iconLabel);\n        contentPanel.add(iconWrapper);\n        \n        contentPanel.add(Box.createVerticalStrut(20));\n        \n        // Welcome text - line 1\n        JPanel textWrapper1 \u003d new JPanel(new FlowLayout(FlowLayout.CENTER, 0, 0));\n        textWrapper1.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        JLabel welcomeLabel1 \u003d new JLabel(\"Connect with Discord to\");\n        welcomeLabel1.setForeground(Color.WHITE);\n        welcomeLabel1.setFont(FontManager.getRunescapeSmallFont());\n        textWrapper1.add(welcomeLabel1);\n        contentPanel.add(textWrapper1);\n        \n        // Welcome text - line 2\n        JPanel textWrapper2 \u003d new JPanel(new FlowLayout(FlowLayout.CENTER, 0, 0));\n        textWrapper2.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        JLabel welcomeLabel2 \u003d new JLabel(\"track your loot!\");\n        welcomeLabel2.setForeground(Color.WHITE);\n        welcomeLabel2.setFont(FontManager.getRunescapeSmallFont());\n        textWrapper2.add(welcomeLabel2);\n        contentPanel.add(textWrapper2);\n        \n        contentPanel.add(Box.createVerticalStrut(20));\n        \n        // Login button wrapper for centering\n        JPanel buttonWrapper \u003d new JPanel(new FlowLayout(FlowLayout.CENTER, 0, 0));\n        buttonWrapper.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        \n        JButton loginBtn \u003d new JButton(\"Login with Discord\");\n        loginBtn.setBackground(BRAND_COLOR);\n        loginBtn.setForeground(Color.WHITE);\n        loginBtn.setFocusPainted(false);\n        loginBtn.setBorderPainted(false);\n        loginBtn.setFont(FontManager.getRunescapeSmallFont());\n        loginBtn.setCursor(new Cursor(Cursor.HAND_CURSOR));\n        loginBtn.setPreferredSize(new Dimension(160, 32));\n        loginBtn.addActionListener(e -\u003e startLogin());\n        \n        // Hover effect\n        loginBtn.addMouseListener(new MouseAdapter() {\n            @Override\n            public void mouseEntered(MouseEvent e) {\n                loginBtn.setBackground(new Color(71, 82, 196)); // Darker on hover\n            }\n            @Override\n            public void mouseExited(MouseEvent e) {\n                loginBtn.setBackground(BRAND_COLOR);\n            }\n        });\n        \n        buttonWrapper.add(loginBtn);\n        contentPanel.add(buttonWrapper);\n        \n        contentPanel.add(Box.createVerticalStrut(15));\n        \n        // Status label wrapper\n        JPanel statusWrapper \u003d new JPanel(new FlowLayout(FlowLayout.CENTER, 0, 0));\n        statusWrapper.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        statusLabel \u003d new JLabel(\" \");\n        statusLabel.setForeground(new Color(130, 130, 130));\n        statusLabel.setFont(FontManager.getRunescapeSmallFont());\n        statusWrapper.add(statusLabel);\n        contentPanel.add(statusWrapper);\n        \n        gbc.gridy \u003d 0;\n        panel.add(contentPanel, gbc);\n        \n        return panel;\n    }\n    \n    private JPanel buildMainPanel()\n    {\n        JPanel panel \u003d new JPanel();\n        panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));\n        panel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n        \n        // User info section\n        JPanel userPanel \u003d new JPanel(new BorderLayout());\n        userPanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        userPanel.setBorder(new EmptyBorder(10, 10, 10, 10));\n        \n        usernameLabel \u003d new JLabel(\"Not logged in\");\n        usernameLabel.setForeground(Color.WHITE);\n        usernameLabel.setFont(FontManager.getRunescapeSmallFont());\n        userPanel.add(usernameLabel, BorderLayout.WEST);\n        \n        JButton logoutBtn \u003d new JButton(\"Logout\");\n        logoutBtn.setFont(FontManager.getRunescapeSmallFont());\n        logoutBtn.addActionListener(e -\u003e logout());\n        userPanel.add(logoutBtn, BorderLayout.EAST);\n        \n        panel.add(userPanel);\n        panel.add(Box.createVerticalStrut(10));\n        \n        // Stats section\n        statsPanel \u003d buildStatsPanel();\n        panel.add(statsPanel);\n        panel.add(Box.createVerticalStrut(10));\n        \n        // Recent drops section\n        JPanel recentSection \u003d buildRecentDropsSection();\n        panel.add(recentSection);\n        panel.add(Box.createVerticalStrut(15));\n        \n        // Tracking status\n        JPanel trackingPanel \u003d buildTrackingStatusPanel();\n        panel.add(trackingPanel);\n        panel.add(Box.createVerticalStrut(15));\n        \n        // Destinations section header (at bottom)\n        JPanel destHeader \u003d new JPanel(new BorderLayout());\n        destHeader.setBackground(ColorScheme.DARK_GRAY_COLOR);\n        \n        JLabel destLabel \u003d new JLabel(\"Drop Destinations\");\n        destLabel.setForeground(BRAND_COLOR);\n        destLabel.setFont(FontManager.getRunescapeBoldFont());\n        destHeader.add(destLabel, BorderLayout.WEST);\n        \n        JButton configureBtn \u003d new JButton(\"Configure\");\n        configureBtn.setFont(FontManager.getRunescapeSmallFont());\n        configureBtn.addActionListener(e -\u003e openDestinationsDialog());\n        destHeader.add(configureBtn, BorderLayout.EAST);\n        \n        panel.add(destHeader);\n        panel.add(Box.createVerticalStrut(5));\n        \n        // Current destinations display\n        destinationsPanel \u003d new JPanel();\n        destinationsPanel.setLayout(new BoxLayout(destinationsPanel, BoxLayout.Y_AXIS));\n        destinationsPanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        destinationsPanel.setBorder(new EmptyBorder(8, 8, 8, 8));\n        \n        panel.add(destinationsPanel);\n        \n        // Open dashboard button\n        panel.add(Box.createVerticalStrut(10));\n        JButton dashboardBtn \u003d new JButton(\"Open Dashboard\");\n        dashboardBtn.setAlignmentX(Component.CENTER_ALIGNMENT);\n        dashboardBtn.addActionListener(e -\u003e LinkBrowser.browse(\"https://osrsloottracker.com/dashboard\"));\n        panel.add(dashboardBtn);\n        \n        return panel;\n    }\n    \n    private JPanel buildStatsPanel()\n    {\n        JPanel panel \u003d new JPanel(new BorderLayout());\n        panel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        panel.setBorder(new EmptyBorder(10, 10, 10, 10));\n        \n        // Header\n        JLabel headerLabel \u003d new JLabel(\" Your Loot Stats\");\n        headerLabel.setForeground(BRAND_COLOR);\n        headerLabel.setFont(FontManager.getRunescapeBoldFont());\n        panel.add(headerLabel, BorderLayout.NORTH);\n        \n        // Stats grid - use GridLayout for equal sizing (3 rows x 2 columns)\n        JPanel statsGrid \u003d new JPanel(new GridLayout(3, 2, 8, 8));\n        statsGrid.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        statsGrid.setBorder(new EmptyBorder(8, 0, 0, 0));\n        \n        // Row 1: Total drops and Total value\n        JPanel totalDropsBox \u003d createStatBox(\"Total Drops\", \"0\");\n        totalDropsLabel \u003d (JLabel) ((JPanel) totalDropsBox.getComponent(1)).getComponent(0);\n        statsGrid.add(totalDropsBox);\n        \n        JPanel totalValueBox \u003d createStatBox(\"Total Value\", \"0 GP\");\n        totalValueLabel \u003d (JLabel) ((JPanel) totalValueBox.getComponent(1)).getComponent(0);\n        statsGrid.add(totalValueBox);\n        \n        // Row 2: Week\u0027s drops and Week\u0027s value\n        JPanel weekDropsBox \u003d createStatBox(\"Week\u0027s Drops\", \"0\");\n        weekDropsLabel \u003d (JLabel) ((JPanel) weekDropsBox.getComponent(1)).getComponent(0);\n        statsGrid.add(weekDropsBox);\n        \n        JPanel weekValueBox \u003d createStatBox(\"Week\u0027s Value\", \"0 GP\");\n        weekValueLabel \u003d (JLabel) ((JPanel) weekValueBox.getComponent(1)).getComponent(0);\n        statsGrid.add(weekValueBox);\n        \n        // Row 3: Today\u0027s drops and Today\u0027s value\n        JPanel todayDropsBox \u003d createStatBox(\"Today\u0027s Drops\", \"0\");\n        todayDropsLabel \u003d (JLabel) ((JPanel) todayDropsBox.getComponent(1)).getComponent(0);\n        statsGrid.add(todayDropsBox);\n        \n        JPanel todayValueBox \u003d createStatBox(\"Today\u0027s Value\", \"0 GP\");\n        todayValueLabel \u003d (JLabel) ((JPanel) todayValueBox.getComponent(1)).getComponent(0);\n        statsGrid.add(todayValueBox);\n        \n        panel.add(statsGrid, BorderLayout.CENTER);\n        \n        return panel;\n    }\n    \n    private JPanel createStatBox(String title, String value)\n    {\n        JPanel box \u003d new JPanel();\n        box.setLayout(new BoxLayout(box, BoxLayout.Y_AXIS));\n        box.setBackground(new Color(30, 30, 30));\n        box.setBorder(new EmptyBorder(5, 8, 5, 8));\n        \n        JLabel titleLabel \u003d new JLabel(title);\n        titleLabel.setForeground(new Color(150, 150, 150));\n        titleLabel.setFont(FontManager.getRunescapeSmallFont());\n        box.add(titleLabel);\n        \n        JPanel valueWrapper \u003d new JPanel(new FlowLayout(FlowLayout.LEFT, 0, 0));\n        valueWrapper.setBackground(new Color(30, 30, 30));\n        JLabel valueLabel \u003d new JLabel(value);\n        valueLabel.setForeground(Color.WHITE);\n        valueLabel.setFont(FontManager.getRunescapeSmallFont());\n        valueWrapper.add(valueLabel);\n        box.add(valueWrapper);\n        \n        return box;\n    }\n    \n    /**\n     * Set the RSN supplier callback (called from main plugin)\n     */\n    public void setRsnSupplier(java.util.function.Supplier\u003cString\u003e supplier)\n    {\n        this.rsnSupplier \u003d supplier;\n    }\n    \n    /**\n     * Get the current RSN using the supplier\n     */\n    public String getCurrentRsn()\n    {\n        return rsnSupplier.get();\n    }\n    \n    /**\n     * Refresh the stats display\n     */\n    public void refreshStats()\n    {\n        if (authManager.isAuthenticated())\n        {\n            loadUserStats();\n        }\n    }\n    \n    private void loadUserStats()\n    {\n        String rsn \u003d getCurrentRsn();\n        log.debug(\"Loading user stats for RSN: {}\", rsn);\n        apiClient.getUserStats(rsn).thenAccept(stats -\u003e {\n            SwingUtilities.invokeLater(() -\u003e {\n                if (stats !\u003d null)\n                {\n                    log.debug(\"Received stats: {} drops, {} GP value\", stats.total_drops, stats.total_value);\n                    \n                    // Format total drops\n                    totalDropsLabel.setText(formatNumber(stats.total_drops));\n                    \n                    // Format total value\n                    totalValueLabel.setText(formatValue(stats.total_value) + \" GP\");\n                    totalValueLabel.setForeground(getValueColor(stats.total_value));\n                    \n                    // Today\u0027s stats\n                    if (stats.periods !\u003d null \u0026\u0026 stats.periods.today !\u003d null)\n                    {\n                        todayDropsLabel.setText(formatNumber(stats.periods.today.drops));\n                        todayValueLabel.setText(formatValue(stats.periods.today.value) + \" GP\");\n                        todayValueLabel.setForeground(getValueColor(stats.periods.today.value));\n                    }\n                    \n                    // Week stats\n                    if (stats.periods !\u003d null \u0026\u0026 stats.periods.week !\u003d null)\n                    {\n                        weekDropsLabel.setText(formatNumber(stats.periods.week.drops));\n                        weekValueLabel.setText(formatValue(stats.periods.week.value) + \" GP\");\n                        weekValueLabel.setForeground(getValueColor(stats.periods.week.value));\n                    }\n                }\n                else\n                {\n                    log.warn(\"Stats returned null - check if RSN is linked to your account\");\n                }\n            });\n        });\n    }\n    \n    private String formatNumber(long number)\n    {\n        if (number \u003e\u003d 1_000_000_000)\n        {\n            return String.format(\"%.1fB\", number / 1_000_000_000.0);\n        }\n        else if (number \u003e\u003d 1_000_000)\n        {\n            return String.format(\"%.1fM\", number / 1_000_000.0);\n        }\n        else if (number \u003e\u003d 1_000)\n        {\n            return String.format(\"%.1fK\", number / 1_000.0);\n        }\n        return String.valueOf(number);\n    }\n    \n    private String formatValue(long value)\n    {\n        if (value \u003e\u003d 1_000_000_000)\n        {\n            return String.format(\"%.2fB\", value / 1_000_000_000.0);\n        }\n        else if (value \u003e\u003d 1_000_000)\n        {\n            return String.format(\"%.2fM\", value / 1_000_000.0);\n        }\n        else if (value \u003e\u003d 1_000)\n        {\n            return String.format(\"%.1fK\", value / 1_000.0);\n        }\n        return String.valueOf(value);\n    }\n    \n    /**\n     * Format GP value in short form for display (100k, 1M, etc.)\n     */\n    private String formatGpShort(int value)\n    {\n        if (value \u003e\u003d 1_000_000_000)\n        {\n            return String.format(\"%.1fB\", value / 1_000_000_000.0);\n        }\n        else if (value \u003e\u003d 1_000_000)\n        {\n            return String.format(\"%.1fM\", value / 1_000_000.0);\n        }\n        else if (value \u003e\u003d 1_000)\n        {\n            return String.format(\"%dk\", value / 1_000);\n        }\n        return value + \"gp\";\n    }\n    \n    private Color getValueColor(long value)\n    {\n        if (value \u003e\u003d 1_000_000_000) // 1B+\n        {\n            return new Color(255, 128, 0); // Orange\n        }\n        else if (value \u003e\u003d 100_000_000) // 100M+\n        {\n            return new Color(255, 215, 0); // Gold\n        }\n        else if (value \u003e\u003d 10_000_000) // 10M+\n        {\n            return Color.YELLOW;\n        }\n        return Color.WHITE;\n    }\n    \n    private JPanel buildTrackingStatusPanel()\n    {\n        JPanel panel \u003d new JPanel(new GridLayout(3, 2, 5, 5));\n        panel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        panel.setBorder(new EmptyBorder(10, 10, 10, 10));\n        \n        // Loot Drops row\n        JLabel lootLabel \u003d new JLabel(\"Valuable Drops\");\n        lootLabel.setForeground(Color.WHITE);\n        panel.add(lootLabel);\n        lootDropsStatusLabel \u003d new JLabel();\n        panel.add(lootDropsStatusLabel);\n        \n        // Collection Log row\n        JLabel collectionLabel \u003d new JLabel(\"Collection Log\");\n        collectionLabel.setForeground(Color.WHITE);\n        panel.add(collectionLabel);\n        collectionLogStatusLabel \u003d new JLabel();\n        panel.add(collectionLogStatusLabel);\n        \n        // Pet Drops row\n        JLabel petLabel \u003d new JLabel(\"Pets\");\n        petLabel.setForeground(Color.WHITE);\n        panel.add(petLabel);\n        petDropsStatusLabel \u003d new JLabel();\n        panel.add(petDropsStatusLabel);\n        \n        // Set initial values\n        updateTrackingStatus();\n        \n        return panel;\n    }\n    \n    private JPanel buildRecentDropsSection()\n    {\n        JPanel recentSection \u003d new JPanel(new BorderLayout());\n        recentSection.setBackground(ColorScheme.DARK_GRAY_COLOR);\n        recentSection.setBorder(new EmptyBorder(10, 0, 0, 0));\n        \n        JLabel recentLabel \u003d new JLabel(\"Recent Drops\");\n        recentLabel.setForeground(BRAND_COLOR);\n        recentLabel.setFont(FontManager.getRunescapeBoldFont());\n        recentSection.add(recentLabel, BorderLayout.NORTH);\n        \n        recentDropsPanel \u003d new JPanel();\n        recentDropsPanel.setLayout(new BoxLayout(recentDropsPanel, BoxLayout.Y_AXIS));\n        recentDropsPanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        recentDropsPanel.setBorder(new EmptyBorder(5, 5, 5, 5));\n        \n        JLabel noDropsLabel \u003d new JLabel(\"No drops yet...\");\n        noDropsLabel.setForeground(Color.GRAY);\n        recentDropsPanel.add(noDropsLabel);\n        \n        JScrollPane scrollPane \u003d new JScrollPane(recentDropsPanel);\n        scrollPane.setPreferredSize(new Dimension(0, 150));\n        scrollPane.setBorder(null);\n        recentSection.add(scrollPane, BorderLayout.CENTER);\n        \n        return recentSection;\n    }\n    \n    /**\n     * Update the tracking status labels to reflect current config.\n     * Can be called externally when config changes.\n     */\n    public void updateTrackingStatus()\n    {\n        updateStatusLabel(lootDropsStatusLabel, config.trackLoot());\n        updateStatusLabel(collectionLogStatusLabel, config.trackCollectionLog());\n        updateStatusLabel(petDropsStatusLabel, config.trackPets());\n    }\n    \n    private void updateStatusLabel(JLabel label, boolean enabled)\n    {\n        if (label !\u003d null)\n        {\n            label.setText(enabled ? \" Enabled\" : \" Disabled\");\n            label.setForeground(enabled ? SUCCESS_COLOR : Color.GRAY);\n        }\n    }\n    \n    private void updateAuthState()\n    {\n        boolean authenticated \u003d authManager.isAuthenticated();\n        \n        authPanel.setVisible(!authenticated);\n        mainPanel.setVisible(authenticated);\n        \n        if (authenticated)\n        {\n            usernameLabel.setText(\" \" + authManager.getDiscordUsername());\n            loadServers();\n            updateDestinationsDisplay();\n            updateTrackingStatus(); // Refresh tracking status from config\n            loadUserStats(); // Load user loot statistics\n        }\n        \n        // Always update recent drops panel to show any existing drops\n        updateRecentDropsPanel();\n        \n        revalidate();\n        repaint();\n    }\n    \n    private void startLogin()\n    {\n        statusLabel.setText(\"Opening browser...\");\n        statusLabel.setForeground(Color.YELLOW);\n        \n        authManager.startOAuthFlow(result -\u003e {\n            SwingUtilities.invokeLater(() -\u003e {\n                if (result.success)\n                {\n                    statusLabel.setText(\"Login successful!\");\n                    statusLabel.setForeground(SUCCESS_COLOR);\n                    updateAuthState();\n                }\n                else\n                {\n                    statusLabel.setText(result.message);\n                    statusLabel.setForeground(ERROR_COLOR);\n                }\n            });\n        });\n    }\n    \n    private void logout()\n    {\n        authManager.logout();\n        updateAuthState();\n    }\n    \n    private void loadServers()\n    {\n        apiClient.getServers().thenAccept(servers -\u003e {\n            SwingUtilities.invokeLater(() -\u003e {\n                availableServers \u003d servers;\n                log.debug(\"Loaded {} servers\", servers.size());\n                // Refresh destinations display now that we have server names\n                updateDestinationsDisplay();\n            });\n        });\n    }\n    \n    /**\n     * Update the destinations display panel\n     */\n    private void updateDestinationsDisplay()\n    {\n        destinationsPanel.removeAll();\n        \n        List\u003cDestinationConfig\u003e destinations \u003d getDestinations();\n        \n        if (destinations.isEmpty())\n        {\n            JLabel noDestLabel \u003d new JLabel(\"No destinations configured\");\n            noDestLabel.setForeground(Color.GRAY);\n            noDestLabel.setFont(FontManager.getRunescapeSmallFont());\n            destinationsPanel.add(noDestLabel);\n            \n            JLabel hintLabel \u003d new JLabel(\"Click \u0027Configure\u0027 to add servers\");\n            hintLabel.setForeground(Color.GRAY);\n            hintLabel.setFont(FontManager.getRunescapeSmallFont());\n            destinationsPanel.add(hintLabel);\n        }\n        else\n        {\n            for (DestinationConfig dest : destinations)\n            {\n                // Find server name\n                String serverName \u003d dest.guildId;\n                for (LootTrackerApiClient.ServerInfo server : availableServers)\n                {\n                    if (server.id.equals(dest.guildId))\n                    {\n                        serverName \u003d server.name;\n                        break;\n                    }\n                }\n                \n                // Show channel count and min value range\n                List\u003cChannelConfig\u003e channels \u003d dest.getEffectiveChannels();\n                int channelCount \u003d channels.size();\n                \n                String infoText;\n                if (channelCount \u003d\u003d 0)\n                {\n                    infoText \u003d \"0 ch\";\n                }\n                else if (channelCount \u003d\u003d 1)\n                {\n                    String minStr \u003d formatGpShort(channels.get(0).minValue);\n                    infoText \u003d \"1 ch @ \" + minStr;\n                }\n                else\n                {\n                    int minVal \u003d channels.stream().mapToInt(c -\u003e c.minValue).min().orElse(0);\n                    int maxVal \u003d channels.stream().mapToInt(c -\u003e c.minValue).max().orElse(0);\n                    if (minVal \u003d\u003d maxVal)\n                    {\n                        infoText \u003d channelCount + \" ch @ \" + formatGpShort(minVal);\n                    }\n                    else\n                    {\n                        infoText \u003d channelCount + \" ch (\" + formatGpShort(minVal) + \"-\" + formatGpShort(maxVal) + \")\";\n                    }\n                }\n                \n                // Use GridBagLayout for proper spacing\n                JPanel destRow \u003d new JPanel(new GridBagLayout());\n                destRow.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n                destRow.setBorder(new EmptyBorder(2, 0, 2, 0));\n                \n                GridBagConstraints c \u003d new GridBagConstraints();\n                \n                // Server name on left\n                c.gridx \u003d 0;\n                c.gridy \u003d 0;\n                c.weightx \u003d 1.0;\n                c.anchor \u003d GridBagConstraints.WEST;\n                c.fill \u003d GridBagConstraints.HORIZONTAL;\n                \n                JLabel serverLabel \u003d new JLabel(\" \" + serverName);\n                serverLabel.setForeground(Color.WHITE);\n                serverLabel.setFont(FontManager.getRunescapeSmallFont());\n                destRow.add(serverLabel, c);\n                \n                // Channel info on right\n                c.gridx \u003d 1;\n                c.weightx \u003d 0;\n                c.anchor \u003d GridBagConstraints.EAST;\n                c.fill \u003d GridBagConstraints.NONE;\n                \n                JLabel channelLabel \u003d new JLabel(infoText);\n                channelLabel.setForeground(channelCount \u003e 0 ? SUCCESS_COLOR : WARNING_COLOR);\n                channelLabel.setFont(FontManager.getRunescapeSmallFont());\n                destRow.add(channelLabel, c);\n                \n                destinationsPanel.add(destRow);\n            }\n        }\n        \n        destinationsPanel.revalidate();\n        destinationsPanel.repaint();\n    }\n    \n    /**\n     * Get the current destinations from config\n     */\n    private List\u003cDestinationConfig\u003e getDestinations()\n    {\n        String json \u003d config.dropDestinations();\n        if (json \u003d\u003d null || json.isEmpty() || json.equals(\"[]\"))\n        {\n            return new ArrayList\u003c\u003e();\n        }\n        try\n        {\n            return gson.fromJson(json, new TypeToken\u003cList\u003cDestinationConfig\u003e\u003e(){}.getType());\n        }\n        catch (Exception e)\n        {\n            log.error(\"Error parsing destinations\", e);\n            return new ArrayList\u003c\u003e();\n        }\n    }\n    \n    /**\n     * Save destinations to config\n     */\n    private void saveDestinations(List\u003cDestinationConfig\u003e destinations)\n    {\n        // Use ConfigManager for proper persistence\n        configManager.setConfiguration(\"osrsloottracker\", \"dropDestinations\", gson.toJson(destinations));\n        updateDestinationsDisplay();\n    }\n    \n    /**\n     * Open the destinations configuration dialog\n     */\n    private void openDestinationsDialog()\n    {\n        // Create dialog\n        JDialog dialog \u003d new JDialog();\n        dialog.setTitle(\"Configure Drop Destinations\");\n        dialog.setModal(true);\n        dialog.setLayout(new BorderLayout(10, 10));\n        dialog.getContentPane().setBackground(ColorScheme.DARK_GRAY_COLOR);\n        \n        // Header panel with instructions\n        JPanel headerPanel \u003d new JPanel();\n        headerPanel.setLayout(new BoxLayout(headerPanel, BoxLayout.Y_AXIS));\n        headerPanel.setBorder(new EmptyBorder(10, 10, 5, 10));\n        headerPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n        \n        JLabel instructions \u003d new JLabel(\"\u003chtml\u003eSelect servers and channels. Set minimum drop value per channel (in thousands).\u003c/html\u003e\");\n        instructions.setForeground(Color.WHITE);\n        instructions.setAlignmentX(Component.LEFT_ALIGNMENT);\n        headerPanel.add(instructions);\n        \n        dialog.add(headerPanel, BorderLayout.NORTH);\n        \n        // Server list panel\n        JPanel serversContainer \u003d new JPanel();\n        serversContainer.setLayout(new BoxLayout(serversContainer, BoxLayout.Y_AXIS));\n        serversContainer.setBackground(ColorScheme.DARK_GRAY_COLOR);\n        serversContainer.setBorder(new EmptyBorder(5, 10, 5, 10));\n        \n        // Get current destinations\n        List\u003cDestinationConfig\u003e currentDestinations \u003d getDestinations();\n        Map\u003cString, DestinationConfig\u003e destMap \u003d new HashMap\u003c\u003e();\n        for (DestinationConfig d : currentDestinations)\n        {\n            destMap.put(d.guildId, d);\n        }\n        \n        // Track checkboxes and channel selections\n        Map\u003cString, JCheckBox\u003e serverCheckboxes \u003d new HashMap\u003c\u003e();\n        Map\u003cString, JScrollPane\u003e channelScrollPanes \u003d new HashMap\u003c\u003e();\n        Map\u003cString, List\u003cJCheckBox\u003e\u003e channelCheckboxes \u003d new HashMap\u003c\u003e();\n        Map\u003cString, List\u003cChannelUIComponents\u003e\u003e channelComponents \u003d new HashMap\u003c\u003e();\n        \n        for (LootTrackerApiClient.ServerInfo server : availableServers)\n        {\n            JPanel serverRow \u003d new JPanel();\n            serverRow.setLayout(new BoxLayout(serverRow, BoxLayout.Y_AXIS));\n            serverRow.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n            serverRow.setBorder(new EmptyBorder(8, 8, 8, 8));\n            serverRow.setAlignmentX(Component.LEFT_ALIGNMENT);\n            \n            // Server checkbox header\n            JPanel headerRow \u003d new JPanel(new BorderLayout());\n            headerRow.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n            headerRow.setMaximumSize(new Dimension(Integer.MAX_VALUE, 30));\n            \n            JCheckBox serverCheck \u003d new JCheckBox(server.name);\n            serverCheck.setForeground(Color.WHITE);\n            serverCheck.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n            serverCheck.setSelected(destMap.containsKey(server.id));\n            serverCheck.setFont(FontManager.getRunescapeBoldFont());\n            serverCheckboxes.put(server.id, serverCheck);\n            headerRow.add(serverCheck, BorderLayout.WEST);\n            \n            serverRow.add(headerRow);\n            \n            // Channel selection panel with its own scroll\n            JPanel channelPanel \u003d new JPanel();\n            channelPanel.setLayout(new BoxLayout(channelPanel, BoxLayout.Y_AXIS));\n            channelPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n            \n            // Wrap channel panel in scroll pane with max height\n            JScrollPane channelScroll \u003d new JScrollPane(channelPanel);\n            channelScroll.setBorder(new EmptyBorder(5, 15, 5, 0));\n            channelScroll.setBackground(ColorScheme.DARK_GRAY_COLOR);\n            channelScroll.getViewport().setBackground(ColorScheme.DARK_GRAY_COLOR);\n            channelScroll.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);\n            channelScroll.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);\n            channelScroll.setPreferredSize(new Dimension(350, 150)); // Fixed height for channel list\n            channelScroll.setMaximumSize(new Dimension(Integer.MAX_VALUE, 200));\n            channelScroll.setVisible(serverCheck.isSelected());\n            channelScrollPanes.put(server.id, channelScroll);\n            \n            // Add loading label initially\n            JLabel loadingLabel \u003d new JLabel(\"Loading channels...\");\n            loadingLabel.setForeground(Color.GRAY);\n            channelPanel.add(loadingLabel);\n            \n            serverRow.add(channelScroll);\n            serversContainer.add(serverRow);\n            serversContainer.add(Box.createVerticalStrut(8));\n            \n            // Load channels when server is checked\n            final JPanel finalChannelPanel \u003d channelPanel;\n            serverCheck.addActionListener(e -\u003e {\n                channelScroll.setVisible(serverCheck.isSelected());\n                if (serverCheck.isSelected() \u0026\u0026 !channelCheckboxes.containsKey(server.id))\n                {\n                    loadChannelsForDialog(server.id, finalChannelPanel, channelCheckboxes, channelComponents, destMap.get(server.id));\n                }\n                serversContainer.revalidate();\n                serversContainer.repaint();\n            });\n            \n            // If already selected, load channels\n            if (serverCheck.isSelected())\n            {\n                loadChannelsForDialog(server.id, channelPanel, channelCheckboxes, channelComponents, destMap.get(server.id));\n            }\n        }\n        \n        // Main scroll pane for all servers\n        JScrollPane mainScrollPane \u003d new JScrollPane(serversContainer);\n        mainScrollPane.setBorder(null);\n        mainScrollPane.setBackground(ColorScheme.DARK_GRAY_COLOR);\n        mainScrollPane.getViewport().setBackground(ColorScheme.DARK_GRAY_COLOR);\n        mainScrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);\n        mainScrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);\n        \n        dialog.add(mainScrollPane, BorderLayout.CENTER);\n        \n        // Buttons panel\n        JPanel buttonPanel \u003d new JPanel(new FlowLayout(FlowLayout.RIGHT));\n        buttonPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n        buttonPanel.setBorder(new EmptyBorder(5, 10, 10, 10));\n        \n        JButton cancelBtn \u003d new JButton(\"Cancel\");\n        cancelBtn.addActionListener(e -\u003e dialog.dispose());\n        buttonPanel.add(cancelBtn);\n        \n        JButton saveBtn \u003d new JButton(\"Save\");\n        saveBtn.setBackground(BRAND_COLOR);\n        saveBtn.setForeground(Color.WHITE);\n        saveBtn.addActionListener(e -\u003e {\n            // Build destinations from selections using the new ChannelConfig format\n            List\u003cDestinationConfig\u003e newDestinations \u003d new ArrayList\u003c\u003e();\n            \n            for (LootTrackerApiClient.ServerInfo server : availableServers)\n            {\n                JCheckBox serverCheck \u003d serverCheckboxes.get(server.id);\n                if (serverCheck !\u003d null \u0026\u0026 serverCheck.isSelected())\n                {\n                    DestinationConfig dest \u003d new DestinationConfig();\n                    dest.guildId \u003d server.id;\n                    dest.channels \u003d new ArrayList\u003c\u003e();\n                    dest.channelIds \u003d new ArrayList\u003c\u003e(); // Keep for backward compatibility\n                    \n                    List\u003cChannelUIComponents\u003e components \u003d channelComponents.get(server.id);\n                    if (components !\u003d null)\n                    {\n                        for (ChannelUIComponents comp : components)\n                        {\n                            if (comp.checkbox.isSelected())\n                            {\n                                // Get min value from spinner (already in GP)\n                                int minValueGp \u003d (Integer) comp.minValueSpinner.getValue();\n                                \n                                // Get drop type filters\n                                boolean sendValuableDrops \u003d comp.valuableDropsCheckbox.isSelected();\n                                boolean sendCollectionLog \u003d comp.collectionLogCheckbox.isSelected();\n                                boolean sendPets \u003d comp.petsCheckbox.isSelected();\n                                \n                                ChannelConfig cc \u003d new ChannelConfig(comp.channelId, comp.channelName, minValueGp,\n                                    sendValuableDrops, sendCollectionLog, sendPets);\n                                dest.channels.add(cc);\n                                dest.channelIds.add(comp.channelId); // Also populate legacy list\n                            }\n                        }\n                    }\n                    \n                    newDestinations.add(dest);\n                }\n            }\n            \n            saveDestinations(newDestinations);\n            dialog.dispose();\n        });\n        buttonPanel.add(saveBtn);\n        \n        dialog.add(buttonPanel, BorderLayout.SOUTH);\n        \n        // Set dialog size and show\n        dialog.setPreferredSize(new Dimension(450, 500));\n        dialog.setMinimumSize(new Dimension(400, 300));\n        dialog.pack();\n        dialog.setLocationRelativeTo(this);\n        dialog.setVisible(true);\n    }\n    \n    /**\n     * Data class to hold channel checkbox and its min value spinner\n     */\n    private static class ChannelUIComponents\n    {\n        JCheckBox checkbox;\n        JSpinner minValueSpinner;\n        JCheckBox valuableDropsCheckbox;\n        JCheckBox collectionLogCheckbox;\n        JCheckBox petsCheckbox;\n        String channelId;\n        String channelName;\n        \n        ChannelUIComponents(JCheckBox checkbox, JSpinner minValueSpinner, \n                           JCheckBox valuableDropsCheckbox, JCheckBox collectionLogCheckbox, JCheckBox petsCheckbox,\n                           String channelId, String channelName)\n        {\n            this.checkbox \u003d checkbox;\n            this.minValueSpinner \u003d minValueSpinner;\n            this.valuableDropsCheckbox \u003d valuableDropsCheckbox;\n            this.collectionLogCheckbox \u003d collectionLogCheckbox;\n            this.petsCheckbox \u003d petsCheckbox;\n            this.channelId \u003d channelId;\n            this.channelName \u003d channelName;\n        }\n    }\n    \n    /**\n     * Load channels for a server in the config dialog\n     */\n    private void loadChannelsForDialog(String serverId, JPanel channelPanel, \n                                        Map\u003cString, List\u003cJCheckBox\u003e\u003e channelCheckboxes,\n                                        Map\u003cString, List\u003cChannelUIComponents\u003e\u003e channelComponents,\n                                        DestinationConfig existingConfig)\n    {\n        apiClient.getServerChannels(serverId).thenAccept(channels -\u003e {\n            SwingUtilities.invokeLater(() -\u003e {\n                channelPanel.removeAll();\n                \n                if (channels \u003d\u003d null || channels.isEmpty())\n                {\n                    JLabel noChannels \u003d new JLabel(\"No text channels found\");\n                    noChannels.setForeground(Color.GRAY);\n                    noChannels.setAlignmentX(Component.LEFT_ALIGNMENT);\n                    channelPanel.add(noChannels);\n                }\n                else\n                {\n                    List\u003cJCheckBox\u003e checkboxes \u003d new ArrayList\u003c\u003e();\n                    List\u003cChannelUIComponents\u003e components \u003d new ArrayList\u003c\u003e();\n                    \n                    // Build a map of existing channel configs for quick lookup\n                    Map\u003cString, ChannelConfig\u003e existingChannelConfigs \u003d new HashMap\u003c\u003e();\n                    if (existingConfig !\u003d null)\n                    {\n                        for (ChannelConfig cc : existingConfig.getEffectiveChannels())\n                        {\n                            existingChannelConfigs.put(cc.channelId, cc);\n                        }\n                    }\n                    \n                    // Group by category, putting uncategorized channels first\n                    Map\u003cString, List\u003cLootTrackerApiClient.ChannelInfo\u003e\u003e byCategory \u003d new java.util.LinkedHashMap\u003c\u003e();\n                    \n                    // First add uncategorized channels\n                    List\u003cLootTrackerApiClient.ChannelInfo\u003e uncategorized \u003d channels.stream()\n                        .filter(ch -\u003e ch.category \u003d\u003d null || ch.category.isEmpty())\n                        .collect(Collectors.toList());\n                    if (!uncategorized.isEmpty())\n                    {\n                        byCategory.put(\"\", uncategorized);\n                    }\n                    \n                    // Then add categorized channels\n                    channels.stream()\n                        .filter(ch -\u003e ch.category !\u003d null \u0026\u0026 !ch.category.isEmpty())\n                        .collect(Collectors.groupingBy(ch -\u003e ch.category))\n                        .forEach(byCategory::put);\n                    \n                    for (Map.Entry\u003cString, List\u003cLootTrackerApiClient.ChannelInfo\u003e\u003e entry : byCategory.entrySet())\n                    {\n                        // Add category label if not empty\n                        if (!entry.getKey().isEmpty())\n                        {\n                            channelPanel.add(Box.createVerticalStrut(5));\n                            JLabel catLabel \u003d new JLabel(entry.getKey());\n                            catLabel.setForeground(new Color(150, 150, 150));\n                            catLabel.setFont(FontManager.getRunescapeSmallFont());\n                            catLabel.setAlignmentX(Component.LEFT_ALIGNMENT);\n                            channelPanel.add(catLabel);\n                        }\n                        \n                        for (LootTrackerApiClient.ChannelInfo channel : entry.getValue())\n                        {\n                            // Container for this channel (two rows)\n                            JPanel channelContainer \u003d new JPanel();\n                            channelContainer.setLayout(new BoxLayout(channelContainer, BoxLayout.Y_AXIS));\n                            channelContainer.setBackground(ColorScheme.DARK_GRAY_COLOR);\n                            channelContainer.setOpaque(false);\n                            channelContainer.setAlignmentX(Component.LEFT_ALIGNMENT);\n                            channelContainer.setBorder(BorderFactory.createEmptyBorder(2, 0, 2, 0));\n                            \n                            // Row 1: Channel checkbox + min value\n                            JPanel channelRow \u003d new JPanel(new BorderLayout(5, 0));\n                            channelRow.setBackground(ColorScheme.DARK_GRAY_COLOR);\n                            channelRow.setOpaque(false);\n                            channelRow.setAlignmentX(Component.LEFT_ALIGNMENT);\n                            channelRow.setMaximumSize(new Dimension(Integer.MAX_VALUE, 26));\n                            \n                            // Channel checkbox\n                            JCheckBox chBox \u003d new JCheckBox(\"#\" + channel.name);\n                            chBox.setName(channel.id);\n                            chBox.setForeground(Color.WHITE);\n                            chBox.setBackground(ColorScheme.DARK_GRAY_COLOR);\n                            chBox.setOpaque(false);\n                            chBox.setFont(FontManager.getRunescapeSmallFont());\n                            \n                            // Check if this channel was previously selected\n                            ChannelConfig existingCC \u003d existingChannelConfigs.get(channel.id);\n                            boolean isSelected \u003d existingCC !\u003d null;\n                            chBox.setSelected(isSelected);\n                            \n                            channelRow.add(chBox, BorderLayout.WEST);\n                            \n                            // Min value panel (spinner + label)\n                            JPanel minValuePanel \u003d new JPanel(new FlowLayout(FlowLayout.RIGHT, 2, 0));\n                            minValuePanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n                            minValuePanel.setOpaque(false);\n                            \n                            JLabel minLabel \u003d new JLabel(\"Min:\");\n                            minLabel.setForeground(new Color(150, 150, 150));\n                            minLabel.setFont(FontManager.getRunescapeSmallFont());\n                            \n                            // Spinner for min value (full GP value, e.g., 100000 for 100k)\n                            int existingMinValue \u003d existingCC !\u003d null ? existingCC.minValue : 100000; // Default 100k\n                            SpinnerNumberModel spinnerModel \u003d new SpinnerNumberModel(existingMinValue, 0, 2147483647, 10000);\n                            JSpinner minValueSpinner \u003d new JSpinner(spinnerModel);\n                            minValueSpinner.setPreferredSize(new Dimension(90, 20));\n                            minValueSpinner.setFont(FontManager.getRunescapeSmallFont());\n                            minValueSpinner.setToolTipText(\"Minimum drop value in GP (e.g., 100000 for 100k)\");\n                            \n                            JLabel gpLabel \u003d new JLabel(\"GP\");\n                            gpLabel.setForeground(new Color(150, 150, 150));\n                            gpLabel.setFont(FontManager.getRunescapeSmallFont());\n                            \n                            minValuePanel.add(minLabel);\n                            minValuePanel.add(minValueSpinner);\n                            minValuePanel.add(gpLabel);\n                            \n                            channelRow.add(minValuePanel, BorderLayout.EAST);\n                            channelContainer.add(channelRow);\n                            \n                            // Row 2: Drop type checkboxes\n                            JPanel dropTypePanel \u003d new JPanel(new FlowLayout(FlowLayout.LEFT, 5, 0));\n                            dropTypePanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n                            dropTypePanel.setOpaque(false);\n                            dropTypePanel.setAlignmentX(Component.LEFT_ALIGNMENT);\n                            dropTypePanel.setMaximumSize(new Dimension(Integer.MAX_VALUE, 20));\n                            dropTypePanel.setBorder(BorderFactory.createEmptyBorder(0, 20, 0, 0)); // Indent\n                            \n                            // Get existing drop type settings (default to true)\n                            boolean sendDrops \u003d existingCC !\u003d null ? existingCC.sendValuableDrops : true;\n                            boolean sendLog \u003d existingCC !\u003d null ? existingCC.sendCollectionLog : true;\n                            boolean sendPets \u003d existingCC !\u003d null ? existingCC.sendPets : true;\n                            \n                            JCheckBox valuableDropsCheck \u003d new JCheckBox(\"Drops\");\n                            valuableDropsCheck.setForeground(new Color(200, 200, 200));\n                            valuableDropsCheck.setBackground(ColorScheme.DARK_GRAY_COLOR);\n                            valuableDropsCheck.setOpaque(false);\n                            valuableDropsCheck.setFont(FontManager.getRunescapeSmallFont());\n                            valuableDropsCheck.setSelected(sendDrops);\n                            valuableDropsCheck.setToolTipText(\"Send valuable drops to this channel\");\n                            \n                            JCheckBox collectionLogCheck \u003d new JCheckBox(\"Collection Log\");\n                            collectionLogCheck.setForeground(new Color(200, 200, 200));\n                            collectionLogCheck.setBackground(ColorScheme.DARK_GRAY_COLOR);\n                            collectionLogCheck.setOpaque(false);\n                            collectionLogCheck.setFont(FontManager.getRunescapeSmallFont());\n                            collectionLogCheck.setSelected(sendLog);\n                            collectionLogCheck.setToolTipText(\"Send collection log entries to this channel\");\n                            \n                            JCheckBox petsCheck \u003d new JCheckBox(\"Pets\");\n                            petsCheck.setForeground(new Color(200, 200, 200));\n                            petsCheck.setBackground(ColorScheme.DARK_GRAY_COLOR);\n                            petsCheck.setOpaque(false);\n                            petsCheck.setFont(FontManager.getRunescapeSmallFont());\n                            petsCheck.setSelected(sendPets);\n                            petsCheck.setToolTipText(\"Send pet drops to this channel\");\n                            \n                            dropTypePanel.add(valuableDropsCheck);\n                            dropTypePanel.add(collectionLogCheck);\n                            dropTypePanel.add(petsCheck);\n                            channelContainer.add(dropTypePanel);\n                            \n                            // Enable/disable all controls when main checkbox is toggled\n                            minValueSpinner.setEnabled(isSelected);\n                            valuableDropsCheck.setEnabled(isSelected);\n                            collectionLogCheck.setEnabled(isSelected);\n                            petsCheck.setEnabled(isSelected);\n                            \n                            chBox.addActionListener(e -\u003e {\n                                boolean enabled \u003d chBox.isSelected();\n                                minValueSpinner.setEnabled(enabled);\n                                valuableDropsCheck.setEnabled(enabled);\n                                collectionLogCheck.setEnabled(enabled);\n                                petsCheck.setEnabled(enabled);\n                            });\n                            \n                            channelPanel.add(channelContainer);\n                            checkboxes.add(chBox);\n                            components.add(new ChannelUIComponents(chBox, minValueSpinner, \n                                valuableDropsCheck, collectionLogCheck, petsCheck, \n                                channel.id, channel.name));\n                        }\n                    }\n                    \n                    channelCheckboxes.put(serverId, checkboxes);\n                    channelComponents.put(serverId, components);\n                    log.debug(\"Loaded {} channels for server {}\", checkboxes.size(), serverId);\n                }\n                \n                channelPanel.revalidate();\n                channelPanel.repaint();\n                \n                // Also update parent scroll pane\n                if (channelPanel.getParent() !\u003d null)\n                {\n                    channelPanel.getParent().revalidate();\n                    channelPanel.getParent().repaint();\n                }\n            });\n        });\n    }\n    \n    /**\n     * Add a recent drop to the panel\n     */\n    public void addRecentDrop(LootDropData drop)\n    {\n        recentDrops.add(0, drop);\n        while (recentDrops.size() \u003e MAX_RECENT_DROPS)\n        {\n            recentDrops.remove(recentDrops.size() - 1);\n        }\n        \n        updateRecentDropsPanel();\n    }\n    \n    private void updateRecentDropsPanel()\n    {\n        recentDropsPanel.removeAll();\n        \n        if (recentDrops.isEmpty())\n        {\n            JLabel noDropsLabel \u003d new JLabel(\"No drops yet...\");\n            noDropsLabel.setForeground(Color.GRAY);\n            noDropsLabel.setAlignmentX(Component.LEFT_ALIGNMENT);\n            recentDropsPanel.add(noDropsLabel);\n        }\n        else\n        {\n            int index \u003d 0;\n            for (LootDropData drop : recentDrops)\n            {\n                // Alternating row colors\n                Color rowColor \u003d (index % 2 \u003d\u003d 0) \n                    ? ColorScheme.DARKER_GRAY_COLOR \n                    : new Color(40, 40, 40);\n                \n                JPanel dropPanel \u003d new JPanel();\n                dropPanel.setLayout(new BoxLayout(dropPanel, BoxLayout.Y_AXIS));\n                dropPanel.setBackground(rowColor);\n                dropPanel.setBorder(new EmptyBorder(6, 8, 6, 8));\n                dropPanel.setAlignmentX(Component.LEFT_ALIGNMENT);\n                dropPanel.setMaximumSize(new Dimension(Integer.MAX_VALUE, 50));\n                \n                // Top row: Item name + value\n                JPanel topRow \u003d new JPanel(new BorderLayout());\n                topRow.setBackground(rowColor);\n                topRow.setAlignmentX(Component.LEFT_ALIGNMENT);\n                \n                // Item name with quantity\n                String itemText \u003d drop.getItemName();\n                if (drop.getQuantity() \u003e 1)\n                {\n                    itemText +\u003d \" x\" + drop.getQuantity();\n                }\n                \n                JLabel itemLabel \u003d new JLabel(itemText);\n                itemLabel.setForeground(Color.WHITE);\n                itemLabel.setFont(FontManager.getRunescapeSmallFont());\n                topRow.add(itemLabel, BorderLayout.WEST);\n                \n                // Value with color coding\n                if (drop.getValue() \u003e 0)\n                {\n                    JLabel valueLabel \u003d new JLabel(QuantityFormatter.formatNumber(drop.getValue()) + \" GP\");\n                    valueLabel.setFont(FontManager.getRunescapeSmallFont());\n                    \n                    // Color code based on value\n                    if (drop.getValue() \u003e\u003d 1000000) // 1M+\n                    {\n                        valueLabel.setForeground(new Color(255, 128, 0)); // Orange for mega drops\n                    }\n                    else if (drop.getValue() \u003e\u003d 100000) // 100K+\n                    {\n                        valueLabel.setForeground(new Color(255, 215, 0)); // Gold\n                    }\n                    else if (drop.getValue() \u003e\u003d 10000) // 10K+\n                    {\n                        valueLabel.setForeground(Color.YELLOW);\n                    }\n                    else\n                    {\n                        valueLabel.setForeground(new Color(180, 180, 180)); // Light gray for low value\n                    }\n                    \n                    topRow.add(valueLabel, BorderLayout.EAST);\n                }\n                \n                dropPanel.add(topRow);\n                \n                // Bottom row: Source + time ago\n                JPanel bottomRow \u003d new JPanel(new BorderLayout());\n                bottomRow.setBackground(rowColor);\n                bottomRow.setAlignmentX(Component.LEFT_ALIGNMENT);\n                \n                // Source/monster name\n                String sourceText \u003d drop.getSourceName() !\u003d null ? drop.getSourceName() : \"\";\n                JLabel sourceLabel \u003d new JLabel(sourceText);\n                sourceLabel.setForeground(new Color(130, 130, 130));\n                sourceLabel.setFont(FontManager.getRunescapeSmallFont());\n                bottomRow.add(sourceLabel, BorderLayout.WEST);\n                \n                // Time ago\n                String timeAgo \u003d formatTimeAgo(drop.getTimestamp());\n                JLabel timeLabel \u003d new JLabel(timeAgo);\n                timeLabel.setForeground(new Color(100, 100, 100));\n                timeLabel.setFont(FontManager.getRunescapeSmallFont());\n                bottomRow.add(timeLabel, BorderLayout.EAST);\n                \n                dropPanel.add(bottomRow);\n                \n                // Add separator line (except for last item)\n                if (index \u003c recentDrops.size() - 1)\n                {\n                    JSeparator separator \u003d new JSeparator();\n                    separator.setForeground(new Color(60, 60, 60));\n                    separator.setMaximumSize(new Dimension(Integer.MAX_VALUE, 1));\n                    dropPanel.add(Box.createVerticalStrut(2));\n                }\n                \n                recentDropsPanel.add(dropPanel);\n                index++;\n            }\n        }\n        \n        recentDropsPanel.revalidate();\n        recentDropsPanel.repaint();\n    }\n    \n    /**\n     * Format a timestamp as \"time ago\" string\n     */\n    private String formatTimeAgo(long timestamp)\n    {\n        if (timestamp \u003d\u003d 0)\n        {\n            return \"\";\n        }\n        \n        long diff \u003d System.currentTimeMillis() - timestamp;\n        long seconds \u003d diff / 1000;\n        long minutes \u003d seconds / 60;\n        long hours \u003d minutes / 60;\n        \n        if (seconds \u003c 60)\n        {\n            return \"just now\";\n        }\n        else if (minutes \u003c 60)\n        {\n            return minutes + \"m ago\";\n        }\n        else if (hours \u003c 24)\n        {\n            return hours + \"h ago\";\n        }\n        else\n        {\n            long days \u003d hours / 24;\n            return days + \"d ago\";\n        }\n    }\n    \n    /**\n     * Channel configuration with per-channel minimum value and drop type filters\n     */\n    public static class ChannelConfig\n    {\n        public String channelId;\n        public String channelName; // For display purposes\n        public int minValue; // Minimum GP value for this channel (0 \u003d use global default)\n        \n        // Drop type filters (default all to true for backward compatibility)\n        public boolean sendValuableDrops \u003d true;  // Regular loot drops\n        public boolean sendCollectionLog \u003d true;  // Collection log entries\n        public boolean sendPets \u003d true;           // Pet drops\n        \n        public ChannelConfig()\n        {\n            this.minValue \u003d 0;\n            this.sendValuableDrops \u003d true;\n            this.sendCollectionLog \u003d true;\n            this.sendPets \u003d true;\n        }\n        \n        public ChannelConfig(String channelId, String channelName, int minValue)\n        {\n            this.channelId \u003d channelId;\n            this.channelName \u003d channelName;\n            this.minValue \u003d minValue;\n            this.sendValuableDrops \u003d true;\n            this.sendCollectionLog \u003d true;\n            this.sendPets \u003d true;\n        }\n        \n        public ChannelConfig(String channelId, String channelName, int minValue, \n                            boolean sendValuableDrops, boolean sendCollectionLog, boolean sendPets)\n        {\n            this.channelId \u003d channelId;\n            this.channelName \u003d channelName;\n            this.minValue \u003d minValue;\n            this.sendValuableDrops \u003d sendValuableDrops;\n            this.sendCollectionLog \u003d sendCollectionLog;\n            this.sendPets \u003d sendPets;\n        }\n    }\n    \n    /**\n     * Destination configuration - a server with selected channels\n     */\n    public static class DestinationConfig\n    {\n        public String guildId;\n        public List\u003cString\u003e channelIds; // Legacy: simple channel ID list\n        public List\u003cChannelConfig\u003e channels; // New: channels with per-channel config\n        public String eventId; // Optional event ID\n        \n        public DestinationConfig()\n        {\n            this.channelIds \u003d new ArrayList\u003c\u003e();\n            this.channels \u003d new ArrayList\u003c\u003e();\n        }\n        \n        /**\n         * Get effective channel configs, supporting both legacy and new format\n         */\n        public List\u003cChannelConfig\u003e getEffectiveChannels()\n        {\n            // If we have the new channels list, use it\n            if (channels !\u003d null \u0026\u0026 !channels.isEmpty())\n            {\n                return channels;\n            }\n            // Otherwise convert legacy channelIds to ChannelConfig with default (0) minValue\n            List\u003cChannelConfig\u003e result \u003d new ArrayList\u003c\u003e();\n            if (channelIds !\u003d null)\n            {\n                for (String id : channelIds)\n                {\n                    result.add(new ChannelConfig(id, null, 0));\n                }\n            }\n            return result;\n        }\n    }\n}\n\n","filePath":"src\\main\\java\\com\\osrsloottracker\\OSRSLootTrackerPanel.java"},{"fileName":"OSRSLootTrackerPlugin.java","content":"package com.osrsloottracker;\n\nimport com.google.inject.Provides;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.*;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.events.NpcLootReceived;\nimport net.runelite.client.events.PlayerLootReceived;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.game.ItemStack;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.plugins.loottracker.LootReceived;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.DrawManager;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.util.ImageUtil;\nimport net.runelite.http.api.loottracker.LootRecordType;\n\nimport javax.imageio.ImageIO;\nimport javax.inject.Inject;\nimport javax.swing.*;\nimport java.awt.image.BufferedImage;\nimport java.io.ByteArrayOutputStream;\nimport java.util.ArrayList;\nimport java.util.Base64;\nimport java.util.Collection;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.concurrent.ConcurrentHashMap;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.concurrent.TimeUnit;\nimport java.util.function.Consumer;\n\n@Slf4j\n@PluginDescriptor(\n    name \u003d \"OSRS Loot Tracker\",\n    description \u003d \"Track loot and send directly to your OSRS Loot Tracker dashboard. Supports Bingo events and Snakes \u0026 Ladders.\",\n    tags \u003d {\"loot\", \"tracker\", \"bingo\", \"discord\", \"drops\", \"collection\"}\n)\npublic class OSRSLootTrackerPlugin extends Plugin\n{\n    @Inject\n    private Client client;\n\n    @Inject\n    private ClientThread clientThread;\n\n    @Inject\n    private OSRSLootTrackerConfig config;\n\n    @Inject\n    private ItemManager itemManager;\n\n    @Inject\n    private ClientToolbar clientToolbar;\n\n    @Inject\n    private ScheduledExecutorService executor;\n\n    @Inject\n    private LootTrackerApiClient apiClient;\n\n    @Inject\n    private AuthenticationManager authManager;\n\n    @Inject\n    private DrawManager drawManager;\n\n    @Inject\n    private OSRSLootTrackerPanel panel;\n    \n    private NavigationButton navButton;\n    \n    // Deduplication cache for collection log entries (item name -\u003e timestamp)\n    private final Map\u003cString, Long\u003e recentCollectionLogItems \u003d new ConcurrentHashMap\u003c\u003e();\n    private static final long COLLECTION_LOG_DEDUP_WINDOW_MS \u003d 5000; // 5 seconds\n    \n    // Cache for recent collection log pet names (for cross-referencing with pet messages)\n    // When we get a pet message, check if there was a recent collection log entry that might be the pet name\n    private volatile String recentCollectionLogPetCandidate \u003d null;\n    private volatile long recentCollectionLogPetCandidateTime \u003d 0;\n    private static final long PET_COLLECTION_LOG_WINDOW_MS \u003d 3000; // 3 second window\n    \n    @Override\n    protected void startUp() throws Exception\n    {\n        log.info(\"OSRS Loot Tracker plugin started!\");\n\n        // Check for existing authentication BEFORE initializing the panel\n        // so the panel knows whether to show login or main view\n        authManager.checkStoredAuth();\n\n        // Initialize the injected panel\n        panel.init();\n        panel.setPlugin(this); // For debug/test methods\n        \n        // Set up RSN supplier - gets the current player name on demand\n        panel.setRsnSupplier(() -\u003e {\n            if (client.getLocalPlayer() !\u003d null)\n            {\n                return client.getLocalPlayer().getName();\n            }\n            return null;\n        });\n        \n        // Use RuneLite\u0027s built-in loot icon\n        BufferedImage icon;\n        try\n        {\n            icon \u003d ImageUtil.loadImageResource(getClass(), \"/panel_icon.png\");\n        }\n        catch (Exception e)\n        {\n            // Fallback to a simple colored square if icon not found\n            icon \u003d new BufferedImage(16, 16, BufferedImage.TYPE_INT_ARGB);\n            java.awt.Graphics2D g \u003d icon.createGraphics();\n            g.setColor(new java.awt.Color(88, 101, 242)); // Discord blurple\n            g.fillRect(0, 0, 16, 16);\n            g.setColor(java.awt.Color.WHITE);\n            g.drawString(\"L\", 4, 12);\n            g.dispose();\n        }\n        \n        navButton \u003d NavigationButton.builder()\n            .tooltip(\"OSRS Loot Tracker\")\n            .icon(icon)\n            .priority(5)\n            .panel(panel)\n            .build();\n\n        clientToolbar.addNavigation(navButton);\n    }\n\n    @Override\n    protected void shutDown() throws Exception\n    {\n        log.info(\"OSRS Loot Tracker plugin stopped!\");\n        clientToolbar.removeNavigation(navButton);\n    }\n\n    @Subscribe\n    public void onLootReceived(LootReceived event)\n    {\n        log.debug(\"LootReceived event: {} items from {}\", event.getItems().size(), event.getName());\n        \n        if (!authManager.isAuthenticated())\n        {\n            log.debug(\"Not authenticated, skipping loot submission\");\n            return;\n        }\n\n        if (!config.trackLoot())\n        {\n            log.debug(\"Loot tracking disabled, skipping\");\n            return;\n        }\n        \n        // Check if destinations are configured\n        String destinations \u003d config.dropDestinations();\n        boolean hasDestinations \u003d destinations !\u003d null \u0026\u0026 !destinations.isEmpty() \u0026\u0026 !destinations.equals(\"[]\");\n        boolean hasLegacyServer \u003d config.selectedServerId() !\u003d null \u0026\u0026 !config.selectedServerId().isEmpty();\n        \n        if (!hasDestinations \u0026\u0026 !hasLegacyServer)\n        {\n            log.debug(\"No destinations configured, skipping loot submission\");\n            return;\n        }\n\n        final String sourceName \u003d event.getName();\n        final LootRecordType type \u003d event.getType();\n\n        // Get the player\u0027s RSN\n        final String rsn \u003d client.getLocalPlayer() !\u003d null ? client.getLocalPlayer().getName() : \"Unknown\";\n        \n        // IMPORTANT: Pre-process all item data on the client thread because ItemManager \n        // methods must be called on the client thread. We store the processed data for \n        // use in the async callback.\n        final List\u003cProcessedItem\u003e allItems \u003d new ArrayList\u003c\u003e();\n        \n        for (ItemStack item : event.getItems())\n        {\n            final int itemId \u003d item.getId();\n            final int quantity \u003d item.getQuantity();\n            final int value \u003d itemManager.getItemPrice(itemId) * quantity;\n            final String itemName \u003d itemManager.getItemComposition(itemId).getName();\n            \n            allItems.add(new ProcessedItem(itemName, quantity, value));\n        }\n        \n        // Get the lowest channel threshold - only items meeting this threshold will be logged\n        final int lowestThreshold \u003d apiClient.getLowestChannelMinValue();\n        \n        // Filter items to only include those that individually meet the threshold\n        final List\u003cProcessedItem\u003e processedItems \u003d new ArrayList\u003c\u003e();\n        for (ProcessedItem item : allItems)\n        {\n            if (item.value \u003e\u003d lowestThreshold)\n            {\n                processedItems.add(item);\n                log.debug(\"Item {} ({}gp) meets threshold ({}gp)\", item.name, item.value, lowestThreshold);\n            }\n            else\n            {\n                log.debug(\"Item {} ({}gp) below threshold ({}gp), skipping\", item.name, item.value, lowestThreshold);\n            }\n        }\n        \n        // Calculate total value of items that passed the filter\n        int totalDropValue \u003d 0;\n        for (ProcessedItem item : processedItems)\n        {\n            totalDropValue +\u003d item.value;\n        }\n        \n        log.debug(\"Processing loot for RSN: {}, from: {}, items: {}/{} passed filter, total value: {}gp (threshold: {}gp)\", \n            rsn, sourceName, processedItems.size(), allItems.size(), totalDropValue, lowestThreshold);\n\n        // Skip if no items passed the filter\n        if (processedItems.isEmpty())\n        {\n            log.debug(\"No items meet the minimum value threshold of {}gp\", lowestThreshold);\n            return;\n        }\n\n        // Capture screenshot if enabled\n        if (config.captureScreenshots())\n        {\n            captureScreenshot(screenshotData -\u003e {\n                String url \u003d screenshotData !\u003d null ? screenshotData.url : null;\n                String base64 \u003d screenshotData !\u003d null ? screenshotData.base64 : null;\n                submitProcessedItems(processedItems, rsn, sourceName, type, url, base64);\n            });\n        }\n        else\n        {\n            submitProcessedItems(processedItems, rsn, sourceName, type, null, null);\n        }\n    }\n    \n    /**\n     * Simple data class to hold pre-processed item info\n     */\n    public static class ProcessedItem\n    {\n        public final String name;\n        public final int quantity;\n        public final int value;\n        \n        public ProcessedItem(String name, int quantity, int value)\n        {\n            this.name \u003d name;\n            this.quantity \u003d quantity;\n            this.value \u003d value;\n        }\n    }\n    \n    /**\n     * Screenshot result containing URL (if saved) and/or base64 (for non-premium)\n     */\n    private static class ScreenshotData\n    {\n        final String url;\n        final String base64;\n        \n        ScreenshotData(String url, String base64)\n        {\n            this.url \u003d url;\n            this.base64 \u003d base64;\n        }\n    }\n    \n    /**\n     * Capture a screenshot and pass it to the callback\n     * Returns ScreenshotData with URL (if premium/saved) and/or base64 (for non-premium)\n     */\n    private void captureScreenshot(Consumer\u003cScreenshotData\u003e callback)\n    {\n        // Get the first configured guild ID for screenshot storage\n        String guildId \u003d apiClient.getFirstConfiguredGuildId();\n        if (guildId \u003d\u003d null || guildId.isEmpty())\n        {\n            log.warn(\"No guild ID configured for screenshot upload\");\n            callback.accept(null);\n            return;\n        }\n        \n        log.debug(\"Capturing screenshot for guild {}\", guildId);\n        \n        drawManager.requestNextFrameListener(image -\u003e {\n            executor.execute(() -\u003e {\n                try\n                {\n                    BufferedImage screenshot \u003d (BufferedImage) image;\n                    log.debug(\"Screenshot captured, uploading...\");\n                    \n                    // Convert to PNG bytes\n                    ByteArrayOutputStream baos \u003d new ByteArrayOutputStream();\n                    ImageIO.write(screenshot, \"png\", baos);\n                    byte[] imageBytes \u003d baos.toByteArray();\n                    \n                    // Validate screenshot with backend - saving happens per-destination\n                    LootTrackerApiClient.ScreenshotResult result \u003d apiClient.uploadScreenshot(imageBytes, guildId);\n                    log.debug(\"Screenshot validated - will be processed per-destination\");\n                    \n                    callback.accept(new ScreenshotData(result.url, result.base64));\n                }\n                catch (Exception e)\n                {\n                    log.error(\"Failed to capture/upload screenshot\", e);\n                    callback.accept(null);\n                }\n            });\n        });\n    }\n    \n    /**\n     * Submit pre-processed items to the backend as a batch.\n     * Per-channel filtering is done in the API client based on total drop value.\n     * \n     * @param items List of items to submit\n     * @param rsn Player\u0027s RuneScape name\n     * @param sourceName Source of the drop\n     * @param type Type of loot record\n     * @param screenshotUrl URL of saved screenshot (for premium guilds)\n     * @param screenshotBase64 Base64 screenshot data (for non-premium guilds)\n     */\n    private void submitProcessedItems(List\u003cProcessedItem\u003e items, String rsn, String sourceName, \n                                       LootRecordType type, String screenshotUrl, String screenshotBase64)\n    {\n        log.debug(\"submitProcessedItems called with {} items, rsn\u003d{}, source\u003d{}, screenshot\u003d{}\", \n            items.size(), rsn, sourceName, (screenshotUrl !\u003d null || screenshotBase64 !\u003d null) ? \"yes\" : \"no\");\n        \n        // Calculate total value (per-channel filtering happens in API client)\n        int totalValue \u003d 0;\n        for (ProcessedItem item : items)\n        {\n            log.debug(\"Item: {} x{} \u003d {}gp\", item.name, item.quantity, item.value);\n            totalValue +\u003d item.value;\n        }\n        \n        if (items.isEmpty())\n        {\n            log.debug(\"No items to submit\");\n            return;\n        }\n        \n        // Submit all items as a batch - API client will filter by per-channel thresholds\n        final int finalTotalValue \u003d totalValue;\n        final List\u003cProcessedItem\u003e itemsCopy \u003d new ArrayList\u003c\u003e(items);\n        final String finalScreenshotUrl \u003d screenshotUrl;\n        final String finalScreenshotBase64 \u003d screenshotBase64;\n        executor.execute(() -\u003e {\n            try\n            {\n                log.debug(\"Submitting {} items from {} (total: {}gp) with screenshot: {}\", \n                    itemsCopy.size(), sourceName, finalTotalValue, \n                    (finalScreenshotUrl !\u003d null || finalScreenshotBase64 !\u003d null));\n                \n                apiClient.submitDropBatch(itemsCopy, rsn, sourceName, type.name(), \n                    finalScreenshotUrl, finalScreenshotBase64);\n                log.debug(\"Successfully submitted {} items\", itemsCopy.size());\n                \n                // Update panel with each drop\n                for (ProcessedItem item : itemsCopy)\n                {\n                    LootDropData drop \u003d new LootDropData(\n                        rsn, item.name, item.quantity, item.value, \n                        sourceName, type.name(), finalScreenshotUrl\n                    );\n                    SwingUtilities.invokeLater(() -\u003e panel.addRecentDrop(drop));\n                }\n                \n                // Refresh stats after successful drop submission\n                SwingUtilities.invokeLater(() -\u003e panel.refreshStats());\n            }\n            catch (Exception e)\n            {\n                log.error(\"Failed to submit drops: {}\", e.getMessage());\n            }\n        });\n    }\n\n    @Subscribe\n    public void onChatMessage(ChatMessage event)\n    {\n        if (event.getType() !\u003d ChatMessageType.GAMEMESSAGE)\n        {\n            return;\n        }\n\n        // Check for collection log messages\n        final String message \u003d event.getMessage();\n        if (message.contains(\"New item added to your collection log:\"))\n        {\n            if (!authManager.isAuthenticated() || !config.trackCollectionLog())\n            {\n                return;\n            }\n\n            // Extract item name from message\n            String itemName \u003d extractCollectionLogItem(message);\n            if (itemName !\u003d null)\n            {\n                // Check for duplicate - prevent processing the same item within 5 seconds\n                final String dedupKey \u003d itemName.toLowerCase();\n                final long now \u003d System.currentTimeMillis();\n                final Long lastProcessed \u003d recentCollectionLogItems.get(dedupKey);\n                \n                if (lastProcessed !\u003d null \u0026\u0026 (now - lastProcessed) \u003c COLLECTION_LOG_DEDUP_WINDOW_MS)\n                {\n                    log.debug(\"Skipping duplicate collection log entry for: {} (processed {}ms ago)\", \n                        itemName, now - lastProcessed);\n                    return;\n                }\n                \n                // Mark as processed\n                recentCollectionLogItems.put(dedupKey, now);\n                \n                // Clean up old entries (older than 30 seconds)\n                recentCollectionLogItems.entrySet().removeIf(e -\u003e (now - e.getValue()) \u003e 30000);\n                \n                // Cache this as a potential pet name (for cross-referencing with pet messages)\n                // This helps when we get a pet but it doesn\u0027t become our follower (dupe/inventory full)\n                recentCollectionLogPetCandidate \u003d itemName;\n                recentCollectionLogPetCandidateTime \u003d now;\n                \n                final String rsn \u003d client.getLocalPlayer() !\u003d null ? client.getLocalPlayer().getName() : \"Unknown\";\n                final String finalItemName \u003d itemName;\n                \n                log.debug(\"Processing collection log entry: {}\", itemName);\n                \n                // Capture screenshot if enabled, then submit\n                if (config.captureScreenshots())\n                {\n                    captureScreenshot(screenshotData -\u003e {\n                        String url \u003d screenshotData !\u003d null ? screenshotData.url : null;\n                        String base64 \u003d screenshotData !\u003d null ? screenshotData.base64 : null;\n                        submitCollectionLogEntry(rsn, finalItemName, url, base64);\n                    });\n                }\n                else\n                {\n                    executor.execute(() -\u003e submitCollectionLogEntry(rsn, finalItemName, null, null));\n                }\n            }\n        }\n\n        // Check for pet messages\n        if (message.contains(\"You have a funny feeling\") || message.contains(\"You feel something weird\"))\n        {\n            if (!authManager.isAuthenticated() || !config.trackPets())\n            {\n                return;\n            }\n\n            final String rsn \u003d client.getLocalPlayer() !\u003d null ? client.getLocalPlayer().getName() : \"Unknown\";\n            final String petMessage \u003d message;\n            \n            // Check if this is a \"would have been followed\" message (pet didn\u0027t become follower)\n            final boolean isDuplicatePet \u003d message.contains(\"would have been followed\");\n            \n            // Try to get the pet name from the player\u0027s follower\n            // Schedule a slight delay to allow the pet to spawn\n            executor.schedule(() -\u003e {\n                clientThread.invoke(() -\u003e {\n                    String petName \u003d null;\n                    \n                    // Method 1: Try to get the pet name from the player\u0027s follower\n                    if (!isDuplicatePet \u0026\u0026 client.getFollower() !\u003d null)\n                    {\n                        petName \u003d client.getFollower().getName();\n                        log.debug(\"Pet drop detected! Pet name from follower: {}\", petName);\n                    }\n                    \n                    // Method 2: If no follower (dupe/inventory full), check recent collection log entries\n                    // Pets often trigger a collection log entry at the same time\n                    if (petName \u003d\u003d null)\n                    {\n                        long now \u003d System.currentTimeMillis();\n                        if (recentCollectionLogPetCandidate !\u003d null \u0026\u0026 \n                            (now - recentCollectionLogPetCandidateTime) \u003c PET_COLLECTION_LOG_WINDOW_MS)\n                        {\n                            petName \u003d recentCollectionLogPetCandidate;\n                            log.debug(\"Pet drop detected! Pet name from collection log: {}\", petName);\n                            // Clear the candidate so we don\u0027t reuse it\n                            recentCollectionLogPetCandidate \u003d null;\n                        }\n                        else\n                        {\n                            log.debug(\"Pet drop detected! Could not determine pet name (no follower, no recent collection log)\");\n                        }\n                    }\n                    \n                    final String finalPetName \u003d petName;\n                    \n                    // Capture screenshot if enabled, then submit\n                    if (config.captureScreenshots())\n                    {\n                        captureScreenshot(screenshotData -\u003e {\n                            String url \u003d screenshotData !\u003d null ? screenshotData.url : null;\n                            String base64 \u003d screenshotData !\u003d null ? screenshotData.base64 : null;\n                            submitPetDrop(rsn, petMessage, finalPetName, url, base64);\n                        });\n                    }\n                    else\n                    {\n                        executor.execute(() -\u003e submitPetDrop(rsn, petMessage, finalPetName, null, null));\n                    }\n                });\n            }, 600, TimeUnit.MILLISECONDS); // Small delay for pet to spawn\n        }\n    }\n    \n    /**\n     * Submit a pet drop with optional screenshot and pet name\n     */\n    private void submitPetDrop(String rsn, String message, String petName, String screenshotUrl, String screenshotBase64)\n    {\n        String displayName \u003d petName !\u003d null ? petName : \"Pet Drop\";\n        \n        LootDropData drop \u003d new LootDropData(\n            rsn,\n            displayName,\n            1,\n            0,\n            \"Pet\",\n            \"PET\",\n            screenshotUrl\n        );\n\n        executor.execute(() -\u003e {\n            try\n            {\n                apiClient.submitPetDrop(drop, message, petName, screenshotUrl, screenshotBase64);\n                log.debug(\"Submitted pet drop: {} with screenshot: {}\", displayName, (screenshotUrl !\u003d null || screenshotBase64 !\u003d null));\n                SwingUtilities.invokeLater(() -\u003e panel.addRecentDrop(drop));\n            }\n            catch (Exception e)\n            {\n                log.error(\"Failed to submit pet drop\", e);\n            }\n        });\n    }\n\n    private String extractCollectionLogItem(String message)\n    {\n        // Format: \"New item added to your collection log: \u003ccol\u003dff0000\u003eitem name\u003c/col\u003e\"\n        int colonIndex \u003d message.lastIndexOf(\u0027:\u0027);\n        if (colonIndex !\u003d -1 \u0026\u0026 colonIndex \u003c message.length() - 1)\n        {\n            String itemName \u003d message.substring(colonIndex + 1).trim();\n            // Strip OSRS color tags like \u003ccol\u003dff0000\u003e...\u003c/col\u003e\n            itemName \u003d stripColorTags(itemName);\n            return itemName;\n        }\n        return null;\n    }\n    \n    /**\n     * Strip OSRS color formatting tags from text\n     * Format: \u003ccol\u003dXXXXXX\u003etext\u003c/col\u003e\n     */\n    private String stripColorTags(String text)\n    {\n        if (text \u003d\u003d null)\n        {\n            return null;\n        }\n        // Remove opening color tags like \u003ccol\u003dff0000\u003e\n        text \u003d text.replaceAll(\"\u003ccol\u003d[0-9a-fA-F]+\u003e\", \"\");\n        // Remove closing \u003c/col\u003e tags\n        text \u003d text.replaceAll(\"\u003c/col\u003e\", \"\");\n        return text.trim();\n    }\n    \n    /**\n     * Submit a collection log entry with optional screenshot\n     */\n    private void submitCollectionLogEntry(String rsn, String itemName, String screenshotUrl, String screenshotBase64)\n    {\n        LootDropData drop \u003d new LootDropData(\n            rsn,\n            itemName,\n            1,\n            0, // Value will be looked up on server\n            \"Collection Log\",\n            \"COLLECTION_LOG\",\n            screenshotUrl\n        );\n\n        executor.execute(() -\u003e {\n            try\n            {\n                apiClient.submitCollectionLogEntry(drop, screenshotUrl, screenshotBase64);\n                log.debug(\"Submitted collection log entry: {} with screenshot: {}\", \n                    itemName, (screenshotUrl !\u003d null || screenshotBase64 !\u003d null));\n                SwingUtilities.invokeLater(() -\u003e panel.addRecentDrop(drop));\n            }\n            catch (Exception e)\n            {\n                log.error(\"Failed to submit collection log entry\", e);\n            }\n        });\n    }\n\n    @Subscribe\n    public void onConfigChanged(ConfigChanged event)\n    {\n        if (event.getGroup().equals(\"osrsloottracker\"))\n        {\n            // Update the panel\u0027s tracking status display when config changes\n            SwingUtilities.invokeLater(() -\u003e {\n                if (panel !\u003d null)\n                {\n                    panel.updateTrackingStatus();\n                }\n            });\n        }\n    }\n\n    @Subscribe\n    public void onGameStateChanged(GameStateChanged event)\n    {\n        if (event.getGameState() \u003d\u003d GameState.LOGGED_IN)\n        {\n            log.debug(\"LOGGED_IN detected, scheduling RSN check...\");\n            \n            // Schedule a delayed check - RSN takes ~1-2 seconds to be available after login\n            executor.schedule(() -\u003e {\n                // Now get the RSN on the client thread\n                clientThread.invoke(() -\u003e {\n                    String rsn \u003d null;\n                    if (client.getLocalPlayer() !\u003d null)\n                    {\n                        rsn \u003d client.getLocalPlayer().getName();\n                    }\n                    log.debug(\"Player RSN after delay: {}\", rsn);\n                    \n                    if (rsn !\u003d null \u0026\u0026 !rsn.isEmpty())\n                    {\n                        SwingUtilities.invokeLater(() -\u003e {\n                            if (panel !\u003d null)\n                            {\n                                panel.refreshStats();\n                            }\n                        });\n                    }\n                });\n            }, 2, TimeUnit.SECONDS);\n        }\n    }\n\n    @Provides\n    OSRSLootTrackerConfig provideConfig(ConfigManager configManager)\n    {\n        return configManager.getConfig(OSRSLootTrackerConfig.class);\n    }\n    \n}\n\n\n","filePath":"src\\main\\java\\com\\osrsloottracker\\OSRSLootTrackerPlugin.java"},{"fileName":"OSRSLootTrackerPluginTest.java","content":"package com.osrsloottracker;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class OSRSLootTrackerPluginTest\n{\n    public static void main(String[] args) throws Exception\n    {\n        ExternalPluginManager.loadBuiltin(OSRSLootTrackerPlugin.class);\n        RuneLite.main(args);\n    }\n}\n\n","filePath":"src\\test\\java\\com\\osrsloottracker\\OSRSLootTrackerPluginTest.java"}]},{"commit":"4337d15f220de835293aab77f93e44025d4312cf","repository":"https://github.com/serverlat/clan-rank-up-notifier.git","internalName":"clan-rank-up-notifier","files":[{"fileName":"ClanRankUpNotifierConfig.java","content":"package clanrankupnotifier;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"clanrankupnotifier\")\npublic interface ClanRankUpNotifierConfig extends Config\n{\n    // ClanRankNotifierConfig.java\n    @ConfigItem(\n            keyName \u003d \"eligibleRanks\",\n            name \u003d \"Eligible current ranks\",\n            description \u003d \"Only members whose CURRENT rank is in this list are checked. \" +\n                    \"Use your clan\u0027s rank titles or numbers (-1..127) separated by comma \u0027,\u0027. \" +\n                    \"Examples:\\nRecruit\\nCorporal\\n20\\n100\"\n    )\n    default String eligibleRanks()\n    {\n        return \"\"; // empty \u003d no filtering (process all)\n    }\n\n    @ConfigItem(\n            keyName \u003d \"rules\",\n            name \u003d \"Rank rules\",\n            description \u003d \"One rule per line: Days \u003d Rank\\n\" +\n                    \"Rank can be a number (-1..127) or YOUR clan\u0027s rank title (case-insensitive).\\n\" +\n                    \"Examples:\\n\" +\n                    \"7\u003dRecruit\\n\" +\n                    \"30\u003dCorporal\\n\" +\n                    \"60\u003dSergeant\\n\" +\n                    \"Or numeric: 7\u003d1, 30\u003d10, 60\u003d20\"\n    )\n    default String rules()\n    {\n        return String.join(\"\\n\",\n                \"# Days \u003d RankName or RankNumber\",\n                \"7\u003dRecruit\",\n                \"30\u003dCorporal\",\n                \"60\u003dSergeant\"\n        );\n    }\n\n    @ConfigItem(\n            keyName \u003d \"ignorelist\",\n            name \u003d \"Ignored users\",\n            description \u003d \"Ignored users (comma-separated). These names will be skipped.\"\n    )\n    default String ignoredUsers()\n    {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d \"muteNotifications\",\n            name \u003d \"Mute notifications\",\n            description \u003d \"Check if you\u0027d like to mute notifications about due rank-ups. Set to true by default.\"\n    )\n    default boolean muteNotifications() { return true; }\n}\n","filePath":"src/main/java/clanrankupnotifier/ClanRankUpNotifierConfig.java"},{"fileName":"ClanRankUpNotifierPanel.java","content":"// ClanRankNotifierPanel.java\npackage clanrankupnotifier;\n\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.PluginPanel;\n\nimport javax.swing.*;\nimport javax.swing.border.EmptyBorder;\nimport java.awt.*;\nimport java.util.List;\nimport java.util.function.Consumer;\nimport java.util.function.Supplier;\n\npublic class ClanRankUpNotifierPanel extends PluginPanel\n{\n    private static final int NAME_COLUMN_WIDTH \u003d 65;\n    private static final int DAYS_COLUMN_WIDTH \u003d 40;\n    private static final int CURRENT_RANK_COLUMN_WIDTH \u003d 50;\n    private static final int NEXT_RANK_COLUMN_WIDTH \u003d 50;\n\n    private final JPanel content \u003d new JPanel();\n    private final JLabel infoLabel \u003d new JLabel();\n    private final JButton runButton \u003d new JButton(\"Update\");\n    private final Consumer\u003cString\u003e onIgnoreUser;\n\n    public ClanRankUpNotifierPanel(Runnable onRunCheck, Consumer\u003cString\u003e onIgnoreUser)\n    {\n        this.onIgnoreUser \u003d onIgnoreUser;\n\n        setLayout(new BorderLayout(0, 4));\n        setBorder(BorderFactory.createEmptyBorder(8, 8, 8, 8));\n        setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n        JPanel top \u003d new JPanel(new BorderLayout());\n        top.setOpaque(false);\n\n        JLabel headerLabel \u003d new JLabel(\"Clan Rank Up Notifier\");\n        headerLabel.setFont(headerLabel.getFont().deriveFont(Font.BOLD, 14f));\n        headerLabel.setForeground(Color.WHITE);\n\n        runButton.setFocusable(false);\n        runButton.setMargin(new Insets(2, 8, 2, 8));\n        runButton.addActionListener(e -\u003e {\n            setBusy(true);\n            try {\n                if (onRunCheck !\u003d null) onRunCheck.run();\n            }\n            finally { setBusy(false); }\n        });\n\n        top.add(headerLabel, BorderLayout.WEST);\n        top.add(runButton, BorderLayout.EAST);\n        add(top, BorderLayout.NORTH);\n\n        infoLabel.setForeground(Color.LIGHT_GRAY);\n        infoLabel.setFont(infoLabel.getFont().deriveFont(Font.PLAIN, 12f));\n        infoLabel.setBorder(new EmptyBorder(2, 2, 2, 2));\n        add(infoLabel, BorderLayout.CENTER);\n\n        content.setLayout(new BoxLayout(content, BoxLayout.Y_AXIS));\n        content.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n        content.add(makeHeaderRow());\n\n        content.setAlignmentX(0f);\n        add(content, BorderLayout.SOUTH);\n    }\n\n    private JComponent makeWrappingNameCell(String text) {\n        JTextArea ta \u003d new JTextArea(text);\n        ta.setFont(FontManager.getRunescapeSmallFont());\n        ta.setForeground(Color.WHITE);\n        ta.setOpaque(false);\n        ta.setEditable(false);\n        ta.setHighlighter(null);\n        ta.setLineWrap(true);\n        ta.setWrapStyleWord(true);\n        ta.setBorder(new EmptyBorder(0, 4, 1, 4));\n        ta.setSize(new Dimension(ClanRankUpNotifierPanel.NAME_COLUMN_WIDTH, Short.MAX_VALUE));\n        Dimension pref \u003d ta.getPreferredSize();\n        Dimension fixed \u003d new Dimension(ClanRankUpNotifierPanel.NAME_COLUMN_WIDTH, pref.height);\n        ta.setMinimumSize(new Dimension(ClanRankUpNotifierPanel.NAME_COLUMN_WIDTH, 0));\n        ta.setPreferredSize(fixed);\n        ta.setMaximumSize(new Dimension(ClanRankUpNotifierPanel.NAME_COLUMN_WIDTH, Integer.MAX_VALUE));\n        ta.setToolTipText(text);\n        return ta;\n    }\n\n    public void setBusy(boolean busy) {\n        SwingUtilities.invokeLater(() -\u003e runButton.setEnabled(!busy));\n    }\n\n    public void setInfoText(String text) {\n        SwingUtilities.invokeLater(() -\u003e {\n            infoLabel.setText(text \u003d\u003d null ? \"\" : text);\n            infoLabel.setVisible(text !\u003d null \u0026\u0026 !text.isBlank());\n        });\n    }\n\n    public void setRows(List\u003cString\u003e lines)\n    {\n        SwingUtilities.invokeLater(() -\u003e {\n            content.removeAll();\n            content.add(makeHeaderRow());\n\n            if (lines \u003d\u003d null || lines.isEmpty()) {\n                content.add(makeInfoRow(\"No promotions due.\\nSomething wrong? Please check the plugin configuration.\"));\n            } else {\n                for (String line : lines) content.add(createMemberRow(line));\n            }\n\n            content.revalidate();\n            content.repaint();\n        });\n    }\n\n    private JComponent makeInfoRow(String text) {\n        JPanel row \u003d new JPanel();\n        row.setLayout(new BoxLayout(row, BoxLayout.X_AXIS));\n        row.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        row.setBorder(BorderFactory.createCompoundBorder(\n                BorderFactory.createMatteBorder(0, 0, 1, 0, ColorScheme.DARK_GRAY_COLOR),\n                new EmptyBorder(6, 8, 6, 8)));\n\n        JLabel label \u003d new JLabel(text);\n        label.setForeground(Color.WHITE);\n        row.add(label);\n        row.setMaximumSize(new Dimension(Integer.MAX_VALUE, row.getPreferredSize().height));\n\n        return row;\n    }\n\n    private JPanel makeHeaderRow() {\n        JPanel row \u003d new JPanel();\n        row.setLayout(new BoxLayout(row, BoxLayout.X_AXIS));\n        row.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        row.setBorder(BorderFactory.createCompoundBorder(\n                BorderFactory.createMatteBorder(0, 0, 1, 0, ColorScheme.DARK_GRAY_COLOR),\n                new EmptyBorder(6, 6, 6, 6)));\n\n        row.add(makeHeaderLabel(\"Name\", NAME_COLUMN_WIDTH));\n        row.add(makeHeaderLabel(\"Days\", DAYS_COLUMN_WIDTH));\n        row.add(makeHeaderLabel(\"Curr\", CURRENT_RANK_COLUMN_WIDTH));\n        row.add(makeHeaderLabel(\"Next\", NEXT_RANK_COLUMN_WIDTH));\n        row.add(Box.createHorizontalGlue());\n        row.setMaximumSize(new Dimension(Integer.MAX_VALUE, row.getPreferredSize().height));\n\n        return row;\n    }\n\n    private JLabel makeHeaderLabel(String text, int width) {\n        JLabel l \u003d new JLabel(text);\n        l.setFont(FontManager.getRunescapeSmallFont());\n        l.setForeground(ColorScheme.PROGRESS_COMPLETE_COLOR.darker());\n        l.setBorder(new EmptyBorder(0, 4, 0, 4));\n        l.setToolTipText(text);\n        fixWidth(l, width);\n        return l;\n    }\n\n    private void fixWidth(JComponent c, int width) {\n        Dimension d \u003d new Dimension(width, c.getPreferredSize().height);\n        c.setMinimumSize(new Dimension(width, d.height));\n        c.setPreferredSize(new Dimension(width, d.height));\n        c.setMaximumSize(new Dimension(width, Integer.MAX_VALUE));\n    }\n\n    private JPanel createMemberRow(String text)\n    {\n        String name \u003d \"\";\n        String days \u003d \"\";\n        String currentRank \u003d \"\";\n        String nextRank \u003d \"\";\n\n        String[] parts \u003d text.split(\",\");\n        name \u003d parts.length \u003e 0 ? parts[0].trim() : \"?\";\n        days \u003d parts.length \u003e 1 ? parts[1].trim() : \"?\";\n        nextRank \u003d  parts.length \u003e 2 ? parts[2].trim() : \"?\";\n        currentRank \u003d parts.length \u003e 3 ? parts[3].trim() : \"?\";\n\n        JPanel row \u003d new JPanel();\n        row.setLayout(new BoxLayout(row, BoxLayout.X_AXIS));\n        row.setOpaque(true);\n        row.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        row.setBorder(new EmptyBorder(4, 6, 4, 6));\n\n        final Color base \u003d row.getBackground();\n        String finalName \u003d name;\n        row.addMouseListener(new java.awt.event.MouseAdapter()\n        {\n            @Override public void mouseEntered(java.awt.event.MouseEvent e) { row.setBackground(base.brighter()); }\n            @Override public void mouseExited (java.awt.event.MouseEvent e) { row.setBackground(base); }\n        });\n\n        JComponent nameLabel \u003d makeWrappingNameCell(name);\n        JLabel daysLabel \u003d makeCell(days, DAYS_COLUMN_WIDTH, new Color(100, 225, 255));\n        daysLabel.setHorizontalAlignment(SwingConstants.RIGHT);\n        JLabel currentRankLabel \u003d makeCell(currentRank, CURRENT_RANK_COLUMN_WIDTH, new Color(255, 230, 110));\n        JLabel nextRankLabel \u003d makeCell(nextRank, NEXT_RANK_COLUMN_WIDTH, new Color(140, 255, 160));\n\n        row.add(nameLabel);\n        row.add(daysLabel);\n        row.add(currentRankLabel);\n        row.add(nextRankLabel);\n        row.add(Box.createHorizontalGlue());\n\n        Supplier\u003cJPopupMenu\u003e menu \u003d () -\u003e buildMemberMenu(finalName);\n        installPopup(row, menu);\n        installPopup(nameLabel, menu);\n        installPopup(daysLabel, menu);\n        installPopup(currentRankLabel, menu);\n        installPopup(nextRankLabel, menu);\n\n        JPanel wrapper \u003d new JPanel(new BorderLayout());\n        wrapper.setOpaque(false);\n        wrapper.add(row, BorderLayout.CENTER);\n        wrapper.add(new JSeparator(JSeparator.HORIZONTAL), BorderLayout.SOUTH);\n        wrapper.setMaximumSize(new Dimension(Integer.MAX_VALUE, wrapper.getPreferredSize().height));\n        return wrapper;\n    }\n\n    private void installPopup(JComponent c, java.util.function.Supplier\u003cJPopupMenu\u003e menuSupplier)\n    {\n        c.addMouseListener(new java.awt.event.MouseAdapter()\n        {\n            @Override public void mousePressed (java.awt.event.MouseEvent e) { maybe(e); }\n            @Override public void mouseReleased(java.awt.event.MouseEvent e) { maybe(e); }\n\n            private void maybe(java.awt.event.MouseEvent e)\n            {\n                if (!e.isPopupTrigger()) return;\n\n                JPopupMenu menu \u003d menuSupplier.get();\n                if (menu \u003d\u003d null || menu.getComponentCount() \u003d\u003d 0) return;\n\n                menu.show(e.getComponent(), e.getX(), e.getY());\n                e.consume();\n            }\n        });\n    }\n\n    private JPopupMenu buildMemberMenu(final String memberName)\n    {\n        JPopupMenu menu \u003d new JPopupMenu();\n        JMenuItem ignore \u003d new JMenuItem(\"Ignore \" + memberName);\n        ignore.addActionListener(ev -\u003e {\n            if (onIgnoreUser !\u003d null) onIgnoreUser.accept(memberName);\n        });\n        menu.add(ignore);\n        return menu;\n    }\n\n    private JLabel makeCell(String text, int width, Color fg) {\n        JLabel l \u003d new JLabel(text);\n        l.setFont(FontManager.getRunescapeSmallFont());\n        l.setForeground(fg);\n        l.setBorder(new EmptyBorder(0, 4, 0, 4));\n        fixWidth(l, width);\n        l.setToolTipText(text);\n        return l;\n    }\n}\n","filePath":"src/main/java/clanrankupnotifier/ClanRankUpNotifierPanel.java"},{"fileName":"ClanRankUpNotifierPlugin.java","content":"package clanrankupnotifier;\n\nimport com.google.inject.Provides;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.clan.*;\nimport net.runelite.api.events.ClanChannelChanged;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.client.Notifier;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.util.ImageUtil;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport javax.inject.Inject;\nimport java.awt.image.BufferedImage;\nimport java.time.LocalDate;\nimport java.time.temporal.ChronoUnit;\nimport java.util.*;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.concurrent.ScheduledFuture;\n\n@PluginDescriptor(\n        name \u003d \"Clan Rank Up Notifier\",\n        description \u003d \"Notifies when clan members hit time-in-clan thresholds (configurable)\",\n        tags \u003d {\"clan\", \"rank\", \"notify\"}\n)\npublic class ClanRankUpNotifierPlugin extends Plugin\n{\n    private static final Logger LOG \u003d LoggerFactory.getLogger(ClanRankUpNotifierPlugin.class);\n\n    @Inject private Client client;\n    @Inject private ClientThread clientThread;\n    @Inject private Notifier notifier;\n    @Inject private ClientToolbar clientToolbar;\n    @Inject private ClanRankUpNotifierConfig config;\n    @Inject private ScheduledExecutorService scheduler;\n    @Inject private ConfigManager configManager;\n\n    private ClanRankUpNotifierPanel panel;\n    private NavigationButton navButton;\n\n    private ScheduledFuture\u003c?\u003e task;\n\n    private volatile NavigableMap\u003cInteger, String\u003e rules \u003d new TreeMap\u003c\u003e();\n    private final Map\u003cString, String\u003e notifiedToday \u003d new HashMap\u003c\u003e();\n    private volatile Set\u003cString\u003e eligibleRanksSet \u003d Set.of();\n    private volatile Set\u003cString\u003e ignoredUsersSet   \u003d Set.of();\n    private volatile boolean muteNotifications \u003d true;\n    private LocalDate lastNotificationDate \u003d null;\n\n    @Provides\n    ClanRankUpNotifierConfig provideConfig(ConfigManager cm) { return cm.getConfig(ClanRankUpNotifierConfig.class); }\n\n    @Override\n    protected void startUp()\n    {\n        panel \u003d new ClanRankUpNotifierPanel(this::runManualCheck, this::ignoreUserFromPanel);\n\n        BufferedImage icon \u003d null;\n        try { icon \u003d ImageUtil.loadImageResource(ClanRankUpNotifierPlugin.class, \"icon.png\"); }\n        catch (Exception ignored) {}\n        if (icon \u003d\u003d null) icon \u003d new BufferedImage(1, 1, BufferedImage.TYPE_INT_ARGB);\n\n        navButton \u003d NavigationButton.builder()\n                .tooltip(\"Clan Rank Notifier\")\n                .icon(icon)\n                .priority(5)\n                .panel(panel)\n                .build();\n\n        clientToolbar.addNavigation(navButton);\n\n        parseRules();\n        clientThread.invokeLater(this::checkRosterAndNotify);\n        LOG.info(\"[ClanRankNotifier] started\");\n    }\n\n    @Override\n    protected void shutDown()\n    {\n        if (task !\u003d null) { task.cancel(true); task \u003d null; }\n        if (navButton !\u003d null) { clientToolbar.removeNavigation(navButton); navButton \u003d null; }\n        panel \u003d null;\n        LOG.info(\"[ClanRankNotifier] stopped\");\n    }\n\n    private void parseRules()\n    {\n        TreeMap\u003cInteger, String\u003e tmp \u003d new TreeMap\u003c\u003e();\n        for (String line : config.rules().split(\"\\\\R\"))\n        {\n            String s \u003d line.trim();\n            if (s.isEmpty() || s.startsWith(\"#\")) continue;\n            String[] parts \u003d s.split(\"\u003d\");\n            if (parts.length !\u003d 2) continue;\n\n            try {\n                int days \u003d Integer.parseInt(parts[0].trim());\n                String rank \u003d parts[1].trim();\n                tmp.put(days, rank);\n            } catch (NumberFormatException ignored) { }\n        }\n        rules \u003d tmp;\n\n        eligibleRanksSet \u003d csvToLowerSet(config.eligibleRanks());\n        ignoredUsersSet  \u003d csvToLowerSet(config.ignoredUsers());\n        muteNotifications \u003d config.muteNotifications();\n    }\n\n    private void ignoreUserFromPanel(String name)\n    {\n        if (name \u003d\u003d null || name.isBlank()) return;\n\n        String n \u003d name.trim();\n\n        clientThread.invokeLater(() -\u003e\n        {\n            String current \u003d config.ignoredUsers();\n            Set\u003cString\u003e set \u003d new java.util.LinkedHashSet\u003c\u003e(); // stable order\n\n            if (current !\u003d null \u0026\u0026 !current.isBlank())\n            {\n                for (String p : current.split(\",\"))\n                {\n                    String t \u003d p.trim();\n                    if (!t.isEmpty()) set.add(t);\n                }\n            }\n\n            boolean exists \u003d set.stream().anyMatch(x -\u003e x.equalsIgnoreCase(n));\n            if (!exists) set.add(n);\n\n            String updated \u003d String.join(\", \", set);\n\n            configManager.setConfiguration(\"clanrankupnotifier\", \"ignorelist\", updated);\n\n            parseRules();\n            checkRosterAndNotify();\n        });\n    }\n\n\n    private static Set\u003cString\u003e csvToLowerSet(String s) {\n        if (s \u003d\u003d null) return Set.of();\n        String[] parts \u003d s.split(\",\");\n        Set\u003cString\u003e out \u003d new HashSet\u003c\u003e();\n        for (String p : parts) {\n               String t \u003d p.trim().toLowerCase();\n                if (!t.isEmpty()) out.add(t);\n            }\n        return out;\n    }\n\n    private ClanSettings getClan()\n    {\n        try {\n            ClanSettings cs \u003d client.getClanSettings(ClanID.CLAN);\n            if (cs !\u003d null \u0026\u0026 cs.getMembers() !\u003d null) return cs;\n        } catch (Throwable ignored) { }\n\n        try {\n            ClanSettings cs \u003d client.getClanSettings();\n            if (cs !\u003d null \u0026\u0026 cs.getMembers() !\u003d null) return cs;\n        } catch (Throwable ignored) { }\n\n        return null;\n    }\n\n    @Subscribe\n    public void onGameStateChanged(GameStateChanged e)\n    {\n        if (e.getGameState() \u003d\u003d GameState.LOGGED_IN)\n            clientThread.invokeLater(this::checkRosterAndNotify);\n    }\n\n    @Subscribe\n    public void onClanChannelChanged(ClanChannelChanged e)\n    {\n        clientThread.invokeLater(this::checkRosterAndNotify);\n    }\n\n    @Subscribe\n    public void onConfigChanged(ConfigChanged e)\n    {\n        if (!\"clanrankupnotifier\".equals(e.getGroup())) return;\n        parseRules();\n        clientThread.invokeLater(this::checkRosterAndNotify);\n    }\n\n    private void checkRosterAndNotify()\n    {\n        if (client.getGameState() !\u003d GameState.LOGGED_IN) return;\n\n        ClanSettings cs \u003d getClan();\n        if (cs \u003d\u003d null || rules.isEmpty())\n        {\n            panel.setRows(List.of());\n            return;\n        }\n        else\n        {\n            panel.setInfoText(\"\");\n        }\n\n        LocalDate today \u003d LocalDate.now();\n        if (!today.equals(lastNotificationDate))\n        {\n            notifiedToday.clear();\n            lastNotificationDate \u003d today;\n        }\n\n        final List\u003cString\u003e due \u003d new ArrayList\u003c\u003e();\n\n        for (ClanMember member : cs.getMembers())\n        {\n            final String name \u003d member.getName();\n            if (name \u003d\u003d null || name.isBlank()) continue;\n\n            final LocalDate joined \u003d getJoinDate(member);\n            if (joined \u003d\u003d null) continue;\n\n            final long days \u003d ChronoUnit.DAYS.between(joined, today);\n            final Map.Entry\u003cInteger, String\u003e rule \u003d rules.floorEntry((int) days);\n            if (rule \u003d\u003d null) continue;\n\n            final String targetRankName \u003d rule.getValue();\n            final ClanRank currentRank \u003d member.getRank();\n            final ClanTitle currentClanRankTitle \u003d cs.titleForRank(currentRank);\n            final boolean noRank \u003d currentClanRankTitle \u003d\u003d null;\n            final String currentRankName \u003d noRank ? \"Not ranked\" : cs.titleForRank(currentRank).getName();\n\n            final boolean eligibleRank \u003d eligibleRanksSet.contains(currentRankName.toLowerCase());\n            final boolean correctRank \u003d targetRankName.trim().equalsIgnoreCase(currentRankName.trim());\n            final boolean inIgnoreList \u003d ignoredUsersSet.contains(name.toLowerCase());\n\n            if (!eligibleRank || correctRank || noRank || inIgnoreList) continue;\n\n            due.add(String.format(\"%s,%d,%s,%s\", name, days, targetRankName, currentRankName));\n            final String last \u003d notifiedToday.get(name);\n            if (!Objects.equals(last, targetRankName) \u0026\u0026 !muteNotifications) {\n                notifier.notify(String.format(\n                        \"[Clan Rank] %s is %d days in clan  due for %s (current: %s)\",\n                        name, days, targetRankName, currentRankName));\n                notifiedToday.put(name, targetRankName);\n            }\n        }\n\n        due.sort((a, b) -\u003e {\n                        int da \u003d Integer.parseInt(a.split(\",\")[1].trim());\n                        int db \u003d Integer.parseInt(b.split(\",\")[1].trim());\n                        return Integer.compare(db, da);\n                    });\n\n        panel.setInfoText(\"Members due: \" + due.size());\n        panel.setRows(due);\n    }\n\n    private void runManualCheck()\n    {\n        clientThread.invoke(() -\u003e {\n            try {\n                panel.setBusy(true);\n                checkRosterAndNotify();\n            } finally {\n                panel.setBusy(false);\n            }\n        });\n    }\n\n    private LocalDate getJoinDate(ClanMember member)\n    {\n        try {\n            LocalDate date \u003d member.getJoinDate();\n            if (date !\u003d null) return date;\n        } catch (Throwable ignored) { }\n\n        return null;\n    }\n}\n","filePath":"src/main/java/clanrankupnotifier/ClanRankUpNotifierPlugin.java"},{"fileName":"ClanRankUpNotifierTest.java","content":"package clanrankupnotifier;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ClanRankUpNotifierTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(ClanRankUpNotifierPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src/test/java/clanrankupnotifier/ClanRankUpNotifierTest.java"}]},{"commit":"101f4552e41137786da779a477f01c9edb2d140e","repository":"https://github.com/ReinhardtR/runeprofile-plugin.git","internalName":"runeprofile","files":[{"fileName":"ItemUtils.java","content":"package com.runeprofile.utils;\n\n\nimport lombok.Getter;\nimport lombok.NonNull;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.client.game.ItemManager;\n\nimport javax.annotation.Nullable;\n\npublic class ItemUtils {\n    public static final String ITEM_CACHE_BASE_URL \u003d \"https://static.runelite.net/cache/item/\";\n\n    public static final int VALUABLE_DROP_THRESHOLD \u003d 1_000_000;\n\n    @Getter\n    @RequiredArgsConstructor\n    public enum ClanBroadcastValue {\n        BELLATOR_VESTIGE(28279, 5_000_000),\n        MAGUS_VESTIGE(28281, 5_000_000),\n        VENATOR_VESTIGE(28283, 5_000_000),\n        ULTOR_VESTIGE(28285, 5_000_000),\n\n        NOXIOUS_POINT(29790, 10_000_000),\n        NOXIOUS_BLADE(29792, 10_000_000),\n        NOXIOUS_POMMEL(29794, 10_000_000),\n        ARAXYTE_FANG(29799, 50_000_000),\n\n        MOKHAIOTL_CLOTH(31109, 75_000_000);\n\n        private final int itemId;\n        private final int value;\n\n        public static @Nullable ClanBroadcastValue getByItemId(int itemId) {\n            for (ClanBroadcastValue value : ClanBroadcastValue.values()) {\n                if (value.getItemId() \u003d\u003d itemId) {\n                    return value;\n                }\n            }\n            return null;\n        }\n    }\n\n    public static int getUnnotedItemId(@NonNull ItemComposition comp) {\n        return isItemNoted(comp) ? comp.getLinkedNoteId() : comp.getId();\n    }\n\n    public static int getPerceivedItemValue(@NonNull ItemManager itemManager, int itemId) {\n        ClanBroadcastValue clanBroadcastValue \u003d ClanBroadcastValue.getByItemId(itemId);\n        if (clanBroadcastValue !\u003d null) {\n            return clanBroadcastValue.getValue();\n        }\n        return itemManager.getItemPriceWithSource(itemId, true);\n    }\n\n    public static boolean isItemNoted(@NonNull ItemComposition item) {\n        return item.getNote() !\u003d -1;\n    }\n}\n","filePath":"src/main/java/com/runeprofile/utils/ItemUtils.java"},{"fileName":"ItemSearcher.java","content":"/* BSD 2-Clause License\n\nCopyright (c) 2022, Jake Barter\nAll rights reserved.\n\nCopyright (c) 2022, pajlads\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n1. Redistributions of source code must retain the above copyright notice, this\nlist of conditions and the following disclaimer.\n\n2. Redistributions in binary form must reproduce the above copyright notice,\nthis list of conditions and the following disclaimer in the documentation\nand/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */\n\npackage com.runeprofile.utils;\n\nimport com.google.gson.Gson;\nimport com.google.gson.reflect.TypeToken;\nimport lombok.NonNull;\nimport lombok.extern.slf4j.Slf4j;\nimport okhttp3.OkHttpClient;\n\nimport javax.annotation.Nullable;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.util.Collections;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.concurrent.CompletableFuture;\n\n/**\n * This thread-safe singleton holds a mapping of item names to their item id, using the RuneLite API.\n * \u003cp\u003e\n * Unlike {@link net.runelite.client.game.ItemManager#search(String)}, this mapping supports untradable items.\n */\n@Slf4j\n@Singleton\npublic class ItemSearcher {\n    private final Map\u003cString, Integer\u003e itemIdByName \u003d Collections.synchronizedMap(new HashMap\u003c\u003e(16384));\n    private @Inject OkHttpClient httpClient;\n    private @Inject Gson gson;\n\n    /**\n     * @param name the exact in-game name of an item\n     * @return the id associated with the item name, or null if not found\n     */\n    @Nullable\n    public Integer findItemId(@NonNull String name) {\n        return itemIdByName.get(name);\n    }\n\n    /**\n     * Begins the initialization process for {@link #itemIdByName}\n     * by querying item names and noted item ids from the RuneLite API,\n     * before passing them to {@link #populate(Map, Set)}\n     *\n     * @implNote This operation does not block the current thread,\n     * by utilizing OkHttp\u0027s thread pool and Java\u0027s Fork-Join common pool.\n     */\n    @Inject\n    void init() {\n        queryNamesById()\n                .thenAcceptBothAsync(\n                        queryNotedItemIds().exceptionally(e -\u003e {\n                            log.error(\"Failed to read noted items\", e);\n                            return Collections.emptySet();\n                        }),\n                        this::populate\n                )\n                .exceptionally(e -\u003e {\n                    log.error(\"Failed to read item names\", e);\n                    return null;\n                });\n    }\n\n    /**\n     * Populates {@link #itemIdByName} with the inverted mappings of {@code namesById},\n     * while skipping noted items specified in {@code notedIds}.\n     *\n     * @param namesById a mapping of item id\u0027s to the corresponding in-game name\n     * @param notedIds  the id\u0027s of noted items\n     * @implNote When multiple non-noted item id\u0027s have the same in-game name, only the earliest id is saved\n     */\n    void populate(@NonNull Map\u003cInteger, String\u003e namesById, @NonNull Set\u003cInteger\u003e notedIds) {\n        namesById.forEach((id, name) -\u003e {\n            if (!notedIds.contains(id))\n                itemIdByName.putIfAbsent(name, id);\n        });\n\n        log.debug(\"Completed initialization of item cache with {} entries\", itemIdByName.size());\n    }\n\n    /**\n     * @return a mapping of item ids to their in-game names, provided by the RuneLite API\n     */\n    private CompletableFuture\u003cMap\u003cInteger, String\u003e\u003e queryNamesById() {\n        return queryCache(\"names.json\", new TypeToken\u003cMap\u003cInteger, String\u003e\u003e() {\n        });\n    }\n\n    /**\n     * @return a set of id\u0027s of noted items, provided by the RuneLite API\n     */\n    private CompletableFuture\u003cSet\u003cInteger\u003e\u003e queryNotedItemIds() {\n        return queryCache(\"notes.json\", new TypeToken\u003cMap\u003cInteger, Integer\u003e\u003e() {\n        })\n                .thenApply(Map::keySet);\n    }\n\n    /**\n     * @param fileName the name of the file to query from RuneLite\u0027s cache\n     * @param type     a type token that indicates how the json response should be parsed\n     * @return the transformed cache response, wrapped in a future\n     */\n    private \u003cT\u003e CompletableFuture\u003cT\u003e queryCache(@NonNull String fileName, @NonNull TypeToken\u003cT\u003e type) {\n        return Utils.readJson(httpClient, gson, ItemUtils.ITEM_CACHE_BASE_URL + fileName, type);\n    }\n}","filePath":"src/main/java/com/runeprofile/utils/ItemSearcher.java"},{"fileName":"UsernameAutocompleter.java","content":"/*\n * Copyright (c) 2018, John Pettenger\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.runeprofile.utils;\n\nimport com.google.common.collect.EvictingQueue;\n\nimport java.awt.event.KeyEvent;\nimport java.awt.event.KeyListener;\nimport java.util.Arrays;\nimport java.util.Objects;\nimport java.util.Optional;\nimport java.util.regex.Pattern;\nimport javax.inject.Singleton;\nimport javax.swing.SwingUtilities;\nimport javax.swing.text.BadLocationException;\nimport javax.swing.text.Document;\nimport javax.swing.text.JTextComponent;\n\nimport com.google.inject.Inject;\nimport lombok.NonNull;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Friend;\nimport net.runelite.api.FriendsChatManager;\nimport net.runelite.api.Nameable;\nimport net.runelite.api.NameableContainer;\nimport net.runelite.api.Player;\nimport net.runelite.api.WorldView;\nimport net.runelite.api.clan.ClanID;\nimport net.runelite.api.clan.ClanMember;\nimport net.runelite.api.clan.ClanSettings;\n\n@Slf4j\n@Singleton\npublic class UsernameAutocompleter implements KeyListener {\n    /**\n     * Non-breaking space character.\n     */\n    private static final String NBSP \u003d Character.toString((char) 160);\n\n    /**\n     * Character class for characters that cannot be in an RSN.\n     */\n    private static final Pattern INVALID_CHARS \u003d Pattern.compile(\"[^a-zA-Z0-9_ -]\");\n\n    private static final int MAX_SEARCH_HISTORY \u003d 25;\n\n    private final Client client;\n\n    private final EvictingQueue\u003cString\u003e searchHistory \u003d EvictingQueue.create(MAX_SEARCH_HISTORY);\n\n    /**\n     * The name currently being autocompleted.\n     */\n    private String autocompleteName;\n\n    /**\n     * Pattern for the name currently being autocompleted.\n     */\n    private Pattern autocompleteNamePattern;\n\n    @Inject\n    private UsernameAutocompleter(Client client) {\n        this.client \u003d client;\n    }\n\n    @Override\n    public void keyPressed(KeyEvent e) {\n\n    }\n\n    @Override\n    public void keyReleased(KeyEvent e) {\n\n    }\n\n    @Override\n    public void keyTyped(KeyEvent e) {\n        final JTextComponent input \u003d (JTextComponent) e.getSource();\n        final String inputText \u003d input.getText();\n\n        // Only autocomplete if the selection end is at the end of the text.\n        if (input.getSelectionEnd() !\u003d inputText.length()) {\n            return;\n        }\n\n        // Character to be inserted at the selection start.\n        final String charToInsert \u003d Character.toString(e.getKeyChar());\n\n        // Don\u0027t attempt to autocomplete if the name is invalid.\n        // This condition is also true when the user presses a key like backspace.\n        if (INVALID_CHARS.matcher(charToInsert).find()\n                || INVALID_CHARS.matcher(inputText).find()) {\n            return;\n        }\n\n        // Check if we are already autocompleting.\n        if (autocompleteName !\u003d null \u0026\u0026 autocompleteNamePattern.matcher(inputText).matches()) {\n            if (isExpectedNext(input, charToInsert)) {\n                try {\n                    // Insert the character and move the selection.\n                    final int insertIndex \u003d input.getSelectionStart();\n                    Document doc \u003d input.getDocument();\n                    doc.remove(insertIndex, 1);\n                    doc.insertString(insertIndex, charToInsert, null);\n                    input.select(insertIndex + 1, input.getSelectionEnd());\n                } catch (BadLocationException ex) {\n                    log.warn(\"Could not insert character.\", ex);\n                }\n\n                // Prevent default behavior.\n                e.consume();\n            } else // Character to insert does not match current autocompletion. Look for another name.\n            {\n                newAutocomplete(e);\n            }\n        } else // Search for a name to autocomplete\n        {\n            newAutocomplete(e);\n        }\n    }\n\n    private void newAutocomplete(KeyEvent e) {\n        final JTextComponent input \u003d (JTextComponent) e.getSource();\n        final String inputText \u003d input.getText();\n        final String nameStart \u003d inputText.substring(0, input.getSelectionStart()) + e.getKeyChar();\n\n        if (findAutocompleteName(nameStart)) {\n            // Assert this.autocompleteName !\u003d null\n            final String name \u003d this.autocompleteName;\n            SwingUtilities.invokeLater(() -\u003e\n            {\n                try {\n                    input.getDocument().insertString(\n                            nameStart.length(),\n                            name.substring(nameStart.length()),\n                            null);\n                    input.select(nameStart.length(), name.length());\n                } catch (BadLocationException ex) {\n                    log.warn(\"Could not autocomplete name.\", ex);\n                }\n            });\n        }\n    }\n\n    private boolean findAutocompleteName(String nameStart) {\n        final Pattern pattern;\n        Optional\u003cString\u003e autocompleteName;\n\n        // Pattern to match names that start with nameStart.\n        // Allows spaces to be represented as common whitespaces, underscores,\n        // hyphens, or non-breaking spaces.\n        // Matching non-breaking spaces is necessary because the API\n        // returns non-breaking spaces when a name has whitespace.\n        pattern \u003d Pattern.compile(\n                \"(?i)^\" + nameStart.replaceAll(\"[ _-]\", \"[ _\" + NBSP + \"-]\") + \".+?\");\n\n        // Search all previous successful queries\n        autocompleteName \u003d searchHistory.stream()\n                .filter(n -\u003e pattern.matcher(n).matches())\n                .findFirst();\n\n        // Search friends if previous searches weren\u0027t matched\n        if (!autocompleteName.isPresent()) {\n            NameableContainer\u003cFriend\u003e friendContainer \u003d client.getFriendContainer();\n            if (friendContainer !\u003d null) {\n                autocompleteName \u003d Arrays.stream(friendContainer.getMembers())\n                        .map(Nameable::getName)\n                        .filter(n -\u003e pattern.matcher(n).matches())\n                        .findFirst();\n            }\n        }\n\n        // Search friends chat if a friend wasn\u0027t found\n        if (!autocompleteName.isPresent()) {\n            final FriendsChatManager friendsChatManager \u003d client.getFriendsChatManager();\n            if (friendsChatManager !\u003d null) {\n                autocompleteName \u003d Arrays.stream(friendsChatManager.getMembers())\n                        .map(Nameable::getName)\n                        .filter(n -\u003e pattern.matcher(n).matches())\n                        .findFirst();\n            }\n        }\n\n        // Search clans\n        if (!autocompleteName.isPresent()) {\n            final ClanSettings[] clanSettings \u003d {\n                    client.getClanSettings(ClanID.CLAN),\n                    client.getClanSettings(ClanID.GROUP_IRONMAN),\n                    client.getGuestClanSettings()\n            };\n            autocompleteName \u003d Arrays.stream(clanSettings)\n                    .filter(Objects::nonNull)\n                    .flatMap(cs -\u003e cs.getMembers().stream())\n                    .map(ClanMember::getName)\n                    .filter(n -\u003e pattern.matcher(n).matches())\n                    .findFirst();\n        }\n\n        // Search cached players if a friend wasn\u0027t found\n        if (!autocompleteName.isPresent()) {\n            WorldView wv \u003d client.getTopLevelWorldView();\n            autocompleteName \u003d wv.players().stream()\n                    .filter(Objects::nonNull)\n                    .map(Player::getName)\n                    .filter(Objects::nonNull)\n                    .filter(n -\u003e pattern.matcher(n).matches())\n                    .findFirst();\n        }\n\n        if (autocompleteName.isPresent()) {\n            this.autocompleteName \u003d autocompleteName.get().replace(NBSP, \" \");\n            this.autocompleteNamePattern \u003d Pattern.compile(\n                    \"(?i)^\" + this.autocompleteName.replaceAll(\"[ _-]\", \"[ _-]\") + \"$\");\n        } else {\n            this.autocompleteName \u003d null;\n            this.autocompleteNamePattern \u003d null;\n        }\n\n        return autocompleteName.isPresent();\n    }\n\n    void addToSearchHistory(@NonNull String name) {\n        if (!searchHistory.contains(name)) {\n            searchHistory.offer(name);\n        }\n    }\n\n    private boolean isExpectedNext(JTextComponent input, String nextChar) {\n        String expected;\n        if (input.getSelectionStart() \u003c input.getSelectionEnd()) {\n            try {\n                expected \u003d input.getText(input.getSelectionStart(), 1);\n            } catch (BadLocationException ex) {\n                log.warn(\"Could not get first character from input selection.\", ex);\n                return false;\n            }\n        } else {\n            expected \u003d \"\";\n        }\n        return nextChar.equalsIgnoreCase(expected);\n    }\n}","filePath":"src/main/java/com/runeprofile/utils/UsernameAutocompleter.java"},{"fileName":"SupplierWithException.java","content":"package com.runeprofile.utils;\n\n@FunctionalInterface\npublic interface SupplierWithException\u003cT, E extends Exception\u003e {\n    T get() throws E;\n}\n","filePath":"src/main/java/com/runeprofile/utils/SupplierWithException.java"},{"fileName":"Utils.java","content":"package com.runeprofile.utils;\n\nimport com.google.gson.Gson;\nimport com.google.gson.reflect.TypeToken;\nimport lombok.NonNull;\nimport lombok.experimental.UtilityClass;\nimport net.runelite.client.util.LinkBrowser;\nimport net.runelite.client.util.Text;\nimport okhttp3.*;\n\nimport java.io.IOException;\nimport java.io.Reader;\nimport java.util.concurrent.CompletableFuture;\nimport java.util.function.Function;\n\n@UtilityClass\npublic class Utils {\n    // Code from: DinkPlugin\n    // Repository: https://github.com/pajlads/DinkPlugin\n    // License: BSD 2-Clause License\n    public \u003cT\u003e CompletableFuture\u003cT\u003e readJson(@NonNull OkHttpClient httpClient, @NonNull Gson gson, @NonNull String url, @NonNull TypeToken\u003cT\u003e type) {\n        return readUrl(httpClient, url, reader -\u003e gson.fromJson(reader, type.getType()));\n    }\n\n    // Code from: DinkPlugin\n    // Repository: https://github.com/pajlads/DinkPlugin\n    // License: BSD 2-Clause License\n    public \u003cT\u003e CompletableFuture\u003cT\u003e readUrl(@NonNull OkHttpClient httpClient, @NonNull String url, @NonNull Function\u003cReader, T\u003e transformer) {\n        CompletableFuture\u003cT\u003e future \u003d new CompletableFuture\u003c\u003e();\n        Request request \u003d new Request.Builder().url(url).build();\n        httpClient.newCall(request).enqueue(new Callback() {\n            @Override\n            public void onFailure(@NonNull Call call, @NonNull IOException e) {\n                future.completeExceptionally(e);\n            }\n\n            @Override\n            public void onResponse(@NonNull Call call, @NonNull Response response) {\n                assert response.body() !\u003d null;\n                try (Reader reader \u003d response.body().charStream()) {\n                    future.complete(transformer.apply(reader));\n                } catch (Exception e) {\n                    future.completeExceptionally(e);\n                } finally {\n                    response.close();\n                }\n            }\n        });\n        return future;\n    }\n\n    // Code from: DinkPlugin\n    // Repository: https://github.com/pajlads/DinkPlugin\n    // License: BSD 2-Clause License\n    public String sanitize(String str) {\n        if (str \u003d\u003d null || str.isEmpty()) return \"\";\n        return Text.removeTags(str.replace(\"\u003cbr\u003e\", \"\\n\")).replace(\u0027\\u00A0\u0027, \u0027 \u0027).trim();\n    }\n\n    public void openProfileInBrowser(String username) {\n        String url \u003d \"https://www.runeprofile.com/\" + username.replace(\" \", \"%20\");\n        LinkBrowser.browse(url);\n    }\n\n    public String getApiErrorMessage(Throwable ex, String defaultMessage) {\n        String result \u003d defaultMessage;\n\n        if (ex instanceof RuneProfileApiException) {\n            result \u003d ex.getMessage();\n        } else if (ex.getCause() instanceof RuneProfileApiException) {\n            result \u003d ex.getCause().getMessage();\n        }\n\n        return result;\n    }\n}\n","filePath":"src/main/java/com/runeprofile/utils/Utils.java"},{"fileName":"Icon.java","content":"/*\n *\n *  * Copyright (c) 2021, Senmori\n *  * All rights reserved.\n *  *\n *  * Redistribution and use in source and binary forms, with or without\n *  * modification, are permitted provided that the following conditions are met:\n *  *\n *  * 1. Redistributions of source code must retain the above copyright notice, this\n *  *    list of conditions and the following disclaimer.\n *  * 2. Redistributions in binary form must reproduce the above copyright notice,\n *  *    this list of conditions and the following disclaimer in the documentation\n *  *    and/or other materials provided with the distribution.\n *  *\n *  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n *  * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n *  * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n *  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n *  * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n *  * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n *  * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n *  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n *  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n */\n\npackage com.runeprofile.utils;\n\nimport com.runeprofile.RuneProfilePlugin;\nimport net.runelite.client.util.ImageUtil;\n\nimport javax.swing.*;\nimport java.awt.image.BufferedImage;\n\npublic enum Icon {\n    LOGO(\"/logo.png\"),\n\n    WEB(\"/web.png\"),\n    DISCORD(\"/discord.png\"),\n    GITHUB(\"/github.png\");\n\n    private final String file;\n\n    Icon(String file) {\n        this.file \u003d file;\n    }\n\n    public BufferedImage getImage() {\n        return ImageUtil.loadImageResource(RuneProfilePlugin.class, file);\n    }\n\n    public ImageIcon getIcon(int width, int height) {\n        return new ImageIcon(ImageUtil.resizeImage(getImage(), width, height));\n    }\n}","filePath":"src/main/java/com/runeprofile/utils/Icon.java"},{"fileName":"PlayerState.java","content":"package com.runeprofile.utils;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.Player;\nimport net.runelite.client.config.RuneScapeProfileType;\n\n\n@Slf4j\npublic class PlayerState {\n    public static boolean isValidPlayerState(Client client) {\n        GameState gameState \u003d client.getGameState();\n        if (gameState !\u003d GameState.LOGGED_IN) {\n            log.debug(\"Invalid game state: {}\", gameState);\n            return false;\n        }\n\n        long accountHash \u003d client.getAccountHash();\n        if (accountHash \u003d\u003d -1) {\n            log.debug(\"Invalid account hash: {}\", accountHash);\n            return false;\n        }\n\n        Player player \u003d client.getLocalPlayer();\n        if (player \u003d\u003d null || player.getName() \u003d\u003d null) {\n            log.debug(\"Invalid player\");\n            return false;\n        }\n\n        // first layer of world type validation\n        RuneScapeProfileType profileType \u003d RuneScapeProfileType.getCurrent(client);\n        boolean isValidProfileType \u003d profileType.equals(RuneScapeProfileType.STANDARD);\n        if (!isValidProfileType) {\n            log.debug(\"Invalid profile type: {}\", profileType);\n            return false;\n        }\n\n        return true;\n    }\n}\n","filePath":"src/main/java/com/runeprofile/utils/PlayerState.java"},{"fileName":"RuneProfileApiException.java","content":"package com.runeprofile.utils;\n\nimport lombok.Getter;\n\n@Getter\npublic class RuneProfileApiException extends RuntimeException {\n    public RuneProfileApiException(String message) {\n        super(message);\n    }\n}","filePath":"src/main/java/com/runeprofile/utils/RuneProfileApiException.java"},{"fileName":"DevTools.java","content":"package com.runeprofile.utils;\n\nimport com.google.gson.Gson;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.game.SpriteManager;\nimport net.runelite.client.hiscore.HiscoreSkill;\n\nimport javax.imageio.ImageIO;\nimport javax.inject.Inject;\nimport java.awt.image.BufferedImage;\nimport java.io.ByteArrayOutputStream;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.util.Base64;\nimport java.util.HashMap;\nimport java.util.Map;\n\n@Slf4j\npublic class DevTools {\n    @Inject\n    private Client client;\n\n    @Inject\n    private ClientThread clientThread;\n\n    @Inject\n    private SpriteManager spriteManager;\n\n    @Inject\n    private ItemManager itemManager;\n\n    @Inject\n    private Gson gson;\n\n    // real -\u003e dummy\n    private final static Map\u003cInteger, Integer\u003e itemDummyMap \u003d new HashMap\u003cInteger, Integer\u003e() {{\n        put(29472, 12013); // Prospector helmet\n        put(29474, 12014); // Prospector jacket\n        put(29476, 12015); // Prospector legs\n        put(29478, 12016); // Prospector boots\n        put(10859, 25617); // Tea flask\n        put(10877, 25618); // Plain satchel\n        put(10878, 25619); // Green satchel\n        put(10879, 25620); // Red satchel\n        put(10880, 25621); // Black satchel\n        put(10881, 25622); // Gold satchel\n        put(10882, 25623); // Rune satchel\n        put(13273, 25624); // Unsired\n        put(12019, 25627); // Coal bag\n        put(12020, 25628); // Gem bag\n        put(24882, 25629); // Plank sack\n        put(12854, 25630); // Flamtaer bag\n        put(29990, 29992); // Alchemist\u0027s amulet\n        put(30803, 30805); // Dossier\n    }};\n\n    private final static Map\u003cInteger, Integer\u003e specialItemQuantityMap \u003d new HashMap\u003cInteger, Integer\u003e() {{\n        put(31235, 1); // Gryphon feather\n    }};\n\n    public void generateHiscoreIconsJson() {\n        clientThread.invokeLater(() -\u003e {\n            Map\u003cString, String\u003e icons \u003d new HashMap\u003c\u003e();\n            for (HiscoreSkill skill : HiscoreSkill.values()) {\n                String key \u003d skill.getName();\n                int spriteId \u003d skill.getSpriteId();\n                if (spriteId \u003d\u003d -1) {\n                    continue;\n                }\n\n                final BufferedImage sprite \u003d spriteManager.getSprite(spriteId, 0);\n                writeBase64Sprite(sprite, key, icons);\n            }\n\n            DEV_writeJsonFile(\"hiscore-icons.json\", icons);\n        });\n    }\n\n\n    public void generateClanRankIconsJson() {\n        clientThread.invokeLater(() -\u003e {\n            Map\u003cString, String\u003e icons \u003d new HashMap\u003c\u003e();\n\n            final EnumComposition clanIcons \u003d client.getEnum(EnumID.CLAN_RANK_GRAPHIC);\n\n            for (int i \u003d 0; i \u003c clanIcons.size(); i++) {\n                final int key \u003d clanIcons.getKeys()[i];\n                final BufferedImage sprite \u003d spriteManager.getSprite(clanIcons.getIntValue(key), 0);\n                writeBase64Sprite(sprite, Integer.toString(key), icons);\n            }\n\n            DEV_writeJsonFile(\"clan-rank-icons.json\", icons);\n        });\n    }\n\n    public void generateItemIconsJson() {\n        clientThread.invokeLater(() -\u003e {\n            Map\u003cString, String\u003e icons \u003d new HashMap\u003c\u003e();\n\n            int[] topLevelTabStructIds \u003d client.getEnum(2102).getIntVals();\n            for (int topLevelTabStructIndex : topLevelTabStructIds) {\n                final StructComposition topLevelTabStruct \u003d client.getStructComposition(topLevelTabStructIndex);\n                int[] subtabStructIndices \u003d client.getEnum(topLevelTabStruct.getIntValue(683)).getIntVals();\n                for (int subtabStructIndex : subtabStructIndices) {\n                    final StructComposition subtabStruct \u003d client.getStructComposition(subtabStructIndex);\n                    int[] clogItems \u003d client.getEnum(subtabStruct.getIntValue(690)).getIntVals();\n                    for (int clogItemId : clogItems) {\n                        final int itemid \u003d itemDummyMap.getOrDefault(clogItemId, clogItemId);\n                        final int quantity \u003d specialItemQuantityMap.getOrDefault(itemid, 10000);\n                        final BufferedImage sprite \u003d itemManager.getImage(itemid, quantity, false);\n                        writeBase64Sprite(sprite, Integer.toString(itemid), icons);\n                    }\n                }\n            }\n\n            DEV_writeJsonFile(\"item-icons.json\", icons);\n        });\n    }\n\n    private void writeBase64Sprite(BufferedImage sprite, String key, Map\u003cString, String\u003e icons) {\n        if (sprite \u003d\u003d null) {\n            log.debug(\"Failed to load icon for \u003d {}\", key);\n            return;\n        }\n\n        try (ByteArrayOutputStream baos \u003d new ByteArrayOutputStream()) {\n            synchronized (ImageIO.class) {\n                ImageIO.write(sprite, \"png\", baos);\n            }\n            byte[] imageBytes \u003d baos.toByteArray();\n            String base64Image \u003d Base64.getEncoder().encodeToString(imageBytes);\n            icons.put(key, base64Image);\n        } catch (IOException e) {\n            log.debug(\"Failed to encode icon for \u003d {}\", key);\n        }\n    }\n\n\n    private void DEV_writeJsonFile(String fileName, Object data) {\n        try (FileWriter writer \u003d new FileWriter(fileName)) {\n            gson.toJson(data, writer);\n            log.debug(\"Successfully wrote JSON to file \u003d {}\", fileName);\n        } catch (IOException e) {\n            log.debug(\"Failed to write JSON to file\");\n        }\n    }\n}\n","filePath":"src/main/java/com/runeprofile/utils/DevTools.java"},{"fileName":"AccountHash.java","content":"package com.runeprofile.utils;\n\nimport net.runelite.api.Client;\n\nimport java.nio.charset.StandardCharsets;\nimport java.security.MessageDigest;\nimport java.security.NoSuchAlgorithmException;\nimport java.util.Base64;\n\npublic class AccountHash {\n    public static String getHashed(Client client) {\n        long accountHashLong \u003d client.getAccountHash();\n\n        if (accountHashLong \u003d\u003d -1) {\n            return null;\n        }\n\n        String accountHashString \u003d String.valueOf(accountHashLong);\n\n        MessageDigest digest;\n\n        try {\n            digest \u003d MessageDigest.getInstance(\"SHA-1\");\n        } catch (NoSuchAlgorithmException e) {\n            throw new RuntimeException(e);\n        }\n\n        byte[] hash \u003d digest.digest(accountHashString.getBytes(StandardCharsets.UTF_8));\n\n        return Base64.getEncoder().encodeToString(hash);\n    }\n}\n","filePath":"src/main/java/com/runeprofile/utils/AccountHash.java"},{"fileName":"RuneProfilePanel.java","content":"package com.runeprofile;\n\nimport com.runeprofile.panels.InvalidPanel;\nimport com.runeprofile.panels.LayoutPluginPanel;\nimport com.runeprofile.panels.HeaderPanel;\nimport com.runeprofile.utils.Icon;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.client.config.RuneScapeProfileType;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.ui.PluginPanel;\n\nimport javax.inject.Inject;\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.image.BufferedImage;\n\n@Slf4j\npublic class RuneProfilePanel extends PluginPanel {\n    private final EventBus eventBus;\n    private final Client client;\n    private final ClientToolbar clientToolbar;\n    private final RuneProfileConfig config;\n    private final NavigationButton navigationButton;\n    private final InvalidPanel invalidPanel;\n    private final LayoutPluginPanel layoutPluginPanel;\n\n    @Inject\n    public RuneProfilePanel(EventBus eventBus, Client client, ClientToolbar clientToolbar, RuneProfileConfig config, HeaderPanel headerPanel, InvalidPanel invalidPanel, LayoutPluginPanel layoutPluginPanel) {\n        super(false);\n        setLayout(new BorderLayout());\n\n        this.eventBus \u003d eventBus;\n        this.client \u003d client;\n        this.clientToolbar \u003d clientToolbar;\n        this.config \u003d config;\n        this.invalidPanel \u003d invalidPanel;\n        this.layoutPluginPanel \u003d layoutPluginPanel;\n\n        add(headerPanel, BorderLayout.NORTH);\n        loadLoginState();\n\n        final BufferedImage toolbarIcon \u003d Icon.LOGO.getImage();\n        navigationButton \u003d NavigationButton.builder()\n                .tooltip(\"RuneProfile\")\n                .icon(toolbarIcon)\n                .panel(this)\n                .priority(4)\n                .build();\n    }\n\n    public void startUp() {\n        eventBus.register(this);\n\n        updateState(client.getGameState());\n\n        if (config.showSidePanel()) {\n            clientToolbar.addNavigation(navigationButton);\n        }\n    }\n\n    public void shutDown() {\n        eventBus.unregister(this);\n\n        clientToolbar.removeNavigation(navigationButton);\n    }\n\n    @Subscribe\n    public void onConfigChanged(ConfigChanged event) {\n        if (!event.getGroup().equals(RuneProfilePlugin.CONFIG_GROUP)) return;\n\n        if (config.showSidePanel()) {\n            clientToolbar.addNavigation(navigationButton);\n        } else {\n            clientToolbar.removeNavigation(navigationButton);\n        }\n    }\n\n    @Subscribe\n    public void onGameStateChanged(GameStateChanged event) {\n        updateState(event.getGameState());\n    }\n\n    private void updateState(GameState state) {\n        if (state \u003d\u003d GameState.LOGGED_IN) {\n            RuneScapeProfileType profileType \u003d RuneScapeProfileType.getCurrent(client);\n            if (profileType !\u003d RuneScapeProfileType.STANDARD) {\n                loadInvalidPlayerState();\n            } else {\n                loadValidState();\n            }\n        } else {\n            loadLoginState();\n        }\n    }\n\n    private void loadValidState() {\n        SwingUtilities.invokeLater(() -\u003e {\n            if (invalidPanel !\u003d null) {\n                remove(invalidPanel);\n            }\n\n            add(layoutPluginPanel, BorderLayout.CENTER);\n            revalidate();\n            repaint();\n        });\n    }\n\n    private void loadLoginState() {\n        SwingUtilities.invokeLater(() -\u003e {\n            if (layoutPluginPanel !\u003d null) {\n                remove(layoutPluginPanel);\n            }\n\n            invalidPanel.setHintText(\"Login to use this plugin.\");\n            add(invalidPanel, BorderLayout.CENTER);\n            revalidate();\n            repaint();\n        });\n    }\n\n    private void loadInvalidPlayerState() {\n        SwingUtilities.invokeLater(() -\u003e {\n            if (layoutPluginPanel !\u003d null) {\n                remove(layoutPluginPanel);\n            }\n\n            invalidPanel.setHintText(\"Invalid world/mode.\");\n            add(invalidPanel, BorderLayout.CENTER);\n            revalidate();\n            repaint();\n        });\n    }\n}\n","filePath":"src/main/java/com/runeprofile/RuneProfilePanel.java"},{"fileName":"AchievementDiaryTierData.java","content":"package com.runeprofile.data;\n\nimport lombok.Data;\n\n@Data\npublic class AchievementDiaryTierData {\n    private final int areaId;\n    private final int tierIndex;\n    private final int completedCount;\n}\n","filePath":"src/main/java/com/runeprofile/data/AchievementDiaryTierData.java"},{"fileName":"AddActivities.java","content":"package com.runeprofile.data;\n\nimport com.runeprofile.data.activities.ActivityData;\nimport com.runeprofile.data.activities.Activity;\nimport lombok.Data;\n\nimport java.util.List;\n\n@Data\npublic class AddActivities {\n    private final String id;\n    private final List\u003c? extends Activity\u003c? extends ActivityData\u003e\u003e activities;\n}\n","filePath":"src/main/java/com/runeprofile/data/AddActivities.java"},{"fileName":"Manifest.java","content":"package com.runeprofile.data;\n\nimport lombok.Data;\n\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\n@Data\npublic class Manifest {\n    final int version \u003d -1;\n    final Map\u003cString, List\u003cString\u003e\u003e pages \u003d new HashMap\u003c\u003e();\n}\n","filePath":"src/main/java/com/runeprofile/data/Manifest.java"},{"fileName":"PlayerClanData.java","content":"package com.runeprofile.data;\n\nimport lombok.Data;\n\n@Data\npublic class PlayerClanData {\n    private final String name;\n    private final int rank;\n    private final int icon;\n    private final String title;\n}\n","filePath":"src/main/java/com/runeprofile/data/PlayerClanData.java"},{"fileName":"CombatAchievementTier.java","content":"package com.runeprofile.data;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.api.Client;\nimport net.runelite.api.gameval.VarbitID;\n\n@Getter\n@RequiredArgsConstructor\npublic enum CombatAchievementTier {\n    EASY(1, VarbitID.CA_TOTAL_TASKS_COMPLETED_EASY),\n    MEDIUM(2, VarbitID.CA_TOTAL_TASKS_COMPLETED_MEDIUM),\n    HARD(3, VarbitID.CA_TOTAL_TASKS_COMPLETED_HARD),\n    ELITE(4, VarbitID.CA_TOTAL_TASKS_COMPLETED_ELITE),\n    MASTER(5, VarbitID.CA_TOTAL_TASKS_COMPLETED_MASTER),\n    GRANDMASTER(6, VarbitID.CA_TOTAL_TASKS_COMPLETED_GRANDMASTER);\n\n    private final int id;\n    private final int varbit;\n\n    public int getCompletedCount(Client client) {\n        // https://github.com/RuneStar/cs2-scripts/blob/master/scripts/%5Bproc%2Cca_tasks_completed_tier%5D.cs2\n        client.runScript(4784, id);\n        return client.getIntStack()[0];\n    }\n}\n","filePath":"src/main/java/com/runeprofile/data/CombatAchievementTier.java"},{"fileName":"PlayerData.java","content":"package com.runeprofile.data;\n\nimport lombok.Data;\n\nimport javax.annotation.Nullable;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\n@Data\npublic class PlayerData {\n    private String id;\n    private String username;\n    private Integer accountType;\n\n    @Nullable\n    private PlayerClanData clan;\n\n    @Nullable\n    private String groupName;\n\n    // skill name -\u003e xp\n    private Map\u003cString, Integer\u003e skills \u003d new HashMap\u003c\u003e();\n\n    // quest id -\u003e quest state\n    private Map\u003cInteger, Integer\u003e quests \u003d new HashMap\u003c\u003e();\n\n    // tier id -\u003e completed count\n    private Map\u003cInteger, Integer\u003e combatAchievementTiers \u003d new HashMap\u003c\u003e();\n\n    private List\u003cAchievementDiaryTierData\u003e achievementDiaryTiers \u003d new ArrayList\u003c\u003e();\n\n    // item id -\u003e quantity\n    private Map\u003cInteger, Integer\u003e items \u003d new HashMap\u003c\u003e();\n}\n","filePath":"src/main/java/com/runeprofile/data/PlayerData.java"},{"fileName":"DefaultClogPageData.java","content":"package com.runeprofile.data;\n\nimport lombok.Data;\n\n@Data\npublic class DefaultClogPageData {\n    // account id\n    private final String id;\n    // clog page name\n    private final String page;\n}\n","filePath":"src/main/java/com/runeprofile/data/DefaultClogPageData.java"},{"fileName":"PlayerModelData.java","content":"package com.runeprofile.data;\n\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\nimport javax.annotation.Nullable;\n\n@RequiredArgsConstructor\n@Getter\npublic class PlayerModelData {\n    private final String accountHash;\n    private final byte[] model;\n    @Nullable\n    private final byte[] petModel;\n}\n","filePath":"src/main/java/com/runeprofile/data/PlayerModelData.java"},{"fileName":"CollectionLogPage.java","content":"package com.runeprofile.data;\n\nimport lombok.Data;\n\nimport java.util.List;\n\n@Data\npublic class CollectionLogPage {\n    private final String name;\n    private final List\u003cCollectionLogItem\u003e items;\n}\n","filePath":"src/main/java/com/runeprofile/data/CollectionLogPage.java"},{"fileName":"AchievementDiary.java","content":"package com.runeprofile.data;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\n\n@Slf4j\n@Getter\n@RequiredArgsConstructor\npublic enum AchievementDiary {\n    KARAMJA(0),\n    ARDOUGNE(1),\n    FALADOR(2),\n    FREMENNIK(3),\n    KANDARIN(4),\n    DESERT(5),\n    LUMBRIDGE(6),\n    MORYTANIA(7),\n    VARROCK(8),\n    WILDERNESS(9),\n    WESTERN_PROVINCES(10),\n    KOUREND(11);\n\n    private final int id;\n\n    public int[] getTiersCompletedCount(Client client) {\n        // https://github.com/RuneStar/cs2-scripts/blob/master/scripts/%5Bproc%2Cdiary_completion_info%5D.cs2\n        client.runScript(2200, id);\n        int[] stack \u003d client.getIntStack();\n\n        int easy \u003d stack[0];\n        int medium \u003d stack[3];\n        int hard \u003d stack[6];\n        int elite \u003d stack[9];\n\n        return new int[]{easy, medium, hard, elite};\n    }\n}\n","filePath":"src/main/java/com/runeprofile/data/AchievementDiary.java"},{"fileName":"CollectionLogItem.java","content":"package com.runeprofile.data;\n\nimport lombok.Data;\n\n@Data\npublic class CollectionLogItem {\n    private final int id;\n    private final int quantity;\n}","filePath":"src/main/java/com/runeprofile/data/CollectionLogItem.java"},{"fileName":"ProfileSearchResult.java","content":"package com.runeprofile.data;\n\nimport lombok.Data;\n\n\n@Data\npublic class ProfileSearchResult {\n    private final String username;\n}\n","filePath":"src/main/java/com/runeprofile/data/ProfileSearchResult.java"},{"fileName":"ActivityData.java","content":"package com.runeprofile.data.activities;\n\npublic interface ActivityData {\n}\n","filePath":"src/main/java/com/runeprofile/data/activities/ActivityData.java"},{"fileName":"Activity.java","content":"package com.runeprofile.data.activities;\n\nimport lombok.Getter;\n\n@Getter\npublic abstract class Activity\u003cT extends ActivityData\u003e {\n    private final String type;\n    private final T data;\n\n    protected Activity(String type, T data) {\n        this.type \u003d type;\n        this.data \u003d data;\n    }\n}\n","filePath":"src/main/java/com/runeprofile/data/activities/Activity.java"},{"fileName":"ValuableDropActivity.java","content":"package com.runeprofile.data.activities;\n\nimport lombok.Getter;\n\n@Getter\npublic class ValuableDropActivity extends Activity\u003cValuableDropActivity.Data\u003e {\n    public ValuableDropActivity(ValuableDropActivity.Data data) {\n        super(\"valuable_drop\", data);\n    }\n\n    @lombok.Data\n    public static class Data implements ActivityData {\n        private final int itemId;\n        private final int value;\n    }\n}\n","filePath":"src/main/java/com/runeprofile/data/activities/ValuableDropActivity.java"},{"fileName":"CollectionLogWidgetSubscriber.java","content":"package com.runeprofile.autosync;\n\nimport com.runeprofile.RuneProfilePlugin;\nimport lombok.Setter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.MenuAction;\nimport net.runelite.api.events.*;\nimport net.runelite.api.gameval.VarbitID;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.util.concurrent.ScheduledExecutorService;\n\n@Slf4j\n@Singleton\npublic class CollectionLogWidgetSubscriber {\n    @Inject\n    private EventBus eventBus;\n\n    @Inject\n    private ScheduledExecutorService scheduledExecutorService;\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private PlayerDataService playerDataService;\n\n    @Inject\n    private RuneProfilePlugin plugin;\n\n    @Setter\n    private boolean isManualSync \u003d false;\n\n    private boolean isAutoClogRetrieval \u003d false;\n\n    private int tickCollectionLogScriptFired \u003d -1;\n\n    public void startUp() {\n        eventBus.register(this);\n    }\n\n    public void shutDown() {\n        eventBus.unregister(this);\n    }\n\n    public void reset() {\n        isAutoClogRetrieval \u003d false;\n        isManualSync \u003d false;\n        tickCollectionLogScriptFired \u003d -1;\n    }\n\n    @Subscribe\n    public void onGameStateChanged(GameStateChanged gameStateChanged) {\n        GameState gameState \u003d gameStateChanged.getGameState();\n        if (gameState !\u003d GameState.HOPPING \u0026\u0026 gameState !\u003d GameState.LOGGED_IN) {\n            reset();\n        }\n    }\n\n    // Code from: WikiSync\n    // Repository: https://github.com/weirdgloop/WikiSync\n    // License: BSD 2-Clause License\n    @Subscribe\n    public void onGameTick(GameTick gameTick) {\n        int tick \u003d client.getTickCount();\n        boolean hasClogScriptFired \u003d tickCollectionLogScriptFired !\u003d -1;\n        boolean hasBufferPassed \u003d tickCollectionLogScriptFired + 2 \u003c tick;\n        if (hasClogScriptFired \u0026\u0026 hasBufferPassed) {\n            tickCollectionLogScriptFired \u003d -1;\n            log.debug(\"Clog items script has fired, is manual sync: {}\", isManualSync);\n            if (isManualSync) {\n                scheduledExecutorService.execute(() -\u003e plugin.updateProfileAsync(false));\n                isManualSync \u003d false;\n            }\n            isAutoClogRetrieval \u003d false;\n        }\n    }\n\n    // Code from: WikiSync\n    // Repository: https://github.com/weirdgloop/WikiSync\n    // License: BSD 2-Clause License\n    @Subscribe\n    public void onScriptPreFired(ScriptPreFired preFired) {\n        if (preFired.getScriptId() \u003d\u003d 4100) {\n            // prevent reacting to scripts fired when opened from adventure log\n            // e.g. other plugins might fire the collection log script when viewing other players\u0027 collection logs\n            boolean isOpenedFromAdventureLog \u003d client.getVarbitValue(VarbitID.COLLECTION_POH_HOST_BOOK_OPEN) \u003d\u003d 1;\n            if (isOpenedFromAdventureLog) {\n                return;\n            }\n\n            tickCollectionLogScriptFired \u003d client.getTickCount();\n\n            Object[] args \u003d preFired.getScriptEvent().getArguments();\n            int itemId \u003d (int) args[1];\n            int quantity \u003d (int) args[2];\n\n            playerDataService.storeItem(itemId, quantity);\n        }\n    }\n\n    @Subscribe\n    public void onScriptPostFired(ScriptPostFired scriptPostFired) {\n        final int COLLECTION_LOG_SETUP \u003d 7797;\n        if (scriptPostFired.getScriptId() \u003d\u003d COLLECTION_LOG_SETUP) {\n            // disallow updating from the adventure log, to avoid players updating their profile\n            // while viewing other players collection logs using the POH adventure log.\n            boolean isOpenedFromAdventureLog \u003d client.getVarbitValue(VarbitID.COLLECTION_POH_HOST_BOOK_OPEN) \u003d\u003d 1;\n            if (isOpenedFromAdventureLog) {\n                playerDataService.clearItems();\n                return;\n            }\n\n            if (isAutoClogRetrieval) {\n                return;\n            }\n\n            isAutoClogRetrieval \u003d true;\n            client.menuAction(-1, 40697932, MenuAction.CC_OP, 1, -1, \"Search\", null);\n            client.runScript(2240);\n        }\n    }\n\n    // fail-safe to clear stored items if the collection log is opened from the adventure log\n    @Subscribe\n    public void onVarbitChanged(VarbitChanged varbitChanged) {\n        if (varbitChanged.getVarbitId() \u003d\u003d VarbitID.COLLECTION_POH_HOST_BOOK_OPEN) {\n            boolean isOpenedFromAdventureLog \u003d client.getVarbitValue(VarbitID.COLLECTION_POH_HOST_BOOK_OPEN) \u003d\u003d 1;\n            if (isOpenedFromAdventureLog) {\n                log.debug(\"Collection log opened from adventure log, clearing stored items to avoid incorrect updates.\");\n                playerDataService.clearItems();\n            }\n        }\n    }\n}\n","filePath":"src/main/java/com/runeprofile/autosync/CollectionLogWidgetSubscriber.java"},{"fileName":"ManifestService.java","content":"package com.runeprofile.autosync;\n\nimport com.runeprofile.RuneProfileApiClient;\nimport com.runeprofile.RuneProfileConfig;\nimport com.runeprofile.RuneProfilePlugin;\nimport com.runeprofile.data.Manifest;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\n\n\nimport javax.annotation.Nullable;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.concurrent.ScheduledFuture;\nimport java.util.concurrent.TimeUnit;\n\n@Slf4j\n@Singleton\npublic class ManifestService {\n    @Inject\n    private EventBus eventBus;\n\n    @Inject\n    private ScheduledExecutorService scheduledExecutorService;\n\n    @Inject\n    private RuneProfileConfig config;\n\n    @Inject\n    private RuneProfileApiClient apiClient;\n\n    private ScheduledFuture\u003c?\u003e manifestRefreshFuture;\n    private Manifest cachedManifest;\n\n    public void startUp() {\n        eventBus.register(this);\n        startManifestRefreshTask();\n    }\n\n    public void shutDown() {\n        eventBus.unregister(this);\n        stopManifestRefreshTask();\n    }\n\n    public void reset() {\n        stopManifestRefreshTask();\n        startManifestRefreshTask();\n    }\n\n    public boolean isEnabled() {\n        return config.commandSuggestionOverlay();\n    }\n\n    @Subscribe\n    public void onConfigChanged(ConfigChanged event) {\n        if (!event.getGroup().equals(RuneProfilePlugin.CONFIG_GROUP)) return;\n\n        if (isEnabled()) {\n            reset();\n        } else {\n            shutDown();\n        }\n    }\n\n    public void startManifestRefreshTask() {\n        manifestRefreshFuture \u003d scheduledExecutorService.scheduleAtFixedRate(\n                this::refreshManifest,\n                0,\n                60,\n                TimeUnit.MINUTES\n        );\n    }\n\n    public void stopManifestRefreshTask() {\n        if (manifestRefreshFuture !\u003d null) {\n            manifestRefreshFuture.cancel(true);\n            manifestRefreshFuture \u003d null;\n        }\n    }\n\n    public void refreshManifest() {\n        apiClient.getManifest().thenAccept(manifest -\u003e {\n            if (manifest !\u003d null) {\n                cachedManifest \u003d manifest;\n                log.debug(\"Manifest refreshed successfully\");\n            } else {\n                log.debug(\"Received null manifest from API\");\n            }\n        }).exceptionally(ex -\u003e {\n            log.debug(\"Failed to refresh manifest\", ex);\n            return null;\n        });\n    }\n\n    public @Nullable Manifest getManifest() {\n        return cachedManifest;\n    }\n}\n","filePath":"src/main/java/com/runeprofile/autosync/ManifestService.java"},{"fileName":"RsnChangeSubscriber.java","content":"package com.runeprofile.autosync;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Nameable;\nimport net.runelite.api.events.NameableNameChanged;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\nimport com.google.common.base.Strings;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\n\n@Slf4j\n@Singleton\npublic class RsnChangeSubscriber {\n    @Inject\n    private EventBus eventBus;\n\n    @Inject\n    private AutoSyncScheduler autoSyncScheduler;\n\n    public void startUp() {\n        eventBus.register(this);\n    }\n\n    public void shutDown() {\n        eventBus.unregister(this);\n    }\n\n    // Code from: WiseOldMan\n    // Repository: https://github.com/wise-old-man/wiseoldman-runelite-plugin\n    // License: BSD 2-Clause License\n    private boolean isValidNameChange(String prev, String curr) {\n        return !(Strings.isNullOrEmpty(prev)\n                || curr.equals(prev)\n                || prev.startsWith(\"[#\")\n                || curr.startsWith(\"[#\"));\n    }\n\n    @Subscribe\n    public void onNameableNameChanged(NameableNameChanged nameableNameChanged) {\n        final Nameable nameable \u003d nameableNameChanged.getNameable();\n\n        String name \u003d nameable.getName();\n        String prev \u003d nameable.getPrevName();\n\n        if (!isValidNameChange(prev, name)) {\n            log.debug(\"Ignoring invalid RSN change from \u0027{}\u0027 to \u0027{}\u0027\", prev, name);\n            return;\n        }\n\n        log.debug(\"Detected RSN change from \u0027{}\u0027 to \u0027{}\u0027, scheduling rapid sync\", prev, name);\n        autoSyncScheduler.startRapidSync();\n    }\n}\n","filePath":"src/main/java/com/runeprofile/autosync/RsnChangeSubscriber.java"},{"fileName":"CollectionNotificationSubscriber.java","content":"package com.runeprofile.autosync;\n\nimport com.google.common.collect.ImmutableSet;\nimport com.runeprofile.RuneProfileConfig;\nimport com.runeprofile.utils.ItemSearcher;\nimport com.runeprofile.utils.PlayerState;\nimport com.runeprofile.utils.Utils;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.ScriptPreFired;\nimport net.runelite.api.gameval.VarClientID;\nimport net.runelite.api.gameval.VarbitID;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.util.*;\nimport java.util.concurrent.atomic.AtomicBoolean;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\n@Slf4j\n@Singleton\npublic class CollectionNotificationSubscriber {\n    @Inject\n    private EventBus eventBus;\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private RuneProfileConfig config;\n\n    @Inject\n    private AutoSyncScheduler autoSyncScheduler;\n\n    @Inject\n    private PlayerDataService playerDataService;\n\n    @Inject\n    private ItemSearcher itemSearcher;\n\n    private static final Pattern NEW_ITEM_REGEX \u003d Pattern.compile(\"New item added to your collection log: (?\u003citemName\u003e(.*))\");\n    private static final int POPUP_PREFIX_LENGTH \u003d \"New item:\".length();\n\n    private final AtomicBoolean popupStarted \u003d new AtomicBoolean(false);\n\n    // Items that can\u0027t be synced via collection log notifications because of non-unique names\n    private final static Set\u003cString\u003e IGNORED_ITEMS \u003d ImmutableSet.of(\n            \"Chompy bird hat\",\n            \"Decorative sword\",\n            \"Decorative armour\",\n            \"Decorative helm\",\n            \"Decorative shield\",\n            \"Castlewars hood\",\n            \"Castlewars cloak\",\n            \"Rum\",\n            \"Ancient page\",\n            \"Graceful hood\",\n            \"Graceful cape\",\n            \"Graceful top\",\n            \"Graceful legs\",\n            \"Graceful gloves\",\n            \"Graceful boots\",\n            \"Mysterious page\",\n            \"Decorative boots\",\n            \"Decorative full helm\",\n            \"Medallion fragment\"\n    );\n\n    @SuppressWarnings(\"BooleanMethodIsAlwaysInverted\")\n    private boolean isEnabled() {\n        return config.autosyncProfile() \u0026\u0026 PlayerState.isValidPlayerState(client);\n    }\n\n    public void startUp() {\n        eventBus.register(this);\n    }\n\n    public void shutDown() {\n        eventBus.unregister(this);\n    }\n\n    public void reset() {\n        popupStarted.set(false);\n    }\n\n    @Subscribe\n    public void onGameStateChanged(GameStateChanged gameStateChanged) {\n        GameState gameState \u003d gameStateChanged.getGameState();\n        if (gameState !\u003d GameState.HOPPING \u0026\u0026 gameState !\u003d GameState.LOGGED_IN) {\n            reset();\n        }\n    }\n\n    // Code from: DinkPlugin\n    // Repository: https://github.com/pajlads/DinkPlugin\n    // License: BSD 2-Clause License\n    @Subscribe\n    public void onChatMessage(ChatMessage chatMessage) {\n        if (chatMessage.getType() !\u003d ChatMessageType.GAMEMESSAGE || client.getVarbitValue(VarbitID.OPTION_COLLECTION_NEW_ITEM) !\u003d 1 || !isEnabled()) {\n            return;\n        }\n\n        Matcher matcher \u003d NEW_ITEM_REGEX.matcher(chatMessage.getMessage());\n        if (matcher.find()) {\n            String itemName \u003d matcher.group(\"itemName\");\n            handleAutosync(itemName);\n            log.debug(\"Chat message found for new item: {}\", itemName);\n        }\n    }\n\n    // Code from: DinkPlugin\n    // Repository: https://github.com/pajlads/DinkPlugin\n    // License: BSD 2-Clause License\n    @Subscribe\n    public void onScriptPreFired(ScriptPreFired event) {\n        final int scriptId \u003d event.getScriptId();\n        if (scriptId \u003d\u003d ScriptID.NOTIFICATION_START) {\n            popupStarted.set(true);\n        } else if (scriptId \u003d\u003d ScriptID.NOTIFICATION_DELAY) {\n            String topText \u003d client.getVarcStrValue(VarClientID.NOTIFICATION_TITLE);\n            if (popupStarted.getAndSet(false) \u0026\u0026 \"Collection log\".equalsIgnoreCase(topText) \u0026\u0026 isEnabled()) {\n                String bottomText \u003d Utils.sanitize(client.getVarcStrValue(VarClientID.NOTIFICATION_MAIN));\n                String itemName \u003d bottomText.substring(POPUP_PREFIX_LENGTH).trim();\n                handleAutosync(itemName);\n                log.debug(\"Script fired for new item: {}\", itemName);\n            }\n        }\n    }\n\n    private void handleAutosync(String itemName) {\n        if (IGNORED_ITEMS.contains(itemName)) {\n            log.debug(\"Ignoring collection log item with non-unique name: {}\", itemName);\n            return;\n        }\n\n        Integer itemId \u003d itemSearcher.findItemId(itemName);\n        if (itemId \u003d\u003d null) {\n            log.debug(\"Failed to find item ID for: {}\", itemName);\n            return;\n        }\n        playerDataService.storeItem(itemId, 1);\n        autoSyncScheduler.startRapidSync();\n    }\n}\n","filePath":"src/main/java/com/runeprofile/autosync/CollectionNotificationSubscriber.java"},{"fileName":"AutoSyncScheduler.java","content":"package com.runeprofile.autosync;\n\nimport com.runeprofile.RuneProfileConfig;\nimport com.runeprofile.RuneProfilePlugin;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.GameState;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.concurrent.ScheduledFuture;\nimport java.util.concurrent.TimeUnit;\nimport java.util.concurrent.atomic.AtomicBoolean;\n\n@Slf4j\n@Singleton\npublic class AutoSyncScheduler {\n    @Inject\n    private EventBus eventBus;\n\n    @Inject\n    private ScheduledExecutorService scheduledExecutorService;\n\n    @Inject\n    private RuneProfilePlugin plugin;\n\n    @Inject\n    private RuneProfileConfig config;\n\n    // A reference to the pending auto-sync task\n    private ScheduledFuture\u003c?\u003e autoSyncFuture;\n\n    // Prevent multiple sync executions from overlapping\n    private final AtomicBoolean isSyncing \u003d new AtomicBoolean(false);\n\n    // Store remaining time when paused on logout (in milliseconds)\n    private static final TimeUnit PAUSE_TIME_UNIT \u003d TimeUnit.SECONDS;\n    private long remainingSyncPause \u003d 0;\n\n    private static final int RAPID_SYNC_SECONDS \u003d 3;\n    private static final int AUTO_SYNC_MINUTES \u003d 60;\n\n    public boolean isEnabled() {\n        return config.autosyncProfile();\n    }\n\n    public void startUp() {\n        log.debug(\"Auto sync scheduler starting up...\");\n        eventBus.register(this);\n        if (isEnabled()) {\n            resetAutoSyncTimer();\n        }\n    }\n\n    public void shutDown() {\n        log.debug(\"Auto sync scheduler shutting down...\");\n        eventBus.unregister(this);\n        cancelScheduledSync();\n    }\n\n    @Subscribe\n    public void onConfigChanged(ConfigChanged event) {\n        if (!event.getGroup().equals(RuneProfilePlugin.CONFIG_GROUP)) return;\n\n        if (isEnabled()) {\n            resetAutoSyncTimer();\n        } else {\n            cancelScheduledSync();\n        }\n    }\n\n    @Subscribe\n    public void onGameStateChanged(GameStateChanged event) {\n        if (!isEnabled()) return;\n\n        if (event.getGameState() !\u003d GameState.LOGGED_IN) {\n            if (autoSyncFuture !\u003d null) {\n                long remainingTime \u003d autoSyncFuture.getDelay(PAUSE_TIME_UNIT);\n                cancelScheduledSync();\n                remainingSyncPause \u003d remainingTime;\n                log.debug(\"Player logged out, pausing sync timer. {} {} remaining.\", remainingSyncPause, PAUSE_TIME_UNIT.toString().toLowerCase());\n            }\n        } else if (event.getGameState() \u003d\u003d GameState.LOGGED_IN) {\n            if (remainingSyncPause \u003e 0) {\n                log.debug(\"Resuming sync with {} {} remaining.\", remainingSyncPause, PAUSE_TIME_UNIT.toString().toLowerCase());\n                scheduleSyncWithDelay(remainingSyncPause, PAUSE_TIME_UNIT);\n            } else {\n                resetAutoSyncTimer();\n            }\n        }\n    }\n\n    /**\n     * Called when a rapid sync is requested.\n     * Cancels any existing scheduled sync and schedules a sync after 3 seconds.\n     */\n    public synchronized void startRapidSync() {\n        log.debug(\"Starting rapid sync...\");\n        cancelScheduledSync();\n        // Schedule a sync in 3 seconds, then resume normal cycle\n        autoSyncFuture \u003d scheduledExecutorService.schedule(() -\u003e {\n            performSync();\n            scheduleNextSync();\n        }, RAPID_SYNC_SECONDS, TimeUnit.SECONDS);\n    }\n\n    /**\n     * Resets the auto-sync cycle.\n     */\n    public synchronized void resetAutoSyncTimer() {\n        if (!isEnabled()) {\n            log.debug(\"Auto-sync is disabled; ignoring reset request.\");\n            return;\n        }\n\n        scheduleNextSync();\n    }\n\n    /**\n     * Schedules the next sync after the configured auto-sync interval.\n     */\n    private synchronized void scheduleNextSync() {\n        log.debug(\"Next sync scheduled in {} minutes\", AUTO_SYNC_MINUTES);\n        cancelScheduledSync();\n        autoSyncFuture \u003d scheduledExecutorService.schedule(() -\u003e {\n            performSync();\n            scheduleNextSync();\n        }, AutoSyncScheduler.AUTO_SYNC_MINUTES, TimeUnit.MINUTES);\n    }\n\n    /**\n     * Schedules a sync after a specific delay.\n     * Any existing future or pause state is cancelled.\n     *\n     * @param delay The amount of time to wait before syncing, in nanoseconds.\n     */\n    private synchronized void scheduleSyncWithDelay(long delay, TimeUnit unit) {\n        cancelScheduledSync();\n        autoSyncFuture \u003d scheduledExecutorService.schedule(() -\u003e {\n            performSync();\n            scheduleNextSync();\n        }, delay, unit);\n    }\n\n    /**\n     * Cancels any scheduled sync and clears the pause state.\n     */\n    private synchronized void cancelScheduledSync() {\n        if (autoSyncFuture !\u003d null) {\n            autoSyncFuture.cancel(false);\n            autoSyncFuture \u003d null;\n        }\n        remainingSyncPause \u003d 0;\n    }\n\n    /**\n     * Performs the actual sync, ensuring only one sync runs at a time.\n     */\n    private void performSync() {\n        if (!isSyncing.compareAndSet(false, true)) {\n            log.debug(\"Sync already in progress, skipping...\");\n            return;\n        }\n\n        log.debug(\"Syncing profile...\");\n        try {\n            plugin.updateProfileAsync(true);\n        } finally {\n            isSyncing.set(false);\n        }\n    }\n}","filePath":"src/main/java/com/runeprofile/autosync/AutoSyncScheduler.java"},{"fileName":"PlayerDataService.java","content":"package com.runeprofile.autosync;\n\nimport com.runeprofile.RuneProfileConfig;\nimport com.runeprofile.data.*;\nimport com.runeprofile.modelexporter.ModelExporter;\nimport com.runeprofile.utils.AccountHash;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.clan.*;\nimport net.runelite.api.gameval.VarbitID;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.RuneScapeProfileChanged;\n\nimport javax.annotation.Nullable;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.io.IOException;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.concurrent.CompletableFuture;\n\n@Slf4j\n@Singleton\npublic class PlayerDataService {\n    @Inject\n    private EventBus eventBus;\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private ClientThread clientThread;\n\n    @Inject\n    private RuneProfileConfig config;\n\n    // Clog items are not available through the client API, so we store them manually on clog open or item collection.\n    // See: CollectionLogWidgetSubscriber and CollectionNotificationSubscriber\n    private final Map\u003cInteger, Integer\u003e clogItems \u003d new HashMap\u003c\u003e();\n\n    public void startUp() {\n        eventBus.register(this);\n    }\n\n    public void shutDown() {\n        eventBus.unregister(this);\n    }\n\n    public void reset() {\n        clearItems();\n    }\n\n    @Subscribe\n    public void onRuneScapeProfileChanged(RuneScapeProfileChanged event) {\n        log.debug(\"RuneScape Profile changed to {}, resetting player data service\", event.getNewProfile());\n        reset();\n    }\n\n    public void storeItem(int itemId, int quantity) {\n        if (quantity \u003c\u003d 0) return;\n        clogItems.put(itemId, quantity);\n    }\n\n    public void clearItems() {\n        clogItems.clear();\n    }\n\n    public CompletableFuture\u003cString\u003e getAccountIdAsync() {\n        CompletableFuture\u003cString\u003e accountIdFuture \u003d new CompletableFuture\u003c\u003e();\n        clientThread.invokeLater(() -\u003e {\n            String accountId \u003d AccountHash.getHashed(client);\n            accountIdFuture.complete(accountId);\n        });\n        return accountIdFuture;\n    }\n\n    public CompletableFuture\u003cPlayerData\u003e getPlayerDataAsync() {\n        CompletableFuture\u003cPlayerData\u003e playerDataFuture \u003d new CompletableFuture\u003c\u003e();\n        clientThread.invokeLater(() -\u003e {\n            PlayerData playerData \u003d new PlayerData();\n\n            Player player \u003d client.getLocalPlayer();\n            String username \u003d player.getName();\n\n            // general\n            playerData.setId(AccountHash.getHashed(client));\n            playerData.setUsername(username);\n            playerData.setAccountType(client.getVarbitValue(VarbitID.IRONMAN));\n\n            // clan\n            playerData.setClan(getPlayerClanData(player));\n\n            // group\n            playerData.setGroupName(getPlayerGroupName());\n\n            // skills\n            for (Skill skill : Skill.values()) {\n                String name \u003d skill.getName();\n                int xp \u003d client.getSkillExperience(skill);\n                playerData.getSkills().put(name, xp);\n            }\n\n            // quests\n            for (Quest quest : Quest.values()) {\n                int id \u003d quest.getId();\n                QuestState stateEnum \u003d quest.getState(client);\n                int state \u003d 0;\n                if (stateEnum \u003d\u003d QuestState.IN_PROGRESS) {\n                    state \u003d 1;\n                } else if (stateEnum \u003d\u003d QuestState.FINISHED) {\n                    state \u003d 2;\n                }\n                playerData.getQuests().put(id, state);\n            }\n\n            // combat achievement tiers\n            for (CombatAchievementTier tier : CombatAchievementTier.values()) {\n                int id \u003d tier.getId();\n                int completedCount \u003d tier.getCompletedCount(client);\n                playerData.getCombatAchievementTiers().put(id, completedCount);\n            }\n\n            // achievement diary tiers\n            for (AchievementDiary diary : AchievementDiary.values()) {\n                int areaId \u003d diary.getId();\n                int[] completedCounts \u003d diary.getTiersCompletedCount(client);\n                for (int tierIndex \u003d 0; tierIndex \u003c completedCounts.length; tierIndex++) {\n                    int completedCount \u003d completedCounts[tierIndex];\n                    playerData.getAchievementDiaryTiers().add(new AchievementDiaryTierData(areaId, tierIndex, completedCount));\n                }\n            }\n\n            // items\n            playerData.setItems(clogItems);\n\n            log.debug(\"Player Data: {}\", playerData);\n            playerDataFuture.complete(playerData);\n        });\n        return playerDataFuture;\n    }\n\n    public @Nullable PlayerClanData getPlayerClanData(Player player) {\n        if (!config.includeClanData()) return new PlayerClanData(\"\", -1, -1, \"\");\n\n        ClanSettings clanSettings \u003d client.getClanSettings();\n        if (clanSettings \u003d\u003d null) return new PlayerClanData(\"\", -1, -1, \"\"); // not in a clan\n\n        ClanMember member \u003d clanSettings.findMember(player.getName());\n        if (member \u003d\u003d null) return null;\n\n        ClanRank rank \u003d member.getRank();\n        if (rank \u003d\u003d null) return null;\n\n        ClanTitle title \u003d clanSettings.titleForRank(rank);\n        if (title \u003d\u003d null) return null;\n\n        return new PlayerClanData(clanSettings.getName(), rank.getRank(), title.getId(), title.getName());\n    }\n\n    public @Nullable String getPlayerGroupName() {\n        ClanSettings clanSettings \u003d client.getClanSettings(ClanID.GROUP_IRONMAN);\n        if (clanSettings \u003d\u003d null) return null;\n        return clanSettings.getName();\n    }\n\n    public CompletableFuture\u003cPlayerModelData\u003e getPlayerModelDataAsync() {\n        CompletableFuture\u003cPlayerModelData\u003e dataFuture \u003d new CompletableFuture\u003c\u003e();\n        clientThread.invokeLater(() -\u003e {\n            String accountHash \u003d AccountHash.getHashed(client);\n\n            Player player \u003d client.getLocalPlayer();\n            Model model \u003d player.getModel();\n\n            byte[] modelBytes \u003d null;\n            try {\n                modelBytes \u003d ModelExporter.toBytes(client, model);\n            } catch (IOException e) {\n                dataFuture.completeExceptionally(e);\n                return;\n            }\n\n            NPC pet \u003d client.getFollower();\n            Model petModel \u003d pet !\u003d null ? pet.getModel() : null;\n\n            byte[] petModelBytes \u003d null;\n            if (petModel !\u003d null) {\n                try {\n                    petModelBytes \u003d ModelExporter.toBytes(client, petModel);\n                } catch (IOException e) {\n                    dataFuture.completeExceptionally(e);\n                    return;\n                }\n            }\n\n            dataFuture.complete(new PlayerModelData(accountHash, modelBytes, petModelBytes));\n        });\n        return dataFuture;\n    }\n}\n","filePath":"src/main/java/com/runeprofile/autosync/PlayerDataService.java"},{"fileName":"ValuableDropSubscriber.java","content":"package com.runeprofile.autosync;\n\nimport com.runeprofile.RuneProfileConfig;\nimport com.runeprofile.RuneProfilePlugin;\nimport com.runeprofile.data.activities.ValuableDropActivity;\nimport com.runeprofile.utils.ItemUtils;\nimport com.runeprofile.utils.PlayerState;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.game.ItemStack;\nimport net.runelite.client.plugins.loottracker.LootReceived;\nimport net.runelite.http.api.loottracker.LootRecordType;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.List;\nimport java.util.concurrent.ScheduledExecutorService;\n\n@Slf4j\n@Singleton\npublic class ValuableDropSubscriber {\n    @Inject\n    private EventBus eventBus;\n\n    @Inject\n    private ScheduledExecutorService scheduledExecutorService;\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private ItemManager itemManager;\n\n    @Inject\n    private RuneProfilePlugin plugin;\n\n    @Inject\n    private RuneProfileConfig config;\n\n    @SuppressWarnings(\"BooleanMethodIsAlwaysInverted\")\n    private boolean isEnabled() {\n        return config.autosyncProfile() \u0026\u0026 config.trackValuableDrops() \u0026\u0026 PlayerState.isValidPlayerState(client);\n    }\n\n    public void startUp() {\n        eventBus.register(this);\n    }\n\n    public void shutDown() {\n        eventBus.unregister(this);\n    }\n\n    @Subscribe\n    public void onLootReceived(LootReceived event) {\n        if (!isEnabled() || event.getType() \u003d\u003d LootRecordType.PLAYER) {\n            return;\n        }\n\n        handleItemsReceived(event.getItems());\n    }\n\n    private void handleItemsReceived(Collection\u003cItemStack\u003e items) {\n        List\u003cValuableDropActivity\u003e valuableDrops \u003d new ArrayList\u003c\u003e();\n\n        for (ItemStack itemStack : items) {\n            ItemComposition item \u003d itemManager.getItemComposition(itemStack.getId());\n            int itemId \u003d ItemUtils.getUnnotedItemId(item);\n            int value \u003d ItemUtils.getPerceivedItemValue(itemManager, itemId);\n\n            if (value \u003e\u003d ItemUtils.VALUABLE_DROP_THRESHOLD) {\n                for (int i \u003d 0; i \u003c itemStack.getQuantity(); i++) {\n                    log.debug(\"Valuable drop detected: {} (ID: {}, Value: {})\", item.getName(), itemId, value);\n                    // Add each item as a separate drop\n                    valuableDrops.add(new ValuableDropActivity(new ValuableDropActivity.Data(itemId, value)));\n                }\n            }\n        }\n\n        if (valuableDrops.isEmpty()) {\n            return;\n        }\n\n        scheduledExecutorService.execute(() -\u003e plugin.addActivitiesAsync(valuableDrops));\n    }\n}\n","filePath":"src/main/java/com/runeprofile/autosync/ValuableDropSubscriber.java"},{"fileName":"HeaderPanel.java","content":"package com.runeprofile.panels;\n\nimport com.runeprofile.utils.Icon;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.util.LinkBrowser;\nimport net.runelite.client.util.SwingUtil;\n\nimport javax.inject.Inject;\nimport javax.swing.*;\nimport javax.swing.border.EmptyBorder;\nimport javax.swing.plaf.basic.BasicButtonUI;\nimport java.awt.*;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\n\npublic class HeaderPanel extends JPanel {\n    private static final int iconSize \u003d 16;\n    private final JPanel buttonsContainer;\n\n    public HeaderPanel() {\n        setLayout(new BorderLayout());\n        setBorder(new EmptyBorder(10, 10, 10, 10));\n\n        JLabel title \u003d new JLabel(\"RuneProfile\");\n        title.setForeground(Color.WHITE);\n        title.setFont(FontManager.getRunescapeBoldFont());\n\n        buttonsContainer \u003d new JPanel();\n        buttonsContainer.setLayout(new GridLayout(1, 2, 4, 0));\n\n        addHeaderButton(Icon.DISCORD.getIcon(iconSize, iconSize), \"Join the Discord\", \"https://discord.com/invite/6XgBcePAfj\");\n        addHeaderButton(Icon.WEB.getIcon(iconSize, iconSize), \"Visit the website.\", \"https://runeprofile.com\");\n        addHeaderButton(Icon.GITHUB.getIcon(iconSize, iconSize), \"Report issues or contribute.\", \"https://github.com/ReinhardtR/runeprofile\");\n\n        add(title, BorderLayout.WEST);\n        add(buttonsContainer, BorderLayout.EAST);\n    }\n\n    private void addHeaderButton(ImageIcon icon, String tooltip, String url) {\n        JButton button \u003d new JButton();\n        SwingUtil.removeButtonDecorations(button);\n\n        button.setIcon(icon);\n        button.setToolTipText(tooltip);\n        button.addActionListener(e -\u003e LinkBrowser.browse(url));\n\n        button.setUI(new BasicButtonUI());\n        button.setBackground(ColorScheme.DARK_GRAY_COLOR);\n        button.addMouseListener(new MouseAdapter() {\n            @Override\n            public void mouseEntered(MouseEvent e) {\n                button.setBackground(ColorScheme.DARK_GRAY_HOVER_COLOR);\n            }\n\n            @Override\n            public void mouseExited(MouseEvent e) {\n                button.setBackground(ColorScheme.DARK_GRAY_COLOR);\n            }\n        });\n\n        buttonsContainer.add(button);\n    }\n}\n","filePath":"src/main/java/com/runeprofile/panels/HeaderPanel.java"},{"fileName":"MainButtonsPanel.java","content":"package com.runeprofile.panels;\n\nimport com.runeprofile.RuneProfilePlugin;\nimport com.runeprofile.utils.DevTools;\nimport com.runeprofile.utils.Utils;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\n\nimport javax.inject.Inject;\nimport javax.swing.*;\nimport java.awt.*;\n\n@Slf4j\npublic class MainButtonsPanel extends JPanel {\n    @Inject\n    public MainButtonsPanel(RuneProfilePlugin plugin, Client client, DevTools devTools) {\n        setLayout(new BorderLayout());\n        JPanel wrapper \u003d new JPanel(new GridLayout(0, 1, 0, 6));\n\n        // Update Model\n        JButton updateModelButton \u003d createButton(\"Update Player Model\");\n        updateModelButton.addActionListener((e) -\u003e plugin.updateModelAsync());\n        wrapper.add(updateModelButton);\n\n        // Open Profile\n        JButton openProfileButton \u003d createButton(\"Open Profile\");\n        openProfileButton.addActionListener(e -\u003e {\n            String username \u003d client.getLocalPlayer().getName();\n            if (username \u003d\u003d null) return;\n            Utils.openProfileInBrowser(username);\n        });\n        wrapper.add(openProfileButton);\n\n        // Delete Profile\n        JButton deleteProfileButton \u003d createButton(\"Delete Profile\");\n        deleteProfileButton.addActionListener(e -\u003e {\n            final int confirmed \u003d JOptionPane.showConfirmDialog(\n                    this,\n                    \"Are you sure you want to delete your profile? All activity history will be lost.\\nOBS: Your profile will be re-created on next autosync or manual update.\",\n                    \"Confirm Profile Deletion\",\n                    JOptionPane.YES_NO_OPTION\n            );\n            if (confirmed \u003d\u003d JOptionPane.YES_OPTION) {\n                plugin.deleteProfileAsync();\n            }\n        });\n        wrapper.add(deleteProfileButton);\n\n        if (plugin.isDeveloperMode()) {\n            // DEV ONLY - generate hiscores icons\n            JButton generateHiscoreIcons \u003d createButton(\"DEV: Hiscores Icons\");\n            generateHiscoreIcons.addActionListener(e -\u003e {\n                devTools.generateHiscoreIconsJson();\n            });\n            wrapper.add(generateHiscoreIcons);\n\n            // DEV ONLY - generate clan rank icons\n            JButton generateClanRankIcons \u003d createButton(\"DEV: Clan Rank Icons\");\n            generateClanRankIcons.addActionListener(e -\u003e {\n                devTools.generateClanRankIconsJson();\n            });\n            wrapper.add(generateClanRankIcons);\n\n            // DEV ONLY - generate item icons\n            JButton generateItemIcons \u003d createButton(\"DEV: Item Icons\");\n            generateItemIcons.addActionListener(e -\u003e {\n                devTools.generateItemIconsJson();\n            });\n            wrapper.add(generateItemIcons);\n        }\n\n        add(wrapper, BorderLayout.NORTH);\n    }\n\n    private JButton createButton(String text) {\n        JButton button \u003d new JButton(text);\n        button.setPreferredSize(new Dimension(button.getPreferredSize().width, 30));\n        return button;\n    }\n}\n\n","filePath":"src/main/java/com/runeprofile/panels/MainButtonsPanel.java"},{"fileName":"LayoutPluginPanel.java","content":"package com.runeprofile.panels;\n\nimport javax.inject.Inject;\nimport javax.swing.*;\nimport javax.swing.border.EmptyBorder;\nimport java.awt.*;\n\npublic class LayoutPluginPanel extends JPanel {\n    @Inject\n    public LayoutPluginPanel(MainButtonsPanel mainButtonsPanel, SearchPanel searchPanel) {\n        setLayout(new BorderLayout());\n\n        // Main content panel with vertical (flex-column-like) layout\n        JPanel contentPanel \u003d new JPanel();\n        contentPanel.setLayout(new BoxLayout(contentPanel, BoxLayout.Y_AXIS));\n        contentPanel.setBorder(new EmptyBorder(10, 10, 10, 10)); // padding around entire content\n\n        // Create and add components\n        mainButtonsPanel.setAlignmentX(Component.LEFT_ALIGNMENT);\n        contentPanel.add(mainButtonsPanel);\n        mainButtonsPanel.setMaximumSize(new Dimension(Short.MAX_VALUE, mainButtonsPanel.getPreferredSize().height)); // Limit vertical growth\n\n        contentPanel.add(Box.createVerticalStrut(32)); // spacing between components\n\n        searchPanel.setAlignmentX(Component.LEFT_ALIGNMENT);\n        contentPanel.add(searchPanel);\n        searchPanel.setMaximumSize(new Dimension(Short.MAX_VALUE, searchPanel.getPreferredSize().height)); // Limit initial vertical growth\n\n        contentPanel.add(Box.createVerticalGlue());\n\n        JScrollPane scrollPane \u003d new JScrollPane(contentPanel);\n        scrollPane.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED);\n        scrollPane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);\n\n        add(scrollPane, BorderLayout.CENTER);\n    }\n}","filePath":"src/main/java/com/runeprofile/panels/LayoutPluginPanel.java"},{"fileName":"SearchPanel.java","content":"package com.runeprofile.panels;\n\nimport com.runeprofile.RuneProfileApiClient;\nimport com.runeprofile.data.ProfileSearchResult;\nimport com.runeprofile.utils.RuneProfileApiException;\nimport com.runeprofile.utils.UsernameAutocompleter;\nimport com.runeprofile.utils.Utils;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.PluginPanel;\nimport net.runelite.client.ui.components.IconTextField;\nimport net.runelite.client.util.Text;\n\nimport javax.inject.Inject;\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.KeyAdapter;\nimport java.awt.event.KeyEvent;\nimport java.util.Arrays;\nimport java.util.List;\n\n@Slf4j\npublic class SearchPanel extends JPanel {\n    private final JPanel resultsPanel;\n    private final IconTextField searchField;\n\n    @Inject\n    public SearchPanel(RuneProfileApiClient runeProfileApiClient, UsernameAutocompleter usernameAutocompleter) {\n        setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));\n\n        JLabel title \u003d new JLabel(\"Search profiles\");\n        title.setAlignmentX(Component.LEFT_ALIGNMENT);\n        add(title);\n\n        searchField \u003d new IconTextField();\n        searchField.setIcon(IconTextField.Icon.SEARCH);\n        searchField.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n        searchField.setHoverBackgroundColor(ColorScheme.DARK_GRAY_HOVER_COLOR);\n        searchField.setPreferredSize(new Dimension(PluginPanel.PANEL_WIDTH - 20, 30));\n        searchField.setMinimumSize(new Dimension(0, 30));\n        searchField.setAlignmentX(Component.LEFT_ALIGNMENT);\n        searchField.setAlignmentY(Component.TOP_ALIGNMENT);\n\n        add(Box.createVerticalStrut(5));\n        add(searchField);\n        add(Box.createVerticalStrut(5));\n\n        resultsPanel \u003d new JPanel();\n        resultsPanel.setLayout(new BoxLayout(resultsPanel, BoxLayout.Y_AXIS));\n        resultsPanel.setAlignmentY(Component.TOP_ALIGNMENT);\n        resultsPanel.setAlignmentX(Component.LEFT_ALIGNMENT);\n\n        searchField.addKeyListener(usernameAutocompleter);\n        searchField.addKeyListener(new KeyAdapter() {\n            @Override\n            public void keyTyped(KeyEvent e) {\n                String query \u003d Text.sanitize(searchField.getText());\n                if (query.isEmpty()) resultsPanel.removeAll();\n            }\n        });\n        searchField.addClearListener(resultsPanel::removeAll);\n        searchField.addActionListener(\n                (e) -\u003e {\n                    String query \u003d Text.sanitize(searchField.getText());\n                    if (query.isEmpty()) resultsPanel.removeAll();\n\n                    if (!query.isEmpty()) {\n                        runeProfileApiClient.searchProfiles(query).whenComplete((results, ex) -\u003e {\n                            if (ex !\u003d null) {\n                                log.error(\"Error searching profiles: \", ex);\n\n                                if (ex instanceof RuneProfileApiException) {\n                                    updateErrors(\"Error: \" + ex.getMessage());\n                                } else {\n                                    updateErrors(\"An unexpected error occurred.\");\n                                }\n\n                                return;\n                            }\n                            updateResults(Arrays.asList(results));\n                        });\n                    }\n                }\n        );\n\n        add(resultsPanel);\n    }\n\n    private void updateErrors(String errorMessage) {\n        resultsPanel.removeAll();\n        JLabel errorLabel \u003d new JLabel(errorMessage);\n        errorLabel.setForeground(Color.RED);\n        resultsPanel.add(errorLabel);\n        resultsPanel.revalidate();\n        resultsPanel.repaint();\n    }\n\n    private void updateResults(List\u003cProfileSearchResult\u003e results) {\n        resultsPanel.removeAll();\n\n        if (results.isEmpty()) {\n            JLabel noResults \u003d new JLabel(\"No results found.\");\n            noResults.setForeground(Color.LIGHT_GRAY);\n            resultsPanel.add(noResults);\n        } else {\n            for (int i \u003d 0; i \u003c results.size(); i++) {\n                JButton resultButton \u003d getResultButton(results, i);\n                resultsPanel.add(resultButton);\n            }\n        }\n\n        resultsPanel.revalidate();\n        resultsPanel.repaint();\n    }\n\n    private JButton getResultButton(List\u003cProfileSearchResult\u003e results, int i) {\n        ProfileSearchResult result \u003d results.get(i);\n\n        JButton resultButton \u003d new JButton(result.getUsername());\n        int buttonHeight \u003d 30;\n        resultButton.setMaximumSize(new Dimension(Integer.MAX_VALUE, buttonHeight));\n        resultButton.setPreferredSize(new Dimension(resultsPanel.getWidth(), buttonHeight));\n        resultButton.setMinimumSize(new Dimension(0, buttonHeight));\n        resultButton.setAlignmentX(Component.LEFT_ALIGNMENT);\n        resultButton.setToolTipText(\"Open in browser\");\n\n        resultButton.addActionListener((e) -\u003e Utils.openProfileInBrowser(result.getUsername()));\n        return resultButton;\n    }\n}\n","filePath":"src/main/java/com/runeprofile/panels/SearchPanel.java"},{"fileName":"InvalidPanel.java","content":"package com.runeprofile.panels;\n\nimport net.runelite.client.ui.FontManager;\n\nimport javax.inject.Inject;\nimport javax.swing.*;\nimport javax.swing.border.EmptyBorder;\nimport java.awt.*;\n\npublic class InvalidPanel extends JPanel {\n    private final JLabel hintText \u003d new JLabel();\n\n    public InvalidPanel() {\n        setBorder(new EmptyBorder(50, 10, 0, 10));\n        setLayout(new BorderLayout());\n\n        JPanel wrapper \u003d new JPanel(new BorderLayout());\n\n        JLabel titleText \u003d new JLabel(\"RuneProfile\");\n        titleText.setFont(FontManager.getRunescapeFont());\n        titleText.setForeground(Color.WHITE);\n        titleText.setHorizontalAlignment(SwingConstants.CENTER);\n        wrapper.add(titleText, BorderLayout.NORTH);\n\n        hintText.setFont(FontManager.getRunescapeSmallFont());\n        hintText.setForeground(Color.GRAY);\n        hintText.setHorizontalAlignment(SwingConstants.CENTER);\n        wrapper.add(hintText, BorderLayout.CENTER);\n\n        add(wrapper, BorderLayout.NORTH);\n    }\n\n    public void setHintText(String text) {\n        SwingUtilities.invokeLater(() -\u003e hintText.setText(text));\n    }\n}\n","filePath":"src/main/java/com/runeprofile/panels/InvalidPanel.java"},{"fileName":"CollectionLogCommand.java","content":"package com.runeprofile.ui;\n\nimport com.runeprofile.RuneProfileApiClient;\nimport com.runeprofile.RuneProfileConfig;\nimport com.runeprofile.RuneProfilePlugin;\nimport com.runeprofile.data.CollectionLogItem;\nimport com.runeprofile.data.CollectionLogPage;\nimport com.runeprofile.utils.Utils;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.chat.ChatCommandManager;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.util.ImageUtil;\nimport net.runelite.client.util.Text;\n\nimport javax.inject.Inject;\nimport java.awt.image.BufferedImage;\nimport java.util.Arrays;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\nimport java.util.stream.Collectors;\n\n@Slf4j\npublic class CollectionLogCommand {\n    @Inject\n    private EventBus eventBus;\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private ClientThread clientThread;\n\n    @Inject\n    private ChatCommandManager chatCommandManager;\n\n    @Inject\n    private ItemManager itemManager;\n\n    @Inject\n    private RuneProfileConfig config;\n\n    @Inject\n    private RuneProfileApiClient runeProfileApiClient;\n\n    private final Map\u003cInteger, Integer\u003e loadedItemIcons \u003d new HashMap\u003c\u003e();\n    private final String COLLECTION_LOG_COMMAND \u003d \"!log\";\n    private final Pattern COLLECTION_LOG_COMMAND_PATTERN \u003d Pattern.compile(\"^(\" + COLLECTION_LOG_COMMAND + \")\\\\s+([a-zA-Z]+(?: [a-zA-Z]+)*)$\", Pattern.CASE_INSENSITIVE);\n\n    public void startUp() {\n        eventBus.register(this);\n\n        if (config.enableLogCommand()) {\n            chatCommandManager.registerCommand(COLLECTION_LOG_COMMAND, this::executeLogCommand);\n        }\n    }\n\n    public void shutDown() {\n        eventBus.unregister(this);\n\n        chatCommandManager.unregisterCommand(COLLECTION_LOG_COMMAND);\n    }\n\n    @Subscribe\n    public void onConfigChanged(ConfigChanged event) {\n        if (!event.getGroup().equals(RuneProfilePlugin.CONFIG_GROUP)) return;\n\n        if (config.enableLogCommand()) {\n            chatCommandManager.registerCommand(COLLECTION_LOG_COMMAND, this::executeLogCommand);\n        } else {\n            chatCommandManager.unregisterCommand(COLLECTION_LOG_COMMAND);\n        }\n    }\n\n    private void executeLogCommand(ChatMessage chatMessage, String message) {\n        log.debug(\"Executing log command: {}\", message);\n        Matcher commandMatcher \u003d COLLECTION_LOG_COMMAND_PATTERN.matcher(message);\n        if (!commandMatcher.matches()) {\n            log.debug(\"Invalid command format\");\n            return;\n        }\n\n        String pageName \u003d commandMatcher.group(2);\n        if (pageName \u003d\u003d null || pageName.isEmpty()) {\n            log.debug(\"Invalid page name\");\n            return;\n        }\n\n        String senderName \u003d chatMessage.getType().equals(ChatMessageType.PRIVATECHATOUT)\n                ? client.getLocalPlayer().getName()\n                : Text.sanitize(chatMessage.getName());\n\n        runeProfileApiClient.getCollectionLogPage(senderName, pageName).whenComplete((page, ex) -\u003e {\n            clientThread.invokeLater(() -\u003e {\n                if (ex !\u003d null) {\n                    final String errorMessage \u003d Utils.getApiErrorMessage(ex, \"Failed to load collection log page.\");\n                    updateChatMessage(chatMessage, errorMessage);\n                    return;\n                }\n\n                loadPageIcons(page);\n\n                List\u003cCollectionLogItem\u003e items \u003d page.getItems();\n                StringBuilder itemBuilder \u003d new StringBuilder();\n                for (CollectionLogItem item : items) {\n                    if (item.getQuantity() \u003c 1) continue;\n\n                    String itemString \u003d \"\u003cimg\u003d\" + loadedItemIcons.get(item.getId()) + \"\u003e\";\n\n                    if (config.enableExtendedItemNames()) {\n                        String itemName \u003d itemManager.getItemComposition(item.getId()).getName();\n                        itemString +\u003d \" \" + itemName + \" \";\n                    }\n\n                    if (item.getQuantity() \u003e 1) {\n                        itemString +\u003d \"x\" + item.getQuantity();\n                    }\n                    itemString +\u003d \"  \";\n                    itemBuilder.append(itemString);\n                }\n\n                int obtainedItemsCount \u003d (int) items.stream().filter(item -\u003e item.getQuantity() \u003e 0).count();\n                int totalItemsCount \u003d items.size();\n\n                final String replacementMessage \u003d page.getName() + \" \" + \"(\" + obtainedItemsCount + \"/\" + totalItemsCount + \")\" + \" : \" + itemBuilder;\n                updateChatMessage(chatMessage, replacementMessage);\n            });\n        });\n    }\n\n    private void loadPageIcons(CollectionLogPage page) {\n        List\u003cCollectionLogItem\u003e itemsToLoad \u003d page.getItems()\n                .stream()\n                .filter(item -\u003e !loadedItemIcons.containsKey(item.getId()))\n                .collect(Collectors.toList());\n\n        final IndexedSprite[] modIcons \u003d client.getModIcons();\n\n        final IndexedSprite[] newModIcons \u003d Arrays.copyOf(modIcons, modIcons.length + itemsToLoad.size());\n        int modIconIdx \u003d modIcons.length;\n\n        for (int i \u003d 0; i \u003c itemsToLoad.size(); i++) {\n            final CollectionLogItem item \u003d itemsToLoad.get(i);\n            final ItemComposition itemComposition \u003d itemManager.getItemComposition(item.getId());\n            final BufferedImage image \u003d ImageUtil.resizeImage(itemManager.getImage(itemComposition.getId()), 18, 16);\n            final IndexedSprite sprite \u003d ImageUtil.getImageIndexedSprite(image, client);\n            final int spriteIndex \u003d modIconIdx + i;\n\n            newModIcons[spriteIndex] \u003d sprite;\n            loadedItemIcons.put(item.getId(), spriteIndex);\n        }\n\n        client.setModIcons(newModIcons);\n    }\n\n    private void updateChatMessage(ChatMessage chatMessage, String message) {\n        chatMessage.getMessageNode().setRuneLiteFormatMessage(message);\n        client.runScript(ScriptID.BUILD_CHATBOX);\n    }\n}\n","filePath":"src/main/java/com/runeprofile/ui/CollectionLogCommand.java"},{"fileName":"CollectionLogPageMenuOption.java","content":"package com.runeprofile.ui;\n\nimport com.runeprofile.RuneProfileApiClient;\nimport com.runeprofile.data.DefaultClogPageData;\nimport com.runeprofile.utils.AccountHash;\nimport com.runeprofile.utils.Utils;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.MenuAction;\nimport net.runelite.api.events.MenuEntryAdded;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.concurrent.CompletableFuture;\n\n@Slf4j\n@Singleton\npublic class CollectionLogPageMenuOption {\n    @Inject\n    private EventBus eventBus;\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private ClientThread clientThread;\n\n    @Inject\n    private RuneProfileApiClient runeProfileApiClient;\n\n    private static final List\u003cInteger\u003e collectionLogPageIds \u003d Arrays.asList(40697867, 40697871, 40697888, 40697883, 40697890);\n\n    public void startUp() {\n        eventBus.register(this);\n    }\n\n    public void shutDown() {\n        eventBus.unregister(this);\n    }\n\n    @Subscribe\n    @SuppressWarnings(\"unused\")\n    public void onMenuEntryAdded(MenuEntryAdded event) {\n        boolean isCollectionLogPageList \u003d collectionLogPageIds.stream()\n                .anyMatch(id -\u003e id \u003d\u003d event.getActionParam1());\n\n        if (!isCollectionLogPageList) {\n            return;\n        }\n\n        String target \u003d event.getTarget();\n        if (target.isEmpty()) {\n            return;\n        }\n\n        String pageName \u003d Utils.sanitize(target);\n\n        client.getMenu().createMenuEntry(-2)\n                .setTarget(target)\n                .setOption(\"RuneProfile Default\")\n                .setType(MenuAction.RUNELITE)\n                .setIdentifier(event.getIdentifier())\n                .onClick(e -\u003e setDefaultPage(pageName));\n\n    }\n\n    private void setDefaultPage(String pageName) {\n        CompletableFuture\u003cDefaultClogPageData\u003e dataFuture \u003d new CompletableFuture\u003c\u003e();\n\n        clientThread.invokeLater(() -\u003e {\n            dataFuture.complete(\n                    new DefaultClogPageData(\n                            AccountHash.getHashed(client),\n                            pageName\n                    )\n            );\n        });\n\n        dataFuture.thenCompose(runeProfileApiClient::setDefaultClogPage).whenComplete((result, ex) -\u003e {\n            clientThread.invokeLater(() -\u003e {\n                String message \u003d ex !\u003d null\n                        ? Utils.getApiErrorMessage(ex, \"Failed to set default collection log page.\")\n                        : \"Default collection log page set to: \" + pageName;\n\n                client.addChatMessage(ChatMessageType.CONSOLE, \"RuneProfile\", message, \"RuneProfile\");\n            });\n        });\n    }\n}\n","filePath":"src/main/java/com/runeprofile/ui/CollectionLogPageMenuOption.java"},{"fileName":"ManualUpdateButtonManager.java","content":"package com.runeprofile.ui;\n\nimport com.google.inject.Inject;\nimport com.runeprofile.RuneProfileConfig;\nimport com.runeprofile.RuneProfilePlugin;\nimport com.runeprofile.autosync.CollectionLogWidgetSubscriber;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.ScriptPreFired;\nimport net.runelite.api.gameval.VarPlayerID;\nimport net.runelite.api.gameval.VarbitID;\nimport net.runelite.api.widgets.JavaScriptCallback;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.api.widgets.WidgetType;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\n\nimport java.util.*;\nimport java.util.concurrent.ScheduledExecutorService;\n\nimport static java.lang.Math.round;\n\n@Slf4j\npublic class ManualUpdateButtonManager {\n    private static final int DRAW_BURGER_MENU \u003d 7812;\n    private static final int FONT_COLOR \u003d 0xFF981F;\n    private static final int FONT_COLOR_ACTIVE \u003d 0xFFFFFF;\n    private static final String BUTTON_TEXT \u003d \"RuneProfile\";\n\n    private final Client client;\n    private final EventBus eventBus;\n    private final ScheduledExecutorService scheduledExecutorService;\n    private final RuneProfilePlugin plugin;\n    private final RuneProfileConfig config;\n    private final CollectionLogWidgetSubscriber collectionLogWidgetSubscriber;\n\n    private int baseMenuHeight \u003d -1;\n    private int lastAttemptedUpdate \u003d -1;\n\n    @Inject\n    private ManualUpdateButtonManager(\n            Client client,\n            EventBus eventBus,\n            ScheduledExecutorService scheduledExecutorService,\n            RuneProfilePlugin plugin,\n            RuneProfileConfig config,\n            CollectionLogWidgetSubscriber collectionLogWidgetSubscriber\n    ) {\n        this.client \u003d client;\n        this.eventBus \u003d eventBus;\n        this.scheduledExecutorService \u003d scheduledExecutorService;\n        this.plugin \u003d plugin;\n        this.config \u003d config;\n        this.collectionLogWidgetSubscriber \u003d collectionLogWidgetSubscriber;\n    }\n\n    public void startUp() {\n        eventBus.register(this);\n    }\n\n    public void shutDown() {\n        eventBus.unregister(this);\n    }\n\n    @Subscribe\n    public void onScriptPreFired(ScriptPreFired event) {\n        if (!config.showClogSyncButton() || event.getScriptId() !\u003d DRAW_BURGER_MENU) {\n            return;\n        }\n\n        Object[] args \u003d event.getScriptEvent().getArguments();\n        int menuId \u003d (int) args[3];\n\n        try {\n            log.debug(\"Adding RuneProfile button to menu with ID: {}\", menuId);\n            addButton(menuId, this::onButtonClick);\n        } catch (Exception e) {\n            log.debug(\"Failed to add RuneProfile button to menu: {}\", e.getMessage());\n        }\n    }\n\n    private void onButtonClick() {\n        if (lastAttemptedUpdate !\u003d -1 \u0026\u0026 lastAttemptedUpdate + 50 \u003e client.getTickCount()) {\n            client.addChatMessage(ChatMessageType.CONSOLE, \"RuneProfile\", \"Last update within 30 seconds. You can update again in \" + round((lastAttemptedUpdate + 50 - client.getTickCount()) * 0.6) + \" seconds.\", \"RuneProfile\");\n            return;\n        }\n        lastAttemptedUpdate \u003d client.getTickCount();\n\n        // if there is no items in the collection log, we can\u0027t offload the update to the collection log widget subscriber\n        // since the script 4100 is never fired.\n        int collectionCount \u003d client.getVarpValue(VarPlayerID.COLLECTION_COUNT);\n        if (collectionCount \u003d\u003d 0) {\n            scheduledExecutorService.execute(() -\u003e plugin.updateProfileAsync(false));\n        } else {\n            collectionLogWidgetSubscriber.setManualSync(true);\n            client.menuAction(-1, 40697932, MenuAction.CC_OP, 1, -1, \"Search\", null);\n            client.runScript(2240);\n\n            client.addChatMessage(ChatMessageType.CONSOLE, \"RuneProfile\", \"Updating your profile...\", \"RuneProfile\");\n        }\n    }\n\n    private void addButton(int menuId, Runnable onClick) throws NullPointerException, NoSuchElementException {\n        // disallow updating from the adventure log, to avoid players updating their profile\n        // while viewing other players collection logs using the POH adventure log.\n        boolean isOpenedFromAdventureLog \u003d client.getVarbitValue(VarbitID.COLLECTION_POH_HOST_BOOK_OPEN) \u003d\u003d 1;\n        if (isOpenedFromAdventureLog) return;\n\n        Widget menu \u003d Objects.requireNonNull(client.getWidget(menuId));\n        Widget[] menuChildren \u003d Objects.requireNonNull(menu.getChildren());\n\n        if (baseMenuHeight \u003d\u003d -1) {\n            baseMenuHeight \u003d menu.getOriginalHeight();\n        }\n\n        List\u003cWidget\u003e reversedMenuChildren \u003d new ArrayList\u003c\u003e(Arrays.asList(menuChildren));\n        Collections.reverse(reversedMenuChildren);\n        Widget lastRectangle \u003d reversedMenuChildren.stream()\n                .filter(w -\u003e w.getType() \u003d\u003d WidgetType.RECTANGLE)\n                .findFirst()\n                .orElseThrow(() -\u003e new NoSuchElementException(\"No RECTANGLE widget found in menu\"));\n        Widget lastText \u003d reversedMenuChildren.stream()\n                .filter(w -\u003e w.getType() \u003d\u003d WidgetType.TEXT)\n                .findFirst()\n                .orElseThrow(() -\u003e new NoSuchElementException(\"No TEXT widget found in menu\"));\n\n        final int buttonHeight \u003d lastRectangle.getHeight();\n        final int buttonY \u003d lastRectangle.getOriginalY() + buttonHeight;\n\n        final boolean existingButton \u003d Arrays.stream(menuChildren)\n                .anyMatch(w -\u003e w.getText().equals(BUTTON_TEXT));\n\n        if (!existingButton) {\n            final Widget background \u003d menu.createChild(WidgetType.RECTANGLE)\n                    .setOriginalWidth(lastRectangle.getOriginalWidth())\n                    .setOriginalHeight(lastRectangle.getOriginalHeight())\n                    .setOriginalX(lastRectangle.getOriginalX())\n                    .setOriginalY(buttonY)\n                    .setOpacity(lastRectangle.getOpacity())\n                    .setFilled(lastRectangle.isFilled());\n            background.revalidate();\n\n            final Widget text \u003d menu.createChild(WidgetType.TEXT)\n                    .setText(BUTTON_TEXT)\n                    .setTextColor(FONT_COLOR)\n                    .setFontId(lastText.getFontId())\n                    .setTextShadowed(lastText.getTextShadowed())\n                    .setOriginalWidth(lastText.getOriginalWidth())\n                    .setOriginalHeight(lastText.getOriginalHeight())\n                    .setOriginalX(lastText.getOriginalX())\n                    .setOriginalY(buttonY)\n                    .setXTextAlignment(lastText.getXTextAlignment())\n                    .setYTextAlignment(lastText.getYTextAlignment());\n            text.setHasListener(true);\n            text.setOnMouseOverListener((JavaScriptCallback) ev -\u003e text.setTextColor(FONT_COLOR_ACTIVE));\n            text.setOnMouseLeaveListener((JavaScriptCallback) ev -\u003e text.setTextColor(FONT_COLOR));\n            text.setAction(0, \"Update your RuneProfile\");\n            text.setOnOpListener((JavaScriptCallback) ev -\u003e onClick.run());\n            text.revalidate();\n        }\n\n        if (menu.getOriginalHeight() \u003c\u003d baseMenuHeight) {\n            menu.setOriginalHeight((menu.getOriginalHeight() + buttonHeight));\n        }\n\n        menu.revalidate();\n        for (Widget child : menuChildren) {\n            child.revalidate();\n        }\n    }\n}","filePath":"src/main/java/com/runeprofile/ui/ManualUpdateButtonManager.java"},{"fileName":"PlayerMenuOption.java","content":"package com.runeprofile.ui;\n\nimport com.runeprofile.RuneProfileConfig;\nimport com.runeprofile.RuneProfilePlugin;\nimport com.runeprofile.utils.Utils;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.IndexedObjectSet;\nimport net.runelite.api.MenuAction;\nimport net.runelite.api.Player;\nimport net.runelite.api.events.MenuOptionClicked;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.menus.MenuManager;\n\nimport javax.inject.Inject;\n\n@Slf4j\npublic class PlayerMenuOption {\n    @Inject\n    private EventBus eventBus;\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private MenuManager menuManager;\n\n    @Inject\n    private RuneProfileConfig config;\n\n    private static final String LOOKUP_OPTION \u003d \"RuneProfile\";\n\n    public void startUp() {\n        eventBus.register(this);\n        if (isEnabled()) {\n            menuManager.addPlayerMenuItem(LOOKUP_OPTION);\n        }\n    }\n\n    public void shutDown() {\n        eventBus.unregister(this);\n        menuManager.removePlayerMenuItem(LOOKUP_OPTION);\n    }\n\n    public boolean isEnabled() {\n        return config.showPlayerLookupOption();\n    }\n\n    @Subscribe\n    public void onConfigChanged(ConfigChanged event) {\n        if (!event.getGroup().equals(RuneProfilePlugin.CONFIG_GROUP)) return;\n\n        if (isEnabled()) {\n            menuManager.addPlayerMenuItem(LOOKUP_OPTION);\n        } else {\n            menuManager.removePlayerMenuItem(LOOKUP_OPTION);\n        }\n    }\n\n    @Subscribe\n    public void onMenuOptionClicked(MenuOptionClicked event) {\n        if (event.getMenuAction() \u003d\u003d MenuAction.RUNELITE_PLAYER \u0026\u0026 event.getMenuOption().equals(LOOKUP_OPTION)) {\n            IndexedObjectSet\u003c? extends Player\u003e players \u003d client.getTopLevelWorldView().players();\n            Player player \u003d players.byIndex(event.getId());\n\n            if (player \u003d\u003d null) {\n                return;\n            }\n            String target \u003d player.getName();\n\n            if (target \u003d\u003d null || target.isEmpty()) {\n                return;\n            }\n            Utils.openProfileInBrowser(target);\n        }\n    }\n}\n","filePath":"src/main/java/com/runeprofile/ui/PlayerMenuOption.java"},{"fileName":"CommandSuggestionOverlay.java","content":"package com.runeprofile.ui;\n\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Map;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\n\nimport com.runeprofile.RuneProfileConfig;\n\nimport com.runeprofile.autosync.ManifestService;\nimport com.runeprofile.data.Manifest;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.gameval.VarClientID;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.components.LineComponent;\n\n/**\n * OverlayPanel that suggests commands and possible aliases as the user types a command into the chat.\n */\n@Slf4j\n@Singleton\npublic class CommandSuggestionOverlay extends OverlayPanel {\n    private static final int MAX_SUGGESTIONS \u003d 5;\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private OverlayManager overlayManager;\n\n    @Inject\n    private RuneProfileConfig config;\n\n    @Inject\n    private ManifestService manifestService;\n\n    @Inject\n    public CommandSuggestionOverlay() {\n        this.setLayer(OverlayLayer.ABOVE_SCENE);\n        this.setResizable(false);\n    }\n\n    public void startUp() {\n        this.overlayManager.add(this);\n    }\n\n    public void shutDown() {\n        this.overlayManager.remove(this);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        if (!this.config.commandSuggestionOverlay()) {\n            return null;\n        }\n\n        if (this.client.isMenuOpen()) {\n            return null;\n        }\n\n        String currentChatInput \u003d this.client.getVarcStrValue(VarClientID.CHATINPUT);\n\n        List\u003cString\u003e suggestions \u003d this.getSuggestions(currentChatInput);\n        if (suggestions.isEmpty()) {\n            return null;\n        }\n\n        String searchTermForHighlight \u003d this.getSearchTermForHighlight(currentChatInput);\n\n        // Reading the panel gets awkward when the text for a suggestion wraps to a new line\n        // So we update the panel width to fit the longest suggestion\n        this.updatePanelWidth(graphics, suggestions);\n\n        for (int i \u003d suggestions.size() - 1; i \u003e\u003d 0; i--) { // Reverse order to have the nearest suggestions on the bottom\n            this.addSuggestionToOverlay(suggestions.get(i), searchTermForHighlight);\n        }\n\n        return super.render(graphics);\n    }\n\n    // Returns a list of suggestions based on the current chat input\n    private List\u003cString\u003e getSuggestions(String input) {\n        if (input \u003d\u003d null || input.trim().isEmpty()) {\n            return new ArrayList\u003c\u003e();\n        }\n\n        if (!this.config.enableLogCommand()) {\n            return new ArrayList\u003c\u003e(); // No suggestions if !log command is disabled\n        }\n\n        String lowerInput \u003d input.toLowerCase().trim();\n        String command \u003d \"!log\";\n\n        // Only show suggestions after \"!log \" is typed\n        if (lowerInput.startsWith(command.toLowerCase() + \" \")) {\n            // Show page name/alias suggestions\n            return this.getPageSuggestions(input.substring(command.length()).trim());\n        }\n\n        return new ArrayList\u003c\u003e();\n    }\n\n    // Get page name and alias suggestions from manifest\n    private List\u003cString\u003e getPageSuggestions(String searchTerm) {\n        String lowerSearch \u003d searchTerm.toLowerCase();\n\n        Manifest manifest \u003d manifestService.getManifest();\n        if (manifest \u003d\u003d null || manifest.getPages() \u003d\u003d null) {\n            return new ArrayList\u003c\u003e();\n        }\n\n        List\u003cString\u003e matchingPages \u003d new ArrayList\u003c\u003e();\n\n        // Search through all page names and their aliases\n        for (Map.Entry\u003cString, List\u003cString\u003e\u003e entry : manifest.getPages().entrySet()) {\n            String pageName \u003d entry.getKey();\n            List\u003cString\u003e aliases \u003d entry.getValue();\n\n            // Check page name\n            if (pageName.toLowerCase().contains(lowerSearch)) {\n                matchingPages.add(pageName);\n            }\n\n            // Check aliases\n            if (aliases !\u003d null) {\n                for (String alias : aliases) {\n                    if (alias.toLowerCase().contains(lowerSearch) \u0026\u0026 !matchingPages.contains(alias)) {\n                        matchingPages.add(alias);\n                    }\n                }\n            }\n        }\n\n        this.sortByRelevance(matchingPages, lowerSearch);\n\n        int limit \u003d Math.min(matchingPages.size(), MAX_SUGGESTIONS);\n        return matchingPages.subList(0, limit);\n    }\n\n    private String getSearchTermForHighlight(String input) {\n        if (input \u003d\u003d null || input.trim().isEmpty()) {\n            return \"\";\n        }\n\n        String lowerInput \u003d input.toLowerCase().trim();\n        String command \u003d \"!log\";\n\n        if (lowerInput.startsWith(command.toLowerCase() + \" \")) {\n            return input.substring(command.length()).trim();\n        }\n\n        return input.trim();\n    }\n\n    private void updatePanelWidth(Graphics2D graphics, List\u003cString\u003e suggestions) {\n        int maxWidth \u003d 0;\n        for (String suggestion : suggestions) {\n            int width \u003d graphics.getFontMetrics().stringWidth(suggestion);\n            if (width \u003e maxWidth) {\n                maxWidth \u003d width;\n            }\n        }\n        int panelWidth \u003d maxWidth + 20;\n        this.setPreferredSize(new Dimension(panelWidth, 0));\n    }\n\n    private void addSuggestionToOverlay(String command, String searchTerm) {\n        String highlightedText \u003d this.createHighlightedText(command, searchTerm);\n        LineComponent lineComponent \u003d LineComponent.builder().left(highlightedText).build();\n\n        this.panelComponent.getChildren().add(lineComponent);\n    }\n\n    private String createHighlightedText(String text, String searchTerm) {\n        if (searchTerm.isEmpty()) {\n            return text;\n        }\n\n        String lowerText \u003d text.toLowerCase();\n        String lowerSearch \u003d searchTerm.toLowerCase();\n        int index \u003d lowerText.indexOf(lowerSearch);\n\n        if (index \u003d\u003d -1) {\n            return text;\n        }\n\n        StringBuilder result \u003d new StringBuilder();\n        result.append(text.substring(0, index));\n        result.append(\"\u003ccol\u003d00ff00\u003e\");  // Green highlight\n        result.append(text.substring(index, index + searchTerm.length()));\n        result.append(\"\u003ccol\u003dffffff\u003e\");  // Reset to white\n        result.append(text.substring(index + searchTerm.length()));\n\n        return result.toString();\n    }\n\n    // Sorts with exact matches first, then prefix matches, then by position and length\n    private void sortByRelevance(List\u003cString\u003e items, String searchTerm) {\n        items.sort((a, b) -\u003e {\n            String termA \u003d a.toLowerCase();\n            String termB \u003d b.toLowerCase();\n\n            boolean exactA \u003d termA.equals(searchTerm);\n            boolean exactB \u003d termB.equals(searchTerm);\n            if (exactA !\u003d exactB) {\n                return exactA ? -1 : 1;\n            }\n\n            boolean prefixA \u003d termA.startsWith(searchTerm);\n            boolean prefixB \u003d termB.startsWith(searchTerm);\n            if (prefixA !\u003d prefixB) {\n                return prefixA ? -1 : 1;\n            }\n\n            int posA \u003d termA.indexOf(searchTerm);\n            int posB \u003d termB.indexOf(searchTerm);\n            if (posA !\u003d posB) {\n                return Integer.compare(posA, posB);\n            }\n\n            return Integer.compare(termA.length(), termB.length());\n        });\n    }\n}","filePath":"src/main/java/com/runeprofile/ui/CommandSuggestionOverlay.java"},{"fileName":"ChatPlayerMenuOption.java","content":"package com.runeprofile.ui;\n\nimport com.google.common.collect.ImmutableList;\nimport com.runeprofile.RuneProfileConfig;\nimport com.runeprofile.utils.Utils;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.MenuAction;\nimport net.runelite.api.events.MenuEntryAdded;\nimport net.runelite.api.gameval.InterfaceID;\nimport net.runelite.api.widgets.WidgetUtil;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.util.Text;\n\nimport javax.inject.Inject;\n\n@Slf4j\npublic class ChatPlayerMenuOption {\n    @Inject\n    private EventBus eventBus;\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private RuneProfileConfig config;\n\n    // menu option\n    private static final String KICK_OPTION \u003d \"Kick\";\n    private static final ImmutableList\u003cString\u003e AFTER_OPTIONS \u003d ImmutableList.of(\"Message\", \"Add ignore\", \"Remove friend\", \"Delete\", KICK_OPTION);\n\n    public void startUp() {\n        eventBus.register(this);\n    }\n\n    public void shutDown() {\n        eventBus.unregister(this);\n    }\n\n    @Subscribe\n    public void onMenuEntryAdded(MenuEntryAdded event) {\n        if (!config.showMenuLookupOption()) return;\n\n        int groupId \u003d WidgetUtil.componentToInterface(event.getActionParam1());\n        String option \u003d event.getOption();\n\n        if (!AFTER_OPTIONS.contains(option)\n                // prevent duplicate menu options in friends list\n                || (option.equals(\"Delete\") \u0026\u0026 groupId !\u003d InterfaceID.IGNORE)) {\n            return;\n        }\n\n        boolean addMenuLookup \u003d (groupId \u003d\u003d InterfaceID.FRIENDS\n                || groupId \u003d\u003d InterfaceID.CHATCHANNEL_CURRENT\n                || groupId \u003d\u003d InterfaceID.CLANS_SIDEPANEL\n                || groupId \u003d\u003d InterfaceID.CLANS_GUEST_SIDEPANEL\n                // prevent from adding for Kick option (interferes with the raiding party one)\n                || groupId \u003d\u003d InterfaceID.CHATBOX \u0026\u0026 !KICK_OPTION.equals(option)\n                || groupId \u003d\u003d InterfaceID.RAIDS_SIDEPANEL\n                || groupId \u003d\u003d InterfaceID.PM_CHAT\n                || groupId \u003d\u003d InterfaceID.IGNORE);\n\n        if (addMenuLookup) {\n            String username \u003d Text.toJagexName(Text.removeTags(event.getTarget()));\n\n            client.getMenu().createMenuEntry(-2)\n                    .setTarget(event.getTarget())\n                    .setOption(\"RuneProfile\")\n                    .setType(MenuAction.RUNELITE)\n                    .setIdentifier(event.getIdentifier())\n                    .onClick(e -\u003e Utils.openProfileInBrowser(username));\n        }\n    }\n}\n","filePath":"src/main/java/com/runeprofile/ui/ChatPlayerMenuOption.java"},{"fileName":"RuneProfileConfig.java","content":"package com.runeprofile;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\n\n@ConfigGroup(RuneProfilePlugin.CONFIG_GROUP)\npublic interface RuneProfileConfig extends Config {\n    @ConfigSection(\n            name \u003d \"Profile\",\n            description \u003d \"Settings for your RuneProfile\",\n            position \u003d 1\n    )\n    String profileSection \u003d \"profileSection\";\n\n    @ConfigItem(\n            keyName \u003d \"update_on_logout\", // config option was previously used only for update on logout\n            name \u003d \"Auto-sync Profile\",\n            description \u003d \"Automatically updates your RuneProfile for you.\",\n            position \u003d 1,\n            section \u003d profileSection\n    )\n    default boolean autosyncProfile() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"track_valuable_drops\",\n            name \u003d \"Track Valuable Drops\",\n            description \u003d \"Adds valuable drops to your RuneProfile activities. (Requires auto-sync to be enabled)\",\n            position \u003d 2,\n            section \u003d profileSection\n    )\n    default boolean trackValuableDrops() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"include_clan_data\",\n            name \u003d \"Include Clan in Profile\",\n            description \u003d \"Include your clan on your RuneProfile.\",\n            position \u003d 3,\n            section \u003d profileSection\n    )\n    default boolean includeClanData() {\n        return true;\n    }\n\n    @ConfigSection(\n            name \u003d \"Commands\",\n            description \u003d \"Settings for chat commands\",\n            position \u003d 2\n    )\n    String commandsSection \u003d \"commandsSection\";\n\n    @ConfigItem(\n            keyName \u003d \"log_command\",\n            name \u003d \"Enable !log command\",\n            description \u003d \"Enables the !log command in the game chat.\",\n            position \u003d 1,\n            section \u003d commandsSection\n    )\n    default boolean enableLogCommand() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"command_suggestion_overlay\",\n            name \u003d \"Command Suggestion Overlay\",\n            description \u003d \"Displays a list of potential commands in an overlay while you\u0027re typing a chat message.\",\n            position \u003d 2,\n            section \u003d commandsSection\n    )\n    default boolean commandSuggestionOverlay() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"enableExtendedItemNames\",\n            name \u003d \"Show item names for !log\",\n            description \u003d \"Show item names next to their icons in the collection log command.\",\n            position \u003d 3,\n            section \u003d commandsSection\n    )\n    default boolean enableExtendedItemNames() {\n        return false;\n    }\n\n    @ConfigSection(\n            name \u003d \"Menu Options\",\n            description \u003d \"Settings for menu options\",\n            position \u003d 3\n    )\n    String menuOptionsSection \u003d \"menuOptionsSection\";\n\n    @ConfigItem(\n            keyName \u003d \"menu_lookup_option\",\n            name \u003d \"Chat menu option\",\n            description \u003d \"Add RuneProfile option to chat menus\",\n            position \u003d 1,\n            section \u003d menuOptionsSection\n    )\n    default boolean showMenuLookupOption() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"player_menu_lookup_option\",\n            name \u003d \"Player menu option\",\n            description \u003d \"Add RuneProfile option to player menu\",\n            position \u003d 2,\n            section \u003d menuOptionsSection\n    )\n    default boolean showPlayerLookupOption() {\n        return false;\n    }\n\n    @ConfigSection(\n            name \u003d \"Other\",\n            description \u003d \"Other plugin settings\",\n            position \u003d 4\n    )\n    String otherSection \u003d \"otherSection\";\n\n    @ConfigItem(\n            keyName \u003d \"show_side_panel\",\n            name \u003d \"Show the RuneProfile side panel\",\n            description \u003d \"Adds RuneProfile to the RuneLite plugin side bar.\",\n            position \u003d 1,\n            section \u003d otherSection\n    )\n    default boolean showSidePanel() {\n        return true;\n    }\n\n    @ConfigItem(\n            keyName \u003d \"show_clog_sync_button\",\n            name \u003d \"Enable RuneProfile Sync button\",\n            description \u003d \"Shows the RuneProfile button in the Collection Log menu.\",\n            position \u003d 2,\n            section \u003d otherSection\n    )\n    default boolean showClogSyncButton() {\n        return true;\n    }\n\n}\n","filePath":"src/main/java/com/runeprofile/RuneProfileConfig.java"},{"fileName":"RuneProfilePlugin.java","content":"package com.runeprofile;\n\nimport com.google.inject.Provides;\n\nimport com.runeprofile.autosync.*;\nimport com.runeprofile.data.AddActivities;\nimport com.runeprofile.data.activities.Activity;\nimport com.runeprofile.data.activities.ActivityData;\nimport com.runeprofile.ui.*;\nimport com.runeprofile.utils.PlayerState;\nimport com.runeprofile.utils.RuneProfileApiException;\nimport com.runeprofile.utils.Utils;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\n\nimport javax.inject.Inject;\nimport javax.inject.Named;\nimport java.util.List;\n\n@Slf4j\n@PluginDescriptor(\n        name \u003d \"RuneProfile\"\n)\npublic class RuneProfilePlugin extends Plugin {\n    public static final String CONFIG_GROUP \u003d \"runeprofile\";\n\n    @Inject\n    @Named(\"developerMode\")\n    @Getter\n    private boolean developerMode;\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private ClientThread clientThread;\n\n    @Inject\n    private RuneProfileApiClient runeProfileApiClient;\n\n    @Inject\n    private PlayerDataService playerDataService;\n\n    @Inject\n    private AutoSyncScheduler autoSyncScheduler;\n\n    @Inject\n    private ManifestService manifestService;\n\n    @Inject\n    private CollectionLogWidgetSubscriber collectionLogWidgetSubscriber;\n\n    @Inject\n    private CollectionNotificationSubscriber collectionNotificationSubscriber;\n\n    @Inject\n    private RsnChangeSubscriber rsnChangeSubscriber;\n\n    @Inject\n    private ValuableDropSubscriber valuableDropSubscriber;\n\n    @Inject\n    private ManualUpdateButtonManager manualUpdateButtonManager;\n\n    @Inject\n    private CollectionLogPageMenuOption collectionLogPageMenuOption;\n\n    @Inject\n    private PlayerMenuOption playerMenuOption;\n\n    @Inject\n    private ChatPlayerMenuOption chatPlayerMenuOption;\n\n    @Inject\n    private CollectionLogCommand collectionLogCommand;\n\n    @Inject\n    private CommandSuggestionOverlay commandSuggestionOverlay;\n\n    private RuneProfilePanel runeProfilePanel;\n\n    @Provides\n    RuneProfileConfig provideConfig(ConfigManager configManager) {\n        return configManager.getConfig(RuneProfileConfig.class);\n    }\n\n    @Override\n    protected void startUp() {\n        this.runeProfilePanel \u003d injector.getInstance(RuneProfilePanel.class);\n        runeProfilePanel.startUp();\n\n        manifestService.startUp();\n        playerDataService.startUp();\n\n        autoSyncScheduler.startUp();\n        valuableDropSubscriber.startUp();\n        collectionLogWidgetSubscriber.startUp();\n        collectionNotificationSubscriber.startUp();\n        rsnChangeSubscriber.startUp();\n\n        manualUpdateButtonManager.startUp();\n        collectionLogPageMenuOption.startUp();\n        playerMenuOption.startUp();\n        chatPlayerMenuOption.startUp();\n        collectionLogCommand.startUp();\n        commandSuggestionOverlay.startUp();\n    }\n\n    @Override\n    protected void shutDown() {\n        runeProfilePanel.shutDown();\n\n        manifestService.shutDown();\n        playerDataService.shutDown();\n\n        autoSyncScheduler.shutDown();\n        valuableDropSubscriber.shutDown();\n        collectionLogWidgetSubscriber.shutDown();\n        collectionNotificationSubscriber.shutDown();\n        rsnChangeSubscriber.shutDown();\n\n        manualUpdateButtonManager.shutDown();\n        collectionLogPageMenuOption.shutDown();\n        playerMenuOption.shutDown();\n        chatPlayerMenuOption.shutDown();\n        collectionLogCommand.shutDown();\n        commandSuggestionOverlay.shutDown();\n    }\n\n    public void updateProfileAsync(boolean isAutoSync) {\n        if (!PlayerState.isValidPlayerState(client)) {\n            if (!isAutoSync) {\n                clientThread.invokeLater(() -\u003e {\n                    client.addChatMessage(ChatMessageType.CONSOLE, \"RuneProfile\", \"You are not allowed to update your profile on this world.\", \"RuneProfile\");\n                });\n            }\n\n            throw new IllegalStateException(\"Invalid player state\");\n        }\n\n        if (!isAutoSync) {\n            // If this is a manual sync, reset the auto-sync timer\n            autoSyncScheduler.resetAutoSyncTimer();\n        }\n\n        playerDataService.getPlayerDataAsync().thenCompose((data) -\u003e {\n                    // sanity check: a player reported syncs going through on invalid worlds\n                    if (!PlayerState.isValidPlayerState(client)) {\n                        throw new IllegalStateException(\"Invalid player state after fetching player data\");\n                    }\n                    return runeProfileApiClient.updateProfileAsync(data);\n                })\n                .whenComplete((result, ex) -\u003e {\n                    if (ex !\u003d null) {\n                        log.error(\"Error updating profile\", ex);\n\n                        final String errorMessage \u003d Utils.getApiErrorMessage(ex, \"Failed to update your profile.\");\n\n                        if (!isAutoSync) {\n                            clientThread.invokeLater(() -\u003e {\n                                client.addChatMessage(ChatMessageType.CONSOLE, \"RuneProfile\", errorMessage, \"RuneProfile\");\n                            });\n                        }\n\n                        throw new RuneProfileApiException(errorMessage);\n                    }\n\n                    if (!isAutoSync) {\n                        clientThread.invokeLater(() -\u003e {\n                            client.addChatMessage(ChatMessageType.CONSOLE, \"RuneProfile\", \"Your profile has been updated!\", \"RuneProfile\");\n                        });\n                    }\n\n                    playerDataService.reset();\n                });\n    }\n\n    public void deleteProfileAsync() {\n        if (!PlayerState.isValidPlayerState(client)) {\n            throw new IllegalStateException(\"Invalid player state\");\n        }\n\n        playerDataService.getAccountIdAsync().thenCompose((accountId) -\u003e runeProfileApiClient.deleteProfileAsync(accountId))\n                .whenComplete((result, ex) -\u003e {\n                    if (ex !\u003d null) {\n                        log.error(\"Error deleting profile\", ex);\n\n                        final String errorMessage \u003d Utils.getApiErrorMessage(ex, \"Failed to delete your profile.\");\n\n                        clientThread.invokeLater(() -\u003e {\n                            client.addChatMessage(ChatMessageType.CONSOLE, \"RuneProfile\", errorMessage, \"RuneProfile\");\n                        });\n\n                        throw new RuneProfileApiException(errorMessage);\n                    }\n\n                    clientThread.invokeLater(() -\u003e {\n                        client.addChatMessage(ChatMessageType.CONSOLE, \"RuneProfile\", \"Your profile has been deleted!\", \"RuneProfile\");\n                    });\n                });\n    }\n\n    public void updateModelAsync() {\n        if (!PlayerState.isValidPlayerState(client)) {\n            throw new IllegalStateException(\"Invalid player state\");\n        }\n\n        playerDataService.getPlayerModelDataAsync().thenCompose((data) -\u003e runeProfileApiClient.updateModelAsync(data)\n                .whenComplete((result, ex) -\u003e {\n                    if (ex !\u003d null) {\n                        log.error(\"Error updating model\", ex);\n\n                        final String errorMessage \u003d Utils.getApiErrorMessage(ex, \"Failed to update your player model.\");\n\n                        clientThread.invokeLater(() -\u003e {\n                            client.addChatMessage(ChatMessageType.CONSOLE, \"RuneProfile\", errorMessage, \"RuneProfile\");\n                        });\n\n                        throw new RuneProfileApiException(errorMessage);\n                    }\n\n                    clientThread.invokeLater(() -\u003e {\n                        client.addChatMessage(ChatMessageType.CONSOLE, \"RuneProfile\", \"Your player model has been updated!\", \"RuneProfile\");\n                    });\n                }));\n    }\n\n    public void addActivitiesAsync(List\u003c? extends Activity\u003c? extends ActivityData\u003e\u003e activities) {\n        if (!PlayerState.isValidPlayerState(client)) {\n            throw new IllegalStateException(\"Invalid player state\");\n        }\n\n        playerDataService.getAccountIdAsync().thenCompose((accountId) -\u003e runeProfileApiClient.addActivities(new AddActivities(accountId, activities))).whenComplete((result, ex) -\u003e {\n            if (ex !\u003d null) {\n                log.error(\"Error adding activities\", ex);\n\n                final String errorMessage \u003d Utils.getApiErrorMessage(ex, \"Failed to add activities.\");\n\n                clientThread.invokeLater(() -\u003e {\n                    client.addChatMessage(ChatMessageType.CONSOLE, \"RuneProfile\", errorMessage, \"RuneProfile\");\n                });\n\n                throw new RuneProfileApiException(errorMessage);\n            }\n        });\n    }\n\n}\n","filePath":"src/main/java/com/runeprofile/RuneProfilePlugin.java"},{"fileName":"JagexColor.java","content":"/*\n * Copyright (c) 2020 Abex\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.runeprofile.modelexporter;\n\nimport java.awt.*;\n\n// Originally from RuneLite cache\n// Additions made for calculating average of 3 colors\npublic final class JagexColor\n{\n\tpublic static final double BRIGHTNESS_MAX \u003d .6;\n\tpublic static final double BRIGHTNESS_HIGH \u003d .7;\n\tpublic static final double BRIGHTNESS_LOW \u003d .8;\n\tpublic static final double BRIGHTNESS_MIN \u003d .9;\n\n\tprivate static final double HUE_OFFSET \u003d (.5 / 64.D);\n\tprivate static final double SATURATION_OFFSET \u003d (.5 / 8.D);\n\n\tprivate JagexColor()\n\t{\n\t}\n\n\t// take 3 Jagex HSL colors and make a single RGB color to represent them\n\tpublic static Color HSLtoRGBAvg(int hsl1, int hsl2, int hsl3)\n\t{\n\t\tColor c1 \u003d new Color(HSLtoRGB((short) hsl1, BRIGHTNESS_MIN));\n\t\tColor c2 \u003d new Color(HSLtoRGB((short) hsl2, BRIGHTNESS_MIN));\n\t\tColor c3 \u003d new Color(HSLtoRGB((short) hsl3, BRIGHTNESS_MIN));\n\n\t\t// compute color average using squares\n\t\t// uses squared approach from https://sighack.com/post/averaging-rgb-colors-the-right-way\n\t\tint r \u003d c1.getRed()*c1.getRed() + c2.getRed()*c2.getRed() + c3.getRed()*c3.getRed();\n\t\tint g \u003d c1.getGreen()*c1.getGreen() + c2.getGreen()*c2.getGreen() + c3.getGreen()*c3.getGreen();\n\t\tint b \u003d c1.getBlue()*c1.getBlue() + c2.getBlue()*c2.getBlue() + c3.getBlue()*c3.getBlue();\n\n\t\tr \u003d (int) Math.round(Math.sqrt((double) r / 3.0d));\n\t\tg \u003d (int) Math.round(Math.sqrt((double) g / 3.0d));\n\t\tb \u003d (int) Math.round(Math.sqrt((double) b / 3.0d));\n\n\t\treturn new Color(r, g, b);\n\t}\n\n\tpublic static short packHSL(int hue, int saturation, int luminance)\n\t{\n\t\treturn (short) ((short) (hue \u0026 63) \u003c\u003c 10\n\t\t\t\t| (short) (saturation \u0026 7) \u003c\u003c 7\n\t\t\t\t| (short) (luminance \u0026 127));\n\t}\n\n\tpublic static int unpackHue(short hsl)\n\t{\n\t\treturn hsl \u003e\u003e 10 \u0026 63;\n\t}\n\n\tpublic static int unpackSaturation(short hsl)\n\t{\n\t\treturn hsl \u003e\u003e 7 \u0026 7;\n\t}\n\n\tpublic static int unpackLuminance(short hsl)\n\t{\n\t\treturn hsl \u0026 127;\n\t}\n\n\tpublic static String formatHSL(short hsl)\n\t{\n\t\treturn String.format(\"%02Xh%Xs%02Xl\", unpackHue(hsl), unpackSaturation(hsl), unpackLuminance(hsl));\n\t}\n\n\tpublic static int HSLtoRGB(short hsl, double brightness)\n\t{\n\t\tdouble hue \u003d (double) unpackHue(hsl) / 64.D + HUE_OFFSET;\n\t\tdouble saturation \u003d (double) unpackSaturation(hsl) / 8.D + SATURATION_OFFSET;\n\t\tdouble luminance \u003d (double) unpackLuminance(hsl) / 128.D;\n\n\t\t// This is just a standard hsl to rgb transform\n\t\t// the only difference is the offsets above and the brightness transform below\n\t\tdouble chroma \u003d (1.D - Math.abs((2.D * luminance) - 1.D)) * saturation;\n\t\tdouble x \u003d chroma * (1 - Math.abs(((hue * 6.D) % 2.D) - 1.D));\n\t\tdouble lightness \u003d luminance - (chroma / 2);\n\n\t\tdouble r \u003d lightness, g \u003d lightness, b \u003d lightness;\n\t\tswitch ((int) (hue * 6.D))\n\t\t{\n\t\t\tcase 0:\n\t\t\t\tr +\u003d chroma;\n\t\t\t\tg +\u003d x;\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tg +\u003d chroma;\n\t\t\t\tr +\u003d x;\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tg +\u003d chroma;\n\t\t\t\tb +\u003d x;\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tb +\u003d chroma;\n\t\t\t\tg +\u003d x;\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tb +\u003d chroma;\n\t\t\t\tr +\u003d x;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tr +\u003d chroma;\n\t\t\t\tb +\u003d x;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tint rgb \u003d ((int) (r * 256.0D) \u003c\u003c 16)\n\t\t\t\t| ((int) (g * 256.0D) \u003c\u003c 8)\n\t\t\t\t| (int) (b * 256.0D);\n\n\t\trgb \u003d adjustForBrightness(rgb, brightness);\n\n\t\tif (rgb \u003d\u003d 0)\n\t\t{\n\t\t\trgb \u003d 1;\n\t\t}\n\t\treturn rgb;\n\t}\n\n\tpublic static int adjustForBrightness(int rgb, double brightness)\n\t{\n\t\tdouble r \u003d (double) (rgb \u003e\u003e 16) / 256.0D;\n\t\tdouble g \u003d (double) (rgb \u003e\u003e 8 \u0026 255) / 256.0D;\n\t\tdouble b \u003d (double) (rgb \u0026 255) / 256.0D;\n\n\t\tr \u003d Math.pow(r, brightness);\n\t\tg \u003d Math.pow(g, brightness);\n\t\tb \u003d Math.pow(b, brightness);\n\n\t\treturn ((int) (r * 256.0D) \u003c\u003c 16)\n\t\t\t\t| ((int) (g * 256.0D) \u003c\u003c 8)\n\t\t\t\t| (int) (b * 256.0D);\n\t}\n\n\tpublic static int[] createPalette(double brightness)\n\t{\n\t\tint[] colorPalette \u003d new int[65536];\n\t\tfor (int i \u003d 0; i \u003c colorPalette.length; i++)\n\t\t{\n\t\t\tcolorPalette[i] \u003d HSLtoRGB((short) i, brightness);\n\t\t}\n\t\treturn colorPalette;\n\t}\n}","filePath":"src/main/java/com/runeprofile/modelexporter/JagexColor.java"},{"fileName":"TextureColor.java","content":"/*\n * Copyright (c) 2020, bram91\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n * list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n * this list of conditions and the following disclaimer in the documentation\n * and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.runeprofile.modelexporter;\n\nimport lombok.NonNull;\nimport net.runelite.api.Client;\n\nimport java.awt.Color;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class TextureColor {\n    private static final Map\u003cInteger, Color\u003e colorCache \u003d new HashMap\u003c\u003e();\n\n    // get single average color from Jagex texture id\n    public static Color getColor(@NonNull Client client, int textureId) {\n        if (colorCache.containsKey(textureId))\n            return colorCache.get(textureId);\n\n        int[] pixels \u003d client.getTextureProvider().load(textureId);\n\n        int r \u003d 0;\n        int g \u003d 0;\n        int b \u003d 0;\n        int n \u003d 0;\n        for (int pixel : pixels) {\n            // skip transparent (black)\n            if (pixel \u003d\u003d 0)\n                continue;\n\n            Color c \u003d new Color(pixel);\n            r +\u003d c.getRed();\n            g +\u003d c.getGreen();\n            b +\u003d c.getBlue();\n            n++;\n        }\n\n        Color c \u003d new Color(r / n, g / n, b / n);\n        colorCache.put(textureId, c);\n        return c;\n    }\n\n}","filePath":"src/main/java/com/runeprofile/modelexporter/TextureColor.java"},{"fileName":"ModelExporter.java","content":"/*\n * Copyright (c) 2020, bram91\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n * list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n * this list of conditions and the following disclaimer in the documentation\n * and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.runeprofile.modelexporter;\n\nimport lombok.NonNull;\nimport net.runelite.api.Client;\nimport net.runelite.api.Model;\n\nimport java.awt.Color;\nimport java.io.PrintWriter;\nimport java.io.IOException;\nimport java.io.ByteArrayOutputStream;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Objects;\n\npublic class ModelExporter {\n    private final static int[] colorPalette \u003d JagexColor.createPalette(JagexColor.BRIGHTNESS_MIN);\n\n    public static byte[] toBytes(@NonNull Client client, Model m) throws IOException {\n        List\u003cVertex\u003e vertices \u003d new ArrayList\u003c\u003e();\n        for (int fi \u003d 0; fi \u003c m.getFaceCount(); fi++) {\n            // determine vertex colors (textured or colored?)\n            Color vc1;\n            Color vc2;\n            Color vc3;\n            int textureId \u003d -1;\n            if (m.getFaceTextures() !\u003d null)\n                textureId \u003d m.getFaceTextures()[fi];\n            if (textureId !\u003d -1) {\n                // get average color of texture\n                vc1 \u003d TextureColor.getColor(client, textureId);\n                vc2 \u003d vc1;\n                vc3 \u003d vc1;\n            } else {\n                if (m.getFaceColors3()[fi] \u003d\u003d -1) {\n                    // face should be shaded flat\n                    int colorIndex \u003d m.getFaceColors1()[fi];\n                    int rgbColor \u003d colorPalette[colorIndex];\n                    vc1 \u003d vc2 \u003d vc3 \u003d new Color(rgbColor);\n                } else {\n                    // get color for each vertex\n                    vc1 \u003d new Color(JagexColor.HSLtoRGB((short) m.getFaceColors1()[fi], JagexColor.BRIGHTNESS_MIN));\n                    vc2 \u003d new Color(JagexColor.HSLtoRGB((short) m.getFaceColors2()[fi], JagexColor.BRIGHTNESS_MIN));\n                    vc3 \u003d new Color(JagexColor.HSLtoRGB((short) m.getFaceColors3()[fi], JagexColor.BRIGHTNESS_MIN));\n                }\n            }\n\n            int vi1 \u003d m.getFaceIndices1()[fi];\n            int vi2 \u003d m.getFaceIndices2()[fi];\n            int vi3 \u003d m.getFaceIndices3()[fi];\n\n            int vx1 \u003d (int) m.getVerticesX()[vi1];\n            int vx2 \u003d (int) m.getVerticesX()[vi2];\n            int vx3 \u003d (int) m.getVerticesX()[vi3];\n            int vy1 \u003d (int) -m.getVerticesY()[vi1];\n            int vy2 \u003d (int) -m.getVerticesY()[vi2];\n            int vy3 \u003d (int) -m.getVerticesY()[vi3];\n            int vz1 \u003d (int) m.getVerticesZ()[vi1];\n            int vz2 \u003d (int) m.getVerticesZ()[vi2];\n            int vz3 \u003d (int) m.getVerticesZ()[vi3];\n\n            vertices.add(new Vertex(vx1, vy1, vz1, vc1.getRed(), vc1.getGreen(), vc1.getBlue()));\n            vertices.add(new Vertex(vx2, vy2, vz2, vc2.getRed(), vc2.getGreen(), vc2.getBlue()));\n            vertices.add(new Vertex(vx3, vy3, vz3, vc3.getRed(), vc3.getGreen(), vc3.getBlue()));\n        }\n\n        ByteArrayOutputStream ply \u003d new ByteArrayOutputStream();\n        PrintWriter plyHeader \u003d new PrintWriter(ply);\n        plyHeader.println(\"ply\");\n        plyHeader.println(\"format binary_little_endian 1.0\");\n        plyHeader.println(\"element vertex \" + vertices.size());\n        plyHeader.println(\"property int16 x\");\n        plyHeader.println(\"property int16 y\");\n        plyHeader.println(\"property int16 z\");\n        plyHeader.println(\"property uint8 red\");\n        plyHeader.println(\"property uint8 green\");\n        plyHeader.println(\"property uint8 blue\");\n        plyHeader.println(\"element face \" + m.getFaceCount());\n        plyHeader.println(\"property list uint8 int16 vertex_indices\");\n        plyHeader.println(\"end_header\");\n        plyHeader.flush();\n\n        ByteArrayOutputStream w \u003d new ByteArrayOutputStream();\n\n        for (Vertex v : vertices) {\n            // Y and Z axes are flipped\n            w.write(le(v.x));\n            w.write(le(v.z));\n            w.write(le(v.y));\n            w.write((byte) v.r);\n            w.write((byte) v.g);\n            w.write((byte) v.b);\n        }\n\n        for (int i \u003d 0; i \u003c m.getFaceCount(); ++i) {\n            int vi \u003d i * 3;\n            w.write((byte) 3);\n            w.write(le(vi));\n            w.write(le(vi + 1));\n            w.write(le(vi + 2));\n        }\n\n        w.flush();\n        ply.write(w.toByteArray());\n        return ply.toByteArray();\n    }\n\n    // int to little endian byte array\n    private static byte[] le(int n) {\n        byte[] b \u003d new byte[2];\n        b[0] \u003d (byte) n;\n        b[1] \u003d (byte) (n \u003e\u003e 8);\n        return b;\n    }\n\n    private static class Vertex {\n        public int x, y, z;\n        public int r, g, b;\n\n        public Vertex(int x, int y, int z, int r, int g, int b) {\n            this.x \u003d x;\n            this.y \u003d y;\n            this.z \u003d z;\n            this.r \u003d r;\n            this.g \u003d g;\n            this.b \u003d b;\n        }\n\n        @Override\n        public boolean equals(Object o) {\n            if (this \u003d\u003d o) return true;\n            if (o \u003d\u003d null || getClass() !\u003d o.getClass()) return false;\n            Vertex vertex \u003d (Vertex) o;\n            return x \u003d\u003d vertex.x \u0026\u0026 y \u003d\u003d vertex.y \u0026\u0026 z \u003d\u003d vertex.z \u0026\u0026 r \u003d\u003d vertex.r \u0026\u0026 g \u003d\u003d vertex.g \u0026\u0026 b \u003d\u003d vertex.b;\n        }\n\n        @Override\n        public int hashCode() {\n            return Objects.hash(x, y, z, r, g, b);\n        }\n    }\n\n}","filePath":"src/main/java/com/runeprofile/modelexporter/ModelExporter.java"},{"fileName":"RuneProfileApiClient.java","content":"package com.runeprofile;\n\nimport com.google.gson.Gson;\nimport com.google.gson.JsonObject;\nimport com.runeprofile.data.*;\nimport com.runeprofile.utils.RuneProfileApiException;\nimport lombok.NonNull;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.RuneLiteProperties;\nimport okhttp3.*;\n\nimport javax.annotation.Nullable;\nimport javax.inject.Inject;\nimport java.io.IOException;\nimport java.util.Objects;\nimport java.util.concurrent.CompletableFuture;\nimport java.util.function.Consumer;\n\n@Slf4j\npublic class RuneProfileApiClient {\n    private static final MediaType JSON_MEDIA_TYPE \u003d Objects.requireNonNull(MediaType.parse(\"application/json; charset\u003dutf-8\"));\n\n    @Inject\n    private OkHttpClient okHttpClient;\n\n    private final String userAgent;\n\n    // increment when making breaking changes to how the plugin users the API\n    private static final String version \u003d \"2.0.0\";\n\n    private final HttpUrl baseUrl;\n\n    @Inject\n    private Gson gson;\n\n    @Inject\n    public RuneProfileApiClient() {\n        boolean isDevMode \u003d false;\n\n        String runeliteVersion \u003d RuneLiteProperties.getVersion();\n        userAgent \u003d \"RuneLite:\" + runeliteVersion + \",\" + \"Client:\" + version;\n\n        //noinspection ConstantValue\n        baseUrl \u003d isDevMode\n                ? new HttpUrl.Builder().scheme(\"http\").host(\"localhost\").port(8787).build()\n                : new HttpUrl.Builder().scheme(\"https\").host(\"api.runeprofile.com\").build();\n    }\n\n    private HttpUrl buildApiUrl(String... pathSegments) {\n        HttpUrl.Builder urlBuilder \u003d baseUrl.newBuilder();\n        for (String segment : pathSegments) {\n            urlBuilder.addPathSegment(segment);\n        }\n        return urlBuilder.build();\n    }\n\n    private RequestBody createJsonBody(JsonObject jsonObject) {\n        return RequestBody.create(JSON_MEDIA_TYPE, jsonObject.toString());\n    }\n\n    private Request.Builder buildApiRequest(HttpUrl url, Consumer\u003cRequest.Builder\u003e methodSetter) {\n        Request.Builder builder \u003d new Request.Builder()\n                .url(url)\n                .header(\"Content-Type\", \"application/json\")\n                .header(\"User-Agent\", userAgent);\n        methodSetter.accept(builder);\n        return builder;\n    }\n\n    private CompletableFuture\u003cResponse\u003e executeHttpRequestAsync(OkHttpClient client, Request request) {\n        CompletableFuture\u003cResponse\u003e future \u003d new CompletableFuture\u003c\u003e();\n        client.newCall(request).enqueue(new Callback() {\n            @Override\n            public void onFailure(@NonNull Call call, @NonNull IOException e) {\n                log.error(\"Async API request failed.\", e);\n                future.completeExceptionally(e);\n            }\n\n            @Override\n            public void onResponse(@NonNull Call call, @NonNull Response response) {\n                future.complete(response);\n            }\n        });\n        return future;\n    }\n\n    private CompletableFuture\u003cResponse\u003e postHttpRequestAsync(HttpUrl url, String data) {\n        RequestBody body \u003d RequestBody.create(JSON_MEDIA_TYPE, data);\n        Request request \u003d buildApiRequest(url, builder -\u003e builder.post(body)).build();\n        log.debug(\"Sending json request to \u003d {}, data \u003d {}\", url.toString(), data);\n        return executeHttpRequestAsync(okHttpClient, request);\n    }\n\n    private CompletableFuture\u003cResponse\u003e postHttpRequestAsync(HttpUrl url, MultipartBody data) {\n        Request request \u003d buildApiRequest(url, builder -\u003e builder.post(data)).build();\n        log.debug(\"Sending form data request to \u003d {}, data \u003d {}\", url.toString(), data);\n        return executeHttpRequestAsync(okHttpClient, request);\n    }\n\n    private CompletableFuture\u003cResponse\u003e getHttpRequestAsync(HttpUrl url) {\n        Request request \u003d buildApiRequest(url, Request.Builder::get)\n                .build();\n        return executeHttpRequestAsync(okHttpClient, request);\n    }\n\n    private CompletableFuture\u003cResponse\u003e deleteHttpRequestAsync(HttpUrl url) {\n        Request request \u003d buildApiRequest(url, Request.Builder::delete)\n                .build();\n        return executeHttpRequestAsync(okHttpClient, request);\n    }\n\n    private \u003cT\u003e T handleResponse(Response response, @Nullable Class\u003cT\u003e clazz) {\n        try (Response res \u003d response) {\n            ResponseBody body \u003d res.body();\n\n            if (body \u003d\u003d null) {\n                throw new RuneProfileApiException(\"Response body is null\");\n            }\n\n            String bodyString \u003d body.string();\n\n            if (!response.isSuccessful()) {\n                JsonObject json \u003d gson.fromJson(bodyString, JsonObject.class);\n                throw new RuneProfileApiException(json.get(\"message\").getAsString());\n            }\n\n            if (clazz \u003d\u003d null) {\n                return null;\n            }\n\n            return gson.fromJson(bodyString, clazz);\n        } catch (IOException e) {\n            throw new RuneProfileApiException(\"Error reading response body\");\n        }\n    }\n\n    public CompletableFuture\u003cVoid\u003e updateProfileAsync(PlayerData data) {\n        HttpUrl url \u003d buildApiUrl(\"profiles\");\n        return postHttpRequestAsync(url, gson.toJson(data))\n                .thenApply((response) -\u003e handleResponse(response, null));\n    }\n\n    public CompletableFuture\u003cVoid\u003e deleteProfileAsync(String accountHash) {\n        HttpUrl url \u003d buildApiUrl(\"profiles\", accountHash);\n        return deleteHttpRequestAsync(url)\n                .thenApply((response) -\u003e handleResponse(response, null));\n    }\n\n    public CompletableFuture\u003cVoid\u003e updateModelAsync(PlayerModelData data) {\n        HttpUrl url \u003d buildApiUrl(\"profiles\", \"models\");\n\n        RequestBody modelFile \u003d RequestBody.create(MediaType.parse(\"model/ply\"), data.getModel());\n\n        MultipartBody.Builder bodyBuilder \u003d new MultipartBody.Builder()\n                .setType(MultipartBody.FORM)\n                .addFormDataPart(\"accountId\", data.getAccountHash())\n                .addFormDataPart(\"model\", \"model.ply\", modelFile);\n\n        @Nullable\n        byte[] petModel \u003d data.getPetModel();\n        if (petModel !\u003d null) {\n            RequestBody petFile \u003d RequestBody.create(MediaType.parse(\"model/ply\"), petModel);\n            bodyBuilder.addFormDataPart(\"petModel\", \"pet.ply\", petFile);\n        }\n\n        MultipartBody body \u003d bodyBuilder.build();\n\n        return postHttpRequestAsync(url, body)\n                .thenApplyAsync((response -\u003e handleResponse(response, null)));\n    }\n\n    public CompletableFuture\u003cCollectionLogPage\u003e getCollectionLogPage(String username, String page) {\n        HttpUrl url \u003d buildApiUrl(\"profiles\", username, \"collection-log\", page);\n        return getHttpRequestAsync(url)\n                .thenApplyAsync((response -\u003e handleResponse(response, CollectionLogPage.class)));\n    }\n\n    public CompletableFuture\u003cProfileSearchResult[]\u003e searchProfiles(String query) {\n        HttpUrl url \u003d buildApiUrl(\"profiles\")\n                .newBuilder()\n                .addQueryParameter(\"q\", query)\n                .build();\n        return getHttpRequestAsync(url)\n                .thenApplyAsync((response -\u003e handleResponse(response, ProfileSearchResult[].class)));\n    }\n\n    public CompletableFuture\u003cVoid\u003e setDefaultClogPage(DefaultClogPageData data) {\n        HttpUrl url \u003d buildApiUrl(\"profiles\", \"set-default-clog-page\");\n        return postHttpRequestAsync(url, gson.toJson(data))\n                .thenApplyAsync((response) -\u003e handleResponse(response, null));\n    }\n\n    public CompletableFuture\u003cVoid\u003e addActivities(AddActivities data) {\n        HttpUrl url \u003d buildApiUrl(\"profiles\", \"activities\");\n        return postHttpRequestAsync(url, gson.toJson(data))\n                .thenApplyAsync((response) -\u003e handleResponse(response, null));\n    }\n\n    public CompletableFuture\u003cManifest\u003e getManifest() {\n        HttpUrl url \u003d buildApiUrl(\"manifest\");\n        return getHttpRequestAsync(url)\n                .thenApplyAsync((response -\u003e handleResponse(response, Manifest.class)));\n    }\n}\n","filePath":"src/main/java/com/runeprofile/RuneProfileApiClient.java"},{"fileName":"RuneProfilePluginTest.java","content":"package com.runeprofile;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class RuneProfilePluginTest {\n\tpublic static void main(String[] args) throws Exception {\n\t\tExternalPluginManager.loadBuiltin(RuneProfilePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src/test/java/com/runeprofile/RuneProfilePluginTest.java"}]},{"commit":"d517f1fa4685031a78981e8fafb91b517b223fa3","repository":"https://github.com/oceijt/Zalcano.git","internalName":"zalcano","files":[{"fileName":"ZalcanoConfig.java","content":"/*\n * Copyright (c) 2018, Tomas Slusny \u003cslusnucky@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.zalcano;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"Zalcano\")\npublic interface ZalcanoConfig extends Config\n{\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"PlayerCount\",\n\t\t\tname \u003d \"Show amount of players in the room\",\n\t\t\tdescription \u003d \"Shows amount of players in the Zalcano room. (Players standing at the gate are excluded)\"\n\t)\n\tdefault boolean showPlayerCount()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d \"Health\",\n\t\t\tname \u003d \"Show Zalcano health \u0026 Phase based on health\",\n\t\t\tdescription \u003d \"Shows current Zalcano health.\"\n\t)\n\tdefault boolean showHealth()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 3,\n\t\tkeyName \u003d \"Damage\",\n\t\tname \u003d \"Show damage dealt by player\",\n\t\tdescription \u003d \"Shows damage dealt by the player and minimum reward potential\"\n\t)\n\tdefault boolean showDamageDealt()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 4,\n\t\t\tkeyName \u003d \"ToolSeed\",\n\t\t\tname \u003d \"Show chance of getting Tool Seed\",\n\t\t\tdescription \u003d \"Shows the % chance to obtain a tool seed with your participation. Assuming 3 down kills\"\n\t)\n\tdefault boolean showToolSeedCalculations()\n\t{\n\t\treturn true;\n\t}\n}\n","filePath":"src\\main\\java\\com\\zalcano\\ZalcanoConfig.java"},{"fileName":"ZalcanoOverlay.java","content":"/*\n * Copyright (c) 2018, Tomas Slusny \u003cslusnucky@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.zalcano;\n\nimport net.runelite.api.Client;\nimport net.runelite.client.ui.overlay.*;\nimport net.runelite.client.ui.overlay.components.LineComponent;\nimport net.runelite.client.ui.overlay.components.TitleComponent;\n\nimport javax.inject.Inject;\nimport java.awt.*;\n\n\npublic class ZalcanoOverlay extends OverlayPanel {\n    private final Client client;\n    private final ZalcanoPlugin plugin;\n    private final ZalcanoConfig config;\n\n\n    @Inject\n    private ZalcanoOverlay(Client client, ZalcanoPlugin plugin, ZalcanoConfig config)\n    {\n        super(plugin);\n        setPosition(OverlayPosition.TOP_LEFT);\n        setPriority(OverlayPriority.LOW);\n\n        this.client \u003d client;\n        this.plugin \u003d plugin;\n        this.config \u003d config;\n    }\n\n    @Override\n    public String getName()\n    {\n        return \"ZalcanoUtilityOverlay\";\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics2D)\n    {\n        if (!shouldShowOverlay()) return null;\n        showTitle();\n        if (config.showPlayerCount()) showPlayerCount();\n        if (config.showHealth()) showHealth();\n        if (config.showDamageDealt()) showDamageDealt();\n        if (config.showToolSeedCalculations()) showToolSeedCalculations();\n        return super.render(graphics2D);\n    }\n\n    private boolean shouldShowOverlay()\n    {\n        return plugin.playerInZalcanoArea();\n    }\n\n    private void showTitle()\n    {\n        panelComponent.getChildren().add(TitleComponent.builder().text(\"Zalcano\").build());\n    }\n\n    private void showPlayerCount()\n    {\n        int playercount \u003d plugin.getPlayersParticipating().size();\n        panelComponent.getChildren().add(LineComponent.builder().left(\"Players: \" + playercount).build());\n    }\n\n    private void showHealth()\n    {\n        int firstPhaseHealth \u003d 640;\n        int secondPhaseHealth \u003d 360;\n        int miningHp \u003d plugin.getMiningHp();\n        int phase \u003d miningHp \u003e firstPhaseHealth ? 1 : miningHp \u003e secondPhaseHealth ? 2 : 3;\n\n        Color color \u003d decideColorBasedOnThreshold(miningHp, firstPhaseHealth, secondPhaseHealth);\n        panelComponent.getChildren().add(LineComponent.builder().left(\"Mining HP:  \" + miningHp + \" / 1000 (Phase: \" + phase + \")\").leftColor(color).build());\n        if (plugin.getZalcanoState() \u003d\u003d ZalcanoStates.THROWING) panelComponent.getChildren().add(LineComponent.builder().left(\"Throwing HP:  \" + plugin.getThrowingHp() + \" / 300\").build());\n    }\n\n    private void showDamageDealt()\n    {\n        Color color \u003d decideColorBasedOnThreshold(plugin.getShieldDamageDealt(), plugin.getMinimumDamageUniquesShield(), plugin.getMinimumDamageLootShield());\n        panelComponent.getChildren().add(LineComponent.builder().left(\"Shield Damage dealt: \" + plugin.getShieldDamageDealt() + \" / \" + plugin.getMinimumDamageUniquesShield()).leftColor(color).build());\n\n        color \u003d decideColorBasedOnThreshold(plugin.getMiningDamageDealt(), plugin.getMinimumDamageUniquesMining(), plugin.getMinimumDamageLootMining());\n        panelComponent.getChildren().add(LineComponent.builder().left(\"Mining Damage dealt: \" + plugin.getMiningDamageDealt() + \" / \" + plugin.getMinimumDamageUniquesMining()).leftColor(color).build());\n    }\n\n    private Color decideColorBasedOnThreshold(int damage, int greenThreshold, int yellowThreshold)\n    {\n        if (damage \u003e\u003d greenThreshold) {\n            return Color.GREEN;\n        } else if (damage \u003e yellowThreshold) {\n            return Color.YELLOW;\n        } else {\n            return Color.RED;\n        }\n    }\n\n    private void showToolSeedCalculations()\n    {\n        panelComponent.getChildren().add(LineComponent.builder().left(\"Chance of tool seed: \" + String.format(\"%.3g\", plugin.getChanceOfToolSeedTable() * 100) + \"%\").build());\n    }\n}\n","filePath":"src\\main\\java\\com\\zalcano\\ZalcanoOverlay.java"},{"fileName":"ZalcanoPlugin.java","content":"/*\n * Copyright (c) 2018, Tomas Slusny \u003cslusnucky@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.zalcano;\n\nimport com.google.inject.Provides;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.NPC;\nimport net.runelite.api.Player;\nimport net.runelite.api.ScriptEvent;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.*;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\nimport javax.inject.Inject;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Objects;\n\n@Slf4j\n@PluginDescriptor(\n\tconfigName \u003d \"ZalcanoUtility\",\n\tname \u003d \"ZalcanoUtility\"\n)\npublic class ZalcanoPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ZalcanoConfig config;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate ZalcanoOverlay zalcanoOverlay;\n\n\tprivate Widget hpBar;\n\tprivate int hpBarWidgetId \u003d 19857428;\n\tprivate boolean hpBarHidden \u003d true;\n\n\t@Getter\n\tprivate int zalcanoState;\n\t@Getter\n\tprivate int throwingHp;\n\t@Getter\n\tprivate int miningHp;\n\n\tprivate List\u003cPlayer\u003e playersInSight;\n\t@Getter\n\tprivate List\u003cPlayer\u003e playersParticipating \u003d new ArrayList\u003c\u003e();\n\n\tprivate final List\u003cWorldPoint\u003e excludedWorldPoints \u003d new ArrayList\u003c\u003e();\n\tprivate static final int ZALCANO_REGION \u003d 12126;\n\n\t@Getter\n\tprivate int shieldDamageDealt;\n\t@Getter\n\tprivate final int minimumDamageLootShield \u003d 30;\n\t@Getter\n\tprivate final int minimumDamageUniquesShield \u003d 50;\n\n\t@Getter\n\tprivate int miningDamageDealt;\n\t@Getter\n\tprivate final int minimumDamageLootMining \u003d 30;\n\t@Getter\n\tprivate final int minimumDamageUniquesMining \u003d 50;\n\n\t@Getter\n\tprivate float chanceOfToolSeedTable \u003d 0;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tlog.info(\"Zalcano plugin started\");\n\t\toverlayManager.add(zalcanoOverlay);\n\n\t\taddExcludedWorldPoints();\n\n\t\tplayersParticipating \u003d new ArrayList\u003c\u003e();\n\t\tplayersInSight \u003d new ArrayList\u003c\u003e(client.getPlayers());\n\t\t// Clear null values\n\t\twhile (true) if (!playersInSight.remove(null)) break;\n\n\t\tshieldDamageDealt \u003d 0;\n\t\tminingDamageDealt \u003d 0;\n\t\tzalcanoState \u003d ZalcanoStates.THROWING;\n\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(zalcanoOverlay);\n\t\tlog.info(\"Zalcano plugin stopped\");\n\t}\n\n\t@Subscribe\n\tpublic void onScriptPreFired(ScriptPreFired scriptPreFired) {\n\t\t\tScriptEvent event \u003d scriptPreFired.getScriptEvent();\n\t\t\tif (event !\u003d null) {\n\t\t\t\tWidget widget \u003d event.getSource();\n\t\t\t\tif (widget !\u003d null) {\n\t\t\t\t\tif (widget.getId() \u003d\u003d hpBarWidgetId) {\n\t\t\t\t\t\thpBarHidden \u003d widget.isHidden();\n\t\t\t\t\t\tif (!hpBarHidden) hpBar \u003d widget;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\n\t}\n\n\t@Subscribe\n\tpublic void onPlayerDespawned(PlayerDespawned playerDespawned)\n\t{\n\t\tplayersParticipating.remove(playerDespawned.getPlayer());\n\t\tplayersInSight.remove(playerDespawned.getPlayer());\n\t}\n\n\t@Subscribe\n\tpublic void onPlayerSpawned(PlayerSpawned playerSpawned)\n\t{\n\t\tplayersInSight.add(playerSpawned.getPlayer());\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick gameTick)\n\t{\n\t\tfilterPlayersAtGate(playersInSight);\n\t\tupdateZalcanoStatus();\n\t\tupdateZalcanoHealth();\n\t}\n\n\tprivate void updateZalcanoStatus()\n\t{\n\t\tfor (NPC npc: client.getNpcs())\n\t\t{\n\t\t\tif (npc.getId() \u003d\u003d ZalcanoStates.THROWING)\n\t\t\t{\n\t\t\t\tif (zalcanoState \u003d\u003d ZalcanoStates.MINING)\n\t\t\t\t{\n\t\t\t\t\t// Reset shield hp after transition from mining to throwing\n\t\t\t\t\tthrowingHp \u003d 300;\n\t\t\t\t}\n\t\t\t\tzalcanoState \u003d npc.getId();\n\t\t\t}\n\t\t\tif (npc.getId() \u003d\u003d ZalcanoStates.MINING)\n\t\t\t{\n\t\t\t\tzalcanoState \u003d npc.getId();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void updateZalcanoHealth() {\n\t\tif (!hpBarHidden)\n\t\t{\n\t\t\tif (zalcanoState \u003d\u003d ZalcanoStates.THROWING)\n\t\t\t{\n\t\t\t\tthrowingHp \u003d parseHealthbar(hpBar.getText());\n\t\t\t}\n\t\t\telse if (zalcanoState \u003d\u003d ZalcanoStates.MINING)\n\t\t\t{\n\t\t\t\tminingHp \u003d parseHealthbar(hpBar.getText());\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor (NPC npc : client.getNpcs())\n\t\t\t{\n\t\t\t\tint healthRatio \u003d npc.getHealthRatio();\n\t\t\t\tif (healthRatio \u003e\u003d 0)\n\t\t\t\t{\n\t\t\t\t\tif (npc.getId() \u003d\u003d ZalcanoStates.THROWING)\n\t\t\t\t\t{\n\t\t\t\t\t\tthrowingHp \u003d healthRatio * 3;\n\t\t\t\t\t}\n\t\t\t\t\telse if (npc.getId() \u003d\u003d ZalcanoStates.MINING)\n\t\t\t\t\t{\n\t\t\t\t\t\tminingHp \u003d healthRatio * 10;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onNpcSpawned(NpcSpawned npcSpawned)\n\t{\n\t\tNPC npc \u003d npcSpawned.getNpc();\n\t\tif (npc.getId() \u003d\u003d ZalcanoStates.THROWING || npc.getId() \u003d\u003d ZalcanoStates.MINING)\n\t\t{\n\t\t\tif (zalcanoState \u003d\u003d ZalcanoStates.DEAD)\n\t\t\t{\n\t\t\t\tshieldDamageDealt \u003d 0;\n\t\t\t\tminingDamageDealt \u003d 0;\n\t\t\t\tminingHp \u003d 1000;\n\t\t\t\tthrowingHp \u003d 300;\n\t\t\t\tchanceOfToolSeedTable \u003d 0;\n\t\t\t}\n\t\t\tzalcanoState \u003d npc.getId();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onNpcDespawned(NpcDespawned npcDespawned)\n\t{\n\t\tNPC npc \u003d npcDespawned.getNpc();\n\t\tif (npc.isDead() \u0026\u0026 npc.getId() \u003d\u003d ZalcanoStates.MINING)\n\t\t{\n\t\t\tzalcanoState \u003d ZalcanoStates.DEAD;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onHitsplatApplied(HitsplatApplied hitsplatApplied)\n\t{\n\t\tif (hitsplatApplied.getHitsplat().isMine())\n\t\t{\n\t\t\tif (hitsplatApplied.getActor() instanceof NPC)\n\t\t\t{\n\t\t\t\tNPC npc \u003d (NPC) hitsplatApplied.getActor();\n\t\t\t\tif (npc.getId() \u003d\u003d ZalcanoStates.THROWING)\n\t\t\t\t{\n\t\t\t\t\tshieldDamageDealt +\u003d hitsplatApplied.getHitsplat().getAmount();\n\t\t\t\t}\n\t\t\t\telse if (npc.getId() \u003d\u003d ZalcanoStates.MINING)\n\t\t\t\t{\n\t\t\t\t\tminingDamageDealt +\u003d hitsplatApplied.getHitsplat().getAmount();\n\t\t\t\t}\n\t\t\t\tcalculateToolSeedTableChances();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void calculateToolSeedTableChances()\n\t{\n\t\tint cap \u003d 1000;\n\t\tfloat points \u003d  miningDamageDealt + (shieldDamageDealt * 2);\n\t\tif (points \u003e cap) points \u003d cap;\n\t\tfloat contribution \u003d points / 2800;\n\t\tchanceOfToolSeedTable \u003d contribution / 200;\n\t}\n\n\tprivate int parseHealthbar(String healthbar)\n\t{\n\t\treturn Integer.parseInt(healthbar.substring(0, healthbar.indexOf(\"/\") - 1));\n\t}\n\n\tprivate void filterPlayersAtGate(List\u003cPlayer\u003e players)\n\t{\n\t\tfor(Player p : players) {\n\t\t\tWorldPoint playerLocation \u003d p.getWorldLocation();\n\t\t\tif (excludedWorldPoints.contains(playerLocation))\n\t\t\t{\n\t\t\t\tplayersParticipating.remove(p);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!playersParticipating.contains(p)) playersParticipating.add(p);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void addExcludedWorldPoints() {\n\t\tint plane \u003d 0;\n\t\tint minExcludedX \u003d 3033;\n\t\tint maxExcludedX \u003d 3034;\n\n\t\tint minExcludedY \u003d 6063;\n\t\tint maxExcludedY \u003d 6065;\n\n\t\tfor(int x \u003d minExcludedX; x \u003c\u003d maxExcludedX; x++)\n\t\t{\n\t\t\tfor(int y \u003dminExcludedY; y \u003c\u003d maxExcludedY; y++)\n\t\t\t{\n\t\t\t\texcludedWorldPoints.add(new WorldPoint(x, y, plane));\n\t\t\t}\n\t\t}\n\t}\n\n\t@Provides\n\tZalcanoConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(ZalcanoConfig.class);\n\t}\n\n\tpublic boolean playerInZalcanoArea()\n\t{\n\t\treturn Objects.requireNonNull(client.getLocalPlayer()).getWorldLocation().getRegionID() \u003d\u003d ZALCANO_REGION;\n\t}\n}\n","filePath":"src\\main\\java\\com\\zalcano\\ZalcanoPlugin.java"},{"fileName":"ZalcanoStates.java","content":"/*\n * Copyright (c) 2018, Tomas Slusny \u003cslusnucky@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.zalcano;\n\npublic class ZalcanoStates\n{\n    public static final int THROWING \u003d 9049;\n    public static final int MINING \u003d 9050;\n    public static final int DEAD \u003d 0;\n}\n","filePath":"src\\main\\java\\com\\zalcano\\ZalcanoStates.java"},{"fileName":"ZalcanoPluginTest.java","content":"package com.zalcano;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ZalcanoPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(ZalcanoPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\zalcano\\ZalcanoPluginTest.java"}]},{"commit":"3f8bd8155c871403372d9ee2dcd4c85da07d2db7","repository":"https://github.com/muffyn/quest-speedrunning-auto-splitter.git","internalName":"qsr-auto-splitter","files":[{"fileName":"Pair.java","content":"package com.QSRAutoSplitter;\n\npublic class Pair\u003cU,V\u003e {\n    public final U first;\n    public final V second;\n\n    public Pair(U first, V second) {\n        this.first \u003d first;\n        this.second \u003d second;\n    }\n}\n","filePath":"src\\main\\java\\com\\QSRAutoSplitter\\Pair.java"},{"fileName":"QSRAutoSplitterConfig.java","content":"package com.QSRAutoSplitter;\n\nimport net.runelite.api.ItemID;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\n\n@ConfigGroup(\"qsrautosplitter\")\npublic interface QSRAutoSplitterConfig extends Config\n{\n\tString desc \u003d \"The split config for this quest.\";\n\tString secDesc \u003d \"All of the split configs for quests of this length.\";\n\t@ConfigItem(\n\t\t\tposition \u003d 0,\n\t\t\tkeyName \u003d \"port\",\n\t\t\tname \u003d \"Port\",\n\t\t\tdescription \u003d \"Port for the LiveSplit server. (Restart required)\"\n\t)\n\tdefault int port() {\n\t\treturn 16834;\n\t}\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Customization Instructions\",\n\t\t\tdescription \u003d \"Instructions on how to edit a config\",\n\t\t\tposition \u003d 1,\n\t\t\tclosedByDefault \u003d true\n\t)\n\tString instructionsSection \u003d \"instructionsSect\";\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"instructions\",\n\t\t\tname \u003d \"Instructions\",\n\t\t\tdescription \u003d \"Instructions on how to edit a config\",\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d \"instructionsSect\"\n\t)\n\tdefault String instructions()\n\t{\n\t\treturn \"Edit any section below to change what actions will cause a split.\\n\" +\n\t\t\t\t\"The first element is just for naming, and is completely ignored.\\n\" +\n\t\t\t\t\"\\n\" +\n\t\t\t\t\"Format:\\n\" +\n\t\t\t\t\"\u003cname\u003e,0,\u003citemID\u003e(,\u003cquantity\u003e)\\n\" +\n\t\t\t\t\"Splits when an item matching the ID enters your inventory for the first time.\\n\" +\n\t\t\t\t\"If a quantity is given, it will split when you first have that many of the item in your inventory.\\n\" +\n\t\t\t\t\"You can find item IDs at https://www.osrsbox.com/tools/item-search/\\n\" +\n\t\t\t\t\"\\n\" +\n\t\t\t\t\"\u003cname\u003e,1,\u003cvarb\u003e,\u003cvalue\u003e\\n\" +\n\t\t\t\t\"Splits when the varbit changes to that value for the first time.\\n\" +\n\t\t\t\t\"\\n\" +\n\t\t\t\t\"\u003cname\u003e,2,\u003cvarp\u003e,\u003cvalue\u003e\\n\" +\n\t\t\t\t\"Splits when the varplayer changes to that value for the first time.\\n\" +\n\t\t\t\t\"You can find varbs and varps using RuneLite\u0027s developer mode\u0027s Var Inspector https://github.com/runelite/runelite/wiki/Using-the-client-developer-tools\";\n\t}\n/*\n\n\n */\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Very Short\",\n\t\t\tdescription \u003d secDesc,\n\t\t\tposition \u003d 2,\n\t\t\tclosedByDefault \u003d true\n\t)\n\tString veryShortSection \u003d \"veryshort\";\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"bkfList\",\n\t\t\tname \u003d \"Black Knights\u0027 Fortress\",\n\t\t\tdescription \u003d desc,\n\t\t\tposition \u003d 0,\n\t\t\tsection \u003d \"veryshort\"\n\t)\n\tdefault String bkfList()\n\t{\n\t\treturn \"Iron chainbody,0,1101\\n\" +\n\t\t\t\t\"Bronze med helm,0,1139\\n\" +\n\t\t\t\t\"Cabbage,0,1965\\n\" +\n\t\t\t\t\"Grill,2,130,2\\n\" +\n\t\t\t\t\"Hole,2,130,3\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"calist\",\n\t\t\tname \u003d \"Cook\u0027s Assistant\",\n\t\t\tdescription \u003d desc,\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d \"veryshort\"\n\t)\n\tdefault String caList()\n\t{\n\t\treturn \"Bucket of milk,0,1927\\n\" +\n\t\t\t\t\"Pot of flour,0,1933\\n\" +\n\t\t\t\t\"Egg,0,1944\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"etclist\",\n\t\t\tname \u003d \"Ernest the Chicken\",\n\t\t\tdescription \u003d desc,\n\t\t\tposition \u003d 2,\n\t\t\tsection \u003d \"veryshort\"\n\t)\n\tdefault String etcList()\n\t{\n\t\treturn \"Pressure gauge,0,271\\n\" +\n\t\t\t\t\"Fish food,0,272\\n\" +\n\t\t\t\t\"Poison,0,273\\n\" +\n\t\t\t\t\"Key,0,275\\n\" +\n\t\t\t\t\"Rubber tube,0,276\\n\" +\n\t\t\t\t\"Oil can,0,277\\n\" +\n\t\t\t\t\"Spade,0,952\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"vslist\",\n\t\t\tname \u003d \"Vampyre Slayer\",\n\t\t\tdescription \u003d desc,\n\t\t\tposition \u003d 3,\n\t\t\tsection \u003d \"veryshort\"\n\t)\n\tdefault String vsList()\n\t{\n\t\treturn \"Hammer,0,2347\\n\" +\n\t\t\t\t\"Stake,0,1549\\n\" +\n\t\t\t\t\"Garlic,0,1550\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"xmslist\",\n\t\t\tname \u003d \"X Marks the Spot\",\n\t\t\tdescription \u003d desc,\n\t\t\tposition \u003d 4,\n\t\t\tsection \u003d \"veryshort\"\n\t)\n\tdefault String xmsList()\n\t{\n\t\treturn \"Spade,0,952\\n\" +\n\t\t\t\t\"Veos,1,8063,2\\n\" +\n\t\t\t\t\"Window,1,8063,3\\n\" +\n\t\t\t\t\"Castle,1,8063,4\\n\" +\n\t\t\t\t\"Leela,1,8063,5\\n\" +\n\t\t\t\t\"Pig pen,1,8063,6\";\n\t}\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Short\",\n\t\t\tdescription \u003d secDesc,\n\t\t\tposition \u003d 3,\n\t\t\tclosedByDefault \u003d true\n\t)\n\tString shortSection \u003d \"short\";\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"bimlist\",\n\t\t\tname \u003d \"Below Ice Mountain\",\n\t\t\tdescription \u003d desc,\n\t\t\tposition \u003d 0,\n\t\t\tsection \u003d \"short\"\n\t)\n\tdefault String bimList()\n\t{\n\t\treturn \"Cooked meat,0,2142\\n\" +\n\t\t\t\t\"Knife,0,946\\n\" +\n\t\t\t\t\"Bread,0,2309\\n\" +\n\t\t\t\t\"Start,1,12063,10\\n\" +\n\t\t\t\t\"Janken,1,12066,40\\n\" +\n\t\t\t\t\"Checkal,1,12065,5\\n\" +\n\t\t\t\t\"Atlas,1,12065,10\\n\" +\n\t\t\t\t\"Montage,1,12065,15\\n\" +\n\t\t\t\t\"Flex,1,12065,40\\n\" +\n\t\t\t\t\"Charlie,1,12064,2\\n\" +\n\t\t\t\t\"Cook,1,12064,10\\n\" +\n\t\t\t\t\"Marley,1,12064,40\\n\" +\n\t\t\t\t\"Willow,1,12063,25\\n\" +\n\t\t\t\t\"Start fight,1,12063,35\\n\" +\n\t\t\t\t\"Ancient Guardian,1,12063,40\";\n\t}\n\n/*\n\n*/\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"dslist\",\n\t\t\tname \u003d \"Demon Slayer\",\n\t\t\tdescription \u003d desc,\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d \"short\"\n\t)\n\tdefault String dsList()\n\t{\n\t\treturn \"Sir Prysin\u0027s key,0,2399\\n\" +\n\t\t\t\t\"Captain Rovin\u0027s key,0,2400\\n\" +\n\t\t\t\t\"Wizard Traiborn\u0027s key,0,2401\\n\" +\n\t\t\t\t\"Bones,0,526,25\\n\" +\n\t\t\t\t\"Sir Prysin,1,2561,2\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"parlist\",\n\t\t\tname \u003d \"Prince Ali Rescue\",\n\t\t\tdescription \u003d desc,\n\t\t\tposition \u003d 2,\n\t\t\tsection \u003d \"short\"\n\t)\n\tdefault String parList()\n\t{\n\t\treturn \"Clay,0,434\\n\" +\n\t\t\t\t\"Key print,0,2423\\n\" +\n\t\t\t\t\"Onion,0,1957,2\\n\" +\n\t\t\t\t\"Yellow dye,0,1765\\n\" +\n\t\t\t\t\"Wig,0,2421\\n\" +\n\t\t\t\t\"Paste,0,2424\\n\" +\n\t\t\t\t\"Rope,0,954\\n\" +\n\t\t\t\t\"Beer,0,1917,3\\n\" +\n\t\t\t\t\"Pink skirt,0,1013\\n\" +\n\t\t\t\t\"Bronze key,0,2418\\n\" +\n\t\t\t\t\"Ashes,0,592\\n\" +\n\t\t\t\t\"Redberries,0,1951\\n\" +\n\t\t\t\t\"Bronze bar,0,2349\\n\" +\n\t\t\t\t\"Bucket of water,0,1929\\n\" +\n\t\t\t\t\"Ball of wool,0,1759,3\\n\" +\n\t\t\t\t\"Pot of flour,0,1933\\n\" +\n\t\t\t\t\"Osman,2,273,20\\n\" +\n\t\t\t\t\"Ali,2,273,100\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"toelist\",\n\t\t\tname \u003d \"Temple of the Eye\",\n\t\t\tdescription \u003d desc,\n\t\t\tposition \u003d 3,\n\t\t\tsection \u003d \"short\"\n\t)\n\tdefault String toeList()\n\t{\n\t\treturn \"Bucket of water,0,1929\\n\" +\n\t\t\t\t\"Chisel,0,1755\\n\" +\n\t\t\t\t\"Mind rune,0,558,5\\n\" +\n\t\t\t\t\"Water rune,0,555,5\\n\" +\n\t\t\t\t\"Water rune,0,555,10\\n\" +\n\t\t\t\t\"Persten 1,1,13738,10\\n\" +\n\t\t\t\t\"Dark mage 1,1,13738,15\\n\" +\n\t\t\t\t\"Tea,1,13741,1\\n\" +\n\t\t\t\t\"Dark mage 2,1,13738,25\\n\" +\n\t\t\t\t\"Start puzzle,1,13738,35\\n\" +\n\t\t\t\t\"Puzzle,1,13738,40\\n\" +\n\t\t\t\t\"Dark Mage 2,1,13738,45\\n\" +\n\t\t\t\t\"Persten 2,1,13738,60\\n\" +\n\t\t\t\t\"Sedridor 1,1,13738,70\\n\" +\n\t\t\t\t\"Traiborn 1,1,13738,75\\n\" +\n\t\t\t\t\"Tamara 1,1,13742,1\\n\" +\n\t\t\t\t\"Felix 1,1,13743,1\\n\" +\n\t\t\t\t\"Cordelia 1,1,13744,1\\n\" +\n\t\t\t\t\"All viewed,1,13738,80\\n\" +\n\t\t\t\t\"Puzzle complete,1,13738,85\\n\" +\n\t\t\t\t\"Persten,1,13738,95\\n\" +\n\t\t\t\t\"Felix 2,1,13755,1\\n\" +\n\t\t\t\t\"Tamara 2,1,13754,1\\n\" +\n\t\t\t\t\"Cordelia 2,1,13756,1\\n\" +\n\t\t\t\t\"Great Guardian 1,1,13759,15\\n\" +\n\t\t\t\t\"Felix,1,13759,20\\n\" +\n\t\t\t\t\"Tamara,1,13759,25\\n\" +\n\t\t\t\t\"Cell,1,13759,30\\n\" +\n\t\t\t\t\"Tamara,1,13759,40\\n\" +\n\t\t\t\t\"Felix,1,13759,45\\n\" +\n\t\t\t\t\"Power guardians,1,13759,50\\n\" +\n\t\t\t\t\"Tamara,1,13759,55\\n\" +\n\t\t\t\t\"Tamara with 5 ess,1,13759,60\\n\" +\n\t\t\t\t\"Tamara after mind,1,13759,65\\n\" +\n\t\t\t\t\"Charge,1,13759,70\\n\" +\n\t\t\t\t\"Great Guardian,1,13759,75\\n\" +\n\t\t\t\t\"Tamara,1,13759,80\\n\" +\n\t\t\t\t\"Great guardian,1,13759,85\\n\" +\n\t\t\t\t\"Tamara,1,13759,90\\n\" +\n\t\t\t\t\"Water guardian,1,13759,95\\n\" +\n\t\t\t\t\"Tamara,1,13759,100\\n\" +\n\t\t\t\t\"Charge water cell,1,13759,105\\n\" +\n\t\t\t\t\"Tamara,1,13759,110\\n\" +\n\t\t\t\t\"Great Guardian,1,13738,120\\n\" +\n\t\t\t\t\"Great guardian cutscene,1,13738,125\";\n\t}\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Medium\",\n\t\t\tdescription \u003d secDesc,\n\t\t\tposition \u003d 4,\n\t\t\tclosedByDefault \u003d true\n\t)\n\tString mediumSection \u003d \"medium\";\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"bcslist\",\n\t\t\tname \u003d \"Beneath Cursed Sands\",\n\t\t\tdescription \u003d desc,\n\t\t\tposition \u003d 0,\n\t\t\tsection \u003d \"medium\"\n\t)\n\tdefault String bcsList()\n\t{\n\t\treturn \"Spade,0,952\\n\" +\n\t\t\t\t\"Tinderbox,0,590\\n\" +\n\t\t\t\t\"Iron bar,0,2351\\n\" +\n\t\t\t\t\"Coal,0,453\\n\" +\n\t\t\t\t\"Chest,0,26955\\n\" +\n\t\t\t\t\"Scarab emblem,0,26953\\n\" +\n\t\t\t\t\"Rusty key,0,26960\\n\" +\n\t\t\t\t\"Cooked meat,0,2142\\n\" +\n\t\t\t\t\"Lily of the Elid,0,26961\\n\" +\n\t\t\t\t\"Cure crate,0,26962\\n\" +\n    \t\t\t\"Maisa 1,1,13841,12\\n\" +\n\t\t\t\t\"Start fight 1,1,13841,18\\n\" +\n\t\t\t\t\"End fight 1,1,13841,20\\n\" +\n\t\t\t\t\"Maisa 2,1,13841,26\\n\" +\n\t\t\t\t\"Furnace lit,1,13841,32\\n\" +\n\t\t\t\t\"Rotation puzzle,1,13841,38\\n\" +\n\t\t\t\t\"Start fight 2,1,13841,40\\n\" +\n\t\t\t\t\"End fight 2,1,13841,42\\n\" +\n\t\t\t\t\"Lever puzzle,1,13841,46\\n\" +\n\t\t\t\t\"Urn puzzle,1,13841,48\\n\" +\n\t\t\t\t\"Mehhar,1,13841,54\\n\" +\n\t\t\t\t\"Start fight 3,1,13841,60\\n\" +\n\t\t\t\t\"End fight 3,1,13841,62\\n\" +\n\t\t\t\t\"High Priest of Scabaras,1,13841,68\\n\" +\n\t\t\t\t\"Maisa 3,1,13841,72\\n\" +\n\t\t\t\t\"Zahur,1,13841,80\\n\" +\n\t\t\t\t\"Heat puzzle,1,13841,84\\n\" +\n\t\t\t\t\"High priest 1,1,13841,92\\n\" +\n\t\t\t\t\"Start fight 4,1,13841,98\\n\" +\n\t\t\t\t\"End fight 4,1,13841,100\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"dsilist\",\n\t\t\tname \u003d \"Dragon Slayer I\",\n\t\t\tdescription \u003d desc,\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d \"medium\"\n\t)\n\tdefault String dsiList()\n\t{\n\t\treturn \"Melzar\u0027s map part,0,1535\\n\" +\n\t\t\t\t\"Thalzar\u0027s map part,0,1536\\n\" +\n\t\t\t\t\"Lozar\u0027s map part,0,1537\\n\" +\n\t\t\t\t\"Clay,0,434\\n\" +\n\t\t\t\t\"Bucket of water,0,1929\\n\" +\n\t\t\t\t\"Unfired bowl,0,1791\\n\" +\n\t\t\t\t\"Wizard\u0027s mind bomb,0,1907\\n\" +\n\t\t\t\t\"Lobster pot,0,301\\n\" +\n\t\t\t\t\"Silk,0,950\\n\" +\n\t\t\t\t\"Anti-dragon shield,0,1540\\n\" +\n\t\t\t\t\"Hammer,0,2347\\n\" +\n\t\t\t\t\"Steel nails,0,1539,90\\n\" +\n\t\t\t\t\"Plank,0,960,3\\n\" +\n\t\t\t\t\"Red key,0,1543\\n\" +\n\t\t\t\t\"Orange key,0,1544\\n\" +\n\t\t\t\t\"Yellow key,0,1545\\n\" +\n\t\t\t\t\"Blue key,0,1546\\n\" +\n\t\t\t\t\"Magenta key,0,1547\\n\" +\n\t\t\t\t\"Green key,0,1548\\n\" +\n    \t\t\t\"Oziach,2,176,2\\n\" +\n\t\t\t\t\"Bought boat,2,176,3\\n\" +\n\t\t\t\t\"Repaired boat,2,176,6\\n\" +\n\t\t\t\t\"Recruited Ned,2,176,7\\n\" +\n\t\t\t\t\"Crandor,2,176,8\\n\" +\n\t\t\t\t\"Elvarg slain,2,176,9\\n\" +\n\t\t\t\t\"Oracle,1,1832,1\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"tohlist\",\n\t\t\tname \u003d \"A Taste of Hope\",\n\t\t\tdescription \u003d desc,\n\t\t\tposition \u003d 2,\n\t\t\tsection \u003d \"medium\"\n\t)\n\tdefault String tohList()\n\t{\n\t\treturn \"Safalaan 1,1,6396,20\\n\" +\n\t\t\t\t\"Harpert,1,6396,35\\n\" +\n\t\t\t\t\"Window,1,6396,45\\n\" +\n\t\t\t\t\"Safalaan 2,1,6396,55\\n\" +\n\t\t\t\t\"Flaygian,1,6396,65\\n\" +\n\t\t\t\t\"Safalaan 3,1,6396,75\\n\" +\n\t\t\t\t\"Give note,1,6396,90\\n\" +\n\t\t\t\t\"Start Abomination,1,6396,100\\n\" +\n\t\t\t\t\"End Abomination,1,6396,110\\n\" +\n\t\t\t\t\"Safalaan pre-flail,1,6396,120\\n\" +\n\t\t\t\t\"Safalaan post-flail,1,6396,135\\n\" +\n\t\t\t\t\"Start Ranis,1,6396,140\\n\" +\n\t\t\t\t\"End Ranis,1,6396,150\";\n\t}\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Long\",\n\t\t\tdescription \u003d secDesc,\n\t\t\tposition \u003d 5,\n\t\t\tclosedByDefault \u003d true\n\t)\n\tString longSection \u003d \"long\";\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"akdlist\",\n\t\t\tname \u003d \"A Kingdom Divided\",\n\t\t\tdescription \u003d desc,\n\t\t\tposition \u003d 0,\n\t\t\tsection \u003d \"long\"\n\t)\n\tdefault String akdList()\n\t{\n\t\treturn \"Martin 1,1,12296,4\\n\" +\n\t\t\t\t\"Fullore 1,1,12296,6\\n\" +\n\t\t\t\t\"Fuggy,1,12296,14\\n\" +\n\t\t\t\t\"Herbert,1,12296,16\\n\" +\n\t\t\t\t\"Start Judge of Yama,1,12296,18\\n\" +\n\t\t\t\t\"Judge of Yama,1,12296,20\\n\" +\n\t\t\t\t\"Yama cutscene,1,12296,24\\n\" +\n\t\t\t\t\"Fullore 2,1,12296,26\\n\" +\n\t\t\t\t\"Dark essence block,0,13446\\n\" +\n\t\t\t\t\"Martin 2,1,12296,30\\n\" +\n\t\t\t\t\"Steal key,1,12296,32\\n\" +\n\t\t\t\t\"Display case,1,12296,34\\n\" +\n\t\t\t\t\"Martin 3,1,12296,42\\n\" +\n\t\t\t\t\"Martin ruins,1,12296,44\\n\" +\n\t\t\t\t\"Rose panel,1,12296,50\\n\" +\n\t\t\t\t\"Start assassin 1,1,12296,56\\n\" +\n\t\t\t\t\"Assassin 1,1,12296,58\\n\" +\n\t\t\t\t\"Winter panel,1,12296,64\\n\" +\n\t\t\t\t\"Martin bar,1,12296,70\\n\" +\n\t\t\t\t\"Bar panel,1,12296,72\\n\" +\n\t\t\t\t\"Statue puzzle,1,12296,74\\n\" +\n\t\t\t\t\"Arrest,1,12296,76\\n\" +\n\t\t\t\t\"Move boxes,1,12296,80\\n\" +\n\t\t\t\t\"Rose cutscene,1,12296,84\\n\" +\n\t\t\t\t\"Volcanic sulphur,0,13571\\n\" +\n\t\t\t\t\"Kaht B\u0027alam 1,1,12296,88\\n\" +\n\t\t\t\t\"Lizard egg,1,12296,90\\n\" +\n\t\t\t\t\"Damp key,0,25810\\n\" +\n\t\t\t\t\"Start Xamphur,1,12296,100\\n\" +\n\t\t\t\t\"Xamphur,1,12296,102\\n\" +\n\t\t\t\t\"Search table,1,12296,106\\n\" +\n\t\t\t\t\"Funeral,1,12296,110\\n\" +\n\t\t\t\t\"Invite Piscarilius,1,12313,1\\n\" +\n\t\t\t\t\"Invite Arceuus,1,12314,1\\n\" +\n\t\t\t\t\"Molten glass,0,1775\\n\" +\n\t\t\t\t\"Invite Lovakengj,1,12315,1\\n\" +\n\t\t\t\t\"Invite Hosidius,1,12316,1\\n\" +\n\t\t\t\t\"Invite Shayzien,1,12317,1\\n\" +\n\t\t\t\t\"Meeting,1,12296,122\\n\" +\n\t\t\t\t\"Fullore,1,12296,124\\n\" +\n\t\t\t\t\"Shayzien,1,12322,2\\n\" +\n\t\t\t\t\"Lovakengj,1,12320,2\\n\" +\n\t\t\t\t\"Piscarilius,1,12318,2\\n\" +\n\t\t\t\t\"Arceuus,1,12319,2\\n\" +\n\t\t\t\t\"Fullore,1,12320,4\\n\" +\n\t\t\t\t\"Hosidius,1,12321,2\\n\" +\n\t\t\t\t\"Taskaal,1,12319,6\\n\" +\n\t\t\t\t\"Enchant potion,1,12319,8\\n\" +\n\t\t\t\t\"Doors of Dinh,1,12319,10\\n\" +\n\t\t\t\t\"Start barbarian,1,12321,4\\n\" +\n\t\t\t\t\"Barbarian,1,12321,6\\n\" +\n\t\t\t\t\"Phileas,1,12321,8\\n\" +\n\t\t\t\t\"Martin,1,12320,6\\n\" +\n\t\t\t\t\"Start assassin 2,1,12320,10\\n\" +\n\t\t\t\t\"Assassin 2,1,12320,12\\n\" +\n\t\t\t\t\"Jorra,1,12320,14\\n\" +\n\t\t\t\t\"Mori,1,12318,8\\n\" +\n\t\t\t\t\"Chasm,1,12318,10\\n\" +\n\t\t\t\t\"Chest,1,12322,6\\n\" +\n\t\t\t\t\"Arceuus,1,12319,12\\n\" +\n\t\t\t\t\"Hosidius,1,12321,10\\n\" +\n\t\t\t\t\"Shayzien,1,12322,8\\n\" +\n\t\t\t\t\"Lovakengj,1,12320,16\\n\" +\n\t\t\t\t\"Piscarilius,1,12318,12\\n\" +\n\t\t\t\t\"Meeting,1,12296,138\\n\" +\n\t\t\t\t\"Fullore,1,12296,140\\n\" +\n\t\t\t\t\"Hosidius,1,12296,142\\n\" +\n\t\t\t\t\"Fullore,1,12296,144\\n\" +\n\t\t\t\t\"Coronation,1,12296,148\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"sotflist\",\n\t\t\tname \u003d \"Sins of the Father\",\n\t\t\tdescription \u003d desc,\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d \"long\"\n\t)\n\tdefault String sotfList()\n\t{\n\t\treturn \"Logs,0,1511,3\\n\" +\n\t\t\t\t\"Short vine,0,7778,3\\n\" +\n\t\t\t\t\"Vyrewatch top,0,9634\\n\" +\n\t\t\t\t\"Blisterwood logs,0,24691,8\\n\" +\n\t\t\t\t\"Veliaf,1,7255,4\\n\" +\n\t\t\t\t\"Hameln,1,7255,6\\n\" +\n\t\t\t\t\"Carl,1,7255,8\\n\" +\n\t\t\t\t\"Start stealth,1,7255,10\\n\" +\n\t\t\t\t\"End stealth,1,7255,14\\n\" +\n\t\t\t\t\"Start Kroy,1,7255,16\\n\" +\n\t\t\t\t\"Kill Kroy,1,7255,18\\n\" +\n\t\t\t\t\"Veliaf,1,7255,22\\n\" +\n\t\t\t\t\"Paterdomus,1,7255,28\\n\" +\n\t\t\t\t\"Fenkenstrain,1,7255,34\\n\" +\n\t\t\t\t\"End trek,1,7255,40\\n\" +\n\t\t\t\t\"Talk at boat,1,7255,42\\n\" +\n\t\t\t\t\"Start puzzle,1,7255,50\\n\" +\n\t\t\t\t\"End puzzle,1,7255,52\\n\" +\n\t\t\t\t\"Vertida,1,10348,1\\n\" +\n\t\t\t\t\"Kael,1,10347,1\\n\" +\n\t\t\t\t\"Radigad,1,10351,1\\n\" +\n\t\t\t\t\"Polmafi,1,10350,2\\n\" +\n\t\t\t\t\"Ivan,1,10349,1\\n\" +\n\t\t\t\t\"Veliaf,1,7255,56\\n\" +\n\t\t\t\t\"Vanescula,1,7255,58\\n\" +\n\t\t\t\t\"Start bloodveld,1,7255,62\\n\" +\n\t\t\t\t\"End bloodveld,1,7255,64\\n\" +\n\t\t\t\t\"Safalaan lab,1,7255,66\\n\" +\n\t\t\t\t\"Turn in book,1,7255,70\\n\" +\n\t\t\t\t\"Vanescula,1,7255,72\\n\" +\n\t\t\t\t\"Polmafi,1,7255,78\\n\" +\n\t\t\t\t\"Vanescula,1,7255,80\\n\" +\n\t\t\t\t\"Start Damien,1,7255,84\\n\" +\n\t\t\t\t\"End Damien,1,7255,88\\n\" +\n\t\t\t\t\"Vanescula,1,7255,90\\n\" +\n\t\t\t\t\"Desmodus,1,7255,94\\n\" +\n\t\t\t\t\"Mordan,1,7255,96\\n\" +\n\t\t\t\t\"Maria,1,7255,100\\n\" +\n\t\t\t\t\"Start valves,1,7255,108\\n\" +\n\t\t\t\t\"Start tree,1,7255,112\\n\" +\n\t\t\t\t\"Vanescula,1,7255,114\\n\" +\n\t\t\t\t\"Vertida,1,7255,118\\n\" +\n\t\t\t\t\"Vanescula,1,7255,122\\n\" +\n\t\t\t\t\"Fight cutscene,1,7255,128\\n\" +\n\t\t\t\t\"Start Vanstrom,1,7255,130\\n\" +\n\t\t\t\t\"Phase 1,2,1683,9571\\n\" +\n\t\t\t\t\"End Vanstrom,1,7255,132\";\n\t}\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Very Long\",\n\t\t\tdescription \u003d secDesc,\n\t\t\tposition \u003d 6,\n\t\t\tclosedByDefault \u003d true\n\t)\n\tString verylongSection \u003d \"verylong\";\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"dsiilist\",\n\t\t\tname \u003d \"Dragon Slayer II\",\n\t\t\tdescription \u003d desc,\n\t\t\tposition \u003d 0,\n\t\t\tsection \u003d \"verylong\"\n\t)\n\tdefault String dsiiList()\n\t{\n\t\treturn \"Goutweed,0,3261\\n\" +\n\t\t\t\t\"Oak planks,0,8778,8\\n\" +\n\t\t\t\t\"Saw,0,8794\\n\" +\n\t\t\t\t\"Hammer,0,2347\\n\" +\n\t\t\t\t\"Swamp paste,0,1941,10\\n\" +\n\t\t\t\t\"Molten glass,0,1775,2\\n\" +\n\t\t\t\t\"Glassblowing pipe,0,1785\\n\" +\n\t\t\t\t\"Spade,0,952\\n\" +\n\t\t\t\t\"Astral rune,0,9075\\n\" +\n\t\t\t\t\"Tinderbox,0,590\\n\" +\n\t\t\t\t\"Pestle and mortar,0,233\\n\" +\n\t\t\t\t\"Dallas Jones (Karamja),1,6104,10\\n\" +\n\t\t\t\t\"Dallas Jones (Elvarg),1,6104,15\\n\" +\n\t\t\t\t\"Enter lab,1,6104,20\\n\" +\n\t\t\t\t\"Start Spawn,1,6104,22\\n\" +\n\t\t\t\t\"Spawn,1,6104,25\\n\" +\n\t\t\t\t\"Mural,1,6104,30\\n\" +\n\t\t\t\t\"Dallas Jones (lab),1,6104,35\\n\" +\n\t\t\t\t\"Dallas Jones (hoth),1,6104,40\\n\" +\n\t\t\t\t\"Puzzle start,1,6104,45\\n\" +\n\t\t\t\t\"Puzzle,1,6104,50\\n\" +\n\t\t\t\t\"Dallas Jones (hoth),1,6104,55\\n\" +\n\t\t\t\t\"Jardic,1,6104,60\\n\" +\n\t\t\t\t\"Build rowboat,1,6104,65\\n\" +\n\t\t\t\t\"Lithkren,1,6104,71\\n\" +\n\t\t\t\t\"Dallas Jones (lithkren),1,6104,80\\n\" +\n\t\t\t\t\"Diary of Aviras,1,6104,81\\n\" +\n\t\t\t\t\"Dallas Jones (lithkren),1,6104,90\\n\" +\n\t\t\t\t\"Bob the cat,1,6104,95\\n\" +\n\t\t\t\t\"Sphinx,1,6104,100\\n\" +\n\t\t\t\t\"Oneiromancer,1,6104,105\\n\" +\n\t\t\t\t\"Enter dream,1,6104,110\\n\" +\n\t\t\t\t\"Bob,1,6104,111\\n\" +\n\t\t\t\t\"Start Robert the Strong,1,6100,280\\n\" +\n\t\t\t\t\"Robert the Strong,1,6104,115\\n\" +\n\t\t\t\t\"Cutscene,1,6104,120\\n\" +\n\t\t\t\t\"Bob,1,6104,125\\n\" +\n\t\t\t\t\"Enter Karamja temple,1,6106,15\\n\" +\n\t\t\t\t\"Key piece (Karamja),1,6106,20\\n\" +\n\t\t\t\t\"Reldo,1,6107,10\\n\" +\n\t\t\t\t\"Census,1,6107,15\\n\" +\n\t\t\t\t\"Reldo,1,6107,25\\n\" +\n\t\t\t\t\"Sarah,1,6107,35\\n\" +\n\t\t\t\t\"Ava,1,6107,40\\n\" +\n\t\t\t\t\"Locator orb,1,6107,50\\n\" +\n\t\t\t\t\"Key piece (Morytania),1,6107,55\\n\" +\n\t\t\t\t\"Start bust,1,6105,25\\n\" +\n\t\t\t\t\"Key piece (Shayzien),1,6105,35\\n\" +\n\t\t\t\t\"Brundt,1,6108,10\\n\" +\n\t\t\t\t\"Torfinn,1,6108,15\\n\" +\n\t\t\t\t\"Start Vorkath,1,6108,25\\n\" +\n\t\t\t\t\"Vorkath,1,6108,30\\n\" +\n\t\t\t\t\"Key piece (Ungael),1,6108,35\\n\" +\n\t\t\t\t\"Mithril door,1,6108,40\\n\" +\n\t\t\t\t\"Dragon heads,1,6108,45\\n\" +\n\t\t\t\t\"Dragon key,1,6104,135\\n\" +\n\t\t\t\t\"Ancient doors,1,6104,140\\n\" +\n\t\t\t\t\"Dallas Jones (Lithkren),1,6104,145\\n\" +\n\t\t\t\t\"Zorgoth,1,6104,150\\n\" +\n\t\t\t\t\"Jardric,1,6104,155\\n\" +\n\t\t\t\t\"King Roald,1,6104,160\\n\" +\n\t\t\t\t\"King Thoros,1,6113,1\\n\" +\n\t\t\t\t\"Chieftan Brundt,1,6114,1\\n\" +\n\t\t\t\t\"Sir Amik Varze,1,6115,1\\n\" +\n\t\t\t\t\"Meeting,1,6104,165\\n\" +\n\t\t\t\t\"Bob,1,6104,170\\n\" +\n\t\t\t\t\"Start assault,1,6104,175\\n\" +\n\t\t\t\t\"Assault,1,6104,180\\n\" +\n\t\t\t\t\"Start agility,1,6104,181\\n\" +\n\t\t\t\t\"Red dragon,1,6104,182\\n\" +\n\t\t\t\t\"Iron dragon,1,6104,183\\n\" +\n\t\t\t\t\"Brutal green dragon,1,6104,184\\n\" +\n\t\t\t\t\"Start final ship,1,6104,185\\n\" +\n\t\t\t\t\"Bob,1,6104,186\\n\" +\n\t\t\t\t\"Green and blue dragons,1,6104,190\\n\" +\n\t\t\t\t\"Start wave 2,1,6104,191\\n\" +\n\t\t\t\t\"Red dragon,1,6104,195\\n\" +\n\t\t\t\t\"Start wave 3,1,6104,196\\n\" +\n\t\t\t\t\"Rune dragon,1,6104,200\\n\" +\n\t\t\t\t\"Start Galvek,1,6104,201\\n\" +\n\t\t\t\t\"Phase 2,1,6099,600\\n\" +\n\t\t\t\t\"Galvek,1,6104,205\\n\" +\n\t\t\t\t\"Bob memorial,1,6104,210\";\n\t}\n}","filePath":"src\\main\\java\\com\\QSRAutoSplitter\\QSRAutoSplitterConfig.java"},{"fileName":"QSRAutoSplitterPanel.java","content":"package com.QSRAutoSplitter;\n\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.PluginPanel;\n\nimport javax.inject.Inject;\nimport javax.swing.*;\nimport javax.swing.border.LineBorder;\nimport java.awt.*;\nimport java.io.BufferedReader;\nimport java.io.InputStreamReader;\nimport java.io.PrintWriter;\nimport java.net.Socket;\n\npublic class QSRAutoSplitterPanel extends PluginPanel\n{\n    private final Client client;\n    private final QSRAutoSplitterConfig config;\n    private final QSRAutoSplitterPlugin splitter;\n    private PrintWriter writer;\n    private BufferedReader reader;\n    private Socket socket;\n    private JLabel status;\n\n    @Inject\n    QSRAutoSplitterPanel(Client client, PrintWriter writer, BufferedReader reader, QSRAutoSplitterConfig config, QSRAutoSplitterPlugin splitter){\n        this.client \u003d client;\n        this.writer \u003d writer;\n        this.reader \u003d reader;\n        this.config \u003d config;\n        this.splitter \u003d splitter;\n    }\n\n    private void connect(){\n        try {\n            socket \u003d new Socket(\"localhost\", config.port());\n            writer \u003d new PrintWriter(socket.getOutputStream());\n            reader \u003d new BufferedReader(new InputStreamReader(socket.getInputStream()));\n            splitter.writer \u003d writer;\n            splitter.reader \u003d reader;\n\n            set_connected();\n\n            if (client.getGameState() \u003d\u003d GameState.LOGGED_IN) {\n                String message \u003d \"Socket started at port \u003ccol\u003dff0000\u003e\" + config.port() + \"\u003c/col\u003e.\";\n                client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", message, null);\n            }\n\n        } catch (Exception e) {\n            if (client.getGameState() \u003d\u003d GameState.LOGGED_IN) {\n                String message \u003d \"Could not start socket, did you start the LiveSplit server?\";\n                client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", message, null);\n            }\n        }\n    }\n\n    public void disconnect(){\n        try {\n            socket.close();\n            set_disconnected();\n\n            if (client.getGameState() \u003d\u003d GameState.LOGGED_IN) {\n                client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"Socket closed.\", null);\n            }\n        } catch (Exception ignored) {}\n    }\n\n    private void control(String cmd){\n        try {\n            writer.write(cmd + \"\\r\\n\");\n            writer.flush();\n        } catch (Exception ignored) { }\n    }\n\n    public void startPanel(){\n        getParent().setLayout(new BorderLayout());\n        getParent().add(this, BorderLayout.CENTER);\n\n        setLayout(new BorderLayout());\n        setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n        setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n        final JPanel layout \u003d new JPanel();\n        BoxLayout boxLayout \u003d new BoxLayout(layout, BoxLayout.Y_AXIS);\n        layout.setLayout(boxLayout);\n        add(layout, BorderLayout.NORTH);\n\n        JPanel statusFrame \u003d new JPanel();\n        statusFrame.setLayout(new GridBagLayout());\n        statusFrame.setBorder(BorderFactory.createTitledBorder(new LineBorder(Color.CYAN), \"Status\"));\n\n        status \u003d new JLabel(\"Not connected\");\n        status.setForeground(Color.RED);\n        statusFrame.add(status);\n\n\n        JPanel connectionFrame \u003d new JPanel();\n        connectionFrame.setLayout(new GridLayout(2, 1));\n        connectionFrame.setBorder(BorderFactory.createTitledBorder(new LineBorder(Color.CYAN), \"Connection\"));\n\n        JButton b_connect \u003d new JButton(\"Connect\");\n        JButton b_disconnect \u003d new JButton(\"Disconnect\");\n        b_connect.setFocusable(false);\n        b_disconnect.setFocusable(false);\n\n        b_connect.addActionListener(e -\u003e connect());\n        b_disconnect.addActionListener(e -\u003e disconnect());\n\n        connectionFrame.add(b_connect);\n        connectionFrame.add(b_disconnect);\n\n\n        JPanel controllerFrame \u003d new JPanel();\n        controllerFrame.setLayout(new GridLayout(6, 1));\n        controllerFrame.setBorder(BorderFactory.createTitledBorder(new LineBorder(Color.CYAN), \"LiveSplit Controller\"));\n\n        JButton[] controllerButtons \u003d {new JButton(\"Split\"), new JButton(\"Reset\"), new JButton(\"Undo split\"),\n                new JButton(\"Skip split\"), new JButton(\"Pause\"), new JButton(\"Resume\")};\n        String[] controls \u003d {\"startorsplit\", \"reset\", \"unsplit\", \"skipsplit\", \"pause\", \"resume\"};\n\n        for (int i \u003d 0; i \u003c controllerButtons.length; i++){\n            int finalI \u003d i; // because lambda forces my hand\n            controllerButtons[i].addActionListener(e -\u003e control(controls[finalI]));\n\n            controllerButtons[i].setFocusable(false);\n            controllerFrame.add(controllerButtons[i], BorderLayout.CENTER);\n        }\n\n        layout.add(statusFrame);\n        layout.add(Box.createRigidArea(new Dimension(0, 15)));\n        layout.add(connectionFrame);\n        layout.add(Box.createRigidArea(new Dimension(0, 15)));\n        layout.add(controllerFrame);\n    }\n\n    public void set_connected(){\n        status.setText(\"Connected\");\n        status.setForeground(Color.GREEN);\n    }\n\n    public void set_disconnected(){\n        status.setText(\"Not connected\");\n        status.setForeground(Color.RED);\n    }\n}","filePath":"src\\main\\java\\com\\QSRAutoSplitter\\QSRAutoSplitterPanel.java"},{"fileName":"QSRAutoSplitterPlugin.java","content":"package com.QSRAutoSplitter;\n\nimport com.google.inject.Provides;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.*;\nimport net.runelite.api.widgets.WidgetInfo;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.util.ImageUtil;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport javax.inject.Inject;\nimport java.awt.image.BufferedImage;\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.PrintWriter;\nimport java.math.BigDecimal;\nimport java.math.RoundingMode;\nimport java.util.*;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"QSR Auto Splitter\",\n\tdescription \u003d \"Sends split signals through LiveSplit server to automatically track splits for quest speedruns\"\n)\npublic class QSRAutoSplitterPlugin extends Plugin\n{\n\tprivate static final Logger logger \u003d LoggerFactory.getLogger(QSRAutoSplitterPlugin.class);\n\n\t// The number of quests completed. If this increases during a run, we\u0027ve completed the quest.\n\tprivate int questsComplete;\n\tprivate int ticks;\n\n\t// The variables to interact with livesplit\n\tPrintWriter writer;\n\tBufferedReader reader;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate QSRAutoSplitterConfig config;\n\n\t@Inject\n\tprivate ClientToolbar clientToolbar;\n\n\t// side panel\n\tprivate NavigationButton navButton;\n\tprivate QSRAutoSplitterPanel panel;\n\n\t// is the timer running?\n\tprivate boolean started \u003d false;\n\tprivate boolean paused \u003d false;\n\n\tprivate List\u003cPair\u003cInteger, Integer\u003e\u003e itemList;\n\tprivate List\u003cPair\u003cInteger, Integer\u003e\u003e varbList;\n\tprivate List\u003cPair\u003cInteger, Integer\u003e\u003e varpList;\n\n\t@Provides\n\tQSRAutoSplitterConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(QSRAutoSplitterConfig.class);\n\t}\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\tfinal BufferedImage icon \u003d ImageUtil.loadImageResource(getClass(), \"/qsr_auto_splitter_icon.png\");\n\t\tpanel \u003d new QSRAutoSplitterPanel(client, writer, reader, config, this);\n\t\tnavButton \u003d NavigationButton.builder().tooltip(\"Quest Speedrunning Auto Splitter\")\n\t\t\t\t.icon(icon).priority(6).panel(panel).build();\n\t\tclientToolbar.addNavigation(navButton);\n\n\t\titemList \u003d new ArrayList\u003c\u003e();\n\t\tvarbList \u003d new ArrayList\u003c\u003e();\n\t\tvarpList \u003d new ArrayList\u003c\u003e();\n\n\t\tpanel.startPanel();\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\tsendMessage(\"pause\");\n\t\titemList \u003d null;\n\t\tvarbList \u003d null;\n\t\tvarpList \u003d null;\n\t\tclientToolbar.removeNavigation(navButton);\n\t\tpanel.disconnect();  // terminates active socket\n\t}\n\n\tprivate void setupSplits(String configStr) {\n\t\titemList \u003d new ArrayList\u003c\u003e();\n\t\tvarbList \u003d new ArrayList\u003c\u003e();\n\t\tvarpList \u003d new ArrayList\u003c\u003e();\n\n\t\tfinal String[] configList \u003d configStr.split(\"\\n\");\n\n\t\tfor (String line : configList) {\n\t\t\tfinal String[] args \u003d line.split(\",\");\n\t\t\tfinal Pair\u003cInteger, Integer\u003e pair;\n\t\t\ttry {\n\t\t\t\tint type \u003d Integer.parseInt(args[1]);\n\t\t\t\tif (type \u003d\u003d 0) {\n\t\t\t\t\tif (args.length \u003c 4) { // default 1 item\n\t\t\t\t\t\tpair \u003d new Pair\u003c\u003e(Integer.parseInt(args[2]), 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpair \u003d new Pair\u003c\u003e(Integer.parseInt(args[2]), Integer.parseInt(args[3]));\n\t\t\t\t\t}\n\t\t\t\t\titemList.add(pair);\n\t\t\t\t} else if (type \u003d\u003d 1) {\n\t\t\t\t\tpair \u003d new Pair\u003c\u003e(Integer.parseInt(args[2]), Integer.parseInt(args[3]));\n\t\t\t\t\tvarbList.add(pair);\n\t\t\t\t} else if (type \u003d\u003d 2) {\n\t\t\t\t\tpair \u003d new Pair\u003c\u003e(Integer.parseInt(args[2]), Integer.parseInt(args[3]));\n\t\t\t\t\tvarpList.add(pair);\n\t\t\t\t} else {\n\t\t\t\t\tclient.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"QSR: could not parse line: \" + line, null);\n\t\t\t\t}\n\t\t\t} catch (Exception e) {\n\t\t\t\tclient.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"QSR: could not parse line: \" + line, null);\n\t\t\t}\n\t\t}\n\t}\n\t@Subscribe\n\tpublic void onGameTick(GameTick event) {\n\t\tif (!started \u0026\u0026 isInSpeedrun()) {\n\t\t\tstarted \u003d true;\n\t\t\tsendMessage(\"reset\");\n\t\t\tsendMessage(\"initgametime\");\n\t\t\tsendMessage(\"starttimer\");\n\n\t\t\tquestsComplete \u003d client.getVarbitValue(QSRID.QUESTS_COMPLETE_COUNTER);\n\t\t\tfinal int currQuest \u003d client.getVarbitValue(QSRID.SPEEDRUN_QUEST_SIGNIFIER);\n\t\t\tfinal String configStr;\n\n\t\t\tswitch (currQuest) {\n\t\t\t\tcase QSRID.CA:   configStr \u003d config.caList();   break;\n\t\t\t\tcase QSRID.DS:   configStr \u003d config.dsList();   break;\n\t\t\t\tcase QSRID.ETC:  configStr \u003d config.etcList();  break;\n\t\t\t\tcase QSRID.PAR:  configStr \u003d config.parList();  break;\n\t\t\t\tcase QSRID.BKF:  configStr \u003d config.bkfList();  break;\n\t\t\t\tcase QSRID.VS:   configStr \u003d config.vsList();   break;\n\t\t\t\tcase QSRID.DSI:  configStr \u003d config.dsiList();  break;\n\t\t\t\tcase QSRID.DSII: configStr \u003d config.dsiiList(); break;\n\t\t\t\tcase QSRID.TOH:  configStr \u003d config.tohList();  break;\n\t\t\t\tcase QSRID.XMS:  configStr \u003d config.xmsList();  break;\n\t\t\t\tcase QSRID.SOTF: configStr \u003d config.sotfList(); break;\n\t\t\t\tcase QSRID.BIM:  configStr \u003d config.bimList();  break;\n\t\t\t\tcase QSRID.AKD:  configStr \u003d config.akdList();  break;\n\t\t\t\tcase QSRID.TOE:  configStr \u003d config.toeList();  break;\n\t\t\t\tcase QSRID.BCS:  configStr \u003d config.bcsList();  break;\n\t\t\t\tdefault:\n\t\t\t\t\tclient.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"QSR: quest not found; plugin needs to be updated\", null);\n\t\t\t\t\tconfigStr \u003d \"\";\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tsetupSplits(configStr);\n\n\t\t} else if (started \u0026\u0026 !isInSpeedrun()) {\n\t\t\tstarted \u003d false;\n\t\t\tsendMessage(\"getcurrenttimerphase\");\n\t\t\tswitch (receiveMessage()) {\n\t\t\t\tcase \"Running\":\n\t\t\t\t\tsendMessage(\"pause\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"NotRunning:\":\n\t\t\t\tcase \"Paused\":\n\t\t\t\tcase \"Ended\":\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onScriptPreFired(ScriptPreFired event) {\n\t\tScriptEvent scriptEvent \u003d event.getScriptEvent();\n\t\t// Filter out the non-server created scripts. Do note that other plugins may call CS2s, such as the quest helper plugin.\n\t\tif (scriptEvent \u003d\u003d null || scriptEvent.getSource() !\u003d null) {\n\t\t\treturn;\n\t\t}\n\t\tfinal Object[] arguments \u003d scriptEvent.getArguments();\n\t\tfinal int scriptId \u003d (int) arguments[0];\n\t\tif (scriptId \u003d\u003d QSRID.SPEEDRUNNING_HELPER_UPDATE)\n\t\t{\n\t\t\tticks \u003d (int) arguments[1];\n\t\t\tsendMessage(\"setgametime \" + ticks*0.6);\n\t\t}\n\t}\n\n\t@Subscribe\n\tprivate void onGameStateChanged(GameStateChanged event) {\n\t\tif (started) {\n\t\t\tif (event.getGameState() \u003d\u003d GameState.LOADING ||\n\t\t\t\t\tevent.getGameState() \u003d\u003d GameState.LOGGED_IN ||\n\t\t\t\t\tevent.getGameState() \u003d\u003d GameState.CONNECTION_LOST) {\n\t\t\t\tif (paused) {\n\t\t\t\t\tsendMessage(\"resume\");\n\t\t\t\t\tpaused \u003d false;\n\t\t\t\t}\n\t\t\t} else if (!paused) {\n\t\t\t\tsendMessage(\"pause\");\n\t\t\t\tpaused \u003d true;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic void completeRun() {\n\t\tstarted \u003d false;\n\t\tsendMessage(\"getcurrenttimerphase\");\n\t\tString msg \u003d receiveMessage();\n\n\t\twhile (!msg.equals(\"ERROR\")) {\n\t\t\tswitch (msg) {\n\t\t\t\tcase \"Running\":\n\t\t\t\t\tsendMessage(\"getsplitindex\");\n\t\t\t\t\tString i \u003d receiveMessage();\n\t\t\t\t\tsendMessage(\"skipsplit\");\n\t\t\t\t\tsendMessage(\"getsplitindex\");\n\t\t\t\t\tString j \u003d receiveMessage();\n\t\t\t\t\tif (i.equals(j)) {\n\t\t\t\t\t\tsplit();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Paused\":\n\t\t\t\t\tsendMessage(\"resume\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Ended\":\n\t\t\t\t\tsendMessage(\"unsplit\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"NotRunning\":\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t\tsendMessage(\"getcurrenttimerphase\");\n\t\t\tmsg \u003d receiveMessage();\n\t\t}\n\n\t}\n\n\t@Subscribe\n\tpublic void onItemContainerChanged(ItemContainerChanged event) {\n\t\tfinal ItemContainer itemContainer \u003d event.getItemContainer();\n\t\tif (itemContainer !\u003d client.getItemContainer(InventoryID.INVENTORY)) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (Pair\u003cInteger, Integer\u003e pair : itemList) {\n\t\t\tif (itemContainer.count(pair.first) \u003e\u003d pair.second) {\n\t\t\t\tsplit();\n\t\t\t\titemList.remove(pair);\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onVarbitChanged(VarbitChanged event) {\n\t\tif (started \u0026\u0026 client.getVarbitValue(QSRID.QUESTS_COMPLETE_COUNTER) \u003e questsComplete) {\n\t\t\tcompleteRun();\n\t\t}\n\n\t\tfor (Pair\u003cInteger, Integer\u003e pair : varbList) {\n\t\t\tif (client.getVarbitValue(pair.first) \u003d\u003d pair.second) {\n\t\t\t\tsplit();\n\t\t\t\tvarbList.remove(pair);\n\t\t\t}\n\t\t}\n\n\t\tfor (Pair\u003cInteger, Integer\u003e pair : varpList) {\n\t\t\tif (client.getVarpValue(pair.first) \u003d\u003d pair.second) {\n\t\t\t\tsplit();\n\t\t\t\tvarpList.remove(pair);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic boolean isInSpeedrun() {\n\t\treturn client.getVarbitValue(QSRID.SPEEDRUN_ACTIVE_SIGNIFIER) \u003d\u003d QSRID.IN_RUN;\n\t}\n\n\tprivate void sendMessage(String message) {\n\t\tif (writer !\u003d null) {\n\t\t\twriter.write(message + \"\\r\\n\");\n\t\t\twriter.flush();\n\t\t}\n\t}\n\n\tprivate String receiveMessage() {\n\t\tif (reader !\u003d null) {\n\t\t\ttry {\n\t\t\t\treturn reader.readLine();\n\t\t\t} catch (IOException e) {\n\t\t\t\treturn \"ERROR\";\n\t\t\t}\n\t\t}\n\t\treturn \"ERROR\";\n\t}\n\n\tpublic void split() {\n\t\tsendMessage(\"pausegametime\");\n\t\tsendMessage(\"setgametime \" + BigDecimal.valueOf((ticks + 1) * 0.6).setScale(1, RoundingMode.HALF_UP));\n\t\tsendMessage(\"split\");\n\t\tsendMessage(\"unpausegametime\");\n\t}\n}\n","filePath":"src\\main\\java\\com\\QSRAutoSplitter\\QSRAutoSplitterPlugin.java"},{"fileName":"QSRID.java","content":"package com.QSRAutoSplitter;\n\nimport net.runelite.api.Quest;\n\npublic final class QSRID {\n\n    public static final int SPEEDRUNNING_HELPER_UPDATE \u003d 5879;\n    public static final int SPEEDRUN_QUEST_SIGNIFIER \u003d 13627;\n    public static final int SPEEDRUN_ACTIVE_SIGNIFIER \u003d 12395;\n    public static final int QUESTS_COMPLETE_COUNTER \u003d 6347;\n    public static final int IN_RUN \u003d 5;\n\n    public static final int CA \u003d 1;\n    public static final int DS \u003d 2;\n    public static final int ETC \u003d 7;\n    public static final int VS \u003d 8;\n    public static final int PAR \u003d 10;\n    public static final int BKF \u003d 12;\n    public static final int DSI \u003d 17;\n    public static final int DSII \u003d 148;\n    public static final int TOH \u003d 150;\n    public static final int XMS \u003d 154;\n    public static final int SOTF \u003d 158;\n    public static final int BIM \u003d 162;\n    public static final int AKD \u003d 164;\n    public static final int TOE \u003d 168;\n    public static final int BCS \u003d 169;\n\n}\n","filePath":"src\\main\\java\\com\\QSRAutoSplitter\\QSRID.java"},{"fileName":"QSRAutoSplitterPluginTest.java","content":"package com.QSRAutoSplitter;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class QSRAutoSplitterPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(QSRAutoSplitterPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\QSRAutoSplitter\\QSRAutoSplitterPluginTest.java"}]},{"commit":"547cda717c69bf740ed1a03e26846bd99b974525","repository":"https://github.com/samszotkowski/runelite-plugins.git","internalName":"slayer-history","files":[{"fileName":"SlayerHistoryLocalStorage.java","content":"package com.slayerhistory.localstorage;\n\nimport com.google.inject.Inject;\nimport java.io.BufferedReader;\nimport java.io.BufferedWriter;\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.io.FileReader;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport static net.runelite.client.RuneLite.RUNELITE_DIR;\nimport net.runelite.http.api.RuneLiteAPI;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\npublic class SlayerHistoryLocalStorage\n{\n\tprivate static final File SLAYER_HISTORY_FOLDER \u003d new File(RUNELITE_DIR, \"slayer-history\");\n\tprivate static final String SLAYER_HISTORY_FILE \u003d \"tasks.log\";\n\tprivate static final Logger log \u003d LoggerFactory.getLogger(SlayerHistoryLocalStorage.class);\n\tprivate File logFile;\n\tprivate String accountFolderName;\n\n\t@Inject\n\tpublic SlayerHistoryLocalStorage()\n\t{\n\t\tSLAYER_HISTORY_FOLDER.mkdir();\n\t}\n\n\tpublic boolean setAccountFolderName(final String folderName)\n\t{\n\t\tif (folderName.equalsIgnoreCase(this.accountFolderName))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tlogFile \u003d new File(SLAYER_HISTORY_FOLDER, folderName);\n\t\tlogFile.mkdir();\n\t\tthis.accountFolderName \u003d folderName;\n\t\treturn true;\n\t}\n\n\tprivate File getFile()\n\t{\n\t\treturn new File(logFile, SLAYER_HISTORY_FILE);\n\t}\n\n\tpublic synchronized ArrayList\u003cSlayerHistoryRecord\u003e loadSlayerHistoryRecords()\n\t{\n\t\tfinal File file \u003d getFile();\n\t\tfinal ArrayList\u003cSlayerHistoryRecord\u003e data \u003d new ArrayList\u003c\u003e();\n\n\t\ttry (final BufferedReader br \u003d new BufferedReader(new FileReader(file)))\n\t\t{\n\t\t\tString line;\n\t\t\twhile ((line \u003d br.readLine()) !\u003d null)\n\t\t\t{\n\t\t\t\tif (line.length() \u003e 0)\n\t\t\t\t{\n\t\t\t\t\tSlayerHistoryRecord r \u003d RuneLiteAPI.GSON.fromJson(line, SlayerHistoryRecord.class);\n\t\t\t\t\tif (!line.contains(\"taskStreak\"))\n\t\t\t\t\t{\n\t\t\t\t\t\tdata.add(new SlayerHistoryRecord(\n\t\t\t\t\t\t\tr.getTaskCompletionTime(),\n\t\t\t\t\t\t\tr.getTaskMaster(),\n\t\t\t\t\t\t\tr.getTaskName(),\n\t\t\t\t\t\t\tr.getTaskQuantity(),\n\t\t\t\t\t\t\tr.isSkipped(),\n\t\t\t\t\t\t\t-1\n\t\t\t\t\t\t));\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tdata.add(r);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (FileNotFoundException e)\n\t\t{\n\t\t\tlog.debug(\"File not found: {}\", file.getName());\n\t\t}\n\t\tcatch (IOException e)\n\t\t{\n\t\t\tlog.warn(\"IOException for file {}: {}\", file.getName(), e.getMessage());\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tpublic synchronized void addSlayerHistoryRecord(SlayerHistoryRecord record)\n\t{\n\t\tfinal File slayerHistoryFile \u003d getFile();\n\t\tfinal String dataAsString \u003d RuneLiteAPI.GSON.toJson(record);\n\t\ttry\n\t\t{\n\t\t\tfinal BufferedWriter file \u003d new BufferedWriter(new FileWriter(String.valueOf(slayerHistoryFile), true));\n\t\t\tfile.append(dataAsString);\n\t\t\tfile.newLine();\n\t\t\tfile.close();\n\t\t\tlog.debug(\"Added new task: {}\", dataAsString);\n\t\t}\n\t\tcatch (IOException e)\n\t\t{\n\t\t\tlog.warn(\"Error writing slayer task data to file {}: {}\", slayerHistoryFile.getName(), e.getMessage());\n\t\t}\n\t}\n}","filePath":"src\\main\\java\\com\\slayerhistory\\localstorage\\SlayerHistoryLocalStorage.java"},{"fileName":"SlayerHistoryRecord.java","content":"package com.slayerhistory.localstorage;\n\nimport lombok.Data;\n\n@Data\npublic class SlayerHistoryRecord\n{\n\tpublic final long taskCompletionTime;\n\tpublic final String taskMaster;\n\tpublic final String taskName;\n\tpublic final int taskQuantity;\n\tpublic final boolean skipped;\n\tpublic final int taskStreak;\n}\n","filePath":"src\\main\\java\\com\\slayerhistory\\localstorage\\SlayerHistoryRecord.java"},{"fileName":"SlayerHistoryConfig.java","content":"package com.slayerhistory;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(SlayerHistoryConfig.CONFIG_GROUP)\npublic interface SlayerHistoryConfig extends Config\n{\n\tString CONFIG_GROUP \u003d \"slayerhistory\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"logTimeFormat\",\n\t\tname \u003d \"Time Format\",\n\t\tdescription \u003d \"Display completion times in 12 or 24 hour time format.\"\n\t)\n\tdefault TimeFormat timeFormatMode()\n\t{\n\t\treturn TimeFormat.TIME_24H;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showSkippedTasks\",\n\t\tname \u003d \"Show skipped tasks\",\n\t\tdescription \u003d \"Show/hide skipped tasks on the side panel.\"\n\t)\n\tdefault boolean showSkippedTasks()\n\t{\n\t\treturn true;\n\t}\n}\n","filePath":"src\\main\\java\\com\\slayerhistory\\SlayerHistoryConfig.java"},{"fileName":"SlayerHistoryPanel.java","content":"package com.slayerhistory;\n\nimport com.google.inject.Inject;\nimport com.slayerhistory.localstorage.SlayerHistoryRecord;\nimport java.awt.BorderLayout;\nimport java.text.SimpleDateFormat;\nimport java.util.ArrayList;\nimport javax.swing.BoxLayout;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.SwingUtilities;\nimport javax.swing.border.EmptyBorder;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.PluginPanel;\n\n@Slf4j\npublic class SlayerHistoryPanel extends PluginPanel\n{\n\tprivate final ArrayList\u003cSlayerHistoryRecordBox\u003e recordBoxes \u003d new ArrayList\u003cSlayerHistoryRecordBox\u003e();\n\tprivate final JPanel recordBoxPanel \u003d new JPanel();\n\tprivate final JLabel tasksLoggedLabel \u003d new JLabel(\"Tasks logged: 0\");\n\tprivate final SlayerHistoryConfig config;\n\tpublic SimpleDateFormat shortTimeFormat \u003d new SimpleDateFormat(\"MMM dd, h:mm a\");\n\tSlayerHistoryPlugin plugin;\n\tprivate final ClientThread clientThread;\n\tprivate final ItemManager itemManager;\n\n\t@Inject\n\tSlayerHistoryPanel(SlayerHistoryPlugin plugin, SlayerHistoryConfig config, ClientThread clientThread, ItemManager itemManager)\n\t{\n\t\tsuper();\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t\tthis.clientThread \u003d clientThread;\n\t\tthis.itemManager \u003d itemManager;\n\t\tsetLayout(new BoxLayout(this, BoxLayout.Y_AXIS));\n\t\tsetBorder(new EmptyBorder(6, 6, 6, 6));\n\t\tsetBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel titlePanel \u003d new JPanel(new BorderLayout());\n\t\ttitlePanel.setBorder(new EmptyBorder(5, 8, 5, 8));\n\t\ttitlePanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\n\t\tJLabel titleLabel \u003d new JLabel(\"Slayer History\");\n\n\t\ttasksLoggedLabel.setBorder(new EmptyBorder(2, 0, 0, 0));\n\t\ttasksLoggedLabel.setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n\t\ttasksLoggedLabel.setFont(FontManager.getRunescapeSmallFont());\n\n\t\ttitlePanel.add(titleLabel, BorderLayout.WEST);\n\t\ttitlePanel.add(tasksLoggedLabel, BorderLayout.EAST);\n\n\t\trecordBoxPanel.setLayout(new BoxLayout(recordBoxPanel, BoxLayout.Y_AXIS));\n\n\t\tadd(titlePanel);\n\t\tadd(recordBoxPanel);\n\n\t\tupdateConfig();\n\t}\n\n\tpublic void clearAllTasksView()\n\t{\n\t\trecordBoxPanel.removeAll();\n\t\trecordBoxes.clear();\n\t\trecordBoxPanel.repaint();\n\t\tupdateTasksLoggedLabel();\n\t}\n\n\tpublic void addRecord(SlayerHistoryRecord record)\n\t{\n\t\tif (config.showSkippedTasks() || !record.isSkipped())\n\t\t{\n\t\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\t\tSlayerHistoryRecordBox recordBox \u003d new SlayerHistoryRecordBox(this, record, clientThread, itemManager);\n\t\t\t\trecordBoxPanel.add(recordBox, 0);\n\t\t\t\trecordBoxes.add(recordBox);\n\t\t\t\tupdateTasksLoggedLabel();\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic void updateConfig()\n\t{\n\t\tif (config.timeFormatMode() \u003d\u003d TimeFormat.TIME_12H)\n\t\t{\n\t\t\tshortTimeFormat \u003d new SimpleDateFormat(\"MMM dd, h:mm a\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tshortTimeFormat \u003d new SimpleDateFormat(\"MMM dd, HH:mm\");\n\t\t}\n\t}\n\n\tpublic void updateAllRecordBoxes()\n\t{\n\t\trecordBoxes.forEach(SlayerHistoryRecordBox::update);\n\t\tupdateTasksLoggedLabel();\n\t}\n\n\tpublic void updateTasksLoggedLabel()\n\t{\n\t\ttasksLoggedLabel.setText(String.format(\"Tasks logged: %,d\", recordBoxes.size()));\n\t}\n}","filePath":"src\\main\\java\\com\\slayerhistory\\SlayerHistoryPanel.java"},{"fileName":"SlayerHistoryPlugin.java","content":"/*\n * Copyright (c) 2017, Tyler \u003chttps://github.com/tylerthardy\u003e\n * Copyright (c) 2018, Shaun Dreclin \u003cshaundreclin@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.slayerhistory;\n\nimport com.google.inject.Inject;\nimport com.google.inject.Provides;\nimport com.slayerhistory.localstorage.SlayerHistoryLocalStorage;\nimport com.slayerhistory.localstorage.SlayerHistoryRecord;\nimport java.awt.image.BufferedImage;\nimport java.time.Instant;\nimport java.util.ArrayList;\nimport java.util.Map;\nimport javax.swing.SwingUtilities;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.api.gameval.DBTableID;\nimport net.runelite.api.gameval.VarPlayerID;\nimport net.runelite.api.gameval.VarbitID;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.config.RuneScapeProfileType;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.util.ImageUtil;\nimport net.runelite.client.util.Text;\n\n@Slf4j\n@PluginDescriptor(name \u003d \"Slayer History\")\npublic class SlayerHistoryPlugin extends Plugin\n{\n\t// https://oldschool.runescape.wiki/w/RuneScape:Varbit/4067\n\tprivate static final Map\u003cInteger, String\u003e SLAYER_MASTERS \u003d Map.of(\n\t\t1, \"Turael/Aya\",\n\t\t2, \"Mazchna/Achtryn\",\n\t\t3, \"Vannaka\",\n\t\t4, \"Chaeldar\",\n\t\t5, \"Duradel/Kuradal\",\n\t\t6, \"Nieve/Steve\",\n\t\t7, \"Krystilia\",\n\t\t8, \"Konar quo Maten\",\n\t\t9, \"Spria\"\n\t);\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate ClientToolbar clientToolbar;\n\n\t@Inject\n\tprivate ItemManager itemManager;\n\n\t@Inject\n\tprivate SlayerHistoryConfig config;\n\n\t@Inject\n\tprivate SlayerHistoryLocalStorage localStorage;\n\n\tprivate SlayerHistoryPanel panel;\n\tprivate NavigationButton navButton;\n\n\tprivate int oldStreak;\n\tprivate int oldWildyStreak;\n\tprivate boolean loggingIn;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tloggingIn \u003d true;\n\n\t\tpanel \u003d new SlayerHistoryPanel(this, config, clientThread, itemManager);\n\n\t\tfinal BufferedImage icon \u003d ImageUtil.loadImageResource(getClass(), \"slayer_history_icon.png\");\n\n\t\tnavButton \u003d NavigationButton.builder()\n\t\t\t.tooltip(\"Slayer History\")\n\t\t\t.icon(icon)\n\t\t\t.panel(panel)\n\t\t\t.priority(7)\n\t\t\t.build();\n\n\t\tclientToolbar.addNavigation(navButton);\n\n\t\tif (client.getAccountHash() !\u003d -1)\n\t\t{\n\t\t\tloadPreviousTasks();\n\t\t}\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tclientToolbar.removeNavigation(navButton);\n\t}\n\n\t@Provides\n\tSlayerHistoryConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(SlayerHistoryConfig.class);\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged configChanged)\n\t{\n\t\tif (!configChanged.getGroup().equals(SlayerHistoryConfig.CONFIG_GROUP))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tpanel.updateConfig();\n\t\tif (configChanged.getKey().equals(\"logTimeFormat\"))\n\t\t{\n\t\t\tSwingUtilities.invokeLater(panel::updateAllRecordBoxes);\n\t\t}\n\t\telse if (configChanged.getKey().equals(\"showSkippedTasks\"))\n\t\t{\n\t\t\tloadPreviousTasks();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged)\n\t{\n\t\tswitch (gameStateChanged.getGameState())\n\t\t{\n\t\t\tcase HOPPING:\n\t\t\tcase LOGGING_IN:\n\t\t\tcase CONNECTION_LOST:\n\t\t\t\tloggingIn \u003d true;\n\t\t\t\tbreak;\n\t\t\tcase LOGGED_IN:\n\t\t\t\tupdateFolderName();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick gameTick)\n\t{\n\t\tloggingIn \u003d false;\n\t}\n\n\t@Subscribe\n\tpublic void onVarbitChanged(VarbitChanged varbitChanged)\n\t{\n\t\tint varpId \u003d varbitChanged.getVarpId();\n\t\tif (!loggingIn \u0026\u0026 varpId \u003d\u003d VarPlayerID.SLAYER_COUNT)\n\t\t{\n\t\t\tclientThread.invokeLater(() -\u003e {\n\t\t\t\tint newStreak \u003d client.getVarbitValue(VarbitID.SLAYER_TASKS_COMPLETED);\n\t\t\t\tint newWildyStreak \u003d client.getVarbitValue(VarbitID.SLAYER_WILDERNESS_TASKS_COMPLETED);\n\n\t\t\t\tif (varbitChanged.getValue() \u003d\u003d 0)\n\t\t\t\t{\n\t\t\t\t\taddTask(newStreak \u003d\u003d oldStreak \u0026\u0026 newWildyStreak \u003d\u003d oldWildyStreak);\n\t\t\t\t}\n\n\t\t\t\toldStreak \u003d newStreak;\n\t\t\t\toldWildyStreak \u003d newWildyStreak;\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate void updateFolderName()\n\t{\n\t\tString folderName \u003d String.valueOf(client.getAccountHash());\n\t\tRuneScapeProfileType profileType \u003d RuneScapeProfileType.getCurrent(client);\n\t\tif (profileType !\u003d RuneScapeProfileType.STANDARD)\n\t\t{\n\t\t\tfolderName +\u003d \"-\" + Text.titleCase(profileType);\n\t\t}\n\n\t\tif (localStorage.setAccountFolderName(folderName))\n\t\t{\n\t\t\tloadPreviousTasks();\n\t\t}\n\t}\n\n\tprivate synchronized void loadPreviousTasks()\n\t{\n\t\tpanel.clearAllTasksView();\n\t\tArrayList\u003cSlayerHistoryRecord\u003e taskHistory \u003d localStorage.loadSlayerHistoryRecords();\n\t\tif (!taskHistory.isEmpty())\n\t\t{\n\t\t\ttaskHistory.forEach(panel::addRecord);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpanel.clearAllTasksView();\n\t\t}\n\t}\n\n\tprivate String getTaskName(int taskId)\n\t{\n\t\tint taskDBRow;\n\t\tif (taskId \u003d\u003d 98 /* Bosses, from [proc,helper_slayer_current_assignment] */)\n\t\t{\n\t\t\tvar bossRows \u003d client.getDBRowsByValue(\n\t\t\t\tDBTableID.SlayerTaskSublist.ID,\n\t\t\t\tDBTableID.SlayerTaskSublist.COL_TASK_SUBTABLE_ID,\n\t\t\t\t0,\n\t\t\t\tclient.getVarbitValue(VarbitID.SLAYER_TARGET_BOSSID));\n\n\t\t\tif (bossRows.isEmpty())\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\ttaskDBRow \u003d (Integer) client.getDBTableField(bossRows.get(0), DBTableID.SlayerTaskSublist.COL_TASK, 0)[0];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar taskRows \u003d client.getDBRowsByValue(DBTableID.SlayerTask.ID, DBTableID.SlayerTask.COL_ID, 0, taskId);\n\t\t\tif (taskRows.isEmpty())\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\ttaskDBRow \u003d taskRows.get(0);\n\t\t}\n\n\t\treturn (String) client.getDBTableField(taskDBRow, DBTableID.SlayerTask.COL_NAME_UPPERCASE, 0)[0];\n\t}\n\n\tprivate void addTask(boolean skipped)\n\t{\n\t\tint taskId \u003d client.getVarpValue(VarPlayerID.SLAYER_TARGET);\n\n\t\tString taskName \u003d getTaskName(taskId);\n\t\tString taskMaster \u003d SLAYER_MASTERS.get(client.getVarbitValue(VarbitID.SLAYER_MASTER));\n\t\tint taskInitialQuantity \u003d client.getVarpValue(VarPlayerID.SLAYER_COUNT_ORIGINAL);\n\n\t\tif (taskName \u003d\u003d null)\n\t\t{\n\t\t\tlog.warn(\"Unable to find task name\");\n\t\t\treturn;\n\t\t}\n\t\tlog.debug(\"{}, {}, {}\", taskName, taskMaster, taskInitialQuantity);\n\n\t\tint streak;\n\t\tif (taskMaster.equals(\"Krystilia\"))\n\t\t{\n\t\t\tstreak \u003d client.getVarbitValue(VarbitID.SLAYER_WILDERNESS_TASKS_COMPLETED);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tstreak \u003d client.getVarbitValue(VarbitID.SLAYER_TASKS_COMPLETED);\n\t\t}\n\n\t\tSlayerHistoryRecord record \u003d new SlayerHistoryRecord(\n\t\t\tInstant.now().toEpochMilli(),\n\t\t\ttaskMaster,\n\t\t\ttaskName,\n\t\t\ttaskInitialQuantity,\n\t\t\tskipped,\n\t\t\tstreak\n\t\t);\n\t\tlocalStorage.addSlayerHistoryRecord(record);\n\t\tpanel.addRecord(record);\n\t}\n}","filePath":"src\\main\\java\\com\\slayerhistory\\SlayerHistoryPlugin.java"},{"fileName":"SlayerHistoryRecordBox.java","content":"package com.slayerhistory;\n\nimport com.google.inject.Inject;\nimport com.slayerhistory.localstorage.SlayerHistoryRecord;\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Component;\nimport java.awt.Dimension;\nimport java.awt.Graphics;\nimport java.awt.image.BufferedImage;\nimport javax.swing.Box;\nimport javax.swing.BoxLayout;\nimport javax.swing.ImageIcon;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\nimport net.runelite.api.Constants;\nimport net.runelite.api.gameval.ItemID;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.util.ImageUtil;\n\npublic class SlayerHistoryRecordBox extends JPanel\n{\n\tprivate static final String DWARF_IMAGE_PATH \u003d \"null.png\";\n\tprivate static final String DWARF_TASK_NAME \u003d \"dwarves\";\n\n\tprivate final SlayerHistoryPanel panel;\n\tprivate final SlayerHistoryRecord record;\n\tprivate final ItemManager itemManager;\n\tprivate final ClientThread clientThread;\n\n\tprivate final JLabel taskNameLabel \u003d new JLabel();\n\tprivate final JLabel taskMasterLabel \u003d new JLabel();\n\tprivate final JLabel taskCompletionTimeLabel \u003d new JLabel();\n\tprivate final JLabel taskIconLabel \u003d new JLabel();\n\tprivate final JLabel taskStreakLabel \u003d new JLabel();\n\n\t@Inject\n\tSlayerHistoryRecordBox(SlayerHistoryPanel panel, SlayerHistoryRecord record, ClientThread clientThread, ItemManager itemManager)\n\t{\n\t\tthis.itemManager \u003d itemManager;\n\t\tthis.clientThread \u003d clientThread;\n\t\tthis.panel \u003d panel;\n\t\tthis.record \u003d record;\n\t\tbuildSlayerHistoryPanel();\n\t}\n\n\tprivate void buildSlayerHistoryPanel()\n\t{\n\t\tthis.setBorder(new EmptyBorder(6, 0, 0, 0)); //spacing between cards\n\t\tthis.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tthis.setLayout(new BorderLayout());\n\n\t\t// image on the left of the card\n\t\tJPanel imageBox \u003d new JPanel();\n\t\timageBox.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\timageBox.setLayout(new BorderLayout());\n\t\timageBox.setBorder(new EmptyBorder(0, 8, 0, 0));\n\t\timageBox.add(taskIconLabel);\n\n\t\t// words on the right of the card\n\t\tJPanel taskInfo \u003d new JPanel();\n\t\ttaskInfo.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\ttaskInfo.setLayout(new BoxLayout(taskInfo, BoxLayout.Y_AXIS));\n\t\ttaskInfo.setBorder(new EmptyBorder(5, 0, 5, 0));\n\n\t\tJPanel taskMasterDateStreakPanel \u003d new JPanel();\n\t\ttaskMasterDateStreakPanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\ttaskMasterDateStreakPanel.setLayout(new BoxLayout(taskMasterDateStreakPanel, BoxLayout.Y_AXIS));\n\n\t\tJPanel dateStreakPanel \u003d new JPanel();\n\t\tdateStreakPanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tdateStreakPanel.setLayout(new BoxLayout(dateStreakPanel, BoxLayout.X_AXIS));\n\t\tdateStreakPanel.setBorder(new EmptyBorder(0, 0, 0, 7));\n\t\ttaskCompletionTimeLabel.setAlignmentX(Component.LEFT_ALIGNMENT);\n\t\ttaskStreakLabel.setAlignmentX(Component.RIGHT_ALIGNMENT);\n\t\tdateStreakPanel.add(taskCompletionTimeLabel);\n\t\tdateStreakPanel.add(Box.createHorizontalGlue());\n\t\tdateStreakPanel.add(taskStreakLabel);\n\n\t\ttaskMasterLabel.setAlignmentX(Component.LEFT_ALIGNMENT);\n\t\tdateStreakPanel.setAlignmentX(Component.LEFT_ALIGNMENT);\n\n\t\ttaskMasterDateStreakPanel.add(taskMasterLabel);\n\t\ttaskMasterDateStreakPanel.add(dateStreakPanel);\n\n\t\ttaskInfo.add(taskNameLabel);\n\t\ttaskInfo.add(taskMasterDateStreakPanel);\n\n\t\tthis.add(imageBox, BorderLayout.WEST);\n\t\tthis.add(taskInfo);\n\n\t\ttaskNameLabel.setFont(FontManager.getRunescapeBoldFont());\n\t\ttaskMasterLabel.setFont(FontManager.getRunescapeSmallFont());\n\t\ttaskCompletionTimeLabel.setFont(FontManager.getRunescapeSmallFont());\n\t\ttaskStreakLabel.setFont(FontManager.getRunescapeSmallFont());\n\n\t\ttaskMasterLabel.setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n\t\ttaskCompletionTimeLabel.setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n\n\t\ttaskIconLabel.setMinimumSize(new Dimension(Constants.ITEM_SPRITE_WIDTH, Constants.ITEM_SPRITE_HEIGHT));\n\n\t\tupdate();\n\t}\n\n\tvoid update()\n\t{\n\t\tif (record.skipped)\n\t\t{\n\t\t\ttaskNameLabel.setForeground(new Color(183, 38, 21));\n\t\t}\n\t\ttaskNameLabel.setText(record.taskName);\n\t\ttaskMasterLabel.setText(record.taskMaster);\n\t\ttaskCompletionTimeLabel.setText(panel.shortTimeFormat.format(record.taskCompletionTime));\n\t\tif (record.taskStreak \u003e -1)\n\t\t{\n\t\t\ttaskStreakLabel.setText(String.format(\"#%,d\", record.taskStreak));\n\t\t}\n\n\t\tclientThread.invokeLater(() -\u003e\n\t\t{\n\t\t\tBufferedImage taskImage \u003d itemManager.getImage(TaskIcon.getItemSpriteId(record.taskName), record.taskQuantity, true);\n\n\t\t\t// custom image just for dwarves. combining with empty item image bc that handles the quantity superscript\n\t\t\tif (record.taskName.equalsIgnoreCase(DWARF_TASK_NAME))\n\t\t\t{\n\t\t\t\tBufferedImage dwarfImage \u003d ImageUtil.loadImageResource(getClass(), DWARF_IMAGE_PATH);\n\t\t\t\tBufferedImage combined \u003d new BufferedImage(taskImage.getWidth(), taskImage.getHeight(), BufferedImage.TYPE_INT_ARGB);\n\n\t\t\t\tint dwarfOffsetX \u003d 2;\n\t\t\t\tint dwarfOffsetY \u003d (taskImage.getHeight() - dwarfImage.getHeight()) / 2;\n\n\t\t\t\tGraphics g \u003d combined.createGraphics();\n\t\t\t\tg.drawImage(dwarfImage, dwarfOffsetX, dwarfOffsetY, null);\n\t\t\t\tg.drawImage(taskImage, 0, 0, null);\n\t\t\t\tg.dispose();\n\n\t\t\t\ttaskIconLabel.setIcon(new ImageIcon(combined));\n\t\t\t}\n\t\t\telse if (record.skipped)\n\t\t\t{\n\t\t\t\tBufferedImage nothingImage \u003d itemManager.getImage(ItemID.BANK_FILLER, record.taskQuantity, true);\n\t\t\t\ttaskIconLabel.setIcon(new ImageIcon(nothingImage));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttaskIconLabel.setIcon(new ImageIcon(taskImage));\n\t\t\t}\n\t\t});\n\t}\n}","filePath":"src\\main\\java\\com\\slayerhistory\\SlayerHistoryRecordBox.java"},{"fileName":"TaskIcon.java","content":"/*\n * Copyright (c) 2017, Tyler \u003chttps://github.com/tylerthardy\u003e\n * Copyright (c) 2018, Shaun Dreclin \u003cshaundreclin@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.slayerhistory;\n\nimport java.util.Map;\nimport net.runelite.api.gameval.ItemID;\n\nclass TaskIcon\n{\n\tprivate static final Map\u003cString, Integer\u003e tasks \u003d Map.\u003cString, Integer\u003eofEntries(\n\t\tMap.entry(\"aberrant spectres\", ItemID.SLAYERGUIDE_ABERRANTSPECTER),\n\t\tMap.entry(\"abyssal demons\", ItemID.SLAYERGUIDE_ABYSSALDEMON),\n\t\tMap.entry(\"the abyssal sire\", ItemID.ABYSSALSIRE_PET),\n\t\tMap.entry(\"the alchemical hydra\", ItemID.HYDRAPET),\n\t\tMap.entry(\"ankou\", ItemID.ANKOU_HEAD),\n\t\tMap.entry(\"araxxor\", ItemID.ARAXXORPET),\n\t\tMap.entry(\"araxytes\", ItemID.POG_SLAYER_DUMMY_ARAXYTES),\n\t\tMap.entry(\"aviansies\", ItemID.ARCEUUS_CORPSE_AVIANSIE_INITIAL),\n\t\tMap.entry(\"bandits\", ItemID.PICKPOCKET_GUIDE_DESERT_BANDIT),\n\t\tMap.entry(\"banshees\", ItemID.SLAYERGUIDE_BANSHEE),\n\t\tMap.entry(\"barrows brothers\", ItemID.BARROWS_KARIL_HEAD),\n\t\tMap.entry(\"basilisks\", ItemID.SLAYERGUIDE_BASILISK),\n\t\tMap.entry(\"bats\", ItemID.RAIDS_BAT2_COOKED),\n\t\tMap.entry(\"bears\", ItemID.ARCEUUS_CORPSE_BEAR_INITIAL),\n\t\tMap.entry(\"birds\", ItemID.FEATHER),\n\t\tMap.entry(\"black demons\", ItemID.BLACK_DEMON_MASK),\n\t\tMap.entry(\"black dragons\", ItemID.DRAGONMASK_BLACK),\n\t\tMap.entry(\"black knights\", ItemID.BLACK_FULL_HELM),\n\t\tMap.entry(\"bloodveld\", ItemID.SLAYERGUIDE_BLOODVELD),\n\t\tMap.entry(\"blue dragons\", ItemID.DRAGONMASK_BLUE),\n\t\tMap.entry(\"brine rats\", ItemID.OLAF2_BRINE_RAT_INV),\n\t\tMap.entry(\"callisto\", ItemID.CALLISTO_PET),\n\t\tMap.entry(\"catablepon\", ItemID.SOS_HALF_SKULL2),\n\t\tMap.entry(\"cave bugs\", ItemID.SWAMP_CAVE_BUG),\n\t\tMap.entry(\"cave crawlers\", ItemID.SLAYERGUIDE_CAVECRAWLER),\n\t\tMap.entry(\"cave horrors\", ItemID.SLAYERGUIDE_HARMLESS_CAVE_HORROR),\n\t\tMap.entry(\"cave kraken\", ItemID.CERT_EADGAR_FADE_TO_BLACK_INV),\n\t\tMap.entry(\"cave slimes\", ItemID.SWAMP_CAVE_SLIME),\n\t\tMap.entry(\"cerberus\", ItemID.HELL_PET),\n\t\tMap.entry(\"chaos druids\", ItemID.ELDERCHAOS_HOOD),\n\t\tMap.entry(\"the chaos elemental\", ItemID.CHAOSELEPET),\n\t\tMap.entry(\"the chaos fanatic\", ItemID.STAFF_OF_ZAROS),\n\t\tMap.entry(\"cockatrice\", ItemID.SLAYERGUIDE_COCKATRICE),\n\t\tMap.entry(\"cows\", ItemID.COW_MASK),\n\t\tMap.entry(\"crabs\", ItemID.HUNDRED_PIRATE_CRAB_SHELL_GAUNTLET),\n\t\tMap.entry(\"crawling hands\", ItemID.SLAYERGUIDE_CRAWLINGHAND),\n\t\tMap.entry(\"crazy archaeologists\", ItemID.FEDORA),\n\t\tMap.entry(\"crocodiles\", ItemID.GREEN_SALAMANDER),\n\t\tMap.entry(\"custodian stalkers\", ItemID.SLAYERGUIDE_CUSTODIAN_STALKER_MATURE),\n\t\tMap.entry(\"dagannoth\", ItemID.POH_DAGGANOTH),\n\t\tMap.entry(\"dagannoth kings\", ItemID.PRIMEPET),\n\t\tMap.entry(\"dark beasts\", ItemID.SLAYERGUIDE_DARK_BEAST),\n\t\tMap.entry(\"dark warriors\", ItemID.BLACK_MED_HELM),\n\t\tMap.entry(\"dogs\", ItemID.POH_GUARD_DOG),\n\t\tMap.entry(\"drakes\", ItemID.SLAYERGUIDE_DRAKE),\n\t\tMap.entry(\"duke sucellus\", ItemID.DUKESUCELLUSPET),\n\t\tMap.entry(\"dust devils\", ItemID.SLAYERGUIDE_DUSTDEVIL),\n\t\tMap.entry(\"dwarves\", ItemID.EMPTY_OBJECT),  // we will load our own image\n\t\tMap.entry(\"earth warriors\", ItemID.BRONZE_FULL_HELM_TRIM),\n\t\tMap.entry(\"elves\", ItemID.PICKPOCKET_GUIDE_WOODELF),\n\t\tMap.entry(\"ents\", ItemID.POH_TREE_2),\n\t\tMap.entry(\"fever spiders\", ItemID.SLAYERGUIDE_FEVER_SPIDER),\n\t\tMap.entry(\"fire giants\", ItemID.RTBRANDAPET),\n\t\tMap.entry(\"fleshcrawlers\", ItemID.ARCEUUS_CORPSE_SCORPION_INITIAL),\n\t\tMap.entry(\"fossil island wyverns\", ItemID.SLAYERGUIDE_FOSSILWYVERN),\n\t\tMap.entry(\"gargoyles\", ItemID.SLAYERGUIDE_GARGOYLE),\n\t\tMap.entry(\"general graardor\", ItemID.BANDOSPET),\n\t\tMap.entry(\"ghosts\", ItemID.AMULET_OF_GHOSTSPEAK),\n\t\tMap.entry(\"ghouls\", ItemID.TRICK_OR_TREAT_HEAD),\n\t\tMap.entry(\"the giant mole\", ItemID.MOLEPET),\n\t\tMap.entry(\"goblins\", ItemID.ARCEUUS_CORPSE_GOBLIN_INITIAL),\n\t\tMap.entry(\"greater demons\", ItemID.GREATER_DEMON_MASK),\n\t\tMap.entry(\"green dragons\", ItemID.DRAGONMASK_GREEN),\n\t\tMap.entry(\"the grotesque guardians\", ItemID.DUSKPET),\n\t\tMap.entry(\"harpie bug swarms\", ItemID.SLAYERGUIDE_SWARM),\n\t\tMap.entry(\"hellhounds\", ItemID.POH_HELLHOUND),\n\t\tMap.entry(\"hill giants\", ItemID.ARCEUUS_CORPSE_GIANT_INITIAL),\n\t\tMap.entry(\"hobgoblins\", ItemID.POH_HOBGOBLIN),\n\t\tMap.entry(\"hydras\", ItemID.SLAYERGUIDE_HYDRA),\n\t\tMap.entry(\"icefiends\", ItemID.FD_ICEDIAMOND),\n\t\tMap.entry(\"ice giants\", ItemID.RTELDRICPET),\n\t\tMap.entry(\"ice warriors\", ItemID.MITHRIL_FULL_HELM_TRIM),\n\t\tMap.entry(\"infernal mages\", ItemID.SLAYERGUIDE_INFERNALMAGE),\n\t\tMap.entry(\"tztok-jad\", ItemID.JAD_PET),\n\t\tMap.entry(\"jellies\", ItemID.SLAYERGUIDE_JELLY),\n\t\tMap.entry(\"jungle horrors\", ItemID.ARCEUUS_CORPSE_HORROR_INITIAL),\n\t\tMap.entry(\"kalphites\", ItemID.POH_KALPHITE_SOLDIER),\n\t\tMap.entry(\"the kalphite queen\", ItemID.KQPET_WALKING),\n\t\tMap.entry(\"killerwatts\", ItemID.SLAYERGUIDE_KILLERWATT),\n\t\tMap.entry(\"the king black dragon\", ItemID.KBDPET),\n\t\tMap.entry(\"the cave kraken boss\", ItemID.KRAKENPET),\n\t\tMap.entry(\"kree\u0027arra\", ItemID.ARMADYLPET),\n\t\tMap.entry(\"k\u0027ril tsutsaroth\", ItemID.ZAMORAKPET),\n\t\tMap.entry(\"kurask\", ItemID.SLAYERGUIDE_KURASK),\n\t\tMap.entry(\"lava dragons\", ItemID.LAVA_SCALE),\n\t\tMap.entry(\"lesser demons\", ItemID.LESSER_DEMON_MASK),\n\t\tMap.entry(\"lesser nagua\", ItemID.SLAYERGUIDE_LESSER_NAGUA),\n\t\tMap.entry(\"lizardmen\", ItemID.LIZARDMAN_FANG),\n\t\tMap.entry(\"lizards\", ItemID.SLAYERGUIDE_LIZARD),\n\t\tMap.entry(\"magic axes\", ItemID.IRON_BATTLEAXE),\n\t\tMap.entry(\"mammoths\", ItemID.BARBASSAULT_ATT_HORN_01),\n\t\tMap.entry(\"metal dragons\", ItemID.POH_STEEL_DRAGON),\n\t\tMap.entry(\"minotaurs\", ItemID.ARCEUUS_CORPSE_MINOTAUR_INITIAL),\n\t\tMap.entry(\"mogres\", ItemID.SLAYERGUIDE_MOGRE),\n\t\tMap.entry(\"molanisks\", ItemID.SLAYERGUIDE_MOLANISK),\n\t\tMap.entry(\"monkeys\", ItemID.ARCEUUS_CORPSE_MONKEY_INITIAL),\n\t\tMap.entry(\"moss giants\", ItemID.MOSSY_KEY),\n\t\tMap.entry(\"mutated zygomites\", ItemID.SLAYER_ZYGOMITE_OBJECT),\n\t\tMap.entry(\"nechryael\", ItemID.SLAYERGUIDE_NECHRYAEL),\n\t\tMap.entry(\"ogres\", ItemID.ARCEUUS_CORPSE_OGRE_INITIAL),\n\t\tMap.entry(\"otherworldly beings\", ItemID.SECRET_GHOST_HAT),\n\t\tMap.entry(\"the phantom muspah\", ItemID.MUSPAHPET),\n\t\tMap.entry(\"pirates\", ItemID.BREW_RED_PIRATE_HAT),\n\t\tMap.entry(\"pyrefiends\", ItemID.SLAYERGUIDE_PYRFIEND),\n\t\tMap.entry(\"rats\", ItemID.RATS_TAIL),\n\t\tMap.entry(\"red dragons\", ItemID.POH_DRAGON),\n\t\tMap.entry(\"revenants\", ItemID.WILD_CAVE_BRACELET_CHARGED),\n\t\tMap.entry(\"rockslugs\", ItemID.SLAYERGUIDE_ROCKSLUG),\n\t\tMap.entry(\"rogues\", ItemID.ROGUESDEN_HELM),\n\t\tMap.entry(\"sarachnis\", ItemID.SARACHNISPET),\n\t\tMap.entry(\"scabarites\", ItemID.NTK_SCARAB_GOLD),\n\t\tMap.entry(\"scorpia\", ItemID.SCORPIA_PET),\n\t\tMap.entry(\"scorpions\", ItemID.ARCEUUS_CORPSE_SCORPION_INITIAL),\n\t\tMap.entry(\"sea snakes\", ItemID.CERT_FISHING_SPOT_ICON_DUMMY),\n\t\tMap.entry(\"shades\", ItemID.BLACKROBETOP),\n\t\tMap.entry(\"shadow warriors\", ItemID.BLACK_FULL_HELM),\n\t\tMap.entry(\"skeletal wyverns\", ItemID.SLAYERGUIDE_SKELETALWYVERN),\n\t\tMap.entry(\"skeletons\", ItemID.POH_SKELETON_GUARD),\n\t\tMap.entry(\"smoke devils\", ItemID.CERT_GUIDE_ICON_DUMMY),\n\t\tMap.entry(\"sourhogs\", ItemID.PORCINE_SOURHOG_TROPHY),\n\t\tMap.entry(\"spiders\", ItemID.POH_SPIDER),\n\t\tMap.entry(\"spiritual creatures\", ItemID.DRAGON_BOOTS),\n\t\tMap.entry(\"suqahs\", ItemID.SUQKA_TOOTH),\n\t\tMap.entry(\"terror dogs\", ItemID.SLAYERGUIDE_TERRORDOG),\n\t\tMap.entry(\"the leviathan\", ItemID.LEVIATHANPET),\n\t\tMap.entry(\"the thermonuclear smoke devil\", ItemID.SMOKEPET),\n\t\tMap.entry(\"the whisperer\", ItemID.WHISPERERPET),\n\t\tMap.entry(\"trolls\", ItemID.POH_TROLL),\n\t\tMap.entry(\"turoth\", ItemID.SLAYERGUIDE_TUROTH),\n\t\tMap.entry(\"tzhaar\", ItemID.ARCEUUS_CORPSE_TZHAAR_INITIAL),\n\t\tMap.entry(\"vampyres\", ItemID.SLAYERGUIDE_VAMPYRE),\n\t\tMap.entry(\"vardorvis\", ItemID.VARDORVISPET),\n\t\tMap.entry(\"venenatis\", ItemID.VENENATIS_PET),\n\t\tMap.entry(\"vet\u0027ion\", ItemID.VETION_PET),\n\t\tMap.entry(\"vorkath\", ItemID.VORKATHPET),\n\t\tMap.entry(\"wall beasts\", ItemID.SWAMP_WALLBEAST),\n\t\tMap.entry(\"warped creatures\", ItemID.POG_SLAYER_DUMMY_WARPED_TERRORBIRD),\n\t\tMap.entry(\"waterfiends\", ItemID.WATER_ORB),\n\t\tMap.entry(\"werewolves\", ItemID.DAGGER_WOLFBANE),\n\t\tMap.entry(\"wolves\", ItemID.GREY_WOLF_FUR),\n\t\tMap.entry(\"wyrms\", ItemID.SLAYERGUIDE_WYRM),\n\t\tMap.entry(\"commander zilyana\", ItemID.SARADOMINPET),\n\t\tMap.entry(\"zombies\", ItemID.TRICK_OR_TREAT_HEAD),\n\t\tMap.entry(\"tzkal-zuk\", ItemID.INFERNOPET_ZUK),\n\t\tMap.entry(\"zulrah\", ItemID.SNAKEPET),\n\t\tMap.entry(\"aquanites\", ItemID.SLAYERGUIDE_AQUANITE),\n\t\tMap.entry(\"gryphons\", ItemID.GRYPHON_FEATHER_5),\n\t\tMap.entry(\"the shellbane gryphon\", ItemID.SLAYERGUIDE_GRYPHON),\n\t\tMap.entry(\"frost dragons\", ItemID.FROST_DRAGON_BONES)\n\t);\n\n\tstatic int getItemSpriteId(String taskName)\n\t{\n\t\treturn tasks.getOrDefault(taskName.toLowerCase(), ItemID.SLAYER_GEM);\n\t}\n}","filePath":"src\\main\\java\\com\\slayerhistory\\TaskIcon.java"},{"fileName":"TimeFormat.java","content":"package com.slayerhistory;\n\nimport lombok.RequiredArgsConstructor;\n\n@RequiredArgsConstructor\npublic enum TimeFormat\n{\n\tTIME_12H(\"12-hour\"),\n\tTIME_24H(\"24-hour\");\n\n\tprivate final String name;\n\n\t@Override\n\tpublic String toString()\n\t{\n\t\treturn this.name;\n\t}\n}","filePath":"src\\main\\java\\com\\slayerhistory\\TimeFormat.java"},{"fileName":"SlayerHistoryPluginTest.java","content":"package com.slayerhistory;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class SlayerHistoryPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(SlayerHistoryPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\slayerhistory\\SlayerHistoryPluginTest.java"}]},{"commit":"9a3f0714c9e0169f9a9cbefcce67c3742a893f30","repository":"https://github.com/Spedwards/runelite-plugins.git","internalName":"calculator","files":[{"fileName":"CalculatorPlugin.java","content":"/*\n * Copyright (c) 2020, Spedwards \u003chttps://github.com/Spedwards\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.thenorsepantheon.calculator;\n\nimport com.thenorsepantheon.calculator.ui.CalculatorPluginPanel;\nimport java.awt.image.BufferedImage;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.util.ImageUtil;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"calculator\",\n\tdescription \u003d \"Adds a calculator panel\",\n\ttags \u003d {\"math\"}\n)\npublic class CalculatorPlugin extends Plugin\n{\n\t@Inject\n\tprivate ClientToolbar clientToolbar;\n\n\tprivate NavigationButton navButton;\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\tlog.info(\"calculator started!\");\n\n\t\tCalculatorPluginPanel panel \u003d new CalculatorPluginPanel();\n\n\t\tfinal BufferedImage icon \u003d ImageUtil.getResourceStreamFromClass(getClass(), \"icon.png\");\n\n\t\tnavButton \u003d NavigationButton.builder()\n\t\t\t.tooltip(\"Calculator\")\n\t\t\t.priority(7)\n\t\t\t.icon(icon)\n\t\t\t.panel(panel)\n\t\t\t.build();\n\n\t\tclientToolbar.addNavigation(navButton);\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\tclientToolbar.removeNavigation(navButton);\n\n\t\tlog.info(\"calculator stopped!\");\n\t}\n\n}\n","filePath":"src\\main\\java\\com\\thenorsepantheon\\calculator\\CalculatorPlugin.java"},{"fileName":"CalculatorButton.java","content":"/*\n * Copyright (c) 2020, Spedwards \u003chttps://github.com/Spedwards\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.thenorsepantheon.calculator.ui;\n\nimport java.awt.Dimension;\nimport java.awt.Font;\nimport javax.swing.Icon;\nimport javax.swing.JButton;\nimport lombok.extern.slf4j.Slf4j;\n\n@Slf4j\npublic class CalculatorButton extends JButton\n{\n\tprivate static final Dimension PREFERRED_SIZE \u003d new Dimension(55, 55);\n\n\tpublic CalculatorButton(String text)\n\t{\n\t\tsuper(text);\n\n\t\tsetPreferredSize(PREFERRED_SIZE);\n\t\t// Use Arial. Zero and Asterisk look funny in \"Runescape Standard\"\n\t\tsetFont(new Font(\"Arial\", Font.BOLD, 20));\n\t}\n\n\tpublic CalculatorButton(Icon icon)\n\t{\n\t\tsuper(icon);\n\n\t\tsetPreferredSize(PREFERRED_SIZE);\n\t}\n}\n","filePath":"src\\main\\java\\com\\thenorsepantheon\\calculator\\ui\\CalculatorButton.java"},{"fileName":"CalculatorPanel.java","content":"/*\n * Copyright (c) 2020, Spedwards \u003chttps://github.com/Spedwards\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.thenorsepantheon.calculator.ui;\n\nimport com.thenorsepantheon.calculator.CalculatorPlugin;\nimport java.awt.Component;\nimport java.awt.GridBagConstraints;\nimport java.awt.GridBagLayout;\nimport java.awt.Insets;\nimport java.awt.image.BufferedImage;\nimport java.util.HashMap;\nimport java.util.Map;\nimport javax.swing.ImageIcon;\nimport javax.swing.JPanel;\nimport net.runelite.client.util.ImageUtil;\nimport org.apache.commons.lang3.StringUtils;\n\npublic class CalculatorPanel extends JPanel\n{\n\tprivate static final ImageIcon PLUS_MINUS_ICON;\n\tprivate static final Insets INSETS_LEFT_BORDER \u003d new Insets(1, 0, 1, 1);\n\tprivate static final Insets INSETS_RIGHT_BORDER \u003d new Insets(1, 1, 1, 0);\n\tprivate static final Insets INSETS \u003d new Insets(1, 1, 1, 1);\n\n\tstatic\n\t{\n\t\tfinal BufferedImage plusMinusIcon \u003d ImageUtil.resizeImage(ImageUtil.getResourceStreamFromClass(CalculatorPlugin.class, \"plus_minus_icon.png\"), 25, 25);\n\t\tPLUS_MINUS_ICON \u003d new ImageIcon(plusMinusIcon);\n\t}\n\n\tprivate final CalculatorPluginPanel panel;\n\tprivate final DisplayField displayField;\n\tprivate final GridBagConstraints c;\n\n\tprotected CalculatorPanel(CalculatorPluginPanel panel)\n\t{\n\t\tsuper();\n\n\t\tthis.panel \u003d panel;\n\t\tthis.displayField \u003d panel.getDisplayField();\n\n\t\tsetLayout(new GridBagLayout());\n\n\t\tc \u003d new GridBagConstraints();\n\t\tc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\tc.gridx \u003d 0;\n\t\tc.gridy \u003d 0;\n\n\t\tCalculatorButton plusMinus \u003d new CalculatorButton(PLUS_MINUS_ICON);\n\n\t\taddButton(\"+\");\n\t\taddButton(\"7\");\n\t\taddButton(\"8\");\n\t\taddButton(\"9\");\n\t\t\n\t\taddButton(\"-\");\n\t\taddButton(\"4\");\n\t\taddButton(\"5\");\n\t\taddButton(\"6\");\n\t\t\n\t\taddButton(\"*\");\n\t\taddButton(\"1\");\n\t\taddButton(\"2\");\n\t\taddButton(\"3\");\n\t\t\n\t\taddButton(\"/\");\n\t\taddButton(\"0\");\n\t\taddComp(plusMinus);\n\t\taddButton(\"\u003d\");\n\n\t\taddButton(\"C\");\n\t\tc.gridwidth \u003d 3;\n\t\taddButton(\"Clear History\");\n\n\t\tplusMinus.addActionListener(e -\u003e\n\t\t{\n\t\t\tif (displayField.isFinished())\n\t\t\t{\n\t\t\t\tdisplayField.reset();\n\t\t\t\tif (displayField.getPreviousResult() !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tdisplayField.setNum1(displayField.getPreviousResult());\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdisplayField.setNum1(0);\n\t\t\t\t}\n\t\t\t\tdisplayField.setNum1(displayField.getNum1() * -1);\n\t\t\t\tdisplayField.setFinished(false);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (displayField.getCalculatorAction() \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tdisplayField.setNum1(displayField.getNum1() * -1);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tInteger num2 \u003d displayField.getNum2();\n\t\t\t\t\tif (num2 \u003d\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tnum2 \u003d 0;\n\t\t\t\t\t}\n\t\t\t\t\tdisplayField.setNum2(num2 * -1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tdisplayField.update();\n\t\t});\n\t}\n\n\tprivate void addButton(String key)\n\t{\n\t\tCalculatorButton btn \u003d new CalculatorButton(key);\n\t\tbtn.addActionListener(e -\u003e\n\t\t{\n\t\t\tString text \u003d btn.getText();\n\t\t\tif (text.equals(\"\u003d\"))\n\t\t\t{\n\t\t\t\tdisplayField.calculateResult();\n\t\t\t\tif (displayField.getResult() \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\t// Divide by 0 error occured\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// Add new calculation to history before the displayField is updated\n\t\t\t\tpanel.getHistoryPanel().addHistoryItem(displayField.getText() + \" \u003d\", displayField.getResult().toString());\n\t\t\t}\n\t\t\telse if (text.equals(\"C\"))\n\t\t\t{\n\t\t\t\tdisplayField.clear();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if (text.equals(\"Clear History\"))\n\t\t\t{\n\t\t\t\tpanel.getHistoryPanel().clearHistory();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if (StringUtils.isNumeric(text))\n\t\t\t{\n\t\t\t\tint num \u003d Integer.parseInt(text);\n\t\t\t\t// Previous calculation has finised. Start again\n\t\t\t\tif (displayField.isFinished())\n\t\t\t\t{\n\t\t\t\t\tdisplayField.reset();\n\t\t\t\t\tdisplayField.setNum1(num);\n\t\t\t\t\tdisplayField.setFinished(false);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t// If there is no action saved, assume we\u0027re working with num1\n\t\t\t\t\tif (displayField.getCalculatorAction() \u003d\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tInteger num1 \u003d displayField.getNum1();\n\t\t\t\t\t\tif (num1 \u003d\u003d 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (displayField.num1IsNegativeZero())\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnum *\u003d -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdisplayField.setNum1(num);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (num1 \u003c 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdisplayField.setNum1(num1 * 10 - num);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdisplayField.setNum1(num1 * 10 + num);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tInteger num2 \u003d displayField.getNum2();\n\t\t\t\t\t\tif (num2 \u003d\u003d null || num2 \u003d\u003d 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (displayField.num2IsNegativeZero())\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnum *\u003d -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdisplayField.setNum2(num);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (num2 \u003c 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdisplayField.setNum2(num2 * 10 - num);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdisplayField.setNum2(num2 * 10 + num);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// If the calculation is finished and there\u0027s a previous result to work from,\n\t\t\t\t// set num1 as the previous result and continue\n\t\t\t\tif (displayField.isFinished() \u0026\u0026 displayField.getPreviousResult() !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tdisplayField.reset();\n\t\t\t\t\tdisplayField.setNum1(displayField.getPreviousResult());\n\t\t\t\t\tdisplayField.setFinished(false);\n\t\t\t\t\tdisplayField.update();\n\t\t\t\t}\n\t\t\t\tif (displayField.getNum1() !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tswitch (text)\n\t\t\t\t\t{\n\t\t\t\t\t\tcase \"+\":\n\t\t\t\t\t\t\tdisplayField.setCalculatorAction(DisplayField.Action.ADDITION);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"-\":\n\t\t\t\t\t\t\tdisplayField.setCalculatorAction(DisplayField.Action.SUBTRACTION);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"*\":\n\t\t\t\t\t\t\tdisplayField.setCalculatorAction(DisplayField.Action.MULTIPLICATION);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"/\":\n\t\t\t\t\t\t\tdisplayField.setCalculatorAction(DisplayField.Action.DIVISION);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdisplayField.setNum2(null);\n\t\t\t}\n\t\t\tdisplayField.update();\n\t\t});\n\t\taddComp(btn);\n\t}\n\n\tprivate void addComp(Component component)\n\t{\n\t\tswitch (c.gridx)\n\t\t{\n\t\t\tcase 0:\n\t\t\t\tc.insets \u003d INSETS_LEFT_BORDER;\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tc.insets \u003d INSETS_RIGHT_BORDER;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tc.insets \u003d INSETS;\n\t\t}\n\t\tif (c.gridwidth \u003d\u003d 3)\n\t\t{\n\t\t\tc.insets \u003d INSETS_RIGHT_BORDER;\n\t\t}\n\t\tadd(component, c);\n\t\tc.gridx \u003d ++c.gridx % 4;\n\t\tc.gridy \u003d c.gridx \u003d\u003d 0 ? ++c.gridy : c.gridy;\n\t}\n}\n","filePath":"src\\main\\java\\com\\thenorsepantheon\\calculator\\ui\\CalculatorPanel.java"},{"fileName":"CalculatorPluginPanel.java","content":"/*\n * Copyright (c) 2020, Spedwards \u003chttps://github.com/Spedwards\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.thenorsepantheon.calculator.ui;\n\nimport java.awt.BorderLayout;\nimport lombok.Getter;\nimport net.runelite.api.Client;\nimport net.runelite.client.ui.PluginPanel;\n\npublic class CalculatorPluginPanel extends PluginPanel\n{\n\tprivate final DisplayPanel displayPanel \u003d new DisplayPanel();\n\t@Getter\n\tprivate final HistoryPanel historyPanel \u003d new HistoryPanel();\n\n\tpublic CalculatorPluginPanel()\n\t{\n\t\tsuper();\n\n\t\tCalculatorPanel calculatorPanel \u003d new CalculatorPanel(this);\n\n\t\tsetLayout(new BorderLayout(5, 5));\n\n\t\tadd(displayPanel, BorderLayout.NORTH);\n\t\tadd(calculatorPanel, BorderLayout.CENTER);\n\t\tadd(historyPanel, BorderLayout.SOUTH);\n\t}\n\n\tprotected DisplayField getDisplayField()\n\t{\n\t\treturn displayPanel.getDisplayField();\n\t}\n}\n","filePath":"src\\main\\java\\com\\thenorsepantheon\\calculator\\ui\\CalculatorPluginPanel.java"},{"fileName":"DisplayField.java","content":"/*\n * Copyright (c) 2020, Spedwards \u003chttps://github.com/Spedwards\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.thenorsepantheon.calculator.ui;\n\nimport javax.swing.JTextField;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\nimport lombok.Getter;\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DisplayField extends JTextField\n{\n\t@AllArgsConstructor\n\t@Getter\n\tprotected enum Action\n\t{\n\t\tADDITION(\"+\"), SUBTRACTION(\"-\"), MULTIPLICATION(\"*\"), DIVISION(\"/\");\n\n\t\tprivate final String character;\n\t}\n\n\tprivate Integer num1;\n\tprivate Integer num2;\n\tprivate Action calculatorAction;\n\tprivate Integer result;\n\tprivate Integer previousResult;\n\tprivate String text;\n\tprivate boolean finished \u003d true;\n\n\tprotected void calculateResult()\n\t{\n\t\tif (num1 \u003d\u003d null || num2 \u003d\u003d null || calculatorAction \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tswitch (calculatorAction)\n\t\t{\n\t\t\tcase ADDITION:\n\t\t\t\tresult \u003d num1 + num2;\n\t\t\t\tbreak;\n\t\t\tcase SUBTRACTION:\n\t\t\t\tresult \u003d num1 - num2;\n\t\t\t\tbreak;\n\t\t\tcase MULTIPLICATION:\n\t\t\t\tresult \u003d num1 * num2;\n\t\t\t\tbreak;\n\t\t\tcase DIVISION:\n\t\t\t\tif (num2 \u003d\u003d 0)\n\t\t\t\t{\n\t\t\t\t\treset();\n\t\t\t\t\tsuper.setText(\"Error: Cannot divide by 0!\");\n\t\t\t\t\tfinished \u003d true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tresult \u003d num1 / num2;\n\t\t\t\tbreak;\n\t\t}\n\t\tpreviousResult \u003d result;\n\t\tfinished \u003d true;\n\t}\n\n\tprotected void reset()\n\t{\n\t\tnum1 \u003d null;\n\t\tnum2 \u003d null;\n\t\tcalculatorAction \u003d null;\n\t\tresult \u003d null;\n\t\ttext \u003d null;\n\t\tupdate();\n\t}\n\n\tprotected void clear()\n\t{\n\t\treset();\n\t\tfinished \u003d true;\n\t\tpreviousResult \u003d null;\n\t}\n\n\tprotected void update()\n\t{\n\t\tif (num1 \u003d\u003d null)\n\t\t{\n\t\t\tthis.text \u003d \"\";\n\t\t}\n\t\telse if (calculatorAction \u003d\u003d null)\n\t\t{\n\t\t\tthis.text \u003d num1.toString();\n\t\t}\n\t\telse if (num2 \u003d\u003d null)\n\t\t{\n\t\t\tthis.text \u003d String.join(\" \", num1.toString(), calculatorAction.getCharacter());\n\t\t}\n\t\telse if (result \u003d\u003d null)\n\t\t{\n\t\t\tthis.text \u003d String.join(\" \", num1.toString(), calculatorAction.getCharacter(), num2.toString());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.text \u003d String.join(\" \",\n\t\t\t\tnum1.toString(), calculatorAction.getCharacter(), num2.toString(), \"\u003d\", result.toString());\n\t\t}\n\t\tsuper.setText(this.text);\n\t\trepaint();\n\t}\n\n\tprotected boolean num1IsNegativeZero()\n\t{\n\t\treturn num1 \u003d\u003d 0 \u0026\u0026 num1.toString().length() \u003d\u003d 2;\n\t}\n\n\tprotected boolean num2IsNegativeZero()\n\t{\n\t\tif (num2 \u003d\u003d null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\treturn num2 \u003d\u003d 0 \u0026\u0026 num2.toString().length() \u003d\u003d 2;\n\t}\n}\n","filePath":"src\\main\\java\\com\\thenorsepantheon\\calculator\\ui\\DisplayField.java"},{"fileName":"DisplayPanel.java","content":"/*\n * Copyright (c) 2020, Spedwards \u003chttps://github.com/Spedwards\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.thenorsepantheon.calculator.ui;\n\nimport java.awt.BorderLayout;\nimport java.awt.Dimension;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\nimport lombok.Getter;\n\npublic class DisplayPanel extends JPanel\n{\n\t@Getter\n\tprivate final DisplayField displayField \u003d new DisplayField();\n\n\tpublic DisplayPanel()\n\t{\n\t\tsuper();\n\n\t\tsetLayout(new BorderLayout(4, 4));\n\t\tsetBorder(new EmptyBorder(0, 1, 0, 1));\n\n\t\tdisplayField.setPreferredSize(new Dimension(228, 50));\n\t\tdisplayField.setMinimumSize(new Dimension(170, 50));\n\t\tdisplayField.setEditable(false);\n\n\t\tadd(displayField, BorderLayout.CENTER);\n\t}\n}\n","filePath":"src\\main\\java\\com\\thenorsepantheon\\calculator\\ui\\DisplayPanel.java"},{"fileName":"HistoryItemPanel.java","content":"/*\n * Copyright (c) 2020, Spedwards \u003chttps://github.com/Spedwards\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.thenorsepantheon.calculator.ui;\n\nimport com.thenorsepantheon.calculator.CalculatorPlugin;\nimport java.awt.BorderLayout;\nimport java.awt.Dimension;\nimport java.awt.Toolkit;\nimport java.awt.datatransfer.Clipboard;\nimport java.awt.datatransfer.StringSelection;\nimport java.awt.image.BufferedImage;\nimport javax.swing.ImageIcon;\nimport javax.swing.JButton;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.border.MatteBorder;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.util.ImageUtil;\n\npublic class HistoryItemPanel extends JPanel\n{\n\tprivate static final ImageIcon CLIPBOARD_ICON;\n\n\tstatic\n\t{\n\t\tfinal BufferedImage clipboardIcon \u003d ImageUtil.resizeImage(ImageUtil.getResourceStreamFromClass(CalculatorPlugin.class, \"clipboard_icon.png\"), 20, 20);\n\t\tCLIPBOARD_ICON \u003d new ImageIcon(clipboardIcon);\n\t}\n\n\tpublic HistoryItemPanel(String line1, String line2)\n\t{\n\t\tsuper();\n\n\t\tsetLayout(new BorderLayout());\n\t\tsetBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tsetBorder(new MatteBorder(0, 5, 0, 0, ColorScheme.BRAND_ORANGE));\n\n\t\tJPanel text \u003d new JPanel(new BorderLayout());\n\t\ttext.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tJLabel lineOneLabel \u003d new JLabel(line1);\n\t\tlineOneLabel.setHorizontalAlignment(JLabel.CENTER);\n\t\tJLabel lineTwoLabel \u003d new JLabel(line2);\n\t\tlineTwoLabel.setHorizontalAlignment(JLabel.CENTER);\n\t\ttext.add(lineOneLabel, BorderLayout.NORTH);\n\t\ttext.add(lineTwoLabel, BorderLayout.SOUTH);\n\n\t\tadd(text, BorderLayout.CENTER);\n\n\t\tJButton copy \u003d new JButton(CLIPBOARD_ICON);\n\t\tcopy.setPreferredSize(new Dimension(40, 40));\n\t\tcopy.setToolTipText(\"Copy result to clipboard\");\n\t\tcopy.addActionListener(e -\u003e\n\t\t{\n\t\t\tStringSelection selection \u003d new StringSelection(line2);\n\t\t\tClipboard clipboard \u003d Toolkit.getDefaultToolkit().getSystemClipboard();\n\t\t\tclipboard.setContents(selection, null);\n\t\t});\n\n\t\tadd(copy, BorderLayout.EAST);\n\t}\n}\n","filePath":"src\\main\\java\\com\\thenorsepantheon\\calculator\\ui\\HistoryItemPanel.java"},{"fileName":"HistoryPanel.java","content":"/*\n * Copyright (c) 2020, Spedwards \u003chttps://github.com/Spedwards\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.thenorsepantheon.calculator.ui;\n\nimport java.awt.GridBagConstraints;\nimport java.awt.GridBagLayout;\nimport java.awt.Insets;\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.swing.JPanel;\n\npublic class HistoryPanel extends JPanel\n{\n\tprivate final List\u003cHistoryItemPanel\u003e itemPanels \u003d new ArrayList\u003c\u003e();\n\tprivate final GridBagConstraints c;\n\n\tpublic HistoryPanel()\n\t{\n\t\tsuper();\n\n\t\tsetLayout(new GridBagLayout());\n\n\t\tc \u003d new GridBagConstraints();\n\t\tc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\tc.gridx \u003d 0;\n\t\tc.gridy \u003d 0;\n\t\tc.weightx \u003d 1;\n\t\tc.weighty \u003d 0;\n\t\tc.insets \u003d new Insets(0, 0, 7, 0);\n\t}\n\n\tprotected void addHistoryItem(String line1, String line2)\n\t{\n\t\t// Herein lies my horrible attempt at creating a new item at the top and pushing everything else down\n\t\t// \\_()_/\n\t\tremoveAll();\n\t\tHistoryItemPanel itemPanel \u003d new HistoryItemPanel(line1, line2);\n\t\titemPanels.add(0, itemPanel);\n\t\tc.gridy \u003d 0;\n\t\titemPanels.forEach(panel -\u003e {\n\t\t\tadd(panel, c, 0);\n\t\t\tc.gridy++;\n\t\t});\n\n\t\trepaint();\n\t\trevalidate();\n\t}\n\n\tprotected void clearHistory()\n\t{\n\t\tremoveAll();\n\t\titemPanels.clear();\n\t\trepaint();\n\t\trevalidate();\n\t}\n}\n","filePath":"src\\main\\java\\com\\thenorsepantheon\\calculator\\ui\\HistoryPanel.java"},{"fileName":"CalculatorPluginTest.java","content":"package com.thenorsepantheon.calculator;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class CalculatorPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(CalculatorPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\thenorsepantheon\\calculator\\CalculatorPluginTest.java"}]},{"commit":"12ade86439c5aebf2064216aea7406982b406010","repository":"https://github.com/ConradicalMel/DataExport.git","internalName":"data-export","files":[{"fileName":"DataExport.java","content":"package com.dataexport;\n\nimport com.dataexport.ui.DataExportPluginPanel;\nimport com.google.gson.Gson;\nimport java.awt.Toolkit;\nimport java.awt.datatransfer.StringSelection;\nimport java.util.ArrayList;\nimport java.util.LinkedHashMap;\nimport java.util.Map;\nimport javax.swing.JOptionPane;\nimport javax.swing.SwingUtilities;\nimport lombok.Getter;\nimport lombok.Setter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.client.game.ItemManager;\n\n@Slf4j\npublic class DataExport\n{\n\tprivate final Client client;\n\n\tprivate final DataExportConfig config;\n\n\tprivate final ItemManager itemManager;\n\n\tint hashAllItems;\n\n\t@Getter\n\t@Setter\n\tprivate Map\u003cInteger, DataExportItem\u003e mapBank;\n\n\t@Getter\n\t@Setter\n\tprivate Map\u003cInteger, DataExportItem\u003e mapSeedVault;\n\n\t@Getter\n\t@Setter\n\tprivate Map\u003cInteger, DataExportItem\u003e mapInventory;\n\n\t@Getter\n\t@Setter\n\tprivate Map\u003cInteger, DataExportItem\u003e mapEquipment;\n\n\t@Getter\n\t@Setter\n\tprivate Map\u003cInteger, DataExportItem\u003e mapSkills;\n\n\t@Getter\n\t@Setter\n\tprivate Map\u003cInteger, DataExportItem\u003e mapItems;\n\n\t@Getter\n\t@Setter\n\tprivate ArrayList\u003cInteger\u003e arrayListItems;\n\n\tprivate DataExportPluginPanel panel;\n\n\tprivate DataExportPlugin plugin;\n\n\tpublic DataExport(Client client, DataExportConfig config, ItemManager itemManager, DataExportPlugin plugin)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.config \u003d config;\n\t\tthis.itemManager \u003d itemManager;\n\t\tthis.plugin \u003d plugin;\n\n\t\thashAllItems \u003d -1;\n\n\t\tmapBank \u003d new LinkedHashMap\u003c\u003e();\n\t\tmapSeedVault \u003d new LinkedHashMap\u003c\u003e();\n\t\tmapInventory \u003d new LinkedHashMap\u003c\u003e();\n\t\tmapEquipment \u003d new LinkedHashMap\u003c\u003e();\n\t\tmapItems \u003d new LinkedHashMap\u003c\u003e();\n\t\tarrayListItems \u003d new ArrayList\u003c\u003e();\n\t}\n\n\tpublic void exportContainer(String container)\n\t{\n\t\tMap\u003cInteger, DataExportItem\u003e map;\n\n\t\tif (container.equals(\"container_all_items\"))\n\t\t{\n\t\t\tmap \u003d mapItems;\n\t\t}\n\t\telse if (container.equals(\"container_bank\"))\n\t\t{\n\t\t\tmap \u003d mapBank;\n\t\t}\n\t\telse if (container.equals(\"container_seed_vault\"))\n\t\t{\n\t\t\tmap \u003d mapSeedVault;\n\t\t}\n\t\telse if (container.equals(\"container_inventory\"))\n\t\t{\n\t\t\tmap \u003d mapInventory;\n\t\t}\n\t\telse if (container.equals(\"container_equipment\"))\n\t\t{\n\t\t\tmap \u003d mapEquipment;\n\t\t}\n\t\telse if (container.equals(\"container_all_items\"))\n\t\t{\n\t\t\tmap \u003d mapItems;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmap \u003d new LinkedHashMap\u003c\u003e();\n\t\t}\n\n\t\tif (map \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tSwingUtilities.invokeLater(() -\u003e\n\t\t{\n\t\t\tfinal Gson gson \u003d new Gson();\n\t\t\tfinal String json \u003d gson.toJson(map.values());\n\t\t\tfinal StringSelection contents \u003d new StringSelection(json);\n\t\t\tToolkit.getDefaultToolkit().getSystemClipboard().setContents(contents, null);\n\t\t\tJOptionPane.showMessageDialog(panel,\n\t\t\t\t\"Container data was copied to clipboard.\",\n\t\t\t\t\"Export Setup Succeeded\",\n\t\t\t\tJOptionPane.PLAIN_MESSAGE);\n\t\t});\n\t}\n\n\tpublic void rebuildSkillArrayList()\n\t{\n\n\t}\n\n\tprivate int getTotalQuantityForItem(int id)\n\t{\n\t\tint total \u003d 0;\n\n\t\tif (mapBank.containsKey(id) \u0026\u0026 mapBank.size() \u003e 1)\n\t\t{\n\t\t\ttotal +\u003d mapBank.get(id).getQuantity();\n\t\t}\n\t\tif (mapSeedVault.containsKey(id) \u0026\u0026 mapSeedVault.size() \u003e 1)\n\t\t{\n\t\t\ttotal +\u003d mapSeedVault.get(id).getQuantity();\n\t\t}\n\t\tif (mapInventory.containsKey(id) \u0026\u0026 mapInventory.size() \u003e 1)\n\t\t{\n\t\t\ttotal +\u003d mapInventory.get(id).getQuantity();\n\t\t}\n\t\tif (mapEquipment.containsKey(id) \u0026\u0026 mapEquipment.size() \u003e 1)\n\t\t{\n\t\t\ttotal +\u003d mapEquipment.get(id).getQuantity();\n\t\t}\n\n\t\treturn total;\n\t}\n\n\tpublic void addItemAll(int id, DataExportItem item)\n\t{\n\t\tDataExportItem item2 \u003d mapItems.get(id);\n\n\t\tif (item2 !\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlog.info(\"Adding to list: \" + item.getName());\n\t\tmapItems.put(id, item);\n\t}\n}\n","filePath":"src\\main\\java\\com\\dataexport\\DataExport.java"},{"fileName":"DataExportConfig.java","content":"package com.dataexport;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"dataexport\")\npublic interface DataExportConfig extends Config\n{\n\t@ConfigItem(\n\t\tkeyName \u003d \"includeBank\",\n\t\tname \u003d \"Include bank\",\n\t\tdescription \u003d \"Include bank in data export\",\n\t\tposition \u003d 1\n\t)\n\tdefault boolean includeBank()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"includeSeedVault\",\n\t\tname \u003d \"Include seed vault\",\n\t\tdescription \u003d \"Include seed vault in data export\",\n\t\tposition \u003d 2\n\t)\n\tdefault boolean includeSeedVault()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"includeInventory\",\n\t\tname \u003d \"Include inventory\",\n\t\tdescription \u003d \"Include inventory in data export\",\n\t\tposition \u003d 3\n\t)\n\tdefault boolean includeInventory()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"includeEquipment\",\n\t\tname \u003d \"Include equipment\",\n\t\tdescription \u003d \"Include equipment in data export\",\n\t\tposition \u003d 4\n\t)\n\tdefault boolean includeEquipment()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"displayExport\",\n\t\tname \u003d \"Include export button\",\n\t\tdescription \u003d \"Include export button for each container in panel\",\n\t\tposition \u003d 5\n\t)\n\tdefault boolean displayExport()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"displayDownload\",\n\t\tname \u003d \"Include download button\",\n\t\tdescription \u003d \"Include download button for each container in panel\",\n\t\tposition \u003d 6\n\t)\n\tdefault boolean displayDownload()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"downloadJSON\",\n\t\tname \u003d \"Download as JSON\",\n\t\tdescription \u003d \"Downloading will result in a JSON for a particular container\",\n\t\tposition \u003d 7\n\t)\n\tdefault boolean downloadJSON()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"downloadCSV\",\n\t\tname \u003d \"Download as CSV\",\n\t\tdescription \u003d \"Downloading will result in a CSV for a particular container\",\n\t\tposition \u003d 8\n\t)\n\tdefault boolean downloadCSV()\n\t{\n\t\treturn false;\n\t}\n\n}\n","filePath":"src\\main\\java\\com\\dataexport\\DataExportConfig.java"},{"fileName":"DataExportItem.java","content":"package com.dataexport;\n\nimport lombok.Getter;\n\npublic class DataExportItem\n{\n\t@Getter\n\tprivate final int id;\n\n\t@Getter\n\tprivate final int quantity;\n\n\t@Getter\n\tprivate final String name;\n\n\tDataExportItem(String name, int quantity, int id)\n\t{\n\t\tthis.id \u003d id;\n\t\tthis.quantity \u003d quantity;\n\t\tthis.name \u003d name;\n\t}\n\n\t@Override\n\tpublic String toString()\n\t{\n\t\treturn name + \" x \" + quantity;\n\t}\n\n\tpublic String getCSV()\n\t{\n\t\treturn id + \",\" + quantity + \",\" + name;\n\t}\n}\n","filePath":"src\\main\\java\\com\\dataexport\\DataExportItem.java"},{"fileName":"DataExportPlugin.java","content":"package com.dataexport;\n\nimport com.dataexport.localstorage.DataWriter;\nimport com.dataexport.ui.DataExportPluginPanel;\nimport com.dataexport.ui.Tab;\nimport com.google.common.collect.ImmutableSet;\nimport com.google.inject.Provides;\nimport java.awt.image.BufferedImage;\nimport java.util.Arrays;\nimport java.util.HashMap;\nimport java.util.LinkedHashMap;\nimport java.util.Map;\nimport java.util.Set;\nimport javax.inject.Inject;\nimport javax.swing.SwingUtilities;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.Item;\nimport net.runelite.api.ItemComposition;\nimport net.runelite.api.ItemContainer;\nimport net.runelite.api.events.ItemContainerChanged;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.game.SkillIconManager;\nimport net.runelite.client.input.KeyManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.util.ImageUtil;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Data Export\"\n)\npublic class DataExportPlugin extends Plugin\n{\n\tprivate static final Set\u003cInteger\u003e CONTAINERS \u003d ImmutableSet.of(InventoryID.BANK.getId(), InventoryID.SEED_VAULT.getId(), InventoryID.INVENTORY.getId(), InventoryID.EQUIPMENT.getId());\n\n\tpublic DataWriter dataWriter;\n\n\tpublic DataExport dataExport;\n\n\tpublic Map\u003cTab, Boolean\u003e visibilityMap \u003d new LinkedHashMap\u003c\u003e();\n\n\tint hashAllItems \u003d -1;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate ClientToolbar clientToolbar;\n\n\t@Inject\n\tprivate ItemManager itemManager;\n\n\t@Inject\n\tprivate SkillIconManager skillIconManager;\n\n\t@Inject\n\tprivate DataExportConfig config;\n\n\t@Inject\n\tprivate KeyManager keyManager;\n\n\tprivate DataExportPluginPanel panel;\n\n\tprivate NavigationButton navButton;\n\n\tprivate int hashBank \u003d -1;\n\n\tprivate int hashSeedVault \u003d -1;\n\n\tprivate int hashInventory \u003d -1;\n\n\tprivate int hashEquipment \u003d -1;\n\n\t//private static final Logger logger \u003d LoggerFactory.getLogger(DataExportPlugin.class);\n\n\tprivate int hashSkills \u003d -1;\n\n\tprivate int lastTick \u003d -1;\n\n\t@Provides\n\tDataExportConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(DataExportConfig.class);\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tlog.debug(\"Data Export started!\");\n\t\tdataExport \u003d new DataExport(client, config, itemManager, this);\n\t\tdataWriter \u003d new DataWriter(config);\n\n\t\tArrays.asList(Tab.CONTAINER_TABS).forEach(t -\u003e\n\t\t{\n\t\t\tvisibilityMap.put(t, true);\n\t\t});\n\n\t\tthis.panel \u003d new DataExportPluginPanel(itemManager, this, config, dataExport);\n\n\t\tfinal BufferedImage icon \u003d ImageUtil.getResourceStreamFromClass(getClass(), \"/data_export_icon.png\");\n\n\t\tnavButton \u003d NavigationButton.builder()\n\t\t\t.tooltip(\"Data Exporter\")\n\t\t\t.icon(icon)\n\t\t\t.priority(6)\n\t\t\t.panel(panel)\n\t\t\t.build();\n\n\t\tclientToolbar.addNavigation(navButton);\n\n\t\tclientThread.invokeLater(() -\u003e\n\t\t{\n\t\t\tswitch (client.getGameState())\n\t\t\t{\n\t\t\t\tcase STARTING:\n\t\t\t\tcase UNKNOWN:\n\t\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tSwingUtilities.invokeLater(() -\u003e\n\t\t\t{\n\t\t\t\tpanel.rebuild();\n\t\t\t});\n\n\t\t\treturn true;\n\t\t});\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tlog.debug(\"Data Export stopped!\");\n\n\t\tclientToolbar.removeNavigation(navButton);\n\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif (!event.getGroup().equals(\"dataexport\"))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tMap\u003cInteger, DataExportItem\u003e mapBlank \u003d new HashMap\u003c\u003e();\n\t\tif (!config.includeBank())\n\t\t{\n\t\t\tdataExport.setMapBank(mapBlank);\n\t\t\tvisibilityMap.put(Tab.BANK, false);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvisibilityMap.put(Tab.BANK, true);\n\t\t}\n\n\t\tif (!config.includeSeedVault())\n\t\t{\n\t\t\tdataExport.setMapSeedVault(mapBlank);\n\t\t\tvisibilityMap.put(Tab.SEED_VAULT, false);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvisibilityMap.put(Tab.SEED_VAULT, true);\n\t\t}\n\n\t\tif (!config.includeInventory())\n\t\t{\n\t\t\tdataExport.setMapInventory(mapBlank);\n\t\t\tvisibilityMap.put(Tab.INVENTORY, false);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvisibilityMap.put(Tab.INVENTORY, true);\n\t\t}\n\n\t\tif (!config.includeEquipment())\n\t\t{\n\t\t\tdataExport.setMapEquipment(mapBlank);\n\t\t\tvisibilityMap.put(Tab.EQUIPMENT, false);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvisibilityMap.put(Tab.EQUIPMENT, true);\n\t\t}\n\n\t\tvisibilityMap.forEach((t, v) -\u003e\n\t\t{\n\t\t\tpanel.setVisibility(t, v);\n\t\t});\n\n\t\tpanel.updateVisibility();\n\t\tpanel.rebuild();\n\t}\n\n\t@Subscribe\n\tpublic void onItemContainerChanged(ItemContainerChanged event)\n\t{\n\t\tint tick \u003d client.getTickCount();\n\t\tif (tick \u003d\u003d lastTick)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tlastTick \u003d tick;\n\n\t\tItemContainer itemContainer \u003d event.getItemContainer();\n\t\tint itemContainerId \u003d event.getContainerId();\n\n\t\tif (itemContainer \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!CONTAINERS.contains(itemContainerId))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfinal Item[] widgetItems \u003d itemContainer.getItems();\n\t\tif (widgetItems \u003d\u003d null || widgetItems.length \u003d\u003d 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tint hash \u003d hashItems(widgetItems);\n\t\t//log.info(\"New hash: \" + hash);\n\n\t\tMap\u003cInteger, DataExportItem\u003e mapContainer \u003d new LinkedHashMap\u003c\u003e();\n\n\t\tfor (Item widgetItem : widgetItems)\n\t\t{\n\t\t\tItemComposition itemComposition \u003d itemManager.getItemComposition(widgetItem.getId());\n\n\t\t\tString name \u003d itemComposition.getName();\n\t\t\tint quantity \u003d widgetItem.getQuantity();\n\t\t\tint id \u003d widgetItem.getId();\n\n\t\t\tif (itemComposition.getPlaceholderTemplateId() !\u003d -1)\n\t\t\t{\n\t\t\t\tquantity \u003d 0;\n\t\t\t}\n\n\t\t\tif (name !\u003d null \u0026\u0026 quantity \u003e 0 \u0026\u0026 id !\u003d -1)\n\t\t\t{\n\t\t\t\tDataExportItem item \u003d new DataExportItem(name, quantity, id);\n\t\t\t\tmapContainer.putIfAbsent(id, item);\n\t\t\t\tdataExport.addItemAll(id, item);\n\t\t\t}\n\t\t}\n\n\t\tif (mapContainer.size() \u003c 2)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (itemContainerId \u003d\u003d InventoryID.BANK.getId() \u0026\u0026 config.includeBank() \u0026\u0026 hash !\u003d hashBank)\n\t\t{\n\t\t\tlog.debug(\"Bank hash: \" + hashBank + \"   -\u003e   \" + hash);\n\t\t\thashBank \u003d hash;\n\t\t\tupdateBankData(mapContainer);\n\t\t}\n\t\telse if (itemContainerId \u003d\u003d InventoryID.SEED_VAULT.getId() \u0026\u0026 config.includeSeedVault() \u0026\u0026 hash !\u003d hashSeedVault)\n\t\t{\n\t\t\tlog.debug(\"Seed vault hash: \" + hashSeedVault + \"   -\u003e   \" + hash);\n\t\t\thashSeedVault \u003d hash;\n\t\t\tupdateSeedVaultData(mapContainer);\n\t\t}\n\t\telse if (itemContainerId \u003d\u003d InventoryID.INVENTORY.getId() \u0026\u0026 config.includeInventory() \u0026\u0026 hash !\u003d hashInventory)\n\t\t{\n\t\t\tlog.debug(\"Inventory hash: \" + hashInventory + \"   -\u003e   \" + hash);\n\t\t\thashInventory \u003d hash;\n\t\t\tupdateInventoryData(mapContainer);\n\t\t}\n\t\telse if (itemContainerId \u003d\u003d InventoryID.EQUIPMENT.getId() \u0026\u0026 config.includeEquipment() \u0026\u0026 hash !\u003d hashEquipment)\n\t\t{\n\t\t\tlog.debug(\"Equipment hash: \" + hashEquipment + \"   -\u003e   \" + hash);\n\t\t\thashEquipment \u003d hash;\n\t\t\tupdateEquipmentData(mapContainer);\n\t\t}\n\t}\n\n\tprivate void updateBankData(Map\u003cInteger, DataExportItem\u003e map)\n\t{\n\t\tdataExport.setMapBank(map);\n\t\tdataWriter.writeJSON(\"container_bank\", map);\n\t\tlog.debug(\"Bank Container Map: {}\", map);\n\n\t\tif (map.size() \u003e 1)\n\t\t{\n\t\t\tpanel.updateTab(\"Bank\", \"Ready\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpanel.updateTab(\"Bank\", \"Visit a bank!\");\n\t\t}\n\t}\n\n\tprivate void updateSeedVaultData(Map\u003cInteger, DataExportItem\u003e map)\n\t{\n\t\tdataExport.setMapSeedVault(map);\n\t\tdataWriter.writeJSON(\"container_seed_vault\", map);\n\t\tlog.debug(\"Seed Vault Container Map: {}\", map);\n\n\t\tif (map.size() \u003e 1)\n\t\t{\n\t\t\tpanel.updateTab(\"Seed Vault\", \"Ready\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpanel.updateTab(\"Seed Vault\", \"Inventory empty\");\n\t\t}\n\t}\n\n\tprivate void updateInventoryData(Map\u003cInteger, DataExportItem\u003e map)\n\t{\n\t\tdataExport.setMapInventory(map);\n\t\tdataWriter.writeJSON(\"container_inventory\", map);\n\t\tlog.debug(\"Inventory Container Map: {}\", map);\n\n\t\tif (map.size() \u003e 1)\n\t\t{\n\t\t\tpanel.updateTab(\"Inventory\", \"Ready\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpanel.updateTab(\"Inventory\", \"No items equipped\");\n\t\t}\n\t}\n\n\tprivate void updateEquipmentData(Map\u003cInteger, DataExportItem\u003e map)\n\t{\n\t\tdataExport.setMapEquipment(map);\n\t\tdataWriter.writeJSON(\"container_equipment\", map);\n\t\tlog.debug(\"Equipment Container Map: {}\", map);\n\n\t\tif (map.size() \u003e 1)\n\t\t{\n\t\t\tpanel.updateTab(\"Equipment\", \"Ready\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpanel.updateTab(\"Equipment\", \"No items equipped\");\n\t\t}\n\t}\n\n\tpublic void exportContainer(String container)\n\t{\n\t\tif (container.equals(\"container_all_items\"))\n\t\t{\n\t\t\tdataExport.exportContainer(container);\n\t\t}\n\t\telse if (container.equals(\"container_bank\"))\n\t\t{\n\t\t\tdataExport.exportContainer(container);\n\t\t}\n\t\telse if (container.equals(\"container_seed_vault\"))\n\t\t{\n\t\t\tdataExport.exportContainer(container);\n\t\t}\n\t\telse if (container.equals(\"container_inventory\"))\n\t\t{\n\t\t\tdataExport.exportContainer(container);\n\t\t}\n\t\telse if (container.equals(\"container_equipment\"))\n\t\t{\n\t\t\tdataExport.exportContainer(container);\n\t\t}\n\t}\n\n\tpublic void downloadContainer(String container)\n\t{\n\t\tif (container.equals(\"container_all_items\"))\n\t\t{\n\t\t\tdataWriter.writeFile(container, dataExport.getMapItems());\n\t\t}\n\t\telse if (container.equals(\"container_bank\"))\n\t\t{\n\t\t\tdataWriter.writeFile(container, dataExport.getMapBank());\n\t\t}\n\t\telse if (container.equals(\"container_seed_vault\"))\n\t\t{\n\t\t\tdataWriter.writeFile(container, dataExport.getMapSeedVault());\n\t\t}\n\t\telse if (container.equals(\"container_inventory\"))\n\t\t{\n\t\t\tdataWriter.writeFile(container, dataExport.getMapInventory());\n\t\t}\n\t\telse if (container.equals(\"container_equipment\"))\n\t\t{\n\t\t\tdataWriter.writeFile(container, dataExport.getMapEquipment());\n\t\t}\n\t}\n\n\tprivate int hashItems(final Item[] items)\n\t{\n\t\tfinal Map\u003cInteger, Integer\u003e mapCheck \u003d new HashMap\u003c\u003e(items.length);\n\t\tfor (Item item : items)\n\t\t{\n\t\t\tmapCheck.put(item.getId(), item.getQuantity());\n\t\t}\n\n\t\treturn mapCheck.hashCode();\n\t}\n}\n","filePath":"src\\main\\java\\com\\dataexport\\DataExportPlugin.java"},{"fileName":"DataExportSkill.java","content":"package com.dataexport;\n\nimport lombok.Getter;\n\npublic class DataExportSkill\n{\n\t@Getter\n\tprivate final String name;\n\n\t@Getter\n\tprivate final int level;\n\n\t@Getter\n\tprivate final int experience;\n\n\tDataExportSkill(String name, int level, int experience)\n\t{\n\t\tthis.name \u003d name;\n\t\tthis.level \u003d level;\n\t\tthis.experience \u003d experience;\n\t}\n}","filePath":"src\\main\\java\\com\\dataexport\\DataExportSkill.java"},{"fileName":"DataWriter.java","content":"package com.dataexport.localstorage;\n\nimport com.dataexport.DataExportConfig;\nimport com.dataexport.DataExportItem;\nimport java.io.BufferedWriter;\nimport java.io.File;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.util.Map;\nimport lombok.extern.slf4j.Slf4j;\nimport static net.runelite.client.RuneLite.RUNELITE_DIR;\nimport net.runelite.http.api.RuneLiteAPI;\n\n@Slf4j\npublic class DataWriter\n{\n\tprivate static final String FILE_EXTENSION_JSON \u003d \".json\";\n\n\tprivate static final String FILE_EXTENSION_CSV \u003d \".csv\";\n\n\tprivate static final File LOOT_RECORD_DIR \u003d new File(RUNELITE_DIR, \"Data Exports\");\n\n\tprivate File playerFolder \u003d LOOT_RECORD_DIR;\n\n\tprivate String name;\n\n\tprivate DataExportConfig config;\n\n\tpublic DataWriter(DataExportConfig config)\n\t{\n\t\tthis.config \u003d config;\n\t\tLOOT_RECORD_DIR.mkdir();\n\t}\n\n\tprivate static String fileNameJSON(final String dataContainerName)\n\t{\n\t\treturn dataContainerName.toLowerCase().trim() + FILE_EXTENSION_JSON;\n\t}\n\n\tprivate static String fileNameCSV(final String dataContainerName)\n\t{\n\t\treturn dataContainerName.toLowerCase().trim() + FILE_EXTENSION_CSV;\n\t}\n\n\tpublic void setPlayerUsername(final String username)\n\t{\n\t\tif (username.equalsIgnoreCase(name))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tplayerFolder \u003d new File(LOOT_RECORD_DIR, username);\n\t\tplayerFolder.mkdir();\n\t\tname \u003d username;\n\t}\n\n\tpublic void writeFile(String dataContainer, Map\u003cInteger, DataExportItem\u003e items)\n\t{\n\t\tif (config.downloadJSON())\n\t\t{\n\t\t\twriteJSON(dataContainer, items);\n\t\t}\n\t\tif (config.downloadCSV())\n\t\t{\n\t\t\twriteCSV(dataContainer, items);\n\t\t}\n\t}\n\n\tpublic synchronized boolean writeJSON(String dataContainer, Map\u003cInteger, DataExportItem\u003e items)\n\t{\n\t\tfinal String fileName \u003d fileNameJSON(dataContainer);\n\t\tfinal File lootFile \u003d new File(playerFolder, fileName);\n\n\t\ttry\n\t\t{\n\t\t\tfinal BufferedWriter file \u003d new BufferedWriter(new FileWriter(String.valueOf(lootFile), false));\n\t\t\tfor (Map.Entry\u003cInteger, DataExportItem\u003e item : items.entrySet())\n\t\t\t{\n\t\t\t\t// Convert entry to JSON\n\t\t\t\tfinal String dataAsString \u003d RuneLiteAPI.GSON.toJson(item.getValue());\n\t\t\t\tfile.append(dataAsString);\n\t\t\t\tfile.newLine();\n\t\t\t}\n\t\t\tfile.close();\n\n\t\t\treturn true;\n\t\t}\n\t\tcatch (IOException ioe)\n\t\t{\n\t\t\tlog.warn(\"Error rewriting data to file {}: {}\", fileName, ioe.getMessage());\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tpublic synchronized boolean writeCSV(String dataContainer, Map\u003cInteger, DataExportItem\u003e items)\n\t{\n\t\tfinal String fileName \u003d fileNameCSV(dataContainer);\n\t\tfinal File lootFile \u003d new File(playerFolder, fileName);\n\n\t\ttry\n\t\t{\n\t\t\tfinal BufferedWriter file \u003d new BufferedWriter(new FileWriter(String.valueOf(lootFile), false));\n\t\t\tfor (Map.Entry\u003cInteger, DataExportItem\u003e item : items.entrySet())\n\t\t\t{\n\t\t\t\t// Convert entry to CSV\n\t\t\t\tfinal String line \u003d item.getValue().getCSV();\n\t\t\t\tfile.append(line);\n\t\t\t\tfile.newLine();\n\t\t\t}\n\t\t\tfile.close();\n\n\t\t\treturn true;\n\t\t}\n\t\tcatch (IOException ioe)\n\t\t{\n\t\t\tlog.warn(\"Error rewriting data to file {}: {}\", fileName, ioe.getMessage());\n\t\t\treturn false;\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\dataexport\\localstorage\\DataWriter.java"},{"fileName":"DataExportPluginPanel.java","content":"package com.dataexport.ui;\n\nimport com.dataexport.DataExport;\nimport com.dataexport.DataExportConfig;\nimport com.dataexport.DataExportPlugin;\nimport java.awt.BorderLayout;\nimport java.awt.GridLayout;\nimport java.util.Arrays;\nimport java.util.LinkedHashMap;\nimport java.util.Map;\nimport javax.swing.BoxLayout;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.PluginPanel;\n\n@Slf4j\npublic class DataExportPluginPanel extends PluginPanel\n{\n\tfinal JPanel wrapperPanel \u003d new JPanel();\n\n\tprivate final ItemManager itemManager;\n\n\tprivate final DataExportPlugin plugin;\n\n\tprivate final DataExportConfig config;\n\n\tprivate final DataExport dataExport;\n\n\tprivate JPanel containerContainer \u003d new JPanel();\n\n\tprivate Map\u003cTab, DataExportTabPanel\u003e containers \u003d new LinkedHashMap\u003c\u003e();\n\n\tpublic DataExportPluginPanel(ItemManager itemManager, DataExportPlugin plugin, DataExportConfig config, DataExport dataExport)\n\t{\n\t\tsuper(true);\n\n\t\tthis.itemManager \u003d itemManager;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t\tthis.dataExport \u003d dataExport;\n\n\t\tsetBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tsetLayout(new BorderLayout());\n\t\tsetBorder(new EmptyBorder(7, 7, 7, 7));\n\n\t\twrapperPanel.setLayout(new BoxLayout(wrapperPanel, BoxLayout.Y_AXIS));\n\t\twrapperPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tcontainerContainer.setLayout(new GridLayout(0, 1, 0, 8));\n\t\tcontainerContainer.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tcontainerContainer.setVisible(true);\n\n\t\tArrays.asList(Tab.CONTAINER_TABS).forEach(t -\u003e\n\t\t{\n\t\t\tDataExportTabPanel p \u003d new DataExportTabPanel(plugin, this, config, dataExport, itemManager, t, t.getName(), t.getFilePrefix(), \"Not ready\");\n\t\t\tcontainers.put(t, p);\n\t\t});\n\n\t\tcontainers.forEach((tab, panel) -\u003e\n\t\t\tcontainerContainer.add(panel));\n\n\t\twrapperPanel.add(containerContainer);\n\n\t\tthis.add(wrapperPanel);\n\n\t\tupdateVisibility();\n\t\trebuild();\n\t}\n\n\tpublic void updateVisibility()\n\t{\n\t\tcontainerContainer.removeAll();\n\n\t\tlog.debug(\"Containers: {}\", containers.values());\n\n\t\tcontainers.forEach((t, p) -\u003e\n\t\t{\n\t\t\tif (p.isVisibility())\n\t\t\t{\n\t\t\t\tcontainerContainer.add(p);\n\t\t\t}\n\t\t});\n\n\t\trebuild();\n\t}\n\n\tpublic void setVisibility(Tab tab, boolean visibility)\n\t{\n\t\tlog.debug(\"Containers: {}\", containers.values());\n\n\t\tMap\u003cTab, DataExportTabPanel\u003e containersTemp \u003d new LinkedHashMap\u003c\u003e();\n\n\t\tcontainers.forEach((t, p) -\u003e\n\t\t{\n\t\t\tif (p.isVisibility() \u0026\u0026 t.getName().compareTo(p.getTitle()) !\u003d 0)\n\t\t\t{\n\t\t\t\tsetVisibility(Tab.ALL_ITEMS, true);\n\t\t\t}\n\t\t\tif (tab.getName().equals(t.getName()))\n\t\t\t{\n\t\t\t\tDataExportTabPanel panel \u003d containers.get(tab);\n\t\t\t\tpanel.setVisibility(visibility);\n\t\t\t\tcontainersTemp.put(t, panel);\n\t\t\t}\n\n\t\t\tcontainersTemp.put(t, p);\n\t\t});\n\n\t\tcontainers \u003d containersTemp;\n\t}\n\n\tpublic void updateTab(String container, String newStatus)\n\t{\n\t\tcontainers.forEach((tab, panel) -\u003e\n\t\t{\n\t\t\tif (panel.getTitle().equals(container))\n\t\t\t{\n\t\t\t\tpanel.updateStatus(newStatus);\n\t\t\t}\n\t\t\tcontainers.put(tab, panel);\n\t\t});\n\n\t\tcontainers.forEach((tab, panel) -\u003e\n\t\t\tcontainerContainer.add(panel));\n\n\t\trebuild();\n\t}\n\n\tpublic void rebuild()\n\t{\n\t\trevalidate();\n\t\trepaint();\n\t}\n}\n","filePath":"src\\main\\java\\com\\dataexport\\ui\\DataExportPluginPanel.java"},{"fileName":"DataExportState.java","content":"package com.dataexport.ui;\n\npublic enum DataExportState\n{\n\tCHANGED,\n\tNOT_CHANGED\n}\n","filePath":"src\\main\\java\\com\\dataexport\\ui\\DataExportState.java"},{"fileName":"DataExportTabPanel.java","content":"package com.dataexport.ui;\n\nimport com.dataexport.DataExport;\nimport com.dataexport.DataExportConfig;\nimport com.dataexport.DataExportPlugin;\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Cursor;\nimport java.awt.Dimension;\nimport java.awt.GridLayout;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport javax.swing.JButton;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\nimport lombok.Getter;\nimport lombok.Setter;\nimport net.runelite.api.Constants;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\n\npublic class DataExportTabPanel extends JPanel\n{\n\tprivate static final Color COLOR \u003d ColorScheme.DARK_GRAY_COLOR;\n\n\tprivate static final Color HOVER_COLOR \u003d ColorScheme.DARKER_GRAY_HOVER_COLOR;\n\n\tprivate final ItemManager itemManager;\n\n\tprivate final DataExportPlugin plugin;\n\n\tprivate final DataExportPluginPanel panel;\n\n\tprivate final DataExportConfig config;\n\n\tprivate final DataExport dataExport;\n\n\t@Getter\n\tpublic String title;\n\n\t@Getter\n\t@Setter\n\tpublic String status;\n\n\t@Getter\n\t@Setter\n\tpublic boolean visibility \u003d true;\n\n\tJLabel readyLabel;\n\n\tJButton buttonExport;\n\n\tJButton buttonDownload;\n\n\tDataExportTabPanel(DataExportPlugin plugin, DataExportPluginPanel panel, DataExportConfig config, DataExport dataExport, ItemManager itemManager, Tab tab, String title, String container, String status)\n\t{\n\t\tthis.plugin \u003d plugin;\n\t\tthis.panel \u003d panel;\n\t\tthis.config \u003d config;\n\t\tthis.dataExport \u003d dataExport;\n\t\tthis.itemManager \u003d itemManager;\n\t\tthis.title \u003d title;\n\t\tthis.status \u003d status;\n\n\t\tsetBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tsetLayout(new BorderLayout());\n\t\tsetBorder(new EmptyBorder(5, 10, 5, 10));\n\n\t\tJPanel panelWrapper \u003d new JPanel(new BorderLayout());\n\t\tpanelWrapper.setLayout(new GridLayout(1, 2));\n\t\tpanelWrapper.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tpanelWrapper.setBorder(new EmptyBorder(5, 10, 5, 10));\n\t\tpanelWrapper.setVisible(true);\n\n\t\tJPanel leftContainer \u003d new JPanel();\n\t\tleftContainer.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tleftContainer.setLayout(new BorderLayout());\n\t\t//leftContainer.setBorder(new EmptyBorder(5, 7, 5, 7));\n\n\t\tJLabel titleLabel \u003d new JLabel(title);\n\t\ttitleLabel.setForeground(Color.WHITE);\n\n\t\tJLabel iconLabel \u003d new JLabel();\n\t\ticonLabel.setMinimumSize(new Dimension(Constants.ITEM_SPRITE_WIDTH, Constants.ITEM_SPRITE_HEIGHT));\n\t\titemManager.getImage(tab.getItemID()).addTo(iconLabel);\n\n\t\tleftContainer.add(titleLabel, BorderLayout.NORTH);\n\t\tleftContainer.add(iconLabel, BorderLayout.SOUTH);\n\n\t\tJPanel rightContainer \u003d new JPanel();\n\t\trightContainer.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\trightContainer.setLayout(new GridLayout(2, 1));\n\t\t//rightContainer.setBorder(new EmptyBorder(5, 10, 5, 10));\n\n\t\treadyLabel \u003d new JLabel(status);\n\t\treadyLabel.setForeground(Color.RED);\n\t\treadyLabel.setFont(FontManager.getRunescapeSmallFont());\n\n\t\tJPanel buttonContainer \u003d new JPanel();\n\t\tbuttonContainer.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tbuttonContainer.setLayout(new GridLayout(1, 2));\n\t\tbuttonContainer.setBorder(new EmptyBorder(5, 10, 5, 10));\n\n\t\tbuttonExport \u003d new JButton();\n\t\tbuttonExport.setText(\"Export\");\n\t\tbuttonExport.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tbuttonExport.setBorder(new EmptyBorder(3, 7, 3, 7));\n\n\t\tbuttonExport.addMouseListener(new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mousePressed(MouseEvent e)\n\t\t\t{\n\t\t\t\tbuttonExport.setBackground(ColorScheme.BRAND_ORANGE);\n\t\t\t\tplugin.exportContainer(container);\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseReleased(MouseEvent e)\n\t\t\t{\n\t\t\t\tbuttonExport.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseEntered(MouseEvent e)\n\t\t\t{\n\t\t\t\tbuttonExport.setBackground(HOVER_COLOR);\n\t\t\t\tsetCursor(new Cursor(Cursor.HAND_CURSOR));\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseExited(MouseEvent e)\n\t\t\t{\n\t\t\t\tbuttonExport.setBackground(COLOR);\n\t\t\t\tsetCursor(new Cursor(Cursor.DEFAULT_CURSOR));\n\t\t\t}\n\t\t});\n\n\t\tbuttonDownload \u003d new JButton();\n\t\tbuttonDownload.setText(\"Download\");\n\t\tbuttonDownload.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tbuttonDownload.setBorder(new EmptyBorder(3, 7, 3, 7));\n\n\t\tbuttonDownload.addMouseListener(new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mousePressed(MouseEvent e)\n\t\t\t{\n\t\t\t\tbuttonDownload.setBackground(ColorScheme.BRAND_ORANGE);\n\t\t\t\tplugin.downloadContainer(container);\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseReleased(MouseEvent e)\n\t\t\t{\n\t\t\t\tbuttonDownload.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseEntered(MouseEvent e)\n\t\t\t{\n\t\t\t\tbuttonDownload.setBackground(HOVER_COLOR);\n\t\t\t\tsetCursor(new Cursor(Cursor.HAND_CURSOR));\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void mouseExited(MouseEvent e)\n\t\t\t{\n\t\t\t\tbuttonDownload.setBackground(COLOR);\n\t\t\t\tsetCursor(new Cursor(Cursor.DEFAULT_CURSOR));\n\t\t\t}\n\t\t});\n\n\t\tbuttonContainer.add(buttonExport);\n\t\tbuttonContainer.add(buttonDownload);\n\n\t\trightContainer.add(readyLabel);\n\t\trightContainer.add(buttonContainer);\n\n\t\tpanelWrapper.add(leftContainer, BorderLayout.WEST);\n\t\tpanelWrapper.add(rightContainer, BorderLayout.CENTER);\n\n\t\tadd(panelWrapper);\n\n\t\tupdateVisibility();\n\t}\n\n\tprivate void updateVisibility()\n\t{\n\t\tif (!config.displayExport())\n\t\t{\n\t\t\tbuttonExport.setVisible(false);\n\t\t}\n\n\t\tif (!config.displayDownload())\n\t\t{\n\t\t\tbuttonDownload.setVisible(false);\n\t\t}\n\t}\n\n\tpublic void updateStatus(String status)\n\t{\n\t\treadyLabel.setText(status);\n\n\t\tif (status.equals(\"Visit a bank!\"))\n\t\t{\n\t\t\treadyLabel.setForeground(Color.RED);\n\t\t}\n\t\telse\n\t\t{\n\t\t\treadyLabel.setForeground(Color.GREEN);\n\t\t}\n\t}\n\n\t@Override\n\tpublic String toString()\n\t{\n\t\treturn title + \", \" + isVisible();\n\t}\n}\n","filePath":"src\\main\\java\\com\\dataexport\\ui\\DataExportTabPanel.java"},{"fileName":"Tab.java","content":"/*\n * Copyright (c) 2018 Abex\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *     list of conditions and the following disclaimer.\n *  2. Redistributions in binary form must reproduce the above copyright notice,\n *     this list of conditions and the following disclaimer in the documentation\n *     and/or other materials provided with the distribution.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n *  ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n *  DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n *  ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n *  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n *  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n *  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n *  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n *  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.dataexport.ui;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.api.ItemID;\n\n@RequiredArgsConstructor\n@Getter\npublic enum Tab\n{\n\tALL_ITEMS(\"All Items\", ItemID.TWISTED_BOW, \"container_all_items\"),\n\tBANK(\"Bank\", ItemID.BANK_KEY, \"container_bank\"),\n\tSEED_VAULT(\"Seed Vault\", ItemID.SEED_PACK, \"container_seed_vault\"),\n\tINVENTORY(\"Inventory\", ItemID.EXPLORER_BACKPACK, \"container_inventory\"),\n\tEQUIPMENT(\"Equipment\", ItemID.ROGUES_EQUIPMENT_CRATE, \"container_equipment\");\n\n\tpublic static final Tab[] CONTAINER_TABS \u003d {ALL_ITEMS, BANK, SEED_VAULT, INVENTORY, EQUIPMENT};\n\n\tprivate final String name;\n\n\tprivate final int itemID;\n\n\tprivate final String filePrefix;\n\n\t@Override\n\tpublic String toString()\n\t{\n\t\treturn name;\n\t}\n}\n","filePath":"src\\main\\java\\com\\dataexport\\ui\\Tab.java"},{"fileName":"DataExportPluginTest.java","content":"package com.dataexport;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class DataExportPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(DataExportPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\dataexport\\DataExportPluginTest.java"}]},{"commit":"777e159b3dfd47cec2438d6b464b52f81858dd8b","repository":"https://github.com/osrs-reldo/tasks-tracker-plugin.git","internalName":"tasks-tracker","files":[{"fileName":"DiaryData.java","content":"package net.reldo.taskstracker.quests;\n\nimport java.util.HashMap;\nimport net.runelite.api.Client;\n\npublic class DiaryData extends HashMap\u003cInteger, Integer\u003e\n{\n\tpublic DiaryData(Client client)\n\t{\n\t\tfor (DiaryVarbits diary : DiaryVarbits.values())\n\t\t{\n\t\t\tthis.put(diary.id, diary.getProgress(client));\n\t\t}\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/quests/DiaryData.java"},{"fileName":"DiaryVarbits.java","content":"package net.reldo.taskstracker.quests;\n\nimport net.runelite.api.Client;\n\npublic enum DiaryVarbits\n{\n\tDIARY_ARDOUGNE_EASY(4458),\n\tDIARY_ARDOUGNE_MEDIUM(4459),\n\tDIARY_ARDOUGNE_HARD(4460),\n\tDIARY_ARDOUGNE_ELITE(4461),\n\tDIARY_DESERT_EASY(4483),\n\tDIARY_DESERT_MEDIUM(4484),\n\tDIARY_DESERT_HARD(4485),\n\tDIARY_DESERT_ELITE(4486),\n\tDIARY_FALADOR_EASY(4462),\n\tDIARY_FALADOR_MEDIUM(4463),\n\tDIARY_FALADOR_HARD(4464),\n\tDIARY_FALADOR_ELITE(4465),\n\tDIARY_FREMENNIK_EASY(4491),\n\tDIARY_FREMENNIK_MEDIUM(4492),\n\tDIARY_FREMENNIK_HARD(4493),\n\tDIARY_FREMENNIK_ELITE(4494),\n\tDIARY_KANDARIN_EASY(4475),\n\tDIARY_KANDARIN_MEDIUM(4476),\n\tDIARY_KANDARIN_HARD(4477),\n\tDIARY_KANDARIN_ELITE(4478),\n\tDIARY_KARAMJA_EASY(3578),\n\tDIARY_KARAMJA_MEDIUM(3599),\n\tDIARY_KARAMJA_HARD(3611),\n\tDIARY_KARAMJA_ELITE(4566),\n\tDIARY_KOUREND_EASY(7925),\n\tDIARY_KOUREND_MEDIUM(7926),\n\tDIARY_KOUREND_HARD(7927),\n\tDIARY_KOUREND_ELITE(7928),\n\tDIARY_LUMBRIDGE_EASY(4495),\n\tDIARY_LUMBRIDGE_MEDIUM(4496),\n\tDIARY_LUMBRIDGE_HARD(4497),\n\tDIARY_LUMBRIDGE_ELITE(4498),\n\tDIARY_MORYTANIA_EASY(4487),\n\tDIARY_MORYTANIA_MEDIUM(4488),\n\tDIARY_MORYTANIA_HARD(4489),\n\tDIARY_MORYTANIA_ELITE(4490),\n\tDIARY_VARROCK_EASY(4479),\n\tDIARY_VARROCK_MEDIUM(4480),\n\tDIARY_VARROCK_HARD(4481),\n\tDIARY_VARROCK_ELITE(4482),\n\tDIARY_WESTERN_EASY(4471),\n\tDIARY_WESTERN_MEDIUM(4472),\n\tDIARY_WESTERN_HARD(4473),\n\tDIARY_WESTERN_ELITE(4474),\n\tDIARY_WILDERNESS_EASY(4466),\n\tDIARY_WILDERNESS_MEDIUM(4467),\n\tDIARY_WILDERNESS_HARD(4468),\n\tDIARY_WILDERNESS_ELITE(4469);\n\n\tpublic int id;\n\n\tDiaryVarbits(int id)\n\t{\n\t\tthis.id \u003d id;\n\t}\n\n\tpublic int getProgress(Client client)\n\t{\n\t\treturn client.getVarbitValue(id);\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/quests/DiaryVarbits.java"},{"fileName":"QuestData.java","content":"package net.reldo.taskstracker.quests;\n\nimport java.util.HashMap;\nimport net.runelite.api.Client;\nimport net.runelite.api.Quest;\nimport net.runelite.api.QuestState;\n\npublic class QuestData extends HashMap\u003cInteger, QuestState\u003e\n{\n\tpublic QuestData(Client client)\n\t{\n\t\tfor (Quest quest : Quest.values())\n\t\t{\n\t\t\tthis.put(quest.getId(), quest.getState(client));\n\t\t}\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/quests/QuestData.java"},{"fileName":"TasksTrackerConfig.java","content":"package net.reldo.taskstracker;\n\nimport net.reldo.taskstracker.config.ConfigValues;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\nimport net.runelite.client.config.Range;\n\n@ConfigGroup(TasksTrackerPlugin.CONFIG_GROUP_NAME)\npublic interface TasksTrackerConfig extends Config\n{\n\n    /*\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n    -- General settings                                                                                              --\n    \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d*/\n\n\t@ConfigSection(\n\t\tname \u003d \"General\",\n\t\tdescription \u003d \"General settings\",\n\t\tposition \u003d 0\n\t)\n\tString generalSettings \u003d \"generalSettings\";\n\n\t@ConfigItem(\n\t\tposition \u003d 10,\n\t\tkeyName \u003d \"untrackUponCompletion\",\n\t\tname \u003d \"Untrack Tasks Upon Completion\",\n\t\tdescription \u003d \"Configures whether completed tasks should also automatically untracked when the task is completed.\",\n\t\tsection \u003d generalSettings\n\t)\n\tdefault boolean untrackUponCompletion()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 11,\n\t\tkeyName \u003d \"filterPanelCollapsible\",\n\t\tname \u003d \"Filter Panels Collapsible\",\n\t\tdescription \u003d \"Shows button that allows filter panels to be hidden.\",\n\t\tsection \u003d generalSettings\n\t)\n\tdefault boolean filterPanelCollapsible()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 12,\n\t\tkeyName \u003d \"saveSubFilterState\", //@todo generalise this to all sub-filters\n\t\tname \u003d \"Save Filter State\",\n\t\tdescription \u003d \"Configures whether the state of area filters should be saved and recalled when switching task type or restarting the plugin.\",\n\t\thidden \u003d true //todo This is hidden because it currently doesn\u0027t do anything\n\t)\n\tdefault boolean saveSubFilterState()\n\t{\n\t\treturn true;\n\t}\n\n\n\t@ConfigSection(\n\t\tname \u003d \"Internal Config\",\n\t\tdescription \u003d \"These settings change the internal behaviour of the plugin. Reset them if any issues occur.\",\n\t\tposition \u003d 10,\n\t\tclosedByDefault \u003d true\n\t)\n\tString internalConfig \u003d \"internalConfig\";\n\n\t@Range(\n\t\tmin \u003d 10\n\t)\n\t@ConfigItem(\n\t\tposition \u003d 13,\n\t\tkeyName \u003d \"taskPanelBatchSize\",\n\t\tname \u003d \"Task Panel Batch Size\",\n\t\tdescription \u003d \"Configures the number of task panels to create in each batch when redrawing the task list panel.\",\n\t\tsection \u003d internalConfig\n\t)\n\tdefault int taskPanelBatchSize()\n\t{\n\t\treturn 50;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 100,\n\t\tkeyName \u003d \"completedFilter\",\n\t\tname \u003d \"Completed Tasks Filter\",\n\t\tdescription \u003d \"Configures whether completed tasks should be displayed.\",\n\t\thidden \u003d true\n\t)\n\tdefault ConfigValues.CompletedFilterValues completedFilter()\n\t{\n\t\treturn ConfigValues.CompletedFilterValues.COMPLETE_AND_INCOMPLETE;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 101,\n\t\tkeyName \u003d \"trackedFilter\",\n\t\tname \u003d \"Tracked Tasks Filter\",\n\t\tdescription \u003d \"Configures whether tracked tasks should be displayed.\",\n\t\thidden \u003d true\n\t)\n\tdefault ConfigValues.TrackedFilterValues trackedFilter()\n\t{\n\t\treturn ConfigValues.TrackedFilterValues.TRACKED_AND_UNTRACKED;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 102,\n\t\tkeyName \u003d \"ignoredFilter\",\n\t\tname \u003d \"Ignored Tasks Filter\",\n\t\tdescription \u003d \"Configures whether ignored tasks should be displayed.\",\n\t\thidden \u003d true\n\t)\n\tdefault ConfigValues.IgnoredFilterValues ignoredFilter()\n\t{\n\t\treturn ConfigValues.IgnoredFilterValues.NOT_IGNORED;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 103,\n\t\tkeyName \u003d \"taskListTab\",\n\t\tname \u003d \"Selected Task List Tab\",\n\t\tdescription \u003d \"Configures the currently selected tab on the task list.\",\n\t\thidden \u003d true\n\t)\n\tdefault ConfigValues.TaskListTabs taskListTab()\n\t{\n\t\treturn ConfigValues.TaskListTabs.TAB_TWO;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 106,\n\t\tkeyName \u003d \"taskTypeJsonName\",\n\t\tname \u003d \"Task Type\",\n\t\tdescription \u003d \"Configures the task type which is displayed in the panel.\",\n\t\thidden \u003d true\n\t)\n\tdefault String taskTypeJsonName()\n\t{\n\t\treturn \"COMBAT\";\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 109,\n\t\tkeyName \u003d \"dropdownFilter\",\n\t\tname \u003d \"Dropdown Filter\",\n\t\tdescription \u003d \"Configures the dropdown to filter tasks on.\",\n\t\thidden \u003d true\n\t)\n\tdefault String dropdownFilter()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 110,\n\t\tkeyName \u003d \"sortCriteria\",\n\t\tname \u003d \"Sort Criteria\",\n\t\tdescription \u003d \"Configures the criteria to sort tasks on.\",\n\t\thidden \u003d true\n\t)\n\tdefault String sortCriteria()\n\t{\n\t\treturn \"Default\";\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 111,\n\t\tkeyName \u003d \"sortDirection\",\n\t\tname \u003d \"Sort Direction\",\n\t\tdescription \u003d \"Configures the direction to sort tasks.\",\n\t\thidden \u003d true\n\t)\n\tdefault ConfigValues.SortDirections sortDirection()\n\t{\n\t\treturn ConfigValues.SortDirections.ASCENDING;\n\t}\n\n    /*\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n    -- Task List Tab settings                                                                                        --\n    \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d*/\n\n    /*\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n    -- Tab 1 settings                                       --\n    \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d*/\n\n\t@ConfigSection(\n\t\tname \u003d \"Task List Tab 1\",\n\t\tdescription \u003d \"Tab 1 settings\",\n\t\tposition \u003d 1\n\t)\n\tString tab1Settings \u003d \"tab1Settings\";\n\n\t@ConfigItem(\n\t\tposition \u003d 1,\n\t\tkeyName \u003d \"tab1Name\",\n\t\tname \u003d \"Name\",\n\t\tdescription \u003d \"The name of the tab. Default: Tracked Tasks\",\n\t\tsection \u003d tab1Settings\n\t)\n\tdefault String tab1Name()\n\t{\n\t\treturn \"Tracked Tasks\";\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 2,\n\t\tkeyName \u003d \"tab1CompletedLock\",\n\t\tname \u003d \"Lock Completed Filter\",\n\t\tdescription \u003d \"Locks the completed tasks filter button to the configured value when tab 1 is selected.\",\n\t\tsection \u003d tab1Settings\n\t)\n\tdefault boolean tab1CompletedLock()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 3,\n\t\tkeyName \u003d \"tab1CompletedValue\",\n\t\tname \u003d \"Completed Filter\",\n\t\tdescription \u003d \"The configured completed tasks filter button value.\",\n\t\tsection \u003d tab1Settings\n\t)\n\tdefault ConfigValues.CompletedFilterValues tab1CompletedValue()\n\t{\n\t\treturn ConfigValues.CompletedFilterValues.INCOMPLETE;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 4,\n\t\tkeyName \u003d \"tab1TrackedLock\",\n\t\tname \u003d \"Lock Tracked Filter\",\n\t\tdescription \u003d \"Locks the tracked tasks filter button to the configured value when tab 1 is selected.\",\n\t\tsection \u003d tab1Settings\n\t)\n\tdefault boolean tab1TrackedLock()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 5,\n\t\tkeyName \u003d \"tab1TrackedValue\",\n\t\tname \u003d \"Tracked Filter\",\n\t\tdescription \u003d \"The configured tracked tasks filter button value.\",\n\t\tsection \u003d tab1Settings\n\t)\n\tdefault ConfigValues.TrackedFilterValues tab1TrackedValue()\n\t{\n\t\treturn ConfigValues.TrackedFilterValues.TRACKED;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 6,\n\t\tkeyName \u003d \"tab1IgnoredLock\",\n\t\tname \u003d \"Lock Ignored Filter\",\n\t\tdescription \u003d \"Locks the ignored tasks filter button to the configured value when tab 1 is selected.\",\n\t\tsection \u003d tab1Settings\n\t)\n\tdefault boolean tab1IgnoredLock()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 7,\n\t\tkeyName \u003d \"tab1IgnoredValue\",\n\t\tname \u003d \"Ignored Filter\",\n\t\tdescription \u003d \"The configured ignored tasks filter button value.\",\n\t\tsection \u003d tab1Settings\n\t)\n\tdefault ConfigValues.IgnoredFilterValues tab1IgnoredValue()\n\t{\n\t\treturn ConfigValues.IgnoredFilterValues.NOT_IGNORED;\n\t}\n\n    /*\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n    -- Tab 2 settings                                       --\n    \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d*/\n\n\t@ConfigSection(\n\t\tname \u003d \"Task List Tab 2\",\n\t\tdescription \u003d \"Tab 2 settings\",\n\t\tposition \u003d 2\n\t)\n\tString tab2Settings \u003d \"tab2Settings\";\n\n\t@ConfigItem(\n\t\tposition \u003d 1,\n\t\tkeyName \u003d \"tab2Name\",\n\t\tname \u003d \"Name\",\n\t\tdescription \u003d \"The name of the tab. Default: Incomplete\",\n\t\tsection \u003d tab2Settings\n\t)\n\tdefault String tab2Name()\n\t{\n\t\treturn \"Incomplete\";\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 2,\n\t\tkeyName \u003d \"tab2CompletedLock\",\n\t\tname \u003d \"Lock Completed Filter\",\n\t\tdescription \u003d \"Locks the completed tasks filter button to the configured value when tab 2 is selected.\",\n\t\tsection \u003d tab2Settings\n\t)\n\tdefault boolean tab2CompletedLock()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 3,\n\t\tkeyName \u003d \"tab2CompletedValue\",\n\t\tname \u003d \"Completed Filter\",\n\t\tdescription \u003d \"The configured completed tasks filter button value.\",\n\t\tsection \u003d tab2Settings\n\t)\n\tdefault ConfigValues.CompletedFilterValues tab2CompletedValue()\n\t{\n\t\treturn ConfigValues.CompletedFilterValues.INCOMPLETE;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 4,\n\t\tkeyName \u003d \"tab2TrackedLock\",\n\t\tname \u003d \"Lock Tracked Filter\",\n\t\tdescription \u003d \"Locks the tracked tasks filter button to the configured value when tab 2 is selected.\",\n\t\tsection \u003d tab2Settings\n\t)\n\tdefault boolean tab2TrackedLock()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 5,\n\t\tkeyName \u003d \"tab2TrackedValue\",\n\t\tname \u003d \"Tracked Filter\",\n\t\tdescription \u003d \"The configured tracked tasks filter button value.\",\n\t\tsection \u003d tab2Settings\n\t)\n\tdefault ConfigValues.TrackedFilterValues tab2TrackedValue()\n\t{\n\t\treturn ConfigValues.TrackedFilterValues.TRACKED_AND_UNTRACKED;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 6,\n\t\tkeyName \u003d \"tab2IgnoredLock\",\n\t\tname \u003d \"Lock Ignored Filter\",\n\t\tdescription \u003d \"Locks the ignored tasks filter button to the configured value when tab 2 is selected.\",\n\t\tsection \u003d tab2Settings\n\t)\n\tdefault boolean tab2IgnoredLock()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 7,\n\t\tkeyName \u003d \"tab2IgnoredValue\",\n\t\tname \u003d \"Ignored Filter\",\n\t\tdescription \u003d \"The configured ignored tasks filter button value.\",\n\t\tsection \u003d tab2Settings\n\t)\n\tdefault ConfigValues.IgnoredFilterValues tab2IgnoredValue()\n\t{\n\t\treturn ConfigValues.IgnoredFilterValues.NOT_IGNORED;\n\t}\n\n    /*\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n    -- Tab 3 settings                                       --\n    \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d*/\n\n\t@ConfigSection(\n\t\tname \u003d \"Task List Tab 3\",\n\t\tdescription \u003d \"Tab 3 settings\",\n\t\tposition \u003d 3\n\t)\n\tString tab3Settings \u003d \"tab3Settings\";\n\n\t@ConfigItem(\n\t\tposition \u003d 1,\n\t\tkeyName \u003d \"tab3Name\",\n\t\tname \u003d \"Name\",\n\t\tdescription \u003d \"The name of the tab. Default: Custom\",\n\t\tsection \u003d tab3Settings\n\t)\n\tdefault String tab3Name()\n\t{\n\t\treturn \"Custom Tab\";\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 2,\n\t\tkeyName \u003d \"tab3CompletedLock\",\n\t\tname \u003d \"Lock Completed Filter\",\n\t\tdescription \u003d \"Locks the completed tasks filter button to the configured value when tab 3 is selected.\",\n\t\tsection \u003d tab3Settings\n\t)\n\tdefault boolean tab3CompletedLock()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 3,\n\t\tkeyName \u003d \"tab3CompletedValue\",\n\t\tname \u003d \"Completed Filter\",\n\t\tdescription \u003d \"The configured completed tasks filter button value.\",\n\t\tsection \u003d tab3Settings\n\t)\n\tdefault ConfigValues.CompletedFilterValues tab3CompletedValue()\n\t{\n\t\treturn ConfigValues.CompletedFilterValues.COMPLETE_AND_INCOMPLETE;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 4,\n\t\tkeyName \u003d \"tab3TrackedLock\",\n\t\tname \u003d \"Lock Tracked Filter\",\n\t\tdescription \u003d \"Locks the tracked tasks filter button to the configured value when tab 3 is selected.\",\n\t\tsection \u003d tab3Settings\n\t)\n\tdefault boolean tab3TrackedLock()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 5,\n\t\tkeyName \u003d \"tab3TrackedValue\",\n\t\tname \u003d \"Tracked Filter\",\n\t\tdescription \u003d \"The configured tracked tasks filter button value.\",\n\t\tsection \u003d tab3Settings\n\t)\n\tdefault ConfigValues.TrackedFilterValues tab3TrackedValue()\n\t{\n\t\treturn ConfigValues.TrackedFilterValues.TRACKED_AND_UNTRACKED;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 6,\n\t\tkeyName \u003d \"tab3IgnoredLock\",\n\t\tname \u003d \"Lock Ignored Filter\",\n\t\tdescription \u003d \"Locks the ignored tasks filter button to the configured value when tab 3 is selected.\",\n\t\tsection \u003d tab3Settings\n\t)\n\tdefault boolean tab3IgnoredLock()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 7,\n\t\tkeyName \u003d \"tab3IgnoredValue\",\n\t\tname \u003d \"Ignored Filter\",\n\t\tdescription \u003d \"The configured ignored tasks filter button value.\",\n\t\tsection \u003d tab3Settings\n\t)\n\tdefault ConfigValues.IgnoredFilterValues tab3IgnoredValue()\n\t{\n\t\treturn ConfigValues.IgnoredFilterValues.IGNORED_AND_NOT_IGNORED;\n\t}\n\n\n}\n","filePath":"src/main/java/net/reldo/taskstracker/TasksTrackerConfig.java"},{"fileName":"LongSerializer.java","content":"package net.reldo.taskstracker.data;\n\nimport com.google.gson.JsonElement;\nimport com.google.gson.JsonPrimitive;\nimport com.google.gson.JsonSerializationContext;\nimport com.google.gson.JsonSerializer;\nimport java.lang.reflect.Type;\nimport java.text.DecimalFormat;\n\npublic class LongSerializer implements JsonSerializer\u003cLong\u003e\n{\n\t@Override\n\tpublic JsonElement serialize(Long value, Type type, JsonSerializationContext jsonSerializationContext)\n\t{\n\t\treturn new JsonPrimitive(new DecimalFormat(\"#\").format(value));\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/data/LongSerializer.java"},{"fileName":"Export.java","content":"package net.reldo.taskstracker.data;\n\nimport com.google.gson.annotations.Expose;\nimport java.time.Instant;\nimport java.util.HashMap;\nimport java.util.List;\nimport lombok.Getter;\nimport net.reldo.taskstracker.data.task.ConfigTaskSave;\nimport net.reldo.taskstracker.data.task.TaskFromStruct;\nimport net.reldo.taskstracker.data.task.TaskType;\nimport net.reldo.taskstracker.quests.DiaryData;\nimport net.reldo.taskstracker.quests.QuestData;\nimport net.runelite.api.Actor;\nimport net.runelite.api.Client;\n\n@Getter\npublic class Export\n{\n\tprivate final Client client;\n\n\t@Expose\n\tprivate final QuestData quests;\n\t@Expose\n\tprivate final DiaryData diaries;\n\t@Expose\n\tprivate String displayName;\n\t@Expose\n\tprivate final int runescapeVersion;\n\t@Expose\n\tprivate final String runeliteVersion;\n\t@Expose\n\tprivate final long timestamp;\n\t@Expose\n\tprivate final String taskType;\n\t@Expose\n\tprivate final HashMap\u003cInteger, Integer\u003e varbits;\n\t@Expose\n\tprivate final HashMap\u003cInteger, Integer\u003e varps;\n\t@Expose\n\tprivate final HashMap\u003cString, ConfigTaskSave\u003e tasks;\n\n\tpublic Export(TaskType taskType, List\u003cTaskFromStruct\u003e tasks, String runeliteVersion, Client client)\n\t{\n\t\tthis.client \u003d client;\n\t\tActor localPlayer \u003d client.getLocalPlayer();\n\t\tif (localPlayer !\u003d null)\n\t\t{\n\t\t\tthis.displayName \u003d localPlayer.getName();\n\t\t}\n\t\tquests \u003d new QuestData(client);\n\t\tdiaries \u003d new DiaryData(client);\n\t\trunescapeVersion \u003d client.getRevision();\n\t\tthis.runeliteVersion \u003d runeliteVersion;\n\t\ttimestamp \u003d Instant.now().toEpochMilli();\n\t\tthis.taskType \u003d taskType.getTaskJsonName();\n\t\tvarbits \u003d getVarbits(taskType);\n\t\tvarps \u003d getVarps(taskType);\n\t\tthis.tasks \u003d getTaskSavesById(tasks);\n\t}\n\n\tprivate HashMap\u003cInteger, Integer\u003e getVarbits(TaskType taskType)\n\t{\n\t\tassert client.isClientThread();\n\n\t\tHashMap\u003cInteger, Integer\u003e varbitValueMap \u003d new HashMap\u003c\u003e();\n\t\tfor (int varbitId : taskType.getVarbits())\n\t\t{\n\t\t\tvarbitValueMap.put(varbitId, client.getVarbitValue(varbitId));\n\t\t}\n\n\t\treturn varbitValueMap;\n\t}\n\n\tpublic HashMap\u003cInteger, Integer\u003e getVarps(TaskType taskType)\n\t{\n\t\tassert client.isClientThread();\n\n\t\tHashMap\u003cInteger, Integer\u003e varpValueMap \u003d new HashMap\u003c\u003e();\n\t\tfor (int varpId : taskType.getTaskVarps())\n\t\t{\n\t\t\tvarpValueMap.put(varpId, client.getVarpValue(varpId));\n\t\t}\n\t\tfor (int varpId : taskType.getOtherVarps())\n\t\t{\n\t\t\tvarpValueMap.put(varpId, client.getVarpValue(varpId));\n\t\t}\n\n\t\treturn varpValueMap;\n\t}\n\n\tpublic HashMap\u003cString, ConfigTaskSave\u003e getTaskSavesById(List\u003cTaskFromStruct\u003e tasks)\n\t{\n\t\tHashMap\u003cString, ConfigTaskSave\u003e taskSavesById \u003d new HashMap\u003c\u003e();\n\t\tfor (TaskFromStruct task : tasks)\n\t\t{\n\t\t\tif (task.getCompletedOn() \u003d\u003d 0 \u0026\u0026 task.getIgnoredOn() \u003d\u003d 0 \u0026\u0026 task.getTrackedOn() \u003d\u003d 0)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\ttaskSavesById.put(String.valueOf(task.getIntParam(\"id\")), task.getSaveData());\n\t\t}\n\t\treturn taskSavesById;\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/data/Export.java"},{"fileName":"ReldoTaskSave.java","content":"package net.reldo.taskstracker.data.reldo;\n\nimport lombok.Data;\n\n@Data\npublic class ReldoTaskSave\n{\n\tlong completed;\n\tlong todo;\n\tlong ignored;\n\tint order;\n\tString notes;\n\tlong lastUpdated;\n}\n","filePath":"src/main/java/net/reldo/taskstracker/data/reldo/ReldoTaskSave.java"},{"fileName":"ReldoImport.java","content":"package net.reldo.taskstracker.data.reldo;\n\nimport java.util.HashMap;\nimport lombok.Data;\n\n@Data\npublic class ReldoImport\n{\n\tpublic String taskTypeName;\n\tpublic int version;\n\tpublic String rsn;\n\tprivate HashMap\u003cInteger, ReldoTaskSave\u003e tasks;\n}\n","filePath":"src/main/java/net/reldo/taskstracker/data/reldo/ReldoImport.java"},{"fileName":"FilterDataClient.java","content":"package net.reldo.taskstracker.data.jsondatastore;\n\nimport com.google.gson.Gson;\nimport com.google.gson.reflect.TypeToken;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.lang.reflect.Type;\nimport java.nio.charset.StandardCharsets;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport lombok.extern.slf4j.Slf4j;\nimport net.reldo.taskstracker.data.jsondatastore.reader.DataStoreReader;\nimport net.reldo.taskstracker.data.jsondatastore.types.FilterConfig;\nimport okhttp3.OkHttpClient;\n\n@Singleton\n@Slf4j\npublic class FilterDataClient\n{\n\t@Inject\n\tprivate ManifestClient manifestClient;\n\t@Inject\n\tprivate OkHttpClient okHttpClient;\n\t@Inject\n\tprivate Gson gson;\n\t@Inject\n\tprivate DataStoreReader dataStoreReader;\n\n\tpublic FilterDataClient()\n\t{\n\t\tlog.debug(\"init filter data client\");\n\t}\n\n\tpublic HashMap\u003cString, FilterConfig\u003e getFilterConfigs() throws Exception\n\t{\n\t\tlog.debug(\"get filter configs\");\n\t\ttry (InputStream stream \u003d this.dataStoreReader.readFilterConfigs(this.manifestClient.getManifest().filterMetadata);\n\t\t\t InputStreamReader responseReader \u003d new InputStreamReader(stream, StandardCharsets.UTF_8))\n\t\t{\n\t\t\tType listType \u003d TypeToken.getParameterized(ArrayList.class, FilterConfig.class).getType();\n\n\t\t\tList\u003cFilterConfig\u003e filterConfigs \u003d this.gson.fromJson(responseReader, listType);\n\t\t\tHashMap\u003cString, FilterConfig\u003e filterConfigsByConfigKey \u003d new HashMap\u003c\u003e();\n\t\t\tfor (FilterConfig filterConfig : filterConfigs)\n\t\t\t{\n\t\t\t\tfilterConfigsByConfigKey.put(filterConfig.getConfigKey(), filterConfig);\n\t\t\t}\n\t\t\treturn filterConfigsByConfigKey;\n\t\t}\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/data/jsondatastore/FilterDataClient.java"},{"fileName":"TaskDataClient.java","content":"package net.reldo.taskstracker.data.jsondatastore;\n\nimport com.google.gson.Gson;\nimport com.google.gson.reflect.TypeToken;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.lang.reflect.Type;\nimport java.nio.charset.StandardCharsets;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport lombok.extern.slf4j.Slf4j;\nimport net.reldo.taskstracker.data.jsondatastore.reader.DataStoreReader;\nimport net.reldo.taskstracker.data.jsondatastore.types.TaskDefinition;\nimport net.reldo.taskstracker.data.jsondatastore.types.TaskTypeDefinition;\nimport net.reldo.taskstracker.data.task.TaskType;\nimport net.runelite.api.Client;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.game.SpriteManager;\nimport okhttp3.OkHttpClient;\n\n@Singleton\n@Slf4j\npublic class TaskDataClient\n{\n\t@Inject\n\tprivate ManifestClient manifestClient;\n\t@Inject\n\tprivate OkHttpClient okHttpClient;\n\t@Inject\n\tprivate Gson gson;\n\t@Inject\n\tprivate DataStoreReader dataStoreReader;\n\t@Inject\n\tprivate Client client;\n\t@Inject\n\tprivate ClientThread clientThread;\n\t@Inject\n\tprivate SpriteManager spriteManager;\n\n\tpublic TaskDataClient()\n\t{\n\t\tlog.debug(\"init task data client\");\n\t}\n\n\tpublic HashMap\u003cString, TaskType\u003e getTaskTypes() throws Exception\n\t{\n\t\ttry (InputStream stream \u003d this.dataStoreReader.readTaskTypes(this.manifestClient.getManifest().taskTypeMetadata);\n\t\t\t InputStreamReader responseReader \u003d new InputStreamReader(stream, StandardCharsets.UTF_8))\n\t\t{\n\t\t\tType listType \u003d TypeToken.getParameterized(ArrayList.class, TaskTypeDefinition.class).getType();\n\n\t\t\tList\u003cTaskTypeDefinition\u003e taskTypeDefinitions \u003d this.gson.fromJson(responseReader, listType);\n\n\t\t\tHashMap\u003cString, TaskType\u003e taskTypes \u003d new HashMap\u003c\u003e();\n\t\t\tfor (TaskTypeDefinition taskTypeDefinition : taskTypeDefinitions)\n\t\t\t{\n\t\t\t\ttaskTypes.put(taskTypeDefinition.getTaskJsonName(), new TaskType(client, clientThread, spriteManager, taskTypeDefinition));\n\t\t\t}\n\t\t\treturn taskTypes;\n\t\t}\n\t}\n\n\tpublic List\u003cTaskDefinition\u003e getTaskDefinitions(String jsonFilename) throws Exception\n\t{\n\t\ttry (InputStream stream \u003d this.dataStoreReader.readTasks(jsonFilename);\n\t\t\t InputStreamReader responseReader \u003d new InputStreamReader(stream, StandardCharsets.UTF_8))\n\t\t{\n\t\t\tType listType \u003d TypeToken.getParameterized(ArrayList.class, TaskDefinition.class).getType();\n\t\t\treturn this.gson.fromJson(responseReader, listType);\n\t\t}\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/data/jsondatastore/TaskDataClient.java"},{"fileName":"DataStoreReader.java","content":"package net.reldo.taskstracker.data.jsondatastore.reader;\n\nimport java.io.InputStream;\n\npublic interface DataStoreReader\n{\n\tInputStream readManifestData() throws Exception;\n\n\tInputStream readTaskTypes(String taskTypeFilename) throws Exception;\n\n\tInputStream readTasks(String jsonFilename) throws Exception;\n\n\tInputStream readFilterConfigs(String filterFilename) throws Exception;\n}\n","filePath":"src/main/java/net/reldo/taskstracker/data/jsondatastore/reader/DataStoreReader.java"},{"fileName":"HttpDataStoreReader.java","content":"package net.reldo.taskstracker.data.jsondatastore.reader;\n\nimport java.io.InputStream;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport lombok.extern.slf4j.Slf4j;\nimport net.reldo.taskstracker.data.jsondatastore.JsonDataStore;\nimport okhttp3.OkHttpClient;\nimport okhttp3.Request;\nimport okhttp3.Response;\n\n@Singleton\n@Slf4j\npublic class HttpDataStoreReader implements DataStoreReader\n{\n\t@Inject\n\tprivate OkHttpClient okHttpClient;\n\n\t@Override\n\tpublic InputStream readManifestData() throws Exception\n\t{\n\t\tString manifestUrl \u003d JsonDataStore.baseUrl + \"/manifest.json\";\n\t\tlog.debug(\"getManifest json from {} ...\", manifestUrl);\n\t\tRequest request \u003d new Request.Builder()\n\t\t\t.url(manifestUrl)\n\t\t\t.build();\n\t\tResponse response \u003d this.okHttpClient.newCall(request).execute();\n\t\tif (!response.isSuccessful())\n\t\t{\n\t\t\tString unsuccessful \u003d \"getManifest json request unsuccessful with status \" + response.code();\n\t\t\tif (response.body() !\u003d null)\n\t\t\t{\n\t\t\t\tunsuccessful +\u003d \" and body \\n\" + response.body();\n\t\t\t}\n\t\t\tlog.error(unsuccessful);\n\t\t\tthrow new Exception(unsuccessful);\n\t\t}\n\t\tif (response.body() \u003d\u003d null)\n\t\t{\n\t\t\tlog.error(\"getManifest returned without body\");\n\t\t\tthrow new Exception(\"getManifest returned without body\");\n\t\t}\n\t\tlog.debug(\"getManifest json fetched successfully, deserializing result\");\n\t\treturn response.body().byteStream();\n\t}\n\n\t@Override\n\tpublic InputStream readTaskTypes(String taskTypeFilename) throws Exception\n\t{\n\t\tString taskJsonUrl \u003d JsonDataStore.baseUrl + \"/\" + taskTypeFilename;\n\t\tlog.debug(\"getTaskTypes json from {} ...\", taskJsonUrl);\n\t\tRequest request \u003d new Request.Builder()\n\t\t\t.url(taskJsonUrl)\n\t\t\t.build();\n\t\tResponse response \u003d this.okHttpClient.newCall(request).execute();\n\t\tif (!response.isSuccessful())\n\t\t{\n\t\t\tString unsuccessful \u003d \"getTaskTypes json request unsuccessful with status \" + response.code();\n\t\t\tif (response.body() !\u003d null)\n\t\t\t{\n\t\t\t\tunsuccessful +\u003d \" and body \\n\" + response.body();\n\t\t\t}\n\t\t\tlog.error(unsuccessful);\n\t\t\tthrow new Exception(unsuccessful);\n\t\t}\n\t\tif (response.body() \u003d\u003d null)\n\t\t{\n\t\t\tlog.error(\"getTaskTypes returned without body\");\n\t\t\tthrow new Exception(\"getTaskTypes returned without body\");\n\t\t}\n\t\tlog.debug(\"getTaskTypes json fetched successfully, deserializing result\");\n\t\treturn response.body().byteStream();\n\t}\n\n\t@Override\n\tpublic InputStream readTasks(String jsonFilename) throws Exception\n\t{\n\t\tString taskJsonUrl \u003d String.format(\"%s/tasks/%s.min.json\", JsonDataStore.baseUrl, jsonFilename);\n\t\tlog.debug(\"getTasks json from {} ...\", taskJsonUrl);\n\t\tRequest request \u003d new Request.Builder()\n\t\t\t.url(taskJsonUrl)\n\t\t\t.build();\n\t\tResponse response \u003d this.okHttpClient.newCall(request).execute();\n\t\tif (!response.isSuccessful())\n\t\t{\n\t\t\tString unsuccessful \u003d \"getTasks json request unsuccessful with status \" + response.code();\n\t\t\tif (response.body() !\u003d null)\n\t\t\t{\n\t\t\t\tunsuccessful +\u003d \" and body \\n\" + response.body();\n\t\t\t}\n\t\t\tlog.error(unsuccessful);\n\t\t\tthrow new Exception(unsuccessful);\n\t\t}\n\t\tif (response.body() \u003d\u003d null)\n\t\t{\n\t\t\tlog.error(\"getTasks returned without body\");\n\t\t\tthrow new Exception(\"getTasks returned without body\");\n\t\t}\n\t\tlog.debug(\"getTasks json fetched successfully, deserializing result\");\n\t\treturn response.body().byteStream();\n\t}\n\n\t@Override\n\tpublic InputStream readFilterConfigs(String filterFilename) throws Exception\n\t{\n\t\tString filterJsonUrl \u003d JsonDataStore.baseUrl + \"/\" + filterFilename;\n\t\tlog.debug(\"getTaskTypes json from {} ...\", filterJsonUrl);\n\t\tRequest request \u003d new Request.Builder()\n\t\t\t.url(filterJsonUrl)\n\t\t\t.build();\n\t\tResponse response \u003d this.okHttpClient.newCall(request).execute();\n\t\tif (!response.isSuccessful())\n\t\t{\n\t\t\tString unsuccessful \u003d \"getFilters json request unsuccessful with status \" + response.code();\n\t\t\tif (response.body() !\u003d null)\n\t\t\t{\n\t\t\t\tunsuccessful +\u003d \" and body \\n\" + response.body();\n\t\t\t}\n\t\t\tlog.error(unsuccessful);\n\t\t\tthrow new Exception(unsuccessful);\n\t\t}\n\t\tif (response.body() \u003d\u003d null)\n\t\t{\n\t\t\tlog.error(\"getFilters returned without body\");\n\t\t\tthrow new Exception(\"getFilters returned without body\");\n\t\t}\n\t\tlog.debug(\"getFilters json fetched successfully, deserializing result\");\n\t\treturn response.body().byteStream();\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/data/jsondatastore/reader/HttpDataStoreReader.java"},{"fileName":"ManifestClient.java","content":"package net.reldo.taskstracker.data.jsondatastore;\n\nimport com.google.common.io.CharStreams;\nimport com.google.gson.Gson;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.nio.charset.StandardCharsets;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport lombok.extern.slf4j.Slf4j;\nimport net.reldo.taskstracker.data.jsondatastore.reader.DataStoreReader;\nimport net.reldo.taskstracker.data.jsondatastore.types.Manifest;\nimport okhttp3.OkHttpClient;\n\n@Singleton\n@Slf4j\npublic class ManifestClient\n{\n\t@Inject\n\tprivate OkHttpClient okHttpClient;\n\t@Inject\n\tprivate Gson gson;\n\t@Inject\n\tprivate DataStoreReader dataStoreReader;\n\n\tprivate static Manifest _manifest \u003d null;\n\n\tpublic ManifestClient()\n\t{\n\t\tlog.debug(\"init manifestclient\");\n\t}\n\n\tpublic Manifest getManifest() throws Exception\n\t{\n\t\tif (_manifest !\u003d null)\n\t\t{\n\t\t\treturn _manifest;\n\t\t}\n\t\ttry (InputStream stream \u003d this.dataStoreReader.readManifestData();\n\t\t\t InputStreamReader responseReader \u003d new InputStreamReader(stream, StandardCharsets.UTF_8))\n\t\t{\n\t\t\tString manifestJson \u003d CharStreams.toString(responseReader); // ew, why not a stream? not working...\n\t\t\t_manifest \u003d this.gson.fromJson(manifestJson, Manifest.class);\n\t\t\tlog.debug(\"_manifest \u003d \" + _manifest);\n\t\t\treturn _manifest;\n\t\t}\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/data/jsondatastore/ManifestClient.java"},{"fileName":"JsonDataStore.java","content":"package net.reldo.taskstracker.data.jsondatastore;\n\npublic class JsonDataStore\n{\n\tpublic static String baseUrl \u003d \"https://raw.githubusercontent.com/osrs-reldo/task-json-store/refs/heads/main\";\n}\n","filePath":"src/main/java/net/reldo/taskstracker/data/jsondatastore/JsonDataStore.java"},{"fileName":"FilterCustomItem.java","content":"package net.reldo.taskstracker.data.jsondatastore.types;\n\nimport lombok.Data;\n\n@Data\npublic class FilterCustomItem\n{\n\tprivate Integer value;\n\tprivate String tooltip;\n\tprivate Integer spriteId;\n}\n","filePath":"src/main/java/net/reldo/taskstracker/data/jsondatastore/types/FilterCustomItem.java"},{"fileName":"Manifest.java","content":"package net.reldo.taskstracker.data.jsondatastore.types;\n\nimport lombok.Data;\n\n@Data\npublic class Manifest\n{\n\tpublic String taskTypeMetadata;\n\tpublic String filterMetadata;\n}\n","filePath":"src/main/java/net/reldo/taskstracker/data/jsondatastore/types/Manifest.java"},{"fileName":"TaskDefinition.java","content":"package net.reldo.taskstracker.data.jsondatastore.types;\n\nimport java.util.List;\nimport java.util.Map;\nimport lombok.Data;\n\n/**\n * Represents a task with various attributes\n */\n@Data\npublic class TaskDefinition\n{\n\t/**\n\t * Struct id for task data\n\t */\n\tprivate Integer structId;\n\n\t/**\n\t * Sort id based on the sort order in the game\u0027s UI\n\t */\n\tprivate Integer sortId;\n\n\t/**\n\t * Skills required for the task.\n\t */\n\tprivate List\u003cTaskDefinitionSkill\u003e skills;\n\n\t/**\n\t * Metadata related to the task that isn\u0027t represented in the Struct/params\n\t * May or may not be used for task filters\n\t * Examples:\n\t * - notes \u003d extra description like \"a magic cabbage is a cabbage picked at Draynor Manor\"\n\t * - category \u003d an extra category type that isn\u0027t a param\n\t */\n\tprivate Map\u003cString, Object\u003e metadata;\n\n\t/**\n\t * Notes from the OSRS wiki\n\t */\n\tprivate String wikiNotes;\n\n\t/**\n\t * Completion percent from the OSRS wiki\n\t */\n\tprivate Float completionPercent;\n}\n","filePath":"src/main/java/net/reldo/taskstracker/data/jsondatastore/types/TaskDefinition.java"},{"fileName":"FilterConfig.java","content":"package net.reldo.taskstracker.data.jsondatastore.types;\n\nimport java.util.ArrayList;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\n\n/**\n * Represents the configuration for a filter\n */\n@Data\n@AllArgsConstructor\npublic class FilterConfig\n{\n\t/**\n\t * Key under which to store the filter\u0027s selected values, generally prefixed by task type\n\t */\n\tprivate String configKey;\n\n\t/**\n\t * The label displayed in the UI with the filter.\n\t */\n\tprivate String label;\n\n\t/**\n\t * The filter type, see enum for types of filters supported.\n\t */\n\tprivate FilterType filterType;\n\n\t/**\n\t * The source of the value(s) to use for the filter, see enum for types of values supported.\n\t * If global is specified then configKey must match a filter config defined in filters.json\n\t */\n\tprivate FilterValueType valueType;\n\n\t/**\n\t * The name of the param or metadata property to use for the filter.\n\t * Can be left null for SKILL value type\n\t */\n\tprivate String valueName;\n\n\t/**\n\t * Name of an enum specified in `TaskTypeDefinition.stringEnumMap` to provide labels for the filter\n\t * Specifying this property will override the displayed integer value of `valueName`\n\t */\n\tprivate String optionLabelEnum;\n\n\t/**\n\t * Item values in a button filter (dropdown not yet supported)\n\t */\n\tprivate ArrayList\u003cFilterCustomItem\u003e customItems;\n\n}\n","filePath":"src/main/java/net/reldo/taskstracker/data/jsondatastore/types/FilterConfig.java"},{"fileName":"FilterValueType.java","content":"package net.reldo.taskstracker.data.jsondatastore.types;\n\npublic enum FilterValueType\n{\n\tPARAM_INTEGER,\n\tPARAM_STRING,\n\tSKILL,\n\tMETADATA,\n\tGLOBAL\n}\n","filePath":"src/main/java/net/reldo/taskstracker/data/jsondatastore/types/FilterValueType.java"},{"fileName":"FilterType.java","content":"package net.reldo.taskstracker.data.jsondatastore.types;\n\npublic enum FilterType\n{\n\tBUTTON_FILTER,\n\tDROPDOWN_FILTER\n}\n","filePath":"src/main/java/net/reldo/taskstracker/data/jsondatastore/types/FilterType.java"},{"fileName":"TaskPointTierDefinition.java","content":"package net.reldo.taskstracker.data.jsondatastore.types;\r\n\r\nimport lombok.Data;\r\n\r\n/**\r\n * Point-based task thresholds.\r\n * Used for Combat Achievement tiers and Leagues relic tiers.\r\n * \u003cp\u003e\r\n * Resolution priority:\r\n * 1. If varbitId \u003e 0: try reading from game varbit\r\n * 2. If game returns 0 or varbitId \u003c\u003d 0: use hardcoded points\r\n * 3. If points is -1: display as \"Unknown\"\r\n */\r\n@Data\r\npublic class TaskPointTierDefinition\r\n{\r\n\t/**\r\n\t * Varbit ID to read threshold from game. Set to -1 if unknown.\r\n\t */\r\n\tprivate int varbitId;\r\n\r\n\t/**\r\n\t * Display label (e.g., \"Easy\", \"Tier 1\").\r\n\t * If null, use \"Tier {index+1}\".\r\n\t */\r\n\tprivate String label;\r\n\r\n\t/**\r\n\t * Points required for this tier. Set to -1 if unknown.\r\n\t */\r\n\tprivate int points;\r\n\r\n\tpublic boolean hasVarbit()\r\n\t{\r\n\t\treturn varbitId \u003e 0;\r\n\t}\r\n\r\n\tpublic boolean hasKnownPoints()\r\n\t{\r\n\t\treturn points \u003e -1;\r\n\t}\r\n\r\n\t/**\r\n\t * Gets display label, falling back to \"Tier {n}\" if not set.\r\n\t */\r\n\tpublic String getDisplayLabel(int index)\r\n\t{\r\n\t\treturn label !\u003d null ? label : \"Tier \" + (index + 1);\r\n\t}\r\n}\r\n","filePath":"src/main/java/net/reldo/taskstracker/data/jsondatastore/types/TaskPointTierDefinition.java"},{"fileName":"TaskCompletionCountTierDefinition.java","content":"package net.reldo.taskstracker.data.jsondatastore.types;\r\n\r\nimport lombok.Data;\r\n\r\n/**\r\n * Thresholds based on number of tasks completed\r\n * Primarily used for League region unlocks based on completed tasks.\r\n * \u003cp\u003e\r\n * Resolution priority:\r\n * 1. If varbitId \u003e 0: try reading from game varbit\r\n * 2. If game returns 0 or varbitId \u003c\u003d 0: use hardcoded tasks\r\n * 3. If tasks is -1: display as \"Unknown\"\r\n */\r\n@Data\r\npublic class TaskCompletionCountTierDefinition\r\n{\r\n\t/**\r\n\t * Varbit ID to read threshold from game. Set to -1 if unknown.\r\n\t */\r\n\tprivate int varbitId;\r\n\r\n\t/**\r\n\t * Display label (e.g., \"Starter\", \"1st Unlock\").\r\n\t * If null, use \"Unlock {index+1}\".\r\n\t */\r\n\tprivate String label;\r\n\r\n\t/**\r\n\t * Tasks required for this unlock. Set to -1 if unknown.\r\n\t */\r\n\tprivate int tasks;\r\n\r\n\tpublic boolean hasVarbit()\r\n\t{\r\n\t\treturn varbitId \u003e 0;\r\n\t}\r\n\r\n\tpublic boolean hasKnownTasks()\r\n\t{\r\n\t\treturn tasks \u003e -1;\r\n\t}\r\n\r\n\t/**\r\n\t * Gets display label, falling back to \"Unlock {n}\" if not set.\r\n\t */\r\n\tpublic String getDisplayLabel(int index)\r\n\t{\r\n\t\treturn label !\u003d null ? label : \"Unlock \" + (index + 1);\r\n\t}\r\n}\r\n","filePath":"src/main/java/net/reldo/taskstracker/data/jsondatastore/types/TaskCompletionCountTierDefinition.java"},{"fileName":"TaskDefinitionSkill.java","content":"package net.reldo.taskstracker.data.jsondatastore.types;\n\nimport lombok.Data;\n\n/**\n * Represents a skill required for a task.\n */\n@Data\npublic class TaskDefinitionSkill\n{\n\t/**\n\t * The skill\n\t */\n\tprivate String skill;\n\n\t/**\n\t * The level required\n\t */\n\tprivate Integer level;\n}\n","filePath":"src/main/java/net/reldo/taskstracker/data/jsondatastore/types/TaskDefinitionSkill.java"},{"fileName":"TaskTypeDefinition.java","content":"package net.reldo.taskstracker.data.jsondatastore.types;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport lombok.Data;\r\n\r\n/**\r\n * Represents a task type with relevant configuration for UI display and task management\r\n */\r\n@Data\r\npublic class TaskTypeDefinition\r\n{\r\n\r\n\t/**\r\n\t * Name of the task type for UI display\r\n\t */\r\n\tprivate String name;\r\n\r\n\t/**\r\n\t * Description of the task type\r\n\t */\r\n\tprivate String description;\r\n\r\n\t/**\r\n\t * Is the task type enabled?\r\n\t */\r\n\tprivate boolean isEnabled;\r\n\r\n\t/**\r\n\t * Filename for the task JSON found in the tasks directory of task-json-store\r\n\t * Extension not included.\r\n\t */\r\n\tprivate String taskJsonName;\r\n\r\n\t/**\r\n\t * Filters for the task type\r\n\t */\r\n\tprivate ArrayList\u003cFilterConfig\u003e filters;\r\n\r\n\t/**\r\n\t * A dictionary of parameters relevant to the task, with required id, name, description, tier\r\n\t * The key is the plain English name for the parameter\r\n\t * The value is an array of OSRS cache Struct ParamIDs that match with the plain English parameter\r\n\t * Generally, there is only 1 value in the array, but multiple are available for fallback\r\n\t */\r\n\tprivate HashMap\u003cString, Integer\u003e intParamMap;\r\n\r\n\t/**\r\n\t * A dictionary of parameters relevant to the task, with required id, name, description, tier\r\n\t * The key is the plain English name for the parameter\r\n\t * The value is an array of OSRS cache Struct ParamIDs that match with the plain English parameter\r\n\t * Generally, there is only 1 value in the array, but multiple are available for fallback\r\n\t */\r\n\tprivate HashMap\u003cString, Integer\u003e stringParamMap;\r\n\r\n\t/**\r\n\t * A dictionary of integer enums relevant to the task type\r\n\t * The key is the plain English name describing the enum\r\n\t * The value is an integer representing the enum id\r\n\t * e.g. \"tierSprites\": 3213 (tier id maps to a sprite id)\r\n\t */\r\n\tprivate HashMap\u003cString, Integer\u003e intEnumMap;\r\n\r\n\t/**\r\n\t * A dictionary of string enums relevant to the task type\r\n\t * The key is the plain English name describing the enum\r\n\t * The value is an integer representing the enum id\r\n\t * e.g. \"tierNames\": 4757 (tier id maps to a sprite id)\r\n\t */\r\n\tprivate HashMap\u003cString, Integer\u003e stringEnumMap;\r\n\r\n\t/**\r\n\t * A dictionary of tier sprite ids\r\n\t * The key is a string representation of the tier id integer\r\n\t * The value is an integer representing the sprite id\r\n\t */\r\n\tprivate HashMap\u003cString, Integer\u003e tierSpriteIdMap \u003d new HashMap\u003c\u003e();\r\n\r\n\t/**\r\n\t * Varps used to store task progress\r\n\t * Used for exports from the plugin\r\n\t */\r\n\tprivate ArrayList\u003cInteger\u003e taskVarps;\r\n\r\n\t/**\r\n\t * Other varps used for the task type\r\n\t * Used for exports from the plugin\r\n\t * Examples in the past: League Points, Sage Renown\r\n\t */\r\n\tprivate int[] otherVarps;\r\n\r\n\t/**\r\n\t * Varbits used for the task type\r\n\t * Used for exports from the plugin\r\n\t * Examples in the past: Relics chosen, Tasks completed, unlocks, Fragment xp\r\n\t */\r\n\tprivate int[] varbits;\r\n\r\n\t/**\r\n\t * The script id used to parse the completion of a task\r\n\t * This is a rs2asm script\r\n\t * Example: Combat achievements \u003d script 4834\r\n\t */\r\n\tprivate int taskCompletedScriptId;\r\n\r\n\t/**\r\n\t * Point-based thresholds for tasks.\r\n\t * Used for Combat Achievement tiers and Leagues relic tiers.\r\n\t * Each entry supports varbitId and hardcoded point values.\r\n\t * Null if task type doesn\u0027t have reward tiers.\r\n\t */\r\n\tprivate ArrayList\u003cTaskPointTierDefinition\u003e taskPointTiers;\r\n\r\n\t/**\r\n\t * Task-completion-count-based thresholds for tasks.\r\n\t * Used for League region unlocks.\r\n\t * Each entry supports varbitId and hardcoded task counts.\r\n\t * Null for non-League task types. CAs can be easily included if a use for it is discovered.\r\n\t */\r\n\tprivate ArrayList\u003cTaskCompletionCountTierDefinition\u003e taskCompletionCountTiers;\r\n}\r\n","filePath":"src/main/java/net/reldo/taskstracker/data/jsondatastore/types/TaskTypeDefinition.java"},{"fileName":"TasksSummary.java","content":"package net.reldo.taskstracker.data;\r\n\r\nimport java.util.Collection;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport net.reldo.taskstracker.data.task.TaskFromStruct;\r\nimport net.reldo.taskstracker.data.task.filters.FilterMatcher;\r\n\r\n@Slf4j\r\npublic class TasksSummary\r\n{\r\n\t// Tracked totals\r\n\tpublic int trackedTasksCount \u003d 0;\r\n\tpublic int trackedTasksPoints \u003d 0;\r\n\r\n\t// Filtered totals (tasks matching users current filter criteria)\r\n\tpublic int filteredTasksCount \u003d 0;\r\n\tpublic int filteredTasksPoints \u003d 0;\r\n\r\n\t// Tracked progress breakdown\r\n\tpublic int trackedCompletedCount \u003d 0;\r\n\tpublic int trackedCompletedPoints \u003d 0;\r\n\tpublic int trackedIncompleteCount \u003d 0;\r\n\tpublic int trackedIncompletePoints \u003d 0;\r\n\r\n\t// Total completed (all tasks, not just tracked) - for tier calculation\r\n\tpublic int totalCompletedCount \u003d 0;\r\n\tpublic int totalCompletedPoints \u003d 0;\r\n\r\n\tpublic TasksSummary(Collection\u003cTaskFromStruct\u003e tasks)\r\n\t{\r\n\t\ttasks.forEach(task -\u003e {\r\n\t\t\tif (task.isTracked())\r\n\t\t\t{\r\n\t\t\t\ttrackedTasksCount++;\r\n\t\t\t\tint points \u003d task.getPoints();\r\n\t\t\t\tlog.debug(\"TasksSummary {} {}\", task.getName(), points);\r\n\t\t\t\ttrackedTasksPoints +\u003d points;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * New constructor - calculates filtered totals, tracked progress, and total completed.\r\n\t *\r\n\t * @param tasks          All tasks to process\r\n\t * @param filterMatcher  The filter matcher to determine which tasks pass current filters\r\n\t * @param taskTextFilter The current text search filter (can be null)\r\n\t */\r\n\tpublic TasksSummary(Collection\u003cTaskFromStruct\u003e tasks, FilterMatcher filterMatcher, String taskTextFilter)\r\n\t{\r\n\t\ttasks.forEach(task -\u003e {\r\n\t\t\tint points \u003d task.getPoints();\r\n\r\n\t\t\t// Calculate filtered totals\r\n\t\t\tif (filterMatcher.meetsFilterCriteria(task, taskTextFilter))\r\n\t\t\t{\r\n\t\t\t\tfilteredTasksCount++;\r\n\t\t\t\tfilteredTasksPoints +\u003d points;\r\n\t\t\t}\r\n\r\n\t\t\t// Calculate total completed\r\n\t\t\tif (task.isCompleted())\r\n\t\t\t{\r\n\t\t\t\ttotalCompletedCount++;\r\n\t\t\t\ttotalCompletedPoints +\u003d points;\r\n\t\t\t}\r\n\r\n\t\t\t// Calculate tracked totals with completion breakdown\r\n\t\t\tif (task.isTracked())\r\n\t\t\t{\r\n\t\t\t\ttrackedTasksCount++;\r\n\t\t\t\ttrackedTasksPoints +\u003d points;\r\n\r\n\t\t\t\tif (task.isCompleted())\r\n\t\t\t\t{\r\n\t\t\t\t\ttrackedCompletedCount++;\r\n\t\t\t\t\ttrackedCompletedPoints +\u003d points;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\ttrackedIncompleteCount++;\r\n\t\t\t\t\ttrackedIncompletePoints +\u003d points;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tpublic String formatChatMessage(String taskTypeName, boolean untrackUponCompletion)\r\n\t{\r\n\t\tStringBuilder message \u003d new StringBuilder(\"Task Tracker: \");\r\n\r\n\t\t// Pt 1 - Filtered tasks count\r\n\t\tif (filteredTasksCount \u003d\u003d 0)\r\n\t\t{\r\n\t\t\tmessage.append(\"No tasks match filter\");\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tString taskWord \u003d filteredTasksCount \u003d\u003d 1 ? \"task\" : \"tasks\";\r\n\t\t\tmessage.append(String.format(\"%d filtered %s (%s)\",\r\n\t\t\t\tfilteredTasksCount,\r\n\t\t\t\ttaskWord,\r\n\t\t\t\tformatPoints(filteredTasksPoints)));\r\n\t\t}\r\n\r\n\t\tmessage.append(\" | \");\r\n\r\n\t\t// Pt 2 - Tracked tasks progress\r\n\t\tif (trackedTasksCount \u003d\u003d 0)\r\n\t\t{\r\n\t\t\tmessage.append(\"No tracked tasks\");\r\n\t\t}\r\n\t\telse if (untrackUponCompletion)\r\n\t\t{\r\n\t\t\tmessage.append(String.format(\"%d tracked tasks left, worth %s\",\r\n\t\t\t\ttrackedIncompleteCount,\r\n\t\t\t\tformatPoints(trackedIncompletePoints)));\r\n\t\t}\r\n\t\telse if (trackedCompletedCount \u003d\u003d trackedTasksCount)\r\n\t\t{\r\n\t\t\tmessage.append(\"All tracked tasks done\");\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tmessage.append(String.format(\"%d of %d tracked tasks left (%s)\",\r\n\t\t\t\ttrackedIncompleteCount,\r\n\t\t\t\ttrackedTasksCount,\r\n\t\t\t\tformatPoints(trackedIncompletePoints)));\r\n\t\t}\r\n\r\n\t\treturn message.toString();\r\n\t}\r\n\r\n\t// Pluralization\r\n\tprivate String formatPoints(int points)\r\n\t{\r\n\t\treturn points \u003d\u003d 1 ? \"1 pt\" : points + \" pts\";\r\n\t}\r\n}\r\n","filePath":"src/main/java/net/reldo/taskstracker/data/TasksSummary.java"},{"fileName":"TrackerConfigStore.java","content":"package net.reldo.taskstracker.data;\n\nimport com.google.gson.Gson;\nimport com.google.gson.JsonParseException;\nimport com.google.gson.reflect.TypeToken;\nimport java.lang.reflect.Type;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.stream.Collectors;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport lombok.extern.slf4j.Slf4j;\nimport net.reldo.taskstracker.TasksTrackerPlugin;\nimport net.reldo.taskstracker.data.task.TaskFromStruct;\nimport net.reldo.taskstracker.data.task.ConfigTaskSave;\nimport net.reldo.taskstracker.data.task.TaskService;\nimport net.reldo.taskstracker.data.task.TaskType;\nimport net.runelite.client.config.ConfigManager;\n\n@Singleton\n@Slf4j\npublic class TrackerConfigStore\n{\n\tpublic static final String CONFIG_TASKS_PREFIX \u003d \"tasks\";\n\tpublic static final String CONFIG_GROUP_PREFIX_SEPARATOR \u003d \"-\";\n\tpublic static final String CONFIG_GROUP_NAME \u003d TasksTrackerPlugin.CONFIG_GROUP_NAME;\n\n\tprivate final Gson customGson;\n\t@Inject\n\tprivate TaskService taskService;\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Inject\n\tpublic TrackerConfigStore(Gson gson)\n\t{\n\t\tthis.customGson \u003d gson.newBuilder()\n\t\t\t.excludeFieldsWithoutExposeAnnotation()\n\t\t\t.registerTypeAdapter(float.class, new LongSerializer())\n\t\t\t.create();\n\t}\n\n\tpublic void loadCurrentTaskTypeFromConfig()\n\t{\n\t\tTaskType currentTaskType \u003d taskService.getCurrentTaskType();\n\t\tif (currentTaskType \u003d\u003d null)\n\t\t{\n\t\t\tlog.debug(\"loadTaskTypeFromConfig type is null, skipping\");\n\t\t\treturn;\n\t\t}\n\t\tlog.debug(\"loadTaskTypeFromConfig {}\", currentTaskType.getName());\n\t\tString configKey \u003d getCurrentTaskTypeConfigKey();\n\t\tString configJson \u003d configManager.getRSProfileConfiguration(CONFIG_GROUP_NAME, configKey);\n\t\tif (configJson \u003d\u003d null)\n\t\t{\n\t\t\tlog.debug(\"No save information for task type {}, not applying save\", currentTaskType.getName());\n\t\t\treturn;\n\t\t}\n\n\t\tType deserializeType \u003d TypeToken.getParameterized(HashMap.class, Integer.class, ConfigTaskSave.class).getType();\n\t\ttry\n\t\t{\n\t\t\tHashMap\u003cInteger, ConfigTaskSave\u003e saveData \u003d customGson.fromJson(configJson, deserializeType);\n\t\t\ttaskService.applySave(currentTaskType, saveData);\n\t\t}\n\t\tcatch (JsonParseException ex)\n\t\t{\n\t\t\tlog.error(\"{} {} json invalid. wiping saved data\", CONFIG_GROUP_NAME, configKey, ex);\n\t\t\tconfigManager.unsetRSProfileConfiguration(CONFIG_GROUP_NAME, configKey);\n\t\t}\n\t}\n\n\tpublic void saveCurrentTaskTypeData()\n\t{\n\t\tlog.debug(\"saveTaskTypeToConfig\");\n\t\tMap\u003cInteger, ConfigTaskSave\u003e saveDataByStructId \u003d taskService.getTasks().stream()\n\t\t\t.filter(task -\u003e task.getCompletedOn() !\u003d 0 || task.getIgnoredOn() !\u003d 0 || task.getTrackedOn() !\u003d 0)\n\t\t\t.collect(Collectors.toMap(\n\t\t\t\tTaskFromStruct::getStructId,\n\t\t\t\tTaskFromStruct::getSaveData,\n\t\t\t\t(existing, replacement) -\u003e existing,\n\t\t\t\tHashMap::new\n\t\t\t));\n\n\t\tString configValue \u003d this.customGson.toJson(saveDataByStructId);\n\t\tString configKey \u003d CONFIG_TASKS_PREFIX + CONFIG_GROUP_PREFIX_SEPARATOR + taskService.getCurrentTaskType().getTaskJsonName();\n\t\tconfigManager.setRSProfileConfiguration(CONFIG_GROUP_NAME, configKey, configValue);\n\t}\n\n\tprivate String getCurrentTaskTypeConfigKey()\n\t{\n\t\treturn CONFIG_TASKS_PREFIX + CONFIG_GROUP_PREFIX_SEPARATOR + taskService.getCurrentTaskType().getTaskJsonName();\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/data/TrackerConfigStore.java"},{"fileName":"TierService.java","content":"package net.reldo.taskstracker.data.task;\r\n\r\nimport java.util.List;\r\nimport javax.inject.Inject;\r\nimport javax.inject.Singleton;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport net.reldo.taskstracker.data.jsondatastore.types.TaskCompletionCountTierDefinition;\r\nimport net.reldo.taskstracker.data.jsondatastore.types.TaskPointTierDefinition;\r\nimport net.runelite.api.Client;\r\n\r\n/**\r\n * Service for resolving tier and unlock thresholds.\r\n * \u003cp\u003e\r\n * Resolution priority:\r\n * 1. Game varbit (if varbitId \u003e 0 and returns \u003e 0)\r\n * 2. Hardcoded JSON value\r\n * 3. -1 (unknown)\r\n */\r\n@Slf4j\r\n@Singleton\r\npublic class TierService\r\n{\r\n\t@Inject\r\n\tprivate Client client;\r\n\r\n\t/**\r\n\t * Resolve actual points for a tier.\r\n\t * Priority: game varbit  hardcoded JSON  -1 (unknown)\r\n\t */\r\n\tpublic int resolvePoints(TaskPointTierDefinition tier)\r\n\t{\r\n\t\tif (tier \u003d\u003d null)\r\n\t\t{\r\n\t\t\treturn -1;\r\n\t\t}\r\n\r\n\t\tif (tier.hasVarbit())\r\n\t\t{\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tint gameValue \u003d client.getVarbitValue(tier.getVarbitId());\r\n\t\t\t\tif (gameValue \u003e 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tlog.debug(\"Resolved {} from varbit {}: {}\", tier.getLabel(), tier.getVarbitId(), gameValue);\r\n\t\t\t\t\treturn gameValue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (Exception e)\r\n\t\t\t{\r\n\t\t\t\tlog.debug(\"Failed to read varbit {}: {}\", tier.getVarbitId(), e.getMessage());\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn tier.getPoints(); // Returns -1 if unknown\r\n\t}\r\n\r\n\t/**\r\n\t * Resolve actual task count for an area unlock.\r\n\t * Priority: game varbit  hardcoded JSON  -1 (unknown)\r\n\t */\r\n\tpublic int resolveTasks(TaskCompletionCountTierDefinition unlock)\r\n\t{\r\n\t\tif (unlock \u003d\u003d null)\r\n\t\t{\r\n\t\t\treturn -1;\r\n\t\t}\r\n\r\n\t\tif (unlock.hasVarbit())\r\n\t\t{\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tint gameValue \u003d client.getVarbitValue(unlock.getVarbitId());\r\n\t\t\t\tif (gameValue \u003e 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tlog.debug(\"Resolved {} from varbit {}: {}\", unlock.getLabel(), unlock.getVarbitId(), gameValue);\r\n\t\t\t\t\treturn gameValue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (Exception e)\r\n\t\t\t{\r\n\t\t\t\tlog.debug(\"Failed to read varbit {}: {}\", unlock.getVarbitId(), e.getMessage());\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn unlock.getTasks(); // Returns -1 if unknown\r\n\t}\r\n\r\n\t// Get the reward tier achieved for a point total.\r\n\tpublic TaskPointTierDefinition getTierForPoints(List\u003cTaskPointTierDefinition\u003e tiers, int totalPoints)\r\n\t{\r\n\t\tTaskPointTierDefinition result \u003d null;\r\n\t\tfor (TaskPointTierDefinition tier : tiers)\r\n\t\t{\r\n\t\t\tint threshold \u003d resolvePoints(tier);\r\n\t\t\tif (threshold \u003e\u003d 0 \u0026\u0026 totalPoints \u003e\u003d threshold)\r\n\t\t\t{\r\n\t\t\t\tresult \u003d tier;\r\n\t\t\t}\r\n\t\t\telse if (threshold \u003e\u003d 0)\r\n\t\t\t{\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\t// Get the completion tier achieved for a task count.\r\n\tpublic TaskCompletionCountTierDefinition getUnlockForTasks(List\u003cTaskCompletionCountTierDefinition\u003e unlocks, int completedTasks)\r\n\t{\r\n\t\tTaskCompletionCountTierDefinition result \u003d null;\r\n\t\tfor (TaskCompletionCountTierDefinition unlock : unlocks)\r\n\t\t{\r\n\t\t\tint threshold \u003d resolveTasks(unlock);\r\n\t\t\tif (threshold \u003e\u003d 0 \u0026\u0026 completedTasks \u003e\u003d threshold)\r\n\t\t\t{\r\n\t\t\t\tresult \u003d unlock;\r\n\t\t\t}\r\n\t\t\telse if (threshold \u003e\u003d 0)\r\n\t\t\t{\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\t// Get the next points tier after the current one.\r\n\tpublic TaskPointTierDefinition getNextTier(List\u003cTaskPointTierDefinition\u003e tiers, int currentPoints)\r\n\t{\r\n\t\tfor (TaskPointTierDefinition tier : tiers)\r\n\t\t{\r\n\t\t\tint threshold \u003d resolvePoints(tier);\r\n\t\t\tif (threshold \u003e currentPoints)\r\n\t\t\t{\r\n\t\t\t\treturn tier;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null; // At max tier\r\n\t}\r\n\r\n\t// Get the next completion count tier after the current one.\r\n\tpublic TaskCompletionCountTierDefinition getNextUnlock(List\u003cTaskCompletionCountTierDefinition\u003e unlocks, int completedTasks)\r\n\t{\r\n\t\tfor (TaskCompletionCountTierDefinition unlock : unlocks)\r\n\t\t{\r\n\t\t\tint threshold \u003d resolveTasks(unlock);\r\n\t\t\tif (threshold \u003e completedTasks)\r\n\t\t\t{\r\n\t\t\t\treturn unlock;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null; // At max unlock\r\n\t}\r\n\r\n\tpublic int getPointsToNextTier(List\u003cTaskPointTierDefinition\u003e tiers, int currentPoints)\r\n\t{\r\n\t\tTaskPointTierDefinition next \u003d getNextTier(tiers, currentPoints);\r\n\t\tif (next \u003d\u003d null)\r\n\t\t{\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tint threshold \u003d resolvePoints(next);\r\n\t\treturn threshold \u003e 0 ? threshold - currentPoints : 0;\r\n\t}\r\n\r\n\tpublic int getTasksToNextUnlock(List\u003cTaskCompletionCountTierDefinition\u003e unlocks, int completedTasks)\r\n\t{\r\n\t\tTaskCompletionCountTierDefinition next \u003d getNextUnlock(unlocks, completedTasks);\r\n\t\tif (next \u003d\u003d null)\r\n\t\t{\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tint threshold \u003d resolveTasks(next);\r\n\t\treturn threshold \u003e 0 ? threshold - completedTasks : 0;\r\n\t}\r\n}\r\n","filePath":"src/main/java/net/reldo/taskstracker/data/task/TierService.java"},{"fileName":"TaskFromStruct.java","content":"package net.reldo.taskstracker.data.task;\n\nimport java.time.Instant;\nimport java.util.HashMap;\nimport java.util.Map;\nimport lombok.Getter;\nimport lombok.Setter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.reldo.taskstracker.data.jsondatastore.types.TaskDefinition;\nimport net.reldo.taskstracker.data.reldo.ReldoTaskSave;\nimport net.runelite.api.Client;\nimport net.runelite.api.StructComposition;\n\n@Slf4j\npublic class TaskFromStruct\n{\n\t@Getter\n\tprivate final Integer structId;\n\t@Getter\n\tprivate final Integer sortId;\n\t@Getter\n\tprivate TaskType taskType;\n\t@Getter\n\tprivate final TaskDefinition taskDefinition;\n\t@Getter\n\tprivate boolean structLoaded;\n\t@Getter\n\t@Setter\n\tprivate long completedOn;\n\t@Getter\n\t@Setter\n\tprivate long trackedOn;\n\t@Getter\n\t@Setter\n\tprivate long ignoredOn;\n\n\tprivate StructComposition _struct;\n\tprivate final Map\u003cString, String\u003e _stringParams \u003d new HashMap\u003c\u003e();\n\tprivate final Map\u003cString, Integer\u003e _intParams \u003d new HashMap\u003c\u003e();\n\t@Getter\n\t@Setter\n\tprivate String note;\n\n\tpublic TaskFromStruct(TaskType taskType, TaskDefinition taskDefinition)\n\t{\n\t\tthis.taskType \u003d taskType;\n\t\tthis.taskDefinition \u003d taskDefinition;\n\t\tthis.structId \u003d taskDefinition.getStructId();\n\t\tthis.sortId \u003d taskDefinition.getSortId();\n\t}\n\n\tpublic String getStringParam(String paramName)\n\t{\n\t\treturn this._stringParams.get(paramName);\n\t}\n\n\tpublic Integer getIntParam(String paramName)\n\t{\n\t\treturn this._intParams.get(paramName);\n\t}\n\n\t// TODO: Remove client from params\n\tpublic boolean loadStructData(Client client)\n\t{\n\t\tassert client.isClientThread();\n\n\t\tif (structLoaded)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\ttry\n\t\t{\n\t\t\t// log.debug(\"LOADING STRUCT DATA \" + structId);\n\t\t\t_struct \u003d client.getStructComposition(structId);\n\t\t\ttaskType.getIntParamMap().forEach((paramName, paramId) -\u003e {\n\t\t\t\tint value \u003d _struct.getIntValue(paramId);\n\t\t\t\t// log.debug(\"{} {}\", paramName, value);\n\t\t\t\t_intParams.put(paramName, value);\n\t\t\t});\n\t\t\ttaskType.getStringParamMap().forEach((paramName, paramId) -\u003e {\n\t\t\t\tString value \u003d _struct.getStringValue(paramId);\n\t\t\t\t// log.debug(\"{} {}\", paramName, value);\n\t\t\t\t_stringParams.put(paramName, value);\n\t\t\t});\n\t\t}\n\t\tcatch (Exception ex)\n\t\t{\n\t\t\tlog.error(\"error loading struct data {}\", ex, ex);\n\t\t\treturn false;\n\t\t}\n\n\t\tstructLoaded \u003d true;\n\t\treturn true;\n\t}\n\n\tpublic boolean isCompleted()\n\t{\n\t\treturn completedOn \u003e 0;\n\t}\n\n\tpublic int getPoints()\n\t{\n\t\tif (taskType.getTierPoints().size() \u003d\u003d 0)\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\t\tInteger points \u003d taskType.getTierPoints().get(getTier());\n\t\tif (points \u003d\u003d null)\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\t\treturn points;\n\t}\n\n\tpublic void setCompleted(boolean completed)\n\t{\n\t\tlong now \u003d Instant.now().toEpochMilli();\n\t\tif (completed \u0026\u0026 completedOn \u003e 0 \u0026\u0026 completedOn \u003c\u003d now)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tcompletedOn \u003d completed ? now : 0;\n\t}\n\n\tpublic boolean isTracked()\n\t{\n\t\treturn trackedOn \u003e 0;\n\t}\n\n\tpublic void setTracked(boolean state)\n\t{\n\t\tlong now \u003d Instant.now().toEpochMilli();\n\t\tif (state \u0026\u0026 trackedOn \u003e 0 \u0026\u0026 trackedOn \u003c\u003d now)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\ttrackedOn \u003d state ? now : 0;\n\t}\n\n\tpublic boolean isIgnored()\n\t{\n\t\treturn ignoredOn \u003e 0;\n\t}\n\n\tpublic void setIgnored(boolean state)\n\t{\n\t\tlong now \u003d Instant.now().toEpochMilli();\n\t\tif (state \u0026\u0026 ignoredOn \u003e 0 \u0026\u0026 ignoredOn \u003c\u003d now)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tignoredOn \u003d state ? now : 0;\n\t}\n\n\tpublic void loadConfigSave(ConfigTaskSave loadedData)\n\t{\n\t\tsetDates(loadedData.completed, loadedData.ignored, loadedData.tracked);\n\t\tsetNote(loadedData.note);\n\t}\n\n\tpublic void loadReldoSave(ReldoTaskSave loadedData)\n\t{\n\t\tsetMostRecentDates(loadedData.getCompleted(), loadedData.getIgnored(), loadedData.getTodo());\n\t\tsetNote(loadedData.getNotes());\n\t}\n\n\tprivate void setDates(long completedOn, long ignoredOn, long trackedOn)\n\t{\n\t\t// Set all dates regardless of how they compare\n\t\tthis.setCompletedOn(completedOn);\n\t\tthis.setIgnoredOn(ignoredOn);\n\t\tthis.setTrackedOn(trackedOn);\n\t}\n\n\tprivate void setMostRecentDates(long completedOn, long ignoredOn, long trackedOn)\n\t{\n\t\t// Older completions take priority; incomplete (0) also takes priority\n\t\tif (completedOn \u003c this.getCompletedOn())\n\t\t{\n\t\t\tthis.setCompletedOn(completedOn);\n\t\t}\n\t\t// Newer ignores take priority\n\t\tif (ignoredOn \u003e this.getIgnoredOn())\n\t\t{\n\t\t\tthis.setIgnoredOn(ignoredOn);\n\t\t}\n\t\t// Newer tracks take priority\n\t\tif (trackedOn \u003e this.getTrackedOn())\n\t\t{\n\t\t\tthis.setTrackedOn(trackedOn);\n\t\t}\n\t}\n\n\tpublic String getName()\n\t{\n\t\treturn getStringParam(\"name\");\n\t}\n\n\tpublic int getTier()\n\t{\n\t\treturn getIntParam(\"tier\");\n\t}\n\n\tpublic String getDescription()\n\t{\n\t\treturn getStringParam(\"description\");\n\t}\n\n\tpublic ConfigTaskSave getSaveData()\n\t{\n\t\treturn new ConfigTaskSave(this);\n\t}\n\n\tpublic Float getCompletionPercent()\n\t{\n\t\treturn getTaskDefinition().getCompletionPercent();\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/data/task/TaskFromStruct.java"},{"fileName":"TaskService.java","content":"package net.reldo.taskstracker.data.task;\n\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.Comparator;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Optional;\nimport java.util.concurrent.CompletableFuture;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.Future;\nimport java.util.stream.Collectors;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport lombok.Getter;\nimport lombok.Setter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.reldo.taskstracker.TasksTrackerPlugin;\nimport net.reldo.taskstracker.data.jsondatastore.ManifestClient;\nimport net.reldo.taskstracker.data.jsondatastore.TaskDataClient;\nimport net.reldo.taskstracker.data.jsondatastore.types.FilterConfig;\nimport net.reldo.taskstracker.data.jsondatastore.types.FilterValueType;\nimport net.reldo.taskstracker.data.jsondatastore.types.TaskDefinition;\nimport net.reldo.taskstracker.data.task.filters.FilterService;\nimport net.runelite.api.Client;\nimport net.runelite.api.EnumComposition;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\n\n@Singleton\n@Slf4j\npublic class TaskService\n{\n\t@Inject\n\tprivate ManifestClient manifestClient;\n\t@Inject\n\tprivate TaskDataClient taskDataClient;\n\t@Inject\n\tprivate ClientThread clientThread;\n\t@Inject\n\tprivate Client client;\n\t@Inject\n\tprivate FilterService filterService;\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Getter\n\t@Setter\n\tprivate boolean taskTypeChanged \u003d false;\n\t@Getter\n\tprivate TaskType currentTaskType;\n\t@Getter\n\tprivate final List\u003cTaskFromStruct\u003e tasks \u003d new ArrayList\u003c\u003e();\n\t@Getter\n\tprivate final HashMap\u003cString, int[]\u003e sortedIndexes \u003d new HashMap\u003c\u003e();\n\tprivate HashMap\u003cString, TaskType\u003e _taskTypes \u003d new HashMap\u003c\u003e();\n\tprivate HashSet\u003cInteger\u003e currentTaskTypeVarps \u003d new HashSet\u003c\u003e();\n\tprivate final ExecutorService futureExecutor \u003d Executors.newSingleThreadExecutor();\n\n\tpublic CompletableFuture\u003cBoolean\u003e setTaskType(String taskTypeJsonName)\n\t{\n\t\treturn getTaskTypesByJsonName().thenCompose(taskTypes -\u003e\n\t\t{\n\t\t\tTaskType newTaskType \u003d taskTypes.get(taskTypeJsonName);\n\t\t\tif (newTaskType \u003d\u003d null)\n\t\t\t{\n\t\t\t\tlog.error(\"unsupported task type {}, falling back to COMBAT\", taskTypeJsonName);\n\t\t\t\tnewTaskType \u003d taskTypes.get(\"COMBAT\");\n\t\t\t}\n\t\t\treturn this.setTaskType(newTaskType);\n\t\t});\n\t}\n\n\tprivate CompletableFuture\u003cBoolean\u003e loadAllTasksStructData(Collection\u003cTaskFromStruct\u003e tasks)\n\t{\n\t\tCollection\u003cCompletableFuture\u003cBoolean\u003e\u003e taskFutures \u003d new ArrayList\u003c\u003e();\n\t\tfor (TaskFromStruct task : tasks)\n\t\t{\n\t\t\tCompletableFuture\u003cBoolean\u003e taskFuture \u003d new CompletableFuture\u003c\u003e();\n\t\t\tclientThread.invoke(() -\u003e {\n\t\t\t\tboolean isTaskLoaded \u003d task.loadStructData(client);\n\t\t\t\ttaskFuture.complete(isTaskLoaded);\n\t\t\t});\n\t\t\ttaskFutures.add(taskFuture);\n\t\t}\n\t\treturn CompletableFuture.allOf(taskFutures.toArray(new CompletableFuture[0])).thenApply(v -\u003e {\n\t\t\tfor (CompletableFuture\u003cBoolean\u003e future : taskFutures)\n\t\t\t{\n\t\t\t\tif (!future.join())\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t}\n\n\tpublic CompletableFuture\u003cBoolean\u003e setTaskType(TaskType newTaskType)\n\t{\n\t\tlog.debug(\"setTaskType {}\", newTaskType.getTaskJsonName());\n\t\tif (newTaskType.equals(currentTaskType))\n\t\t{\n\t\t\tlog.debug(\"Skipping setTaskType, same task type selected\");\n\t\t\treturn CompletableFuture.completedFuture(false);\n\t\t}\n\t\tcurrentTaskType \u003d newTaskType;\n\t\tconfigManager.setConfiguration(TasksTrackerPlugin.CONFIG_GROUP_NAME, \"taskTypeJsonName\", newTaskType.getTaskJsonName());\n\n\t\t// Complete creation of any GLOBAL value type filterConfigs\n\t\tfor (FilterConfig filterConfig : currentTaskType.getFilters())\n\t\t{\n\t\t\tif (filterConfig.getValueType().equals(FilterValueType.GLOBAL))\n\t\t\t{\n\t\t\t\t// Set valueType to the one required by the global filter\n\t\t\t\tFilterConfig globalFilterConfig \u003d filterService.getGlobalFilterByKey(filterConfig.getConfigKey());\n\t\t\t\tfilterConfig.setValueType(globalFilterConfig.getValueType());\n\n\t\t\t\t// Set any filterConfig fields not already specified\n\t\t\t\tOptional.ofNullable(filterConfig.getLabel()).ifPresentOrElse(val -\u003e {\n\t\t\t\t}, () -\u003e filterConfig.setLabel(globalFilterConfig.getLabel()));\n\t\t\t\tOptional.ofNullable(filterConfig.getFilterType()).ifPresentOrElse(val -\u003e {\n\t\t\t\t}, () -\u003e filterConfig.setFilterType(globalFilterConfig.getFilterType()));\n\t\t\t\tOptional.ofNullable(filterConfig.getValueName()).ifPresentOrElse(val -\u003e {\n\t\t\t\t}, () -\u003e filterConfig.setValueName(globalFilterConfig.getValueName()));\n\t\t\t\tOptional.ofNullable(filterConfig.getOptionLabelEnum()).ifPresentOrElse(val -\u003e {\n\t\t\t\t}, () -\u003e filterConfig.setOptionLabelEnum(globalFilterConfig.getOptionLabelEnum()));\n\t\t\t\tOptional.ofNullable(filterConfig.getCustomItems()).ifPresentOrElse(val -\u003e {\n\t\t\t\t}, () -\u003e filterConfig.setCustomItems(globalFilterConfig.getCustomItems()));\n\t\t\t}\n\t\t}\n\n\t\tList\u003cTaskFromStruct\u003e newTasks \u003d new ArrayList\u003c\u003e();\n\t\treturn newTaskType.loadTaskTypeDataAsync().thenCompose((isTaskTypeLoaded) -\u003e {\n\t\t\tif (!isTaskTypeLoaded)\n\t\t\t{\n\t\t\t\tlog.error(\"Error loading task type during setTaskType\");\n\t\t\t\treturn CompletableFuture.completedFuture(false);\n\t\t\t}\n\n\t\t\tCompletableFuture\u003cBoolean\u003e future \u003d new CompletableFuture\u003c\u003e();\n\t\t\tfutureExecutor.submit(() -\u003e {\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tCollection\u003cTaskDefinition\u003e taskDefinitions \u003d taskDataClient.getTaskDefinitions(currentTaskType.getTaskJsonName());\n\t\t\t\t\tfor (TaskDefinition definition : taskDefinitions)\n\t\t\t\t\t{\n\t\t\t\t\t\tTaskFromStruct task \u003d new TaskFromStruct(currentTaskType, definition);\n\t\t\t\t\t\tnewTasks.add(task);\n\t\t\t\t\t}\n\t\t\t\t\tloadAllTasksStructData(newTasks).thenApply(future::complete);\n\t\t\t\t}\n\t\t\t\tcatch (Exception e3)\n\t\t\t\t{\n\t\t\t\t\tfuture.completeExceptionally(e3);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn future;\n\t\t}).thenCompose(areTasksLoaded -\u003e {\n\t\t\tif (!areTasksLoaded)\n\t\t\t{\n\t\t\t\treturn CompletableFuture.completedFuture(false);\n\t\t\t}\n\n\t\t\ttasks.clear();\n\t\t\ttasks.addAll(newTasks);\n\n\t\t\t// Index task list for each property\n\t\t\tsortedIndexes.clear();\n\t\t\tcurrentTaskType.getIntParamMap().keySet().forEach(paramName -\u003e {\n\t\t\t\tsortedIndexes.put(paramName, null);\n\t\t\t\taddSortedIndex(paramName, Comparator.comparingInt((TaskFromStruct task) -\u003e task.getIntParam(paramName)));\n\t\t\t});\n\t\t\tcurrentTaskType.getStringParamMap().keySet().forEach(paramName -\u003e {\n\t\t\t\tsortedIndexes.put(paramName, null);\n\t\t\t\taddSortedIndex(paramName, Comparator.comparing((TaskFromStruct task) -\u003e task.getStringParam(paramName)));\n\t\t\t});\n\t\t\t// todo: make this less of a special case.\n\t\t\tif (tasks.stream().anyMatch(task -\u003e task.getCompletionPercent() !\u003d null))\n\t\t\t{\n\t\t\t\tsortedIndexes.put(\"completion %\", null);\n\t\t\t\taddSortedIndex(\"completion %\",\n\t\t\t\t\t(TaskFromStruct task1, TaskFromStruct task2) -\u003e\n\t\t\t\t\t{\n\t\t\t\t\t\tFloat comp1 \u003d task1.getTaskDefinition().getCompletionPercent() !\u003d null ? task1.getTaskDefinition().getCompletionPercent() : 0;\n\t\t\t\t\t\tFloat comp2 \u003d task2.getTaskDefinition().getCompletionPercent() !\u003d null ? task2.getTaskDefinition().getCompletionPercent() : 0;\n\t\t\t\t\t\treturn comp1.compareTo(comp2);\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\tcurrentTaskTypeVarps.clear();\n\t\t\tcurrentTaskTypeVarps \u003d new HashSet\u003c\u003e(currentTaskType.getTaskVarps());\n\n\t\t\ttaskTypeChanged \u003d true;\n\t\t\treturn CompletableFuture.completedFuture(true);\n\t\t});\n\t}\n\n\tprivate void addSortedIndex(String paramName, Comparator\u003cTaskFromStruct\u003e comparator)\n\t{\n\t\tList\u003cTaskFromStruct\u003e sortedTasks \u003d tasks.stream()\n\t\t\t.sorted(comparator)\n\t\t\t.collect(Collectors.toCollection(ArrayList::new));\n\t\tint[] sortedIndex \u003d new int[tasks.size()];\n\t\tfor (int i \u003d 0; i \u003c sortedTasks.size(); i++)\n\t\t{\n\t\t\tsortedIndex[i] \u003d tasks.indexOf(sortedTasks.get(i));\n\t\t}\n\t\tsortedIndexes.put(paramName, sortedIndex);\n\t}\n\n\tpublic int getSortedTaskIndex(String sortCriteria, int position)\n\t{\n\t\tif (sortedIndexes.containsKey(sortCriteria))\n\t\t{\n\t\t\treturn sortedIndexes.get(sortCriteria)[position];\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn position;\n\t\t}\n\t}\n\n\tpublic boolean isVarpInCurrentTaskType(int varpId)\n\t{\n\t\treturn currentTaskTypeVarps.contains(varpId);\n\t}\n\n\tpublic void clearTaskTypes()\n\t{\n\t\tthis._taskTypes.clear();\n\t}\n\n\t/**\n\t * Get a map of task type json names to task type\n\t *\n\t * @return Hashmap of TaskType indexed by task type json name\n\t */\n\tpublic CompletableFuture\u003cHashMap\u003cString, TaskType\u003e\u003e getTaskTypesByJsonName()\n\t{\n\t\tif (_taskTypes.size() \u003e 0)\n\t\t{\n\t\t\treturn CompletableFuture.completedFuture(_taskTypes);\n\t\t}\n\n\t\ttry\n\t\t{\n\t\t\tCompletableFuture\u003cHashMap\u003cString, TaskType\u003e\u003e future \u003d new CompletableFuture\u003c\u003e();\n\t\t\tfutureExecutor.submit(() -\u003e\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\t_taskTypes \u003d taskDataClient.getTaskTypes();\n\t\t\t\t\tfuture.complete(_taskTypes);\n\t\t\t\t}\n\t\t\t\tcatch (Exception e)\n\t\t\t\t{\n\t\t\t\t\tfuture.completeExceptionally(e);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn future;\n\t\t}\n\t\tcatch (Exception ex)\n\t\t{\n\t\t\tlog.error(\"Unable to populate task types from data client\", ex);\n\t\t\treturn CompletableFuture.completedFuture(new HashMap\u003c\u003e());\n\t\t}\n\t}\n\n\tpublic CompletableFuture\u003cHashMap\u003cInteger, String\u003e\u003e getStringEnumValuesAsync(String enumName)\n\t{\n\t\tInteger enumId \u003d currentTaskType.getStringEnumMap().get(enumName);\n\t\tif (enumId \u003d\u003d null)\n\t\t{\n\t\t\treturn CompletableFuture.completedFuture(new HashMap\u003c\u003e());\n\t\t}\n\n\t\tCompletableFuture\u003cHashMap\u003cInteger, String\u003e\u003e future \u003d new CompletableFuture\u003c\u003e();\n\t\tclientThread.invoke(() -\u003e {\n\t\t\ttry\n\t\t\t{\n\t\t\t\tEnumComposition enumComposition \u003d client.getEnum(enumId);\n\t\t\t\tint[] keys \u003d enumComposition.getKeys();\n\t\t\t\tHashMap\u003cInteger, String\u003e map \u003d new HashMap\u003c\u003e();\n\t\t\t\tfor (int key : keys)\n\t\t\t\t{\n\t\t\t\t\tmap.put(key, enumComposition.getStringValue(key));\n\t\t\t\t}\n\t\t\t\tfuture.complete(map);\n\t\t\t}\n\t\t\tcatch (Exception ex)\n\t\t\t{\n\t\t\t\tlog.error(\"Error getting string enum values\", ex);\n\t\t\t\tfuture.completeExceptionally(ex);\n\t\t\t}\n\t\t});\n\t\treturn future;\n\t}\n\n\tpublic void applySave(TaskType saveTaskType, HashMap\u003cInteger, ConfigTaskSave\u003e saveData)\n\t{\n\t\tString currentTaskTypeName \u003d currentTaskType.getTaskJsonName();\n\t\tString saveTaskTypeName \u003d saveTaskType.getTaskJsonName();\n\t\tif (!currentTaskTypeName.equals(saveTaskTypeName))\n\t\t{\n\t\t\tlog.warn(\"Cannot apply save, task types do not match current\u003d{} save\u003d{}\", currentTaskTypeName, saveTaskTypeName);\n\t\t\treturn;\n\t\t}\n\n\t\tfor (TaskFromStruct task : getTasks())\n\t\t{\n\t\t\tConfigTaskSave configTaskSave \u003d saveData.get(task.getStructId());\n\t\t\tif (configTaskSave \u003d\u003d null)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\ttask.loadConfigSave(configTaskSave);\n\t\t}\n\t}\n\n\tpublic List\u003cTaskFromStruct\u003e getTasksFromVarpId(Integer varpId)\n\t{\n\t\tint varpIndex \u003d getCurrentTaskType().getTaskVarps().indexOf(varpId);\n\t\tint minTaskId \u003d varpIndex * 32;\n\t\tint maxTaskId \u003d minTaskId + 32;\n\n\t\treturn getTasks().stream().filter(t -\u003e {\n\t\t\tint taskId \u003d t.getIntParam(\"id\");\n\t\t\treturn taskId \u003e\u003d minTaskId \u0026\u0026 taskId \u003c\u003d maxTaskId;\n\t\t}).collect(Collectors.toList());\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/data/task/TaskService.java"},{"fileName":"TaskType.java","content":"package net.reldo.taskstracker.data.task;\r\n\r\nimport java.awt.image.BufferedImage;\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.HashSet;\r\nimport java.util.concurrent.CompletableFuture;\r\nimport lombok.Getter;\r\nimport net.reldo.taskstracker.data.jsondatastore.types.FilterConfig;\r\nimport net.reldo.taskstracker.data.jsondatastore.types.FilterType;\r\nimport net.reldo.taskstracker.data.jsondatastore.types.TaskCompletionCountTierDefinition;\r\nimport net.reldo.taskstracker.data.jsondatastore.types.TaskPointTierDefinition;\r\nimport net.reldo.taskstracker.data.jsondatastore.types.TaskTypeDefinition;\r\nimport net.runelite.api.Client;\r\nimport net.runelite.api.EnumComposition;\r\nimport net.runelite.client.callback.ClientThread;\r\nimport net.runelite.client.game.SpriteManager;\r\n\r\npublic class TaskType\r\n{\r\n\t@Getter\r\n\tprivate final HashMap\u003cInteger, BufferedImage\u003e spritesById \u003d new HashMap\u003c\u003e();\r\n\t@Getter\r\n\tprivate final HashMap\u003cInteger, BufferedImage\u003e tierSprites \u003d new HashMap\u003c\u003e();\r\n\t@Getter\r\n\tprivate final HashMap\u003cInteger, Integer\u003e tierPoints \u003d new HashMap\u003c\u003e();\r\n\r\n\tprivate final Client client;\r\n\tprivate final ClientThread clientThread;\r\n\tprivate final SpriteManager spriteManager;\r\n\tprivate final TaskTypeDefinition _taskTypeDefinition;\r\n\r\n\tpublic TaskType(Client client, ClientThread clientThread, SpriteManager spriteManager, TaskTypeDefinition taskTypeDefinition)\r\n\t{\r\n\t\tthis.client \u003d client;\r\n\t\tthis.clientThread \u003d clientThread;\r\n\t\tthis.spriteManager \u003d spriteManager;\r\n\t\tthis._taskTypeDefinition \u003d taskTypeDefinition;\r\n\t}\r\n\r\n\tpublic CompletableFuture\u003cBoolean\u003e loadTaskTypeDataAsync()\r\n\t{\r\n\t\tCompletableFuture\u003cBoolean\u003e future \u003d new CompletableFuture\u003c\u003e();\r\n\t\tclientThread.invoke(() -\u003e {\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tgetButtonFiltersSpriteIds().forEach((spriteId) -\u003e {\r\n\t\t\t\t\tBufferedImage spriteImage \u003d spriteManager.getSprite(spriteId, 0);\r\n\t\t\t\t\tspritesById.put(spriteId, spriteImage);\r\n\t\t\t\t});\r\n\t\t\t\t_taskTypeDefinition.getTierSpriteIdMap().forEach((idKey, spriteId) -\u003e {\r\n\t\t\t\t\tInteger tierId \u003d Integer.parseInt(idKey);\r\n\t\t\t\t\tBufferedImage spriteImage \u003d spriteManager.getSprite(spriteId, 0);\r\n\t\t\t\t\ttierSprites.put(tierId, spriteImage);\r\n\t\t\t\t});\r\n\t\t\t\tif (_taskTypeDefinition.getIntEnumMap().containsKey(\"tierPoints\"))\r\n\t\t\t\t{\r\n\t\t\t\t\tint enumId \u003d _taskTypeDefinition.getIntEnumMap().get(\"tierPoints\");\r\n\t\t\t\t\tEnumComposition enumComposition \u003d client.getEnum(enumId);\r\n\t\t\t\t\tint[] keys \u003d enumComposition.getKeys();\r\n\t\t\t\t\tfor (int key : keys)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttierPoints.put(key, enumComposition.getIntValue(key));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfuture.complete(true);\r\n\t\t\t}\r\n\t\t\tcatch (Exception e)\r\n\t\t\t{\r\n\t\t\t\tfuture.completeExceptionally(e);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn future;\r\n\t}\r\n\r\n\tpublic String getFilterConfigPrefix()\r\n\t{\r\n\t\treturn _taskTypeDefinition.getTaskJsonName() + \".\";\r\n\t}\r\n\r\n\tprivate HashSet\u003cInteger\u003e getButtonFiltersSpriteIds()\r\n\t{\r\n\t\tHashSet\u003cInteger\u003e sprites \u003d new HashSet\u003c\u003e();\r\n\t\t_taskTypeDefinition.getFilters().stream().filter(\r\n\t\t\t(filterConfig) -\u003e filterConfig.getFilterType().equals(FilterType.BUTTON_FILTER)\r\n\t\t).forEach((filterConfig) -\u003e {\r\n\t\t\tif (filterConfig.getCustomItems() !\u003d null)\r\n\t\t\t{\r\n\t\t\t\tfilterConfig.getCustomItems().forEach((customSprite) -\u003e {\r\n\t\t\t\t\tInteger spriteId \u003d customSprite.getSpriteId();\r\n\t\t\t\t\tif (spriteId \u003d\u003d null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsprites.add(spriteId);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn sprites;\r\n\t}\r\n\r\n\tpublic ArrayList\u003cInteger\u003e getTaskVarps()\r\n\t{\r\n\t\treturn _taskTypeDefinition.getTaskVarps();\r\n\t}\r\n\r\n\tpublic String getTaskJsonName()\r\n\t{\r\n\t\treturn _taskTypeDefinition.getTaskJsonName();\r\n\t}\r\n\r\n\tpublic HashMap\u003cString, Integer\u003e getIntParamMap()\r\n\t{\r\n\t\treturn _taskTypeDefinition.getIntParamMap();\r\n\t}\r\n\r\n\tpublic HashMap\u003cString, Integer\u003e getStringParamMap()\r\n\t{\r\n\t\treturn _taskTypeDefinition.getStringParamMap();\r\n\t}\r\n\r\n\tpublic HashMap\u003cString, Integer\u003e getStringEnumMap()\r\n\t{\r\n\t\treturn _taskTypeDefinition.getStringEnumMap();\r\n\t}\r\n\r\n\tpublic String getName()\r\n\t{\r\n\t\treturn _taskTypeDefinition.getName();\r\n\t}\r\n\r\n\tpublic ArrayList\u003cFilterConfig\u003e getFilters()\r\n\t{\r\n\t\treturn _taskTypeDefinition.getFilters();\r\n\t}\r\n\r\n\tpublic int[] getOtherVarps()\r\n\t{\r\n\t\treturn _taskTypeDefinition.getOtherVarps();\r\n\t}\r\n\r\n\tpublic int[] getVarbits()\r\n\t{\r\n\t\treturn _taskTypeDefinition.getVarbits();\r\n\t}\r\n\r\n\tpublic int getTaskCompletedScriptId()\r\n\t{\r\n\t\treturn _taskTypeDefinition.getTaskCompletedScriptId();\r\n\t}\r\n\r\n\tpublic ArrayList\u003cTaskPointTierDefinition\u003e getTaskPointTiers()\r\n\t{\r\n\t\tArrayList\u003cTaskPointTierDefinition\u003e tiers \u003d _taskTypeDefinition.getTaskPointTiers();\r\n\t\treturn tiers !\u003d null ? tiers : new ArrayList\u003c\u003e();\r\n\t}\r\n\r\n\tpublic ArrayList\u003cTaskCompletionCountTierDefinition\u003e getTaskCompletionCountTiers()\r\n\t{\r\n\t\tArrayList\u003cTaskCompletionCountTierDefinition\u003e unlocks \u003d _taskTypeDefinition.getTaskCompletionCountTiers();\r\n\t\treturn unlocks !\u003d null ? unlocks : new ArrayList\u003c\u003e();\r\n\t}\r\n}\r\n","filePath":"src/main/java/net/reldo/taskstracker/data/task/TaskType.java"},{"fileName":"ConfigTaskSave.java","content":"package net.reldo.taskstracker.data.task;\n\nimport com.google.gson.annotations.Expose;\n\npublic class ConfigTaskSave\n{\n\t@Expose\n\tpublic final long completed;\n\t@Expose\n\tpublic final long tracked;\n\t@Expose\n\tpublic final Integer structId;\n\t@Expose\n\tpublic final long ignored;\n\t@Expose\n\tpublic final String note;\n\n\tpublic ConfigTaskSave(TaskFromStruct task)\n\t{\n\t\tcompleted \u003d task.getCompletedOn();\n\t\ttracked \u003d task.getTrackedOn();\n\t\tignored \u003d task.getIgnoredOn();\n\t\tstructId \u003d task.getStructId();\n\t\tnote \u003d task.getNote();\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/data/task/ConfigTaskSave.java"},{"fileName":"FilterService.java","content":"package net.reldo.taskstracker.data.task.filters;\n\nimport java.util.HashMap;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport lombok.extern.slf4j.Slf4j;\nimport net.reldo.taskstracker.data.jsondatastore.FilterDataClient;\nimport net.reldo.taskstracker.data.jsondatastore.types.FilterConfig;\n\n@Singleton\n@Slf4j\npublic class FilterService\n{\n\t@Inject\n\tprivate FilterDataClient filterDataClient;\n\n\t// Filter config cache\n\tprivate HashMap\u003cString, FilterConfig\u003e _filterConfigs \u003d new HashMap\u003c\u003e();\n\n\tpublic FilterConfig getGlobalFilterByKey(String filterKey)\n\t{\n\t\t// Instantiate filterConfigs if not already\n\t\tif (_filterConfigs \u003d\u003d null || _filterConfigs.isEmpty())\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\t_filterConfigs \u003d filterDataClient.getFilterConfigs();\n\t\t\t\treturn _filterConfigs.get(filterKey);\n\t\t\t}\n\t\t\tcatch (Exception ex)\n\t\t\t{\n\t\t\t\tlog.error(\"Unable to get filter configs\", ex);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn _filterConfigs.get(filterKey);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic void clearFilterConfigs()\n\t{\n\t\tthis._filterConfigs.clear();\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/data/task/filters/FilterService.java"},{"fileName":"ParamDropdownFilter.java","content":"package net.reldo.taskstracker.data.task.filters;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.reldo.taskstracker.TasksTrackerPlugin;\nimport net.reldo.taskstracker.data.task.TaskFromStruct;\nimport net.runelite.client.config.ConfigManager;\n\n@Slf4j\npublic class ParamDropdownFilter extends Filter\n{\n\tprivate final String paramName;\n\tprivate final String filterConfigKey;\n\tprivate final ConfigManager configManager;\n\n\tpublic ParamDropdownFilter(ConfigManager configManager, String paramName, String filterConfigKey)\n\t{\n\t\tthis.configManager \u003d configManager;\n\t\tthis.paramName \u003d paramName;\n\t\tthis.filterConfigKey \u003d filterConfigKey;\n\t}\n\n\t@Override\n\tpublic boolean meetsCriteria(TaskFromStruct task)\n\t{\n\t\tString configValue \u003d configManager.getConfiguration(TasksTrackerPlugin.CONFIG_GROUP_NAME, filterConfigKey);\n\t\tboolean isEmptyFilterSelection \u003d configValue \u003d\u003d null || configValue.isEmpty() || configValue.equals(\"-1\");\n\t\tif (isEmptyFilterSelection)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\tif (task.getIntParam(paramName) !\u003d null)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tInteger parsedConfigValue \u003d Integer.parseInt(configValue);\n\t\t\t\treturn parsedConfigValue.equals(task.getIntParam(paramName));\n\t\t\t}\n\t\t\tcatch (Exception ex)\n\t\t\t{\n\t\t\t\tlog.warn(\"meetsCriteria error parsing config value for  {}\", configValue);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/data/task/filters/ParamDropdownFilter.java"},{"fileName":"FilterMatcher.java","content":"package net.reldo.taskstracker.data.task.filters;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport lombok.extern.slf4j.Slf4j;\nimport net.reldo.taskstracker.TasksTrackerConfig;\nimport net.reldo.taskstracker.config.ConfigValues.CompletedFilterValues;\nimport net.reldo.taskstracker.config.ConfigValues.IgnoredFilterValues;\nimport net.reldo.taskstracker.config.ConfigValues.TrackedFilterValues;\nimport net.reldo.taskstracker.data.jsondatastore.types.FilterType;\nimport net.reldo.taskstracker.data.task.TaskFromStruct;\nimport net.reldo.taskstracker.data.task.TaskType;\nimport net.runelite.client.config.ConfigManager;\n\n/**\n * Centralized filter matching logic for tasks.\n */\n@Slf4j\npublic class FilterMatcher\n{\n\tprivate final ConfigManager configManager;\n\tprivate final TasksTrackerConfig config;\n\tprivate final List\u003cFilter\u003e subFilters;\n\n\tpublic FilterMatcher(ConfigManager configManager, TasksTrackerConfig config, TaskType taskType)\n\t{\n\t\tthis.configManager \u003d configManager;\n\t\tthis.config \u003d config;\n\t\tthis.subFilters \u003d createSubFilters(taskType);\n\t}\n\n\t/**\n\t * Builds the list of sub-filters for a task type, from its JSON-defined filter config.\n\t * These correspond to the buttons/dropdowns in SubFilterPanel.\n\t */\n\tprivate List\u003cFilter\u003e createSubFilters(TaskType taskType)\n\t{\n\t\tList\u003cFilter\u003e filters \u003d new ArrayList\u003c\u003e();\n\n\t\tif (taskType \u003d\u003d null)\n\t\t{\n\t\t\treturn filters;\n\t\t}\n\n\t\ttaskType.getFilters().forEach((filterConfig) -\u003e {\n\t\t\tString paramName \u003d filterConfig.getValueName();\n\t\t\tString configKey \u003d taskType.getFilterConfigPrefix() + filterConfig.getConfigKey();\n\n\t\t\tif (filterConfig.getFilterType().equals(FilterType.BUTTON_FILTER))\n\t\t\t{\n\t\t\t\tfilters.add(new ParamButtonFilter(configManager, paramName, configKey));\n\t\t\t}\n\t\t\telse if (filterConfig.getFilterType().equals(FilterType.DROPDOWN_FILTER))\n\t\t\t{\n\t\t\t\tfilters.add(new ParamDropdownFilter(configManager, paramName, configKey));\n\t\t\t}\n\t\t});\n\n\t\treturn filters;\n\t}\n\n\t/**\n\t * Checks if a task meets current UI filters.\n\t * Show all by default, each filter then restricts. Fast fail out.\n\t *\n\t * @param task           The task to check\n\t * @param taskTextFilter The current text search filter, already lowercased (can be null)\n\t * @return true if the task passes all filters, false otherwise\n\t */\n\tpublic boolean meetsFilterCriteria(TaskFromStruct task, String taskTextFilter)\n\t{\n\t\t// Text filter\n\t\tif (taskTextFilter !\u003d null \u0026\u0026 !taskTextFilter.isEmpty())\n\t\t{\n\t\t\tString nameLowercase \u003d task.getName().toLowerCase();\n\t\t\tString descriptionLowercase \u003d task.getDescription().toLowerCase();\n\n\t\t\tif (!nameLowercase.contains(taskTextFilter) \u0026\u0026 !descriptionLowercase.contains(taskTextFilter))\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Sub-filters (UI tier buttons/dropdowns from SubFilterPanel)\n\t\tfor (Filter filter : subFilters)\n\t\t{\n\t\t\tif (!filter.meetsCriteria(task))\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Completion Status Filter\n\t\tif (config.completedFilter().equals(CompletedFilterValues.INCOMPLETE) \u0026\u0026 task.isCompleted())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\tif (config.completedFilter().equals(CompletedFilterValues.COMPLETE) \u0026\u0026 !task.isCompleted())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\t// Ignored filter\n\t\tif (config.ignoredFilter().equals(IgnoredFilterValues.NOT_IGNORED) \u0026\u0026 task.isIgnored())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\tif (config.ignoredFilter().equals(IgnoredFilterValues.IGNORED) \u0026\u0026 !task.isIgnored())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\t// Tracked filter\n\t\tif (config.trackedFilter().equals(TrackedFilterValues.UNTRACKED) \u0026\u0026 task.isTracked())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\tif (config.trackedFilter().equals(TrackedFilterValues.TRACKED) \u0026\u0026 !task.isTracked())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/data/task/filters/FilterMatcher.java"},{"fileName":"ParamButtonFilter.java","content":"package net.reldo.taskstracker.data.task.filters;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.reldo.taskstracker.TasksTrackerPlugin;\nimport net.reldo.taskstracker.data.task.TaskFromStruct;\nimport net.runelite.client.config.ConfigManager;\n\n@Slf4j\npublic class ParamButtonFilter extends Filter\n{\n\tprivate final String paramName;\n\tprivate final String filterConfigKey;\n\tprivate final ConfigManager configManager;\n\n\tpublic ParamButtonFilter(ConfigManager configManager, String paramName, String filterConfigKey)\n\t{\n\t\tthis.configManager \u003d configManager;\n\t\tthis.paramName \u003d paramName;\n\t\tthis.filterConfigKey \u003d filterConfigKey;\n\t}\n\n\t@Override\n\tpublic boolean meetsCriteria(TaskFromStruct task)\n\t{\n\t\tString configValue \u003d configManager.getConfiguration(TasksTrackerPlugin.CONFIG_GROUP_NAME, filterConfigKey);\n\t\tboolean isEmptyFilterSelection \u003d configValue \u003d\u003d null || configValue.isEmpty() || configValue.equals(\"-1\");\n\t\tif (isEmptyFilterSelection)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn configValue.contains(\"f-\" + task.getIntParam(paramName) + \"-f\");\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/data/task/filters/ParamButtonFilter.java"},{"fileName":"Filter.java","content":"package net.reldo.taskstracker.data.task.filters;\n\nimport net.reldo.taskstracker.data.task.TaskFromStruct;\n\npublic abstract class Filter\n{\n\tpublic abstract boolean meetsCriteria(TaskFromStruct task);\n}\n","filePath":"src/main/java/net/reldo/taskstracker/data/task/filters/Filter.java"},{"fileName":"ConfigValues.java","content":"package net.reldo.taskstracker.config;\n\n\npublic class ConfigValues\n{\n\n\tpublic enum CompletedFilterValues\n\t{\n\t\tCOMPLETE_AND_INCOMPLETE(\"Both\"),\n\t\tCOMPLETE(\"Complete\"),\n\t\tINCOMPLETE(\"Incomplete\");\n\n\t\tpublic final String name;\n\n\t\tpublic String toString()\n\t\t{\n\t\t\treturn name;\n\t\t}\n\n\t\tCompletedFilterValues(String name)\n\t\t{\n\t\t\tthis.name \u003d name;\n\t\t}\n\t}\n\n\tpublic enum TrackedFilterValues\n\t{\n\t\tTRACKED_AND_UNTRACKED(\"Both\"),\n\t\tTRACKED(\"Tracked\"),\n\t\tUNTRACKED(\"Untracked\");\n\n\t\tpublic final String name;\n\n\t\tpublic String toString()\n\t\t{\n\t\t\treturn name;\n\t\t}\n\n\t\tTrackedFilterValues(String name)\n\t\t{\n\t\t\tthis.name \u003d name;\n\t\t}\n\t}\n\n\tpublic enum IgnoredFilterValues\n\t{\n\t\tNOT_IGNORED(\"Not Ignored\"),\n\t\tIGNORED_AND_NOT_IGNORED(\"Both\"),\n\t\tIGNORED(\"Ignored\");\n\n\t\tpublic final String name;\n\n\t\tpublic String toString()\n\t\t{\n\t\t\treturn name;\n\t\t}\n\n\t\tIgnoredFilterValues(String name)\n\t\t{\n\t\t\tthis.name \u003d name;\n\t\t}\n\t}\n\n\tpublic enum TaskListTabs\n\t{\n\t\tTAB_ONE(\"tab1\"),\n\t\tTAB_TWO(\"tab2\"),\n\t\tTAB_THREE(\"tab3\");\n\n\t\tpublic final String configID;\n\n\t\tTaskListTabs(String configID)\n\t\t{\n\t\t\tthis.configID \u003d configID;\n\t\t}\n\t}\n\n\tpublic enum SortDirections\n\t{\n\t\tASCENDING,\n\t\tDESCENDING;\n\t}\n\n}\n","filePath":"src/main/java/net/reldo/taskstracker/config/ConfigValues.java"},{"fileName":"TasksTrackerPlugin.java","content":"package net.reldo.taskstracker;\n\nimport com.google.gson.Gson;\nimport com.google.inject.Binder;\nimport com.google.inject.Provides;\nimport java.awt.Color;\nimport java.awt.Toolkit;\nimport java.awt.datatransfer.StringSelection;\nimport java.awt.image.BufferedImage;\nimport java.math.BigInteger;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.EnumMap;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Optional;\nimport java.util.Set;\nimport java.util.concurrent.CompletableFuture;\nimport javax.annotation.Nullable;\nimport javax.inject.Inject;\nimport javax.inject.Named;\nimport javax.swing.JDialog;\nimport javax.swing.JOptionPane;\nimport javax.swing.SwingUtilities;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.reldo.taskstracker.data.Export;\nimport net.reldo.taskstracker.data.LongSerializer;\nimport net.reldo.taskstracker.data.TasksSummary;\nimport net.reldo.taskstracker.data.TrackerConfigStore;\nimport net.reldo.taskstracker.data.jsondatastore.reader.DataStoreReader;\nimport net.reldo.taskstracker.data.jsondatastore.reader.HttpDataStoreReader;\nimport net.reldo.taskstracker.data.reldo.ReldoImport;\nimport net.reldo.taskstracker.data.task.TaskFromStruct;\nimport net.reldo.taskstracker.data.task.TaskService;\nimport net.reldo.taskstracker.data.task.TaskType;\nimport net.reldo.taskstracker.data.task.filters.FilterMatcher;\nimport net.reldo.taskstracker.data.task.filters.FilterService;\nimport net.reldo.taskstracker.panel.TasksTrackerPluginPanel;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.Experience;\nimport net.runelite.api.GameState;\nimport net.runelite.api.Skill;\nimport net.runelite.api.events.CommandExecuted;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.StatChanged;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.chat.ChatMessageBuilder;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.chat.QueuedMessage;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.config.RuneScapeProfileType;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.events.ProfileChanged;\nimport net.runelite.client.game.SpriteManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.plugins.PluginManager;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.util.ImageUtil;\nimport net.runelite.client.util.LinkBrowser;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Tasks Tracker\"\n)\npublic class TasksTrackerPlugin extends Plugin\n{\n\tpublic static final String CONFIG_GROUP_NAME \u003d \"tasks-tracker\";\n\n\tpublic int[] playerSkills;\n\n\tpublic String taskTextFilter;\n\n\tpublic TasksTrackerPluginPanel pluginPanel;\n\n\tprivate static final long VARP_UPDATE_THROTTLE_DELAY_MS \u003d 7 * 1000;\n\n\tprivate boolean forceUpdateVarpsFlag \u003d false;\n\tprivate Set\u003cInteger\u003e varpIdsToUpdate \u003d new HashSet\u003c\u003e();\n\tprivate long lastVarpUpdate \u003d 0;\n\tprivate NavigationButton navButton;\n\tprivate RuneScapeProfileType currentProfileType;\n\tprivate final Map\u003cSkill, Integer\u003e oldExperience \u003d new EnumMap\u003c\u003e(Skill.class);\n\n\t@Inject\n\t@Named(\"runelite.version\")\n\tprivate String runeliteVersion;\n\t@Inject\n\tprivate Gson gson;\n\t@Inject\n\tprivate Client client;\n\t@Inject\n\tprivate SpriteManager spriteManager;\n\t@Inject\n\tprivate PluginManager pluginManager;\n\t@Inject\n\tprivate ClientToolbar clientToolbar;\n\t@Inject\n\tprivate ClientThread clientThread;\n\t@Inject\n\tprivate ChatMessageManager chatMessageManager;\n\t@Getter\n\t@Inject\n\tprivate ConfigManager configManager;\n\t@Getter\n\t@Inject\n\tprivate TasksTrackerConfig config;\n\n\t@Inject\n\tprivate TrackerConfigStore trackerConfigStore;\n\t@Inject\n\tprivate TaskService taskService;\n\t@Inject\n\tprivate FilterService filterService;\n\n\t@Getter\n\tprivate FilterMatcher filterMatcher;\n\n\t@Override\n\tpublic void configure(Binder binder)\n\t{\n\t\tbinder.bind(DataStoreReader.class).to(HttpDataStoreReader.class);\n\t\tsuper.configure(binder);\n\t}\n\n\t@Provides\n\tTasksTrackerConfig getConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(TasksTrackerConfig.class);\n\t}\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\ttry\n\t\t{\n\t\t\tString taskTypeJsonName \u003d config.taskTypeJsonName();\n\t\t\ttaskService.setTaskType(taskTypeJsonName);\n\t\t}\n\t\tcatch (Exception ex)\n\t\t{\n\t\t\tlog.error(\"error setting task type in startUp\", ex);\n\t\t}\n\n\t\tforceUpdateVarpsFlag \u003d false;\n\n\t\tpluginPanel \u003d new TasksTrackerPluginPanel(this, config, spriteManager, taskService);\n\n\t\tboolean isLoggedIn \u003d isLoggedInState(client.getGameState());\n\t\tpluginPanel.setLoggedIn(isLoggedIn);\n\t\tif (isLoggedIn)\n\t\t{\n\t\t\tforceUpdateVarpsFlag \u003d true;\n\t\t}\n\n\t\tfinal BufferedImage icon \u003d ImageUtil.loadImageResource(getClass(), \"panel_icon.png\");\n\t\tnavButton \u003d NavigationButton.builder()\n\t\t\t.tooltip(\"Task Tracker\")\n\t\t\t.icon(icon)\n\t\t\t.priority(5)\n\t\t\t.panel(pluginPanel)\n\t\t\t.build();\n\t\tclientToolbar.addNavigation(navButton);\n\n\t\tlog.info(\"Tasks Tracker started!\");\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\tpluginPanel.saveCurrentTabFilters();\n\t\tpluginPanel.hideLoggedInPanel();\n\t\tpluginPanel \u003d null;\n\t\ttaskService.clearTaskTypes();\n\t\tclientToolbar.removeNavigation(navButton);\n\t\tlog.info(\"Tasks Tracker stopped!\");\n\t}\n\n\t@Subscribe\n\tpublic void onCommandExecuted(CommandExecuted commandExecuted)\n\t{\n\t\tif (!commandExecuted.getCommand().startsWith(\"tt\"))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (commandExecuted.getCommand().equalsIgnoreCase(\"tt-process-varp\"))\n\t\t{\n\t\t\tString[] args \u003d commandExecuted.getArguments();\n\t\t\tif (args.length \u003d\u003d 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tint varpId \u003d Integer.parseInt(args[0]);\n\t\t\t\tlog.debug(\"Processing varpId \" + varpId);\n\t\t\t\tprocessVarpAndUpdateTasks(varpId);\n\t\t\t}\n\t\t\tcatch (NumberFormatException e)\n\t\t\t{\n\t\t\t\tlog.debug(\"Invalid varpId, provide a valid integer\");\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onVarbitChanged(VarbitChanged varbitChanged)\n\t{\n\t\tif (forceUpdateVarpsFlag || taskService.isTaskTypeChanged())\n\t\t{\n\t\t\t// Force update is coming on next game tick, so ignore varbit change events\n\t\t\treturn;\n\t\t}\n\t\tint varpId \u003d varbitChanged.getVarpId();\n\t\tif (!taskService.isVarpInCurrentTaskType(varpId))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tvarpIdsToUpdate.add(varbitChanged.getVarpId());\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged configChanged)\n\t{\n\t\tif (!configChanged.getGroup().equals(CONFIG_GROUP_NAME))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlog.debug(\"onConfigChanged {} {}\", configChanged.getKey(), configChanged.getNewValue());\n\t\tif (configChanged.getKey().equals(\"untrackUponCompletion\"))\n\t\t{\n\t\t\tSwingUtilities.invokeLater(pluginPanel::refreshAllTasks);\n\n\t\t\tif (config.untrackUponCompletion())\n\t\t\t{\n\t\t\t\tforceVarpUpdate();\n\t\t\t}\n\t\t}\n\n\t\tif (configChanged.getKey().equals(\"filterPanelCollapsible\"))\n\t\t{\n\t\t\tSwingUtilities.invokeLater(pluginPanel::redraw);\n\t\t}\n\n\t\tif (configChanged.getKey().startsWith(\"tab\")) // task list tab config items all start \u0027tab#\u0027\n\t\t{\n\t\t\tpluginPanel.refreshFilterButtonsFromConfig(config.taskListTab());\n\t\t\trefreshAllTasks();\n\t\t}\n\n\t\tif (configChanged.getKey().equals(\"taskPanelBatchSize\"))\n\t\t{\n\t\t\tpluginPanel.taskListPanel.setBatchSize(config.taskPanelBatchSize());\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged)\n\t{\n\t\tlog.debug(\"onGameStateChanged {}\", gameStateChanged.getGameState().toString());\n\t\tGameState newGameState \u003d gameStateChanged.getGameState();\n\t\tRuneScapeProfileType newProfileType \u003d RuneScapeProfileType.getCurrent(client);\n\n\t\tSwingUtilities.invokeLater(() -\u003e pluginPanel.setLoggedIn(isLoggedInState(newGameState)));\n\n\t\t// Logged in\n\t\tif (newGameState \u003d\u003d GameState.LOGGING_IN)\n\t\t{\n\t\t\tforceUpdateVarpsFlag \u003d true;\n\t\t}\n\t\t// Changed game mode\n\t\tif (isLoggedInState(newGameState) \u0026\u0026 currentProfileType !\u003d null \u0026\u0026 currentProfileType !\u003d newProfileType)\n\t\t{\n\t\t\tforceUpdateVarpsFlag \u003d true;\n\t\t}\n\n\t\tcurrentProfileType \u003d newProfileType;\n\t}\n\n\tprivate boolean isLoggedInState(GameState gameState)\n\t{\n\t\treturn gameState \u003d\u003d GameState.LOGGED_IN || gameState \u003d\u003d GameState.HOPPING || gameState \u003d\u003d GameState.LOADING;\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick gameTick)\n\t{\n\t\tif (forceUpdateVarpsFlag || taskService.isTaskTypeChanged())\n\t\t{\n\t\t\tlog.debug(\"forceUpdateVarpsFlag game tick {} {}\", forceUpdateVarpsFlag, taskService.isTaskTypeChanged());\n\t\t\ttrackerConfigStore.loadCurrentTaskTypeFromConfig();\n\t\t\tforceVarpUpdate();\n\t\t\tupdateFilterMatcher();\n\t\t\tSwingUtilities.invokeLater(() -\u003e pluginPanel.drawNewTaskType());\n\t\t\tforceUpdateVarpsFlag \u003d false;\n\t\t\ttaskService.setTaskTypeChanged(false);\n\t\t}\n\n\t\t// Flush throttled varp updates\n\t\tlong currentTimeEpoch \u003d System.currentTimeMillis();\n\t\tif (currentTimeEpoch - lastVarpUpdate \u003e VARP_UPDATE_THROTTLE_DELAY_MS)\n\t\t{\n\t\t\tflushVarpUpdates(varpIdsToUpdate);\n\t\t\tvarpIdsToUpdate \u003d new HashSet\u003c\u003e();\n\t\t\tlastVarpUpdate \u003d currentTimeEpoch;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onStatChanged(StatChanged statChanged)\n\t{\n\t\t// @todo deprecate one of these, we don\u0027t need to track player skills twice.\n\t\t// Cache current player skills\n\t\tint[] newSkills \u003d client.getRealSkillLevels();\n\t\tboolean changed \u003d !Arrays.equals(playerSkills, newSkills);\n\t\tif (changed)\n\t\t{\n\t\t\tplayerSkills \u003d client.getRealSkillLevels();\n\t\t}\n\n\t\tfinal Skill skill \u003d statChanged.getSkill();\n\n\t\t// Modified from m0bilebtw\u0027s modification from Nightfirecat\u0027s virtual level ups plugin\n\t\tfinal int xpAfter \u003d client.getSkillExperience(skill);\n\t\tfinal int levelAfter \u003d Experience.getLevelForXp(xpAfter);\n\t\tfinal int xpBefore \u003d oldExperience.getOrDefault(skill, -1);\n\t\tfinal int levelBefore \u003d xpBefore \u003d\u003d -1 ? -1 : Experience.getLevelForXp(xpBefore);\n\n\t\toldExperience.put(skill, xpAfter);\n\n\t\t// Do not proceed if any of the following are true:\n\t\t//  * xpBefore \u003d\u003d -1              (don\u0027t fire when first setting new known value)\n\t\t//  * xpAfter \u003c\u003d xpBefore         (do not allow 200m -\u003e 200m exp drops)\n\t\t//  * levelBefore \u003e\u003d levelAfter   (stop if we\u0027re not actually reaching a new level)\n\t\t//  * levelAfter \u003e MAX_REAL_LEVEL (stop if above 99)\n\t\tif (xpBefore \u003d\u003d -1 || xpAfter \u003c\u003d xpBefore || levelBefore \u003e\u003d levelAfter || levelAfter \u003e Experience.MAX_REAL_LEVEL)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// If we get here, \u0027skill\u0027 was leveled up!\n\t\tSwingUtilities.invokeLater(() -\u003e pluginPanel.taskListPanel.refreshTaskPanelsWithSkill(skill));\n\t}\n\n\t@Subscribe\n\tpublic void onProfileChanged(ProfileChanged profileChanged)\n\t{\n\t\tfinal Optional\u003cPlugin\u003e taskTrackerPlugin \u003d pluginManager.getPlugins().stream().filter(p -\u003e p.getName().equals(\"Tasks Tracker\")).findFirst();\n\t\tif (taskTrackerPlugin.isPresent() \u0026\u0026 pluginManager.isPluginEnabled(taskTrackerPlugin.get()))\n\t\t{\n\t\t\treloadTaskType();\n\t\t}\n\t}\n\n\tpublic void refreshAllTasks()\n\t{\n\t\tSwingUtilities.invokeLater(() -\u003e pluginPanel.refreshAllTasks());\n\t}\n\n\tpublic void reloadTaskType()\n\t{\n\t\ttaskService.clearTaskTypes();\n\t\tfilterService.clearFilterConfigs();\n\t\ttry\n\t\t{\n\t\t\tString taskTypeJsonName \u003d config.taskTypeJsonName();\n\t\t\ttaskService.setTaskType(taskTypeJsonName).thenAccept(isSet -\u003e {\n\t\t\t\tif (!isSet)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tupdateFilterMatcher();\n\t\t\t\tSwingUtilities.invokeLater(() -\u003e\n\t\t\t\t{\n\t\t\t\t\tpluginPanel.drawNewTaskType();\n\t\t\t\t\tpluginPanel.refreshFilterButtonsFromConfig(config.taskListTab());\n\t\t\t\t\tpluginPanel.refreshAllTasks();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\tcatch (Exception ex)\n\t\t{\n\t\t\tlog.error(\"error setting task type in reload\", ex);\n\t\t}\n\n\t}\n\n\tpublic void saveCurrentTaskTypeData()\n\t{\n\t\tlog.debug(\"saveCurrentTaskTypeData\");\n\t\ttrackerConfigStore.saveCurrentTaskTypeData();\n\t}\n\n\tpublic void openImportJsonDialog()\n\t{\n\t\tJOptionPane optionPane \u003d new JOptionPane(\"Paste import data into the text field below to import task tracker data.\", JOptionPane.INFORMATION_MESSAGE);\n\t\toptionPane.setWantsInput(true);\n\t\tJDialog inputDialog \u003d optionPane.createDialog(this.pluginPanel, \"Import Tasks Input\");\n\t\tinputDialog.setAlwaysOnTop(true);\n\t\tinputDialog.setVisible(true);\n\n\t\tif (optionPane.getInputValue().equals(\"\") || optionPane.getInputValue().equals(\"uninitializedValue\"))\n\t\t{\n\t\t\tthis.showMessageBox(\"Import Tasks Error\", \"Input was empty so no data has been imported.\", JOptionPane.ERROR_MESSAGE, false);\n\t\t\treturn;\n\t\t}\n\n\t\tString json \u003d \"\";\n\t\tReldoImport reldoImport;\n\t\ttry\n\t\t{\n\t\t\tjson \u003d (String) optionPane.getInputValue();\n\t\t\treldoImport \u003d this.gson.fromJson(json, ReldoImport.class);\n\t\t}\n\t\tcatch (Exception ex)\n\t\t{\n\t\t\tthis.showMessageBox(\"Import Tasks Error\", \"There was an issue importing task tracker data. \" + ex.getMessage(), JOptionPane.ERROR_MESSAGE, false);\n\t\t\tlog.error(\"There was an issue importing task tracker data.\", ex);\n\t\t\tlog.debug(\"reldoImport json: {}\", json);\n\t\t\treturn;\n\t\t}\n\n\t\tif (!reldoImport.taskTypeName.equalsIgnoreCase(config.taskTypeJsonName()))\n\t\t{\n\t\t\tthis.showMessageBox(\"Import Tasks Error\", String.format(\"Wrong task type. Select the %s task type to import this data.\", reldoImport.taskTypeName), JOptionPane.ERROR_MESSAGE, false);\n\t\t\treturn;\n\t\t}\n\n\t\toptionPane \u003d new JOptionPane(\"Importing tasks will overwrite task tracker settings and cannot be undone. Are you sure you want to import tasks?\", JOptionPane.WARNING_MESSAGE, JOptionPane.YES_NO_OPTION);\n\t\tJDialog confirmDialog \u003d optionPane.createDialog(this.pluginPanel, \"Import Tasks Overwrite Confirmation\");\n\t\tconfirmDialog.setAlwaysOnTop(true);\n\t\tconfirmDialog.setVisible(true);\n\n\t\tObject selectedValue \u003d optionPane.getValue();\n\t\tif (selectedValue \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (selectedValue.equals(JOptionPane.YES_OPTION))\n\t\t{\n\t\t\tHashMap\u003cInteger, TaskFromStruct\u003e tasksById \u003d new HashMap\u003c\u003e();\n\t\t\ttaskService.getTasks().forEach((task) -\u003e tasksById.put(task.getIntParam(\"id\"), task));\n\n\t\t\treldoImport.getTasks().forEach((id, reldoTaskSave) -\u003e {\n\t\t\t\tTaskFromStruct task \u003d tasksById.get(id);\n\t\t\t\ttask.loadReldoSave(reldoTaskSave);\n\t\t\t});\n\n\t\t\ttrackerConfigStore.saveCurrentTaskTypeData();\n\t\t\tpluginPanel.redraw();\n\t\t}\n\t}\n\n\t/**\n\t * Creates or updates the FilterMatcher for the current task type.\n\t * Should be called when the task type changes.\n\t */\n\tpublic void updateFilterMatcher()\n\t{\n\t\tthis.filterMatcher \u003d new FilterMatcher(\n\t\t\tconfigManager,\n\t\t\tconfig,\n\t\t\ttaskService.getCurrentTaskType()\n\t\t);\n\t}\n\n\tpublic void sendTotalsToChat()\n\t{\n\t\tif (filterMatcher \u003d\u003d null)\n\t\t{\n\t\t\tupdateFilterMatcher();\n\t\t}\n\n\t\tTasksSummary summary \u003d new TasksSummary(\n\t\t\ttaskService.getTasks(),\n\t\t\tfilterMatcher,\n\t\t\ttaskTextFilter\n\t\t);\n\n\t\tString taskTypeName \u003d taskService.getCurrentTaskType() !\u003d null\n\t\t\t? taskService.getCurrentTaskType().getTaskJsonName()\n\t\t\t: null;\n\n\t\tString message \u003d summary.formatChatMessage(taskTypeName, config.untrackUponCompletion());\n\n\t\tfinal String formattedMessage \u003d new ChatMessageBuilder()\n\t\t\t.append(Color.BLACK, message)\n\t\t\t.build();\n\n\t\tchatMessageManager.queue(\n\t\t\tQueuedMessage.builder()\n\t\t\t\t.type(ChatMessageType.CONSOLE)\n\t\t\t\t.runeLiteFormattedMessage(formattedMessage)\n\t\t\t\t.build());\n\t}\n\n\tpublic void copyJsonToClipboard()\n\t{\n\t\tclientThread.invokeLater(() -\u003e {\n\t\t\t// Not worried with this complexity on the client thread because it\u0027s from an infrequent button press\n\t\t\tString json \u003d getCurrentTaskTypeExportJson();\n\t\t\tfinal StringSelection stringSelection \u003d new StringSelection(json);\n\t\t\tToolkit.getDefaultToolkit().getSystemClipboard().setContents(stringSelection, null);\n\n\t\t\tString message \u003d \"Copied \" + taskService.getCurrentTaskType().getName() + \" data to clipboard!\";\n\t\t\tshowMessageBox(\"Data Exported!\", message, JOptionPane.INFORMATION_MESSAGE, true);\n\t\t});\n\t}\n\n\tprivate void forceVarpUpdate()\n\t{\n\t\tlog.debug(\"forceVarpUpdate\");\n\t\tprocessVarpAndUpdateTasks(null).thenAccept((processed) -\u003e {\n\t\t\tif (processed)\n\t\t\t{\n\t\t\t\tlog.debug(\"forceVarpUpdate processed complete, saving\");\n\t\t\t\tsaveCurrentTaskTypeData();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate void flushVarpUpdates(Set\u003cInteger\u003e varpIds)\n\t{\n\t\tlog.debug(\"Flushing throttled varp updates {}\", varpIds);\n\t\tvarpIds.forEach((id) -\u003e processVarpAndUpdateTasks(id).thenAccept(processed -\u003e {\n\t\t\tif (processed)\n\t\t\t{\n\t\t\t\tlog.debug(\"flushVarpUpdates processed complete, saving\");\n\t\t\t\tsaveCurrentTaskTypeData();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate CompletableFuture\u003cBoolean\u003e processTaskStatus(TaskFromStruct task)\n\t{\n\t\tCompletableFuture\u003cBoolean\u003e future \u003d new CompletableFuture\u003c\u003e();\n\t\tclientThread.invoke(() -\u003e {\n\t\t\tint taskId \u003d task.getIntParam(\"id\");\n\t\t\tint varbitIndex \u003d taskId / 32;\n\t\t\tint bitIndex \u003d taskId % 32;\n\t\t\ttry\n\t\t\t{\n\t\t\t\tint varpId \u003d task.getTaskType().getTaskVarps().get(varbitIndex);\n\t\t\t\tBigInteger varpValue \u003d BigInteger.valueOf(client.getVarpValue(varpId));\n\t\t\t\tboolean isTaskCompleted \u003d varpValue.testBit(bitIndex);\n\t\t\t\ttask.setCompleted(isTaskCompleted);\n\t\t\t\tif (isTaskCompleted \u0026\u0026 config.untrackUponCompletion())\n\t\t\t\t{\n\t\t\t\t\ttask.setTracked(false);\n\t\t\t\t}\n\t\t\t\tlog.debug(\"process taskFromStruct {} ({}) {}\", task.getStringParam(\"name\"), task.getIntParam(\"id\"), isTaskCompleted);\n\t\t\t\tfuture.complete(isTaskCompleted);\n\t\t\t}\n\t\t\tcatch (Exception ex)\n\t\t\t{\n\t\t\t\tlog.error(\"Error processing task status {}\", taskId, ex);\n\t\t\t\tfuture.completeExceptionally(ex);\n\t\t\t}\n\t\t});\n\t\treturn future;\n\t}\n\n\t/**\n\t * Update task completion status. If no varpId is specified, it updates all tasks in the current task type\n\t *\n\t * @param varpId varp id to update (optional)\n\t * @return An observable that emits true if all tasks were processed\n\t */\n\tprivate CompletableFuture\u003cBoolean\u003e processVarpAndUpdateTasks(@Nullable Integer varpId)\n\t{\n\t\tlog.info(\"processVarpAndUpdateTasks: \" + (varpId !\u003d null ? varpId : \"all\"));\n\n\t\tList\u003cTaskFromStruct\u003e tasks \u003d varpId !\u003d null ?\n\t\t\ttaskService.getTasksFromVarpId(varpId) :\n\t\t\ttaskService.getTasks();\n\n\t\tList\u003cCompletableFuture\u003cBoolean\u003e\u003e taskFutures \u003d new ArrayList\u003c\u003e();\n\t\tfor (TaskFromStruct task : tasks)\n\t\t{\n\t\t\tCompletableFuture\u003cBoolean\u003e taskFuture \u003d processTaskStatus(task);\n\t\t\ttaskFutures.add(taskFuture);\n\t\t}\n\n\t\tCompletableFuture\u003cVoid\u003e allTasksFuture \u003d CompletableFuture.allOf(taskFutures.toArray(new CompletableFuture[0]));\n\t\treturn allTasksFuture\n\t\t\t.thenRun(() -\u003e {\n\t\t\t\tif (varpId !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tSwingUtilities.invokeLater(() -\u003e pluginPanel.taskListPanel.refreshMultipleTasks(tasks));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tSwingUtilities.invokeLater(() -\u003e pluginPanel.refreshAllTasks());\n\t\t\t\t}\n\t\t\t})\n\t\t\t.thenApply(v -\u003e true);\n\t}\n\n\tprivate String getCurrentTaskTypeExportJson()\n\t{\n\t\tTaskType taskType \u003d taskService.getCurrentTaskType();\n\t\tGson gson \u003d this.gson.newBuilder()\n\t\t\t.excludeFieldsWithoutExposeAnnotation()\n\t\t\t.registerTypeAdapter(float.class, new LongSerializer())\n\t\t\t.create();\n\n\t\tif (taskType \u003d\u003d null)\n\t\t{\n\t\t\tString error \u003d \"Cannot export to JSON; no task type selected.\";\n\t\t\tlog.error(error);\n\t\t\treturn error;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tExport export \u003d new Export(taskType, taskService.getTasks(), runeliteVersion, client);\n\t\t\treturn gson.toJson(export);\n\t\t}\n\t}\n\n\tprivate void showMessageBox(final String title, final String message, int messageType, boolean showOpenLeagueTools)\n\t{\n\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\tJOptionPane optionPane;\n\t\t\tJDialog dialog;\n\n\t\t\tif (showOpenLeagueTools)\n\t\t\t{\n\t\t\t\tString[] options \u003d {\"Open OS League Tools\", \"Ok\"};\n\n\t\t\t\toptionPane \u003d new JOptionPane(message, messageType, JOptionPane.YES_NO_OPTION, null, options, options[1]);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\toptionPane \u003d new JOptionPane(message, messageType);\n\t\t\t}\n\n\t\t\tdialog \u003d optionPane.createDialog(pluginPanel, title);\n\t\t\tdialog.setAlwaysOnTop(true);\n\t\t\tdialog.setVisible(true);\n\n\t\t\tObject selectedValue \u003d optionPane.getValue();\n\t\t\tif (selectedValue \u003d\u003d null)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (selectedValue.equals(\"Open OS League Tools\"))\n\t\t\t{\n\t\t\t\tLinkBrowser.browse(\"https://www.osleague.tools/tracker?open\u003dimport\u0026tab\u003dtasks\");\n\t\t\t}\n\t\t});\n\t}\n}","filePath":"src/main/java/net/reldo/taskstracker/TasksTrackerPlugin.java"},{"fileName":"HtmlUtil.java","content":"package net.reldo.taskstracker;\n\nimport java.awt.Color;\nimport java.net.URL;\n\npublic class HtmlUtil\n{\n\tpublic static String HTML_LINE_BREAK \u003d \"\u003cbr\u003e\";\n\n\tpublic static String wrapWithHtml(String text)\n\t{\n\t\treturn \"\u003chtml\u003e\" + text + \"\u003c/html\u003e\";\n\t}\n\n\tpublic static String wrapWithWrappingParagraph(String text, int width)\n\t{\n\t\treturn \"\u003cp width\u003d\\\"\" + width + \"\\\"\u003e\" + text + \"\u003c/p\u003e\";\n\t}\n\n\tpublic static String wrapWithItalics(String text)\n\t{\n\t\treturn \"\u003ci\u003e\" + text + \"\u003c/i\u003e\";\n\t}\n\n\tpublic static String wrapWithBold(String text)\n\t{\n\t\treturn \"\u003cb\u003e\" + text + \"\u003c/b\u003e\";\n\t}\n\n\tpublic static String imageTag(URL url)\n\t{\n\t\treturn \"\u003cimg src\u003d\\\"\" + url + \"\\\"\u003e\";\n\t}\n\n\tpublic static String colorTag(String color, String text)\n\t{\n\t\treturn \"\u003cspan style\u003d\\\"color: \" + color + \"\\\"\u003e\" + text + \"\u003c/span\u003e\";\n\t}\n\n\tpublic static String colorTag(Color color, String text)\n\t{\n\t\tString buf \u003d Integer.toHexString(color.getRGB());\n\t\tString hex \u003d \"#\" + buf.substring(buf.length() - 6);\n\t\treturn colorTag(hex, text);\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/HtmlUtil.java"},{"fileName":"TaskListPanel.java","content":"package net.reldo.taskstracker.panel;\n\nimport java.awt.Component;\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Optional;\nimport java.util.function.IntConsumer;\nimport javax.swing.BoxLayout;\nimport javax.swing.JLabel;\nimport javax.swing.JScrollPane;\nimport javax.swing.ScrollPaneConstants;\nimport javax.swing.SwingUtilities;\nimport javax.swing.border.EmptyBorder;\nimport lombok.Setter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.reldo.taskstracker.TasksTrackerPlugin;\nimport net.reldo.taskstracker.config.ConfigValues;\nimport net.reldo.taskstracker.data.jsondatastore.types.TaskDefinitionSkill;\nimport net.reldo.taskstracker.data.task.TaskFromStruct;\nimport net.reldo.taskstracker.data.task.TaskService;\nimport net.reldo.taskstracker.data.task.filters.FilterMatcher;\nimport net.reldo.taskstracker.panel.components.FixedWidthPanel;\nimport net.runelite.api.Skill;\nimport net.runelite.client.ui.FontManager;\n\n@Slf4j\npublic class TaskListPanel extends JScrollPane\n{\n\tpublic TasksTrackerPlugin plugin;\n\tprivate final int TASK_LIST_BUFFER_COUNT \u003d 2;\n\tprivate final HashMap\u003cInteger, TaskPanel\u003e taskPanelsByStructId \u003d new HashMap\u003c\u003e();\n\tpublic ArrayList\u003cTaskPanel\u003e taskPanels \u003d new ArrayList\u003c\u003e();\n\tprivate final ArrayList\u003cTaskListListPanel\u003e taskListBuffers \u003d new ArrayList\u003c\u003e(TASK_LIST_BUFFER_COUNT);\n\tprivate int currentTaskListBufferIndex;\n\tprivate final TaskService taskService;\n\tprivate final JLabel emptyTasks \u003d new JLabel();\n\t@Setter\n\tprivate int batchSize;\n\n\tpublic TaskListPanel(TasksTrackerPlugin plugin, TaskService taskService)\n\t{\n\t\tthis.plugin \u003d plugin;\n\t\tthis.taskService \u003d taskService;\n\t\tbatchSize \u003d plugin.getConfig().taskPanelBatchSize();\n\n\t\tFixedWidthPanel taskListListPanelWrapper \u003d new FixedWidthPanel();\n\n\t\tfor (int i \u003d 0; i \u003c TASK_LIST_BUFFER_COUNT; i++)\n\t\t{\n\t\t\ttaskListBuffers.add(new TaskListListPanel(plugin));\n\t\t\ttaskListListPanelWrapper.add(taskListBuffers.get(i));\n\t\t}\n\n\t\tsetViewportView(taskListListPanelWrapper);\n\t\tsetHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);\n\n\t\tsetCurrentTaskListListPanel(0);\n\t}\n\n\tprivate void setCurrentTaskListListPanel(int index)\n\t{\n\t\tif (index !\u003d currentTaskListBufferIndex)\n\t\t{\n\t\t\ttaskListBuffers.get(currentTaskListBufferIndex).setVisible(false);\n\t\t\ttaskListBuffers.get(index).setVisible(true);\n\t\t\tcurrentTaskListBufferIndex \u003d index;\n\t\t}\n\t}\n\n\tprivate TaskListListPanel getCurrentTaskListListPanel()\n\t{\n\t\treturn taskListBuffers.get(currentTaskListBufferIndex);\n\t}\n\n\tprivate TaskListListPanel getNextTaskListListPanel()\n\t{\n\t\treturn taskListBuffers.get(getNextBufferIndex());\n\t}\n\n\tprivate void showNextTaskListListPanel()\n\t{\n\t\tlog.debug(\"Showing next task list list panel: {}\", getNextBufferIndex());\n\t\tTaskListListPanel previousPanel \u003d getCurrentTaskListListPanel();\n\t\tsetCurrentTaskListListPanel(getNextBufferIndex());\n\t\tpreviousPanel.prepEmptyTaskListPanel();\n\t}\n\n\tprivate int getNextBufferIndex()\n\t{\n\t\treturn (currentTaskListBufferIndex + 1) % TASK_LIST_BUFFER_COUNT;\n\t}\n\n\tpublic void drawNewTaskType()\n\t{\n\t\tlog.debug(\"Drawing new Task Type taskListListPanel\");\n\t\tgetNextTaskListListPanel().drawNewTaskType();\n\t}\n\n\tpublic void redraw()\n\t{\n\t\tlog.debug(\"Redrawing taskListListPanel\");\n\t\tgetCurrentTaskListListPanel().redraw();\n\t}\n\n\tpublic void refreshAllTasks()\n\t{\n\t\tlog.debug(\"TaskListPanel.refreshAllTasks\");\n\t\tif (!SwingUtilities.isEventDispatchThread())\n\t\t{\n\t\t\tlog.error(\"Task list panel refresh failed - not event dispatch thread.\");\n\t\t\treturn;\n\t\t}\n\t\tfor (TaskPanel taskPanel : taskPanelsByStructId.values())\n\t\t{\n\t\t\ttaskPanel.refresh();\n\t\t}\n\t\trefreshEmptyPanel();\n\t}\n\n\tpublic void refreshMultipleTasks(Collection\u003cTaskFromStruct\u003e tasks)\n\t{\n\t\tlog.debug(\"TaskListPanel.refreshMultipleTasks {}\", tasks.size());\n\t\tif (!SwingUtilities.isEventDispatchThread())\n\t\t{\n\t\t\tlog.error(\"Task list panel refresh failed - not event dispatch thread.\");\n\t\t\treturn;\n\t\t}\n\t\tfor (TaskFromStruct task : tasks)\n\t\t{\n\t\t\trefresh(task);\n\t\t}\n\t}\n\n\tpublic void refreshTask(TaskFromStruct task)\n\t{\n\t\tlog.debug(\"TaskListPanel.refreshMultipleTasks {}\", task.getName());\n\t\trefresh(task);\n\t}\n\n\tprivate void refresh(TaskFromStruct task)\n\t{\n\t\tif (!SwingUtilities.isEventDispatchThread())\n\t\t{\n\t\t\tlog.error(\"Task list panel refresh failed - not event dispatch thread.\");\n\t\t\treturn;\n\t\t}\n\t\tif (task \u003d\u003d null)\n\t\t{\n\t\t\tlog.debug(\"Attempted to refresh null task\");\n\t\t\treturn;\n\t\t}\n\n\t\temptyTasks.setVisible(false);\n\n\t\tTaskPanel panel \u003d taskPanelsByStructId.get(task.getStructId());\n\t\tif (panel !\u003d null)\n\t\t{\n\t\t\tpanel.refresh();\n\t\t}\n\n\t\trefreshEmptyPanel();\n\n\t}\n\n\tprivate void refreshEmptyPanel()\n\t{\n\t\tboolean isAnyTaskPanelVisible \u003d taskPanelsByStructId.values().stream()\n\t\t\t.anyMatch(TaskPanel::isVisible);\n\n\t\tif (!isAnyTaskPanelVisible)\n\t\t{\n\t\t\temptyTasks.setVisible(true);\n\t\t}\n\t\telse\n\t\t{\n\t\t\temptyTasks.setVisible(false);\n\t\t}\n\t}\n\n\tpublic void refreshTaskPanelsWithSkill(Skill skill)\n\t{\n\t\t// Refresh all task panels for tasks with \u0027skill\u0027 or\n\t\t// \u0027SKILLS\u0027 (any skill) or \u0027TOTAL LEVEL\u0027 as a requirement.\n\t\ttaskPanelsByStructId.values().stream()\n\t\t\t.filter(tp -\u003e\n\t\t\t{\n\t\t\t\tList\u003cTaskDefinitionSkill\u003e skillsList \u003d tp.task.getTaskDefinition().getSkills();\n\t\t\t\tif (skillsList \u003d\u003d null || skillsList.isEmpty())\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn skillsList.stream()\n\t\t\t\t\t.map(TaskDefinitionSkill::getSkill)\n\t\t\t\t\t.anyMatch(s -\u003e s.equalsIgnoreCase(skill.getName()) ||\n\t\t\t\t\t\ts.equalsIgnoreCase(\"SKILLS\") ||\n\t\t\t\t\t\ts.equalsIgnoreCase(\"TOTAL LEVEL\")\n\t\t\t\t\t);\n\t\t\t})\n\t\t\t.forEach(TaskPanel::refresh);\n\t}\n\n\tpublic String getEmptyTaskListMessage()\n\t{\n\t\treturn \"No tasks match the current filters.\";\n\t}\n\n\tprivate class TaskListListPanel extends FixedWidthPanel\n\t{\n\t\tprivate final TasksTrackerPlugin plugin;\n\n\t\tpublic TaskListListPanel(TasksTrackerPlugin plugin)\n\t\t{\n\t\t\tthis.plugin \u003d plugin;\n\n\t\t\tsetLayout(new BoxLayout(this, BoxLayout.Y_AXIS));\n\t\t\tsetBorder(new EmptyBorder(0, 10, 10, 10));\n\t\t\tsetAlignmentX(Component.LEFT_ALIGNMENT);\n\n\t\t\temptyTasks.setBorder(new EmptyBorder(10, 0, 10, 0));\n\t\t\temptyTasks.setText(\"\u003chtml\u003e\u003ccenter\u003e\" + getEmptyTaskListMessage() + \"\u003c/center\u003e\u003c/html\u003e\");\n\t\t\temptyTasks.setFont(FontManager.getRunescapeSmallFont());\n\t\t\temptyTasks.setHorizontalAlignment(JLabel.CENTER);\n\t\t\temptyTasks.setVerticalAlignment(JLabel.CENTER);\n\t\t\tadd(emptyTasks);\n\t\t\temptyTasks.setVisible(false);\n\t\t}\n\n\t\tpublic void prepEmptyTaskListPanel()\n\t\t{\n\t\t\tSwingUtilities.invokeLater(this::removeAll);\n\t\t}\n\n\t\tpublic void drawNewTaskType()\n\t\t{\n\t\t\tlog.debug(\"TaskListPanel.drawNewTaskType\");\n\t\t\tif (SwingUtilities.isEventDispatchThread())\n\t\t\t{\n\t\t\t\tlog.debug(\"TaskListPanel creating panels\");\n\t\t\t\ttaskPanelsByStructId.clear();\n\t\t\t\tadd(emptyTasks);\n\n\t\t\t\tList\u003cTaskFromStruct\u003e tasks \u003d taskService.getTasks();\n\t\t\t\tif (tasks \u003d\u003d null || tasks.isEmpty())\n\t\t\t\t{\n\t\t\t\t\temptyTasks.setVisible(true);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\temptyTasks.setVisible(false);\n\n\t\t\t\t// Buffer to hold newly created task panels before they are swapped in\n\t\t\t\tArrayList\u003cTaskPanel\u003e newTaskPanels \u003d new ArrayList\u003c\u003e(tasks.size());\n\n\t\t\t\tprocessInBatches(tasks.size(), indexPosition -\u003e\n\t\t\t\t{\n\t\t\t\t\tTaskFromStruct task \u003d tasks.get(indexPosition);\n\t\t\t\t\tTaskPanel taskPanel \u003d new TaskPanel(plugin, task, plugin.getFilterMatcher());\n\t\t\t\t\tadd(taskPanel);\n\t\t\t\t\tnewTaskPanels.add(taskPanel);\n\t\t\t\t\ttaskPanelsByStructId.put(task.getStructId(), taskPanel);\n\t\t\t\t\tif (indexPosition \u003d\u003d (batchSize - 1))\n\t\t\t\t\t{\n\t\t\t\t\t\ttaskPanels \u003d newTaskPanels; // replace taskPanels list at end of first batch\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlog.error(\"Task list panel drawNewTaskType failed - not event dispatch thread.\");\n\t\t\t}\n\t\t}\n\n\t\tpublic void redraw()\n\t\t{\n\t\t\tlog.debug(\"TaskListPanel.redraw\");\n\t\t\tif (SwingUtilities.isEventDispatchThread())\n\t\t\t{\n\t\t\t\tif (taskPanels \u003d\u003d null || taskPanels.isEmpty())\n\t\t\t\t{\n\t\t\t\t\temptyTasks.setVisible(true);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfor (int indexPosition \u003d 0; indexPosition \u003c taskPanels.size(); indexPosition++)\n\t\t\t\t{\n\t\t\t\t\tint adjustedIndexPosition \u003d indexPosition;\n\t\t\t\t\tif (plugin.getConfig().sortDirection().equals(ConfigValues.SortDirections.DESCENDING))\n\t\t\t\t\t{\n\t\t\t\t\t\tadjustedIndexPosition \u003d taskPanels.size() - (adjustedIndexPosition + 1);\n\t\t\t\t\t}\n\t\t\t\t\tTaskPanel taskPanel \u003d taskPanels.get(taskService.getSortedTaskIndex(plugin.getConfig().sortCriteria(), adjustedIndexPosition));\n\t\t\t\t\tsetComponentZOrder(taskPanel, indexPosition);\n\t\t\t\t}\n\n\t\t\t\tSwingUtilities.invokeLater(TaskListPanel.this::refreshAllTasks);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlog.error(\"Task list panel redraw failed - not event dispatch thread.\");\n\t\t\t}\n\t\t}\n\n\t\tprivate void processInBatches(int objectCount, IntConsumer method)\n\t\t{\n\t\t\tprocessBatch(0, objectCount, method);\n\t\t\tshowNextTaskListListPanel();\n\t\t}\n\n\t\tprivate void processBatch(int batch, int objectCount, IntConsumer method)\n\t\t{\n\t\t\tlog.debug(\"TaskListPanel.processBatch {}\", batch);\n\n\t\t\tfor (int index \u003d 0; index \u003c batchSize; index++)\n\t\t\t{\n\t\t\t\tint indexPosition \u003d index + (batch * batchSize);\n\t\t\t\tif (indexPosition \u003c objectCount)\n\t\t\t\t{\n\t\t\t\t\tmethod.accept(indexPosition);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trefreshEmptyPanel();\n\t\t\tvalidate();\n\t\t\trepaint();\n\n\t\t\t// queue next batch if not done or refresh after last batch\n\t\t\tint batchIndex \u003d batch + 1;\n\t\t\tif (batchIndex * batchSize \u003c objectCount)\n\t\t\t{\n\t\t\t\tSwingUtilities.invokeLater(() -\u003e processBatch(batchIndex, objectCount, method));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tSwingUtilities.invokeLater(TaskListPanel.this::refreshAllTasks);\n\t\t\t}\n\t\t}\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/panel/TaskListPanel.java"},{"fileName":"Colors.java","content":"package net.reldo.taskstracker.panel;\n\nimport java.awt.Color;\n\npublic class Colors\n{\n\tpublic static Color QUALIFIED_TEXT_COLOR \u003d new Color(34, 177, 77);\n\tpublic static Color UNQUALIFIED_BACKGROUND_COLOR \u003d new Color(70, 30, 0);\n\tpublic static Color UNQUALIFIED_TEXT_COLOR \u003d new Color(251, 93, 93);\n\tpublic static Color COMPLETED_BACKGROUND_COLOR \u003d new Color(0, 50, 0);\n}\n","filePath":"src/main/java/net/reldo/taskstracker/panel/Colors.java"},{"fileName":"SubFilterPanel.java","content":"package net.reldo.taskstracker.panel;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.concurrent.ExecutionException;\nimport javax.swing.BoxLayout;\nimport javax.swing.border.EmptyBorder;\nimport lombok.extern.slf4j.Slf4j;\nimport net.reldo.taskstracker.TasksTrackerPlugin;\nimport net.reldo.taskstracker.data.jsondatastore.types.FilterConfig;\nimport net.reldo.taskstracker.data.jsondatastore.types.FilterValueType;\nimport net.reldo.taskstracker.data.task.TaskService;\nimport net.reldo.taskstracker.panel.components.FixedWidthPanel;\nimport net.reldo.taskstracker.panel.filters.ComboItem;\nimport net.reldo.taskstracker.panel.filters.DynamicButtonFilterPanel;\nimport net.reldo.taskstracker.panel.filters.DynamicDropdownFilterPanel;\nimport net.reldo.taskstracker.panel.filters.FilterPanel;\nimport net.runelite.client.ui.ColorScheme;\n\n@Slf4j\npublic class SubFilterPanel extends FixedWidthPanel\n{\n\tprivate final List\u003cFilterPanel\u003e filterPanels \u003d new ArrayList\u003c\u003e();\n\tprivate TasksTrackerPlugin plugin;\n\tprivate TaskService taskService;\n\n\tpublic SubFilterPanel(TasksTrackerPlugin plugin, TaskService taskService)\n\t{\n\t\tthis.plugin \u003d plugin;\n\t\tthis.taskService \u003d taskService;\n\t\tlog.debug(\"SubFilterPanel.constructor\");\n\t\tsetLayout(new BoxLayout(this, BoxLayout.Y_AXIS));\n\t\tsetBorder(new EmptyBorder(0, 0, 0, 0));\n\t\tsetBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tsetVisible(false);\n\t}\n\n\tpublic void redraw()\n\t{\n\t\tlog.debug(\"SubFilterPanel.redraw\"); // TODO: figure out why this calls multiple times upon switching task type\n\n\t\tremoveAll();\n\n\t\tfilterPanels.clear();\n\t\tfilterPanels.addAll(getFilterPanels(taskService.getCurrentTaskType().getFilters()));\n\t\tfilterPanels.forEach((filterPanel) -\u003e {\n\t\t\tadd(filterPanel);\n\t\t\tfilterPanel.redraw();\n\t\t});\n\t}\n\n\tprivate List\u003cFilterPanel\u003e getFilterPanels(ArrayList\u003cFilterConfig\u003e filterConfigs)\n\t{\n\t\tList\u003cFilterPanel\u003e filterPanels \u003d new ArrayList\u003c\u003e();\n\t\tfor (FilterConfig filterConfig : filterConfigs)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tFilterPanel filterPanel \u003d createDynamicFilterPanel(filterConfig);\n\t\t\t\tif (filterPanel \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tfilterPanels.add(filterPanel);\n\t\t\t}\n\t\t\tcatch (Exception ex)\n\t\t\t{\n\t\t\t\tlog.error(\"error creating filter panel {} {}\", filterConfig.getConfigKey(), ex);\n\t\t\t}\n\t\t}\n\t\treturn filterPanels;\n\t}\n\n\tprivate FilterPanel createDynamicFilterPanel(FilterConfig filterConfig) throws Exception\n\t{\n\t\tswitch (filterConfig.getFilterType())\n\t\t{\n\t\t\tcase BUTTON_FILTER:\n\t\t\t\treturn new DynamicButtonFilterPanel(plugin, filterConfig, taskService.getCurrentTaskType());\n\t\t\tcase DROPDOWN_FILTER:\n\t\t\t\tComboItem[] dropdownItems \u003d getDropdownItems(filterConfig);\n\t\t\t\treturn new DynamicDropdownFilterPanel(plugin, filterConfig, taskService.getCurrentTaskType(), dropdownItems);\n\t\t\tdefault:\n\t\t\t\tlog.error(\"invalid filter type \" + filterConfig.getFilterType());\n\t\t\t\treturn null;\n\t\t}\n\t}\n\n\tprivate ComboItem[] getDropdownItems(FilterConfig filterConfig) throws ExecutionException, InterruptedException\n\t{\n\t\tif (filterConfig.getValueType() \u003d\u003d null)\n\t\t{\n\t\t\tthrow new Error(\"invalid filterConfig for dropdown items\");\n\t\t}\n\t\tif (filterConfig.getValueType().equals(FilterValueType.PARAM_INTEGER))\n\t\t{\n\t\t\tString enumName \u003d filterConfig.getOptionLabelEnum();\n\t\t\tif (!enumName.isEmpty())\n\t\t\t{\n\t\t\t\tHashMap\u003cInteger, String\u003e enumEntries \u003d taskService.getStringEnumValuesAsync(enumName).get(); // TODO: blocking call\n\t\t\t\tArrayList\u003cComboItem\u003cInteger\u003e\u003e options \u003d new ArrayList\u003c\u003e();\n\t\t\t\toptions.add(new ComboItem\u003c\u003e(-1, \"\"));\n\t\t\t\tfor (Map.Entry\u003cInteger, String\u003e entry : enumEntries.entrySet())\n\t\t\t\t{\n\t\t\t\t\tif (filterConfig.getValueName().equals(\"tier\"))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (entry.getValue().equals(\"All\") || entry.getValue().equals(\"Tier\"))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\toptions.add(new ComboItem\u003c\u003e(entry.getKey(), entry.getValue()));\n\t\t\t\t}\n\t\t\t\treturn options.toArray(new ComboItem[0]);\n\t\t\t}\n\t\t}\n\n\t\treturn new ComboItem[0];\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/panel/SubFilterPanel.java"},{"fileName":"LoggedInPanel.java","content":"package net.reldo.taskstracker.panel;\n\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Optional;\nimport javax.swing.Box;\nimport javax.swing.BoxLayout;\nimport javax.swing.ButtonGroup;\nimport javax.swing.JButton;\nimport javax.swing.JComboBox;\nimport javax.swing.JLabel;\nimport javax.swing.JMenuItem;\nimport javax.swing.JPanel;\nimport javax.swing.JPopupMenu;\nimport javax.swing.JToggleButton;\nimport javax.swing.SwingConstants;\nimport javax.swing.SwingUtilities;\nimport javax.swing.border.EmptyBorder;\nimport javax.swing.border.MatteBorder;\nimport javax.swing.event.ChangeListener;\nimport javax.swing.plaf.basic.BasicButtonUI;\nimport lombok.extern.slf4j.Slf4j;\nimport net.reldo.taskstracker.TasksTrackerConfig;\nimport net.reldo.taskstracker.TasksTrackerPlugin;\nimport net.reldo.taskstracker.config.ConfigValues;\nimport net.reldo.taskstracker.data.jsondatastore.types.FilterConfig;\nimport net.reldo.taskstracker.data.jsondatastore.types.FilterType;\nimport net.reldo.taskstracker.data.task.TaskService;\nimport net.reldo.taskstracker.data.task.TaskType;\nimport net.reldo.taskstracker.panel.components.SearchBox;\nimport net.reldo.taskstracker.panel.components.TabMenuItem;\nimport net.reldo.taskstracker.panel.components.TriToggleButton;\nimport net.reldo.taskstracker.panel.filters.ComboItem;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.PluginPanel;\nimport net.runelite.client.util.SwingUtil;\n\n@Slf4j\npublic class LoggedInPanel extends JPanel\n{\n\tpublic TaskListPanel taskListPanel;\n\tprivate JComboBox\u003cComboItem\u003cTaskType\u003e\u003e taskTypeDropdown;\n\n\tprivate final TaskService taskService;\n\tprivate final TasksTrackerPlugin plugin;\n\tprivate final TasksTrackerConfig config;\n\n\t// Filter buttons\n\tprivate final TriToggleButton completedFilterBtn \u003d new TriToggleButton();\n\tprivate final TriToggleButton trackedFilterBtn \u003d new TriToggleButton();\n\tprivate final TriToggleButton ignoredFilterBtn \u003d new TriToggleButton();\n\tprivate final JPanel titlePanel \u003d new JPanel();\n\n\t// Task list tabs\n\tprivate final JPanel tabPane \u003d new JPanel();\n\n\t// sub-filter panel\n\tprivate SubFilterPanel subFilterPanel;\n\tprivate SortPanel sortPanel;\n\tprivate final JToggleButton collapseBtn \u003d new JToggleButton();\n\tprivate JToggleButton tabOne;\n\tprivate JToggleButton tabTwo;\n\tprivate JToggleButton tabThree;\n\n\tpublic LoggedInPanel(TasksTrackerPlugin plugin, TasksTrackerConfig config, TaskService taskService)\n\t{\n\t\tsuper(false);\n\t\tthis.plugin \u003d plugin;\n\t\tthis.taskService \u003d taskService;\n\t\tthis.config \u003d config;\n\n\t\tcreatePanel();\n\t}\n\n\t@Override\n\tpublic Dimension getPreferredSize()\n\t{\n\t\treturn getParent().getSize();\n\t}\n\n\tpublic void drawNewTaskType()\n\t{\n\t\t// taskTypeDropdown may become de-synced after profile change\n\t\tString selectedTaskTypeJsonName \u003d taskTypeDropdown.getItemAt(taskTypeDropdown.getSelectedIndex()).getValue().getTaskJsonName();\n\t\tif (!selectedTaskTypeJsonName.equals(config.taskTypeJsonName()))\n\t\t{\n\t\t\tlog.debug(\"Task type dropdown de-synced, attempting to find current task type\");\n\t\t\tfor (int i \u003d 0; i \u003c taskTypeDropdown.getItemCount(); i++)\n\t\t\t{\n\t\t\t\tComboItem\u003cTaskType\u003e item \u003d taskTypeDropdown.getItemAt(i);\n\t\t\t\tif (item.getValue().getTaskJsonName().equals(config.taskTypeJsonName()))\n\t\t\t\t{\n\t\t\t\t\tlog.debug(\"Current task type found, setting selected task type\");\n\t\t\t\t\ttaskTypeDropdown.setSelectedIndex(i);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tsubFilterPanel.redraw();\n\t\tsortPanel.redraw();\n\t\tupdateCollapseButtonText();\n\n\t\ttaskListPanel.drawNewTaskType();\n\t\trefreshFilterButtonsFromConfig(config.taskListTab());\n\t}\n\n\tpublic void redraw()\n\t{\n\t\tsubFilterPanel.redraw();\n\t\tsortPanel.redraw();\n\t\tupdateCollapseButtonText();\n\n\t\ttaskListPanel.redraw();\n\t}\n\n\tpublic void refreshAllTasks()\n\t{\n\t\tupdateCollapseButtonText();\n\t\trefreshTabNames();\n\t\ttaskListPanel.refreshAllTasks();\n\t}\n\n\tprivate void createPanel()\n\t{\n\t\tsetLayout(new BorderLayout());\n\t\tsetBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\ttaskListPanel \u003d new TaskListPanel(plugin, taskService);\n\n\t\tadd(getNorthPanel(), BorderLayout.NORTH);\n\t\tadd(getCenterPanel(), BorderLayout.CENTER);\n\t\tadd(getSouthPanel(), BorderLayout.SOUTH);\n\t}\n\n\tprivate JPanel getCenterPanel()\n\t{\n\t\t// wrapper for the task list and tab buttons\n\t\tfinal JPanel taskListPanel \u003d new JPanel(new BorderLayout());\n\t\ttaskListPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\ttaskListPanel.setBorder(new MatteBorder(0, 0, 1, 0, ColorScheme.MEDIUM_GRAY_COLOR));\n\t\ttaskListPanel.setAlignmentX(JPanel.CENTER_ALIGNMENT);\n\n\t\ttabPane.setLayout(new BoxLayout(tabPane, BoxLayout.X_AXIS));\n\t\ttabPane.setBorder(new EmptyBorder(0, 0, 0, 0));\n\t\ttabPane.setPreferredSize(new Dimension(PluginPanel.PANEL_WIDTH, 24));\n\n\t\ttabOne \u003d tabButton(config.tab1Name(), ConfigValues.TaskListTabs.TAB_ONE);\n\t\ttabTwo \u003d tabButton(config.tab2Name(), ConfigValues.TaskListTabs.TAB_TWO);\n\t\ttabThree \u003d tabButton(config.tab3Name(), ConfigValues.TaskListTabs.TAB_THREE);\n\n\t\tButtonGroup tabGroup \u003d new ButtonGroup();\n\n\t\ttabGroup.add(tabOne);\n\t\ttabGroup.add(tabTwo);\n\t\ttabGroup.add(tabThree);\n\n\t\ttabPane.add(Box.createHorizontalGlue());\n\t\ttabPane.add(tabOne);\n\t\ttabPane.add(Box.createHorizontalGlue());\n\t\ttabPane.add(tabTwo);\n\t\ttabPane.add(Box.createHorizontalGlue());\n\t\ttabPane.add(tabThree);\n\t\ttabPane.add(Box.createHorizontalGlue());\n\n\t\ttaskListPanel.add(tabPane, BorderLayout.NORTH);\n\t\ttaskListPanel.add(this.taskListPanel, BorderLayout.CENTER);\n\n\t\treturn taskListPanel;\n\t}\n\n\tpublic void tabChanged(ConfigValues.TaskListTabs newTab)\n\t{\n\t\tif (newTab !\u003d null)\n\t\t{\n\t\t\tsaveCurrentTabFilters();\n\t\t\tplugin.getConfigManager().setConfiguration(TasksTrackerPlugin.CONFIG_GROUP_NAME, \"taskListTab\", newTab);\n\t\t\trefreshFilterButtonsFromConfig(newTab);\n\t\t\tplugin.refreshAllTasks();\n\t\t}\n\t}\n\n\tpublic void saveCurrentTabFilters()\n\t{\n\t\tString tab \u003d \"tab\" + (config.taskListTab().ordinal() + 1); // tabs are 1-indexed\n\n\t\tEnum configValue;\n\n\t\tif (plugin.getConfigManager().getConfiguration(TasksTrackerPlugin.CONFIG_GROUP_NAME, tab + \"CompletedLock\").equals(\"false\"))\n\t\t{\n\t\t\tconfigValue \u003d ConfigValues.CompletedFilterValues.values()[completedFilterBtn.getState()];\n\t\t\tplugin.getConfigManager().setConfiguration(TasksTrackerPlugin.CONFIG_GROUP_NAME, tab + \"CompletedValue\", configValue);\n\t\t}\n\n\t\tif (plugin.getConfigManager().getConfiguration(TasksTrackerPlugin.CONFIG_GROUP_NAME, tab + \"TrackedLock\").equals(\"false\"))\n\t\t{\n\t\t\tconfigValue \u003d ConfigValues.TrackedFilterValues.values()[trackedFilterBtn.getState()];\n\t\t\tplugin.getConfigManager().setConfiguration(TasksTrackerPlugin.CONFIG_GROUP_NAME, tab + \"TrackedValue\", configValue);\n\t\t}\n\n\t\tif (plugin.getConfigManager().getConfiguration(TasksTrackerPlugin.CONFIG_GROUP_NAME, tab + \"IgnoredLock\").equals(\"false\"))\n\t\t{\n\t\t\tconfigValue \u003d ConfigValues.IgnoredFilterValues.values()[ignoredFilterBtn.getState()];\n\t\t\tplugin.getConfigManager().setConfiguration(TasksTrackerPlugin.CONFIG_GROUP_NAME, tab + \"IgnoredValue\", configValue);\n\t\t}\n\t}\n\n\t// TODO reduce duplication\n\tpublic void refreshFilterButtonsFromConfig(ConfigValues.TaskListTabs tab)\n\t{\n\t\tswitch (tab)\n\t\t{\n\t\t\tcase TAB_ONE:\n\t\t\t\tif (!tabOne.isSelected())\n\t\t\t\t{\n\t\t\t\t\ttabOne.setSelected(true);\n\t\t\t\t}\n\t\t\t\ttrackedFilterBtn.setState(config.tab1TrackedValue().ordinal());\n\t\t\t\ttrackedFilterBtn.setEnabled(!config.tab1TrackedLock());\n\t\t\t\tcompletedFilterBtn.setState(config.tab1CompletedValue().ordinal());\n\t\t\t\tcompletedFilterBtn.setEnabled(!config.tab1CompletedLock());\n\t\t\t\tignoredFilterBtn.setState(config.tab1IgnoredValue().ordinal());\n\t\t\t\tignoredFilterBtn.setEnabled(!config.tab1IgnoredLock());\n\t\t\t\tactionAllFilterButtonsNoRefresh();\n\t\t\t\tbreak;\n\t\t\tcase TAB_TWO:\n\t\t\t\tif (!tabTwo.isSelected())\n\t\t\t\t{\n\t\t\t\t\ttabTwo.setSelected(true);\n\t\t\t\t}\n\t\t\t\ttrackedFilterBtn.setState(config.tab2TrackedValue().ordinal());\n\t\t\t\ttrackedFilterBtn.setEnabled(!config.tab2TrackedLock());\n\t\t\t\tcompletedFilterBtn.setState(config.tab2CompletedValue().ordinal());\n\t\t\t\tcompletedFilterBtn.setEnabled(!config.tab2CompletedLock());\n\t\t\t\tignoredFilterBtn.setState(config.tab2IgnoredValue().ordinal());\n\t\t\t\tignoredFilterBtn.setEnabled(!config.tab2IgnoredLock());\n\t\t\t\tactionAllFilterButtonsNoRefresh();\n\t\t\t\tbreak;\n\t\t\tcase TAB_THREE:\n\t\t\t\tif (!tabThree.isSelected())\n\t\t\t\t{\n\t\t\t\t\ttabThree.setSelected(true);\n\t\t\t\t}\n\t\t\t\ttrackedFilterBtn.setState(config.tab3TrackedValue().ordinal());\n\t\t\t\ttrackedFilterBtn.setEnabled(!config.tab3TrackedLock());\n\t\t\t\tcompletedFilterBtn.setState(config.tab3CompletedValue().ordinal());\n\t\t\t\tcompletedFilterBtn.setEnabled(!config.tab3CompletedLock());\n\t\t\t\tignoredFilterBtn.setState(config.tab3IgnoredValue().ordinal());\n\t\t\t\tignoredFilterBtn.setEnabled(!config.tab3IgnoredLock());\n\t\t\t\tactionAllFilterButtonsNoRefresh();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprivate JToggleButton tabButton(String label, ConfigValues.TaskListTabs tab)\n\t{\n\t\tJToggleButton button \u003d new JToggleButton(label);\n\n\t\tbutton.setBorder(new EmptyBorder(2, 5, 2, 5));\n\t\tbutton.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tbutton.setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n\t\tbutton.addActionListener(e -\u003e tabChanged(tab));\n\n\t\tJPopupMenu popupMenu \u003d new JPopupMenu(\"Filter Lock Toggles\");\n\n\t\tJMenuItem saveFiltersItem \u003d new JMenuItem(\"Save Filter States\");\n\t\tsaveFiltersItem.addActionListener(e -\u003e saveCurrentTabFilters());\n\n\t\tJMenuItem labelItem \u003d new JMenuItem(\"-----------------\");\n\t\tlabelItem.setEnabled(false);\n\n\t\tJMenuItem completedItem \u003d new TabMenuItem(\"Completed\", completedFilterBtn, e -\u003e {\n\t\t\tplugin.getConfigManager().setConfiguration(TasksTrackerPlugin.CONFIG_GROUP_NAME, tab.configID + \"CompletedLock\", completedFilterBtn.isEnabled());\n\t\t});\n\t\tJMenuItem trackedItem \u003d new TabMenuItem(\"Tracked\", trackedFilterBtn, e -\u003e {\n\t\t\tplugin.getConfigManager().setConfiguration(TasksTrackerPlugin.CONFIG_GROUP_NAME, tab.configID + \"TrackedLock\", trackedFilterBtn.isEnabled());\n\t\t});\n\t\tJMenuItem ignoredItem \u003d new TabMenuItem(\"Ignored\", ignoredFilterBtn, e -\u003e {\n\t\t\tplugin.getConfigManager().setConfiguration(TasksTrackerPlugin.CONFIG_GROUP_NAME, tab.configID + \"IgnoredLock\", ignoredFilterBtn.isEnabled());\n\t\t});\n\n\t\tpopupMenu.add(saveFiltersItem);\n\t\tpopupMenu.add(labelItem);\n\t\tpopupMenu.add(completedItem);\n\t\tpopupMenu.add(trackedItem);\n\t\tpopupMenu.add(ignoredItem);\n\n\t\tbutton.addChangeListener(e -\u003e {\n\t\t\tif (saveFiltersItem.isEnabled() !\u003d button.isSelected())\n\t\t\t{\n\t\t\t\tsaveFiltersItem.setEnabled(button.isSelected());\n\t\t\t}\n\t\t\tif (completedItem.isEnabled() !\u003d button.isSelected())\n\t\t\t{\n\t\t\t\tcompletedItem.setEnabled(button.isSelected());\n\t\t\t}\n\t\t\tif (trackedItem.isEnabled() !\u003d button.isSelected())\n\t\t\t{\n\t\t\t\ttrackedItem.setEnabled(button.isSelected());\n\t\t\t}\n\t\t\tif (ignoredItem.isEnabled() !\u003d button.isSelected())\n\t\t\t{\n\t\t\t\tignoredItem.setEnabled(button.isSelected());\n\t\t\t}\n\t\t});\n\n\t\tbutton.setComponentPopupMenu(popupMenu);\n\n\t\treturn button;\n\t}\n\n\tprivate void refreshTabNames()\n\t{\n\t\tString tabName;\n\t\tif (!tabOne.getText().equals(config.tab1Name()))\n\t\t{\n\t\t\ttabName \u003d config.tab1Name().isBlank() ? \"Tab 1\" : config.tab1Name();\n\t\t\ttabOne.setText(tabName);\n\t\t}\n\t\tif (!tabTwo.getText().equals(config.tab2Name()))\n\t\t{\n\t\t\ttabName \u003d config.tab2Name().isBlank() ? \"Tab 2\" : config.tab2Name();\n\t\t\ttabTwo.setText(tabName);\n\t\t}\n\t\tif (!tabThree.getText().equals(config.tab3Name()))\n\t\t{\n\t\t\ttabName \u003d config.tab3Name().isBlank() ? \"Tab 3\" : config.tab3Name();\n\t\t\ttabThree.setText(tabName);\n\t\t}\n\t}\n\n\tprivate JPanel getSouthPanel()\n\t{\n\t\tJPanel southPanel \u003d new JPanel(new BorderLayout());\n\t\tsouthPanel.setBorder(new EmptyBorder(5, 0, 2, 0));\n\n\t\tJButton importButton \u003d new JButton(\"Import\");\n\t\timportButton.setBorder(new EmptyBorder(5, 5, 5, 5));\n\t\timportButton.setLayout(new BorderLayout(0, PluginPanel.BORDER_OFFSET));\n\t\timportButton.addActionListener(e -\u003e plugin.openImportJsonDialog());\n\t\tsouthPanel.add(importButton, BorderLayout.WEST);\n\n\t\tJButton totalsButton \u003d new JButton(\"Totals\");\n\t\ttotalsButton.setBorder(new EmptyBorder(5, 5, 5, 5));\n\t\ttotalsButton.setLayout(new BorderLayout(0, PluginPanel.BORDER_OFFSET));\n\t\ttotalsButton.addActionListener(e -\u003e plugin.sendTotalsToChat());\n\t\tsouthPanel.add(totalsButton, BorderLayout.CENTER);\n\n\t\tJButton exportButton \u003d new JButton(\"Export\");\n\t\texportButton.setBorder(new EmptyBorder(5, 5, 5, 5));\n\t\texportButton.setLayout(new BorderLayout(0, PluginPanel.BORDER_OFFSET));\n\t\texportButton.addActionListener(e -\u003e plugin.copyJsonToClipboard());\n\t\tsouthPanel.add(exportButton, BorderLayout.EAST);\n\n\t\treturn southPanel;\n\t}\n\n\tprivate JPanel getNorthPanel()\n\t{\n\t\tJPanel northPanel \u003d new JPanel();\n\t\tBoxLayout layout \u003d new BoxLayout(northPanel, BoxLayout.Y_AXIS);\n\t\tnorthPanel.setLayout(layout);\n\t\tnorthPanel.setBorder(new EmptyBorder(10, 10, 10, 10));\n\n\t\ttaskTypeDropdown \u003d new JComboBox\u003c\u003e();\n\t\ttaskTypeDropdown.setAlignmentX(LEFT_ALIGNMENT);\n\t\ttaskTypeDropdown.setFocusable(false);\n\t\tinitTaskTypeDropdownAsync();\n\n\t\t// Wrapper for collapsible sub-filter menu\n\t\tJPanel subFilterWrapper \u003d new JPanel();\n\t\tsubFilterWrapper.setLayout(new BorderLayout());\n\t\tsubFilterWrapper.setBorder(new MatteBorder(1, 0, 1, 0, ColorScheme.MEDIUM_GRAY_COLOR));\n\t\tsubFilterWrapper.setAlignmentX(LEFT_ALIGNMENT);\n\t\tsubFilterWrapper.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\n\t\t// collapse button\n\t\tSwingUtil.removeButtonDecorations(collapseBtn);\n\t\tcollapseBtn.setIcon(Icons.MENU_COLLAPSED_ICON);\n\t\tcollapseBtn.setSelectedIcon(Icons.MENU_EXPANDED_ICON);\n\t\tcollapseBtn.setRolloverIcon(Icons.MENU_ICON_HOVER);\n\t\tSwingUtil.addModalTooltip(collapseBtn, \"Collapse filters\", \"Expand filters\");\n\t\tcollapseBtn.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tcollapseBtn.setAlignmentX(LEFT_ALIGNMENT);\n\t\tcollapseBtn.setUI(new BasicButtonUI()); // substance breaks the layout\n\t\tcollapseBtn.addActionListener(ev -\u003e subFilterPanel.setVisible(!subFilterPanel.isVisible()));\n\t\tcollapseBtn.setHorizontalTextPosition(JButton.CENTER);\n\t\tcollapseBtn.setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n\t\tcollapseBtn.setFont(FontManager.getRunescapeSmallFont());\n\t\tcollapseBtn.setBorder(new EmptyBorder(2, 0, 2, 0));\n\t\tcollapseBtn.setFocusable(false);\n\n\t\t// panel to hold sub-filters\n\t\tsubFilterPanel \u003d new SubFilterPanel(plugin, taskService);\n\n\t\tsubFilterWrapper.add(collapseBtn, BorderLayout.NORTH);\n\t\tsubFilterWrapper.add(subFilterPanel, BorderLayout.CENTER);\n\n\t\tsortPanel \u003d new SortPanel(plugin, taskService, taskListPanel);\n\n\t\tnorthPanel.add(getTitleAndButtonPanel());\n\t\tnorthPanel.add(Box.createVerticalStrut(10));\n\t\tnorthPanel.add(taskTypeDropdown);\n\t\tnorthPanel.add(Box.createVerticalStrut(2));\n\t\tnorthPanel.add(getSearchPanel());\n\t\tnorthPanel.add(Box.createVerticalStrut(2));\n\t\tnorthPanel.add(sortPanel);\n\t\tnorthPanel.add(Box.createVerticalStrut(2));\n\t\tnorthPanel.add(subFilterWrapper);\n\n\t\treturn northPanel;\n\t}\n\n\tprivate JPanel getTitleAndButtonPanel()\n\t{\n\t\ttitlePanel.setLayout(new BorderLayout());\n\t\ttitlePanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\ttitlePanel.setPreferredSize(new Dimension(0, 30));\n\t\ttitlePanel.setBorder(new EmptyBorder(5, 5, 5, 10));\n\n\t\tJLabel title \u003d new JLabel(\"Tasks Tracker\");\n\t\ttitle.setHorizontalAlignment(SwingConstants.LEFT);\n\t\ttitle.setForeground(Color.WHITE);\n\n\t\tJPopupMenu reloadPluginPopup \u003d new JPopupMenu();\n\t\treloadPluginPopup.setBorder(new EmptyBorder(5, 5, 5, 5));\n\t\tJMenuItem reloadPluginMenuItem \u003d new JMenuItem(\"Reload plugin\");\n\t\treloadPluginMenuItem.addActionListener(e -\u003e plugin.reloadTaskType());\n\t\treloadPluginPopup.add(reloadPluginMenuItem);\n\t\ttitle.setComponentPopupMenu(reloadPluginPopup);\n\n\t\t// Filter button bar\n\t\tfinal JPanel viewControls \u003d new JPanel();\n\t\tviewControls.setLayout(new BoxLayout(viewControls, BoxLayout.X_AXIS));\n\t\tviewControls.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Completed tasks filter button\n\t\tSwingUtil.removeButtonDecorations(completedFilterBtn);\n\t\tcompletedFilterBtn.setIcons(Icons.COMPLETE_INCOMPLETE_ICON, Icons.COMPLETE_ONLY_ICON, Icons.INCOMPLETE_ONLY_ICON);\n\t\tcompletedFilterBtn.setToolTips(\"All tasks\", \"Completed tasks only\", \"Incomplete tasks only\");\n\t\tcompletedFilterBtn.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tcompletedFilterBtn.setStateChangedAction(e -\u003e filterButtonAction(\"completed\"));\n\t\tcompletedFilterBtn.popupMenuEnabled(true);\n\t\tcompletedFilterBtn.setState(config.completedFilter().ordinal());\n\n\t\tviewControls.add(completedFilterBtn);\n\n\t\t// Tracked tasks filter button\n\t\tSwingUtil.removeButtonDecorations(trackedFilterBtn);\n\t\ttrackedFilterBtn.setIcons(Icons.TRACKED_UNTRACKED_ICON, Icons.TRACKED_ONLY_ICON, Icons.UNTRACKED_ONLY_ICON);\n\t\ttrackedFilterBtn.setToolTips(\"All tasks\", \"Tracked tasks only\", \"Untracked tasks only\");\n\t\ttrackedFilterBtn.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\ttrackedFilterBtn.setStateChangedAction(e -\u003e filterButtonAction(\"tracked\"));\n\t\ttrackedFilterBtn.popupMenuEnabled(true);\n\t\ttrackedFilterBtn.setState(config.trackedFilter().ordinal());\n\n\t\tviewControls.add(trackedFilterBtn);\n\n\t\t// Ignored tasks filter button\n\t\tSwingUtil.removeButtonDecorations(ignoredFilterBtn);\n\t\tignoredFilterBtn.setIcons(Icons.UNIGNORED_ONLY_ICON, Icons.IGNORED_UNIGNORED_ICON, Icons.IGNORED_ONLY_ICON);\n\t\tignoredFilterBtn.setToolTips(\"Hide ignored tasks\", \"All tasks\", \"Ignored tasks only\");\n\t\tignoredFilterBtn.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tignoredFilterBtn.setStateChangedAction(e -\u003e filterButtonAction(\"ignored\"));\n\t\tignoredFilterBtn.popupMenuEnabled(true);\n\t\tignoredFilterBtn.setState(config.ignoredFilter().ordinal());\n\n\t\tviewControls.add(ignoredFilterBtn);\n\n\t\ttitlePanel.add(viewControls, BorderLayout.EAST);\n\t\ttitlePanel.add(title, BorderLayout.WEST);\n\t\ttitlePanel.setAlignmentX(LEFT_ALIGNMENT);\n\n\t\treturn titlePanel;\n\t}\n\n\tprivate void filterButtonActionNoRefresh(String filter)\n\t{\n\t\tint state;\n\t\tEnum configValue;\n\n\t\tswitch (filter)\n\t\t{\n\t\t\tcase \"completed\":\n\t\t\t\tstate \u003d completedFilterBtn.getState();\n\t\t\t\tconfigValue \u003d ConfigValues.CompletedFilterValues.values()[state];\n\t\t\t\tbreak;\n\t\t\tcase \"tracked\":\n\t\t\t\tstate \u003d trackedFilterBtn.getState();\n\t\t\t\tconfigValue \u003d ConfigValues.TrackedFilterValues.values()[state];\n\t\t\t\tbreak;\n\t\t\tcase \"ignored\":\n\t\t\t\tstate \u003d ignoredFilterBtn.getState();\n\t\t\t\tconfigValue \u003d ConfigValues.IgnoredFilterValues.values()[state];\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlog.debug(\"Filter button action failed due to unrecognised filter.\");\n\t\t\t\treturn;\n\t\t}\n\n\t\tplugin.getConfigManager().setConfiguration(TasksTrackerPlugin.CONFIG_GROUP_NAME, filter + \"Filter\", configValue);\n\t}\n\n\tprivate void filterButtonAction(String filter)\n\t{\n\t\tfilterButtonActionNoRefresh(filter);\n\t\tplugin.refreshAllTasks();\n\t}\n\n\tprivate void actionAllFilterButtonsNoRefresh()\n\t{\n\t\tfilterButtonActionNoRefresh(\"tracked\");\n\t\tfilterButtonActionNoRefresh(\"ignored\");\n\t\tfilterButtonActionNoRefresh(\"completed\");\n\t}\n\n\tprivate void actionAllFilterButtons()\n\t{\n\t\tactionAllFilterButtonsNoRefresh();\n\t\tplugin.refreshAllTasks();\n\t}\n\n\tprivate JPanel getSearchPanel()\n\t{\n\t\tJPanel filtersPanel \u003d new JPanel();\n\t\tfiltersPanel.setAlignmentX(LEFT_ALIGNMENT);\n\t\tfiltersPanel.setLayout(new BoxLayout(filtersPanel, BoxLayout.Y_AXIS));\n\n\t\tSearchBox textSearch \u003d new SearchBox();\n\t\ttextSearch.addTextChangedListener(() -\u003e {\n\t\t\tplugin.taskTextFilter \u003d textSearch.getText().toLowerCase();\n\t\t\tplugin.refreshAllTasks();\n\t\t});\n\n\t\tfiltersPanel.add(textSearch);\n\n\t\treturn filtersPanel;\n\t}\n\n\tprivate void updateCollapseButtonText()\n\t{\n\t\tif (taskService.getCurrentTaskType() \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tArrayList\u003cFilterConfig\u003e filters \u003d taskService.getCurrentTaskType().getFilters();\n\n\t\tint countInclusive \u003d 0;\n\t\tint countExclusive \u003d 0;\n\n\t\tfor (FilterConfig filterConfig : filters)\n\t\t{\n\t\t\tString filterText \u003d Optional.ofNullable(plugin.getConfigManager()\n\t\t\t\t\t.getConfiguration(TasksTrackerPlugin.CONFIG_GROUP_NAME,\n\t\t\t\t\t\ttaskService.getCurrentTaskType().getFilterConfigPrefix() + filterConfig.getConfigKey()))\n\t\t\t\t.orElse(\"\");\n\n\t\t\tint count \u003d (filterText.isEmpty() || filterText.equals(\"-1\")) ? 0 : filterText.split(\",\").length;\n\n\t\t\tif (filterConfig.getFilterType().equals(FilterType.BUTTON_FILTER))\n\t\t\t{\n\t\t\t\tcountInclusive +\u003d count;\n\t\t\t}\n\t\t\tif (filterConfig.getFilterType().equals(FilterType.DROPDOWN_FILTER))\n\t\t\t{\n\t\t\t\tcountExclusive +\u003d count;\n\t\t\t}\n\t\t}\n\n\t\tcollapseBtn.setText(countInclusive + \" inclusive, \" + countExclusive + \" exclusive filters\");\n\t}\n\n\tprivate void initTaskTypeDropdownAsync()\n\t{\n\t\tTaskType currentTaskType \u003d taskService.getCurrentTaskType();\n\t\ttaskService.getTaskTypesByJsonName().thenAccept(taskTypes -\u003e {\n\t\t\tArrayList\u003cComboItem\u003cTaskType\u003e\u003e taskTypeItems \u003d new ArrayList\u003c\u003e();\n\t\t\ttaskTypes.forEach((taskTypeJsonName, taskType) -\u003e {\n\t\t\t\tComboItem\u003cTaskType\u003e item \u003d new ComboItem\u003c\u003e(taskType, taskType.getName());\n\t\t\t\ttaskTypeItems.add(item);\n\t\t\t\ttaskTypeDropdown.addItem(item);\n\t\t\t});\n\n\t\t\tComboItem\u003cTaskType\u003e currentTaskTypeComboItem \u003d taskTypeItems.stream()\n\t\t\t\t.filter(item -\u003e item.getValue().equals(currentTaskType))\n\t\t\t\t.findFirst().orElseGet(() -\u003e taskTypeItems.get(0));\n\t\t\ttaskTypeDropdown.setSelectedItem(currentTaskTypeComboItem);\n\t\t\ttaskTypeDropdown.addActionListener(e -\u003e {\n\t\t\t\tTaskType taskType \u003d taskTypeDropdown.getItemAt(taskTypeDropdown.getSelectedIndex()).getValue();\n\t\t\t\ttaskService.setTaskType(taskType).thenAccept(wasTaskTypeChanged -\u003e {\n\t\t\t\t\tif (wasTaskTypeChanged)\n\t\t\t\t\t{\n\t\t\t\t\t\tSwingUtilities.invokeLater(() -\u003e\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tredraw();\n\t\t\t\t\t\t\tplugin.refreshAllTasks();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n}","filePath":"src/main/java/net/reldo/taskstracker/panel/LoggedInPanel.java"},{"fileName":"TasksTrackerPluginPanel.java","content":"package net.reldo.taskstracker.panel;\n\nimport java.awt.BorderLayout;\nimport java.awt.Dimension;\nimport javax.swing.SwingUtilities;\nimport javax.swing.border.EmptyBorder;\nimport lombok.extern.slf4j.Slf4j;\nimport net.reldo.taskstracker.TasksTrackerConfig;\nimport net.reldo.taskstracker.TasksTrackerPlugin;\nimport net.reldo.taskstracker.config.ConfigValues;\nimport net.reldo.taskstracker.data.task.TaskService;\nimport net.runelite.client.game.SpriteManager;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.PluginPanel;\n\n@Slf4j\npublic class TasksTrackerPluginPanel extends PluginPanel\n{\n\tprivate final LoggedInPanel loggedInPanel;\n\tprivate final LoggedOutPanel loggedOutPanel \u003d new LoggedOutPanel();\n\n\tpublic TaskListPanel taskListPanel;\n\n\tprivate boolean loggedInPanelVisible \u003d false;\n\n\tpublic TasksTrackerPluginPanel(TasksTrackerPlugin plugin, TasksTrackerConfig config, SpriteManager spriteManager, TaskService taskService)\n\t{\n\t\tsuper(false);\n\n\t\tsetBorder(new EmptyBorder(6, 6, 6, 6));\n\t\tsetBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tsetLayout(new BorderLayout());\n\n\t\tloggedInPanel \u003d new LoggedInPanel(plugin, config, taskService);\n\t\ttaskListPanel \u003d loggedInPanel.taskListPanel;\n\t\tadd(loggedInPanel, BorderLayout.NORTH);\n\t\tloggedInPanel.setVisible(false);\n\n\t\t// Add error pane\n\t\tadd(loggedOutPanel);\n\t}\n\n\t@Override\n\tpublic Dimension getPreferredSize()\n\t{\n\t\treturn new Dimension(PANEL_WIDTH + SCROLLBAR_WIDTH, super.getPreferredSize().height);\n\t}\n\n\tpublic void redraw()\n\t{\n\t\tif (loggedInPanelVisible)\n\t\t{\n\t\t\tloggedInPanel.redraw();\n\t\t}\n\t}\n\n\tpublic void refreshAllTasks()\n\t{\n\t\tif (loggedInPanelVisible)\n\t\t{\n\t\t\tloggedInPanel.refreshAllTasks();\n\t\t}\n\t}\n\n\tpublic void refreshFilterButtonsFromConfig(ConfigValues.TaskListTabs tab)\n\t{\n\t\tif (loggedInPanelVisible)\n\t\t{\n\t\t\tloggedInPanel.refreshFilterButtonsFromConfig(tab);\n\t\t}\n\t}\n\n\tpublic void setLoggedIn(boolean loggedIn)\n\t{\n\t\tif (SwingUtilities.isEventDispatchThread())\n\t\t{\n\t\t\tupdateVisiblePanel(loggedIn);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlog.error(\"Failed to update loggedIn state - not event dispatch thread.\");\n\t\t}\n\t}\n\n\tpublic void hideLoggedInPanel()\n\t{\n\t\tif (SwingUtilities.isEventDispatchThread())\n\t\t{\n\t\t\tupdateVisiblePanel(false);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlog.error(\"Failed to update logged in panel visibility - not event dispatch thread.\");\n\t\t}\n\t}\n\n\tprivate void updateVisiblePanel(boolean loggedInPanelVisible)\n\t{\n\t\tif (loggedInPanelVisible !\u003d this.loggedInPanelVisible)\n\t\t{\n\t\t\tif (loggedInPanelVisible)\n\t\t\t{\n\t\t\t\tloggedOutPanel.setVisible(false);\n\t\t\t\tloggedInPanel.setVisible(true);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tloggedInPanel.setVisible(false);\n\t\t\t\tloggedOutPanel.setVisible(true);\n\t\t\t}\n\n\t\t\tvalidate();\n\t\t\trepaint();\n\t\t}\n\t\tthis.loggedInPanelVisible \u003d loggedInPanelVisible;\n\t}\n\n\tpublic void drawNewTaskType()\n\t{\n\t\tif (loggedInPanelVisible)\n\t\t{\n\t\t\tloggedInPanel.drawNewTaskType();\n\t\t}\n\n\t}\n\n\tpublic void saveCurrentTabFilters()\n\t{\n\t\tif (loggedInPanelVisible)\n\t\t{\n\t\t\tloggedInPanel.saveCurrentTabFilters();\n\t\t}\n\n\t}\n}","filePath":"src/main/java/net/reldo/taskstracker/panel/TasksTrackerPluginPanel.java"},{"fileName":"LoggedOutPanel.java","content":"package net.reldo.taskstracker.panel;\n\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\n\npublic class LoggedOutPanel extends JPanel\n{\n\tpublic LoggedOutPanel()\n\t{\n\t\tthis.add(new JLabel(\"Log into an account to track tasks.\"));\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/panel/LoggedOutPanel.java"},{"fileName":"TabMenuItem.java","content":"package net.reldo.taskstracker.panel.components;\n\n\nimport javax.swing.JMenuItem;\nimport java.awt.event.ActionListener;\n\n\npublic class TabMenuItem extends JMenuItem\n{\n\tprivate final String labelText;\n\tprivate final TriToggleButton filterBtn;\n\n\tpublic TabMenuItem(String label, TriToggleButton filterBtn, ActionListener actionListener)\n\t{\n\t\tsuper(label);\n\t\tthis.labelText \u003d label;\n\t\tthis.filterBtn \u003d filterBtn;\n\t\tthis.addActionListener(actionListener);\n\t}\n\n\t@Override\n\tpublic String getText()\n\t{\n\t\tif (filterBtn !\u003d null)\n\t\t{\n\t\t\treturn filterBtn.isEnabled() ? \"Lock \" + labelText : \"Unlock \" + labelText;\n\t\t}\n\t\treturn labelText;\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/panel/components/TabMenuItem.java"},{"fileName":"CheckBox.java","content":"package net.reldo.taskstracker.panel.components;\n\nimport java.awt.BorderLayout;\nimport java.awt.Dimension;\nimport java.awt.event.ActionListener;\nimport javax.swing.JCheckBox;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport net.runelite.client.ui.ColorScheme;\nimport static net.runelite.client.ui.PluginPanel.PANEL_WIDTH;\n\npublic class CheckBox extends JPanel\n{\n\tprivate final JCheckBox jCheckBox \u003d new JCheckBox();\n\n\tpublic CheckBox(String name)\n\t{\n\t\tsetLayout(new BorderLayout());\n\t\tsetMinimumSize(new Dimension(PANEL_WIDTH, 0));\n\n\t\tJLabel label \u003d new JLabel(name);\n\t\tadd(label, BorderLayout.CENTER);\n\n\t\tjCheckBox.setBackground(ColorScheme.LIGHT_GRAY_COLOR);\n\t\tadd(jCheckBox, BorderLayout.EAST);\n\t}\n\n\tpublic boolean isSelected()\n\t{\n\t\treturn jCheckBox.isSelected();\n\t}\n\n\tpublic void setSelected(boolean selected)\n\t{\n\t\tjCheckBox.setSelected(selected);\n\t}\n\n\tpublic void addActionListener(ActionListener l)\n\t{\n\t\tjCheckBox.addActionListener(l);\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/panel/components/CheckBox.java"},{"fileName":"FixedWidthPanel.java","content":"package net.reldo.taskstracker.panel.components;\n\nimport java.awt.Dimension;\nimport javax.swing.JPanel;\nimport net.runelite.client.ui.PluginPanel;\n\npublic class FixedWidthPanel extends JPanel\n{\n\t@Override\n\tpublic Dimension getPreferredSize()\n\t{\n\t\treturn new Dimension(PluginPanel.PANEL_WIDTH, super.getPreferredSize().height);\n\t}\n\n}\n","filePath":"src/main/java/net/reldo/taskstracker/panel/components/FixedWidthPanel.java"},{"fileName":"MultiToggleButton.java","content":"package net.reldo.taskstracker.panel.components;\n\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.event.MouseEvent;\nimport javax.swing.Icon;\nimport javax.swing.JButton;\nimport javax.swing.JMenuItem;\nimport javax.swing.JPopupMenu;\nimport javax.swing.border.EmptyBorder;\nimport lombok.Getter;\nimport lombok.Setter;\n\npublic class MultiToggleButton extends JButton\n{\n\n\t// Icons\n\tprivate final Icon[] icons;\n\t// Tooltips\n\tprivate final String[] tooltips;\n\tprivate final int stateCount;\n\t@Setter\n\tprivate ActionListener stateChangedAction \u003d null;\n\t@Getter\n\tprivate int state \u003d 0;\n\tfinal JPopupMenu lockedPopupMenu \u003d new JPopupMenu();\n\tfinal JPopupMenu popupMenu \u003d new JPopupMenu();\n\tprivate boolean popupMenuEnabled \u003d false;\n\n\tpublic MultiToggleButton(int stateCount)\n\t{\n\t\tsuper();\n\t\tthis.stateCount \u003d stateCount;\n\t\ticons \u003d new Icon[stateCount];\n\t\ttooltips \u003d new String[stateCount];\n\t\tpopupMenu.setBorder(new EmptyBorder(5, 5, 5, 5));\n\t\taddActionListener(e -\u003e changeStateThenAction());\n\t\tsuper.setToolTipText(\"Initial State\"); // Tooltip text must be initialised for getToolTipText() to be called\n\n\t\tlockedPopupMenu.setBorder(new EmptyBorder(5, 5, 5, 5));\n\t\tJMenuItem menuItem \u003d new JMenuItem(\"\\uD83D\\uDD12 Locked\");\n\t\tmenuItem.setEnabled(false);\n\t\tlockedPopupMenu.add(menuItem);\n\t}\n\n\tpublic void popupMenuEnabled(boolean enabled)\n\t{\n\t\tif (popupMenuEnabled !\u003d enabled)\n\t\t{\n\t\t\tpopupMenuEnabled \u003d enabled;\n\t\t\tif (popupMenuEnabled)\n\t\t\t{\n\t\t\t\tthis.setComponentPopupMenu(popupMenu);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.setComponentPopupMenu(lockedPopupMenu);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic void setIcon(Icon icon, int state)\n\t{\n\t\tif (state \u003c 0 || state \u003e stateCount || icon \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\ticons[state] \u003d icon;\n\n\t\tif (state \u003d\u003d this.state)\n\t\t{\n\t\t\tsetIconState();\n\t\t}\n\t}\n\n\tpublic boolean setIcons(Icon[] icons)\n\t{\n\t\tif (icons \u003d\u003d null || icons.length \u003d\u003d 0)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (int i \u003d 0; i \u003c icons.length; i++)\n\t\t{\n\t\t\tsetIcon(icons[i], i);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tpublic void setToolTip(String tooltip, int state)\n\t{\n\t\tif (state \u003c 0 || state \u003e 3 || tooltip \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\ttooltips[state] \u003d tooltip;\n\t\taddPopupMenuItem(tooltip, state);\n\t}\n\n\tpublic boolean setToolTips(String[] tooltips)\n\t{\n\t\tif (tooltips \u003d\u003d null || tooltips.length \u003d\u003d 0)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (int i \u003d 0; i \u003c tooltips.length; i++)\n\t\t{\n\t\t\tsetToolTip(tooltips[i], i);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tpublic void changeState()\n\t{\n\t\tsetState((++state) % stateCount);\n\t}\n\n\tpublic void changeStateThenAction()\n\t{\n\t\tsetStateThenAction((++state) % stateCount);\n\t}\n\n\tprivate void setIconState()\n\t{\n\t\tsuper.setIcon(icons[state]);\n\t}\n\n\tprivate String createToolTipText()\n\t{\n\t\tString tooltipText \u003d tooltips[state];\n\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\ttooltipText \u003d \"\\uD83D\\uDD12 \" + tooltipText;//\" \"\n\t\t}\n\n\t\treturn tooltipText;\n\t}\n\n\t@Override\n\tpublic String getToolTipText(MouseEvent mouseEvent)\n\t{\n\t\treturn createToolTipText();\n\t}\n\n\tpublic void setState(int state)\n\t{\n\t\tthis.state \u003d state;\n\t\tsetIconState();\n\t}\n\n\tpublic void setStateThenAction(int state)\n\t{\n\t\tsetState(state);\n\t\tif (stateChangedAction !\u003d null)\n\t\t{\n\t\t\tthis.stateChangedAction.actionPerformed(new ActionEvent(this, 0, \"\"));\n\t\t}\n\t}\n\n\tprivate void addPopupMenuItem(String text, int state)\n\t{\n\t\tJMenuItem menuItem \u003d new JMenuItem(text);\n\t\tmenuItem.addActionListener(e -\u003e {\n\t\t\tif (isEnabled())\n\t\t\t{\n\t\t\t\tsetStateThenAction(state);\n\t\t\t}\n\t\t});\n\t\tpopupMenu.add(menuItem);\n\t}\n\n\tpublic void setEnabled(boolean enabled)\n\t{\n\t\tsuper.setEnabled(enabled);\n\t\tpopupMenuEnabled(enabled);\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/panel/components/MultiToggleButton.java"},{"fileName":"SearchBox.java","content":"package net.reldo.taskstracker.panel.components;\n\nimport java.awt.Dimension;\nimport javax.swing.event.DocumentEvent;\nimport javax.swing.event.DocumentListener;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.PluginPanel;\nimport net.runelite.client.ui.components.IconTextField;\n\npublic class SearchBox extends IconTextField\n{\n\tprivate SearchBoxCallback fn;\n\n\tpublic SearchBox()\n\t{\n\t\tthis.setIcon(IconTextField.Icon.SEARCH);\n\t\tthis.setPreferredSize(new Dimension(PluginPanel.PANEL_WIDTH - 20, 30));\n\t\tthis.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tthis.setHoverBackgroundColor(ColorScheme.DARK_GRAY_HOVER_COLOR);\n\t\tthis.getDocument().addDocumentListener(new DocumentListener()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void insertUpdate(DocumentEvent documentEvent)\n\t\t\t{\n\t\t\t\tfn.call();\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void removeUpdate(DocumentEvent documentEvent)\n\t\t\t{\n\t\t\t\tfn.call();\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void changedUpdate(DocumentEvent documentEvent)\n\t\t\t{\n\t\t\t}\n\t\t});\n\n\t\tthis.addActionListener(e -\u003e fn.call()\n\t\t);\n\t}\n\n\tpublic void addTextChangedListener(SearchBoxCallback fn)\n\t{\n\t\tthis.fn \u003d fn;\n\t}\n\n\tpublic interface SearchBoxCallback\n\t{\n\t\tvoid call();\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/panel/components/SearchBox.java"},{"fileName":"TriToggleButton.java","content":"package net.reldo.taskstracker.panel.components;\n\nimport javax.swing.Icon;\n\npublic class TriToggleButton extends MultiToggleButton\n{\n\tpublic TriToggleButton()\n\t{\n\t\tsuper(3);\n\t}\n\n\tpublic boolean setIcons(Icon icon0, Icon icon1, Icon icon2)\n\t{\n\t\tif (icon0 \u003d\u003d null || icon1 \u003d\u003d null || icon2 \u003d\u003d null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tsetIcon(icon0, 0);\n\t\tsetIcon(icon1, 1);\n\t\tsetIcon(icon2, 2);\n\n\t\treturn true;\n\t}\n\n\tpublic boolean setToolTips(String tooltip0, String tooltip1, String tooltip2)\n\t{\n\t\tif (tooltip0 \u003d\u003d null || tooltip1 \u003d\u003d null || tooltip2 \u003d\u003d null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tsetToolTip(tooltip0, 0);\n\t\tsetToolTip(tooltip1, 1);\n\t\tsetToolTip(tooltip2, 2);\n\n\t\treturn true;\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/panel/components/TriToggleButton.java"},{"fileName":"DynamicButtonFilterPanel.java","content":"package net.reldo.taskstracker.panel.filters;\n\nimport com.google.common.collect.ImmutableList;\nimport java.awt.BorderLayout;\nimport java.awt.GridLayout;\nimport java.awt.image.BufferedImage;\nimport java.util.LinkedHashMap;\nimport java.util.List;\nimport javax.swing.JPanel;\nimport javax.swing.JToggleButton;\nimport javax.swing.border.EmptyBorder;\nimport net.reldo.taskstracker.TasksTrackerPlugin;\nimport net.reldo.taskstracker.data.jsondatastore.types.FilterConfig;\nimport net.reldo.taskstracker.data.jsondatastore.types.FilterCustomItem;\nimport net.reldo.taskstracker.data.task.TaskType;\nimport net.runelite.client.hiscore.HiscoreSkill;\nimport static net.runelite.client.hiscore.HiscoreSkill.*;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.util.ImageUtil;\n\npublic class DynamicButtonFilterPanel extends FilterButtonPanel\n{\n\tprivate final FilterConfig filterConfig;\n\tprivate final TaskType taskType;\n\n\t/**\n\t * Real skills, ordered in the way they should be displayed in the panel.\n\t */\n\tprivate static final List\u003cHiscoreSkill\u003e SKILLS \u003d ImmutableList.of(\n\t\tATTACK, HITPOINTS, MINING,\n\t\tSTRENGTH, AGILITY, SMITHING,\n\t\tDEFENCE, HERBLORE, FISHING,\n\t\tRANGED, THIEVING, COOKING,\n\t\tPRAYER, CRAFTING, FIREMAKING,\n\t\tMAGIC, FLETCHING, WOODCUTTING,\n\t\tRUNECRAFT, SLAYER, FARMING,\n\t\tCONSTRUCTION, HUNTER\n\t);\n\n\tpublic DynamicButtonFilterPanel(TasksTrackerPlugin plugin, FilterConfig filterConfig, TaskType taskType)\n\t{\n\t\tsuper(plugin, filterConfig.getLabel());\n\t\tthis.filterConfig \u003d filterConfig;\n\t\tthis.taskType \u003d taskType;\n\t\tthis.configKey \u003d taskType.getFilterConfigPrefix() + filterConfig.getConfigKey();\n\n\t\tsetLayout(new BorderLayout());\n\t\tsetBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tsetBorder(new EmptyBorder(10, 10, 10, 10));\n\n\t\tredraw();\n\t}\n\n\t@Override\n\tprotected JPanel makeButtonPanel()\n\t{\n\t\t// Panel that holds tier icons\n\t\tJPanel buttonPanel \u003d new JPanel();\n\t\tbuttonPanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\n\t\tLinkedHashMap\u003cString, BufferedImage\u003e buttonImages \u003d getIconImages();\n\t\tLinkedHashMap\u003cString, String\u003e buttonTooltips \u003d getTooltips();\n\n\t\tbuttonPanel.setLayout(new GridLayout(buttonImages.size() / 3, 3));\n\n\t\t// For each filter value create a button and add it to the UI\n\t\tbuttonImages.forEach((key, image) -\u003e {\n\t\t\tString tooltip \u003d buttonTooltips.get(key);\n\t\t\tFilterButton button \u003d makeButton(key, tooltip, image);\n\t\t\tbutton.setSelected(getConfigButtonState(key));\n\t\t\tbuttons.put(key, button);\n\t\t\tbuttonPanel.add(button);\n\t\t});\n\n\t\treturn buttonPanel;\n\t}\n\n\t@Override\n\tprotected LinkedHashMap\u003cString, BufferedImage\u003e getIconImages()\n\t{\n\t\tLinkedHashMap\u003cString, BufferedImage\u003e images \u003d new LinkedHashMap\u003c\u003e();\n\n\t\tif (filterConfig.getConfigKey().equals(\"skill\"))\n\t\t{\n\t\t\tString skillName;\n\t\t\tBufferedImage skillImage;\n\t\t\tint index \u003d 0;\n\n\t\t\tfor (FilterCustomItem customItem : filterConfig.getCustomItems())\n\t\t\t{\n\t\t\t\tif (customItem.getValue() !\u003d 0)\n\t\t\t\t{\n\t\t\t\t\tskillName \u003d SKILLS.get(index).name().toLowerCase();\n\n\t\t\t\t\tString directory \u003d \"/skill_icons_small/\";\n\t\t\t\t\tString skillIcon \u003d directory + skillName + \".png\";\n\n\t\t\t\t\tskillImage \u003d ImageUtil.loadImageResource(getClass(), skillIcon);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tskillImage \u003d ImageUtil.loadImageResource(TasksTrackerPlugin.class, \"panel/components/no_skill.png\");\n\t\t\t\t}\n\n\t\t\t\tString key \u003d customItem.getValue().toString();\n\t\t\t\timages.put(key, skillImage);\n\t\t\t\tindex++;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor (FilterCustomItem customItem : filterConfig.getCustomItems())\n\t\t\t{\n\t\t\t\tString key \u003d customItem.getValue().toString();\n\t\t\t\timages.put(key, taskType.getSpritesById().get(customItem.getSpriteId()));\n\t\t\t}\n\t\t}\n\t\treturn images;\n\t}\n\n\tprivate LinkedHashMap\u003cString, String\u003e getTooltips()\n\t{\n\t\tLinkedHashMap\u003cString, String\u003e tooltips \u003d new LinkedHashMap\u003c\u003e();\n\t\tfor (FilterCustomItem customItem : filterConfig.getCustomItems())\n\t\t{\n\t\t\tString key \u003d customItem.getValue().toString();\n\t\t\ttooltips.put(key, customItem.getTooltip());\n\t\t}\n\t\treturn tooltips;\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/panel/filters/DynamicButtonFilterPanel.java"},{"fileName":"DynamicDropdownFilterPanel.java","content":"package net.reldo.taskstracker.panel.filters;\n\nimport java.awt.GridLayout;\nimport javax.swing.JComboBox;\nimport javax.swing.JLabel;\nimport javax.swing.SwingUtilities;\nimport javax.swing.border.EmptyBorder;\nimport lombok.extern.slf4j.Slf4j;\nimport net.reldo.taskstracker.TasksTrackerPlugin;\nimport net.reldo.taskstracker.data.jsondatastore.types.FilterConfig;\nimport net.reldo.taskstracker.data.task.TaskType;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\n\n@Slf4j\npublic class DynamicDropdownFilterPanel extends FilterPanel\n{\n\tprivate final String configKey;\n\tprivate final FilterConfig filterConfig;\n\tprivate final ConfigManager configManager;\n\tprivate final TasksTrackerPlugin plugin;\n\tprivate final ComboItem[] items;\n\tprivate JComboBox\u003cComboItem\u003e dropdown;\n\n\tpublic DynamicDropdownFilterPanel(TasksTrackerPlugin plugin, FilterConfig filterConfig, TaskType taskType, ComboItem[] items)\n\t{\n\t\tthis.configManager \u003d plugin.getConfigManager();\n\t\tthis.plugin \u003d plugin;\n\t\tthis.filterConfig \u003d filterConfig;\n\t\tthis.items \u003d items;\n\t\tthis.configKey \u003d taskType.getFilterConfigPrefix() + filterConfig.getConfigKey();\n\n\t\tsetLayout(new GridLayout(1, 2));\n\t\tsetBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tsetBorder(new EmptyBorder(5, 10, 5, 10));\n\t}\n\n\tprivate JComboBox\u003cComboItem\u003e makeDropdownPanel()\n\t{\n\t\tJComboBox\u003cComboItem\u003e dropdown \u003d new JComboBox\u003c\u003e(items);\n\t\tdropdown.setFont(FontManager.getRunescapeSmallFont());\n\t\tdropdown.setAlignmentX(LEFT_ALIGNMENT);\n\t\tdropdown.setSelectedItem(items[0]);\n\t\tdropdown.setFocusable(false);\n\t\tdropdown.setBackground(ColorScheme.DARK_GRAY_COLOR.brighter());\n\t\tdropdown.addActionListener(e -\u003e {\n\t\t\tComboItem selection \u003d dropdown.getItemAt(dropdown.getSelectedIndex());\n\t\t\tupdateFilterConfig();\n\t\t\tplugin.refreshAllTasks();\n\t\t\tlog.debug(\"selected: {} {}\", selection.getLabel(), selection.getValue());\n\t\t});\n\n\t\treturn dropdown;\n\t}\n\n\tprivate JLabel makeLabel()\n\t{\n\t\tJLabel label \u003d new JLabel(filterConfig.getLabel() + \":\");\n\t\tlabel.setFont(FontManager.getRunescapeSmallFont());\n\t\tlabel.setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n\t\treturn label;\n\t}\n\n\tprotected void updateFilterConfig()\n\t{\n\t\tlog.debug(\"updateFilterConfig {}, {}, {}\", TasksTrackerPlugin.CONFIG_GROUP_NAME, configKey, dropdown.getItemAt(dropdown.getSelectedIndex()).getValue());\n\t\tconfigManager.setConfiguration(TasksTrackerPlugin.CONFIG_GROUP_NAME, configKey, dropdown.getItemAt(dropdown.getSelectedIndex()).getValue());\n\t}\n\n\tpublic void redraw()\n\t{\n\t\tif (SwingUtilities.isEventDispatchThread())\n\t\t{\n\t\t\tremoveAll();\n\n\t\t\tdropdown \u003d makeDropdownPanel();\n\n\t\t\tadd(makeLabel());\n\t\t\tadd(dropdown);\n\n\t\t\tupdateFilterConfig();\n\n\t\t\tvalidate();\n\t\t\trepaint();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlog.error(\"Dropdown filter panel redraw failed - not event dispatch thread.\");\n\t\t}\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/panel/filters/DynamicDropdownFilterPanel.java"},{"fileName":"FilterPanel.java","content":"package net.reldo.taskstracker.panel.filters;\n\nimport net.reldo.taskstracker.panel.components.FixedWidthPanel;\n\npublic abstract class FilterPanel extends FixedWidthPanel\n{\n\tpublic abstract void redraw();\n}\n","filePath":"src/main/java/net/reldo/taskstracker/panel/filters/FilterPanel.java"},{"fileName":"ComboItem.java","content":"package net.reldo.taskstracker.panel.filters;\n\npublic class ComboItem\u003cT\u003e\n{\n\tprivate T value;\n\tprivate String label;\n\n\tpublic ComboItem(T value, String label)\n\t{\n\t\tthis.value \u003d value;\n\t\tthis.label \u003d label;\n\t}\n\n\tpublic T getValue()\n\t{\n\t\treturn this.value;\n\t}\n\n\tpublic String getLabel()\n\t{\n\t\treturn this.label;\n\t}\n\n\t@Override\n\tpublic String toString()\n\t{\n\t\treturn label;\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/panel/filters/ComboItem.java"},{"fileName":"FilterButton.java","content":"package net.reldo.taskstracker.panel.filters;\n\nimport java.awt.Dimension;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.awt.image.BufferedImage;\nimport javax.swing.ImageIcon;\nimport javax.swing.JMenuItem;\nimport javax.swing.JPopupMenu;\nimport javax.swing.JToggleButton;\nimport javax.swing.plaf.basic.BasicBorders;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.util.ImageUtil;\n\npublic class FilterButton extends JToggleButton\n{\n\tprivate final String key;\n\tprivate final FilterButtonPanel parentPanel;\n\n\tpublic FilterButton(String key, String tooltip, BufferedImage image, FilterButtonPanel parentPanel)\n\t{\n\t\tthis.key \u003d key;\n\t\tthis.parentPanel \u003d parentPanel;\n\n\t\tsetBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tsetBorder(new BasicBorders.ToggleButtonBorder(ColorScheme.DARKER_GRAY_COLOR,\n\t\t\tColorScheme.DARKER_GRAY_COLOR.darker(),\n\t\t\tColorScheme.MEDIUM_GRAY_COLOR.darker(),\n\t\t\tColorScheme.MEDIUM_GRAY_COLOR));\n\t\tsetFocusable(false);\n\n\t\tif (image !\u003d null)\n\t\t{\n\t\t\tImageIcon selectedIcon \u003d new ImageIcon(image);\n\t\t\tImageIcon deselectedIcon \u003d new ImageIcon(ImageUtil.alphaOffset(image, -180));\n\n\t\t\tsetIcon(deselectedIcon);\n\t\t\tsetSelectedIcon(selectedIcon);\n\t\t\tsetPreferredSize(new Dimension(image.getWidth(), image.getHeight() + 10));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetPreferredSize(new Dimension(getPreferredSize().width, 50));\n\t\t}\n\n\t\tsetToolTipText(tooltip.substring(0, 1).toUpperCase() + tooltip.substring(1).toLowerCase());\n\n\t\taddActionListener(e -\u003e {\n\t\t\tparentPanel.updateFilterText();\n\t\t\tparentPanel.updateCollapseButtonText();\n\t\t\tparentPanel.plugin.refreshAllTasks();\n\t\t});\n\n\t\tsetupRightClickMenu();\n\n\t\tsetSelected(true);\n\t}\n\n\tprivate void setupRightClickMenu()\n\t{\n\t\taddMouseListener(new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mouseReleased(MouseEvent e)\n\t\t\t{\n\t\t\t\tif (e.isPopupTrigger())\n\t\t\t\t{\n\t\t\t\t\tshowContextMenu(e);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate void showContextMenu(MouseEvent e)\n\t{\n\t\tJPopupMenu popupMenu \u003d new JPopupMenu();\n\n\t\tJMenuItem filterToOnlyItem \u003d new JMenuItem(\"Select Only\");\n\t\tfilterToOnlyItem.addActionListener(event -\u003e {\n\t\t\tparentPanel.setOnlySelected(key);\n\t\t\tparentPanel.updateFilterText();\n\t\t\tparentPanel.updateCollapseButtonText();\n\t\t\tparentPanel.plugin.refreshAllTasks();\n\t\t});\n\t\tpopupMenu.add(filterToOnlyItem);\n\n\t\tJMenuItem exceptItem \u003d new JMenuItem(\"Select All Except\");\n\t\texceptItem.addActionListener(event -\u003e {\n\t\t\tparentPanel.setAllExceptSelected(key);\n\t\t\tparentPanel.updateFilterText();\n\t\t\tparentPanel.updateCollapseButtonText();\n\t\t\tparentPanel.plugin.refreshAllTasks();\n\t\t});\n\t\tpopupMenu.add(exceptItem);\n\n\t\tpopupMenu.show(e.getComponent(), e.getX(), e.getY());\n\t}\n\n\tpublic String getKey()\n\t{\n\t\treturn key;\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/panel/filters/FilterButton.java"},{"fileName":"FilterButtonPanel.java","content":"package net.reldo.taskstracker.panel.filters;\n\nimport java.awt.BorderLayout;\nimport java.awt.Dimension;\nimport java.awt.image.BufferedImage;\nimport java.util.HashMap;\nimport java.util.LinkedHashMap;\nimport java.util.Map;\nimport java.util.stream.Collectors;\nimport javax.swing.Box;\nimport javax.swing.BoxLayout;\nimport javax.swing.Icon;\nimport javax.swing.ImageIcon;\nimport javax.swing.JButton;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.JToggleButton;\nimport javax.swing.SwingUtilities;\nimport javax.swing.border.EmptyBorder;\nimport javax.swing.plaf.basic.BasicBorders;\nimport javax.swing.plaf.basic.BasicButtonUI;\nimport lombok.extern.slf4j.Slf4j;\nimport net.reldo.taskstracker.TasksTrackerPlugin;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.util.ImageUtil;\nimport net.runelite.client.util.SwingUtil;\n\n@Slf4j\npublic abstract class FilterButtonPanel extends FilterPanel\n{\n\tprotected final TasksTrackerPlugin plugin;\n\tprivate final String label;\n\n\tprotected final Map\u003cString, JToggleButton\u003e buttons \u003d new HashMap\u003c\u003e();\n\tprotected String configKey;\n\tprotected JPanel buttonPanel;\n\n\tprotected JToggleButton collapseBtn;\n\tprivate final String expandBtnPath \u003d \"panel/components/\";\n\tprivate final BufferedImage collapseImg \u003d ImageUtil.loadImageResource(TasksTrackerPlugin.class, expandBtnPath + \"filter_buttons_collapsed.png\");\n\tprivate final Icon MENU_COLLAPSED_ICON \u003d new ImageIcon(ImageUtil.alphaOffset(collapseImg, -180));\n\tprivate final Icon MENU_ICON_HOVER \u003d new ImageIcon(collapseImg);\n\tprivate final BufferedImage expandedImg \u003d ImageUtil.loadImageResource(TasksTrackerPlugin.class, expandBtnPath + \"filter_buttons_expanded.png\");\n\tprivate final Icon MENU_EXPANDED_ICON \u003d new ImageIcon(ImageUtil.alphaOffset(expandedImg, -180));\n\tprivate final Icon MENU_ICON_HOVER_SELECTED \u003d new ImageIcon(expandedImg);\n\n\n\tpublic FilterButtonPanel(TasksTrackerPlugin plugin, String label)\n\t{\n\t\tthis.plugin \u003d plugin;\n\n\t\tthis.label \u003d label;\n\t}\n\n\tprotected abstract LinkedHashMap\u003cString, BufferedImage\u003e getIconImages();\n\n\tprotected abstract JPanel makeButtonPanel();\n\n\tprotected FilterButton makeButton(String key, String tooltip, BufferedImage image)\n\t{\n\t\treturn new FilterButton(key, tooltip, image, this);\n\t}\n\n\tprotected JPanel allOrNoneButtons()\n\t{\n\t\tJPanel buttonWrapper \u003d new JPanel();\n\t\tbuttonWrapper.setLayout(new BoxLayout(buttonWrapper, BoxLayout.X_AXIS));\n\t\tbuttonWrapper.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tbuttonWrapper.setAlignmentX(JPanel.CENTER_ALIGNMENT);\n\n\t\tJButton all \u003d new JButton(\"all\");\n\t\tSwingUtil.removeButtonDecorations(all);\n\t\tall.setFocusable(false);\n\t\tall.setForeground(ColorScheme.MEDIUM_GRAY_COLOR);\n\t\tall.setFont(FontManager.getRunescapeSmallFont());\n\t\tall.setPreferredSize(new Dimension(50, 0));\n\t\tall.addActionListener(e -\u003e {\n\t\t\tsetAllSelected(true);\n\t\t\tupdateFilterText();\n\t\t\tupdateCollapseButtonText();\n\t\t\tplugin.refreshAllTasks();\n\t\t});\n\n\t\tJButton none \u003d new JButton(\"none\");\n\t\tSwingUtil.removeButtonDecorations(none);\n\t\tnone.setFocusable(false);\n\t\tnone.setForeground(ColorScheme.MEDIUM_GRAY_COLOR);\n\t\tnone.setFont(FontManager.getRunescapeSmallFont());\n\t\tnone.setPreferredSize(new Dimension(50, 0));\n\t\tnone.addActionListener(e -\u003e {\n\t\t\tsetAllSelected(false);\n\t\t\tupdateFilterText();\n\t\t\tupdateCollapseButtonText();\n\t\t\tplugin.refreshAllTasks();\n\t\t});\n\n\t\tJLabel separator \u003d new JLabel(\"|\");\n\t\tseparator.setForeground(ColorScheme.MEDIUM_GRAY_COLOR);\n\n\t\tbuttonWrapper.add(Box.createHorizontalGlue());\n\t\tbuttonWrapper.add(all);\n\t\tbuttonWrapper.add(Box.createHorizontalGlue());\n\t\tbuttonWrapper.add(separator);\n\t\tbuttonWrapper.add(Box.createHorizontalGlue());\n\t\tbuttonWrapper.add(none);\n\t\tbuttonWrapper.add(Box.createHorizontalGlue());\n\n\t\treturn buttonWrapper;\n\t}\n\n\tpublic JToggleButton makeCollapseButton()\n\t{\n\t\tJToggleButton collapseBtn \u003d new JToggleButton();\n\n\t\t// collapse button\n\t\tSwingUtil.removeButtonDecorations(collapseBtn);\n\t\tcollapseBtn.setIcon(MENU_COLLAPSED_ICON);\n\t\tcollapseBtn.setSelectedIcon(MENU_EXPANDED_ICON);\n\t\tcollapseBtn.setRolloverIcon(MENU_ICON_HOVER);\n\t\tcollapseBtn.setRolloverSelectedIcon(MENU_ICON_HOVER_SELECTED);\n\t\tSwingUtil.addModalTooltip(collapseBtn, \"Collapse filters\", \"Expand filters\");\n\t\tcollapseBtn.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tcollapseBtn.setAlignmentX(LEFT_ALIGNMENT);\n\t\tcollapseBtn.setUI(new BasicButtonUI()); // substance breaks the layout\n\t\tcollapseBtn.addActionListener(ev -\u003e buttonPanel.setVisible(!buttonPanel.isVisible()));\n\t\tcollapseBtn.setHorizontalTextPosition(JButton.CENTER);\n\t\tcollapseBtn.setForeground(ColorScheme.LIGHT_GRAY_COLOR);\n\t\tcollapseBtn.setFont(FontManager.getRunescapeSmallFont());\n\t\tcollapseBtn.setBorder(new EmptyBorder(2, 0, 2, 0));\n\t\tcollapseBtn.setFocusable(false);\n\t\tcollapseBtn.setSelected(true);\n\n\t\treturn collapseBtn;\n\t}\n\n\tprotected void updateFilterText()\n\t{\n\t\tString filterText \u003d buttons.entrySet().stream()\n\t\t\t.filter(e -\u003e e.getValue().isSelected())\n\t\t\t.map(e -\u003e \"f-\" + e.getKey() + \"-f\") // prefix included to cover cases where one key name is contained in another (e.g. \"Master\" -\u003e \"Grandmaster\")\n\t\t\t.collect(Collectors.joining(\",\"));\n\n\t\tplugin.getConfigManager().setConfiguration(TasksTrackerPlugin.CONFIG_GROUP_NAME, configKey, filterText);\n\t}\n\n\tprotected boolean getConfigButtonState(String buttonKey)\n\t{\n\t\tString configValue \u003d plugin.getConfigManager().getConfiguration(TasksTrackerPlugin.CONFIG_GROUP_NAME, configKey);\n\t\tboolean isEmptyFilterSelection \u003d configValue \u003d\u003d null || configValue.isEmpty() || configValue.equals(\"-1\");\n\t\tif (isEmptyFilterSelection)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\treturn configValue.contains(\"f-\" + buttonKey + \"-f\");\n\t}\n\n\tprotected void setAllSelected(boolean state)\n\t{\n\t\tbuttons.values().forEach(button -\u003e button.setSelected(state));\n\t}\n\n\tprotected void setOnlySelected(String selectedKey)\n\t{\n\t\tbuttons.forEach((key, button) -\u003e {\n\t\t\tbutton.setSelected(key.equals(selectedKey));\n\t\t});\n\t}\n\n\tprotected void setAllExceptSelected(String exceptKey)\n\t{\n\t\tbuttons.forEach((key, button) -\u003e {\n\t\t\tbutton.setSelected(!key.equals(exceptKey));\n\t\t});\n\t}\n\n\tprotected void updateCollapseButtonText()\n\t{\n\t\tcollapseBtn.setText(label + \" - \" + buttons.values().stream().filter(JToggleButton::isSelected).count() + \" / \" + buttons.size());\n\t}\n\n\tpublic void redraw()\n\t{\n\t\tif (SwingUtilities.isEventDispatchThread())\n\t\t{\n\t\t\tbuttons.clear();\n\t\t\tremoveAll();\n\n\t\t\tcollapseBtn \u003d makeCollapseButton();\n\t\t\tbuttonPanel \u003d makeButtonPanel();\n\n\t\t\tadd(collapseBtn, BorderLayout.NORTH);\n\t\t\tadd(buttonPanel, BorderLayout.CENTER);\n\t\t\tadd(allOrNoneButtons(), BorderLayout.SOUTH);\n\t\t\tupdateFilterText();\n\t\t\tupdateCollapseButtonText();\n\n\t\t\tcollapseBtn.setVisible(plugin.getConfig().filterPanelCollapsible());\n\n\t\t\tvalidate();\n\t\t\trepaint();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlog.error(\"Filter button panel redraw failed - not event dispatch thread.\");\n\t\t}\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/panel/filters/FilterButtonPanel.java"},{"fileName":"TaskPanel.java","content":"package net.reldo.taskstracker.panel;\n\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Desktop;\nimport java.awt.Dimension;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.awt.image.BufferedImage;\nimport java.io.IOException;\nimport java.net.URI;\nimport java.net.URISyntaxException;\nimport java.net.URL;\nimport java.net.URLEncoder;\nimport java.nio.charset.StandardCharsets;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\nimport java.util.List;\nimport javax.swing.BoxLayout;\nimport javax.swing.ImageIcon;\nimport javax.swing.JDialog;\nimport javax.swing.JLabel;\nimport javax.swing.JMenuItem;\nimport javax.swing.JOptionPane;\nimport javax.swing.JPanel;\nimport javax.swing.JPopupMenu;\nimport javax.swing.JToggleButton;\nimport javax.swing.JToolTip;\nimport javax.swing.ToolTipManager;\nimport javax.swing.border.EmptyBorder;\nimport lombok.extern.slf4j.Slf4j;\nimport net.reldo.taskstracker.HtmlUtil;\nimport net.reldo.taskstracker.TasksTrackerPlugin;\nimport net.reldo.taskstracker.data.jsondatastore.types.TaskDefinitionSkill;\nimport net.reldo.taskstracker.data.task.TaskFromStruct;\nimport net.reldo.taskstracker.data.task.filters.FilterMatcher;\nimport net.runelite.api.Constants;\nimport net.runelite.api.Skill;\nimport net.runelite.client.game.SkillIconManager;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.PluginPanel;\nimport net.runelite.client.util.SwingUtil;\n\n@Slf4j\npublic class TaskPanel extends JPanel\n{\n\tpublic final TaskFromStruct task;\n\n\tprivate final JLabel tierIcon \u003d new JLabel();\n\tprivate final JPanel container \u003d new JPanel(new BorderLayout());\n\tprivate final JPanel body \u003d new JPanel(new BorderLayout());\n\tprivate final JLabel name \u003d new JLabel(\"task\");\n\tprivate final JLabel description \u003d new JLabel(\"description\");\n\tprivate final JPanel buttons \u003d new JPanel();\n\tprivate final JToggleButton toggleTrack \u003d new JToggleButton();\n\tprivate final JToggleButton toggleIgnore \u003d new JToggleButton();\n\n\tprotected final FilterMatcher filterMatcher;\n\n\tprotected TasksTrackerPlugin plugin;\n\n\tpublic TaskPanel(TasksTrackerPlugin plugin, TaskFromStruct task, FilterMatcher filterMatcher)\n\t{\n\t\tsuper(new BorderLayout());\n\t\tthis.plugin \u003d plugin;\n\t\tthis.task \u003d task;\n\t\tthis.filterMatcher \u003d filterMatcher;\n\t\tcreatePanel();\n\t\tsetComponentPopupMenu(getPopupMenu());\n\t\tToolTipManager.sharedInstance().registerComponent(this);\n\n\t\trefresh();\n\t}\n\n\tpublic JPopupMenu getPopupMenu()\n\t{\n\t\treturn null;\n\t}\n\n\tpublic String getTaskTooltip()\n\t{\n\t\tStringBuilder tooltipText \u003d new StringBuilder();\n\t\ttooltipText.append(HtmlUtil.wrapWithBold(task.getName())).append(HtmlUtil.HTML_LINE_BREAK);\n\t\ttooltipText.append(task.getDescription()).append(HtmlUtil.HTML_LINE_BREAK);\n\n\t\tString skillSection \u003d getSkillSectionHtml();\n\t\tif (skillSection !\u003d null)\n\t\t{\n\t\t\ttooltipText.append(skillSection).append(HtmlUtil.HTML_LINE_BREAK);\n\t\t}\n\n\t\tString wikiNotes \u003d task.getTaskDefinition().getWikiNotes();\n\t\tif (wikiNotes !\u003d null \u0026\u0026 !wikiNotes.isEmpty())\n\t\t{\n\t\t\ttooltipText.append(HtmlUtil.HTML_LINE_BREAK).append(wikiNotes).append(HtmlUtil.HTML_LINE_BREAK);\n\t\t}\n\n\t\tif (task.isCompleted())\n\t\t{\n\t\t\ttooltipText.append(HtmlUtil.HTML_LINE_BREAK);\n\t\t\tString datePattern \u003d \"MM-dd-yyyy hh:mma\";\n\t\t\tSimpleDateFormat simpleDateFormat \u003d new SimpleDateFormat(datePattern);\n\t\t\ttooltipText.append(\" \").append(simpleDateFormat.format(new Date(task.getCompletedOn())));\n\t\t}\n\n\t\tFloat completionPercent \u003d task.getTaskDefinition().getCompletionPercent();\n\t\tif (completionPercent !\u003d null)\n\t\t{\n\t\t\ttooltipText.append(HtmlUtil.HTML_LINE_BREAK).append(\"Players Completed: \").append(completionPercent).append(\u0027%\u0027);\n\t\t}\n\n\t\tString userNotes \u003d task.getNote();\n\t\tif (userNotes !\u003d null \u0026\u0026 !userNotes.isEmpty())\n\t\t{\n\t\t\ttooltipText.append(HtmlUtil.HTML_LINE_BREAK).append(HtmlUtil.HTML_LINE_BREAK);\n\t\t\ttooltipText.append(HtmlUtil.wrapWithItalics(userNotes)).append(HtmlUtil.HTML_LINE_BREAK);\n\t\t}\n\n\t\treturn HtmlUtil.wrapWithHtml(\n\t\t\tHtmlUtil.wrapWithWrappingParagraph(tooltipText.toString(), 200)\n\t\t);\n\t}\n\n\tpublic Color getTaskBackgroundColor()\n\t{\n\t\tif (plugin.playerSkills \u003d\u003d null)\n\t\t{\n\t\t\treturn ColorScheme.DARKER_GRAY_COLOR;\n\t\t}\n\n\t\tif (task.isCompleted())\n\t\t{\n\t\t\treturn Colors.COMPLETED_BACKGROUND_COLOR;\n\t\t}\n\n\t\tif (task.getTaskDefinition().getSkills() \u003d\u003d null || task.getTaskDefinition().getSkills().size() \u003d\u003d 0)\n\t\t{\n\t\t\treturn ColorScheme.DARKER_GRAY_COLOR;\n\t\t}\n\n\t\tfor (TaskDefinitionSkill requiredSkill : task.getTaskDefinition().getSkills())\n\t\t{\n\t\t\tSkill skill;\n\t\t\tString requiredSkillName \u003d requiredSkill.getSkill().toUpperCase();\n\t\t\ttry\n\t\t\t{\n\t\t\t\tskill \u003d Skill.valueOf(requiredSkillName);\n\t\t\t}\n\t\t\tcatch (IllegalArgumentException ex)\n\t\t\t{\n\t\t\t\tlog.error(\"invalid skill name \" + requiredSkillName);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (plugin.playerSkills[skill.ordinal()] \u003c requiredSkill.getLevel())\n\t\t\t{\n\t\t\t\treturn Colors.UNQUALIFIED_BACKGROUND_COLOR;\n\t\t\t}\n\t\t}\n\n\t\treturn ColorScheme.DARKER_GRAY_COLOR;\n\t}\n\n\tpublic void createPanel()\n\t{\n\t\tsetLayout(new BorderLayout());\n\t\tsetBorder(new EmptyBorder(0, 0, 7, 0));\n\n\t\tcontainer.setBorder(new EmptyBorder(7, 7, 6, 0));\n\n\t\t// Body\n\n\t\tname.setFont(FontManager.getRunescapeSmallFont());\n\t\tname.setForeground(Color.WHITE);\n\t\tbody.add(name, BorderLayout.NORTH);\n\n\t\tdescription.setFont(FontManager.getRunescapeSmallFont());\n\t\tdescription.setForeground(Color.GRAY);\n\t\tbody.add(description, BorderLayout.CENTER);\n\n\t\t// Buttons\n\t\tbuttons.setLayout(new BoxLayout(buttons, BoxLayout.Y_AXIS));\n\t\tbuttons.setBorder(new EmptyBorder(0, 0, 0, 7));\n\n\t\ttoggleTrack.setPreferredSize(new Dimension(8, 8));\n\t\ttoggleTrack.setIcon(Icons.PLUS_ICON);\n\t\ttoggleTrack.setSelectedIcon(Icons.MINUS_ICON);\n\t\ttoggleTrack.setBorder(new EmptyBorder(5, 0, 5, 0));\n\t\ttoggleTrack.addActionListener(e -\u003e {\n\t\t\ttask.setTracked(toggleTrack.isSelected());\n\t\t\tplugin.pluginPanel.taskListPanel.refreshTask(task);\n\t\t\tplugin.saveCurrentTaskTypeData();\n\t\t});\n\t\tSwingUtil.removeButtonDecorations(toggleTrack);\n\n\t\ttoggleIgnore.setPreferredSize(new Dimension(8, 8));\n\t\ttoggleIgnore.setIcon(Icons.EYE_CROSS_GREY);\n\t\ttoggleIgnore.setSelectedIcon(Icons.EYE_ICON);\n\t\tSwingUtil.addModalTooltip(toggleIgnore, \"Unignore\", \"Ignore\");\n\t\ttoggleIgnore.setBorder(new EmptyBorder(5, 0, 5, 0));\n\t\ttoggleIgnore.addActionListener(e -\u003e {\n\t\t\ttask.setIgnored(!task.isIgnored());\n\t\t\tplugin.pluginPanel.taskListPanel.refreshTask(task);\n\t\t\tplugin.saveCurrentTaskTypeData();\n\t\t});\n\t\tSwingUtil.removeButtonDecorations(toggleIgnore);\n\n\t\tbuttons.add(toggleTrack);\n\t\tbuttons.add(toggleIgnore);\n\n\t\t// Full\n\t\tcontainer.add(tierIcon, BorderLayout.WEST);\n\t\tcontainer.add(body, BorderLayout.CENTER);\n\t\tcontainer.add(buttons, BorderLayout.EAST);\n\n\t\tBufferedImage tierSprite \u003d task.getTaskType().getTierSprites().get(task.getTier());\n\t\tif (tierSprite !\u003d null)\n\t\t{\n\t\t\ttierIcon.setMinimumSize(new Dimension(Constants.ITEM_SPRITE_WIDTH, Constants.ITEM_SPRITE_HEIGHT));\n\t\t\ttierIcon.setIcon(new ImageIcon(tierSprite));\n\t\t\ttierIcon.setBorder(new EmptyBorder(0, 0, 0, 5));\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttierIcon.setBorder(new EmptyBorder(0, 0, 0, 0));\n\t\t}\n\n\t\tadd(container, BorderLayout.NORTH);\n\n\t\taddMouseListener(new MouseAdapter()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void mouseReleased(MouseEvent e)\n\t\t\t{\n\t\t\t\tif (e.isPopupTrigger())\n\t\t\t\t{\n\t\t\t\t\tJPopupMenu menu \u003d createTaskPopupMenu();\n\t\t\t\t\tmenu.show(e.getComponent(), e.getX(), e.getY());\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic JPopupMenu createTaskPopupMenu()\n\t{\n\t\tJPopupMenu popupMenu \u003d new JPopupMenu();\n\t\tJMenuItem editNoteItem \u003d new JMenuItem(\"Edit Note\");\n\t\teditNoteItem.addActionListener(e -\u003e editTaskNote());\n\t\tpopupMenu.add(editNoteItem);\n\t\tJMenuItem openWikiItem \u003d new JMenuItem(\"Wiki\");\n\t\topenWikiItem.addActionListener(e -\u003e openRuneScapeWiki());\n\t\tpopupMenu.add(openWikiItem);\n\t\treturn popupMenu;\n\t}\n\n\tprivate void editTaskNote()\n\t{\n\t\tJOptionPane optionPane \u003d new JOptionPane(\"Enter the notes to associate with this task (empty removes note):\", JOptionPane.INFORMATION_MESSAGE);\n\t\toptionPane.setInitialSelectionValue(task.getNote());\n\t\toptionPane.setWantsInput(true);\n\t\tJDialog inputDialog \u003d optionPane.createDialog(this, \"Set tasks note\");\n\t\tinputDialog.setAlwaysOnTop(true);\n\t\tinputDialog.setVisible(true);\n\t\tObject inputValue \u003d optionPane.getInputValue();\n\t\tif (inputValue !\u003d JOptionPane.UNINITIALIZED_VALUE)\n\t\t{\n\t\t\tString note \u003d inputValue.toString();\n\t\t\ttask.setNote(note.isEmpty() ? null : note);\n\t\t\tplugin.saveCurrentTaskTypeData();\n\t\t}\n\t}\n\n\tprivate void openRuneScapeWiki()\n\t{\n\t\tString wikiUrl \u003d String.format(\"https://oldschool.runescape.wiki/%s\", URLEncoder.encode(task.getName().replace(\u0027 \u0027, \u0027_\u0027), StandardCharsets.UTF_8));\n\t\tif (Desktop.isDesktopSupported())\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tDesktop.getDesktop().browse(new URI(wikiUrl));\n\t\t\t}\n\t\t\tcatch (IOException | URISyntaxException ex)\n\t\t\t{\n\t\t\t\tex.printStackTrace();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlog.warn(\"Desktop browsing is not supported on this system.\");\n\t\t}\n\t}\n\n\tpublic void refresh()\n\t{\n\t\tsetBackgroundColor(getTaskBackgroundColor());\n\t\tname.setText(HtmlUtil.wrapWithHtml(task.getName()));\n\t\tdescription.setText(HtmlUtil.wrapWithHtml(task.getDescription()));\n\n\t\t// If completed tasks are auto-untracked, don\u0027t allow users to add them to tracked tasks, that\u0027s silly.\n\t\tboolean disableTrack \u003d plugin.getConfig().untrackUponCompletion() \u0026\u0026 task.isCompleted();\n\t\ttoggleTrack.setEnabled(!disableTrack);\n\n\t\t// Tell the user why it\u0027s greyed out\n\t\tif (disableTrack)\n\t\t{\n\t\t\ttoggleTrack.setToolTipText(\"Completed tasks cannot be tracked while \u0027Untrack Tasks Upon Completion\u0027 is enabled.\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttoggleTrack.setToolTipText(null);\n\t\t}\n\n\t\ttoggleTrack.setSelected(task.isTracked());\n\t\ttoggleIgnore.setSelected(task.isIgnored());\n\n\t\tsetVisible(meetsFilterCriteria());\n\n\t\trevalidate();\n\t}\n\n\tprotected boolean meetsFilterCriteria()\n\t{\n\t\treturn filterMatcher.meetsFilterCriteria(task, plugin.taskTextFilter);\n\t}\n\n\tprivate void setBackgroundColor(Color color)\n\t{\n\t\tcontainer.setBackground(color);\n\t\tbody.setBackground(color);\n\t\tbuttons.setBackground(color);\n\t}\n\n\t@Override\n\tpublic Dimension getMaximumSize()\n\t{\n\t\treturn new Dimension(PluginPanel.PANEL_WIDTH, getPreferredSize().height);\n\t}\n\n\t@Override\n\tpublic JToolTip createToolTip()\n\t{\n\t\tJToolTip customTooltip \u003d new JToolTip();\n\t\tcustomTooltip.setFont(FontManager.getRunescapeSmallFont());\n\t\treturn customTooltip;\n\t}\n\n\t@Override\n\tpublic String getToolTipText(MouseEvent mouseEvent)\n\t{\n\t\treturn getTaskTooltip();\n\t}\n\n\tprivate String getSkillSectionHtml()\n\t{\n\t\tList\u003cTaskDefinitionSkill\u003e requiredSkills \u003d task.getTaskDefinition().getSkills();\n\t\tif (requiredSkills \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\tStringBuilder skillSection \u003d new StringBuilder();\n\t\tskillSection.append(HtmlUtil.HTML_LINE_BREAK);\n\t\tfor (TaskDefinitionSkill requiredSkill : requiredSkills)\n\t\t{\n\t\t\tSkill skill;\n\t\t\ttry\n\t\t\t{\n\t\t\t\tskill \u003d Skill.valueOf(requiredSkill.getSkill().toUpperCase());\n\t\t\t}\n\t\t\tcatch (IllegalArgumentException ex)\n\t\t\t{\n\t\t\t\tlog.warn(\"unknown skill: {}\", requiredSkill.getSkill().toUpperCase(), ex);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\n\t\t\tInteger requiredLevel \u003d requiredSkill.getLevel();\n\t\t\tint playerLevel \u003d -1;\n\t\t\tif (requiredLevel \u003d\u003d null)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (plugin.playerSkills !\u003d null)\n\t\t\t{\n\t\t\t\tplayerLevel \u003d plugin.playerSkills[skill.ordinal()];\n\t\t\t}\n\t\t\tString skillMessage \u003d getSkillRequirementHtml(requiredSkill.getSkill().toLowerCase(), playerLevel, requiredLevel);\n\t\t\tskillSection.append(skillMessage).append(\" \");\n\t\t}\n\n\t\treturn skillSection.toString();\n\t}\n\n\tprivate String getSkillRequirementHtml(String skillName, Integer playerLevel, int requiredLevel)\n\t{\n\t\tString skillIconPath \u003d \"/skill_icons_small/\" + skillName + \".png\";\n\t\tURL url \u003d SkillIconManager.class.getResource(skillIconPath);\n\t\tColor color \u003d playerLevel \u003e\u003d requiredLevel ? Colors.QUALIFIED_TEXT_COLOR : Colors.UNQUALIFIED_TEXT_COLOR;\n\t\treturn HtmlUtil.imageTag(url) + \" \" + HtmlUtil.colorTag(color, playerLevel + \"/\" + requiredLevel);\n\t}\n\n\tprivate String getPointsTooltipText()\n\t{\n\t\tint points \u003d this.task.getPoints();\n\t\tif (points \u003d\u003d 0)\n\t\t{\n\t\t\treturn \"\";\n\t\t}\n\t\treturn \" - \" + points + \" points\";\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/panel/TaskPanel.java"},{"fileName":"SortPanel.java","content":"package net.reldo.taskstracker.panel;\n\nimport java.util.List;\nimport java.util.stream.Collectors;\nimport javax.swing.BoxLayout;\nimport javax.swing.Icon;\nimport javax.swing.JComboBox;\nimport javax.swing.SwingUtilities;\nimport lombok.extern.slf4j.Slf4j;\nimport net.reldo.taskstracker.TasksTrackerPlugin;\nimport net.reldo.taskstracker.config.ConfigValues;\nimport net.reldo.taskstracker.data.task.TaskService;\nimport net.reldo.taskstracker.panel.components.FixedWidthPanel;\nimport net.reldo.taskstracker.panel.components.MultiToggleButton;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.util.SwingUtil;\n\n@Slf4j\npublic class SortPanel extends FixedWidthPanel\n{\n\n\tprivate final TasksTrackerPlugin plugin;\n\tprivate final TaskService taskService;\n\tprivate final TaskListPanel taskListPanel;\n\tprivate final ConfigManager configManager;\n\tprivate JComboBox\u003cString\u003e sortDropdown;\n\tprivate MultiToggleButton directionButton;\n\n\tpublic SortPanel(TasksTrackerPlugin plugin, TaskService taskService, TaskListPanel taskListPanel)\n\t{\n\t\tthis.plugin \u003d plugin;\n\t\tthis.configManager \u003d plugin.getConfigManager();\n\t\tthis.taskService \u003d taskService;\n\t\tthis.taskListPanel \u003d taskListPanel;\n\n\t\tsetLayout(new BoxLayout(this, BoxLayout.X_AXIS));\n\t\tsetAlignmentX(LEFT_ALIGNMENT);\n\t}\n\n\tpublic void redraw()\n\t{\n\t\tremoveAll();\n\n\t\tList\u003cString\u003e criteriaList \u003d taskService.getSortedIndexes().keySet().stream()\n\t\t\t.sorted()\n\t\t\t.map((str) -\u003e str.substring(0, 1).toUpperCase() + str.substring(1))\n\t\t\t.collect(Collectors.toList());\n\t\tcriteriaList.add(0, \"Default\");\n\n\t\tString[] criteriaArray \u003d criteriaList.toArray(new String[0]);\n\t\tsortDropdown \u003d new JComboBox\u003c\u003e(criteriaArray);\n\t\tsortDropdown.setAlignmentX(LEFT_ALIGNMENT);\n\t\tsortDropdown.setSelectedIndex(0);\n\t\tsortDropdown.addActionListener(e -\u003e {\n\t\t\tupdateConfig();\n\t\t\tSwingUtilities.invokeLater(taskListPanel::redraw);\n\t\t});\n\t\tsortDropdown.setFocusable(false);\n\n\t\tdirectionButton \u003d new MultiToggleButton(2);\n\t\tSwingUtil.removeButtonDecorations(directionButton);\n\t\tdirectionButton.setIcons(new Icon[]{Icons.ASCENDING_ICON, Icons.DESCENDING_ICON});\n\t\tdirectionButton.setToolTips(new String[]{\"Ascending\", \"Descending\"});\n\t\tdirectionButton.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tdirectionButton.setStateChangedAction(e -\u003e {\n\t\t\tupdateConfig();\n\t\t\tSwingUtilities.invokeLater(taskListPanel::redraw);\n\t\t});\n\n\t\tadd(sortDropdown);\n\t\tadd(directionButton);\n\t\tupdateConfig();\n\t}\n\n\tprotected void updateConfig()\n\t{\n\t\tlog.debug(\"updateConfig {}, {}, {}\", TasksTrackerPlugin.CONFIG_GROUP_NAME, \"sortCriteria\", sortDropdown.getItemAt(sortDropdown.getSelectedIndex()).toLowerCase());\n\t\tconfigManager.setConfiguration(TasksTrackerPlugin.CONFIG_GROUP_NAME, \"sortCriteria\", sortDropdown.getItemAt(sortDropdown.getSelectedIndex()).toLowerCase());\n\n\t\tConfigValues.SortDirections configValue \u003d ConfigValues.SortDirections.values()[directionButton.getState()];\n\t\tlog.debug(\"updateConfig {}, {}, {}\", TasksTrackerPlugin.CONFIG_GROUP_NAME, \"sortDirection\", configValue);\n\t\tconfigManager.setConfiguration(TasksTrackerPlugin.CONFIG_GROUP_NAME, \"sortDirection\", configValue);\n\t}\n}\n","filePath":"src/main/java/net/reldo/taskstracker/panel/SortPanel.java"},{"fileName":"TaskPanelFactory.java","content":"package net.reldo.taskstracker.panel;\n\nimport net.reldo.taskstracker.data.task.TaskFromStruct;\n\npublic interface TaskPanelFactory\n{\n\tTaskPanel create(TaskFromStruct task);\n}\n","filePath":"src/main/java/net/reldo/taskstracker/panel/TaskPanelFactory.java"},{"fileName":"Icons.java","content":"package net.reldo.taskstracker.panel;\n\nimport java.awt.image.BufferedImage;\nimport javax.swing.Icon;\nimport javax.swing.ImageIcon;\nimport net.reldo.taskstracker.TasksTrackerPlugin;\nimport net.runelite.client.util.ImageUtil;\n\npublic class Icons\n{\n\tprivate static final String completeBtnPath \u003d \"panel/components/complete_button/\";\n\tpublic static final Icon INCOMPLETE_ONLY_ICON \u003d new ImageIcon(ImageUtil.loadImageResource(TasksTrackerPlugin.class, completeBtnPath + \"incomplete_only_icon.png\"));\n\tpublic static final Icon COMPLETE_ONLY_ICON \u003d new ImageIcon(ImageUtil.loadImageResource(TasksTrackerPlugin.class, completeBtnPath + \"complete_only_icon.png\"));\n\tpublic static final Icon COMPLETE_INCOMPLETE_ICON \u003d new ImageIcon(ImageUtil.loadImageResource(TasksTrackerPlugin.class, completeBtnPath + \"complete_and_incomplete_icon.png\"));\n\n\tprivate static final String ignoredBtnPath \u003d \"panel/components/ignored_button/\";\n\tpublic static final BufferedImage semivisibleimg \u003d ImageUtil.loadImageResource(TasksTrackerPlugin.class, ignoredBtnPath + \"semivisible_icon.png\");\n\tpublic static final Icon UNIGNORED_ONLY_ICON \u003d new ImageIcon(ImageUtil.alphaOffset(semivisibleimg, -180));\n\tpublic static final Icon IGNORED_ONLY_ICON \u003d new ImageIcon(ImageUtil.loadImageResource(TasksTrackerPlugin.class, ignoredBtnPath + \"invisible_icon.png\"));\n\tpublic static final Icon IGNORED_UNIGNORED_ICON \u003d new ImageIcon(ImageUtil.loadImageResource(TasksTrackerPlugin.class, ignoredBtnPath + \"visible_icon.png\"));\n\n\tprivate static final String trackedBtnPath \u003d \"panel/components/tracked_button/\";\n\tpublic static final Icon UNTRACKED_ONLY_ICON \u003d new ImageIcon(ImageUtil.loadImageResource(TasksTrackerPlugin.class, trackedBtnPath + \"untracked_icon.png\"));\n\tpublic static final Icon TRACKED_ONLY_ICON \u003d new ImageIcon(ImageUtil.loadImageResource(TasksTrackerPlugin.class, trackedBtnPath + \"tracked_icon.png\"));\n\tpublic static final Icon TRACKED_UNTRACKED_ICON \u003d new ImageIcon(ImageUtil.loadImageResource(TasksTrackerPlugin.class, trackedBtnPath + \"tracked_and_untracked_icon.png\"));\n\n\tprivate static final String sortBtnPath \u003d \"panel/components/sort_button/\";\n\tpublic static final Icon ASCENDING_ICON \u003d new ImageIcon(ImageUtil.loadImageResource(TasksTrackerPlugin.class, sortBtnPath + \"ascending_icon.png\"));\n\tpublic static final Icon DESCENDING_ICON \u003d new ImageIcon(ImageUtil.loadImageResource(TasksTrackerPlugin.class, sortBtnPath + \"descending_icon.png\"));\n\n\tprivate static final String expandBtnPath \u003d \"panel/components/\";\n\tpublic static final Icon MENU_EXPANDED_ICON \u003d new ImageIcon(ImageUtil.loadImageResource(TasksTrackerPlugin.class, expandBtnPath + \"filter_menu_expanded.png\"));\n\tpublic static final BufferedImage collapseImg \u003d ImageUtil.loadImageResource(TasksTrackerPlugin.class, expandBtnPath + \"filter_menu_collapsed.png\");\n\tpublic static final Icon MENU_ICON_HOVER \u003d new ImageIcon(collapseImg);\n\n\tpublic static final Icon MENU_COLLAPSED_ICON \u003d new ImageIcon(ImageUtil.alphaOffset(collapseImg, -180));\n\tpublic static final ImageIcon PLUS_ICON \u003d new ImageIcon(ImageUtil.loadImageResource(TasksTrackerPlugin.class, \"plus.png\"));\n\tpublic static final ImageIcon MINUS_ICON \u003d new ImageIcon(ImageUtil.loadImageResource(TasksTrackerPlugin.class, \"minus.png\"));\n\tpublic static final ImageIcon EYE_ICON \u003d new ImageIcon(ImageUtil.loadImageResource(TasksTrackerPlugin.class, \"eye.png\"));\n\tpublic static final ImageIcon EYE_CROSS_GREY \u003d new ImageIcon(ImageUtil.loadImageResource(TasksTrackerPlugin.class, \"eye-cross-grey.png\"));\n}\n","filePath":"src/main/java/net/reldo/taskstracker/panel/Icons.java"},{"fileName":"TasksTrackerPluginTest.java","content":"package net.reldo.taskstracker;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class TasksTrackerPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(TasksTrackerPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src/test/java/net/reldo/taskstracker/TasksTrackerPluginTest.java"}]},{"commit":"aac166c60a9c485c04e2e3359c862feee0af08dd","repository":"https://github.com/evaan/ba-heal-codes.git","internalName":"ba-heal-codes","files":[{"fileName":"BAHealCodesConfig.java","content":"package dev.evaan;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"ba-heal-codes\")\npublic interface BAHealCodesConfig extends Config\n{\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"wave4\",\n\t\t\tname \u003d \"Wave 4\",\n\t\t\tdescription \u003d \"Configures which heal code to display in wave 4\",\n\t\t\tposition \u003d 0\n\t)\n\tdefault Waves.Wave4 wave4()\n\t{\n\t\treturn Waves.Wave4.REGULAR;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"wave4custom\",\n\t\t\tname \u003d \"Wave 4 Custom Text\",\n\t\t\tdescription \u003d \"Custom text to be displayed for wave 4 if custom is selected\",\n\t\t\tposition \u003d 1\n\t)\n\tdefault String wave4custom()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"wave5\",\n\t\t\tname \u003d \"Wave 5\",\n\t\t\tdescription \u003d \"Configures which heal code to display in wave 5\",\n\t\t\tposition \u003d 2\n\t)\n\tdefault Waves.Wave5 wave5()\n\t{\n\t\treturn Waves.Wave5.REGULAR;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"wave5custom\",\n\t\t\tname \u003d \"Wave 5 Custom Text\",\n\t\t\tdescription \u003d \"Custom text to be displayed for wave 5 if custom is selected\",\n\t\t\tposition \u003d 3\n\t)\n\tdefault String wave5custom()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"wave6\",\n\t\t\tname \u003d \"Wave 6\",\n\t\t\tdescription \u003d \"Configures which heal code to display in wave 6\",\n\t\t\tposition \u003d 4\n\t)\n\tdefault Waves.Wave6 wave6()\n\t{\n\t\treturn Waves.Wave6.REGULAR;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"wave6custom\",\n\t\t\tname \u003d \"Wave 6 Custom Text\",\n\t\t\tdescription \u003d \"Custom text to be displayed for wave 6 if custom is selected\",\n\t\t\tposition \u003d 5\n\t)\n\tdefault String wave6custom()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"wave7\",\n\t\t\tname \u003d \"Wave 7\",\n\t\t\tdescription \u003d \"Configures which heal code to display in wave 7\",\n\t\t\tposition \u003d 6\n\t)\n\tdefault Waves.Wave7 wave7()\n\t{\n\t\treturn Waves.Wave7.REGULAR;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"wave7custom\",\n\t\t\tname \u003d \"Wave 7 Custom Text\",\n\t\t\tdescription \u003d \"Custom text to be displayed for wave 7 if custom is selected\",\n\t\t\tposition \u003d 7\n\t)\n\tdefault String wave7custom()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"wave8\",\n\t\t\tname \u003d \"Wave 8\",\n\t\t\tdescription \u003d \"Configures which heal code to display in wave 8\",\n\t\t\tposition \u003d 8\n\t)\n\tdefault Waves.Wave8 wave8()\n\t{\n\t\treturn Waves.Wave8.REGULAR;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"wave8custom\",\n\t\t\tname \u003d \"Wave 8 Custom Text\",\n\t\t\tdescription \u003d \"Custom text to be displayed for wave 8 if custom is selected\",\n\t\t\tposition \u003d 9\n\t)\n\tdefault String wave8custom()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"wave9\",\n\t\t\tname \u003d \"Wave 9\",\n\t\t\tdescription \u003d \"Configures which heal code to display in wave 9\",\n\t\t\tposition \u003d 10\n\t)\n\tdefault Waves.Wave9 wave9()\n\t{\n\t\treturn Waves.Wave9.REGULAR;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"wave9custom\",\n\t\t\tname \u003d \"Wave 9 Custom Text\",\n\t\t\tdescription \u003d \"Custom text to be displayed for wave 9 if custom is selected\",\n\t\t\tposition \u003d 11\n\t)\n\tdefault String wave9custom()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"wave10\",\n\t\t\tname \u003d \"Wave 10\",\n\t\t\tdescription \u003d \"Configures which heal code to display in wave 10\",\n\t\t\tposition \u003d 12\n\t)\n\tdefault Waves.Wave10 wave10()\n\t{\n\t\treturn Waves.Wave10.REGULAR;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"wave10custom\",\n\t\t\tname \u003d \"Wave 10 Custom Text\",\n\t\t\tdescription \u003d \"Custom text to be displayed for wave 10 if custom is selected\",\n\t\t\tposition \u003d 13\n\t)\n\tdefault String wave10custom()\n\t{\n\t\treturn \"\";\n\t}\n}\n","filePath":"src\\main\\java\\dev\\evaan\\BAHealCodesConfig.java"},{"fileName":"BAHealCodesPlugin.java","content":"package dev.evaan;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport org.apache.commons.lang3.ArrayUtils;\n\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"BA Heal Codes\"\n)\npublic class BAHealCodesPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate HealCodeOverlay healCodeOverlay;\n\n\t@Override\n\tpublic void startUp() {\n\t\toverlayManager.add(healCodeOverlay);\n\t}\n\n\t@Override\n\tpublic void shutDown() {\n\t\toverlayManager.remove(healCodeOverlay);\n\t}\n\n\t@Provides\n\tBAHealCodesConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(BAHealCodesConfig.class);\n\t}\n\n\tprivate static final Pattern wavePattern \u003d Pattern.compile(\".*---- Wave: (10|[1-9]) ----.*\");\n\n\tpublic int wave \u003d 0;\n\tpublic boolean hasHealerHorn \u003d false;\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event) {\n\t\tif (wave !\u003d 0 \u0026\u0026 !ArrayUtils.contains(client.getTopLevelWorldView().getMapRegions(), 7509) \u0026\u0026 !ArrayUtils.contains(client.getTopLevelWorldView().getMapRegions(), 7508)) wave \u003d 0;\n\n\t\tfinal ItemContainer itemContainer \u003d client.getItemContainer(InventoryID.INVENTORY);\n\t\tif (itemContainer \u003d\u003d null) {\n\t\t\thasHealerHorn \u003d false;\n\t\t\treturn;\n\t\t}\n\n\t\tfor (Item item : itemContainer.getItems()) {\n\t\t\tfinal int id \u003d item.getId();\n\t\t\tif (id \u003e\u003d 10526 \u0026\u0026 id \u003c\u003d 10530) {\n\t\t\t\thasHealerHorn \u003d true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage event) {\n\t\tif (event.getType() !\u003d ChatMessageType.GAMEMESSAGE) return;\n\t\tfinal Matcher waveMatcher \u003d wavePattern.matcher(event.getMessage());\n\t\tif (waveMatcher.matches()) wave \u003d Integer.parseInt(waveMatcher.group(1));\n\t}\n}\n","filePath":"src\\main\\java\\dev\\evaan\\BAHealCodesPlugin.java"},{"fileName":"HealCodeOverlay.java","content":"package dev.evaan;\n\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.LineComponent;\nimport net.runelite.client.ui.overlay.components.TitleComponent;\n\nimport javax.inject.Inject;\nimport java.awt.*;\n\npublic class HealCodeOverlay extends OverlayPanel {\n    private final BAHealCodesPlugin plugin;\n    private final BAHealCodesConfig config;\n\n    @Inject\n    HealCodeOverlay(BAHealCodesPlugin plugin, BAHealCodesConfig config) {\n        setPosition(OverlayPosition.BOTTOM_LEFT);\n        this.config \u003d config;\n        this.plugin \u003d plugin;\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        panelComponent.getChildren().clear();\n        panelComponent.setPreferredSize(new Dimension(150,0));\n\n        if (!plugin.hasHealerHorn) return null;\n\n        switch (plugin.wave) {\n            case 4:\n                panelComponent.getChildren().add(TitleComponent.builder().text(\"Wave 4 - \" + config.wave4().getName()).color(ColorScheme.BRAND_ORANGE).build());\n                for (LineComponent line : config.wave4().getName().equals(\"Custom\") ? Waves.parseLines(config.wave4custom()) : config.wave4().getLines()) {\n                    panelComponent.getChildren().add(line);\n                }\n                break;\n            case 5:\n                panelComponent.getChildren().add(TitleComponent.builder().text(\"Wave 5 - \" + config.wave5().getName()).color(ColorScheme.BRAND_ORANGE).build());\n                for (LineComponent line : config.wave5().getName().equals(\"Custom\") ? Waves.parseLines(config.wave5custom()) : config.wave5().getLines()) {\n                    panelComponent.getChildren().add(line);\n                }\n                break;\n            case 6:\n                panelComponent.getChildren().add(TitleComponent.builder().text(\"Wave 6 - \" + config.wave6().getName()).color(ColorScheme.BRAND_ORANGE).build());\n                for (LineComponent line : config.wave6().getName().equals(\"Custom\") ? Waves.parseLines(config.wave6custom()) : config.wave6().getLines()) {\n                    panelComponent.getChildren().add(line);\n                }\n                break;\n            case 7:\n                panelComponent.getChildren().add(TitleComponent.builder().text(\"Wave 7 - \" + config.wave7().getName()).color(ColorScheme.BRAND_ORANGE).build());\n                for (LineComponent line : config.wave7().getName().equals(\"Custom\") ? Waves.parseLines(config.wave7custom()) : config.wave7().getLines()) {\n                    panelComponent.getChildren().add(line);\n                }\n                break;\n            case 8:\n                panelComponent.getChildren().add(TitleComponent.builder().text(\"Wave 8 - \" + config.wave8().getName()).color(ColorScheme.BRAND_ORANGE).build());\n                for (LineComponent line : config.wave8().getName().equals(\"Custom\") ? Waves.parseLines(config.wave8custom()) : config.wave8().getLines()) {\n                    panelComponent.getChildren().add(line);\n                }\n                break;\n            case 9:\n                panelComponent.getChildren().add(TitleComponent.builder().text(\"Wave 9 - \" + config.wave9().getName()).color(ColorScheme.BRAND_ORANGE).build());\n                for (LineComponent line : config.wave9().getName().equals(\"Custom\") ? Waves.parseLines(config.wave9custom()) : config.wave9().getLines()) {\n                    panelComponent.getChildren().add(line);\n                }\n                break;\n            case 10:\n                panelComponent.getChildren().add(TitleComponent.builder().text(\"Wave 10 - \" + config.wave10().getName()).color(ColorScheme.BRAND_ORANGE).build());\n                for (LineComponent line : config.wave10().getName().equals(\"Custom\") ? Waves.parseLines(config.wave10custom()) : config.wave10().getLines()) {\n                    panelComponent.getChildren().add(line);\n                }\n                break;\n            default:\n                return null;\n        }\n\n        return panelComponent.render(graphics);\n    }\n}\n","filePath":"src\\main\\java\\dev\\evaan\\HealCodeOverlay.java"},{"fileName":"Waves.java","content":"package dev.evaan;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport net.runelite.client.ui.overlay.components.LineComponent;\n\npublic interface Waves {\n    static LineComponent[] parseLines(String input) {\n        return input.lines()\n                .map(line -\u003e LineComponent.builder().left(line).build())\n                .toArray(LineComponent[]::new);\n    }\n\n    @Getter\n    @RequiredArgsConstructor\n    enum Wave4 {\n        REGULAR(\"Regular\", parseLines(\"2-4-2(27) //\\n0-0-0-8\")),\n        ONEXOS(\"1x OS\", parseLines(\"2-5-4 //\\n0-0-0-7\")),\n        CUSTOM(\"Custom\", null);\n\n        private final String name;\n        private final LineComponent[] lines;\n\n        @Override\n        public String toString() {\n            return name;\n        }\n    }\n\n    @Getter\n    @RequiredArgsConstructor\n    enum Wave5 {\n        REGULAR(\"Regular\", parseLines(\"1-3(18)-2-2(27) //\\n0-0-0-0-8\")),\n        ONEXOS(\"1x OS\", parseLines(\"2-5-2(21)-3(30) //\\n0-0-0-0-7\")),\n        CFIVE(\"C5\", parseLines(\"Alch horn, 6x os\\n3(22)[43]-7-4(21)-6-8\\nIf 12s not on Coll:\\n8-2(21)-4(21)-6-8\")),\n        CUSTOM(\"Custom\", null);\n\n        private final String name;\n        private final LineComponent[] lines;\n\n        @Override\n        public String toString() {\n            return name;\n        }\n    }\n\n    @Getter\n    @RequiredArgsConstructor\n    enum Wave6 {\n        REGULAR(\"Regular\", parseLines(\"2/3(18)-4(24)-1-1 //\\nRestock 3x os + 1x reg\\n0-0-1-1-X-X\")),\n        ONEXOS(\"1x OS\", parseLines(\"3(18)-5-2(21)-2 //\\nRestock 3x + 1x reg\\n0-0-0-1-9-11\\n\")),\n        TWOXOS(\"2x OS\", parseLines(\"3(18)-5-3-4 //\\nRestock 3x os + 1x reg\\n0-0-10-12\\n\")),\n        CUSTOM(\"Custom\", null);\n\n        private final String name;\n        private final LineComponent[] lines;\n\n        @Override\n        public String toString() {\n            return name;\n        }\n    }\n\n    @Getter\n    @RequiredArgsConstructor\n    enum Wave7 {\n        REGULAR(\"Regular\", parseLines(\"2-5(27)-1-1 //\\n1(33)-0-1(33)-1-4-1\\nRestock 13/13 or 1x os //\\n1-3-7\")),\n        TWOXOS(\"2x OS\", parseLines(\"2(27)-6-6-1 //\\nRestock 4x os\\n0-0-0-1(39)-2-9-11\")),\n        CUSTOM(\"Custom\", null);\n\n        private final String name;\n        private final LineComponent[] lines;\n\n        @Override\n        public String toString() {\n            return name;\n        }\n    }\n\n    @Getter\n    @RequiredArgsConstructor\n    enum Wave8 {\n        REGULAR(\"Regular\", parseLines(\"2-4(21)-1/2(27)-1 //\\n1-1[42]-1/0-1-3(42)-1/2 //\\nRestock\\n0-0-0-0-6/5-X\")),\n        ONEXOS(\"1x OS\", parseLines(\"1-9-1-1 //\\n2-0-1-1(36)-2-1\\nRestock 13/13 or 1-2x os //\\n0-0-3-10\")),\n        TWOXOS(\"2x OS\", parseLines(\"4(24)-9-1-1 //\\n0-0-1-2(39)-1-1\\nRestock 4x os + 1x reg\\n0-0-3(51)-5(51)[57]-X\")),\n        CUSTOM(\"Custom\", null);\n\n        private final String name;\n        private final LineComponent[] lines;\n\n        @Override\n        public String toString() {\n            return name;\n        }\n    }\n\n    @Getter\n    @RequiredArgsConstructor\n    enum Wave9 {\n        REGULAR(\"Regular\", parseLines(\"2(18)-4/5(18)-1-1 //\\n1[54]-2/3-1(33)-1(42)-1-1-1 //\\nRestock\\n0-0-0-0-1[69]-2[69]-5[75]-X\")),\n        ONEXOS(\"1x OS\", parseLines(\"2-8(21)-1-1 //\\n1-0-1(33)-1(45)-2(45)-1-1 //\\nRestock 4x os\\n0-0-3-5-X\")),\n        BNINE(\"B9 (1x OS)\", parseLines(\"9(27)-1-1-1 //\\n0-1-1(42)-2[45](45)-1-1-1\\nRestock 4x\\n0-0-5-6-7[42]\")),\n        CUSTOM(\"Custom\", null);\n\n        private final String name;\n        private final LineComponent[] lines;\n\n        @Override\n        public String toString() {\n            return name;\n        }\n    }\n\n    @Getter\n    @RequiredArgsConstructor\n    enum Wave10 {\n        REGULAR(\"Regular\", parseLines(\"2-4/5(27)-1-1 //\\n1(33)-1/0-1(33)-1-4(51)-1\\nRestock 13/13 or 2x os //\\n1-3-7\")),\n        TWOXOS(\"2x OS\", parseLines(\"3(25)-5(27)-6-1 //\\n0-0-0-2 \\nRestock 5x os\\n0-8-8-10\")),\n        CUSTOM(\"Custom\", null);\n\n        private final String name;\n        private final LineComponent[] lines;\n\n        @Override\n        public String toString() {\n            return name;\n        }\n    }\n}\n","filePath":"src\\main\\java\\dev\\evaan\\Waves.java"},{"fileName":"BAHealCodesPluginTest.java","content":"package dev.evaan;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class BAHealCodesPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(BAHealCodesPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\dev\\evaan\\BAHealCodesPluginTest.java"}]},{"commit":"f33aa03f84e095c6a0dfbe6180c9c24116f9196e","repository":"https://github.com/EIKOOT/nyloer.git","internalName":"nyloer","files":[{"fileName":"CustomFontConfig.java","content":"package com.nyloer;\n\nimport java.util.HashMap;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.client.util.Text;\n\nimport java.awt.Color;\n\n\n@Slf4j\npublic class CustomFontConfig\n{\n\tprivate static final CustomFontConfig INSTANCE \u003d new CustomFontConfig();\n\t@Getter\n\tprivate final HashMap\u003cString, Color\u003e colorSettings \u003d new HashMap\u003c\u003e();\n\n\tpublic Color getColor(String fontConfigKey)\n\t{\n\t\treturn colorSettings.get(fontConfigKey);\n\t}\n\n\tpublic void parse(NyloerConfig config)\n\t{\n\t\tString input \u003d config.customFontConfig();\n\t\tif (input \u003d\u003d null || input.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tfor (String entry : Text.fromCSV(input))\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tString[] parts \u003d entry.split(\":\");\n\t\t\t\tcolorSettings.put(\n\t\t\t\t\tInteger.parseInt(parts[0].trim()) + \"-\" + parts[1].trim(),\n\t\t\t\t\tColor.decode(parts[2].trim())\n\t\t\t\t);\n\t\t\t}\n\t\t\tcatch (Exception e)\n\t\t\t{\n\t\t\t\tlog.debug(\"Parse exception: \\\"\" + entry + \"\\\"\\n\" + e.getMessage());\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic static CustomFontConfig getInstance()\n\t{\n\t\treturn INSTANCE;\n\t}\n}","filePath":"src\\main\\java\\com\\nyloer\\CustomFontConfig.java"},{"fileName":"NyloerConfig.java","content":"package com.nyloer;\n\nimport java.awt.Color;\nimport net.runelite.client.config.Alpha;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\nimport net.runelite.client.config.Keybind;\n\n\n@ConfigGroup(NyloerConfig.GROUP)\npublic interface NyloerConfig extends Config\n{\n\tString GROUP \u003d \"nyloer\";\n\n\t@ConfigSection(\n\t\tname \u003d \"General Settings\",\n\t\tposition \u003d 0,\n\t\tdescription \u003d \"General settings\",\n\t\tclosedByDefault \u003d false\n\t)\n\tString generalSettings \u003d \"generalSettings\";\n\n\t@ConfigItem(\n\t\tposition \u003d 0,\n\t\tkeyName \u003d \"showNylocasSymbol\",\n\t\tname \u003d \"Show Nylocas Symbol\",\n\t\tdescription \u003d \"Displays selected symbol instead of wave.\",\n\t\tsection \u003d generalSettings\n\t)\n\tdefault boolean showNylocasSymbol()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 1,\n\t\tkeyName \u003d \"meleeNylocasSymbol\",\n\t\tname \u003d \"Melee Symbol\",\n\t\tdescription \u003d \"Symbol of melee nylocas.\",\n\t\tsection \u003d generalSettings\n\t)\n\tdefault String meleeNylocasSymbol()\n\t{\n\t\treturn \"I\";\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 2,\n\t\tkeyName \u003d \"rangeNylocasSymbol\",\n\t\tname \u003d \"Range Symbol\",\n\t\tdescription \u003d \"Symbol of range nylocas.\",\n\t\tsection \u003d generalSettings\n\t)\n\tdefault String rangeNylocasSymbol()\n\t{\n\t\treturn \"T\";\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 3,\n\t\tkeyName \u003d \"mageNylocasSymbol\",\n\t\tname \u003d \"Mage Symbol\",\n\t\tdescription \u003d \"Symbol of mage nylocas.\",\n\t\tsection \u003d generalSettings\n\t)\n\tdefault String mageNylocasSymbol()\n\t{\n\t\treturn \"H\";\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 4,\n\t\tkeyName \u003d \"showNylocasWave\",\n\t\tname \u003d \"Show Nylocas Wave\",\n\t\tdescription \u003d \"Display wave on nylocas. \\\"Show nylocas symbol\\\" must be disabled.\",\n\t\tsection \u003d generalSettings\n\t)\n\tdefault boolean showNylocasWave()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 5,\n\t\tkeyName \u003d \"wavePrefix\",\n\t\tname \u003d \"Wave Spawn Prefix\",\n\t\tdescription \u003d \"Prefix for spawned nylocas from waves.\",\n\t\tsection \u003d generalSettings\n\t)\n\tdefault String wavePrefix()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 6,\n\t\tkeyName \u003d \"splitPrefix\",\n\t\tname \u003d \"Split Spawn Prefix\",\n\t\tdescription \u003d \"Prefix for spawned nylocas from splits.\",\n\t\tsection \u003d generalSettings\n\t)\n\tdefault String splitPrefix()\n\t{\n\t\treturn \"s\";\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 7,\n\t\tkeyName \u003d \"tileHighlightWidth\",\n\t\tname \u003d \"Tile Highlight Width\",\n\t\tdescription \u003d \"Tile highlight width\",\n\t\tsection \u003d generalSettings\n\t)\n\tdefault double tileHighlightWidth()\n\t{\n\t\treturn 2;\n\t}\n\n\t// ------------------------------------------------------------\n\n\t@ConfigSection(\n\t\tname \u003d \"Font Settings\",\n\t\tposition \u003d 2,\n\t\tdescription \u003d \"Fonts settings\",\n\t\tclosedByDefault \u003d true\n\t)\n\tString fontsSettings \u003d \"fontsSettings\";\n\n\t@ConfigItem(\n\t\tposition \u003d 0,\n\t\tkeyName \u003d \"fontsType\",\n\t\tname \u003d \"Font Type\",\n\t\tdescription \u003d \"Nylocas wave number font type.\",\n\t\tsection \u003d fontsSettings\n\t)\n\tdefault NyloerFonts fontsType()\n\t{\n\t\treturn NyloerFonts.ARIAL;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 1,\n\t\tkeyName \u003d \"fontsBold\",\n\t\tname \u003d \"Bold\",\n\t\tdescription \u003d \"Nylocas wave number fonts will be bold.\",\n\t\tsection \u003d fontsSettings\n\t)\n\tdefault boolean fontsBold()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 2,\n\t\tkeyName \u003d \"fontsSize\",\n\t\tname \u003d \"Font Size\",\n\t\tdescription \u003d \"Nylocas wave number size.\",\n\t\tsection \u003d fontsSettings\n\t)\n\tdefault int fontsSize()\n\t{\n\t\treturn 12;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 3,\n\t\tkeyName \u003d \"splitFontsType\",\n\t\tname \u003d \"Split Font Type\",\n\t\tdescription \u003d \"Nylocas wave number font type (split)\",\n\t\tsection \u003d fontsSettings\n\t)\n\tdefault NyloerFonts splitFontsType()\n\t{\n\t\treturn NyloerFonts.ARIAL;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 4,\n\t\tkeyName \u003d \"splitFontsBold\",\n\t\tname \u003d \"Split Bold\",\n\t\tdescription \u003d \"Nylocas wave number fonts will be bold (split)\",\n\t\tsection \u003d fontsSettings\n\t)\n\tdefault boolean splitFontsBold()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 5,\n\t\tkeyName \u003d \"splitFontsSize\",\n\t\tname \u003d \"Split Font Size\",\n\t\tdescription \u003d \"Nylocas wave number size (split)\",\n\t\tsection \u003d fontsSettings\n\t)\n\tdefault int splitFontsSize()\n\t{\n\t\treturn 12;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tposition \u003d 6,\n\t\tkeyName \u003d \"meleeNylocasColor\",\n\t\tname \u003d \"Melee Color\",\n\t\tdescription \u003d \"Color of melee nylocas.\",\n\t\tsection \u003d fontsSettings\n\t)\n\tdefault Color meleeNylocasColor()\n\t{\n\t\treturn Color.WHITE;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tposition \u003d 7,\n\t\tkeyName \u003d \"meleeNylocasOutlineColor\",\n\t\tname \u003d \"Melee Outline Color\",\n\t\tdescription \u003d \"Outline color of melee nylocas.\",\n\t\tsection \u003d fontsSettings\n\t)\n\tdefault Color meleeNylocasOutlineColor()\n\t{\n\t\treturn Color.BLACK;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tposition \u003d 8,\n\t\tkeyName \u003d \"rangeNylocasColor\",\n\t\tname \u003d \"Range Color\",\n\t\tdescription \u003d \"Color of range nylocas.\",\n\t\tsection \u003d fontsSettings\n\t)\n\tdefault Color rangeNylocasColor()\n\t{\n\t\treturn Color.GREEN;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tposition \u003d 9,\n\t\tkeyName \u003d \"rangeNylocasOutlineColor\",\n\t\tname \u003d \"Range Outline Color\",\n\t\tdescription \u003d \"Outline color of range nylocas.\",\n\t\tsection \u003d fontsSettings\n\t)\n\tdefault Color rangeNylocasOutlineColor()\n\t{\n\t\treturn Color.BLACK;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tposition \u003d 10,\n\t\tkeyName \u003d \"mageNylocasColor\",\n\t\tname \u003d \"Mage Color\",\n\t\tdescription \u003d \"Color of mage nylocas.\",\n\t\tsection \u003d fontsSettings\n\t)\n\tdefault Color mageNylocasColor()\n\t{\n\t\treturn Color.CYAN;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tposition \u003d 11,\n\t\tkeyName \u003d \"mageNylocasOutlineColor\",\n\t\tname \u003d \"Mage Outline Color\",\n\t\tdescription \u003d \"Outline color of mage nylocas.\",\n\t\tsection \u003d fontsSettings\n\t)\n\tdefault Color mageNylocasOutlineColor()\n\t{\n\t\treturn Color.BLACK;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 12,\n\t\tkeyName \u003d \"makeDarkerHotkey\",\n\t\tname \u003d \"Make Darker Hotkey\",\n\t\tdescription \u003d \"Makes color darker for present nylocas in the room.\",\n\t\tsection \u003d fontsSettings\n\t)\n\tdefault Keybind makeDarkerHotkey()\n\t{\n\t\treturn Keybind.NOT_SET;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 13,\n\t\tkeyName \u003d \"darkerWave\",\n\t\tname \u003d \"Darker Wave\",\n\t\tdescription \u003d \"Makes the selected wave nyloes darker, as well as the older ones.\",\n\t\tsection \u003d fontsSettings\n\t)\n\tdefault int darkerWave()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 14,\n\t\tkeyName \u003d \"darkerWaveOffset\",\n\t\tname \u003d \"Darker Wave Offset\",\n\t\tdescription \u003d \"\",\n\t\tsection \u003d fontsSettings\n\t)\n\tdefault int darkerWaveOffset()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\tposition \u003d 15,\n\t\tkeyName \u003d \"customFontConfig\",\n\t\tname \u003d \"Font config\",\n\t\tdescription \u003d \"Config settings wave:melee/range/mage:color\",\n\t\tsection \u003d fontsSettings\n\t)\n\tdefault String customFontConfig()\n\t{\n\t\treturn \"0:mage:#00FFFF\";\n\t}\n\n\n\t// ------------------------------------------------------------\n\t@ConfigSection(\n\t\tname \u003d \"Role Swapper\",\n\t\tposition \u003d 3,\n\t\tdescription \u003d \"Role Swapper Settings\",\n\t\tclosedByDefault \u003d true\n\t)\n\tString roleSwapperSettings \u003d \"roleSwapperSettings\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"mageRoleSwaps\",\n\t\tname \u003d \"Mage Swaps\",\n\t\tdescription \u003d \"Custom swaps for mage role\",\n\t\tsection \u003d roleSwapperSettings,\n\t\tposition \u003d 0\n\t)\n\tdefault String mageRoleSwaps()\n\t{\n\t\treturn \"attack,nylocas ischyros*260*\\n\" +\n\t\t\t\"attack,nylocas ischyros*162*\\n\" +\n\t\t\t\"attack,nylocas toxobolos*260*\\n\" +\n\t\t\t\"attack,nylocas toxobolos*162*\\n\" +\n\t\t\t\"attack,nylocas hagios*260*\\n\" +\n\t\t\t\"attack,nylocas hagios*162*\";\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"mageRoleShiftSwaps\",\n\t\tname \u003d \"Mage Shift Swaps\",\n\t\tdescription \u003d \"Custom shift swaps for mage role\",\n\t\tsection \u003d roleSwapperSettings,\n\t\tposition \u003d 1\n\t)\n\tdefault String mageRoleShiftSwaps()\n\t{\n\t\treturn \"/walk here,*\\n\" +\n\t\t\t\"/attack,nylocas hagios*162*\";\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"mageHighlightMageTiles\",\n\t\tname \u003d \"Highlight Mage Tiles\",\n\t\tdescription \u003d \"Highlights mage nylo tiles when mage role is selected.\",\n\t\tsection \u003d roleSwapperSettings,\n\t\tposition \u003d 2\n\t)\n\tdefault boolean mageHighlightMageTiles()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"mageHighlightRangeTiles\",\n\t\tname \u003d \"Highlight Range Tiles\",\n\t\tdescription \u003d \"Highlights range nylo tiles when mage role is selected.\",\n\t\tsection \u003d roleSwapperSettings,\n\t\tposition \u003d 3\n\t)\n\tdefault boolean mageHighlightRangeTiles()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"mageHighlightMeleeTiles\",\n\t\tname \u003d \"Highlight Melee Tiles\",\n\t\tdescription \u003d \"Highlights melee nylo tiles when mage role is selected.\",\n\t\tsection \u003d roleSwapperSettings,\n\t\tposition \u003d 4\n\t)\n\tdefault boolean mageHighlightMeleeTiles()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"rangeRoleSwaps\",\n\t\tname \u003d \"Range Swaps\",\n\t\tdescription \u003d \"Custom swaps for range role\",\n\t\tsection \u003d roleSwapperSettings,\n\t\tposition \u003d 5\n\t)\n\tdefault String rangeRoleSwaps()\n\t{\n\t\treturn \"attack,nylocas ischyros*260*\\n\" +\n\t\t\t\"attack,nylocas ischyros*162*\\n\" +\n\t\t\t\"attack,nylocas hagios*260*\\n\" +\n\t\t\t\"attack,nylocas hagios*162*\\n\" +\n\t\t\t\"attack,nylocas toxobolos*260*\\n\" +\n\t\t\t\"attack,nylocas toxobolos*162*\";\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"rangeRoleShiftSwaps\",\n\t\tname \u003d \"Range Shift Swaps\",\n\t\tdescription \u003d \"Custom shift swaps for range role\",\n\t\tsection \u003d roleSwapperSettings,\n\t\tposition \u003d 6\n\t)\n\tdefault String rangeRoleShiftSwaps()\n\t{\n\t\treturn \"/walk here,*\\n\" +\n\t\t\t\"/attack,nylocas toxobolos*162*\";\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"rangeHighlightMageTiles\",\n\t\tname \u003d \"Highlight Mage Tiles\",\n\t\tdescription \u003d \"Highlights mage nylo tiles when range role is selected.\",\n\t\tsection \u003d roleSwapperSettings,\n\t\tposition \u003d 7\n\t)\n\tdefault boolean rangeHighlightMageTiles()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"rangeHighlightRangeTiles\",\n\t\tname \u003d \"Highlight Range Tiles\",\n\t\tdescription \u003d \"Highlights range nylo tiles when range role is selected.\",\n\t\tsection \u003d roleSwapperSettings,\n\t\tposition \u003d 8\n\t)\n\tdefault boolean rangeHighlightRangeTiles()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"rangeHighlightMeleeTiles\",\n\t\tname \u003d \"Highlight Melee Tiles\",\n\t\tdescription \u003d \"Highlights melee nylo tiles when range role is selected.\",\n\t\tsection \u003d roleSwapperSettings,\n\t\tposition \u003d 9\n\t)\n\tdefault boolean rangeHighlightMeleeTiles()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"meleeRoleSwaps\",\n\t\tname \u003d \"Melee Swaps\",\n\t\tdescription \u003d \"Custom swaps for melee role\",\n\t\tsection \u003d roleSwapperSettings,\n\t\tposition \u003d 10\n\t)\n\tdefault String meleeRoleSwaps()\n\t{\n\t\treturn \"attack,nylocas hagios*269*\\n\" +\n\t\t\t\"attack,nylocas hagios*162*\\n\" +\n\t\t\t\"attack,nylocas toxobolos*260*\\n\" +\n\t\t\t\"attack,nylocas toxobolos*162*\\n\" +\n\t\t\t\"attack,nylocas ischyros*260*\\n\" +\n\t\t\t\"attack,nylocas ischyros*162*\";\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"meleeRoleShiftSwaps\",\n\t\tname \u003d \"Melee Shift Swaps\",\n\t\tdescription \u003d \"Custom shift swaps for melee role\",\n\t\tsection \u003d roleSwapperSettings,\n\t\tposition \u003d 11\n\t)\n\tdefault String meleeRoleShiftSwaps()\n\t{\n\t\treturn \"/walk here,*\\n\" +\n\t\t\t\"/attack,nylocas ischyros*162*\";\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"meleeHighlightMageTiles\",\n\t\tname \u003d \"Highlight Mage Tiles\",\n\t\tdescription \u003d \"Highlights mage nylo tiles when melee role is selected.\",\n\t\tsection \u003d roleSwapperSettings,\n\t\tposition \u003d 12\n\t)\n\tdefault boolean meleeHighlightMageTiles()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"meleeHighlightRangeTiles\",\n\t\tname \u003d \"Highlight Range Tiles\",\n\t\tdescription \u003d \"Highlights range nylo tiles when melee role is selected.\",\n\t\tsection \u003d roleSwapperSettings,\n\t\tposition \u003d 13\n\t)\n\tdefault boolean meleeHighlightRangeTiles()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"meleeHighlightMeleeTiles\",\n\t\tname \u003d \"Highlight Melee Tiles\",\n\t\tdescription \u003d \"Highlights melee nylo tiles when melee role is selected.\",\n\t\tsection \u003d roleSwapperSettings,\n\t\tposition \u003d 14\n\t)\n\tdefault boolean meleeHighlightMeleeTiles()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"customRoleSwaps\",\n\t\tname \u003d \"Custom Swaps\",\n\t\tdescription \u003d \"Custom swaps for Custom role\",\n\t\tsection \u003d roleSwapperSettings,\n\t\tposition \u003d 15\n\t)\n\tdefault String customRoleSwaps()\n\t{\n\t\treturn \"attack,nylocas toxobolos*260*\\n\" +\n\t\t\t\"attack,nylocas toxobolos*162*\\n\" +\n\t\t\t\"attack,nylocas hagios*260*\\n\" +\n\t\t\t\"attack,nylocas hagios*162*\\n\" +\n\t\t\t\"attack,nylocas ischyros*260*\\n\" +\n\t\t\t\"attack,nylocas ischyros*162*\";\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"customRoleShiftSwaps\",\n\t\tname \u003d \"Custom Shift Swaps\",\n\t\tdescription \u003d \"Custom shift swaps for Custom role\",\n\t\tsection \u003d roleSwapperSettings,\n\t\tposition \u003d 16\n\t)\n\tdefault String customRoleShiftSwaps()\n\t{\n\t\treturn \"/walk here,*\\n\" +\n\t\t\t\"/attack,nylocas hagios*162*\";\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"customHighlightMageTiles\",\n\t\tname \u003d \"Highlight Mage Tiles\",\n\t\tdescription \u003d \"Highlights mage nylo tiles when custom role is selected.\",\n\t\tsection \u003d roleSwapperSettings,\n\t\tposition \u003d 17\n\t)\n\tdefault boolean customHighlightMageTiles()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"customHighlightRangeTiles\",\n\t\tname \u003d \"Highlight Range Tiles\",\n\t\tdescription \u003d \"Highlights range nylo tiles when custom role is selected.\",\n\t\tsection \u003d roleSwapperSettings,\n\t\tposition \u003d 18\n\t)\n\tdefault boolean customHighlightRangeTiles()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"customHighlightMeleeTiles\",\n\t\tname \u003d \"Highlight Melee Tiles\",\n\t\tdescription \u003d \"Highlights melee nylo tiles when custom role is selected.\",\n\t\tsection \u003d roleSwapperSettings,\n\t\tposition \u003d 19\n\t)\n\tdefault boolean customHighlightMeleeTiles()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"displayMageTilesAsTrueTiles\",\n\t\tname \u003d \"True tiles for mage\",\n\t\tdescription \u003d \"True tiles will be displayed for magers\",\n\t\tsection \u003d roleSwapperSettings,\n\t\tposition \u003d 20\n\t)\n\tdefault boolean displayMageTilesAsTrueTiles()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"displayRangeTilesAsTrueTiles\",\n\t\tname \u003d \"True tiles for range\",\n\t\tdescription \u003d \"True tiles will be displayed for rangers\",\n\t\tsection \u003d roleSwapperSettings,\n\t\tposition \u003d 21\n\t)\n\tdefault boolean displayRangeTilesAsTrueTiles()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"displayMeleeTilesAsTrueTiles\",\n\t\tname \u003d \"True tiles for melees\",\n\t\tdescription \u003d \"True tiles will be displayed for melees\",\n\t\tsection \u003d roleSwapperSettings,\n\t\tposition \u003d 22\n\t)\n\tdefault boolean displayMeleeTilesAsTrueTiles()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"previousRole\",\n\t\tname \u003d \"\",\n\t\tdescription \u003d \"\",\n\t\thidden \u003d true\n\t)\n\tdefault String previousRole()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"previousRole\",\n\t\tname \u003d \"\",\n\t\tdescription \u003d \"\",\n\t\thidden \u003d true\n\t)\n\tvoid setPreviousRole(String role);\n}\n","filePath":"src\\main\\java\\com\\nyloer\\NyloerConfig.java"},{"fileName":"NyloerFonts.java","content":"package com.nyloer;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@RequiredArgsConstructor\n@Getter\npublic enum NyloerFonts\n{\n\tREGULAR(\"RS Regular\"),\n\tARIAL(\"Arial\"),\n\tCAMBRIA(\"Cambria\"),\n\tROCKWELL(\"Rockwell\"),\n\tSEGOE_UI(\"Segoe Ui\"),\n\tTIMES_NEW_ROMAN(\"Times New Roman\"),\n\tVERDANA(\"Verdana\"),\n\tDIALOG(\"DIALOG\"),\n\tRUNESCAPE(\"RuneScape\");\n\n\tprivate final String name;\n\n\t@Override\n\tpublic String toString()\n\t{\n\t\treturn name;\n\t}\n}","filePath":"src\\main\\java\\com\\nyloer\\NyloerFonts.java"},{"fileName":"NyloerPlugin.java","content":"package com.nyloer;\n\nimport com.google.inject.Provides;\nimport com.nyloer.stats.StatsHandler;\nimport com.nyloer.overlays.NyloerOverlay;\nimport com.nyloer.overlays.NyloerTileOverlay;\nimport com.nyloer.roleswapper.RoleSwapper;\nimport java.awt.Color;\nimport java.awt.Font;\nimport java.awt.image.BufferedImage;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport javax.inject.Inject;\nimport lombok.Getter;\nimport lombok.Setter;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.NPC;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.NpcDespawned;\nimport net.runelite.api.events.NpcSpawned;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.EventBus;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.game.NpcUtil;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport java.awt.event.KeyEvent;\nimport org.apache.commons.lang3.ArrayUtils;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport net.runelite.client.input.KeyListener;\nimport net.runelite.client.input.KeyManager;\nimport net.runelite.client.util.ImageUtil;\n\n@PluginDescriptor(\n\tname \u003d \"Nyloer\"\n)\npublic class NyloerPlugin extends Plugin implements KeyListener\n{\n\t@Inject\n\tpublic Client client;\n\n\t@Inject\n\tpublic ClientThread clientThread;\n\n\t@Inject\n\tprivate ClientToolbar clientToolbar;\n\n\t@Inject\n\tprivate EventBus eventBus;\n\n\t@Inject\n\tpublic NyloerConfig config;\n\n\t@Inject\n\tpublic RoleSwapper roleSwapper;\n\n\t@Inject\n\tpublic StatsHandler statsHandler;\n\n\t@Inject\n\tpublic CustomFontConfig customFontConfig;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate NpcUtil npcUtil;\n\n\t@Inject\n\tprivate NyloerOverlay nyloerOverlay;\n\n\t@Inject\n\tpublic NyloerTileOverlay nyloerTileOverlay;\n\n\t@Inject\n\tprivate KeyManager keyManager;\n\n\tpublic NyloerSidePanel sidePanel;\n\tpublic NavigationButton sidePanelButton;\n\n\tprivate static final int NYLOCAS_REGION_ID \u003d 13122;\n\tprivate final int[] NYLOCAS_PILLAR_IDS \u003d {8358, 10811, 10790};\n\tprivate final int[] NYLOCAS_NPC_IDS \u003d {\n\t\t8342, 8348, 8345, 8351, 8343, 8349, 8346, 8352, 8344, 8350, 8347, 8353,\n\t\t10791, 10792, 10793, 10797, 10798, 10799, 10794, 10795, 10796,\n\t\t10800, 10801, 10802, 10774, 10777, 10780, 10783, 10775, 10778,\n\t\t10781, 10784, 10776, 10779, 10782, 10785\n\t};\n\tprivate final int[] MELEE_NYLOCAS_IDS \u003d {8342, 8345, 8348, 8351, 10774, 10777, 10780, 10783, 10791, 10794, 10797, 10800};\n\tprivate final int[] RANGE_NYLOCAS_IDS \u003d {8343, 8346, 8349, 8352, 10775, 10778, 10781, 10784, 10792, 10795, 10798, 10801};\n\tprivate final int[] MAGE_NYLOCAS_IDS \u003d {8344, 8347, 8350, 8353, 10776, 10779, 10782, 10785, 10793, 10796, 10799, 10802};\n\n\t@Getter\n\tprivate boolean isNylocasRegion \u003d false;\n\n\t@Getter\n\tprivate boolean isNylocasRegionLast \u003d false;\n\n\t@Getter\n\tprivate boolean pillarsSpawned;\n\n\t@Getter\n\tprivate int w1T \u003d 0;\n\n\t@Getter\n\tpublic int makeDarkerT;\n\n\tprivate int _makeDarkerT;\n\n\t@Getter\n\tprivate int waveNumber;\n\n\t@Getter\n\tprivate int nylocasAliveCount;\n\n\tprivate int lastWaveTickSpawned;\n\n\t@Getter\n\tArrayList\u003cNyloerNpc\u003e nyloers \u003d new ArrayList\u003cNyloerNpc\u003e();\n\t@Getter\n\tHashMap\u003cInteger, NyloerNpc\u003e nyloersIndexMap \u003d new HashMap\u003c\u003e();\n\n\tpublic static final Logger log \u003d LoggerFactory.getLogger(NyloerPlugin.class);\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tcreateSidePanel();\n\t\tkeyManager.registerKeyListener(this);\n\t\teventBus.register(roleSwapper);\n\t\teventBus.register(statsHandler);\n\t\troleSwapper.reloadSwaps();\n\t\tstart();\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tremoveSidePanel();\n\t\tstop();\n\t\tkeyManager.unregisterKeyListener(this);\n\t\teventBus.unregister(roleSwapper);\n\t\teventBus.unregister(statsHandler);\n\t}\n\n\t@Override\n\tpublic void keyTyped(KeyEvent e)\n\t{\n\t}\n\n\t@Override\n\tpublic void keyPressed(KeyEvent e)\n\t{\n\t\tif (config.makeDarkerHotkey().matches(e))\n\t\t{\n\t\t\tmakeDarkerT \u003d this.client.getTickCount() - 1;\n\t\t\tmakeDarkerT -\u003d (makeDarkerT - w1T) % 4;\n\t\t}\n\t}\n\n\t@Override\n\tpublic void keyReleased(KeyEvent e)\n\t{\n\t}\n\n\t@Provides\n\tNyloerConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn (NyloerConfig) configManager.getConfig(NyloerConfig.class);\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged configChanged)\n\t{\n\t\tif (!configChanged.getGroup().equals(NyloerConfig.GROUP))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tcustomFontConfig.getColorSettings().clear();\n\t\tcustomFontConfig.parse(config);\n\t}\n\n\tprivate void createSidePanel()\n\t{\n\t\tfinal BufferedImage icon \u003d ImageUtil.loadImageResource(getClass(), \"/ico.png\");\n\t\tsidePanel \u003d new NyloerSidePanel(client, this, config);\n\t\tsidePanelButton \u003d NavigationButton.builder().tooltip(\"Nyloer\").icon(icon).priority(6).panel(sidePanel).build();\n\t\tclientToolbar.addNavigation(sidePanelButton);\n\t\tsidePanel.startPanel();\n\t}\n\n\tprivate void removeSidePanel()\n\t{\n\t\tclientToolbar.removeNavigation(sidePanelButton);\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged event)\n\t{\n\t\tif (event.getGameState() \u003d\u003d GameState.LOGIN_SCREEN || event.getGameState() \u003d\u003d GameState.HOPPING)\n\t\t{\n\t\t\tstop();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event)\n\t{\n\t\tif (client.getTickCount() % 5 \u003d\u003d 0)\n\t\t{\n\t\t\tupdateNylocasRegion();\n\t\t}\n\t\tif (isNylocasRegion \u0026\u0026 !isNylocasRegionLast)\n\t\t{\n\t\t\tstart();\n\t\t}\n\t\telse if (!isNylocasRegion \u0026\u0026 isNylocasRegionLast)\n\t\t{\n\t\t\tstop();\n\t\t}\n\t\tisNylocasRegionLast \u003d isNylocasRegion;\n\t\tif (isNylocasRegion)\n\t\t{\n\t\t\tif (client.getTickCount() \u003d\u003d _makeDarkerT)\n\t\t\t{\n\t\t\t\tmakeDarkerT \u003d _makeDarkerT;\n\t\t\t}\n\t\t\tfor (NyloerNpc nyloer : nyloers)\n\t\t\t{\n\t\t\t\tif (nyloer.npc.isDead())\n\t\t\t\t{\n\t\t\t\t\tnyloer.setAlive(false);\n\t\t\t\t}\n\t\t\t\telse if (nyloer.isAlive)\n\t\t\t\t{\n\t\t\t\t\tnyloer.incrementTicks();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onNpcSpawned(NpcSpawned event)\n\t{\n\t\tif (!isNylocasRegion)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tNPC npc \u003d event.getNpc();\n\t\tString npcName \u003d npc.getName();\n\t\tif (npcName \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (!pillarsSpawned \u0026\u0026 ArrayUtils.contains(NYLOCAS_PILLAR_IDS, npc.getId()))\n\t\t{\n\t\t\treset();\n\t\t\tsidePanel.resetStallsTable();\n\t\t\tpillarsSpawned \u003d true;\n\t\t\treturn;\n\t\t}\n\t\tif (ArrayUtils.contains(NYLOCAS_NPC_IDS, npc.getId()))\n\t\t{\n\t\t\tNyloerNpc nyloer \u003d new NyloerNpc(npc);\n\t\t\tif (!nyloer.spawn.equals(\"SPLIT\") \u0026\u0026 lastWaveTickSpawned !\u003d client.getTickCount())\n\t\t\t{\n\t\t\t\tlastWaveTickSpawned \u003d client.getTickCount();\n\t\t\t\t++waveNumber;\n\t\t\t\t++nyloer.waveSpawned;\n\t\t\t\tnyloer.updateStyle(nyloer.id);\n\t\t\t\tif (waveNumber \u003d\u003d 1)\n\t\t\t\t{\n\t\t\t\t\tw1T \u003d client.getTickCount();\n\t\t\t\t}\n\t\t\t\tif (waveNumber \u003d\u003d config.darkerWave())\n\t\t\t\t{\n\t\t\t\t\t_makeDarkerT \u003d client.getTickCount() + config.darkerWaveOffset();\n\t\t\t\t}\n\t\t\t}\n\t\t\tnyloers.add(nyloer);\n\t\t\tnyloersIndexMap.put(nyloer.index, nyloer);\n\t\t\tupdateNylocasAliveCount();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onNpcDespawned(NpcDespawned event)\n\t{\n\t\tif (!isNylocasRegion)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tNyloerNpc nyloer \u003d nyloersIndexMap.remove(event.getNpc().getIndex());\n\t\tif (nyloer !\u003d null)\n\t\t{\n\t\t\tupdateNylocasAliveCount();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage event)\n\t{\n\t\tif (isNylocasRegion)\n\t\t{\n\t\t\tif (event.getType().equals(ChatMessageType.GAMEMESSAGE))\n\t\t\t{\n\t\t\t\tif (event.getMessage().equals(\"You have failed. The vampyres take pity on you and allow you to try again...\"))\n\t\t\t\t{\n\t\t\t\t\treset();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void start()\n\t{\n\t\tNyloerPlugin.log.debug(\"Starting Nyloer.\");\n\t\tcustomFontConfig.parse(config);\n\t\toverlayManager.add(nyloerOverlay);\n\t\toverlayManager.add(nyloerTileOverlay);\n\t}\n\n\tprivate void stop()\n\t{\n\t\tNyloerPlugin.log.debug(\"Stopping Nyloer.\");\n\t\tcustomFontConfig.getColorSettings().clear();\n\t\toverlayManager.remove(nyloerOverlay);\n\t\toverlayManager.remove(nyloerTileOverlay);\n\t\treset();\n\t}\n\n\tprivate void reset()\n\t{\n\t\tNyloerPlugin.log.debug(\"Resetting Nyloer.\");\n\t\twaveNumber \u003d 0;\n\t\tnylocasAliveCount \u003d 0;\n\t\t_makeDarkerT \u003d 0;\n\t\tpillarsSpawned \u003d false;\n\t\tnyloers.clear();\n\t\tnyloerOverlay.nyloers.clear();\n\t}\n\n\tprivate void updateNylocasRegion()\n\t{\n\t\tisNylocasRegion \u003d ArrayUtils.contains(client.getMapRegions(), NYLOCAS_REGION_ID);\n\t}\n\n\tprivate void updateNylocasAliveCount()\n\t{\n\t\tnylocasAliveCount \u003d nyloersIndexMap.size();\n\t}\n\n\tpublic class NyloerNpc\n\t{\n\t\t@Getter\n\t\tprivate NPC npc;\n\n\t\t@Getter\n\t\tprivate int id;\n\n\t\t@Getter\n\t\tprivate int lastId;\n\n\t\t@Getter\n\t\tprivate String style;\n\n\t\t@Getter\n\t\tprivate int index;\n\n\t\t@Getter\n\t\tprivate String size;\n\n\t\t@Getter\n\t\t@Setter\n\t\tprivate boolean isAlive;\n\n\t\t@Getter\n\t\tprivate boolean isSplit;\n\n\t\t@Getter\n\t\tprivate String spawn;\n\n\t\t@Getter\n\t\tprivate int waveSpawned;\n\n\t\t@Getter\n\t\tpublic int tickSpawned;\n\n\t\t@Getter\n\t\tprivate int ticksAlive;\n\n\t\t@Getter\n\t\tprivate String nyloerSymbol;\n\n\t\t@Getter\n\t\tprivate Color color;\n\n\t\t@Getter\n\t\tprivate Color outlineColor;\n\n\t\t@Getter\n\t\tprivate boolean colorDarker;\n\n\t\t@Getter\n\t\tprivate Font font;\n\n\t\t@Getter\n\t\tprivate String fontConfigKey;\n\n\t\tpublic void incrementTicks()\n\t\t{\n\t\t\t++ticksAlive;\n\t\t\tif (ticksAlive \u003d\u003d 52)\n\t\t\t{\n\t\t\t\tisAlive \u003d false;\n\t\t\t}\n\t\t\tif (lastId !\u003d npc.getId())\n\t\t\t{\n\t\t\t\tlastId \u003d npc.getId();\n\t\t\t\tupdateStyle(npc.getId());\n\t\t\t}\n\t\t}\n\n\t\tprivate void updateStyle(int id)\n\t\t{\n\t\t\tif (ArrayUtils.contains(MELEE_NYLOCAS_IDS, id))\n\t\t\t{\n\t\t\t\tstyle \u003d \"melee\";\n\t\t\t\tfontConfigKey \u003d waveSpawned + \"-\" + \"melee\";\n\t\t\t\tcolor \u003d config.meleeNylocasColor();\n\t\t\t\toutlineColor \u003d config.meleeNylocasOutlineColor();\n\t\t\t\tnyloerSymbol \u003d config.meleeNylocasSymbol();\n\t\t\t}\n\t\t\telse if (ArrayUtils.contains(RANGE_NYLOCAS_IDS, id))\n\t\t\t{\n\t\t\t\tstyle \u003d \"range\";\n\t\t\t\tfontConfigKey \u003d waveSpawned + \"-\" + \"range\";\n\t\t\t\tcolor \u003d config.rangeNylocasColor();\n\t\t\t\toutlineColor \u003d config.rangeNylocasOutlineColor();\n\t\t\t\tnyloerSymbol \u003d config.rangeNylocasSymbol();\n\t\t\t}\n\t\t\telse if (ArrayUtils.contains(MAGE_NYLOCAS_IDS, id))\n\t\t\t{\n\t\t\t\tstyle \u003d \"mage\";\n\t\t\t\tfontConfigKey \u003d waveSpawned + \"-\" + \"mage\";\n\t\t\t\tcolor \u003d config.mageNylocasColor();\n\t\t\t\toutlineColor \u003d config.mageNylocasOutlineColor();\n\t\t\t\tnyloerSymbol \u003d config.mageNylocasSymbol();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfontConfigKey \u003d null;\n\t\t\t\tcolor \u003d Color.WHITE;\n\t\t\t\toutlineColor \u003d Color.BLACK;\n\t\t\t\tisAlive \u003d false;\n\t\t\t}\n\t\t\tColor customColor \u003d customFontConfig.getColor(fontConfigKey);\n\t\t\tif (customColor !\u003d null)\n\t\t\t{\n\t\t\t\tcolor \u003d customColor;\n\t\t\t}\n\t\t\tif (colorDarker)\n\t\t\t{\n\t\t\t\tcolor \u003d color.darker().darker();\n\t\t\t}\n\t\t}\n\n\t\tprivate void configureFonts()\n\t\t{\n\t\t\tint style;\n\t\t\tif (isSplit)\n\t\t\t{\n\t\t\t\tstyle \u003d config.splitFontsBold() ? Font.BOLD : Font.PLAIN;\n\t\t\t\tthis.font \u003d new Font(config.splitFontsType().toString(), style, config.splitFontsSize());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tstyle \u003d config.fontsBold() ? Font.BOLD : Font.PLAIN;\n\t\t\t\tthis.font \u003d new Font(config.fontsType().toString(), style, config.fontsSize());\n\t\t\t}\n\t\t}\n\n\t\tprivate String findSpawn(NPC npc)\n\t\t{\n\t\t\tint x \u003d WorldPoint.fromLocalInstance(NyloerPlugin.this.client, npc.getLocalLocation()).getRegionX();\n\t\t\tint y \u003d WorldPoint.fromLocalInstance(NyloerPlugin.this.client, npc.getLocalLocation()).getRegionY();\n\t\t\tif (x \u003d\u003d 17 \u0026\u0026 y \u003d\u003d 25)\n\t\t\t{\n\t\t\t\treturn \"WEST NORTH\";\n\t\t\t}\n\t\t\telse if (x \u003d\u003d 17 \u0026\u0026 y \u003d\u003d 24)\n\t\t\t{\n\t\t\t\treturn \"WEST SOUTH\";\n\t\t\t}\n\t\t\telse if (x \u003d\u003d 31 \u0026\u0026 y \u003d\u003d 9)\n\t\t\t{\n\t\t\t\treturn \"SOUTH WEST\";\n\t\t\t}\n\t\t\telse if (x \u003d\u003d 32 \u0026\u0026 y \u003d\u003d 9)\n\t\t\t{\n\t\t\t\treturn \"SOUTH EAST\";\n\t\t\t}\n\t\t\telse if (x \u003d\u003d 46 \u0026\u0026 y \u003d\u003d 24)\n\t\t\t{\n\t\t\t\treturn \"EAST SOUTH\";\n\t\t\t}\n\t\t\telse if (x \u003d\u003d 46 \u0026\u0026 y \u003d\u003d 25)\n\t\t\t{\n\t\t\t\tif (npc.getComposition().getSize() \u003d\u003d 1)\n\t\t\t\t{\n\t\t\t\t\treturn \"EAST NORTH\";\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn \"EAST BIG\";\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (x \u003d\u003d 18 \u0026\u0026 y \u003d\u003d 25)\n\t\t\t{\n\t\t\t\treturn \"WEST BIG\";\n\t\t\t}\n\t\t\telse if (x \u003d\u003d 32 \u0026\u0026 y \u003d\u003d 10)\n\t\t\t{\n\t\t\t\treturn \"SOUTH BIG\";\n\t\t\t}\n\t\t\telse if (x \u003d\u003d 47 \u0026\u0026 y \u003d\u003d 25)\n\t\t\t{\n\t\t\t\treturn \"EAST BIG 30\";\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn \"SPLIT\";\n\t\t\t}\n\t\t}\n\n\t\tpublic NyloerNpc(NPC npc)\n\t\t{\n\t\t\tthis.npc \u003d npc;\n\t\t\tthis.id \u003d npc.getId();\n\t\t\tthis.lastId \u003d npc.getId();\n\t\t\tthis.index \u003d npc.getIndex();\n\t\t\tthis.isAlive \u003d true;\n\t\t\tthis.spawn \u003d findSpawn(npc);\n\t\t\tthis.isSplit \u003d this.spawn.equals(\"SPLIT\");\n\t\t\tthis.tickSpawned \u003d NyloerPlugin.this.client.getTickCount();\n\t\t\tthis.colorDarker \u003d false;\n\t\t\tif (isSplit \u0026\u0026 tickSpawned \u003e NyloerPlugin.this.lastWaveTickSpawned)\n\t\t\t{\n\t\t\t\tthis.waveSpawned \u003d NyloerPlugin.this.waveNumber + 1;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.waveSpawned \u003d NyloerPlugin.this.waveNumber;\n\t\t\t}\n\t\t\tthis.ticksAlive \u003d 0;\n\t\t\tthis.updateStyle(id);\n\t\t\tthis.configureFonts();\n\t\t\tthis.size \u003d npc.getComposition().getSize() \u003d\u003d 1 ? \"SMALL\" : \"BIG\";\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\nyloer\\NyloerPlugin.java"},{"fileName":"NyloerSidePanel.java","content":"package com.nyloer;\n\n\nimport com.nyloer.stats.Stall;\nimport com.nyloer.stats.Stats;\nimport java.awt.datatransfer.StringSelection;\nimport javax.swing.border.TitledBorder;\nimport javax.swing.table.DefaultTableCellRenderer;\nimport javax.swing.table.DefaultTableModel;\nimport net.runelite.api.Client;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.PluginPanel;\n\nimport javax.inject.Inject;\nimport javax.swing.*;\nimport javax.swing.border.LineBorder;\nimport java.awt.*;\n\n\npublic class NyloerSidePanel extends PluginPanel\n{\n\tprivate final Client client;\n\tprivate final NyloerPlugin plugin;\n\tprivate final NyloerConfig config;\n\n\tFont tableTitleFont;\n\tFont buttonFont;\n\tFont tableFont;\n\tFont tableHeaderFont;\n\n\tJButton buttonMageSwaps;\n\tJButton buttonRangeSwaps;\n\tJButton buttonMeleeSwaps;\n\tJButton buttonCustomSwaps;\n\n\tJTable stallsTable;\n\tDefaultTableModel stallsTableModel;\n\tJScrollBar stallsTableScrollBar;\n\n\tJTable statsTable;\n\tDefaultTableModel statsTableModel;\n\tJScrollBar statsTableScrollBar;\n\n\t@Inject\n\tNyloerSidePanel(Client client, NyloerPlugin plugin, NyloerConfig config)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.config \u003d config;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.tableTitleFont \u003d new Font(NyloerFonts.RUNESCAPE.toString(), Font.PLAIN, 16);\n\t\tthis.buttonFont \u003d new Font(NyloerFonts.DIALOG.toString(), Font.PLAIN, 12);\n\t\tthis.tableFont \u003d new Font(NyloerFonts.DIALOG.toString(), Font.PLAIN, 12);\n\t\tthis.tableHeaderFont \u003d new Font(NyloerFonts.DIALOG.toString(), Font.PLAIN, 12);\n\t}\n\n\tpublic void startPanel()\n\t{\n\t\tgetParent().setLayout(new BorderLayout());\n\t\tgetParent().add(this, BorderLayout.CENTER);\n\t\tsetLayout(new BorderLayout());\n\t\tsetBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n\t\tsetBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tfinal JPanel layout \u003d new JPanel();\n\t\tBoxLayout boxLayout \u003d new BoxLayout(layout, BoxLayout.Y_AXIS);\n\t\tlayout.setLayout(boxLayout);\n\t\tadd(layout, BorderLayout.NORTH);\n\n\t\tlayout.add(Box.createRigidArea(new Dimension(0, 15)));\n\t\tJPanel swapsFrame \u003d createRoleSwapsFrame();\n\t\tlayout.add(swapsFrame);\n\n\t\tlayout.add(Box.createRigidArea(new Dimension(0, 15)));\n\t\tJScrollPane stallsPane \u003d createStallsPane();\n\t\tlayout.add(stallsPane);\n\n\t\tlayout.add(Box.createRigidArea(new Dimension(0, 15)));\n\t\tJPanel statsPane \u003d createRecentStatsFrame();\n\t\tlayout.add(statsPane);\n\t}\n\n\tpublic void addStall(Stall stall)\n\t{\n\t\tString aliveDisplay \u003d stall.getAliveCount() + \"/\" + stall.getCapSize();\n\t\tstallsTableModel.addRow(new Object[]{stall.getWave(), aliveDisplay, stall.getTotalStalls()});\n\t\tstallsTableScrollBar.setValue(stallsTableScrollBar.getMaximum() + 100);\n\t}\n\n\tpublic void addStats(Stats stats)\n\t{\n\t\tstatsTableModel.insertRow(\n\t\t\t0,\n\t\t\tnew Object[]{\n\t\t\t\tstats.totalTime,\n\t\t\t\tstats.bossTime,\n\t\t\t\tstats.wavesTime,\n\t\t\t\tstats.stallCountPre !\u003d 0 ? stats.stallCountPre : \"\",\n\t\t\t\tstats.stallCount1to12 !\u003d 0 ? stats.stallCount1to12 : \"\",\n\t\t\t\tstats.stallCount13to19 !\u003d 0 ? stats.stallCount13to19 : \"\",\n\t\t\t\tstats.stallCount21 !\u003d 0 ? stats.stallCount21 : \"\",\n\t\t\t\tstats.stallCount22to27 !\u003d 0 ? stats.stallCount22to27 : \"\",\n\t\t\t\tstats.stallCount28 !\u003d 0 ? stats.stallCount28 : \"\",\n\t\t\t\tstats.stallCount29 !\u003d 0 ? stats.stallCount29 : \"\",\n\t\t\t\tstats.stallCount30 !\u003d 0 ? stats.stallCount30 : \"\",\n\t\t\t\tstats.bigsAlive22 !\u003d -1 ? stats.bigsAlive22 : \"\",\n\t\t\t\tstats.bigsAlive29 !\u003d -1 ? stats.bigsAlive29 : \"\",\n\t\t\t\tstats.bigsAlive30 !\u003d -1 ? stats.bigsAlive30 : \"\",\n\t\t\t\tstats.bigsAlive31 !\u003d -1 ? stats.bigsAlive31 : \"\"\n\t\t\t}\n\t\t);\n\t}\n\n\tpublic void resetStallsTable()\n\t{\n\t\tif (stallsTableModel.getRowCount() \u003e 0)\n\t\t{\n\t\t\tfor (int i \u003d stallsTableModel.getRowCount() - 1; i \u003e -1; i--)\n\t\t\t{\n\t\t\t\tstallsTableModel.removeRow(i);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate JPanel createRoleSwapsFrame()\n\t{\n\t\tJPanel swapsFrame \u003d new JPanel();\n\t\tswapsFrame.setLayout(new GridLayout(2, 2));\n\t\tTitledBorder border \u003d BorderFactory.createTitledBorder(new LineBorder(Color.BLACK), \"Role Swaps\");\n\t\tborder.setTitleFont(tableTitleFont);\n\t\tswapsFrame.setBorder(border);\n\n\t\tbuttonMageSwaps \u003d new JButton(\"Mage\");\n\t\tbuttonRangeSwaps \u003d new JButton(\"Range\");\n\t\tbuttonMeleeSwaps \u003d new JButton(\"Melee\");\n\t\tbuttonCustomSwaps \u003d new JButton(\"Custom\");\n\t\tbuttonMageSwaps.setPreferredSize(new Dimension(40, 40));\n\t\tbuttonRangeSwaps.setPreferredSize(new Dimension(40, 40));\n\t\tbuttonMeleeSwaps.setPreferredSize(new Dimension(40, 40));\n\t\tbuttonCustomSwaps.setPreferredSize(new Dimension(40, 40));\n\t\tbuttonMageSwaps.setFocusable(false);\n\t\tbuttonRangeSwaps.setFocusable(false);\n\t\tbuttonMeleeSwaps.setFocusable(false);\n\t\tbuttonCustomSwaps.setFocusable(false);\n\t\tbuttonMageSwaps.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tbuttonRangeSwaps.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tbuttonMeleeSwaps.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tbuttonCustomSwaps.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tbuttonMageSwaps.addActionListener(e -\u003e _configureMageSwaps());\n\t\tbuttonRangeSwaps.addActionListener(e -\u003e _configureRangeSwaps());\n\t\tbuttonMeleeSwaps.addActionListener(e -\u003e _configureMeleeSwaps());\n\t\tbuttonCustomSwaps.addActionListener(e -\u003e _configureCustomSwaps());\n\t\tswapsFrame.add(buttonMageSwaps);\n\t\tswapsFrame.add(buttonMeleeSwaps);\n\t\tswapsFrame.add(buttonRangeSwaps);\n\t\tswapsFrame.add(buttonCustomSwaps);\n\t\tswitch (config.previousRole())\n\t\t{\n\t\t\tcase \"mage\":\n\t\t\t\t_configureMageSwaps();\n\t\t\t\tbreak;\n\t\t\tcase \"range\":\n\t\t\t\t_configureRangeSwaps();\n\t\t\t\tbreak;\n\t\t\tcase \"melee\":\n\t\t\t\t_configureMeleeSwaps();\n\t\t\t\tbreak;\n\t\t\tcase \"custom\":\n\t\t\t\t_configureCustomSwaps();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t_resetRolesSelection();\n\t\t}\n\n\t\treturn swapsFrame;\n\t}\n\n\tprivate JScrollPane createStallsPane()\n\t{\n\t\tstallsTable \u003d new JTable();\n\n\t\tString[] columnNames \u003d {\"Wave\", \"Alive\", \"Total\"};\n\t\tstallsTableModel \u003d new DefaultTableModel(columnNames, 0);\n\t\tstallsTable.setModel(stallsTableModel);\n\t\tstallsTable.getTableHeader().setReorderingAllowed(false);\n\t\tstallsTable.setDefaultEditor(Object.class, null);\n\t\tstallsTable.setPreferredScrollableViewportSize(new Dimension(0, 325));\n\t\tstallsTable.setRowHeight(25);\n\t\tstallsTable.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tstallsTable.setFont(tableFont);\n\t\tstallsTable.getTableHeader().setFont(tableHeaderFont);\n\t\tstallsTable.setRowSelectionAllowed(false);\n\t\tstallsTable.setCellSelectionEnabled(false);\n\t\tstallsTable.setShowGrid(false);\n\t\tstallsTable.setFillsViewportHeight(true);\n\n\t\tDefaultTableCellRenderer cellRenderer \u003d new DefaultTableCellRenderer();\n\t\tcellRenderer.setVerticalAlignment(JLabel.CENTER);\n\t\tcellRenderer.setHorizontalAlignment(JLabel.CENTER);\n\t\tfor (int columnIndex \u003d 0; columnIndex \u003c stallsTableModel.getColumnCount(); columnIndex++)\n\t\t{\n\t\t\tstallsTable.getColumnModel().getColumn(columnIndex).setCellRenderer(cellRenderer);\n\t\t}\n\n\t\tJScrollPane scrollPane \u003d new JScrollPane(\n\t\t\tstallsTable,\n\t\t\tJScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED,\n\t\t\tJScrollPane.HORIZONTAL_SCROLLBAR_NEVER\n\t\t);\n\t\tTitledBorder border \u003d BorderFactory.createTitledBorder(new LineBorder(Color.BLACK), \"Stalls\");\n\t\tborder.setTitleFont(tableTitleFont);\n\t\tscrollPane.setBorder(border);\n\t\tscrollPane.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tstallsTableScrollBar \u003d scrollPane.getVerticalScrollBar();\n\n\t\treturn scrollPane;\n\t}\n\n\tprivate JPanel createRecentStatsFrame()\n\t{\n\t\tJPanel statsFrame \u003d new JPanel();\n\t\tBoxLayout boxLayout \u003d new BoxLayout(statsFrame, BoxLayout.Y_AXIS);\n\t\tstatsFrame.setLayout(boxLayout);\n\t\tTitledBorder border \u003d BorderFactory.createTitledBorder(new LineBorder(Color.BLACK), \"Recent Times\");\n\t\tborder.setTitleFont(tableTitleFont);\n\t\tstatsFrame.setBorder(border);\n\n\t\tstatsTable \u003d new JTable();\n\t\tString[] columnNames \u003d {\"Room\", \"Boss\", \"Waves\", \"Pre\", \"1-12\", \"13-19\", \"21\", \"22-27\", \"28\", \"29\", \"30\", \"bigs22\", \"bigs29\", \"bigs30\", \"bigs31\"};\n\t\tstatsTableModel \u003d new DefaultTableModel(columnNames, 0);\n\t\tstatsTable.setModel(statsTableModel);\n\t\tstatsTable.getColumnModel().getColumn(0).setPreferredWidth(60);\n\t\tstatsTable.getColumnModel().getColumn(1).setPreferredWidth(60);\n\t\tstatsTable.getColumnModel().getColumn(2).setPreferredWidth(60);\n\t\tstatsTable.getColumnModel().getColumn(3).setPreferredWidth(30);\n\t\tstatsTable.getColumnModel().getColumn(4).setPreferredWidth(40);\n\t\tstatsTable.getColumnModel().getColumn(5).setPreferredWidth(40);\n\t\tstatsTable.getColumnModel().getColumn(6).setPreferredWidth(30);\n\t\tstatsTable.getColumnModel().getColumn(7).setPreferredWidth(40);\n\t\tstatsTable.getColumnModel().getColumn(8).setPreferredWidth(30);\n\t\tstatsTable.getColumnModel().getColumn(9).setPreferredWidth(30);\n\t\tstatsTable.getColumnModel().getColumn(10).setPreferredWidth(30);\n\t\tstatsTable.getColumnModel().getColumn(11).setPreferredWidth(40);\n\t\tstatsTable.getColumnModel().getColumn(12).setPreferredWidth(40);\n\t\tstatsTable.getColumnModel().getColumn(13).setPreferredWidth(40);\n\t\tstatsTable.getColumnModel().getColumn(14).setPreferredWidth(40);\n\n\t\tstatsTable.getTableHeader().setReorderingAllowed(false);\n\t\tstatsTable.setDefaultEditor(Object.class, null);\n\t\tstatsTable.setPreferredScrollableViewportSize(new Dimension(0, 325));\n\t\tstatsTable.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);\n\t\tstatsTable.setRowHeight(25);\n\t\tstatsTable.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tstatsTable.setFont(tableFont);\n\t\tstatsTable.getTableHeader().setFont(tableHeaderFont);\n\t\tstatsTable.setRowSelectionAllowed(false);\n\t\tstatsTable.setCellSelectionEnabled(false);\n\t\tstatsTable.setShowGrid(false);\n\t\tstatsTable.setFillsViewportHeight(true);\n\n\t\tDefaultTableCellRenderer cellRenderer \u003d new DefaultTableCellRenderer();\n\t\tcellRenderer.setVerticalAlignment(JLabel.CENTER);\n\t\tcellRenderer.setHorizontalAlignment(JLabel.CENTER);\n\t\tfor (int columnIndex \u003d 0; columnIndex \u003c statsTableModel.getColumnCount(); columnIndex++)\n\t\t{\n\t\t\tstatsTable.getColumnModel().getColumn(columnIndex).setCellRenderer(cellRenderer);\n\t\t}\n\n\t\tJScrollPane scrollPane \u003d new JScrollPane(\n\t\t\tstatsTable,\n\t\t\tJScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED,\n\t\t\tJScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS\n\t\t);\n\t\tscrollPane.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tstatsTableScrollBar \u003d scrollPane.getVerticalScrollBar();\n\t\tstatsFrame.add(scrollPane);\n\n\t\tJPanel statsButtonFrame \u003d new JPanel();\n\t\tstatsButtonFrame.setLayout(new GridLayout(1, 2));\n\t\tJButton buttonCopyTable \u003d new JButton(\"Copy\");\n\t\tJButton buttonClearTable \u003d new JButton(\"Clear\");\n\t\tbuttonCopyTable.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));\n\t\tbuttonClearTable.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));\n\t\tbuttonCopyTable.setFocusable(false);\n\t\tbuttonClearTable.setFocusable(false);\n\t\tbuttonCopyTable.setPreferredSize(new Dimension(40, 25));\n\t\tbuttonClearTable.setPreferredSize(new Dimension(40, 25));\n\t\tbuttonCopyTable.setFont(buttonFont);\n\t\tbuttonClearTable.setFont(buttonFont);\n\t\tbuttonCopyTable.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tbuttonClearTable.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tbuttonCopyTable.addActionListener(e -\u003e _copyToClipboard(statsTable));\n\t\tbuttonClearTable.addActionListener(e -\u003e _resetStatsTable());\n\t\tstatsButtonFrame.add(buttonCopyTable);\n\t\tstatsButtonFrame.add(buttonClearTable);\n\t\tstatsFrame.add(Box.createRigidArea(new Dimension(0, 5)));\n\t\tstatsFrame.add(statsButtonFrame);\n\n\t\treturn statsFrame;\n\t}\n\n\tprivate void _copyToClipboard(JTable table)\n\t{\n\t\tStringBuffer sbf \u003d new StringBuffer();\n\t\ttable.selectAll();\n\t\tint numCols \u003d table.getSelectedColumnCount();\n\t\tint numRows \u003d table.getSelectedRowCount();\n\t\tint[] selectedRows \u003d table.getSelectedRows();\n\t\tint[] selectsColumns \u003d table.getSelectedColumns();\n\t\ttable.clearSelection();\n\t\tfor (int i \u003d 0; i \u003c numCols; i++)\n\t\t{\n\t\t\tsbf.append(statsTable.getModel().getColumnName(i));\n\t\t\tsbf.append(\"\\t\");\n\t\t}\n\t\tsbf.append(\"\\n\");\n\t\tfor (int i \u003d 0; i \u003c numRows; i++)\n\t\t{\n\t\t\tfor (int j \u003d 0; j \u003c numCols; j++)\n\t\t\t{\n\t\t\t\tsbf.append(table.getValueAt(selectedRows[i], selectsColumns[j]));\n\t\t\t\tif (j \u003c numCols - 1)\n\t\t\t\t{\n\t\t\t\t\tsbf.append(\"\\t\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tsbf.append(\"\\n\");\n\t\t}\n\t\tStringSelection data \u003d new StringSelection(sbf.toString());\n\t\tToolkit.getDefaultToolkit().getSystemClipboard().setContents(data, data);\n\t}\n\n\tprivate void _resetStatsTable()\n\t{\n\t\tif (statsTableModel.getRowCount() \u003e 0)\n\t\t{\n\t\t\tfor (int i \u003d statsTableModel.getRowCount() - 1; i \u003e -1; i--)\n\t\t\t{\n\t\t\t\tstatsTableModel.removeRow(i);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void _configureMageSwaps()\n\t{\n\t\tNyloerPlugin.log.debug(\"Configuring mage swaps.\");\n\t\tString currentRole \u003d plugin.roleSwapper.getCurrentRole();\n\t\t_resetRolesSelection();\n\t\tif ((currentRole \u003d\u003d null) || (!currentRole.equals(\"mage\")))\n\t\t{\n\t\t\tconfig.setPreviousRole(\"mage\");\n\t\t\tplugin.roleSwapper.setCurrentRole(\"mage\");\n\t\t\tplugin.nyloerTileOverlay.setRenderMage(config.mageHighlightMageTiles());\n\t\t\tplugin.nyloerTileOverlay.setRenderRange(config.mageHighlightRangeTiles());\n\t\t\tplugin.nyloerTileOverlay.setRenderMelee(config.mageHighlightMeleeTiles());\n\n\t\t\tbuttonMageSwaps.setForeground(Color.CYAN);\n\t\t\tbuttonMageSwaps.setFont(buttonFont);\n\t\t}\n\t}\n\n\tprivate void _configureRangeSwaps()\n\t{\n\t\tNyloerPlugin.log.debug(\"Configuring range swaps.\");\n\t\tString currentRole \u003d plugin.roleSwapper.getCurrentRole();\n\t\t_resetRolesSelection();\n\t\tif ((currentRole \u003d\u003d null) || (!currentRole.equals(\"range\")))\n\t\t{\n\t\t\tconfig.setPreviousRole(\"range\");\n\t\t\tplugin.roleSwapper.setCurrentRole(\"range\");\n\t\t\tplugin.nyloerTileOverlay.setRenderMage(config.rangeHighlightMageTiles());\n\t\t\tplugin.nyloerTileOverlay.setRenderRange(config.rangeHighlightRangeTiles());\n\t\t\tplugin.nyloerTileOverlay.setRenderMelee(config.rangeHighlightMeleeTiles());\n\n\t\t\tbuttonRangeSwaps.setForeground(Color.GREEN);\n\t\t\tbuttonRangeSwaps.setFont(buttonFont);\n\t\t}\n\t}\n\n\tprivate void _configureMeleeSwaps()\n\t{\n\t\tNyloerPlugin.log.debug(\"Configuring melee swaps.\");\n\t\tString currentRole \u003d plugin.roleSwapper.getCurrentRole();\n\t\t_resetRolesSelection();\n\t\tif ((currentRole \u003d\u003d null) || (!currentRole.equals(\"melee\")))\n\t\t{\n\t\t\tconfig.setPreviousRole(\"melee\");\n\t\t\tplugin.roleSwapper.setCurrentRole(\"melee\");\n\t\t\tplugin.nyloerTileOverlay.setRenderMage(config.meleeHighlightMageTiles());\n\t\t\tplugin.nyloerTileOverlay.setRenderRange(config.meleeHighlightRangeTiles());\n\t\t\tplugin.nyloerTileOverlay.setRenderMelee(config.meleeHighlightMeleeTiles());\n\n\t\t\tbuttonMeleeSwaps.setForeground(Color.WHITE);\n\t\t\tbuttonMeleeSwaps.setFont(buttonFont);\n\t\t}\n\t}\n\n\tprivate void _configureCustomSwaps()\n\t{\n\t\tNyloerPlugin.log.debug(\"Configured custom role swaps.\");\n\t\tString currentRole \u003d plugin.roleSwapper.getCurrentRole();\n\t\t_resetRolesSelection();\n\t\tif ((currentRole \u003d\u003d null) || (!currentRole.equals(\"custom\")))\n\t\t{\n\t\t\tconfig.setPreviousRole(\"custom\");\n\t\t\tplugin.roleSwapper.setCurrentRole(\"custom\");\n\t\t\tplugin.nyloerTileOverlay.setRenderMage(config.customHighlightMageTiles());\n\t\t\tplugin.nyloerTileOverlay.setRenderRange(config.customHighlightRangeTiles());\n\t\t\tplugin.nyloerTileOverlay.setRenderMelee(config.customHighlightMeleeTiles());\n\n\t\t\tbuttonCustomSwaps.setForeground(Color.MAGENTA);\n\t\t\tbuttonCustomSwaps.setFont(buttonFont);\n\t\t}\n\t}\n\n\tprivate void _resetRolesSelection()\n\t{\n\t\tconfig.setPreviousRole(\"\");\n\t\tplugin.roleSwapper.setCurrentRole(null);\n\n\t\tplugin.nyloerTileOverlay.setRenderMage(false);\n\t\tplugin.nyloerTileOverlay.setRenderRange(false);\n\t\tplugin.nyloerTileOverlay.setRenderMelee(false);\n\n\t\tbuttonMageSwaps.setForeground(Color.GRAY);\n\t\tbuttonRangeSwaps.setForeground(Color.GRAY);\n\t\tbuttonMeleeSwaps.setForeground(Color.GRAY);\n\t\tbuttonCustomSwaps.setForeground(Color.GRAY);\n\t\tbuttonMageSwaps.setFont(buttonFont);\n\t\tbuttonRangeSwaps.setFont(buttonFont);\n\t\tbuttonMeleeSwaps.setFont(buttonFont);\n\t\tbuttonCustomSwaps.setFont(buttonFont);\n\t}\n}","filePath":"src\\main\\java\\com\\nyloer\\NyloerSidePanel.java"},{"fileName":"NyloerOverlay.java","content":"package com.nyloer.overlays;\n\nimport com.google.common.collect.ArrayListMultimap;\nimport com.nyloer.NyloerConfig;\nimport com.nyloer.NyloerPlugin;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.RenderingHints;\nimport java.util.stream.IntStream;\nimport javax.inject.Inject;\nimport net.runelite.api.Point;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.game.NpcUtil;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\n\npublic class NyloerOverlay extends Overlay\n{\n\tpublic ArrayListMultimap\u003cWorldPoint, NyloerPlugin.NyloerNpc\u003e nyloers;\n\tprivate final NyloerConfig config;\n\tprivate final NyloerPlugin plugin;\n\tprivate final NpcUtil npcUtil;\n\n\t@Inject\n\tprivate NyloerOverlay(NyloerPlugin plugin, NyloerConfig config, NpcUtil npcUtil)\n\t{\n\t\tthis.setPosition(OverlayPosition.DYNAMIC);\n\t\tthis.setPriority(OverlayPriority.HIGH);\n\t\tthis.setLayer(OverlayLayer.UNDER_WIDGETS);\n\t\tthis.npcUtil \u003d npcUtil;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t\tthis.nyloers \u003d ArrayListMultimap.create();\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tthis.nyloers.clear();\n\t\tif (this.plugin.getNylocasAliveCount() \u003d\u003d 0)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\tnyloers \u003d ArrayListMultimap.create();\n\t\tint length \u003d this.plugin.getNyloers().size();\n\t\tfor (int i \u003d length - 1; i \u003e\u003d 0; i--)\n\t\t{\n\t\t\tNyloerPlugin.NyloerNpc nyloer \u003d this.plugin.getNyloers().get(i);\n\t\t\tif (nyloer.isAlive() \u0026\u0026 !npcUtil.isDying(nyloer.getNpc()))\n\t\t\t{\n\t\t\t\tnyloers.put(nyloer.getNpc().getWorldLocation(), nyloer);\n\t\t\t}\n\t\t}\n\t\tif (!nyloers.isEmpty())\n\t\t{\n\t\t\tgraphics.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);\n\t\t\tnyloers.asMap().forEach(\n\t\t\t\t(worldPoint, npcs) -\u003e {\n\t\t\t\t\tint offset \u003d 0;\n\t\t\t\t\tfor (NyloerPlugin.NyloerNpc nyloer : npcs)\n\t\t\t\t\t{\n\t\t\t\t\t\tgraphics.setFont(nyloer.getFont());\n\t\t\t\t\t\tthis.draw(graphics, nyloer, offset);\n\t\t\t\t\t\toffset +\u003d graphics.getFontMetrics().getHeight();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate void draw(Graphics2D graphics, NyloerPlugin.NyloerNpc nyloer, int offset)\n\t{\n\t\tString prefix;\n\t\tString text;\n\t\tif (nyloer.isSplit())\n\t\t{\n\t\t\tprefix \u003d config.splitPrefix();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tprefix \u003d config.wavePrefix();\n\t\t}\n\t\tif (config.showNylocasWave())\n\t\t{\n\t\t\ttext \u003d prefix + nyloer.getWaveSpawned();\n\t\t}\n\t\telse if (config.showNylocasSymbol())\n\t\t{\n\t\t\ttext \u003d prefix + nyloer.getNyloerSymbol();\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttext \u003d prefix;\n\t\t}\n\t\tPoint canvasTextLocation \u003d nyloer.getNpc().getCanvasTextLocation(graphics, text, 0);\n\t\tif (canvasTextLocation \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tint x \u003d canvasTextLocation.getX();\n\t\tint y \u003d canvasTextLocation.getY() + offset;\n\t\tgraphics.setColor(nyloer.getOutlineColor());\n\t\tIntStream.range(-1, 2).forEachOrdered(ex -\u003e {\n\t\t\tIntStream.range(-1, 2).forEachOrdered(ey -\u003e {\n\t\t\t\tif (ex !\u003d 0 \u0026\u0026 ey !\u003d 0)\n\t\t\t\t{\n\t\t\t\t\tgraphics.drawString(text, x + ex, y + ey);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tColor color \u003d nyloer.getColor();\n\t\tif ((nyloer.getTickSpawned() \u003c\u003d plugin.makeDarkerT) || (nyloer.isColorDarker()))\n\t\t{\n\t\t\tcolor \u003d color.darker().darker();\n\t\t}\n\t\tgraphics.setColor(color);\n\t\tgraphics.drawString(text, x, y);\n\t}\n}\n","filePath":"src\\main\\java\\com\\nyloer\\overlays\\NyloerOverlay.java"},{"fileName":"NyloerTileOverlay.java","content":"package com.nyloer.overlays;\n\nimport com.nyloer.NyloerConfig;\nimport com.nyloer.NyloerPlugin;\nimport java.awt.BasicStroke;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.Polygon;\nimport java.awt.Shape;\nimport java.awt.Stroke;\nimport javax.inject.Inject;\nimport lombok.Setter;\nimport net.runelite.api.Actor;\nimport net.runelite.api.NPC;\nimport net.runelite.api.NPCComposition;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.game.NpcUtil;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayUtil;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\n\n\npublic class NyloerTileOverlay extends Overlay\n{\n\tprivate final NyloerConfig config;\n\tprivate final NyloerPlugin plugin;\n\tprivate final NpcUtil npcUtil;\n\n\tStroke highlightWidth;\n\n\t@Setter\n\tprivate boolean renderMage;\n\t@Setter\n\tprivate boolean renderRange;\n\t@Setter\n\tprivate boolean renderMelee;\n\n\t@Inject\n\tprivate NyloerTileOverlay(NyloerPlugin plugin, NyloerConfig config, NpcUtil npcUtil)\n\t{\n\t\tthis.setPosition(OverlayPosition.DYNAMIC);\n\t\tthis.setPriority(OverlayPriority.HIGH);\n\t\tthis.setLayer(OverlayLayer.ABOVE_SCENE);\n\t\tthis.npcUtil \u003d npcUtil;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\n\t\tthis.renderMage \u003d false;\n\t\tthis.renderRange \u003d false;\n\t\tthis.renderMelee \u003d false;\n\n\t\tthis.highlightWidth \u003d new BasicStroke((float) config.tileHighlightWidth());\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged configChanged)\n\t{\n\t\tif (!configChanged.getGroup().equals(NyloerConfig.GROUP))\n\t\t{\n\t\t\tthis.highlightWidth \u003d new BasicStroke((float) config.tileHighlightWidth());\n\t\t}\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (this.plugin.getNylocasAliveCount() \u003d\u003d 0)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\tfor (NyloerPlugin.NyloerNpc nyloer : this.plugin.getNyloersIndexMap().values())\n\t\t{\n\t\t\tif ((nyloer.isAlive()) \u0026\u0026 (!npcUtil.isDying(nyloer.getNpc())))\n\t\t\t{\n\t\t\t\tswitch (nyloer.getStyle())\n\t\t\t\t{\n\t\t\t\t\tcase \"mage\":\n\t\t\t\t\t\tif (renderMage)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (config.displayMageTilesAsTrueTiles())\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdrawTrueTile(graphics, nyloer);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdrawTile(graphics, nyloer);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"range\":\n\t\t\t\t\t\tif (renderRange)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (config.displayRangeTilesAsTrueTiles())\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdrawTrueTile(graphics, nyloer);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdrawTile(graphics, nyloer);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"melee\":\n\t\t\t\t\t\tif (renderMelee)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (config.displayMeleeTilesAsTrueTiles())\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdrawTrueTile(graphics, nyloer);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdrawTile(graphics, nyloer);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate void drawTile(Graphics2D graphics, NyloerPlugin.NyloerNpc nyloer)\n\t{\n\t\tPolygon polygon \u003d nyloer.getNpc().getCanvasTilePoly();\n\t\tif (polygon !\u003d null)\n\t\t{\n\t\t\tOverlayUtil.renderPolygon(graphics, polygon, nyloer.getColor(), highlightWidth);\n\t\t}\n\t}\n\n\tprivate void drawTrueTile(Graphics2D graphics, NyloerPlugin.NyloerNpc nyloer)\n\t{\n\t\tNPC npc \u003d nyloer.getNpc();\n\t\tNPCComposition npcComposition \u003d npc.getTransformedComposition();\n\t\tLocalPoint lp \u003d LocalPoint.fromWorld(plugin.client, npc.getWorldLocation());\n\t\tif ((lp !\u003d null) \u0026\u0026 (npcComposition !\u003d null))\n\t\t{\n\t\t\tfinal int size \u003d npcComposition.getSize();\n\t\t\tfinal LocalPoint centerLp \u003d lp.plus(\n\t\t\t\tPerspective.LOCAL_TILE_SIZE * (size - 1) / 2,\n\t\t\t\tPerspective.LOCAL_TILE_SIZE * (size - 1) / 2);\n\t\t\tPolygon tilePoly \u003d Perspective.getCanvasTileAreaPoly(plugin.client, centerLp, size);\n\t\t\trenderPoly(graphics, nyloer.getColor(), highlightWidth, tilePoly);\n\t\t}\n\t}\n\n\tprivate void renderPoly(Graphics2D graphics, Color borderColor, Stroke borderStroke, Shape polygon)\n\t{\n\t\tif (polygon !\u003d null)\n\t\t{\n\t\t\tgraphics.setColor(borderColor);\n\t\t\tgraphics.setStroke(borderStroke);\n\t\t\tgraphics.draw(polygon);\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\nyloer\\overlays\\NyloerTileOverlay.java"},{"fileName":"MatchType.java","content":"/*\nBSD 2-Clause License\n\nCopyright (c) 2021, geheur\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n1. Redistributions of source code must retain the above copyright notice, this\n   list of conditions and the following disclaimer.\n\n2. Redistributions in binary form must reproduce the above copyright notice,\n   this list of conditions and the following disclaimer in the documentation\n   and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage com.nyloer.roleswapper;\n\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\nenum MatchType\n{\n\tEQUALS,\n\tSTARTS_WITH,\n\tENDS_WITH,\n\tCONTAINS,\n\tWILDCARD,\n\tIGNORE,\n\t;\n\n\tpublic boolean matches(String menuText, String swapText)\n\t{\n\t\tswitch (this)\n\t\t{\n\t\t\tcase IGNORE:\n\t\t\t\treturn true;\n\t\t\tcase EQUALS:\n\t\t\t\treturn menuText.equals(swapText);\n\t\t\tcase STARTS_WITH:\n\t\t\t\treturn menuText.startsWith(swapText);\n\t\t\tcase ENDS_WITH:\n\t\t\t\treturn menuText.endsWith(swapText);\n\t\t\tcase CONTAINS:\n\t\t\t\treturn menuText.contains(swapText);\n\t\t\tcase WILDCARD:\n\t\t\t\treturn menuText.matches(swapText);\n\t\t\tdefault:\n\t\t\t\t// shouldn\u0027t happen.\n\t\t\t\tthrow new IllegalStateException();\n\t\t}\n\t}\n\n\tpublic static MatchType getType(String s)\n\t{\n\t\tif (s \u003d\u003d null)\n\t\t{\n\t\t\treturn MatchType.IGNORE;\n\t\t}\n\n\t\tint star \u003d s.indexOf(\u0027*\u0027);\n\t\tif (star \u003d\u003d -1)\n\t\t{\n\t\t\treturn MatchType.EQUALS;\n\t\t}\n\t\tif (star \u003d\u003d 0)\n\t\t{\n\t\t\tif (s.length() \u003d\u003d 1)\n\t\t\t{\n\t\t\t\treturn MatchType.IGNORE;\n\t\t\t}\n\t\t\tstar \u003d s.indexOf(\u0027*\u0027, star + 1);\n\t\t\tif (star \u003d\u003d -1)\n\t\t\t{\n\t\t\t\treturn MatchType.ENDS_WITH;\n\t\t\t}\n\t\t\tif (star \u003d\u003d s.length() - 1)\n\t\t\t{\n\t\t\t\treturn MatchType.CONTAINS;\n\t\t\t}\n\t\t}\n\t\telse if (star \u003d\u003d s.length() - 1)\n\t\t{\n\t\t\treturn MatchType.STARTS_WITH;\n\t\t}\n\n\t\treturn MatchType.WILDCARD;\n\t}\n\n\tpublic static String prepareMatch(String option, MatchType optionType)\n\t{\n\t\treturn optionType \u003d\u003d MatchType.WILDCARD ? generateWildcardMatcher(option) : removeStars(option);\n\t}\n\n\tprivate static String removeStars(String s)\n\t{\n\t\treturn s \u003d\u003d null ? s : s.replaceAll(\"\\\\*\", \"\");\n\t}\n\n\t// copied from runelite.\n\tprivate static final Pattern WILDCARD_PATTERN \u003d Pattern.compile(\"(?i)[^*]+|(\\\\*)\");\n\n\tprivate static String generateWildcardMatcher(String pattern)\n\t{\n\t\tfinal Matcher matcher \u003d WILDCARD_PATTERN.matcher(pattern);\n\t\tfinal StringBuffer buffer \u003d new StringBuffer();\n\n\t\tbuffer.append(\"(?i)\");\n\t\twhile (matcher.find())\n\t\t{\n\t\t\tif (matcher.group(1) !\u003d null)\n\t\t\t{\n\t\t\t\tmatcher.appendReplacement(buffer, \".*\");\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmatcher.appendReplacement(buffer, Matcher.quoteReplacement(Pattern.quote(matcher.group(0))));\n\t\t\t}\n\t\t}\n\n\t\tmatcher.appendTail(buffer);\n\t\treturn buffer.toString();\n\t}\n}","filePath":"src\\main\\java\\com\\nyloer\\roleswapper\\MatchType.java"},{"fileName":"RoleSwapper.java","content":"/*\nBSD 2-Clause License\n\nCopyright (c) 2021, geheur\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n1. Redistributions of source code must retain the above copyright notice, this\nlist of conditions and the following disclaimer.\n\n2. Redistributions in binary form must reproduce the above copyright notice,\nthis list of conditions and the following disclaimer in the documentation\nand/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\npackage com.nyloer.roleswapper;\n\nimport com.nyloer.NyloerConfig;\nimport com.nyloer.NyloerPlugin;\nimport java.util.Collection;\nimport java.util.List;\nimport java.util.ArrayList;\nimport javax.inject.Inject;\nimport lombok.EqualsAndHashCode;\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\nimport lombok.Setter;\nimport lombok.ToString;\nimport net.runelite.api.Client;\nimport net.runelite.api.KeyCode;\nimport net.runelite.api.MenuAction;\nimport static net.runelite.api.MenuAction.WIDGET_TARGET_ON_NPC;\nimport static net.runelite.api.MenuAction.WIDGET_TARGET_ON_PLAYER;\nimport net.runelite.api.events.PostMenuSort;\nimport net.runelite.api.widgets.Widget;\nimport static net.runelite.api.widgets.InterfaceID.SPELLBOOK;\nimport static net.runelite.api.MenuAction.GAME_OBJECT_FIFTH_OPTION;\nimport static net.runelite.api.MenuAction.PLAYER_EIGHTH_OPTION;\nimport static net.runelite.api.MenuAction.PLAYER_FIRST_OPTION;\nimport net.runelite.api.MenuEntry;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.util.Text;\n\n\npublic class RoleSwapper\n{\n\tClient client;\n\tNyloerPlugin plugin;\n\tNyloerConfig config;\n\n\t@Getter\n\t@Setter\n\tString currentRole;\n\n\tfinal List\u003cCustomSwap\u003e mageSwaps \u003d new ArrayList\u003c\u003e();\n\tfinal List\u003cCustomSwap\u003e rangeSwaps \u003d new ArrayList\u003c\u003e();\n\tfinal List\u003cCustomSwap\u003e meleeSwaps \u003d new ArrayList\u003c\u003e();\n\tfinal List\u003cCustomSwap\u003e customSwaps \u003d new ArrayList\u003c\u003e();\n\n\tfinal List\u003cCustomSwap\u003e mageShiftSwaps \u003d new ArrayList\u003c\u003e();\n\tfinal List\u003cCustomSwap\u003e rangeShiftSwaps \u003d new ArrayList\u003c\u003e();\n\tfinal List\u003cCustomSwap\u003e meleeShiftSwaps \u003d new ArrayList\u003c\u003e();\n\tfinal List\u003cCustomSwap\u003e customShiftSwaps \u003d new ArrayList\u003c\u003e();\n\n\t@Inject\n\tprotected RoleSwapper(NyloerPlugin plugin, NyloerConfig config)\n\t{\n\t\tthis.client \u003d plugin.client;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t\tthis.currentRole \u003d null;\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged configChanged)\n\t{\n\t\tif (!configChanged.getGroup().equals(NyloerConfig.GROUP))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\treloadSwaps();\n\t}\n\n\tpublic void reloadSwaps()\n\t{\n\t\tclearSwaps();\n\t\tmageSwaps.addAll(loadConfigSwaps(config.mageRoleSwaps(), false));\n\t\tmageShiftSwaps.addAll(loadConfigSwaps(config.mageRoleShiftSwaps(), true));\n\t\trangeSwaps.addAll(loadConfigSwaps(config.rangeRoleSwaps(), false));\n\t\trangeShiftSwaps.addAll(loadConfigSwaps(config.rangeRoleShiftSwaps(), true));\n\t\tmeleeSwaps.addAll(loadConfigSwaps(config.meleeRoleSwaps(), false));\n\t\tmeleeShiftSwaps.addAll(loadConfigSwaps(config.meleeRoleShiftSwaps(), true));\n\t\tcustomSwaps.addAll(loadConfigSwaps(config.customRoleSwaps(), false));\n\t\tcustomShiftSwaps.addAll(loadConfigSwaps(config.customRoleShiftSwaps(), true));\n\t}\n\n\tprivate void clearSwaps()\n\t{\n\t\tmageSwaps.clear();\n\t\tmageShiftSwaps.clear();\n\t\trangeSwaps.clear();\n\t\trangeShiftSwaps.clear();\n\t\tmeleeSwaps.clear();\n\t\tmeleeShiftSwaps.clear();\n\t\tcustomSwaps.clear();\n\t\tcustomShiftSwaps.clear();\n\t}\n\n\tprivate Collection\u003c? extends CustomSwap\u003e loadConfigSwaps(String customSwaps, boolean shiftSwaps)\n\t{\n\t\tList\u003cCustomSwap\u003e swaps \u003d new ArrayList\u003c\u003e();\n\t\tfor (String customSwap : customSwaps.split(\"\\n\"))\n\t\t{\n\t\t\tif (customSwap.trim().equals(\"\"))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tswaps.add(CustomSwap.fromString(customSwap));\n\t\t}\n\t\tif (!shiftSwaps)\n\t\t{\n\t\t\tswaps.add(CustomSwap.fromString(\"use,special attack\"));\n\t\t\tswaps.add(CustomSwap.fromString(\"Activate, Quick-Prayers\"));\n\t\t\tswaps.add(CustomSwap.fromString(\"Deactivate, Quick-Prayers\"));\n\t\t}\n\n\t\treturn swaps;\n\t}\n\n\t@Subscribe(priority \u003d -2)\n\tpublic void onPostMenuSort(PostMenuSort e)\n\t{\n\t\tswapEntries();\n\t}\n\n\tpublic void swapEntries()\n\t{\n\t\tif (currentRole \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tMenuEntry[] menuEntries \u003d client.getMenuEntries();\n\t\tif (menuEntries.length \u003d\u003d 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tint topEntryIndex \u003d menuEntries.length - 1;\n\t\tMenuEntry topEntry \u003d menuEntries[topEntryIndex];\n\t\tif (_mayNotBeLeftClick(topEntry))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tint entryIndex \u003d getEntryIndexToSwap(menuEntries);\n\t\tif (entryIndex \u003e\u003d 0)\n\t\t{\n\t\t\tMenuEntry entryToSwap \u003d menuEntries[entryIndex];\n\t\t\tif (_isProtected(topEntry) || _isProtected(entryToSwap))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// minimap orbs\n\t\t\tif (topEntryIndex \u003e entryIndex)\n\t\t\t{\n\t\t\t\tmenuEntries[topEntryIndex] \u003d entryToSwap;\n\t\t\t\tmenuEntries[entryIndex] \u003d topEntry;\n\t\t\t\t// the client will open the right-click menu on left-click if the entry at the top is a CC_OP_LOW_PRIORITY.\n\t\t\t\tif (entryToSwap.getType() \u003d\u003d MenuAction.CC_OP_LOW_PRIORITY)\n\t\t\t\t{\n\t\t\t\t\tentryToSwap.setType(MenuAction.CC_OP);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tclient.setMenuEntries(menuEntries);\n\t}\n\n\tprivate List\u003cCustomSwap\u003e getCurrentSwaps()\n\t{\n\t\tif (isShiftPressed())\n\t\t{\n\t\t\tswitch (currentRole)\n\t\t\t{\n\t\t\t\tcase \"mage\":\n\t\t\t\t\treturn mageShiftSwaps;\n\t\t\t\tcase \"range\":\n\t\t\t\t\treturn rangeShiftSwaps;\n\t\t\t\tcase \"melee\":\n\t\t\t\t\treturn meleeShiftSwaps;\n\t\t\t\tcase \"custom\":\n\t\t\t\t\treturn customShiftSwaps;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tswitch (currentRole)\n\t\t\t{\n\t\t\t\tcase \"mage\":\n\t\t\t\t\treturn mageSwaps;\n\t\t\t\tcase \"range\":\n\t\t\t\t\treturn rangeSwaps;\n\t\t\t\tcase \"melee\":\n\t\t\t\t\treturn meleeSwaps;\n\t\t\t\tcase \"custom\":\n\t\t\t\t\treturn customSwaps;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate int getEntryIndexToSwap(MenuEntry[] menuEntries)\n\t{\n\t\tList\u003cCustomSwap\u003e currentSwaps \u003d getCurrentSwaps();\n\t\tif (currentSwaps \u003d\u003d null)\n\t\t{\n\t\t\treturn -1;\n\t\t}\n\t\tint entryIndex \u003d -1;\n\t\tint latestMatchingSwapIndex \u003d -1;\n\t\tMenuEntry topEntry \u003d menuEntries[menuEntries.length - 1];\n\t\tString topEntryOption \u003d Text.standardize(topEntry.getOption());\n\t\tString topEntryTarget \u003d Text.standardize(topEntry.getTarget());\n\n\t\t// prefer to swap menu entries that are already at or near the top of the list.\n\t\tfor (int i \u003d menuEntries.length - 1; i \u003e\u003d 0; i--)\n\t\t{\n\t\t\tMenuEntry entry \u003d menuEntries[i];\n\t\t\tString option \u003d Text.standardize(entry.getOption());\n\t\t\tString target \u003d Text.standardize(entry.getTarget());\n\t\t\tint swapIndex \u003d matches(option, target, topEntryOption, topEntryTarget, currentSwaps);\n\t\t\tif (swapIndex \u003e latestMatchingSwapIndex)\n\t\t\t{\n\t\t\t\tentryIndex \u003d i;\n\t\t\t\tlatestMatchingSwapIndex \u003d swapIndex;\n\t\t\t}\n\t\t}\n\t\treturn entryIndex;\n\t}\n\n\tprivate boolean _mayNotBeLeftClick(MenuEntry entry)\n\t{\n\t\tMenuAction type \u003d entry.getType();\n\t\tif (type.getId() \u003e\u003d PLAYER_FIRST_OPTION.getId() \u0026\u0026 type.getId() \u003c\u003d PLAYER_EIGHTH_OPTION.getId())\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\tif (type \u003d\u003d MenuAction.NPC_FOURTH_OPTION || type \u003d\u003d MenuAction.NPC_FIFTH_OPTION)\n\t\t{\n\t\t\tif (entry.getNpc() !\u003d null)\n\t\t\t{\n\t\t\t\tString[] actions \u003d entry.getNpc().getTransformedComposition().getActions();\n\t\t\t\tif (\"Lure\".equals(actions[3]) || \"Knock-out\".equals(actions[4]))\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (type \u003d\u003d GAME_OBJECT_FIFTH_OPTION)\n\t\t{\n\t\t\treturn client.getVarbitValue(2176) \u003d\u003d 1; // in building mode.\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate boolean isShiftPressed()\n\t{\n\t\treturn client.isKeyPressed(KeyCode.KC_SHIFT);\n\t}\n\n\tprivate boolean _isProtected(MenuEntry entry)\n\t{\n\t\tMenuAction type \u003d entry.getType();\n\t\tif (type \u003d\u003d WIDGET_TARGET_ON_PLAYER || type \u003d\u003d WIDGET_TARGET_ON_NPC)\n\t\t{\n\t\t\tWidget selectedWidget \u003d client.getSelectedWidget();\n\t\t\tif ((selectedWidget !\u003d null) \u0026\u0026 (selectedWidget.getId() \u003d\u003d SPELLBOOK))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn _mayNotBeLeftClick(entry);\n\t}\n\n\tprivate static int matches(String entryOption, String entryTarget, String topEntryOption, String topEntryTarget, List\u003cCustomSwap\u003e swaps)\n\t{\n\t\tfor (int i \u003d 0; i \u003c swaps.size(); i++)\n\t\t{\n\t\t\tCustomSwap swap \u003d swaps.get(i);\n\t\t\tif (swap.matches(entryOption, entryTarget, topEntryOption, topEntryTarget))\n\t\t\t{\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n\n\t@Getter\n\t@ToString\n\t@RequiredArgsConstructor\n\t@EqualsAndHashCode\n\tstatic class CustomSwap\n\t{\n\t\tprivate final String option;\n\t\tprivate final String target;\n\t\tprivate final String topOption;\n\t\tprivate final String topTarget;\n\n\t\tprivate final MatchType optionType;\n\t\tprivate final MatchType targetType;\n\t\tprivate final MatchType topOptionType;\n\t\tprivate final MatchType topTargetType;\n\n\t\tpublic static CustomSwap fromString(String s)\n\t\t{\n\t\t\tString[] split \u003d s.split(\",\");\n\t\t\treturn new CustomSwap(\n\t\t\t\tsplit[0].toLowerCase().trim(),\n\t\t\t\tsplit.length \u003e 1 ? split[1].toLowerCase().trim() : \"\",\n\t\t\t\tsplit.length \u003e 2 ? split[2].toLowerCase().trim() : null,\n\t\t\t\tsplit.length \u003e 3 ? split[3].toLowerCase().trim() : null\n\t\t\t);\n\t\t}\n\n\t\tCustomSwap(String option, String target)\n\t\t{\n\t\t\tthis(option, target, null, null);\n\t\t}\n\n\t\tCustomSwap(String option, String target, String topOption, String topTarget)\n\t\t{\n\t\t\tthis.optionType \u003d MatchType.getType(option);\n\t\t\tthis.option \u003d MatchType.prepareMatch(option, optionType);\n\t\t\tthis.targetType \u003d MatchType.getType(target);\n\t\t\tthis.target \u003d MatchType.prepareMatch(target, targetType);\n\t\t\tthis.topOptionType \u003d MatchType.getType(topOption);\n\t\t\tthis.topOption \u003d MatchType.prepareMatch(topOption, topOptionType);\n\t\t\tthis.topTargetType \u003d MatchType.getType(topTarget);\n\t\t\tthis.topTarget \u003d MatchType.prepareMatch(topTarget, topTargetType);\n\t\t}\n\n\t\tboolean matches(String option, String target)\n\t\t{\n\t\t\treturn matches(option, target, \"\", \"\");\n\t\t}\n\n\t\tpublic boolean matches(String option, String target, String topOption, String topTarget)\n\t\t{\n\t\t\treturn optionType.matches(option, this.option) \u0026\u0026\n\t\t\t\ttargetType.matches(target, this.target) \u0026\u0026\n\t\t\t\ttopOptionType.matches(topOption, this.topOption) \u0026\u0026\n\t\t\t\ttopTargetType.matches(topTarget, this.topTarget);\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\nyloer\\roleswapper\\RoleSwapper.java"},{"fileName":"Stall.java","content":"package com.nyloer.stats;\n\nimport lombok.EqualsAndHashCode;\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n\n@Getter\n@RequiredArgsConstructor\n@EqualsAndHashCode\npublic\nclass Stall\n{\n\tprivate int wave;\n\tprivate int aliveCount;\n\tprivate int capSize;\n\tprivate int totalStalls;\n\n\tpublic Stall(int wave, int aliveCount, int capSize, int totalStalls)\n\t{\n\t\tthis.wave \u003d wave;\n\t\tthis.aliveCount \u003d aliveCount;\n\t\tthis.capSize \u003d capSize;\n\t\tthis.totalStalls \u003d totalStalls;\n\t}\n}","filePath":"src\\main\\java\\com\\nyloer\\stats\\Stall.java"},{"fileName":"Stats.java","content":"package com.nyloer.stats;\n\n\npublic class Stats\n{\n\tpublic String totalTime;\n\tpublic String bossTime;\n\tpublic String wavesTime;\n\n\tpublic int stallCountPre;\n\tpublic int stallCount1to12;\n\tpublic int stallCount13to19;\n\tpublic int stallCount21;\n\tpublic int stallCount22to27;\n\tpublic int stallCount28;\n\tpublic int stallCount29;\n\tpublic int stallCount30;\n\n\tpublic int bigsAlive22;\n\tpublic int bigsAlive29;\n\tpublic int bigsAlive30;\n\tpublic int bigsAlive31;\n\n\tpublic int[] bossRotation;\n\n\tStats()\n\t{\n\t\tbossRotation \u003d new int[3];\n\t\treset();\n\t}\n\n\tpublic void reset()\n\t{\n\t\ttotalTime \u003d \"\";\n\t\tbossTime \u003d \"\";\n\t\twavesTime \u003d \"\";\n\n\t\tbossRotation[0] \u003d 1;\n\t\tbossRotation[1] \u003d 0;\n\t\tbossRotation[2] \u003d 0;\n\n\t\tstallCountPre \u003d 0;\n\t\tstallCount1to12 \u003d 0;\n\t\tstallCount13to19 \u003d 0;\n\t\tstallCount21 \u003d 0;\n\t\tstallCount22to27 \u003d 0;\n\t\tstallCount28 \u003d 0;\n\t\tstallCount29 \u003d 0;\n\t\tstallCount30 \u003d 0;\n\n\t\tbigsAlive22 \u003d 0;\n\t\tbigsAlive29 \u003d 0;\n\t\tbigsAlive30 \u003d 0;\n\t\tbigsAlive31 \u003d 0;\n\t}\n}","filePath":"src\\main\\java\\com\\nyloer\\stats\\Stats.java"},{"fileName":"StatsHandler.java","content":"package com.nyloer.stats;\n\nimport com.nyloer.NyloerConfig;\nimport com.nyloer.NyloerPlugin;\nimport java.util.concurrent.TimeUnit;\nimport javax.inject.Inject;\nimport lombok.Getter;\nimport net.runelite.api.*;\nimport net.runelite.api.events.*;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.util.Text;\nimport java.util.*;\nimport java.util.regex.Pattern;\n\n\n@Getter\npublic class StatsHandler\n{\n\tprivate final Client client;\n\tprivate final NyloerPlugin plugin;\n\tprivate final NyloerConfig config;\n\n\tprivate int currentWave;\n\tprivate int capSize;\n\tprivate int capSizePostcap;\n\tprivate int ticksSinceLastWave;\n\n\tprivate final ArrayList\u003cStall\u003e stalls;\n\tprivate final Stats stats;\n\tprivate int w1T;\n\tprivate int lastNyloDeathT;\n\tprivate int bossSpawnT;\n\tprivate int bossDeathT;\n\n\tprivate static final Pattern NYLO_RETRY_MESSAGE \u003d Pattern.compile(\"You have failed. The vampyres take pity on you and allow you to try again...\");\n\tprivate static final Pattern NYLO_COMPLETE_MESSAGE \u003d Pattern.compile(\"Wave \u0027The Nylocas\u0027 \\\\(.*\\\\) complete!\");\n\n\tprivate static final HashMap\u003cInteger, Integer\u003e waveNaturalStalls;\n\tstatic\n\t{\n\t\twaveNaturalStalls \u003d new HashMap\u003c\u003e();\n\t\twaveNaturalStalls.put(1, 4);\n\t\twaveNaturalStalls.put(2, 4);\n\t\twaveNaturalStalls.put(3, 4);\n\t\twaveNaturalStalls.put(4, 4);\n\t\twaveNaturalStalls.put(5, 16);\n\n\t\twaveNaturalStalls.put(6, 4);\n\t\twaveNaturalStalls.put(7, 12);\n\t\twaveNaturalStalls.put(8, 4);\n\t\twaveNaturalStalls.put(9, 12);\n\t\twaveNaturalStalls.put(10, 8);\n\n\t\twaveNaturalStalls.put(11, 8);\n\t\twaveNaturalStalls.put(12, 8);\n\t\twaveNaturalStalls.put(13, 8);\n\t\twaveNaturalStalls.put(14, 8);\n\t\twaveNaturalStalls.put(15, 8);\n\n\t\twaveNaturalStalls.put(16, 4);\n\t\twaveNaturalStalls.put(17, 12);\n\t\twaveNaturalStalls.put(18, 8);\n\t\twaveNaturalStalls.put(19, 12);\n\t\twaveNaturalStalls.put(20, 16);\n\n\t\twaveNaturalStalls.put(21, 8);\n\t\twaveNaturalStalls.put(22, 12);\n\t\twaveNaturalStalls.put(23, 8);\n\t\twaveNaturalStalls.put(24, 8);\n\t\twaveNaturalStalls.put(25, 8);\n\n\t\twaveNaturalStalls.put(26, 4);\n\t\twaveNaturalStalls.put(27, 8);\n\t\twaveNaturalStalls.put(28, 4);\n\t\twaveNaturalStalls.put(29, 4);\n\t\twaveNaturalStalls.put(30, 4);\n\t}\n\n\t@Inject\n\tprotected StatsHandler(NyloerPlugin plugin, NyloerConfig config)\n\t{\n\t\tthis.client \u003d plugin.client;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\n\t\tstalls \u003d new ArrayList\u003cStall\u003e();\n\t\tstats \u003d new Stats();\n\t\treset();\n\t}\n\n\tpublic void reset()\n\t{\n\t\tcurrentWave \u003d 0;\n\t\tcapSize \u003d 12;\n\t\tcapSizePostcap \u003d 24;\n\t\tticksSinceLastWave \u003d 0;\n\t\tstalls.clear();\n\t\tstats.reset();\n\n\t\tw1T \u003d -1;\n\t\tlastNyloDeathT \u003d -1;\n\t\tbossSpawnT \u003d -1;\n\t\tbossDeathT \u003d -1;\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event)\n\t{\n\t\tif (!plugin.isNylocasRegion())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (isCapCheck())\n\t\t{\n\t\t\tint nylocasAliveCount \u003d getNylocasAliveCount();\n\t\t\tif (nylocasAliveCount \u003e\u003d capSize)\n\t\t\t{\n\t\t\t\taddStall(new Stall(currentWave, nylocasAliveCount, capSize, stalls.size() + 1));\n\t\t\t}\n\t\t}\n\t\tticksSinceLastWave++;\n\t}\n\n\t@Subscribe\n\tpublic void onNpcSpawned(NpcSpawned npcSpawned)\n\t{\n\t\tNPC npc \u003d npcSpawned.getNpc();\n\t\tNyloerPlugin.NyloerNpc nyloer \u003d plugin.getNyloersIndexMap().get(npc.getIndex());\n\t\tif (nyloer !\u003d null)\n\t\t{\n\t\t\tif ((!nyloer.isSplit()) \u0026\u0026 (ticksSinceLastWave \u003e 3))\n\t\t\t{\n\t\t\t\twaveSpawned();\n\t\t\t}\n\t\t}\n\t\telse if (isNylocasVasiliasSpawn(npc))\n\t\t{\n\t\t\tbossSpawnT \u003d client.getTickCount();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onNpcDespawned(NpcDespawned npcDespawned)\n\t{\n\t\tNPC npc \u003d npcDespawned.getNpc();\n\t\tif (isNylocas(npc))\n\t\t{\n\t\t\tif (plugin.getNyloersIndexMap().size() \u003d\u003d 0)\n\t\t\t{\n\t\t\t\tlastNyloDeathT \u003d client.getTickCount();\n\t\t\t}\n\t\t}\n\t\telse if (isNylocasVasiliasDespawn(npc))\n\t\t{\n\t\t\tbossDeathT \u003d client.getTickCount();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onNpcChanged(NpcChanged npcChanged)\n\t{\n\t\tint npcId \u003d npcChanged.getNpc().getId();\n\t\tswitch(npcId)\n\t\t{\n\t\t\tcase NpcID.NYLOCAS_VASILIAS_8355:\n\t\t\tcase NpcID.NYLOCAS_VASILIAS_10787:\n\t\t\tcase NpcID.NYLOCAS_VASILIAS_10808:\n\t\t\t\tstats.bossRotation[0]++;\n\t\t\t\tbreak;\n\t\t\tcase NpcID.NYLOCAS_VASILIAS_8356:\n\t\t\tcase NpcID.NYLOCAS_VASILIAS_10788:\n\t\t\tcase NpcID.NYLOCAS_VASILIAS_10809:\n\t\t\t\tstats.bossRotation[1]++;\n\t\t\t\tbreak;\n\t\t\tcase NpcID.NYLOCAS_VASILIAS_8357:\n\t\t\tcase NpcID.NYLOCAS_VASILIAS_10789:\n\t\t\tcase NpcID.NYLOCAS_VASILIAS_10810:\n\t\t\t\tstats.bossRotation[2]++;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tpublic void waveSpawned()\n\t{\n\t\tcurrentWave++;\n\t\tticksSinceLastWave \u003d 0;\n\t\tswitch (currentWave)\n\t\t{\n\t\t\tcase 1:\n\t\t\t\tw1T \u003d client.getTickCount();\n\t\t\t\tbreak;\n\t\t\tcase 20:\n\t\t\t\tcapSize \u003d capSizePostcap;\n\t\t\tcase 22:\n\t\t\t\tstats.bigsAlive22 \u003d getBigsAliveCount();\n\t\t\t\tbreak;\n\t\t\tcase 29:\n\t\t\t\tstats.bigsAlive29 \u003d getBigsAliveCount();\n\t\t\t\tbreak;\n\t\t\tcase 30:\n\t\t\t\tstats.bigsAlive30 \u003d getBigsAliveCount();\n\t\t\t\tbreak;\n\t\t\tcase 31:\n\t\t\t\tstats.bigsAlive31 \u003d getBigsAliveCount();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage event)\n\t{\n\t\tif (!plugin.isNylocasRegion() || event.getType() !\u003d ChatMessageType.GAMEMESSAGE)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tString msg \u003d Text.removeTags(event.getMessage());\n\t\tif (NYLO_COMPLETE_MESSAGE.matcher(msg).find())\n\t\t{\n\t\t\taddStats();\n\t\t\treset();\n\t\t}\n\t\telse if (NYLO_RETRY_MESSAGE.matcher(msg).find())\n\t\t{\n\t\t\taddStats();\n\t\t\treset();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onVarbitChanged(VarbitChanged event)\n\t{\n\t\tif (client.getLocalPlayer() \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tint tobVar \u003d client.getVarbitValue(Varbits.THEATRE_OF_BLOOD);\n\t\tboolean inTob \u003d tobVar \u003d\u003d 2 || tobVar \u003d\u003d 3;\n\t\tif (!inTob \u0026\u0026 currentWave !\u003d 0)\n\t\t{\n\t\t\taddStats();\n\t\t\treset();\n\t\t}\n\t}\n\n\tprivate void addStall(Stall stall)\n\t{\n\t\tstalls.add(stall);\n\t\tplugin.sidePanel.addStall(stall);\n\n\t\tif (stall.getWave() \u003c 20)\n\t\t{\n\t\t\tstats.stallCountPre++;\n\t\t\tif (stall.getWave() \u003c 13)\n\t\t\t{\n\t\t\t\tstats.stallCount1to12++;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tstats.stallCount13to19++;\n\t\t\t}\n\t\t}\n\t\tswitch (stall.getWave())\n\t\t{\n\t\t\tcase 21:\n\t\t\t\tstats.stallCount21++;\n\t\t\t\tbreak;\n\t\t\tcase 22:\n\t\t\tcase 23:\n\t\t\tcase 24:\n\t\t\tcase 26:\n\t\t\tcase 27:\n\t\t\t\tstats.stallCount22to27++;\n\t\t\t\tbreak;\n\t\t\tcase 28:\n\t\t\t\tstats.stallCount28++;\n\t\t\t\tbreak;\n\t\t\tcase 29:\n\t\t\t\tstats.stallCount29++;\n\t\t\t\tbreak;\n\t\t\tcase 30:\n\t\t\t\tstats.stallCount30++;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tpublic void addStats()\n\t{\n\t\tif (lastNyloDeathT \u003d\u003d -1)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tint tTotal;\n\t\tint tBoss;\n\t\tint tBossSpawn;\n\n\t\tint tWaves \u003d lastNyloDeathT - w1T + 4;\n\t\tint tBossSpawnWait \u003d 16;\n\t\tif ((tWaves % 4) !\u003d 0)\n\t\t{\n\t\t\ttBossSpawnWait +\u003d 4 - (tWaves % 4);\n\t\t}\n\t\ttBossSpawn \u003d tWaves + tBossSpawnWait;\n\n\t\tif (bossDeathT !\u003d -1)\n\t\t{\n\t\t\ttBoss \u003d bossDeathT - bossSpawnT + 2;\n\t\t\tif ((tBoss % 4) !\u003d 0)\n\t\t\t{\n\t\t\t\ttBoss +\u003d 4 - (tBoss % 4);\n\t\t\t}\n\t\t\ttTotal \u003d tBossSpawn + tBoss;\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttBoss \u003d 0;\n\t\t\ttTotal \u003d 0;\n\t\t}\n\t\tstats.totalTime \u003d _ticks2Time(tTotal);\n\t\tstats.bossTime \u003d _ticks2Time(tBoss);\n\t\tstats.wavesTime \u003d _ticks2Time(tBossSpawn);\n\t\tplugin.sidePanel.addStats(stats);\n\t}\n\n\tprivate boolean isCapCheck()\n\t{\n\t\tif ((currentWave \u003e 1) \u0026\u0026 (currentWave \u003c 31))\n\t\t{\n\t\t\treturn (ticksSinceLastWave % 4 \u003d\u003d 0) \u0026\u0026 (ticksSinceLastWave \u003e\u003d waveNaturalStalls.get(currentWave));\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate int getNylocasAliveCount()\n\t{\n\t\tint nylocasAliveCount \u003d 0;\n\t\tfor (NPC npc : client.getNpcs())\n\t\t{\n\t\t\tif (isNylocas(npc))\n\t\t\t{\n\t\t\t\tnylocasAliveCount++;\n\t\t\t}\n\t\t}\n\t\treturn nylocasAliveCount;\n\t}\n\n\tprivate int getBigsAliveCount()\n\t{\n\t\tint bigsAliveCount \u003d 0;\n\t\tfor (NyloerPlugin.NyloerNpc nyloer : plugin.getNyloersIndexMap().values())\n\t\t{\n\t\t\tif (nyloer.getSize().equals(\"BIG\"))\n\t\t\t{\n\t\t\t\tbigsAliveCount++;\n\t\t\t}\n\t\t}\n\t\treturn bigsAliveCount;\n\t}\n\n\tprivate boolean isNylocas(NPC npc)\n\t{\n\t\tString name \u003d npc.getName();\n\t\tif (name \u003d\u003d null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\treturn (name.equals(\"Nylocas Ischyros\")) || (name.equals(\"Nylocas Toxobolos\")) || (name.equals(\"Nylocas Hagios\"));\n\t}\n\n\tprivate boolean isNylocasVasiliasSpawn(NPC npc)\n\t{\n\t\tswitch (npc.getId())\n\t\t{\n\t\t\tcase NpcID.NYLOCAS_VASILIAS:\n\t\t\tcase NpcID.NYLOCAS_VASILIAS_10786:\n\t\t\tcase NpcID.NYLOCAS_VASILIAS_10807:\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate boolean isNylocasVasiliasDespawn(NPC npc)\n\t{\n\t\tswitch (npc.getId())\n\t\t{\n\t\t\tcase NpcID.NYLOCAS_VASILIAS_8355:\n\t\t\tcase NpcID.NYLOCAS_VASILIAS_8356:\n\t\t\tcase NpcID.NYLOCAS_VASILIAS_8357:\n\t\t\tcase NpcID.NYLOCAS_VASILIAS_10786:\n\t\t\tcase NpcID.NYLOCAS_VASILIAS_10807:\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate String _ticks2Time(int ticks)\n\t{\n\t\tif (ticks \u003d\u003d 0)\n\t\t{\n\t\t\treturn \"\";\n\t\t}\n\t\tint millis \u003d ticks * 600;\n\t\tString hundredths \u003d String.valueOf(millis % 1000).substring(0, 1);\n\t\treturn String.format(\n\t\t\t\"%d:%02d.%s\",\n\t\t\tTimeUnit.MILLISECONDS.toMinutes(millis) % TimeUnit.HOURS.toMinutes(1),\n\t\t\tTimeUnit.MILLISECONDS.toSeconds(millis) % TimeUnit.MINUTES.toSeconds(1),\n\t\t\thundredths\n\t\t);\n\t}\n}\n","filePath":"src\\main\\java\\com\\nyloer\\stats\\StatsHandler.java"},{"fileName":"NyloerTest.java","content":"package com.nyloer;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class NyloerTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(NyloerPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}\n","filePath":"src\\test\\java\\com\\nyloer\\NyloerTest.java"}]},{"commit":"bb5f38446d6631f76984db921276ac195e00d614","repository":"https://github.com/Beardedrasta/RHUD.git","internalName":"rasta-hud","files":[{"fileName":"FontAssistant.java","content":"/*\n * Copyright (c) 2023, Beardedrasta \u003cBeardedrasta@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage RHUD.helpers;\n\nimport java.awt.*;\nimport RHUD.RHUD_Config;\nimport net.runelite.client.ui.FontManager;\n\npublic class FontAssistant {\n    private static Font font \u003d null;\n    private static boolean useRunescapeFont \u003d true;\n    private static String lastFont \u003d \"\";\n    private static int lastFontSize \u003d 0;\n    private static RHUD_Config.FontStyle lastFontStyle \u003d RHUD_Config.FontStyle.DEFAULT;\n\n    /**\n     * Initialize the current font into the Graphics context.\n     */\n    public static void initFont(Graphics2D g)\n    {\n        if (font !\u003d null)\n        {\n            g.setFont(font);\n            if (useRunescapeFont)\n            {\n                // The native RuneScape fonts look best with antialiasing off\n                g.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_OFF);\n            }\n        }\n    }\n\n    /**\n     * Create or update the font. If \u0027fontName\u0027 is blank, use RuneScape fonts. Otherwise, use a Java Font.\n     */\n    public static void updateFont(String fontName, int fontSize, RHUD_Config.FontStyle fontStyle) {\n        if (!lastFont.equals(fontName) || lastFontSize !\u003d fontSize || lastFontStyle !\u003d fontStyle) {\n            lastFont \u003d fontName;\n            lastFontSize \u003d fontSize;\n            lastFontStyle \u003d fontStyle;\n\n            // Convert our config style enum to AWT style bits\n            int awtStyle \u003d mapFontStyle(fontStyle);\n\n            if (fontName \u003d\u003d null || fontName.isEmpty())\n            {\n                // Use the built-in RuneScape fonts\n                // 1) Decide size: small or normal\n                if (fontSize \u003c 16)\n                {\n                    // small\n                    if (fontStyle \u003d\u003d RHUD_Config.FontStyle.BOLD || fontStyle \u003d\u003d RHUD_Config.FontStyle.BOLD_ITALICS)\n                    {\n                        // If available, use bold small. If not, fallback to bold or small\n                        // Many RuneLite versions only have getRunescapeSmallFont() or getRunescapeBoldFont().\n                        font \u003d FontManager.getRunescapeSmallFont();\n                        // or if there\u0027s a getRunescapeBoldSmallFont(), call that\n                    }\n                    else\n                    {\n                        font \u003d FontManager.getRunescapeSmallFont();\n                    }\n                }\n                else\n                {\n                    // normal\n                    if (fontStyle \u003d\u003d RHUD_Config.FontStyle.BOLD || fontStyle \u003d\u003d RHUD_Config.FontStyle.BOLD_ITALICS)\n                    {\n                        font \u003d FontManager.getRunescapeBoldFont();\n                    }\n                    else\n                    {\n                        font \u003d FontManager.getRunescapeFont();\n                    }\n                }\n                useRunescapeFont \u003d true;\n            }\n            else\n            {\n                // The user provided a custom TTF (e.g. \"Arial\"), so we can do any size or style\n                font \u003d new Font(fontName, awtStyle, fontSize);\n                useRunescapeFont \u003d false;\n            }\n\n//            if (\"\".equals(fontName)) {\n//                if (fontSize \u003c 16) {\n//                    font \u003d FontManager.getRunescapeSmallFont();\n//                }\n//\n//                if (fontStyle \u003d\u003d Config.FontStyle.BOLD || fontStyle \u003d\u003d Config.FontStyle.BOLD_ITALICS) {\n//                    font \u003d Manager.RUNESCAPE_BOLD_FONT;\n//                    style ^\u003d Font.BOLD;\n//                } else {\n//                    font \u003d FontManager.getRunescapeFont();\n//                }\n//                font \u003d font.deriveFont(style);\n//                useRunescapeFont \u003d true;\n//                return;\n//            }\n//            font \u003d new Font(fontName, style, fontSize);\n//            useRunescapeFont \u003d false;\n        }\n    }\n\n    /**\n     * Convert our config\u0027s FontStyle enum to AWT Font style bits.\n     */\n    private static int mapFontStyle(RHUD_Config.FontStyle fontStyle)\n    {\n        switch (fontStyle)\n        {\n            case BOLD:\n                return Font.BOLD;\n            case ITALICS:\n                return Font.ITALIC;\n            case BOLD_ITALICS:\n                return Font.BOLD | Font.ITALIC;\n            case DEFAULT:\n            default:\n                return Font.PLAIN;\n        }\n    }\n}\n","filePath":"src\\main\\java\\RHUD\\helpers\\FontAssistant.java"},{"fileName":"Layout.java","content":"/*\n * Copyright (c) 2023, Beardedrasta \u003cBeardedrasta@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage RHUD.helpers;\n\npublic class Layout {\n\n    public enum VIEW {\n        NORMAL,\n        GRID,\n        VERTICAL\n    }\n\n    public enum POINT {\n        RIGHT,\n        LEFT,\n        TOPLEFT,\n        TOPRIGHT,\n        BOTTOMLEFT,\n        BOTTOMRIGHT\n    }\n\n    public enum XPBARMODE{\n        DISABLED,\n        EXPERIENCE,\n    }\n\n    public enum BARMODE {\n        DISABLED,\n        HITPOINTS,\n        PRAYER,\n        RUN_ENERGY,\n        SPECIAL_ATTACK,\n    }\n}\n","filePath":"src\\main\\java\\RHUD\\helpers\\Layout.java"},{"fileName":"Render.java","content":"/*\n * Copyright (c) 2023, Beardedrasta \u003cBeardedrasta@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage RHUD.helpers;\n\nimport java.awt.*;\nimport java.util.function.Supplier;\nimport net.runelite.client.util.ColorUtil;\nimport RHUD.RHUD_Config;\n\npublic class Render {\n    private static final int BORDER \u003d 1;\n    private static final int MIN_ICON_AND_COUNTER_WIDTH \u003d 16;\n\n    private final Supplier\u003cInteger\u003e maxValSupplier;\n    private final Supplier\u003cInteger\u003e currValSupplier;\n    private final Supplier\u003cColor\u003e colorSupplier;\n    private final Supplier\u003cColor\u003e healColorSupplier;\n    private final Supplier\u003cInteger\u003e healSupplier;\n    private final Supplier\u003cImage\u003e iconSupplier;\n\n    private int maxVal;\n    private int currVal;\n    private static final Color BACKGROUND \u003d new Color(20, 20, 20, 150);\n    private static final Color OVERHEAL_COLOR \u003d new Color(216, 255, 139, 150);\n\n    public Render(Supplier\u003cInteger\u003e maxValSupplier, Supplier\u003cInteger\u003e currValSupplier, Supplier\u003cInteger\u003e healSupplier, Supplier\u003cColor\u003e colorSupplier, Supplier\u003cColor\u003e healColorSupplier, Supplier\u003cImage\u003e iconSupplier) {\n        this.maxValSupplier \u003d maxValSupplier;\n        this.currValSupplier \u003d currValSupplier;\n        this.healSupplier \u003d healSupplier;\n        this.colorSupplier \u003d colorSupplier;\n        this.healColorSupplier \u003d healColorSupplier;\n        this.iconSupplier \u003d iconSupplier;\n    }\n\n\n    private void refresh() {\n        maxVal \u003d maxValSupplier.get();\n        currVal \u003d currValSupplier.get();\n    }\n\n\n    public void renderBar(RHUD_Config config, Graphics2D g, int x, int y) {\n\n        refresh();\n\n        int barWidth, barHeight;\n        if (config.layout() \u003d\u003d Layout.VIEW.VERTICAL) {\n            // Swap so bar is skinny width, tall height\n            barWidth \u003d config.barHeight();\n            barHeight \u003d config.barWidth();\n        } else {\n            barWidth \u003d config.barWidth();\n            barHeight \u003d config.barHeight();\n        }\n\n        if (config.layout() \u003d\u003d Layout.VIEW.VERTICAL) {\n            // vertical fill\n            int fillHeight \u003d getBarHeight(maxVal, currVal, barHeight - 2);\n            // or a direct formula: (int) ((double)currVal / maxVal * barHeight)\n            int fillY \u003d y + barHeight - fillHeight;\n\n            g.setColor(BACKGROUND);\n            g.drawRoundRect(x - 2, y, barWidth + 2, barHeight, config.arcSize(), config.arcSize());\n            g.fillRoundRect(x - 2, y, barWidth + 2, barHeight, config.arcSize(), config.arcSize());\n\n            g.setColor(colorSupplier.get());\n            g.fillRoundRect(\n                    x + BORDER,\n                    fillY + BORDER,\n                    barWidth - BORDER * 2,\n                    fillHeight - BORDER * 2,\n                    config.arcSize(),\n                    config.arcSize()\n            );\n            renderIconsAndText(config, g, x, y, barWidth, barHeight);\n        } else if (config.layout() \u003d\u003d Layout.VIEW.GRID) {\n            // horizontal fill\n            int fillWidth \u003d getBarWidth(currVal, maxVal, barWidth);\n            // or a direct formula: (int) ((double)currVal / maxVal * barWidth)\n\n            g.setColor(BACKGROUND);\n            g.drawRoundRect(x, y, barWidth / 2, barHeight, config.arcSize(), config.arcSize());\n            g.fillRoundRect(x, y, barWidth / 2, barHeight, config.arcSize(), config.arcSize());\n\n            g.setColor(colorSupplier.get());\n            g.fillRoundRect(\n                    x + BORDER,\n                    y + BORDER,\n                    fillWidth / 2 - BORDER * 2,\n                    barHeight - BORDER * 2,\n                    config.arcSize(),\n                    config.arcSize()\n            );\n            renderIconsAndText(config, g, x, y, barWidth, barHeight);\n        } else {\n            // horizontal fill\n            int fillWidth \u003d getBarWidth(currVal, maxVal, barWidth);\n            // or a direct formula: (int) ((double)currVal / maxVal * barWidth)\n\n            g.setColor(BACKGROUND);\n            g.drawRoundRect(x, y, barWidth, barHeight, config.arcSize(), config.arcSize());\n            g.fillRoundRect(x, y, barWidth, barHeight, config.arcSize(), config.arcSize());\n\n            g.setColor(colorSupplier.get());\n            g.fillRoundRect(\n                    x + BORDER,\n                    y + BORDER,\n                    fillWidth - BORDER * 2,\n                    barHeight - BORDER * 2,\n                    config.arcSize(),\n                    config.arcSize()\n            );\n            renderIconsAndText(config, g, x, y, barWidth, barHeight);\n\n        }\n\n        if (config.layout() \u003d\u003d Layout.VIEW.VERTICAL) {\n            renderRestoreVertical(config, g, x, y, barWidth, barHeight);\n        } else if (config.layout() \u003d\u003d Layout.VIEW.GRID) {\n            renderRestoreGrid(config, g, x, y, barWidth, barHeight);\n        }\n        else\n        {\n            renderRestoreHorizontal(config, g, x, y, barWidth, barHeight);\n        }\n    }\n\n    private void renderRestoreVertical(RHUD_Config config, Graphics2D g, int x, int y, int barWidth, int barHeight)\n    {\n        // bar is barWidth wide, barHeight tall\n        int healVal \u003d healSupplier.get();\n        if (healVal \u003c\u003d 0) return;\n        int realHealVal \u003d Math.min(healVal, maxVal - currVal);\n\n        // The portion the bar is currently filled\n        int currFill  \u003d (int) Math.round((double) currVal / maxVal * barHeight);\n        // The portion we would fill for heal\n        int healFill \u003d (int) Math.round((double) realHealVal / maxVal * barHeight);\n\n\n        if (currVal + healVal \u003e maxVal)\n        {\n            g.setColor(OVERHEAL_COLOR);\n        }\n        else\n        {\n            g.setColor(healColorSupplier.get());\n        }\n\n        int top \u003d y + (barHeight - currFill - healFill);\n        g.fillRoundRect(x, top + 1, barWidth, healFill, config.arcSize(), config.arcSize());\n    }\n\n    private void renderRestoreHorizontal(RHUD_Config config, Graphics2D g, int x, int y, int barWidth, int barHeight)\n    {\n        int healVal \u003d healSupplier.get();\n        if (healVal \u003c\u003d 0) return;\n        int realHealVal \u003d Math.min(healVal, maxVal - currVal);\n\n        int currFill \u003d (int) Math.round((double) currVal / maxVal * barWidth);\n        int healFill \u003d (int) Math.round((double) realHealVal / maxVal * barWidth);\n\n        if (currVal + healVal \u003e maxVal)\n        {\n            g.setColor(OVERHEAL_COLOR);\n        }\n        else\n        {\n            g.setColor(healColorSupplier.get());\n        }\n\n        // place the heal fill to the right of the current fill\n        int left \u003d x + currFill;\n        g.fillRoundRect(left - 1, y, healFill, barHeight, config.arcSize(), config.arcSize());\n    }\n\n    private void renderRestoreGrid(RHUD_Config config, Graphics2D g, int x, int y, int barWidth, int barHeight)\n    {\n        int healVal \u003d healSupplier.get();\n        if (healVal \u003c\u003d 0) return;\n        int realHealVal \u003d Math.min(healVal, maxVal - currVal);\n\n        int currFill \u003d (int) Math.round((double) currVal / maxVal * barWidth/2);\n        int healFill \u003d (int) Math.round((double) realHealVal / maxVal * barWidth/2);\n\n        if (currVal + healVal \u003e maxVal)\n        {\n            g.setColor(OVERHEAL_COLOR);\n        }\n        else\n        {\n            g.setColor(healColorSupplier.get());\n        }\n\n        // place the heal fill to the right of the current fill\n        int left \u003d x + currFill;\n        g.fillRoundRect(left - 1, y, healFill, barHeight, config.arcSize(), config.arcSize());\n    }\n\n    private void renderIconsAndText(RHUD_Config config, Graphics2D g, int x, int y, int drawnWidth, int drawnHeight) {\n        // Icons and counters overlap the bar at small widths, so they are not drawn when the bars are too small\n        if (drawnWidth \u003c MIN_ICON_AND_COUNTER_WIDTH) {\n            return;\n        }\n\n        final Image icon \u003d iconSupplier.get();\n\n        final int iconHeight \u003d icon.getHeight(null);\n        final int iconWidth \u003d icon.getWidth(null);\n\n        int centerIconX \u003d x + (drawnWidth / 2);\n        int centerIconY \u003d y + (drawnHeight / 2);\n        int singleCenterIconY \u003d y + 15;\n\n        int iconX \u003d centerIconX - (iconWidth / 2);\n        int iconY \u003d centerIconY - (iconHeight / 2);\n        int singleIconY \u003d singleCenterIconY - (iconHeight / 2);\n\n        final String counterText \u003d currVal + \"/\" + maxVal;\n        final String singleCounterText \u003d String.valueOf(currVal);\n        FontMetrics metrics \u003d g.getFontMetrics();\n        final int textWidth \u003d metrics.stringWidth(counterText);\n        final int textHeight \u003d metrics.getHeight();\n        final int singleTextWidth \u003d metrics.stringWidth(singleCounterText);\n\n        int centerX \u003d x + (drawnWidth / 2);\n        int centerY \u003d y + (drawnHeight / 2);\n        int singleCenterY \u003d y + (iconHeight + textHeight) + 5;\n\n        int textX \u003d centerX - (textWidth / 2);\n        int singleTextX \u003d centerX - (singleTextWidth / 2);\n        int textY \u003d centerY + (metrics.getAscent() / 2);\n        int singleTextY \u003d singleCenterY + (metrics.getAscent() / 2);\n\n        if (config.enableSkillIcon()) {\n            if (config.layout() \u003d\u003d Layout.VIEW.VERTICAL \u0026\u0026 config.barWidth() \u003e textWidth) {\n                g.drawImage(icon, iconX, singleIconY + 3, null);\n            } else if (config.layout() \u003d\u003d Layout.VIEW.GRID \u0026\u0026 config.barHeight() \u003e textHeight) {\n                g.drawImage(icon, x + 5, iconY, null);\n            } else {\n                if (config.barHeight() \u003e textHeight) {\n                    g.drawImage(icon, x + 5, iconY, null);\n                }\n            }\n\n            if (config.layout() \u003d\u003d Layout.VIEW.VERTICAL) {\n                if (config.barWidth() \u003e textWidth) {\n                    g.setColor(Color.BLACK);\n                    g.drawString(singleCounterText, singleTextX + 1, singleTextY + 1);\n                    g.setColor(ColorUtil.colorWithAlpha(Color.WHITE, 255));\n                    g.drawString(singleCounterText, singleTextX, singleTextY);\n                }\n            } else if (config.layout() \u003d\u003d Layout.VIEW.GRID) {\n                if (config.barHeight() \u003e textHeight) {\n                    g.setColor(Color.BLACK);\n                    g.drawString(counterText, textX + 1 - ((config.barWidth() / 2) / 2), textY + 1);\n                    g.setColor(ColorUtil.colorWithAlpha(Color.WHITE, 255));\n                    g.drawString(counterText, textX - ((config.barWidth() / 2) / 2), textY);\n                }\n            } else {\n                if (config.barHeight() \u003e textHeight) {\n                    g.setColor(Color.BLACK);\n                    g.drawString(counterText, textX + 1, textY + 1);\n                    g.setColor(ColorUtil.colorWithAlpha(Color.WHITE, 255));\n                    g.drawString(counterText, textX, textY);\n                }\n            }\n        }\n    }\n\n    private static int getBarHeight ( int base, int current, int size)\n    {\n        final double ratio \u003d (double) current / base;\n\n        if (ratio \u003e\u003d 1) {\n            return size;\n        }\n\n        return (int) Math.round(ratio * size);\n    }\n\n    private static int getBarWidth ( int current, int base, int size)\n    {\n        final double ratio \u003d (double) current / base;\n\n        if (ratio \u003e\u003d 1) {\n            return size;\n        }\n\n        return (int) Math.round(ratio * size);\n    }\n}\n","filePath":"src\\main\\java\\RHUD\\helpers\\Render.java"},{"fileName":"XpRender.java","content":"\n/*\n * Copyright (c) 2023, Beardedrasta \u003cBeardedrasta@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage RHUD.helpers;\n\nimport java.awt.*;\nimport java.util.function.Supplier;\nimport RHUD.RHUD_Config;\n\npublic class XpRender {\n    private static final int BORDER \u003d 1;\n\n    private final Supplier\u003cInteger\u003e maxValSupplier;\n    private final Supplier\u003cInteger\u003e currValSupplier;\n    private final Supplier\u003cColor\u003e colorSupplier;\n    private final Supplier\u003cColor\u003e healColorSupplier;\n    private final Supplier\u003cInteger\u003e healSupplier;\n\n    private int maxVal;\n    private int currVal;\n\n    private static final Color BACKGROUND \u003d new Color(20, 20, 20, 150);\n    private static final Color OVERHEAL_COLOR \u003d new Color(216, 255, 139, 150);\n\n    public XpRender(Supplier\u003cInteger\u003e maxValSupplier, Supplier\u003cInteger\u003e currValSupplier, Supplier\u003cInteger\u003e healSupplier, Supplier\u003cColor\u003e colorSupplier, Supplier\u003cColor\u003e healColorSupplier) {\n        this.maxValSupplier \u003d maxValSupplier;\n        this.currValSupplier \u003d currValSupplier;\n        this.healSupplier \u003d healSupplier;\n        this.colorSupplier \u003d colorSupplier;\n        this.healColorSupplier \u003d healColorSupplier;\n    }\n\n\n    private void refresh() {\n        maxVal \u003d maxValSupplier.get();\n        currVal \u003d currValSupplier.get();\n    }\n\n\n    public void renderBar(RHUD_Config config, Graphics2D g, int x, int y, int width) {\n\n        refresh();\n\n        final int fillHeight \u003d getBarHeight(maxVal, currVal, width);\n        final int filledWidth \u003d getBarWidth(maxVal, currVal, config.xpBarHeight());\n        final Color fillColor \u003d colorSupplier.get();\n\n        int adjX;\n        int adjY;\n        adjY \u003d y;\n        adjX \u003d x;\n\n        g.setColor(BACKGROUND);\n        g.drawRoundRect(adjX, adjY - 2, width - BORDER, config.xpBarHeight() - BORDER, config.arcSize(), config.arcSize());\n        g.fillRoundRect(adjX, adjY - 2, width, config.xpBarHeight(), config.arcSize(), config.arcSize());\n\n        renderRestore(config, g, adjX, adjY, width);\n\n        g.setColor(fillColor);\n        g.fillRoundRect(adjX + BORDER, adjY + BORDER - 2, fillHeight - BORDER * 2, filledWidth - BORDER, config.arcSize(), config.arcSize());\n\n        float spacing \u003d width / 10f;\n        int notchCount \u003d 9;\n        for (int i \u003d 1; i \u003c\u003d notchCount; i++) {\n            int notchX \u003d adjX + Math.round(i * spacing);\n            int notchHeight \u003d config.xpBarHeight();\n            g.setColor(Color.BLACK);\n            g.fillRect(notchX, adjY + 1 - 2, 1, notchHeight - 1);\n        }\n    }\n\n    private void renderRestore(RHUD_Config config, Graphics2D g, int x, int y, int width) {\n        final Color color \u003d healColorSupplier.get();\n        final int heal \u003d healSupplier.get();\n\n        if (heal \u003c\u003d 0) {\n            return;\n        }\n\n        final int filledCurrentWidth \u003d getBarHeight(maxVal, currVal, config.barWidth());\n        final int filledHealWidth \u003d getBarHeight(maxVal, heal, config.barWidth());\n        final int fillX, fillWidth;\n        g.setColor(color);\n\n        if (filledHealWidth + filledCurrentWidth \u003e config.barWidth()) {\n            g.setColor(OVERHEAL_COLOR);\n            fillX \u003d x - BORDER + filledCurrentWidth;\n            fillWidth \u003d config.barWidth() - filledCurrentWidth - BORDER;\n        } else {\n            fillX \u003d x - BORDER + (filledCurrentWidth - filledHealWidth) + filledHealWidth;\n            fillWidth \u003d filledHealWidth;\n        }\n        g.fillRoundRect(fillX - 2, y + BORDER, fillWidth + 2, config.xpBarHeight() - BORDER, config.arcSize(), config.arcSize());\n    }\n\n\n    private static int getBarHeight ( int base, int current, int size)\n    {\n        final double ratio \u003d (double) current / base;\n\n        if (ratio \u003e\u003d 1) {\n            return size;\n        }\n\n        return (int) Math.round(ratio * size);\n    }\n\n    private static int getBarWidth ( int current, int base, int size)\n    {\n        final double ratio \u003d (double) current / base;\n\n        if (ratio \u003e\u003d 1) {\n            return size;\n        }\n\n        return (int) Math.round(ratio * size);\n    }\n}\n","filePath":"src\\main\\java\\RHUD\\helpers\\XpRender.java"},{"fileName":"RHUD_Config.java","content":"/*\n * Copyright (c) 2023, Beardedrasta \u003cBeardedrasta@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage RHUD;\n\nimport RHUD.helpers.*;\nimport lombok.Getter;\nimport net.runelite.client.config.*;\nimport net.runelite.api.Skill;\n\nimport java.awt.*;\n@ConfigGroup(RHUD.RHUD_Config.GROUP)\npublic interface RHUD_Config extends Config {\n\n\tString GROUP \u003d \"RHUD\";\n\tColor HEALTH_COLOR \u003d new Color(169, 28, 1, 255);\n\tColor SPECIAL_COLOR \u003d new Color(73, 143, 71, 255);\n\tColor RUN_COLOR \u003d new Color(140, 125, 29, 255);\n\tColor PRAY_COLOR \u003d new Color(38, 157, 157, 255);\n\tColor EXP_COLOR \u003d new Color(130, 60, 170, 195);\n\n\tenum FontStyle {\n\t\tBOLD(\"Bold\", Font.BOLD),\n\t\tITALICS(\"Italics\", Font.ITALIC),\n\t\tBOLD_ITALICS(\"Bold and italics\", Font.BOLD | Font.ITALIC),\n\t\tDEFAULT(\"Default\", Font.PLAIN);\n\n\t\tString name;\n\t\t@Getter\n\t\tprivate final int style;\n\n\t\tFontStyle(String name, int style) {\n\t\t\tthis.style \u003d style;\n\t\t\tthis.name \u003d name;\n\t\t}\n\t}\n\n\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Status Options\",\n\t\t\tdescription \u003d \"Configure the Status Bars.\",\n\t\t\tposition \u003d 97\n\t)\n\tString statusSection \u003d \"status\";\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Font and Misc\",\n\t\t\tdescription \u003d \"Font options and miscellaneous.\",\n\t\t\tposition \u003d 98\n\t)\n\tString fontSection \u003d \"font\";\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Color Options\",\n\t\t\tdescription \u003d \"Status bar color config settings.\",\n\t\t\tposition \u003d 99\n\t)\n\tString colorSection \u003d \"color\";\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Xp Tracker\",\n\t\t\tdescription \u003d \"Experience tracker config settings.\",\n\t\t\tposition \u003d 100\n\t)\n\tString xpTracker \u003d \"tracker\";\n\n\t@ConfigItem(\n\t\t\tposition \u003d 0,\n\t\t\tkeyName \u003d \"infoMessage\",\n\t\t\tname \u003d \"Information\",\n\t\t\tdescription \u003d \"You can reset the Xp Tracker leveling information by resetting the runelite xp tracker.\",\n\t\t\tsection \u003d xpTracker\n\t)\n\tdefault String infoMessage()\n\t{\n\t\treturn \"Hover \u0027Information\u0027 to see info!\";\n\t}\n\n\t// -- Status Section -- //\n\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"barOffsetX\",\n\t\t\tname \u003d \"Bar X Offset\",\n\t\t\tdescription \u003d \"Set the X offset of the RHUD.\",\n\t\t\tsection \u003d statusSection\n\t)\n\t@Range(\n\t\t\tmin \u003d -100,  // Minimum allowed width\n\t\t\tmax \u003d 100  // Maximum allowed width\n\t)\n\tdefault int barOffsetX() {\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d \"barOffsetY\",\n\t\t\tname \u003d \"Bar Y Offset\",\n\t\t\tdescription \u003d \"Set the Y offset of the RHUD.\",\n\t\t\tsection \u003d statusSection\n\t)\n\t@Range(\n\t\t\tmin \u003d -100,  // Minimum allowed width\n\t\t\tmax \u003d 100  // Maximum allowed width\n\t)\n\tdefault int barOffsetY() {\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 3,\n\t\t\tkeyName \u003d \"barWidth\",\n\t\t\tname \u003d \"Bar Width\",\n\t\t\tdescription \u003d \"The width of the status bars in the modern resizeable layout.\",\n\t\t\tsection \u003d statusSection\n\t)\n\t@Range(\n\t\t\tmin \u003d 90,  // Minimum allowed width\n\t\t\tmax \u003d 520  // Maximum allowed width\n\t)\n\tdefault int barWidth() {\n\t\treturn 511;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 4,\n\t\t\tkeyName \u003d \"barHeight\",\n\t\t\tname \u003d \"Bar Height\",\n\t\t\tdescription \u003d \"The Height of the status bars in the modern resizeable layout.\",\n\t\t\tsection \u003d statusSection\n\t)\n\t@Range(\n\t\t\tmin \u003d 2,  // Minimum allowed width\n\t\t\tmax \u003d 100  // Maximum allowed width\n\t)\n\tdefault int barHeight() {\n\t\treturn 20;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 5,\n\t\t\tkeyName \u003d \"arcSize\",\n\t\t\tname \u003d \"Corner Curve\",\n\t\t\tdescription \u003d \"How rounded the corners of the status bars are\",\n\t\t\tsection \u003d statusSection\n\t)\n\t@Range(\n\t\t\tmin \u003d 0,  // Minimum allowed width\n\t\t\tmax \u003d 10  // Maximum allowed width\n\t)\n\tdefault int arcSize() {\n\t\treturn 6;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 6,\n\t\t\tkeyName \u003d \"layout\",\n\t\t\tname \u003d \"Layout\",\n\t\t\tdescription \u003d \"Set the orientation of the HUD\",\n\t\t\tsection \u003d statusSection\n\t)\n\tdefault Layout.VIEW layout() {\n\t\treturn Layout.VIEW.NORMAL;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 7,\n\t\t\tkeyName \u003d \"enableSkillIcon\",\n\t\t\tname \u003d \"Show Icons \u0026 Text\",\n\t\t\tdescription \u003d \"Adds Icon and Text to the status bars.\",\n\t\t\tsection \u003d statusSection\n\t)\n\tdefault boolean enableSkillIcon() {\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 8,\n\t\t\tkeyName \u003d \"bar1BarMode\",\n\t\t\tname \u003d \"Bar One\",\n\t\t\tdescription \u003d \"Configures the first status bar\",\n\t\t\tsection \u003d statusSection\n\t)\n\tdefault Layout.XPBARMODE bar1BarMode() {\n\t\treturn Layout.XPBARMODE.EXPERIENCE;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 9,\n\t\t\tkeyName \u003d \"bar2BarMode\",\n\t\t\tname \u003d \"Bar Two\",\n\t\t\tdescription \u003d \"Configures the second status bar\",\n\t\t\tsection \u003d statusSection\n\t)\n\tdefault Layout.BARMODE bar2BarMode() {\n\t\treturn Layout.BARMODE.HITPOINTS;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 10,\n\t\t\tkeyName \u003d \"bar3BarMode\",\n\t\t\tname \u003d \"Bar Three\",\n\t\t\tdescription \u003d \"Configures the third status bar\",\n\t\t\tsection \u003d statusSection\n\t)\n\tdefault Layout.BARMODE bar3BarMode() {\n\t\treturn Layout.BARMODE.PRAYER;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 11,\n\t\t\tkeyName \u003d \"bar4BarMode\",\n\t\t\tname \u003d \"Bar Four\",\n\t\t\tdescription \u003d \"Configures the fourth status bar\",\n\t\t\tsection \u003d statusSection\n\t)\n\tdefault Layout.BARMODE bar4BarMode() {\n\t\treturn Layout.BARMODE.DISABLED;\n\t}\n\n\n\t@ConfigItem(\n\t\t\tposition \u003d 12,\n\t\t\tkeyName \u003d \"bar5BarMode\",\n\t\t\tname \u003d \"Bar Five\",\n\t\t\tdescription \u003d \"Configures the fifth status bar\",\n\t\t\tsection \u003d statusSection\n\t)\n\tdefault Layout.BARMODE bar5BarMode() {\n\t\treturn Layout.BARMODE.DISABLED;\n\t}\n\n\n\t// -- Font and Misc Section -- //\n\n\t@ConfigItem(\n\t\t\tposition \u003d 13,\n\t\t\tkeyName \u003d \"fontName\",\n\t\t\tname \u003d \"Font\",\n\t\t\tdescription \u003d \"Name of the font to use for XP drops. Leave blank to use RuneLite setting. Example: Candara, Consolas, Impact, Arial\",\n\t\t\tsection \u003d fontSection\n\t)\n\tdefault String fontName() {\n\t\treturn \"\";\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 14,\n\t\t\tkeyName \u003d \"fontStyle\",\n\t\t\tname \u003d \"Font style\",\n\t\t\tdescription \u003d \"Style of the font to use for XP drops. Only works with custom font.\",\n\t\t\tsection \u003d fontSection\n\t)\n\tdefault FontStyle fontStyle() {\n\t\treturn RHUD_Config.FontStyle.DEFAULT;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 15,\n\t\t\tkeyName \u003d \"fontSize\",\n\t\t\tname \u003d \"Font size\",\n\t\t\tdescription \u003d \"Size of the font to use for XP drops. Only works with custom font.\",\n\t\t\tsection \u003d fontSection\n\t)\n\tdefault int fontSize()\n\t{\n\t\treturn 12;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 16,\n\t\t\tkeyName \u003d \"showHeader\",\n\t\t\tname \u003d \"Show Header\",\n\t\t\tdescription \u003d \"Display player name and combat level.\",\n\t\t\tsection \u003d fontSection\n\t)\n\tdefault boolean showHeader()\n\t{\n\t\treturn false;\n\t}\n\n\t// -- Color Section -- //\n\n\t@ConfigItem(\n\t\t\tposition \u003d 17,\n\t\t\tkeyName \u003d \"lifeColor\",\n\t\t\tname \u003d \"Life Color\",\n\t\t\tdescription \u003d \"Colors the health bar based on current health percentage.\",\n\t\t\tsection \u003d colorSection\n\t)\n\tdefault boolean lifeColor()\n\t{\n\t\treturn false;\n\t}\n\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 18,\n\t\t\tkeyName \u003d \"colorHealthBar\",\n\t\t\tname \u003d \"Health Color\",\n\t\t\tdescription \u003d \"Configures the color of the health bar.\",\n\t\t\tsection \u003d colorSection\n\t)\n\tdefault Color colorHealthBar()\n\t{\n\t\treturn (HEALTH_COLOR);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 19,\n\t\t\tkeyName \u003d \"colorPrayBar\",\n\t\t\tname \u003d \"Pray Color\",\n\t\t\tdescription \u003d \"Configures the color of the prayer bar.\",\n\t\t\tsection \u003d colorSection\n\t)\n\tdefault Color colorPrayBar()\n\t{\n\t\treturn (PRAY_COLOR);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 20,\n\t\t\tkeyName \u003d \"colorRunBar\",\n\t\t\tname \u003d \"Run Color\",\n\t\t\tdescription \u003d \"Configures the color of the energy bar.\",\n\t\t\tsection \u003d colorSection\n\t)\n\tdefault Color colorRunBar()\n\t{\n\t\treturn (RUN_COLOR);\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 21,\n\t\t\tkeyName \u003d \"colorSpecialBar\",\n\t\t\tname \u003d \"Special Color\",\n\t\t\tdescription \u003d \"Configures the color of the special attack bar.\",\n\t\t\tsection \u003d colorSection\n\t)\n\tdefault Color colorSpecialBar()\n\t{\n\t\treturn (SPECIAL_COLOR);\n\t}\n\n\n\t// -- Tracker Section -- //\n\n\t@ConfigItem(\n\t\t\tposition \u003d 22,\n\t\t\tkeyName \u003d \"enableXpTracking\",\n\t\t\tname \u003d \"Enable Tracking\",\n\t\t\tdescription \u003d \"Display the experience tracker.\",\n\t\t\tsection \u003d xpTracker\n\t)\n\tdefault boolean enableXpTracking() { return false; }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 23,\n\t\t\tkeyName \u003d \"mostRecentSkill\",\n\t\t\tname \u003d \"Recent Skill\",\n\t\t\tdescription \u003d \"Display the most recent skill trained.\",\n\t\t\tsection \u003d xpTracker\n\t)\n\tdefault boolean mostRecentSkill() { return false; }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 24,\n\t\t\tkeyName \u003d \"ignoreHitpoints\",\n\t\t\tname \u003d \"Ignore Hitpoints for Recent\",\n\t\t\tdescription \u003d \"Ignores the hitpoints skill when recent skill is being tracked\",\n\t\t\tsection \u003d xpTracker\n\t)\n\tdefault boolean ignoreHitpoints() { return true; }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 25,\n\t\t\tkeyName \u003d \"skill\",\n\t\t\tname \u003d \"Active Skill\",\n\t\t\tdescription \u003d \"Choose which skill to track when Recent Skill setting is disabled.\",\n\t\t\tsection \u003d xpTracker\n\t)\n\tdefault Skill skill()\n\t{\n\t\treturn Skill.ATTACK;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 26,\n\t\t\tkeyName \u003d \"xpbarColor\",\n\t\t\tname \u003d \"Experience Color\",\n\t\t\tdescription \u003d \"Configures the color of the Experience bar\",\n\t\t\tsection \u003d xpTracker\n\t)\n\tdefault Color colorXP()\n\t{\n\t\treturn EXP_COLOR;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 27,\n\t\t\tkeyName \u003d \"pos\",\n\t\t\tname \u003d \"Tracker Anchor\",\n\t\t\tdescription \u003d \"Position to anchor the xp tracker\",\n\t\t\tsection \u003d xpTracker\n\t)\n\tdefault Layout.POINT pos() {\n\t\treturn Layout.POINT.RIGHT;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 28,\n\t\t\tkeyName \u003d \"trackerWidth\",\n\t\t\tname \u003d \"XP Tracker Width\",\n\t\t\tdescription \u003d \"The width of the xp tracker.\",\n\t\t\tsection \u003d xpTracker\n\t)\n\tdefault int trackerWidth() {\n\t\treturn 170;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 29,\n\t\t\tkeyName \u003d \"xpBarHeight\",\n\t\t\tname \u003d \"Bar Height\",\n\t\t\tdescription \u003d \"The Height of the experience bar in the modern resizeable layout.\",\n\t\t\tsection \u003d xpTracker\n\t)\n\t@Range(\n\t\t\tmin \u003d 2,  // Minimum allowed width\n\t\t\tmax \u003d 100  // Maximum allowed width\n\t)\n\tdefault int xpBarHeight() {\n\t\treturn 10;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 30,\n\t\t\tkeyName \u003d \"xpNeeded\",\n\t\t\tname \u003d \"Exp Needed\",\n\t\t\tdescription \u003d \"Shows the number of xp needed to level-up.\",\n\t\t\tsection \u003d xpTracker\n\t)\n\tdefault boolean xpNeeded()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 31,\n\t\t\tkeyName \u003d \"actionsNeeded\",\n\t\t\tname \u003d \"Actions Needed\",\n\t\t\tdescription \u003d \"Shows the number of actions needed to level-up.\",\n\t\t\tsection \u003d xpTracker\n\t)\n\tdefault boolean actionsNeeded()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 32,\n\t\t\tkeyName \u003d \"xpGained\",\n\t\t\tname \u003d \"Exp Gained\",\n\t\t\tdescription \u003d \"Shows Experience gained for skill.\",\n\t\t\tsection \u003d xpTracker\n\t)\n\tdefault boolean xpGained()\n\t{\n\t\treturn true;\n\t}\n\n\n\t@ConfigItem(\n\t\t\tposition \u003d 33,\n\t\t\tkeyName \u003d \"xpHour\",\n\t\t\tname \u003d \"Exp/hr\",\n\t\t\tdescription \u003d \"Shows Experience per hour.\",\n\t\t\tsection \u003d xpTracker\n\t)\n\tdefault boolean xpHour()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 34,\n\t\t\tkeyName \u003d \"showTTG\",\n\t\t\tname \u003d \"Time to Level\",\n\t\t\tdescription \u003d \"Shows the amount of time until goal lvl reached.\",\n\t\t\tsection \u003d xpTracker\n\t)\n\tdefault boolean showTTG()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 35,\n\t\t\tkeyName \u003d \"showPercent\",\n\t\t\tname \u003d \"Percent\",\n\t\t\tdescription \u003d \"Shows the percentage leveled.\",\n\t\t\tsection \u003d xpTracker\n\t)\n\tdefault boolean showPercent()\n\t{\n\t\treturn true;\n\t}\n}\n","filePath":"src\\main\\java\\RHUD\\RHUD_Config.java"},{"fileName":"RHUD_Plugin.java","content":"/*\n * Copyright (c) 2018, Jos \u003cMalevolentdev@gmail.com\u003e\n * Copyright (c) 2023, Beardedrasta \u003cBeardedrasta@gmail.com\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\npackage RHUD;\n\nimport java.awt.*;\nimport java.awt.image.BufferedImage;\nimport javax.inject.Inject;\n\nimport lombok.Getter;\nimport net.runelite.api.*;\nimport net.runelite.api.events.*;\nimport net.runelite.api.widgets.ComponentID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.game.SkillIconManager;\nimport net.runelite.client.game.SpriteManager;\nimport net.runelite.client.plugins.itemstats.Effect;\nimport net.runelite.client.plugins.itemstats.ItemStatChangesService;\nimport net.runelite.client.plugins.itemstats.StatChange;\nimport net.runelite.client.ui.overlay.*;\n\nimport com.google.inject.Provides;\nimport RHUD.helpers.*;\n\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.game.AlternateSprites;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDependency;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.game.ItemStats;\nimport net.runelite.client.plugins.itemstats.ItemStatPlugin;\nimport net.runelite.client.plugins.xptracker.XpTrackerPlugin;\nimport net.runelite.client.plugins.xptracker.XpTrackerService;\n\nimport java.util.*;\nimport net.runelite.client.ui.overlay.components.LineComponent;\nimport net.runelite.client.ui.overlay.components.TitleComponent;\nimport net.runelite.client.util.ImageUtil;\n\nimport java.awt.Point;\nimport java.io.IOException;\nimport java.text.NumberFormat;\n\n\n@PluginDescriptor(name \u003d \"RHUD\", description \u003d \"Experience and Status bar hud for combat and skilling.\", tags \u003d { \"exp\",\n\t\t\"xp\", \"tracker\", \"status\", \"bar\" })\n@PluginDependency(XpTrackerPlugin.class)\n@PluginDependency(ItemStatPlugin.class)\npublic class RHUD_Plugin extends Plugin {\n\t// ------------------ Injected Dependencies ------------------\n\t@Inject\n\tprivate HUD hud;\n\t@Inject\n\tprivate Client client;\n\t@Inject\n\tprivate RHUD_Config config;\n\t@Inject\n\tprivate ClientThread clientThread;\n\t@Inject\n\tprivate OverlayManager manager;\n\t@Inject\n\tprivate ConfigManager configManager;\n\t@Getter\n\tpublic Skill currentSkill;\n\n\n\t// ------------------ XP Tracking Maps ------------------\n\tprivate final Map\u003cSkill, Integer\u003e previousXpMap \u003d new EnumMap\u003c\u003e(Skill.class);\n\tprivate final Map\u003cSkill, Integer\u003e lastXpGainMap \u003d new EnumMap\u003c\u003e(Skill.class);\n\tprivate final Map\u003cSkill, Integer\u003e xpAtSessionStartMap \u003d new EnumMap\u003c\u003e(Skill.class);\n\tprivate final Map\u003cSkill, Integer\u003e xpGainedInSessionMap \u003d new EnumMap\u003c\u003e(Skill.class);\n\n\t@Getter\n\tlong startTime \u003d System.currentTimeMillis();\n\n\t@Override\n\tprotected void startUp() {\n\t\tclientThread.invokeLater(this::initSessionXp);\n\t\tmanager.add(hud);\n\t}\n\n\t@Override\n\tprotected void shutDown() {\n\t\tmanager.remove(hud);\n\t}\n\n\t@Provides\n\tRHUD_Config provideConfig(ConfigManager configManager) {\n\t\treturn configManager.getConfig(RHUD_Config.class);\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event) {\n\t\tif (!event.getGroup().equals(RHUD_Config.GROUP)) {\n\t\t\treturn;\n\t\t}\n\n\t}\n\n\n\t@Subscribe\n\tpublic void onStatChanged(StatChanged statChanged) {\n\n\t\t// Skip HP if user wants that\n\t\tif (statChanged.getSkill() \u003d\u003d Skill.HITPOINTS \u0026\u0026 config.ignoreHitpoints()) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Also skip Overall to avoid double-counting\n\t\tSkill skill \u003d statChanged.getSkill();\n\t\tif (\"Overall\".equalsIgnoreCase(skill.getName())) {\n\t\t\treturn;\n\t\t}\n\n\t\tint newXp \u003d statChanged.getXp();\n\t\tif (!xpAtSessionStartMap.containsKey(skill)) {\n\t\t\txpAtSessionStartMap.put(skill, newXp);\n\t\t\txpGainedInSessionMap.put(skill, 0);\n\t\t}\n\n\t\tint oldXp \u003d previousXpMap.getOrDefault(skill, -1);\n\t\tif (oldXp \u003d\u003d -1) {\n\t\t\t// first time we see this skill, store xp, skip difference calc\n\t\t\tpreviousXpMap.put(skill, newXp);\n\t\t\treturn;\n\t\t}\n\n\t\t// Calculate XP difference\n\t\tint xpDiff \u003d newXp - oldXp;\n\t\tif (xpDiff \u003e 0) {\n\t\t\t// Update total session xp\n\t\t\tint oldSessionXp \u003d xpGainedInSessionMap.getOrDefault(skill, 0);\n\t\t\tint newSessionXp \u003d oldSessionXp + xpDiff;\n\t\t\txpGainedInSessionMap.put(skill, newSessionXp);\n\n\t\t\t// Track the most recent skill\n\t\t\tlastXpGainMap.put(skill, xpDiff);\n\t\t}\n\t\t// Update old xp for next event\n\t\tpreviousXpMap.put(skill, newXp);\n\n\t\tInteger lastXP \u003d lastXpGainMap.put(skill, statChanged.getXp());\n\n\t\tif (lastXP !\u003d null \u0026\u0026 lastXP !\u003d statChanged.getXp()) {\n\t\t\tcurrentSkill \u003d skill;\n\t\t}\n\t}\n\n\tprivate void initSessionXp() {\n\t\t// Called at plugin start or on reset\n\t\tfor (Skill skill : Skill.values()) {\n\t\t\txpAtSessionStartMap.put(skill, client.getSkillExperience((skill)));\n\t\t\txpGainedInSessionMap.put(skill, 0);\n\t\t}\n\t}\n\n\tpublic int getlastXpGainForSkill(Skill skill) {\n\t\treturn lastXpGainMap.getOrDefault(skill, 0);\n\t}\n\n\tpublic int xpGainedInSessionMap(Skill skill) {\n\t\treturn xpGainedInSessionMap.getOrDefault(skill, 0);\n\t}\n}\n\n/////// HUD SETUP ///////\n\nclass HUD extends OverlayPanel {\n\tprivate Client client;\n\tprivate RHUD_Plugin plugin;\n\tprivate RHUD_Config config;\n\tprivate SpriteManager spriteManager;\n\tprivate ItemStatChangesService itemStatService;\n\tprivate XpTrackerService xpTrackerService;\n\n\tprivate Image prayerIcon, heartDisease, heartPoison, heartVenom, heartIcon, energyIcon, specialIcon;\n\n\tprivate static final int IMAGE_SIZE \u003d 17;\n\tprivate static final int MAX_RUN_ENERGY_VALUE \u003d 100;\n\tprivate static final int MAX_SPECIAL_ATTACK_VALUE \u003d 100;\n\tpublic int ACTIVE \u003d 0;\n\tprivate static final Dimension ICON_DIMENSIONS \u003d new Dimension(18, 17);\n\n\t// Colors you use for bars\n\tprivate static final Color VENOMED_COLOR \u003d new Color(0, 65, 0, 255);\n\tprivate static final Color POISONED_COLOR \u003d new Color(0, 145, 0, 255);\n\tprivate static final Color DISEASE_COLOR \u003d new Color(176, 134, 53, 255);\n\tprivate static final Color PARASITE_COLOR \u003d new Color(196, 62, 109, 255);\n\tprivate static final Color HEAL_COLOR \u003d new Color(255, 112, 6, 150);\n\tprivate static final Color ACTIVE_PRAYER_COLOR \u003d new Color(43, 234, 159, 255);\n\tprivate static final Color PRAYER_HEAL_COLOR \u003d new Color(57, 255, 186, 75);\n\tprivate static final Color RUN_STAMINA_COLOR \u003d new Color(168, 124, 62, 255);\n\tprivate static final Color RUN_ACTIVE \u003d new Color(185, 187, 0, 255);\n\tprivate static final Color ENERGY_HEAL_COLOR \u003d new Color(199, 118, 0, 218);\n\tprivate static final Color SPECIAL_ACTIVE \u003d new Color(4, 173, 1, 255);\n\n\tprivate final Map\u003cLayout.BARMODE, Render\u003e barMode \u003d new EnumMap\u003c\u003e(Layout.BARMODE.class);\n\tprivate final Map\u003cLayout.XPBARMODE, XpRender\u003e xpBarMode \u003d new EnumMap\u003cLayout.XPBARMODE, XpRender\u003e(Layout.XPBARMODE.class);\n\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged) {\n\t\t// Example message on loginw\n\t\tif (gameStateChanged.getGameState() \u003d\u003d GameState.LOGGED_IN) {\n\t\t\tclient.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"RHUD plugin is active!\", null);\n\t\t}\n\t}\n\n\t@Inject\n\tprivate ItemManager itemManager;\n\n\tprivate final GradientPaint gradient \u003d new GradientPaint(0, 0, new Color(139, 0, 98), 0, 90 + 5, Color.BLACK, true);\n\n\t@Inject\n\tprivate HUD(Client client, RHUD_Plugin plugin, RHUD_Config config,\n\t\t\tSkillIconManager iconManager,\n\t\t\tItemStatChangesService itemStatService,\n\t\t\tSpriteManager spriteManager,\n\t\t\tXpTrackerService xpTrackerService) {\n\t\tsuper(plugin);\n\t\tthis.client \u003d client;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t\tthis.itemStatService \u003d itemStatService;\n\t\tthis.spriteManager \u003d spriteManager;\n\t\tthis.xpTrackerService \u003d xpTrackerService;\n\n\t\tsetPosition(OverlayPosition.ABOVE_CHATBOX_RIGHT);\n\t\tsetLayer(OverlayLayer.ABOVE_WIDGETS);\n\n\t\tprayerIcon \u003d ImageUtil.resizeCanvas(\n\t\t\t\tImageUtil.resizeImage(iconManager.getSkillImage(Skill.PRAYER, true), IMAGE_SIZE, IMAGE_SIZE),\n\t\t\t\tICON_DIMENSIONS.width, ICON_DIMENSIONS.height);\n\t\theartDisease \u003d ImageUtil.resizeCanvas(\n\t\t\t\tImageUtil.loadImageResource(AlternateSprites.class, AlternateSprites.DISEASE_HEART),\n\t\t\t\tICON_DIMENSIONS.width, ICON_DIMENSIONS.height);\n\t\theartPoison \u003d ImageUtil.resizeCanvas(\n\t\t\t\tImageUtil.loadImageResource(AlternateSprites.class, AlternateSprites.POISON_HEART),\n\t\t\t\tICON_DIMENSIONS.width, ICON_DIMENSIONS.height);\n\t\theartVenom \u003d ImageUtil.resizeCanvas(\n\t\t\t\tImageUtil.loadImageResource(AlternateSprites.class, AlternateSprites.VENOM_HEART),\n\t\t\t\tICON_DIMENSIONS.width, ICON_DIMENSIONS.height);\n\n\t\tsetBarMode();\n\t}\n\n\tprivate void setBarMode() {\n\t\txpBarMode.put(Layout.XPBARMODE.DISABLED, null);\n\t\txpBarMode.put(Layout.XPBARMODE.EXPERIENCE, new XpRender(\n\t\t\t\t// max value: difference between next level XP and current level XP\n\t\t\t\t() -\u003e {\n\t\t\t\t\tSkill skill \u003d config.mostRecentSkill()\n\t\t\t\t\t\t\t? (plugin.currentSkill \u003d\u003d null ? config.skill() : plugin.currentSkill)\n\t\t\t\t\t\t\t: config.skill();\n\t\t\t\t\tint xp \u003d client.getSkillExperience(skill);\n\t\t\t\t\tint currentLevel \u003d Experience.getLevelForXp(xp);\n\t\t\t\t\tint nextLevelXP \u003d Experience.getXpForLevel(currentLevel + 1);\n\t\t\t\t\tint currentLevelXP \u003d Experience.getXpForLevel(currentLevel);\n\t\t\t\t\treturn nextLevelXP - currentLevelXP;\n\t\t\t\t},\n\t\t\t\t// current value: XP progress within the level\n\t\t\t\t() -\u003e {\n\t\t\t\t\tSkill skill \u003d config.mostRecentSkill()\n\t\t\t\t\t\t\t? (plugin.currentSkill \u003d\u003d null ? config.skill() : plugin.currentSkill)\n\t\t\t\t\t\t\t: config.skill();\n\t\t\t\t\tint xp \u003d client.getSkillExperience(skill);\n\t\t\t\t\tint currentLevel \u003d Experience.getLevelForXp(xp);\n\t\t\t\t\tint currentLevelXP \u003d Experience.getXpForLevel(currentLevel);\n\t\t\t\t\treturn xp - currentLevelXP;\n\t\t\t\t},\n\t\t\t\t// heal supplier (if you dont have healing for XP, just return 0)\n\t\t\t\t() -\u003e 0,\n\t\t\t\t// color supplier for the XP bar\n\t\t\t\t() -\u003e config.colorXP(),\n\t\t\t\t// notch or secondary color supplier  use a default or a config value\n\t\t\t\t() -\u003e new Color(0x6C6C6C)// config.colorXPNotches(),\n\t\t));\n\t\tbarMode.put(Layout.BARMODE.DISABLED, null);\n\t\tbarMode.put(Layout.BARMODE.HITPOINTS, new Render(\n\t\t\t\t() -\u003e inLms() ? Experience.MAX_REAL_LEVEL : client.getRealSkillLevel(Skill.HITPOINTS),\n\t\t\t\t() -\u003e client.getBoostedSkillLevel(Skill.HITPOINTS),\n\t\t\t\t() -\u003e getRestoreValue(Skill.HITPOINTS.getName()),\n\t\t\t\t() -\u003e {\n\t\t\t\t\tfinal int poisonState \u003d client.getVarpValue(VarPlayer.POISON);\n\n\t\t\t\t\tif (poisonState \u003e\u003d 1000000) {\n\t\t\t\t\t\treturn VENOMED_COLOR;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (poisonState \u003e 0) {\n\t\t\t\t\t\treturn POISONED_COLOR;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (client.getVarpValue(VarPlayer.DISEASE_VALUE) \u003e 0) {\n\t\t\t\t\t\treturn DISEASE_COLOR;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (client.getVarbitValue(Varbits.PARASITE) \u003e\u003d 1) {\n\t\t\t\t\t\treturn PARASITE_COLOR;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (config.lifeColor()) {\n\t\t\t\t\t\tint maxHealth \u003d client.getRealSkillLevel(Skill.HITPOINTS);\n\t\t\t\t\t\tint currentHealth \u003d client.getBoostedSkillLevel(Skill.HITPOINTS);\n\n\t\t\t\t\t\t// Calculate health percentage\n\t\t\t\t\t\tfloat healthPercentage \u003d (float) currentHealth / maxHealth;\n\n\t\t\t\t\t\t// Interpolate between green (full health) and red (low health)\n\t\t\t\t\t\tint red \u003d (int) (255 * (1 - healthPercentage)); // Increases as health decreases\n\t\t\t\t\t\tint green \u003d (int) (255 * healthPercentage); // Decreases as health decreases\n\n\t\t\t\t\t\treturn new Color(red, green, 0); // Dynamic color based on health percentage\n\t\t\t\t\t}\n\n\t\t\t\t\treturn config.colorHealthBar();\n\t\t\t\t},\n\t\t\t\t() -\u003e HEAL_COLOR,\n\t\t\t\t() -\u003e {\n\t\t\t\t\tfinal int poisonState \u003d client.getVarpValue(VarPlayer.POISON);\n\n\t\t\t\t\tif (poisonState \u003e 0 \u0026\u0026 poisonState \u003c 50) {\n\t\t\t\t\t\treturn heartPoison;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (poisonState \u003e\u003d 1000000) {\n\t\t\t\t\t\treturn heartVenom;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (client.getVarpValue(VarPlayer.DISEASE_VALUE) \u003e 0) {\n\t\t\t\t\t\treturn heartDisease;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn heartIcon;\n\t\t\t\t}));\n\t\tbarMode.put(Layout.BARMODE.PRAYER, new Render(\n\t\t\t\t() -\u003e inLms() ? Experience.MAX_REAL_LEVEL : client.getRealSkillLevel(Skill.PRAYER),\n\t\t\t\t() -\u003e client.getBoostedSkillLevel(Skill.PRAYER),\n\t\t\t\t() -\u003e getRestoreValue(Skill.PRAYER.getName()),\n\t\t\t\t() -\u003e {\n\t\t\t\t\tColor prayerColor \u003d config.colorPrayBar();\n\n\t\t\t\t\tfor (Prayer pray : Prayer.values()) {\n\t\t\t\t\t\tif (client.getVarbitValue(4101) !\u003d 0) {\n\t\t\t\t\t\t\tprayerColor \u003d ACTIVE_PRAYER_COLOR;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn prayerColor;\n\t\t\t\t},\n\t\t\t\t() -\u003e PRAYER_HEAL_COLOR,\n\t\t\t\t() -\u003e prayerIcon));\n\t\tbarMode.put(Layout.BARMODE.RUN_ENERGY, new Render(\n\t\t\t\t() -\u003e MAX_RUN_ENERGY_VALUE,\n\t\t\t\t() -\u003e client.getEnergy() / 100,\n\t\t\t\t() -\u003e getRestoreValue(\"Run Energy\"),\n\t\t\t\t() -\u003e {\n\t\t\t\t\tif (client.getVarbitValue(Varbits.RUN_SLOWED_DEPLETION_ACTIVE) !\u003d 0) {\n\t\t\t\t\t\treturn RUN_STAMINA_COLOR;\n\t\t\t\t\t} else if (client.getVarpValue(173) \u003d\u003d 1) {\n\t\t\t\t\t\treturn RUN_ACTIVE;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn config.colorRunBar();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() -\u003e ENERGY_HEAL_COLOR,\n\t\t\t\t() -\u003e energyIcon));\n\t\tbarMode.put(Layout.BARMODE.SPECIAL_ATTACK, new Render(\n\t\t\t\t() -\u003e MAX_SPECIAL_ATTACK_VALUE,\n\t\t\t\t() -\u003e client.getVarpValue(VarPlayer.SPECIAL_ATTACK_PERCENT) / 10,\n\t\t\t\t() -\u003e 0,\n\t\t\t\t() -\u003e {\n\t\t\t\t\tif (client.getVarpValue(301) \u003d\u003d 1) {\n\t\t\t\t\t\treturn SPECIAL_ACTIVE;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn config.colorSpecialBar();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tconfig::colorSpecialBar,\n\t\t\t\t() -\u003e specialIcon));\n\t}\n\n\n\t@Override\n\tpublic Dimension render(Graphics2D g) {\n\t\tDimension dimension \u003d null;\n\t\tWidget bankContainer \u003d client.getWidget(ComponentID.BANK_ITEM_CONTAINER);\n\n\n\t\tif (bankContainer \u003d\u003d null || bankContainer.isHidden()) {\n\t\t\tint width \u003d config.barWidth(), adjX \u003d config.barOffsetX();\n\t\t\tint adjY \u003d config.barOffsetY();\n\t\t\tint totalHeight \u003d 0;\n\t\t\tint totalWidth \u003d 0;\n\t\t\tint x \u003d adjX, y \u003d adjY;\n\n\t\t\tXpRender Bar1 \u003d xpBarMode.get(config.bar1BarMode());\n\t\t\tRender Bar2 \u003d barMode.get(config.bar2BarMode());\n\t\t\tRender Bar3 \u003d barMode.get(config.bar3BarMode());\n\t\t\tRender Bar4 \u003d barMode.get(config.bar4BarMode());\n\t\t\tRender Bar5 \u003d barMode.get(config.bar5BarMode());\n\n\n\t\t\tg.setColor(Color.BLACK);\n\t\t\tif (config.showHeader() \u0026\u0026 config.layout() !\u003d Layout.VIEW.VERTICAL) {\n\t\t\t\tif (Bar1 !\u003d null) {\n\t\t\t\t\ttotalHeight +\u003d config.xpBarHeight();\n\t\t\t\t\tg.drawRect(adjX - 3, adjY - 21, config.barWidth() + 5, totalHeight + 23);\n\t\t\t\t}\n\t\t\t\tif (Bar2 !\u003d null) {\n\t\t\t\t\ttotalHeight +\u003d config.barHeight();\n\t\t\t\t\tg.drawRect(adjX - 3, adjY - 21, config.barWidth() + 5, totalHeight + 23);\n\t\t\t\t}\n\t\t\t\tif (Bar3 !\u003d null) {\n\t\t\t\t\ttotalHeight +\u003d config.barHeight();\n\t\t\t\t\tg.drawRect(adjX - 3, adjY - 21, config.barWidth() + 5, totalHeight + 23);\n\t\t\t\t}\n\t\t\t\tif (Bar4 !\u003d null) {\n\t\t\t\t\ttotalHeight +\u003d config.barHeight();\n\t\t\t\t\tg.drawRect(adjX - 3, adjY - 21, config.barWidth() + 5, totalHeight + 23);\n\t\t\t\t}\n\t\t\t\tif (Bar5 !\u003d null) {\n\t\t\t\t\ttotalHeight +\u003d config.barHeight();\n\t\t\t\t\tg.drawRect(adjX - 3, adjY - 21, config.barWidth() + 5, totalHeight + 23);\n\t\t\t\t}\n\n\t\t\t\tdrawGradientBar(g, adjX - 2, adjY - 20, totalHeight + 22, false);\n\t\t\t} else {\n\t\t\t\tif (Bar1 !\u003d null) {\n\t\t\t\t\tif (config.layout() \u003d\u003d Layout.VIEW.VERTICAL) {\n\t\t\t\t\t\ttotalHeight +\u003d config.xpBarHeight();\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttotalHeight +\u003d config.xpBarHeight();\n\t\t\t\t\t\tg.drawRect(adjX - 3, adjY - 4, config.barWidth() + 5, totalHeight + 7);\n\t\t\t\t\t\tdrawGradientBar(g, adjX - 2, adjY - 3, totalHeight + 6, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (Bar2 !\u003d null) {\n\t\t\t\t\tif (config.layout() \u003d\u003d Layout.VIEW.VERTICAL) {\n\t\t\t\t\t\ttotalHeight +\u003d config.barHeight();\n\t\t\t\t\t\tg.drawRect(adjX - 7, adjY + 5, totalHeight - 3, config.barWidth() + 5);\n\t\t\t\t\t\tdrawGradientBar(g, adjX - 6, adjY + 6, totalHeight - 2, true);\n\t\t\t\t\t} else if (config.layout() \u003d\u003d Layout.VIEW.GRID) {\n\t\t\t\t\t\ttotalHeight +\u003d config.barHeight();\n\t\t\t\t\t\tg.drawRect(adjX - 3, adjY - 4, config.barWidth() + 5, totalHeight + 7);\n\t\t\t\t\t\tdrawGradientBar(g, adjX - 2, adjY - 3, totalHeight + 6, false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttotalHeight +\u003d config.barHeight();\n\t\t\t\t\t\tg.drawRect(adjX - 3, adjY - 4, config.barWidth() + 5, totalHeight + 7);\n\t\t\t\t\t\tdrawGradientBar(g, adjX - 2, adjY - 3, totalHeight + 6, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (Bar3 !\u003d null) {\n\t\t\t\t\tif (config.layout() \u003d\u003d Layout.VIEW.VERTICAL) {\n\t\t\t\t\t\ttotalHeight +\u003d config.barHeight();\n\t\t\t\t\t\tg.drawRect(adjX - 7, adjY + 5, totalHeight, config.barWidth() + 5);\n\t\t\t\t\t\tdrawGradientBar(g, adjX - 6, adjY + 6, totalHeight + 1, true);\n\t\t\t\t\t} else if (config.layout() \u003d\u003d Layout.VIEW.GRID) {\n\t\t\t\t\t\t// g.drawRect(adjX - 7, adjY + 5, totalHeight + 3, config.barWidth() + 5);\n\t\t\t\t\t\t// drawGradientBar(g, adjX - 6, adjY + 6, totalHeight + 4, true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttotalHeight +\u003d config.barHeight();\n\t\t\t\t\t\tg.drawRect(adjX - 3, adjY - 4, config.barWidth() + 5, totalHeight + 7);\n\t\t\t\t\t\tdrawGradientBar(g, adjX - 2, adjY - 3, totalHeight + 6, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (Bar4 !\u003d null) {\n\t\t\t\t\tif (config.layout() \u003d\u003d Layout.VIEW.VERTICAL) {\n\t\t\t\t\t\ttotalHeight +\u003d config.barHeight();\n\t\t\t\t\t\tg.drawRect(adjX - 7, adjY + 5, totalHeight + 1, config.barWidth() + 5);\n\t\t\t\t\t\tdrawGradientBar(g, adjX - 6, adjY + 6, totalHeight + 2, true);\n\t\t\t\t\t} else if (config.layout() \u003d\u003d Layout.VIEW.GRID) {\n\t\t\t\t\t\ttotalHeight +\u003d config.barHeight();\n\t\t\t\t\t\tg.drawRect(adjX - 3, adjY - 4, config.barWidth() + 5, totalHeight + 7);\n\t\t\t\t\t\tdrawGradientBar(g, adjX - 2, adjY - 3, totalHeight + 6, false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttotalHeight +\u003d config.barHeight();\n\t\t\t\t\t\tg.drawRect(adjX - 3, adjY - 4, config.barWidth() + 5, totalHeight + 7);\n\t\t\t\t\t\tdrawGradientBar(g, adjX - 2, adjY - 3, totalHeight + 6, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (Bar5 !\u003d null) {\n\t\t\t\t\tif (config.layout() \u003d\u003d Layout.VIEW.VERTICAL) {\n\t\t\t\t\t\ttotalHeight +\u003d config.barHeight();\n\t\t\t\t\t\tg.drawRect(adjX - 7, adjY + 5, totalHeight + 3, config.barWidth() + 5);\n\t\t\t\t\t\tdrawGradientBar(g, adjX - 6, adjY + 6, totalHeight + 4, true);\n\t\t\t\t\t} else if (config.layout() \u003d\u003d Layout.VIEW.GRID) {\n\t\t\t\t\t\t// g.drawRect(adjX - 7, adjY + 5, totalHeight + 3, config.barWidth() + 5);\n\t\t\t\t\t\t// drawGradientBar(g, adjX - 6, adjY + 6, totalHeight + 4, true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttotalHeight +\u003d config.barHeight();\n\t\t\t\t\t\tg.drawRect(adjX - 3, adjY - 4, config.barWidth() + 5, totalHeight + 7);\n\t\t\t\t\t\tdrawGradientBar(g, adjX - 2, adjY - 3, totalHeight + 6, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (config.enableXpTracking()) {\n\t\t\t\trenderTrackerOverlay(g, x, y, totalHeight);\n\t\t\t}\n\n\t\t\tFontAssistant.updateFont(config.fontName(), config.fontSize(), config.fontStyle());\n\t\t\tFontAssistant.initFont(g);\n\t\t\ttry {\n\t\t\t\tbuildIcons();\n\t\t\t} catch (IOException e) {\n\t\t\t\tthrow new RuntimeException(e);\n\t\t\t}\n\n\t\t\tif (Bar1 !\u003d null) {\n\t\t\t\tif (config.layout() \u003d\u003d Layout.VIEW.VERTICAL) {\n\n\t\t\t\t} else {\n\t\t\t\t\tBar1.renderBar(config, g, adjX, adjY, width);\n\t\t\t\t\tadjY +\u003d config.xpBarHeight();\n\t\t\t\t\ty +\u003d y;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (Bar2 !\u003d null) {\n\t\t\t\tif (config.layout() \u003d\u003d Layout.VIEW.VERTICAL) {\n\t\t\t\t\tBar2.renderBar(config, g, x - 2, y - 2 + config.xpBarHeight());\n\t\t\t\t\tx +\u003d config.barHeight();\n\t\t\t\t} else if (config.layout() \u003d\u003d Layout.VIEW.GRID) {\n\t\t\t\t\tBar2.renderBar(config, g, adjX, adjY);\n\t\t\t\t\t// adjY +\u003d config.barHeight();\n\t\t\t\t} else {\n\t\t\t\t\tBar2.renderBar(config, g, adjX, adjY);\n\t\t\t\t\tadjY +\u003d config.barHeight();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (Bar3 !\u003d null) {\n\t\t\t\tif (config.layout() \u003d\u003d Layout.VIEW.VERTICAL) {\n\t\t\t\t\tBar3.renderBar(config, g, x, y - 2 + config.xpBarHeight());\n\t\t\t\t\tx +\u003d config.barHeight();\n\t\t\t\t} else if (config.layout() \u003d\u003d Layout.VIEW.GRID) {\n\t\t\t\t\tBar3.renderBar(config, g, adjX + width / 2, adjY);\n\t\t\t\t\tadjY +\u003d config.barHeight();\n\t\t\t\t} else {\n\t\t\t\t\tBar3.renderBar(config, g, adjX, adjY);\n\t\t\t\t\tadjY +\u003d config.barHeight();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (Bar4 !\u003d null) {\n\t\t\t\tif (config.layout() \u003d\u003d Layout.VIEW.VERTICAL) {\n\t\t\t\t\tBar4.renderBar(config, g, x + 2, y - 2 + config.xpBarHeight());\n\t\t\t\t\tx +\u003d config.barHeight();\n\t\t\t\t} else if (config.layout() \u003d\u003d Layout.VIEW.GRID) {\n\t\t\t\t\tBar4.renderBar(config, g, adjX, adjY);\n\t\t\t\t\t// adjY +\u003d config.barHeight();\n\t\t\t\t} else {\n\t\t\t\t\tBar4.renderBar(config, g, adjX, adjY);\n\t\t\t\t\tadjY +\u003d config.barHeight();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (Bar5 !\u003d null) {\n\t\t\t\tif (config.layout() \u003d\u003d Layout.VIEW.VERTICAL) {\n\t\t\t\t\tBar5.renderBar(config, g, x + 4, y - 2 + config.xpBarHeight());\n\t\t\t\t} else if (config.layout() \u003d\u003d Layout.VIEW.GRID) {\n\t\t\t\t\tBar5.renderBar(config, g, adjX + width / 2, adjY);\n\t\t\t\t\t// adjY +\u003d config.barHeight();\n\t\t\t\t} else {\n\t\t\t\t\tBar5.renderBar(config, g, adjX, adjY);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tg.setColor(Color.WHITE);\n\t\t\tPlayer localPlayer \u003d client.getLocalPlayer();\n\t\t\tif (localPlayer !\u003d null \u0026\u0026 config.showHeader()) {\n\t\t\t\tString playerName \u003d localPlayer.getName();\n\t\t\t\tint combatLevel \u003d localPlayer.getCombatLevel();\n\t\t\t\tg.drawString(playerName + \"     Lv.\" + combatLevel, 5, -5);\n\t\t\t}\n\n\t\t\tif (Bar1 \u003d\u003d null \u0026\u0026 Bar2 \u003d\u003d null \u0026\u0026 Bar3 \u003d\u003d null \u0026\u0026 Bar4 \u003d\u003d null \u0026\u0026 Bar5 \u003d\u003d null) {\n\t\t\t\tdimension \u003d panelComponent.render(g);\n\t\t\t} else if (config.layout() \u003d\u003d Layout.VIEW.VERTICAL) {\n\t\t\t\tif (config.enableXpTracking()) {\n\t\t\t\t\tpanelComponent.render(g);\n\t\t\t\t}\n\t\t\t\tdimension \u003d new Dimension(totalHeight, config.barWidth());\n\t\t\t} else {\n\t\t\t\tif (config.enableXpTracking()) {\n\t\t\t\t\tpanelComponent.render(g);\n\t\t\t\t}\n\t\t\t\tdimension \u003d new Dimension(config.barWidth(), totalHeight);\n\t\t\t}\n\t\t}\n\t\treturn dimension;\n\t}\n\n\tprivate void renderTrackerOverlay(Graphics2D g, int x, int y, int total) {\n\t\tXpRender Bar1 \u003d xpBarMode.get(config.bar1BarMode());\n\t\tRender Bar2 \u003d barMode.get(config.bar2BarMode());\n\t\tRender Bar3 \u003d barMode.get(config.bar3BarMode());\n\t\tRender Bar4 \u003d barMode.get(config.bar4BarMode());\n\t\tRender Bar5 \u003d barMode.get(config.bar5BarMode());\n\t\tg.setColor(Color.BLACK);\n\t\tpanelComponent.getChildren().clear();\n\t\tif (config.layout() \u003d\u003d Layout.VIEW.VERTICAL) {\n\t\t\tif (Bar1 \u003d\u003d null \u0026\u0026 Bar2 \u003d\u003d null \u0026\u0026 Bar3 \u003d\u003d null \u0026\u0026 Bar4 \u003d\u003d null \u0026\u0026 Bar5 \u003d\u003d null) {\n\t\t\t\tpanelComponent.setPreferredLocation(new Point(x, y));\n\t\t\t} else if (config.pos() \u003d\u003d Layout.POINT.LEFT) {\n\t\t\t\tpanelComponent.setPreferredLocation(new Point(x - config.trackerWidth() - 8, y + 4));\n\t\t\t} else if (config.pos() \u003d\u003d Layout.POINT.TOPLEFT) {\n\t\t\t\tpanelComponent.setPreferredLocation(new Point(x - 8, y + 4 - panelComponent.getBounds().height));\n\t\t\t} else if (config.pos() \u003d\u003d Layout.POINT.TOPRIGHT) {\n\t\t\t\tpanelComponent.setPreferredLocation(new Point(x + total - panelComponent.getBounds().width,\n\t\t\t\t\t\ty + 4 - panelComponent.getBounds().height));\n\t\t\t} else if (config.pos() \u003d\u003d Layout.POINT.BOTTOMLEFT) {\n\t\t\t\tpanelComponent.setPreferredLocation(new Point(x - 4, y + 10 + config.barWidth()));\n\t\t\t} else if (config.pos() \u003d\u003d Layout.POINT.BOTTOMRIGHT) {\n\t\t\t\tpanelComponent.setPreferredLocation(\n\t\t\t\t\t\tnew Point(x + total - panelComponent.getBounds().width, y + 10 + config.barWidth()));\n\t\t\t} else {\n\t\t\t\tpanelComponent.setPreferredLocation(new Point(x + total, y + 4));\n\t\t\t}\n\t\t} else {\n\t\t\tif (Bar1 \u003d\u003d null \u0026\u0026 Bar2 \u003d\u003d null \u0026\u0026 Bar3 \u003d\u003d null \u0026\u0026 Bar4 \u003d\u003d null \u0026\u0026 Bar5 \u003d\u003d null) {\n\t\t\t\tpanelComponent.setPreferredLocation(new Point(x, y));\n\t\t\t} else if (config.pos() \u003d\u003d Layout.POINT.LEFT) {\n\t\t\t\tpanelComponent.setPreferredLocation(new Point(x - config.trackerWidth() - 6, y - 4));\n\t\t\t} else if (config.pos() \u003d\u003d Layout.POINT.TOPLEFT) {\n\t\t\t\tpanelComponent.setPreferredLocation(new Point(x, y - 4 - panelComponent.getBounds().height));\n\t\t\t} else if (config.pos() \u003d\u003d Layout.POINT.TOPRIGHT) {\n\t\t\t\tpanelComponent.setPreferredLocation(new Point(x + config.barWidth() - panelComponent.getBounds().width,\n\t\t\t\t\t\ty - 4 - panelComponent.getBounds().height));\n\t\t\t} else if (config.pos() \u003d\u003d Layout.POINT.BOTTOMLEFT) {\n\t\t\t\tpanelComponent.setPreferredLocation(new Point(x, y + 4 + total));\n\t\t\t} else if (config.pos() \u003d\u003d Layout.POINT.BOTTOMRIGHT) {\n\t\t\t\tpanelComponent.setPreferredLocation(\n\t\t\t\t\t\tnew Point(x + config.barWidth() - panelComponent.getBounds().width, y + 4 + total));\n\t\t\t} else {\n\t\t\t\tpanelComponent.setPreferredLocation(new Point(x + config.barWidth() + 6, y - 4));\n\t\t\t}\n\t\t}\n\t\tpanelComponent.setPreferredSize(new Dimension(config.trackerWidth(), 100));\n\n\t\tSkill skill;\n\t\tString name;\n\t\tint totalHeight \u003d 0;\n\n\t\tif (config.mostRecentSkill() \u0026\u0026 plugin.currentSkill \u003d\u003d null || !config.mostRecentSkill()) {\n\t\t\tskill \u003d config.skill();\n\t\t\tname \u003d config.skill().getName();\n\t\t} else if (config.mostRecentSkill()) {\n\t\t\tskill \u003d plugin.currentSkill;\n\t\t\tname \u003d plugin.currentSkill.getName();\n\t\t} else {\n\t\t\tskill \u003d plugin.currentSkill;\n\t\t\tname \u003d plugin.currentSkill.getName();\n\n\t\t}\n\n\t\tint xpGainedLastTime \u003d plugin.getlastXpGainForSkill(skill);\n\t\tint currentXP \u003d client.getSkillExperience(skill);\n\t\tint currentLevel \u003d Experience.getLevelForXp(currentXP);\n\t\tint nextLevelXP \u003d Experience.getXpForLevel(currentLevel + 1);\n\t\tint xpNeeded \u003d nextLevelXP - currentXP;\n\t\tfinal int counterLevel \u003d client.getBoostedSkillLevel(skill);\n\t\tfinal String counterLevelText \u003d Integer.toString(counterLevel);\n\t\t// int startXp \u003d Experience.getXpForLevel(currentLevel);\n\t\t// int goalXp \u003d Experience.getXpForLevel(currentLevel + 1);\n\t\tint startXp \u003d xpTrackerService.getStartGoalXp(skill);\n\t\tint goalXp \u003d xpTrackerService.getEndGoalXp(skill);\n\t\tNumberFormat f \u003d NumberFormat.getNumberInstance(Locale.US);\n\t\tString skillCurrentXp \u003d f.format(currentXP);\n\n\t\tColor BODY_COLOUR \u003d null;\n\t\tColor LEFT_TEXT;\n\n\t\tswitch (name) {\n\t\t\tcase \"Cooking\":\n\t\t\t\tBODY_COLOUR \u003d new Color(0x5B266A);\n\t\t\t\tbreak;\n\t\t\tcase \"Attack\":\n\t\t\t\tBODY_COLOUR \u003d new Color(0xC20404);\n\t\t\t\tbreak;\n\t\t\tcase \"Strength\":\n\t\t\t\tBODY_COLOUR \u003d new Color(0x0D704A);\n\t\t\t\tbreak;\n\t\t\tcase \"Defence\":\n\t\t\t\tBODY_COLOUR \u003d new Color(0x687AB8);\n\t\t\t\tbreak;\n\t\t\tcase \"Ranged\":\n\t\t\t\tBODY_COLOUR \u003d new Color(0x5D761D);\n\t\t\t\tbreak;\n\t\t\tcase \"Prayer\":\n\t\t\t\tBODY_COLOUR \u003d new Color(0xFFFFFF);\n\t\t\t\tbreak;\n\t\t\tcase \"Magic\":\n\t\t\t\tBODY_COLOUR \u003d new Color(0x343791);\n\t\t\t\tbreak;\n\t\t\tcase \"Runecraft\":\n\t\t\t\tBODY_COLOUR \u003d new Color(0xD28735);\n\t\t\t\tbreak;\n\t\t\tcase \"Construction\":\n\t\t\t\tBODY_COLOUR \u003d new Color(0xA39782);\n\t\t\t\tbreak;\n\t\t\tcase \"Hitpoints\":\n\t\t\t\tBODY_COLOUR \u003d new Color(0xCFCEC9);\n\t\t\t\tbreak;\n\t\t\tcase \"Agility\":\n\t\t\t\tBODY_COLOUR \u003d new Color(0x2A2C74);\n\t\t\t\tbreak;\n\t\t\tcase \"Herblore\":\n\t\t\t\tBODY_COLOUR \u003d new Color(0x119E3F);\n\t\t\t\tbreak;\n\t\t\tcase \"Thieving\":\n\t\t\t\tBODY_COLOUR \u003d new Color(0x734161);\n\t\t\t\tbreak;\n\t\t\tcase \"Crafting\":\n\t\t\t\tBODY_COLOUR \u003d new Color(0x997140);\n\t\t\t\tbreak;\n\t\t\tcase \"Fletching\":\n\t\t\t\tBODY_COLOUR \u003d new Color(0x094C4D);\n\t\t\t\tbreak;\n\t\t\tcase \"Slayer\":\n\t\t\t\tBODY_COLOUR \u003d new Color(0x5F1109);\n\t\t\t\tbreak;\n\t\t\tcase \"Hunter\":\n\t\t\t\tBODY_COLOUR \u003d new Color(0x6F694B);\n\t\t\t\tbreak;\n\t\t\tcase \"Mining\":\n\t\t\t\tBODY_COLOUR \u003d new Color(0x75BEE1);\n\t\t\t\tbreak;\n\t\t\tcase \"Smithing\":\n\t\t\t\tBODY_COLOUR \u003d new Color(0x86867C);\n\t\t\t\tbreak;\n\t\t\tcase \"Fishing\":\n\t\t\t\tBODY_COLOUR \u003d new Color(0x728FAA);\n\t\t\t\tbreak;\n\t\t\tcase \"Woodcutting\":\n\t\t\t\tBODY_COLOUR \u003d new Color(0x455E37);\n\t\t\t\tbreak;\n\t\t\tcase \"Firemaking\":\n\t\t\t\tBODY_COLOUR \u003d new Color(0xD16F1A);\n\t\t\t\tbreak;\n\t\t\tcase \"Farming\":\n\t\t\t\tBODY_COLOUR \u003d new Color(0x2A5A2A);\n\t\t\t\tbreak;\n\t\t}\n\n\t\tLEFT_TEXT \u003d new Color(0xFFDC02);\n\n\t\tFontAssistant.updateFont(config.fontName(), 14, config.fontStyle());\n\t\tFontAssistant.initFont(g);\n\n\t\tpanelComponent.getChildren().clear();\n\t\tpanelComponent.getChildren().add(TitleComponent.builder()\n\t\t\t\t.text(\"Xp Tracking\")\n\t\t\t\t.color(Color.ORANGE)\n\t\t\t\t.build());\n\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t.left(name)\n\t\t\t\t.leftColor(BODY_COLOUR)\n\t\t\t\t.right(counterLevelText)\n\t\t\t\t.rightColor(Color.GREEN)\n\t\t\t\t.build());\n\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t.left(\"Current XP:\")\n\t\t\t\t.leftColor(LEFT_TEXT)\n\t\t\t\t.right(skillCurrentXp)\n\t\t\t\t.build());\n\t\tif (config.xpNeeded()) {\n\t\t\tString skillXpToLevel \u003d f.format(xpNeeded);\n\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t\t.left(\"Exp Needed:\")\n\t\t\t\t\t.leftColor(LEFT_TEXT)\n\t\t\t\t\t.right(skillXpToLevel)\n\t\t\t\t\t.build());\n\t\t\tACTIVE +\u003d 1;\n\t\t}\n\n\t\tif (goalXp \u003e currentXP) {\n\t\t\tif (config.actionsNeeded()) {\n\t\t\t\tint actionsLeft \u003d xpTrackerService.getActionsLeft(skill);\n\t\t\t\tif (actionsLeft !\u003d Integer.MAX_VALUE) {\n\t\t\t\t\tString actionsLeftString \u003d f.format(actionsLeft);\n\t\t\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t\t\t\t.left(\"Actions Needed:\")\n\t\t\t\t\t\t\t.leftColor(LEFT_TEXT)\n\t\t\t\t\t\t\t.right(actionsLeftString)\n\t\t\t\t\t\t\t.build());\n\t\t\t\t\tACTIVE +\u003d 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tint totalSessionXpGained \u003d plugin.xpGainedInSessionMap(skill);\n\n\t\t\tif (config.xpGained()) {\n\t\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t\t\t.left(\"XP Gained:\")\n\t\t\t\t\t\t.leftColor(LEFT_TEXT)\n\t\t\t\t\t\t.right(f.format(totalSessionXpGained))\n\t\t\t\t\t\t.build());\n\t\t\t\tACTIVE +\u003d 1;\n\t\t\t}\n\n\t\t\tif (config.xpHour()) {\n\t\t\t\tint xpHr \u003d xpTrackerService.getXpHr(skill);\n\t\t\t\tif (xpHr !\u003d 0) {\n\t\t\t\t\tString xpHrString \u003d f.format(xpHr);\n\t\t\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t\t\t\t.left(\"Exp Per/h:\")\n\t\t\t\t\t\t\t.leftColor(LEFT_TEXT)\n\t\t\t\t\t\t\t.right(xpHrString)\n\t\t\t\t\t\t\t.build());\n\t\t\t\t\tACTIVE +\u003d 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (config.showTTG()) {\n\t\t\t\tString timeLeft \u003d xpTrackerService.getTimeTilGoal(skill);\n\t\t\t\tString[] parts \u003d timeLeft.split(\":\");\n\n\t\t\t\tif (parts.length \u003d\u003d 3) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// parts[0] \u003d\u003e hours, parts[1] \u003d\u003e minutes, parts[2] \u003d\u003e seconds\n\t\t\t\t\t\tint hours \u003d Integer.parseInt(parts[0]);\n\t\t\t\t\t\tint minutes \u003d Integer.parseInt(parts[1]);\n\t\t\t\t\t\tint seconds \u003d Integer.parseInt(parts[2]);\n\n\t\t\t\t\t\t// If you want to always display up to 4 digits of hours, do something like:\n\t\t\t\t\t\t// timeLeft \u003d String.format(\"%4dh %02dm %02ds\", hours, minutes, seconds);\n\t\t\t\t\t\t// If you want no leading zeros on hours, simply do:\n\t\t\t\t\t\ttimeLeft \u003d String.format(\"%dh %02dm %02ds\", hours, minutes, seconds);\n\t\t\t\t\t} catch (NumberFormatException e) {\n\t\t\t\t\t\t// Parsing failed, so leave \u0027timeLeft\u0027 as-is or set to some fallback\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t\t\t.left(\"TTL:\")\n\t\t\t\t\t\t.leftColor(LEFT_TEXT)\n\t\t\t\t\t\t.right(timeLeft)\n\t\t\t\t\t\t.build());\n\t\t\t\tACTIVE +\u003d 1;\n\t\t\t}\n\n\t\t\tif (config.showPercent()) {\n\t\t\t\tString progress \u003d (int) (getSkillProgress(startXp, currentXP, goalXp)) + \"%\";\n\t\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t\t\t.left(\"Percent:\")\n\t\t\t\t\t\t.leftColor(LEFT_TEXT)\n\t\t\t\t\t\t.right(progress)\n\t\t\t\t\t\t.build());\n\t\t\t}\n\n\t\t}\n\t\t// panelComponent.render(g);\n\t}\n\n\tprivate double getSkillProgress(int startXp, int currentXp, int goalXp) {\n\t\tdouble xpGained \u003d currentXp - startXp;\n\t\tdouble xpGoal \u003d goalXp - startXp;\n\n\t\treturn ((xpGained / xpGoal) * 100);\n\t}\n\n\tpublic void drawGradientBar(Graphics2D g, int x, int y, int barSize, boolean vertical) {\n\t\t// The start/end colors for the gradient\n\t\tColor startColor \u003d new Color(50, 50, 50);\n\t\tColor endColor \u003d Color.BLACK;\n\n\t\tfor (int i \u003d 0; i \u003c barSize; i++) {\n\t\t\t// \u0027i\u0027 goes from 0 to barSize\n\t\t\tfloat ratio \u003d (float) i / (float) barSize;\n\n\t\t\t// Interpolate color\n\t\t\tint red \u003d (int) (startColor.getRed() * (1 - ratio) + endColor.getRed() * ratio);\n\t\t\tint green \u003d (int) (startColor.getGreen() * (1 - ratio) + endColor.getGreen() * ratio);\n\t\t\tint blue \u003d (int) (startColor.getBlue() * (1 - ratio) + endColor.getBlue() * ratio);\n\n\t\t\tg.setColor(new Color(red, green, blue));\n\n\t\t\tif (vertical) {\n\t\t\t\tg.drawLine(x + i, y, x + i, y + config.barWidth() + 3);\n\t\t\t} else {\n\t\t\t\tg.drawLine(x, y + i, x + config.barWidth() + 3, y + i);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void buildIcons() throws IOException {\n\t\tif (heartIcon \u003d\u003d null) {\n\t\t\theartIcon \u003d loadAndResize(SpriteID.MINIMAP_ORB_HITPOINTS_ICON);\n\t\t}\n\t\tif (energyIcon \u003d\u003d null) {\n\t\t\tenergyIcon \u003d loadAndResize(SpriteID.MINIMAP_ORB_WALK_ICON);\n\t\t}\n\t\tif (specialIcon \u003d\u003d null) {\n\t\t\tspecialIcon \u003d loadAndResize(SpriteID.MINIMAP_ORB_SPECIAL_ICON);\n\t\t}\n\t}\n\n\tprivate BufferedImage loadAndResize(int spriteId) {\n\t\tBufferedImage image \u003d spriteManager.getSprite(spriteId, 0);\n\t\tif (image \u003d\u003d null) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn ImageUtil.resizeCanvas(image, 15, ICON_DIMENSIONS.height);\n\t}\n\n\tprivate boolean inLms() {\n\t\treturn client.getWidget(ComponentID.LMS_INGAME_INFO) !\u003d null;\n\t}\n\n\tprivate int getRestoreValue(String skill) {\n\t\tfinal MenuEntry[] menu \u003d client.getMenu().getMenuEntries();\n\t\tfinal int menuSize \u003d menu.length;\n\t\tif (menuSize \u003d\u003d 0) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tfinal MenuEntry entry \u003d menu[menuSize - 1];\n\t\tfinal Widget widget \u003d entry.getWidget();\n\t\tint restoreValue \u003d 0;\n\n\t\tif (widget !\u003d null \u0026\u0026 widget.getId() \u003d\u003d ComponentID.INVENTORY_CONTAINER) {\n\t\t\tfinal Effect change \u003d itemStatService.getItemStatChanges(widget.getItemId());\n\n\t\t\tif (change !\u003d null) {\n\t\t\t\tfor (final StatChange c : change.calculate(client).getStatChanges()) {\n\t\t\t\t\tfinal int value \u003d c.getTheoretical();\n\n\t\t\t\t\tif (value !\u003d 0 \u0026\u0026 c.getStat().getName().equals(skill)) {\n\t\t\t\t\t\trestoreValue \u003d value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn restoreValue;\n\t}\n}\n","filePath":"src\\main\\java\\RHUD\\RHUD_Plugin.java"},{"fileName":"PluginLauncher.java","content":"package RastaXP;\n\nimport RHUD.RHUD_Plugin;\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class PluginLauncher\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(RHUD_Plugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\RastaXP\\PluginLauncher.java"}]},{"commit":"13a4beac5cc64107eef4de415eee02b81ae3d929","repository":"https://github.com/seanmcclure22/blackjack-plugin.git","internalName":"blackjack","files":[{"fileName":"BlackjackConfig.java","content":"package com.blackjack;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\nimport java.awt.Color;\n\n@ConfigGroup(\"blackjack\")\npublic interface BlackjackConfig extends Config {\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"renderStyle\",\n\t\t\tname \u003d \"Highlight Style\",\n\t\t\tdescription \u003d \"Highlight setting\",\n\t\t\tposition \u003d 1\n\t)\n\tdefault BlackjackRenderStyle renderStyle()\n\t{\n\t\treturn BlackjackRenderStyle.HULL;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"npcToBlackjack\",\n\t\t\tname \u003d \"NPC to Blackjack\",\n\t\t\tdescription \u003d \"Select the NPC you will be Blackjacking\",\n\t\t\tposition \u003d 2\n\t)\n\tdefault BlackjackNPCs npcToBlackjack()\n\t{\n\t\treturn BlackjackNPCs.BANDIT;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"awakeStateColor\",\n\t\t\tname \u003d \"Awake State Color\",\n\t\t\tdescription \u003d \"Change the color of the awake state highlight\",\n\t\t\tposition \u003d 3\n\t)\n\tdefault Color awakeStateColor() {return Color.ORANGE;}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"knockedOutStateColor\",\n\t\t\tname \u003d \"Knocked-Out State Color\",\n\t\t\tdescription \u003d \"Change the color of the knocked-out state highlight\",\n\t\t\tposition \u003d 4\n\t)\n\tdefault Color knockedOutStateColor() {return Color.GREEN;}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"statusText\",\n\t\t\tname \u003d \"Draw status text above NPCs\",\n\t\t\tdescription \u003d \"Configures whether or not to write if the target NPC is awake or knocked out\",\n\t\t\tposition \u003d 5\n\t)\n\tdefault boolean statusText()\n\t{\n\t\treturn false;\n\t}\n}","filePath":"src\\main\\java\\com\\blackjack\\BlackjackConfig.java"},{"fileName":"BlackjackNPCs.java","content":"package com.blackjack;\n\npublic enum BlackjackNPCs {\n    BANDIT,\n    MENAPHITE_THUG\n}\n","filePath":"src\\main\\java\\com\\blackjack\\BlackjackNPCs.java"},{"fileName":"BlackjackOverlay.java","content":"package com.blackjack;\n\nimport net.runelite.api.Point;\nimport net.runelite.api.*;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\nimport net.runelite.client.util.Text;\n\nimport javax.inject.Inject;\nimport java.awt.*;\n\npublic class BlackjackOverlay extends Overlay {\n    private final Client client;\n    private final BlackjackConfig config;\n    private final BlackjackPlugin plugin;\n\n    @Inject\n    BlackjackOverlay(Client client, BlackjackConfig config, BlackjackPlugin plugin) {\n        this.client \u003d client;\n        this.config \u003d config;\n        this.plugin \u003d plugin;\n        setPosition(OverlayPosition.DYNAMIC);\n        setLayer(OverlayLayer.ABOVE_SCENE);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        for (NPC npc : plugin.getHighlightedNpcs())\n        {\n            renderNpcOverlay(graphics, npc, plugin.getHighlightColor());\n        }\n        return null;\n    }\n\n    private void renderNpcOverlay(Graphics2D graphics, NPC actor, Color color)\n    {\n        NPCComposition npcComposition \u003d actor.getTransformedComposition();\n        if (npcComposition \u003d\u003d null || !npcComposition.isInteractible())\n        {\n            return;\n        }\n\n        switch (config.renderStyle())\n        {\n            case TILE:\n                int size \u003d npcComposition.getSize();\n                LocalPoint lp \u003d actor.getLocalLocation();\n                Polygon tilePoly \u003d Perspective.getCanvasTileAreaPoly(client, lp, size);\n\n                renderPoly(graphics, color, tilePoly);\n                break;\n\n            case HULL:\n                Shape objectClickbox \u003d actor.getConvexHull();\n\n                renderPoly(graphics, color, objectClickbox);\n                break;\n        }\n\n        if (config.statusText() \u0026\u0026 actor.getName() !\u003d null)\n        {\n            String npcName \u003d Text.removeTags(actor.getName());\n            Point textLocation \u003d actor.getCanvasTextLocation(graphics, npcName, actor.getLogicalHeight() + 40);\n\n            if (textLocation !\u003d null)\n            {\n                OverlayUtil.renderTextLocation(graphics, textLocation, plugin.statusText(), color);\n            }\n        }\n    }\n\n    private void renderPoly(Graphics2D graphics, Color color, Shape polygon)\n    {\n        if (polygon !\u003d null)\n        {\n            graphics.setColor(color);\n            graphics.setStroke(new BasicStroke(2));\n            graphics.draw(polygon);\n            graphics.setColor(new Color(color.getRed(), color.getGreen(), color.getBlue(), 20));\n            graphics.fill(polygon);\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\blackjack\\BlackjackOverlay.java"},{"fileName":"BlackjackPlugin.java","content":"package com.blackjack;\n\nimport com.google.inject.Provides;\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.NPC;\nimport net.runelite.api.events.*;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.WildcardMatcher;\nimport javax.inject.Inject;\nimport java.awt.Color;\nimport java.util.HashSet;\nimport java.util.Set;\n\n@PluginDescriptor(\n\t\tname \u003d \"Blackjack\",\n\t\tdescription \u003d \"Help show whether a blackjack target is knocked out or not\",\n\t\ttags \u003d {\"blackjack\", \"thieve\", \"thieving\"}\n)\npublic class BlackjackPlugin extends Plugin {\n\tprivate static final String SUCCESS_BLACKJACK \u003d \"You smack the bandit over the head and render them unconscious.\";\n\n\t@Inject\n\tprivate BlackjackConfig blackjackConfig;\n\n\t@Inject\n\tprivate BlackjackOverlay blackjackOverlay;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate Client client;\n\n\t/**\n\t * NPCs to highlight\n\t */\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate final Set\u003cNPC\u003e highlightedNpcs \u003d new HashSet\u003c\u003e();\n\n\t/**\n\t * Stores state of if NPC is knocked out or not.\n\t */\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate boolean knockedOut \u003d false;\n\n\tprivate String highlight \u003d \"\";\n\tprivate long nextKnockOutTick \u003d 0;\n\n\t@Provides\n\tBlackjackConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(BlackjackConfig.class);\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\toverlayManager.add(blackjackOverlay);\n\t\thighlight \u003d npcToHighlight();\n\t\tclientThread.invoke(() -\u003e\n\t\t{\n\t\t\trebuildAllNpcs();\n\t\t});\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(blackjackOverlay);\n\t\thighlightedNpcs.clear();\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged event)\n\t{\n\t\tif (event.getGameState() \u003d\u003d GameState.LOGIN_SCREEN ||\n\t\t\t\tevent.getGameState() \u003d\u003d GameState.HOPPING)\n\t\t{\n\t\t\thighlightedNpcs.clear();\n\t\t}\n\t}\n\n\t@Subscribe\n\tprivate void onConfigChanged(ConfigChanged event) {\n\n\t\tif (!event.getGroup().equals(\"blackjack\")) {\n\t\t\treturn;\n\t\t}\n\n\t\thighlight \u003d npcToHighlight();\n\t\trebuildAllNpcs();\n\t}\n\n\t@Subscribe\n\tpublic void onNpcSpawned(NpcSpawned npcSpawned)\n\t{\n\t\tfinal NPC npc \u003d npcSpawned.getNpc();\n\t\tfinal String npcName \u003d npc.getName();\n\n\t\tif (npcName \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (WildcardMatcher.matches(highlight, npcName))\n\t\t{\n\t\t\thighlightedNpcs.add(npc);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onNpcDespawned(NpcDespawned npcDespawned)\n\t{\n\t\tfinal NPC npc \u003d npcDespawned.getNpc();\n\n\t\thighlightedNpcs.remove(npc);\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event)\n\t{\n\t\tif (client.getTickCount() \u003e\u003d nextKnockOutTick)\n\t\t{\n\t\t\tknockedOut \u003d false;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage event)\n\t{\n\t\tfinal String msg \u003d event.getMessage();\n\n\t\tif (event.getType() \u003d\u003d ChatMessageType.SPAM \u0026\u0026 msg.equals(SUCCESS_BLACKJACK))\n\t\t{\n\t\t\tknockedOut \u003d true;\n\t\t\tnextKnockOutTick \u003d client.getTickCount() + 4;\n\t\t}\n\t}\n\n\tpublic Color getHighlightColor() {\n\t\treturn knockedOut ? blackjackConfig.knockedOutStateColor() : blackjackConfig.awakeStateColor();\n\t}\n\n\tprivate String npcToHighlight()\n\t{\n\t\tswitch (blackjackConfig.npcToBlackjack()) {\n\t\t\tcase BANDIT:\n\t\t\t\treturn \"Bandit\";\n\t\t\tcase MENAPHITE_THUG:\n\t\t\t\treturn \"Menaphite Thug\";\n\t\t\tdefault:\n\t\t\t\tthrow new IllegalStateException(\"Unexpected value: \" + blackjackConfig.npcToBlackjack());\n\t\t}\n\t}\n\n\tprivate void rebuildAllNpcs()\n\t{\n\t\thighlightedNpcs.clear();\n\n\t\tif (client.getGameState() !\u003d GameState.LOGGED_IN \u0026\u0026\n\t\t\t\tclient.getGameState() !\u003d GameState.LOADING)\n\t\t{\n\t\t\t// NPCs are still in the client after logging out,\n\t\t\t// but we don\u0027t want to highlight those.\n\t\t\treturn;\n\t\t}\n\n\t\touter:\n\t\tfor (NPC npc : client.getNpcs())\n\t\t{\n\t\t\tfinal String npcName \u003d npc.getName();\n\n\t\t\tif (npcName \u003d\u003d null)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (WildcardMatcher.matches(highlight, npcName))\n\t\t\t{\n\t\t\t\thighlightedNpcs.add(npc);\n\t\t\t\tcontinue outer;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic String statusText() {\n\t\treturn isKnockedOut() ? \"Knocked-out\" : \"Awake\";\n\t}\n}\n","filePath":"src\\main\\java\\com\\blackjack\\BlackjackPlugin.java"},{"fileName":"BlackjackRenderStyle.java","content":"package com.blackjack;\n\npublic enum BlackjackRenderStyle\n{\n    OFF,\n    TILE,\n    HULL\n}\n","filePath":"src\\main\\java\\com\\blackjack\\BlackjackRenderStyle.java"},{"fileName":"BlackjackPluginTest.java","content":"package com.blackjack;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class BlackjackPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(BlackjackPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\blackjack\\BlackjackPluginTest.java"}]},{"commit":"547881acb82cf5358b1f303b7da441cd9c17bba1","repository":"https://github.com/keywok/xp-drop-extended.git","internalName":"xp-drop-extended","files":[{"fileName":"XpDropExtendedConfig.java","content":"/*\n * Copyright (c) 2018, Cameron \u003chttps://github.com/noremac201\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.xpdropextended;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"xpdropextended\")\npublic interface XpDropExtendedConfig extends Config\n{\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"hideMaxXPIcon\",\n\t\t\tname \u003d \"Hide Max XP Icon\",\n\t\t\tdescription \u003d \"Configure if the max xp icon will be shown or not\",\n\t\t\tposition \u003d 0\n\t)\n\tdefault boolean hideMaxXPIcon()\n\t{\n\t\treturn false;\n\t}\n\n}\n","filePath":"src\\main\\java\\com\\xpdropextended\\XpDropExtendedConfig.java"},{"fileName":"XpDropExtendedPlugin.java","content":"/*\n * Copyright (c) 2018, Cameron \u003chttps://github.com/noremac201\u003e, SoyChai \u003chttps://github.com/SoyChai\u003e\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.xpdropextended;\n\nimport com.google.inject.Provides;\nimport net.runelite.api.*;\nimport net.runelite.api.events.ScriptPostFired;\nimport net.runelite.api.events.ScriptPreFired;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport javax.inject.Inject;\n\nimport static net.runelite.api.ScriptID.XPDROPS_SETDROPSIZE;\n\n@PluginDescriptor(\n\tname \u003d \"XP Drop Extended\",\n\tdescription \u003d \"Extended functionality to the existing XP Drop plugin.\",\n\ttags \u003d {\"experience\", \"levels\", \"tick\", \"skilling\", \"skill\", \"xpdrop\"}\n)\npublic class XpDropExtendedPlugin extends Plugin {\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate XpDropExtendedConfig config;\n\tprivate Widget currentWidget;\n\n\t@Provides\n\tXpDropExtendedConfig provideConfig(ConfigManager configManager) {\n\t\treturn configManager.getConfig(XpDropExtendedConfig.class);\n\t}\n\n\t@Subscribe\n\tpublic void onScriptPreFired(ScriptPreFired scriptPreFired) {\n\t\tif (scriptPreFired.getScriptId() \u003d\u003d XPDROPS_SETDROPSIZE) {\n\t\t\tfinal int[] intStack \u003d client.getIntStack();\n\t\t\tfinal int intStackSize \u003d client.getIntStackSize();\n\t\t\t// This runs prior to the proc being invoked, so the arguments are still on the stack.\n\t\t\t// Grab the first argument to the script.\n\t\t\tcurrentWidget \u003d client.getWidget(intStack[intStackSize - 4]);\n\t\t\tfinal int widgetId \u003d intStack[intStackSize - 4];\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onScriptPostFired(ScriptPostFired scriptPostFired) {\n\t\tif (scriptPostFired.getScriptId() \u003d\u003d XPDROPS_SETDROPSIZE) {\n\t\t\tif (config.hideMaxXPIcon()) {\n\t\t\t\thideMaxXPIcon(currentWidget);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void hideMaxXPIcon(Widget xpDrop) {\n\t\tWidget text \u003d xpDrop.getChild(0);\n\t\tif (text.getText().startsWith(\"\u003cimg\u003d11\u003e\"))\n\t\t{\n\t\t\ttext.setText(text.getText().substring(9));\n\t\t\ttext.revalidate();\n\t\t\tWidget[] children \u003d xpDrop.getChildren();\n\t\t\tfor (int i \u003d 1; i \u003c children.length; i++)\n\t\t\t{\n\t\t\t\tWidget child \u003d children[i];\n\t\t\t\tif (child \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tchild.setOriginalX(child.getOriginalX() + 14);\n\t\t\t\tchild.revalidate();\n\t\t\t}\n\t\t}\n\t}\n}\n\n","filePath":"src\\main\\java\\com\\xpdropextended\\XpDropExtendedPlugin.java"},{"fileName":"XpDropExtendedTest.java","content":"package com.xpdropextended;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class XpDropExtendedTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(XpDropExtendedPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\xpdropextended\\XpDropExtendedTest.java"}]},{"commit":"c6c34a74c8caf3c0c57fd4c4a96ce5ecd5d11e6e","repository":"https://github.com/DarockObama/StreamerbotPlugin.git","internalName":"streamerbot","files":[{"fileName":"AnnotatedItem.java","content":"package streamerbot.dinkdata;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\nimport java.util.EnumSet;\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class AnnotatedItem extends Item {\n    EnumSet\u003cLootCriteria\u003e criteria;\n    Double rarity;\n\n    public AnnotatedItem() {\n        this.criteria \u003d EnumSet.noneOf(LootCriteria.class);\n        this.rarity \u003d 0.0;\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\AnnotatedItem.java"},{"fileName":"DinkAmascutPurpleNotificationData.java","content":"package streamerbot.dinkdata;\nimport com.google.gson.Gson;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\n\nimport java.util.Collection;\nimport java.util.Map;\n\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DinkAmascutPurpleNotificationData extends DinkNotificationData {\n    Collection\u003cString\u003e party;\n    int rewardPoints;\n    int raidLevel;\n    double probability;\n\n    public DinkAmascutPurpleNotificationData() {\n        super(DinkNotificationType.TOA_UNIQUE);\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d super.sanitized(gson);\n\n        map.put(\"party\", gson.toJson(party));\n        map.put(\"rewardPoints\", rewardPoints);\n        map.put(\"raidLevel\", raidLevel);\n        map.put(\"probability\", probability);\n\n        return map;\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkAmascutPurpleNotificationData.java"},{"fileName":"DinkBossNotificationData.java","content":"package streamerbot.dinkdata;\n\nimport com.google.gson.Gson;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\nimport java.util.Collection;\nimport java.util.Collections;\nimport java.util.Map;\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DinkBossNotificationData extends DinkNotificationData {\n    String boss;\n    int count;\n    String gameMessage;\n    String time;\n    Boolean isPersonalBest;\n    String personalBest \u003d \"N/A\";\n    Collection\u003cString\u003e party \u003d Collections.emptySet();\n\n    public DinkBossNotificationData() {\n        super(DinkNotificationType.KILL_COUNT);\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d super.sanitized(gson);\n\n        map.put(\"boss\", boss);\n        map.put(\"count\", count);\n        map.put(\"gameMessage\", gameMessage);\n        map.put(\"time\", time);\n        map.put(\"isPersonalBest\", isPersonalBest);\n        map.put(\"personalBest\", personalBest);\n        map.put(\"party\", gson.toJson(party));\n\n        return map;\n    }\n}\n\n\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkBossNotificationData.java"},{"fileName":"DinkChatNotificationData.java","content":"package streamerbot.dinkdata;\n\nimport com.google.gson.Gson;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\nimport java.util.Map;\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DinkChatNotificationData extends DinkNotificationData {\n    String type;\n    String source \u003d \"N/A\";\n    String clanTitle \u003d \"N/A\";\n    String message;\n\n    public DinkChatNotificationData() {\n        super(DinkNotificationType.CHAT);\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d super.sanitized(gson);\n\n        map.put(\"type\", type);\n        map.put(\"source\", source);\n        map.put(\"clanTitle\", clanTitle);\n        map.put(\"message\", message);\n\n        return map;\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkChatNotificationData.java"},{"fileName":"DinkClueNotificationData.java","content":"package streamerbot.dinkdata;\n\nimport com.google.gson.Gson;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\nimport java.util.Collection;\nimport java.util.Map;\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DinkClueNotificationData extends DinkNotificationData {\n    String clueType;\n    int numberCompleted;\n    Collection\u003cItem\u003e items;\n\n    public DinkClueNotificationData() {\n        super(DinkNotificationType.CLUE);\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d super.sanitized(gson);\n\n        map.put(\"clueType\", clueType);\n        map.put(\"numberCompleted\", numberCompleted);\n        map.put(\"items\", gson.toJson(items));\n\n        return map;\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkClueNotificationData.java"},{"fileName":"DinkCollectionNotificationData.java","content":"package streamerbot.dinkdata;\n\nimport com.google.gson.Gson;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\nimport java.util.Map;\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DinkCollectionNotificationData extends DinkNotificationData {\n    String itemName;\n    int itemId \u003d 0;\n    long price \u003d 0;\n    int completedEntries \u003d 0;\n    int totalEntries \u003d 0;\n    String currentRank \u003d \"N/A\";\n    int rankProgress \u003d 0;\n    int logsNeededForNextRank \u003d 0;\n    String nextRank \u003d \"N/A\";\n    String justCompletedRank \u003d \"N/A\";\n    String dropperName \u003d \"N/A\";\n    String dropperType \u003d \"N/A\";\n    int dropperKillCount \u003d 0;\n    Double dropRate \u003d 0.0;\n\n    public DinkCollectionNotificationData() {\n        super(DinkNotificationType.COLLECTION);\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d super.sanitized(gson);\n\n        map.put(\"itemName\", itemName);\n        map.put(\"itemId\", itemId);\n        map.put(\"price\", price);\n        map.put(\"completedEntries\", completedEntries);\n        map.put(\"totalEntries\", totalEntries);\n        map.put(\"currentRank\", currentRank);\n        map.put(\"rankProgress\", rankProgress);\n        map.put(\"logsNeededForNextRank\", logsNeededForNextRank);\n        map.put(\"nextRank\", nextRank);\n        map.put(\"justCompletedRank\", justCompletedRank);\n        map.put(\"dropperName\", dropperName);\n        map.put(\"dropperType\", dropperType);\n        map.put(\"dropperKillCount\", dropperKillCount);\n        map.put(\"dropRate\", dropRate);\n\n        return map;\n    }\n}","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkCollectionNotificationData.java"},{"fileName":"DinkCombatAchievementNotificationData.java","content":"package streamerbot.dinkdata;\n\nimport com.google.gson.Gson;\nimport lombok.EqualsAndHashCode;\nimport lombok.Data;\n\nimport java.util.Map;\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DinkCombatAchievementNotificationData extends DinkNotificationData {\n    String tier;\n    String task;\n    int taskPoints;\n    int totalPoints;\n    int tierProgress \u003d 0;\n    int tierTotalPoints \u003d 0;\n    int totalPossiblePoints;\n    String currentTier \u003d \"N/A\";\n    String nextTier \u003d \"N/A\";\n    String justCompletedTier \u003d \"N/A\";\n\n    public DinkCombatAchievementNotificationData() {\n        super(DinkNotificationType.COMBAT_ACHIEVEMENT);\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d super.sanitized(gson);\n\n        map.put(\"tier\", tier);\n        map.put(\"task\", task);\n        map.put(\"taskPoints\", taskPoints);\n        map.put(\"totalPoints\", totalPoints);\n        map.put(\"tierProgress\", tierProgress);\n        map.put(\"tierTotalPoints\", tierTotalPoints);\n        map.put(\"totalPossiblePoints\", totalPossiblePoints);\n        map.put(\"currentTier\", currentTier);\n        map.put(\"nextTier\", nextTier);\n        map.put(\"justCompletedTier\", justCompletedTier);\n\n        return map;\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkCombatAchievementNotificationData.java"},{"fileName":"DinkDeathNotificationData.java","content":"package streamerbot.dinkdata;\n\nimport com.google.gson.Gson;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\nimport java.util.Collection;\nimport java.util.Collections;\nimport java.util.Map;\n\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DinkDeathNotificationData extends DinkNotificationData {\n\n    long valueLost \u003d 0;\n    boolean isPvp \u003d false;\n    String killerName \u003d \"N/A\";\n    int killerNpcId \u003d 0;\n    Collection\u003cItem\u003e keptItems \u003d Collections.emptySet();\n    Collection\u003cItem\u003e lostItems \u003d Collections.emptySet();\n    Region location;\n\n    public DinkDeathNotificationData() {\n        super(DinkNotificationType.DEATH);\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d super.sanitized(gson);\n\n        map.put(\"valueLost\", valueLost);\n        map.put(\"isPvp\", isPvp);\n        map.put(\"killerName\", killerName);\n        map.put(\"killerNpcId\", killerNpcId);\n        map.put(\"keptItems\", gson.toJson(keptItems));\n        map.put(\"lostItems\", gson.toJson(lostItems));\n        map.put(\"location\", gson.toJson(location));\n\n        return map;\n    }\n}","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkDeathNotificationData.java"},{"fileName":"DinkDiaryNotificationData.java","content":"package streamerbot.dinkdata;\n\nimport com.google.gson.Gson;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\nimport java.util.Map;\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DinkDiaryNotificationData extends DinkNotificationData {\n    String area;\n    String difficulty;\n    int total;\n    int tasksCompleted;\n    int tasksTotal;\n    int areaTasksCompleted;\n    int areaTasksTotal;\n\n    public DinkDiaryNotificationData() {\n        super(DinkNotificationType.ACHIEVEMENT_DIARY);\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d super.sanitized(gson);\n\n        map.put(\"area\", area);\n        map.put(\"difficulty\", difficulty);\n        map.put(\"total\", total);\n        map.put(\"tasksCompleted\", tasksCompleted);\n        map.put(\"tasksTotal\", tasksTotal);\n        map.put(\"areaTasksCompleted\", areaTasksCompleted);\n        map.put(\"areaTasksTotal\", areaTasksTotal);\n\n        return map;\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkDiaryNotificationData.java"},{"fileName":"DinkExternalNotificationData.java","content":"package streamerbot.dinkdata;\n\nimport com.google.gson.Gson;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\nimport java.util.Collections;\nimport java.util.Map;\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DinkExternalNotificationData extends DinkNotificationData {\n    String sourcePlugin;\n    Map\u003cString, Object\u003e metadata \u003d Collections.emptyMap();\n\n    public DinkExternalNotificationData() {\n        super(DinkNotificationType.EXTERNAL_PLUGIN);\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d super.sanitized(gson);\n\n        map.put(\"sourcePlugin\", sourcePlugin);\n        map.put(\"metadata\", gson.toJson(metadata));\n\n        return map;\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkExternalNotificationData.java"},{"fileName":"DinkGambleNotificationData.java","content":"package streamerbot.dinkdata;\n\nimport com.google.gson.Gson;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\nimport java.util.List;\nimport java.util.Map;\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DinkGambleNotificationData extends DinkNotificationData {\n    int gambleCount;\n    List\u003cItem\u003e items;\n\n    public DinkGambleNotificationData() {\n        super(DinkNotificationType.BARBARIAN_ASSAULT_GAMBLE);\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d super.sanitized(gson);\n\n        map.put(\"gambleCount\", gambleCount);\n        map.put(\"items\", gson.toJson(items));\n\n        return map;\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkGambleNotificationData.java"},{"fileName":"DinkGrandExchangeNotificationData.java","content":"package streamerbot.dinkdata;\n\nimport com.google.gson.Gson;\nimport lombok.EqualsAndHashCode;\nimport lombok.Data;\nimport net.runelite.api.GrandExchangeOfferState;\n\nimport java.util.Map;\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DinkGrandExchangeNotificationData extends DinkNotificationData {\n    int slot;\n    GrandExchangeOfferState status;\n    Item item;\n    long marketPrice;\n    long targetPrice;\n    int targetQuantity;\n    long sellerTax \u003d 0;\n\n    public DinkGrandExchangeNotificationData() {\n        super(DinkNotificationType.GRAND_EXCHANGE);\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d super.sanitized(gson);\n\n        map.put(\"slot\", slot);\n        map.put(\"status\", gson.toJson(status));\n        map.put(\"item\", gson.toJson(item));\n        map.put(\"marketPrice\", marketPrice);\n        map.put(\"targetPrice\", targetPrice);\n        map.put(\"targetQuantity\", targetQuantity);\n        map.put(\"sellerTax\", sellerTax);\n\n        return map;\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkGrandExchangeNotificationData.java"},{"fileName":"DinkGroupStorageNotificationData.java","content":"package streamerbot.dinkdata;\n\nimport com.google.gson.Gson;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\nimport java.util.Collection;\nimport java.util.Map;\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DinkGroupStorageNotificationData extends DinkNotificationData {\n    Collection\u003cItem\u003e deposits;\n    Collection\u003cItem\u003e withdrawals;\n    long netValue;\n    String groupName;\n\n    public DinkGroupStorageNotificationData() {\n        super(DinkNotificationType.GROUP_STORAGE);\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d super.sanitized(gson);\n\n        map.put(\"deposits\", gson.toJson(deposits));\n        map.put(\"withdrawals\", gson.toJson(withdrawals));\n        map.put(\"netValue\", netValue);\n        map.put(\"groupName\", groupName);\n\n        return map;\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkGroupStorageNotificationData.java"},{"fileName":"DinkLeaguesAreaNotificationData.java","content":"package streamerbot.dinkdata;\n\nimport com.google.gson.Gson;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\nimport java.util.Map;\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DinkLeaguesAreaNotificationData extends DinkNotificationData {\n    String area;\n    int index;\n    int tasksCompleted;\n    int tasksUntilNextArea \u003d 0;\n\n    public DinkLeaguesAreaNotificationData() {\n        super(DinkNotificationType.LEAGUES_AREA);\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d super.sanitized(gson);\n\n        map.put(\"area\", area);\n        map.put(\"index\", index);\n        map.put(\"tasksCompleted\", tasksCompleted);\n        map.put(\"tasksUntilNextArea\", tasksUntilNextArea);\n\n        return map;\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkLeaguesAreaNotificationData.java"},{"fileName":"DinkLeaguesMasteryNotificationData.java","content":"package streamerbot.dinkdata;\n\nimport com.google.gson.Gson;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\nimport java.util.Map;\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DinkLeaguesMasteryNotificationData extends DinkNotificationData {\n    String masteryType;\n    int masteryTier;\n\n    public DinkLeaguesMasteryNotificationData() {\n        super(DinkNotificationType.LEAGUES_MASTERY);\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d super.sanitized(gson);\n\n        map.put(\"masteryType\", masteryType);\n        map.put(\"masteryTier\", masteryTier);\n\n        return map;\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkLeaguesMasteryNotificationData.java"},{"fileName":"DinkLeaguesRelicNotificationData.java","content":"package streamerbot.dinkdata;\n\nimport com.google.gson.Gson;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\nimport java.util.Map;\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DinkLeaguesRelicNotificationData extends DinkNotificationData {\n    String relic;\n    int tier;\n    int requiredPoints;\n    int totalPoints;\n    int pointsUntilNextTier \u003d 0;\n\n    public DinkLeaguesRelicNotificationData() {\n        super(DinkNotificationType.LEAGUES_RELIC);\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d super.sanitized(gson);\n\n        map.put(\"relic\", relic);\n        map.put(\"tier\", tier);\n        map.put(\"requiredPoints\", requiredPoints);\n        map.put(\"totalPoints\", totalPoints);\n        map.put(\"pointsUntilNextTier\", pointsUntilNextTier);\n\n        return map;\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkLeaguesRelicNotificationData.java"},{"fileName":"DinkLeaguesTaskNotificationData.java","content":"package streamerbot.dinkdata;\n\nimport com.google.gson.Gson;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\nimport java.util.Map;\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DinkLeaguesTaskNotificationData extends DinkNotificationData {\n    String taskName;\n    String difficulty;\n    int taskPoints;\n    int totalPoints;\n    int tasksCompleted;\n\n    int tasksUntilNextArea \u003d 0;\n    int pointsUntilNextRelic \u003d 0;\n    int pointsUntilNextTrophy \u003d 0;\n    String earnedTrophy \u003d \"N/A\";\n\n    public DinkLeaguesTaskNotificationData() {\n        super(DinkNotificationType.LEAGUES_TASK);\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d super.sanitized(gson);\n\n        map.put(\"taskName\", taskName);\n        map.put(\"difficulty\", difficulty);\n        map.put(\"taskPoints\", taskPoints);\n        map.put(\"totalPoints\", totalPoints);\n        map.put(\"tasksCompleted\", tasksCompleted);\n        map.put(\"tasksUntilNextArea\", tasksUntilNextArea);\n        map.put(\"pointsUntilNextRelic\", pointsUntilNextRelic);\n        map.put(\"pointsUntilNextTrophy\", pointsUntilNextTrophy);\n        map.put(\"earnedTrophy\", earnedTrophy);\n\n        return map;\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkLeaguesTaskNotificationData.java"},{"fileName":"DinkLevelNotificationData.java","content":"package streamerbot.dinkdata;\n\nimport com.google.gson.Gson;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\nimport java.util.Map;\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DinkLevelNotificationData extends DinkNotificationData {\n    Map\u003cString, Integer\u003e levelledSkills;\n    Map\u003cString, Integer\u003e allSkills;\n    CombatLevel combatLevel;\n\n    public DinkLevelNotificationData() {\n        super(DinkNotificationType.LEVEL);\n    }\n\n    @Data\n    public static class CombatLevel {\n        int value;\n        boolean increased;\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d super.sanitized(gson);\n\n        map.put(\"levelledSkills\", gson.toJson(levelledSkills));\n        map.put(\"allSkills\", gson.toJson(allSkills));\n        map.put(\"combatLevel\", gson.toJson(combatLevel));\n        \n        return map;\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkLevelNotificationData.java"},{"fileName":"DinkLoginNotificationData.java","content":"package streamerbot.dinkdata;\n\nimport com.google.gson.Gson;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.Map;\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DinkLoginNotificationData extends DinkNotificationData {\n    Progress collectionLog \u003d new Progress();\n    Progress combatAchievementPoints \u003d new Progress();\n    Progress achievementDiary \u003d new Progress();\n    Progress achievementDiaryTasks \u003d new Progress();\n    BarbarianAssault barbarianAssault \u003d new BarbarianAssault();\n    SkillData skills \u003d new SkillData();\n    Progress questCount \u003d new Progress();\n    Progress questPoints \u003d new Progress();\n    SlayerData slayer \u003d new SlayerData();\n    List\u003cPet\u003e pets \u003d Collections.emptyList();\n\n    DinkLoginNotificationData() {\n        super(DinkNotificationType.LOGIN);\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d super.sanitized(gson);\n\n        map.put(\"collectionLog\", gson.toJson(collectionLog));\n        map.put(\"combatAchievementPoints\", gson.toJson(combatAchievementPoints));\n        map.put(\"achievementDiary\", gson.toJson(achievementDiary));\n        map.put(\"achievementDiaryTasks\", gson.toJson(achievementDiaryTasks));\n        map.put(\"barbarianAssault\", gson.toJson(barbarianAssault));\n        map.put(\"skills\", gson.toJson(skills));\n        map.put(\"questCount\", gson.toJson(questCount));\n        map.put(\"questPoints\", gson.toJson(questPoints));\n        map.put(\"slayer\", gson.toJson(slayer));\n        map.put(\"pets\", gson.toJson(pets));\n\n        return map;\n    }\n\n    @Data\n    public static class SkillData {\n        long totalExperience;\n        int totalLevel;\n        Map\u003cString, Integer\u003e levels;\n        Map\u003cString, Integer\u003e experience;\n\n        public SkillData() {\n            this.totalExperience \u003d 0;\n            this. totalLevel \u003d 0;\n            this.levels \u003d Collections.emptyMap();\n            this.experience \u003d Collections.emptyMap();\n        }\n    }\n\n    @Data\n    public static class BarbarianAssault {\n        int highGambleCount;\n\n        public BarbarianAssault(){\n            this.highGambleCount \u003d 0;\n        }\n    }\n\n    @Data\n    public static class SlayerData {\n        int points;\n        int streak;\n\n        public SlayerData() {\n            this.points \u003d 0;\n            this.streak\u003d 0;\n        }\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkLoginNotificationData.java"},{"fileName":"DinkLootNotificationData.java","content":"package streamerbot.dinkdata;\n\nimport com.google.gson.Gson;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\nimport java.util.Collection;\nimport java.util.Collections;\nimport java.util.Map;\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DinkLootNotificationData extends DinkNotificationData {\n    Collection\u003cAnnotatedItem\u003e items;\n    String source;\n    String category;\n    int killCount \u003d 0;\n    Double rarestProbability \u003d 0.0;\n    Collection\u003cString\u003e party \u003d Collections.emptySet();\n    int npcId \u003d 0;\n\n    public DinkLootNotificationData() {\n        super(DinkNotificationType.LOOT);\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d super.sanitized(gson);\n\n        map.put(\"items\", gson.toJson(items));\n        map.put(\"source\", source);\n        map.put(\"category\", category);\n        map.put(\"killCount\", killCount);\n        map.put(\"rarestProbability\", rarestProbability);\n        map.put(\"party\", gson.toJson(party));\n        map.put(\"npcId\", npcId);\n\n        return map;\n    }\n}","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkLootNotificationData.java"},{"fileName":"DinkNotificationData.java","content":"package streamerbot.dinkdata;\nimport com.google.gson.Gson;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DinkNotificationData extends NotificationData {\n    DinkNotificationType notificationType;\n    String playerName;\n    String accountType;\n    String plainText \u003d \"N/A\";\n\n    public DinkNotificationData() {\n    }\n\n    protected DinkNotificationData(DinkNotificationType notificationType) {\n        this.notificationType \u003d notificationType;\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d new HashMap\u003c\u003e();\n        map.put(\"notificationType\", notificationType);\n        map.put(\"playerName\", playerName);\n        map.put(\"accountType\", accountType);\n        map.put(\"plainText\", plainText);\n        return map;\n    }\n}","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkNotificationData.java"},{"fileName":"DinkNotificationType.java","content":"package streamerbot.dinkdata;\n\nimport lombok.Getter;\nimport java.util.Map;\nimport streamerbot.SettingsManager;\n\n@Getter\npublic enum DinkNotificationType {\n    CLUE(\"CLUE\", DinkClueNotificationData.class, SettingsManager.CLUES_ENABLED, SettingsManager.CLUE_ACTION_NAME),\n    COLLECTION(\"COLLECTION\", DinkCollectionNotificationData.class, SettingsManager.COLLECTION_LOG_ENABLED, SettingsManager.COLLECTION_LOG_ACTION_NAME),\n    DEATH(\"DEATH\", DinkDeathNotificationData.class, SettingsManager.DEATH_ENABLED, SettingsManager.DEATH_ACTION_NAME),\n    LEVEL(\"LEVEL\", DinkLevelNotificationData.class, SettingsManager.LEVEL_ENABLED, SettingsManager.LEVEL_ACTION_NAME),\n    LOOT(\"LOOT\", DinkLootNotificationData.class, SettingsManager.LOOT_ENABLED, SettingsManager.LOOT_ACTION_NAME),\n    PET(\"PET\", DinkPetNotificationData.class, SettingsManager.PETS_ENABLED, SettingsManager.PET_ACTION_NAME),\n    QUEST(\"QUEST\", DinkQuestNotificationData.class, SettingsManager.QUESTS_ENABLED, SettingsManager.QUEST_ACTION_NAME),\n    SLAYER(\"SLAYER\", DinkSlayerNotificationData.class, SettingsManager.SLAYER_ENABLED, SettingsManager.SLAYER_ACTION_NAME),\n    SPEEDRUN(\"SPEEDRUN\", DinkSpeedrunNotificationData.class, SettingsManager.SPEEDRUNS_ENABLED, SettingsManager.SPEEDRUN_ACTION_NAME),\n    KILL_COUNT(\"KILL_COUNT\", DinkBossNotificationData.class, SettingsManager.KILL_COUNT_ENABLED, SettingsManager.KILL_COUNT_ACTION_NAME),\n    COMBAT_ACHIEVEMENT(\"COMBAT_ACHIEVEMENT\", DinkCombatAchievementNotificationData.class, SettingsManager.COMBAT_TASK_ENABLED, SettingsManager.COMBAT_TASK_ACTION_NAME),\n    ACHIEVEMENT_DIARY(\"ACHIEVEMENT_DIARY\", DinkDiaryNotificationData.class, SettingsManager.DIARY_ENABLED, SettingsManager.DIARY_ACTION_NAME),\n    BARBARIAN_ASSAULT_GAMBLE(\"BARBARIAN_ASSAULT_GAMBLE\", DinkGambleNotificationData.class, SettingsManager.GAMBLE_ENABLED, SettingsManager.GAMBLE_ACTION_NAME),\n    PLAYER_KILL(\"PLAYER_KILL\", DinkPlayerKillNotificationData.class, SettingsManager.PLAYER_KILLS_ENABLED, SettingsManager.PLAYER_KILL_ACTION_NAME),\n    GROUP_STORAGE(\"GROUP_STORAGE\", DinkGroupStorageNotificationData.class, SettingsManager.GROUP_STORAGE_ENABLED, SettingsManager.GROUP_STORAGE_ACTION_NAME),\n    GRAND_EXCHANGE(\"GRAND_EXCHANGE\", DinkGrandExchangeNotificationData.class, SettingsManager.GRAND_EXCHANGE_ENABLED, SettingsManager.GROUP_STORAGE_ACTION_NAME),\n    LEAGUES_AREA(\"LEAGUES_AREA\", DinkLeaguesAreaNotificationData.class, SettingsManager.LEAGUES_ENABLED, SettingsManager.LEAGUES_ACTION_NAME),\n    LEAGUES_MASTERY(\"LEAGUES_MASTERY\", DinkLeaguesMasteryNotificationData.class, SettingsManager.LEAGUES_ENABLED, SettingsManager.LEAGUES_ACTION_NAME),\n    LEAGUES_RELIC(\"LEAGUES_RELIC\", DinkLeaguesRelicNotificationData.class, SettingsManager.LEAGUES_ENABLED, SettingsManager.LEAGUES_ACTION_NAME),\n    LEAGUES_TASK(\"LEAGUES_TASK\", DinkLeaguesTaskNotificationData.class, SettingsManager.LEAGUES_ENABLED, SettingsManager.LEAGUES_ACTION_NAME),\n    LOGIN(\"LOGIN\", DinkLoginNotificationData.class, SettingsManager.META_NOTIFIER_ENABLED, SettingsManager.META_NOTIFIER_ACTION_NAME),\n    TOA_UNIQUE(\"TOA_UNIQUE\", DinkAmascutPurpleNotificationData.class, SettingsManager.META_NOTIFIER_ENABLED, SettingsManager.META_NOTIFIER_ACTION_NAME),\n    TRADE(\"TRADE\", DinkTradeNotificationData.class, SettingsManager.TRADES_ENABLED, SettingsManager.TRADES_ACTION_NAME),\n    CHAT(\"CHAT\", DinkChatNotificationData.class, SettingsManager.CUSTOM_CHAT_ENABLED, SettingsManager.CUSTOM_CHAT_ACTION_NAME),\n    XP_MILESTONE(\"XP_MILESTONE\", DinkXpNotificationData.class, SettingsManager.LEVEL_ENABLED, SettingsManager.LEVEL_ACTION_NAME),\n    EXTERNAL_PLUGIN(\"EXTERNAL_PLUGIN\", DinkExternalNotificationData.class, SettingsManager.EXTERNAL_PLUGIN_REQUESTS_ENABLED, SettingsManager.EXTERNAL_REQUEST_ACTION_NAME),\n\n    //acts as fallback\n    UNKNOWN(\"UNKNOWN\");\n\n    private final String type;\n    private final Class\u003c? extends DinkNotificationData\u003e dataClass;\n    private final String enabledKey;\n    private final String actionKey;\n\n    DinkNotificationType(String type) {\n        this.type \u003d type;\n        this.dataClass \u003d DinkNotificationData.class;\n        this.enabledKey \u003d null;\n        this.actionKey \u003d null;\n    }\n\n    DinkNotificationType(String type, Class\u003c? extends DinkNotificationData\u003e dataClass, String enabledKey, String actionKey) {\n        this.type \u003d type;\n        this.dataClass \u003d dataClass;\n        this.enabledKey \u003d enabledKey;\n        this.actionKey \u003d actionKey;\n    }\n\n    private static final Map\u003cString, DinkNotificationType\u003e BY_TYPE \u003d\n            java.util.Arrays.stream(values())\n                    .collect(java.util.stream.Collectors.toUnmodifiableMap(\n                            DinkNotificationType::getType,\n                            e -\u003e e\n                    ));\n\n    public static DinkNotificationType fromName(String name) {\n        if (name \u003d\u003d null) return UNKNOWN;\n        return BY_TYPE.getOrDefault(name, UNKNOWN);\n    }\n\n    public static boolean existsWithEnabledKey(String enabledKey) {\n        if(enabledKey \u003d\u003d null) return false;\n        for(DinkNotificationType type : values()) {\n            if(type \u003d\u003d UNKNOWN) continue;\n            if(enabledKey.equals(type.enabledKey)) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n}","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkNotificationType.java"},{"fileName":"DinkPetNotificationData.java","content":"package streamerbot.dinkdata;\n\nimport com.google.gson.Gson;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\nimport java.util.Map;\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DinkPetNotificationData extends DinkNotificationData {\n    String petName \u003d \"N/A\";\n    String milestone \u003d \"N/A\";\n    boolean duplicate;\n    boolean previouslyOwned \u003d true; //defaults to true unless collection log notification happens in game\n    Double rarity \u003d 0.0;\n    int estimatedActions \u003d 0;\n    Double luck \u003d 0.0;\n\n\n    public DinkPetNotificationData() {\n        super(DinkNotificationType.PET);\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d super.sanitized(gson);\n\n        map.put(\"petName\", petName);\n        map.put(\"milestone\", milestone);\n        map.put(\"duplicate\", duplicate);\n        map.put(\"previouslyOwned\", previouslyOwned);\n        map.put(\"rarity\", rarity);\n        map.put(\"estimatedActions\", estimatedActions);\n        map.put(\"luck\", luck);\n\n        return map;\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkPetNotificationData.java"},{"fileName":"DinkPlayerKillNotificationData.java","content":"package streamerbot.dinkdata;\n\nimport com.google.gson.Gson;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.api.kit.KitType;\n\nimport java.util.Map;\n\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DinkPlayerKillNotificationData extends DinkNotificationData {\n    String victimName;\n    int victimCombatLevel;\n    Map\u003cKitType, Item\u003e victimEquipment;\n    int world \u003d 0;\n    WorldPoint location \u003d new WorldPoint(-1, -1, -1);\n    int myHitpoints;\n    int myLastDamage;\n\n    DinkPlayerKillNotificationData() {\n        super(DinkNotificationType.PLAYER_KILL);\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d super.sanitized(gson);\n\n        map.put(\"victimName\", victimName);\n        map.put(\"victimCombatLevel\", victimCombatLevel);\n        map.put(\"victimEquipment\", gson.toJson(victimEquipment));\n        map.put(\"world\", world);\n        map.put(\"location\", gson.toJson(location));\n        map.put(\"myHitpoints\", myHitpoints);\n        map.put(\"myLastDamage\", myLastDamage);\n\n        return map;\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkPlayerKillNotificationData.java"},{"fileName":"DinkQuestNotificationData.java","content":"package streamerbot.dinkdata;\n\nimport com.google.gson.Gson;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\nimport java.util.Map;\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DinkQuestNotificationData extends DinkNotificationData {\n    String questName;\n    int completedQuests \u003d 0;\n    int totalQuests \u003d 0;\n    int questPoints \u003d 0;\n    int totalQuestPoints \u003d 0;\n\n    DinkQuestNotificationData () {\n        super(DinkNotificationType.QUEST);\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d super.sanitized(gson);\n\n        map.put(\"questName\", questName);\n        map.put(\"completedQuests\", completedQuests);\n        map.put(\"totalQuests\", totalQuests);\n        map.put(\"questPoints\", questPoints);\n        map.put(\"totalQuestPoints\", totalQuestPoints);\n\n        return map;\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkQuestNotificationData.java"},{"fileName":"DinkSlayerNotificationData.java","content":"package streamerbot.dinkdata;\n\nimport com.google.gson.Gson;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\nimport java.util.Map;\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DinkSlayerNotificationData extends DinkNotificationData {\n    String slayerTask;\n    int slayerCompleted;\n    int slayerPoints;\n    int killCount \u003d 0;\n    String monster \u003d \"N/A\";\n\n    public DinkSlayerNotificationData() {\n        super(DinkNotificationType.SLAYER);\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d super.sanitized(gson);\n\n        map.put(\"slayerTask\", slayerTask);\n        map.put(\"slayerCompleted\", slayerCompleted);\n        map.put(\"slayerPoints\", slayerPoints);\n        map.put(\"killCount\", killCount);\n        map.put(\"monster\", monster);\n\n        return map;\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkSlayerNotificationData.java"},{"fileName":"DinkSpeedrunNotificationData.java","content":"package streamerbot.dinkdata;\n\nimport com.google.gson.Gson;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\nimport java.util.Map;\n\n\n@EqualsAndHashCode(callSuper \u003d true, doNotUseGetters \u003d true)\n@Data\npublic class DinkSpeedrunNotificationData extends DinkNotificationData {\n    String questName;\n    String personalBest;\n    String currentTime;\n    boolean isPersonalBest;\n\n    public DinkSpeedrunNotificationData() {\n        super(DinkNotificationType.SPEEDRUN);\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d super.sanitized(gson);\n\n        map.put(\"questName\", questName);\n        map.put(\"personalBest\", personalBest);\n        map.put(\"currentTime\", currentTime);\n        map.put(\"isPersonalBest\", isPersonalBest);\n\n        return map;\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkSpeedrunNotificationData.java"},{"fileName":"DinkTradeNotificationData.java","content":"package streamerbot.dinkdata;\n\nimport com.google.gson.Gson;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\nimport java.util.List;\nimport java.util.Map;\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DinkTradeNotificationData extends DinkNotificationData {\n    String counterparty;\n    List\u003cItem\u003e receivedItems;\n    List\u003cItem\u003e givenItems;\n    long receivedValue;\n    long givenValue;\n\n    public DinkTradeNotificationData() {\n        super(DinkNotificationType.TRADE);\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d super.sanitized(gson);\n\n        map.put(\"counterparty\", counterparty);\n        map.put(\"receivedItems\", gson.toJson(receivedItems));\n        map.put(\"givenItems\", gson.toJson(givenItems));\n        map.put(\"receivedValue\", receivedValue);\n        map.put(\"givenValue\", givenValue);\n\n        return map;\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkTradeNotificationData.java"},{"fileName":"DinkXpNotificationData.java","content":"package streamerbot.dinkdata;\n\nimport com.google.gson.Gson;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\nimport java.util.Collection;\nimport java.util.Map;\n\n@EqualsAndHashCode(callSuper \u003d true)\n@Data\npublic class DinkXpNotificationData extends DinkNotificationData {\n    Map\u003cString, Integer\u003e xpData;\n    Collection\u003cString\u003e milestoneAchieved;\n    int interval;\n\n    public DinkXpNotificationData() {\n        super(DinkNotificationType.XP_MILESTONE);\n    }\n\n    @Override\n    public Map\u003cString, Object\u003e sanitized(Gson gson) {\n        Map\u003cString, Object\u003e map \u003d super.sanitized(gson);\n\n        map.put(\"xpData\", gson.toJson(xpData));\n        map.put(\"milestoneAchieved\", gson.toJson((milestoneAchieved)));\n        map.put(\"interval\",interval);\n\n        return map;\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\DinkXpNotificationData.java"},{"fileName":"Item.java","content":"package streamerbot.dinkdata;\n\nimport lombok.Data;\n\n@Data\npublic class Item {\n    int id;\n    int quantity;\n    int priceEach;\n    String name;\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\Item.java"},{"fileName":"LootCriteria.java","content":"package streamerbot.dinkdata;\n\npublic enum LootCriteria {\n    ALLOWLIST,\n    DENYLIST,\n    VALUE,\n    RARITY\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\LootCriteria.java"},{"fileName":"NotificationData.java","content":"package streamerbot.dinkdata;\n\nimport streamerbot.util.Sanitizable;\n\npublic abstract class NotificationData implements Sanitizable {\n\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\NotificationData.java"},{"fileName":"Pet.java","content":"package streamerbot.dinkdata;\n\nimport lombok.Data;\n\n@Data\npublic class Pet {\n    int itemId;\n    String name;\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\Pet.java"},{"fileName":"Progress.java","content":"package streamerbot.dinkdata;\n\nimport lombok.Data;\n\n@Data\npublic class Progress {\n    int completed;\n    int total;\n\n    public Progress() {\n        this.completed \u003d 0;\n        this.total \u003d 0;\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\Progress.java"},{"fileName":"Region.java","content":"package streamerbot.dinkdata;\n\nimport lombok.Data;\n\n@Data\npublic class Region {\n    int regionId;\n    int plane;\n    boolean instanced;\n}\n","filePath":"src\\main\\java\\streamerbot\\dinkdata\\Region.java"},{"fileName":"DoActionRequest.java","content":"package streamerbot.messaging;\nimport lombok.Getter;\n\nimport java.util.Map;\n\n\n@Getter\npublic class DoActionRequest {\n    private final Action action;\n    private final Map\u003cString, Object\u003e args;\n\n    public DoActionRequest(Action action, Map\u003cString, Object\u003e args) {\n        this.action \u003d action;\n        this.args \u003d args;\n    }\n\n    public DoActionRequest(String name, Map\u003cString, Object\u003e args) {\n        this(new Action(name), args);\n    }\n\n@Getter\n    public static class Action {\n        private final String name;\n\n        public Action(String name) {\n            this.name \u003d name;\n        }\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\messaging\\DoActionRequest.java"},{"fileName":"TriggerHandler.java","content":"package streamerbot.messaging;\nimport streamerbot.StreamerbotConfig;\nimport org.apache.commons.lang3.StringUtils;\nimport lombok.extern.slf4j.Slf4j;\nimport okhttp3.*;\n\nimport javax.annotation.Nonnull;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\n\n@Slf4j\n@Singleton\npublic class TriggerHandler {\n    @Inject\n    StreamerbotConfig config;\n\n    @Inject\n    private OkHttpClient okHttpClient;\n\n    public void sendJson(String payload) {\n        if (StringUtils.isBlank(config.streamerbotAddress())) {\n            log.debug(\"No address provided\");\n            return; // important: don\u0027t continue\n        }\n\n        RequestBody body \u003d RequestBody.create(\n                MediaType.parse(\"application/json\"),\n                payload\n        );\n\n        Request request \u003d new Request.Builder()\n                .url(config.streamerbotAddress() + \"/DoAction\")\n                .post(body)\n                .build();\n\n        okHttpClient.newCall(request).enqueue(new okhttp3.Callback() {\n            @Override\n            public void onFailure(@Nonnull okhttp3.Call call,@Nonnull  java.io.IOException e) {\n                log.debug(\"Error during POST request\", e);\n            }\n\n            @Override\n            public void onResponse(@Nonnull okhttp3.Call call, @Nonnull okhttp3.Response response) {\n                try (okhttp3.Response res \u003d response) {\n                    if (!res.isSuccessful()) {\n                        log.debug(\"POST request failed. Response Code: {}\", res.code());\n                    } else {\n                        log.debug(\"POST request succeeded!\");\n                    }\n                }\n            }\n        });\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\messaging\\TriggerHandler.java"},{"fileName":"SettingsManager.java","content":"package streamerbot;\n\nimport streamerbot.dinkdata.DinkNotificationType;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\nimport org.apache.commons.lang3.StringUtils;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.util.List;\n\n@Slf4j\n@Singleton\n@RequiredArgsConstructor(onConstructor_ \u003d { @Inject })\npublic class SettingsManager {\n    private final StreamerbotPlugin plugin;\n    private final StreamerbotConfig config;\n    private final ExternalPluginManager externalPluginManager;\n    private final ConfigManager configManager;\n    private final Client client;\n\n\n    public static final String CONFIG_GROUP \u003d \"streamerbotplugin\";\n\n    public static final String COLLECTION_LOG_ENABLED \u003d \"collectionLogEnabled\";\n    public static final String COLLECTION_LOG_ACTION_NAME \u003d \"collectionLogActionName\";\n    public static final String PETS_ENABLED \u003d \"petEnabled\";\n    public static final String PET_ACTION_NAME \u003d \"petActionName\";\n    public static final String LEVEL_ENABLED \u003d \"levelEnabled\";\n    public static final String LEVEL_ACTION_NAME \u003d \"levelActionName\";\n    public static final String LOOT_ENABLED \u003d \"lootEnabled\";\n    public static final String LOOT_ACTION_NAME \u003d \"lootActionName\";\n    public static final String DEATH_ENABLED \u003d \"deathEnabled\";\n    public static final String DEATH_ACTION_NAME \u003d \"deathActionName\";\n    public static final String SLAYER_ENABLED \u003d \"slayerEnabled\";\n    public static final String SLAYER_ACTION_NAME \u003d \"slayerActionName\";\n    public static final String QUESTS_ENABLED \u003d \"questEnabled\";\n    public static final String QUEST_ACTION_NAME \u003d \"questActionName\";\n    public static final String CLUES_ENABLED \u003d \"clueEnabled\";\n    public static final String CLUE_ACTION_NAME \u003d \"clueActionName\";\n    public static final String SPEEDRUNS_ENABLED \u003d \"speedrunEnabled\";\n    public static final String SPEEDRUN_ACTION_NAME \u003d \"speedrunActionName\";\n    public static final String KILL_COUNT_ENABLED \u003d \"killCountEnabled\";\n    public static final String KILL_COUNT_ACTION_NAME \u003d \"killCountActionName\";\n    public static final String COMBAT_TASK_ENABLED \u003d \"combatTaskEnabled\";\n    public static final String COMBAT_TASK_ACTION_NAME \u003d \"combatTaskActionName\";\n    public static final String DIARY_ENABLED \u003d \"diaryEnabled\";\n    public static final String DIARY_ACTION_NAME \u003d \"diaryActionName\";\n    public static final String GAMBLE_ENABLED \u003d \"gambleEnabled\";\n    public static final String GAMBLE_ACTION_NAME \u003d \"gambleActionName\";\n    public static final String PLAYER_KILLS_ENABLED \u003d \"pkEnabled\";\n    public static final String PLAYER_KILL_ACTION_NAME \u003d \"playerKillActionName\";\n    public static final String GROUP_STORAGE_ENABLED \u003d \"groupStorageEnabled\";\n    public static final String GROUP_STORAGE_ACTION_NAME \u003d \"groupStorageActionName\";\n    public static final String GRAND_EXCHANGE_ENABLED \u003d \"notifyGrandExchange\";\n    public static final String GRAND_EXCHANGE_ACTION_NAME \u003d \"grandExchangeActionName\";\n    public static final String TRADES_ENABLED \u003d \"notifyTrades\";\n    public static final String TRADES_ACTION_NAME \u003d \"tradesActionName\";\n    public static final String CUSTOM_CHAT_ENABLED \u003d \"notifyChat\";\n    public static final String CUSTOM_CHAT_ACTION_NAME \u003d \"customChatActionName\";\n    public static final String EXTERNAL_PLUGIN_REQUESTS_ENABLED \u003d \"notifyExternal\";\n    public static final String EXTERNAL_REQUEST_ACTION_NAME \u003d \"externalRequestActionName\";\n    public static final String LEAGUES_ENABLED \u003d \"notifyLeagues\";\n    public static final String LEAGUES_ACTION_NAME \u003d \"leaguesActionName\";\n    public static final String META_NOTIFIER_ENABLED \u003d \"metaNotifierEnabled\";\n    public static final String META_NOTIFIER_ACTION_NAME \u003d \"metaNotifierActionName\";\n\n    public static final String DINK_PLUGIN_NAME \u003d \"dink\";\n    public static final String DINK_CONFIG_GROUP \u003d \"dinkplugin\";\n    public static final String RUNELITE_CONFIG_GROUP \u003d \"runelite\";\n    public static final String DINK_METADATA_WEBHOOK_KEY \u003d \"metadataWebhook\";\n\n    private static final String DINK_NOT_INSTALLED_WARNING \u003d \"Dink plugin must be installed and configured.\";\n    private static final String DINK_DISABLED_WARNING \u003d \"Dink plugin must be enabled and configured.\";\n    private static final String DINK_META_DISABLED_WARNING \u003d \"To use this trigger, Dink\u0027s \u0027Custom Metadata Handler\" +\n             \" field in \u0027Advanced\u0027 must be not blank.\";\n    private static final String DINK_NOTIFIER_NOTICE \u003d \"The corresponding Dink notifier has been enabled. \" +\n            \"To set the conditions of this notifier, go to the corresponding notifier\u0027s settings in Dink.\";\n\n    void checkDinkAndWarn(String key) {\n        List\u003cString\u003e plugins \u003d externalPluginManager.getInstalledExternalPlugins();\n        if (!plugins.contains(DINK_PLUGIN_NAME)) {\n            plugin.addChatWarning(DINK_NOT_INSTALLED_WARNING);\n            return;\n        }\n\n        boolean dinkEnabled \u003d configManager.getConfiguration(RUNELITE_CONFIG_GROUP, DINK_CONFIG_GROUP, boolean.class);\n        if (!dinkEnabled) {\n            plugin.addChatWarning(DINK_DISABLED_WARNING);\n        }\n\n        if (key.equals(META_NOTIFIER_ENABLED)) {\n            checkMetaAndWarn();\n        } else {\n            checkAndSetNotifier(key);\n        }\n    }\n\n    /**\n     * This approach relies on our key names matching those of Dink plugin.\n     */\n\n    void checkAndSetNotifier(String key) {\n        String notifierEnabled \u003d configManager.getConfiguration(DINK_CONFIG_GROUP, key);\n        if(\"false\".equals(notifierEnabled)) { // notifierEnabled should not be null, but this avoids the null just in case\n            configManager.setConfiguration(DINK_CONFIG_GROUP, key, true);\n            plugin.addChatNotice(DINK_NOTIFIER_NOTICE);\n        }\n    }\n\n    void checkMetaAndWarn() {\n        String dinkMetadataWebhook \u003d configManager.getConfiguration(DINK_CONFIG_GROUP, DINK_METADATA_WEBHOOK_KEY, String.class);\n        if (StringUtils.isBlank(dinkMetadataWebhook)) {\n            plugin.addChatWarning(DINK_META_DISABLED_WARNING);\n        }\n    }\n\n    public void onConfigChanged(ConfigChanged configChanged) {\n        String key \u003d configChanged.getKey();\n        String value \u003d configChanged.getNewValue();\n\n        if (DinkNotificationType.existsWithEnabledKey(key) \u0026\u0026 \"true\".equals(value) \u0026\u0026 config.warningsEnabled() \u0026\u0026 client.getGameState() \u003d\u003d GameState.LOGGED_IN) {\n            checkDinkAndWarn(key);\n        }\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\SettingsManager.java"},{"fileName":"StreamerbotConfig.java","content":"package streamerbot;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\n\n@SuppressWarnings(\"CyclomaticComplexityInspection\")\n@ConfigGroup(SettingsManager.CONFIG_GROUP)\npublic interface StreamerbotConfig extends Config {\n    @ConfigItem(\n            keyName \u003d \"streamerbotAddress\",\n            name \u003d \"Streamerbot address\",\n            description \u003d \"The address of the HTTP server that your Streamerbot instance is running and this plugin will send requests to. \u003cbr/\u003e\"\n            + \"Leave this as default, unless you have your Streamerbot server configured differently\",\n            position \u003d 0\n    )\n\n    default String streamerbotAddress() {\n        return \"http://127.0.0.1:7474\";\n    }\n\n    @ConfigItem(\n            keyName \u003d \"warningsEnabled\",\n            name \u003d \"Configuration warnings\",\n            description \u003d \"Receive warnings about incomplete setup. \u003cbr/\u003e\"\n            + \"This serves as a gentle reminder while setting up this plugin.\",\n            position \u003d 1\n    )\n\n    default boolean warningsEnabled() {\n        return true;\n    }\n\n\n    @ConfigSection(\n            name \u003d \"Dink notifications\",\n            description \u003d \"Settings for triggering Streamerbot actions upon Dink notifications\",\n            position \u003d 2,\n            closedByDefault \u003d true\n    )\n\n    String dinkNotificationSection \u003d \"Dink notifications\";\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.COLLECTION_LOG_ENABLED,\n            name \u003d \"Enable collection log\",\n            description \u003d \"Trigger an action in Streamerbot when Dink fires a collection log notification\",\n            position \u003d 3,\n            section \u003d dinkNotificationSection\n    )\n\n    default boolean collectionLogEnabled() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.COLLECTION_LOG_ACTION_NAME,\n            name \u003d \"Collection log action name\",\n            description \u003d \"The exact name of the action to trigger in Streamerbot upon a Dink collection log notification\",\n            position\u003d 4,\n            section \u003d dinkNotificationSection\n    )\n\n    default String collectionLogActionName() {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.PETS_ENABLED,\n            name \u003d \"Enable pets\",\n            description \u003d \"Trigger an action in Streamerbot when Dink fires a pet notification\",\n            position \u003d 5,\n            section \u003d dinkNotificationSection\n    )\n\n    default boolean petsEnabled() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.PET_ACTION_NAME,\n            name \u003d \"Pet action name\",\n            description \u003d \"The exact name of the action to trigger in Streamerbot upon a Dink pet notification\",\n            position \u003d 6,\n            section \u003d dinkNotificationSection\n    )\n\n    default String petActionName() {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.LEVEL_ENABLED,\n            name \u003d \"Enable level\",\n            description \u003d \"Trigger an action in Streamerbot when Dink fires a level notification\",\n            position \u003d 7,\n            section \u003d dinkNotificationSection\n    )\n\n    default boolean levelEnabled() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.LEVEL_ACTION_NAME,\n            name \u003d \"Level action name\",\n            description \u003d \"The exact name of the action to trigger in Streamerbot upon a Dink level notification\",\n            position \u003d 8,\n            section \u003d dinkNotificationSection\n    )\n\n    default String levelActionName() {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.LOOT_ENABLED,\n            name \u003d \"Enable loot\",\n            description \u003d \"Trigger an action in Streamerbot when Dink fires a loot notification\",\n            position \u003d 9,\n            section \u003d dinkNotificationSection\n    )\n\n    default boolean lootEnabled() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.LOOT_ACTION_NAME,\n            name \u003d \"Loot action name\",\n            description \u003d \"The exact name of the action to trigger in Streamerbot upon a Dink loot notification\",\n            position \u003d 10,\n            section \u003d dinkNotificationSection\n    )\n\n    default String lootActionName() {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.DEATH_ENABLED,\n            name \u003d \"Enable death\",\n            description \u003d \"Trigger an action in Streamerbot when Dink fires a death notification\",\n            position \u003d 11,\n            section \u003d dinkNotificationSection\n    )\n\n    default boolean deathEnabled() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.DEATH_ACTION_NAME,\n            name \u003d \"Death action name\",\n            description \u003d \"The exact name of the action to trigger in Streamerbot upon a Dink death notification\",\n            position \u003d 12,\n            section \u003d dinkNotificationSection\n    )\n\n    default String deathActionName() {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.SLAYER_ENABLED,\n            name \u003d \"Enable slayer\",\n            description \u003d \"Trigger an action in Streamerbot when Dink fires a slayer notification\",\n            position \u003d 13,\n            section \u003d dinkNotificationSection\n    )\n\n    default boolean slayerEnabled() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.SLAYER_ACTION_NAME,\n            name \u003d \"Slayer action name\",\n            description \u003d \"The exact name of the action to trigger in Streamerbot upon a Dink slayer notification\",\n            position \u003d 14,\n            section \u003d dinkNotificationSection\n    )\n\n    default String slayerActionName() {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.QUESTS_ENABLED,\n            name \u003d \"Enable quests\",\n            description \u003d \"Trigger an action in Streamerbot when Dink fires a quest notification\",\n            position \u003d 15,\n            section \u003d dinkNotificationSection\n    )\n\n    default boolean questsEnabled() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.QUEST_ACTION_NAME,\n            name \u003d \"Quest action name\",\n            description \u003d \"The exact name of the action to trigger in Streamerbot upon a Dink quest notification\",\n            position \u003d 16,\n            section \u003d dinkNotificationSection\n    )\n\n    default String questActionName() {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.CLUES_ENABLED,\n            name \u003d \"Enable clue scrolls\",\n            description \u003d \"Trigger an action in Streamerbot when Dink fires a clue notification\",\n            position \u003d 17,\n            section \u003d dinkNotificationSection\n    )\n\n    default boolean cluesEnabled() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.CLUE_ACTION_NAME,\n            name \u003d \"Clue action name\",\n            description \u003d \"The exact name of the action to trigger in Streamerbot upon a Dink clue notification\",\n            position \u003d 18,\n            section \u003d dinkNotificationSection\n    )\n\n    default String clueActionName() {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.SPEEDRUNS_ENABLED,\n            name \u003d \"Enable speedruns\",\n            description \u003d \"Trigger an action in Streamerbot when Dink fires a quest speedrun notification\",\n            position \u003d 19,\n            section \u003d dinkNotificationSection\n    )\n\n    default boolean speedrunsEnabled() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.SPEEDRUN_ACTION_NAME,\n            name \u003d \"Speedrun action name\",\n            description \u003d \"The exact name of the action to trigger in Streamerbot upon a Dink quest speedrun notification\",\n            position \u003d 20,\n            section \u003d dinkNotificationSection\n    )\n\n    default String speedrunActionName() {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.KILL_COUNT_ENABLED,\n            name \u003d \"Enable kill count\",\n            description \u003d \"Trigger an action in Streamerbot when Dink fires a kill count notification\",\n            position \u003d 21,\n            section \u003d dinkNotificationSection\n    )\n\n    default boolean killCountEnabled() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.KILL_COUNT_ACTION_NAME,\n            name \u003d \"Kill count action name\",\n            description \u003d \"The exact name of the action to trigger in Streamerbot upon a Dink kill count notification\",\n            position \u003d 22,\n            section \u003d dinkNotificationSection\n    )\n\n    default String killCountActionName() {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.COMBAT_TASK_ENABLED,\n            name \u003d \"Enable combat tasks\",\n            description \u003d \"Trigger an action in Streamerbot when Dink fires a combat task notification\",\n            position \u003d 23,\n            section \u003d dinkNotificationSection\n    )\n\n    default boolean combatTaskEnabled() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.COMBAT_TASK_ACTION_NAME,\n            name \u003d \"Combat task action name\",\n            description \u003d \"The exact name of the action to trigger in Streamerbot upon a Dink combat task notification\",\n            position \u003d 24,\n            section \u003d dinkNotificationSection\n    )\n\n    default String combatTaskActionName() {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.DIARY_ENABLED,\n            name \u003d \"Enable diary\",\n            description \u003d \"Trigger an action in Streamerbot when Dink fires a achievement diary notification\",\n            position \u003d 25,\n            section \u003d dinkNotificationSection\n    )\n\n    default boolean diaryEnabled() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.DIARY_ACTION_NAME,\n            name \u003d \"Diary action name\",\n            description \u003d \"The exact name of the action to trigger in Streamerbot upon a Dink diary notification\",\n            position \u003d 26,\n            section \u003d dinkNotificationSection\n    )\n\n    default String diaryActionName() {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.GAMBLE_ENABLED,\n            name \u003d \"Enable BA gamble\",\n            description \u003d \"Trigger an action in Streamerbot when Dink fires a BA gamble notification\",\n            position \u003d 27,\n            section \u003d dinkNotificationSection\n    )\n\n    default boolean gambleEnabled() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.GAMBLE_ACTION_NAME,\n            name \u003d \"BA gamble action name\",\n            description \u003d \"The exact name of the action to trigger in Streamerbot upon a Dink BA gamble notification\",\n            position \u003d 28,\n            section \u003d dinkNotificationSection\n    )\n\n    default String gambleActionName() {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.PLAYER_KILLS_ENABLED,\n            name \u003d \"Enable player kills\",\n            description \u003d \"Trigger an action in Streamerbot when Dink fires a player kill notification\",\n            position \u003d 29,\n            section \u003d dinkNotificationSection\n    )\n\n    default boolean playerKillsEnabled() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.PLAYER_KILL_ACTION_NAME,\n            name \u003d \"Player kill action name\",\n            description \u003d \"The exact name of the action to trigger in Streamerbot upon a Dink player kill notification\",\n            position \u003d 30,\n            section \u003d dinkNotificationSection\n    )\n\n    default String playerKillActionName() {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.GROUP_STORAGE_ENABLED,\n            name \u003d \"Enable group storage\",\n            description \u003d \"Trigger an action in Streamerbot when Dink fires a group storage transaction notification\",\n            position \u003d 31,\n            section \u003d dinkNotificationSection\n    )\n\n    default boolean Enabled() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.GROUP_STORAGE_ACTION_NAME,\n            name \u003d \"Group storage action name\",\n            description \u003d \"The exact name of the action to trigger in Streamerbot upon a Dink group storage transaction notification\",\n            position \u003d 32,\n            section \u003d dinkNotificationSection\n    )\n\n    default String groupStorageActionName() {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.GRAND_EXCHANGE_ENABLED,\n            name \u003d \"Enable GE transactions\",\n            description \u003d \"Trigger an action in Streamerbot when Dink fires a Grand Exchange transaction notification\",\n            position \u003d 33,\n            section \u003d dinkNotificationSection\n    )\n\n    default boolean grandExchangeEnabled() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.GRAND_EXCHANGE_ACTION_NAME,\n            name \u003d \"GE transaction action name\",\n            description \u003d \"The exact name of the action to trigger in Streamerbot upon a Dink Grand Exchange transaction notification\",\n            position \u003d 34,\n            section \u003d dinkNotificationSection\n    )\n\n    default String grandExchangeActionName() {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.TRADES_ENABLED,\n            name \u003d \"Enable trades\",\n            description \u003d \"Trigger an action in Streamerbot when Dink fires a trade notification\",\n            position \u003d 35,\n            section \u003d dinkNotificationSection\n    )\n\n    default boolean tradesEnabled() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.TRADES_ACTION_NAME,\n            name \u003d \"Trades action name\",\n            description \u003d \"The exact name of the action to trigger in Streamerbot upon a Dink trade notification\",\n            position \u003d 36,\n            section \u003d dinkNotificationSection\n    )\n\n    default String tradesActionName() {\n        return \"\";\n    }\n\n\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.CUSTOM_CHAT_ENABLED,\n            name \u003d \"Enable custom chat\",\n            description \u003d \"Trigger an action in Streamerbot when Dink fires a custom chat notification\",\n            position \u003d 37,\n            section \u003d dinkNotificationSection\n    )\n\n    default boolean customChatEnabled() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.CUSTOM_CHAT_ACTION_NAME,\n            name \u003d \"Custom chat action name\",\n            description \u003d \"The exact name of the action to trigger in Streamerbot upon a Dink custom chat notification\",\n            position \u003d 38,\n            section \u003d dinkNotificationSection\n    )\n\n    default String customChatActionName() {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.EXTERNAL_PLUGIN_REQUESTS_ENABLED,\n            name \u003d \"Enable external plugin requests\",\n            description \u003d \"Trigger an action in Streamerbot when Dink fires an external plugin notification\",\n            position \u003d 39,\n            section \u003d dinkNotificationSection\n    )\n\n    default boolean externalPluginRequestsEnabled() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.EXTERNAL_REQUEST_ACTION_NAME,\n            name \u003d \"External request action name\",\n            description \u003d \"The exact name of the action to trigger in Streamerbot upon a Dink external plugin notification\",\n            position \u003d 40,\n            section \u003d dinkNotificationSection\n    )\n\n    default String externalRequestActionName() {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.LEAGUES_ENABLED,\n            name \u003d \"Enable leagues notifications\",\n            description \u003d \"Trigger an action in Streamerbot when Dink fires a notification for \u003cbr/\u003e\" +\n                    \"leagues area unlock, combat mastery unlock, relic unlock, task completion or trophy unlock\",\n            position \u003d 41,\n            section \u003d dinkNotificationSection\n\n    )\n\n    default boolean leaguesEnabled() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.LEAGUES_ACTION_NAME,\n            name \u003d \"Leagues action name\",\n            description \u003d \"The exact name of the action to trigger in Streamerbot upon a Dink leagues notification\",\n            position \u003d 42,\n            section \u003d dinkNotificationSection\n    )\n\n    default String leaguesActionName() {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.META_NOTIFIER_ENABLED,\n            name \u003d \"Enable meta notifications\",\n            description \u003d \"Trigger an action in Streamerbot when Dink fires login, logout and ToA purple notification \u003cbr/\u003e\" +\n                    \"Note: To use this notifier, Dink\u0027s \u0027Custom Metadata Handler\u0027 setting in the \u0027Advanced\u0027 section must contain some URL\",\n            position \u003d 43,\n            section \u003d dinkNotificationSection\n    )\n\n    default boolean metaNotifierEnabled() {\n        return false;\n    }\n\n    @ConfigItem(\n            keyName \u003d SettingsManager.META_NOTIFIER_ACTION_NAME,\n            name \u003d \"Meta notifier action name\",\n            description \u003d \"The exact name of the action to trigger in Streamerbot upon a Dink notification\",\n            position \u003d 44,\n            section \u003d dinkNotificationSection\n    )\n\n    default String metaNotifierActionName() {\n        return \"\";\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\StreamerbotConfig.java"},{"fileName":"StreamerbotPlugin.java","content":"package streamerbot;\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\n\nimport streamerbot.triggers.DinkRequestTrigger;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.client.chat.ChatMessageManager;\nimport net.runelite.client.chat.QueuedMessage;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.events.PluginMessage;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.util.ColorUtil;\n\nimport java.awt.*;\n\n\n@Slf4j\n@PluginDescriptor(\n        name \u003d \"Streamerbot\",\n        description \u003d \"Lets in-game events trigger Streamerbot actions. \u003cbr/\u003e\"\n                + \"Requires the use of the Streamerbot application and Dink plugin\",\n        tags \u003d {\"streamer\", \"notifier\", \"trigger\", \"OBS\", \"Streamerbot\", \"Twitch\", \"Dink\"}\n)\n\npublic class StreamerbotPlugin extends Plugin {\n    @Inject\n    private ChatMessageManager chatManager;\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private StreamerbotConfig config;\n\n    @Inject\n    private DinkRequestTrigger dinkRequestTrigger;\n\n    @Inject\n    private SettingsManager settingsManager;\n\n    @Override\n    protected void startUp() {\n        log.info(\"Streamerbot started!\");\n    }\n\n    @Override\n    protected void shutDown()\n    {\n        log.info(\"Streamerbot stopped!\");\n    }\n\n    @Subscribe\n    public void onConfigChanged(ConfigChanged configChanged) {\n        if(!configChanged.getGroup().equals(SettingsManager.CONFIG_GROUP)) {\n            return;\n        }\n\n        settingsManager.onConfigChanged(configChanged);\n    }\n\n    @Subscribe\n    public void onPluginMessage(PluginMessage pluginMessage) {\n        dinkRequestTrigger.onPluginMessage(pluginMessage);\n    }\n\n    private final static Color CYAN \u003d ColorUtil.fromHex(\"#00c7ff\");\n    private final static Color RED \u003d ColorUtil.fromHex(\"#ca2a2d\");\n\n\n    public void queueMessage(String formatted) {\n        chatManager.queue(\n        QueuedMessage.builder()\n                .type(ChatMessageType.CONSOLE)\n                .runeLiteFormattedMessage(formatted)\n                .build()\n        );\n    }\n\n    public void addChatWarning(String message) {\n        String formatted \u003d String.format(\"[%s] %s: %s\",\n                ColorUtil.wrapWithColorTag(getName(), CYAN),\n                \"Warning\",\n                ColorUtil.wrapWithColorTag(message, RED)\n        );\n\n        queueMessage(formatted);\n    }\n\n    public void addChatNotice(String message) {\n        String formatted \u003d String.format(\"[%s] %s: %s\",\n                ColorUtil.wrapWithColorTag(getName(), CYAN),\n                \"Notice\",\n                message\n        );\n\n        queueMessage(formatted);\n    }\n\n    @Provides\n    StreamerbotConfig provideConfig(ConfigManager configManager) {\n        return configManager.getConfig(StreamerbotConfig.class);\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\StreamerbotPlugin.java"},{"fileName":"BaseTrigger.java","content":"package streamerbot.triggers;\n\n\nimport com.google.gson.Gson;\nimport streamerbot.StreamerbotConfig;\nimport streamerbot.messaging.TriggerHandler;\nimport streamerbot.util.StringToIntAdapter;\nimport lombok.extern.slf4j.Slf4j;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.client.config.ConfigManager;\n\n@Slf4j\npublic abstract class BaseTrigger {\n    protected Gson gson;\n\n    @Inject\n    void init(Gson gson) {\n        this.gson \u003d gson.newBuilder()\n                .registerTypeAdapter(Integer.class, new StringToIntAdapter())\n                .registerTypeAdapter(int.class, new StringToIntAdapter())\n                .create();\n    }\n\n    @Inject\n    protected ConfigManager configManager;\n\n    @Inject\n    protected StreamerbotConfig config;\n\n    @Inject\n    protected Client client;\n\n    @Inject\n    private TriggerHandler triggerHandler;\n\n    protected void sendRequest(String json) {\n        triggerHandler.sendJson(json);\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\triggers\\BaseTrigger.java"},{"fileName":"DinkRequestTrigger.java","content":"package streamerbot.triggers;\n\nimport com.google.gson.JsonSyntaxException;\nimport streamerbot.SettingsManager;\nimport streamerbot.dinkdata.*;\nimport streamerbot.dinkdata.DinkNotificationData;\nimport streamerbot.dinkdata.DinkNotificationType;\nimport streamerbot.messaging.DoActionRequest;\nimport net.runelite.client.events.PluginMessage;\nimport lombok.extern.slf4j.Slf4j;\nimport org.apache.commons.lang3.StringUtils;\nimport javax.inject.Singleton;\nimport java.util.Map;\n\n@Slf4j\n@Singleton\npublic class DinkRequestTrigger extends BaseTrigger {\n\n    private static final String DINK_KEY \u003d \"dinkplugin\";\n\n    public void onPluginMessage(PluginMessage pluginMessage)  {\n        if (!pluginMessage.getNamespace().equals(DINK_KEY)) {\n            return;\n        }\n\n        DinkNotificationType notificationType \u003d DinkNotificationType.fromName(pluginMessage.getName());\n\n        if (notificationType \u003d\u003d DinkNotificationType.UNKNOWN) {\n            return;\n        }\n\n        boolean enabled \u003d configManager.getConfiguration(SettingsManager.CONFIG_GROUP, notificationType.getEnabledKey(), boolean.class);\n        String actionName \u003d configManager.getConfiguration(SettingsManager.CONFIG_GROUP, notificationType.getActionKey(), String.class);\n\n        if (!enabled ||  StringUtils.isBlank(actionName)) {\n            log.debug(\"Notification type {} is disabled, returning\", notificationType.getType());\n            return;\n        }\n\n        Map\u003cString, Object\u003e data \u003d pluginMessage.getData();\n\n        Class\u003c? extends DinkNotificationData\u003e clazz \u003d notificationType.getDataClass();\n        DinkNotificationData input;\n\n        try {\n            input \u003d gson.fromJson(gson.toJsonTree(data), clazz);\n        } catch (JsonSyntaxException e) {\n            log.warn(\"Failed to parse Dink death notification: {}\", data, e);\n            return;\n        }\n\n        Map\u003cString, Object\u003e args \u003d input.sanitized(gson);\n        DoActionRequest request \u003d new DoActionRequest(actionName,  args);\n        String json \u003d gson.toJson(request);\n        sendRequest(json);\n    }\n}\n\n","filePath":"src\\main\\java\\streamerbot\\triggers\\DinkRequestTrigger.java"},{"fileName":"Sanitizable.java","content":"package streamerbot.util;\nimport com.google.gson.Gson;\n\nimport java.util.Map;\n\npublic interface Sanitizable {\n\n   Map\u003cString, Object\u003e sanitized(Gson gson);\n}\n","filePath":"src\\main\\java\\streamerbot\\util\\Sanitizable.java"},{"fileName":"StringToIntAdapter.java","content":"package streamerbot.util;\n\nimport com.google.gson.TypeAdapter;\nimport com.google.gson.stream.JsonReader;\nimport com.google.gson.stream.JsonToken;\nimport com.google.gson.stream.JsonWriter;\n\nimport java.io.IOException;\n\npublic class StringToIntAdapter extends TypeAdapter\u003cInteger\u003e {\n    @Override\n    public void write(JsonWriter out, Integer value) throws IOException {\n        out.value(value);\n    }\n\n    @Override\n    public Integer read(JsonReader in) throws IOException {\n        if (in.peek() \u003d\u003d JsonToken.NULL) {\n            in.nextNull();\n            return null;\n        }\n\n        String stringValue \u003d in.nextString();\n        try {\n            return Integer.parseInt(stringValue);\n        } catch (NumberFormatException e) {\n            return 0;\n        }\n    }\n}\n","filePath":"src\\main\\java\\streamerbot\\util\\StringToIntAdapter.java"},{"fileName":"StreamerbotPluginTest.java","content":"package streamerbot;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class StreamerbotPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(StreamerbotPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\streamerbot\\StreamerbotPluginTest.java"}]},{"commit":"34020eb9b0031e6cf42b32b013d3727f5d0fb3cd","repository":"https://github.com/DrJam/recently-killed-highlight.git","internalName":"recently-killed-highlight","files":[{"fileName":"RecentlyKilledHighlightConfig.java","content":"package com.recentlyKilledHighlight;\n\nimport net.runelite.client.config.*;\nimport net.runelite.client.util.Text;\n\nimport java.awt.*;\nimport java.util.List;\n\n@ConfigGroup(\"recentlyKilledHighlight\")\npublic interface RecentlyKilledHighlightConfig extends Config {\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"maxNpcs\",\n\t\t\tname \u003d \"NPCs remembered\",\n\t\t\tdescription \u003d \"How many recent NPC kills to track\",\n\t\t\tposition \u003d 0\n\t)\n\t@Range(min \u003d 0, max \u003d 25)\n\tdefault int maxNpcs() { return 10; }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"highlightMenuNames\",\n\t\t\tname \u003d \"Highlight menu names\",\n\t\t\tdescription \u003d \"Highlight NPC names in right click menu\"\n\t)\n\tdefault boolean highlightMenuNames()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d \"todoMode\",\n\t\t\tname \u003d \"To-Do Mode\",\n\t\t\tdescription \u003d \"Removes NPC highlights when they target you.\"\n\t)\n\tdefault boolean todoMode()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 3,\n\t\t\tkeyName \u003d \"npcIgnoreList\",\n\t\t\tname \u003d \"Ignore List\",\n\t\t\tdescription \u003d \"List of NPC names to ignore\"\n\t)\n\tdefault String npcsToIgnoreString()\n\t{\n\t\treturn \"\";\n\t}\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Render Style\",\n\t\t\tdescription \u003d \"The render style of Killed NPCs\",\n\t\t\tposition \u003d 4\n\t)\n\tString renderStyleSection \u003d \"renderStyleSection\";\n\n\t@ConfigItem(\n\t\t\tposition \u003d 0,\n\t\t\tkeyName \u003d \"highlightHull\",\n\t\t\tname \u003d \"Highlight hull\",\n\t\t\tdescription \u003d \"Configures whether or not NPC should be highlighted by hull\",\n\t\t\tsection \u003d renderStyleSection\n\t)\n\tdefault boolean highlightHull()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"highlightTile\",\n\t\t\tname \u003d \"Highlight tile\",\n\t\t\tdescription \u003d \"Configures whether or not NPC should be highlighted by tile\",\n\t\t\tsection \u003d renderStyleSection\n\t)\n\tdefault boolean highlightTile()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d \"highlightOutline\",\n\t\t\tname \u003d \"Highlight outline\",\n\t\t\tdescription \u003d \"Configures whether or not the model of the NPC should be highlighted by outline\",\n\t\t\tsection \u003d renderStyleSection\n\t)\n\tdefault boolean highlightOutline()\n\t{\n\t\treturn false;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 3,\n\t\t\tkeyName \u003d \"npcColor\",\n\t\t\tname \u003d \"Highlight Color\",\n\t\t\tdescription \u003d \"Color of the NPC highlight border, menu, and text\",\n\t\t\tsection \u003d renderStyleSection\n\t)\n\tdefault Color highlightColor()\n\t{\n\t\treturn Color.CYAN;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 4,\n\t\t\tkeyName \u003d \"fillColor\",\n\t\t\tname \u003d \"Fill Color\",\n\t\t\tdescription \u003d \"Color of the NPC highlight fill\",\n\t\t\tsection \u003d renderStyleSection\n\t)\n\tdefault Color fillColor()\n\t{\n\t\treturn new Color(0, 255, 255, 20);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 5,\n\t\t\tkeyName \u003d \"borderWidth\",\n\t\t\tname \u003d \"Border Width\",\n\t\t\tdescription \u003d \"Width of the highlighted NPC border\",\n\t\t\tsection \u003d renderStyleSection\n\t)\n\tdefault double borderWidth()\n\t{\n\t\treturn 2;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 6,\n\t\t\tkeyName \u003d \"outlineFeather\",\n\t\t\tname \u003d \"Outline feather\",\n\t\t\tdescription \u003d \"Specify between 0-4 how much of the model outline should be faded\",\n\t\t\tsection \u003d renderStyleSection\n\t)\n\t@Range(\n\t\t\tmin \u003d 0,\n\t\t\tmax \u003d 4\n\t)\n\tdefault int outlineFeather()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Experimental\",\n\t\t\tdescription \u003d \"Unstable or high-load options\",\n\t\t\tposition \u003d 5,\n\t\t\tclosedByDefault \u003d true\n\t)\n\tString experimentalSection \u003d \"experimentalSection\";\n\n\t@ConfigItem(\n\t\t\tposition \u003d 0,\n\t\t\tkeyName \u003d \"noLimit\",\n\t\t\tname \u003d \"No Limit\",\n\t\t\tdescription \u003d \"When enabled, removes the limit of max NPCs remembered, will remember every NPC killed for the rest of the session.\",\n\t\t\tsection \u003d experimentalSection\n\t)\n\tdefault boolean noLimit()\n\t{\n\t\treturn false;\n\t}\n\n\n\n\n\n}\n","filePath":"src\\main\\java\\com\\recentlyKilledHighlight\\RecentlyKilledHighlightConfig.java"},{"fileName":"RecentlyKilledHighlightPlugin.java","content":"package com.recentlyKilledHighlight;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\n\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.*;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.events.NpcLootReceived;\nimport net.runelite.client.game.NpcUtil;\nimport net.runelite.client.game.npcoverlay.HighlightedNpc;\nimport net.runelite.client.game.npcoverlay.NpcOverlayService;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.util.ColorUtil;\nimport net.runelite.client.util.Text;\nimport net.runelite.client.util.WildcardMatcher;\n\n\nimport java.awt.*;\nimport java.util.*;\nimport java.util.List;\nimport java.util.function.Function;\n\n\n@Slf4j\n@PluginDescriptor(name \u003d \"Recently Killed Highlight\")\npublic class RecentlyKilledHighlightPlugin extends Plugin {\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate RecentlyKilledHighlightConfig config;\n\n\t@Inject\n\tprivate NpcOverlayService npcOverlayService;\n\n\t@Inject\n\tprivate NpcUtil npcUtil;\n\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate final Map\u003cNPC, HighlightedNpc\u003e highlightedNpcs \u003d new HashMap\u003c\u003e();\n\n\tprivate final Function\u003cNPC, HighlightedNpc\u003e isHighlighted \u003d highlightedNpcs::get;\n\n\tprivate final ArrayDeque\u003cNPC\u003e killedNpcs \u003d new ArrayDeque\u003cNPC\u003e();\n\n\tprivate List\u003cString\u003e ignoreFilters \u003d new ArrayList\u003c\u003e();\n\n\t@Override\n\tprotected void startUp() throws Exception {\n\t\tlog.info(\"RecentlyKilledHighlight started!\");\n\t\tnpcOverlayService.registerHighlighter(isHighlighted);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception {\n\t\tlog.info(\"RecentlyKilledHighlight stopped!\");\n\t\tnpcOverlayService.unregisterHighlighter(isHighlighted);\n\t\tkilledNpcs.clear();\n\t\thighlightedNpcs.clear();\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged) {\n\t}\n\n\t@Subscribe\n\tpublic void onNpcSpawned(NpcSpawned npcSpawned)\n\t{\n\t\tfinal NPC npc \u003d npcSpawned.getNpc();\n\t\tfinal String npcName \u003d npc.getName();\n\n\t\tif (npcName \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (containsNpc(killedNpcs, npc))\n\t\t{\n\t\t\thighlightedNpcs.put(npc, getHighlightedNpc(npc));\n\t\t}\n\n\t}\n\n\t@Subscribe\n\tpublic void onNpcDespawned(NpcDespawned npcDespawned)\n\t{\n\t\tfinal NPC npc \u003d npcDespawned.getNpc();\n\t\thighlightedNpcs.remove(npc);\n\t}\n\t@Subscribe\n\tpublic void onNpcLootReceived(NpcLootReceived npcLootReceived)\n\t{\n\t\tfinal NPC npc \u003d npcLootReceived.getNpc();\n\t\tfinal String npcName \u003d npc.getName();\n\n\n\t\tif (!containsNpc(killedNpcs, npc) \u0026\u0026 !nameIsIgnored(npcName)) {\n\t\t\tkilledNpcs.push(npc);\n\n\t\t\tif (killedNpcs.size() \u003e config.maxNpcs() \u0026\u0026 !config.noLimit()) {\n\t\t\t\tkilledNpcs.removeLast();\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onInteractingChanged(InteractingChanged event) {\n\t\tif (!(event.getSource() instanceof NPC)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!config.todoMode()) {\n\t\t\treturn;\n\t\t}\n\n\t\tfinal NPC sourceNpc \u003d (NPC) event.getSource();\n\t\tNPC highlightedSourceNpc \u003d findNpc(highlightedNpcs.keySet(), sourceNpc);\n\n\t\t// not targeting player, and not currently highlighted\n\t\tif (event.getTarget() !\u003d client.getLocalPlayer() \u0026\u0026 highlightedSourceNpc \u003d\u003d null) {\n\t\t\t// not in remembered list, do nothing\n\t\t\tif (!containsNpc(killedNpcs, sourceNpc)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (sourceNpc.isDead()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\thighlightedNpcs.put(sourceNpc, getHighlightedNpc(sourceNpc));\n\t\t\tnpcOverlayService.rebuild();\n\t\t\treturn;\n\t\t}\n\n\t\t// targeting player \u0026 highlighted, unhighlight\n\t\tif (highlightedSourceNpc !\u003d null) {\n\t\t\thighlightedNpcs.remove(highlightedSourceNpc);\n\t\t\tnpcOverlayService.rebuild();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onMenuEntryAdded(MenuEntryAdded event)\n\t{\n\t\tfinal MenuEntry menuEntry \u003d event.getMenuEntry();\n\t\tfinal NPC npc \u003d menuEntry.getNpc();\n\n\t\tif (npc \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tColor color \u003d null;\n\n\t\tif (highlightedNpcs.containsKey(npc) \u0026\u0026 config.highlightMenuNames() \u0026\u0026 !npcUtil.isDying(npc))\n\t\t{\n\t\t\tcolor \u003d config.highlightColor();\n\t\t}\n\n\t\tif (color !\u003d null)\n\t\t{\n\t\t\tfinal String target \u003d ColorUtil.prependColorTag(Text.removeTags(event.getTarget()), color);\n\t\t\tmenuEntry.setTarget(target);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged configChanged)\n\t{\n\t\tif (!configChanged.getGroup().equals(\"recentlyKilledHighlight\"))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tclientThread.invoke(this::rebuild);\n\t}\n\n\t@Provides\n\tRecentlyKilledHighlightConfig provideConfig(ConfigManager configManager) {\n\t\treturn configManager.getConfig(RecentlyKilledHighlightConfig.class);\n\t}\n\n\tprivate void rebuild()\n\t{\n\t\tignoreFilters \u003d getIgnoreFilters();\n\t\thighlightedNpcs.clear();\n\n\t\tif (client.getGameState() !\u003d GameState.LOGGED_IN \u0026\u0026 client.getGameState() !\u003d GameState.LOADING)\n\t\t{\n\t\t\t// NPCs are still in the client after logging out,\n\t\t\t// but we don\u0027t want to highlight those.\n\t\t\treturn;\n\t\t}\n\n\t\tif (!config.noLimit()) {\n\t\t\twhile (killedNpcs.size() \u003e config.maxNpcs() \u0026\u0026 killedNpcs.size() \u003e 0) {\n\t\t\t\tkilledNpcs.removeLast();\n\t\t\t}\n\t\t}\n\n\t\tfor (NPC npc : client.getNpcs())\n\t\t{\n\t\t\tif (containsNpc(killedNpcs, npc))\n\t\t\t{\n\t\t\t\tif (nameIsIgnored(npc.getName())) {\n\t\t\t\t\tkilledNpcs.removeIf(x -\u003e npc.getIndex()\u003d\u003dx.getIndex());\n\t\t\t\t} else {\n\t\t\t\t\tif (npc.getInteracting() !\u003d client.getLocalPlayer() || !config.todoMode()) {\n\t\t\t\t\t\thighlightedNpcs.put(npc, getHighlightedNpc(npc));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tnpcOverlayService.rebuild();\n\t}\n\n\tprivate HighlightedNpc getHighlightedNpc(NPC npc)\n\t{\n\t\treturn HighlightedNpc.builder()\n\t\t\t\t.npc(npc)\n\t\t\t\t.highlightColor(config.highlightColor())\n\t\t\t\t.fillColor(config.fillColor())\n\t\t\t\t.hull(config.highlightHull())\n\t\t\t\t.tile(config.highlightTile())\n\t\t\t\t.outline(config.highlightOutline())\n\t\t\t\t.borderWidth((float) config.borderWidth())\n\t\t\t\t.outlineFeather(config.outlineFeather())\n\t\t\t\t.build();\n\t}\n\n\tprivate List\u003cString\u003e getIgnoreFilters() {\n\t\tfinal String configNpcsString \u003d config.npcsToIgnoreString();\n\n\t\tif (configNpcsString.isEmpty()) {\n\t\t\treturn Collections.emptyList();\n\t\t}\n\n\t\treturn Text.fromCSV(configNpcsString);\n\t}\n\n\tprivate boolean nameIsIgnored(String npcName) {\n\t\tif (npcName \u003d\u003d null) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (String configName : ignoreFilters)  {\n\t\t\tif (WildcardMatcher.matches(configName.trim(), npcName)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate boolean containsNpc(Collection\u003cNPC\u003e npcs, NPC npc)\n\t{\n\t\treturn npcs.stream().anyMatch((collectionNPC) -\u003e collectionNPC.getIndex() \u003d\u003d npc.getIndex());\n\t}\n\n\tprivate NPC findNpc(Collection\u003cNPC\u003e npcs, NPC npc)\n\t{\n\t\treturn npcs.stream().filter((collectionNpc) -\u003e collectionNpc.getIndex() \u003d\u003d npc.getIndex()).findFirst().orElse(null);\n\t}\n}\n","filePath":"src\\main\\java\\com\\recentlyKilledHighlight\\RecentlyKilledHighlightPlugin.java"},{"fileName":"RecentlyKilledHighlightPluginTest.java","content":"package com.recentlyKilledHighlight;\n\nimport com.recentlyKilledHighlight.RecentlyKilledHighlightPlugin;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class RecentlyKilledHighlightPluginTest {\n\tpublic static void main(String[] args) throws Exception {\n\t\tExternalPluginManager.loadBuiltin(RecentlyKilledHighlightPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\recentlyKilledHighlight\\RecentlyKilledHighlightPluginTest.java"}]},{"commit":"d25e6225f76aadda36ee6d8493c97d8069edec8e","repository":"https://github.com/fatfingers23/mac-runelite-native-notifications.git","internalName":"native-mac-notifications","files":[{"fileName":"Foundation.java","content":"package com.NativeMacNotifications.macJna;\n\nimport com.sun.jna.Function;\nimport com.sun.jna.Library;\nimport com.sun.jna.Native;\nimport com.sun.jna.NativeLibrary;\nimport com.sun.jna.Pointer;\nimport java.nio.charset.StandardCharsets;\nimport java.lang.reflect.Proxy;\nimport javax.annotation.Nullable;\n\n/**\n * This code is from Intellij-community Github repo. Some has been edited or removed. But all credit goes to those contributors\n * https://github.com/JetBrains/intellij-community/blob/master/platform/util/ui/src/com/intellij/ui/mac/foundation/Foundation.java\n */\npublic final class Foundation\n{\n\tprivate static final FoundationLibrary myFoundationLibrary;\n\tprivate static final Function myObjcMsgSend;\n\n\tstatic\n\t{\n\t\tmyFoundationLibrary \u003d Native.loadLibrary(\"Foundation\", FoundationLibrary.class);\n\t\tNativeLibrary nativeLibrary \u003d ((Library.Handler) Proxy.getInvocationHandler(myFoundationLibrary)).getNativeLibrary();\n\t\tmyObjcMsgSend \u003d nativeLibrary.getFunction(\"objc_msgSend\");\n\t}\n\n\tpublic static void init()\n\t{ /* fake method to init foundation */ }\n\n\tprivate Foundation()\n\t{\n\t}\n\n\t/**\n\t * Get the ID of the NSClass with className\n\t */\n\tpublic static ID getObjcClass(String className)\n\t{\n\t\treturn myFoundationLibrary.objc_getClass(className);\n\t}\n\n\tpublic static Pointer createSelector(String s)\n\t{\n\t\treturn myFoundationLibrary.sel_registerName(s);\n\t}\n\n\tprivate static Object[] prepInvoke(ID id, Pointer selector, Object[] args)\n\t{\n\t\tObject[] invokArgs \u003d new Object[args.length + 2];\n\t\tinvokArgs[0] \u003d id;\n\t\tinvokArgs[1] \u003d selector;\n\t\tSystem.arraycopy(args, 0, invokArgs, 2, args.length);\n\t\treturn invokArgs;\n\t}\n\n\tpublic static ID invoke(final ID id, final Pointer selector, Object... args)\n\t{\n\t\t// objc_msgSend is called with the calling convention of the target method\n\t\t// on x86_64 this does not make a difference, but arm64 uses a different calling convention for varargs\n\t\t// it is therefore important to not call objc_msgSend as a vararg function\n\t\treturn new ID(myObjcMsgSend.invokeLong(prepInvoke(id, selector, args)));\n\t}\n\n\tpublic static ID invoke(final String cls, final String selector, Object... args)\n\t{\n\t\treturn invoke(getObjcClass(cls), createSelector(selector), args);\n\t}\n\n\tpublic static ID invoke(final ID id, final String selector, Object... args)\n\t{\n\t\treturn invoke(id, createSelector(selector), args);\n\t}\n\n\tprivate static final class NSString\n\t{\n\t\tprivate static final ID nsStringCls \u003d getObjcClass(\"NSString\");\n\t\tprivate static final Pointer stringSel \u003d createSelector(\"string\");\n\t\tprivate static final Pointer allocSel \u003d createSelector(\"alloc\");\n\t\tprivate static final Pointer autoreleaseSel \u003d createSelector(\"autorelease\");\n\t\tprivate static final Pointer initWithBytesLengthEncodingSel \u003d createSelector(\"initWithBytes:length:encoding:\");\n\t\tprivate static final long nsEncodingUTF16LE \u003d convertCFEncodingToNS(FoundationLibrary.kCFStringEncodingUTF16LE);\n\n\t\tpublic static ID create(String s)\n\t\t{\n\t\t\t// Use a byte[] rather than letting jna do the String -\u003e char* marshalling itself.\n\t\t\t// Turns out about 10% quicker for long strings.\n\t\t\tif (s.isEmpty())\n\t\t\t{\n\t\t\t\treturn invoke(nsStringCls, stringSel);\n\t\t\t}\n\n\t\t\tbyte[] utf16Bytes \u003d s.getBytes(StandardCharsets.UTF_16LE);\n\t\t\treturn invoke(invoke(invoke(nsStringCls, allocSel),\n\t\t\t\tinitWithBytesLengthEncodingSel, utf16Bytes, utf16Bytes.length, nsEncodingUTF16LE),\n\t\t\t\tautoreleaseSel);\n\t\t}\n\t}\n\n\tpublic static ID nsString(@Nullable String s)\n\t{\n\t\treturn s \u003d\u003d null ? ID.NIL : NSString.create(s);\n\t}\n\n\tprivate static long convertCFEncodingToNS(long cfEncoding)\n\t{\n\t\treturn myFoundationLibrary.CFStringConvertEncodingToNSStringEncoding(cfEncoding) \u0026 0xffffffffffL;  // trim to C-type limits\n\t}\n}\n","filePath":"src\\main\\java\\com\\NativeMacNotifications\\macJna\\Foundation.java"},{"fileName":"FoundationLibrary.java","content":"package com.NativeMacNotifications.macJna;\n\nimport com.sun.jna.Library;\nimport com.sun.jna.Pointer;\n\n/**\n * This code is from Intellij-community Github repo. Some has been edited or removed. But all credit goes to those contributors\n * https://github.com/JetBrains/intellij-community/blob/master/platform/util/ui/src/com/intellij/ui/mac/foundation/FoundationLibrary.java\n */\npublic interface FoundationLibrary extends Library\n{\n\tlong CFStringConvertEncodingToNSStringEncoding(long cfEncoding);\n\n\tID objc_getClass(String className);\n\n\tPointer sel_registerName(String selectorName);\n\n\tint kCFStringEncodingUTF16LE \u003d 0x14000100;\n}\n","filePath":"src\\main\\java\\com\\NativeMacNotifications\\macJna\\FoundationLibrary.java"},{"fileName":"ID.java","content":"package com.NativeMacNotifications.macJna;\n\nimport com.sun.jna.NativeLong;\n\n/**\n * Could be an address in memory (if pointer to a class or method) or a value (like 0 or 1)\n *\n * This code is from Intellij-community Github repo. Some has been edited or removed. But all credit goes to those contributors\n * https://github.com/JetBrains/intellij-community/blob/master/platform/core-api/src/com/intellij/util/indexing/ID.java\n * User: spLeaner\n */\npublic class ID extends NativeLong\n{\n\n\tpublic ID()\n\t{\n\t}\n\n\tpublic ID(long peer)\n\t{\n\t\tsuper(peer);\n\t}\n\n\tpublic static final ID NIL \u003d new ID(0L);\n\n\tpublic boolean booleanValue()\n\t{\n\t\treturn intValue() !\u003d 0;\n\t}\n}","filePath":"src\\main\\java\\com\\NativeMacNotifications\\macJna\\ID.java"},{"fileName":"NativeMacNotificationsPlugin.java","content":"package com.NativeMacNotifications;\n\nimport com.google.common.base.Strings;\n\nimport javax.inject.Inject;\n\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Player;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.config.RuneLiteConfig;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.NotificationFired;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.plugins.PluginInstantiationException;\nimport net.runelite.client.plugins.PluginManager;\nimport net.runelite.client.ui.ClientUI;\nimport net.runelite.client.util.OSType;\n\n@Slf4j\n@PluginDescriptor(\n        name \u003d \"Native Mac Notifications\"\n)\npublic class NativeMacNotificationsPlugin extends Plugin {\n    @Inject\n    private Client client;\n\n    @Inject\n    private PluginManager pluginManager;\n\n    @Inject\n    private RuneLiteConfig runeLiteConfig;\n\n    @Inject\n    private ClientUI clientUI;\n\n    @Inject\n    private ConfigManager configManager;\n\n    private Boolean resetTrayNotificationsAtShutDown \u003d false;\n\n    @Subscribe\n    public void onNotificationFired(NotificationFired notificationFired) {\n        try {\n            if (OSType.getOSType() !\u003d OSType.MacOS) {\n                return;\n            }\n\n            if (!runeLiteConfig.sendNotificationsWhenFocused() \u0026\u0026 clientUI.isFocused()) {\n                return;\n            }\n\n            Notification.notify(buildTitle(), notificationFired.getMessage());\n        } catch (Exception e) {\n            stopPlugin();\n        }\n    }\n\n    @Override\n    protected void startUp() {\n        if (OSType.getOSType() \u003d\u003d OSType.MacOS) {\n            if (runeLiteConfig.enableTrayNotifications()) {\n                resetTrayNotificationsAtShutDown \u003d true;\n                this.setNotificationTray(false);\n            }\n        }\n    }\n\n    @Override\n    protected void shutDown() {\n        if (resetTrayNotificationsAtShutDown) {\n            this.setNotificationTray(true);\n        }\n    }\n\n    private void stopPlugin() {\n        try {\n            pluginManager.setPluginEnabled(this, false);\n            pluginManager.stopPlugin(this);\n        } catch (PluginInstantiationException ex) {\n            log.error(\"error stopping plugin\", ex);\n        }\n    }\n\n    private String buildTitle() {\n        String notificationTitle \u003d \"RuneLite\";\n\n        Player player \u003d client.getLocalPlayer();\n        if (player \u003d\u003d null) {\n            return notificationTitle;\n        }\n\n        String name \u003d player.getName();\n        if (Strings.isNullOrEmpty(name)) {\n            return notificationTitle;\n        }\n\n        return notificationTitle + \" - \" + name;\n    }\n\n    private void setNotificationTray(boolean enable) {\n        if (OSType.getOSType() \u003d\u003d OSType.MacOS) {\n            configManager.setConfiguration(RuneLiteConfig.GROUP_NAME, \"notificationTray\", enable);\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\NativeMacNotifications\\NativeMacNotificationsPlugin.java"},{"fileName":"Notification.java","content":"package com.NativeMacNotifications;\n\nimport com.NativeMacNotifications.macJna.Foundation;\nimport static com.NativeMacNotifications.macJna.Foundation.invoke;\nimport static com.NativeMacNotifications.macJna.Foundation.nsString;\nimport com.NativeMacNotifications.macJna.ID;\n\n\npublic class Notification\n{\n\n\t/**\n\t * This code is from Intellij-community Github repo. Some has been edited or removed. But all credit goes to those contributors\n\t * https://github.com/JetBrains/intellij-community/blob/master/platform/platform-impl/src/com/intellij/ui/MountainLionNotifications.java\n\t */\n\tpublic static void notify(String title, String description)\n\t{\n\t\tfinal ID notification \u003d invoke(Foundation.getObjcClass(\"NSUserNotification\"), \"new\");\n\t\tinvoke(notification, \"setTitle:\", nsString(title));\n\t\tinvoke(notification, \"setInformativeText:\", nsString(description));\n\t\tfinal ID center \u003d invoke(Foundation.getObjcClass(\"NSUserNotificationCenter\"), \"defaultUserNotificationCenter\");\n\t\tinvoke(center, \"deliverNotification:\", notification);\n\t}\n}\n\n\n","filePath":"src\\main\\java\\com\\NativeMacNotifications\\Notification.java"},{"fileName":"NativeMacNotificationsPluginTest.java","content":"package com.NativeMacNotifications;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class NativeMacNotificationsPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(NativeMacNotificationsPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\NativeMacNotifications\\NativeMacNotificationsPluginTest.java"}]},{"commit":"8a52f6313e817544c121627f2e0e43a1b68548a5","repository":"https://github.com/Fiskmans/rl_prison_sentence.git","internalName":"prison-sentence","files":[{"fileName":"Constants.java","content":"package com.prison_sentence;\n\npublic class Constants\n{\n    public static String CONFIG_NAME \u003d \"prison_sentence\";\n}\n","filePath":"src\\main\\java\\com\\prison_sentence\\Constants.java"},{"fileName":"PrisonType.java","content":"package com.prison_sentence.enums;\n\npublic enum PrisonType {\n\n    GAUNTLET,\n    CORRUPTED_GAUNTLET,\n    CHAMBERS_OF_XERIC\n    //THEATRE_OF_BLOOD,\n    //TOOMBS_OF_AMASCUT\n}\n","filePath":"src\\main\\java\\com\\prison_sentence\\enums\\PrisonType.java"},{"fileName":"TimePeriod.java","content":"package com.prison_sentence.enums;\n\npublic enum TimePeriod {\n    DAILY,\n    WEEKLY,\n    MONTHLY\n}\n","filePath":"src\\main\\java\\com\\prison_sentence\\enums\\TimePeriod.java"},{"fileName":"PrisonSentenceConfig.java","content":"package com.prison_sentence;\n\nimport com.prison_sentence.enums.PrisonType;\nimport com.prison_sentence.enums.TimePeriod;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\n\nimport java.time.Instant;\n\n@ConfigGroup(\"prison_sentence\")\npublic interface PrisonSentenceConfig extends Config\n{\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"prison_type\",\n\t\t\tname \u003d \"Prison type\",\n\t\t\tdescription \u003d \"The type of prison you are in\"\n\t)\n\tdefault PrisonType prisonType()\n\t{\n\t\treturn PrisonType.GAUNTLET;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"sentence_amount\",\n\t\t\tname \u003d \"Amount per period\",\n\t\t\tdescription \u003d \"The amount to do per period\"\n\t)\n\tdefault int amount() { return 1; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"sentence_period\",\n\t\t\tname \u003d \"Period\",\n\t\t\tdescription \u003d \"How long a period is\"\n\t)\n\tdefault TimePeriod period() { return TimePeriod.DAILY; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"start_time\",\n\t\t\tname \u003d \"Start time\",\n\t\t\tdescription \u003d \"The time when your sentence started\"\n\t)\n\tdefault String startTime() { return Instant.now().toString(); }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"start_amount\",\n\t\t\tname \u003d \"Start amount\",\n\t\t\tdescription \u003d \"The amount you had when your sentence started\"\n\t)\n\tdefault int startAmount() { return 0; }\n}\n","filePath":"src\\main\\java\\com\\prison_sentence\\PrisonSentenceConfig.java"},{"fileName":"PrisonSentencePlugin.java","content":"package com.prison_sentence;\n\nimport com.prison_sentence.sources.Current;\nimport com.prison_sentence.sources.ISource;\nimport com.prison_sentence.sources.Manual;\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.Item;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.infobox.InfoBoxManager;\n\nimport java.time.Instant;\nimport java.time.format.DateTimeParseException;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"PrisonSentence\"\n)\npublic class PrisonSentencePlugin extends Plugin\n{\n\t@Inject\n\tpublic Client client;\n\n\t@Inject\n\tprivate PrisonSentenceConfig config;\n\n\t@Inject\n\tpublic ItemManager itemManager;\n\t@Inject\n\tpublic InfoBoxManager infoBoxManager;\n\t@Inject\n\tpublic ClientThread clientThread;\n\n\tprivate Current myCurrent \u003d null;\n\tprivate Sentence sentence \u003d null;\n\n\tprivate boolean myLoadInitialValues \u003d false;\n\n\tprivate List\u003cString\u003e myErrors \u003d new ArrayList\u003c\u003e();\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tmyCurrent \u003d new Current(this);\n\t\tSetup();\n\n\t\tif (client.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tmyLoadInitialValues \u003d true;\n\t\t}\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tTearDown();\n\t\tmyCurrent \u003d null;\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged)\n\t{\n\t\tif (gameStateChanged.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tFlushErrors();\n\t\t\tmyLoadInitialValues \u003d true;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick gameTick)\n\t{\n\t\tif (myLoadInitialValues)\n\t\t{\n\t\t\tmyCurrent.LoadInitialValues();\n\t\t\tmyLoadInitialValues \u003d false;\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged configChanged)\n\t{\n\t\tif (!configChanged.getGroup().equals(Constants.CONFIG_NAME))\n\t\t\treturn;\n\n\t\tReloadConfig();\n\t}\n\n\t@Subscribe\n\tpublic void onVarbitChanged(VarbitChanged varbitChanged)\n\t{\n\t\tassert myCurrent !\u003d null;\n\n\t\tmyCurrent.onVarbitChanged(varbitChanged);\n\t}\n\n\t@Provides\n    PrisonSentenceConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(PrisonSentenceConfig.class);\n\t}\n\n\tpublic void Error(String aMessage)\n\t{\n\t\tif (!client.isClientThread())\n\t\t{\n\t\t\tclientThread.invokeLater(() -\u003e Error(aMessage));\n\t\t\treturn;\n\t\t}\n\n\t\tif (client.getGameState() !\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tmyErrors.add(aMessage);\n\t\t\treturn;\n\t\t}\n\n\t\tclient.addChatMessage(ChatMessageType.PLAYERRELATED, \"\", \"[PrisonSentence] \" + aMessage, null);\n\t}\n\n\tvoid FlushErrors()\n\t{\n\t\tfor (String error : myErrors)\n\t\t{\n\t\t\tclient.addChatMessage(ChatMessageType.PLAYERRELATED, \"\",  \"[PrisonSentence] \" + error, null);\n\t\t}\n\n\t\tmyErrors.clear();\n\t}\n\n\tvoid ReloadConfig()\n\t{\n\t\tTearDown();\n\t\tSetup();\n\t}\n\n\tvoid Setup()\n\t{\n\t\tassert sentence \u003d\u003d null;\n\n\t\tISource source \u003d null;\n\n\t\ttry\n\t\t{\n\t\t\tsource \u003d new Manual(config.period(), Instant.parse(config.startTime()), config.startAmount() );\n\t\t}\n\t\tcatch (DateTimeParseException exception)\n\t\t{\n\t\t\tError(\"The manual start date could not be parsed: \" + config.startTime());\n\t\t\tError(exception.getMessage());\n\t\t\treturn;\n\t\t}\n\n\t\tsentence \u003d new Sentence(source, myCurrent, config.prisonType(), this, config.amount());\n\t}\n\n\tvoid TearDown()\n\t{\n\t\tif (sentence !\u003d null)\n\t\t{\n\t\t\tsentence.Shutdown();\n\t\t\tsentence \u003d null;\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\prison_sentence\\PrisonSentencePlugin.java"},{"fileName":"Sentence.java","content":"package com.prison_sentence;\n\nimport com.prison_sentence.enums.PrisonType;\nimport com.prison_sentence.sources.Current;\nimport com.prison_sentence.sources.ISource;\nimport com.prison_sentence.ui.SentenceInfoBox;\nimport com.prison_sentence.ui.Translators;\nimport net.runelite.client.util.ColorUtil;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\n\npublic class Sentence {\n\n    Boolean myShutDownRequested \u003d false;\n\n    ISource mySource;\n    Current myCurrent;\n\n    PrisonType myPrisonType;\n    PrisonSentencePlugin myPlugin;\n    SentenceInfoBox myInfobox \u003d null;\n\n    Timer mySetupTimer;\n\n    int myProgress \u003d -1;\n    int myTarget;\n\n    public Sentence(ISource aSource, Current aCurrent, PrisonType aPrisonType, PrisonSentencePlugin aPlugin, int aTarget)\n    {\n        mySource \u003d aSource;\n        myCurrent \u003d aCurrent;\n\n        myTarget \u003d aTarget;\n\n        myPrisonType \u003d aPrisonType;\n        myPlugin \u003d aPlugin;\n\n        mySetupTimer \u003d new Timer(500, (ev) -\u003e Setup());\n        mySetupTimer.setRepeats(true);\n\n        mySetupTimer.start();\n    }\n\n    public void Shutdown()\n    {\n        synchronized (myShutDownRequested)\n        {\n            if (myShutDownRequested)\n                return;\n\n            myShutDownRequested \u003d true;\n            TearDown();\n        }\n    }\n\n    public int GetProgress()\n    {\n        return myProgress;\n    }\n\n    public int GetTarget()\n    {\n        return myTarget;\n    }\n\n    public String ToTooltip()\n    {\n        return \"Time to get back to \" + ColorUtil.wrapWithColorTag(Translators.FriendlyName(myPrisonType), Color.ORANGE);\n    }\n\n    void Setup()\n    {\n        assert myInfobox \u003d\u003d null;\n\n        synchronized (myShutDownRequested)\n        {\n            if (myShutDownRequested)\n            {\n                mySetupTimer.stop();\n                return;\n            }\n\n            if (!myCurrent.IsReady(myPrisonType))\n                return;\n\n            if (!mySource.IsReady())\n                return;\n\n            mySetupTimer.stop();\n\n            myProgress \u003d myCurrent.GetCurrentAmount(myPrisonType) - mySource.GetAmountAtStartOfPeriod(myPrisonType, myTarget);\n\n            if (myProgress \u003e\u003d myTarget)\n            {\n                Shutdown();\n                return;\n            }\n\n            myInfobox \u003d new SentenceInfoBox(this, myPrisonType, myPlugin);\n\n            myPlugin.infoBoxManager.addInfoBox(myInfobox);\n\n            myCurrent.OnChange(() -\u003e {\n                myProgress \u003d myCurrent.GetCurrentAmount(myPrisonType) - mySource.GetAmountAtStartOfPeriod(myPrisonType, myTarget);\n\n                if (myProgress \u003e\u003d myTarget)\n                    Shutdown();\n            });\n        }\n    }\n\n    void TearDown()\n    {\n        if (myInfobox !\u003d null)\n        {\n            myPlugin.infoBoxManager.removeInfoBox(myInfobox);\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\prison_sentence\\Sentence.java"},{"fileName":"Current.java","content":"package com.prison_sentence.sources;\n\nimport com.prison_sentence.PrisonSentencePlugin;\nimport com.prison_sentence.enums.PrisonType;\nimport com.prison_sentence.ui.Translators;\nimport net.runelite.api.events.VarbitChanged;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\npublic class Current {\n\n    PrisonSentencePlugin myPlugin;\n\n    Map\u003cInteger, Integer\u003e myStashedKC \u003d new HashMap\u003c\u003e();\n\n    List\u003cRunnable\u003e mySubscribers \u003d new ArrayList\u003c\u003e();\n\n    public Current(PrisonSentencePlugin aPlugin)\n    {\n        myPlugin \u003d aPlugin;\n\n        for (PrisonType prison : PrisonType.values())\n        {\n            Integer varpID \u003d Translators.VarpIdFromPrisonType(prison);\n            myStashedKC.put(varpID, -1);\n        }\n    }\n\n    public void LoadInitialValues()\n    {\n        for (PrisonType prison : PrisonType.values())\n        {\n            Integer varpID \u003d Translators.VarpIdFromPrisonType(prison);\n            myStashedKC.put(varpID, myPlugin.client.getVarpValue(varpID));\n        }\n    }\n\n    public void OnChange(Runnable aRunnable)\n    {\n        mySubscribers.add(aRunnable);\n    }\n\n    public int GetCurrentAmount(PrisonType aType)\n    {\n        return myStashedKC.get(Translators.VarpIdFromPrisonType(aType));\n    }\n\n    public boolean IsReady(PrisonType aPrisonType)\n    {\n        return myStashedKC.get(Translators.VarpIdFromPrisonType(aPrisonType)) !\u003d -1;\n    }\n\n    public void onVarbitChanged(VarbitChanged varbitChanged)\n    {\n        Integer id \u003d varbitChanged.getVarpId();\n\n        if (!myStashedKC.keySet().contains(id))\n            return;\n\n        myStashedKC.put(id, varbitChanged.getValue());\n\n        for (Runnable sub : mySubscribers)\n            sub.run();\n    }\n}\n","filePath":"src\\main\\java\\com\\prison_sentence\\sources\\Current.java"},{"fileName":"ISource.java","content":"package com.prison_sentence.sources;\n\nimport com.prison_sentence.enums.PrisonType;\n\npublic interface ISource {\n\n    boolean IsReady();\n    int GetAmountAtStartOfPeriod(PrisonType aType, int aTarget);\n}\n","filePath":"src\\main\\java\\com\\prison_sentence\\sources\\ISource.java"},{"fileName":"Manual.java","content":"package com.prison_sentence.sources;\n\nimport com.prison_sentence.TimeUtils;\nimport com.prison_sentence.enums.PrisonType;\nimport com.prison_sentence.enums.TimePeriod;\n\nimport java.time.Instant;\n\npublic class Manual implements ISource\n{\n    Instant myStartTime;\n    TimePeriod myPeriod;\n    int myStartAmount;\n\n    public Manual(TimePeriod aPeriod, Instant aStartTime, int aStartAmount)\n    {\n        myStartTime \u003d aStartTime;\n        myPeriod \u003d aPeriod;\n        myStartAmount \u003d aStartAmount;\n    }\n\n    @Override\n    public boolean IsReady()\n    {\n        return true;\n    }\n\n    @Override\n    public int GetAmountAtStartOfPeriod(PrisonType aType, int aTarget)\n    {\n        switch (myPeriod)\n        {\n            case DAILY:\n                return myStartAmount + aTarget * TimeUtils.DaysSince(myStartTime);\n            case WEEKLY:\n                return myStartAmount + aTarget * TimeUtils.WeeksSince(myStartTime);\n            case MONTHLY:\n                return myStartAmount + aTarget * TimeUtils.MonthsSince(myStartTime);\n        }\n\n        assert false;\n        return -1;\n    }\n}\n","filePath":"src\\main\\java\\com\\prison_sentence\\sources\\Manual.java"},{"fileName":"TimeUtils.java","content":"package com.prison_sentence;\n\nimport java.time.Instant;\nimport java.time.LocalDate;\nimport java.time.ZoneId;\nimport java.time.temporal.ChronoUnit;\n\npublic class TimeUtils\n{\n    public static int DaysSince(Instant aInstant)\n    {\n        try\n        {\n            return (int)ChronoUnit.DAYS.between(aInstant, Instant.now());\n        }\n        catch (Exception e)\n        {\n            return  0;\n        }\n    }\n    public static int WeeksSince(Instant aInstant)\n    {\n        return DaysSince(aInstant) / 7;\n    }\n    public static int MonthsSince(Instant aInstant)\n    {\n        try\n        {\n            LocalDate start \u003d LocalDate.ofInstant(aInstant, ZoneId.systemDefault());\n            LocalDate now \u003d LocalDate.now();\n\n            return (int)ChronoUnit.MONTHS.between(start, now);\n        }\n        catch (Exception e)\n        {\n            return  0;\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\prison_sentence\\TimeUtils.java"},{"fileName":"SentenceInfoBox.java","content":"package com.prison_sentence.ui;\n\nimport com.prison_sentence.PrisonSentencePlugin;\nimport com.prison_sentence.Sentence;\nimport com.prison_sentence.enums.PrisonType;\nimport com.prison_sentence.sources.Current;\nimport com.prison_sentence.sources.ISource;\nimport net.runelite.client.ui.overlay.infobox.InfoBox;\n\nimport java.awt.*;\n\npublic class SentenceInfoBox extends InfoBox {\n\n    Sentence mySentence;\n\n    public SentenceInfoBox(Sentence aSentence, PrisonType aPrisonType, PrisonSentencePlugin aPlugin)\n    {\n        super(aPlugin.itemManager.getImage(Translators.IconFromPrisonType(aPrisonType)), aPlugin);\n\n        mySentence \u003d aSentence;\n\n        setTooltip(mySentence.ToTooltip());\n    }\n\n    @Override\n    public String getText()\n    {\n        if (mySentence.GetProgress() \u003e\u003d 0)\n        {\n            return mySentence.GetProgress() + \"/\" + mySentence.GetTarget();\n        }\n        else\n        {\n            return \"0/\" + (mySentence.GetTarget() - mySentence.GetProgress());\n        }\n    }\n\n    @Override\n    public Color getTextColor()\n    {\n        return Color.white;\n    }\n\n}\n","filePath":"src\\main\\java\\com\\prison_sentence\\ui\\SentenceInfoBox.java"},{"fileName":"Translators.java","content":"package com.prison_sentence.ui;\n\nimport com.prison_sentence.enums.PrisonType;\nimport com.prison_sentence.enums.TimePeriod;\nimport net.runelite.api.ItemID;\nimport net.runelite.api.VarPlayer;\nimport net.runelite.api.Varbits;\n\npublic class Translators {\n\n    public static int IconFromPrisonType(PrisonType aPrisonType)\n    {\n        switch (aPrisonType)\n        {\n            case GAUNTLET:          return ItemID.YOUNGLLEF;\n            case CORRUPTED_GAUNTLET: return ItemID.CORRUPTED_YOUNGLLEF;\n            case CHAMBERS_OF_XERIC:   return ItemID.OLMLET;\n            //case THEATRE_OF_BLOOD:    return ItemID.LIL_ZIK;\n            //case TOOMBS_OF_AMASCUT:   return ItemID.TUMEKENS_GUARDIAN;\n\n            default:                return ItemID.CABBAGE;\n        }\n    }\n\n    public static Integer VarpIdFromPrisonType(PrisonType aPrisonType)\n    {\n        switch (aPrisonType)\n        {\n            case GAUNTLET:            return 2353;\n            case CORRUPTED_GAUNTLET:  return 2354;\n            case CHAMBERS_OF_XERIC:   return 1532;\n            //case THEATRE_OF_BLOOD:    return -1; // TODO\n            //case TOOMBS_OF_AMASCUT:   return -1; // TODO\n\n            default:                return -1;\n        }\n    }\n\n    public static String FriendlyName(PrisonType aPrisonType)\n    {\n        switch (aPrisonType)\n        {\n            case GAUNTLET:              return \"Gauntlet\";\n            case CORRUPTED_GAUNTLET:    return \"Corrupted Guantlet\";\n            case CHAMBERS_OF_XERIC:     return \"Chambers of Xeric\";\n            //case THEATRE_OF_BLOOD:    return -1; // TODO\n            //case TOOMBS_OF_AMASCUT:   return -1; // TODO\n\n            default:                    return \"Unkown\";\n        }\n    }\n\n    public static String FriendlyName(TimePeriod aTimePeriod)\n    {\n        switch (aTimePeriod)\n        {\n            case DAILY:     return \"daily\";\n            case WEEKLY:    return \"weekly\";\n            case MONTHLY:   return \"monthly\";\n\n            default:        return \"Unkown\";\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\prison_sentence\\ui\\Translators.java"},{"fileName":"PrisonSentencePluginTest.java","content":"package com.prison_sentence;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class PrisonSentencePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(PrisonSentencePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\prison_sentence\\PrisonSentencePluginTest.java"}]},{"commit":"5cc10003414c693b05e425ca11338626cd9caaec","repository":"https://github.com/winterdaze/tick-counter.git","internalName":"tick-counter","files":[{"fileName":"ExtendedAnimation.java","content":"package com.tickcounter;\n\npublic class ExtendedAnimation\n{\n\tpublic int delta;\n\tpublic int animation;\n\tpublic int weapon;\n\tpublic int lastTick;\n\n\tpublic ExtendedAnimation(int delta, int animation, int weapon, int currentTick)\n\t{\n\t\tthis.delta \u003d delta;\n\t\tthis.animation \u003d animation;\n\t\tthis.weapon \u003d weapon;\n\t\tthis.lastTick \u003d currentTick;\n\t}\n\n\tpublic int eligibleAt()\n\t{\n\t\treturn lastTick + delta;\n\t}\n}\n","filePath":"src\\main\\java\\com\\tickcounter\\ExtendedAnimation.java"},{"fileName":"TickCounterConfig.java","content":"package com.tickcounter;\n\nimport net.runelite.client.config.Alpha;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\nimport java.awt.Color;\n\n@ConfigGroup(TickCounterPlugin.CONFIG_GROUP)\npublic interface TickCounterConfig extends Config\n{\n\t@ConfigItem(\n\t\tkeyName \u003d TickCounterPlugin.CONFIG_KEY_RESET_INSTANCE,\n\t\tname \u003d \"Reset on new instances\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 1\n\t)\n\tdefault boolean instance()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d TickCounterPlugin.CONFIG_KEY_INSTANCE_ONLY,\n\t\tname \u003d \"Only track inside instances\",\n\t\tdescription \u003d \"The tick counter will only work inside raids and some PvM encounters\",\n\t\tposition \u003d 2\n\t)\n\tdefault boolean instanceOnly()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"titleEnabled\",\n\t\tname \u003d \"Show title bar\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 3\n\t)\n\tdefault boolean titleEnabled()\n\t{\n\t\treturn true;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"titleColor\",\n\t\t\tname \u003d \"Title color\",\n\t\t\tdescription \u003d \"\",\n\t\t\tposition \u003d 4\n\t)\n\tdefault Color titleColor()\n\t{\n\t\treturn Color.GREEN;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"selfColor\",\n\t\tname \u003d \"Your color\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 5\n\t)\n\tdefault Color selfColor()\n\t{\n\t\treturn Color.CYAN;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"otherColor\",\n\t\t\tname \u003d \"Other players color\",\n\t\t\tdescription \u003d \"\",\n\t\t\tposition \u003d 6\n\t)\n\tdefault Color otherColor()\n\t{\n\t\treturn Color.WHITE;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"totalEnabled\",\n\t\tname \u003d \"Show total ticks\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 7\n\t)\n\tdefault boolean totalEnabled()\n\t{\n\t\treturn true;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"totalColor\",\n\t\tname \u003d \"Total color\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 8\n\t)\n\tdefault Color totalColor()\n\t{\n\t\treturn Color.RED;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showZamorakianSpear\",\n\t\tname \u003d \"Include Zamorakian Spear\",\n\t\tdescription \u003d \"\",\n\t\tposition \u003d 9\n\t)\n\tdefault boolean showZamorakianSpear()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"maxPlayers\",\n\t\tname \u003d \"Max players displayed\",\n\t\tdescription \u003d \"Track all players, but only display this many in the overlay.\u003cbr\u003e\" +\n\t\t\t\"The local player will always be included within this limit.\u003cbr\u003e\" +\n\t\t\t\"Set to 0 to show all players.\",\n\t\tposition \u003d 10\n\t)\n\tdefault int maxPlayers()\n\t{\n\t\treturn 0;\n\t}\n}\n","filePath":"src\\main\\java\\com\\tickcounter\\TickCounterConfig.java"},{"fileName":"TickCounterOverlay.java","content":"package com.tickcounter;\n\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.util.ArrayList;\nimport java.util.Comparator;\nimport java.util.List;\nimport java.util.Map.Entry;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.api.MenuAction;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayMenuEntry;\nimport net.runelite.client.ui.overlay.components.LayoutableRenderableEntity;\nimport net.runelite.client.ui.overlay.components.LineComponent;\nimport net.runelite.client.ui.overlay.components.TitleComponent;\n\npublic class TickCounterOverlay extends OverlayPanel\n{\n\n\tprivate TickCounterPlugin plugin;\n\tprivate TickCounterConfig config;\n\tprivate Client client;\n\n\t@Inject\n\tpublic TickCounterOverlay(TickCounterPlugin plugin,Client client,TickCounterConfig config)\n\t{\n\t\tsuper(plugin);\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetPosition(OverlayPosition.DETACHED);\n\t\tsetPosition(OverlayPosition.BOTTOM_RIGHT);\n\t\tthis.plugin \u003d plugin;\n\t\tthis.client \u003d client;\n\t\tthis.config \u003d config;\n\t\tgetMenuEntries().add(new OverlayMenuEntry(MenuAction.RUNELITE_OVERLAY, \"Reset\", \"Tick counter\"));\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D g)\n\t{\n\t\tList\u003cLayoutableRenderableEntity\u003e elems \u003d panelComponent.getChildren();\n\t\telems.clear();\n\t\tList\u003cEntry\u003cString, Integer\u003e\u003e list \u003d new ArrayList\u003c\u003e(plugin.activity.entrySet());\n\t\tlist.sort(new Comparator\u003cEntry\u003cString, Integer\u003e\u003e()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic int compare(Entry\u003cString, Integer\u003e o1, Entry\u003cString, Integer\u003e o2)\n\t\t\t{\n\t\t\t\tint value \u003d -Integer.compare(o1.getValue(), o2.getValue());\n\t\t\t\tif (value \u003d\u003d 0)\n\t\t\t\t\tvalue \u003d o1.getKey().compareTo(o2.getKey());\n\t\t\t\treturn value;\n\t\t\t}\n\t\t});\n\t\tif (list.size() !\u003d 0 \u0026\u0026 config.titleEnabled()) elems.add(TitleComponent.builder().text(\"Tick counter\").color(config.titleColor()).build());\n\t\tint total \u003d 0;\n\t\tint includedPlayers \u003d 0;\n\t\tfinal int maxPlayers \u003d config.maxPlayers();\n\t\tfor (Entry\u003cString, Integer\u003e e : list)\n\t\t{\n\t\t\tboolean isLocalPlayer \u003d e.getKey().equals(client.getLocalPlayer().getName());\n\t\t\ttotal +\u003d e.getValue();\n\t\t\tif (maxPlayers \u003d\u003d 0 || includedPlayers \u003c maxPlayers || isLocalPlayer)\n\t\t\t{\n\t\t\t\tincludedPlayers++;\n\t\t\t\tLineComponent.LineComponentBuilder lineBuilder \u003d LineComponent.builder().left(e.getKey()).right(e.getValue().toString());\n\n\t\t\t\tif (isLocalPlayer)\n\t\t\t\t{\n\t\t\t\t\tlineBuilder.leftColor(config.selfColor()).rightColor(config.selfColor());\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlineBuilder.leftColor(config.otherColor()).rightColor(config.otherColor());\n\t\t\t\t}\n\n\t\t\t\telems.add(lineBuilder.build());\n\t\t\t}\n\t\t}\n\n\t\t// the local player might be outside top `maxPlayers`, and we have exceeded the cap and need to remove the 2nd-to-last entry\n\t\tif (includedPlayers \u003e maxPlayers)\n\t\t{\n\t\t\telems.remove(elems.size() - 2);\n\t\t}\n\n\t\tif (config.totalEnabled())\n\t\t{\n\t\t\tif (list.size() !\u003d 0) elems.add(LineComponent.builder().left(\"Total\").leftColor(config.totalColor()).rightColor(config.totalColor()).right(String.valueOf(total)).build());\n\t\t}\n\t\treturn super.render(g);\n\t}\n}","filePath":"src\\main\\java\\com\\tickcounter\\TickCounterOverlay.java"},{"fileName":"TickCounterPlugin.java","content":"package com.tickcounter;\n\nimport java.util.HashMap;\nimport java.util.Map;\nimport javax.inject.Inject;\nimport com.google.inject.Provides;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Player;\nimport net.runelite.api.MenuAction;\nimport net.runelite.api.events.AnimationChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.events.OverlayMenuClicked;\nimport net.runelite.api.kit.KitType;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Tick Counter\"\n)\npublic class TickCounterPlugin extends Plugin\n{\n\tpublic static final String CONFIG_GROUP \u003d \"tickcounter\";\n\tpublic static final String CONFIG_KEY_RESET_INSTANCE \u003d \"resetInstance\";\n\tpublic static final String CONFIG_KEY_INSTANCE_ONLY \u003d \"instanceOnly\";\n\n\tprivate static final int SPOTANIM_BLOOD_RAGER \u003d 2792;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\t@Inject\n\tprivate TickCounterConfig config;\n\t@Inject\n\tprivate Client client;\n\n\t@Provides\n\tTickCounterConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(TickCounterConfig.class);\n\t}\n\t@Inject\n\tprivate TickCounterOverlay overlay;\n\n\tMap\u003cString, Integer\u003e activity \u003d new HashMap\u003c\u003e();\n\n\tprivate HashMap\u003cPlayer, ExtendedAnimation\u003e extendedAnims \u003d new HashMap\u003c\u003e();\n\tboolean instanced \u003d false;\n\tboolean prevInstance \u003d false;\n\n\tprivate boolean resetOnInstance \u003d true;\n\tprivate boolean trackInstanceOnly \u003d false;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\toverlayManager.add(overlay);\n\n\t\tresetOnInstance \u003d config.instance();\n\t\ttrackInstanceOnly \u003d config.instanceOnly();\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\toverlayManager.remove(overlay);\n\t\tactivity.clear();\n\t}\n\n\t@Subscribe\n\tpublic void onAnimationChanged(AnimationChanged e)\n\t{\n\t\tif (!(e.getActor() instanceof Player) || (trackInstanceOnly \u0026\u0026 !instanced))\n\t\t\treturn;\n\t\tPlayer p \u003d (Player) e.getActor();\n\t\tint weapon \u003d -1;\n\t\tint animation \u003d p.getAnimation();\n\t\tif (p.getPlayerComposition() !\u003d null)\n\t\t\tweapon \u003d p.getPlayerComposition().getEquipmentId(KitType.WEAPON);\n\t\tint delta \u003d 0;\n\t\tint currentTick \u003d client.getTickCount();\n\t\tExtendedAnimation curExtAnim \u003d extendedAnims.get(p);\n\t\tExtendedAnimation extAnim \u003d null;\n\n\t\tswitch (animation)\n\t\t{\n\t\t\tcase 7617: // rune knife\n\t\t\tcase 8194: // dragon knife\n\t\t\tcase 8291: // dragon knife spec\n\t\t\tcase 5061: // blowpipe\n\t\t\tcase 10656: // blazing blowpipe\n\t\t\t\tif (weapon \u003d\u003d 12926 || weapon \u003d\u003d 28688)\n\t\t\t\t{\n\t\t\t\t\textAnim \u003d new ExtendedAnimation(2, animation, weapon, currentTick);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdelta \u003d 2;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 2323: // Event rpg\n\t\t\tcase 9964: // Webweaver bow spec\n\t\t\tcase 2075: // Karil\u0027s crossbow auto\n\t\t\tcase 7618: // Chinchompas\n\t\t\tcase 11057: // Eclipse atlatl\n\t\t\tcase 11060: // Eclipse atlatl spec\n\t\t\tcase 12397: // Eye of Ayak\n\t\t\t\tif (weapon \u003d\u003d 31113) {\n\t\t\t\t\textAnim \u003d new ExtendedAnimation(3, animation, weapon, currentTick);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdelta \u003d 3;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 426: // bow shoot\n\t\t\t\tif (weapon \u003d\u003d 11235 || weapon \u003d\u003d 12765 || weapon \u003d\u003d 12766 || weapon \u003d\u003d 12767 || weapon \u003d\u003d 12768 || weapon \u003d\u003d 27853) // dark bow\n\t\t\t\t\tdelta \u003d 8;\n\t\t\t\telse if (weapon \u003d\u003d 20997) // twisted bow\n\t\t\t\t\tdelta \u003d 5;\n\t\t\t\telse if (weapon \u003d\u003d 25865 || weapon \u003d\u003d 25867 || weapon \u003d\u003d 25869 || weapon \u003d\u003d 25884 || weapon \u003d\u003d 25886 || weapon \u003d\u003d 25888 || weapon \u003d\u003d 25890 || weapon \u003d\u003d 25892 || weapon \u003d\u003d 25894 || weapon \u003d\u003d 25896)\n\t\t\t\t\t// Bow of Faerdhinen\n\t\t\t\t\tdelta \u003d 4;\n\t\t\t\telse // shortbow\n\t\t\t\t\tdelta \u003d 3;\n\t\t\t\tbreak;\n\t\t\tcase 376: // dds poke\n\t\t\tcase 377: // dds slash\n\t\t\tcase 422: // punch\n\t\t\tcase 423: // kick\n\t\t\tcase 386: // lunge\n\t\t\tcase 390: // generic slash\n\t\t\t\tif (weapon \u003d\u003d 24219) // swift blade\n\t\t\t\t{\n\t\t\t\t\tdelta \u003d 3;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (weapon \u003d\u003d 26219 || weapon \u003d\u003d 27246) // Osmumten\u0027s Fang \u0026 Osmunten\u0027s Fang (or)\n\t\t\t\t{\n\t\t\t\t\tdelta \u003d 5;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tcase 1062: // dds spec\n\t\t\tcase 1067: // claw stab\n\t\t\tcase 1074: // msb spec\n\t\t\tcase 1658: // Whip\n\t\t\tcase 9963: // Ursine Chainmace Spec\n\t\t\tcase 380: // spear slash\n\t\t\tcase 382: // spear crush\n\t\t\tcase 381: // Keris partisan stab\n\t\t\tcase 419: // Keris partisan crush\n\t\t\tcase 9961: // Accursed sceptre spec\n\t\t\tcase 245: // Wildy Maces\n\t\t\tcase 414: // Wand melee auto\n\t\t\tcase 1132: // Saradomin Sword Special Attack\n\t\t\tcase 1133: // Saradomin\u0027s Blessed Sword Special Attack\n\t\t\tcase 11275: // Voidwaker Special Attack\n\t\t\tcase 11140: // Burning claws Special Attack\n\t\t\tcase 10501: // Warped sceptre\n\t\t\tcase 2890: // arclight spec\n\t\t\tcase 11138: // emberlight spec\n\t\t\tcase 3294: // abby dagger slash\n\t\t\tcase 3297: // abby dagger poke\n\t\t\tcase 3298: // bludgeon attack\n\t\t\tcase 3299: // bludgeon spec\n\t\t\tcase 3300: // abby dagger spec\n\t\t\tcase 4198: // bone dagger spec\n\t\t\tcase 7514: // claw spec\n\t\t\tcase 9858: // Venator bow\n\t\t\tcase 10989: // Dual macuahuitl\n\t\t\t\tif (client.getLocalPlayer().hasSpotAnim(SPOTANIM_BLOOD_RAGER)) // Blood moon effect\n\t\t\t\t{\n\t\t\t\t\tdelta \u003d 3;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tcase 7515: // d sword spec\n\t\t\tcase 8145: // rapier stab\n\t\t\tcase 8288: // dhl stab\n\t\t\t\tif (weapon \u003d\u003d 24219) // swift blade\n\t\t\t\t{\n\t\t\t\t\tdelta \u003d 3;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tcase 8289: // dhl slash\n\t\t\tcase 8290: // dhl crush\n\t\t\tcase 4503: // inquisitor\u0027s mace crush\n\t\t\tcase 12342: // earthbound tecpatl\n\t\t\t\tdelta \u003d 4;\n\t\t\t\tbreak;\n\t\t\tcase 1710: // zamorakian spear stab\n\t\t\tcase 1711: // zamorakian spear crush\n\t\t\tcase 1712: // zamorakian spear slash\n\t\t\t\tif (weapon \u003d\u003d 28988) // Blue moon spear\n\t\t\t\t{\n\t\t\t\t\tdelta \u003d 5;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (config.showZamorakianSpear())\n\t\t\t\t{\n\t\t\t\t\tdelta \u003d 4;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdelta \u003d 0;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tcase 393: // staff bash\n\t\t\t\tif (weapon \u003d\u003d 13652 || weapon \u003d\u003d 28039 || weapon \u003d\u003d 29577)\n\t\t\t\t{ // claw scratch\n\t\t\t\t\tdelta \u003d 4;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tcase 395: // axe autos\n\t\t\tcase 400: // pick smash\n\t\t\t\tif (weapon \u003d\u003d 24417) // inquisitor\u0027s mace stab\n\t\t\t\t{\n\t\t\t\t\tdelta \u003d 4;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tcase 11430: // trident cast and wave spells w/staff\n\t\t\t\tif (weapon \u003d\u003d 25731 || weapon \u003d\u003d 22323 || weapon \u003d\u003d 22288 || weapon \u003d\u003d 22292 || weapon \u003d\u003d 12899 || weapon \u003d\u003d 11907 || weapon \u003d\u003d 11905) // tridents\n\t\t\t\t{\n\t\t\t\t\tdelta \u003d 4;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tcase 708: // iban\u0027s blast\n\t\t\tcase 710: // bind/snare/entangle\n\t\t\tcase 9144: // strike/bolt/blast\n\t\t\tcase 718: // vulnerability\n\t\t\tcase 724: // crumble undead\n\t\t\tcase 11429: // wave spells\n\t\t\tcase 1161: // bind/snare/entangle w/ staff\n\t\t\tcase 11423: // strike/bolt/blast w/ staff\n\t\t\tcase 1165: // vulnerability w/ staff\n\t\t\tcase 1166: // crumble undead w/ staff\n\t\t\tcase 1576: // magic dart\n\t\t\tcase 9145: // surge spells\n\t\t\t\tif (weapon \u003d\u003d 24423) // harmonised staff\n\t\t\t\t{\n\t\t\t\t\tdelta \u003d 4;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tcase 7552: // generic crossbow\n\t\t\t\tif (weapon \u003d\u003d 28869 || weapon \u003d\u003d 10156) // Hunters\u0027 Sunlight crossbow \u0026 Hunters\u0027 crossbow\n\t\t\t\t{\n\t\t\t\t\tdelta \u003d 3;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (weapon \u003d\u003d 8880) // Dorgeshuun crossbow\n\t\t\t\t{\n\t\t\t\t\tdelta \u003d 4;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tcase 2062: // Verac\u0027s flail\n\t\t\t\tif (weapon \u003d\u003d 28792) // Bone mace\n\t\t\t\t{\n\t\t\t\t\tdelta\u003d 4;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tcase 2068: // Torag\u0027s hammers,\n\t\t\t\tif (weapon \u003d\u003d 29084 || weapon \u003d\u003d 29889) // Sulphur blades, Glacial temotli\n\t\t\t\t{\n\t\t\t\t\tdelta \u003d 4;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tcase 429: // Leaf-bladed spear crush\n\t\t\tcase 8972: // Undead grasp\n\t\t\tcase 7004: // Zombie axe slash\n\t\t\tcase 3852: // Zombie axe crush\n\t\t\tcase 1058: // wildy sceptres melee auto\n\t\t\tcase 1064: // dspear spec\n\t\t\tcase 10091: // rush and blitz spell cast\n\t\t\tcase 10092: // burst and barrage spell cast\n\t\t\tcase 2082: // Guthan\u0027s warspear crush\n\t\t\tcase 2080: // Guthan\u0027s warspear stab\n\t\t\tcase 2081: // Guthan\u0027s warspear slash\n\t\t\tcase 6147: // ancient mace spec\n\t\t\tcase 7511: // dinh\u0027s attack\n\t\t\tcase 8056: // scythe swing\n\t\t\tcase 8010: // Blisterwood flail\n\t\t\tcase 9168: // Zaryte crossbow\n\t\t\tcase 9471: // Osmumten\u0027s fang stab\n\t\t\tcase 9493: // Tumeken\u0027s shadow\n\t\t\tcase 10171: // Soulreaper axe crush auto\n\t\t\tcase 10172: // Soulreaper axe auto\n\t\t\tcase 10173: // Soulreaper axe spec\n\t\t\tcase 11222: // Osmumten\u0027s fang Special\n\t\t\tcase 12394: // Eye of Ayak Special\n\t\t\t\tif (weapon \u003d\u003d 31113) {\n\t\t\t\t\textAnim \u003d new ExtendedAnimation(5, animation, weapon, currentTick);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdelta \u003d 5;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 401:\n\t\t\t\tif (weapon \u003d\u003d 13576) // dwh bop\n\t\t\t\t\tdelta \u003d 6;\n\t\t\t\telse if (weapon \u003d\u003d 23360) // ham joint\n\t\t\t\t\tdelta \u003d 3;\n\t\t\t\telse // used by pickaxe and axe\n\t\t\t\t\tdelta \u003d 5;\n\t\t\t\tbreak;\n\t\t\tcase 1378: // Dragon warhammer spec\n\t\t\tcase 7045: // Godsword Slash\n\t\t\tcase 7054: // Godsword Smash\n\t\t\tcase 7055: // Godsword Block\n\t\t\t\tif (weapon \u003d\u003d 12809 || weapon \u003d\u003d 11838) // Saradomin Sword + Blessed Variant\n\t\t\t\t{\n\t\t\t\t\tdelta \u003d 4;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tcase 2078: // Ahrim\u0027s staff\n\t\t\tcase 7516: // Elder maul attack\n\t\t\tcase 7555: // ballista attack\n\t\t\tcase 7556: // ballista spec\n\t\t\tcase 7638: // zgs spec\n\t\t\tcase 7640: // sgs spec\n\t\t\tcase 7642: // bgs spec\n\t\t\tcase 7643: // bgs spec\n\t\t\tcase 7644: // ags spec\n\t\t\tcase 5865: // barrelchest anchor\n\t\t\tcase 5870: // barrelchest anchor spec\n\t\t\tcase 10427: // ags spec (deadman)\n\t\t\tcase 10914: // Ralos Basic Attack\n\t\t\tcase 10923: // Ralos Special Attack\n\t\t\tcase 11124: // Elder maul spec\n\t\t\t\tdelta \u003d 6;\n\t\t\t\tbreak;\n\t\t\tcase 428: // Crystal halberd stab\n\t\t\tcase 440: // Crystal halberd slash\n\t\t\t\tif (weapon \u003d\u003d 29796 || weapon \u003d\u003d 4158) // Noxious halberd \u0026 Leaf-bladed spear\n\t\t\t\t{\n\t\t\t\t\tdelta \u003d 5;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tcase 2066: // Dharok\u0027s greataxe crush\n\t\t\tcase 2067: // Dharok\u0027s greataxe slash\n\t\t\tcase 10079: // felling axe autos\n\t\t\tcase 1203: // chally spec\n\t\t\t\tdelta \u003d 7;\n\t\t\t\tbreak;\n\t\t\tcase 9544: // Keris of Corruption Spec\n\t\t\t\tdelta \u003d 8;\n\t\t\t\tbreak;\n\t\t\tcase -1: // Animation reset\n\t\t\t\tdelta \u003d -1;\n\t\t\t\tbreak;\n\t\t}\n\t\tif (delta \u003e 0)\n\t\t{\n\t\t\tString name \u003d p.getName();\n\t\t\tthis.activity.put(name, this.activity.getOrDefault(name, 0) + delta);\n\t\t}\n\t\telse if (extAnim !\u003d null) // new extended animation (blowpipe/ayak)\n\t\t{\n\t\t\textendedAnims.put(p, extAnim);\n\t\t}\n\n\t\t// Extended animation reset (ie stop attacking or changed to non-tracking animation)\n\t\tif (curExtAnim !\u003d null \u0026\u0026 (delta !\u003d 0 || extAnim !\u003d null))\n\t\t{\n\t\t\t// track pending activity if eligible\n\t\t\tif (currentTick \u003e\u003d curExtAnim.eligibleAt() || extAnim !\u003d null)\n\t\t\t{\n\t\t\t\tlogExtendedActivity(p, currentTick, curExtAnim);\n\t\t\t}\n\n\t\t\t// remove if animation changed or reset\n\t\t\tif (delta !\u003d 0)\n\t\t\t{\n\t\t\t\textendedAnims.remove(p);\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick tick)\n\t{\n\t\tfinal int currentTick \u003d client.getTickCount();\n\n\t\tfor (Map.Entry\u003cPlayer, ExtendedAnimation\u003e entry : extendedAnims.entrySet())\n\t\t{\n\t\t\tExtendedAnimation extAnim \u003d entry.getValue();\n\t\t\tif (currentTick \u003e\u003d extAnim.eligibleAt())\n\t\t\t{\n\t\t\t\tlogExtendedActivity(entry.getKey(), currentTick, extAnim);\n\t\t\t}\n\t\t}\n\n\t\tprevInstance \u003d instanced;\n\t\tinstanced \u003d client.isInInstancedRegion();\n\t\tif (resetOnInstance \u0026\u0026 !prevInstance \u0026\u0026 instanced)\n\t\t{\n\t\t\treset();\n\t\t}\n\t}\n\n\tprivate void logExtendedActivity(Player p, int currentTick, ExtendedAnimation extAnim)\n\t{\n\t\tString name \u003d p.getName();\n\t\tint activity \u003d this.activity.getOrDefault(name, 0).intValue();\n\t\tthis.activity.put(name, activity + extAnim.delta);\n\t\textAnim.lastTick \u003d currentTick;\n\t}\n\n\t@Subscribe\n\tpublic void onOverlayMenuClicked(OverlayMenuClicked event)\n\t{\n\t\tif (event.getEntry().getMenuAction() \u003d\u003d MenuAction.RUNELITE_OVERLAY \u0026\u0026\n\t\t\tevent.getEntry().getTarget().equals(\"Tick counter\") \u0026\u0026\n\t\t\tevent.getEntry().getOption().equals(\"Reset\"))\n\t\t{\n\t\t\treset();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif (!event.getGroup().equals(CONFIG_GROUP))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.getKey().equals(CONFIG_KEY_RESET_INSTANCE))\n\t\t{\n\t\t\tresetOnInstance \u003d config.instance();\n\t\t}\n\n\t\tif (event.getKey().equals(CONFIG_KEY_INSTANCE_ONLY))\n\t\t{\n\t\t\ttrackInstanceOnly \u003d config.instanceOnly();\n\n\t\t\t// \"Instance only\" has been toggled and the player is not in an instance so we can reset the counter\n\t\t\tif (trackInstanceOnly \u0026\u0026 !instanced)\n\t\t\t{\n\t\t\t\tlog.debug(\"Instance only enabled, resetting tick counter\");\n\t\t\t\treset();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void reset()\n\t{\n\t\tactivity.clear();\n\t\textendedAnims.clear();\n\t}\n}\n","filePath":"src\\main\\java\\com\\tickcounter\\TickCounterPlugin.java"},{"fileName":"TickCounterPluginTest.java","content":"package com.tickcounter;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class TickCounterPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(TickCounterPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\tickcounter\\TickCounterPluginTest.java"}]},{"commit":"876e4ca85137956bcc02ece3a44ca4581875adb3","repository":"https://github.com/skeldoor/mini-bars.git","internalName":"mini-bars","files":[{"fileName":"MiniBarsConfig.java","content":"package com.skeldoor;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.ui.overlay.components.ComponentConstants;\nimport java.awt.*;\n\n@ConfigGroup(\"Mini Bars\")\npublic interface MiniBarsConfig extends Config\n{\n\n\t@ConfigItem\n\t\t\t(\n\t\t\t\t\tposition \u003d 1,\n\t\t\t\t\tkeyName \u003d \"showHealth\",\n\t\t\t\t\tname \u003d \"Show Health\",\n\t\t\t\t\tdescription \u003d \"Render Health overlay\"\n\t\t\t)\n\n\tdefault boolean renderHealth() { return false; }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d \"healthColour\",\n\t\t\tname \u003d \"Health Colour\",\n\t\t\tdescription \u003d \"Choose the background colour of the health bar\"\n\t)\n\tdefault Color healthColour() { return Color.RED; }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 3,\n\t\t\tkeyName \u003d \"healthSize\",\n\t\t\tname \u003d \"Health Size\",\n\t\t\tdescription \u003d \"Choose the size of the Health bar\"\n\t)\n\tdefault Dimension healthSize() { return new Dimension(ComponentConstants.STANDARD_WIDTH, 0); }\n\t@ConfigItem\n\t\t\t(\n\t\t\t\t\tposition \u003d 4,\n\t\t\t\t\tkeyName \u003d \"showPrayer\",\n\t\t\t\t\tname \u003d \"Show Prayer\",\n\t\t\t\t\tdescription \u003d \"Render Prayer overlay\"\n\t\t\t)\n\n\tdefault boolean renderPrayer() { return false; }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 5,\n\t\t\tkeyName \u003d \"prayerColour\",\n\t\t\tname \u003d \"Prayer Colour\",\n\t\t\tdescription \u003d \"Choose the background colour of the prayer bar\"\n\t)\n\tdefault Color prayerColour() { return Color.CYAN; }\n\n\n\t@ConfigItem(\n\t\t\tposition \u003d 6,\n\t\t\tkeyName \u003d \"prayerSize\",\n\t\t\tname \u003d \"Prayer Size\",\n\t\t\tdescription \u003d \"Choose the size of the Prayer bar\"\n\t)\n\tdefault Dimension prayerSize() { return new Dimension(ComponentConstants.STANDARD_WIDTH, 0); }\n\n\n\t@ConfigItem\n\t\t\t(\n\t\t\t\t\tposition \u003d 7,\n\t\t\t\t\tkeyName \u003d \"showEnergy\",\n\t\t\t\t\tname \u003d \"Show Energy\",\n\t\t\t\t\tdescription \u003d \"Render Run Energy overlay\"\n\t\t\t)\n\n\tdefault boolean renderEnergy() { return false; }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 8,\n\t\t\tkeyName \u003d \"energyColour\",\n\t\t\tname \u003d \"Energy Colour\",\n\t\t\tdescription \u003d \"Choose the background colour of the run energy bar\"\n\t)\n\tdefault Color energyColour() { return Color.orange; }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 9,\n\t\t\tkeyName \u003d \"energySize\",\n\t\t\tname \u003d \"Energy Size\",\n\t\t\tdescription \u003d \"Choose the size of the Energy bar\"\n\t)\n\tdefault Dimension energySize() { return new Dimension(ComponentConstants.STANDARD_WIDTH, 0); }\n\n\t@ConfigItem\n\t\t\t(\n\t\t\t\t\tposition \u003d 10,\n\t\t\t\t\tkeyName \u003d \"showSpec\",\n\t\t\t\t\tname \u003d \"Show Spec\",\n\t\t\t\t\tdescription \u003d \"Render Special Attack overlay\"\n\t\t\t)\n\n\tdefault boolean renderSpec() { return false; }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 11,\n\t\t\tkeyName \u003d \"specColour\",\n\t\t\tname \u003d \"Spec Colour\",\n\t\t\tdescription \u003d \"Choose the background colour of the Spec bar\"\n\t)\n\tdefault Color specColour() { return Color.yellow; }\n\n\t@ConfigItem(\n\t\t\tposition \u003d 12,\n\t\t\tkeyName \u003d \"specSize\",\n\t\t\tname \u003d \"Spec Size\",\n\t\t\tdescription \u003d \"Choose the size of the Spec bar\"\n\t)\n\tdefault Dimension specSize() { return new Dimension(ComponentConstants.STANDARD_WIDTH, 0); }\n\n\t@ConfigItem\n\t\t\t(\n\t\t\t\t\tposition \u003d 13,\n\t\t\t\t\tkeyName \u003d \"totalLabels\",\n\t\t\t\t\tname \u003d \"Total Labels\",\n\t\t\t\t\tdescription \u003d \"Show the label as a fraction of the whole value\"\n\t\t\t)\n\n\tdefault boolean totalLabels() { return true; }\n\n\t@ConfigItem\n\t\t\t(\n\t\t\t\t\tposition \u003d 14,\n\t\t\t\t\tkeyName \u003d \"showLabels\",\n\t\t\t\t\tname \u003d \"Show Labels\",\n\t\t\t\t\tdescription \u003d \"Show labels on the minibars\"\n\t\t\t)\n\n\tdefault boolean showLabels() { return true; }\n\n}\n","filePath":"src\\main\\java\\com\\skeldoor\\MiniBarsConfig.java"},{"fileName":"MiniBarsEnergyOverlay.java","content":"package com.skeldoor;\n\nimport java.awt.*;\nimport javax.inject.Inject;\n\nimport net.runelite.api.Client;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\n\npublic class MiniBarsEnergyOverlay extends OverlayPanel{\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private MiniBarsConfig config;\n\n    @Inject\n    MiniBarsEnergyOverlay(\n            Client client,\n            MiniBarsPlugin plugin)\n    {\n        super(plugin);\n        setPosition(OverlayPosition.ABOVE_CHATBOX_RIGHT);\n        setPriority(OverlayPriority.LOW);\n        setMovable(true);\n        this.client \u003d client;\n    }\n\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        if (config.renderEnergy()) renderEnergy();\n\n        return super.render(graphics);\n    }\n\n    void renderEnergy(){\n        setPreferredSize(new Dimension(\n                config.energySize().width,\n                0));\n        MiniBarsUtils.buildPanel(\n                panelComponent,\n                0,\n                100,\n                (int)(client.getEnergy() / 100f),\n                config.energyColour(),\n                config.energySize(),\n                config.totalLabels(),\n                config.showLabels());\n    }\n}\n","filePath":"src\\main\\java\\com\\skeldoor\\MiniBarsEnergyOverlay.java"},{"fileName":"MiniBarsHealthOverlay.java","content":"package com.skeldoor;\n\nimport java.awt.*;\nimport javax.inject.Inject;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.Skill;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\n\npublic class MiniBarsHealthOverlay extends OverlayPanel{\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private MiniBarsConfig config;\n\n    @Inject\n    MiniBarsHealthOverlay(\n            Client client,\n            MiniBarsPlugin plugin)\n    {\n        super(plugin);\n        setPosition(OverlayPosition.ABOVE_CHATBOX_RIGHT);\n        setPriority(OverlayPriority.LOW);\n        setMovable(true);\n        this.client \u003d client;\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        if (config.renderHealth()) renderHealth();\n        return super.render(graphics);\n    }\n\n    void renderHealth(){\n        setPreferredSize(new Dimension(\n                config.healthSize().width,\n                0));\n        MiniBarsUtils.buildPanel(\n                panelComponent,\n                0,\n                client.getRealSkillLevel(Skill.HITPOINTS),\n                client.getBoostedSkillLevel(Skill.HITPOINTS),\n                config.healthColour(),\n                config.healthSize(),\n                config.totalLabels(),\n                config.showLabels());\n    }\n}\n","filePath":"src\\main\\java\\com\\skeldoor\\MiniBarsHealthOverlay.java"},{"fileName":"MiniBarsPlugin.java","content":"package com.skeldoor;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Mini Bars\"\n)\npublic class MiniBarsPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate MiniBarsConfig config;\n\n\t@Inject\n\tprivate MiniBarsHealthOverlay healthOverlay;\n\n\t@Inject\n\tprivate MiniBarsPrayerOverlay prayerOverlay;\n\n\t@Inject\n\tprivate MiniBarsEnergyOverlay energyOverlay;\n\n\t@Inject\n\tprivate MiniBarsSpecOverlay specOverlay;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\toverlayManager.add(healthOverlay);\n\t\toverlayManager.add(prayerOverlay);\n\t\toverlayManager.add(energyOverlay);\n\t\toverlayManager.add(specOverlay);\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\toverlayManager.remove(healthOverlay);\n\t\toverlayManager.remove(prayerOverlay);\n\t\toverlayManager.remove(energyOverlay);\n\t\toverlayManager.remove(specOverlay);\n\t}\n\n\t@Provides\n\tMiniBarsConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(MiniBarsConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\skeldoor\\MiniBarsPlugin.java"},{"fileName":"MiniBarsPrayerOverlay.java","content":"package com.skeldoor;\n\nimport java.awt.*;\nimport javax.inject.Inject;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.Skill;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\n\npublic class MiniBarsPrayerOverlay extends OverlayPanel{\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private MiniBarsConfig config;\n\n    @Inject\n    MiniBarsPrayerOverlay(\n            Client client,\n            MiniBarsPlugin plugin)\n    {\n        super(plugin);\n        setPosition(OverlayPosition.ABOVE_CHATBOX_RIGHT);\n        setPriority(OverlayPriority.LOW);\n        setMovable(true);\n        this.client \u003d client;\n    }\n\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        if (config.renderPrayer()) renderPrayer();\n\n        return super.render(graphics);\n    }\n\n    void renderPrayer(){\n        setPreferredSize(new Dimension(\n                config.prayerSize().width,\n                0));\n        MiniBarsUtils.buildPanel(\n                panelComponent,\n                0,\n                client.getRealSkillLevel(Skill.PRAYER),\n                client.getBoostedSkillLevel(Skill.PRAYER),\n                config.prayerColour(),\n                config.prayerSize(),\n                config.totalLabels(),\n                config.showLabels());\n    }\n}\n","filePath":"src\\main\\java\\com\\skeldoor\\MiniBarsPrayerOverlay.java"},{"fileName":"MiniBarsSpecOverlay.java","content":"package com.skeldoor;\n\nimport java.awt.*;\nimport javax.inject.Inject;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.VarPlayer;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\n\npublic class MiniBarsSpecOverlay extends OverlayPanel{\n\n    @Inject\n    private MiniBarsConfig config;\n\n    @Inject\n    private Client client;\n\n    @Inject\n    MiniBarsSpecOverlay(\n            Client client,\n            MiniBarsPlugin plugin)\n    {\n        super(plugin);\n        setPosition(OverlayPosition.ABOVE_CHATBOX_RIGHT);\n        setPriority(OverlayPriority.LOW);\n        setMovable(true);\n        this.client \u003d client;\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics) {\n        if (config.renderSpec()) renderSpec();\n\n        return super.render(graphics);\n    }\n\n    void renderSpec(){\n        setPreferredSize(new Dimension(\n            config.specSize().width,\n            0));\n        MiniBarsUtils.buildPanel(\n               panelComponent,\n               0,\n               100,\n               client.getVarpValue(VarPlayer.SPECIAL_ATTACK_PERCENT)/10f,\n               config.specColour(),\n               config.specSize(),\n                config.totalLabels(),\n                config.showLabels());\n    }\n}\n","filePath":"src\\main\\java\\com\\skeldoor\\MiniBarsSpecOverlay.java"},{"fileName":"MiniBarsUtils.java","content":"package com.skeldoor;\n\nimport net.runelite.client.ui.overlay.components.PanelComponent;\nimport net.runelite.client.ui.overlay.components.ProgressBarComponent;\nimport java.awt.*;\n\npublic class MiniBarsUtils {\n\n    static void buildPanel(PanelComponent panelComponent, int minimum, int maximum, float value, Color foregroundColour, Dimension size, boolean totalLabels, boolean showLabels) {\n        ProgressBarComponent progressBar \u003d new ProgressBarComponent();\n        progressBar.setMinimum(minimum);\n        progressBar.setMaximum(maximum);\n        progressBar.setValue(value);\n        progressBar.setBackgroundColor(Color.BLACK);\n        progressBar.setForegroundColor(foregroundColour);\n        progressBar.setFontColor(Color.WHITE);\n        progressBar.setLabelDisplayMode(ProgressBarComponent.LabelDisplayMode.FULL);\n\n\n\n        if (!showLabels) {\n            progressBar.setLabelDisplayMode(ProgressBarComponent.LabelDisplayMode.TEXT_ONLY);\n        } else {\n            if (!totalLabels){\n                progressBar.setLabelDisplayMode(ProgressBarComponent.LabelDisplayMode.TEXT_ONLY);\n                progressBar.setCenterLabel(String.valueOf((int) value));\n            }\n        }\n\n\n        ProgressBarComponent paddingBar \u003d new ProgressBarComponent();\n        paddingBar.setMinimum(minimum);\n        paddingBar.setMaximum(maximum);\n        paddingBar.setValue(value);\n        paddingBar.setBackgroundColor(Color.BLACK);\n        paddingBar.setForegroundColor(foregroundColour);\n        paddingBar.setFontColor(Color.WHITE);\n        paddingBar.setLabelDisplayMode(ProgressBarComponent.LabelDisplayMode.TEXT_ONLY);\n        // Set height of bar by padding the top and bottom with empty lines\n        for (int i \u003d 0; i \u003c size.height; i++){\n            panelComponent.getChildren().add(paddingBar);\n        }\n\n        panelComponent.getChildren().add(progressBar);\n\n        for (int i \u003d 0; i \u003c size.height; i++){\n            panelComponent.getChildren().add(paddingBar);\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\skeldoor\\MiniBarsUtils.java"},{"fileName":"MiniBarsPluginTest.java","content":"package com.skeldoor;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class MiniBarsPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(MiniBarsPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\skeldoor\\MiniBarsPluginTest.java"}]},{"commit":"9243d5943ff9342c6c18e3b2af80bfc38640d7a7","repository":"https://github.com/Anderzenn/valuable-drop-prices.git","internalName":"valuable-drop-prices","files":[{"fileName":"ValuableDropConsiderationType.java","content":"package com.anderzenn.valuabledropprices;\n\npublic enum ValuableDropConsiderationType {\n    GRAND_EXCHANGE,\n    HIGH_ALCH,\n    BOTH\n}\n","filePath":"src\\main\\java\\com\\anderzenn\\valuabledropprices\\ValuableDropConsiderationType.java"},{"fileName":"ValuableDropPriceDisplayType.java","content":"package com.anderzenn.valuabledropprices;\n\npublic enum ValuableDropPriceDisplayType {\n    GRAND_EXCHANGE,\n    HIGH_ALCH,\n    BOTH\n}\n","filePath":"src\\main\\java\\com\\anderzenn\\valuabledropprices\\ValuableDropPriceDisplayType.java"},{"fileName":"ValuableDropPricesConfig.java","content":"package com.anderzenn.valuabledropprices;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\n\nimport java.awt.*;\n\n@ConfigGroup(\"ValuableDropPrices\")\npublic interface ValuableDropPricesConfig extends Config\n{\n\t@ConfigSection(\n\t\t\tname \u003d \"Message Settings\",\n\t\t\tdescription \u003d \"General settings for the message\",\n\t\t\tposition \u003d 0\n\t)\n\tString msgSettings \u003d \"message settings\";\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Colour Settings\",\n\t\t\tdescription \u003d \"Colour settings for the message\",\n\t\t\tposition \u003d 1\n\t)\n\tString colSettings \u003d \"colour settings\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"displayPrices\",\n\t\tname \u003d \"Display Price Type\",\n\t\tsection \u003d msgSettings,\n\t\tdescription \u003d \"Choose if you want to display both GE and HA prices, or one of them.\",\n\t\tposition \u003d 0\n\t)\n\tdefault ValuableDropPriceDisplayType displayPrices() {\n\t\treturn ValuableDropPriceDisplayType.HIGH_ALCH; // Default to HA\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"formatPrices\",\n\t\t\tname \u003d \"Format Prices\",\n\t\t\tsection \u003d msgSettings,\n\t\t\tdescription \u003d \"Disable this if you want precise numbers, i.e. 1.000.000 instead of 1M\",\n\t\t\tposition \u003d 1\n\t)\n\tdefault boolean formatPrices() { return true; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"mainColour\",\n\t\t\tname \u003d \"Main Colour\",\n\t\t\tsection \u003d colSettings,\n\t\t\tdescription \u003d \"Main colour for the message, default is #EF1020\",\n\t\t\tposition \u003d 0\n\t)\n\tdefault Color mainColour() { return Color.decode(\"#EF1020\"); }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"itemColour\",\n\t\t\tname \u003d \"Item Colour\",\n\t\t\tsection \u003d colSettings,\n\t\t\tdescription \u003d \"Colour of the items name in the message. Default is black.\",\n\t\t\tposition \u003d 1\n\t)\n\tdefault Color itemColour() { return Color.black; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"useMainColour_item\",\n\t\t\tname \u003d \"Use main colour on item?\",\n\t\t\tsection \u003d colSettings,\n\t\t\tdescription \u003d \"Use main colour as the colour for items.\",\n\t\t\tposition \u003d 2\n\t)\n\tdefault boolean useMainColour_item() { return true; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"valueColour\",\n\t\t\tname \u003d \"Value Colour\",\n\t\t\tsection \u003d colSettings,\n\t\t\tdescription \u003d \"Colour for the value section of an item. Default is blue.\",\n\t\t\tposition \u003d 3\n\t)\n\tdefault Color valueColour() { return Color.blue; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"useMainColour_value\",\n\t\t\tname \u003d \"Use main colour on value?\",\n\t\t\tsection \u003d colSettings,\n\t\t\tdescription \u003d \"Use main colour as the colour for value.\",\n\t\t\tposition \u003d 4\n\t)\n\tdefault boolean useMainColour_value() { return true; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\t// Debug config items - moved down for better visual seperation :)\n\t@ConfigSection(\n\t\t\tname \u003d \"Debugging Settings\",\n\t\t\tdescription \u003d \"Settings for debugging and development purposes\",\n\t\t\tposition \u003d 9999\n\t)\n\tString debugging \u003d \"debugging\";\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"debugMode\",\n\t\t\tname \u003d \"Debug Mode\",\n\t\t\tsection \u003d debugging,\n\t\t\tdescription \u003d \"For debugging/developing the plugin. Need to be enabled for debug messages.\",\n\t\t\tposition \u003d 0\n\t)\n\tdefault boolean debugMode() {\n\t\treturn false;\n\t}\n\n\t// ------ //\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"prntItemName\",\n\t\t\tname \u003d \"Print item name\",\n\t\t\tsection \u003d debugging,\n\t\t\tdescription \u003d \"Prints item name in chat.\",\n\t\t\tposition \u003d 1\n\t)\n\tdefault boolean prntItemName() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"prntItemId\",\n\t\t\tname \u003d \"Print item id\",\n\t\t\tsection \u003d debugging,\n\t\t\tdescription \u003d \"Prints item id in chat.\",\n\t\t\tposition \u003d 2\n\t)\n\tdefault boolean prntItemId() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"prntItemQuantity\",\n\t\t\tname \u003d \"Print item quantity string\",\n\t\t\tsection \u003d debugging,\n\t\t\tdescription \u003d \"Prints the item quantity string in chat.\",\n\t\t\tposition \u003d 3\n\t)\n\tdefault boolean prntItemQuantity() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"prntItemQuantityInt\",\n\t\t\tname \u003d \"Print item quantity int\",\n\t\t\tsection \u003d debugging,\n\t\t\tdescription \u003d \"Prints the item quantity int in chat.\",\n\t\t\tposition \u003d 4\n\t)\n\tdefault boolean prntItemQuantityInt() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"prntItemValue\",\n\t\t\tname \u003d \"Print item value\",\n\t\t\tsection \u003d debugging,\n\t\t\tdescription \u003d \"Prints raw item value in chat.\",\n\t\t\tposition \u003d 5\n\t)\n\tdefault boolean prntItemValue() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"debugValues\",\n\t\t\tname \u003d \"Debug Values\",\n\t\t\tsection \u003d debugging,\n\t\t\tdescription \u003d \"Sets bones (local) value to be high, used for testing messages since practically everything drops bones.\",\n\t\t\tposition \u003d 6\n\t)\n\tdefault boolean debugValues() {\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\com\\anderzenn\\valuabledropprices\\ValuableDropPricesConfig.java"},{"fileName":"ValuableDropPricesPlugin.java","content":"package com.anderzenn.valuabledropprices;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.VarbitChanged;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.util.ColorUtil;\nimport net.runelite.client.util.QuantityFormatter;\n\nimport java.awt.*;\nimport java.util.Random;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\n\n@Slf4j\n@PluginDescriptor(\n\t\tname \u003d \"Valuable Drop Prices Plugin\",\n\t\tdescription \u003d \"Plugin for adding HA prices to the valuable drops chat notification, as well as modifying colours.\"\n)\npublic class ValuableDropPricesPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ItemManager itemManager;\n\n\n\t@Inject\n\tprivate ValuableDropPricesConfig config;\n\n\tint dropThreshold;\n\tint dropThresholdId \u003d 5400;\n\n\t@Provides\n\tValuableDropPricesConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(ValuableDropPricesConfig.class);\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged) {\n\t\tif (gameStateChanged.getGameState() \u003d\u003d GameState.LOGGED_IN) {\n\n\t\t\t// Check what the clients valuable drop threshold is set to in settings and set variable to new value.\n\t\t\tdropThreshold \u003d client.getVarbitValue(dropThresholdId);\n        }\n\t}\n\n\t@Subscribe\n\tpublic void onVarbitChanged(VarbitChanged event) {\n\n\t\t// Check if varbit matching the valuable drop threshold setting has changed, if so set variable to new value.\n\t\t// Also sets the value if the server never sent the actual value on login.\n\t\tif (event.getVarbitId() \u003d\u003d dropThresholdId) {\n\t\t\tdropThreshold \u003d client.getVarbitValue(dropThresholdId);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage chatMessage) {\n\t\tMessageNode messageNode \u003d chatMessage.getMessageNode();\n\t\tif (messageNode.getType() !\u003d ChatMessageType.GAMEMESSAGE) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Pattern regEx from Mafhams plugins: https://github.com/Mafham/mafham-plugins/\n\t\tString valuableDropPatternString \u003d \"Valuable drop: ((?:\\\\d+ x )?(.*?)) \\\\((\\\\d{1,3}(?:,\\\\d{3})*|\\\\d+) coin(?:s?)\\\\)\";\n\t\tPattern valuableDropPattern \u003d Pattern.compile(valuableDropPatternString);\n\t\tMatcher valuableDropMatcher \u003d valuableDropPattern.matcher(messageNode.getValue());\n\n\t\tif (valuableDropMatcher.find()) {\n\t\t\t// Extract item name and quantity\n\t\t\tString quantityString \u003d valuableDropMatcher.group(1);\n\t\t\tString itemName \u003d valuableDropMatcher.group(2);\n\t\t\tint quantity \u003d quantityString !\u003d null \u0026 quantityString.contains(\" x \") ? Integer.parseInt(quantityString.split(\" x \")[0]) : 1;\n\n\t\t\t// Get item ID and fetch values\n\t\t\tint itemId \u003d itemManager.search(itemName).get(0).getId(); // Basic itemID search. Maybe there\u0027s a better way?\n\t\t\tint geValue \u003d itemManager.getItemPrice(itemId);\n\t\t\tint haValue \u003d client.getItemDefinition(itemId).getHaPrice();\n\n\t\t\t// Check if item is \"coins\" or \"coin\". If it is set value to 1 to avoid insanely high nonsense numbers.\n\t\t\tif (itemName.equalsIgnoreCase(\"coins\") || itemName.equalsIgnoreCase(\"coin\")) {\n\t\t\t\tgeValue \u003d 1;\n\t\t\t\thaValue \u003d 1;\n\t\t\t}\n\n\t\t\t// Check if displayType is HA and if haValue is zero or if it\u0027s below the drop threshold. If it is, then don\u0027t print a message.\n\t\t\t// And do the same for GE.\n\t\t\tif (config.displayPrices() \u003d\u003d ValuableDropPriceDisplayType.HIGH_ALCH \u0026\u0026 haValue \u003d\u003d 0 || config.displayPrices() \u003d\u003d ValuableDropPriceDisplayType.HIGH_ALCH \u0026\u0026 haValue \u003c dropThreshold) {\n\t\t\t\tmessageNode.setValue(null);\n\t\t\t\treturn;\n\t\t\t} else if (config.displayPrices() \u003d\u003d ValuableDropPriceDisplayType.GRAND_EXCHANGE \u0026\u0026 geValue \u003d\u003d 0 || config.displayPrices() \u003d\u003d ValuableDropPriceDisplayType.GRAND_EXCHANGE \u0026\u0026 geValue \u003c dropThreshold) {\n\t\t\t\tmessageNode.setValue(null);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// DEBUGGING\n\t\t\tif (config.debugMode()) {\n\n\t\t\t\tif (config.prntItemName()) client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"Item Name: \" + itemName, null);\n\t\t\t\tif (config.prntItemQuantity()) client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"Item Quantity String: \" + quantityString, null);\n\t\t\t\tif (config.prntItemQuantityInt()) client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"Item Quantity Int: \" + quantity, null);\n\t\t\t\tif (config.prntItemValue()) client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"Item Value: \" + valuableDropMatcher.group(3), null);\n\n\t\t\t\tif (config.prntItemId()) client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"Item ID: \" + itemId, null);\n\n\t\t\t\tif (config.debugValues()) {\n\t\t\t\t\tif (itemName.equalsIgnoreCase(\"bones\")) {\n\t\t\t\t\t\t// Random price for debugging purposes\n\t\t\t\t\t\t// Random number between 1k and 10m\n\t\t\t\t\t\t//\t\t\t\t\t\t\t\t\t\t\tMAX\t\t  MIN\t   MIN\n\t\t\t\t\t\tint randomPrice \u003d (int)((Math.random() * (10000000 - 1000)) + 1000);\n\n\t\t\t\t\t\tgeValue \u003d randomPrice;\n\t\t\t\t\t\thaValue \u003d randomPrice;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Calculate total values\n\t\t\tint totalGEValue \u003d geValue * quantity;\n\t\t\tint totalHAValue \u003d haValue * quantity;\n\n\t\t\t// Format message based on user configuration\n\t\t\tString modifiedMessage \u003d formatDropMessage(itemName, quantityString, totalHAValue, totalGEValue);\n\n\t\t\t// Append string onto default message\n\t\t\tmessageNode.setValue(ColorUtil.prependColorTag(modifiedMessage, config.mainColour()));\n\t\t}\n\n\t}\n\n\tprivate String formatDropMessage(String itemName, String quantityString, int haValue, int geValue) {\n\t\tValuableDropPriceDisplayType displayType \u003d config.displayPrices();\n\t\tString haValueString \u003d haValue \u003e\u003d 0 ? (config.formatPrices() ? QuantityFormatter.quantityToRSDecimalStack(haValue) : QuantityFormatter.formatNumber(haValue)) + \" gp\" : \"\";\n\t\tString geValueString \u003d geValue \u003e\u003d 0 ? (config.formatPrices() ? QuantityFormatter.quantityToRSDecimalStack(geValue) : QuantityFormatter.formatNumber(geValue)) + \" gp\" : \"\";\n\t\tString valueString;\n\n\t\tString final_haValueString \u003d itemName.equalsIgnoreCase(\"coins\") || itemName.equalsIgnoreCase(\"coin\") ? String.format(\"(%s)\", haValueString) : String.format(\"(HA: %s)\", haValueString);\n\t\tString final_geValueString \u003d itemName.equalsIgnoreCase(\"coins\") || itemName.equalsIgnoreCase(\"coin\") ? String.format(\"(%s)\", geValueString) : String.format(\"(GE: %s)\", geValueString);\n\n\t\t// set valuestring based on the users settings.\n\t\tswitch (displayType) {\n\t\t\tcase GRAND_EXCHANGE:\n\t\t\t\tvalueString \u003d final_geValueString;\n\t\t\t\tbreak;\n\t\t\tcase HIGH_ALCH:\n\t\t\t\tvalueString \u003d final_haValueString;\n\t\t\t\tbreak;\n\t\t\tcase BOTH:\n\t\t\t\t// If there is no ha value, but there is a ge value, only show the ge value.\n\t\t\t\tif (haValue \u003c\u003d 0 \u0026\u0026 geValue \u003e\u003d 0) {\n\t\t\t\t\tvalueString \u003d final_geValueString;\n\t\t\t\t}\n\t\t\t\t// if there is a ha value, but there is no ge value, only show the ha value.\n\t\t\t\telse if (haValue \u003e\u003d 0 \u0026\u0026 geValue \u003c\u003d 0) {\n\t\t\t\t\tvalueString \u003d final_haValueString;\n\t\t\t\t}\n\t\t\t\t// If there is a ha value, AND there is a ge value, show both values.\n\t\t\t\telse {\n\t\t\t\t\tvalueString \u003d itemName.equalsIgnoreCase(\"coins\") || itemName.equalsIgnoreCase(\"coin\") ? String.format(\"(%s)\", geValueString) : String.format(\"(GE: %s, HA: %s)\", geValueString, haValueString);\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tvalueString \u003d \"\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Check if user wants to use main colour for values\n\t\tif (!config.useMainColour_value()) {\n\t\t\tvalueString \u003d ColorUtil.prependColorTag(valueString, config.valueColour());\n\t\t\tvalueString \u003d ColorUtil.prependColorTag(valueString, config.valueColour());\n\t\t}\n\n\t\t// Check if user wants to use main colour for item names\n\t\tif (!config.useMainColour_item()) {\n\t\t\tquantityString \u003d ColorUtil.prependColorTag(quantityString, config.itemColour());\n\t\t\titemName \u003d ColorUtil.prependColorTag(itemName, config.itemColour());\n\t\t}\n\n\t\t// Build full message\n\t\treturn String.format(\"Valuable drop: %s %s\", (quantityString !\u003d null ? quantityString : itemName), valueString);\n\t}\n\n}\n","filePath":"src\\main\\java\\com\\anderzenn\\valuabledropprices\\ValuableDropPricesPlugin.java"},{"fileName":"ValuableDropPricesPluginTest.java","content":"package com.anderzenn.valuabledropprices;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ValuableDropPricesPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(ValuableDropPricesPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\anderzenn\\valuabledropprices\\ValuableDropPricesPluginTest.java"}]},{"commit":"ff6896a75fa97ddf3e22b33a46c32a6059fe03dd","repository":"https://github.com/MrSableye/account-chat-filter-plugin.git","internalName":"account-chat-filter","files":[{"fileName":"AccountChatFilterConfig.java","content":"package es.weedl;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\n\n@ConfigGroup(\"accountChatFilter\")\npublic interface AccountChatFilterConfig extends Config\n{\n\t@ConfigSection(\n\t\t\tname \u003d \"General\",\n\t\t\tdescription \u003d \"General settings\",\n\t\t\tposition \u003d 10\n\t)\n\tString generalSection \u003d \"general\";\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Filtered Account Types\",\n\t\t\tdescription \u003d \"Account types to filter\",\n\t\t\tposition \u003d 20\n\t)\n\tString accountTypesSection \u003d \"accountTypes\";\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"filterSelf\",\n\t\t\tname \u003d \"Filter Self\",\n\t\t\tdescription \u003d \"Whether or not to filter yourself if you match a filtered group\",\n\t\t\tposition \u003d 0,\n\t\t\tsection \u003d generalSection\n\t)\n\tdefault boolean filterSelf() { return false; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"filterFriends\",\n\t\t\tname \u003d \"Filter Friends\",\n\t\t\tdescription \u003d \"Whether or not to filter your friends if they match a filtered group\",\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d generalSection\n\t)\n\tdefault boolean filterFriends() { return false; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"filterFriendsChat\",\n\t\t\tname \u003d \"Filter Friends Chat Members\",\n\t\t\tdescription \u003d \"Whether or not to filter members of your current friends chat if they match a filtered group\",\n\t\t\tposition \u003d 2,\n\t\t\tsection \u003d generalSection\n\t)\n\tdefault boolean filterFriendsChat() { return true; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"filterClanChat\",\n\t\t\tname \u003d \"Filter Chat Chat Members\",\n\t\t\tdescription \u003d \"Whether or not to filter members of your current clan chat if they match a filtered group\",\n\t\t\tposition \u003d 3,\n\t\t\tsection \u003d generalSection\n\t)\n\tdefault boolean filterClanChat() { return true; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"onlyFilterIcons\",\n\t\t\tname \u003d \"Only Filter Icons\",\n\t\t\tdescription \u003d \"Removes the specified account icons instead of the user\u0027s message (toggling will not re-add icons, this is somewhat buggy)\",\n\t\t\tposition \u003d 4,\n\t\t\tsection \u003d generalSection\n\t)\n\tdefault boolean onlyFilterIcons() { return false; }\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"filterNormalAccounts\",\n\t\tname \u003d \"Normal Accounts\",\n\t\tdescription \u003d \"Filters normal accounts\",\n\t\tposition \u003d 20,\n\t\tsection \u003d accountTypesSection\n\t)\n\tdefault boolean filterNormalAccounts() { return false; }\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"filterIronmen\",\n\t\tname \u003d \"Ironmen\",\n\t\tdescription \u003d \"Filters standard ironman accounts\",\n\t\tposition \u003d 21,\n\t\tsection \u003d accountTypesSection\n\t)\n\tdefault boolean filterIronmen() { return false; }\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"filterHardcoreIronmen\",\n\t\tname \u003d \"Hardcore Ironmen\",\n\t\tdescription \u003d \"Filters hardcore ironman accounts\",\n\t\tposition \u003d 22,\n\t\tsection \u003d accountTypesSection\n\t)\n\tdefault boolean filterHardcoreIronmen() { return false; }\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"filterUltimateIronmen\",\n\t\tname \u003d \"Ultimate Ironmen\",\n\t\tdescription \u003d \"Filters ultimate ironman accounts\",\n\t\tposition \u003d 23,\n\t\tsection \u003d accountTypesSection\n\t)\n\tdefault boolean filterUltimateIronmen() { return false; }\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"filterGroupIronmen\",\n\t\tname \u003d \"Group Ironmen\",\n\t\tdescription \u003d \"Filters group ironman accounts\",\n\t\tposition \u003d 24,\n\t\tsection \u003d accountTypesSection\n\t)\n\tdefault boolean filterGroupIronmen() { return false; }\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"filterHardcoreGroupIronmen\",\n\t\tname \u003d \"Hardcore Group Ironmen\",\n\t\tdescription \u003d \"Filters hardcore group ironman accounts\",\n\t\tposition \u003d 25,\n\t\tsection \u003d accountTypesSection\n\t)\n\tdefault boolean filterHardcoreGroupIronmen() { return false; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"filterUnrankedGroupIronmen\",\n\t\t\tname \u003d \"Unranked Group Ironmen\",\n\t\t\tdescription \u003d \"Filters unranked group ironman accounts\",\n\t\t\tposition \u003d 26,\n\t\t\tsection \u003d accountTypesSection\n\t)\n\tdefault boolean filterUnrankedGroupIronmen() { return false; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"filterLeagueAccount\",\n\t\t\tname \u003d \"League Accounts\",\n\t\t\tdescription \u003d \"Filters league accounts\",\n\t\t\tposition \u003d 27,\n\t\t\tsection \u003d accountTypesSection\n\t)\n\tdefault boolean filterLeague() { return false; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"filteredCombatLevel\",\n\t\t\tname \u003d \"Combat Level\",\n\t\t\tdescription \u003d \"Filters chat based on combat level given\",\n\t\t\tposition \u003d 28\n\t)\n\tdefault int filteredCombatLevel() { return 1; }\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"hideCharacterModels\",\n\t\t\tname \u003d \"Hide Character Models\",\n\t\t\tdescription \u003d \"Hides the in-game character model of any filtered players\",\n\t\t\tposition \u003d 29\n\t)\n\tdefault boolean hideCharacterModels() { return false; }\n}\n","filePath":"src\\main\\java\\es\\weedl\\AccountChatFilterConfig.java"},{"fileName":"AccountChatFilterPlugin.java","content":"package es.weedl;\n\nimport com.google.inject.Provides;\nimport java.util.*;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.clan.ClanChannel;\nimport net.runelite.api.events.OverheadTextChanged;\nimport net.runelite.api.events.ScriptCallbackEvent;\nimport net.runelite.client.callback.Hooks;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.util.Text;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Account Chat Filter\"\n)\npublic class AccountChatFilterPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate AccountChatFilterConfig config;\n\n\t@Inject\n\tprivate Hooks hooks;\n\n\tprivate final Set\u003cAccountIconID\u003e filteredAccountTypes \u003d new HashSet\u003c\u003e();\n\n\tprivate final Map\u003cInteger, String\u003e originalNames \u003d new HashMap\u003c\u003e();\n\tprivate final Set\u003cString\u003e filteredAccountNames \u003d new HashSet\u003c\u003e();\n\n\tprivate final Hooks.RenderableDrawListener drawListener \u003d this::shouldDraw;\n\n\t@Provides\n\tfinal AccountChatFilterConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(AccountChatFilterConfig.class);\n\t}\n\n\tprivate void addOrRemove(final AccountIconID accountIconID, final boolean isAdd)\n\t{\n\t\tif (isAdd)\n\t\t{\n\t\t\tfilteredAccountTypes.add(accountIconID);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfilteredAccountTypes.remove(accountIconID);\n\t\t}\n\t}\n\n\tprotected void updateFilteredAccounts()\n\t{\n\t\taddOrRemove(AccountIconID.IRONMAN, config.filterIronmen());\n\t\taddOrRemove(AccountIconID.HARDCORE_IRONMAN, config.filterHardcoreIronmen());\n\t\taddOrRemove(AccountIconID.ULTIMATE_IRONMAN, config.filterUltimateIronmen());\n\t\taddOrRemove(AccountIconID.GROUP_IRONMAN, config.filterGroupIronmen());\n\t\taddOrRemove(AccountIconID.HARDCORE_GROUP_IRONMAN, config.filterHardcoreGroupIronmen());\n\t\taddOrRemove(AccountIconID.UNRANKED_GROUP_IRONMAN, config.filterUnrankedGroupIronmen());\n\t\taddOrRemove(AccountIconID.LEAGUE, config.filterLeague());\n\t}\n\n\tprivate void resetNames()\n\t{\n\t\tfor (final Integer messageId : originalNames.keySet())\n\t\t{\n\t\t\tfinal String originalName \u003d originalNames.get(messageId);\n\t\t\tfinal MessageNode messageNode \u003d client.getMessages().get(messageId);\n\t\t\tmessageNode.setName(originalName);\n\t\t}\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\thandleChange();\n\t\thooks.registerRenderableDrawListener(drawListener);\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\thooks.unregisterRenderableDrawListener(drawListener);\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(final ConfigChanged event)\n\t{\n\t\tif (!\"accountChatFilter\".equals(event.getGroup()))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\thandleChange();\n\t}\n\n\tprivate void handleChange()\n\t{\n\t\tupdateFilteredAccounts();\n\n\t\tif (!config.onlyFilterIcons())\n\t\t{\n\t\t\tresetNames();\n\t\t}\n\n\t\tfilteredAccountNames.clear();\n\n\t\t//Refresh chat after config change to reflect current rules\n\t\tclient.refreshChat();\n\t}\n\n\t@Subscribe\n\tpublic void onScriptCallbackEvent(final ScriptCallbackEvent event)\n\t{\n\t\tif (!\"chatFilterCheck\".equals(event.getEventName()))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tint[] intStack \u003d client.getIntStack();\n\t\tint intStackSize \u003d client.getIntStackSize();\n\n\t\tfinal int messageType \u003d intStack[intStackSize - 2];\n\t\tfinal int messageId \u003d intStack[intStackSize - 1];\n\n\t\tfinal ChatMessageType chatMessageType \u003d ChatMessageType.of(messageType);\n\t\tfinal MessageNode messageNode \u003d client.getMessages().get(messageId);\n\t\tfinal String name \u003d originalNames.getOrDefault(messageId, messageNode.getName());\n\n\t\tboolean shouldFilter \u003d shouldFilter(name);\n\n\t\tif (shouldFilter)\n\t\t{\n\t\t\tfilteredAccountNames.add(Text.standardize(name));\n\n\t\t\tif (config.onlyFilterIcons())\n\t\t\t{\n\t\t\t\toriginalNames.put(messageId, name);\n\t\t\t\tmessageNode.setName(filterIcons(name));\n\t\t\t\tclient.refreshChat();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tboolean blockMessage \u003d isBlockableMessageType(chatMessageType);\n\n\t\t\t\tif (blockMessage)\n\t\t\t\t{\n\t\t\t\t\t// Block the message\n\t\t\t\t\tintStack[intStackSize - 3] \u003d 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (originalNames.containsKey(messageId))\n\t\t{\n\t\t\tmessageNode.setName(originalNames.remove(messageId));\n\t\t\tclient.refreshChat();\n\t\t}\n\t}\n\n\tprivate boolean isBlockableMessageType(final ChatMessageType chatMessageType)\n\t{\n\t\tswitch (chatMessageType) {\n\t\t\tcase PUBLICCHAT:\n\t\t\tcase MODCHAT:\n\t\t\tcase AUTOTYPER:\n\t\t\tcase PRIVATECHAT:\n\t\t\tcase MODPRIVATECHAT:\n\t\t\tcase FRIENDSCHAT:\n\t\t\tcase CLAN_CHAT:\n\t\t\tcase CLAN_GUEST_CHAT:\n\t\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t@Subscribe\n\tpublic void onOverheadTextChanged(final OverheadTextChanged event)\n\t{\n\t\tif (!(event.getActor() instanceof Player))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tString message \u003d event.getOverheadText();\n\n\t\tif (shouldFilter(event.getActor().getName()))\n\t\t{\n\t\t\tmessage \u003d \" \";\n\t\t}\n\n\t\tevent.getActor().setOverheadText(message);\n\t}\n\n\tprotected String filterIcons(final String name)\n\t{\n\t\tString filteredName \u003d name;\n\t\tfor (final AccountIconID accountIconID : filteredAccountTypes)\n\t\t{\n\t\t\tfilteredName \u003d filteredName.replace(accountIconID.toString(), \"\");\n\t\t}\n\t\treturn filteredName;\n\t}\n\n\tprivate boolean isSelf(final String name)\n\t{\n\t\treturn Text.standardize(name).equals(Text.standardize(client.getLocalPlayer().getName()));\n\t}\n\n\tprivate boolean isFriend(final String name)\n\t{\n\t\treturn client.isFriended(name, false);\n\t}\n\n\tprivate boolean isFriendsChatMember(final String name)\n\t{\n\t\tfinal FriendsChatManager friendsChatManager \u003d client.getFriendsChatManager();\n\t\treturn friendsChatManager !\u003d null \u0026\u0026 friendsChatManager.findByName(name) !\u003d null;\n\t}\n\n\tprivate boolean isClanChatMember(final String name)\n\t{\n\t\tClanChannel clanChannel \u003d client.getClanChannel();\n\t\tif (clanChannel !\u003d null \u0026\u0026 clanChannel.findMember(name) !\u003d null)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tclanChannel \u003d client.getGuestClanChannel();\n\t\treturn clanChannel !\u003d null \u0026\u0026 clanChannel.findMember(name) !\u003d null;\n\t}\n\n\tprivate boolean shouldSkipFilters(final String name)\n\t{\n\t\tif (!config.filterSelf() \u0026\u0026 isSelf(name))\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\telse if (!config.filterFriends() \u0026\u0026 isFriend(name))\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\telse if (!config.filterFriendsChat() \u0026\u0026 isFriendsChatMember(name))\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t\telse if (!config.filterClanChat() \u0026\u0026 isClanChatMember(name))\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate boolean isFilteredAccountType(final String name)\n\t{\n\t\treturn filteredAccountTypes.stream().anyMatch(\n\t\t\t\t(accountIconID -\u003e name.contains(accountIconID.toString()))\n\t\t);\n\t}\n\n\tprivate boolean isNormalAccount(final String name)\n\t{\n\t\treturn Arrays.stream(AccountIconID.values()).noneMatch(\n\t\t\t\t(accountIconID -\u003e name.contains(accountIconID.toString()))\n\t\t);\n\t}\n\n\tprotected boolean shouldFilter(final String name)\n\t{\n\t\tif (shouldSkipFilters(Text.removeTags(name)))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (isFilteredAccountType(name))\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tPlayer player \u003d getPlayerFromName(name);\n\t\tif (player !\u003d null \u0026\u0026 player.getCombatLevel() \u003c\u003d config.filteredCombatLevel()) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn config.filterNormalAccounts() \u0026\u0026 isNormalAccount(name);\n\t}\n\n\tboolean shouldDraw(Renderable renderable, boolean drawingUI)\n\t{\n\t\tif (!config.hideCharacterModels()) return true;\n\n\t\tif (renderable instanceof Player)\n\t\t{\n\t\t\tPlayer player \u003d (Player) renderable;\n\t\t\tString name \u003d player.getName();\n\t\t\treturn name !\u003d null \u0026\u0026 !filteredAccountNames.contains(Text.standardize(name));\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprivate Player getPlayerFromName(String playerName) {\n\t\tString sanitizedName \u003d Text.standardize(playerName);\n\n\t\tPlayer player \u003d null;\n\t\tfor (Player p : client.getPlayers()) {\n\t\t\tif (p.getName().toLowerCase().equals(sanitizedName)) {\n\t\t\t\tplayer \u003d p;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn player;\n\t}\n}\n","filePath":"src\\main\\java\\es\\weedl\\AccountChatFilterPlugin.java"},{"fileName":"AccountIconID.java","content":"package es.weedl;\r\n\r\nimport lombok.Getter;\r\nimport lombok.RequiredArgsConstructor;\r\nimport net.runelite.api.IconID;\r\n\r\n@RequiredArgsConstructor\r\n@Getter\r\npublic enum AccountIconID {\r\n    IRONMAN(IconID.IRONMAN.getIndex()),\r\n    ULTIMATE_IRONMAN(IconID.ULTIMATE_IRONMAN.getIndex()),\r\n    HARDCORE_IRONMAN(IconID.HARDCORE_IRONMAN.getIndex()),\r\n    GROUP_IRONMAN(41),\r\n    HARDCORE_GROUP_IRONMAN(42),\r\n    UNRANKED_GROUP_IRONMAN(43),\r\n    LEAGUE(IconID.LEAGUE.getIndex());\r\n\r\n    private final int index;\r\n\r\n    @Override\r\n    public String toString()\r\n    {\r\n        return \"\u003cimg\u003d\" + String.valueOf(this.index) + \"\u003e\";\r\n    }\r\n}","filePath":"src\\main\\java\\es\\weedl\\AccountIconID.java"},{"fileName":"AccountChatFilterPluginRunner.java","content":"package es.weedl;\r\n\r\nimport net.runelite.client.RuneLite;\r\nimport net.runelite.client.externalplugins.ExternalPluginManager;\r\n\r\npublic class AccountChatFilterPluginRunner\r\n{\r\n    public static void main(String[] args) throws Exception\r\n    {\r\n        ExternalPluginManager.loadBuiltin(AccountChatFilterPlugin.class);\r\n        RuneLite.main(args);\r\n    }\r\n}\r\n","filePath":"src\\test\\java\\es\\weedl\\AccountChatFilterPluginRunner.java"},{"fileName":"AccountChatFilterPluginTest.java","content":"package es.weedl;\n\nimport com.google.inject.Guice;\nimport com.google.inject.testing.fieldbinder.Bind;\nimport javax.inject.Inject;\nimport com.google.inject.testing.fieldbinder.BoundFieldModule;\nimport net.runelite.api.*;\nimport net.runelite.api.clan.ClanChannel;\nimport net.runelite.api.clan.ClanChannelMember;\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.Mock;\nimport org.mockito.junit.MockitoJUnitRunner;\n\nimport static org.junit.Assert.assertFalse;\nimport static org.junit.Assert.assertTrue;\nimport static org.mockito.ArgumentMatchers.*;\nimport static org.mockito.Mockito.mock;\nimport static org.mockito.Mockito.when;\n\n@RunWith(MockitoJUnitRunner.class)\npublic class AccountChatFilterPluginTest\n{\n\tprivate static final String TEST_ACCOUNT_NAME_1 \u003d \"Zezima\";\n\tprivate static final String TEST_ACCOUNT_NAME_2 \u003d \"Kate Micucci\";\n\n\t@Inject\n\tprivate AccountChatFilterPlugin accountChatFilterPlugin;\n\n\t@Mock\n\t@Bind\n\tprivate Client client;\n\n\t@Mock\n\t@Bind\n\tprivate AccountChatFilterConfig accountChatFilterConfig;\n\n\t@Before\n\tpublic void before()\n\t{\n\t\tGuice.createInjector(BoundFieldModule.of(this)).injectMembers(this);\n\t}\n\n\t@Test\n\tpublic void filtersNormalAccountWhenEnabled()\n\t{\n\t\tmockLocalPlayer(TEST_ACCOUNT_NAME_2);\n\t\twhen(accountChatFilterConfig.filterNormalAccounts()).thenReturn(true);\n\t\taccountChatFilterPlugin.updateFilteredAccounts();\n\n\t\tassertTrue(accountChatFilterPlugin.shouldFilter(TEST_ACCOUNT_NAME_1));\n\t}\n\n\t@Test\n\tpublic void filtersIronmenWhenEnabled()\n\t{\n\t\tmockLocalPlayer(TEST_ACCOUNT_NAME_2);\n\t\twhen(accountChatFilterConfig.filterIronmen()).thenReturn(true);\n\t\taccountChatFilterPlugin.updateFilteredAccounts();\n\n\t\tassertTrue(accountChatFilterPlugin.shouldFilter(getTestName(AccountIconID.IRONMAN, TEST_ACCOUNT_NAME_1)));\n\t}\n\n\t@Test\n\tpublic void filtersHardcoreIronmenWhenEnabled()\n\t{\n\t\tmockLocalPlayer(TEST_ACCOUNT_NAME_2);\n\t\twhen(accountChatFilterConfig.filterHardcoreIronmen()).thenReturn(true);\n\t\taccountChatFilterPlugin.updateFilteredAccounts();\n\n\t\tassertTrue(accountChatFilterPlugin.shouldFilter(getTestName(AccountIconID.HARDCORE_IRONMAN, TEST_ACCOUNT_NAME_1)));\n\t}\n\n\t@Test\n\tpublic void filtersUltimateIronmenWhenEnabled()\n\t{\n\t\tmockLocalPlayer(TEST_ACCOUNT_NAME_2);\n\t\twhen(accountChatFilterConfig.filterUltimateIronmen()).thenReturn(true);\n\t\taccountChatFilterPlugin.updateFilteredAccounts();\n\n\t\tassertTrue(accountChatFilterPlugin.shouldFilter(getTestName(AccountIconID.ULTIMATE_IRONMAN, TEST_ACCOUNT_NAME_1)));\n\t}\n\n\t@Test\n\tpublic void filtersGroupIronmenWhenEnabled()\n\t{\n\t\tmockLocalPlayer(TEST_ACCOUNT_NAME_2);\n\t\twhen(accountChatFilterConfig.filterGroupIronmen()).thenReturn(true);\n\t\taccountChatFilterPlugin.updateFilteredAccounts();\n\n\t\tassertTrue(accountChatFilterPlugin.shouldFilter(getTestName(AccountIconID.GROUP_IRONMAN, TEST_ACCOUNT_NAME_1)));\n\t}\n\n\t@Test\n\tpublic void filtersHardcoreGroupIronmenWhenEnabled()\n\t{\n\t\tmockLocalPlayer(TEST_ACCOUNT_NAME_2);\n\t\twhen(accountChatFilterConfig.filterHardcoreGroupIronmen()).thenReturn(true);\n\t\taccountChatFilterPlugin.updateFilteredAccounts();\n\n\t\tassertTrue(accountChatFilterPlugin.shouldFilter(getTestName(AccountIconID.HARDCORE_GROUP_IRONMAN, TEST_ACCOUNT_NAME_1)));\n\t}\n\n\t@Test\n\tpublic void filtersUnrankedGroupIronmenWhenEnabled()\n\t{\n\t\tmockLocalPlayer(TEST_ACCOUNT_NAME_2);\n\t\twhen(accountChatFilterConfig.filterUnrankedGroupIronmen()).thenReturn(true);\n\t\taccountChatFilterPlugin.updateFilteredAccounts();\n\n\t\tassertTrue(accountChatFilterPlugin.shouldFilter(getTestName(AccountIconID.UNRANKED_GROUP_IRONMAN, TEST_ACCOUNT_NAME_1)));\n\t}\n\n\t@Test\n\tpublic void filtersLeagueAccountWhenEnabled()\n\t{\n\t\tmockLocalPlayer(TEST_ACCOUNT_NAME_2);\n\t\twhen(accountChatFilterConfig.filterLeague()).thenReturn(true);\n\t\taccountChatFilterPlugin.updateFilteredAccounts();\n\n\t\tassertTrue(accountChatFilterPlugin.shouldFilter(getTestName(AccountIconID.LEAGUE, TEST_ACCOUNT_NAME_1)));\n\t}\n\n\t@Test\n\tpublic void skipsSelfWhenDisabled()\n\t{\n\t\tmockLocalPlayer(TEST_ACCOUNT_NAME_1);\n\t\twhen(accountChatFilterConfig.filterSelf()).thenReturn(false);\n\t\twhen(accountChatFilterConfig.filterIronmen()).thenReturn(true);\n\t\taccountChatFilterPlugin.updateFilteredAccounts();\n\n\t\tassertFalse(accountChatFilterPlugin.shouldFilter(getTestName(AccountIconID.IRONMAN, TEST_ACCOUNT_NAME_1)));\n\t}\n\n\t@Test\n\tpublic void skipsFriendWhenDisabled()\n\t{\n\t\tmockLocalPlayer(TEST_ACCOUNT_NAME_2);\n\t\tmockIsFriend(TEST_ACCOUNT_NAME_1, true);\n\t\twhen(accountChatFilterConfig.filterFriends()).thenReturn(false);\n\t\twhen(accountChatFilterConfig.filterIronmen()).thenReturn(true);\n\t\taccountChatFilterPlugin.updateFilteredAccounts();\n\n\t\tassertFalse(accountChatFilterPlugin.shouldFilter(getTestName(AccountIconID.IRONMAN, TEST_ACCOUNT_NAME_1)));\n\t}\n\n\t@Test\n\tpublic void skipsFriendsChatWhenDisabled()\n\t{\n\t\tmockLocalPlayer(TEST_ACCOUNT_NAME_2);\n\t\tmockIsFriendChatMember(TEST_ACCOUNT_NAME_1);\n\t\twhen(accountChatFilterConfig.filterFriendsChat()).thenReturn(false);\n\t\twhen(accountChatFilterConfig.filterIronmen()).thenReturn(true);\n\t\taccountChatFilterPlugin.updateFilteredAccounts();\n\n\t\tassertFalse(accountChatFilterPlugin.shouldFilter(getTestName(AccountIconID.IRONMAN, TEST_ACCOUNT_NAME_1)));\n\t}\n\n\t@Test\n\tpublic void skipsClanChatWhenDisabled()\n\t{\n\t\tmockLocalPlayer(TEST_ACCOUNT_NAME_2);\n\t\tmockIsClanChatMember(TEST_ACCOUNT_NAME_1, false);\n\t\twhen(accountChatFilterConfig.filterClanChat()).thenReturn(false);\n\t\twhen(accountChatFilterConfig.filterIronmen()).thenReturn(true);\n\t\taccountChatFilterPlugin.updateFilteredAccounts();\n\n\t\tassertFalse(accountChatFilterPlugin.shouldFilter(getTestName(AccountIconID.IRONMAN, TEST_ACCOUNT_NAME_1)));\n\t}\n\n\t@Test\n\tpublic void skipsGuestClanChatWhenDisabled()\n\t{\n\t\tmockLocalPlayer(TEST_ACCOUNT_NAME_2);\n\t\tmockIsClanChatMember(TEST_ACCOUNT_NAME_1, true);\n\t\twhen(accountChatFilterConfig.filterClanChat()).thenReturn(false);\n\t\twhen(accountChatFilterConfig.filterIronmen()).thenReturn(true);\n\t\taccountChatFilterPlugin.updateFilteredAccounts();\n\n\t\tassertFalse(accountChatFilterPlugin.shouldFilter(getTestName(AccountIconID.IRONMAN, TEST_ACCOUNT_NAME_1)));\n\t}\n\n\tprivate void mockLocalPlayer(final String playerName)\n\t{\n\t\tfinal Player player \u003d mock(Player.class);\n\t\twhen(player.getName()).thenReturn(playerName);\n\t\twhen(client.getLocalPlayer()).thenReturn(player);\n\t}\n\n\tprivate void mockIsFriend(final String playerName, final boolean isFriend)\n\t{\n\t\twhen(client.isFriended(eq(\" \" + playerName), eq(false))).thenReturn(isFriend);\n\t}\n\n\tprivate void mockIsFriendChatMember(final String playerName)\n\t{\n\t\tfinal FriendsChatManager friendsChatManager \u003d mock(FriendsChatManager.class);\n\t\tfinal FriendsChatMember friendsChatMember \u003d mock(FriendsChatMember.class);\n\t\twhen(friendsChatManager.findByName(eq(\" \" + playerName))).thenReturn(friendsChatMember);\n\t\twhen(client.getFriendsChatManager()).thenReturn(friendsChatManager);\n\t}\n\n\tprivate void mockIsClanChatMember(final String playerName, final boolean isGuestClanChannelMember)\n\t{\n\t\tfinal ClanChannelMember clanChannelMember \u003d mock(ClanChannelMember.class);\n\t\tfinal ClanChannel clanChannel \u003d mock(ClanChannel.class);\n\t\twhen(clanChannel.findMember(eq(\" \" + playerName))).thenReturn(clanChannelMember);\n\n\t\tif (isGuestClanChannelMember)\n\t\t{\n\t\t\twhen(client.getClanChannel()).thenReturn(null);\n\t\t\twhen(client.getGuestClanChannel()).thenReturn(clanChannel);\n\t\t}\n\t\telse\n\t\t{\n\t\t\twhen(client.getClanChannel()).thenReturn(clanChannel);\n\t\t}\n\t}\n\n\tprivate String getTestName(final AccountIconID accountIconID, final String playerName)\n\t{\n\t\treturn accountIconID + \" \" + playerName;\n\t}\n}","filePath":"src\\test\\java\\es\\weedl\\AccountChatFilterPluginTest.java"}]},{"commit":"14a96b0c2cf08056ee55f51e50f2499f0dfe7cf3","repository":"https://github.com/JThomasDevs/Easy-Tasks.git","internalName":"easy-tasks","files":[{"fileName":"BirdhouseConfig.java","content":"package com.easytasks;\n\nimport com.easytasks.tasks.birdhouse.BirdhouseMode;\nimport net.runelite.client.config.*;\n\nimport java.awt.Color;\n\n@ConfigGroup(\"birdhouse\")\npublic interface BirdhouseConfig extends Config\n{\n\t@ConfigItem(keyName \u003d \"birdhouseMode\", name \u003d \"Birdhouse mode\", description \u003d \"Item loadout mode: complete birdhouses or logs + seeds\")\n\tdefault BirdhouseMode birdhouseMode() { return BirdhouseMode.BIRDHOUSES; }\n\n\t@ConfigItem(keyName \u003d \"highlightBirdhouses\", name \u003d \"Highlight birdhouses\", description \u003d \"Toggle birdhouse object highlights\")\n\tdefault boolean highlightBirdhouses() { return true; }\n\n\t@ConfigItem(keyName \u003d \"highlightTeleports\", name \u003d \"Highlight teleports\", description \u003d \"Toggle teleport object highlights\")\n\tdefault boolean highlightTeleports() { return true; }\n\n\t@ConfigItem(keyName \u003d \"showItemTracking\", name \u003d \"Show item tracking\", description \u003d \"Toggle item tracking infobox\")\n\tdefault boolean showItemTracking() { return true; }\n\n\t@ConfigItem(keyName \u003d \"showStepGuidance\", name \u003d \"Show step guidance\", description \u003d \"Toggle step guidance infobox\")\n\tdefault boolean showStepGuidance() { return true; }\n\n\t@ConfigItem(keyName \u003d \"emptySlotColor\", name \u003d \"Empty slot color\", description \u003d \"Highlight color for empty ground slots\")\n\tdefault Color emptySlotColor() { return Color.RED; }\n\n\t@ConfigItem(keyName \u003d \"emptyBirdhouseColor\", name \u003d \"Empty birdhouse color\", description \u003d \"Highlight color for placed but empty birdhouses\")\n\tdefault Color emptyBirdhouseColor() { return Color.YELLOW; }\n\n\t@ConfigItem(keyName \u003d \"occupiedBirdhouseColor\", name \u003d \"Occupied birdhouse color\", description \u003d \"Highlight color for occupied birdhouses\")\n\tdefault Color occupiedBirdhouseColor() { return Color.GREEN; }\n\n\t@ConfigItem(keyName \u003d \"teleportColor\", name \u003d \"Teleport color\", description \u003d \"Highlight color for navigation teleports\")\n\tdefault Color teleportColor() { return Color.CYAN; }\n\n\t@ConfigItem(keyName \u003d \"highlightThickness\", name \u003d \"Highlight thickness\", description \u003d \"Outline thickness for highlights (1-5)\")\n\t@Range(min \u003d 1, max \u003d 5)\n\tdefault int highlightThickness() { return 2; }\n}\n","filePath":"src/main/java/com/easytasks/BirdhouseConfig.java"},{"fileName":"TeleportHighlightOverlay.java","content":"package com.easytasks.overlays;\n\nimport com.easytasks.BirdhouseConfig;\nimport com.easytasks.tasks.TaskManager;\nimport com.easytasks.tasks.TaskStep;\nimport com.easytasks.tasks.birdhouse.BirdhouseData;\nimport com.easytasks.tasks.birdhouse.BirdhouseLocation;\nimport com.easytasks.tasks.birdhouse.BirdhouseTask;\nimport net.runelite.api.Client;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.TileObject;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\n\nimport javax.inject.Inject;\nimport java.awt.*;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Optional;\n\npublic class TeleportHighlightOverlay extends Overlay\n{\n\tprivate final Client client;\n\tprivate final BirdhouseConfig config;\n\tprivate final TaskManager taskManager;\n\n\t@Inject\n\tpublic TeleportHighlightOverlay(Client client, BirdhouseConfig config, TaskManager taskManager)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.config \u003d config;\n\t\tthis.taskManager \u003d taskManager;\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (!config.highlightTeleports()) return null;\n\t\tif (!BirdhouseData.isOnFossilIsland(client)) return null;\n\t\tOptional\u003cBirdhouseTask\u003e opt \u003d taskManager.getTaskByType(BirdhouseTask.class);\n\t\tif (opt.isEmpty()) return null;\n\t\tBirdhouseTask task \u003d opt.get();\n\t\tif (!task.isActive()) return null;\n\t\tTaskStep step \u003d task.getCurrentStep();\n\t\tif (step \u003d\u003d null) return null;\n\t\tList\u003cInteger\u003e teleportIds \u003d getTeleportIdsForNextStep(task, step);\n\t\tif (teleportIds.isEmpty()) return null;\n\t\tColor color \u003d config.teleportColor();\n\t\tnet.runelite.api.Scene scene \u003d client.getScene();\n\t\tint plane \u003d client.getPlane();\n\t\tfor (int x \u003d 0; x \u003c 104; x++)\n\t\t{\n\t\t\tfor (int y \u003d 0; y \u003c 104; y++)\n\t\t\t{\n\t\t\t\tnet.runelite.api.Tile tile \u003d scene.getTiles()[plane][x][y];\n\t\t\t\tif (tile \u003d\u003d null) continue;\n\t\t\t\tfor (TileObject obj : tile.getGameObjects())\n\t\t\t\t{\n\t\t\t\t\tif (obj \u003d\u003d null) continue;\n\t\t\t\t\tif (!teleportIds.contains(obj.getId())) continue;\n\t\t\t\t\tShape hull \u003d obj.getClickbox();\n\t\t\t\t\tif (hull \u003d\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tLocalPoint lp \u003d obj.getLocalLocation();\n\t\t\t\t\t\thull \u003d Perspective.getCanvasTilePoly(client, lp);\n\t\t\t\t\t}\n\t\t\t\t\tif (hull !\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tOverlayUtil.renderPolygon(graphics, hull, color, new BasicStroke(config.highlightThickness()));\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate List\u003cInteger\u003e getTeleportIdsForNextStep(BirdhouseTask task, TaskStep step)\n\t{\n\t\tWorldPoint targetWp \u003d step.getLocation();\n\t\tList\u003cBirdhouseLocation\u003e ordered \u003d task.getLocationsInRouteOrder();\n\t\tint targetIndex \u003d -1;\n\t\tBirdhouseLocation targetLoc \u003d null;\n\t\tfor (int i \u003d 0; i \u003c ordered.size(); i++)\n\t\t{\n\t\t\tif (ordered.get(i).getWorldPoint().equals(targetWp))\n\t\t\t{\n\t\t\t\ttargetIndex \u003d i;\n\t\t\t\ttargetLoc \u003d ordered.get(i);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (targetLoc \u003d\u003d null) return List.of();\n\t\tList\u003cInteger\u003e ids \u003d new ArrayList\u003c\u003e(targetLoc.getTeleportObjectIds());\n\t\t// Only highlight mushroom tree when moving between (Tar Swamp or Forest) and (Verdant Valley N/S)\n\t\tBirdhouseLocation fromLoc \u003d targetIndex \u003e 0 ? ordered.get(targetIndex - 1) : null;\n\t\tif (fromLoc !\u003d null \u0026\u0026 isMushroomTreeNeeded(fromLoc, targetLoc))\n\t\t\tids.add(BirdhouseData.MUSHROOM_TREE_TO_VALLEY_OBJECT_ID);\n\t\treturn ids;\n\t}\n\n\tprivate static boolean isMushroomTreeNeeded(BirdhouseLocation from, BirdhouseLocation to)\n\t{\n\t\tboolean fromValley \u003d isVerdantValley(from.getWorldPoint());\n\t\tboolean toValley \u003d isVerdantValley(to.getWorldPoint());\n\t\tboolean fromForestOrSwamp \u003d isMushroomForestOrTarSwamp(from.getWorldPoint());\n\t\tboolean toForestOrSwamp \u003d isMushroomForestOrTarSwamp(to.getWorldPoint());\n\t\treturn (fromValley \u0026\u0026 toForestOrSwamp) || (fromForestOrSwamp \u0026\u0026 toValley);\n\t}\n\n\tprivate static boolean isVerdantValley(WorldPoint wp)\n\t{\n\t\treturn wp.equals(BirdhouseData.VERDANT_VALLEY_NORTH) || wp.equals(BirdhouseData.VERDANT_VALLEY_SOUTH);\n\t}\n\n\tprivate static boolean isMushroomForestOrTarSwamp(WorldPoint wp)\n\t{\n\t\treturn wp.equals(BirdhouseData.MUSHROOM_FOREST) || wp.equals(BirdhouseData.TAR_SWAMP);\n\t}\n}\n","filePath":"src/main/java/com/easytasks/overlays/TeleportHighlightOverlay.java"},{"fileName":"StepGuidanceOverlay.java","content":"package com.easytasks.overlays;\n\nimport com.easytasks.BirdhouseConfig;\nimport com.easytasks.tasks.TaskManager;\nimport com.easytasks.tasks.TaskStep;\nimport com.easytasks.tasks.birdhouse.BirdhouseTask;\nimport net.runelite.api.Client;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.LineComponent;\nimport net.runelite.client.ui.overlay.components.PanelComponent;\n\nimport javax.inject.Inject;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.util.Optional;\n\n/**\n * Text overlay showing current step guidance on screen (like farming-helper\u0027s EasyFarmingOverlayInfoBox).\n */\npublic class StepGuidanceOverlay extends Overlay\n{\n\tprivate final Client client;\n\tprivate final BirdhouseConfig config;\n\tprivate final TaskManager taskManager;\n\tprivate final PanelComponent panelComponent \u003d new PanelComponent();\n\n\t@Inject\n\tpublic StepGuidanceOverlay(Client client, BirdhouseConfig config, TaskManager taskManager)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.config \u003d config;\n\t\tthis.taskManager \u003d taskManager;\n\t\tsetPosition(OverlayPosition.TOP_LEFT);\n\t\tsetLayer(OverlayLayer.ABOVE_WIDGETS);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (!config.showStepGuidance()) return null;\n\t\tOptional\u003cBirdhouseTask\u003e opt \u003d taskManager.getTaskByType(BirdhouseTask.class);\n\t\tif (opt.isEmpty() || !opt.get().isActive()) return null;\n\n\t\tBirdhouseTask task \u003d opt.get();\n\t\tTaskStep step \u003d task.getCurrentStep();\n\t\tif (step \u003d\u003d null) return null;\n\n\t\tpanelComponent.getChildren().clear();\n\t\tWorldPoint playerWp \u003d client.getLocalPlayer() !\u003d null ? client.getLocalPlayer().getWorldLocation() : null;\n\t\tint current \u003d task.getCompletedSteps() + 1;\n\t\tint total \u003d task.getTotalSteps();\n\t\tString instruction \u003d task.getCurrentStepInstruction(playerWp);\n\t\tif (instruction \u003d\u003d null) instruction \u003d step.getDescription();\n\t\tString text \u003d current + \"/\" + total + \": \" + instruction;\n\t\tpanelComponent.getChildren().add(LineComponent.builder().left(text).build());\n\t\treturn panelComponent.render(graphics);\n\t}\n}\n","filePath":"src/main/java/com/easytasks/overlays/StepGuidanceOverlay.java"},{"fileName":"SeedHighlightOverlay.java","content":"package com.easytasks.overlays;\n\nimport com.easytasks.BirdhouseConfig;\nimport com.easytasks.tasks.TaskManager;\nimport com.easytasks.tasks.birdhouse.BirdhouseData;\nimport com.easytasks.tasks.birdhouse.BirdhouseTask;\nimport net.runelite.api.widgets.WidgetItem;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.overlay.WidgetItemOverlay;\n\nimport javax.inject.Inject;\nimport java.awt.*;\nimport java.awt.image.BufferedImage;\n\npublic class SeedHighlightOverlay extends WidgetItemOverlay\n{\n\tprivate final BirdhouseConfig config;\n\tprivate final TaskManager taskManager;\n\tprivate final ItemManager itemManager;\n\n\tprivate static final Color USE_ON_BIRDHOUSE_COLOR \u003d Color.PINK;\n\n\t@Inject\n\tpublic SeedHighlightOverlay(BirdhouseConfig config, TaskManager taskManager, ItemManager itemManager)\n\t{\n\t\tthis.config \u003d config;\n\t\tthis.taskManager \u003d taskManager;\n\t\tthis.itemManager \u003d itemManager;\n\t\tshowOnInventory();\n\t}\n\n\t@Override\n\tpublic void renderItemOverlay(Graphics2D graphics, int itemId, WidgetItem widgetItem)\n\t{\n\t\tif (!config.highlightBirdhouses()) return;\n\t\tvar opt \u003d taskManager.getTaskByType(BirdhouseTask.class);\n\t\tif (opt.isEmpty()) return;\n\t\tBirdhouseTask task \u003d opt.get();\n\t\tif (!task.isActive() || !task.isCurrentStepFillWithSeeds()) return;\n\t\t// Highlight any valid birdhouse seed (all 6 types), not just the configured seed\n\t\tif (!BirdhouseData.SEED_IDS.contains(itemId)) return;\n\t\tRectangle bounds \u003d widgetItem.getCanvasBounds();\n\t\tBufferedImage outline \u003d itemManager.getItemOutline(itemId, widgetItem.getQuantity(), USE_ON_BIRDHOUSE_COLOR);\n\t\tif (outline !\u003d null)\n\t\t\tgraphics.drawImage(outline, (int) bounds.getX(), (int) bounds.getY(), null);\n\t\telse\n\t\t{\n\t\t\tgraphics.setColor(USE_ON_BIRDHOUSE_COLOR);\n\t\t\tgraphics.setStroke(new BasicStroke(2));\n\t\t\tgraphics.drawRect(bounds.x, bounds.y, bounds.width, bounds.height);\n\t\t}\n\t}\n}\n","filePath":"src/main/java/com/easytasks/overlays/SeedHighlightOverlay.java"},{"fileName":"BirdhouseHighlightOverlay.java","content":"package com.easytasks.overlays;\n\nimport com.easytasks.BirdhouseConfig;\nimport com.easytasks.tasks.TaskManager;\nimport com.easytasks.tasks.birdhouse.BirdhouseData;\nimport com.easytasks.tasks.birdhouse.BirdhouseLocation;\nimport com.easytasks.tasks.birdhouse.BirdhouseTask;\nimport net.runelite.api.Client;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.TileObject;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\n\nimport javax.inject.Inject;\nimport java.awt.*;\nimport java.util.Optional;\n\npublic class BirdhouseHighlightOverlay extends Overlay\n{\n\tprivate final Client client;\n\tprivate final BirdhouseConfig config;\n\tprivate final TaskManager taskManager;\n\n\t@Inject\n\tpublic BirdhouseHighlightOverlay(Client client, BirdhouseConfig config, TaskManager taskManager)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.config \u003d config;\n\t\tthis.taskManager \u003d taskManager;\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (!config.highlightBirdhouses()) return null;\n\t\tif (!BirdhouseData.isOnFossilIsland(client)) return null;\n\t\tOptional\u003cBirdhouseTask\u003e opt \u003d taskManager.getTaskByType(BirdhouseTask.class);\n\t\tif (opt.isEmpty()) return null;\n\t\tBirdhouseTask task \u003d opt.get();\n\t\tif (!task.isActive()) return null;\n\t\tnet.runelite.api.Scene scene \u003d client.getScene();\n\t\tint plane \u003d client.getPlane();\n\t\tBirdhouseLocation currentStepLoc \u003d task.getCurrentStepLocation();\n\t\tboolean fillWithSeeds \u003d task.isCurrentStepFillWithSeeds();\n\t\tfor (BirdhouseLocation loc : task.getLocationsInRouteOrder())\n\t\t{\n\t\t\tif (loc.isVisited()) continue;\n\t\t\tColor color;\n\t\t\tif (fillWithSeeds \u0026\u0026 loc \u003d\u003d currentStepLoc)\n\t\t\t\tcolor \u003d Color.PINK;\n\t\t\telse if (loc.isEmpty(client)) color \u003d config.emptySlotColor();\n\t\t\telse if (loc.isPlaced(client)) color \u003d config.emptyBirdhouseColor();\n\t\t\telse if (loc.isOccupied(client)) color \u003d config.occupiedBirdhouseColor();\n\t\t\telse color \u003d config.emptySlotColor();\n\t\t\tWorldPoint wp \u003d loc.getWorldPoint();\n\t\t\tLocalPoint localPoint \u003d LocalPoint.fromWorld(client, wp);\n\t\t\tif (localPoint \u003d\u003d null) continue;\n\t\t\tShape hull \u003d null;\n\t\t\tnet.runelite.api.Tile tile \u003d scene.getTiles()[plane][localPoint.getSceneX()][localPoint.getSceneY()];\n\t\t\tif (tile !\u003d null)\n\t\t\t{\n\t\t\t\tfor (TileObject obj : tile.getGameObjects())\n\t\t\t\t{\n\t\t\t\t\tif (obj \u003d\u003d null) continue;\n\t\t\t\t\tShape box \u003d obj.getClickbox();\n\t\t\t\t\tif (box !\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\thull \u003d box;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (hull \u003d\u003d null)\n\t\t\t\thull \u003d Perspective.getCanvasTilePoly(client, localPoint);\n\t\t\tif (hull !\u003d null)\n\t\t\t\tOverlayUtil.renderPolygon(graphics, hull, color, new BasicStroke(config.highlightThickness()));\n\t\t}\n\t\treturn null;\n\t}\n}\n","filePath":"src/main/java/com/easytasks/overlays/BirdhouseHighlightOverlay.java"},{"fileName":"BirdhousePlugin.java","content":"package com.easytasks;\n\nimport com.easytasks.tasks.Task;\nimport com.easytasks.tasks.TaskManager;\nimport com.easytasks.tasks.birdhouse.BirdhouseTask;\nimport com.easytasks.ui.BirdhouseSidePanel;\nimport com.easytasks.overlays.BirdhouseHighlightOverlay;\nimport com.easytasks.overlays.SeedHighlightOverlay;\nimport com.easytasks.overlays.StepGuidanceOverlay;\nimport com.easytasks.overlays.TeleportHighlightOverlay;\nimport com.google.inject.Provides;\nimport javax.inject.Provider;\nimport com.easytasks.tasks.birdhouse.BirdhouseMode;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.ItemContainerChanged;\nimport net.runelite.api.events.MenuOptionClicked;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.ui.overlay.infobox.InfoBoxManager;\nimport net.runelite.client.util.ImageUtil;\n\nimport javax.inject.Inject;\nimport java.awt.*;\nimport java.awt.image.BufferedImage;\nimport java.util.ArrayList;\nimport java.util.List;\nimport lombok.extern.slf4j.Slf4j;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Easy Tasks\",\n\tdescription \u003d \"Assists with birdhouse runs on Fossil Island\",\n\ttags \u003d {\"birdhouse\", \"hunter\", \"fossil island\", \"skilling\"}\n)\npublic class BirdhousePlugin extends Plugin implements TaskManager.TaskStateListener\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate BirdhouseConfig config;\n\n\t@Inject\n\tprivate TaskManager taskManager;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate BirdhouseHighlightOverlay birdhouseHighlightOverlay;\n\n\t@Inject\n\tprivate SeedHighlightOverlay seedHighlightOverlay;\n\n\t@Inject\n\tprivate TeleportHighlightOverlay teleportHighlightOverlay;\n\n\t@Inject\n\tprivate StepGuidanceOverlay stepGuidanceOverlay;\n\n\t@Inject\n\tprivate ItemManager itemManager;\n\n\t@Inject\n\tprivate ClientToolbar clientToolbar;\n\n\t@Inject\n\tprivate BirdhouseSidePanel sidePanel;\n\n\t@Inject\n\tprivate Provider\u003cBirdhouseTask\u003e birdhouseTaskProvider;\n\n\t@Inject\n\tprivate InfoBoxManager infoBoxManager;\n\n\tprivate NavigationButton navButton;\n\tprivate List\u003ccom.easytasks.infoboxes.ItemTrackingInfoBox\u003e itemTrackingInfoBoxes \u003d new ArrayList\u003c\u003e();\n\n\t@Provides\n\tBirdhouseConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(BirdhouseConfig.class);\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\toverlayManager.add(birdhouseHighlightOverlay);\n\t\toverlayManager.add(seedHighlightOverlay);\n\t\toverlayManager.add(teleportHighlightOverlay);\n\t\toverlayManager.add(stepGuidanceOverlay);\n\t\tBufferedImage icon \u003d createNavIcon();\n\t\tnavButton \u003d NavigationButton.builder()\n\t\t\t.icon(icon)\n\t\t\t.panel(sidePanel)\n\t\t\t.tooltip(\"Easy Tasks\")\n\t\t\t.build();\n\t\tclientToolbar.addNavigation(navButton);\n\n\t\tsidePanel.setOnStartRequested(this::startBirdhouseRun);\n\t\tsidePanel.setOnStopRequested(this::stopBirdhouseRun);\n\t\tsidePanel.setOnItemListRefreshRequested(this::refreshItemTrackingInfoBox);\n\t\ttaskManager.addTaskStateListener(this);\n\n\t\tlog.debug(\"Easy Tasks started!\");\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\ttaskManager.removeTaskStateListener(this);\n\t\tstopBirdhouseRun();\n\t\tremoveBirdhouseInfoBoxes();\n\t\tclientToolbar.removeNavigation(navButton);\n\t\toverlayManager.remove(stepGuidanceOverlay);\n\t\toverlayManager.remove(teleportHighlightOverlay);\n\t\toverlayManager.remove(seedHighlightOverlay);\n\t\toverlayManager.remove(birdhouseHighlightOverlay);\n\t\tlog.debug(\"Easy Tasks stopped!\");\n\t}\n\n\tprivate void startBirdhouseRun()\n\t{\n\t\tint[] routeOrder \u003d sidePanel.getRouteOrder();\n\t\tBirdhouseMode mode \u003d config.birdhouseMode();\n\t\tclientThread.invokeLater(() -\u003e {\n\t\t\tBirdhouseTask task \u003d birdhouseTaskProvider.get();\n\t\t\ttask.setRouteOrder(routeOrder);\n\t\t\ttask.setMode(mode);\n\t\t\ttask.setOnCompleteCallback(this::onTaskComplete);\n\t\t\ttaskManager.registerTask(task);\n\n\t\t\tremoveBirdhouseInfoBoxes();\n\t\t\tif (config.showItemTracking())\n\t\t\t{\n\t\t\t\titemTrackingInfoBoxes \u003d new ArrayList\u003c\u003e();\n\t\t\t\tfor (Task.RequiredItem ri : task.getRequiredItems())\n\t\t\t\t{\n\t\t\t\t\tBufferedImage itemBoxImage \u003d itemManager.getImage(ri.getItemId());\n\t\t\t\t\tif (itemBoxImage \u003d\u003d null) itemBoxImage \u003d createNavIcon();\n\t\t\t\t\tcom.easytasks.infoboxes.ItemTrackingInfoBox box \u003d new com.easytasks.infoboxes.ItemTrackingInfoBox(itemBoxImage, this, ri, task, client, itemManager);\n\t\t\t\t\tinfoBoxManager.addInfoBox(box);\n\t\t\t\t\titemTrackingInfoBoxes.add(box);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t\titemTrackingInfoBoxes \u003d new ArrayList\u003c\u003e();\n\t\t});\n\t}\n\n\tprivate void stopBirdhouseRun()\n\t{\n\t\ttaskManager.getTaskByType(BirdhouseTask.class).ifPresent(task -\u003e {\n\t\t\ttaskManager.unregisterTask(task);\n\t\t\tclientThread.invokeLater(() -\u003e\n\t\t\t\tclient.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"Easy Tasks: Run stopped.\", null));\n\t\t});\n\t}\n\n\t/** Called when the final location completes; stops the run (unregisters task). */\n\tprivate void onTaskComplete()\n\t{\n\t\ttaskManager.getTaskByType(BirdhouseTask.class).ifPresent(task -\u003e {\n\t\t\ttaskManager.unregisterTask(task);\n\t\t});\n\t\t// Ensure side panel button and progress reset to \"Start Birdhouse Run\".\n\t\tsidePanel.setRunIdle();\n\t}\n\n\tprivate void applyConfigToTask(BirdhouseTask task)\n\t{\n\t\ttask.setMode(config.birdhouseMode());\n\t\ttask.setRouteOrder(sidePanel.getRouteOrder());\n\t}\n\n\tprivate void refreshItemTrackingInfoBox()\n\t{\n\t\tfor (com.easytasks.infoboxes.ItemTrackingInfoBox box : itemTrackingInfoBoxes)\n\t\t\tbox.update();\n\t}\n\n\tprivate void removeBirdhouseInfoBoxes()\n\t{\n\t\tfor (com.easytasks.infoboxes.ItemTrackingInfoBox box : itemTrackingInfoBoxes)\n\t\t\tinfoBoxManager.removeInfoBox(box);\n\t\titemTrackingInfoBoxes.clear();\n\t}\n\n\tprivate static BufferedImage createNavIcon()\n\t{\n\t\tBufferedImage img \u003d new BufferedImage(24, 24, BufferedImage.TYPE_INT_ARGB);\n\t\tGraphics2D g \u003d img.createGraphics();\n\t\tg.setColor(new Color(70, 130, 180));\n\t\tg.fillRoundRect(0, 0, 24, 24, 4, 4);\n\t\tg.setColor(Color.WHITE);\n\t\tg.setFont(new Font(\"SansSerif\", Font.BOLD, 12));\n\t\tg.drawString(\"ET\", 4, 17);\n\t\tg.dispose();\n\t\treturn ImageUtil.resizeImage(img, 24, 24);\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged event)\n\t{\n\t\tif (event.getGameState() \u003d\u003d GameState.LOGIN_SCREEN)\n\t\t{\n\t\t\tstopBirdhouseRun();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick event)\n\t{\n\t\ttaskManager.getTaskByType(BirdhouseTask.class).ifPresent(BirdhouseTask::checkProximityAndAdvance);\n\t}\n\n\t@Subscribe\n\tpublic void onMenuOptionClicked(MenuOptionClicked event)\n\t{\n\t\ttaskManager.getTaskByType(BirdhouseTask.class).ifPresent(task -\u003e\n\t\t\ttask.onMenuOptionClicked(event.getMenuOption(), event.getId(), event.getParam0(), event.getParam1()));\n\t}\n\n\t@Subscribe\n\tpublic void onItemContainerChanged(ItemContainerChanged event)\n\t{\n\t\tif (event.getContainerId() !\u003d net.runelite.api.InventoryID.INVENTORY.getId())\n\t\t\treturn;\n\t\tfor (com.easytasks.infoboxes.ItemTrackingInfoBox box : itemTrackingInfoBoxes)\n\t\t\tbox.update();\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif (!\"birdhouse\".equals(event.getGroup())) return;\n\t\tsidePanel.refreshFromConfig();\n\t\ttaskManager.getTaskByType(BirdhouseTask.class).ifPresent(this::applyConfigToTask);\n\t\tsidePanel.refreshItemList();\n\t}\n\n\t@Override\n\tpublic void onTaskStateChanged(Task task)\n\t{\n\t\t// Step guidance is shown only via StepGuidanceOverlay, not as an infobox.\n\t}\n}\n","filePath":"src/main/java/com/easytasks/BirdhousePlugin.java"},{"fileName":"BirdhouseSidePanel.java","content":"package com.easytasks.ui;\n\nimport com.easytasks.BirdhouseConfig;\nimport com.easytasks.tasks.Task;\nimport com.easytasks.tasks.TaskManager;\nimport com.easytasks.tasks.birdhouse.BirdhouseTask;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.ui.PluginPanel;\n\nimport javax.inject.Inject;\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.datatransfer.DataFlavor;\nimport java.awt.datatransfer.StringSelection;\nimport java.awt.datatransfer.Transferable;\nimport java.util.Optional;\n\npublic class BirdhouseSidePanel extends PluginPanel implements TaskManager.TaskStateListener\n{\n\tprivate static final String[] LOCATION_NAMES \u003d {\"Verdant Valley (North)\", \"Verdant Valley (South)\", \"Mushroom Forest\", \"Tar Swamp\"};\n\n\tprivate static final Color BG_DARK \u003d new Color(0x2b2b2b);\n\tprivate static final Color BG_PANEL \u003d new Color(0x1e1e1e);\n\tprivate static final Color FG_LIGHT \u003d new Color(0xe0e0e0);\n\tprivate static final Color BUTTON_BG \u003d new Color(0x1a1a1a);\n\tprivate static final Color BUTTON_FG \u003d Color.WHITE;\n\tprivate static final Color PROGRESS_BG \u003d new Color(0x333333);\n\tprivate static final Color PROGRESS_FG \u003d new Color(0x4a9eff);\n\n\tprivate final BirdhouseConfig config;\n\tprivate final TaskManager taskManager;\n\tprivate final ConfigManager configManager;\n\n\tprivate final JButton startStopButton;\n\tprivate final JProgressBar progressBar;\n\tprivate final JLabel progressLabel;\n\tprivate final JList\u003cInteger\u003e routeList;\n\tprivate final DefaultListModel\u003cInteger\u003e routeModel;\n\n\tprivate Runnable onStartRequested;\n\tprivate Runnable onStopRequested;\n\tprivate Runnable onItemListRefreshRequested;\n\n\t@Inject\n\tpublic BirdhouseSidePanel(BirdhouseConfig config, TaskManager taskManager, ConfigManager configManager)\n\t{\n\t\tthis.config \u003d config;\n\t\tthis.taskManager \u003d taskManager;\n\t\tthis.configManager \u003d configManager;\n\n\t\tsetLayout(new BorderLayout(0, 8));\n\t\tsetBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n\t\tsetBackground(BG_DARK);\n\n\t\tJPanel header \u003d new JPanel(new FlowLayout(FlowLayout.LEFT, 0, 0));\n\t\theader.setBackground(BG_DARK);\n\t\tJLabel title \u003d new JLabel(\"Pick a birdhouse run:\");\n\t\ttitle.setFont(title.getFont().deriveFont(Font.PLAIN, 13f));\n\t\ttitle.setForeground(FG_LIGHT);\n\t\theader.add(title);\n\t\tadd(header, BorderLayout.NORTH);\n\n\t\tJPanel center \u003d new JPanel();\n\t\tcenter.setLayout(new BoxLayout(center, BoxLayout.Y_AXIS));\n\t\tcenter.setBackground(BG_DARK);\n\n\t\tstartStopButton \u003d new JButton(\"Start Birdhouse Run\");\n\t\tstartStopButton.addActionListener(e -\u003e toggleRun());\n\t\tstyleButton(startStopButton);\n\t\tcenter.add(startStopButton);\n\t\tcenter.add(Box.createVerticalStrut(10));\n\n\t\tprogressBar \u003d new JProgressBar(0, 100);\n\t\tprogressBar.setValue(0);\n\t\tprogressBar.setPreferredSize(new Dimension(0, 14));\n\t\tprogressBar.setBackground(PROGRESS_BG);\n\t\tprogressBar.setForeground(PROGRESS_FG);\n\t\tcenter.add(progressBar);\n\t\tprogressLabel \u003d new JLabel(\"0/4 locations completed\");\n\t\tprogressLabel.setForeground(FG_LIGHT);\n\t\tprogressLabel.setAlignmentX(Component.LEFT_ALIGNMENT);\n\t\tcenter.add(progressLabel);\n\t\tcenter.add(Box.createVerticalStrut(12));\n\n\t\tJLabel routeTitle \u003d new JLabel(\"Route order (drag to reorder)\");\n\t\trouteTitle.setForeground(FG_LIGHT);\n\t\trouteTitle.setAlignmentX(Component.LEFT_ALIGNMENT);\n\t\tcenter.add(routeTitle);\n\t\tcenter.add(Box.createVerticalStrut(4));\n\t\trouteModel \u003d new DefaultListModel\u003c\u003e();\n\t\trouteList \u003d new JList\u003c\u003e(routeModel);\n\t\trouteList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);\n\t\trouteList.setDragEnabled(true);\n\t\trouteList.setDropMode(DropMode.INSERT);\n\t\trouteList.setTransferHandler(new RouteOrderTransferHandler());\n\t\trouteList.setBackground(BG_PANEL);\n\t\trouteList.setForeground(FG_LIGHT);\n\t\trouteList.setSelectionBackground(new Color(0x404040));\n\t\trouteList.setSelectionForeground(FG_LIGHT);\n\t\trouteList.setCellRenderer((list, value, index, isSelected, cellHasFocus) -\u003e {\n\t\t\tString display \u003d getRouteDisplayName(value);\n\t\t\tJLabel l \u003d new JLabel((index + 1) + \". \" + display);\n\t\t\tl.setOpaque(true);\n\t\t\tl.setBackground(isSelected ? list.getSelectionBackground() : BG_PANEL);\n\t\t\tl.setForeground(isSelected ? list.getSelectionForeground() : FG_LIGHT);\n\t\t\treturn l;\n\t\t});\n\t\trouteList.setVisibleRowCount(4);\n\t\trouteList.setPreferredSize(new Dimension(0, 80));\n\t\tJScrollPane routeScroll \u003d new JScrollPane(routeList);\n\t\trouteScroll.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_NEVER);\n\t\trouteScroll.setBackground(BG_DARK);\n\t\trouteScroll.getViewport().setBackground(BG_PANEL);\n\t\tcenter.add(routeScroll);\n\n\t\tJScrollPane scroll \u003d new JScrollPane(center);\n\t\tscroll.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);\n\t\tscroll.setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 0));\n\t\tscroll.getViewport().setBackground(BG_DARK);\n\t\tadd(scroll, BorderLayout.CENTER);\n\t}\n\n\t@Override\n\tpublic void addNotify()\n\t{\n\t\tsuper.addNotify();\n\t\ttaskManager.addTaskStateListener(this);\n\t\trefreshRouteOrderFromConfig();\n\t}\n\n\t@Override\n\tpublic void removeNotify()\n\t{\n\t\ttaskManager.removeTaskStateListener(this);\n\t\tsuper.removeNotify();\n\t}\n\n\tprivate static void styleButton(JButton btn)\n\t{\n\t\tbtn.setBackground(BUTTON_BG);\n\t\tbtn.setForeground(BUTTON_FG);\n\t\tbtn.setFocusPainted(false);\n\t\tbtn.setBorder(BorderFactory.createLineBorder(new Color(0x444444)));\n\t\tbtn.setPreferredSize(new Dimension(0, 28));\n\t\tbtn.setMaximumSize(new Dimension(Integer.MAX_VALUE, 28));\n\t}\n\n\t@SuppressWarnings(\"boxing\")\n\tprivate static String getRouteDisplayName(Object value)\n\t{\n\t\tif (value \u003d\u003d null || !(value instanceof Integer))\n\t\t\treturn value \u003d\u003d null ? \"Unknown\" : String.valueOf(value);\n\t\tint idx \u003d (Integer) value;\n\t\tif (idx \u003c 0 || idx \u003e\u003d LOCATION_NAMES.length)\n\t\t\treturn \"Unknown\";\n\t\treturn LOCATION_NAMES[idx];\n\t}\n\n\tprivate void toggleRun()\n\t{\n\t\tOptional\u003cBirdhouseTask\u003e existing \u003d taskManager.getTaskByType(BirdhouseTask.class);\n\t\tif (existing.isPresent())\n\t\t{\n\t\t\tif (onStopRequested !\u003d null) onStopRequested.run();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (onStartRequested !\u003d null) onStartRequested.run();\n\t\t}\n\t}\n\n\tpublic void setOnStartRequested(Runnable r) { onStartRequested \u003d r; }\n\tpublic void setOnStopRequested(Runnable r) { onStopRequested \u003d r; }\n\tpublic void setOnItemListRefreshRequested(Runnable r) { onItemListRefreshRequested \u003d r; }\n\n\t/** Refreshes the item checklist (e.g. required-items infobox). Called when config changes. */\n\tpublic void refreshItemList()\n\t{\n\t\tif (onItemListRefreshRequested !\u003d null)\n\t\t\tonItemListRefreshRequested.run();\n\t}\n\n\t@Override\n\tpublic void onTaskRegistered(Task task)\n\t{\n\t\tSwingUtilities.invokeLater(() -\u003e updateForTask(task));\n\t}\n\n\t@Override\n\tpublic void onTaskUnregistered(Task task)\n\t{\n\t\tSwingUtilities.invokeLater(this::updateIdle);\n\t}\n\n\t@Override\n\tpublic void onTaskStateChanged(Task task)\n\t{\n\t\tSwingUtilities.invokeLater(() -\u003e updateForTask(task));\n\t}\n\n\tprivate void updateForTask(Task task)\n\t{\n\t\tif (!(task instanceof BirdhouseTask)) return;\n\t\tBirdhouseTask bt \u003d (BirdhouseTask) task;\n\t\tstartStopButton.setText(\"Stop Birdhouse Run\");\n\t\tprogressBar.setValue(bt.getProgress());\n\t\tprogressLabel.setText(bt.getCompletedSteps() + \"/\" + bt.getTotalSteps() + \" locations completed\");\n\t}\n\n\tprivate void updateIdle()\n\t{\n\t\tstartStopButton.setText(\"Start Birdhouse Run\");\n\t\tprogressBar.setValue(0);\n\t\tprogressLabel.setText(\"0/4 locations completed\");\n\t}\n\n\t/** Called when the run completes or stops so the button and progress reset. Safe to call from any thread. */\n\tpublic void setRunIdle()\n\t{\n\t\tSwingUtilities.invokeLater(this::updateIdle);\n\t}\n\n\tprivate void refreshRouteOrderFromConfig()\n\t{\n\t\trouteModel.clear();\n\t\tString order \u003d configManager.getConfiguration(\"birdhouse\", \"routeOrder\");\n\t\tif (order \u003d\u003d null || order.isBlank()) order \u003d \"0,1,2,3\";\n\t\tjava.util.Set\u003cInteger\u003e added \u003d new java.util.HashSet\u003c\u003e();\n\t\tfor (String idxStr : order.split(\",\"))\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tint i \u003d Integer.parseInt(idxStr.trim());\n\t\t\t\tif (i \u003e\u003d 0 \u0026\u0026 i \u003c 4 \u0026\u0026 added.add(i)) routeModel.addElement(i);\n\t\t\t}\n\t\t\tcatch (NumberFormatException ignored) {}\n\t\t}\n\t\tfor (int i \u003d 0; i \u003c 4; i++)\n\t\t\tif (!added.contains(i)) routeModel.addElement(i);\n\t}\n\n\tprivate void persistRouteOrder()\n\t{\n\t\tStringBuilder sb \u003d new StringBuilder();\n\t\tfor (int i \u003d 0; i \u003c routeModel.getSize(); i++)\n\t\t{\n\t\t\tif (i \u003e 0) sb.append(\",\");\n\t\t\tsb.append(routeModel.get(i));\n\t\t}\n\t\tconfigManager.setConfiguration(\"birdhouse\", \"routeOrder\", sb.toString());\n\t}\n\n\t/** Plan 4.1: Drag-and-drop reorder; persists routeOrder config immediately. */\n\tprivate class RouteOrderTransferHandler extends TransferHandler\n\t{\n\t\tprivate int sourceIndex \u003d -1;\n\n\t\t@Override\n\t\tprotected Transferable createTransferable(JComponent c)\n\t\t{\n\t\t\tif (!(c instanceof JList)) return null;\n\t\t\t@SuppressWarnings(\"unchecked\")\n\t\t\tJList\u003cInteger\u003e list \u003d (JList\u003cInteger\u003e) c;\n\t\t\tsourceIndex \u003d list.getSelectedIndex();\n\t\t\tif (sourceIndex \u003c 0 || sourceIndex \u003e\u003d routeModel.getSize()) return null;\n\t\t\treturn new StringSelection(sourceIndex + \":\" + routeModel.get(sourceIndex));\n\t\t}\n\n\t\t@Override\n\t\tpublic int getSourceActions(JComponent c) { return MOVE; }\n\n\t\t@Override\n\t\tpublic boolean canImport(TransferHandler.TransferSupport support)\n\t\t{\n\t\t\tif (!support.isDrop() || !support.isDataFlavorSupported(DataFlavor.stringFlavor)) return false;\n\t\t\tJList.DropLocation dl \u003d (JList.DropLocation) support.getDropLocation();\n\t\t\treturn dl.getIndex() \u003e\u003d 0 \u0026\u0026 dl.getIndex() \u003c\u003d routeModel.getSize();\n\t\t}\n\n\t\t@Override\n\t\tpublic boolean importData(TransferHandler.TransferSupport support)\n\t\t{\n\t\t\tif (!canImport(support)) return false;\n\t\t\ttry\n\t\t\t{\n\t\t\t\tString data \u003d (String) support.getTransferable().getTransferData(DataFlavor.stringFlavor);\n\t\t\t\tString[] parts \u003d data.split(\":\");\n\t\t\t\tif (parts.length !\u003d 2) return false;\n\t\t\t\tint from \u003d Integer.parseInt(parts[0]);\n\t\t\t\tint value \u003d Integer.parseInt(parts[1]);\n\t\t\t\tint dropIndex \u003d ((JList.DropLocation) support.getDropLocation()).getIndex();\n\t\t\t\tif (from \u003d\u003d dropIndex || from \u003d\u003d dropIndex - 1) return true;\n\t\t\t\trouteModel.remove(from);\n\t\t\t\tint insert \u003d dropIndex \u003e from ? dropIndex - 1 : dropIndex;\n\t\t\t\trouteModel.add(insert, value);\n\t\t\t\tpersistRouteOrder();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcatch (Exception e) { return false; }\n\t\t}\n\n\t\t@Override\n\t\tprotected void exportDone(JComponent source, Transferable data, int action)\n\t\t{\n\t\t\tsourceIndex \u003d -1;\n\t\t}\n\t}\n\n\tpublic void refreshFromConfig() { SwingUtilities.invokeLater(this::refreshRouteOrderFromConfig); }\n\n\t/** Returns current route order (indices 03) for the task. Used when starting a run. */\n\tpublic int[] getRouteOrder()\n\t{\n\t\tint n \u003d routeModel.getSize();\n\t\tint[] order \u003d new int[4];\n\t\tfor (int i \u003d 0; i \u003c 4 \u0026\u0026 i \u003c n; i++)\n\t\t\torder[i] \u003d routeModel.get(i);\n\t\tfor (int i \u003d n; i \u003c 4; i++)\n\t\t\torder[i] \u003d i;\n\t\treturn order;\n\t}\n}\n","filePath":"src/main/java/com/easytasks/ui/BirdhouseSidePanel.java"},{"fileName":"ItemTrackingInfoBox.java","content":"package com.easytasks.infoboxes;\n\nimport com.easytasks.tasks.Task;\nimport net.runelite.api.Client;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.Item;\nimport net.runelite.api.ItemContainer;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.ui.overlay.infobox.InfoBox;\n\nimport java.awt.Color;\nimport java.awt.image.BufferedImage;\nimport java.util.List;\n\n/**\n * Tracks a single required item and auto-removes when gathered.\n * Multiple instances are created per task, one for each required item.\n * If the user drops items mid-run after gathering, infoboxes will reappear\n * (missing count updates from inventory); this is intentional.\n */\npublic class ItemTrackingInfoBox extends InfoBox\n{\n\tprivate final Task task;\n\tprivate final Task.RequiredItem requiredItem;\n\tprivate final Client client;\n\tprivate final ItemManager itemManager;\n\tprivate int missingCount \u003d 0;\n\tprivate String tooltipText \u003d \"\";\n\n\tpublic ItemTrackingInfoBox(BufferedImage image, Plugin plugin, Task.RequiredItem requiredItem, Task task, Client client, ItemManager itemManager)\n\t{\n\t\tsuper(image, plugin);\n\t\tthis.requiredItem \u003d requiredItem;\n\t\tthis.task \u003d task;\n\t\tthis.client \u003d client;\n\t\tthis.itemManager \u003d itemManager;\n\t\tupdate();\n\t}\n\n\t/** Only the count still needed is shown on the infobox; no other text. */\n\t@Override\n\tpublic String getText()\n\t{\n\t\tif (missingCount \u003e 0)\n\t\t\treturn missingCount + \"x\";\n\t\treturn \"\";\n\t}\n\n\t@Override\n\tpublic Color getTextColor()\n\t{\n\t\treturn missingCount \u003c\u003d 0 ? Color.GREEN : Color.ORANGE;\n\t}\n\n\t@Override\n\tpublic boolean render()\n\t{\n\t\treturn missingCount \u003e 0 \u0026\u0026 task.isActive();\n\t}\n\n\t@Override\n\tpublic String getTooltip()\n\t{\n\t\treturn tooltipText;\n\t}\n\n\t/** Called when inventory changes; recomputes missing count and tooltip for this item. */\n\tpublic void update()\n\t{\n\t\tif (task \u003d\u003d null || !task.isActive())\n\t\t{\n\t\t\tmissingCount \u003d 0;\n\t\t\ttooltipText \u003d \"\";\n\t\t\treturn;\n\t\t}\n\t\tItemContainer inv \u003d client.getItemContainer(InventoryID.INVENTORY);\n\t\tint have \u003d countItemsInList(inv, requiredItem.getItemIds());\n\t\tmissingCount \u003d Math.max(0, requiredItem.getQuantity() - have);\n\t\tString itemName \u003d itemManager.getItemComposition(requiredItem.getItemId()).getName();\n\t\tif (missingCount \u003e 0)\n\t\t\ttooltipText \u003d \"Need \" + missingCount + \" more \" + itemName;\n\t\telse\n\t\t\ttooltipText \u003d itemName + \": Ready\";\n\t\tsetTooltip(tooltipText);\n\t}\n\n\tprivate static int countItemsInList(ItemContainer container, List\u003cInteger\u003e itemIds)\n\t{\n\t\tif (container \u003d\u003d null || itemIds \u003d\u003d null) return 0;\n\t\tint count \u003d 0;\n\t\tfor (Item item : container.getItems())\n\t\t\tif (itemIds.contains(item.getId())) count +\u003d item.getQuantity();\n\t\treturn count;\n\t}\n}\n","filePath":"src/main/java/com/easytasks/infoboxes/ItemTrackingInfoBox.java"},{"fileName":"StepGuidanceInfoBox.java","content":"package com.easytasks.infoboxes;\n\nimport com.easytasks.tasks.TaskStep;\nimport com.easytasks.tasks.birdhouse.BirdhouseTask;\nimport net.runelite.api.Client;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.ui.overlay.infobox.InfoBox;\n\nimport java.awt.Color;\nimport java.awt.image.BufferedImage;\n\n/**\n * Plan 6.2: Shows current step instruction and progress (Step X/Y: [Action]).\n */\npublic class StepGuidanceInfoBox extends InfoBox\n{\n\tprivate final BirdhouseTask task;\n\tprivate final Client client;\n\n\tpublic StepGuidanceInfoBox(BufferedImage image, Plugin plugin, BirdhouseTask task, Client client)\n\t{\n\t\tsuper(image, plugin);\n\t\tthis.task \u003d task;\n\t\tthis.client \u003d client;\n\t\tsetTooltip(\"Current step in birdhouse run\");\n\t}\n\n\t@Override\n\tpublic String getText()\n\t{\n\t\tif (task \u003d\u003d null || !task.isActive()) return \"\";\n\t\tTaskStep step \u003d task.getCurrentStep();\n\t\tif (step \u003d\u003d null) return \"\";\n\t\tWorldPoint playerWp \u003d client.getLocalPlayer() !\u003d null ? client.getLocalPlayer().getWorldLocation() : null;\n\t\tint current \u003d task.getCompletedSteps() + 1;\n\t\tint total \u003d task.getTotalSteps();\n\t\tString instruction \u003d task.getCurrentStepInstruction(playerWp);\n\t\tif (instruction \u003d\u003d null) instruction \u003d step.getDescription();\n\t\treturn current + \"/\" + total + \": \" + instruction;\n\t}\n\n\t@Override\n\tpublic Color getTextColor()\n\t{\n\t\treturn Color.WHITE;\n\t}\n\n\t@Override\n\tpublic boolean render()\n\t{\n\t\treturn task !\u003d null \u0026\u0026 task.isActive();\n\t}\n\n\t/** Called when task state changes (e.g. after varbit change). */\n\tpublic void update()\n\t{\n\t\tif (task \u003d\u003d null) return;\n\t\tWorldPoint playerWp \u003d client.getLocalPlayer() !\u003d null ? client.getLocalPlayer().getWorldLocation() : null;\n\t\tString instruction \u003d task.getCurrentStepInstruction(playerWp);\n\t\tsetTooltip(instruction !\u003d null ? instruction : \"Progress: \" + task.getProgress() + \"%\");\n\t}}\n","filePath":"src/main/java/com/easytasks/infoboxes/StepGuidanceInfoBox.java"},{"fileName":"TaskManager.java","content":"package com.easytasks.tasks;\n\nimport com.google.inject.Singleton;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.Optional;\nimport java.util.concurrent.CopyOnWriteArrayList;\n\n@Singleton\npublic class TaskManager\n{\n\tprivate static final Logger log \u003d LoggerFactory.getLogger(TaskManager.class);\n\tprivate final List\u003cTask\u003e activeTasks \u003d new CopyOnWriteArrayList\u003c\u003e();\n\tprivate final List\u003cTaskStateListener\u003e listeners \u003d new CopyOnWriteArrayList\u003c\u003e();\n\n\tpublic void registerTask(Task task)\n\t{\n\t\tif (task \u003d\u003d null) return;\n\t\ttry\n\t\t{\n\t\t\tactiveTasks.add(task);\n\t\t\ttask.start();\n\t\t\tnotifyTaskRegistered(task);\n\t\t}\n\t\tcatch (Exception e) { log.warn(\"Failed to register task\", e); }\n\t}\n\n\tpublic void unregisterTask(Task task)\n\t{\n\t\tif (task \u003d\u003d null) return;\n\t\ttry\n\t\t{\n\t\t\tactiveTasks.remove(task);\n\t\t\ttask.stop();\n\t\t\tnotifyTaskUnregistered(task);\n\t\t}\n\t\tcatch (Exception e) { \n\t\t\tlog.warn(\"Failed to unregister task\", e); }\n\t}\n\n\tpublic List\u003cTask\u003e getActiveTasks()\n\t{\n\t\treturn Collections.unmodifiableList(new ArrayList\u003c\u003e(activeTasks));\n\t}\n\n\t@SuppressWarnings(\"unchecked\")\n\tpublic \u003cT extends Task\u003e Optional\u003cT\u003e getTaskByType(Class\u003cT\u003e type)\n\t{\n\t\treturn activeTasks.stream()\n\t\t\t.filter(type::isInstance)\n\t\t\t.map(t -\u003e (T) t)\n\t\t\t.findFirst();\n\t}\n\n\tpublic void addTaskStateListener(TaskStateListener listener)\n\t{\n\t\tif (listener !\u003d null) listeners.add(listener);\n\t}\n\n\tpublic void removeTaskStateListener(TaskStateListener listener)\n\t{\n\t\tlisteners.remove(listener);\n\t}\n\n\tprivate void notifyTaskRegistered(Task task)\n\t{\n\t\tfor (TaskStateListener l : listeners)\n\t\t{\n\t\t\ttry { l.onTaskRegistered(task); }\n\t\t\tcatch (Exception e) { log.warn(\"TaskStateListener error\", e); }\n\t\t}\n\t}\n\n\tprivate void notifyTaskUnregistered(Task task)\n\t{\n\t\tfor (TaskStateListener l : listeners)\n\t\t{\n\t\t\ttry { l.onTaskUnregistered(task); }\n\t\t\tcatch (Exception e) { log.warn(\"TaskStateListener error\", e); }\n\t\t}\n\t}\n\n\tpublic void notifyTaskStateChanged(Task task)\n\t{\n\t\tfor (TaskStateListener l : listeners)\n\t\t{\n\t\t\ttry { l.onTaskStateChanged(task); }\n\t\t\tcatch (Exception e) { log.warn(\"TaskStateListener error\", e); }\n\t\t}\n\t}\n\n\tpublic interface TaskStateListener\n\t{\n\t\tdefault void onTaskRegistered(Task task) {}\n\t\tdefault void onTaskUnregistered(Task task) {}\n\t\tdefault void onTaskStateChanged(Task task) {}\n\t}\n}\n","filePath":"src/main/java/com/easytasks/tasks/TaskManager.java"},{"fileName":"Task.java","content":"package com.easytasks.tasks;\n\nimport net.runelite.api.coords.WorldPoint;\n\nimport java.awt.image.BufferedImage;\nimport java.util.Collections;\nimport java.util.List;\n\n/**\n * Abstract contract for task management. Tasks represent a sequence of steps\n * (e.g., birdhouse run) with progress tracking and required items.\n */\npublic interface Task\n{\n\tvoid start();\n\tvoid stop();\n\tboolean isActive();\n\tboolean isComplete();\n\tint getProgress();\n\tList\u003cRequiredItem\u003e getRequiredItems();\n\tList\u003c? extends TaskLocation\u003e getLocations();\n\tTaskStep getCurrentStep();\n\tint getCompletedSteps();\n\tint getTotalSteps();\n\n\tString getName();\n\tString getDescription();\n\tBufferedImage getIcon();\n\n\tinterface RequiredItem\n\t{\n\t\tint getItemId();\n\t\tint getQuantity();\n\t\t/** IDs that satisfy this requirement (e.g. any birdhouse). Default: single getItemId(). */\n\t\tdefault List\u003cInteger\u003e getItemIds() { return Collections.singletonList(getItemId()); }\n\t}\n}\n","filePath":"src/main/java/com/easytasks/tasks/Task.java"},{"fileName":"TaskStep.java","content":"package com.easytasks.tasks;\n\nimport net.runelite.api.coords.WorldPoint;\n\nimport java.util.List;\nimport java.util.function.BooleanSupplier;\n\npublic final class TaskStep\n{\n\tprivate final String description;\n\tprivate final WorldPoint location;\n\tprivate final List\u003cInteger\u003e requiredItems;\n\tprivate final BooleanSupplier completionCondition;\n\n\tpublic TaskStep(String description, WorldPoint location, List\u003cInteger\u003e requiredItems, BooleanSupplier completionCondition)\n\t{\n\t\tthis.description \u003d description;\n\t\tthis.location \u003d location;\n\t\tthis.requiredItems \u003d requiredItems !\u003d null ? List.copyOf(requiredItems) : List.of();\n\t\tthis.completionCondition \u003d completionCondition !\u003d null ? completionCondition : () -\u003e false;\n\t}\n\n\tpublic String getDescription() { return description; }\n\tpublic WorldPoint getLocation() { return location; }\n\tpublic List\u003cInteger\u003e getRequiredItems() { return requiredItems; }\n\tpublic boolean isComplete() { return completionCondition.getAsBoolean(); }\n}\n","filePath":"src/main/java/com/easytasks/tasks/TaskStep.java"},{"fileName":"TaskLocation.java","content":"package com.easytasks.tasks;\n\nimport net.runelite.api.coords.WorldPoint;\n\nimport java.util.List;\n\npublic class TaskLocation\n{\n\tprivate final String name;\n\tprivate final WorldPoint worldPoint;\n\tprivate final List\u003cInteger\u003e objectIds;\n\tprivate final List\u003cInteger\u003e teleportObjectIds;\n\tprivate boolean visited;\n\tprivate boolean completed;\n\n\tpublic TaskLocation(String name, WorldPoint worldPoint, List\u003cInteger\u003e objectIds, List\u003cInteger\u003e teleportObjectIds)\n\t{\n\t\tthis.name \u003d name;\n\t\tthis.worldPoint \u003d worldPoint;\n\t\tthis.objectIds \u003d objectIds !\u003d null ? List.copyOf(objectIds) : List.of();\n\t\tthis.teleportObjectIds \u003d teleportObjectIds !\u003d null ? List.copyOf(teleportObjectIds) : List.of();\n\t}\n\n\tpublic String getName() { return name; }\n\tpublic WorldPoint getWorldPoint() { return worldPoint; }\n\tpublic List\u003cInteger\u003e getObjectIds() { return objectIds; }\n\tpublic List\u003cInteger\u003e getTeleportObjectIds() { return teleportObjectIds; }\n\tpublic boolean isVisited() { return visited; }\n\tpublic void setVisited(boolean visited) { this.visited \u003d visited; }\n\tpublic boolean isCompleted() { return completed; }\n\tpublic void setCompleted(boolean completed) { this.completed \u003d completed; }\n}\n","filePath":"src/main/java/com/easytasks/tasks/TaskLocation.java"},{"fileName":"BirdhouseTask.java","content":"package com.easytasks.tasks.birdhouse;\n\nimport com.easytasks.BirdhouseConfig;\nimport com.easytasks.tasks.Task;\nimport com.easytasks.tasks.TaskLocation;\nimport com.easytasks.tasks.TaskManager;\nimport com.easytasks.tasks.TaskStep;\nimport net.runelite.api.Client;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.Item;\nimport net.runelite.api.ItemContainer;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport javax.inject.Inject;\nimport java.awt.image.BufferedImage;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\n\npublic class BirdhouseTask implements Task\n{\n\tprivate final Client client;\n\tprivate final TaskManager taskManager;\n\tprivate final BirdhouseConfig config;\n\n\tprivate volatile boolean active;\n\tprivate BirdhouseMode mode;\n\tprivate int[] routeOrder;\n\tprivate List\u003cBirdhouseLocation\u003e locations;\n\tprivate List\u003cTaskStep\u003e steps;\n\tprivate int currentStepIndex;\n\tprivate Runnable onCompleteCallback;\n\n\t@Inject\n\tpublic BirdhouseTask(Client client, TaskManager taskManager, BirdhouseConfig config)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.taskManager \u003d taskManager;\n\t\tthis.config \u003d config;\n\t\tthis.locations \u003d createDefaultLocations();\n\t\tthis.steps \u003d new ArrayList\u003c\u003e();\n\t\tthis.currentStepIndex \u003d 0;\n\t\tthis.routeOrder \u003d new int[]{0, 1, 2, 3};\n\t}\n\n\tpublic void setMode(BirdhouseMode mode) { this.mode \u003d mode; }\n\n\tpublic void setRouteOrder(int[] routeOrder)\n\t{\n\t\tif (routeOrder \u003d\u003d null || routeOrder.length !\u003d 4) return;\n\t\tthis.routeOrder \u003d routeOrder.clone();\n\t\trebuildStepsFromRoute();\n\t}\n\n\tpublic void setOnCompleteCallback(Runnable onCompleteCallback) { this.onCompleteCallback \u003d onCompleteCallback; }\n\n\t/** Rebuilds the step list from current routeOrder and resets currentStepIndex to match completed count. */\n\tpublic void rebuildStepsFromRoute()\n\t{\n\t\tbuildStepSequence();\n\t\tint completed \u003d getCompletedSteps();\n\t\tcurrentStepIndex \u003d Math.min(Math.max(0, completed), Math.max(0, steps.size() - 1));\n\t\ttaskManager.notifyTaskStateChanged(this);\n\t}\n\n\tprivate static List\u003cBirdhouseLocation\u003e createDefaultLocations()\n\t{\n\t\tList\u003cInteger\u003e allTeleportIds \u003d BirdhouseData.MUSHROOM_TELEPORT_OBJECT_IDS;\n\t\tList\u003cBirdhouseLocation\u003e list \u003d new ArrayList\u003c\u003e();\n\t\tlist.add(new BirdhouseLocation(\"Verdant Valley (North)\", BirdhouseData.VERDANT_VALLEY_NORTH, Collections.singletonList(BirdhouseData.OBJECT_ID_VALLEY_NORTH), Collections.singletonList(allTeleportIds.get(0)), BirdhouseData.OBJECT_ID_VALLEY_NORTH));\n\t\tlist.add(new BirdhouseLocation(\"Verdant Valley (South)\", BirdhouseData.VERDANT_VALLEY_SOUTH, Collections.singletonList(BirdhouseData.OBJECT_ID_VALLEY_SOUTH), Collections.singletonList(allTeleportIds.get(1)), BirdhouseData.OBJECT_ID_VALLEY_SOUTH));\n\t\tlist.add(new BirdhouseLocation(\"Mushroom Forest\", BirdhouseData.MUSHROOM_FOREST, Collections.singletonList(BirdhouseData.OBJECT_ID_MUSHROOM_FOREST), Collections.singletonList(allTeleportIds.get(2)), BirdhouseData.OBJECT_ID_MUSHROOM_FOREST));\n\t\tlist.add(new BirdhouseLocation(\"Tar Swamp\", BirdhouseData.TAR_SWAMP, Collections.singletonList(BirdhouseData.OBJECT_ID_TAR_SWAMP), Collections.singletonList(allTeleportIds.get(3)), BirdhouseData.OBJECT_ID_TAR_SWAMP));\n\t\treturn list;\n\t}\n\n\t@Override\n\tpublic void start()\n\t{\n\t\tactive \u003d true;\n\t\tif (mode \u003d\u003d null) mode \u003d BirdhouseMode.BIRDHOUSES;\n\t\tfor (BirdhouseLocation loc : locations)\n\t\t{\n\t\t\tloc.setVisited(false);\n\t\t\tloc.setCompleted(false);\n\t\t\tloc.setFilledThisRun(false);\n\t\t\tloc.setHadNeedsFilling(false);\n\t\t\tloc.setLastVarplayerValue(loc.getStateValue(client));\n\t\t}\n\t\tbuildStepSequence();\n\t\tcurrentStepIndex \u003d 0;\n\t\ttaskManager.notifyTaskStateChanged(this);\n\t}\n\n\t@Override\n\tpublic void stop()\n\t{\n\t\tactive \u003d false;\n\t\tsteps.clear();\n\t\tcurrentStepIndex \u003d 0;\n\t\ttaskManager.notifyTaskStateChanged(this);\n\t}\n\n\t@Override\n\tpublic boolean isActive() { return active; }\n\n\t@Override\n\tpublic boolean isComplete()\n\t{\n\t\tif (!active || locations \u003d\u003d null) return false;\n\t\tfor (int i \u003d 0; i \u003c 4; i++)\n\t\t{\n\t\t\tBirdhouseLocation loc \u003d getLocationByRouteIndex(i);\n\t\t\tif (loc \u003d\u003d null || !loc.isVisited()) return false;\n\t\t}\n\t\treturn true;\n\t}\n\n\t@Override\n\tpublic int getProgress()\n\t{\n\t\tint total \u003d getTotalSteps();\n\t\treturn total \u003d\u003d 0 ? 0 : (getCompletedSteps() * 100) / total;\n\t}\n\n\t@Override\n\tpublic List\u003cRequiredItem\u003e getRequiredItems()\n\t{\n\t\tif (mode \u003d\u003d null) return Collections.emptyList();\n\t\treturn mode.getRequiredItems();\n\t}\n\n\t@Override\n\tpublic List\u003c? extends TaskLocation\u003e getLocations()\n\t{\n\t\treturn locations \u003d\u003d null ? Collections.emptyList() : locations;\n\t}\n\n\tpublic List\u003cBirdhouseLocation\u003e getLocationsInRouteOrder()\n\t{\n\t\tif (locations \u003d\u003d null || routeOrder \u003d\u003d null) return Collections.emptyList();\n\t\tList\u003cBirdhouseLocation\u003e ordered \u003d new ArrayList\u003c\u003e(4);\n\t\tfor (int i \u003d 0; i \u003c 4; i++)\n\t\t{\n\t\t\tint idx \u003d routeOrder[i];\n\t\t\tif (idx \u003e\u003d 0 \u0026\u0026 idx \u003c locations.size()) ordered.add(locations.get(idx));\n\t\t}\n\t\treturn ordered;\n\t}\n\n\t@Override\n\tpublic TaskStep getCurrentStep()\n\t{\n\t\tif (steps \u003d\u003d null || steps.isEmpty() || currentStepIndex \u003c 0 || currentStepIndex \u003e\u003d steps.size()) return null;\n\t\treturn steps.get(currentStepIndex);\n\t}\n\n\t@Override\n\tpublic int getCompletedSteps()\n\t{\n\t\tint count \u003d 0;\n\t\tfor (BirdhouseLocation loc : getLocationsInRouteOrder()) if (loc.isVisited()) count++;\n\t\treturn count;\n\t}\n\n\t@Override\n\tpublic int getTotalSteps() { return 4; }\n\n\t@Override\n\tpublic String getName() { return \"Birdhouse Run\"; }\n\n\t@Override\n\tpublic String getDescription() { return \"Assists with birdhouse runs on Fossil Island.\"; }\n\n\t@Override\n\tpublic BufferedImage getIcon() { return null; }\n\n\tpublic BirdhouseMode getMode() { return mode; }\n\tpublic int[] getRouteOrder() { return routeOrder \u003d\u003d null ? new int[]{0, 1, 2, 3} : routeOrder.clone(); }\n\n\t/** The location for the current step (by route order). */\n\tpublic BirdhouseLocation getCurrentStepLocation()\n\t{\n\t\treturn getLocationByRouteIndex(currentStepIndex);\n\t}\n\n\t/** True when the current step is to use seeds on the birdhouse (occupied but empty). */\n\tpublic boolean isCurrentStepFillWithSeeds()\n\t{\n\t\tBirdhouseLocation loc \u003d getCurrentStepLocation();\n\t\treturn loc !\u003d null \u0026\u0026 loc.getStateValue(client) \u003d\u003d BirdhouseData.VARPLAYER_VALUE_OCCUPIED_EMPTY;\n\t}\n\n\t/**\n\t * Returns the instruction for the current step. If the player is not near the current step\u0027s patch,\n\t * returns \"Go to \u0026lt;location\u0026gt;\". Otherwise uses the patch state (varp) at that location:\n\t * 21 \u003d harvest, 0 \u003d build, 19 \u003d fill. When just filled (varp 21 + hadNeedsFilling), returns next step\u0027s instruction.\n\t */\n\tpublic String getCurrentStepInstruction(WorldPoint playerWp)\n\t{\n\t\tif (!active || locations \u003d\u003d null) return null;\n\t\treturn getInstructionForStep(currentStepIndex, playerWp);\n\t}\n\n\t/** 1-based step number for display; matches the instruction (e.g. 2 when showing \"Go to\" next location after completing first). */\n\tpublic int getCurrentStepNumberForDisplay(WorldPoint playerWp)\n\t{\n\t\tif (!active || locations \u003d\u003d null) return 1;\n\t\tBirdhouseLocation loc \u003d getLocationByRouteIndex(currentStepIndex);\n\t\tif (loc \u003d\u003d null) return currentStepIndex + 1;\n\t\tboolean showingNext \u003d false;\n\t\tif (playerWp !\u003d null \u0026\u0026 !isWithinProximity(playerWp, loc.getWorldPoint()))\n\t\t{\n\t\t\tboolean completed \u003d loc.isVisited();\n\t\t\tif (!completed)\n\t\t\t{\n\t\t\t\tint varp \u003d loc.getStateValue(client);\n\t\t\t\tif (varp \u003d\u003d BirdhouseData.VARPLAYER_VALUE_OCCUPIED_FULL\n\t\t\t\t\t\u0026\u0026 (loc.isFilledThisRun() || loc.isHadNeedsFilling()))\n\t\t\t\t\tcompleted \u003d true;\n\t\t\t}\n\t\t\tif (completed) showingNext \u003d true;\n\t\t}\n\t\telse if (loc.getStateValue(client) \u003d\u003d BirdhouseData.VARPLAYER_VALUE_OCCUPIED_FULL\n\t\t\t\u0026\u0026 (loc.isFilledThisRun() || loc.isHadNeedsFilling()))\n\t\t\tshowingNext \u003d true;\n\t\tint oneBased \u003d showingNext ? currentStepIndex + 2 : currentStepIndex + 1;\n\t\treturn Math.min(oneBased, getTotalSteps());\n\t}\n\n\tprivate String getInstructionForStep(int routeIndex, WorldPoint playerWp)\n\t{\n\t\tfinal int maxIndex \u003d getLocationsInRouteOrder().size();\n\t\tif (routeIndex \u003c 0 || routeIndex \u003e\u003d maxIndex) return null;\n\n\t\twhile (routeIndex \u003c maxIndex)\n\t\t{\n\t\t\t// On first step, only show \"Gather the required items\" when not yet at the first location.\n\t\t\t// Once at the first location (e.g. after building), show normal step instruction (fill seeds, etc.).\n\t\t\tif (routeIndex \u003d\u003d 0 \u0026\u0026 !hasRequiredItems())\n\t\t\t{\n\t\t\t\tBirdhouseLocation first \u003d getLocationByRouteIndex(0);\n\t\t\t\tif (first !\u003d null \u0026\u0026 (playerWp \u003d\u003d null || !isWithinProximity(playerWp, first.getWorldPoint())))\n\t\t\t\t\treturn \"Gather the required items\";\n\t\t\t}\n\t\t\tBirdhouseLocation loc \u003d getLocationByRouteIndex(routeIndex);\n\t\t\tif (loc \u003d\u003d null) return null;\n\t\t\tif (playerWp !\u003d null \u0026\u0026 !isWithinProximity(playerWp, loc.getWorldPoint()))\n\t\t\t{\n\t\t\t\tboolean completed \u003d loc.isVisited();\n\t\t\t\tif (!completed)\n\t\t\t\t{\n\t\t\t\t\tint varp \u003d loc.getStateValue(client);\n\t\t\t\t\tif (varp \u003d\u003d BirdhouseData.VARPLAYER_VALUE_OCCUPIED_FULL\n\t\t\t\t\t\t\u0026\u0026 (loc.isFilledThisRun() || loc.isHadNeedsFilling()))\n\t\t\t\t\t\tcompleted \u003d true;\n\t\t\t\t}\n\t\t\t\tif (completed)\n\t\t\t\t{\n\t\t\t\t\trouteIndex++;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\treturn \"Go to \" + loc.getName();\n\t\t\t}\n\t\t\tint varp \u003d loc.getStateValue(client);\n\t\t\tif (varp \u003d\u003d BirdhouseData.VARPLAYER_VALUE_OCCUPIED_FULL)\n\t\t\t{\n\t\t\t\tif (loc.isFilledThisRun() || loc.isHadNeedsFilling())\n\t\t\t\t{\n\t\t\t\t\trouteIndex++;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\treturn \"Empty the birdhouse to harvest it\";\n\t\t\t}\n\t\t\tif (varp \u003d\u003d BirdhouseData.VARPLAYER_VALUE_UNOCCUPIED)\n\t\t\t\treturn \"Click the patch to build a new birdhouse\";\n\t\t\tif (varp \u003d\u003d BirdhouseData.VARPLAYER_VALUE_OCCUPIED_EMPTY)\n\t\t\t{\n\t\t\t\tloc.setHadNeedsFilling(true);\n\t\t\t\treturn \"Click seeds, then click the birdhouse to fill it\";\n\t\t\t}\n\t\t\treturn \"Visit \" + loc.getName();\n\t\t}\n\t\treturn null;\n\t}\n\n\t/** True if the player\u0027s inventory satisfies all required items for this task. */\n\tprivate boolean hasRequiredItems()\n\t{\n\t\tItemContainer inv \u003d client.getItemContainer(InventoryID.INVENTORY);\n\t\tif (inv \u003d\u003d null) return false;\n\t\tfor (RequiredItem ri : getRequiredItems())\n\t\t{\n\t\t\tint have \u003d countItemsInContainer(inv, ri.getItemIds());\n\t\t\tif (have \u003c ri.getQuantity()) return false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tprivate static int countItemsInContainer(ItemContainer container, List\u003cInteger\u003e itemIds)\n\t{\n\t\tif (container \u003d\u003d null || itemIds \u003d\u003d null) return 0;\n\t\tint count \u003d 0;\n\t\tfor (Item item : container.getItems())\n\t\t\tif (itemIds.contains(item.getId())) count +\u003d item.getQuantity();\n\t\treturn count;\n\t}\n\n\tprivate boolean isWithinProximity(WorldPoint playerWp, WorldPoint locWp)\n\t{\n\t\tif (playerWp.getPlane() !\u003d locWp.getPlane()) return false;\n\t\tint dx \u003d Math.abs(playerWp.getX() - locWp.getX());\n\t\tint dy \u003d Math.abs(playerWp.getY() - locWp.getY());\n\t\treturn Math.max(dx, dy) \u003c\u003d PROXIMITY_TILES;\n\t}\n\n\tprivate BirdhouseLocation getLocationByRouteIndex(int routeIndex)\n\t{\n\t\tList\u003cBirdhouseLocation\u003e ordered \u003d getLocationsInRouteOrder();\n\t\tif (routeIndex \u003c 0 || routeIndex \u003e\u003d ordered.size()) return null;\n\t\treturn ordered.get(routeIndex);\n\t}\n\n\tprivate void buildStepSequence()\n\t{\n\t\tsteps.clear();\n\t\tfor (BirdhouseLocation loc : getLocationsInRouteOrder())\n\t\t\tsteps.add(new TaskStep(\"Visit \" + loc.getName(), loc.getWorldPoint(), Collections.emptyList(), () -\u003e loc.isVisited()));\n\t}\n\n\t/** Plan 7.3: Detect Take (harvest), Build (place birdhouse). Advance on Fill is detected by polling state in checkProximityAndAdvance. */\n\tpublic void onMenuOptionClicked(String option, int objectId, int param0, int param1)\n\t{\n\t\tif (!active || locations \u003d\u003d null) return;\n\t\tboolean take \u003d \"Take\".equals(option);\n\t\tboolean build \u003d \"Build\".equals(option);\n\t\tif (!take \u0026\u0026 !build) return;\n\t\tLocalPoint lp \u003d LocalPoint.fromScene(param0, param1);\n\t\tif (lp \u003d\u003d null) return;\n\t\tWorldPoint wp \u003d WorldPoint.fromLocal(client, lp);\n\t\tfor (BirdhouseLocation loc : locations)\n\t\t{\n\t\t\tif (loc.getPatchObjectId() \u003d\u003d objectId \u0026\u0026 loc.getWorldPoint().equals(wp))\n\t\t\t{\n\t\t\t\tif (take)\n\t\t\t\t{\n\t\t\t\t\tloc.setFilledThisRun(false);\n\t\t\t\t\tloc.setHadNeedsFilling(false);\n\t\t\t\t}\n\t\t\t\ttaskManager.notifyTaskStateChanged(this);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void advanceToNextStep()\n\t{\n\t\tint completed \u003d getCompletedSteps();\n\t\tif (completed \u003c steps.size()) currentStepIndex \u003d completed;\n\t}\n\n\t/** When the player is within this many tiles of the current patch, \"Go to X\" is suppressed and step instruction is shown. */\n\tprivate static final int PROXIMITY_TILES \u003d 10;\n\n\t/**\n\t * Polls state from object definition (VarPlayer/Varbit per patch). When current step\u0027s location\n\t * has state 21 and hadNeedsFilling (or prev 19), mark filled and advance. Called every GameTick.\n\t */\n\tpublic void checkProximityAndAdvance()\n\t{\n\t\tif (!active || locations \u003d\u003d null) return;\n\t\tList\u003cBirdhouseLocation\u003e ordered \u003d getLocationsInRouteOrder();\n\t\tif (currentStepIndex \u003c 0 || currentStepIndex \u003e\u003d ordered.size()) return;\n\t\tBirdhouseLocation loc \u003d ordered.get(currentStepIndex);\n\t\tif (loc.isVisited()) return;\n\t\tint value \u003d loc.getStateValue(client);\n\t\tloc.setLastVarplayerValue(value);\n\t\tif (value \u003d\u003d BirdhouseData.VARPLAYER_VALUE_OCCUPIED_EMPTY)\n\t\t\tloc.setHadNeedsFilling(true);\n\t\telse if (value \u003d\u003d BirdhouseData.VARPLAYER_VALUE_OCCUPIED_FULL \u0026\u0026 loc.isHadNeedsFilling())\n\t\t{\n\t\t\tloc.setHadNeedsFilling(false);\n\t\t\tloc.setFilledThisRun(true);\n\t\t\tloc.setVisited(true);\n\t\t\tloc.setCompleted(true);\n\t\t\tadvanceToNextStep();\n\t\t\ttaskManager.notifyTaskStateChanged(this);\n\t\t\tif (isComplete())\n\t\t\t{\n\t\t\t\tif (onCompleteCallback !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tonCompleteCallback.run();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (value !\u003d BirdhouseData.VARPLAYER_VALUE_OCCUPIED_FULL)\n\t\t{\n\t\t\tloc.setFilledThisRun(false);\n\t\t\tloc.setHadNeedsFilling(false);\n\t\t}\n\t\t// Ensure run auto-stops when all locations are completed (fallback if last step didn\u0027t fire callback)\n\t\tif (isComplete() \u0026\u0026 onCompleteCallback !\u003d null)\n\t\t{\n\t\t\tonCompleteCallback.run();\n\t\t}\n\t}\n}\n","filePath":"src/main/java/com/easytasks/tasks/birdhouse/BirdhouseTask.java"},{"fileName":"BirdhouseData.java","content":"package com.easytasks.tasks.birdhouse;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.gameval.ItemID;\nimport net.runelite.api.coords.WorldPoint;\n\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.List;\n\n/**\n * Static game data for birdhouse runs. Plan 2.4, 9.\n *\n * Each birdhouse patch has a unique object ID and a unique VarPlayer for state.\n * VarPlayer value: 0 \u003d unoccupied, 19 \u003d occupied but empty, 21 \u003d occupied and full (harvestable).\n */\npublic final class BirdhouseData\n{\n\tprivate BirdhouseData() {}\n\n\tpublic static final List\u003cInteger\u003e SEED_IDS \u003d Collections.unmodifiableList(Arrays.asList(\n\t\tItemID.BARLEY_SEED, ItemID.HAMMERSTONE_HOP_SEED, ItemID.JUTE_SEED,\n\t\tItemID.YANILLIAN_HOP_SEED, ItemID.KRANDORIAN_HOP_SEED, ItemID.WILDBLOOD_HOP_SEED\n\t));\n\n\tpublic static final List\u003cInteger\u003e BIRDHOUSE_IDS \u003d Collections.unmodifiableList(Arrays.asList(\n\t\tItemID.BIRDHOUSE_NORMAL, ItemID.BIRDHOUSE_OAK, ItemID.BIRDHOUSE_WILLOW, ItemID.BIRDHOUSE_TEAK,\n\t\tItemID.BIRDHOUSE_MAPLE, ItemID.BIRDHOUSE_MAHOGANY, ItemID.BIRDHOUSE_YEW,\n\t\tItemID.BIRDHOUSE_MAGIC, ItemID.BIRDHOUSE_REDWOOD\n\t));\n\n\tpublic static final List\u003cInteger\u003e LOG_IDS \u003d Collections.unmodifiableList(Arrays.asList(\n\t\tItemID.LOGS, ItemID.OAK_LOGS, ItemID.WILLOW_LOGS, ItemID.TEAK_LOGS,\n\t\tItemID.MAPLE_LOGS, ItemID.MAHOGANY_LOGS, ItemID.YEW_LOGS,\n\t\tItemID.MAGIC_LOGS, ItemID.REDWOOD_LOGS\n\t));\n\n\t/** Item ID for Clockwork (used when building birdhouses from logs). */\n\tpublic static final int CLOCKWORK_ITEM_ID \u003d 8792;\n\n\t/** Resolves tier index to birdhouse item ID; returns Oak (index 1) if out of range. */\n\tpublic static int getBirdhouseId(int tierIndex)\n\t{\n\t\tif (tierIndex \u003c 0 || tierIndex \u003e\u003d BIRDHOUSE_IDS.size()) return BIRDHOUSE_IDS.get(1);\n\t\treturn BIRDHOUSE_IDS.get(tierIndex);\n\t}\n\n\t/** Resolves tier index to log item ID; returns Oak logs (index 1) if out of range. */\n\tpublic static int getLogId(int tierIndex)\n\t{\n\t\tif (tierIndex \u003c 0 || tierIndex \u003e\u003d LOG_IDS.size()) return LOG_IDS.get(1);\n\t\treturn LOG_IDS.get(tierIndex);\n\t}\n\n\t/** Resolves seed index to seed item ID; returns Barley (index 0) if out of range. */\n\tpublic static int getSeedId(int seedIndex)\n\t{\n\t\tif (seedIndex \u003c 0 || seedIndex \u003e\u003d SEED_IDS.size()) return SEED_IDS.get(0);\n\t\treturn SEED_IDS.get(seedIndex);\n\t}\n\n\tpublic static final List\u003cInteger\u003e MUSHROOM_TELEPORT_OBJECT_IDS \u003d Collections.unmodifiableList(Arrays.asList(30922, 30923, 30924, 30925));\n\n\t/** Mushroom tree object (30924) in Mushroom Forest  highlight when next step is Verdant Valley so player uses it to get there. */\n\tpublic static final int MUSHROOM_TREE_TO_VALLEY_OBJECT_ID \u003d 30924;\n\n\t/** Object ID per patch (unique per location). Order: valley north, valley south, forest, swamp. */\n\tpublic static final int OBJECT_ID_VALLEY_NORTH \u003d 30567;\n\tpublic static final int OBJECT_ID_VALLEY_SOUTH \u003d 30568;\n\tpublic static final int OBJECT_ID_MUSHROOM_FOREST \u003d 30565;\n\tpublic static final int OBJECT_ID_TAR_SWAMP \u003d 30566;\n\n\t/** VarPlayer value: unoccupied. */\n\tpublic static final int VARPLAYER_VALUE_UNOCCUPIED \u003d 0;\n\t/** VarPlayer value: occupied but empty (no seeds). */\n\tpublic static final int VARPLAYER_VALUE_OCCUPIED_EMPTY \u003d 19;\n\t/** VarPlayer value: occupied and full of seeds (harvestable). */\n\tpublic static final int VARPLAYER_VALUE_OCCUPIED_FULL \u003d 21;\n\n\tpublic static final WorldPoint VERDANT_VALLEY_NORTH \u003d new WorldPoint(3768, 3761, 0);\n\tpublic static final WorldPoint VERDANT_VALLEY_SOUTH \u003d new WorldPoint(3763, 3755, 0);\n\tpublic static final WorldPoint MUSHROOM_FOREST \u003d new WorldPoint(3677, 3882, 0);\n\tpublic static final WorldPoint TAR_SWAMP \u003d new WorldPoint(3679, 3815, 0);\n\n\t/** Plan 5.3: Only render overlays when player is on Fossil Island (approximate bounding box). */\n\tpublic static boolean isOnFossilIsland(Client client)\n\t{\n\t\tif (client \u003d\u003d null || client.getLocalPlayer() \u003d\u003d null) return false;\n\t\tWorldPoint wp \u003d client.getLocalPlayer().getWorldLocation();\n\t\treturn wp.getX() \u003e\u003d 3600 \u0026\u0026 wp.getX() \u003c\u003d 3900\n\t\t\t\u0026\u0026 wp.getY() \u003e\u003d 3700 \u0026\u0026 wp.getY() \u003c\u003d 3900\n\t\t\t\u0026\u0026 wp.getPlane() \u003d\u003d 0;\n\t}\n}\n","filePath":"src/main/java/com/easytasks/tasks/birdhouse/BirdhouseData.java"},{"fileName":"BirdhouseMode.java","content":"package com.easytasks.tasks.birdhouse;\n\nimport com.easytasks.tasks.Task;\nimport net.runelite.api.gameval.ItemID;\n\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\n\npublic enum BirdhouseMode\n{\n\tBIRDHOUSES,\n\tLOGS;\n\n\t/**\n\t * Builds the required item list for this mode.\n\t * BIRDHOUSES: any birdhouse (4), any valid seed (40), hammer, chisel.\n\t * LOGS: any log (4), any valid seed (40), hammer, chisel.\n\t */\n\tpublic List\u003cTask.RequiredItem\u003e getRequiredItems()\n\t{\n\t\tList\u003cTask.RequiredItem\u003e items \u003d new ArrayList\u003c\u003e();\n\t\tif (this \u003d\u003d BIRDHOUSES)\n\t\t\titems.add(new RequiredItemImpl(BirdhouseData.BIRDHOUSE_IDS, 4));\n\t\telse\n\t\t\titems.add(new RequiredItemImpl(BirdhouseData.LOG_IDS, 4));\n\t\titems.add(new RequiredItemImpl(BirdhouseData.SEED_IDS, 40));\n\t\titems.add(new RequiredItemImpl(ItemID.HAMMER, 1));\n\t\titems.add(new RequiredItemImpl(ItemID.CHISEL, 1));\n\t\treturn Collections.unmodifiableList(items);\n\t}\n\n\tprivate static final class RequiredItemImpl implements Task.RequiredItem\n\t{\n\t\tprivate final List\u003cInteger\u003e itemIds;\n\t\tprivate final int quantity;\n\t\tRequiredItemImpl(int itemId, int quantity) { this.itemIds \u003d Collections.singletonList(itemId); this.quantity \u003d quantity; }\n\t\tRequiredItemImpl(List\u003cInteger\u003e itemIds, int quantity) { this.itemIds \u003d List.copyOf(itemIds); this.quantity \u003d quantity; }\n\t\t@Override public int getItemId() { return itemIds.get(0); }\n\t\t@Override public int getQuantity() { return quantity; }\n\t\t@Override public List\u003cInteger\u003e getItemIds() { return itemIds; }\n\t}\n}\n","filePath":"src/main/java/com/easytasks/tasks/birdhouse/BirdhouseMode.java"},{"fileName":"BirdhouseLocation.java","content":"package com.easytasks.tasks.birdhouse;\n\nimport com.easytasks.tasks.TaskLocation;\nimport net.runelite.api.Client;\nimport net.runelite.api.ObjectComposition;\nimport net.runelite.api.coords.WorldPoint;\n\nimport java.util.List;\n\npublic class BirdhouseLocation extends TaskLocation\n{\n\tprivate final int patchObjectId;\n\n\t/** Previous varp value for this patch (to detect 1921 \u003d just filled). */\n\tprivate int lastVarplayerValue \u003d -1;\n\t/** True when varp transitioned 1921 this run (newly seeded); don\u0027t show \"harvest\" until they harvest. */\n\tprivate boolean filledThisRun;\n\t/** True when we\u0027ve seen varp 19 at this location this step (needs filling); next varp 21 \u003d just filled, advance. */\n\tprivate boolean hadNeedsFilling;\n\n\tpublic BirdhouseLocation(String name, WorldPoint worldPoint,\n\t                         List\u003cInteger\u003e objectIds, List\u003cInteger\u003e teleportObjectIds,\n\t                         int patchObjectId)\n\t{\n\t\tsuper(name, worldPoint, objectIds, teleportObjectIds);\n\t\tthis.patchObjectId \u003d patchObjectId;\n\t}\n\n\t/** Object ID for this patch (same whether empty or occupied; state from object definition). */\n\tpublic int getPatchObjectId() { return patchObjectId; }\n\n\t/** Read state value (0, 19, 21) from the patch object definition (VarPlayer or Varbit). */\n\tpublic int getStateValue(Client client)\n\t{\n\t\tObjectComposition comp \u003d client.getObjectDefinition(patchObjectId);\n\t\tif (comp \u003d\u003d null) return -1;\n\t\tint varpId \u003d comp.getVarPlayerId();\n\t\tif (varpId !\u003d -1) return client.getVarpValue(varpId);\n\t\tint varbitId \u003d comp.getVarbitId();\n\t\tif (varbitId !\u003d -1) return client.getVarbitValue(varbitId);\n\t\treturn -1;\n\t}\n\n\tpublic int getLastVarplayerValue() { return lastVarplayerValue; }\n\tpublic void setLastVarplayerValue(int lastVarplayerValue) { this.lastVarplayerValue \u003d lastVarplayerValue; }\n\tpublic boolean isFilledThisRun() { return filledThisRun; }\n\tpublic void setFilledThisRun(boolean filledThisRun) { this.filledThisRun \u003d filledThisRun; }\n\tpublic boolean isHadNeedsFilling() { return hadNeedsFilling; }\n\tpublic void setHadNeedsFilling(boolean hadNeedsFilling) { this.hadNeedsFilling \u003d hadNeedsFilling; }\n\n\tpublic boolean isEmpty(Client client)\n\t{\n\t\treturn getStateValue(client) \u003d\u003d BirdhouseData.VARPLAYER_VALUE_UNOCCUPIED;\n\t}\n\tpublic boolean isPlaced(Client client)\n\t{\n\t\treturn getStateValue(client) \u003d\u003d BirdhouseData.VARPLAYER_VALUE_OCCUPIED_EMPTY;\n\t}\n\tpublic boolean isOccupied(Client client)\n\t{\n\t\treturn getStateValue(client) \u003d\u003d BirdhouseData.VARPLAYER_VALUE_OCCUPIED_FULL;\n\t}\n}\n","filePath":"src/main/java/com/easytasks/tasks/birdhouse/BirdhouseLocation.java"},{"fileName":"EasyTasksPluginTest.java","content":"package com.easytasks;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class EasyTasksPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(BirdhousePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}\n","filePath":"src/test/java/com/easytasks/EasyTasksPluginTest.java"}]}]