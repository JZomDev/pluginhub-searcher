package tictac7x.camera_pitch_limiter;

import javax.inject.Inject;
import net.runelite.api.Client;
import lombok.extern.slf4j.Slf4j;
import com.google.inject.Provides;
import net.runelite.api.events.BeforeRender;
import net.runelite.client.eventbus.Subscribe;
import net.runelite.client.plugins.Plugin;
import net.runelite.client.config.ConfigManager;
import net.runelite.client.plugins.PluginDescriptor;

@Slf4j
@PluginDescriptor(
	name = "Camera Pitch Limiter",
	description = "Limit Camera Pitch",
	tags = { "camera", "pitch", "limit"	}
)
public class TicTac7xCameraPitchLimiterPlugin extends Plugin {
	@Inject
	private Client client;

	@Inject
	private TicTac7xCameraPitchLimiterConfig config;

	@Provides
	TicTac7xCameraPitchLimiterConfig provideConfig(final ConfigManager configManager) {
		return configManager.getConfig(TicTac7xCameraPitchLimiterConfig.class);
	}

	@Subscribe
	public void onBeforeRender(final BeforeRender event) {
		if (client.getCameraPitchTarget() >= config.getMaximumPitch()) {
			client.setCameraPitchTarget(config.getMaximumPitch());
		} else if (client.getCameraPitchTarget() <= config.getMinimumPitch()) {
			client.setCameraPitchTarget(config.getMinimumPitch());
		}
	}
}

package tictac7x.camera_pitch_limiter;

import net.runelite.client.config.Config;
import net.runelite.client.config.ConfigGroup;
import net.runelite.client.config.ConfigItem;
import net.runelite.client.config.Range;

@ConfigGroup("tictac7x-pitch-limiter")
public interface TicTac7xCameraPitchLimiterConfig extends Config {
	@Range(min = 0, max = 512)
	@ConfigItem(
		keyName = "maximumPitch",
		name = "Maximum Pitch",
		description = "Highest camera point (0 - 512)"
	) default int getMaximumPitch() { return 383; }

	@Range(min = 0, max = 512)
	@ConfigItem(
		keyName = "minimumPitch",
		name = "Minimum Pitch",
		description = "Lowest camera point (0 - 512)"
	) default int getMinimumPitch() { return 128; }
}

package tictac7x.camera_pitch_limiter;

import net.runelite.client.RuneLite;
import net.runelite.client.externalplugins.ExternalPluginManager;

public class TicTac7xCameraPitchLimiterPluginTest {
	public static void main(String[] args) throws Exception {
		ExternalPluginManager.loadBuiltin(TicTac7xCameraPitchLimiterPlugin.class);
		RuneLite.main(args);
	}
}
