[{"commit":"11b59828c801c3279f2f5e88ce3bfdf96b247010","repository":"https://github.com/vincent0955/Visual-metronome.git","internalName":"visual-metronome","files":[{"fileName":"FontTypes.java","content":"package com.visualmetronome;\n\nimport lombok.Getter;\nimport lombok.RequiredArgsConstructor;\n\n@RequiredArgsConstructor\n@Getter\npublic enum FontTypes\n{\n    REGULAR(\"RS Regular\"),\n    ARIAL(\"Arial\"),\n    CAMBRIA(\"Cambria\"),\n    ROCKWELL(\"Rockwell\"),\n    SEGOE_UI(\"Segoe Ui\"),\n    TIMES_NEW_ROMAN(\"Times New Roman\"),\n    VERDANA(\"Verdana\");\n\n    private final String name;\n\n    @Override\n    public String toString() {\n        return name;\n    }\n}\n","filePath":"src\\main\\java\\com\\visualmetronome\\FontTypes.java"},{"fileName":"FullResizableVisualMetronomeOverlay.java","content":"package com.visualmetronome;\n\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Font;\nimport javax.inject.Inject;\nimport net.runelite.api.Point;\nimport net.runelite.client.ui.overlay.OverlayUtil;\n\npublic class FullResizableVisualMetronomeOverlay extends Overlay\n{\n\n    private final VisualMetronomeConfig config;\n    private final VisualMetronomePlugin plugin;\n\n    private static int TITLE_PADDING \u003d 10;\n    private static final int MINIMUM_SIZE \u003d 16; // too small and resizing becomes impossible, requiring a reset\n    private Point tickCounterCenter;\n\n    @Inject\n    public FullResizableVisualMetronomeOverlay(VisualMetronomeConfig config, VisualMetronomePlugin plugin)\n    {\n        super(plugin);\n        this.config \u003d config;\n        this.plugin \u003d plugin;\n        setPosition(OverlayPosition.ABOVE_CHATBOX_RIGHT);\n        setMinimumSize(MINIMUM_SIZE);\n        setResizable(true);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics)\n    {\n        Dimension preferredSize \u003d getPreferredSize();\n\n        if (preferredSize \u003d\u003d null)\n        {\n            // if this happens, reset to default - should be rare, but eg. alt+rightclick will cause this\n            preferredSize \u003d plugin.DEFAULT_SIZE;\n            setPreferredSize(preferredSize);\n        }\n\n        if (config.enableMetronome())\n        {\n            graphics.setColor(plugin.currentColor);\n            graphics.fillRect(0, 0, preferredSize.width, preferredSize.height);\n            TITLE_PADDING \u003d (Math.min(preferredSize.width, preferredSize.height) / 2 - 4); // scales tick number position with box size\n\n            if (config.showTick())\n            {\n                if (config.disableFontScaling())\n                {\n                    graphics.setColor(config.NumberColor());\n                    if (config.tickCount() \u003d\u003d 1)\n                    {\n                        graphics.drawString(String.valueOf(plugin.currentColorIndex), TITLE_PADDING, preferredSize.height - TITLE_PADDING);\n                    }\n                    else\n                    {\n                        graphics.drawString(String.valueOf(plugin.tickCounter), TITLE_PADDING, preferredSize.height - TITLE_PADDING);\n                    }\n\n                }\n                else\n                {\n                    if (config.fontType() \u003d\u003d FontTypes.REGULAR)\n                    {\n                        graphics.setFont(new Font(FontManager.getRunescapeFont().getName(), Font.PLAIN, Math.min(preferredSize.width, preferredSize.height))); //scales font size based on the size of the metronome\n                        tickCounterCenter \u003d new Point(preferredSize.width / 4, preferredSize.height);\n                    }\n                    else\n                    {\n                        graphics.setFont(new Font(config.fontType().toString(), Font.PLAIN, Math.min(preferredSize.width, Math.min(preferredSize.width, preferredSize.height))));\n                        tickCounterCenter \u003d new Point(preferredSize.width / 4, preferredSize.height - (preferredSize.height / 8));\n                    }\n\n                    final Point tickCounterPoint \u003d tickCounterCenter;\n                    if (config.tickCount() \u003d\u003d 1)\n                    {\n                        OverlayUtil.renderTextLocation(graphics, tickCounterPoint, String.valueOf(plugin.currentColorIndex), config.NumberColor());\n                    }\n                    else\n                    {\n                        OverlayUtil.renderTextLocation(graphics, tickCounterPoint, String.valueOf(plugin.tickCounter), config.NumberColor());\n                    }\n                }\n            }\n        }\n\n        return preferredSize;\n    }\n}\n","filePath":"src\\main\\java\\com\\visualmetronome\\FullResizableVisualMetronomeOverlay.java"},{"fileName":"TickRequestMessage.java","content":"package com.visualmetronome.messages;\n\nimport net.runelite.client.party.messages.PartyMemberMessage;\n\npublic class TickRequestMessage extends PartyMemberMessage\n{\n    private String target;\n\n    public TickRequestMessage() {}\n\n    public TickRequestMessage(String target)\n    {\n        this.target \u003d target;\n    }\n\n    public String getTarget()\n    {\n        return target;\n    }\n\n    public void setTarget(String target)\n    {\n        this.target \u003d target;\n    }\n}\n","filePath":"src\\main\\java\\com\\visualmetronome\\messages\\TickRequestMessage.java"},{"fileName":"TickSyncMessage.java","content":"package com.visualmetronome.messages;\n\nimport net.runelite.client.party.messages.PartyMemberMessage;\n\npublic class TickSyncMessage extends PartyMemberMessage\n{\n    private int tickCounter;\n    private int tickCounter2;\n    private int tickCounter3;\n    private int colorIndex;\n    private int configColorIndex;\n    private int tickCount;\n    private int tickCount2;\n    private int tickCount3;\n\n    private String displayName;\n    private String localSender;\n\n    public TickSyncMessage() {}\n\n    public TickSyncMessage(int tickCounter, int tickCounter2, int tickCounter3, int colorIndex, int configColorIndex, int tickCount, int tickCount2, int tickCount3, String localSender)\n    {\n        this.tickCounter \u003d tickCounter;\n        this.tickCounter2 \u003d tickCounter2;\n        this.tickCounter3 \u003d tickCounter3;\n        this.colorIndex \u003d colorIndex;\n        this.configColorIndex \u003d configColorIndex;\n        this.tickCount \u003d tickCount;\n        this.tickCount2 \u003d tickCount2;\n        this.tickCount3 \u003d tickCount3;\n        this.localSender \u003d localSender;\n\n    }\n\n    public String getlocalSender()\n    {\n        return localSender;\n    }\n\n    public void setlocalSender(String localSender)\n    {\n        this.localSender \u003d localSender;\n    }\n\n    public String getDisplayName()\n    {\n        return displayName;\n    }\n\n    public void setDisplayName(String displayName)\n    {\n        this.displayName \u003d displayName;\n    }\n\n    public int getTickCount()\n    {\n        return tickCount;\n    }\n\n    public int getTickCount2()\n    {\n        return tickCount2;\n    }\n\n    public int getTickCount3()\n    {\n        return tickCount3;\n    }\n\n    public int getTickCounter()\n    {\n        return tickCounter;\n    }\n\n    public int getTickCounter2()\n    {\n        return tickCounter2;\n    }\n\n    public int getTickCounter3()\n    {\n        return tickCounter3;\n    }\n\n    public int getColorIndex()\n    {\n        return colorIndex;\n    }\n\n    public int getConfigColorIndex()\n    {\n        return configColorIndex;\n    }\n}\n","filePath":"src\\main\\java\\com\\visualmetronome\\messages\\TickSyncMessage.java"},{"fileName":"MouseFollowingOverlay.java","content":"package com.visualmetronome;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.Point;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPriority;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\n\nimport javax.inject.Inject;\nimport java.awt.Color;\nimport java.awt.Font;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\n\npublic class MouseFollowingOverlay extends Overlay {\n    private final Client client;\n    private final VisualMetronomeConfig config;\n    private final VisualMetronomePlugin plugin;\n\n    @Inject\n    public MouseFollowingOverlay(Client client, VisualMetronomeConfig config, VisualMetronomePlugin plugin)\n    {\n        super(plugin);\n        this.client \u003d client;\n        this.config \u003d config;\n        this.plugin \u003d plugin;\n        setPosition(OverlayPosition.DYNAMIC);\n        setLayer(OverlayLayer.ALWAYS_ON_TOP);\n        setPriority(OverlayPriority.HIGH);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics)\n    {\n        if (config.mouseFollowingTick())\n        {\n            Point mousePos \u003d client.getMouseCanvasPosition();\n            if (mousePos !\u003d null)\n            {\n                // Set font\n                Font font \u003d config.fontType() \u003d\u003d FontTypes.REGULAR\n                        ? FontManager.getRunescapeFont().deriveFont(Font.PLAIN, config.fontSize())\n                        : new Font(config.fontType().toString(), Font.PLAIN, config.fontSize());\n                graphics.setFont(font);\n\n                // Set text\n                String text \u003d config.tickCount() \u003d\u003d 1\n                        ? String.valueOf(plugin.currentColorIndex)\n                        : String.valueOf(plugin.tickCounter);\n\n                // Apply configurable offsets using getX()/getY()\n                Point textPosition \u003d new Point(\n                        (int)mousePos.getX() + config.mouseOffsetX(),\n                        (int)mousePos.getY() + config.mouseOffsetY()\n                );\n\n                // Set which color to use\n\n                Color numberColor;\n                if (config.overheadUseCurrentColor())\n                {\n                    numberColor \u003d plugin.currentColor;\n                }\n                else\n                {\n                    numberColor \u003d config.NumberColor();\n                }\n\n                // Render\n                OverlayUtil.renderTextLocation(graphics, textPosition, text, numberColor);\n            }\n        }\n        return null;\n    }\n}","filePath":"src\\main\\java\\com\\visualmetronome\\MouseFollowingOverlay.java"},{"fileName":"VisualMetronomeConfig.java","content":"package com.visualmetronome;\n\nimport net.runelite.client.config.Alpha;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.Range;\nimport net.runelite.client.config.ConfigSection;\nimport net.runelite.client.config.Keybind;\n\nimport java.awt.Color;\n\n@ConfigGroup(\"visualmetronome\")\npublic interface VisualMetronomeConfig extends Config\n{\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"enableMetronome\",\n\t\t\tname \u003d \"Visual Metronome\",\n\t\t\tdescription \u003d \"Enable visual metronome\"\n\t)\n\tdefault boolean enableMetronome()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d \"highlightCurrentTile\",\n\t\t\tname \u003d \"Enable True Tile Overlay\",\n\t\t\tdescription \u003d \"Highlights true player tile using the metronome colors (replacement for tile indicator plugin setting)\"\n\t)\n\tdefault boolean highlightCurrentTile()\n\t{\n\t\treturn false;\n\t}\n\n\n\t@Range(\n\t\t\tmin \u003d 16\n\t)\n\t@ConfigItem(\n\t\t\tposition \u003d 3,\n\t\t\tkeyName \u003d \"boxWidth\",\n\t\t\tname \u003d \"Default Box Size (Alt + Right Click Box)\",\n\t\t\tdescription \u003d \"Configure the default length and width of the box. Use alt + right click on the box to reset to the size specified\"\n\t)\n\tdefault int boxWidth()\n\t{\n\t\treturn 25;\n\t}\n\n\t@Range(\n\t\t\tmin \u003d 1\n\t)\n\t@ConfigItem(\n\t\t\tposition \u003d 4,\n\t\t\tkeyName \u003d \"tickCount\",\n\t\t\tname \u003d \"Tick Count\",\n\t\t\tdescription \u003d \"The tick on which the color changes\"\n\t)\n\tdefault int tickCount()\n\t{\n\t\treturn 1;\n\t}\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Tick Number Settings\",\n\t\t\tdescription \u003d \"Change Tick Number settings\",\n\t\t\tposition \u003d 5\n\t)\n\tString TickNumberSettings \u003d \"Tick Number Settings\";\n\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"showTick\",\n\t\t\tname \u003d \"Show Metronome Tick Number\",\n\t\t\tdescription \u003d \"Shows current tick number on the metronome\",\n\t\t\tsection \u003d TickNumberSettings\n\t)\n\tdefault boolean showTick()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d \"showPlayerTick\",\n\t\t\tname \u003d \"Show Tick Number Above Player\",\n\t\t\tdescription \u003d \"Shows current tick number above the player\",\n\t\t\tsection \u003d TickNumberSettings\n\t)\n\tdefault boolean showPlayerTick()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 3,\n\t\t\tkeyName \u003d \"disableFontScaling\",\n\t\t\tname \u003d \"Disable Font Size Scaling (Metronome Tick Only)\",\n\t\t\tdescription \u003d \"Disables font size scaling for metronome tick number\",\n\t\t\tsection \u003d TickNumberSettings\n\t)\n\tdefault boolean disableFontScaling()\n\t{\n\t\treturn false;\n\t}\n\n\t@Range(\n\t\t\tmin \u003d 8,\n\t\t\tmax \u003d 50\n\t)\n\t@ConfigItem(\n\t\t\tposition \u003d 4,\n\t\t\tkeyName \u003d \"fontSize\",\n\t\t\tname \u003d \"Font Size (Overhead Tick Only)\",\n\t\t\tdescription \u003d \"Change the font size of the overhead Tick Number\",\n\t\t\tsection \u003d TickNumberSettings\n\t)\n\tdefault int fontSize()\n\t{\n\t\treturn 15;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 5,\n\t\t\tkeyName \u003d \"countColor\",\n\t\t\tname \u003d \"Tick Number Color\",\n\t\t\tdescription \u003d \"Configures the color of tick number\",\n\t\t\tsection \u003d TickNumberSettings\n\t)\n\tdefault Color NumberColor()\n\t{\n\t\treturn Color.CYAN;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 6,\n\t\t\tkeyName \u003d \"fontType\",\n\t\t\tname \u003d \"Font Type\",\n\t\t\tdescription \u003d \"Change the font of the Tick Number\",\n\t\t\tsection \u003d TickNumberSettings\n\t)\n\tdefault FontTypes fontType() { return FontTypes.REGULAR; }\n\n\t@ConfigSection(\n\t\t\tname \u003d \"True Tile Overlay Settings\",\n\t\t\tdescription \u003d \"Settings only applied to True Tile Overlay\",\n\t\t\tposition \u003d 6\n\t)\n\tString TileSettings \u003d \"True Tile Overlay Settings\";\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"currentTileFillColor\",\n\t\t\tname \u003d \"True Tile Fill Color\",\n\t\t\tdescription \u003d \"Fill color of the true tile overlay\",\n\t\t\tsection \u003d TileSettings\n\t)\n\tdefault Color currentTileFillColor()\n\t{\n\t\treturn new Color(0, 0, 0, 50);\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d \"currentTileBorderWidth\",\n\t\t\tname \u003d \"True Tile Border Width\",\n\t\t\tdescription \u003d \"Border size of the true tile overlay\",\n\t\t\tsection \u003d TileSettings\n\t)\n\tdefault double currentTileBorderWidth()\n\t{\n\t\treturn 2;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 3,\n\t\t\tkeyName \u003d \"changeFillColor\",\n\t\t\tname \u003d \"Enable Tile Fill Color Metronome\",\n\t\t\tdescription \u003d \"Makes the tile fill color change with the metronome\",\n\t\t\tsection \u003d TileSettings\n\t)\n\tdefault boolean changeFillColor()\n\t{\n\t\treturn false;\n\t}\n\n\t@Range(\n\t\t\tmin \u003d 0,\n\t\t\tmax \u003d 255\n\t)\n\t@ConfigItem(\n\t\t\tposition \u003d 4,\n\t\t\tkeyName \u003d \"changeFillColorOpacity\",\n\t\t\tname \u003d \"Fill Color Metronome Opacity\",\n\t\t\tdescription \u003d \"Opacity of the tile fill metronome color if the option above is enabled. Otherwise, the opacity is determined by the True Tile Fill Color setting\",\n\t\t\tsection \u003d TileSettings\n\t)\n\tdefault int changeFillColorOpacity()\n\t{\n\t\treturn 50;\n\t}\n\n\n    @ConfigSection(\n            name \u003d \"Party Sync Settings\",\n            description \u003d \"Settings for syncing your metronome to a member of your party, this may modify the Tick Count and Number of Colors config settings\",\n            position \u003d 7\n    )\n\n    String PartySyncSettings \u003d \"Party Sync Settings\";\n\n    @ConfigItem(\n            position \u003d 1,\n            keyName \u003d \"enablePartySync\",\n            name \u003d \"Sync with Target\",\n            description \u003d \"Synchronize tick counters with a selected party member\",\n            section \u003d PartySyncSettings\n    )\n\n    default boolean enablePartySync()\n    {\n        return false;\n    }\n\n    @ConfigItem(\n            position \u003d 2,\n            keyName \u003d \"syncTarget\",\n            name \u003d \"Sync Target\",\n            description \u003d \"Choose which party member to sync ticks with\",\n            section \u003d PartySyncSettings\n    )\n    default String syncTarget()\n    {\n        return \"\";\n    }\n\n\n    @ConfigSection(\n\t\t\tname \u003d \"Color Settings\",\n\t\t\tdescription \u003d \"Change the colors and number of colors to cycle through\",\n\t\t\tposition \u003d 8\n\t)\n\tString ColorSettings \u003d \"Color Settings\";\n\n\n\t@Range(\n\t\t\tmin \u003d 2,\n\t\t\tmax \u003d 10\n\t)\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"colorCycle\",\n\t\t\tname \u003d \"Number of Colors\",\n\t\t\tdescription \u003d \"The number of colors it cycles through\",\n\t\t\tsection \u003d ColorSettings\n\t)\n\tdefault int colorCycle()\n\t{\n\t\treturn 2;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d \"tickColor\",\n\t\t\tname \u003d \"Tick Color\",\n\t\t\tdescription \u003d \"Configures the color of tick\",\n\t\t\tsection \u003d ColorSettings\n\t)\n\tdefault Color getTickColor()\n\t{\n\t\treturn Color.WHITE;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 3,\n\t\t\tkeyName \u003d \"tockColor\",\n\t\t\tname \u003d \"Tock Color\",\n\t\t\tdescription \u003d \"Configures the color of tock\",\n\t\t\tsection \u003d ColorSettings\n\t)\n\tdefault Color getTockColor()\n\t{\n\t\treturn Color.GRAY;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 4,\n\t\t\tkeyName \u003d \"tick3Color\",\n\t\t\tname \u003d \"3rd Tick Color\",\n\t\t\tdescription \u003d \"Configures the color of 3rd tick if enabled\",\n\t\t\tsection \u003d ColorSettings\n\t)\n\tdefault Color getTick3Color()\n\t{\n\t\treturn Color.DARK_GRAY;\n\t}\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 5,\n\t\t\tkeyName \u003d \"tick4Color\",\n\t\t\tname \u003d \"4th Tick Color\",\n\t\t\tdescription \u003d \"Configures the color of the 4th tick if enabled\",\n\t\t\tsection \u003d ColorSettings\n\t)\n\tdefault Color getTick4Color()\n\t{\n\t\treturn Color.BLACK;\n\t}\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 6,\n\t\t\tkeyName \u003d \"tick5Color\",\n\t\t\tname \u003d \"5th Tick Color\",\n\t\t\tdescription \u003d \"Configures the color of the 5th tick if enabled\",\n\t\t\tsection \u003d ColorSettings\n\t)\n\tdefault Color getTick5Color()\n\t{\n\t\treturn new Color(112, 131, 255);\n\t}\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 7,\n\t\t\tkeyName \u003d \"tick6Color\",\n\t\t\tname \u003d \"6th Tick Color\",\n\t\t\tdescription \u003d \"Configures the color of the 6th tick if enabled\",\n\t\t\tsection \u003d ColorSettings\n\t)\n\tdefault Color getTick6Color()\n\t{\n\t\treturn new Color(0, 23, 171);\n\t}\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 8,\n\t\t\tkeyName \u003d \"tick7Color\",\n\t\t\tname \u003d \"7th Tick Color\",\n\t\t\tdescription \u003d \"Configures the color of the 7th tick if enabled\",\n\t\t\tsection \u003d ColorSettings\n\t)\n\tdefault Color getTick7Color()\n\t{\n\t\treturn new Color(107, 255, 124);\n\t}\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 9,\n\t\t\tkeyName \u003d \"tick8Color\",\n\t\t\tname \u003d \"8th Tick Color\",\n\t\t\tdescription \u003d \"Configures the color of the 8th tick if enabled\",\n\t\t\tsection \u003d ColorSettings\n\t)\n\tdefault Color getTick8Color()\n\t{\n\t\treturn new Color(0, 191, 22);\n\t}\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 10,\n\t\t\tkeyName \u003d \"tick9Color\",\n\t\t\tname \u003d \"9th Tick Color\",\n\t\t\tdescription \u003d \"Configures the color of the 9th tick if enabled\",\n\t\t\tsection \u003d ColorSettings\n\t)\n\tdefault Color getTick9Color()\n\t{\n\t\treturn new Color(255, 105, 94);\n\t}\n\t@Alpha\n\t@ConfigItem(\n\t\t\tposition \u003d 11,\n\t\t\tkeyName \u003d \"tick10Color\",\n\t\t\tname \u003d \"10th Tick Color\",\n\t\t\tdescription \u003d \"Configures the color of the 10th tick if enabled\",\n\t\t\tsection \u003d ColorSettings\n\t)\n\tdefault Color getTick10Color()\n\t{\n\t\treturn new Color(255, 17, 0);\n\t}\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Hotkey Settings\",\n\t\t\tdescription \u003d \"Settings that use hotkeys\",\n\t\t\tposition \u003d 9\n\t)\n\tString HotkeySettings \u003d \"Hotkey Settings\";\n\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"tickResetHotkey\",\n\t\t\tname \u003d \"Tick Cycle Reset Hotkey\",\n\t\t\tdescription \u003d \"Hotkey to reset the tick cycle back to 0\",\n\t\t\tsection \u003d HotkeySettings\n\t)\n\tdefault Keybind tickResetHotkey() {\n\t\treturn Keybind.NOT_SET;\n\t}\n\n\t@Range(\n\t\tmin \u003d 0\n\t)\n\t@ConfigItem(\n\t\tposition \u003d 2,\n\t\tkeyName \u003d \"tickResetStartTick\",\n\t\tname \u003d \"Reset to Tick\",\n\t\tdescription \u003d \"Choose which tick the hotkey resets the timer to\",\n\t\tsection \u003d HotkeySettings\n\t)\n\tdefault int tickResetStartTick()\n\t{\n\t\treturn 0;\n\t}\n\t@ConfigSection(\n\t\t\tname \u003d \"Mouse Following Settings\",\n\t\t\tdescription \u003d \"Settings for mouse-following tick counter\",\n\t\t\tposition \u003d 10,\n\t\t\tclosedByDefault \u003d true\n\t)\n\tString mouseFollowingSettings \u003d \"Mouse Following Settings\";\n\t@ConfigItem(\n\t\t\tposition \u003d 0,\n\t\t\tkeyName \u003d \"mouseFollowingTick\",\n\t\t\tname \u003d \"Tick Counter Follows Mouse\",\n\t\t\tdescription \u003d \"Makes the tick counter follow your mouse cursor. It uses the same settings as the Overhead Tick Number\",\n\t\t\tsection \u003d mouseFollowingSettings\n\t)\n\tdefault boolean mouseFollowingTick()\n\t{\n\t\treturn false;\n\t}\n\n\t@Range(\n\t\t\tmin \u003d -100,\n\t\t\tmax \u003d 100\n\t)\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"mouseOffsetX\",\n\t\t\tname \u003d \"Mouse X Offset\",\n\t\t\tdescription \u003d \"X offset from mouse cursor for tick counter\",\n\t\t\tsection \u003d mouseFollowingSettings\n\t)\n\tdefault int mouseOffsetX()\n\t{\n\t\treturn 10;\n\t}\n\n\t@Range(\n\t\t\tmin \u003d -100,\n\t\t\tmax \u003d 100\n\t)\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d \"mouseOffsetY\",\n\t\t\tname \u003d \"Mouse Y Offset\",\n\t\t\tdescription \u003d \"Y offset from mouse cursor for tick counter\",\n\t\t\tsection \u003d mouseFollowingSettings\n\t)\n\tdefault int mouseOffsetY()\n\t{\n\t\treturn -10;\n\t}\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Additional Overhead Cycle Settings\",\n\t\t\tdescription \u003d \"Enable additional tick cycles to track\",\n\t\t\tposition \u003d 11,\n\t\t\tclosedByDefault \u003d true\n\t)\n\tString additionalOverheadSettings \u003d \"Additional Overhead Tick Settings\";\n\n\t@ConfigItem(\n\t\t\tposition \u003d 1,\n\t\t\tkeyName \u003d \"showSecondCycle\",\n\t\t\tname \u003d \"Enable Second Cycle\",\n\t\t\tdescription \u003d \"Enables second tick number above the player\",\n\t\t\tsection \u003d additionalOverheadSettings\n\t)\n\tdefault boolean enableCycle2()\n\t{\n\t\treturn false;\n\t}\n\n\t@Range(\n\t\t\tmin \u003d 2\n\t)\n\t@ConfigItem(\n\t\t\tposition \u003d 2,\n\t\t\tkeyName \u003d \"tickCount2\",\n\t\t\tname \u003d \"Second Cycle Length\",\n\t\t\tdescription \u003d \"Length for the second cycle in ticks\",\n\t\t\tsection \u003d additionalOverheadSettings\n\t)\n\tdefault int tickCount2()\n\t{\n\t\treturn 2;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 3,\n\t\t\tkeyName \u003d \"cycle2Color\",\n\t\t\tname \u003d \"Second Cycle Color\",\n\t\t\tdescription \u003d \"Configures the color of second cycle\",\n\t\t\tsection \u003d additionalOverheadSettings\n\t)\n\tdefault Color cycle2Color()\n\t{\n\t\treturn Color.CYAN;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 4,\n\t\t\tkeyName \u003d \"showThirdCycle\",\n\t\t\tname \u003d \"Enable Third Cycle\",\n\t\t\tdescription \u003d \"Enables third tick number above the player\",\n\t\t\tsection \u003d additionalOverheadSettings\n\t)\n\tdefault boolean enableCycle3()\n\t{\n\t\treturn false;\n\t}\n\t@Range(\n\t\t\tmin \u003d 2\n\t)\n\t@ConfigItem(\n\t\t\tposition \u003d 5,\n\t\t\tkeyName \u003d \"tickCount3\",\n\t\t\tname \u003d \"Third Cycle Length\",\n\t\t\tdescription \u003d \"Length for the third cycle in ticks\",\n\t\t\tsection \u003d additionalOverheadSettings\n\t)\n\tdefault int tickCount3()\n\t{\n\t\treturn 2;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 6,\n\t\t\tkeyName \u003d \"cycle3Color\",\n\t\t\tname \u003d \"Third Cycle Color\",\n\t\t\tdescription \u003d \"Configures the color of third cycle\",\n\t\t\tsection \u003d additionalOverheadSettings\n\t)\n\tdefault Color cycle3Color()\n\t{\n\t\treturn Color.CYAN;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 7,\n\t\t\tkeyName \u003d \"overheadCyclesGapDistance\",\n\t\t\tname \u003d \"Second and Third Tick Gap Distance\",\n\t\t\tdescription \u003d \"Configures the distance of the gap between the overhead ticks\",\n\t\t\tsection \u003d additionalOverheadSettings\n\t)\n\tdefault int overheadCyclesGapDistance()\n\t{\n\t\treturn 20;\n\t}\n\n\t@Range(\n\t\t\tmin \u003d -500,\n\t\t\tmax \u003d 500\n\t)\n\t@ConfigItem(\n\t\t\tposition \u003d 8,\n\t\t\tkeyName \u003d \"overheadHeight\",\n\t\t\tname \u003d \"Overhead Tick Height\",\n\t\t\tdescription \u003d \"Configures the height of overhead ticks\",\n\t\t\tsection \u003d additionalOverheadSettings\n\t)\n\tdefault int overheadHeight()\n\t{\n\t\treturn 20;\n\t}\n\n\t@Range(\n\t\t\tmin \u003d -50,\n\t\t\tmax \u003d 50\n\t)\n\t@ConfigItem(\n\t\t\tposition \u003d 9,\n\t\t\tkeyName \u003d \"overheadXCenterOffset\",\n\t\t\tname \u003d \"Overhead Tick X Center Offset\",\n\t\t\tdescription \u003d \"Configures the X offset of overhead ticks\",\n\t\t\tsection \u003d additionalOverheadSettings\n\t)\n\tdefault int overheadXCenterOffset()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\t\tposition \u003d 10,\n\t\t\tkeyName \u003d \"overheadUseCurrentColor\",\n\t\t\tname \u003d \"Use Metronome Color for Overhead\",\n\t\t\tdescription \u003d \"Uses the metronome color for the overhead tick color instead of Tick Number Color\",\n\t\t\tsection \u003d additionalOverheadSettings\n\t)\n\tdefault boolean overheadUseCurrentColor()\n\t{\n\t\treturn false;\n\t}\n\n}\n\n","filePath":"src\\main\\java\\com\\visualmetronome\\VisualMetronomeConfig.java"},{"fileName":"VisualMetronomeNumberOverlay.java","content":"package com.visualmetronome;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.Point;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\nimport javax.inject.Inject;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Font;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPriority;\nimport java.awt.Color;\n\n\npublic class VisualMetronomeNumberOverlay extends Overlay\n{\n\n    private final Client client;\n    private final VisualMetronomeConfig config;\n    private final VisualMetronomePlugin plugin;\n\n    @Inject\n    public VisualMetronomeNumberOverlay(Client client, VisualMetronomeConfig config, VisualMetronomePlugin plugin)\n    {\n        super(plugin);\n        this.client \u003d client;\n        this.config \u003d config;\n        this.plugin \u003d plugin;\n        setPosition(OverlayPosition.DYNAMIC);\n        setLayer(OverlayLayer.UNDER_WIDGETS);\n        setPriority(OverlayPriority.MED);\n\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics)\n    {\n        if (config.showPlayerTick())\n        {\n            if (config.fontType() \u003d\u003d FontTypes.REGULAR)\n            {\n                graphics.setFont(new Font(FontManager.getRunescapeFont().getName(), Font.PLAIN, config.fontSize()));\n            }\n            else\n            {\n                graphics.setFont(new Font(config.fontType().toString(), Font.PLAIN, config.fontSize()));\n            }\n\n            // Set which color to use\n            Color numberColor;\n            if (config.overheadUseCurrentColor())\n            {\n                numberColor \u003d plugin.currentColor;\n            }\n            else\n            {\n                numberColor \u003d config.NumberColor();\n            }\n\n            final int height \u003d client.getLocalPlayer().getLogicalHeight() + config.overheadHeight();\n            final LocalPoint localLocation \u003d client.getLocalPlayer().getLocalLocation();\n            final Point playerPoint \u003d Perspective.localToCanvas(client, localLocation, client.getPlane(), height);\n            final int valueX \u003d playerPoint.getX() + config.overheadXCenterOffset();\n            final int valueY \u003d playerPoint.getY();\n            final Point tickPoint \u003d new Point(valueX,valueY);\n\n            if (config.tickCount() \u003d\u003d 1)\n            {\n                OverlayUtil.renderTextLocation(graphics, tickPoint, String.valueOf(plugin.currentColorIndex), numberColor);\n            }\n            else\n            {\n                OverlayUtil.renderTextLocation(graphics, tickPoint, String.valueOf(plugin.tickCounter), numberColor);\n            }\n\n            if (config.enableCycle2())\n            {\n                final int valueX2 \u003d valueX - config.overheadCyclesGapDistance();\n                final Point tick2Point \u003d new Point(valueX2,valueY);\n                OverlayUtil.renderTextLocation(graphics, tick2Point, String.valueOf(plugin.tickCounter2), config.cycle2Color());\n            }\n\n            if (config.enableCycle3())\n            {\n                final int valueX3 \u003d valueX + config.overheadCyclesGapDistance();\n                final Point tick3Point \u003d new Point(valueX3,valueY);\n                OverlayUtil.renderTextLocation(graphics, tick3Point, String.valueOf(plugin.tickCounter3), config.cycle3Color());\n            }\n\n        }\n        return null;\n    }\n\n}\n\n\n","filePath":"src\\main\\java\\com\\visualmetronome\\VisualMetronomeNumberOverlay.java"},{"fileName":"VisualMetronomePlugin.java","content":"package com.visualmetronome;\n\nimport com.google.inject.Provides;\nimport net.runelite.api.Point;\nimport net.runelite.api.Client;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport javax.inject.Inject;\nimport java.awt.event.KeyEvent;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport net.runelite.client.input.KeyListener;\nimport net.runelite.client.input.KeyManager;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport net.runelite.client.party.PartyService;\nimport net.runelite.client.party.WSClient;\nimport net.runelite.client.party.events.UserJoin;\nimport net.runelite.client.party.events.UserPart;\nimport com.visualmetronome.messages.TickSyncMessage;\nimport com.visualmetronome.messages.TickRequestMessage;\nimport net.runelite.client.party.PartyMember;\n\nimport java.util.Collections;\nimport java.util.List;\n\n\n@PluginDescriptor(\n        name \u003d \"Visual Metronome\",\n        description \u003d \"Shows a visual cue on an overlay every game tick to help timing based activities\",\n        tags \u003d {\"timers\", \"overlays\", \"tick\", \"skilling\"}\n)\npublic class VisualMetronomePlugin extends Plugin implements KeyListener\n{\n\n    @Inject\n    private OverlayManager overlayManager;\n\n    @Inject\n    private ConfigManager configManager;\n\n    @Inject\n    private VisualMetronomeTileOverlay tileOverlay;\n\n    @Inject\n    private VisualMetronomeNumberOverlay numberOverlay;\n\n    @Inject\n    private FullResizableVisualMetronomeOverlay overlay;\n\n    @Inject\n    private VisualMetronomeConfig config;\n\n    @Inject\n    private KeyManager keyManager;\n\n    @Inject\n    private Client client;\n\n    @Inject\n    private MouseFollowingOverlay mouseFollowingOverlay;\n\n    @Inject\n    private PartyService partyService;\n\n    @Inject\n    private WSClient wsClient;\n\n    List\u003cPartyMember\u003e members \u003d Collections.emptyList();\n    private boolean hasRespondedThisTick \u003d false;\n\n    private static final String CONFIG_GROUP \u003d \"visualmetronome\";\n    protected int currentColorIndex \u003d 0;\n    protected int tickCounter \u003d 0;\n    protected int tickCounter2 \u003d 0;\n    protected int tickCounter3 \u003d 0;\n    protected Color currentColor \u003d Color.WHITE;\n    protected Dimension DEFAULT_SIZE \u003d new Dimension(25, 25);\n\n    @Provides\n    VisualMetronomeConfig provideConfig(ConfigManager configManager)\n    {\n        return configManager.getConfig(VisualMetronomeConfig.class);\n    }\n\n    @Subscribe\n    public void onGameTick(GameTick tick)\n    {\n        if (tickCounter % config.tickCount() \u003d\u003d 0)\n        {\n            tickCounter \u003d 0;\n            if (currentColorIndex \u003d\u003d config.colorCycle())\n            {\n                currentColorIndex \u003d 0;\n            }\n            setCurrentColorByColorIndex(++currentColorIndex);\n        }\n        tickCounter++;\n        if (tickCounter2 % config.tickCount2() \u003d\u003d 0){\n            tickCounter2 \u003d 0;\n        }\n        tickCounter2++;\n        if (tickCounter3 % config.tickCount3() \u003d\u003d 0){\n            tickCounter3 \u003d 0;\n        }\n        tickCounter3++;\n\n        //party sync\n        hasRespondedThisTick \u003d false;\n        if (config.enablePartySync())\n        {\n            if (!members.isEmpty())\n            {\n                String targetName \u003d config.syncTarget();\n                partyService.send(new TickRequestMessage(targetName));\n            }\n        }\n\n    }\n\n    @Subscribe\n    public void onTickRequestMessage(TickRequestMessage target)\n    {\n        String syncTarget \u003d target.getTarget();\n        PartyMember localPlayer \u003d partyService.getLocalMember();\n\n        if (!localPlayer.getDisplayName().equalsIgnoreCase(syncTarget))\n        {\n            return;\n        }\n\n        if (hasRespondedThisTick)\n        {\n            return;\n        }\n        hasRespondedThisTick \u003d true;\n\n        TickSyncMessage msg \u003d new TickSyncMessage(\n                tickCounter,\n                tickCounter2,\n                tickCounter3,\n                currentColorIndex,\n                config.colorCycle(),\n                config.tickCount(),\n                config.tickCount2(),\n                config.tickCount3(),\n                localPlayer.getDisplayName()\n        );\n        partyService.send(msg);\n    }\n\n    @Subscribe\n    public void onTickSyncMessage(TickSyncMessage msg)\n    {\n        if (!config.enablePartySync())\n        {\n            return;\n        }\n\n        String Sender \u003d msg.getlocalSender();\n        String targetName \u003d config.syncTarget();\n\n        if (!Sender.equalsIgnoreCase(targetName))\n        {\n            return;\n        }\n\n        //  Apply received counters\n        this.tickCounter \u003d msg.getTickCounter();\n        this.tickCounter2 \u003d msg.getTickCounter2();\n        this.tickCounter3 \u003d msg.getTickCounter3();\n\n        this.currentColorIndex \u003d msg.getColorIndex();\n        setCurrentColorByColorIndex(this.currentColorIndex);\n\n        //  Update config so UI reflects remote tickCount\n        configManager.setConfiguration(\n                CONFIG_GROUP,\n                \"tickCount\",\n                msg.getTickCount()\n        );\n        configManager.setConfiguration(\n                CONFIG_GROUP,\n                \"tickCount2\",\n                msg.getTickCount2()\n        );\n        configManager.setConfiguration(\n                CONFIG_GROUP,\n                \"tickCount3\",\n                msg.getTickCount3()\n        );\n        configManager.setConfiguration(\n                CONFIG_GROUP,\n                \"colorCycle\",\n                msg.getConfigColorIndex()\n        );\n    }\n\n    @Subscribe\n    public void onUserJoin(UserJoin event)\n    {\n        members \u003d partyService.getMembers();\n    }\n\n    @Subscribe\n    public void onUserPart(UserPart event)\n    {\n        members \u003d partyService.getMembers();\n    }\n\n\n    @Subscribe\n    public void onConfigChanged(ConfigChanged event)\n    {\n        if (currentColorIndex \u003e config.colorCycle())\n        {\n            currentColorIndex \u003d 0;\n        }\n\n        if (tickCounter \u003e config.tickCount())\n        {\n            tickCounter \u003d 0;\n        }\n        if (tickCounter2 \u003e config.tickCount2())\n        {\n            tickCounter2 \u003d 0;\n        }\n        if (tickCounter3 \u003e config.tickCount3())\n        {\n            tickCounter3 \u003d 0;\n        }\n\n        DEFAULT_SIZE \u003d new Dimension(config.boxWidth(), config.boxWidth());\n    }\n\n    @Override\n    protected void startUp() throws Exception\n    {\n        DEFAULT_SIZE \u003d new Dimension(config.boxWidth(), config.boxWidth());\n        overlay.setPreferredSize(DEFAULT_SIZE);\n        overlayManager.add(overlay);\n        overlayManager.add(tileOverlay);\n        overlayManager.add(numberOverlay);\n        overlayManager.add(mouseFollowingOverlay);\n        keyManager.registerKeyListener(this);\n        wsClient.registerMessage(TickSyncMessage.class);\n        wsClient.registerMessage(TickRequestMessage.class);\n\n    }\n\n    @Override\n    protected void shutDown() throws Exception\n    {\n        overlayManager.remove(overlay);\n        overlayManager.remove(tileOverlay);\n        overlayManager.remove(numberOverlay);\n        tickCounter \u003d 0;\n        tickCounter2 \u003d 0;\n        tickCounter3 \u003d 0;\n        currentColorIndex \u003d 0;\n        currentColor \u003d config.getTickColor();\n        overlayManager.remove(mouseFollowingOverlay);\n        keyManager.unregisterKeyListener(this);\n        wsClient.unregisterMessage(TickSyncMessage.class);\n        wsClient.unregisterMessage(TickRequestMessage.class);\n\n    }\n\n    //hotkey settings\n    @Override\n    public void keyTyped(KeyEvent e)\n    {\n    }\n\n    @Override\n    public void keyPressed(KeyEvent e)\n    {\n        if (config.tickResetHotkey().matches(e))\n        {\n            int resetValue \u003d 0;\n\n            // Reset Cycle 1\n            if (config.tickCount() \u003e 1)\n            {\n                // Prevent out of bounds by setting to 0 if reset start is above tick count\n                resetValue \u003d (config.tickResetStartTick() \u003e\u003d config.tickCount()) ? 0 : config.tickResetStartTick();\n                // If resetting to 0, set color index to 0 as well so that the color is set to the first color next\n                // onGameTick\n                currentColorIndex \u003d resetValue \u003d\u003d 0 ? 0 : 1;\n            }\n            else\n            {\n                resetValue \u003d (config.tickResetStartTick() \u003e\u003d config.colorCycle()) ? 0 : config.tickResetStartTick();\n                currentColorIndex \u003d resetValue;\n            }\n            tickCounter \u003d resetValue;\n            setCurrentColorByColorIndex(currentColorIndex);\n\n            tickCounter2 \u003d (config.tickResetStartTick() \u003e\u003d config.tickCount2()) ? 0 : config.tickResetStartTick();\n            tickCounter3 \u003d (config.tickResetStartTick() \u003e\u003d config.tickCount3()) ? 0 : config.tickResetStartTick();\n        }\n    }\n\n    @Override\n    public void keyReleased(KeyEvent e)\n    {\n    }\n\n    private void setCurrentColorByColorIndex(int currentColorIndex)\n    {\n        switch (currentColorIndex)\n        {\n            case 1:\n                currentColor \u003d config.getTickColor();\n                break;\n            case 2:\n                currentColor \u003d config.getTockColor();\n                break;\n            case 3:\n                currentColor \u003d config.getTick3Color();\n                break;\n            case 4:\n                currentColor \u003d config.getTick4Color();\n                break;\n            case 5:\n                currentColor \u003d config.getTick5Color();\n                break;\n            case 6:\n                currentColor \u003d config.getTick6Color();\n                break;\n            case 7:\n                currentColor \u003d config.getTick7Color();\n                break;\n            case 8:\n                currentColor \u003d config.getTick8Color();\n                break;\n            case 9:\n                currentColor \u003d config.getTick9Color();\n                break;\n            case 10:\n                currentColor \u003d config.getTick10Color();\n        }\n    }\n}\n","filePath":"src\\main\\java\\com\\visualmetronome\\VisualMetronomePlugin.java"},{"fileName":"VisualMetronomeTileOverlay.java","content":"package com.visualmetronome;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.Perspective;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayUtil;\nimport javax.inject.Inject;\nimport java.awt.BasicStroke;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport java.awt.Polygon;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPriority;\n\n\npublic class VisualMetronomeTileOverlay extends Overlay\n{\n\n    private final Client client;\n    private final VisualMetronomeConfig config;\n    private final VisualMetronomePlugin plugin;\n\n    @Inject\n    public VisualMetronomeTileOverlay(Client client, VisualMetronomeConfig config, VisualMetronomePlugin plugin)\n    {\n        super(plugin);\n        this.client \u003d client;\n        this.config \u003d config;\n        this.plugin \u003d plugin;\n        setPosition(OverlayPosition.DYNAMIC);\n        setLayer(OverlayLayer.ABOVE_SCENE);\n        setPriority(OverlayPriority.MED);\n    }\n\n    @Override\n    public Dimension render(Graphics2D graphics)\n    {\n        if (config.highlightCurrentTile())\n        {\n            final WorldPoint playerPos \u003d client.getLocalPlayer().getWorldLocation();\n            if (playerPos \u003d\u003d null)\n            {\n                return null;\n            }\n\n            final LocalPoint playerPosLocal \u003d LocalPoint.fromWorld(client, playerPos);\n            if (playerPosLocal \u003d\u003d null)\n            {\n                return null;\n            }\n\n            if (config.changeFillColor())\n            {\n                final Color fillColor \u003d new Color(plugin.currentColor.getRed(), plugin.currentColor.getGreen(), plugin.currentColor.getBlue(), config.changeFillColorOpacity());\n                renderTile(graphics, playerPosLocal, plugin.currentColor, fillColor, config.currentTileBorderWidth());\n            }\n            else\n            {\n                renderTile(graphics, playerPosLocal, plugin.currentColor, config.currentTileFillColor(), config.currentTileBorderWidth());\n            }\n        }\n\n        return null;\n    }\n\n    private void renderTile(final Graphics2D graphics, final LocalPoint dest, final Color color, final Color fillColor, final double borderWidth)\n    {\n        if (dest \u003d\u003d null)\n        {\n            return;\n        }\n\n        final Polygon poly \u003d Perspective.getCanvasTilePoly(client, dest);\n\n        if (poly \u003d\u003d null)\n        {\n            return;\n        }\n\n        OverlayUtil.renderPolygon(graphics, poly, color, fillColor, new BasicStroke((float) borderWidth));\n    }\n}\n\n\n","filePath":"src\\main\\java\\com\\visualmetronome\\VisualMetronomeTileOverlay.java"},{"fileName":"VisualMetronomePluginTest.java","content":"package com.visualmetronome;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class VisualMetronomePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(VisualMetronomePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}\n","filePath":"src\\test\\java\\com\\visualmetronome\\VisualMetronomePluginTest.java"}]},{"commit":"9d1a72a8605633f89539c7d062fecfd806c22e51","repository":"https://github.com/JDrinkH2O/lennys-custom-clues.git","internalName":"lennys-custom-clues","files":[{"fileName":"AnimationTriggers.java","content":"package com.lennyscustomclues;\n\nimport net.runelite.api.AnimationID;\n\npublic class AnimationTriggers\n{\n\tpublic static boolean isTriggerAnimation(int animationId)\n\t{\n\t\t// Check for digging animation\n\t\tif (animationId \u003d\u003d AnimationID.DIG) // 830\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\t// Check for supported emote animations\n\t\treturn EmoteData.getEmoteName(animationId) !\u003d null \u0026\u0026 !EmoteData.getEmoteName(animationId).equals(\"Unknown Emote\");\n\t}\n\n\tpublic static boolean isDigAnimation(int animationId)\n\t{\n\t\treturn animationId \u003d\u003d AnimationID.DIG;\n\t}\n\n\tpublic static boolean isEmoteAnimation(int animationId)\n\t{\n\t\tString emoteName \u003d EmoteData.getEmoteName(animationId);\n\t\treturn emoteName !\u003d null \u0026\u0026 !emoteName.equals(\"Unknown Emote\");\n\t}\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\AnimationTriggers.java"},{"fileName":"AnswerBuilder.java","content":"package com.lennyscustomclues;\n\nimport com.lennyscustomclues.constraints.*;\nimport com.lennyscustomclues.ApiClient.GameStateSubmission;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class AnswerBuilder\n{\n\tprivate String rewardText;\n\tprivate List\u003cConstraint\u003e constraints;\n\n\tpublic AnswerBuilder()\n\t{\n\t\tthis.constraints \u003d new ArrayList\u003c\u003e();\n\t\tthis.rewardText \u003d \"\";\n\t}\n\n\tpublic void addConstraint(Constraint constraint)\n\t{\n\t\tconstraints.add(constraint);\n\t}\n\n\tpublic void removeConstraint(int index)\n\t{\n\t\tif (index \u003e\u003d 0 \u0026\u0026 index \u003c constraints.size())\n\t\t{\n\t\t\tconstraints.remove(index);\n\t\t}\n\t}\n\n\tpublic String toJson()\n\t{\n\t\t// TODO: Convert answer structure to JSON for export/API submission\n\t\treturn \"{}\";\n\t}\n\n\tpublic void clear()\n\t{\n\t\tconstraints.clear();\n\t\trewardText \u003d \"\";\n\t}\n\n\t// Getters and setters\n\tpublic String getRewardText() { return rewardText; }\n\tpublic void setRewardText(String rewardText) { this.rewardText \u003d rewardText; }\n\tpublic List\u003cConstraint\u003e getConstraints() { return constraints; }\n\tpublic void setConstraints(List\u003cConstraint\u003e constraints) { this.constraints \u003d constraints; }\n\n\tpublic int getConstraintCount()\n\t{\n\t\treturn constraints.size();\n\t}\n\n\tpublic Constraint getConstraint(int index)\n\t{\n\t\tif (index \u003e\u003d 0 \u0026\u0026 index \u003c constraints.size())\n\t\t{\n\t\t\treturn constraints.get(index);\n\t\t}\n\t\treturn null;\n\t}\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\AnswerBuilder.java"},{"fileName":"ApiClient.java","content":"package com.lennyscustomclues;\n\nimport com.google.gson.Gson;\nimport com.google.gson.JsonSyntaxException;\nimport lombok.extern.slf4j.Slf4j;\nimport okhttp3.Call;\nimport okhttp3.Callback;\nimport okhttp3.MediaType;\nimport okhttp3.OkHttpClient;\nimport okhttp3.Request;\nimport okhttp3.RequestBody;\nimport okhttp3.Response;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.io.IOException;\nimport java.net.URLEncoder;\nimport java.nio.charset.StandardCharsets;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.concurrent.CompletableFuture;\n\n@Slf4j\n@Singleton\npublic class ApiClient\n{\n\tprivate static final String API_BASE_URL \u003d \"https://us-central1-spatial-cargo-409717.cloudfunctions.net/lennys-labyrinth-api\";\n\tprivate static final String SUBMIT_GUESS_ENDPOINT \u003d \"/submit-guess\";\n\tprivate static final String VALIDATE_KEY_ENDPOINT \u003d \"/validate-key\";\n\tprivate static final String CREATE_ANSWER_ENDPOINT \u003d \"/create-answer\";\n\tprivate static final String ANSWER_ENDPOINT \u003d \"/answer\";\n\tprivate static final MediaType JSON \u003d MediaType.get(\"application/json; charset\u003dutf-8\");\n\n\tprivate final OkHttpClient httpClient;\n\tprivate final Gson gson;\n\n\t@Inject\n\tpublic ApiClient(OkHttpClient okHttpClient, Gson gson)\n\t{\n\t\tthis.httpClient \u003d okHttpClient;\n\t\tthis.gson \u003d gson;\n\t}\n\n\tpublic CompletableFuture\u003cApiResponse\u003e submitGuess(GameStateSubmission gameState)\n\t{\n\t\tCompletableFuture\u003cApiResponse\u003e future \u003d new CompletableFuture\u003c\u003e();\n\n\t\ttry\n\t\t{\n\t\t\tString json \u003d gson.toJson(gameState);\n\t\t\tlog.debug(\"Submitting game state JSON: {}\", json);\n\n\t\t\tRequestBody body \u003d RequestBody.create(JSON, json);\n\t\t\tRequest request \u003d new Request.Builder()\n\t\t\t\t.url(API_BASE_URL + SUBMIT_GUESS_ENDPOINT)\n\t\t\t\t.post(body)\n\t\t\t\t.build();\n\n\t\t\thttpClient.newCall(request).enqueue(new Callback()\n\t\t\t{\n\t\t\t\t@Override\n\t\t\t\tpublic void onFailure(Call call, IOException e)\n\t\t\t\t{\n\t\t\t\t\tlog.error(\"API request failed\", e);\n\t\t\t\t\tfuture.complete(ApiResponse.error(\"Network error: \" + e.getMessage()));\n\t\t\t\t}\n\n\t\t\t\t@Override\n\t\t\t\tpublic void onResponse(Call call, Response response)\n\t\t\t\t{\n\t\t\t\t\ttry (response)\n\t\t\t\t\t{\n\t\t\t\t\t\tString responseBody \u003d response.body() !\u003d null ? response.body().string() : \"\";\n\t\t\t\t\t\tlog.debug(\"API response code: {}, body: {}\", response.code(), responseBody);\n\n\t\t\t\t\t\tif (response.isSuccessful())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttry\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tApiResponse apiResponse \u003d gson.fromJson(responseBody, ApiResponse.class);\n\t\t\t\t\t\t\t\tfuture.complete(apiResponse);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcatch (JsonSyntaxException e)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlog.error(\"Failed to parse API response JSON\", e);\n\t\t\t\t\t\t\t\tfuture.complete(ApiResponse.error(\"Invalid response format\"));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tString errorMessage \u003d String.format(\"Server error %d: %s\", response.code(), responseBody);\n\t\t\t\t\t\t\tfuture.complete(ApiResponse.error(errorMessage));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (IOException e)\n\t\t\t\t\t{\n\t\t\t\t\t\tlog.error(\"Failed to read response body\", e);\n\t\t\t\t\t\tfuture.complete(ApiResponse.error(\"Failed to read server response\"));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\tlog.error(\"Failed to create API request\", e);\n\t\t\tfuture.complete(ApiResponse.error(\"Request creation failed: \" + e.getMessage()));\n\t\t}\n\n\t\treturn future;\n\t}\n\n\tpublic CompletableFuture\u003cApiResponse\u003e validateEventKey(String eventKey)\n\t{\n\t\tCompletableFuture\u003cApiResponse\u003e future \u003d new CompletableFuture\u003c\u003e();\n\n\t\ttry\n\t\t{\n\t\t\tlog.debug(\"Validating event key: {}\", eventKey);\n\n\t\t\tString encodedEventKey \u003d URLEncoder.encode(eventKey, StandardCharsets.UTF_8);\n\t\t\tRequest request \u003d new Request.Builder()\n\t\t\t\t.url(API_BASE_URL + VALIDATE_KEY_ENDPOINT + \"/\" + encodedEventKey)\n\t\t\t\t.get()\n\t\t\t\t.build();\n\n\t\t\thttpClient.newCall(request).enqueue(new Callback()\n\t\t\t{\n\t\t\t\t@Override\n\t\t\t\tpublic void onFailure(Call call, IOException e)\n\t\t\t\t{\n\t\t\t\t\tlog.error(\"Event key validation request failed\", e);\n\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"NETWORK_ERROR\", \"Network error: \" + e.getMessage()));\n\t\t\t\t}\n\n\t\t\t\t@Override\n\t\t\t\tpublic void onResponse(Call call, Response response)\n\t\t\t\t{\n\t\t\t\t\ttry (response)\n\t\t\t\t\t{\n\t\t\t\t\t\tString responseBody \u003d response.body() !\u003d null ? response.body().string() : \"\";\n\t\t\t\t\t\tlog.debug(\"Event key validation response code: {}, body: {}\", response.code(), responseBody);\n\n\t\t\t\t\t\tif (response.isSuccessful())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttry\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tApiResponse apiResponse \u003d gson.fromJson(responseBody, ApiResponse.class);\n\t\t\t\t\t\t\t\tfuture.complete(apiResponse);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcatch (JsonSyntaxException e)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlog.error(\"Failed to parse event key validation response JSON\", e);\n\t\t\t\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"PARSE_ERROR\", \"Invalid response format\"));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (response.code() \u003d\u003d 404)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// 404 means event key not found - this is expected for invalid keys\n\t\t\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"KEY_NOT_FOUND\", \"Event key not found\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// Any other HTTP error (500, 503, etc.)\n\t\t\t\t\t\t\tlog.error(\"Server error response: {} - {}\", response.code(), responseBody);\n\t\t\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"SERVER_ERROR\", \"Server error: \" + response.code()));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (IOException e)\n\t\t\t\t\t{\n\t\t\t\t\t\tlog.error(\"Failed to read event key validation response body\", e);\n\t\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"IO_ERROR\", \"Failed to read server response\"));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\tlog.error(\"Failed to create event key validation request\", e);\n\t\t\tfuture.complete(ApiResponse.errorWithType(\"REQUEST_ERROR\", \"Request creation failed: \" + e.getMessage()));\n\t\t}\n\n\t\treturn future;\n\t}\n\n\tpublic CompletableFuture\u003cApiResponse\u003e createAnswer(String eventKey, String secretKey, AnswerBuilder answerBuilder)\n\t{\n\t\tCompletableFuture\u003cApiResponse\u003e future \u003d new CompletableFuture\u003c\u003e();\n\n\t\ttry\n\t\t{\n\t\t\t// Build the answer request\n\t\t\tCreateAnswerRequest request \u003d new CreateAnswerRequest();\n\t\t\trequest.event_key \u003d eventKey;\n\t\t\trequest.answer \u003d new AnswerData();\n\t\t\trequest.answer.reward_text \u003d answerBuilder.getRewardText();\n\t\t\trequest.answer.secret_key \u003d secretKey.isEmpty() ? null : secretKey;\n\n\t\t\t// Convert constraints to JSON\n\t\t\trequest.answer.constraints \u003d new java.util.ArrayList\u003c\u003e();\n\t\t\tfor (int i \u003d 0; i \u003c answerBuilder.getConstraintCount(); i++)\n\t\t\t{\n\t\t\t\tcom.lennyscustomclues.constraints.Constraint constraint \u003d answerBuilder.getConstraint(i);\n\t\t\t\t// Serialize each constraint as a map\n\t\t\t\tif (constraint instanceof com.lennyscustomclues.constraints.LocationConstraint)\n\t\t\t\t{\n\t\t\t\t\tcom.lennyscustomclues.constraints.LocationConstraint locConstraint \u003d (com.lennyscustomclues.constraints.LocationConstraint) constraint;\n\t\t\t\t\tjava.util.Map\u003cString, Object\u003e constraintMap \u003d new java.util.HashMap\u003c\u003e();\n\t\t\t\t\tconstraintMap.put(\"constraint_type\", locConstraint.getConstraintType());\n\t\t\t\t\tconstraintMap.put(\"type\", locConstraint.getType());\n\n\t\t\t\t\tif (locConstraint.getExactX() !\u003d null) constraintMap.put(\"exact_x\", locConstraint.getExactX());\n\t\t\t\t\tif (locConstraint.getExactY() !\u003d null) constraintMap.put(\"exact_y\", locConstraint.getExactY());\n\t\t\t\t\tif (locConstraint.getMinX() !\u003d null) constraintMap.put(\"min_x\", locConstraint.getMinX());\n\t\t\t\t\tif (locConstraint.getMaxX() !\u003d null) constraintMap.put(\"max_x\", locConstraint.getMaxX());\n\t\t\t\t\tif (locConstraint.getMinY() !\u003d null) constraintMap.put(\"min_y\", locConstraint.getMinY());\n\t\t\t\t\tif (locConstraint.getMaxY() !\u003d null) constraintMap.put(\"max_y\", locConstraint.getMaxY());\n\t\t\t\t\tif (locConstraint.getPlane() !\u003d null) constraintMap.put(\"plane\", locConstraint.getPlane());\n\t\t\t\t\tif (locConstraint.getTolerance() !\u003d null) constraintMap.put(\"tolerance\", locConstraint.getTolerance());\n\n\t\t\t\t\trequest.answer.constraints.add(constraintMap);\n\t\t\t\t}\n\t\t\t\telse if (constraint instanceof com.lennyscustomclues.constraints.ActionConstraint)\n\t\t\t\t{\n\t\t\t\t\tcom.lennyscustomclues.constraints.ActionConstraint actionConstraint \u003d (com.lennyscustomclues.constraints.ActionConstraint) constraint;\n\t\t\t\t\tjava.util.Map\u003cString, Object\u003e constraintMap \u003d new java.util.HashMap\u003c\u003e();\n\t\t\t\t\tconstraintMap.put(\"constraint_type\", actionConstraint.getConstraintType());\n\t\t\t\t\tconstraintMap.put(\"type\", actionConstraint.getType());\n\n\t\t\t\t\tif (actionConstraint.getEmoteId() !\u003d null) constraintMap.put(\"emote_id\", actionConstraint.getEmoteId());\n\t\t\t\t\tif (actionConstraint.getEmoteIds() !\u003d null) constraintMap.put(\"emote_ids\", actionConstraint.getEmoteIds());\n\t\t\t\t\tif (actionConstraint.getNpcId() !\u003d null) constraintMap.put(\"npc_id\", actionConstraint.getNpcId());\n\t\t\t\t\tif (actionConstraint.getNpcIds() !\u003d null) constraintMap.put(\"npc_ids\", actionConstraint.getNpcIds());\n\t\t\t\t\tif (actionConstraint.getInteractionType() !\u003d null) constraintMap.put(\"interaction_type\", actionConstraint.getInteractionType());\n\t\t\t\t\tif (actionConstraint.getInteractionTypes() !\u003d null) constraintMap.put(\"interaction_types\", actionConstraint.getInteractionTypes());\n\n\t\t\t\t\trequest.answer.constraints.add(constraintMap);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tString json \u003d gson.toJson(request);\n\t\t\tlog.debug(\"Creating answer JSON: {}\", json);\n\n\t\t\tRequestBody body \u003d RequestBody.create(JSON, json);\n\t\t\tRequest httpRequest \u003d new Request.Builder()\n\t\t\t\t.url(API_BASE_URL + CREATE_ANSWER_ENDPOINT)\n\t\t\t\t.post(body)\n\t\t\t\t.build();\n\n\t\t\thttpClient.newCall(httpRequest).enqueue(new Callback()\n\t\t\t{\n\t\t\t\t@Override\n\t\t\t\tpublic void onFailure(Call call, IOException e)\n\t\t\t\t{\n\t\t\t\t\tlog.error(\"Create answer request failed\", e);\n\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"NETWORK_ERROR\", \"Network error: \" + e.getMessage()));\n\t\t\t\t}\n\n\t\t\t\t@Override\n\t\t\t\tpublic void onResponse(Call call, Response response)\n\t\t\t\t{\n\t\t\t\t\ttry (response)\n\t\t\t\t\t{\n\t\t\t\t\t\tString responseBody \u003d response.body() !\u003d null ? response.body().string() : \"\";\n\t\t\t\t\t\tlog.debug(\"Create answer response code: {}, body: {}\", response.code(), responseBody);\n\n\t\t\t\t\t\tif (response.code() \u003d\u003d 201)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// 201 Created - success\n\t\t\t\t\t\t\ttry\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tApiResponse apiResponse \u003d gson.fromJson(responseBody, ApiResponse.class);\n\t\t\t\t\t\t\t\tfuture.complete(apiResponse);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcatch (JsonSyntaxException e)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlog.error(\"Failed to parse create answer response JSON\", e);\n\t\t\t\t\t\t\t\tfuture.complete(ApiResponse.success(\"Answer created successfully\"));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (response.code() \u003d\u003d 409)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// 409 Conflict - key already exists\n\t\t\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"KEY_ALREADY_EXISTS\", \"Event key already exists\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (response.code() \u003d\u003d 400)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// 400 Bad Request - validation error\n\t\t\t\t\t\t\ttry\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tApiResponse apiResponse \u003d gson.fromJson(responseBody, ApiResponse.class);\n\t\t\t\t\t\t\t\tfuture.complete(apiResponse);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcatch (JsonSyntaxException e)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"VALIDATION_ERROR\", \"Invalid request: \" + responseBody));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// Any other HTTP error (500, 503, etc.)\n\t\t\t\t\t\t\tlog.error(\"Server error response: {} - {}\", response.code(), responseBody);\n\t\t\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"SERVER_ERROR\", \"Server error: \" + response.code()));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (IOException e)\n\t\t\t\t\t{\n\t\t\t\t\t\tlog.error(\"Failed to read create answer response body\", e);\n\t\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"IO_ERROR\", \"Failed to read server response\"));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\tlog.error(\"Failed to create answer request\", e);\n\t\t\tfuture.complete(ApiResponse.errorWithType(\"REQUEST_ERROR\", \"Request creation failed: \" + e.getMessage()));\n\t\t}\n\n\t\treturn future;\n\t}\n\n\tpublic CompletableFuture\u003cGetAnswerResponse\u003e getAnswer(String eventKey, String secretKey)\n\t{\n\t\tCompletableFuture\u003cGetAnswerResponse\u003e future \u003d new CompletableFuture\u003c\u003e();\n\n\t\ttry\n\t\t{\n\t\t\tlog.debug(\"Getting answer for event key: {}\", eventKey);\n\n\t\t\tString encodedEventKey \u003d URLEncoder.encode(eventKey, StandardCharsets.UTF_8);\n\t\t\tString encodedSecretKey \u003d URLEncoder.encode(secretKey, StandardCharsets.UTF_8);\n\n\t\t\tRequest request \u003d new Request.Builder()\n\t\t\t\t.url(API_BASE_URL + ANSWER_ENDPOINT + \"/\" + encodedEventKey + \"?secret_key\u003d\" + encodedSecretKey)\n\t\t\t\t.get()\n\t\t\t\t.build();\n\n\t\t\thttpClient.newCall(request).enqueue(new Callback()\n\t\t\t{\n\t\t\t\t@Override\n\t\t\t\tpublic void onFailure(Call call, IOException e)\n\t\t\t\t{\n\t\t\t\t\tlog.error(\"Get answer request failed\", e);\n\t\t\t\t\tfuture.complete(GetAnswerResponse.error(\"NETWORK_ERROR\", \"Network error: \" + e.getMessage()));\n\t\t\t\t}\n\n\t\t\t\t@Override\n\t\t\t\tpublic void onResponse(Call call, Response response)\n\t\t\t\t{\n\t\t\t\t\ttry (response)\n\t\t\t\t\t{\n\t\t\t\t\t\tString responseBody \u003d response.body() !\u003d null ? response.body().string() : \"\";\n\t\t\t\t\t\tlog.debug(\"Get answer response code: {}, body: {}\", response.code(), responseBody);\n\n\t\t\t\t\t\tif (response.isSuccessful())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttry\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tGetAnswerResponse apiResponse \u003d gson.fromJson(responseBody, GetAnswerResponse.class);\n\t\t\t\t\t\t\t\tfuture.complete(apiResponse);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcatch (JsonSyntaxException e)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlog.error(\"Failed to parse get answer response JSON\", e);\n\t\t\t\t\t\t\t\tfuture.complete(GetAnswerResponse.error(\"PARSE_ERROR\", \"Invalid response format\"));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (response.code() \u003d\u003d 404)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfuture.complete(GetAnswerResponse.error(\"NOT_FOUND\", \"Event key not found\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (response.code() \u003d\u003d 401)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfuture.complete(GetAnswerResponse.error(\"UNAUTHORIZED\", \"Invalid secret key\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (response.code() \u003d\u003d 400)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfuture.complete(GetAnswerResponse.error(\"BAD_REQUEST\", \"Bad request\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlog.error(\"Server error response: {} - {}\", response.code(), responseBody);\n\t\t\t\t\t\t\tfuture.complete(GetAnswerResponse.error(\"SERVER_ERROR\", \"Server error: \" + response.code()));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (IOException e)\n\t\t\t\t\t{\n\t\t\t\t\t\tlog.error(\"Failed to read get answer response body\", e);\n\t\t\t\t\t\tfuture.complete(GetAnswerResponse.error(\"IO_ERROR\", \"Failed to read server response\"));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\tlog.error(\"Failed to create get answer request\", e);\n\t\t\tfuture.complete(GetAnswerResponse.error(\"REQUEST_ERROR\", \"Request creation failed: \" + e.getMessage()));\n\t\t}\n\n\t\treturn future;\n\t}\n\n\tpublic CompletableFuture\u003cApiResponse\u003e updateAnswer(String eventKey, String secretKey, AnswerBuilder answerBuilder)\n\t{\n\t\tCompletableFuture\u003cApiResponse\u003e future \u003d new CompletableFuture\u003c\u003e();\n\n\t\ttry\n\t\t{\n\t\t\t// Build the answer data\n\t\t\tAnswerData answerData \u003d new AnswerData();\n\t\t\tanswerData.reward_text \u003d answerBuilder.getRewardText();\n\n\t\t\t// Convert constraints to JSON\n\t\t\tanswerData.constraints \u003d new java.util.ArrayList\u003c\u003e();\n\t\t\tfor (int i \u003d 0; i \u003c answerBuilder.getConstraintCount(); i++)\n\t\t\t{\n\t\t\t\tcom.lennyscustomclues.constraints.Constraint constraint \u003d answerBuilder.getConstraint(i);\n\t\t\t\t// Serialize each constraint as a map\n\t\t\t\tif (constraint instanceof com.lennyscustomclues.constraints.LocationConstraint)\n\t\t\t\t{\n\t\t\t\t\tcom.lennyscustomclues.constraints.LocationConstraint locConstraint \u003d (com.lennyscustomclues.constraints.LocationConstraint) constraint;\n\t\t\t\t\tjava.util.Map\u003cString, Object\u003e constraintMap \u003d new java.util.HashMap\u003c\u003e();\n\t\t\t\t\tconstraintMap.put(\"constraint_type\", locConstraint.getConstraintType());\n\t\t\t\t\tconstraintMap.put(\"type\", locConstraint.getType());\n\n\t\t\t\t\tif (locConstraint.getExactX() !\u003d null) constraintMap.put(\"exact_x\", locConstraint.getExactX());\n\t\t\t\t\tif (locConstraint.getExactY() !\u003d null) constraintMap.put(\"exact_y\", locConstraint.getExactY());\n\t\t\t\t\tif (locConstraint.getMinX() !\u003d null) constraintMap.put(\"min_x\", locConstraint.getMinX());\n\t\t\t\t\tif (locConstraint.getMaxX() !\u003d null) constraintMap.put(\"max_x\", locConstraint.getMaxX());\n\t\t\t\t\tif (locConstraint.getMinY() !\u003d null) constraintMap.put(\"min_y\", locConstraint.getMinY());\n\t\t\t\t\tif (locConstraint.getMaxY() !\u003d null) constraintMap.put(\"max_y\", locConstraint.getMaxY());\n\t\t\t\t\tif (locConstraint.getPlane() !\u003d null) constraintMap.put(\"plane\", locConstraint.getPlane());\n\t\t\t\t\tif (locConstraint.getTolerance() !\u003d null) constraintMap.put(\"tolerance\", locConstraint.getTolerance());\n\n\t\t\t\t\tanswerData.constraints.add(constraintMap);\n\t\t\t\t}\n\t\t\t\telse if (constraint instanceof com.lennyscustomclues.constraints.ActionConstraint)\n\t\t\t\t{\n\t\t\t\t\tcom.lennyscustomclues.constraints.ActionConstraint actionConstraint \u003d (com.lennyscustomclues.constraints.ActionConstraint) constraint;\n\t\t\t\t\tjava.util.Map\u003cString, Object\u003e constraintMap \u003d new java.util.HashMap\u003c\u003e();\n\t\t\t\t\tconstraintMap.put(\"constraint_type\", actionConstraint.getConstraintType());\n\t\t\t\t\tconstraintMap.put(\"type\", actionConstraint.getType());\n\n\t\t\t\t\tif (actionConstraint.getEmoteId() !\u003d null) constraintMap.put(\"emote_id\", actionConstraint.getEmoteId());\n\t\t\t\t\tif (actionConstraint.getEmoteIds() !\u003d null) constraintMap.put(\"emote_ids\", actionConstraint.getEmoteIds());\n\t\t\t\t\tif (actionConstraint.getNpcId() !\u003d null) constraintMap.put(\"npc_id\", actionConstraint.getNpcId());\n\t\t\t\t\tif (actionConstraint.getNpcIds() !\u003d null) constraintMap.put(\"npc_ids\", actionConstraint.getNpcIds());\n\t\t\t\t\tif (actionConstraint.getInteractionType() !\u003d null) constraintMap.put(\"interaction_type\", actionConstraint.getInteractionType());\n\t\t\t\t\tif (actionConstraint.getInteractionTypes() !\u003d null) constraintMap.put(\"interaction_types\", actionConstraint.getInteractionTypes());\n\n\t\t\t\t\tanswerData.constraints.add(constraintMap);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tString json \u003d gson.toJson(answerData);\n\t\t\tlog.debug(\"Updating answer JSON: {}\", json);\n\n\t\t\tString encodedEventKey \u003d URLEncoder.encode(eventKey, StandardCharsets.UTF_8);\n\t\t\tString encodedSecretKey \u003d URLEncoder.encode(secretKey, StandardCharsets.UTF_8);\n\n\t\t\tRequestBody body \u003d RequestBody.create(JSON, json);\n\t\t\tRequest httpRequest \u003d new Request.Builder()\n\t\t\t\t.url(API_BASE_URL + ANSWER_ENDPOINT + \"/\" + encodedEventKey + \"?secret_key\u003d\" + encodedSecretKey)\n\t\t\t\t.patch(body)\n\t\t\t\t.build();\n\n\t\t\thttpClient.newCall(httpRequest).enqueue(new Callback()\n\t\t\t{\n\t\t\t\t@Override\n\t\t\t\tpublic void onFailure(Call call, IOException e)\n\t\t\t\t{\n\t\t\t\t\tlog.error(\"Update answer request failed\", e);\n\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"NETWORK_ERROR\", \"Network error: \" + e.getMessage()));\n\t\t\t\t}\n\n\t\t\t\t@Override\n\t\t\t\tpublic void onResponse(Call call, Response response)\n\t\t\t\t{\n\t\t\t\t\ttry (response)\n\t\t\t\t\t{\n\t\t\t\t\t\tString responseBody \u003d response.body() !\u003d null ? response.body().string() : \"\";\n\t\t\t\t\t\tlog.debug(\"Update answer response code: {}, body: {}\", response.code(), responseBody);\n\n\t\t\t\t\t\tif (response.isSuccessful())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttry\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tApiResponse apiResponse \u003d gson.fromJson(responseBody, ApiResponse.class);\n\t\t\t\t\t\t\t\tfuture.complete(apiResponse);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcatch (JsonSyntaxException e)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlog.error(\"Failed to parse update answer response JSON\", e);\n\t\t\t\t\t\t\t\tfuture.complete(ApiResponse.success(\"Answer updated successfully\"));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (response.code() \u003d\u003d 404)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"NOT_FOUND\", \"Event key not found\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (response.code() \u003d\u003d 401)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"UNAUTHORIZED\", \"Invalid secret key\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (response.code() \u003d\u003d 400)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttry\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tApiResponse apiResponse \u003d gson.fromJson(responseBody, ApiResponse.class);\n\t\t\t\t\t\t\t\tfuture.complete(apiResponse);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcatch (JsonSyntaxException e)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"VALIDATION_ERROR\", \"Invalid request: \" + responseBody));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlog.error(\"Server error response: {} - {}\", response.code(), responseBody);\n\t\t\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"SERVER_ERROR\", \"Server error: \" + response.code()));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (IOException e)\n\t\t\t\t\t{\n\t\t\t\t\t\tlog.error(\"Failed to read update answer response body\", e);\n\t\t\t\t\t\tfuture.complete(ApiResponse.errorWithType(\"IO_ERROR\", \"Failed to read server response\"));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\tlog.error(\"Failed to create update answer request\", e);\n\t\t\tfuture.complete(ApiResponse.errorWithType(\"REQUEST_ERROR\", \"Request creation failed: \" + e.getMessage()));\n\t\t}\n\n\t\treturn future;\n\t}\n\n\t// Inner classes for data structures matching the server API\n\tpublic static class GameStateSubmission\n\t{\n\t\tpublic LocationData location;\n\t\tpublic List\u003cItemData\u003e inventory;\n\t\tpublic List\u003cItemData\u003e worn_items;\n\t\tpublic Integer emote_id;\n\t\tpublic Integer npc_id;\n\t\tpublic String interaction_type;\n\t\tpublic String event_key;\n\t\tpublic String rsn;\n\n\t\tpublic GameStateSubmission(LocationData location, List\u003cItemData\u003e inventory, \n\t\t\tList\u003cItemData\u003e wornItems, Integer emoteId, Integer npcId, \n\t\t\tString interactionType, String eventKey, String rsn)\n\t\t{\n\t\t\tthis.location \u003d location;\n\t\t\tthis.inventory \u003d inventory;\n\t\t\tthis.worn_items \u003d wornItems;\n\t\t\tthis.emote_id \u003d emoteId;\n\t\t\tthis.npc_id \u003d npcId;\n\t\t\tthis.interaction_type \u003d interactionType;\n\t\t\tthis.event_key \u003d eventKey;\n\t\t\tthis.rsn \u003d rsn;\n\t\t}\n\t}\n\n\tpublic static class LocationData\n\t{\n\t\tpublic WorldCoords world;\n\t\tpublic LocalCoords local;\n\n\t\tpublic LocationData(WorldCoords world, LocalCoords local)\n\t\t{\n\t\t\tthis.world \u003d world;\n\t\t\tthis.local \u003d local;\n\t\t}\n\t}\n\n\tpublic static class WorldCoords\n\t{\n\t\tpublic int x;\n\t\tpublic int y;\n\t\tpublic int plane;\n\n\t\tpublic WorldCoords(int x, int y, int plane)\n\t\t{\n\t\t\tthis.x \u003d x;\n\t\t\tthis.y \u003d y;\n\t\t\tthis.plane \u003d plane;\n\t\t}\n\t}\n\n\tpublic static class LocalCoords\n\t{\n\t\tpublic int sceneX;\n\t\tpublic int sceneY;\n\n\t\tpublic LocalCoords(int sceneX, int sceneY)\n\t\t{\n\t\t\tthis.sceneX \u003d sceneX;\n\t\t\tthis.sceneY \u003d sceneY;\n\t\t}\n\t}\n\n\tpublic static class ItemData\n\t{\n\t\tpublic int slot;\n\t\tpublic int id;\n\t\tpublic int quantity;\n\n\t\tpublic ItemData(int slot, int id, int quantity)\n\t\t{\n\t\t\tthis.slot \u003d slot;\n\t\t\tthis.id \u003d id;\n\t\t\tthis.quantity \u003d quantity;\n\t\t}\n\t}\n\n\tpublic static class ApiResponse\n\t{\n\t\tpublic boolean success;\n\t\tpublic String message;\n\t\tpublic String errorType; // For client-side error handling\n\n\t\tpublic ApiResponse(boolean success, String message)\n\t\t{\n\t\t\tthis.success \u003d success;\n\t\t\tthis.message \u003d message;\n\t\t\tthis.errorType \u003d null;\n\t\t}\n\n\t\tprivate ApiResponse(boolean success, String message, String errorType)\n\t\t{\n\t\t\tthis.success \u003d success;\n\t\t\tthis.message \u003d message;\n\t\t\tthis.errorType \u003d errorType;\n\t\t}\n\n\t\tpublic static ApiResponse success(String message)\n\t\t{\n\t\t\treturn new ApiResponse(true, message);\n\t\t}\n\n\t\tpublic static ApiResponse error(String message)\n\t\t{\n\t\t\treturn new ApiResponse(false, message);\n\t\t}\n\n\t\tpublic static ApiResponse errorWithType(String errorType, String message)\n\t\t{\n\t\t\treturn new ApiResponse(false, message, errorType);\n\t\t}\n\t}\n\n\tpublic static class CreateAnswerRequest\n\t{\n\t\tpublic String event_key;\n\t\tpublic AnswerData answer;\n\t}\n\n\tpublic static class AnswerData\n\t{\n\t\tpublic String reward_text;\n\t\tpublic List\u003cjava.util.Map\u003cString, Object\u003e\u003e constraints;\n\t\tpublic String secret_key;\n\t}\n\n\tpublic static class GetAnswerResponse\n\t{\n\t\tpublic String reward_text;\n\t\tpublic List\u003cjava.util.Map\u003cString, Object\u003e\u003e constraints;\n\t\tpublic List\u003cPlayerCompletion\u003e completed_by;\n\t\tpublic String errorType;\n\t\tpublic String errorMessage;\n\n\t\tpublic boolean isSuccess()\n\t\t{\n\t\t\treturn errorType \u003d\u003d null;\n\t\t}\n\n\t\tpublic static GetAnswerResponse error(String errorType, String errorMessage)\n\t\t{\n\t\t\tGetAnswerResponse response \u003d new GetAnswerResponse();\n\t\t\tresponse.errorType \u003d errorType;\n\t\t\tresponse.errorMessage \u003d errorMessage;\n\t\t\treturn response;\n\t\t}\n\t}\n\n\tpublic static class PlayerCompletion\n\t{\n\t\tpublic String rsn;\n\t\tpublic String timestamp;\n\t}\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\ApiClient.java"},{"fileName":"CelebrationManager.java","content":"package com.lennyscustomclues;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.SoundEffectID;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.callback.ClientThread;\nimport lombok.extern.slf4j.Slf4j;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.concurrent.TimeUnit;\n\n@Slf4j\n@Singleton\npublic class CelebrationManager\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate LennysCustomCluesConfig config;\n\n\t@Inject\n\tprivate ScheduledExecutorService scheduledExecutorService;\n\n\tpublic void triggerVictoryCelebration(String puzzleName)\n\t{\n\t\tclientThread.invokeLater(() -\u003e {\n\t\t\tlog.info(\"Triggering victory celebration for puzzle: {}\", puzzleName);\n\n\t\t\tif (config.showCelebrationSound())\n\t\t\t{\n\t\t\t\tplayVictorySound();\n\t\t\t}\n\n\t\t\tif (config.showCelebrationFireworks())\n\t\t\t{\n\t\t\t\ttriggerFireworks();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate void playVictorySound()\n\t{\n\t\ttry\n\t\t{\n\t\t\t// Play a celebratory sound - using the triumphant fanfare sound (ID 2930)\n\t\t\tclient.playSoundEffect(2930);\n\t\t\tlog.debug(\"Played victory sound effect\");\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\tlog.warn(\"Failed to play victory sound\", e);\n\t\t}\n\t}\n\n\tprivate void triggerFireworks()\n\t{\n\t\ttry\n\t\t{\n\t\t\tif (client.getLocalPlayer() !\u003d null)\n\t\t\t{\n\t\t\t\t// Create the vanilla OSRS level-up fireworks animation on the player\n\t\t\t\t// SpotAnim ID 199 is the standard fireworks that appear when leveling up\n\t\t\t\t// Height set to 100 to display above the player\u0027s head\n\t\t\t\tclient.getLocalPlayer().createSpotAnim(0, 199, 100, 0);\n\n\t\t\t\t// Also play the level-up sound effects for authenticity\n\t\t\t\tclient.playSoundEffect(2396); // Level up sound 1\n\n\t\t\t\t// Schedule the second sound effect with a delay using ScheduledExecutorService\n\t\t\t\t// to avoid blocking the client thread\n\t\t\t\tscheduledExecutorService.schedule(() -\u003e {\n\t\t\t\t\tclientThread.invokeLater(() -\u003e {\n\t\t\t\t\t\tclient.playSoundEffect(2384); // Level up sound 2\n\t\t\t\t\t});\n\t\t\t\t}, 583, TimeUnit.MILLISECONDS); // 35 game ticks delay (35 * 16.67ms \u003d ~583ms)\n\n\t\t\t\tlog.debug(\"Triggered vanilla fireworks animation (SpotAnim 199) on player\");\n\t\t\t}\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\tlog.warn(\"Failed to trigger fireworks\", e);\n\t\t}\n\t}\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\CelebrationManager.java"},{"fileName":"ActionConstraint.java","content":"package com.lennyscustomclues.constraints;\n\nimport java.util.List;\n\npublic class ActionConstraint implements Constraint\n{\n\tprivate String type; // \"emote\", \"npc_interaction\", \"any_emote\", \"any_npc\"\n\tprivate Integer emoteId;\n\tprivate List\u003cInteger\u003e emoteIds;\n\tprivate Integer npcId;\n\tprivate List\u003cInteger\u003e npcIds;\n\tprivate String interactionType;\n\tprivate List\u003cString\u003e interactionTypes;\n\n\tpublic ActionConstraint()\n\t{\n\t\t// Default constructor for JSON deserialization\n\t}\n\n\tpublic ActionConstraint(String type)\n\t{\n\t\tthis.type \u003d type;\n\t}\n\n\n\t@Override\n\tpublic String description()\n\t{\n\t\tswitch (type)\n\t\t{\n\t\t\tcase \"emote\":\n\t\t\t\treturn \"Must perform specific emote\";\n\t\t\tcase \"any_emote\":\n\t\t\t\treturn \"Must perform one of specified emotes\";\n\t\t\tcase \"npc_interaction\":\n\t\t\t\treturn \"Must interact with specified NPC\";\n\t\t\tcase \"any_npc\":\n\t\t\t\treturn \"Must interact with any NPC\";\n\t\t\tdefault:\n\t\t\t\treturn \"Action constraint\";\n\t\t}\n\t}\n\n\t@Override\n\tpublic String getConstraintType()\n\t{\n\t\treturn \"action\";\n\t}\n\n\t// Getters and setters\n\tpublic String getType() { return type; }\n\tpublic void setType(String type) { this.type \u003d type; }\n\tpublic Integer getEmoteId() { return emoteId; }\n\tpublic void setEmoteId(Integer emoteId) { this.emoteId \u003d emoteId; }\n\tpublic List\u003cInteger\u003e getEmoteIds() { return emoteIds; }\n\tpublic void setEmoteIds(List\u003cInteger\u003e emoteIds) { this.emoteIds \u003d emoteIds; }\n\tpublic Integer getNpcId() { return npcId; }\n\tpublic void setNpcId(Integer npcId) { this.npcId \u003d npcId; }\n\tpublic List\u003cInteger\u003e getNpcIds() { return npcIds; }\n\tpublic void setNpcIds(List\u003cInteger\u003e npcIds) { this.npcIds \u003d npcIds; }\n\tpublic String getInteractionType() { return interactionType; }\n\tpublic void setInteractionType(String interactionType) { this.interactionType \u003d interactionType; }\n\tpublic List\u003cString\u003e getInteractionTypes() { return interactionTypes; }\n\tpublic void setInteractionTypes(List\u003cString\u003e interactionTypes) { this.interactionTypes \u003d interactionTypes; }\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\constraints\\ActionConstraint.java"},{"fileName":"Constraint.java","content":"package com.lennyscustomclues.constraints;\n\npublic interface Constraint\n{\n\tString description();\n\tString getConstraintType();\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\constraints\\Constraint.java"},{"fileName":"EquipmentConstraint.java","content":"package com.lennyscustomclues.constraints;\n\nimport java.util.List;\n\npublic class EquipmentConstraint implements Constraint\n{\n\tprivate String type; // \"contains\", \"exact_slot\", \"any_of\"\n\tprivate Integer itemId;\n\tprivate List\u003cInteger\u003e itemIds; // For \"any_of\" type\n\tprivate Integer slot;\n\tprivate Integer minQuantity;\n\n\tpublic EquipmentConstraint()\n\t{\n\t\t// Default constructor for JSON deserialization\n\t}\n\n\tpublic EquipmentConstraint(String type)\n\t{\n\t\tthis.type \u003d type;\n\t}\n\n\n\t@Override\n\tpublic String description()\n\t{\n\t\tswitch (type)\n\t\t{\n\t\t\tcase \"contains\":\n\t\t\t\treturn \"Must have specified item equipped\";\n\t\t\tcase \"exact_slot\":\n\t\t\t\treturn \"Specific equipment slot must contain specified item\";\n\t\t\tcase \"any_of\":\n\t\t\t\treturn \"Must have at least one of specified items equipped\";\n\t\t\tdefault:\n\t\t\t\treturn \"Equipment constraint\";\n\t\t}\n\t}\n\n\t@Override\n\tpublic String getConstraintType()\n\t{\n\t\treturn \"equipment\";\n\t}\n\n\t// Getters and setters\n\tpublic String getType() { return type; }\n\tpublic void setType(String type) { this.type \u003d type; }\n\tpublic Integer getItemId() { return itemId; }\n\tpublic void setItemId(Integer itemId) { this.itemId \u003d itemId; }\n\tpublic List\u003cInteger\u003e getItemIds() { return itemIds; }\n\tpublic void setItemIds(List\u003cInteger\u003e itemIds) { this.itemIds \u003d itemIds; }\n\tpublic Integer getSlot() { return slot; }\n\tpublic void setSlot(Integer slot) { this.slot \u003d slot; }\n\tpublic Integer getMinQuantity() { return minQuantity; }\n\tpublic void setMinQuantity(Integer minQuantity) { this.minQuantity \u003d minQuantity; }\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\constraints\\EquipmentConstraint.java"},{"fileName":"EventKeyConstraint.java","content":"package com.lennyscustomclues.constraints;\n\nimport java.util.List;\n\npublic class EventKeyConstraint implements Constraint\n{\n\tprivate String type; // \"exact\", \"prefix\", \"suffix\", \"any_of\"\n\tprivate String exactKey;\n\tprivate String prefix;\n\tprivate String suffix;\n\tprivate List\u003cString\u003e allowedKeys;\n\n\tpublic EventKeyConstraint()\n\t{\n\t\t// Default constructor for JSON deserialization\n\t}\n\n\tpublic EventKeyConstraint(String type)\n\t{\n\t\tthis.type \u003d type;\n\t}\n\n\n\t@Override\n\tpublic String description()\n\t{\n\t\tswitch (type)\n\t\t{\n\t\t\tcase \"exact\":\n\t\t\t\treturn \"Must have exact event key\";\n\t\t\tcase \"any_of\":\n\t\t\t\treturn \"Must have one of allowed event keys\";\n\t\t\tdefault:\n\t\t\t\treturn \"Event key constraint\";\n\t\t}\n\t}\n\n\t@Override\n\tpublic String getConstraintType()\n\t{\n\t\treturn \"event_key\";\n\t}\n\n\t// Getters and setters\n\tpublic String getType() { return type; }\n\tpublic void setType(String type) { this.type \u003d type; }\n\tpublic String getExactKey() { return exactKey; }\n\tpublic void setExactKey(String exactKey) { this.exactKey \u003d exactKey; }\n\tpublic String getPrefix() { return prefix; }\n\tpublic void setPrefix(String prefix) { this.prefix \u003d prefix; }\n\tpublic String getSuffix() { return suffix; }\n\tpublic void setSuffix(String suffix) { this.suffix \u003d suffix; }\n\tpublic List\u003cString\u003e getAllowedKeys() { return allowedKeys; }\n\tpublic void setAllowedKeys(List\u003cString\u003e allowedKeys) { this.allowedKeys \u003d allowedKeys; }\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\constraints\\EventKeyConstraint.java"},{"fileName":"InventoryConstraint.java","content":"package com.lennyscustomclues.constraints;\n\nimport java.util.List;\n\npublic class InventoryConstraint implements Constraint\n{\n\tprivate String type; // \"contains\", \"exact\", \"minimum_quantity\", \"any_of\"\n\tprivate Integer itemId;\n\tprivate List\u003cInteger\u003e itemIds; // For \"any_of\" type\n\tprivate Integer minQuantity;\n\tprivate Integer exactSlot;\n\tprivate Integer requiredSlot;\n\n\tpublic InventoryConstraint()\n\t{\n\t\t// Default constructor for JSON deserialization\n\t}\n\n\tpublic InventoryConstraint(String type)\n\t{\n\t\tthis.type \u003d type;\n\t}\n\n\n\t@Override\n\tpublic String description()\n\t{\n\t\tswitch (type)\n\t\t{\n\t\t\tcase \"contains\":\n\t\t\t\treturn \"Inventory must contain specified item\";\n\t\t\tcase \"any_of\":\n\t\t\t\treturn \"Inventory must contain at least one of specified items\";\n\t\t\tcase \"exact\":\n\t\t\t\treturn \"Specific inventory slot must contain specified item\";\n\t\t\tdefault:\n\t\t\t\treturn \"Inventory constraint\";\n\t\t}\n\t}\n\n\t@Override\n\tpublic String getConstraintType()\n\t{\n\t\treturn \"inventory\";\n\t}\n\n\t// Getters and setters\n\tpublic String getType() { return type; }\n\tpublic void setType(String type) { this.type \u003d type; }\n\tpublic Integer getItemId() { return itemId; }\n\tpublic void setItemId(Integer itemId) { this.itemId \u003d itemId; }\n\tpublic List\u003cInteger\u003e getItemIds() { return itemIds; }\n\tpublic void setItemIds(List\u003cInteger\u003e itemIds) { this.itemIds \u003d itemIds; }\n\tpublic Integer getMinQuantity() { return minQuantity; }\n\tpublic void setMinQuantity(Integer minQuantity) { this.minQuantity \u003d minQuantity; }\n\tpublic Integer getExactSlot() { return exactSlot; }\n\tpublic void setExactSlot(Integer exactSlot) { this.exactSlot \u003d exactSlot; }\n\tpublic Integer getRequiredSlot() { return requiredSlot; }\n\tpublic void setRequiredSlot(Integer requiredSlot) { this.requiredSlot \u003d requiredSlot; }\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\constraints\\InventoryConstraint.java"},{"fileName":"LocationConstraint.java","content":"package com.lennyscustomclues.constraints;\n\npublic class LocationConstraint implements Constraint\n{\n\tprivate String type; // \"exact\", \"bounds\", \"tolerance\"\n\tprivate Integer minX;\n\tprivate Integer maxX;\n\tprivate Integer minY;\n\tprivate Integer maxY;\n\tprivate Integer exactX;\n\tprivate Integer exactY;\n\tprivate Integer plane;\n\tprivate Integer tolerance; // For tolerance type\n\n\tpublic LocationConstraint()\n\t{\n\t\t// Default constructor for JSON deserialization\n\t}\n\n\tpublic LocationConstraint(String type)\n\t{\n\t\tthis.type \u003d type;\n\t}\n\n\n\t@Override\n\tpublic String description()\n\t{\n\t\tswitch (type)\n\t\t{\n\t\t\tcase \"exact\":\n\t\t\t\treturn \"Must be at exact coordinates\";\n\t\t\tcase \"bounds\":\n\t\t\t\treturn \"Must be within specified area bounds\";\n\t\t\tcase \"tolerance\":\n\t\t\t\treturn \"Must be within tolerance of target location\";\n\t\t\tdefault:\n\t\t\t\treturn \"Location constraint\";\n\t\t}\n\t}\n\n\t@Override\n\tpublic String getConstraintType()\n\t{\n\t\treturn \"location\";\n\t}\n\n\t// Getters and setters\n\tpublic String getType() { return type; }\n\tpublic void setType(String type) { this.type \u003d type; }\n\tpublic Integer getMinX() { return minX; }\n\tpublic void setMinX(Integer minX) { this.minX \u003d minX; }\n\tpublic Integer getMaxX() { return maxX; }\n\tpublic void setMaxX(Integer maxX) { this.maxX \u003d maxX; }\n\tpublic Integer getMinY() { return minY; }\n\tpublic void setMinY(Integer minY) { this.minY \u003d minY; }\n\tpublic Integer getMaxY() { return maxY; }\n\tpublic void setMaxY(Integer maxY) { this.maxY \u003d maxY; }\n\tpublic Integer getExactX() { return exactX; }\n\tpublic void setExactX(Integer exactX) { this.exactX \u003d exactX; }\n\tpublic Integer getExactY() { return exactY; }\n\tpublic void setExactY(Integer exactY) { this.exactY \u003d exactY; }\n\tpublic Integer getPlane() { return plane; }\n\tpublic void setPlane(Integer plane) { this.plane \u003d plane; }\n\tpublic Integer getTolerance() { return tolerance; }\n\tpublic void setTolerance(Integer tolerance) { this.tolerance \u003d tolerance; }\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\constraints\\LocationConstraint.java"},{"fileName":"AnswerBuilderDialog.java","content":"package com.lennyscustomclues.dialogs;\n\nimport com.lennyscustomclues.constraints.*;\nimport com.lennyscustomclues.AnswerBuilder;\nimport com.lennyscustomclues.ApiClient;\nimport com.lennyscustomclues.EmoteData;\nimport net.runelite.api.Client;\nimport net.runelite.api.Player;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.function.Consumer;\n\npublic class AnswerBuilderDialog extends JDialog\n{\n\tprivate AnswerBuilder answerBuilder;\n\tprivate Client client;\n\tprivate ApiClient apiClient;\n\n\t// Fields for update mode\n\tprivate boolean isUpdateMode;\n\tprivate String eventKey;\n\tprivate String secretKey;\n\n\tprivate JTextArea rewardTextArea;\n\tprivate JLabel statusLabel;\n\n\t// Required Action section\n\tprivate JComboBox\u003cString\u003e requiredActionCombo;\n\n\t// Location Constraint section\n\tprivate JComboBox\u003cString\u003e locationTypeCombo;\n\tprivate JPanel locationFieldsPanel;\n\tprivate Map\u003cString, JTextField\u003e locationFields;\n\tprivate Map\u003cString, JLabel\u003e locationLabels;\n\tprivate JButton useCurrentLocationButton;\n\tprivate JLabel coordinatesLabel;\n\tprivate Timer coordinateUpdateTimer;\n\n\t// Emote Constraint section\n\tprivate JPanel emoteSelectionPanel;\n\tprivate JLabel emoteDisplayLabel;\n\tprivate JButton selectEmoteButton;\n\tprivate ActionConstraint emoteConstraint;\n\n\t// Buttons\n\tprivate JButton clearAnswerButton;\n\tprivate JButton submitAnswerButton;\n\tprivate JButton cancelButton;\n\n\t// Constructor for creating a new answer\n\tpublic AnswerBuilderDialog(JFrame parent, Client client, ApiClient apiClient)\n\t{\n\t\tthis(parent, client, apiClient, null, null, null, null);\n\t}\n\n\t// Constructor for updating an existing answer\n\tpublic AnswerBuilderDialog(JFrame parent, Client client, ApiClient apiClient,\n\t\tString eventKey, String secretKey, String rewardText, java.util.List\u003cjava.util.Map\u003cString, Object\u003e\u003e constraints)\n\t{\n\t\tsuper(parent, eventKey !\u003d null ? \"Update Answer\" : \"Create Answer\", false); // false \u003d non-modal\n\t\tthis.client \u003d client;\n\t\tthis.apiClient \u003d apiClient;\n\t\tthis.answerBuilder \u003d new AnswerBuilder();\n\t\tthis.locationFields \u003d new HashMap\u003c\u003e();\n\t\tthis.locationLabels \u003d new HashMap\u003c\u003e();\n\t\tthis.isUpdateMode \u003d eventKey !\u003d null;\n\t\tthis.eventKey \u003d eventKey;\n\t\tthis.secretKey \u003d secretKey;\n\n\t\tinitializeUI();\n\n\t\t// Pre-populate fields if in update mode\n\t\tif (isUpdateMode \u0026\u0026 rewardText !\u003d null)\n\t\t{\n\t\t\tprepopulateFields(rewardText, constraints);\n\t\t}\n\n\t\tstartCoordinateUpdates();\n\t\tpack();\n\t\tsetMinimumSize(new Dimension(500, 600));\n\t\tsetLocationRelativeTo(parent);\n\t\tsetAlwaysOnTop(true); // Keep dialog visible above game client\n\t}\n\n\tprivate void initializeUI()\n\t{\n\t\tsetLayout(new BorderLayout());\n\t\tgetContentPane().setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Title\n\t\tJLabel titleLabel \u003d new JLabel(\"Answer Builder\");\n\t\ttitleLabel.setForeground(Color.WHITE);\n\t\ttitleLabel.setFont(FontManager.getRunescapeFont());\n\t\ttitleLabel.setHorizontalAlignment(SwingConstants.CENTER);\n\t\ttitleLabel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n\n\t\t// Main content panel - single column layout\n\t\tJPanel mainPanel \u003d new JPanel();\n\t\tmainPanel.setLayout(new BoxLayout(mainPanel, BoxLayout.Y_AXIS));\n\t\tmainPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tmainPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n\n\t\t// 1. Reward text area\n\t\tJPanel rewardPanel \u003d new JPanel(new BorderLayout());\n\t\trewardPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\trewardPanel.setBorder(BorderFactory.createTitledBorder(\"Reward Text (Required)\"));\n\t\trewardPanel.setMaximumSize(new Dimension(Integer.MAX_VALUE, 100));\n\n\t\trewardTextArea \u003d new JTextArea(3, 0);\n\t\trewardTextArea.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\trewardTextArea.setForeground(Color.WHITE);\n\t\trewardTextArea.setLineWrap(true);\n\t\trewardTextArea.setWrapStyleWord(true);\n\t\trewardTextArea.setToolTipText(\"This reward text will be shown to players that solve your puzzle!\");\n\t\trewardTextArea.getDocument().addDocumentListener(new javax.swing.event.DocumentListener() {\n\t\t\tpublic void insertUpdate(javax.swing.event.DocumentEvent e) { updateSubmitButtonState(); }\n\t\t\tpublic void removeUpdate(javax.swing.event.DocumentEvent e) { updateSubmitButtonState(); }\n\t\t\tpublic void changedUpdate(javax.swing.event.DocumentEvent e) { updateSubmitButtonState(); }\n\t\t});\n\t\tJScrollPane rewardScrollPane \u003d new JScrollPane(rewardTextArea);\n\t\trewardPanel.add(rewardScrollPane, BorderLayout.CENTER);\n\n\t\t// 2. Required Action section\n\t\tJPanel requiredActionPanel \u003d new JPanel();\n\t\trequiredActionPanel.setLayout(new BoxLayout(requiredActionPanel, BoxLayout.Y_AXIS));\n\t\trequiredActionPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\trequiredActionPanel.setBorder(BorderFactory.createTitledBorder(\"Required Action\"));\n\n\t\tJPanel actionTypePanel \u003d new JPanel(new FlowLayout(FlowLayout.LEFT));\n\t\tactionTypePanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJLabel actionLabel \u003d new JLabel(\"Action Type:\");\n\t\tactionLabel.setForeground(Color.WHITE);\n\t\tactionTypePanel.add(actionLabel);\n\n\t\trequiredActionCombo \u003d new JComboBox\u003c\u003e(new String[]{\"Dig with a spade\", \"Perform an Emote\"});\n\t\trequiredActionCombo.addActionListener(this::onActionTypeChanged);\n\t\tactionTypePanel.add(requiredActionCombo);\n\n\t\trequiredActionPanel.add(actionTypePanel);\n\n\t\t// Emote selection panel (initially hidden)\n\t\temoteSelectionPanel \u003d new JPanel(new FlowLayout(FlowLayout.LEFT));\n\t\temoteSelectionPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\temoteSelectionPanel.setVisible(false);\n\n\t\temoteDisplayLabel \u003d new JLabel(\"No emote selected\");\n\t\temoteDisplayLabel.setForeground(Color.LIGHT_GRAY);\n\t\temoteSelectionPanel.add(emoteDisplayLabel);\n\n\t\tselectEmoteButton \u003d new JButton(\"Select Emote\");\n\t\tselectEmoteButton.addActionListener(this::onSelectEmote);\n\t\temoteSelectionPanel.add(selectEmoteButton);\n\n\t\tJButton clearEmoteButton \u003d new JButton(\"Clear\");\n\t\tclearEmoteButton.addActionListener(this::onClearEmote);\n\t\temoteSelectionPanel.add(clearEmoteButton);\n\n\t\trequiredActionPanel.add(emoteSelectionPanel);\n\n\t\t// 3. Location Constraint section\n\t\tJPanel locationConstraintPanel \u003d new JPanel();\n\t\tlocationConstraintPanel.setLayout(new BoxLayout(locationConstraintPanel, BoxLayout.Y_AXIS));\n\t\tlocationConstraintPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tlocationConstraintPanel.setBorder(BorderFactory.createTitledBorder(\"Location Constraint\"));\n\n\t\t// Location type dropdown and coordinates display\n\t\tJPanel locationTopPanel \u003d new JPanel(new BorderLayout());\n\t\tlocationTopPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJPanel locationTypePanel \u003d new JPanel(new FlowLayout(FlowLayout.LEFT));\n\t\tlocationTypePanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tJLabel locationTypeLabel \u003d new JLabel(\"Type:\");\n\t\tlocationTypeLabel.setForeground(Color.WHITE);\n\t\tlocationTypePanel.add(locationTypeLabel);\n\n\t\tlocationTypeCombo \u003d new JComboBox\u003c\u003e(new String[]{\"Exact Tile\", \"Near a Tile\", \"Within a Rectangle\", \"None\"});\n\t\tlocationTypeCombo.addActionListener(this::onLocationTypeChanged);\n\t\tlocationTypePanel.add(locationTypeCombo);\n\n\t\t// Coordinates display\n\t\tJPanel coordinatesPanel \u003d new JPanel(new FlowLayout(FlowLayout.LEFT));\n\t\tcoordinatesPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tcoordinatesLabel \u003d new JLabel(\"Current Location: Loading...\");\n\t\tcoordinatesLabel.setForeground(Color.CYAN);\n\t\tcoordinatesLabel.setFont(coordinatesLabel.getFont().deriveFont(Font.BOLD));\n\t\tcoordinatesPanel.add(coordinatesLabel);\n\n\t\tlocationTopPanel.add(locationTypePanel, BorderLayout.NORTH);\n\t\tlocationTopPanel.add(coordinatesPanel, BorderLayout.SOUTH);\n\n\t\t// Dynamic location fields panel\n\t\tlocationFieldsPanel \u003d new JPanel(new GridBagLayout());\n\t\tlocationFieldsPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tcreateLocationFields();\n\n\t\tlocationConstraintPanel.add(locationTopPanel);\n\t\tlocationConstraintPanel.add(locationFieldsPanel);\n\n\t\t// 4. Required Worn Items section\n\t\tJPanel wornItemsPanel \u003d new JPanel(new FlowLayout(FlowLayout.LEFT));\n\t\twornItemsPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\twornItemsPanel.setBorder(BorderFactory.createTitledBorder(\"Required Worn Items\"));\n\t\twornItemsPanel.setMaximumSize(new Dimension(Integer.MAX_VALUE, 60));\n\n\t\tJLabel wornItemsLabel \u003d new JLabel(\"Will be implemented soon!\");\n\t\twornItemsLabel.setForeground(Color.LIGHT_GRAY);\n\t\twornItemsPanel.add(wornItemsLabel);\n\n\t\t// 5. Clear button panel (centered)\n\t\tJPanel clearButtonPanel \u003d new JPanel(new FlowLayout(FlowLayout.CENTER));\n\t\tclearButtonPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tclearButtonPanel.setMaximumSize(new Dimension(Integer.MAX_VALUE, 40));\n\n\t\t// 6. Submit button panel\n\t\tJPanel submitPanel \u003d new JPanel(new FlowLayout());\n\t\tsubmitPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tsubmitPanel.setMaximumSize(new Dimension(Integer.MAX_VALUE, 50));\n\n\t\tcreateButtons();\n\n\t\tclearButtonPanel.add(clearAnswerButton);\n\n\t\tsubmitPanel.add(submitAnswerButton);\n\t\tsubmitPanel.add(cancelButton);\n\n\t\t// Status label\n\t\tstatusLabel \u003d new JLabel(\"Ready to build answer\");\n\t\tstatusLabel.setForeground(Color.WHITE);\n\t\tstatusLabel.setHorizontalAlignment(SwingConstants.CENTER);\n\n\t\t// Add all sections to main panel\n\t\tmainPanel.add(rewardPanel);\n\t\tmainPanel.add(Box.createVerticalStrut(10));\n\t\tmainPanel.add(requiredActionPanel);\n\t\tmainPanel.add(Box.createVerticalStrut(10));\n\t\tmainPanel.add(locationConstraintPanel);\n\t\tmainPanel.add(Box.createVerticalStrut(10));\n\t\tmainPanel.add(wornItemsPanel);\n\t\tmainPanel.add(Box.createVerticalStrut(10));\n\t\tmainPanel.add(clearButtonPanel);\n\t\tmainPanel.add(Box.createVerticalStrut(10));\n\t\tmainPanel.add(submitPanel);\n\n\t\tadd(titleLabel, BorderLayout.NORTH);\n\t\tadd(mainPanel, BorderLayout.CENTER);\n\t\tadd(statusLabel, BorderLayout.SOUTH);\n\n\t\tupdateLocationFieldsVisibility();\n\t}\n\n\tprivate void createButtons()\n\t{\n\t\tclearAnswerButton \u003d new JButton(\"Clear All\");\n\t\tclearAnswerButton.addActionListener(this::onClearAnswer);\n\n\t\tsubmitAnswerButton \u003d new JButton(isUpdateMode ? \"Update on Server\" : \"Submit to Server\");\n\t\tsubmitAnswerButton.addActionListener(this::onSubmitAnswer);\n\t\tsubmitAnswerButton.setEnabled(false); // Initially disabled\n\n\t\tcancelButton \u003d new JButton(\"Cancel and discard changes\");\n\t\tcancelButton.addActionListener(this::onCancel);\n\t}\n\n\tprivate void onCancel(ActionEvent e)\n\t{\n\t\tint result \u003d JOptionPane.showConfirmDialog(\n\t\t\tthis,\n\t\t\t\"Are you sure you want to cancel and discard all changes?\",\n\t\t\t\"Confirm Cancel\",\n\t\t\tJOptionPane.YES_NO_OPTION,\n\t\t\tJOptionPane.WARNING_MESSAGE\n\t\t);\n\n\t\tif (result \u003d\u003d JOptionPane.YES_OPTION)\n\t\t{\n\t\t\tdispose();\n\t\t}\n\t}\n\n\tprivate void createLocationFields()\n\t{\n\t\t// Create all possible fields\n\t\tlocationFields.put(\"exactX\", createNumberField());\n\t\tlocationFields.put(\"exactY\", createNumberField());\n\t\tlocationFields.put(\"point1X\", createNumberField());\n\t\tlocationFields.put(\"point1Y\", createNumberField());\n\t\tlocationFields.put(\"point2X\", createNumberField());\n\t\tlocationFields.put(\"point2Y\", createNumberField());\n\t\tlocationFields.put(\"plane\", createNumberField());\n\t\tlocationFields.put(\"tolerance\", createNumberField());\n\n\t\t// Create corresponding labels\n\t\tlocationLabels.put(\"exactX\", createLabel(\"Exact X:\"));\n\t\tlocationLabels.put(\"exactY\", createLabel(\"Exact Y:\"));\n\t\tlocationLabels.put(\"point1X\", createLabel(\"Point 1 X:\"));\n\t\tlocationLabels.put(\"point1Y\", createLabel(\"Point 1 Y:\"));\n\t\tlocationLabels.put(\"point2X\", createLabel(\"Point 2 X:\"));\n\t\tlocationLabels.put(\"point2Y\", createLabel(\"Point 2 Y:\"));\n\t\tlocationLabels.put(\"plane\", createLabel(\"Plane (optional):\"));\n\t\tlocationLabels.put(\"tolerance\", createLabel(\"Tolerance:\"));\n\t}\n\n\tprivate JTextField createNumberField()\n\t{\n\t\tJTextField field \u003d new JTextField(20);\n\t\tfield.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tfield.setForeground(Color.WHITE);\n\t\treturn field;\n\t}\n\n\tprivate JLabel createLabel(String text)\n\t{\n\t\tJLabel label \u003d new JLabel(text);\n\t\tlabel.setForeground(Color.WHITE);\n\t\treturn label;\n\t}\n\n\tprivate void onActionTypeChanged(ActionEvent e)\n\t{\n\t\tString selectedAction \u003d (String) requiredActionCombo.getSelectedItem();\n\t\tboolean isEmoteAction \u003d \"Perform an Emote\".equals(selectedAction);\n\n\t\temoteSelectionPanel.setVisible(isEmoteAction);\n\t\tpack(); // Resize dialog to fit new content\n\t}\n\n\tprivate void onLocationTypeChanged(ActionEvent e)\n\t{\n\t\tupdateLocationFieldsVisibility();\n\t\tpack(); // Resize dialog to fit new content\n\t}\n\n\tprivate void updateLocationFieldsVisibility()\n\t{\n\t\tString selectedType \u003d (String) locationTypeCombo.getSelectedItem();\n\n\t\t// Clear the panel\n\t\tlocationFieldsPanel.removeAll();\n\n\t\tGridBagConstraints gbc \u003d new GridBagConstraints();\n\t\tgbc.insets \u003d new Insets(5, 5, 5, 5);\n\t\tgbc.anchor \u003d GridBagConstraints.WEST;\n\n\t\tint row \u003d 0;\n\n\t\t// Map UI labels to internal constraint types\n\t\tString constraintType;\n\t\tswitch (selectedType)\n\t\t{\n\t\t\tcase \"Exact Tile\":\n\t\t\t\tconstraintType \u003d \"exact\";\n\t\t\t\taddFieldToPanel(gbc, row++, \"exactX\");\n\t\t\t\taddFieldToPanel(gbc, row++, \"exactY\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"Within a Rectangle\":\n\t\t\t\tconstraintType \u003d \"bounds\";\n\t\t\t\taddFieldToPanel(gbc, row++, \"point1X\");\n\t\t\t\taddFieldToPanel(gbc, row++, \"point1Y\");\n\n\t\t\t\t// Add \"Use Current Location\" button for Point 1\n\t\t\t\tJButton usePoint1Button \u003d new JButton(\"Use Current Location for Point 1\");\n\t\t\t\tusePoint1Button.addActionListener(e -\u003e onUseCurrentLocationForPoint(1));\n\t\t\t\tgbc.gridx \u003d 0;\n\t\t\t\tgbc.gridy \u003d row++;\n\t\t\t\tgbc.gridwidth \u003d 2;\n\t\t\t\tgbc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\t\t\tgbc.insets \u003d new Insets(5, 5, 10, 5);\n\t\t\t\tlocationFieldsPanel.add(usePoint1Button, gbc);\n\t\t\t\tgbc.gridwidth \u003d 1;\n\t\t\t\tgbc.insets \u003d new Insets(5, 5, 5, 5);\n\n\t\t\t\taddFieldToPanel(gbc, row++, \"point2X\");\n\t\t\t\taddFieldToPanel(gbc, row++, \"point2Y\");\n\n\t\t\t\t// Add \"Use Current Location\" button for Point 2\n\t\t\t\tJButton usePoint2Button \u003d new JButton(\"Use Current Location for Point 2\");\n\t\t\t\tusePoint2Button.addActionListener(e -\u003e onUseCurrentLocationForPoint(2));\n\t\t\t\tgbc.gridx \u003d 0;\n\t\t\t\tgbc.gridy \u003d row++;\n\t\t\t\tgbc.gridwidth \u003d 2;\n\t\t\t\tgbc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\t\t\tgbc.insets \u003d new Insets(5, 5, 10, 5);\n\t\t\t\tlocationFieldsPanel.add(usePoint2Button, gbc);\n\t\t\t\tgbc.gridwidth \u003d 1;\n\t\t\t\tgbc.insets \u003d new Insets(5, 5, 5, 5);\n\t\t\t\tbreak;\n\n\t\t\tcase \"None\":\n\t\t\t\t// No location constraint fields needed\n\t\t\t\tconstraintType \u003d null;\n\t\t\t\tbreak;\n\n\t\t\tcase \"Near a Tile\":\n\t\t\tdefault:\n\t\t\t\tconstraintType \u003d \"tolerance\";\n\t\t\t\taddFieldToPanel(gbc, row++, \"exactX\");\n\t\t\t\taddFieldToPanel(gbc, row++, \"exactY\");\n\t\t\t\taddFieldToPanel(gbc, row++, \"tolerance\");\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Always add plane field (optional for all types except None)\n\t\tif (!\"None\".equals(selectedType))\n\t\t{\n\t\t\taddFieldToPanel(gbc, row++, \"plane\");\n\t\t}\n\n\t\t// Add \"Use Current Location\" button for exact and tolerance types\n\t\tif (\"Exact Tile\".equals(selectedType) || \"Near a Tile\".equals(selectedType))\n\t\t{\n\t\t\tuseCurrentLocationButton \u003d new JButton(\"Use Current Location\");\n\t\t\tuseCurrentLocationButton.addActionListener(this::onUseCurrentLocation);\n\n\t\t\tgbc.gridx \u003d 0;\n\t\t\tgbc.gridy \u003d row;\n\t\t\tgbc.gridwidth \u003d 2;\n\t\t\tgbc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\t\tgbc.insets \u003d new Insets(10, 5, 5, 5);\n\t\t\tlocationFieldsPanel.add(useCurrentLocationButton, gbc);\n\t\t\tgbc.gridwidth \u003d 1;\n\t\t\tgbc.insets \u003d new Insets(5, 5, 5, 5);\n\t\t}\n\n\t\t// Refresh the panel\n\t\tlocationFieldsPanel.revalidate();\n\t\tlocationFieldsPanel.repaint();\n\t}\n\n\tprivate void addFieldToPanel(GridBagConstraints gbc, int row, String fieldName)\n\t{\n\t\tJLabel label \u003d locationLabels.get(fieldName);\n\t\tJTextField field \u003d locationFields.get(fieldName);\n\n\t\tif (label !\u003d null \u0026\u0026 field !\u003d null)\n\t\t{\n\t\t\t// Add label\n\t\t\tgbc.gridx \u003d 0;\n\t\t\tgbc.gridy \u003d row;\n\t\t\tgbc.fill \u003d GridBagConstraints.NONE;\n\t\t\tlocationFieldsPanel.add(label, gbc);\n\n\t\t\t// Add field\n\t\t\tgbc.gridx \u003d 1;\n\t\t\tgbc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\t\tgbc.weightx \u003d 1.0;\n\t\t\tlocationFieldsPanel.add(field, gbc);\n\t\t\tgbc.weightx \u003d 0.0;\n\t\t}\n\t}\n\n\tprivate void onUseCurrentLocation(ActionEvent e)\n\t{\n\t\tWorldPoint currentLocation \u003d getCurrentPlayerLocation();\n\t\tif (currentLocation !\u003d null)\n\t\t{\n\t\t\tJTextField exactXField \u003d locationFields.get(\"exactX\");\n\t\t\tJTextField exactYField \u003d locationFields.get(\"exactY\");\n\t\t\tJTextField planeField \u003d locationFields.get(\"plane\");\n\n\t\t\tif (exactXField !\u003d null) exactXField.setText(String.valueOf(currentLocation.getX()));\n\t\t\tif (exactYField !\u003d null) exactYField.setText(String.valueOf(currentLocation.getY()));\n\t\t\tif (planeField !\u003d null) planeField.setText(String.valueOf(currentLocation.getPlane()));\n\t\t}\n\t}\n\n\tprivate void onUseCurrentLocationForPoint(int pointNumber)\n\t{\n\t\tWorldPoint currentLocation \u003d getCurrentPlayerLocation();\n\t\tif (currentLocation !\u003d null)\n\t\t{\n\t\t\tString xFieldName \u003d \"point\" + pointNumber + \"X\";\n\t\t\tString yFieldName \u003d \"point\" + pointNumber + \"Y\";\n\n\t\t\tJTextField xField \u003d locationFields.get(xFieldName);\n\t\t\tJTextField yField \u003d locationFields.get(yFieldName);\n\t\t\tJTextField planeField \u003d locationFields.get(\"plane\");\n\n\t\t\tif (xField !\u003d null) xField.setText(String.valueOf(currentLocation.getX()));\n\t\t\tif (yField !\u003d null) yField.setText(String.valueOf(currentLocation.getY()));\n\t\t\tif (planeField !\u003d null) planeField.setText(String.valueOf(currentLocation.getPlane()));\n\t\t}\n\t}\n\n\tprivate void onSelectEmote(ActionEvent e)\n\t{\n\t\tWindow parentWindow \u003d SwingUtilities.getWindowAncestor(this);\n\t\tJFrame parentFrame \u003d (parentWindow instanceof JFrame) ? (JFrame) parentWindow : null;\n\n\t\tEmoteConstraintDialog dialog \u003d new EmoteConstraintDialog(\n\t\t\tparentFrame,\n\t\t\temoteConstraint,\n\t\t\tconstraint -\u003e {\n\t\t\t\temoteConstraint \u003d constraint;\n\t\t\t\tupdateEmoteDisplay();\n\t\t\t}\n\t\t);\n\n\t\tdialog.setVisible(true);\n\t}\n\n\tprivate void onClearEmote(ActionEvent e)\n\t{\n\t\temoteConstraint \u003d null;\n\t\tupdateEmoteDisplay();\n\t}\n\n\tprivate void updateEmoteDisplay()\n\t{\n\t\tif (emoteConstraint !\u003d null \u0026\u0026 emoteConstraint.getEmoteId() !\u003d null)\n\t\t{\n\t\t\tString emoteName \u003d EmoteData.getEmoteName(emoteConstraint.getEmoteId());\n\t\t\temoteDisplayLabel.setText(\"Selected: \" + emoteName);\n\t\t\temoteDisplayLabel.setForeground(Color.WHITE);\n\t\t}\n\t\telse\n\t\t{\n\t\t\temoteDisplayLabel.setText(\"No emote selected\");\n\t\t\temoteDisplayLabel.setForeground(Color.LIGHT_GRAY);\n\t\t}\n\t}\n\n\tprivate void onSubmitAnswer(ActionEvent e)\n\t{\n\t\ttry\n\t\t{\n\t\t\t// Clear any existing data first\n\t\t\tanswerBuilder.clear();\n\n\t\t\t// Update the answer builder with current reward text\n\t\t\tanswerBuilder.setRewardText(rewardTextArea.getText().trim());\n\n\t\t\t// Build and add the location constraint (if not \"None\")\n\t\t\tLocationConstraint locationConstraint \u003d buildLocationConstraint();\n\t\t\tif (locationConstraint !\u003d null)\n\t\t\t{\n\t\t\t\tanswerBuilder.addConstraint(locationConstraint);\n\t\t\t}\n\n\t\t\t// Add the emote constraint if \"Perform an Emote\" is selected\n\t\t\tString selectedAction \u003d (String) requiredActionCombo.getSelectedItem();\n\t\t\tif (\"Perform an Emote\".equals(selectedAction))\n\t\t\t{\n\t\t\t\tif (emoteConstraint \u003d\u003d null || emoteConstraint.getEmoteId() \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tJOptionPane.showMessageDialog(this, \"Please select an emote\", \"Emote Required\", JOptionPane.WARNING_MESSAGE);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tanswerBuilder.addConstraint(emoteConstraint);\n\t\t\t}\n\n\t\t\tif (isUpdateMode)\n\t\t\t{\n\t\t\t\t// Update mode - directly submit the update\n\t\t\t\tstatusLabel.setText(\"Updating answer on server...\");\n\t\t\t\tstatusLabel.setForeground(java.awt.Color.YELLOW);\n\n\t\t\t\tapiClient.updateAnswer(eventKey, secretKey, answerBuilder).thenAccept(response -\u003e {\n\t\t\t\t\tjavax.swing.SwingUtilities.invokeLater(() -\u003e {\n\t\t\t\t\t\tif (response.success)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// Show success popup\n\t\t\t\t\t\t\tJOptionPane.showMessageDialog(\n\t\t\t\t\t\t\t\tAnswerBuilderDialog.this,\n\t\t\t\t\t\t\t\t\"Answer updated successfully\",\n\t\t\t\t\t\t\t\t\"Success\",\n\t\t\t\t\t\t\t\tJOptionPane.INFORMATION_MESSAGE\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t// Close the dialog\n\t\t\t\t\t\t\tAnswerBuilderDialog.this.dispose();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// Handle different error types with appropriate messages\n\t\t\t\t\t\t\tString errorMessage \u003d \" Failed to update answer: \" + response.message;\n\t\t\t\t\t\t\tif (\"NOT_FOUND\".equals(response.errorType))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\terrorMessage \u003d \" Event key not found\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (\"UNAUTHORIZED\".equals(response.errorType))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\terrorMessage \u003d \" Invalid secret key\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (\"NETWORK_ERROR\".equals(response.errorType))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\terrorMessage \u003d \" Network error: \" + response.message;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (\"VALIDATION_ERROR\".equals(response.errorType))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\terrorMessage \u003d \" Validation error: \" + response.message;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (\"SERVER_ERROR\".equals(response.errorType))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\terrorMessage \u003d \" Server error: \" + response.message;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tstatusLabel.setText(errorMessage);\n\t\t\t\t\t\t\tstatusLabel.setForeground(java.awt.Color.RED);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// Create mode - show dialog to get event key and secret key\n\t\t\t\t// Find the parent frame\n\t\t\t\tWindow parentWindow \u003d SwingUtilities.getWindowAncestor(this);\n\t\t\t\tJFrame parentFrame \u003d (parentWindow instanceof JFrame) ? (JFrame) parentWindow : null;\n\n\t\t\t\tSubmitAnswerDialog dialog \u003d new SubmitAnswerDialog(\n\t\t\t\t\tparentFrame,\n\t\t\t\t\tanswerBuilder,\n\t\t\t\t\tapiClient,\n\t\t\t\t\t(eventKey, secretKey) -\u003e {\n\t\t\t\t\t\t// Handle the submission\n\t\t\t\t\t\tstatusLabel.setText(\"Submitting answer to server...\");\n\t\t\t\t\t\tstatusLabel.setForeground(java.awt.Color.YELLOW);\n\n\t\t\t\t\t\t// Actually submit the answer to the server\n\t\t\t\t\t\tapiClient.createAnswer(eventKey, secretKey, answerBuilder).thenAccept(response -\u003e {\n\t\t\t\t\t\t\tjavax.swing.SwingUtilities.invokeLater(() -\u003e {\n\t\t\t\t\t\t\t\tif (response.success)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t// Show success popup\n\t\t\t\t\t\t\t\t\tJOptionPane.showMessageDialog(\n\t\t\t\t\t\t\t\t\t\tAnswerBuilderDialog.this,\n\t\t\t\t\t\t\t\t\t\t\"Answer submitted successfully\",\n\t\t\t\t\t\t\t\t\t\t\"Success\",\n\t\t\t\t\t\t\t\t\t\tJOptionPane.INFORMATION_MESSAGE\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\t// Close both dialogs\n\t\t\t\t\t\t\t\t\tAnswerBuilderDialog.this.dispose();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t// Handle different error types with appropriate messages\n\t\t\t\t\t\t\t\t\tString errorMessage \u003d \" Failed to submit answer: \" + response.message;\n\t\t\t\t\t\t\t\t\tif (\"KEY_ALREADY_EXISTS\".equals(response.errorType))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\terrorMessage \u003d \" Event key \u0027\" + eventKey + \"\u0027 already exists\";\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if (\"NETWORK_ERROR\".equals(response.errorType))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\terrorMessage \u003d \" Network error: \" + response.message;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if (\"VALIDATION_ERROR\".equals(response.errorType))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\terrorMessage \u003d \" Validation error: \" + response.message;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if (\"SERVER_ERROR\".equals(response.errorType))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\terrorMessage \u003d \" Server error: \" + response.message;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tstatusLabel.setText(errorMessage);\n\t\t\t\t\t\t\t\t\tstatusLabel.setForeground(java.awt.Color.RED);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tdialog.setVisible(true);\n\t\t\t}\n\t\t}\n\t\tcatch (NumberFormatException ex)\n\t\t{\n\t\t\tJOptionPane.showMessageDialog(this, \"Please enter valid numbers for location fields\", \"Input Error\", JOptionPane.ERROR_MESSAGE);\n\t\t}\n\t\tcatch (IllegalArgumentException ex)\n\t\t{\n\t\t\tJOptionPane.showMessageDialog(this, ex.getMessage(), \"Validation Error\", JOptionPane.ERROR_MESSAGE);\n\t\t}\n\t}\n\n\tprivate LocationConstraint buildLocationConstraint()\n\t{\n\t\tString selectedType \u003d (String) locationTypeCombo.getSelectedItem();\n\t\tString constraintType;\n\n\t\tswitch (selectedType)\n\t\t{\n\t\t\tcase \"Exact Tile\":\n\t\t\t\tconstraintType \u003d \"exact\";\n\t\t\t\tbreak;\n\t\t\tcase \"Within a Rectangle\":\n\t\t\t\tconstraintType \u003d \"bounds\";\n\t\t\t\tbreak;\n\t\t\tcase \"None\":\n\t\t\t\treturn null; // No location constraint\n\t\t\tcase \"Near a Tile\":\n\t\t\tdefault:\n\t\t\t\tconstraintType \u003d \"tolerance\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\tLocationConstraint constraint \u003d new LocationConstraint(constraintType);\n\t\tconstraint.setExactX(parseInteger(\"exactX\"));\n\t\tconstraint.setExactY(parseInteger(\"exactY\"));\n\t\tconstraint.setPlane(parseInteger(\"plane\"));\n\t\tconstraint.setTolerance(parseInteger(\"tolerance\"));\n\n\t\t// For bounds type, calculate min/max from the two points\n\t\tif (\"bounds\".equals(constraintType))\n\t\t{\n\t\t\tInteger point1X \u003d parseInteger(\"point1X\");\n\t\t\tInteger point1Y \u003d parseInteger(\"point1Y\");\n\t\t\tInteger point2X \u003d parseInteger(\"point2X\");\n\t\t\tInteger point2Y \u003d parseInteger(\"point2Y\");\n\n\t\t\tif (point1X !\u003d null \u0026\u0026 point2X !\u003d null)\n\t\t\t{\n\t\t\t\tconstraint.setMinX(Math.min(point1X, point2X));\n\t\t\t\tconstraint.setMaxX(Math.max(point1X, point2X));\n\t\t\t}\n\n\t\t\tif (point1Y !\u003d null \u0026\u0026 point2Y !\u003d null)\n\t\t\t{\n\t\t\t\tconstraint.setMinY(Math.min(point1Y, point2Y));\n\t\t\t\tconstraint.setMaxY(Math.max(point1Y, point2Y));\n\t\t\t}\n\t\t}\n\n\t\treturn constraint;\n\t}\n\n\tprivate Integer parseInteger(String fieldName)\n\t{\n\t\tJTextField field \u003d locationFields.get(fieldName);\n\t\tif (field \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tString text \u003d field.getText();\n\t\tif (text \u003d\u003d null || text.trim().isEmpty())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\treturn Integer.parseInt(text.trim());\n\t}\n\n\tprivate void onClearAnswer(ActionEvent e)\n\t{\n\t\tint result \u003d JOptionPane.showConfirmDialog(\n\t\t\tthis,\n\t\t\t\"Are you sure you want to clear all drafted answer information?\",\n\t\t\t\"Confirm Clear\",\n\t\t\tJOptionPane.YES_NO_OPTION,\n\t\t\tJOptionPane.WARNING_MESSAGE\n\t\t);\n\n\t\tif (result \u003d\u003d JOptionPane.YES_OPTION)\n\t\t{\n\t\t\tanswerBuilder.clear();\n\t\t\trewardTextArea.setText(\"\");\n\t\t\trequiredActionCombo.setSelectedItem(\"Dig with a spade\");\n\t\t\tclearLocationFields();\n\t\t\temoteConstraint \u003d null;\n\t\t\tupdateEmoteDisplay();\n\t\t\tupdateSubmitButtonState();\n\t\t\tstatusLabel.setText(\"Answer cleared\");\n\t\t}\n\t}\n\n\tprivate void clearLocationFields()\n\t{\n\t\tfor (JTextField field : locationFields.values())\n\t\t{\n\t\t\tfield.setText(\"\");\n\t\t}\n\t}\n\n\tprivate void updateSubmitButtonState()\n\t{\n\t\tboolean hasRewardText \u003d rewardTextArea !\u003d null \u0026\u0026 !rewardTextArea.getText().trim().isEmpty();\n\n\t\tif (submitAnswerButton !\u003d null)\n\t\t{\n\t\t\tsubmitAnswerButton.setEnabled(hasRewardText);\n\t\t}\n\t}\n\n\tprivate void startCoordinateUpdates()\n\t{\n\t\t// Update coordinates every 500ms\n\t\tcoordinateUpdateTimer \u003d new Timer(500, e -\u003e updateCoordinatesDisplay());\n\t\tcoordinateUpdateTimer.start();\n\t\tupdateCoordinatesDisplay(); // Initial update\n\t}\n\n\tprivate void stopCoordinateUpdates()\n\t{\n\t\tif (coordinateUpdateTimer !\u003d null)\n\t\t{\n\t\t\tcoordinateUpdateTimer.stop();\n\t\t}\n\t}\n\n\tprivate void updateCoordinatesDisplay()\n\t{\n\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\tWorldPoint location \u003d getCurrentPlayerLocation();\n\t\t\tif (location !\u003d null)\n\t\t\t{\n\t\t\t\tcoordinatesLabel.setText(String.format(\"Current Location: X:%d Y:%d Plane:%d\",\n\t\t\t\t\tlocation.getX(), location.getY(), location.getPlane()));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcoordinatesLabel.setText(\"Current Location: Not available\");\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate WorldPoint getCurrentPlayerLocation()\n\t{\n\t\tif (client \u003d\u003d null) return null;\n\n\t\tPlayer player \u003d client.getLocalPlayer();\n\t\tif (player \u003d\u003d null) return null;\n\n\t\treturn player.getWorldLocation();\n\t}\n\n\tprivate void prepopulateFields(String rewardText, java.util.List\u003cjava.util.Map\u003cString, Object\u003e\u003e constraints)\n\t{\n\t\t// Set reward text\n\t\trewardTextArea.setText(rewardText);\n\n\t\t// Parse and set constraints if present\n\t\tif (constraints !\u003d null \u0026\u0026 !constraints.isEmpty())\n\t\t{\n\t\t\tfor (java.util.Map\u003cString, Object\u003e constraintMap : constraints)\n\t\t\t{\n\t\t\t\tString constraintType \u003d (String) constraintMap.get(\"constraint_type\");\n\n\t\t\t\tif (\"location\".equals(constraintType))\n\t\t\t\t{\n\t\t\t\t\tString type \u003d (String) constraintMap.get(\"type\");\n\n\t\t\t\t\t// Set the location type in the dropdown\n\t\t\t\t\tif (\"exact\".equals(type))\n\t\t\t\t\t{\n\t\t\t\t\t\tlocationTypeCombo.setSelectedItem(\"Exact Tile\");\n\t\t\t\t\t\tsetIntegerField(\"exactX\", constraintMap.get(\"exact_x\"));\n\t\t\t\t\t\tsetIntegerField(\"exactY\", constraintMap.get(\"exact_y\"));\n\t\t\t\t\t}\n\t\t\t\t\telse if (\"tolerance\".equals(type))\n\t\t\t\t\t{\n\t\t\t\t\t\tlocationTypeCombo.setSelectedItem(\"Near a Tile\");\n\t\t\t\t\t\tsetIntegerField(\"exactX\", constraintMap.get(\"exact_x\"));\n\t\t\t\t\t\tsetIntegerField(\"exactY\", constraintMap.get(\"exact_y\"));\n\t\t\t\t\t\tsetIntegerField(\"tolerance\", constraintMap.get(\"tolerance\"));\n\t\t\t\t\t}\n\t\t\t\t\telse if (\"bounds\".equals(type))\n\t\t\t\t\t{\n\t\t\t\t\t\tlocationTypeCombo.setSelectedItem(\"Within a Rectangle\");\n\t\t\t\t\t\t// Convert min/max back to point1/point2 for display\n\t\t\t\t\t\tsetIntegerField(\"point1X\", constraintMap.get(\"min_x\"));\n\t\t\t\t\t\tsetIntegerField(\"point1Y\", constraintMap.get(\"min_y\"));\n\t\t\t\t\t\tsetIntegerField(\"point2X\", constraintMap.get(\"max_x\"));\n\t\t\t\t\t\tsetIntegerField(\"point2Y\", constraintMap.get(\"max_y\"));\n\t\t\t\t\t}\n\n\t\t\t\t\t// Set plane if present\n\t\t\t\t\tsetIntegerField(\"plane\", constraintMap.get(\"plane\"));\n\t\t\t\t}\n\t\t\t\telse if (\"action\".equals(constraintType))\n\t\t\t\t{\n\t\t\t\t\tString type \u003d (String) constraintMap.get(\"type\");\n\n\t\t\t\t\tif (\"emote\".equals(type))\n\t\t\t\t\t{\n\t\t\t\t\t\tObject emoteIdObj \u003d constraintMap.get(\"emote_id\");\n\t\t\t\t\t\tif (emoteIdObj !\u003d null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tInteger emoteId \u003d null;\n\t\t\t\t\t\t\tif (emoteIdObj instanceof Number)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\temoteId \u003d ((Number) emoteIdObj).intValue();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (emoteId !\u003d null)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t// Set the action type to \"Perform an Emote\"\n\t\t\t\t\t\t\t\trequiredActionCombo.setSelectedItem(\"Perform an Emote\");\n\n\t\t\t\t\t\t\t\temoteConstraint \u003d new ActionConstraint(\"emote\");\n\t\t\t\t\t\t\t\temoteConstraint.setEmoteId(emoteId);\n\t\t\t\t\t\t\t\tupdateEmoteDisplay();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tupdateSubmitButtonState();\n\t}\n\n\tprivate void setIntegerField(String fieldName, Object value)\n\t{\n\t\tJTextField field \u003d locationFields.get(fieldName);\n\t\tif (field !\u003d null \u0026\u0026 value !\u003d null)\n\t\t{\n\t\t\t// Handle both Integer and Double from JSON parsing\n\t\t\tif (value instanceof Number)\n\t\t\t{\n\t\t\t\tfield.setText(String.valueOf(((Number) value).intValue()));\n\t\t\t}\n\t\t\telse if (value instanceof String)\n\t\t\t{\n\t\t\t\tfield.setText((String) value);\n\t\t\t}\n\t\t}\n\t}\n\n\t@Override\n\tpublic void dispose()\n\t{\n\t\tstopCoordinateUpdates();\n\t\tsuper.dispose();\n\t}\n\n\tpublic AnswerBuilder getAnswerBuilder()\n\t{\n\t\treturn answerBuilder;\n\t}\n}\n","filePath":"src\\main\\java\\com\\lennyscustomclues\\dialogs\\AnswerBuilderDialog.java"},{"fileName":"EmoteConstraintDialog.java","content":"package com.lennyscustomclues.dialogs;\n\nimport com.lennyscustomclues.EmoteData;\nimport com.lennyscustomclues.constraints.ActionConstraint;\nimport net.runelite.client.ui.ColorScheme;\n\nimport javax.swing.*;\nimport javax.swing.event.DocumentEvent;\nimport javax.swing.event.DocumentListener;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.function.Consumer;\n\npublic class EmoteConstraintDialog extends JDialog\n{\n\tprivate JTextField searchField;\n\tprivate JList\u003cString\u003e emoteList;\n\tprivate DefaultListModel\u003cString\u003e listModel;\n\tprivate List\u003cString\u003e allEmoteNames;\n\n\tprivate ActionConstraint constraint;\n\tprivate Consumer\u003cActionConstraint\u003e onSave;\n\tprivate boolean cancelled \u003d true;\n\n\tpublic EmoteConstraintDialog(JFrame parent, ActionConstraint existing, Consumer\u003cActionConstraint\u003e onSave)\n\t{\n\t\tsuper(parent, \"Emote Constraint\", false); // false \u003d non-modal\n\t\tthis.onSave \u003d onSave;\n\t\tthis.constraint \u003d existing !\u003d null ? existing : new ActionConstraint(\"emote\");\n\n\t\t// Get all emote names\n\t\tallEmoteNames \u003d new ArrayList\u003c\u003e(EmoteData.getEmotes().keySet());\n\n\t\tinitializeUI();\n\t\tpopulateFields();\n\t\tpack();\n\t\tsetLocationRelativeTo(parent);\n\t\tsetAlwaysOnTop(true);\n\t}\n\n\tprivate void initializeUI()\n\t{\n\t\tsetLayout(new BorderLayout(10, 10));\n\t\tgetContentPane().setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Top panel with instructions and search\n\t\tJPanel topPanel \u003d new JPanel(new BorderLayout(5, 5));\n\t\ttopPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\ttopPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 0, 10));\n\n\t\tJLabel instructionLabel \u003d new JLabel(\"Select an emote:\");\n\t\tinstructionLabel.setForeground(Color.WHITE);\n\t\ttopPanel.add(instructionLabel, BorderLayout.NORTH);\n\n\t\t// Search field\n\t\tJPanel searchPanel \u003d new JPanel(new BorderLayout(5, 0));\n\t\tsearchPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJLabel searchLabel \u003d new JLabel(\"Search:\");\n\t\tsearchLabel.setForeground(Color.WHITE);\n\t\tsearchPanel.add(searchLabel, BorderLayout.WEST);\n\n\t\tsearchField \u003d new JTextField(20);\n\t\tsearchField.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tsearchField.setForeground(Color.WHITE);\n\t\tsearchField.getDocument().addDocumentListener(new DocumentListener()\n\t\t{\n\t\t\t@Override\n\t\t\tpublic void insertUpdate(DocumentEvent e)\n\t\t\t{\n\t\t\t\tfilterEmotes();\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void removeUpdate(DocumentEvent e)\n\t\t\t{\n\t\t\t\tfilterEmotes();\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void changedUpdate(DocumentEvent e)\n\t\t\t{\n\t\t\t\tfilterEmotes();\n\t\t\t}\n\t\t});\n\t\tsearchPanel.add(searchField, BorderLayout.CENTER);\n\n\t\ttopPanel.add(searchPanel, BorderLayout.SOUTH);\n\n\t\t// Center panel with emote list\n\t\tJPanel centerPanel \u003d new JPanel(new BorderLayout());\n\t\tcenterPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tcenterPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n\n\t\tlistModel \u003d new DefaultListModel\u003c\u003e();\n\t\tfor (String emoteName : allEmoteNames)\n\t\t{\n\t\t\tlistModel.addElement(emoteName);\n\t\t}\n\n\t\temoteList \u003d new JList\u003c\u003e(listModel);\n\t\temoteList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);\n\t\temoteList.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\temoteList.setForeground(Color.WHITE);\n\t\temoteList.setVisibleRowCount(15);\n\n\t\tJScrollPane scrollPane \u003d new JScrollPane(emoteList);\n\t\tscrollPane.setPreferredSize(new Dimension(300, 300));\n\t\tcenterPanel.add(scrollPane, BorderLayout.CENTER);\n\n\t\t// Buttons panel\n\t\tJPanel buttonPanel \u003d new JPanel(new FlowLayout());\n\t\tbuttonPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tbuttonPanel.setBorder(BorderFactory.createEmptyBorder(0, 10, 10, 10));\n\n\t\tJButton saveButton \u003d new JButton(\"Save\");\n\t\tJButton cancelButton \u003d new JButton(\"Cancel\");\n\n\t\tsaveButton.addActionListener(this::onSave);\n\t\tcancelButton.addActionListener(this::onCancel);\n\n\t\tbuttonPanel.add(saveButton);\n\t\tbuttonPanel.add(cancelButton);\n\n\t\tadd(topPanel, BorderLayout.NORTH);\n\t\tadd(centerPanel, BorderLayout.CENTER);\n\t\tadd(buttonPanel, BorderLayout.SOUTH);\n\t}\n\n\tprivate void populateFields()\n\t{\n\t\t// If editing an existing constraint, select the corresponding emote\n\t\tif (constraint.getEmoteId() !\u003d null)\n\t\t{\n\t\t\tString emoteName \u003d EmoteData.getEmoteName(constraint.getEmoteId());\n\t\t\tif (emoteName !\u003d null \u0026\u0026 !emoteName.equals(\"Unknown Emote\"))\n\t\t\t{\n\t\t\t\temoteList.setSelectedValue(emoteName, true);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void filterEmotes()\n\t{\n\t\tString searchText \u003d searchField.getText().toLowerCase();\n\t\tlistModel.clear();\n\n\t\tfor (String emoteName : allEmoteNames)\n\t\t{\n\t\t\tif (emoteName.toLowerCase().contains(searchText))\n\t\t\t{\n\t\t\t\tlistModel.addElement(emoteName);\n\t\t\t}\n\t\t}\n\n\t\t// If there\u0027s only one match, select it\n\t\tif (listModel.getSize() \u003d\u003d 1)\n\t\t{\n\t\t\temoteList.setSelectedIndex(0);\n\t\t}\n\t}\n\n\tprivate void onSave(ActionEvent e)\n\t{\n\t\tString selectedEmote \u003d emoteList.getSelectedValue();\n\t\tif (selectedEmote \u003d\u003d null)\n\t\t{\n\t\t\tJOptionPane.showMessageDialog(this, \"Please select an emote\", \"Selection Required\", JOptionPane.WARNING_MESSAGE);\n\t\t\treturn;\n\t\t}\n\n\t\tInteger emoteId \u003d EmoteData.getEmoteId(selectedEmote);\n\t\tif (emoteId \u003d\u003d null)\n\t\t{\n\t\t\tJOptionPane.showMessageDialog(this, \"Invalid emote selected\", \"Error\", JOptionPane.ERROR_MESSAGE);\n\t\t\treturn;\n\t\t}\n\n\t\tconstraint.setType(\"emote\");\n\t\tconstraint.setEmoteId(emoteId);\n\n\t\tcancelled \u003d false;\n\t\tonSave.accept(constraint);\n\t\tdispose();\n\t}\n\n\tprivate void onCancel(ActionEvent e)\n\t{\n\t\tcancelled \u003d true;\n\t\tdispose();\n\t}\n\n\tpublic boolean wasCancelled()\n\t{\n\t\treturn cancelled;\n\t}\n}\n","filePath":"src\\main\\java\\com\\lennyscustomclues\\dialogs\\EmoteConstraintDialog.java"},{"fileName":"EventInfoDialog.java","content":"package com.lennyscustomclues.dialogs;\n\nimport com.lennyscustomclues.ApiClient;\nimport com.lennyscustomclues.EmoteData;\nimport com.lennyscustomclues.constraints.LocationConstraint;\nimport net.runelite.api.Client;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\n\nimport javax.swing.*;\nimport javax.swing.table.DefaultTableCellRenderer;\nimport javax.swing.table.DefaultTableModel;\nimport java.awt.*;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.TimeZone;\n\npublic class EventInfoDialog extends JDialog\n{\n\tprivate ApiClient apiClient;\n\tprivate Client client;\n\tprivate JFrame parentFrame;\n\tprivate String eventKey;\n\tprivate String secretKey;\n\tprivate String rewardText;\n\tprivate List\u003cMap\u003cString, Object\u003e\u003e constraints;\n\tprivate List\u003cApiClient.PlayerCompletion\u003e completedBy;\n\n\t// UI components that need to be refreshed\n\tprivate JPanel mainPanel;\n\tprivate JLabel statusLabel;\n\n\tpublic EventInfoDialog(JFrame parent, Client client, ApiClient apiClient,\n\t\tString eventKey, String secretKey, String rewardText,\n\t\tList\u003cMap\u003cString, Object\u003e\u003e constraints, List\u003cApiClient.PlayerCompletion\u003e completedBy)\n\t{\n\t\tsuper(parent, \"Event Information\", true);\n\t\tthis.parentFrame \u003d parent;\n\t\tthis.client \u003d client;\n\t\tthis.apiClient \u003d apiClient;\n\t\tthis.eventKey \u003d eventKey;\n\t\tthis.secretKey \u003d secretKey;\n\t\tthis.rewardText \u003d rewardText;\n\t\tthis.constraints \u003d constraints;\n\t\tthis.completedBy \u003d completedBy;\n\n\t\tinitializeUI();\n\t\tpack();\n\t\tsetMinimumSize(new Dimension(600, 500));\n\t\tsetLocationRelativeTo(parent);\n\t}\n\n\tprivate void initializeUI()\n\t{\n\t\tsetLayout(new BorderLayout());\n\t\tgetContentPane().setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Title\n\t\tJLabel titleLabel \u003d new JLabel(\"Event: \" + eventKey);\n\t\ttitleLabel.setForeground(Color.WHITE);\n\t\ttitleLabel.setFont(FontManager.getRunescapeFont().deriveFont(Font.BOLD, 14f));\n\t\ttitleLabel.setHorizontalAlignment(SwingConstants.CENTER);\n\t\ttitleLabel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n\n\t\t// Main content panel\n\t\tmainPanel \u003d new JPanel();\n\t\tmainPanel.setLayout(new BoxLayout(mainPanel, BoxLayout.Y_AXIS));\n\t\tmainPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tmainPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n\n\t\t// Answer summary panel\n\t\tJPanel summaryPanel \u003d createAnswerSummaryPanel();\n\n\t\t// Solvers panel\n\t\tJPanel solversPanel \u003d createSolversPanel();\n\n\t\tmainPanel.add(summaryPanel);\n\t\tmainPanel.add(Box.createVerticalStrut(10));\n\t\tmainPanel.add(solversPanel);\n\n\t\t// Bottom panel with buttons and status\n\t\tJPanel bottomPanel \u003d new JPanel();\n\t\tbottomPanel.setLayout(new BoxLayout(bottomPanel, BoxLayout.Y_AXIS));\n\t\tbottomPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Buttons panel\n\t\tJPanel buttonPanel \u003d new JPanel(new FlowLayout(FlowLayout.CENTER));\n\t\tbuttonPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tJButton refreshButton \u003d new JButton(\"Refresh\");\n\t\trefreshButton.addActionListener(e -\u003e onRefresh());\n\t\tbuttonPanel.add(refreshButton);\n\n\t\tJButton editButton \u003d new JButton(\"Edit Answer\");\n\t\teditButton.addActionListener(e -\u003e onEditAnswer());\n\t\tbuttonPanel.add(editButton);\n\n\t\tJButton closeButton \u003d new JButton(\"Close\");\n\t\tcloseButton.addActionListener(e -\u003e dispose());\n\t\tbuttonPanel.add(closeButton);\n\n\t\t// Status label\n\t\tstatusLabel \u003d new JLabel(\" \");\n\t\tstatusLabel.setForeground(Color.WHITE);\n\t\tstatusLabel.setHorizontalAlignment(SwingConstants.CENTER);\n\t\tstatusLabel.setBorder(BorderFactory.createEmptyBorder(5, 10, 5, 10));\n\n\t\tbottomPanel.add(buttonPanel);\n\t\tbottomPanel.add(statusLabel);\n\n\t\tadd(titleLabel, BorderLayout.NORTH);\n\t\tadd(mainPanel, BorderLayout.CENTER);\n\t\tadd(bottomPanel, BorderLayout.SOUTH);\n\t}\n\n\tprivate JPanel createAnswerSummaryPanel()\n\t{\n\t\tJPanel panel \u003d new JPanel(new BorderLayout());\n\t\tpanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tpanel.setBorder(BorderFactory.createTitledBorder(\n\t\t\tBorderFactory.createLineBorder(ColorScheme.MEDIUM_GRAY_COLOR),\n\t\t\t\"Answer Summary\",\n\t\t\t0,\n\t\t\t0,\n\t\t\tFontManager.getRunescapeFont(),\n\t\t\tColor.WHITE\n\t\t));\n\n\t\t// Build the summary text\n\t\tStringBuilder summaryBuilder \u003d new StringBuilder();\n\t\tsummaryBuilder.append(\"Reward: \").append(rewardText !\u003d null \u0026\u0026 !rewardText.trim().isEmpty() ? rewardText : \"(No reward text specified)\").append(\"\\n\\n\");\n\n\t\tif (constraints \u003d\u003d null || constraints.isEmpty())\n\t\t{\n\t\t\tsummaryBuilder.append(\"No constraints defined\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Check if there\u0027s an emote constraint\n\t\t\tString requiredAction \u003d \"Dig with a spade\";\n\t\t\tfor (Map\u003cString, Object\u003e constraintMap : constraints)\n\t\t\t{\n\t\t\t\tString constraintType \u003d (String) constraintMap.get(\"constraint_type\");\n\t\t\t\tif (\"action\".equals(constraintType))\n\t\t\t\t{\n\t\t\t\t\tString type \u003d (String) constraintMap.get(\"type\");\n\t\t\t\t\tif (\"emote\".equals(type))\n\t\t\t\t\t{\n\t\t\t\t\t\tObject emoteIdObj \u003d constraintMap.get(\"emote_id\");\n\t\t\t\t\t\tif (emoteIdObj !\u003d null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tInteger emoteId \u003d null;\n\t\t\t\t\t\t\tif (emoteIdObj instanceof Number)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\temoteId \u003d ((Number) emoteIdObj).intValue();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (emoteId !\u003d null)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tString emoteName \u003d EmoteData.getEmoteName(emoteId);\n\t\t\t\t\t\t\t\trequiredAction \u003d \"Perform an Emote: \" + emoteName;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tsummaryBuilder.append(\"Required Action: \").append(requiredAction).append(\"\\n\");\n\n\t\t\tfor (Map\u003cString, Object\u003e constraintMap : constraints)\n\t\t\t{\n\t\t\t\tString constraintType \u003d (String) constraintMap.get(\"constraint_type\");\n\t\t\t\tif (\"location\".equals(constraintType))\n\t\t\t\t{\n\t\t\t\t\tsummaryBuilder.append(getLocationConstraintDescription(constraintMap));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tJTextArea summaryArea \u003d new JTextArea(summaryBuilder.toString());\n\t\tsummaryArea.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tsummaryArea.setForeground(Color.WHITE);\n\t\tsummaryArea.setFont(FontManager.getRunescapeSmallFont());\n\t\tsummaryArea.setEditable(false);\n\t\tsummaryArea.setLineWrap(true);\n\t\tsummaryArea.setWrapStyleWord(true);\n\n\t\tJScrollPane scrollPane \u003d new JScrollPane(summaryArea);\n\t\tscrollPane.setPreferredSize(new Dimension(0, 120));\n\t\tpanel.add(scrollPane, BorderLayout.CENTER);\n\n\t\treturn panel;\n\t}\n\n\tprivate JPanel createSolversPanel()\n\t{\n\t\tJPanel panel \u003d new JPanel(new BorderLayout());\n\t\tpanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tpanel.setBorder(BorderFactory.createTitledBorder(\n\t\t\tBorderFactory.createLineBorder(ColorScheme.MEDIUM_GRAY_COLOR),\n\t\t\t\"Players Who Solved This Event\",\n\t\t\t0,\n\t\t\t0,\n\t\t\tFontManager.getRunescapeFont(),\n\t\t\tColor.WHITE\n\t\t));\n\n\t\t// Create table\n\t\tString[] columnNames \u003d {\"Rank\", \"Player Name\", \"Completed At\"};\n\t\tDefaultTableModel tableModel \u003d new DefaultTableModel(columnNames, 0) {\n\t\t\t@Override\n\t\t\tpublic boolean isCellEditable(int row, int column) {\n\t\t\t\treturn false; // Make table non-editable\n\t\t\t}\n\t\t};\n\n\t\t// Add data to table\n\t\tif (completedBy !\u003d null \u0026\u0026 !completedBy.isEmpty())\n\t\t{\n\t\t\tSimpleDateFormat dateFormat \u003d new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\n\t\t\tdateFormat.setTimeZone(TimeZone.getDefault());\n\n\t\t\tfor (int i \u003d 0; i \u003c completedBy.size(); i++)\n\t\t\t{\n\t\t\t\tApiClient.PlayerCompletion completion \u003d completedBy.get(i);\n\t\t\t\tString rank \u003d String.valueOf(i + 1);\n\t\t\t\tString playerName \u003d completion.rsn;\n\t\t\t\tString timestamp \u003d formatTimestamp(completion.timestamp);\n\n\t\t\t\ttableModel.addRow(new Object[]{rank, playerName, timestamp});\n\t\t\t}\n\t\t}\n\n\t\tJTable table \u003d new JTable(tableModel);\n\t\ttable.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\ttable.setForeground(Color.WHITE);\n\t\ttable.setFont(FontManager.getRunescapeSmallFont());\n\t\ttable.setSelectionBackground(ColorScheme.MEDIUM_GRAY_COLOR);\n\t\ttable.setSelectionForeground(Color.WHITE);\n\t\ttable.setGridColor(ColorScheme.MEDIUM_GRAY_COLOR);\n\t\ttable.setShowGrid(true);\n\t\ttable.setRowHeight(25);\n\n\t\t// Center align the Rank column\n\t\tDefaultTableCellRenderer centerRenderer \u003d new DefaultTableCellRenderer();\n\t\tcenterRenderer.setHorizontalAlignment(SwingConstants.CENTER);\n\t\ttable.getColumnModel().getColumn(0).setCellRenderer(centerRenderer);\n\t\ttable.getColumnModel().getColumn(0).setPreferredWidth(50);\n\t\ttable.getColumnModel().getColumn(1).setPreferredWidth(150);\n\t\ttable.getColumnModel().getColumn(2).setPreferredWidth(200);\n\n\t\t// Style table header\n\t\ttable.getTableHeader().setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\ttable.getTableHeader().setForeground(Color.WHITE);\n\t\ttable.getTableHeader().setFont(FontManager.getRunescapeFont());\n\n\t\tJScrollPane scrollPane \u003d new JScrollPane(table);\n\t\tscrollPane.setPreferredSize(new Dimension(0, 200));\n\n\t\t// Add message if no players have solved it yet\n\t\tif (completedBy \u003d\u003d null || completedBy.isEmpty())\n\t\t{\n\t\t\tJLabel noSolversLabel \u003d new JLabel(\"No players have solved this event yet\");\n\t\t\tnoSolversLabel.setForeground(Color.LIGHT_GRAY);\n\t\t\tnoSolversLabel.setFont(FontManager.getRunescapeSmallFont());\n\t\t\tnoSolversLabel.setHorizontalAlignment(SwingConstants.CENTER);\n\t\t\tpanel.add(noSolversLabel, BorderLayout.CENTER);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpanel.add(scrollPane, BorderLayout.CENTER);\n\t\t}\n\n\t\treturn panel;\n\t}\n\n\tprivate String formatTimestamp(String timestamp)\n\t{\n\t\tif (timestamp \u003d\u003d null || timestamp.isEmpty())\n\t\t{\n\t\t\treturn \"Unknown\";\n\t\t}\n\n\t\ttry\n\t\t{\n\t\t\t// Parse ISO 8601 timestamp (e.g., \"2024-11-23T12:34:56.789Z\")\n\t\t\tSimpleDateFormat inputFormat \u003d new SimpleDateFormat(\"yyyy-MM-dd\u0027T\u0027HH:mm:ss\");\n\t\t\tinputFormat.setTimeZone(TimeZone.getTimeZone(\"UTC\"));\n\n\t\t\t// Handle both with and without milliseconds\n\t\t\tString cleanTimestamp \u003d timestamp.replace(\"Z\", \"\");\n\t\t\tif (cleanTimestamp.contains(\".\"))\n\t\t\t{\n\t\t\t\tcleanTimestamp \u003d cleanTimestamp.substring(0, cleanTimestamp.indexOf(\".\"));\n\t\t\t}\n\n\t\t\tDate date \u003d inputFormat.parse(cleanTimestamp);\n\n\t\t\t// Format to local time\n\t\t\tSimpleDateFormat outputFormat \u003d new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\n\t\t\toutputFormat.setTimeZone(TimeZone.getDefault());\n\t\t\treturn outputFormat.format(date);\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\t// If parsing fails, return the original timestamp\n\t\t\treturn timestamp;\n\t\t}\n\t}\n\n\tprivate String getLocationConstraintDescription(Map\u003cString, Object\u003e constraintMap)\n\t{\n\t\tStringBuilder desc \u003d new StringBuilder();\n\t\tString type \u003d (String) constraintMap.get(\"type\");\n\n\t\tswitch (type)\n\t\t{\n\t\t\tcase \"exact\":\n\t\t\t\tdesc.append(\"Location: Exact tile (\");\n\t\t\t\tdesc.append(\"X: \").append(getIntValue(constraintMap, \"exact_x\"));\n\t\t\t\tdesc.append(\", Y: \").append(getIntValue(constraintMap, \"exact_y\"));\n\t\t\t\tif (constraintMap.containsKey(\"plane\"))\n\t\t\t\t{\n\t\t\t\t\tdesc.append(\", Plane: \").append(getIntValue(constraintMap, \"plane\"));\n\t\t\t\t}\n\t\t\t\tdesc.append(\")\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"bounds\":\n\t\t\t\tdesc.append(\"Location: Within rectangle (\");\n\t\t\t\tdesc.append(\"X: \").append(getIntValue(constraintMap, \"min_x\")).append(\"-\").append(getIntValue(constraintMap, \"max_x\"));\n\t\t\t\tdesc.append(\", Y: \").append(getIntValue(constraintMap, \"min_y\")).append(\"-\").append(getIntValue(constraintMap, \"max_y\"));\n\t\t\t\tif (constraintMap.containsKey(\"plane\"))\n\t\t\t\t{\n\t\t\t\t\tdesc.append(\", Plane: \").append(getIntValue(constraintMap, \"plane\"));\n\t\t\t\t}\n\t\t\t\tdesc.append(\")\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"tolerance\":\n\t\t\t\tdesc.append(\"Location: Near tile (\");\n\t\t\t\tdesc.append(\"X: \").append(getIntValue(constraintMap, \"exact_x\"));\n\t\t\t\tdesc.append(\", Y: \").append(getIntValue(constraintMap, \"exact_y\"));\n\t\t\t\tif (constraintMap.containsKey(\"tolerance\"))\n\t\t\t\t{\n\t\t\t\t\tdesc.append(\", within \").append(getIntValue(constraintMap, \"tolerance\")).append(\" tiles\");\n\t\t\t\t}\n\t\t\t\tif (constraintMap.containsKey(\"plane\"))\n\t\t\t\t{\n\t\t\t\t\tdesc.append(\", Plane: \").append(getIntValue(constraintMap, \"plane\"));\n\t\t\t\t}\n\t\t\t\tdesc.append(\")\");\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tdesc.append(\"Location: \").append(type);\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn desc.toString();\n\t}\n\n\tprivate int getIntValue(Map\u003cString, Object\u003e map, String key)\n\t{\n\t\tObject value \u003d map.get(key);\n\t\tif (value instanceof Number)\n\t\t{\n\t\t\treturn ((Number) value).intValue();\n\t\t}\n\t\treturn 0;\n\t}\n\n\tprivate void onEditAnswer()\n\t{\n\t\t// Close this dialog\n\t\tdispose();\n\n\t\t// Open the answer builder dialog in update mode\n\t\tAnswerBuilderDialog answerDialog \u003d new AnswerBuilderDialog(\n\t\t\tparentFrame,\n\t\t\tclient,\n\t\t\tapiClient,\n\t\t\teventKey,\n\t\t\tsecretKey,\n\t\t\trewardText,\n\t\t\tconstraints\n\t\t);\n\t\tanswerDialog.setVisible(true);\n\t}\n\n\tprivate void onRefresh()\n\t{\n\t\tstatusLabel.setText(\"Refreshing...\");\n\t\tstatusLabel.setForeground(Color.YELLOW);\n\n\t\t// Make API request to get the latest answer data\n\t\tapiClient.getAnswer(eventKey, secretKey).thenAccept(response -\u003e {\n\t\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\t\tif (response.isSuccess())\n\t\t\t\t{\n\t\t\t\t\t// Update the stored data\n\t\t\t\t\tthis.rewardText \u003d response.reward_text;\n\t\t\t\t\tthis.constraints \u003d response.constraints;\n\t\t\t\t\tthis.completedBy \u003d response.completed_by;\n\n\t\t\t\t\t// Rebuild the UI panels\n\t\t\t\t\tmainPanel.removeAll();\n\n\t\t\t\t\tJPanel summaryPanel \u003d createAnswerSummaryPanel();\n\t\t\t\t\tJPanel solversPanel \u003d createSolversPanel();\n\n\t\t\t\t\tmainPanel.add(summaryPanel);\n\t\t\t\t\tmainPanel.add(Box.createVerticalStrut(10));\n\t\t\t\t\tmainPanel.add(solversPanel);\n\n\t\t\t\t\t// Refresh the display\n\t\t\t\t\tmainPanel.revalidate();\n\t\t\t\t\tmainPanel.repaint();\n\n\t\t\t\t\tstatusLabel.setText(\"Refreshed successfully!\");\n\t\t\t\t\tstatusLabel.setForeground(Color.GREEN);\n\n\t\t\t\t\t// Clear status message after 3 seconds\n\t\t\t\t\tTimer timer \u003d new Timer(3000, e -\u003e {\n\t\t\t\t\t\tstatusLabel.setText(\" \");\n\t\t\t\t\t});\n\t\t\t\t\ttimer.setRepeats(false);\n\t\t\t\t\ttimer.start();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t// Handle error\n\t\t\t\t\tString errorMessage \u003d \"Refresh failed: \";\n\t\t\t\t\tif (\"NOT_FOUND\".equals(response.errorType))\n\t\t\t\t\t{\n\t\t\t\t\t\terrorMessage +\u003d \"Event key not found\";\n\t\t\t\t\t}\n\t\t\t\t\telse if (\"UNAUTHORIZED\".equals(response.errorType))\n\t\t\t\t\t{\n\t\t\t\t\t\terrorMessage +\u003d \"Invalid secret key\";\n\t\t\t\t\t}\n\t\t\t\t\telse if (\"NETWORK_ERROR\".equals(response.errorType))\n\t\t\t\t\t{\n\t\t\t\t\t\terrorMessage +\u003d \"Network error\";\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\terrorMessage +\u003d response.errorMessage;\n\t\t\t\t\t}\n\n\t\t\t\t\tstatusLabel.setText(errorMessage);\n\t\t\t\t\tstatusLabel.setForeground(Color.RED);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n}\n","filePath":"src\\main\\java\\com\\lennyscustomclues\\dialogs\\EventInfoDialog.java"},{"fileName":"LocationConstraintDialog.java","content":"package com.lennyscustomclues.dialogs;\n\nimport com.lennyscustomclues.constraints.LocationConstraint;\nimport net.runelite.api.Client;\nimport net.runelite.api.Player;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.ui.ColorScheme;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.function.Consumer;\n\npublic class LocationConstraintDialog extends JDialog\n{\n\tprivate JComboBox\u003cString\u003e typeCombo;\n\tprivate JPanel dynamicFieldsPanel;\n\tprivate Map\u003cString, JTextField\u003e fields;\n\tprivate Map\u003cString, JLabel\u003e labels;\n\tprivate JLabel coordinatesLabel;\n\tprivate JButton useCurrentLocationButton;\n\tprivate Timer coordinateUpdateTimer;\n\t\n\tprivate LocationConstraint constraint;\n\tprivate Consumer\u003cLocationConstraint\u003e onSave;\n\tprivate Client client;\n\tprivate boolean cancelled \u003d true;\n\n\tpublic LocationConstraintDialog(JFrame parent, LocationConstraint existing, Consumer\u003cLocationConstraint\u003e onSave, Client client)\n\t{\n\t\tsuper(parent, \"Location Constraint\", false); // false \u003d non-modal\n\t\tthis.onSave \u003d onSave;\n\t\tthis.client \u003d client;\n\t\tthis.constraint \u003d existing !\u003d null ? existing : new LocationConstraint(\"exact\");\n\t\tthis.fields \u003d new HashMap\u003c\u003e();\n\t\tthis.labels \u003d new HashMap\u003c\u003e();\n\t\t\n\t\tinitializeUI();\n\t\tpopulateFields();\n\t\tstartCoordinateUpdates();\n\t\tpack();\n\t\tsetLocationRelativeTo(parent);\n\t\tsetAlwaysOnTop(true); // Keep dialog visible above game client\n\t}\n\n\tprivate void initializeUI()\n\t{\n\t\tsetLayout(new BorderLayout());\n\t\tgetContentPane().setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Top panel with type selection and coordinates\n\t\tJPanel topPanel \u003d new JPanel(new BorderLayout());\n\t\ttopPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Type selection\n\t\tJPanel typePanel \u003d new JPanel(new FlowLayout());\n\t\ttypePanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tJLabel typeLabel \u003d new JLabel(\"Type:\");\n\t\ttypeLabel.setForeground(Color.WHITE);\n\t\ttypePanel.add(typeLabel);\n\t\ttypeCombo \u003d new JComboBox\u003c\u003e(new String[]{\"exact\", \"bounds\", \"tolerance\"});\n\t\ttypeCombo.addActionListener(this::onTypeChanged);\n\t\ttypePanel.add(typeCombo);\n\n\t\t// Coordinates display\n\t\tJPanel coordinatesPanel \u003d new JPanel(new FlowLayout());\n\t\tcoordinatesPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tcoordinatesLabel \u003d new JLabel(\"Current Location: Loading...\");\n\t\tcoordinatesLabel.setForeground(Color.CYAN);\n\t\tcoordinatesLabel.setFont(coordinatesLabel.getFont().deriveFont(Font.BOLD));\n\t\tcoordinatesPanel.add(coordinatesLabel);\n\n\t\ttopPanel.add(typePanel, BorderLayout.NORTH);\n\t\ttopPanel.add(coordinatesPanel, BorderLayout.SOUTH);\n\n\t\t// Dynamic fields panel\n\t\tdynamicFieldsPanel \u003d new JPanel(new GridBagLayout());\n\t\tdynamicFieldsPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Create all possible fields\n\t\tcreateFields();\n\n\t\t// Buttons panel\n\t\tJPanel buttonPanel \u003d new JPanel(new FlowLayout());\n\t\tbuttonPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\t\n\t\tJButton saveButton \u003d new JButton(\"Save\");\n\t\tJButton cancelButton \u003d new JButton(\"Cancel\");\n\t\t\n\t\tsaveButton.addActionListener(this::onSave);\n\t\tcancelButton.addActionListener(this::onCancel);\n\t\t\n\t\tbuttonPanel.add(saveButton);\n\t\tbuttonPanel.add(cancelButton);\n\n\t\tadd(topPanel, BorderLayout.NORTH);\n\t\tadd(dynamicFieldsPanel, BorderLayout.CENTER);\n\t\tadd(buttonPanel, BorderLayout.SOUTH);\n\t}\n\n\tprivate void createFields()\n\t{\n\t\t// Create all possible fields\n\t\tfields.put(\"exactX\", createNumberField());\n\t\tfields.put(\"exactY\", createNumberField());\n\t\tfields.put(\"point1X\", createNumberField());\n\t\tfields.put(\"point1Y\", createNumberField());\n\t\tfields.put(\"point2X\", createNumberField());\n\t\tfields.put(\"point2Y\", createNumberField());\n\t\tfields.put(\"plane\", createNumberField());\n\t\tfields.put(\"tolerance\", createNumberField());\n\n\t\t// Create corresponding labels\n\t\tlabels.put(\"exactX\", createLabel(\"Exact X:\"));\n\t\tlabels.put(\"exactY\", createLabel(\"Exact Y:\"));\n\t\tlabels.put(\"point1X\", createLabel(\"Point 1 X:\"));\n\t\tlabels.put(\"point1Y\", createLabel(\"Point 1 Y:\"));\n\t\tlabels.put(\"point2X\", createLabel(\"Point 2 X:\"));\n\t\tlabels.put(\"point2Y\", createLabel(\"Point 2 Y:\"));\n\t\tlabels.put(\"plane\", createLabel(\"Plane (optional):\"));\n\t\tlabels.put(\"tolerance\", createLabel(\"Tolerance:\"));\n\t}\n\n\tprivate JTextField createNumberField()\n\t{\n\t\tJTextField field \u003d new JTextField(20); // Doubled from 10 to 20\n\t\tfield.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tfield.setForeground(Color.WHITE);\n\t\treturn field;\n\t}\n\n\tprivate JLabel createLabel(String text)\n\t{\n\t\tJLabel label \u003d new JLabel(text);\n\t\tlabel.setForeground(Color.WHITE);\n\t\treturn label;\n\t}\n\n\tprivate void populateFields()\n\t{\n\t\ttypeCombo.setSelectedItem(constraint.getType());\n\t\tsetIntegerField(\"exactX\", constraint.getExactX());\n\t\tsetIntegerField(\"exactY\", constraint.getExactY());\n\t\t// Convert min/max to point1/point2 for display\n\t\tsetIntegerField(\"point1X\", constraint.getMinX());\n\t\tsetIntegerField(\"point1Y\", constraint.getMinY());\n\t\tsetIntegerField(\"point2X\", constraint.getMaxX());\n\t\tsetIntegerField(\"point2Y\", constraint.getMaxY());\n\t\tsetIntegerField(\"plane\", constraint.getPlane());\n\t\tsetIntegerField(\"tolerance\", constraint.getTolerance());\n\t\tupdateFieldsVisibility();\n\t}\n\n\tprivate void setIntegerField(String fieldName, Integer value)\n\t{\n\t\tJTextField field \u003d fields.get(fieldName);\n\t\tif (field !\u003d null)\n\t\t{\n\t\t\tfield.setText(value !\u003d null ? value.toString() : \"\");\n\t\t}\n\t}\n\n\tprivate void onTypeChanged(ActionEvent e)\n\t{\n\t\tupdateFieldsVisibility();\n\t\tpack(); // Resize dialog to fit new content\n\t}\n\n\tprivate void updateFieldsVisibility()\n\t{\n\t\tString selectedType \u003d (String) typeCombo.getSelectedItem();\n\n\t\t// Clear the panel\n\t\tdynamicFieldsPanel.removeAll();\n\n\t\tGridBagConstraints gbc \u003d new GridBagConstraints();\n\t\tgbc.insets \u003d new Insets(5, 5, 5, 5);\n\t\tgbc.anchor \u003d GridBagConstraints.WEST;\n\n\t\tint row \u003d 0;\n\n\t\t// Add fields based on selected type\n\t\tswitch (selectedType)\n\t\t{\n\t\t\tcase \"exact\":\n\t\t\t\taddFieldToPanel(gbc, row++, \"exactX\");\n\t\t\t\taddFieldToPanel(gbc, row++, \"exactY\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"bounds\":\n\t\t\t\taddFieldToPanel(gbc, row++, \"point1X\");\n\t\t\t\taddFieldToPanel(gbc, row++, \"point1Y\");\n\n\t\t\t\t// Add \"Use Current Location\" button for Point 1\n\t\t\t\tJButton usePoint1Button \u003d new JButton(\"Use Current Location for Point 1\");\n\t\t\t\tusePoint1Button.addActionListener(e -\u003e onUseCurrentLocationForPoint(1));\n\t\t\t\tgbc.gridx \u003d 0;\n\t\t\t\tgbc.gridy \u003d row++;\n\t\t\t\tgbc.gridwidth \u003d 2;\n\t\t\t\tgbc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\t\t\tgbc.insets \u003d new Insets(5, 5, 10, 5);\n\t\t\t\tdynamicFieldsPanel.add(usePoint1Button, gbc);\n\t\t\t\tgbc.gridwidth \u003d 1;\n\t\t\t\tgbc.insets \u003d new Insets(5, 5, 5, 5);\n\n\t\t\t\taddFieldToPanel(gbc, row++, \"point2X\");\n\t\t\t\taddFieldToPanel(gbc, row++, \"point2Y\");\n\n\t\t\t\t// Add \"Use Current Location\" button for Point 2\n\t\t\t\tJButton usePoint2Button \u003d new JButton(\"Use Current Location for Point 2\");\n\t\t\t\tusePoint2Button.addActionListener(e -\u003e onUseCurrentLocationForPoint(2));\n\t\t\t\tgbc.gridx \u003d 0;\n\t\t\t\tgbc.gridy \u003d row++;\n\t\t\t\tgbc.gridwidth \u003d 2;\n\t\t\t\tgbc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\t\t\tgbc.insets \u003d new Insets(5, 5, 10, 5);\n\t\t\t\tdynamicFieldsPanel.add(usePoint2Button, gbc);\n\t\t\t\tgbc.gridwidth \u003d 1;\n\t\t\t\tgbc.insets \u003d new Insets(5, 5, 5, 5);\n\t\t\t\tbreak;\n\n\t\t\tcase \"tolerance\":\n\t\t\t\taddFieldToPanel(gbc, row++, \"exactX\");\n\t\t\t\taddFieldToPanel(gbc, row++, \"exactY\");\n\t\t\t\taddFieldToPanel(gbc, row++, \"tolerance\");\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Always add plane field (optional for all types)\n\t\taddFieldToPanel(gbc, row++, \"plane\");\n\n\t\t// Add \"Use Current Location\" button for exact and tolerance types\n\t\tif (\"exact\".equals(selectedType) || \"tolerance\".equals(selectedType))\n\t\t{\n\t\t\tuseCurrentLocationButton \u003d new JButton(\"Use Current Location\");\n\t\t\tuseCurrentLocationButton.addActionListener(this::onUseCurrentLocation);\n\n\t\t\tgbc.gridx \u003d 0;\n\t\t\tgbc.gridy \u003d row;\n\t\t\tgbc.gridwidth \u003d 2;\n\t\t\tgbc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\t\tgbc.insets \u003d new Insets(10, 5, 5, 5);\n\t\t\tdynamicFieldsPanel.add(useCurrentLocationButton, gbc);\n\t\t\tgbc.gridwidth \u003d 1;\n\t\t\tgbc.insets \u003d new Insets(5, 5, 5, 5);\n\t\t}\n\n\t\t// Refresh the panel\n\t\tdynamicFieldsPanel.revalidate();\n\t\tdynamicFieldsPanel.repaint();\n\t}\n\n\tprivate void addFieldToPanel(GridBagConstraints gbc, int row, String fieldName)\n\t{\n\t\tJLabel label \u003d labels.get(fieldName);\n\t\tJTextField field \u003d fields.get(fieldName);\n\t\t\n\t\tif (label !\u003d null \u0026\u0026 field !\u003d null)\n\t\t{\n\t\t\t// Add label\n\t\t\tgbc.gridx \u003d 0;\n\t\t\tgbc.gridy \u003d row;\n\t\t\tgbc.fill \u003d GridBagConstraints.NONE;\n\t\t\tdynamicFieldsPanel.add(label, gbc);\n\t\t\t\n\t\t\t// Add field\n\t\t\tgbc.gridx \u003d 1;\n\t\t\tgbc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\t\tgbc.weightx \u003d 1.0;\n\t\t\tdynamicFieldsPanel.add(field, gbc);\n\t\t\tgbc.weightx \u003d 0.0;\n\t\t}\n\t}\n\n\tprivate void onSave(ActionEvent e)\n\t{\n\t\ttry\n\t\t{\n\t\t\tString selectedType \u003d (String) typeCombo.getSelectedItem();\n\t\t\tconstraint.setType(selectedType);\n\t\t\tconstraint.setExactX(parseInteger(\"exactX\"));\n\t\t\tconstraint.setExactY(parseInteger(\"exactY\"));\n\t\t\tconstraint.setPlane(parseInteger(\"plane\"));\n\t\t\tconstraint.setTolerance(parseInteger(\"tolerance\"));\n\n\t\t\t// For bounds type, calculate min/max from the two points\n\t\t\tif (\"bounds\".equals(selectedType))\n\t\t\t{\n\t\t\t\tInteger point1X \u003d parseInteger(\"point1X\");\n\t\t\t\tInteger point1Y \u003d parseInteger(\"point1Y\");\n\t\t\t\tInteger point2X \u003d parseInteger(\"point2X\");\n\t\t\t\tInteger point2Y \u003d parseInteger(\"point2Y\");\n\n\t\t\t\tif (point1X !\u003d null \u0026\u0026 point2X !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tconstraint.setMinX(Math.min(point1X, point2X));\n\t\t\t\t\tconstraint.setMaxX(Math.max(point1X, point2X));\n\t\t\t\t}\n\n\t\t\t\tif (point1Y !\u003d null \u0026\u0026 point2Y !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tconstraint.setMinY(Math.min(point1Y, point2Y));\n\t\t\t\t\tconstraint.setMaxY(Math.max(point1Y, point2Y));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcancelled \u003d false;\n\t\t\tonSave.accept(constraint);\n\t\t\tstopCoordinateUpdates();\n\t\t\tdispose();\n\t\t}\n\t\tcatch (NumberFormatException ex)\n\t\t{\n\t\t\tJOptionPane.showMessageDialog(this, \"Please enter valid numbers\", \"Input Error\", JOptionPane.ERROR_MESSAGE);\n\t\t}\n\t}\n\n\tprivate void onCancel(ActionEvent e)\n\t{\n\t\tcancelled \u003d true;\n\t\tstopCoordinateUpdates();\n\t\tdispose();\n\t}\n\n\tprivate void onUseCurrentLocation(ActionEvent e)\n\t{\n\t\tWorldPoint currentLocation \u003d getCurrentPlayerLocation();\n\t\tif (currentLocation !\u003d null)\n\t\t{\n\t\t\tJTextField exactXField \u003d fields.get(\"exactX\");\n\t\t\tJTextField exactYField \u003d fields.get(\"exactY\");\n\t\t\tJTextField planeField \u003d fields.get(\"plane\");\n\n\t\t\tif (exactXField !\u003d null) exactXField.setText(String.valueOf(currentLocation.getX()));\n\t\t\tif (exactYField !\u003d null) exactYField.setText(String.valueOf(currentLocation.getY()));\n\t\t\tif (planeField !\u003d null) planeField.setText(String.valueOf(currentLocation.getPlane()));\n\t\t}\n\t}\n\n\tprivate void onUseCurrentLocationForPoint(int pointNumber)\n\t{\n\t\tWorldPoint currentLocation \u003d getCurrentPlayerLocation();\n\t\tif (currentLocation !\u003d null)\n\t\t{\n\t\t\tString xFieldName \u003d \"point\" + pointNumber + \"X\";\n\t\t\tString yFieldName \u003d \"point\" + pointNumber + \"Y\";\n\n\t\t\tJTextField xField \u003d fields.get(xFieldName);\n\t\t\tJTextField yField \u003d fields.get(yFieldName);\n\t\t\tJTextField planeField \u003d fields.get(\"plane\");\n\n\t\t\tif (xField !\u003d null) xField.setText(String.valueOf(currentLocation.getX()));\n\t\t\tif (yField !\u003d null) yField.setText(String.valueOf(currentLocation.getY()));\n\t\t\tif (planeField !\u003d null) planeField.setText(String.valueOf(currentLocation.getPlane()));\n\t\t}\n\t}\n\n\tprivate void startCoordinateUpdates()\n\t{\n\t\t// Update coordinates every 500ms\n\t\tcoordinateUpdateTimer \u003d new Timer(500, e -\u003e updateCoordinatesDisplay());\n\t\tcoordinateUpdateTimer.start();\n\t\tupdateCoordinatesDisplay(); // Initial update\n\t}\n\n\tprivate void stopCoordinateUpdates()\n\t{\n\t\tif (coordinateUpdateTimer !\u003d null)\n\t\t{\n\t\t\tcoordinateUpdateTimer.stop();\n\t\t}\n\t}\n\n\tprivate void updateCoordinatesDisplay()\n\t{\n\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\tWorldPoint location \u003d getCurrentPlayerLocation();\n\t\t\tif (location !\u003d null)\n\t\t\t{\n\t\t\t\tcoordinatesLabel.setText(String.format(\"Current Location: X:%d Y:%d Plane:%d\", \n\t\t\t\t\tlocation.getX(), location.getY(), location.getPlane()));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcoordinatesLabel.setText(\"Current Location: Not available\");\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate WorldPoint getCurrentPlayerLocation()\n\t{\n\t\tif (client \u003d\u003d null) return null;\n\t\t\n\t\tPlayer player \u003d client.getLocalPlayer();\n\t\tif (player \u003d\u003d null) return null;\n\t\t\n\t\treturn player.getWorldLocation();\n\t}\n\n\tprivate Integer parseInteger(String fieldName)\n\t{\n\t\tJTextField field \u003d fields.get(fieldName);\n\t\tif (field \u003d\u003d null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\t\n\t\tString text \u003d field.getText();\n\t\tif (text \u003d\u003d null || text.trim().isEmpty())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\treturn Integer.parseInt(text.trim());\n\t}\n\n\tpublic boolean wasCancelled()\n\t{\n\t\treturn cancelled;\n\t}\n\n\t@Override\n\tpublic void dispose()\n\t{\n\t\tstopCoordinateUpdates();\n\t\tsuper.dispose();\n\t}\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\dialogs\\LocationConstraintDialog.java"},{"fileName":"ManageEventDialog.java","content":"package com.lennyscustomclues.dialogs;\n\nimport com.lennyscustomclues.ApiClient;\nimport net.runelite.api.Client;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\n\nimport javax.swing.*;\nimport java.awt.*;\n\npublic class ManageEventDialog extends JDialog\n{\n\tprivate ApiClient apiClient;\n\tprivate Client client;\n\tprivate JFrame parentFrame;\n\n\tprivate JTextField eventKeyField;\n\tprivate JTextField secretKeyField;\n\tprivate JButton submitButton;\n\tprivate JButton cancelButton;\n\tprivate JLabel statusLabel;\n\n\tpublic ManageEventDialog(JFrame parent, Client client, ApiClient apiClient)\n\t{\n\t\tsuper(parent, \"Manage Existing Event\", true);\n\t\tthis.parentFrame \u003d parent;\n\t\tthis.client \u003d client;\n\t\tthis.apiClient \u003d apiClient;\n\n\t\tinitializeUI();\n\t\tpack();\n\t\tsetMinimumSize(new Dimension(400, 200));\n\t\tsetLocationRelativeTo(parent);\n\t}\n\n\tprivate void initializeUI()\n\t{\n\t\tsetLayout(new BorderLayout());\n\t\tgetContentPane().setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Title\n\t\tJLabel titleLabel \u003d new JLabel(\"Enter Event Credentials\");\n\t\ttitleLabel.setForeground(Color.WHITE);\n\t\ttitleLabel.setFont(FontManager.getRunescapeFont());\n\t\ttitleLabel.setHorizontalAlignment(SwingConstants.CENTER);\n\t\ttitleLabel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n\n\t\t// Main content panel\n\t\tJPanel mainPanel \u003d new JPanel(new GridBagLayout());\n\t\tmainPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tmainPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n\n\t\tGridBagConstraints gbc \u003d new GridBagConstraints();\n\t\tgbc.insets \u003d new Insets(5, 5, 5, 5);\n\t\tgbc.anchor \u003d GridBagConstraints.WEST;\n\n\t\t// Event Key label and field\n\t\tJLabel eventKeyLabel \u003d new JLabel(\"Event Key:\");\n\t\teventKeyLabel.setForeground(Color.WHITE);\n\t\tgbc.gridx \u003d 0;\n\t\tgbc.gridy \u003d 0;\n\t\tgbc.fill \u003d GridBagConstraints.NONE;\n\t\tmainPanel.add(eventKeyLabel, gbc);\n\n\t\teventKeyField \u003d new JTextField(20);\n\t\teventKeyField.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\teventKeyField.setForeground(Color.WHITE);\n\t\tgbc.gridx \u003d 1;\n\t\tgbc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\tgbc.weightx \u003d 1.0;\n\t\tmainPanel.add(eventKeyField, gbc);\n\n\t\t// Secret Key label and field\n\t\tJLabel secretKeyLabel \u003d new JLabel(\"Secret Key:\");\n\t\tsecretKeyLabel.setForeground(Color.WHITE);\n\t\tgbc.gridx \u003d 0;\n\t\tgbc.gridy \u003d 1;\n\t\tgbc.fill \u003d GridBagConstraints.NONE;\n\t\tgbc.weightx \u003d 0.0;\n\t\tmainPanel.add(secretKeyLabel, gbc);\n\n\t\tsecretKeyField \u003d new JTextField(20);\n\t\tsecretKeyField.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tsecretKeyField.setForeground(Color.WHITE);\n\t\tgbc.gridx \u003d 1;\n\t\tgbc.fill \u003d GridBagConstraints.HORIZONTAL;\n\t\tgbc.weightx \u003d 1.0;\n\t\tmainPanel.add(secretKeyField, gbc);\n\n\t\t// Bottom panel containing buttons and status\n\t\tJPanel bottomPanel \u003d new JPanel();\n\t\tbottomPanel.setLayout(new BoxLayout(bottomPanel, BoxLayout.Y_AXIS));\n\t\tbottomPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Buttons panel\n\t\tJPanel buttonPanel \u003d new JPanel(new FlowLayout(FlowLayout.CENTER));\n\t\tbuttonPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tsubmitButton \u003d new JButton(\"Load Event\");\n\t\tsubmitButton.addActionListener(e -\u003e onSubmit());\n\t\tbuttonPanel.add(submitButton);\n\n\t\tcancelButton \u003d new JButton(\"Cancel\");\n\t\tcancelButton.addActionListener(e -\u003e dispose());\n\t\tbuttonPanel.add(cancelButton);\n\n\t\t// Status label\n\t\tstatusLabel \u003d new JLabel(\" \");\n\t\tstatusLabel.setForeground(Color.WHITE);\n\t\tstatusLabel.setHorizontalAlignment(SwingConstants.CENTER);\n\t\tstatusLabel.setBorder(BorderFactory.createEmptyBorder(5, 10, 5, 10));\n\n\t\tbottomPanel.add(buttonPanel);\n\t\tbottomPanel.add(statusLabel);\n\n\t\tadd(titleLabel, BorderLayout.NORTH);\n\t\tadd(mainPanel, BorderLayout.CENTER);\n\t\tadd(bottomPanel, BorderLayout.SOUTH);\n\t}\n\n\tprivate void onSubmit()\n\t{\n\t\tString eventKey \u003d eventKeyField.getText().trim();\n\t\tString secretKey \u003d secretKeyField.getText().trim();\n\n\t\tif (eventKey.isEmpty())\n\t\t{\n\t\t\tstatusLabel.setText(\"Event key is required\");\n\t\t\tstatusLabel.setForeground(Color.RED);\n\t\t\treturn;\n\t\t}\n\n\t\tif (secretKey.isEmpty())\n\t\t{\n\t\t\tstatusLabel.setText(\"Secret key is required\");\n\t\t\tstatusLabel.setForeground(Color.RED);\n\t\t\treturn;\n\t\t}\n\n\t\t// Disable buttons while loading\n\t\tsubmitButton.setEnabled(false);\n\t\tstatusLabel.setText(\"Loading event...\");\n\t\tstatusLabel.setForeground(Color.YELLOW);\n\n\t\t// Make API request to get the answer\n\t\tapiClient.getAnswer(eventKey, secretKey).thenAccept(response -\u003e {\n\t\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\t\tsubmitButton.setEnabled(true);\n\n\t\t\t\tif (response.isSuccess())\n\t\t\t\t{\n\t\t\t\t\t// Successfully retrieved the answer - open the event info dialog\n\t\t\t\t\tstatusLabel.setText(\"Event loaded successfully!\");\n\t\t\t\t\tstatusLabel.setForeground(Color.GREEN);\n\n\t\t\t\t\t// Close this dialog\n\t\t\t\t\tdispose();\n\n\t\t\t\t\t// Open the event info dialog to show answer summary and solvers\n\t\t\t\t\tEventInfoDialog eventInfoDialog \u003d new EventInfoDialog(\n\t\t\t\t\t\tparentFrame,\n\t\t\t\t\t\tclient,\n\t\t\t\t\t\tapiClient,\n\t\t\t\t\t\teventKey,\n\t\t\t\t\t\tsecretKey,\n\t\t\t\t\t\tresponse.reward_text,\n\t\t\t\t\t\tresponse.constraints,\n\t\t\t\t\t\tresponse.completed_by\n\t\t\t\t\t);\n\t\t\t\t\teventInfoDialog.setVisible(true);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t// Handle error\n\t\t\t\t\tString errorMessage \u003d \"Failed to load event: \";\n\t\t\t\t\tif (\"NOT_FOUND\".equals(response.errorType))\n\t\t\t\t\t{\n\t\t\t\t\t\terrorMessage +\u003d \"Event key not found\";\n\t\t\t\t\t}\n\t\t\t\t\telse if (\"UNAUTHORIZED\".equals(response.errorType))\n\t\t\t\t\t{\n\t\t\t\t\t\terrorMessage +\u003d \"Invalid secret key\";\n\t\t\t\t\t}\n\t\t\t\t\telse if (\"NETWORK_ERROR\".equals(response.errorType))\n\t\t\t\t\t{\n\t\t\t\t\t\terrorMessage +\u003d \"Network error\";\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\terrorMessage +\u003d response.errorMessage;\n\t\t\t\t\t}\n\n\t\t\t\t\tstatusLabel.setText(errorMessage);\n\t\t\t\t\tstatusLabel.setForeground(Color.RED);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n}\n","filePath":"src\\main\\java\\com\\lennyscustomclues\\dialogs\\ManageEventDialog.java"},{"fileName":"SubmitAnswerDialog.java","content":"package com.lennyscustomclues.dialogs;\n\nimport com.lennyscustomclues.AnswerBuilder;\nimport com.lennyscustomclues.ApiClient;\nimport com.lennyscustomclues.EmoteData;\nimport net.runelite.client.ui.ColorScheme;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.util.function.BiConsumer;\n\npublic class SubmitAnswerDialog extends JDialog\n{\n\tprivate JTextField eventKeyField;\n\tprivate JTextField secretKeyField;\n\tprivate JButton validateKeyButton;\n\tprivate JButton submitButton;\n\tprivate JButton cancelButton;\n\tprivate JLabel validationStatusLabel;\n\n\tprivate AnswerBuilder answerBuilder;\n\tprivate ApiClient apiClient;\n\tprivate BiConsumer\u003cString, String\u003e onSubmit;\n\tprivate boolean cancelled \u003d true;\n\tprivate boolean keyValidated \u003d false;\n\n\tpublic SubmitAnswerDialog(JFrame parent, AnswerBuilder answerBuilder, ApiClient apiClient, BiConsumer\u003cString, String\u003e onSubmit)\n\t{\n\t\tsuper(parent, \"Submit Answer to Server\", false); // Non-modal\n\t\tthis.answerBuilder \u003d answerBuilder;\n\t\tthis.apiClient \u003d apiClient;\n\t\tthis.onSubmit \u003d onSubmit;\n\t\t\n\t\tinitializeUI();\n\t\tpack();\n\t\tsetLocationRelativeTo(parent);\n\t\tsetAlwaysOnTop(true);\n\t}\n\n\tprivate void initializeUI()\n\t{\n\t\tsetLayout(new BorderLayout());\n\t\tgetContentPane().setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Main content panel\n\t\tJPanel mainPanel \u003d new JPanel();\n\t\tmainPanel.setLayout(new BoxLayout(mainPanel, BoxLayout.Y_AXIS));\n\t\tmainPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tmainPanel.setBorder(BorderFactory.createEmptyBorder(15, 15, 15, 15));\n\n\t\t// Title/instructions\n\t\tJLabel titleLabel \u003d new JLabel(\"Submit Answer to Server\");\n\t\ttitleLabel.setForeground(Color.WHITE);\n\t\ttitleLabel.setFont(titleLabel.getFont().deriveFont(Font.BOLD, 14f));\n\t\ttitleLabel.setAlignmentX(Component.CENTER_ALIGNMENT);\n\n\t\tJLabel instructionLabel \u003d new JLabel(\"\u003chtml\u003e\u003cdiv style\u003d\u0027text-align: center;\u0027\u003eEnter an event key to associate with this answer.\u003cbr/\u003eThe key must be unique and not already in use.\u003c/div\u003e\u003c/html\u003e\");\n\t\tinstructionLabel.setForeground(Color.LIGHT_GRAY);\n\t\tinstructionLabel.setAlignmentX(Component.CENTER_ALIGNMENT);\n\n\t\t// Answer summary\n\t\tJPanel summaryPanel \u003d new JPanel(new BorderLayout());\n\t\tsummaryPanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tsummaryPanel.setBorder(BorderFactory.createTitledBorder(\"Answer Summary\"));\n\t\tsummaryPanel.setMaximumSize(new Dimension(Integer.MAX_VALUE, 150));\n\n\t\tString rewardText \u003d answerBuilder.getRewardText();\n\t\tif (rewardText \u003d\u003d null || rewardText.trim().isEmpty())\n\t\t{\n\t\t\trewardText \u003d \"(No reward text specified)\";\n\t\t}\n\n\t\t// Build human-readable constraint descriptions\n\t\tStringBuilder summaryBuilder \u003d new StringBuilder();\n\t\tsummaryBuilder.append(\"Reward: \").append(rewardText).append(\"\\n\\n\");\n\n\t\tif (answerBuilder.getConstraintCount() \u003d\u003d 0)\n\t\t{\n\t\t\tsummaryBuilder.append(\"No constraints defined\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Check if there\u0027s an emote constraint\n\t\t\tString requiredAction \u003d \"Dig with a spade\";\n\t\t\tfor (int i \u003d 0; i \u003c answerBuilder.getConstraintCount(); i++)\n\t\t\t{\n\t\t\t\tcom.lennyscustomclues.constraints.Constraint constraint \u003d answerBuilder.getConstraint(i);\n\t\t\t\tif (constraint instanceof com.lennyscustomclues.constraints.ActionConstraint)\n\t\t\t\t{\n\t\t\t\t\tcom.lennyscustomclues.constraints.ActionConstraint actionConstraint \u003d\n\t\t\t\t\t\t(com.lennyscustomclues.constraints.ActionConstraint) constraint;\n\t\t\t\t\tif (\"emote\".equals(actionConstraint.getType()) \u0026\u0026 actionConstraint.getEmoteId() !\u003d null)\n\t\t\t\t\t{\n\t\t\t\t\t\tString emoteName \u003d EmoteData.getEmoteName(actionConstraint.getEmoteId());\n\t\t\t\t\t\trequiredAction \u003d \"Perform an Emote: \" + emoteName;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tsummaryBuilder.append(\"Required Action: \").append(requiredAction).append(\"\\n\");\n\n\t\t\tfor (int i \u003d 0; i \u003c answerBuilder.getConstraintCount(); i++)\n\t\t\t{\n\t\t\t\tcom.lennyscustomclues.constraints.Constraint constraint \u003d answerBuilder.getConstraint(i);\n\t\t\t\tif (constraint instanceof com.lennyscustomclues.constraints.LocationConstraint)\n\t\t\t\t{\n\t\t\t\t\tsummaryBuilder.append(getLocationConstraintDescription((com.lennyscustomclues.constraints.LocationConstraint) constraint));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tJTextArea summaryArea \u003d new JTextArea(summaryBuilder.toString());\n\t\tsummaryArea.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tsummaryArea.setForeground(Color.WHITE);\n\t\tsummaryArea.setEditable(false);\n\t\tsummaryArea.setLineWrap(true);\n\t\tsummaryArea.setWrapStyleWord(true);\n\t\tJScrollPane summaryScroll \u003d new JScrollPane(summaryArea);\n\t\tsummaryPanel.add(summaryScroll, BorderLayout.CENTER);\n\n\t\t// Event key input panel\n\t\tJPanel eventKeyPanel \u003d new JPanel(new BorderLayout());\n\t\teventKeyPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\teventKeyPanel.setBorder(BorderFactory.createTitledBorder(\"Event Key\"));\n\n\t\teventKeyField \u003d new JTextField(20);\n\t\teventKeyField.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\teventKeyField.setForeground(Color.WHITE);\n\t\teventKeyField.getDocument().addDocumentListener(new javax.swing.event.DocumentListener() {\n\t\t\tpublic void insertUpdate(javax.swing.event.DocumentEvent e) { onEventKeyChanged(); }\n\t\t\tpublic void removeUpdate(javax.swing.event.DocumentEvent e) { onEventKeyChanged(); }\n\t\t\tpublic void changedUpdate(javax.swing.event.DocumentEvent e) { onEventKeyChanged(); }\n\t\t});\n\n\t\tvalidateKeyButton \u003d new JButton(\"Validate Key\");\n\t\tvalidateKeyButton.addActionListener(this::onValidateKey);\n\t\tvalidateKeyButton.setEnabled(false);\n\n\t\tJPanel keyInputPanel \u003d new JPanel(new BorderLayout());\n\t\tkeyInputPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tkeyInputPanel.add(eventKeyField, BorderLayout.CENTER);\n\t\tkeyInputPanel.add(validateKeyButton, BorderLayout.EAST);\n\n\t\tvalidationStatusLabel \u003d new JLabel(\" \");\n\t\tvalidationStatusLabel.setForeground(Color.GRAY);\n\n\t\teventKeyPanel.add(keyInputPanel, BorderLayout.NORTH);\n\t\teventKeyPanel.add(validationStatusLabel, BorderLayout.SOUTH);\n\n\t\t// Secret key input panel\n\t\tJPanel secretKeyPanel \u003d new JPanel(new BorderLayout());\n\t\tsecretKeyPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tsecretKeyPanel.setBorder(BorderFactory.createTitledBorder(\"Secret Key (Optional)\"));\n\n\t\tsecretKeyField \u003d new JTextField(20);\n\t\tsecretKeyField.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tsecretKeyField.setForeground(Color.WHITE);\n\n\t\tJLabel secretKeyInfoLabel \u003d new JLabel(\"\u003chtml\u003e\u003ci\u003eUsed to retrieve and update this answer later\u003c/i\u003e\u003c/html\u003e\");\n\t\tsecretKeyInfoLabel.setForeground(Color.LIGHT_GRAY);\n\t\tsecretKeyInfoLabel.setFont(secretKeyInfoLabel.getFont().deriveFont(11f));\n\n\t\tsecretKeyPanel.add(secretKeyField, BorderLayout.NORTH);\n\t\tsecretKeyPanel.add(secretKeyInfoLabel, BorderLayout.SOUTH);\n\n\t\t// Button panel\n\t\tJPanel buttonPanel \u003d new JPanel(new FlowLayout());\n\t\tbuttonPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tsubmitButton \u003d new JButton(\"Submit Answer\");\n\t\tsubmitButton.addActionListener(this::onSubmit);\n\t\tsubmitButton.setEnabled(false); // Initially disabled\n\n\t\tcancelButton \u003d new JButton(\"Cancel\");\n\t\tcancelButton.addActionListener(this::onCancel);\n\n\t\tbuttonPanel.add(submitButton);\n\t\tbuttonPanel.add(cancelButton);\n\n\t\t// Add all components\n\t\tmainPanel.add(titleLabel);\n\t\tmainPanel.add(Box.createVerticalStrut(10));\n\t\tmainPanel.add(instructionLabel);\n\t\tmainPanel.add(Box.createVerticalStrut(15));\n\t\tmainPanel.add(summaryPanel);\n\t\tmainPanel.add(Box.createVerticalStrut(15));\n\t\tmainPanel.add(eventKeyPanel);\n\t\tmainPanel.add(Box.createVerticalStrut(10));\n\t\tmainPanel.add(secretKeyPanel);\n\n\t\tadd(mainPanel, BorderLayout.CENTER);\n\t\tadd(buttonPanel, BorderLayout.SOUTH);\n\t}\n\n\tprivate void onEventKeyChanged()\n\t{\n\t\tString eventKey \u003d eventKeyField.getText().trim();\n\t\tkeyValidated \u003d false;\n\t\tvalidationStatusLabel.setText(\" \");\n\t\tvalidationStatusLabel.setForeground(Color.GRAY);\n\t\t\n\t\tvalidateKeyButton.setEnabled(!eventKey.isEmpty());\n\t\tsubmitButton.setEnabled(false);\n\t}\n\n\tprivate void onValidateKey(ActionEvent e)\n\t{\n\t\tString eventKey \u003d eventKeyField.getText().trim();\n\t\tif (eventKey.isEmpty())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tvalidateKeyButton.setEnabled(false);\n\t\tvalidationStatusLabel.setText(\"Validating key...\");\n\t\tvalidationStatusLabel.setForeground(Color.YELLOW);\n\n\t\t// Validate the key with the API\n\t\tapiClient.validateEventKey(eventKey).thenAccept(response -\u003e {\n\t\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\t\tif (response.success)\n\t\t\t\t{\n\t\t\t\t\t// 200 response means key already exists - NOT available for new answer\n\t\t\t\t\tkeyValidated \u003d false;\n\t\t\t\t\tvalidationStatusLabel.setText(\" Key already exists\");\n\t\t\t\t\tvalidationStatusLabel.setForeground(Color.RED);\n\t\t\t\t\tsubmitButton.setEnabled(false);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t// Non-success response\n\t\t\t\t\tif (\"KEY_NOT_FOUND\".equals(response.errorType))\n\t\t\t\t\t{\n\t\t\t\t\t\t// 404 means key doesn\u0027t exist - GOOD for creating new answer\n\t\t\t\t\t\tkeyValidated \u003d true;\n\t\t\t\t\t\tvalidationStatusLabel.setText(\" Key is available\");\n\t\t\t\t\t\tvalidationStatusLabel.setForeground(Color.GREEN);\n\t\t\t\t\t\tsubmitButton.setEnabled(true);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t// Other error (server error, network error, etc.)\n\t\t\t\t\t\tkeyValidated \u003d false;\n\t\t\t\t\t\tvalidationStatusLabel.setText(\" \" + response.message);\n\t\t\t\t\t\tvalidationStatusLabel.setForeground(Color.RED);\n\t\t\t\t\t\tsubmitButton.setEnabled(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvalidateKeyButton.setEnabled(true);\n\t\t\t});\n\t\t});\n\t}\n\n\tprivate void onSubmit(ActionEvent e)\n\t{\n\t\tif (!keyValidated)\n\t\t{\n\t\t\tJOptionPane.showMessageDialog(this, \"Please validate the event key first.\", \"Validation Required\", JOptionPane.WARNING_MESSAGE);\n\t\t\treturn;\n\t\t}\n\n\t\tString eventKey \u003d eventKeyField.getText().trim();\n\t\tif (eventKey.isEmpty())\n\t\t{\n\t\t\tJOptionPane.showMessageDialog(this, \"Please enter an event key.\", \"Event Key Required\", JOptionPane.WARNING_MESSAGE);\n\t\t\treturn;\n\t\t}\n\n\t\tString secretKey \u003d secretKeyField.getText().trim();\n\n\t\t// Warn if no secret key is provided\n\t\tif (secretKey.isEmpty())\n\t\t{\n\t\t\tint result \u003d JOptionPane.showConfirmDialog(\n\t\t\t\tthis,\n\t\t\t\t\"You have not set a secret key for this event, which means you won\u0027t be able to inspect or update the answer in any way after creation.\\n\\nAre you sure you don\u0027t want to set a secret key?\",\n\t\t\t\t\"No Secret Key Set\",\n\t\t\t\tJOptionPane.YES_NO_OPTION,\n\t\t\t\tJOptionPane.WARNING_MESSAGE\n\t\t\t);\n\n\t\t\tif (result !\u003d JOptionPane.YES_OPTION)\n\t\t\t{\n\t\t\t\treturn; // User chose not to proceed\n\t\t\t}\n\t\t}\n\n\t\tcancelled \u003d false;\n\t\tonSubmit.accept(eventKey, secretKey);\n\t\tdispose();\n\t}\n\n\tprivate void onCancel(ActionEvent e)\n\t{\n\t\tcancelled \u003d true;\n\t\tdispose();\n\t}\n\n\tpublic boolean wasCancelled()\n\t{\n\t\treturn cancelled;\n\t}\n\n\tprivate String getLocationConstraintDescription(com.lennyscustomclues.constraints.LocationConstraint constraint)\n\t{\n\t\tStringBuilder desc \u003d new StringBuilder();\n\t\tString type \u003d constraint.getType();\n\n\t\tswitch (type)\n\t\t{\n\t\t\tcase \"exact\":\n\t\t\t\tdesc.append(\"Location: Exact tile (\");\n\t\t\t\tdesc.append(\"X: \").append(constraint.getExactX());\n\t\t\t\tdesc.append(\", Y: \").append(constraint.getExactY());\n\t\t\t\tif (constraint.getPlane() !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tdesc.append(\", Plane: \").append(constraint.getPlane());\n\t\t\t\t}\n\t\t\t\tdesc.append(\")\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"bounds\":\n\t\t\t\tdesc.append(\"Location: Within rectangle (\");\n\t\t\t\tdesc.append(\"X: \").append(constraint.getMinX()).append(\"-\").append(constraint.getMaxX());\n\t\t\t\tdesc.append(\", Y: \").append(constraint.getMinY()).append(\"-\").append(constraint.getMaxY());\n\t\t\t\tif (constraint.getPlane() !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tdesc.append(\", Plane: \").append(constraint.getPlane());\n\t\t\t\t}\n\t\t\t\tdesc.append(\")\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"tolerance\":\n\t\t\t\tdesc.append(\"Location: Near tile (\");\n\t\t\t\tdesc.append(\"X: \").append(constraint.getExactX());\n\t\t\t\tdesc.append(\", Y: \").append(constraint.getExactY());\n\t\t\t\tif (constraint.getTolerance() !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tdesc.append(\", within \").append(constraint.getTolerance()).append(\" tiles\");\n\t\t\t\t}\n\t\t\t\tif (constraint.getPlane() !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tdesc.append(\", Plane: \").append(constraint.getPlane());\n\t\t\t\t}\n\t\t\t\tdesc.append(\")\");\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tdesc.append(\"Location: \").append(constraint.description());\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn desc.toString();\n\t}\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\dialogs\\SubmitAnswerDialog.java"},{"fileName":"EmoteData.java","content":"package com.lennyscustomclues;\n\nimport java.util.LinkedHashMap;\nimport java.util.Map;\n\npublic class EmoteData\n{\n\tprivate static final Map\u003cString, Integer\u003e EMOTES \u003d new LinkedHashMap\u003c\u003e();\n\n\tstatic\n\t{\n\t\tEMOTES.put(\"Yes\", 855);\n\t\tEMOTES.put(\"No\", 856);\n\t\tEMOTES.put(\"Bow\", 858);\n\t\tEMOTES.put(\"Angry\", 859);\n\t\tEMOTES.put(\"Think\", 857);\n\t\tEMOTES.put(\"Wave\", 863);\n\t\tEMOTES.put(\"Shrug\", 2113);\n\t\tEMOTES.put(\"Cheer\", 862);\n\t\tEMOTES.put(\"Beckon\", 864);\n\t\tEMOTES.put(\"Laugh\", 861);\n\t\tEMOTES.put(\"Jump for Joy\", 2109);\n\t\tEMOTES.put(\"Yawn\", 2111);\n\t\tEMOTES.put(\"Dance\", 866);\n\t\tEMOTES.put(\"Jig\", 2106);\n\t\tEMOTES.put(\"Spin\", 2107);\n\t\tEMOTES.put(\"Headbang\", 2108);\n\t\tEMOTES.put(\"Cry\", 860);\n\t\tEMOTES.put(\"Blow Kiss\", 1374);\n\t\tEMOTES.put(\"Panic\", 2105);\n\t\tEMOTES.put(\"Raspberry\", 2110);\n\t\tEMOTES.put(\"Clap\", 865);\n\t\tEMOTES.put(\"Salute\", 2112);\n\t\tEMOTES.put(\"Goblin Bow\", 2127);\n\t\tEMOTES.put(\"Goblin Salute\", 2128);\n\t\tEMOTES.put(\"Glass Box\", 1131);\n\t\tEMOTES.put(\"Climb Rope\", 1130);\n\t\tEMOTES.put(\"Lean\", 1129);\n\t\tEMOTES.put(\"Glass Wall\", 1128);\n\t\tEMOTES.put(\"Idea\", 4276);\n\t\tEMOTES.put(\"Stamp\", 4278);\n\t\tEMOTES.put(\"Flap\", 4280);\n\t\tEMOTES.put(\"Slap Head\", 4275);\n\t\tEMOTES.put(\"Zombie Walk\", 3544);\n\t\tEMOTES.put(\"Zombie Dance\", 3543);\n\t\tEMOTES.put(\"Scared\", 2836);\n\t\tEMOTES.put(\"Rabbit Hop\", 6111);\n\t\tEMOTES.put(\"Sit up\", 874);\n\t\tEMOTES.put(\"Push up\", 872);\n\t\tEMOTES.put(\"Star jump\", 870);\n\t\tEMOTES.put(\"Jog\", 868);\n\t\tEMOTES.put(\"Flex\", 8917);\n\t\tEMOTES.put(\"Zombie Hand\", 1708);\n\t\tEMOTES.put(\"Hypermobile Drinker\", 7131);\n\t\tEMOTES.put(\"Smooth dance\", 7533);\n\t\tEMOTES.put(\"Crazy dance\", 7537);\n\t\tEMOTES.put(\"Premier Shield\", 7751);\n\t\tEMOTES.put(\"Party\", 10031);\n\t\tEMOTES.put(\"Trick\", 10503);\n\t\tEMOTES.put(\"Fortis Salute\", 10796);\n\t\tEMOTES.put(\"Sit down\", 10061);\n\t}\n\n\tpublic static Map\u003cString, Integer\u003e getEmotes()\n\t{\n\t\treturn EMOTES;\n\t}\n\n\tpublic static String getEmoteName(int emoteId)\n\t{\n\t\tfor (Map.Entry\u003cString, Integer\u003e entry : EMOTES.entrySet())\n\t\t{\n\t\t\tif (entry.getValue() \u003d\u003d emoteId)\n\t\t\t{\n\t\t\t\treturn entry.getKey();\n\t\t\t}\n\t\t}\n\t\treturn \"Unknown Emote\";\n\t}\n\n\tpublic static Integer getEmoteId(String emoteName)\n\t{\n\t\treturn EMOTES.get(emoteName);\n\t}\n}\n","filePath":"src\\main\\java\\com\\lennyscustomclues\\EmoteData.java"},{"fileName":"EventKeyDialog.java","content":"package com.lennyscustomclues;\n\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.KeyEvent;\nimport java.util.function.Consumer;\n\npublic class EventKeyDialog extends JDialog\n{\n\tprivate final JTextField eventKeyField;\n\tprivate final JButton submitButton;\n\tprivate final JButton cancelButton;\n\tprivate final JLabel statusLabel;\n\tprivate final Consumer\u003cString\u003e onEventKeySet;\n\tprivate final ApiClient apiClient;\n\tprivate boolean submitted \u003d false;\n\tprivate boolean validating \u003d false;\n\n\tpublic EventKeyDialog(JFrame parent, String currentEventKey, boolean isChanging, Consumer\u003cString\u003e onEventKeySet, ApiClient apiClient)\n\t{\n\t\tsuper(parent, isChanging ? \"Change Event Key\" : \"Set Event Key\", true);\n\t\tthis.onEventKeySet \u003d onEventKeySet;\n\t\tthis.apiClient \u003d apiClient;\n\n\t\t// Setup dialog properties\n\t\tsetDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);\n\t\tsetResizable(false);\n\n\t\t// Create components\n\t\tJPanel mainPanel \u003d new JPanel();\n\t\tmainPanel.setLayout(new BorderLayout(10, 10));\n\t\tmainPanel.setBorder(BorderFactory.createEmptyBorder(15, 15, 15, 15));\n\t\tmainPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Title label\n\t\tJLabel titleLabel \u003d new JLabel(\"Enter event key:\");\n\t\ttitleLabel.setFont(FontManager.getRunescapeFont());\n\t\ttitleLabel.setForeground(Color.WHITE);\n\n\t\t// Text field\n\t\teventKeyField \u003d new JTextField(20);\n\t\teventKeyField.setFont(FontManager.getRunescapeFont());\n\t\teventKeyField.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\teventKeyField.setForeground(Color.WHITE);\n\t\teventKeyField.setCaretColor(Color.WHITE);\n\t\teventKeyField.setBorder(BorderFactory.createCompoundBorder(\n\t\t\tBorderFactory.createLineBorder(ColorScheme.MEDIUM_GRAY_COLOR),\n\t\t\tBorderFactory.createEmptyBorder(5, 5, 5, 5)\n\t\t));\n\n\t\t// Pre-fill if changing\n\t\tif (isChanging \u0026\u0026 currentEventKey !\u003d null)\n\t\t{\n\t\t\teventKeyField.setText(currentEventKey);\n\t\t\teventKeyField.selectAll();\n\t\t}\n\n\t\t// Status label for validation feedback\n\t\tstatusLabel \u003d new JLabel(\" \"); // Space to maintain height\n\t\tstatusLabel.setFont(FontManager.getRunescapeSmallFont());\n\t\tstatusLabel.setHorizontalAlignment(SwingConstants.CENTER);\n\n\t\t// Buttons\n\t\tJPanel buttonPanel \u003d new JPanel(new FlowLayout(FlowLayout.RIGHT, 10, 0));\n\t\tbuttonPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\tcancelButton \u003d new JButton(\"Cancel\");\n\t\tstyleButton(cancelButton);\n\t\tcancelButton.addActionListener(this::onCancelClick);\n\n\t\tsubmitButton \u003d new JButton(\"Submit\");\n\t\tstyleButton(submitButton);\n\t\tsubmitButton.addActionListener(this::onSubmitClick);\n\n\t\tbuttonPanel.add(cancelButton);\n\t\tbuttonPanel.add(submitButton);\n\n\t\t// Layout\n\t\tJPanel inputPanel \u003d new JPanel(new BorderLayout(0, 5));\n\t\tinputPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\t\tinputPanel.add(titleLabel, BorderLayout.NORTH);\n\t\tinputPanel.add(eventKeyField, BorderLayout.CENTER);\n\t\tinputPanel.add(statusLabel, BorderLayout.SOUTH);\n\n\t\tmainPanel.add(inputPanel, BorderLayout.CENTER);\n\t\tmainPanel.add(buttonPanel, BorderLayout.SOUTH);\n\n\t\tadd(mainPanel);\n\n\t\t// Setup keyboard shortcuts\n\t\tsetupKeyBindings();\n\n\t\t// Pack and center\n\t\tpack();\n\t\tsetLocationRelativeTo(parent);\n\n\t\t// Focus text field\n\t\tSwingUtilities.invokeLater(() -\u003e eventKeyField.requestFocusInWindow());\n\t}\n\n\tprivate void styleButton(JButton button)\n\t{\n\t\tbutton.setFont(FontManager.getRunescapeFont());\n\t\tbutton.setBackground(ColorScheme.DARKER_GRAY_COLOR);\n\t\tbutton.setForeground(Color.WHITE);\n\t\tbutton.setBorder(BorderFactory.createCompoundBorder(\n\t\t\tBorderFactory.createLineBorder(ColorScheme.MEDIUM_GRAY_COLOR),\n\t\t\tBorderFactory.createEmptyBorder(5, 15, 5, 15)\n\t\t));\n\t\tbutton.setFocusPainted(false);\n\t}\n\n\tprivate void setupKeyBindings()\n\t{\n\t\t// Enter key submits\n\t\teventKeyField.addActionListener(this::onSubmitClick);\n\n\t\t// Escape key cancels\n\t\tgetRootPane().registerKeyboardAction(\n\t\t\tthis::onCancelClick,\n\t\t\tKeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE, 0),\n\t\t\tJComponent.WHEN_IN_FOCUSED_WINDOW\n\t\t);\n\n\t\t// Make Submit the default button\n\t\tgetRootPane().setDefaultButton(submitButton);\n\t}\n\n\tprivate void onSubmitClick(ActionEvent e)\n\t{\n\t\tif (validating)\n\t\t{\n\t\t\treturn; // Ignore if already validating\n\t\t}\n\n\t\tString eventKey \u003d eventKeyField.getText().trim();\n\t\t\n\t\tif (eventKey.isEmpty())\n\t\t{\n\t\t\tsetStatusMessage(\"Event key cannot be empty.\", true);\n\t\t\teventKeyField.requestFocusInWindow();\n\t\t\treturn;\n\t\t}\n\n\t\t// Start validation\n\t\tvalidating \u003d true;\n\t\tsetButtonsEnabled(false);\n\t\tsetStatusMessage(\"Validating event key...\", false);\n\n\t\tapiClient.validateEventKey(eventKey).thenAccept(response -\u003e {\n\t\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\t\tvalidating \u003d false;\n\t\t\t\tsetButtonsEnabled(true);\n\n\t\t\t\tif (response.success)\n\t\t\t\t{\n\t\t\t\t\t// Key is valid, proceed\n\t\t\t\t\tsubmitted \u003d true;\n\t\t\t\t\tonEventKeySet.accept(eventKey);\n\t\t\t\t\tdispose();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t// Handle different error types with user-friendly messages\n\t\t\t\t\tString userMessage \u003d getUserFriendlyErrorMessage(response);\n\t\t\t\t\tsetStatusMessage(userMessage, true);\n\t\t\t\t\teventKeyField.requestFocusInWindow();\n\t\t\t\t\teventKeyField.selectAll();\n\t\t\t\t}\n\t\t\t});\n\t\t}).exceptionally(throwable -\u003e {\n\t\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\t\tvalidating \u003d false;\n\t\t\t\tsetButtonsEnabled(true);\n\t\t\t\tsetStatusMessage(\"Can\u0027t reach the server\", true);\n\t\t\t\teventKeyField.requestFocusInWindow();\n\t\t\t});\n\t\t\treturn null;\n\t\t});\n\t}\n\n\tprivate String getUserFriendlyErrorMessage(ApiClient.ApiResponse response)\n\t{\n\t\tif (response.errorType !\u003d null)\n\t\t{\n\t\t\tswitch (response.errorType)\n\t\t\t{\n\t\t\t\tcase \"KEY_NOT_FOUND\":\n\t\t\t\t\treturn \"Invalid event key\";\n\t\t\t\tcase \"NETWORK_ERROR\":\n\t\t\t\tcase \"IO_ERROR\":\n\t\t\t\tcase \"REQUEST_ERROR\":\n\t\t\t\t\treturn \"Can\u0027t reach the server\";\n\t\t\t\tcase \"SERVER_ERROR\":\n\t\t\t\tcase \"PARSE_ERROR\":\n\t\t\t\tdefault:\n\t\t\t\t\treturn \"An unexpected error occurred\";\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Fallback for responses without error type\n\t\treturn \"Invalid event key\";\n\t}\n\n\tprivate void onCancelClick(ActionEvent e)\n\t{\n\t\tif (!validating)\n\t\t{\n\t\t\tdispose();\n\t\t}\n\t}\n\n\tprivate void setStatusMessage(String message, boolean isError)\n\t{\n\t\tif (isError)\n\t\t{\n\t\t\tstatusLabel.setForeground(Color.RED);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tstatusLabel.setForeground(Color.LIGHT_GRAY);\n\t\t}\n\t\tstatusLabel.setText(message);\n\t}\n\n\tprivate void setButtonsEnabled(boolean enabled)\n\t{\n\t\tsubmitButton.setEnabled(enabled);\n\t\tcancelButton.setEnabled(enabled);\n\t\teventKeyField.setEnabled(enabled);\n\t\t\n\t\tif (enabled)\n\t\t{\n\t\t\tsubmitButton.setText(\"Submit\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsubmitButton.setText(\"Validating...\");\n\t\t}\n\t}\n\n\tpublic boolean wasSubmitted()\n\t{\n\t\treturn submitted;\n\t}\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\EventKeyDialog.java"},{"fileName":"GameStateCapture.java","content":"package com.lennyscustomclues;\n\nimport net.runelite.api.Client;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.Item;\nimport net.runelite.api.ItemContainer;\nimport net.runelite.api.Player;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Singleton\npublic class GameStateCapture\n{\n\t@Inject\n\tprivate Client client;\n\n\tpublic List\u003cApiClient.ItemData\u003e getInventoryData()\n\t{\n\t\tList\u003cApiClient.ItemData\u003e inventoryItems \u003d new ArrayList\u003c\u003e();\n\t\tItemContainer inventory \u003d client.getItemContainer(InventoryID.INVENTORY);\n\n\t\tif (inventory \u003d\u003d null)\n\t\t{\n\t\t\treturn inventoryItems;\n\t\t}\n\n\t\tItem[] items \u003d inventory.getItems();\n\t\tfor (int i \u003d 0; i \u003c items.length; i++)\n\t\t{\n\t\t\tItem item \u003d items[i];\n\t\t\tif (item !\u003d null \u0026\u0026 item.getId() !\u003d -1)\n\t\t\t{\n\t\t\t\tinventoryItems.add(new ApiClient.ItemData(i, item.getId(), item.getQuantity()));\n\t\t\t}\n\t\t}\n\n\t\treturn inventoryItems;\n\t}\n\n\tpublic List\u003cApiClient.ItemData\u003e getWornItemsData()\n\t{\n\t\tList\u003cApiClient.ItemData\u003e wornItems \u003d new ArrayList\u003c\u003e();\n\t\tItemContainer equipment \u003d client.getItemContainer(InventoryID.EQUIPMENT);\n\n\t\tif (equipment \u003d\u003d null)\n\t\t{\n\t\t\treturn wornItems;\n\t\t}\n\n\t\tItem[] items \u003d equipment.getItems();\n\t\tfor (int i \u003d 0; i \u003c items.length; i++)\n\t\t{\n\t\t\tItem item \u003d items[i];\n\t\t\tif (item !\u003d null \u0026\u0026 item.getId() !\u003d -1)\n\t\t\t{\n\t\t\t\twornItems.add(new ApiClient.ItemData(i, item.getId(), item.getQuantity()));\n\t\t\t}\n\t\t}\n\n\t\treturn wornItems;\n\t}\n\n\tpublic ApiClient.LocationData getLocationData(WorldPoint worldLocation, LocalPoint localLocation)\n\t{\n\t\tApiClient.WorldCoords worldCoords \u003d new ApiClient.WorldCoords(\n\t\t\tworldLocation.getX(), worldLocation.getY(), worldLocation.getPlane());\n\t\t\n\t\tApiClient.LocalCoords localCoords \u003d new ApiClient.LocalCoords(\n\t\t\tlocalLocation.getSceneX(), localLocation.getSceneY());\n\t\t\n\t\treturn new ApiClient.LocationData(worldCoords, localCoords);\n\t}\n\n\tpublic ApiClient.GameStateSubmission createGameStateSubmission(ApiClient.LocationData locationData, \n\t\tList\u003cApiClient.ItemData\u003e inventoryData, List\u003cApiClient.ItemData\u003e wornItemsData, \n\t\tInteger emoteId, Integer npcId, String interactionType, String eventKey)\n\t{\n\t\t// Get player\u0027s RSN (RuneScape Name)\n\t\tPlayer localPlayer \u003d client.getLocalPlayer();\n\t\tString rsn \u003d (localPlayer !\u003d null) ? localPlayer.getName() : null;\n\t\t\n\t\treturn new ApiClient.GameStateSubmission(locationData, inventoryData, wornItemsData, \n\t\t\temoteId, npcId, interactionType, eventKey, rsn);\n\t}\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\GameStateCapture.java"},{"fileName":"GameStateService.java","content":"package com.lennyscustomclues;\n\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.Player;\nimport net.runelite.api.coords.LocalPoint;\nimport net.runelite.api.coords.WorldPoint;\nimport net.runelite.client.callback.ClientThread;\nimport lombok.extern.slf4j.Slf4j;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.util.List;\nimport java.util.concurrent.CompletableFuture;\n\n@Slf4j\n@Singleton\npublic class GameStateService\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate LennysCustomCluesConfig config;\n\n\t@Inject\n\tprivate ApiClient apiClient;\n\n\t@Inject\n\tprivate GameStateCapture gameStateCapture;\n\n\t@Inject\n\tprivate CelebrationManager celebrationManager;\n\n\tprivate LennysCustomCluesPanel panel;\n\n\t// Event key management\n\tprivate String currentEventKey \u003d \"\";\n\n\tpublic void setPanel(LennysCustomCluesPanel panel)\n\t{\n\t\tthis.panel \u003d panel;\n\t}\n\n\tpublic String getEventKey()\n\t{\n\t\treturn currentEventKey;\n\t}\n\n\tpublic void setEventKey(String eventKey)\n\t{\n\t\tthis.currentEventKey \u003d (eventKey !\u003d null) ? eventKey.trim() : \"\";\n\t\tif (panel !\u003d null)\n\t\t{\n\t\t\tpanel.onEventKeyChanged();\n\t\t}\n\t}\n\n\tpublic void clearEventKey()\n\t{\n\t\tthis.currentEventKey \u003d \"\";\n\t\tif (panel !\u003d null)\n\t\t{\n\t\t\tpanel.onEventKeyChanged();\n\t\t}\n\t}\n\n\tpublic boolean hasEventKey()\n\t{\n\t\treturn !currentEventKey.isEmpty();\n\t}\n\n\tprivate boolean isEventKeyValid()\n\t{\n\t\treturn hasEventKey();\n\t}\n\n\tpublic void captureFromAnimation(int animationId)\n\t{\n\t\tclientThread.invokeLater(() -\u003e {\n\t\t\tif (!isEventKeyValid())\n\t\t\t{\n\t\t\t\tif (config.debug())\n\t\t\t\t{\n\t\t\t\t\tclient.addChatMessage(\n\t\t\t\t\t\tChatMessageType.GAMEMESSAGE,\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\"[LL-debug] Game state capture skipped - Event Key is empty (Animation ID: \" + animationId + \")\",\n\t\t\t\t\t\tnull\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tString eventKey \u003d getEventKey();\n\n\t\t\t// Determine if this is a dig or emote animation\n\t\t\tif (AnimationTriggers.isDigAnimation(animationId))\n\t\t\t{\n\t\t\t\tcaptureGameState(\"dig\", \"Digging animation (ID: \" + animationId + \")\", null, null, null, eventKey);\n\t\t\t}\n\t\t\telse if (AnimationTriggers.isEmoteAnimation(animationId))\n\t\t\t{\n\t\t\t\tString emoteName \u003d EmoteData.getEmoteName(animationId);\n\t\t\t\tcaptureGameState(\"emote\", \"Emote: \" + emoteName + \" (ID: \" + animationId + \")\", animationId, null, null, eventKey);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate void captureGameState(String trigger, String additionalInfo, Integer emoteId, Integer npcId, String interactionType, String eventKey)\n\t{\n\t\tPlayer player \u003d client.getLocalPlayer();\n\t\tif (player !\u003d null)\n\t\t{\n\t\t\tWorldPoint worldLocation \u003d player.getWorldLocation();\n\t\t\tLocalPoint localLocation \u003d player.getLocalLocation();\n\n\t\t\tApiClient.LocationData locationData \u003d gameStateCapture.getLocationData(worldLocation, localLocation);\n\t\t\tList\u003cApiClient.ItemData\u003e inventoryData \u003d gameStateCapture.getInventoryData();\n\t\t\tList\u003cApiClient.ItemData\u003e wornItemsData \u003d gameStateCapture.getWornItemsData();\n\t\t\t\n\t\t\tApiClient.GameStateSubmission gameStateSubmission \u003d gameStateCapture.createGameStateSubmission(\n\t\t\t\tlocationData, inventoryData, wornItemsData, emoteId, npcId, interactionType, eventKey);\n\n\t\t\t// Log submission info\n\t\t\tlog.info(\"\u003d\u003d\u003d Lenny\u0027s Custom Clues Game State Submission ({}) \u003d\u003d\u003d\", trigger);\n\t\t\tlog.info(\"Trigger info: {}\", additionalInfo);\n\t\t\tlog.info(\"Event Key: {}, Inventory: {} items, Worn: {} items\", \n\t\t\t\teventKey, inventoryData.size(), wornItemsData.size());\n\n\t\t\t// Update UI immediately\n\t\t\tif (panel !\u003d null)\n\t\t\t{\n\t\t\t\tpanel.updateStatusLabel(String.format(\n\t\t\t\t\t\"\u003chtml\u003e\u003cdiv style\u003d\u0027text-align: center;\u0027\u003eSubmitting...\u003cbr/\u003eTrigger: %s\u003cbr/\u003e%s\u003cbr/\u003eEvent: %s\u003c/div\u003e\u003c/html\u003e\",\n\t\t\t\t\ttrigger,\n\t\t\t\t\tadditionalInfo,\n\t\t\t\t\teventKey\n\t\t\t\t));\n\t\t\t}\n\n\t\t\t// Submit to API\n\t\t\tCompletableFuture\u003cApiClient.ApiResponse\u003e future \u003d apiClient.submitGuess(gameStateSubmission);\n\t\t\tfuture.thenAccept(this::handleApiResponse);\n\n\t\t\t// Show initial message in chat (debug mode only)\n\t\t\tif (config.debug())\n\t\t\t{\n\t\t\t\tclient.addChatMessage(\n\t\t\t\t\tChatMessageType.GAMEMESSAGE,\n\t\t\t\t\t\"\",\n\t\t\t\t\t\"[LL-debug] Submitting guess for \u0027\" + eventKey + \"\u0027...\",\n\t\t\t\t\tnull\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (panel !\u003d null)\n\t\t\t{\n\t\t\t\tpanel.updateStatusLabel(\"Player not found\");\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void handleApiResponse(ApiClient.ApiResponse response)\n\t{\n\t\t// Update UI\n\t\tif (panel !\u003d null)\n\t\t{\n\t\t\tString statusText;\n\t\t\tif (response.success)\n\t\t\t{\n\t\t\t\tstatusText \u003d String.format(\n\t\t\t\t\t\"\u003chtml\u003e\u003cdiv style\u003d\u0027text-align: center;\u0027\u003e\u003cfont color\u003d\u0027green\u0027\u003e CORRECT!\u003c/font\u003e\u003cbr/\u003e%s\u003c/div\u003e\u003c/html\u003e\",\n\t\t\t\t\tresponse.message\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tstatusText \u003d String.format(\n\t\t\t\t\t\"\u003chtml\u003e\u003cdiv style\u003d\u0027text-align: center;\u0027\u003e\u003cfont color\u003d\u0027red\u0027\u003e %s\u003c/font\u003e\u003cbr/\u003e%s\u003c/div\u003e\u003c/html\u003e\",\n\t\t\t\t\tresponse.success ? \"SUCCESS\" : \"FAILED\",\n\t\t\t\t\tresponse.message\n\t\t\t\t);\n\t\t\t}\n\t\t\tpanel.updateStatusLabel(statusText);\n\t\t}\n\n\t\t// Trigger victory celebration if successful\n\t\tif (response.success \u0026\u0026 celebrationManager !\u003d null)\n\t\t{\n\t\t\tcelebrationManager.triggerVictoryCelebration(currentEventKey);\n\t\t}\n\n\t\t// Add message to in-game chat on client thread\n\t\tclientThread.invokeLater(() -\u003e {\n\t\t\tif (response.success)\n\t\t\t{\n\t\t\t\t// Always show success messages\n\t\t\t\tString chatMessage \u003d \"[Lenny\u0027s Custom Clues] \" + response.message;\n\t\t\t\tclient.addChatMessage(\n\t\t\t\t\tChatMessageType.GAMEMESSAGE,\n\t\t\t\t\t\"\",\n\t\t\t\t\tchatMessage,\n\t\t\t\t\tnull\n\t\t\t\t);\n\t\t\t}\n\t\t\telse if (config.debug())\n\t\t\t{\n\t\t\t\t// Only show failure messages in debug mode\n\t\t\t\tString chatMessage \u003d \"[LL-debug] \" + response.message;\n\t\t\t\tclient.addChatMessage(\n\t\t\t\t\tChatMessageType.GAMEMESSAGE,\n\t\t\t\t\t\"\",\n\t\t\t\t\tchatMessage,\n\t\t\t\t\tnull\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\GameStateService.java"},{"fileName":"LennysCustomCluesConfig.java","content":"package com.lennyscustomclues;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"lennyscustomclues\")\npublic interface LennysCustomCluesConfig extends Config\n{\n\t@ConfigItem(\n\t\tkeyName \u003d \"debug\",\n\t\tname \u003d \"Debug Mode\",\n\t\tdescription \u003d \"Show all animation IDs in chat when player performs animations\"\n\t)\n\tdefault boolean debug()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showCelebrationSound\",\n\t\tname \u003d \"Victory sound effects\",\n\t\tdescription \u003d \"Play a celebratory sound when you solve a puzzle correctly\"\n\t)\n\tdefault boolean showCelebrationSound()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showCelebrationFireworks\",\n\t\tname \u003d \"Victory fireworks\",\n\t\tdescription \u003d \"Show fireworks when you solve a puzzle correctly\"\n\t)\n\tdefault boolean showCelebrationFireworks()\n\t{\n\t\treturn true;\n\t}\n\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\LennysCustomCluesConfig.java"},{"fileName":"LennysCustomCluesPanel.java","content":"package com.lennyscustomclues;\n\nimport com.lennyscustomclues.dialogs.AnswerBuilderDialog;\nimport com.lennyscustomclues.dialogs.ManageEventDialog;\nimport net.runelite.api.Client;\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.FontManager;\nimport net.runelite.client.ui.PluginPanel;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\n\n@Singleton\npublic class LennysCustomCluesPanel extends PluginPanel\n{\n\t@Inject\n\tprivate GameStateService gameStateService;\n\n\t@Inject\n\tprivate ApiClient apiClient;\n\n\t@Inject\n\tprivate Client client;\n\n\tprivate JLabel titleLabel;\n\tprivate JPanel buttonPanel;\n\tprivate JLabel statusLabel;\n\tprivate JLabel instructionalLabel;\n\tprivate JLabel resultLabel;\n\n\t// Buttons for different states\n\tprivate JButton setEventKeyButton;\n\tprivate JButton unsetEventKeyButton;\n\tprivate JButton changeEventKeyButton;\n\tprivate JButton createAnswerButton;\n\tprivate JButton manageEventButton;\n\n\tpublic LennysCustomCluesPanel()\n\t{\n\t\tsetLayout(new BorderLayout());\n\t\tsetBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Title label\n\t\ttitleLabel \u003d new JLabel(\"Lenny\u0027s Custom Clues\");\n\t\ttitleLabel.setForeground(Color.WHITE);\n\t\ttitleLabel.setFont(FontManager.getRunescapeFont());\n\t\ttitleLabel.setHorizontalAlignment(SwingConstants.CENTER);\n\n\t\t// Button panel - will be dynamically populated\n\t\tbuttonPanel \u003d new JPanel();\n\t\tbuttonPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);\n\n\t\t// Status label\n\t\tstatusLabel \u003d new JLabel();\n\t\tstatusLabel.setForeground(Color.WHITE);\n\t\tstatusLabel.setHorizontalAlignment(SwingConstants.CENTER);\n\n\t\t// Create all buttons\n\t\tcreateButtons();\n\n\t\t// Layout\n\t\tadd(titleLabel, BorderLayout.NORTH);\n\t\tadd(buttonPanel, BorderLayout.CENTER);\n\t\tadd(statusLabel, BorderLayout.SOUTH);\n\n\t\t// UI state will be initialized in initialize() after injection\n\t}\n\n\tprivate void createButtons()\n\t{\n\t\tsetEventKeyButton \u003d new JButton(\"Set Event Key\");\n\t\tsetEventKeyButton.addActionListener(this::onSetEventKeyClick);\n\t\tsetEventKeyButton.setAlignmentX(Component.LEFT_ALIGNMENT);\n\t\tsetEventKeyButton.setMaximumSize(new Dimension(Integer.MAX_VALUE, setEventKeyButton.getPreferredSize().height));\n\n\t\tunsetEventKeyButton \u003d new JButton(\"Unset Event Key\");\n\t\tunsetEventKeyButton.addActionListener(this::onUnsetEventKeyClick);\n\t\tunsetEventKeyButton.setAlignmentX(Component.LEFT_ALIGNMENT);\n\t\tunsetEventKeyButton.setMaximumSize(new Dimension(Integer.MAX_VALUE, unsetEventKeyButton.getPreferredSize().height));\n\n\t\tchangeEventKeyButton \u003d new JButton(\"Change Event Key\");\n\t\tchangeEventKeyButton.addActionListener(this::onChangeEventKeyClick);\n\t\tchangeEventKeyButton.setAlignmentX(Component.LEFT_ALIGNMENT);\n\t\tchangeEventKeyButton.setMaximumSize(new Dimension(Integer.MAX_VALUE, changeEventKeyButton.getPreferredSize().height));\n\n\t\tcreateAnswerButton \u003d new JButton(\"Create a new event\");\n\t\tcreateAnswerButton.addActionListener(this::onCreateAnswerClick);\n\t\tcreateAnswerButton.setAlignmentX(Component.LEFT_ALIGNMENT);\n\t\tcreateAnswerButton.setMaximumSize(new Dimension(Integer.MAX_VALUE, createAnswerButton.getPreferredSize().height));\n\n\t\tmanageEventButton \u003d new JButton(\"Manage existing event\");\n\t\tmanageEventButton.addActionListener(this::onManageEventClick);\n\t\tmanageEventButton.setAlignmentX(Component.LEFT_ALIGNMENT);\n\t\tmanageEventButton.setMaximumSize(new Dimension(Integer.MAX_VALUE, manageEventButton.getPreferredSize().height));\n\t}\n\n\t@Inject\n\tpublic void initialize()\n\t{\n\t\t// Set up the bidirectional reference with the service\n\t\tgameStateService.setPanel(this);\n\t\t\n\t\t// Initialize UI state now that injection is complete\n\t\tupdatePanelForEventKeyState();\n\t}\n\n\tpublic void onEventKeyChanged()\n\t{\n\t\tSwingUtilities.invokeLater(this::updatePanelForEventKeyState);\n\t}\n\n\tprivate void updatePanelForEventKeyState()\n\t{\n\t\tbuttonPanel.removeAll();\n\n\t\tif (gameStateService.hasEventKey())\n\t\t{\n\t\t\tshowEventKeySetState();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tshowNoEventKeyState();\n\t\t}\n\n\t\tbuttonPanel.revalidate();\n\t\tbuttonPanel.repaint();\n\t}\n\n\tprivate void showNoEventKeyState()\n\t{\n\t\tbuttonPanel.setLayout(new BoxLayout(buttonPanel, BoxLayout.Y_AXIS));\n\t\tbuttonPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n\n\t\t// Play in an event section\n\t\tbuttonPanel.add(createSectionLabel(\"Play in an event\"));\n\t\tbuttonPanel.add(Box.createRigidArea(new Dimension(0, 5)));\n\t\tbuttonPanel.add(setEventKeyButton);\n\n\t\t// Spacing between sections\n\t\tbuttonPanel.add(Box.createRigidArea(new Dimension(0, 15)));\n\n\t\t// Event management section\n\t\tbuttonPanel.add(createSectionLabel(\"Event management\"));\n\t\tbuttonPanel.add(Box.createRigidArea(new Dimension(0, 5)));\n\t\tbuttonPanel.add(createAnswerButton);\n\t\tbuttonPanel.add(Box.createRigidArea(new Dimension(0, 5)));\n\t\tbuttonPanel.add(manageEventButton);\n\n\t\tstatusLabel.setText(\"\");\n\t}\n\n\tprivate void showEventKeySetState()\n\t{\n\t\tbuttonPanel.setLayout(new BoxLayout(buttonPanel, BoxLayout.Y_AXIS));\n\t\tbuttonPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n\n\t\tString eventKey \u003d gameStateService.getEventKey();\n\n\t\t// Playing in event section\n\t\tbuttonPanel.add(createSectionLabel(\"Playing in: \" + eventKey));\n\t\tbuttonPanel.add(Box.createRigidArea(new Dimension(0, 5)));\n\n\t\t// Instructional text\n\t\tinstructionalLabel \u003d new JLabel(\"\u003chtml\u003eTry and solve the clue!\u003cbr/\u003eGood luck!\u003c/html\u003e\");\n\t\tinstructionalLabel.setForeground(Color.WHITE);\n\t\tinstructionalLabel.setAlignmentX(Component.LEFT_ALIGNMENT);\n\t\tbuttonPanel.add(instructionalLabel);\n\t\tbuttonPanel.add(Box.createRigidArea(new Dimension(0, 10)));\n\n\t\t// Result text area\n\t\tresultLabel \u003d new JLabel(\"\");\n\t\tresultLabel.setForeground(Color.WHITE);\n\t\tresultLabel.setAlignmentX(Component.LEFT_ALIGNMENT);\n\t\tbuttonPanel.add(resultLabel);\n\n\t\t// Push buttons to bottom\n\t\tbuttonPanel.add(Box.createVerticalGlue());\n\n\t\t// Event key buttons\n\t\tbuttonPanel.add(changeEventKeyButton);\n\t\tbuttonPanel.add(Box.createRigidArea(new Dimension(0, 5)));\n\t\tbuttonPanel.add(unsetEventKeyButton);\n\n\t\tstatusLabel.setText(\"\");\n\t}\n\n\tprivate JLabel createSectionLabel(String text)\n\t{\n\t\tJLabel label \u003d new JLabel(text);\n\t\tlabel.setForeground(ColorScheme.BRAND_ORANGE);\n\t\tlabel.setFont(FontManager.getRunescapeBoldFont());\n\t\tlabel.setAlignmentX(Component.LEFT_ALIGNMENT);\n\t\treturn label;\n\t}\n\n\tprivate void onSetEventKeyClick(ActionEvent e)\n\t{\n\t\tshowEventKeyDialog(null, false);\n\t}\n\n\tprivate void onChangeEventKeyClick(ActionEvent e)\n\t{\n\t\tshowEventKeyDialog(gameStateService.getEventKey(), true);\n\t}\n\n\tprivate void onUnsetEventKeyClick(ActionEvent e)\n\t{\n\t\tgameStateService.clearEventKey();\n\t}\n\n\tprivate void showEventKeyDialog(String currentEventKey, boolean isChanging)\n\t{\n\t\t// Find the parent frame\n\t\tWindow parentWindow \u003d SwingUtilities.getWindowAncestor(this);\n\t\tJFrame parentFrame \u003d (parentWindow instanceof JFrame) ? (JFrame) parentWindow : null;\n\n\t\tEventKeyDialog dialog \u003d new EventKeyDialog(\n\t\t\tparentFrame,\n\t\t\tcurrentEventKey,\n\t\t\tisChanging,\n\t\t\teventKey -\u003e gameStateService.setEventKey(eventKey),\n\t\t\tapiClient\n\t\t);\n\n\t\tdialog.setVisible(true);\n\t}\n\n\tprivate void onCreateAnswerClick(ActionEvent e)\n\t{\n\t\t// Find the parent frame\n\t\tWindow parentWindow \u003d SwingUtilities.getWindowAncestor(this);\n\t\tJFrame parentFrame \u003d (parentWindow instanceof JFrame) ? (JFrame) parentWindow : null;\n\n\t\tAnswerBuilderDialog dialog \u003d new AnswerBuilderDialog(\n\t\t\tparentFrame,\n\t\t\tclient,\n\t\t\tapiClient\n\t\t);\n\n\t\tdialog.setVisible(true);\n\t}\n\n\tprivate void onManageEventClick(ActionEvent e)\n\t{\n\t\t// Find the parent frame\n\t\tWindow parentWindow \u003d SwingUtilities.getWindowAncestor(this);\n\t\tJFrame parentFrame \u003d (parentWindow instanceof JFrame) ? (JFrame) parentWindow : null;\n\n\t\tManageEventDialog dialog \u003d new ManageEventDialog(\n\t\t\tparentFrame,\n\t\t\tclient,\n\t\t\tapiClient\n\t\t);\n\n\t\tdialog.setVisible(true);\n\t}\n\n\tpublic void updateStatusLabel(String text)\n\t{\n\t\tSwingUtilities.invokeLater(() -\u003e {\n\t\t\tif (resultLabel !\u003d null)\n\t\t\t{\n\t\t\t\tresultLabel.setText(text);\n\t\t\t\tbuttonPanel.revalidate();\n\t\t\t\tbuttonPanel.repaint();\n\t\t\t}\n\t\t});\n\t}\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\LennysCustomCluesPanel.java"},{"fileName":"LennysCustomCluesPlugin.java","content":"package com.lennyscustomclues;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.Player;\nimport net.runelite.api.events.AnimationChanged;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.ClientToolbar;\nimport net.runelite.client.ui.NavigationButton;\nimport net.runelite.client.util.ImageUtil;\n\nimport java.awt.image.BufferedImage;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Lenny\u0027s Custom Clues\"\n)\npublic class LennysCustomCluesPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate LennysCustomCluesConfig config;\n\n\t@Inject\n\tprivate ClientToolbar clientToolbar;\n\n\t@Inject\n\tprivate MainPanel mainPanel;\n\n\t@Inject\n\tprivate GameStateService gameStateService;\n\n\t@Inject\n\tprivate CelebrationManager celebrationManager;\n\n\tprivate NavigationButton navButton;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tlog.info(\"Lenny\u0027s Custom Clues started!\");\n\n\t\tfinal BufferedImage icon \u003d ImageUtil.loadImageResource(getClass(), \"/util/clue_arrow.png\");\n\n\t\tnavButton \u003d NavigationButton.builder()\n\t\t\t.tooltip(\"Lenny\u0027s Custom Clues\")\n\t\t\t.icon(icon)\n\t\t\t.priority(5)\n\t\t\t.panel(mainPanel)\n\t\t\t.build();\n\n\t\tclientToolbar.addNavigation(navButton);\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tlog.info(\"Lenny\u0027s Custom Clues stopped!\");\n\t\tclientToolbar.removeNavigation(navButton);\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged)\n\t{\n\t\t// No chat message on login\n\t}\n\n\t@Subscribe\n\tpublic void onAnimationChanged(AnimationChanged event)\n\t{\n\t\t// Only process player animations\n\t\tif (!(event.getActor() instanceof Player))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tPlayer player \u003d (Player) event.getActor();\n\n\t\t// Only track local player animations\n\t\tif (player !\u003d client.getLocalPlayer())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tint animationId \u003d player.getAnimation();\n\n\t\t// Debug mode: show all animation IDs in chat\n\t\tif (config.debug())\n\t\t{\n\t\t\tclient.addChatMessage(\n\t\t\t\tChatMessageType.GAMEMESSAGE,\n\t\t\t\t\"\",\n\t\t\t\t\"[LL-debug] Animation ID: \" + animationId,\n\t\t\t\tnull\n\t\t\t);\n\t\t}\n\n\t\t// Check for digging animation\n\t\tif (AnimationTriggers.isTriggerAnimation(animationId))\n\t\t{\n\t\t\tlog.info(\"Digging detected with animation ID: {}\", animationId);\n\t\t\tgameStateService.captureFromAnimation(animationId);\n\t\t}\n\t}\n\n\t@Provides\n\tLennysCustomCluesConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(LennysCustomCluesConfig.class);\n\t}\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\LennysCustomCluesPlugin.java"},{"fileName":"MainPanel.java","content":"package com.lennyscustomclues;\n\nimport net.runelite.client.ui.ColorScheme;\nimport net.runelite.client.ui.PluginPanel;\n\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.awt.*;\n\n@Singleton\npublic class MainPanel extends PluginPanel\n{\n\t@Inject\n\tprivate LennysCustomCluesPanel normalPanel;\n\n\tpublic MainPanel()\n\t{\n\t\tsetLayout(new BorderLayout());\n\t\tsetBackground(ColorScheme.DARK_GRAY_COLOR);\n\t}\n\n\t@Inject\n\tpublic void initialize()\n\t{\n\t\t// Initialize child panel\n\t\tnormalPanel.initialize();\n\n\t\t// Add the normal panel\n\t\tadd(normalPanel, BorderLayout.CENTER);\n\t}\n}","filePath":"src\\main\\java\\com\\lennyscustomclues\\MainPanel.java"},{"fileName":"LennysCustomCluesPluginTest.java","content":"package com.lennyscustomclues;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class LennysCustomCluesPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(LennysCustomCluesPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\lennyscustomclues\\LennysCustomCluesPluginTest.java"}]},{"commit":"0907827d2440b270576713cbd84a749d9cb7e213","repository":"https://github.com/daanbom/Custom-Drop-Sounds.git","internalName":"custom-drop-sounds","files":[{"fileName":"AnimationIDs.java","content":"package org.CustomSounds;\n\npublic enum AnimationIDs\n{\n    BURN_CLAW(11140),\n    DRAGON_CLAW(7514),\n    HORN_HIT(12158),\n    HORN_MISS(12159),\n    ELDER_MAUL(11124),\n    VOIDWAKER(11275),\n    KERIS(9546),\n    BGS(7642),\n    CRYSTAL_HALLY(1203),\n    HOUSE_TABS(4071),\n    CAPES(714),\n    SCROLLS(3864);\n\n\n    public final int Id;\n\n    AnimationIDs(int id)\n    {\n        this.Id \u003d id;\n    }\n}\n\n","filePath":"src\\main\\java\\org\\CustomSounds\\AnimationIDs.java"},{"fileName":"CustomSoundsConfig.java","content":"package org.CustomSounds;\n\nimport net.runelite.client.config.*;\n\n@ConfigGroup(\"CustomDropSounds\")\npublic interface CustomSoundsConfig extends Config\n{\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Value drops\",\n\t\t\tdescription \u003d \"All the settings for drops\",\n\t\t\tposition \u003d 8\n\n\t)\n\tString valueDrops \u003d \"valueDrops\";\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Clue drops\",\n\t\t\tdescription \u003d \"All the settings for drops\",\n\t\t\tposition \u003d 7\n\n\t)\n\tString clueDrops \u003d \"clueDrops\";\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Spec weapon sounds\",\n\t\t\tdescription \u003d \"All the settings for Spec weapons\",\n\t\t\tposition \u003d 9\n\n\t)\n\tString specWeapon \u003d \"specWeapon\";\n\t@Range(max\u003d100)\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"masterVolume\",\n\t\t\tname \u003d \"Master Volume\",\n\t\t\tdescription \u003d \"Sets the master volume of all ground item sounds\",\n\t\t\tposition \u003d 0\n\t)\n\tdefault int masterVolume()\n\t{\n\t\treturn 50;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"highlightSound\",\n\t\t\tname \u003d \"Highlight Sound\",\n\t\t\tdescription \u003d \"Configure whether or not to play a sound when a highlighted (ground item plugin) item appears\",\n\t\t\tposition \u003d 1\n\t)\n\tdefault boolean highlightSound()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"petSound\",\n\t\t\tname \u003d \"Pet Sound\",\n\t\t\tdescription \u003d \"Configure whether or not to play a sound when a pet item appears\",\n\t\t\tposition \u003d 2\n\t)\n\tdefault boolean petSound()\n\t{\n\t\treturn false;\n\t}\n\t\t@ConfigItem(\n\t\t\tkeyName \u003d \"maxHitBoolean\",\n\t\t\tname \u003d \"Maxhit\",\n\t\t\tdescription \u003d \"Enable/Disable Max Hit Sounds\",\n\t\t\tsection \u003d \"hitsplatToggleSection\",\n\t\t\tposition \u003d 3\n\t)\n\tdefault boolean maxHitBoolean() {return false;}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"announceDeath\",\n\t\t\tname \u003d \"Death sound\",\n\t\t\tdescription \u003d \"Enable/Disable Death Sound\",\n\t\t\tposition \u003d 4\n\t)\n\tdefault boolean announceDeath() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"announceCollectionLog\",\n\t\t\tname \u003d \"New collection log entry\",\n\t\t\tdescription \u003d \" This one relies on you having chat messages (included with the popup option) enabled in game settings!\",\n\t\t\tposition \u003d 5\n\t)\n\tdefault boolean announceCollectionLog() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"teleports\",\n\t\t\tname \u003d \"Teleport Sounds\",\n\t\t\tdescription \u003d \"Configure whether or not you want to use a custom sound for teleports (house tabs, capes, scrolls)\",\n\t\t\tposition \u003d 6\n\t)\n\tdefault boolean teleports() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"beginnerClueSound\",\n\t\t\tname \u003d \"Beginner Clue Sound\",\n\t\t\tdescription \u003d \"Configure whether or not to play a sound when a beginner clue item appears\",\n\t\t\tposition \u003d 0,\n\t\t\tsection \u003d clueDrops\n\t)\n\n\tdefault boolean beginnerClueSound()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"easyClueSound\",\n\t\t\tname \u003d \"Easy Clue Sound\",\n\t\t\tdescription \u003d \"Configure whether or not to play a sound when a easy clue item appears\",\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d clueDrops\n\t)\n\tdefault boolean easyClueSound()\n\t{\n\t\treturn true;\n\t}\n\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"mediumClueSound\",\n\t\t\tname \u003d \"Medium Clue Sound\",\n\t\t\tdescription \u003d \"Configure whether or not to play a sound when a medium clue item appears\",\n\t\t\tposition \u003d 2,\n\t\t\tsection \u003d clueDrops\n\t)\n\tdefault boolean mediumClueSound()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"hardClueSound\",\n\t\t\tname \u003d \"Hard Clue Sound\",\n\t\t\tdescription \u003d \"Configure whether or not to play a sound when a hard clue item appears\",\n\t\t\tposition \u003d 3,\n\t\t\tsection \u003d clueDrops\n\t)\n\tdefault boolean hardClueSound()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"eliteClueSound\",\n\t\t\tname \u003d \"Elite Clue Sound\",\n\t\t\tdescription \u003d \"Configure whether or not to play a sound when a elite clue item appears\",\n\t\t\tposition \u003d 4,\n\t\t\tsection \u003d clueDrops\n\t)\n\tdefault boolean eliteClueSound()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"masterClueSound\",\n\t\t\tname \u003d \"Master Clue Sound\",\n\t\t\tdescription \u003d \"Configure whether or not to play a sound when a master clue item appears\",\n\t\t\tposition \u003d 5,\n\t\t\tsection \u003d clueDrops\n\t)\n\tdefault boolean masterClueSound()\n\t{\n\t\treturn true;\n\t}\n\n\n\n\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"lowestValueSound\",\n\t\t\tname \u003d \"Lowest Value Sound\",\n\t\t\tdescription \u003d \"Configure whether or not to play a sound when a lowest valued item appears\",\n\t\t\tposition \u003d 0,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault boolean lowestValueSound()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"lowestStart\",\n\t\t\tname \u003d \"Lowest Value starting GP\",\n\t\t\tdescription \u003d \"What is the starting gp you want to hear this sound\" ,\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault int lowestStart() {\n\t\treturn 20000;\n\t}\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"lowestEnd\",\n\t\t\tname \u003d \"Lowest Value ending GP\",\n\t\t\tdescription \u003d \"What is the ending gp you want to hear this sound\" ,\n\t\t\tposition \u003d 2,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault int lowestEnd() {\n\t\treturn 150000;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"lowValueSound\",\n\t\t\tname \u003d \"Low Value Sound\",\n\t\t\tdescription \u003d \"Configure whether or not to play a sound when a low valued item appears\",\n\t\t\tposition \u003d 3,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault boolean lowValueSound()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"lowStart\",\n\t\t\tname \u003d \"Low Value starting GP\",\n\t\t\tdescription \u003d \"What is the starting gp you want to hear this sound\" ,\n\t\t\tposition \u003d 4,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault int lowStart() {\n\t\treturn 150000;\n\t}\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"lowEnd\",\n\t\t\tname \u003d \"Low Value ending GP\",\n\t\t\tdescription \u003d \"What is the ending gp you want to hear this sound\" ,\n\t\t\tposition \u003d 5,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault int lowEnd() {\n\t\treturn 500000;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"mediumValueSound\",\n\t\t\tname \u003d \"Medium Value Sound\",\n\t\t\tdescription \u003d \"Configure whether or not to play a sound when a medium valued item appears\",\n\t\t\tposition \u003d 6,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault boolean mediumValueSound()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"mediumStart\",\n\t\t\tname \u003d \"Medium Value starting GP\",\n\t\t\tdescription \u003d \"What is the starting gp you want to hear this sound\" ,\n\t\t\tposition \u003d 7,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault int mediumStart() {\n\t\treturn 500000;\n\t}\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"mediumEnd\",\n\t\t\tname \u003d \"Medium Value ending GP\",\n\t\t\tdescription \u003d \"What is the ending gp you want to hear this sound\" ,\n\t\t\tposition \u003d 8,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault int mediumEnd() {\n\t\treturn 1000000;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"highValueSound\",\n\t\t\tname \u003d \"High Value Sound\",\n\t\t\tdescription \u003d \"Configure whether or not to play a sound when a high valued item appears\",\n\t\t\tposition \u003d 9,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault boolean highValueSound()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"highStart\",\n\t\t\tname \u003d \"High Value starting GP\",\n\t\t\tdescription \u003d \"What is the starting gp you want to hear this sound\" ,\n\t\t\tposition \u003d 10,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault int highStart() {\n\t\treturn 1000000;\n\t}\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"highEnd\",\n\t\t\tname \u003d \"High Value ending GP\",\n\t\t\tdescription \u003d \"What is the ending gp you want to hear this sound\" ,\n\t\t\tposition \u003d 11,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault int highEnd() {\n\t\treturn 10000000;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"highestValueSound\",\n\t\t\tname \u003d \"Highest Value Sound\",\n\t\t\tdescription \u003d \"Configure whether or not to play a sound when a highest valued item appears\",\n\t\t\tposition \u003d 12,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault boolean highestValueSound()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"highestStart\",\n\t\t\tname \u003d \"Highest Value starting GP\",\n\t\t\tdescription \u003d \"What is the starting gp you want to hear this sound\" ,\n\t\t\tposition \u003d 13,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault int highestStart() {\n\t\treturn 10000000;\n\t}\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"highestEnd\",\n\t\t\tname \u003d \"Highest Value ending GP\",\n\t\t\tdescription \u003d \"What is the ending gp you want to hear this sound\" ,\n\t\t\tposition \u003d 14,\n\t\t\tsection \u003d valueDrops\n\t)\n\tdefault int highestEnd() {\n\t\treturn 1000000000;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"zaryteCrossBow\",\n\t\t\tname \u003d \"Zaryte CrossBow Spec\",\n\t\t\tdescription \u003d \"Configure whether or not you want to use a custom Zaryte CrossBow spec sound\" ,\n\t\t\tposition \u003d 0,\n\t\t\tsection \u003d specWeapon\n\t)\n\tdefault boolean zaryteCrossBow() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"elderMaul\",\n\t\t\tname \u003d \"Elder Maul Spec\",\n\t\t\tdescription \u003d \"Configure whether or not you want to use a custom Elder Maul spec sound\" ,\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d specWeapon\n\t)\n\tdefault boolean elderMaul() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"dragonClaws\",\n\t\t\tname \u003d \"Dragon Claw Spec\",\n\t\t\tdescription \u003d \"Configure whether or not you want to use a custom Dragon Claw spec sound\" ,\n\t\t\tposition \u003d 2,\n\t\t\tsection \u003d specWeapon\n\t)\n\tdefault boolean dragonClaws() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"burnClaw\",\n\t\t\tname \u003d \"Burn Claw Spec\",\n\t\t\tdescription \u003d \"Configure whether or not you want to use a custom Burn Claw spec sound\",\n\t\t\tposition \u003d 3,\n\t\t\tsection \u003d specWeapon\n\t)\n\tdefault boolean burnClaw() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"horn\",\n\t\t\tname \u003d \"Horn Spec\",\n\t\t\tdescription \u003d \"Configure whether or not you want to use a custom Horn spec sound\",\n\t\t\tposition \u003d 4,\n\t\t\tsection \u003d specWeapon\n\t)\n\tdefault boolean horn() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"voidwaker\",\n\t\t\tname \u003d \"Voidwaker Spec\",\n\t\t\tdescription \u003d \"Configure whether or not you want to use a custom Voidwaker spec sound\",\n\t\t\tposition \u003d 5,\n\t\t\tsection \u003d specWeapon\n\t)\n\tdefault boolean voidwaker() {\n\t\treturn false;\n\t}\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"blowpipe\",\n\t\t\tname \u003d \"Blowpipe Spec\",\n\t\t\tdescription \u003d \"Configure whether or not you want to use a custom Blowpipe spec sound\",\n\t\t\tposition \u003d 6,\n\t\t\tsection \u003d specWeapon\n\t)\n\tdefault boolean blowpipe() {\n\t\treturn false;\n\t}\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"keris\",\n\t\t\tname \u003d \"Keris Spec\",\n\t\t\tdescription \u003d \"Configure whether or not you want to use a custom Keris spec sound\",\n\t\t\tposition \u003d 7,\n\t\t\tsection \u003d specWeapon\n\t)\n\tdefault boolean keris() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"bgs\",\n\t\t\tname \u003d \"BGS Spec\",\n\t\t\tdescription \u003d \"Configure whether or not you want to use a custom BGS spec sound\",\n\t\t\tposition \u003d 8,\n\t\t\tsection \u003d specWeapon\n\t)\n\tdefault boolean bgs() {\n\t\treturn false;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"crystalHally\",\n\t\t\tname \u003d \"Crystal Halberd Spec\",\n\t\t\tdescription \u003d \"Configure whether or not you want to use a custom Crystal Halberd spec sound\",\n\t\t\tposition \u003d 9,\n\t\t\tsection \u003d specWeapon\n\t)\n\tdefault boolean crystalHally() {\n\t\treturn false;\n\t}\n\n\n}\n","filePath":"src\\main\\java\\org\\CustomSounds\\CustomSoundsConfig.java"},{"fileName":"CustomSoundsPlugin.java","content":"package org.CustomSounds;\n\nimport com.google.common.collect.ImmutableList;\nimport com.google.inject.Provides;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.*;\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.audio.AudioPlayer;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.game.ItemStack;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDependency;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.plugins.grounditems.GroundItemsConfig;\nimport net.runelite.client.plugins.grounditems.GroundItemsPlugin;\nimport net.runelite.client.plugins.loottracker.LootReceived;\nimport net.runelite.client.util.Text;\n\nimport javax.inject.Inject;\nimport javax.sound.sampled.Clip;\nimport javax.sound.sampled.FloatControl;\nimport javax.sound.sampled.LineUnavailableException;\nimport javax.sound.sampled.UnsupportedAudioFileException;\nimport java.io.*;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.concurrent.CopyOnWriteArrayList;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.concurrent.TimeUnit;\nimport java.util.regex.Pattern;\n\n@Slf4j\n@PluginDescriptor(\n\t\tname \u003d \"Custom Sounds\",\n\t\tdescription \u003d \"Play custom sound effects for item drops, pets, hits and more\",\n\t\ttags \u003d {\"sound\", \"effect\", \"item\", \"drop\", \"hit\", \"combat\"}\n)\n@PluginDependency(GroundItemsPlugin.class)\npublic class CustomSoundsPlugin extends Plugin\n{\n\t@Inject\n\tprivate CustomSoundsConfig config;\n\n\t@Inject\n\tprivate AudioPlayer audioPlayer;\n\n\n\t@Provides\n\tCustomSoundsConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(CustomSoundsConfig.class);\n\t}\n\n\t@Inject\n\tprivate GroundItemsConfig groundItemsConfig;\n\n\t@Inject\n\tprivate ScheduledExecutorService executor;\n\n\t@Inject\n\tprivate Client client;\n\t@Inject\n\tprivate ItemManager itemManager;\n\n\tprivate Map\u003cInteger, WeaponSound\u003e allWeapons \u003d new HashMap\u003c\u003e();\n\n\tprivate static final Pattern COLLECTION_LOG_ITEM_REGEX \u003d Pattern.compile(\"New item added to your collection log:.*\");\n\n\n\tprivate static final ImmutableList\u003cString\u003e PET_MESSAGES \u003d ImmutableList.of(\"You have a funny feeling like you\u0027re being followed\",\n\t\t\t\"You feel something weird sneaking into your backpack\",\n\t\t\t\"You have a funny feeling like you would have been followed\");\n\tprivate static final File CUSTOM_SOUNDS_DIR \u003d new File(RuneLite.RUNELITE_DIR.getPath() + File.separator + \"custom-drop-sounds\");\n\n\tprivate static final File HIGHLIGHTED_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"highlighted_sound.wav\");\n\tprivate static final File BEGINNER_CLUE_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"beginner_clue_sound.wav\");\n\tprivate static final File EASY_CLUE_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"easy_clue_sound.wav\");\n\tprivate static final File MEDIUM_CLUE_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"medium_clue_sound.wav\");\n\tprivate static final File HARD_CLUE_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"hard_clue_sound.wav\");\n\tprivate static final File ELITE_CLUE_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"elite_clue_sound.wav\");\n\tprivate static final File MASTER_CLUE_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"master_clue_sound.wav\");\n\tprivate static final File LOW_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"low_sound.wav\");\n\tprivate static final File MEDIUM_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"medium_sound.wav\");\n\n\tprivate static final File PET_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"pet_sound.wav\");\n\tprivate static final File HIGH_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"high_sound.wav\");\n\tprivate static final File HIGHEST_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"highest_sound.wav\");\n\tprivate static final File LOWEST_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"lowest_sound.wav\");\n\tprivate static final File COLLECTIONLOG_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"CollectionLog.wav\");\n\tprivate static final File DIED_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"Died.wav\");\n\n\tprivate static final File MAX_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"Max.wav\");\n\n\tprivate static final File ZARYTE_CROSSBOW_SPEC_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"zaryte_spec.wav\");\n\tprivate static final File ELDER_MAUL_SPEC_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"elder_maul.wav\");\n\tprivate static final File DRAGON_CLAWS_SPEC_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"dragon_claws.wav\");\n\tprivate static final File BURN_CLAW_SPEC_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"burn_claws.wav\");\n\tprivate static final File HORN_SPEC_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"horn_spec.wav\");\n\tprivate static final File VOIDWAKER_SPEC_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"voidwaker.wav\");\n\tprivate static final File BLOWPIPE_SPEC_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"blowpipe.wav\");\n\tprivate static final File KERIS_SPEC_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"keris_spec.wav\");\n\tprivate static final File BGS_SPEC_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"bgs_spec.wav\");\n\tprivate static final File CRYSTAL_HALLY_SPEC_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"crystal_hally_spec.wav\");\n\tprivate static final File TELEPORT_SOUND_FILE \u003d new File(CUSTOM_SOUNDS_DIR, \"teleport.wav\");\n\tprivate static final File[] SOUND_FILES \u003d new File[]{\n\t\t\tHIGHLIGHTED_SOUND_FILE,\n\t\t\tBEGINNER_CLUE_SOUND_FILE,\n\t\t\tEASY_CLUE_SOUND_FILE,\n\t\t\tMEDIUM_CLUE_SOUND_FILE,\n\t\t\tHARD_CLUE_SOUND_FILE,\n\t\t\tELITE_CLUE_SOUND_FILE,\n\t\t\tMASTER_CLUE_SOUND_FILE,\n\t\t\tLOW_SOUND_FILE,\n\t\t\tMEDIUM_SOUND_FILE,\n\t\t\tLOWEST_SOUND_FILE,\n\t\t\tHIGH_SOUND_FILE,\n\t\t\tHIGHEST_SOUND_FILE,\n\t\t\tPET_SOUND_FILE,\n\t\t\tMAX_SOUND_FILE,\n\t\t\tCOLLECTIONLOG_SOUND_FILE,\n\t\t\tDIED_SOUND_FILE,\n\t\t\tZARYTE_CROSSBOW_SPEC_SOUND_FILE,\n\t\t\tELDER_MAUL_SPEC_SOUND_FILE,\n\t\t\tDRAGON_CLAWS_SPEC_SOUND_FILE,\n\t\t\tBURN_CLAW_SPEC_SOUND_FILE,\n\t\t\tHORN_SPEC_SOUND_FILE,\n\t\t\tVOIDWAKER_SPEC_SOUND_FILE,\n\t\t\tBLOWPIPE_SPEC_SOUND_FILE,\n\t\t\tKERIS_SPEC_SOUND_FILE,\n\t\t\tBGS_SPEC_SOUND_FILE,\n\t\t\tCRYSTAL_HALLY_SPEC_SOUND_FILE,\n\t\t\tTELEPORT_SOUND_FILE\n\t};\n\n\n\tprivate List\u003cString\u003e highlightedItemsList \u003d new CopyOnWriteArrayList\u003c\u003e();\n\n\tprivate Clip clip \u003d null;\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\tinitSoundFiles();\n\t\tupdateHighlightedItemsList();\n\t\tinitAllWeapons();\n\t}\n\n\tprivate void initAllWeapons()\n\t{\n\t\t// Animation-based weapons\n\t\tallWeapons.put(AnimationIDs.ELDER_MAUL.Id,\n\t\t\t\tnew WeaponSound(ELDER_MAUL_SPEC_SOUND_FILE, () -\u003e config.elderMaul(), 2, true));\n\t\tallWeapons.put(AnimationIDs.DRAGON_CLAW.Id,\n\t\t\t\tnew WeaponSound(DRAGON_CLAWS_SPEC_SOUND_FILE, () -\u003e config.dragonClaws(), 1, true));\n\t\tallWeapons.put(AnimationIDs.HORN_HIT.Id,\n\t\t\t\tnew WeaponSound(HORN_SPEC_SOUND_FILE, () -\u003e config.horn(), 0, true));\n\t\tallWeapons.put(AnimationIDs.HORN_MISS.Id,\n\t\t\t\tnew WeaponSound(HORN_SPEC_SOUND_FILE, () -\u003e config.horn(), 0, true));\n\t\tallWeapons.put(AnimationIDs.BURN_CLAW.Id,\n\t\t\t\tnew WeaponSound(BURN_CLAW_SPEC_SOUND_FILE, () -\u003e config.burnClaw(), 0, true));\n\t\tallWeapons.put(AnimationIDs.VOIDWAKER.Id,\n\t\t\t\tnew WeaponSound(VOIDWAKER_SPEC_SOUND_FILE, () -\u003e config.voidwaker(), 1, true));\n\t\tallWeapons.put(AnimationIDs.KERIS.Id,\n\t\t\t\tnew WeaponSound(KERIS_SPEC_SOUND_FILE, () -\u003e config.keris(), 1, true));\n\t\tallWeapons.put(AnimationIDs.BGS.Id,\n\t\t\t\tnew WeaponSound(BGS_SPEC_SOUND_FILE, () -\u003e config.bgs(), 1, true));\n\t\tallWeapons.put(AnimationIDs.CRYSTAL_HALLY.Id,\n\t\t\t\tnew WeaponSound(CRYSTAL_HALLY_SPEC_SOUND_FILE, () -\u003e config.crystalHally(), 1, true));\n\n\t\t// Teleports - all use same sound and config\n\t\tallWeapons.put(AnimationIDs.HOUSE_TABS.Id,\n\t\t\t\tnew WeaponSound(TELEPORT_SOUND_FILE, () -\u003e config.teleports(), 1, true));\n\t\tallWeapons.put(AnimationIDs.CAPES.Id,\n\t\t\t\tnew WeaponSound(TELEPORT_SOUND_FILE, () -\u003e config.teleports(), 1, true));\n\t\tallWeapons.put(AnimationIDs.SCROLLS.Id,\n\t\t\t\tnew WeaponSound(TELEPORT_SOUND_FILE, () -\u003e config.teleports(), 1, true));\n\n\t\t// Sound-based weapons\n\t\tallWeapons.put(SoundIDs.BLOWPIPE.Id,\n\t\t\t\tnew WeaponSound(BLOWPIPE_SPEC_SOUND_FILE, () -\u003e config.blowpipe(), 1, false));\n\t\tallWeapons.put(SoundIDs.RUBY_BOLT.Id,\n\t\t\t\tnew WeaponSound(ZARYTE_CROSSBOW_SPEC_SOUND_FILE, () -\u003e config.zaryteCrossBow(), 1, false));\n\t}\n\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\thighlightedItemsList \u003d null;\n\t}\n\n\t@Subscribe\n\tpublic void onConfigChanged(ConfigChanged configChanged)\n\t{\n\n\t\tif (configChanged.getGroup().equals(\"grounditems\") \u0026\u0026 configChanged.getKey().equals(\"highlightedItems\"))\n\t\t{\n\t\t\tupdateHighlightedItemsList();\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onLootReceived(LootReceived lootReceived) {\n\t\tfor (ItemStack stack : lootReceived.getItems()) {\n\t\t\thandleItem(stack.getId(), stack.getQuantity());\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onHitsplatApplied(HitsplatApplied event)\n\t{\n\t\tActor actor \u003d event.getActor();\n\t\t// Skip if actor is null\n\t\tif (actor \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (config.maxHitBoolean() \u0026\u0026 event.getHitsplat().getHitsplatType()\u003d\u003dHitsplatID.DAMAGE_MAX_ME){\n\t\t\tplaySound(MAX_SOUND_FILE);\n\t\t}\n\n\t}\n\n\t@Subscribe\n\tpublic void onAnimationChanged(AnimationChanged event)\n\t{\n\t\tActor actor \u003d event.getActor();\n\n\t\tif (actor !\u003d client.getLocalPlayer())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tint currentAnimationId \u003d actor.getAnimation();\n\n\t\tWeaponSound weapon \u003d allWeapons.get(currentAnimationId);\n\t\tif (weapon !\u003d null \u0026\u0026 weapon.isAnimationBased \u0026\u0026 weapon.configCheck.get())\n\t\t{\n\t\t\t// Schedule sound to play after specified delay\n\t\t\tscheduleDelayedSound(weapon.soundFile, weapon.delay);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onSoundEffectPlayed(SoundEffectPlayed event)\n\t{\n\t\tint soundId \u003d event.getSoundId();\n\n\t\tPlayer localPlayer \u003d client.getLocalPlayer();\n\t\tif (localPlayer \u003d\u003d null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tint currentAnimation \u003d localPlayer.getAnimation();\n\n\t\t// Check if this sound should be blocked (animation-based weapons)\n\t\tWeaponSound animationWeapon \u003d allWeapons.get(currentAnimation);\n\t\tif (animationWeapon !\u003d null \u0026\u0026 animationWeapon.isAnimationBased \u0026\u0026 animationWeapon.configCheck.get())\n\t\t{\n\t\t\tevent.consume(); // Block original sound\n\t\t\treturn;\n\t\t}\n\t\t// Check if this is a sound-based weapon\n\t\tWeaponSound soundWeapon \u003d allWeapons.get(soundId);\n\t\tif (soundWeapon !\u003d null \u0026\u0026 !soundWeapon.isAnimationBased \u0026\u0026 soundWeapon.configCheck.get())\n\t\t{\n\t\t\tevent.consume();\n\n\t\t\tif (soundWeapon.delay \u003e 0)\n\t\t\t{\n\t\t\t\tscheduleDelayedSound(soundWeapon.soundFile, soundWeapon.delay);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tplaySound(soundWeapon.soundFile);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void handleItem(int id, int quantity) {\n\t\tfinal ItemComposition itemComposition \u003d itemManager.getItemComposition(id);\n\t\tfinal String name \u003d itemComposition.getName().toLowerCase();\n\n\t\tif (config.highlightSound() \u0026\u0026 highlightedItemsList.contains(name))\n\t\t{\n\t\t\tplaySound(HIGHLIGHTED_SOUND_FILE);\n\t\t\treturn;\n\t\t}\n\n\t\tfinal int gePrice \u003d itemManager.getItemPrice(id) * quantity;\n\t\tfinal int haPrice \u003d itemComposition.getHaPrice() * quantity;\n\t\tfinal int value \u003d getValueByMode(gePrice, haPrice);\n\n\t\tif (config.beginnerClueSound() \u0026\u0026 name.contains(\"clue scroll (beginner)\")){\n\t\t\tplaySound(BEGINNER_CLUE_SOUND_FILE);\n\t\t}\n\t\tif (config.easyClueSound() \u0026\u0026 name.contains(\"clue scroll (easy)\")){\n\t\t\tplaySound(EASY_CLUE_SOUND_FILE);\n\t\t}\n\t\tif (config.mediumClueSound() \u0026\u0026 name.contains(\"clue scroll (medium)\")){\n\t\t\tplaySound(MEDIUM_CLUE_SOUND_FILE);\n\t\t}\n\t\tif (config.hardClueSound() \u0026\u0026 name.contains(\"clue scroll (hard)\")){\n\t\t\tplaySound(HARD_CLUE_SOUND_FILE);\n\t\t}\n\n\t\tif (config.eliteClueSound() \u0026\u0026 name.contains(\"clue scroll (elite)\")){\n\t\t\tplaySound(ELITE_CLUE_SOUND_FILE);\n\t\t}\n\t\tif (config.masterClueSound() \u0026\u0026 name.contains(\"clue scroll (master)\")){\n\t\t\tplaySound(MASTER_CLUE_SOUND_FILE);\n\t\t}\n\n\n\n\t\tif (config.lowestValueSound() \u0026\u0026 value \u003e\u003d config.lowestStart() \u0026\u0026 value \u003c config.lowestEnd())\n\t\t{\n\t\t\tplaySound(LOWEST_SOUND_FILE);\n\t\t}\n\t\tif (config.lowValueSound() \u0026\u0026 value \u003e\u003d config.lowStart() \u0026\u0026 value \u003c config.lowEnd())\n\t\t{\n\t\t\tplaySound(LOW_SOUND_FILE);\n\t\t}\n\t\tif (config.mediumValueSound() \u0026\u0026 value \u003e\u003d config.mediumStart() \u0026\u0026 value \u003c config.mediumEnd())\n\t\t{\n\t\t\tplaySound(MEDIUM_SOUND_FILE);\n\t\t}\n\t\tif (config.highValueSound() \u0026\u0026 value \u003e\u003d config.highStart() \u0026\u0026 value \u003c config.highEnd())\n\t\t{\n\t\t\tplaySound(HIGH_SOUND_FILE);\n\t\t}\n\t\tif (config.highestValueSound() \u0026\u0026 value \u003e\u003d config.highestStart() \u0026\u0026 value \u003c config.highestEnd())\n\t\t{\n\t\t\tplaySound(HIGHEST_SOUND_FILE);\n\t\t}\n\t}\n\n\tprivate void playSound(File f)\n\t{\n\t\tif (!f.exists()) {\n\t\t\tlog.warn(\"Sound file does not exist: {}\", f.getPath());\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\t// Convert percentage (0-100) to gain in dB\n\t\t\tfloat gainInDecibels \u003d convertToDecibels(config.masterVolume());\n\n\t\t\t// Call the instance method\n\t\t\taudioPlayer.play(f, gainInDecibels);\n\t\t} catch (IOException | UnsupportedAudioFileException | LineUnavailableException e) {\n\t\t\tlog.warn(\"Error playing sound {}: {}\", f.getName(), e.getMessage());\n\t\t}\n\n\t}\n\tprivate void scheduleDelayedSound(File soundFile, int delayTicks)\n\t{\n\t\t// Convert ticks to milliseconds (1 tick \u003d 600ms)\n\t\tint delayMs \u003d delayTicks * 600;\n\n\t\texecutor.schedule(() -\u003e {\n\t\t\tplaySound(soundFile); // Use your existing playSound method\n\t\t}, delayMs, TimeUnit.MILLISECONDS);\n\t}\n\n\n\n\tprivate float convertToDecibels(int volumePercentage) {\n\t\t// Avoid log(0)\n\t\tif (volumePercentage \u003c\u003d 0) {\n\t\t\treturn -80.0f; // Very quiet\n\t\t}\n\n\t\t// Convert percentage to a ratio (0.0 to 1.0)\n\t\tfloat ratio \u003d volumePercentage / 100.0f;\n\n\t\t// Convert ratio to decibels\n\t\treturn 20f * (float) Math.log10(ratio);\n\t}\n\n\t// sets volume using dB to linear conversion\n\tprivate void setVolume(int volume)\n\t{\n\t\tfloat vol \u003d volume/100.0f;\n\t\tvol *\u003d config.masterVolume()/100.0f;\n\t\tFloatControl gainControl \u003d (FloatControl)clip.getControl(FloatControl.Type.MASTER_GAIN);\n\t\tgainControl.setValue(20.0f * (float) Math.log10(vol));\n\t}\n\n\t// initialize sound files if they haven\u0027t been created yet\n\tprivate void initSoundFiles()\n\t{\n\t\tif (!CUSTOM_SOUNDS_DIR.exists())\n\t\t{\n\t\t\tCUSTOM_SOUNDS_DIR.mkdirs();\n\t\t}\n\n\t\tfor (File f : SOUND_FILES)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tif (f.exists()) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tInputStream stream \u003d CustomSoundsPlugin.class.getClassLoader().getResourceAsStream(f.getName());\n\t\t\t\tOutputStream out \u003d new FileOutputStream(f);\n\t\t\t\tbyte[] buffer \u003d new byte[8 * 1024];\n\t\t\t\tint bytesRead;\n\t\t\t\twhile ((bytesRead \u003d stream.read(buffer)) !\u003d -1) {\n\t\t\t\t\tout.write(buffer, 0, bytesRead);\n\t\t\t\t}\n\t\t\t\tout.close();\n\t\t\t\tstream.close();\n\t\t\t}  catch (Exception e) {\n\t\t\t\tlog.debug(e + \": \" + f);\n\t\t\t}\n\t\t}\n\n\t}\n\n\tprivate int getValueByMode(int gePrice, int haPrice)\n\t{\n\t\tswitch (groundItemsConfig.valueCalculationMode())\n\t\t{\n\t\t\tcase GE:\n\t\t\t\treturn gePrice;\n\t\t\tcase HA:\n\t\t\t\treturn haPrice;\n\t\t\tdefault: // Highest\n\t\t\t\treturn Math.max(gePrice, haPrice);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onActorDeath(ActorDeath actorDeath) {\n\t\tif (actorDeath.getActor() !\u003d client.getLocalPlayer()){\n\t\t\treturn;\n\t\t}\n\t\tif (config.announceDeath()) {\n\t\t\tplaySound(DIED_SOUND_FILE);\n\t\t}\n\t}\n\n\n\n\tprivate void updateHighlightedItemsList()\n\t{\n\t\tif (!groundItemsConfig.getHighlightItems().isEmpty())\n\t\t{\n\t\t\thighlightedItemsList \u003d Text.fromCSV(groundItemsConfig.getHighlightItems().toLowerCase());\n\t\t}\n\t}\n\t@Subscribe\n\tpublic void onChatMessage(ChatMessage event) {\n\t\tString chatMessage \u003d event.getMessage();\n\t\tif (event.getType() !\u003d ChatMessageType.GAMEMESSAGE\n\t\t\t\t\u0026\u0026 event.getType() !\u003d ChatMessageType.SPAM\n\t\t\t\t\u0026\u0026 event.getType() !\u003d ChatMessageType.TRADE\n\t\t\t\t\u0026\u0026 event.getType() !\u003d ChatMessageType.FRIENDSCHATNOTIFICATION)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (config.announceCollectionLog() \u0026\u0026 COLLECTION_LOG_ITEM_REGEX.matcher(event.getMessage()).matches()){\n\t\t\tplaySound(COLLECTIONLOG_SOUND_FILE);\n\t\t}\n\t\telse if (config.petSound() \u0026\u0026 PET_MESSAGES.stream().anyMatch(chatMessage::contains))\n\t\t{\n\t\t\tplaySound(PET_SOUND_FILE);\n\t\t}\n\n\t}\n\n}\n\n","filePath":"src\\main\\java\\org\\CustomSounds\\CustomSoundsPlugin.java"},{"fileName":"SoundIDs.java","content":"package org.CustomSounds;\n\npublic enum SoundIDs\n{\n    BLOWPIPE(800),\n    RUBY_BOLT(2911);\n\n    public final int Id;\n\n    SoundIDs(int id)\n    {\n        this.Id \u003d id;\n    }\n}\n","filePath":"src\\main\\java\\org\\CustomSounds\\SoundIDs.java"},{"fileName":"SoundManager.java","content":"package org.CustomSounds;\n\nimport lombok.extern.slf4j.Slf4j;\n\nimport javax.sound.sampled.*;\nimport java.io.File;\nimport java.io.IOException;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\n@Slf4j\npublic class SoundManager {\n    private final ExecutorService audioExecutor \u003d Executors.newSingleThreadExecutor();\n    private final Map\u003cFile, Clip\u003e clipCache \u003d new HashMap\u003c\u003e();\n    private final CustomSoundsConfig config;\n\n    public SoundManager(CustomSoundsConfig config) {\n        this.config \u003d config;\n    }\n\n    public void playSound(File soundFile) {\n        if (!soundFile.exists()) {\n            log.warn(\"Sound file does not exist: {}\", soundFile.getPath());\n            return;\n        }\n\n        audioExecutor.submit(() -\u003e {\n            try {\n                Clip audioClip \u003d getClip(soundFile);\n                if (audioClip.isRunning()) {\n                    audioClip.stop();\n                }\n                audioClip.setFramePosition(0);\n                setVolume(audioClip, config.masterVolume());\n                audioClip.start();\n            } catch (Exception e) {\n                log.warn(\"Error playing sound {}: {}\", soundFile.getName(), e.getMessage());\n            }\n        });\n    }\n\n    private Clip getClip(File soundFile) throws IOException, UnsupportedAudioFileException, LineUnavailableException {\n        // Check if we have a cached clip\n        if (clipCache.containsKey(soundFile)) {\n            return clipCache.get(soundFile);\n        }\n\n        // Create a new clip\n        try (AudioInputStream audioInputStream \u003d AudioSystem.getAudioInputStream(soundFile)) {\n            AudioFormat format \u003d audioInputStream.getFormat();\n            DataLine.Info info \u003d new DataLine.Info(Clip.class, format);\n            Clip clip \u003d (Clip) AudioSystem.getLine(info);\n            clip.open(audioInputStream);\n\n            // Cache the clip for future use\n            clipCache.put(soundFile, clip);\n\n            return clip;\n        }\n    }\n\n    private void setVolume(Clip clip, int volume) {\n        float vol \u003d volume / 100.0f;\n        if (clip.isControlSupported(FloatControl.Type.MASTER_GAIN)) {\n            FloatControl gainControl \u003d (FloatControl) clip.getControl(FloatControl.Type.MASTER_GAIN);\n            gainControl.setValue(20.0f * (float) Math.log10(vol));\n        }\n    }\n\n    public void shutdown() {\n        audioExecutor.shutdown();\n        // Clean up all cached clips\n        for (Clip clip : clipCache.values()) {\n            if (clip.isOpen()) {\n                clip.close();\n            }\n        }\n        clipCache.clear();\n    }\n}","filePath":"src\\main\\java\\org\\CustomSounds\\SoundManager.java"},{"fileName":"WeaponSound.java","content":"package org.CustomSounds;\n\nimport java.io.File;\nimport java.util.function.Supplier;\n\npublic class WeaponSound {\n    public final File soundFile;\n    public final Supplier\u003cBoolean\u003e configCheck;\n    public final int delay;\n    public final boolean isAnimationBased;\n\n    public WeaponSound(File soundFile, Supplier\u003cBoolean\u003e configCheck, int delay, boolean isAnimationBased) {\n        this.soundFile \u003d soundFile;\n        this.configCheck \u003d configCheck;\n        this.delay \u003d delay;\n        this.isAnimationBased \u003d isAnimationBased;\n    }\n}","filePath":"src\\main\\java\\org\\CustomSounds\\WeaponSound.java"},{"fileName":"PluginLauncher.java","content":"package org.CustomSounds;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class PluginLauncher\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(CustomSoundsPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\org\\CustomSounds\\PluginLauncher.java"}]},{"commit":"b4cd32e9dbffe4e9e989c3d4d46bbc25c741608d","repository":"https://github.com/kulcris/WOMSyncAPITrigger.git","internalName":"womsynctriggerscript","files":[{"fileName":"womsheetsbridgeconfig.java","content":"package com.womsheetsbridge;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"womsheetsbridge\")\npublic interface womsheetsbridgeconfig extends Config\n{\n    @ConfigItem(\n            keyName \u003d \"webAppUrl\",\n            name \u003d \"Apps Script Web App URL\",\n            description \u003d \"The Apps Script Web App deployment URL (the /exec link).\",\n            warning \u003d \"This plugin submits your IP address to a 3rd party website not controlled or verified by the RuneLite Developers.\"\n    )\n    default String webAppUrl()\n    {\n        return \"\";\n    }\n\n    @ConfigItem(\n            keyName \u003d \"enabled\",\n            name \u003d \"Enable bridge\",\n            description \u003d \"If disabled, no requests are sent.\"\n    )\n    default boolean enabled()\n    {\n        return true;\n    }\n    @ConfigItem(\n            keyName \u003d \"debug\",\n            name \u003d \"Debug logging\",\n            description \u003d \"Logs chat lines during pending WOM sync window and HTTP responses.\"\n    )\n    default boolean debug()\n    {\n        return false;\n    }\n}\n","filePath":"src\\main\\java\\com\\womsheetsbridge\\womsheetsbridgeconfig.java"},{"fileName":"womsheetsbridgeplugin.java","content":"package com.womsheetsbridge;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\n\nimport lombok.extern.slf4j.Slf4j;\n\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.events.ChatMessage;\nimport net.runelite.api.events.MenuOptionClicked;\nimport net.runelite.client.Notifier;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.util.Text;\n\nimport okhttp3.Call;\nimport okhttp3.Callback;\nimport okhttp3.MediaType;\nimport okhttp3.OkHttpClient;\nimport okhttp3.Request;\nimport okhttp3.RequestBody;\nimport okhttp3.Response;\n\nimport java.io.IOException;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\n@Slf4j\n@PluginDescriptor(\n        name \u003d \"WOM  Sheets Bridge\",\n        description \u003d \"Triggers a Google Sheets Apps Script after the Wise Old Man \u0027Sync WOM Group\u0027 completes.\",\n        tags \u003d {\"wom\", \"wise old man\", \"google sheets\", \"apps script\"}\n)\npublic class womsheetsbridgeplugin extends Plugin\n{\n    private static final String SYNC_OPTION_TEXT \u003d \"Sync WOM Group\";\n    private static final long PENDING_WINDOW_MS \u003d 120_000; // 2 minutes\n    private static final long DEBOUNCE_MS \u003d 10_000;\n\n    private static final MediaType JSON \u003d MediaType.parse(\"application/json; charset\u003dutf-8\");\n\n    @Inject private womsheetsbridgeconfig config;\n    @Inject private Notifier notifier;\n\n    // Injected by RuneLite; do not construct your own OkHttpClient/Builder\n    @Inject private OkHttpClient okHttpClient;\n\n    // Kept, but no longer used for HTTP (enqueue is async). Safe to remove later if you want.\n    private final ExecutorService executor \u003d Executors.newSingleThreadExecutor();\n\n    private volatile boolean syncPending \u003d false;\n    private volatile long syncPendingUntilMs \u003d 0L;\n    private volatile long lastTriggerAtMs \u003d 0L;\n\n    @Provides\n    womsheetsbridgeconfig provideConfig(ConfigManager configManager)\n    {\n        return configManager.getConfig(womsheetsbridgeconfig.class);\n    }\n\n    @Override\n    protected void shutDown()\n    {\n        executor.shutdownNow();\n        syncPending \u003d false;\n        syncPendingUntilMs \u003d 0L;\n    }\n\n    @Subscribe\n    public void onMenuOptionClicked(MenuOptionClicked event)\n    {\n        if (!config.enabled())\n        {\n            return;\n        }\n\n        final String option \u003d event.getMenuOption();\n        if (option \u003d\u003d null || !option.contains(SYNC_OPTION_TEXT))\n        {\n            return;\n        }\n\n        syncPending \u003d true;\n        syncPendingUntilMs \u003d System.currentTimeMillis() + PENDING_WINDOW_MS;\n\n        if (config.debug())\n        {\n            log.info(\"[WOMSheetsBridge] Armed pending window for {}ms\", PENDING_WINDOW_MS);\n        }\n    }\n\n    @Subscribe\n    public void onChatMessage(ChatMessage event)\n    {\n        if (!config.enabled() || !syncPending)\n        {\n            return;\n        }\n\n        final long now \u003d System.currentTimeMillis();\n        if (now \u003e syncPendingUntilMs)\n        {\n            syncPending \u003d false;\n            syncPendingUntilMs \u003d 0L;\n\n            if (config.debug())\n            {\n                log.info(\"[WOMSheetsBridge] Pending window expired; disarmed\");\n            }\n            return;\n        }\n\n        final ChatMessageType type \u003d event.getType();\n        if (type !\u003d ChatMessageType.GAMEMESSAGE\n                \u0026\u0026 type !\u003d ChatMessageType.CONSOLE\n                \u0026\u0026 type !\u003d ChatMessageType.ENGINE\n                \u0026\u0026 type !\u003d ChatMessageType.MESBOX)\n        {\n            return;\n        }\n\n        final String raw \u003d event.getMessage();\n        final String msg \u003d raw \u003d\u003d null ? \"\" : Text.removeTags(raw).trim();\n        if (msg.isEmpty())\n        {\n            return;\n        }\n\n        if (config.debug() \u0026\u0026 msg.toLowerCase().startsWith(\"wom:\"))\n        {\n            log.info(\"[WOMSheetsBridge] pending chat: type\u003d{} msg\u003d{}\", type, msg);\n        }\n\n        // Check success match explicitly and log it\n        final boolean success \u003d looksLikeWomSyncSuccess(msg);\n        final boolean failure \u003d looksLikeWomSyncFailure(msg);\n\n        if (config.debug() \u0026\u0026 msg.toLowerCase().startsWith(\"wom:\"))\n        {\n            log.info(\"[WOMSheetsBridge] match check: success\u003d{} failure\u003d{}\", success, failure);\n        }\n\n        if (failure)\n        {\n            syncPending \u003d false;\n            syncPendingUntilMs \u003d 0L;\n\n            if (config.debug())\n            {\n                log.info(\"[WOMSheetsBridge] Detected WOM failure; disarmed. msg\u003d{}\", msg);\n            }\n            return;\n        }\n\n        if (!success)\n        {\n            return;\n        }\n\n        // Debounce\n        if (now - lastTriggerAtMs \u003c DEBOUNCE_MS)\n        {\n            if (config.debug())\n            {\n                log.info(\"[WOMSheetsBridge] Debounced success message ({}ms since last trigger)\", now - lastTriggerAtMs);\n            }\n            return;\n        }\n\n        final String webAppUrl \u003d config.webAppUrl();\n        if (webAppUrl \u003d\u003d null || webAppUrl.isBlank())\n        {\n            notifier.notify(\"WOM  Sheets Bridge: Configure Web App URL.\");\n            syncPending \u003d false;\n            syncPendingUntilMs \u003d 0L;\n            return;\n        }\n\n        syncPending \u003d false;\n        syncPendingUntilMs \u003d 0L;\n        lastTriggerAtMs \u003d now;\n\n        // enqueue() is async already; no executor needed here.\n        triggerAppsScript(webAppUrl);\n    }\n\n    private static boolean looksLikeWomSyncSuccess(String message)\n    {\n        // Example completion line:\n        // \"WOM: Synced 494 clan members. 0 added, 0 removed, 0 ranks changed, 0 ranks ignored.\"\n        final String lower \u003d message.trim().toLowerCase();\n        return lower.startsWith(\"wom:\")\n                \u0026\u0026 lower.contains(\"synced\")\n                \u0026\u0026 lower.contains(\"clan members\");\n    }\n\n    private static boolean looksLikeWomSyncFailure(String message)\n    {\n        final String lower \u003d message.trim().toLowerCase();\n        return lower.startsWith(\"wom:\")\n                \u0026\u0026 (lower.contains(\"failed\") || lower.contains(\"error\"));\n    }\n\n    private void triggerAppsScript(String webAppUrl)\n    {\n        // no secret, minimal payload\n        final String payload \u003d \"{}\";\n\n        try\n        {\n            // OkHttp 4+ prefers (String, MediaType). If your OkHttp is older, swap arg order.\n            final RequestBody body \u003d RequestBody.create(JSON, payload);\n\n            final Request request \u003d new Request.Builder()\n                    .url(webAppUrl)\n                    .post(body)\n                    .build();\n\n            if (config.debug())\n            {\n                log.info(\"[WOMSheetsBridge] HTTP POST (enqueue) -\u003e {}\", webAppUrl);\n            }\n\n            okHttpClient.newCall(request).enqueue(new Callback()\n            {\n                @Override\n                public void onFailure(Call call, IOException e)\n                {\n                    log.warn(\"[WOMSheetsBridge] Error calling Sheets endpoint\", e);\n                    notifier.notify(\"WOM  Sheets Bridge: Error calling Sheets endpoint.\");\n                }\n\n                @Override\n                public void onResponse(Call call, Response response) throws IOException\n                {\n                    try (Response r \u003d response)\n                    {\n                        final int code \u003d r.code();\n                        final String responseBody \u003d r.body() !\u003d null ? r.body().string() : \"\";\n\n                        if (config.debug())\n                        {\n                            log.info(\"[WOMSheetsBridge] HTTP \u003c- {} body\u003d{}\", code, responseBody);\n                        }\n\n                        if (code \u003c 200 || code \u003e\u003d 300)\n                        {\n                            notifier.notify(\"WOM  Sheets Bridge: Trigger failed (HTTP \" + code + \")\");\n                            return;\n                        }\n\n                        notifier.notify(\"WOM  Sheets Bridge: Sheets script triggered.\");\n                    }\n                }\n            });\n        }\n        catch (Exception e)\n        {\n            log.warn(\"[WOMSheetsBridge] Error building/requesting Sheets endpoint\", e);\n            notifier.notify(\"WOM  Sheets Bridge: Error calling Sheets endpoint.\");\n        }\n    }\n\n    // Unused currently, but kept since it was in your file\n    private static String escapeJson(String s)\n    {\n        return s.replace(\"\\\\\", \"\\\\\\\\\").replace(\"\\\"\", \"\\\\\\\"\");\n    }\n}\n","filePath":"src\\main\\java\\com\\womsheetsbridge\\womsheetsbridgeplugin.java"},{"fileName":"womsheetsbridgeplugintest.java","content":"package com.womsheetsbridge;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class womsheetsbridgeplugintest\n{\n    public static void main(String[] args) throws Exception\n    {\n        ExternalPluginManager.loadBuiltin(womsheetsbridgeplugin.class);\n        RuneLite.main(args);\n    }\n}","filePath":"src\\test\\java\\com\\womsheetsbridge\\womsheetsbridgeplugintest.java"}]},{"commit":"b9d65c7472e59224895ff13b05bd459c81661a32","repository":"https://github.com/Boredska/bank-item-stats-toggle.git","internalName":"item-stats-banking","files":[{"fileName":"BankItemStatsToggleConfig.java","content":"package com.toggleitemstats.banking;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"bankitemstatstoggle\")\npublic interface BankItemStatsToggleConfig extends Config\n{\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"consumableStats\",\n\t\t\tname \u003d \"Toggle consumable stats\",\n\t\t\tdescription \u003d \"Toggles tooltips for consumable items (food, boosts)\"\n\t)\n\tdefault boolean consumableStats()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"equipmentStats\",\n\t\t\tname \u003d \"Toggle equipment stats\",\n\t\t\tdescription \u003d \"Toggles tooltips for equipment items (combat bonuses, weight, prayer bonuses)\"\n\t)\n\tdefault boolean equipmentStats()\n\t{\n\t\treturn true;\n\t}\n}\n","filePath":"src\\main\\java\\com\\toggleitemstats\\banking\\BankItemStatsToggleConfig.java"},{"fileName":"BankItemStatsTogglePlugin.java","content":"package com.toggleitemstats.banking;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameState;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.WidgetClosed;\nimport net.runelite.api.events.WidgetLoaded;\nimport net.runelite.api.widgets.WidgetID;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Bank Item Stats Toggle\"\n)\npublic class BankItemStatsTogglePlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate BankItemStatsToggleConfig config;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tlog.info(\"Bank Item Stats Toggle started!\");\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tlog.info(\"Bank Item Stats Toggle stopped!\");\n\t}\n\n\t@Subscribe void onWidgetLoaded(WidgetLoaded event){\n\t\tif (event.getGroupId() \u003d\u003d WidgetID.BANK_GROUP_ID)\n\t\t{\n\t\t\tif (config.equipmentStats())\n\t\t\t{\n\t\t\t\tconfigManager.setConfiguration(\"itemstat\",\"equipmentStats\",true);\n\t\t\t}\n\n\t\t\tif (config.consumableStats())\n\t\t\t{\n\t\t\t\tconfigManager.setConfiguration(\"itemstat\",\"consumableStats\",true);\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe void onWidgetClosed(WidgetClosed event){\n\t\tif(event.getGroupId() \u003d\u003d WidgetID.BANK_GROUP_ID){\n\t\t\tif (config.equipmentStats())\n\t\t\t{\n\t\t\t\tconfigManager.setConfiguration(\"itemstat\",\"equipmentStats\",false);\n\t\t\t}\n\n\t\t\tif (config.consumableStats())\n\t\t\t{\n\t\t\t\tconfigManager.setConfiguration(\"itemstat\",\"consumableStats\",false);\n\t\t\t}\n\t\t}\n\t}\n\n\t@Provides\n\tBankItemStatsToggleConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(BankItemStatsToggleConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\com\\toggleitemstats\\banking\\BankItemStatsTogglePlugin.java"},{"fileName":"BankItemStatsTogglePluginTest.java","content":"package com.toggleitemstats.banking;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class BankItemStatsTogglePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(BankItemStatsTogglePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\toggleitemstats\\banking\\BankItemStatsTogglePluginTest.java"}]},{"commit":"13e1a7fea214cb04ff6dd7b0441f455f96f94d27","repository":"https://github.com/Krazune/LineOfSight.git","internalName":"line-of-sight","files":[{"fileName":"LineOfSightPlugin.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Miguel Sousa\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.krazune.lineofsight;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\n\n@PluginDescriptor(\n\tname \u003d \"Line of Sight\",\n\tdescription \u003d \"Shows the player\u0027s line of sight.\",\n\ttags \u003d {\n\t\t\"line\",\n\t\t\"sight\",\n\t\t\"tiles\",\n\t\t\"markers\",\n\t\t\"range\"\n\t}\n)\npublic class LineOfSightPlugin extends Plugin\n{\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate TilesOverlay lineOfSightTilesOverlay;\n\n\t@Provides\n\tLineOfSightPluginConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(LineOfSightPluginConfig.class);\n\t}\n\n\t@Override\n\tprotected void startUp()\n\t{\n\t\toverlayManager.add(lineOfSightTilesOverlay);\n\t}\n\n\t@Override\n\tprotected void shutDown()\n\t{\n\t\toverlayManager.remove(lineOfSightTilesOverlay);\n\t}\n}\n","filePath":"src\\main\\java\\com\\krazune\\lineofsight\\LineOfSightPlugin.java"},{"fileName":"LineOfSightPluginConfig.java","content":"/*\r\n * BSD 2-Clause License\r\n *\r\n * Copyright (c) 2021, Miguel Sousa\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer.\r\n *\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\r\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\r\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\r\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\r\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\npackage com.krazune.lineofsight;\r\n\r\nimport net.runelite.client.config.Alpha;\r\nimport net.runelite.client.config.Config;\r\nimport net.runelite.client.config.ConfigGroup;\r\nimport net.runelite.client.config.ConfigItem;\r\nimport net.runelite.client.config.ConfigSection;\r\nimport net.runelite.client.config.Range;\r\n\r\nimport java.awt.Color;\r\n\r\n@ConfigGroup(\"lineofsight\")\r\npublic interface LineOfSightPluginConfig extends Config\r\n{\r\n\t@ConfigSection(\r\n\t\tname \u003d \"General\",\r\n\t\tdescription \u003d \"General configurations\",\r\n\t\tposition \u003d 0\r\n\t)\r\n\tString generalSection \u003d \"General\";\r\n\r\n\t@ConfigSection(\r\n\t\tname \u003d \"Asymmetrical/PVP\",\r\n\t\tdescription \u003d \"Asymmetrical/PVP configurations\",\r\n\t\tposition \u003d 1,\r\n\t\tclosedByDefault \u003d true\r\n\t)\r\n\tString asymmetricalSection \u003d \"Asymmetrical/PVP\";\r\n\r\n\t@ConfigItem(\r\n\t\tposition \u003d 0,\r\n\t\tkeyName \u003d \"overlayRange\",\r\n\t\tname \u003d \"Range\",\r\n\t\tdescription \u003d \"Maximum range of the line of sight overlay.\",\r\n\t\tsection \u003d generalSection\r\n\t)\r\n\t@Range(\r\n\t\tmin \u003d 1,\r\n\t\tmax \u003d 10\r\n\t)\r\n\tdefault int overlayRange()\r\n\t{\r\n\t\treturn 10;\r\n\t}\r\n\r\n\t@ConfigItem(\r\n\t\tposition \u003d 1,\r\n\t\tkeyName \u003d \"outlineOnly\",\r\n\t\tname \u003d \"Outline only\",\r\n\t\tdescription \u003d \"Only show the outer borders.\",\r\n\t\tsection \u003d generalSection\r\n\t)\r\n\tdefault boolean outlineOnly()\r\n\t{\r\n\t\treturn false;\r\n\t}\r\n\r\n\t@ConfigItem(\r\n\t\tposition \u003d 2,\r\n\t\tkeyName \u003d \"includePlayerTile\",\r\n\t\tname \u003d \"Include player tile\",\r\n\t\tdescription \u003d \"Include the current player\u0027s tile in the line of sight area. WARNING: You do not actually have line of sight in this tile.\",\r\n\t\tsection \u003d generalSection\r\n\t)\r\n\tdefault boolean includePlayerTile()\r\n\t{\r\n\t\treturn false;\r\n\t}\r\n\r\n\t@ConfigItem(\r\n\t\tposition \u003d 3,\r\n\t\tkeyName \u003d \"borderColor\",\r\n\t\tname \u003d \"Border color\",\r\n\t\tdescription \u003d \"Color of the overlay\u0027s border.\",\r\n\t\tsection \u003d generalSection\r\n\t)\r\n\t@Alpha\r\n\tdefault Color borderColor()\r\n\t{\r\n\t\treturn Color.YELLOW;\r\n\t}\r\n\r\n\t@ConfigItem(\r\n\t\tposition \u003d 4,\r\n\t\tkeyName \u003d \"borderWidth\",\r\n\t\tname \u003d \"Border width\",\r\n\t\tdescription \u003d \"Width of the overlay\u0027s border.\",\r\n\t\tsection \u003d generalSection\r\n\t)\r\n\t@Range(\r\n\t\tmin \u003d 1\r\n\t)\r\n\tdefault int borderWidth()\r\n\t{\r\n\t\treturn 2;\r\n\t}\r\n\r\n\t// This is unnecessary, can be toggled based on fill alpha\r\n\t// Should be removed but might cause breaking changes (configurations) for current installations\r\n\t@ConfigItem(\r\n\t\tposition \u003d 5,\r\n\t\tkeyName \u003d \"showFill\",\r\n\t\tname \u003d \"Tile fill\",\r\n\t\tdescription \u003d \"Add fill color to tiles. WARNING: This is a costly feature that might lower your game\u0027s performance.\",\r\n\t\tsection \u003d generalSection\r\n\t)\r\n\tdefault boolean showFill()\r\n\t{\r\n\t\treturn false;\r\n\t}\r\n\r\n\t@ConfigItem(\r\n\t\tposition \u003d 6,\r\n\t\tkeyName \u003d \"fillColor\",\r\n\t\tname \u003d \"Fill color\",\r\n\t\tdescription \u003d \"Color of the overlay\u0027s tiles.\",\r\n\t\tsection \u003d generalSection\r\n\t)\r\n\t@Alpha\r\n\tdefault Color fillColor()\r\n\t{\r\n\t\treturn new Color(255, 255, 0, 45);\r\n\t}\r\n\r\n\t@ConfigItem(\r\n\t\tposition \u003d 0,\r\n\t\tkeyName \u003d \"includeAsymmetrical\",\r\n\t\tname \u003d \"Include asymmetrical/PVP tiles\",\r\n\t\tdescription \u003d \"Includes tiles that have line of sight to the player (this is how line of sight is calculated in PVP).\",\r\n\t\tsection \u003d asymmetricalSection\r\n\t)\r\n\tdefault boolean includeAsymmetrical()\r\n\t{\r\n\t\treturn false;\r\n\t}\r\n\r\n\t@ConfigItem(\r\n\t\tposition \u003d 1,\r\n\t\tkeyName \u003d \"asymmetricalBorderColor\",\r\n\t\tname \u003d \"Border color\",\r\n\t\tdescription \u003d \"Color of the overlay\u0027s border.\",\r\n\t\tsection \u003d asymmetricalSection\r\n\t)\r\n\t@Alpha\r\n\tdefault Color asymmetricalBorderColor()\r\n\t{\r\n\t\treturn Color.RED;\r\n\t}\r\n\r\n\t@ConfigItem(\r\n\t\tposition \u003d 2,\r\n\t\tkeyName \u003d \"asymmetricalBorderWidth\",\r\n\t\tname \u003d \"Border width\",\r\n\t\tdescription \u003d \"Color of the overlay\u0027s border.\",\r\n\t\tsection \u003d asymmetricalSection\r\n\t)\r\n\t@Range(\r\n\t\t\tmin \u003d 1\r\n\t)\r\n\tdefault int asymmetricalBorderWidth()\r\n\t{\r\n\t\treturn 2;\r\n\t}\r\n\r\n\t@ConfigItem(\r\n\t\tposition \u003d 3,\r\n\t\tkeyName \u003d \"showAsymmetricalFill\",\r\n\t\tname \u003d \"Tile fill\",\r\n\t\tdescription \u003d \"Add fill color to tiles. WARNING: This is a costly feature that might lower your game\u0027s performance.\",\r\n\t\tsection \u003d asymmetricalSection\r\n\t)\r\n\tdefault boolean showAsymmetricalFill()\r\n\t{\r\n\t\treturn false;\r\n\t}\r\n\r\n\t@ConfigItem(\r\n\t\tposition \u003d 4,\r\n\t\tkeyName \u003d \"asymmetricalFillColor\",\r\n\t\tname \u003d \"Fill color\",\r\n\t\t\tdescription \u003d \"Color of the overlay\u0027s tiles.\",\r\n\t\tsection \u003d asymmetricalSection\r\n\t)\r\n\t@Alpha\r\n\tdefault Color asymmetricalFillColor()\r\n\t{\r\n\t\treturn new Color(255, 0, 0, 45);\r\n\t}\r\n}\r\n","filePath":"src\\main\\java\\com\\krazune\\lineofsight\\LineOfSightPluginConfig.java"},{"fileName":"TilesOverlay.java","content":"/*\r\n * BSD 2-Clause License\r\n *\r\n * Copyright (c) 2021, Miguel Sousa\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice, this\r\n *    list of conditions and the following disclaimer.\r\n *\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\r\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\r\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\r\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\r\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\r\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\npackage com.krazune.lineofsight;\r\n\r\nimport java.awt.BasicStroke;\r\nimport java.awt.Color;\r\nimport java.awt.Dimension;\r\nimport java.awt.Graphics2D;\r\nimport java.awt.Polygon;\r\nimport java.awt.Stroke;\r\nimport javax.inject.Inject;\r\n\r\nimport net.runelite.api.Client;\r\nimport net.runelite.api.CollisionDataFlag;\r\nimport net.runelite.api.Perspective;\r\nimport net.runelite.api.Player;\r\nimport net.runelite.api.Point;\r\nimport net.runelite.api.WorldView;\r\nimport net.runelite.api.coords.LocalPoint;\r\nimport net.runelite.api.coords.WorldArea;\r\nimport net.runelite.api.coords.WorldPoint;\r\nimport net.runelite.client.ui.overlay.Overlay;\r\nimport net.runelite.client.ui.overlay.OverlayLayer;\r\nimport net.runelite.client.ui.overlay.OverlayPosition;\r\nimport net.runelite.client.ui.overlay.OverlayUtil;\r\n\r\n// One day I will refactor this mess but today is not that day\r\npublic class TilesOverlay extends Overlay\r\n{\r\n\tClient client;\r\n\r\n\tLineOfSightPluginConfig config;\r\n\r\n\t@Inject\r\n\tpublic TilesOverlay(Client client, LineOfSightPluginConfig config)\r\n\t{\r\n\t\tthis.client \u003d client;\r\n\t\tthis.config \u003d config;\r\n\r\n\t\tsetOverlayConfigurations();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic Dimension render(Graphics2D graphics)\r\n\t{\r\n\t\tif (config.includeAsymmetrical())\r\n\t\t{\r\n\t\t\t// It\u0027s not efficient to render these separately from the regular LOS, but will do for now\r\n\t\t\trenderAsymmetricalLineOfSight(graphics);\r\n\t\t}\r\n\r\n\t\trenderLineOfSight(graphics);\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\tprivate void setOverlayConfigurations()\r\n\t{\r\n\t\tsetPosition(OverlayPosition.DYNAMIC);\r\n\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\r\n\t}\r\n\r\n\tprivate void renderAsymmetricalLineOfSight(Graphics2D graphics)\r\n\t{\r\n\t\tWorldPoint[][] asymmetricalSightPoints \u003d getAsymmetricalSightWorldPoints();\r\n\r\n\t\trenderWorldPoints(\r\n\t\t\tgraphics,\r\n\t\t\tasymmetricalSightPoints,\r\n\t\t\tconfig.outlineOnly(),\r\n\t\t\tconfig.showAsymmetricalFill(),\r\n\t\t\tconfig.asymmetricalFillColor(),\r\n\t\t\tconfig.asymmetricalBorderColor(),\r\n\t\t\tconfig.asymmetricalBorderWidth()\r\n\t\t);\r\n\t}\r\n\r\n\tprivate void renderLineOfSight(Graphics2D graphics)\r\n\t{\r\n\t\tWorldPoint[][] sightPoints \u003d getSightWorldPoints(config.includePlayerTile());\r\n\r\n\t\trenderWorldPoints(\r\n\t\t\tgraphics,\r\n\t\t\tsightPoints,\r\n\t\t\tconfig.outlineOnly(),\r\n\t\t\tconfig.showFill(),\r\n\t\t\tconfig.fillColor(),\r\n\t\t\tconfig.borderColor(),\r\n\t\t\tconfig.borderWidth()\r\n\t\t);\r\n\t}\r\n\r\n\tprivate void renderWorldPoints(Graphics2D graphics, WorldPoint[][] sightPoints, boolean outlineOnly, boolean showFill, Color fillColor, Color borderColor, int borderWidth)\r\n\t{\r\n\t\tif (outlineOnly)\r\n\t\t{\r\n\t\t\trenderOutlineWorldPoints(graphics, sightPoints, showFill, fillColor, borderColor, borderWidth);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\trenderWorldPointsFullGrid(graphics, sightPoints, showFill, fillColor, borderColor, borderWidth);\r\n\t}\r\n\r\n\tprivate WorldPoint[][] getSightWorldPoints(boolean includePlayerTile)\r\n\t{\r\n\t\tint areaLength \u003d config.overlayRange() * 2 + 1;\r\n\t\tWorldPoint[][] worldPoints \u003d new WorldPoint[areaLength][areaLength];\r\n\r\n\t\tPlayer player \u003d client.getLocalPlayer();\r\n\r\n\t\tif (player \u003d\u003d null)\r\n\t\t{\r\n\t\t\treturn worldPoints;\r\n\t\t}\r\n\r\n\t\tWorldArea area \u003d player.getWorldArea();\r\n\r\n\t\tif (area \u003d\u003d null)\r\n\t\t{\r\n\t\t\treturn worldPoints;\r\n\t\t}\r\n\r\n\t\tint initialX \u003d area.getX() - config.overlayRange();\r\n\t\tint initialY \u003d area.getY() - config.overlayRange();\r\n\t\tint maxX \u003d area.getX() + config.overlayRange();\r\n\t\tint maxY \u003d area.getY() + config.overlayRange();\r\n\t\tWorldView worldView \u003d client.getTopLevelWorldView();\r\n\r\n\t\tfor (int x \u003d initialX, i \u003d 0; x \u003c\u003d maxX; ++x, ++i)\r\n\t\t{\r\n\t\t\tfor (int y \u003d initialY, j \u003d 0; y \u003c\u003d maxY; ++y, ++j)\r\n\t\t\t{\r\n\t\t\t\tWorldPoint newSightWorldPoint \u003d new WorldPoint(x, y, area.getPlane());\r\n\r\n\t\t\t\tif (area.hasLineOfSightTo(worldView, newSightWorldPoint) || (x \u003d\u003d area.getX() \u0026\u0026 y \u003d\u003d area.getY() \u0026\u0026 includePlayerTile))\r\n\t\t\t\t{\r\n\t\t\t\t\tworldPoints[i][j] \u003d newSightWorldPoint;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn worldPoints;\r\n\t}\r\n\r\n\tprivate WorldPoint[][] getAsymmetricalSightWorldPoints()\r\n\t{\r\n\t\tint areaLength \u003d config.overlayRange() * 2 + 1;\r\n\t\tWorldPoint[][] worldPoints \u003d new WorldPoint[areaLength][areaLength];\r\n\r\n\t\tPlayer player \u003d client.getLocalPlayer();\r\n\r\n\t\tif (player \u003d\u003d null)\r\n\t\t{\r\n\t\t\treturn worldPoints;\r\n\t\t}\r\n\r\n\t\tWorldArea area \u003d player.getWorldArea();\r\n\r\n\t\tif (area \u003d\u003d null)\r\n\t\t{\r\n\t\t\treturn worldPoints;\r\n\t\t}\r\n\r\n\t\tint initialX \u003d area.getX() - config.overlayRange();\r\n\t\tint initialY \u003d area.getY() - config.overlayRange();\r\n\t\tint maxX \u003d area.getX() + config.overlayRange();\r\n\t\tint maxY \u003d area.getY() + config.overlayRange();\r\n\t\tWorldView worldView \u003d client.getTopLevelWorldView();\r\n\t\tint[][] collisionFlags \u003d worldView.getCollisionMaps()[area.getPlane()].getFlags();\r\n\r\n\t\tfor (int x \u003d initialX, i \u003d 0; x \u003c\u003d maxX; ++x, ++i)\r\n\t\t{\r\n\t\t\tfor (int y \u003d initialY, j \u003d 0; y \u003c\u003d maxY; ++y, ++j)\r\n\t\t\t{\r\n\t\t\t\tif ((x \u003d\u003d area.getX() \u0026\u0026 y \u003d\u003d area.getY()))\r\n\t\t\t\t{\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tWorldPoint newSightWorldPoint \u003d new WorldPoint(x, y, area.getPlane());\r\n\t\t\t\tboolean hasSight \u003d area.hasLineOfSightTo(worldView, newSightWorldPoint);\r\n\t\t\t\tboolean hasSightFromTarget \u003d newSightWorldPoint.toWorldArea().hasLineOfSightTo(worldView, area.toWorldPoint());\r\n\r\n\t\t\t\tif (!hasSight \u0026\u0026 hasSightFromTarget)\r\n\t\t\t\t{\r\n\t\t\t\t\tLocalPoint localPoint \u003d LocalPoint.fromWorld(worldView, newSightWorldPoint);\r\n\t\t\t\t\tint collisionFlag \u003d collisionFlags[localPoint.getSceneX()][localPoint.getSceneY()];\r\n\r\n\t\t\t\t\tif ((collisionFlag \u0026 CollisionDataFlag.BLOCK_LINE_OF_SIGHT_FULL) \u003d\u003d 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tworldPoints[i][j] \u003d newSightWorldPoint;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn worldPoints;\r\n\t}\r\n\r\n\tprivate void renderOutlineWorldPoints(Graphics2D graphics, WorldPoint[][] sightPoints, boolean showFill, Color fillColor, Color borderColor, int borderWidth)\r\n\t{\r\n\t\tint areaLength \u003d config.overlayRange() * 2 + 1;\r\n\r\n\t\tfor (int x \u003d 0; x \u003c areaLength; ++x)\r\n\t\t{\r\n\t\t\tfor (int y \u003d 0; y \u003c areaLength; ++y)\r\n\t\t\t{\r\n\t\t\t\tif (sightPoints[x][y] \u003d\u003d null)\r\n\t\t\t\t{\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (showFill)\r\n\t\t\t\t{\r\n\t\t\t\t\tPolygon tilePolygon \u003d generatePolygonFromWorldPoint(sightPoints[x][y]);\r\n\r\n\t\t\t\t\tif (tilePolygon !\u003d null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tgraphics.setColor(fillColor);\r\n\t\t\t\t\t\tgraphics.fill(tilePolygon);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tboolean topBorder \u003d y \u003d\u003d areaLength - 1 || sightPoints[x][y + 1] \u003d\u003d null;\r\n\t\t\t\tboolean rightBorder \u003d x \u003d\u003d areaLength - 1 || sightPoints[x + 1][y] \u003d\u003d null;\r\n\t\t\t\tboolean bottomBorder \u003d y \u003d\u003d 0 || sightPoints[x][y - 1] \u003d\u003d null;\r\n\t\t\t\tboolean leftBorder \u003d x \u003d\u003d 0 || sightPoints[x - 1][y] \u003d\u003d null;\r\n\r\n\t\t\t\trenderWorldPointBorders(graphics, sightPoints[x][y], topBorder, rightBorder, bottomBorder, leftBorder, borderColor, borderWidth);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate Polygon generatePolygonFromWorldPoint(WorldPoint worldPoint)\r\n\t{\r\n\t\tLocalPoint localPoint \u003d LocalPoint.fromWorld(client.getTopLevelWorldView(), worldPoint);\r\n\r\n\t\tif (localPoint \u003d\u003d null)\r\n\t\t{\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn Perspective.getCanvasTilePoly(client, localPoint);\r\n\t}\r\n\r\n\tprivate void renderWorldPointBorders(Graphics2D graphics, WorldPoint worldPoint, boolean topBorder, boolean rightBorder, boolean bottomBorder, boolean leftBorder, Color borderColor, int borderWidth)\r\n\t{\r\n\t\tWorldView worldView \u003d client.getTopLevelWorldView();\r\n\t\tLocalPoint localPoint \u003d LocalPoint.fromWorld(worldView, worldPoint);\r\n\r\n\t\tif (localPoint \u003d\u003d null)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tint plane \u003d worldPoint.getPlane();\r\n\r\n\t\tgraphics.setColor(borderColor);\r\n\t\tgraphics.setStroke(new BasicStroke(borderWidth));\r\n\r\n\t\tif (topBorder)\r\n\t\t{\r\n\t\t\tPoint canvasPointA \u003d Perspective.localToCanvas(client, new LocalPoint(localPoint.getX() - 64, localPoint.getY() + 64, worldView), plane);\r\n\r\n\t\t\tif (canvasPointA !\u003d null)\r\n\t\t\t{\r\n\t\t\t\tint x1 \u003d canvasPointA.getX();\r\n\t\t\t\tint y1 \u003d canvasPointA.getY();\r\n\r\n\t\t\t\tPoint canvasPointB \u003d Perspective.localToCanvas(client, new LocalPoint(localPoint.getX() + 64, localPoint.getY() + 64, worldView), plane);\r\n\r\n\t\t\t\tif (canvasPointB !\u003d null)\r\n\t\t\t\t{\r\n\t\t\t\t\tint x2 \u003d canvasPointB.getX();\r\n\t\t\t\t\tint y2 \u003d canvasPointB.getY();\r\n\r\n\t\t\t\t\tgraphics.drawLine(x1, y1, x2, y2);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (rightBorder)\r\n\t\t{\r\n\t\t\tPoint canvasPointA \u003d Perspective.localToCanvas(client, new LocalPoint(localPoint.getX() + 64, localPoint.getY() - 64, worldView), plane);\r\n\r\n\t\t\tif (canvasPointA !\u003d null)\r\n\t\t\t{\r\n\t\t\t\tint x1 \u003d canvasPointA.getX();\r\n\t\t\t\tint y1 \u003d canvasPointA.getY();\r\n\r\n\t\t\t\tPoint canvasPointB \u003d Perspective.localToCanvas(client, new LocalPoint(localPoint.getX() + 64, localPoint.getY() + 64, worldView), plane);\r\n\r\n\t\t\t\tif (canvasPointB !\u003d null)\r\n\t\t\t\t{\r\n\t\t\t\t\tint x2 \u003d canvasPointB.getX();\r\n\t\t\t\t\tint y2 \u003d canvasPointB.getY();\r\n\r\n\t\t\t\t\tgraphics.drawLine(x1, y1, x2, y2);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (bottomBorder)\r\n\t\t{\r\n\t\t\tPoint canvasPointA \u003d Perspective.localToCanvas(client, new LocalPoint(localPoint.getX() - 64, localPoint.getY() - 64, worldView), plane);\r\n\r\n\t\t\tif (canvasPointA !\u003d null)\r\n\t\t\t{\r\n\t\t\t\tint x1 \u003d canvasPointA.getX();\r\n\t\t\t\tint y1 \u003d canvasPointA.getY();\r\n\r\n\t\t\t\tPoint canvasPointB \u003d Perspective.localToCanvas(client, new LocalPoint(localPoint.getX() + 64, localPoint.getY() - 64, worldView), plane);\r\n\r\n\t\t\t\tif (canvasPointB !\u003d null)\r\n\t\t\t\t{\r\n\t\t\t\t\tint x2 \u003d canvasPointB.getX();\r\n\t\t\t\t\tint y2 \u003d canvasPointB.getY();\r\n\r\n\t\t\t\t\tgraphics.drawLine(x1, y1, x2, y2);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (leftBorder)\r\n\t\t{\r\n\t\t\tPoint canvasPointA \u003d Perspective.localToCanvas(client, new LocalPoint(localPoint.getX() - 64, localPoint.getY() - 64, worldView), plane);\r\n\r\n\t\t\tif (canvasPointA !\u003d null)\r\n\t\t\t{\r\n\t\t\t\tint x1 \u003d canvasPointA.getX();\r\n\t\t\t\tint y1 \u003d canvasPointA.getY();\r\n\r\n\t\t\t\tPoint canvasPointB \u003d Perspective.localToCanvas(client, new LocalPoint(localPoint.getX() - 64, localPoint.getY() + 64, worldView), plane);\r\n\r\n\t\t\t\tif (canvasPointB !\u003d null)\r\n\t\t\t\t{\r\n\t\t\t\t\tint x2 \u003d canvasPointB.getX();\r\n\t\t\t\t\tint y2 \u003d canvasPointB.getY();\r\n\r\n\t\t\t\t\tgraphics.drawLine(x1, y1, x2, y2);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate void renderWorldPointsFullGrid(Graphics2D graphics, WorldPoint[][] sightPoints, boolean showFill, Color fillColor, Color borderColor, int borderWidth)\r\n\t{\r\n\t\tint areaLength \u003d config.overlayRange() * 2 + 1;\r\n\t\tColor transparent \u003d new Color(0, 0, 0, 0);\r\n\t\tStroke stroke \u003d new BasicStroke(borderWidth);\r\n\r\n\t\tfor (int x \u003d 0; x \u003c areaLength; ++x)\r\n\t\t{\r\n\t\t\tfor (int y \u003d 0; y \u003c areaLength; ++y)\r\n\t\t\t{\r\n\t\t\t\tif (sightPoints[x][y] \u003d\u003d null)\r\n\t\t\t\t{\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tPolygon polygon \u003d generatePolygonFromWorldPoint(sightPoints[x][y]);\r\n\r\n\t\t\t\tif (polygon \u003d\u003d null)\r\n\t\t\t\t{\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (showFill)\r\n\t\t\t\t{\r\n\t\t\t\t\tOverlayUtil.renderPolygon(graphics, polygon, borderColor, fillColor, stroke);\r\n\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (x \u003d\u003d 0 || x \u003d\u003d areaLength - 1 || y \u003d\u003d 0 || y \u003d\u003d areaLength - 1 || sightPoints[x + 1][y] \u003d\u003d null || sightPoints[x - 1][y] \u003d\u003d null || sightPoints[x][y + 1] \u003d\u003d null || sightPoints[x][y - 1] \u003d\u003d null)\r\n\t\t\t\t{\r\n\t\t\t\t\tOverlayUtil.renderPolygon(graphics, polygon, borderColor, transparent, stroke);\r\n\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsightPoints[x][y] \u003d null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","filePath":"src\\main\\java\\com\\krazune\\lineofsight\\TilesOverlay.java"},{"fileName":"LineOfSightPluginTest.java","content":"/*\n * BSD 2-Clause License\n *\n * Copyright (c) 2021, Miguel Sousa\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.krazune.lineofsight;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class LineOfSightPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(LineOfSightPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}\n","filePath":"src\\test\\java\\com\\krazune\\lineofsight\\LineOfSightPluginTest.java"}]},{"commit":"5a78264720b00e9e79f47f17e402953941c2b026","repository":"https://github.com/MarbleTurtle/FriendsExporter.git","internalName":"friends-exporter","files":[{"fileName":"FriendsExporterConfig.java","content":"package com.FriendsExporter;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\n\n@ConfigGroup(\"friendsexporter\")\npublic interface FriendsExporterConfig extends Config\n{\n\t@ConfigItem(\n\t\tkeyName \u003d \"lineStart\",\n\t\tname \u003d \"Line Start\",\n\t\tdescription \u003d \"What format to add at the beginning of a line.\",\n\t\tposition \u003d 1\n\t)\n\tdefault LineLeads lineLeads() {return LineLeads.None;}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"prev\",\n\t\tname \u003d \"Include Previous Names\",\n\t\tdescription \u003d \"Shows the previous name if available.\",\n\t\tposition \u003d 2\n\t)\n\tdefault boolean includePrevName() {return true;}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"note\",\n\t\tname \u003d \"Include Note\",\n\t\tdescription \u003d \"Includes note from Friend Notes plugin on Friends List export.\",\n\t\tposition \u003d 3\n\t)\n\tdefault boolean includeNote() {return true;}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"unrank\",\n\t\tname \u003d \"Show Unranked Players\",\n\t\tdescription \u003d \"Shows players that do not have a rank but are still friends in ranks export.\",\n\t\tposition \u003d 4\n\t)\n\tdefault boolean showUnranked() {return false;}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"separator\",\n\t\tname \u003d \"Separator\",\n\t\tdescription \u003d \"Separator between fields for a player.\",\n\t\tposition \u003d 5\n\t)\n\tdefault String getSeparator() {return \" - \";}\n}\n","filePath":"src\\main\\java\\com\\FriendsExporter\\FriendsExporterConfig.java"},{"fileName":"FriendsExporterPlugin.java","content":"package com.FriendsExporter;\n\nimport com.google.inject.Provides;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.ChatMessageType;\nimport net.runelite.api.Client;\nimport net.runelite.api.Friend;\nimport net.runelite.api.FriendsChatManager;\nimport net.runelite.api.FriendsChatMember;\nimport net.runelite.api.Ignore;\nimport net.runelite.api.Player;\nimport net.runelite.api.clan.ClanChannelMember;\nimport net.runelite.api.gameval.InterfaceID;\nimport net.runelite.api.widgets.Widget;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.menus.MenuManager;\nimport net.runelite.client.menus.WidgetMenuOption;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.util.Text;\nimport org.apache.commons.lang3.StringUtils;\n\nimport javax.inject.Inject;\nimport java.io.BufferedWriter;\nimport java.io.File;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.text.DateFormat;\nimport java.text.SimpleDateFormat;\nimport java.util.ArrayList;\nimport java.util.Comparator;\nimport java.util.Date;\nimport java.util.List;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.stream.Collectors;\n\nimport static net.runelite.client.RuneLite.RUNELITE_DIR;\n\n@Slf4j\n@PluginDescriptor(\n        name \u003d \"Friends Exporter\"\n)\npublic class FriendsExporterPlugin extends Plugin {\n\n    private static final String EXPORT \u003d \"Export\";\n    public static final File EXPORT_DIR \u003d new File(RUNELITE_DIR, \"player-exports\");\n\n    private static final WidgetMenuOption FRIENDS_LIST\n            \u003d new WidgetMenuOption(EXPORT, \"Friends List\", InterfaceID.Toplevel.STONE9, InterfaceID.ToplevelOsrsStretch.STONE9, InterfaceID.ToplevelPreEoc.STONE9);\n\n    private static final WidgetMenuOption IGNORE_LIST\n            \u003d new WidgetMenuOption(EXPORT, \"Ignore List\", InterfaceID.Toplevel.STONE9, InterfaceID.ToplevelOsrsStretch.STONE9, InterfaceID.ToplevelPreEoc.STONE9);\n\n    private static final WidgetMenuOption CHAT_CHANNEL_LIST\n            \u003d new WidgetMenuOption(EXPORT, \"Current Members\", InterfaceID.SideChannels.TAB_0);\n\n    private static final WidgetMenuOption CHAT_CHANNEL_RANKS\n            \u003d new WidgetMenuOption(EXPORT, \"Rank List\", InterfaceID.SideChannels.TAB_0);\n\n    private static final WidgetMenuOption CLAN_CHAT_MEMBERS\n            \u003d new WidgetMenuOption(EXPORT, \"Online Clan Members\", InterfaceID.SideChannels.TAB_1);\n\n    private static final WidgetMenuOption CLAN_CHAT_JOINS\n            \u003d new WidgetMenuOption(EXPORT, \"All Clan Members\", InterfaceID.SideChannels.TAB_1);\n\n    private static final WidgetMenuOption CLAN_CHAT_BANS\n            \u003d new WidgetMenuOption(EXPORT, \"Clan Bans\", InterfaceID.SideChannels.TAB_1);\n\n    private static final WidgetMenuOption CLAN_CHAT_EVENTS\n            \u003d new WidgetMenuOption(EXPORT, \"Clan Events\", InterfaceID.SideChannels.TAB_1);\n\n    private static final WidgetMenuOption EMOTES\n            \u003d new WidgetMenuOption(EXPORT, \"Local Players\", InterfaceID.Toplevel.STONE12, InterfaceID.ToplevelOsrsStretch.STONE12, InterfaceID.ToplevelPreEoc.STONE12);\n\n    private static final DateFormat TIME_FORMAT \u003d new SimpleDateFormat(\"yyyy-MM-dd_HH-mm-ss\");\n    @Inject\n    private Client client;\n    @Inject\n    private MenuManager menuManager;\n    @Inject\n    private FriendsExporterConfig config;\n    @Inject\n    private ConfigManager configManager;\n    @Inject\n    private ScheduledExecutorService executor;\n\n    @Override\n    protected void startUp() throws Exception {\n        EXPORT_DIR.mkdirs();\n        addCustomOptions();\n    }\n\n    @Override\n    protected void shutDown() throws Exception {\n        removeCustomOptions();\n    }\n\n    static String format(Date date) {\n        synchronized(TIME_FORMAT) {\n            return TIME_FORMAT.format(date);\n        }\n    }\n\n    private void addCustomOptions() {\n        menuManager.addManagedCustomMenu(FRIENDS_LIST, e -\u003e exportFriendsList());\n        menuManager.addManagedCustomMenu(IGNORE_LIST, e -\u003e exportIgnoreList());\n        menuManager.addManagedCustomMenu(CHAT_CHANNEL_LIST, e -\u003e exportChatChannelMembers());\n        menuManager.addManagedCustomMenu(CHAT_CHANNEL_RANKS, e -\u003e exportChatChannelRankList());\n        menuManager.addManagedCustomMenu(CLAN_CHAT_MEMBERS, e -\u003e exportOnlineClanMembers());\n        menuManager.addManagedCustomMenu(CLAN_CHAT_JOINS, e -\u003e exportAllClanMembers());\n        menuManager.addManagedCustomMenu(CLAN_CHAT_BANS, e -\u003e exportClanBanList());\n        menuManager.addManagedCustomMenu(CLAN_CHAT_EVENTS, e -\u003e exportClanEventList());\n        menuManager.addManagedCustomMenu(EMOTES, e -\u003e exportLocalPlayers());\n    }\n\n    private void removeCustomOptions() {\n        menuManager.removeManagedCustomMenu(FRIENDS_LIST);\n        menuManager.removeManagedCustomMenu(IGNORE_LIST);\n        menuManager.removeManagedCustomMenu(CHAT_CHANNEL_LIST);\n        menuManager.removeManagedCustomMenu(CHAT_CHANNEL_RANKS);\n        menuManager.removeManagedCustomMenu(CLAN_CHAT_MEMBERS);\n        menuManager.removeManagedCustomMenu(CLAN_CHAT_JOINS);\n        menuManager.removeManagedCustomMenu(CLAN_CHAT_BANS);\n        menuManager.removeManagedCustomMenu(CLAN_CHAT_EVENTS);\n        menuManager.removeManagedCustomMenu(EMOTES);\n    }\n\n    /**\n     * Exports the player\u0027s Friends List.\n     */\n    private void exportFriendsList() {\n        String filename \u003d client.getLocalPlayer().getName() + \" Friends \" + format(new Date()) + \".txt\";\n        Friend[] array \u003d client.getFriendContainer().getMembers();\n        List\u003cPlayerListItem\u003e playerList \u003d new ArrayList\u003c\u003e();\n        for (int i \u003d 0; i !\u003d client.getFriendContainer().getMembers().length; ++i) {\n            PlayerListItem playerListItem \u003d new PlayerListItem();\n            playerListItem.setName(array[i].getName());\n            if (!StringUtils.isEmpty(array[i].getPrevName()) \u0026\u0026 config.includePrevName()) {\n                playerListItem.setPreviousName(array[i].getPrevName());\n            }\n            if (config.includeNote()) {\n                playerListItem.setNote(configManager.getConfiguration(\"friendNotes\", \"note_\" + playerListItem.getName()));\n            }\n            playerList.add(playerListItem);\n        }\n        exportList(filename, playerList);\n    }\n\n\n    /**\n     * Exports the player\u0027s Ignore List.\n     */\n    private void exportIgnoreList() {\n        String filename \u003d client.getLocalPlayer().getName() + \" Ignore \" + format(new Date()) + \".txt\";\n        Ignore[] array \u003d client.getIgnoreContainer().getMembers();\n        List\u003cPlayerListItem\u003e playerList \u003d new ArrayList\u003c\u003e();\n        for (int i \u003d 0; i !\u003d array.length; ++i) {\n            PlayerListItem playerListItem \u003d new PlayerListItem();\n            playerListItem.setName(array[i].getName());\n            if (!StringUtils.isEmpty(array[i].getPrevName()) \u0026\u0026 config.includePrevName()) {\n                playerListItem.setPreviousName(array[i].getPrevName());\n            }\n            if (config.includeNote()) {\n                playerListItem.setNote(configManager.getConfiguration(\"friendNotes\", \"note_\" + playerListItem.getName()));\n            }\n            playerList.add(playerListItem);\n        }\n        exportList(filename, playerList);\n    }\n\n\n    /**\n     * Exports all members of the player\u0027s own chat-channel. Requires the Chat-channel Setup widget to be open.\n     */\n    private void exportChatChannelRankList() {\n        Friend[] friendsList \u003d client.getFriendContainer().getMembers();\n        Widget channelSetupListWidget \u003d client.getWidget(InterfaceID.ChatchannelSetup.LIST);\n\n        if (channelSetupListWidget \u003d\u003d null) {\n            client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"Please open Chat-channel Setup found in the Chat-channel tab to export this list.\", \"\");\n            return;\n        }\n\n        Widget[] children \u003d channelSetupListWidget.getChildren();\n        if (children \u003d\u003d null) return;\n\n        List\u003cPlayerListItem\u003e playerList \u003d new ArrayList\u003c\u003e();\n\n        for (int i \u003d 0; i \u003c children.length/4; ++i) {\n            String rank \u003d children[(i * 4) + 1].getText();\n            if(!rank.equals(\"Not ranked\") || config.showUnranked()) {\n                String prevName \u003d \"\";\n                if (config.includePrevName()) {\n                    for (Friend friend : friendsList) {\n                        String friendName \u003d friend.getName();\n                        if (friendName.equals(children[(i * 4) + 2].getText())) {\n                            if (!StringUtils.isEmpty(friend.getPrevName())) {\n                                prevName \u003d friend.getPrevName();\n                            }\n                            break;\n                        }\n                    }\n                }\n\n                PlayerListItem playerListItem \u003d new PlayerListItem();\n                playerListItem.setName(children[(i * 4) + 2].getText());\n                playerListItem.setPreviousName(prevName);\n                playerListItem.setRank(!rank.equals(\"Not ranked\") ? rank : \"No Rank\");\n\n                playerList.add(playerListItem);\n            }\n        }\n        String filename \u003d client.getLocalPlayer().getName() + \" Ranks \" + format(new Date()) + \".txt\";\n        exportList(filename, playerList);\n    }\n\n    /**\n     * Exports players in the current Chat Channel. Player must be in a Chat Channel to have this available to them.\n     * Drops a message in the Game chat if the player is not currently in a Chat Channel.\n     *\n     * This was previously known as Friends Chat.\n     */\n    private void exportChatChannelMembers() {\n        FriendsChatManager manager \u003d client.getFriendsChatManager();\n        if (manager \u003d\u003d null) {\n            client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"Please join a Chat-channel to export this list.\", \"\");\n            return;\n        }\n\n        FriendsChatMember[] members \u003d manager.getMembers();\n        List\u003cPlayerListItem\u003e playerList \u003d new ArrayList\u003c\u003e();\n        for (int i \u003d 0; i !\u003d client.getFriendsChatManager().getMembers().length; ++i) {\n            String friendName \u003d members[i].getName();\n            PlayerListItem playerListItem \u003d new PlayerListItem();\n            playerListItem.setName(friendName);\n            playerList.add(playerListItem);\n        }\n        String filename \u003d manager.getOwner() + \" Members \" + format(new Date()) + \".txt\";\n        exportList(filename, playerList);\n    }\n\n    /**\n     * Exports loaded players around the user in-game.\n     */\n    private void exportLocalPlayers() {\n        List\u003cPlayer\u003e array \u003d client.getPlayers();\n        List\u003cPlayerListItem\u003e playerList \u003d new ArrayList\u003c\u003e();\n        for (int i \u003d 0; i !\u003d array.size(); ++i) {\n            String localName \u003d array.get(i).getName();\n            if(!localName.matches(client.getLocalPlayer().getName())) {\n                PlayerListItem playerListItem \u003d new PlayerListItem();\n                playerListItem.setName(localName);\n                playerList.add(playerListItem);\n            }\n        }\n        String filename \u003d client.getLocalPlayer().getName() + \" Local \" + format(new Date()) + \".txt\";\n        exportList(filename, playerList);\n    }\n\n    /**\n     * Exports currently online clan members.\n     */\n    private void exportOnlineClanMembers() {\n        List\u003cPlayerListItem\u003e playerList \u003d client.getClanChannel().getMembers().stream()\n                .sorted(Comparator.comparingInt((ClanChannelMember member) -\u003e member.getRank().getRank()).reversed()\n                        .thenComparing(ClanChannelMember::getName, String::compareToIgnoreCase))\n                .map((ClanChannelMember clanmate) -\u003e {\n                    PlayerListItem playerListItem \u003d new PlayerListItem();\n                    playerListItem.setName(clanmate.getName());\n                    playerListItem.setRank(client.getClanSettings().titleForRank(clanmate.getRank()).getName());\n                    return playerListItem;\n                })\n                .collect(Collectors.toList());\n        String filename \u003d client.getClanChannel().getName() + \" Members \" + format(new Date()) + \".txt\";\n        exportList(filename, playerList);\n    }\n\n    /**\n     * Exports the full list of current clan members, not just online. Requires the clan \"Members\" menu to be open.\n     * Drops a message into game chat if required Widget is not open.\n     */\n    private void exportAllClanMembers() {\n        Widget clanListWidget \u003d client.getWidget(InterfaceID.ClansMembers.NAME);\n        if (clanListWidget \u003d\u003d null) {\n            client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"Please open clan settings and navigate to the Members tab.\", \"\");\n            return;\n        }\n\n        Widget[] clanList \u003d clanListWidget.getChildren();\n\n        List\u003cPlayerListItem\u003e playerList \u003d new ArrayList\u003c\u003e();\n        for (int i \u003d 1; i \u003c clanList.length; i+\u003d3) {\n            PlayerListItem playerListItem \u003d new PlayerListItem();\n            playerListItem.setName(clanList[i].getText());\n            playerList.add(playerListItem);\n        }\n        String filename \u003d client.getClanChannel().getName() + \" Full Member List \" + format(new Date()) + \".txt\";\n        exportList(filename, playerList);\n    }\n\n    /**\n     * Exports the ban list for your clan. Drops a message in game chat if the Clan Banlist isn\u0027t open.\n     */\n    private void exportClanBanList() {\n        Widget clanBanListWidget \u003d client.getWidget(InterfaceID.ClansBanned.LIST_CONTENTS);\n        if (clanBanListWidget \u003d\u003d null) {\n            client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"Please open clan settings and navigate to the Bans tab.\", \"\");\n            return;\n        }\n\n        int banSize \u003d clanBanListWidget.getDynamicChildren().length/2;\n        List\u003cPlayerListItem\u003e playerList \u003d new ArrayList\u003c\u003e();\n        for (int i \u003d 0; i !\u003d banSize; ++i) {\n            String player \u003d clanBanListWidget.getDynamicChildren()[500+i].getText();\n            if (player.isEmpty()) {\n                break;\n            }\n            PlayerListItem playerListItem \u003d new PlayerListItem();\n            playerListItem.setName(player);\n            playerList.add(playerListItem);\n        }\n        String filename \u003d client.getClanChannel().getName() + \" Ban List \" + format(new Date()) + \".txt\";\n        exportList(filename, playerList);\n    }\n\n    /**\n     * Exports the clan event list. Drops a message in game chat if the clan events chat isn\u0027t open.\n     * This is the only function that does not currently use exportList and instead does everything in it.\n     */\n    private void exportClanEventList() {\n        Widget clanEventWidget \u003d client.getWidget(InterfaceID.ClansEvents.LIST_CONTENTS_WORLD);\n        if (clanEventWidget \u003d\u003d null) {\n            client.addChatMessage(ChatMessageType.GAMEMESSAGE, \"\", \"Please open clan settings and navigate to the Events tab.\", \"\");\n            return;\n        }\n\n        int eventSize \u003d clanEventWidget.getDynamicChildren().length;\n        List\u003cString\u003e lines \u003d new ArrayList\u003c\u003e();\n        for (int i \u003d 0; i !\u003d eventSize; ++i) {\n            String world \u003d Text.removeTags(client.getWidget(InterfaceID.ClansEvents.LIST_CONTENTS_WORLD).getDynamicChildren()[i].getText());\n            String startDate \u003d Text.removeTags(client.getWidget(InterfaceID.ClansEvents.LIST_CONTENTS_DATE).getDynamicChildren()[i].getText());\n            String startTime \u003d Text.removeTags(client.getWidget(InterfaceID.ClansEvents.LIST_CONTENTS_TIME).getDynamicChildren()[i].getText());\n            String duration \u003d Text.removeTags(client.getWidget(InterfaceID.ClansEvents.LIST_CONTENTS_DURATION).getDynamicChildren()[i].getText());\n            String type \u003d Text.removeTags(client.getWidget(InterfaceID.ClansEvents.LIST_CONTENTS_TYPE).getDynamicChildren()[i].getText());\n            String focus \u003d Text.removeTags(client.getWidget(InterfaceID.ClansEvents.LIST_CONTENTS_ACTIVITY).getDynamicChildren()[i].getText());\n            String subType \u003d Text.removeTags(client.getWidget(InterfaceID.ClansEvents.LIST_CONTENTS_SUBTYPE).getDynamicChildren()[i].getText());\n            String ranks \u003d Text.removeTags(client.getWidget(InterfaceID.ClansEvents.LIST_CONTENTS_RANK_TO_VIEW).getDynamicChildren()[i].getText());\n\n            StringBuilder exportString \u003d new StringBuilder();\n            if (!config.lineLeads().equals(LineLeads.None)) {\n                exportString.append(i + config.lineLeads().getPunctuation());\n            }\n            exportString.append(\n                    focus + config.getSeparator() + type\n                            + config.getSeparator() + subType\n                            + config.getSeparator() + startDate + \" \" + startTime\n                            + config.getSeparator() + duration\n                            + config.getSeparator() + world\n                            + config.getSeparator() + ranks\n            );\n\n            lines.add(exportString.toString());\n        }\n        String filename \u003d client.getClanChannel().getName() + \" Events \" + format(new Date()) + \".txt\";\n        exportToFile(filename, lines);\n    }\n\n    /**\n     * Handles the exporting of a file for a list of {@link PlayerListItem}.\n     * @param filename The base filename\n     * @param playerList List of PlayerListItems containing relevant information for exporting\n     */\n    private void exportList(String filename, List\u003cPlayerListItem\u003e playerList) {\n        List\u003cString\u003e lines \u003d new ArrayList\u003c\u003e();\n        for (int i \u003d 0; i \u003c playerList.size(); i++) {\n            lines.add(getExportLineForPlayer(i + 1, playerList.get(i)));\n        }\n        exportToFile(filename, lines);\n    }\n\n    /**\n     * Writes a list of lines to a file using the injected executor.\n     */\n    private void exportToFile(String filename, List\u003cString\u003e lines) {\n        String filePath \u003d EXPORT_DIR + File.separator + filename;\n\n        executor.submit(() -\u003e {\n            File file \u003d new File(filePath);\n\n            if (file.exists() \u0026\u0026 !file.delete()) {\n                log.error(\"Failed to delete existing file: {}\", filePath);\n                return;\n            }\n\n            try (BufferedWriter writer \u003d new BufferedWriter(new FileWriter(file, true))) {\n                for (String line : lines) {\n                    writer.write(line);\n                    writer.newLine();\n                }\n            } catch (IOException e) {\n                log.error(\"Failed to write export file: {}\", filePath, e);\n            }\n        });\n    }\n\n\n    /**\n     * Puts together the text for one {@link PlayerListItem}.\n     *\n     * @param num the index to place as the front\n     * @param playerListItem the player wrapper with info\n     * @return the complete string to be exported for the player.\n     */\n    private String getExportLineForPlayer(int num, PlayerListItem playerListItem) {\n\n        String separator \u003d config.getSeparator();\n\n        StringBuilder exportString \u003d new StringBuilder();\n        if (!config.lineLeads().equals(LineLeads.None)) {\n            exportString.append(num).append(config.lineLeads().getPunctuation());\n        }\n\n        if (!playerListItem.getRank().isEmpty()) {\n            exportString.append(playerListItem.getRank()).append(separator);\n        }\n\n        exportString.append(playerListItem.getName());\n\n        if (!StringUtils.isEmpty(playerListItem.getPreviousName())) {\n            exportString.append(separator).append(playerListItem.getPreviousName());\n        }\n\n        if (!StringUtils.isEmpty(playerListItem.getNote())) {\n            exportString.append(separator).append(playerListItem.getNote());\n        }\n\n        return exportString.toString();\n    }\n\n    @Provides\n    FriendsExporterConfig provideConfig(ConfigManager configManager) {\n        return configManager.getConfig(FriendsExporterConfig.class);\n    }\n}","filePath":"src\\main\\java\\com\\FriendsExporter\\FriendsExporterPlugin.java"},{"fileName":"LineLeads.java","content":"package com.FriendsExporter;\n\npublic enum LineLeads {\n    None(\"None\", \"\"),\n    Number(\"[Number]\", \" \"),\n    Number1(\"[Number].\", \". \"),\n    Number2(\"[Number])\", \") \"),\n    Number3(\"[Number].)\", \".) \")\n    ;\n\n    private final String name;\n    private final String punctuation;\n\n    public String toString() {\n        return this.getName();\n    }\n\n    public String getName() {\n        return this.name;\n    }\n    public String getPunctuation() {return this.punctuation;}\n\n    private LineLeads(String name, String punctuation) {\n        this.name \u003d name;\n        this.punctuation \u003d punctuation;\n    }\n}\n","filePath":"src\\main\\java\\com\\FriendsExporter\\LineLeads.java"},{"fileName":"PlayerListItem.java","content":"package com.FriendsExporter;\n\n\nimport net.runelite.client.util.Text;\n\npublic class PlayerListItem {\n\n    private String name;\n    private String previousName;\n    private String note;\n    private String rank;\n\n\n    PlayerListItem() {\n        this.name \u003d \"\";\n        this.previousName \u003d \"\";\n        this.note \u003d \"\";\n        this.rank \u003d \"\";\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name \u003d Text.toJagexName(Text.removeTags(name));\n    }\n\n    public String getPreviousName() {\n        return previousName;\n    }\n\n    public void setPreviousName(String previousName) {\n        this.previousName \u003d Text.toJagexName(Text.removeTags(previousName));\n    }\n\n    public String getNote() {\n        return note;\n    }\n\n    public void setNote(String note) {\n        this.note \u003d note;\n    }\n\n    public String getRank() {\n        return rank;\n    }\n\n    public void setRank(String rank) {\n        this.rank \u003d rank;\n    }\n}\n","filePath":"src\\main\\java\\com\\FriendsExporter\\PlayerListItem.java"},{"fileName":"FriendsExporterPluginTest.java","content":"package com.FriendsExporter;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class FriendsExporterPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(FriendsExporterPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\FriendsExporter\\FriendsExporterPluginTest.java"}]},{"commit":"4cfd6848fa1f1f790a843bf461f7a4e9a9778427","repository":"https://github.com/tcpowell/interactable.git","internalName":"interactable","files":[{"fileName":"InteractableConfig.java","content":"package com.interactable;\n\nimport java.awt.Color;\nimport net.runelite.client.config.Alpha;\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.Keybind;\nimport net.runelite.client.config.Range;\n\n@ConfigGroup(InteractableConfig.GROUP)\npublic interface InteractableConfig extends Config\n{\n\tString GROUP \u003d \"interactableHints\";\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"toggleKeybind\",\n\t\tname \u003d \"Toggle Overlay\",\n\t\tdescription \u003d \"Binds a key (combination) to toggle the overlay.\",\n\t\tposition \u003d 0\n\t)\n\tdefault Keybind toggleKeybind()\n\t{\n\t\treturn Keybind.NOT_SET;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"autoHideTimeout\",\n\t\tname \u003d \"Auto Hide Timeout\",\n\t\tdescription \u003d \"Timeout (in seconds) where the overlay is hidden (0 \u003d do not auto hide)\",\n\t\tposition \u003d 1\n\t)\n\tdefault int autoHideTimeout()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showObject\",\n\t\tname \u003d \"Show Objects\",\n\t\tdescription \u003d \"Outline interactable Objects\",\n\t\tposition \u003d 2\n\t)\n\tdefault boolean showObject()\n\t{\n\t\treturn true;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"objectHighlightColor\",\n\t\tname \u003d \"Object Color\",\n\t\tdescription \u003d \"The color of the outline for Objects\",\n\t\tposition \u003d 3\n\t)\n\tdefault Color objectHighlightColor()\n\t{\n\t\treturn new Color(0, 255, 255, 160);\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showAttackNpc\",\n\t\tname \u003d \"Show Attackable NPCs\",\n\t\tdescription \u003d \"Outline attackable NPCs\",\n\t\tposition \u003d 4\n\t)\n\tdefault boolean showAttackNpc()\n\t{\n\t\treturn true;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"attackNpcColor\",\n\t\tname \u003d \"Attackable NPC Color\",\n\t\tdescription \u003d \"The color of the outline for attackable NPCs\",\n\t\tposition \u003d 5\n\t)\n\tdefault Color attackNpcColor()\n\t{\n\t\treturn new Color(255, 10, 10, 160);\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"showInteractableNpc\",\n\t\tname \u003d \"Show Interactable NPCs\",\n\t\tdescription \u003d \"Outline interactable NPCs\",\n\t\tposition \u003d 6\n\t)\n\tdefault boolean showInteractableNpc()\n\t{\n\t\treturn true;\n\t}\n\n\t@Alpha\n\t@ConfigItem(\n\t\tkeyName \u003d \"interactableNpcColor\",\n\t\tname \u003d \"Interactable NPC Color\",\n\t\tdescription \u003d \"The color of the outline for interactable NPCs\",\n\t\tposition \u003d 7\n\t)\n\tdefault Color interactableNpcColor()\n\t{\n\t\treturn new Color(255, 255, 10, 160);\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"borderWidth\",\n\t\tname \u003d \"Border Width\",\n\t\tdescription \u003d \"Width of the outlined border\",\n\t\tposition \u003d 8\n\t)\n\tdefault int borderWidth()\n\t{\n\t\treturn 4;\n\t}\n\n\t@ConfigItem(\n\t\tkeyName \u003d \"outlineFeather\",\n\t\tname \u003d \"Outline feather\",\n\t\tdescription \u003d \"Specify between 0-4 how much of the model outline should be faded\",\n\t\tposition \u003d 9\n\t)\n\t@Range(\n\t\tmax \u003d 4\n\t)\n\tdefault int outlineFeather()\n\t{\n\t\treturn 4;\n\t}\n\n}\n","filePath":"src\\main\\java\\com\\interactable\\InteractableConfig.java"},{"fileName":"InteractableOverlay.java","content":"package com.interactable;\n\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport javax.inject.Inject;\nimport net.runelite.api.Client;\nimport net.runelite.api.NPC;\nimport net.runelite.api.TileObject;\nimport net.runelite.client.ui.overlay.Overlay;\nimport net.runelite.client.ui.overlay.OverlayLayer;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.OverlayPriority;\nimport net.runelite.client.ui.overlay.outline.ModelOutlineRenderer;\n\nclass InteractableOverlay extends Overlay\n{\n\tprivate final Client client;\n\tprivate final InteractablePlugin plugin;\n\tprivate final InteractableConfig config;\n\tprivate final ModelOutlineRenderer modelOutlineRenderer;\n\n\t@Inject\n\tprivate InteractableOverlay(Client client, InteractablePlugin plugin, InteractableConfig config, ModelOutlineRenderer modelOutlineRenderer)\n\t{\n\t\tthis.client \u003d client;\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t\tthis.modelOutlineRenderer \u003d modelOutlineRenderer;\n\t\tsetPosition(OverlayPosition.DYNAMIC);\n\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\n\t\tsetPriority(OverlayPriority.HIGH);\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (plugin.isShown())\n\t\t{\n\t\t\trenderObjects();\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\tprivate void renderObjects()\n\t{\n\t\tplugin.generateObjectLists();\n\n\t\tif (config.showObject())\n\t\t{\n\t\t\tfor (TileObject object : plugin.getObjects())\n\t\t\t{\n\t\t\t\tif (object !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tmodelOutlineRenderer.drawOutline(object, config.borderWidth(), plugin.getCurrentObjectColor(), config.outlineFeather());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (config.showAttackNpc())\n\t\t{\n\t\t\tfor (NPC npc : plugin.getAttackNpcs())\n\t\t\t{\n\t\t\t\tif (npc !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tmodelOutlineRenderer.drawOutline(npc, config.borderWidth(), plugin.getCurrentNpcAttackColor(), config.outlineFeather());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (config.showInteractableNpc())\n\t\t{\n\t\t\tfor (NPC npc : plugin.getInteractNpcs())\n\t\t\t{\n\t\t\t\tif (npc !\u003d null)\n\t\t\t\t{\n\t\t\t\t\tmodelOutlineRenderer.drawOutline(npc, config.borderWidth(), plugin.getCurrentNpcInteractColor(), config.outlineFeather());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t}\n}","filePath":"src\\main\\java\\com\\interactable\\InteractableOverlay.java"},{"fileName":"InteractablePlugin.java","content":"package com.interactable;\n\nimport com.google.common.base.Strings;\nimport com.google.inject.Provides;\nimport java.awt.Color;\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.inject.Inject;\nimport lombok.AccessLevel;\nimport lombok.Getter;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Constants;\nimport net.runelite.api.GameObject;\nimport net.runelite.api.GroundObject;\nimport net.runelite.api.NPC;\nimport net.runelite.api.NPCComposition;\nimport net.runelite.api.ObjectComposition;\nimport net.runelite.api.Player;\nimport net.runelite.api.Scene;\nimport net.runelite.api.Tile;\nimport net.runelite.api.TileObject;\nimport net.runelite.api.WallObject;\nimport net.runelite.api.events.ClientTick;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.input.KeyManager;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.util.HotkeyListener;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Interactable Hints\"\n)\npublic class InteractablePlugin extends Plugin\n{\n\tprivate int MAX_DISTANCE \u003d 2350;\n\tprivate int remainingClientTicks \u003d -1;\n\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate boolean shown \u003d false;\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate Color currentObjectColor;\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate Color currentNpcAttackColor;\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate Color currentNpcInteractColor;\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate List\u003cTileObject\u003e objects \u003d new ArrayList\u003cTileObject\u003e();\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate List\u003cNPC\u003e attackNpcs \u003d new ArrayList\u003cNPC\u003e();\n\t@Getter(AccessLevel.PACKAGE)\n\tprivate List\u003cNPC\u003e interactNpcs \u003d new ArrayList\u003cNPC\u003e();\n\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate InteractableOverlay interactableOverlay;\n\n\t@Inject\n\tprivate InteractableConfig config;\n\n\t@Inject\n\tprivate KeyManager keyManager;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tshown \u003d false;\n\t\tkeyManager.registerKeyListener(hotkeyListener);\n\t\toverlayManager.add(interactableOverlay);\n\t\tobjects \u003d new ArrayList\u003cTileObject\u003e();\n\t\tattackNpcs \u003d new ArrayList\u003cNPC\u003e();\n\t\tinteractNpcs \u003d new ArrayList\u003cNPC\u003e();\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tshown \u003d false;\n\t\tkeyManager.unregisterKeyListener(hotkeyListener);\n\t\toverlayManager.remove(interactableOverlay);\n\t\tobjects \u003d null;\n\t\tattackNpcs \u003d null;\n\t\tinteractNpcs \u003d null;\n\t}\n\n\t@Subscribe\n\tpublic void onClientTick(ClientTick clientTick)\n\t{\n\t\tif (config.autoHideTimeout() \u003e 0 \u0026\u0026 shown)\n\t\t{\n\t\t\tif (remainingClientTicks \u003e 50)\n\t\t\t{\n\t\t\t\tremainingClientTicks--;\n\t\t\t}\n\t\t\telse if (remainingClientTicks \u003e 0)\n\t\t\t{\n\t\t\t\tfadeOut();\n\t\t\t\tremainingClientTicks--;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tshown \u003d false;\n\t\t\t\tlog.debug(\"Interactable Hints auto-hide triggered\");\n\t\t\t\tcurrentObjectColor \u003d config.objectHighlightColor();\n\t\t\t\tcurrentNpcAttackColor \u003d config.attackNpcColor();\n\t\t\t\tcurrentNpcInteractColor \u003d config.interactableNpcColor();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate void fadeOut()\n\t{\n\t\tint newObjectAlpha \u003d config.objectHighlightColor().getAlpha() * remainingClientTicks / 50;\n\t\tcurrentObjectColor \u003d new Color(config.objectHighlightColor().getRed(), config.objectHighlightColor().getGreen(), config.objectHighlightColor().getBlue(), newObjectAlpha);\n\n\t\tint newAttackAlpha \u003d config.attackNpcColor().getAlpha() * remainingClientTicks / 50;\n\t\tcurrentNpcAttackColor \u003d new Color(config.attackNpcColor().getRed(), config.attackNpcColor().getGreen(), config.attackNpcColor().getBlue(), newAttackAlpha);\n\n\t\tint newInteractAlpha \u003d config.interactableNpcColor().getAlpha() * remainingClientTicks / 50;\n\t\tcurrentNpcInteractColor \u003d new Color(config.interactableNpcColor().getRed(), config.interactableNpcColor().getGreen(), config.interactableNpcColor().getBlue(), newInteractAlpha);\n\t}\n\n\t@Provides\n\tInteractableConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(InteractableConfig.class);\n\t}\n\n\tprivate final HotkeyListener hotkeyListener \u003d new HotkeyListener(() -\u003e config.toggleKeybind())\n\t{\n\t\t@Override\n\t\tpublic void hotkeyPressed()\n\t\t{\n\t\t\tcurrentObjectColor \u003d config.objectHighlightColor();\n\t\t\tcurrentNpcAttackColor \u003d config.attackNpcColor();\n\t\t\tcurrentNpcInteractColor \u003d config.interactableNpcColor();\n\n\t\t\tshown \u003d !shown;\n\t\t\tlog.debug(\"Interactable Hints overlay toggled to \" + shown);\n\t\t\tif (shown)\n\t\t\t{\n\t\t\t\tremainingClientTicks \u003d config.autoHideTimeout() * 50;\n\t\t\t}\n\t\t}\n\t};\n\n\tvoid generateObjectLists()\n\t{\n\t\tobjects \u003d new ArrayList\u003cTileObject\u003e();\n\t\tattackNpcs \u003d new ArrayList\u003cNPC\u003e();\n\t\tinteractNpcs \u003d new ArrayList\u003cNPC\u003e();\n\n\t\tfor (NPC npc : client.getNpcs())\n\t\t{\n\t\t\tNPCComposition npcComp \u003d replaceNpcImposters(npc.getComposition());\n\n\t\t\tif (npcCompCheck(npcComp) \u0026\u0026 npcCheck(npc))\n\t\t\t{\n\t\t\t\tif (npcAttackable(npcComp))\n\t\t\t\t{\n\t\t\t\t\tattackNpcs.add(npc);\n\t\t\t\t}\n\t\t\t\telse if (npcInteractable(npcComp))\n\t\t\t\t{\n\t\t\t\t\tinteractNpcs.add(npc);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tScene scene \u003d client.getScene();\n\t\tTile[][] tiles \u003d scene.getTiles()[client.getPlane()];\n\n\t\tfor (int x \u003d 0; x \u003c Constants.SCENE_SIZE; ++x)\n\t\t{\n\t\t\tfor (int y \u003d 0; y \u003c Constants.SCENE_SIZE; ++y)\n\t\t\t{\n\t\t\t\tTile tile \u003d tiles[x][y];\n\t\t\t\tif (tile \u003d\u003d null)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (GameObject gameObject : tile.getGameObjects())\n\t\t\t\t{\n\t\t\t\t\tif (gameObjectCheck(gameObject) \u0026\u0026 !(gameObject.getRenderable() instanceof Player) \u0026\u0026 !(gameObject.getRenderable() instanceof NPC))\n\t\t\t\t\t{\n\t\t\t\t\t\tint objectId \u003d gameObject.getId();\n\t\t\t\t\t\tObjectComposition comp \u003d replaceObjectImposters(client.getObjectDefinition(objectId));\n\n\t\t\t\t\t\tif (objectCompCheck(comp))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (!objects.contains(gameObject))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tobjects.add(gameObject);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tWallObject wallObject \u003d tile.getWallObject();\n\n\t\t\t\tif (gameObjectCheck(wallObject))\n\t\t\t\t{\n\t\t\t\t\tint objectId \u003d wallObject.getId();\n\t\t\t\t\tObjectComposition comp \u003d replaceObjectImposters(client.getObjectDefinition(objectId));\n\n\t\t\t\t\tif (objectCompCheck(comp))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!objects.contains(wallObject))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tobjects.add(wallObject);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tGroundObject groundObject \u003d tile.getGroundObject();\n\n\t\t\t\tif (gameObjectCheck(groundObject))\n\t\t\t\t{\n\t\t\t\t\tint objectId \u003d groundObject.getId();\n\t\t\t\t\tObjectComposition comp \u003d replaceObjectImposters(client.getObjectDefinition(objectId));\n\n\t\t\t\t\tif (objectCompCheck(comp))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!objects.contains(groundObject))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tobjects.add(groundObject);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate boolean objectCompCheck(ObjectComposition comp)\n\t{\n\t\treturn (comp !\u003d null \u0026\u0026 !Strings.isNullOrEmpty(comp.getName()) \u0026\u0026 !comp.getName().equals(\"null\") \u0026\u0026 objectActionCheck(comp));\n\t}\n\n\tprivate boolean npcCompCheck(NPCComposition comp)\n\t{\n\t\treturn (comp !\u003d null \u0026\u0026 !Strings.isNullOrEmpty(comp.getName()) \u0026\u0026 !comp.getName().equals(\"null\"));\n\t}\n\n\tprivate boolean gameObjectCheck(TileObject object)\n\t{\n\t\treturn object !\u003d null \u0026\u0026 object.getLocalLocation().distanceTo(client.getLocalPlayer().getLocalLocation()) \u003c\u003d MAX_DISTANCE;\n\t}\n\n\tprivate boolean npcCheck(NPC npc)\n\t{\n\t\treturn npc !\u003d null \u0026\u0026 npc.getLocalLocation().distanceTo(client.getLocalPlayer().getLocalLocation()) \u003c\u003d MAX_DISTANCE;\n\t}\n\n\tprivate ObjectComposition replaceObjectImposters(ObjectComposition comp)\n\t{\n\t\treturn comp.getImpostorIds() !\u003d null ? comp.getImpostor() : comp;\n\t}\n\n\tprivate NPCComposition replaceNpcImposters(NPCComposition comp)\n\t{\n\t\treturn comp.getConfigs() !\u003d null \u0026\u0026 comp.transform() !\u003d null ? comp.transform() : comp;\n\t}\n\n\tprivate boolean objectActionCheck(ObjectComposition comp)\n\t{\n\t\tfor (String action : comp.getActions())\n\t\t{\n\t\t\tif (!Strings.isNullOrEmpty(action) \u0026\u0026 !action.equals(\"null\"))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate boolean npcAttackable(NPCComposition comp)\n\t{\n\t\tfor (String action : comp.getActions())\n\t\t{\n\t\t\tif (!Strings.isNullOrEmpty(action) \u0026\u0026 action.equals(\"Attack\") \u0026\u0026 client.getVarpValue(1306) !\u003d3)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate boolean npcInteractable(NPCComposition comp)\n\t{\n\t\tfor (String action : comp.getActions())\n\t\t{\n\t\t\tif (!Strings.isNullOrEmpty(action) \u0026\u0026 !action.equals(\"null\") \u0026\u0026 !action.equals(\"Attack\"))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}\n","filePath":"src\\main\\java\\com\\interactable\\InteractablePlugin.java"},{"fileName":"InteractablePluginTest.java","content":"package com.interactable;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class InteractablePluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(InteractablePlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\interactable\\InteractablePluginTest.java"}]},{"commit":"d383983a88752621b6605cad55fd3dde8e3c5e14","repository":"https://github.com/IanMcNelly/maniacal-hunter.git","internalName":"maniacal-hunter","files":[{"fileName":"DisplayMode.java","content":"package com.maniacalhunter;\n\npublic enum DisplayMode\n{\n\tSESSION_ONLY,\n\tAGGREGATE_ONLY,\n\tBOTH\n}\n","filePath":"src\\main\\java\\com\\maniacalhunter\\DisplayMode.java"},{"fileName":"ManiacalHunterConfig.java","content":"package com.maniacalhunter;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.ConfigSection;\n\n@ConfigGroup(\"maniacalhunter\")\npublic interface ManiacalHunterConfig extends Config\n{\n\t@ConfigSection(\n\t\t\tname \u003d \"Display\",\n\t\t\tdescription \u003d \"Configure which stats to display\",\n\t\t\tposition \u003d 0\n\t)\n\tString displaySection \u003d \"display\";\n\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"condensedMode\",\n\t\t\tname \u003d \"Condensed Mode\",\n\t\t\tdescription \u003d \"Display stats in an infobox.\",\n\t\t\tsection \u003d displaySection\n\t)\n\tdefault boolean condensedMode()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Auto Reset\",\n\t\t\tdescription \u003d \"Automatically reset the session\",\n\t\t\tposition \u003d 4\n\t)\n\tString autoResetSection \u003d \"autoReset\";\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"autoResetMode\",\n\t\t\tname \u003d \"Auto Reset Session\",\n\t\t\tdescription \u003d \"Automatically reset the session upon entering or leaving the area\",\n\t\t\tsection \u003d autoResetSection\n\t)\n\tdefault ResetMode autoResetMode()\n\t{\n\t\treturn ResetMode.NEVER;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showMonkeysCaught\",\n\t\t\tname \u003d \"Show Monkeys Caught\",\n\t\t\tdescription \u003d \"Show the total number of monkeys caught\",\n\t\t\tsection \u003d displaySection\n\t)\n\tdefault boolean showMonkeysCaught()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showTrapsLaid\",\n\t\t\tname \u003d \"Show Traps Laid\",\n\t\t\tdescription \u003d \"Show the total number of traps laid\",\n\t\t\tsection \u003d displaySection\n\t)\n\tdefault boolean showTrapsLaid()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showLastTrapStatus\",\n\t\t\tname \u003d \"Show Last Trap Status\",\n\t\t\tdescription \u003d \"Show the status of the last trap\",\n\t\t\tsection \u003d displaySection\n\t)\n\tdefault boolean showLastTrapStatus()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showSuccessRate\",\n\t\t\tname \u003d \"Show Success Rate\",\n\t\t\tdescription \u003d \"Show the success rate of catching monkeys\",\n\t\t\tsection \u003d displaySection\n\t)\n\tdefault boolean showSuccessRate()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showMonkeysPerHour\",\n\t\t\tname \u003d \"Show Monkeys/Hour\",\n\t\t\tdescription \u003d \"Show the number of monkeys caught per hour\",\n\t\t\tsection \u003d displaySection\n\t)\n\tdefault boolean showMonkeysPerHour()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showPerfectTails\",\n\t\t\tname \u003d \"Show Perfect Tails\",\n\t\t\tdescription \u003d \"Show the number of perfect tails received\",\n\t\t\tsection \u003d displaySection\n\t)\n\tdefault boolean showPerfectTails()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showDamagedTails\",\n\t\t\tname \u003d \"Show Damaged Tails\",\n\t\t\tdescription \u003d \"Show the number of damaged tails received\",\n\t\t\tsection \u003d displaySection\n\t)\n\tdefault boolean showDamagedTails()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showLuck\",\n\t\t\tname \u003d \"Show Luck\",\n\t\t\tdescription \u003d \"Show your current luck in receiving a perfect tail\",\n\t\t\tsection \u003d displaySection\n\t)\n\tdefault boolean showLuck()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"showAvgCatchTime\",\n\t\t\tname \u003d \"Show Avg. Catch Time\",\n\t\t\tdescription \u003d \"Show the average time to catch a monkey\",\n\t\t\tsection \u003d displaySection\n\t)\n\tdefault boolean showAvgCatchTime()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"displayMode\",\n\t\t\tname \u003d \"Display Mode\",\n\t\t\tdescription \u003d \"Choose how to display stats in the overlay\",\n\t\t\tposition \u003d 1,\n\t\t\tsection \u003d displaySection\n\t)\n\tdefault DisplayMode displayMode()\n\t{\n\t\treturn DisplayMode.BOTH;\n\t}\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Actions\",\n\t\t\tdescription \u003d \"Perform actions on the session\",\n\t\t\tposition \u003d 2\n\t)\n\tString actionsSection \u003d \"actions\";\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"resetSessionButton\",\n\t\t\tname \u003d \"Reset Session\",\n\t\t\tdescription \u003d \"Reset the current session stats\",\n\t\t\tsection \u003d actionsSection\n\t)\n\tdefault boolean resetSession()\n\t{\n\t\treturn false;\n\t}\n\n\t@ConfigSection(\n\t\t\tname \u003d \"Notifications\",\n\t\t\tdescription \u003d \"Configure notifications for milestones\",\n\t\t\tposition \u003d 3\n\t)\n\tString notificationsSection \u003d \"notifications\";\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"milestoneNotification\",\n\t\t\tname \u003d \"Milestone Notification\",\n\t\t\tdescription \u003d \"Notify when you reach a milestone of monkeys caught\",\n\t\t\tsection \u003d notificationsSection\n\t)\n\tdefault boolean milestoneNotification()\n\t{\n\t\treturn true;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"milestoneInterval\",\n\t\t\tname \u003d \"Milestone Interval\",\n\t\t\tdescription \u003d \"The interval at which to send a milestone notification\",\n\t\t\tsection \u003d notificationsSection\n\t)\n\tdefault int milestoneInterval()\n\t{\n\t\treturn 100;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"sessionStartTime\",\n\t\t\tname \u003d \"Session Start Time\",\n\t\t\tdescription \u003d \"The time the session started\",\n\t\t\thidden \u003d true\n\t)\n\tdefault long getSessionStartTime()\n\t{\n\t\treturn 0L;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"sessionStartTime\",\n\t\t\tname \u003d \"Session Start Time\",\n\t\t\tdescription \u003d \"The time the session started\"\n\t)\n\tvoid setSessionStartTime(long time);\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"duration\",\n\t\t\tname \u003d \"Duration\",\n\t\t\tdescription \u003d \"The session duration in milliseconds\",\n\t\t\thidden \u003d true\n\t)\n\tdefault long getDuration()\n\t{\n\t\treturn 0L;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"duration\",\n\t\t\tname \u003d \"Duration\",\n\t\t\tdescription \u003d \"The session duration in milliseconds\"\n\t)\n\tvoid setDuration(long time);\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"monkeysCaught\",\n\t\t\tname \u003d \"Monkeys Caught\",\n\t\t\tdescription \u003d \"The number of monkeys caught\",\n\t\t\thidden \u003d true\n\t)\n\tdefault int getMonkeysCaught()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"monkeysCaught\",\n\t\t\tname \u003d \"Monkeys Caught\",\n\t\t\tdescription \u003d \"The number of monkeys caught\"\n\t)\n\tvoid setMonkeysCaught(int count);\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"trapsLaid\",\n\t\t\tname \u003d \"Traps Laid\",\n\t\t\tdescription \u003d \"The number of traps laid\",\n\t\t\thidden \u003d true\n\t)\n\tdefault int getTrapsLaid()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"trapsLaid\",\n\t\t\tname \u003d \"Traps Laid\",\n\t\t\tdescription \u003d \"The number of traps laid\"\n\t)\n\tvoid setTrapsLaid(int count);\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"lastTrapStatus\",\n\t\t\tname \u003d \"Last Trap Status\",\n\t\t\tdescription \u003d \"The status of the last trap\",\n\t\t\thidden \u003d true\n\t)\n\tdefault String getLastTrapStatus()\n\t{\n\t\treturn \"N/A\";\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"lastTrapStatus\",\n\t\t\tname \u003d \"Last Trap Status\",\n\t\t\tdescription \u003d \"The status of the last trap\"\n\t)\n\tvoid setLastTrapStatus(String status);\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"perfectTails\",\n\t\t\tname \u003d \"Perfect Tails\",\n\t\t\tdescription \u003d \"The number of perfect tails\",\n\t\t\thidden \u003d true\n\t)\n\tdefault int getPerfectTails()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"perfectTails\",\n\t\t\tname \u003d \"Perfect Tails\",\n\t\t\tdescription \u003d \"The number of perfect tails\"\n\t)\n\tvoid setPerfectTails(int count);\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"damagedTails\",\n\t\t\tname \u003d \"Damaged Tails\",\n\t\t\tdescription \u003d \"The number of damaged tails\",\n\t\t\thidden \u003d true\n\t)\n\tdefault int getDamagedTails()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"damagedTails\",\n\t\t\tname \u003d \"Damaged Tails\",\n\t\t\tdescription \u003d \"The number of damaged tails\"\n\t)\n\tvoid setDamagedTails(int count);\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"damagedTailsSincePerfect\",\n\t\t\tname \u003d \"Damaged Tails Since Perfect\",\n\t\t\tdescription \u003d \"The number of damaged tails since the last perfect tail\",\n\t\t\thidden \u003d true\n\t)\n\tdefault int getDamagedTailsSincePerfect()\n\t{\n\t\treturn 0;\n\t}\n\n\t@ConfigItem(\n\t\t\tkeyName \u003d \"damagedTailsSincePerfect\",\n\t\t\tname \u003d \"Damaged Tails Since Perfect\",\n\t\t\tdescription \u003d \"The number of damaged tails since the last perfect tail\"\n\t)\n\tvoid setDamagedTailsSincePerfect(int count);\n}\n","filePath":"src\\main\\java\\com\\maniacalhunter\\ManiacalHunterConfig.java"},{"fileName":"ManiacalHunterConstants.java","content":"package com.maniacalhunter;\n\nimport com.google.common.collect.ImmutableSet;\nimport java.util.Set;\n\npublic class ManiacalHunterConstants\n{\n\t// Item IDs\n\tpublic static final int DAMAGED_MONKEY_TAIL \u003d 19665;\n\tpublic static final int PERFECT_MONKEY_TAIL \u003d 19610;\n\tpublic static final int MANIACAL_ITEM_ID \u003d 24864;\n\n\t// Object IDs\n\tpublic static final int UNSET_BOULDER_TRAP \u003d 28824;\n\tpublic static final int SETTING_BOULDER_TRAP \u003d 28825;\n\tpublic static final int SET_BOULDER_TRAP \u003d 28827;\n\tpublic static final int TRIGGERED_BOULDER_TRAP_1 \u003d 28828;\n\tpublic static final int TRIGGERED_BOULDER_TRAP_2 \u003d 28829;\n\tpublic static final int CAUGHT_MONKEY_BOULDER_1 \u003d 28830;\n\tpublic static final int CAUGHT_MONKEY_BOULDER_2 \u003d 28831;\n\tpublic static final int LIFTED_BOULDER \u003d 28833;\n\n\t// Region IDs\n\tpublic static final int MANIACAL_HUNTER_REGION \u003d 11662;\n\n\t// Other\n\tpublic static final int MANIACAL_MONKEY_XP \u003d 1000;\n\n\tpublic static final Set\u003cInteger\u003e BOULDER_TRAP_IDS \u003d ImmutableSet.of(\n\t\tUNSET_BOULDER_TRAP,\n\t\tSETTING_BOULDER_TRAP,\n\t\tSET_BOULDER_TRAP,\n\t\tTRIGGERED_BOULDER_TRAP_1,\n\t\tTRIGGERED_BOULDER_TRAP_2,\n\t\tCAUGHT_MONKEY_BOULDER_1,\n\t\tCAUGHT_MONKEY_BOULDER_2,\n\t\tLIFTED_BOULDER\n\t);\n}\n","filePath":"src\\main\\java\\com\\maniacalhunter\\ManiacalHunterConstants.java"},{"fileName":"ManiacalHunterFormatting.java","content":"package com.maniacalhunter;\n\npublic final class ManiacalHunterFormatting\n{\n\tprivate ManiacalHunterFormatting()\n\t{\n\t}\n\n\tpublic static String formatStat(int session, int aggregate, DisplayMode displayMode)\n\t{\n\t\tswitch (displayMode)\n\t\t{\n\t\t\tcase SESSION_ONLY:\n\t\t\t\treturn String.valueOf(session);\n\t\t\tcase AGGREGATE_ONLY:\n\t\t\t\treturn String.valueOf(aggregate);\n\t\t\tcase BOTH:\n\t\t\tdefault:\n\t\t\t\treturn String.format(\"%d (%d)\", session, aggregate);\n\t\t}\n\t}\n\n\tpublic static String formatPercentage(double session, double aggregate, DisplayMode displayMode)\n\t{\n\t\tswitch (displayMode)\n\t\t{\n\t\t\tcase SESSION_ONLY:\n\t\t\t\treturn String.format(\"%.2f%%\", session);\n\t\t\tcase AGGREGATE_ONLY:\n\t\t\t\treturn String.format(\"%.2f%%\", aggregate);\n\t\t\tcase BOTH:\n\t\t\tdefault:\n\t\t\t\treturn String.format(\"%.2f%% (%.2f%%)\", session, aggregate);\n\t\t}\n\t}\n\n\tpublic static String formatDouble(double session, double aggregate, DisplayMode displayMode)\n\t{\n\t\tswitch (displayMode)\n\t\t{\n\t\t\tcase SESSION_ONLY:\n\t\t\t\treturn String.format(\"%.2f\", session);\n\t\t\tcase AGGREGATE_ONLY:\n\t\t\t\treturn String.format(\"%.2f\", aggregate);\n\t\t\tcase BOTH:\n\t\t\tdefault:\n\t\t\t\treturn String.format(\"%.2f (%.2f)\", session, aggregate);\n\t\t}\n\t}\n}","filePath":"src\\main\\java\\com\\maniacalhunter\\ManiacalHunterFormatting.java"},{"fileName":"ManiacalHunterInfoBox.java","content":"package com.maniacalhunter;\n\nimport java.awt.Color;\nimport java.awt.image.BufferedImage;\nimport net.runelite.client.ui.overlay.infobox.InfoBox;\n\npublic class ManiacalHunterInfoBox extends InfoBox\n{\n\tprivate final ManiacalHunterPlugin plugin;\n\tprivate final ManiacalHunterConfig config;\n\n\tpublic ManiacalHunterInfoBox(ManiacalHunterPlugin plugin, ManiacalHunterConfig config, BufferedImage image)\n\t{\n\t\tsuper(image, plugin);\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t}\n\n\t@Override\n\tpublic String getText()\n\t{\n\t\treturn String.valueOf(plugin.getSession().getMonkeysCaught());\n\t}\n\n\t@Override\n\tpublic Color getTextColor()\n\t{\n\t\treturn Color.WHITE;\n\t}\n\n\t@Override\n\tpublic String getTooltip()\n\t{\n\t\tManiacalHunterSession session \u003d plugin.getSession();\n\t\tManiacalHunterSession aggregateSession \u003d plugin.getAggregateSession();\n\t\tStringBuilder sb \u003d new StringBuilder();\n\t\tsb.append(\"Maniacal Hunter\");\n\n\t\tif (config.showMonkeysCaught()) {\n\t\t\tsb.append(\"\u003c/br\u003e\");\n\t\t\tsb.append(\"Monkeys Caught: \").append(ManiacalHunterFormatting.formatStat(session.getMonkeysCaught(), aggregateSession.getMonkeysCaught(), config.displayMode()));\n\t\t}\n\n\t\tif (config.showTrapsLaid()) {\n\t\t\tsb.append(\"\u003c/br\u003e\");\n\t\t\tsb.append(\"Traps Laid: \").append(ManiacalHunterFormatting.formatStat(session.getTrapsLaid(), aggregateSession.getTrapsLaid(), config.displayMode()));\n\t\t}\n\n\t\tif (config.showLastTrapStatus()) {\n\t\t\tsb.append(\"\u003c/br\u003e\");\n\t\t\tsb.append(\"Last Trap Status: \").append(session.getLastTrapStatus());\n\t\t}\n\n\t\tif (config.showSuccessRate()) {\n\t\t\tsb.append(\"\u003c/br\u003e\");\n\t\t\tsb.append(\"Success Rate: \").append(ManiacalHunterFormatting.formatPercentage(session.getSuccessRate(), aggregateSession.getSuccessRate(), config.displayMode()));\n\t\t}\n\n\t\tif (config.showMonkeysPerHour()) {\n\t\t\tsb.append(\"\u003c/br\u003e\");\n\t\t\tsb.append(\"Monkeys/Hour: \").append(ManiacalHunterFormatting.formatDouble(session.getMonkeysPerHour(), aggregateSession.getMonkeysPerHour(), config.displayMode()));\n\t\t}\n\n\t\tif (config.showPerfectTails()) {\n\t\t\tsb.append(\"\u003c/br\u003e\");\n\t\t\tsb.append(\"Perfect Tails: \").append(ManiacalHunterFormatting.formatStat(session.getPerfectTails(), aggregateSession.getPerfectTails(), config.displayMode()));\n\t\t}\n\n\t\tif (config.showDamagedTails()) {\n\t\t\tsb.append(\"\u003c/br\u003e\");\n\t\t\tsb.append(\"Damaged Tails: \").append(ManiacalHunterFormatting.formatStat(session.getDamagedTails(), aggregateSession.getDamagedTails(), config.displayMode()));\n\t\t}\n\n\t\tif (config.showLuck()) {\n\t\t\tsb.append(\"\u003c/br\u003e\");\n\t\t\tsb.append(\"Luck: \").append(ManiacalHunterFormatting.formatPercentage(session.getLuckPercentage(), aggregateSession.getLuckPercentage(), config.displayMode()));\n\t\t}\n\n\t\tif (config.showAvgCatchTime()) {\n\t\t\tsb.append(\"\u003c/br\u003e\");\n\t\t\tsb.append(\"Avg. Catch Time: \").append(String.format(\"%.2fs\", session.getAverageTimePerCatch()));\n\t\t}\n\n\t\treturn sb.toString();\n\t}\n}\n","filePath":"src\\main\\java\\com\\maniacalhunter\\ManiacalHunterInfoBox.java"},{"fileName":"ManiacalHunterOverlay.java","content":"package com.maniacalhunter;\n\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics2D;\nimport javax.inject.Inject;\n\nimport net.runelite.api.Client;\nimport net.runelite.client.ui.overlay.OverlayPanel;\nimport net.runelite.client.ui.overlay.OverlayPosition;\nimport net.runelite.client.ui.overlay.components.LineComponent;\nimport net.runelite.client.ui.overlay.components.TitleComponent;\n\npublic class ManiacalHunterOverlay extends OverlayPanel\n{\n\tprivate final ManiacalHunterPlugin plugin;\n\tprivate final ManiacalHunterConfig config;\n\tprivate final Client client;\n\n\t@Inject\n\tprivate ManiacalHunterOverlay(ManiacalHunterPlugin plugin, ManiacalHunterConfig config, Client client)\n\t{\n\t\tsuper(plugin);\n\t\tthis.plugin \u003d plugin;\n\t\tthis.config \u003d config;\n\t\tthis.client \u003d client;\n\t\tsetPosition(OverlayPosition.TOP_LEFT);\n\t}\n\n\tprivate boolean isInManiacalHunterArea()\n\t{\n\t\treturn client.getLocalPlayer() !\u003d null \u0026\u0026 client.getLocalPlayer().getWorldLocation().getRegionID() \u003d\u003d ManiacalHunterConstants.MANIACAL_HUNTER_REGION;\n\t}\n\n\t@Override\n\tpublic Dimension render(Graphics2D graphics)\n\t{\n\t\tif (!isInManiacalHunterArea())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\tManiacalHunterSession session \u003d plugin.getSession();\n\t\tManiacalHunterSession aggregateSession \u003d plugin.getAggregateSession();\n\n\t\tpanelComponent.getChildren().clear();\n\n\t\tpanelComponent.getChildren().add(TitleComponent.builder()\n\t\t\t.text(\"Maniacal Hunter\")\n\t\t\t.color(Color.WHITE)\n\t\t\t.build());\n\n\t\tif (config.showMonkeysCaught()) {\n\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t.left(\"Monkeys Caught:\")\n\t\t\t\t.right(ManiacalHunterFormatting.formatStat(session.getMonkeysCaught(), aggregateSession.getMonkeysCaught(), config.displayMode()))\n\t\t\t\t.build());\n\t\t}\n\n\t\tif (config.showTrapsLaid()) {\n\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t.left(\"Traps Laid:\")\n\t\t\t\t.right(ManiacalHunterFormatting.formatStat(session.getTrapsLaid(), aggregateSession.getTrapsLaid(), config.displayMode()))\n\t\t\t\t.build());\n\t\t}\n\n\t\tif (config.showLastTrapStatus()) {\n\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t.left(\"Last Trap Status:\")\n\t\t\t\t.right(session.getLastTrapStatus())\n\t\t\t\t.build());\n\t\t}\n\n\t\tif (config.showSuccessRate()) {\n\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t.left(\"Success Rate:\")\n\t\t\t\t.right(ManiacalHunterFormatting.formatPercentage(session.getSuccessRate(), aggregateSession.getSuccessRate(), config.displayMode()))\n\t\t\t\t.build());\n\t\t}\n\n\t\tif (config.showMonkeysPerHour()) {\n\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t.left(\"Monkeys/Hour:\")\n\t\t\t\t.right(ManiacalHunterFormatting.formatDouble(session.getMonkeysPerHour(), aggregateSession.getMonkeysPerHour(), config.displayMode()))\n\t\t\t\t.build());\n\t\t}\n\n\t\tif (config.showPerfectTails()) {\n\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t.left(\"Perfect Tails:\")\n\t\t\t\t.right(ManiacalHunterFormatting.formatStat(session.getPerfectTails(), aggregateSession.getPerfectTails(), config.displayMode()))\n\t\t\t\t.build());\n\t\t}\n\n\t\tif (config.showDamagedTails()) {\n\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t.left(\"Damaged Tails:\")\n\t\t\t\t.right(ManiacalHunterFormatting.formatStat(session.getDamagedTails(), aggregateSession.getDamagedTails(), config.displayMode()))\n\t\t\t\t.build());\n\t\t}\n\n\t\tif (config.showLuck()) {\n\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t.left(\"Luck:\")\n\t\t\t\t.right(ManiacalHunterFormatting.formatPercentage(session.getLuckPercentage(), aggregateSession.getLuckPercentage(), config.displayMode()))\n\t\t\t\t.build());\n\t\t}\n\n\t\tif (config.showAvgCatchTime()) {\n\t\t\tpanelComponent.getChildren().add(LineComponent.builder()\n\t\t\t\t.left(\"Avg. Catch Time:\")\n\t\t\t\t.right(String.format(\"%.2fs\", session.getAverageTimePerCatch()))\n\t\t\t\t.build());\n\t\t}\n\n\t\treturn super.render(graphics);\n\t}\n}\n","filePath":"src\\main\\java\\com\\maniacalhunter\\ManiacalHunterOverlay.java"},{"fileName":"ManiacalHunterPlugin.java","content":"package com.maniacalhunter;\n\nimport com.google.inject.Provides;\nimport java.awt.image.BufferedImage;\nimport java.time.Duration;\nimport java.time.Instant;\nimport javax.inject.Inject;\n\nimport lombok.Getter;\nimport lombok.Setter;\nimport net.runelite.api.Client;\nimport net.runelite.api.GameObject;\nimport net.runelite.api.InventoryID;\nimport net.runelite.api.GameState;\nimport net.runelite.api.Skill;\nimport net.runelite.api.events.PlayerDespawned;\nimport net.runelite.api.events.PlayerSpawned;\nimport net.runelite.api.events.GameObjectSpawned;\nimport net.runelite.api.events.GameStateChanged;\nimport net.runelite.api.events.GameTick;\nimport net.runelite.api.events.ItemContainerChanged;\nimport net.runelite.api.events.StatChanged;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.ui.overlay.OverlayManager;\nimport net.runelite.client.events.ConfigChanged;\nimport net.runelite.client.Notifier;\nimport net.runelite.client.game.ItemManager;\nimport net.runelite.client.ui.overlay.infobox.InfoBoxManager;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\n@PluginDescriptor(\n\tname \u003d \"Maniacal Hunter\"\n)\npublic class ManiacalHunterPlugin extends Plugin\n{\n\tprivate static final Logger log \u003d LoggerFactory.getLogger(ManiacalHunterPlugin.class);\n\tprivate static final String CONFIG_GROUP \u003d \"maniacalhunter\";\n\tprivate static final String RESET_BUTTON_KEY \u003d \"resetSessionButton\";\n\tprivate static final String CONDENSED_MODE_KEY \u003d \"condensedMode\";\n\n\t@Getter\n    private BufferedImage icon;\n\n\t@Inject\n\tprivate Client client;\n\n\t@Setter\n    @Getter\n    @Inject\n\tprivate Notifier notifier;\n\n\t@Inject\n\tprivate ManiacalHunterConfig config;\n\n\t@Inject\n\tprivate ConfigManager configManager;\n\n    @Inject\n    private ItemManager itemManager;\n\n\t@Inject\n\tprivate InfoBoxManager infoBoxManager;\n\n\t@Getter\n\t@Inject\n\tprivate ManiacalHunterSession session;\n\n\t@Getter\n    private ManiacalHunterSession aggregateSession \u003d new ManiacalHunterSession();\n\n\t@Inject\n\tprivate OverlayManager overlayManager;\n\n\t@Inject\n\tprivate ManiacalHunterOverlay overlay;\n\n\tprivate ManiacalHunterInfoBox infoBox;\n\n\tprivate int lastPerfectTails \u003d 0;\n\tprivate int lastDamagedTails \u003d 0;\n\tprivate int catchesThisTick \u003d 0;\n\tprivate int lastTick \u003d 0;\n\tprivate int lastHunterXp \u003d -1;\n\tprivate boolean inHunterArea \u003d false;\n\n\tprivate void reset()\n\t{\n\t\tsession.reset();\n\t\tcatchesThisTick \u003d 0;\n\t\tlastTick \u003d 0;\n        lastPerfectTails \u003d 0;\n        lastDamagedTails \u003d 0;\n\n\t\tif (client.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tlastHunterXp \u003d client.getSkillExperience(Skill.HUNTER);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlastHunterXp \u003d -1;\n\t\t}\n\t}\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tlog.info(\"Maniacal Hunter started!\");\n\t\tloadSession();\n\t\ticon \u003d itemManager.getImage(ManiacalHunterConstants.MANIACAL_ITEM_ID);\n\t\tinfoBox \u003d new ManiacalHunterInfoBox(this, config, icon);\n\t\tupdateDisplayMode();\n\t}\n\n\t@Override\n\tprotected void shutDown() throws Exception\n\t{\n\t\tlog.info(\"Maniacal Hunter stopped!\");\n\t\tinfoBoxManager.removeInfoBox(infoBox);\n\t\toverlayManager.remove(overlay);\n\t}\n\n\tprivate void loadSession()\n\t{\n\t\taggregateSession.setSessionStartTimeMillis(config.getSessionStartTime());\n\t\taggregateSession.setDurationMillis(config.getDuration());\n\t\taggregateSession.setMonkeysCaught(config.getMonkeysCaught());\n\t\taggregateSession.setTrapsLaid(config.getTrapsLaid());\n\t\taggregateSession.setLastTrapStatus(config.getLastTrapStatus());\n\t\taggregateSession.setPerfectTails(config.getPerfectTails());\n\t\taggregateSession.setDamagedTails(config.getDamagedTails());\n\t\taggregateSession.setDamagedTailsSincePerfect(config.getDamagedTailsSincePerfect());\n\t}\n\n\t@Subscribe\n\tpublic void onGameStateChanged(GameStateChanged gameStateChanged)\n\t{\n\t\tif (gameStateChanged.getGameState() \u003d\u003d GameState.LOGGED_IN)\n\t\t{\n\t\t\tlastHunterXp \u003d client.getSkillExperience(Skill.HUNTER);\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onItemContainerChanged(ItemContainerChanged event)\n\t{\n\t\tif (!isInManiacalHunterArea() || event.getContainerId() !\u003d InventoryID.INVENTORY.getId())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tint currentPerfectTails \u003d event.getItemContainer().count(ManiacalHunterConstants.PERFECT_MONKEY_TAIL);\n\t\tint currentDamagedTails \u003d event.getItemContainer().count(ManiacalHunterConstants.DAMAGED_MONKEY_TAIL);\n\n\t\tint perfectTailsGained \u003d currentPerfectTails - lastPerfectTails;\n\t\tint damagedTailsGained \u003d currentDamagedTails - lastDamagedTails;\n\n\t\tif (catchesThisTick \u003e 0 \u0026\u0026 (perfectTailsGained \u003e 0 || damagedTailsGained \u003e 0))\n\t\t{\n\t\t\tif (perfectTailsGained \u003e 0)\n\t\t\t{\n\t\t\t\thandlePerfectTailGain();\n\t\t\t}\n\t\t\tif (damagedTailsGained \u003e 0)\n\t\t\t{\n\t\t\t\thandleDamagedTailGain();\n\t\t\t}\n\t\t\thandleMonkeyCatch();\n\t\t\tcatchesThisTick--;\n\t\t}\n\n\t\tlastPerfectTails \u003d currentPerfectTails;\n\t\tlastDamagedTails \u003d currentDamagedTails;\n\t}\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick tick)\n\t{\n  \n        if (!isInManiacalHunterArea())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (client.getTickCount() !\u003d lastTick)\n\t\t{\n\t\t\tcatchesThisTick \u003d 0;\n\t\t\tlastTick \u003d client.getTickCount();\n        }\n\t\tif (session.getSessionStartTime() !\u003d null)\n\t\t{\n\t\t\tsession.setDuration(Duration.between(session.getSessionStartTime(), Instant.now()));\n\t\t}\n\t\tif (aggregateSession.getSessionStartTime() !\u003d null)\n\t\t{\n\t\t\taggregateSession.setDuration(Duration.between(aggregateSession.getSessionStartTime(), Instant.now()));\n\t\t\tconfig.setDuration(aggregateSession.getDurationMillis());\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onPlayerSpawned(PlayerSpawned event)\n\t{\n\t\tif (event.getPlayer() !\u003d client.getLocalPlayer())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tboolean currentlyInArea \u003d isInManiacalHunterArea();\n\t\tif (currentlyInArea)\n\t\t{\n\t\t\tinHunterArea \u003d true;\n\t\t\tif (config.autoResetMode() \u003d\u003d ResetMode.ON_ENTER_AREA)\n\t\t\t{\n\t\t\t\treset();\n\t\t\t}\n\t\t}\n\t}\n\n\t@Subscribe\n\tpublic void onPlayerDespawned(PlayerDespawned event)\n\t{\n\t\tif (event.getPlayer() !\u003d client.getLocalPlayer())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (inHunterArea)\n\t\t{\n\t\t\tif (config.autoResetMode() \u003d\u003d ResetMode.ON_LEAVE_AREA)\n\t\t\t{\n\t\t\t\treset();\n\t\t\t}\n\t\t\tinHunterArea \u003d false;\n\t\t}\n\t}\n\n\tprivate boolean isInManiacalHunterArea()\n\t{\n\t\treturn client.getLocalPlayer() !\u003d null \u0026\u0026 client.getLocalPlayer().getWorldLocation().getRegionID() \u003d\u003d ManiacalHunterConstants.MANIACAL_HUNTER_REGION;\n\t}\n\n\t@Subscribe\n\tpublic void onStatChanged(StatChanged statChanged)\n\t{\n\t\tif (statChanged.getSkill() !\u003d Skill.HUNTER || !isInManiacalHunterArea())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (lastHunterXp \u003d\u003d -1)\n\t\t{\n\t\t\tlastHunterXp \u003d statChanged.getXp();\n\t\t\treturn;\n\t\t}\n\n\t\tint currentXp \u003d statChanged.getXp();\n\t\tint gainedXp \u003d currentXp - lastHunterXp;\n\n\t\tif (gainedXp \u003e 0 \u0026\u0026 gainedXp % ManiacalHunterConstants.MANIACAL_MONKEY_XP \u003d\u003d 0)\n\t\t{\n\t\t\tcatchesThisTick +\u003d gainedXp / ManiacalHunterConstants.MANIACAL_MONKEY_XP;\n\t\t}\n\t\t\n\t\tlastHunterXp \u003d currentXp;\n\n\t\tif (gainedXp \u003e 0)\n\t\t{\n\t\t\tif (session.getSessionStartTime() \u003d\u003d null)\n\t\t\t{\n\t\t\t\tsession.startSession();\n\t\t\t}\n\n\t\t\tif (aggregateSession.getSessionStartTime() \u003d\u003d null)\n\t\t\t{\n\t\t\t\taggregateSession.startSession();\n\t\t\t\tconfig.setSessionStartTime(aggregateSession.getSessionStartTimeMillis());\n\t\t\t}\n\t\t}\n\t}\n  \n\tprivate static final int MAX_DISTANCE \u003d 2;\n\n\t@Subscribe\n\tpublic void onGameObjectSpawned(GameObjectSpawned event)\n\t{\n\t\tif (!isInManiacalHunterArea())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tGameObject gameObject \u003d event.getGameObject();\n\t\tif (gameObject \u003d\u003d null\n\t\t\t|| !ManiacalHunterConstants.BOULDER_TRAP_IDS.contains(gameObject.getId())\n\t\t\t|| client.getLocalPlayer().getWorldLocation().distanceTo(gameObject.getWorldLocation()) \u003e MAX_DISTANCE)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tint id \u003d gameObject.getId();\n\n\t\tif (id \u003d\u003d ManiacalHunterConstants.SET_BOULDER_TRAP)\n\t\t{\n\t\t\thandleTrapLaid();\n\t\t}\n\t\telse if (id \u003d\u003d ManiacalHunterConstants.TRIGGERED_BOULDER_TRAP_1 || id \u003d\u003d ManiacalHunterConstants.TRIGGERED_BOULDER_TRAP_2)\n\t\t{\n\t\t\tupdateLastTrapStatus(\"Trap triggered\");\n\t\t}\n\t\telse if (id \u003d\u003d ManiacalHunterConstants.CAUGHT_MONKEY_BOULDER_1 || id \u003d\u003d ManiacalHunterConstants.CAUGHT_MONKEY_BOULDER_2)\n\t\t{\n\t\t\tupdateLastTrapStatus(\"Monkey caught\");\n\t\t}\n\t}\n\n\tprivate void handleMonkeyCatch()\n\t{\n\t\tsession.incrementMonkeysCaught();\n\t\taggregateSession.incrementMonkeysCaught();\n\t\tconfig.setMonkeysCaught(aggregateSession.getMonkeysCaught());\n\t\tif (config.milestoneNotification() \u0026\u0026 session.getMonkeysCaught() \u003e 0 \u0026\u0026 session.getMonkeysCaught() % config.milestoneInterval() \u003d\u003d 0)\n\t\t{\n\t\t\tnotifier.notify(\"Maniacal Hunter milestone: \" + session.getMonkeysCaught() + \" monkeys caught!\");\n\t\t}\n\t}\n\n\tprivate void handlePerfectTailGain() {\n\t\tsession.incrementPerfectTails();\n\t\taggregateSession.incrementPerfectTails();\n\t\tconfig.setPerfectTails(aggregateSession.getPerfectTails());\n\t\tconfig.setDamagedTailsSincePerfect(aggregateSession.getDamagedTailsSincePerfect());\n\t}\n\n\tprivate void handleDamagedTailGain() {\n\t\tsession.incrementDamagedTails();\n\t\taggregateSession.incrementDamagedTails();\n\t\tconfig.setDamagedTails(aggregateSession.getDamagedTails());\n\t\tconfig.setDamagedTailsSincePerfect(aggregateSession.getDamagedTailsSincePerfect());\n\t}\n\n\tprivate void handleTrapLaid() {\n\t\tsession.incrementTrapsLaid();\n\t\taggregateSession.incrementTrapsLaid();\n\t\tconfig.setTrapsLaid(aggregateSession.getTrapsLaid());\n\t\tupdateLastTrapStatus(\"Trap set\");\n\t}\n\n\tprivate void updateLastTrapStatus(String status) {\n\t\tsession.setLastTrapStatus(status);\n\t\taggregateSession.setLastTrapStatus(status);\n\t\tconfig.setLastTrapStatus(aggregateSession.getLastTrapStatus());\n\t}\n\n\t@Provides\n\tManiacalHunterConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(ManiacalHunterConfig.class);\n\t}\n\n\t@Provides\n\tManiacalHunterSession provideSession()\n\t{\n\t\treturn new ManiacalHunterSession();\n\t}\n\n    @Subscribe\n\tpublic void onConfigChanged(ConfigChanged event)\n\t{\n\t\tif (!event.getGroup().equals(CONFIG_GROUP))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (event.getKey().equals(RESET_BUTTON_KEY))\n\t\t{\n\t\t\tif (config.resetSession())\n\t\t\t{\n\t\t\t\treset();\n\t\t\t\tconfigManager.setConfiguration(CONFIG_GROUP, RESET_BUTTON_KEY, false);\n\t\t\t}\n\t\t}\n\t\tif (event.getKey().equals(CONDENSED_MODE_KEY))\n\t\t{\n\t\t\tupdateDisplayMode();\n\t\t}\n\t}\n\n\tprivate void updateDisplayMode()\n\t{\n\t\tinfoBoxManager.removeInfoBox(infoBox);\n\t\toverlayManager.remove(overlay);\n\t\tif (config.condensedMode())\n\t\t{\n\t\t\tinfoBoxManager.addInfoBox(infoBox);\n\t\t}\n\t\telse\n\t\t{\n\t\t\toverlayManager.add(overlay);\n\t\t}\n\t}\n}\n","filePath":"src\\main\\java\\com\\maniacalhunter\\ManiacalHunterPlugin.java"},{"fileName":"ManiacalHunterSession.java","content":"package com.maniacalhunter;\n\nimport lombok.Getter;\nimport lombok.Setter;\n\nimport java.time.Duration;\nimport java.time.Instant;\n\npublic class ManiacalHunterSession\n{\n\tprivate static final int PERFECT_TAIL_DROP_CHANCE \u003d 5000;\n\tprivate static final double PERFECT_TAIL_DROP_RATE \u003d 1.0 / PERFECT_TAIL_DROP_CHANCE;\n\tprivate static final double MILLIS_PER_HOUR \u003d 3_600_000.0;\n\tprivate static final double MILLIS_PER_SECOND \u003d 1_000.0;\n\n    @Getter\n\t@Setter\n    private long sessionStartTimeMillis;\n\t@Getter\n\t@Setter\n    private long durationMillis;\n\t@Getter\n\t@Setter\n    private int monkeysCaught;\n\t@Getter\n\t@Setter\n    private int trapsLaid;\n\t@Getter\n    @Setter\n    private String lastTrapStatus;\n\t@Getter\n\t@Setter\n    private int perfectTails;\n\t@Getter\n\t@Setter\n    private int damagedTails;\n\t@Getter\n\t@Setter\n\tprivate int damagedTailsSincePerfect;\n\n\tpublic void startSession()\n\t{\n\t\tthis.sessionStartTimeMillis \u003d Instant.now().toEpochMilli();\n\t}\n\n\tpublic void reset()\n\t{\n\t\tthis.sessionStartTimeMillis \u003d 0;\n\t\tthis.durationMillis \u003d 0;\n\t\tthis.monkeysCaught \u003d 0;\n\t\tthis.trapsLaid \u003d 0;\n\t\tthis.lastTrapStatus \u003d \"N/A\";\n\t\tthis.perfectTails \u003d 0;\n\t\tthis.damagedTails \u003d 0;\n\t\tthis.damagedTailsSincePerfect \u003d 0;\n\t}\n\n\tpublic void incrementMonkeysCaught()\n\t{\n\t\tthis.monkeysCaught++;\n\t}\n\n\tpublic void incrementTrapsLaid()\n\t{\n\t\tthis.trapsLaid++;\n\t}\n\n\tpublic void incrementPerfectTails()\n\t{\n\t\tthis.perfectTails++;\n\t\tthis.damagedTailsSincePerfect \u003d 0;\n\t}\n\n\tpublic void incrementDamagedTails()\n\t{\n\t\tthis.damagedTails++;\n\t\tthis.damagedTailsSincePerfect++;\n\t}\n\n\tpublic double getLuckPercentage()\n\t{\n\t\tif (damagedTailsSincePerfect \u003d\u003d 0)\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\t\t// This calculates the probability of getting at least one perfect tail in N trials,\n\t\t// which is 1 minus the probability of getting zero perfect tails.\n\t\treturn (1.0 - Math.pow(1.0 - PERFECT_TAIL_DROP_RATE, damagedTailsSincePerfect)) * 100;\n\t}\n\n\tpublic double getSuccessRate()\n\t{\n\t\tif (trapsLaid \u003d\u003d 0)\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\t\treturn (double) monkeysCaught / trapsLaid * 100;\n\t}\n\n\tpublic double getMonkeysPerHour()\n\t{\n\t\tif (durationMillis \u003d\u003d 0)\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\t\treturn (double) monkeysCaught / (durationMillis / MILLIS_PER_HOUR);\n\t}\n\n\tpublic double getAverageTimePerCatch()\n\t{\n\t\tif (monkeysCaught \u003d\u003d 0 || durationMillis \u003d\u003d 0)\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\t\treturn (double) durationMillis / monkeysCaught / MILLIS_PER_SECOND;\n\t}\n\n\tpublic Instant getSessionStartTime()\n\t{\n\t\treturn sessionStartTimeMillis \u003d\u003d 0 ? null : Instant.ofEpochMilli(sessionStartTimeMillis);\n\t}\n\n\tpublic Duration getDuration()\n\t{\n\t\treturn durationMillis \u003d\u003d 0 ? null : Duration.ofMillis(durationMillis);\n\t}\n\n\tpublic void setDuration(Duration duration)\n\t{\n\t\tthis.durationMillis \u003d duration.toMillis();\n\t}\n}\n","filePath":"src\\main\\java\\com\\maniacalhunter\\ManiacalHunterSession.java"},{"fileName":"ResetMode.java","content":"package com.maniacalhunter;\n\npublic enum ResetMode\n{\n\tON_ENTER_AREA,\n\tON_LEAVE_AREA,\n\tNEVER\n}\n","filePath":"src\\main\\java\\com\\maniacalhunter\\ResetMode.java"},{"fileName":"ManiacalHunterPluginTest.java","content":"package com.maniacalhunter;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class ManiacalHunterPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(ManiacalHunterPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\com\\maniacalhunter\\ManiacalHunterPluginTest.java"}]},{"commit":"1396d7db9515407518ca6a183d0a7d42498fb013","repository":"https://github.com/Droei/Droei-RuneLite-Plugins.git","internalName":"entity-masker","files":[{"fileName":"test.java","content":"this file does not actually exist, because the repo does not exist","filePath":"asker\\test.java"}]},{"commit":"cec3e358e668bf2846fc8c794eb52c4bbc18038b","repository":"https://github.com/hootisman/muted_level_jingles.git","internalName":"unmutedjingles","files":[{"fileName":"JingleData.java","content":"package hootisman.unmutedjingles.jingles;\n\nimport net.runelite.api.Skill;\n\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.function.Function;\nimport java.util.stream.Collectors;\nimport java.util.stream.Stream;\n\npublic class JingleData {\n    // ***** Constants *****\n\n    static final Set\u003cInteger\u003e ATTACK_UNLOCKS \u003d\n            Stream.of(5, 10, 15, 20, 30, 40, 42, 50, 55,\n                    60, 65, 70, 75, 77, 78, 80, 82, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e COOKING_UNLOCKS \u003d\n            Stream.of(5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,\n                    20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n                    37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52,\n                    53, 54, 55, 57, 58, 59, 60, 62, 64, 65, 67, 68, 70, 72, 73, 75,\n                    80, 82, 84, 85, 88, 90, 91, 92, 95, 96, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e CRAFTING_UNLOCKS \u003d\n            Stream.of(3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,\n                    18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33,\n                    34, 35, 36, 37, 38, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50,\n                    51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66,\n                    67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 82, 83,\n                    84, 85, 86, 87, 88, 89, 90, 92, 95, 98, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e DEFENCE_UNLOCKS \u003d\n            Stream.of(5, 10, 20, 25, 30, 35, 40, 42, 45, 50,\n                    55, 60, 65, 70, 75, 78, 80, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e FARMING_UNLOCKS \u003d\n            Stream.of(2, 3, 4, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,\n                    19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34,\n                    35, 36, 38, 39, 40, 42, 44, 45, 46, 47, 48, 49, 50, 51, 53, 54,\n                    55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 67, 68, 69, 70, 72,\n                    73, 74, 75, 76, 79, 81, 83, 84, 85, 90, 91, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e FIREMAKING_UNLOCKS \u003d\n            Stream.of(4, 5, 11, 12, 15, 16, 20, 21, 25, 26, 30, 33, 35, 40,\n                    42, 43, 45, 47, 49, 50, 52, 55, 60, 62, 65, 66, 70, 75, 80, 85, 90, 95, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e FISHING_UNLOCKS \u003d\n            Stream.of(5, 7, 10, 15, 16, 20, 23, 25, 28, 29, 30, 33, 34, 35,\n                    38, 39, 40, 43, 45, 46, 47, 48, 50, 53, 55, 56, 58, 60, 61, 62,\n                    65, 68, 70, 71, 73, 75, 76, 79, 80, 81, 82, 85, 87, 90, 91, 96, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e FLETCHING_UNLOCKS \u003d\n            Stream.of(3, 5, 7, 9, 10, 11, 15, 17, 18, 20, 22, 24, 25, 26,\n                    27, 30, 32, 33, 35, 37, 38, 39, 40, 41, 42, 43, 45, 46, 47, 48,\n                    49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 65, 67,\n                    69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 80, 81, 82, 84, 85, 87,\n                    90, 92, 95, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e HERBLORE_UNLOCKS \u003d\n            Stream.of(3, 4, 5, 6, 8, 9, 10, 11, 12, 14, 15, 18, 19, 20, 22,\n                    24, 25, 26, 29, 30, 31, 33, 34, 36, 37, 38, 39, 40, 42, 44, 45,\n                    47, 48, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63,\n                    65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80,\n                    81, 82, 83, 84, 85, 86, 87, 88, 90, 91, 92, 94, 97, 98, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e MAGIC_UNLOCKS \u003d\n            Stream.of(3, 4, 5, 6, 7, 9, 11, 13, 14, 15, 16, 17, 19, 20, 21,\n                    23, 24, 25, 27, 28, 29, 30, 31, 33, 34, 35, 37, 38, 39, 40, 41,\n                    42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57,\n                    58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73,\n                    74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89,\n                    90, 91, 92, 93, 94, 95, 96, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e MINING_UNLOCKS \u003d\n            Stream.of(5, 6, 10, 11, 14, 15, 17, 20, 21, 22, 25, 30, 31, 35,\n                    37, 38, 39, 40, 41, 42, 43, 45, 50, 52, 55, 57, 60, 61, 64, 65,\n                    67, 68, 70, 71, 72, 75, 78, 80, 81, 82, 85, 90, 92, 97, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e PRAYER_UNLOCKS \u003d\n            Stream.of(3, 4, 7, 8, 9, 10, 12, 13, 16, 19, 20, 22, 24, 25, 26,\n                    27, 28, 30, 31, 32, 34, 36, 37, 40, 42, 43, 44, 45, 46, 47, 48,\n                    49, 50, 52, 54, 55, 56, 60, 62, 63, 64, 65, 68, 70, 72, 74, 75,\n                    76, 77, 80, 84, 85, 88, 90, 92, 96, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e RANGED_UNLOCKS \u003d\n            Stream.of(5, 10, 16, 19, 20, 21, 25, 26, 28, 30, 31, 35, 36, 37,\n                    39, 40, 42, 45, 46, 47, 50, 55, 60, 61, 62, 64, 65, 66, 70, 75, 77, 80, 85, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e RUNECRAFT_UNLOCKS \u003d\n            Stream.of(2, 5, 6, 9, 10, 11, 13, 14, 15, 19, 20, 22, 23, 25,\n                    26, 27, 28, 30, 33, 35, 38, 40, 42, 44, 46, 48, 49, 50, 52, 54,\n                    55, 56, 57, 59, 60, 65, 66, 70, 74, 75, 76, 77, 78, 79, 81, 82,\n                    84, 85, 88, 90, 91, 92, 95, 98, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e SLAYER_UNLOCKS \u003d\n            Stream.of(5, 7, 10, 15, 17, 18, 20, 22, 25, 30, 32, 33, 35, 37,\n                    38, 39, 40, 42, 44, 45, 47, 48, 50, 52, 55, 56, 57, 58, 60, 62,\n                    63, 65, 66, 68, 69, 70, 72, 75, 77, 80, 82, 83, 84, 85, 87, 90,\n                    91, 92, 93, 95, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e THIEVING_UNLOCKS \u003d\n            Stream.of(2, 5, 10, 13, 14, 15, 16, 17, 20, 21, 22, 23, 25, 27,\n                    28, 30, 31, 32, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45,\n                    46, 47, 48, 49, 50, 51, 52, 53, 55, 56, 57, 58, 59, 60, 61, 62,\n                    64, 65, 66, 70, 71, 72, 75, 78, 80, 81, 82, 84, 85, 90, 91, 93, 94, 95, 99).collect(Collectors.toUnmodifiableSet());\n    static final Set\u003cInteger\u003e WOODCUTTING_UNLOCKS \u003d\n            Stream.of(6, 10, 11, 12, 15, 19, 20, 21, 24, 27, 29, 30, 31, 35,\n                    36, 40, 41, 42, 44, 45, 48, 50, 54, 55, 56, 57, 60, 61, 62, 65,\n                    68, 70, 71, 72, 75, 84, 90, 96, 99).collect(Collectors.toUnmodifiableSet());\n\n    //todo: test all durations\n    //(duration in seconds)/0.6\n    public static Map\u003cSkill, Function\u003cInteger, Integer\u003e\u003e JINGLE_DURATIONS \u003d Map.ofEntries(\n            Map.entry(Skill.AGILITY, level -\u003e 10),\n            Map.entry(Skill.ATTACK, getRegularUnlocksFunction(6,13,ATTACK_UNLOCKS)),\n            Map.entry(Skill.CONSTRUCTION, level -\u003e 10),\n            Map.entry(Skill.COOKING, getRegularUnlocksFunction(7,6,COOKING_UNLOCKS)),\n            Map.entry(Skill.CRAFTING, getRegularUnlocksFunction(16,10,CRAFTING_UNLOCKS)),\n            Map.entry(Skill.DEFENCE, getRegularUnlocksFunction(9,12,DEFENCE_UNLOCKS)),\n            Map.entry(Skill.FARMING, getRegularUnlocksFunction(7,12,FARMING_UNLOCKS)),\n            Map.entry(Skill.FIREMAKING, getRegularUnlocksFunction(10,10,FIREMAKING_UNLOCKS)),\n            Map.entry(Skill.FISHING, getRegularUnlocksFunction(11,9,FISHING_UNLOCKS)),\n            Map.entry(Skill.FLETCHING, getRegularUnlocksFunction(9,8,FLETCHING_UNLOCKS)),\n            Map.entry(Skill.HERBLORE, getRegularUnlocksFunction(5,10,HERBLORE_UNLOCKS)),\n            Map.entry(Skill.HITPOINTS, level -\u003e level \u003c 50 ? 5 : 8),\n            Map.entry(Skill.HUNTER, level -\u003e 12),\n            Map.entry(Skill.MAGIC, getRegularUnlocksFunction(11,11,MAGIC_UNLOCKS)),\n            Map.entry(Skill.MINING, getRegularUnlocksFunction(10,10,MINING_UNLOCKS)),\n            Map.entry(Skill.PRAYER, getRegularUnlocksFunction(12,12,PRAYER_UNLOCKS)),\n            Map.entry(Skill.RANGED, getRegularUnlocksFunction(8,9,RANGED_UNLOCKS)),\n            Map.entry(Skill.RUNECRAFT, getRegularUnlocksFunction(13,13,RUNECRAFT_UNLOCKS)),\n            Map.entry(Skill.SLAYER, getRegularUnlocksFunction(10,15,SLAYER_UNLOCKS)),\n            Map.entry(Skill.SMITHING, level -\u003e 9),     //every level is an unlock\n            Map.entry(Skill.STRENGTH, level -\u003e level \u003c 50 ? 10 : 8),\n            Map.entry(Skill.THIEVING, getRegularUnlocksFunction(11,8,THIEVING_UNLOCKS)),\n            Map.entry(Skill.WOODCUTTING, getRegularUnlocksFunction(10,11,WOODCUTTING_UNLOCKS))\n    );\n\n    // ***** Mutable *****\n    public static Map\u003cSkill, Integer\u003e SKILL_LEVELS \u003d new HashMap\u003c\u003e();\n    static {\n        SKILL_LEVELS.put(Skill.AGILITY, -1);\n        SKILL_LEVELS.put(Skill.ATTACK, -1);\n        SKILL_LEVELS.put(Skill.CONSTRUCTION, -1);\n        SKILL_LEVELS.put(Skill.COOKING, -1);\n        SKILL_LEVELS.put(Skill.CRAFTING, -1);\n        SKILL_LEVELS.put(Skill.DEFENCE, -1);\n        SKILL_LEVELS.put(Skill.FARMING, -1);\n        SKILL_LEVELS.put(Skill.FIREMAKING, -1);\n        SKILL_LEVELS.put(Skill.FISHING, -1);\n        SKILL_LEVELS.put(Skill.FLETCHING, -1);\n        SKILL_LEVELS.put(Skill.HERBLORE, -1);\n        SKILL_LEVELS.put(Skill.HITPOINTS, -1);\n        SKILL_LEVELS.put(Skill.HUNTER, -1);\n        SKILL_LEVELS.put(Skill.MAGIC, -1);\n        SKILL_LEVELS.put(Skill.MINING, -1);\n        SKILL_LEVELS.put(Skill.PRAYER, -1);\n        SKILL_LEVELS.put(Skill.RANGED, -1);\n        SKILL_LEVELS.put(Skill.RUNECRAFT, -1);\n        SKILL_LEVELS.put(Skill.SLAYER, -1);\n        SKILL_LEVELS.put(Skill.SMITHING, -1);\n        SKILL_LEVELS.put(Skill.STRENGTH, -1);\n        SKILL_LEVELS.put(Skill.THIEVING, -1);\n        SKILL_LEVELS.put(Skill.WOODCUTTING, -1);\n    };\n\n    //true if level was set at game start\n    public static boolean isLevelInited(Skill skill){\n        return SKILL_LEVELS.get(skill) !\u003d -1;\n    }\n\n    static Function\u003cInteger, Integer\u003e getRegularUnlocksFunction(int defaultDuration, int unlockDuration, Set\u003cInteger\u003e levelsWithUnlocks){\n        return level -\u003e levelsWithUnlocks.contains(level) ? unlockDuration : defaultDuration;\n    }\n}\n","filePath":"src\\main\\java\\hootisman\\unmutedjingles\\jingles\\JingleData.java"},{"fileName":"JingleManager.java","content":"package hootisman.unmutedjingles.jingles;\n\nimport hootisman.unmutedjingles.UnmutedJinglesConfig;\nimport lombok.*;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.Client;\nimport net.runelite.api.Skill;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.plugins.music.MusicConfig;\nimport javax.annotation.Nullable;\nimport javax.inject.Inject;\nimport javax.inject.Singleton;\nimport java.util.LinkedList;\nimport java.util.Objects;\n\n@Slf4j\n@Singleton\npublic class JingleManager {\n\n    @Inject\n    private Client client;\n\n    @Setter\n    @Nullable\n    private MusicConfig musicPluginConfig;\n\n    @Inject\n    private ClientThread clientThread;\n\n    @Inject\n    private UnmutedJinglesConfig config;\n\n    private int jingleTick;\n\n    private LinkedList\u003cJingle\u003e jingleQueue;\n\n\n    public JingleManager(){\n        jingleTick \u003d -1;\n        jingleQueue \u003d new LinkedList\u003c\u003e();\n    }\n\n\n\n    public void queueJingle(Skill skill, int level){\n        if (jingleQueue.isEmpty() \u0026\u0026 !isMusicMuted()) return;\n\n        int duration \u003d JingleData.JINGLE_DURATIONS.get(skill).apply(level);\n        log.debug(\"*j* adding \" + skill +\" jingle of \" + duration);\n        jingleQueue.add(Jingle.of(duration, false));\n\n        if (!isWindowClosed()){\n            //there is an open window\n            return;\n        }\n\n        startJingle();\n    }\n\n    private void startJingle(){\n        Jingle jingle \u003d jingleQueue.getFirst();\n\n        muteMusic(false);\n        log.debug(\"*j* unmuting jingle for \" + jingle.duration + \" ticks...\");\n        jingleTick \u003d 0;\n        jingle.setJinglePlaying(true);\n    }\n\n    public void endJingle(){\n        muteMusic(true);\n        log.debug(\"*j* jingle ended, muting...\");\n        jingleTick \u003d -1;\n        jingleQueue.remove();\n    }\n\n    public void tickJingle(){\n        if (jingleQueue.isEmpty()) return;\n\n        if (isWindowClosed() \u0026\u0026 !jingleQueue.getFirst().isJinglePlaying) startJingle();\n\n        if (jingleTick \u003e jingleQueue.getFirst().duration - 1){\n            endJingle();\n        }else if (jingleTick !\u003d -1){\n            jingleTick +\u003d 1;\n            log.debug(\"*G* \" + jingleTick);\n        }\n    }\n\n    void muteMusic(boolean shouldMute){\n        int val;\n        if (musicPluginConfig \u003d\u003d null || !musicPluginConfig.granularSliders()){\n            val \u003d shouldMute ? 0 : config.jingleVolume();\n            client.setMusicVolume(val);\n        }else{\n            val \u003d shouldMute ? -config.jingleVolume() : config.jingleVolume();\n            musicPluginConfig.setMusicVolume(val);\n        }\n\n    }\n\n    //if widget S161.16 has 1 or more children, then return true\n    public boolean isWindowClosed() {\n        return Objects.requireNonNull(client.getWidget(161, 16)).getNestedChildren().length \u003d\u003d 0;\n    }\n\n    public boolean isMusicMuted(){\n        return client.getMusicVolume() \u003d\u003d 0;\n    }\n\n    @AllArgsConstructor(access \u003d AccessLevel.PROTECTED, staticName \u003d \"of\")\n    private static class Jingle {\n        int duration;\n        @Setter\n        boolean isJinglePlaying;    //when music is unmuted we might need to know if its because of user or jingle\n    }\n}\n","filePath":"src\\main\\java\\hootisman\\unmutedjingles\\jingles\\JingleManager.java"},{"fileName":"UnmutedJinglesConfig.java","content":"package hootisman.unmutedjingles;\n\nimport net.runelite.client.config.Config;\nimport net.runelite.client.config.ConfigGroup;\nimport net.runelite.client.config.ConfigItem;\nimport net.runelite.client.config.Range;\n\n@ConfigGroup(\"unmutedjingles\")\npublic interface UnmutedJinglesConfig extends Config\n{\n\t@Range(max\u003d255)\n\t@ConfigItem(\n\t\tkeyName \u003d \"jingleVolume\",\n\t\tname \u003d \"Jingle Volume\",\n\t\tdescription \u003d \"Volume when jingles are played\"\n\t)\n\tdefault int jingleVolume()\n\t{\n\t\treturn 50;\n\t}\n\n}\n","filePath":"src\\main\\java\\hootisman\\unmutedjingles\\UnmutedJinglesConfig.java"},{"fileName":"UnmutedJinglesPlugin.java","content":"package hootisman.unmutedjingles;\n\nimport com.google.inject.Provides;\nimport javax.inject.Inject;\n\nimport hootisman.unmutedjingles.jingles.JingleData;\nimport hootisman.unmutedjingles.jingles.JingleManager;\nimport lombok.extern.slf4j.Slf4j;\nimport net.runelite.api.*;\nimport net.runelite.api.events.*;\nimport net.runelite.client.callback.ClientThread;\nimport net.runelite.client.config.ConfigManager;\nimport net.runelite.client.eventbus.Subscribe;\nimport net.runelite.client.events.PluginChanged;\nimport net.runelite.client.plugins.Plugin;\nimport net.runelite.client.plugins.PluginDependency;\nimport net.runelite.client.plugins.PluginDescriptor;\nimport net.runelite.client.plugins.PluginManager;\nimport net.runelite.client.plugins.music.MusicConfig;\nimport net.runelite.client.plugins.music.MusicPlugin;\n\nimport java.util.List;\n\n@Slf4j\n@PluginDescriptor(\n\tname \u003d \"Unmuted Jingles\"\n)\n@PluginDependency(MusicPlugin.class)\npublic class UnmutedJinglesPlugin extends Plugin\n{\n\t@Inject\n\tprivate Client client;\n\n\t@Inject\n\tprivate ClientThread clientThread;\n\n\t@Inject\n\tprivate MusicPlugin musicPlugin;\n\n\t@Inject\n\tprivate PluginManager pluginManager;\n\n\t@Inject\n\tprivate UnmutedJinglesConfig config;\n\n\t@Inject\n\tprivate JingleManager jingleManager;\n\n\t@Override\n\tprotected void startUp() throws Exception\n\t{\n\t\tlog.debug(\"*START* Setting music plugin; isEnabled\" + pluginManager.isPluginEnabled(musicPlugin));\n\t\tjingleManager.setMusicPluginConfig(pluginManager.isPluginEnabled(musicPlugin) ? (MusicConfig) pluginManager.getPluginConfigProxy(musicPlugin) : null);\n\t}\n\n\n\t@Subscribe\n\tpublic void onPluginChanged(PluginChanged e){\n\t\tif (!e.getPlugin().equals(musicPlugin)) return;\n\n\t\tlog.debug(\"*P* Setting music plugin; isLoaded\" + e.isLoaded());\n\t\tjingleManager.setMusicPluginConfig(e.isLoaded() ? (MusicConfig) pluginManager.getPluginConfigProxy(musicPlugin) : null);\n\n\t}\n\n\t@Subscribe\n\tpublic void onStatChanged(StatChanged e){\n\t\tSkill skill \u003d e.getSkill();\n\t\tint level \u003d e.getLevel();\n\t\tint listedLevel \u003d JingleData.SKILL_LEVELS.get(skill);\n\n\t\tlog.debug(\"*stat* \" + e.toString());\n\n\t\t//level never changed\n\t\tif (listedLevel \u003d\u003d level) return;\n\n\t\tif (JingleData.isLevelInited(skill)){\n\t\t\tjingleManager.queueJingle(skill, level);\n        }\n\n\t\tJingleData.SKILL_LEVELS.put(skill, level);\n\t}\n\n\n\n\n\t@Subscribe\n\tpublic void onGameTick(GameTick e){\n\t\tjingleManager.tickJingle();\n\n\t\t/*\n\t\tList\u003cMidiRequest\u003e reqs \u003d client.getActiveMidiRequests();\n\t\tif (!reqs.isEmpty()){\n\t\t\treqs.forEach(req -\u003e {\n\t\t\t\tlog.info(\"*G* req \" + req.getArchiveId() + \" \" + req.isJingle());\n\t\t\t});\n\n\t\t}\n\t\t */\n\t}\n\n\t/*\n\t@Subscribe\n\tpublic void onWidgetLoaded(WidgetLoaded e){\n\t\t//todo: get other jingles to work\n\t\tlog.info(\"*W* \" + e.toString());\n\n\t\tif(e.getGroupId() \u003d\u003d 193){\n\t\t\tWidget icon  \u003d client.getWidget(ComponentID.DIALOG_SPRITE_SPRITE);\n\n\t\t\tif (icon !\u003d null \u0026\u0026 icon.getItemId() \u003d\u003d 2996){\n\t\t\t\tlog.info(\"*W* This is a brimhaven ticket!\");\n\t\t\t\tstartJingle();\n\t\t\t}\n\t\t}\n\n\t\t//level up window id\n\t\t//else if(e.getGroupId() \u003d\u003d 233){\n\t\t//\tstartJingle();\n\t\t//}\n\t}\n\n\t */\n\n\n\t@Provides\n\tUnmutedJinglesConfig provideConfig(ConfigManager configManager)\n\t{\n\t\treturn configManager.getConfig(UnmutedJinglesConfig.class);\n\t}\n}\n","filePath":"src\\main\\java\\hootisman\\unmutedjingles\\UnmutedJinglesPlugin.java"},{"fileName":"UnmutedJinglesPluginTest.java","content":"package hootisman.unmutedjingles;\n\nimport net.runelite.client.RuneLite;\nimport net.runelite.client.externalplugins.ExternalPluginManager;\n\npublic class UnmutedJinglesPluginTest\n{\n\tpublic static void main(String[] args) throws Exception\n\t{\n\t\tExternalPluginManager.loadBuiltin(UnmutedJinglesPlugin.class);\n\t\tRuneLite.main(args);\n\t}\n}","filePath":"src\\test\\java\\hootisman\\unmutedjingles\\UnmutedJinglesPluginTest.java"}]}]