package com.trs;

import java.awt.Color;
import net.runelite.client.config.Config;
import net.runelite.client.config.ConfigGroup;
import net.runelite.client.config.ConfigItem;
import net.runelite.client.config.ConfigSection;
import net.runelite.client.config.Alpha;
import com.trs.model.CraftingSetting;
import com.trs.model.CraftingCompleteBehaviour;

@ConfigGroup("gauntlet-crafting")
public interface GauntletPluginConfig extends Config
{
	@ConfigSection(
		position = 0,
		name = "Weapon Crafting",
		description = "Pick what to weapons to craft"
	)
	String sectionWeaponCrafting = "sectionWeaponCrafting";
	
	@ConfigItem(
		position = 0,
		keyName = "craftingOptionRanged",
		name = "Ranged",
		description = "Choose tier of ranged weapon to craft",
		section = sectionWeaponCrafting
	)
	default CraftingSetting craftingOptionRanged() {
			return CraftingSetting.PERFECTED;
	}

	@ConfigItem(
		position = 1,
		keyName = "craftingOptionRangedWithMaterial",
		name = "Ranged - With materials",
		description = "Highlight ranged weapon only if you have the materials needed to craft the chosen tier",
		section = sectionWeaponCrafting
	)
	default boolean craftingOptionRangedWithMaterial() {
		return false;
	}
	
	@ConfigItem(
		position = 2,
		keyName = "craftingOptionMagic",
		name = "Magic",
		description = "Choose tier of magic weapon to craft",
		section = sectionWeaponCrafting
	)
	default CraftingSetting craftingOptionMagic() {
			return CraftingSetting.PERFECTED;
	}

	@ConfigItem(
		position = 3,
		keyName = "craftingOptionMagicWithMaterial",
		name = "Magic - With materials",
		description = "Highlight magic weapon only if you have the materials needed to craft the chosen tier",
		section = sectionWeaponCrafting
	)
	default boolean craftingOptionMagicWithMaterial() {
		return false;
	}

	@ConfigItem(
		position = 4,
		keyName = "craftingOptionMelee",
		name = "Melee",
		description = "Choose tier of melee weapon to craft",
		section = sectionWeaponCrafting
	)
	default CraftingSetting craftingOptionMelee() {
			return CraftingSetting.NONE;
	}

	@ConfigItem(
		position = 5,
		keyName = "craftingOptionMeleeWithMaterial",
		name = "Melee - With materials",
		description = "Highlight melee weapon only if you have the materials needed to craft the chosen tier",
		section = sectionWeaponCrafting
	)
	default boolean craftingOptionMeleeWithMaterial() {
		return false;
	}

	@ConfigSection(
		position = 1,
		name = "Armor Crafting",
		description = "Pick what to armor to craft"
	)
	String sectionArmorCrafting = "sectionArmorCrafting";

	@ConfigItem(
		position = 1,
		keyName = "craftingOptionHelm",
		name = "Helm",
		description = "Choose tier of helm to craft",
		section = sectionArmorCrafting
	)
	default CraftingSetting craftingOptionHelm() {
			return CraftingSetting.BASIC;
	}

	@ConfigItem(
		position = 2,
		keyName = "craftingOptionBody",
		name = "Body",
		description = "Choose tier of body to craft",
		section = sectionArmorCrafting
	)
	default CraftingSetting craftingOptionBody() {
			return CraftingSetting.BASIC;
	}

	@ConfigItem(
		position = 3,
		keyName = "craftingOptionLegs",
		name = "Legs",
		description = "Choose tier of legs to craft",
		section = sectionArmorCrafting
	)
	default CraftingSetting craftingOptionLegs() {
			return CraftingSetting.BASIC;
	}

	@ConfigSection(
		position = 2,
		name = "Item Crafting",
		description = "Pick what to items to craft"
	)
	String sectionItemCrafting = "sectionItemCrafting";

	@ConfigItem(
		position = 0,
		keyName = "craftingTeleportCount",
		name = "Teleport crystal",
		description = "Number of teleport crystals to have",
		section = sectionItemCrafting
	)
	default int craftingTeleportCount() {
		return 1;
	}

	@ConfigItem(
		position = 1,
		keyName = "craftingPotionCount",
		name = "Potion vial",
		description = "Number of potions/vials to have",
		section = sectionItemCrafting
	)
	default int craftingPotionCount() {
		return 2;
	}

	@ConfigItem(
		position = 2,
		keyName = "craftingCrystalPaddlefishCount",
		name = "Crystal paddlefish",
		description = "Number of crystal paddlefish to have",
		section = sectionItemCrafting
	)
	default int craftingCrystalPaddlefishCount() {
		return 0;
	}

	@ConfigItem(
		position = 3,
		keyName = "craftingEscapeCrystalCount",
		name = "Escape crystal",
		description = "Number of escape crystals to have",
		section = sectionItemCrafting
	)
	default int craftingEscapeCrystalCount() {
		return 0;
	}

	@ConfigSection(
		position = 3,
		name = "Color Settings",
		description = "Pick colors for each overlay element"
	)
	String sectionColors = "sectionColors";

	@ConfigItem(
		position = 0,
		keyName = "craftingHighlightColor",
		name = "Craft highlight",
		description = "Choose the color used to highlight craftable options in the crafting interface",
		section = sectionColors
	)
	@Alpha
	default Color craftingHighlightColor() {
		return new Color(0, 255, 0, 0);
	}
	@ConfigItem(
		position = 1,
		keyName = "craftingHighlightOutlineColor",
		name = "Craft outline",
		description = "Choose the color used to outline craftable options in the crafting interface",
		section = sectionColors
	)
	@Alpha
	default Color craftingHighlightOutlineColor() {
		return new Color(0, 255, 0, 255);
	}
	
	@ConfigItem(
		position = 2,
		keyName = "craftingHighlightStroke",
		name = "Craft stroke",
		description = "Choose the stoke width used to highlight the crafting interface",
		section = sectionColors
	)
	default int craftingHighlightStroke() {
		return 2;
	}
	
	@ConfigItem(
		position = 3,
		keyName = "craftingHighlightMissingMaterialsColor",
		name = "Missing materials highlight",
		description = "Choose the color used to fill options that need materials in the crafting interface",
		section = sectionColors
	)
	@Alpha
	default Color craftingHighlightMissingMaterialsColor() {
		return new Color(64, 64, 64, 80);
	}
	@ConfigItem(
		position = 4,
		keyName = "craftingHighlightMissingMaterialsOutlineColor",
		name = "Missing materials outline",
		description = "Choose the color used to outline options that need materials in the crafting interface",
		section = sectionColors
	)
	@Alpha
	default Color craftingHighlightMissingMaterialsOutlineColor() {
		return new Color(255, 255, 0, 200);
	}
	
	@ConfigItem(
		position = 5,
		keyName = "craftingHighlightMissingMaterialsStroke",
		name = "Missing materials stroke",
		description = "Choose the stoke width used to highlight the crafting interface",
		section = sectionColors
	)
	default int craftingHighlightMissingMaterialsStroke() {
		return 1;
	}
	
	@ConfigItem(
		position = 6,
		keyName = "craftingHighlightCompleteColor",
		name = "Done highlight",
		description = "Choose the color used to fill completed options in the crafting interface",
		section = sectionColors
	)
	@Alpha
	default Color craftingHighlightCompleteColor() {
		return new Color(64, 64, 64, 210);
	}
	@ConfigItem(
		position = 7,
		keyName = "craftingHighlightCompleteOutlineColor",
		name = "Done outline",
		description = "Choose the color used to outline completed options in the crafting interface",
		section = sectionColors
	)
	@Alpha
	default Color craftingHighlightCompleteOutlineColor() {
		return new Color(64, 64, 64, 0);
	}
	
	@ConfigItem(
		position = 8,
		keyName = "craftingHighlightCompleteStroke",
		name = "Done stroke",
		description = "Choose the stoke width used to highlight the crafting interface",
		section = sectionColors
	)
	default int craftingHighlightCompleteStroke() {
		return 0;
	}

	@ConfigItem(
		position = 9,
		keyName = "craftingCompleteBehaviour",
		name = "Done behaviour",
		description = "Choose the behaviour for completed crafting options",
		section = sectionColors
	)
	default CraftingCompleteBehaviour craftingCompleteBehaviour() {
		return CraftingCompleteBehaviour.OVERLAY;
	}
}
package com.trs.data;

import net.runelite.api.gameval.ItemID;

public class GauntletItems {
  public static final int[] CRYSTAL_SHARD_ITEM_IDS = new int[] {
    ItemID.GAUNTLET_CRYSTAL_SHARD,
    ItemID.GAUNTLET_CRYSTAL_SHARD_HM,
    ItemID.GAUNTLET_CRYSTAL_SHARD_HM_2,
    ItemID.GAUNTLET_CRYSTAL_SHARD_HM_3,
    ItemID.GAUNTLET_CRYSTAL_SHARD_HM_4,
    ItemID.GAUNTLET_CRYSTAL_SHARD_HM_5,
    ItemID.GAUNTLET_CRYSTAL_SHARD_HM_25,
  };

  public static final int[] ORE_ITEM_IDS = new int[] {
    ItemID.GAUNTLET_ORE,
    ItemID.GAUNTLET_ORE_HM,
  };

  public static final int[] BARK_ITEM_IDS = new int[] {
    ItemID.GAUNTLET_BARK,
    ItemID.GAUNTLET_BARK_HM,
  };

  public static final int[] FIBRE_ITEM_IDS = new int[] {
    ItemID.GAUNTLET_FIBRE,
    ItemID.GAUNTLET_FIBRE_HM,
  };

  public static final int[] WEAPON_FRAME_ITEM_IDS = new int[] {
    ItemID.GAUNTLET_GENERIC_COMPONENT,
    ItemID.GAUNTLET_GENERIC_COMPONENT_HM,
  };
}

package com.trs;

import com.google.inject.Provides;
import javax.inject.Inject;
import lombok.extern.slf4j.Slf4j;
import net.runelite.client.config.ConfigManager;
import net.runelite.client.plugins.Plugin;
import net.runelite.client.plugins.PluginDescriptor;

import com.trs.service.OverlayService;

@Slf4j
@PluginDescriptor(name = "Gauntlet Crafting")
public class GauntletPlugin extends Plugin
{
	@Inject private OverlayService overlayService;

	@Override
	protected void startUp() throws Exception
	{
		overlayService.registerOverlays();
	}

	@Override
	protected void shutDown() throws Exception
	{
		overlayService.unregisterOverlays();
	}

	@Provides
	GauntletPluginConfig provideConfig(ConfigManager configManager)
	{
		return configManager.getConfig(GauntletPluginConfig.class);
	}
}
package com.trs.model;

public enum CraftingCountItem {
  TeleportCrystal(
    CraftingItem.TELEPORT_CRYSTAL
  ),
  Vial(
    CraftingItem.VIAL
  ),
  Paddlefish(
    CraftingItem.PADDLEFISH
  ),
  EscapeCrystal(
    CraftingItem.ESCAPE_CRYSTAL
  );

  private final CraftingItem item;

  CraftingCountItem(CraftingItem item) {
    this.item = item;
  }

  public static CraftingCountItem fromIndex(int index) {
    switch (index) {
      case 0: return TeleportCrystal;
      case 1: return Vial;
      case 8: return Paddlefish;
      case 9: return EscapeCrystal;
    }
    return null;
  }

  public boolean hasItemID(int itemID) {
    for (int id : item.getItemIDs()) {
      if (id == itemID) return true;
    }
    return false;
  }

  public CraftingMaterial[] getMaterials() {
    return item.getMaterials();
  }
}

package com.trs.model;

public enum CraftingTieredItem {
  Helm(
    CraftingItem.HELM_T1, CraftingItem.HELM_T2, CraftingItem.HELM_T3),
  Body(
    CraftingItem.BODY_T1, CraftingItem.BODY_T2, CraftingItem.BODY_T3),
  Legs(
    CraftingItem.LEGS_T1, CraftingItem.LEGS_T2, CraftingItem.LEGS_T3),
  Melee(
    CraftingItem.MELEE_T1, CraftingItem.MELEE_T2, CraftingItem.MELEE_T3),
  Magic(
    CraftingItem.MAGIC_T1, CraftingItem.MAGIC_T2, CraftingItem.MAGIC_T3),
  Ranged(
    CraftingItem.RANGED_T1, CraftingItem.RANGED_T2, CraftingItem.RANGED_T3);

  private final CraftingItem itemBasic;
  private final CraftingItem itemAttuned;
  private final CraftingItem itemPerfected;

  CraftingTieredItem(CraftingItem itemBasic, CraftingItem itemAttuned, CraftingItem itemPerfected) {
    this.itemBasic = itemBasic;
    this.itemAttuned = itemAttuned;
    this.itemPerfected = itemPerfected;
  }

  public static CraftingTieredItem fromIndex(int index) {
    switch (index) {
      case 2: return Helm;
      case 3: return Body;
      case 4: return Legs;
      case 5: return Melee;
      case 6: return Magic;
      case 7: return Ranged;
    }
    return null;
  }

  public int[] getBasicTierItemIDs() {
    return itemBasic.getItemIDs();
  }

  public int[] getAttunedTierItemIDs() {
    return itemAttuned.getItemIDs();
  }

  public int[] getPerfectedTierItemIDs() {
    return itemPerfected.getItemIDs();
  }

  public CraftingMaterial[] getBasicTierMaterials() {
    return itemBasic.getMaterials();
  }

  public CraftingMaterial[] getAttunedTierMaterials() {
    return itemAttuned.getMaterials();
  }

  public CraftingMaterial[] getPerfectedTierMaterials() {
    return itemPerfected.getMaterials();
  }
}

package com.trs.model;

public enum CraftingState {
  SKIP,
  INCOMPLETE,
  MISSING_MATERIALS,
  COMPLETE
}

package com.trs.model;

public enum CraftingCompleteBehaviour {
    OVERLAY,
    DISABLE,
    HIDE
}

package com.trs.model;

import net.runelite.api.gameval.ItemID;
import com.trs.data.GauntletItems;

public enum CraftingItem {
  HELM_T1(
    new int[] {
      ItemID.GAUNTLET_HELMET_T1,
      ItemID.GAUNTLET_HELMET_T1_HM
    }, 
    new CraftingMaterial[] {
      new CraftingMaterial(GauntletItems.CRYSTAL_SHARD_ITEM_IDS, 40),
      new CraftingMaterial(GauntletItems.ORE_ITEM_IDS, 1),
      new CraftingMaterial(GauntletItems.BARK_ITEM_IDS, 1),
      new CraftingMaterial(GauntletItems.FIBRE_ITEM_IDS, 1)
    }
  ),
  HELM_T2(
    new int[] {
      ItemID.GAUNTLET_HELMET_T2,
      ItemID.GAUNTLET_HELMET_T2_HM
    }, 
    new CraftingMaterial[] {
      new CraftingMaterial(GauntletItems.CRYSTAL_SHARD_ITEM_IDS, 60),
      new CraftingMaterial(GauntletItems.ORE_ITEM_IDS, 1),
      new CraftingMaterial(GauntletItems.BARK_ITEM_IDS, 1),
      new CraftingMaterial(GauntletItems.FIBRE_ITEM_IDS, 1)
    }
  ),
  HELM_T3(
    new int[] {
      ItemID.GAUNTLET_HELMET_T3,
      ItemID.GAUNTLET_HELMET_T3_HM
    }, 
    new CraftingMaterial[] {
      new CraftingMaterial(GauntletItems.CRYSTAL_SHARD_ITEM_IDS, 80),
      new CraftingMaterial(GauntletItems.ORE_ITEM_IDS, 2),
      new CraftingMaterial(GauntletItems.BARK_ITEM_IDS, 2),
      new CraftingMaterial(GauntletItems.FIBRE_ITEM_IDS, 2)
    }
  ),
  
  BODY_T1(
    new int[] {
      ItemID.GAUNTLET_CHESTPLATE_T1,
      ItemID.GAUNTLET_CHESTPLATE_T1_HM
    }, 
    new CraftingMaterial[] {
      new CraftingMaterial(GauntletItems.CRYSTAL_SHARD_ITEM_IDS, 40),
      new CraftingMaterial(GauntletItems.ORE_ITEM_IDS, 1),
      new CraftingMaterial(GauntletItems.BARK_ITEM_IDS, 1),
      new CraftingMaterial(GauntletItems.FIBRE_ITEM_IDS, 1)
    }
  ),
  BODY_T2(
    new int[] {
      ItemID.GAUNTLET_CHESTPLATE_T2,
      ItemID.GAUNTLET_CHESTPLATE_T2_HM
    }, 
    new CraftingMaterial[] {
      new CraftingMaterial(GauntletItems.CRYSTAL_SHARD_ITEM_IDS, 60),
      new CraftingMaterial(GauntletItems.ORE_ITEM_IDS, 2),
      new CraftingMaterial(GauntletItems.BARK_ITEM_IDS, 2),
      new CraftingMaterial(GauntletItems.FIBRE_ITEM_IDS, 2)
    }
  ),
  BODY_T3(
    new int[] {
      ItemID.GAUNTLET_CHESTPLATE_T3,
      ItemID.GAUNTLET_CHESTPLATE_T3_HM
    }, 
    new CraftingMaterial[] {
      new CraftingMaterial(GauntletItems.CRYSTAL_SHARD_ITEM_IDS, 80),
      new CraftingMaterial(GauntletItems.ORE_ITEM_IDS, 2),
      new CraftingMaterial(GauntletItems.BARK_ITEM_IDS, 2),
      new CraftingMaterial(GauntletItems.FIBRE_ITEM_IDS, 2)
    }
  ),

  LEGS_T1(
    new int[] {
      ItemID.GAUNTLET_PLATELEGS_T1,
      ItemID.GAUNTLET_PLATELEGS_T1_HM
    }, 
    new CraftingMaterial[] {
      new CraftingMaterial(GauntletItems.CRYSTAL_SHARD_ITEM_IDS, 40),
      new CraftingMaterial(GauntletItems.ORE_ITEM_IDS, 1),
      new CraftingMaterial(GauntletItems.BARK_ITEM_IDS, 1),
      new CraftingMaterial(GauntletItems.FIBRE_ITEM_IDS, 1)
    }
  ),
  LEGS_T2(
    new int[] {
      ItemID.GAUNTLET_PLATELEGS_T2,
      ItemID.GAUNTLET_PLATELEGS_T2_HM
    }, 
    new CraftingMaterial[] {
      new CraftingMaterial(GauntletItems.CRYSTAL_SHARD_ITEM_IDS, 60),
      new CraftingMaterial(GauntletItems.ORE_ITEM_IDS, 1),
      new CraftingMaterial(GauntletItems.BARK_ITEM_IDS, 1),
      new CraftingMaterial(GauntletItems.FIBRE_ITEM_IDS, 1)
    }
  ),
  LEGS_T3(
    new int[] {
      ItemID.GAUNTLET_PLATELEGS_T3,
      ItemID.GAUNTLET_PLATELEGS_T3_HM
    }, 
    new CraftingMaterial[] {
      new CraftingMaterial(GauntletItems.CRYSTAL_SHARD_ITEM_IDS, 80),
      new CraftingMaterial(GauntletItems.ORE_ITEM_IDS, 2),
      new CraftingMaterial(GauntletItems.BARK_ITEM_IDS, 2),
      new CraftingMaterial(GauntletItems.FIBRE_ITEM_IDS, 2)
    }
  ),

  MELEE_T1(
    new int[] {
      ItemID.GAUNTLET_MELEE_T1,
      ItemID.GAUNTLET_MELEE_T1_HM
    }, 
    new CraftingMaterial[] {
      new CraftingMaterial(GauntletItems.CRYSTAL_SHARD_ITEM_IDS, 20),
      new CraftingMaterial(GauntletItems.WEAPON_FRAME_ITEM_IDS, 1),
    }
  ),
  MELEE_T2(
    new int[] {
      ItemID.GAUNTLET_MELEE_T2,
      ItemID.GAUNTLET_MELEE_T2_HM
    }, 
    new CraftingMaterial[] {
      new CraftingMaterial(GauntletItems.CRYSTAL_SHARD_ITEM_IDS, 60),
    }
  ),
  MELEE_T3(
    new int[] {
      ItemID.GAUNTLET_MELEE_T3,
      ItemID.GAUNTLET_MELEE_T3_HM
    }, 
    new CraftingMaterial[] {
      new CraftingMaterial(new int[] { ItemID.GAUNTLET_MELEE_COMPONENT, ItemID.GAUNTLET_MELEE_COMPONENT_HM }, 1),
    }
  ),
  
  RANGED_T1(
    new int[] {
      ItemID.GAUNTLET_RANGED_T1,
      ItemID.GAUNTLET_RANGED_T1_HM
    }, 
    new CraftingMaterial[] {
      new CraftingMaterial(GauntletItems.CRYSTAL_SHARD_ITEM_IDS, 20),
      new CraftingMaterial(GauntletItems.WEAPON_FRAME_ITEM_IDS, 1),
    }
  ),
  RANGED_T2(
    new int[] {
      ItemID.GAUNTLET_RANGED_T2,
      ItemID.GAUNTLET_RANGED_T2_HM
    }, 
    new CraftingMaterial[] {
      new CraftingMaterial(GauntletItems.CRYSTAL_SHARD_ITEM_IDS, 60),
    }
  ),
  RANGED_T3(
    new int[] {
      ItemID.GAUNTLET_RANGED_T3,
      ItemID.GAUNTLET_RANGED_T3_HM
    }, 
    new CraftingMaterial[] {
      new CraftingMaterial(new int[] { ItemID.GAUNTLET_RANGED_COMPONENT, ItemID.GAUNTLET_RANGED_COMPONENT_HM }, 1),
    }
  ),
  
  MAGIC_T1(
    new int[] {
      ItemID.GAUNTLET_MAGIC_T1,
      ItemID.GAUNTLET_MAGIC_T1_HM
    }, 
    new CraftingMaterial[] {
      new CraftingMaterial(GauntletItems.CRYSTAL_SHARD_ITEM_IDS, 20),
      new CraftingMaterial(GauntletItems.WEAPON_FRAME_ITEM_IDS, 1),
    }
  ),
  MAGIC_T2(
    new int[] {
      ItemID.GAUNTLET_MAGIC_T2,
      ItemID.GAUNTLET_MAGIC_T2_HM
    }, 
    new CraftingMaterial[] {
      new CraftingMaterial(GauntletItems.CRYSTAL_SHARD_ITEM_IDS, 60),
    }
  ),
  MAGIC_T3(
    new int[] {
      ItemID.GAUNTLET_MAGIC_T3,
      ItemID.GAUNTLET_MAGIC_T3_HM
    }, 
    new CraftingMaterial[] {
      new CraftingMaterial(new int[] { ItemID.GAUNTLET_MAGIC_COMPONENT, ItemID.GAUNTLET_MAGIC_COMPONENT_HM }, 1),
    }
  ),

  TELEPORT_CRYSTAL(
    new int[] {
      ItemID.GAUNTLET_TELEPORT_CRYSTAL,
      ItemID.GAUNTLET_TELEPORT_CRYSTAL_HM
    }, 
    new CraftingMaterial[] {
      new CraftingMaterial(GauntletItems.CRYSTAL_SHARD_ITEM_IDS, 40),
    }
  ),

  VIAL(
    new int[] {
      ItemID.GAUNTLET_VIAL_EMPTY,
      ItemID.GAUNTLET_VIAL_WATER,
      ItemID.GAUNTLET_POTION_UNFINISHED,
      ItemID.GAUNTLET_POTION_1,
      ItemID.GAUNTLET_POTION_2,
      ItemID.GAUNTLET_POTION_3,
      ItemID.GAUNTLET_POTION_4
    }, 
    new CraftingMaterial[] {
      new CraftingMaterial(GauntletItems.CRYSTAL_SHARD_ITEM_IDS, 10),
    }
  ),

  PADDLEFISH(
    new int[] {
      ItemID.GAUNTLET_COMBO_FOOD,
      ItemID.GAUNTLET_COMBO_FOOD_HM
    }, 
    new CraftingMaterial[] {
      new CraftingMaterial(new int[] { ItemID.GAUNTLET_FOOD }, 1),
      new CraftingMaterial(GauntletItems.CRYSTAL_SHARD_ITEM_IDS, 10),
    }
  ),

  ESCAPE_CRYSTAL(
    new int[] {
      ItemID.GAUNTLET_ESCAPE_CRYSTAL,
      ItemID.GAUNTLET_ESCAPE_CRYSTAL_HM
    }, 
    new CraftingMaterial[] {
      new CraftingMaterial(GauntletItems.CRYSTAL_SHARD_ITEM_IDS, 200),
    }
  );


  private final int[] itemIDs;
  private final CraftingMaterial[] materials;

  CraftingItem(int[] itemIDs, CraftingMaterial[] materials) {
    this.itemIDs = itemIDs;
    this.materials = materials;
  }

  public int[] getItemIDs() {
    return itemIDs;
  }

  public CraftingMaterial[] getMaterials() {
    return materials;
  }
}
package com.trs.model;

import java.util.Set;
import java.util.HashSet;

public class CraftingMaterial {
  public final Set<Integer> itemIDs;
  public final int quantity;

  CraftingMaterial(int[] itemIDs, int quantity) {
    this.itemIDs = new HashSet<>();
    for (int itemID : itemIDs) {
      this.itemIDs.add(itemID);
    }
    this.quantity = quantity;
  }

  public boolean hasItemID(int itemID) {
    return itemIDs.contains(itemID);
  }
}

package com.trs.model;

public enum CraftingSetting {
  IGNORE,
  NONE,
  BASIC,
  ATTUNED,
  PERFECTED
}

package com.trs.overlay;

import java.awt.*;
import javax.inject.Inject;

import com.trs.GauntletPluginConfig;
import com.trs.model.CraftingState;
import com.trs.model.CraftingCompleteBehaviour;
import com.trs.service.CraftingService;
import com.trs.service.LocationService;

import net.runelite.api.Client;
import net.runelite.api.gameval.InterfaceID;
import net.runelite.api.widgets.Widget;
import net.runelite.client.ui.overlay.Overlay;
import net.runelite.client.ui.overlay.OverlayLayer;
import net.runelite.client.ui.overlay.OverlayPosition;

public class CraftingOverlay extends Overlay {
  private static final int[] CRAFTING_OPTION_WIDGETS = {
    InterfaceID.Skillmulti.A,
    InterfaceID.Skillmulti.B,
    InterfaceID.Skillmulti.C,
    InterfaceID.Skillmulti.D,
    InterfaceID.Skillmulti.E,
    InterfaceID.Skillmulti.F,
    InterfaceID.Skillmulti.G,
    InterfaceID.Skillmulti.H,
    InterfaceID.Skillmulti.I,
    InterfaceID.Skillmulti.J,
    InterfaceID.Skillmulti.K,
    InterfaceID.Skillmulti.L,
    InterfaceID.Skillmulti.M,
    InterfaceID.Skillmulti.N,
    InterfaceID.Skillmulti.O,
    InterfaceID.Skillmulti.P,
    InterfaceID.Skillmulti.Q,
    InterfaceID.Skillmulti.R,
  };

  private final Client client;
  private final CraftingService service;
  private final GauntletPluginConfig config;
  private final LocationService locationService;

  @Inject
  public CraftingOverlay(CraftingService service, GauntletPluginConfig config, LocationService locationService, Client client) {
      super();
      this.client = client;
      this.service = service;
      this.config = config;
      this.locationService = locationService;
      setPosition(OverlayPosition.DYNAMIC);
      setLayer(OverlayLayer.ABOVE_WIDGETS);
      setPriority(.6F);
  }

  @Override
  public Dimension render(Graphics2D graphics2D) {
    if (!locationService.isInGauntlet()) return null;

    Widget root = client.getWidget(InterfaceID.Skillmulti.BOTTOM);
    if (root == null || root.isHidden()) {
        return null;
    }

    for (int i = 0; i < CRAFTING_OPTION_WIDGETS.length; i++) {
      Widget childWidget = client.getWidget(CRAFTING_OPTION_WIDGETS[i]);
      if (childWidget == null || childWidget.isHidden()) continue;

      var craftingState = service.getCraftingState(i);
      renderOverlay(graphics2D, childWidget, craftingState);

      if (craftingState == CraftingState.COMPLETE) {
        CraftingCompleteBehaviour behaviour = config.craftingCompleteBehaviour();
        switch (behaviour) {
          case DISABLE:
            childWidget.clearActions();
            break;
          case HIDE:
            childWidget.setHidden(true);
            break;
          case OVERLAY:
            break;
        }
      }
    }

    return null;
  }

  private void renderOverlay(Graphics2D graphics, Widget childWidget, CraftingState craftingState) {
    Rectangle bounds = childWidget.getBounds();
    if (bounds != null) {
      switch (craftingState) {
        case INCOMPLETE:
          graphics.setColor(config.craftingHighlightColor());
          graphics.fill(bounds);
          graphics.setColor(config.craftingHighlightOutlineColor());
          graphics.setStroke(new BasicStroke(config.craftingHighlightStroke()));
          graphics.draw(bounds);
          break;
        case COMPLETE:
          graphics.setColor(config.craftingHighlightCompleteColor());
          graphics.fill(bounds);
          graphics.setColor(config.craftingHighlightCompleteOutlineColor());
          graphics.setStroke(new BasicStroke(config.craftingHighlightCompleteStroke()));
          graphics.draw(bounds);
          break;
        case MISSING_MATERIALS:
          graphics.setColor(config.craftingHighlightMissingMaterialsColor());
          graphics.fill(bounds);
          graphics.setColor(config.craftingHighlightMissingMaterialsOutlineColor());
          graphics.setStroke(new BasicStroke(config.craftingHighlightMissingMaterialsStroke()));
          graphics.draw(bounds);
          break;
        case SKIP:
          break;
      }
    }
  }
}

package com.trs.service;

import lombok.extern.slf4j.Slf4j;
import javax.inject.Inject;
import javax.inject.Singleton;
import net.runelite.api.Client;

@Slf4j
@Singleton
public class LocationService {
	private static final int VARBIT_MAZE = 9178;

  private final Client client;

  @Inject
  public LocationService(Client client) {
      this.client = client;
  }

	public boolean isInGauntlet() {
    return isInMaze();
	}

  public boolean isInMaze() {
    return client.getVarbitValue(VARBIT_MAZE) == 1;
  }
}

package com.trs.service;

import lombok.extern.slf4j.Slf4j;
import javax.inject.Inject;
import javax.inject.Singleton;

import net.runelite.api.Client;
import net.runelite.api.ItemContainer;
import net.runelite.api.gameval.InventoryID;

import com.trs.model.CraftingMaterial;
import com.trs.model.CraftingTieredItem;
import com.trs.model.CraftingCountItem;
import com.trs.model.CraftingState;
import com.trs.model.CraftingSetting;

@Slf4j
@Singleton
public class CraftingService {

  private final Client client;
  private final CraftingItemSettings craftingSettingService;
  private final CraftingCountItemSettings craftingCountItemSettings;

  @Inject
  public CraftingService(Client client, CraftingItemSettings craftingSettingService, CraftingCountItemSettings craftingCountItemSettings) {
    this.client = client;
    this.craftingSettingService = craftingSettingService;
    this.craftingCountItemSettings = craftingCountItemSettings;
  }

  public CraftingState getCraftingState(int index) {
    CraftingTieredItem craftingItem = CraftingTieredItem.fromIndex(index);

    if (craftingItem != null) {
      return getTieredCraftingState(craftingItem);
    } 
    
    CraftingCountItem craftingCountItem = CraftingCountItem.fromIndex(index);
    if (craftingCountItem != null) {
      return getCountCraftingState(craftingCountItem);
    }

    return CraftingState.SKIP;
  }

  private CraftingState getTieredCraftingState(CraftingTieredItem craftingItem) {
    CraftingSetting craftingSetting = craftingSettingService.getCraftingSetting(craftingItem);
    boolean considerWithMaterials = craftingSettingService.considerWithMaterials(craftingItem);

    if (craftingSetting == CraftingSetting.IGNORE) {
      return CraftingState.SKIP;
    }

    if (craftingSetting == CraftingSetting.NONE) {
      return CraftingState.COMPLETE;
    }
    
    boolean hasTier3 = hasAnyItem(craftingItem.getPerfectedTierItemIDs());
    boolean hasTier2 = hasTier3 || hasAnyItem(craftingItem.getAttunedTierItemIDs());
    boolean hasTier1 = hasTier2 || hasAnyItem(craftingItem.getBasicTierItemIDs());

    boolean hasTier3Materials = hasMaterials(craftingItem.getPerfectedTierMaterials());
    boolean hasTier2Materials = hasMaterials(craftingItem.getAttunedTierMaterials());
    boolean hasTier1Materials = hasMaterials(craftingItem.getBasicTierMaterials());

    if (craftingSetting == CraftingSetting.BASIC) {
      if (hasTier1) {
        return CraftingState.COMPLETE;
      } else if (hasTier1Materials) {
        return CraftingState.INCOMPLETE;
      }

      if (considerWithMaterials) return CraftingState.COMPLETE;

      return CraftingState.MISSING_MATERIALS;
    }

    if (craftingSetting == CraftingSetting.ATTUNED) {
      if (hasTier2) {
        return CraftingState.COMPLETE;
      }
      else if (hasTier1 && hasTier2Materials) {
        return CraftingState.INCOMPLETE;
      }
      else if (hasTier1Materials) {
        if (!considerWithMaterials) return CraftingState.INCOMPLETE;
        else if (hasTier2Materials) return CraftingState.INCOMPLETE;
      }

      if (considerWithMaterials) return CraftingState.COMPLETE;

      return CraftingState.MISSING_MATERIALS;
    }

    if (craftingSetting == CraftingSetting.PERFECTED) {
      if (hasTier3) {
        return CraftingState.COMPLETE;
      }

      if (hasTier2 && hasTier3Materials) {
        return CraftingState.INCOMPLETE;
      }
      else if (hasTier1 && hasTier2Materials) {
        if (!considerWithMaterials) return CraftingState.INCOMPLETE;
        else if (hasTier3Materials) return CraftingState.INCOMPLETE;
      }
      else if (hasTier1Materials) {
        if (!considerWithMaterials) return CraftingState.INCOMPLETE;
        else if (hasTier3Materials && hasTier2Materials) return CraftingState.COMPLETE;
      }

      if (considerWithMaterials) return CraftingState.COMPLETE;

      return CraftingState.MISSING_MATERIALS;
    }

    return CraftingState.SKIP;    
  }

  private CraftingState getCountCraftingState(CraftingCountItem craftingItem) {
    int craftingCountTarget = craftingCountItemSettings.getCraftingCount(craftingItem);

    int count = 0;
    ItemContainer inventory = client.getItemContainer(InventoryID.INV);
    if (inventory != null) {
      for (var item : inventory.getItems()) {
        if (craftingItem.hasItemID(item.getId())) {
          count += item.getQuantity();
        }
      }
    }

    if (count >= craftingCountTarget) {
      return CraftingState.COMPLETE;
    }

    if (!hasMaterials(craftingItem.getMaterials())) {
      return CraftingState.MISSING_MATERIALS;
    }

    return CraftingState.INCOMPLETE;
  }

  private boolean hasAnyItem(int[] itemIDs) {
    ItemContainer equipment = client.getItemContainer(InventoryID.WORN);
    ItemContainer inventory = client.getItemContainer(InventoryID.INV);

    for (int itemID : itemIDs) {
      if (equipment != null && equipment.contains(itemID)) return true;
      if (inventory != null && inventory.contains(itemID)) return true;
    }
    return false;
  }

  private boolean hasMaterials(CraftingMaterial[] materials) {
    ItemContainer inventory = client.getItemContainer(InventoryID.INV);
    if (inventory == null) return false;

    for (CraftingMaterial material : materials) {
      int quantity = 0;
      for (var item : inventory.getItems()) {
        if (material.hasItemID(item.getId())) {
          quantity += item.getQuantity();
        }
      }

      if (quantity < material.quantity) return false;
    }
    return true;
  };
}

package com.trs.service;

import javax.inject.Singleton;
import javax.inject.Inject;

import com.trs.model.CraftingTieredItem;
import com.trs.model.CraftingSetting;
import com.trs.GauntletPluginConfig;

@Singleton
public class CraftingItemSettings {
  private final GauntletPluginConfig config;

  @Inject
  public CraftingItemSettings(GauntletPluginConfig config) {
    this.config = config;
  }

  public CraftingSetting getCraftingSetting(CraftingTieredItem craftingItem) {
    switch (craftingItem) {
      case Ranged:
        return config.craftingOptionRanged();
      case Magic:
        return config.craftingOptionMagic();
      case Melee:
        return config.craftingOptionMelee();
      default:
        return CraftingSetting.NONE;
    }
  }

  public boolean considerWithMaterials(CraftingTieredItem craftingItem) {
    switch (craftingItem) {
      case Ranged:
        return config.craftingOptionRangedWithMaterial();
      case Magic:
        return config.craftingOptionMagicWithMaterial();
      case Melee:
        return config.craftingOptionMeleeWithMaterial();
      default:
        return false;
    }
  }
}

package com.trs.service;

import com.trs.overlay.CraftingOverlay;
import javax.inject.Inject;
import javax.inject.Singleton;
import lombok.extern.slf4j.Slf4j;
import net.runelite.client.ui.overlay.OverlayManager;

@Slf4j
@Singleton
public class OverlayService {
    @Inject private OverlayManager overlayManager;

    @Inject private CraftingOverlay craftingOverlay;

    public OverlayService() {}

    public void registerOverlays() {
        overlayManager.add(craftingOverlay);
    }

    public void unregisterOverlays() {
        overlayManager.remove(craftingOverlay);
    }
}
package com.trs.service;

import javax.inject.Singleton;
import javax.inject.Inject;

import com.trs.GauntletPluginConfig;
import com.trs.model.CraftingCountItem;

@Singleton
public class CraftingCountItemSettings {
  private final GauntletPluginConfig config;

  @Inject
  public CraftingCountItemSettings(GauntletPluginConfig config) {
    this.config = config;
  }

  public int getCraftingCount(CraftingCountItem craftingItem) {
    switch (craftingItem) {
      case TeleportCrystal:
        return config.craftingTeleportCount();
      case Vial:
        return config.craftingPotionCount();
      case Paddlefish:
        return config.craftingCrystalPaddlefishCount();
      case EscapeCrystal:
        return config.craftingEscapeCrystalCount();
      default:
        return 0;
    }
  }
}

package com.trs;

import net.runelite.client.RuneLite;
import net.runelite.client.externalplugins.ExternalPluginManager;

public class GauntletPluginTest
{
	public static void main(String[] args) throws Exception
	{
		ExternalPluginManager.loadBuiltin(GauntletPlugin.class);
		RuneLite.main(args);
	}
}
