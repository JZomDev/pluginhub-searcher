package eu.jodelahithit;

import net.runelite.client.config.ConfigManager;
import net.runelite.client.ui.ColorScheme;
import net.runelite.client.ui.FontManager;
import net.runelite.client.ui.PluginPanel;
import net.runelite.client.util.ImageUtil;
import org.apache.commons.lang3.StringUtils;

import javax.inject.Inject;
import javax.swing.*;
import javax.swing.border.EmptyBorder;
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.util.HashMap;
import java.util.Map;

public class SkillingNotificationsPanel extends PluginPanel {
    private final Map<String, BufferedImage> iconsCache = new HashMap<>();
    private final ConfigManager configManager;
    private final JPanel skillsPanel, enabledPanel, flashingPanel, soundPanel, movingPanel, customPanel;

    SkillingNotificationsPanel(ConfigManager configManager) {
        super();
        this.configManager = configManager;
        setBorder(new EmptyBorder(5, 5, 5, 5));
        setBackground(ColorScheme.DARK_GRAY_COLOR);
        setLayout(new GridBagLayout());

        GridBagConstraints c = new GridBagConstraints();
        c.fill = GridBagConstraints.HORIZONTAL;
        c.gridx = 0;
        c.gridy = 0;
        c.weightx = 1;
        c.weighty = 0;
        c.insets = new Insets(0, 0, 10, 0);

        final JLabel welcomeText = new JLabel("Skilling Notifications");
        welcomeText.setFont(FontManager.getRunescapeBoldFont());
        welcomeText.setHorizontalAlignment(JLabel.CENTER);

        skillsPanel = new JPanel();
        skillsPanel.setLayout(new GridLayout(0, 2 , 7, 7));

        enabledPanel = new JPanel();
        enabledPanel.setLayout(new GridLayout(1, 1, 0, 0));
        flashingPanel = new JPanel();
        flashingPanel.setLayout(new GridLayout(1, 1, 0, 0));
        movingPanel = new JPanel();
        movingPanel.setLayout(new GridLayout(1, 1, 0, 0));
        soundPanel = new JPanel();
        soundPanel.setLayout(new GridLayout(1, 2, 0, 0));
        customPanel = new JPanel();
        customPanel.setLayout(new GridLayout(1, 2, 0, 0));

        JPanel descriptionPanel = new JPanel();
        descriptionPanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);
        descriptionPanel.setBorder(new EmptyBorder(10, 10, 10, 10));

        JTextArea description = new JTextArea(0, 25);
        description.setText("This plugin will display an overlay when the player is not actively performing any of the following selected skills.\n\nExtra notification delays can be configured in the plugin configuration.");
        description.setWrapStyleWord(true);
        description.setLineWrap(true);
        description.setOpaque(false);
        description.setEditable(false);
        description.setFocusable(false);
        description.setBackground(ColorScheme.DARK_GRAY_COLOR);
        description.setFont(FontManager.getRunescapeSmallFont());
        description.setBorder(new EmptyBorder(0, 0, 0, 0));

        descriptionPanel.add(description);

        repaintConfigButtons();

        add(welcomeText, c);
        c.gridy++;
        add(descriptionPanel, c);
        c.gridy++;
        add(enabledPanel, c);
        c.gridy++;
        add(movingPanel, c);
        c.gridy++;
        add(flashingPanel, c);
        c.gridy++;
        add(soundPanel, c);
        c.gridy++;
        add(skillsPanel, c);
        c.gridy++;
        add(customPanel, c);
    }

    @Override
    public void onActivate() {
        repaintConfigButtons();
    }

    public void repaintConfigButtons() {
        setVisible(false);
        skillsPanel.removeAll();
        for (NotificationType notificationType : NotificationType.values()) {
            if (notificationType == NotificationType.NONE || notificationType == NotificationType.CUSTOMXP) continue;
            String skillIcon = "/skill_icons/" + notificationType.name().toLowerCase() + ".png";
            ImageIcon icon = new ImageIcon(getIcon(notificationType.getCustomImage() == null ? skillIcon : notificationType.getCustomImage()));
            boolean isActive = Boolean.parseBoolean(configManager.getConfiguration(SkillingNotificationsConfig.CONFIG_GROUP, notificationType.name()));
            JToggleButton toggleButton = new JToggleButton(icon, isActive);
            toggleButton.setToolTipText(StringUtils.capitalize(notificationType.name().toLowerCase()));
            toggleButton.setFocusable(false);
            toggleButton.addItemListener(ev -> configManager.setConfiguration(SkillingNotificationsConfig.CONFIG_GROUP, notificationType.name(), ev.getStateChange() == ItemEvent.SELECTED));
            skillsPanel.add(toggleButton);
        }

        addButton(enabledPanel, "enabled", "Enabled", "Toggles the overlay and plugin functionality");
        addButton(movingPanel, "disableWhenWalking", "Disable overlay while moving", "Forces the notification overlay to be disabled while walking, running or sailing");
        addButton(flashingPanel, "notificationFlash", "Notification flash", "Flashes notifications at the configured interval");
        addButton(soundPanel, "notificationSound", "Notification sound", "Plays a sound when the player is idle");
        addButton(customPanel, "CUSTOMXP", "Custom XP", "Displays notifications when XP drops of the configured threshold are not received");

        SpinnerModel model = new SpinnerNumberModel(Integer.parseInt(configManager.getConfiguration(SkillingNotificationsConfig.CONFIG_GROUP, "customXPValue")), 1, Integer.MAX_VALUE, 10);
        JSpinner spinner = new JSpinner(model);
        spinner.addChangeListener(ev -> configManager.setConfiguration(SkillingNotificationsConfig.CONFIG_GROUP, "customXPValue", spinner.getValue()));
        customPanel.add(spinner);

        setVisible(true);
        revalidate();
        repaint();
    }

    private void addButton(JPanel panel, String configKey, String name, String description){
        panel.removeAll();
        JToggleButton button = new JToggleButton(name, Boolean.parseBoolean(configManager.getConfiguration(SkillingNotificationsConfig.CONFIG_GROUP, configKey)));
        button.setFocusable(false);
        button.setToolTipText(description);
        button.addItemListener(ev -> configManager.setConfiguration(SkillingNotificationsConfig.CONFIG_GROUP, configKey, ev.getStateChange() == ItemEvent.SELECTED));
        panel.add(button);
    }

    private BufferedImage getIcon(String path) {
        BufferedImage iconImage = iconsCache.get(path);
        if (iconImage != null) return iconImage;
        iconImage = ImageUtil.loadImageResource(getClass(), path);
        iconsCache.put(path, iconImage);
        return iconImage;
    }
}

package eu.jodelahithit;

import net.runelite.client.config.*;

import java.awt.*;
import java.awt.event.KeyEvent;

@ConfigGroup("Skilling Notifications")
public interface SkillingNotificationsConfig extends Config {
    public static final String CONFIG_GROUP = "Skilling Notifications";

    @ConfigItem(
            hidden = true,
            keyName = "enabled",
            name = "Enabled",
            description = "Toggles the overlay and plugin functionality",
            position = 0
    )
    default boolean enabled() {
        return true;
    }

    @ConfigItem(
            keyName = "toggle",
            name = "Toggle keybind",
            description = "The key which will toggle the overlay and plugin functionality",
            position = 1

    )
    default ModifierlessKeybind toggle()
    {
        return new ModifierlessKeybind(KeyEvent.VK_F5, 0);
    }

    @ConfigItem(
            keyName = "toggleFlash",
            name = "Toggle flash keybind",
            description = "The key which will toggle the notifcation flash",
            position = 2

    )
    default ModifierlessKeybind toggleFlash()
    {
        return new ModifierlessKeybind(KeyEvent.VK_F6, 0);
    }


    @Alpha
    @ConfigItem(
            keyName = "overlayColor",
            name = "Notification color",
            description = "Set the notification overlay color",
            position = 3
    )
    default Color overlayColor() {
        return new Color(1.0f, 0.0f, 0.0f, 0.5f);
    }

    @ConfigItem(
            keyName = "notificationFlash",
            name = "Notification flash",
            description = "Flash the idle overlay",
            position = 4
    )
    default boolean flash() {
        return false;
    }

    @ConfigItem(
            keyName = "notificationFade",
            name = "Notification fade duration",
            description = "Duration of the idle overlay fade",
            position = 5
    )
    default int notificationFade() {
        return 0;
    }

    @ConfigItem(
            keyName = "disableOverlayText",
            name = "Disable overlay text",
            description = "Disable the \"Skill Notification\" text on the overlay",
            position = 6
    )
    default boolean disableOverlayText() {
        return false;
    }

    @ConfigItem(
            keyName = "disableWhenWalking",
            name = "Disable overlay while moving",
            description = "Disable the idle overlay when the player is walking, running or sailing",
            position = 7
    )
    default boolean disableWhenWalking() {
        return true;
    }


    @ConfigItem(
            keyName = "notificationSound",
            name = "Notification sound",
            description = "Plays a sound when the player is idle",
            position = 8
    )
    default boolean notificationSound() {return false;}

    @ConfigSection(
            name = "Selected skills",
            description = "Set the selected skills that will cause a notification when idling",
            position = 20
    )
    String selectedSkills = "Selected skills";

    @ConfigItem(
            keyName = "COOKING",
            name = "Cooking",
            description = "Causes notifications when the player is not actively cooking",
            position = 21,
            section = selectedSkills
    )
    default boolean cooking() {
        return false;
    }


    @ConfigItem(
            keyName = "CRAFTING",
            name = "Crafting",
            description = "Displays notifications when the player is not actively crafting",
            position = 22,
            section = selectedSkills
    )
    default boolean crafting() {
        return false;
    }

    @ConfigItem(
            keyName = "FISHING",
            name = "Fishing",
            description = "Displays notifications when the player is not actively fishing",
            position = 23,
            section = selectedSkills
    )
    default boolean fishing() {
        return false;
    }

    @ConfigItem(
            keyName = "FIREMAKING",
            name = "Firemaking",
            description = "Displays notifications when the player is not actively firemaking",
            position = 24,
            section = selectedSkills
    )
    default boolean firemaking() {
        return false;
    }

    @ConfigItem(
            keyName = "FLETCHING",
            name = "Fletching ",
            description = "Displays notifications when the player is not actively fletching",
            position = 25,
            section = selectedSkills
    )
    default boolean fletching() {
        return false;
    }

    @ConfigItem(
            keyName = "HERBLORE",
            name = "Herblore",
            description = "Displays notifications when the player is not actively doing herblore",
            position = 26,
            section = selectedSkills
    )
    default boolean herblore() {
        return false;
    }

    @ConfigItem(
            keyName = "MINING",
            name = "Mining",
            description = "Displays notifications when the player is not actively mining",
            position = 27,
            section = selectedSkills
    )
    default boolean mining() {
        return false;
    }

    @ConfigItem(
            keyName = "WOODCUTTING",
            name = "Woodcutting",
            description = "Displays notifications when the player is not actively woodcutting",
            position = 28,
            section = selectedSkills
    )
    default boolean woodcutting() {
        return false;
    }

    @ConfigItem(
            keyName = "SMITHING",
            name = "Smithing",
            description = "Displays notifications when the player is not actively smithing",
            position = 29,
            section = selectedSkills
    )
    default boolean smithing() {
        return false;
    }

    @ConfigItem(
            keyName = "SAILING",
            name = "Sailing",
            description = "Displays notifications when the player is not actively doing sailing tasks",
            position = 30,
            section = selectedSkills
    )
    default boolean sailing() {
        return false;
    }

    @ConfigItem(
            keyName = "COMBAT",
            name = "Combat",
            description = "Displays notifications when the player is not in combat",
            position = 31,
            section = selectedSkills
    )
    default boolean combat() {
        return false;
    }

    @ConfigItem(
            keyName = "MANIACALMONKEYS",
            name = "Maniacal monkeys",
            description = "Displays notifications when the player is not catching maniacal monkeys",
            position = 32,
            section = selectedSkills
    )
    default boolean maniacalMonkeys() {
        return false;
    }

    @ConfigItem(
            keyName = "LUNAR",
            name = "Lunar",
            description = "Displays notifications when the player is not casting Lunar crafting spells",
            position = 33,
            section = selectedSkills
    )
    default boolean lunar() {
        return false;
    }

    @ConfigItem(
            keyName = "CUSTOMXP",
            name = "Custom XP",
            description = "Displays notifications when the player is not receiving xp drops of the configured threshold",
            position = 47,
            section = selectedSkills
    )
    default boolean customXP() {
        return false;
    }

    @ConfigItem(
            keyName = "customXPValue",
            name = "Custom XP Amount",
            description = "The amount of XP that needs to be received in order to disable the custom xp notification",
            position = 48,
            section = selectedSkills
    )
    default int customXPValue() {
        return 20;
    }

    @ConfigSection(
            name = "Extra Delays",
            description = "Set notification delays in milliseconds for individual skills. This means that it'll take longer for the notification to appear after the player started idling",
            position = 49
    )
    String delays = "Extra Delays";

    @ConfigItem(
            keyName = "WALKINGDELAYV2",
            name = "Movement delay",
            description = "Add an extra delay to notifications after walking, running or sailing when 'disable overlay while moving' is enabled",
            position = 50,
            section = delays
    )
    default int walkDelay() {
        return 2000;
    }

    @ConfigItem(
            keyName = "COOKINGDELAYV2",
            name = "Cooking delay",
            description = "Add an extra delay before the cooking notification",
            position = 51,
            section = delays
    )
    default int cookingDelay() {
        return 0;
    }

    @ConfigItem(
            keyName = "CRAFTINGDELAYV2",
            name = "Crafting delay",
            description = "Add an extra delay before the crafting notification",
            position = 52,
            section = delays
    )
    default int craftingDelay() {
        return 0;
    }

    @ConfigItem(
            keyName = "FISHINGDELAYV2",
            name = "Fishing delay",
            description = "Add an extra delay before the fishing notification",
            position = 53,
            section = delays
    )
    default int fishingDelay() {
        return 0;
    }

    @ConfigItem(
            keyName = "FIREMAKINGDELAYV2",
            name = "Firemaking delay",
            description = "Add an extra delay before the firemaking notification",
            position = 54,
            section = delays
    )
    default int firemakingDelay() {
        return 0;
    }

    @ConfigItem(
            keyName = "FLETCHINGDELAYV2",
            name = "Fletching delay",
            description = "Add an extra delay before the fletching notification",
            position = 55,
            section = delays
    )
    default int fletchingDelay() {
        return 0;
    }

    @ConfigItem(
            keyName = "HERBLOREDELAYV2",
            name = "Herblore delay",
            description = "Add an extra delay before the herblore notification",
            position = 56,
            section = delays
    )
    default int herbloreDelay() {
        return 0;
    }

    @ConfigItem(
            keyName = "MININGDELAYV2",
            name = "Mining delay",
            description = "Add an extra delay before the mining notification",
            position = 57,
            section = delays
    )
    default int miningDelay() {
        return 0;
    }

    @ConfigItem(
            keyName = "WOODCUTTINGDELAYV2",
            name = "Woodcutting delay",
            description = "Add an extra delay before the woodcutting notification",
            position = 58,
            section = delays
    )
    default int woodcuttingDelay() {
        return 0;
    }

    @ConfigItem(
            keyName = "SMITHINGDELAYV2",
            name = "Smithing delay",
            description = "Add an extra delay before the smithing notification",
            position = 59,
            section = delays
    )
    default int smithingDelay() {
        return 0;
    }

    @ConfigItem(
            keyName = "SAILINGDELAYV2",
            name = "Sailing delay",
            description = "Add an extra delay before the sailing notification",
            position = 60,
            section = delays
    )
    default int sailingDelay() {
        return 0;
    }

    @ConfigItem(
            keyName = "MANIACALMONKEYSDELAYV2",
            name = "Maniacal monkeys delay",
            description = "Add an extra delay before the maniacal monkey notification",
            position = 61,
            section = delays
    )
    default int maniacalMonkeysDelay() {
        return 0;
    }
    @ConfigItem(
            keyName = "LUNARDELAYV2",
            name = "Lunar delay",
            description = "Add an extra delay before the Lunar spell notification",
            position = 62,
            section = delays
    )
    default int lunarDelay() {
        return 0;
    }

    @ConfigItem(
            keyName = "COMBATDELAYV2",
            name = "Combat delay",
            description = "Add an extra delay before the combat notification",
            position = 63,
            section = delays
    )
    default int combatDelay() {
        return 0;
    }

    @ConfigItem(
            keyName = "CUSTOMXPDELAYV2",
            name = "Custom XP delay",
            description = "Add an extra delay before the custom XP notification",
            position = 64,
            section = delays
    )
    default int customXPDelay() {
        return 1000;
    }
}

package eu.jodelahithit;

import java.util.Set;

public enum NotificationType {
    NONE(null, null),
    COOKING(Constants.COOKING_ANIMATIONS, null),
    CRAFTING(Constants.CRAFTING_ANIMATIONS, null),
    FISHING(Constants.FISHING_ANIMATIONS, null),
    FIREMAKING(Constants.FIREMAKING_ANIMATIONS, null),
    FLETCHING(Constants.FLETCHING_ANIMATIONS, null),
    HERBLORE(Constants.HERBLORE_ANIMATIONS, null),
    MINING(Constants.MINING_ANIMATIONS, null),
    WOODCUTTING(Constants.WOODCUTTING_ANIMATIONS, null),
    SMITHING(Constants.SMITHING_ANIMATIONS, null),
    SAILING(Constants.SAILING_ANIMATIONS, null),
    MANIACALMONKEYS(null, "/eu/jodelahithit/monkey.png"),
    LUNAR(Constants.LUNAR_ANIMATIONS, "/eu/jodelahithit/lunar.png"),
    COMBAT(null, null),
    CUSTOMXP(null, null);


    private final Set<Integer> animations;
    private final String customImage;

    NotificationType(Set<Integer> animations, String customImage) {
        this.animations = animations;
        this.customImage = customImage;
    }

    public Set<Integer> getAnimations() { return animations; }
    public String getCustomImage() { return customImage; }
}
package eu.jodelahithit;

import java.time.Duration;
import java.time.Instant;
import java.util.EnumMap;

public class Session {
    private final EnumMap<NotificationType, Instant> skillInstants = new EnumMap<>(NotificationType.class);
    private final SkillingNotificationsPlugin plugin;

    private Instant walkingInstant = Instant.now();
    private Instant sailingInstant = Instant.now();

    public Session(SkillingNotificationsPlugin plugin) {
        this.plugin = plugin;
    }

    public static boolean checkInstant(Instant instant, long timeout) {
        if (instant == null) return false;
        return Duration.between(instant, Instant.now()).toMillis() < timeout;
    }

    public void updateInstant(NotificationType notificationType) {
        skillInstants.put(notificationType, Instant.now());
    }

    public boolean isSkillActive(NotificationType notificationType) {
        Instant instant = skillInstants.get(notificationType);
        if (instant != null) {
            long delay = 500 + Math.max(plugin.getExtraSkillDelay(notificationType), 0);
            return checkInstant(instant, delay);
        }
        return false;
    }

    public void updateWalkingInstant(){
        walkingInstant = Instant.now();
    }

    public void updateSailingInstant(){
        sailingInstant = Instant.now();
    }

    public boolean isWalking(long extraTimeout){
        return checkInstant(walkingInstant, 1L + extraTimeout);
    }

    public boolean isSailing(){
        return checkInstant(sailingInstant, 2000L);
    }
}

package eu.jodelahithit;

import com.google.common.base.Strings;
import net.runelite.api.*;
import net.runelite.api.Point;
import net.runelite.client.game.ItemManager;
import net.runelite.client.game.ItemStats;
import net.runelite.client.util.ColorUtil;

import java.awt.*;
import java.util.Set;

import static net.runelite.api.gameval.InterfaceID.Wornitems.EQUIPMENT;

public class Utils {
    static boolean isInAnimation(NotificationType notificationType, Client client) {
        if(notificationType == NotificationType.NONE) return false;
        return isInAnimation(notificationType.getAnimations(), client);
    }

    static boolean isInAnimation(int animationID, Client client) {
        Player player = client.getLocalPlayer();
        if(player == null) return false;
        int anim = player.getAnimation();
        return anim == animationID;
    }

    static boolean isInAnimation(Set<Integer> animations, Client client) {
        if(animations == null) return false;
        Player player = client.getLocalPlayer();
        if(player == null) return false;
        int anim = player.getAnimation();
        return animations.contains(anim);
    }

    public static int getStringWidth(Graphics graphics, String text) {
        FontMetrics metrics = graphics.getFontMetrics();
        return metrics.stringWidth(text);
    }

    public static int getStringHeight(Graphics graphics) {
        FontMetrics metrics = graphics.getFontMetrics();
        return metrics.getHeight();
    }

    public static void renderTextCentered(Graphics2D graphics, Point txtLoc, String text, Color color) {
        if (!Strings.isNullOrEmpty(text)) {
            int x = txtLoc.getX();
            int y = txtLoc.getY();
            int halfStringWidth = getStringWidth(graphics, text) / 2;
            graphics.setColor(Color.BLACK);
            graphics.drawString(text, x - halfStringWidth+ 1, y + 1);
            graphics.setColor(ColorUtil.colorWithAlpha(color, 255));
            graphics.drawString(text, x - halfStringWidth, y);
        }
    }

    public static int getAttackSpeed(Client client, ItemManager itemManager) {
        final ItemContainer equipment = client.getItemContainer(EQUIPMENT);
        if (equipment != null) {
            Item[] items = equipment.getItems();
            int weaponSlot = EquipmentInventorySlot.WEAPON.getSlotIdx();
            if (items.length > weaponSlot) {
                Item weapon = items[weaponSlot];
                if (weapon != null && weapon.getId() > 0) {
                    final ItemStats stats = itemManager.getItemStats(weapon.getId());
                    if (stats != null && stats.getEquipment() != null) {
                        return stats.getEquipment().getAspeed();
                    }
                }
            }
        }
        return 4; // default unarmed
    }

    public static float clamp(float val, float min, float max) {
        return Math.max(min, Math.min(max, val));
    }

    public static float clamp01(float val) {
        return Math.max(0.0f, Math.min(1.0f, val));
    }
}

package eu.jodelahithit;

import com.google.common.collect.ImmutableSet;
import net.runelite.api.gameval.ObjectID;

import java.util.Set;

import static net.runelite.api.gameval.AnimationID.*;
import static net.runelite.api.gameval.AnimationID.HUMAN_SAILING_ALPHA_HELM_RAFT01_TRIM_SAILS02;


public class Constants {
    static final Set<Integer> LUNAR_ANIMATIONS = ImmutableSet.of(
            LUNAR_HUMAN_MAGIC_SUMMON1,
            LUNAR_HUMAN_MAGIC_SUMMON2,
            DREAM_PLAYER_MAKE_PLANK_SPELL
    );

    static final Set<Integer> COOKING_ANIMATIONS = ImmutableSet.of(
            HUMAN_FIRECOOKING,
            HUMAN_COOKING,
            HUMAN_MAKE_WINE
    );

    static final Set<Integer> FIREMAKING_ANIMATIONS = ImmutableSet.of(
            HUMAN_CREATEFIRE,
            FORESTRY_CAMPFIRE_BURNING_GENERIC,
            FORESTRY_CAMPFIRE_BURNING_ACHEY_TREE_LOGS,
            FORESTRY_CAMPFIRE_BURNING_ARCTIC_PINE_LOG,
            FORESTRY_CAMPFIRE_BURNING_BLISTERWOOD_LOGS,
            FORESTRY_CAMPFIRE_BURNING_LOGS,
            FORESTRY_CAMPFIRE_BURNING_MAGIC_LOGS,
            FORESTRY_CAMPFIRE_BURNING_MAHOGANY_LOGS,
            FORESTRY_CAMPFIRE_BURNING_MAPLE_LOGS,
            FORESTRY_CAMPFIRE_BURNING_OAK_LOGS,
            FORESTRY_CAMPFIRE_BURNING_REDWOOD_LOGS,
            FORESTRY_CAMPFIRE_BURNING_TEAK_LOGS,
            FORESTRY_CAMPFIRE_BURNING_WILLOW_LOGS,
            FORESTRY_CAMPFIRE_BURNING_YEW_LOGS,
            FORESTRY_CAMPFIRE_BURNING_SPOTANIM
    );

    static final Set<Integer> FISHING_ANIMATIONS = ImmutableSet.of(
            HUMAN_HARPOON,
            HUMAN_LOBSTER,
            HUMAN_LARGENET,
            HUMAN_SMALLNET,
            HUMAN_FISHING_CASTING,
            HUMAN_FISH_ONSPOT,
            HUMAN_HARPOON_BARBED,
            HUMAN_HARPOON_DRAGON,
            HUMAN_HARPOON_INFERNAL,
            HUMAN_HARPOON_TRAILBLAZER_NO_INFERNAL,
            HUMAN_HARPOON_CRYSTAL,
            HUMAN_HARPOON_GAUNTLET_HM,
            HUMAN_HARPOON_TRAILBLAZER,
            HUMAN_HARPOON_LEAGUE_TRAILBLAZER,
            HUMAN_OCTOPUS_POT,
            INFERNALEEL_BREAK,
            SNAKEBOSS_SLICEEEL,
            BRUT_PLAYER_HAND_FISHING_START,
            BRUT_PLAYER_HAND_FISHING_READY,
            BRUT_PLAYER_HAND_FISHING_END_SHARK_2,
            BRUT_PLAYER_HAND_FISHING_END_SHARK_1,
            BRUT_PLAYER_HAND_FISHING_END_SWORDFISH_1,
            BRUT_PLAYER_HAND_FISHING_END_SWORDFISH_2,
            BRUT_PLAYER_HAND_FISHING_END_BLANK,
            BRUT_PLAYER_HAND_FISHING_END_TUNA_1,
            BRUT_PLAYER_HAND_FISHING_END_TUNA_2,
            HUMAN_FISHING_CASTING_PEARL,
            HUMAN_FISHING_CASTING_PEARL_FLY,
            HUMAN_FISHING_CASTING_PEARL_BRUT,
            HUMAN_FISH_ONSPOT_PEARL,
            HUMAN_FISH_ONSPOT_PEARL_FLY,
            HUMAN_FISH_ONSPOT_PEARL_BRUT,
            HUMAN_FISHING_CASTING_PEARL_OILY,
            HUMAN_FISHING_ONSPOT_BRUT
    );

    static final Set<Integer> MINING_ANIMATIONS = ImmutableSet.of(
            HUMAN_MINING_DRAGON_PICKAXE_PRETTY_WALL,
            HUMAN_MINING_RUNE_PICKAXE,
            HUMAN_MINING_BRONZE_PICKAXE,
            HUMAN_MINING_IRON_PICKAXE,
            HUMAN_MINING_STEEL_PICKAXE,
            HUMAN_MINING_ADAMANT_PICKAXE,
            HUMAN_MINING_MITHRIL_PICKAXE,
            HUMAN_MINING_DRAGON_PICKAXE_PRETTY,
            HUMAN_MINING_DRAGON_PICKAXE_PRETTY_NOREACHFORWARD,
            HUMAN_MINING_BLACK_PICKAXE_WALL,
            HUMAN_MINING_BLACK_PICKAXE,
            HUMAN_MINING_INFERNAL_PICKAXE_WALL,
            HUMAN_MINING_INFERNAL_PICKAXE,
            HUMAN_MINING_INFERNAL_PICKAXE_NOREACHFORWARD,
            HUMAN_MINING_BLACK_PICKAXE_NOREACHFORWARD,
            HUMAN_MINING_RUNE_PICKAXE_NOREACHFORWARD,
            HUMAN_MINING_BRONZE_PICKAXE_NOREACHFORWARD,
            HUMAN_MINING_IRON_PICKAXE_NOREACHFORWARD,
            HUMAN_MINING_STEEL_PICKAXE_NOREACHFORWARD,
            HUMAN_MINING_ADAMANT_PICKAXE_NOREACHFORWARD,
            HUMAN_MINING_MITHRIL_PICKAXE_NOREACHFORWARD,
            HUMAN_MINING_RUNE_PICKAXE_WALL,
            HUMAN_MINING_BRONZE_PICKAXE_WALL,
            HUMAN_MINING_IRON_PICKAXE_WALL,
            HUMAN_MINING_STEEL_PICKAXE_WALL,
            HUMAN_MINING_ADAMANT_PICKAXE_WALL,
            HUMAN_MINING_MITHRIL_PICKAXE_WALL,
            HUMAN_MINING_DRAGON_PICKAXE_WALL,
            HUMAN_MINING_DRAGON_PICKAXE,
            HUMAN_MINING_DRAGON_PICKAXE_NOREACHFORWARD,
            HUMAN_MINING_3A_PICKAXE_WALL,
            HUMAN_MINING_3A_PICKAXE,
            HUMAN_MINING_3A_PICKAXE_NOREACHFORWARD,
            HUMAN_MINING_GILDED_PICKAXE_WALL,
            HUMAN_MINING_GILDED_PICKAXE,
            HUMAN_MINING_GILDED_PICKAXE_NOREACHFORWARD,
            HUMAN_MINING_ZALCANO_PICKAXE_WALL,
            HUMAN_MINING_CRYSTAL_PICKAXE_WALL,
            HUMAN_MINING_ZALCANO_PICKAXE,
            HUMAN_MINING_CRYSTAL_PICKAXE,
            HUMAN_MINING_GAUNTLET_PICKAXE_HM,
            HUMAN_MINING_ZALCANO_PICKAXE_NOREACHFORWARD,
            HUMAN_MINING_CRYSTAL_PICKAXE_NOREACHFORWARD,
            HUMAN_MINING_ZALCANO_BRONZE_PICKAXE,
            HUMAN_MINING_ZALCANO_IRON_PICKAXE,
            HUMAN_MINING_ZALCANO_BLACK_PICKAXE,
            HUMAN_MINING_ZALCANO_STEEL_PICKAXE,
            HUMAN_MINING_ZALCANO_MITHRIL_PICKAXE,
            HUMAN_MINING_ZALCANO_ADAMANT_PICKAXE,
            HUMAN_MINING_ZALCANO_RUNE_PICKAXE,
            HUMAN_MINING_ZALCANO_GILDED_PICKAXE,
            HUMAN_MINING_ZALCANO_DRAGON_PICKAXE,
            HUMAN_MINING_ZALCANO_DRAGON_PICKAXE_PRETTY,
            HUMAN_MINING_ZALCANO_ZALCANO_PICKAXE,
            HUMAN_MINING_ZALCANO_INFERNAL_PICKAXE,
            HUMAN_MINING_ZALCANO_3A_PICKAXE,
            HUMAN_MINING_ZALCANO_CRYSTAL_PICKAXE,
            HUMAN_MINING_LEAGUE_TRAILBLAZER_PICKAXE_WALL,
            HUMAN_MINING_LEAGUE_TRAILBLAZER_PICKAXE,
            HUMAN_MINING_LEAGUE_TRAILBLAZER_PICKAXE_NOREACHFORWARD,
            HUMAN_MINING_ZALCANO_LEAGUE_TRAILBLAZER_PICKAXE,
            HUMAN_MINING_TRAILBLAZER_PICKAXE_NO_INFERNAL_WALL,
            HUMAN_MINING_TRAILBLAZER_PICKAXE_NO_INFERNAL,
            HUMAN_MINING_TRAILBLAZER_PICKAXE_NO_INFERNAL_NOREACHFORWARD,
            HUMAN_MINING_ZALCANO_TRAILBLAZER_PICKAXE_NO_INFERNAL,
            HUMAN_MINING_HET_BRONZE_PICKAXE,
            HUMAN_MINING_HET_IRON_PICKAXE,
            HUMAN_MINING_HET_BLACK_PICKAXE,
            HUMAN_MINING_HET_STEEL_PICKAXE,
            HUMAN_MINING_HET_MITHRIL_PICKAXE,
            HUMAN_MINING_HET_ADAMANT_PICKAXE,
            HUMAN_MINING_HET_RUNE_PICKAXE,
            HUMAN_MINING_HET_GILDED_PICKAXE,
            HUMAN_MINING_HET_DRAGON_PICKAXE,
            HUMAN_MINING_HET_DRAGON_PICKAXE_PRETTY,
            HUMAN_MINING_HET_ZALCANO_PICKAXE,
            HUMAN_MINING_HET_INFERNAL_PICKAXE,
            HUMAN_MINING_HET_3A_PICKAXE,
            HUMAN_MINING_HET_CRYSTAL_PICKAXE,
            HUMAN_MINING_HET_LEAGUE_TRAILBLAZER_PICKAXE,
            HUMAN_MINING_HET_TRAILBLAZER_PICKAXE_NO_INFERNAL,
            HUMAN_MINING_TRAILBLAZER_PICKAXE_WALL,
            HUMAN_MINING_TRAILBLAZER_RELOADED_PICKAXE_WALL,
            HUMAN_MINING_TRAILBLAZER_RELOADED_PICKAXE_NO_INFERNAL_WALL,
            HUMAN_MINING_TRAILBLAZER_PICKAXE,
            HUMAN_MINING_TRAILBLAZER_RELOADED_PICKAXE,
            HUMAN_MINING_TRAILBLAZER_RELOADED_PICKAXE_NO_INFERNAL,
            HUMAN_MINING_HET_TRAILBLAZER_PICKAXE,
            HUMAN_MINING_HET_TRAILBLAZER_RELOADED_PICKAXE,
            HUMAN_MINING_HET_TRAILBLAZER_RELOADED_PICKAXE_NO_INFERNAL,
            HUMAN_MINING_TRAILBLAZER_PICKAXE_NOREACHFORWARD,
            HUMAN_MINING_TRAILBLAZER_RELOADED_PICKAXE_NOREACHFORWARD,
            HUMAN_MINING_TRAILBLAZER_RELOADED_PICKAXE_NO_INFERNAL_NOREACHFORWARD,
            HUMAN_MINING_ZALCANO_TRAILBLAZER_PICKAXE,
            HUMAN_MINING_ZALCANO_TRAILBLAZER_RELOADED_PICKAXE,
            HUMAN_MINING_ZALCANO_TRAILBLAZER_RELOADED_PICKAXE_NO_INFERNAL
            );

    static final Set<Integer> WOODCUTTING_ANIMATIONS = ImmutableSet.of(
            HUMAN_WOODCUTTING_TRAILBLAZER_AXE_NO_INFERNAL,
            HUMAN_WOODCUTTING_RUNE_AXE,
            HUMAN_WOODCUTTING_ADAMANT_AXE,
            HUMAN_WOODCUTTING_MITHRIL_AXE,
            HUMAN_WOODCUTTING_BLACK_AXE,
            HUMAN_WOODCUTTING_STEEL_AXE,
            HUMAN_WOODCUTTING_IRON_AXE,
            HUMAN_WOODCUTTING_BRONZE_AXE,
            MISC_HUMAN_WOODCUTTING_STEEL_AXE,
            HUMAN_WOODCUTTING_INFERNAL_AXE,
            HUMAN_WOODCUTTING_DRAGON_AXE,
            HUMAN_WOODCUTTING_BLESSED_AXE,
            HUMAN_WOODCUTTING_BLESSED_AXE_MISS,
            HUMAN_WOODCUTTING_3A_AXE,
            HUMAN_WOODCUTTING_GILDED_AXE,
            HUMAN_WOODCUTTING_CRYSTAL_AXE,
            HUMAN_WOODCUTTING_GAUNTLET_AXE_HM,
            HUMAN_WOODCUTTING_TRAILBLAZER_RELOADED_AXE,
            HUMAN_WOODCUTTING_TRAILBLAZER_RELOADED_AXE_NO_INFERNAL,
            HUMAN_WOODCUTTING_LEAGUE_AXE,
            HUMAN_WOODCUTTING_TRAILBLAZER_AXE,
            FORESTRY_2H_AXE_CHOPPING_BRONZE,
            FORESTRY_2H_AXE_CHOPPING_IRON,
            FORESTRY_2H_AXE_CHOPPING_STEEL,
            FORESTRY_2H_AXE_CHOPPING_BLACK,
            FORESTRY_2H_AXE_CHOPPING_MITHRIL,
            FORESTRY_2H_AXE_CHOPPING_ADAMANT,
            FORESTRY_2H_AXE_CHOPPING_RUNE,
            FORESTRY_2H_AXE_CHOPPING_DRAGON,
            FORESTRY_2H_AXE_CHOPPING_CRYSTAL,
            FORESTRY_2H_AXE_CHOPPING_CRYSTAL_INACTIVE,
            FORESTRY_2H_AXE_CHOPPING_3A,
            HUMAN_CANOEING_CARVE_RUNE_AXE,
            HUMAN_CANOEING_CARVE_ADAMANT_AXE,
            HUMAN_CANOEING_CARVE_MITHRIL_AXE,
            HUMAN_CANOEING_CARVE_BLACK_AXE,
            HUMAN_CANOEING_CARVE_STEEL_AXE,
            HUMAN_CANOEING_CARVE_IRON_AXE,
            HUMAN_CANOEING_CARVE_BRONZE_AXE,
            HUMAN_CANOEING_CARVE_DRAGON_AXE,
            BRUT_HUMAN_CANOEING_CARVE_GILDED_AXE,
            ANMA_CHOPPING_FAILED_TRAILBLAZER_AXE_NO_INFERNAL,
            HUMAN_CANOEING_CARVE_TRAILBLAZER_AXE_NO_INFERNAL,
            HUMAN_CANOEING_CARVE_INFERNAL_AXE,
            ANMA_CHOPPING_FAILED_INFERNAL_AXE,
            ANMA_CHOPPING_FAILED_DRAGON_AXE,
            ANMA_CHOPPING_FAILED_LEAGUE_TRAILBLAZER_AXE,
            HUMAN_CANOEING_CARVE_LEAGUE_TRAILBLAZER_AXE,
            BRUT_HUMAN_CANOEING_CARVE_3A_AXE,
            ANMA_CHOPPING_FAILED_CRYSTAL_AXE,
            HUMAN_CANOEING_CARVE_CRYSTAL_AXE,
            BRUT_HUMAN_CANOEING_CARVE_CRYSTAL_AXE,
            BRUT_HUMAN_CANOEING_CARVE_LEAGUE_TRAILBLAZER_AXE,
            ANMA_CHOPPING_FAIL_BRONZE_2H_AXE,
            ANMA_CHOPPING_FAIL_IRON_2H_AXE,
            ANMA_CHOPPING_FAIL_STEEL_2H_AXE,
            ANMA_CHOPPING_FAIL_BLACK_2H_AXE,
            ANMA_CHOPPING_FAIL_MITHRIL_2H_AXE,
            ANMA_CHOPPING_FAIL_ADAMANT_2H_AXE,
            ANMA_CHOPPING_FAIL_RUNE_2H_AXE,
            ANMA_CHOPPING_FAIL_DRAGON_2H_AXE,
            ANMA_CHOPPING_FAIL_CRYSTAL_2H_AXE,
            ANMA_CHOPPING_FAIL_CRYSTAL_2H_AXE_INACTIVE,
            ANMA_CHOPPING_FAIL_3A_2H_AXE,
            HUMAN_CANOEING_CARVE_BRONZE_2H_AXE,
            HUMAN_CANOEING_CARVE_IRON_2H_AXE,
            HUMAN_CANOEING_CARVE_STEEL_2H_AXE,
            HUMAN_CANOEING_CARVE_BLACK_2H_AXE,
            HUMAN_CANOEING_CARVE_MITHRIL_2H_AXE,
            HUMAN_CANOEING_CARVE_ADAMANT_2H_AXE,
            HUMAN_CANOEING_CARVE_RUNE_2H_AXE,
            HUMAN_CANOEING_CARVE_DRAGON_2H_AXE,
            HUMAN_CANOEING_CARVE_CRYSTAL_2H_AXE,
            HUMAN_CANOEING_CARVE_CRYSTAL_2H_AXE_INACTIVE,
            HUMAN_CANOEING_CARVE_3A_2H_AXE
    );

    static final Set<Integer> FLETCHING_ANIMATIONS = ImmutableSet.of(
            HUMAN_FLETCHING,
            XBOWS_STRINGING_CROSSBOW_BRONZE,
            XBOWS_STRINGING_CROSSBOW_BLURITE,
            XBOWS_STRINGING_CROSSBOW_IRON,
            XBOWS_STRINGING_CROSSBOW_STEEL,
            XBOWS_STRINGING_CROSSBOW_MITHRIL,
            XBOWS_STRINGING_CROSSBOW_ADAMANTITE,
            XBOWS_STRINGING_CROSSBOW_RUNITE,
            STRINGING_SHORTBOW,
            STRINGING_OAK_SHORTBOW,
            STRINGING_WILLOW_SHORTBOW,
            STRINGING_MAPLE_SHORTBOW,
            STRINGING_YEW_SHORTBOW,
            STRINGING_MAGIC_SHORTBOW,
            STRINGING_LONGBOW,
            STRINGING_OAK_LONGBOW,
            STRINGING_WILLOW_LONGBOW,
            STRINGING_MAPLE_LONGBOW,
            STRINGING_YEW_LONGBOW,
            STRINGING_MAGIC_LONGBOW,
            HUMAN_FLETCHING_ADD_BOLT_FEATHERS_BRONZE,
            HUMAN_FLETCHING_ADD_BOLT_FEATHERS_IRON,
            HUMAN_FLETCHING_ADD_BOLT_FEATHERS_SILVER,
            HUMAN_FLETCHING_ADD_BOLT_FEATHERS_BLURITE,
            HUMAN_FLETCHING_ADD_BOLT_FEATHERS_STEEL,
            HUMAN_FLETCHING_ADD_BOLT_FEATHERS_MITHRIL,
            HUMAN_FLETCHING_ADD_BOLT_FEATHERS_ADAMANT,
            HUMAN_FLETCHING_ADD_BOLT_FEATHERS_RUNE,
            HUMAN_FLETCHING_ADD_BOLT_FEATHERS_DRAGON,
            HUMAN_FLETCHING_ADD_BOLT_TIPS_BRONZE,
            HUMAN_FLETCHING_ADD_BOLT_TIPS_IRON,
            HUMAN_FLETCHING_ADD_BOLT_TIPS_BLURITE,
            HUMAN_FLETCHING_ADD_BOLT_TIPS_STEEL,
            HUMAN_FLETCHING_ADD_BOLT_TIPS_MITHRIL,
            HUMAN_FLETCHING_ADD_BOLT_TIPS_ADAMANT,
            HUMAN_FLETCHING_ADD_BOLT_TIPS_RUNE,
            HUMAN_FLETCHING_ADD_BOLT_TIPS_DRAGON,
            HUMAN_FLETCHING_ADD_ARROW_TIPS,
            HUMAN_FLETCHING_ADD_FEATHER,
            HUMAN_FLETCHING_ADD_DART_FEATHERS_BRONZE,
            HUMAN_FLETCHING_ADD_DART_FEATHERS_IRON,
            HUMAN_FLETCHING_ADD_DART_FEATHERS_STEEL,
            HUMAN_FLETCHING_ADD_DART_FEATHERS_MITHRIL,
            HUMAN_FLETCHING_ADD_DART_FEATHERS_ADAMANT,
            HUMAN_FLETCHING_ADD_DART_FEATHERS_RUNE,
            HUMAN_FLETCHING_ADD_DART_FEATHERS_DRAGON,
            HUMAN_FLETCHING_ADD_DART_FEATHERS_AMETHYST,
            HUMAN_FLETCHING_HUNTINGBOLTS_SINGLE,
            HUMAN_FLETCHING_HUNTINGBOLTS_CHISEL,
            HUMAN_FLETCHING_HUNTINGBOLTS_CHISEL_SINGLE,
            HUMAN_FLETCHING_SINGLE,
            HUMAN_FLETCHING_NOXIOUS_HALBERD,
            HUMAN_FLETCHING_SINGLE_ROCK_SHARD,
            HUMAN_FLETCHING_NO_ITEMS,
            HUMAN_FLETCHING_HUNTINGBOLTS_CHISEL_SINGLE_QUICK,
            HUMAN_FLETCHING_HUNTINGBOLTS
    );

    static final Set<Integer> HERBLORE_ANIMATIONS = ImmutableSet.of(
            HUMAN_SALAMANDER_TAR_GRIND,
            HUMAN_HERBING_VIAL,
            HUMAN_HERBING_GRIND
    );

    static final Set<Integer> CRAFTING_ANIMATIONS = ImmutableSet.of(
            HUMAN_POTTERYWHEEL,
            HUMAN_GLASSBLOWING,
            HUMAN_DRAGONSTONECUTTING,
            HUMAN_DIAMONDCUTTING,
            HUMAN_RUBYCUTTING,
            HUMAN_SAPPHIRECUTTING,
            HUMAN_EMERALDCUTTING,
            HUMAN_OPALCUTTING,
            HUMAN_JADECUTTING,
            HUMAN_REDTOPAZCUTTING,
            HUMAN_AMETHYSTCUTTING,
            GHOST_UPDATE_TENDRILL_READY_THRALL, //Previously CRAFTING_SPINNING?
            HUMAN_SPINNINGWHEEL_90,
            HUMAN_SPINNINGWHEEL_60,
            FARMING_USELOOM,
            HUMAN_BATTLESTAFF_CRAFTING,
            HUMAN_LEATHER_CRAFTING,
            HUMAN_SHIELD_CRAFTING_LEATHER,
            HUMAN_SHIELD_CRAFTING_SNAKESKIN,
            ARCEUUS_CHISEL_ESSENCEBLOCK,
            HUMAN_FURNACE //Overlap with smithing, but oh well
    );

    static final Set<Integer> SAILING_HELM_ANIMATIONS = ImmutableSet.of(
            SAILING_ALPHA_HELM_RAFT01_ACTIVE01,
            SAILING_ALPHA_HELM_RAFT01_ACTIVE01_LOOP,
            SAILING_ALPHA_HELM_RAFT01_TRIM_SAILS01,
            SAILING_ALPHA_HELM_RAFT01_TRIM_SAILS01_LOOP,
            SAILING_ALPHA_HELM_RAFT01_TRIM_SAILS02,
            SAILING_ALPHA_HELM_RAFT01_TRIM_SAILS03,

            HUMAN_SAILING_ALPHA_HELM_RAFT01_ACTIVE01,
            HUMAN_SAILING_ALPHA_HELM_RAFT01_ACTIVE01_LOOP,
            HUMAN_SAILING_ALPHA_HELM_RAFT01_TRIM_SAILS01,
            HUMAN_SAILING_ALPHA_HELM_RAFT01_TRIM_SAILS01_LOOP,
            HUMAN_SAILING_ALPHA_HELM_RAFT01_TRIM_SAILS02,

            SAILING_ALPHA_HELM_SMALL01_ACTIVE01,
            SAILING_ALPHA_HELM_SMALL01_ACTIVE01_LOOP,
            SAILING_ALPHA_HELM_SMALL01_TRIM_SAILS01,
            SAILING_ALPHA_HELM_SMALL01_TRIM_SAILS01_LOOP,
            SAILING_ALPHA_HELM_SMALL01_TRIM_SAILS02,

            HUMAN_SAILING_ALPHA_HELM_SMALL01_ACTIVE01,
            HUMAN_SAILING_ALPHA_HELM_SMALL01_ACTIVE01_LOOP,
            HUMAN_SAILING_ALPHA_HELM_SMALL01_TRIM_SAILS01,
            HUMAN_SAILING_ALPHA_HELM_SMALL01_TRIM_SAILS01_LOOP,
            HUMAN_SAILING_ALPHA_HELM_SMALL01_TRIM_SAILS02,
            HUMAN_SAILING_ALPHA_HELM_RAFT01_TRIM_SAILS03,

            SAILING_HELM_3X8_ACTIVE01,
            SAILING_HELM_3X8_ACTIVE01_LOOP,
            SAILING_HELM_3X8_TRIM_SAILS01,
            SAILING_HELM_3X8_TRIM_SAILS01_LOOP,
            SAILING_HELM_3X8_TRIM_SAILS02,

            HUMAN_SAILING_HELM_3X8_ACTIVE01,
            HUMAN_SAILING_HELM_3X8_ACTIVE01_LOOP,
            HUMAN_SAILING_HELM_3X8_TRIM_SAILS01,
            HUMAN_SAILING_HELM_3X8_TRIM_SAILS01_LOOP,
            HUMAN_SAILING_HELM_3X8_TRIM_SAILS02
    );

    static final Set<Integer> SAILING_ANIMATIONS = ImmutableSet.of(
            SAILING_BOATS_SALVAGE_HOOK_KANDARIN_1X3_IDLE01,
            SAILING_BOATS_SALVAGE_HOOK_KANDARIN_1X3_DROP01,
            SAILING_BOATS_SALVAGE_HOOK_KANDARIN_1X3_IDLE02,
            SAILING_BOATS_SALVAGE_HOOK_KANDARIN_1X3_RESET01,
            SAILING_HUMAN_SALVAGE_HOOK_KANDARIN_1X3_DROP01,
            SAILING_HUMAN_SALVAGE_HOOK_KANDARIN_1X3_IDLE01,
            SAILING_HUMAN_SALVAGE_HOOK_KANDARIN_1X3_RESET01,
            SAILING_BOATS_SALVAGE_HOOK_KANDARIN_2X5_IDLE01,
            SAILING_BOATS_SALVAGE_HOOK_KANDARIN_2X5_DROP01,
            SAILING_BOATS_SALVAGE_HOOK_KANDARIN_2X5_IDLE02,
            SAILING_BOATS_SALVAGE_HOOK_KANDARIN_2X5_RESET01,
            SAILING_HUMAN_SALVAGE_HOOK_KANDARIN_2X5_DROP01,
            SAILING_HUMAN_SALVAGE_HOOK_KANDARIN_2X5_IDLE01,
            SAILING_HUMAN_SALVAGE_HOOK_KANDARIN_2X5_RESET01,
            SAILING_BOATS_SALVAGE_HOOK_KANDARIN_3X8_IDLE01,
            SAILING_BOATS_SALVAGE_HOOK_KANDARIN_3X8_DROP01,
            SAILING_BOATS_SALVAGE_HOOK_KANDARIN_3X8_IDLE02,
            SAILING_BOATS_SALVAGE_HOOK_KANDARIN_3X8_RESET01,
            SAILING_HUMAN_SALVAGE_HOOK_KANDARIN_3X8_DROP01,
            SAILING_HUMAN_SALVAGE_HOOK_KANDARIN_3X8_IDLE01,
            SAILING_HUMAN_SALVAGE_HOOK_KANDARIN_3X8_RESET01,
            SAILING_BOATS_SALVAGE_HOOK_KANDARIN_UI,
            SAILING_SALVAGE01_LARGE01_IDLE01,
            SAILING_SALVAGE01_LARGE01_DROP01,
            SAILING_SALVAGE01_LARGE01_IDLE02,
            SAILING_SALVAGE01_LARGE01_RESET01,
            HUMAN_SAILING_SALVAGE01_LARGE01_DROP01,
            HUMAN_SAILING_SALVAGE01_LARGE01_IDLE01,
            HUMAN_SAILING_SALVAGE01_LARGE01_INTERACT01,
            HUMAN_SAILING_SALVAGE01_LARGE01_RESET01,
            SAILING_BOATS_SALVAGE_HOOK_KANDARIN_1X3_SALVAGING01,
            SAILING_HUMAN_SALVAGE_HOOK_KANDARIN_1X3_SALVAGING01,
            SAILING_HUMAN_SALVAGE_HOOK_KANDARIN_1X3_INACTIVE01,
            SAILING_HUMAN_SALVAGE_HOOK_KANDARIN_1X3_PULL01,
            SAILING_HUMAN_SALVAGE_HOOK_KANDARIN_1X3_INTERACT01
    );

    static final Set<Integer> SMITHING_ANIMATIONS = ImmutableSet.of(
            HUMAN_SMITHING,
            HUMAN_FURNACE,
            HUMAN_PICKUPFLOOR, //Previously SMITHING_CANNONBALL?
            HUMAN_SMITHING_IMCANDO_HAMMER,
            BRUT_HUMAN_SMITHING_IMCANDO_HAMMER,
            BRUT_HUMAN_SMITHING
    );

    static final Set<Integer> MONKEY_ROCKS = ImmutableSet.of(
            ObjectID.HUNTING_MONKEYTRAP_UNSET,
            ObjectID.HUNTING_MONKEYTRAP_FULL_0,
            ObjectID.HUNTING_MONKEYTRAP_FULL_1
            //ObjectID.HUNTING_MONKEYTRAP_TRAPPING_0,
            //ObjectID.HUNTING_MONKEYTRAP_TRAPPING_1
    );
}

package eu.jodelahithit;

import com.google.inject.Provides;

import javax.inject.Inject;

import lombok.Getter;
import lombok.extern.slf4j.Slf4j;
import net.runelite.api.*;
import net.runelite.api.coords.LocalPoint;
import net.runelite.api.coords.WorldPoint;
import net.runelite.api.events.*;
import net.runelite.client.config.ConfigManager;
import net.runelite.client.eventbus.Subscribe;
import net.runelite.client.events.ConfigChanged;
import net.runelite.client.game.ItemManager;
import net.runelite.client.input.KeyManager;
import net.runelite.client.plugins.Plugin;
import net.runelite.client.plugins.PluginDescriptor;
import net.runelite.client.ui.ClientToolbar;
import net.runelite.client.ui.NavigationButton;
import net.runelite.client.ui.overlay.OverlayManager;
import net.runelite.client.util.ImageUtil;
import org.apache.commons.lang3.ArrayUtils;

import java.awt.image.BufferedImage;
import java.util.ArrayList;
import java.util.List;

@Slf4j
@PluginDescriptor(
        name = "Skilling Notifications",
        tags = {"notifications", "skilling"},
        description = "Provides visual notifications when no longer actively performing the selected skill"
)
public class SkillingNotificationsPlugin extends Plugin {
    private static final String WALK_HERE = "Walk here";
    private static final String SET_HEADING = "Set heading";
    private static final int MANIACAL_MONKEYS_REGION_ID = 11662;
    private LocalPoint lastPlayerLocation;
    private Session session;
    private NavigationButton navigationButton;
    private List<NotificationType> selectedNotificationTypes = new ArrayList<>();
    private Tile lastManiacalMonkeyRockTile = null;
    private int[] xpCache;

    @Getter
    private SkillingNotificationsPanel panel;

    @Inject
    Client client;
    @Inject
    ConfigManager configManager;
    @Inject
    SkillingNotificationsConfig config;
    @Inject
    OverlayManager overlayManager;
    @Inject
    SkillingNotificationsOverlay overlay;
    @Inject
    SkillingNotificationsListener inputListener;
    @Inject
    ClientToolbar clientToolbar;
    @Inject
    ItemManager itemManager;
    @Inject
    KeyManager keyManager;

    public final BufferedImage ICON = ImageUtil.loadImageResource(SkillingNotificationsPlugin.class, "icon.png");

    @Override
    protected void startUp() throws Exception {
        xpCache = new int[Skill.values().length];
        keyManager.registerKeyListener(inputListener);
        updateSelectedSkills();
        panel = new SkillingNotificationsPanel(configManager);
        navigationButton = NavigationButton.builder()
                .tooltip("Skilling Notifications")
                .icon(ICON).priority(10).panel(panel)
                .build();

        clientToolbar.addNavigation(navigationButton);
        overlayManager.add(overlay);
        session = new Session(this);

        Skill[] skills = Skill.values();
        xpCache = new int[skills.length];
        for (Skill s : skills) {
            xpCache[s.ordinal()] = client.getSkillExperience(s);
        }
    }

    @Override
    protected void shutDown() throws Exception {
        clientToolbar.removeNavigation(navigationButton);
        overlayManager.remove(overlay);
        keyManager.unregisterKeyListener(inputListener);
    }

    @Provides
    SkillingNotificationsConfig provideConfig(ConfigManager configManager) {
        return configManager.getConfig(SkillingNotificationsConfig.class);
    }

    @Subscribe
    public void onClientTick(ClientTick clientTick) {
        //Utils.printAnimation(client);
        if (!config.enabled()) return;
        for (NotificationType notificationType : selectedNotificationTypes) {
            if (Utils.isInAnimation(notificationType, client)) session.updateInstant(notificationType);
        }
        Player player = client.getLocalPlayer();
        if (player != null) {
            LocalPoint playerLocation = player.getLocalLocation();
            if (!playerLocation.equals(lastPlayerLocation)) {
                session.updateWalkingInstant();
            }
            lastPlayerLocation = playerLocation;
        }

        if(Utils.isInAnimation(Constants.SAILING_HELM_ANIMATIONS, client)){
            session.updateSailingInstant();
        }

        boolean isInManiacalMonkeysArea = isInManiacalMonkeysArea();
        if (!isInManiacalMonkeysArea || lastManiacalMonkeyRockTile != null) {
            session.updateInstant(NotificationType.MANIACALMONKEYS);
        }
    }

    @Subscribe
    public void onConfigChanged(ConfigChanged configChanged) {
        if (configChanged.getGroup().equals(SkillingNotificationsConfig.CONFIG_GROUP)) {
            updateSelectedSkills();
        }
    }

    @Subscribe
    public void onStatChanged(StatChanged statChanged) {
        Skill skill = statChanged.getSkill();
        int currentXp = statChanged.getXp();
        int skillIdx = skill.ordinal();
        int cachedXP = xpCache[skillIdx];
        if (cachedXP < currentXp) {
            int xpAmount = currentXp - cachedXP;
            if (xpAmount >= config.customXPValue()) {
                session.updateInstant(NotificationType.CUSTOMXP);
            }
        }

        xpCache[skillIdx] = currentXp;
    }

    @Subscribe
    public void onHitsplatApplied(HitsplatApplied hitsplatApplied) {
        if (!config.enabled()) return;
        Actor actor = hitsplatApplied.getActor();
        Hitsplat hitsplat = hitsplatApplied.getHitsplat();
        if (hitsplat.isMine()) {
            session.updateInstant(NotificationType.COMBAT);
        }
    }

    @Subscribe
    public void onGameObjectSpawned(GameObjectSpawned event) {
        final GameObject gameObject = event.getGameObject();
        final int id = gameObject.getId();
        final WorldPoint trapLocation = gameObject.getWorldLocation();

        if (id == ObjectID.MONKEY_TRAP || id == ObjectID.LARGE_BOULDER_28825) {
            if (client.getLocalPlayer().getWorldLocation().distanceTo(trapLocation) <= 2) {
                lastManiacalMonkeyRockTile = event.getTile();
            }
            return;
        }

        if (Constants.MONKEY_ROCKS.contains(id)) {
            if (lastManiacalMonkeyRockTile != null && event.getTile() == lastManiacalMonkeyRockTile)
                lastManiacalMonkeyRockTile = null;
        }
    }

    @Subscribe
    private void onWorldChanged(WorldChanged ev) {
        lastManiacalMonkeyRockTile = null;
    }

    @Subscribe
    public void onMenuOptionClicked(MenuOptionClicked event) {
        if (event.getMenuOption().equals(WALK_HERE) || event.getMenuOption().equals(SET_HEADING)) session.updateWalkingInstant();
    }

    boolean areSelectedSkillsActive() {
        for (NotificationType notificationType : selectedNotificationTypes) {
            if (notificationType == NotificationType.MANIACALMONKEYS && !isInManiacalMonkeysArea()) {
                continue;
            }
            if (session.isSkillActive(notificationType)) {
                return true;
            }
        }
        return false;
    }

    boolean shouldRenderOverlay() {
        if (!config.enabled()) return false;
        final boolean skills = !selectedNotificationTypes.isEmpty() && !areSelectedSkillsActive();
        final boolean notMoving = !(config.disableWhenWalking() && (session.isWalking(config.walkDelay()) || session.isSailing()));
        return skills && notMoving;
    }

    public List<NotificationType> getSelectedSkills() {
        return selectedNotificationTypes;
    }

    void updateSelectedSkills() {
        selectedNotificationTypes.clear();
        for (NotificationType notificationType : NotificationType.values()) {
            if (Boolean.parseBoolean(configManager.getConfiguration(SkillingNotificationsConfig.CONFIG_GROUP, notificationType.name().toUpperCase()))) {
                selectedNotificationTypes.add(notificationType);
            }
        }

    }

    int getExtraSkillDelay(NotificationType notificationType) {
        int delay = Integer.parseInt(configManager.getConfiguration(SkillingNotificationsConfig.CONFIG_GROUP, notificationType.name() + "DELAYV2"));
        if (notificationType == NotificationType.COMBAT) return Utils.getAttackSpeed(client, itemManager) * 600 + delay;
        return delay;
    }

    void setSkillInConfig(NotificationType notificationType) {
        configManager.setConfiguration(SkillingNotificationsConfig.CONFIG_GROUP, "selectedSkill", notificationType);
    }

    boolean isInManiacalMonkeysArea() {
        return ArrayUtils.contains(client.getMapRegions(), MANIACAL_MONKEYS_REGION_ID);
    }
}
package eu.jodelahithit;

import com.google.inject.Inject;
import net.runelite.api.Client;
import net.runelite.api.Point;
import net.runelite.client.ui.overlay.Overlay;
import net.runelite.client.ui.overlay.OverlayLayer;
import net.runelite.client.ui.overlay.OverlayPosition;
import net.runelite.client.util.ColorUtil;

import java.awt.*;
import java.time.Instant;

public class SkillingNotificationsOverlay extends Overlay {
    private final Client client;
    private final SkillingNotificationsPlugin plugin;
    private final SkillingNotificationsConfig config;
    private final float TEXT_COLOR_LERP = 0.75f;
    private long lastFadeTime = System.currentTimeMillis();
    private static Instant notificationInstant = Instant.now();
    private static String notificationText = "";
    private boolean previousShouldRender = false;

    @Inject
    private SkillingNotificationsOverlay(Client client, SkillingNotificationsPlugin plugin, SkillingNotificationsConfig config) {
        super(plugin);
        setPosition(OverlayPosition.DYNAMIC);
        setLayer(OverlayLayer.ABOVE_SCENE);
        this.client = client;
        this.plugin = plugin;
        this.config = config;
    }

    float fadeValue = 0.0f;

    private Color getFadedColor(Color input, boolean overlayEnabled) {
        int fadeDuration = config.notificationFade();
        if (fadeDuration == 0) {
            fadeValue = 0.0f;
            return input;
        }

        long now = System.currentTimeMillis();
        float difference = (now - lastFadeTime) / (float) fadeDuration;
        lastFadeTime = now;

        fadeValue += overlayEnabled ? difference : -difference;

        fadeValue = Utils.clamp01(fadeValue);

        int r = input.getRed();
        int g = input.getGreen();
        int b = input.getBlue();
        int a = input.getAlpha();
        return new Color(r, g, b, (int) (a * fadeValue));
    }

    @Override
    public Dimension render(Graphics2D graphics) {

        boolean shouldRender = plugin.shouldRenderOverlay();
        if(config.notificationSound() && shouldRender && !previousShouldRender){
            Toolkit.getDefaultToolkit().beep();
        }
        previousShouldRender = shouldRender;

        Color fadedColor = getFadedColor(config.overlayColor(), shouldRender);
        if (shouldRender || fadeValue > 0.05f) {
            boolean canFlash = fadeValue > 0.95f || config.notificationFade() == 0;
            if (canFlash && config.flash() && client.getGameCycle() % 40 >= 20) return null;
            Color color = graphics.getColor();
            graphics.setColor(fadedColor);
            graphics.fill(new Rectangle(client.getCanvas().getSize()));
            graphics.setColor(color);
            if (!config.disableOverlayText()) {
                Point locationOffset = new Point(client.getCanvasWidth() / 2, client.getCanvasHeight() / 8 + Utils.getStringHeight(graphics));
                Utils.renderTextCentered(graphics, locationOffset, "Skilling Notification", ColorUtil.colorLerp(Color.white, config.overlayColor(), TEXT_COLOR_LERP));
            }
        }
        if (Session.checkInstant(notificationInstant, 2000)) {
            Point location = new Point(client.getCanvasWidth() / 2, client.getCanvasHeight() / 8);
            Utils.renderTextCentered(graphics, location, notificationText, ColorUtil.colorLerp(Color.white, config.overlayColor(), TEXT_COLOR_LERP));
        }
        return null;
    }

    public void notify(String text) {
        notificationInstant = Instant.now();
        notificationText = text;
    }
}

package eu.jodelahithit;

import net.runelite.client.config.ConfigManager;

import javax.inject.Inject;
import java.awt.event.KeyEvent;

import net.runelite.client.input.KeyListener;

public class SkillingNotificationsListener implements KeyListener {
    @Inject
    SkillingNotificationsPlugin plugin;
    @Inject
    SkillingNotificationsConfig config;
    @Inject
    SkillingNotificationsOverlay overlay;
    @Inject
    ConfigManager configManager;

    @Override
    public void keyPressed(KeyEvent e) {
        if (config.toggle().matches(e)) {
            boolean enabled = !Boolean.parseBoolean(configManager.getConfiguration(SkillingNotificationsConfig.CONFIG_GROUP, "enabled"));
            configManager.setConfiguration(SkillingNotificationsConfig.CONFIG_GROUP, "enabled", enabled);
            plugin.getPanel().repaintConfigButtons();
            overlay.notify(enabled ? "Enabled skilling notifications" : "Disabled skilling notifications");
        } else if (config.toggleFlash().matches(e)) {
            boolean enabled = !Boolean.parseBoolean(configManager.getConfiguration(SkillingNotificationsConfig.CONFIG_GROUP, "notificationFlash"));
            configManager.setConfiguration(SkillingNotificationsConfig.CONFIG_GROUP, "notificationFlash", enabled);
            plugin.getPanel().repaintConfigButtons();
            overlay.notify(enabled ? "Enabled notification flash" : "Disabled notification flash");
        }
    }

    @Override
    public void keyTyped(KeyEvent e) {
    }

    @Override
    public void keyReleased(KeyEvent e) {
    }
}

package eu.jodelahithit;

import net.runelite.client.RuneLite;
import net.runelite.client.externalplugins.ExternalPluginManager;

public class SkillingNotificationsTest
{
	public static void main(String[] args) throws Exception
	{
		ExternalPluginManager.loadBuiltin(SkillingNotificationsPlugin.class);
		RuneLite.main(args);
	}
}
