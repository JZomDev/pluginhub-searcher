package com.doorbanger;

import javax.inject.Inject;
import lombok.extern.slf4j.Slf4j;
import net.runelite.api.*;
import net.runelite.api.coords.LocalPoint;
import net.runelite.api.events.ClientTick;
import net.runelite.api.events.MenuOptionClicked;
import net.runelite.client.eventbus.Subscribe;
import net.runelite.client.plugins.Plugin;
import net.runelite.client.plugins.PluginDescriptor;

@Slf4j
@PluginDescriptor(
	name = "Door Banger"
)
public class DoorBangerPlugin extends Plugin
{
	@Inject
	private Client client;

	private LocalPoint doorLoc;


	@Subscribe
	public void onMenuOptionClicked(MenuOptionClicked clicked)
	{

		if (clicked.getMenuOption().equals("Open") && clicked.getMenuTarget().endsWith("Door"))
		{
			// get door location - doesn't need to be in every client tick because it doesn't move.
			doorLoc = LocalPoint.fromScene(clicked.getParam0(), clicked.getParam1());
		}
		else {
			doorLoc = null;
		}
	}


	@Subscribe
	public void onClientTick (ClientTick tick){
		// gets player loc every tick
		// when door location in relation to player location is 2 tile or less, set anim

		if (doorLoc != null) {
			Player player = client.getLocalPlayer();

			if (doorLoc.distanceTo(player.getLocalLocation()) <= Perspective.LOCAL_TILE_SIZE * 2) {
				player.setAnimation(2108);
				player.setAnimationFrame(0);
				doorLoc = null;
			}
		}
	}
}



package com.doorbanger;

import net.runelite.client.RuneLite;
import net.runelite.client.externalplugins.ExternalPluginManager;

public class DoorBangerPluginTest
{
	public static void main(String[] args) throws Exception
	{
		ExternalPluginManager.loadBuiltin(DoorBangerPlugin.class);
		RuneLite.main(args);
	}
}
