package com.entrana;

import com.google.common.collect.ImmutableSet;

import java.util.Set;
import net.runelite.api.gameval.ItemID;

public class AllowedIDs {
	private static final Set<Integer> allowedIds = ImmutableSet.of(
		ItemID.BOOK_OF_THE_DEAD,
		ItemID.IKOV_BOOTSOFLIGHTNESS,
		ItemID.IKOV_BOOTSOFLIGHTNESSWORN,
		ItemID.HUNTING_LIGHT_CAPE,
		ItemID.HUNTING_LIGHT_CAPE_WORN,
		ItemID.HUNTING_LIGHTER_CAPE,
		ItemID.HUNTING_LIGHTER_CAPE_WORN,
		ItemID.LEAGUE_3_MAGIC_BOOK,
		ItemID.FAIRY_ENCHANTED_SECATEURS,
		ItemID.GUTHIXBOOK_COMPLETE,
		ItemID.LEAGUE_3_BOOK_GUTHIX,
		ItemID.ZAROSBOOK_COMPLETE,
		ItemID.LEAGUE_3_BOOK_ZAROS,
		ItemID.ARMADYLBOOK_COMPLETE,
		ItemID.LEAGUE_3_BOOK_ARMADYL,
		ItemID.BANDOSBOOK_COMPLETE,
		ItemID.LEAGUE_3_BOOK_BANDOS,
		ItemID.SARADOMINBOOK_COMPLETE,
		ItemID.LEAGUE_3_BOOK_SARADOMIN,
		ItemID.ZAMORAKBOOK_COMPLETE,
		ItemID.LEAGUE_3_BOOK_ZAMORAK,
		ItemID.BLUEWIZHAT,
		ItemID.BLUEWIZHAT_TRIM,
		ItemID.BLUEWIZHAT_TRIM_GOLD,
		ItemID.WIZARDS_ROBE,
		ItemID.WIZARDS_ROBE_TRIM,
		ItemID.WIZARDS_ROBE_TRIM_GOLD,
		ItemID.BLACKWIZHAT,
		ItemID.BLACKWIZHAT_TRIM,
		ItemID.BLACKWIZHAT_GOLD,
		ItemID.BLACK_ROBE,
		ItemID.BLACK_WIZARDS_ROBE_TRIM,
		ItemID.BLACK_WIZARDS_ROBE_GOLD,
		ItemID.ZAMROBEBOTTOM,
		ItemID.ZAMROBETOP,
		ItemID.HAM_ROBE,
		ItemID.HAM_SHIRT,
		ItemID.HAM_HOOD,
		ItemID.HAM_BOOTS,
		ItemID.HAM_GLOVES,
		ItemID.HAM_CLOAK,
		ItemID.WOLFENBOOTS_GREY,
		ItemID.WOLFENROBETOP_GREY,
		ItemID.WOLFENROBEBOTTOM_GREY,
		ItemID.WOLFENHAT_GREY,
		ItemID.WOLFENGLOVES_GREY,
		ItemID.WOLFENBOOTS_CRIMSON,
		ItemID.WOLFENROBETOP_CRIMSON,
		ItemID.WOLFENROBEBOTTOM_CRIMSON,
		ItemID.WOLFENHAT_CRIMSON,
		ItemID.WOLFENGLOVES_CRIMSON,
		ItemID.WOLFENBOOTS_TANGERINE,
		ItemID.WOLFENROBETOP_TANGERINE,
		ItemID.WOLFENROBEBOTTOM_TANGERINE,
		ItemID.WOLFENHAT_TANGERINE,
		ItemID.WOLFENGLOVES_TANGERINE,
		ItemID.WOLFENBOOTS_OCEAN,
		ItemID.WOLFENROBETOP_OCEAN,
		ItemID.WOLFENROBEBOTTOM_OCEAN,
		ItemID.WOLFENHAT_OCEAN,
		ItemID.WOLFENGLOVES_OCEAN,
		ItemID.WOLFENBOOTS_PURPLE,
		ItemID.WOLFENROBETOP_PURPLE,
		ItemID.WOLFENROBEBOTTOM_PURPLE,
		ItemID.WOLFENHAT_PURPLE,
		ItemID.WOLFENGLOVES_PURPLE,
		ItemID.BLACK_CAPE,
		ItemID.BLUE_CAPE,
		ItemID.YELLOW_CAPE,
		ItemID.GREEN_CAPE,
		ItemID.PURPLE_CAPE,
		ItemID.ORANGE_CAPE,
		ItemID.VIKING_CLOAK_GREEN,
		ItemID.VIKING_CLOAK_DARKBROWN,
		ItemID.VIKING_CLOAK_LIGHTBROWN,
		ItemID.VIKING_CLOAK_BROWN,
		ItemID.VIKING_TOP_DARKBROWN,
		ItemID.VIKING_TOP_GREEN,
		ItemID.VIKING_TOP_BEIGE,
		ItemID.VIKING_TOP_RED,
		ItemID.VIKING_TOP_BLUE,
		ItemID.VIKING_CLOAK_RED,
		ItemID.VIKING_CLOAK_GREY,
		ItemID.VIKING_CLOAK_TANGERINE,
		ItemID.VIKING_CLOAK_OCEAN,
		ItemID.VIKING_CLOAK_PURPLE,
		ItemID.VIKING_CLOAK_PINK,
		ItemID.VIKING_CLOAK_BLACK,
		ItemID.VIKINGBOOTS,
		ItemID.VIKINGROBETOP,
		ItemID.VIKINGROBEBOTTOM,
		ItemID.VIKINGHAT,
		ItemID.VIKINGGLOVES,
		ItemID.DEATH_SPIKEDBOOTS,
		ItemID.LEATHER_BOOTS,
		ItemID.LEATHER_GLOVES,
		ItemID.DEATH_CLIMBINGBOOTS,
		ItemID.CLIMBING_BOOTS_G,
		ItemID.LEATHER_VAMBRACES,
		ItemID.TRAIL_GUTHIX_CLOAK,
		ItemID.CASTLEWARS_CLOAK_ZAMORAK,
		ItemID.CASTLEWARS_CLOAK_SARADOMIN,
		ItemID.TRAIL_ARMADYL_CLOAK,
		ItemID.TRAIL_ANCIENT_CLOAK,
		ItemID.TRAIL_BANDOS_CLOAK,
		ItemID.WILDERNESS_CAPE_1,
		ItemID.WILDERNESS_CAPE_2,
		ItemID.WILDERNESS_CAPE_3,
		ItemID.WILDERNESS_CAPE_4,
		ItemID.WILDERNESS_CAPE_5,
		ItemID.WILDERNESS_CAPE_6,
		ItemID.WILDERNESS_CAPE_7,
		ItemID.WILDERNESS_CAPE_8,
		ItemID.WILDERNESS_CAPE_9,
		ItemID.WILDERNESS_CAPE_10,
		ItemID.WILDERNESS_CAPE_11,
		ItemID.WILDERNESS_CAPE_12,
		ItemID.WILDERNESS_CAPE_13,
		ItemID.WILDERNESS_CAPE_14,
		ItemID.WILDERNESS_CAPE_15,
		ItemID.WILDERNESS_CAPE_16,
		ItemID.WILDERNESS_CAPE_17,
		ItemID.WILDERNESS_CAPE_18,
		ItemID.WILDERNESS_CAPE_19,
		ItemID.WILDERNESS_CAPE_20,
		ItemID.WILDERNESS_CAPE_21,
		ItemID.WILDERNESS_CAPE_22,
		ItemID.WILDERNESS_CAPE_23,
		ItemID.WILDERNESS_CAPE_24,
		ItemID.WILDERNESS_CAPE_25,
		ItemID.WILDERNESS_CAPE_26,
		ItemID.WILDERNESS_CAPE_27,
		ItemID.WILDERNESS_CAPE_28,
		ItemID.WILDERNESS_CAPE_29,
		ItemID.WILDERNESS_CAPE_30,
		ItemID.WILDERNESS_CAPE_31,
		ItemID.WILDERNESS_CAPE_32,
		ItemID.WILDERNESS_CAPE_33,
		ItemID.WILDERNESS_CAPE_34,
		ItemID.WILDERNESS_CAPE_35,
		ItemID.WILDERNESS_CAPE_36,
		ItemID.WILDERNESS_CAPE_37,
		ItemID.WILDERNESS_CAPE_38,
		ItemID.WILDERNESS_CAPE_39,
		ItemID.WILDERNESS_CAPE_40,
		ItemID.WILDERNESS_CAPE_41,
		ItemID.WILDERNESS_CAPE_42,
		ItemID.WILDERNESS_CAPE_43,
		ItemID.WILDERNESS_CAPE_44,
		ItemID.WILDERNESS_CAPE_45,
		ItemID.WILDERNESS_CAPE_46,
		ItemID.WILDERNESS_CAPE_47,
		ItemID.WILDERNESS_CAPE_48,
		ItemID.WILDERNESS_CAPE_49,
		ItemID.WILDERNESS_CAPE_50,
		ItemID.WILDERNESS_CAPE_I,
		ItemID.WILDERNESS_CAPE_X,
		ItemID.WILDERNESS_CAPE_ZERO,
		ItemID.SECRET_GHOST_BOOTS,
		ItemID.SECRET_GHOST_GLOVES,
		ItemID.ICE_GLOVES,
		ItemID.HUNTING_SILENT_GLOVES,
		ItemID.GNOME_BOOTS_PINK,
		ItemID.GNOME_BOOTS_GREEN,
		ItemID.GNOME_BOOTS_BLUE,
		ItemID.GNOME_BOOTS_CREAM,
		ItemID.GNOME_BOOTS_TURQUOISE,
		ItemID.GNOME_ROBETOP_PINK,
		ItemID.GNOME_ROBETOP_GREEN,
		ItemID.GNOME_ROBETOP_BLUE,
		ItemID.GNOME_ROBETOP_CREAM,
		ItemID.GNOME_ROBETOP_TURQUOISE,
		ItemID.GNOME_ROBEBOTTOMS_PINK,
		ItemID.GNOME_ROBEBOTTOMS_GREEN,
		ItemID.GNOME_ROBEBOTTOMS_BLUE,
		ItemID.GNOME_ROBEBOTTOMS_CREAM,
		ItemID.GNOME_ROBEBOTTOMS_TURQUOISE,
		ItemID.GNOME_HAT_PINK,
		ItemID.GNOME_HAT_GREEN,
		ItemID.GNOME_HAT_BLUE,
		ItemID.GNOME_HAT_CREAM,
		ItemID.GNOME_HAT_TURQUOISE,
		ItemID.DAGGANOTH_MELEE_FEET,
		ItemID.BOOTS_OF_STONE,
		ItemID.BOOTS_WIZARD,
		ItemID.FORESTRY_GLOVES,
		ItemID.TOME_OF_WATER,
		ItemID.TOME_OF_WATER_UNCHARGED,
		ItemID.TOME_OF_EARTH,
		ItemID.TOME_OF_EARTH_UNCHARGED
	);

    public static boolean contains(int id) {
        return allowedIds.contains(id);
    }
}

package com.entrana;

import com.google.inject.Inject;
import com.google.inject.Singleton;
import java.awt.AlphaComposite;
import java.awt.Color;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.image.BufferedImage;
import net.runelite.api.gameval.InterfaceID;
import net.runelite.api.widgets.WidgetItem;
import net.runelite.api.widgets.WidgetUtil;
import net.runelite.client.game.ItemManager;
import net.runelite.client.ui.overlay.WidgetItemOverlay;

@Singleton
public class ContainerHighlight extends WidgetItemOverlay
{
	private final ItemManager itemManager;
	private final EntranaConfig config;
	private final ProhibitedItems prohibitedItems;

	@Inject
	private ContainerHighlight(ItemManager itemManager, EntranaConfig config)
	{
		this.itemManager = itemManager;
		this.config = config;
		this.prohibitedItems = new ProhibitedItems(itemManager);
		showOnInventory();
		showOnEquipment();
	}

	@Override
	public void renderItemOverlay(Graphics2D graphics, int itemId, WidgetItem itemWidget)
	{
		int interfaceId = WidgetUtil.componentToInterface(itemWidget.getWidget().getId());
		if (!prohibitedItems.isProhibited(itemId) || (interfaceId != InterfaceID.EQUIPMENT
			&& interfaceId != InterfaceID.INVENTORY
			&& interfaceId != InterfaceID.BANK_DEPOSITBOX))
		{
			return;
		}
		final Rectangle bounds = itemWidget.getCanvasBounds();
		final BufferedImage outline = itemManager.getItemOutline(itemId, itemWidget.getQuantity(), config.color());
		graphics.drawImage(outline, (int) bounds.getX(), (int) bounds.getY(), null);
	}

	private BufferedImage overlay(BufferedImage image, Color color)
	{
		int w = image.getWidth();
		int h = image.getHeight();
		BufferedImage overlayed = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);
		Graphics2D g = overlayed.createGraphics();
		g.drawImage(image, 0, 0, null);
		g.setComposite(AlphaComposite.SrcAtop);
		g.setColor(color);
		g.fillRect(0, 0, w, h);
		g.dispose();
		return overlayed;
	}
}

package com.entrana;

import java.awt.Color;
import net.runelite.client.config.Config;
import net.runelite.client.config.ConfigGroup;
import net.runelite.client.config.ConfigItem;

@ConfigGroup("entrana")
public interface EntranaConfig extends Config
{
	@ConfigItem(
		keyName = "color",
		name = "Prohibited color",
		description = "The color to outline prohibited items"
	)
	default Color color()
	{
		return Color.ORANGE;
	}
}

package com.entrana;

import com.google.inject.Provides;
import javax.inject.Inject;
import lombok.extern.slf4j.Slf4j;
import net.runelite.api.Client;
import net.runelite.api.Player;
import net.runelite.api.coords.WorldArea;
import net.runelite.api.coords.WorldPoint;
import net.runelite.api.events.GameTick;
import net.runelite.client.config.ConfigManager;
import net.runelite.client.eventbus.Subscribe;
import net.runelite.client.plugins.Plugin;
import net.runelite.client.plugins.PluginDescriptor;
import net.runelite.client.ui.overlay.OverlayManager;

@Slf4j
@PluginDescriptor(
	name = "Entrana"
)
public class EntranaPlugin extends Plugin
{
	private static final int BALLOON_TRANSPORT_ID = 469;

	@Inject
	private Client client;

	@Inject
	private EntranaConfig config;

	@Inject
	private ContainerHighlight containerHighlight;

	@Inject
	private OverlayManager overlayManager;

	@Provides
	EntranaConfig provideConfig(ConfigManager configManager)
	{
		return configManager.getConfig(EntranaConfig.class);
	}

	private static final WorldArea entranaDock = new WorldArea(new WorldPoint(3043, 3234, 0), 8, 4);

	@Subscribe
	public void onGameTick(GameTick event)
	{
		Player player = client.getLocalPlayer();
		if (player == null)
		{
			return;
		}
		if (!entranaDock.contains2D(player.getWorldLocation()) && client.getWidget(BALLOON_TRANSPORT_ID, 0) == null)
		{
			overlayManager.remove(containerHighlight);
			return;
		}
		overlayManager.add(containerHighlight);
	}

	@Override
	protected void shutDown() throws Exception
	{
		overlayManager.remove(containerHighlight);
	}
}

package com.entrana;

import com.google.common.collect.ImmutableSet;

import java.util.Set;
import net.runelite.api.gameval.ItemID;

public class ProhibitedIDs {
	private static final Set<Integer> prohibitedIds = ImmutableSet.of(
		ItemID.BREW_FLAG_1,
		ItemID.BREW_FLAG_2,
		ItemID.BREW_FLAG_3,
		ItemID.BREW_FLAG_4,
		ItemID.BREW_FLAG_5,
		ItemID.BREW_FLAG_6,
		ItemID.POH_BANNER_ARRAV,
		ItemID.POH_BANNER_ASGARNIA,
		ItemID.POH_BANNER_DORGESHUUN,
		ItemID.POH_BANNER_DRAGON,
		ItemID.POH_BANNER_FAIRY,
		ItemID.POH_BANNER_GUTHIX,
		ItemID.POH_BANNER_HAM,
		ItemID.POH_BANNER_HORSE,
		ItemID.POH_BANNER_JOGRE,
		ItemID.POH_BANNER_KANDARIN,
		ItemID.POH_BANNER_MISTHALIN,
		ItemID.POH_BANNER_MONEY,
		ItemID.POH_BANNER_SARADOMIN,
		ItemID.POH_BANNER_SKULL,
		ItemID.POH_BANNER_VARROCK,
		ItemID.POH_BANNER_ZAMORAK,
		ItemID.ARCEUUS_BANNER,
		ItemID.CHARITY_BANNER,
		ItemID.HOSIDIUS_BANNER,
		ItemID.LOVAKENGJ_BANNER,
		ItemID.PISCARILIUS_BANNER,
		ItemID.AKD_PROTEST_BANNER,
		ItemID.LEAGUE_3_BANNER,
		ItemID.SHAYZIEN_BANNER,
		ItemID.TRAILBLAZER_BANNER,
		ItemID.SARADOMIN_REWARD_BANNER,
		ItemID.ZAMORAK_REWARD_BANNER,
		ItemID.II_MAGIC_BUTTERFLY_NET,
		ItemID.GODWARS_GODSWORD_HILT_ANCIENT,
		ItemID.GODWARS_GODSWORD_HILT_SARADOMIN,
		ItemID.GODWARS_GODSWORD_HILT_BANDOS,
		ItemID.GODWARS_GODSWORD_HILT_ZAMORAK,
		ItemID.GODWARS_GODSWORD_HILT_ARMADYL,
		ItemID.GODWARS_GODSWORD_BLADE1_2_3,
		ItemID.GODWARS_GODSWORD_BLADE1,
		ItemID.GODWARS_GODSWORD_BLADE2,
		ItemID.GODWARS_GODSWORD_BLADE3,
		ItemID.JOINT_OF_HAM,
		ItemID.SWIFT_BLADE,
		ItemID.IMCANDO_HAMMER,
		ItemID.TWPART1,
		ItemID.TWPART2,
		ItemID.TWPART3,
		ItemID.TWPART4,
		ItemID.LEAGUE_3_MULTICANNON_BASE,
		ItemID.LEAGUE_3_MULTICANNON_STAND,
		ItemID.LEAGUE_3_MULTICANNON_BARRELS,
		ItemID.LEAGUE_3_MULTICANNON_FURNACE,
		ItemID.II_CAPTURED_IMPLING_1,
		ItemID.II_CAPTURED_IMPLING_2,
		ItemID.II_CAPTURED_IMPLING_3,
		ItemID.II_CAPTURED_IMPLING_4,
		ItemID.II_CAPTURED_IMPLING_5,
		ItemID.II_CAPTURED_IMPLING_6,
		ItemID.II_CAPTURED_IMPLING_7,
		ItemID.II_CAPTURED_IMPLING_8,
		ItemID.II_CAPTURED_IMPLING_9,
		ItemID.II_CAPTURED_IMPLING_10,
		ItemID.II_CAPTURED_IMPLING_11,
		ItemID.II_CAPTURED_IMPLING_12,
		ItemID.WINT_REWARD_BOX,
		ItemID.SOUL_WARS_SPOILS,
		ItemID.HUNTING_BUTTERFLY_NET,
		ItemID.TRAIL_SARADOMIN_SCARF,
		ItemID.TRAIL_GUTHIX_SCARF,
		ItemID.TRAIL_ZAMORAK_SCARF,
		ItemID.TRAIL_ARMADYL_SCARF,
		ItemID.TRAIL_BANDOS_SCARF,
		ItemID.TRAIL_ANCIENT_SCARF,
		ItemID.MOTHERLODE_REWARD_BOOTS,
		ItemID.MOTHERLODE_REWARD_HAT,
		ItemID.MOTHERLODE_REWARD_TOP,
		ItemID.MOTHERLODE_REWARD_LEGS,
		ItemID.MOTHERLODE_REWARD_BOOTS_GOLD,
		ItemID.MOTHERLODE_REWARD_HAT_GOLD,
		ItemID.MOTHERLODE_REWARD_TOP_GOLD,
		ItemID.MOTHERLODE_REWARD_LEGS_GOLD,
		ItemID.COLLECTION_STAFF_GILDED,
		ItemID.COLLECTION_STAFF_DRAGON,
		ItemID.COLLECTION_STAFF_RUNE,
		ItemID.COLLECTION_STAFF_ADAMANT,
		ItemID.COLLECTION_STAFF_MITHRIL,
		ItemID.COLLECTION_STAFF_STEEL,
		ItemID.COLLECTION_STAFF_BLACK,
		ItemID.COLLECTION_STAFF_IRON,
		ItemID.COLLECTION_STAFF_BRONZE
	);

    public static boolean contains(int id) {
        return prohibitedIds.contains(id);
    }
}

package com.entrana;

import net.runelite.api.EquipmentInventorySlot;
import net.runelite.api.ItemComposition;
import net.runelite.client.game.ItemEquipmentStats;
import net.runelite.client.game.ItemManager;
import net.runelite.client.game.ItemStats;

import java.util.HashMap;
import java.util.Map;

public class ProhibitedItems
{
	private static final Map<Integer, Boolean> cachedIds = new HashMap<>();
	private final ItemManager itemManager;

	public ProhibitedItems(ItemManager itemManager)
	{
		this.itemManager = itemManager;
	}

	boolean isProhibited(int id)
	{
		if (AllowedIDs.contains(id))
		{
			return false;
		}
		if (ProhibitedIDs.contains(id))
		{
			return true;
		}
		if (cachedIds.containsKey(id))
		{
			return cachedIds.get(id);
		}
		boolean prohibited = false;
		if (isCombatGear(id))
		{
			prohibited = true;
		}
		cachedIds.put(id, prohibited);
		return prohibited;
	}

	private boolean isCombatGear(int id)
	{
		ItemStats itemStats = itemManager.getItemStats(id);
		if (itemStats == null || !itemStats.isEquipable())
		{
			return false;
		}

		int slot = itemStats.getEquipment().getSlot();
		if (slot == EquipmentInventorySlot.AMMO.getSlotIdx())
		{
			return false;
		}
		if (slot == EquipmentInventorySlot.AMULET.getSlotIdx())
		{
			return false;
		}
		if (slot == EquipmentInventorySlot.RING.getSlotIdx())
		{
			return false;
		}

		ItemComposition itemComposition = itemManager.getItemComposition(id);
		String name = itemComposition.getName().toLowerCase();
		if (name.contains("bracelet"))
		{
			return false;
		}

		ItemEquipmentStats stats = itemStats.getEquipment();
		if (stats == null)
		{
			return false;
		}
		if (stats.getAcrush() > 0)
		{
			return true;
		}
		if (stats.getAstab() > 0)
		{
			return true;
		}
		if (stats.getAslash() > 0)
		{
			return true;
		}
		if (stats.getAmagic() > 0)
		{
			return true;
		}
		if (stats.getArange() > 0)
		{
			return true;
		}
		if (stats.getDmagic() > 0)
		{
			return true;
		}
		if (stats.getDrange() > 0)
		{
			return true;
		}
		if (stats.getDslash() > 0)
		{
			return true;
		}
		if (stats.getDstab() > 0)
		{
			return true;
		}
		if (stats.getStr() > 0)
		{
			return true;
		}
		return false;
	}
}

package com.entrana;

import net.runelite.client.RuneLite;
import net.runelite.client.externalplugins.ExternalPluginManager;

public class EntranaPluginTest
{
	public static void main(String[] args) throws Exception
	{
		ExternalPluginManager.loadBuiltin(EntranaPlugin.class);
		RuneLite.main(args);
	}
}
