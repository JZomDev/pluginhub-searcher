package com.NumberGoUp;

import net.runelite.client.config.Config;
import net.runelite.client.config.ConfigGroup;
import net.runelite.client.config.ConfigItem;
import net.runelite.client.config.ConfigSection;
import net.runelite.client.config.Range;

@ConfigGroup("numbergoup")
public interface NumberGoUpConfig extends Config
{
    @ConfigItem(
            keyName = "xpModifier",
            name = "Global XP Modifier",
            description = "Multiplier for XP gained during session (1.0 = normal XP, 2.0 = double XP, etc.)"
    )
    @Range(
            min = 1,
            max = 15
    )
    default double xpModifier()
    {
        return 1.0; // Default 1.0 (normal XP)
    }

    @ConfigItem(
            keyName = "resetMode",
            name = "Reset Mode",
            description = "Which skills to reset when the plugin starts"
    )
    default ResetMode resetMode()
    {
        return ResetMode.NONE; // Changed default to NONE
    }

    @ConfigItem(
            keyName = "keepProgressBetweenModes",
            name = "Keep Progress Between Modes",
            description = "When enabled, switching reset modes will preserve session XP for skills that are still being reset in the new mode"
    )
    default boolean keepProgressBetweenModes()
    {
        return false; // Default false (reset progress when switching modes)
    }

    // Per-skill custom XP thresholds for THRESHOLD mode
    @ConfigSection(name = "Custom XP Thresholds", description = "Set custom XP thresholds for reset (only works with 'Per Skill Threshold' mode)", position = 5, closedByDefault = true)
    String thresholdSection = "thresholdSection";

    @ConfigItem(keyName = "attackThreshold", name = "Attack XP Threshold", description = "Reset Attack when XP reaches this amount (0 = never reset)", section = thresholdSection, position = 1)
    @Range(min = 0, max = 200000000)
    default int attackThreshold() { return 0; }

    @ConfigItem(keyName = "strengthThreshold", name = "Strength XP Threshold", description = "Reset Strength when XP reaches this amount (0 = never reset)", section = thresholdSection, position = 2)
    @Range(min = 0, max = 200000000)
    default int strengthThreshold() { return 0; }

    @ConfigItem(keyName = "defenceThreshold", name = "Defence XP Threshold", description = "Reset Defence when XP reaches this amount (0 = never reset)", section = thresholdSection, position = 3)
    @Range(min = 0, max = 200000000)
    default int defenceThreshold() { return 0; }

    @ConfigItem(keyName = "rangedThreshold", name = "Ranged XP Threshold", description = "Reset Ranged when XP reaches this amount (0 = never reset)", section = thresholdSection, position = 4)
    @Range(min = 0, max = 200000000)
    default int rangedThreshold() { return 0; }

    @ConfigItem(keyName = "prayerThreshold", name = "Prayer XP Threshold", description = "Reset Prayer when XP reaches this amount (0 = never reset)", section = thresholdSection, position = 5)
    @Range(min = 0, max = 200000000)
    default int prayerThreshold() { return 0; }

    @ConfigItem(keyName = "magicThreshold", name = "Magic XP Threshold", description = "Reset Magic when XP reaches this amount (0 = never reset)", section = thresholdSection, position = 6)
    @Range(min = 0, max = 200000000)
    default int magicThreshold() { return 0; }

    @ConfigItem(keyName = "runecraftThreshold", name = "Runecraft XP Threshold", description = "Reset Runecraft when XP reaches this amount (0 = never reset)", section = thresholdSection, position = 7)
    @Range(min = 0, max = 200000000)
    default int runecraftThreshold() { return 0; }

    @ConfigItem(keyName = "constructionThreshold", name = "Construction XP Threshold", description = "Reset Construction when XP reaches this amount (0 = never reset)", section = thresholdSection, position = 8)
    @Range(min = 0, max = 200000000)
    default int constructionThreshold() { return 0; }

    @ConfigItem(keyName = "hitpointsThreshold", name = "Hitpoints XP Threshold", description = "Reset Hitpoints when XP reaches this amount (0 = never reset)", section = thresholdSection, position = 9)
    @Range(min = 0, max = 200000000)
    default int hitpointsThreshold() { return 0; }

    @ConfigItem(keyName = "agilityThreshold", name = "Agility XP Threshold", description = "Reset Agility when XP reaches this amount (0 = never reset)", section = thresholdSection, position = 10)
    @Range(min = 0, max = 200000000)
    default int agilityThreshold() { return 0; }

    @ConfigItem(keyName = "herbloreThreshold", name = "Herblore XP Threshold", description = "Reset Herblore when XP reaches this amount (0 = never reset)", section = thresholdSection, position = 11)
    @Range(min = 0, max = 200000000)
    default int herbloreThreshold() { return 0; }

    @ConfigItem(keyName = "thievingThreshold", name = "Thieving XP Threshold", description = "Reset Thieving when XP reaches this amount (0 = never reset)", section = thresholdSection, position = 12)
    @Range(min = 0, max = 200000000)
    default int thievingThreshold() { return 0; }

    @ConfigItem(keyName = "craftingThreshold", name = "Crafting XP Threshold", description = "Reset Crafting when XP reaches this amount (0 = never reset)", section = thresholdSection, position = 13)
    @Range(min = 0, max = 200000000)
    default int craftingThreshold() { return 0; }

    @ConfigItem(keyName = "fletchingThreshold", name = "Fletching XP Threshold", description = "Reset Fletching when XP reaches this amount (0 = never reset)", section = thresholdSection, position = 14)
    @Range(min = 0, max = 200000000)
    default int fletchingThreshold() { return 0; }

    @ConfigItem(keyName = "slayerThreshold", name = "Slayer XP Threshold", description = "Reset Slayer when XP reaches this amount (0 = never reset)", section = thresholdSection, position = 15)
    @Range(min = 0, max = 200000000)
    default int slayerThreshold() { return 0; }

    @ConfigItem(keyName = "hunterThreshold", name = "Hunter XP Threshold", description = "Reset Hunter when XP reaches this amount (0 = never reset)", section = thresholdSection, position = 16)
    @Range(min = 0, max = 200000000)
    default int hunterThreshold() { return 0; }

    @ConfigItem(keyName = "miningThreshold", name = "Mining XP Threshold", description = "Reset Mining when XP reaches this amount (0 = never reset)", section = thresholdSection, position = 17)
    @Range(min = 0, max = 200000000)
    default int miningThreshold() { return 0; }

    @ConfigItem(keyName = "smithingThreshold", name = "Smithing XP Threshold", description = "Reset Smithing when XP reaches this amount (0 = never reset)", section = thresholdSection, position = 18)
    @Range(min = 0, max = 200000000)
    default int smithingThreshold() { return 0; }

    @ConfigItem(keyName = "fishingThreshold", name = "Fishing XP Threshold", description = "Reset Fishing when XP reaches this amount (0 = never reset)", section = thresholdSection, position = 19)
    @Range(min = 0, max = 200000000)
    default int fishingThreshold() { return 0; }

    @ConfigItem(keyName = "cookingThreshold", name = "Cooking XP Threshold", description = "Reset Cooking when XP reaches this amount (0 = never reset)", section = thresholdSection, position = 20)
    @Range(min = 0, max = 200000000)
    default int cookingThreshold() { return 0; }

    @ConfigItem(keyName = "firemakingThreshold", name = "Firemaking XP Threshold", description = "Reset Firemaking when XP reaches this amount (0 = never reset)", section = thresholdSection, position = 21)
    @Range(min = 0, max = 200000000)
    default int firemakingThreshold() { return 0; }

    @ConfigItem(keyName = "woodcuttingThreshold", name = "Woodcutting XP Threshold", description = "Reset Woodcutting when XP reaches this amount (0 = never reset)", section = thresholdSection, position = 22)
    @Range(min = 0, max = 200000000)
    default int woodcuttingThreshold() { return 0; }

    @ConfigItem(keyName = "farmingThreshold", name = "Farming XP Threshold", description = "Reset Farming when XP reaches this amount (0 = never reset)", section = thresholdSection, position = 23)
    @Range(min = 0, max = 200000000)
    default int farmingThreshold() { return 0; }

    @ConfigItem(keyName = "sailingThreshold", name = "Sailing XP Threshold", description = "Reset Sailing when XP reaches this amount (0 = never reset)", section = thresholdSection, position = 24)
    @Range(min = 0, max = 200000000)
    default int sailingThreshold() { return 0; }

    // Per-skill XP multipliers with override checkboxes
    @ConfigSection(name = "Attack", description = "Attack XP multiplier settings", position = 10, closedByDefault = true)
    String attackSection = "attackSection";

    @ConfigItem(keyName = "overrideAttack", name = "Override Global Modifier", description = "Use custom XP modifier for Attack instead of global", section = attackSection, position = 1)
    default boolean overrideAttack() { return false; }

    @ConfigItem(keyName = "attackMultiplier", name = "Attack XP Modifier", description = "Multiplier for Attack XP (only used if override is enabled)", section = attackSection, position = 2)
    @Range(min = 1, max = 15)
    default double attackMultiplier() { return 1.0; }

    @ConfigItem(keyName = "resetAttack", name = "Custom Mode: Reset Skill?", description = "Reset this skill when Custom mode is selected", section = attackSection, position = 3)
    default boolean resetAttack() { return false; }

    @ConfigSection(name = "Strength", description = "Strength XP multiplier settings", position = 11, closedByDefault = true)
    String strengthSection = "strengthSection";

    @ConfigItem(keyName = "overrideStrength", name = "Override Global Modifier", description = "Use custom XP modifier for Strength instead of global", section = strengthSection, position = 1)
    default boolean overrideStrength() { return false; }

    @ConfigItem(keyName = "strengthMultiplier", name = "Strength XP Modifier", description = "Multiplier for Strength XP (only used if override is enabled)", section = strengthSection, position = 2)
    @Range(min = 1, max = 15)
    default double strengthMultiplier() { return 1.0; }

    @ConfigItem(keyName = "resetStrength", name = "Custom Mode: Reset Skill?", description = "Reset this skill when Custom mode is selected", section = strengthSection, position = 3)
    default boolean resetStrength() { return false; }

    @ConfigSection(name = "Defence", description = "Defence XP multiplier settings", position = 12, closedByDefault = true)
    String defenceSection = "defenceSection";

    @ConfigItem(keyName = "overrideDefence", name = "Override Global Modifier", description = "Use custom XP modifier for Defence instead of global", section = defenceSection, position = 1)
    default boolean overrideDefence() { return false; }

    @ConfigItem(keyName = "defenceMultiplier", name = "Defence XP Modifier", description = "Multiplier for Defence XP (only used if override is enabled)", section = defenceSection, position = 2)
    @Range(min = 1, max = 15)
    default double defenceMultiplier() { return 1.0; }

    @ConfigItem(keyName = "resetDefence", name = "Custom Mode: Reset Skill?", description = "Reset this skill when Custom mode is selected", section = defenceSection, position = 3)
    default boolean resetDefence() { return false; }

    @ConfigSection(name = "Ranged", description = "Ranged XP multiplier settings", position = 13, closedByDefault = true)
    String rangedSection = "rangedSection";

    @ConfigItem(keyName = "overrideRanged", name = "Override Global Modifier", description = "Use custom XP modifier for Ranged instead of global", section = rangedSection, position = 1)
    default boolean overrideRanged() { return false; }

    @ConfigItem(keyName = "rangedMultiplier", name = "Ranged XP Modifier", description = "Multiplier for Ranged XP (only used if override is enabled)", section = rangedSection, position = 2)
    @Range(min = 1, max = 15)
    default double rangedMultiplier() { return 1.0; }

    @ConfigItem(keyName = "resetRanged", name = "Custom Mode: Reset Skill?", description = "Reset this skill when Custom mode is selected", section = rangedSection, position = 3)
    default boolean resetRanged() { return false; }

    @ConfigSection(name = "Prayer", description = "Prayer XP multiplier settings", position = 14, closedByDefault = true)
    String prayerSection = "prayerSection";

    @ConfigItem(keyName = "overridePrayer", name = "Override Global Modifier", description = "Use custom XP modifier for Prayer instead of global", section = prayerSection, position = 1)
    default boolean overridePrayer() { return false; }

    @ConfigItem(keyName = "prayerMultiplier", name = "Prayer XP Modifier", description = "Multiplier for Prayer XP (only used if override is enabled)", section = prayerSection, position = 2)
    @Range(min = 1, max = 15)
    default double prayerMultiplier() { return 1.0; }

    @ConfigItem(keyName = "resetPrayer", name = "Custom Mode: Reset Skill?", description = "Reset this skill when Custom mode is selected", section = prayerSection, position = 3)
    default boolean resetPrayer() { return false; }

    @ConfigSection(name = "Magic", description = "Magic XP multiplier settings", position = 15, closedByDefault = true)
    String magicSection = "magicSection";

    @ConfigItem(keyName = "overrideMagic", name = "Override Global Modifier", description = "Use custom XP modifier for Magic instead of global", section = magicSection, position = 1)
    default boolean overrideMagic() { return false; }

    @ConfigItem(keyName = "magicMultiplier", name = "Magic XP Modifier", description = "Multiplier for Magic XP (only used if override is enabled)", section = magicSection, position = 2)
    @Range(min = 1, max = 15)
    default double magicMultiplier() { return 1.0; }

    @ConfigItem(keyName = "resetMagic", name = "Custom Mode: Reset Skill?", description = "Reset this skill when Custom mode is selected", section = magicSection, position = 3)
    default boolean resetMagic() { return false; }

    @ConfigSection(name = "Runecraft", description = "Runecraft XP multiplier settings", position = 16, closedByDefault = true)
    String runecraftSection = "runecraftSection";

    @ConfigItem(keyName = "overrideRunecraft", name = "Override Global Modifier", description = "Use custom XP modifier for Runecraft instead of global", section = runecraftSection, position = 1)
    default boolean overrideRunecraft() { return false; }

    @ConfigItem(keyName = "runecraftMultiplier", name = "Runecraft XP Modifier", description = "Multiplier for Runecraft XP (only used if override is enabled)", section = runecraftSection, position = 2)
    @Range(min = 1, max = 15)
    default double runecraftMultiplier() { return 1.0; }

    @ConfigItem(keyName = "resetRunecraft", name = "Custom Mode: Reset Skill?", description = "Reset this skill when Custom mode is selected", section = runecraftSection, position = 3)
    default boolean resetRunecraft() { return false; }

    @ConfigSection(name = "Construction", description = "Construction XP multiplier settings", position = 17, closedByDefault = true)
    String constructionSection = "constructionSection";

    @ConfigItem(keyName = "overrideConstruction", name = "Override Global Modifier", description = "Use custom XP modifier for Construction instead of global", section = constructionSection, position = 1)
    default boolean overrideConstruction() { return false; }

    @ConfigItem(keyName = "constructionMultiplier", name = "Construction XP Modifier", description = "Multiplier for Construction XP (only used if override is enabled)", section = constructionSection, position = 2)
    @Range(min = 1, max = 15)
    default double constructionMultiplier() { return 1.0; }

    @ConfigItem(keyName = "resetConstruction", name = "Custom Mode: Reset Skill?", description = "Reset this skill when Custom mode is selected", section = constructionSection, position = 3)
    default boolean resetConstruction() { return false; }

    @ConfigSection(name = "Hitpoints", description = "Hitpoints XP multiplier settings", position = 18, closedByDefault = true)
    String hitpointsSection = "hitpointsSection";

    @ConfigItem(keyName = "overrideHitpoints", name = "Override Global Modifier", description = "Use custom XP modifier for Hitpoints instead of global", section = hitpointsSection, position = 1)
    default boolean overrideHitpoints() { return false; }

    @ConfigItem(keyName = "hitpointsMultiplier", name = "Hitpoints XP Modifier", description = "Multiplier for Hitpoints XP (only used if override is enabled)", section = hitpointsSection, position = 2)
    @Range(min = 1, max = 15)
    default double hitpointsMultiplier() { return 1.0; }

    @ConfigItem(keyName = "resetHitpoints", name = "Custom Mode: Reset Skill?", description = "Reset this skill when Custom mode is selected", section = hitpointsSection, position = 3)
    default boolean resetHitpoints() { return false; }

    @ConfigSection(name = "Agility", description = "Agility XP multiplier settings", position = 19, closedByDefault = true)
    String agilitySection = "agilitySection";

    @ConfigItem(keyName = "overrideAgility", name = "Override Global Modifier", description = "Use custom XP modifier for Agility instead of global", section = agilitySection, position = 1)
    default boolean overrideAgility() { return false; }

    @ConfigItem(keyName = "agilityMultiplier", name = "Agility XP Modifier", description = "Multiplier for Agility XP (only used if override is enabled)", section = agilitySection, position = 2)
    @Range(min = 1, max = 15)
    default double agilityMultiplier() { return 1.0; }

    @ConfigItem(keyName = "resetAgility", name = "Custom Mode: Reset Skill?", description = "Reset this skill when Custom mode is selected", section = agilitySection, position = 3)
    default boolean resetAgility() { return false; }

    @ConfigSection(name = "Herblore", description = "Herblore XP multiplier settings", position = 20, closedByDefault = true)
    String herbloreSection = "herbloreSection";

    @ConfigItem(keyName = "overrideHerblore", name = "Override Global Modifier", description = "Use custom XP modifier for Herblore instead of global", section = herbloreSection, position = 1)
    default boolean overrideHerblore() { return false; }

    @ConfigItem(keyName = "herbloreMultiplier", name = "Herblore XP Modifier", description = "Multiplier for Herblore XP (only used if override is enabled)", section = herbloreSection, position = 2)
    @Range(min = 1, max = 15)
    default double herbloreMultiplier() { return 1.0; }

    @ConfigItem(keyName = "resetHerblore", name = "Custom Mode: Reset Skill?", description = "Reset this skill when Custom mode is selected", section = herbloreSection, position = 3)
    default boolean resetHerblore() { return false; }

    @ConfigSection(name = "Thieving", description = "Thieving XP multiplier settings", position = 21, closedByDefault = true)
    String thievingSection = "thievingSection";

    @ConfigItem(keyName = "overrideThieving", name = "Override Global Modifier", description = "Use custom XP modifier for Thieving instead of global", section = thievingSection, position = 1)
    default boolean overrideThieving() { return false; }

    @ConfigItem(keyName = "thievingMultiplier", name = "Thieving XP Modifier", description = "Multiplier for Thieving XP (only used if override is enabled)", section = thievingSection, position = 2)
    @Range(min = 1, max = 15)
    default double thievingMultiplier() { return 1.0; }

    @ConfigItem(keyName = "resetThieving", name = "Custom Mode: Reset Skill?", description = "Reset this skill when Custom mode is selected", section = thievingSection, position = 3)
    default boolean resetThieving() { return false; }

    @ConfigSection(name = "Crafting", description = "Crafting XP multiplier settings", position = 22, closedByDefault = true)
    String craftingSection = "craftingSection";

    @ConfigItem(keyName = "overrideCrafting", name = "Override Global Modifier", description = "Use custom XP modifier for Crafting instead of global", section = craftingSection, position = 1)
    default boolean overrideCrafting() { return false; }

    @ConfigItem(keyName = "craftingMultiplier", name = "Crafting XP Modifier", description = "Multiplier for Crafting XP (only used if override is enabled)", section = craftingSection, position = 2)
    @Range(min = 1, max = 15)
    default double craftingMultiplier() { return 1.0; }

    @ConfigItem(keyName = "resetCrafting", name = "Custom Mode: Reset Skill?", description = "Reset this skill when Custom mode is selected", section = craftingSection, position = 3)
    default boolean resetCrafting() { return false; }

    @ConfigSection(name = "Fletching", description = "Fletching XP multiplier settings", position = 23, closedByDefault = true)
    String fletchingSection = "fletchingSection";

    @ConfigItem(keyName = "overrideFletching", name = "Override Global Modifier", description = "Use custom XP modifier for Fletching instead of global", section = fletchingSection, position = 1)
    default boolean overrideFletching() { return false; }

    @ConfigItem(keyName = "fletchingMultiplier", name = "Fletching XP Modifier", description = "Multiplier for Fletching XP (only used if override is enabled)", section = fletchingSection, position = 2)
    @Range(min = 1, max = 15)
    default double fletchingMultiplier() { return 1.0; }

    @ConfigItem(keyName = "resetFletching", name = "Custom Mode: Reset Skill?", description = "Reset this skill when Custom mode is selected", section = fletchingSection, position = 3)
    default boolean resetFletching() { return false; }

    @ConfigSection(name = "Slayer", description = "Slayer XP multiplier settings", position = 24, closedByDefault = true)
    String slayerSection = "slayerSection";

    @ConfigItem(keyName = "overrideSlayer", name = "Override Global Modifier", description = "Use custom XP modifier for Slayer instead of global", section = slayerSection, position = 1)
    default boolean overrideSlayer() { return false; }

    @ConfigItem(keyName = "slayerMultiplier", name = "Slayer XP Modifier", description = "Multiplier for Slayer XP (only used if override is enabled)", section = slayerSection, position = 2)
    @Range(min = 1, max = 15)
    default double slayerMultiplier() { return 1.0; }

    @ConfigItem(keyName = "resetSlayer", name = "Custom Mode: Reset Skill?", description = "Reset this skill when Custom mode is selected", section = slayerSection, position = 3)
    default boolean resetSlayer() { return false; }

    @ConfigSection(name = "Hunter", description = "Hunter XP multiplier settings", position = 25, closedByDefault = true)
    String hunterSection = "hunterSection";

    @ConfigItem(keyName = "overrideHunter", name = "Override Global Modifier", description = "Use custom XP modifier for Hunter instead of global", section = hunterSection, position = 1)
    default boolean overrideHunter() { return false; }

    @ConfigItem(keyName = "hunterMultiplier", name = "Hunter XP Modifier", description = "Multiplier for Hunter XP (only used if override is enabled)", section = hunterSection, position = 2)
    @Range(min = 1, max = 15)
    default double hunterMultiplier() { return 1.0; }

    @ConfigItem(keyName = "resetHunter", name = "Custom Mode: Reset Skill?", description = "Reset this skill when Custom mode is selected", section = hunterSection, position = 3)
    default boolean resetHunter() { return false; }

    @ConfigSection(name = "Mining", description = "Mining XP multiplier settings", position = 26, closedByDefault = true)
    String miningSection = "miningSection";

    @ConfigItem(keyName = "overrideMining", name = "Override Global Modifier", description = "Use custom XP modifier for Mining instead of global", section = miningSection, position = 1)
    default boolean overrideMining() { return false; }

    @ConfigItem(keyName = "miningMultiplier", name = "Mining XP Modifier", description = "Multiplier for Mining XP (only used if override is enabled)", section = miningSection, position = 2)
    @Range(min = 1, max = 15)
    default double miningMultiplier() { return 1.0; }

    @ConfigItem(keyName = "resetMining", name = "Custom Mode: Reset Skill?", description = "Reset this skill when Custom mode is selected", section = miningSection, position = 3)
    default boolean resetMining() { return false; }

    @ConfigSection(name = "Smithing", description = "Smithing XP multiplier settings", position = 27, closedByDefault = true)
    String smithingSection = "smithingSection";

    @ConfigItem(keyName = "overrideSmithing", name = "Override Global Modifier", description = "Use custom XP modifier for Smithing instead of global", section = smithingSection, position = 1)
    default boolean overrideSmithing() { return false; }

    @ConfigItem(keyName = "smithingMultiplier", name = "Smithing XP Modifier", description = "Multiplier for Smithing XP (only used if override is enabled)", section = smithingSection, position = 2)
    @Range(min = 1, max = 15)
    default double smithingMultiplier() { return 1.0; }

    @ConfigItem(keyName = "resetSmithing", name = "Custom Mode: Reset Skill?", description = "Reset this skill when Custom mode is selected", section = smithingSection, position = 3)
    default boolean resetSmithing() { return false; }

    @ConfigSection(name = "Fishing", description = "Fishing XP multiplier settings", position = 28, closedByDefault = true)
    String fishingSection = "fishingSection";

    @ConfigItem(keyName = "overrideFishing", name = "Override Global Modifier", description = "Use custom XP modifier for Fishing instead of global", section = fishingSection, position = 1)
    default boolean overrideFishing() { return false; }

    @ConfigItem(keyName = "fishingMultiplier", name = "Fishing XP Modifier", description = "Multiplier for Fishing XP (only used if override is enabled)", section = fishingSection, position = 2)
    @Range(min = 1, max = 15)
    default double fishingMultiplier() { return 1.0; }

    @ConfigItem(keyName = "resetFishing", name = "Custom Mode: Reset Skill?", description = "Reset this skill when Custom mode is selected", section = fishingSection, position = 3)
    default boolean resetFishing() { return false; }

    @ConfigSection(name = "Cooking", description = "Cooking XP multiplier settings", position = 29, closedByDefault = true)
    String cookingSection = "cookingSection";

    @ConfigItem(keyName = "overrideCooking", name = "Override Global Modifier", description = "Use custom XP modifier for Cooking instead of global", section = cookingSection, position = 1)
    default boolean overrideCooking() { return false; }

    @ConfigItem(keyName = "cookingMultiplier", name = "Cooking XP Modifier", description = "Multiplier for Cooking XP (only used if override is enabled)", section = cookingSection, position = 2)
    @Range(min = 1, max = 15)
    default double cookingMultiplier() { return 1.0; }

    @ConfigItem(keyName = "resetCooking", name = "Custom Mode: Reset Skill?", description = "Reset this skill when Custom mode is selected", section = cookingSection, position = 3)
    default boolean resetCooking() { return false; }

    @ConfigSection(name = "Firemaking", description = "Firemaking XP multiplier settings", position = 30, closedByDefault = true)
    String firemakingSection = "firemakingSection";

    @ConfigItem(keyName = "overrideFiremaking", name = "Override Global Modifier", description = "Use custom XP modifier for Firemaking instead of global", section = firemakingSection, position = 1)
    default boolean overrideFiremaking() { return false; }

    @ConfigItem(keyName = "firemakingMultiplier", name = "Firemaking XP Modifier", description = "Multiplier for Firemaking XP (only used if override is enabled)", section = firemakingSection, position = 2)
    @Range(min = 1, max = 15)
    default double firemakingMultiplier() { return 1.0; }

    @ConfigItem(keyName = "resetFiremaking", name = "Custom Mode: Reset Skill?", description = "Reset this skill when Custom mode is selected", section = firemakingSection, position = 3)
    default boolean resetFiremaking() { return false; }

    @ConfigSection(name = "Woodcutting", description = "Woodcutting XP multiplier settings", position = 31, closedByDefault = true)
    String woodcuttingSection = "woodcuttingSection";

    @ConfigItem(keyName = "overrideWoodcutting", name = "Override Global Modifier", description = "Use custom XP modifier for Woodcutting instead of global", section = woodcuttingSection, position = 1)
    default boolean overrideWoodcutting() { return false; }

    @ConfigItem(keyName = "woodcuttingMultiplier", name = "Woodcutting XP Modifier", description = "Multiplier for Woodcutting XP (only used if override is enabled)", section = woodcuttingSection, position = 2)
    @Range(min = 1, max = 15)
    default double woodcuttingMultiplier() { return 1.0; }

    @ConfigItem(keyName = "resetWoodcutting", name = "Custom Mode: Reset Skill?", description = "Reset this skill when Custom mode is selected", section = woodcuttingSection, position = 3)
    default boolean resetWoodcutting() { return false; }

    @ConfigSection(name = "Farming", description = "Farming XP multiplier settings", position = 32, closedByDefault = true)
    String farmingSection = "farmingSection";

    @ConfigItem(keyName = "overrideFarming", name = "Override Global Modifier", description = "Use custom XP modifier for Farming instead of global", section = farmingSection, position = 1)
    default boolean overrideFarming() { return false; }

    @ConfigItem(keyName = "farmingMultiplier", name = "Farming XP Modifier", description = "Multiplier for Farming XP (only used if override is enabled)", section = farmingSection, position = 2)
    @Range(min = 1, max = 15)
    default double farmingMultiplier() { return 1.0; }

    @ConfigItem(keyName = "resetFarming", name = "Custom Mode: Reset Skill?", description = "Reset this skill when Custom mode is selected", section = farmingSection, position = 3)
    default boolean resetFarming() { return false; }

    @ConfigSection(name = "Sailing", description = "Sailing XP multiplier settings", position = 33, closedByDefault = true)
    String sailingSection = "sailingSection";

    @ConfigItem(keyName = "overrideSailing", name = "Override Global Modifier", description = "Use custom XP modifier for Sailing instead of global", section = sailingSection, position = 1)
    default boolean overrideSailing() { return false; }

    @ConfigItem(keyName = "sailingMultiplier", name = "Sailing XP Modifier", description = "Multiplier for Sailing XP (only used if override is enabled)", section = sailingSection, position = 2)
    @Range(min = 1, max = 15)
    default double sailingMultiplier() { return 1.0; }

    @ConfigItem(keyName = "resetSailing", name = "Custom Mode: Reset Skill?", description = "Reset this skill when Custom mode is selected", section = sailingSection, position = 3)
    default boolean resetSailing() { return false; }

    enum ResetMode
    {
        NONE("None"),
        ALL_SKILLS("All Skills"),
        NINETY_NINES_ONLY("99's Only"),  // Changed from ONLY_99S to match requirements
        COMBAT_ONLY("Combat Only"),
        NON_COMBAT_ONLY("Non-combat Only"),
        PER_SKILL_THRESHOLD("Per Skill Threshold"),
        CUSTOM("Custom");

        private final String name;

        ResetMode(String name)
        {
            this.name = name;
        }

        @Override
        public String toString()
        {
            return name;
        }
    }
}
package com.NumberGoUp;

import com.google.inject.Provides;
import javax.inject.Inject;
import lombok.extern.slf4j.Slf4j;
import net.runelite.api.*;
import net.runelite.api.events.StatChanged;
import net.runelite.api.events.GameTick;
import net.runelite.client.callback.ClientThread;
import net.runelite.client.config.ConfigManager;
import net.runelite.client.eventbus.Subscribe;
import net.runelite.client.events.ConfigChanged;
import net.runelite.client.plugins.Plugin;
import net.runelite.client.plugins.PluginDescriptor;
import java.util.HashMap;
import java.util.Map;
import java.util.HashSet;
import java.util.Set;

@Slf4j
@PluginDescriptor(
        name = "Number Go Up!",
        description = "Reset stats visually back down to level 1 to watch those numbers go up!",
        tags = {"skills", "stats", "level", "progress", "xp"}
)
public class NumberGoUpPlugin extends Plugin
{
    @Inject
    private Client client;

    @Inject
    private ClientThread clientThread;

    @Inject
    private NumberGoUpConfig config;

    @Inject
    private ConfigManager configManager;

    private boolean enabled = false;

    // Track XP gained since last reset for each skill
    private Map<Skill, Integer> sessionXp = new HashMap<>();

    // Track the last milestone XP for threshold mode
    private Map<Skill, Integer> lastMilestoneXp = new HashMap<>();

    // Track the last known XP for each skill to calculate gains
    private Map<Skill, Integer> lastKnownXp = new HashMap<>();

    // Track the XP at which we started resetting for each skill (for non-threshold modes)
    private Map<Skill, Integer> resetStartXp = new HashMap<>();

    // Track actual skill values (like Prestige plugin)
    private Map<Skill, Integer> actualSkillXp = new HashMap<>();
    private Map<Skill, Integer> actualSkillBoost = new HashMap<>();

    // Define combat skills
    private static final Set<Skill> COMBAT_SKILLS = new HashSet<Skill>() {{
        add(Skill.ATTACK);
        add(Skill.STRENGTH);
        add(Skill.DEFENCE);
        add(Skill.HITPOINTS);
        add(Skill.MAGIC);
        add(Skill.RANGED);
        add(Skill.PRAYER);
    }};

    @Override
    protected void startUp() throws Exception
    {
        log.info("Number Go Up started! XP Modifier: {}, Reset Mode: {}", config.xpModifier(), config.resetMode());
        enabled = true;

        // Initialize actual skill values
        for (Skill skill : Skill.values()) {
            if (skill != Skill.OVERALL) {
                int currentXp = client.getSkillExperience(skill);
                int currentBoost = client.getBoostedSkillLevel(skill);

                actualSkillXp.put(skill, currentXp);
                actualSkillBoost.put(skill, currentBoost);
                lastKnownXp.put(skill, currentXp);
            }
        }

        // Load saved data
        loadSessionXp();
        loadLastMilestoneXp();
        loadResetStartXp();

        // Initialize tracking based on current reset mode
        for (Skill skill : Skill.values()) {
            if (skill != Skill.OVERALL) {
                initializeSkillForCurrentMode(skill, actualSkillXp.get(skill));
            }
        }

        // Force update all stats on startup
        updateAllStats();

        // Save initial state
        saveSessionXp();
        saveLastMilestoneXp();
        saveResetStartXp();
    }

    private void initializeSkillForCurrentMode(Skill skill, int currentXp) {
        switch (config.resetMode()) {
            case NONE:
                // NONE mode - don't reset any skills
                sessionXp.put(skill, 0);
                resetStartXp.remove(skill);
                lastMilestoneXp.remove(skill);
                break;

            case PER_SKILL_THRESHOLD:
                int threshold = getThresholdForSkill(skill);
                if (threshold > 0) {
                    // If current XP is already above threshold, treat as if threshold was reached
                    int lastMilestone = 0;
                    if (currentXp >= threshold) {
                        // Find the highest multiple of threshold <= current XP
                        lastMilestone = (currentXp / threshold) * threshold;
                    }
                    lastMilestoneXp.put(skill, lastMilestone);
                    sessionXp.put(skill, currentXp - lastMilestone);
                    log.debug("Initialized threshold for {}: current={}, threshold={}, lastMilestone={}, session={}",
                            skill.getName(), currentXp, threshold, lastMilestone, currentXp - lastMilestone);
                } else {
                    sessionXp.put(skill, 0);
                    lastMilestoneXp.remove(skill);
                }
                break;

            default:
                // For other modes (ALL_SKILLS, NINETY_NINES_ONLY, COMBAT_ONLY, NON_COMBAT_ONLY, CUSTOM)
                if (shouldResetSkill(skill)) {
                    // If we have a saved reset start XP, use it to calculate session XP
                    if (resetStartXp.containsKey(skill)) {
                        sessionXp.put(skill, currentXp - resetStartXp.get(skill));
                    } else {
                        // First time resetting - start from current XP
                        resetStartXp.put(skill, currentXp);
                        sessionXp.put(skill, 0);
                    }
                } else {
                    sessionXp.put(skill, 0);
                    resetStartXp.remove(skill);
                }
                break;
        }
    }

    @Override
    protected void shutDown() throws Exception
    {
        log.info("Number Go Up stopped!");
        enabled = false;

        // Save session XP and milestones before shutting down
        saveSessionXp();
        saveLastMilestoneXp();
        saveResetStartXp();

        // Restore original stats
        restoreAllOriginalValues(true);

        // Force a full client refresh to ensure visual update
        clientThread.invokeLater(() -> {
            if (client.getGameState() == GameState.LOGGED_IN) {
                for (Skill skill : Skill.values()) {
                    if (skill != Skill.OVERALL) {
                        client.queueChangedSkill(skill);
                    }
                }
            }
        });
    }

    @Subscribe
    public void onConfigChanged(ConfigChanged event)
    {
        if (!event.getGroup().equals("numbergoup")) {
            return;
        }

        // If reset mode changed, update all stats immediately
        if (event.getKey().equals("resetMode")) {
            log.info("Reset mode changed to: {}", config.resetMode());

            // First restore all skills to their original values
            restoreAllOriginalValues(false);

            if (config.keepProgressBetweenModes()) {
                // Keep progress between modes - preserve session XP for skills that are still being reset
                log.info("Keeping progress between reset modes");

                // Create temporary maps to preserve progress for skills that will still be reset
                Map<Skill, Integer> preservedSessionXp = new HashMap<>();
                Map<Skill, Integer> preservedResetStartXp = new HashMap<>();
                Map<Skill, Integer> preservedLastMilestoneXp = new HashMap<>();

                // Check each skill to see if it will still be reset in the new mode
                for (Skill skill : Skill.values()) {
                    if (skill != Skill.OVERALL) {
                        int currentXp = actualSkillXp.get(skill);
                        lastKnownXp.put(skill, currentXp);

                        boolean willResetInNewMode = shouldResetSkill(skill);
                        boolean wasResettingPreviously = sessionXp.containsKey(skill) && sessionXp.get(skill) > 0;

                        if (willResetInNewMode) {
                            // Skill will be reset in new mode - preserve its progress
                            if (wasResettingPreviously) {
                                // Keep existing progress
                                preservedSessionXp.put(skill, sessionXp.get(skill));
                                if (resetStartXp.containsKey(skill)) {
                                    preservedResetStartXp.put(skill, resetStartXp.get(skill));
                                }
                                if (lastMilestoneXp.containsKey(skill)) {
                                    preservedLastMilestoneXp.put(skill, lastMilestoneXp.get(skill));
                                }
                                log.debug("Preserved progress for {}: sessionXp={}", skill.getName(), sessionXp.get(skill));
                            } else {
                                // Skill wasn't being reset before but will be now - initialize fresh
                                initializeSkillForCurrentMode(skill, currentXp);
                            }
                        } else {
                            // Skill won't be reset in new mode - clear its progress
                            sessionXp.put(skill, 0);
                            resetStartXp.remove(skill);
                            lastMilestoneXp.remove(skill);
                        }
                    }
                }

                // Update the main maps with preserved values
                for (Skill skill : preservedSessionXp.keySet()) {
                    sessionXp.put(skill, preservedSessionXp.get(skill));
                }
                for (Skill skill : preservedResetStartXp.keySet()) {
                    resetStartXp.put(skill, preservedResetStartXp.get(skill));
                }
                for (Skill skill : preservedLastMilestoneXp.keySet()) {
                    lastMilestoneXp.put(skill, preservedLastMilestoneXp.get(skill));
                }

            } else {
                // Don't keep progress - clear everything and start fresh
                log.info("Resetting progress for new reset mode");

                lastKnownXp.clear();
                resetStartXp.clear();
                lastMilestoneXp.clear();
                sessionXp.clear();

                for (Skill skill : Skill.values()) {
                    if (skill != Skill.OVERALL) {
                        int currentXp = actualSkillXp.get(skill);
                        lastKnownXp.put(skill, currentXp);

                        initializeSkillForCurrentMode(skill, currentXp);
                    }
                }
            }

            saveSessionXp();
            saveLastMilestoneXp();
            saveResetStartXp();

            if (enabled) {
                updateAllStats();
            }
        }

        // If the keepProgressBetweenModes setting itself changed
        if (event.getKey().equals("keepProgressBetweenModes")) {
            log.info("Keep progress between modes changed to: {}", config.keepProgressBetweenModes());
        }

        // If a custom reset checkbox changed and we're in custom mode, update that specific skill
        if (event.getKey().startsWith("reset") && config.resetMode() == NumberGoUpConfig.ResetMode.CUSTOM) {
            if (enabled) {
                String skillName = event.getKey().substring(5);
                try {
                    Skill skill = Skill.valueOf(skillName.toUpperCase());
                    int currentXp = actualSkillXp.get(skill);

                    if (shouldResetSkill(skill)) {
                        // Skill is now being reset
                        resetStartXp.put(skill, currentXp);
                        sessionXp.put(skill, 0);
                    } else {
                        // Skill is no longer being reset
                        resetStartXp.remove(skill);
                        sessionXp.put(skill, 0);
                    }

                    saveResetStartXp();
                    saveSessionXp();
                    updateStat(skill);
                } catch (IllegalArgumentException e) {
                    log.warn("Unknown skill from config key: {}", event.getKey());
                }
            }
        }

        // If a threshold value changed and we're in threshold mode
        if (event.getKey().endsWith("Threshold") && config.resetMode() == NumberGoUpConfig.ResetMode.PER_SKILL_THRESHOLD) {
            if (enabled) {
                String skillName = event.getKey().replace("Threshold", "");
                try {
                    Skill skill = Skill.valueOf(skillName.toUpperCase());
                    int currentXp = actualSkillXp.get(skill);
                    int threshold = getThresholdForSkill(skill);

                    lastKnownXp.put(skill, currentXp);

                    if (threshold > 0) {
                        // If current XP is already above threshold, treat as if threshold was reached
                        int lastMilestone = 0;
                        if (currentXp >= threshold) {
                            lastMilestone = (currentXp / threshold) * threshold;
                        }
                        lastMilestoneXp.put(skill, lastMilestone);
                        sessionXp.put(skill, currentXp - lastMilestone);
                        saveLastMilestoneXp();
                        saveSessionXp();
                    } else {
                        lastMilestoneXp.remove(skill);
                        sessionXp.put(skill, 0);
                        saveLastMilestoneXp();
                        saveSessionXp();
                    }

                    updateStat(skill);
                } catch (IllegalArgumentException e) {
                    log.warn("Unknown skill from config key: {}", event.getKey());
                }
            }
        }

        // If XP modifier changed, update all stats
        if (event.getKey().equals("xpModifier") || event.getKey().endsWith("Multiplier")) {
            if (enabled) {
                updateAllStats();
            }
        }
    }

    @Subscribe
    public void onStatChanged(StatChanged statChanged)
    {
        Skill skill = statChanged.getSkill();

        // Update actual skill values
        actualSkillXp.put(skill, statChanged.getXp());
        actualSkillBoost.put(skill, statChanged.getBoostedLevel());

        // Only update when plugin is enabled and not in NONE mode
        if (enabled && skill != Skill.OVERALL && config.resetMode() != NumberGoUpConfig.ResetMode.NONE)
        {
            int newXp = statChanged.getXp();
            int oldXp = lastKnownXp.getOrDefault(skill, newXp);
            int xpGained = newXp - oldXp;

            // Update last known XP
            lastKnownXp.put(skill, newXp);

            // For threshold mode
            if (config.resetMode() == NumberGoUpConfig.ResetMode.PER_SKILL_THRESHOLD)
            {
                handleThresholdMode(skill, newXp);
            }
            else
            {
                // For other modes
                if (shouldResetSkill(skill))
                {
                    // Check if we just started resetting this skill
                    if (!resetStartXp.containsKey(skill)) {
                        resetStartXp.put(skill, newXp - xpGained);
                    }

                    // Calculate session XP from reset start point
                    int resetStart = resetStartXp.get(skill);
                    sessionXp.put(skill, newXp - resetStart);
                }
                else
                {
                    // Skill shouldn't be reset
                    resetStartXp.remove(skill);
                    sessionXp.put(skill, 0);
                }
            }

            updateStat(skill);
            saveSessionXp();
            saveResetStartXp();
        }
    }

    @Subscribe
    public void onGameTick(GameTick event)
    {
        // Continuously update stats to maintain visual override
        if (enabled && client.getGameState() == GameState.LOGGED_IN)
        {
            updateAllStats();
        }
    }

    private void handleThresholdMode(Skill skill, int currentRealXp)
    {
        int threshold = getThresholdForSkill(skill);

        // If threshold is 0, don't reset this skill
        if (threshold <= 0) {
            return;
        }

        // Get last milestone
        int lastMilestone = lastMilestoneXp.getOrDefault(skill, 0);

        // Check if we've crossed a threshold
        int currentMilestone = (currentRealXp / threshold) * threshold;

        // If we haven't set a milestone yet and current XP >= threshold, set the initial milestone
        if (lastMilestone == 0 && currentRealXp >= threshold) {
            lastMilestone = currentMilestone;
            lastMilestoneXp.put(skill, lastMilestone);
            sessionXp.put(skill, currentRealXp - lastMilestone);
            saveLastMilestoneXp();
            saveSessionXp();
            return;
        }

        // Check if we've passed any milestones
        if (currentMilestone > lastMilestone)
        {
            int thresholdsPassed = (currentMilestone - lastMilestone) / threshold;

            // Update last milestone
            lastMilestone = currentMilestone;
            lastMilestoneXp.put(skill, lastMilestone);

            // Session XP is the difference from current milestone
            int sessionXpValue = currentRealXp - lastMilestone;
            sessionXp.put(skill, sessionXpValue);

            // Save the new state
            saveLastMilestoneXp();
            saveSessionXp();

            // Show notification
            if (client.getGameState() == GameState.LOGGED_IN && enabled && thresholdsPassed > 0)
            {
                String message = "Number Go Up! " + skill.getName() + " has been reset ";
                if (thresholdsPassed > 1) {
                    message += "(passed " + thresholdsPassed + " thresholds of " + threshold + " XP)";
                } else {
                    message += "(reached threshold: " + threshold + " XP)";
                }
                client.addChatMessage(ChatMessageType.GAMEMESSAGE, "", message, null);
            }

            log.debug("Threshold reset for {}: passed {} thresholds, new milestone={}, session={}",
                    skill.getName(), thresholdsPassed, lastMilestone, sessionXpValue);
        }
        else
        {
            // Update session XP to current difference from last milestone
            int sessionXpValue = currentRealXp - lastMilestone;
            sessionXp.put(skill, sessionXpValue);
            saveSessionXp();
        }
    }

    private void updateAllStats()
    {
        for (Skill skill : Skill.values())
        {
            if (skill != Skill.OVERALL)
            {
                updateStat(skill);
            }
        }
    }

    private void updateStat(Skill skill)
    {
        if (!enabled || skill == Skill.OVERALL)
        {
            return;
        }

        // Get multiplier for this specific skill
        double xpModifier = getXpModifierForSkill(skill);

        // Check if this skill should be reset based on reset mode
        boolean shouldReset = shouldResetSkill(skill);

        if (shouldReset)
        {
            // Reset skill behavior - use session XP with multiplier
            int skillSessionXp = sessionXp.getOrDefault(skill, 0);
            int displayXp = (int)(skillSessionXp * xpModifier);

            // SPECIAL CASE: Hitpoints starts at level 10 (1154 XP), not level 1 (0 XP)
            if (skill == Skill.HITPOINTS)
            {
                // Hitpoints starts at 1154 XP (level 10)
                displayXp = 1154 + displayXp;
            }

            // For display purposes, cap at level 99
            if (displayXp > 200000000) {
                displayXp = 200000000;
            }

            int displayLevel = Experience.getLevelForXp(displayXp);

            // Cap at level 99 for display
            if (displayLevel > 99) {
                displayLevel = 99;
            }

            // For ALL_SKILLS mode, we need to show level 1 with 0 XP when session XP is 0
            // Except for Hitpoints which starts at level 10
            if (config.resetMode() == NumberGoUpConfig.ResetMode.ALL_SKILLS)
            {
                if (skill != Skill.HITPOINTS && skillSessionXp == 0)
                {
                    displayLevel = 1;
                    displayXp = 0;
                }
                // Hitpoints in ALL_SKILLS mode with no session XP should show level 10 (1154 XP)
                else if (skill == Skill.HITPOINTS && skillSessionXp == 0)
                {
                    displayLevel = 10;
                    displayXp = 1154;
                }
            }

            // Update client to show display level
            client.getRealSkillLevels()[skill.ordinal()] = displayLevel;
            client.getSkillExperiences()[skill.ordinal()] = displayXp;
            client.getBoostedSkillLevels()[skill.ordinal()] = displayLevel;

            client.queueChangedSkill(skill);
        }
        else
        {
            // Non-reset skill behavior - restore to original values
            restoreSkillToOriginalValues(skill);
        }
    }

    // Restore a skill to its original values
    private void restoreSkillToOriginalValues(Skill skill) {
        if (skill == Skill.OVERALL) return;

        int realXp = actualSkillXp.getOrDefault(skill, client.getSkillExperience(skill));
        int realLevel = Experience.getLevelForXp(realXp);
        int boostedLevel = actualSkillBoost.getOrDefault(skill, client.getBoostedSkillLevel(skill));

        // Cap at level 99 for display
        if (realLevel > 99) {
            realLevel = 99;
        }
        if (boostedLevel > 99) {
            boostedLevel = 99;
        }

        client.getRealSkillLevels()[skill.ordinal()] = realLevel;
        client.getSkillExperiences()[skill.ordinal()] = realXp;
        client.getBoostedSkillLevels()[skill.ordinal()] = boostedLevel;

        client.queueChangedSkill(skill);
    }

    // Restore all skills to original values
    private void restoreAllOriginalValues(boolean isShutdown) {
        for (Skill skill : Skill.values()) {
            if (skill != Skill.OVERALL) {
                restoreSkillToOriginalValues(skill);
            }
        }
    }

    // Determine if a skill should be reset based on reset mode
    private boolean shouldResetSkill(Skill skill)
    {
        switch (config.resetMode())
        {
            case NONE:
                return false;
            case ALL_SKILLS:
                return true; // ALL_SKILLS mode resets all skills
            case NINETY_NINES_ONLY:
                int currentXp = actualSkillXp.getOrDefault(skill, client.getSkillExperience(skill));
                return currentXp >= 13034431; // XP for level 99
            case COMBAT_ONLY:
                return COMBAT_SKILLS.contains(skill);
            case NON_COMBAT_ONLY:
                return !COMBAT_SKILLS.contains(skill) && skill != Skill.OVERALL;
            case CUSTOM:
                return shouldResetCustomSkill(skill);
            case PER_SKILL_THRESHOLD:
                int threshold = getThresholdForSkill(skill);
                return threshold > 0; // Only reset if threshold is set (> 0)
            default:
                return false;
        }
    }

    // Check if a skill should be reset in Custom mode
    private boolean shouldResetCustomSkill(Skill skill)
    {
        switch (skill)
        {
            case ATTACK: return config.resetAttack();
            case STRENGTH: return config.resetStrength();
            case DEFENCE: return config.resetDefence();
            case RANGED: return config.resetRanged();
            case PRAYER: return config.resetPrayer();
            case MAGIC: return config.resetMagic();
            case RUNECRAFT: return config.resetRunecraft();
            case CONSTRUCTION: return config.resetConstruction();
            case HITPOINTS: return config.resetHitpoints();
            case AGILITY: return config.resetAgility();
            case HERBLORE: return config.resetHerblore();
            case THIEVING: return config.resetThieving();
            case CRAFTING: return config.resetCrafting();
            case FLETCHING: return config.resetFletching();
            case SLAYER: return config.resetSlayer();
            case HUNTER: return config.resetHunter();
            case MINING: return config.resetMining();
            case SMITHING: return config.resetSmithing();
            case FISHING: return config.resetFishing();
            case COOKING: return config.resetCooking();
            case FIREMAKING: return config.resetFiremaking();
            case WOODCUTTING: return config.resetWoodcutting();
            case FARMING: return config.resetFarming();
            case SAILING: return config.resetSailing();
            default: return false;
        }
    }

    // Get threshold for a specific skill
    private int getThresholdForSkill(Skill skill)
    {
        switch (skill)
        {
            case ATTACK: return config.attackThreshold();
            case STRENGTH: return config.strengthThreshold();
            case DEFENCE: return config.defenceThreshold();
            case RANGED: return config.rangedThreshold();
            case PRAYER: return config.prayerThreshold();
            case MAGIC: return config.magicThreshold();
            case RUNECRAFT: return config.runecraftThreshold();
            case CONSTRUCTION: return config.constructionThreshold();
            case HITPOINTS: return config.hitpointsThreshold();
            case AGILITY: return config.agilityThreshold();
            case HERBLORE: return config.herbloreThreshold();
            case THIEVING: return config.thievingThreshold();
            case CRAFTING: return config.craftingThreshold();
            case FLETCHING: return config.fletchingThreshold();
            case SLAYER: return config.slayerThreshold();
            case HUNTER: return config.hunterThreshold();
            case MINING: return config.miningThreshold();
            case SMITHING: return config.smithingThreshold();
            case FISHING: return config.fishingThreshold();
            case COOKING: return config.cookingThreshold();
            case FIREMAKING: return config.firemakingThreshold();
            case WOODCUTTING: return config.woodcuttingThreshold();
            case FARMING: return config.farmingThreshold();
            case SAILING: return config.sailingThreshold();
            default: return 0;
        }
    }

    // Get XP modifier for specific skill
    private double getXpModifierForSkill(Skill skill)
    {
        switch (skill)
        {
            case ATTACK:
                return config.overrideAttack() ? config.attackMultiplier() : config.xpModifier();
            case STRENGTH:
                return config.overrideStrength() ? config.strengthMultiplier() : config.xpModifier();
            case DEFENCE:
                return config.overrideDefence() ? config.defenceMultiplier() : config.xpModifier();
            case RANGED:
                return config.overrideRanged() ? config.rangedMultiplier() : config.xpModifier();
            case PRAYER:
                return config.overridePrayer() ? config.prayerMultiplier() : config.xpModifier();
            case MAGIC:
                return config.overrideMagic() ? config.magicMultiplier() : config.xpModifier();
            case RUNECRAFT:
                return config.overrideRunecraft() ? config.runecraftMultiplier() : config.xpModifier();
            case CONSTRUCTION:
                return config.overrideConstruction() ? config.constructionMultiplier() : config.xpModifier();
            case HITPOINTS:
                return config.overrideHitpoints() ? config.hitpointsMultiplier() : config.xpModifier();
            case AGILITY:
                return config.overrideAgility() ? config.agilityMultiplier() : config.xpModifier();
            case HERBLORE:
                return config.overrideHerblore() ? config.herbloreMultiplier() : config.xpModifier();
            case THIEVING:
                return config.overrideThieving() ? config.thievingMultiplier() : config.xpModifier();
            case CRAFTING:
                return config.overrideCrafting() ? config.craftingMultiplier() : config.xpModifier();
            case FLETCHING:
                return config.overrideFletching() ? config.fletchingMultiplier() : config.xpModifier();
            case SLAYER:
                return config.overrideSlayer() ? config.slayerMultiplier() : config.xpModifier();
            case HUNTER:
                return config.overrideHunter() ? config.hunterMultiplier() : config.xpModifier();
            case MINING:
                return config.overrideMining() ? config.miningMultiplier() : config.xpModifier();
            case SMITHING:
                return config.overrideSmithing() ? config.smithingMultiplier() : config.xpModifier();
            case FISHING:
                return config.overrideFishing() ? config.fishingMultiplier() : config.xpModifier();
            case COOKING:
                return config.overrideCooking() ? config.cookingMultiplier() : config.xpModifier();
            case FIREMAKING:
                return config.overrideFiremaking() ? config.firemakingMultiplier() : config.xpModifier();
            case WOODCUTTING:
                return config.overrideWoodcutting() ? config.woodcuttingMultiplier() : config.xpModifier();
            case FARMING:
                return config.overrideFarming() ? config.farmingMultiplier() : config.xpModifier();
            case SAILING:
                return config.overrideSailing() ? config.sailingMultiplier() : config.xpModifier();
            default:
                return config.xpModifier();
        }
    }

    // Save session XP to config
    private void saveSessionXp()
    {
        if (!enabled) return;

        for (Skill skill : Skill.values())
        {
            if (skill != Skill.OVERALL)
            {
                String key = "sessionXp_" + skill.name().toLowerCase();
                configManager.setConfiguration("numbergoup", key, sessionXp.getOrDefault(skill, 0));
            }
        }
    }

    // Load session XP from config
    private void loadSessionXp()
    {
        for (Skill skill : Skill.values())
        {
            if (skill != Skill.OVERALL)
            {
                String key = "sessionXp_" + skill.name().toLowerCase();
                Integer savedXp = configManager.getConfiguration("numbergoup", key, Integer.class);
                if (savedXp != null)
                {
                    sessionXp.put(skill, savedXp);
                }
                else
                {
                    sessionXp.put(skill, 0);
                }
            }
        }
    }

    // Save last milestone XP to config
    private void saveLastMilestoneXp()
    {
        if (!enabled) return;

        for (Skill skill : Skill.values())
        {
            if (skill != Skill.OVERALL)
            {
                String key = "lastMilestone_" + skill.name().toLowerCase();
                Integer milestone = lastMilestoneXp.get(skill);
                if (milestone != null)
                {
                    configManager.setConfiguration("numbergoup", key, milestone);
                }
                else
                {
                    configManager.unsetConfiguration("numbergoup", key);
                }
            }
        }
    }

    // Load last milestone XP from config
    private void loadLastMilestoneXp()
    {
        for (Skill skill : Skill.values())
        {
            if (skill != Skill.OVERALL)
            {
                String key = "lastMilestone_" + skill.name().toLowerCase();
                Integer savedMilestone = configManager.getConfiguration("numbergoup", key, Integer.class);
                if (savedMilestone != null)
                {
                    lastMilestoneXp.put(skill, savedMilestone);
                }
            }
        }
    }

    // Save reset start XP to config
    private void saveResetStartXp()
    {
        if (!enabled) return;

        for (Skill skill : Skill.values())
        {
            if (skill != Skill.OVERALL)
            {
                String key = "resetStartXp_" + skill.name().toLowerCase();
                Integer resetStart = resetStartXp.get(skill);
                if (resetStart != null)
                {
                    configManager.setConfiguration("numbergoup", key, resetStart);
                }
                else
                {
                    configManager.unsetConfiguration("numbergoup", key);
                }
            }
        }
    }

    // Load reset start XP from config
    private void loadResetStartXp()
    {
        for (Skill skill : Skill.values())
        {
            if (skill != Skill.OVERALL)
            {
                String key = "resetStartXp_" + skill.name().toLowerCase();
                Integer savedResetStart = configManager.getConfiguration("numbergoup", key, Integer.class);
                if (savedResetStart != null)
                {
                    resetStartXp.put(skill, savedResetStart);
                }
            }
        }
    }

    @Provides
    NumberGoUpConfig provideConfig(ConfigManager configManager)
    {
        return configManager.getConfig(NumberGoUpConfig.class);
    }
}
package com.NumberGoUp;

import net.runelite.client.RuneLite;
import net.runelite.client.externalplugins.ExternalPluginManager;

public class ExamplePluginTest
{
	public static void main(String[] args) throws Exception
	{
		ExternalPluginManager.loadBuiltin(NumberGoUpPlugin.class);
		RuneLite.main(args);
	}
}
