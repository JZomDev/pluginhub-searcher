package com.arceuuscc.plugin.util;

import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;
import java.time.format.DateTimeParseException;

public class DateTimeUtils
{
	public static final DateTimeFormatter ISO_FORMATTER = DateTimeFormatter.ISO_LOCAL_DATE_TIME;

	public static LocalDateTime parseDateTime(String isoTime)
	{
		if (isoTime == null)
		{
			return LocalDateTime.MIN;
		}
		try
		{
			return LocalDateTime.parse(isoTime, ISO_FORMATTER);
		}
		catch (DateTimeParseException e)
		{
			return LocalDateTime.MIN;
		}
	}
}

package com.arceuuscc.plugin.http;

import com.arceuuscc.plugin.ArceuusCCPlugin;
import com.arceuuscc.plugin.models.Event;
import com.google.gson.Gson;
import com.google.gson.JsonArray;
import com.google.gson.JsonObject;
import com.google.gson.JsonParser;
import com.google.gson.reflect.TypeToken;
import lombok.extern.slf4j.Slf4j;
import okhttp3.*;

import java.io.IOException;
import java.util.List;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.ScheduledFuture;
import java.util.concurrent.TimeUnit;

@Slf4j
public class HttpEventClient
{
	private static final MediaType JSON_MEDIA_TYPE = MediaType.get("application/json; charset=utf-8");
	private static final String API_KEY = "arceuus-cc-runelite-2026";

	private final String apiUrl;
	private final ArceuusCCPlugin plugin;
	private final OkHttpClient httpClient;
	private final Gson gson;
	private final ScheduledExecutorService executor;

	private ScheduledFuture<?> pollingTask;
	private boolean connected = false;

	public HttpEventClient(String apiUrl, ArceuusCCPlugin plugin, OkHttpClient httpClient, Gson gson, ScheduledExecutorService executor)
	{
		this.apiUrl = apiUrl;
		this.plugin = plugin;
		this.httpClient = httpClient;
		this.gson = gson;
		this.executor = executor;
	}

	public void start()
	{
		if (pollingTask != null)
		{
			return;
		}

		// Initial fetch
		requestEvents();

		// Poll every 30 seconds
		pollingTask = executor.scheduleAtFixedRate(this::requestEvents, 30, 30, TimeUnit.SECONDS);
		log.info("HTTP Event Client started, polling {}", apiUrl);
	}

	public void stop()
	{
		if (pollingTask != null)
		{
			pollingTask.cancel(false);
			pollingTask = null;
		}
		log.info("HTTP Event Client stopped");
	}

	public boolean isConnected()
	{
		return connected;
	}

	public void requestEvents()
	{
		Request request = new Request.Builder()
			.url(apiUrl)
			.get()
			.build();

		httpClient.newCall(request).enqueue(new Callback()
		{
			@Override
			public void onFailure(Call call, IOException e)
			{
				log.error("Failed to fetch events", e);
				if (connected)
				{
					connected = false;
					plugin.onConnectionStatusChanged(false);
				}
			}

			@Override
			public void onResponse(Call call, Response response) throws IOException
			{
				try (ResponseBody body = response.body())
				{
					if (!response.isSuccessful() || body == null)
					{
						log.error("Error response: {}", response.code());
						if (connected)
						{
							connected = false;
							plugin.onConnectionStatusChanged(false);
						}
						return;
					}

					String json = body.string();
					JsonObject jsonObj = new JsonParser().parse(json).getAsJsonObject();
					JsonArray eventsArray = jsonObj.getAsJsonArray("events");
					List<Event> events = gson.fromJson(eventsArray, new TypeToken<List<Event>>(){}.getType());

					if (!connected)
					{
						connected = true;
						plugin.onConnectionStatusChanged(true);
					}

					plugin.onEventsReceived(events);
					log.debug("Fetched {} events", events.size());
				}
				catch (Exception e)
				{
					log.error("Error parsing events response", e);
				}
			}
		});
	}

	public void sendSignup(String eventId, String osrsName)
	{
		JsonObject payload = new JsonObject();
		payload.addProperty("eventId", eventId);
		payload.addProperty("osrsName", osrsName);

		Request request = new Request.Builder()
			.url(apiUrl + "?action=signup")
			.header("X-API-Key", API_KEY)
			.post(RequestBody.create(JSON_MEDIA_TYPE, gson.toJson(payload)))
			.build();

		httpClient.newCall(request).enqueue(new Callback()
		{
			@Override
			public void onFailure(Call call, IOException e)
			{
				log.error("Failed to sign up for event {}", eventId, e);
			}

			@Override
			public void onResponse(Call call, Response response) throws IOException
			{
				try (ResponseBody body = response.body())
				{
					if (response.isSuccessful())
					{
						log.info("Successfully signed up for event {}", eventId);
						// Refresh events to get updated signups
						requestEvents();
					}
					else
					{
						String errorBody = body != null ? body.string() : "Unknown error";
						log.error("Signup failed: {}", errorBody);
					}
				}
			}
		});
	}

	public void sendUnsignup(String eventId, String osrsName)
	{
		JsonObject payload = new JsonObject();
		payload.addProperty("eventId", eventId);
		payload.addProperty("osrsName", osrsName);

		Request request = new Request.Builder()
			.url(apiUrl + "?action=unsignup")
			.header("X-API-Key", API_KEY)
			.post(RequestBody.create(JSON_MEDIA_TYPE, gson.toJson(payload)))
			.build();

		httpClient.newCall(request).enqueue(new Callback()
		{
			@Override
			public void onFailure(Call call, IOException e)
			{
				log.error("Failed to unsign from event {}", eventId, e);
			}

			@Override
			public void onResponse(Call call, Response response) throws IOException
			{
				try (ResponseBody body = response.body())
				{
					if (response.isSuccessful())
					{
						log.info("Successfully unsigned from event {}", eventId);
						// Refresh events to get updated signups
						requestEvents();
					}
					else
					{
						String errorBody = body != null ? body.string() : "Unknown error";
						log.error("Unsignup failed: {}", errorBody);
					}
				}
			}
		});
	}
}

package com.arceuuscc.plugin.models;

import lombok.Data;

@Data
public class Signup
{
	private String osrsName;
	private String discordId;
	private String source;
	private String signupTime;
}

package com.arceuuscc.plugin.models;

import lombok.Data;
import java.util.List;

@Data
public class Event
{
	private String eventId;
	private String title;
	private String startTime;
	private int durationMinutes;
	private String description;
	private String status;
	private List<Signup> signups;
}

package com.arceuuscc.plugin.ui;

import com.arceuuscc.plugin.ArceuusCCConfig;
import com.arceuuscc.plugin.ArceuusCCPlugin;
import com.arceuuscc.plugin.models.Event;
import com.arceuuscc.plugin.util.DateTimeUtils;
import net.runelite.client.ui.overlay.Overlay;
import net.runelite.client.ui.overlay.OverlayLayer;
import net.runelite.client.ui.overlay.OverlayPosition;
import net.runelite.client.ui.overlay.components.LineComponent;
import net.runelite.client.ui.overlay.components.PanelComponent;
import net.runelite.client.ui.overlay.components.TitleComponent;

import javax.inject.Inject;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics2D;
import java.time.LocalDateTime;
import java.time.temporal.ChronoUnit;
import java.util.List;

public class ArceuusCCOverlay extends Overlay
{
	private static final Color ARCEUUS_PURPLE = new Color(128, 0, 128);
	private static final Color LIVE_GREEN = new Color(50, 200, 50);
	private static final Color ENDING_SOON_RED = new Color(255, 100, 100);
	private static final Color STARTING_SOON_YELLOW = new Color(255, 220, 0);
	private static final Color UPCOMING_BLUE = new Color(114, 137, 218);

	private final ArceuusCCPlugin plugin;
	private final ArceuusCCConfig config;
	private final PanelComponent panelComponent = new PanelComponent();

	@Inject
	public ArceuusCCOverlay(ArceuusCCPlugin plugin, ArceuusCCConfig config)
	{
		super(plugin);
		this.plugin = plugin;
		this.config = config;

		setPosition(OverlayPosition.TOP_LEFT);
		setLayer(OverlayLayer.ABOVE_SCENE);
	}

	@Override
	public Dimension render(Graphics2D graphics)
	{
		if (!config.showOverlay())
		{
			return null;
		}

		List<Event> events = plugin.getEvents();
		if (events == null || events.isEmpty())
		{
			return null;
		}

		LocalDateTime now = LocalDateTime.now();

		Event activeEvent = null;
		Event upcomingEvent = null;

		for (Event event : events)
		{
			if ("ACTIVE".equals(event.getStatus()))
			{
				activeEvent = event;
			}
			else if ("UPCOMING".equals(event.getStatus()) && upcomingEvent == null)
			{
				LocalDateTime startTime = parseDateTime(event.getStartTime());
				long minutesUntil = ChronoUnit.MINUTES.between(now, startTime);
				if (minutesUntil <= 180 && minutesUntil >= 0)
				{
					upcomingEvent = event;
				}
			}
		}

		boolean showActive = activeEvent != null && config.showActiveEvent();
		boolean showUpcoming = upcomingEvent != null && config.showUpcoming();

		boolean isStartingSoon = false;
		if (upcomingEvent != null)
		{
			LocalDateTime startTime = parseDateTime(upcomingEvent.getStartTime());
			long minutesUntil = ChronoUnit.MINUTES.between(now, startTime);
			isStartingSoon = minutesUntil <= 30 && minutesUntil >= 0;

			if (isStartingSoon && !config.showStartingSoon())
			{
				showUpcoming = false;
			}
		}

		boolean isEndingSoon = false;
		if (activeEvent != null)
		{
			LocalDateTime endTime = parseDateTime(activeEvent.getStartTime())
				.plusMinutes(activeEvent.getDurationMinutes());
			long minutesLeft = ChronoUnit.MINUTES.between(now, endTime);
			isEndingSoon = minutesLeft <= 30 && minutesLeft >= 0;

			if (isEndingSoon && !config.showEndingSoon())
			{
				isEndingSoon = false;
			}
		}

		if (!showActive && !showUpcoming)
		{
			return null;
		}

		panelComponent.getChildren().clear();

		panelComponent.getChildren().add(TitleComponent.builder()
			.text("ARCEUUS")
			.color(ARCEUUS_PURPLE)
			.build());

		if (showActive)
		{
			renderActiveEvent(activeEvent, now, isEndingSoon);
		}

		if (showUpcoming)
		{
			if (showActive)
			{
				panelComponent.getChildren().add(LineComponent.builder().build());
			}
			renderUpcomingEvent(upcomingEvent, now, isStartingSoon);
		}

		return panelComponent.render(graphics);
	}

	private void renderActiveEvent(Event event, LocalDateTime now, boolean isEndingSoon)
	{
		LocalDateTime endTime = parseDateTime(event.getStartTime())
			.plusMinutes(event.getDurationMinutes());
		long secondsLeft = ChronoUnit.SECONDS.between(now, endTime);

		String title = isEndingSoon ? "ENDING SOON" : "LIVE EVENT";
		Color titleColor = isEndingSoon ? ENDING_SOON_RED : LIVE_GREEN;

		panelComponent.getChildren().add(TitleComponent.builder()
			.text(title)
			.color(titleColor)
			.build());

		panelComponent.getChildren().add(LineComponent.builder()
			.left(event.getTitle())
			.leftColor(Color.WHITE)
			.build());

		if (secondsLeft > 0)
		{
			panelComponent.getChildren().add(LineComponent.builder()
				.left("Ends in:")
				.leftColor(Color.GRAY)
				.right(formatCountdown(secondsLeft))
				.rightColor(isEndingSoon ? ENDING_SOON_RED : Color.ORANGE)
				.build());
		}

		panelComponent.getChildren().add(LineComponent.builder()
			.left("Signups:")
			.leftColor(Color.GRAY)
			.right(String.valueOf(event.getSignups() != null ? event.getSignups().size() : 0))
			.rightColor(Color.WHITE)
			.build());
	}

	private void renderUpcomingEvent(Event event, LocalDateTime now, boolean isStartingSoon)
	{
		LocalDateTime startTime = parseDateTime(event.getStartTime());
		long secondsUntil = ChronoUnit.SECONDS.between(now, startTime);

		String title = isStartingSoon ? "STARTING SOON" : "NEXT EVENT";
		Color titleColor = isStartingSoon ? STARTING_SOON_YELLOW : UPCOMING_BLUE;

		panelComponent.getChildren().add(TitleComponent.builder()
			.text(title)
			.color(titleColor)
			.build());

		panelComponent.getChildren().add(LineComponent.builder()
			.left(event.getTitle())
			.leftColor(Color.WHITE)
			.build());

		if (secondsUntil > 0)
		{
			panelComponent.getChildren().add(LineComponent.builder()
				.left("Starts in:")
				.leftColor(Color.GRAY)
				.right(formatCountdown(secondsUntil))
				.rightColor(isStartingSoon ? STARTING_SOON_YELLOW : Color.WHITE)
				.build());
		}
		else
		{
			panelComponent.getChildren().add(LineComponent.builder()
				.left("Starting now!")
				.leftColor(STARTING_SOON_YELLOW)
				.build());
		}

		panelComponent.getChildren().add(LineComponent.builder()
			.left("Signups:")
			.leftColor(Color.GRAY)
			.right(String.valueOf(event.getSignups() != null ? event.getSignups().size() : 0))
			.rightColor(Color.WHITE)
			.build());

		if (plugin.isSignedUp(event.getEventId()))
		{
			panelComponent.getChildren().add(LineComponent.builder()
				.left("You are signed up!")
				.leftColor(LIVE_GREEN)
				.build());
		}
	}

	private LocalDateTime parseDateTime(String isoTime)
	{
		return DateTimeUtils.parseDateTime(isoTime);
	}

	private String formatCountdown(long totalSeconds)
	{
		if (totalSeconds < 0)
		{
			return "0s";
		}

		if (totalSeconds < 60)
		{
			return totalSeconds + "s";
		}

		long totalMinutes = totalSeconds / 60;

		if (totalMinutes < 60)
		{
			return totalMinutes + "m";
		}

		long hours = totalMinutes / 60;
		long minutes = totalMinutes % 60;
		if (hours < 24)
		{
			return hours + "h " + minutes + "m";
		}

		long days = hours / 24;
		hours = hours % 24;
		return days + "d " + hours + "h";
	}
}

package com.arceuuscc.plugin.ui;

import com.arceuuscc.plugin.ArceuusCCPlugin;
import com.arceuuscc.plugin.models.Event;
import com.arceuuscc.plugin.util.DateTimeUtils;
import lombok.extern.slf4j.Slf4j;
import net.runelite.client.ui.ColorScheme;
import net.runelite.client.ui.PluginPanel;

import javax.swing.BorderFactory;
import javax.swing.Box;
import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.ScrollPaneConstants;
import javax.swing.border.EmptyBorder;
import java.awt.Color;
import java.awt.Component;
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.GraphicsEnvironment;
import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;
import java.time.format.DateTimeParseException;
import java.util.ArrayList;
import java.util.Comparator;
import java.util.List;

@Slf4j
public class ArceuusCCPanel extends PluginPanel
{
	private static final DateTimeFormatter DISPLAY_FORMATTER = DateTimeFormatter.ofPattern("EEE, MMM d 'at' HH:mm");
	private static final DateTimeFormatter INPUT_FORMATTER = DateTimeFormatter.ISO_LOCAL_DATE_TIME;
	private static final String EMOJI_FONT_NAME = getEmojiFontName();

	private final ArceuusCCPlugin plugin;
	private final JPanel headerPanel;
	private final JLabel connectionStatus;
	private final JLabel playerInfoLabel;
	private final JLabel clanStatusLabel;
	private final JPanel eventsContainer;
	private final JButton refreshButton;

	private static String getEmojiFontName()
	{
		String[] emojiFonts = {"Segoe UI Emoji", "Apple Color Emoji", "Noto Color Emoji", "Segoe UI Symbol", "Arial"};
		GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
		String[] availableFonts = ge.getAvailableFontFamilyNames();

		for (String emojiFont : emojiFonts)
		{
			for (String available : availableFonts)
			{
				if (available.equalsIgnoreCase(emojiFont))
				{
					return emojiFont;
				}
			}
		}
		return "Arial";
	}

	public ArceuusCCPanel(ArceuusCCPlugin plugin)
	{
		super(false);
		this.plugin = plugin;

		setLayout(new BorderLayout());
		setBackground(ColorScheme.DARK_GRAY_COLOR);

		headerPanel = new JPanel();
		headerPanel.setLayout(new BoxLayout(headerPanel, BoxLayout.Y_AXIS));
		headerPanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);
		headerPanel.setBorder(new EmptyBorder(10, 10, 10, 10));

		JLabel titleLabel = new JLabel("Arceuus CC Events");
		titleLabel.setFont(new Font("Arial", Font.BOLD, 16));
		titleLabel.setForeground(Color.WHITE);
		titleLabel.setAlignmentX(Component.LEFT_ALIGNMENT);
		headerPanel.add(titleLabel);

		headerPanel.add(Box.createVerticalStrut(5));

		connectionStatus = new JLabel("Connecting...");
		connectionStatus.setForeground(Color.ORANGE);
		connectionStatus.setAlignmentX(Component.LEFT_ALIGNMENT);
		headerPanel.add(connectionStatus);

		headerPanel.add(Box.createVerticalStrut(5));

		playerInfoLabel = new JLabel("");
		playerInfoLabel.setForeground(Color.WHITE);
		playerInfoLabel.setAlignmentX(Component.LEFT_ALIGNMENT);
		playerInfoLabel.setVisible(false);
		headerPanel.add(playerInfoLabel);

		clanStatusLabel = new JLabel("");
		clanStatusLabel.setAlignmentX(Component.LEFT_ALIGNMENT);
		headerPanel.add(clanStatusLabel);

		headerPanel.add(Box.createVerticalStrut(10));

		refreshButton = new JButton("Refresh Events");
		refreshButton.setAlignmentX(Component.LEFT_ALIGNMENT);
		refreshButton.addActionListener(e -> plugin.refreshEvents());
		headerPanel.add(refreshButton);

		add(headerPanel, BorderLayout.NORTH);

		eventsContainer = new JPanel();
		eventsContainer.setLayout(new BoxLayout(eventsContainer, BoxLayout.Y_AXIS));
		eventsContainer.setBackground(ColorScheme.DARK_GRAY_COLOR);
		eventsContainer.setBorder(new EmptyBorder(10, 10, 10, 10));

		JScrollPane scrollPane = new JScrollPane(eventsContainer);
		scrollPane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
		scrollPane.setBorder(null);
		scrollPane.getVerticalScrollBar().setUnitIncrement(16);

		add(scrollPane, BorderLayout.CENTER);

		updateEvents();
	}

	public void updateConnectionStatus(boolean connected)
	{
		if (connected)
		{
			connectionStatus.setText("Connected");
			connectionStatus.setForeground(new Color(0, 200, 83));
			refreshButton.setEnabled(true);
		}
		else
		{
			connectionStatus.setText("Disconnected");
			connectionStatus.setForeground(Color.RED);
			refreshButton.setEnabled(false);
		}
	}

	public void updatePlayerInfo()
	{
		String playerName = plugin.getPlayerName();
		boolean inClan = plugin.isInClan();

		if (playerName != null)
		{
			playerInfoLabel.setText("Player: " + playerName);
			playerInfoLabel.setVisible(true);

			if (inClan)
			{
				clanStatusLabel.setText("In Arceuus clan");
				clanStatusLabel.setForeground(new Color(0, 200, 83));
			}
			else
			{
				clanStatusLabel.setText("Not in Arceuus clan");
				clanStatusLabel.setForeground(Color.ORANGE);
			}
			clanStatusLabel.setVisible(true);
		}
		else
		{
			playerInfoLabel.setVisible(false);
			clanStatusLabel.setVisible(false);
		}
	}

	public void updateEvents()
	{
		eventsContainer.removeAll();

		List<Event> events = plugin.getEvents();

		if (events == null || events.isEmpty())
		{
			JLabel noEventsLabel = new JLabel("No events");
			noEventsLabel.setForeground(ColorScheme.LIGHT_GRAY_COLOR);
			noEventsLabel.setAlignmentX(Component.LEFT_ALIGNMENT);
			eventsContainer.add(noEventsLabel);
		}
		else
		{
			List<Event> liveEvents = new ArrayList<>();
			List<Event> upcomingEvents = new ArrayList<>();
			List<Event> finishedEvents = new ArrayList<>();

			for (Event event : events)
			{
				String status = event.getStatus();
				if ("ACTIVE".equals(status))
				{
					liveEvents.add(event);
				}
				else if ("UPCOMING".equals(status))
				{
					upcomingEvents.add(event);
				}
				else if ("COMPLETED".equals(status) || "CANCELLED".equals(status))
				{
					finishedEvents.add(event);
				}
			}

			upcomingEvents.sort(Comparator.comparing(e -> parseDateTime(e.getStartTime())));
			finishedEvents.sort((a, b) -> parseDateTime(b.getStartTime()).compareTo(parseDateTime(a.getStartTime())));

			if (!liveEvents.isEmpty())
			{
				addSectionHeader("LIVE", new Color(50, 200, 50));
				for (Event event : liveEvents)
				{
					eventsContainer.add(createEventPanel(event));
					eventsContainer.add(Box.createVerticalStrut(8));
				}
				eventsContainer.add(Box.createVerticalStrut(10));
			}

			if (!upcomingEvents.isEmpty())
			{
				addSectionHeader("UPCOMING", new Color(114, 137, 218));
				for (Event event : upcomingEvents)
				{
					eventsContainer.add(createEventPanel(event));
					eventsContainer.add(Box.createVerticalStrut(8));
				}
				eventsContainer.add(Box.createVerticalStrut(10));
			}

			if (!finishedEvents.isEmpty())
			{
				addSectionHeader("FINISHED", Color.GRAY);
				for (Event event : finishedEvents)
				{
					eventsContainer.add(createEventPanel(event));
					eventsContainer.add(Box.createVerticalStrut(8));
				}
			}

			if (liveEvents.isEmpty() && upcomingEvents.isEmpty() && finishedEvents.isEmpty())
			{
				JLabel noEventsLabel = new JLabel("No events");
				noEventsLabel.setForeground(ColorScheme.LIGHT_GRAY_COLOR);
				noEventsLabel.setAlignmentX(Component.LEFT_ALIGNMENT);
				eventsContainer.add(noEventsLabel);
			}
		}

		eventsContainer.revalidate();
		eventsContainer.repaint();
	}

	private void addSectionHeader(String title, Color color)
	{
		JPanel sectionHeaderPanel = new JPanel(new FlowLayout(FlowLayout.LEFT, 0, 0));
		sectionHeaderPanel.setBackground(ColorScheme.DARK_GRAY_COLOR);
		sectionHeaderPanel.setAlignmentX(Component.LEFT_ALIGNMENT);
		sectionHeaderPanel.setMaximumSize(new Dimension(Integer.MAX_VALUE, 25));

		JLabel label = new JLabel(title);
		label.setFont(new Font("Arial", Font.BOLD, 12));
		label.setForeground(color);
		sectionHeaderPanel.add(label);

		eventsContainer.add(sectionHeaderPanel);
		eventsContainer.add(Box.createVerticalStrut(5));
	}

	private LocalDateTime parseDateTime(String isoTime)
	{
		return DateTimeUtils.parseDateTime(isoTime);
	}

	private JPanel createEventPanel(Event event)
	{
		boolean isCancelled = "CANCELLED".equals(event.getStatus());
		boolean isActive = "ACTIVE".equals(event.getStatus());
		boolean isUpcoming = "UPCOMING".equals(event.getStatus());
		boolean isCompleted = "COMPLETED".equals(event.getStatus());

		JPanel panel = new JPanel();
		panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));

		Color bgColor;
		Color borderColor;
		if (isCancelled)
		{
			bgColor = new Color(60, 40, 40);
			borderColor = new Color(150, 50, 50);
		}
		else if (isActive)
		{
			bgColor = new Color(30, 50, 30);
			borderColor = new Color(50, 150, 50);
		}
		else if (isCompleted)
		{
			bgColor = new Color(45, 45, 45);
			borderColor = new Color(80, 80, 80);
		}
		else
		{
			bgColor = ColorScheme.DARKER_GRAY_COLOR;
			borderColor = ColorScheme.MEDIUM_GRAY_COLOR;
		}

		panel.setBackground(bgColor);
		panel.setBorder(BorderFactory.createCompoundBorder(
			BorderFactory.createLineBorder(borderColor, 1),
			new EmptyBorder(8, 8, 8, 8)
		));
		panel.setAlignmentX(Component.LEFT_ALIGNMENT);
		panel.setMaximumSize(new Dimension(225, Integer.MAX_VALUE));

		String titleText;
		Color titleColor;
		if (isCancelled)
		{
			titleText = "<html><s>" + event.getTitle() + "</s></html>";
			titleColor = Color.GRAY;
		}
		else if (isCompleted)
		{
			titleText = event.getTitle();
			titleColor = Color.GRAY;
		}
		else if (isActive)
		{
			titleText = event.getTitle();
			titleColor = new Color(50, 200, 50);
		}
		else
		{
			titleText = event.getTitle();
			titleColor = new Color(114, 137, 218);
		}
		JLabel titleLabel = new JLabel(titleText);
		titleLabel.setFont(new Font("Arial", Font.BOLD, 13));
		titleLabel.setForeground(titleColor);
		titleLabel.setAlignmentX(Component.LEFT_ALIGNMENT);
		panel.add(titleLabel);

		panel.add(Box.createVerticalStrut(4));

		String timeDisplay = formatEventTime(event.getStartTime());
		JLabel timeLabel = new JLabel(timeDisplay + " UTC");
		timeLabel.setFont(new Font("Arial", Font.PLAIN, 11));
		timeLabel.setForeground(Color.WHITE);
		timeLabel.setAlignmentX(Component.LEFT_ALIGNMENT);
		panel.add(timeLabel);

		JLabel durationLabel = new JLabel("Duration: " + formatDuration(event.getDurationMinutes()));
		durationLabel.setFont(new Font("Arial", Font.PLAIN, 10));
		durationLabel.setForeground(ColorScheme.LIGHT_GRAY_COLOR);
		durationLabel.setAlignmentX(Component.LEFT_ALIGNMENT);
		panel.add(durationLabel);

		panel.add(Box.createVerticalStrut(4));

		int signupCount = event.getSignups() != null ? event.getSignups().size() : 0;
		JLabel signupsLabel = new JLabel("Signups: " + signupCount);
		signupsLabel.setFont(new Font("Arial", Font.PLAIN, 10));
		signupsLabel.setForeground(ColorScheme.LIGHT_GRAY_COLOR);
		signupsLabel.setAlignmentX(Component.LEFT_ALIGNMENT);
		panel.add(signupsLabel);

		String description = event.getDescription();
		if (description != null && !description.isEmpty())
		{
			panel.add(Box.createVerticalStrut(4));

			String preview = description.length() > 60
				? description.substring(0, 57) + "..."
				: description;
			JLabel descPreview = new JLabel("<html><i>" + escapeHtml(preview) + "</i></html>");
			descPreview.setFont(new Font(EMOJI_FONT_NAME, Font.PLAIN, 10));
			descPreview.setForeground(ColorScheme.LIGHT_GRAY_COLOR);
			descPreview.setAlignmentX(Component.LEFT_ALIGNMENT);
			panel.add(descPreview);

			if (description.length() > 60 || description.contains("\n"))
			{
				panel.add(Box.createVerticalStrut(4));
				JButton detailsButton = new JButton("Show Details");
				detailsButton.setFont(new Font("Arial", Font.PLAIN, 10));
				detailsButton.setAlignmentX(Component.LEFT_ALIGNMENT);
				detailsButton.setPreferredSize(new Dimension(90, 20));
				detailsButton.setMaximumSize(new Dimension(90, 20));
				detailsButton.addActionListener(e -> showEventDetailsDialog(event));
				panel.add(detailsButton);
			}
		}

		if (isUpcoming)
		{
			boolean eventPassed = false;
			if (event.getStartTime() != null)
			{
				try
				{
					LocalDateTime startTime = LocalDateTime.parse(event.getStartTime());
					eventPassed = startTime.isBefore(LocalDateTime.now());
				}
				catch (Exception e)
				{
					log.warn("Could not parse event time: {}", event.getStartTime());
				}
			}

			panel.add(Box.createVerticalStrut(6));

			boolean isSignedUp = plugin.isSignedUp(event.getEventId());
			boolean canSignUp = plugin.getPlayerName() != null && plugin.isInClan() && !eventPassed;

			JButton actionButton;
			if (isSignedUp)
			{
				actionButton = new JButton("Leave Event");
				actionButton.setBackground(new Color(150, 50, 50));
				actionButton.addActionListener(e ->
				{
					log.info("Leave button clicked for event: {}", event.getEventId());
					plugin.unSignUp(event.getEventId());
				});
			}
			else
			{
				actionButton = new JButton("Sign Up");
				actionButton.setBackground(new Color(50, 150, 50));
				actionButton.addActionListener(e ->
				{
					log.info("Sign up button clicked for event: {}", event.getEventId());
					plugin.signUp(event.getEventId());
				});

				if (!canSignUp)
				{
					actionButton.setEnabled(false);
					if (eventPassed)
					{
						actionButton.setToolTipText("Event time has passed");
					}
					else
					{
						actionButton.setToolTipText("Join Arceuus clan to sign up");
					}
				}
			}
			actionButton.setAlignmentX(Component.LEFT_ALIGNMENT);
			actionButton.setForeground(Color.WHITE);
			actionButton.setFont(new Font("Arial", Font.BOLD, 11));
			actionButton.setPreferredSize(new Dimension(100, 24));
			actionButton.setMaximumSize(new Dimension(100, 24));
			panel.add(actionButton);
		}

		return panel;
	}

	private String formatEventTime(String isoTime)
	{
		if (isoTime == null)
		{
			return "Unknown";
		}
		try
		{
			LocalDateTime dateTime = LocalDateTime.parse(isoTime, INPUT_FORMATTER);
			return dateTime.format(DISPLAY_FORMATTER);
		}
		catch (DateTimeParseException e)
		{
			return isoTime;
		}
	}

	private String formatDuration(int minutes)
	{
		if (minutes == 0)
		{
			return "Open-ended";
		}
		if (minutes < 60)
		{
			return minutes + " min";
		}
		int hours = minutes / 60;
		int mins = minutes % 60;
		if (mins == 0)
		{
			return hours + "h";
		}
		return hours + "h " + mins + "m";
	}

	private String escapeHtml(String text)
	{
		if (text == null)
		{
			return "";
		}
		return text.replace("&", "&amp;")
			.replace("<", "&lt;")
			.replace(">", "&gt;")
			.replace("\"", "&quot;")
			.replace("\n", "<br>");
	}

	private void showEventDetailsDialog(Event event)
	{
		JPanel dialogPanel = new JPanel();
		dialogPanel.setLayout(new BoxLayout(dialogPanel, BoxLayout.Y_AXIS));
		dialogPanel.setBackground(ColorScheme.DARKER_GRAY_COLOR);
		dialogPanel.setBorder(new EmptyBorder(15, 15, 15, 15));

		JLabel titleLabel = new JLabel(event.getTitle());
		titleLabel.setFont(new Font("Arial", Font.BOLD, 16));
		titleLabel.setForeground(new Color(114, 137, 218));
		titleLabel.setAlignmentX(Component.LEFT_ALIGNMENT);
		dialogPanel.add(titleLabel);

		dialogPanel.add(Box.createVerticalStrut(10));

		JLabel timeLabel = new JLabel("When: " + formatEventTime(event.getStartTime()) + " UTC");
		timeLabel.setFont(new Font("Arial", Font.PLAIN, 12));
		timeLabel.setForeground(Color.WHITE);
		timeLabel.setAlignmentX(Component.LEFT_ALIGNMENT);
		dialogPanel.add(timeLabel);

		JLabel durationLabel = new JLabel("Duration: " + formatDuration(event.getDurationMinutes()));
		durationLabel.setFont(new Font("Arial", Font.PLAIN, 12));
		durationLabel.setForeground(Color.WHITE);
		durationLabel.setAlignmentX(Component.LEFT_ALIGNMENT);
		dialogPanel.add(durationLabel);

		JLabel statusLabel = new JLabel("Status: " + event.getStatus());
		statusLabel.setFont(new Font("Arial", Font.PLAIN, 12));
		statusLabel.setForeground(Color.WHITE);
		statusLabel.setAlignmentX(Component.LEFT_ALIGNMENT);
		dialogPanel.add(statusLabel);

		int signupCount = event.getSignups() != null ? event.getSignups().size() : 0;
		JLabel signupsLabel = new JLabel("Signups: " + signupCount);
		signupsLabel.setFont(new Font("Arial", Font.PLAIN, 12));
		signupsLabel.setForeground(Color.WHITE);
		signupsLabel.setAlignmentX(Component.LEFT_ALIGNMENT);
		dialogPanel.add(signupsLabel);

		dialogPanel.add(Box.createVerticalStrut(15));

		JLabel descHeader = new JLabel("Description:");
		descHeader.setFont(new Font("Arial", Font.BOLD, 12));
		descHeader.setForeground(Color.WHITE);
		descHeader.setAlignmentX(Component.LEFT_ALIGNMENT);
		dialogPanel.add(descHeader);

		dialogPanel.add(Box.createVerticalStrut(5));

		JTextArea descArea = new JTextArea(event.getDescription());
		descArea.setFont(new Font(EMOJI_FONT_NAME, Font.PLAIN, 12));
		descArea.setForeground(Color.WHITE);
		descArea.setBackground(ColorScheme.DARK_GRAY_COLOR);
		descArea.setEditable(false);
		descArea.setLineWrap(true);
		descArea.setWrapStyleWord(true);
		descArea.setBorder(new EmptyBorder(8, 8, 8, 8));

		JScrollPane descScroll = new JScrollPane(descArea);
		descScroll.setPreferredSize(new Dimension(350, 150));
		descScroll.setAlignmentX(Component.LEFT_ALIGNMENT);
		descScroll.setBorder(BorderFactory.createLineBorder(ColorScheme.MEDIUM_GRAY_COLOR));
		dialogPanel.add(descScroll);

		if (event.getSignups() != null && !event.getSignups().isEmpty())
		{
			dialogPanel.add(Box.createVerticalStrut(15));

			JLabel signupsHeader = new JLabel("Signed Up Players:");
			signupsHeader.setFont(new Font("Arial", Font.BOLD, 12));
			signupsHeader.setForeground(Color.WHITE);
			signupsHeader.setAlignmentX(Component.LEFT_ALIGNMENT);
			dialogPanel.add(signupsHeader);

			dialogPanel.add(Box.createVerticalStrut(5));

			StringBuilder signupsList = new StringBuilder();
			for (int i = 0; i < event.getSignups().size(); i++)
			{
				if (i > 0)
				{
					signupsList.append(", ");
				}
				signupsList.append(event.getSignups().get(i).getOsrsName());
			}

			JTextArea signupsArea = new JTextArea(signupsList.toString());
			signupsArea.setFont(new Font("Arial", Font.PLAIN, 11));
			signupsArea.setForeground(ColorScheme.LIGHT_GRAY_COLOR);
			signupsArea.setBackground(ColorScheme.DARK_GRAY_COLOR);
			signupsArea.setEditable(false);
			signupsArea.setLineWrap(true);
			signupsArea.setWrapStyleWord(true);
			signupsArea.setBorder(new EmptyBorder(8, 8, 8, 8));

			JScrollPane signupsScroll = new JScrollPane(signupsArea);
			signupsScroll.setPreferredSize(new Dimension(350, 60));
			signupsScroll.setAlignmentX(Component.LEFT_ALIGNMENT);
			signupsScroll.setBorder(BorderFactory.createLineBorder(ColorScheme.MEDIUM_GRAY_COLOR));
			dialogPanel.add(signupsScroll);
		}

		JOptionPane.showMessageDialog(
			this,
			dialogPanel,
			"Event Details",
			JOptionPane.PLAIN_MESSAGE
		);
	}
}

package com.arceuuscc.plugin;

import net.runelite.client.config.Config;
import net.runelite.client.config.ConfigGroup;
import net.runelite.client.config.ConfigItem;
import net.runelite.client.config.ConfigSection;

@ConfigGroup("arceuuscc")
public interface ArceuusCCConfig extends Config
{
	@ConfigSection(
		name = "Overlay Settings",
		description = "Configure the in-game overlay",
		position = 0
	)
	String overlaySection = "overlay";

	@ConfigSection(
		name = "Notification Settings",
		description = "Configure event notifications",
		position = 1
	)
	String notificationSection = "notifications";

	@ConfigItem(
		keyName = "showOverlay",
		name = "Show Overlay",
		description = "Show the Arceuus event overlay in-game",
		position = 0,
		section = overlaySection
	)
	default boolean showOverlay()
	{
		return true;
	}

	@ConfigItem(
		keyName = "showActiveEvent",
		name = "Show Active Event",
		description = "Show currently active events in the overlay",
		position = 1,
		section = overlaySection
	)
	default boolean showActiveEvent()
	{
		return true;
	}

	@ConfigItem(
		keyName = "showStartingSoon",
		name = "Show Starting Soon",
		description = "Show events starting within 30 minutes",
		position = 2,
		section = overlaySection
	)
	default boolean showStartingSoon()
	{
		return true;
	}

	@ConfigItem(
		keyName = "showUpcoming",
		name = "Show Upcoming Events",
		description = "Show events starting within 3 hours",
		position = 3,
		section = overlaySection
	)
	default boolean showUpcoming()
	{
		return true;
	}

	@ConfigItem(
		keyName = "showEndingSoon",
		name = "Show Ending Soon",
		description = "Show when active events are ending within 30 minutes",
		position = 4,
		section = overlaySection
	)
	default boolean showEndingSoon()
	{
		return true;
	}

	@ConfigItem(
		keyName = "showNotifications",
		name = "Enable Notifications",
		description = "Master toggle for all notifications",
		position = 0,
		section = notificationSection
	)
	default boolean showNotifications()
	{
		return true;
	}

	@ConfigItem(
		keyName = "notifyNewEvent",
		name = "New Event",
		description = "Notify when a new event is created",
		position = 1,
		section = notificationSection
	)
	default boolean notifyNewEvent()
	{
		return true;
	}

	@ConfigItem(
		keyName = "notifyEventStarting",
		name = "Event Starting",
		description = "Notify when an event starts",
		position = 2,
		section = notificationSection
	)
	default boolean notifyEventStarting()
	{
		return true;
	}

	@ConfigItem(
		keyName = "notifyEventEnding",
		name = "Event Ending",
		description = "Notify when an event ends",
		position = 3,
		section = notificationSection
	)
	default boolean notifyEventEnding()
	{
		return true;
	}

	@ConfigItem(
		keyName = "notifyEventCancelled",
		name = "Event Cancelled",
		description = "Notify when an event is cancelled",
		position = 4,
		section = notificationSection
	)
	default boolean notifyEventCancelled()
	{
		return true;
	}

	@ConfigItem(
		keyName = "autoRefresh",
		name = "Auto Refresh",
		description = "Automatically refresh events list periodically",
		position = 10
	)
	default boolean autoRefresh()
	{
		return true;
	}
}

package com.arceuuscc.plugin;

import com.arceuuscc.plugin.http.HttpEventClient;
import com.arceuuscc.plugin.models.Event;
import com.arceuuscc.plugin.ui.ArceuusCCOverlay;
import com.arceuuscc.plugin.ui.ArceuusCCPanel;
import com.google.gson.Gson;
import com.google.inject.Provides;
import lombok.Getter;
import lombok.extern.slf4j.Slf4j;
import net.runelite.api.Client;
import net.runelite.api.GameState;
import net.runelite.api.clan.ClanChannel;
import net.runelite.api.clan.ClanID;
import net.runelite.api.events.ClanChannelChanged;
import net.runelite.api.events.GameStateChanged;
import net.runelite.api.events.GameTick;
import net.runelite.client.Notifier;
import net.runelite.client.config.ConfigManager;
import net.runelite.client.eventbus.Subscribe;
import net.runelite.client.plugins.Plugin;
import net.runelite.client.plugins.PluginDescriptor;
import net.runelite.client.ui.ClientToolbar;
import net.runelite.client.ui.NavigationButton;
import net.runelite.client.ui.overlay.OverlayManager;
import net.runelite.client.util.ImageUtil;
import okhttp3.OkHttpClient;

import javax.inject.Inject;
import javax.swing.SwingUtilities;
import java.awt.image.BufferedImage;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.concurrent.ScheduledExecutorService;

@Slf4j
@PluginDescriptor(
	name = "Arceuus CC",
	description = "Clan event management for Arceuus CC - view events, sign up, and coordinate with your clan. This plugin submits your username to a 3rd party server not controlled or verified by the RuneLite Developers.",
	tags = {"clan", "events", "arceuus", "cc", "signup"}
)
public class ArceuusCCPlugin extends Plugin
{
	private static final String API_URL = "https://pixelperfectdigital.co.uk/arceuus/events.php";

	@Inject
	private Client client;

	@Inject
	private ArceuusCCConfig config;

	@Inject
	private ClientToolbar clientToolbar;

	@Inject
	private OverlayManager overlayManager;

	@Inject
	private Notifier notifier;

	@Inject
	private OkHttpClient okHttpClient;

	@Inject
	private Gson gson;

	@Inject
	private ScheduledExecutorService executor;

	@Getter
	private HttpEventClient httpClient;

	private ArceuusCCPanel panel;
	private ArceuusCCOverlay overlay;
	private NavigationButton navButton;

	@Getter
	private List<Event> events = new ArrayList<>();

	private final Map<String, String> lastEventStatus = new HashMap<>();

	@Getter
	private boolean inClan = false;

	@Getter
	private String playerName = null;

	@Provides
	ArceuusCCConfig provideConfig(ConfigManager configManager)
	{
		return configManager.getConfig(ArceuusCCConfig.class);
	}

	@Override
	protected void startUp()
	{
		log.info("Arceuus CC plugin started");

		try
		{
			panel = new ArceuusCCPanel(this);

			overlay = new ArceuusCCOverlay(this, config);
			overlayManager.add(overlay);

			BufferedImage icon = null;
			try
			{
				icon = ImageUtil.loadImageResource(getClass(), "icon.png");
			}
			catch (Exception iconEx)
			{
				log.debug("Could not load icon, using fallback");
			}

			navButton = NavigationButton.builder()
				.tooltip("Arceuus CC Events")
				.icon(icon != null ? icon : new BufferedImage(16, 16, BufferedImage.TYPE_INT_ARGB))
				.priority(5)
				.panel(panel)
				.build();

			clientToolbar.addNavigation(navButton);

			httpClient = new HttpEventClient(API_URL, this, okHttpClient, gson, executor);
			httpClient.start();
		}
		catch (Exception e)
		{
			log.error("Error during startup", e);
		}
	}

	@Override
	protected void shutDown()
	{
		log.info("Arceuus CC plugin stopped");

		clientToolbar.removeNavigation(navButton);
		overlayManager.remove(overlay);

		if (httpClient != null)
		{
			httpClient.stop();
		}
	}

	@Subscribe
	public void onGameStateChanged(GameStateChanged event)
	{
		if (event.getGameState() == GameState.LOGGED_IN)
		{
			playerName = client.getLocalPlayer() != null ? client.getLocalPlayer().getName() : null;
			log.debug("Player logged in: {}", playerName);
			checkClanMembership();
			SwingUtilities.invokeLater(() ->
			{
				panel.updatePlayerInfo();
				panel.updateEvents();
			});
		}
		else if (event.getGameState() == GameState.LOGIN_SCREEN)
		{
			playerName = null;
			inClan = false;
			SwingUtilities.invokeLater(() ->
			{
				panel.updatePlayerInfo();
				panel.updateEvents();
			});
		}
	}

	@Subscribe
	public void onClanChannelChanged(ClanChannelChanged event)
	{
		checkClanMembership();
		SwingUtilities.invokeLater(() ->
		{
			panel.updatePlayerInfo();
			panel.updateEvents();
		});
	}

	@Subscribe
	public void onGameTick(GameTick event)
	{
		if (playerName == null && client.getLocalPlayer() != null)
		{
			playerName = client.getLocalPlayer().getName();
			log.info("Player name detected: {}", playerName);
			SwingUtilities.invokeLater(() -> panel.updatePlayerInfo());
		}

		if (!inClan)
		{
			checkClanMembership();
			if (inClan)
			{
				SwingUtilities.invokeLater(() -> panel.updatePlayerInfo());
			}
		}
	}

	private void checkClanMembership()
	{
		ClanChannel yourClan = client.getClanChannel(ClanID.CLAN);

		if (yourClan != null)
		{
			String clanName = yourClan.getName();
			boolean wasInClan = inClan;

			if ("Arceuus".equalsIgnoreCase(clanName))
			{
				inClan = true;
				if (!wasInClan)
				{
					log.info("Joined Arceuus clan");
				}
			}
			else
			{
				inClan = false;
				if (wasInClan)
				{
					log.info("Left Arceuus clan (now in: {})", clanName);
				}
			}
		}
		else
		{
			if (inClan)
			{
				log.info("Left clan");
			}
			inClan = false;
		}
	}

	public void onEventsReceived(List<Event> newEvents)
	{
		if (config.showNotifications() && config.notifyNewEvent() && !events.isEmpty())
		{
			for (Event newEvent : newEvents)
			{
				boolean isNew = events.stream()
					.noneMatch(e -> e.getEventId().equals(newEvent.getEventId()));
				if (isNew && "UPCOMING".equals(newEvent.getStatus()))
				{
					notifier.notify("Arceuus CC - New Event: " + newEvent.getTitle());
				}
			}
		}

		if (config.showNotifications())
		{
			for (Event newEvent : newEvents)
			{
				String oldStatus = lastEventStatus.get(newEvent.getEventId());
				String newStatus = newEvent.getStatus();

				if (oldStatus != null && !oldStatus.equals(newStatus))
				{
					switch (newStatus)
					{
						case "ACTIVE":
							if (config.notifyEventStarting())
							{
								notifier.notify("Arceuus CC - Event Starting: " + newEvent.getTitle());
							}
							break;
						case "COMPLETED":
							if (config.notifyEventEnding())
							{
								notifier.notify("Arceuus CC - Event Ended: " + newEvent.getTitle());
							}
							break;
						case "CANCELLED":
							if (config.notifyEventCancelled())
							{
								notifier.notify("Arceuus CC - Event Cancelled: " + newEvent.getTitle());
							}
							break;
						default:
							break;
					}
				}
			}
		}

		for (Event event : newEvents)
		{
			lastEventStatus.put(event.getEventId(), event.getStatus());
		}

		this.events = newEvents;
		SwingUtilities.invokeLater(() -> panel.updateEvents());
	}

	public void onConnectionStatusChanged(boolean connected)
	{
		SwingUtilities.invokeLater(() -> panel.updateConnectionStatus(connected));
	}

	public void signUp(String eventId)
	{
		log.info("signUp called for eventId: {}, playerName: {}, inClan: {}", eventId, playerName, inClan);

		if (playerName == null)
		{
			log.warn("Cannot sign up - player name not known");
			return;
		}
		if (!inClan)
		{
			log.warn("Cannot sign up - not in Arceuus clan chat");
			return;
		}
		if (httpClient != null && httpClient.isConnected())
		{
			log.info("Sending signup request via HTTP");
			httpClient.sendSignup(eventId, playerName);
		}
		else
		{
			log.warn("HTTP client not connected, cannot sign up");
		}
	}

	public void unSignUp(String eventId)
	{
		log.info("unSignUp called for eventId: {}, playerName: {}", eventId, playerName);

		if (playerName == null)
		{
			return;
		}
		if (httpClient != null && httpClient.isConnected())
		{
			log.info("Sending unsignup request via HTTP");
			httpClient.sendUnsignup(eventId, playerName);
		}
		else
		{
			log.warn("HTTP client not connected, cannot unsign up");
		}
	}

	public void refreshEvents()
	{
		if (httpClient != null)
		{
			httpClient.requestEvents();
		}
	}

	public boolean isSignedUp(String eventId)
	{
		if (playerName == null)
		{
			return false;
		}
		for (Event event : events)
		{
			if (event.getEventId().equals(eventId))
			{
				return event.getSignups() != null &&
					event.getSignups().stream()
						.anyMatch(s -> s.getOsrsName().equalsIgnoreCase(playerName));
			}
		}
		return false;
	}
}

package com.arceuuscc.plugin;

import net.runelite.client.RuneLite;
import net.runelite.client.externalplugins.ExternalPluginManager;

public class ArceuusCCPluginTest {
    public static void main(String[] args) throws Exception {
        System.out.println("[Arceuus CC] Loading plugin...");
        try {
            ExternalPluginManager.loadBuiltin(ArceuusCCPlugin.class);
            System.out.println("[Arceuus CC] Plugin registered with ExternalPluginManager");
        } catch (Exception e) {
            System.err.println("[Arceuus CC] Failed to load plugin: " + e.getMessage());
            e.printStackTrace();
        }
        System.out.println("[Arceuus CC] Starting RuneLite...");
        RuneLite.main(args);
    }
}

